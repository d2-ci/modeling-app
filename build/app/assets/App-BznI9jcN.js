var ZR=Object.defineProperty;var QT=i=>{throw TypeError(i)};var XR=(i,e,t)=>e in i?ZR(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var Ci=(i,e,t)=>XR(i,typeof e!="symbol"?e+"":e,t),Nb=(i,e,t)=>e.has(i)||QT("Cannot "+t);var Bi=(i,e,t)=>(Nb(i,e,"read from private field"),t?t.call(i):e.get(i)),Ws=(i,e,t)=>e.has(i)?QT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),rs=(i,e,t,r)=>(Nb(i,e,"write to private field"),r?r.call(i,t):e.set(i,t),t),sa=(i,e,t)=>(Nb(i,e,"access private method"),t);var tm=(i,e,t,r)=>({set _(n){rs(i,e,n,t)},get _(){return Bi(i,e,r)}});import{P as X,c as Me,e as _0,l as nk,s as KR,a as Bt,b as QR,t as Jt,r as Ie,R as de,_ as yt,d as Gi,m as vg,f as Js,L as xg,g as rh,C as La,I as nh,h as JR,S as sk,i as ve,F as eL,B as C0,j as ak,n as Zm,k as JT,o as tL,Q as iL,p as rL,q as nL,u as $s,v as sL,w as aL,x as oL,y as lL,z as cL,A as ok,D as eS,E as tS,G as uL,H as dL,J as hL,K as pL,M as lk,N as fL,O as sh,T as eo,U as Ti,V as va,W as Oo,X as go,Y as jo,Z as to,$ as bg,a0 as Ov,a1 as Yl,a2 as y_,a3 as tn,a4 as mL,a5 as gL,a6 as xa,a7 as ba,a8 as yL,a9 as z,aa as Tn,ab as Hu,ac as vL,ad as xL,ae as wg,af as tl,ag as Da,ah as ck,ai as v_,aj as x_,ak as iS,al as bL,am as rS,an as X1,ao as wL}from"./main-CLBM_sLJ.js";const _L=i=>typeof i>"u"||i===null||i==="",nS=(i,e,t)=>(r,n,a)=>{const c=r[n];return t?new Error(`Property \`${n}\` on component \`${a}\` is using the \`requiredIf\` prop-validator combined with \`.isRequired\`. This is an invalid combination.`):typeof i!="function"?new Error("The `condition` argument passed to the `requiredIf` prop-validator was not a function."):typeof e!="function"?new Error("The `propType` argument passed to the `requiredIf` prop-validator was not a function."):i(r)&&_L(c)?new Error(`Invalid prop \`${n}\` supplied to \`${a}\`, this prop is conditionally required but has value \`${c}\`. The condition that made this prop required is: \`${i.toString()}\`.`):(X.checkPropTypes({[n]:e},r,"prop",a),null)};function Un(i,e){const t=nS(i,e,!1);return t.isRequired=nS(i,e,!0),t}const CL=Object.freeze(Object.defineProperty({__proto__:null,colors:Me,elevations:_0,layers:nk,sharedPropTypes:KR,spacers:Bt,spacersNum:QR,theme:Jt},Symbol.toStringTag,{value:"Module"}));function jv(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M8 2a1 1 0 011 1v4h4a1 1 0 010 2H9v4a1 1 0 01-2 0V9H3a1 1 0 110-2h4V3a1 1 0 011-1z",fill:"currentColor",fillRule:"evenodd"}))}jv.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function b_(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M12 3a1 1 0 011 1v7h7a1 1 0 010 2h-7v7a1 1 0 01-2 0v-7H4a1 1 0 010-2h7V4a1 1 0 011-1z",fill:"currentColor",fillRule:"evenodd"}))}b_.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function uk(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M19 3a2 2 0 012 2v4h-1v10a2 2 0 01-2 2H6a2 2 0 01-2-2V9H3V5a2 2 0 012-2zm-1 6H6v10h12zm-4 3v2h-4v-2zm5-7H5v2h14z",fill:"currentColor"}))}uk.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function _g(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M7.354 2.646a.5.5 0 01.057.638l-.057.07L3.207 7.5H14a.5.5 0 01.09.992L14 8.5H3.207l4.147 4.146a.5.5 0 01.057.638l-.057.07a.5.5 0 01-.638.057l-.07-.057-5-5a.5.5 0 01-.057-.638l.057-.07 5-5a.5.5 0 01.708 0z",fill:"currentColor"}))}_g.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Fv(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M9.284 2.589l.07.057 5 5 .011.013a.503.503 0 01.033.039l-.044-.052A.502.502 0 0114.5 8v.02a.503.503 0 01-.005.052L14.5 8a.502.502 0 01-.089.284l-.013.018a.503.503 0 01-.033.04l-.011.012-5 5a.5.5 0 01-.765-.638l.057-.07L12.793 8.5H2a.5.5 0 01-.09-.992L2 7.5h10.793L8.646 3.354a.5.5 0 01-.057-.638l.057-.07a.5.5 0 01.638-.057z",fill:"currentColor"}))}Fv.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Bv(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M13.613 5.21l.094.083 6 6a1 1 0 01.083 1.32l-.083.094-6 6a1 1 0 01-1.497-1.32l.083-.094L16.584 13H5a1 1 0 01-.117-1.993L5 11h11.586l-4.293-4.293a1 1 0 01-.083-1.32l.083-.094a1 1 0 011.32-.083z",fill:"currentColor"}))}Bv.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function dk(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M5.784 2.589l.07.057 5 5 .011.013a.503.503 0 01.033.039l-.044-.052A.502.502 0 0111 8v.02a.503.503 0 01-.005.052L11 8a.502.502 0 01-.089.284l-.013.018a.503.503 0 01-.033.04l-.011.012-5 5a.5.5 0 01-.765-.638l.057-.07L9.293 8.5H1.5a.5.5 0 01-.09-.992L1.5 7.5h7.793L5.146 3.354a.5.5 0 01-.057-.638l.057-.07a.5.5 0 01.638-.057zm4 0l.07.057 5 5a.5.5 0 01.057.638l-.057.07-5 5a.5.5 0 01-.765-.638l.057-.07L13.793 8 9.146 3.354a.5.5 0 01-.057-.638l.057-.07a.5.5 0 01.638-.057z",fill:"currentColor"}))}dk.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function hk(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M11.5 2a.5.5 0 01.5.5V4h1a1 1 0 011 1v8a1 1 0 01-1 1H3a1 1 0 01-1-1V5a1 1 0 011-1h1V2.5a.5.5 0 011 0V4h6V2.5a.5.5 0 01.5-.5zM13 6H3v7h10zm-8 4a1 1 0 110 2 1 1 0 010-2zm3 0a1 1 0 110 2 1 1 0 010-2zM5 7a1 1 0 110 2 1 1 0 010-2zm3 0a1 1 0 110 2 1 1 0 010-2zm3 0a1 1 0 110 2 1 1 0 010-2z",fill:"currentColor"}))}hk.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function pk(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M13.646 3.646a.5.5 0 01.765.638l-.057.07-8 8a.5.5 0 01-.638.057l-.07-.057-3-3a.5.5 0 01.638-.765l.07.057L6 11.293z",fill:"currentColor"}))}pk.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function $v(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M4.146 6.146a.5.5 0 01.638-.057l.07.057L8 9.293l3.146-3.147a.5.5 0 01.638-.057l.07.057a.5.5 0 01.057.638l-.057.07-3.5 3.5a.5.5 0 01-.638.057l-.07-.057-3.5-3.5a.5.5 0 010-.708z",fill:"currentColor"}))}$v.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function fk(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M11.293 15.707a1 1 0 001.414 0l5-5a1 1 0 00-1.414-1.414L12 13.586 7.707 9.293a1 1 0 00-1.414 1.414z",fill:"currentColor"}))}fk.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function w_(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M9.146 4.146a.5.5 0 01.765.638l-.057.07L6.707 8l3.147 3.146a.5.5 0 01.057.638l-.057.07a.5.5 0 01-.638.057l-.07-.057-3.5-3.5a.5.5 0 01-.057-.638l.057-.07z",fill:"currentColor"}))}w_.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function mk(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M13.293 6.293a1 1 0 011.497 1.32l-.083.094L10.415 12l4.292 4.293a1 1 0 01.083 1.32l-.083.094a1 1 0 01-1.32.083l-.094-.083-5-5a1 1 0 01-.083-1.32l.083-.094z",fill:"currentColor"}))}mk.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function __(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M6.146 4.146a.5.5 0 01.638-.057l.07.057 3.5 3.5a.5.5 0 01.057.638l-.057.07-3.5 3.5a.5.5 0 01-.765-.638l.057-.07L9.293 8 6.146 4.854a.5.5 0 01-.057-.638z",fill:"currentColor"}))}__.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function gk(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M11.293 8.293a1 1 0 011.32-.083l.094.083 5 5a1 1 0 01-1.32 1.497l-.094-.083L12 10.415l-4.293 4.292a1 1 0 01-1.32.083l-.094-.083a1 1 0 01-.083-1.32l.083-.094z",fill:"currentColor"}))}gk.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function yk(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("g",{fill:"currentColor"},Ie.createElement("path",{d:"M14 3a1 1 0 011 1v10a1 1 0 01-1 1H4a1 1 0 01-1-1V4a1 1 0 011-1zm0 1H4v10h10z"}),Ie.createElement("path",{d:"M11 1v1H2v9H1V2a1 1 0 011-1z"})))}yk.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Cg(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M13.5 3a.5.5 0 110 1H13v10a1 1 0 01-1 1H4a1 1 0 01-1-1V4h-.5a.5.5 0 010-1zM12 4H4v10h8zM7 6v6H6V6zm3 0v6H9V6zm-.5-5a.5.5 0 010 1h-3a.5.5 0 010-1z",fill:"currentColor"}))}Cg.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function vk(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M20 5a1 1 0 010 2h-1v13a2 2 0 01-2 2H7a2 2 0 01-2-2V7H4a1 1 0 110-2zm-3 2H7v13h10zm-6 2v8h-1V9zm3 0v8h-1V9zm1-7v2H9V2z",fill:"currentColor"}))}vk.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function C_(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M12 1a1 1 0 011 1v11a1 1 0 01-1 1H4a1 1 0 01-1-1V2a1 1 0 011-1zm-8 9v3h8v-3zm2 1v1H5v-1zm0-4v1H5V7zm6-5H4v3h8zM6 3v1H5V3zM4 9h8V6H4z",fill:"currentColor"}))}C_.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function xk(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M6 1v4H4v2h6V6h4v4h-4V8H4v4h6v-1h4v4h-4v-2H3.5a.5.5 0 01-.492-.41L3 12.5V5H2V1zm7 11h-2v2h2zm0-5h-2v2h2zM5 2H3v2h2z",fill:"currentColor"}))}xk.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function bk(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M20 14a1 1 0 01.993.883L21 15v3a3 3 0 01-2.824 2.995L18 21H6a3 3 0 01-2.995-2.824L3 18v-3a1 1 0 011.993-.117L5 15v3a1 1 0 00.883.993L6 19h12a1 1 0 00.993-.883L19 18v-3a1 1 0 011-1zM12 3a1 1 0 01.993.883L13 4v9.584l2.293-2.291a1 1 0 011.32-.083l.094.083a1 1 0 01.083 1.32l-.083.094-4 4a1 1 0 01-1.32.083l-.094-.083-4-4a1 1 0 011.32-1.497l.094.083L11 13.584V4a1 1 0 011-1z",fill:"currentColor"}))}bk.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function wk(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M9.5 16a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm5 0a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm-5-6a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm5 0a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm-5-6a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm5 0a1.5 1.5 0 110 3 1.5 1.5 0 010-3z",fill:"currentColor",fillRule:"evenodd"}))}wk.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function T_(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M10.613 2.624l.094.083 2.586 2.586a1 1 0 01.083 1.32l-.083.094L6 14H2v-4l7.293-7.293a1 1 0 011.32-.083zm-.613.79l-6.793 6.792 2.585 2.585L12.586 6z",fill:"currentColor"}))}T_.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function S_(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 100 16 8 8 0 000-16zm0 11a1 1 0 110 2 1 1 0 010-2zm1-8v6h-2V7z",fill:"currentColor"}))}S_.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function E_(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M8 1a7 7 0 110 14A7 7 0 018 1zm0 1a6 6 0 100 12A6 6 0 008 2zm.5 5v4H10v1H6v-1h1.5V7zM8 4a.75.75 0 110 1.5A.75.75 0 018 4z",fill:"currentColor"}))}E_.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function _k(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M11 3v2H5v14h14v-6h2v6a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2zm11-2a1 1 0 01.993.883L23 2v6a1 1 0 01-1.993.117L21 8V4.414l-7.293 7.293a1 1 0 01-1.497-1.32l.083-.094L19.584 3H16a1 1 0 01-.993-.883L15 2a1 1 0 01.883-.993L16 1z",fill:"currentColor"}))}_k.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Tg(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M3 7a1 1 0 110 2 1 1 0 010-2zm5 0a1 1 0 110 2 1 1 0 010-2zm5 0a1 1 0 110 2 1 1 0 010-2z",fill:"currentColor",fillRule:"evenodd"}))}Tg.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Ck(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M20 7a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V9a2 2 0 012-2zM6 9H4v6h16V9h-2v3a1 1 0 01-2 0V9h-3v3a1 1 0 01-2 0V9H8v3a1 1 0 01-2 0z",fill:"currentColor"}))}Ck.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Tk(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M6 1a5 5 0 013.871 8.164l4.483 4.482-.708.708L9.164 9.87A5 5 0 116 1zm0 1a4 4 0 100 8 4 4 0 000-8z",fill:"currentColor"}))}Tk.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function k_(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M10 1v2.416l.264.125a5 5 0 01.689.424l.014.011 2.095-1.208 2 3.464-2.094 1.209.016.15.009.136L13 8c0 .182-.01.364-.03.543l-.002.015 2.094 1.21-2 3.464-2.095-1.209-.236.166a4.991 4.991 0 01-.712.386l-.019.008V15H6v-2.417l-.263-.123a5 5 0 01-.69-.425l-.015-.012-2.094 1.209-2-3.464 2.093-1.21-.015-.15-.009-.135L3 8c0-.183.01-.364.03-.543l.001-.016L.938 6.232l2-3.464 2.094 1.208.238-.165c.226-.148.464-.277.711-.386L6 3.416V1zM9 2H7v2.126a3.996 3.996 0 00-1.853 1.07L3.304 4.135l-1 1.732 1.841 1.063a4.004 4.004 0 000 2.142l-1.841 1.063 1 1.732 1.843-1.063c.501.51 1.139.887 1.853 1.071V14h2v-2.126a3.996 3.996 0 001.853-1.07l1.843 1.062 1-1.732-1.84-1.064a4.004 4.004 0 000-2.14l1.84-1.064-1-1.732-1.843 1.063a3.996 3.996 0 00-1.852-1.07zM8 6a2 2 0 110 4 2 2 0 010-4zm0 1a1 1 0 100 2 1 1 0 000-2z",fill:"currentColor"}))}k_.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function K1(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M11.5 1a2.5 2.5 0 11-1.913 4.11l.024.027-3.73 2.098a2.498 2.498 0 01-.003 1.539l.003-.009 3.73 2.098-.024.027a2.5 2.5 0 11-.465.837l-.003.008L5.39 9.636l.023-.026a2.5 2.5 0 110-3.22l-.024-.027 3.73-2.098A2.5 2.5 0 0111.5 1zm0 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm-8-4.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm8-4.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3z",fill:"currentColor"}))}K1.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Sk(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M4.854 10.146a.5.5 0 01.057.638l-.057.07a.5.5 0 01-.638.057l-.07-.057-3-3-.011-.013a.503.503 0 01-.033-.039l.044.052A.502.502 0 011 7.5v-.01c0-.022.002-.043.005-.064L1 7.5a.502.502 0 01.089-.284l.013-.018a.503.503 0 01.033-.04l.011-.012 3-3a.5.5 0 01.765.638l-.057.07L2.706 7H12a3 3 0 01.176 5.995L12 13H9.5a.5.5 0 01-.09-.992L9.5 12H12a2 2 0 00.15-3.995L12 8H2.708z",fill:"currentColor"}))}Sk.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Ek(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M13 15a4 4 0 014 4v2H7v-2a4 4 0 014-4zm0 2h-2a2 2 0 00-1.995 1.85L9 19h6a2 2 0 00-1.85-1.995zM7 9v2H6a2 2 0 00-1.995 1.85L4 13h3v2H2v-2a4 4 0 014-4zm11 0a4 4 0 014 4v2h-5v-2h3a2 2 0 00-1.85-1.995L18 11h-1V9zm-6-1a3 3 0 110 6 3 3 0 010-6zm0 2a1 1 0 100 2 1 1 0 000-2zM7 2a3 3 0 110 6 3 3 0 010-6zm10 0a3 3 0 110 6 3 3 0 010-6zM7 4a1 1 0 100 2 1 1 0 000-2zm10 0a1 1 0 100 2 1 1 0 000-2z",fill:"currentColor"}))}Ek.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function M_(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M8 3c4 0 7 4 7 5s-3 5-7 5-7-4-7-5 3-5 7-5zm0 1c-1.52 0-3.033.7-4.331 1.868a8.15 8.15 0 00-1.306 1.484A4.336 4.336 0 002 8l.042.091c.055.114.164.321.321.557a8.15 8.15 0 001.306 1.484C4.967 11.3 6.479 12 8 12s3.033-.7 4.331-1.868a8.15 8.15 0 001.306-1.484C13.873 8.294 14 8.004 14 8l-.042-.091a4.902 4.902 0 00-.321-.557 8.15 8.15 0 00-1.306-1.484C11.033 4.7 9.521 4 8 4zm0 1a3 3 0 110 6 3 3 0 010-6zm0 1a2 2 0 100 4 2 2 0 000-4z",fill:"currentColor"}))}M_.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function kk(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M1 0v15h15v1H0V0zm1 3l4 5 4-2 5 5v3H2z",fill:"currentColor",fillRule:"evenodd"}))}kk.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Mk(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",color:e,"data-test":t},Ie.createElement("path",{fill:"currentColor",d:"M4 2v18h18v2H2V2h2zm18 10v6H6v-4l5-2 5 4 6-4zM6 3l5 3 5-2 6 4v2l-6 4-5-4-5 2V3z"}))}Mk.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Ak(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",color:e,"data-test":t},Ie.createElement("path",{fill:"currentColor",d:"M4 2v18h18v2H2V2h2zm2.92 3.606l2.498 5.831 3.757-2.819 4 5.001L20.4 11.2l1.2 1.6-4.775 3.582-4-5.001-4.243 3.182-3.501-8.17 1.838-.787z"}))}Ak.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Ik(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",color:e,"data-test":t},Ie.createElement("path",{fill:"currentColor",d:"M4 2v18h18v2H2V2h2zm2.91 1.586L8.898 7.96l2.313-2.774 1.94 3.882 2.743-4.936 2.968 4.155 1.228-2.7 1.82.828-1.706 3.752 1.61 2.253-1.628 1.162-.938-1.313-3.205 7.054-2.985-5.968-2.147 3.866-2.516-5.533-1.627 1.953-1.536-1.28 2.244-2.695L5.09 4.414l1.82-.828zm9.196 4.282l-1.871 3.367 1.722 3.442 1.949-4.289-1.8-2.52zm-5.317.947l-.972 1.166 1.272 2.798.885-1.593-1.185-2.371z"}))}Ik.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Pk(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M8.85 1.839l.056.103 5.43 11.635a1 1 0 01-.79 1.416L13.43 15H2.57a1 1 0 01-.95-1.314l.044-.109 5.43-11.635a1 1 0 011.757-.103zM8 2.365L2.57 14h10.86zM8 11a1 1 0 110 2 1 1 0 010-2zm.5-6v5h-1V5z",fill:"currentColor"}))}Pk.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Dk(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:16,viewBox:"0 0 15 16",width:15,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M8.85 1.839l.056.103 5.43 11.635a1 1 0 01-.79 1.416L13.43 15H2.57a1 1 0 01-.95-1.314l.044-.109 5.43-11.635a1 1 0 011.757-.103zM8 11a1 1 0 100 2 1 1 0 000-2zm1-6H7v5h2z",fill:"currentColor"}))}Dk.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};function Rk(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ie.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ie.createElement("path",{d:"M12 3a9 9 0 110 18 9 9 0 010-18zm0 2a6.967 6.967 0 00-3.848 1.152l.494.494a.5.5 0 00.708 0l.5-.5A.5.5 0 0110.207 6h.859a.5.5 0 01.416.777l-1.434 2.15a.5.5 0 00-.069.157l-.384 1.537A.5.5 0 019.11 11H8.5a.5.5 0 01-.5-.5V10a.414.414 0 00-.707-.293l-.94.94a.5.5 0 000 .707l1.5 1.5a.5.5 0 00.354.146h1.484a.5.5 0 01.447.276l.75 1.5a.5.5 0 010 .448L9.275 18.45c.838.354 1.759.55 2.725.55a6.968 6.968 0 004.026-1.273.43.43 0 01-.026-.152V15.36a.5.5 0 00-.342-.474l-2.184-.728a.5.5 0 01-.316-.632l.728-2.184A.5.5 0 0114.36 11h4.57a6.951 6.951 0 00-.712-2.218l-.928.928a.5.5 0 01-.631.063l-2.243-1.496a.5.5 0 01-.139-.693l1.133-1.699A6.968 6.968 0 0012 5zm-7 7.009a6.98 6.98 0 002.435 5.298l-.398-1.195a.5.5 0 00-.12-.195l-.77-.77A.5.5 0 016 14.792v-1.586a.5.5 0 00-.146-.353l-.797-.797z",fill:"currentColor"}))}Rk.propTypes={color:X.string,dataTest:X.string,ariaLabel:X.string};const Ya=["svg.jsx-4069423049{display:block;pointer-events:none;}",`svg.jsx-4069423049 .border.jsx-4069423049{fill:${Me.grey800};}`,`svg.jsx-4069423049 .background.jsx-4069423049,svg.jsx-4069423049 .indeterminate.jsx-4069423049,svg.jsx-4069423049 .checkmark.jsx-4069423049{fill:${Me.white};}`,`svg.checked.jsx-4069423049 .background.jsx-4069423049,svg.indeterminate.jsx-4069423049 .background.jsx-4069423049{fill:${Me.teal500};}`,`svg.valid.jsx-4069423049 .background.jsx-4069423049{fill:${Me.blue600};}`,`svg.warning.jsx-4069423049 .background.jsx-4069423049{fill:${Me.yellow700};}`,`svg.error.jsx-4069423049 .background.jsx-4069423049{fill:${Me.red500};}`,`svg.checked.jsx-4069423049 .border.jsx-4069423049,svg.indeterminate.jsx-4069423049 .border.jsx-4069423049{fill:${Me.teal900};}`,"svg.jsx-4069423049:not(.checked) .checkmark.jsx-4069423049,svg.jsx-4069423049:not(.indeterminate) .indeterminate.jsx-4069423049{fill:none;}",`svg.jsx-4069423049:not(.checked):not(.indeterminate) .background.jsx-4069423049{fill:${Me.white};}`];Ya.__hash="4069423049";function Lk(i){let{className:e}=i;return de.createElement("svg",{viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",className:`jsx-${Ya.__hash} `+yt.dynamic([["2753140462",[Me.grey300,Me.grey400,Me.blue600,Me.blue700,Me.yellow700,Me.yellow800,Me.red500,Me.red700]]])+" "+(e||"")},de.createElement("rect",{x:"0",y:"0",width:"18",height:"18",rx:"3",className:`jsx-${Ya.__hash} `+yt.dynamic([["2753140462",[Me.grey300,Me.grey400,Me.blue600,Me.blue700,Me.yellow700,Me.yellow800,Me.red500,Me.red700]]])+" background"}),de.createElement("path",{d:"M15,0 C16.6568542,0 18,1.34314575 18,3 L18,15 C18,16.6568542 16.6568542,18 15,18 L3,18 C1.34314575,18 0,16.6568542 0,15 L0,3 C0,1.34314575 1.34314575,0 3,0 L15,0 Z M15,1 L3,1 C1.9456382,1 1.08183488,1.81587779 1.00548574,2.85073766 L1,3 L1,15 C1,16.0543618 1.81587779,16.9181651 2.85073766,16.9945143 L3,17 L15,17 C16.0543618,17 16.9181651,16.1841222 16.9945143,15.1492623 L17,15 L17,3 C17,1.9456382 16.1841222,1.08183488 15.1492623,1.00548574 L15,1 Z",className:`jsx-${Ya.__hash} `+yt.dynamic([["2753140462",[Me.grey300,Me.grey400,Me.blue600,Me.blue700,Me.yellow700,Me.yellow800,Me.red500,Me.red700]]])+" border"}),de.createElement("path",{d:"M4.74451387,8.02852516 C4.39595738,8.11985643 4.12375034,8.39235188 4.03251575,8.74127768 C3.94128115,9.09020348 4.04521722,9.46125864 4.30437605,9.71182782 L7.29823844,12.7078028 C7.68753993,13.0973991 8.31859767,13.0973991 8.70789916,12.7078028 L13.695624,6.71585285 C13.9547828,6.46528367 14.0587189,6.09422851 13.9674843,5.74530271 C13.8762497,5.39637691 13.6040426,5.12388146 13.2554861,5.0325502 C12.9069296,4.94121893 12.5362672,5.04526513 12.2859632,5.30469855 L8.0030688,10.5910713 L5.71403676,8.30067351 C5.46373279,8.0412401 5.09307036,7.9371939 4.74451387,8.02852516 Z",className:`jsx-${Ya.__hash} `+yt.dynamic([["2753140462",[Me.grey300,Me.grey400,Me.blue600,Me.blue700,Me.yellow700,Me.yellow800,Me.red500,Me.red700]]])+" checkmark"}),de.createElement("rect",{x:"4",y:"8",width:"10",height:"2",rx:"1",className:`jsx-${Ya.__hash} `+yt.dynamic([["2753140462",[Me.grey300,Me.grey400,Me.blue600,Me.blue700,Me.yellow700,Me.yellow800,Me.red500,Me.red700]]])+" indeterminate"}),de.createElement(yt,{id:Ya.__hash},Ya),de.createElement(yt,{id:"2753140462",dynamic:[Me.grey300,Me.grey400,Me.blue600,Me.blue700,Me.yellow700,Me.yellow800,Me.red500,Me.red700]},["svg.__jsx-style-dynamic-selector{width:18px;height:18px;}",`svg.disabled.__jsx-style-dynamic-selector .background.__jsx-style-dynamic-selector{fill:${Me.grey300};}`,`svg.disabled.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Me.grey400};}`,`svg.valid.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Me.blue600};}`,`svg.valid.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.valid.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Me.blue700};}`,`svg.warning.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Me.yellow700};}`,`svg.warning.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.warning.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Me.yellow800};}`,`svg.error.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Me.red500};}`,`svg.error.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.error.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Me.red700};}`]))}Lk.propTypes={className:X.string};function Nk(i){let{className:e}=i;return de.createElement("svg",{viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg",className:`jsx-${Ya.__hash} `+yt.dynamic([["86695588",[Me.grey400,Me.grey400,Me.grey500,Me.blue600,Me.blue800,Me.yellow700,Me.yellow800,Me.red500,Me.red800]]])+" "+(e||"")},de.createElement("rect",{x:"0",y:"0",width:"14",height:"14",rx:"2",className:`jsx-${Ya.__hash} `+yt.dynamic([["86695588",[Me.grey400,Me.grey400,Me.grey500,Me.blue600,Me.blue800,Me.yellow700,Me.yellow800,Me.red500,Me.red800]]])+" background"}),de.createElement("path",{d:"M2,0 L12,0 C13.1045695,0 14,0.8954305 14,2 L14,12 C14,13.1045695 13.1045695,14 12,14 L2,14 C0.8954305,14 0,13.1045695 0,12 L0,2 C0,0.8954305 0.8954305,0 2,0 Z M2,1 C1.44771525,1 1,1.44771525 1,2 L1,12 C1,12.5522847 1.44771525,13 2,13 L12,13 C12.5522847,13 13,12.5522847 13,12 L13,2 C13,1.44771525 12.5522847,1 12,1 L2,1 Z",className:`jsx-${Ya.__hash} `+yt.dynamic([["86695588",[Me.grey400,Me.grey400,Me.grey500,Me.blue600,Me.blue800,Me.yellow700,Me.yellow800,Me.red500,Me.red800]]])+" border"}),de.createElement("path",{d:"M10.3520005,3.30015877 L5.54268293,8.03252726 L3.64634146,6.16652726 L2.28668615,7.5044281 L5.54310367,10.7010587 L11.7145993,4.628307 L10.3520005,3.30015877 Z M5.54268293,9.43547274 L5.61193184,9.36733181 L5.54226219,9.29894127 L5.47309681,9.367 L5.54268293,9.43547274 Z M10.6496329,4.41023392 L10.6495057,4.35652297 L10.5648412,4.35672356 L10.2854007,4.631693 L10.3553166,4.69984123 L10.6496329,4.41023392 Z M3.42891348,7.22439304 L3.35030905,7.22439304 L3.35034135,7.27820863 L3.64634146,7.56947274 L3.71331385,7.5035719 L3.42891348,7.22439304 Z",className:`jsx-${Ya.__hash} `+yt.dynamic([["86695588",[Me.grey400,Me.grey400,Me.grey500,Me.blue600,Me.blue800,Me.yellow700,Me.yellow800,Me.red500,Me.red800]]])+" checkmark"}),de.createElement("rect",{x:"3",y:"6",width:"8",height:"2",className:`jsx-${Ya.__hash} `+yt.dynamic([["86695588",[Me.grey400,Me.grey400,Me.grey500,Me.blue600,Me.blue800,Me.yellow700,Me.yellow800,Me.red500,Me.red800]]])+" indeterminate"}),de.createElement(yt,{id:Ya.__hash},Ya),de.createElement(yt,{id:"86695588",dynamic:[Me.grey400,Me.grey400,Me.grey500,Me.blue600,Me.blue800,Me.yellow700,Me.yellow800,Me.red500,Me.red800]},["svg.__jsx-style-dynamic-selector{width:14px;height:14px;}",`svg.disabled.__jsx-style-dynamic-selector .background.__jsx-style-dynamic-selector{fill:${Me.grey400};}`,`svg.disabled.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Me.grey400};}`,`svg.disabled.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.disabled.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Me.grey500};}`,`svg.valid.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Me.blue600};}`,`svg.valid.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.valid.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Me.blue800};}`,`svg.warning.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Me.yellow700};}`,`svg.warning.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.warning.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Me.yellow800};}`,`svg.error.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Me.red500};}`,`svg.error.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.error.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Me.red800};}`]))}Nk.propTypes={className:X.string};function dp(i,e,t){return(e=TL(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function TL(i){var e=SL(i,"string");return typeof e=="symbol"?e:e+""}function SL(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class pl extends Ie.Component{constructor(){super(...arguments),dp(this,"ref",Ie.createRef()),dp(this,"handleChange",e=>{this.props.onChange&&this.props.onChange(this.createHandlerPayload(),e)}),dp(this,"handleBlur",e=>{this.props.onBlur&&this.props.onBlur(this.createHandlerPayload(),e)}),dp(this,"handleFocus",e=>{this.props.onFocus&&this.props.onFocus(this.createHandlerPayload(),e)}),dp(this,"handleKeyDown",e=>{this.props.onKeyDown&&this.props.onKeyDown(this.createHandlerPayload(),e)})}componentDidMount(){this.props.initialFocus&&this.ref.current.focus(),this.setIndeterminate(this.props.indeterminate)}componentDidUpdate(e){e.indeterminate!==this.props.indeterminate&&this.setIndeterminate(this.props.indeterminate)}setIndeterminate(e){this.ref.current.indeterminate=e}createHandlerPayload(){return{value:this.props.value,name:this.props.name,checked:!this.props.checked}}render(){const{checked:e=!1,indeterminate:t=!1,className:r,disabled:n,error:a,label:c,name:s,tabIndex:h,valid:p,value:m,warning:y,dense:g,dataTest:x="dhis2-uicore-checkbox"}=this.props,v=Gi({checked:e,indeterminate:t,disabled:n,valid:p,error:a,warning:y});return de.createElement("label",{"data-test":x,className:yt.dynamic([["1252368010",[Me.grey900,Jt.disabled,Bt.dp4,Jt.focus]]])+" "+(Gi(r,{disabled:n,dense:g})||"")},de.createElement("input",{type:"checkbox",ref:this.ref,name:s,value:m,checked:e,disabled:n,tabIndex:h,onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur,className:yt.dynamic([["1252368010",[Me.grey900,Jt.disabled,Bt.dp4,Jt.focus]]])}),de.createElement("div",{className:yt.dynamic([["1252368010",[Me.grey900,Jt.disabled,Bt.dp4,Jt.focus]]])+" "+(Gi("icon",{dense:g})||"")},g?de.createElement(Nk,{className:v}):de.createElement(Lk,{className:v})),c,de.createElement(yt,{id:"1252368010",dynamic:[Me.grey900,Jt.disabled,Bt.dp4,Jt.focus]},[`label.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;cursor:pointer;color:${Me.grey900};font-size:14px;line-height:19px;}`,"label.dense.__jsx-style-dynamic-selector{font-size:14px;line-height:16px;}",`label.disabled.__jsx-style-dynamic-selector{cursor:not-allowed;color:${Jt.disabled};}`,"input.__jsx-style-dynamic-selector{opacity:0;position:absolute;height:18px;width:18px;inset-inline-start:3px;}","label.dense.__jsx-style-dynamic-selector input.__jsx-style-dynamic-selector{height:14px;width:14px;}",`.icon.__jsx-style-dynamic-selector{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-inline-end:${Bt.dp4};border:2px solid transparent;padding:1px;border-radius:5px;}`,"label.dense.__jsx-style-dynamic-selector .icon.__jsx-style-dynamic-selector{margin-inline-end:3px;border-radius:4px;}",`input.__jsx-style-dynamic-selector:focus+.icon.__jsx-style-dynamic-selector{outline:3px solid ${Jt.focus};outline-offset:-3px;}`]))}}dp(pl,"defaultProps",{checked:!1,indeterminate:!1,dataTest:"dhis2-uicore-checkbox"});const sS=vg(["checked","indeterminate"],X.bool);pl.propTypes={checked:sS,className:X.string,dataTest:X.string,dense:X.bool,disabled:X.bool,error:Js,indeterminate:sS,initialFocus:X.bool,label:X.node,name:X.string,tabIndex:X.string,valid:Js,value:X.string,warning:Js,onBlur:X.func,onChange:X.func,onFocus:X.func,onKeyDown:X.func};var EL=void 0;const kL=(i,e,t)=>{let r;return function(){for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];const s=EL,h=()=>{r=null,i.apply(s,a)};clearTimeout(r),r=setTimeout(h,e)}},zk=i=>{let{dataTest:e,onToggle:t,children:r,tabIndex:n="0",error:a,warning:c,valid:s,disabled:h,dense:p,className:m,inputRef:y}=i;const g=Gi(m,"root",{error:a,warning:c,valid:s,disabled:h,dense:p});return de.createElement("div",{onClick:t,tabIndex:n,ref:y,"data-test":e,className:yt.dynamic([["1240267656",[Me.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,Me.grey100,Me.grey500,Jt.disabled]]])+" "+(g||"")},de.createElement("div",{className:yt.dynamic([["1240267656",[Me.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,Me.grey100,Me.grey500,Jt.disabled]]])+" root-children"},r),de.createElement("div",{className:yt.dynamic([["1240267656",[Me.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,Me.grey100,Me.grey500,Jt.disabled]]])+" root-right"},de.createElement($v,null)),de.createElement(yt,{id:"1240267656",dynamic:[Me.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,Me.grey100,Me.grey500,Jt.disabled]},[`.root.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:white;border-radius:3px;border:1px solid ${Me.grey500};box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:40px;padding-block:6px;padding-inline:12px 6px;box-shadow:inset 0 0 1px 0 rgba(48,54,60,0.1);}`,`.root.__jsx-style-dynamic-selector:not(.disabled):focus,.root.__jsx-style-dynamic-selector:not(.disabled):active{outline:none;box-shadow:inset 0 0 0 2px ${Jt.focus};border-color:${Jt.focus};}`,`.root.valid.__jsx-style-dynamic-selector{border-color:${Jt.valid};}`,`.root.warning.__jsx-style-dynamic-selector{border-color:${Jt.warning};}`,`.root.error.__jsx-style-dynamic-selector{border-color:${Jt.error};}`,`.root.disabled.__jsx-style-dynamic-selector{background-color:${Me.grey100};border-color:${Me.grey500};color:${Jt.disabled};cursor:not-allowed;}`,".root.dense.__jsx-style-dynamic-selector{padding-block:2px;padding-inline:8px 4px;min-height:32px;}",".root-children.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".root-right.__jsx-style-dynamic-selector{margin-block-start:4px;margin-inline-start:2px;}"]))};zk.propTypes={dataTest:X.string.isRequired,inputRef:X.object.isRequired,onToggle:X.func.isRequired,children:X.element,className:X.string,dense:X.bool,disabled:X.bool,error:Js,tabIndex:X.string,valid:Js,warning:Js};const Ok=i=>{let{children:e,dataTest:t,maxHeight:r="280px",menuWidth:n,onClick:a,selectRef:c}=i;return de.createElement(xg,{onBackdropClick:a,transparent:!0},de.createElement(rh,{reference:c,placement:"bottom-start",observeReferenceResize:!0},de.createElement("div",{"data-test":`${t}-menuwrapper`,className:yt.dynamic([["1871652546",[n,r,Me.white,Me.grey200,_0.popover]]])},e,de.createElement(yt,{id:"1871652546",dynamic:[n,r,Me.white,Me.grey200,_0.popover]},[`div.__jsx-style-dynamic-selector{width:${n};height:auto;max-height:${r};overflow:auto;background:${Me.white};border:1px solid ${Me.grey200};border-radius:3px;box-shadow:${_0.popover};}`]))))};Ok.propTypes={dataTest:X.string.isRequired,menuWidth:X.string.isRequired,selectRef:X.object.isRequired,children:X.node,maxHeight:X.string,onClick:X.func};function Go(i,e,t){return(e=ML(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function ML(i){var e=AL(i,"string");return typeof e=="symbol"?e:e+""}function AL(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}const IL=27,PL=32,DL=38,RL=40;class Uv extends Ie.Component{constructor(){super(...arguments),Go(this,"state",{open:!1,menuWidth:"auto"}),Go(this,"selectRef",de.createRef()),Go(this,"inputRef",de.createRef()),Go(this,"onResize",kL(()=>{const e=this.getMenuWidth();this.state.menuWidth!==e&&this.setState({menuWidth:e})},50)),Go(this,"handleFocusInput",()=>{this.inputRef.current.focus()}),Go(this,"onFocus",e=>{const{onFocus:t,disabled:r,selected:n}=this.props;r||!t||t({selected:n},e)}),Go(this,"handleOpen",()=>{this.setState({open:!0,menuWidth:this.getMenuWidth()})}),Go(this,"handleClose",()=>{this.setState({open:!1})}),Go(this,"onToggle",e=>{this.props.disabled||(e.stopPropagation(),this.state.open?this.handleClose():this.handleOpen())}),Go(this,"onOutsideClick",e=>{const{onBlur:t,disabled:r,selected:n}=this.props;r||(this.handleClose(),t&&t({selected:n},e))}),Go(this,"onKeyDown",e=>{const{onKeyDown:t,disabled:r,selected:n}=this.props;if(r||(t&&t({selected:n},e),e.defaultPrevented))return;e.stopPropagation();const{open:a}=this.state,{keyCode:c}=e,s=!a&&(c===PL||c===DL||c===RL);if(a&&c===IL)return this.handleClose();if(s)return this.handleOpen()})}componentDidMount(){this.props.initialFocus&&this.inputRef.current.focus(),this.setState({menuWidth:this.getMenuWidth()}),window.addEventListener("resize",this.onResize)}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}getMenuWidth(){const{offsetWidth:e}=this.inputRef.current,{menuWidth:t}=this.state;return e&&`${e}px`!==t?`${e}px`:t}render(){const{open:e,menuWidth:t}=this.state,{children:r,className:n,selected:a,onChange:c,tabIndex:s,maxHeight:h,error:p,warning:m,valid:y,disabled:g,dense:x,dataTest:v}=this.props,_={selected:a,onChange:c,options:r,disabled:g},C=de.cloneElement(this.props.input,_),k={selected:a,onChange:c,options:r,handleClose:this.handleClose,handleFocusInput:this.handleFocusInput},w=de.cloneElement(this.props.menu,k);return de.createElement("div",{className:n,ref:this.selectRef,onFocus:this.onFocus,onKeyDown:this.onKeyDown,"data-test":v},de.createElement(zk,{onToggle:this.onToggle,inputRef:this.inputRef,tabIndex:g?"-1":s,error:p,warning:m,valid:y,disabled:g,dense:x,dataTest:`${v}-input`},C),e&&de.createElement(Ok,{onClick:this.onOutsideClick,maxHeight:h,selectRef:this.selectRef,menuWidth:t,dataTest:`${v}-menu`},w))}}Go(Uv,"defaultProps",{dataTest:"dhis2-uicore-select"});Uv.propTypes={input:X.element.isRequired,menu:X.element.isRequired,selected:X.oneOfType([X.string,X.arrayOf(X.string)]).isRequired,children:X.node,className:X.string,dataTest:X.string,dense:X.bool,disabled:X.bool,error:Js,initialFocus:X.bool,maxHeight:X.string,tabIndex:X.string,valid:Js,warning:Js,onBlur:X.func,onChange:X.func,onFocus:X.func,onKeyDown:X.func};const A_=i=>{let{message:e,className:t,dataTest:r}=i;return de.createElement("div",{"data-test":r,className:yt.dynamic([["3603755746",[Bt.dp16,Me.grey700,Jt.fonts,Bt.dp8,Bt.dp24]]])+" "+(Gi(t,"container")||"")},de.createElement("div",{className:yt.dynamic([["3603755746",[Bt.dp16,Me.grey700,Jt.fonts,Bt.dp8,Bt.dp24]]])},de.createElement(La,{small:!0})),e,de.createElement(yt,{id:"3603755746",dynamic:[Bt.dp16,Me.grey700,Jt.fonts,Bt.dp8,Bt.dp24]},[`.container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:${Bt.dp16};-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:${Me.grey700};font-family:${Jt.fonts};font-size:13px;padding-block:${Bt.dp8};padding-inline:${Bt.dp24};}`]))};A_.propTypes={dataTest:X.string.isRequired,className:X.string,message:X.string};const Q1=i=>{let{value:e,onChange:t,placeholder:r,className:n,dataTest:a}=i;return de.createElement("div",{className:yt.dynamic([["730881408",[Me.white,Bt.dp8,Bt.dp8,Bt.dp4,Bt.dp8]]])+" "+(n||"")},de.createElement(nh,{dense:!0,dataTest:a,value:e,onChange:t,type:"text",name:"filter",placeholder:r,initialFocus:!0}),de.createElement(yt,{id:"730881408",dynamic:[Me.white,Bt.dp8,Bt.dp8,Bt.dp4,Bt.dp8]},[`div.__jsx-style-dynamic-selector{position:-webkit-sticky;position:sticky;-webkit-inset-block-start:0;-ms-intb-rlock-start:0;inset-block-start:0;background:${Me.white};padding-block-start:${Bt.dp8};padding-inline-end:${Bt.dp8};padding-block-end:${Bt.dp4};padding-inline-start:${Bt.dp8};z-index:1;}`]))};Q1.propTypes={dataTest:X.string.isRequired,value:X.string.isRequired,className:X.string,placeholder:X.string,onChange:X.func};const jk=i=>{let{message:e,className:t}=i;return de.createElement("div",{className:yt.dynamic([["3788156646",[Me.grey700,Jt.fonts,Bt.dp8,Bt.dp24]]])+" "+(t||"")},e,de.createElement(yt,{id:"3788156646",dynamic:[Me.grey700,Jt.fonts,Bt.dp8,Bt.dp24]},[`div.__jsx-style-dynamic-selector{color:${Me.grey700};font-family:${Jt.fonts};font-size:13px;line-height:16px;padding-block:${Bt.dp8};padding-inline:${Bt.dp24};text-align:center;}`]))};jk.propTypes={message:X.string.isRequired,className:X.string};const I_=i=>i&&"props"in i&&"value"in i.props&&"label"in i.props,P_=i=>de.Children.toArray(i).filter(e=>e!==null&&e!==!1&&e!==void 0),Fk=(i,e)=>de.Children.toArray(e).find(t=>t.props?i===t.props.value:!1),LL=(i,e)=>e.find(t=>i===t),Bk=(i,e)=>e.filter(t=>t!==i);function W0(){return W0=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},W0.apply(null,arguments)}function aS(i,e,t){return(e=NL(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function NL(i){var e=zL(i,"string");return typeof e=="symbol"?e:e+""}function zL(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}let D_=class extends Ie.Component{constructor(){super(...arguments),aS(this,"state",{filter:""}),aS(this,"onFilterChange",e=>{let{value:t}=e;this.setState({filter:t})})}render(){const{dataTest:e,options:t,onChange:r,selected:n,empty:a,handleClose:c,handleFocusInput:s,placeholder:h,noMatchText:p,Menu:m}=this.props,{filter:y}=this.state,g={onChange:r,selected:n,empty:a,handleClose:c,handleFocusInput:s,dataTest:e},x=P_(t);if(de.Children.count(x)===0||!y)return de.createElement(de.Fragment,null,de.createElement(Q1,{dataTest:`${e}-filterinput`,placeholder:h,value:y,onChange:this.onFilterChange}),de.createElement(m,W0({},g,{options:t})));const v=de.Children.map(t,C=>{if(!I_(C))return null;const{label:w}=C.props;return w.toLowerCase().includes(y.toLowerCase())?C:null}),_=de.Children.count(v)>0;return de.createElement(de.Fragment,null,de.createElement(Q1,{dataTest:`${e}-filterinput`,placeholder:h,value:y,onChange:this.onFilterChange}),_?de.createElement(m,W0({},g,{options:v})):de.createElement(jk,{message:p}))}};D_.propTypes={Menu:X.elementType.isRequired,dataTest:X.string.isRequired,noMatchText:X.string.isRequired,selected:X.oneOfType([X.string,X.arrayOf(X.string)]).isRequired,empty:X.node,handleClose:X.func,handleFocusInput:X.func,options:X.node,placeholder:X.string,onChange:X.func};const R_=i=>{let{message:e,className:t,dataTest:r}=i;return de.createElement("div",{"data-test":r,className:yt.dynamic([["3788156646",[Me.grey700,Jt.fonts,Bt.dp8,Bt.dp24]]])+" "+(t||"")},e,de.createElement(yt,{id:"3788156646",dynamic:[Me.grey700,Jt.fonts,Bt.dp8,Bt.dp24]},[`div.__jsx-style-dynamic-selector{color:${Me.grey700};font-family:${Jt.fonts};font-size:13px;line-height:16px;padding-block:${Bt.dp8};padding-inline:${Bt.dp24};text-align:center;}`]))};R_.propTypes={dataTest:X.string.isRequired,message:X.string.isRequired,className:X.string};const OL=4,oS={styles:de.createElement(yt,{id:"1892168270"},[`.jsx-1892168270{z-index:${nk.applicationTop};}`,'div[data-popper-reference-hidden="true"].jsx-1892168270{visibility:hidden;}']),className:"jsx-1892168270"},jL={name:"offset",options:{offset:[0,OL]}},FL={name:"hide"},BL={name:"flip",options:{altBoundary:!0}},Gl=i=>{let{children:e,className:t,closeDelay:r=200,content:n,dataTest:a="dhis2-uicore-tooltip",maxWidth:c=300,openDelay:s=200,placement:h="top"}=i;const[p,m]=Ie.useState(!1),y=Ie.useRef(),g=Ie.useRef(null),x=Ie.useRef(null),v=()=>{clearTimeout(x.current),g.current=setTimeout(()=>{m(!0)},s)},_=()=>{clearTimeout(g.current),x.current=setTimeout(()=>{m(!1)},r)},C=()=>{clearTimeout(x.current),g.current=setTimeout(()=>{m(!0)},s)},k=()=>{clearTimeout(g.current),x.current=setTimeout(()=>{m(!1)},r)},w=E=>{E.key==="Escape"&&(x.current=setTimeout(()=>{m(!1)},r))};return Ie.useEffect(()=>(document.addEventListener("keydown",w),()=>{clearTimeout(g.current),clearTimeout(x.current),document.removeEventListener("keydown",w)}),[]),de.createElement(de.Fragment,null,typeof e=="function"?e({onMouseOver:v,onMouseOut:_,onFocus:C,onBlur:k,ref:y}):de.createElement("span",{onMouseOver:v,onMouseOut:_,onFocus:C,onBlur:k,ref:y,tabIndex:0,"aria-describedby":p?"tooltipContenDhis2Ui":"","data-test":`${a}-reference`,className:yt.dynamic([["3515683788",[c,Me.grey900,Me.white]]])},e),p&&de.createElement(JR,null,de.createElement(rh,{className:oS.className,placement:h,reference:y,modifiers:[jL,BL,FL]},de.createElement("div",{id:"tooltipContenDhis2Ui",onMouseOver:v,onMouseOut:_,"data-test":`${a}-content`,role:"tooltip",className:yt.dynamic([["3515683788",[c,Me.grey900,Me.white]]])+" "+(t||"")},n))),oS.styles,de.createElement(yt,{id:"3515683788",dynamic:[c,Me.grey900,Me.white]},[`div.__jsx-style-dynamic-selector{max-width:${c}px;}`,`div.__jsx-style-dynamic-selector{padding:4px 6px;background-color:${Me.grey900};border-radius:3px;color:${Me.white};font-size:13px;line-height:17px;}`]))};Gl.propTypes={children:X.oneOfType([X.node,X.func]),className:X.string,closeDelay:X.number,content:X.node,dataTest:X.string,maxWidth:X.number,openDelay:X.number,placement:X.oneOf(["top","right","bottom","left"])};const L_=i=>{let{onClear:e,clearText:t,className:r,dataTest:n}=i;return de.createElement(Gl,{openDelay:500,content:t},de.createElement("button",{"data-test":n,onClick:e,type:"button",className:yt.dynamic([["2859518049",[Me.grey500,Me.grey800,Me.grey200,Jt.focus]]])+" "+(r||"")},de.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:yt.dynamic([["2859518049",[Me.grey500,Me.grey800,Me.grey200,Jt.focus]]])},de.createElement("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16Zm3.536-5.879a1 1 0 1 1-1.415 1.414l-2.12-2.12-2.122 2.121a1 1 0 1 1-1.415-1.414L6.586 8 4.464 5.878A1 1 0 1 1 5.88 4.464L8 6.586l2.121-2.121a1 1 0 1 1 1.415 1.414L9.415 8l2.12 2.121Z",fill:"none",className:yt.dynamic([["2859518049",[Me.grey500,Me.grey800,Me.grey200,Jt.focus]]])})),de.createElement(yt,{id:"2859518049",dynamic:[Me.grey500,Me.grey800,Me.grey200,Jt.focus]},["button.__jsx-style-dynamic-selector{background:none;border:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;height:24px;width:24px;border-radius:3px;}","button.__jsx-style-dynamic-selector svg.__jsx-style-dynamic-selector{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",`button.__jsx-style-dynamic-selector svg.__jsx-style-dynamic-selector path.__jsx-style-dynamic-selector{fill:${Me.grey500};}`,`button.__jsx-style-dynamic-selector:hover svg.__jsx-style-dynamic-selector path.__jsx-style-dynamic-selector{fill:${Me.grey800};}`,`button.__jsx-style-dynamic-selector:hover{background:${Me.grey200};}`,`button.__jsx-style-dynamic-selector:focus{outline:2px solid ${Jt.focus};}`])))};L_.propTypes={clearText:X.string.isRequired,dataTest:X.string.isRequired,onClear:X.func.isRequired,className:X.string};const N_=i=>{let{placeholder:e,className:t,dataTest:r}=i;return e?de.createElement("div",{"data-test":r,className:yt.dynamic([["1027033961",[Me.grey600]]])+" "+(t||"")},e,de.createElement(yt,{id:"1027033961",dynamic:[Me.grey600]},[`div.__jsx-style-dynamic-selector{color:${Me.grey600};-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`])):null};N_.propTypes={dataTest:X.string.isRequired,className:X.string,placeholder:X.string};const z_=i=>{let{prefix:e,className:t,dataTest:r}=i;return e?de.createElement("div",{"data-test":r,className:yt.dynamic([["1343055987",[Me.grey600,Bt.dp12]]])+" "+(t||"")},e,de.createElement(yt,{id:"1343055987",dynamic:[Me.grey600,Bt.dp12]},[`div.__jsx-style-dynamic-selector{color:${Me.grey600};padding-inline-end:${Bt.dp12};font-size:14px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`])):null};z_.propTypes={dataTest:X.string.isRequired,className:X.string,prefix:X.string};const $L=(i,e)=>{e.stopPropagation(),e.preventDefault()},UL=i=>{let{isActive:e,onChange:t,selected:r,value:n}=i;return(a,c)=>{if(c.stopPropagation(),e){const p={selected:Bk(n,r)};return t(p,c)}const s={selected:r.concat([n])};return t(s,c)}},O_=i=>{let{options:e,onChange:t,selected:r,empty:n="",dataTest:a}=i;const c=P_(e);if(de.Children.count(c)===0)return typeof n=="string"?de.createElement(R_,{message:n,dataTest:`${a}-empty`}):n;const s=de.Children.map(e,h=>{if(!I_(h))return h;const{value:m,label:y,disabled:g}=h.props,x=!!LL(m,r),v=g?$L:UL({isActive:x,onChange:t,selected:r,value:m});return de.cloneElement(h,{...h.props,onClick:v,active:x})});return de.createElement(de.Fragment,null,s)};O_.propTypes={dataTest:X.string.isRequired,empty:X.node,options:X.node,selected:X.arrayOf(X.string),onChange:X.func};const $k=i=>{let{dataTest:e,options:t,onChange:r,selected:n,empty:a,handleClose:c,handleFocusInput:s,placeholder:h,noMatchText:p}=i;return de.createElement(D_,{dataTest:e,options:t,onChange:r,selected:n,empty:a,handleClose:c,handleFocusInput:s,placeholder:h,noMatchText:p,Menu:O_})};$k.propTypes={dataTest:X.string.isRequired,noMatchText:X.string.isRequired,empty:X.node,handleClose:X.func,handleFocusInput:X.func,options:X.node,placeholder:X.string,selected:X.arrayOf(X.string),onChange:X.func};const Uk=i=>{let{children:e,overflow:t}=i;return de.createElement("span",{className:yt.dynamic([["765109298",[Bt.dp12]]])+" "+(Gi({overflow:t})||"")},e,de.createElement(yt,{id:"765109298",dynamic:[Bt.dp12]},[`span.__jsx-style-dynamic-selector{margin:0 ${Bt.dp12};color:inherit;white-space:nowrap;}`,".overflow.__jsx-style-dynamic-selector{max-width:150px;overflow:hidden;text-overflow:ellipsis;}"]))};Uk.propTypes={children:X.any,overflow:X.bool};const Vk=i=>{let{icon:e,dataTest:t}=i;return e?de.createElement("span",{"data-test":t,className:yt.dynamic([["1889825154",[Bt.dp4]]])},e,de.createElement(yt,{id:"1889825154",dynamic:[Bt.dp4]},[`span.__jsx-style-dynamic-selector{width:24px;height:24px;margin-inline-start:${Bt.dp4};margin-inline-end:-6px;border-radius:50%;overflow:hidden;}`,"span.__jsx-style-dynamic-selector>*{max-height:24px;max-width:24px;}"])):null};Vk.propTypes={dataTest:X.string.isRequired,icon:X.element};function Gk(i){let{className:e}=i;return de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",className:"jsx-2898942518 "+(e||"")},de.createElement("path",{d:"M11.2928932,3.29289322 L12.7071068,4.70710678 L9.41389322,7.99989322 L12.7071068,11.2928932 L11.2928932,12.7071068 L7.99989322,9.41389322 L4.70710678,12.7071068 L3.29289322,11.2928932 L6.58589322,7.99989322 L3.29289322,4.70710678 L4.70710678,3.29289322 L7.99989322,6.58589322 L11.2928932,3.29289322 Z",className:"jsx-2898942518"}),de.createElement(yt,{id:"2898942518"},["svg.jsx-2898942518{fill:inherit;height:16px;width:16px;vertical-align:middle;pointer-events:none;}"]))}Gk.propTypes={className:X.string};const T0=["span.jsx-2824632002{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:20px;width:20px;margin-inline-end:4px;border-radius:12px;margin-inline-start:-8px;}",`span.jsx-2824632002:hover{background:${Me.grey400};}`];T0.__hash="2824632002";const lS={styles:de.createElement(yt,{id:"2658726446"},[`svg.jsx-2658726446{fill:${Me.grey600};height:16px;width:16px;cursor:pointer;opacity:1;pointer-events:all;}`]),className:"jsx-2658726446"},Hk=i=>{let{onRemove:e,dataTest:t}=i;return e?de.createElement("span",{onClick:r=>{r.stopPropagation(),e({},r)},"data-test":t,className:`jsx-${T0.__hash}`},de.createElement(Gk,{className:lS.className}),lS.styles,de.createElement(yt,{id:T0.__hash},T0)):null};Hk.propTypes={dataTest:X.string.isRequired,onRemove:X.func};const tp="4",j_=i=>{var e,t,r,n;let{selected:a,dense:c,disabled:s,dragging:h,overflow:p,className:m,children:y,onRemove:g,onClick:x,icon:v,dataTest:_="dhis2-uicore-chip",marginBottom:C=4,marginLeft:k,marginRight:w,marginTop:E=4,marginInlineStart:A,marginInlineEnd:M}=i;return de.createElement("span",{onClick:S=>{!s&&x&&x({},S)},"data-test":_,className:yt.dynamic([["3780556490",[Me.grey200,Me.grey900,Me.grey300,Jt.secondary600,Me.white]],["1687525377",[C&&`margin-bottom: ${C}px;`,(e=A??k)!==null&&e!==void 0?e:tp,(t=M??w)!==null&&t!==void 0?t:tp,E&&`margin-top: ${E}px`]]])+" "+(Gi(m,{selected:a,dense:c,disabled:s,dragging:h})||"")},de.createElement(Vk,{icon:v,dataTest:`${_}-icon`}),de.createElement(Uk,{overflow:p},y),de.createElement(Hk,{onRemove:g,dataTest:`${_}-remove`}),de.createElement(yt,{id:"3780556490",dynamic:[Me.grey200,Me.grey900,Me.grey300,Jt.secondary600,Me.white]},[`span.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:32px;border-radius:16px;background-color:${Me.grey200};font-size:14px;line-height:16px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:${Me.grey900};}`,".dense.__jsx-style-dynamic-selector{height:24px;font-size:13px;line-height:15px;}",`span.__jsx-style-dynamic-selector:hover{background-color:${Me.grey300};}`,`.selected.__jsx-style-dynamic-selector{background-color:${Jt.secondary600};font-weight:500;}`,".selected.__jsx-style-dynamic-selector:hover{background-color:#00695c;}",`.selected.__jsx-style-dynamic-selector,.selected.__jsx-style-dynamic-selector .icon.__jsx-style-dynamic-selector,.selected.__jsx-style-dynamic-selector .remove-icon.__jsx-style-dynamic-selector{color:${Me.white};}`,".disabled.__jsx-style-dynamic-selector{cursor:not-allowed;opacity:0.3;}",".disabled.__jsx-style-dynamic-selector .remove-icon.__jsx-style-dynamic-selector{pointer-events:none;}",".dragging.__jsx-style-dynamic-selector{box-shadow:0 3px 1px -2px rgba(0,0,0,0.2), 0 2px 2px 0 rgba(0,0,0,0.14), 0 1px 5px 0 rgba(0,0,0,0.12);}"]),de.createElement(yt,{id:"1687525377",dynamic:[C&&`margin-bottom: ${C}px;`,(e=A??k)!==null&&e!==void 0?e:tp,(t=M??w)!==null&&t!==void 0?t:tp,E&&`margin-top: ${E}px`]},[`span.__jsx-style-dynamic-selector{${C&&`margin-bottom: ${C}px;`} margin-inline-start:${(r=A??k)!==null&&r!==void 0?r:tp}px;margin-inline-end:${(n=M??w)!==null&&n!==void 0?n:tp}px;${E&&`margin-top: ${E}px`};}`]))};j_.propTypes={children:X.any,className:X.string,dataTest:X.string,dense:X.bool,disabled:X.bool,dragging:X.bool,icon:X.element,marginBottom:X.number,marginInlineEnd:X.number,marginInlineStart:X.number,marginLeft:X.number,marginRight:X.number,marginTop:X.number,overflow:X.bool,selected:X.bool,onClick:X.func,onRemove:X.func};const VL=i=>{let{selected:e,onChange:t,value:r}=i;return(n,a)=>{const s={selected:Bk(r,e)};t(s,a)}},qk=i=>{let{selected:e,onChange:t,disabled:r,options:n}=i;return de.createElement(de.Fragment,null,e.map(a=>{const c=Fk(a,n);if(!c){const m=`There is no option with the value: "${a}". Make sure that all the values passed to the selected prop match the value of an existing option.`;console.error(m)}const s=c&&c.props.disabled||r,h=c?c.props.label:a,p=s?void 0:VL({selected:e,onChange:t,value:a});return de.createElement(j_,{key:a,onRemove:p,disabled:s,marginBottom:0,marginLeft:0,marginTop:0,marginRight:0,overflow:!0,dense:!0},h)}))};qk.propTypes={disabled:X.bool,options:X.node,selected:X.arrayOf(X.string),onChange:X.func};const Wk=i=>{let{selected:e,onChange:t,clearable:r,clearText:n,placeholder:a,dataTest:c,prefix:s,options:h,className:p,disabled:m,inputMaxHeight:y="100px"}=i;const g=e.length>0,x=v=>{const _={selected:[]};v.stopPropagation(),t(_,v)};return de.createElement("div",{className:yt.dynamic([["64009541",[Me.grey900]],["1331770409",[y]]])+" "+(Gi("root",p)||"")},de.createElement(z_,{prefix:s,dataTest:`${c}-prefix`}),!g&&!s&&de.createElement(N_,{placeholder:a,dataTest:`${c}-placeholder`}),g&&de.createElement("div",{className:yt.dynamic([["64009541",[Me.grey900]],["1331770409",[y]]])+" root-input"},de.createElement(qk,{selected:e,onChange:t,options:h,disabled:m})),g&&r&&!m&&de.createElement("div",{className:yt.dynamic([["64009541",[Me.grey900]],["1331770409",[y]]])+" root-right"},de.createElement(L_,{onClear:x,clearText:n,dataTest:`${c}-clear`})),de.createElement(yt,{id:"64009541",dynamic:[Me.grey900]},[`.root.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:${Me.grey900};font-size:14px;line-height:16px;}`,".root-input.__jsx-style-dynamic-selector{overflow-y:auto;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:wrap;-ms-flex-flow:wrap;flex-flow:wrap;gap:4px;}",".root-right.__jsx-style-dynamic-selector{margin-inline-start:auto;}"]),de.createElement(yt,{id:"1331770409",dynamic:[y]},[`.root-input.__jsx-style-dynamic-selector{max-height:${y};}`]))};Wk.propTypes={dataTest:X.string.isRequired,className:X.string,clearText:Un(i=>i.clearable,X.string),clearable:X.bool,disabled:X.bool,inputMaxHeight:X.string,options:X.node,placeholder:X.string,prefix:X.string,selected:X.arrayOf(X.string),onChange:X.func};const GL=[],F_=i=>{let{className:e,selected:t=GL,tabIndex:r,maxHeight:n,inputMaxHeight:a,onChange:c,onFocus:s,onKeyDown:h,onBlur:p,loading:m,error:y,warning:g,valid:x,disabled:v,children:_,clearable:C,clearText:k,filterable:w,filterPlaceholder:E,placeholder:A,prefix:M,empty:S,loadingText:N,noMatchText:Y,initialFocus:Z,dense:K,dataTest:U="dhis2-uicore-multiselect"}=i;const $=w?de.createElement($k,{dataTest:U,empty:S,noMatchText:Y,placeholder:E}):de.createElement(O_,{empty:S,dataTest:U});return de.createElement("div",{"data-test":U,className:yt.dynamic([["2180377457",[Bt.dp8]]])+" root"},de.createElement("div",{className:yt.dynamic([["2180377457",[Bt.dp8]]])+" root-input"},de.createElement(Uv,{className:e,selected:t,input:de.createElement(Wk,{clearable:C,clearText:k,dataTest:U,placeholder:A,prefix:M,inputMaxHeight:a}),menu:$,tabIndex:r,maxHeight:n,onChange:c,onFocus:s,onKeyDown:h,onBlur:p,error:y,warning:g,valid:x,disabled:v,initialFocus:Z,dense:K},_,m&&de.createElement(A_,{message:N,dataTest:`${U}-loading`}))),de.createElement(sk,{error:y,valid:x,warning:g}),de.createElement(yt,{id:"2180377457",dynamic:[Bt.dp8]},[`.root.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:${Bt.dp8};}`,".root-input.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;}"]))};F_.propTypes={children:X.node,className:X.string,clearText:Un(i=>i.clearable,X.string),clearable:X.bool,dataTest:X.string,dense:X.bool,disabled:X.bool,empty:X.node,error:Js,filterPlaceholder:X.string,filterable:X.bool,initialFocus:X.bool,inputMaxHeight:X.string,loading:X.bool,loadingText:X.string,maxHeight:X.string,noMatchText:Un(i=>i.filterable,X.string),placeholder:X.string,prefix:X.string,selected:X.arrayOf(X.string),tabIndex:X.string,valid:Js,warning:Js,onBlur:X.func,onChange:X.func,onFocus:X.func,onKeyDown:X.func};const HL="مسح",qL={Clear:HL,"No data found":"لم يتم إيجاد بيانات","Type to filter options":"اكتب لتصفية الخيارات","Loading options":"تحميل الخيارات","No options found":"لم يتم العثور على خيارات"},WL="مسح",YL={Clear:WL,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},ZL="پاککردنەوە",XL={Clear:ZL,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},KL="Vyčistit",QL={Clear:KL,"No data found":"Nenalezena žádná data","Type to filter options":"Zadáním filtrujete možnosti","Loading options":"Možnosti načítání","No options found":"Nenalezeny žádné možnosti"},JL="Clear",eN={Clear:JL,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},tN="",iN={Clear:tN,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},rN="Limpiar",nN={Clear:rN,"No data found":"Datos no encontrados","Type to filter options":"Escriba para filtrar opciones","Loading options":"Cargando las opciones","No options found":"No se ha encontrado ninguna opción"},sN="Limpiar",aN={Clear:sN,"No data found":"No se han encontrado datos","Type to filter options":"Escriba para filtrar opciones","Loading options":"Opciones de carga","No options found":"No se han encontrado opciones"},oN="Effacer",lN={Clear:oN,"No data found":"Aucune valeur trouvée","Type to filter options":"","Loading options":"Chargement des options","No options found":""},cN="Hapus",uN={Clear:cN,"No data found":"Tidak ada data yang ditemukan","Type to filter options":"Tipe opsi filter","Loading options":"Opsi mengunggah","No options found":"Opsi tidak tersedia"},dN="សម្អាត",hN={Clear:dN,"No data found":"មិនមានទិន្នន័យបង្ហាញ","Type to filter options":"វាយបញ្ចូលមុខងារដើម្បីច្រោះ","Loading options":"កំពុងទាញយកមុខងារ","No options found":"មិនមានមុខងារបង្ហាញ"},pN="ລຶບ",fN={Clear:pN,"No data found":"ບໍ່ພົບຂໍ້ມູນ","Type to filter options":"ປະເພດຕົວເລືອກການກອງ","Loading options":"ໂຫຼດຕົວເລືອກ","No options found":"ບໍ່ພົບຕົວເລືອກ"},mN="ရှင်းလင်းသည်",gN={Clear:mN,"No data found":"data မတွေ့ပါ။","Type to filter options":"","Loading options":"","No options found":""},yN="Fjern",vN={Clear:yN,"No data found":"Ingen data funnet","Type to filter options":"Skriv for å filtrere alternativer","Loading options":"Laster alternativer","No options found":"Ingen alternativer funnet"},xN="Duidelijk",bN={Clear:xN,"No data found":"Geen gegevens gevonden","Type to filter options":"Typ om opties te filteren","Loading options":"Laad opties","No options found":"Geen opties gevonden"},wN="پاک کردن",_N={Clear:wN,"No data found":"هیچ معلوماتی یافت نشد","Type to filter options":"","Loading options":"","No options found":""},CN="پاک یې کړئ",TN={Clear:CN,"No data found":"هېڅ ډاټا یا مالومات ونه موندل شول","Type to filter options":"","Loading options":"","No options found":""},SN="Limpar",EN={Clear:SN,"No data found":"Não foram encontrados dados","Type to filter options":"Tipo de opções de filtros","Loading options":"Carregando opções","No options found":"Não foram encontradas opções"},kN="Limpar",MN={Clear:kN,"No data found":"Dado não encontrado","Type to filter options":"","Loading options":"","No options found":""},AN="Очистить",IN={Clear:AN,"No data found":"Данные не найдены","Type to filter options":"Начать печатать для фильтрации опций","Loading options":"Загрузка опций","No options found":"Опции не найдены"},PN="Klar",DN={Clear:PN,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},RN="Hamós",LN={Clear:RN,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},NN="Пок кардан",zN={Clear:NN,"No data found":"Ягон иттилоот ёфт нашуд","Type to filter options":"","Loading options":"","No options found":""},ON="Очистити",jN={Clear:ON,"No data found":"Даних не знайдено","Type to filter options":"Введіть параметри фільтра","Loading options":"Параметри завантаження","No options found":"Варіантів не знайдено"},FN="کلیئر",BN={Clear:FN,"No data found":"کوئی ڈیٹا نہیں ملا","Type to filter options":"","Loading options":"","No options found":""},$N="Аниқ",UN={Clear:$N,"No data found":"Maʼlumotlar topilmadi","Type to filter options":"","Loading options":"","No options found":""},VN="Тозалаш",GN={Clear:VN,"No data found":"Маълумотлар топилмади","Type to filter options":"","Loading options":"Вариантлар юкланмоқда","No options found":""},HN="Аниқ",qN={Clear:HN,"No data found":"Maʼlumotlar topilmadi","Type to filter options":"","Loading options":"","No options found":""},WN="Xóa",YN={Clear:WN,"No data found":"Không tìm thấy dữ liệu","Type to filter options":"Nhập để lọc tùy chọn","Loading options":"","No options found":""},ZN="清除",XN={Clear:ZN,"No data found":"没有发现数据","Type to filter options":"键入过滤选项","Loading options":"加载选项","No options found":"没有找到选项"},KN="清除",QN={Clear:KN,"No data found":"没有数据被找到","Type to filter options":"","Loading options":"","No options found":""},rn="default";ve.addResources("ar",rn,qL);ve.addResources("ar_IQ",rn,YL);ve.addResources("ckb",rn,XL);ve.addResources("cs",rn,QL);ve.addResources("da",rn,eN);ve.addResources("en",rn,iN);ve.addResources("es",rn,nN);ve.addResources("es_419",rn,aN);ve.addResources("fr",rn,lN);ve.addResources("id",rn,uN);ve.addResources("km",rn,hN);ve.addResources("lo",rn,fN);ve.addResources("my",rn,gN);ve.addResources("nb",rn,vN);ve.addResources("nl",rn,bN);ve.addResources("prs",rn,_N);ve.addResources("ps",rn,TN);ve.addResources("pt",rn,EN);ve.addResources("pt_BR",rn,MN);ve.addResources("ru",rn,IN);ve.addResources("sv",rn,DN);ve.addResources("tet",rn,LN);ve.addResources("tg",rn,zN);ve.addResources("uk",rn,jN);ve.addResources("ur",rn,BN);ve.addResources("uz_Latn",rn,UN);ve.addResources("uz_UZ_Cyrl",rn,GN);ve.addResources("uz_UZ_Latn",rn,qN);ve.addResources("vi",rn,YN);ve.addResources("zh",rn,XN);ve.addResources("zh_CN",rn,QN);const{styles:JN,className:e4}={styles:de.createElement(yt,{id:"2013783366"},[`.jsx-2013783366{padding:${Bt.dp8} ${Bt.dp12};}`]),className:"jsx-2013783366"},B_=i=>{let{label:e,active:t,disabled:r,onClick:n,className:a,dataTest:c="dhis2-uicore-multiselectoption",value:s}=i;return de.createElement("div",{"data-test":c,"data-value":s,"data-label":e,className:yt.dynamic([["2722881483",[Me.grey200,Me.teal050]]])+" "+(Gi(a,{active:t,disabled:r})||"")},de.createElement(pl,{name:e,className:e4,checked:t,label:e,onChange:n,disabled:r,dense:!0}),JN,de.createElement(yt,{id:"2722881483",dynamic:[Me.grey200,Me.teal050]},[`div.__jsx-style-dynamic-selector:hover{background-color:${Me.grey200};}`,`div.active.__jsx-style-dynamic-selector{background-color:${Me.teal050};}`,"div.active.__jsx-style-dynamic-selector:hover{background-color:#e6f4f4;}","div.disabled.__jsx-style-dynamic-selector:hover{background-color:initial;}"]))};B_.propTypes={label:X.string.isRequired,value:X.string.isRequired,active:X.bool,className:X.string,dataTest:X.string,disabled:X.bool,onClick:X.func};const t4=(i,e)=>{e.stopPropagation(),e.preventDefault()},$_=i=>{let{options:e,onChange:t,selected:r,empty:n="",handleFocusInput:a,handleClose:c,dataTest:s}=i;const h=P_(e);if(de.Children.count(h)===0)return typeof n=="string"?de.createElement(R_,{message:n,dataTest:`${s}-empty`}):n;const p=de.Children.map(e,m=>{if(!I_(m))return m;const{value:g,disabled:x}=m.props,v=g===r,_=(k,w)=>{const E={selected:g};w.stopPropagation(),t(E,w),c(),a()},C=v||x;return de.cloneElement(m,{...m.props,onClick:C?t4:_,active:v})});return de.createElement(de.Fragment,null,p)};$_.propTypes={dataTest:X.string.isRequired,empty:X.node,handleClose:X.func,handleFocusInput:X.func,options:X.node,selected:X.string,onChange:X.func};const Yk=i=>{let{dataTest:e,options:t,onChange:r,selected:n,empty:a,handleClose:c,handleFocusInput:s,placeholder:h,noMatchText:p}=i;return de.createElement(D_,{dataTest:e,options:t,onChange:r,selected:n,empty:a,handleClose:c,handleFocusInput:s,placeholder:h,noMatchText:p,Menu:$_})};Yk.propTypes={dataTest:X.string.isRequired,noMatchText:X.string.isRequired,empty:X.node,handleClose:X.func,handleFocusInput:X.func,options:X.node,placeholder:X.string,selected:X.string,onChange:X.func};const Zk=i=>{let{options:e,selected:t,className:r}=i;const n=Fk(t,e);if(!n){const s=`There is no option with the value: "${t}". Make sure that the value passed to the selected prop matches the value of an existing option.`;console.error(s)}const a=n&&n.props.icon,c=n?n.props.label:t;return de.createElement("div",{className:yt.dynamic([["1914911415",[Bt.dp8,Bt.dp16,Bt.dp16]]])+" "+(Gi(r,"root")||"")},a&&de.createElement("div",{className:yt.dynamic([["1914911415",[Bt.dp8,Bt.dp16,Bt.dp16]]])+" root-icon"},a),c,de.createElement(yt,{id:"1914911415",dynamic:[Bt.dp8,Bt.dp16,Bt.dp16]},[".root.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",`.root-icon.__jsx-style-dynamic-selector{margin-inline-end:${Bt.dp8};width:${Bt.dp16};height:${Bt.dp16};overflow:hidden;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}`]))};Zk.propTypes={className:X.string,options:X.node,selected:X.string};const Xk=i=>{let{selected:e,onChange:t,clearable:r,clearText:n,placeholder:a,dataTest:c,prefix:s,options:h,className:p,disabled:m,inputMaxHeight:y="100px"}=i;const g=e&&typeof e=="string",x=v=>{const _={selected:""};v.stopPropagation(),t(_,v)};return de.createElement("div",{className:yt.dynamic([["2186325794",[Me.grey900]],["1331770409",[y]]])+" "+(Gi("root",p)||"")},de.createElement(z_,{prefix:s,dataTest:`${c}-prefix`}),!g&&!s&&de.createElement(N_,{placeholder:a,dataTest:`${c}-placeholder`}),g&&de.createElement("div",{className:yt.dynamic([["2186325794",[Me.grey900]],["1331770409",[y]]])+" root-input"},de.createElement(Zk,{selected:e,options:h})),g&&r&&!m&&de.createElement("div",{className:yt.dynamic([["2186325794",[Me.grey900]],["1331770409",[y]]])+" root-right"},de.createElement(L_,{onClear:x,clearText:n,dataTest:`${c}-clear`})),de.createElement(yt,{id:"2186325794",dynamic:[Me.grey900]},[`.root.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:${Me.grey900};font-size:14px;line-height:16px;}`,".root-input.__jsx-style-dynamic-selector{overflow-y:auto;-webkit-flex:1;-ms-flex:1;flex:1;}",".root-right.__jsx-style-dynamic-selector{margin-inline-start:auto;}"]),de.createElement(yt,{id:"1331770409",dynamic:[y]},[`.root-input.__jsx-style-dynamic-selector{max-height:${y};}`]))};Xk.propTypes={dataTest:X.string.isRequired,className:X.string,clearText:Un(i=>i.clearable,X.string),clearable:X.bool,disabled:X.bool,inputMaxHeight:X.string,options:X.node,placeholder:X.string,prefix:X.string,selected:X.string,onChange:X.func};const il=i=>{let{className:e,selected:t="",tabIndex:r,maxHeight:n,inputMaxHeight:a,onChange:c,onFocus:s,onKeyDown:h,onBlur:p,loading:m,error:y,warning:g,valid:x,disabled:v,children:_,clearable:C,clearText:k,filterable:w,filterPlaceholder:E,placeholder:A,prefix:M,empty:S,loadingText:N,noMatchText:Y,initialFocus:Z,dense:K,dataTest:U="dhis2-uicore-singleselect"}=i;const $=w?de.createElement(Yk,{dataTest:U,empty:S,noMatchText:Y,placeholder:E}):de.createElement($_,{empty:S,dataTest:U});return de.createElement("div",{"data-test":U,className:yt.dynamic([["2180377457",[Bt.dp8]]])+" root"},de.createElement("div",{className:yt.dynamic([["2180377457",[Bt.dp8]]])+" root-input"},de.createElement(Uv,{className:e,selected:t,input:de.createElement(Xk,{clearable:C,clearText:k,dataTest:U,placeholder:A,prefix:M,inputMaxHeight:a}),menu:$,tabIndex:r,maxHeight:n,onChange:c,onFocus:s,onKeyDown:h,onBlur:p,error:y,warning:g,valid:x,disabled:v,initialFocus:Z,dense:K},_,m&&de.createElement(A_,{message:N,dataTest:`${U}-loading`}))),de.createElement(sk,{error:y,valid:x,warning:g}),de.createElement(yt,{id:"2180377457",dynamic:[Bt.dp8]},[`.root.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:${Bt.dp8};}`,".root-input.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;}"]))};il.propTypes={children:X.node,className:X.string,clearText:Un(i=>i.clearable,X.string),clearable:X.bool,dataTest:X.string,dense:X.bool,disabled:X.bool,empty:X.node,error:Js,filterPlaceholder:X.string,filterable:X.bool,initialFocus:X.bool,inputMaxHeight:X.string,loading:X.bool,loadingText:X.string,maxHeight:X.string,noMatchText:Un(i=>i.filterable,X.string),placeholder:X.string,prefix:X.string,selected:X.string,tabIndex:X.string,valid:Js,warning:Js,onBlur:X.func,onChange:X.func,onFocus:X.func,onKeyDown:X.func};function i4(i,e,t){return(e=r4(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function r4(i){var e=n4(i,"string");return typeof e=="symbol"?e:e+""}function n4(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}const im=(i,e)=>typeof i=="function"?i(e):i;class hs extends de.Component{render(){const{className:e,onChange:t,onFocus:r,onKeyDown:n,onBlur:a,required:c,label:s,valid:h,error:p,warning:m,disabled:y,loading:g,selected:x=hs.defaultProps.selected,tabIndex:v,helpText:_,validationText:C,maxHeight:k,inputMaxHeight:w,inputWidth:E,children:A,clearable:M,clearText:S=hs.defaultProps.clearText,filterable:N,filterPlaceholder:Y=hs.defaultProps.filterPlaceholder,placeholder:Z,prefix:K,empty:U=hs.defaultProps.empty,loadingText:$=hs.defaultProps.loadingText,noMatchText:B=hs.defaultProps.noMatchText,initialFocus:R,dense:L,dataTest:G=hs.defaultProps.dataTest}=this.props;return de.createElement(eL,{className:e,dataTest:G,disabled:y,required:c,label:s,helpText:_,validationText:C,error:p,warning:m,valid:h},de.createElement(C0,{width:E,minWidth:"100px"},de.createElement(il,{selected:x,tabIndex:v,maxHeight:k,inputMaxHeight:w,onChange:t,onFocus:r,onKeyDown:n,onBlur:a,loading:g,error:p,warning:m,valid:h,disabled:y,clearable:M,clearText:im(S),filterable:N,filterPlaceholder:im(Y),placeholder:Z,prefix:K,empty:im(U),loadingText:im($),noMatchText:im(B),initialFocus:R,dense:L},A)))}}i4(hs,"defaultProps",{dataTest:"dhis2-uiwidgets-singleselectfield",selected:"",clearText:()=>ve.t("Clear"),empty:()=>ve.t("No data found"),filterPlaceholder:()=>ve.t("Type to filter options"),loadingText:()=>ve.t("Loading options"),noMatchText:()=>ve.t("No options found")});hs.propTypes={children:X.node,className:X.string,clearText:X.oneOfType([X.string,X.func]),clearable:X.bool,dataTest:X.string,dense:X.bool,disabled:X.bool,empty:X.oneOfType([X.node,X.func]),error:Js,filterPlaceholder:X.oneOfType([X.node,X.func]),filterable:X.bool,helpText:X.string,initialFocus:X.bool,inputMaxHeight:X.string,inputWidth:X.string,label:X.string,loading:X.bool,loadingText:X.oneOfType([X.string,X.func]),maxHeight:X.string,noMatchText:X.oneOfType([X.string,X.func]),placeholder:X.string,prefix:X.string,required:X.bool,selected:X.string,tabIndex:X.string,valid:Js,validationText:X.string,warning:Js,onBlur:X.func,onChange:X.func,onFocus:X.func,onKeyDown:X.func};const As=i=>{let{label:e,active:t,disabled:r,onClick:n,className:a,dataTest:c="dhis2-uicore-singleselectoption",value:s}=i;return de.createElement("div",{onClick:h=>n({},h),"data-test":c,"data-value":s,"data-label":e,className:yt.dynamic([["1307386342",[Me.grey900,Bt.dp8,Bt.dp12,Me.grey200,Me.teal050,Me.grey500,t?"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMuNjMyMDkgNy44MzIxNEMzLjI3MjA5IDcuNDcyMTQgMi43MjAwOSA3LjQ3MjE0IDIuMzYwMDkgNy44MzIxNEMyLjAwMDA5IDguMTkyMTQgMi4wMDAwOSA4Ljc0NDE0IDIuMzYwMDkgOS4xMDQxNEw1LjYyNDA5IDEyLjM2ODFDNS45ODQwOSAxMi43MjgxIDYuNTM2MDkgMTIuNzI4MSA2Ljg5NjA5IDEyLjM2ODFMMTQuNjQ4MSA0LjY0MDE0QzE1LjAwODEgNC4yODAxNCAxNS4wMDgxIDMuNzI4MTQgMTQuNjQ4MSAzLjM2ODE0QzE0LjI4ODEgMy4wMDgxNCAxMy43MzYxIDMuMDA4MTQgMTMuMzUyMSAzLjM2ODE0TDYuMjcyMDkgMTAuNDcyMUwzLjYzMjA5IDcuODMyMTRaIiBmaWxsPSIjMDA2OTVDIi8+Cjwvc3ZnPgo=')":"none"]]])+" "+(Gi(a,{disabled:r,active:t})||"")},de.createElement("span",{"aria-hidden":"true",className:yt.dynamic([["1307386342",[Me.grey900,Bt.dp8,Bt.dp12,Me.grey200,Me.teal050,Me.grey500,t?"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMuNjMyMDkgNy44MzIxNEMzLjI3MjA5IDcuNDcyMTQgMi43MjAwOSA3LjQ3MjE0IDIuMzYwMDkgNy44MzIxNEMyLjAwMDA5IDguMTkyMTQgMi4wMDAwOSA4Ljc0NDE0IDIuMzYwMDkgOS4xMDQxNEw1LjYyNDA5IDEyLjM2ODFDNS45ODQwOSAxMi43MjgxIDYuNTM2MDkgMTIuNzI4MSA2Ljg5NjA5IDEyLjM2ODFMMTQuNjQ4MSA0LjY0MDE0QzE1LjAwODEgNC4yODAxNCAxNS4wMDgxIDMuNzI4MTQgMTQuNjQ4MSAzLjM2ODE0QzE0LjI4ODEgMy4wMDgxNCAxMy43MzYxIDMuMDA4MTQgMTMuMzUyMSAzLjM2ODE0TDYuMjcyMDkgMTAuNDcyMUwzLjYzMjA5IDcuODMyMTRaIiBmaWxsPSIjMDA2OTVDIi8+Cjwvc3ZnPgo=')":"none"]]])+" checkmark"}),de.createElement("span",{className:yt.dynamic([["1307386342",[Me.grey900,Bt.dp8,Bt.dp12,Me.grey200,Me.teal050,Me.grey500,t?"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMuNjMyMDkgNy44MzIxNEMzLjI3MjA5IDcuNDcyMTQgMi43MjAwOSA3LjQ3MjE0IDIuMzYwMDkgNy44MzIxNEMyLjAwMDA5IDguMTkyMTQgMi4wMDAwOSA4Ljc0NDE0IDIuMzYwMDkgOS4xMDQxNEw1LjYyNDA5IDEyLjM2ODFDNS45ODQwOSAxMi43MjgxIDYuNTM2MDkgMTIuNzI4MSA2Ljg5NjA5IDEyLjM2ODFMMTQuNjQ4MSA0LjY0MDE0QzE1LjAwODEgNC4yODAxNCAxNS4wMDgxIDMuNzI4MTQgMTQuNjQ4MSAzLjM2ODE0QzE0LjI4ODEgMy4wMDgxNCAxMy43MzYxIDMuMDA4MTQgMTMuMzUyMSAzLjM2ODE0TDYuMjcyMDkgMTAuNDcyMUwzLjYzMjA5IDcuODMyMTRaIiBmaWxsPSIjMDA2OTVDIi8+Cjwvc3ZnPgo=')":"none"]]])+" content"},e),de.createElement(yt,{id:"1307386342",dynamic:[Me.grey900,Bt.dp8,Bt.dp12,Me.grey200,Me.teal050,Me.grey500,t?"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMuNjMyMDkgNy44MzIxNEMzLjI3MjA5IDcuNDcyMTQgMi43MjAwOSA3LjQ3MjE0IDIuMzYwMDkgNy44MzIxNEMyLjAwMDA5IDguMTkyMTQgMi4wMDAwOSA4Ljc0NDE0IDIuMzYwMDkgOS4xMDQxNEw1LjYyNDA5IDEyLjM2ODFDNS45ODQwOSAxMi43MjgxIDYuNTM2MDkgMTIuNzI4MSA2Ljg5NjA5IDEyLjM2ODFMMTQuNjQ4MSA0LjY0MDE0QzE1LjAwODEgNC4yODAxNCAxNS4wMDgxIDMuNzI4MTQgMTQuNjQ4MSAzLjM2ODE0QzE0LjI4ODEgMy4wMDgxNCAxMy43MzYxIDMuMDA4MTQgMTMuMzUyMSAzLjM2ODE0TDYuMjcyMDkgMTAuNDcyMUwzLjYzMjA5IDcuODMyMTRaIiBmaWxsPSIjMDA2OTVDIi8+Cjwvc3ZnPgo=')":"none"]},[`div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;font-size:14px;-webkit-text-decoration:none;text-decoration:none;color:${Me.grey900};padding-block:${Bt.dp8};padding-inline:6px ${Bt.dp12};}`,`div.__jsx-style-dynamic-selector:hover{background-color:${Me.grey200};}`,`div.__jsx-style-dynamic-selector:active,div.active.__jsx-style-dynamic-selector{background-color:${Me.teal050};cursor:auto;}`,`div.disabled.__jsx-style-dynamic-selector{color:${Me.grey500};cursor:not-allowed;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`,"div.disabled.__jsx-style-dynamic-selector:hover{background-color:initial;}",`div.__jsx-style-dynamic-selector .checkmark.__jsx-style-dynamic-selector{width:16px;height:16px;margin-inline-end:6px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;background-size:contain;background-repeat:no-repeat;background-image:${t?"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMuNjMyMDkgNy44MzIxNEMzLjI3MjA5IDcuNDcyMTQgMi43MjAwOSA3LjQ3MjE0IDIuMzYwMDkgNy44MzIxNEMyLjAwMDA5IDguMTkyMTQgMi4wMDAwOSA4Ljc0NDE0IDIuMzYwMDkgOS4xMDQxNEw1LjYyNDA5IDEyLjM2ODFDNS45ODQwOSAxMi43MjgxIDYuNTM2MDkgMTIuNzI4MSA2Ljg5NjA5IDEyLjM2ODFMMTQuNjQ4MSA0LjY0MDE0QzE1LjAwODEgNC4yODAxNCAxNS4wMDgxIDMuNzI4MTQgMTQuNjQ4MSAzLjM2ODE0QzE0LjI4ODEgMy4wMDgxNCAxMy43MzYxIDMuMDA4MTQgMTMuMzUyMSAzLjM2ODE0TDYuMjcyMDkgMTAuNDcyMUwzLjYzMjA5IDcuODMyMTRaIiBmaWxsPSIjMDA2OTVDIi8+Cjwvc3ZnPgo=')":"none"};}`]))};As.propTypes={label:X.string.isRequired,value:X.string.isRequired,active:X.bool,className:X.string,dataTest:X.string,disabled:X.bool,onClick:X.func};class he extends Array{constructor(e,t){if(super(e),this.sign=t,Object.setPrototypeOf(this,he.prototype),e>he.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(e){var t=Math.floor,r=Number.isFinite;if(typeof e=="number"){if(e===0)return he.__zero();if(he.__isOneDigitInt(e))return 0>e?he.__oneDigit(-e,!0):he.__oneDigit(e,!1);if(!r(e)||t(e)!==e)throw new RangeError("The number "+e+" cannot be converted to BigInt because it is not an integer");return he.__fromDouble(e)}if(typeof e=="string"){const n=he.__fromString(e);if(n===null)throw new SyntaxError("Cannot convert "+e+" to a BigInt");return n}if(typeof e=="boolean")return e===!0?he.__oneDigit(1,!1):he.__zero();if(typeof e=="object"){if(e.constructor===he)return e;const n=he.__toPrimitive(e);return he.BigInt(n)}throw new TypeError("Cannot convert "+e+" to a BigInt")}toDebugString(){const e=["BigInt["];for(const t of this)e.push((t&&(t>>>0).toString(16))+", ");return e.push("]"),e.join("")}toString(e=10){if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":e&e-1?he.__toStringGeneric(this,e,!1):he.__toStringBasePowerOfTwo(this,e)}valueOf(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}static toNumber(e){const t=e.length;if(t===0)return 0;if(t===1){const C=e.__unsignedDigit(0);return e.sign?-C:C}const r=e.__digit(t-1),n=he.__clz30(r),a=30*t-n;if(1024<a)return e.sign?-1/0:1/0;let c=a-1,s=r,h=t-1;const p=n+3;let m=p===32?0:s<<p;m>>>=12;const y=p-12;let g=12<=p?0:s<<20+p,x=20+p;for(0<y&&0<h&&(h--,s=e.__digit(h),m|=s>>>30-y,g=s<<y+2,x=y+2);0<x&&0<h;)h--,s=e.__digit(h),g|=30<=x?s<<x-30:s>>>30-x,x-=30;const v=he.__decideRounding(e,x,h,s);if((v===1||v===0&&(1&g)==1)&&(g=g+1>>>0,g===0&&(m++,m>>>20!=0&&(m=0,c++,1023<c))))return e.sign?-1/0:1/0;const _=e.sign?-2147483648:0;return c=c+1023<<20,he.__kBitConversionInts[he.__kBitConversionIntHigh]=_|c|m,he.__kBitConversionInts[he.__kBitConversionIntLow]=g,he.__kBitConversionDouble[0]}static unaryMinus(e){if(e.length===0)return e;const t=e.__copy();return t.sign=!e.sign,t}static bitwiseNot(e){return e.sign?he.__absoluteSubOne(e).__trim():he.__absoluteAddOne(e,!0)}static exponentiate(e,t){if(t.sign)throw new RangeError("Exponent must be positive");if(t.length===0)return he.__oneDigit(1,!1);if(e.length===0)return e;if(e.length===1&&e.__digit(0)===1)return e.sign&&!(1&t.__digit(0))?he.unaryMinus(e):e;if(1<t.length)throw new RangeError("BigInt too big");let r=t.__unsignedDigit(0);if(r===1)return e;if(r>=he.__kMaxLengthBits)throw new RangeError("BigInt too big");if(e.length===1&&e.__digit(0)===2){const c=1+(0|r/30),s=e.sign&&(1&r)!=0,h=new he(c,s);h.__initializeDigits();const p=1<<r%30;return h.__setDigit(c-1,p),h}let n=null,a=e;for(1&r&&(n=e),r>>=1;r!==0;r>>=1)a=he.multiply(a,a),1&r&&(n===null?n=a:n=he.multiply(n,a));return n}static multiply(e,t){if(e.length===0)return e;if(t.length===0)return t;let r=e.length+t.length;30<=e.__clzmsd()+t.__clzmsd()&&r--;const n=new he(r,e.sign!==t.sign);n.__initializeDigits();for(let a=0;a<e.length;a++)he.__multiplyAccumulate(t,e.__digit(a),n,a);return n.__trim()}static divide(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>he.__absoluteCompare(e,t))return he.__zero();const r=e.sign!==t.sign,n=t.__unsignedDigit(0);let a;if(t.length===1&&32767>=n){if(n===1)return r===e.sign?e:he.unaryMinus(e);a=he.__absoluteDivSmall(e,n,null)}else a=he.__absoluteDivLarge(e,t,!0,!1);return a.sign=r,a.__trim()}static remainder(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>he.__absoluteCompare(e,t))return e;const r=t.__unsignedDigit(0);if(t.length===1&&32767>=r){if(r===1)return he.__zero();const a=he.__absoluteModSmall(e,r);return a===0?he.__zero():he.__oneDigit(a,e.sign)}const n=he.__absoluteDivLarge(e,t,!1,!0);return n.sign=e.sign,n.__trim()}static add(e,t){const r=e.sign;return r===t.sign?he.__absoluteAdd(e,t,r):0<=he.__absoluteCompare(e,t)?he.__absoluteSub(e,t,r):he.__absoluteSub(t,e,!r)}static subtract(e,t){const r=e.sign;return r===t.sign?0<=he.__absoluteCompare(e,t)?he.__absoluteSub(e,t,r):he.__absoluteSub(t,e,!r):he.__absoluteAdd(e,t,r)}static leftShift(e,t){return t.length===0||e.length===0?e:t.sign?he.__rightShiftByAbsolute(e,t):he.__leftShiftByAbsolute(e,t)}static signedRightShift(e,t){return t.length===0||e.length===0?e:t.sign?he.__leftShiftByAbsolute(e,t):he.__rightShiftByAbsolute(e,t)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(e,t){return 0>he.__compareToBigInt(e,t)}static lessThanOrEqual(e,t){return 0>=he.__compareToBigInt(e,t)}static greaterThan(e,t){return 0<he.__compareToBigInt(e,t)}static greaterThanOrEqual(e,t){return 0<=he.__compareToBigInt(e,t)}static equal(e,t){if(e.sign!==t.sign||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e.__digit(r)!==t.__digit(r))return!1;return!0}static notEqual(e,t){return!he.equal(e,t)}static bitwiseAnd(e,t){var r=Math.max;if(!e.sign&&!t.sign)return he.__absoluteAnd(e,t).__trim();if(e.sign&&t.sign){const n=r(e.length,t.length)+1;let a=he.__absoluteSubOne(e,n);const c=he.__absoluteSubOne(t);return a=he.__absoluteOr(a,c,a),he.__absoluteAddOne(a,!0,a).__trim()}return e.sign&&([e,t]=[t,e]),he.__absoluteAndNot(e,he.__absoluteSubOne(t)).__trim()}static bitwiseXor(e,t){var r=Math.max;if(!e.sign&&!t.sign)return he.__absoluteXor(e,t).__trim();if(e.sign&&t.sign){const c=r(e.length,t.length),s=he.__absoluteSubOne(e,c),h=he.__absoluteSubOne(t);return he.__absoluteXor(s,h,s).__trim()}const n=r(e.length,t.length)+1;e.sign&&([e,t]=[t,e]);let a=he.__absoluteSubOne(t,n);return a=he.__absoluteXor(a,e,a),he.__absoluteAddOne(a,!0,a).__trim()}static bitwiseOr(e,t){var r=Math.max;const n=r(e.length,t.length);if(!e.sign&&!t.sign)return he.__absoluteOr(e,t).__trim();if(e.sign&&t.sign){let c=he.__absoluteSubOne(e,n);const s=he.__absoluteSubOne(t);return c=he.__absoluteAnd(c,s,c),he.__absoluteAddOne(c,!0,c).__trim()}e.sign&&([e,t]=[t,e]);let a=he.__absoluteSubOne(t,n);return a=he.__absoluteAndNot(a,e,a),he.__absoluteAddOne(a,!0,a).__trim()}static asIntN(e,t){var r=Math.floor;if(t.length===0)return t;if(e=r(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return he.__zero();if(e>=he.__kMaxLengthBits)return t;const n=0|(e+29)/30;if(t.length<n)return t;const a=t.__unsignedDigit(n-1),c=1<<(e-1)%30;if(t.length===n&&a<c)return t;if((a&c)!==c)return he.__truncateToNBits(e,t);if(!t.sign)return he.__truncateAndSubFromPowerOfTwo(e,t,!0);if(!(a&c-1)){for(let s=n-2;0<=s;s--)if(t.__digit(s)!==0)return he.__truncateAndSubFromPowerOfTwo(e,t,!1);return t.length===n&&a===c?t:he.__truncateToNBits(e,t)}return he.__truncateAndSubFromPowerOfTwo(e,t,!1)}static asUintN(e,t){var r=Math.floor;if(t.length===0)return t;if(e=r(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return he.__zero();if(t.sign){if(e>he.__kMaxLengthBits)throw new RangeError("BigInt too big");return he.__truncateAndSubFromPowerOfTwo(e,t,!1)}if(e>=he.__kMaxLengthBits)return t;const n=0|(e+29)/30;if(t.length<n)return t;const a=e%30;return t.length==n&&(a===0||!(t.__digit(n-1)>>>a))?t:he.__truncateToNBits(e,t)}static ADD(e,t){if(e=he.__toPrimitive(e),t=he.__toPrimitive(t),typeof e=="string")return typeof t!="string"&&(t=t.toString()),e+t;if(typeof t=="string")return e.toString()+t;if(e=he.__toNumeric(e),t=he.__toNumeric(t),he.__isBigInt(e)&&he.__isBigInt(t))return he.add(e,t);if(typeof e=="number"&&typeof t=="number")return e+t;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(e,t){return he.__compare(e,t,0)}static LE(e,t){return he.__compare(e,t,1)}static GT(e,t){return he.__compare(e,t,2)}static GE(e,t){return he.__compare(e,t,3)}static EQ(e,t){for(;;){if(he.__isBigInt(e))return he.__isBigInt(t)?he.equal(e,t):he.EQ(t,e);if(typeof e=="number"){if(he.__isBigInt(t))return he.__equalToNumber(t,e);if(typeof t!="object")return e==t;t=he.__toPrimitive(t)}else if(typeof e=="string"){if(he.__isBigInt(t))return e=he.__fromString(e),e!==null&&he.equal(e,t);if(typeof t!="object")return e==t;t=he.__toPrimitive(t)}else if(typeof e=="boolean"){if(he.__isBigInt(t))return he.__equalToNumber(t,+e);if(typeof t!="object")return e==t;t=he.__toPrimitive(t)}else if(typeof e=="symbol"){if(he.__isBigInt(t))return!1;if(typeof t!="object")return e==t;t=he.__toPrimitive(t)}else if(typeof e=="object"){if(typeof t=="object"&&t.constructor!==he)return e==t;e=he.__toPrimitive(e)}else return e==t}}static NE(e,t){return!he.EQ(e,t)}static DataViewGetBigInt64(e,t,r=!1){return he.asIntN(64,he.DataViewGetBigUint64(e,t,r))}static DataViewGetBigUint64(e,t,r=!1){const[n,a]=r?[4,0]:[0,4],c=e.getUint32(t+n,r),s=e.getUint32(t+a,r),h=new he(3,!1);return h.__setDigit(0,1073741823&s),h.__setDigit(1,(268435455&c)<<2|s>>>30),h.__setDigit(2,c>>>28),h.__trim()}static DataViewSetBigInt64(e,t,r,n=!1){he.DataViewSetBigUint64(e,t,r,n)}static DataViewSetBigUint64(e,t,r,n=!1){r=he.asUintN(64,r);let a=0,c=0;if(0<r.length&&(c=r.__digit(0),1<r.length)){const p=r.__digit(1);c|=p<<30,a=p>>>2,2<r.length&&(a|=r.__digit(2)<<28)}const[s,h]=n?[4,0]:[0,4];e.setUint32(t+s,a,n),e.setUint32(t+h,c,n)}static __zero(){return new he(0,!1)}static __oneDigit(e,t){const r=new he(1,t);return r.__setDigit(0,e),r}__copy(){const e=new he(this.length,this.sign);for(let t=0;t<this.length;t++)e[t]=this[t];return e}__trim(){let e=this.length,t=this[e-1];for(;t===0;)e--,t=this[e-1],this.pop();return e===0&&(this.sign=!1),this}__initializeDigits(){for(let e=0;e<this.length;e++)this[e]=0}static __decideRounding(e,t,r,n){if(0<t)return-1;let a;if(0>t)a=-t-1;else{if(r===0)return-1;r--,n=e.__digit(r),a=29}let c=1<<a;if(!(n&c))return-1;if(c-=1,(n&c)!=0)return 1;for(;0<r;)if(r--,e.__digit(r)!==0)return 1;return 0}static __fromDouble(e){he.__kBitConversionDouble[0]=e;const t=2047&he.__kBitConversionInts[he.__kBitConversionIntHigh]>>>20,r=t-1023,n=(0|r/30)+1,a=new he(n,0>e);let c=1048575&he.__kBitConversionInts[he.__kBitConversionIntHigh]|1048576,s=he.__kBitConversionInts[he.__kBitConversionIntLow];const h=20,p=r%30;let m,y=0;if(p<20){const g=h-p;y=g+32,m=c>>>g,c=c<<32-g|s>>>g,s<<=32-g}else if(p===20)y=32,m=c,c=s,s=0;else{const g=p-h;y=32-g,m=c<<g|s>>>32-g,c=s<<g,s=0}a.__setDigit(n-1,m);for(let g=n-2;0<=g;g--)0<y?(y-=30,m=c>>>2,c=c<<30|s>>>2,s<<=30):m=0,a.__setDigit(g,m);return a.__trim()}static __isWhitespace(e){return 13>=e&&9<=e||(159>=e?e==32:131071>=e?e==160||e==5760:196607>=e?(e&=131071,10>=e||e==40||e==41||e==47||e==95||e==4096):e==65279)}static __fromString(e,t=0){let r=0;const n=e.length;let a=0;if(a===n)return he.__zero();let c=e.charCodeAt(a);for(;he.__isWhitespace(c);){if(++a===n)return he.__zero();c=e.charCodeAt(a)}if(c===43){if(++a===n)return null;c=e.charCodeAt(a),r=1}else if(c===45){if(++a===n)return null;c=e.charCodeAt(a),r=-1}if(t===0){if(t=10,c===48){if(++a===n)return he.__zero();if(c=e.charCodeAt(a),c===88||c===120){if(t=16,++a===n)return null;c=e.charCodeAt(a)}else if(c===79||c===111){if(t=8,++a===n)return null;c=e.charCodeAt(a)}else if(c===66||c===98){if(t=2,++a===n)return null;c=e.charCodeAt(a)}}}else if(t===16&&c===48){if(++a===n)return he.__zero();if(c=e.charCodeAt(a),c===88||c===120){if(++a===n)return null;c=e.charCodeAt(a)}}if(r!=0&&t!==10)return null;for(;c===48;){if(++a===n)return he.__zero();c=e.charCodeAt(a)}const s=n-a;let h=he.__kMaxBitsPerChar[t],p=he.__kBitsPerCharTableMultiplier-1;if(s>1073741824/h)return null;const m=h*s+p>>>he.__kBitsPerCharTableShift,y=new he(0|(m+29)/30,!1),g=10>t?t:10,x=10<t?t-10:0;if(t&t-1){y.__initializeDigits();let v=!1,_=0;do{let C=0,k=1;for(;;){let E;if(c-48>>>0<g)E=c-48;else if((32|c)-97>>>0<x)E=(32|c)-87;else{v=!0;break}const A=k*t;if(1073741823<A)break;if(k=A,C=C*t+E,_++,++a===n){v=!0;break}c=e.charCodeAt(a)}p=30*he.__kBitsPerCharTableMultiplier-1;const w=0|(h*_+p>>>he.__kBitsPerCharTableShift)/30;y.__inplaceMultiplyAdd(k,C,w)}while(!v)}else{h>>=he.__kBitsPerCharTableShift;const v=[],_=[];let C=!1;do{let k=0,w=0;for(;;){let E;if(c-48>>>0<g)E=c-48;else if((32|c)-97>>>0<x)E=(32|c)-87;else{C=!0;break}if(w+=h,k=k<<h|E,++a===n){C=!0;break}if(c=e.charCodeAt(a),30<w+h)break}v.push(k),_.push(w)}while(!C);he.__fillFromParts(y,v,_)}if(a!==n){if(!he.__isWhitespace(c))return null;for(a++;a<n;a++)if(c=e.charCodeAt(a),!he.__isWhitespace(c))return null}return y.sign=r==-1,y.__trim()}static __fillFromParts(e,t,r){let n=0,a=0,c=0;for(let s=t.length-1;0<=s;s--){const h=t[s],p=r[s];a|=h<<c,c+=p,c===30?(e.__setDigit(n++,a),c=0,a=0):30<c&&(e.__setDigit(n++,1073741823&a),c-=30,a=h>>>p-c)}if(a!==0){if(n>=e.length)throw new Error("implementation bug");e.__setDigit(n++,a)}for(;n<e.length;n++)e.__setDigit(n,0)}static __toStringBasePowerOfTwo(e,t){const r=e.length;let n=t-1;n=(85&n>>>1)+(85&n),n=(51&n>>>2)+(51&n),n=(15&n>>>4)+(15&n);const a=n,c=t-1,s=e.__digit(r-1),h=he.__clz30(s);let p=0|(30*r-h+a-1)/a;if(e.sign&&p++,268435456<p)throw new Error("string too long");const m=Array(p);let y=p-1,g=0,x=0;for(let _=0;_<r-1;_++){const C=e.__digit(_),k=(g|C<<x)&c;m[y--]=he.__kConversionChars[k];const w=a-x;for(g=C>>>w,x=30-w;x>=a;)m[y--]=he.__kConversionChars[g&c],g>>>=a,x-=a}const v=(g|s<<x)&c;for(m[y--]=he.__kConversionChars[v],g=s>>>a-x;g!==0;)m[y--]=he.__kConversionChars[g&c],g>>>=a;if(e.sign&&(m[y--]="-"),y!=-1)throw new Error("implementation bug");return m.join("")}static __toStringGeneric(e,t,r){const n=e.length;if(n===0)return"";if(n===1){let _=e.__unsignedDigit(0).toString(t);return r===!1&&e.sign&&(_="-"+_),_}const a=30*n-he.__clz30(e.__digit(n-1)),c=he.__kMaxBitsPerChar[t],s=c-1;let h=a*he.__kBitsPerCharTableMultiplier;h+=s-1,h=0|h/s;const p=h+1>>1,m=he.exponentiate(he.__oneDigit(t,!1),he.__oneDigit(p,!1));let y,g;const x=m.__unsignedDigit(0);if(m.length===1&&32767>=x){y=new he(e.length,!1),y.__initializeDigits();let _=0;for(let C=2*e.length-1;0<=C;C--){const k=_<<15|e.__halfDigit(C);y.__setHalfDigit(C,0|k/x),_=0|k%x}g=_.toString(t)}else{const _=he.__absoluteDivLarge(e,m,!0,!0);y=_.quotient;const C=_.remainder.__trim();g=he.__toStringGeneric(C,t,!0)}y.__trim();let v=he.__toStringGeneric(y,t,!0);for(;g.length<p;)g="0"+g;return r===!1&&e.sign&&(v="-"+v),v+g}static __unequalSign(e){return e?-1:1}static __absoluteGreater(e){return e?-1:1}static __absoluteLess(e){return e?1:-1}static __compareToBigInt(e,t){const r=e.sign;if(r!==t.sign)return he.__unequalSign(r);const n=he.__absoluteCompare(e,t);return 0<n?he.__absoluteGreater(r):0>n?he.__absoluteLess(r):0}static __compareToNumber(e,t){if(he.__isOneDigitInt(t)){const r=e.sign,n=0>t;if(r!==n)return he.__unequalSign(r);if(e.length===0){if(n)throw new Error("implementation bug");return t===0?0:-1}if(1<e.length)return he.__absoluteGreater(r);const a=Math.abs(t),c=e.__unsignedDigit(0);return c>a?he.__absoluteGreater(r):c<a?he.__absoluteLess(r):0}return he.__compareToDouble(e,t)}static __compareToDouble(e,t){if(t!==t)return t;if(t===1/0)return-1;if(t===-1/0)return 1;const r=e.sign;if(r!==0>t)return he.__unequalSign(r);if(t===0)throw new Error("implementation bug: should be handled elsewhere");if(e.length===0)return-1;he.__kBitConversionDouble[0]=t;const n=2047&he.__kBitConversionInts[he.__kBitConversionIntHigh]>>>20;if(n==2047)throw new Error("implementation bug: handled elsewhere");const a=n-1023;if(0>a)return he.__absoluteGreater(r);const c=e.length;let s=e.__digit(c-1);const h=he.__clz30(s),p=30*c-h,m=a+1;if(p<m)return he.__absoluteLess(r);if(p>m)return he.__absoluteGreater(r);let y=1048576|1048575&he.__kBitConversionInts[he.__kBitConversionIntHigh],g=he.__kBitConversionInts[he.__kBitConversionIntLow];const x=20,v=29-h;if(v!==(0|(p-1)%30))throw new Error("implementation bug");let _,C=0;if(20>v){const k=x-v;C=k+32,_=y>>>k,y=y<<32-k|g>>>k,g<<=32-k}else if(v===20)C=32,_=y,y=g,g=0;else{const k=v-x;C=32-k,_=y<<k|g>>>32-k,y=g<<k,g=0}if(s>>>=0,_>>>=0,s>_)return he.__absoluteGreater(r);if(s<_)return he.__absoluteLess(r);for(let k=c-2;0<=k;k--){0<C?(C-=30,_=y>>>2,y=y<<30|g>>>2,g<<=30):_=0;const w=e.__unsignedDigit(k);if(w>_)return he.__absoluteGreater(r);if(w<_)return he.__absoluteLess(r)}if(y!==0||g!==0){if(C===0)throw new Error("implementation bug");return he.__absoluteLess(r)}return 0}static __equalToNumber(e,t){var r=Math.abs;return he.__isOneDigitInt(t)?t===0?e.length===0:e.length===1&&e.sign===0>t&&e.__unsignedDigit(0)===r(t):he.__compareToDouble(e,t)===0}static __comparisonResultToBool(e,t){return t===0?0>e:t===1?0>=e:t===2?0<e:t===3?0<=e:void 0}static __compare(e,t,r){if(e=he.__toPrimitive(e),t=he.__toPrimitive(t),typeof e=="string"&&typeof t=="string")switch(r){case 0:return e<t;case 1:return e<=t;case 2:return e>t;case 3:return e>=t}if(he.__isBigInt(e)&&typeof t=="string")return t=he.__fromString(t),t!==null&&he.__comparisonResultToBool(he.__compareToBigInt(e,t),r);if(typeof e=="string"&&he.__isBigInt(t))return e=he.__fromString(e),e!==null&&he.__comparisonResultToBool(he.__compareToBigInt(e,t),r);if(e=he.__toNumeric(e),t=he.__toNumeric(t),he.__isBigInt(e)){if(he.__isBigInt(t))return he.__comparisonResultToBool(he.__compareToBigInt(e,t),r);if(typeof t!="number")throw new Error("implementation bug");return he.__comparisonResultToBool(he.__compareToNumber(e,t),r)}if(typeof e!="number")throw new Error("implementation bug");if(he.__isBigInt(t))return he.__comparisonResultToBool(he.__compareToNumber(t,e),2^r);if(typeof t!="number")throw new Error("implementation bug");return r===0?e<t:r===1?e<=t:r===2?e>t:r===3?e>=t:void 0}__clzmsd(){return he.__clz30(this.__digit(this.length-1))}static __absoluteAdd(e,t,r){if(e.length<t.length)return he.__absoluteAdd(t,e,r);if(e.length===0)return e;if(t.length===0)return e.sign===r?e:he.unaryMinus(e);let n=e.length;(e.__clzmsd()===0||t.length===e.length&&t.__clzmsd()===0)&&n++;const a=new he(n,r);let c=0,s=0;for(;s<t.length;s++){const h=e.__digit(s)+t.__digit(s)+c;c=h>>>30,a.__setDigit(s,1073741823&h)}for(;s<e.length;s++){const h=e.__digit(s)+c;c=h>>>30,a.__setDigit(s,1073741823&h)}return s<a.length&&a.__setDigit(s,c),a.__trim()}static __absoluteSub(e,t,r){if(e.length===0)return e;if(t.length===0)return e.sign===r?e:he.unaryMinus(e);const n=new he(e.length,r);let a=0,c=0;for(;c<t.length;c++){const s=e.__digit(c)-t.__digit(c)-a;a=1&s>>>30,n.__setDigit(c,1073741823&s)}for(;c<e.length;c++){const s=e.__digit(c)-a;a=1&s>>>30,n.__setDigit(c,1073741823&s)}return n.__trim()}static __absoluteAddOne(e,t,r=null){const n=e.length;r===null?r=new he(n,t):r.sign=t;let a=1;for(let c=0;c<n;c++){const s=e.__digit(c)+a;a=s>>>30,r.__setDigit(c,1073741823&s)}return a!=0&&r.__setDigitGrow(n,1),r}static __absoluteSubOne(e,t){const r=e.length;t=t||r;const n=new he(t,!1);let a=1;for(let c=0;c<r;c++){const s=e.__digit(c)-a;a=1&s>>>30,n.__setDigit(c,1073741823&s)}if(a!=0)throw new Error("implementation bug");for(let c=r;c<t;c++)n.__setDigit(c,0);return n}static __absoluteAnd(e,t,r=null){let n=e.length,a=t.length,c=a;if(n<a){c=n;const p=e,m=n;e=t,n=a,t=p,a=m}let s=c;r===null?r=new he(s,!1):s=r.length;let h=0;for(;h<c;h++)r.__setDigit(h,e.__digit(h)&t.__digit(h));for(;h<s;h++)r.__setDigit(h,0);return r}static __absoluteAndNot(e,t,r=null){const n=e.length,a=t.length;let c=a;n<a&&(c=n);let s=n;r===null?r=new he(s,!1):s=r.length;let h=0;for(;h<c;h++)r.__setDigit(h,e.__digit(h)&~t.__digit(h));for(;h<n;h++)r.__setDigit(h,e.__digit(h));for(;h<s;h++)r.__setDigit(h,0);return r}static __absoluteOr(e,t,r=null){let n=e.length,a=t.length,c=a;if(n<a){c=n;const p=e,m=n;e=t,n=a,t=p,a=m}let s=n;r===null?r=new he(s,!1):s=r.length;let h=0;for(;h<c;h++)r.__setDigit(h,e.__digit(h)|t.__digit(h));for(;h<n;h++)r.__setDigit(h,e.__digit(h));for(;h<s;h++)r.__setDigit(h,0);return r}static __absoluteXor(e,t,r=null){let n=e.length,a=t.length,c=a;if(n<a){c=n;const p=e,m=n;e=t,n=a,t=p,a=m}let s=n;r===null?r=new he(s,!1):s=r.length;let h=0;for(;h<c;h++)r.__setDigit(h,e.__digit(h)^t.__digit(h));for(;h<n;h++)r.__setDigit(h,e.__digit(h));for(;h<s;h++)r.__setDigit(h,0);return r}static __absoluteCompare(e,t){const r=e.length-t.length;if(r!=0)return r;let n=e.length-1;for(;0<=n&&e.__digit(n)===t.__digit(n);)n--;return 0>n?0:e.__unsignedDigit(n)>t.__unsignedDigit(n)?1:-1}static __multiplyAccumulate(e,t,r,n){if(t===0)return;const a=32767&t,c=t>>>15;let s=0,h=0;for(let p,m=0;m<e.length;m++,n++){p=r.__digit(n);const y=e.__digit(m),g=32767&y,x=y>>>15,v=he.__imul(g,a),_=he.__imul(g,c),C=he.__imul(x,a),k=he.__imul(x,c);p+=h+v+s,s=p>>>30,p&=1073741823,p+=((32767&_)<<15)+((32767&C)<<15),s+=p>>>30,h=k+(_>>>15)+(C>>>15),r.__setDigit(n,1073741823&p)}for(;s!=0||h!==0;n++){let p=r.__digit(n);p+=s+h,h=0,s=p>>>30,r.__setDigit(n,1073741823&p)}}static __internalMultiplyAdd(e,t,r,n,a){let c=r,s=0;for(let h=0;h<n;h++){const p=e.__digit(h),m=he.__imul(32767&p,t),y=he.__imul(p>>>15,t),g=m+((32767&y)<<15)+s+c;c=g>>>30,s=y>>>15,a.__setDigit(h,1073741823&g)}if(a.length>n)for(a.__setDigit(n++,c+s);n<a.length;)a.__setDigit(n++,0);else if(c+s!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(e,t,r){r>this.length&&(r=this.length);const n=32767&e,a=e>>>15;let c=0,s=t;for(let h=0;h<r;h++){const p=this.__digit(h),m=32767&p,y=p>>>15,g=he.__imul(m,n),x=he.__imul(m,a),v=he.__imul(y,n),_=he.__imul(y,a);let C=s+g+c;c=C>>>30,C&=1073741823,C+=((32767&x)<<15)+((32767&v)<<15),c+=C>>>30,s=_+(x>>>15)+(v>>>15),this.__setDigit(h,1073741823&C)}if(c!=0||s!==0)throw new Error("implementation bug")}static __absoluteDivSmall(e,t,r=null){r===null&&(r=new he(e.length,!1));let n=0;for(let a,c=2*e.length-1;0<=c;c-=2){a=(n<<15|e.__halfDigit(c))>>>0;const s=0|a/t;n=0|a%t,a=(n<<15|e.__halfDigit(c-1))>>>0;const h=0|a/t;n=0|a%t,r.__setDigit(c>>>1,s<<15|h)}return r}static __absoluteModSmall(e,t){let r=0;for(let n=2*e.length-1;0<=n;n--)r=0|((r<<15|e.__halfDigit(n))>>>0)%t;return r}static __absoluteDivLarge(e,t,r,n){const a=t.__halfDigitLength(),c=t.length,s=e.__halfDigitLength()-a;let h=null;r&&(h=new he(s+2>>>1,!1),h.__initializeDigits());const p=new he(a+2>>>1,!1);p.__initializeDigits();const m=he.__clz15(t.__halfDigit(a-1));0<m&&(t=he.__specialLeftShift(t,m,0));const y=he.__specialLeftShift(e,m,1),g=t.__halfDigit(a-1);let x=0;for(let v,_=s;0<=_;_--){v=32767;const C=y.__halfDigit(_+a);if(C!==g){const w=(C<<15|y.__halfDigit(_+a-1))>>>0;v=0|w/g;let E=0|w%g;const A=t.__halfDigit(a-2),M=y.__halfDigit(_+a-2);for(;he.__imul(v,A)>>>0>(E<<16|M)>>>0&&(v--,E+=g,!(32767<E)););}he.__internalMultiplyAdd(t,v,0,c,p);let k=y.__inplaceSub(p,_,a+1);k!==0&&(k=y.__inplaceAdd(t,_,a),y.__setHalfDigit(_+a,32767&y.__halfDigit(_+a)+k),v--),r&&(1&_?x=v<<15:h.__setDigit(_>>>1,x|v))}if(n)return y.__inplaceRightShift(m),r?{quotient:h,remainder:y}:y;if(r)return h;throw new Error("unreachable")}static __clz15(e){return he.__clz30(e)-15}__inplaceAdd(e,t,r){let n=0;for(let a=0;a<r;a++){const c=this.__halfDigit(t+a)+e.__halfDigit(a)+n;n=c>>>15,this.__setHalfDigit(t+a,32767&c)}return n}__inplaceSub(e,t,r){let n=0;if(1&t){t>>=1;let a=this.__digit(t),c=32767&a,s=0;for(;s<r-1>>>1;s++){const m=e.__digit(s),y=(a>>>15)-(32767&m)-n;n=1&y>>>15,this.__setDigit(t+s,(32767&y)<<15|32767&c),a=this.__digit(t+s+1),c=(32767&a)-(m>>>15)-n,n=1&c>>>15}const h=e.__digit(s),p=(a>>>15)-(32767&h)-n;if(n=1&p>>>15,this.__setDigit(t+s,(32767&p)<<15|32767&c),t+s+1>=this.length)throw new RangeError("out of bounds");!(1&r)&&(a=this.__digit(t+s+1),c=(32767&a)-(h>>>15)-n,n=1&c>>>15,this.__setDigit(t+e.length,1073709056&a|32767&c))}else{t>>=1;let a=0;for(;a<e.length-1;a++){const m=this.__digit(t+a),y=e.__digit(a),g=(32767&m)-(32767&y)-n;n=1&g>>>15;const x=(m>>>15)-(y>>>15)-n;n=1&x>>>15,this.__setDigit(t+a,(32767&x)<<15|32767&g)}const c=this.__digit(t+a),s=e.__digit(a),h=(32767&c)-(32767&s)-n;n=1&h>>>15;let p=0;!(1&r)&&(p=(c>>>15)-(s>>>15)-n,n=1&p>>>15),this.__setDigit(t+a,(32767&p)<<15|32767&h)}return n}__inplaceRightShift(e){if(e===0)return;let t=this.__digit(0)>>>e;const r=this.length-1;for(let n=0;n<r;n++){const a=this.__digit(n+1);this.__setDigit(n,1073741823&a<<30-e|t),t=a>>>e}this.__setDigit(r,t)}static __specialLeftShift(e,t,r){const n=e.length,a=new he(n+r,!1);if(t===0){for(let s=0;s<n;s++)a.__setDigit(s,e.__digit(s));return 0<r&&a.__setDigit(n,0),a}let c=0;for(let s=0;s<n;s++){const h=e.__digit(s);a.__setDigit(s,1073741823&h<<t|c),c=h>>>30-t}return 0<r&&a.__setDigit(n,c),a}static __leftShiftByAbsolute(e,t){const r=he.__toShiftAmount(t);if(0>r)throw new RangeError("BigInt too big");const n=0|r/30,a=r%30,c=e.length,s=a!==0&&e.__digit(c-1)>>>30-a!=0,h=c+n+(s?1:0),p=new he(h,e.sign);if(a===0){let m=0;for(;m<n;m++)p.__setDigit(m,0);for(;m<h;m++)p.__setDigit(m,e.__digit(m-n))}else{let m=0;for(let y=0;y<n;y++)p.__setDigit(y,0);for(let y=0;y<c;y++){const g=e.__digit(y);p.__setDigit(y+n,1073741823&g<<a|m),m=g>>>30-a}if(s)p.__setDigit(c+n,m);else if(m!==0)throw new Error("implementation bug")}return p.__trim()}static __rightShiftByAbsolute(e,t){const r=e.length,n=e.sign,a=he.__toShiftAmount(t);if(0>a)return he.__rightShiftByMaximum(n);const c=0|a/30,s=a%30;let h=r-c;if(0>=h)return he.__rightShiftByMaximum(n);let p=!1;if(n){if(e.__digit(c)&(1<<s)-1)p=!0;else for(let y=0;y<c;y++)if(e.__digit(y)!==0){p=!0;break}}p&&s===0&&!~e.__digit(r-1)&&h++;let m=new he(h,n);if(s===0){m.__setDigit(h-1,0);for(let y=c;y<r;y++)m.__setDigit(y-c,e.__digit(y))}else{let y=e.__digit(c)>>>s;const g=r-c-1;for(let x=0;x<g;x++){const v=e.__digit(x+c+1);m.__setDigit(x,1073741823&v<<30-s|y),y=v>>>s}m.__setDigit(g,y)}return p&&(m=he.__absoluteAddOne(m,!0,m)),m.__trim()}static __rightShiftByMaximum(e){return e?he.__oneDigit(1,!0):he.__zero()}static __toShiftAmount(e){if(1<e.length)return-1;const t=e.__unsignedDigit(0);return t>he.__kMaxLengthBits?-1:t}static __toPrimitive(e,t="default"){if(typeof e!="object"||e.constructor===he)return e;if(typeof Symbol<"u"&&typeof Symbol.toPrimitive=="symbol"&&e[Symbol.toPrimitive]){const a=e[Symbol.toPrimitive](t);if(typeof a!="object")return a;throw new TypeError("Cannot convert object to primitive value")}const r=e.valueOf;if(r){const a=r.call(e);if(typeof a!="object")return a}const n=e.toString;if(n){const a=n.call(e);if(typeof a!="object")return a}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(e){return he.__isBigInt(e)?e:+e}static __isBigInt(e){return typeof e=="object"&&e!==null&&e.constructor===he}static __truncateToNBits(e,t){const r=0|(e+29)/30,n=new he(r,t.sign),a=r-1;for(let s=0;s<a;s++)n.__setDigit(s,t.__digit(s));let c=t.__digit(a);if(e%30!=0){const s=32-e%30;c=c<<s>>>s}return n.__setDigit(a,c),n.__trim()}static __truncateAndSubFromPowerOfTwo(e,t,r){var n=Math.min;const a=0|(e+29)/30,c=new he(a,r);let s=0;const h=a-1;let p=0;for(const x=n(h,t.length);s<x;s++){const v=0-t.__digit(s)-p;p=1&v>>>30,c.__setDigit(s,1073741823&v)}for(;s<h;s++)c.__setDigit(s,0|1073741823&-p);let m=h<t.length?t.__digit(h):0;const y=e%30;let g;if(y==0)g=0-m-p,g&=1073741823;else{const x=32-y;m=m<<x>>>x;const v=1<<32-x;g=v-m-p,g&=v-1}return c.__setDigit(h,g),c.__trim()}__digit(e){return this[e]}__unsignedDigit(e){return this[e]>>>0}__setDigit(e,t){this[e]=0|t}__setDigitGrow(e,t){this[e]=0|t}__halfDigitLength(){const e=this.length;return 32767>=this.__unsignedDigit(e-1)?2*e-1:2*e}__halfDigit(e){return 32767&this[e>>>1]>>>15*(1&e)}__setHalfDigit(e,t){const r=e>>>1,n=this.__digit(r),a=1&e?32767&n|t<<15:1073709056&n|32767&t;this.__setDigit(r,a)}static __digitPow(e,t){let r=1;for(;0<t;)1&t&&(r*=e),t>>>=1,e*=e;return r}static __detectBigEndian(){return he.__kBitConversionDouble[0]=-0,he.__kBitConversionInts[0]!==0}static __isOneDigitInt(e){return(1073741823&e)===e}}he.__kMaxLength=33554432,he.__kMaxLengthBits=he.__kMaxLength<<5,he.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],he.__kBitsPerCharTableShift=5,he.__kBitsPerCharTableMultiplier=1<<he.__kBitsPerCharTableShift,he.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],he.__kBitConversionBuffer=new ArrayBuffer(8),he.__kBitConversionDouble=new Float64Array(he.__kBitConversionBuffer),he.__kBitConversionInts=new Int32Array(he.__kBitConversionBuffer),he.__kBitConversionIntHigh=he.__detectBigEndian()?0:1,he.__kBitConversionIntLow=he.__detectBigEndian()?1:0,he.__clz30=Math.clz32?function(i){return Math.clz32(i)-2}:function(i){return i===0?30:0|29-(0|Math.log(i>>>0)/Math.LN2)},he.__imul=Math.imul||function(i,e){return 0|i*e};const J1={};function ec(i,e){Object.defineProperty(i.prototype,Symbol.toStringTag,{value:e,writable:!1,enumerable:!1,configurable:!0});for(const t of Object.getOwnPropertyNames(i)){const r=Object.getOwnPropertyDescriptor(i,t);r.configurable&&r.enumerable&&(r.enumerable=!1,Object.defineProperty(i,t,r))}for(const t of Object.getOwnPropertyNames(i.prototype)){const r=Object.getOwnPropertyDescriptor(i.prototype,t);r.configurable&&r.enumerable&&(r.enumerable=!1,Object.defineProperty(i.prototype,t,r))}ew(e,i),ew(`${e}.prototype`,i.prototype)}function ew(i,e){const t=`%${i}%`;if(J1[t]!==void 0)throw new Error(`intrinsic ${i} already exists`);J1[t]=e}function Oi(i){return J1[i]}const zi="slot-epochNanoSeconds",gu="slot-timezone-identifier",oi="slot-year",di="slot-month",pi="slot-day",Zi="slot-hour",Xi="slot-minute",Ki="slot-second",Qi="slot-millisecond",Ji="slot-microsecond",er="slot-nanosecond",At="slot-calendar",Qs="slot-cached-instant",jr="slot-time-zone",aa="slot-years",Cs="slot-months",Aa="slot-weeks",oa="slot-days",la="slot-hours",ca="slot-minutes",ua="slot-seconds",da="slot-milliseconds",ha="slot-microseconds",pa="slot-nanoseconds",Fn="slot-calendar-identifier",Kk=new WeakMap;function tc(i){Kk.set(i,Object.create(null))}function U_(i){return Kk.get(i)}function vs(i,...e){if(!i||typeof i!="object")return!1;const t=U_(i);return!!t&&e.reduce((r,n)=>r&&n in t,!0)}function Q(i,e){const t=U_(i)[e];if(t===void 0)throw new TypeError(`Missing internal slot ${e}`);return t}function rr(i,e,t){U_(i)[e]=t}const cS=/\.[-A-Za-z_]|\.\.[-A-Za-z._]{1,12}|\.[-A-Za-z_][-A-Za-z._]{0,12}|[A-Za-z_][-A-Za-z._]{0,13}/,s4=new RegExp(`(?:(?:${cS.source})(?:\\/(?:${cS.source}))*|Etc/GMT[-+]\\d{1,2}|${/(?:[+\u2212-][0-2][0-9](?::?[0-5][0-9](?::?[0-5][0-9](?:[.,]\d{1,9})?)?)?)/.source})`),uS=/[A-Za-z0-9]{3,8}/,a4=new RegExp(`(?:${uS.source}(?:-${uS.source})*)`),Qk=/(?:[+\u2212-]\d{6}|\d{4})/,Y0=/(?:0[1-9]|1[0-2])/,tw=/(?:0[1-9]|[12]\d|3[01])/,o4=new RegExp(`(${Qk.source})(?:-(${Y0.source})-(${tw.source})|(${Y0.source})(${tw.source}))`),Jk=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,eM=/([+\u2212-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/,tM=new RegExp(`(?:([zZ])|(?:${eM.source})?)(?:\\[(${s4.source})\\])?`),iM=new RegExp(`\\[u-ca=(${a4.source})\\]`),l4=new RegExp(`^${o4.source}(?:(?:T|\\s+)${Jk.source})?${tM.source}(?:${iM.source})?$`,"i"),c4=new RegExp(`^T?${Jk.source}(?:${tM.source})?(?:${iM.source})?$`,"i"),u4=new RegExp(`^(${Qk.source})-?(${Y0.source})$`),d4=new RegExp(`^(?:--)?(${Y0.source})-?(${tw.source})$`),zb=/(\d+)(?:[.,](\d{1,9}))?/,h4=new RegExp(`(?:${zb.source}H)?(?:${zb.source}M)?(?:${zb.source}S)?`),p4=new RegExp(`^([+−-])?P${/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/.source}(?:T(?!$)${h4.source})?$`,"i"),rM=Array.prototype.includes,V_=Array.prototype.push,nM=globalThis.Intl.DateTimeFormat,f4=Math.min,m4=Math.max,Er=Math.abs,ps=Math.floor,Xm=Math.sign,hp=Math.trunc,Sg=Number.isNaN,ks=Number.isFinite,g4=Number,Eg=String,y4=Number.MAX_SAFE_INTEGER,sM=Object.assign,Bs=Object.create,v4=Object.getOwnPropertyDescriptor,x4=Object.is,G_=Reflect.apply,$n=he.BigInt(0),H_=he.BigInt(1),Ud=he.BigInt(60),Fr=he.BigInt(1e3),Ro=he.BigInt(1e6),Lc=he.BigInt(1e9),b4=he.BigInt(-1),Du=he.multiply(he.BigInt(86400),Lc),Km=he.multiply(he.BigInt(-86400),he.BigInt(1e17)),Qm=he.multiply(he.BigInt(86400),he.BigInt(1e17)),aM=he.multiply(he.BigInt(-388152),he.BigInt(1e13)),w4=he.multiply(Du,he.BigInt(3660)),oM=he.multiply(Du,he.BigInt(366)),lM=he.multiply(Du,he.BigInt(14)),_4=["iso8601","hebrew","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","islamicc","persian","ethiopic","ethioaa","coptic","chinese","dangi","roc","indian","buddhist","japanese","gregory"];function cM(i){if(typeof i!="number"||!ks(i))return!1;const e=Er(i);return ps(e)===e}function an(i){return typeof i=="object"&&i!==null||typeof i=="function"}function Jm(i){if(typeof i=="bigint")throw new TypeError("Cannot convert BigInt to number");return g4(i)}function Br(i){const e=Jm(i);if(Sg(e))return 0;const t=hp(e);return e===0?0:t}function Vi(i){if(typeof i=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return Eg(i)}function Zr(i){const e=Br(i);if(!ks(e))throw new RangeError("infinity is out of range");return e}function eg(i,e){const t=Br(i);if(!ks(t))throw new RangeError("infinity is out of range");if(t<1)throw e!==void 0?new RangeError(`property '${e}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return t}function ds(i){const e=Jm(i);if(Sg(e))return 0;if(!ks(e))throw new RangeError("infinity is out of range");if(!cM(e))throw new RangeError(`unsupported fractional value ${e}`);return Br(e)}function us(i,e){return{quotient:he.divide(i,e),remainder:he.remainder(i,e)}}function q_(i){return he.lessThan(i,$n)?he.multiply(i,b4):i}function iw(i,...e){return V_.apply(i,e),i}const dS=new Map([["year",Zr],["month",eg],["monthCode",Vi],["day",eg],["hour",Zr],["minute",Zr],["second",Zr],["millisecond",Zr],["microsecond",Zr],["nanosecond",Zr],["years",ds],["months",ds],["weeks",ds],["days",ds],["hours",ds],["minutes",ds],["seconds",ds],["milliseconds",ds],["microseconds",ds],["nanoseconds",ds],["era",Vi],["eraYear",Br],["offset",Vi]]),C4=new Map([["hour",0],["minute",0],["second",0],["millisecond",0],["microsecond",0],["nanosecond",0]]),Gp=[["years","year","date"],["months","month","date"],["weeks","week","date"],["days","day","date"],["hours","hour","time"],["minutes","minute","time"],["seconds","second","time"],["milliseconds","millisecond","time"],["microseconds","microsecond","time"],["nanoseconds","nanosecond","time"]],Z0=new Map(Gp.map(i=>[i[0],i[1]])),T4=new Map(Gp.map(([i,e])=>[e,i])),hS=Gp.map(([,i])=>i),pS=Array.from(Z0.keys()).sort(),fS=new Map;function uM(i){let e=fS.get(i);return e===void 0&&(e=new nM("en-us",{timeZone:Eg(i),hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),fS.set(i,e)),e}function ns(i){return vs(i,zi)&&!vs(i,jr,At)}function Rl(i){return vs(i,gu)}function jn(i){return vs(i,Fn)}function In(i){return vs(i,aa,Cs,oa,la,ca,ua,da,ha,pa)}function yr(i){return vs(i,"slot-date-brand")}function Pn(i){return vs(i,Zi,Xi,Ki,Qi,Ji,er)&&!vs(i,oi,di,pi)}function ir(i){return vs(i,oi,di,pi,Zi,Xi,Ki,Qi,Ji,er)}function Pr(i){return vs(i,"slot-year-month-brand")}function Ts(i){return vs(i,"slot-month-day-brand")}function bi(i){return vs(i,zi,jr,At)}function Hp(i){if(vs(i,At)||vs(i,jr))throw new TypeError("with() does not support a calendar or timeZone property");if(i.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(i.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function dM(i){let{ianaName:e,offset:t,z:r}=function(a){try{let c=J_(a);if(c)return{ianaName:c.toString()}}catch{}try{const c=ic(a);if(c.z||c.offset||c.ianaName)return c}catch{}throw new RangeError(`Invalid time zone: ${a}`)}(i);return e||(r?"UTC":t)}function kg(i,e){return e==="never"||e==="auto"&&i==="iso8601"?"":`[u-ca=${i}]`}function ic(i){const e=l4.exec(i);if(!e)throw new RangeError(`invalid ISO 8601 string: ${i}`);let t=e[1];if(t[0]==="−"&&(t=`-${t.slice(1)}`),t==="-000000")throw new RangeError(`invalid ISO 8601 string: ${i}`);const r=Br(t),n=Br(e[2]||e[4]),a=Br(e[3]||e[5]),c=Br(e[6]),s=e[6]!==void 0,h=Br(e[7]||e[10]);let p=Br(e[8]||e[11]);p===60&&(p=59);const m=(e[9]||e[12])+"000000000",y=Br(m.slice(0,3)),g=Br(m.slice(3,6)),x=Br(m.slice(6,9));let v,_=!1;if(e[13])v=void 0,_=!0;else if(e[14]&&e[15]){const w=e[14]==="-"||e[14]==="−"?"-":"+",E=e[15]||"00",A=e[16]||"00",M=e[17]||"00";let S=e[18]||"0";if(v=`${w}${E}:${A}`,+S){for(;S.endsWith("0");)S=S.slice(0,-1);v+=`:${M}.${S}`}else+M&&(v+=`:${M}`);v==="-00:00"&&(v="+00:00")}let C=e[19];if(C)try{C=J_(C).toString()}catch{}const k=e[20];return r2(r,n,a,c,h,p,y,g,x),{year:r,month:n,day:a,hasTime:s,hour:c,minute:h,second:p,millisecond:y,microsecond:g,nanosecond:x,ianaName:C,offset:v,z:_,calendar:k}}function hM(i){const e=u4.exec(i);let t,r,n,a;if(e){let c=e[1];if(c[0]==="−"&&(c=`-${c.slice(1)}`),c==="-000000")throw new RangeError(`invalid ISO 8601 string: ${i}`);t=Br(c),r=Br(e[2]),n=e[3]}else{let c;if({year:t,month:r,calendar:n,day:a,z:c}=ic(i),c)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:t,month:r,calendar:n,referenceISODay:a}}function pM(i){const e=d4.exec(i);let t,r,n,a;if(e)t=Br(e[1]),r=Br(e[2]);else{let c;if({month:t,day:r,calendar:n,year:a,z:c}=ic(i),c)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:t,day:r,calendar:n,referenceISOYear:a}}function S4(i){const e=p4.exec(i);if(!e)throw new RangeError(`invalid duration: ${i}`);if(e.slice(2).every(C=>C===void 0))throw new RangeError(`invalid duration: ${i}`);const t=e[1]==="-"||e[1]==="−"?-1:1,r=Br(e[2])*t,n=Br(e[3])*t,a=Br(e[4])*t,c=Br(e[5])*t,s=Br(e[6])*t;let h=e[7],p=Br(e[8])*t,m=e[9],y=Br(e[10])*t;const g=e[11]+"000000000";let x=Br(g.slice(0,3))*t,v=Br(g.slice(3,6))*t,_=Br(g.slice(6,9))*t;return h=h?t*Br(h)/10**h.length:0,m=m?t*Br(m)/10**m.length:0,{minutes:p,seconds:y,milliseconds:x,microseconds:v,nanoseconds:_}=function(k,w,E,A,M,S,N){let Y=k,Z=w,K=E,U=A,$=M,B=S,R=N;if(Y!==0){[Z,K,U,$,B,R].forEach(G=>{if(G!==0)throw new RangeError("only the smallest unit can be fractional")});const L=60*Y;Z=hp(L),K=L%1}if(K!==0){[U,$,B,R].forEach(F=>{if(F!==0)throw new RangeError("only the smallest unit can be fractional")});const L=60*K;U=hp(L);const G=L%1;if(G!==0){const F=1e3*G;$=hp(F);const j=F%1;if(j!==0){const q=1e3*j;B=hp(q);const W=q%1;W!==0&&(R=hp(1e3*W))}}}return{minutes:Z,seconds:U,milliseconds:$,microseconds:B,nanoseconds:R}}(h,p,m,y,x,v,_),ix(r,n,a,c,s,p,y,x,v,_),{years:r,months:n,weeks:a,days:c,hours:s,minutes:p,seconds:y,milliseconds:x,microseconds:v,nanoseconds:_}}function E4(i){let{year:e,month:t,day:r,hour:n,minute:a,second:c,millisecond:s,microsecond:h,nanosecond:p,offset:m,z:y}=function(_){const C=ic(_);if(!C.z&&!C.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return C}(i);if(!y&&!m)throw new RangeError("Temporal.Instant requires a time zone offset");const g=y?0:eh(m);({year:e,month:t,day:r,hour:n,minute:a,second:c,millisecond:s,microsecond:h,nanosecond:p}=t2(e,t,r,n,a,c,s,h,p-g));const x=Nu(e,t,r,n,a,c,s,h,p);if(x===null)throw new RangeError("DateTime outside of supported range");return x}function X0(i,e,t,r){let n=i,a=e,c=t;switch(r){case"reject":Zl(n,a,c);break;case"constrain":({year:n,month:a,day:c}=MM(n,a,c))}return{year:n,month:a,day:c}}function Vv(i,e,t,r,n,a,c){let s=i,h=e,p=t,m=r,y=n,g=a;switch(c){case"reject":tx(s,h,p,m,y,g);break;case"constrain":({hour:s,minute:h,second:p,millisecond:m,microsecond:y,nanosecond:g}=function(v,_,C,k,w,E){const A=Xa(v,0,23),M=Xa(_,0,59),S=Xa(C,0,59),N=Xa(k,0,999),Y=Xa(w,0,999),Z=Xa(E,0,999);return{hour:A,minute:M,second:S,millisecond:N,microsecond:Y,nanosecond:Z}}(s,h,p,m,y,g))}return{hour:s,minute:h,second:p,millisecond:m,microsecond:y,nanosecond:g}}function ah(i){if(!an(i))return S4(Vi(i));if(In(i))return{years:Q(i,aa),months:Q(i,Cs),weeks:Q(i,Aa),days:Q(i,oa),hours:Q(i,la),minutes:Q(i,ca),seconds:Q(i,ua),milliseconds:Q(i,da),microseconds:Q(i,ha),nanoseconds:Q(i,pa)};const e={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};let t=function(v){if(!an(v))throw new TypeError("invalid duration-like");const _={years:void 0,months:void 0,weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0,milliseconds:void 0,microseconds:void 0,nanoseconds:void 0};let C=!1;for(const k of pS){const w=v[k];w!==void 0&&(C=!0,_[k]=ds(w))}if(!C)throw new TypeError("invalid duration-like");return _}(i);for(const x of pS){const v=t[x];v!==void 0&&(e[x]=v)}let{years:r,months:n,weeks:a,days:c,hours:s,minutes:h,seconds:p,milliseconds:m,microseconds:y,nanoseconds:g}=e;return ix(r,n,a,c,s,h,p,m,y,g),{years:r,months:n,weeks:a,days:c,hours:s,minutes:h,seconds:p,milliseconds:m,microseconds:y,nanoseconds:g}}function Vn(i){return i===void 0?"constrain":Ou(i,"overflow",["constrain","reject"],"constrain")}function tg(i){return i===void 0?"compatible":Ou(i,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function Ra(i,e){return Ou(i,"roundingMode",["ceil","floor","trunc","halfExpand"],e)}function Mg(i){switch(i){case"ceil":return"floor";case"floor":return"ceil";default:return i}}function rw(i,e){return i===void 0?e:Ou(i,"offset",["prefer","use","ignore","reject"],e)}function Ag(i){return Ou(i,"calendarName",["auto","always","never"],"auto")}function $c(i,e,t){let r=1/0;e!==void 0&&(r=e),t||e===void 0||(r=e>1?e-1:1);const n=function(c,s,h,p,m){let y=c[s];if(y===void 0)return m;const g=Jm(y);if(Sg(g)||g<h||g>p)throw new RangeError(`${String(s)} must be between ${h} and ${p}, not ${g}`);return ps(g)}(i,"roundingIncrement",1,r,1);if(e!==void 0&&e%n!=0)throw new RangeError(`Rounding increment must divide evenly into ${e}`);return n}function W_(i,e){return $c(i,{year:void 0,month:void 0,week:void 0,day:void 0,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[e],!1)}function Ig(i){const e=gs(i,"smallestUnit","time",void 0);if(e==="hour"){const n=Gp.reduce((a,[c,s,h])=>(h==="time"&&s!=="hour"&&a.push(s,c),a),[]);throw new RangeError(`smallestUnit must be one of ${n.join(", ")}, not ${e}`)}switch(e){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}let t=i.fractionalSecondDigits;if(t===void 0&&(t="auto"),typeof t!="number"){const n=Vi(t);if(n==="auto")return{precision:"auto",unit:"nanosecond",increment:1};throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${n}`)}if(Sg(t)||t<0||t>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`);const r=ps(t);switch(r){case 0:return{precision:r,unit:"second",increment:1};case 1:case 2:case 3:return{precision:r,unit:"millisecond",increment:10**(3-r)};case 4:case 5:case 6:return{precision:r,unit:"microsecond",increment:10**(6-r)};case 7:case 8:case 9:return{precision:r,unit:"nanosecond",increment:10**(9-r)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`)}}const Kd=Symbol("~required~");function gs(i,e,t,r,n=[]){const a=[];for(const[,p,m]of Gp)t!=="datetime"&&t!==m||a.push(p);a.push(...n);let c=r;c===Kd?c=void 0:c!==void 0&&a.push(c);const s=[...a];for(const p of a){const m=T4.get(p);m!==void 0&&s.push(m)}let h=Ou(i,e,s,c);if(h===void 0&&r===Kd)throw new RangeError(`${e} is required`);return Z0.has(h)?Z0.get(h):h}function S0(i){const e=i.relativeTo;if(e===void 0)return e;let t,r,n,a,c,s,h,p,m,y,g,x,v="option",_=!1;if(an(e)){if(bi(e)||yr(e))return e;if(ir(e))return Pp(e);y=qp(e);const C=ar(e,Xn(y,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]),k=Bs(null);k.overflow="constrain",{year:t,month:r,day:n,hour:a,minute:c,second:s,millisecond:h,microsecond:p,nanosecond:m}=Pg(y,C,k),x=e.offset,x===void 0&&(v="wall"),g=e.timeZone}else{let C,k;({year:t,month:r,day:n,hour:a,minute:c,second:s,millisecond:h,microsecond:p,nanosecond:m,calendar:y,ianaName:C,offset:x,z:k}=ic(Vi(e))),C&&(g=C),k?v="exact":x||(v="wall"),y||(y=Gn()),y=Is(y),_=!0}if(g!==void 0){g=ya(g);let C=0;return v==="option"&&(C=eh(Vi(x))),zs(Q0(t,r,n,a,c,s,h,p,m,v,C,g,"compatible","reject",_),g,y)}return rl(t,r,n,y)}function nw(i,e,t,r,n,a,c,s,h,p){for(const[m,y]of[["years",i],["months",e],["weeks",t],["days",r],["hours",n],["minutes",a],["seconds",c],["milliseconds",s],["microseconds",h],["nanoseconds",p]])if(y!==0)return Z0.get(m);return"nanosecond"}function Qa(i,e){return hS.indexOf(i)>hS.indexOf(e)?e:i}function Gv(i,e){let t=i;return t===void 0&&(t=Bs(null)),sM(Bs(null),t,{largestUnit:e})}function ar(i,e,t,{emptySourceErrorMessage:r}={emptySourceErrorMessage:"no supported properties found"}){const n=Bs(null);let a=!1;for(const c of e){let s=i[c];if(s!==void 0)a=!0,dS.has(c)&&(s=dS.get(c)(s)),n[c]=s;else if(t!=="partial"){if(rM.call(t,c))throw new TypeError(`required property '${c}' missing or undefined`);s=C4.get(c),n[c]=s}}if(t==="partial"&&!a)throw new TypeError(r);if(n.era===void 0!=(n.eraYear===void 0))throw new RangeError("properties 'era' and 'eraYear' must be provided together");return n}function K0(i,e="complete"){const t=["hour","microsecond","millisecond","minute","nanosecond","second"],r=ar(i,t,"partial",{emptySourceErrorMessage:"invalid time-like"}),n={};for(const a of t){const c=v4(r,a);c!==void 0?n[a]=c.value:e==="complete"&&(n[a]=0)}return n}function Yr(i,e){let t=i;if(an(t)){if(yr(t))return t;if(bi(t)&&(Vn(e),t=fo(Q(t,jr),Q(t,Qs),Q(t,At))),ir(t))return Vn(e),rl(Q(t,oi),Q(t,di),Q(t,pi),Q(t,At));const h=qp(t);return Lu(h,ar(t,Xn(h,["day","month","monthCode","year"]),[]),e)}Vn(e);const{year:r,month:n,day:a,calendar:c,z:s}=function(p){return ic(p)}(Vi(t));if(s)throw new RangeError("Z designator not supported for PlainDate");return new(Oi("%Temporal.PlainDate%"))(r,n,a,c)}function Pg(i,e,t){let{hour:r,minute:n,second:a,millisecond:c,microsecond:s,nanosecond:h}=K0(e);const p=Vn(t),m=Lu(i,e,t),y=Q(m,oi),g=Q(m,di),x=Q(m,pi);return{hour:r,minute:n,second:a,millisecond:c,microsecond:s,nanosecond:h}=Vv(r,n,a,c,s,h,p),{year:y,month:g,day:x,hour:r,minute:n,second:a,millisecond:c,microsecond:s,nanosecond:h}}function Od(i,e){let t,r,n,a,c,s,h,p,m,y;if(an(i)){if(ir(i))return i;if(bi(i))return Vn(e),fo(Q(i,jr),Q(i,Qs),Q(i,At));if(yr(i))return Vn(e),Za(Q(i,oi),Q(i,di),Q(i,pi),0,0,0,0,0,0,Q(i,At));y=qp(i);const g=ar(i,Xn(y,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]);({year:t,month:r,day:n,hour:a,minute:c,second:s,millisecond:h,microsecond:p,nanosecond:m}=Pg(y,g,e))}else{let g;if(Vn(e),{year:t,month:r,day:n,hour:a,minute:c,second:s,millisecond:h,microsecond:p,nanosecond:m,calendar:y,z:g}=function(v){return ic(v)}(Vi(i)),g)throw new RangeError("Z designator not supported for PlainDateTime");r2(t,r,n,a,c,s,h,p,m),y===void 0&&(y=Gn()),y=Is(y)}return Za(t,r,n,a,c,s,h,p,m,y)}function vp(i){if(In(i))return i;let{years:e,months:t,weeks:r,days:n,hours:a,minutes:c,seconds:s,milliseconds:h,microseconds:p,nanoseconds:m}=ah(i);return new(Oi("%Temporal.Duration%"))(e,t,r,n,a,c,s,h,p,m)}function zl(i){if(ns(i))return i;if(bi(i))return new(Oi("%Temporal.Instant%"))(Q(i,zi));const e=E4(Vi(i));return new(Oi("%Temporal.Instant%"))(e)}function mS(i,e){let t=i;if(an(t)){if(Ts(t))return t;let h,p;if(vs(t,At))h=Q(t,At),p=!1;else{let y=t.calendar;p=y===void 0,y===void 0&&(y=Gn()),h=Is(y)}t=t;const m=ar(t,Xn(h,["day","month","monthCode","year"]),[]);return p&&m.month!==void 0&&m.monthCode===void 0&&m.year===void 0&&(m.year=1972),Ip(h,m,e)}Vn(e);let{month:r,day:n,referenceISOYear:a,calendar:c}=pM(Vi(t)),s=c;return s===void 0&&(s=Gn()),s=Is(s),a===void 0?(Zl(1972,r,n),ig(r,n,s)):Ip(s,ig(r,n,s,a))}function Dc(i,e="constrain"){let t,r,n,a,c,s,h,p=i;if(an(p)){if(Pn(p))return p;if(bi(p)&&(p=fo(Q(p,jr),Q(p,Qs),Q(p,At))),ir(p))return new(Oi("%Temporal.PlainTime%"))(Q(p,Zi),Q(p,Xi),Q(p,Ki),Q(p,Qi),Q(p,Ji),Q(p,er));if(h=qp(p),Vi(h)!=="iso8601")throw new RangeError("PlainTime can only have iso8601 calendar");({hour:t,minute:r,second:n,millisecond:a,microsecond:c,nanosecond:s}=K0(p)),{hour:t,minute:r,second:n,millisecond:a,microsecond:c,nanosecond:s}=Vv(t,r,n,a,c,s,e)}else if({hour:t,minute:r,second:n,millisecond:a,microsecond:c,nanosecond:s,calendar:h}=function(y){const g=c4.exec(y);let x,v,_,C,k,w,E;if(g){x=Br(g[1]),v=Br(g[2]||g[5]),_=Br(g[3]||g[6]),_===60&&(_=59);const A=(g[4]||g[7])+"000000000";C=Br(A.slice(0,3)),k=Br(A.slice(3,6)),w=Br(A.slice(6,9)),E=g[15]}else{let A,M;if({hasTime:M,hour:x,minute:v,second:_,millisecond:C,microsecond:k,nanosecond:w,calendar:E,z:A}=ic(y),!M)throw new RangeError(`time is missing in string: ${y}`);if(A)throw new RangeError("Z designator not supported for PlainTime")}if(/[tT ][0-9][0-9]/.test(y))return{hour:x,minute:v,second:_,millisecond:C,microsecond:k,nanosecond:w,calendar:E};try{const{month:A,day:M}=pM(y);Zl(1972,A,M)}catch{try{const{year:A,month:M}=hM(y);Zl(A,M,1)}catch{return{hour:x,minute:v,second:_,millisecond:C,microsecond:k,nanosecond:w,calendar:E}}}throw new RangeError(`invalid ISO 8601 time-only string ${y}; may need a T prefix`)}(Vi(p)),tx(t,r,n,a,c,s),h!==void 0&&h!=="iso8601")throw new RangeError("PlainTime can only have iso8601 calendar");return new(Oi("%Temporal.PlainTime%"))(t,r,n,a,c,s)}function Tm(i,e){if(an(i)){if(Pr(i))return i;const s=qp(i);return Jd(s,ar(i,Xn(s,["month","monthCode","year"]),[]),e)}Vn(e);let{year:t,month:r,referenceISODay:n,calendar:a}=hM(Vi(i)),c=a;return c===void 0&&(c=Gn()),c=Is(c),n===void 0?(Zl(t,r,1),rg(t,r,c)):Jd(c,rg(t,r,c,n))}function Q0(i,e,t,r,n,a,c,s,h,p,m,y,g,x,v){const _=new(Oi("%Temporal.PlainDateTime%"))(i,e,t,r,n,a,c,s,h);if(p==="wall"||x==="ignore")return Q(ma(y,_,g),zi);if(p==="exact"||x==="use"){const k=Nu(i,e,t,r,n,a,c,s,h);if(k===null)throw new RangeError("ZonedDateTime outside of supported range");return he.subtract(k,he.BigInt(m))}const C=J0(y,_);for(const k of C){const w=gl(y,k),E=he.toNumber(qa(he.BigInt(w),6e10,"halfExpand"));if(w===m||v&&E===m)return Q(k,zi)}if(x==="reject"){const k=e2(m),w=Rl(y)?Q(y,gu):"time zone";throw new RangeError(`Offset ${k} is invalid for ${_.toString()} in ${w}`)}return Q(wM(C,y,_,g),zi)}function Sm(i,e){let t,r,n,a,c,s,h,p,m,y,g,x,v=!1,_="option";if(an(i)){if(bi(i))return i;x=qp(i);const k=ar(i,iw(Xn(x,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),"timeZone","offset"),["timeZone"]);({year:t,month:r,day:n,hour:a,minute:c,second:s,millisecond:h,microsecond:p,nanosecond:m}=Pg(x,k,e)),y=ya(k.timeZone),g=k.offset,g===void 0?_="wall":g=Vi(g)}else{let k,w;if(Vn(e),{year:t,month:r,day:n,hour:a,minute:c,second:s,millisecond:h,microsecond:p,nanosecond:m,ianaName:k,offset:g,z:w,calendar:x}=function(A){const M=ic(A);if(!M.ianaName)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return M}(Vi(i)),!k)throw new RangeError("time zone ID required in brackets");w?_="exact":g||(_="wall"),y=new(Oi("%Temporal.TimeZone%"))(k),x||(x=Gn()),x=Is(x),v=!0}let C=0;return _==="option"&&(C=eh(g)),zs(Q0(t,r,n,a,c,s,h,p,m,_,C,y,tg(e),rw(e,"reject"),v),y,x)}function fM(i,e,t,r,n){Zl(e,t,r),AM(e,t,r),tc(i),rr(i,oi,e),rr(i,di,t),rr(i,pi,r),rr(i,At,n),rr(i,"slot-date-brand",!0)}function rl(i,e,t,r=Gn()){const n=Oi("%Temporal.PlainDate%"),a=Bs(n.prototype);return fM(a,i,e,t,r),a}function mM(i,e,t,r,n,a,c,s,h,p,m){r2(e,t,r,n,a,c,s,h,p),IM(e,t,r,n,a,c,s,h,p),tc(i),rr(i,oi,e),rr(i,di,t),rr(i,pi,r),rr(i,Zi,n),rr(i,Xi,a),rr(i,Ki,c),rr(i,Qi,s),rr(i,Ji,h),rr(i,er,p),rr(i,At,m)}function Za(i,e,t,r,n,a,c,s,h,p=Gn()){const m=Oi("%Temporal.PlainDateTime%"),y=Bs(m.prototype);return mM(y,i,e,t,r,n,a,c,s,h,p),y}function gM(i,e,t,r,n){Zl(n,e,t),AM(n,e,t),tc(i),rr(i,di,e),rr(i,pi,t),rr(i,oi,n),rr(i,At,r),rr(i,"slot-month-day-brand",!0)}function ig(i,e,t=Gn(),r=1972){const n=Oi("%Temporal.PlainMonthDay%"),a=Bs(n.prototype);return gM(a,i,e,t,r),a}function yM(i,e,t,r,n){Zl(e,t,n),function(c,s){js(c,-271821,275760),c===-271821?js(s,4,12):c===275760&&js(s,1,9)}(e,t),tc(i),rr(i,oi,e),rr(i,di,t),rr(i,pi,n),rr(i,At,r),rr(i,"slot-year-month-brand",!0)}function rg(i,e,t=Gn(),r=1){const n=Oi("%Temporal.PlainYearMonth%"),a=Bs(n.prototype);return yM(a,i,e,t,r),a}function vM(i,e,t,r){Ld(e),tc(i),rr(i,zi,e),rr(i,jr,t),rr(i,At,r);const n=new(Oi("%Temporal.Instant%"))(Q(i,zi));rr(i,Qs,n)}function zs(i,e,t=Gn()){const r=Oi("%Temporal.ZonedDateTime%"),n=Bs(r.prototype);return vM(n,i,e,t),n}function Gn(){return new(Oi("%Temporal.Calendar%"))("iso8601")}function Xn(i,e){let t=e;i.fields&&(t=i.fields(t));const r=[];for(const n of t){if(typeof n!="string")throw new TypeError("bad return from calendar.fields()");V_.call(r,n)}return r}function Qd(i,e,t){const r=i.mergeFields;if(!r)return{...e,...t};const n=Reflect.apply(r,i,[e,t]);if(!an(n))throw new TypeError("bad return from calendar.mergeFields()");return n}function fa(i,e,t,r,n){let a=n;a===void 0&&(a=i.dateAdd);const c=G_(a,i,[e,t,r]);if(!yr(c))throw new TypeError("invalid result");return c}function Ru(i,e,t,r,n){let a=n;a===void 0&&(a=i.dateUntil);const c=G_(a,i,[e,t,r]);if(!In(c))throw new TypeError("invalid result");return c}function Hv(i,e){const t=i.year(e);if(t===void 0)throw new RangeError("calendar year result must be an integer");return Zr(t)}function qv(i,e){const t=i.month(e);if(t===void 0)throw new RangeError("calendar month result must be a positive integer");return eg(t)}function Dg(i,e){const t=i.monthCode(e);if(t===void 0)throw new RangeError("calendar monthCode result must be a string");return Vi(t)}function Wv(i,e){const t=i.day(e);if(t===void 0)throw new RangeError("calendar day result must be a positive integer");return eg(t)}function Yv(i,e){let t=i.era(e);return t!==void 0&&(t=Vi(t)),t}function Zv(i,e){let t=i.eraYear(e);return t!==void 0&&(t=Zr(t)),t}function Y_(i,e){return i.dayOfWeek(e)}function Z_(i,e){return i.dayOfYear(e)}function X_(i,e){return i.weekOfYear(e)}function K_(i,e){return i.daysInWeek(e)}function Rg(i,e){return i.daysInMonth(e)}function Xv(i,e){return i.daysInYear(e)}function Kv(i,e){return i.monthsInYear(e)}function Qv(i,e){return i.inLeapYear(e)}function Is(i){let e=i;if(an(e)){if(vs(e,At))return Q(e,At);if(!("calendar"in e)||(e=e.calendar,an(e)&&!("calendar"in e)))return e}const t=Vi(e),r=Oi("%Temporal.Calendar%");if(zM(t))return new r(t);let n;try{({calendar:n}=ic(t))}catch{throw new RangeError(`Invalid calendar: ${t}`)}return n||(n="iso8601"),new r(n)}function qp(i){if(vs(i,At))return Q(i,At);const{calendar:e}=i;return e===void 0?Gn():Is(e)}function Lg(i,e){return i===e?!0:Vi(i)===Vi(e)}function xM(i,e){if(i===e)return e;const t=Vi(i),r=Vi(e);if(t===r||t==="iso8601")return e;if(r==="iso8601")return i;throw new RangeError("irreconcilable calendars")}function Lu(i,e,t){const r=i.dateFromFields(e,t);if(!yr(r))throw new TypeError("invalid result");return r}function Jd(i,e,t){const r=i.yearMonthFromFields(e,t);if(!Pr(r))throw new TypeError("invalid result");return r}function Ip(i,e,t){const r=i.monthDayFromFields(e,t);if(!Ts(r))throw new TypeError("invalid result");return r}function ya(i){let e=i;if(an(e)){if(bi(e))return Q(e,jr);if(!("timeZone"in e)||(e=e.timeZone,an(e)&&!("timeZone"in e)))return e}const t=dM(Vi(e));return new(Oi("%Temporal.TimeZone%"))(t)}function bM(i,e){return i===e?!0:Vi(i)===Vi(e)}function Pp(i){return rl(Q(i,oi),Q(i,di),Q(i,pi),Q(i,At))}function Q_(i){return new(Oi("%Temporal.PlainTime%"))(Q(i,Zi),Q(i,Xi),Q(i,Ki),Q(i,Qi),Q(i,Ji),Q(i,er))}function gl(i,e){let t=i.getOffsetNanosecondsFor;if(typeof t!="function")throw new TypeError("getOffsetNanosecondsFor not callable");const r=Reflect.apply(t,i,[e]);if(typeof r!="number")throw new TypeError("bad return from getOffsetNanosecondsFor");if(!cM(r)||Er(r)>864e11)throw new RangeError("out-of-range return from getOffsetNanosecondsFor");return r}function sw(i,e){return e2(gl(i,e))}function fo(i,e,t){const r=Q(e,zi),n=gl(i,e);let{year:a,month:c,day:s,hour:h,minute:p,second:m,millisecond:y,microsecond:g,nanosecond:x}=CM(r);return{year:a,month:c,day:s,hour:h,minute:p,second:m,millisecond:y,microsecond:g,nanosecond:x}=t2(a,c,s,h,p,m,y,g,x+n),Za(a,c,s,h,p,m,y,g,x,t)}function ma(i,e,t){return wM(J0(i,e),i,e,t)}function wM(i,e,t,r){const n=Oi("%Temporal.Instant%"),a=i.length;if(a===1)return i[0];if(a)switch(r){case"compatible":case"earlier":return i[0];case"later":return i[a-1];case"reject":throw new RangeError("multiple instants found")}const c=Q(t,oi),s=Q(t,di),h=Q(t,pi),p=Q(t,Zi),m=Q(t,Xi),y=Q(t,Ki),g=Q(t,Qi),x=Q(t,Ji),v=Q(t,er),_=Nu(c,s,h,p,m,y,g,x,v);if(_===null)throw new RangeError("DateTime outside of supported range");const C=new n(he.subtract(_,Du)),k=new n(he.add(_,Du)),w=gl(e,C),E=gl(e,k)-w;switch(r){case"earlier":{const A=Q(t,At),M=Oi("%Temporal.PlainDateTime%"),S=ow(c,s,h,p,m,y,g,x,v,A,0,0,0,0,0,0,0,0,0,-E,void 0);return J0(e,new M(S.year,S.month,S.day,S.hour,S.minute,S.second,S.millisecond,S.microsecond,S.nanosecond,A))[0]}case"compatible":case"later":{const A=Q(t,At),M=Oi("%Temporal.PlainDateTime%"),S=ow(c,s,h,p,m,y,g,x,v,A,0,0,0,0,0,0,0,0,0,E,void 0),N=J0(e,new M(S.year,S.month,S.day,S.hour,S.minute,S.second,S.millisecond,S.microsecond,S.nanosecond,A));return N[N.length-1]}case"reject":throw new RangeError("no such instant found")}}function J0(i,e){const t=i.getPossibleInstantsFor(e),r=[];for(const n of t){if(!ns(n))throw new TypeError("bad return from getPossibleInstantsFor");V_.call(r,n)}return r}function oh(i){let e;return i<0||i>9999?e=(i<0?"-":"+")+`000000${Er(i)}`.slice(-6):e=`0000${i}`.slice(-4),e}function xn(i){return`00${i}`.slice(-2)}function Jv(i,e,t,r,n){if(n==="minute")return"";const a=`:${xn(i)}`;let c,s=1e6*e+1e3*t+r;if(n==="auto"){if(s===0)return a;for(c=`${s}`.padStart(9,"0");c[c.length-1]==="0";)c=c.slice(0,-1)}else{if(n===0)return a;c=`${s}`.padStart(9,"0").slice(0,n)}return`${a}.${c}`}function gS(i,e,t){let r=e;r===void 0&&(r=new(Oi("%Temporal.TimeZone%"))("UTC"));const n=fo(r,i,Gn()),a=oh(Q(n,oi)),c=xn(Q(n,di)),s=xn(Q(n,pi)),h=xn(Q(n,Zi)),p=xn(Q(n,Xi)),m=Jv(Q(n,Ki),Q(n,Qi),Q(n,Ji),Q(n,er),t);let y="Z";return e!==void 0&&(y=_M(gl(r,i))),`${a}-${c}-${s}T${h}:${p}${m}${y}`}function Ob(i,e="auto",t){function r(Z){return Z<=y4?Z.toString(10):he.BigInt(Z).toString(10)}const n=Q(i,aa),a=Q(i,Cs),c=Q(i,Aa),s=Q(i,oa),h=Q(i,la),p=Q(i,ca);let m=Q(i,ua),y=Q(i,da),g=Q(i,ha),x=Q(i,pa);const v=Hl(n,a,c,s,h,p,m,y,g,x);if(t){const{unit:Z,increment:K,roundingMode:U}=t;({seconds:m,milliseconds:y,microseconds:g,nanoseconds:x}=zu(0,0,0,0,0,0,m,y,g,x,K,Z,U))}const _=[];n&&_.push(`${r(Er(n))}Y`),a&&_.push(`${r(Er(a))}M`),c&&_.push(`${r(Er(c))}W`),s&&_.push(`${r(Er(s))}D`);const C=[];h&&C.push(`${r(Er(h))}H`),p&&C.push(`${r(Er(p))}M`);const k=[];let w,E,A,M,S=Dp(0,0,0,m,y,g,x,0);({quotient:S,remainder:w}=us(S,Fr)),{quotient:S,remainder:E}=us(S,Fr),{quotient:M,remainder:A}=us(S,Fr);const N=1e6*Er(he.toNumber(A))+1e3*Er(he.toNumber(E))+Er(he.toNumber(w));let Y;if(e==="auto"){if(N!==0)for(Y=`${N}`.padStart(9,"0");Y[Y.length-1]==="0";)Y=Y.slice(0,-1)}else e!==0&&(Y=`${N}`.padStart(9,"0").slice(0,e));return Y&&k.unshift(".",Y),he.equal(M,$n)&&!k.length&&e==="auto"||k.unshift(q_(M).toString()),k.length&&C.push(`${k.join("")}S`),C.length&&C.unshift("T"),_.length||C.length?`${v<0?"-":""}P${_.join("")}${C.join("")}`:"PT0S"}function yS(i,e="auto"){return`${oh(Q(i,oi))}-${xn(Q(i,di))}-${xn(Q(i,pi))}${kg(Vi(Q(i,At)),e)}`}function vS(i,e,t="auto",r){let n=Q(i,oi),a=Q(i,di),c=Q(i,pi),s=Q(i,Zi),h=Q(i,Xi),p=Q(i,Ki),m=Q(i,Qi),y=Q(i,Ji),g=Q(i,er);if(r){const{unit:x,increment:v,roundingMode:_}=r;({year:n,month:a,day:c,hour:s,minute:h,second:p,millisecond:m,microsecond:y,nanosecond:g}=o2(n,a,c,s,h,p,m,y,g,v,x,_))}return`${oh(n)}-${xn(a)}-${xn(c)}T${xn(s)}:${xn(h)}${Jv(p,m,y,g,e)}${kg(Vi(Q(i,At)),t)}`}function xS(i,e="auto"){let t=`${xn(Q(i,di))}-${xn(Q(i,pi))}`;const r=Vi(Q(i,At));(e==="always"||r!=="iso8601")&&(t=`${oh(Q(i,oi))}-${t}`);const n=kg(r,e);return n&&(t+=n),t}function bS(i,e="auto"){let t=`${oh(Q(i,oi))}-${xn(Q(i,di))}`;const r=Vi(Q(i,At));(e==="always"||r!=="iso8601")&&(t+=`-${xn(Q(i,pi))}`);const n=kg(r,e);return n&&(t+=n),t}function wS(i,e,t="auto",r="auto",n="auto",a){let c=Q(i,Qs);if(a){const{unit:m,increment:y,roundingMode:g}=a,x=tv(Q(i,zi),y,m,g);c=new(Oi("%Temporal.Instant%"))(x)}const s=Q(i,jr),h=fo(s,c,Gn());let p=`${oh(Q(h,oi))}-${xn(Q(h,di))}-${xn(Q(h,pi))}T${xn(Q(h,Zi))}:${xn(Q(h,Xi))}${Jv(Q(h,Ki),Q(h,Qi),Q(h,Ji),Q(h,er),e)}`;return n!=="never"&&(p+=_M(gl(s,c))),r!=="never"&&(p+=`[${s}]`),p+=kg(Vi(Q(i,At)),t),p}function Em(i){return OM.test(Eg(i))}function eh(i){const e=OM.exec(Eg(i));if(!e)throw new RangeError(`invalid time zone offset: ${i}`);return(e[1]==="-"||e[1]==="−"?-1:1)*(1e9*(60*(60*+e[2]+ +(e[3]||0))+ +(e[4]||0))+ +((e[5]||0)+"000000000").slice(0,9))}function J_(i){return Em(i)?e2(eh(i)):uM(Eg(i)).resolvedOptions().timeZone}function Ac(i,e){const{year:t,month:r,day:n,hour:a,minute:c,second:s,millisecond:h,microsecond:p,nanosecond:m}=TM(i,e),y=Nu(t,r,n,a,c,s,h,p,m);if(y===null)throw new RangeError("Date outside of supported range");return he.toNumber(he.subtract(y,i))}function e2(i){const e=i<0?"-":"+",t=Er(i),r=t%1e9,n=ps(t/1e9)%60,a=ps(t/6e10)%60,c=xn(ps(t/36e11)),s=xn(a),h=xn(n);let p="";if(r){let m=`${r}`.padStart(9,"0");for(;m[m.length-1]==="0";)m=m.slice(0,-1);p=`:${h}.${m}`}else n&&(p=`:${h}`);return`${e}${c}:${s}${p}`}function _M(i){let e=he.toNumber(qa(he.BigInt(i),6e10,"halfExpand"));const t=e<0?"-":"+";e=Er(e);const r=e/6e10%60;return`${t}${xn(ps(e/36e11))}:${xn(r)}`}function Nu(i,e,t,r,n,a,c,s,h){const p=new Date;p.setUTCHours(r,n,a,c),p.setUTCFullYear(i,e-1,t);const m=p.getTime();if(Sg(m))return null;let y=he.multiply(he.BigInt(m),Ro);return y=he.add(y,he.multiply(he.BigInt(s),Fr)),y=he.add(y,he.BigInt(h)),he.lessThan(y,Km)||he.greaterThan(y,Qm)?null:y}function CM(i){const{quotient:e,remainder:t}=us(i,Ro);let r=he.toNumber(e),n=he.toNumber(t);n<0&&(n+=1e6,r-=1);const a=ps(n/1e3)%1e3,c=n%1e3,s=new Date(r);return{epochMilliseconds:r,year:s.getUTCFullYear(),month:s.getUTCMonth()+1,day:s.getUTCDate(),hour:s.getUTCHours(),minute:s.getUTCMinutes(),second:s.getUTCSeconds(),millisecond:s.getUTCMilliseconds(),microsecond:a,nanosecond:c}}function TM(i,e){const{epochMilliseconds:t,millisecond:r,microsecond:n,nanosecond:a}=CM(i),{year:c,month:s,day:h,hour:p,minute:m,second:y}=function(x,v){const _=uM(x);return function(k){const w=k.split(/[^\w]+/);if(w.length!==7)throw new RangeError(`expected 7 parts in "${k}`);const E=+w[0],A=+w[1];let M=+w[2];const S=w[3].toUpperCase();if(S==="B"||S==="BC")M=1-M;else if(S!=="A"&&S!=="AD")throw new RangeError(`Unknown era ${S} in "${k}`);let N=+w[4];N===24&&(N=0);const Y=+w[5],Z=+w[6];if(!(ks(M)&&ks(E)&&ks(A)&&ks(N)&&ks(Y)&&ks(Z)))throw new RangeError(`Invalid number in "${k}`);return{year:M,month:E,day:A,hour:N,minute:Y,second:Z}}(_.format(new Date(v)))}(e,t);return t2(c,s,h,p,m,y,r,n,a)}function _S(i,e){return he.lessThan(i,e)?e:i}function SM(){return he.add(c2(),w4)}function EM(i,e){const t=SM(),r=he.greaterThan(i,t),n=r?he.subtract(i,oM):aM;let a=he.subtract(i,H_);const c=Ac(a,e);let s=a,h=c;for(;c===h&&he.greaterThan(a,n);)s=he.subtract(a,lM),h=Ac(s,e),c===h&&(a=s);return c===h?r?EM(he.subtract(t,Du),e):null:jM(p=>Ac(p,e),s,a,h,c)}function Tu(i){return i===void 0?!1:i%4==0&&(i%100!=0||i%400==0)}function Nc(i,e){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[Tu(i)?"leapyear":"standard"][e-1]}function jb(i,e,t){const r=e+(e<3?10:-2),n=i-(e<3?1:0),a=ps(n/100),c=n-100*a,s=(t+ps(2.6*r-.2)+(c+ps(c/4))+(ps(a/4)-2*a))%7;return s+(s<=0?7:0)}function ev(i,e,t){let r=t;for(let n=e-1;n>0;n--)r+=Nc(i,n);return r}function Hl(i,e,t,r,n,a,c,s,h,p){for(const m of[i,e,t,r,n,a,c,s,h,p])if(m!==0)return m<0?-1:1;return 0}function E0(i,e){let t=i,r=e;if(!ks(t)||!ks(r))throw new RangeError("infinity is out of range");return r-=1,t+=ps(r/12),r%=12,r<0&&(r+=12),r+=1,{year:t,month:r}}function ex(i,e,t){let r=i,n=e,a=t;if(!ks(a))throw new RangeError("infinity is out of range");({year:r,month:n}=E0(r,n));let c=0,s=n>2?r:r-1;for(;c=Tu(s)?366:365,a<-c;)r-=1,s-=1,a+=c;for(s+=1;c=Tu(s)?366:365,a>c;)r+=1,s+=1,a-=c;for(;a<1;)({year:r,month:n}=E0(r,n-1)),a+=Nc(r,n);for(;a>Nc(r,n);)a-=Nc(r,n),{year:r,month:n}=E0(r,n+1);return{year:r,month:n,day:a}}function t2(i,e,t,r,n,a,c,s,h){const{deltaDays:p,hour:m,minute:y,second:g,millisecond:x,microsecond:v,nanosecond:_}=Ic(r,n,a,c,s,h),{year:C,month:k,day:w}=ex(i,e,t+p);return{year:C,month:k,day:w,hour:m,minute:y,second:g,millisecond:x,microsecond:v,nanosecond:_}}function Ic(i,e,t,r,n,a){let c=i,s=e,h=t,p=r,m=n,y=a;if(!(ks(c)&&ks(s)&&ks(h)&&ks(p)&&ks(m)&&ks(y)))throw new RangeError("infinity is out of range");m+=ps(y/1e3),y=ip(y,1e3),p+=ps(m/1e3),m=ip(m,1e3),h+=ps(p/1e3),p=ip(p,1e3),s+=ps(h/60),h=ip(h,60),c+=ps(s/60),s=ip(s,60);const g=ps(c/24);return c=ip(c,24),{deltaDays:g,hour:c,minute:s,second:h,millisecond:p,microsecond:m,nanosecond:y}}function Dp(i,e,t,r,n,a,c,s){const h=he.BigInt(i);let p=he.BigInt(c);i!==0&&(p=he.subtract(he.BigInt(c),he.BigInt(s)));const m=he.add(he.BigInt(e),he.multiply(h,he.BigInt(24))),y=he.add(he.BigInt(t),he.multiply(m,Ud)),g=he.add(he.BigInt(r),he.multiply(y,Ud)),x=he.add(he.BigInt(n),he.multiply(g,Fr)),v=he.add(he.BigInt(a),he.multiply(x,Fr));return he.add(he.BigInt(p),he.multiply(v,Fr))}function i2(i,e){const t=Oi("%Temporal.Instant%"),r=Xm(he.toNumber(i));let n=he.BigInt(i),a=864e11;if(r===0)return{days:0,nanoseconds:$n,dayLengthNs:a};if(!bi(e)){let w;return{quotient:w,remainder:n}=us(n,he.BigInt(a)),{days:he.toNumber(w),nanoseconds:n,dayLengthNs:a}}const c=Q(e,zi),s=Q(e,Qs),h=he.add(c,n),p=new t(h),m=Q(e,jr),y=Q(e,At),g=fo(m,s,y),x=fo(m,p,y);let{days:v}=a2(Q(g,oi),Q(g,di),Q(g,pi),Q(g,Zi),Q(g,Xi),Q(g,Ki),Q(g,Qi),Q(g,Ji),Q(g,er),Q(x,oi),Q(x,di),Q(x,pi),Q(x,Zi),Q(x,Xi),Q(x,Ki),Q(x,Qi),Q(x,Ji),Q(x,er),y,"day",Bs(null)),_=Lo(s,m,y,0,0,0,v,0,0,0,0,0,0);if(r===1)for(;v>0&&he.greaterThan(_,h);)--v,_=Lo(s,m,y,0,0,0,v,0,0,0,0,0,0);n=he.subtract(h,_);let C=!1,k=new t(_);do{const w=Lo(k,m,y,0,0,0,r,0,0,0,0,0,0),E=Q(k,zi);a=he.toNumber(he.subtract(w,E)),C=he.greaterThan(he.multiply(he.subtract(n,he.BigInt(a)),he.BigInt(r)),$n),C&&(n=he.subtract(n,he.BigInt(a)),k=new t(w),v+=r)}while(C);return{days:v,nanoseconds:n,dayLengthNs:Er(a)}}function Ka(i,e,t,r,n,a,c,s,h){let p,m,y,g,x,v,_=i;if(bi(h)){const k=Lo(Q(h,Qs),Q(h,jr),Q(h,At),0,0,0,_,e,t,r,n,a,c),w=Q(h,zi);p=he.subtract(k,w)}else p=Dp(_,e,t,r,n,a,c,0);s==="year"||s==="month"||s==="week"||s==="day"?{days:_,nanoseconds:p}=i2(p,h):_=0;const C=he.lessThan(p,$n)?-1:1;switch(p=q_(p),m=y=g=x=v=$n,s){case"year":case"month":case"week":case"day":case"hour":({quotient:m,remainder:p}=us(p,Fr)),{quotient:y,remainder:m}=us(m,Fr),{quotient:g,remainder:y}=us(y,Fr),{quotient:x,remainder:g}=us(g,Ud),{quotient:v,remainder:x}=us(x,Ud);break;case"minute":({quotient:m,remainder:p}=us(p,Fr)),{quotient:y,remainder:m}=us(m,Fr),{quotient:g,remainder:y}=us(y,Fr),{quotient:x,remainder:g}=us(g,Ud);break;case"second":({quotient:m,remainder:p}=us(p,Fr)),{quotient:y,remainder:m}=us(m,Fr),{quotient:g,remainder:y}=us(y,Fr);break;case"millisecond":({quotient:m,remainder:p}=us(p,Fr)),{quotient:y,remainder:m}=us(m,Fr);break;case"microsecond":({quotient:m,remainder:p}=us(p,Fr));break;case"nanosecond":break;default:throw new Error("assert not reached")}return{days:_,hours:he.toNumber(v)*C,minutes:he.toNumber(x)*C,seconds:he.toNumber(g)*C,milliseconds:he.toNumber(y)*C,microseconds:he.toNumber(m)*C,nanoseconds:he.toNumber(p)*C}}function Xy(i,e,t,r,n,a){let c=i,s=e,h=t,p=r;const m=Oi("%Temporal.Duration%"),y=Hl(c,s,h,p,0,0,0,0,0,0);let g,x;a&&(x=Yr(a),g=Q(x,At));const v=new m(y),_=new m(0,y),C=new m(0,0,y);switch(n){case"year":break;case"month":{if(!g)throw new RangeError("a starting point is required for months balancing");const k=g.dateAdd,w=g.dateUntil;let E=x;for(;Er(c)>0;){const A=fa(g,E,v,void 0,k),M=Bs(null);M.largestUnit="month";const S=Q(Ru(g,E,A,M,w),Cs);E=A,s+=S,c-=y}}break;case"week":if(!g)throw new RangeError("a starting point is required for weeks balancing");for(;Er(c)>0;){let k;({relativeTo:x,days:k}=Xs(g,x,v)),p+=k,c-=y}for(;Er(s)>0;){let k;({relativeTo:x,days:k}=Xs(g,x,_)),p+=k,s-=y}break;default:for(;Er(c)>0;){if(!g)throw new RangeError("a starting point is required for balancing calendar units");let k;({relativeTo:x,days:k}=Xs(g,x,v)),p+=k,c-=y}for(;Er(s)>0;){if(!g)throw new RangeError("a starting point is required for balancing calendar units");let k;({relativeTo:x,days:k}=Xs(g,x,_)),p+=k,s-=y}for(;Er(h)>0;){if(!g)throw new RangeError("a starting point is required for balancing calendar units");let k;({relativeTo:x,days:k}=Xs(g,x,C)),p+=k,h-=y}}return{years:c,months:s,weeks:h,days:p}}function CS(i,e,t,r,n){if(bi(i)){const a=Q(i,Qs),c=Q(i,jr),s=Q(i,At),h=gl(c,a),p=Lo(a,c,s,e,t,r,n,0,0,0,0,0,0);return gl(c,new(Oi("%Temporal.Instant%"))(p))-h}return 0}function kM(i){return new(Oi("%Temporal.Duration%"))(-Q(i,aa),-Q(i,Cs),-Q(i,Aa),-Q(i,oa),-Q(i,la),-Q(i,ca),-Q(i,ua),-Q(i,da),-Q(i,ha),-Q(i,pa))}function Xa(i,e,t){return f4(t,m4(e,i))}function MM(i,e,t){const r=Xa(e,1,12);return{year:i,month:r,day:Xa(t,1,Nc(i,r))}}function js(i,e,t){if(i<e||i>t)throw new RangeError(`value out of range: ${e} <= ${i} <= ${t}`)}function Zl(i,e,t){js(e,1,12),js(t,1,Nc(i,e))}function AM(i,e,t){IM(i,e,t,12,0,0,0,0,0)}function tx(i,e,t,r,n,a){js(i,0,23),js(e,0,59),js(t,0,59),js(r,0,999),js(n,0,999),js(a,0,999)}function r2(i,e,t,r,n,a,c,s,h){Zl(i,e,t),tx(r,n,a,c,s,h)}function IM(i,e,t,r,n,a,c,s,h){if(js(i,-271821,275760),i===-271821&&Nu(i,e,t+1,r,n,a,c,s,h-1)==null||i===275760&&Nu(i,e,t-1,r,n,a,c,s,h+1)==null)throw new RangeError("DateTime outside of supported range")}function Ld(i){if(he.lessThan(i,Km)||he.greaterThan(i,Qm))throw new RangeError("Instant outside of supported range")}function ix(i,e,t,r,n,a,c,s,h,p){const m=Hl(i,e,t,r,n,a,c,s,h,p);for(const y of[i,e,t,r,n,a,c,s,h,p]){if(!ks(y))throw new RangeError("infinite values not allowed as duration fields");const g=Xm(y);if(g!==0&&g!==m)throw new RangeError("mixed-sign values not allowed as duration fields")}}function n2(i,e,t,r,n,a,c){switch(c){case"year":case"month":{const s=-Su(i,e,t,r,n,a);if(s===0)return{years:0,months:0,weeks:0,days:0};const h={year:i,month:e},p={year:r,month:n,day:a};let m=p.year-h.year,y=Vd(i,e,t,m,0,0,0,"constrain"),g=-Su(y.year,y.month,y.day,r,n,a);if(g===0)return c==="year"?{years:m,months:0,weeks:0,days:0}:{years:0,months:12*m,weeks:0,days:0};let x=p.month-h.month;if(g!==s&&(m-=s,x+=12*s),y=Vd(i,e,t,m,x,0,0,"constrain"),g=-Su(y.year,y.month,y.day,r,n,a),g===0)return c==="year"?{years:m,months:x,weeks:0,days:0}:{years:0,months:x+12*m,weeks:0,days:0};g!==s&&(x-=s,x===-s&&(m-=s,x=11*s),y=Vd(i,e,t,m,x,0,0,"constrain"));let v=0;return v=y.month===p.month?p.day-y.day:s<0?-y.day-(Nc(p.year,p.month)-p.day):p.day+(Nc(y.year,y.month)-y.day),c==="month"&&(x+=12*m,m=0),{years:m,months:x,weeks:0,days:v}}case"week":case"day":{let s,h,p;Su(i,e,t,r,n,a)<0?(h={year:i,month:e,day:t},s={year:r,month:n,day:a},p=1):(h={year:r,month:n,day:a},s={year:i,month:e,day:t},p=-1);let m=ev(s.year,s.month,s.day)-ev(h.year,h.month,h.day);for(let g=h.year;g<s.year;++g)m+=Tu(g)?366:365;let y=0;return c==="week"&&(y=ps(m/7),m%=7),y*=p,m*=p,{years:0,months:0,weeks:y,days:m}}default:throw new Error("assert not reached")}}function PM(i,e,t,r,n,a,c,s,h,p,m,y){let g=c-i,x=s-e,v=h-t,_=p-r,C=m-n,k=y-a;const w=Hl(0,0,0,0,g,x,v,_,C,k);g*=w,x*=w,v*=w,_*=w,C*=w,k*=w;let E=0;if({deltaDays:E,hour:g,minute:x,second:v,millisecond:_,microsecond:C,nanosecond:k}=Ic(g,x,v,_,C,k),E!=0)throw new Error("assertion failure in DifferenceTime: _bt_.[[Days]] should be 0");return g*=w,x*=w,v*=w,_*=w,C*=w,k*=w,{hours:g,minutes:x,seconds:v,milliseconds:_,microseconds:C,nanoseconds:k}}function s2(i,e,t,r,n){const a=he.subtract(e,i),c=he.remainder(a,he.BigInt(864e11)),s=he.subtract(a,c),h=qa(c,u2[r]*t,n),p=he.add(s,h),m=he.toNumber(he.remainder(p,Fr)),y=he.toNumber(he.remainder(he.divide(p,Fr),Fr)),g=he.toNumber(he.remainder(he.divide(p,Ro),Fr));return{seconds:he.toNumber(he.divide(p,Lc)),milliseconds:g,microseconds:y,nanoseconds:m}}function a2(i,e,t,r,n,a,c,s,h,p,m,y,g,x,v,_,C,k,w,E,A){let M=i,S=e,N=t,{hours:Y,minutes:Z,seconds:K,milliseconds:U,microseconds:$,nanoseconds:B}=PM(r,n,a,c,s,h,g,x,v,_,C,k);const R=Hl(0,0,0,0,Y,Z,K,U,$,B);Su(p,m,y,M,S,N)===-R&&({year:M,month:S,day:N}=ex(M,S,N-R),{hours:Y,minutes:Z,seconds:K,milliseconds:U,microseconds:$,nanoseconds:B}=Ka(-R,Y,Z,K,U,$,B,E));const L=rl(M,S,N,w),G=rl(p,m,y,w),F=Gv(A,Qa("day",E));let{years:j,months:q,weeks:W,days:se}=Ru(w,L,G,F);return{days:se,hours:Y,minutes:Z,seconds:K,milliseconds:U,microseconds:$,nanoseconds:B}=Ka(se,Y,Z,K,U,$,B,E),{years:j,months:q,weeks:W,days:se,hours:Y,minutes:Z,seconds:K,milliseconds:U,microseconds:$,nanoseconds:B}}function DM(i,e,t,r,n,a){const c=he.subtract(e,i);if(he.equal(c,$n))return{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};const s=Oi("%Temporal.Instant%"),h=new s(i),p=new s(e),m=fo(t,h,r),y=fo(t,p,r);let{years:g,months:x,weeks:v,days:_}=a2(Q(m,oi),Q(m,di),Q(m,pi),Q(m,Zi),Q(m,Xi),Q(m,Ki),Q(m,Qi),Q(m,Ji),Q(m,er),Q(y,oi),Q(y,di),Q(y,pi),Q(y,Zi),Q(y,Xi),Q(y,Ki),Q(y,Qi),Q(y,Ji),Q(y,er),r,n,a);const C=Lo(h,t,r,g,x,v,0,0,0,0,0,0,0);let k=he.subtract(e,C);const w=zs(C,t,r);({nanoseconds:k,days:_}=i2(k,w));const{hours:E,minutes:A,seconds:M,milliseconds:S,microseconds:N,nanoseconds:Y}=Ka(0,0,0,0,0,0,he.toNumber(k),"hour");return{years:g,months:x,weeks:v,days:_,hours:E,minutes:A,seconds:M,milliseconds:S,microseconds:N,nanoseconds:Y}}function TS(i,e,t,r){const n=zl(t);let a,c;[a,c]=i==="until"?[e,n]:[n,e];const s=lr(r),h=gs(s,"smallestUnit","time","nanosecond"),p=Qa("second",h);let m=gs(s,"largestUnit","time","auto");if(m==="auto"&&(m=p),Qa(m,h)!==m)throw new RangeError(`largestUnit ${m} cannot be smaller than smallestUnit ${h}`);const y=Ra(s,"trunc"),g=$c(s,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[h],!1),x=Q(a,zi),v=Q(c,zi);let _,C,{seconds:k,milliseconds:w,microseconds:E,nanoseconds:A}=s2(x,v,g,h,y);return{hours:_,minutes:C,seconds:k,milliseconds:w,microseconds:E,nanoseconds:A}=Ka(0,0,0,k,w,E,A,m),new(Oi("%Temporal.Duration%"))(0,0,0,0,_,C,k,w,E,A)}function SS(i,e,t,r){const n=i==="since"?-1:1,a=Yr(t),c=Q(e,At),s=Q(a,At),h=Vi(c),p=Vi(s);if(h!==p)throw new RangeError(`cannot compute difference between dates of ${h} and ${p} calendars`);const m=lr(r),y=gs(m,"smallestUnit","date","day"),g=Qa("day",y);let x=gs(m,"largestUnit","date","auto");if(x==="auto"&&(x=g),Qa(x,y)!==x)throw new RangeError(`largestUnit ${x} cannot be smaller than smallestUnit ${y}`);let v=Ra(m,"trunc");i==="since"&&(v=Mg(v));const _=$c(m,void 0,!1),C=Gv(m,x);let{years:k,months:w,weeks:E,days:A}=Ru(c,e,a,C);return y==="day"&&_===1||({years:k,months:w,weeks:E,days:A}=zu(k,w,E,A,0,0,0,0,0,0,_,y,v,e)),new(Oi("%Temporal.Duration%"))(n*k,n*w,n*E,n*A,0,0,0,0,0,0)}function ES(i,e,t,r){const n=i==="since"?-1:1,a=Od(t),c=Q(e,At),s=Q(a,At),h=Vi(c),p=Vi(s);if(h!==p)throw new RangeError(`cannot compute difference between dates of ${h} and ${p} calendars`);const m=lr(r),y=gs(m,"smallestUnit","datetime","nanosecond"),g=Qa("day",y);let x=gs(m,"largestUnit","datetime","auto");if(x==="auto"&&(x=g),Qa(x,y)!==x)throw new RangeError(`largestUnit ${x} cannot be smaller than smallestUnit ${y}`);let v=Ra(m,"trunc");i==="since"&&(v=Mg(v));const _=W_(m,y);let{years:C,months:k,weeks:w,days:E,hours:A,minutes:M,seconds:S,milliseconds:N,microseconds:Y,nanoseconds:Z}=a2(Q(e,oi),Q(e,di),Q(e,pi),Q(e,Zi),Q(e,Xi),Q(e,Ki),Q(e,Qi),Q(e,Ji),Q(e,er),Q(a,oi),Q(a,di),Q(a,pi),Q(a,Zi),Q(a,Xi),Q(a,Ki),Q(a,Qi),Q(a,Ji),Q(a,er),c,x,m);const K=Pp(e);return{years:C,months:k,weeks:w,days:E,hours:A,minutes:M,seconds:S,milliseconds:N,microseconds:Y,nanoseconds:Z}=zu(C,k,w,E,A,M,S,N,Y,Z,_,y,v,K),{days:E,hours:A,minutes:M,seconds:S,milliseconds:N,microseconds:Y,nanoseconds:Z}=Ka(E,A,M,S,N,Y,Z,x),new(Oi("%Temporal.Duration%"))(n*C,n*k,n*w,n*E,n*A,n*M,n*S,n*N,n*Y,n*Z)}function kS(i,e,t,r){const n=i==="since"?-1:1,a=Dc(t),c=lr(r);let s=gs(c,"largestUnit","time","auto");s==="auto"&&(s="hour");const h=gs(c,"smallestUnit","time","nanosecond");if(Qa(s,h)!==s)throw new RangeError(`largestUnit ${s} cannot be smaller than smallestUnit ${h}`);let p=Ra(c,"trunc");i==="since"&&(p=Mg(p));const m=$c(c,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[h],!1);let{hours:y,minutes:g,seconds:x,milliseconds:v,microseconds:_,nanoseconds:C}=PM(Q(e,Zi),Q(e,Xi),Q(e,Ki),Q(e,Qi),Q(e,Ji),Q(e,er),Q(a,Zi),Q(a,Xi),Q(a,Ki),Q(a,Qi),Q(a,Ji),Q(a,er));return{hours:y,minutes:g,seconds:x,milliseconds:v,microseconds:_,nanoseconds:C}=zu(0,0,0,0,y,g,x,v,_,C,m,h,p),{hours:y,minutes:g,seconds:x,milliseconds:v,microseconds:_,nanoseconds:C}=Ka(0,y,g,x,v,_,C,s),new(Oi("%Temporal.Duration%"))(0,0,0,0,n*y,n*g,n*x,n*v,n*_,n*C)}function MS(i,e,t,r){const n=i==="since"?-1:1,a=Tm(t),c=Q(e,At),s=Q(a,At),h=Vi(c),p=Vi(s);if(h!==p)throw new RangeError(`cannot compute difference between months of ${h} and ${p} calendars`);const m=lr(r),y=Gp.reduce((Y,[Z,K,U])=>(U==="date"&&K!=="week"&&K!=="day"&&Y.push(K,Z),Y),[]),g=gs(m,"smallestUnit","date","month");if(g==="week"||g==="day")throw new RangeError(`smallestUnit must be one of ${y.join(", ")}, not ${g}`);let x=gs(m,"largestUnit","date","auto");if(x==="week"||x==="day")throw new RangeError(`largestUnit must be one of ${y.join(", ")}, not ${x}`);if(x==="auto"&&(x="year"),Qa(x,g)!==x)throw new RangeError(`largestUnit ${x} cannot be smaller than smallestUnit ${g}`);let v=Ra(m,"trunc");i==="since"&&(v=Mg(v));const _=$c(m,void 0,!1),C=Xn(c,["monthCode","year"]),k=ar(a,C,[]);k.day=1;const w=ar(e,C,[]);w.day=1;const E=Lu(c,k),A=Lu(c,w),M=Gv(m,x);let{years:S,months:N}=Ru(c,A,E,M);return g==="month"&&_===1||({years:S,months:N}=zu(S,N,0,0,0,0,0,0,0,0,_,g,v,A)),new(Oi("%Temporal.Duration%"))(n*S,n*N,0,0,0,0,0,0,0,0)}function AS(i,e,t,r){const n=i==="since"?-1:1,a=Sm(t),c=Q(e,At),s=Q(a,At),h=Vi(c),p=Vi(s);if(h!==p)throw new RangeError(`cannot compute difference between dates of ${h} and ${p} calendars`);const m=lr(r),y=gs(m,"smallestUnit","datetime","nanosecond"),g=Qa("hour",y);let x=gs(m,"largestUnit","datetime","auto");if(x==="auto"&&(x=g),Qa(x,y)!==x)throw new RangeError(`largestUnit ${x} cannot be smaller than smallestUnit ${y}`);let v=Ra(m,"trunc");i==="since"&&(v=Mg(v));const _=W_(m,y),C=Q(e,zi),k=Q(a,zi);let w,E,A,M,S,N,Y,Z,K,U;if(x!=="year"&&x!=="month"&&x!=="week"&&x!=="day")w=0,E=0,A=0,M=0,{seconds:Y,milliseconds:Z,microseconds:K,nanoseconds:U}=s2(C,k,_,y,v),{hours:S,minutes:N,seconds:Y,milliseconds:Z,microseconds:K,nanoseconds:U}=Ka(0,0,0,Y,Z,K,U,x);else{const $=Q(e,jr);if(!bM($,Q(a,jr)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");const B=Gv(m,x);({years:w,months:E,weeks:A,days:M,hours:S,minutes:N,seconds:Y,milliseconds:Z,microseconds:K,nanoseconds:U}=DM(C,k,$,c,x,B)),{years:w,months:E,weeks:A,days:M,hours:S,minutes:N,seconds:Y,milliseconds:Z,microseconds:K,nanoseconds:U}=zu(w,E,A,M,S,N,Y,Z,K,U,_,y,v,e),{years:w,months:E,weeks:A,days:M,hours:S,minutes:N,seconds:Y,milliseconds:Z,microseconds:K,nanoseconds:U}=NM(w,E,A,M,S,N,Y,Z,K,U,_,y,v,e)}return new(Oi("%Temporal.Duration%"))(n*w,n*E,n*A,n*M,n*S,n*N,n*Y,n*Z,n*K,n*U)}function Vd(i,e,t,r,n,a,c,s){let h=i,p=e,m=t,y=a,g=c;return h+=r,p+=n,{year:h,month:p}=E0(h,p),{year:h,month:p,day:m}=X0(h,p,m,s),g+=7*y,m+=g,{year:h,month:p,day:m}=ex(h,p,m),{year:h,month:p,day:m}}function RM(i,e,t,r,n,a,c,s,h,p,m,y){let g=i,x=e,v=t,_=r,C=n,k=a;g+=c,x+=s,v+=h,_+=p,C+=m,k+=y;let w=0;return{deltaDays:w,hour:g,minute:x,second:v,millisecond:_,microsecond:C,nanosecond:k}=Ic(g,x,v,_,C,k),{deltaDays:w,hour:g,minute:x,second:v,millisecond:_,microsecond:C,nanosecond:k}}function LM(i,e,t,r,n,a,c,s,h,p,m,y,g,x,v,_,C,k,w,E,A){const M=Qa(nw(i,e,t,r,n,a,c,s,h,p),nw(m,y,g,x,v,_,C,k,w,E));let S,N,Y,Z,K,U,$,B,R,L;if(A)if(yr(A)){const G=Oi("%Temporal.Duration%"),F=Q(A,At),j=new G(i,e,t,r,0,0,0,0,0,0),q=new G(m,y,g,x,0,0,0,0,0,0),W=F.dateAdd,se=fa(F,A,j,void 0,W),fe=fa(F,se,q,void 0,W),ee=Qa("day",M),oe=Bs(null);oe.largestUnit=ee,{years:S,months:N,weeks:Y,days:Z}=Ru(F,A,fe,oe),{days:Z,hours:K,minutes:U,seconds:$,milliseconds:B,microseconds:R,nanoseconds:L}=Ka(Z,n+v,a+_,c+C,s+k,h+w,p+E,M)}else{const G=Oi("%Temporal.Instant%"),F=Q(A,jr),j=Q(A,At),q=Lo(Q(A,Qs),F,j,i,e,t,r,n,a,c,s,h,p),W=Lo(new G(q),F,j,m,y,g,x,v,_,C,k,w,E);M!=="year"&&M!=="month"&&M!=="week"&&M!=="day"?(S=0,N=0,Y=0,Z=0,{seconds:$,milliseconds:B,microseconds:R,nanoseconds:L}=s2(Q(A,zi),W,1,"nanosecond","halfExpand"),{hours:K,minutes:U,seconds:$,milliseconds:B,microseconds:R,nanoseconds:L}=Ka(0,0,0,$,B,R,L,M)):{years:S,months:N,weeks:Y,days:Z,hours:K,minutes:U,seconds:$,milliseconds:B,microseconds:R,nanoseconds:L}=DM(Q(A,zi),W,F,j,M,Bs(null))}else{if(M==="year"||M==="month"||M==="week")throw new RangeError("relativeTo is required for years, months, or weeks arithmetic");S=N=Y=0,{days:Z,hours:K,minutes:U,seconds:$,milliseconds:B,microseconds:R,nanoseconds:L}=Ka(r+x,n+v,a+_,c+C,s+k,h+w,p+E,M)}return ix(S,N,Y,Z,K,U,$,B,R,L),{years:S,months:N,weeks:Y,days:Z,hours:K,minutes:U,seconds:$,milliseconds:B,microseconds:R,nanoseconds:L}}function aw(i,e,t,r,n,a,c){let s=$n;s=he.add(s,he.BigInt(c)),s=he.add(s,he.multiply(he.BigInt(a),Fr)),s=he.add(s,he.multiply(he.BigInt(n),Ro)),s=he.add(s,he.multiply(he.BigInt(r),Lc)),s=he.add(s,he.multiply(he.BigInt(t),he.BigInt(6e10))),s=he.add(s,he.multiply(he.BigInt(e),he.BigInt(36e11)));const h=he.add(i,s);return Ld(h),h}function ow(i,e,t,r,n,a,c,s,h,p,m,y,g,x,v,_,C,k,w,E,A){let M=x,{deltaDays:S,hour:N,minute:Y,second:Z,millisecond:K,microsecond:U,nanosecond:$}=RM(r,n,a,c,s,h,v,_,C,k,w,E);M+=S;const B=Oi("%Temporal.Duration%"),R=fa(p,rl(i,e,t,p),new B(m,y,g,M,0,0,0,0,0,0),A);return{year:Q(R,oi),month:Q(R,di),day:Q(R,pi),hour:N,minute:Y,second:Z,millisecond:K,microsecond:U,nanosecond:$}}function Lo(i,e,t,r,n,a,c,s,h,p,m,y,g,x){const v=Oi("%Temporal.Duration%");if(Hl(r,n,a,c,0,0,0,0,0,0)===0)return aw(Q(i,zi),s,h,p,m,y,g);const _=fo(e,i,t),C=fa(t,rl(Q(_,oi),Q(_,di),Q(_,pi),t),new v(r,n,a,c,0,0,0,0,0,0),x),k=Za(Q(C,oi),Q(C,di),Q(C,pi),Q(_,Zi),Q(_,Xi),Q(_,Ki),Q(_,Qi),Q(_,Ji),Q(_,er),t);return aw(Q(ma(e,k,"compatible"),zi),s,h,p,m,y,g)}function IS(i,e,t,r){const n=i==="subtract"?-1:1;let{years:a,months:c,weeks:s,days:h,hours:p,minutes:m,seconds:y,milliseconds:g,microseconds:x,nanoseconds:v}=ah(t);const _=S0(lr(r));return{years:a,months:c,weeks:s,days:h,hours:p,minutes:m,seconds:y,milliseconds:g,microseconds:x,nanoseconds:v}=LM(Q(e,aa),Q(e,Cs),Q(e,Aa),Q(e,oa),Q(e,la),Q(e,ca),Q(e,ua),Q(e,da),Q(e,ha),Q(e,pa),n*a,n*c,n*s,n*h,n*p,n*m,n*y,n*g,n*x,n*v,_),new(Oi("%Temporal.Duration%"))(a,c,s,h,p,m,y,g,x,v)}function PS(i,e,t){const r=i==="subtract"?-1:1,{hours:n,minutes:a,seconds:c,milliseconds:s,microseconds:h,nanoseconds:p}=function(g,x){let v=ah(g);for(const _ of x)if(v[_]!==0)throw new RangeError(`Duration field ${_} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);return v}(t,["years","months","weeks","days"]),m=aw(Q(e,zi),r*n,r*a,r*c,r*s,r*h,r*p);return new(Oi("%Temporal.Instant%"))(m)}function DS(i,e,t,r){const n=i==="subtract"?-1:1,{years:a,months:c,weeks:s,days:h,hours:p,minutes:m,seconds:y,milliseconds:g,microseconds:x,nanoseconds:v}=ah(t),_=lr(r),C=Q(e,At),{year:k,month:w,day:E,hour:A,minute:M,second:S,millisecond:N,microsecond:Y,nanosecond:Z}=ow(Q(e,oi),Q(e,di),Q(e,pi),Q(e,Zi),Q(e,Xi),Q(e,Ki),Q(e,Qi),Q(e,Ji),Q(e,er),C,n*a,n*c,n*s,n*h,n*p,n*m,n*y,n*g,n*x,n*v,_);return Za(k,w,E,A,M,S,N,Y,Z,C)}function RS(i,e,t){const r=i==="subtract"?-1:1,{hours:n,minutes:a,seconds:c,milliseconds:s,microseconds:h,nanoseconds:p}=ah(t);let{hour:m,minute:y,second:g,millisecond:x,microsecond:v,nanosecond:_}=RM(Q(e,Zi),Q(e,Xi),Q(e,Ki),Q(e,Qi),Q(e,Ji),Q(e,er),r*n,r*a,r*c,r*s,r*h,r*p);return{hour:m,minute:y,second:g,millisecond:x,microsecond:v,nanosecond:_}=Vv(m,y,g,x,v,_,"reject"),new(Oi("%Temporal.PlainTime%"))(m,y,g,x,v,_)}function LS(i,e,t,r){let n=ah(t);i==="subtract"&&(n={years:-n.years,months:-n.months,weeks:-n.weeks,days:-n.days,hours:-n.hours,minutes:-n.minutes,seconds:-n.seconds,milliseconds:-n.milliseconds,microseconds:-n.microseconds,nanoseconds:-n.nanoseconds});let{years:a,months:c,weeks:s,days:h,hours:p,minutes:m,seconds:y,milliseconds:g,microseconds:x,nanoseconds:v}=n;({days:h}=Ka(h,p,m,y,g,x,v,"day"));const _=lr(r),C=Q(e,At),k=Xn(C,["monthCode","year"]),w=ar(e,k,[]),E=Hl(a,c,s,h,0,0,0,0,0,0);w.day=E<0?eg(Rg(C,e)):1;const A=Lu(C,w),M=new(Oi("%Temporal.Duration%"))(a,c,s,h,0,0,0,0,0,0),S=sM(Bs(null),_);return Jd(C,ar(fa(C,A,M,_),k,[]),S)}function NS(i,e,t,r){const n=i==="subtract"?-1:1,{years:a,months:c,weeks:s,days:h,hours:p,minutes:m,seconds:y,milliseconds:g,microseconds:x,nanoseconds:v}=ah(t),_=lr(r),C=Q(e,jr),k=Q(e,At);return zs(Lo(Q(e,Qs),C,k,n*a,n*c,n*s,n*h,n*p,n*m,n*y,n*g,n*x,n*v,_),C,k)}function qa(i,e,t){if(e===1)return i;let{quotient:r,remainder:n}=us(i,he.BigInt(e));if(he.equal(n,$n))return i;const a=he.lessThan(n,$n)?-1:1;switch(t){case"ceil":a>0&&(r=he.add(r,he.BigInt(a)));break;case"floor":a<0&&(r=he.add(r,he.BigInt(a)));break;case"trunc":break;case"halfExpand":he.toNumber(q_(he.multiply(n,he.BigInt(2))))>=e&&(r=he.add(r,he.BigInt(a)))}return he.multiply(r,he.BigInt(e))}function tv(i,e,t,r){let n=he.remainder(i,he.BigInt(864e11));he.lessThan(n,$n)&&(n=he.add(n,he.BigInt(864e11)));const a=he.subtract(i,n),c=qa(n,u2[t]*e,r);return he.add(a,c)}function o2(i,e,t,r,n,a,c,s,h,p,m,y,g=864e11){const{deltaDays:x,hour:v,minute:_,second:C,millisecond:k,microsecond:w,nanosecond:E}=l2(r,n,a,c,s,h,p,m,y,g),{year:A,month:M,day:S}=ex(i,e,t+x);return{year:A,month:M,day:S,hour:v,minute:_,second:C,millisecond:k,microsecond:w,nanosecond:E}}function l2(i,e,t,r,n,a,c,s,h,p=864e11){let m=$n;switch(s){case"day":case"hour":m=he.BigInt(i);case"minute":m=he.add(he.multiply(m,Ud),he.BigInt(e));case"second":m=he.add(he.multiply(m,Ud),he.BigInt(t));case"millisecond":m=he.add(he.multiply(m,Fr),he.BigInt(r));case"microsecond":m=he.add(he.multiply(m,Fr),he.BigInt(n));case"nanosecond":m=he.add(he.multiply(m,Fr),he.BigInt(a))}const y=s==="day"?p:u2[s],g=qa(m,y*c,h),x=he.toNumber(he.divide(g,he.BigInt(y)));switch(s){case"day":return{deltaDays:x,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return Ic(x,0,0,0,0,0);case"minute":return Ic(i,x,0,0,0,0);case"second":return Ic(i,e,x,0,0,0);case"millisecond":return Ic(i,e,t,x,0,0);case"microsecond":return Ic(i,e,t,r,x,0);case"nanosecond":return Ic(i,e,t,r,n,x);default:throw new Error(`Invalid unit ${s}`)}}function k0(i,e){return n2(Q(i,oi),Q(i,di),Q(i,pi),Q(e,oi),Q(e,di),Q(e,pi),"day").days}function Xs(i,e,t){const r=fa(i,e,t,void 0);return{relativeTo:r,days:k0(e,r)}}function lw(i,e,t,r,n){const a=Q(i,jr),c=Q(i,At);return zs(Lo(Q(i,Qs),a,c,e,t,r,n,0,0,0,0,0,0),a,c)}function NM(i,e,t,r,n,a,c,s,h,p,m,y,g,x){let v=i,_=e,C=t,k=r,w=n,E=a,A=c,M=s,S=h,N=p;if(!bi(x)||y==="year"||y==="month"||y==="week"||y==="day"||y==="nanosecond"&&m===1)return{years:v,months:_,weeks:C,days:k,hours:w,minutes:E,seconds:A,milliseconds:M,microseconds:S,nanoseconds:N};let Y=Dp(0,w,E,A,M,S,N,0);const Z=Xm(he.toNumber(Y)),K=Q(x,jr),U=Q(x,At),$=Lo(Q(x,Qs),K,U,v,_,C,k,0,0,0,0,0,0),B=Lo(new(Oi("%Temporal.Instant%"))($),K,U,0,0,0,Z,0,0,0,0,0,0),R=he.subtract(B,$);return he.greaterThanOrEqual(he.multiply(he.subtract(Y,R),he.BigInt(Z)),$n)&&({years:v,months:_,weeks:C,days:k}=LM(v,_,C,k,0,0,0,0,0,0,0,0,0,Z,0,0,0,0,0,0,x),Y=tv(he.subtract(Y,R),m,y,g),{hours:w,minutes:E,seconds:A,milliseconds:M,microseconds:S,nanoseconds:N}=Ka(0,0,0,0,0,0,he.toNumber(Y),"hour")),{years:v,months:_,weeks:C,days:k,hours:w,minutes:E,seconds:A,milliseconds:M,microseconds:S,nanoseconds:N}}function zu(i,e,t,r,n,a,c,s,h,p,m,y,g,x){let v=i,_=e,C=t,k=r,w=n,E=a,A=c,M=s,S=h,N=he.BigInt(p);const Y=Oi("%Temporal.Duration%");let Z,K,U,$,B=x;if(B){if(bi(B))K=B,B=Yr(B);else if(!yr(B))throw new TypeError("starting point must be PlainDate or ZonedDateTime");Z=Q(B,At)}if(y==="year"||y==="month"||y==="week"||y==="day"){let R,L,G;N=Dp(0,w,E,A,M,S,p,0),K&&(R=lw(K,v,_,C,k)),{days:L,nanoseconds:N,dayLengthNs:G}=i2(N,R),U=he.BigInt(G),k+=L,w=E=A=M=S=0}switch(y){case"year":{if(!Z)throw new RangeError("A starting point is required for years rounding");const R=new Y(v),L=Z.dateAdd,G=fa(Z,B,R,void 0,L),F=fa(Z,B,new Y(v,_,C),void 0,L);B=G,k+=k0(G,F);const j=fa(Z,B,{days:k},void 0,L),q=Bs(null);q.largestUnit="year";const W=Ru(Z,B,j,q).years;v+=W;const se=B;B=fa(Z,B,{years:W},void 0,L),k-=k0(se,B);const fe=new Y(k<0?-1:1);let{days:ee}=Xs(Z,B,fe);ee=Er(ee);const oe=he.multiply(he.BigInt(ee),U);N=he.add(he.add(he.multiply(oe,he.BigInt(v)),he.multiply(he.BigInt(k),U)),N);const Ce=qa(N,he.toNumber(he.multiply(oe,he.BigInt(m))),g);$=he.toNumber(N)/he.toNumber(oe),v=he.toNumber(he.divide(Ce,oe)),N=$n,_=C=k=0;break}case"month":{if(!Z)throw new RangeError("A starting point is required for months rounding");const R=new Y(v,_),L=Z.dateAdd,G=fa(Z,B,R,void 0,L),F=fa(Z,B,new Y(v,_,C),void 0,L);B=G,k+=k0(G,F);const j=Xm(k),q=new Y(0,k<0?-1:1);let W;for({relativeTo:B,days:W}=Xs(Z,B,q);Er(k)>=Er(W);)_+=j,k-=W,{relativeTo:B,days:W}=Xs(Z,B,q);W=Er(W);const se=he.multiply(he.BigInt(W),U);N=he.add(he.add(he.multiply(se,he.BigInt(_)),he.multiply(he.BigInt(k),U)),N);const fe=qa(N,he.toNumber(he.multiply(se,he.BigInt(m))),g);$=he.toNumber(N)/he.toNumber(se),_=he.toNumber(he.divide(fe,se)),N=$n,C=k=0;break}case"week":{if(!Z)throw new RangeError("A starting point is required for weeks rounding");const R=Xm(k),L=new Y(0,0,k<0?-1:1);let G;for({relativeTo:B,days:G}=Xs(Z,B,L);Er(k)>=Er(G);)C+=R,k-=G,{relativeTo:B,days:G}=Xs(Z,B,L);G=Er(G);const F=he.multiply(he.BigInt(G),U);N=he.add(he.add(he.multiply(F,he.BigInt(C)),he.multiply(he.BigInt(k),U)),N);const j=qa(N,he.toNumber(he.multiply(F,he.BigInt(m))),g);$=he.toNumber(N)/he.toNumber(F),C=he.toNumber(he.divide(j,F)),N=$n,k=0;break}case"day":{const R=U;N=he.add(he.multiply(R,he.BigInt(k)),N);const L=qa(N,he.toNumber(he.multiply(R,he.BigInt(m))),g);$=he.toNumber(N)/he.toNumber(R),k=he.toNumber(he.divide(L,R)),N=$n;break}case"hour":{let L=he.multiply(he.BigInt(w),he.BigInt(36e11));L=he.add(L,he.multiply(he.BigInt(E),he.BigInt(6e10))),L=he.add(L,he.multiply(he.BigInt(A),Lc)),L=he.add(L,he.multiply(he.BigInt(M),Ro)),L=he.add(L,he.multiply(he.BigInt(S),Fr)),L=he.add(L,N),$=he.toNumber(L)/36e11;const G=qa(L,36e11*m,g);w=he.toNumber(he.divide(G,he.BigInt(36e11))),N=$n,E=A=M=S=0;break}case"minute":{let L=he.multiply(he.BigInt(E),he.BigInt(6e10));L=he.add(L,he.multiply(he.BigInt(A),Lc)),L=he.add(L,he.multiply(he.BigInt(M),Ro)),L=he.add(L,he.multiply(he.BigInt(S),Fr)),L=he.add(L,N),$=he.toNumber(L)/6e10;const G=qa(L,6e10*m,g);E=he.toNumber(he.divide(G,he.BigInt(6e10))),N=$n,A=M=S=0;break}case"second":{let L=he.multiply(he.BigInt(A),Lc);L=he.add(L,he.multiply(he.BigInt(M),Ro)),L=he.add(L,he.multiply(he.BigInt(S),Fr)),L=he.add(L,N),$=he.toNumber(L)/1e9;const G=qa(L,1e9*m,g);A=he.toNumber(he.divide(G,he.BigInt(1e9))),N=$n,M=S=0;break}case"millisecond":{let L=he.multiply(he.BigInt(M),Ro);L=he.add(L,he.multiply(he.BigInt(S),Fr)),L=he.add(L,N),$=he.toNumber(L)/1e6;const G=qa(L,1e6*m,g);M=he.toNumber(he.divide(G,he.BigInt(1e6))),N=$n,S=0;break}case"microsecond":{let L=he.multiply(he.BigInt(S),Fr);L=he.add(L,N),$=he.toNumber(L)/1e3;const G=qa(L,1e3*m,g);S=he.toNumber(he.divide(G,he.BigInt(1e3))),N=$n;break}case"nanosecond":$=he.toNumber(N),N=qa(N,m,g)}return{years:v,months:_,weeks:C,days:k,hours:w,minutes:E,seconds:A,milliseconds:M,microseconds:S,nanoseconds:he.toNumber(N),total:$}}function Su(i,e,t,r,n,a){for(const[c,s]of[[i,r],[e,n],[t,a]])if(c!==s)return Gd(c-s);return 0}function ip(i,e){let t=i%e;return x4(t,-0)?0:(t<0&&(t+=e),t)}function iv(i){const e=zm(i);return globalThis.BigInt!==void 0?globalThis.BigInt(e.toString(10)):e}function zm(i){if(i instanceof he)return i;let e=i;if(typeof i=="object"){const t=i[Symbol.toPrimitive];t&&typeof t=="function"&&(e=G_(t,i,["number"]))}switch(typeof e){case"undefined":case"object":case"number":case"symbol":default:throw new TypeError(`cannot convert ${typeof i} to bigint`);case"string":if(!e.match(/^\s*(?:[+-]?\d+\s*)?$/))throw new SyntaxError("invalid BigInt syntax");case"bigint":try{return he.BigInt(e.toString())}catch(t){throw t instanceof Error&&t.message.startsWith("Invalid integer")?new SyntaxError(t.message):t}case"boolean":return e?H_:$n}}const c2=(()=>{let i=he.BigInt(Date.now()%1e6);return()=>{const e=he.BigInt(Date.now()),t=he.add(he.multiply(e,Ro),i);return i=he.remainder(e,Ro),he.greaterThan(t,Qm)?Qm:he.lessThan(t,Km)?Km:t}})();function Gd(i){return i<0?-1:i>0?1:i}function lr(i){if(i===void 0)return Bs(null);if(an(i)&&i!==null)return i;throw new TypeError("Options parameter must be an object, not "+(i===null?"null":typeof i))}function Rp(i,e){const t=Bs(null);return t[i]=e,t}function Ou(i,e,t,r){let n=i[e];if(n!==void 0){if(n=Vi(n),!t.includes(n))throw new RangeError(`${e} must be one of ${t.join(", ")}, not ${n}`);return n}return r}function zM(i){return rM.call(_4,i)}const OM=new RegExp(`^${eM.source}$`);function jM(i,e,t,r=i(e),n=i(t)){let a=he.BigInt(e),c=he.BigInt(t),s=r,h=n;for(;he.greaterThan(he.subtract(c,a),H_);){const p=he.divide(he.add(a,c),he.BigInt(2)),m=i(p);if(m===s)a=p,s=m;else{if(m!==h)throw new Error(`invalid state in bisection ${s} - ${m} - ${h}`);c=p,h=m}}return c}const u2={hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},FM=Symbol("date"),BM=Symbol("ym"),$M=Symbol("md"),UM=Symbol("time"),VM=Symbol("datetime"),GM=Symbol("zoneddatetime"),HM=Symbol("instant"),xp=Symbol("original"),cw=Symbol("timezone"),M0=Symbol("timezone-id-given"),oo=Symbol("calendar-id"),qM=Symbol("locale"),uw=Symbol("options"),Om=i=>({value:i,enumerable:!0,writable:!1,configurable:!0}),Hd=globalThis.Intl.DateTimeFormat,Xl=Object.assign,k4=Object.prototype.hasOwnProperty,M4=Reflect.apply;function Sd(i,e){let t=i[e];return typeof t=="function"&&(t=new Hd(i[qM],t(i[uw])),i[e]=t),t}function rm(i){let e=i[cw];return typeof e=="string"&&(e=ya(e),i[cw]=e),e}function th(i,e={}){if(!(this instanceof th))return new th(i,e);const t=e!==void 0,r=t?Xl({},e):{},n=new Hd(i,r),a=n.resolvedOptions();if(t){const c=Xl({},a);for(const s in c)M4(k4,r,[s])||delete c[s];this[uw]=c}else this[uw]=r;this[M0]=r.timeZone?r.timeZone:null,this[qM]=a.locale,this[xp]=n,this[cw]=a.timeZone,this[oo]=a.calendar,this[FM]=D4,this[BM]=I4,this[$M]=P4,this[UM]=A4,this[VM]=R4,this[GM]=L4,this[HM]=N4}Object.defineProperty(th,"name",{writable:!0,value:"DateTimeFormat"}),th.supportedLocalesOf=function(i,e){return Hd.supportedLocalesOf(i,e)};const Fb={resolvedOptions:Om(function(){return this[xp].resolvedOptions()}),format:Om(function(e,...t){let{instant:r,formatter:n,timeZone:a}=bp(e,this);return r&&n?(n=rv(n,a),n.format(r.epochMilliseconds)):this[xp].format(e,...t)}),formatRange:Om(function(e,t){if(Lp(e)||Lp(t)){if(!WM(e,t))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");const{instant:r,formatter:n,timeZone:a}=bp(e,this),{instant:c,formatter:s,timeZone:h}=bp(t,this);if(a&&h&&a!==h)throw new RangeError("cannot format range between different time zones");if(r&&c&&n&&s&&n===s)return rv(n,a).formatRange(r.epochMilliseconds,c.epochMilliseconds)}return this[xp].formatRange(e,t)})};"formatToParts"in Hd.prototype&&(Fb.formatToParts=Om(function(e,...t){let{instant:r,formatter:n,timeZone:a}=bp(e,this);return r&&n?(n=rv(n,a),n.formatToParts(r.epochMilliseconds)):this[xp].formatToParts(e,...t)})),"formatRangeToParts"in Hd.prototype&&(Fb.formatRangeToParts=Om(function(e,t){if(Lp(e)||Lp(t)){if(!WM(e,t))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");const{instant:r,formatter:n,timeZone:a}=bp(e,this),{instant:c,formatter:s,timeZone:h}=bp(t,this);if(a&&h&&a!==h)throw new RangeError("cannot format range between different time zones");if(r&&c&&n&&s&&n===s)return rv(n,a).formatRangeToParts(r.epochMilliseconds,c.epochMilliseconds)}return this[xp].formatRangeToParts(e,t)})),th.prototype=Object.create(Hd.prototype,Fb),Object.defineProperty(th,"prototype",{writable:!1,enumerable:!1,configurable:!1});const lh=th;function rv(i,e){if(!e)return i;const t=i.resolvedOptions();return t.timeZone===e?i:((t.dateStyle||t.timeStyle)&&(delete t.weekday,delete t.era,delete t.year,delete t.month,delete t.day,delete t.hour,delete t.minute,delete t.second,delete t.timeZoneName,delete t.hourCycle,delete t.hour12,delete t.dayPeriod),new Hd(t.locale,{...t,timeZone:e}))}function Ng(i={},e={}){const t=Xl({},i);for(const r of["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"])t[r]=r in e?e[r]:t[r],t[r]!==!1&&t[r]!==void 0||delete t[r];return t}function A4(i){let e=Ng(i,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});return nx(e)||(e=Xl({},e,{hour:"numeric",minute:"numeric",second:"numeric"})),e}function I4(i){let e=Ng(i,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"year"in e||"month"in e||(e=Xl(e,{year:"numeric",month:"numeric"})),e}function P4(i){let e=Ng(i,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"month"in e||"day"in e||(e=Xl({},e,{month:"numeric",day:"numeric"})),e}function D4(i){let e=Ng(i,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});return rx(e)||(e=Xl({},e,{year:"numeric",month:"numeric",day:"numeric"})),e}function R4(i){let e=Ng(i,{timeZoneName:!1});return nx(e)||rx(e)||(e=Xl({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function L4(i){let e=i;return nx(e)||rx(e)||(e=Xl({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),e.timeZoneName===void 0&&(e.timeZoneName="short")),e}function N4(i){let e=i;return nx(e)||rx(e)||(e=Xl({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function rx(i){return"year"in i||"month"in i||"day"in i||"weekday"in i||"dateStyle"in i}function nx(i){return"hour"in i||"minute"in i||"second"in i||"timeStyle"in i||"dayPeriod"in i}function Lp(i){return yr(i)||Pn(i)||ir(i)||bi(i)||Pr(i)||Ts(i)||ns(i)}function WM(i,e){return!(!Lp(i)||!Lp(e))&&!(Pn(i)&&!Pn(e))&&!(yr(i)&&!yr(e))&&!(ir(i)&&!ir(e))&&!(bi(i)&&!bi(e))&&!(Pr(i)&&!Pr(e))&&!(Ts(i)&&!Ts(e))&&!(ns(i)&&!ns(e))}function bp(i,e){const t=Oi("%Temporal.PlainDateTime%");if(Pn(i)){const r=new t(1970,1,1,Q(i,Zi),Q(i,Xi),Q(i,Ki),Q(i,Qi),Q(i,Ji),Q(i,er),e[oo]);return{instant:ma(rm(e),r,"compatible"),formatter:Sd(e,UM)}}if(Pr(i)){const r=Q(i,oi),n=Q(i,di),a=Q(i,pi),c=Vi(Q(i,At));if(c!==e[oo])throw new RangeError(`cannot format PlainYearMonth with calendar ${c} in locale with calendar ${e[oo]}`);const s=new t(r,n,a,12,0,0,0,0,0,c);return{instant:ma(rm(e),s,"compatible"),formatter:Sd(e,BM)}}if(Ts(i)){const r=Q(i,oi),n=Q(i,di),a=Q(i,pi),c=Vi(Q(i,At));if(c!==e[oo])throw new RangeError(`cannot format PlainMonthDay with calendar ${c} in locale with calendar ${e[oo]}`);const s=new t(r,n,a,12,0,0,0,0,0,c);return{instant:ma(rm(e),s,"compatible"),formatter:Sd(e,$M)}}if(yr(i)){const r=Q(i,oi),n=Q(i,di),a=Q(i,pi),c=Vi(Q(i,At));if(c!=="iso8601"&&c!==e[oo])throw new RangeError(`cannot format PlainDate with calendar ${c} in locale with calendar ${e[oo]}`);const s=new t(r,n,a,12,0,0,0,0,0,e[oo]);return{instant:ma(rm(e),s,"compatible"),formatter:Sd(e,FM)}}if(ir(i)){const r=Q(i,oi),n=Q(i,di),a=Q(i,pi),c=Q(i,Zi),s=Q(i,Xi),h=Q(i,Ki),p=Q(i,Qi),m=Q(i,Ji),y=Q(i,er),g=Vi(Q(i,At));if(g!=="iso8601"&&g!==e[oo])throw new RangeError(`cannot format PlainDateTime with calendar ${g} in locale with calendar ${e[oo]}`);let x=i;return g==="iso8601"&&(x=new t(r,n,a,c,s,h,p,m,y,e[oo])),{instant:ma(rm(e),x,"compatible"),formatter:Sd(e,VM)}}if(bi(i)){const r=Vi(Q(i,At));if(r!=="iso8601"&&r!==e[oo])throw new RangeError(`cannot format ZonedDateTime with calendar ${r} in locale with calendar ${e[oo]}`);const n=Vi(Q(i,jr));if(e[M0]&&e[M0]!==n)throw new RangeError(`timeZone option ${e[M0]} doesn't match actual time zone ${n}`);return{instant:Q(i,Qs),formatter:Sd(e,GM),timeZone:n}}return ns(i)?{instant:i,formatter:Sd(e,HM)}:{}}class ul{constructor(e){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");const t=zm(e);Ld(t),tc(this),rr(this,zi,t)}get epochSeconds(){if(!ns(this))throw new TypeError("invalid receiver");const e=Q(this,zi);return he.toNumber(he.divide(e,Lc))}get epochMilliseconds(){if(!ns(this))throw new TypeError("invalid receiver");const e=he.BigInt(Q(this,zi));return he.toNumber(he.divide(e,Ro))}get epochMicroseconds(){if(!ns(this))throw new TypeError("invalid receiver");const e=he.BigInt(Q(this,zi));return iv(he.divide(e,Fr))}get epochNanoseconds(){if(!ns(this))throw new TypeError("invalid receiver");return iv(he.BigInt(Q(this,zi)))}add(e){if(!ns(this))throw new TypeError("invalid receiver");return PS("add",this,e)}subtract(e){if(!ns(this))throw new TypeError("invalid receiver");return PS("subtract",this,e)}until(e,t){if(!ns(this))throw new TypeError("invalid receiver");return TS("until",this,e,t)}since(e,t){if(!ns(this))throw new TypeError("invalid receiver");return TS("since",this,e,t)}round(e){if(!ns(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?Rp("smallestUnit",e):lr(e),r=gs(t,"smallestUnit","time",Kd),n=Ra(t,"halfExpand"),a=$c(t,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[r],!0),c=tv(Q(this,zi),a,r,n);return new ul(c)}equals(e){if(!ns(this))throw new TypeError("invalid receiver");const t=zl(e),r=Q(this,zi),n=Q(t,zi);return he.equal(he.BigInt(r),he.BigInt(n))}toString(e){if(!ns(this))throw new TypeError("invalid receiver");const t=lr(e);let r=t.timeZone;r!==void 0&&(r=ya(r));const{precision:n,unit:a,increment:c}=Ig(t),s=Ra(t,"trunc"),h=tv(Q(this,zi),c,a,s);return gS(new ul(h),r,n)}toJSON(){if(!ns(this))throw new TypeError("invalid receiver");return gS(this,void 0,"auto")}toLocaleString(e,t){if(!ns(this))throw new TypeError("invalid receiver");return new lh(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.Instant")}toZonedDateTime(e){if(!ns(this))throw new TypeError("invalid receiver");if(!an(e))throw new TypeError("invalid argument in toZonedDateTime");const t=e.calendar;if(t===void 0)throw new TypeError("missing calendar property in toZonedDateTime");const r=Is(t),n=e.timeZone;if(n===void 0)throw new TypeError("missing timeZone property in toZonedDateTime");const a=ya(n);return zs(Q(this,zi),a,r)}toZonedDateTimeISO(e){let t=e;if(!ns(this))throw new TypeError("invalid receiver");if(an(t)){const a=t.timeZone;a!==void 0&&(t=a)}const r=ya(t),n=Gn();return zs(Q(this,zi),r,n)}static fromEpochSeconds(e){const t=Jm(e),r=he.multiply(he.BigInt(t),Lc);return Ld(r),new ul(r)}static fromEpochMilliseconds(e){const t=Jm(e),r=he.multiply(he.BigInt(t),Ro);return Ld(r),new ul(r)}static fromEpochMicroseconds(e){const t=zm(e),r=he.multiply(t,Fr);return Ld(r),new ul(r)}static fromEpochNanoseconds(e){const t=zm(e);return Ld(t),new ul(t)}static from(e){return ns(e)?new ul(Q(e,zi)):zl(e)}static compare(e,t){const r=zl(e),n=zl(t),a=Q(r,zi),c=Q(n,zi);return he.lessThan(a,c)?-1:he.greaterThan(a,c)?1:0}}ec(ul,"Temporal.Instant");const nv=Array.prototype.includes,z4=Array.prototype.push,O4=globalThis.Intl.DateTimeFormat,j4=Array.prototype.sort,F4=Math.abs,B4=Math.floor,dw=Object.entries,zS=Object.keys,Dn={};class sv{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: id is required");const t=Vi(e);if(!zM(t))throw new RangeError(`invalid calendar identifier ${t}`);tc(this),rr(this,Fn,t)}get id(){if(!jn(this))throw new TypeError("invalid receiver");return Vi(this)}dateFromFields(e,t){if(!jn(this))throw new TypeError("invalid receiver");if(!an(e))throw new TypeError("invalid fields");const r=lr(t);return Dn[Q(this,Fn)].dateFromFields(e,r,this)}yearMonthFromFields(e,t){if(!jn(this))throw new TypeError("invalid receiver");if(!an(e))throw new TypeError("invalid fields");const r=lr(t);return Dn[Q(this,Fn)].yearMonthFromFields(e,r,this)}monthDayFromFields(e,t){if(!jn(this))throw new TypeError("invalid receiver");if(!an(e))throw new TypeError("invalid fields");const r=lr(t);return Dn[Q(this,Fn)].monthDayFromFields(e,r,this)}fields(e){if(!jn(this))throw new TypeError("invalid receiver");const t=[],r=new Set(["year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond"]);for(const n of e){if(typeof n!="string")throw new TypeError("invalid fields");if(!r.has(n))throw new RangeError(`invalid field name ${n}`);r.delete(n),z4.call(t,n)}return Dn[Q(this,Fn)].fields(t)}mergeFields(e,t){if(!jn(this))throw new TypeError("invalid receiver");return Dn[Q(this,Fn)].mergeFields(e,t)}dateAdd(e,t,r){if(!jn(this))throw new TypeError("invalid receiver");const n=Yr(e),a=vp(t),c=Vn(lr(r)),{days:s}=Ka(Q(a,oa),Q(a,la),Q(a,ca),Q(a,ua),Q(a,da),Q(a,ha),Q(a,pa),"day");return Dn[Q(this,Fn)].dateAdd(n,Q(a,aa),Q(a,Cs),Q(a,Aa),s,c,this)}dateUntil(e,t,r){if(!jn(this))throw new TypeError("invalid receiver");const n=Yr(e),a=Yr(t);let c=gs(lr(r),"largestUnit","date","auto");c==="auto"&&(c="day");const{years:s,months:h,weeks:p,days:m}=Dn[Q(this,Fn)].dateUntil(n,a,c);return new(Oi("%Temporal.Duration%"))(s,h,p,m,0,0,0,0,0,0)}year(e){let t=e;if(!jn(this))throw new TypeError("invalid receiver");return Pr(t)||(t=Yr(t)),Dn[Q(this,Fn)].year(t)}month(e){let t=e;if(!jn(this))throw new TypeError("invalid receiver");if(Ts(t))throw new TypeError("use monthCode on PlainMonthDay instead");return Pr(t)||(t=Yr(t)),Dn[Q(this,Fn)].month(t)}monthCode(e){let t=e;if(!jn(this))throw new TypeError("invalid receiver");return Pr(t)||Ts(t)||(t=Yr(t)),Dn[Q(this,Fn)].monthCode(t)}day(e){let t=e;if(!jn(this))throw new TypeError("invalid receiver");return Ts(t)||(t=Yr(t)),Dn[Q(this,Fn)].day(t)}era(e){let t=e;if(!jn(this))throw new TypeError("invalid receiver");return Pr(t)||(t=Yr(t)),Dn[Q(this,Fn)].era(t)}eraYear(e){let t=e;if(!jn(this))throw new TypeError("invalid receiver");return Pr(t)||(t=Yr(t)),Dn[Q(this,Fn)].eraYear(t)}dayOfWeek(e){if(!jn(this))throw new TypeError("invalid receiver");const t=Yr(e);return Dn[Q(this,Fn)].dayOfWeek(t)}dayOfYear(e){if(!jn(this))throw new TypeError("invalid receiver");const t=Yr(e);return Dn[Q(this,Fn)].dayOfYear(t)}weekOfYear(e){if(!jn(this))throw new TypeError("invalid receiver");const t=Yr(e);return Dn[Q(this,Fn)].weekOfYear(t)}daysInWeek(e){if(!jn(this))throw new TypeError("invalid receiver");const t=Yr(e);return Dn[Q(this,Fn)].daysInWeek(t)}daysInMonth(e){let t=e;if(!jn(this))throw new TypeError("invalid receiver");return Pr(t)||(t=Yr(t)),Dn[Q(this,Fn)].daysInMonth(t)}daysInYear(e){let t=e;if(!jn(this))throw new TypeError("invalid receiver");return Pr(t)||(t=Yr(t)),Dn[Q(this,Fn)].daysInYear(t)}monthsInYear(e){let t=e;if(!jn(this))throw new TypeError("invalid receiver");return Pr(t)||(t=Yr(t)),Dn[Q(this,Fn)].monthsInYear(t)}inLeapYear(e){let t=e;if(!jn(this))throw new TypeError("invalid receiver");return Pr(t)||(t=Yr(t)),Dn[Q(this,Fn)].inLeapYear(t)}toString(){if(!jn(this))throw new TypeError("invalid receiver");return Q(this,Fn)}toJSON(){if(!jn(this))throw new TypeError("invalid receiver");return Vi(this)}static from(e){return Is(e)}}function d2(i){if(!i.startsWith("M"))throw new RangeError(`Invalid month code: ${i}.  Month codes must start with M.`);const e=+i.slice(1);if(isNaN(e))throw new RangeError(`Invalid month code: ${i}`);return e}function zc(i,e=!1){return`M${i.toString().padStart(2,"0")}${e?"L":""}`}function A0(i,e,t=12){let{month:r,monthCode:n}=i;if(n===void 0){if(r===void 0)throw new TypeError("Either month or monthCode are required");e==="reject"&&js(r,1,t),e==="constrain"&&(r=Xa(r,1,t)),n=zc(r)}else{const a=d2(n);if(r!==void 0&&r!==a)throw new RangeError(`monthCode ${n} and month ${r} must match if both are present`);if(n!==zc(a))throw new RangeError(`Invalid month code: ${n}`);if(r=a,r<1||r>t)throw new RangeError(`Invalid monthCode: ${n}`)}return{...i,month:r,monthCode:n}}ec(sv,"Temporal.Calendar"),ew("Temporal.Calendar.from",sv.from),Dn.iso8601={dateFromFields(i,e,t){const r=Vn(e);let n=ar(i,["day","month","monthCode","year"],["year","day"]);n=A0(n);let{year:a,month:c,day:s}=n;return{year:a,month:c,day:s}=X0(a,c,s,r),rl(a,c,s,t)},yearMonthFromFields(i,e,t){const r=Vn(e);let n=ar(i,["month","monthCode","year"],["year"]);n=A0(n);let{year:a,month:c}=n;return{year:a,month:c}=function(h,p,m){let y=h,g=p;switch(m){case"reject":Zl(y,g,1);break;case"constrain":({year:y,month:g}=MM(y,g))}return{year:y,month:g}}(a,c,r),rg(a,c,t,1)},monthDayFromFields(i,e,t){const r=Vn(e);let n=ar(i,["day","month","monthCode","year"],["day"]);if(n.month!==void 0&&n.year===void 0&&n.monthCode===void 0)throw new TypeError("either year or monthCode required with month");const a=n.monthCode===void 0;n=A0(n);let{month:c,day:s,year:h}=n;return{month:c,day:s}=X0(a?h:1972,c,s,r),ig(c,s,t,1972)},fields:i=>i,mergeFields(i,e){const t={};for(const n of zS(i))n!=="month"&&n!=="monthCode"&&(t[n]=i[n]);const r=zS(e);for(const n of r)t[n]=e[n];if(!nv.call(r,"month")&&!nv.call(r,"monthCode")){const{month:n,monthCode:a}=i;n!==void 0&&(t.month=n),a!==void 0&&(t.monthCode=a)}return t},dateAdd(i,e,t,r,n,a,c){let s=Q(i,oi),h=Q(i,di),p=Q(i,pi);return{year:s,month:h,day:p}=Vd(s,h,p,e,t,r,n,a),rl(s,h,p,c)},dateUntil:(i,e,t)=>n2(Q(i,oi),Q(i,di),Q(i,pi),Q(e,oi),Q(e,di),Q(e,pi),t),year:i=>Q(i,oi),era(){},eraYear(){},month:i=>Q(i,di),monthCode:i=>zc(Q(i,di)),day:i=>Q(i,pi),dayOfWeek:i=>jb(Q(i,oi),Q(i,di),Q(i,pi)),dayOfYear:i=>ev(Q(i,oi),Q(i,di),Q(i,pi)),weekOfYear:i=>function(t,r,n){const a=ev(t,r,n),c=jb(t,r,n)||7,s=jb(t,1,1),h=ps((a-c+10)/7);return h<1?s===5||s===6&&Tu(t-1)?53:52:h===53&&(Tu(t)?366:365)-a<4-c?1:h}(Q(i,oi),Q(i,di),Q(i,pi)),daysInWeek:()=>7,daysInMonth:i=>Nc(Q(i,oi),Q(i,di)),daysInYear(i){let e=i;return vs(e,oi)||(e=Yr(e)),Tu(Q(e,oi))?366:365},monthsInYear:()=>12,inLeapYear(i){let e=i;return vs(e,oi)||(e=Yr(e)),Tu(Q(e,oi))}};class Cn{constructor(e){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,this.now=globalThis.performance?globalThis.performance.now():Date.now(),e!==void 0){let t=0;for(const r of e.map.entries()){if(++t>Cn.MAX_CACHE_ENTRIES)break;this.map.set(...r)}}}get(e){const t=this.map.get(e);return t&&(this.hits++,this.report()),this.calls++,t}set(e,t){this.map.set(e,t),this.misses++,this.report()}report(){}setObject(e){if(Cn.objectMap.get(e))throw new RangeError("object already cached");Cn.objectMap.set(e,this),this.report()}static getCacheForObject(e){let t=Cn.objectMap.get(e);return t||(t=new Cn,Cn.objectMap.set(e,t)),t}}function YM({isoYear:i,isoMonth:e,isoDay:t}){return`${oh(i)}-${xn(e)}-${xn(t)}T00:00Z`}function Bb(i,e){return{years:i.year-e.year,months:i.month-e.month,days:i.day-e.day}}Cn.objectMap=new WeakMap,Cn.MAX_CACHE_ENTRIES=1e3;class Wp{constructor(){this.eraLength="short",this.hasEra=!0}getFormatter(){return this.formatter===void 0&&(this.formatter=new O4(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:this.eraLength,timeZone:"UTC"})),this.formatter}isoToCalendarDate(e,t){const{year:r,month:n,day:a}=e,c=JSON.stringify({func:"isoToCalendarDate",isoYear:r,isoMonth:n,isoDay:a,id:this.id}),s=t.get(c);if(s)return s;const h=this.getFormatter();let p,m;try{m=YM({isoYear:r,isoMonth:n,isoDay:a}),p=h.formatToParts(new Date(m))}catch{throw new RangeError(`Invalid ISO date: ${JSON.stringify({isoYear:r,isoMonth:n,isoDay:a})}`)}const y={};for(let{type:x,value:v}of p){if(x==="year"&&(y.eraYear=+v),x==="relatedYear"&&(y.eraYear=+v),x==="month"){const _=/^([0-9]*)(.*?)$/.exec(v);if(!_||_.length!=3||!_[1]&&!_[2])throw new RangeError(`Unexpected month: ${v}`);if(y.month=_[1]?+_[1]:1,y.month<1)throw new RangeError(`Invalid month ${v} from ${m}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(y.month>13)throw new RangeError(`Invalid month ${v} from ${m}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);_[2]&&(y.monthExtra=_[2])}x==="day"&&(y.day=+v),this.hasEra&&x==="era"&&v!=null&&v!==""&&(v=v.split(" (")[0],y.era=v.normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(" ","-").toLowerCase())}if(y.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.reviseIntlEra){const{era:x,eraYear:v}=this.reviseIntlEra(y,e);y.era=x,y.eraYear=v}this.checkIcuBugs&&this.checkIcuBugs(e);const g=this.adjustCalendarDate(y,t,"constrain",!0);if(g.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(e)}`);if(g.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(e)}`);if(g.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(e)}`);return t.set(c,g),["constrain","reject"].forEach(x=>{const v=JSON.stringify({func:"calendarToIsoDate",year:g.year,month:g.month,day:g.day,overflow:x,id:this.id});t.set(v,e)}),g}validateCalendarDate(e){const{era:t,month:r,year:n,day:a,eraYear:c,monthCode:s,monthExtra:h}=e;if(h!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(n===void 0&&c===void 0)throw new TypeError("year or eraYear is required");if(r===void 0&&s===void 0)throw new TypeError("month or monthCode is required");if(a===void 0)throw new RangeError("Missing day");if(s!==void 0){if(typeof s!="string")throw new RangeError("monthCode must be a string, not "+typeof s);if(!/^M([01]?\d)(L?)$/.test(s))throw new RangeError(`Invalid monthCode: ${s}`)}if(this.constantEra){if(t!==void 0&&t!==this.constantEra)throw new RangeError(`era must be ${this.constantEra}, not ${t}`);if(c!==void 0&&n!==void 0&&c!==n)throw new RangeError(`eraYear ${c} does not match year ${n}`)}}adjustCalendarDate(e,t,r="constrain",n=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let a=e;if(this.validateCalendarDate(a),this.constantEra){const{year:p,eraYear:m}=a;a={...a,era:this.constantEra,year:p!==void 0?p:m,eraYear:m!==void 0?m:p}}const c=this.monthsInYear(a,t);let{month:s,monthCode:h}=a;return{month:s,monthCode:h}=A0(a,r,c),{...a,month:s,monthCode:h}}regulateMonthDayNaive(e,t,r){const n=this.monthsInYear(e,r);let{month:a,day:c}=e;return t==="reject"?(js(a,1,n),js(c,1,this.maximumMonthLength(e))):(a=Xa(a,1,n),c=Xa(c,1,this.maximumMonthLength({...e,month:a}))),{...e,month:a,day:c}}calendarToIsoDate(e,t="constrain",r){const n=e;let a=this.adjustCalendarDate(e,r,t,!1);a=this.regulateMonthDayNaive(a,t,r);const{year:c,month:s,day:h}=a,p=JSON.stringify({func:"calendarToIsoDate",year:c,month:s,day:h,overflow:t,id:this.id});let m,y=r.get(p);if(y||n.year!==void 0&&n.month!==void 0&&n.day!==void 0&&(n.year!==a.year||n.month!==a.month||n.day!==a.day)&&(m=JSON.stringify({func:"calendarToIsoDate",year:n.year,month:n.month,day:n.day,overflow:t,id:this.id}),y=r.get(m),y))return y;let g=this.estimateIsoDate({year:c,month:s,day:h});const x=E=>{let A=this.addDaysIso(g,E);if(a.day>this.minimumMonthLength(a)){let M=this.isoToCalendarDate(A,r);for(;M.month!==s||M.year!==c;){if(t==="reject")throw new RangeError(`day ${h} does not exist in month ${s} of year ${c}`);A=this.addDaysIso(A,-1),M=this.isoToCalendarDate(A,r)}}return A};let v=0,_=this.isoToCalendarDate(g,r),C=Bb(a,_);if(C.years!==0||C.months!==0||C.days!==0){const E=365*C.years+30*C.months+C.days;g=this.addDaysIso(g,E),_=this.isoToCalendarDate(g,r),C=Bb(a,_),C.years===0&&C.months===0?g=x(C.days):v=this.compareCalendarDates(a,_)}let k=8,w=!1;for(;v;){g=this.addDaysIso(g,v*k);const E=_;_=this.isoToCalendarDate(g,r);const A=v;if(v=this.compareCalendarDates(a,_),v){if(C=Bb(a,_),C.years===0&&C.months===0)g=x(C.days),v=0,w=a.day>this.minimumMonthLength(a);else if(A&&v!==A)if(k>1)k/=2;else{if(t==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...n})}`);this.compareCalendarDates(_,E)>0&&(g=this.addDaysIso(g,-1)),w=!0,v=0}}}if(r.set(p,g),m&&r.set(m,g),a.year===void 0||a.month===void 0||a.day===void 0||a.monthCode===void 0||this.hasEra&&(a.era===void 0||a.eraYear===void 0))throw new RangeError("Unexpected missing property");if(!w){const E=JSON.stringify({func:"isoToCalendarDate",isoYear:g.year,isoMonth:g.month,isoDay:g.day,id:this.id});r.set(E,a)}return g}temporalToCalendarDate(e,t){const r={year:Q(e,oi),month:Q(e,di),day:Q(e,pi)};return this.isoToCalendarDate(r,t)}compareCalendarDates(e,t){const r=ar(e,["day","month","year"],["day","month","year"]),n=ar(t,["day","month","year"],["day","month","year"]);return r.year!==n.year?Gd(r.year-n.year):r.month!==n.month?Gd(r.month-n.month):r.day!==n.day?Gd(r.day-n.day):0}regulateDate(e,t="constrain",r){const n=this.calendarToIsoDate(e,t,r);return this.isoToCalendarDate(n,r)}addDaysIso(e,t){return Vd(e.year,e.month,e.day,0,0,0,t,"constrain")}addDaysCalendar(e,t,r){const n=this.calendarToIsoDate(e,"constrain",r),a=this.addDaysIso(n,t);return this.isoToCalendarDate(a,r)}addMonthsCalendar(e,t,r,n){let a=e;const{day:c}=a;for(let s=0,h=F4(t);s<h;s++){const{month:p}=a,m=a,y=t<0?-Math.max(c,this.daysInPreviousMonth(a,n)):this.daysInMonth(a,n),g=this.calendarToIsoDate(a,"constrain",n);let x=this.addDaysIso(g,y);if(a=this.isoToCalendarDate(x,n),t>0){const v=this.monthsInYear(m,n);for(;a.month-1!=p%v;)x=this.addDaysIso(x,-1),a=this.isoToCalendarDate(x,n)}a.day!==c&&(a=this.regulateDate({...a,day:c},"constrain",n))}if(r==="reject"&&a.day!==c)throw new RangeError(`Day ${c} does not exist in resulting calendar month`);return a}addCalendar(e,{years:t=0,months:r=0,weeks:n=0,days:a=0},c,s){const{year:h,day:p,monthCode:m}=e,y=this.adjustCalendarDate({year:h+t,monthCode:m,day:p},s),g=this.addMonthsCalendar(y,r,c,s),x=a+7*n;return this.addDaysCalendar(g,x,s)}untilCalendar(e,t,r,n){let a=0,c=0,s=0,h=0;switch(r){case"day":a=this.calendarDaysUntil(e,t,n);break;case"week":{const p=this.calendarDaysUntil(e,t,n);a=p%7,c=(p-a)/7;break}case"month":case"year":{const p=t.year-e.year,m=t.month-e.month,y=t.day-e.day,g=this.compareCalendarDates(t,e);if(!g)return{years:0,months:0,weeks:0,days:0};r==="year"&&p&&(h=m*g<0||m===0&&y*g<0?p-g:p);let x,v=h?this.addCalendar(e,{years:h},"constrain",n):e;do s+=g,x=v,v=this.addMonthsCalendar(x,g,"constrain",n),v.day!==e.day&&(v=this.regulateDate({...v,day:e.day},"constrain",n));while(this.compareCalendarDates(t,v)*g>=0);s-=g,a=this.calendarDaysUntil(x,t,n);break}}return{years:h,months:s,weeks:c,days:a}}daysInMonth(e,t){const{day:r}=e,n=this.maximumMonthLength(e),a=this.minimumMonthLength(e);if(a===n)return a;const c=r<=n-a?n:a,s=this.calendarToIsoDate(e,"constrain",t),h=this.addDaysIso(s,c),p=this.isoToCalendarDate(h,t),m=this.addDaysIso(h,-p.day);return this.isoToCalendarDate(m,t).day}daysInPreviousMonth(e,t){const{day:r,month:n,year:a}=e;let c={year:n>1?a:a-1,month:n,day:1};const s=n>1?n-1:this.monthsInYear(c,t);c={...c,month:s};const h=this.minimumMonthLength(c),p=this.maximumMonthLength(c);if(h===p)return p;const m=this.calendarToIsoDate(e,"constrain",t),y=this.addDaysIso(m,-r);return this.isoToCalendarDate(y,t).day}startOfCalendarYear(e){return{year:e.year,month:1,monthCode:"M01",day:1}}startOfCalendarMonth(e){return{year:e.year,month:e.month,day:1}}calendarDaysUntil(e,t,r){const n=this.calendarToIsoDate(e,"constrain",r),a=this.calendarToIsoDate(t,"constrain",r);return this.isoDaysUntil(n,a)}isoDaysUntil(e,t){return n2(e.year,e.month,e.day,t.year,t.month,t.day,"day").days}monthDayFromFields(e,t,r){let n,a,c,s,h,{year:p,month:m,monthCode:y,day:g,era:x,eraYear:v}=e;if(y===void 0){if(p===void 0&&(x===void 0||v===void 0))throw new TypeError("`monthCode`, `year`, or `era` and `eraYear` is required");({monthCode:y,year:p}=this.adjustCalendarDate({year:p,month:m,monthCode:y,day:g,era:x,eraYear:v},r,t))}const{year:_}=this.isoToCalendarDate({year:1972,month:1,day:1},r);for(let C=0;C<100;C++){const k=this.adjustCalendarDate({day:g,monthCode:y,year:_-C},r),w=this.calendarToIsoDate(k,"constrain",r),E=this.isoToCalendarDate(w,r);if({year:n,month:a,day:c}=w,E.monthCode===y&&E.day===g)return{month:a,day:c,year:n};t==="constrain"&&(s===void 0||E.monthCode===s.monthCode&&E.day>s.day)&&(s=E,h=w)}if(t==="constrain"&&h!==void 0)return h;throw new RangeError(`No recent ${this.id} year with monthCode ${y} and day ${g}`)}}class $4 extends Wp{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}},this.hasEra=!1}inLeapYear(e){const{year:t}=e;return(7*t+1)%19<7}monthsInYear(e){return this.inLeapYear(e)?13:12}minimumMonthLength(e){return this.minMaxMonthLength(e,"min")}maximumMonthLength(e){return this.minMaxMonthLength(e,"max")}minMaxMonthLength(e,t){const{month:r,year:n}=e,a=this.getMonthCode(n,r),c=dw(this.months).find(h=>h[1].monthCode===a);if(c===void 0)throw new RangeError(`unmatched Hebrew month: ${r}`);const s=c[1].days;return typeof s=="number"?s:s[t]}estimateIsoDate(e){const{year:t}=e;return{year:t-3760,month:1,day:1}}getMonthCode(e,t){return this.inLeapYear({year:e})?t===6?zc(5,!0):zc(t<6?t:t-1):zc(t)}adjustCalendarDate(e,t,r="constrain",n=!1){let{year:a,eraYear:c,month:s,monthCode:h,day:p,monthExtra:m}=e;if(a===void 0&&c!==void 0&&(a=c),c===void 0&&a!==void 0&&(c=a),n){if(m){const y=this.months[m];if(!y)throw new RangeError(`Unrecognized month from formatToParts: ${m}`);s=this.inLeapYear({year:a})?y.leap:y.regular}return h=this.getMonthCode(a,s),{year:a,month:s,day:p,era:void 0,eraYear:c,monthCode:h}}if(this.validateCalendarDate(e),s===void 0)if(h.endsWith("L")){if(h!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${h}`);if(s=6,!this.inLeapYear({year:a})){if(r==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${a} which is not a leap year`);s=5,p=30,h="M05"}}else{s=d2(h),this.inLeapYear({year:a})&&s>=6&&s++;const y=this.monthsInYear({year:a});if(s<1||s>y)throw new RangeError(`Invalid monthCode: ${h}`)}else if(r==="reject"?(js(s,1,this.monthsInYear({year:a})),js(p,1,this.maximumMonthLength({year:a,month:s}))):(s=Xa(s,1,this.monthsInYear({year:a})),p=Xa(p,1,this.maximumMonthLength({year:a,month:s}))),h===void 0)h=this.getMonthCode(a,s);else if(this.getMonthCode(a,s)!==h)throw new RangeError(`monthCode ${h} doesn't correspond to month ${s} in Hebrew year ${a}`);return{...e,day:p,month:s,monthCode:h,year:a,eraYear:c}}}class Yp extends Wp{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425,this.constantEra="ah"}inLeapYear(e,t){return this.daysInMonth({year:e.year,month:12,day:1},t)===30}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}estimateIsoDate(e){const{year:t}=this.adjustCalendarDate(e);return{year:B4(t*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}}class ZM extends Yp{constructor(){super(...arguments),this.id="islamic"}}class U4 extends Yp{constructor(){super(...arguments),this.id="islamic-umalqura"}}class V4 extends Yp{constructor(){super(...arguments),this.id="islamic-tbla"}}class G4 extends Yp{constructor(){super(...arguments),this.id="islamic-civil"}}class H4 extends Yp{constructor(){super(...arguments),this.id="islamic-rgsa"}}class q4 extends Yp{constructor(){super(...arguments),this.id="islamicc"}}class W4 extends Wp{constructor(){super(...arguments),this.id="persian",this.calendarType="solar",this.constantEra="ap"}inLeapYear(e,t){return ZM.prototype.inLeapYear.call(this,e,t)}monthsInYear(){return 12}minimumMonthLength(e){const{month:t}=e;return t===12?29:t<=6?31:30}maximumMonthLength(e){const{month:t}=e;return t===12?30:t<=6?31:30}estimateIsoDate(e){const{year:t}=this.adjustCalendarDate(e);return{year:t+621,month:1,day:1}}}class Y4 extends Wp{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.constantEra="saka",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(e){return XM(e.year+78)}monthsInYear(){return 12}minimumMonthLength(e){return this.getMonthInfo(e).length}maximumMonthLength(e){return this.getMonthInfo(e).length}getMonthInfo(e){const{month:t}=e;let r=this.months[t];if(r===void 0)throw new RangeError(`Invalid month: ${t}`);return this.inLeapYear(e)&&r.leap&&(r=r.leap),r}estimateIsoDate(e){const t=this.adjustCalendarDate(e),r=this.getMonthInfo(t);return Vd(t.year+78+(r.nextYear?1:0),r.month,r.day,0,0,0,t.day-1,"constrain")}checkIcuBugs(e){if(this.vulnerableToBceBug&&e.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}}function XM(i){return i%4==0&&(i%100!=0||i%400==0)}class zg extends Wp{constructor(e,t){super(),this.calendarType="solar",this.v8IsVulnerableToJulianBug=new Date("+001001-01-01T00:00Z").toLocaleDateString("en-US-u-ca-japanese",{timeZone:"UTC"}).startsWith("12"),this.calendarIsVulnerableToJulianBug=!1,this.id=e;const{eras:r,anchorEra:n}=function(c){let s,h=c;if(h.length===0)throw new RangeError("Invalid era data: eras are required");if(h.length===1&&h[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(h.length===1&&!h[0].name)throw new RangeError("Invalid era data: at least one named era is required");if(h.filter(m=>m.reverseOf!=null).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");h.forEach(m=>{if(m.isAnchor||!m.anchorEpoch&&!m.reverseOf){if(s)throw new RangeError("Invalid era data: cannot have multiple anchor eras");s=m,m.anchorEpoch={year:m.hasYearZero?0:1}}else if(!m.name)throw new RangeError("If era name is blank, it must be the anchor era")}),h=h.filter(m=>m.name),h.forEach(m=>{const{reverseOf:y}=m;if(y){const g=h.find(x=>x.name===y);if(g===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${y}`);m.reverseOf=g,m.anchorEpoch=g.anchorEpoch,m.isoEpoch=g.isoEpoch}m.anchorEpoch.month===void 0&&(m.anchorEpoch.month=1),m.anchorEpoch.day===void 0&&(m.anchorEpoch.day=1)}),j4.call(h,(m,y)=>{if(m.reverseOf)return 1;if(y.reverseOf)return-1;if(!m.isoEpoch||!y.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return y.isoEpoch.year-m.isoEpoch.year});const p=h[h.length-1].reverseOf;if(p&&p!==h[h.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return h.forEach((m,y)=>{m.genericName="era"+(h.length-1-y)}),{eras:h,anchorEra:s||h[0]}}(t);this.anchorEra=n,this.eras=r}inLeapYear(e){const{year:t}=this.estimateIsoDate({month:1,day:1,year:e.year});return XM(t)}monthsInYear(){return 12}minimumMonthLength(e){const{month:t}=e;return t===2?this.inLeapYear(e)?29:28:[4,6,9,11].indexOf(t)>=0?30:31}maximumMonthLength(e){return this.minimumMonthLength(e)}completeEraYear(e){const t=(s,h)=>{const p=e[s];if(p!=null&&p!=h)throw new RangeError(`Input ${s} ${p} doesn't match calculated value ${h}`)},r=s=>{let h;const p={...e,year:s},m=this.eras.find((y,g)=>{if(g===this.eras.length-1){if(y.reverseOf){if(s>0)throw new RangeError(`Signed year ${s} is invalid for era ${y.name}`);return h=y.anchorEpoch.year-s,!0}return h=s-y.anchorEpoch.year+(y.hasYearZero?0:1),!0}return this.compareCalendarDates(p,y.anchorEpoch)>=0&&(h=s-y.anchorEpoch.year+(y.hasYearZero?0:1),!0)});if(!m)throw new RangeError(`Year ${s} was not matched by any era`);return{eraYear:h,era:m.name}};let{year:n,eraYear:a,era:c}=e;if(n!=null)({eraYear:a,era:c}=r(n)),t("era",c),t("eraYear",a);else{if(a==null)throw new RangeError("Either `year` or `eraYear` and `era` are required");{const s=c===void 0?void 0:this.eras.find(h=>h.name===c||h.genericName===c);if(!s)throw new RangeError(`Era ${c} (ISO year ${a}) was not matched by any era`);if(a<1&&s.reverseOf)throw new RangeError(`Years in ${c} era must be positive, not ${n}`);n=s.reverseOf?s.anchorEpoch.year-a:a+s.anchorEpoch.year-(s.hasYearZero?0:1),t("year",n),{eraYear:a,era:c}=r(n)}}return{...e,year:n,eraYear:a,era:c}}adjustCalendarDate(e,t,r="constrain"){let n=e;const{month:a,monthCode:c}=n;return a===void 0&&(n={...n,month:d2(c)}),this.validateCalendarDate(n),n=this.completeEraYear(n),super.adjustCalendarDate(n,t,r)}estimateIsoDate(e){const t=this.adjustCalendarDate(e),{year:r,month:n,day:a}=t,{anchorEra:c}=this;return X0(r+c.isoEpoch.year-(c.hasYearZero?0:1),n,a,"constrain")}checkIcuBugs(e){if(this.calendarIsVulnerableToJulianBug&&this.v8IsVulnerableToJulianBug&&Su(e.year,e.month,e.day,1582,10,15)<0)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 1582-10-15 (see https://bugs.chromium.org/p/chromium/issues/detail?id=1173158)`)}}class h2 extends zg{constructor(e,t){super(e,t)}inLeapYear(e){const{year:t}=e;return(t+1)%4==0}monthsInYear(){return 13}minimumMonthLength(e){const{month:t}=e;return t===13?this.inLeapYear(e)?6:5:30}maximumMonthLength(e){return this.minimumMonthLength(e)}}class Z4 extends h2{constructor(){super("ethioaa",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}}])}}class X4 extends h2{constructor(){super("coptic",[{name:"era1",isoEpoch:{year:284,month:8,day:29}},{name:"era0",reverseOf:"era1"}])}}class K4 extends h2{constructor(){super("ethiopic",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}},{name:"era1",isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}}class Q4 extends zg{constructor(){super("roc",[{name:"minguo",isoEpoch:{year:1912,month:1,day:1}},{name:"before-roc",reverseOf:"minguo"}]),this.calendarIsVulnerableToJulianBug=!0}}class J4 extends zg{constructor(){super("buddhist",[{name:"be",hasYearZero:!0,isoEpoch:{year:-543,month:1,day:1}}]),this.calendarIsVulnerableToJulianBug=!0}}class ez extends zg{constructor(){super("gregory",[{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}])}reviseIntlEra(e){let{era:t,eraYear:r}=e;return t!=="bc"&&t!=="b"||(t="bce"),t!=="ad"&&t!=="a"||(t="ce"),{era:t,eraYear:r}}}class tz extends zg{constructor(){super("japanese",[{name:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{name:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{name:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{name:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{name:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}]),this.calendarIsVulnerableToJulianBug=!0,this.eraLength="long"}reviseIntlEra(e,t){const{era:r,eraYear:n}=e,{year:a}=t;return this.eras.find(c=>c.name===r)?{era:r,eraYear:n}:a<1?{era:"bce",eraYear:1-a}:{era:"ce",eraYear:a}}}class KM extends Wp{constructor(){super(...arguments),this.calendarType="lunisolar",this.hasEra=!1}inLeapYear(e,t){const r=this.getMonthList(e.year,t);return dw(r).length===13}monthsInYear(e,t){return this.inLeapYear(e,t)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}getMonthList(e,t){if(e===void 0)throw new TypeError("Missing year");const r=JSON.stringify({func:"getMonthList",calendarYear:e,id:this.id}),n=t.get(r);if(n)return n;const a=this.getFormatter(),c=(C,k)=>{const w=YM({isoYear:C,isoMonth:2,isoDay:1}),E=new Date(w);E.setUTCDate(k+1);const A=a.formatToParts(E),M=A.find(Y=>Y.type==="month").value,S=+A.find(Y=>Y.type==="day").value;let N=A.find(Y=>Y.type==="relatedYear");if(N===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return N=+N.value,{calendarMonthString:M,calendarDay:S,calendarYearToVerify:N}};let s=17,{calendarMonthString:h,calendarDay:p,calendarYearToVerify:m}=c(e,s);h!=="1"&&(s+=29,{calendarMonthString:h,calendarDay:p}=c(e,s)),s-=p-5;const y={};let g,x,v=1,_=!1;do({calendarMonthString:h,calendarDay:p,calendarYearToVerify:m}=c(e,s)),g&&(y[x].daysInMonth=g+30-p),m!==e?_=!0:(y[h]={monthIndex:v++},s+=30),g=p,x=h;while(!_);return y[x].daysInMonth=g+30-p,t.set(r,y),y}estimateIsoDate(e){const{year:t,month:r}=e;return{year:t,month:r>=12?12:r+1,day:1}}adjustCalendarDate(e,t,r="constrain",n=!1){let{year:a,month:c,monthExtra:s,day:h,monthCode:p,eraYear:m}=e;if(n){if(a=m,s&&s!=="bis")throw new RangeError(`Unexpected leap month suffix: ${s}`);const y=zc(c,s!==void 0),g=`${c}${s||""}`,x=this.getMonthList(a,t)[g];if(x===void 0)throw new RangeError(`Unmatched month ${g} in Chinese year ${a}`);return c=x.monthIndex,{year:a,month:c,day:h,era:void 0,eraYear:m,monthCode:y}}if(this.validateCalendarDate(e),a===void 0&&(a=m),m===void 0&&(m=a),c===void 0){const y=this.getMonthList(a,t);let g=p.replace("L","bis").slice(1);g[0]==="0"&&(g=g.slice(1));let x=y[g];if(c=x&&x.monthIndex,c===void 0&&p.endsWith("L")&&!nv.call(["M01L","M12L","M13L"],p)&&r==="constrain"){let v=p.slice(1,-1);v[0]==="0"&&(v=v.slice(1)),x=y[v],x&&({daysInMonth:h,monthIndex:c}=x,p=zc(v))}if(c===void 0)throw new RangeError(`Unmatched month ${p} in Chinese year ${a}`)}else if(p===void 0){const y=this.getMonthList(a,t),g=dw(y),x=g.length;r==="reject"?(js(c,1,x),js(h,1,this.maximumMonthLength())):(c=Xa(c,1,x),h=Xa(h,1,this.maximumMonthLength()));const v=g.find(([,_])=>_.monthIndex===c);if(v===void 0)throw new RangeError(`Invalid month ${c} in Chinese year ${a}`);p=zc(v[0].replace("bis",""),v[0].indexOf("bis")!==-1)}else{const y=this.getMonthList(a,t);let g=p.replace("L","bis").slice(1);g[0]==="0"&&(g=g.slice(1));const x=y[g];if(!x)throw new RangeError(`Unmatched monthCode ${p} in Chinese year ${a}`);if(c!==x.monthIndex)throw new RangeError(`monthCode ${p} doesn't correspond to month ${c} in Chinese year ${a}`)}return{...e,year:a,eraYear:m,month:c,monthCode:p,day:h}}}class iz extends KM{constructor(){super(...arguments),this.id="chinese"}}class rz extends KM{constructor(){super(...arguments),this.id="dangi"}}const nz={helper:void 0,dateFromFields(i,e,t){const r=Vn(e),n=new Cn,a=ar(i,["day","era","eraYear","month","monthCode","year"],["day"]),{year:c,month:s,day:h}=this.helper.calendarToIsoDate(a,r,n),p=rl(c,s,h,t);return n.setObject(p),p},yearMonthFromFields(i,e,t){const r=Vn(e),n=new Cn,a=ar(i,["era","eraYear","month","monthCode","year"],[]),{year:c,month:s,day:h}=this.helper.calendarToIsoDate({...a,day:1},r,n),p=rg(c,s,t,h);return n.setObject(p),p},monthDayFromFields(i,e,t){const r=Vn(e),n=new Cn,a=ar(i,["day","era","eraYear","month","monthCode","year"],["day"]),{year:c,month:s,day:h}=this.helper.monthDayFromFields(a,r,n),p=ig(s,h,t,c);return n.setObject(p),p},fields(i){let e=i;return nv.call(e,"year")&&(e=[...e,"era","eraYear"]),e},mergeFields(i,e){const t={...i},r={...e},{month:n,monthCode:a,year:c,era:s,eraYear:h,...p}=t,{month:m,monthCode:y,year:g,era:x,eraYear:v}=r;return m===void 0&&y===void 0&&(p.month=n,p.monthCode=a),g===void 0&&x===void 0&&v===void 0&&(p.year=c),{...p,...r}},dateAdd(i,e,t,r,n,a,c){const s=Cn.getCacheForObject(i),h=this.helper.temporalToCalendarDate(i,s),p=this.helper.addCalendar(h,{years:e,months:t,weeks:r,days:n},a,s),m=this.helper.calendarToIsoDate(p,"constrain",s),{year:y,month:g,day:x}=m,v=rl(y,g,x,c);return new Cn(s).setObject(v),v},dateUntil(i,e,t){const r=Cn.getCacheForObject(i),n=Cn.getCacheForObject(e),a=this.helper.temporalToCalendarDate(i,r),c=this.helper.temporalToCalendarDate(e,n);return this.helper.untilCalendar(a,c,t,r)},year(i){const e=Cn.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).year},month(i){const e=Cn.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).month},day(i){const e=Cn.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).day},era(i){if(!this.helper.hasEra)return;const e=Cn.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).era},eraYear(i){if(!this.helper.hasEra)return;const e=Cn.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).eraYear},monthCode(i){const e=Cn.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).monthCode},dayOfWeek:i=>Dn.iso8601.dayOfWeek(i),dayOfYear(i){const e=Cn.getCacheForObject(i),t=this.helper.isoToCalendarDate(i,e),r=this.helper.startOfCalendarYear(t);return this.helper.calendarDaysUntil(r,t,e)+1},weekOfYear:i=>Dn.iso8601.weekOfYear(i),daysInWeek:i=>Dn.iso8601.daysInWeek(i),daysInMonth(i){const e=Cn.getCacheForObject(i),t=this.helper.temporalToCalendarDate(i,e),r=this.helper.maximumMonthLength(t);if(r===this.helper.minimumMonthLength(t))return r;const n=this.helper.startOfCalendarMonth(t),a=this.helper.addMonthsCalendar(n,1,"constrain",e);return this.helper.calendarDaysUntil(n,a,e)},daysInYear(i){let e=i;vs(e,oi)||(e=Yr(e));const t=Cn.getCacheForObject(e),r=this.helper.temporalToCalendarDate(e,t),n=this.helper.startOfCalendarYear(r),a=this.helper.addCalendar(n,{years:1},"constrain",t);return this.helper.calendarDaysUntil(n,a,t)},monthsInYear(i){const e=Cn.getCacheForObject(i),t=this.helper.temporalToCalendarDate(i,e);return this.helper.monthsInYear(t,e)},inLeapYear(i){let e=i;vs(e,oi)||(e=Yr(e));const t=Cn.getCacheForObject(e),r=this.helper.temporalToCalendarDate(e,t);return this.helper.inLeapYear(r,t)}};for(const i of[$4,W4,K4,Z4,X4,iz,rz,Q4,Y4,J4,ez,tz,ZM,U4,V4,G4,H4,q4]){const e=new i;Dn[e.id]={...nz,helper:e}}class Og{constructor(e,t,r,n=Gn()){const a=Zr(e),c=Zr(t),s=Zr(r),h=Is(n);if(arguments.length<3)throw new RangeError("missing argument: isoYear, isoMonth and isoDay are required");fM(this,a,c,s,h)}get calendar(){if(!yr(this))throw new TypeError("invalid receiver");return Q(this,At)}get era(){if(!yr(this))throw new TypeError("invalid receiver");return Yv(Q(this,At),this)}get eraYear(){if(!yr(this))throw new TypeError("invalid receiver");return Zv(Q(this,At),this)}get year(){if(!yr(this))throw new TypeError("invalid receiver");return Hv(Q(this,At),this)}get month(){if(!yr(this))throw new TypeError("invalid receiver");return qv(Q(this,At),this)}get monthCode(){if(!yr(this))throw new TypeError("invalid receiver");return Dg(Q(this,At),this)}get day(){if(!yr(this))throw new TypeError("invalid receiver");return Wv(Q(this,At),this)}get dayOfWeek(){if(!yr(this))throw new TypeError("invalid receiver");return Y_(Q(this,At),this)}get dayOfYear(){if(!yr(this))throw new TypeError("invalid receiver");return Z_(Q(this,At),this)}get weekOfYear(){if(!yr(this))throw new TypeError("invalid receiver");return X_(Q(this,At),this)}get daysInWeek(){if(!yr(this))throw new TypeError("invalid receiver");return K_(Q(this,At),this)}get daysInMonth(){if(!yr(this))throw new TypeError("invalid receiver");return Rg(Q(this,At),this)}get daysInYear(){if(!yr(this))throw new TypeError("invalid receiver");return Xv(Q(this,At),this)}get monthsInYear(){if(!yr(this))throw new TypeError("invalid receiver");return Kv(Q(this,At),this)}get inLeapYear(){if(!yr(this))throw new TypeError("invalid receiver");return Qv(Q(this,At),this)}with(e,t){if(!yr(this))throw new TypeError("invalid receiver");if(!an(e))throw new TypeError("invalid argument");Hp(e);const r=Q(this,At),n=Xn(r,["day","month","monthCode","year"]),a=ar(e,n,"partial");if(!a)throw new TypeError("invalid date-like");let c=ar(this,n,[]);return c=Qd(r,c,a),c=ar(c,n,[]),Lu(r,c,lr(t))}withCalendar(e){if(!yr(this))throw new TypeError("invalid receiver");const t=Is(e);return new Og(Q(this,oi),Q(this,di),Q(this,pi),t)}add(e,t){if(!yr(this))throw new TypeError("invalid receiver");const r=vp(e),n=lr(t);return fa(Q(this,At),this,r,n)}subtract(e,t){if(!yr(this))throw new TypeError("invalid receiver");const r=kM(vp(e)),n=lr(t);return fa(Q(this,At),this,r,n)}until(e,t){if(!yr(this))throw new TypeError("invalid receiver");return SS("until",this,e,t)}since(e,t){if(!yr(this))throw new TypeError("invalid receiver");return SS("since",this,e,t)}equals(e){if(!yr(this))throw new TypeError("invalid receiver");const t=Yr(e);for(const r of[oi,di,pi])if(Q(this,r)!==Q(t,r))return!1;return Lg(Q(this,At),Q(t,At))}toString(e){if(!yr(this))throw new TypeError("invalid receiver");return yS(this,Ag(lr(e)))}toJSON(){if(!yr(this))throw new TypeError("invalid receiver");return yS(this)}toLocaleString(e,t){if(!yr(this))throw new TypeError("invalid receiver");return new lh(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDate")}toPlainDateTime(e){if(!yr(this))throw new TypeError("invalid receiver");const t=Q(this,oi),r=Q(this,di),n=Q(this,pi),a=Q(this,At);if(e===void 0)return Za(t,r,n,0,0,0,0,0,0,a);const c=Dc(e);return Za(t,r,n,Q(c,Zi),Q(c,Xi),Q(c,Ki),Q(c,Qi),Q(c,Ji),Q(c,er),a)}toZonedDateTime(e){if(!yr(this))throw new TypeError("invalid receiver");let t,r;if(an(e)){const v=e.timeZone;v===void 0?t=ya(e):(t=ya(v),r=e.plainTime)}else t=ya(e);const n=Q(this,oi),a=Q(this,di),c=Q(this,pi),s=Q(this,At);let h=0,p=0,m=0,y=0,g=0,x=0;return r!==void 0&&(r=Dc(r),h=Q(r,Zi),p=Q(r,Xi),m=Q(r,Ki),y=Q(r,Qi),g=Q(r,Ji),x=Q(r,er)),zs(Q(ma(t,Za(n,a,c,h,p,m,y,g,x,s),"compatible"),zi),t,s)}toPlainYearMonth(){if(!yr(this))throw new TypeError("invalid receiver");const e=Q(this,At);return Jd(e,ar(this,Xn(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!yr(this))throw new TypeError("invalid receiver");const e=Q(this,At);return Ip(e,ar(this,Xn(e,["day","monthCode"]),[]))}getISOFields(){if(!yr(this))throw new TypeError("invalid receiver");return{calendar:Q(this,At),isoDay:Q(this,pi),isoMonth:Q(this,di),isoYear:Q(this,oi)}}static from(e,t){const r=lr(t);return yr(e)?(Vn(r),rl(Q(e,oi),Q(e,di),Q(e,pi),Q(e,At))):Yr(e,r)}static compare(e,t){const r=Yr(e),n=Yr(t);return Su(Q(r,oi),Q(r,di),Q(r,pi),Q(n,oi),Q(n,di),Q(n,pi))}}ec(Og,"Temporal.PlainDate");class jg{constructor(e,t,r,n=0,a=0,c=0,s=0,h=0,p=0,m=Gn()){const y=Zr(e),g=Zr(t),x=Zr(r),v=Zr(n),_=Zr(a),C=Zr(c),k=Zr(s),w=Zr(h),E=Zr(p),A=Is(m);if(arguments.length<3)throw new RangeError("missing argument: isoYear, isoMonth and isoDay are required");mM(this,y,g,x,v,_,C,k,w,E,A)}get calendar(){if(!ir(this))throw new TypeError("invalid receiver");return Q(this,At)}get year(){if(!ir(this))throw new TypeError("invalid receiver");return Hv(Q(this,At),this)}get month(){if(!ir(this))throw new TypeError("invalid receiver");return qv(Q(this,At),this)}get monthCode(){if(!ir(this))throw new TypeError("invalid receiver");return Dg(Q(this,At),this)}get day(){if(!ir(this))throw new TypeError("invalid receiver");return Wv(Q(this,At),this)}get hour(){if(!ir(this))throw new TypeError("invalid receiver");return Q(this,Zi)}get minute(){if(!ir(this))throw new TypeError("invalid receiver");return Q(this,Xi)}get second(){if(!ir(this))throw new TypeError("invalid receiver");return Q(this,Ki)}get millisecond(){if(!ir(this))throw new TypeError("invalid receiver");return Q(this,Qi)}get microsecond(){if(!ir(this))throw new TypeError("invalid receiver");return Q(this,Ji)}get nanosecond(){if(!ir(this))throw new TypeError("invalid receiver");return Q(this,er)}get era(){if(!ir(this))throw new TypeError("invalid receiver");return Yv(Q(this,At),this)}get eraYear(){if(!ir(this))throw new TypeError("invalid receiver");return Zv(Q(this,At),this)}get dayOfWeek(){if(!ir(this))throw new TypeError("invalid receiver");return Y_(Q(this,At),this)}get dayOfYear(){if(!ir(this))throw new TypeError("invalid receiver");return Z_(Q(this,At),this)}get weekOfYear(){if(!ir(this))throw new TypeError("invalid receiver");return X_(Q(this,At),this)}get daysInWeek(){if(!ir(this))throw new TypeError("invalid receiver");return K_(Q(this,At),this)}get daysInYear(){if(!ir(this))throw new TypeError("invalid receiver");return Xv(Q(this,At),this)}get daysInMonth(){if(!ir(this))throw new TypeError("invalid receiver");return Rg(Q(this,At),this)}get monthsInYear(){if(!ir(this))throw new TypeError("invalid receiver");return Kv(Q(this,At),this)}get inLeapYear(){if(!ir(this))throw new TypeError("invalid receiver");return Qv(Q(this,At),this)}with(e,t){if(!ir(this))throw new TypeError("invalid receiver");if(!an(e))throw new TypeError("invalid argument");Hp(e);const r=lr(t),n=Q(this,At),a=Xn(n,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),c=ar(e,a,"partial");if(!c)throw new TypeError("invalid date-time-like");let s=ar(this,a,[]);s=Qd(n,s,c),s=ar(s,a,[]);const{year:h,month:p,day:m,hour:y,minute:g,second:x,millisecond:v,microsecond:_,nanosecond:C}=Pg(n,s,r);return Za(h,p,m,y,g,x,v,_,C,n)}withPlainTime(e){if(!ir(this))throw new TypeError("invalid receiver");const t=Q(this,oi),r=Q(this,di),n=Q(this,pi),a=Q(this,At);if(e===void 0)return Za(t,r,n,0,0,0,0,0,0,a);const c=Dc(e);return Za(t,r,n,Q(c,Zi),Q(c,Xi),Q(c,Ki),Q(c,Qi),Q(c,Ji),Q(c,er),a)}withPlainDate(e){if(!ir(this))throw new TypeError("invalid receiver");const t=Yr(e),r=Q(t,oi),n=Q(t,di),a=Q(t,pi);let c=Q(t,At);const s=Q(this,Zi),h=Q(this,Xi),p=Q(this,Ki),m=Q(this,Qi),y=Q(this,Ji),g=Q(this,er);return c=xM(Q(this,At),c),Za(r,n,a,s,h,p,m,y,g,c)}withCalendar(e){if(!ir(this))throw new TypeError("invalid receiver");const t=Is(e);return new jg(Q(this,oi),Q(this,di),Q(this,pi),Q(this,Zi),Q(this,Xi),Q(this,Ki),Q(this,Qi),Q(this,Ji),Q(this,er),t)}add(e,t){if(!ir(this))throw new TypeError("invalid receiver");return DS("add",this,e,t)}subtract(e,t){if(!ir(this))throw new TypeError("invalid receiver");return DS("subtract",this,e,t)}until(e,t){if(!ir(this))throw new TypeError("invalid receiver");return ES("until",this,e,t)}since(e,t){if(!ir(this))throw new TypeError("invalid receiver");return ES("since",this,e,t)}round(e){if(!ir(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?Rp("smallestUnit",e):lr(e),r=gs(t,"smallestUnit","time",Kd,["day"]),n=Ra(t,"halfExpand"),a=$c(t,{day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[r],!1);let c=Q(this,oi),s=Q(this,di),h=Q(this,pi),p=Q(this,Zi),m=Q(this,Xi),y=Q(this,Ki),g=Q(this,Qi),x=Q(this,Ji),v=Q(this,er);return{year:c,month:s,day:h,hour:p,minute:m,second:y,millisecond:g,microsecond:x,nanosecond:v}=o2(c,s,h,p,m,y,g,x,v,a,r,n),Za(c,s,h,p,m,y,g,x,v,Q(this,At))}equals(e){if(!ir(this))throw new TypeError("invalid receiver");const t=Od(e);for(const r of[oi,di,pi,Zi,Xi,Ki,Qi,Ji,er])if(Q(this,r)!==Q(t,r))return!1;return Lg(Q(this,At),Q(t,At))}toString(e){if(!ir(this))throw new TypeError("invalid receiver");const t=lr(e),{precision:r,unit:n,increment:a}=Ig(t);return vS(this,r,Ag(t),{unit:n,increment:a,roundingMode:Ra(t,"trunc")})}toJSON(){if(!ir(this))throw new TypeError("invalid receiver");return vS(this,"auto")}toLocaleString(e,t){if(!ir(this))throw new TypeError("invalid receiver");return new lh(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDateTime")}toZonedDateTime(e,t){if(!ir(this))throw new TypeError("invalid receiver");const r=ya(e);return zs(Q(ma(r,this,tg(lr(t))),zi),r,Q(this,At))}toPlainDate(){if(!ir(this))throw new TypeError("invalid receiver");return Pp(this)}toPlainYearMonth(){if(!ir(this))throw new TypeError("invalid receiver");const e=Q(this,At);return Jd(e,ar(this,Xn(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!ir(this))throw new TypeError("invalid receiver");const e=Q(this,At);return Ip(e,ar(this,Xn(e,["day","monthCode"]),[]))}toPlainTime(){if(!ir(this))throw new TypeError("invalid receiver");return Q_(this)}getISOFields(){if(!ir(this))throw new TypeError("invalid receiver");return{calendar:Q(this,At),isoDay:Q(this,pi),isoHour:Q(this,Zi),isoMicrosecond:Q(this,Ji),isoMillisecond:Q(this,Qi),isoMinute:Q(this,Xi),isoMonth:Q(this,di),isoNanosecond:Q(this,er),isoSecond:Q(this,Ki),isoYear:Q(this,oi)}}static from(e,t){const r=lr(t);return ir(e)?(Vn(r),Za(Q(e,oi),Q(e,di),Q(e,pi),Q(e,Zi),Q(e,Xi),Q(e,Ki),Q(e,Qi),Q(e,Ji),Q(e,er),Q(e,At))):Od(e,r)}static compare(e,t){const r=Od(e),n=Od(t);for(const a of[oi,di,pi,Zi,Xi,Ki,Qi,Ji,er]){const c=Q(r,a),s=Q(n,a);if(c!==s)return Gd(c-s)}return 0}}ec(jg,"Temporal.PlainDateTime");let p2=class km{constructor(e=0,t=0,r=0,n=0,a=0,c=0,s=0,h=0,p=0,m=0){const y=ds(e),g=ds(t),x=ds(r),v=ds(n),_=ds(a),C=ds(c),k=ds(s),w=ds(h),E=ds(p),A=ds(m);ix(y,g,x,v,_,C,k,w,E,A),tc(this),rr(this,aa,y),rr(this,Cs,g),rr(this,Aa,x),rr(this,oa,v),rr(this,la,_),rr(this,ca,C),rr(this,ua,k),rr(this,da,w),rr(this,ha,E),rr(this,pa,A)}get years(){if(!In(this))throw new TypeError("invalid receiver");return Q(this,aa)}get months(){if(!In(this))throw new TypeError("invalid receiver");return Q(this,Cs)}get weeks(){if(!In(this))throw new TypeError("invalid receiver");return Q(this,Aa)}get days(){if(!In(this))throw new TypeError("invalid receiver");return Q(this,oa)}get hours(){if(!In(this))throw new TypeError("invalid receiver");return Q(this,la)}get minutes(){if(!In(this))throw new TypeError("invalid receiver");return Q(this,ca)}get seconds(){if(!In(this))throw new TypeError("invalid receiver");return Q(this,ua)}get milliseconds(){if(!In(this))throw new TypeError("invalid receiver");return Q(this,da)}get microseconds(){if(!In(this))throw new TypeError("invalid receiver");return Q(this,ha)}get nanoseconds(){if(!In(this))throw new TypeError("invalid receiver");return Q(this,pa)}get sign(){if(!In(this))throw new TypeError("invalid receiver");return Hl(Q(this,aa),Q(this,Cs),Q(this,Aa),Q(this,oa),Q(this,la),Q(this,ca),Q(this,ua),Q(this,da),Q(this,ha),Q(this,pa))}get blank(){if(!In(this))throw new TypeError("invalid receiver");return Hl(Q(this,aa),Q(this,Cs),Q(this,Aa),Q(this,oa),Q(this,la),Q(this,ca),Q(this,ua),Q(this,da),Q(this,ha),Q(this,pa))===0}with(e){if(!In(this))throw new TypeError("invalid receiver");const t=ar(e,["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"],"partial");if(!t)throw new TypeError("invalid duration-like");const{years:r=Q(this,aa),months:n=Q(this,Cs),weeks:a=Q(this,Aa),days:c=Q(this,oa),hours:s=Q(this,la),minutes:h=Q(this,ca),seconds:p=Q(this,ua),milliseconds:m=Q(this,da),microseconds:y=Q(this,ha),nanoseconds:g=Q(this,pa)}=t;return new km(r,n,a,c,s,h,p,m,y,g)}negated(){if(!In(this))throw new TypeError("invalid receiver");return kM(this)}abs(){if(!In(this))throw new TypeError("invalid receiver");return new km(Math.abs(Q(this,aa)),Math.abs(Q(this,Cs)),Math.abs(Q(this,Aa)),Math.abs(Q(this,oa)),Math.abs(Q(this,la)),Math.abs(Q(this,ca)),Math.abs(Q(this,ua)),Math.abs(Q(this,da)),Math.abs(Q(this,ha)),Math.abs(Q(this,pa)))}add(e,t){if(!In(this))throw new TypeError("invalid receiver");return IS("add",this,e,t)}subtract(e,t){if(!In(this))throw new TypeError("invalid receiver");return IS("subtract",this,e,t)}round(e){if(!In(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let t=Q(this,aa),r=Q(this,Cs),n=Q(this,Aa),a=Q(this,oa),c=Q(this,la),s=Q(this,ca),h=Q(this,ua),p=Q(this,da),m=Q(this,ha),y=Q(this,pa),g=nw(t,r,n,a,c,s,h,p,m,y);const x=typeof e=="string"?Rp("smallestUnit",e):lr(e);let v=gs(x,"smallestUnit","datetime",void 0),_=!0;v||(_=!1,v="nanosecond"),g=Qa(g,v);let C=gs(x,"largestUnit","datetime",void 0,["auto"]),k=!0;if(C||(k=!1,C=g),C==="auto"&&(C=g),!_&&!k)throw new RangeError("at least one of smallestUnit or largestUnit is required");if(Qa(C,v)!==C)throw new RangeError(`largestUnit ${C} cannot be smaller than smallestUnit ${v}`);const w=Ra(x,"halfExpand"),E=W_(x,v);let A=S0(x);return{years:t,months:r,weeks:n,days:a}=Xy(t,r,n,a,C,A),{years:t,months:r,weeks:n,days:a,hours:c,minutes:s,seconds:h,milliseconds:p,microseconds:m,nanoseconds:y}=zu(t,r,n,a,c,s,h,p,m,y,E,v,w,A),{years:t,months:r,weeks:n,days:a,hours:c,minutes:s,seconds:h,milliseconds:p,microseconds:m,nanoseconds:y}=NM(t,r,n,a,c,s,h,p,m,y,E,v,w,A),{years:t,months:r,weeks:n,days:a}=function(S,N,Y,Z,K,U){let $=S,B=N,R=Y,L=Z;const G=Oi("%Temporal.Duration%"),F=Hl($,B,R,L,0,0,0,0,0,0);if(F===0)return{years:$,months:B,weeks:R,days:L};let j,q;U&&(q=Yr(U),j=Q(q,At));const W=new G(F),se=new G(0,F),fe=new G(0,0,F);switch(K){case"year":{if(!j)throw new RangeError("a starting point is required for years balancing");let ee,oe,Ce;for({relativeTo:ee,days:oe}=Xs(j,q,W);Er(L)>=Er(oe);)L-=oe,$+=F,q=ee,{relativeTo:ee,days:oe}=Xs(j,q,W);for({relativeTo:ee,days:Ce}=Xs(j,q,se);Er(L)>=Er(Ce);)L-=Ce,B+=F,q=ee,{relativeTo:ee,days:Ce}=Xs(j,q,se);const ge=j.dateAdd;ee=fa(j,q,W,void 0,ge);const Ee=j.dateUntil,J=Bs(null);J.largestUnit="month";let ie=Ru(j,q,ee,J,Ee),le=Q(ie,Cs);for(;Er(B)>=Er(le);){B-=le,$+=F,q=ee,ee=fa(j,q,W,void 0,ge);const be=Bs(null);be.largestUnit="month",ie=Ru(j,q,ee,be,Ee),le=Q(ie,Cs)}break}case"month":{if(!j)throw new RangeError("a starting point is required for months balancing");let ee,oe;for({relativeTo:ee,days:oe}=Xs(j,q,se);Er(L)>=Er(oe);)L-=oe,B+=F,q=ee,{relativeTo:ee,days:oe}=Xs(j,q,se);break}case"week":{if(!j)throw new RangeError("a starting point is required for weeks balancing");let ee,oe;for({relativeTo:ee,days:oe}=Xs(j,q,fe);Er(L)>=Er(oe);)L-=oe,R+=F,q=ee,{relativeTo:ee,days:oe}=Xs(j,q,fe);break}}return{years:$,months:B,weeks:R,days:L}}(t,r,n,a,C,A),bi(A)&&(A=lw(A,t,r,n,0)),{days:a,hours:c,minutes:s,seconds:h,milliseconds:p,microseconds:m,nanoseconds:y}=Ka(a,c,s,h,p,m,y,C,A),new km(t,r,n,a,c,s,h,p,m,y)}total(e){if(!In(this))throw new TypeError("invalid receiver");let t=Q(this,aa),r=Q(this,Cs),n=Q(this,Aa),a=Q(this,oa),c=Q(this,la),s=Q(this,ca),h=Q(this,ua),p=Q(this,da),m=Q(this,ha),y=Q(this,pa);if(e===void 0)throw new TypeError("options argument is required");const g=typeof e=="string"?Rp("unit",e):lr(e),x=gs(g,"unit","datetime",Kd),v=S0(g);let _;({years:t,months:r,weeks:n,days:a}=Xy(t,r,n,a,x,v)),bi(v)&&(_=lw(v,t,r,n,0)),{days:a,hours:c,minutes:s,seconds:h,milliseconds:p,microseconds:m,nanoseconds:y}=Ka(a,c,s,h,p,m,y,x,_);const{total:C}=zu(t,r,n,a,c,s,h,p,m,y,1,x,"trunc",v);return C}toString(e){if(!In(this))throw new TypeError("invalid receiver");const t=lr(e),{precision:r,unit:n,increment:a}=Ig(t);if(r==="minute")throw new RangeError('smallestUnit must not be "minute"');return Ob(this,r,{unit:n,increment:a,roundingMode:Ra(t,"trunc")})}toJSON(){if(!In(this))throw new TypeError("invalid receiver");return Ob(this)}toLocaleString(e,t){if(!In(this))throw new TypeError("invalid receiver");return typeof Intl<"u"&&Intl.DurationFormat!==void 0?new Intl.DurationFormat(e,t).format(this):(console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),Ob(this))}valueOf(){throw new TypeError("use compare() to compare Temporal.Duration")}static from(e){return In(e)?new km(Q(e,aa),Q(e,Cs),Q(e,Aa),Q(e,oa),Q(e,la),Q(e,ca),Q(e,ua),Q(e,da),Q(e,ha),Q(e,pa)):vp(e)}static compare(e,t,r){const n=vp(e),a=vp(t),c=S0(lr(r)),s=Q(n,aa),h=Q(n,Cs),p=Q(n,Aa);let m=Q(n,oa);const y=Q(n,la),g=Q(n,ca),x=Q(n,ua),v=Q(n,da),_=Q(n,ha);let C=Q(n,pa);const k=Q(a,aa),w=Q(a,Cs),E=Q(a,Aa);let A=Q(a,oa);const M=Q(a,la),S=Q(a,ca),N=Q(a,ua),Y=Q(a,da),Z=Q(a,ha);let K=Q(a,pa);const U=CS(c,s,h,p,m),$=CS(c,k,w,E,A);s===0&&k===0&&h===0&&w===0&&p===0&&E===0||({days:m}=Xy(s,h,p,m,"day",c),{days:A}=Xy(k,w,E,A,"day",c));const B=Dp(m,y,g,x,v,_,C,U),R=Dp(A,M,S,N,Y,Z,K,$);return Gd(he.toNumber(he.subtract(B,R)))}};ec(p2,"Temporal.Duration");const sz=Object.create;class f2{constructor(e,t,r=Gn(),n=1972){const a=Zr(e),c=Zr(t),s=Is(r),h=Zr(n);if(arguments.length<2)throw new RangeError("missing argument: isoMonth and isoDay are required");gM(this,a,c,s,h)}get monthCode(){if(!Ts(this))throw new TypeError("invalid receiver");return Dg(Q(this,At),this)}get day(){if(!Ts(this))throw new TypeError("invalid receiver");return Wv(Q(this,At),this)}get calendar(){if(!Ts(this))throw new TypeError("invalid receiver");return Q(this,At)}with(e,t){if(!Ts(this))throw new TypeError("invalid receiver");if(!an(e))throw new TypeError("invalid argument");Hp(e);const r=Q(this,At),n=Xn(r,["day","month","monthCode","year"]),a=ar(e,n,"partial");if(!a)throw new TypeError("invalid month-day-like");let c=ar(this,n,[]);return c=Qd(r,c,a),c=ar(c,n,[]),Ip(r,c,lr(t))}equals(e){if(!Ts(this))throw new TypeError("invalid receiver");const t=mS(e);for(const r of[di,pi,oi])if(Q(this,r)!==Q(t,r))return!1;return Lg(Q(this,At),Q(t,At))}toString(e){if(!Ts(this))throw new TypeError("invalid receiver");return xS(this,Ag(lr(e)))}toJSON(){if(!Ts(this))throw new TypeError("invalid receiver");return xS(this)}toLocaleString(e,t){if(!Ts(this))throw new TypeError("invalid receiver");return new lh(e,t).format(this)}valueOf(){throw new TypeError("use equals() to compare Temporal.PlainMonthDay")}toPlainDate(e){if(!Ts(this))throw new TypeError("invalid receiver");if(!an(e))throw new TypeError("argument should be an object");const t=Q(this,At),r=Xn(t,["day","monthCode"]),n=ar(this,r,[]),a=Xn(t,["year"]);let c=Qd(t,n,ar(e,a,[]));c=ar(c,[...new Set([...r,...a])],[]);const s=sz(null);return s.overflow="reject",Lu(t,c,s)}getISOFields(){if(!Ts(this))throw new TypeError("invalid receiver");return{calendar:Q(this,At),isoDay:Q(this,pi),isoMonth:Q(this,di),isoYear:Q(this,oi)}}static from(e,t){const r=lr(t);return Ts(e)?(Vn(r),ig(Q(e,di),Q(e,pi),Q(e,At),Q(e,oi))):mS(e,r)}}ec(f2,"Temporal.PlainMonthDay");const m2=()=>new(Oi("%Temporal.Instant%"))(c2()),OS=(i,e=bu())=>{const t=ya(e),r=Is(i);return fo(t,m2(),r)},$b=(i=bu())=>{const e=ya(i),t=Gn();return fo(e,m2(),t)},jS=(i,e=bu())=>{const t=ya(e),r=Is(i);return zs(c2(),t,r)},bu=()=>function(){const e=new nM("en-us");return new(Oi("%Temporal.TimeZone%"))(dM(e.resolvedOptions().timeZone))}(),QM={instant:m2,plainDateTime:OS,plainDateTimeISO:$b,plainDate:(i,e=bu())=>Pp(OS(i,e)),plainDateISO:(i=bu())=>Pp($b(i)),plainTimeISO:(i=bu())=>Q_($b(i)),timeZone:bu,zonedDateTime:jS,zonedDateTimeISO:(i=bu())=>jS(Gn(),i),[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(QM,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});const az=Object.assign;function FS(i,e,t){let r=Q(i,Zi),n=Q(i,Xi),a=Q(i,Ki),c=Q(i,Qi),s=Q(i,Ji),h=Q(i,er);if(t){const{unit:p,increment:m,roundingMode:y}=t;({hour:r,minute:n,second:a,millisecond:c,microsecond:s,nanosecond:h}=l2(r,n,a,c,s,h,m,p,y))}return`${xn(r)}:${xn(n)}${Jv(a,c,s,h,e)}`}class qd{constructor(e=0,t=0,r=0,n=0,a=0,c=0){const s=Zr(e),h=Zr(t),p=Zr(r),m=Zr(n),y=Zr(a),g=Zr(c);tx(s,h,p,m,y,g),tc(this),rr(this,Zi,s),rr(this,Xi,h),rr(this,Ki,p),rr(this,Qi,m),rr(this,Ji,y),rr(this,er,g),rr(this,At,Gn())}get calendar(){if(!Pn(this))throw new TypeError("invalid receiver");return Q(this,At)}get hour(){if(!Pn(this))throw new TypeError("invalid receiver");return Q(this,Zi)}get minute(){if(!Pn(this))throw new TypeError("invalid receiver");return Q(this,Xi)}get second(){if(!Pn(this))throw new TypeError("invalid receiver");return Q(this,Ki)}get millisecond(){if(!Pn(this))throw new TypeError("invalid receiver");return Q(this,Qi)}get microsecond(){if(!Pn(this))throw new TypeError("invalid receiver");return Q(this,Ji)}get nanosecond(){if(!Pn(this))throw new TypeError("invalid receiver");return Q(this,er)}with(e,t){if(!Pn(this))throw new TypeError("invalid receiver");if(!an(e))throw new TypeError("invalid argument");Hp(e);const r=K0(e,"partial"),n=Vn(lr(t)),a=K0(this);let{hour:c,minute:s,second:h,millisecond:p,microsecond:m,nanosecond:y}=az(a,r);return{hour:c,minute:s,second:h,millisecond:p,microsecond:m,nanosecond:y}=Vv(c,s,h,p,m,y,n),new qd(c,s,h,p,m,y)}add(e){if(!Pn(this))throw new TypeError("invalid receiver");return RS("add",this,e)}subtract(e){if(!Pn(this))throw new TypeError("invalid receiver");return RS("subtract",this,e)}until(e,t){if(!Pn(this))throw new TypeError("invalid receiver");return kS("until",this,e,t)}since(e,t){if(!Pn(this))throw new TypeError("invalid receiver");return kS("since",this,e,t)}round(e){if(!Pn(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?Rp("smallestUnit",e):lr(e),r=gs(t,"smallestUnit","time",Kd),n=Ra(t,"halfExpand"),a=$c(t,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[r],!1);let c=Q(this,Zi),s=Q(this,Xi),h=Q(this,Ki),p=Q(this,Qi),m=Q(this,Ji),y=Q(this,er);return{hour:c,minute:s,second:h,millisecond:p,microsecond:m,nanosecond:y}=l2(c,s,h,p,m,y,a,r,n),new qd(c,s,h,p,m,y)}equals(e){if(!Pn(this))throw new TypeError("invalid receiver");const t=Dc(e);for(const r of[Zi,Xi,Ki,Qi,Ji,er])if(Q(this,r)!==Q(t,r))return!1;return!0}toString(e){if(!Pn(this))throw new TypeError("invalid receiver");const t=lr(e),{precision:r,unit:n,increment:a}=Ig(t);return FS(this,r,{unit:n,increment:a,roundingMode:Ra(t,"trunc")})}toJSON(){if(!Pn(this))throw new TypeError("invalid receiver");return FS(this,"auto")}toLocaleString(e,t){if(!Pn(this))throw new TypeError("invalid receiver");return new lh(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainTime")}toPlainDateTime(e){if(!Pn(this))throw new TypeError("invalid receiver");const t=Yr(e),r=Q(t,oi),n=Q(t,di),a=Q(t,pi),c=Q(t,At);return Za(r,n,a,Q(this,Zi),Q(this,Xi),Q(this,Ki),Q(this,Qi),Q(this,Ji),Q(this,er),c)}toZonedDateTime(e){if(!Pn(this))throw new TypeError("invalid receiver");if(!an(e))throw new TypeError("invalid argument");const t=e.plainDate;if(t===void 0)throw new TypeError("missing date property");const r=Yr(t),n=e.timeZone;if(n===void 0)throw new TypeError("missing timeZone property");const a=ya(n),c=Q(r,oi),s=Q(r,di),h=Q(r,pi),p=Q(r,At),m=Q(this,Zi),y=Q(this,Xi),g=Q(this,Ki),x=Q(this,Qi),v=Q(this,Ji),_=Q(this,er);return zs(Q(ma(a,new(Oi("%Temporal.PlainDateTime%"))(c,s,h,m,y,g,x,v,_,p),"compatible"),zi),a,p)}getISOFields(){if(!Pn(this))throw new TypeError("invalid receiver");return{calendar:Q(this,At),isoHour:Q(this,Zi),isoMicrosecond:Q(this,Ji),isoMillisecond:Q(this,Qi),isoMinute:Q(this,Xi),isoNanosecond:Q(this,er),isoSecond:Q(this,Ki)}}static from(e,t){const r=Vn(lr(t));return Pn(e)?new qd(Q(e,Zi),Q(e,Xi),Q(e,Ki),Q(e,Qi),Q(e,Ji),Q(e,er)):Dc(e,r)}static compare(e,t){const r=Dc(e),n=Dc(t);for(const a of[Zi,Xi,Ki,Qi,Ji,er]){const c=Q(r,a),s=Q(n,a);if(c!==s)return Gd(c-s)}return 0}}ec(qd,"Temporal.PlainTime");class g2{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: identifier is required");const t=J_(e);tc(this),rr(this,gu,t)}get id(){if(!Rl(this))throw new TypeError("invalid receiver");return Vi(this)}getOffsetNanosecondsFor(e){if(!Rl(this))throw new TypeError("invalid receiver");const t=zl(e),r=Q(this,gu);return Em(r)?eh(r):Ac(Q(t,zi),r)}getOffsetStringFor(e){if(!Rl(this))throw new TypeError("invalid receiver");return sw(this,zl(e))}getPlainDateTimeFor(e,t=Gn()){return fo(this,zl(e),Is(t))}getInstantFor(e,t){if(!Rl(this))throw new TypeError("invalid receiver");return ma(this,Od(e),tg(lr(t)))}getPossibleInstantsFor(e){if(!Rl(this))throw new TypeError("invalid receiver");const t=Od(e),r=Oi("%Temporal.Instant%"),n=Q(this,gu);if(Em(n)){const a=Nu(Q(t,oi),Q(t,di),Q(t,pi),Q(t,Zi),Q(t,Xi),Q(t,Ki),Q(t,Qi),Q(t,Ji),Q(t,er));if(a===null)throw new RangeError("DateTime outside of supported range");const c=eh(n);return[new r(he.subtract(a,he.BigInt(c)))]}return function(c,s,h,p,m,y,g,x,v,_){const C=Nu(s,h,p,m,y,g,x,v,_);if(C===null)throw new RangeError("DateTime outside of supported range");let k=he.subtract(C,Du);he.lessThan(k,Km)&&(k=C);let w=he.add(C,Du);he.greaterThan(w,Qm)&&(w=C);const E=Ac(k,c),A=Ac(w,c);return(E===A?[E]:[E,A]).map(M=>{const S=he.subtract(C,he.BigInt(M)),N=TM(S,c);if(s===N.year&&h===N.month&&p===N.day&&m===N.hour&&y===N.minute&&g===N.second&&x===N.millisecond&&v===N.microsecond&&_===N.nanosecond)return S}).filter(M=>M!==void 0)}(n,Q(t,oi),Q(t,di),Q(t,pi),Q(t,Zi),Q(t,Xi),Q(t,Ki),Q(t,Qi),Q(t,Ji),Q(t,er)).map(a=>new r(a))}getNextTransition(e){if(!Rl(this))throw new TypeError("invalid receiver");const t=zl(e),r=Q(this,gu);if(Em(r)||r==="UTC")return null;let n=Q(t,zi);const a=Oi("%Temporal.Instant%");return n=function(s,h){const p=he.add(s,oM),m=_S(SM(),p);let y=_S(aM,s);const g=Ac(y,h);let x=y,v=g;for(;g===v&&he.lessThan(he.BigInt(y),m);)x=he.add(y,lM),v=Ac(x,h),g===v&&(y=x);return g===v?null:jM(_=>Ac(_,h),y,x,g,v)}(n,r),n===null?null:new a(n)}getPreviousTransition(e){if(!Rl(this))throw new TypeError("invalid receiver");const t=zl(e),r=Q(this,gu);if(Em(r)||r==="UTC")return null;let n=Q(t,zi);const a=Oi("%Temporal.Instant%");return n=EM(n,r),n===null?null:new a(n)}toString(){if(!Rl(this))throw new TypeError("invalid receiver");return Vi(Q(this,gu))}toJSON(){if(!Rl(this))throw new TypeError("invalid receiver");return Vi(this)}static from(e){return ya(e)}}ec(g2,"Temporal.TimeZone");const oz=Object.create;class y2{constructor(e,t,r=Gn(),n=1){const a=Zr(e),c=Zr(t),s=Is(r),h=Zr(n);if(arguments.length<2)throw new RangeError("missing argument: isoYear and isoMonth are required");yM(this,a,c,s,h)}get year(){if(!Pr(this))throw new TypeError("invalid receiver");return Hv(Q(this,At),this)}get month(){if(!Pr(this))throw new TypeError("invalid receiver");return qv(Q(this,At),this)}get monthCode(){if(!Pr(this))throw new TypeError("invalid receiver");return Dg(Q(this,At),this)}get calendar(){if(!Pr(this))throw new TypeError("invalid receiver");return Q(this,At)}get era(){if(!Pr(this))throw new TypeError("invalid receiver");return Yv(Q(this,At),this)}get eraYear(){if(!Pr(this))throw new TypeError("invalid receiver");return Zv(Q(this,At),this)}get daysInMonth(){if(!Pr(this))throw new TypeError("invalid receiver");return Rg(Q(this,At),this)}get daysInYear(){if(!Pr(this))throw new TypeError("invalid receiver");return Xv(Q(this,At),this)}get monthsInYear(){if(!Pr(this))throw new TypeError("invalid receiver");return Kv(Q(this,At),this)}get inLeapYear(){if(!Pr(this))throw new TypeError("invalid receiver");return Qv(Q(this,At),this)}with(e,t){if(!Pr(this))throw new TypeError("invalid receiver");if(!an(e))throw new TypeError("invalid argument");Hp(e);const r=Q(this,At),n=Xn(r,["month","monthCode","year"]),a=ar(e,n,"partial");if(!a)throw new TypeError("invalid year-month-like");let c=ar(this,n,[]);return c=Qd(r,c,a),c=ar(c,n,[]),Jd(r,c,lr(t))}add(e,t){if(!Pr(this))throw new TypeError("invalid receiver");return LS("add",this,e,t)}subtract(e,t){if(!Pr(this))throw new TypeError("invalid receiver");return LS("subtract",this,e,t)}until(e,t){if(!Pr(this))throw new TypeError("invalid receiver");return MS("until",this,e,t)}since(e,t){if(!Pr(this))throw new TypeError("invalid receiver");return MS("since",this,e,t)}equals(e){if(!Pr(this))throw new TypeError("invalid receiver");const t=Tm(e);for(const r of[oi,di,pi])if(Q(this,r)!==Q(t,r))return!1;return Lg(Q(this,At),Q(t,At))}toString(e){if(!Pr(this))throw new TypeError("invalid receiver");return bS(this,Ag(lr(e)))}toJSON(){if(!Pr(this))throw new TypeError("invalid receiver");return bS(this)}toLocaleString(e,t){if(!Pr(this))throw new TypeError("invalid receiver");return new lh(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainYearMonth")}toPlainDate(e){if(!Pr(this))throw new TypeError("invalid receiver");if(!an(e))throw new TypeError("argument should be an object");const t=Q(this,At),r=Xn(t,["monthCode","year"]),n=ar(this,r,[]),a=Xn(t,["day"]);let c=Qd(t,n,ar(e,a,[]));c=ar(c,[...new Set([...r,...a])],[]);const s=oz(null);return s.overflow="reject",Lu(t,c,s)}getISOFields(){if(!Pr(this))throw new TypeError("invalid receiver");return{calendar:Q(this,At),isoDay:Q(this,pi),isoMonth:Q(this,di),isoYear:Q(this,oi)}}static from(e,t){const r=lr(t);return Pr(e)?(Vn(r),rg(Q(e,oi),Q(e,di),Q(e,At),Q(e,pi))):Tm(e,r)}static compare(e,t){const r=Tm(e),n=Tm(t);return Su(Q(r,oi),Q(r,di),Q(r,pi),Q(n,oi),Q(n,di),Q(n,pi))}}ec(y2,"Temporal.PlainYearMonth");class v2{constructor(e,t,r=Gn()){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");vM(this,zm(e),ya(t),Is(r))}get calendar(){if(!bi(this))throw new TypeError("invalid receiver");return Q(this,At)}get timeZone(){if(!bi(this))throw new TypeError("invalid receiver");return Q(this,jr)}get year(){if(!bi(this))throw new TypeError("invalid receiver");return Hv(Q(this,At),ln(this))}get month(){if(!bi(this))throw new TypeError("invalid receiver");return qv(Q(this,At),ln(this))}get monthCode(){if(!bi(this))throw new TypeError("invalid receiver");return Dg(Q(this,At),ln(this))}get day(){if(!bi(this))throw new TypeError("invalid receiver");return Wv(Q(this,At),ln(this))}get hour(){if(!bi(this))throw new TypeError("invalid receiver");return Q(ln(this),Zi)}get minute(){if(!bi(this))throw new TypeError("invalid receiver");return Q(ln(this),Xi)}get second(){if(!bi(this))throw new TypeError("invalid receiver");return Q(ln(this),Ki)}get millisecond(){if(!bi(this))throw new TypeError("invalid receiver");return Q(ln(this),Qi)}get microsecond(){if(!bi(this))throw new TypeError("invalid receiver");return Q(ln(this),Ji)}get nanosecond(){if(!bi(this))throw new TypeError("invalid receiver");return Q(ln(this),er)}get era(){if(!bi(this))throw new TypeError("invalid receiver");return Yv(Q(this,At),ln(this))}get eraYear(){if(!bi(this))throw new TypeError("invalid receiver");return Zv(Q(this,At),ln(this))}get epochSeconds(){if(!bi(this))throw new TypeError("invalid receiver");const e=Q(this,zi);return he.toNumber(he.divide(e,Lc))}get epochMilliseconds(){if(!bi(this))throw new TypeError("invalid receiver");const e=Q(this,zi);return he.toNumber(he.divide(e,Ro))}get epochMicroseconds(){if(!bi(this))throw new TypeError("invalid receiver");const e=Q(this,zi);return iv(he.divide(e,Fr))}get epochNanoseconds(){if(!bi(this))throw new TypeError("invalid receiver");return iv(Q(this,zi))}get dayOfWeek(){if(!bi(this))throw new TypeError("invalid receiver");return Y_(Q(this,At),ln(this))}get dayOfYear(){if(!bi(this))throw new TypeError("invalid receiver");return Z_(Q(this,At),ln(this))}get weekOfYear(){if(!bi(this))throw new TypeError("invalid receiver");return X_(Q(this,At),ln(this))}get hoursInDay(){if(!bi(this))throw new TypeError("invalid receiver");const e=ln(this),t=Oi("%Temporal.PlainDateTime%"),r=Q(e,oi),n=Q(e,di),a=Q(e,pi),c=new t(r,n,a,0,0,0,0,0,0),s=Vd(r,n,a,0,0,0,1,"reject"),h=new t(s.year,s.month,s.day,0,0,0,0,0,0),p=Q(this,jr),m=Q(ma(p,c,"compatible"),zi),y=Q(ma(p,h,"compatible"),zi);return he.toNumber(he.subtract(y,m))/36e11}get daysInWeek(){if(!bi(this))throw new TypeError("invalid receiver");return K_(Q(this,At),ln(this))}get daysInMonth(){if(!bi(this))throw new TypeError("invalid receiver");return Rg(Q(this,At),ln(this))}get daysInYear(){if(!bi(this))throw new TypeError("invalid receiver");return Xv(Q(this,At),ln(this))}get monthsInYear(){if(!bi(this))throw new TypeError("invalid receiver");return Kv(Q(this,At),ln(this))}get inLeapYear(){if(!bi(this))throw new TypeError("invalid receiver");return Qv(Q(this,At),ln(this))}get offset(){if(!bi(this))throw new TypeError("invalid receiver");return sw(Q(this,jr),Q(this,Qs))}get offsetNanoseconds(){if(!bi(this))throw new TypeError("invalid receiver");return gl(Q(this,jr),Q(this,Qs))}with(e,t){if(!bi(this))throw new TypeError("invalid receiver");if(!an(e))throw new TypeError("invalid zoned-date-time-like");Hp(e);const r=lr(t),n=tg(r),a=rw(r,"prefer"),c=Q(this,jr),s=Q(this,At),h=iw(Xn(s,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),"offset"),p=ar(e,h,"partial"),m=iw(h,"timeZone");let y=ar(this,m,["timeZone","offset"]);y=Qd(s,y,p),y=ar(y,m,["timeZone","offset"]);let{year:g,month:x,day:v,hour:_,minute:C,second:k,millisecond:w,microsecond:E,nanosecond:A}=Pg(s,y,r);return zs(Q0(g,x,v,_,C,k,w,E,A,"option",eh(y.offset),c,n,a,!1),Q(this,jr),s)}withPlainDate(e){if(!bi(this))throw new TypeError("invalid receiver");const t=Yr(e),r=Q(t,oi),n=Q(t,di),a=Q(t,pi);let c=Q(t,At);const s=ln(this),h=Q(s,Zi),p=Q(s,Xi),m=Q(s,Ki),y=Q(s,Qi),g=Q(s,Ji),x=Q(s,er);c=xM(Q(this,At),c);const v=Q(this,jr);return zs(Q(ma(v,new(Oi("%Temporal.PlainDateTime%"))(r,n,a,h,p,m,y,g,x,c),"compatible"),zi),v,c)}withPlainTime(e){if(!bi(this))throw new TypeError("invalid receiver");const t=Oi("%Temporal.PlainTime%"),r=e===void 0?new t:Dc(e),n=ln(this),a=Q(n,oi),c=Q(n,di),s=Q(n,pi),h=Q(this,At),p=Q(r,Zi),m=Q(r,Xi),y=Q(r,Ki),g=Q(r,Qi),x=Q(r,Ji),v=Q(r,er),_=Q(this,jr);return zs(Q(ma(_,new(Oi("%Temporal.PlainDateTime%"))(a,c,s,p,m,y,g,x,v,h),"compatible"),zi),_,h)}withTimeZone(e){if(!bi(this))throw new TypeError("invalid receiver");const t=ya(e);return zs(Q(this,zi),t,Q(this,At))}withCalendar(e){if(!bi(this))throw new TypeError("invalid receiver");const t=Is(e);return zs(Q(this,zi),Q(this,jr),t)}add(e,t){if(!bi(this))throw new TypeError("invalid receiver");return NS("add",this,e,t)}subtract(e,t){if(!bi(this))throw new TypeError("invalid receiver");return NS("subtract",this,e,t)}until(e,t){if(!bi(this))throw new TypeError("invalid receiver");return AS("until",this,e,t)}since(e,t){if(!bi(this))throw new TypeError("invalid receiver");return AS("since",this,e,t)}round(e){if(!bi(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?Rp("smallestUnit",e):lr(e),r=gs(t,"smallestUnit","time",Kd,["day"]),n=Ra(t,"halfExpand"),a=$c(t,{day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[r],!1),c=ln(this);let s=Q(c,oi),h=Q(c,di),p=Q(c,pi),m=Q(c,Zi),y=Q(c,Xi),g=Q(c,Ki),x=Q(c,Qi),v=Q(c,Ji),_=Q(c,er);const C=Oi("%Temporal.PlainDateTime%"),k=Q(this,jr),w=Q(this,At),E=ma(k,new C(Q(c,oi),Q(c,di),Q(c,pi),0,0,0,0,0,0),"compatible"),A=Lo(E,k,w,0,0,0,1,0,0,0,0,0,0),M=he.subtract(A,he.BigInt(Q(E,zi)));if(he.equal(M,$n))throw new RangeError("cannot round a ZonedDateTime in a calendar with zero-length days");return{year:s,month:h,day:p,hour:m,minute:y,second:g,millisecond:x,microsecond:v,nanosecond:_}=o2(s,h,p,m,y,g,x,v,_,a,r,n,he.toNumber(M)),zs(Q0(s,h,p,m,y,g,x,v,_,"option",gl(k,Q(this,Qs)),k,"compatible","prefer",!1),k,Q(this,At))}equals(e){if(!bi(this))throw new TypeError("invalid receiver");const t=Sm(e),r=Q(this,zi),n=Q(t,zi);return!!he.equal(he.BigInt(r),he.BigInt(n))&&!!bM(Q(this,jr),Q(t,jr))&&Lg(Q(this,At),Q(t,At))}toString(e){if(!bi(this))throw new TypeError("invalid receiver");const t=lr(e),{precision:r,unit:n,increment:a}=Ig(t),c=Ra(t,"trunc");return wS(this,r,Ag(t),function(h){return Ou(h,"timeZoneName",["auto","never"],"auto")}(t),function(h){return Ou(h,"offset",["auto","never"],"auto")}(t),{unit:n,increment:a,roundingMode:c})}toLocaleString(e,t){if(!bi(this))throw new TypeError("invalid receiver");return new lh(e,t).format(this)}toJSON(){if(!bi(this))throw new TypeError("invalid receiver");return wS(this,"auto")}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.ZonedDateTime")}startOfDay(){if(!bi(this))throw new TypeError("invalid receiver");const e=ln(this),t=Oi("%Temporal.PlainDateTime%"),r=Q(this,At),n=new t(Q(e,oi),Q(e,di),Q(e,pi),0,0,0,0,0,0,r),a=Q(this,jr);return zs(Q(ma(a,n,"compatible"),zi),a,r)}toInstant(){if(!bi(this))throw new TypeError("invalid receiver");return new(Oi("%Temporal.Instant%"))(Q(this,zi))}toPlainDate(){if(!bi(this))throw new TypeError("invalid receiver");return Pp(ln(this))}toPlainTime(){if(!bi(this))throw new TypeError("invalid receiver");return Q_(ln(this))}toPlainDateTime(){if(!bi(this))throw new TypeError("invalid receiver");return ln(this)}toPlainYearMonth(){if(!bi(this))throw new TypeError("invalid receiver");const e=Q(this,At);return Jd(e,ar(this,Xn(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!bi(this))throw new TypeError("invalid receiver");const e=Q(this,At);return Ip(e,ar(this,Xn(e,["day","monthCode"]),[]))}getISOFields(){if(!bi(this))throw new TypeError("invalid receiver");const e=ln(this),t=Q(this,jr);return{calendar:Q(this,At),isoDay:Q(e,pi),isoHour:Q(e,Zi),isoMicrosecond:Q(e,Ji),isoMillisecond:Q(e,Qi),isoMinute:Q(e,Xi),isoMonth:Q(e,di),isoNanosecond:Q(e,er),isoSecond:Q(e,Ki),isoYear:Q(e,oi),offset:sw(t,Q(this,Qs)),timeZone:t}}static from(e,t){const r=lr(t);return bi(e)?(Vn(r),tg(r),rw(r,"reject"),zs(Q(e,zi),Q(e,jr),Q(e,At))):Sm(e,r)}static compare(e,t){const r=Sm(e),n=Sm(t),a=Q(r,zi),c=Q(n,zi);return he.lessThan(he.BigInt(a),he.BigInt(c))?-1:he.greaterThan(he.BigInt(a),he.BigInt(c))?1:0}}function ln(i){return fo(Q(i,jr),Q(i,Qs),Q(i,At))}ec(v2,"Temporal.ZonedDateTime");var Zn=Object.freeze({__proto__:null,Instant:ul,Calendar:sv,PlainDate:Og,PlainDateTime:jg,Duration:p2,PlainMonthDay:f2,Now:QM,PlainTime:qd,TimeZone:g2,PlainYearMonth:y2,ZonedDateTime:v2});const lz=[ul,sv,Og,jg,p2,f2,qd,g2,y2,v2];for(const i of lz){const e=Object.getOwnPropertyDescriptor(i,"prototype");(e.configurable||e.enumerable||e.writable)&&(e.configurable=!1,e.enumerable=!1,e.writable=!1,Object.defineProperty(i,"prototype",e))}const cz=i=>Object.entries(CL[i]).reduce((e,t)=>{let[r,n]=t;return e[`${i}-${r}`]=n,e},{}),uz=i=>Object.entries(i).map(e=>{let[t,r]=e;return`--${t}: ${r};`}).join(`
`),JM=i=>{let{colors:e=!1,theme:t=!1,layers:r=!1,spacers:n=!1,elevations:a=!1}=i;const c={colors:e,theme:t,layers:r,spacers:n,elevations:a},s=Object.keys(c).filter(h=>c[h]).map(cz).map(uz).join(`
`);return de.createElement(yt,{id:"3443925957",dynamic:[s]},[`html{${s};}`])};JM.propTypes={colors:X.bool,elevations:X.bool,layers:X.bool,spacers:X.bool,theme:X.bool};class dz extends ak{constructor(e,t){super(),this.client=e,this.queries=[],this.result=[],this.observers=[],this.observersMap={},t&&this.setQueries(t)}onSubscribe(){this.listeners.size===1&&this.observers.forEach(e=>{e.subscribe(t=>{this.onUpdate(e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.observers.forEach(e=>{e.destroy()})}setQueries(e,t){this.queries=e,Zm.batch(()=>{const r=this.observers,n=this.findMatchingObservers(this.queries);n.forEach(p=>p.observer.setOptions(p.defaultedQueryOptions,t));const a=n.map(p=>p.observer),c=Object.fromEntries(a.map(p=>[p.options.queryHash,p])),s=a.map(p=>p.getCurrentResult()),h=a.some((p,m)=>p!==r[m]);r.length===a.length&&!h||(this.observers=a,this.observersMap=c,this.result=s,this.hasListeners()&&(JT(r,a).forEach(p=>{p.destroy()}),JT(a,r).forEach(p=>{p.subscribe(m=>{this.onUpdate(p,m)})}),this.notify()))})}getCurrentResult(){return this.result}getQueries(){return this.observers.map(e=>e.getCurrentQuery())}getObservers(){return this.observers}getOptimisticResult(e){return this.findMatchingObservers(e).map(t=>t.observer.getOptimisticResult(t.defaultedQueryOptions))}findMatchingObservers(e){const t=this.observers,r=new Map(t.map(x=>[x.options.queryHash,x])),n=e.map(x=>this.client.defaultQueryOptions(x)),a=n.flatMap(x=>{const v=r.get(x.queryHash);return v!=null?[{defaultedQueryOptions:x,observer:v}]:[]}),c=new Set(a.map(x=>x.defaultedQueryOptions.queryHash)),s=n.filter(x=>!c.has(x.queryHash)),h=new Set(a.map(x=>x.observer)),p=t.filter(x=>!h.has(x)),m=x=>{const v=this.client.defaultQueryOptions(x),_=this.observersMap[v.queryHash];return _??new iL(this.client,v)},y=s.map((x,v)=>{if(x.keepPreviousData){const _=p[v];if(_!==void 0)return{defaultedQueryOptions:x,observer:_}}return{defaultedQueryOptions:x,observer:m(x)}}),g=(x,v)=>n.indexOf(x.defaultedQueryOptions)-n.indexOf(v.defaultedQueryOptions);return a.concat(y).sort(g)}onUpdate(e,t){const r=this.observers.indexOf(e);r!==-1&&(this.result=tL(this.result,r,t),this.notify())}notify(){Zm.batch(()=>{this.listeners.forEach(({listener:e})=>{e(this.result)})})}}let hz=class extends ak{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const r=this.options;this.options=this.client.defaultMutationOptions(e),rL(r,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(t=this.currentMutation)==null||t.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const t={listeners:!0};e.type==="success"?t.onSuccess=!0:e.type==="error"&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:nL(),t=e.status==="loading",r={...e,isLoading:t,isPending:t,isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=r}notify(e){Zm.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var t,r,n,a;(t=(r=this.mutateOptions).onSuccess)==null||t.call(r,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(n=(a=this.mutateOptions).onSettled)==null||n.call(a,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var c,s,h,p;(c=(s=this.mutateOptions).onError)==null||c.call(s,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(h=(p=this.mutateOptions).onSettled)==null||h.call(p,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(({listener:m})=>{m(this.currentResult)})})}};function pz({queries:i,context:e}){const t=$s({context:e}),r=sL(),n=aL(),a=Ie.useMemo(()=>i.map(g=>{const x=t.defaultQueryOptions(g);return x._optimisticResults=r?"isRestoring":"optimistic",x}),[i,t,r]);a.forEach(g=>{oL(g),lL(g,n)}),cL(n);const[c]=Ie.useState(()=>new dz(t,a)),s=c.getOptimisticResult(a);ok(Ie.useCallback(g=>r?()=>{}:c.subscribe(Zm.batchCalls(g)),[c,r]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),Ie.useEffect(()=>{c.setQueries(a,{listeners:!1})},[a,c]);const p=s.some((g,x)=>eS(a[x],g,r))?s.flatMap((g,x)=>{const v=a[x],_=c.getObservers()[x];if(v&&_){if(eS(v,g,r))return tS(v,_,n);uL(g,r)&&tS(v,_,n)}return[]}):[];if(p.length>0)throw Promise.all(p);const m=c.getQueries(),y=s.find((g,x)=>{var v,_;return dL({result:g,errorResetBoundary:n,useErrorBoundary:(v=(_=a[x])==null?void 0:_.useErrorBoundary)!=null?v:!1,query:m[x]})});if(y!=null&&y.error)throw y.error;return s}function rc(i,e,t){const r=hL(i,e,t),n=$s({context:r.context}),[a]=Ie.useState(()=>new hz(n,r));Ie.useEffect(()=>{a.setOptions(r)},[a,r]);const c=ok(Ie.useCallback(h=>a.subscribe(Zm.batchCalls(h)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),s=Ie.useCallback((h,p)=>{a.mutate(h,p).catch(fz)},[a]);if(c.error&&pL(a.options.useErrorBoundary,[c.error]))throw c.error;return{...c,mutate:s,mutateAsync:c.mutate}}function fz(){}const mz=i=>{let{execute:e,variables:t,singular:r,immediate:n,onComplete:a,onError:c}=i;const[s]=lk(e),[h,p]=Ie.useState({called:!!n,loading:!!n}),m=Ie.useRef(t),y=Ie.useRef([]),g=Ie.useCallback(()=>{y.current.forEach(_=>_.abort()),y.current=[]},[]),x=Ie.useCallback(()=>{g(),p(_=>({called:_.called,loading:!1,error:new fL({type:"aborted",message:"Aborted"})}))},[g]),v=Ie.useCallback(function(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};p(w=>!w.called||!w.loading?{called:!0,loading:!0}:w),r&&g();const C=new AbortController;y.current.push(C),m.current={...m.current,..._};const k={variables:m.current,signal:C.signal,onComplete:a,onError:c};return s(k).then(w=>C.signal.aborted?new Promise(()=>{}):(p({called:!0,loading:!1,data:w}),w)).catch(w=>(C.signal.aborted||p({called:!0,loading:!1,error:w}),new Promise(()=>{})))},[g,a,c,r,s]);return Ie.useEffect(()=>(n&&v(),g),[]),{refetch:v,abort:x,...h}},gz={},eA=function(i){let{onComplete:e,onError:t,variables:r=gz,lazy:n=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=sh(),[c]=lk(i,{warn:!0,name:"mutation"}),s=Ie.useCallback(x=>a.mutate(c,x),[a,c]),{refetch:h,called:p,loading:m,error:y,data:g}=mz({execute:s,variables:r,singular:!1,immediate:!n,onComplete:e,onError:t});return[h,{engine:a,called:p,loading:m,error:y,data:g}]},tA=i=>{let{children:e,open:t,dataTest:r}=i;return de.createElement("div",{"data-test":r,className:"jsx-3677374542 "+(Gi({open:t})||"")},e,de.createElement(yt,{id:"3677374542"},["div.jsx-3677374542{height:0;overflow:hidden;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".open.jsx-3677374542{height:auto;}"]))};tA.propTypes={children:X.node,dataTest:X.string,open:X.bool};const yz=()=>de.createElement("div",{className:"jsx-2503342345"},de.createElement(yt,{id:"2503342345"},["div.jsx-2503342345{width:24px;}"])),vz=()=>de.createElement("div",{className:"nodeArrow"},de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"jsx-4098137027"},de.createElement("path",{d:"M15.7041 10.3329L12.1495 14.3318C12.0699 14.4213 11.9301 14.4213 11.8505 14.3318L8.29589 10.3329C8.18124 10.2039 8.2728 10 8.44537 10H15.5546C15.7272 10 15.8188 10.2039 15.7041 10.3329Z",className:"jsx-4098137027"}),de.createElement(yt,{id:"4098137027"},["svg.jsx-4098137027{fill:inherit;height:24px;width:24px;vertical-align:middle;pointer-events:none;}"]))),iA=i=>{let{open:e,onOpen:t,onClose:r,dataTest:n}=i;const a=e?r:t;return de.createElement("div",{"data-test":n,onClick:c=>a&&a({open:!e},c),className:yt.dynamic([["375729792",[Me.grey400,Me.grey900,Me.grey100]]])+" "+(Gi({open:e})||"")},de.createElement("span",{className:yt.dynamic([["375729792",[Me.grey400,Me.grey900,Me.grey100]]])},de.createElement(vz,null)),de.createElement(yt,{id:"375729792",dynamic:[Me.grey400,Me.grey900,Me.grey100]},["div.__jsx-style-dynamic-selector{width:24px;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",`div.__jsx-style-dynamic-selector:after{background:${Me.grey400};height:calc(100% - 24px);inset-inline-start:12px;position:absolute;top:15px;width:1px;z-index:1;}`,".open.__jsx-style-dynamic-selector:after{content:'';}",`span.__jsx-style-dynamic-selector{display:block;position:relative;z-index:2;fill:${Me.grey900};}`,"div.__jsx-style-dynamic-selector .nodeArrow{vertical-align:top;-webkit-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg);-webkit-transition:-webkit-transform 0.1s ease-out;-webkit-transition:transform 0.1s ease-out;transition:transform 0.1s ease-out;}","div.__jsx-style-dynamic-selector .nodeArrow:dir(rtl){-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}",".open.__jsx-style-dynamic-selector .nodeArrow{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}",".open.__jsx-style-dynamic-selector .nodeArrow:dir(rtl){-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}",`div.__jsx-style-dynamic-selector:hover{cursor:pointer;border-radius:3px;background:${Me.grey100};}`,"div.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector:after{background:#bcc8d4;}"]))};iA.propTypes={dataTest:X.string.isRequired,open:X.bool,onClose:X.func,onOpen:X.func};const rA=i=>{let{open:e,className:t,component:r,children:n,icon:a,onOpen:c,onClose:s,dataTest:h="dhis2-uicore-node"}=i;const p=!!de.Children.toArray(n).filter(g=>g).length,m=!a&&p,y=!a&&!p;return de.createElement("div",{"data-test":h,className:"jsx-1433072554 "+(Gi("node",t)||"")},a&&de.createElement("div",{"data-test":`${h}-icon`,className:"jsx-1433072554"},a),m&&de.createElement(iA,{open:e,onOpen:c,onClose:s,dataTest:`${h}-toggle`}),y&&de.createElement(yz,null),de.createElement("div",{"data-test":`${h}-content`,className:"jsx-1433072554"},de.createElement("div",{"data-test":`${h}-label`,className:"jsx-1433072554"},r),de.createElement(tA,{open:e,dataTest:`${h}-leaves`},n)),de.createElement(yt,{id:"1433072554"},[".node.jsx-1433072554{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}"]))};rA.propTypes={children:X.node,className:X.string,component:X.element,dataTest:X.string,icon:X.node,open:X.bool,onClose:X.func,onOpen:X.func};const nA=(i,e)=>i.some(r=>e===r?!0:r.startsWith(`${e}/`)),xz=(i,e)=>i.replace(new RegExp(`^.*(/${e})`),"$1"),bz=i=>[...i].sort((e,t)=>e.displayName.localeCompare(t.displayName)),wz={"No children match filter":"","Could not load children":"تعذر تحميل الأبناء","Error: {{ ERRORMESSAGE }}":"خطأ: {{ ERRORMESSAGE }}"},_z={"No children match filter":"Filtru neodpovídají žádné podřízené","Could not load children":"Nelze načíst podřazené","Error: {{ ERRORMESSAGE }}":"Chyba: {{ ERRORMESSAGE }}"},Cz={"No children match filter":"No children match filter","Could not load children":"Could not load children","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},Tz={"No children match filter":"Sin filtros de coincidencia en los elementos inferiores","Could not load children":"No se pudo cargar los elementos inferiores","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},Sz={"No children match filter":"Ningún descendiente coincide con el filtro","Could not load children":"No se han podido cargar los descendientes","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},Ez={"No children match filter":"","Could not load children":"","Error: {{ ERRORMESSAGE }}":"Erreur : {{ ERRORMESSAGE }}"},kz={"No children match filter":"ບໍ່ພົບເດັກນ້ອຍທີ່ກົງກັບຕົວກອງ","Could not load children":"ບໍ່ສາມາດໂຫຼດເດັກນ້ອຍໄດ້","Error: {{ ERRORMESSAGE }}":"ຂໍ້ຜິດພາດ {{ ERRORMESSAGE }}"},Mz={"No children match filter":"Ingen underenheter matcher filter","Could not load children":"Kunne ikke laste underordnede enheter","Error: {{ ERRORMESSAGE }}":"Feil: {{ ERRORMESSAGE }}"},Az={"No children match filter":"Er komen geen kinderen overeen met het filter","Could not load children":"Kan kinderen niet laden","Error: {{ ERRORMESSAGE }}":"Fout: {{ ERRORMESSAGE }}"},Iz={"No children match filter":"Nenhum filho corresponde ao filtro","Could not load children":"Não foi possível carregar os filhos","Error: {{ ERRORMESSAGE }}":"Erro: {{ ERRORMESSAGE }}"},Pz={"No children match filter":"Нет дочерних единиц, соответствующих фильтру","Could not load children":"¨Не удалось загрузить дочерние единицы","Error: {{ ERRORMESSAGE }}":"Ошибка: {{ ERRORMESSAGE }}"},Dz={"No children match filter":"Немає дочірніх об'єктів, які відповідають фільтру","Could not load children":"Не вдалося завантажити дочірні об'єкти","Error: {{ ERRORMESSAGE }}":"Помилка: {{ ERRORMESSAGE }}"},Rz={"No children match filter":"","Could not load children":"Bolalar yuklanmadi","Error: {{ ERRORMESSAGE }}":""},Lz={"No children match filter":"Фильтрга мос бўлган авлод мавжуд эмас","Could not load children":"Болалар юкланмади","Error: {{ ERRORMESSAGE }}":"Хатолик: {{ ERRORMESSAGE }}"},Nz={"No children match filter":"","Could not load children":"Bolalar yuklanmadi","Error: {{ ERRORMESSAGE }}":""},zz={"No children match filter":"Không có đơn vị con phù hợp với bộ lọc","Could not load children":"Không thể tải đơn vị con","Error: {{ ERRORMESSAGE }}":"Lỗi: {{ ERRORMESSAGE }}"},Oz={"No children match filter":"没有下属匹配过滤器","Could not load children":"无法加载下属","Error: {{ ERRORMESSAGE }}":"错误：{{ ERRORMESSAGE }}"},jz={"No children match filter":"","Could not load children":"无法加载下属","Error: {{ ERRORMESSAGE }}":""},ta="default";ve.addResources("ar",ta,wz);ve.addResources("cs",ta,_z);ve.addResources("en",ta,Cz);ve.addResources("es",ta,Tz);ve.addResources("es_419",ta,Sz);ve.addResources("fr",ta,Ez);ve.addResources("lo",ta,kz);ve.addResources("nb",ta,Mz);ve.addResources("nl",ta,Az);ve.addResources("pt",ta,Iz);ve.addResources("ru",ta,Pz);ve.addResources("uk",ta,Dz);ve.addResources("uz_Latn",ta,Rz);ve.addResources("uz_UZ_Cyrl",ta,Lz);ve.addResources("uz_UZ_Latn",ta,Nz);ve.addResources("vi",ta,zz);ve.addResources("zh",ta,Oz);ve.addResources("zh_CN",ta,jz);const Fz="[a-zA-Z][a-zA-Z0-9]{10}",Bz=new RegExp(`(/${Fz})+`),uo=(i,e,t,r,n)=>{if(!Bz.test(i[e]))return new Error(`Invalid org unit path \`${i[e]}\` supplied to \`${t}.${n}\``)},sA=i=>{let{children:e,dataTest:t}=i;return de.createElement("span",{"data-test":`${t}-error`,className:yt.dynamic([["3198585030",[Me.grey800,Bt.dp4,Jt.error]]])},e,de.createElement(yt,{id:"3198585030",dynamic:[Me.grey800,Bt.dp4,Jt.error]},[`span.__jsx-style-dynamic-selector{font-size:14px;color:${Me.grey800};margin:${Bt.dp4};color:${Jt.error};}`]))};sA.propTypes={children:X.any.isRequired,dataTest:X.string.isRequired};const $z=(i,e)=>e.some(t=>{const r=!t.match(new RegExp(`${i}$`)),n=t.match(new RegExp(i));return r&&n}),x2=i=>{let{checked:e,children:t,onChange:r,loading:n}=i;return de.createElement("span",{onClick:a=>{r({checked:!e},a)},className:yt.dynamic([["321503310",[Me.grey900,Me.teal700]]])+" "+(Gi({checked:e,loading:n})||"")},t,de.createElement(yt,{id:"321503310",dynamic:[Me.grey900,Me.teal700]},[`span.__jsx-style-dynamic-selector{background:transparent;border-radius:3px;color:${Me.grey900};cursor:pointer;display:inline-block;font-size:14px;line-height:24px;padding:0 5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;}`,`.checked.__jsx-style-dynamic-selector{background:${Me.teal700};color:white;}`,".loading.__jsx-style-dynamic-selector{cursor:auto;}"]))};x2.propTypes={children:X.any.isRequired,checked:X.bool,loading:X.bool,onChange:X.func};const aA=i=>{let{children:e,loading:t,onToggleOpen:r}=i;return de.createElement(x2,{checked:!1,loading:t,onChange:r},e)};aA.propTypes={children:X.any.isRequired,onToggleOpen:X.func.isRequired,loading:X.bool};const oA=i=>{let{dataTest:e}=i;return de.createElement("svg",{height:"18px",version:"1.1",viewBox:"0 0 18 18",width:"18px","data-test":`${e}-iconempty`,className:"jsx-3201893673"},de.createElement("g",{fill:"none",fillRule:"evenodd",id:"icon/empty",stroke:"none",strokeWidth:"1",className:"jsx-3201893673"}),de.createElement(yt,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};oA.propTypes={dataTest:X.string.isRequired};const lA=i=>{let{dataTest:e}=i;return de.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1","data-test":`${e}-iconfolderclosed`,className:"jsx-3201893673"},de.createElement("g",{id:"icon/folder/closed",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"jsx-3201893673"},de.createElement("path",{d:"M2,3.5 C1.17157288,3.5 0.5,4.17157288 0.5,5 L0.5,13 C0.5,13.8284271 1.17157288,14.5 2,14.5 L12,14.5 C12.8284271,14.5 13.5,13.8284271 13.5,13 L13.5,7 C13.5,6.17157288 12.8284271,5.5 12,5.5 L6.69098301,5.5 L5.82917961,3.7763932 C5.7444836,3.60700119 5.57135204,3.5 5.38196601,3.5 L2,3.5 Z",id:"Path-2",stroke:"#6C7787",fill:"#D5DDE5",className:"jsx-3201893673"})),de.createElement(yt,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};lA.propTypes={dataTest:X.string.isRequired};const cA=i=>{let{dataTest:e}=i;return de.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1","data-test":`${e}-iconfolderopen`,className:"jsx-2091325045"},de.createElement("g",{id:"icon/folder/open",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"jsx-2091325045"},de.createElement("g",{id:"Group",transform:"translate(0.000000, 3.000000)",stroke:"#6C7787",className:"jsx-2091325045"},de.createElement("path",{d:"M2,0.5 C1.17157288,0.5 0.5,1.17157288 0.5,2 L0.5,10 C0.5,10.8284271 1.17157288,11.5 2,11.5 L12,11.5 C12.8284271,11.5 13.5,10.8284271 13.5,10 L13.5,4 C13.5,3.17157288 12.8284271,2.5 12,2.5 L6.69098301,2.5 L5.82917961,0.776393202 C5.7444836,0.607001188 5.57135204,0.5 5.38196601,0.5 L2,0.5 Z",id:"Path-2",fill:"#A0ADBA",className:"jsx-2091325045"}),de.createElement("path",{d:"M1.53632259,10.7093809 C1.47575089,10.7941813 1.44318932,10.8957885 1.44318932,11 C1.44318932,11.2761424 1.66704695,11.5 1.94318932,11.5 L12.4853821,11.5 C12.6468577,11.5 12.7983931,11.4220172 12.8922488,11.2906191 L16.4636774,6.2906191 C16.5242491,6.20581872 16.5568107,6.10421149 16.5568107,6 C16.5568107,5.72385763 16.3329531,5.5 16.0568107,5.5 L5.5146179,5.5 C5.35314234,5.5 5.20160692,5.57798284 5.10775116,5.7093809 L1.53632259,10.7093809 Z",id:"Path-3",fill:"#FBFCFD",className:"jsx-2091325045"}))),de.createElement(yt,{id:"2091325045"},["svg.jsx-2091325045{margin:3px 0;display:block;}"]))};cA.propTypes={dataTest:X.string.isRequired};const uA=i=>{let{dataTest:e}=i;return de.createElement("svg",{height:"18px",version:"1.1",viewBox:"0 0 18 18",width:"18px","data-test":`${e}-iconsingle`,className:"jsx-3201893673"},de.createElement("g",{fill:"none",fillRule:"evenodd",id:"icon/single",stroke:"none",strokeWidth:"1",className:"jsx-3201893673"},de.createElement("rect",{fill:"#A0ADBA",height:"4",id:"Rectangle",rx:"1",width:"4",x:"7",y:"7",className:"jsx-3201893673"})),de.createElement(yt,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};uA.propTypes={dataTest:X.string.isRequired};const dA=i=>{let{loading:e,hasChildren:t,open:r,dataTest:n}=i;return e?de.createElement(oA,{dataTest:n}):t?r?de.createElement(cA,{dataTest:n}):de.createElement(lA,{dataTest:n}):de.createElement(uA,{dataTest:n})};dA.propTypes={dataTest:X.string.isRequired,hasChildren:X.bool,loading:X.bool,open:X.bool};const hA=i=>{let{checked:e,dataTest:t,hasChildren:r,indeterminate:n,children:a,loading:c,name:s,open:h,value:p,onChange:m}=i;const y=de.createElement(dA,{loading:c,open:h,hasChildren:r,dataTest:t}),g=de.createElement(de.Fragment,null,de.createElement("span",{className:"jsx-1000763175"},y),a,de.createElement(yt,{id:"1000763175"},["span.jsx-1000763175{display:inline-block;margin-inline-end:4px;}"]));return de.createElement(de.Fragment,null,de.createElement(pl,{dense:!0,checked:e,name:s,value:p,label:g,indeterminate:n,onChange:m}))};hA.propTypes={checked:X.bool.isRequired,children:X.any.isRequired,dataTest:X.string.isRequired,hasChildren:X.bool.isRequired,indeterminate:X.bool.isRequired,loading:X.bool.isRequired,name:X.string.isRequired,open:X.bool.isRequired,value:X.string.isRequired,onChange:X.func.isRequired};const I0=i=>{let{highlighted:e,children:t}=i;return de.createElement("div",{className:yt.dynamic([["1387769986",[Me.teal200]]])+" "+(Gi({highlighted:e})||"")},de.createElement("span",{className:yt.dynamic([["1387769986",[Me.teal200]]])},t),de.createElement(yt,{id:"1387769986",dynamic:[Me.teal200]},["div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}","span.__jsx-style-dynamic-selector{display:block;}",`.highlighted.__jsx-style-dynamic-selector{background:${Me.teal200};padding-inline-end:4px;}`]))};I0.propTypes={children:X.node,highlighted:X.bool};const Uz=i=>{let{selected:e,path:t,checked:r,singleSelection:n}=i;const a=e.indexOf(t);if(r&&a!==-1)return e;if(n&&r)return[t];if(r)return[...e,t];if(a===-1)return e;if(n)return[];if(e.indexOf(t)===0)return e.slice(1);const c=e.slice(0,a),s=e.slice(a+1);return[...c,...s]},pA=i=>{let{checked:e,children:t,dataTest:r,disableSelection:n,fullPath:a,hasChildren:c,hasSelectedDescendants:s,highlighted:h,loading:p,node:m,onChange:y,onToggleOpen:g,open:x,rootId:v,selected:_,singleSelection:C}=i;const k=(w,E)=>{let{checked:A}=w;const M=Uz({path:a,selected:_,checked:A,singleSelection:C}),S={...m,path:a,checked:A,selected:M};y(S,E)};return n?de.createElement(I0,{highlighted:h},de.createElement(aA,{loading:p,onToggleOpen:g},t)):C?de.createElement(I0,{highlighted:h},de.createElement(x2,{checked:e,onChange:k,loading:p},t)):de.createElement(I0,{highlighted:h},de.createElement(hA,{dataTest:r,checked:e,name:"org-unit",value:m.id,loading:p,indeterminate:!e&&s,onChange:k,open:x,hasChildren:c},t))};pA.propTypes={children:X.any.isRequired,dataTest:X.string.isRequired,fullPath:X.string.isRequired,hasChildren:X.bool.isRequired,loading:X.bool.isRequired,node:X.shape({displayName:X.string.isRequired,id:X.string.isRequired,children:X.number,path:X.string}).isRequired,open:X.bool.isRequired,rootId:X.string.isRequired,onChange:X.func.isRequired,onToggleOpen:X.func.isRequired,checked:X.bool,disableSelection:X.bool,hasSelectedDescendants:X.bool,highlighted:X.bool,selected:X.arrayOf(uo),singleSelection:X.bool};const BS={styles:de.createElement(yt,{id:"358163430"},[".extrasmall.jsx-358163430{display:block;margin:3px 0;}"]),className:"jsx-358163430"},fA=()=>de.createElement("div",{className:"jsx-2503342345"},de.createElement(La,{extrasmall:!0,className:BS.className}),de.createElement("style",null,BS.styles),de.createElement(yt,{id:"2503342345"},["div.jsx-2503342345{width:24px;}"])),Vz={orgUnit:{resource:"organisationUnits",id:i=>{let{id:e}=i;return e},params:{fields:"children[id,path,displayName]"}}},Gz=i=>{let{node:e,suppressAlphabeticalSorting:t,onComplete:r}=i;const n=Ie.useRef(!1),{called:a,loading:c,error:s,data:h}=eo(Vz,{variables:{id:e.id}}),p=Ie.useMemo(()=>{if(!h)return;if(!e.children)return[];const{orgUnit:m}=h;return t?m.children:bz(m.children)},[h,t]);return Ie.useEffect(()=>{r&&p&&!n.current&&(r({...e,children:p}),n.current=!0)},[r,p,n]),{called:a,loading:c,error:s||null,data:p}},Hz=i=>{let{orgChildren:e,filter:t,node:r}=i;return t!=null&&t.length?e.filter(n=>nA(t,`${r.path}/${n.id}`)):e},mA=i=>{let{node:e,autoExpandLoadingError:t,dataTest:r,disableSelection:n,expanded:a,filter:c,highlighted:s,isUserDataViewFallback:h,onChange:p,onChildrenLoaded:m,onCollapse:y,onExpand:g,parentPath:x,renderNodeLabel:v,rootId:_,selected:C,singleSelection:k,suppressAlphabeticalSorting:w,OrganisationUnitNode:E}=i;const A=Gz({node:e,suppressAlphabeticalSorting:w,onComplete:m}),M=A.called&&!A.loading&&!A.error,S=M?Hz({orgChildren:A.data,filter:c,node:e}):[];return de.createElement(de.Fragment,null,A.loading&&de.createElement(fA,null),A.error&&`Error: ${A.error}`,M&&!S.length&&ve.t("No children match filter"),!!S.length&&S.map(N=>{const Y=`${x}/${N.id}`;return de.createElement(E,{autoExpandLoadingError:t,dataTest:r,disableSelection:n,displayName:N.displayName,expanded:a,filter:c,highlighted:s,id:N.id,isUserDataViewFallback:h,key:Y,onChange:p,onChildrenLoaded:m,onCollapse:y,onExpand:g,path:Y,renderNodeLabel:v,rootId:_,selected:C,singleSelection:k,suppressAlphabeticalSorting:w})}))};mA.propTypes={OrganisationUnitNode:X.func.isRequired,dataTest:X.string.isRequired,node:X.object.isRequired,parentPath:X.string.isRequired,renderNodeLabel:X.func.isRequired,rootId:X.string.isRequired,onChange:X.func.isRequired,autoExpandLoadingError:X.bool,disableSelection:X.bool,expanded:X.arrayOf(uo),filter:X.arrayOf(uo),highlighted:X.arrayOf(uo),isUserDataViewFallback:X.bool,selected:X.arrayOf(uo),singleSelection:X.bool,suppressAlphabeticalSorting:X.bool,onChildrenLoaded:X.func,onCollapse:X.func,onExpand:X.func};const qz=i=>{let{path:e,expanded:t,onExpand:r,onCollapse:n,errorMessage:a,autoExpandLoadingError:c}=i;const s=c&&!!a,[h,p]=Ie.useState(!!a);Ie.useEffect(()=>{s&&!h&&(r({path:e}),p(!0))},[s,h]);const m=s&&!h||!!t.includes(e);return{open:m,onToggleOpen:()=>m?n({path:e}):r({path:e}),openedOnceDueToError:h}},Wz={orgUnit:{resource:"organisationUnits",id:i=>{let{id:e}=i;return e},params:i=>{let{isUserDataViewFallback:e}=i;return{isUserDataViewFallback:e,fields:["path","children::size"]}}}},Yz=(i,e)=>{let{displayName:t,isUserDataViewFallback:r}=e;if(!t)throw new Error('"displayName" is required');const n={id:i,isUserDataViewFallback:r},{loading:a,error:c,data:s={}}=eo(Wz,{variables:n});return{loading:a,error:c||null,data:{id:i,displayName:t,...s.orgUnit}}},b2=i=>{let{autoExpandLoadingError:e,dataTest:t,disableSelection:r,displayName:n,expanded:a,highlighted:c,id:s,isUserDataViewFallback:h,path:p,renderNodeLabel:m,rootId:y,selected:g,singleSelection:x,filter:v,suppressAlphabeticalSorting:_,onChange:C,onChildrenLoaded:k,onCollapse:w,onExpand:E}=i;const A=Yz(s,{isUserDataViewFallback:h,displayName:n}),M=xz(p,y),S={displayName:n,id:s,...A.data||{},path:M},N=!!S.children&&S.children>0,Y=$z(M,g),Z=c.includes(p),{open:K,onToggleOpen:U}=qz({autoExpandLoadingError:e,errorMessage:A.error&&A.error.toString(),path:M,expanded:a,onExpand:E,onCollapse:w}),$=!!g.find(F=>F.match(new RegExp(`${M}$`))),B=m({disableSelection:r,hasChildren:N,hasSelectedDescendants:Y,loading:A.loading,error:A.error,selected:g,open:K,path:p,singleSelection:x,node:S,label:n,checked:$,highlighted:Z}),R=de.createElement(pA,{node:S,fullPath:p,open:K,loading:A.loading,checked:$,rootId:y,onChange:C,dataTest:`${t}-label`,selected:g,hasChildren:N,highlighted:Z,onToggleOpen:U,disableSelection:r,singleSelection:x,hasSelectedDescendants:Y},B),L=N&&!K&&!A.error,G=N&&K&&!A.error;return de.createElement(rA,{dataTest:`${t}-node`,open:K,onOpen:U,onClose:U,component:R,icon:A.loading&&de.createElement(fA,null)},A.error&&de.createElement(sA,{dataTest:t},ve.t("Could not load children")),L&&de.createElement("span",{"data-test":`${t}-placeholder`}),G&&de.createElement(mA,{OrganisationUnitNode:b2,node:S,autoExpandLoadingError:e,dataTest:t,disableSelection:r,expanded:a,filter:v,highlighted:c,isUserDataViewFallback:h,onChange:C,onChildrenLoaded:k,onCollapse:w,onExpand:E,parentPath:p,renderNodeLabel:m,rootId:y,selected:g,singleSelection:x,suppressAlphabeticalSorting:_}))};b2.propTypes={dataTest:X.string.isRequired,id:X.string.isRequired,renderNodeLabel:X.func.isRequired,rootId:X.string.isRequired,onChange:X.func.isRequired,autoExpandLoadingError:X.bool,disableSelection:X.bool,displayName:X.string,expanded:X.arrayOf(uo),filter:X.arrayOf(uo),highlighted:X.arrayOf(uo),isUserDataViewFallback:X.bool,path:uo,selected:X.arrayOf(uo),singleSelection:X.bool,suppressAlphabeticalSorting:X.bool,onChildrenLoaded:X.func,onCollapse:X.func,onExpand:X.func};const Zz=i=>{let{label:e}=i;return e},Xz=(i,e)=>i!=null&&i.length?e.filter(t=>nA(i,`/${t}`)):e,gA=i=>{let{dataTest:e="dhis2-uiwidgets-orgunittree-error",error:t}=i;return de.createElement("div",{"data-test":e},ve.t("Error: {{ ERRORMESSAGE }}",{ERRORMESSAGE:t,nsSeparator:">"}))};gA.propTypes={error:X.string.isRequired,dataTest:X.string};const yA=i=>{let{dataTest:e="dhis2-uiwidgets-orgunittree-loading"}=i;return de.createElement("div",{"data-test":e,className:"jsx-814846266"},de.createElement(La,{small:!0}),de.createElement(yt,{id:"814846266"},["div.jsx-814846266{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]))};yA.propTypes={dataTest:X.string};const Kz=i=>Array.from(new Set(i)),Qz=i=>{const e=i.replace(/^\//,"").split("/"),t=e.map((r,n)=>`/${e.slice(0,n+1).join("/")}`);return Kz(t)},Jz=i=>i.reduce((e,t)=>{const r=Qz(t);return[...e,...r]},[]),eO=i=>{let{expanded:e,setExpanded:t,onExpand:r,onCollapse:n}=i;return{handleExpand:s=>{let{path:h,...p}=s;e.includes(h)||(t([...e,h]),r&&r({path:h,...p}))},handleCollapse:s=>{let{path:h,...p}=s;const m=e.indexOf(h);if(m!==-1){const y=m===0?e.slice(1):[...e.slice(0,m),...e.slice(m+1)];t(y),n&&n({path:h,...p})}}}},tO=i=>{let{initiallyExpanded:e,onExpand:t,onCollapse:r,expandedControlled:n,handleExpandControlled:a,handleCollapseControlled:c}=i;const s=!!n,h=s?[]:Jz(e),[p,m]=Ie.useState(h);if(s)return{expanded:n,handleExpand:a,handleCollapse:c};const{handleExpand:y,handleCollapse:g}=eO({expanded:p,setExpanded:m,onExpand:t,onCollapse:r});return{expanded:p,handleExpand:y,handleCollapse:g}},iO=i=>{const[e,t]=Ie.useState(0);return Ie.useEffect(()=>{const r=e+1;i===!0&&t(r)},[i]),e},rO=i=>{const t=Object.entries(i).map(r=>{let[n,a]=r;const c=a.displayName||"";return[n,{...a,displayName:c}]});return Object.fromEntries(t)},nO=i=>i.reduce((e,t)=>({...e,[t]:{id:t,resource:"organisationUnits",params:r=>{let{isUserDataViewFallback:n}=r;return{isUserDataViewFallback:n,fields:["displayName","path","id"]}}}}),{}),sO=function(i){let{isUserDataViewFallback:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=Ie.useMemo(()=>nO(i),[i]),n=eo(t,{variables:{isUserDataViewFallback:e}}),{called:a,loading:c,error:s,data:h,refetch:p}=n,m=Ie.useMemo(()=>h&&rO(h),[h]);return{called:a,loading:c,error:s||null,data:m||null,refetch:p}},Ky=[],w2=i=>{let{onChange:e,roots:t,autoExpandLoadingError:r,dataTest:n="dhis2-uiwidgets-orgunittree",disableSelection:a,forceReload:c,highlighted:s=Ky,isUserDataViewFallback:h,initiallyExpanded:p=Ky,filter:m=Ky,renderNodeLabel:y=Zz,selected:g=Ky,singleSelection:x,suppressAlphabeticalSorting:v,expanded:_,handleExpand:C,handleCollapse:k,onExpand:w,onCollapse:E,onChildrenLoaded:A}=i;const M=Xz(m,Array.isArray(t)?t:[t]),S=iO(c),[N,Y]=Ie.useState(S),{called:Z,loading:K,error:U,data:$,refetch:B}=sO(M,{isUserDataViewFallback:h,suppressAlphabeticalSorting:v}),{expanded:R,handleExpand:L,handleCollapse:G}=tO({initiallyExpanded:p,onExpand:w,onCollapse:E,expandedControlled:_,handleExpandControlled:C,handleCollapseControlled:k});Ie.useEffect(()=>(B&&S>0&&S!==N&&(B(),Y(S)),()=>console.warn("@TODO: Why does this component unmount after a force reload?")),[S,N,B]);const F=!Z||K;return de.createElement("div",{"data-test":n},F&&de.createElement(yA,null),U&&de.createElement(gA,{error:U}),!U&&!F&&M.map(j=>{const q=$[j];return de.createElement(b2,{key:q.path,rootId:j,autoExpandLoadingError:r,dataTest:n,disableSelection:a,displayName:q.displayName,expanded:R,highlighted:s,id:j,isUserDataViewFallback:h,filter:m,path:q.path,renderNodeLabel:y,selected:g,singleSelection:x,suppressAlphabeticalSorting:v,onChange:e,onChildrenLoaded:A,onCollapse:G,onExpand:L})}))};w2.propTypes={roots:X.oneOfType([X.string,X.arrayOf(X.string)]).isRequired,onChange:X.func.isRequired,autoExpandLoadingError:X.bool,dataTest:X.string,disableSelection:X.bool,expanded:Un(i=>!!i.handleExpand||!!i.handleCollapse,X.arrayOf(X.string)),filter:X.arrayOf(uo),forceReload:X.bool,handleCollapse:Un(i=>!!i.expanded||!!i.handleExpand,X.func),handleExpand:Un(i=>!!i.expanded||!!i.handleCollapse,X.func),highlighted:X.arrayOf(uo),initiallyExpanded:X.arrayOf(uo),isUserDataViewFallback:X.bool,renderNodeLabel:X.func,selected:X.arrayOf(uo),singleSelection:X.bool,suppressAlphabeticalSorting:X.bool,onChildrenLoaded:X.func,onCollapse:X.func,onExpand:X.func};const aO="التالي",oO="الصفحة",lO="السابق",cO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"الصفحة {{page}} من {{pageCount}} ، العناصر {{firstItem}} - {{lastItem}} من {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"الصفحة {{page}} ، العناصر {{firstItem}} - {{lastItem}}","Page {{page}}":"الصفحة {{page}}",Next:aO,Page:oO,"Items per page":"عناصر لكل صفحة",Previous:lO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"أنت في الصفحة {{page}} تستعرض العناصر {{firstItem}} - {{lastItem}} ، ولكن هناك {{pageCount}} صفحة و {{total}} عنصر"},uO="التالي",dO="",hO="",pO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:uO,Page:dO,"Items per page":"",Previous:hO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},fO="",mO="",gO="পূর্ববর্তী",yO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:fO,Page:mO,"Items per page":"",Previous:gO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},vO="داهاتوو",xO="لابةرة",bO="ذيَشوو",wO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:vO,Page:xO,"Items per page":"",Previous:bO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},_O="Další",CO="Strana",TO="Předchozí",SO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Stránka {{page}} z {{pageCount}}, položky {{firstItem}}-{{lastItem}} z {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Stránka {{page}}, položky {{firstItem}}-{{lastItem}}","Page {{page}}":"Stránka {{page}}",Next:_O,Page:CO,"Items per page":"Položek na stránce",Previous:TO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"Nacházíte se na stránce {{page}} zobrazující položky {{firstItem}}-{{lastItem}}, ale je zde {{pageCount}} stránek a {{total}} položek"},EO="Next",kO="",MO="",AO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:EO,Page:kO,"Items per page":"",Previous:MO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},IO="Next",PO="Page",DO="Previous",RO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Page {{page}}, items {{firstItem}}-{{lastItem}}","Page {{page}}":"Page {{page}}",Next:IO,Page:PO,"Items per page":"Items per page",Previous:DO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items"},LO="Siguiente",NO="Página",zO="Anterior",OO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Página {{page}} de {{pageCount}}, elementos {{firstItem}} - {{lastItem}} de {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Página {{page}}, elementos {{firstItem}}-{{lastItem}}","Page {{page}}":"Página {{page}}",Next:LO,Page:NO,"Items per page":"Elementos por página",Previous:zO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},jO="Siguiente",FO="Página",BO="Anterior",$O={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Página {{page}} de {{pageCount}}, puntos {{firstItem}}-{{lastItem}} de {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Página {{page}}, artículos {{firstItem}}-{{lastItem}}","Page {{page}}":"Página {{page}}",Next:jO,Page:FO,"Items per page":"Artículos por página",Previous:BO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"Usted está en la página {{page}} que muestra los artículos {{firstItem}}-{{lastItem}}, pero hay páginas {{pageCount}} y artículos {{total}} "},UO="Suivant",VO="Page",GO="Précédent",HO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"Page {{page}}",Next:UO,Page:VO,"Items per page":"",Previous:GO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},qO="आगे",WO="",YO="",ZO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:qO,Page:WO,"Items per page":"",Previous:YO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},XO="Selanjutnya",KO="Halaman",QO="Sebelumnya",JO={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"Halaman {{page}}",Next:XO,Page:KO,"Items per page":"",Previous:QO,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},ej="បន្ទាប់",tj="",ij="មុន",rj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:ej,Page:tj,"Items per page":"",Previous:ij,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},nj="ຕໍ່ໄປ",sj="ໜ້າ",aj="ຍ້ອນກັບ",oj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"ໜ້າ {{page}} ຂອງ {{pageCount}} , ລາຍການ {{firstItem}} - {{lastItem}} ຂອງ {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"ໜ້າ {{page}} , ລາຍການ {{firstItem}} - {{lastItem}}","Page {{page}}":"ໜ້າ {{page}}",Next:nj,Page:sj,"Items per page":"ລາຍການຕໍ່ໜ້າ",Previous:aj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"ທ່ານຢູ່ທີ່ໜ້າ {{page}} ສະແດງລາຍການ {{firstItem}} - {{lastItem}} , ແຕ່ມີໜ້າ {{pageCount}} ແລະ {{total}} ລາຍການ"},lj="ရှေ့သို့",cj="",uj="နောက်သို့",dj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:lj,Page:cj,"Items per page":"",Previous:uj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},hj="Neste",pj="Side",fj="Forrige",mj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Side {{page}} av {{pageCount}}, elementer {{firstItem}}-{{lastItem}} av {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Side {{page}}, elementer {{firstItem}}-{{lastItem}}","Page {{page}}":"Side {{page}}",Next:hj,Page:pj,"Items per page":"Elementer per side",Previous:fj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"Du er på side {{page}} som viser elementer {{firstItem}}-{{lastItem}}, men det er {{pageCount}} sider og {{total}} elementer."},gj="Volgende",yj="Bladzijde",vj="Vorige",xj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Pagina {{page}} van {{pageCount}}, items {{firstItem}}-{{lastItem}} van {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Pagina {{page}}, items {{firstItem}}-{{lastItem}}","Page {{page}}":"Pagina {{page}}",Next:gj,Page:yj,"Items per page":"Items per pagina",Previous:vj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"U bevindt zich op pagina {{page}} laat items zien {{firstItem}}-{{lastItem}}, maar er zijn {{pageCount}} pagina's en {{total}} items"},bj="بعدی",wj="صفحه\\:",_j="قبلی",Cj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:bj,Page:wj,"Items per page":"",Previous:_j,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},Tj="راتلونکی",Sj="پاڼه",Ej="مخکینۍ",kj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:Tj,Page:Sj,"Items per page":"",Previous:Ej,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},Mj="Próximo",Aj="Página",Ij="Anterior",Pj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Página {{page}} de {{pageCount}}, itens {{firstItem}}-{{lastItem}} de {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Página {{page}}, itens {{firstItem}}-{{lastItem}}","Page {{page}}":"Página {{page}}",Next:Mj,Page:Aj,"Items per page":"Itens por página",Previous:Ij,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"Está na página {{page}} que mostra os itens {{firstItem}}-{{lastItem}}, mas existem páginas {{pageCount}} e itens {{total}} "},Dj="Próximo",Rj="Página",Lj="Anterior",Nj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:Dj,Page:Rj,"Items per page":"",Previous:Lj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},zj="Următorul",Oj="",jj="",Fj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"Pagina {{page}}",Next:zj,Page:Oj,"Items per page":"",Previous:jj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},Bj="Следующая",$j="Страница",Uj="Предыдущая",Vj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Страница {{page}} из {{pageCount}}, элементы {{firstItem}}-{{lastItem}} из {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Страница {{page}}, элементы {{firstItem}}-{{lastItem}}","Page {{page}}":"Страница {{page}}",Next:Bj,Page:$j,"Items per page":"Количество элементов на странице",Previous:Uj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"Вы находитесь на странице {{page}}, где отображены элементы {{firstItem}}-{{lastItem}}, при этом всего страниц -{{pageCount}}, и элементов - {{total}}."},Gj="Nästa",Hj="Sida",qj="Tidigare",Wj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:Gj,Page:Hj,"Items per page":"",Previous:qj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},Yj="Próximu",Zj="",Xj="Anterior",Kj={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:Yj,Page:Zj,"Items per page":"",Previous:Xj,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},Qj="Навбатӣ",Jj="",e6="Қаблӣ",t6={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:Qj,Page:Jj,"Items per page":"",Previous:e6,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},i6="Наступний",r6="Сторінка",n6="Попередня",s6={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"Сторінка {{page}} з {{pageCount}}, об'єкти {{firstItem}}-{{lastItem}} з {{total}}","Page {{page}}, items {{firstItem}}-{{lastItem}}":"Сторінка {{page}}, об'єкти {{firstItem}}-{{lastItem}}","Page {{page}}":"Сторінка {{page}}",Next:i6,Page:r6,"Items per page":"Об'єктів на сторінці",Previous:n6,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"Ви знаходитесь на сторінці {{page}}, де відображаються об'єкти {{firstItem}}-{{lastItem}}, але є {{pageCount}} сторінок і {{total}} об'єктів"},a6="اگلہ",o6="صفحہ",l6="پچھلہ",c6={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:a6,Page:o6,"Items per page":"",Previous:l6,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},u6="Кейинги",d6="Sahifa",h6="Oldingi",p6={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"",Next:u6,Page:d6,"Items per page":"",Previous:h6,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},f6="Кейинги",m6="Саҳифа",g6="Олдинги",y6={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"{{page}} саҳифаси",Next:f6,Page:m6,"Items per page":"",Previous:g6,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},v6="Кейинги",x6="Sahifa",b6="Oldingi",w6={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"{{page}} sahifasi",Next:v6,Page:x6,"Items per page":"",Previous:b6,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},_6="Sau",C6="Trang",T6="Trước",S6={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"Trang {{page}}",Next:_6,Page:C6,"Items per page":"",Previous:T6,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},E6="下一个",k6="页",M6="前一",A6={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"第 {{page}} 页，共 {{pageCount}}，第 {{firstItem}}-{{lastItem}} 条，共 {{total}} 条","Page {{page}}, items {{firstItem}}-{{lastItem}}":"页面 {{page}}，条目 {{firstItem}}-{{lastItem}}","Page {{page}}":"页 {{page}}",Next:E6,Page:k6,"Items per page":"条每页",Previous:M6,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":"您在第 {{page}} 页显示项目 {{firstItem}}-{{lastItem}}，但有 {{pageCount}} 个页面和 {{total}} 个项目"},I6="下一个",P6="页",D6="前一",R6={"Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}":"","Page {{page}}, items {{firstItem}}-{{lastItem}}":"","Page {{page}}":"第{{page}}页",Next:I6,Page:P6,"Items per page":"",Previous:D6,"You are at page {{page}} showing items {{firstItem}}-{{lastItem}}, but there are {{pageCount}} pages and {{total}} items":""},Hr="default";ve.addResources("ar",Hr,cO);ve.addResources("ar_IQ",Hr,pO);ve.addResources("bn",Hr,yO);ve.addResources("ckb",Hr,wO);ve.addResources("cs",Hr,SO);ve.addResources("da",Hr,AO);ve.addResources("en",Hr,RO);ve.addResources("es",Hr,OO);ve.addResources("es_419",Hr,$O);ve.addResources("fr",Hr,HO);ve.addResources("hi_IN",Hr,ZO);ve.addResources("id",Hr,JO);ve.addResources("km",Hr,rj);ve.addResources("lo",Hr,oj);ve.addResources("my",Hr,dj);ve.addResources("nb",Hr,mj);ve.addResources("nl",Hr,xj);ve.addResources("prs",Hr,Cj);ve.addResources("ps",Hr,kj);ve.addResources("pt",Hr,Pj);ve.addResources("pt_BR",Hr,Nj);ve.addResources("ro",Hr,Fj);ve.addResources("ru",Hr,Vj);ve.addResources("sv",Hr,Wj);ve.addResources("tet",Hr,Kj);ve.addResources("tg",Hr,t6);ve.addResources("uk",Hr,s6);ve.addResources("ur",Hr,c6);ve.addResources("uz_Latn",Hr,p6);ve.addResources("uz_UZ_Cyrl",Hr,y6);ve.addResources("uz_UZ_Latn",Hr,w6);ve.addResources("vi",Hr,S6);ve.addResources("zh",Hr,A6);ve.addResources("zh_CN",Hr,R6);const Ub=i=>typeof i=="number"&&!isNaN(i),L6=i=>{let{firstItem:e,lastItem:t,page:r,pageCount:n,total:a}=i;return Ub(a)&&Ub(t)?ve.t("Page {{page}} of {{pageCount}}, items {{firstItem}}-{{lastItem}} of {{total}}",{page:r,pageCount:n,firstItem:e,lastItem:t,total:a}):Ub(t)?ve.t("Page {{page}}, items {{firstItem}}-{{lastItem}}",{page:r,firstItem:e,lastItem:t}):ve.t("Page {{page}}",{page:r})},N6=i=>{let{isLastPage:e,page:t,pageLength:r,pageSize:n,total:a}=i,c=(t-1)*n+1,s=c+n-1;return typeof a=="number"&&(a===0?(c=0,s=0):s>a&&(s=a)),typeof r=="number"&&(s=c+r-1),e&&isNaN(a)&&isNaN(r)&&(s=NaN),{firstItem:c,lastItem:s}},$S=(i,e)=>typeof i=="function"?i(e):i,vA=i=>{let{dataTest:e,isNextDisabled:t,isPreviousDisabled:r,nextPageText:n,page:a,previousPageText:c,onClick:s}=i;return de.createElement("div",{"data-test":`${e}-pagecontrols`,className:yt.dynamic([["3252926163",[Bt.dp4]]])},de.createElement(Ti,{secondary:!0,className:"button-previous",small:!0,disabled:r,onClick:()=>s(a-1),dataTest:`${e}-page-previous`},de.createElement("div",{className:yt.dynamic([["3252926163",[Bt.dp4]]])+" navigator-icon"},de.createElement(w_,null)),$S(c)),de.createElement(Ti,{secondary:!0,className:"button-next",small:!0,disabled:t,onClick:()=>s(a+1),dataTest:`${e}-page-next`},$S(n),de.createElement("div",{className:yt.dynamic([["3252926163",[Bt.dp4]]])+" navigator-icon"},de.createElement(__,null))),de.createElement(yt,{id:"3252926163",dynamic:[Bt.dp4]},["div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}","div.__jsx-style-dynamic-selector .button-previous{height:32px;padding-inline-start:0;}",`div.__jsx-style-dynamic-selector .button-next{height:32px;padding-inline-end:0;margin-inline-start:${Bt.dp4};}`,"div.__jsx-style-dynamic-selector .navigator-icon.__jsx-style-dynamic-selector:dir(rtl){-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg);}"]))};vA.propTypes={dataTest:X.string.isRequired,nextPageText:X.oneOfType([X.string,X.func]).isRequired,page:X.number.isRequired,previousPageText:X.oneOfType([X.string,X.func]).isRequired,onClick:X.func.isRequired,isNextDisabled:X.bool,isPreviousDisabled:X.bool};const z6=(i,e)=>typeof i=="function"?i(e):i,O6=i=>Array.from({length:i},(e,t)=>(t+1).toString()),xA=i=>{let{dataTest:e,disabled:t,pageSelectText:r,onChange:n,page:a,pageCount:c}=i;return de.createElement("div",{"data-test":`${e}-gotopage`,className:yt.dynamic([["599400768",[Bt.dp12]]])},de.createElement(il,{dense:!0,disabled:t,selected:a.toString(),onChange:s=>{let{selected:h}=s;return n(parseInt(h,10))},className:"select",dataTest:`${e}-page-select`,prefix:z6(r)},O6(c).map(s=>de.createElement(As,{key:s,value:s,label:s}))),de.createElement(yt,{id:"599400768",dynamic:[Bt.dp12]},[`div.__jsx-style-dynamic-selector{margin-inline-end:${Bt.dp12};}`]))};xA.propTypes={dataTest:X.string.isRequired,page:X.number.isRequired,pageCount:X.number.isRequired,pageSelectText:X.oneOfType([X.string,X.func]).isRequired,onChange:X.func.isRequired,disabled:X.bool};const j6=(i,e)=>typeof i=="function"?i(e):i,bA=i=>{let{dataTest:e,disabled:t,pageSizeSelectText:r,pageSize:n,pageSizes:a,onChange:c}=i;return de.createElement("div",{"data-test":`${e}-pagesize`,className:yt.dynamic([["3539890457",[Bt.dp12]]])},de.createElement(il,{dense:!0,disabled:t,selected:n.toString(),onChange:s=>{let{selected:h}=s;return c(parseInt(h,10))},className:"select",dataTest:`${e}-pagesize-select`,prefix:j6(r)},a.map(s=>de.createElement(As,{key:s,value:s,label:s}))),de.createElement(yt,{id:"3539890457",dynamic:[Bt.dp12]},[`div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;min-height:32px;margin-inline-end:${Bt.dp12};-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}`]))};bA.propTypes={dataTest:X.string.isRequired,pageSize:X.number.isRequired,pageSizeSelectText:X.oneOfType([X.string,X.func]).isRequired,pageSizes:X.arrayOf(X.string).isRequired,onChange:X.func.isRequired,disabled:X.bool};const F6=(i,e)=>typeof i=="function"?i(e):i,wA=i=>{let{dataTest:e,firstItem:t,inactive:r,lastItem:n,page:a,pageCount:c,pageSummaryText:s,total:h}=i;const p=F6(s,{firstItem:t,lastItem:n,page:a,pageCount:c,total:h});return de.createElement("div",{"data-test":`${e}-summary`,className:yt.dynamic([["3973865131",[Bt.dp12,Me.grey700,Me.grey500]]])},de.createElement("span",{className:yt.dynamic([["3973865131",[Bt.dp12,Me.grey700,Me.grey500]]])+" "+(Gi({inactive:r})||"")},p),de.createElement(yt,{id:"3973865131",dynamic:[Bt.dp12,Me.grey700,Me.grey500]},[`div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;min-height:32px;margin-inline-end:${Bt.dp12};}`,`span.__jsx-style-dynamic-selector{color:${Me.grey700};font-size:14px;}`,`span.inactive.__jsx-style-dynamic-selector{color:${Me.grey500};}`]))};wA.propTypes={dataTest:X.string.isRequired,page:X.number.isRequired,pageSummaryText:X.oneOfType([X.string,X.func]).isRequired,firstItem:X.number,inactive:X.bool,lastItem:X.number,pageCount:X.number,total:X.number};const B6=2e3,Ed={dataTest:"dhis2-uiwidgets-pagination",nextPageText:()=>ve.t("Next"),pageSelectText:()=>ve.t("Page"),pageSizes:["5","10","20","30","40","50","75","100"],pageSizeSelectText:()=>ve.t("Items per page"),pageSummaryText:L6,previousPageText:()=>ve.t("Previous")},_2=i=>{let{className:e,dataTest:t=Ed.dataTest,disabled:r,hidePageSelect:n,hidePageSizeSelect:a,hidePageSummary:c,isLastPage:s,nextPageText:h=Ed.nextPageText,onPageChange:p,onPageSizeChange:m,page:y,pageCount:g,pageLength:x,pageSelectText:v=Ed.pageSelectText,pageSize:_,pageSizes:C=Ed.pageSizes,pageSizeSelectText:k=Ed.pageSizeSelectText,pageSummaryText:w=Ed.pageSummaryText,previousPageText:E=Ed.previousPageText,total:A}=i;const{firstItem:M,lastItem:S}=N6({isLastPage:s,page:y,pageLength:x,pageSize:_,total:A}),N=!n&&typeof g=="number"&&g>1&&g<=B6;return de.createElement("div",{"data-test":t,className:yt.dynamic([["3796520840",[Bt.dp4]]])+" "+(Gi("container",e)||"")},a?de.createElement("div",{className:yt.dynamic([["3796520840",[Bt.dp4]]])+" spacer"}):de.createElement(bA,{dataTest:t,disabled:r,pageSize:_,pageSizes:C,onChange:m,pageSizeSelectText:k}),!c&&de.createElement(wA,{dataTest:t,inactive:r,firstItem:M,lastItem:S,page:y,pageCount:g,pageSummaryText:w,total:A}),de.createElement("div",{className:yt.dynamic([["3796520840",[Bt.dp4]]])+" page-navigation"},N&&de.createElement(xA,{dataTest:t,disabled:r,pageSelectText:v,page:y,pageCount:g,onChange:p}),de.createElement(vA,{dataTest:t,nextPageText:h,page:y,previousPageText:E,onClick:p,isNextDisabled:r||s||y===g,isPreviousDisabled:r||y===1})),de.createElement(yt,{id:"3796520840",dynamic:[Bt.dp4]},[`.container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;row-gap:${Bt.dp4};}`,".spacer.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".page-navigation.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;min-height:32px;}"]))};_2.propTypes={page:X.number.isRequired,pageSize:X.number.isRequired,className:X.string,dataTest:X.string,disabled:X.bool,hidePageSelect:X.bool,hidePageSizeSelect:X.bool,hidePageSummary:X.bool,isLastPage:X.bool,nextPageText:X.oneOfType([X.string,X.func]),pageCount:X.number,pageLength:Un(i=>i.isLastPage,X.number),pageSelectText:X.oneOfType([X.string,X.func]),pageSizeSelectText:X.oneOfType([X.string,X.func]),pageSizes:X.arrayOf(X.string),pageSummaryText:X.oneOfType([X.string,X.func]),previousPageText:X.oneOfType([X.string,X.func]),total:X.number,onPageChange:X.func,onPageSizeChange:X.func};const wr="ACCESS_NONE",hn="ACCESS_VIEW_ONLY",vn="ACCESS_VIEW_AND_EDIT",C2="SHARE_TARGET_EXTERNAL",ch="SHARE_TARGET_PUBLIC",uh="SHARE_TARGET_USER",Zp="SHARE_TARGET_GROUP",_A={AGGREGATE_DATA_EXCHANGE:"aggregateDataExchange",API_TOKEN:"apiToken",ATTRIBUTE:"attribute",CATEGORY:"category",CATEGORY_COMBO:"categoryCombo",CATEGORY_OPTION:"categoryOption",CATEGORY_OPTION_GROUP:"categoryOptionGroup",CATEGORY_OPTION_GROUP_SET:"categoryOptionGroupSet",CONSTANT:"constant",DASHBOARD:"dashboard",DATA_APPROVAL_LEVEL:"dataApprovalLevel",DATA_APPROVAL_WORKFLOW:"dataApprovalWorkflow",DATA_ELEMENT:"dataElement",DATA_ELEMENT_GROUP:"dataElementGroup",DATA_ELEMENT_GROUP_SET:"dataElementGroupSet",DATA_SET:"dataSet",DATASTORE:"dataStore",DOCUMENT:"document",EVENT_CHART:"eventChart",EVENT_FILTER:"eventFilter",EVENT_REPORT:"eventReport",EVENT_VISUALIZATION:"eventVisualization",EXPRESSION_DIMENSION_ITEM:"expressionDimensionItem",EXTERNAL_MAP_LAYER:"externalMapLayer",IDENTIFIABLE_OBJECT:"identifiableObject",INDICATOR:"indicator",INDICATOR_GROUP:"indicatorGroup",INDICATOR_GROUP_SET:"indicatorGroupSet",INTERPRETATION:"interpretation",LEGEND_SET:"legendSet",MAP:"map",OPTION_GROUP:"optionGroup",OPTION_GROUP_SET:"optionGroupSet",OPTION_SET:"optionSet",ORGANISATION_UNIT_GROUP:"organisationUnitGroup",ORGANISATION_UNIT_GROUP_SET:"organisationUnitGroupSet",PREDICTOR_GROUP:"predictorGroup",PROGRAM:"program",PROGRAM_INDICATOR:"programIndicator",PROGRAM_INDICATOR_GROUP:"programIndicatorGroup",PROGRAM_STAGE:"programStage",PROGRAM_STAGE_WORKING_LIST:"programStageWorkingList",RELATIONSHIP_TYPE:"relationshipType",REPORT:"report",SQL_VIEW:"sqlView",TRACKED_ENTITY_ATTRIBUTE:"trackedEntityAttribute",TRACKED_ENTITY_FILTER:"trackedEntityFilter",TRACKED_ENTITY_TYPE:"trackedEntityType",USER_GROUP:"userGroup",USER_ROLE:"userRole",VALIDATION_RULE:"validationRule",VALIDATION_RULE_GROUP:"validationRuleGroup",VISUALIZATION:"visualization"},CA=Object.values(_A),av=Ie.createContext(!1);var $6=void 0;const U6=(i,e,t)=>{let r;return function(){for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];const s=$6,h=()=>{r=null,i.apply(s,a)};clearTimeout(r),r=setTimeout(h,e)}},Vb=i=>i===void 0?wr:typeof i=="boolean"?i?hn:wr:i.startsWith("rw")?vn:i.startsWith("r-")?hn:wr,TA=i=>{if(typeof i=="boolean")return{data:wr,metadata:Vb(i)};const e=i==null?void 0:i.substring(0,2),t=i==null?void 0:i.substring(2,4);return{data:Vb(t),metadata:Vb(e)}},US=i=>{switch(i){case wr:return"--";case hn:return"r-";case vn:return"rw";default:return"--"}},jm=i=>`${US(i.metadata)}${US(i.data)}----`,Qy=i=>{let{access:e,...t}=i;return{...t,access:TA(e)}},V6=[C2,ch],VS=i=>!V6.includes(i),G6=i=>{let{object:e,type:t,access:r,id:n}=i;switch(t){case"public":return{object:{...e,publicAccess:jm(r)}};case"group":{const a=e.userGroupAccesses.map(s=>s.id!==n?s:{...s,access:jm(r)}),c={object:{...e,userGroupAccesses:a}};return console.log(c),c}case"user":{const a=e.userAccesses.map(s=>s.id!==n?s:{...s,access:jm(r)});return{object:{...e,userAccesses:a}}}}},H6=i=>{let{object:e,type:t,id:r,access:n,name:a}=i;switch(t){case"group":return{object:{...e,userGroupAccesses:[...e.userGroupAccesses,{id:r,name:a,access:jm(n)}]}};case"user":return{object:{...e,userAccesses:[...e.userAccesses,{id:r,name:a,access:jm(n)}]}}}},q6=i=>{let{object:e,type:t,id:r}=i;switch(t){case"group":{const n=e.userGroupAccesses.filter(c=>c.id!==r);return{object:{...e,userGroupAccesses:n}}}case"user":{const n=e.userAccesses.filter(c=>c.id!==r);return{object:{...e,userAccesses:n}}}}},W6="المستخدم",Y6="بيانات",Z6="البيانات الوصفية",X6="بحث",K6="إغلاق",Q6={"View only":"العرض فقط","View and edit":"عرض وتعديل","No access":"لا يمكن الوصول","Give access to a user or group":"منح حق الوصول إلى مستخدم أو مجموعة","Data access level":"","Choose a level":"","Not available offline":"غير متوفر في وضع عدم الإتصال","Metadata access level":"","Access level":"مستوى الوصول","Give access":"السماح بالوصول","Users and groups that currently have access":"المستخدمون والمجموعات التي لديها حق الوصول حاليًا","User / Group":"","All users":"جميع المستخدمين","Anyone logged in":"","User group":"مجموعة المستخدمين",User:W6,Data:Y6,"Remove access":"إزالة الوصول",Metadata:Z6,"User or group":"مستخدم أو مجموعة",Search:X6,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"حدث خطأ ما","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:K6,"Dashboard sharing":""},J6="",e9="البيانات",t9="",i9="البحث",r9="إغلاق",n9={"View only":"","View and edit":"","No access":"ممنوع الدخول","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:J6,Data:e9,"Remove access":"",Metadata:t9,"User or group":"",Search:i9,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:r9,"Dashboard sharing":""},s9="داتا پەیوەندیدارەکان",a9="گەڕان",o9="داخستن",l9={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:s9,"Remove access":"","User or group":"",Search:a9,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"هەڵەیەک ڕووی دا","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:o9,"Dashboard sharing":""},c9="Uživatel",u9="Data",d9="Metadata",h9="Hledat",p9="Zavřít",f9={"View only":"Pouze zobrazení","View and edit":"Zobrazení a úpravy","No access":"Žádný přístup","Give access to a user or group":"Udělte přístup uživateli nebo skupině","Data access level":"","Choose a level":"","Not available offline":"Není k dispozici offline","Metadata access level":"","Access level":"Úroveň přístupu","Give access":"Povolit přístup","Users and groups that currently have access":"Uživatelé a skupiny, kteří mají aktuálně přístup","User / Group":"Uživatel / Skupina","All users":"Všichni uživatelé","Anyone logged in":"","User group":"Uživatelská skupina",User:c9,Data:u9,"Remove access":"Odebrat přístup",Metadata:d9,"User or group":"Uživatel nebo skupina",Search:h9,"Apply dashboard sharing settings to visualizations":"Na vizualizace použijte nastavení sdílení ovládacího panelu","Something went wrong":"Něco se pokazilo","Apply sharing to dashboard visualizations":"Použít sdílení na vizualizace ovládacího panelu","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Nebyly aktualizovány žádné vizualizace. Zkontrolujte, zda máte oprávnění ke změně sdílení pro všechny vizualizace.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Ne všechny vizualizace bylo možné úspěšně aktualizovat. {{ success }} aktualizováno úspěšně, {{ failed }} se nepodařilo aktualizovat. Zkontrolujte, zda máte oprávnění ke změně sdílení pro všechny vizualizace.","No visualizations were updated because sharing settings are already sufficient.":"Nebyly aktualizovány žádné vizualizace, protože nastavení sdílení je již dostačující.","Successfully updated sharing for all visualizations.":"Úspěšně aktualizováno sdílení pro všechny vizualizace.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Ne všechna nastavení sdílení vizualizací bylo nutné aktualizovat. {{ updated }} aktualizováno, {{ skipped }} již má dostatečné nastavení sdílení.","There are no users or groups to apply sharing settings for.":"Nejsou žádní uživatelé ani skupiny, pro které by bylo možné použít nastavení sdílení.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Počet vizualizací na tomto řídicím panelu, které potenciálně získají aktualizované nastavení sdílení: {{ visualizationsCount }}. Počet uživatelů nebo skupin, na které se tato aktualizovaná nastavení budou vztahovat: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"Použití stejných nastavení sdílení zajistí, že uživatelé a skupiny, které mají přístup k řídicímu panelu, budou mít také přístup k jeho vizualizacím (grafy, tabulky, mapy, grafy událostí a zprávy o událostech) alespoň „Pouze zobrazení“.",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"Pokud uživatel nebo skupina již má k vizualizaci přístup „Zobrazení a úpravy“, nebude to omezeno na „Pouze zobrazení“. Úroveň přístupu „Všichni uživatelé“ nebude aktualizována ani změněna.","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Použití sdílení nelze vrátit zpět a je nutné jej provést znovu, pokud na ovládací panel přidáte nové vizualizace nebo se změní jeho nastavení sdílení.","Sharing and access: {{- objectName}}":"Sdílení a přístup: {{- objectName}}","Sharing and access":"Sdílení a přístup",Close:p9,"Dashboard sharing":"Sdílení ovládacího panelu"},m9="",g9="",y9="",v9="",x9="Close",b9={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:m9,Data:g9,"Remove access":"",Metadata:y9,"User or group":"",Search:v9,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:x9,"Dashboard sharing":""},w9="User",_9="Data",C9="Metadata",T9="Search",S9="Close",E9={"View only":"View only","View and edit":"View and edit","No access":"No access","Give access to a user or group":"Give access to a user or group","Data access level":"Data access level","Choose a level":"Choose a level","Not available offline":"Not available offline","Metadata access level":"Metadata access level","Access level":"Access level","Give access":"Give access","Users and groups that currently have access":"Users and groups that currently have access","User / Group":"User / Group","All users":"All users","Anyone logged in":"Anyone logged in","User group":"User group",User:w9,Data:_9,"Remove access":"Remove access",Metadata:C9,"User or group":"User or group",Search:T9,"Apply dashboard sharing settings to visualizations":"Apply dashboard sharing settings to visualizations","Something went wrong":"Something went wrong","Apply sharing to dashboard visualizations":"Apply sharing to dashboard visualizations","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No visualizations were updated. Check that you have permission to change sharing for all visualizations.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.","No visualizations were updated because sharing settings are already sufficient.":"No visualizations were updated because sharing settings are already sufficient.","Successfully updated sharing for all visualizations.":"Successfully updated sharing for all visualizations.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.","There are no users or groups to apply sharing settings for.":"There are no users or groups to apply sharing settings for.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':`If a user or group already has "View and edit" access to a visualization, this won't be reduced to "View only". The "All users" access level won't be updated or changed.`,"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.","Sharing and access: {{- objectName}}":"Sharing and access: {{- objectName}}","Sharing and access":"Sharing and access",Close:S9,"Dashboard sharing":"Dashboard sharing"},k9="Usuario",M9="Datos",A9="Metadatos",I9="Buscar",P9="Cerrar",D9={"View only":"Solo lectura","View and edit":"Ver y editar","No access":"Sin acceso","Give access to a user or group":"Dar acceso a un usuario o grupo","Data access level":"","Choose a level":"","Not available offline":"No disponible sin conexión a internet","Metadata access level":"","Access level":"Nivel de acceso","Give access":"Dar acceso","Users and groups that currently have access":"Usuarios y grupos que actualmente tienen acceso","User / Group":"Usuario / Grupo","All users":"Todos los usuarios","Anyone logged in":"","User group":"Grupo de usuario",User:k9,Data:M9,"Remove access":"Eliminar acceso",Metadata:A9,"User or group":"Usuario o Grupo",Search:I9,"Apply dashboard sharing settings to visualizations":"Aplicar la configuración compartir del tablero a las visualizaciones","Something went wrong":"Algo ha salido mal","Apply sharing to dashboard visualizations":"Aplicar compartir a las visualizaciones del tablero","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No se actualizaron las visualizaciones. Compruebe que tiene permiso para cambiar la configuración compartir de todas las visualizaciones.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"No todas las visualizaciones se pudieron actualizar correctamente. {{ success }} actualizado con éxito, {{ failed }} error al actualizar. Compruebe que tiene permiso para cambiar la configuración de uso compartido de todas las visualizaciones.","No visualizations were updated because sharing settings are already sufficient.":"No se han actualizado las visualizaciones porque la configuración para compartir ya es suficiente","Successfully updated sharing for all visualizations.":"Configuración de uso compartido actualizado con éxito para todas las visualizaciones.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"No todas las configuraciones para compartir visualizaciones requieren actualización. {{ updated }} actualizado, {{ skipped }} ya tiene suficiente acceso.","There are no users or groups to apply sharing settings for.":"No hay usuarios o grupos a los que aplicar la configuración de uso compartido","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Número de visualizaciones en este tablero que potencialmente actualizarán su confugiración de uso compartido: {{ visualizationsCount }}. El número de usuarios o grupos a los que se aplicarán estas configuraciones actualizadas: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'La aplicación de la misma configuración para compartir garantiza que los usuarios y grupos que tienen acceso al tablero también tienen al menos acceso de "Solo lectura" a sus visualizaciones (gráficos, tablas, mapas, gráficos de eventos e informes de eventos).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Si un usuario o grupo ya tiene acceso "Ver y editar" a una visualización, este no se reducirá a "Solo lectura". El nivel de acceso "Todos los usuarios" no se actualizará ni cambiará.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Aplicar esta configuración de uso compartido no puede deshacerse, y deberás hacer estos cambios nuevamente si nuevas visualizaciones son agregadas al tablero o si su configuración de uso compartido es modificada.","Sharing and access: {{- objectName}}":"Compartir y acceder: {{- objectName}}","Sharing and access":"Acceso compartido",Close:P9,"Dashboard sharing":"Compartir tablero"},R9="",L9="Datos",N9="Metadatos",z9="Buscar",O9="Cerrar",j9={"View only":"Ver sólo","View and edit":"Ver y editar","No access":"Sin acceso","Give access to a user or group":"Dar acceso a un usuario o grupo","Data access level":"","Choose a level":"","Not available offline":"No disponible sin conexión","Metadata access level":"","Access level":"Nivel de acceso","Give access":"Dar acceso","Users and groups that currently have access":"Usuarios y grupos que tienen acceso actualmente","User / Group":"Usuario / Grupo","All users":"Todos los usuarios","Anyone logged in":"","User group":"",User:R9,Data:L9,"Remove access":"Eliminar el acceso",Metadata:N9,"User or group":"Usuario o grupo",Search:z9,"Apply dashboard sharing settings to visualizations":"Aplicar la configuración de uso compartido del cuadro de mandos a las visualizaciones","Something went wrong":"Algo ha ido mal","Apply sharing to dashboard visualizations":"Aplicar la compartición a las visualizaciones de cuadros de mando","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No se ha actualizado ninguna visualización. Compruebe que tiene permiso para cambiar el uso compartido de todas las visualizaciones.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"No se han podido actualizar correctamente todas las visualizaciones. {{ success }} se ha actualizado correctamente, {{ failed }} no se ha podido actualizar. Compruebe que tiene permiso para cambiar la compartición de todas las visualizaciones.","No visualizations were updated because sharing settings are already sufficient.":"No se ha actualizado ninguna visualización porque los ajustes de compartición ya son suficientes.","Successfully updated sharing for all visualizations.":"Actualizada con éxito la compartición de todas las visualizaciones.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"No era necesario actualizar todos los ajustes de compartición de visualizaciones. {{ updated }} actualizado, {{ skipped }} ya tenía suficientes ajustes de compartición.","There are no users or groups to apply sharing settings for.":"No hay usuarios ni grupos a los que aplicar la configuración de uso compartido.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Número de visualizaciones en este cuadro de mando que potencialmente obtendrán ajustes de uso compartido actualizados: {{ visualizationsCount }}. Número de usuarios o grupos a los que se aplicarán estos ajustes actualizados: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Aplicando la misma configuración de compartición se garantiza que los usuarios y grupos que tienen acceso al cuadro de mando también tienen al menos acceso de "sólo visualización" a sus visualizaciones (gráficos, tablas, mapas, gráficos de eventos e informes de eventos).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Si un usuario o grupo ya tiene acceso "Ver y editar" a una visualización, éste no se reducirá a "Sólo ver". El nivel de acceso "Todos los usuarios" no se actualizará ni cambiará.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"La aplicación de la compartición no puede deshacerse, y debe hacerse de nuevo si se añaden nuevas visualizaciones al cuadro de mandos o se cambia su configuración de compartición.","Sharing and access: {{- objectName}}":"Compartir y acceder: {{- objectName}}","Sharing and access":"Compartir y acceder",Close:O9,"Dashboard sharing":"Compartir el cuadro de mandos"},F9="",B9="",$9="",U9={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:F9,"Remove access":"","User or group":"",Search:B9,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Jokin meni pieleen","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:$9,"Dashboard sharing":""},V9="Utilisateur",G9="Données",H9="Métadonnées",q9="Chercher",W9="Fermer",Y9={"View only":"","View and edit":"","No access":"Pas d'accès","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Non disponible hors ligne","Metadata access level":"","Access level":"Niveau d'accès","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Groupe d'utilisateurs",User:V9,Data:G9,"Remove access":"",Metadata:H9,"User or group":"",Search:q9,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Quelque chose a mal tourné","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:W9,"Dashboard sharing":""},Z9="",X9="",K9="",Q9="",J9="बंद करें",e8={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:Z9,Data:X9,"Remove access":"",Metadata:K9,"User or group":"",Search:Q9,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"कुछ गलत हुआ","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:J9,"Dashboard sharing":""},t8="",i8="Data",r8="Metadata",n8="Pencarian",s8="Tutup",a8={"View only":"","View and edit":"","No access":"Tidak ada akses","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:t8,Data:i8,"Remove access":"",Metadata:r8,"User or group":"",Search:n8,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Terjadi kesalahan","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:s8,"Dashboard sharing":""},o8="",l8="Data",c8="ទិន្នន័យ",u8="ស្វែងរក",d8="បិទ",h8={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:o8,Data:l8,"Remove access":"",Metadata:c8,"User or group":"",Search:u8,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:d8,"Dashboard sharing":""},p8="ຜູ້ໃຊ້",f8="ຂໍ້ມູນ",m8="ໂຄງຮ່າງຖານຂໍ້ມູນ",g8="ຄົ້ນຫາ",y8="ປິດ",v8={"View only":"ເບິ່ງໄດ້ເທົ່ານັ້ນ","View and edit":"ເບິ່ງ ແລະ ແກ້ໄຂ","No access":"ບໍ່ມີການເຂົ້າເຖີງ","Give access to a user or group":"ໃຫ້ຜູ້ໃຊ້ ຫຼື ກຸ່ມເຂົ້າເຖິງ","Data access level":"","Choose a level":"","Not available offline":"ບໍ່ສາມາດໃຊ້ໄດ້ອອບລາຍ","Metadata access level":"","Access level":"ຂັ້ນການເຂົ້າເຖິງ","Give access":"ໃຫ້ການເຂົ້າເຖິງ","Users and groups that currently have access":"ຜູ້ໃຊ້ ແລະ ກຸ່ມທີ່ໄດ້ເຂົ້າເຖິງ","User / Group":"ຜູ້ໃຊ້ / ກຸ່ມ","All users":"ຜູ້ໃຊ້ທັງໝົດ","Anyone logged in":"","User group":"",User:p8,Data:f8,"Remove access":"ເອົາການເຂົ້າເຖິງອອກ",Metadata:m8,"User or group":"ຜູ້ໃຊ້ ຫຼື ກຸ່ມ",Search:g8,"Apply dashboard sharing settings to visualizations":"ນຳໃຊ້ການຕັ້ງຄ່າແບ່ງປັນກະດານຂ່າວກັບພາບຂໍ້ມູນ","Something went wrong":"ມີບາງຢ່າງຜິດພາດ","Apply sharing to dashboard visualizations":"ນຳໃຊ້ການແບ່ງປັນພາບຂໍ້ມູນກັບກະດານຂ່າວ","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"ບໍ່ມີການອັບເດດພາບຂໍ້ມູນ. ກວດເບິ່ງຄືນວ່າທ່ານໄດ້ຮັບການອະນຸຍາດໃຫ້ປ່ຽນການແບ່ງປັນສໍາລັບພາບຂໍ້ມູນ.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"ພາບຂໍ້ມູນທັງໝົດບໍ່ສາມາດອັບເດດໄດ້ສຳເລັດ. ອັບເດດ {{ success }} ສຳເລັດແລ້ວ, {{ failed }} ລົ້ມເຫລວໃນການອັບເດດ. ກວດເບິ່ງວ່າທ່ານໄດ້ຮັບການອະນຸຍາດໃຫ້ປ່ຽນການແບ່ງປັນສໍາລັບພາບຂໍ້ມູນທັງຫມົດ.","No visualizations were updated because sharing settings are already sufficient.":"ບໍ່ມີການອັບເດດພາບຂໍ້ມູນເນື່ອງຈາກການຕັ້ງຄ່າການແບ່ງປັນພຽງພໍແລ້ວ.","Successfully updated sharing for all visualizations.":"ອັບເດດການແບ່ງປັນສຳເລັດແລ້ວສຳລັບພາບຂໍ້ມູນທັງໝົດ.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"ບໍ່ແມ່ນການຕັ້ງຄ່າການແບ່ງປັນພາບທັງໝົດທີ່ຈຳເປັນເພື່ອອັບເດດ. {{ updated }} ອັບເດດແລ້ວ, {{ skipped }} ມີການຕັ້ງຄ່າການແບ່ງປັນພຽງພໍແລ້ວ.","There are no users or groups to apply sharing settings for.":"ບໍ່ມີຜູ້ໃຊ້ ຫຼື ກຸ່ມສຳລັບການນໍາໃຊ້ການຕັ້ງຄ່າແບ່ງປັນ.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"ຈຳນວນພາບຂໍ້ມູນໃນກະດານຂ່າວນີ້ທີ່ອາດຈະໄດ້ມີການອັບເດດການຕັ້ງຄ່າການແບ່ງປັນ: {{ visualizationsCount }}. ຈຳນວນຜູ້ໃຊ້ ຫຼືກຸ່ມທີ່ອັບເດດການຕັ້ງຄ່າເຫຼົ່ານີ້ຈະໃຊ້ກັບ: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'ການໃຊ້ການຕັ້ງຄ່າແບບແບ່ງປັນຄືກັນແມ່ນຕ້ອງໃຫ້ແນ່ໃຈວ່າຜູ້ໃຊ້ ແລະ ກຸ່ມທີ່ເຂົ້າເຖິງກະດານຂ່າວສາມາດ "ເບິ່ງເທົ່ານັ້ນ" ໃນພາບຂໍ້ມູນ (ແຜນການ, ຕາຕະລາງ, ແຜນທີ່, ຕາຕະລາງເຫດການ ແລະ ການລາຍງານເຫດການ).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'ຖ້າຜູ້ໃຊ້ ຫຼື ກຸ່ມມີການເຂົ້າເຖິງແບບ "ເບິ່ງ ແລະແກ້ໄຂ" ຕໍ່ພາບຂໍ້ມູນນັ້ນຈະບໍ່ຖືກຫຼຸດລົງເປັນ "ເບິ່ງເທົ່ານັ້ນ". ການເຂົ້າເຖິງຂັ້ນ "ຜູ້ໃຊ້ທັງໝົດ" ຈະບໍ່ຖືກອັບເດດ ຫຼື ປ່ຽນແປງ.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"ການໃຊ້ການແບ່ງປັນບໍ່ສາມາດຍົກເລີກໄດ້, ແລະຕ້ອງເຮັດອີກຄັ້ງ ຖ້າມີການເພີ່ມພາບຂໍ໊ມູນໃໝ່ໃນກະດານຂ່າວ ຫຼື ການຕັ້ງຄ່າການແບ່ງປັນຂອງມັນມີການປ່ຽນແປງ.","Sharing and access: {{- objectName}}":"ການແບ່ງປັນ ແລະ ການເຂົາເຖິງ: {{- objectName}}","Sharing and access":"ການແບ່ງປັນ ແລະ ການເຂົ້າເຖິງ",Close:y8,"Dashboard sharing":"ການແບ່ງປັນກະດານຂ່າວ"},x8="",b8="အချက်အလက်",w8="",_8="",C8="ပိတ်သည်",T8={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:x8,Data:b8,"Remove access":"",Metadata:w8,"User or group":"",Search:_8,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:C8,"Dashboard sharing":""},S8="Bruker",E8="Data",k8="Metadata",M8="Søk",A8="Lukk",I8={"View only":"","View and edit":"","No access":"Ingen tilgang","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Ikke tilgjengelig i frakoblet modus","Metadata access level":"","Access level":"Tilgangsnivå","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Brukergruppe",User:S8,Data:E8,"Remove access":"",Metadata:k8,"User or group":"",Search:M8,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Noe gikk galt","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:A8,"Dashboard sharing":""},P8="",D8="खोज",R8="",L8={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:P8,"Remove access":"","User or group":"",Search:D8,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:R8,"Dashboard sharing":""},N8="Gebruiker",z8="Gegevens",O8="Metagegevens",j8="Zoek",F8="Sluit",B8={"View only":"Alleen bekijken","View and edit":"Bekijk en bewerk","No access":"Geen toegang","Give access to a user or group":"Geef toegang aan een gebruiker of groep","Data access level":"","Choose a level":"","Not available offline":"Niet beschikbaar offline","Metadata access level":"","Access level":"Toegangsniveau","Give access":"Toegang geven","Users and groups that currently have access":"Gebruikers en groepen die momenteel toegang hebben","User / Group":"Gebruiker / groep","All users":"Alle gebruikers","Anyone logged in":"","User group":"",User:N8,Data:z8,"Remove access":"Toegang verwijderen",Metadata:O8,"User or group":"Gebruiker of groep",Search:j8,"Apply dashboard sharing settings to visualizations":"Instellingen voor delen van dashboards toepassen op visualisaties","Something went wrong":"Er is iets fout gegaan.","Apply sharing to dashboard visualizations":"Pas delen toe op dashboardvisualisaties","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Er zijn geen visualisaties bijgewerkt. Controleer of u gemachtigd bent om het delen voor alle visualisaties te wijzigen.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Niet alle visualisaties konden met succes worden bijgewerkt. {{ success }} succesvol bijgewerkt, {{ failed }} kan niet worden bijgewerkt. Controleer of u gemachtigd bent om het delen voor alle visualisaties te wijzigen.","No visualizations were updated because sharing settings are already sufficient.":"Er zijn geen visualisaties bijgewerkt omdat de instellingen voor delen al voldoende zijn.","Successfully updated sharing for all visualizations.":"Delen voor alle visualisaties is geüpdatet.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Niet alle instellingen voor het delen van visualisaties hoefden te worden bijgewerkt. {{ updated }} bijgewerkt, {{ skipped }} had al voldoende instellingen voor delen.","There are no users or groups to apply sharing settings for.":"Er zijn geen gebruikers of groepen om instellingen voor delen toe te passen.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Aantal visualisaties op dit dashboard dat mogelijk geüpdatete instellingen voor delen krijgt: {{ visualizationsCount }}. Het aantal gebruikers of groepen waarop deze bijgewerkte instellingen van toepassing zijn: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Het toepassen van dezelfde instellingen voor delen zorgt ervoor dat gebruikers en groepen die toegang hebben tot het dashboard ook ten minste "Alleen weergeven" toegang hebben tot de visualisaties (grafieken, tabellen, kaarten, gebeurtenisgrafieken en gebeurtenisrapporten).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':`Als een gebruiker of groep al het recht "Bekijken en bewerken" heeft voor een visualisatie, wordt dit niet beperkt tot "Alleen weergeven". Het toegangsniveau 'Alle gebruikers' wordt niet bijgewerkt of gewijzigd.`,"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Het toepassen van delen kan niet ongedaan worden gemaakt en moet opnieuw worden gedaan als er nieuwe visualisaties aan het dashboard worden toegevoegd of als de instellingen voor delen worden gewijzigd.","Sharing and access: {{- objectName}}":"Delen en toegang: {{- objectName}}","Sharing and access":"Delen en toegang",Close:F8,"Dashboard sharing":"Dashboard delen"},$8="استفاده کننده",U8="دیتا",V8="",G8="جستجو",H8="بستن",q8={"View only":"","View and edit":"","No access":"دسترسی وجود ندارد","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"گروپ استفاده کننده",User:$8,Data:U8,"Remove access":"",Metadata:V8,"User or group":"",Search:G8,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:H8,"Dashboard sharing":""},W8="",Y8="مالومات (ډاټا)",Z8="",X8="جستجو",K8="بند یې کړئ",Q8={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:W8,Data:Y8,"Remove access":"",Metadata:Z8,"User or group":"",Search:X8,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:K8,"Dashboard sharing":""},J8="Utilizador",eF="Dados",tF="Metadados",iF="Pesquisar",rF="Fechar",nF={"View only":"Ver apenas","View and edit":"Visualizar e editar","No access":"Sem acesso","Give access to a user or group":"Atribuir acesso a um utilizador ou grupo","Data access level":"Nível de acesso aos dados","Choose a level":"Escolher um nível","Not available offline":"Não disponível offline","Metadata access level":"Nível de acesso aos metadados","Access level":"Niveis de acesso ","Give access":"Atribuir acesso","Users and groups that currently have access":"Utilizadores e grupos que têm atualmente acesso","User / Group":"Utilizador / Grupo","All users":"Todos os utilizadores","Anyone logged in":"Qualquer pessoa com sessão iniciada","User group":"Grupo de usuários",User:J8,Data:eF,"Remove access":"Remover o acesso",Metadata:tF,"User or group":"Utilizador ou grupo",Search:iF,"Apply dashboard sharing settings to visualizations":"Aplicar definições de partilha do dashboard às visualizações","Something went wrong":"Ocorreu algo de errado","Apply sharing to dashboard visualizations":"Aplicar a partilha às visualizações de dashboard","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Nenhuma visualização foi atualizada. Verifique se você tem permissão para alterar a compartilha de todas as visualizações.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Nem todas as visualizações puderam ser atualizadas com sucesso. {{ success }} foi atualizado com sucesso, {{ failed }} falhou na atualização. Verifique se você tem permissão para alterar a compartilha de todas as visualizações.","No visualizations were updated because sharing settings are already sufficient.":"Não foram actualizadas quaisquer visualizações porque as definições de partilha já são suficientes.","Successfully updated sharing for all visualizations.":"Partilha actualizada com êxito para todas as visualizações.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Nem todas as definições de partilha de visualizações precisavam de ser actualizadas. {{ updated }} atualizado, {{ skipped }} já tinha definições de partilha suficientes.","There are no users or groups to apply sharing settings for.":"Não existem utilizadores ou grupos aos quais aplicar definições de partilha.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Número de visualizações neste painel que potencialmente receberão definições de partilha actualizadas: {{ visualizationsCount }}. O número de utilizadores ou grupos aos quais estas definições actualizadas se aplicarão: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"Aplicar as mesmas configurações de partilha garante que os utilizadores e grupos que têm acesso ao dashboard também tenham, pelo menos, acesso de 'Apenas visualização' às suas visualizações (gráficos, tabelas, mapas, gráficos de eventos e relatórios de eventos).",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"Se um utilizador ou grupo já tem acesso de 'Visualizar e editar' a uma visualização, este acesso não será reduzido para 'Apenas visualização'. O nível de acesso 'Todos os utilizadores' não será atualizado nem alterado.","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Aplicar as configurações de partilha não pode ser desfeito, e precisa ser feito novamente se novas visualizações forem adicionadas ao dashboard ou se as suas configurações de partilha forem alteradas.","Sharing and access: {{- objectName}}":"Partilha e acesso: {{- objectName}}","Sharing and access":"Partilha e acesso",Close:rF,"Dashboard sharing":"Partilha do painel"},sF="Usuário",aF="Dados",oF="Metadados",lF="Pesquisar",cF="Fechar",uF={"View only":"","View and edit":"","No access":"Sem acesso","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Grupo de usuários",User:sF,Data:aF,"Remove access":"",Metadata:oF,"User or group":"",Search:lF,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:cF,"Dashboard sharing":""},dF="",hF="Căutare",pF="Închidere",fF={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:dF,"Remove access":"","User or group":"",Search:hF,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:pF,"Dashboard sharing":""},mF="Пользователь",gF="Данные",yF="Метаданные",vF="Поиск",xF="Закрыть",bF={"View only":"Только просмотр","View and edit":"Просмотр и редактирование","No access":"Нет доступа","Give access to a user or group":"Предоставить доступ пользователю или группе","Data access level":"","Choose a level":"","Not available offline":"Недоступно в автономном режиме","Metadata access level":"","Access level":"Уровень доступа","Give access":"Предоставить доступ","Users and groups that currently have access":"Пользователи и группы с доступом","User / Group":"Пользователь / Группа","All users":"Все пользователи","Anyone logged in":"","User group":"Группа пользователей",User:mF,Data:gF,"Remove access":"Удалить доступ",Metadata:yF,"User or group":"Пользователь или группа",Search:vF,"Apply dashboard sharing settings to visualizations":"Применить параметры доступа к инфопанели к визуализациям","Something went wrong":"Что-то пошло не так","Apply sharing to dashboard visualizations":"Применить параметры доступа к визуализациям инфопанели","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Визуализации не были обновлены. Убедитесь, что у вас есть право на изменение параметров доступа ко всем визуализациям.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Не все визуализации были успешно обновлены. Обновлено: {{ success }}, не обновлено: {{ failed }} . Убедитесь, что у вас есть право на изменение общего параметров доступа ко всем визуализациям.","No visualizations were updated because sharing settings are already sufficient.":"Визуализации не были обновлены, необходимые права доступа уже предоставлены.","Successfully updated sharing for all visualizations.":"Доступ ко всем визуализациям успешно обновлен","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Нет необходимости обнавлять все параметры доступа к визуализациям. Обновлено: {{ updated }}, доступ уже предоставлен: {{ skipped }}.","There are no users or groups to apply sharing settings for.":"Нет пользователей или групп для применения настроек общего доступа.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Количество визуализаций на данной инфопанели, которые потенциально получат обновленные настройки доступа: {{ visualizationsCount }}. Количество пользователей или групп, к которым будут применены обновленные настройки: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"Применение одинаковых параметров доступа гарантирует пользователям и группам, имеющим доступ к инфопанели, доступ (как минимум на просмотр) к ее визуализациям (графикам, таблицам, картам, графикам событий и отчетам).",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Если у пользователя или группы уже есть доступ "Просмотр и редактирование" к визуализации, он не будет уменьшен до "Только просмотр". Уровень доступа "Все пользователи" не будет обновлен или изменен.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Параметров доступа нельзя отменить. Параметры должны устанавливаться заново, если на инфопанель добавлены новые визуализации или настройки доступа изменены.","Sharing and access: {{- objectName}}":"Доступ: {{- objectName}}","Sharing and access":"Совместное использование и доступ",Close:xF,"Dashboard sharing":" Совместное использование инфопанели"},wF="",_F="දත්ත",CF="",TF="සොයන්න",SF="වසන්න",EF={"View only":"","View and edit":"","No access":"පිවිසිය නොහැක","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"මාර්ග අපගතව නොතිබේ","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:wF,Data:_F,"Remove access":"",Metadata:CF,"User or group":"",Search:TF,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:SF,"Dashboard sharing":""},kF="",MF="Data",AF="Metadata",IF="Sök",PF="Stänga",DF={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:kF,Data:MF,"Remove access":"",Metadata:AF,"User or group":"",Search:IF,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Något gick fel","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:PF,"Dashboard sharing":""},RF="",LF="Dadus",NF="",zF="",OF="Taka",jF={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:RF,Data:LF,"Remove access":"",Metadata:NF,"User or group":"",Search:zF,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:OF,"Dashboard sharing":""},FF="Корбар",BF="Иттилоот",$F="",UF="Ҷустуҷӯ",VF="Пӯшидан",GF={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:FF,Data:BF,"Remove access":"",Metadata:$F,"User or group":"",Search:UF,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:VF,"Dashboard sharing":""},HF="Користувач",qF="Дані",WF="Метадані",YF="Пошук",ZF="Закрити",XF={"View only":"Тільки перегляд","View and edit":"Перегляд і редагування","No access":"Немає доступу","Give access to a user or group":"Надати доступ користувачеві або групі","Data access level":"","Choose a level":"","Not available offline":"Недоступно в автономному режимі","Metadata access level":"","Access level":"Рівень доступу","Give access":"Надати доступ","Users and groups that currently have access":"Користувачі та групи, які наразі мають доступ","User / Group":"Користувач / Група","All users":"Всі користувачі","Anyone logged in":"","User group":"Група користувачів",User:HF,Data:qF,"Remove access":"Видалити доступ",Metadata:WF,"User or group":"Користувач або група",Search:YF,"Apply dashboard sharing settings to visualizations":"Застосувати налаштування спільного доступу до інформаційної панелі до візуалізації","Something went wrong":"Сталася помилка","Apply sharing to dashboard visualizations":"Застосувати спільний доступ до візуалізації інформаційної панелі","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Візуалізації не оновлено. Переконайтеся, що у вас є дозвіл на зміну спільного доступу для всіх візуалізацій.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Не всі візуалізації вдалося оновити. {{ success }} успішно оновлено, {{ failed }} не вдалося оновити. Переконайтеся, що у вас є дозвіл на зміну спільного доступу для всіх візуалізацій.","No visualizations were updated because sharing settings are already sufficient.":"Візуалізації не оновлено, оскільки налаштувань спільного доступу вже достатньо.","Successfully updated sharing for all visualizations.":"Успішно оновлено спільний доступ для всіх візуалізацій.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Не всі налаштування спільного доступу до візуалізації потрібно було оновити. {{ updated }} оновлено, {{ skipped }} вже має достатньо налаштувань спільного доступу.","There are no users or groups to apply sharing settings for.":"Немає користувачів або груп, для яких можна застосувати налаштування спільного доступу.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Кількість візуалізацій на цій інформаційній панелі, які потенційно отримають оновлені налаштування спільного доступу: {{ visualizationsCount }}. Кількість користувачів або груп, до яких застосовуватимуться ці оновлені налаштування: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Застосування однакових налаштувань спільного доступу гарантує, що користувачі та групи, які мають доступ до інформаційної панелі, також мають принаймні доступ "Тільки перегляд" до її візуалізацій (діаграми, таблиці, мапи, діаграми подій та звіти про події).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Якщо користувач або група вже мають доступ до візуалізації "Перегляд і редагування", це не буде зведено до рівня "Тільки перегляд". Рівень доступу "Усі користувачі" не буде оновлено або змінено.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Застосування спільного доступу неможливо скасувати, і його потрібно виконати знову, якщо на інформаційній панелі додано нові візуалізації або змінено налаштування спільного доступу.","Sharing and access: {{- objectName}}":"Спільний доступ: {{- objectName}}","Sharing and access":"Спільний доступ",Close:ZF,"Dashboard sharing":"Спільний доступ до інформаційної панелі"},KF="صارف",QF="ڈیٹا",JF="میٹا ڈیٹا",eB="تلاش کریں",tB="بند",iB={"View only":"","View and edit":"","No access":"داخلہ ممنوع ہے","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"صارف گروپ",User:KF,Data:QF,"Remove access":"",Metadata:JF,"User or group":"",Search:eB,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:tB,"Dashboard sharing":""},rB="Metadata",nB="Izlash",sB="Yopmoq",aB={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"Pogʼonani tanlang","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"Kirish taʼqiqlangan","Can view":"Кўриш мумкин","Can view and edit":"",Metadata:rB,"Remove access":"","User or group":"",Search:nB,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Nimadir notoʼgʼri bajarildi","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:sB,"Dashboard sharing":""},oB="Фойдаланувчи",lB="Маълумот",cB="МетаМаълумот",uB="Қидириш",dB="Ёпиш",hB={"View only":"Фақат кўриш учун","View and edit":"Кўриш ва таҳрирлаш","No access":"Кириш ҳуқуқи мавжуд эмас","Give access to a user or group":"Фойдаланувчи ёки гуруҳга киришга рухсат бериш","Data access level":"","Choose a level":"","Not available offline":"Оффлайн режимда мавжуд эмас","Metadata access level":"","Access level":"Кириш мумкин бўлган босқичлар","Give access":"Рухсат бериш","Users and groups that currently have access":"Рухсати бор бўлган яойдаланувчилар ёки гуруҳлар","User / Group":"Фойдаланувчи/Гуруҳ","All users":"Барча фойдаланувчилар","Anyone logged in":"","User group":"Фойдаланувчи гуруҳи",User:oB,Data:lB,"Remove access":"Рухсатни бекор қилиш",Metadata:cB,"User or group":"Фойдаланувчи ёки гуруҳ",Search:uB,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Нимадир нотўғри бажарилди","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"Уланиш ва кириш: {{- objectName}}","Sharing and access":"Уланиш ва кириш",Close:dB,"Dashboard sharing":"Бошқарув панелига уланиш"},pB="Foydalanuvchi",fB="Маълумот",mB="Metadata",gB="Izlash",yB="Yopmoq",vB={"View only":"","View and edit":"","No access":"Kirish taʼqiqlangan","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:pB,Data:fB,"Remove access":"",Metadata:mB,"User or group":"",Search:gB,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Nimadir notoʼgʼri bajarildi","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:yB,"Dashboard sharing":""},xB="Người dùng",bB="Dữ liệu",wB="Siêu dữ liệu",_B="Tìm kiếm",CB="Đóng lại",TB={"View only":"Chỉ xem","View and edit":"","No access":"Không truy cập","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Không có cho ngoại tuyến","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Nhóm Người Dùng",User:xB,Data:bB,"Remove access":"",Metadata:wB,"User or group":"",Search:_B,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Có lỗi","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:CB,"Dashboard sharing":""},SB="用户",EB="数据",kB="元数据",MB="搜索",AB="关闭",IB={"View only":"只读","View and edit":"查看和编辑","No access":"不能访问","Give access to a user or group":"授予用户或组访问权限","Data access level":"数据访问级别","Choose a level":"选择级别","Not available offline":"离线不可用","Metadata access level":"元数据访问级别","Access level":"访问等级","Give access":"授予访问权限","Users and groups that currently have access":"当前具有访问权限的用户和组","User / Group":"用户/组","All users":"全部用户","Anyone logged in":"已经登录的任何人","User group":"用户组",User:SB,Data:EB,"Remove access":"删除访问权限",Metadata:kB,"User or group":"用户或组",Search:MB,"Apply dashboard sharing settings to visualizations":"将仪表板共享设置应用于可视化","Something went wrong":"出问题了","Apply sharing to dashboard visualizations":"将共享应用于仪表板可视化","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"没有更新可视化。检查您是否有权更改所有可视化的共享。","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"并非所有可视化都可以成功更新。 {{ success }}更新成功，{{ failed }}更新失败。检查您是否有权更改所有可视化的共享。","No visualizations were updated because sharing settings are already sufficient.":"没有更新可视化，因为共享设置已经足够了。","Successfully updated sharing for all visualizations.":"已成功更新所有可视化的共享。","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"并非所有可视化共享设置都需要更新。 {{ updated }}更新，{{ skipped }}已经有足够的分享设置。","There are no users or groups to apply sharing settings for.":"没有要应用共享设置的用户或组。","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"此仪表板上可能会获得更新共享设置的可视化数量：{{ visualizationsCount }}。这些更新的设置将应用于的用户或组的数量：{{ entityAmount }}。",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"应用相同的共享设置可确保有权访问仪表板的用户和组也至少具有对其可视化（图表、表格、地图、事件图表和事件报告）的“仅查看”访问权限。",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"如果用户或组已经具有对可视化的“查看和编辑”访问权限，则这不会减少为“仅查看”。 “所有用户”访问级别不会更新或更改。","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"应用共享无法撤消，如果新的可视化添加到仪表板或更改其共享设置，则需要再次执行。","Sharing and access: {{- objectName}}":"共享和访问：{{- objectName}}","Sharing and access":"共享和访问",Close:AB,"Dashboard sharing":"仪表板共享"},PB="用户",DB="数据",RB="元数据",LB="搜索",NB="关闭",zB={"View only":"只读","View and edit":"","No access":"不能访问","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"访问等级","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"User组",User:PB,Data:DB,"Remove access":"",Metadata:RB,"User or group":"",Search:LB,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"出了些问题","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:NB,"Dashboard sharing":""},Nr="default";ve.addResources("ar",Nr,Q6);ve.addResources("ar_IQ",Nr,n9);ve.addResources("ckb",Nr,l9);ve.addResources("cs",Nr,f9);ve.addResources("da",Nr,b9);ve.addResources("en",Nr,E9);ve.addResources("es",Nr,D9);ve.addResources("es_419",Nr,j9);ve.addResources("fi",Nr,U9);ve.addResources("fr",Nr,Y9);ve.addResources("hi_IN",Nr,e8);ve.addResources("id",Nr,a8);ve.addResources("km",Nr,h8);ve.addResources("lo",Nr,v8);ve.addResources("my",Nr,T8);ve.addResources("nb",Nr,I8);ve.addResources("ne",Nr,L8);ve.addResources("nl",Nr,B8);ve.addResources("prs",Nr,q8);ve.addResources("ps",Nr,Q8);ve.addResources("pt",Nr,nF);ve.addResources("pt_BR",Nr,uF);ve.addResources("ro",Nr,fF);ve.addResources("ru",Nr,bF);ve.addResources("si",Nr,EF);ve.addResources("sv",Nr,DF);ve.addResources("tet",Nr,jF);ve.addResources("tg",Nr,GF);ve.addResources("uk",Nr,XF);ve.addResources("ur",Nr,iB);ve.addResources("uz_Latn",Nr,aB);ve.addResources("uz_UZ_Cyrl",Nr,hB);ve.addResources("uz_UZ_Latn",Nr,vB);ve.addResources("vi",Nr,TB);ve.addResources("zh",Nr,IB);ve.addResources("zh_CN",Nr,zB);const hw=i=>{let{onClose:e,name:t,children:r,dataTest:n="dhis2-uicore-sharingdialog-modal"}=i;const a=t?ve.t("Sharing and access: {{- objectName}}",{objectName:t,nsSeparator:"|"}):ve.t("Sharing and access");return de.createElement(va,{large:!0,position:"top",onClose:e,dataTest:n},de.createElement(Oo,null,a),de.createElement(go,null,r),de.createElement(jo,null,de.createElement(to,{end:!0},de.createElement(Ti,{type:"button",secondary:!0,onClick:e},ve.t("Close")))))};hw.propTypes={children:X.node.isRequired,dataTest:X.string,name:X.string,onClose:X.func};const Np=de.forwardRef((i,e)=>{let{icon:t,onClick:r,selected:n,disabled:a,children:c,className:s,dataTest:h="dhis2-uicore-tab"}=i,p=Ie.useRef(null);e&&(p=e);const[m,y]=Ie.useState(!1);return Ie.useEffect(()=>{(()=>{const x=p.current.scrollWidth>p.current.clientWidth;y(x)})()},[]),de.createElement("button",{onClick:a?void 0:g=>r({},g),"data-test":h,ref:p,role:"tab","aria-selected":n?"true":"false","aria-disabled":a?"true":"false",onFocus:a?void 0:g=>r({},g),tabIndex:-1,className:yt.dynamic([["2433456263",[Me.grey400,Me.grey600,Jt.focus,Me.grey600,Me.grey900,Me.grey600,Me.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,Me.grey500,Me.grey500]]])+` ${Gi("tab",s,{selected:n,disabled:a})}`},t,m?de.createElement(Gl,{content:c,maxWidth:"100%"},de.createElement("span",{ref:p,className:yt.dynamic([["2433456263",[Me.grey400,Me.grey600,Jt.focus,Me.grey600,Me.grey900,Me.grey600,Me.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,Me.grey500,Me.grey500]]])},c)):de.createElement("span",{ref:p,className:yt.dynamic([["2433456263",[Me.grey400,Me.grey600,Jt.focus,Me.grey600,Me.grey900,Me.grey600,Me.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,Me.grey500,Me.grey500]]])},c),de.createElement(yt,{id:"2433456263",dynamic:[Me.grey400,Me.grey600,Jt.focus,Me.grey600,Me.grey900,Me.grey600,Me.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,Me.grey500,Me.grey500]},[`button.__jsx-style-dynamic-selector{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;position:relative;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;vertical-align:bottom;height:100%;padding:16px 16px 11px;background-color:transparent;outline:none;border:none;border-bottom:1px solid ${Me.grey400};color:${Me.grey600};font-size:14px;line-height:20px;cursor:pointer;}`,".fixed>button.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}","button.__jsx-style-dynamic-selector::after{content:' ';display:block;position:absolute;bottom:-1px;inset-inline-start:0;height:4px;width:100%;background-color:transparent;}","span.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;max-width:320px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-transition:fill 150ms ease-in-out;transition:fill 150ms ease-in-out;}",`button.__jsx-style-dynamic-selector:focus{outline:3px solid ${Jt.focus};outline-offset:-3px;}`,"button.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector:not(:focus-visible){outline:none;}",`button.__jsx-style-dynamic-selector>svg{fill:${Me.grey600};width:14px;height:14px;margin:0 4px 0 0;}`,`button.__jsx-style-dynamic-selector:hover{color:${Me.grey900};}`,`button.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector::after{background-color:${Me.grey600};height:2px;}`,`button.__jsx-style-dynamic-selector:active.__jsx-style-dynamic-selector::after{background-color:${Me.grey800};}`,`button.selected.__jsx-style-dynamic-selector{color:${Jt.primary800};}`,`button.selected.__jsx-style-dynamic-selector::after{background-color:${Jt.primary700};-webkit-transition:background-color 150ms ease-in-out;transition:background-color 150ms ease-in-out;}`,`button.selected.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector::after{background-color:${Jt.primary700};height:4px;}`,`button.selected.__jsx-style-dynamic-selector>svg{fill:${Jt.primary700};}`,`button.disabled.__jsx-style-dynamic-selector{color:${Me.grey500};cursor:not-allowed;}`,"button.disabled.__jsx-style-dynamic-selector:hover,button.selected.__jsx-style-dynamic-selector:hover{background-color:transparent;}",`button.disabled.__jsx-style-dynamic-selector>svg{fill:${Me.grey500};}`]))});Np.propTypes={children:X.node,className:X.string,dataTest:X.string,disabled:X.bool,icon:X.element,selected:X.bool,onClick:X.func};Np.displayName="Tab";const SA=250,OB=.5;function jB(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=i.scrollLeft,n=FB(i,r,t),a=n-r,c=BB({scrollBox:i,callback:e,startValue:r,endValue:n,change:a});window.requestAnimationFrame(c)}function FB(i,e,t){const r=i.clientWidth*OB;return Math.floor(e+r*(t?-1:1))}function BB(i){let{scrollBox:e,callback:t,startValue:r,endValue:n,change:a}=i,c,s,h;return function p(m){c||(c=m),s=m-c,h=$B({currentTime:s,startValue:r,change:a}),s>=SA?(h!==n&&(e.scrollLeft=n),t&&t()):(e.scrollLeft=h,window.requestAnimationFrame(p))}}function $B(i){let{currentTime:e,startValue:t,change:r}=i;return(e/=SA/2)<1?r/2*e*e+t:-r/2*(--e*(e-2)-1)+t}let Jy;const pw="__vertical-scrollbar-height-test__",UB=`
    .${pw} {
        position: absolute;
        top: -9999px;
        width: 100px;
        height: 100px;
        overflow-x: scroll;
    }
    .${pw}::-webkit-scrollbar {
        display: none;
    }
`;function VB(){if(Jy)return Jy;const i=document.createElement("style");i.innerHTML=UB;const e=document.createElement("div");return e.classList.add(pw),document.body.appendChild(i),document.body.appendChild(e),Jy=e.offsetHeight-e.clientHeight,document.body.removeChild(i),document.body.removeChild(e),Jy}const ov=i=>{let{children:e,disabled:t,hidden:r,onClick:n}=i;return de.createElement("button",{onClick:t?void 0:n,className:yt.dynamic([["2701682090",[Me.white,Me.grey400,Me.grey600,Me.grey100,Me.grey200,Me.grey500]]])+" "+(Gi("scroll-button",{disabled:t,hidden:r})||"")},e,de.createElement(yt,{id:"2701682090",dynamic:[Me.white,Me.grey400,Me.grey600,Me.grey100,Me.grey200,Me.grey500]},[`.scroll-button.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:inherit;background-color:${Me.white};border:none;border-bottom:1px solid ${Me.grey400};outline:none;padding:16px 16px 11px 16px;cursor:pointer;}`,".scroll-button.hidden.__jsx-style-dynamic-selector{display:none;}",`.scroll-button.__jsx-style-dynamic-selector svg{width:20px;height:20px;fill:${Me.grey600};-webkit-transition:opacity 150ms ease-in-out;transition:opacity 150ms ease-in-out;opacity:1;}`,`.scroll-button.__jsx-style-dynamic-selector:hover{background-color:${Me.grey100};}`,`.scroll-button.__jsx-style-dynamic-selector:active{background-color:${Me.grey200};}`,".scroll-button.disabled.__jsx-style-dynamic-selector{cursor:not-allowed;}",".scroll-button.disabled.__jsx-style-dynamic-selector:hover{background-color:transparent;}",`.scroll-button.disabled.__jsx-style-dynamic-selector svg{fill:${Me.grey500};}`]))};ov.displayName="ScrollButton";ov.propTypes={children:X.any.isRequired,disabled:X.bool,hidden:X.bool,onClick:X.func};function _c(i,e,t){return(e=GB(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function GB(i){var e=HB(i,"string");return typeof e=="symbol"?e:e+""}function HB(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class EA extends Ie.Component{constructor(e){super(e),_c(this,"scrollBox",Ie.createRef()),_c(this,"scrollArea",Ie.createRef()),_c(this,"horizontalScrollBarHeight",VB()),_c(this,"scrollBoxResizeObserver",null),_c(this,"calculateShouldHideButtons",()=>{this.setState({hideScrollButtonsInitialized:!1});const{current:t}=this.scrollBox,{current:r}=this.scrollArea,n=r.offsetWidth,a=t.offsetWidth,c=n<=a;this.setState({hideScrollButtons:c}),c||(this.state.scrolledToStart&&this.scrollLeft(),this.state.scrolledToEnd&&this.scrollRight()),this.setState({hideScrollButtonsInitialized:!0})}),_c(this,"scrollRight",()=>this.scroll()),_c(this,"scrollLeft",()=>this.scroll(!0)),_c(this,"animatedScrollCallback",()=>{this.updateScrolledToStates(),this.attachSideScrollListener()}),_c(this,"updateScrolledToStates",()=>{const{scrollLeft:t,offsetWidth:r}=this.scrollBox.current,{offsetWidth:n}=this.scrollArea.current,a=t<=0,c=t+r>=n;(this.state.scrolledToStart!==a||this.state.scrolledToEnd!==c)&&this.setState({scrolledToStart:a,scrolledToEnd:c})}),this.state={scrolledToStart:!0,scrolledToEnd:!1,hideScrollButtonsInitialized:!1,hideScrollButtons:!1},this.scrollBoxResizeObserver=new ResizeObserver(this.calculateShouldHideButtons)}componentDidMount(){this.scrollSelectedTabIntoView(),this.attachSideScrollListener(),this.manageShouldHideButtons()}componentWillUnmount(){this.removeSideScrollListener(),this.scrollBoxResizeObserver.disconnect()}manageShouldHideButtons(){const{current:e}=this.scrollBox;this.scrollBoxResizeObserver.observe(e),this.calculateShouldHideButtons()}scroll(e){this.removeSideScrollListener(),jB(this.scrollBox.current,this.animatedScrollCallback,e)}scrollSelectedTabIntoView(){const e=this.scrollBox.current,t=e.querySelector(".tab.selected");if(t){const r=t.offsetLeft+t.offsetWidth;r>e.offsetWidth&&(e.scrollLeft=r-e.offsetWidth)}}attachSideScrollListener(){this.scrollBox.current.addEventListener("scroll",this.updateScrolledToStates)}removeSideScrollListener(){this.scrollBox.current.removeEventListener("scroll",this.updateScrolledToStates)}render(){const{scrolledToStart:e,scrolledToEnd:t,hideScrollButtonsInitialized:r,hideScrollButtons:n}=this.state,{children:a,className:c,dataTest:s}=this.props,h=!r||n;return de.createElement("div",{"data-test":s,className:"jsx-191575146 "+yt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" "+(Gi("scroll-bar",c)||"")},de.createElement(ov,{disabled:e,onClick:this.scrollLeft,hidden:h},de.createElement(w_,null)),de.createElement("div",{className:"jsx-191575146 "+yt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-box-clipper"},de.createElement("div",{ref:this.scrollBox,className:"jsx-191575146 "+yt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-box"},de.createElement("div",{ref:this.scrollArea,className:"jsx-191575146 "+yt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-area"},a))),de.createElement(ov,{disabled:t,onClick:this.scrollRight,hidden:h},de.createElement(__,null)),de.createElement(yt,{id:"4174900658",dynamic:[-this.horizontalScrollBarHeight]},[`.scroll-box.__jsx-style-dynamic-selector{margin-bottom:${-this.horizontalScrollBarHeight}px;}`]),de.createElement(yt,{id:"191575146"},[".scroll-bar.jsx-191575146{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;}",".scroll-box-clipper.jsx-191575146{overflow-y:hidden;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".scroll-box.jsx-191575146{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;overflow-x:scroll;-webkit-overflow-scrolling:touch;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".scroll-box.jsx-191575146::-webkit-scrollbar{display:none;}",".scroll-area.jsx-191575146{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;overflow-x:hidden;}"]))}}EA.propTypes={children:X.node.isRequired,dataTest:X.string.isRequired,className:X.string};const fw=i=>{let{children:e,fixed:t,dataTest:r}=i;const n=Ie.useRef(null),a=Ie.useMemo(()=>de.Children.map(e,()=>de.createRef()),[e]),c=s=>{const h=document.activeElement;if(n.current&&n.current===h){a.length>0&&a[0].current&&a[0].current.focus();return}const p=a.findIndex(m=>m.current===h);if(p!==-1){if(s.key==="ArrowRight"){s.preventDefault();const m=(p+1)%a.length;a[m].current.focus()}if(s.key==="ArrowLeft"){s.preventDefault();const m=(p-1+a.length)%a.length;a[m].current.focus()}}};return de.createElement("div",{ref:n,"data-test":r,role:"tablist",tabIndex:0,onKeyDown:c,className:yt.dynamic([["771129571",[Me.grey400,Me.white]]])+" "+(Gi({fixed:t})||"")},de.Children.map(e,(s,h)=>de.isValidElement(s)?de.cloneElement(s,{ref:a[h]}):de.createElement("span",{ref:a[h],tabIndex:-1,className:yt.dynamic([["771129571",[Me.grey400,Me.white]]])},s)),de.createElement(yt,{id:"771129571",dynamic:[Me.grey400,Me.white]},[`div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;position:relative;overflow:hidden;box-shadow:inset 0 -1px 0 0 ${Me.grey400};-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;background:${Me.white};}`]))};fw.propTypes={dataTest:X.string.isRequired,children:X.node,fixed:X.bool};const T2=i=>{let{fixed:e,children:t,className:r,scrollable:n,dataTest:a="dhis2-uicore-tabbar"}=i;return n?de.createElement("div",{className:r,"data-test":a},de.createElement(EA,{dataTest:`${a}-scrollbar`},de.createElement(fw,{fixed:e,dataTest:`${a}-tabs`},t))):de.createElement("div",{className:r,"data-test":a},de.createElement(fw,{fixed:e,dataTest:`${a}-tabs`},t))};T2.propTypes={children:X.node,className:X.string,dataTest:X.string,fixed:X.bool,scrollable:X.bool};var Wd=[],qB=function(){return Wd.some(function(i){return i.activeTargets.length>0})},WB=function(){return Wd.some(function(i){return i.skippedTargets.length>0})},GS="ResizeObserver loop completed with undelivered notifications.",YB=function(){var i;typeof ErrorEvent=="function"?i=new ErrorEvent("error",{message:GS}):(i=document.createEvent("Event"),i.initEvent("error",!1,!1),i.message=GS),window.dispatchEvent(i)},ng;(function(i){i.BORDER_BOX="border-box",i.CONTENT_BOX="content-box",i.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(ng||(ng={}));var Yd=function(i){return Object.freeze(i)},ZB=function(){function i(e,t){this.inlineSize=e,this.blockSize=t,Yd(this)}return i}(),kA=function(){function i(e,t,r,n){return this.x=e,this.y=t,this.width=r,this.height=n,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Yd(this)}return i.prototype.toJSON=function(){var e=this,t=e.x,r=e.y,n=e.top,a=e.right,c=e.bottom,s=e.left,h=e.width,p=e.height;return{x:t,y:r,top:n,right:a,bottom:c,left:s,width:h,height:p}},i.fromRect=function(e){return new i(e.x,e.y,e.width,e.height)},i}(),S2=function(i){return i instanceof SVGElement&&"getBBox"in i},MA=function(i){if(S2(i)){var e=i.getBBox(),t=e.width,r=e.height;return!t&&!r}var n=i,a=n.offsetWidth,c=n.offsetHeight;return!(a||c||i.getClientRects().length)},HS=function(i){var e;if(i instanceof Element)return!0;var t=(e=i==null?void 0:i.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(t&&i instanceof t.Element)},XB=function(i){switch(i.tagName){case"INPUT":if(i.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Fm=typeof window<"u"?window:{},e0=new WeakMap,qS=/auto|scroll/,KB=/^tb|vertical/,QB=/msie|trident/i.test(Fm.navigator&&Fm.navigator.userAgent),Al=function(i){return parseFloat(i||"0")},wp=function(i,e,t){return i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=!1),new ZB((t?e:i)||0,(t?i:e)||0)},WS=Yd({devicePixelContentBoxSize:wp(),borderBoxSize:wp(),contentBoxSize:wp(),contentRect:new kA(0,0,0,0)}),AA=function(i,e){if(e===void 0&&(e=!1),e0.has(i)&&!e)return e0.get(i);if(MA(i))return e0.set(i,WS),WS;var t=getComputedStyle(i),r=S2(i)&&i.ownerSVGElement&&i.getBBox(),n=!QB&&t.boxSizing==="border-box",a=KB.test(t.writingMode||""),c=!r&&qS.test(t.overflowY||""),s=!r&&qS.test(t.overflowX||""),h=r?0:Al(t.paddingTop),p=r?0:Al(t.paddingRight),m=r?0:Al(t.paddingBottom),y=r?0:Al(t.paddingLeft),g=r?0:Al(t.borderTopWidth),x=r?0:Al(t.borderRightWidth),v=r?0:Al(t.borderBottomWidth),_=r?0:Al(t.borderLeftWidth),C=y+p,k=h+m,w=_+x,E=g+v,A=s?i.offsetHeight-E-i.clientHeight:0,M=c?i.offsetWidth-w-i.clientWidth:0,S=n?C+w:0,N=n?k+E:0,Y=r?r.width:Al(t.width)-S-M,Z=r?r.height:Al(t.height)-N-A,K=Y+C+M+w,U=Z+k+A+E,$=Yd({devicePixelContentBoxSize:wp(Math.round(Y*devicePixelRatio),Math.round(Z*devicePixelRatio),a),borderBoxSize:wp(K,U,a),contentBoxSize:wp(Y,Z,a),contentRect:new kA(y,h,Y,Z)});return e0.set(i,$),$},IA=function(i,e,t){var r=AA(i,t),n=r.borderBoxSize,a=r.contentBoxSize,c=r.devicePixelContentBoxSize;switch(e){case ng.DEVICE_PIXEL_CONTENT_BOX:return c;case ng.BORDER_BOX:return n;default:return a}},JB=function(){function i(e){var t=AA(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=Yd([t.borderBoxSize]),this.contentBoxSize=Yd([t.contentBoxSize]),this.devicePixelContentBoxSize=Yd([t.devicePixelContentBoxSize])}return i}(),PA=function(i){if(MA(i))return 1/0;for(var e=0,t=i.parentNode;t;)e+=1,t=t.parentNode;return e},e7=function(){var i=1/0,e=[];Wd.forEach(function(c){if(c.activeTargets.length!==0){var s=[];c.activeTargets.forEach(function(p){var m=new JB(p.target),y=PA(p.target);s.push(m),p.lastReportedSize=IA(p.target,p.observedBox),y<i&&(i=y)}),e.push(function(){c.callback.call(c.observer,s,c.observer)}),c.activeTargets.splice(0,c.activeTargets.length)}});for(var t=0,r=e;t<r.length;t++){var n=r[t];n()}return i},YS=function(i){Wd.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(n){n.isActive()&&(PA(n.target)>i?t.activeTargets.push(n):t.skippedTargets.push(n))})})},t7=function(){var i=0;for(YS(i);qB();)i=e7(),YS(i);return WB()&&YB(),i>0},Gb,DA=[],i7=function(){return DA.splice(0).forEach(function(i){return i()})},r7=function(i){if(!Gb){var e=0,t=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return i7()}).observe(t,r),Gb=function(){t.textContent="".concat(e?e--:e++)}}DA.push(i),Gb()},n7=function(i){r7(function(){requestAnimationFrame(i)})},P0=0,s7=function(){return!!P0},a7=250,o7={attributes:!0,characterData:!0,childList:!0,subtree:!0},ZS=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],XS=function(i){return i===void 0&&(i=0),Date.now()+i},Hb=!1,l7=function(){function i(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return i.prototype.run=function(e){var t=this;if(e===void 0&&(e=a7),!Hb){Hb=!0;var r=XS(e);n7(function(){var n=!1;try{n=t7()}finally{if(Hb=!1,e=r-XS(),!s7())return;n?t.run(1e3):e>0?t.run(e):t.start()}})}},i.prototype.schedule=function(){this.stop(),this.run()},i.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,o7)};document.body?t():Fm.addEventListener("DOMContentLoaded",t)},i.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),ZS.forEach(function(t){return Fm.addEventListener(t,e.listener,!0)}))},i.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),ZS.forEach(function(t){return Fm.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},i}(),mw=new l7,KS=function(i){!P0&&i>0&&mw.start(),P0+=i,!P0&&mw.stop()},c7=function(i){return!S2(i)&&!XB(i)&&getComputedStyle(i).display==="inline"},u7=function(){function i(e,t){this.target=e,this.observedBox=t||ng.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return i.prototype.isActive=function(){var e=IA(this.target,this.observedBox,!0);return c7(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},i}(),d7=function(){function i(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}return i}(),t0=new WeakMap,QS=function(i,e){for(var t=0;t<i.length;t+=1)if(i[t].target===e)return t;return-1},i0=function(){function i(){}return i.connect=function(e,t){var r=new d7(e,t);t0.set(e,r)},i.observe=function(e,t,r){var n=t0.get(e),a=n.observationTargets.length===0;QS(n.observationTargets,t)<0&&(a&&Wd.push(n),n.observationTargets.push(new u7(t,r&&r.box)),KS(1),mw.schedule())},i.unobserve=function(e,t){var r=t0.get(e),n=QS(r.observationTargets,t),a=r.observationTargets.length===1;n>=0&&(a&&Wd.splice(Wd.indexOf(r),1),r.observationTargets.splice(n,1),KS(-1))},i.disconnect=function(e){var t=this,r=t0.get(e);r.observationTargets.slice().forEach(function(n){return t.unobserve(e,n.target)}),r.activeTargets.splice(0,r.activeTargets.length)},i}(),h7=function(){function i(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");i0.connect(this,e)}return i.prototype.observe=function(e,t){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!HS(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");i0.observe(this,e,t)},i.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!HS(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");i0.unobserve(this,e)},i.prototype.disconnect=function(){i0.disconnect(this)},i.toString=function(){return"function ResizeObserver () { [polyfill code] }"},i}();const RA=de[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],p7=i=>{const e=Ie.useRef(i);return Ie.useEffect(()=>{e.current=i}),e},f7=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:h7;function m7(){}function g7(i,e){const t=v7(),r=p7(e);return RA(()=>{let n=!1;const a=i&&"current"in i?i.current:i;if(!a)return m7;function c(s,h){n||r.current(s,h)}return t.subscribe(a,c),()=>{n=!0,t.unsubscribe(a,c)}},[i,t,r]),t.observer}function y7(){let i=!1,e=[];const t=new Map,r=new f7((n,a)=>{e=e.concat(n);function c(){const s=new Set;for(let h=0;h<e.length;h++){if(s.has(e[h].target))continue;s.add(e[h].target);const p=t.get(e[h].target);p==null||p.forEach(m=>m(e[h],a))}e=[],i=!1}i||window.requestAnimationFrame(c),i=!0});return{observer:r,subscribe(n,a){var c;r.observe(n);const s=(c=t.get(n))!==null&&c!==void 0?c:[];s.push(a),t.set(n,s)},unsubscribe(n,a){var c;const s=(c=t.get(n))!==null&&c!==void 0?c:[];if(s.length===1){r.unobserve(n),t.delete(n);return}const h=s.indexOf(a);h!==-1&&s.splice(h,1),t.set(n,s)}}}let qb;const v7=()=>qb||(qb=y7()),x7=(i,e)=>{const[t,r]=Ie.useState(()=>{var n,a;const c=i&&"current"in i?i.current:i;return c?[c.offsetWidth,c.offsetHeight]:[(n=void 0)!==null&&n!==void 0?n:0,(a=void 0)!==null&&a!==void 0?a:0]});return RA(()=>{const n=i&&"current"in i?i.current:i;n&&r([n.offsetWidth,n.offsetHeight])},[i]),g7(i,n=>{const a=n.target;r([a.offsetWidth,a.offsetHeight])}),t},LA=i=>{let{children:e,dataTest:t,maxHeight:r="280px",menuWidth:n,onClick:a,menuRef:c}=i;return de.createElement(xg,{onBackdropClick:a,transparent:!0},de.createElement(rh,{reference:c,placement:"bottom",observeReferenceResize:!0},de.createElement("div",{"data-test":`${t}-menuwrapper`,className:yt.dynamic([["1686499909",[n,r]]])+" card"},de.createElement(bg,null,e))),de.createElement(yt,{id:"1686499909",dynamic:[n,r]},[`.card.__jsx-style-dynamic-selector{width:${n};max-height:${r};}`]))};LA.propTypes={dataTest:X.string.isRequired,menuRef:X.object.isRequired,menuWidth:X.string.isRequired,children:X.node,maxHeight:X.string,onClick:X.func};const NA=i=>{let{dataTest:e="dhis2-sharingdialog-autocomplete",inputWidth:t,label:r,loading:n,onClose:a,onSearch:c,onSelect:s,placeholder:h,search:p,searchResults:m}=i;const y=Ie.useRef(null),[g]=x7(y),{isDisconnected:x}=Ov();return de.createElement(de.Fragment,null,de.createElement("div",{ref:y},de.createElement(Yl,{label:r,loading:n,placeholder:h,onChange:v=>{let{value:_}=v;return c(_)},value:p,inputWidth:t,disabled:x,helpText:x?ve.t("Not available offline"):""})),m.length>0&&de.createElement(LA,{onClick:a,menuWidth:`${g}px`,menuRef:y,dataTest:`${e}-menu`},de.createElement(y_,null,m.map(v=>de.createElement(tn,{key:v.id,label:v.displayName,value:v.id,onClick:_=>{let{value:C}=_;return s(C)}})))))};NA.propTypes={searchResults:X.arrayOf(X.shape({displayName:X.string,id:X.string})).isRequired,dataTest:X.string,inputWidth:X.string,label:X.string,loading:X.bool,placeholder:X.string,search:X.string,onClose:X.func,onSearch:X.func,onSelect:X.func};const b7={search:{resource:"sharing/search",params:i=>{let{search:e}=i;return{key:e}}}},zA=i=>{var e,t;let{selected:r,onSelection:n}=i;const[a,c]=Ie.useState(""),[s,h]=Ie.useState(!1),{data:p,refetch:m,fetching:y}=eo(b7,{lazy:!0,onComplete:()=>h(!0)});Ie.useEffect(()=>c(r),[r]);const g=Ie.useCallback(U6(m,250),[m]);Ie.useEffect(()=>{a&&a===r||(a?g({search:a}):(n(null),h(!1)))},[a]);let x=[];if(p!=null&&(e=p.search)!==null&&e!==void 0&&e.users){const v=p.search.users.map(_=>({..._,type:"user"}));x=x.concat(v)}if(p!=null&&(t=p.search)!==null&&t!==void 0&&t.userGroups){const v=p.search.userGroups.map(_=>({..._,type:"group"}));x=x.concat(v)}return de.createElement(NA,{inputWidth:"100%",label:ve.t("User or group"),loading:y,placeholder:ve.t("Search"),search:a,searchResults:s?x:[],onClose:()=>h(!1),onSearch:c,onSelect:v=>{n(x.find(_=>_.id===v)),h(!1)}})};zA.propTypes={onSelection:X.func.isRequired,selected:X.string};const sx=i=>{let{children:e}=i;return de.createElement(de.Fragment,null,de.createElement("h2",{className:yt.dynamic([["2416527184",[Me.grey900]]])},e),de.createElement(yt,{id:"2416527184",dynamic:[Me.grey900]},[`h2.__jsx-style-dynamic-selector{font-size:16px;color:${Me.grey900};}`]))};sx.propTypes={children:X.node.isRequired};const gw=i=>{let{onAdd:e,dataSharing:t}=i;const r=Ie.useContext(av),[n,a]=Ie.useState(null),[c,s]=Ie.useState(""),[h,p]=Ie.useState(""),{isDisconnected:m}=Ov(),y=v=>{v.preventDefault(),e({type:n.type,id:n.id,name:n.displayName||n.name,access:{data:c,metadata:h}}),a(null),s(""),p("")},g=[{value:hn,label:ve.t("View only")},{value:vn,label:ve.t("View and edit")}],x=[...g,{value:wr,label:ve.t("No access")}];return de.createElement(de.Fragment,null,de.createElement(sx,null,ve.t("Give access to a user or group")),de.createElement("form",{onSubmit:y,className:yt.dynamic([["3476690250",[Me.grey100,Me.grey900,Bt.dp8]]])},de.createElement("div",{className:yt.dynamic([["3476690250",[Me.grey100,Me.grey900,Bt.dp8]]])+" "+((t?"startWrapperData":"startWrapperMetadata")||"")},de.createElement(zA,{selected:(n==null?void 0:n.displayName)||(n==null?void 0:n.name),onSelection:a})),de.createElement("div",{className:yt.dynamic([["3476690250",[Me.grey100,Me.grey900,Bt.dp8]]])+" "+((t?"endWrapper endWrapperData":"endWrapper endWrapperMetadata")||"")},t&&de.createElement("div",{className:yt.dynamic([["3476690250",[Me.grey100,Me.grey900,Bt.dp8]]])+" select-wrapper"},de.createElement(hs,{label:ve.t("Data access level"),placeholder:ve.t("Choose a level"),disabled:m,selected:c,helpText:m?ve.t("Not available offline"):"",onChange:v=>{let{selected:_}=v;return s(_)}},x.map(v=>{let{value:_,label:C}=v;return de.createElement(As,{key:_,label:C,value:_,active:_===c})}))),de.createElement("div",{className:yt.dynamic([["3476690250",[Me.grey100,Me.grey900,Bt.dp8]]])+" select-wrapper"},de.createElement(hs,{label:t?ve.t("Metadata access level"):ve.t("Access level"),placeholder:ve.t("Choose a level"),disabled:m,selected:h,helpText:m?ve.t("Not available offline"):"",onChange:v=>{let{selected:_}=v;return p(_)}},(t?x:g).map(v=>{let{value:_,label:C}=v;return de.createElement(As,{key:_,label:C,value:_,active:_===h})}))),de.createElement(Ti,{type:"submit",disabled:m||r||!n||t&&!c||!h||c===wr&&h===wr},ve.t("Give access")))),de.createElement(yt,{id:"3476690250",dynamic:[Me.grey100,Me.grey900,Bt.dp8]},[`form.__jsx-style-dynamic-selector{background-color:${Me.grey100};color:${Me.grey900};margin-bottom:21px;padding:8px 12px;border-radius:5px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}`,".select-wrapper.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;}",".startWrapperData.__jsx-style-dynamic-selector{width:35%;}",".startWrapperMetadata.__jsx-style-dynamic-selector{width:55%;}",`.endWrapper.__jsx-style-dynamic-selector{margin-inline-start:8px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;gap:${Bt.dp8};}`,".endWrapperMetadata.__jsx-style-dynamic-selector{width:45%;}",".endWrapperData.__jsx-style-dynamic-selector{width:65%;}"]))};gw.propTypes={onAdd:X.func.isRequired,dataSharing:X.bool};const yw=i=>{let{label:e,onClick:t}=i;return de.createElement("div",{onClick:t,className:yt.dynamic([["1009072197",[Me.red700,Bt.dp8,Bt.dp12,Me.red050]]])},e,de.createElement(yt,{id:"1009072197",dynamic:[Me.red700,Bt.dp8,Bt.dp12,Me.red050]},[`div.__jsx-style-dynamic-selector{cursor:pointer;font-size:14px;-webkit-text-decoration:none;text-decoration:none;color:${Me.red700};padding:${Bt.dp8} ${Bt.dp12};}`,`div.__jsx-style-dynamic-selector:hover{background-color:${Me.red050};}`]))};yw.propTypes={label:X.string.isRequired,onClick:X.func.isRequired};const w7={[ch]:ve.t("Anyone logged in"),[Zp]:ve.t("User group"),[uh]:ve.t("User")},OA=i=>{var e;let{target:t,id:r}=i;return de.createElement(de.Fragment,null,de.createElement("p",{className:yt.dynamic([["2525483302",[Me.grey700]]])},t===uh?r:(e=w7[t])!==null&&e!==void 0?e:""),de.createElement(yt,{id:"2525483302",dynamic:[Me.grey700]},[`p.__jsx-style-dynamic-selector{font-size:14px;color:${Me.grey700};margin:6px 0 0 0;padding:0;}`]))};OA.propTypes={target:X.oneOf([ch,Zp,uh]).isRequired,id:X.string};const jA=i=>{let{target:e,name:t}=i;switch(e){case C2:return de.createElement(Rk,{color:Me.grey600});case ch:case Zp:return de.createElement(Ek,{color:Me.grey600});case uh:return de.createElement(mL,{name:t,small:!0});default:return null}};jA.propTypes={target:X.oneOf([C2,ch,uh,Zp]).isRequired,name:X.string};const JS=i=>{let{dataSharing:e,accessOtherField:t}=i;return e?t===wr:!0},D0=i=>{let{name:e,id:t,target:r,access:n,accessOptions:a,disabled:c,onChange:s,onRemove:h,dataSharing:p,allUsersItem:m=!1}=i;const y=Ie.useContext(av),{isDisconnected:g}=Ov(),x={ACCESS_NONE:ve.t("No access"),ACCESS_VIEW_ONLY:ve.t("View only"),ACCESS_VIEW_AND_EDIT:ve.t("View and edit")};return de.createElement(de.Fragment,null,de.createElement("div",{className:yt.dynamic([["650548845",[Me.grey900]]])+" wrapper"},de.createElement("div",{className:yt.dynamic([["650548845",[Me.grey900]]])+" "+((p?"detailsWithData":"detailsMetadata")||"")},de.createElement(jA,{target:r,name:e}),de.createElement("div",{className:yt.dynamic([["650548845",[Me.grey900]]])+" details-text"},de.createElement("p",{className:yt.dynamic([["650548845",[Me.grey900]]])+" details-name"},e),de.createElement(OA,{target:r,id:t}))),de.createElement("div",{className:yt.dynamic([["650548845",[Me.grey900]]])+" "+((p?"selectWrapperWithData":"selectWrapperMetadata")||"")},p&&de.createElement("div",{className:yt.dynamic([["650548845",[Me.grey900]]])+" select"},de.createElement(hs,{disabled:c||g||y,prefix:ve.t("Data"),selected:n.data,helpText:g?ve.t("Not available offline"):"",onChange:v=>{let{selected:_}=v;return s({...n,data:_})}},a.map(v=>de.createElement(As,{key:v,label:x[v],value:v,active:v===n.data})),VS(r)&&JS({accessOtherField:n.metadata,dataSharing:p})&&de.createElement(yw,{onClick:h,label:ve.t("Remove access")}))),de.createElement("div",{className:yt.dynamic([["650548845",[Me.grey900]]])+" select"},de.createElement(hs,{disabled:c||g||y,prefix:ve.t("Metadata"),selected:n.metadata,helpText:g?ve.t("Not available offline"):"",onChange:v=>{let{selected:_}=v;return s({...n,metadata:_})}},a.map(v=>de.createElement(As,{key:v,label:x[v],value:v,active:v===n.metadata,disabled:!m&&v===wr&&!p})),VS(r)&&JS({accessOtherField:n.data,dataSharing:p})&&de.createElement(yw,{onClick:h,label:ve.t("Remove access")}))))),de.createElement(gL,null),de.createElement(yt,{id:"650548845",dynamic:[Me.grey900]},[".wrapper.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:4px 8px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".detailsMetadata.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:65%;}",".detailsWithData.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:35%;}",".details-text.__jsx-style-dynamic-selector{margin-inline-start:8px;}",`.details-name.__jsx-style-dynamic-selector{font-size:15px;font-weight:500;color:${Me.grey900};margin:0;padding:0;}`,".selectWrapperMetadata.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:35%;}",".selectWrapperWithData.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:65%;}",".select.__jsx-style-dynamic-selector{margin-inline-start:8px;-webkit-flex:1;-ms-flex:1;flex:1;}"]))};D0.propTypes={access:X.shape({data:X.oneOf([wr,hn,vn]),metadata:X.oneOf([wr,hn,vn])}).isRequired,accessOptions:X.arrayOf(X.oneOf([wr,hn,vn])).isRequired,dataSharing:X.bool.isRequired,name:X.string.isRequired,target:X.oneOf([ch,Zp,uh]).isRequired,onChange:X.func.isRequired,allUsersItem:X.bool,disabled:X.bool,id:X.string,onRemove:X.func};const vw=i=>{let{onChange:e,onRemove:t,publicAccess:r,allowPublicAccess:n,users:a,groups:c,dataSharing:s}=i;const h=[wr,hn,vn];return de.createElement(de.Fragment,null,de.createElement(sx,null,ve.t("Users and groups that currently have access")),de.createElement("div",{className:yt.dynamic([["3415079234",[Me.grey200,Me.grey900]]])+" header"},de.createElement("div",{className:yt.dynamic([["3415079234",[Me.grey200,Me.grey900]]])+" "+((s?"header-start-column-data":"header-start-column-metadata")||"")},ve.t("User / Group")),de.createElement("div",{className:yt.dynamic([["3415079234",[Me.grey200,Me.grey900]]])+" "+((s?"header-end-column-data":"header-end-column-metadata")||"")},de.createElement("span",{className:yt.dynamic([["3415079234",[Me.grey200,Me.grey900]]])+" hea"},ve.t("Access level")))),de.createElement("div",{className:yt.dynamic([["3415079234",[Me.grey200,Me.grey900]]])+" list"},de.createElement(D0,{name:ve.t("All users"),target:ch,access:r,accessOptions:h,disabled:!n,onChange:p=>e({type:"public",access:p}),dataSharing:s,allUsersItem:!0}),c.map(p=>{let{id:m,name:y,access:g}=p;return de.createElement(D0,{key:m,name:y,target:Zp,access:g,accessOptions:h,onChange:x=>e({type:"group",id:m,access:x}),onRemove:()=>t({type:"group",id:m}),dataSharing:s})}),a.map(p=>{let{id:m,name:y,access:g}=p;return g&&de.createElement(D0,{key:m,id:m,name:y,target:uh,access:g,accessOptions:h,onChange:x=>e({type:"user",id:m,access:x}),onRemove:()=>t({type:"user",id:m}),dataSharing:s})})),de.createElement(yt,{id:"3415079234",dynamic:[Me.grey200,Me.grey900]},[`.header.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:10px 8px;margin:0 0 8px 0;background-color:${Me.grey200};color:${Me.grey900};font-size:13px;}`,".header-start-column-metadata.__jsx-style-dynamic-selector{width:65%;}",".header-end-column-metadata.__jsx-style-dynamic-selector{margin-inline-start:auto;width:35%;}",".header-start-column-data.__jsx-style-dynamic-selector{width:35%;}",".header-end-column-data.__jsx-style-dynamic-selector{margin-inline-start:auto;width:65%;}",".hea.__jsx-style-dynamic-selector{display:inline-block;margin-inline-start:8px;}",".list.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow-y:auto;}"]))};vw.propTypes={allowPublicAccess:X.bool.isRequired,dataSharing:X.bool.isRequired,groups:X.arrayOf(X.shape({id:X.string.isRequired,name:X.string.isRequired,access:X.shape({data:X.oneOf([wr,hn,vn]),metadata:X.oneOf([wr,hn,vn])})})).isRequired,publicAccess:X.shape({data:X.oneOf([wr,hn,vn]),metadata:X.oneOf([wr,hn,vn])}).isRequired,users:X.arrayOf(X.shape({access:X.shape({data:X.oneOf([wr,hn,vn]),metadata:X.oneOf([wr,hn,vn])}).isRequired,id:X.string.isRequired,name:X.string.isRequired})).isRequired,onChange:X.func.isRequired,onRemove:X.func.isRequired};const FA=i=>{if(i.length===0)return i.length;const e=["VISUALIZATION","MAP","EVENT_CHART","EVENT_REPORT"];return i.filter(t=>e.includes(t.type)).length},_7=i=>{let{itemsCount:e,visualizationsCount:t,hasErrors:r,updatedItems:n}=i;if(r){if(n===0)return ve.t("No visualizations were updated. Check that you have permission to change sharing for all visualizations.");if(n&&e)return ve.t("Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.",{success:n,failed:t-n})}return n===0?ve.t("No visualizations were updated because sharing settings are already sufficient."):n===t?ve.t("Successfully updated sharing for all visualizations."):n<t?ve.t("Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.",{updated:n,skipped:t-n}):""},C7=i=>{let{entityAmount:e,visualizationsCount:t}=i;return e===0?ve.t("There are no users or groups to apply sharing settings for."):ve.t("Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.",{visualizationsCount:t,entityAmount:e,nsSeparator:">"})},BA=i=>{let{hasErrors:e,updatedItems:t,dashboardItems:r,itemsCount:n}=i;const a=FA(r);if(!a)return null;const c=_7({visualizationsCount:a,itemsCount:n,hasErrors:e,updatedItems:t});return de.createElement(xa,null,c)};BA.propTypes={dashboardItems:X.array.isRequired,hasErrors:X.bool.isRequired,itemsCount:X.number.isRequired,updatedItems:X.number.isRequired};const T7={dashboard:{resource:"dashboards",id:i=>{let{id:e}=i;return e},params:{fields:"dashboardItems[type]"}}},$A=i=>{let{id:e,entityAmount:t}=i;const{data:r,loading:n}=eo(T7,{variables:{id:e}});if(n)return null;const{dashboard:a}=r,c=FA(a.dashboardItems);if(!c)return null;const s=C7({visualizationsCount:c,entityAmount:t});return de.createElement(xa,null,s)};$A.propTypes={entityAmount:X.number.isRequired,id:X.string.isRequired};const S7={dashboard:{resource:"dashboards",id:i=>{let{id:e}=i;return e},params:{fields:"dashboardItems[type]"}}},UA=i=>{var e;let{id:t,entityAmount:r}=i;const{isDisconnected:n}=Ov(),{data:a,refetch:c}=eo(S7,{variables:{id:t}});Ie.useEffect(()=>{c({id:t})},[c,t]);const s=sh(),[h,p]=Ie.useState(!1),[m,y]=Ie.useState(!1),[g,x]=Ie.useState(null),[v,_]=Ie.useState(null),C={resource:`dashboards/cascadeSharing/${t}`,type:"create"},k=()=>{p(!0),y(!0),_(null),x(null),s.mutate(C).then(A=>{_(A)}).catch(A=>{x(A.message||ve.t("Something went wrong"))}).finally(()=>{y(!1)})},w=(v==null||(e=v.errorReports)===null||e===void 0?void 0:e.length)>0,E=v==null?void 0:v.countUpdatedDashboardItems;return de.createElement(de.Fragment,null,!h&&de.createElement($A,{id:t,entityAmount:r}),g&&de.createElement(C0,{marginTop:Bt.dp12},de.createElement(xa,{error:!0},g)),a&&v&&de.createElement(C0,{marginTop:Bt.dp12},de.createElement(BA,{hasErrors:w,updatedItems:E,dashboardItems:a.dashboard.dashboardItems,itemsCount:a.dashboard.itemsCount})),de.createElement(C0,{marginTop:Bt.dp12},de.createElement(Ti,{type:"button",disabled:n||m||!r,loading:m,secondary:!0,onClick:k},ve.t("Apply sharing to dashboard visualizations"))))};UA.propTypes={entityAmount:X.number.isRequired,id:X.string.isRequired};const E7=()=>de.createElement(de.Fragment,null,de.createElement("p",{className:yt.dynamic([["3321084332",[Me.grey800]]])},ve.t('Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).')),de.createElement("p",{className:yt.dynamic([["3321084332",[Me.grey800]]])},ve.t(`If a user or group already has "View and edit" access to a visualization, this won't be reduced to "View only". The "All users" access level won't be updated or changed.`)),de.createElement("p",{className:yt.dynamic([["3321084332",[Me.grey800]]])},ve.t("Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.")),de.createElement(yt,{id:"3321084332",dynamic:[Me.grey800]},[`p.__jsx-style-dynamic-selector{font-size:14px;line-height:19px;color:${Me.grey800};}`])),VA=i=>{let{id:e,entityAmount:t}=i;return de.createElement(de.Fragment,null,de.createElement(sx,null,ve.t("Apply dashboard sharing settings to visualizations")),de.createElement(E7,null),de.createElement(UA,{id:e,entityAmount:t}))};VA.propTypes={entityAmount:X.number.isRequired,id:X.string.isRequired};const xw=i=>{let{type:e,users:t,groups:r,publicAccess:n,allowPublicAccess:a,id:c,onAdd:s,onChange:h,onRemove:p,dataSharing:m,cascadeDashboardSharing:y}=i;const[g,x]=Ie.useState(0);return e===_A.DASHBOARD&&y?de.createElement(de.Fragment,null,de.createElement(T2,null,de.createElement(Np,{onClick:()=>x(0),selected:g===0},ve.t("Dashboard sharing")),de.createElement(Np,{onClick:()=>x(1),selected:g===1},ve.t("Apply sharing to dashboard visualizations"))),de.createElement("div",null,g===0&&de.createElement(de.Fragment,null,de.createElement(gw,{onAdd:s,dataSharing:m}),de.createElement(vw,{users:t,groups:r,publicAccess:n,allowPublicAccess:a,onChange:h,onRemove:p,dataSharing:m})),g===1&&de.createElement(VA,{id:c,entityAmount:t.length+r.length}))):de.createElement(de.Fragment,null,de.createElement(gw,{onAdd:s,dataSharing:m}),de.createElement(vw,{users:t,groups:r,publicAccess:n,allowPublicAccess:a,onChange:h,onRemove:p,dataSharing:m}))};xw.propTypes={allowPublicAccess:X.bool.isRequired,cascadeDashboardSharing:X.bool.isRequired,dataSharing:X.bool.isRequired,groups:X.arrayOf(X.shape({access:X.shape({data:X.oneOf([wr,hn,vn]),metadata:X.oneOf([wr,hn,vn])}).isRequired,id:X.string.isRequired,name:X.string.isRequired})).isRequired,id:X.string.isRequired,publicAccess:X.shape({data:X.oneOf([wr,hn,vn]),metadata:X.oneOf([wr,hn,vn])}).isRequired,type:X.oneOf(CA).isRequired,users:X.arrayOf(X.shape({access:X.shape({data:X.oneOf([wr,hn,vn]),metadata:X.oneOf([wr,hn,vn])}).isRequired,id:X.string.isRequired,name:X.string.isRequired})).isRequired,onAdd:X.func.isRequired,onChange:X.func.isRequired,onRemove:X.func.isRequired};const k7={sharing:{resource:"sharing",params:i=>{let{type:e,id:t}=i;return{type:e,id:t}}}},M7={resource:"sharing",params:i=>{let{type:e,id:t}=i;return{type:e,id:t}},type:"update",data:i=>{let{data:e}=i;return e}},Wb=()=>{},A7={name:"",allowPublic:!0,public:{data:wr,metadata:wr},groups:[],users:[]},I7=i=>{const e={...i};return i.public&&typeof i.public=="string"&&(e.public={data:wr,metadata:i.public}),e.groups=i.groups.map(t=>t.access&&typeof t.access=="string"?{...t,access:{data:wr,metadata:t.access}}:t),e.users=i.users.map(t=>t.access&&typeof t.access=="string"?{...t,access:{data:wr,metadata:t.access}}:t),e},GA=i=>{let{id:e,type:t,onClose:r=Wb,onError:n=Wb,onSave:a=Wb,initialSharingSettings:c=A7,dataTest:s="dhis2-uicore-sharingdialog",dataSharing:h=!1,cascadeDashboardSharing:p=!0}=i;const{show:m}=ba(K=>K,{critical:!0}),y=I7(c),{data:g,refetch:x,loading:v,fetching:_}=eo(k7,{variables:{id:e,type:t},onError:K=>{m(K),n(K)}}),[C,{loading:k}]=eA(M7,{variables:{type:t,id:e},onError:K=>{m(K),n(K),x()},onComplete:()=>{x(),a()}});if(Ie.useEffect(()=>{x({type:t,id:e})},[t,e]),v){const K=Object.keys(c.users).map(Qy),U=Object.keys(c.groups).map(Qy);return de.createElement(av.Provider,{value:!0},de.createElement(hw,{onClose:r},de.createElement(xw,{id:e,users:K,groups:U,publicAccess:y.public,allowPublicAccess:y.allowPublic,type:t,onAdd:()=>{},onChange:()=>{},onRemove:()=>{},dataSharing:h,cascadeDashboardSharing:p})))}const{object:w,meta:E}=g.sharing,A=TA(w.publicAccess),M=w.userAccesses.map(Qy),S=w.userGroupAccesses.map(Qy),N=K=>{let{type:U,id:$,access:B,name:R}=K;const L=H6({object:w,type:U,access:B,id:$,name:R});C({data:L,type:t,id:e})},Y=K=>{let{type:U,id:$,access:B}=K;const R=G6({object:w,type:U,access:B,id:$});C({data:R,type:t,id:e})},Z=K=>{let{type:U,id:$}=K;const B=q6({object:w,type:U,id:$});C({data:B,type:t,id:e})};return de.createElement(av.Provider,{value:k||_},de.createElement(hw,{onClose:r,name:w.displayName||w.name,dataTest:s},de.createElement(xw,{id:e,users:M,groups:S,publicAccess:A,allowPublicAccess:E.allowPublicAccess,type:t,onAdd:N,onChange:Y,onRemove:Z,dataSharing:h,cascadeDashboardSharing:p})))};GA.propTypes={id:X.string.isRequired,type:X.oneOf(CA).isRequired,cascadeDashboardSharing:X.bool,dataSharing:X.bool,dataTest:X.string,initialSharingSettings:X.shape({allowPublic:X.bool.isRequired,groups:X.objectOf(X.shape({id:X.string.isRequired,name:X.string.isRequired,access:X.oneOfType([X.shape({data:X.oneOf([wr,hn,vn]),metadata:X.oneOf([wr,hn,vn])}),X.oneOf([wr,hn,vn])])})),name:X.string,public:X.oneOfType([X.shape({data:X.oneOf([wr,hn,vn]),metadata:X.oneOf([wr,hn,vn])}),X.oneOf([wr,hn,vn])]),users:X.objectOf(X.shape({id:X.string.isRequired,name:X.string.isRequired,access:X.oneOfType([X.shape({data:X.oneOf([wr,hn,vn]),metadata:X.oneOf([wr,hn,vn])}),X.oneOf([wr,hn,vn])])}))}),onClose:X.func,onError:X.func,onSave:X.func};function bw(){return bw=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},bw.apply(null,arguments)}const E2=Ie.forwardRef((i,e)=>{let{children:t,className:r,dataTest:n="dhis2-uicore-table",layout:a="auto",role:c,borderless:s,width:h="100%",...p}=i;return de.createElement("table",bw({},p,{"data-test":n,ref:e,role:c,className:yt.dynamic([["3140496910",[a,h,Me.grey300]]])+" "+(Gi(r,{borderless:s})||"")}),t,de.createElement(yt,{id:"3140496910",dynamic:[a,h,Me.grey300]},[`table.__jsx-style-dynamic-selector{table-layout:${a};border-collapse:separate;border-spacing:0;width:${h};box-sizing:border-box;border:1px solid ${Me.grey300};}`,"table.borderless.__jsx-style-dynamic-selector{border:none;}"]))});E2.displayName="Table";E2.propTypes={borderless:X.bool,children:X.node,className:X.string,dataTest:X.string,layout:X.oneOf(["auto","fixed","initial","inherit"]),role:X.string,width:X.string};function ww(){return ww=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},ww.apply(null,arguments)}const ax=Ie.forwardRef((i,e)=>{let{children:t,className:r,dataTest:n="dhis2-uicore-tablebody",role:a,loading:c,...s}=i;return de.createElement("tbody",ww({},s,{"data-test":n,ref:e,role:a,className:yt.dynamic([["2478922139",[Me.blue600]]])+" "+(Gi(r,{loading:c})||"")}),t,de.createElement(yt,{id:"2478922139",dynamic:[Me.blue600]},["tbody.__jsx-style-dynamic-selector{position:relative;}",".loading.__jsx-style-dynamic-selector:before{content:'';position:absolute;top:0;bottom:0;inset-inline-start:0;inset-inline-end:0;background-color:rgba(255,255,255,0.8);}",`.loading.__jsx-style-dynamic-selector:after{content:'';position:absolute;top:calc(50% - 24px);inset-inline-start:calc(50% - 24px);width:48px;height:48px;border:6px solid rgba(110,122,138,0.15);border-bottom-color:${Me.blue600};border-radius:50%;-webkit-animation:rotation-__jsx-style-dynamic-selector 1s linear infinite;animation:rotation-__jsx-style-dynamic-selector 1s linear infinite;}`,"@-webkit-keyframes rotation-__jsx-style-dynamic-selector{0%{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}","@keyframes rotation-__jsx-style-dynamic-selector{0%{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}"]))});ax.displayName="TableBody";ax.propTypes={children:X.node,className:X.string,dataTest:X.string,loading:X.bool,role:X.string};const R0=[`td.jsx-533878895{padding:14px 12px;font-size:14px;border:1px solid transparant;border-bottom:1px solid ${Me.grey300};color:${Me.grey900};}`,`td.active.jsx-533878895{outline:2px solid ${Me.grey600};outline-offset:-2px;}`,`td.bordered.jsx-533878895{border-inline-end:1px solid ${Me.grey300};}`,"td.bordered.jsx-533878895:last-child{border-inline-end:1px solid transparent;}",`td.error.jsx-533878895{color:${Me.red700};}`,`td.muted.jsx-533878895{color:${Me.grey700};font-style:italic;}`,`td.valid.jsx-533878895{color:${Me.green700};}`,"td.large.jsx-533878895{padding:20px 12px;font-size:16px;}","tr:last-child td.jsx-533878895{border-bottom:1px solid transparent;}",`tfoot tr:first-child td.jsx-533878895{border-top:1px solid ${Me.grey300};}`];R0.__hash="533878895";function _w(){return _w=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},_w.apply(null,arguments)}const P7={left:"right",right:"left",center:"center"},Xp=Ie.forwardRef((i,e)=>{var t;let{active:r,align:n="left",backgroundColor:a,bordered:c,children:s,className:h,colSpan:p,dataTest:m="dhis2-uicore-tabledatacel",error:y,large:g,left:x="auto",muted:v,role:_,rowSpan:C,scope:k,staticStyle:w,valid:E,width:A="auto",onClick:M,...S}=i;const N=(t=P7[n])!==null&&t!==void 0?t:n;return de.createElement("td",_w({},S,{ref:e,colSpan:p,rowSpan:C,onClick:M,"data-test":m,role:_,scope:k,className:`jsx-${R0.__hash} `+yt.dynamic([["836058623",[x,n,A,a||Me.white,N,a||Me.teal100,a||Me.grey100,a||Me.grey200,a||"#cdeae8"]]])+" "+(Gi(h,{active:r,bordered:c,error:y,large:g,muted:v,staticStyle:w,valid:E})||"")}),s,de.createElement(yt,{id:R0.__hash},R0),de.createElement(yt,{id:"836058623",dynamic:[x,n,A,a||Me.white,N,a||Me.teal100,a||Me.grey100,a||Me.grey200,a||"#cdeae8"]},[`td.__jsx-style-dynamic-selector{inset-inline-start:${x};text-align:${n};width:${A};background-color:${a||Me.white};}`,`.__jsx-style-dynamic-selector:dir(rtl){text-align:${N};}`,`tr.selected>td.__jsx-style-dynamic-selector{background-color:${a||Me.teal100};}`,`tr:hover>td.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${a||Me.grey100};}`,`tr:active>td.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${a||Me.grey200};}`,`tr.selected:hover>td.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${a||"#cdeae8"};}`]))});Xp.displayName="TableDataCell";const Yb=vg(["valid","error","muted"],X.bool);Xp.propTypes={active:X.bool,align:X.oneOf(["left","center","right"]),backgroundColor:X.string,bordered:X.bool,children:X.node,className:X.string,colSpan:X.string,dataTest:X.string,error:Yb,large:X.bool,left:Un(i=>i.fixed,X.string),muted:Yb,role:X.string,rowSpan:X.string,scope:X.string,staticStyle:X.bool,valid:Yb,width:X.string,onClick:X.func};const L0=[`th.jsx-2895298632{padding:12px;border:1px solid transparant;border-bottom:1px solid ${Me.grey300};color:${Me.grey800};font-weight:normal;font-size:14px;vertical-align:top;}`,"thead th.jsx-2895298632{padding:8px 12px;font-size:13px;}",`th.jsx-2895298632:last-of-type{border-inline-end:1px solid ${Me.grey300};}`,`th.active.jsx-2895298632{outline:2px solid ${Me.grey600};outline-offset:-2px;}`,`th.bordered.jsx-2895298632{border-inline-end:1px solid ${Me.grey300};}`,"th.bordered.jsx-2895298632:last-child{border-inline-end:1px solid transparent;}",`th.error.jsx-2895298632{color:${Me.red700};}`,`th.muted.jsx-2895298632{color:${Me.grey700};font-style:italic;}`,`th.valid.jsx-2895298632{color:${Me.green700};}`,"th.large.jsx-2895298632{padding:14px 12px;font-size:16px;}","thead th.large.jsx-2895298632{padding:13px 12px;font-size:15px;}","th.fixed.jsx-2895298632{position:-webkit-sticky;position:sticky;z-index:1;}","thead th.fixed.jsx-2895298632{position:-webkit-sticky;position:sticky;z-index:2;}","thead th.fixedHorizontally.jsx-2895298632{z-index:3;}","tr:last-child th.jsx-2895298632{border-bottom:1px solid transparent;}",`thead tr:last-child th.jsx-2895298632{border-bottom:1px solid ${Me.grey300};}`,`tfoot>tr:first-child th.jsx-2895298632{border-top:1px solid ${Me.grey300};}`];L0.__hash="2895298632";function Cw(){return Cw=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Cw.apply(null,arguments)}const r0="auto",ox=Ie.forwardRef((i,e)=>{let{active:t,align:r="left",backgroundColor:n,bordered:a,children:c,className:s,colSpan:h,dataTest:p="dhis2-uicore-tablecell",error:m,fixed:y,large:g,left:x=r0,muted:v,rowSpan:_,role:C,scope:k,staticStyle:w,top:E=r0,valid:A,width:M=r0,onClick:S,...N}=i;return de.createElement("th",Cw({},N,{ref:e,colSpan:h,rowSpan:_,onClick:S,"data-test":p,role:C,scope:k,className:`jsx-${L0.__hash} `+yt.dynamic([["2588011372",[x,E,r,M,n||Me.grey200,n||Me.grey300,n||Me.grey300,n||Me.grey200]]])+" "+(Gi(s,{active:t,bordered:a,error:m,fixed:y,fixedHorizontally:y&&x!==r0,large:g,muted:v,staticStyle:w,valid:A})||"")}),c,de.createElement(yt,{id:L0.__hash},L0),de.createElement(yt,{id:"2588011372",dynamic:[x,E,r,M,n||Me.grey200,n||Me.grey300,n||Me.grey300,n||Me.grey200]},[`th.__jsx-style-dynamic-selector{inset-inline-start:${x};top:${E};text-align:${r};width:${M};background-color:${n||Me.grey200};}`,`thead th.fixedHorizontally.__jsx-style-dynamic-selector{background-color:${n||Me.grey300};}`,`tbody>tr:hover>th.__jsx-style-dynamic-selector:not(.staticStyle),tfoot>tr:hover>th.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${n||Me.grey300};}`,`tbody>tr:active>th.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${n||Me.grey200};}`]))});ox.displayName="TableHeaderCell";const Zb=vg(["valid","error","muted"],X.bool);ox.propTypes={active:X.bool,align:X.oneOf(["left","center","right"]),backgroundColor:X.string,bordered:X.bool,children:X.node,className:X.string,colSpan:X.string,dataTest:X.string,error:Zb,fixed:X.bool,large:X.bool,left:Un(i=>i.fixed&&!i.top,X.string),muted:Zb,role:X.string,rowSpan:X.string,scope:X.string,staticStyle:X.bool,top:Un(i=>i.fixed&&!i.left,X.string),valid:Zb,width:X.string,onClick:X.func};function Tw(){return Tw=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Tw.apply(null,arguments)}const lx=Ie.forwardRef((i,e)=>{let{onClick:t,children:r,className:n,dataTest:a="dhis2-uicore-tableheadercellaction",title:c,...s}=i;return de.createElement("button",Tw({},s,{"data-test":a,onClick:t,title:c,ref:e,className:yt.dynamic([["4225768774",[Me.grey400]]])+" "+(n||"")}),r,de.createElement(yt,{id:"4225768774",dynamic:[Me.grey400]},["button.__jsx-style-dynamic-selector{border:none;padding:0;background:transparent;width:24px;height:24px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;cursor:pointer;border-radius:4px;margin-inline-start:2px;}",`button.__jsx-style-dynamic-selector:hover,button.__jsx-style-dynamic-selector:focus-visible{background:${Me.grey400};}`,"button.__jsx-style-dynamic-selector:active,button.__jsx-style-dynamic-selector:focus{outline:none;}"]))});lx.displayName="TableHeaderCellAction";lx.propTypes={children:X.node,className:X.string,dataTest:X.string,title:X.string,onClick:X.func};function Sw(){return Sw=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Sw.apply(null,arguments)}const cx=Ie.forwardRef((i,e)=>{let{children:t,className:r,dataTest:n="dhis2-uicore-tablefoot",role:a,...c}=i;return de.createElement("tfoot",Sw({},c,{className:r,"data-test":n,ref:e,role:a}),t)});cx.displayName="TableFoot";cx.propTypes={children:X.node,className:X.string,dataTest:X.string,role:X.string};function Ew(){return Ew=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Ew.apply(null,arguments)}const ux=Ie.forwardRef((i,e)=>{let{children:t,className:r,dataTest:n,role:a,...c}=i;return de.createElement("thead",Ew({},c,{className:r,"data-test":n,ref:e,role:a}),t)});ux.displayName="TableHead";ux.propTypes={children:X.node,className:X.string,dataTest:X.string,role:X.string};function kw(){return kw=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},kw.apply(null,arguments)}const dx=Ie.forwardRef((i,e)=>{let{children:t,className:r,dataTest:n="dhis2-uicore-tablerow",draggable:a,role:c,selected:s,...h}=i;return de.createElement("tr",kw({},h,{ref:e,"data-test":n,role:c,className:"jsx-1820444258 "+(Gi(r,{selected:s,draggable:a})||"")}),t,de.createElement(yt,{id:"1820444258"},["tbody>tr.draggable.jsx-1820444258,tfoot>tr.draggable.jsx-1820444258{cursor:move;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}"]))});dx.displayName="TableRow";dx.propTypes={children:X.node,className:X.string,dataTest:X.string,draggable:X.bool,role:X.string,selected:X.bool};function Mw(){return Mw=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Mw.apply(null,arguments)}const k2=Ie.forwardRef((i,e)=>{let{children:t,className:r,dataTest:n="dhis2-uicore-tablescrollbox",maxHeight:a="auto",maxWidth:c="auto",...s}=i;return de.createElement("div",Mw({},s,{"data-test":n,ref:e,className:yt.dynamic([["2859562182",[Me.grey300,a,c]]])+" "+(r||"")}),t,de.createElement(yt,{id:"2859562182",dynamic:[Me.grey300,a,c]},[`div.__jsx-style-dynamic-selector{border:1px solid ${Me.grey300};border-top:none;box-sizing:border-box;max-height:${a};max-width:${c};overflow:auto;}`]))});k2.displayName="TableScrollBox";k2.propTypes={children:X.node,className:X.string,dataTest:X.string,maxHeight:X.string,maxWidth:X.string};const hx=Ie.forwardRef((i,e)=>{let{children:t,className:r,dataTest:n="dhis2-uicore-datatable",layout:a="auto",role:c,scrollHeight:s,scrollWidth:h,width:p="100%"}=i;const m=!!(s||h),y=de.createElement(E2,{borderless:m,className:r,dataTest:n,layout:a,ref:e,role:c,width:p},t);return m?de.createElement(k2,{className:Gi(r,"tablescrollbox"),dataTest:`${n}-scrollbox`,maxHeight:s,maxWidth:h},y):y});hx.displayName="DataTable";hx.propTypes={children:X.node,className:X.string,dataTest:X.string,layout:X.oneOf(["auto","fixed","initial","inherit"]),role:X.string,scrollHeight:X.string,scrollWidth:X.string,width:X.string};function Aw(){return Aw=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Aw.apply(null,arguments)}const Iu=Ie.forwardRef((i,e)=>{let{active:t,align:r="left",backgroundColor:n,bordered:a,children:c,className:s,colSpan:h,dataTest:p="dhis2-uicore-datatablecell",error:m,fixed:y,large:g,left:x="auto",muted:v,rowSpan:_,role:C,scope:k,staticStyle:w,tag:E,valid:A,width:M="auto",onClick:S,...N}=i;const Y=!E&&y||E&&E==="th"?ox:Xp;return de.createElement(Y,Aw({},N,{active:t,align:r,backgroundColor:n,bordered:a,className:s,colSpan:h,dataTest:p,error:m,fixed:y,large:g,left:x,muted:v,rowSpan:_,ref:e,role:C,staticStyle:w,scope:k,valid:A,width:M,onClick:S}),c)});Iu.displayName="DataTableCell";const Xb=vg(["valid","error","muted"],X.bool),eE=Un(i=>i.fixed,X.string);Iu.propTypes={active:X.bool,align:X.oneOf(["left","center","right"]),backgroundColor:X.string,bordered:X.bool,children:X.node,className:X.string,colSpan:X.string,dataTest:X.string,error:Xb,fixed:X.bool,large:X.bool,left:eE,muted:Xb,role:X.string,rowSpan:X.string,scope:X.string,staticStyle:X.bool,tag:X.oneOf(["td","th"]),valid:Xb,width:eE,onClick:X.func};const pp=["span.container.jsx-1552921066{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}","span.top.jsx-1552921066{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}","span.content.jsx-1552921066{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:24px;}"];pp.__hash="1552921066";const tE={styles:de.createElement(yt,{id:"1231353820"},["thead>tr>th.DataTableColumnHeader.jsx-1231353820{padding-top:6px;padding-bottom:6px;}","thead>tr>th.DataTableColumnHeader.large.jsx-1231353820{padding-top:12px;padding-bottom:12px;}"]),className:"jsx-1231353820"},D7={"Toggle filter":"","Sort items":"ترتيب العناصر"},R7={"Toggle filter":"Přepnout filtr","Sort items":"Třídit položky"},L7={"Toggle filter":"Toggle filter","Sort items":"Sort items"},N7={"Toggle filter":"Alternar filtro","Sort items":"Ordena elementos"},z7={"Toggle filter":"Alternar filtro","Sort items":"Clasificar artículos"},O7={"Toggle filter":"","Sort items":"តម្រៀប"},j7={"Toggle filter":"ສະຫຼັບຕົວກອງ","Sort items":"ຈັດຮຽງລາຍການ"},F7={"Toggle filter":"Slå på filter","Sort items":"Sorter elementer"},B7={"Toggle filter":"Schakelfilter","Sort items":"Items sorteren"},$7={"Toggle filter":"Alternar filtro","Sort items":"Ordenar itens"},U7={"Toggle filter":"Переключить фильтр","Sort items":"Сортировать элементы"},V7={"Toggle filter":"Переключити фільтр","Sort items":"Сортувати об'єкти"},G7={"Toggle filter":"Фильтрни алмаштириш","Sort items":"Элементларни саралаш"},H7={"Toggle filter":"切换过滤器","Sort items":"排序项目"},yo="default";ve.addResources("ar",yo,D7);ve.addResources("cs",yo,R7);ve.addResources("en",yo,L7);ve.addResources("es",yo,N7);ve.addResources("es_419",yo,z7);ve.addResources("km",yo,O7);ve.addResources("lo",yo,j7);ve.addResources("nb",yo,F7);ve.addResources("nl",yo,B7);ve.addResources("pt",yo,$7);ve.addResources("ru",yo,U7);ve.addResources("uk",yo,V7);ve.addResources("uz_UZ_Cyrl",yo,G7);ve.addResources("zh",yo,H7);const HA=i=>{let{active:e,name:t,onClick:r}=i;const n=e?Me.blue700:Me.grey600,a=r?c=>{r({name:t,show:!e},c)}:void 0;return de.createElement(lx,{onClick:a,title:ve.t("Toggle filter")},de.createElement(Tk,{color:n}))};HA.propTypes={active:X.bool,name:X.string,onClick:X.func};const q7="asc",W7="desc",Y7="default",Bm=[Y7,q7,W7],Z7=i=>{const t=(Bm.indexOf(i)+1)%Bm.length;return Bm[t]},qA=i=>{let{name:e,sortDirection:t,title:r,onClick:n}=i;const a=Z7(t),c=n?s=>{n({name:e,direction:a},s)}:void 0;return de.createElement(lx,{onClick:c,title:r||ve.t("Sort items")},de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",className:yt.dynamic([["884818973",[Me.grey500,Me.blue700]]])+" "+(t||"")},de.createElement("g",{fill:"none",fillRule:"evenodd",className:yt.dynamic([["884818973",[Me.grey500,Me.blue700]]])},de.createElement("polygon",{points:"4 9 12 9 8 14",className:yt.dynamic([["884818973",[Me.grey500,Me.blue700]]])+" top"}),de.createElement("polygon",{points:"4 7 12 7 8 2",className:yt.dynamic([["884818973",[Me.grey500,Me.blue700]]])+" bottom"}))),de.createElement(yt,{id:"884818973",dynamic:[Me.grey500,Me.blue700]},[`svg.__jsx-style-dynamic-selector .top.__jsx-style-dynamic-selector,svg.__jsx-style-dynamic-selector .bottom.__jsx-style-dynamic-selector{fill:${Me.grey500};}`,`svg.asc.__jsx-style-dynamic-selector .top.__jsx-style-dynamic-selector,svg.desc.__jsx-style-dynamic-selector .bottom.__jsx-style-dynamic-selector{fill:${Me.blue700};}`]))};qA.propTypes={name:X.string,sortDirection:Un(i=>i.onClick,X.oneOf(Bm)),title:X.string,onClick:X.func};const n0={left:"flex-start",center:"center",right:"flex-end"},px=Ie.forwardRef((i,e)=>{let{align:t,children:r,className:n,colSpan:a,dataTest:c="dhis2-uicore-datatablecellhead",filter:s,fixed:h,large:p,left:m,name:y,role:g,rowSpan:x,scope:v,showFilter:_,sortDirection:C,sortIconTitle:k,top:w,width:E,onFilterIconClick:A,onSortIconClick:M}=i;return de.createElement(ox,{align:t,className:Gi(n,"DataTableColumnHeader",tE.className),colSpan:a,dataTest:c,fixed:h,large:p,left:m,ref:e,rowSpan:x,role:g,scope:v,top:w,width:E},de.createElement("span",{className:`jsx-3463223249 jsx-${pp.__hash} container`},de.createElement("span",{className:`jsx-3463223249 jsx-${pp.__hash} `+(Gi("top",{large:p})||"")},de.createElement("span",{className:`jsx-3463223249 jsx-${pp.__hash} content`},r),C&&de.createElement(qA,{name:y,sortDirection:C,onClick:M,title:k}),s&&de.createElement(HA,{name:y,active:_,onClick:A})),_&&s),tE.styles,de.createElement(yt,{id:pp.__hash},pp),de.createElement(yt,{id:"3463223249"},[`.label.jsx-3463223249{-webkit-box-pack:${n0[t]};-webkit-justify-content:${n0[t]};-ms-flex-pack:${n0[t]};justify-content:${n0[t]};}`]))});px.displayName="DataTableColumnHeader";px.propTypes={align:X.oneOf(["left","center","right"]),children:X.node,className:X.string,colSpan:X.string,dataTest:X.string,filter:Un(i=>i.onFilterIconClick||i.showFilter,X.node),fixed:X.bool,large:X.bool,left:Un(i=>i.fixed&&!i.top,X.string),name:X.string,role:X.string,rowSpan:X.string,scope:X.string,showFilter:Un(i=>i.filter,X.bool),sortDirection:Un(i=>i.onSortIconClick,X.oneOf(Bm)),sortIconTitle:X.string,top:Un(i=>i.fixed&&!i.left,X.string),width:X.string,onFilterIconClick:Un(i=>i.filter,X.func),onSortIconClick:Un(i=>i.sortDirection,X.func)};const iE={styles:de.createElement(yt,{id:"1795567040"},[`tr.isHoveringExpandedContent.jsx-1795567040>td{background-color:${Me.grey100};}`,`tr.isHoveringExpandedContent.jsx-1795567040>th{background-color:${Me.grey300};}`,"tr.selected.isHoveringExpandedContent.jsx-1795567040>td{background-color:#cdeae8;}","tr.expanded.jsx-1795567040>td{border-bottom-color:transparent;}",`tr.expanded.jsx-1795567040>td.bordered{border-bottom-color:${Me.grey300};}`]),className:"jsx-1795567040"},X7=()=>de.createElement(Xp,{width:"48px"},de.createElement(wk,null)),rE={styles:de.createElement(yt,{id:"927553068"},["td.jsx-927553068{cursor:pointer;}"]),className:"jsx-927553068"},WA=i=>{let{expanded:e,onClick:t}=i;return de.createElement(Xp,{className:Gi(rE.className,{expanded:e}),onClick:()=>t({expanded:!e}),width:"48px"},e?de.createElement(gk,null):de.createElement(fk,null),rE.styles)};WA.propTypes={expanded:X.bool,onClick:X.func};const{className:K7,styles:Q7}={styles:de.createElement(yt,{id:"626485122"},[`tr.expanded:hover+tr>td.jsx-626485122{background-color:${Me.grey100};}`,`tr.expanded:active+tr>td.jsx-626485122{background-color:${Me.grey200};}`,"tr.selected.expanded:hover+tr.jsx-626485122>td.jsx-626485122{background-color:#cdeae8;}"]),className:"jsx-626485122"},YA=i=>{let{children:e,className:t,colSpan:r,dataTest:n,selected:a,setIsHoveringExpandedContent:c}=i;return de.createElement(dx,{onMouseOver:()=>c(!0),onMouseOut:()=>c(!1),className:Gi({[`${t}-expandedrow`]:!!t}),selected:a,dataTest:n&&`${n}-expandedrow`},de.createElement(Xp,{className:K7,colSpan:r},e,Q7))};YA.propTypes={children:X.node,className:X.string,colSpan:X.string,dataTest:X.string,selected:X.bool,setIsHoveringExpandedContent:X.func};function Iw(){return Iw=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Iw.apply(null,arguments)}const Fl=Ie.forwardRef((i,e)=>{let{children:t,className:r,dataTest:n="dhis2-uicore-datatablerow",expandableContent:a,expanded:c,selected:s,draggable:h,role:p,onExpandToggle:m,...y}=i;const[g,x]=Ie.useState(!1),v=Gi(r,iE.className,{expanded:c,selected:s,draggable:h,isHoveringExpandedContent:g}),_=de.Children.count(t),C=String(h||a?_+1:_);return de.createElement(de.Fragment,null,de.createElement(dx,Iw({ref:e,className:v,dataTest:n,selected:s,draggable:h,role:p},y),h&&de.createElement(X7,null),a&&de.createElement(WA,{expanded:c,onClick:m}),t,iE.styles),a&&c&&de.createElement(YA,{className:r,dataTest:n,setIsHoveringExpandedContent:x,colSpan:C,selected:s},a))});Fl.displayName="DataTableRow";Fl.propTypes={children:X.node,className:X.string,dataTest:X.string,draggable:X.bool,expandableContent:Un(i=>i.onExpandToggle,X.node),expanded:X.bool,role:X.string,selected:X.bool,onExpandToggle:Un(i=>i.expandableContent,X.func)};const ZA=i=>{let{children:e,dataTest:t}=i;return de.createElement("div",{"data-test":t,className:"jsx-1638813748"},e,de.createElement(yt,{id:"1638813748"},[".jsx-1638813748{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-inline-end:4px;max-height:16px;max-width:16px;}"]))};ZA.propTypes={dataTest:X.string.isRequired,children:X.node};const XA=i=>{let{children:e,dataTest:t}=i;return de.createElement("span",{"data-test":t,className:"jsx-1110058759"},e,de.createElement(yt,{id:"1110058759"},[".jsx-1110058759{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}"]))};XA.propTypes={dataTest:X.string.isRequired,children:X.node};const Mm=i=>{let{maxWidth:e="240px",neutral:t,negative:r,positive:n,icon:a,bold:c,className:s,dataTest:h="dhis2-uicore-tag",children:p}=i;return de.createElement("div",{"data-test":h,className:yt.dynamic([["2409336266",[Me.grey300,Me.grey700,Me.grey900,e,Me.red100,Me.red800,Me.red900,Me.blue100,Me.blue800,Me.blue900,Me.green100,Me.green800,Me.green900,Me.grey700,Me.white,Me.white,Me.blue800,Me.blue050,Me.white,Me.green700,Me.green050,Me.white,Me.red700,Me.red050,Me.white]]])+" "+(Gi(s,{neutral:t,positive:n,negative:r,bold:c})||"")},a&&de.createElement(ZA,{dataTest:`${h}-icon`},a),de.createElement(XA,{dataTest:`${h}-text`},p),de.createElement(yt,{id:"2409336266",dynamic:[Me.grey300,Me.grey700,Me.grey900,e,Me.red100,Me.red800,Me.red900,Me.blue100,Me.blue800,Me.blue900,Me.green100,Me.green800,Me.green900,Me.grey700,Me.white,Me.white,Me.blue800,Me.blue050,Me.white,Me.green700,Me.green050,Me.white,Me.red700,Me.red050,Me.white]},[`div.__jsx-style-dynamic-selector{padding:5px 6px;border-radius:3px;background-color:${Me.grey300};fill:${Me.grey700};color:${Me.grey900};max-width:${e};display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:13px;height:23px;}`,`.negative.__jsx-style-dynamic-selector{background-color:${Me.red100};fill:${Me.red800};color:${Me.red900};}`,`.neutral.__jsx-style-dynamic-selector{background-color:${Me.blue100};fill:${Me.blue800};color:${Me.blue900};}`,`.positive.__jsx-style-dynamic-selector{background-color:${Me.green100};fill:${Me.green800};color:${Me.green900};}`,`.bold.__jsx-style-dynamic-selector{font-weight:700;background-color:${Me.grey700};color:${Me.white};fill:${Me.white};}`,`.bold.neutral.__jsx-style-dynamic-selector{background-color:${Me.blue800};color:${Me.blue050};fill:${Me.white};}`,`.bold.positive.__jsx-style-dynamic-selector{background-color:${Me.green700};color:${Me.green050};fill:${Me.white};}`,`.bold.negative.__jsx-style-dynamic-selector{background-color:${Me.red700};color:${Me.red050};fill:${Me.white};}`]))},Kb=vg(["neutral","positive","negative"],X.bool);Mm.propTypes={bold:X.bool,children:X.node,className:X.string,dataTest:X.string,icon:X.node,maxWidth:X.string,negative:Kb,neutral:Kb,positive:Kb};var M2={};Object.defineProperty(M2,"__esModule",{value:!0});M2.parse=s$;M2.serialize=a$;const J7=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e$=/^[\u0021-\u003A\u003C-\u007E]*$/,t$=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i$=/^[\u0020-\u003A\u003D-\u007E]*$/,r$=Object.prototype.toString,n$=(()=>{const i=function(){};return i.prototype=Object.create(null),i})();function s$(i,e){const t=new n$,r=i.length;if(r<2)return t;const n=(e==null?void 0:e.decode)||o$;let a=0;do{const c=i.indexOf("=",a);if(c===-1)break;const s=i.indexOf(";",a),h=s===-1?r:s;if(c>h){a=i.lastIndexOf(";",c-1)+1;continue}const p=nE(i,a,c),m=sE(i,c,p),y=i.slice(p,m);if(t[y]===void 0){let g=nE(i,c+1,h),x=sE(i,h,g);const v=n(i.slice(g,x));t[y]=v}a=h+1}while(a<r);return t}function nE(i,e,t){do{const r=i.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<t);return t}function sE(i,e,t){for(;e>t;){const r=i.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return t}function a$(i,e,t){const r=(t==null?void 0:t.encode)||encodeURIComponent;if(!J7.test(i))throw new TypeError(`argument name is invalid: ${i}`);const n=r(e);if(!e$.test(n))throw new TypeError(`argument val is invalid: ${e}`);let a=i+"="+n;if(!t)return a;if(t.maxAge!==void 0){if(!Number.isInteger(t.maxAge))throw new TypeError(`option maxAge is invalid: ${t.maxAge}`);a+="; Max-Age="+t.maxAge}if(t.domain){if(!t$.test(t.domain))throw new TypeError(`option domain is invalid: ${t.domain}`);a+="; Domain="+t.domain}if(t.path){if(!i$.test(t.path))throw new TypeError(`option path is invalid: ${t.path}`);a+="; Path="+t.path}if(t.expires){if(!l$(t.expires)||!Number.isFinite(t.expires.valueOf()))throw new TypeError(`option expires is invalid: ${t.expires}`);a+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(a+="; HttpOnly"),t.secure&&(a+="; Secure"),t.partitioned&&(a+="; Partitioned"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${t.priority}`)}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${t.sameSite}`)}return a}function o$(i){if(i.indexOf("%")===-1)return i;try{return decodeURIComponent(i)}catch{return i}}function l$(i){return r$.call(i)==="[object Date]"}/**
 * react-router v7.6.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var KA=i=>{throw TypeError(i)},c$=(i,e,t)=>e.has(i)||KA("Cannot "+t),Qb=(i,e,t)=>(c$(i,e,"read from private field"),t?t.call(i):e.get(i)),u$=(i,e,t)=>e.has(i)?KA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),aE="popstate";function d$(i={}){function e(n,a){let{pathname:c="/",search:s="",hash:h=""}=Uc(n.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),sg("",{pathname:c,search:s,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(n,a){let c=n.document.querySelector("base"),s="";if(c&&c.getAttribute("href")){let h=n.location.href,p=h.indexOf("#");s=p===-1?h:h.slice(0,p)}return s+"#"+(typeof a=="string"?a:ju(a))}function r(n,a){Kn(n.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return p$(e,t,r,i)}function Mr(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Kn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function h$(){return Math.random().toString(36).substring(2,10)}function oE(i,e){return{usr:i.state,key:i.key,idx:e}}function sg(i,e,t=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Uc(e):e,state:t,key:e&&e.key||r||h$()}}function ju({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Uc(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function p$(i,e,t,r={}){let{window:n=document.defaultView,v5Compat:a=!1}=r,c=n.history,s="POP",h=null,p=m();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function m(){return(c.state||{idx:null}).idx}function y(){s="POP";let C=m(),k=C==null?null:C-p;p=C,h&&h({action:s,location:_.location,delta:k})}function g(C,k){s="PUSH";let w=sg(_.location,C,k);t&&t(w,C),p=m()+1;let E=oE(w,p),A=_.createHref(w);try{c.pushState(E,"",A)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;n.location.assign(A)}a&&h&&h({action:s,location:_.location,delta:1})}function x(C,k){s="REPLACE";let w=sg(_.location,C,k);t&&t(w,C),p=m();let E=oE(w,p),A=_.createHref(w);c.replaceState(E,"",A),a&&h&&h({action:s,location:_.location,delta:0})}function v(C){return QA(C)}let _={get action(){return s},get location(){return i(n,c)},listen(C){if(h)throw new Error("A history only accepts one active listener");return n.addEventListener(aE,y),h=C,()=>{n.removeEventListener(aE,y),h=null}},createHref(C){return e(n,C)},createURL:v,encodeLocation(C){let k=v(C);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:g,replace:x,go(C){return c.go(C)}};return _}function QA(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Mr(t,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:ju(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}var Am,lE=class{constructor(i){if(u$(this,Am,new Map),i)for(let[e,t]of i)this.set(e,t)}get(i){if(Qb(this,Am).has(i))return Qb(this,Am).get(i);if(i.defaultValue!==void 0)return i.defaultValue;throw new Error("No value found for context")}set(i,e){Qb(this,Am).set(i,e)}};Am=new WeakMap;var f$=new Set(["lazy","caseSensitive","path","id","index","children"]);function m$(i){return f$.has(i)}var g$=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function y$(i){return g$.has(i)}function v$(i){return i.index===!0}function lv(i,e,t=[],r={}){return i.map((n,a)=>{let c=[...t,String(a)],s=typeof n.id=="string"?n.id:c.join("-");if(Mr(n.index!==!0||!n.children,"Cannot specify children on an index route"),Mr(!r[s],`Found a route id collision on id "${s}".  Route id's must be globally unique within Data Router usages`),v$(n)){let h={...n,...e(n),id:s};return r[s]=h,h}else{let h={...n,...e(n),id:s,children:void 0};return r[s]=h,n.children&&(h.children=lv(n.children,e,c,r)),h}})}function wu(i,e,t="/"){return N0(i,e,t,!1)}function N0(i,e,t,r){let n=typeof e=="string"?Uc(e):e,a=mo(n.pathname||"/",t);if(a==null)return null;let c=eI(i);x$(c);let s=null;for(let h=0;s==null&&h<c.length;++h){let p=I$(a);s=M$(c[h],p,r)}return s}function JA(i,e){let{route:t,pathname:r,params:n}=i;return{id:t.id,pathname:r,params:n,data:e[t.id],handle:t.handle}}function eI(i,e=[],t=[],r=""){let n=(a,c,s)=>{let h={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(Mr(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length));let p=ql([r,h.relativePath]),m=t.concat(h);a.children&&a.children.length>0&&(Mr(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),eI(a.children,e,m,p)),!(a.path==null&&!a.index)&&e.push({path:p,score:E$(p,a.index),routesMeta:m})};return i.forEach((a,c)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))n(a,c);else for(let h of tI(a.path))n(a,c,h)}),e}function tI(i){let e=i.split("/");if(e.length===0)return[];let[t,...r]=e,n=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return n?[a,""]:[a];let c=tI(r.join("/")),s=[];return s.push(...c.map(h=>h===""?a:[a,h].join("/"))),n&&s.push(...c),s.map(h=>i.startsWith("/")&&h===""?"/":h)}function x$(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:k$(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var b$=/^:[\w-]+$/,w$=3,_$=2,C$=1,T$=10,S$=-2,cE=i=>i==="*";function E$(i,e){let t=i.split("/"),r=t.length;return t.some(cE)&&(r+=S$),e&&(r+=_$),t.filter(n=>!cE(n)).reduce((n,a)=>n+(b$.test(a)?w$:a===""?C$:T$),r)}function k$(i,e){return i.length===e.length&&i.slice(0,-1).every((r,n)=>r===e[n])?i[i.length-1]-e[e.length-1]:0}function M$(i,e,t=!1){let{routesMeta:r}=i,n={},a="/",c=[];for(let s=0;s<r.length;++s){let h=r[s],p=s===r.length-1,m=a==="/"?e:e.slice(a.length)||"/",y=cv({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},m),g=h.route;if(!y&&p&&t&&!r[r.length-1].route.index&&(y=cv({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},m)),!y)return null;Object.assign(n,y.params),c.push({params:n,pathname:ql([a,y.pathname]),pathnameBase:R$(ql([a,y.pathnameBase])),route:g}),y.pathnameBase!=="/"&&(a=ql([a,y.pathnameBase]))}return c}function cv(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,r]=A$(i.path,i.caseSensitive,i.end),n=e.match(t);if(!n)return null;let a=n[0],c=a.replace(/(.)\/+$/,"$1"),s=n.slice(1);return{params:r.reduce((p,{paramName:m,isOptional:y},g)=>{if(m==="*"){let v=s[g]||"";c=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const x=s[g];return y&&!x?p[m]=void 0:p[m]=(x||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:c,pattern:i}}function A$(i,e=!1,t=!0){Kn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],n="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,s,h)=>(r.push({paramName:s,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),n+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":i!==""&&i!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),r]}function I$(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function mo(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=i.charAt(t);return r&&r!=="/"?null:i.slice(t)||"/"}function P$(i,e="/"){let{pathname:t,search:r="",hash:n=""}=typeof i=="string"?Uc(i):i;return{pathname:t?t.startsWith("/")?t:D$(t,e):e,search:L$(r),hash:N$(n)}}function D$(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(n=>{n===".."?t.length>1&&t.pop():n!=="."&&t.push(n)}),t.length>1?t.join("/"):"/"}function Jb(i,e,t,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iI(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function fx(i){let e=iI(i);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function mx(i,e,t,r=!1){let n;typeof i=="string"?n=Uc(i):(n={...i},Mr(!n.pathname||!n.pathname.includes("?"),Jb("?","pathname","search",n)),Mr(!n.pathname||!n.pathname.includes("#"),Jb("#","pathname","hash",n)),Mr(!n.search||!n.search.includes("#"),Jb("#","search","hash",n)));let a=i===""||n.pathname==="",c=a?"/":n.pathname,s;if(c==null)s=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let g=c.split("/");for(;g[0]==="..";)g.shift(),y-=1;n.pathname=g.join("/")}s=y>=0?e[y]:"/"}let h=P$(n,s),p=c&&c!=="/"&&c.endsWith("/"),m=(a||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(p||m)&&(h.pathname+="/"),h}var ql=i=>i.join("/").replace(/\/\/+/g,"/"),R$=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),L$=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,N$=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,uv=class{constructor(i,e,t,r=!1){this.status=i,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function zp(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var rI=["POST","PUT","PATCH","DELETE"],z$=new Set(rI),O$=["GET",...rI],j$=new Set(O$),F$=new Set([301,302,303,307,308]),B$=new Set([307,308]),e1={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},$$={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},fp={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},A2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,U$=i=>({hasErrorBoundary:!!i.hasErrorBoundary}),nI="remix-router-transitions",sI=Symbol("ResetLoaderData");function V$(i){const e=i.window?i.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Mr(i.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=i.hydrationRouteProperties||[],n=i.mapRouteProperties||U$,a={},c=lv(i.routes,n,void 0,a),s,h=i.basename||"/",p=i.dataStrategy||Y$,m={unstable_middleware:!1,...i.future},y=null,g=new Set,x=null,v=null,_=null,C=i.hydrationData!=null,k=wu(c,i.history.location,h),w=!1,E=null,A;if(k==null&&!i.patchRoutesOnNavigation){let ht=Yo(404,{pathname:i.history.location.pathname}),{matches:bt,route:Mt}=wE(c);A=!0,k=bt,E={[Mt.id]:ht}}else if(k&&!i.hydrationData&&vr(k,c,i.history.location.pathname).active&&(k=null),k)if(k.some(ht=>ht.route.lazy))A=!1;else if(!k.some(ht=>ht.route.loader))A=!0;else{let ht=i.hydrationData?i.hydrationData.loaderData:null,bt=i.hydrationData?i.hydrationData.errors:null;if(bt){let Mt=k.findIndex($t=>bt[$t.route.id]!==void 0);A=k.slice(0,Mt+1).every($t=>!Dw($t.route,ht,bt))}else A=k.every(Mt=>!Dw(Mt.route,ht,bt))}else{A=!1,k=[];let ht=vr(null,c,i.history.location.pathname);ht.active&&ht.matches&&(w=!0,k=ht.matches)}let M,S={historyAction:i.history.action,location:i.history.location,matches:k,initialized:A,navigation:e1,restoreScrollPosition:i.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:i.hydrationData&&i.hydrationData.loaderData||{},actionData:i.hydrationData&&i.hydrationData.actionData||null,errors:i.hydrationData&&i.hydrationData.errors||E,fetchers:new Map,blockers:new Map},N="POP",Y=!1,Z,K=!1,U=new Map,$=null,B=!1,R=!1,L=new Set,G=new Map,F=0,j=-1,q=new Map,W=new Set,se=new Map,fe=new Map,ee=new Set,oe=new Map,Ce,ge=null;function Ee(){if(y=i.history.listen(({action:ht,location:bt,delta:Mt})=>{if(Ce){Ce(),Ce=void 0;return}Kn(oe.size===0||Mt!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let $t=kt({currentLocation:S.location,nextLocation:bt,historyAction:ht});if($t&&Mt!=null){let Zt=new Promise(ki=>{Ce=ki});i.history.go(Mt*-1),St($t,{state:"blocked",location:bt,proceed(){St($t,{state:"proceeding",proceed:void 0,reset:void 0,location:bt}),Zt.then(()=>i.history.go(Mt))},reset(){let ki=new Map(S.blockers);ki.set($t,fp),le({blockers:ki})}});return}return ce(ht,bt)}),t){sU(e,U);let ht=()=>aU(e,U);e.addEventListener("pagehide",ht),$=()=>e.removeEventListener("pagehide",ht)}return S.initialized||ce("POP",S.location,{initialHydration:!0}),M}function J(){y&&y(),$&&$(),g.clear(),Z&&Z.abort(),S.fetchers.forEach((ht,bt)=>Qe(bt)),S.blockers.forEach((ht,bt)=>mt(bt))}function ie(ht){return g.add(ht),()=>g.delete(ht)}function le(ht,bt={}){S={...S,...ht};let Mt=[],$t=[];S.fetchers.forEach((Zt,ki)=>{Zt.state==="idle"&&(ee.has(ki)?Mt.push(ki):$t.push(ki))}),ee.forEach(Zt=>{!S.fetchers.has(Zt)&&!G.has(Zt)&&Mt.push(Zt)}),[...g].forEach(Zt=>Zt(S,{deletedFetchers:Mt,viewTransitionOpts:bt.viewTransitionOpts,flushSync:bt.flushSync===!0})),Mt.forEach(Zt=>Qe(Zt)),$t.forEach(Zt=>S.fetchers.delete(Zt))}function be(ht,bt,{flushSync:Mt}={}){var ze,Ve;let $t=S.actionData!=null&&S.navigation.formMethod!=null&&Io(S.navigation.formMethod)&&S.navigation.state==="loading"&&((ze=ht.state)==null?void 0:ze._isRedirect)!==!0,Zt;bt.actionData?Object.keys(bt.actionData).length>0?Zt=bt.actionData:Zt=null:$t?Zt=S.actionData:Zt=null;let ki=bt.loaderData?xE(S.loaderData,bt.loaderData,bt.matches||[],bt.errors):S.loaderData,Di=S.blockers;Di.size>0&&(Di=new Map(Di),Di.forEach((Xe,et)=>Di.set(et,fp)));let We=Y===!0||S.navigation.formMethod!=null&&Io(S.navigation.formMethod)&&((Ve=ht.state)==null?void 0:Ve._isRedirect)!==!0;s&&(c=s,s=void 0),B||N==="POP"||(N==="PUSH"?i.history.push(ht,ht.state):N==="REPLACE"&&i.history.replace(ht,ht.state));let Te;if(N==="POP"){let Xe=U.get(S.location.pathname);Xe&&Xe.has(ht.pathname)?Te={currentLocation:S.location,nextLocation:ht}:U.has(ht.pathname)&&(Te={currentLocation:ht,nextLocation:S.location})}else if(K){let Xe=U.get(S.location.pathname);Xe?Xe.add(ht.pathname):(Xe=new Set([ht.pathname]),U.set(S.location.pathname,Xe)),Te={currentLocation:S.location,nextLocation:ht}}le({...bt,actionData:Zt,loaderData:ki,historyAction:N,location:ht,initialized:!0,navigation:e1,revalidation:"idle",restoreScrollPosition:nr(ht,bt.matches||S.matches),preventScrollReset:We,blockers:Di},{viewTransitionOpts:Te,flushSync:Mt===!0}),N="POP",Y=!1,K=!1,B=!1,R=!1,ge==null||ge.resolve(),ge=null}async function te(ht,bt){if(typeof ht=="number"){i.history.go(ht);return}let Mt=Pw(S.location,S.matches,h,ht,bt==null?void 0:bt.fromRouteId,bt==null?void 0:bt.relative),{path:$t,submission:Zt,error:ki}=uE(!1,Mt,bt),Di=S.location,We=sg(S.location,$t,bt&&bt.state);We={...We,...i.history.encodeLocation(We)};let Te=bt&&bt.replace!=null?bt.replace:void 0,ze="PUSH";Te===!0?ze="REPLACE":Te===!1||Zt!=null&&Io(Zt.formMethod)&&Zt.formAction===S.location.pathname+S.location.search&&(ze="REPLACE");let Ve=bt&&"preventScrollReset"in bt?bt.preventScrollReset===!0:void 0,Xe=(bt&&bt.flushSync)===!0,et=kt({currentLocation:Di,nextLocation:We,historyAction:ze});if(et){St(et,{state:"blocked",location:We,proceed(){St(et,{state:"proceeding",proceed:void 0,reset:void 0,location:We}),te(ht,bt)},reset(){let ct=new Map(S.blockers);ct.set(et,fp),le({blockers:ct})}});return}await ce(ze,We,{submission:Zt,pendingError:ki,preventScrollReset:Ve,replace:bt&&bt.replace,enableViewTransition:bt&&bt.viewTransition,flushSync:Xe})}function ae(){ge||(ge=oU()),Pe(),le({revalidation:"loading"});let ht=ge.promise;return S.navigation.state==="submitting"?ht:S.navigation.state==="idle"?(ce(S.historyAction,S.location,{startUninterruptedRevalidation:!0}),ht):(ce(N||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation,enableViewTransition:K===!0}),ht)}async function ce(ht,bt,Mt){Z&&Z.abort(),Z=null,N=ht,B=(Mt&&Mt.startUninterruptedRevalidation)===!0,fr(S.location,S.matches),Y=(Mt&&Mt.preventScrollReset)===!0,K=(Mt&&Mt.enableViewTransition)===!0;let $t=s||c,Zt=Mt&&Mt.overrideNavigation,ki=Mt!=null&&Mt.initialHydration&&S.matches&&S.matches.length>0&&!w?S.matches:wu($t,bt,h),Di=(Mt&&Mt.flushSync)===!0;if(ki&&S.initialized&&!R&&eU(S.location,bt)&&!(Mt&&Mt.submission&&Io(Mt.submission.formMethod))){be(bt,{matches:ki},{flushSync:Di});return}let We=vr(ki,$t,bt.pathname);if(We.active&&We.matches&&(ki=We.matches),!ki){let{error:nt,notFoundMatches:ft,route:wt}=ii(bt.pathname);be(bt,{matches:ft,loaderData:{},errors:{[wt.id]:nt}},{flushSync:Di});return}Z=new AbortController;let Te=mp(i.history,bt,Z.signal,Mt&&Mt.submission),ze=new lE(i.unstable_getContext?await i.unstable_getContext():void 0),Ve;if(Mt&&Mt.pendingError)Ve=[Nd(ki).route.id,{type:"error",error:Mt.pendingError}];else if(Mt&&Mt.submission&&Io(Mt.submission.formMethod)){let nt=await xe(Te,bt,Mt.submission,ki,ze,We.active,Mt&&Mt.initialHydration===!0,{replace:Mt.replace,flushSync:Di});if(nt.shortCircuited)return;if(nt.pendingActionResult){let[ft,wt]=nt.pendingActionResult;if(Ao(wt)&&zp(wt.error)&&wt.error.status===404){Z=null,be(bt,{matches:nt.matches,loaderData:{},errors:{[ft]:wt.error}});return}}ki=nt.matches||ki,Ve=nt.pendingActionResult,Zt=t1(bt,Mt.submission),Di=!1,We.active=!1,Te=mp(i.history,Te.url,Te.signal)}let{shortCircuited:Xe,matches:et,loaderData:ct,errors:ot}=await _e(Te,bt,ki,ze,We.active,Zt,Mt&&Mt.submission,Mt&&Mt.fetcherSubmission,Mt&&Mt.replace,Mt&&Mt.initialHydration===!0,Di,Ve);Xe||(Z=null,be(bt,{matches:et||ki,...bE(Ve),loaderData:ct,errors:ot}))}async function xe(ht,bt,Mt,$t,Zt,ki,Di,We={}){Pe();let Te=rU(bt,Mt);if(le({navigation:Te},{flushSync:We.flushSync===!0}),ki){let Xe=await Rr($t,bt.pathname,ht.signal);if(Xe.type==="aborted")return{shortCircuited:!0};if(Xe.type==="error"){let et=Nd(Xe.partialMatches).route.id;return{matches:Xe.partialMatches,pendingActionResult:[et,{type:"error",error:Xe.error}]}}else if(Xe.matches)$t=Xe.matches;else{let{notFoundMatches:et,error:ct,route:ot}=ii(bt.pathname);return{matches:et,pendingActionResult:[ot.id,{type:"error",error:ct}]}}}let ze,Ve=Im($t,bt);if(!Ve.route.action&&!Ve.route.lazy)ze={type:"error",error:Yo(405,{method:ht.method,pathname:bt.pathname,routeId:Ve.route.id})};else{let Xe=_p(n,a,ht,$t,Ve,Di?[]:r,Zt),et=await De(ht,Xe,Zt,null);if(ze=et[Ve.route.id],!ze){for(let ct of $t)if(et[ct.route.id]){ze=et[ct.route.id];break}}if(ht.signal.aborted)return{shortCircuited:!0}}if(jd(ze)){let Xe;return We&&We.replace!=null?Xe=We.replace:Xe=gE(ze.response.headers.get("Location"),new URL(ht.url),h)===S.location.pathname+S.location.search,await $e(ht,ze,!0,{submission:Mt,replace:Xe}),{shortCircuited:!0}}if(Ao(ze)){let Xe=Nd($t,Ve.route.id);return(We&&We.replace)!==!0&&(N="PUSH"),{matches:$t,pendingActionResult:[Xe.route.id,ze,Ve.route.id]}}return{matches:$t,pendingActionResult:[Ve.route.id,ze]}}async function _e(ht,bt,Mt,$t,Zt,ki,Di,We,Te,ze,Ve,Xe){let et=ki||t1(bt,Di),ct=Di||We||CE(et),ot=!B&&!ze;if(Zt){if(ot){let Ri=Ne(Xe);le({navigation:et,...Ri!==void 0?{actionData:Ri}:{}},{flushSync:Ve})}let mi=await Rr(Mt,bt.pathname,ht.signal);if(mi.type==="aborted")return{shortCircuited:!0};if(mi.type==="error"){let Ri=Nd(mi.partialMatches).route.id;return{matches:mi.partialMatches,loaderData:{},errors:{[Ri]:mi.error}}}else if(mi.matches)Mt=mi.matches;else{let{error:Ri,notFoundMatches:Xr,route:on}=ii(bt.pathname);return{matches:Xr,loaderData:{},errors:{[on.id]:Ri}}}}let nt=s||c,{dsMatches:ft,revalidatingFetchers:wt}=dE(ht,$t,n,a,i.history,S,Mt,ct,bt,ze?[]:r,ze===!0,R,L,ee,se,W,nt,h,i.patchRoutesOnNavigation!=null,Xe);if(j=++F,!i.dataStrategy&&!ft.some(mi=>mi.shouldLoad)&&wt.length===0){let mi=gt();return be(bt,{matches:Mt,loaderData:{},errors:Xe&&Ao(Xe[1])?{[Xe[0]]:Xe[1].error}:null,...bE(Xe),...mi?{fetchers:new Map(S.fetchers)}:{}},{flushSync:Ve}),{shortCircuited:!0}}if(ot){let mi={};if(!Zt){mi.navigation=et;let Ri=Ne(Xe);Ri!==void 0&&(mi.actionData=Ri)}wt.length>0&&(mi.fetchers=ke(wt)),le(mi,{flushSync:Ve})}wt.forEach(mi=>{rt(mi.key),mi.controller&&G.set(mi.key,mi.controller)});let zt=()=>wt.forEach(mi=>rt(mi.key));Z&&Z.signal.addEventListener("abort",zt);let{loaderResults:Rt,fetcherResults:ci}=await Se(ft,wt,ht,$t);if(ht.signal.aborted)return{shortCircuited:!0};Z&&Z.signal.removeEventListener("abort",zt),wt.forEach(mi=>G.delete(mi.key));let Wt=s0(Rt);if(Wt)return await $e(ht,Wt.result,!0,{replace:Te}),{shortCircuited:!0};if(Wt=s0(ci),Wt)return W.add(Wt.key),await $e(ht,Wt.result,!0,{replace:Te}),{shortCircuited:!0};let{loaderData:gi,errors:vi}=vE(S,Mt,Rt,Xe,wt,ci);ze&&S.errors&&(vi={...S.errors,...vi});let Hi=gt(),Ui=Tt(j),qi=Hi||Ui||wt.length>0;return{matches:Mt,loaderData:gi,errors:vi,...qi?{fetchers:new Map(S.fetchers)}:{}}}function Ne(ht){if(ht&&!Ao(ht[1]))return{[ht[0]]:ht[1].data};if(S.actionData)return Object.keys(S.actionData).length===0?null:S.actionData}function ke(ht){return ht.forEach(bt=>{let Mt=S.fetchers.get(bt.key),$t=nm(void 0,Mt?Mt.data:void 0);S.fetchers.set(bt.key,$t)}),new Map(S.fetchers)}async function Le(ht,bt,Mt,$t){rt(ht);let Zt=($t&&$t.flushSync)===!0,ki=s||c,Di=Pw(S.location,S.matches,h,Mt,bt,$t==null?void 0:$t.relative),We=wu(ki,Di,h),Te=vr(We,ki,Di);if(Te.active&&Te.matches&&(We=Te.matches),!We){je(ht,bt,Yo(404,{pathname:Di}),{flushSync:Zt});return}let{path:ze,submission:Ve,error:Xe}=uE(!0,Di,$t);if(Xe){je(ht,bt,Xe,{flushSync:Zt});return}let et=Im(We,ze),ct=new lE(i.unstable_getContext?await i.unstable_getContext():void 0),ot=($t&&$t.preventScrollReset)===!0;if(Ve&&Io(Ve.formMethod)){await me(ht,bt,ze,et,We,ct,Te.active,Zt,ot,Ve);return}se.set(ht,{routeId:bt,path:ze}),await Re(ht,bt,ze,et,We,ct,Te.active,Zt,ot,Ve)}async function me(ht,bt,Mt,$t,Zt,ki,Di,We,Te,ze){Pe(),se.delete(ht);function Ve(br){if(!br.route.action&&!br.route.lazy){let Fo=Yo(405,{method:ze.formMethod,pathname:Mt,routeId:bt});return je(ht,bt,Fo,{flushSync:We}),!0}return!1}if(!Di&&Ve($t))return;let Xe=S.fetchers.get(ht);Fe(ht,nU(ze,Xe),{flushSync:We});let et=new AbortController,ct=mp(i.history,Mt,et.signal,ze);if(Di){let br=await Rr(Zt,Mt,ct.signal,ht);if(br.type==="aborted")return;if(br.type==="error"){je(ht,bt,br.error,{flushSync:We});return}else if(br.matches){if(Zt=br.matches,$t=Im(Zt,Mt),Ve($t))return}else{je(ht,bt,Yo(404,{pathname:Mt}),{flushSync:We});return}}G.set(ht,et);let ot=F,nt=_p(n,a,ct,Zt,$t,r,ki),wt=(await De(ct,nt,ki,ht))[$t.route.id];if(ct.signal.aborted){G.get(ht)===et&&G.delete(ht);return}if(ee.has(ht)){if(jd(wt)||Ao(wt)){Fe(ht,mu(void 0));return}}else{if(jd(wt))if(G.delete(ht),j>ot){Fe(ht,mu(void 0));return}else return W.add(ht),Fe(ht,nm(ze)),$e(ct,wt,!1,{fetcherSubmission:ze,preventScrollReset:Te});if(Ao(wt)){je(ht,bt,wt.error);return}}let zt=S.navigation.location||S.location,Rt=mp(i.history,zt,et.signal),ci=s||c,Wt=S.navigation.state!=="idle"?wu(ci,S.navigation.location,h):S.matches;Mr(Wt,"Didn't find any matches after fetcher action");let gi=++F;q.set(ht,gi);let vi=nm(ze,wt.data);S.fetchers.set(ht,vi);let{dsMatches:Hi,revalidatingFetchers:Ui}=dE(Rt,ki,n,a,i.history,S,Wt,ze,zt,r,!1,R,L,ee,se,W,ci,h,i.patchRoutesOnNavigation!=null,[$t.route.id,wt]);Ui.filter(br=>br.key!==ht).forEach(br=>{let Fo=br.key,_l=S.fetchers.get(Fo),zr=nm(void 0,_l?_l.data:void 0);S.fetchers.set(Fo,zr),rt(Fo),br.controller&&G.set(Fo,br.controller)}),le({fetchers:new Map(S.fetchers)});let qi=()=>Ui.forEach(br=>rt(br.key));et.signal.addEventListener("abort",qi);let{loaderResults:mi,fetcherResults:Ri}=await Se(Hi,Ui,Rt,ki);if(et.signal.aborted)return;if(et.signal.removeEventListener("abort",qi),q.delete(ht),G.delete(ht),Ui.forEach(br=>G.delete(br.key)),S.fetchers.has(ht)){let br=mu(wt.data);S.fetchers.set(ht,br)}let Xr=s0(mi);if(Xr)return $e(Rt,Xr.result,!1,{preventScrollReset:Te});if(Xr=s0(Ri),Xr)return W.add(Xr.key),$e(Rt,Xr.result,!1,{preventScrollReset:Te});let{loaderData:on,errors:En}=vE(S,Wt,mi,void 0,Ui,Ri);Tt(gi),S.navigation.state==="loading"&&gi>j?(Mr(N,"Expected pending action"),Z&&Z.abort(),be(S.navigation.location,{matches:Wt,loaderData:on,errors:En,fetchers:new Map(S.fetchers)})):(le({errors:En,loaderData:xE(S.loaderData,on,Wt,En),fetchers:new Map(S.fetchers)}),R=!1)}async function Re(ht,bt,Mt,$t,Zt,ki,Di,We,Te,ze){let Ve=S.fetchers.get(ht);Fe(ht,nm(ze,Ve?Ve.data:void 0),{flushSync:We});let Xe=new AbortController,et=mp(i.history,Mt,Xe.signal);if(Di){let wt=await Rr(Zt,Mt,et.signal,ht);if(wt.type==="aborted")return;if(wt.type==="error"){je(ht,bt,wt.error,{flushSync:We});return}else if(wt.matches)Zt=wt.matches,$t=Im(Zt,Mt);else{je(ht,bt,Yo(404,{pathname:Mt}),{flushSync:We});return}}G.set(ht,Xe);let ct=F,ot=_p(n,a,et,Zt,$t,r,ki),ft=(await De(et,ot,ki,ht))[$t.route.id];if(G.get(ht)===Xe&&G.delete(ht),!et.signal.aborted){if(ee.has(ht)){Fe(ht,mu(void 0));return}if(jd(ft))if(j>ct){Fe(ht,mu(void 0));return}else{W.add(ht),await $e(et,ft,!1,{preventScrollReset:Te});return}if(Ao(ft)){je(ht,bt,ft.error);return}Fe(ht,mu(ft.data))}}async function $e(ht,bt,Mt,{submission:$t,fetcherSubmission:Zt,preventScrollReset:ki,replace:Di}={}){bt.response.headers.has("X-Remix-Revalidate")&&(R=!0);let We=bt.response.headers.get("Location");Mr(We,"Expected a Location header on the redirect Response"),We=gE(We,new URL(ht.url),h);let Te=sg(S.location,We,{_isRedirect:!0});if(t){let ot=!1;if(bt.response.headers.has("X-Remix-Reload-Document"))ot=!0;else if(A2.test(We)){const nt=QA(We,!0);ot=nt.origin!==e.location.origin||mo(nt.pathname,h)==null}if(ot){Di?e.location.replace(We):e.location.assign(We);return}}Z=null;let ze=Di===!0||bt.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ve,formAction:Xe,formEncType:et}=S.navigation;!$t&&!Zt&&Ve&&Xe&&et&&($t=CE(S.navigation));let ct=$t||Zt;if(B$.has(bt.response.status)&&ct&&Io(ct.formMethod))await ce(ze,Te,{submission:{...ct,formAction:We},preventScrollReset:ki||Y,enableViewTransition:Mt?K:void 0});else{let ot=t1(Te,$t);await ce(ze,Te,{overrideNavigation:ot,fetcherSubmission:Zt,preventScrollReset:ki||Y,enableViewTransition:Mt?K:void 0})}}async function De(ht,bt,Mt,$t){let Zt,ki={};try{Zt=await Z$(p,ht,bt,$t,Mt,!1)}catch(Di){return bt.filter(We=>We.shouldLoad).forEach(We=>{ki[We.route.id]={type:"error",error:Di}}),ki}if(ht.signal.aborted)return ki;for(let[Di,We]of Object.entries(Zt))if(tU(We)){let Te=We.result;ki[Di]={type:"redirect",response:Q$(Te,ht,Di,bt,h)}}else ki[Di]=await K$(We);return ki}async function Se(ht,bt,Mt,$t){let Zt=De(Mt,ht,$t,null),ki=Promise.all(bt.map(async Te=>{if(Te.matches&&Te.match&&Te.request&&Te.controller){let Ve=(await De(Te.request,Te.matches,$t,Te.key))[Te.match.route.id];return{[Te.key]:Ve}}else return Promise.resolve({[Te.key]:{type:"error",error:Yo(404,{pathname:Te.path})}})})),Di=await Zt,We=(await ki).reduce((Te,ze)=>Object.assign(Te,ze),{});return{loaderResults:Di,fetcherResults:We}}function Pe(){R=!0,se.forEach((ht,bt)=>{G.has(bt)&&L.add(bt),rt(bt)})}function Fe(ht,bt,Mt={}){S.fetchers.set(ht,bt),le({fetchers:new Map(S.fetchers)},{flushSync:(Mt&&Mt.flushSync)===!0})}function je(ht,bt,Mt,$t={}){let Zt=Nd(S.matches,bt);Qe(ht),le({errors:{[Zt.route.id]:Mt},fetchers:new Map(S.fetchers)},{flushSync:($t&&$t.flushSync)===!0})}function He(ht){return fe.set(ht,(fe.get(ht)||0)+1),ee.has(ht)&&ee.delete(ht),S.fetchers.get(ht)||$$}function Qe(ht){let bt=S.fetchers.get(ht);G.has(ht)&&!(bt&&bt.state==="loading"&&q.has(ht))&&rt(ht),se.delete(ht),q.delete(ht),W.delete(ht),ee.delete(ht),L.delete(ht),S.fetchers.delete(ht)}function at(ht){let bt=(fe.get(ht)||0)-1;bt<=0?(fe.delete(ht),ee.add(ht)):fe.set(ht,bt),le({fetchers:new Map(S.fetchers)})}function rt(ht){let bt=G.get(ht);bt&&(bt.abort(),G.delete(ht))}function dt(ht){for(let bt of ht){let Mt=He(bt),$t=mu(Mt.data);S.fetchers.set(bt,$t)}}function gt(){let ht=[],bt=!1;for(let Mt of W){let $t=S.fetchers.get(Mt);Mr($t,`Expected fetcher: ${Mt}`),$t.state==="loading"&&(W.delete(Mt),ht.push(Mt),bt=!0)}return dt(ht),bt}function Tt(ht){let bt=[];for(let[Mt,$t]of q)if($t<ht){let Zt=S.fetchers.get(Mt);Mr(Zt,`Expected fetcher: ${Mt}`),Zt.state==="loading"&&(rt(Mt),q.delete(Mt),bt.push(Mt))}return dt(bt),bt.length>0}function Nt(ht,bt){let Mt=S.blockers.get(ht)||fp;return oe.get(ht)!==bt&&oe.set(ht,bt),Mt}function mt(ht){S.blockers.delete(ht),oe.delete(ht)}function St(ht,bt){let Mt=S.blockers.get(ht)||fp;Mr(Mt.state==="unblocked"&&bt.state==="blocked"||Mt.state==="blocked"&&bt.state==="blocked"||Mt.state==="blocked"&&bt.state==="proceeding"||Mt.state==="blocked"&&bt.state==="unblocked"||Mt.state==="proceeding"&&bt.state==="unblocked",`Invalid blocker state transition: ${Mt.state} -> ${bt.state}`);let $t=new Map(S.blockers);$t.set(ht,bt),le({blockers:$t})}function kt({currentLocation:ht,nextLocation:bt,historyAction:Mt}){if(oe.size===0)return;oe.size>1&&Kn(!1,"A router only supports one blocker at a time");let $t=Array.from(oe.entries()),[Zt,ki]=$t[$t.length-1],Di=S.blockers.get(Zt);if(!(Di&&Di.state==="proceeding")&&ki({currentLocation:ht,nextLocation:bt,historyAction:Mt}))return Zt}function ii(ht){let bt=Yo(404,{pathname:ht}),Mt=s||c,{matches:$t,route:Zt}=wE(Mt);return{notFoundMatches:$t,route:Zt,error:bt}}function fi(ht,bt,Mt){if(x=ht,_=bt,v=Mt||null,!C&&S.navigation===e1){C=!0;let $t=nr(S.location,S.matches);$t!=null&&le({restoreScrollPosition:$t})}return()=>{x=null,_=null,v=null}}function Ht(ht,bt){return v&&v(ht,bt.map($t=>JA($t,S.loaderData)))||ht.key}function fr(ht,bt){if(x&&_){let Mt=Ht(ht,bt);x[Mt]=_()}}function nr(ht,bt){if(x){let Mt=Ht(ht,bt),$t=x[Mt];if(typeof $t=="number")return $t}return null}function vr(ht,bt,Mt){if(i.patchRoutesOnNavigation)if(ht){if(Object.keys(ht[0].params).length>0)return{active:!0,matches:N0(bt,Mt,h,!0)}}else return{active:!0,matches:N0(bt,Mt,h,!0)||[]};return{active:!1,matches:null}}async function Rr(ht,bt,Mt,$t){if(!i.patchRoutesOnNavigation)return{type:"success",matches:ht};let Zt=ht;for(;;){let ki=s==null,Di=s||c,We=a;try{await i.patchRoutesOnNavigation({signal:Mt,path:bt,matches:Zt,fetcherKey:$t,patch:(Ve,Xe)=>{Mt.aborted||hE(Ve,Xe,Di,We,n)}})}catch(Ve){return{type:"error",error:Ve,partialMatches:Zt}}finally{ki&&!Mt.aborted&&(c=[...c])}if(Mt.aborted)return{type:"aborted"};let Te=wu(Di,bt,h);if(Te)return{type:"success",matches:Te};let ze=N0(Di,bt,h,!0);if(!ze||Zt.length===ze.length&&Zt.every((Ve,Xe)=>Ve.route.id===ze[Xe].route.id))return{type:"success",matches:null};Zt=ze}}function sr(ht){a={},s=lv(ht,n,void 0,a)}function xr(ht,bt){let Mt=s==null;hE(ht,bt,s||c,a,n),Mt&&(c=[...c],le({}))}return M={get basename(){return h},get future(){return m},get state(){return S},get routes(){return c},get window(){return e},initialize:Ee,subscribe:ie,enableScrollRestoration:fi,navigate:te,fetch:Le,revalidate:ae,createHref:ht=>i.history.createHref(ht),encodeLocation:ht=>i.history.encodeLocation(ht),getFetcher:He,deleteFetcher:at,dispose:J,getBlocker:Nt,deleteBlocker:mt,patchRoutes:xr,_internalFetchControllers:G,_internalSetRoutes:sr},M}function G$(i){return i!=null&&("formData"in i&&i.formData!=null||"body"in i&&i.body!==void 0)}function Pw(i,e,t,r,n,a){let c,s;if(n){c=[];for(let p of e)if(c.push(p),p.route.id===n){s=p;break}}else c=e,s=e[e.length-1];let h=mx(r||".",fx(c),mo(i.pathname,t)||i.pathname,a==="path");if(r==null&&(h.search=i.search,h.hash=i.hash),(r==null||r===""||r===".")&&s){let p=I2(h.search);if(s.route.index&&!p)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!s.route.index&&p){let m=new URLSearchParams(h.search),y=m.getAll("index");m.delete("index"),y.filter(x=>x).forEach(x=>m.append("index",x));let g=m.toString();h.search=g?`?${g}`:""}}return t!=="/"&&(h.pathname=h.pathname==="/"?t:ql([t,h.pathname])),ju(h)}function uE(i,e,t){if(!t||!G$(t))return{path:e};if(t.formMethod&&!iU(t.formMethod))return{path:e,error:Yo(405,{method:t.formMethod})};let r=()=>({path:e,error:Yo(400,{type:"invalid-body"})}),a=(t.formMethod||"get").toUpperCase(),c=dI(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Io(a))return r();let y=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((g,[x,v])=>`${g}${x}=${v}
`,""):String(t.body);return{path:e,submission:{formMethod:a,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:y}}}else if(t.formEncType==="application/json"){if(!Io(a))return r();try{let y=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:a,formAction:c,formEncType:t.formEncType,formData:void 0,json:y,text:void 0}}}catch{return r()}}}Mr(typeof FormData=="function","FormData is not available in this environment");let s,h;if(t.formData)s=Lw(t.formData),h=t.formData;else if(t.body instanceof FormData)s=Lw(t.body),h=t.body;else if(t.body instanceof URLSearchParams)s=t.body,h=yE(s);else if(t.body==null)s=new URLSearchParams,h=new FormData;else try{s=new URLSearchParams(t.body),h=yE(s)}catch{return r()}let p={formMethod:a,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:h,json:void 0,text:void 0};if(Io(p.formMethod))return{path:e,submission:p};let m=Uc(e);return i&&m.search&&I2(m.search)&&s.append("index",""),m.search=`?${s}`,{path:ju(m),submission:p}}function dE(i,e,t,r,n,a,c,s,h,p,m,y,g,x,v,_,C,k,w,E){var B;let A=E?Ao(E[1])?E[1].error:E[1].data:void 0,M=n.createURL(a.location),S=n.createURL(h),N;if(m&&a.errors){let R=Object.keys(a.errors)[0];N=c.findIndex(L=>L.route.id===R)}else if(E&&Ao(E[1])){let R=E[0];N=c.findIndex(L=>L.route.id===R)-1}let Y=E?E[1].statusCode:void 0,Z=Y&&Y>=400,K={currentUrl:M,currentParams:((B=a.matches[0])==null?void 0:B.params)||{},nextUrl:S,nextParams:c[0].params,...s,actionResult:A,actionStatus:Y},U=c.map((R,L)=>{let{route:G}=R,F=null;if(N!=null&&L>N?F=!1:G.lazy?F=!0:G.loader==null?F=!1:m?F=Dw(G,a.loaderData,a.errors):H$(a.loaderData,a.matches[L],R)&&(F=!0),F!==null)return Rw(t,r,i,R,p,e,F);let j=Z?!1:y||M.pathname+M.search===S.pathname+S.search||M.search!==S.search||q$(a.matches[L],R),q={...K,defaultShouldRevalidate:j},W=dv(R,q);return Rw(t,r,i,R,p,e,W,q)}),$=[];return v.forEach((R,L)=>{if(m||!c.some(ee=>ee.route.id===R.routeId)||x.has(L))return;let G=a.fetchers.get(L),F=G&&G.state!=="idle"&&G.data===void 0,j=wu(C,R.path,k);if(!j){if(w&&F)return;$.push({key:L,routeId:R.routeId,path:R.path,matches:null,match:null,request:null,controller:null});return}if(_.has(L))return;let q=Im(j,R.path),W=new AbortController,se=mp(n,R.path,W.signal),fe=null;if(g.has(L))g.delete(L),fe=_p(t,r,se,j,q,p,e);else if(F)y&&(fe=_p(t,r,se,j,q,p,e));else{let ee={...K,defaultShouldRevalidate:Z?!1:y};dv(q,ee)&&(fe=_p(t,r,se,j,q,p,e,ee))}fe&&$.push({key:L,routeId:R.routeId,path:R.path,matches:fe,match:q,request:se,controller:W})}),{dsMatches:U,revalidatingFetchers:$}}function Dw(i,e,t){if(i.lazy)return!0;if(!i.loader)return!1;let r=e!=null&&i.id in e,n=t!=null&&t[i.id]!==void 0;return!r&&n?!1:typeof i.loader=="function"&&i.loader.hydrate===!0?!0:!r&&!n}function H$(i,e,t){let r=!e||t.route.id!==e.route.id,n=!i.hasOwnProperty(t.route.id);return r||n}function q$(i,e){let t=i.route.path;return i.pathname!==e.pathname||t!=null&&t.endsWith("*")&&i.params["*"]!==e.params["*"]}function dv(i,e){if(i.route.shouldRevalidate){let t=i.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function hE(i,e,t,r,n){let a;if(i){let h=r[i];Mr(h,`No route found to patch children into: routeId = ${i}`),h.children||(h.children=[]),a=h.children}else a=t;let c=e.filter(h=>!a.some(p=>aI(h,p))),s=lv(c,n,[i||"_","patch",String((a==null?void 0:a.length)||"0")],r);a.push(...s)}function aI(i,e){return"id"in i&&"id"in e&&i.id===e.id?!0:i.index===e.index&&i.path===e.path&&i.caseSensitive===e.caseSensitive?(!i.children||i.children.length===0)&&(!e.children||e.children.length===0)?!0:i.children.every((t,r)=>{var n;return(n=e.children)==null?void 0:n.some(a=>aI(t,a))}):!1}var pE=new WeakMap,oI=({key:i,route:e,manifest:t,mapRouteProperties:r})=>{let n=t[e.id];if(Mr(n,"No route found in manifest"),!n.lazy||typeof n.lazy!="object")return;let a=n.lazy[i];if(!a)return;let c=pE.get(n);c||(c={},pE.set(n,c));let s=c[i];if(s)return s;let h=(async()=>{let p=m$(i),y=n[i]!==void 0&&i!=="hasErrorBoundary";if(p)Kn(!p,"Route property "+i+" is not a supported lazy route property. This property will be ignored."),c[i]=Promise.resolve();else if(y)Kn(!1,`Route "${n.id}" has a static property "${i}" defined. The lazy property will be ignored.`);else{let g=await a();g!=null&&(Object.assign(n,{[i]:g}),Object.assign(n,r(n)))}typeof n.lazy=="object"&&(n.lazy[i]=void 0,Object.values(n.lazy).every(g=>g===void 0)&&(n.lazy=void 0))})();return c[i]=h,h},fE=new WeakMap;function W$(i,e,t,r,n){let a=t[i.id];if(Mr(a,"No route found in manifest"),!i.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof i.lazy=="function"){let m=fE.get(a);if(m)return{lazyRoutePromise:m,lazyHandlerPromise:m};let y=(async()=>{Mr(typeof i.lazy=="function","No lazy route function found");let g=await i.lazy(),x={};for(let v in g){let _=g[v];if(_===void 0)continue;let C=y$(v),w=a[v]!==void 0&&v!=="hasErrorBoundary";C?Kn(!C,"Route property "+v+" is not a supported property to be returned from a lazy route function. This property will be ignored."):w?Kn(!w,`Route "${a.id}" has a static property "${v}" defined but its lazy function is also returning a value for this property. The lazy route property "${v}" will be ignored.`):x[v]=_}Object.assign(a,x),Object.assign(a,{...r(a),lazy:void 0})})();return fE.set(a,y),y.catch(()=>{}),{lazyRoutePromise:y,lazyHandlerPromise:y}}let c=Object.keys(i.lazy),s=[],h;for(let m of c){if(n&&n.includes(m))continue;let y=oI({key:m,route:i,manifest:t,mapRouteProperties:r});y&&(s.push(y),m===e&&(h=y))}let p=s.length>0?Promise.all(s).then(()=>{}):void 0;return p==null||p.catch(()=>{}),h==null||h.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:h}}async function mE(i){let e=i.matches.filter(n=>n.shouldLoad),t={};return(await Promise.all(e.map(n=>n.resolve()))).forEach((n,a)=>{t[e[a].route.id]=n}),t}async function Y$(i){return i.matches.some(e=>e.route.unstable_middleware)?lI(i,!1,()=>mE(i),(e,t)=>({[t]:{type:"error",result:e}})):mE(i)}async function lI(i,e,t,r){let{matches:n,request:a,params:c,context:s}=i,h={handlerResult:void 0};try{let p=n.flatMap(y=>y.route.unstable_middleware?y.route.unstable_middleware.map(g=>[y.route.id,g]):[]),m=await cI({request:a,params:c,context:s},p,e,h,t);return e?m:h.handlerResult}catch(p){if(!h.middlewareError)throw p;let m=await r(h.middlewareError.error,h.middlewareError.routeId);return h.handlerResult?Object.assign(h.handlerResult,m):m}}async function cI(i,e,t,r,n,a=0){let{request:c}=i;if(c.signal.aborted)throw c.signal.reason?c.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${c.method} ${c.url}`);let s=e[a];if(!s)return r.handlerResult=await n(),r.handlerResult;let[h,p]=s,m=!1,y,g=async()=>{if(m)throw new Error("You may only call `next()` once per middleware");m=!0,await cI(i,e,t,r,n,a+1)};try{let x=await p({request:i.request,params:i.params,context:i.context},g);return m?x===void 0?y:x:g()}catch(x){throw r.middlewareError?r.middlewareError.error!==x&&(r.middlewareError={routeId:h,error:x}):r.middlewareError={routeId:h,error:x},x}}function uI(i,e,t,r,n){let a=oI({key:"unstable_middleware",route:r.route,manifest:e,mapRouteProperties:i}),c=W$(r.route,Io(t.method)?"action":"loader",e,i,n);return{middleware:a,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function Rw(i,e,t,r,n,a,c,s=null){let h=!1,p=uI(i,e,t,r,n);return{...r,_lazyPromises:p,shouldLoad:c,unstable_shouldRevalidateArgs:s,unstable_shouldCallHandler(m){return h=!0,s?typeof m=="boolean"?dv(r,{...s,defaultShouldRevalidate:m}):dv(r,s):c},resolve(m){return h||c||m&&t.method==="GET"&&(r.route.lazy||r.route.loader)?X$({request:t,match:r,lazyHandlerPromise:p==null?void 0:p.handler,lazyRoutePromise:p==null?void 0:p.route,handlerOverride:m,scopedContext:a}):Promise.resolve({type:"data",result:void 0})}}}function _p(i,e,t,r,n,a,c,s=null){return r.map(h=>h.route.id!==n.route.id?{...h,shouldLoad:!1,unstable_shouldRevalidateArgs:s,unstable_shouldCallHandler:()=>!1,_lazyPromises:uI(i,e,t,h,a),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Rw(i,e,t,h,a,c,!0,s))}async function Z$(i,e,t,r,n,a){t.some(p=>{var m;return(m=p._lazyPromises)==null?void 0:m.middleware})&&await Promise.all(t.map(p=>{var m;return(m=p._lazyPromises)==null?void 0:m.middleware}));let c={request:e,params:t[0].params,context:n,matches:t},h=await i({...c,fetcherKey:r,unstable_runClientMiddleware:p=>{let m=c;return lI(m,!1,()=>p({...m,fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(y,g)=>({[g]:{type:"error",result:y}}))}});try{await Promise.all(t.flatMap(p=>{var m,y;return[(m=p._lazyPromises)==null?void 0:m.handler,(y=p._lazyPromises)==null?void 0:y.route]}))}catch{}return h}async function X$({request:i,match:e,lazyHandlerPromise:t,lazyRoutePromise:r,handlerOverride:n,scopedContext:a}){let c,s,h=Io(i.method),p=h?"action":"loader",m=y=>{let g,x=new Promise((C,k)=>g=k);s=()=>g(),i.signal.addEventListener("abort",s);let v=C=>typeof y!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${p}" [routeId: ${e.route.id}]`)):y({request:i,params:e.params,context:a},...C!==void 0?[C]:[]),_=(async()=>{try{return{type:"data",result:await(n?n(k=>v(k)):v())}}catch(C){return{type:"error",result:C}}})();return Promise.race([_,x])};try{let y=h?e.route.action:e.route.loader;if(t||r)if(y){let g,[x]=await Promise.all([m(y).catch(v=>{g=v}),t,r]);if(g!==void 0)throw g;c=x}else{await t;let g=h?e.route.action:e.route.loader;if(g)[c]=await Promise.all([m(g),r]);else if(p==="action"){let x=new URL(i.url),v=x.pathname+x.search;throw Yo(405,{method:i.method,pathname:v,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(y)c=await m(y);else{let g=new URL(i.url),x=g.pathname+g.search;throw Yo(404,{pathname:x})}}catch(y){return{type:"error",result:y}}finally{s&&i.signal.removeEventListener("abort",s)}return c}async function K$(i){var r,n,a,c,s,h;let{result:e,type:t}=i;if(hI(e)){let p;try{let m=e.headers.get("Content-Type");m&&/\bapplication\/json\b/.test(m)?e.body==null?p=null:p=await e.json():p=await e.text()}catch(m){return{type:"error",error:m}}return t==="error"?{type:"error",error:new uv(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:"data",data:p,statusCode:e.status,headers:e.headers}}return t==="error"?_E(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(n=e.init)!=null&&n.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new uv(((a=e.init)==null?void 0:a.status)||500,void 0,e.data),statusCode:zp(e)?e.status:void 0,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:zp(e)?e.status:void 0}:_E(e)?{type:"data",data:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(h=e.init)!=null&&h.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function Q$(i,e,t,r,n){let a=i.headers.get("Location");if(Mr(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!A2.test(a)){let c=r.slice(0,r.findIndex(s=>s.route.id===t)+1);a=Pw(new URL(e.url),c,n,a),i.headers.set("Location",a)}return i}function gE(i,e,t){if(A2.test(i)){let r=i,n=r.startsWith("//")?new URL(e.protocol+r):new URL(r),a=mo(n.pathname,t)!=null;if(n.origin===e.origin&&a)return n.pathname+n.search+n.hash}return i}function mp(i,e,t,r){let n=i.createURL(dI(e)).toString(),a={signal:t};if(r&&Io(r.formMethod)){let{formMethod:c,formEncType:s}=r;a.method=c.toUpperCase(),s==="application/json"?(a.headers=new Headers({"Content-Type":s}),a.body=JSON.stringify(r.json)):s==="text/plain"?a.body=r.text:s==="application/x-www-form-urlencoded"&&r.formData?a.body=Lw(r.formData):a.body=r.formData}return new Request(n,a)}function Lw(i){let e=new URLSearchParams;for(let[t,r]of i.entries())e.append(t,typeof r=="string"?r:r.name);return e}function yE(i){let e=new FormData;for(let[t,r]of i.entries())e.append(t,r);return e}function J$(i,e,t,r=!1,n=!1){let a={},c=null,s,h=!1,p={},m=t&&Ao(t[1])?t[1].error:void 0;return i.forEach(y=>{if(!(y.route.id in e))return;let g=y.route.id,x=e[g];if(Mr(!jd(x),"Cannot handle redirect results in processLoaderData"),Ao(x)){let v=x.error;if(m!==void 0&&(v=m,m=void 0),c=c||{},n)c[g]=v;else{let _=Nd(i,g);c[_.route.id]==null&&(c[_.route.id]=v)}r||(a[g]=sI),h||(h=!0,s=zp(x.error)?x.error.status:500),x.headers&&(p[g]=x.headers)}else a[g]=x.data,x.statusCode&&x.statusCode!==200&&!h&&(s=x.statusCode),x.headers&&(p[g]=x.headers)}),m!==void 0&&t&&(c={[t[0]]:m},t[2]&&(a[t[2]]=void 0)),{loaderData:a,errors:c,statusCode:s||200,loaderHeaders:p}}function vE(i,e,t,r,n,a){let{loaderData:c,errors:s}=J$(e,t,r);return n.filter(h=>!h.matches||h.matches.some(p=>p.shouldLoad)).forEach(h=>{let{key:p,match:m,controller:y}=h,g=a[p];if(Mr(g,"Did not find corresponding fetcher result"),!(y&&y.signal.aborted))if(Ao(g)){let x=Nd(i.matches,m==null?void 0:m.route.id);s&&s[x.route.id]||(s={...s,[x.route.id]:g.error}),i.fetchers.delete(p)}else if(jd(g))Mr(!1,"Unhandled fetcher revalidation redirect");else{let x=mu(g.data);i.fetchers.set(p,x)}}),{loaderData:c,errors:s}}function xE(i,e,t,r){let n=Object.entries(e).filter(([,a])=>a!==sI).reduce((a,[c,s])=>(a[c]=s,a),{});for(let a of t){let c=a.route.id;if(!e.hasOwnProperty(c)&&i.hasOwnProperty(c)&&a.route.loader&&(n[c]=i[c]),r&&r.hasOwnProperty(c))break}return n}function bE(i){return i?Ao(i[1])?{actionData:{}}:{actionData:{[i[0]]:i[1].data}}:{}}function Nd(i,e){return(e?i.slice(0,i.findIndex(r=>r.route.id===e)+1):[...i]).reverse().find(r=>r.route.hasErrorBoundary===!0)||i[0]}function wE(i){let e=i.length===1?i[0]:i.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Yo(i,{pathname:e,routeId:t,method:r,type:n,message:a}={}){let c="Unknown Server Error",s="Unknown @remix-run/router error";return i===400?(c="Bad Request",r&&e&&t?s=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:n==="invalid-body"&&(s="Unable to encode submission body")):i===403?(c="Forbidden",s=`Route "${t}" does not match URL "${e}"`):i===404?(c="Not Found",s=`No route matches URL "${e}"`):i===405&&(c="Method Not Allowed",r&&e&&t?s=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(s=`Invalid request method "${r.toUpperCase()}"`)),new uv(i||500,c,new Error(s),!0)}function s0(i){let e=Object.entries(i);for(let t=e.length-1;t>=0;t--){let[r,n]=e[t];if(jd(n))return{key:r,result:n}}}function dI(i){let e=typeof i=="string"?Uc(i):i;return ju({...e,hash:""})}function eU(i,e){return i.pathname!==e.pathname||i.search!==e.search?!1:i.hash===""?e.hash!=="":i.hash===e.hash?!0:e.hash!==""}function tU(i){return hI(i.result)&&F$.has(i.result.status)}function Ao(i){return i.type==="error"}function jd(i){return(i&&i.type)==="redirect"}function _E(i){return typeof i=="object"&&i!=null&&"type"in i&&"data"in i&&"init"in i&&i.type==="DataWithResponseInit"}function hI(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.headers=="object"&&typeof i.body<"u"}function iU(i){return j$.has(i.toUpperCase())}function Io(i){return z$.has(i.toUpperCase())}function I2(i){return new URLSearchParams(i).getAll("index").some(e=>e==="")}function Im(i,e){let t=typeof e=="string"?Uc(e).search:e.search;if(i[i.length-1].route.index&&I2(t||""))return i[i.length-1];let r=iI(i);return r[r.length-1]}function CE(i){let{formMethod:e,formAction:t,formEncType:r,text:n,formData:a,json:c}=i;if(!(!e||!t||!r)){if(n!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:n};if(a!=null)return{formMethod:e,formAction:t,formEncType:r,formData:a,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:c,text:void 0}}}function t1(i,e){return e?{state:"loading",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:i,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function rU(i,e){return{state:"submitting",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function nm(i,e){return i?{state:"loading",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function nU(i,e){return{state:"submitting",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e?e.data:void 0}}function mu(i){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:i}}function sU(i,e){try{let t=i.sessionStorage.getItem(nI);if(t){let r=JSON.parse(t);for(let[n,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(n,new Set(a||[]))}}catch{}}function aU(i,e){if(e.size>0){let t={};for(let[r,n]of e)t[r]=[...n];try{i.sessionStorage.setItem(nI,JSON.stringify(t))}catch(r){Kn(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function oU(){let i,e,t=new Promise((r,n)=>{i=async a=>{r(a);try{await t}catch{}},e=async a=>{n(a);try{await t}catch{}}});return{promise:t,resolve:i,reject:e}}var dh=Ie.createContext(null);dh.displayName="DataRouter";var Fg=Ie.createContext(null);Fg.displayName="DataRouterState";var P2=Ie.createContext({isTransitioning:!1});P2.displayName="ViewTransition";var pI=Ie.createContext(new Map);pI.displayName="Fetchers";var lU=Ie.createContext(null);lU.displayName="Await";var bl=Ie.createContext(null);bl.displayName="Navigation";var gx=Ie.createContext(null);gx.displayName="Location";var wl=Ie.createContext({outlet:null,matches:[],isDataRoute:!1});wl.displayName="Route";var D2=Ie.createContext(null);D2.displayName="RouteError";function cU(i,{relative:e}={}){Mr(Kp(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=Ie.useContext(bl),{hash:n,pathname:a,search:c}=Bg(i,{relative:e}),s=a;return t!=="/"&&(s=a==="/"?t:ql([t,a])),r.createHref({pathname:s,search:c,hash:n})}function Kp(){return Ie.useContext(gx)!=null}function nc(){return Mr(Kp(),"useLocation() may be used only in the context of a <Router> component."),Ie.useContext(gx).location}var fI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mI(i){Ie.useContext(bl).static||Ie.useLayoutEffect(i)}function vo(){let{isDataRoute:i}=Ie.useContext(wl);return i?CU():uU()}function uU(){Mr(Kp(),"useNavigate() may be used only in the context of a <Router> component.");let i=Ie.useContext(dh),{basename:e,navigator:t}=Ie.useContext(bl),{matches:r}=Ie.useContext(wl),{pathname:n}=nc(),a=JSON.stringify(fx(r)),c=Ie.useRef(!1);return mI(()=>{c.current=!0}),Ie.useCallback((h,p={})=>{if(Kn(c.current,fI),!c.current)return;if(typeof h=="number"){t.go(h);return}let m=mx(h,JSON.parse(a),n,p.relative==="path");i==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ql([e,m.pathname])),(p.replace?t.replace:t.push)(m,p.state,p)},[e,t,a,n,i])}var dU=Ie.createContext(null);function hU(i){let e=Ie.useContext(wl).outlet;return e&&Ie.createElement(dU.Provider,{value:i},e)}function Bg(i,{relative:e}={}){let{matches:t}=Ie.useContext(wl),{pathname:r}=nc(),n=JSON.stringify(fx(t));return Ie.useMemo(()=>mx(i,JSON.parse(n),r,e==="path"),[i,n,r,e])}function pU(i,e,t,r){Mr(Kp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n}=Ie.useContext(bl),{matches:a}=Ie.useContext(wl),c=a[a.length-1],s=c?c.params:{},h=c?c.pathname:"/",p=c?c.pathnameBase:"/",m=c&&c.route;{let k=m&&m.path||"";xI(h,!m||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let y=nc(),g;g=y;let x=g.pathname||"/",v=x;if(p!=="/"){let k=p.replace(/^\//,"").split("/");v="/"+x.replace(/^\//,"").split("/").slice(k.length).join("/")}let _=wu(i,{pathname:v});return Kn(m||_!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Kn(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),vU(_&&_.map(k=>Object.assign({},k,{params:Object.assign({},s,k.params),pathname:ql([p,n.encodeLocation?n.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?p:ql([p,n.encodeLocation?n.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,t,r)}function fU(){let i=vI(),e=zp(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",i),c=Ie.createElement(Ie.Fragment,null,Ie.createElement("p",null,"💿 Hey developer 👋"),Ie.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Ie.createElement("code",{style:a},"ErrorBoundary")," or"," ",Ie.createElement("code",{style:a},"errorElement")," prop on your route.")),Ie.createElement(Ie.Fragment,null,Ie.createElement("h2",null,"Unexpected Application Error!"),Ie.createElement("h3",{style:{fontStyle:"italic"}},e),t?Ie.createElement("pre",{style:n},t):null,c)}var mU=Ie.createElement(fU,null),gU=class extends Ie.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?Ie.createElement(wl.Provider,{value:this.props.routeContext},Ie.createElement(D2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function yU({routeContext:i,match:e,children:t}){let r=Ie.useContext(dh);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),Ie.createElement(wl.Provider,{value:i},t)}function vU(i,e=[],t=null,r=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let n=i,a=t==null?void 0:t.errors;if(a!=null){let h=n.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);Mr(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),n=n.slice(0,Math.min(n.length,h+1))}let c=!1,s=-1;if(t)for(let h=0;h<n.length;h++){let p=n[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(s=h),p.route.id){let{loaderData:m,errors:y}=t,g=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||g){c=!0,s>=0?n=n.slice(0,s+1):n=[n[0]];break}}}return n.reduceRight((h,p,m)=>{let y,g=!1,x=null,v=null;t&&(y=a&&p.route.id?a[p.route.id]:void 0,x=p.route.errorElement||mU,c&&(s<0&&m===0?(xI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,v=null):s===m&&(g=!0,v=p.route.hydrateFallbackElement||null)));let _=e.concat(n.slice(0,m+1)),C=()=>{let k;return y?k=x:g?k=v:p.route.Component?k=Ie.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=h,Ie.createElement(yU,{match:p,routeContext:{outlet:h,matches:_,isDataRoute:t!=null},children:k})};return t&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?Ie.createElement(gU,{location:t.location,revalidation:t.revalidation,component:x,error:y,children:C(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):C()},null)}function R2(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gI(i){let e=Ie.useContext(dh);return Mr(e,R2(i)),e}function L2(i){let e=Ie.useContext(Fg);return Mr(e,R2(i)),e}function xU(i){let e=Ie.useContext(wl);return Mr(e,R2(i)),e}function N2(i){let e=xU(i),t=e.matches[e.matches.length-1];return Mr(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function bU(){return N2("useRouteId")}function yI(){let{matches:i,loaderData:e}=L2("useMatches");return Ie.useMemo(()=>i.map(t=>JA(t,e)),[i,e])}function vI(){var r;let i=Ie.useContext(D2),e=L2("useRouteError"),t=N2("useRouteError");return i!==void 0?i:(r=e.errors)==null?void 0:r[t]}var wU=0;function _U(i){let{router:e,basename:t}=gI("useBlocker"),r=L2("useBlocker"),[n,a]=Ie.useState(""),c=Ie.useCallback(s=>{if(typeof i!="function")return!!i;if(t==="/")return i(s);let{currentLocation:h,nextLocation:p,historyAction:m}=s;return i({currentLocation:{...h,pathname:mo(h.pathname,t)||h.pathname},nextLocation:{...p,pathname:mo(p.pathname,t)||p.pathname},historyAction:m})},[t,i]);return Ie.useEffect(()=>{let s=String(++wU);return a(s),()=>e.deleteBlocker(s)},[e]),Ie.useEffect(()=>{n!==""&&e.getBlocker(n,c)},[e,n,c]),n&&r.blockers.has(n)?r.blockers.get(n):fp}function CU(){let{router:i}=gI("useNavigate"),e=N2("useNavigate"),t=Ie.useRef(!1);return mI(()=>{t.current=!0}),Ie.useCallback(async(n,a={})=>{Kn(t.current,fI),t.current&&(typeof n=="number"?i.navigate(n):await i.navigate(n,{fromRouteId:e,...a}))},[i,e])}var TE={};function xI(i,e,t){!e&&!TE[i]&&(TE[i]=!0,Kn(!1,t))}var SE={};function EE(i,e){!i&&!SE[e]&&(SE[e]=!0,console.warn(e))}function TU(i){let e={hasErrorBoundary:i.hasErrorBoundary||i.ErrorBoundary!=null||i.errorElement!=null};return i.Component&&(i.element&&Kn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:Ie.createElement(i.Component),Component:void 0})),i.HydrateFallback&&(i.hydrateFallbackElement&&Kn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:Ie.createElement(i.HydrateFallback),HydrateFallback:void 0})),i.ErrorBoundary&&(i.errorElement&&Kn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:Ie.createElement(i.ErrorBoundary),ErrorBoundary:void 0})),e}var SU=["HydrateFallback","hydrateFallbackElement"],EU=class{constructor(){this.status="pending",this.promise=new Promise((i,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",i(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function kU({router:i,flushSync:e}){let[t,r]=Ie.useState(i.state),[n,a]=Ie.useState(),[c,s]=Ie.useState({isTransitioning:!1}),[h,p]=Ie.useState(),[m,y]=Ie.useState(),[g,x]=Ie.useState(),v=Ie.useRef(new Map),_=Ie.useCallback((E,{deletedFetchers:A,flushSync:M,viewTransitionOpts:S})=>{E.fetchers.forEach((Y,Z)=>{Y.data!==void 0&&v.current.set(Z,Y.data)}),A.forEach(Y=>v.current.delete(Y)),EE(M===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let N=i.window!=null&&i.window.document!=null&&typeof i.window.document.startViewTransition=="function";if(EE(S==null||N,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!S||!N){e&&M?e(()=>r(E)):Ie.startTransition(()=>r(E));return}if(e&&M){e(()=>{m&&(h&&h.resolve(),m.skipTransition()),s({isTransitioning:!0,flushSync:!0,currentLocation:S.currentLocation,nextLocation:S.nextLocation})});let Y=i.window.document.startViewTransition(()=>{e(()=>r(E))});Y.finished.finally(()=>{e(()=>{p(void 0),y(void 0),a(void 0),s({isTransitioning:!1})})}),e(()=>y(Y));return}m?(h&&h.resolve(),m.skipTransition(),x({state:E,currentLocation:S.currentLocation,nextLocation:S.nextLocation})):(a(E),s({isTransitioning:!0,flushSync:!1,currentLocation:S.currentLocation,nextLocation:S.nextLocation}))},[i.window,e,m,h]);Ie.useLayoutEffect(()=>i.subscribe(_),[i,_]),Ie.useEffect(()=>{c.isTransitioning&&!c.flushSync&&p(new EU)},[c]),Ie.useEffect(()=>{if(h&&n&&i.window){let E=n,A=h.promise,M=i.window.document.startViewTransition(async()=>{Ie.startTransition(()=>r(E)),await A});M.finished.finally(()=>{p(void 0),y(void 0),a(void 0),s({isTransitioning:!1})}),y(M)}},[n,h,i.window]),Ie.useEffect(()=>{h&&n&&t.location.key===n.location.key&&h.resolve()},[h,m,t.location,n]),Ie.useEffect(()=>{!c.isTransitioning&&g&&(a(g.state),s({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),x(void 0))},[c.isTransitioning,g]);let C=Ie.useMemo(()=>({createHref:i.createHref,encodeLocation:i.encodeLocation,go:E=>i.navigate(E),push:(E,A,M)=>i.navigate(E,{state:A,preventScrollReset:M==null?void 0:M.preventScrollReset}),replace:(E,A,M)=>i.navigate(E,{replace:!0,state:A,preventScrollReset:M==null?void 0:M.preventScrollReset})}),[i]),k=i.basename||"/",w=Ie.useMemo(()=>({router:i,navigator:C,static:!1,basename:k}),[i,C,k]);return Ie.createElement(Ie.Fragment,null,Ie.createElement(dh.Provider,{value:w},Ie.createElement(Fg.Provider,{value:t},Ie.createElement(pI.Provider,{value:v.current},Ie.createElement(P2.Provider,{value:c},Ie.createElement(IU,{basename:k,location:t.location,navigationType:t.historyAction,navigator:C},Ie.createElement(MU,{routes:i.routes,future:i.future,state:t})))))),null)}var MU=Ie.memo(AU);function AU({routes:i,future:e,state:t}){return pU(i,void 0,t,e)}function bI({to:i,replace:e,state:t,relative:r}){Mr(Kp(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=Ie.useContext(bl);Kn(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=Ie.useContext(wl),{pathname:c}=nc(),s=vo(),h=mx(i,fx(a),c,r==="path"),p=JSON.stringify(h);return Ie.useEffect(()=>{s(JSON.parse(p),{replace:e,state:t,relative:r})},[s,p,r,e,t]),null}function Nw(i){return hU(i.context)}function IU({basename:i="/",children:e=null,location:t,navigationType:r="POP",navigator:n,static:a=!1}){Mr(!Kp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=i.replace(/^\/*/,"/"),s=Ie.useMemo(()=>({basename:c,navigator:n,static:a,future:{}}),[c,n,a]);typeof t=="string"&&(t=Uc(t));let{pathname:h="/",search:p="",hash:m="",state:y=null,key:g="default"}=t,x=Ie.useMemo(()=>{let v=mo(h,c);return v==null?null:{location:{pathname:v,search:p,hash:m,state:y,key:g},navigationType:r}},[c,h,p,m,y,g,r]);return Kn(x!=null,`<Router basename="${c}"> is not able to match the URL "${h}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:Ie.createElement(bl.Provider,{value:s},Ie.createElement(gx.Provider,{children:e,value:x}))}var z0="get",O0="application/x-www-form-urlencoded";function yx(i){return i!=null&&typeof i.tagName=="string"}function PU(i){return yx(i)&&i.tagName.toLowerCase()==="button"}function DU(i){return yx(i)&&i.tagName.toLowerCase()==="form"}function RU(i){return yx(i)&&i.tagName.toLowerCase()==="input"}function LU(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function NU(i,e){return i.button===0&&(!e||e==="_self")&&!LU(i)}function zw(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((e,t)=>{let r=i[t];return e.concat(Array.isArray(r)?r.map(n=>[t,n]):[[t,r]])},[]))}function zU(i,e){let t=zw(i);return e&&e.forEach((r,n)=>{t.has(n)||e.getAll(n).forEach(a=>{t.append(n,a)})}),t}var a0=null;function OU(){if(a0===null)try{new FormData(document.createElement("form"),0),a0=!1}catch{a0=!0}return a0}var jU=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function i1(i){return i!=null&&!jU.has(i)?(Kn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${O0}"`),null):i}function FU(i,e){let t,r,n,a,c;if(DU(i)){let s=i.getAttribute("action");r=s?mo(s,e):null,t=i.getAttribute("method")||z0,n=i1(i.getAttribute("enctype"))||O0,a=new FormData(i)}else if(PU(i)||RU(i)&&(i.type==="submit"||i.type==="image")){let s=i.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=i.getAttribute("formaction")||s.getAttribute("action");if(r=h?mo(h,e):null,t=i.getAttribute("formmethod")||s.getAttribute("method")||z0,n=i1(i.getAttribute("formenctype"))||i1(s.getAttribute("enctype"))||O0,a=new FormData(s,i),!OU()){let{name:p,type:m,value:y}=i;if(m==="image"){let g=p?`${p}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else p&&a.append(p,y)}}else{if(yx(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=z0,r=null,n=O0,c=i}return a&&n==="text/plain"&&(c=a,a=void 0),{action:r,method:t.toLowerCase(),encType:n,formData:a,body:c}}function z2(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function BU(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $U(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function UU(i,e,t){let r=await Promise.all(i.map(async n=>{let a=e.routes[n.route.id];if(a){let c=await BU(a,t);return c.links?c.links():[]}return[]}));return qU(r.flat(1).filter($U).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function kE(i,e,t,r,n,a){let c=(h,p)=>t[p]?h.route.id!==t[p].route.id:!0,s=(h,p)=>{var m;return t[p].pathname!==h.pathname||((m=t[p].route.path)==null?void 0:m.endsWith("*"))&&t[p].params["*"]!==h.params["*"]};return a==="assets"?e.filter((h,p)=>c(h,p)||s(h,p)):a==="data"?e.filter((h,p)=>{var y;let m=r.routes[h.route.id];if(!m||!m.hasLoader)return!1;if(c(h,p)||s(h,p))return!0;if(h.route.shouldRevalidate){let g=h.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(i,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function VU(i,e,{includeHydrateFallback:t}={}){return GU(i.map(r=>{let n=e.routes[r.route.id];if(!n)return[];let a=[n.module];return n.clientActionModule&&(a=a.concat(n.clientActionModule)),n.clientLoaderModule&&(a=a.concat(n.clientLoaderModule)),t&&n.hydrateFallbackModule&&(a=a.concat(n.hydrateFallbackModule)),n.imports&&(a=a.concat(n.imports)),a}).flat(1))}function GU(i){return[...new Set(i)]}function HU(i){let e={},t=Object.keys(i).sort();for(let r of t)e[r]=i[r];return e}function qU(i,e){let t=new Set;return new Set(e),i.reduce((r,n)=>{let a=JSON.stringify(HU(n));return t.has(a)||(t.add(a),r.push({key:a,link:n})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var WU=new Set([100,101,204,205]);function YU(i,e){let t=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t.pathname==="/"?t.pathname="_root.data":e&&mo(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function wI(){let i=Ie.useContext(dh);return z2(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function ZU(){let i=Ie.useContext(Fg);return z2(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var O2=Ie.createContext(void 0);O2.displayName="FrameworkContext";function _I(){let i=Ie.useContext(O2);return z2(i,"You must render this element inside a <HydratedRouter> element"),i}function XU(i,e){let t=Ie.useContext(O2),[r,n]=Ie.useState(!1),[a,c]=Ie.useState(!1),{onFocus:s,onBlur:h,onMouseEnter:p,onMouseLeave:m,onTouchStart:y}=e,g=Ie.useRef(null);Ie.useEffect(()=>{if(i==="render"&&c(!0),i==="viewport"){let _=k=>{k.forEach(w=>{c(w.isIntersecting)})},C=new IntersectionObserver(_,{threshold:.5});return g.current&&C.observe(g.current),()=>{C.disconnect()}}},[i]),Ie.useEffect(()=>{if(r){let _=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(_)}}},[r]);let x=()=>{n(!0)},v=()=>{n(!1),c(!1)};return t?i!=="intent"?[a,g,{}]:[a,g,{onFocus:sm(s,x),onBlur:sm(h,v),onMouseEnter:sm(p,x),onMouseLeave:sm(m,v),onTouchStart:sm(y,x)}]:[!1,g,{}]}function sm(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function KU({page:i,...e}){let{router:t}=wI(),r=Ie.useMemo(()=>wu(t.routes,i,t.basename),[t.routes,i,t.basename]);return r?Ie.createElement(JU,{page:i,matches:r,...e}):null}function QU(i){let{manifest:e,routeModules:t}=_I(),[r,n]=Ie.useState([]);return Ie.useEffect(()=>{let a=!1;return UU(i,e,t).then(c=>{a||n(c)}),()=>{a=!0}},[i,e,t]),r}function JU({page:i,matches:e,...t}){let r=nc(),{manifest:n,routeModules:a}=_I(),{basename:c}=wI(),{loaderData:s,matches:h}=ZU(),p=Ie.useMemo(()=>kE(i,e,h,n,r,"data"),[i,e,h,n,r]),m=Ie.useMemo(()=>kE(i,e,h,n,r,"assets"),[i,e,h,n,r]),y=Ie.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let v=new Set,_=!1;if(e.forEach(k=>{var E;let w=n.routes[k.route.id];!w||!w.hasLoader||(!p.some(A=>A.route.id===k.route.id)&&k.route.id in s&&((E=a[k.route.id])!=null&&E.shouldRevalidate)||w.hasClientLoader?_=!0:v.add(k.route.id))}),v.size===0)return[];let C=YU(i,c);return _&&v.size>0&&C.searchParams.set("_routes",e.filter(k=>v.has(k.route.id)).map(k=>k.route.id).join(",")),[C.pathname+C.search]},[c,s,r,n,p,e,i,a]),g=Ie.useMemo(()=>VU(m,n),[m,n]),x=QU(m);return Ie.createElement(Ie.Fragment,null,y.map(v=>Ie.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),g.map(v=>Ie.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),x.map(({key:v,link:_})=>Ie.createElement("link",{key:v,..._})))}function eV(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var CI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{CI&&(window.__reactRouterVersion="7.6.1")}catch{}function tV(i,e){return V$({basename:e==null?void 0:e.basename,unstable_getContext:e==null?void 0:e.unstable_getContext,future:e==null?void 0:e.future,history:d$({window:e==null?void 0:e.window}),hydrationData:iV(),routes:i,mapRouteProperties:TU,hydrationRouteProperties:SU,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function iV(){let i=window==null?void 0:window.__staticRouterHydrationData;return i&&i.errors&&(i={...i,errors:rV(i.errors)}),i}function rV(i){if(!i)return null;let e=Object.entries(i),t={};for(let[r,n]of e)if(n&&n.__type==="RouteErrorResponse")t[r]=new uv(n.status,n.statusText,n.data,n.internal===!0);else if(n&&n.__type==="Error"){if(n.__subType){let a=window[n.__subType];if(typeof a=="function")try{let c=new a(n.message);c.stack="",t[r]=c}catch{}}if(t[r]==null){let a=new Error(n.message);a.stack="",t[r]=a}}else t[r]=n;return t}var TI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,j2=Ie.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:n,reloadDocument:a,replace:c,state:s,target:h,to:p,preventScrollReset:m,viewTransition:y,...g},x){let{basename:v}=Ie.useContext(bl),_=typeof p=="string"&&TI.test(p),C,k=!1;if(typeof p=="string"&&_&&(C=p,CI))try{let Z=new URL(window.location.href),K=p.startsWith("//")?new URL(Z.protocol+p):new URL(p),U=mo(K.pathname,v);K.origin===Z.origin&&U!=null?p=U+K.search+K.hash:k=!0}catch{Kn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=cU(p,{relative:n}),[E,A,M]=XU(r,g),S=aV(p,{replace:c,state:s,target:h,preventScrollReset:m,relative:n,viewTransition:y});function N(Z){e&&e(Z),Z.defaultPrevented||S(Z)}let Y=Ie.createElement("a",{...g,...M,href:C||w,onClick:k||a?e:N,ref:eV(x,A),target:h,"data-discover":!_&&t==="render"?"true":void 0});return E&&!_?Ie.createElement(Ie.Fragment,null,Y,Ie.createElement(KU,{page:w})):Y});j2.displayName="Link";var SI=Ie.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:n=!1,style:a,to:c,viewTransition:s,children:h,...p},m){let y=Bg(c,{relative:p.relative}),g=nc(),x=Ie.useContext(Fg),{navigator:v,basename:_}=Ie.useContext(bl),C=x!=null&&dV(y)&&s===!0,k=v.encodeLocation?v.encodeLocation(y).pathname:y.pathname,w=g.pathname,E=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(w=w.toLowerCase(),E=E?E.toLowerCase():null,k=k.toLowerCase()),E&&_&&(E=mo(E,_)||E);const A=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let M=w===k||!n&&w.startsWith(k)&&w.charAt(A)==="/",S=E!=null&&(E===k||!n&&E.startsWith(k)&&E.charAt(k.length)==="/"),N={isActive:M,isPending:S,isTransitioning:C},Y=M?e:void 0,Z;typeof r=="function"?Z=r(N):Z=[r,M?"active":null,S?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let K=typeof a=="function"?a(N):a;return Ie.createElement(j2,{...p,"aria-current":Y,className:Z,ref:m,style:K,to:c,viewTransition:s},typeof h=="function"?h(N):h)});SI.displayName="NavLink";var nV=Ie.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:n,state:a,method:c=z0,action:s,onSubmit:h,relative:p,preventScrollReset:m,viewTransition:y,...g},x)=>{let v=cV(),_=uV(s,{relative:p}),C=c.toLowerCase()==="get"?"get":"post",k=typeof s=="string"&&TI.test(s),w=E=>{if(h&&h(E),E.defaultPrevented)return;E.preventDefault();let A=E.nativeEvent.submitter,M=(A==null?void 0:A.getAttribute("formmethod"))||c;v(A||E.currentTarget,{fetcherKey:e,method:M,navigate:t,replace:n,state:a,relative:p,preventScrollReset:m,viewTransition:y})};return Ie.createElement("form",{ref:x,method:C,action:_,onSubmit:r?h:w,...g,"data-discover":!k&&i==="render"?"true":void 0})});nV.displayName="Form";function sV(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function EI(i){let e=Ie.useContext(dh);return Mr(e,sV(i)),e}function aV(i,{target:e,replace:t,state:r,preventScrollReset:n,relative:a,viewTransition:c}={}){let s=vo(),h=nc(),p=Bg(i,{relative:a});return Ie.useCallback(m=>{if(NU(m,e)){m.preventDefault();let y=t!==void 0?t:ju(h)===ju(p);s(i,{replace:y,state:r,preventScrollReset:n,relative:a,viewTransition:c})}},[h,s,p,t,r,e,i,n,a,c])}function F2(i){Kn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=Ie.useRef(zw(i)),t=Ie.useRef(!1),r=nc(),n=Ie.useMemo(()=>zU(r.search,t.current?null:e.current),[r.search]),a=vo(),c=Ie.useCallback((s,h)=>{const p=zw(typeof s=="function"?s(n):s);t.current=!0,a("?"+p,h)},[a,n]);return[n,c]}var oV=0,lV=()=>`__${String(++oV)}__`;function cV(){let{router:i}=EI("useSubmit"),{basename:e}=Ie.useContext(bl),t=bU();return Ie.useCallback(async(r,n={})=>{let{action:a,method:c,encType:s,formData:h,body:p}=FU(r,e);if(n.navigate===!1){let m=n.fetcherKey||lV();await i.fetch(m,t,n.action||a,{preventScrollReset:n.preventScrollReset,formData:h,body:p,formMethod:n.method||c,formEncType:n.encType||s,flushSync:n.flushSync})}else await i.navigate(n.action||a,{preventScrollReset:n.preventScrollReset,formData:h,body:p,formMethod:n.method||c,formEncType:n.encType||s,replace:n.replace,state:n.state,fromRouteId:t,flushSync:n.flushSync,viewTransition:n.viewTransition})},[i,e,t])}function uV(i,{relative:e}={}){let{basename:t}=Ie.useContext(bl),r=Ie.useContext(wl);Mr(r,"useFormAction must be used inside a RouteContext");let[n]=r.matches.slice(-1),a={...Bg(i||".",{relative:e})},c=nc();if(i==null){a.search=c.search;let s=new URLSearchParams(a.search),h=s.getAll("index");if(h.some(m=>m==="")){s.delete("index"),h.filter(y=>y).forEach(y=>s.append("index",y));let m=s.toString();a.search=m?`?${m}`:""}}return(!i||i===".")&&n.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:ql([t,a.pathname])),ju(a)}function dV(i,e={}){let t=Ie.useContext(P2);Mr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=EI("useViewTransitionState"),n=Bg(i,{relative:e.relative});if(!t.isTransitioning)return!1;let a=mo(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=mo(t.nextLocation.pathname,r)||t.nextLocation.pathname;return cv(n.pathname,c)!=null||cv(n.pathname,a)!=null}[...WU];/**
 * react-router v7.6.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hV(i){return Ie.createElement(kU,{flushSync:yL.flushSync,...i})}const ME=()=>{const i=vI();return console.error(i),zp(i)?z.jsxs("div",{id:"error-page",children:[z.jsx("h1",{children:ve.t("Oops!")}),z.jsx("p",{children:ve.t("Sorry, an unexpected error has occurred.")}),z.jsx("p",{children:z.jsx("i",{children:i.statusText})})]}):z.jsxs("div",{id:"error-page",children:[z.jsx("h1",{children:ve.t("Oops!")}),z.jsx("p",{children:ve.t("Sorry, an unexpected error has occurred.")})]})},pV="View",fV="Rename",mV="Delete",gV="Cancel",yV="Name",vV="Save",xV="ID",bV="Created",wV="Model",_V="Actions",CV="Search",TV="Clear",SV="Close",EV="Status",kV="Type",MV="Duration",AV="Pending",IV="Running",PV="Success",DV="Failed",RV="Revoked",LV="Cancelled",NV="Target",zV="Monthly",OV="Yearly",jV="Weekly",FV="Daily",BV="Any",$V="Deprecated",UV="Experimental",VV="Limited",GV="Testing",HV="Production",qV="Selected",WV="Evaluate",YV="Overview",ZV="Compare",XV="Predict",KV="Jobs",QV="Settings",JV="Code",eG="Aggregate",tG="Range",iG="Add",rG="Required",nG="Remove",sG="Indicator",aG="Loading",oG="Evaluation",lG="Connected",cG="Configure",uG="Sharing",dG="Edit",hG="URL",pG="Authorities",fG="Period",mG="Evaluations",gG={View:pV,Rename:fV,Delete:mV,"Delete evaluation":"Delete evaluation","Are you sure you want to delete this evaluation? This action cannot be undone.":"Are you sure you want to delete this evaluation? This action cannot be undone.",Cancel:gV,"Name is required":"Name is required","Rename evaluation":"Rename evaluation",Name:yV,Save:vV,ID:xV,Created:bV,Model:wV,"CRPS (Norm)":"CRPS (Norm)","Normalized CRPS (Continuous Ranked Probability Score) shows how close a model's predicted range of outcomes is to the actual result on a 0 - 1 scale. Lower values indicate better probabilistic accuracy":"Normalized CRPS (Continuous Ranked Probability Score) shows how close a model's predicted range of outcomes is to the actual result on a 0 - 1 scale. Lower values indicate better probabilistic accuracy",Actions:_V,"New evaluation":"New evaluation","Sort by {{column}}":"Sort by {{column}}","No evaluations available":"No evaluations available",Search:CV,"No models found":"No models found",Clear:TV,"{{count}} evaluations selected":"{{count}} evaluation selected","{{count}} evaluations selected_plural":"{{count}} evaluations selected","There are running jobs in the background":"There are running jobs in the background","Running jobs":"Running jobs","Evaluations deleted":"Evaluations deleted","Failed to delete evaluations":"Failed to delete evaluations","Evaluation deleted":"Evaluation deleted","Failed to delete evaluation":"Failed to delete evaluation","Error renaming evaluation":"Error renaming evaluation","Could not connect to CHAP":"Could not connect to CHAP","The app is not able to connect to the CHAP server.":"The app is not able to connect to the CHAP server.","Please check your route configuration and make sure the CHAP server is running.":"Please check your route configuration and make sure the CHAP server is running.","Learn more about Modeling and CHAP":"Learn more about Modeling and CHAP","Configure settings":"Configure settings","Oops!":"Oops!","Sorry, an unexpected error has occurred.":"Sorry, an unexpected error has occurred.","Inspect dataset":"Inspect dataset",Close:SV,"Cancel job":"Cancel job","Are you sure you want to cancel this job? This action cannot be undone.":"Are you sure you want to cancel this job? This action cannot be undone.","Delete job":"Delete job","Are you sure you want to delete this job? This action cannot be undone.":"Are you sure you want to delete this job? This action cannot be undone.","Failed to copy job ID":"Failed to copy job ID","Go to result":"Go to result","View Logs":"View Logs","Copy Job ID":"Copy Job ID","Job Logs":"Job Logs","An error occurred while loading the logs.":"An error occurred while loading the logs.","No logs reported for this job":"No logs reported for this job","Job cancelled":"Job cancelled","Failed to cancel job":"Failed to cancel job","Job deleted":"Job deleted","Failed to delete job":"Failed to delete job",Status:EV,Type:kV,"Start date":"Start date","End date":"End date",Duration:MV,"No jobs available":"No jobs available",Pending:AV,Running:IV,Success:PV,Failed:DV,Revoked:RV,"Create evaluation":"Create evaluation","Make prediction":"Make prediction","Create dataset (deprecated)":"Create dataset (deprecated)","Create evaluation (deprecated)":"Create evaluation (deprecated)","Create evaluation (Legacy)":"Create evaluation (Legacy)","Create dataset":"Create dataset",Cancelled:LV,"Unsaved changes":"Unsaved changes","You have unsaved changes that will be lost if you leave this page. Are you sure you want to continue?":"You have unsaved changes that will be lost if you leave this page. Are you sure you want to continue?","Leave page":"Leave page","Back to evaluations":"Back to evaluations","Error starting evaluation job":"Error starting evaluation job","Start job":"Start job","Map Data Items":"Map Data Items","Map the model features to corresponding data items in DHIS2":"Map the model features to corresponding data items in DHIS2",Target:NV,"Map the model target to the corresponding data item in DHIS2":"Map the model target to the corresponding data item in DHIS2","Map each model covariate to the corresponding data item in DHIS2":"Map each model covariate to the corresponding data item in DHIS2","No model selected":"No model selected","All data items mapped":"All data items mapped","{{mapped}}/{{total}} data items mapped":"{{mapped}}/{{total}} data items mapped","Dataset Configuration":"Dataset Configuration","Configure sources":"Configure sources","The Data Visualizer app is not compatible with this feature. Please update to a newer version.":"The Data Visualizer app is not compatible with this feature. Please update to a newer version.","Please map all model covariates to valid data items":"Please map all model covariates to valid data items",'Target "{{targetName}}" must be mapped to a data item':'Target "{{targetName}}" must be mapped to a data item','Covariate "{{covariateName}}" must be mapped to a data item':'Covariate "{{covariateName}}" must be mapped to a data item',"Organisation Units":"Organisation Units","Select organisation units":"Select organisation units","Select Organisation Units":"Select Organisation Units","Organisation unit levels":"Organisation unit levels","Some models require you to only select organisation units from the same level.":"Some models require you to only select organisation units from the same level.","All org units must be at the same level":"All org units must be at the same level","Confirm Selection":"Confirm Selection",Monthly:zV,Yearly:OV,Weekly:jV,Daily:FV,Any:BV,Deprecated:$V,"This model is not intended for use or has been deprecated.":"This model is not intended for use or has been deprecated.",Experimental:UV,"An early prototype with no formal validation - only for initial experimentation.":"An early prototype with no formal validation - only for initial experimentation.",Limited:VV,"Tested on a small dataset. Requires manual tuning and close monitoring.":"Tested on a small dataset. Requires manual tuning and close monitoring.",Testing:GV,"Prepared for more extensive testing; not yet approved for production.":"Prepared for more extensive testing; not yet approved for production.",Production:HV,"Approved for general use.":"Approved for general use.","{{count}} covariates":"{{count}} covariate","{{count}} covariates_plural":"{{count}} covariates","Author note":"Author note",Selected:qV,"Select Model":"Select Model","Search by title":"Search by title","Period Type":"Period Type","Assessment Status":"Assessment Status","Select model":"Select model","Evaluation name":"Evaluation name","EWARS Evaluation 22-24":"EWARS Evaluation 22-24","Period type":"Period type","From period":"From period","To period":"To period","Missing id for org unit":"Missing id for org unit","Period type is required":"Period type is required","Start date is required":"Start date is required","End date is required":"End date is required","At least one org unit is required":"At least one org unit is required","Please select a model":"Please select a model","Please map the covariates to valid data items":"Please map the covariates to valid data items","Please map the target to a valid data item":"Please map the target to a valid data item","End period must be after start period":"End period must be after start period","{{count}} org units":"{{count}} org unit","{{count}} org units_plural":"{{count}} org units","{{count}} levels":"{{count}} level","{{count}} levels_plural":"{{count}} levels","{{count}} groups":"{{count}} group","{{count}} groups_plural":"{{count}} groups","Selected: {{commaSeparatedListOfOrganisationUnits}}":"Selected: {{commaSeparatedListOfOrganisationUnits}}","Nothing selected":"Nothing selected","User organisation unit":"User organisation unit","User sub-units":"User sub-units","User sub-x2-units":"User sub-x2-units","Select a level":"Select a level","Select a group":"Select a group","Deselect all":"Deselect all","Search organisation units":"Search organisation units","Clear all organisation units":"Clear all organisation units","No organisation units match your search":"No organisation units match your search","You cannot select more than {{max}} organisation units at a time":"You cannot select more than {{max}} organisation units at a time",Evaluate:WV,Overview:YV,Compare:ZV,Predict:XV,Jobs:KV,Settings:QV,"The version of the Modeling App is not compatible with the backend (Chap core).":"The version of the Modeling App is not compatible with the backend (Chap core).","Compare evaluations":"Compare evaluations","Compare evaluations to assess model, co-variates and data performance.":"Compare evaluations to assess model, co-variates and data performance.","Select base evaluation":"Select base evaluation","Selected evaluations do not have any split periods in common. Please select evaluations with overlapping split periods.":"Selected evaluations do not have any split periods in common. Please select evaluations with overlapping split periods.","An error occurred while fetching chart data ":"An error occurred while fetching chart data ","Evaluation:":"Evaluation:","Select two evaluations to compare their results. The\n                    selected evaluations must be compatible.":`Select two evaluations to compare their results. The
                    selected evaluations must be compatible.`,"Compatible evaluations have overlapping organisation units and split periods.":"Compatible evaluations have overlapping organisation units and split periods.","Split period":"Split period","Add required Data Elements":"Add required Data Elements","This app requires specific DHIS2 Data Elements to import data into. If you have not already added them, go to the ":"This app requires specific DHIS2 Data Elements to import data into. If you have not already added them, go to the ","-app and create the Data Elements listed below.":"-app and create the Data Elements listed below.","NB! Make sure the CODE property for each data element is exactly the same as below.":"NB! Make sure the CODE property for each data element is exactly the same as below.","Properties in the new Data Element form not specified in the tables below should have the default value.":"Properties in the new Data Element form not specified in the tables below should have the default value.","Short name":"Short name",Code:JV,"Domain type":"Domain type",Aggregate:eG,"Aggregation levels":"Aggregation levels","Assign all org unit levels":"Assign all org unit levels","Prediction for {{predictionTargetName}} for {{orgUnitName}}":"Prediction for {{predictionTargetName}} for {{orgUnitName}}","Quantile median":"Quantile median",Range:tG,"Quantile low":"Quantile low","Select data element for low quantile":"Select data element for low quantile","Select data element for median quantile":"Select data element for median quantile","Select data element for high quantile":"Select data element for high quantile","Import prediction":"Import prediction","Prediction has been imported.":"Prediction has been imported.","CHAP Core results":"CHAP Core results","Select data element":"Select data element","It seems like you missing Data Elements for CHAP prediction.":"It seems like you missing Data Elements for CHAP prediction.","Add data elements":"Add data elements","Job is still running. Please wait until it is finished before doing any actions.":"Job is still running. Please wait until it is finished before doing any actions.","Unknown error":"Unknown error","No model templates found.":"No model templates found.","Model Templates":"Model Templates","Configure new models based on generic model templates":"Configure new models based on generic model templates","Back to settings":"Back to settings","Configure Model":"Configure Model","Model Template":"Model Template","Select a model template":"Select a model template","Configured Model Name":"Configured Model Name",'Enter something to identify your model, e.g. "Debug" or "Malaria"':'Enter something to identify your model, e.g. "Debug" or "Malaria"',"Your model will be saved as {{modelName}} [{{configuredModelName}}]":"Your model will be saved as {{modelName}} [{{configuredModelName}}]","Additional Covariates":"Additional Covariates","Enter covariate name":"Enter covariate name",Add:iG,Required:rG,Remove:nG,"Please check covariates":"Please check covariates","Template is required":"Template is required","Covariate name is required":"Covariate name is required","Covariate name cannot contain spaces":"Covariate name cannot contain spaces","Covariate already exists":"Covariate already exists","Model Parameters":"Model Parameters","Enter item":"Enter item","Please enter a valid number":"Please enter a valid number","Please enter a whole number":"Please enter a whole number","Invalid input":"Invalid input","Enter a whole number":"Enter a whole number","Enter a number (use , or . for decimal)":"Enter a number (use , or . for decimal)","Please enter a valid number or leave empty":"Please enter a valid number or leave empty","Please enter a whole number or leave empty":"Please enter a whole number or leave empty","Enter a whole number or leave empty for null":"Enter a whole number or leave empty for null","Enter a number (use , or . for decimal) or leave empty for null":"Enter a number (use , or . for decimal) or leave empty for null","Leave empty for null":"Leave empty for null","Model configured":"Model configured","Failed to configure model":"Failed to configure model","Prediction for Northern Province":"Prediction for Northern Province","Organisation unit level":"Organisation unit level","Organisation unit level to import data to":"Organisation unit level to import data to","Organisation units":"Organisation units","Data Element":"Data Element",Indicator:sG,"Program Indicator":"Program Indicator",Loading:aG,"Start typing to search for data items":"Start typing to search for data items","No matches found":"No matches found","Search for indicators, data elements, or program indicators":"Search for indicators, data elements, or program indicators","No compatible evaluations found":"No compatible evaluations found","Select evaluation to compare with":"Select evaluation to compare with","No evaluations found":"No evaluations found",Evaluation:oG,"CHAP settings":"CHAP settings","An error occurred while connecting to the CHAP server.":"An error occurred while connecting to the CHAP server.","Are you sure you have configured your route correctly? See the console for more details.":"Are you sure you have configured your route correctly? See the console for more details.","Server information":"Server information","CHAP Version":"CHAP Version","Python Version":"Python Version","Operating System":"Operating System",Connected:lG,"Your server might not be secure":"Your server might not be secure","CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access on your server firewall.":"CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access on your server firewall.","Your server is not secure":"Your server is not secure","Model settings":"Model settings","An error occurred while loading models.":"An error occurred while loading models.","Please try to reload the page. If the problem persists, contact your system administrator.":"Please try to reload the page. If the problem persists, contact your system administrator.","Model templates":"Model templates","Model templates are base models that can be configured to fit your data with different parameters and covariates. This is still an advanced feature and should be used with caution.":"Model templates are base models that can be configured to fit your data with different parameters and covariates. This is still an advanced feature and should be used with caution.","Configured models":"Configured models",Configure:cG,"Models configured":"Models configured","Route configuration":"Route configuration","No route found.":"No route found.","Add route":"Add route","Delete route":"Delete route","Are you sure you want to delete this route?":"Are you sure you want to delete this route?","Edit route":"Edit route","Public access":"Public access",'Your route is public and can be accessed by anyone. This can potentially expose sensitive data. If you want to restrict access, click the "Sharing" button and remove access for "All users".':'Your route is public and can be accessed by anyone. This can potentially expose sensitive data. If you want to restrict access, click the "Sharing" button and remove access for "All users".',Sharing:uG,Edit:dG,"Invalid URL format":"Invalid URL format","URL is required":"URL is required","URL must end with a double wildcard (/**)":"URL must end with a double wildcard (/**)","CHAP Core URL":"CHAP Core URL","Route settings":"Route settings","There was an error loading the route settings. Please try to reload the page.":"There was an error loading the route settings. Please try to reload the page.","If the problem persists, please contact your system administrator.":"If the problem persists, please contact your system administrator.","You do not have permission to add or modify routes.":"You do not have permission to add or modify routes.","If you think this is an error, please contact your system administrator.":"If you think this is an error, please contact your system administrator.",URL:hG,Authorities:pG,"Error deleting route":"Error deleting route","Route deleted successfully":"Route deleted successfully","Error saving route":"Error saving route","Route saved successfully":"Route saved successfully",Period:fG,"Start month":"Start month","End month":"End month","Error loading evaluations":"Error loading evaluations","An unknown error occurred":"An unknown error occurred",Evaluations:mG,"Evaluates the accuracy of a predictive model using historical data. Compares actual outcomes with predicted values to assess model performance.":"Evaluates the accuracy of a predictive model using historical data. Compares actual outcomes with predicted values to assess model performance.","Get started with the Modeling app":"Get started with the Modeling app","To get started, create a route that points to a running CHAP server.":"To get started, create a route that points to a running CHAP server.","Route and servers are configured on the settings page.":"Route and servers are configured on the settings page.","Error loading jobs":"Error loading jobs","Active jobs":"Active jobs","View and manage currently running jobs and their status.":"View and manage currently running jobs and their status.","Create a new evaluation to assess the performance of a model":"Create a new evaluation to assess the performance of a model","__MANIFEST_APP_TITLE_Application title":"Modeling","__MANIFEST_APP_DESCRIPTION_Application description":""},yG="default";ve.addResources("en",yG,gG);const kI="1400px",vG={maxWidth:kI,marginLeft:"auto",marginRight:"auto",padding:"20px 16px",width:"100%"},AE=({children:i,maxWidth:e})=>{const t=yI().some(r=>{var n;return!!((n=r.handle)!=null&&n.fullWidth)});return z.jsx("div",{style:{...vG,maxWidth:t?"none":e||kI,width:"100%"},children:i})},xG="_drawerWrapper_1jnc9_1",bG={drawerWrapper:xG};function Ow(){return Ow=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Ow.apply(this,arguments)}var wG=function(e,t){var r={left:{top:0,left:0,transform:"translate3d(-100%, 0, 0)",width:t,height:"100vh"},right:{top:0,right:0,transform:"translate3d(100%, 0, 0)",width:t,height:"100vh"},bottom:{left:0,right:0,bottom:0,transform:"translate3d(0, 100%, 0)",width:"100%",height:t},top:{left:0,right:0,top:0,transform:"translate3d(0, -100%, 0)",width:"100%",height:t}};return r[e]},B2=function(e){var t=e.open,r=e.onClose,n=r===void 0?function(){}:r,a=e.children,c=e.style,s=e.enableOverlay,h=s===void 0?!0:s,p=e.overlayColor,m=p===void 0?"#000":p,y=e.overlayOpacity,g=y===void 0?.4:y,x=e.zIndex,v=x===void 0?100:x,_=e.duration,C=_===void 0?500:_,k=e.direction,w=e.size,E=w===void 0?250:w,A=e.className,M=e.customIdSuffix,S=e.lockBackgroundScroll,N=S===void 0?!1:S,Y=e.overlayClassName,Z=Y===void 0?"":Y,K=Ie.useRef(null);Ie.useEffect(function(){var R=function(){K.current=window.document.querySelector("body"),K.current&&N&&(K.current.style.overflow=t?"hidden":"")};R()},[t]);var U=Ie.useMemo(function(){return M||(Math.random()+1).toString(36).substring(7)},[M]),$={backgroundColor:m.toString(),opacity:g,zIndex:v},B=Ow({zIndex:v+1,transitionDuration:C+"ms"},wG(k,E),c);return de.createElement("div",{id:"EZDrawer"+U,className:"EZDrawer"},de.createElement("input",{type:"checkbox",id:"EZDrawer__checkbox"+U,className:"EZDrawer__checkbox",onChange:n,checked:t}),de.createElement("nav",{role:"navigation",id:"EZDrawer__container"+U,style:B,className:"EZDrawer__container "+A},a),h&&de.createElement("label",{htmlFor:"EZDrawer__checkbox"+U,id:"EZDrawer__overlay"+U,className:"EZDrawer__overlay "+Z,style:$}))};const _G="_formWrapper_6d4wk_1",CG={formWrapper:_G},TG=({value:i,onChange:e})=>z.jsx("div",{children:z.jsxs(hs,{onChange:({selected:t})=>e(t),selected:i,label:"Period type",children:[z.jsx(As,{value:"week",label:"Weekly"}),z.jsx(As,{value:"month",label:"Monthly"})]})}),SG="_datePicker_1yiz7_1",EG="_label_1yiz7_5",kG="_content_1yiz7_14",MG="_box_1yiz7_18",AG="_inputDiv_1yiz7_23",IG="_input_1yiz7_23",rp={datePicker:SG,label:EG,content:kG,box:MG,inputDiv:AG,input:IG},IE=({label:i,name:e,onChange:t,periodeType:r})=>{const n=Ie.useRef(null);return z.jsxs("div",{className:rp.datePicker,style:{opacity:r===""?.6:1},children:[z.jsx("label",{className:rp.label,children:i}),z.jsx("div",{className:rp.content,children:z.jsx("div",{className:rp.box,children:z.jsx("div",{className:rp.inputDiv,children:z.jsx("input",{disabled:r==="",className:rp.input,ref:n,type:r,name:e,onChange:a=>t(a.target.value)})})})})]})},PG="_timePeriodeSelector_fpkps_1",DG="_timePeriodeSelectorInputFields_fpkps_7",RG="_timePeriodeSelectorInputFieldsChild_fpkps_13",o0={timePeriodeSelector:PG,timePeriodeSelectorInputFields:DG,timePeriodeSelectorInputFieldsChild:RG},MI=6048e5,LG=864e5,vx=6e4,xx=36e5,NG=1e3,PE=Symbol.for("constructDateFrom");function ss(i,e){return typeof i=="function"?i(e):i&&typeof i=="object"&&PE in i?i[PE](e):i instanceof Date?new i.constructor(e):new Date(e)}function Dr(i,e){return ss(e||i,i)}function bx(i,e,t){const r=Dr(i,t==null?void 0:t.in);return isNaN(e)?ss((t==null?void 0:t.in)||i,NaN):(e&&r.setDate(r.getDate()+e),r)}function AI(i,e,t){const r=Dr(i,t==null?void 0:t.in);if(isNaN(e))return ss(i,NaN);if(!e)return r;const n=r.getDate(),a=ss(i,r.getTime());a.setMonth(r.getMonth()+e+1,0);const c=a.getDate();return n>=c?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}function am(i,e,t){const{years:r=0,months:n=0,weeks:a=0,days:c=0,hours:s=0,minutes:h=0,seconds:p=0}=e,m=Dr(i,t==null?void 0:t.in),y=n||r?AI(m,n+r*12):m,g=c||a?bx(y,c+a*7):y,x=h+s*60,_=(p+x*60)*1e3;return ss(i,+g+_)}let zG={};function hh(){return zG}function Fu(i,e){var s,h,p,m;const t=hh(),r=(e==null?void 0:e.weekStartsOn)??((h=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:h.weekStartsOn)??t.weekStartsOn??((m=(p=t.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??0,n=Dr(i,e==null?void 0:e.in),a=n.getDay(),c=(a<r?7:0)+a-r;return n.setDate(n.getDate()-c),n.setHours(0,0,0,0),n}function Oc(i,e){return Fu(i,{...e,weekStartsOn:1})}function $m(i,e){const t=Dr(i,e==null?void 0:e.in),r=t.getFullYear(),n=ss(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=Oc(n),c=ss(t,0);c.setFullYear(r,0,4),c.setHours(0,0,0,0);const s=Oc(c);return t.getTime()>=a.getTime()?r+1:t.getTime()>=s.getTime()?r:r-1}function hv(i){const e=Dr(i),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+i-+t}function sc(i,...e){const t=ss.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function DE(i,e){const t=Dr(i,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function II(i,e,t){const[r,n]=sc(t==null?void 0:t.in,i,e),a=DE(r),c=DE(n),s=+a-hv(a),h=+c-hv(c);return Math.round((s-h)/LG)}function OG(i,e){const t=$m(i,e),r=ss(i,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Oc(r)}function jG(i,e,t){return bx(i,e*7,t)}function Um(i,e){const t=+Dr(i)-+Dr(e);return t<0?-1:t>0?1:t}function FG(i){return i instanceof Date||typeof i=="object"&&Object.prototype.toString.call(i)==="[object Date]"}function ag(i){return!(!FG(i)&&typeof i!="number"||isNaN(+Dr(i)))}function BG(i,e,t){const[r,n]=sc(t==null?void 0:t.in,i,e),a=r.getFullYear()-n.getFullYear(),c=r.getMonth()-n.getMonth();return a*12+c}function $G(i,e,t){const[r,n]=sc(t==null?void 0:t.in,i,e);return r.getFullYear()-n.getFullYear()}function UG(i,e,t){const[r,n]=sc(t==null?void 0:t.in,i,e),a=RE(r,n),c=Math.abs(II(r,n));r.setDate(r.getDate()-a*c);const s=+(RE(r,n)===-a),h=a*(c-s);return h===0?0:h}function RE(i,e){const t=i.getFullYear()-e.getFullYear()||i.getMonth()-e.getMonth()||i.getDate()-e.getDate()||i.getHours()-e.getHours()||i.getMinutes()-e.getMinutes()||i.getSeconds()-e.getSeconds()||i.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function $2(i){return e=>{const r=(i?Math[i]:Math.trunc)(e);return r===0?0:r}}function VG(i,e,t){const[r,n]=sc(t==null?void 0:t.in,i,e),a=(+r-+n)/xx;return $2(t==null?void 0:t.roundingMethod)(a)}function PI(i,e){return+Dr(i)-+Dr(e)}function GG(i,e,t){const r=PI(i,e)/vx;return $2(t==null?void 0:t.roundingMethod)(r)}function HG(i,e){const t=Dr(i,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}function DI(i,e){const t=Dr(i,e==null?void 0:e.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function qG(i,e){const t=Dr(i,e==null?void 0:e.in);return+HG(t,e)==+DI(t,e)}function WG(i,e,t){const[r,n,a]=sc(t==null?void 0:t.in,i,i,e),c=Um(n,a),s=Math.abs(BG(n,a));if(s<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-c*s);let h=Um(n,a)===-c;qG(r)&&s===1&&Um(r,a)===1&&(h=!1);const p=c*(s-+h);return p===0?0:p}function YG(i,e,t){const r=PI(i,e)/1e3;return $2(t==null?void 0:t.roundingMethod)(r)}function ZG(i,e,t){const[r,n]=sc(t==null?void 0:t.in,i,e),a=Um(r,n),c=Math.abs($G(r,n));r.setFullYear(1584),n.setFullYear(1584);const s=Um(r,n)===-a,h=a*(c-+s);return h===0?0:h}function XG(i,e){const[t,r]=sc(i,e.start,e.end);return{start:t,end:r}}function KG(i,e){const t=Dr(i,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function QG(i,e){const t=Dr(i,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function JG(i,e){const t=e==null?void 0:e.weekStartsOn,r=Dr(i,e==null?void 0:e.in),n=r.getDay(),a=(n<t?-7:0)+6-(n-t);return r.setDate(r.getDate()+a),r.setHours(23,59,59,999),r}function eH(i,e){return JG(i,{...e,weekStartsOn:1})}const tH={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},iH=(i,e,t)=>{let r;const n=tH[i];return typeof n=="string"?r=n:e===1?r=n.one:r=n.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function r1(i){return(e={})=>{const t=e.width?String(e.width):i.defaultWidth;return i.formats[t]||i.formats[i.defaultWidth]}}const rH={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},nH={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},sH={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},aH={date:r1({formats:rH,defaultWidth:"full"}),time:r1({formats:nH,defaultWidth:"full"}),dateTime:r1({formats:sH,defaultWidth:"full"})},oH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},lH=(i,e,t,r)=>oH[i];function om(i){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let n;if(r==="formatting"&&i.formattingValues){const c=i.defaultFormattingWidth||i.defaultWidth,s=t!=null&&t.width?String(t.width):c;n=i.formattingValues[s]||i.formattingValues[c]}else{const c=i.defaultWidth,s=t!=null&&t.width?String(t.width):i.defaultWidth;n=i.values[s]||i.values[c]}const a=i.argumentCallback?i.argumentCallback(e):e;return n[a]}}const cH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},uH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},dH={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},hH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},pH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},fH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mH=(i,e)=>{const t=Number(i),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},gH={ordinalNumber:mH,era:om({values:cH,defaultWidth:"wide"}),quarter:om({values:uH,defaultWidth:"wide",argumentCallback:i=>i-1}),month:om({values:dH,defaultWidth:"wide"}),day:om({values:hH,defaultWidth:"wide"}),dayPeriod:om({values:pH,defaultWidth:"wide",formattingValues:fH,defaultFormattingWidth:"wide"})};function lm(i){return(e,t={})=>{const r=t.width,n=r&&i.matchPatterns[r]||i.matchPatterns[i.defaultMatchWidth],a=e.match(n);if(!a)return null;const c=a[0],s=r&&i.parsePatterns[r]||i.parsePatterns[i.defaultParseWidth],h=Array.isArray(s)?vH(s,y=>y.test(c)):yH(s,y=>y.test(c));let p;p=i.valueCallback?i.valueCallback(h):h,p=t.valueCallback?t.valueCallback(p):p;const m=e.slice(c.length);return{value:p,rest:m}}}function yH(i,e){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&e(i[t]))return t}function vH(i,e){for(let t=0;t<i.length;t++)if(e(i[t]))return t}function xH(i){return(e,t={})=>{const r=e.match(i.matchPattern);if(!r)return null;const n=r[0],a=e.match(i.parsePattern);if(!a)return null;let c=i.valueCallback?i.valueCallback(a[0]):a[0];c=t.valueCallback?t.valueCallback(c):c;const s=e.slice(n.length);return{value:c,rest:s}}}const bH=/^(\d+)(th|st|nd|rd)?/i,wH=/\d+/i,_H={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},CH={any:[/^b/i,/^(a|c)/i]},TH={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},SH={any:[/1/i,/2/i,/3/i,/4/i]},EH={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},kH={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},MH={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},AH={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},IH={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},PH={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},DH={ordinalNumber:xH({matchPattern:bH,parsePattern:wH,valueCallback:i=>parseInt(i,10)}),era:lm({matchPatterns:_H,defaultMatchWidth:"wide",parsePatterns:CH,defaultParseWidth:"any"}),quarter:lm({matchPatterns:TH,defaultMatchWidth:"wide",parsePatterns:SH,defaultParseWidth:"any",valueCallback:i=>i+1}),month:lm({matchPatterns:EH,defaultMatchWidth:"wide",parsePatterns:kH,defaultParseWidth:"any"}),day:lm({matchPatterns:MH,defaultMatchWidth:"wide",parsePatterns:AH,defaultParseWidth:"any"}),dayPeriod:lm({matchPatterns:IH,defaultMatchWidth:"any",parsePatterns:PH,defaultParseWidth:"any"})},U2={code:"en-US",formatDistance:iH,formatLong:aH,formatRelative:lH,localize:gH,match:DH,options:{weekStartsOn:0,firstWeekContainsDate:1}};function RH(i,e){const t=Dr(i,e==null?void 0:e.in);return II(t,QG(t))+1}function V2(i,e){const t=Dr(i,e==null?void 0:e.in),r=+Oc(t)-+OG(t);return Math.round(r/MI)+1}function G2(i,e){var m,y,g,x;const t=Dr(i,e==null?void 0:e.in),r=t.getFullYear(),n=hh(),a=(e==null?void 0:e.firstWeekContainsDate)??((y=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??n.firstWeekContainsDate??((x=(g=n.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??1,c=ss((e==null?void 0:e.in)||i,0);c.setFullYear(r+1,0,a),c.setHours(0,0,0,0);const s=Fu(c,e),h=ss((e==null?void 0:e.in)||i,0);h.setFullYear(r,0,a),h.setHours(0,0,0,0);const p=Fu(h,e);return+t>=+s?r+1:+t>=+p?r:r-1}function LH(i,e){var s,h,p,m;const t=hh(),r=(e==null?void 0:e.firstWeekContainsDate)??((h=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:h.firstWeekContainsDate)??t.firstWeekContainsDate??((m=(p=t.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,n=G2(i,e),a=ss((e==null?void 0:e.in)||i,0);return a.setFullYear(n,0,r),a.setHours(0,0,0,0),Fu(a,e)}function RI(i,e){const t=Dr(i,e==null?void 0:e.in),r=+Fu(t,e)-+LH(t,e);return Math.round(r/MI)+1}function dn(i,e){const t=i<0?"-":"",r=Math.abs(i).toString().padStart(e,"0");return t+r}const ou={y(i,e){const t=i.getFullYear(),r=t>0?t:1-t;return dn(e==="yy"?r%100:r,e.length)},M(i,e){const t=i.getMonth();return e==="M"?String(t+1):dn(t+1,2)},d(i,e){return dn(i.getDate(),e.length)},a(i,e){const t=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(i,e){return dn(i.getHours()%12||12,e.length)},H(i,e){return dn(i.getHours(),e.length)},m(i,e){return dn(i.getMinutes(),e.length)},s(i,e){return dn(i.getSeconds(),e.length)},S(i,e){const t=e.length,r=i.getMilliseconds(),n=Math.trunc(r*Math.pow(10,t-3));return dn(n,e.length)}},np={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},LE={G:function(i,e,t){const r=i.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(i,e,t){if(e==="yo"){const r=i.getFullYear(),n=r>0?r:1-r;return t.ordinalNumber(n,{unit:"year"})}return ou.y(i,e)},Y:function(i,e,t,r){const n=G2(i,r),a=n>0?n:1-n;if(e==="YY"){const c=a%100;return dn(c,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):dn(a,e.length)},R:function(i,e){const t=$m(i);return dn(t,e.length)},u:function(i,e){const t=i.getFullYear();return dn(t,e.length)},Q:function(i,e,t){const r=Math.ceil((i.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return dn(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(i,e,t){const r=Math.ceil((i.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return dn(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(i,e,t){const r=i.getMonth();switch(e){case"M":case"MM":return ou.M(i,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(i,e,t){const r=i.getMonth();switch(e){case"L":return String(r+1);case"LL":return dn(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(i,e,t,r){const n=RI(i,r);return e==="wo"?t.ordinalNumber(n,{unit:"week"}):dn(n,e.length)},I:function(i,e,t){const r=V2(i);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):dn(r,e.length)},d:function(i,e,t){return e==="do"?t.ordinalNumber(i.getDate(),{unit:"date"}):ou.d(i,e)},D:function(i,e,t){const r=RH(i);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):dn(r,e.length)},E:function(i,e,t){const r=i.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(i,e,t,r){const n=i.getDay(),a=(n-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return dn(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(n,{width:"short",context:"formatting"});case"eeee":default:return t.day(n,{width:"wide",context:"formatting"})}},c:function(i,e,t,r){const n=i.getDay(),a=(n-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return dn(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(n,{width:"narrow",context:"standalone"});case"cccccc":return t.day(n,{width:"short",context:"standalone"});case"cccc":default:return t.day(n,{width:"wide",context:"standalone"})}},i:function(i,e,t){const r=i.getDay(),n=r===0?7:r;switch(e){case"i":return String(n);case"ii":return dn(n,e.length);case"io":return t.ordinalNumber(n,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(i,e,t){const n=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(i,e,t){const r=i.getHours();let n;switch(r===12?n=np.noon:r===0?n=np.midnight:n=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(i,e,t){const r=i.getHours();let n;switch(r>=17?n=np.evening:r>=12?n=np.afternoon:r>=4?n=np.morning:n=np.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(i,e,t){if(e==="ho"){let r=i.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return ou.h(i,e)},H:function(i,e,t){return e==="Ho"?t.ordinalNumber(i.getHours(),{unit:"hour"}):ou.H(i,e)},K:function(i,e,t){const r=i.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):dn(r,e.length)},k:function(i,e,t){let r=i.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):dn(r,e.length)},m:function(i,e,t){return e==="mo"?t.ordinalNumber(i.getMinutes(),{unit:"minute"}):ou.m(i,e)},s:function(i,e,t){return e==="so"?t.ordinalNumber(i.getSeconds(),{unit:"second"}):ou.s(i,e)},S:function(i,e){return ou.S(i,e)},X:function(i,e,t){const r=i.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return zE(r);case"XXXX":case"XX":return Rd(r);case"XXXXX":case"XXX":default:return Rd(r,":")}},x:function(i,e,t){const r=i.getTimezoneOffset();switch(e){case"x":return zE(r);case"xxxx":case"xx":return Rd(r);case"xxxxx":case"xxx":default:return Rd(r,":")}},O:function(i,e,t){const r=i.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+NE(r,":");case"OOOO":default:return"GMT"+Rd(r,":")}},z:function(i,e,t){const r=i.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+NE(r,":");case"zzzz":default:return"GMT"+Rd(r,":")}},t:function(i,e,t){const r=Math.trunc(+i/1e3);return dn(r,e.length)},T:function(i,e,t){return dn(+i,e.length)}};function NE(i,e=""){const t=i>0?"-":"+",r=Math.abs(i),n=Math.trunc(r/60),a=r%60;return a===0?t+String(n):t+String(n)+e+dn(a,2)}function zE(i,e){return i%60===0?(i>0?"-":"+")+dn(Math.abs(i)/60,2):Rd(i,e)}function Rd(i,e=""){const t=i>0?"-":"+",r=Math.abs(i),n=dn(Math.trunc(r/60),2),a=dn(r%60,2);return t+n+e+a}const OE=(i,e)=>{switch(i){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},LI=(i,e)=>{switch(i){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},NH=(i,e)=>{const t=i.match(/(P+)(p+)?/)||[],r=t[1],n=t[2];if(!n)return OE(i,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",OE(r,e)).replace("{{time}}",LI(n,e))},jw={p:LI,P:NH},zH=/^D+$/,OH=/^Y+$/,jH=["D","DD","YY","YYYY"];function NI(i){return zH.test(i)}function zI(i){return OH.test(i)}function Fw(i,e,t){const r=FH(i,e,t);if(console.warn(r),jH.includes(i))throw new RangeError(r)}function FH(i,e,t){const r=i[0]==="Y"?"years":"days of the month";return`Use \`${i.toLowerCase()}\` instead of \`${i}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const BH=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$H=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,UH=/^'([^]*?)'?$/,VH=/''/g,GH=/[a-zA-Z]/;function Zd(i,e,t){var m,y,g,x;const r=hh(),n=r.locale??U2,a=r.firstWeekContainsDate??((y=(m=r.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??1,c=r.weekStartsOn??((x=(g=r.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,s=Dr(i,t==null?void 0:t.in);if(!ag(s))throw new RangeError("Invalid time value");let h=e.match($H).map(v=>{const _=v[0];if(_==="p"||_==="P"){const C=jw[_];return C(v,n.formatLong)}return v}).join("").match(BH).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const _=v[0];if(_==="'")return{isToken:!1,value:HH(v)};if(LE[_])return{isToken:!0,value:v};if(_.match(GH))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:v}});n.localize.preprocessor&&(h=n.localize.preprocessor(s,h));const p={firstWeekContainsDate:a,weekStartsOn:c,locale:n};return h.map(v=>{if(!v.isToken)return v.value;const _=v.value;(zI(_)||NI(_))&&Fw(_,e,String(i));const C=LE[_[0]];return C(s,_,n.localize,p)}).join("")}function HH(i){const e=i.match(UH);return e?e[1].replace(VH,"'"):i}const qH=["years","months","weeks","days","hours","minutes","seconds"];function WH(i,e){const t=hh(),r=(e==null?void 0:e.locale)??t.locale??U2,n=(e==null?void 0:e.format)??qH,a=(e==null?void 0:e.zero)??!1,c=e==null?void 0:e.delimiter;return r.formatDistance?n.reduce((h,p)=>{const m=`x${p.replace(/(^.)/,g=>g.toUpperCase())}`,y=i[p];return y!==void 0&&(a||i[p])?h.concat(r.formatDistance(m,y)):h},[]).join(c):""}function YH(){return Object.assign({},hh())}function ZH(i,e){const t=Dr(i,e==null?void 0:e.in).getDay();return t===0?7:t}function XH(i,e){const{start:t,end:r}=XG(e==null?void 0:e.in,i),n={},a=ZG(r,t);a&&(n.years=a);const c=am(t,{years:n.years}),s=WG(r,c);s&&(n.months=s);const h=am(c,{months:n.months}),p=UG(r,h);p&&(n.days=p);const m=am(h,{days:n.days}),y=VG(r,m);y&&(n.hours=y);const g=am(m,{hours:n.hours}),x=GG(r,g);x&&(n.minutes=x);const v=am(g,{minutes:n.minutes}),_=YG(r,v);return _&&(n.seconds=_),n}function H2(i,e){return+Dr(i)>+Dr(e)}function KH(i,e){return+Dr(i)==+Dr(e)}function QH(i,e){const t=JH(e)?new e(0):ss(e,0);return t.setFullYear(i.getFullYear(),i.getMonth(),i.getDate()),t.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),t}function JH(i){var e;return typeof i=="function"&&((e=i.prototype)==null?void 0:e.constructor)===i}const eq=10;class OI{constructor(){Ci(this,"subPriority",0)}validate(e,t){return!0}}class tq extends OI{constructor(e,t,r,n,a){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=n,a&&(this.subPriority=a)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class iq extends OI{constructor(t,r){super();Ci(this,"priority",eq);Ci(this,"subPriority",-1);this.context=t||(n=>ss(r,n))}set(t,r){return r.timestampIsSet?t:ss(t,QH(t,this.context))}}class nn{run(e,t,r,n){const a=this.parse(e,t,r,n);return a?{setter:new tq(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,t,r){return!0}}class rq extends nn{constructor(){super(...arguments);Ci(this,"priority",140);Ci(this,"incompatibleTokens",["R","u","t","T"])}parse(t,r,n){switch(r){case"G":case"GG":case"GGG":return n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"});case"GGGGG":return n.era(t,{width:"narrow"});case"GGGG":default:return n.era(t,{width:"wide"})||n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"})}}set(t,r,n){return r.era=n,t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}}const fs={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ol={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ms(i,e){return i&&{value:e(i.value),rest:i.rest}}function Yn(i,e){const t=e.match(i);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function jl(i,e){const t=e.match(i);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,n=t[2]?parseInt(t[2],10):0,a=t[3]?parseInt(t[3],10):0,c=t[5]?parseInt(t[5],10):0;return{value:r*(n*xx+a*vx+c*NG),rest:e.slice(t[0].length)}}function jI(i){return Yn(fs.anyDigitsSigned,i)}function as(i,e){switch(i){case 1:return Yn(fs.singleDigit,e);case 2:return Yn(fs.twoDigits,e);case 3:return Yn(fs.threeDigits,e);case 4:return Yn(fs.fourDigits,e);default:return Yn(new RegExp("^\\d{1,"+i+"}"),e)}}function pv(i,e){switch(i){case 1:return Yn(fs.singleDigitSigned,e);case 2:return Yn(fs.twoDigitsSigned,e);case 3:return Yn(fs.threeDigitsSigned,e);case 4:return Yn(fs.fourDigitsSigned,e);default:return Yn(new RegExp("^-?\\d{1,"+i+"}"),e)}}function q2(i){switch(i){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function FI(i,e){const t=e>0,r=t?e:1-e;let n;if(r<=50)n=i||100;else{const a=r+50,c=Math.trunc(a/100)*100,s=i>=a%100;n=i+c-(s?100:0)}return t?n:1-n}function BI(i){return i%400===0||i%4===0&&i%100!==0}class nq extends nn{constructor(){super(...arguments);Ci(this,"priority",130);Ci(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,r,n){const a=c=>({year:c,isTwoDigitYear:r==="yy"});switch(r){case"y":return ms(as(4,t),a);case"yo":return ms(n.ordinalNumber(t,{unit:"year"}),a);default:return ms(as(r.length,t),a)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,n){const a=t.getFullYear();if(n.isTwoDigitYear){const s=FI(n.year,a);return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}const c=!("era"in r)||r.era===1?n.year:1-n.year;return t.setFullYear(c,0,1),t.setHours(0,0,0,0),t}}class sq extends nn{constructor(){super(...arguments);Ci(this,"priority",130);Ci(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,r,n){const a=c=>({year:c,isTwoDigitYear:r==="YY"});switch(r){case"Y":return ms(as(4,t),a);case"Yo":return ms(n.ordinalNumber(t,{unit:"year"}),a);default:return ms(as(r.length,t),a)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,n,a){const c=G2(t,a);if(n.isTwoDigitYear){const h=FI(n.year,c);return t.setFullYear(h,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),Fu(t,a)}const s=!("era"in r)||r.era===1?n.year:1-n.year;return t.setFullYear(s,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),Fu(t,a)}}class aq extends nn{constructor(){super(...arguments);Ci(this,"priority",130);Ci(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,r){return pv(r==="R"?4:r.length,t)}set(t,r,n){const a=ss(t,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),Oc(a)}}class oq extends nn{constructor(){super(...arguments);Ci(this,"priority",130);Ci(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,r){return pv(r==="u"?4:r.length,t)}set(t,r,n){return t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}}class lq extends nn{constructor(){super(...arguments);Ci(this,"priority",120);Ci(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,n){switch(r){case"Q":case"QQ":return as(r.length,t);case"Qo":return n.ordinalNumber(t,{unit:"quarter"});case"QQQ":return n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(t,{width:"wide",context:"formatting"})||n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,n){return t.setMonth((n-1)*3,1),t.setHours(0,0,0,0),t}}class cq extends nn{constructor(){super(...arguments);Ci(this,"priority",120);Ci(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,n){switch(r){case"q":case"qq":return as(r.length,t);case"qo":return n.ordinalNumber(t,{unit:"quarter"});case"qqq":return n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(t,{width:"wide",context:"standalone"})||n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,n){return t.setMonth((n-1)*3,1),t.setHours(0,0,0,0),t}}class uq extends nn{constructor(){super(...arguments);Ci(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Ci(this,"priority",110)}parse(t,r,n){const a=c=>c-1;switch(r){case"M":return ms(Yn(fs.month,t),a);case"MM":return ms(as(2,t),a);case"Mo":return ms(n.ordinalNumber(t,{unit:"month"}),a);case"MMM":return n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(t,{width:"wide",context:"formatting"})||n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.setMonth(n,1),t.setHours(0,0,0,0),t}}class dq extends nn{constructor(){super(...arguments);Ci(this,"priority",110);Ci(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,r,n){const a=c=>c-1;switch(r){case"L":return ms(Yn(fs.month,t),a);case"LL":return ms(as(2,t),a);case"Lo":return ms(n.ordinalNumber(t,{unit:"month"}),a);case"LLL":return n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(t,{width:"wide",context:"standalone"})||n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.setMonth(n,1),t.setHours(0,0,0,0),t}}function hq(i,e,t){const r=Dr(i,t==null?void 0:t.in),n=RI(r,t)-e;return r.setDate(r.getDate()-n*7),Dr(r,t==null?void 0:t.in)}class pq extends nn{constructor(){super(...arguments);Ci(this,"priority",100);Ci(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,r,n){switch(r){case"w":return Yn(fs.week,t);case"wo":return n.ordinalNumber(t,{unit:"week"});default:return as(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,n,a){return Fu(hq(t,n,a),a)}}function fq(i,e,t){const r=Dr(i,t==null?void 0:t.in),n=V2(r,t)-e;return r.setDate(r.getDate()-n*7),r}class mq extends nn{constructor(){super(...arguments);Ci(this,"priority",100);Ci(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,r,n){switch(r){case"I":return Yn(fs.week,t);case"Io":return n.ordinalNumber(t,{unit:"week"});default:return as(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,n){return Oc(fq(t,n))}}const gq=[31,28,31,30,31,30,31,31,30,31,30,31],yq=[31,29,31,30,31,30,31,31,30,31,30,31];class vq extends nn{constructor(){super(...arguments);Ci(this,"priority",90);Ci(this,"subPriority",1);Ci(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,r,n){switch(r){case"d":return Yn(fs.date,t);case"do":return n.ordinalNumber(t,{unit:"date"});default:return as(r.length,t)}}validate(t,r){const n=t.getFullYear(),a=BI(n),c=t.getMonth();return a?r>=1&&r<=yq[c]:r>=1&&r<=gq[c]}set(t,r,n){return t.setDate(n),t.setHours(0,0,0,0),t}}class xq extends nn{constructor(){super(...arguments);Ci(this,"priority",90);Ci(this,"subpriority",1);Ci(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,r,n){switch(r){case"D":case"DD":return Yn(fs.dayOfYear,t);case"Do":return n.ordinalNumber(t,{unit:"date"});default:return as(r.length,t)}}validate(t,r){const n=t.getFullYear();return BI(n)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,n){return t.setMonth(0,n),t.setHours(0,0,0,0),t}}function W2(i,e,t){var y,g,x,v;const r=hh(),n=(t==null?void 0:t.weekStartsOn)??((g=(y=t==null?void 0:t.locale)==null?void 0:y.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((v=(x=r.locale)==null?void 0:x.options)==null?void 0:v.weekStartsOn)??0,a=Dr(i,t==null?void 0:t.in),c=a.getDay(),h=(e%7+7)%7,p=7-n,m=e<0||e>6?e-(c+p)%7:(h+p)%7-(c+p)%7;return bx(a,m,t)}class bq extends nn{constructor(){super(...arguments);Ci(this,"priority",90);Ci(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,r,n){switch(r){case"E":case"EE":case"EEE":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,a){return t=W2(t,n,a),t.setHours(0,0,0,0),t}}class wq extends nn{constructor(){super(...arguments);Ci(this,"priority",90);Ci(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,r,n,a){const c=s=>{const h=Math.floor((s-1)/7)*7;return(s+a.weekStartsOn+6)%7+h};switch(r){case"e":case"ee":return ms(as(r.length,t),c);case"eo":return ms(n.ordinalNumber(t,{unit:"day"}),c);case"eee":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeeee":return n.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,a){return t=W2(t,n,a),t.setHours(0,0,0,0),t}}class _q extends nn{constructor(){super(...arguments);Ci(this,"priority",90);Ci(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,r,n,a){const c=s=>{const h=Math.floor((s-1)/7)*7;return(s+a.weekStartsOn+6)%7+h};switch(r){case"c":case"cc":return ms(as(r.length,t),c);case"co":return ms(n.ordinalNumber(t,{unit:"day"}),c);case"ccc":return n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"ccccc":return n.day(t,{width:"narrow",context:"standalone"});case"cccccc":return n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(t,{width:"wide",context:"standalone"})||n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,a){return t=W2(t,n,a),t.setHours(0,0,0,0),t}}function Cq(i,e,t){const r=Dr(i,t==null?void 0:t.in),n=ZH(r,t),a=e-n;return bx(r,a,t)}class Tq extends nn{constructor(){super(...arguments);Ci(this,"priority",90);Ci(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,r,n){const a=c=>c===0?7:c;switch(r){case"i":case"ii":return as(r.length,t);case"io":return n.ordinalNumber(t,{unit:"day"});case"iii":return ms(n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),a);case"iiiii":return ms(n.day(t,{width:"narrow",context:"formatting"}),a);case"iiiiii":return ms(n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),a);case"iiii":default:return ms(n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),a)}}validate(t,r){return r>=1&&r<=7}set(t,r,n){return t=Cq(t,n),t.setHours(0,0,0,0),t}}class Sq extends nn{constructor(){super(...arguments);Ci(this,"priority",80);Ci(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,r,n){switch(r){case"a":case"aa":case"aaa":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(q2(n),0,0,0),t}}class Eq extends nn{constructor(){super(...arguments);Ci(this,"priority",80);Ci(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,r,n){switch(r){case"b":case"bb":case"bbb":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(q2(n),0,0,0),t}}class kq extends nn{constructor(){super(...arguments);Ci(this,"priority",80);Ci(this,"incompatibleTokens",["a","b","t","T"])}parse(t,r,n){switch(r){case"B":case"BB":case"BBB":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(q2(n),0,0,0),t}}class Mq extends nn{constructor(){super(...arguments);Ci(this,"priority",70);Ci(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,r,n){switch(r){case"h":return Yn(fs.hour12h,t);case"ho":return n.ordinalNumber(t,{unit:"hour"});default:return as(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,n){const a=t.getHours()>=12;return a&&n<12?t.setHours(n+12,0,0,0):!a&&n===12?t.setHours(0,0,0,0):t.setHours(n,0,0,0),t}}class Aq extends nn{constructor(){super(...arguments);Ci(this,"priority",70);Ci(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,r,n){switch(r){case"H":return Yn(fs.hour23h,t);case"Ho":return n.ordinalNumber(t,{unit:"hour"});default:return as(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,n){return t.setHours(n,0,0,0),t}}class Iq extends nn{constructor(){super(...arguments);Ci(this,"priority",70);Ci(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,r,n){switch(r){case"K":return Yn(fs.hour11h,t);case"Ko":return n.ordinalNumber(t,{unit:"hour"});default:return as(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.getHours()>=12&&n<12?t.setHours(n+12,0,0,0):t.setHours(n,0,0,0),t}}class Pq extends nn{constructor(){super(...arguments);Ci(this,"priority",70);Ci(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,r,n){switch(r){case"k":return Yn(fs.hour24h,t);case"ko":return n.ordinalNumber(t,{unit:"hour"});default:return as(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,n){const a=n<=24?n%24:n;return t.setHours(a,0,0,0),t}}class Dq extends nn{constructor(){super(...arguments);Ci(this,"priority",60);Ci(this,"incompatibleTokens",["t","T"])}parse(t,r,n){switch(r){case"m":return Yn(fs.minute,t);case"mo":return n.ordinalNumber(t,{unit:"minute"});default:return as(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,n){return t.setMinutes(n,0,0),t}}class Rq extends nn{constructor(){super(...arguments);Ci(this,"priority",50);Ci(this,"incompatibleTokens",["t","T"])}parse(t,r,n){switch(r){case"s":return Yn(fs.second,t);case"so":return n.ordinalNumber(t,{unit:"second"});default:return as(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,n){return t.setSeconds(n,0),t}}class Lq extends nn{constructor(){super(...arguments);Ci(this,"priority",30);Ci(this,"incompatibleTokens",["t","T"])}parse(t,r){const n=a=>Math.trunc(a*Math.pow(10,-r.length+3));return ms(as(r.length,t),n)}set(t,r,n){return t.setMilliseconds(n),t}}class Nq extends nn{constructor(){super(...arguments);Ci(this,"priority",10);Ci(this,"incompatibleTokens",["t","T","x"])}parse(t,r){switch(r){case"X":return jl(Ol.basicOptionalMinutes,t);case"XX":return jl(Ol.basic,t);case"XXXX":return jl(Ol.basicOptionalSeconds,t);case"XXXXX":return jl(Ol.extendedOptionalSeconds,t);case"XXX":default:return jl(Ol.extended,t)}}set(t,r,n){return r.timestampIsSet?t:ss(t,t.getTime()-hv(t)-n)}}class zq extends nn{constructor(){super(...arguments);Ci(this,"priority",10);Ci(this,"incompatibleTokens",["t","T","X"])}parse(t,r){switch(r){case"x":return jl(Ol.basicOptionalMinutes,t);case"xx":return jl(Ol.basic,t);case"xxxx":return jl(Ol.basicOptionalSeconds,t);case"xxxxx":return jl(Ol.extendedOptionalSeconds,t);case"xxx":default:return jl(Ol.extended,t)}}set(t,r,n){return r.timestampIsSet?t:ss(t,t.getTime()-hv(t)-n)}}class Oq extends nn{constructor(){super(...arguments);Ci(this,"priority",40);Ci(this,"incompatibleTokens","*")}parse(t){return jI(t)}set(t,r,n){return[ss(t,n*1e3),{timestampIsSet:!0}]}}class jq extends nn{constructor(){super(...arguments);Ci(this,"priority",20);Ci(this,"incompatibleTokens","*")}parse(t){return jI(t)}set(t,r,n){return[ss(t,n),{timestampIsSet:!0}]}}const Fq={G:new rq,y:new nq,Y:new sq,R:new aq,u:new oq,Q:new lq,q:new cq,M:new uq,L:new dq,w:new pq,I:new mq,d:new vq,D:new xq,E:new bq,e:new wq,c:new _q,i:new Tq,a:new Sq,b:new Eq,B:new kq,h:new Mq,H:new Aq,K:new Iq,k:new Pq,m:new Dq,s:new Rq,S:new Lq,X:new Nq,x:new zq,t:new Oq,T:new jq},Bq=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$q=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Uq=/^'([^]*?)'?$/,Vq=/''/g,Gq=/\S/,Hq=/[a-zA-Z]/;function fv(i,e,t,r){var C,k,w,E;const n=()=>ss(t,NaN),a=YH(),c=a.locale??U2,s=a.firstWeekContainsDate??((k=(C=a.locale)==null?void 0:C.options)==null?void 0:k.firstWeekContainsDate)??1,h=a.weekStartsOn??((E=(w=a.locale)==null?void 0:w.options)==null?void 0:E.weekStartsOn)??0;if(!e)return i?n():Dr(t,r==null?void 0:r.in);const p={firstWeekContainsDate:s,weekStartsOn:h,locale:c},m=[new iq(r==null?void 0:r.in,t)],y=e.match($q).map(A=>{const M=A[0];if(M in jw){const S=jw[M];return S(A,c.formatLong)}return A}).join("").match(Bq),g=[];for(let A of y){zI(A)&&Fw(A,e,i),NI(A)&&Fw(A,e,i);const M=A[0],S=Fq[M];if(S){const{incompatibleTokens:N}=S;if(Array.isArray(N)){const Z=g.find(K=>N.includes(K.token)||K.token===M);if(Z)throw new RangeError(`The format string mustn't contain \`${Z.fullToken}\` and \`${A}\` at the same time`)}else if(S.incompatibleTokens==="*"&&g.length>0)throw new RangeError(`The format string mustn't contain \`${A}\` and any other token at the same time`);g.push({token:M,fullToken:A});const Y=S.run(i,A,c.match,p);if(!Y)return n();m.push(Y.setter),i=Y.rest}else{if(M.match(Hq))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");if(A==="''"?A="'":M==="'"&&(A=qq(A)),i.indexOf(A)===0)i=i.slice(A.length);else return n()}}if(i.length>0&&Gq.test(i))return n();const x=m.map(A=>A.priority).sort((A,M)=>M-A).filter((A,M,S)=>S.indexOf(A)===M).map(A=>m.filter(M=>M.priority===A).sort((M,S)=>S.subPriority-M.subPriority)).map(A=>A[0]);let v=Dr(t,r==null?void 0:r.in);if(isNaN(+v))return n();const _={};for(const A of x){if(!A.validate(v,p))return n();const M=A.set(v,_,p);Array.isArray(M)?(v=M[0],Object.assign(_,M[1])):v=M}return v}function qq(i){return i.match(Uq)[1].replace(Vq,"'")}function Wq(i,e,t){const[r,n]=sc(t==null?void 0:t.in,i,e);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function Yq(i,e,t){const[r,n]=sc(t==null?void 0:t.in,i,e);return r.getFullYear()===n.getFullYear()}function jE(i,e){const t=()=>ss(e==null?void 0:e.in,NaN),n=Qq(i);let a;if(n.date){const p=Jq(n.date,2);a=eW(p.restDateString,p.year)}if(!a||isNaN(+a))return t();const c=+a;let s=0,h;if(n.time&&(s=tW(n.time),isNaN(s)))return t();if(n.timezone){if(h=iW(n.timezone),isNaN(h))return t()}else{const p=new Date(c+s),m=Dr(0,e==null?void 0:e.in);return m.setFullYear(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()),m.setHours(p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds()),m}return Dr(c+s+h,e==null?void 0:e.in)}const l0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Zq=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Xq=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Kq=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Qq(i){const e={},t=i.split(l0.dateTimeDelimiter);let r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],l0.timeZoneDelimiter.test(e.date)&&(e.date=i.split(l0.timeZoneDelimiter)[0],r=i.substr(e.date.length,i.length))),r){const n=l0.timezone.exec(r);n?(e.time=r.replace(n[1],""),e.timezone=n[1]):e.time=r}return e}function Jq(i,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=i.match(t);if(!r)return{year:NaN,restDateString:""};const n=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?n:a*100,restDateString:i.slice((r[1]||r[2]).length)}}function eW(i,e){if(e===null)return new Date(NaN);const t=i.match(Zq);if(!t)return new Date(NaN);const r=!!t[4],n=cm(t[1]),a=cm(t[2])-1,c=cm(t[3]),s=cm(t[4]),h=cm(t[5])-1;if(r)return oW(e,s,h)?rW(e,s,h):new Date(NaN);{const p=new Date(0);return!sW(e,a,c)||!aW(e,n)?new Date(NaN):(p.setUTCFullYear(e,a,Math.max(n,c)),p)}}function cm(i){return i?parseInt(i):1}function tW(i){const e=i.match(Xq);if(!e)return NaN;const t=n1(e[1]),r=n1(e[2]),n=n1(e[3]);return lW(t,r,n)?t*xx+r*vx+n*1e3:NaN}function n1(i){return i&&parseFloat(i.replace(",","."))||0}function iW(i){if(i==="Z")return 0;const e=i.match(Kq);if(!e)return 0;const t=e[1]==="+"?-1:1,r=parseInt(e[2]),n=e[3]&&parseInt(e[3])||0;return cW(r,n)?t*(r*xx+n*vx):NaN}function rW(i,e,t){const r=new Date(0);r.setUTCFullYear(i,0,4);const n=r.getUTCDay()||7,a=(e-1)*7+t+1-n;return r.setUTCDate(r.getUTCDate()+a),r}const nW=[31,null,31,30,31,30,31,31,30,31,30,31];function $I(i){return i%400===0||i%4===0&&i%100!==0}function sW(i,e,t){return e>=0&&e<=11&&t>=1&&t<=(nW[e]||($I(i)?29:28))}function aW(i,e){return e>=1&&e<=($I(i)?366:365)}function oW(i,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function lW(i,e,t){return i===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&i>=0&&i<25}function cW(i,e){return e>=0&&e<=59}const Y2=(i,e,t)=>t==="week"?uW(i,e):t==="month"?dW(i,e):(console.error("Invalid period type:",t),[]),uW=(i,e)=>{try{const t=fv(i,"RRRR-'W'II",new Date),r=fv(e,"RRRR-'W'II",new Date);if(!ag(t)||!ag(r))return console.error("Invalid date format provided for weeks:",{start:i,end:e}),[];if($m(r)-$m(t)>100)return[];const a=[];let c=Oc(t);const s=Oc(r);for(;!H2(c,s);){const h=$m(c),p=V2(c),m=`${h}W${String(p).padStart(2,"0")}`,y=Oc(c),g=eH(c);a.push({endDate:new Date(Zd(g,"yyyy-MM-dd")),startDate:new Date(Zd(y,"yyyy-MM-dd")),id:m}),c=jG(c,1)}return a}catch(t){return console.error("Error parsing week dates:",t),[]}},dW=(i,e)=>{try{const t=fv(i,"yyyy-MM",new Date),r=fv(e,"yyyy-MM",new Date);if(!ag(t)||!ag(r))return console.error("Invalid date format provided for months:",{start:i,end:e}),[];if(r.getFullYear()-t.getFullYear()>100)return[];const a=[];let c=t;for(;H2(r,c)||Yq(c,r)&&Wq(c,r);){const s=Zd(c,"yyyyMM"),h=KG(c),p=DI(c);a.push({id:s,endDate:new Date(Zd(p,"yyyy-MM-dd")),startDate:new Date(Zd(h,"yyyy-MM-dd"))}),c=AI(c,1)}return a}catch(t){return console.error("Error parsing month dates:",t),[]}},UI=({setTimePeriods:i})=>{const[e,t]=Ie.useState(""),[r,n]=Ie.useState(""),[a,c]=Ie.useState(""),s=h=>{n(""),c(""),t(h)};return Ie.useEffect(()=>{i(Y2(r,a,e))},[r,a]),z.jsxs("div",{children:[z.jsx("h3",{children:"Period"}),z.jsxs("div",{className:o0.timePeriodeSelector,children:[z.jsx(TG,{value:e,onChange:s}),z.jsxs("div",{className:o0.timePeriodeSelectorInputFields,children:[z.jsx("div",{className:o0.timePeriodeSelectorInputFieldsChild,children:z.jsx(IE,{periodeType:e,label:"Dateset start:",name:"",onChange:n})}),z.jsx("div",{className:o0.timePeriodeSelectorInputFieldsChild,children:z.jsx(IE,{periodeType:e,label:"Dateset end:",name:"",onChange:c})})]})]})]})},hW="_error_1rljs_1",pW={error:hW},fW={roots:{resource:"organisationUnits",params:()=>({fields:["id","displayName~rename(name)","path"],userDataViewFallback:!0})}},mW=()=>{var r;const{loading:i,error:e,data:t}=eo(fW);return{roots:(r=t==null?void 0:t.roots)==null?void 0:r.organisationUnits,error:e,loading:i}},gW=({selectedOrgUnits:i,onChange:e})=>{const{roots:t,error:r}=mW();return Ie.useEffect(()=>{if(t&&!i){const[n]=t;e({...n,selected:[n.path]})}},[t]),t?z.jsxs("div",{children:[z.jsx("h3",{children:ve.t("Organisation units")}),z.jsx(w2,{roots:t.map(n=>n.id),selected:i==null?void 0:i.map(n=>n.path),onChange:e,initiallyExpanded:t.map(n=>n.path)})]}):r?z.jsx("div",{children:r.message}):null},yW={levels:{resource:"organisationUnitLevels",params:{fields:["id","displayName~rename(name)","level"],order:"level:asc",paging:!1}}},vW=()=>{var r;const{loading:i,error:e,data:t}=eo(yW);return{levels:(r=t==null?void 0:t.levels)==null?void 0:r.organisationUnitLevels,error:e,loading:i}},xW="_selectField_2clxr_1",bW={selectField:xW},wW=({orgUnitLevels:i,onChange:e})=>{const{levels:t,loading:r,error:n}=vW(),a=c=>{const s={id:c.selected,level:t.find(h=>h.id===c.selected).level};e(s)};return Ie.useEffect(()=>{var c;(t==null?void 0:t.length)>2&&!i&&e({id:(c=t[1])==null?void 0:c.id,level:t[1].level})},[t,i,e]),t?z.jsx("div",{className:bW.selectField,children:z.jsx(hs,{label:ve.t("Organisation unit level"),helpText:ve.t("Organisation unit level to import data to"),tabIndex:"1",selected:i==null?void 0:i.id,loading:r,error:!!n,onChange:a,children:t.map(c=>z.jsx(As,{value:c.id,label:c.name},c.id))})}):null},VI=({setOrgUnits:i,orgUnits:e,orgUnitLevel:t,setOrgUnitLevel:r})=>{const n=c=>{c.checked?i([...e,c]):i(e.filter(s=>s.path!==c.path))};function a(){if(e.length===0)return!0;const c=e[0].path.split("/").length;return e.every(s=>s.path.split("/").length===c)}return z.jsxs(z.Fragment,{children:[z.jsx(gW,{selectedOrgUnits:e,onChange:c=>{n(c)}}),!a()&&z.jsx("p",{className:pW.error,children:"Only select organization units that are one the same level."}),z.jsx(wW,{orgUnitLevels:t,onChange:r})]})},_W=({dataElements:i=[],periodes:e=[],orgUnit:t={}}={})=>({request:{resource:"analytics",params:{paging:!1,dimension:`dx:${i.join(";")},ou:${t},pe:${e.join(";")}`}}}),CW=(i,e,t)=>{var s,h,p;const r=i.map(m=>m.dataSource);if(r.length===0)return{data:[],metaData:{},error:"",loading:!1};const{loading:n,error:a,data:c}=eo(_W({dataElements:r,periodes:e,orgUnit:t}));return!n&&c&&!a?{data:(s=c==null?void 0:c.request)==null?void 0:s.rows,metaData:(p=(h=c==null?void 0:c.request)==null?void 0:h.metaData)==null?void 0:p.items,error:a,loading:n}:{data:c,metaData:{},error:a,loading:n}},TW={geojson:{resource:"organisationUnits.geojson",params:({level:i})=>({level:i})}},SW=i=>({features:i.geojson.features.map(({type:e,id:t,geometry:r,properties:n})=>({type:e,id:t,properties:n,geometry:r})),...i}),EW=(i,e)=>({type:"FeatureCollection",features:i.features.filter(t=>e.some(r=>r.id===t.id||t.properties.parentGraph.includes(r.id)))}),kW=(i,e)=>{const{data:t,loading:r,error:n}=eo(TW,{variables:{level:i}});return{data:t&&EW(SW(t),e),error:n,loading:r}},MW="_text_b9rbg_1",AW={text:MW},IW=({selectedPeriodItems:i,setGeoJSon:e,setObservations:t,setFeatureDataItemMapper:r,setAnalyticsMetaData:n,setStartDownload:a,orgUnitLevel:c,selectedOrgUnits:s,analyticsDataLayers:h,setErrorMessages:p})=>{if(c==null)return z.jsx(z.Fragment,{});const m="LEVEL-"+c.id+";"+s.map(M=>M.id).join(";"),y=M=>M.map(S=>S.id),{data:g,error:x,loading:v,metaData:_}=CW(h,y(i),m),{data:C,error:k,loading:w}=kW(c.level,s),E=M=>M.map(S=>({featureName:h.filter(N=>N.dataSource===S)[0].feature,dataItemId:S})),A=M=>{const S=[...new Set(M.map(Y=>Y[0]))],N=E(S);return r(N),M.map(Y=>({featureName:N.filter(Z=>Z.dataItemId===Y[0])[0].featureName,orgUnit:Y[1],period:Y[2],value:parseFloat(Y[3])}))};return Ie.useEffect(()=>{if(!(v||w)&&(g&&C&&(p([]),e(C),t(A(g)),n(_)),x||k)){const M=[];x&&M.push({description:JSON.stringify(x),title:"Analytics request failed"}),k&&M.push({description:JSON.stringify(k),title:"OrgUnits request failed"}),p(M),a(S=>({...S,startDownload:!1}))}},[v,w]),z.jsx("p",{className:AW.text,children:"Downloading data.."})};var GI={exports:{}};(function(i){(function(e,t){i.exports?(t.default=t,i.exports=e&&e.document?t(e):t):(e.Highcharts&&e.Highcharts.error(16,!0),e.Highcharts=t(e))})(typeof window<"u"?window:Tn,function(e){var t={};function r(n,a,c,s){!n.hasOwnProperty(a)&&(n[a]=s.apply(null,c),e&&typeof CustomEvent=="function"&&e.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:a,module:n[a]}})))}return r(t,"Core/Globals.js",[],function(){var n,a;return(a=n||(n={})).SVG_NS="http://www.w3.org/2000/svg",a.product="Highcharts",a.version="11.4.8",a.win=e!==void 0?e:{},a.doc=a.win.document,a.svg=a.doc&&a.doc.createElementNS&&!!a.doc.createElementNS(a.SVG_NS,"svg").createSVGRect,a.userAgent=a.win.navigator&&a.win.navigator.userAgent||"",a.isChrome=a.win.chrome,a.isFirefox=a.userAgent.indexOf("Firefox")!==-1,a.isMS=/(edge|msie|trident)/i.test(a.userAgent)&&!a.win.opera,a.isSafari=!a.isChrome&&a.userAgent.indexOf("Safari")!==-1,a.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(a.userAgent),a.isWebKit=a.userAgent.indexOf("AppleWebKit")!==-1,a.deg2rad=2*Math.PI/360,a.hasBidiBug=a.isFirefox&&4>parseInt(a.userAgent.split("Firefox/")[1],10),a.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],a.noop=function(){},a.supportsPassiveEvents=function(){let c=!1;if(!a.isMS){let s=Object.defineProperty({},"passive",{get:function(){c=!0}});a.win.addEventListener&&a.win.removeEventListener&&(a.win.addEventListener("testPassive",a.noop,s),a.win.removeEventListener("testPassive",a.noop,s))}return c}(),a.charts=[],a.composed=[],a.dateFormats={},a.seriesTypes={},a.symbolSizes={},a.chartCount=0,n}),r(t,"Core/Utilities.js",[t["Core/Globals.js"]],function(n){let a,{charts:c,doc:s,win:h}=n;function p(R,L,G,F){let j=L?"Highcharts error":"Highcharts warning";R===32&&(R=`${j}: Deprecated member`);let q=C(R),W=q?`${j} #${R}: www.highcharts.com/errors/${R}/`:R.toString();if(F!==void 0){let se="";q&&(W+="?"),K(F,function(fe,ee){se+=`
 - ${ee}: ${fe}`,q&&(W+=encodeURI(ee)+"="+encodeURI(fe))}),W+=se}$(n,"displayError",{chart:G,code:R,message:W,params:F},function(){if(L)throw Error(W);h.console&&p.messages.indexOf(W)===-1&&console.warn(W)}),p.messages.push(W)}function m(R,L){return parseInt(R,L||10)}function y(R){return typeof R=="string"}function g(R){let L=Object.prototype.toString.call(R);return L==="[object Array]"||L==="[object Array Iterator]"}function x(R,L){return!!R&&typeof R=="object"&&(!L||!g(R))}function v(R){return x(R)&&typeof R.nodeType=="number"}function _(R){let L=R&&R.constructor;return!!(x(R,!0)&&!v(R)&&L&&L.name&&L.name!=="Object")}function C(R){return typeof R=="number"&&!isNaN(R)&&R<1/0&&R>-1/0}function k(R){return R!=null}function w(R,L,G){let F,j=y(L)&&!k(G),q=(W,se)=>{k(W)?R.setAttribute(se,W):j?(F=R.getAttribute(se))||se!=="class"||(F=R.getAttribute(se+"Name")):R.removeAttribute(se)};return y(L)?q(G,L):K(L,q),F}function E(R){return g(R)?R:[R]}function A(R,L){let G;for(G in R||(R={}),L)R[G]=L[G];return R}function M(){let R=arguments,L=R.length;for(let G=0;G<L;G++){let F=R[G];if(F!=null)return F}}function S(R,L){A(R.style,L)}function N(R){return Math.pow(10,Math.floor(Math.log(R)/Math.LN10))}function Y(R,L){return R>1e14?R:parseFloat(R.toPrecision(L||14))}(p||(p={})).messages=[],Math.easeInOutSine=function(R){return-.5*(Math.cos(Math.PI*R)-1)};let Z=Array.prototype.find?function(R,L){return R.find(L)}:function(R,L){let G,F=R.length;for(G=0;G<F;G++)if(L(R[G],G))return R[G]};function K(R,L,G){for(let F in R)Object.hasOwnProperty.call(R,F)&&L.call(G||R[F],R[F],F,R)}function U(R,L,G){function F(W,se){let fe=R.removeEventListener;fe&&fe.call(R,W,se,!1)}function j(W){let se,fe;R.nodeName&&(L?(se={})[L]=!0:se=W,K(se,function(ee,oe){if(W[oe])for(fe=W[oe].length;fe--;)F(oe,W[oe][fe].fn)}))}let q=typeof R=="function"&&R.prototype||R;if(Object.hasOwnProperty.call(q,"hcEvents")){let W=q.hcEvents;if(L){let se=W[L]||[];G?(W[L]=se.filter(function(fe){return G!==fe.fn}),F(L,G)):(j(W),W[L]=[])}else j(W),delete q.hcEvents}}function $(R,L,G,F){if(G=G||{},s.createEvent&&(R.dispatchEvent||R.fireEvent&&R!==n)){let j=s.createEvent("Events");j.initEvent(L,!0,!0),G=A(j,G),R.dispatchEvent?R.dispatchEvent(G):R.fireEvent(L,G)}else if(R.hcEvents){G.target||A(G,{preventDefault:function(){G.defaultPrevented=!0},target:R,type:L});let j=[],q=R,W=!1;for(;q.hcEvents;)Object.hasOwnProperty.call(q,"hcEvents")&&q.hcEvents[L]&&(j.length&&(W=!0),j.unshift.apply(j,q.hcEvents[L])),q=Object.getPrototypeOf(q);W&&j.sort((se,fe)=>se.order-fe.order),j.forEach(se=>{se.fn.call(R,G)===!1&&G.preventDefault()})}F&&!G.defaultPrevented&&F.call(R,G)}K({map:"map",each:"forEach",grep:"filter",reduce:"reduce",some:"some"},function(R,L){n[L]=function(G){return p(32,!1,void 0,{[`Highcharts.${L}`]:`use Array.${R}`}),Array.prototype[R].apply(G,[].slice.call(arguments,1))}});let B=function(){let R=Math.random().toString(36).substring(2,9)+"-",L=0;return function(){return"highcharts-"+(a?"":R)+L++}}();return h.jQuery&&(h.jQuery.fn.highcharts=function(){let R=[].slice.call(arguments);if(this[0])return R[0]?(new n[y(R[0])?R.shift():"Chart"](this[0],R[0],R[1]),this):c[w(this[0],"data-highcharts-chart")]}),{addEvent:function(R,L,G,F={}){let j=typeof R=="function"&&R.prototype||R;Object.hasOwnProperty.call(j,"hcEvents")||(j.hcEvents={});let q=j.hcEvents;n.Point&&R instanceof n.Point&&R.series&&R.series.chart&&(R.series.chart.runTrackerClick=!0);let W=R.addEventListener;W&&W.call(R,L,G,!!n.supportsPassiveEvents&&{passive:F.passive===void 0?L.indexOf("touch")!==-1:F.passive,capture:!1}),q[L]||(q[L]=[]);let se={fn:G,order:typeof F.order=="number"?F.order:1/0};return q[L].push(se),q[L].sort((fe,ee)=>fe.order-ee.order),function(){U(R,L,G)}},arrayMax:function(R){let L=R.length,G=R[0];for(;L--;)R[L]>G&&(G=R[L]);return G},arrayMin:function(R){let L=R.length,G=R[0];for(;L--;)R[L]<G&&(G=R[L]);return G},attr:w,clamp:function(R,L,G){return R>L?R<G?R:G:L},clearTimeout:function(R){k(R)&&clearTimeout(R)},correctFloat:Y,createElement:function(R,L,G,F,j){let q=s.createElement(R);return L&&A(q,L),j&&S(q,{padding:"0",border:"none",margin:"0"}),G&&S(q,G),F&&F.appendChild(q),q},crisp:(R,L=0,G)=>{let F=L%2/2,j=G?-1:1;return(Math.round(R*j-F)+F)*j},css:S,defined:k,destroyObjectProperties:function(R,L,G){K(R,function(F,j){F!==L&&(F!=null&&F.destroy)&&F.destroy(),(F!=null&&F.destroy||!G)&&delete R[j]})},diffObjects:function(R,L,G,F){let j={};return function q(W,se,fe,ee){let oe=G?se:W;K(W,function(Ce,ge){if(!ee&&F&&F.indexOf(ge)>-1&&se[ge]){Ce=E(Ce),fe[ge]=[];for(let Ee=0;Ee<Math.max(Ce.length,se[ge].length);Ee++)se[ge][Ee]&&(Ce[Ee]===void 0?fe[ge][Ee]=se[ge][Ee]:(fe[ge][Ee]={},q(Ce[Ee],se[ge][Ee],fe[ge][Ee],ee+1)))}else x(Ce,!0)&&!Ce.nodeType?(fe[ge]=g(Ce)?[]:{},q(Ce,se[ge]||{},fe[ge],ee+1),Object.keys(fe[ge]).length!==0||ge==="colorAxis"&&ee===0||delete fe[ge]):(W[ge]!==se[ge]||ge in W&&!(ge in se))&&ge!=="__proto__"&&ge!=="constructor"&&(fe[ge]=oe[ge])})}(R,L,j,0),j},discardElement:function(R){R&&R.parentElement&&R.parentElement.removeChild(R)},erase:function(R,L){let G=R.length;for(;G--;)if(R[G]===L){R.splice(G,1);break}},error:p,extend:A,extendClass:function(R,L){let G=function(){};return G.prototype=new R,A(G.prototype,L),G},find:Z,fireEvent:$,getClosestDistance:function(R,L){let G,F,j,q=!L;return R.forEach(W=>{if(W.length>1)for(j=W.length-1;j>0;j--)(F=W[j]-W[j-1])<0&&!q?(L==null||L(),L=void 0):F&&(G===void 0||F<G)&&(G=F)}),G},getMagnitude:N,getNestedProperty:function(R,L){let G=R.split(".");for(;G.length&&k(L);){let F=G.shift();if(F===void 0||F==="__proto__")return;if(F==="this"){let q;return x(L)&&(q=L["@this"]),q??L}let j=L[F];if(!k(j)||typeof j=="function"||typeof j.nodeType=="number"||j===h)return;L=j}return L},getStyle:function R(L,G,F){let j;if(G==="width"){let W=Math.min(L.offsetWidth,L.scrollWidth),se=L.getBoundingClientRect&&L.getBoundingClientRect().width;return se<W&&se>=W-1&&(W=Math.floor(se)),Math.max(0,W-(R(L,"padding-left",!0)||0)-(R(L,"padding-right",!0)||0))}if(G==="height")return Math.max(0,Math.min(L.offsetHeight,L.scrollHeight)-(R(L,"padding-top",!0)||0)-(R(L,"padding-bottom",!0)||0));let q=h.getComputedStyle(L,void 0);return q&&(j=q.getPropertyValue(G),M(F,G!=="opacity")&&(j=m(j))),j},inArray:function(R,L,G){return p(32,!1,void 0,{"Highcharts.inArray":"use Array.indexOf"}),L.indexOf(R,G)},insertItem:function(R,L){let G,F=R.options.index,j=L.length;for(G=R.options.isInternal?j:0;G<j+1;G++)if(!L[G]||C(F)&&F<M(L[G].options.index,L[G]._i)||L[G].options.isInternal){L.splice(G,0,R);break}return G},isArray:g,isClass:_,isDOMElement:v,isFunction:function(R){return typeof R=="function"},isNumber:C,isObject:x,isString:y,keys:function(R){return p(32,!1,void 0,{"Highcharts.keys":"use Object.keys"}),Object.keys(R)},merge:function(){let R,L=arguments,G={},F=function(q,W){return typeof q!="object"&&(q={}),K(W,function(se,fe){fe!=="__proto__"&&fe!=="constructor"&&(!x(se,!0)||_(se)||v(se)?q[fe]=W[fe]:q[fe]=F(q[fe]||{},se))}),q};L[0]===!0&&(G=L[1],L=Array.prototype.slice.call(L,2));let j=L.length;for(R=0;R<j;R++)G=F(G,L[R]);return G},normalizeTickInterval:function(R,L,G,F,j){let q,W=R;G=M(G,N(R));let se=R/G;for(!L&&(L=j?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],F===!1&&(G===1?L=L.filter(function(fe){return fe%1==0}):G<=.1&&(L=[1/G]))),q=0;q<L.length&&(W=L[q],(!j||!(W*G>=R))&&(j||!(se<=(L[q]+(L[q+1]||L[q]))/2)));q++);return Y(W*G,-Math.round(Math.log(.001)/Math.LN10))},objectEach:K,offset:function(R){let L=s.documentElement,G=R.parentElement||R.parentNode?R.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:G.top+(h.pageYOffset||L.scrollTop)-(L.clientTop||0),left:G.left+(h.pageXOffset||L.scrollLeft)-(L.clientLeft||0),width:G.width,height:G.height}},pad:function(R,L,G){return Array((L||2)+1-String(R).replace("-","").length).join(G||"0")+R},pick:M,pInt:m,pushUnique:function(R,L){return 0>R.indexOf(L)&&!!R.push(L)},relativeLength:function(R,L,G){return/%$/.test(R)?L*parseFloat(R)/100+(G||0):parseFloat(R)},removeEvent:U,replaceNested:function(R,...L){let G,F;do for(F of(G=R,L))R=R.replace(F[0],F[1]);while(R!==G);return R},splat:E,stableSort:function(R,L){let G,F,j=R.length;for(F=0;F<j;F++)R[F].safeI=F;for(R.sort(function(q,W){return(G=L(q,W))===0?q.safeI-W.safeI:G}),F=0;F<j;F++)delete R[F].safeI},syncTimeout:function(R,L,G){return L>0?setTimeout(R,L,G):(R.call(0,G),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},uniqueKey:B,useSerialIds:function(R){return a=M(R,a)},wrap:function(R,L,G){let F=R[L];R[L]=function(){let j=arguments,q=this;return G.apply(this,[function(){return F.apply(q,arguments.length?arguments:j)}].concat([].slice.call(arguments)))}}}}),r(t,"Core/Chart/ChartDefaults.js",[],function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}}),r(t,"Core/Color/Palettes.js",[],function(){return{colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"]}}),r(t,"Core/Time.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let{win:c}=n,{defined:s,error:h,extend:p,isNumber:m,isObject:y,merge:g,objectEach:x,pad:v,pick:_,splat:C,timeUnits:k}=a,w=n.isSafari&&c.Intl&&c.Intl.DateTimeFormat.prototype.formatRange,E=n.isSafari&&c.Intl&&!c.Intl.DateTimeFormat.prototype.formatRange;class A{constructor(S){this.options={},this.useUTC=!1,this.variableTimezone=!1,this.Date=c.Date,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.update(S)}get(S,N){if(this.variableTimezone||this.timezoneOffset){let Y=N.getTime(),Z=Y-this.getTimezoneOffset(N);N.setTime(Z);let K=N["getUTC"+S]();return N.setTime(Y),K}return this.useUTC?N["getUTC"+S]():N["get"+S]()}set(S,N,Y){if(this.variableTimezone||this.timezoneOffset){if(S==="Milliseconds"||S==="Seconds"||S==="Minutes"&&this.getTimezoneOffset(N)%36e5==0)return N["setUTC"+S](Y);let Z=this.getTimezoneOffset(N),K=N.getTime()-Z;N.setTime(K),N["setUTC"+S](Y);let U=this.getTimezoneOffset(N);return K=N.getTime()+U,N.setTime(K)}return this.useUTC||w&&S==="FullYear"?N["setUTC"+S](Y):N["set"+S](Y)}update(S={}){let N=_(S.useUTC,!0);this.options=S=g(!0,this.options,S),this.Date=S.Date||c.Date||Date,this.useUTC=N,this.timezoneOffset=N&&S.timezoneOffset||void 0,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.variableTimezone=N&&!!(S.getTimezoneOffset||S.timezone)}makeTime(S,N,Y,Z,K,U){let $,B,R;return this.useUTC?($=this.Date.UTC.apply(0,arguments),B=this.getTimezoneOffset($),$+=B,B!==(R=this.getTimezoneOffset($))?$+=R-B:B-36e5!==this.getTimezoneOffset($-36e5)||E||($-=36e5)):$=new this.Date(S,N,_(Y,1),_(Z,0),_(K,0),_(U,0)).getTime(),$}timezoneOffsetFunction(){let S=this,N=this.options,Y=N.getTimezoneOffset;return this.useUTC?N.timezone?Z=>{try{let K=`shortOffset,${N.timezone||""}`,[U,$,B,R,L=0]=(A.formatCache[K]=A.formatCache[K]||Intl.DateTimeFormat("en",{timeZone:N.timezone,timeZoneName:"shortOffset"})).format(Z).split(/(GMT|:)/).map(Number),G=-(36e5*(B+L/60));if(m(G))return G}catch{h(34)}return 0}:this.useUTC&&Y?Z=>6e4*Y(Z.valueOf()):()=>6e4*(S.timezoneOffset||0):Z=>6e4*new Date(Z.toString()).getTimezoneOffset()}dateFormat(S,N,Y){if(!s(N)||isNaN(N))return n.defaultOptions.lang&&n.defaultOptions.lang.invalidDate||"";S=_(S,"%Y-%m-%d %H:%M:%S");let Z=this,K=new this.Date(N),U=this.get("Hours",K),$=this.get("Day",K),B=this.get("Date",K),R=this.get("Month",K),L=this.get("FullYear",K),G=n.defaultOptions.lang,F=G&&G.weekdays,j=G&&G.shortWeekdays;return x(p({a:j?j[$]:F[$].substr(0,3),A:F[$],d:v(B),e:v(B,2," "),w:$,b:G.shortMonths[R],B:G.months[R],m:v(R+1),o:R+1,y:L.toString().substr(2,2),Y:L,H:v(U),k:U,I:v(U%12||12),l:U%12||12,M:v(this.get("Minutes",K)),p:U<12?"AM":"PM",P:U<12?"am":"pm",S:v(this.get("Seconds",K)),L:v(Math.floor(N%1e3),3)},n.dateFormats),function(q,W){for(;S.indexOf("%"+W)!==-1;)S=S.replace("%"+W,typeof q=="function"?q.call(Z,N):q)}),Y?S.substr(0,1).toUpperCase()+S.substr(1):S}resolveDTLFormat(S){return y(S,!0)?S:{main:(S=C(S))[0],from:S[1],to:S[2]}}getTimeTicks(S,N,Y,Z){let K,U,$,B,R=this,L=R.Date,G=[],F={},j=new L(N),q=S.unitRange,W=S.count||1;if(Z=_(Z,1),s(N)){R.set("Milliseconds",j,q>=k.second?0:W*Math.floor(R.get("Milliseconds",j)/W)),q>=k.second&&R.set("Seconds",j,q>=k.minute?0:W*Math.floor(R.get("Seconds",j)/W)),q>=k.minute&&R.set("Minutes",j,q>=k.hour?0:W*Math.floor(R.get("Minutes",j)/W)),q>=k.hour&&R.set("Hours",j,q>=k.day?0:W*Math.floor(R.get("Hours",j)/W)),q>=k.day&&R.set("Date",j,q>=k.month?1:Math.max(1,W*Math.floor(R.get("Date",j)/W))),q>=k.month&&(R.set("Month",j,q>=k.year?0:W*Math.floor(R.get("Month",j)/W)),U=R.get("FullYear",j)),q>=k.year&&(U-=U%W,R.set("FullYear",j,U)),q===k.week&&(B=R.get("Day",j),R.set("Date",j,R.get("Date",j)-B+Z+(B<Z?-7:0))),U=R.get("FullYear",j);let se=R.get("Month",j),fe=R.get("Date",j),ee=R.get("Hours",j);N=j.getTime(),(R.variableTimezone||!R.useUTC)&&s(Y)&&($=Y-N>4*k.month||R.getTimezoneOffset(N)!==R.getTimezoneOffset(Y));let oe=j.getTime();for(K=1;oe<Y;)G.push(oe),q===k.year?oe=R.makeTime(U+K*W,0):q===k.month?oe=R.makeTime(U,se+K*W):$&&(q===k.day||q===k.week)?oe=R.makeTime(U,se,fe+K*W*(q===k.day?1:7)):$&&q===k.hour&&W>1?oe=R.makeTime(U,se,fe,ee+K*W):oe+=q*W,K++;G.push(oe),q<=k.hour&&G.length<1e4&&G.forEach(function(Ce){Ce%18e5==0&&R.dateFormat("%H%M%S%L",Ce)==="000000000"&&(F[Ce]="day")})}return G.info=p(S,{higherRanks:F,totalRange:q*W}),G}getDateFormat(S,N,Y,Z){let K=this.dateFormat("%m-%d %H:%M:%S.%L",N),U="01-01 00:00:00.000",$={millisecond:15,second:12,minute:9,hour:6,day:3},B="millisecond",R=B;for(B in k){if(S===k.week&&+this.dateFormat("%w",N)===Y&&K.substr(6)===U.substr(6)){B="week";break}if(k[B]>S){B=R;break}if($[B]&&K.substr($[B])!==U.substr($[B]))break;B!=="week"&&(R=B)}return this.resolveDTLFormat(Z[B]).main}}return A.formatCache={},A}),r(t,"Core/Defaults.js",[t["Core/Chart/ChartDefaults.js"],t["Core/Globals.js"],t["Core/Color/Palettes.js"],t["Core/Time.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{isTouchDevice:p}=a,{fireEvent:m,merge:y}=h,g={colors:c.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{buttonTheme:{fill:"#f7f7f7",padding:8,r:2,stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontSize:"0.8em",fontWeight:"normal"},states:{hover:{fill:"#e6e6e6"},select:{fill:"#e6e9ff",style:{color:"#000000",fontWeight:"bold"}},disabled:{style:{color:"#cccccc"}}}}},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:n,title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:"",align:"center",widthAdjust:-44},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",events:{},layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:{duration:300,easing:v=>Math.sqrt(1-Math.pow(v-1,2))},borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %e %b, %H:%M:%S.%L",second:"%A, %e %b, %H:%M:%S",minute:"%A, %e %b, %H:%M",hour:"%A, %e %b, %H:%M",day:"%A, %e %b %Y",week:"Week from %A, %e %b %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:p?25:10,headerFormat:'<span style="font-size: 0.8em">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}};g.chart.styledMode=!1;let x=new s(g.time);return{defaultOptions:g,defaultTime:x,getOptions:function(){return g},setOptions:function(v){return m(a,"setOptions",{options:v}),y(!0,g,v),(v.time||v.global)&&(a.time?a.time.update(y(g.global,g.time,v.global,v.time)):a.time=x),g}}}),r(t,"Core/Color/Color.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let{isNumber:c,merge:s,pInt:h}=a;class p{static parse(y){return y?new p(y):p.None}constructor(y){let g,x,v,_;this.rgba=[NaN,NaN,NaN,NaN],this.input=y;let C=n.Color;if(C&&C!==p)return new C(y);if(typeof y=="object"&&y.stops!==void 0)this.stops=y.stops.map(k=>new p(k[1]));else if(typeof y=="string"){if(this.input=y=p.names[y.toLowerCase()]||y,y.charAt(0)==="#"){let k=y.length,w=parseInt(y.substr(1),16);k===7?x=[(16711680&w)>>16,(65280&w)>>8,255&w,1]:k===4&&(x=[(3840&w)>>4|(3840&w)>>8,(240&w)>>4|240&w,(15&w)<<4|15&w,1])}if(!x)for(v=p.parsers.length;v--&&!x;)(g=(_=p.parsers[v]).regex.exec(y))&&(x=_.parse(g))}x&&(this.rgba=x)}get(y){let g=this.input,x=this.rgba;if(typeof g=="object"&&this.stops!==void 0){let v=s(g);return v.stops=[].slice.call(v.stops),this.stops.forEach((_,C)=>{v.stops[C]=[v.stops[C][0],_.get(y)]}),v}return x&&c(x[0])?y!=="rgb"&&(y||x[3]!==1)?y==="a"?`${x[3]}`:"rgba("+x.join(",")+")":"rgb("+x[0]+","+x[1]+","+x[2]+")":g}brighten(y){let g=this.rgba;if(this.stops)this.stops.forEach(function(x){x.brighten(y)});else if(c(y)&&y!==0)for(let x=0;x<3;x++)g[x]+=h(255*y),g[x]<0&&(g[x]=0),g[x]>255&&(g[x]=255);return this}setOpacity(y){return this.rgba[3]=y,this}tweenTo(y,g){let x=this.rgba,v=y.rgba;if(!c(x[0])||!c(v[0]))return y.input||"none";let _=v[3]!==1||x[3]!==1;return(_?"rgba(":"rgb(")+Math.round(v[0]+(x[0]-v[0])*(1-g))+","+Math.round(v[1]+(x[1]-v[1])*(1-g))+","+Math.round(v[2]+(x[2]-v[2])*(1-g))+(_?","+(v[3]+(x[3]-v[3])*(1-g)):"")+")"}}return p.names={white:"#ffffff",black:"#000000"},p.parsers=[{regex:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?(?:\.\d+)?)\s*\)/,parse:function(m){return[h(m[1]),h(m[2]),h(m[3]),parseFloat(m[4],10)]}},{regex:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/,parse:function(m){return[h(m[1]),h(m[2]),h(m[3]),1]}}],p.None=new p(""),p}),r(t,"Core/Animation/Fx.js",[t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c){let{parse:s}=n,{win:h}=a,{isNumber:p,objectEach:m}=c;class y{constructor(x,v,_){this.pos=NaN,this.options=v,this.elem=x,this.prop=_}dSetter(){let x=this.paths,v=x&&x[0],_=x&&x[1],C=this.now||0,k=[];if(C!==1&&v&&_)if(v.length===_.length&&C<1)for(let w=0;w<_.length;w++){let E=v[w],A=_[w],M=[];for(let S=0;S<A.length;S++){let N=E[S],Y=A[S];p(N)&&p(Y)&&!(A[0]==="A"&&(S===4||S===5))?M[S]=N+C*(Y-N):M[S]=Y}k.push(M)}else k=_;else k=this.toD||[];this.elem.attr("d",k,void 0,!0)}update(){let x=this.elem,v=this.prop,_=this.now,C=this.options.step;this[v+"Setter"]?this[v+"Setter"]():x.attr?x.element&&x.attr(v,_,null,!0):x.style[v]=_+this.unit,C&&C.call(x,_,this)}run(x,v,_){let C=this,k=C.options,w=function(M){return!w.stopped&&C.step(M)},E=h.requestAnimationFrame||function(M){setTimeout(M,13)},A=function(){for(let M=0;M<y.timers.length;M++)y.timers[M]()||y.timers.splice(M--,1);y.timers.length&&E(A)};x!==v||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=x,this.end=v,this.unit=_,this.now=this.start,this.pos=0,w.elem=this.elem,w.prop=this.prop,w()&&y.timers.push(w)===1&&E(A)):(delete k.curAnim[this.prop],k.complete&&Object.keys(k.curAnim).length===0&&k.complete.call(this.elem))}step(x){let v,_,C=+new Date,k=this.options,w=this.elem,E=k.complete,A=k.duration,M=k.curAnim;return w.attr&&!w.element?v=!1:x||C>=A+this.startTime?(this.now=this.end,this.pos=1,this.update(),M[this.prop]=!0,_=!0,m(M,function(S){S!==!0&&(_=!1)}),_&&E&&E.call(w),v=!1):(this.pos=k.easing((C-this.startTime)/A),this.now=this.start+(this.end-this.start)*this.pos,this.update(),v=!0),v}initPath(x,v,_){let C=x.startX,k=x.endX,w=_.slice(),E=x.isArea,A=E?2:1,M=v&&_.length>v.length&&_.hasStackedCliffs,S,N,Y,Z,K=v&&v.slice();if(!K||M)return[w,w];function U(B,R){for(;B.length<N;){let L=B[0],G=R[N-B.length];if(G&&L[0]==="M"&&(G[0]==="C"?B[0]=["C",L[1],L[2],L[1],L[2],L[1],L[2]]:B[0]=["L",L[1],L[2]]),B.unshift(L),E){let F=B.pop();B.push(B[B.length-1],F)}}}function $(B){for(;B.length<N;){let R=B[Math.floor(B.length/A)-1].slice();if(R[0]==="C"&&(R[1]=R[5],R[2]=R[6]),E){let L=B[Math.floor(B.length/A)].slice();B.splice(B.length/2,0,R,L)}else B.push(R)}}if(C&&k&&k.length){for(Y=0;Y<C.length;Y++){if(C[Y]===k[0]){S=Y;break}if(C[0]===k[k.length-C.length+Y]){S=Y,Z=!0;break}if(C[C.length-1]===k[k.length-C.length+Y]){S=C.length-Y;break}}S===void 0&&(K=[])}return K.length&&p(S)&&(N=w.length+S*A,Z?(U(K,w),$(w)):(U(w,K),$(K))),[K,w]}fillSetter(){y.prototype.strokeSetter.apply(this,arguments)}strokeSetter(){this.elem.attr(this.prop,s(this.start).tweenTo(s(this.end),this.pos),void 0,!0)}}return y.timers=[],y}),r(t,"Core/Animation/AnimationUtilities.js",[t["Core/Animation/Fx.js"],t["Core/Utilities.js"]],function(n,a){let{defined:c,getStyle:s,isArray:h,isNumber:p,isObject:m,merge:y,objectEach:g,pick:x}=a;function v(C){return m(C)?y({duration:500,defer:0},C):{duration:C?500:0,defer:0}}function _(C,k){let w=n.timers.length;for(;w--;)n.timers[w].elem!==C||k&&k!==n.timers[w].prop||(n.timers[w].stopped=!0)}return{animate:function(C,k,w){let E,A="",M,S,N;m(w)||(N=arguments,w={duration:N[2],easing:N[3],complete:N[4]}),p(w.duration)||(w.duration=400),w.easing=typeof w.easing=="function"?w.easing:Math[w.easing]||Math.easeInOutSine,w.curAnim=y(k),g(k,function(Y,Z){_(C,Z),S=new n(C,w,Z),M=void 0,Z==="d"&&h(k.d)?(S.paths=S.initPath(C,C.pathArray,k.d),S.toD=k.d,E=0,M=1):C.attr?E=C.attr(Z):(E=parseFloat(s(C,Z))||0,Z!=="opacity"&&(A="px")),M||(M=Y),typeof M=="string"&&M.match("px")&&(M=M.replace(/px/g,"")),S.run(E,M,A)})},animObject:v,getDeferredAnimation:function(C,k,w){let E=v(k),A=w?[w]:C.series,M=0,S=0;return A.forEach(N=>{let Y=v(N.options.animation);M=m(k)&&c(k.defer)?E.defer:Math.max(M,Y.duration+Y.defer),S=Math.min(E.duration,Y.duration)}),C.renderer.forExport&&(M=0),{defer:Math.max(0,M-S),duration:Math.min(M,S)}},setAnimation:function(C,k){k.renderer.globalAnimation=x(C,k.options.chart.animation,!0)},stop:_}}),r(t,"Core/Renderer/HTML/AST.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let{SVG_NS:c,win:s}=n,{attr:h,createElement:p,css:m,error:y,isFunction:g,isString:x,objectEach:v,splat:_}=a,{trustedTypes:C}=s,k=C&&g(C.createPolicy)&&C.createPolicy("highcharts",{createHTML:M=>M}),w=k?k.createHTML(""):"",E=function(){try{return!!new DOMParser().parseFromString(w,"text/html")}catch{return!1}}();class A{static filterUserAttributes(S){return v(S,(N,Y)=>{let Z=!0;A.allowedAttributes.indexOf(Y)===-1&&(Z=!1),["background","dynsrc","href","lowsrc","src"].indexOf(Y)!==-1&&(Z=x(N)&&A.allowedReferences.some(K=>N.indexOf(K)===0)),Z||(y(33,!1,void 0,{"Invalid attribute in config":`${Y}`}),delete S[Y]),x(N)&&S[Y]&&(S[Y]=N.replace(/</g,"&lt;"))}),S}static parseStyle(S){return S.split(";").reduce((N,Y)=>{let Z=Y.split(":").map(U=>U.trim()),K=Z.shift();return K&&Z.length&&(N[K.replace(/-([a-z])/g,U=>U[1].toUpperCase())]=Z.join(":")),N},{})}static setElementHTML(S,N){S.innerHTML=A.emptyHTML,N&&new A(N).addToDOM(S)}constructor(S){this.nodes=typeof S=="string"?this.parseMarkup(S):S}addToDOM(S){return function N(Y,Z){let K;return _(Y).forEach(function(U){let $,B=U.tagName,R=U.textContent?n.doc.createTextNode(U.textContent):void 0,L=A.bypassHTMLFiltering;if(B)if(B==="#text")$=R;else if(A.allowedTags.indexOf(B)!==-1||L){let G=B==="svg"?c:Z.namespaceURI||c,F=n.doc.createElementNS(G,B),j=U.attributes||{};v(U,function(q,W){W!=="tagName"&&W!=="attributes"&&W!=="children"&&W!=="style"&&W!=="textContent"&&(j[W]=q)}),h(F,L?j:A.filterUserAttributes(j)),U.style&&m(F,U.style),R&&F.appendChild(R),N(U.children||[],F),$=F}else y(33,!1,void 0,{"Invalid tagName in config":B});$&&Z.appendChild($),K=$}),K}(this.nodes,S)}parseMarkup(S){let N,Y=[];if(S=S.trim().replace(/ style=(["'])/g," data-style=$1"),E)N=new DOMParser().parseFromString(k?k.createHTML(S):S,"text/html");else{let K=p("div");K.innerHTML=S,N={body:K}}let Z=(K,U)=>{let $=K.nodeName.toLowerCase(),B={tagName:$};$==="#text"&&(B.textContent=K.textContent||"");let R=K.attributes;if(R){let L={};[].forEach.call(R,G=>{G.name==="data-style"?B.style=A.parseStyle(G.value):L[G.name]=G.value}),B.attributes=L}if(K.childNodes.length){let L=[];[].forEach.call(K.childNodes,G=>{Z(G,L)}),L.length&&(B.children=L)}U.push(B)};return[].forEach.call(N.body.childNodes,K=>Z(K,Y)),Y}}return A.allowedAttributes=["alt","aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","dx","dy","disabled","fill","filterUnits","flood-color","flood-opacity","height","href","id","in","in2","markerHeight","markerWidth","offset","opacity","operator","orient","padding","paddingLeft","paddingRight","patternUnits","r","radius","refX","refY","role","scope","slope","src","startOffset","stdDeviation","stroke","stroke-linecap","stroke-width","style","tableValues","result","rowspan","summary","target","tabindex","text-align","text-anchor","textAnchor","textLength","title","type","valign","width","x","x1","x2","xlink:href","y","y1","y2","zIndex"],A.allowedReferences=["https://","http://","mailto:","/","../","./","#"],A.allowedTags=["a","abbr","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feComposite","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMorphology","feOffset","feMerge","feMergeNode","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","text","textPath","thead","title","tbody","tspan","td","th","tr","u","ul","#text"],A.emptyHTML=w,A.bypassHTMLFiltering=!1,A}),r(t,"Core/Templating.js",[t["Core/Defaults.js"],t["Core/Utilities.js"]],function(n,a){let{defaultOptions:c,defaultTime:s}=n,{extend:h,getNestedProperty:p,isArray:m,isNumber:y,isObject:g,pick:x,pInt:v}=a,_={add:(w,E)=>w+E,divide:(w,E)=>E!==0?w/E:"",eq:(w,E)=>w==E,each:function(w){let E=arguments[arguments.length-1];return!!m(w)&&w.map((A,M)=>C(E.body,h(g(A)?A:{"@this":A},{"@index":M,"@first":M===0,"@last":M===w.length-1}))).join("")},ge:(w,E)=>w>=E,gt:(w,E)=>w>E,if:w=>!!w,le:(w,E)=>w<=E,lt:(w,E)=>w<E,multiply:(w,E)=>w*E,ne:(w,E)=>w!=E,subtract:(w,E)=>w-E,unless:w=>!w};function C(w="",E,A){let M=/\{([\w\:\.\,;\-\/<>%@"'’= #\(\)]+)\}/g,S=/\(([\w\:\.\,;\-\/<>%@"'= ]+)\)/g,N=[],Y=/f$/,Z=/\.(\d)/,K=c.lang,U=A&&A.time||s,$=A&&A.numberFormatter||k,B=(j="")=>{let q;return j==="true"||j!=="false"&&((q=Number(j)).toString()===j?q:p(j,E))},R,L,G=0,F;for(;(R=M.exec(w))!==null;){let j=S.exec(R[1]);j&&(R=j,F=!0),L&&L.isBlock||(L={ctx:E,expression:R[1],find:R[0],isBlock:R[1].charAt(0)==="#",start:R.index,startInner:R.index+R[0].length,length:R[0].length});let q=R[1].split(" ")[0].replace("#","");_[q]&&(L.isBlock&&q===L.fn&&G++,L.fn||(L.fn=q));let W=R[1]==="else";if(L.isBlock&&L.fn&&(R[1]===`/${L.fn}`||W))if(G)!W&&G--;else{let se=L.startInner,fe=w.substr(se,R.index-se);L.body===void 0?(L.body=fe,L.startInner=R.index+R[0].length):L.elseBody=fe,L.find+=fe+R[0],W||(N.push(L),L=void 0)}else L.isBlock||N.push(L);if(j&&!(L!=null&&L.isBlock))break}return N.forEach(j=>{let q,W,{body:se,elseBody:fe,expression:ee,fn:oe}=j;if(oe){let Ce=[j],ge=ee.split(" ");for(W=_[oe].length;W--;)Ce.unshift(B(ge[W+1]));q=_[oe].apply(E,Ce),j.isBlock&&typeof q=="boolean"&&(q=C(q?se:fe,E,A))}else{let Ce=ee.split(":");if(q=B(Ce.shift()||""),Ce.length&&typeof q=="number"){let ge=Ce.join(":");if(Y.test(ge)){let Ee=parseInt((ge.match(Z)||["","-1"])[1],10);q!==null&&(q=$(q,Ee,K.decimalPoint,ge.indexOf(",")>-1?K.thousandsSep:""))}else q=U.dateFormat(ge,q)}}w=w.replace(j.find,x(q,""))}),F?C(w,E,A):w}function k(w,E,A,M){let S,N;w=+w||0,E=+E;let Y=c.lang,Z=(w.toString().split(".")[1]||"").split("e")[0].length,K=w.toString().split("e"),U=E;E===-1?E=Math.min(Z,20):y(E)?E&&K[1]&&K[1]<0&&((N=E+ +K[1])>=0?(K[0]=(+K[0]).toExponential(N).split("e")[0],E=N):(K[0]=K[0].split(".")[0]||0,w=E<20?(K[0]*Math.pow(10,K[1])).toFixed(E):0,K[1]=0)):E=2;let $=(Math.abs(K[1]?K[0]:w)+Math.pow(10,-Math.max(E,Z)-1)).toFixed(E),B=String(v($)),R=B.length>3?B.length%3:0;return A=x(A,Y.decimalPoint),M=x(M,Y.thousandsSep),S=(w<0?"-":"")+(R?B.substr(0,R)+M:""),0>+K[1]&&!U?S="0":S+=B.substr(R).replace(/(\d{3})(?=\d)/g,"$1"+M),E?S+=A+$.slice(-E):+S==0&&(S="0"),K[1]&&+S!=0&&(S+="e"+K[1]),S}return{dateFormat:function(w,E,A){return s.dateFormat(w,E,A)},format:C,helpers:_,numberFormat:k}}),r(t,"Core/Renderer/RendererRegistry.js",[t["Core/Globals.js"]],function(n){var a,c;let s;return(c=a||(a={})).rendererTypes={},c.getRendererType=function(h=s){return c.rendererTypes[h]||c.rendererTypes[s]},c.registerRendererType=function(h,p,m){c.rendererTypes[h]=p,(!s||m)&&(s=h,n.Renderer=p)},a}),r(t,"Core/Renderer/RendererUtilities.js",[t["Core/Utilities.js"]],function(n){var a;let{clamp:c,pick:s,pushUnique:h,stableSort:p}=n;return(a||(a={})).distribute=function m(y,g,x){let v=y,_=v.reducedLen||g,C=(B,R)=>B.target-R.target,k=[],w=y.length,E=[],A=k.push,M,S,N,Y=!0,Z,K,U=0,$;for(M=w;M--;)U+=y[M].size;if(U>_){for(p(y,(B,R)=>(R.rank||0)-(B.rank||0)),N=($=y[0].rank===y[y.length-1].rank)?w/2:-1,S=$?N:w-1;N&&U>_;)Z=y[M=Math.floor(S)],h(E,M)&&(U-=Z.size),S+=N,$&&S>=y.length&&(N/=2,S=N);E.sort((B,R)=>R-B).forEach(B=>A.apply(k,y.splice(B,1)))}for(p(y,C),y=y.map(B=>({size:B.size,targets:[B.target],align:s(B.align,.5)}));Y;){for(M=y.length;M--;)Z=y[M],K=(Math.min.apply(0,Z.targets)+Math.max.apply(0,Z.targets))/2,Z.pos=c(K-Z.size*Z.align,0,g-Z.size);for(M=y.length,Y=!1;M--;)M>0&&y[M-1].pos+y[M-1].size>y[M].pos&&(y[M-1].size+=y[M].size,y[M-1].targets=y[M-1].targets.concat(y[M].targets),y[M-1].align=.5,y[M-1].pos+y[M-1].size>g&&(y[M-1].pos=g-y[M-1].size),y.splice(M,1),Y=!0)}return A.apply(v,k),M=0,y.some(B=>{let R=0;return(B.targets||[]).some(()=>(v[M].pos=B.pos+R,x!==void 0&&Math.abs(v[M].pos-v[M].target)>x?(v.slice(0,M+1).forEach(L=>delete L.pos),v.reducedLen=(v.reducedLen||g)-.1*g,v.reducedLen>.1*g&&m(v,g,x),!0):(R+=v[M].size,M++,!1)))}),p(v,C),v},a}),r(t,"Core/Renderer/SVG/SVGElement.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{animate:h,animObject:p,stop:m}=n,{deg2rad:y,doc:g,svg:x,SVG_NS:v,win:_}=c,{addEvent:C,attr:k,createElement:w,crisp:E,css:A,defined:M,erase:S,extend:N,fireEvent:Y,isArray:Z,isFunction:K,isObject:U,isString:$,merge:B,objectEach:R,pick:L,pInt:G,pushUnique:F,replaceNested:j,syncTimeout:q,uniqueKey:W}=s;class se{_defaultGetter(ee){let oe=L(this[ee+"Value"],this[ee],this.element?this.element.getAttribute(ee):null,0);return/^-?[\d\.]+$/.test(oe)&&(oe=parseFloat(oe)),oe}_defaultSetter(ee,oe,Ce){Ce.setAttribute(oe,ee)}add(ee){let oe,Ce=this.renderer,ge=this.element;return ee&&(this.parentGroup=ee),this.textStr!==void 0&&this.element.nodeName==="text"&&Ce.buildText(this),this.added=!0,(!ee||ee.handleZ||this.zIndex)&&(oe=this.zIndexSetter()),oe||(ee?ee.element:Ce.box).appendChild(ge),this.onAdd&&this.onAdd(),this}addClass(ee,oe){let Ce=oe?"":this.attr("class")||"";return(ee=(ee||"").split(/ /g).reduce(function(ge,Ee){return Ce.indexOf(Ee)===-1&&ge.push(Ee),ge},Ce?[Ce]:[]).join(" "))!==Ce&&this.attr("class",ee),this}afterSetters(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)}align(ee,oe,Ce,ge=!0){let Ee,J,ie,le,be={},te=this.renderer,ae=te.alignedObjects,ce=!!ee;ee?(this.alignOptions=ee,this.alignByTranslate=oe,this.alignTo=Ce):(ee=this.alignOptions||{},oe=this.alignByTranslate,Ce=this.alignTo);let xe=!Ce||$(Ce)?Ce||"renderer":void 0;xe&&(ce&&F(ae,this),Ce=void 0);let _e=L(Ce,te[xe],te),Ne=ee.align,ke=ee.verticalAlign;return Ee=(_e.x||0)+(ee.x||0),J=(_e.y||0)+(ee.y||0),Ne==="right"?ie=1:Ne==="center"&&(ie=2),ie&&(Ee+=((_e.width||0)-(ee.width||0))/ie),be[oe?"translateX":"x"]=Math.round(Ee),ke==="bottom"?le=1:ke==="middle"&&(le=2),le&&(J+=((_e.height||0)-(ee.height||0))/le),be[oe?"translateY":"y"]=Math.round(J),ge&&(this[this.placed?"animate":"attr"](be),this.placed=!0),this.alignAttr=be,this}alignSetter(ee){let oe={left:"start",center:"middle",right:"end"};oe[ee]&&(this.alignValue=ee,this.element.setAttribute("text-anchor",oe[ee]))}animate(ee,oe,Ce){let ge=p(L(oe,this.renderer.globalAnimation,!0)),Ee=ge.defer;return g.hidden&&(ge.duration=0),ge.duration!==0?(Ce&&(ge.complete=Ce),q(()=>{this.element&&h(this,ee,ge)},Ee)):(this.attr(ee,void 0,Ce||ge.complete),R(ee,function(J,ie){ge.step&&ge.step.call(this,J,{prop:ie,pos:1,elem:this})},this)),this}applyTextOutline(ee){let oe=this.element;ee.indexOf("contrast")!==-1&&(ee=ee.replace(/contrast/g,this.renderer.getContrast(oe.style.fill)));let Ce=ee.split(" "),ge=Ce[Ce.length-1],Ee=Ce[0];if(Ee&&Ee!=="none"&&c.svg){this.fakeTS=!0,Ee=Ee.replace(/(^[\d\.]+)(.*?)$/g,function(te,ae,ce){return 2*Number(ae)+ce}),this.removeTextOutline();let J=g.createElementNS(v,"tspan");k(J,{class:"highcharts-text-outline",fill:ge,stroke:ge,"stroke-width":Ee,"stroke-linejoin":"round"});let ie=oe.querySelector("textPath")||oe;[].forEach.call(ie.childNodes,te=>{let ae=te.cloneNode(!0);ae.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach(ce=>ae.removeAttribute(ce)),J.appendChild(ae)});let le=0;[].forEach.call(ie.querySelectorAll("text tspan"),te=>{le+=Number(te.getAttribute("dy"))});let be=g.createElementNS(v,"tspan");be.textContent="​",k(be,{x:Number(oe.getAttribute("x")),dy:-le}),J.appendChild(be),ie.insertBefore(J,ie.firstChild)}}attr(ee,oe,Ce,ge){let{element:Ee}=this,J=se.symbolCustomAttribs,ie,le,be=this,te;return typeof ee=="string"&&oe!==void 0&&(ie=ee,(ee={})[ie]=oe),typeof ee=="string"?be=(this[ee+"Getter"]||this._defaultGetter).call(this,ee,Ee):(R(ee,function(ae,ce){te=!1,ge||m(this,ce),this.symbolName&&J.indexOf(ce)!==-1&&(le||(this.symbolAttr(ee),le=!0),te=!0),this.rotation&&(ce==="x"||ce==="y")&&(this.doTransform=!0),te||(this[ce+"Setter"]||this._defaultSetter).call(this,ae,ce,Ee)},this),this.afterSetters()),Ce&&Ce.call(this),be}clip(ee){if(ee&&!ee.clipPath){let oe=W()+"-",Ce=this.renderer.createElement("clipPath").attr({id:oe}).add(this.renderer.defs);N(ee,{clipPath:Ce,id:oe,count:0}),ee.add(Ce)}return this.attr("clip-path",ee?`url(${this.renderer.url}#${ee.id})`:"none")}crisp(ee,oe){oe=Math.round(oe||ee.strokeWidth||0);let Ce=ee.x||this.x||0,ge=ee.y||this.y||0,Ee=(ee.width||this.width||0)+Ce,J=(ee.height||this.height||0)+ge,ie=E(Ce,oe),le=E(ge,oe);return N(ee,{x:ie,y:le,width:E(Ee,oe)-ie,height:E(J,oe)-le}),M(ee.strokeWidth)&&(ee.strokeWidth=oe),ee}complexColor(ee,oe,Ce){let ge=this.renderer,Ee,J,ie,le,be,te,ae,ce,xe,_e,Ne=[],ke;Y(this.renderer,"complexColor",{args:arguments},function(){if(ee.radialGradient?J="radialGradient":ee.linearGradient&&(J="linearGradient"),J){if(ie=ee[J],be=ge.gradients,te=ee.stops,xe=Ce.radialReference,Z(ie)&&(ee[J]=ie={x1:ie[0],y1:ie[1],x2:ie[2],y2:ie[3],gradientUnits:"userSpaceOnUse"}),J==="radialGradient"&&xe&&!M(ie.gradientUnits)&&(le=ie,ie=B(ie,ge.getRadialAttr(xe,le),{gradientUnits:"userSpaceOnUse"})),R(ie,function(Le,me){me!=="id"&&Ne.push(me,Le)}),R(te,function(Le){Ne.push(Le)}),be[Ne=Ne.join(",")])_e=be[Ne].attr("id");else{ie.id=_e=W();let Le=be[Ne]=ge.createElement(J).attr(ie).add(ge.defs);Le.radAttr=le,Le.stops=[],te.forEach(function(me){me[1].indexOf("rgba")===0?(ae=(Ee=a.parse(me[1])).get("rgb"),ce=Ee.get("a")):(ae=me[1],ce=1);let Re=ge.createElement("stop").attr({offset:me[0],"stop-color":ae,"stop-opacity":ce}).add(Le);Le.stops.push(Re)})}ke="url("+ge.url+"#"+_e+")",Ce.setAttribute(oe,ke),Ce.gradient=Ne,ee.toString=function(){return ke}}})}css(ee){let oe=this.styles,Ce={},ge=this.element,Ee,J=!oe;if(oe&&R(ee,function(ie,le){oe&&oe[le]!==ie&&(Ce[le]=ie,J=!0)}),J){oe&&(ee=N(oe,Ce)),ee.width===null||ee.width==="auto"?delete this.textWidth:ge.nodeName.toLowerCase()==="text"&&ee.width&&(Ee=this.textWidth=G(ee.width)),N(this.styles,ee),Ee&&!x&&this.renderer.forExport&&delete ee.width;let ie=B(ee);ge.namespaceURI===this.SVG_NS&&(["textOutline","textOverflow","width"].forEach(le=>ie&&delete ie[le]),ie.color&&(ie.fill=ie.color)),A(ge,ie)}return this.added&&(this.element.nodeName==="text"&&this.renderer.buildText(this),ee.textOutline&&this.applyTextOutline(ee.textOutline)),this}dashstyleSetter(ee){let oe,Ce=this["stroke-width"];if(Ce==="inherit"&&(Ce=1),ee=ee&&ee.toLowerCase()){let ge=ee.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(oe=ge.length;oe--;)ge[oe]=""+G(ge[oe])*L(Ce,NaN);ee=ge.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",ee)}}destroy(){var le;let ee=this,oe=ee.element||{},Ce=ee.renderer,ge=oe.ownerSVGElement,Ee=oe.nodeName==="SPAN"&&ee.parentGroup||void 0,J,ie;if(oe.onclick=oe.onmouseout=oe.onmouseover=oe.onmousemove=oe.point=null,m(ee),ee.clipPath&&ge){let be=ee.clipPath;[].forEach.call(ge.querySelectorAll("[clip-path],[CLIP-PATH]"),function(te){te.getAttribute("clip-path").indexOf(be.element.id)>-1&&te.removeAttribute("clip-path")}),ee.clipPath=be.destroy()}if(ee.connector=(le=ee.connector)==null?void 0:le.destroy(),ee.stops){for(ie=0;ie<ee.stops.length;ie++)ee.stops[ie].destroy();ee.stops.length=0,ee.stops=void 0}for(ee.safeRemoveChild(oe);Ee&&Ee.div&&Ee.div.childNodes.length===0;)J=Ee.parentGroup,ee.safeRemoveChild(Ee.div),delete Ee.div,Ee=J;ee.alignOptions&&S(Ce.alignedObjects,ee),R(ee,function(be,te){ee[te]&&ee[te].parentGroup===ee&&ee[te].destroy&&ee[te].destroy(),delete ee[te]})}dSetter(ee,oe,Ce){Z(ee)&&(typeof ee[0]=="string"&&(ee=this.renderer.pathToSegments(ee)),this.pathArray=ee,ee=ee.reduce((ge,Ee,J)=>Ee&&Ee.join?(J?ge+" ":"")+Ee.join(" "):(Ee||"").toString(),"")),/(NaN| {2}|^$)/.test(ee)&&(ee="M 0 0"),this[oe]!==ee&&(Ce.setAttribute(oe,ee),this[oe]=ee)}fillSetter(ee,oe,Ce){typeof ee=="string"?Ce.setAttribute(oe,ee):ee&&this.complexColor(ee,oe,Ce)}hrefSetter(ee,oe,Ce){Ce.setAttributeNS("http://www.w3.org/1999/xlink",oe,ee)}getBBox(ee,oe){let Ce,ge,Ee,J,{alignValue:ie,element:le,renderer:be,styles:te,textStr:ae}=this,{cache:ce,cacheKeys:xe}=be,_e=le.namespaceURI===this.SVG_NS,Ne=L(oe,this.rotation,0),ke=be.styledMode?le&&se.prototype.getStyle.call(le,"font-size"):te.fontSize;if(M(ae)&&((J=ae.toString()).indexOf("<")===-1&&(J=J.replace(/\d/g,"0")),J+=["",be.rootFontSize,ke,Ne,this.textWidth,ie,te.textOverflow,te.fontWeight].join(",")),J&&!ee&&(Ce=ce[J]),!Ce||Ce.polygon){if(_e||be.forExport){try{Ee=this.fakeTS&&function(me){let Re=le.querySelector(".highcharts-text-outline");Re&&A(Re,{display:me})},K(Ee)&&Ee("none"),Ce=le.getBBox?N({},le.getBBox()):{width:le.offsetWidth,height:le.offsetHeight,x:0,y:0},K(Ee)&&Ee("")}catch{}(!Ce||Ce.width<0)&&(Ce={x:0,y:0,width:0,height:0})}else Ce=this.htmlGetBBox();ge=Ce.height,_e&&(Ce.height=ge={"11px,17":14,"13px,20":16}[`${ke||""},${Math.round(ge)}`]||ge),Ne&&(Ce=this.getRotatedBox(Ce,Ne));let Le={bBox:Ce};Y(this,"afterGetBBox",Le),Ce=Le.bBox}if(J&&(ae===""||Ce.height>0)){for(;xe.length>250;)delete ce[xe.shift()];ce[J]||xe.push(J),ce[J]=Ce}return Ce}getRotatedBox(ee,oe){let{x:Ce,y:ge,width:Ee,height:J}=ee,{alignValue:ie,translateY:le,rotationOriginX:be=0,rotationOriginY:te=0}=this,ae={right:1,center:.5}[ie||0]||0,ce=Number(this.element.getAttribute("y")||0)-(le?0:ge),xe=oe*y,_e=(oe-90)*y,Ne=Math.cos(xe),ke=Math.sin(xe),Le=Ee*Ne,me=Ee*ke,Re=Math.cos(_e),$e=Math.sin(_e),[[De,Se],[Pe,Fe]]=[be,te].map(ii=>[ii-ii*Ne,ii*ke]),je=Ce+ae*(Ee-Le)+De+Fe+ce*Re,He=je+Le,Qe=He-J*Re,at=Qe-Le,rt=ge+ce-ae*me-Se+Pe+ce*$e,dt=rt+me,gt=dt-J*$e,Tt=gt-me,Nt=Math.min(je,He,Qe,at),mt=Math.min(rt,dt,gt,Tt),St=Math.max(je,He,Qe,at)-Nt,kt=Math.max(rt,dt,gt,Tt)-mt;return{x:Nt,y:mt,width:St,height:kt,polygon:[[je,rt],[He,dt],[Qe,gt],[at,Tt]]}}getStyle(ee){return _.getComputedStyle(this.element||this,"").getPropertyValue(ee)}hasClass(ee){return(""+this.attr("class")).split(" ").indexOf(ee)!==-1}hide(){return this.attr({visibility:"hidden"})}htmlGetBBox(){return{height:0,width:0,x:0,y:0}}constructor(ee,oe){this.onEvents={},this.opacity=1,this.SVG_NS=v,this.element=oe==="span"||oe==="body"?w(oe):g.createElementNS(this.SVG_NS,oe),this.renderer=ee,this.styles={},Y(this,"afterInit")}on(ee,oe){let{onEvents:Ce}=this;return Ce[ee]&&Ce[ee](),Ce[ee]=C(this.element,ee,oe),this}opacitySetter(ee,oe,Ce){let ge=Number(Number(ee).toFixed(3));this.opacity=ge,Ce.setAttribute(oe,ge)}reAlign(){var ee;(ee=this.alignOptions)!=null&&ee.width&&this.alignOptions.align!=="left"&&(this.alignOptions.width=this.getBBox().width,this.placed=!1,this.align())}removeClass(ee){return this.attr("class",(""+this.attr("class")).replace($(ee)?RegExp(`(^| )${ee}( |$)`):ee," ").replace(/ +/g," ").trim())}removeTextOutline(){let ee=this.element.querySelector("tspan.highcharts-text-outline");ee&&this.safeRemoveChild(ee)}safeRemoveChild(ee){let oe=ee.parentNode;oe&&oe.removeChild(ee)}setRadialReference(ee){let oe=this.element.gradient&&this.renderer.gradients[this.element.gradient];return this.element.radialReference=ee,oe&&oe.radAttr&&oe.animate(this.renderer.getRadialAttr(ee,oe.radAttr)),this}shadow(ee){var Ee;let{renderer:oe}=this,Ce=B(((Ee=this.parentGroup)==null?void 0:Ee.rotation)===90?{offsetX:-1,offsetY:-1}:{},U(ee)?ee:{}),ge=oe.shadowDefinition(Ce);return this.attr({filter:ee?`url(${oe.url}#${ge})`:"none"})}show(ee=!0){return this.attr({visibility:ee?"inherit":"visible"})}"stroke-widthSetter"(ee,oe,Ce){this[oe]=ee,Ce.setAttribute(oe,ee)}strokeWidth(){if(!this.renderer.styledMode)return this["stroke-width"]||0;let ee=this.getStyle("stroke-width"),oe=0,Ce;return/px$/.test(ee)?oe=G(ee):ee!==""&&(k(Ce=g.createElementNS(v,"rect"),{width:ee,"stroke-width":0}),this.element.parentNode.appendChild(Ce),oe=Ce.getBBox().width,Ce.parentNode.removeChild(Ce)),oe}symbolAttr(ee){let oe=this;se.symbolCustomAttribs.forEach(function(Ce){oe[Ce]=L(ee[Ce],oe[Ce])}),oe.attr({d:oe.renderer.symbols[oe.symbolName](oe.x,oe.y,oe.width,oe.height,oe)})}textSetter(ee){ee!==this.textStr&&(delete this.textPxLength,this.textStr=ee,this.added&&this.renderer.buildText(this),this.reAlign())}titleSetter(ee){let oe=this.element,Ce=oe.getElementsByTagName("title")[0]||g.createElementNS(this.SVG_NS,"title");oe.insertBefore?oe.insertBefore(Ce,oe.firstChild):oe.appendChild(Ce),Ce.textContent=j(L(ee,""),[/<[^>]*>/g,""]).replace(/&lt;/g,"<").replace(/&gt;/g,">")}toFront(){let ee=this.element;return ee.parentNode.appendChild(ee),this}translate(ee,oe){return this.attr({translateX:ee,translateY:oe})}updateTransform(ee="transform"){var ce;let{element:oe,matrix:Ce,rotation:ge=0,rotationOriginX:Ee,rotationOriginY:J,scaleX:ie,scaleY:le,translateX:be=0,translateY:te=0}=this,ae=["translate("+be+","+te+")"];M(Ce)&&ae.push("matrix("+Ce.join(",")+")"),ge&&(ae.push("rotate("+ge+" "+L(Ee,oe.getAttribute("x"),0)+" "+L(J,oe.getAttribute("y")||0)+")"),((ce=this.text)==null?void 0:ce.element.tagName)==="SPAN"&&this.text.attr({rotation:ge,rotationOriginX:(Ee||0)-this.padding,rotationOriginY:(J||0)-this.padding})),(M(ie)||M(le))&&ae.push("scale("+L(ie,1)+" "+L(le,1)+")"),ae.length&&!(this.text||this).textPath&&oe.setAttribute(ee,ae.join(" "))}visibilitySetter(ee,oe,Ce){ee==="inherit"?Ce.removeAttribute(oe):this[oe]!==ee&&Ce.setAttribute(oe,ee),this[oe]=ee}xGetter(ee){return this.element.nodeName==="circle"&&(ee==="x"?ee="cx":ee==="y"&&(ee="cy")),this._defaultGetter(ee)}zIndexSetter(ee,oe){let Ce=this.renderer,ge=this.parentGroup,Ee=(ge||Ce).element||Ce.box,J=this.element,ie=Ee===Ce.box,le,be,te,ae=!1,ce,xe=this.added,_e;if(M(ee)?(J.setAttribute("data-z-index",ee),ee=+ee,this[oe]===ee&&(xe=!1)):M(this[oe])&&J.removeAttribute("data-z-index"),this[oe]=ee,xe){for((ee=this.zIndex)&&ge&&(ge.handleZ=!0),_e=(le=Ee.childNodes).length-1;_e>=0&&!ae;_e--)ce=!M(te=(be=le[_e]).getAttribute("data-z-index")),be!==J&&(ee<0&&ce&&!ie&&!_e?(Ee.insertBefore(J,le[_e]),ae=!0):(G(te)<=ee||ce&&(!M(ee)||ee>=0))&&(Ee.insertBefore(J,le[_e+1]),ae=!0));ae||(Ee.insertBefore(J,le[ie?3:0]),ae=!0)}return ae}}return se.symbolCustomAttribs=["anchorX","anchorY","clockwise","end","height","innerR","r","start","width","x","y"],se.prototype.strokeSetter=se.prototype.fillSetter,se.prototype.yGetter=se.prototype.xGetter,se.prototype.matrixSetter=se.prototype.rotationOriginXSetter=se.prototype.rotationOriginYSetter=se.prototype.rotationSetter=se.prototype.scaleXSetter=se.prototype.scaleYSetter=se.prototype.translateXSetter=se.prototype.translateYSetter=se.prototype.verticalAlignSetter=function(fe,ee){this[ee]=fe,this.doTransform=!0},se}),r(t,"Core/Renderer/SVG/SVGLabel.js",[t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(n,a){let{defined:c,extend:s,isNumber:h,merge:p,pick:m,removeEvent:y}=a;class g extends n{constructor(v,_,C,k,w,E,A,M,S,N){let Y;super(v,"g"),this.paddingLeftSetter=this.paddingSetter,this.paddingRightSetter=this.paddingSetter,this.doUpdate=!1,this.textStr=_,this.x=C,this.y=k,this.anchorX=E,this.anchorY=A,this.baseline=S,this.className=N,this.addClass(N==="button"?"highcharts-no-tooltip":"highcharts-label"),N&&this.addClass("highcharts-"+N),this.text=v.text(void 0,0,0,M).attr({zIndex:1}),typeof w=="string"&&((Y=/^url\((.*?)\)$/.test(w))||this.renderer.symbols[w])&&(this.symbolKey=w),this.bBox=g.emptyBBox,this.padding=3,this.baselineOffset=0,this.needsBox=v.styledMode||Y,this.deferredAttr={},this.alignFactor=0}alignSetter(v){let _={left:0,center:.5,right:1}[v];_!==this.alignFactor&&(this.alignFactor=_,this.bBox&&h(this.xSetting)&&this.attr({x:this.xSetting}))}anchorXSetter(v,_){this.anchorX=v,this.boxAttr(_,Math.round(v)-this.getCrispAdjust()-this.xSetting)}anchorYSetter(v,_){this.anchorY=v,this.boxAttr(_,v-this.ySetting)}boxAttr(v,_){this.box?this.box.attr(v,_):this.deferredAttr[v]=_}css(v){if(v){let _={};v=p(v),g.textProps.forEach(C=>{v[C]!==void 0&&(_[C]=v[C],delete v[C])}),this.text.css(_),"fontSize"in _||"fontWeight"in _?this.updateTextPadding():("width"in _||"textOverflow"in _)&&this.updateBoxSize()}return n.prototype.css.call(this,v)}destroy(){y(this.element,"mouseenter"),y(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),n.prototype.destroy.call(this)}fillSetter(v,_){v&&(this.needsBox=!0),this.fill=v,this.boxAttr(_,v)}getBBox(v,_){this.textStr&&this.bBox.width===0&&this.bBox.height===0&&this.updateBoxSize();let{padding:C,height:k=0,translateX:w=0,translateY:E=0,width:A=0}=this,M=m(this.paddingLeft,C),S=_??(this.rotation||0),N={width:A,height:k,x:w+this.bBox.x-M,y:E+this.bBox.y-C+this.baselineOffset};return S&&(N=this.getRotatedBox(N,S)),N}getCrispAdjust(){return(this.renderer.styledMode&&this.box?this.box.strokeWidth():this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2}heightSetter(v){this.heightSetting=v,this.doUpdate=!0}afterSetters(){super.afterSetters(),this.doUpdate&&(this.updateBoxSize(),this.doUpdate=!1)}onAdd(){this.text.add(this),this.attr({text:m(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&c(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})}paddingSetter(v,_){h(v)?v!==this[_]&&(this[_]=v,this.updateTextPadding()):this[_]=void 0}rSetter(v,_){this.boxAttr(_,v)}strokeSetter(v,_){this.stroke=v,this.boxAttr(_,v)}"stroke-widthSetter"(v,_){v&&(this.needsBox=!0),this["stroke-width"]=v,this.boxAttr(_,v)}"text-alignSetter"(v){this.textAlign=v}textSetter(v){v!==void 0&&this.text.attr({text:v}),this.updateTextPadding(),this.reAlign()}updateBoxSize(){let v,_=this.text,C={},k=this.padding,w=this.bBox=(!h(this.widthSetting)||!h(this.heightSetting)||this.textAlign)&&c(_.textStr)?_.getBBox(void 0,0):g.emptyBBox;this.width=this.getPaddedWidth(),this.height=(this.heightSetting||w.height||0)+2*k;let E=this.renderer.fontMetrics(_);if(this.baselineOffset=k+Math.min((this.text.firstLineMetrics||E).b,w.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-E.h)/2),this.needsBox&&!_.textPath){if(!this.box){let A=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect();A.addClass((this.className==="button"?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),A.add(this)}v=this.getCrispAdjust(),C.x=v,C.y=(this.baseline?-this.baselineOffset:0)+v,C.width=Math.round(this.width),C.height=Math.round(this.height),this.box.attr(s(C,this.deferredAttr)),this.deferredAttr={}}}updateTextPadding(){let v=this.text;if(!v.textPath){this.updateBoxSize();let _=this.baseline?0:this.baselineOffset,C=m(this.paddingLeft,this.padding);c(this.widthSetting)&&this.bBox&&(this.textAlign==="center"||this.textAlign==="right")&&(C+={center:.5,right:1}[this.textAlign]*(this.widthSetting-this.bBox.width)),(C!==v.x||_!==v.y)&&(v.attr("x",C),v.hasBoxWidthChanged&&(this.bBox=v.getBBox(!0)),_!==void 0&&v.attr("y",_)),v.x=C,v.y=_}}widthSetter(v){this.widthSetting=h(v)?v:void 0,this.doUpdate=!0}getPaddedWidth(){let v=this.padding,_=m(this.paddingLeft,v),C=m(this.paddingRight,v);return(this.widthSetting||this.bBox.width||0)+_+C}xSetter(v){this.x=v,this.alignFactor&&(v-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(v),this.attr("translateX",this.xSetting)}ySetter(v){this.ySetting=this.y=Math.round(v),this.attr("translateY",this.ySetting)}}return g.emptyBBox={width:0,height:0,x:0,y:0},g.textProps=["color","direction","fontFamily","fontSize","fontStyle","fontWeight","lineHeight","textAlign","textDecoration","textOutline","textOverflow","whiteSpace","width"],g}),r(t,"Core/Renderer/SVG/Symbols.js",[t["Core/Utilities.js"]],function(n){let{defined:a,isNumber:c,pick:s}=n;function h(y,g,x,v,_){let C=[];if(_){let k=_.start||0,w=s(_.r,x),E=s(_.r,v||x),A=2e-4/(_.borderRadius?1:Math.max(w,1)),M=Math.abs((_.end||0)-k-2*Math.PI)<A,S=(_.end||0)-(M?A:0),N=_.innerR,Y=s(_.open,M),Z=Math.cos(k),K=Math.sin(k),U=Math.cos(S),$=Math.sin(S),B=s(_.longArc,S-k-Math.PI<A?0:1),R=["A",w,E,0,B,s(_.clockwise,1),y+w*U,g+E*$];R.params={start:k,end:S,cx:y,cy:g},C.push(["M",y+w*Z,g+E*K],R),a(N)&&((R=["A",N,N,0,B,a(_.clockwise)?1-_.clockwise:0,y+N*Z,g+N*K]).params={start:S,end:k,cx:y,cy:g},C.push(Y?["M",y+N*U,g+N*$]:["L",y+N*U,g+N*$],R)),Y||C.push(["Z"])}return C}function p(y,g,x,v,_){return _&&_.r?m(y,g,x,v,_):[["M",y,g],["L",y+x,g],["L",y+x,g+v],["L",y,g+v],["Z"]]}function m(y,g,x,v,_){let C=(_==null?void 0:_.r)||0;return[["M",y+C,g],["L",y+x-C,g],["A",C,C,0,0,1,y+x,g+C],["L",y+x,g+v-C],["A",C,C,0,0,1,y+x-C,g+v],["L",y+C,g+v],["A",C,C,0,0,1,y,g+v-C],["L",y,g+C],["A",C,C,0,0,1,y+C,g],["Z"]]}return{arc:h,callout:function(y,g,x,v,_){let C=Math.min(_&&_.r||0,x,v),k=C+6,w=_&&_.anchorX,E=_&&_.anchorY||0,A=m(y,g,x,v,{r:C});if(!c(w)||w<x&&w>0&&E<v&&E>0)return A;if(y+w>x-k)if(E>g+k&&E<g+v-k)A.splice(3,1,["L",y+x,E-6],["L",y+x+6,E],["L",y+x,E+6],["L",y+x,g+v-C]);else if(w<x){let M=E<g+k,S=M?g:g+v;A.splice(M?2:5,0,["L",w,E],["L",y+x-C,S])}else A.splice(3,1,["L",y+x,v/2],["L",w,E],["L",y+x,v/2],["L",y+x,g+v-C]);else if(y+w<k)if(E>g+k&&E<g+v-k)A.splice(7,1,["L",y,E+6],["L",y-6,E],["L",y,E-6],["L",y,g+C]);else if(w>0){let M=E<g+k,S=M?g:g+v;A.splice(M?1:6,0,["L",w,E],["L",y+C,S])}else A.splice(7,1,["L",y,v/2],["L",w,E],["L",y,v/2],["L",y,g+C]);else E>v&&w<x-k?A.splice(5,1,["L",w+6,g+v],["L",w,g+v+6],["L",w-6,g+v],["L",y+C,g+v]):E<0&&w>k&&A.splice(1,1,["L",w-6,g],["L",w,g-6],["L",w+6,g],["L",x-C,g]);return A},circle:function(y,g,x,v){return h(y+x/2,g+v/2,x/2,v/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(y,g,x,v){return[["M",y+x/2,g],["L",y+x,g+v/2],["L",y+x/2,g+v],["L",y,g+v/2],["Z"]]},rect:p,roundedRect:m,square:p,triangle:function(y,g,x,v){return[["M",y+x/2,g],["L",y+x,g+v],["L",y,g+v],["Z"]]},"triangle-down":function(y,g,x,v){return[["M",y,g],["L",y+x,g],["L",y+x/2,g+v],["Z"]]}}}),r(t,"Core/Renderer/SVG/TextBuilder.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c){let{doc:s,SVG_NS:h,win:p}=a,{attr:m,extend:y,fireEvent:g,isString:x,objectEach:v,pick:_}=c;return class{constructor(C){let k=C.styles;this.renderer=C.renderer,this.svgElement=C,this.width=C.textWidth,this.textLineHeight=k&&k.lineHeight,this.textOutline=k&&k.textOutline,this.ellipsis=!!(k&&k.textOverflow==="ellipsis"),this.noWrap=!!(k&&k.whiteSpace==="nowrap")}buildSVG(){let C=this.svgElement,k=C.element,w=C.renderer,E=_(C.textStr,"").toString(),A=E.indexOf("<")!==-1,M=k.childNodes,S=!C.added&&w.box,N=[E,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,C.getStyle("font-size"),this.width].join(",");if(N!==C.textCache){C.textCache=N,delete C.actualWidth;for(let Y=M.length;Y--;)k.removeChild(M[Y]);if(A||this.ellipsis||this.width||C.textPath||E.indexOf(" ")!==-1&&(!this.noWrap||/<br.*?>/g.test(E))){if(E!==""){S&&S.appendChild(k);let Y=new n(E);this.modifyTree(Y.nodes),Y.addToDOM(k),this.modifyDOM(),this.ellipsis&&(k.textContent||"").indexOf("…")!==-1&&C.attr("title",this.unescapeEntities(C.textStr||"",["&lt;","&gt;"])),S&&S.removeChild(k)}}else k.appendChild(s.createTextNode(this.unescapeEntities(E)));x(this.textOutline)&&C.applyTextOutline&&C.applyTextOutline(this.textOutline)}}modifyDOM(){let C,k=this.svgElement,w=m(k.element,"x");for(k.firstLineMetrics=void 0;(C=k.element.firstChild)&&/^[\s\u200B]*$/.test(C.textContent||" ");)k.element.removeChild(C);[].forEach.call(k.element.querySelectorAll("tspan.highcharts-br"),(S,N)=>{S.nextSibling&&S.previousSibling&&(N===0&&S.previousSibling.nodeType===1&&(k.firstLineMetrics=k.renderer.fontMetrics(S.previousSibling)),m(S,{dy:this.getLineHeight(S.nextSibling),x:w}))});let E=this.width||0;if(!E)return;let A=(S,N)=>{let Y=S.textContent||"",Z=Y.replace(/([^\^])-/g,"$1- ").split(" "),K=!this.noWrap&&(Z.length>1||k.element.childNodes.length>1),U=this.getLineHeight(N),$=0,B=k.actualWidth;if(this.ellipsis)Y&&this.truncate(S,Y,void 0,0,Math.max(0,E-.8*U),(R,L)=>R.substring(0,L)+"…");else if(K){let R=[],L=[];for(;N.firstChild&&N.firstChild!==S;)L.push(N.firstChild),N.removeChild(N.firstChild);for(;Z.length;)Z.length&&!this.noWrap&&$>0&&(R.push(S.textContent||""),S.textContent=Z.join(" ").replace(/- /g,"-")),this.truncate(S,void 0,Z,$===0&&B||0,E,(G,F)=>Z.slice(0,F).join(" ").replace(/- /g,"-")),B=k.actualWidth,$++;L.forEach(G=>{N.insertBefore(G,S)}),R.forEach(G=>{N.insertBefore(s.createTextNode(G),S);let F=s.createElementNS(h,"tspan");F.textContent="​",m(F,{dy:U,x:w}),N.insertBefore(F,S)})}},M=S=>{[].slice.call(S.childNodes).forEach(N=>{N.nodeType===p.Node.TEXT_NODE?A(N,S):(N.className.baseVal.indexOf("highcharts-br")!==-1&&(k.actualWidth=0),M(N))})};M(k.element)}getLineHeight(C){let k=C.nodeType===p.Node.TEXT_NODE?C.parentElement:C;return this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(k||this.svgElement.element).h}modifyTree(C){let k=(w,E)=>{let{attributes:A={},children:M,style:S={},tagName:N}=w,Y=this.renderer.styledMode;if(N==="b"||N==="strong"?Y?A.class="highcharts-strong":S.fontWeight="bold":(N==="i"||N==="em")&&(Y?A.class="highcharts-emphasized":S.fontStyle="italic"),S&&S.color&&(S.fill=S.color),N==="br"){A.class="highcharts-br",w.textContent="​";let Z=C[E+1];Z&&Z.textContent&&(Z.textContent=Z.textContent.replace(/^ +/gm,""))}else N==="a"&&M&&M.some(Z=>Z.tagName==="#text")&&(w.children=[{children:M,tagName:"tspan"}]);N!=="#text"&&N!=="a"&&(w.tagName="tspan"),y(w,{attributes:A,style:S}),M&&M.filter(Z=>Z.tagName!=="#text").forEach(k)};C.forEach(k),g(this.svgElement,"afterModifyTree",{nodes:C})}truncate(C,k,w,E,A,M){let S,N,Y=this.svgElement,{rotation:Z}=Y,K=[],U=w?1:0,$=(k||w||"").length,B=$,R=function(L,G){let F=G||L,j=C.parentNode;if(j&&K[F]===void 0&&j.getSubStringLength)try{K[F]=E+j.getSubStringLength(0,w?F+1:F)}catch{}return K[F]};if(Y.rotation=0,E+(N=R(C.textContent.length))>A){for(;U<=$;)B=Math.ceil((U+$)/2),w&&(S=M(w,B)),N=R(B,S&&S.length-1),U===$?U=$+1:N>A?$=B-1:U=B;$===0?C.textContent="":k&&$===k.length-1||(C.textContent=S||M(k||w,B))}w&&w.splice(0,B),Y.actualWidth=N,Y.rotation=Z}unescapeEntities(C,k){return v(this.renderer.escapes,function(w,E){k&&k.indexOf(w)!==-1||(C=C.toString().replace(RegExp(w,"g"),E))}),C}}}),r(t,"Core/Renderer/SVG/SVGRenderer.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Defaults.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Renderer/SVG/SVGLabel.js"],t["Core/Renderer/SVG/Symbols.js"],t["Core/Renderer/SVG/TextBuilder.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,p,m,y,g,x){let v,{defaultOptions:_}=a,{charts:C,deg2rad:k,doc:w,isFirefox:E,isMS:A,isWebKit:M,noop:S,SVG_NS:N,symbolSizes:Y,win:Z}=s,{addEvent:K,attr:U,createElement:$,crisp:B,css:R,defined:L,destroyObjectProperties:G,extend:F,isArray:j,isNumber:q,isObject:W,isString:se,merge:fe,pick:ee,pInt:oe,replaceNested:Ce,uniqueKey:ge}=x;class Ee{constructor(ie,le,be,te,ae,ce,xe){let _e,Ne,ke=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),Le=ke.element;xe||ke.css(this.getStyle(te||{})),ie.appendChild(Le),U(ie,"dir","ltr"),ie.innerHTML.indexOf("xmlns")===-1&&U(Le,"xmlns",this.SVG_NS),this.box=Le,this.boxWrapper=ke,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(w.createTextNode("Created with Highcharts 11.4.8")),this.defs=this.createElement("defs").add(),this.allowHTML=ce,this.forExport=ae,this.styledMode=xe,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.rootFontSize=ke.getStyle("font-size"),this.setSize(le,be,!1),E&&ie.getBoundingClientRect&&((_e=function(){R(ie,{left:0,top:0}),Ne=ie.getBoundingClientRect(),R(ie,{left:Math.ceil(Ne.left)-Ne.left+"px",top:Math.ceil(Ne.top)-Ne.top+"px"})})(),this.unSubPixelFix=K(Z,"resize",_e))}definition(ie){return new n([ie]).addToDOM(this.defs.element)}getReferenceURL(){if((E||M)&&w.getElementsByTagName("base").length){if(!L(v)){let ie=ge(),le=new n([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:ie},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":`url(#${ie})`,fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(w.body);R(le,{position:"fixed",top:0,left:0,zIndex:9e5});let be=w.elementFromPoint(6,6);v=(be&&be.id)==="hitme",w.body.removeChild(le)}if(v)return Ce(Z.location.href.split("#")[0],[/<[^>]*>/g,""],[/([\('\)])/g,"\\$1"],[/ /g,"%20"])}return""}getStyle(ie){return this.style=F({fontFamily:"Helvetica, Arial, sans-serif",fontSize:"1rem"},ie),this.style}setStyle(ie){this.boxWrapper.css(this.getStyle(ie))}isHidden(){return!this.boxWrapper.getBBox().width}destroy(){let ie=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),G(this.gradients||{}),this.gradients=null,this.defs=ie.destroy(),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null,null}createElement(ie){return new this.Element(this,ie)}getRadialAttr(ie,le){return{cx:ie[0]-ie[2]/2+(le.cx||0)*ie[2],cy:ie[1]-ie[2]/2+(le.cy||0)*ie[2],r:(le.r||0)*ie[2]}}shadowDefinition(ie){let le=[`highcharts-drop-shadow-${this.chartIndex}`,...Object.keys(ie).map(te=>`${te}-${ie[te]}`)].join("-").toLowerCase().replace(/[^a-z\d\-]/g,""),be=fe({color:"#000000",offsetX:1,offsetY:1,opacity:.15,width:5},ie);return this.defs.element.querySelector(`#${le}`)||this.definition({tagName:"filter",attributes:{id:le,filterUnits:be.filterUnits},children:this.getShadowFilterContent(be)}),le}getShadowFilterContent(ie){return[{tagName:"feDropShadow",attributes:{dx:ie.offsetX,dy:ie.offsetY,"flood-color":ie.color,"flood-opacity":Math.min(5*ie.opacity,1),stdDeviation:ie.width/2}}]}buildText(ie){new g(ie).buildSVG()}getContrast(ie){let le=c.parse(ie).rgba.map(te=>{let ae=te/255;return ae<=.03928?ae/12.92:Math.pow((ae+.055)/1.055,2.4)}),be=.2126*le[0]+.7152*le[1]+.0722*le[2];return 1.05/(be+.05)>(be+.05)/.05?"#FFFFFF":"#000000"}button(ie,le,be,te,ae={},ce,xe,_e,Ne,ke){let Le=this.label(ie,le,be,Ne,void 0,void 0,ke,void 0,"button"),me=this.styledMode,Re=arguments,$e=0;ae=fe(_.global.buttonTheme,ae),me&&(delete ae.fill,delete ae.stroke,delete ae["stroke-width"]);let De=ae.states||{},Se=ae.style||{};delete ae.states,delete ae.style;let Pe=[n.filterUserAttributes(ae)],Fe=[Se];return me||["hover","select","disabled"].forEach((je,He)=>{Pe.push(fe(Pe[0],n.filterUserAttributes(Re[He+5]||De[je]||{}))),Fe.push(Pe[He+1].style),delete Pe[He+1].style}),K(Le.element,A?"mouseover":"mouseenter",function(){$e!==3&&Le.setState(1)}),K(Le.element,A?"mouseout":"mouseleave",function(){$e!==3&&Le.setState($e)}),Le.setState=(je=0)=>{if(je!==1&&(Le.state=$e=je),Le.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][je]),!me){Le.attr(Pe[je]);let He=Fe[je];W(He)&&Le.css(He)}},Le.attr(Pe[0]),!me&&(Le.css(F({cursor:"default"},Se)),ke&&Le.text.css({pointerEvents:"none"})),Le.on("touchstart",je=>je.stopPropagation()).on("click",function(je){$e!==3&&te.call(Le,je)})}crispLine(ie,le){let[be,te]=ie;return L(be[1])&&be[1]===te[1]&&(be[1]=te[1]=B(be[1],le)),L(be[2])&&be[2]===te[2]&&(be[2]=te[2]=B(be[2],le)),ie}path(ie){let le=this.styledMode?{}:{fill:"none"};return j(ie)?le.d=ie:W(ie)&&F(le,ie),this.createElement("path").attr(le)}circle(ie,le,be){let te=W(ie)?ie:ie===void 0?{}:{x:ie,y:le,r:be},ae=this.createElement("circle");return ae.xSetter=ae.ySetter=function(ce,xe,_e){_e.setAttribute("c"+xe,ce)},ae.attr(te)}arc(ie,le,be,te,ae,ce){let xe;W(ie)?(le=(xe=ie).y,be=xe.r,te=xe.innerR,ae=xe.start,ce=xe.end,ie=xe.x):xe={innerR:te,start:ae,end:ce};let _e=this.symbol("arc",ie,le,be,be,xe);return _e.r=be,_e}rect(ie,le,be,te,ae,ce){let xe=W(ie)?ie:ie===void 0?{}:{x:ie,y:le,r:ae,width:Math.max(be||0,0),height:Math.max(te||0,0)},_e=this.createElement("rect");return this.styledMode||(ce!==void 0&&(xe["stroke-width"]=ce,F(xe,_e.crisp(xe))),xe.fill="none"),_e.rSetter=function(Ne,ke,Le){_e.r=Ne,U(Le,{rx:Ne,ry:Ne})},_e.rGetter=function(){return _e.r||0},_e.attr(xe)}roundedRect(ie){return this.symbol("roundedRect").attr(ie)}setSize(ie,le,be){this.width=ie,this.height=le,this.boxWrapper.animate({width:ie,height:le},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:ee(be,!0)?void 0:0}),this.alignElements()}g(ie){let le=this.createElement("g");return ie?le.attr({class:"highcharts-"+ie}):le}image(ie,le,be,te,ae,ce){let xe={preserveAspectRatio:"none"};q(le)&&(xe.x=le),q(be)&&(xe.y=be),q(te)&&(xe.width=te),q(ae)&&(xe.height=ae);let _e=this.createElement("image").attr(xe),Ne=function(ke){_e.attr({href:ie}),ce.call(_e,ke)};if(ce){_e.attr({href:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="});let ke=new Z.Image;K(ke,"load",Ne),ke.src=ie,ke.complete&&Ne({})}else _e.attr({href:ie});return _e}symbol(ie,le,be,te,ae,ce){let xe,_e,Ne,ke,Le=this,me=/^url\((.*?)\)$/,Re=me.test(ie),$e=!Re&&(this.symbols[ie]?ie:"circle"),De=$e&&this.symbols[$e];if(De)typeof le=="number"&&(_e=De.call(this.symbols,le||0,be||0,te||0,ae||0,ce)),xe=this.path(_e),Le.styledMode||xe.attr("fill","none"),F(xe,{symbolName:$e||void 0,x:le,y:be,width:te,height:ae}),ce&&F(xe,ce);else if(Re){Ne=ie.match(me)[1];let Se=xe=this.image(Ne);Se.imgwidth=ee(ce&&ce.width,Y[Ne]&&Y[Ne].width),Se.imgheight=ee(ce&&ce.height,Y[Ne]&&Y[Ne].height),ke=Pe=>Pe.attr({width:Pe.width,height:Pe.height}),["width","height"].forEach(Pe=>{Se[`${Pe}Setter`]=function(Fe,je){this[je]=Fe;let{alignByTranslate:He,element:Qe,width:at,height:rt,imgwidth:dt,imgheight:gt}=this,Tt=je==="width"?dt:gt,Nt=1;ce&&ce.backgroundSize==="within"&&at&&rt&&dt&&gt?(Nt=Math.min(at/dt,rt/gt),U(Qe,{width:Math.round(dt*Nt),height:Math.round(gt*Nt)})):Qe&&Tt&&Qe.setAttribute(je,Tt),!He&&dt&&gt&&this.translate(((at||0)-dt*Nt)/2,((rt||0)-gt*Nt)/2)}}),L(le)&&Se.attr({x:le,y:be}),Se.isImg=!0,Se.symbolUrl=ie,L(Se.imgwidth)&&L(Se.imgheight)?ke(Se):(Se.attr({width:0,height:0}),$("img",{onload:function(){let Pe=C[Le.chartIndex];this.width===0&&(R(this,{position:"absolute",top:"-999em"}),w.body.appendChild(this)),Y[Ne]={width:this.width,height:this.height},Se.imgwidth=this.width,Se.imgheight=this.height,Se.element&&ke(Se),this.parentNode&&this.parentNode.removeChild(this),Le.imgCount--,Le.imgCount||!Pe||Pe.hasLoaded||Pe.onload()},src:Ne}),this.imgCount++)}return xe}clipRect(ie,le,be,te){return this.rect(ie,le,be,te,0)}text(ie,le,be,te){let ae={};if(te&&(this.allowHTML||!this.forExport))return this.html(ie,le,be);ae.x=Math.round(le||0),be&&(ae.y=Math.round(be)),L(ie)&&(ae.text=ie);let ce=this.createElement("text").attr(ae);return te&&(!this.forExport||this.allowHTML)||(ce.xSetter=function(xe,_e,Ne){let ke=Ne.getElementsByTagName("tspan"),Le=Ne.getAttribute(_e);for(let me=0,Re;me<ke.length;me++)(Re=ke[me]).getAttribute(_e)===Le&&Re.setAttribute(_e,xe);Ne.setAttribute(_e,xe)}),ce}fontMetrics(ie){let le=oe(p.prototype.getStyle.call(ie,"font-size")||0),be=le<24?le+3:Math.round(1.2*le),te=Math.round(.8*be);return{h:be,b:te,f:le}}rotCorr(ie,le,be){let te=ie;return le&&be&&(te=Math.max(te*Math.cos(le*k),4)),{x:-ie/3*Math.sin(le*k),y:te}}pathToSegments(ie){let le=[],be=[],te={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2};for(let ae=0;ae<ie.length;ae++)se(be[0])&&q(ie[ae])&&be.length===te[be[0].toUpperCase()]&&ie.splice(ae,0,be[0].replace("M","L").replace("m","l")),typeof ie[ae]=="string"&&(be.length&&le.push(be.slice(0)),be.length=0),be.push(ie[ae]);return le.push(be.slice(0)),le}label(ie,le,be,te,ae,ce,xe,_e,Ne){return new m(this,ie,le,be,te,ae,ce,xe,_e,Ne)}alignElements(){this.alignedObjects.forEach(ie=>ie.align())}}return F(Ee.prototype,{Element:p,SVG_NS:N,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:y,draw:S}),h.registerRendererType("svg",Ee,!0),Ee}),r(t,"Core/Renderer/HTML/HTMLElement.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{composed:h}=a,{attr:p,css:m,createElement:y,defined:g,extend:x,pInt:v,pushUnique:_}=s;function C(A,M,S){var Y;let N=((Y=this.div)==null?void 0:Y.style)||S.style;c.prototype[`${M}Setter`].call(this,A,M,S),N&&(N[M]=A)}let k=(A,M)=>{var S;if(!A.div){let N=p(A.element,"class"),Y=A.css,Z=y("div",N?{className:N}:void 0,{position:"absolute",left:`${A.translateX||0}px`,top:`${A.translateY||0}px`,...A.styles,display:A.display,opacity:A.opacity,visibility:A.visibility},((S=A.parentGroup)==null?void 0:S.div)||M);A.classSetter=(K,U,$)=>{$.setAttribute("class",K),Z.className=K},A.translateXSetter=A.translateYSetter=(K,U)=>{A[U]=K,Z.style[U==="translateX"?"left":"top"]=`${K}px`,A.doTransform=!0},A.opacitySetter=A.visibilitySetter=C,A.css=K=>(Y.call(A,K),K.cursor&&(Z.style.cursor=K.cursor),K.pointerEvents&&(Z.style.pointerEvents=K.pointerEvents),A),A.on=function(){return c.prototype.on.apply({element:Z,onEvents:A.onEvents},arguments),A},A.div=Z}return A.div};class w extends c{static compose(M){_(h,this.compose)&&(M.prototype.html=function(S,N,Y){return new w(this,"span").attr({text:S,x:Math.round(N),y:Math.round(Y)})})}constructor(M,S){super(M,S),this.css({position:"absolute",...M.styledMode?{}:{fontFamily:M.style.fontFamily,fontSize:M.style.fontSize}}),this.element.style.whiteSpace="nowrap"}getSpanCorrection(M,S,N){this.xCorr=-M*N,this.yCorr=-S}css(M){let S,{element:N}=this,Y=N.tagName==="SPAN"&&M&&"width"in M,Z=Y&&M.width;return Y&&(delete M.width,this.textWidth=v(Z)||void 0,S=!0),(M==null?void 0:M.textOverflow)==="ellipsis"&&(M.whiteSpace="nowrap",M.overflow="hidden"),x(this.styles,M),m(N,M),S&&this.updateTransform(),this}htmlGetBBox(){let{element:M}=this;return{x:M.offsetLeft,y:M.offsetTop,width:M.offsetWidth,height:M.offsetHeight}}updateTransform(){var q;if(!this.added){this.alignOnAdd=!0;return}let{element:M,renderer:S,rotation:N,rotationOriginX:Y,rotationOriginY:Z,styles:K,textAlign:U="left",textWidth:$,translateX:B=0,translateY:R=0,x:L=0,y:G=0}=this,F={left:0,center:.5,right:1}[U],j=K.whiteSpace;if(m(M,{marginLeft:`${B}px`,marginTop:`${R}px`}),M.tagName==="SPAN"){let W=[N,U,M.innerHTML,$,this.textAlign].join(","),se=-(((q=this.parentGroup)==null?void 0:q.padding)*1)||0,fe,ee=!1;if($!==this.oldTextWidth){let J=this.textPxLength?this.textPxLength:(m(M,{width:"",whiteSpace:j||"nowrap"}),M.offsetWidth),ie=$||0;(ie>this.oldTextWidth||J>ie)&&(/[ \-]/.test(M.textContent||M.innerText)||M.style.textOverflow==="ellipsis")&&(m(M,{width:J>ie||N?$+"px":"auto",display:"block",whiteSpace:j||"normal"}),this.oldTextWidth=$,ee=!0)}this.hasBoxWidthChanged=ee,W!==this.cTT&&(fe=S.fontMetrics(M).b,g(N)&&(N!==(this.oldRotation||0)||U!==this.oldAlign)&&this.setSpanRotation(N,se,se),this.getSpanCorrection(!g(N)&&this.textPxLength||M.offsetWidth,fe,F));let{xCorr:oe=0,yCorr:Ce=0}=this,ge=(Y??L)-oe-L-se,Ee=(Z??G)-Ce-G-se;m(M,{left:`${L+oe}px`,top:`${G+Ce}px`,transformOrigin:`${ge}px ${Ee}px`}),this.cTT=W,this.oldRotation=N,this.oldAlign=U}}setSpanRotation(M,S,N){m(this.element,{transform:`rotate(${M}deg)`,transformOrigin:`${S}% ${N}px`})}add(M){let S,N=this.renderer.box.parentNode,Y=[];if(this.parentGroup=M,M&&!(S=M.div)){let Z=M;for(;Z;)Y.push(Z),Z=Z.parentGroup;for(let K of Y.reverse())S=k(K,N)}return(S||N).appendChild(this.element),this.added=!0,this.alignOnAdd&&this.updateTransform(),this}textSetter(M){M!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,n.setElementHTML(this.element,M??""),this.textStr=M,this.doTransform=!0)}alignSetter(M){this.alignValue=this.textAlign=M,this.doTransform=!0}xSetter(M,S){this[S]=M,this.doTransform=!0}}let E=w.prototype;return E.visibilitySetter=E.opacitySetter=C,E.ySetter=E.rotationSetter=E.rotationOriginXSetter=E.rotationOriginYSetter=E.xSetter,w}),r(t,"Core/Axis/AxisDefaults.js",[],function(){var n,a;return(a=n||(n={})).xAxis={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%H:%M:%S.%L",range:!1},second:{main:"%H:%M:%S",range:!1},minute:{main:"%H:%M",range:!1},hour:{main:"%H:%M",range:!1},day:{main:"%e %b"},week:{main:"%e %b"},month:{main:"%b '%y"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotationLimit:80,distance:15,enabled:!0,indentation:10,overflow:"justify",reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,zIndex:7,style:{color:"#333333",cursor:"default",fontSize:"0.8em"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minorTicksPerMajor:5,minPadding:.01,offset:void 0,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",useHTML:!1,x:0,y:0,style:{color:"#666666",fontSize:"0.8em"}},visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#333333",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#333333"},a.yAxis={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:void 0},startOnTick:!0,title:{text:"Values"},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){let{numberFormatter:c}=this.axis.chart;return c(this.total||0,-1)},style:{color:"#000000",fontSize:"0.7em",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},n}),r(t,"Core/Foundation.js",[t["Core/Utilities.js"]],function(n){var a;let{addEvent:c,isFunction:s,objectEach:h,removeEvent:p}=n;return(a||(a={})).registerEventOptions=function(m,y){m.eventOptions=m.eventOptions||{},h(y.events,function(g,x){m.eventOptions[x]!==g&&(m.eventOptions[x]&&(p(m,x,m.eventOptions[x]),delete m.eventOptions[x]),s(g)&&(m.eventOptions[x]=g,c(m,x,g,{order:0})))})},a}),r(t,"Core/Axis/Tick.js",[t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c){let{deg2rad:s}=a,{clamp:h,correctFloat:p,defined:m,destroyObjectProperties:y,extend:g,fireEvent:x,isNumber:v,merge:_,objectEach:C,pick:k}=c;return class{constructor(w,E,A,M,S){this.isNew=!0,this.isNewLabel=!0,this.axis=w,this.pos=E,this.type=A||"",this.parameters=S||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,x(this,"init"),A||M||this.addLabel()}addLabel(){let w=this,E=w.axis,A=E.options,M=E.chart,S=E.categories,N=E.logarithmic,Y=E.names,Z=w.pos,K=k(w.options&&w.options.labels,A.labels),U=E.tickPositions,$=Z===U[0],B=Z===U[U.length-1],R=(!K.step||K.step===1)&&E.tickInterval===1,L=U.info,G=w.label,F,j,q,W=this.parameters.category||(S?k(S[Z],Y[Z],Z):Z);N&&v(W)&&(W=p(N.lin2log(W))),E.dateTime&&(L?F=(j=M.time.resolveDTLFormat(A.dateTimeLabelFormats[!A.grid&&L.higherRanks[Z]||L.unitName])).main:v(W)&&(F=E.dateTime.getXDateFormat(W,A.dateTimeLabelFormats||{}))),w.isFirst=$,w.isLast=B;let se={axis:E,chart:M,dateTimeLabelFormat:F,isFirst:$,isLast:B,pos:Z,tick:w,tickPositionInfo:L,value:W};x(this,"labelFormat",se);let fe=Ce=>K.formatter?K.formatter.call(Ce,Ce):K.format?(Ce.text=E.defaultLabelFormatter.call(Ce),n.format(K.format,Ce,M)):E.defaultLabelFormatter.call(Ce),ee=fe.call(se,se),oe=j&&j.list;oe?w.shortenLabel=function(){for(q=0;q<oe.length;q++)if(g(se,{dateTimeLabelFormat:oe[q]}),G.attr({text:fe.call(se,se)}),G.getBBox().width<E.getSlotWidth(w)-2*(K.padding||0))return;G.attr({text:""})}:w.shortenLabel=void 0,R&&E._addedPlotLB&&w.moveLabel(ee,K),m(G)||w.movedLabel?G&&G.textStr!==ee&&!R&&(!G.textWidth||K.style.width||G.styles.width||G.css({width:null}),G.attr({text:ee}),G.textPxLength=G.getBBox().width):(w.label=G=w.createLabel(ee,K),w.rotation=0)}createLabel(w,E,A){let M=this.axis,S=M.chart,N=m(w)&&E.enabled?S.renderer.text(w,A==null?void 0:A.x,A==null?void 0:A.y,E.useHTML).add(M.labelGroup):void 0;return N&&(S.styledMode||N.css(_(E.style)),N.textPxLength=N.getBBox().width),N}destroy(){y(this,this.axis)}getPosition(w,E,A,M){let S=this.axis,N=S.chart,Y=M&&N.oldChartHeight||N.chartHeight,Z={x:w?p(S.translate(E+A,void 0,void 0,M)+S.transB):S.left+S.offset+(S.opposite?(M&&N.oldChartWidth||N.chartWidth)-S.right-S.left:0),y:w?Y-S.bottom+S.offset-(S.opposite?S.height:0):p(Y-S.translate(E+A,void 0,void 0,M)-S.transB)};return Z.y=h(Z.y,-1e9,1e9),x(this,"afterGetPosition",{pos:Z}),Z}getLabelPosition(w,E,A,M,S,N,Y,Z){let K,U,$=this.axis,B=$.transA,R=$.isLinked&&$.linkedParent?$.linkedParent.reversed:$.reversed,L=$.staggerLines,G=$.tickRotCorr||{x:0,y:0},F=M||$.reserveSpaceDefault?0:-$.labelOffset*($.labelAlign==="center"?.5:1),j=S.distance,q={};return K=$.side===0?A.rotation?-j:-A.getBBox().height:$.side===2?G.y+j:Math.cos(A.rotation*s)*(G.y-A.getBBox(!1,0).height/2),m(S.y)&&(K=$.side===0&&$.horiz?S.y+K:S.y),w=w+k(S.x,[0,1,0,-1][$.side]*j)+F+G.x-(N&&M?N*B*(R?-1:1):0),E=E+K-(N&&!M?N*B*(R?1:-1):0),L&&(U=Y/(Z||1)%L,$.opposite&&(U=L-U-1),E+=U*($.labelOffset/L)),q.x=w,q.y=Math.round(E),x(this,"afterGetLabelPosition",{pos:q,tickmarkOffset:N,index:Y}),q}getLabelSize(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0}getMarkPath(w,E,A,M,S=!1,N){return N.crispLine([["M",w,E],["L",w+(S?0:-A),E+(S?A:0)]],M)}handleOverflow(w){let E=this.axis,A=E.options.labels,M=w.x,S=E.chart.chartWidth,N=E.chart.spacing,Y=k(E.labelLeft,Math.min(E.pos,N[3])),Z=k(E.labelRight,Math.max(E.isRadial?0:E.pos+E.len,S-N[1])),K=this.label,U=this.rotation,$={left:0,center:.5,right:1}[E.labelAlign||K.attr("align")],B=K.getBBox().width,R=E.getSlotWidth(this),L={},G=R,F=1,j,q,W;U||A.overflow!=="justify"?U<0&&M-$*B<Y?W=Math.round(M/Math.cos(U*s)-Y):U>0&&M+$*B>Z&&(W=Math.round((S-M)/Math.cos(U*s))):(j=M-$*B,q=M+(1-$)*B,j<Y?G=w.x+G*(1-$)-Y:q>Z&&(G=Z-w.x+G*$,F=-1),(G=Math.min(R,G))<R&&E.labelAlign==="center"&&(w.x+=F*(R-G-$*(R-Math.min(B,G)))),(B>G||E.autoRotation&&(K.styles||{}).width)&&(W=G)),W&&(this.shortenLabel?this.shortenLabel():(L.width=Math.floor(W)+"px",(A.style||{}).textOverflow||(L.textOverflow="ellipsis"),K.css(L)))}moveLabel(w,E){let A=this,M=A.label,S=A.axis,N=!1,Y;M&&M.textStr===w?(A.movedLabel=M,N=!0,delete A.label):C(S.ticks,function(Z){N||Z.isNew||Z===A||!Z.label||Z.label.textStr!==w||(A.movedLabel=Z.label,N=!0,Z.labelPos=A.movedLabel.xy,delete Z.label)}),!N&&(A.labelPos||M)&&(Y=A.labelPos||M.xy,A.movedLabel=A.createLabel(w,E,Y),A.movedLabel&&A.movedLabel.attr({opacity:0}))}render(w,E,A){let M=this.axis,S=M.horiz,N=this.pos,Y=k(this.tickmarkOffset,M.tickmarkOffset),Z=this.getPosition(S,N,Y,E),K=Z.x,U=Z.y,$=M.pos,B=$+M.len,R=S?K:U;!M.chart.polar&&this.isNew&&(p(R)<$||R>B)&&(A=0);let L=k(A,this.label&&this.label.newOpacity,1);A=k(A,1),this.isActive=!0,this.renderGridLine(E,A),this.renderMark(Z,A),this.renderLabel(Z,E,L,w),this.isNew=!1,x(this,"afterRender")}renderGridLine(w,E){let A=this.axis,M=A.options,S={},N=this.pos,Y=this.type,Z=k(this.tickmarkOffset,A.tickmarkOffset),K=A.chart.renderer,U=this.gridLine,$,B=M.gridLineWidth,R=M.gridLineColor,L=M.gridLineDashStyle;this.type==="minor"&&(B=M.minorGridLineWidth,R=M.minorGridLineColor,L=M.minorGridLineDashStyle),U||(A.chart.styledMode||(S.stroke=R,S["stroke-width"]=B||0,S.dashstyle=L),Y||(S.zIndex=1),w&&(E=0),this.gridLine=U=K.path().attr(S).addClass("highcharts-"+(Y?Y+"-":"")+"grid-line").add(A.gridGroup)),U&&($=A.getPlotLinePath({value:N+Z,lineWidth:U.strokeWidth(),force:"pass",old:w,acrossPanes:!1}))&&U[w||this.isNew?"attr":"animate"]({d:$,opacity:E})}renderMark(w,E){let A=this.axis,M=A.options,S=A.chart.renderer,N=this.type,Y=A.tickSize(N?N+"Tick":"tick"),Z=w.x,K=w.y,U=k(M[N!=="minor"?"tickWidth":"minorTickWidth"],!N&&A.isXAxis?1:0),$=M[N!=="minor"?"tickColor":"minorTickColor"],B=this.mark,R=!B;Y&&(A.opposite&&(Y[0]=-Y[0]),B||(this.mark=B=S.path().addClass("highcharts-"+(N?N+"-":"")+"tick").add(A.axisGroup),A.chart.styledMode||B.attr({stroke:$,"stroke-width":U})),B[R?"attr":"animate"]({d:this.getMarkPath(Z,K,Y[0],B.strokeWidth(),A.horiz,S),opacity:E}))}renderLabel(w,E,A,M){let S=this.axis,N=S.horiz,Y=S.options,Z=this.label,K=Y.labels,U=K.step,$=k(this.tickmarkOffset,S.tickmarkOffset),B=w.x,R=w.y,L=!0;Z&&v(B)&&(Z.xy=w=this.getLabelPosition(B,R,Z,N,K,$,M,U),(!this.isFirst||this.isLast||Y.showFirstLabel)&&(!this.isLast||this.isFirst||Y.showLastLabel)?!N||K.step||K.rotation||E||A===0||this.handleOverflow(w):L=!1,U&&M%U&&(L=!1),L&&v(w.y)?(w.opacity=A,Z[this.isNewLabel?"attr":"animate"](w).show(!0),this.isNewLabel=!1):(Z.hide(),this.isNewLabel=!0))}replaceMovedLabel(){let w=this.label,E=this.axis;w&&!this.isNew&&(w.animate({opacity:0},void 0,w.destroy),delete this.label),E.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel}}}),r(t,"Core/Axis/Axis.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/AxisDefaults.js"],t["Core/Color/Color.js"],t["Core/Defaults.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Axis/Tick.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,p,m,y){let{animObject:g}=n,{xAxis:x,yAxis:v}=a,{defaultOptions:_}=s,{registerEventOptions:C}=h,{deg2rad:k}=p,{arrayMax:w,arrayMin:E,clamp:A,correctFloat:M,defined:S,destroyObjectProperties:N,erase:Y,error:Z,extend:K,fireEvent:U,getClosestDistance:$,insertItem:B,isArray:R,isNumber:L,isString:G,merge:F,normalizeTickInterval:j,objectEach:q,pick:W,relativeLength:se,removeEvent:fe,splat:ee,syncTimeout:oe}=y,Ce=(Ee,J)=>j(J,void 0,void 0,W(Ee.options.allowDecimals,J<.5||Ee.tickAmount!==void 0),!!Ee.tickAmount);K(_,{xAxis:x,yAxis:F(x,v)});class ge{constructor(J,ie,le){this.init(J,ie,le)}init(J,ie,le=this.coll){let be=le==="xAxis",te=this.isZAxis||(J.inverted?!be:be);this.chart=J,this.horiz=te,this.isXAxis=be,this.coll=le,U(this,"init",{userOptions:ie}),this.opposite=W(ie.opposite,this.opposite),this.side=W(ie.side,this.side,te?this.opposite?0:2:this.opposite?1:3),this.setOptions(ie);let ae=this.options,ce=ae.labels;this.type??(this.type=ae.type||"linear"),this.uniqueNames??(this.uniqueNames=ae.uniqueNames??!0),U(this,"afterSetType"),this.userOptions=ie,this.minPixelPadding=0,this.reversed=W(ae.reversed,this.reversed),this.visible=ae.visible,this.zoomEnabled=ae.zoomEnabled,this.hasNames=this.type==="category"||ae.categories===!0,this.categories=R(ae.categories)&&ae.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=S(ae.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len??(this.len=0),this.minRange=this.userMinRange=ae.minRange||ae.maxZoom,this.range=ae.range,this.offset=ae.offset||0,this.max=void 0,this.min=void 0;let xe=W(ae.crosshair,ee(J.options.tooltip.crosshairs)[be?0:1]);this.crosshair=xe===!0?{}:xe,J.axes.indexOf(this)===-1&&(be?J.axes.splice(J.xAxis.length,0,this):J.axes.push(this),B(this,J[this.coll])),J.orderItems(this.coll),this.series=this.series||[],J.inverted&&!this.isZAxis&&be&&!S(this.reversed)&&(this.reversed=!0),this.labelRotation=L(ce.rotation)?ce.rotation:void 0,C(this,ae),U(this,"afterInit")}setOptions(J){let ie=this.horiz?{labels:{autoRotation:[-45],padding:4},margin:15}:{labels:{padding:1},title:{rotation:90*this.side}};this.options=F(ie,_[this.coll],J),U(this,"afterSetOptions",{userOptions:J})}defaultLabelFormatter(){let J=this.axis,{numberFormatter:ie}=this.chart,le=L(this.value)?this.value:NaN,be=J.chart.time,te=J.categories,ae=this.dateTimeLabelFormat,ce=_.lang,xe=ce.numericSymbols,_e=ce.numericSymbolMagnitude||1e3,Ne=J.logarithmic?Math.abs(le):J.tickInterval,ke=xe&&xe.length,Le,me;if(te)me=`${this.value}`;else if(ae)me=be.dateFormat(ae,le);else if(ke&&xe&&Ne>=1e3)for(;ke--&&me===void 0;)Ne>=(Le=Math.pow(_e,ke+1))&&10*le%Le==0&&xe[ke]!==null&&le!==0&&(me=ie(le/Le,-1)+xe[ke]);return me===void 0&&(me=Math.abs(le)>=1e4?ie(le,-1):ie(le,-1,void 0,"")),me}getSeriesExtremes(){let J,ie=this;U(this,"getSeriesExtremes",null,function(){ie.hasVisibleSeries=!1,ie.dataMin=ie.dataMax=ie.threshold=void 0,ie.softThreshold=!ie.isXAxis,ie.series.forEach(le=>{if(le.reserveSpace()){let be=le.options,te,ae=be.threshold,ce,xe;if(ie.hasVisibleSeries=!0,ie.positiveValuesOnly&&0>=(ae||0)&&(ae=void 0),ie.isXAxis)(te=le.xData)&&te.length&&(te=ie.logarithmic?te.filter(_e=>_e>0):te,ce=(J=le.getXExtremes(te)).min,xe=J.max,L(ce)||ce instanceof Date||(te=te.filter(L),ce=(J=le.getXExtremes(te)).min,xe=J.max),te.length&&(ie.dataMin=Math.min(W(ie.dataMin,ce),ce),ie.dataMax=Math.max(W(ie.dataMax,xe),xe)));else{let _e=le.applyExtremes();L(_e.dataMin)&&(ce=_e.dataMin,ie.dataMin=Math.min(W(ie.dataMin,ce),ce)),L(_e.dataMax)&&(xe=_e.dataMax,ie.dataMax=Math.max(W(ie.dataMax,xe),xe)),S(ae)&&(ie.threshold=ae),(!be.softThreshold||ie.positiveValuesOnly)&&(ie.softThreshold=!1)}}})}),U(this,"afterGetSeriesExtremes")}translate(J,ie,le,be,te,ae){var $e;let ce=this.linkedParent||this,xe=be&&ce.old?ce.old.min:ce.min;if(!L(xe))return NaN;let _e=ce.minPixelPadding,Ne=(ce.isOrdinal||(($e=ce.brokenAxis)==null?void 0:$e.hasBreaks)||ce.logarithmic&&te)&&ce.lin2val,ke=1,Le=0,me=be&&ce.old?ce.old.transA:ce.transA,Re=0;return me||(me=ce.transA),le&&(ke*=-1,Le=ce.len),ce.reversed&&(ke*=-1,Le-=ke*(ce.sector||ce.len)),ie?(Re=(J=J*ke+Le-_e)/me+xe,Ne&&(Re=ce.lin2val(Re))):(Ne&&(J=ce.val2lin(J)),Re=ke*(J-xe)*me+Le+ke*_e+(L(ae)?me*ae:0),ce.isRadial||(Re=M(Re))),Re}toPixels(J,ie){return this.translate(J,!1,!this.horiz,void 0,!0)+(ie?0:this.pos)}toValue(J,ie){return this.translate(J-(ie?0:this.pos),!0,!this.horiz,void 0,!0)}getPlotLinePath(J){let ie=this,le=ie.chart,be=ie.left,te=ie.top,ae=J.old,ce=J.value,xe=J.lineWidth,_e=ae&&le.oldChartHeight||le.chartHeight,Ne=ae&&le.oldChartWidth||le.chartWidth,ke=ie.transB,Le=J.translatedValue,me=J.force,Re,$e,De,Se,Pe;function Fe(He,Qe,at){return me!=="pass"&&(He<Qe||He>at)&&(me?He=A(He,Qe,at):Pe=!0),He}let je={value:ce,lineWidth:xe,old:ae,force:me,acrossPanes:J.acrossPanes,translatedValue:Le};return U(this,"getPlotLinePath",je,function(He){Re=De=(Le=A(Le=W(Le,ie.translate(ce,void 0,void 0,ae)),-1e9,1e9))+ke,$e=Se=_e-Le-ke,L(Le)?ie.horiz?($e=te,Se=_e-ie.bottom+(ie.options.isInternal?0:le.scrollablePixelsY||0),Re=De=Fe(Re,be,be+ie.width)):(Re=be,De=Ne-ie.right+(le.scrollablePixelsX||0),$e=Se=Fe($e,te,te+ie.height)):(Pe=!0,me=!1),He.path=Pe&&!me?void 0:le.renderer.crispLine([["M",Re,$e],["L",De,Se]],xe||1)}),je.path}getLinearTickPositions(J,ie,le){let be,te,ae,ce=M(Math.floor(ie/J)*J),xe=M(Math.ceil(le/J)*J),_e=[];if(M(ce+J)===ce&&(ae=20),this.single)return[ie];for(be=ce;be<=xe&&(_e.push(be),(be=M(be+J,ae))!==te);)te=be;return _e}getMinorTickInterval(){let{minorTicks:J,minorTickInterval:ie}=this.options;return J===!0?W(ie,"auto"):J!==!1?ie:void 0}getMinorTickPositions(){let J=this.options,ie=this.tickPositions,le=this.minorTickInterval,be=this.pointRangePadding||0,te=(this.min||0)-be,ae=(this.max||0)+be,ce=ae-te,xe=[],_e;if(ce&&ce/le<this.len/3){let Ne=this.logarithmic;if(Ne)this.paddedTicks.forEach(function(ke,Le,me){Le&&xe.push.apply(xe,Ne.getLogTickPositions(le,me[Le-1],me[Le],!0))});else if(this.dateTime&&this.getMinorTickInterval()==="auto")xe=xe.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(le),te,ae,J.startOfWeek));else for(_e=te+(ie[0]-te)%le;_e<=ae&&_e!==xe[0];_e+=le)xe.push(_e)}return xe.length!==0&&this.trimTicks(xe),xe}adjustForMinRange(){let J=this.options,ie=this.logarithmic,{max:le,min:be,minRange:te}=this,ae,ce,xe,_e;this.isXAxis&&te===void 0&&!ie&&(te=S(J.min)||S(J.max)||S(J.floor)||S(J.ceiling)?null:Math.min(5*($(this.series.map(Ne=>{var ke;return(Ne.xIncrement?(ke=Ne.xData)==null?void 0:ke.slice(0,2):Ne.xData)||[]}))||0),this.dataMax-this.dataMin)),L(le)&&L(be)&&L(te)&&le-be<te&&(ce=this.dataMax-this.dataMin>=te,ae=(te-le+be)/2,xe=[be-ae,W(J.min,be-ae)],ce&&(xe[2]=ie?ie.log2lin(this.dataMin):this.dataMin),_e=[(be=w(xe))+te,W(J.max,be+te)],ce&&(_e[2]=ie?ie.log2lin(this.dataMax):this.dataMax),(le=E(_e))-be<te&&(xe[0]=le-te,xe[1]=W(J.min,le-te),be=w(xe))),this.minRange=te,this.min=be,this.max=le}getClosest(){let J,ie;if(this.categories)ie=1;else{let le=[];this.series.forEach(function(be){var ae;let te=be.closestPointRange;((ae=be.xData)==null?void 0:ae.length)===1?le.push(be.xData[0]):!be.noSharedTooltip&&S(te)&&be.reserveSpace()&&(ie=S(ie)?Math.min(ie,te):te)}),le.length&&(le.sort((be,te)=>be-te),J=$([le]))}return J&&ie?Math.min(J,ie):J||ie}nameToX(J){let ie=R(this.options.categories),le=ie?this.categories:this.names,be=J.options.x,te;return J.series.requireSorting=!1,S(be)||(be=this.uniqueNames&&le?ie?le.indexOf(J.name):W(le.keys[J.name],-1):J.series.autoIncrement()),be===-1?!ie&&le&&(te=le.length):te=be,te!==void 0?(this.names[te]=J.name,this.names.keys[J.name]=te):J.x&&(te=J.x),te}updateNames(){let J=this,ie=this.names;ie.length>0&&(Object.keys(ie.keys).forEach(function(le){delete ie.keys[le]}),ie.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach(le=>{le.xIncrement=null,(!le.points||le.isDirtyData)&&(J.max=Math.max(J.max,le.xData.length-1),le.processData(),le.generatePoints()),le.data.forEach(function(be,te){let ae;be!=null&&be.options&&be.name!==void 0&&(ae=J.nameToX(be))!==void 0&&ae!==be.x&&(be.x=ae,le.xData[te]=ae)})}))}setAxisTranslation(){let J=this,ie=J.max-J.min,le=J.linkedParent,be=!!J.categories,te=J.isXAxis,ae=J.axisPointRange||0,ce,xe=0,_e=0,Ne,ke=J.transA;(te||be||ae)&&(ce=J.getClosest(),le?(xe=le.minPointOffset,_e=le.pointRangePadding):J.series.forEach(function(Le){let me=be?1:te?W(Le.options.pointRange,ce,0):J.axisPointRange||0,Re=Le.options.pointPlacement;if(ae=Math.max(ae,me),!J.single||be){let $e=Le.is("xrange")?!te:te;xe=Math.max(xe,$e&&G(Re)?0:me/2),_e=Math.max(_e,$e&&Re==="on"?0:me)}}),Ne=J.ordinal&&J.ordinal.slope&&ce?J.ordinal.slope/ce:1,J.minPointOffset=xe*=Ne,J.pointRangePadding=_e*=Ne,J.pointRange=Math.min(ae,J.single&&be?1:ie),te&&ce&&(J.closestPointRange=ce)),J.translationSlope=J.transA=ke=J.staticScale||J.len/(ie+_e||1),J.transB=J.horiz?J.left:J.bottom,J.minPixelPadding=ke*xe,U(this,"afterSetAxisTranslation")}minFromRange(){let{max:J,min:ie}=this;return L(J)&&L(ie)&&J-ie||void 0}setTickInterval(J){var St,kt,ii,fi;let{categories:ie,chart:le,dataMax:be,dataMin:te,dateTime:ae,isXAxis:ce,logarithmic:xe,options:_e,softThreshold:Ne}=this,ke=L(this.threshold)?this.threshold:void 0,Le=this.minRange||0,{ceiling:me,floor:Re,linkedTo:$e,softMax:De,softMin:Se}=_e,Pe=L($e)&&((St=le[this.coll])==null?void 0:St[$e]),Fe=_e.tickPixelInterval,je=_e.maxPadding,He=_e.minPadding,Qe=0,at,rt=L(_e.tickInterval)&&_e.tickInterval>=0?_e.tickInterval:void 0,dt,gt,Tt,Nt;if(ae||ie||Pe||this.getTickAmount(),Tt=W(this.userMin,_e.min),Nt=W(this.userMax,_e.max),Pe?(this.linkedParent=Pe,at=Pe.getExtremes(),this.min=W(at.min,at.dataMin),this.max=W(at.max,at.dataMax),this.type!==Pe.type&&Z(11,!0,le)):(Ne&&S(ke)&&L(be)&&L(te)&&(te>=ke?(dt=ke,He=0):be<=ke&&(gt=ke,je=0)),this.min=W(Tt,dt,te),this.max=W(Nt,gt,be)),L(this.max)&&L(this.min)&&(xe&&(this.positiveValuesOnly&&!J&&0>=Math.min(this.min,W(te,this.min))&&Z(10,!0,le),this.min=M(xe.log2lin(this.min),16),this.max=M(xe.log2lin(this.max),16)),this.range&&L(te)&&(this.userMin=this.min=Tt=Math.max(te,this.minFromRange()||0),this.userMax=Nt=this.max,this.range=void 0)),U(this,"foundExtremes"),this.adjustForMinRange(),L(this.min)&&L(this.max)){if(!L(this.userMin)&&L(Se)&&Se<this.min&&(this.min=Tt=Se),!L(this.userMax)&&L(De)&&De>this.max&&(this.max=Nt=De),ie||this.axisPointRange||(kt=this.stacking)!=null&&kt.usePercentage||Pe||!(Qe=this.max-this.min)||(!S(Tt)&&He&&(this.min-=Qe*He),S(Nt)||!je||(this.max+=Qe*je)),!L(this.userMin)&&L(Re)&&(this.min=Math.max(this.min,Re)),!L(this.userMax)&&L(me)&&(this.max=Math.min(this.max,me)),Ne&&L(te)&&L(be)){let Ht=ke||0;!S(Tt)&&this.min<Ht&&te>=Ht?this.min=_e.minRange?Math.min(Ht,this.max-Le):Ht:!S(Nt)&&this.max>Ht&&be<=Ht&&(this.max=_e.minRange?Math.max(Ht,this.min+Le):Ht)}!le.polar&&this.min>this.max&&(S(_e.min)?this.max=this.min:S(_e.max)&&(this.min=this.max)),Qe=this.max-this.min}if(this.min!==this.max&&L(this.min)&&L(this.max)?Pe&&!rt&&Fe===Pe.options.tickPixelInterval?this.tickInterval=rt=Pe.tickInterval:this.tickInterval=W(rt,this.tickAmount?Qe/Math.max(this.tickAmount-1,1):void 0,ie?1:Qe*Fe/Math.max(this.len,Fe)):this.tickInterval=1,ce&&!J){let Ht=this.min!==((ii=this.old)==null?void 0:ii.min)||this.max!==((fi=this.old)==null?void 0:fi.max);this.series.forEach(function(fr){var nr;fr.forceCrop=(nr=fr.forceCropping)==null?void 0:nr.call(fr),fr.processData(Ht)}),U(this,"postProcessData",{hasExtremesChanged:Ht})}this.setAxisTranslation(),U(this,"initialAxisTranslation"),this.pointRange&&!rt&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval));let mt=W(_e.minTickInterval,ae&&!this.series.some(Ht=>Ht.noSharedTooltip)?this.closestPointRange:0);!rt&&this.tickInterval<mt&&(this.tickInterval=mt),ae||xe||rt||(this.tickInterval=Ce(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()}setTickPositions(){var Ne,ke;let J=this.options,ie=J.tickPositions,le=J.tickPositioner,be=this.getMinorTickInterval(),te=!this.isPanning,ae=te&&J.startOnTick,ce=te&&J.endOnTick,xe=[],_e;if(this.tickmarkOffset=this.categories&&J.tickmarkPlacement==="between"&&this.tickInterval===1?.5:0,this.single=this.min===this.max&&S(this.min)&&!this.tickAmount&&(this.min%1==0||J.allowDecimals!==!1),ie)xe=ie.slice();else if(L(this.min)&&L(this.max)){if(!((Ne=this.ordinal)!=null&&Ne.positions)&&(this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))xe=[this.min,this.max],Z(19,!1,this.chart);else if(this.dateTime)xe=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,J.units),this.min,this.max,J.startOfWeek,(ke=this.ordinal)==null?void 0:ke.positions,this.closestPointRange,!0);else if(this.logarithmic)xe=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else{let Le=this.tickInterval,me=Le;for(;me<=2*Le&&(xe=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&xe.length>this.tickAmount);)this.tickInterval=Ce(this,me*=1.1)}xe.length>this.len&&(xe=[xe[0],xe[xe.length-1]])[0]===xe[1]&&(xe.length=1),le&&(this.tickPositions=xe,(_e=le.apply(this,[this.min,this.max]))&&(xe=_e))}this.tickPositions=xe,this.minorTickInterval=be==="auto"&&this.tickInterval?this.tickInterval/J.minorTicksPerMajor:be,this.paddedTicks=xe.slice(0),this.trimTicks(xe,ae,ce),!this.isLinked&&L(this.min)&&L(this.max)&&(this.single&&xe.length<2&&!this.categories&&!this.series.some(Le=>Le.is("heatmap")&&Le.options.pointPlacement==="between")&&(this.min-=.5,this.max+=.5),ie||_e||this.adjustTickAmount()),U(this,"afterSetTickPositions")}trimTicks(J,ie,le){let be=J[0],te=J[J.length-1],ae=!this.isOrdinal&&this.minPointOffset||0;if(U(this,"trimTicks"),!this.isLinked){if(ie&&be!==-1/0)this.min=be;else for(;this.min-ae>J[0];)J.shift();if(le)this.max=te;else for(;this.max+ae<J[J.length-1];)J.pop();J.length===0&&S(be)&&!this.options.tickPositions&&J.push((te+be)/2)}}alignToOthers(){let J,ie=this,le=ie.chart,be=[this],te=ie.options,ae=le.options.chart,ce=this.coll==="yAxis"&&ae.alignThresholds,xe=[];if(ie.thresholdAlignment=void 0,(ae.alignTicks!==!1&&te.alignTicks||ce)&&te.startOnTick!==!1&&te.endOnTick!==!1&&!ie.logarithmic){let _e=ke=>{let{horiz:Le,options:me}=ke;return[Le?me.left:me.top,me.width,me.height,me.pane].join(",")},Ne=_e(this);le[this.coll].forEach(function(ke){let{series:Le}=ke;Le.length&&Le.some(me=>me.visible)&&ke!==ie&&_e(ke)===Ne&&(J=!0,be.push(ke))})}if(J&&ce){be.forEach(Ne=>{let ke=Ne.getThresholdAlignment(ie);L(ke)&&xe.push(ke)});let _e=xe.length>1?xe.reduce((Ne,ke)=>Ne+=ke,0)/xe.length:void 0;be.forEach(Ne=>{Ne.thresholdAlignment=_e})}return J}getThresholdAlignment(J){if((!L(this.dataMin)||this!==J&&this.series.some(ie=>ie.isDirty||ie.isDirtyData))&&this.getSeriesExtremes(),L(this.threshold)){let ie=A((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1);return this.options.reversed&&(ie=1-ie),ie}}getTickAmount(){let J=this.options,ie=J.tickPixelInterval,le=J.tickAmount;S(J.tickInterval)||le||!(this.len<ie)||this.isRadial||this.logarithmic||!J.startOnTick||!J.endOnTick||(le=2),!le&&this.alignToOthers()&&(le=Math.ceil(this.len/ie)+1),le<4&&(this.finalTickAmt=le,le=5),this.tickAmount=le}adjustTickAmount(){let J=this,{finalTickAmt:ie,max:le,min:be,options:te,tickPositions:ae,tickAmount:ce,thresholdAlignment:xe}=J,_e=ae==null?void 0:ae.length,Ne=W(J.threshold,J.softThreshold?0:null),ke,Le,me=J.tickInterval,Re,$e=()=>ae.push(M(ae[ae.length-1]+me)),De=()=>ae.unshift(M(ae[0]-me));if(L(xe)&&(Re=xe<.5?Math.ceil(xe*(ce-1)):Math.floor(xe*(ce-1)),te.reversed&&(Re=ce-1-Re)),J.hasData()&&L(be)&&L(le)){let Se=()=>{J.transA*=(_e-1)/(ce-1),J.min=te.startOnTick?ae[0]:Math.min(be,ae[0]),J.max=te.endOnTick?ae[ae.length-1]:Math.max(le,ae[ae.length-1])};if(L(Re)&&L(J.threshold)){for(;ae[Re]!==Ne||ae.length!==ce||ae[0]>be||ae[ae.length-1]<le;){for(ae.length=0,ae.push(J.threshold);ae.length<ce;)ae[Re]===void 0||ae[Re]>J.threshold?De():$e();if(me>8*J.tickInterval)break;me*=2}Se()}else if(_e<ce){for(;ae.length<ce;)ae.length%2||be===Ne?$e():De();Se()}if(S(ie)){for(Le=ke=ae.length;Le--;)(ie===3&&Le%2==1||ie<=2&&Le>0&&Le<ke-1)&&ae.splice(Le,1);J.finalTickAmt=void 0}}}setScale(){var ae,ce;let{coll:J,stacking:ie}=this,le=!1,be=!1;this.series.forEach(xe=>{le=le||xe.isDirtyData||xe.isDirty,be=be||xe.xAxis&&xe.xAxis.isDirty||!1}),this.setAxisSize();let te=this.len!==(this.old&&this.old.len);te||le||be||this.isLinked||this.forceRedraw||this.userMin!==(this.old&&this.old.userMin)||this.userMax!==(this.old&&this.old.userMax)||this.alignToOthers()?(ie&&J==="yAxis"&&ie.buildStacks(),this.forceRedraw=!1,this.userMinRange||(this.minRange=void 0),this.getSeriesExtremes(),this.setTickInterval(),ie&&J==="xAxis"&&ie.buildStacks(),this.isDirty||(this.isDirty=te||this.min!==((ae=this.old)==null?void 0:ae.min)||this.max!==((ce=this.old)==null?void 0:ce.max))):ie&&ie.cleanStacks(),le&&delete this.allExtremes,U(this,"afterSetScale")}setExtremes(J,ie,le=!0,be,te){this.series.forEach(ae=>{delete ae.kdTree}),U(this,"setExtremes",te=K(te,{min:J,max:ie}),ae=>{this.userMin=ae.min,this.userMax=ae.max,this.eventArgs=ae,le&&this.chart.redraw(be)})}setAxisSize(){let J=this.chart,ie=this.options,le=ie.offsets||[0,0,0,0],be=this.horiz,te=this.width=Math.round(se(W(ie.width,J.plotWidth-le[3]+le[1]),J.plotWidth)),ae=this.height=Math.round(se(W(ie.height,J.plotHeight-le[0]+le[2]),J.plotHeight)),ce=this.top=Math.round(se(W(ie.top,J.plotTop+le[0]),J.plotHeight,J.plotTop)),xe=this.left=Math.round(se(W(ie.left,J.plotLeft+le[3]),J.plotWidth,J.plotLeft));this.bottom=J.chartHeight-ae-ce,this.right=J.chartWidth-te-xe,this.len=Math.max(be?te:ae,0),this.pos=be?xe:ce}getExtremes(){let J=this.logarithmic;return{min:J?M(J.lin2log(this.min)):this.min,max:J?M(J.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}}getThreshold(J){let ie=this.logarithmic,le=ie?ie.lin2log(this.min):this.min,be=ie?ie.lin2log(this.max):this.max;return J===null||J===-1/0?J=le:J===1/0?J=be:le>J?J=le:be<J&&(J=be),this.translate(J,0,1,0,1)}autoLabelAlign(J){let ie=(W(J,0)-90*this.side+720)%360,le={align:"center"};return U(this,"autoLabelAlign",le,function(be){ie>15&&ie<165?be.align="right":ie>195&&ie<345&&(be.align="left")}),le.align}tickSize(J){let ie=this.options,le=W(ie[J==="tick"?"tickWidth":"minorTickWidth"],J==="tick"&&this.isXAxis&&!this.categories?1:0),be=ie[J==="tick"?"tickLength":"minorTickLength"],te;le&&be&&(ie[J+"Position"]==="inside"&&(be=-be),te=[be,le]);let ae={tickSize:te};return U(this,"afterTickSize",ae),ae.tickSize}labelMetrics(){let J=this.chart.renderer,ie=this.ticks,le=ie[Object.keys(ie)[0]]||{};return this.chart.renderer.fontMetrics(le.label||le.movedLabel||J.box)}unsquish(){let J=this.options.labels,ie=J.padding||0,le=this.horiz,be=this.tickInterval,te=this.len/(((this.categories?1:0)+this.max-this.min)/be),ae=J.rotation,ce=M(.8*this.labelMetrics().h),xe=Math.max(this.max-this.min,0),_e=function(Re){let $e=(Re+2*ie)/(te||1);return($e=$e>1?Math.ceil($e):1)*be>xe&&Re!==1/0&&te!==1/0&&xe&&($e=Math.ceil(xe/be)),M($e*be)},Ne=be,ke,Le=Number.MAX_VALUE,me;if(le){if(!J.staggerLines&&(L(ae)?me=[ae]:te<J.autoRotationLimit&&(me=J.autoRotation)),me){let Re,$e;for(let De of me)(De===ae||De&&De>=-90&&De<=90)&&($e=(Re=_e(Math.abs(ce/Math.sin(k*De))))+Math.abs(De/360))<Le&&(Le=$e,ke=De,Ne=Re)}}else Ne=_e(.75*ce);return this.autoRotation=me,this.labelRotation=W(ke,L(ae)?ae:0),J.step?be:Ne}getSlotWidth(J){let ie=this.chart,le=this.horiz,be=this.options.labels,te=Math.max(this.tickPositions.length-(this.categories?0:1),1),ae=ie.margin[3];if(J&&L(J.slotWidth))return J.slotWidth;if(le&&be.step<2)return be.rotation?0:(this.staggerLines||1)*this.len/te;if(!le){let ce=be.style.width;if(ce!==void 0)return parseInt(String(ce),10);if(ae)return ae-ie.spacing[3]}return .33*ie.chartWidth}renderUnsquish(){let J=this.chart,ie=J.renderer,le=this.tickPositions,be=this.ticks,te=this.options.labels,ae=te.style,ce=this.horiz,xe=this.getSlotWidth(),_e=Math.max(1,Math.round(xe-(ce?2*(te.padding||0):te.distance||0))),Ne={},ke=this.labelMetrics(),Le=ae.textOverflow,me,Re,$e=0,De,Se;if(G(te.rotation)||(Ne.rotation=te.rotation||0),le.forEach(function(Pe){let Fe=be[Pe];Fe.movedLabel&&Fe.replaceMovedLabel(),Fe&&Fe.label&&Fe.label.textPxLength>$e&&($e=Fe.label.textPxLength)}),this.maxLabelLength=$e,this.autoRotation)$e>_e&&$e>ke.h?Ne.rotation=this.labelRotation:this.labelRotation=0;else if(xe&&(me=_e,!Le))for(Re="clip",Se=le.length;!ce&&Se--;)(De=be[le[Se]].label)&&(De.styles.textOverflow==="ellipsis"?De.css({textOverflow:"clip"}):De.textPxLength>xe&&De.css({width:xe+"px"}),De.getBBox().height>this.len/le.length-(ke.h-ke.f)&&(De.specificTextOverflow="ellipsis"));Ne.rotation&&(me=$e>.5*J.chartHeight?.33*J.chartHeight:$e,Le||(Re="ellipsis")),this.labelAlign=te.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(Ne.align=this.labelAlign),le.forEach(function(Pe){let Fe=be[Pe],je=Fe&&Fe.label,He=ae.width,Qe={};je&&(je.attr(Ne),Fe.shortenLabel?Fe.shortenLabel():me&&!He&&ae.whiteSpace!=="nowrap"&&(me<je.textPxLength||je.element.tagName==="SPAN")?(Qe.width=me+"px",Le||(Qe.textOverflow=je.specificTextOverflow||Re),je.css(Qe)):!je.styles.width||Qe.width||He||je.css({width:null}),delete je.specificTextOverflow,Fe.rotation=Ne.rotation)},this),this.tickRotCorr=ie.rotCorr(ke.b,this.labelRotation||0,this.side!==0)}hasData(){return this.series.some(function(J){return J.hasData()})||this.options.showEmpty&&S(this.min)&&S(this.max)}addTitle(J){let ie,le=this.chart.renderer,be=this.horiz,te=this.opposite,ae=this.options.title,ce=this.chart.styledMode;this.axisTitle||((ie=ae.textAlign)||(ie=(be?{low:"left",middle:"center",high:"right"}:{low:te?"right":"left",middle:"center",high:te?"left":"right"})[ae.align]),this.axisTitle=le.text(ae.text||"",0,0,ae.useHTML).attr({zIndex:7,rotation:ae.rotation||0,align:ie}).addClass("highcharts-axis-title"),ce||this.axisTitle.css(F(ae.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),ce||ae.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[J?"show":"hide"](J)}generateTick(J){let ie=this.ticks;ie[J]?ie[J].addLabel():ie[J]=new m(this,J)}createGroups(){let{axisParent:J,chart:ie,coll:le,options:be}=this,te=ie.renderer,ae=(ce,xe,_e)=>te.g(ce).attr({zIndex:_e}).addClass(`highcharts-${le.toLowerCase()}${xe} `+(this.isRadial?`highcharts-radial-axis${xe} `:"")+(be.className||"")).add(J);this.axisGroup||(this.gridGroup=ae("grid","-grid",be.gridZIndex),this.axisGroup=ae("axis","",be.zIndex),this.labelGroup=ae("axis-labels","-labels",be.labels.zIndex))}getOffset(){let J=this,{chart:ie,horiz:le,options:be,side:te,ticks:ae,tickPositions:ce,coll:xe}=J,_e=ie.inverted&&!J.isZAxis?[1,0,3,2][te]:te,Ne=J.hasData(),ke=be.title,Le=be.labels,me=L(be.crossing),Re=ie.axisOffset,$e=ie.clipOffset,De=[-1,1,1,-1][te],Se,Pe=0,Fe,je=0,He=0,Qe,at;if(J.showAxis=Se=Ne||be.showEmpty,J.staggerLines=J.horiz&&Le.staggerLines||void 0,J.createGroups(),Ne||J.isLinked?(ce.forEach(function(rt){J.generateTick(rt)}),J.renderUnsquish(),J.reserveSpaceDefault=te===0||te===2||{1:"left",3:"right"}[te]===J.labelAlign,W(Le.reserveSpace,!me&&null,J.labelAlign==="center"||null,J.reserveSpaceDefault)&&ce.forEach(function(rt){He=Math.max(ae[rt].getLabelSize(),He)}),J.staggerLines&&(He*=J.staggerLines),J.labelOffset=He*(J.opposite?-1:1)):q(ae,function(rt,dt){rt.destroy(),delete ae[dt]}),ke!=null&&ke.text&&ke.enabled!==!1&&(J.addTitle(Se),Se&&!me&&ke.reserveSpace!==!1&&(J.titleOffset=Pe=J.axisTitle.getBBox()[le?"height":"width"],je=S(Fe=ke.offset)?0:W(ke.margin,le?5:10))),J.renderLine(),J.offset=De*W(be.offset,Re[te]?Re[te]+(be.margin||0):0),J.tickRotCorr=J.tickRotCorr||{x:0,y:0},at=te===0?-J.labelMetrics().h:te===2?J.tickRotCorr.y:0,Qe=Math.abs(He)+je,He&&(Qe-=at,Qe+=De*(le?W(Le.y,J.tickRotCorr.y+De*Le.distance):W(Le.x,De*Le.distance))),J.axisTitleMargin=W(Fe,Qe),J.getMaxLabelDimensions&&(J.maxLabelDimensions=J.getMaxLabelDimensions(ae,ce)),xe!=="colorAxis"&&$e){let rt=this.tickSize("tick");Re[te]=Math.max(Re[te],(J.axisTitleMargin||0)+Pe+De*J.offset,Qe,ce&&ce.length&&rt?rt[0]+De*J.offset:0);let dt=!J.axisLine||be.offset?0:J.axisLine.strokeWidth()/2;$e[_e]=Math.max($e[_e],dt)}U(this,"afterGetOffset")}getLinePath(J){let ie=this.chart,le=this.opposite,be=this.offset,te=this.horiz,ae=this.left+(le?this.width:0)+be,ce=ie.chartHeight-this.bottom-(le?this.height:0)+be;return le&&(J*=-1),ie.renderer.crispLine([["M",te?this.left:ae,te?ce:this.top],["L",te?ie.chartWidth-this.right:ae,te?ce:ie.chartHeight-this.bottom]],J)}renderLine(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))}getTitlePosition(J){let ie=this.horiz,le=this.left,be=this.top,te=this.len,ae=this.options.title,ce=ie?le:be,xe=this.opposite,_e=this.offset,Ne=ae.x,ke=ae.y,Le=this.chart.renderer.fontMetrics(J),me=J?Math.max(J.getBBox(!1,0).height-Le.h-1,0):0,Re={low:ce+(ie?0:te),middle:ce+te/2,high:ce+(ie?te:0)}[ae.align],$e=(ie?be+this.height:le)+(ie?1:-1)*(xe?-1:1)*(this.axisTitleMargin||0)+[-me,me,Le.f,-me][this.side],De={x:ie?Re+Ne:$e+(xe?this.width:0)+_e+Ne,y:ie?$e+ke-(xe?this.height:0)+_e:Re+ke};return U(this,"afterGetTitlePosition",{titlePosition:De}),De}renderMinorTick(J,ie){let le=this.minorTicks;le[J]||(le[J]=new m(this,J,"minor")),ie&&le[J].isNew&&le[J].render(null,!0),le[J].render(null,!1,1)}renderTick(J,ie,le){let be=this.isLinked,te=this.ticks;(!be||J>=this.min&&J<=this.max||this.grid&&this.grid.isColumn)&&(te[J]||(te[J]=new m(this,J)),le&&te[J].isNew&&te[J].render(ie,!0,-1),te[J].render(ie))}render(){let J,ie,le=this,be=le.chart,te=le.logarithmic,ae=be.renderer,ce=le.options,xe=le.isLinked,_e=le.tickPositions,Ne=le.axisTitle,ke=le.ticks,Le=le.minorTicks,me=le.alternateBands,Re=ce.stackLabels,$e=ce.alternateGridColor,De=ce.crossing,Se=le.tickmarkOffset,Pe=le.axisLine,Fe=le.showAxis,je=g(ae.globalAnimation);if(le.labelEdge.length=0,le.overlap=!1,[ke,Le,me].forEach(function(He){q(He,function(Qe){Qe.isActive=!1})}),L(De)){let He=this.isXAxis?be.yAxis[0]:be.xAxis[0],Qe=[1,-1,-1,1][this.side];if(He){let at=He.toPixels(De,!0);le.horiz&&(at=He.len-at),le.offset=Qe*at}}if(le.hasData()||xe){let He=le.chart.hasRendered&&le.old&&L(le.old.min);le.minorTickInterval&&!le.categories&&le.getMinorTickPositions().forEach(function(Qe){le.renderMinorTick(Qe,He)}),_e.length&&(_e.forEach(function(Qe,at){le.renderTick(Qe,at,He)}),Se&&(le.min===0||le.single)&&(ke[-1]||(ke[-1]=new m(le,-1,null,!0)),ke[-1].render(-1))),$e&&_e.forEach(function(Qe,at){ie=_e[at+1]!==void 0?_e[at+1]+Se:le.max-Se,at%2==0&&Qe<le.max&&ie<=le.max+(be.polar?-Se:Se)&&(me[Qe]||(me[Qe]=new p.PlotLineOrBand(le,{})),J=Qe+Se,me[Qe].options={from:te?te.lin2log(J):J,to:te?te.lin2log(ie):ie,color:$e,className:"highcharts-alternate-grid"},me[Qe].render(),me[Qe].isActive=!0)}),le._addedPlotLB||(le._addedPlotLB=!0,(ce.plotLines||[]).concat(ce.plotBands||[]).forEach(function(Qe){le.addPlotBandOrLine(Qe)}))}[ke,Le,me].forEach(function(He){let Qe=[],at=je.duration;q(He,function(rt,dt){rt.isActive||(rt.render(dt,!1,0),rt.isActive=!1,Qe.push(dt))}),oe(function(){let rt=Qe.length;for(;rt--;)He[Qe[rt]]&&!He[Qe[rt]].isActive&&(He[Qe[rt]].destroy(),delete He[Qe[rt]])},He!==me&&be.hasRendered&&at?at:0)}),Pe&&(Pe[Pe.isPlaced?"animate":"attr"]({d:this.getLinePath(Pe.strokeWidth())}),Pe.isPlaced=!0,Pe[Fe?"show":"hide"](Fe)),Ne&&Fe&&(Ne[Ne.isNew?"attr":"animate"](le.getTitlePosition(Ne)),Ne.isNew=!1),Re&&Re.enabled&&le.stacking&&le.stacking.renderStackTotals(),le.old={len:le.len,max:le.max,min:le.min,transA:le.transA,userMax:le.userMax,userMin:le.userMin},le.isDirty=!1,U(this,"afterRender")}redraw(){this.visible&&(this.render(),this.plotLinesAndBands.forEach(function(J){J.render()})),this.series.forEach(function(J){J.isDirty=!0})}getKeepProps(){return this.keepProps||ge.keepProps}destroy(J){let ie=this,le=ie.plotLinesAndBands,be=this.eventOptions;if(U(this,"destroy",{keepEvents:J}),J||fe(ie),[ie.ticks,ie.minorTicks,ie.alternateBands].forEach(function(te){N(te)}),le){let te=le.length;for(;te--;)le[te].destroy()}for(let te in["axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross","scrollbar"].forEach(function(ae){ie[ae]&&(ie[ae]=ie[ae].destroy())}),ie.plotLinesAndBandsGroups)ie.plotLinesAndBandsGroups[te]=ie.plotLinesAndBandsGroups[te].destroy();q(ie,function(te,ae){ie.getKeepProps().indexOf(ae)===-1&&delete ie[ae]}),this.eventOptions=be}drawCrosshair(J,ie){let le=this.crosshair,be=W(le&&le.snap,!0),te=this.chart,ae,ce,xe,_e=this.cross,Ne;if(U(this,"drawCrosshair",{e:J,point:ie}),J||(J=this.cross&&this.cross.e),le&&(S(ie)||!be)!==!1){if(be?S(ie)&&(ce=W(this.coll!=="colorAxis"?ie.crosshairPos:null,this.isXAxis?ie.plotX:this.len-ie.plotY)):ce=J&&(this.horiz?J.chartX-this.pos:this.len-J.chartY+this.pos),S(ce)&&(Ne={value:ie&&(this.isXAxis?ie.x:W(ie.stackY,ie.y)),translatedValue:ce},te.polar&&K(Ne,{isCrosshair:!0,chartX:J&&J.chartX,chartY:J&&J.chartY,point:ie}),ae=this.getPlotLinePath(Ne)||null),!S(ae)){this.hideCrosshair();return}xe=this.categories&&!this.isRadial,_e||(this.cross=_e=te.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(xe?"category ":"thin ")+(le.className||"")).attr({zIndex:W(le.zIndex,2)}).add(),!te.styledMode&&(_e.attr({stroke:le.color||(xe?c.parse("#ccd3ff").setOpacity(.25).get():"#cccccc"),"stroke-width":W(le.width,1)}).css({"pointer-events":"none"}),le.dashStyle&&_e.attr({dashstyle:le.dashStyle}))),_e.show().attr({d:ae}),xe&&!le.width&&_e.attr({"stroke-width":this.transA}),this.cross.e=J}else this.hideCrosshair();U(this,"afterDrawCrosshair",{e:J,point:ie})}hideCrosshair(){this.cross&&this.cross.hide(),U(this,"afterHideCrosshair")}update(J,ie){let le=this.chart;J=F(this.userOptions,J),this.destroy(!0),this.init(le,J),le.isDirtyBox=!0,W(ie,!0)&&le.redraw()}remove(J){let ie=this.chart,le=this.coll,be=this.series,te=be.length;for(;te--;)be[te]&&be[te].remove(!1);Y(ie.axes,this),Y(ie[le]||[],this),ie.orderItems(le),this.destroy(),ie.isDirtyBox=!0,W(J,!0)&&ie.redraw()}setTitle(J,ie){this.update({title:J},ie)}setCategories(J,ie){this.update({categories:J},ie)}}return ge.keepProps=["coll","extKey","hcEvents","len","names","series","userMax","userMin"],ge}),r(t,"Core/Axis/DateTimeAxis.js",[t["Core/Utilities.js"]],function(n){var a;let{addEvent:c,getMagnitude:s,normalizeTickInterval:h,timeUnits:p}=n;return function(m){function y(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function g(){if(this.type!=="datetime"){this.dateTime=void 0;return}this.dateTime||(this.dateTime=new x(this))}m.compose=function(v){return v.keepProps.includes("dateTime")||(v.keepProps.push("dateTime"),v.prototype.getTimeTicks=y,c(v,"afterSetType",g)),v};class x{constructor(_){this.axis=_}normalizeTimeTickInterval(_,C){let k=C||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],w=k[k.length-1],E=p[w[0]],A=w[1],M;for(M=0;M<k.length&&(E=p[(w=k[M])[0]],A=w[1],!k[M+1]||!(_<=(E*A[A.length-1]+p[k[M+1][0]])/2));M++);E===p.year&&_<5*E&&(A=[1,2,5]);let S=h(_/E,A,w[0]==="year"?Math.max(s(_/E),1):1);return{unitRange:E,count:S,unitName:w[0]}}getXDateFormat(_,C){let{axis:k}=this,w=k.chart.time;return k.closestPointRange?w.getDateFormat(k.closestPointRange,_,k.options.startOfWeek,C)||w.resolveDTLFormat(C.year).main:w.resolveDTLFormat(C.day).main}}m.Additions=x}(a||(a={})),a}),r(t,"Core/Axis/LogarithmicAxis.js",[t["Core/Utilities.js"]],function(n){var a;let{addEvent:c,normalizeTickInterval:s,pick:h}=n;return function(p){function m(){this.type!=="logarithmic"?this.logarithmic=void 0:this.logarithmic??(this.logarithmic=new g(this))}function y(){let x=this.logarithmic;x&&(this.lin2val=function(v){return x.lin2log(v)},this.val2lin=function(v){return x.log2lin(v)})}p.compose=function(x){return x.keepProps.includes("logarithmic")||(x.keepProps.push("logarithmic"),c(x,"afterSetType",m),c(x,"afterInit",y)),x};class g{constructor(v){this.axis=v}getLogTickPositions(v,_,C,k){let w=this.axis,E=w.len,A=w.options,M=[];if(k||(this.minorAutoInterval=void 0),v>=.5)v=Math.round(v),M=w.getLinearTickPositions(v,_,C);else if(v>=.08){let S,N,Y,Z,K,U,$,B=Math.floor(_);for(S=v>.3?[1,2,4]:v>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],N=B;N<C+1&&!$;N++)for(Y=0,Z=S.length;Y<Z&&!$;Y++)(K=this.log2lin(this.lin2log(N)*S[Y]))>_&&(!k||U<=C)&&U!==void 0&&M.push(U),U>C&&($=!0),U=K}else{let S=this.lin2log(_),N=this.lin2log(C),Y=k?w.getMinorTickInterval():A.tickInterval,Z=A.tickPixelInterval/(k?5:1),K=k?E/w.tickPositions.length:E;v=s(v=h(Y==="auto"?null:Y,this.minorAutoInterval,(N-S)*Z/(K||1))),M=w.getLinearTickPositions(v,S,N).map(this.log2lin),k||(this.minorAutoInterval=v/5)}return k||(w.tickInterval=v),M}lin2log(v){return Math.pow(10,v)}log2lin(v){return Math.log(v)/Math.LN10}}p.Additions=g}(a||(a={})),a}),r(t,"Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js",[t["Core/Utilities.js"]],function(n){var a;let{erase:c,extend:s,isNumber:h}=n;return function(p){let m;function y(w){return this.addPlotBandOrLine(w,"plotBands")}function g(w,E){let A=this.userOptions,M=new m(this,w);if(this.visible&&(M=M.render()),M){if(this._addedPlotLB||(this._addedPlotLB=!0,(A.plotLines||[]).concat(A.plotBands||[]).forEach(S=>{this.addPlotBandOrLine(S)})),E){let S=A[E]||[];S.push(w),A[E]=S}this.plotLinesAndBands.push(M)}return M}function x(w){return this.addPlotBandOrLine(w,"plotLines")}function v(w,E,A){A=A||this.options;let M=this.getPlotLinePath({value:E,force:!0,acrossPanes:A.acrossPanes}),S=[],N=this.horiz,Y=!h(this.min)||!h(this.max)||w<this.min&&E<this.min||w>this.max&&E>this.max,Z=this.getPlotLinePath({value:w,force:!0,acrossPanes:A.acrossPanes}),K,U=1,$;if(Z&&M)for(Y&&($=Z.toString()===M.toString(),U=0),K=0;K<Z.length;K+=2){let B=Z[K],R=Z[K+1],L=M[K],G=M[K+1];(B[0]==="M"||B[0]==="L")&&(R[0]==="M"||R[0]==="L")&&(L[0]==="M"||L[0]==="L")&&(G[0]==="M"||G[0]==="L")&&(N&&L[1]===B[1]?(L[1]+=U,G[1]+=U):N||L[2]!==B[2]||(L[2]+=U,G[2]+=U),S.push(["M",B[1],B[2]],["L",R[1],R[2]],["L",G[1],G[2]],["L",L[1],L[2]],["Z"])),S.isFlat=$}return S}function _(w){this.removePlotBandOrLine(w)}function C(w){let E=this.plotLinesAndBands,A=this.options,M=this.userOptions;if(E){let S=E.length;for(;S--;)E[S].id===w&&E[S].destroy();[A.plotLines||[],M.plotLines||[],A.plotBands||[],M.plotBands||[]].forEach(function(N){for(S=N.length;S--;)(N[S]||{}).id===w&&c(N,N[S])})}}function k(w){this.removePlotBandOrLine(w)}p.compose=function(w,E){let A=E.prototype;return A.addPlotBand||(m=w,s(A,{addPlotBand:y,addPlotLine:x,addPlotBandOrLine:g,getPlotBandPath:v,removePlotBand:_,removePlotLine:k,removePlotBandOrLine:C})),E}}(a||(a={})),a}),r(t,"Core/Axis/PlotLineOrBand/PlotLineOrBand.js",[t["Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js"],t["Core/Utilities.js"]],function(n,a){let{addEvent:c,arrayMax:s,arrayMin:h,defined:p,destroyObjectProperties:m,erase:y,fireEvent:g,merge:x,objectEach:v,pick:_}=a;class C{static compose(w,E){return c(w,"afterInit",function(){this.labelCollectors.push(()=>{var M;let A=[];for(let S of this.axes)for(let{label:N,options:Y}of S.plotLinesAndBands)N&&!((M=Y==null?void 0:Y.label)!=null&&M.allowOverlap)&&A.push(N);return A})}),n.compose(C,E)}constructor(w,E){this.axis=w,this.options=E,this.id=E.id}render(){g(this,"render");let{axis:w,options:E}=this,{horiz:A,logarithmic:M}=w,{color:S,events:N,zIndex:Y=0}=E,Z={},K=w.chart.renderer,U=E.to,$=E.from,B=E.value,R=E.borderWidth,L=E.label,{label:G,svgElem:F}=this,j=[],q,W=p($)&&p(U),se=p(B),fe=!F,ee={class:"highcharts-plot-"+(W?"band ":"line ")+(E.className||"")},oe=W?"bands":"lines";if(!w.chart.styledMode&&(se?(ee.stroke=S||"#999999",ee["stroke-width"]=_(E.width,1),E.dashStyle&&(ee.dashstyle=E.dashStyle)):W&&(ee.fill=S||"#e6e9ff",R&&(ee.stroke=E.borderColor,ee["stroke-width"]=R))),Z.zIndex=Y,oe+="-"+Y,(q=w.plotLinesAndBandsGroups[oe])||(w.plotLinesAndBandsGroups[oe]=q=K.g("plot-"+oe).attr(Z).add()),F||(this.svgElem=F=K.path().attr(ee).add(q)),p(B))j=w.getPlotLinePath({value:(M==null?void 0:M.log2lin(B))??B,lineWidth:F.strokeWidth(),acrossPanes:E.acrossPanes});else{if(!(p($)&&p(U)))return;j=w.getPlotBandPath((M==null?void 0:M.log2lin($))??$,(M==null?void 0:M.log2lin(U))??U,E)}return!this.eventsAdded&&N&&(v(N,(Ce,ge)=>{F==null||F.on(ge,Ee=>{N[ge].apply(this,[Ee])})}),this.eventsAdded=!0),(fe||!F.d)&&(j!=null&&j.length)?F.attr({d:j}):F&&(j?(F.show(),F.animate({d:j})):F.d&&(F.hide(),G&&(this.label=G=G.destroy()))),L&&(p(L.text)||p(L.formatter))&&(j!=null&&j.length)&&w.width>0&&w.height>0&&!j.isFlat?(L=x({align:A&&W?"center":void 0,x:A?!W&&4:10,verticalAlign:!A&&W?"middle":void 0,y:A?W?16:10:W?6:-4,rotation:A&&!W?90:0,...W?{inside:!0}:{}},L),this.renderLabel(L,j,W,Y)):G&&G.hide(),this}renderLabel(w,E,A,M){var L;let S=this.axis,N=S.chart.renderer,Y=w.inside,Z=this.label;Z||(this.label=Z=N.text(this.getLabelText(w),0,0,w.useHTML).attr({align:w.textAlign||w.align,rotation:w.rotation,class:"highcharts-plot-"+(A?"band":"line")+"-label "+(w.className||""),zIndex:M}),S.chart.styledMode||Z.css(x({fontSize:"0.8em",textOverflow:A&&!Y?"":"ellipsis"},w.style)),Z.add());let K=E.xBounds||[E[0][1],E[1][1],A?E[2][1]:E[0][1]],U=E.yBounds||[E[0][2],E[1][2],A?E[2][2]:E[0][2]],$=h(K),B=h(U),R=s(K)-$;Z.align(w,!1,{x:$,y:B,width:R,height:s(U)-B}),(!Z.alignValue||Z.alignValue==="left"||p(Y))&&Z.css({width:(((L=w.style)==null?void 0:L.width)||(A&&Y?R:Z.rotation===90?S.height-(Z.alignAttr.y-S.top):(w.clip?S.width:S.chart.chartWidth)-(Z.alignAttr.x-S.left)))+"px"}),Z.show(!0)}getLabelText(w){return p(w.formatter)?w.formatter.call(this):w.text}destroy(){y(this.axis.plotLinesAndBands,this),delete this.axis,m(this)}}return C}),r(t,"Core/Tooltip.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,p){var m;let{animObject:y}=n,{format:g}=a,{composed:x,doc:v,isSafari:_}=c,{distribute:C}=s,{addEvent:k,clamp:w,css:E,discardElement:A,extend:M,fireEvent:S,isArray:N,isNumber:Y,isString:Z,merge:K,pick:U,pushUnique:$,splat:B,syncTimeout:R}=p;class L{constructor(F,j,q){this.allowShared=!0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.options={},this.outside=!1,this.chart=F,this.init(F,j),this.pointer=q}bodyFormatter(F){return F.map(function(j){let q=j.series.tooltipOptions;return(q[(j.point.formatPrefix||"point")+"Formatter"]||j.point.tooltipFormatter).call(j.point,q[(j.point.formatPrefix||"point")+"Format"]||"")})}cleanSplit(F){this.chart.series.forEach(function(j){let q=j&&j.tt;q&&(!q.isActive||F?j.tt=q.destroy():q.isActive=!1)})}defaultFormatter(F){let j,q=this.points||B(this);return(j=(j=[F.tooltipFooterHeaderFormatter(q[0])]).concat(F.bodyFormatter(q))).push(F.tooltipFooterHeaderFormatter(q[0],!0)),j}destroy(){this.label&&(this.label=this.label.destroy()),this.split&&(this.cleanSplit(!0),this.tt&&(this.tt=this.tt.destroy())),this.renderer&&(this.renderer=this.renderer.destroy(),A(this.container)),p.clearTimeout(this.hideTimer)}getAnchor(F,j){let q,{chart:W,pointer:se}=this,fe=W.inverted,ee=W.plotTop,oe=W.plotLeft;if((F=B(F))[0].series&&F[0].series.yAxis&&!F[0].series.yAxis.options.reversedStacks&&(F=F.slice().reverse()),this.followPointer&&j)j.chartX===void 0&&(j=se.normalize(j)),q=[j.chartX-oe,j.chartY-ee];else if(F[0].tooltipPos)q=F[0].tooltipPos;else{let Ce=0,ge=0;F.forEach(function(Ee){let J=Ee.pos(!0);J&&(Ce+=J[0],ge+=J[1])}),Ce/=F.length,ge/=F.length,this.shared&&F.length>1&&j&&(fe?Ce=j.chartX:ge=j.chartY),q=[Ce-oe,ge-ee]}return q.map(Math.round)}getClassName(F,j,q){let W=this.options,se=F.series,fe=se.options;return[W.className,"highcharts-label",q&&"highcharts-tooltip-header",j?"highcharts-tooltip-box":"highcharts-tooltip",!q&&"highcharts-color-"+U(F.colorIndex,se.colorIndex),fe&&fe.className].filter(Z).join(" ")}getLabel({anchorX:F,anchorY:j}={anchorX:0,anchorY:0}){let q=this,W=this.chart.styledMode,se=this.options,fe=this.split&&this.allowShared,ee=this.container,oe=this.chart.renderer;if(this.label){let Ce=!this.label.hasClass("highcharts-label");(!fe&&Ce||fe&&!Ce)&&this.destroy()}if(!this.label){if(this.outside){let Ce=this.chart.options.chart.style,ge=h.getRendererType();this.container=ee=c.doc.createElement("div"),ee.className="highcharts-tooltip-container",E(ee,{position:"absolute",top:"1px",pointerEvents:"none",zIndex:Math.max(this.options.style.zIndex||0,(Ce&&Ce.zIndex||0)+3)}),this.renderer=oe=new ge(ee,0,0,Ce,void 0,void 0,oe.styledMode)}if(fe?this.label=oe.g("tooltip"):(this.label=oe.label("",F,j,se.shape,void 0,void 0,se.useHTML,void 0,"tooltip").attr({padding:se.padding,r:se.borderRadius}),W||this.label.attr({fill:se.backgroundColor,"stroke-width":se.borderWidth||0}).css(se.style).css({pointerEvents:se.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none")})),q.outside){let Ce=this.label;[Ce.xSetter,Ce.ySetter].forEach((ge,Ee)=>{Ce[Ee?"ySetter":"xSetter"]=J=>{ge.call(Ce,q.distance),Ce[Ee?"y":"x"]=J,ee&&(ee.style[Ee?"top":"left"]=`${J}px`)}})}this.label.attr({zIndex:8}).shadow(se.shadow).add()}return ee&&!ee.parentElement&&c.doc.body.appendChild(ee),this.label}getPlayingField(){let{body:F,documentElement:j}=v,{chart:q,distance:W,outside:se}=this;return{width:se?Math.max(F.scrollWidth,j.scrollWidth,F.offsetWidth,j.offsetWidth,j.clientWidth)-2*W:q.chartWidth,height:se?Math.max(F.scrollHeight,j.scrollHeight,F.offsetHeight,j.offsetHeight,j.clientHeight):q.chartHeight}}getPosition(F,j,q){var je,He;let{distance:W,chart:se,outside:fe,pointer:ee}=this,{inverted:oe,plotLeft:Ce,plotTop:ge,polar:Ee}=se,{plotX:J=0,plotY:ie=0}=q,le={},be=oe&&q.h||0,{height:te,width:ae}=this.getPlayingField(),ce=ee.getChartPosition(),xe=Qe=>Qe*ce.scaleX,_e=Qe=>Qe*ce.scaleY,Ne=Qe=>{let at=Qe==="x";return[Qe,at?ae:te,at?F:j].concat(fe?[at?xe(F):_e(j),at?ce.left-W+xe(J+Ce):ce.top-W+_e(ie+ge),0,at?ae:te]:[at?F:j,at?J+Ce:ie+ge,at?Ce:ge,at?Ce+se.plotWidth:ge+se.plotHeight])},ke=Ne("y"),Le=Ne("x"),me,Re=!!q.negative;!Ee&&((He=(je=se.hoverSeries)==null?void 0:je.yAxis)!=null&&He.reversed)&&(Re=!Re);let $e=!this.followPointer&&U(q.ttBelow,!Ee&&!oe===Re),De=function(Qe,at,rt,dt,gt,Tt,Nt){let mt=fe?Qe==="y"?_e(W):xe(W):W,St=(rt-dt)/2,kt=dt<gt-W,ii=gt+W+dt<at,fi=gt-mt-rt+St,Ht=gt+mt-St;if($e&&ii)le[Qe]=Ht;else if(!$e&&kt)le[Qe]=fi;else if(kt)le[Qe]=Math.min(Nt-dt,fi-be<0?fi:fi-be);else{if(!ii)return!1;le[Qe]=Math.max(Tt,Ht+be+rt>at?Ht:Ht+be)}},Se=function(Qe,at,rt,dt,gt){if(gt<W||gt>at-W)return!1;gt<rt/2?le[Qe]=1:gt>at-dt/2?le[Qe]=at-dt-2:le[Qe]=gt-rt/2},Pe=function(Qe){[ke,Le]=[Le,ke],me=Qe},Fe=()=>{De.apply(0,ke)!==!1?Se.apply(0,Le)!==!1||me||(Pe(!0),Fe()):me?le.x=le.y=0:(Pe(!0),Fe())};return(oe&&!Ee||this.len>1)&&Pe(),Fe(),le}hide(F){let j=this;p.clearTimeout(this.hideTimer),F=U(F,this.options.hideDelay),this.isHidden||(this.hideTimer=R(function(){let q=j.getLabel();j.getLabel().animate({opacity:0},{duration:F&&150,complete:()=>{q.hide(),j.container&&j.container.remove()}}),j.isHidden=!0},F))}init(F,j){this.chart=F,this.options=j,this.crosshairs=[],this.isHidden=!0,this.split=j.split&&!F.inverted&&!F.polar,this.shared=j.shared||this.split,this.outside=U(j.outside,!!(F.scrollablePixelsX||F.scrollablePixelsY))}shouldStickOnContact(F){return!!(!this.followPointer&&this.options.stickOnContact&&(!F||this.pointer.inClass(F.target,"highcharts-tooltip")))}move(F,j,q,W){let se=this,fe=y(!se.isHidden&&se.options.animation),ee=se.followPointer||(se.len||0)>1,oe={x:F,y:j};ee||(oe.anchorX=q,oe.anchorY=W),fe.step=()=>se.drawTracker(),se.getLabel().animate(oe,fe)}refresh(F,j){let{chart:q,options:W,pointer:se,shared:fe}=this,ee=B(F),oe=ee[0],Ce=[],ge=W.format,Ee=W.formatter||this.defaultFormatter,J=q.styledMode,ie={},le=this.allowShared;if(!W.enabled||!oe.series)return;p.clearTimeout(this.hideTimer),this.allowShared=!(!N(F)&&F.series&&F.series.noSharedTooltip),le=le&&!this.allowShared,this.followPointer=!this.split&&oe.series.tooltipOptions.followPointer;let be=this.getAnchor(F,j),te=be[0],ae=be[1];fe&&this.allowShared?(se.applyInactiveState(ee),ee.forEach(function(_e){_e.setState("hover"),Ce.push(_e.getLabelConfig())}),(ie=oe.getLabelConfig()).points=Ce):ie=oe.getLabelConfig(),this.len=Ce.length;let ce=Z(ge)?g(ge,ie,q):Ee.call(ie,this),xe=oe.series;if(this.distance=U(xe.tooltipOptions.distance,16),ce===!1)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(ce,ee);else{let _e=te,Ne=ae;if(j&&se.isDirectTouch&&(_e=j.chartX-q.plotLeft,Ne=j.chartY-q.plotTop),q.polar||xe.options.clip===!1||ee.some(ke=>se.isDirectTouch||ke.series.shouldShowTooltip(_e,Ne))){let ke=this.getLabel(le&&this.tt||{});(!W.style.width||J)&&ke.css({width:(this.outside?this.getPlayingField():q.spacingBox).width+"px"}),ke.attr({class:this.getClassName(oe),text:ce&&ce.join?ce.join(""):ce}),this.outside&&ke.attr({x:w(ke.x||0,0,this.getPlayingField().width-(ke.width||0))}),J||ke.attr({stroke:W.borderColor||oe.color||xe.color||"#666666"}),this.updatePosition({plotX:te,plotY:ae,negative:oe.negative,ttBelow:oe.ttBelow,h:be[2]||0})}else{this.hide();return}}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}S(this,"refresh")}renderSplit(F,j){var at;let q=this,{chart:W,chart:{chartWidth:se,chartHeight:fe,plotHeight:ee,plotLeft:oe,plotTop:Ce,scrollablePixelsY:ge=0,scrollablePixelsX:Ee,styledMode:J},distance:ie,options:le,options:{positioner:be},pointer:te}=q,{scrollLeft:ae=0,scrollTop:ce=0}=((at=W.scrollablePlotArea)==null?void 0:at.scrollingContainer)||{},xe=q.outside&&typeof Ee!="number"?v.documentElement.getBoundingClientRect():{left:ae,right:ae+se},_e=q.getLabel(),Ne=this.renderer||W.renderer,ke=!!(W.xAxis[0]&&W.xAxis[0].opposite),{left:Le,top:me}=te.getChartPosition(),Re=Ce+ce,$e=0,De=ee-ge;function Se(rt,dt,gt,Tt,Nt=!0){let mt,St;return gt?(mt=ke?0:De,St=w(rt-Tt/2,xe.left,xe.right-Tt-(q.outside?Le:0))):(mt=dt-Re,St=w(St=Nt?rt-Tt-ie:rt+ie,Nt?St:xe.left,xe.right)),{x:St,y:mt}}Z(F)&&(F=[!1,F]);let Pe=F.slice(0,j.length+1).reduce(function(rt,dt,gt){if(dt!==!1&&dt!==""){let Tt=j[gt-1]||{isHeader:!0,plotX:j[0].plotX,plotY:ee,series:{}},Nt=Tt.isHeader,mt=Nt?q:Tt.series,St=mt.tt=function(fr,nr,vr){let Rr=fr,{isHeader:sr,series:xr}=nr;if(!Rr){let ht={padding:le.padding,r:le.borderRadius};J||(ht.fill=le.backgroundColor,ht["stroke-width"]=le.borderWidth??1),Rr=Ne.label("",0,0,le[sr?"headerShape":"shape"],void 0,void 0,le.useHTML).addClass(q.getClassName(nr,!0,sr)).attr(ht).add(_e)}return Rr.isActive=!0,Rr.attr({text:vr}),J||Rr.css(le.style).attr({stroke:le.borderColor||nr.color||xr.color||"#333333"}),Rr}(mt.tt,Tt,dt.toString()),kt=St.getBBox(),ii=kt.width+St.strokeWidth();Nt&&($e=kt.height,De+=$e,ke&&(Re-=$e));let{anchorX:fi,anchorY:Ht}=function(fr){let nr,vr,{isHeader:Rr,plotX:sr=0,plotY:xr=0,series:ht}=fr;if(Rr)nr=Math.max(oe+sr,oe),vr=Ce+ee/2;else{let{xAxis:bt,yAxis:Mt}=ht;nr=bt.pos+w(sr,-ie,bt.len+ie),ht.shouldShowTooltip(0,Mt.pos-Ce+xr,{ignoreX:!0})&&(vr=Mt.pos+xr)}return{anchorX:nr=w(nr,xe.left-ie,xe.right+ie),anchorY:vr}}(Tt);if(typeof Ht=="number"){let fr=kt.height+1,nr=be?be.call(q,ii,fr,Tt):Se(fi,Ht,Nt,ii);rt.push({align:be?0:void 0,anchorX:fi,anchorY:Ht,boxWidth:ii,point:Tt,rank:U(nr.rank,Nt?1:0),size:fr,target:nr.y,tt:St,x:nr.x})}else St.isActive=!1}return rt},[]);!be&&Pe.some(rt=>{let{outside:dt}=q,gt=(dt?Le:0)+rt.anchorX;return gt<xe.left&&gt+rt.boxWidth<xe.right||gt<Le-xe.left+rt.boxWidth&&xe.right-gt>gt})&&(Pe=Pe.map(rt=>{let{x:dt,y:gt}=Se(rt.anchorX,rt.anchorY,rt.point.isHeader,rt.boxWidth,!1);return M(rt,{target:gt,x:dt})})),q.cleanSplit(),C(Pe,De);let Fe={left:Le,right:Le};Pe.forEach(function(rt){let{x:dt,boxWidth:gt,isHeader:Tt}=rt;!Tt&&(q.outside&&Le+dt<Fe.left&&(Fe.left=Le+dt),!Tt&&q.outside&&Fe.left+gt>Fe.right&&(Fe.right=Le+dt))}),Pe.forEach(function(rt){let{x:dt,anchorX:gt,anchorY:Tt,pos:Nt,point:{isHeader:mt}}=rt,St={visibility:Nt===void 0?"hidden":"inherit",x:dt,y:(Nt||0)+Re,anchorX:gt,anchorY:Tt};if(q.outside&&dt<gt){let kt=Le-Fe.left;kt>0&&(mt||(St.x=dt+kt,St.anchorX=gt+kt),mt&&(St.x=(Fe.right-Fe.left)/2,St.anchorX=gt+kt))}rt.tt.attr(St)});let{container:je,outside:He,renderer:Qe}=q;if(He&&je&&Qe){let{width:rt,height:dt,x:gt,y:Tt}=_e.getBBox();Qe.setSize(rt+gt,dt+Tt,!1),je.style.left=Fe.left+"px",je.style.top=me+"px"}_&&_e.attr({opacity:_e.opacity===1?.999:1})}drawTracker(){if(!this.shouldStickOnContact()){this.tracker&&(this.tracker=this.tracker.destroy());return}let F=this.chart,j=this.label,q=this.shared?F.hoverPoints:F.hoverPoint;if(!j||!q)return;let W={x:0,y:0,width:0,height:0},se=this.getAnchor(q),fe=j.getBBox();se[0]+=F.plotLeft-(j.translateX||0),se[1]+=F.plotTop-(j.translateY||0),W.x=Math.min(0,se[0]),W.y=Math.min(0,se[1]),W.width=se[0]<0?Math.max(Math.abs(se[0]),fe.width-se[0]):Math.max(Math.abs(se[0]),fe.width),W.height=se[1]<0?Math.max(Math.abs(se[1]),fe.height-Math.abs(se[1])):Math.max(Math.abs(se[1]),fe.height),this.tracker?this.tracker.attr(W):(this.tracker=j.renderer.rect(W).addClass("highcharts-tracker").add(j),F.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}styledModeFormat(F){return F.replace('style="font-size: 0.8em"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')}tooltipFooterHeaderFormatter(F,j){let q=F.series,W=q.tooltipOptions,se=q.xAxis,fe=se&&se.dateTime,ee={isFooter:j,labelConfig:F},oe=W.xDateFormat,Ce=W[j?"footerFormat":"headerFormat"];return S(this,"headerFormatter",ee,function(ge){fe&&!oe&&Y(F.key)&&(oe=fe.getXDateFormat(F.key,W.dateTimeLabelFormats)),fe&&oe&&(F.point&&F.point.tooltipDateKeys||["key"]).forEach(function(Ee){Ce=Ce.replace("{point."+Ee+"}","{point."+Ee+":"+oe+"}")}),q.chart.styledMode&&(Ce=this.styledModeFormat(Ce)),ge.text=g(Ce,{point:F,series:q},this.chart)}),ee.text}update(F){this.destroy(),this.init(this.chart,K(!0,this.options,F))}updatePosition(F){let{chart:j,container:q,distance:W,options:se,pointer:fe,renderer:ee}=this,{height:oe=0,width:Ce=0}=this.getLabel(),{left:ge,top:Ee,scaleX:J,scaleY:ie}=fe.getChartPosition(),le=(se.positioner||this.getPosition).call(this,Ce,oe,F),be=(F.plotX||0)+j.plotLeft,te=(F.plotY||0)+j.plotTop,ae;ee&&q&&(se.positioner&&(le.x+=ge-W,le.y+=Ee-W),ae=(se.borderWidth||0)+2*W+2,ee.setSize(Ce+ae,oe+ae,!1),(J!==1||ie!==1)&&(E(q,{transform:`scale(${J}, ${ie})`}),be*=J,te*=ie),be+=ge-le.x,te+=Ee-le.y),this.move(Math.round(le.x),Math.round(le.y||0),be,te)}}return(m=L||(L={})).compose=function(G){$(x,"Core.Tooltip")&&k(G,"afterInit",function(){let F=this.chart;F.options.tooltip&&(F.tooltip=new m(F,F.options.tooltip,this))})},L}),r(t,"Core/Series/Point.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Defaults.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{animObject:p}=a,{defaultOptions:m}=c,{format:y}=s,{addEvent:g,crisp:x,erase:v,extend:_,fireEvent:C,getNestedProperty:k,isArray:w,isFunction:E,isNumber:A,isObject:M,merge:S,pick:N,syncTimeout:Y,removeEvent:Z,uniqueKey:K}=h;class U{animateBeforeDestroy(){let B=this,R={x:B.startXPos,opacity:0},L=B.getGraphicalProps();L.singular.forEach(function(G){B[G]=B[G].animate(G==="dataLabel"?{x:B[G].startXPos,y:B[G].startYPos,opacity:0}:R)}),L.plural.forEach(function(G){B[G].forEach(function(F){F.element&&F.animate(_({x:B.startXPos},F.startYPos?{x:F.startXPos,y:F.startYPos}:{}))})})}applyOptions(B,R){let L=this.series,G=L.options.pointValKey||L.pointValKey;return _(this,B=U.prototype.optionsToObject.call(this,B)),this.options=this.options?_(this.options,B):B,B.group&&delete this.group,B.dataLabels&&delete this.dataLabels,G&&(this.y=U.prototype.getNestedProperty.call(this,G)),this.selected&&(this.state="select"),"name"in this&&R===void 0&&L.xAxis&&L.xAxis.hasNames&&(this.x=L.xAxis.nameToX(this)),this.x===void 0&&L?this.x=R??L.autoIncrement():A(B.x)&&L.options.relativeXValue&&(this.x=L.autoIncrement(B.x)),this.isNull=this.isValid&&!this.isValid(),this.formatPrefix=this.isNull?"null":"point",this}destroy(){if(!this.destroyed){let B=this,R=B.series,L=R.chart,G=R.options.dataSorting,F=L.hoverPoints,j=p(B.series.chart.renderer.globalAnimation),q=()=>{for(let W in(B.graphic||B.graphics||B.dataLabel||B.dataLabels)&&(Z(B),B.destroyElements()),B)delete B[W]};B.legendItem&&L.legend.destroyItem(B),F&&(B.setState(),v(F,B),F.length||(L.hoverPoints=null)),B===L.hoverPoint&&B.onMouseOut(),G&&G.enabled?(this.animateBeforeDestroy(),Y(q,j.duration)):q(),L.pointCount--}this.destroyed=!0}destroyElements(B){let R=this,L=R.getGraphicalProps(B);L.singular.forEach(function(G){R[G]=R[G].destroy()}),L.plural.forEach(function(G){R[G].forEach(function(F){F&&F.element&&F.destroy()}),delete R[G]})}firePointEvent(B,R,L){let G=this,F=this.series.options;G.manageEvent(B),B==="click"&&F.allowPointSelect&&(L=function(j){!G.destroyed&&G.select&&G.select(null,j.ctrlKey||j.metaKey||j.shiftKey)}),C(G,B,R,L)}getClassName(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(this.colorIndex!==void 0?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")}getGraphicalProps(B){let R,L,G=this,F=[],j={singular:[],plural:[]};for((B=B||{graphic:1,dataLabel:1}).graphic&&F.push("graphic","connector"),B.dataLabel&&F.push("dataLabel","dataLabelPath","dataLabelUpper"),L=F.length;L--;)G[R=F[L]]&&j.singular.push(R);return["graphic","dataLabel"].forEach(function(q){let W=q+"s";B[q]&&G[W]&&j.plural.push(W)}),j}getLabelConfig(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}}getNestedProperty(B){return B?B.indexOf("custom.")===0?k(B,this.options):this[B]:void 0}getZone(){let B=this.series,R=B.zones,L=B.zoneAxis||"y",G,F=0;for(G=R[0];this[L]>=G.value;)G=R[++F];return this.nonZonedColor||(this.nonZonedColor=this.color),G&&G.color&&!this.options.color?this.color=G.color:this.color=this.nonZonedColor,G}hasNewShapeType(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType}constructor(B,R,L){this.formatPrefix="point",this.visible=!0,this.series=B,this.applyOptions(R,L),this.id??(this.id=K()),this.resolveColor(),B.chart.pointCount++,C(this,"afterInit")}isValid(){return(A(this.x)||this.x instanceof Date)&&A(this.y)}optionsToObject(B){let R=this.series,L=R.options.keys,G=L||R.pointArrayMap||["y"],F=G.length,j={},q,W=0,se=0;if(A(B)||B===null)j[G[0]]=B;else if(w(B))for(!L&&B.length>F&&((q=typeof B[0])=="string"?j.name=B[0]:q==="number"&&(j.x=B[0]),W++);se<F;)L&&B[W]===void 0||(G[se].indexOf(".")>0?U.prototype.setNestedProperty(j,B[W],G[se]):j[G[se]]=B[W]),W++,se++;else typeof B=="object"&&(j=B,B.dataLabels&&(R.hasDataLabels=()=>!0),B.marker&&(R._hasPointMarkers=!0));return j}pos(B,R=this.plotY){if(!this.destroyed){let{plotX:L,series:G}=this,{chart:F,xAxis:j,yAxis:q}=G,W=0,se=0;if(A(L)&&A(R))return B&&(W=j?j.pos:F.plotLeft,se=q?q.pos:F.plotTop),F.inverted&&j&&q?[q.len-R+se,j.len-L+W]:[L+W,R+se]}}resolveColor(){let B=this.series,R=B.chart.options.chart,L=B.chart.styledMode,G,F,j=R.colorCount,q;delete this.nonZonedColor,B.options.colorByPoint?(L||(G=(F=B.options.colors||B.chart.options.colors)[B.colorCounter],j=F.length),q=B.colorCounter,B.colorCounter++,B.colorCounter===j&&(B.colorCounter=0)):(L||(G=B.color),q=B.colorIndex),this.colorIndex=N(this.options.colorIndex,q),this.color=N(this.options.color,G)}setNestedProperty(B,R,L){return L.split(".").reduce(function(G,F,j,q){let W=q.length-1===j;return G[F]=W?R:M(G[F],!0)?G[F]:{},G[F]},B),B}shouldDraw(){return!this.isNull}tooltipFormatter(B){let R=this.series,L=R.tooltipOptions,G=N(L.valueDecimals,""),F=L.valuePrefix||"",j=L.valueSuffix||"";return R.chart.styledMode&&(B=R.chart.tooltip.styledModeFormat(B)),(R.pointArrayMap||["y"]).forEach(function(q){q="{point."+q,(F||j)&&(B=B.replace(RegExp(q+"}","g"),F+q+"}"+j)),B=B.replace(RegExp(q+"}","g"),q+":,."+G+"f}")}),y(B,{point:this,series:this.series},R.chart)}update(B,R,L,G){let F,j=this,q=j.series,W=j.graphic,se=q.chart,fe=q.options;function ee(){j.applyOptions(B);let oe=W&&j.hasMockGraphic,Ce=j.y===null?!oe:oe;W&&Ce&&(j.graphic=W.destroy(),delete j.hasMockGraphic),M(B,!0)&&(W&&W.element&&B&&B.marker&&B.marker.symbol!==void 0&&(j.graphic=W.destroy()),B!=null&&B.dataLabels&&j.dataLabel&&(j.dataLabel=j.dataLabel.destroy())),F=j.index,q.updateParallelArrays(j,F),fe.data[F]=M(fe.data[F],!0)||M(B,!0)?j.options:N(B,fe.data[F]),q.isDirty=q.isDirtyData=!0,!q.fixedBox&&q.hasCartesianSeries&&(se.isDirtyBox=!0),fe.legendType==="point"&&(se.isDirtyLegend=!0),R&&se.redraw(L)}R=N(R,!0),G===!1?ee():j.firePointEvent("update",{options:B},ee)}remove(B,R){this.series.removePoint(this.series.data.indexOf(this),B,R)}select(B,R){let L=this,G=L.series,F=G.chart;B=N(B,!L.selected),this.selectedStaging=B,L.firePointEvent(B?"select":"unselect",{accumulate:R},function(){L.selected=L.options.selected=B,G.options.data[G.data.indexOf(L)]=L.options,L.setState(B&&"select"),R||F.getSelectedPoints().forEach(function(j){let q=j.series;j.selected&&j!==L&&(j.selected=j.options.selected=!1,q.options.data[q.data.indexOf(j)]=j.options,j.setState(F.hoverPoints&&q.options.inactiveOtherPoints?"inactive":""),j.firePointEvent("unselect"))})}),delete this.selectedStaging}onMouseOver(B){let{inverted:R,pointer:L}=this.series.chart;L&&(B=B?L.normalize(B):L.getChartCoordinatesFromPoint(this,R),L.runPointActions(B,this))}onMouseOut(){let B=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(B.hoverPoints||[]).forEach(function(R){R.setState()}),B.hoverPoints=B.hoverPoint=null}manageEvent(B){var G,F,j,q,W,se;let R=S(this.series.options.point,this.options),L=(G=R.events)==null?void 0:G[B];E(L)&&(!((F=this.hcEvents)!=null&&F[B])||((q=(j=this.hcEvents)==null?void 0:j[B])==null?void 0:q.map(fe=>fe.fn).indexOf(L))===-1)?((W=this.importedUserEvent)==null||W.call(this),this.importedUserEvent=g(this,B,L)):this.importedUserEvent&&!L&&((se=this.hcEvents)!=null&&se[B])&&(Z(this,B),delete this.hcEvents[B],Object.keys(this.hcEvents)||delete this.importedUserEvent)}setState(B,R){var ce;let L=this.series,G=this.state,F=L.options.states[B||"normal"]||{},j=m.plotOptions[L.type].marker&&L.options.marker,q=j&&j.enabled===!1,W=j&&j.states&&j.states[B||"normal"]||{},se=W.enabled===!1,fe=this.marker||{},ee=L.chart,oe=j&&L.markerAttribs,Ce=L.halo,ge,Ee,J,ie=L.stateMarkerGraphic,le;if((B=B||"")===this.state&&!R||this.selected&&B!=="select"||F.enabled===!1||B&&(se||q&&W.enabled===!1)||B&&fe.states&&fe.states[B]&&fe.states[B].enabled===!1)return;if(this.state=B,oe&&(ge=L.markerAttribs(this,B)),this.graphic&&!this.hasMockGraphic){if(G&&this.graphic.removeClass("highcharts-point-"+G),B&&this.graphic.addClass("highcharts-point-"+B),!ee.styledMode){Ee=L.pointAttribs(this,B),J=N(ee.options.chart.animation,F.animation);let xe=Ee.opacity;L.options.inactiveOtherPoints&&A(xe)&&(this.dataLabels||[]).forEach(function(_e){_e&&!_e.hasClass("highcharts-data-label-hidden")&&(_e.animate({opacity:xe},J),_e.connector&&_e.connector.animate({opacity:xe},J))}),this.graphic.animate(Ee,J)}ge&&this.graphic.animate(ge,N(ee.options.chart.animation,W.animation,j.animation)),ie&&ie.hide()}else B&&W&&(le=fe.symbol||L.symbol,ie&&ie.currentSymbol!==le&&(ie=ie.destroy()),ge&&(ie?ie[R?"animate":"attr"]({x:ge.x,y:ge.y}):le&&(L.stateMarkerGraphic=ie=ee.renderer.symbol(le,ge.x,ge.y,ge.width,ge.height).add(L.markerGroup),ie.currentSymbol=le)),!ee.styledMode&&ie&&this.state!=="inactive"&&ie.attr(L.pointAttribs(this,B))),ie&&(ie[B&&this.isInside?"show":"hide"](),ie.element.point=this,ie.addClass(this.getClassName(),!0));let be=F.halo,te=this.graphic||ie,ae=te&&te.visibility||"inherit";be&&be.size&&te&&ae!=="hidden"&&!this.isCluster?(Ce||(L.halo=Ce=ee.renderer.path().add(te.parentGroup)),Ce.show()[R?"animate":"attr"]({d:this.haloPath(be.size)}),Ce.attr({class:"highcharts-halo highcharts-color-"+N(this.colorIndex,L.colorIndex)+(this.className?" "+this.className:""),visibility:ae,zIndex:-1}),Ce.point=this,ee.styledMode||Ce.attr(_({fill:this.color||L.color,"fill-opacity":be.opacity},n.filterUserAttributes(be.attributes||{})))):(ce=Ce==null?void 0:Ce.point)!=null&&ce.haloPath&&!Ce.point.destroyed&&Ce.animate({d:Ce.point.haloPath(0)},null,Ce.hide),C(this,"afterSetState",{state:B})}haloPath(B){let R=this.pos();return R?this.series.chart.renderer.symbols.circle(x(R[0],1)-B,R[1]-B,2*B,2*B):[]}}return U}),r(t,"Core/Pointer.js",[t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c){var s;let{parse:h}=n,{charts:p,composed:m,isTouchDevice:y}=a,{addEvent:g,attr:x,css:v,extend:_,find:C,fireEvent:k,isNumber:w,isObject:E,objectEach:A,offset:M,pick:S,pushUnique:N,splat:Y}=c;class Z{applyInactiveState(U){let $=[],B;(U||[]).forEach(function(R){B=R.series,$.push(B),B.linkedParent&&$.push(B.linkedParent),B.linkedSeries&&($=$.concat(B.linkedSeries)),B.navigatorSeries&&$.push(B.navigatorSeries)}),this.chart.series.forEach(function(R){$.indexOf(R)===-1?R.setState("inactive",!0):R.options.inactiveOtherPoints&&R.setAllPointsToState("inactive")})}destroy(){let U=this;this.eventsToUnbind.forEach($=>$()),this.eventsToUnbind=[],!a.chartCount&&(Z.unbindDocumentMouseUp&&Z.unbindDocumentMouseUp.forEach($=>$()),Z.unbindDocumentTouchEnd&&(Z.unbindDocumentTouchEnd=Z.unbindDocumentTouchEnd())),clearInterval(U.tooltipTimeout),A(U,function($,B){U[B]=void 0})}getSelectionMarkerAttrs(U,$){let B={args:{chartX:U,chartY:$},attrs:{},shapeType:"rect"};return k(this,"getSelectionMarkerAttrs",B,R=>{let L,{chart:G,zoomHor:F,zoomVert:j}=this,{mouseDownX:q=0,mouseDownY:W=0}=G,se=R.attrs;se.x=G.plotLeft,se.y=G.plotTop,se.width=F?1:G.plotWidth,se.height=j?1:G.plotHeight,F&&(L=U-q,se.width=Math.max(1,Math.abs(L)),se.x=(L>0?0:L)+q),j&&(L=$-W,se.height=Math.max(1,Math.abs(L)),se.y=(L>0?0:L)+W)}),B}drag(U){let{chart:$}=this,{mouseDownX:B=0,mouseDownY:R=0}=$,{panning:L,panKey:G,selectionMarkerFill:F}=$.options.chart,j=$.plotLeft,q=$.plotTop,W=$.plotWidth,se=$.plotHeight,fe=E(L)?L.enabled:L,ee=G&&U[`${G}Key`],oe=U.chartX,Ce=U.chartY,ge,Ee=this.selectionMarker;if((!Ee||!Ee.touch)&&(oe<j?oe=j:oe>j+W&&(oe=j+W),Ce<q?Ce=q:Ce>q+se&&(Ce=q+se),this.hasDragged=Math.sqrt(Math.pow(B-oe,2)+Math.pow(R-Ce,2)),this.hasDragged>10)){ge=$.isInsidePlot(B-j,R-q,{visiblePlotOnly:!0});let{shapeType:J,attrs:ie}=this.getSelectionMarkerAttrs(oe,Ce);($.hasCartesianSeries||$.mapView)&&this.hasZoom&&ge&&!ee&&!Ee&&(this.selectionMarker=Ee=$.renderer[J](),Ee.attr({class:"highcharts-selection-marker",zIndex:7}).add(),$.styledMode||Ee.attr({fill:F||h("#334eff").setOpacity(.25).get()})),Ee&&Ee.attr(ie),ge&&!Ee&&fe&&$.pan(U,L)}}dragStart(U){let $=this.chart;$.mouseIsDown=U.type,$.cancelClick=!1,$.mouseDownX=U.chartX,$.mouseDownY=U.chartY}getSelectionBox(U){let $={args:{marker:U},result:U.getBBox()};return k(this,"getSelectionBox",$),$.result}drop(U){let $,{chart:B,selectionMarker:R}=this;for(let L of B.axes)L.isPanning&&(L.isPanning=!1,(L.options.startOnTick||L.options.endOnTick||L.series.some(G=>G.boosted))&&(L.forceRedraw=!0,L.setExtremes(L.userMin,L.userMax,!1),$=!0));if($&&B.redraw(),R&&U){if(this.hasDragged){let L=this.getSelectionBox(R);B.transform({axes:B.axes.filter(G=>G.zoomEnabled&&(G.coll==="xAxis"&&this.zoomX||G.coll==="yAxis"&&this.zoomY)),selection:{originalEvent:U,xAxis:[],yAxis:[],...L},from:L})}w(B.index)&&(this.selectionMarker=R.destroy())}B&&w(B.index)&&(v(B.container,{cursor:B._cursor}),B.cancelClick=this.hasDragged>10,B.mouseIsDown=!1,this.hasDragged=0,this.pinchDown=[])}findNearestKDPoint(U,$,B){let R;return U.forEach(function(L){let G=!(L.noSharedTooltip&&$)&&0>L.options.findNearestPointBy.indexOf("y"),F=L.searchPoint(B,G);E(F,!0)&&F.series&&(!E(R,!0)||function(j,q){var ee,oe;let W=j.distX-q.distX,se=j.dist-q.dist,fe=((ee=q.series.group)==null?void 0:ee.zIndex)-((oe=j.series.group)==null?void 0:oe.zIndex);return W!==0&&$?W:se!==0?se:fe!==0?fe:j.series.index>q.series.index?-1:1}(R,F)>0)&&(R=F)}),R}getChartCoordinatesFromPoint(U,$){let{xAxis:B,yAxis:R}=U.series,L=U.shapeArgs;if(B&&R){let G=U.clientX??U.plotX??0,F=U.plotY||0;return U.isNode&&L&&w(L.x)&&w(L.y)&&(G=L.x,F=L.y),$?{chartX:R.len+R.pos-F,chartY:B.len+B.pos-G}:{chartX:G+B.pos,chartY:F+R.pos}}if(L&&L.x&&L.y)return{chartX:L.x,chartY:L.y}}getChartPosition(){if(this.chartPosition)return this.chartPosition;let{container:U}=this.chart,$=M(U);this.chartPosition={left:$.left,top:$.top,scaleX:1,scaleY:1};let{offsetHeight:B,offsetWidth:R}=U;return R>2&&B>2&&(this.chartPosition.scaleX=$.width/R,this.chartPosition.scaleY=$.height/B),this.chartPosition}getCoordinates(U){let $={xAxis:[],yAxis:[]};for(let B of this.chart.axes)$[B.isXAxis?"xAxis":"yAxis"].push({axis:B,value:B.toValue(U[B.horiz?"chartX":"chartY"])});return $}getHoverData(U,$,B,R,L,G){let F=[],j=function(ee){return ee.visible&&!(!L&&ee.directTouch)&&S(ee.options.enableMouseTracking,!0)},q=$,W,se={chartX:G?G.chartX:void 0,chartY:G?G.chartY:void 0,shared:L};k(this,"beforeGetHoverData",se),W=q&&!q.stickyTracking?[q]:B.filter(ee=>ee.stickyTracking&&(se.filter||j)(ee));let fe=R&&U||!G?U:this.findNearestKDPoint(W,L,G);return q=fe&&fe.series,fe&&(L&&!q.noSharedTooltip?(W=B.filter(function(ee){return se.filter?se.filter(ee):j(ee)&&!ee.noSharedTooltip})).forEach(function(ee){let oe=C(ee.points,function(Ce){return Ce.x===fe.x&&!Ce.isNull});E(oe)&&(ee.boosted&&ee.boost&&(oe=ee.boost.getPoint(oe)),F.push(oe))}):F.push(fe)),k(this,"afterGetHoverData",se={hoverPoint:fe}),{hoverPoint:se.hoverPoint,hoverSeries:q,hoverPoints:F}}getPointFromEvent(U){let $=U.target,B;for(;$&&!B;)B=$.point,$=$.parentNode;return B}onTrackerMouseOut(U){let $=this.chart,B=U.relatedTarget,R=$.hoverSeries;this.isDirectTouch=!1,!R||!B||R.stickyTracking||this.inClass(B,"highcharts-tooltip")||this.inClass(B,"highcharts-series-"+R.index)&&this.inClass(B,"highcharts-tracker")||R.onMouseOut()}inClass(U,$){let B=U,R;for(;B;){if(R=x(B,"class")){if(R.indexOf($)!==-1)return!0;if(R.indexOf("highcharts-container")!==-1)return!1}B=B.parentElement}}constructor(U,$){var B;this.hasDragged=0,this.pointerCaptureEventsToUnbind=[],this.eventsToUnbind=[],this.options=$,this.chart=U,this.runChartClick=!!((B=$.chart.events)!=null&&B.click),this.pinchDown=[],this.setDOMEvents(),k(this,"afterInit")}normalize(U,$){let B=U.touches,R=B?B.length?B.item(0):S(B.changedTouches,U.changedTouches)[0]:U;$||($=this.getChartPosition());let L=R.pageX-$.left,G=R.pageY-$.top;return _(U,{chartX:Math.round(L/=$.scaleX),chartY:Math.round(G/=$.scaleY)})}onContainerClick(U){let $=this.chart,B=$.hoverPoint,R=this.normalize(U),L=$.plotLeft,G=$.plotTop;!$.cancelClick&&(B&&this.inClass(R.target,"highcharts-tracker")?(k(B.series,"click",_(R,{point:B})),$.hoverPoint&&B.firePointEvent("click",R)):(_(R,this.getCoordinates(R)),$.isInsidePlot(R.chartX-L,R.chartY-G,{visiblePlotOnly:!0})&&k($,"click",R)))}onContainerMouseDown(U){var B;let $=(1&(U.buttons||U.button))==1;U=this.normalize(U),a.isFirefox&&U.button!==0&&this.onContainerMouseMove(U),(U.button===void 0||$)&&(this.zoomOption(U),$&&((B=U.preventDefault)==null||B.call(U)),this.dragStart(U))}onContainerMouseLeave(U){let{pointer:$}=p[S(Z.hoverChartIndex,-1)]||{};U=this.normalize(U),this.onContainerMouseMove(U),$&&!this.inClass(U.relatedTarget,"highcharts-tooltip")&&($.reset(),$.chartPosition=void 0)}onContainerMouseEnter(){delete this.chartPosition}onContainerMouseMove(U){let $=this.chart,B=$.tooltip,R=this.normalize(U);this.setHoverChartIndex(U),($.mouseIsDown==="mousedown"||this.touchSelect(R))&&this.drag(R),!$.openMenu&&(this.inClass(R.target,"highcharts-tracker")||$.isInsidePlot(R.chartX-$.plotLeft,R.chartY-$.plotTop,{visiblePlotOnly:!0}))&&!(B&&B.shouldStickOnContact(R))&&(this.inClass(R.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(R))}onDocumentTouchEnd(U){this.onDocumentMouseUp(U)}onContainerTouchMove(U){this.touchSelect(U)?this.onContainerMouseMove(U):this.touch(U)}onContainerTouchStart(U){this.touchSelect(U)?this.onContainerMouseDown(U):(this.zoomOption(U),this.touch(U,!0))}onDocumentMouseMove(U){let $=this.chart,B=$.tooltip,R=this.chartPosition,L=this.normalize(U,R);!R||$.isInsidePlot(L.chartX-$.plotLeft,L.chartY-$.plotTop,{visiblePlotOnly:!0})||B&&B.shouldStickOnContact(L)||L.target!==$.container.ownerDocument&&this.inClass(L.target,"highcharts-tracker")||this.reset()}onDocumentMouseUp(U){var $,B;(B=($=p[S(Z.hoverChartIndex,-1)])==null?void 0:$.pointer)==null||B.drop(U)}pinch(U){let $=this,{chart:B,hasZoom:R,lastTouches:L}=$,G=[].map.call(U.touches||[],se=>$.normalize(se)),F=G.length,j=F===1&&($.inClass(U.target,"highcharts-tracker")&&B.runTrackerClick||$.runChartClick),q=B.tooltip,W=F===1&&S(q==null?void 0:q.options.followTouchMove,!0);F>1?$.initiated=!0:W&&($.initiated=!1),R&&$.initiated&&!j&&U.cancelable!==!1&&U.preventDefault(),U.type==="touchstart"?($.pinchDown=G,$.res=!0,B.mouseDownX=U.chartX):W?this.runPointActions($.normalize(U)):L&&(k(B,"touchpan",{originalEvent:U,touches:G},()=>{let se=fe=>{let ee=fe[0],oe=fe[1]||ee;return{x:ee.chartX,y:ee.chartY,width:oe.chartX-ee.chartX,height:oe.chartY-ee.chartY}};B.transform({axes:B.axes.filter(fe=>fe.zoomEnabled&&(this.zoomHor&&fe.horiz||this.zoomVert&&!fe.horiz)),to:se(G),from:se(L),trigger:U.type})}),$.res&&($.res=!1,this.reset(!1,0))),$.lastTouches=G}reset(U,$){let B=this.chart,R=B.hoverSeries,L=B.hoverPoint,G=B.hoverPoints,F=B.tooltip,j=F&&F.shared?G:L;U&&j&&Y(j).forEach(function(q){q.series.isCartesian&&q.plotX===void 0&&(U=!1)}),U?F&&j&&Y(j).length&&(F.refresh(j),F.shared&&G?G.forEach(function(q){q.setState(q.state,!0),q.series.isCartesian&&(q.series.xAxis.crosshair&&q.series.xAxis.drawCrosshair(null,q),q.series.yAxis.crosshair&&q.series.yAxis.drawCrosshair(null,q))}):L&&(L.setState(L.state,!0),B.axes.forEach(function(q){q.crosshair&&L.series[q.coll]===q&&q.drawCrosshair(null,L)}))):(L&&L.onMouseOut(),G&&G.forEach(function(q){q.setState()}),R&&R.onMouseOut(),F&&F.hide($),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),B.axes.forEach(function(q){q.hideCrosshair()}),B.hoverPoints=B.hoverPoint=void 0)}runPointActions(U,$,B){let R=this.chart,L=R.series,G=R.tooltip&&R.tooltip.options.enabled?R.tooltip:void 0,F=!!G&&G.shared,j=$||R.hoverPoint,q=j&&j.series||R.hoverSeries,W=(!U||U.type!=="touchmove")&&(!!$||q&&q.directTouch&&this.isDirectTouch),se=this.getHoverData(j,q,L,W,F,U);j=se.hoverPoint,q=se.hoverSeries;let fe=se.hoverPoints,ee=q&&q.tooltipOptions.followPointer&&!q.tooltipOptions.split,oe=F&&q&&!q.noSharedTooltip;if(j&&(B||j!==R.hoverPoint||G&&G.isHidden)){if((R.hoverPoints||[]).forEach(function(Ce){fe.indexOf(Ce)===-1&&Ce.setState()}),R.hoverSeries!==q&&q.onMouseOver(),this.applyInactiveState(fe),(fe||[]).forEach(function(Ce){Ce.setState("hover")}),R.hoverPoint&&R.hoverPoint.firePointEvent("mouseOut"),!j.series)return;R.hoverPoints=fe,R.hoverPoint=j,j.firePointEvent("mouseOver",void 0,()=>{G&&j&&G.refresh(oe?fe:j,U)})}else if(ee&&G&&!G.isHidden){let Ce=G.getAnchor([{}],U);R.isInsidePlot(Ce[0],Ce[1],{visiblePlotOnly:!0})&&G.updatePosition({plotX:Ce[0],plotY:Ce[1]})}this.unDocMouseMove||(this.unDocMouseMove=g(R.container.ownerDocument,"mousemove",Ce=>{var ge,Ee;return(Ee=(ge=p[Z.hoverChartIndex??-1])==null?void 0:ge.pointer)==null?void 0:Ee.onDocumentMouseMove(Ce)}),this.eventsToUnbind.push(this.unDocMouseMove)),R.axes.forEach(function(Ce){let ge,Ee=S((Ce.crosshair||{}).snap,!0);!Ee||(ge=R.hoverPoint)&&ge.series[Ce.coll]===Ce||(ge=C(fe,J=>J.series&&J.series[Ce.coll]===Ce)),ge||!Ee?Ce.drawCrosshair(U,ge):Ce.hideCrosshair()})}setDOMEvents(){let U=this.chart.container,$=U.ownerDocument;U.onmousedown=this.onContainerMouseDown.bind(this),U.onmousemove=this.onContainerMouseMove.bind(this),U.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(g(U,"mouseenter",this.onContainerMouseEnter.bind(this)),g(U,"mouseleave",this.onContainerMouseLeave.bind(this))),Z.unbindDocumentMouseUp||(Z.unbindDocumentMouseUp=[]),Z.unbindDocumentMouseUp.push(g($,"mouseup",this.onDocumentMouseUp.bind(this)));let B=this.chart.renderTo.parentElement;for(;B&&B.tagName!=="BODY";)this.eventsToUnbind.push(g(B,"scroll",()=>{delete this.chartPosition})),B=B.parentElement;this.eventsToUnbind.push(g(U,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1}),g(U,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),Z.unbindDocumentTouchEnd||(Z.unbindDocumentTouchEnd=g($,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})),this.setPointerCapture(),g(this.chart,"redraw",this.setPointerCapture.bind(this))}setPointerCapture(){var L,G;if(!y)return;let U=this.pointerCaptureEventsToUnbind,$=this.chart,B=$.container,R=S((L=$.options.tooltip)==null?void 0:L.followTouchMove,!0)&&$.series.some(F=>F.options.findNearestPointBy.indexOf("y")>-1);!this.hasPointerCapture&&R?(U.push(g(B,"pointerdown",F=>{var j,q;(j=F.target)!=null&&j.hasPointerCapture(F.pointerId)&&((q=F.target)==null||q.releasePointerCapture(F.pointerId))}),g(B,"pointermove",F=>{var j,q;(q=(j=$.pointer)==null?void 0:j.getPointFromEvent(F))==null||q.onMouseOver(F)})),$.styledMode||v(B,{"touch-action":"none"}),B.className+=" highcharts-no-touch-action",this.hasPointerCapture=!0):this.hasPointerCapture&&!R&&(U.forEach(F=>F()),U.length=0,$.styledMode||v(B,{"touch-action":S((G=$.options.chart.style)==null?void 0:G["touch-action"],"manipulation")}),B.className=B.className.replace(" highcharts-no-touch-action",""),this.hasPointerCapture=!1)}setHoverChartIndex(U){var R;let $=this.chart,B=a.charts[S(Z.hoverChartIndex,-1)];if(B&&B!==$){let L={relatedTarget:$.container};U&&!(U!=null&&U.relatedTarget)&&(U={...L,...U}),(R=B.pointer)==null||R.onContainerMouseLeave(U||L)}B&&B.mouseIsDown||(Z.hoverChartIndex=$.index)}touch(U,$){let B,{chart:R,pinchDown:L=[]}=this;this.setHoverChartIndex(),(U=this.normalize(U)).touches.length===1?R.isInsidePlot(U.chartX-R.plotLeft,U.chartY-R.plotTop,{visiblePlotOnly:!0})&&!R.openMenu?($&&this.runPointActions(U),U.type==="touchmove"&&(B=!!L[0]&&Math.pow(L[0].chartX-U.chartX,2)+Math.pow(L[0].chartY-U.chartY,2)>=16),S(B,!0)&&this.pinch(U)):$&&this.reset():U.touches.length===2&&this.pinch(U)}touchSelect(U){return!!(this.chart.zooming.singleTouch&&U.touches&&U.touches.length===1)}zoomOption(U){let $=this.chart,B=$.inverted,R=$.zooming.type||"",L,G;/touch/.test(U.type)&&(R=S($.zooming.pinchType,R)),this.zoomX=L=/x/.test(R),this.zoomY=G=/y/.test(R),this.zoomHor=L&&!B||G&&B,this.zoomVert=G&&!B||L&&B,this.hasZoom=L||G}}return(s=Z||(Z={})).compose=function(K){N(m,"Core.Pointer")&&g(K,"beforeRender",function(){this.pointer=new s(this,this.options)})},Z}),r(t,"Core/Legend/LegendSymbol.js",[t["Core/Utilities.js"]],function(n){var a;let{extend:c,merge:s,pick:h}=n;return function(p){function m(y,g,x){var B,R;let v=this.legendItem=this.legendItem||{},{chart:_,options:C}=this,{baseline:k=0,symbolWidth:w,symbolHeight:E}=y,A=this.symbol||"circle",M=E/2,S=_.renderer,N=v.group,Y=k-Math.round((((B=y.fontMetrics)==null?void 0:B.b)||E)*(x?.4:.3)),Z={},K,U=C.marker,$=0;if(_.styledMode||(Z["stroke-width"]=Math.min(C.lineWidth||0,24),C.dashStyle?Z.dashstyle=C.dashStyle:C.linecap==="square"||(Z["stroke-linecap"]="round")),v.line=S.path().addClass("highcharts-graph").attr(Z).add(N),x&&(v.area=S.path().addClass("highcharts-area").add(N)),Z["stroke-linecap"]&&($=Math.min(v.line.strokeWidth(),w)/2),w){let L=[["M",$,Y],["L",w-$,Y]];v.line.attr({d:L}),(R=v.area)==null||R.attr({d:[...L,["L",w-$,k],["L",$,k]]})}if(U&&U.enabled!==!1&&w){let L=Math.min(h(U.radius,M),M);A.indexOf("url")===0&&(U=s(U,{width:E,height:E}),L=0),v.symbol=K=S.symbol(A,w/2-L,Y-L,2*L,2*L,c({context:"legend"},U)).addClass("highcharts-point").add(N),K.isMarker=!0}}p.areaMarker=function(y,g){m.call(this,y,g,!0)},p.lineMarker=m,p.rectangle=function(y,g){let x=g.legendItem||{},v=y.options,_=y.symbolHeight,C=v.squareSymbol,k=C?_:y.symbolWidth;x.symbol=this.chart.renderer.rect(C?(y.symbolWidth-_)/2:0,y.baseline-_+1,k,_,h(y.options.symbolRadius,_/2)).addClass("highcharts-point").attr({zIndex:3}).add(x.group)}}(a||(a={})),a}),r(t,"Core/Series/SeriesDefaults.js",[],function(){return{lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},enableMouseTracking:!0,events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:150},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",borderWidth:0,defer:!0,formatter:function(){let{numberFormatter:n}=this.series.chart;return typeof this.y!="number"?"":n(this.y,-1)},padding:5,style:{fontSize:"0.7em",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:150},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:150},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"}}),r(t,"Core/Series/SeriesRegistry.js",[t["Core/Globals.js"],t["Core/Defaults.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(n,a,c,s){var h;let{defaultOptions:p}=a,{extend:m,extendClass:y,merge:g}=s;return function(x){function v(_,C){let k=p.plotOptions||{},w=C.defaultOptions,E=C.prototype;return E.type=_,E.pointClass||(E.pointClass=c),!x.seriesTypes[_]&&(w&&(k[_]=w),x.seriesTypes[_]=C,!0)}x.seriesTypes=n.seriesTypes,x.registerSeriesType=v,x.seriesType=function(_,C,k,w,E){let A=p.plotOptions||{};if(C=C||"",A[_]=g(A[C],k),delete x.seriesTypes[_],v(_,y(x.seriesTypes[C]||function(){},w)),x.seriesTypes[_].prototype.type=_,E){class M extends c{}m(M.prototype,E),x.seriesTypes[_].prototype.pointClass=M}return x.seriesTypes[_]}}(h||(h={})),h}),r(t,"Core/Series/Series.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Defaults.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Series/Point.js"],t["Core/Series/SeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,p,m,y,g,x){let{animObject:v,setAnimation:_}=n,{defaultOptions:C}=a,{registerEventOptions:k}=c,{svg:w,win:E}=s,{seriesTypes:A}=y,{arrayMax:M,arrayMin:S,clamp:N,correctFloat:Y,crisp:Z,defined:K,destroyObjectProperties:U,diffObjects:$,erase:B,error:R,extend:L,find:G,fireEvent:F,getClosestDistance:j,getNestedProperty:q,insertItem:W,isArray:se,isNumber:fe,isString:ee,merge:oe,objectEach:Ce,pick:ge,removeEvent:Ee,splat:J,syncTimeout:ie}=x;class le{constructor(){this.zoneAxis="y"}init(te,ae){let ce;F(this,"init",{options:ae});let xe=this,_e=te.series;this.eventsToUnbind=[],xe.chart=te,xe.options=xe.setOptions(ae);let Ne=xe.options,ke=Ne.visible!==!1;xe.linkedSeries=[],xe.bindAxes(),L(xe,{name:Ne.name,state:"",visible:ke,selected:Ne.selected===!0}),k(this,Ne);let Le=Ne.events;(Le&&Le.click||Ne.point&&Ne.point.events&&Ne.point.events.click||Ne.allowPointSelect)&&(te.runTrackerClick=!0),xe.getColor(),xe.getSymbol(),xe.parallelArrays.forEach(function(me){xe[me+"Data"]||(xe[me+"Data"]=[])}),xe.isCartesian&&(te.hasCartesianSeries=!0),_e.length&&(ce=_e[_e.length-1]),xe._i=ge(ce&&ce._i,-1)+1,xe.opacity=xe.options.opacity,te.orderItems("series",W(this,_e)),Ne.dataSorting&&Ne.dataSorting.enabled?xe.setDataSortingOptions():xe.points||xe.data||xe.setData(Ne.data,!1),F(this,"afterInit")}is(te){return A[te]&&this instanceof A[te]}bindAxes(){let te,ae=this,ce=ae.options,xe=ae.chart;F(this,"bindAxes",null,function(){(ae.axisTypes||[]).forEach(function(_e){(xe[_e]||[]).forEach(function(Ne){te=Ne.options,(ge(ce[_e],0)===Ne.index||ce[_e]!==void 0&&ce[_e]===te.id)&&(W(ae,Ne.series),ae[_e]=Ne,Ne.isDirty=!0)}),ae[_e]||ae.optionalAxis===_e||R(18,!0,xe)})}),F(this,"afterBindAxes")}updateParallelArrays(te,ae,ce){let xe=te.series,_e=fe(ae)?function(Ne){let ke=Ne==="y"&&xe.toYData?xe.toYData(te):te[Ne];xe[Ne+"Data"][ae]=ke}:function(Ne){Array.prototype[ae].apply(xe[Ne+"Data"],ce)};xe.parallelArrays.forEach(_e)}hasData(){return this.visible&&this.dataMax!==void 0&&this.dataMin!==void 0||this.visible&&this.yData&&this.yData.length>0}hasMarkerChanged(te,ae){let ce=te.marker,xe=ae.marker||{};return ce&&(xe.enabled&&!ce.enabled||xe.symbol!==ce.symbol||xe.height!==ce.height||xe.width!==ce.width)}autoIncrement(te){let ae=this.options,ce=ae.pointIntervalUnit,xe=ae.relativeXValue,_e=this.chart.time,Ne=this.xIncrement,ke,Le;return Ne=ge(Ne,ae.pointStart,0),this.pointInterval=Le=ge(this.pointInterval,ae.pointInterval,1),xe&&fe(te)&&(Le*=te),ce&&(ke=new _e.Date(Ne),ce==="day"?_e.set("Date",ke,_e.get("Date",ke)+Le):ce==="month"?_e.set("Month",ke,_e.get("Month",ke)+Le):ce==="year"&&_e.set("FullYear",ke,_e.get("FullYear",ke)+Le),Le=ke.getTime()-Ne),xe&&fe(te)?Ne+Le:(this.xIncrement=Ne+Le,Ne)}setDataSortingOptions(){let te=this.options;L(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),K(te.pointRange)||(te.pointRange=1)}setOptions(te){var je,He;let ae,ce=this.chart,xe=ce.options.plotOptions,_e=ce.userOptions||{},Ne=oe(te),ke=ce.styledMode,Le={plotOptions:xe,userOptions:Ne};F(this,"setOptions",Le);let me=Le.plotOptions[this.type],Re=_e.plotOptions||{},$e=Re.series||{},De=C.plotOptions[this.type]||{},Se=Re[this.type]||{};this.userOptions=Le.userOptions;let Pe=oe(me,xe.series,Se,Ne);this.tooltipOptions=oe(C.tooltip,(je=C.plotOptions.series)==null?void 0:je.tooltip,De==null?void 0:De.tooltip,ce.userOptions.tooltip,(He=Re.series)==null?void 0:He.tooltip,Se.tooltip,Ne.tooltip),this.stickyTracking=ge(Ne.stickyTracking,Se.stickyTracking,$e.stickyTracking,!!this.tooltipOptions.shared&&!this.noSharedTooltip||Pe.stickyTracking),me.marker===null&&delete Pe.marker,this.zoneAxis=Pe.zoneAxis||"y";let Fe=this.zones=(Pe.zones||[]).map(Qe=>({...Qe}));return(Pe.negativeColor||Pe.negativeFillColor)&&!Pe.zones&&(ae={value:Pe[this.zoneAxis+"Threshold"]||Pe.threshold||0,className:"highcharts-negative"},ke||(ae.color=Pe.negativeColor,ae.fillColor=Pe.negativeFillColor),Fe.push(ae)),Fe.length&&K(Fe[Fe.length-1].value)&&Fe.push(ke?{}:{color:this.color,fillColor:this.fillColor}),F(this,"afterSetOptions",{options:Pe}),Pe}getName(){return ge(this.options.name,"Series "+(this.index+1))}getCyclic(te,ae,ce){let xe,_e,Ne=this.chart,ke=`${te}Index`,Le=`${te}Counter`,me=(ce==null?void 0:ce.length)||Ne.options.chart.colorCount;!ae&&(K(_e=ge(te==="color"?this.options.colorIndex:void 0,this[ke]))?xe=_e:(Ne.series.length||(Ne[Le]=0),xe=Ne[Le]%me,Ne[Le]+=1),ce&&(ae=ce[xe])),xe!==void 0&&(this[ke]=xe),this[te]=ae}getColor(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||C.plotOptions[this.type].color,this.chart.options.colors)}getPointsCollection(){return(this.hasGroupedData?this.points:this.data)||[]}getSymbol(){let te=this.options.marker;this.getCyclic("symbol",te.symbol,this.chart.options.symbols)}findPointIndex(te,ae){let ce,xe,_e,Ne=te.id,ke=te.x,Le=this.points,me=this.options.dataSorting;if(Ne){let Re=this.chart.get(Ne);Re instanceof p&&(ce=Re)}else if(this.linkedParent||this.enabledDataSorting||this.options.relativeXValue){let Re=$e=>!$e.touched&&$e.index===te.index;if(me&&me.matchByName?Re=$e=>!$e.touched&&$e.name===te.name:this.options.relativeXValue&&(Re=$e=>!$e.touched&&$e.options.x===te.x),!(ce=G(Le,Re)))return}return ce&&(_e=ce&&ce.index)!==void 0&&(xe=!0),_e===void 0&&fe(ke)&&(_e=this.xData.indexOf(ke,ae)),_e!==-1&&_e!==void 0&&this.cropped&&(_e=_e>=this.cropStart?_e-this.cropStart:_e),!xe&&fe(_e)&&Le[_e]&&Le[_e].touched&&(_e=void 0),_e}updateData(te,ae){let ce=this.options,xe=ce.dataSorting,_e=this.points,Ne=[],ke=this.requireSorting,Le=te.length===_e.length,me,Re,$e,De,Se=!0;if(this.xIncrement=null,te.forEach(function(Pe,Fe){let je,He=K(Pe)&&this.pointClass.prototype.optionsToObject.call({series:this},Pe)||{},Qe=He.x;He.id||fe(Qe)?((je=this.findPointIndex(He,De))===-1||je===void 0?Ne.push(Pe):_e[je]&&Pe!==ce.data[je]?(_e[je].update(Pe,!1,null,!1),_e[je].touched=!0,ke&&(De=je+1)):_e[je]&&(_e[je].touched=!0),(!Le||Fe!==je||xe&&xe.enabled||this.hasDerivedData)&&(me=!0)):Ne.push(Pe)},this),me)for(Re=_e.length;Re--;)($e=_e[Re])&&!$e.touched&&$e.remove&&$e.remove(!1,ae);else!Le||xe&&xe.enabled?Se=!1:(te.forEach(function(Pe,Fe){Pe===_e[Fe].y||_e[Fe].destroyed||_e[Fe].update(Pe,!1,null,!1)}),Ne.length=0);return _e.forEach(function(Pe){Pe&&(Pe.touched=!1)}),!!Se&&(Ne.forEach(function(Pe){this.addPoint(Pe,!1,null,null,!1)},this),this.xIncrement===null&&this.xData&&this.xData.length&&(this.xIncrement=M(this.xData),this.autoIncrement()),!0)}setData(te,ae=!0,ce,xe){var mt;let _e=this,Ne=_e.points,ke=Ne&&Ne.length||0,Le=_e.options,me=_e.chart,Re=Le.dataSorting,$e=_e.xAxis,De=Le.turboThreshold,Se=this.xData,Pe=this.yData,Fe=_e.pointArrayMap,je=Fe&&Fe.length,He=Le.keys,Qe,at,rt,dt=0,gt=1,Tt;me.options.chart.allowMutatingData||(Le.data&&delete _e.options.data,_e.userOptions.data&&delete _e.userOptions.data,Tt=oe(!0,te));let Nt=(te=Tt||te||[]).length;if(Re&&Re.enabled&&(te=this.sortData(te)),me.options.chart.allowMutatingData&&xe!==!1&&Nt&&ke&&!_e.cropped&&!_e.hasGroupedData&&_e.visible&&!_e.boosted&&(rt=this.updateData(te,ce)),!rt){_e.xIncrement=null,_e.colorCounter=0,this.parallelArrays.forEach(function(kt){_e[kt+"Data"].length=0});let St=De&&Nt>De;if(St){let kt=_e.getFirstValidPoint(te),ii=_e.getFirstValidPoint(te,Nt-1,-1),fi=Ht=>!!(se(Ht)&&(He||fe(Ht[0])));if(fe(kt)&&fe(ii))for(Qe=0;Qe<Nt;Qe++)Se[Qe]=this.autoIncrement(),Pe[Qe]=te[Qe];else if(fi(kt)&&fi(ii))if(je)if(kt.length===je)for(Qe=0;Qe<Nt;Qe++)Se[Qe]=this.autoIncrement(),Pe[Qe]=te[Qe];else for(Qe=0;Qe<Nt;Qe++)at=te[Qe],Se[Qe]=at[0],Pe[Qe]=at.slice(1,je+1);else if(He&&(dt=He.indexOf("x"),gt=He.indexOf("y"),dt=dt>=0?dt:0,gt=gt>=0?gt:1),kt.length===1&&(gt=0),dt===gt)for(Qe=0;Qe<Nt;Qe++)Se[Qe]=this.autoIncrement(),Pe[Qe]=te[Qe][gt];else for(Qe=0;Qe<Nt;Qe++)at=te[Qe],Se[Qe]=at[dt],Pe[Qe]=at[gt];else St=!1}if(!St)for(Qe=0;Qe<Nt;Qe++)at={series:_e},_e.pointClass.prototype.applyOptions.apply(at,[te[Qe]]),_e.updateParallelArrays(at,Qe);for(Pe&&ee(Pe[0])&&R(14,!0,me),_e.data=[],_e.options.data=_e.userOptions.data=te,Qe=ke;Qe--;)(mt=Ne[Qe])==null||mt.destroy();$e&&($e.minRange=$e.userMinRange),_e.isDirty=me.isDirtyBox=!0,_e.isDirtyData=!!Ne,ce=!1}Le.legendType==="point"&&(this.processData(),this.generatePoints()),ae&&me.redraw(ce)}sortData(te){let ae=this,ce=ae.options.dataSorting.sortKey||"y",xe=function(_e,Ne){return K(Ne)&&_e.pointClass.prototype.optionsToObject.call({series:_e},Ne)||{}};return te.forEach(function(_e,Ne){te[Ne]=xe(ae,_e),te[Ne].index=Ne},this),te.concat().sort((_e,Ne)=>{let ke=q(ce,_e),Le=q(ce,Ne);return Le<ke?-1:Le>ke?1:0}).forEach(function(_e,Ne){_e.x=Ne},this),ae.linkedSeries&&ae.linkedSeries.forEach(function(_e){let Ne=_e.options,ke=Ne.data;Ne.dataSorting&&Ne.dataSorting.enabled||!ke||(ke.forEach(function(Le,me){ke[me]=xe(_e,Le),te[me]&&(ke[me].x=te[me].x,ke[me].index=me)}),_e.setData(ke,!1))}),te}getProcessedData(te){let ae=this,ce=ae.xAxis,xe=ae.options.cropThreshold,_e=ce==null?void 0:ce.logarithmic,Ne=ae.isCartesian,ke,Le,me=0,Re,$e,De,Se=ae.xData,Pe=ae.yData,Fe=!1,je=Se.length;ce&&($e=(Re=ce.getExtremes()).min,De=Re.max,Fe=!!(ce.categories&&!ce.names.length)),Ne&&ae.sorted&&!te&&(!xe||je>xe||ae.forceCrop)&&(Se[je-1]<$e||Se[0]>De?(Se=[],Pe=[]):ae.yData&&(Se[0]<$e||Se[je-1]>De)&&(Se=(ke=this.cropData(ae.xData,ae.yData,$e,De)).xData,Pe=ke.yData,me=ke.start,Le=!0));let He=j([_e?Se.map(_e.log2lin):Se],()=>ae.requireSorting&&!Fe&&R(15,!1,ae.chart));return{xData:Se,yData:Pe,cropped:Le,cropStart:me,closestPointRange:He}}processData(te){let ae=this.xAxis;if(this.isCartesian&&!this.isDirty&&!ae.isDirty&&!this.yAxis.isDirty&&!te)return!1;let ce=this.getProcessedData();this.cropped=ce.cropped,this.cropStart=ce.cropStart,this.processedXData=ce.xData,this.processedYData=ce.yData,this.closestPointRange=this.basePointRange=ce.closestPointRange,F(this,"afterProcessData")}cropData(te,ae,ce,xe){let _e=te.length,Ne,ke,Le=0,me=_e;for(Ne=0;Ne<_e;Ne++)if(te[Ne]>=ce){Le=Math.max(0,Ne-1);break}for(ke=Ne;ke<_e;ke++)if(te[ke]>xe){me=ke+1;break}return{xData:te.slice(Le,me),yData:ae.slice(Le,me),start:Le,end:me}}generatePoints(){let te=this.options,ae=this.processedData||te.data,ce=this.processedXData,xe=this.processedYData,_e=this.pointClass,Ne=ce.length,ke=this.cropStart||0,Le=this.hasGroupedData,me=te.keys,Re=[],$e=te.dataGrouping&&te.dataGrouping.groupAll?ke:0,De,Se,Pe,Fe,je=this.data;if(!je&&!Le){let He=[];He.length=ae.length,je=this.data=He}for(me&&Le&&(this.options.keys=!1),Fe=0;Fe<Ne;Fe++)Se=ke+Fe,Le?((Pe=new _e(this,[ce[Fe]].concat(J(xe[Fe])))).dataGroup=this.groupMap[$e+Fe],Pe.dataGroup.options&&(Pe.options=Pe.dataGroup.options,L(Pe,Pe.dataGroup.options),delete Pe.dataLabels)):(Pe=je[Se])||ae[Se]===void 0||(je[Se]=Pe=new _e(this,ae[Se],ce[Fe])),Pe&&(Pe.index=Le?$e+Fe:Se,Re[Fe]=Pe);if(this.options.keys=me,je&&(Ne!==(De=je.length)||Le))for(Fe=0;Fe<De;Fe++)Fe!==ke||Le||(Fe+=Ne),je[Fe]&&(je[Fe].destroyElements(),je[Fe].plotX=void 0);this.data=je,this.points=Re,F(this,"afterGeneratePoints")}getXExtremes(te){return{min:S(te),max:M(te)}}getExtremes(te,ae){let ce=this.xAxis,xe=this.yAxis,_e=[],Ne=this.requireSorting&&!this.is("column")?1:0,ke=!!xe&&xe.positiveValuesOnly,Le=ae||this.getExtremesFromAll||this.options.getExtremesFromAll,{processedXData:me,processedYData:Re}=this,$e,De,Se,Pe,Fe,je,He,Qe=0,at=0,rt=0;if(this.cropped&&Le){let Nt=this.getProcessedData(!0);me=Nt.xData,Re=Nt.yData}let dt=(te=te||this.stackedYData||Re||[]).length,gt=me||this.xData;for(ce&&(Qe=($e=ce.getExtremes()).min,at=$e.max),je=0;je<dt;je++)if(Pe=gt[je],De=(fe(Fe=te[je])||se(Fe))&&((fe(Fe)?Fe>0:Fe.length)||!ke),Se=ae||this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||!ce||(gt[je+Ne]||Pe)>=Qe&&(gt[je-Ne]||Pe)<=at,De&&Se)if(He=Fe.length)for(;He--;)fe(Fe[He])&&(_e[rt++]=Fe[He]);else _e[rt++]=Fe;let Tt={activeYData:_e,dataMin:S(_e),dataMax:M(_e)};return F(this,"afterGetExtremes",{dataExtremes:Tt}),Tt}applyExtremes(){let te=this.getExtremes();return this.dataMin=te.dataMin,this.dataMax=te.dataMax,te}getFirstValidPoint(te,ae=0,ce=1){let xe=te.length,_e=ae;for(;_e>=0&&_e<xe;){if(K(te[_e]))return te[_e];_e+=ce}}translate(){var at;this.processedXData||this.processData(),this.generatePoints();let te=this.options,ae=te.stacking,ce=this.xAxis,xe=ce.categories,_e=this.enabledDataSorting,Ne=this.yAxis,ke=this.points,Le=ke.length,me=this.pointPlacementToXValue(),Re=!!me,$e=te.threshold,De=te.startFromThreshold?$e:0,Se,Pe,Fe,je,He=Number.MAX_VALUE;function Qe(rt){return N(rt,-1e9,1e9)}for(Se=0;Se<Le;Se++){let rt,dt=ke[Se],gt=dt.x,Tt,Nt,mt=dt.y,St=dt.low,kt=ae&&((at=Ne.stacking)==null?void 0:at.stacks[(this.negStacks&&mt<(De?0:$e)?"-":"")+this.stackKey]);Pe=ce.translate(gt,!1,!1,!1,!0,me),dt.plotX=fe(Pe)?Y(Qe(Pe)):void 0,ae&&this.visible&&kt&&kt[gt]&&(je=this.getStackIndicator(je,gt,this.index),!dt.isNull&&je.key&&(Nt=(Tt=kt[gt]).points[je.key]),Tt&&se(Nt)&&(St=Nt[0],mt=Nt[1],St===De&&je.key===kt[gt].base&&(St=ge(fe($e)?$e:Ne.min)),Ne.positiveValuesOnly&&K(St)&&St<=0&&(St=void 0),dt.total=dt.stackTotal=ge(Tt.total),dt.percentage=K(dt.y)&&Tt.total?dt.y/Tt.total*100:void 0,dt.stackY=mt,this.irregularWidths||Tt.setOffset(this.pointXOffset||0,this.barW||0,void 0,void 0,void 0,this.xAxis))),dt.yBottom=K(St)?Qe(Ne.translate(St,!1,!0,!1,!0)):void 0,this.dataModify&&(mt=this.dataModify.modifyValue(mt,Se)),fe(mt)&&dt.plotX!==void 0&&(rt=fe(rt=Ne.translate(mt,!1,!0,!1,!0))?Qe(rt):void 0),dt.plotY=rt,dt.isInside=this.isPointInside(dt),dt.clientX=Re?Y(ce.translate(gt,!1,!1,!1,!0,me)):Pe,dt.negative=(dt.y||0)<($e||0),dt.category=ge(xe&&xe[dt.x],dt.x),dt.isNull||dt.visible===!1||(Fe!==void 0&&(He=Math.min(He,Math.abs(Pe-Fe))),Fe=Pe),dt.zone=this.zones.length?dt.getZone():void 0,!dt.graphic&&this.group&&_e&&(dt.isNew=!0)}this.closestPointRangePx=He,F(this,"afterTranslate")}getValidPoints(te,ae,ce){let xe=this.chart;return(te||this.points||[]).filter(function(_e){let{plotX:Ne,plotY:ke}=_e;return!!((ce||!_e.isNull&&fe(ke))&&(!ae||xe.isInsidePlot(Ne,ke,{inverted:xe.inverted})))&&_e.visible!==!1})}getClipBox(){let{chart:te,xAxis:ae,yAxis:ce}=this,{x:xe,y:_e,width:Ne,height:ke}=oe(te.clipBox);return ae&&ae.len!==te.plotSizeX&&(Ne=ae.len),ce&&ce.len!==te.plotSizeY&&(ke=ce.len),te.inverted&&!this.invertible&&([Ne,ke]=[ke,Ne]),{x:xe,y:_e,width:Ne,height:ke}}getSharedClipKey(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0),this.sharedClipKey}setClip(){let{chart:te,group:ae,markerGroup:ce}=this,xe=te.sharedClips,_e=te.renderer,Ne=this.getClipBox(),ke=this.getSharedClipKey(),Le=xe[ke];Le?Le.animate(Ne):xe[ke]=Le=_e.clipRect(Ne),ae&&ae.clip(this.options.clip===!1?void 0:Le),ce&&ce.clip()}animate(te){let{chart:ae,group:ce,markerGroup:xe}=this,_e=ae.inverted,Ne=v(this.options.animation),ke=[this.getSharedClipKey(),Ne.duration,Ne.easing,Ne.defer].join(","),Le=ae.sharedClips[ke],me=ae.sharedClips[ke+"m"];if(te&&ce){let Re=this.getClipBox();if(Le)Le.attr("height",Re.height);else{Re.width=0,_e&&(Re.x=ae.plotHeight),Le=ae.renderer.clipRect(Re),ae.sharedClips[ke]=Le;let $e={x:-99,y:-99,width:_e?ae.plotWidth+199:99,height:_e?99:ae.plotHeight+199};me=ae.renderer.clipRect($e),ae.sharedClips[ke+"m"]=me}ce.clip(Le),xe==null||xe.clip(me)}else if(Le&&!Le.hasClass("highcharts-animating")){let Re=this.getClipBox(),$e=Ne.step;(xe!=null&&xe.element.childNodes.length||ae.series.length>1)&&(Ne.step=function(De,Se){$e&&$e.apply(Se,arguments),Se.prop==="width"&&(me!=null&&me.element)&&me.attr(_e?"height":"width",De+99)}),Le.addClass("highcharts-animating").animate(Re,Ne)}}afterAnimate(){this.setClip(),Ce(this.chart.sharedClips,(te,ae,ce)=>{te&&!this.chart.container.querySelector(`[clip-path="url(#${te.id})"]`)&&(te.destroy(),delete ce[ae])}),this.finishedAnimating=!0,F(this,"afterAnimate")}drawPoints(te=this.points){let ae,ce,xe,_e,Ne,ke,Le,me=this.chart,Re=me.styledMode,{colorAxis:$e,options:De}=this,Se=De.marker,Pe=this[this.specialGroup||"markerGroup"],Fe=this.xAxis,je=ge(Se.enabled,!Fe||!!Fe.isRadial||null,this.closestPointRangePx>=Se.enabledThreshold*Se.radius);if(Se.enabled!==!1||this._hasPointMarkers)for(ae=0;ae<te.length;ae++)if(_e=(xe=(ce=te[ae]).graphic)?"animate":"attr",Ne=ce.marker||{},ke=!!ce.marker,(je&&Ne.enabled===void 0||Ne.enabled)&&!ce.isNull&&ce.visible!==!1){let He=ge(Ne.symbol,this.symbol,"rect");Le=this.markerAttribs(ce,ce.selected&&"select"),this.enabledDataSorting&&(ce.startXPos=Fe.reversed?-(Le.width||0):Fe.width);let Qe=ce.isInside!==!1;if(!xe&&Qe&&((Le.width||0)>0||ce.hasImage)&&(ce.graphic=xe=me.renderer.symbol(He,Le.x,Le.y,Le.width,Le.height,ke?Ne:Se).add(Pe),this.enabledDataSorting&&me.hasRendered&&(xe.attr({x:ce.startXPos}),_e="animate")),xe&&_e==="animate"&&xe[Qe?"show":"hide"](Qe).animate(Le),xe){let at=this.pointAttribs(ce,Re||!ce.selected?void 0:"select");Re?$e&&xe.css({fill:at.fill}):xe[_e](at)}xe&&xe.addClass(ce.getClassName(),!0)}else xe&&(ce.graphic=xe.destroy())}markerAttribs(te,ae){let ce=this.options,xe=ce.marker,_e=te.marker||{},Ne=_e.symbol||xe.symbol,ke={},Le,me,Re=ge(_e.radius,xe&&xe.radius);ae&&(Le=xe.states[ae],Re=ge((me=_e.states&&_e.states[ae])&&me.radius,Le&&Le.radius,Re&&Re+(Le&&Le.radiusPlus||0))),te.hasImage=Ne&&Ne.indexOf("url")===0,te.hasImage&&(Re=0);let $e=te.pos();return fe(Re)&&$e&&(ce.crisp&&($e[0]=Z($e[0],te.hasImage?0:Ne==="rect"?(xe==null?void 0:xe.lineWidth)||0:1)),ke.x=$e[0]-Re,ke.y=$e[1]-Re),Re&&(ke.width=ke.height=2*Re),ke}pointAttribs(te,ae){let ce=this.options.marker,xe=te&&te.options,_e=xe&&xe.marker||{},Ne=xe&&xe.color,ke=te&&te.color,Le=te&&te.zone&&te.zone.color,me,Re,$e=this.color,De,Se,Pe=ge(_e.lineWidth,ce.lineWidth),Fe=1;return $e=Ne||Le||ke||$e,De=_e.fillColor||ce.fillColor||$e,Se=_e.lineColor||ce.lineColor||$e,ae=ae||"normal",me=ce.states[ae]||{},Pe=ge((Re=_e.states&&_e.states[ae]||{}).lineWidth,me.lineWidth,Pe+ge(Re.lineWidthPlus,me.lineWidthPlus,0)),De=Re.fillColor||me.fillColor||De,{stroke:Se=Re.lineColor||me.lineColor||Se,"stroke-width":Pe,fill:De,opacity:Fe=ge(Re.opacity,me.opacity,Fe)}}destroy(te){let ae,ce,xe,_e=this,Ne=_e.chart,ke=/AppleWebKit\/533/.test(E.navigator.userAgent),Le=_e.data||[];for(F(_e,"destroy",{keepEventsForUpdate:te}),this.removeEvents(te),(_e.axisTypes||[]).forEach(function(me){(xe=_e[me])&&xe.series&&(B(xe.series,_e),xe.isDirty=xe.forceRedraw=!0)}),_e.legendItem&&_e.chart.legend.destroyItem(_e),ae=Le.length;ae--;)(ce=Le[ae])&&ce.destroy&&ce.destroy();for(let me of _e.zones)U(me,void 0,!0);x.clearTimeout(_e.animationTimeout),Ce(_e,function(me,Re){me instanceof g&&!me.survive&&me[ke&&Re==="group"?"hide":"destroy"]()}),Ne.hoverSeries===_e&&(Ne.hoverSeries=void 0),B(Ne.series,_e),Ne.orderItems("series"),Ce(_e,function(me,Re){te&&Re==="hcEvents"||delete _e[Re]})}applyZones(){let{area:te,chart:ae,graph:ce,zones:xe,points:_e,xAxis:Ne,yAxis:ke,zoneAxis:Le}=this,{inverted:me,renderer:Re}=ae,$e=this[`${Le}Axis`],{isXAxis:De,len:Se=0}=$e||{},Pe=((ce==null?void 0:ce.strokeWidth())||0)/2+1,Fe=(je,He=0,Qe=0)=>{me&&(Qe=Se-Qe);let{translated:at=0,lineClip:rt}=je,dt=Qe-at;rt==null||rt.push(["L",He,Math.abs(dt)<Pe?Qe-Pe*(dt<=0?-1:1):at])};if(xe.length&&(ce||te)&&$e&&fe($e.min)){let je=$e.getExtremes().max,He=rt=>{rt.forEach((dt,gt)=>{(dt[0]==="M"||dt[0]==="L")&&(rt[gt]=[dt[0],De?Se-dt[1]:dt[1],De?dt[2]:Se-dt[2]])})};if(xe.forEach(rt=>{rt.lineClip=[],rt.translated=N($e.toPixels(ge(rt.value,je),!0)||0,0,Se)}),ce&&!this.showLine&&ce.hide(),te&&te.hide(),Le==="y"&&_e.length<Ne.len)for(let rt of _e){let{plotX:dt,plotY:gt,zone:Tt}=rt,Nt=Tt&&xe[xe.indexOf(Tt)-1];Tt&&Fe(Tt,dt,gt),Nt&&Fe(Nt,dt,gt)}let Qe=[],at=$e.toPixels($e.getExtremes().min,!0);xe.forEach(rt=>{var fr,nr;let dt=rt.lineClip||[],gt=Math.round(rt.translated||0);Ne.reversed&&dt.reverse();let{clip:Tt,simpleClip:Nt}=rt,mt=0,St=0,kt=Ne.len,ii=ke.len;De?(mt=gt,kt=at):(St=gt,ii=at);let fi=[["M",mt,St],["L",kt,St],["L",kt,ii],["L",mt,ii],["Z"]],Ht=[fi[0],...dt,fi[1],fi[2],...Qe,fi[3],fi[4]];Qe=dt.reverse(),at=gt,me&&(He(Ht),te&&He(fi)),Tt?(Tt.animate({d:Ht}),Nt==null||Nt.animate({d:fi})):(Tt=rt.clip=Re.path(Ht),te&&(Nt=rt.simpleClip=Re.path(fi))),ce&&((fr=rt.graph)==null||fr.clip(Tt)),te&&((nr=rt.area)==null||nr.clip(Nt))})}else this.visible&&(ce&&ce.show(),te&&te.show())}plotGroup(te,ae,ce,xe,_e){let Ne=this[te],ke=!Ne,Le={visibility:ce,zIndex:xe||.1};return K(this.opacity)&&!this.chart.styledMode&&this.state!=="inactive"&&(Le.opacity=this.opacity),Ne||(this[te]=Ne=this.chart.renderer.g().add(_e)),Ne.addClass("highcharts-"+ae+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(K(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(Ne.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),Ne.attr(Le)[ke?"attr":"animate"](this.getPlotBox(ae)),Ne}getPlotBox(te){let ae=this.xAxis,ce=this.yAxis,xe=this.chart,_e=xe.inverted&&!xe.polar&&ae&&this.invertible&&te==="series";return xe.inverted&&(ae=ce,ce=this.xAxis),{translateX:ae?ae.left:xe.plotLeft,translateY:ce?ce.top:xe.plotTop,rotation:_e?90:0,rotationOriginX:_e?(ae.len-ce.len)/2:0,rotationOriginY:_e?(ae.len+ce.len)/2:0,scaleX:_e?-1:1,scaleY:1}}removeEvents(te){let{eventsToUnbind:ae}=this;te||Ee(this),ae.length&&(ae.forEach(ce=>{ce()}),ae.length=0)}render(){var Re,$e,De,Se,Pe;let te=this,{chart:ae,options:ce,hasRendered:xe}=te,_e=v(ce.animation),Ne=te.visible?"inherit":"hidden",ke=ce.zIndex,Le=ae.seriesGroup,me=te.finishedAnimating?0:_e.duration;F(this,"render"),te.plotGroup("group","series",Ne,ke,Le),te.markerGroup=te.plotGroup("markerGroup","markers",Ne,ke,Le),ce.clip!==!1&&te.setClip(),me&&((Re=te.animate)==null||Re.call(te,!0)),te.drawGraph&&(te.drawGraph(),te.applyZones()),te.visible&&te.drawPoints(),($e=te.drawDataLabels)==null||$e.call(te),(De=te.redrawPoints)==null||De.call(te),ce.enableMouseTracking&&((Se=te.drawTracker)==null||Se.call(te)),me&&((Pe=te.animate)==null||Pe.call(te)),xe||(me&&_e.defer&&(me+=_e.defer),te.animationTimeout=ie(()=>{te.afterAnimate()},me||0)),te.isDirty=!1,te.hasRendered=!0,F(te,"afterRender")}redraw(){let te=this.isDirty||this.isDirtyData;this.translate(),this.render(),te&&delete this.kdTree}reserveSpace(){return this.visible||!this.chart.options.chart.ignoreHiddenSeries}searchPoint(te,ae){let{xAxis:ce,yAxis:xe}=this,_e=this.chart.inverted;return this.searchKDTree({clientX:_e?ce.len-te.chartY+ce.pos:te.chartX-ce.pos,plotY:_e?xe.len-te.chartX+xe.pos:te.chartY-xe.pos},ae,te)}buildKDTree(te){this.buildingKdTree=!0;let ae=this,ce=ae.options.findNearestPointBy.indexOf("y")>-1?2:1;delete ae.kdTree,ie(function(){ae.kdTree=function xe(_e,Ne,ke){let Le,me,Re=_e==null?void 0:_e.length;if(Re)return Le=ae.kdAxisArray[Ne%ke],_e.sort(($e,De)=>($e[Le]||0)-(De[Le]||0)),{point:_e[me=Math.floor(Re/2)],left:xe(_e.slice(0,me),Ne+1,ke),right:xe(_e.slice(me+1),Ne+1,ke)}}(ae.getValidPoints(void 0,!ae.directTouch),ce,ce),ae.buildingKdTree=!1},ae.options.kdNow||(te==null?void 0:te.type)==="touchstart"?0:1)}searchKDTree(te,ae,ce){let xe=this,[_e,Ne]=this.kdAxisArray,ke=ae?"distX":"dist",Le=(xe.options.findNearestPointBy||"").indexOf("y")>-1?2:1,me=!!xe.isBubble;if(this.kdTree||this.buildingKdTree||this.buildKDTree(ce),this.kdTree)return function Re($e,De,Se,Pe){var Tt;let Fe=De.point,je=xe.kdAxisArray[Se%Pe],He,Qe,at=Fe;(function(Nt,mt){var vr;let St=Nt[_e],kt=mt[_e],ii=K(St)&&K(kt)?St-kt:null,fi=Nt[Ne],Ht=mt[Ne],fr=K(fi)&&K(Ht)?fi-Ht:0,nr=me&&((vr=mt.marker)==null?void 0:vr.radius)||0;mt.dist=Math.sqrt((ii&&ii*ii||0)+fr*fr)-nr,mt.distX=K(ii)?Math.abs(ii)-nr:Number.MAX_VALUE})($e,Fe);let rt=($e[je]||0)-(Fe[je]||0)+(me&&((Tt=Fe.marker)==null?void 0:Tt.radius)||0),dt=rt<0?"left":"right",gt=rt<0?"right":"left";return De[dt]&&(at=(He=Re($e,De[dt],Se+1,Pe))[ke]<at[ke]?He:Fe),De[gt]&&Math.sqrt(rt*rt)<at[ke]&&(at=(Qe=Re($e,De[gt],Se+1,Pe))[ke]<at[ke]?Qe:at),at}(te,this.kdTree,Le,Le)}pointPlacementToXValue(){let{options:te,xAxis:ae}=this,ce=te.pointPlacement;return ce==="between"&&(ce=ae.reversed?-.5:.5),fe(ce)?ce*(te.pointRange||ae.pointRange):0}isPointInside(te){let{chart:ae,xAxis:ce,yAxis:xe}=this,{plotX:_e=-1,plotY:Ne=-1}=te;return Ne>=0&&Ne<=(xe?xe.len:ae.plotHeight)&&_e>=0&&_e<=(ce?ce.len:ae.plotWidth)}drawTracker(){var De;let te=this,ae=te.options,ce=ae.trackByArea,xe=[].concat((ce?te.areaPath:te.graphPath)||[]),_e=te.chart,Ne=_e.pointer,ke=_e.renderer,Le=((De=_e.options.tooltip)==null?void 0:De.snap)||0,me=()=>{ae.enableMouseTracking&&_e.hoverSeries!==te&&te.onMouseOver()},Re="rgba(192,192,192,"+(w?1e-4:.002)+")",$e=te.tracker;$e?$e.attr({d:xe}):te.graph&&(te.tracker=$e=ke.path(xe).attr({visibility:te.visible?"inherit":"hidden",zIndex:2}).addClass(ce?"highcharts-tracker-area":"highcharts-tracker-line").add(te.group),_e.styledMode||$e.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:Re,fill:ce?Re:"none","stroke-width":te.graph.strokeWidth()+(ce?0:2*Le)}),[te.tracker,te.markerGroup,te.dataLabelsGroup].forEach(Se=>{Se&&(Se.addClass("highcharts-tracker").on("mouseover",me).on("mouseout",Pe=>{Ne==null||Ne.onTrackerMouseOut(Pe)}),ae.cursor&&!_e.styledMode&&Se.css({cursor:ae.cursor}),Se.on("touchstart",me))})),F(this,"afterDrawTracker")}addPoint(te,ae,ce,xe,_e){let Ne,ke,Le=this.options,me=this.data,Re=this.chart,$e=this.xAxis,De=$e&&$e.hasNames&&$e.names,Se=Le.data,Pe=this.xData;ae=ge(ae,!0);let Fe={series:this};this.pointClass.prototype.applyOptions.apply(Fe,[te]);let je=Fe.x;if(ke=Pe.length,this.requireSorting&&je<Pe[ke-1])for(Ne=!0;ke&&Pe[ke-1]>je;)ke--;this.updateParallelArrays(Fe,"splice",[ke,0,0]),this.updateParallelArrays(Fe,ke),De&&Fe.name&&(De[je]=Fe.name),Se.splice(ke,0,te),(Ne||this.processedData)&&(this.data.splice(ke,0,null),this.processData()),Le.legendType==="point"&&this.generatePoints(),ce&&(me[0]&&me[0].remove?me[0].remove(!1):(me.shift(),this.updateParallelArrays(Fe,"shift"),Se.shift())),_e!==!1&&F(this,"addPoint",{point:Fe}),this.isDirty=!0,this.isDirtyData=!0,ae&&Re.redraw(xe)}removePoint(te,ae,ce){let xe=this,_e=xe.data,Ne=_e[te],ke=xe.points,Le=xe.chart,me=function(){ke&&ke.length===_e.length&&ke.splice(te,1),_e.splice(te,1),xe.options.data.splice(te,1),xe.updateParallelArrays(Ne||{series:xe},"splice",[te,1]),Ne&&Ne.destroy(),xe.isDirty=!0,xe.isDirtyData=!0,ae&&Le.redraw()};_(ce,Le),ae=ge(ae,!0),Ne?Ne.firePointEvent("remove",null,me):me()}remove(te,ae,ce,xe){let _e=this,Ne=_e.chart;function ke(){_e.destroy(xe),Ne.isDirtyLegend=Ne.isDirtyBox=!0,Ne.linkSeries(xe),ge(te,!0)&&Ne.redraw(ae)}ce!==!1?F(_e,"remove",null,ke):ke()}update(te,ae){var He,Qe,at;F(this,"update",{options:te=$(te,this.userOptions)});let ce=this,xe=ce.chart,_e=ce.userOptions,Ne=ce.initialType||ce.type,ke=xe.options.plotOptions,Le=A[Ne].prototype,me=ce.finishedAnimating&&{animation:!1},Re={},$e,De,Se=["colorIndex","eventOptions","navigatorSeries","symbolIndex","baseSeries"],Pe=te.type||_e.type||xe.options.chart.type,Fe=!(this.hasDerivedData||Pe&&Pe!==this.type||te.pointStart!==void 0||te.pointInterval!==void 0||te.relativeXValue!==void 0||te.joinBy||te.mapData||["dataGrouping","pointStart","pointInterval","pointIntervalUnit","keys"].some(rt=>ce.hasOptionChanged(rt)));Pe=Pe||Ne,Fe&&(Se.push("data","isDirtyData","isDirtyCanvas","points","processedData","processedXData","processedYData","xIncrement","cropped","_hasPointMarkers","hasDataLabels","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX","transformGroups"),te.visible!==!1&&Se.push("area","graph"),ce.parallelArrays.forEach(function(rt){Se.push(rt+"Data")}),te.data&&(te.dataSorting&&L(ce.options.dataSorting,te.dataSorting),this.setData(te.data,!1))),te=oe(_e,{index:_e.index===void 0?ce.index:_e.index,pointStart:((He=ke==null?void 0:ke.series)==null?void 0:He.pointStart)??_e.pointStart??((Qe=ce.xData)==null?void 0:Qe[0])},!Fe&&{data:ce.options.data},te,me),Fe&&te.data&&(te.data=ce.options.data),(Se=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(Se)).forEach(function(rt){Se[rt]=ce[rt],delete ce[rt]});let je=!1;if(A[Pe]){if(je=Pe!==ce.type,ce.remove(!1,!1,!1,!0),je)if(xe.propFromSeries(),Object.setPrototypeOf)Object.setPrototypeOf(ce,A[Pe].prototype);else{let rt=Object.hasOwnProperty.call(ce,"hcEvents")&&ce.hcEvents;for(De in Le)ce[De]=void 0;L(ce,A[Pe].prototype),rt?ce.hcEvents=rt:delete ce.hcEvents}}else R(17,!0,xe,{missingModuleFor:Pe});if(Se.forEach(function(rt){ce[rt]=Se[rt]}),ce.init(xe,te),Fe&&this.points)for(let rt of(($e=ce.options).visible===!1?(Re.graphic=1,Re.dataLabel=1):(this.hasMarkerChanged($e,_e)&&(Re.graphic=1),(at=ce.hasDataLabels)!=null&&at.call(ce)||(Re.dataLabel=1)),this.points))rt&&rt.series&&(rt.resolveColor(),Object.keys(Re).length&&rt.destroyElements(Re),$e.showInLegend===!1&&rt.legendItem&&xe.legend.destroyItem(rt));ce.initialType=Ne,xe.linkSeries(),xe.setSortedData(),je&&ce.linkedSeries.length&&(ce.isDirtyData=!0),F(this,"afterUpdate"),ge(ae,!0)&&xe.redraw(!!Fe&&void 0)}setName(te){this.name=this.options.name=this.userOptions.name=te,this.chart.isDirtyLegend=!0}hasOptionChanged(te){var ke,Le;let ae=this.chart,ce=this.options[te],xe=ae.options.plotOptions,_e=this.userOptions[te],Ne=ge((ke=xe==null?void 0:xe[this.type])==null?void 0:ke[te],(Le=xe==null?void 0:xe.series)==null?void 0:Le[te]);return _e&&!K(Ne)?ce!==_e:ce!==ge(Ne,ce)}onMouseOver(){let te=this.chart,ae=te.hoverSeries,ce=te.pointer;ce==null||ce.setHoverChartIndex(),ae&&ae!==this&&ae.onMouseOut(),this.options.events.mouseOver&&F(this,"mouseOver"),this.setState("hover"),te.hoverSeries=this}onMouseOut(){let te=this.options,ae=this.chart,ce=ae.tooltip,xe=ae.hoverPoint;ae.hoverSeries=null,xe&&xe.onMouseOut(),this&&te.events.mouseOut&&F(this,"mouseOut"),ce&&!this.stickyTracking&&(!ce.shared||this.noSharedTooltip)&&ce.hide(),ae.series.forEach(function(_e){_e.setState("",!0)})}setState(te,ae){let ce=this,xe=ce.options,_e=ce.graph,Ne=xe.inactiveOtherPoints,ke=xe.states,Le=ge(ke[te||"normal"]&&ke[te||"normal"].animation,ce.chart.options.chart.animation),me=xe.lineWidth,Re=xe.opacity;if(te=te||"",ce.state!==te&&([ce.group,ce.markerGroup,ce.dataLabelsGroup].forEach(function($e){$e&&(ce.state&&$e.removeClass("highcharts-series-"+ce.state),te&&$e.addClass("highcharts-series-"+te))}),ce.state=te,!ce.chart.styledMode)){if(ke[te]&&ke[te].enabled===!1)return;if(te&&(me=ke[te].lineWidth||me+(ke[te].lineWidthPlus||0),Re=ge(ke[te].opacity,Re)),_e&&!_e.dashstyle&&fe(me))for(let $e of[_e,...this.zones.map(De=>De.graph)])$e==null||$e.animate({"stroke-width":me},Le);Ne||[ce.group,ce.markerGroup,ce.dataLabelsGroup,ce.labelBySeries].forEach(function($e){$e&&$e.animate({opacity:Re},Le)})}ae&&Ne&&ce.points&&ce.setAllPointsToState(te||void 0)}setAllPointsToState(te){this.points.forEach(function(ae){ae.setState&&ae.setState(te)})}setVisible(te,ae){var Le;let ce=this,xe=ce.chart,_e=xe.options.chart.ignoreHiddenSeries,Ne=ce.visible;ce.visible=te=ce.options.visible=ce.userOptions.visible=te===void 0?!Ne:te;let ke=te?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach(me=>{var Re;(Re=ce[me])==null||Re[ke]()}),(xe.hoverSeries===ce||((Le=xe.hoverPoint)==null?void 0:Le.series)===ce)&&ce.onMouseOut(),ce.legendItem&&xe.legend.colorizeItem(ce,te),ce.isDirty=!0,ce.options.stacking&&xe.series.forEach(me=>{me.options.stacking&&me.visible&&(me.isDirty=!0)}),ce.linkedSeries.forEach(me=>{me.setVisible(te,!1)}),_e&&(xe.isDirtyBox=!0),F(ce,ke),ae!==!1&&xe.redraw()}show(){this.setVisible(!0)}hide(){this.setVisible(!1)}select(te){this.selected=te=this.options.selected=te===void 0?!this.selected:te,this.checkbox&&(this.checkbox.checked=te),F(this,te?"select":"unselect")}shouldShowTooltip(te,ae,ce={}){return ce.series=this,ce.visiblePlotOnly=!0,this.chart.isInsidePlot(te,ae,ce)}drawLegendSymbol(te,ae){var ce;(ce=h[this.options.legendSymbol||"rectangle"])==null||ce.call(this,te,ae)}}return le.defaultOptions=m,le.types=y.seriesTypes,le.registerType=y.registerSeriesType,L(le.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,directTouch:!1,invertible:!0,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:p,requireSorting:!0,sorted:!0}),y.series=le,le}),r(t,"Core/Legend/Legend.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Series/Point.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,p,m,y){var g;let{animObject:x,setAnimation:v}=n,{registerEventOptions:_}=a,{composed:C,marginNames:k}=c,{distribute:w}=p,{format:E}=m,{addEvent:A,createElement:M,css:S,defined:N,discardElement:Y,find:Z,fireEvent:K,isNumber:U,merge:$,pick:B,pushUnique:R,relativeLength:L,stableSort:G,syncTimeout:F}=y;class j{constructor(W,se){this.allItems=[],this.initialItemY=0,this.itemHeight=0,this.itemMarginBottom=0,this.itemMarginTop=0,this.itemX=0,this.itemY=0,this.lastItemY=0,this.lastLineHeight=0,this.legendHeight=0,this.legendWidth=0,this.maxItemWidth=0,this.maxLegendWidth=0,this.offsetWidth=0,this.padding=0,this.pages=[],this.symbolHeight=0,this.symbolWidth=0,this.titleHeight=0,this.totalItemWidth=0,this.widthOption=0,this.chart=W,this.setOptions(se),se.enabled&&(this.render(),_(this,se),A(this.chart,"endResize",function(){this.legend.positionCheckboxes()})),A(this.chart,"render",()=>{this.options.enabled&&this.proximate&&(this.proximatePositions(),this.positionItems())})}setOptions(W){let se=B(W.padding,8);this.options=W,this.chart.styledMode||(this.itemStyle=W.itemStyle,this.itemHiddenStyle=$(this.itemStyle,W.itemHiddenStyle)),this.itemMarginTop=W.itemMarginTop,this.itemMarginBottom=W.itemMarginBottom,this.padding=se,this.initialItemY=se-5,this.symbolWidth=B(W.symbolWidth,16),this.pages=[],this.proximate=W.layout==="proximate"&&!this.chart.inverted,this.baseline=void 0}update(W,se){let fe=this.chart;this.setOptions($(!0,this.options,W)),"events"in this.options&&_(this,this.options),this.destroy(),fe.isDirtyLegend=fe.isDirtyBox=!0,B(se,!0)&&fe.redraw(),K(this,"afterUpdate",{redraw:se})}colorizeItem(W,se){let{area:fe,group:ee,label:oe,line:Ce,symbol:ge}=W.legendItem||{};if(ee==null||ee[se?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){let{itemHiddenStyle:Ee={}}=this,J=Ee.color,{fillColor:ie,fillOpacity:le,lineColor:be,marker:te}=W.options,ae=ce=>(!se&&(ce.fill&&(ce.fill=J),ce.stroke&&(ce.stroke=J)),ce);oe==null||oe.css($(se?this.itemStyle:Ee)),Ce==null||Ce.attr(ae({stroke:be||W.color})),ge&&ge.attr(ae(te&&ge.isMarker?W.pointAttribs():{fill:W.color})),fe==null||fe.attr(ae({fill:ie||W.color,"fill-opacity":ie?1:le??.75}))}K(this,"afterColorizeItem",{item:W,visible:se})}positionItems(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()}positionItem(W){let{group:se,x:fe=0,y:ee=0}=W.legendItem||{},oe=this.options,Ce=oe.symbolPadding,ge=!oe.rtl,Ee=W.checkbox;if(se&&se.element){let J={translateX:ge?fe:this.legendWidth-fe-2*Ce-4,translateY:ee};se[N(se.translateY)?"animate":"attr"](J,void 0,()=>{K(this,"afterPositionItem",{item:W})})}Ee&&(Ee.x=fe,Ee.y=ee)}destroyItem(W){let se=W.checkbox,fe=W.legendItem||{};for(let ee of["group","label","line","symbol"])fe[ee]&&(fe[ee]=fe[ee].destroy());se&&Y(se),W.legendItem=void 0}destroy(){for(let W of this.getAllItems())this.destroyItem(W);for(let W of["clipRect","up","down","pager","nav","box","title","group"])this[W]&&(this[W]=this[W].destroy());this.display=null}positionCheckboxes(){let W,se=this.group&&this.group.alignAttr,fe=this.clipHeight||this.legendHeight,ee=this.titleHeight;se&&(W=se.translateY,this.allItems.forEach(function(oe){let Ce,ge=oe.checkbox;ge&&(Ce=W+ee+ge.y+(this.scrollOffset||0)+3,S(ge,{left:se.translateX+oe.checkboxOffset+ge.x-20+"px",top:Ce+"px",display:this.proximate||Ce>W-6&&Ce<W+fe-6?"":"none"}))},this))}renderTitle(){let W=this.options,se=this.padding,fe=W.title,ee,oe=0;fe.text&&(this.title||(this.title=this.chart.renderer.label(fe.text,se-3,se-4,void 0,void 0,void 0,W.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(fe.style),this.title.add(this.group)),fe.width||this.title.css({width:this.maxLegendWidth+"px"}),oe=(ee=this.title.getBBox()).height,this.offsetWidth=ee.width,this.contentGroup.attr({translateY:oe})),this.titleHeight=oe}setText(W){let se=this.options;W.legendItem.label.attr({text:se.labelFormat?E(se.labelFormat,W,this.chart):se.labelFormatter.call(W)})}renderItem(W){let se=W.legendItem=W.legendItem||{},fe=this.chart,ee=fe.renderer,oe=this.options,Ce=oe.layout==="horizontal",ge=this.symbolWidth,Ee=oe.symbolPadding||0,J=this.itemStyle,ie=this.itemHiddenStyle,le=Ce?B(oe.itemDistance,20):0,be=!oe.rtl,te=!W.series,ae=!te&&W.series.drawLegendSymbol?W.series:W,ce=ae.options,xe=!!this.createCheckboxForItem&&ce&&ce.showCheckbox,_e=oe.useHTML,Ne=W.options.className,ke=se.label,Le=ge+Ee+le+(xe?20:0);!ke&&(se.group=ee.g("legend-item").addClass("highcharts-"+ae.type+"-series highcharts-color-"+W.colorIndex+(Ne?" "+Ne:"")+(te?" highcharts-series-"+W.index:"")).attr({zIndex:1}).add(this.scrollGroup),se.label=ke=ee.text("",be?ge+Ee:-Ee,this.baseline||0,_e),fe.styledMode||ke.css($(W.visible?J:ie)),ke.attr({align:be?"left":"right",zIndex:2}).add(se.group),!this.baseline&&(this.fontMetrics=ee.fontMetrics(ke),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,ke.attr("y",this.baseline),this.symbolHeight=B(oe.symbolHeight,this.fontMetrics.f),oe.squareSymbol&&(this.symbolWidth=B(oe.symbolWidth,Math.max(this.symbolHeight,16)),Le=this.symbolWidth+Ee+le+(xe?20:0),be&&ke.attr("x",this.symbolWidth+Ee))),ae.drawLegendSymbol(this,W),this.setItemEvents&&this.setItemEvents(W,ke,_e)),xe&&!W.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(W),this.colorizeItem(W,W.visible),(fe.styledMode||!J.width)&&ke.css({width:(oe.itemWidth||this.widthOption||fe.spacingBox.width)-Le+"px"}),this.setText(W);let me=ke.getBBox(),Re=this.fontMetrics&&this.fontMetrics.h||0;W.itemWidth=W.checkboxOffset=oe.itemWidth||se.labelWidth||me.width+Le,this.maxItemWidth=Math.max(this.maxItemWidth,W.itemWidth),this.totalItemWidth+=W.itemWidth,this.itemHeight=W.itemHeight=Math.round(se.labelHeight||(me.height>1.5*Re?me.height:Re))}layoutItem(W){let se=this.options,fe=this.padding,ee=se.layout==="horizontal",oe=W.itemHeight,Ce=this.itemMarginBottom,ge=this.itemMarginTop,Ee=ee?B(se.itemDistance,20):0,J=this.maxLegendWidth,ie=se.alignColumns&&this.totalItemWidth>J?this.maxItemWidth:W.itemWidth,le=W.legendItem||{};ee&&this.itemX-fe+ie>J&&(this.itemX=fe,this.lastLineHeight&&(this.itemY+=ge+this.lastLineHeight+Ce),this.lastLineHeight=0),this.lastItemY=ge+this.itemY+Ce,this.lastLineHeight=Math.max(oe,this.lastLineHeight),le.x=this.itemX,le.y=this.itemY,ee?this.itemX+=ie:(this.itemY+=ge+oe+Ce,this.lastLineHeight=oe),this.offsetWidth=this.widthOption||Math.max((ee?this.itemX-fe-(W.checkbox?0:Ee):ie)+fe,this.offsetWidth)}getAllItems(){let W=[];return this.chart.series.forEach(function(se){let fe=se&&se.options;se&&B(fe.showInLegend,!N(fe.linkedTo)&&void 0,!0)&&(W=W.concat((se.legendItem||{}).labels||(fe.legendType==="point"?se.data:se)))}),K(this,"afterGetAllItems",{allItems:W}),W}getAlignment(){let W=this.options;return this.proximate?W.align.charAt(0)+"tv":W.floating?"":W.align.charAt(0)+W.verticalAlign.charAt(0)+W.layout.charAt(0)}adjustMargins(W,se){let fe=this.chart,ee=this.options,oe=this.getAlignment();oe&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach(function(Ce,ge){Ce.test(oe)&&!N(W[ge])&&(fe[k[ge]]=Math.max(fe[k[ge]],fe.legend[(ge+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][ge]*ee[ge%2?"x":"y"]+B(ee.margin,12)+se[ge]+(fe.titleOffset[ge]||0)))})}proximatePositions(){let W,se=this.chart,fe=[],ee=this.options.align==="left";for(let oe of(this.allItems.forEach(function(Ce){let ge,Ee,J=ee,ie,le;Ce.yAxis&&(Ce.xAxis.options.reversed&&(J=!J),Ce.points&&(ge=Z(J?Ce.points:Ce.points.slice(0).reverse(),function(be){return U(be.plotY)})),Ee=this.itemMarginTop+Ce.legendItem.label.getBBox().height+this.itemMarginBottom,le=Ce.yAxis.top-se.plotTop,ie=Ce.visible?(ge?ge.plotY:Ce.yAxis.height)+(le-.3*Ee):le+Ce.yAxis.height,fe.push({target:ie,size:Ee,item:Ce}))},this),w(fe,se.plotHeight)))W=oe.item.legendItem||{},U(oe.pos)&&(W.y=se.plotTop-se.spacing[0]+oe.pos)}render(){let W=this.chart,se=W.renderer,fe=this.options,ee=this.padding,oe=this.getAllItems(),Ce,ge,Ee,J=this.group,ie,le=this.box;this.itemX=ee,this.itemY=this.initialItemY,this.offsetWidth=0,this.lastItemY=0,this.widthOption=L(fe.width,W.spacingBox.width-ee),ie=W.spacingBox.width-2*ee-fe.x,["rm","lm"].indexOf(this.getAlignment().substring(0,2))>-1&&(ie/=2),this.maxLegendWidth=this.widthOption||ie,J||(this.group=J=se.g("legend").addClass(fe.className||"").attr({zIndex:7}).add(),this.contentGroup=se.g().attr({zIndex:1}).add(J),this.scrollGroup=se.g().add(this.contentGroup)),this.renderTitle(),G(oe,(be,te)=>(be.options&&be.options.legendIndex||0)-(te.options&&te.options.legendIndex||0)),fe.reversed&&oe.reverse(),this.allItems=oe,this.display=Ce=!!oe.length,this.lastLineHeight=0,this.maxItemWidth=0,this.totalItemWidth=0,this.itemHeight=0,oe.forEach(this.renderItem,this),oe.forEach(this.layoutItem,this),ge=(this.widthOption||this.offsetWidth)+ee,Ee=this.lastItemY+this.lastLineHeight+this.titleHeight,Ee=this.handleOverflow(Ee)+ee,le||(this.box=le=se.rect().addClass("highcharts-legend-box").attr({r:fe.borderRadius}).add(J)),W.styledMode||le.attr({stroke:fe.borderColor,"stroke-width":fe.borderWidth||0,fill:fe.backgroundColor||"none"}).shadow(fe.shadow),ge>0&&Ee>0&&le[le.placed?"animate":"attr"](le.crisp.call({},{x:0,y:0,width:ge,height:Ee},le.strokeWidth())),J[Ce?"show":"hide"](),W.styledMode&&J.getStyle("display")==="none"&&(ge=Ee=0),this.legendWidth=ge,this.legendHeight=Ee,Ce&&this.align(),this.proximate||this.positionItems(),K(this,"afterRender")}align(W=this.chart.spacingBox){let se=this.chart,fe=this.options,ee=W.y;/(lth|ct|rth)/.test(this.getAlignment())&&se.titleOffset[0]>0?ee+=se.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&se.titleOffset[2]>0&&(ee-=se.titleOffset[2]),ee!==W.y&&(W=$(W,{y:ee})),se.hasRendered||(this.group.placed=!1),this.group.align($(fe,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":fe.verticalAlign}),!0,W)}handleOverflow(W){let se=this,fe=this.chart,ee=fe.renderer,oe=this.options,Ce=oe.y,ge=oe.verticalAlign==="top",Ee=this.padding,J=oe.maxHeight,ie=oe.navigation,le=B(ie.animation,!0),be=ie.arrowSize||12,te=this.pages,ae=this.allItems,ce=function($e){typeof $e=="number"?Re.attr({height:$e}):Re&&(se.clipRect=Re.destroy(),se.contentGroup.clip()),se.contentGroup.div&&(se.contentGroup.div.style.clip=$e?"rect("+Ee+"px,9999px,"+(Ee+$e)+"px,0)":"auto")},xe=function($e){return se[$e]=ee.circle(0,0,1.3*be).translate(be/2,be/2).add(me),fe.styledMode||se[$e].attr("fill","rgba(0,0,0,0.0001)"),se[$e]},_e,Ne,ke,Le=fe.spacingBox.height+(ge?-Ce:Ce)-Ee,me=this.nav,Re=this.clipRect;return oe.layout!=="horizontal"||oe.verticalAlign==="middle"||oe.floating||(Le/=2),J&&(Le=Math.min(Le,J)),te.length=0,W&&Le>0&&W>Le&&ie.enabled!==!1?(this.clipHeight=_e=Math.max(Le-20-this.titleHeight-Ee,0),this.currentPage=B(this.currentPage,1),this.fullHeight=W,ae.forEach(($e,De)=>{let Se=(ke=$e.legendItem||{}).y||0,Pe=Math.round(ke.label.getBBox().height),Fe=te.length;(!Fe||Se-te[Fe-1]>_e&&(Ne||Se)!==te[Fe-1])&&(te.push(Ne||Se),Fe++),ke.pageIx=Fe-1,Ne&&((ae[De-1].legendItem||{}).pageIx=Fe-1),De===ae.length-1&&Se+Pe-te[Fe-1]>_e&&Se>te[Fe-1]&&(te.push(Se),ke.pageIx=Fe),Se!==Ne&&(Ne=Se)}),Re||(Re=se.clipRect=ee.clipRect(0,Ee-2,9999,0),se.contentGroup.clip(Re)),ce(_e),me||(this.nav=me=ee.g().attr({zIndex:1}).add(this.group),this.up=ee.symbol("triangle",0,0,be,be).add(me),xe("upTracker").on("click",function(){se.scroll(-1,le)}),this.pager=ee.text("",15,10).addClass("highcharts-legend-navigation"),!fe.styledMode&&ie.style&&this.pager.css(ie.style),this.pager.add(me),this.down=ee.symbol("triangle-down",0,0,be,be).add(me),xe("downTracker").on("click",function(){se.scroll(1,le)})),se.scroll(0),W=Le):me&&(ce(),this.nav=me.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),W}scroll(W,se){let fe=this.chart,ee=this.pages,oe=ee.length,Ce=this.clipHeight,ge=this.options.navigation,Ee=this.pager,J=this.padding,ie=this.currentPage+W;ie>oe&&(ie=oe),ie>0&&(se!==void 0&&v(se,fe),this.nav.attr({translateX:J,translateY:Ce+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach(function(le){le.attr({class:ie===1?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),Ee.attr({text:ie+"/"+oe}),[this.down,this.downTracker].forEach(function(le){le.attr({x:18+this.pager.getBBox().width,class:ie===oe?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})},this),fe.styledMode||(this.up.attr({fill:ie===1?ge.inactiveColor:ge.activeColor}),this.upTracker.css({cursor:ie===1?"default":"pointer"}),this.down.attr({fill:ie===oe?ge.inactiveColor:ge.activeColor}),this.downTracker.css({cursor:ie===oe?"default":"pointer"})),this.scrollOffset=-ee[ie-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=ie,this.positionCheckboxes(),F(()=>{K(this,"afterScroll",{currentPage:ie})},x(B(se,fe.renderer.globalAnimation,!0)).duration))}setItemEvents(W,se,fe){let ee=this,oe=W.legendItem||{},Ce=ee.chart.renderer.boxWrapper,ge=W instanceof h,Ee=W instanceof s,J="highcharts-legend-"+(ge?"point":"series")+"-active",ie=ee.chart.styledMode,le=fe?[se,oe.symbol]:[oe.group],be=te=>{ee.allItems.forEach(ae=>{W!==ae&&[ae].concat(ae.linkedSeries||[]).forEach(ce=>{ce.setState(te,!ge)})})};for(let te of le)te&&te.on("mouseover",function(){W.visible&&be("inactive"),W.setState("hover"),W.visible&&Ce.addClass(J),ie||se.css(ee.options.itemHoverStyle)}).on("mouseout",function(){ee.chart.styledMode||se.css($(W.visible?ee.itemStyle:ee.itemHiddenStyle)),be(""),Ce.removeClass(J),W.setState()}).on("click",function(ae){let ce=function(){W.setVisible&&W.setVisible(),be(W.visible?"inactive":"")};Ce.removeClass(J),K(ee,"itemClick",{browserEvent:ae,legendItem:W},ce),ge?W.firePointEvent("legendItemClick",{browserEvent:ae}):Ee&&K(W,"legendItemClick",{browserEvent:ae})})}createCheckboxForItem(W){W.checkbox=M("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:W.selected,defaultChecked:W.selected},this.options.itemCheckboxStyle,this.chart.container),A(W.checkbox,"click",function(se){let fe=se.target;K(W.series||W,"checkboxClick",{checked:fe.checked,item:W},function(){W.select()})})}}return(g=j||(j={})).compose=function(q){R(C,"Core.Legend")&&A(q,"beforeMargins",function(){this.legend=new g(this,this.options.legend)})},j}),r(t,"Core/Chart/Chart.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/Axis.js"],t["Core/Defaults.js"],t["Core/Templating.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Time.js"],t["Core/Utilities.js"],t["Core/Renderer/HTML/AST.js"],t["Core/Axis/Tick.js"]],function(n,a,c,s,h,p,m,y,g,x,v,_,C,k){let{animate:w,animObject:E,setAnimation:A}=n,{defaultOptions:M,defaultTime:S}=c,{numberFormat:N}=s,{registerEventOptions:Y}=h,{charts:Z,doc:K,marginNames:U,svg:$,win:B}=p,{seriesTypes:R}=g,{addEvent:L,attr:G,createElement:F,css:j,defined:q,diffObjects:W,discardElement:se,erase:fe,error:ee,extend:oe,find:Ce,fireEvent:ge,getStyle:Ee,isArray:J,isNumber:ie,isObject:le,isString:be,merge:te,objectEach:ae,pick:ce,pInt:xe,relativeLength:_e,removeEvent:Ne,splat:ke,syncTimeout:Le,uniqueKey:me}=_;class Re{static chart(De,Se,Pe){return new Re(De,Se,Pe)}constructor(De,Se,Pe){this.sharedClips={};let Fe=[...arguments];(be(De)||De.nodeName)&&(this.renderTo=Fe.shift()),this.init(Fe[0],Fe[1])}setZoomOptions(){let De=this.options.chart,Se=De.zooming;this.zooming={...Se,type:ce(De.zoomType,Se.type),key:ce(De.zoomKey,Se.key),pinchType:ce(De.pinchType,Se.pinchType),singleTouch:ce(De.zoomBySingleTouch,Se.singleTouch,!1),resetButton:te(Se.resetButton,De.resetZoomButton)}}init(De,Se){ge(this,"init",{args:arguments},function(){let Pe=te(M,De),Fe=Pe.chart;this.userOptions=oe({},De),this.margin=[],this.spacing=[],this.labelCollectors=[],this.callback=Se,this.isResizing=0,this.options=Pe,this.axes=[],this.series=[],this.time=De.time&&Object.keys(De.time).length?new v(De.time):p.time,this.numberFormatter=Fe.numberFormatter||N,this.styledMode=Fe.styledMode,this.hasCartesianSeries=Fe.showAxes,this.index=Z.length,Z.push(this),p.chartCount++,Y(this,Fe),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,this.setZoomOptions(),ge(this,"afterInit"),this.firstRender()})}initSeries(De){let Se=this.options.chart,Pe=De.type||Se.type,Fe=R[Pe];Fe||ee(17,!0,this,{missingModuleFor:Pe});let je=new Fe;return typeof je.init=="function"&&je.init(this,De),je}setSortedData(){this.getSeriesOrderByLinks().forEach(function(De){De.points||De.data||!De.enabledDataSorting||De.setData(De.options.data,!1)})}getSeriesOrderByLinks(){return this.series.concat().sort(function(De,Se){return De.linkedSeries.length||Se.linkedSeries.length?Se.linkedSeries.length-De.linkedSeries.length:0})}orderItems(De,Se=0){let Pe=this[De],Fe=this.options[De]=ke(this.options[De]).slice(),je=this.userOptions[De]=this.userOptions[De]?ke(this.userOptions[De]).slice():[];if(this.hasRendered&&(Fe.splice(Se),je.splice(Se)),Pe)for(let He=Se,Qe=Pe.length;He<Qe;++He){let at=Pe[He];at&&(at.index=He,at instanceof y&&(at.name=at.getName()),at.options.isInternal||(Fe[He]=at.options,je[He]=at.userOptions))}}isInsidePlot(De,Se,Pe={}){var kt;let{inverted:Fe,plotBox:je,plotLeft:He,plotTop:Qe,scrollablePlotBox:at}=this,{scrollLeft:rt=0,scrollTop:dt=0}=Pe.visiblePlotOnly&&((kt=this.scrollablePlotArea)==null?void 0:kt.scrollingContainer)||{},gt=Pe.series,Tt=Pe.visiblePlotOnly&&at||je,Nt=Pe.inverted?Se:De,mt=Pe.inverted?De:Se,St={x:Nt,y:mt,isInsidePlot:!0,options:Pe};if(!Pe.ignoreX){let ii=gt&&(Fe&&!this.polar?gt.yAxis:gt.xAxis)||{pos:He,len:1/0},fi=Pe.paneCoordinates?ii.pos+Nt:He+Nt;fi>=Math.max(rt+He,ii.pos)&&fi<=Math.min(rt+He+Tt.width,ii.pos+ii.len)||(St.isInsidePlot=!1)}if(!Pe.ignoreY&&St.isInsidePlot){let ii=!Fe&&Pe.axis&&!Pe.axis.isXAxis&&Pe.axis||gt&&(Fe?gt.xAxis:gt.yAxis)||{pos:Qe,len:1/0},fi=Pe.paneCoordinates?ii.pos+mt:Qe+mt;fi>=Math.max(dt+Qe,ii.pos)&&fi<=Math.min(dt+Qe+Tt.height,ii.pos+ii.len)||(St.isInsidePlot=!1)}return ge(this,"afterIsInsidePlot",St),St.isInsidePlot}redraw(De){ge(this,"beforeRedraw");let Se=this.hasCartesianSeries?this.axes:this.colorAxis||[],Pe=this.series,Fe=this.pointer,je=this.legend,He=this.userOptions.legend,Qe=this.renderer,at=Qe.isHidden(),rt=[],dt,gt,Tt,Nt=this.isDirtyBox,mt=this.isDirtyLegend,St;for(Qe.rootFontSize=Qe.boxWrapper.getStyle("font-size"),this.setResponsive&&this.setResponsive(!1),A(!!this.hasRendered&&De,this),at&&this.temporaryDisplay(),this.layOutTitles(!1),Tt=Pe.length;Tt--;)if(((St=Pe[Tt]).options.stacking||St.options.centerInCategory)&&(gt=!0,St.isDirty)){dt=!0;break}if(dt)for(Tt=Pe.length;Tt--;)(St=Pe[Tt]).options.stacking&&(St.isDirty=!0);Pe.forEach(function(kt){kt.isDirty&&(kt.options.legendType==="point"?(typeof kt.updateTotals=="function"&&kt.updateTotals(),mt=!0):He&&(He.labelFormatter||He.labelFormat)&&(mt=!0)),kt.isDirtyData&&ge(kt,"updatedData")}),mt&&je&&je.options.enabled&&(je.render(),this.isDirtyLegend=!1),gt&&this.getStacks(),Se.forEach(function(kt){kt.updateNames(),kt.setScale()}),this.getMargins(),Se.forEach(function(kt){kt.isDirty&&(Nt=!0)}),Se.forEach(function(kt){let ii=kt.min+","+kt.max;kt.extKey!==ii&&(kt.extKey=ii,rt.push(function(){ge(kt,"afterSetExtremes",oe(kt.eventArgs,kt.getExtremes())),delete kt.eventArgs})),(Nt||gt)&&kt.redraw()}),Nt&&this.drawChartBox(),ge(this,"predraw"),Pe.forEach(function(kt){(Nt||kt.isDirty)&&kt.visible&&kt.redraw(),kt.isDirtyData=!1}),Fe&&Fe.reset(!0),Qe.draw(),ge(this,"redraw"),ge(this,"render"),at&&this.temporaryDisplay(!0),rt.forEach(function(kt){kt.call()})}get(De){let Se=this.series;function Pe(je){return je.id===De||je.options&&je.options.id===De}let Fe=Ce(this.axes,Pe)||Ce(this.series,Pe);for(let je=0;!Fe&&je<Se.length;je++)Fe=Ce(Se[je].points||[],Pe);return Fe}getAxes(){let De=this.userOptions;for(let Se of(ge(this,"getAxes"),["xAxis","yAxis"]))for(let Pe of De[Se]=ke(De[Se]||{}))new a(this,Pe,Se);ge(this,"afterGetAxes")}getSelectedPoints(){return this.series.reduce((De,Se)=>(Se.getPointsCollection().forEach(Pe=>{ce(Pe.selectedStaging,Pe.selected)&&De.push(Pe)}),De),[])}getSelectedSeries(){return this.series.filter(function(De){return De.selected})}setTitle(De,Se,Pe){this.applyDescription("title",De),this.applyDescription("subtitle",Se),this.applyDescription("caption",void 0),this.layOutTitles(Pe)}applyDescription(De,Se){let Pe=this,Fe=this.options[De]=te(this.options[De],Se),je=this[De];je&&Se&&(this[De]=je=je.destroy()),Fe&&!je&&((je=this.renderer.text(Fe.text,0,0,Fe.useHTML).attr({align:Fe.align,class:"highcharts-"+De,zIndex:Fe.zIndex||4}).add()).update=function(He,Qe){Pe.applyDescription(De,He),Pe.layOutTitles(Qe)},this.styledMode||je.css(oe(De==="title"?{fontSize:this.options.isStock?"1em":"1.2em"}:{},Fe.style)),this[De]=je)}layOutTitles(De=!0){let Se=[0,0,0],Pe=this.renderer,Fe=this.spacingBox;["title","subtitle","caption"].forEach(function(He){let Qe=this[He],at=this.options[He],rt=at.verticalAlign||"top",dt=He==="title"?rt==="top"?-3:0:rt==="top"?Se[0]+2:0;if(Qe){Qe.css({width:(at.width||Fe.width+(at.widthAdjust||0))+"px"});let gt=Pe.fontMetrics(Qe).b,Tt=Math.round(Qe.getBBox(at.useHTML).height);Qe.align(oe({y:rt==="bottom"?gt:dt+gt,height:Tt},at),!1,"spacingBox"),at.floating||(rt==="top"?Se[0]=Math.ceil(Se[0]+Tt):rt==="bottom"&&(Se[2]=Math.ceil(Se[2]+Tt)))}},this),Se[0]&&(this.options.title.verticalAlign||"top")==="top"&&(Se[0]+=this.options.title.margin),Se[2]&&this.options.caption.verticalAlign==="bottom"&&(Se[2]+=this.options.caption.margin);let je=!this.titleOffset||this.titleOffset.join(",")!==Se.join(",");this.titleOffset=Se,ge(this,"afterLayOutTitles"),!this.isDirtyBox&&je&&(this.isDirtyBox=this.isDirtyLegend=je,this.hasRendered&&De&&this.isDirtyBox&&this.redraw())}getContainerBox(){let De=[].map.call(this.renderTo.children,Pe=>{if(Pe!==this.container){let Fe=Pe.style.display;return Pe.style.display="none",[Pe,Fe]}}),Se={width:Ee(this.renderTo,"width",!0)||0,height:Ee(this.renderTo,"height",!0)||0};return De.filter(Boolean).forEach(([Pe,Fe])=>{Pe.style.display=Fe}),Se}getChartSize(){var He;let De=this.options.chart,Se=De.width,Pe=De.height,Fe=this.getContainerBox(),je=Fe.height>1&&!(!((He=this.renderTo.parentElement)!=null&&He.style.height)&&this.renderTo.style.height==="100%");this.chartWidth=Math.max(0,Se||Fe.width||600),this.chartHeight=Math.max(0,_e(Pe,this.chartWidth)||(je?Fe.height:400)),this.containerBox=Fe}temporaryDisplay(De){let Se=this.renderTo,Pe;if(De)for(;Se&&Se.style;)Se.hcOrigStyle&&(j(Se,Se.hcOrigStyle),delete Se.hcOrigStyle),Se.hcOrigDetached&&(K.body.removeChild(Se),Se.hcOrigDetached=!1),Se=Se.parentNode;else for(;Se&&Se.style&&(K.body.contains(Se)||Se.parentNode||(Se.hcOrigDetached=!0,K.body.appendChild(Se)),(Ee(Se,"display",!1)==="none"||Se.hcOricDetached)&&(Se.hcOrigStyle={display:Se.style.display,height:Se.style.height,overflow:Se.style.overflow},Pe={display:"block",overflow:"hidden"},Se!==this.renderTo&&(Pe.height=0),j(Se,Pe),Se.offsetWidth||Se.style.setProperty("display","block","important")),(Se=Se.parentNode)!==K.body););}setClassName(De){this.container.className="highcharts-container "+(De||"")}getContainer(){var Tt;let De=this.options,Se=De.chart,Pe="data-highcharts-chart",Fe=me(),je,He=this.renderTo;He||(this.renderTo=He=Se.renderTo),be(He)&&(this.renderTo=He=K.getElementById(He)),He||ee(13,!0,this);let Qe=xe(G(He,Pe));ie(Qe)&&Z[Qe]&&Z[Qe].hasRendered&&Z[Qe].destroy(),G(He,Pe,this.index),He.innerHTML=C.emptyHTML,Se.skipClone||He.offsetWidth||this.temporaryDisplay(),this.getChartSize();let at=this.chartHeight,rt=this.chartWidth;j(He,{overflow:"hidden"}),this.styledMode||(je=oe({position:"relative",overflow:"hidden",width:rt+"px",height:at+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none",padding:"0px"},Se.style||{}));let dt=F("div",{id:Fe},je,He);this.container=dt,this.getChartSize(),rt===this.chartWidth||(rt=this.chartWidth,this.styledMode||j(dt,{width:ce((Tt=Se.style)==null?void 0:Tt.width,rt+"px")})),this.containerBox=this.getContainerBox(),this._cursor=dt.style.cursor;let gt=Se.renderer||!$?m.getRendererType(Se.renderer):x;if(this.renderer=new gt(dt,rt,at,void 0,Se.forExport,De.exporting&&De.exporting.allowHTML,this.styledMode),A(void 0,this),this.setClassName(Se.className),this.styledMode)for(let Nt in De.defs)this.renderer.definition(De.defs[Nt]);else this.renderer.setStyle(Se.style);this.renderer.chartIndex=this.index,ge(this,"afterGetContainer")}getMargins(De){let{spacing:Se,margin:Pe,titleOffset:Fe}=this;this.resetMargins(),Fe[0]&&!q(Pe[0])&&(this.plotTop=Math.max(this.plotTop,Fe[0]+Se[0])),Fe[2]&&!q(Pe[2])&&(this.marginBottom=Math.max(this.marginBottom,Fe[2]+Se[2])),this.legend&&this.legend.display&&this.legend.adjustMargins(Pe,Se),ge(this,"getMargins"),De||this.getAxisMargins()}getAxisMargins(){let De=this,Se=De.axisOffset=[0,0,0,0],Pe=De.colorAxis,Fe=De.margin,je=function(He){He.forEach(function(Qe){Qe.visible&&Qe.getOffset()})};De.hasCartesianSeries?je(De.axes):Pe&&Pe.length&&je(Pe),U.forEach(function(He,Qe){q(Fe[Qe])||(De[He]+=Se[Qe])}),De.setChartSize()}getOptions(){return W(this.userOptions,M)}reflow(De){var je;let Se=this,Pe=Se.containerBox,Fe=Se.getContainerBox();(je=Se.pointer)==null||delete je.chartPosition,!Se.isPrinting&&!Se.isResizing&&Pe&&Fe.width&&((Fe.width!==Pe.width||Fe.height!==Pe.height)&&(_.clearTimeout(Se.reflowTimeout),Se.reflowTimeout=Le(function(){Se.container&&Se.setSize(void 0,void 0,!1)},De?100:0)),Se.containerBox=Fe)}setReflow(){let De=this,Se=Pe=>{var Fe;(Fe=De.options)!=null&&Fe.chart.reflow&&De.hasLoaded&&De.reflow(Pe)};if(typeof ResizeObserver=="function")new ResizeObserver(Se).observe(De.renderTo);else{let Pe=L(B,"resize",Se);L(this,"destroy",Pe)}}setSize(De,Se,Pe){let Fe=this,je=Fe.renderer;Fe.isResizing+=1,A(Pe,Fe);let He=je.globalAnimation;Fe.oldChartHeight=Fe.chartHeight,Fe.oldChartWidth=Fe.chartWidth,De!==void 0&&(Fe.options.chart.width=De),Se!==void 0&&(Fe.options.chart.height=Se),Fe.getChartSize();let{chartWidth:Qe,chartHeight:at,scrollablePixelsX:rt=0,scrollablePixelsY:dt=0}=Fe;(Fe.isDirtyBox||Qe!==Fe.oldChartWidth||at!==Fe.oldChartHeight)&&(Fe.styledMode||(He?w:j)(Fe.container,{width:`${Qe+rt}px`,height:`${at+dt}px`},He),Fe.setChartSize(!0),je.setSize(Qe,at,He),Fe.axes.forEach(function(gt){gt.isDirty=!0,gt.setScale()}),Fe.isDirtyLegend=!0,Fe.isDirtyBox=!0,Fe.layOutTitles(),Fe.getMargins(),Fe.redraw(He),Fe.oldChartHeight=void 0,ge(Fe,"resize"),setTimeout(()=>{Fe&&ge(Fe,"endResize")},E(He).duration)),Fe.isResizing-=1}setChartSize(De){let Se,Pe,Fe,je,{chartHeight:He,chartWidth:Qe,inverted:at,spacing:rt,renderer:dt}=this,gt=this.clipOffset,Tt=Math[at?"floor":"round"];this.plotLeft=Se=Math.round(this.plotLeft),this.plotTop=Pe=Math.round(this.plotTop),this.plotWidth=Fe=Math.max(0,Math.round(Qe-Se-this.marginRight)),this.plotHeight=je=Math.max(0,Math.round(He-Pe-this.marginBottom)),this.plotSizeX=at?je:Fe,this.plotSizeY=at?Fe:je,this.spacingBox=dt.spacingBox={x:rt[3],y:rt[0],width:Qe-rt[3]-rt[1],height:He-rt[0]-rt[2]},this.plotBox=dt.plotBox={x:Se,y:Pe,width:Fe,height:je},gt&&(this.clipBox={x:Tt(gt[3]),y:Tt(gt[0]),width:Tt(this.plotSizeX-gt[1]-gt[3]),height:Tt(this.plotSizeY-gt[0]-gt[2])}),De||(this.axes.forEach(function(Nt){Nt.setAxisSize(),Nt.setAxisTranslation()}),dt.alignElements()),ge(this,"afterSetChartSize",{skipAxes:De})}resetMargins(){ge(this,"resetMargins");let De=this,Se=De.options.chart,Pe=Se.plotBorderWidth||0,Fe=Pe/2;["margin","spacing"].forEach(function(je){let He=Se[je],Qe=le(He)?He:[He,He,He,He];["Top","Right","Bottom","Left"].forEach(function(at,rt){De[je][rt]=ce(Se[je+at],Qe[rt])})}),U.forEach(function(je,He){De[je]=ce(De.margin[He],De.spacing[He])}),De.axisOffset=[0,0,0,0],De.clipOffset=[Fe,Fe,Fe,Fe],De.plotBorderWidth=Pe}drawChartBox(){let De=this.options.chart,Se=this.renderer,Pe=this.chartWidth,Fe=this.chartHeight,je=this.styledMode,He=this.plotBGImage,Qe=De.backgroundColor,at=De.plotBackgroundColor,rt=De.plotBackgroundImage,dt=this.plotLeft,gt=this.plotTop,Tt=this.plotWidth,Nt=this.plotHeight,mt=this.plotBox,St=this.clipRect,kt=this.clipBox,ii=this.chartBackground,fi=this.plotBackground,Ht=this.plotBorder,fr,nr,vr,Rr="animate";ii||(this.chartBackground=ii=Se.rect().addClass("highcharts-background").add(),Rr="attr"),je?fr=nr=ii.strokeWidth():(nr=(fr=De.borderWidth||0)+(De.shadow?8:0),vr={fill:Qe||"none"},(fr||ii["stroke-width"])&&(vr.stroke=De.borderColor,vr["stroke-width"]=fr),ii.attr(vr).shadow(De.shadow)),ii[Rr]({x:nr/2,y:nr/2,width:Pe-nr-fr%2,height:Fe-nr-fr%2,r:De.borderRadius}),Rr="animate",fi||(Rr="attr",this.plotBackground=fi=Se.rect().addClass("highcharts-plot-background").add()),fi[Rr](mt),!je&&(fi.attr({fill:at||"none"}).shadow(De.plotShadow),rt&&(He?(rt!==He.attr("href")&&He.attr("href",rt),He.animate(mt)):this.plotBGImage=Se.image(rt,dt,gt,Tt,Nt).add())),St?St.animate({width:kt.width,height:kt.height}):this.clipRect=Se.clipRect(kt),Rr="animate",Ht||(Rr="attr",this.plotBorder=Ht=Se.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),je||Ht.attr({stroke:De.plotBorderColor,"stroke-width":De.plotBorderWidth||0,fill:"none"}),Ht[Rr](Ht.crisp({x:dt,y:gt,width:Tt,height:Nt},-Ht.strokeWidth())),this.isDirtyBox=!1,ge(this,"afterDrawChartBox")}propFromSeries(){let De,Se,Pe,Fe=this,je=Fe.options.chart,He=Fe.options.series;["inverted","angular","polar"].forEach(function(Qe){for(Se=R[je.type],Pe=je[Qe]||Se&&Se.prototype[Qe],De=He&&He.length;!Pe&&De--;)(Se=R[He[De].type])&&Se.prototype[Qe]&&(Pe=!0);Fe[Qe]=Pe})}linkSeries(De){let Se=this,Pe=Se.series;Pe.forEach(function(Fe){Fe.linkedSeries.length=0}),Pe.forEach(function(Fe){let{linkedTo:je}=Fe.options;if(be(je)){let He;(He=je===":previous"?Se.series[Fe.index-1]:Se.get(je))&&He.linkedParent!==Fe&&(He.linkedSeries.push(Fe),Fe.linkedParent=He,He.enabledDataSorting&&Fe.setDataSortingOptions(),Fe.visible=ce(Fe.options.visible,He.options.visible,Fe.visible))}}),ge(this,"afterLinkSeries",{isUpdating:De})}renderSeries(){this.series.forEach(function(De){De.translate(),De.render()})}render(){var dt;let De=this.axes,Se=this.colorAxis,Pe=this.renderer,Fe=this.options.chart.axisLayoutRuns||2,je=gt=>{gt.forEach(Tt=>{Tt.visible&&Tt.render()})},He=0,Qe=!0,at,rt=0;for(let gt of(this.setTitle(),ge(this,"beforeMargins"),(dt=this.getStacks)==null||dt.call(this),this.getMargins(!0),this.setChartSize(),De)){let{options:Tt}=gt,{labels:Nt}=Tt;if(this.hasCartesianSeries&&gt.horiz&&gt.visible&&Nt.enabled&&gt.series.length&&gt.coll!=="colorAxis"&&!this.polar){He=Tt.tickLength,gt.createGroups();let mt=new k(gt,0,"",!0),St=mt.createLabel("x",Nt);if(mt.destroy(),St&&ce(Nt.reserveSpace,!ie(Tt.crossing))&&(He=St.getBBox().height+Nt.distance+Math.max(Tt.offset||0,0)),He){St==null||St.destroy();break}}}for(this.plotHeight=Math.max(this.plotHeight-He,0);(Qe||at||Fe>1)&&rt<Fe;){let gt=this.plotWidth,Tt=this.plotHeight;for(let Nt of De)rt===0?Nt.setScale():(Nt.horiz&&Qe||!Nt.horiz&&at)&&Nt.setTickInterval(!0);rt===0?this.getAxisMargins():this.getMargins(),Qe=gt/this.plotWidth>(rt?1:1.1),at=Tt/this.plotHeight>(rt?1:1.05),rt++}this.drawChartBox(),this.hasCartesianSeries?je(De):Se&&Se.length&&je(Se),this.seriesGroup||(this.seriesGroup=Pe.g("series-group").attr({zIndex:3}).shadow(this.options.chart.seriesGroupShadow).add()),this.renderSeries(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0}addCredits(De){let Se=this,Pe=te(!0,this.options.credits,De);Pe.enabled&&!this.credits&&(this.credits=this.renderer.text(Pe.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){Pe.href&&(B.location.href=Pe.href)}).attr({align:Pe.position.align,zIndex:8}),Se.styledMode||this.credits.css(Pe.style),this.credits.add().align(Pe.position),this.credits.update=function(Fe){Se.credits=Se.credits.destroy(),Se.addCredits(Fe)})}destroy(){let De,Se=this,Pe=Se.axes,Fe=Se.series,je=Se.container,He=je&&je.parentNode;for(ge(Se,"destroy"),Se.renderer.forExport?fe(Z,Se):Z[Se.index]=void 0,p.chartCount--,Se.renderTo.removeAttribute("data-highcharts-chart"),Ne(Se),De=Pe.length;De--;)Pe[De]=Pe[De].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),De=Fe.length;De--;)Fe[De]=Fe[De].destroy();["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","rangeSelector","legend","resetZoomButton","tooltip","renderer"].forEach(function(Qe){let at=Se[Qe];at&&at.destroy&&(Se[Qe]=at.destroy())}),je&&(je.innerHTML=C.emptyHTML,Ne(je),He&&se(je)),ae(Se,function(Qe,at){delete Se[at]})}firstRender(){var Fe;let De=this,Se=De.options;De.getContainer(),De.resetMargins(),De.setChartSize(),De.propFromSeries(),De.getAxes();let Pe=J(Se.series)?Se.series:[];Se.series=[],Pe.forEach(function(je){De.initSeries(je)}),De.linkSeries(),De.setSortedData(),ge(De,"beforeRender"),De.render(),(Fe=De.pointer)==null||Fe.getChartPosition(),De.renderer.imgCount||De.hasLoaded||De.onload(),De.temporaryDisplay(!0)}onload(){this.callbacks.concat([this.callback]).forEach(function(De){De&&this.index!==void 0&&De.apply(this,[this])},this),ge(this,"load"),ge(this,"render"),q(this.index)&&this.setReflow(),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0}warnIfA11yModuleNotLoaded(){let{options:De,title:Se}=this;!De||this.accessibility||(this.renderer.boxWrapper.attr({role:"img","aria-label":(Se&&Se.element.textContent||"").replace(/</g,"&lt;")}),De.accessibility&&De.accessibility.enabled===!1||ee('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))}addSeries(De,Se,Pe){let Fe,je=this;return De&&(Se=ce(Se,!0),ge(je,"addSeries",{options:De},function(){Fe=je.initSeries(De),je.isDirtyLegend=!0,je.linkSeries(),Fe.enabledDataSorting&&Fe.setData(De.data,!1),ge(je,"afterAddSeries",{series:Fe}),Se&&je.redraw(Pe)})),Fe}addAxis(De,Se,Pe,Fe){return this.createAxis(Se?"xAxis":"yAxis",{axis:De,redraw:Pe,animation:Fe})}addColorAxis(De,Se,Pe){return this.createAxis("colorAxis",{axis:De,redraw:Se,animation:Pe})}createAxis(De,Se){let Pe=new a(this,Se.axis,De);return ce(Se.redraw,!0)&&this.redraw(Se.animation),Pe}showLoading(De){let Se=this,Pe=Se.options,Fe=Pe.loading,je=function(){He&&j(He,{left:Se.plotLeft+"px",top:Se.plotTop+"px",width:Se.plotWidth+"px",height:Se.plotHeight+"px"})},He=Se.loadingDiv,Qe=Se.loadingSpan;He||(Se.loadingDiv=He=F("div",{className:"highcharts-loading highcharts-loading-hidden"},null,Se.container)),Qe||(Se.loadingSpan=Qe=F("span",{className:"highcharts-loading-inner"},null,He),L(Se,"redraw",je)),He.className="highcharts-loading",C.setElementHTML(Qe,ce(De,Pe.lang.loading,"")),Se.styledMode||(j(He,oe(Fe.style,{zIndex:10})),j(Qe,Fe.labelStyle),Se.loadingShown||(j(He,{opacity:0,display:""}),w(He,{opacity:Fe.style.opacity||.5},{duration:Fe.showDuration||0}))),Se.loadingShown=!0,je()}hideLoading(){let De=this.options,Se=this.loadingDiv;Se&&(Se.className="highcharts-loading highcharts-loading-hidden",this.styledMode||w(Se,{opacity:0},{duration:De.loading.hideDuration||100,complete:function(){j(Se,{display:"none"})}})),this.loadingShown=!1}update(De,Se,Pe,Fe){let je,He,Qe,at=this,rt={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},dt=De.isResponsiveOptions,gt=[];ge(at,"update",{options:De}),dt||at.setResponsive(!1,!0),De=W(De,at.options),at.userOptions=te(at.userOptions,De);let Tt=De.chart;Tt&&(te(!0,at.options.chart,Tt),this.setZoomOptions(),"className"in Tt&&at.setClassName(Tt.className),("inverted"in Tt||"polar"in Tt||"type"in Tt)&&(at.propFromSeries(),je=!0),"alignTicks"in Tt&&(je=!0),"events"in Tt&&Y(this,Tt),ae(Tt,function(St,kt){at.propsRequireUpdateSeries.indexOf("chart."+kt)!==-1&&(He=!0),at.propsRequireDirtyBox.indexOf(kt)!==-1&&(at.isDirtyBox=!0),at.propsRequireReflow.indexOf(kt)===-1||(at.isDirtyBox=!0,dt||(Qe=!0))}),!at.styledMode&&Tt.style&&at.renderer.setStyle(at.options.chart.style||{})),!at.styledMode&&De.colors&&(this.options.colors=De.colors),De.time&&(this.time===S&&(this.time=new v(De.time)),te(!0,at.options.time,De.time)),ae(De,function(St,kt){at[kt]&&typeof at[kt].update=="function"?at[kt].update(St,!1):typeof at[rt[kt]]=="function"?at[rt[kt]](St):kt!=="colors"&&at.collectionsWithUpdate.indexOf(kt)===-1&&te(!0,at.options[kt],De[kt]),kt!=="chart"&&at.propsRequireUpdateSeries.indexOf(kt)!==-1&&(He=!0)}),this.collectionsWithUpdate.forEach(function(St){De[St]&&(ke(De[St]).forEach(function(kt,ii){let fi,Ht=q(kt.id);Ht&&(fi=at.get(kt.id)),!fi&&at[St]&&(fi=at[St][ce(kt.index,ii)])&&(Ht&&q(fi.options.id)||fi.options.isInternal)&&(fi=void 0),fi&&fi.coll===St&&(fi.update(kt,!1),Pe&&(fi.touched=!0)),!fi&&Pe&&at.collectionsWithInit[St]&&(at.collectionsWithInit[St][0].apply(at,[kt].concat(at.collectionsWithInit[St][1]||[]).concat([!1])).touched=!0)}),Pe&&at[St].forEach(function(kt){kt.touched||kt.options.isInternal?delete kt.touched:gt.push(kt)}))}),gt.forEach(function(St){St.chart&&St.remove&&St.remove(!1)}),je&&at.axes.forEach(function(St){St.update({},!1)}),He&&at.getSeriesOrderByLinks().forEach(function(St){St.chart&&St.update({},!1)},this);let Nt=Tt&&Tt.width,mt=Tt&&(be(Tt.height)?_e(Tt.height,Nt||at.chartWidth):Tt.height);Qe||ie(Nt)&&Nt!==at.chartWidth||ie(mt)&&mt!==at.chartHeight?at.setSize(Nt,mt,Fe):ce(Se,!0)&&at.redraw(Fe),ge(at,"afterUpdate",{options:De,redraw:Se,animation:Fe})}setSubtitle(De,Se){this.applyDescription("subtitle",De),this.layOutTitles(Se)}setCaption(De,Se){this.applyDescription("caption",De),this.layOutTitles(Se)}showResetZoom(){let De=this,Se=M.lang,Pe=De.zooming.resetButton,Fe=Pe.theme,je=Pe.relativeTo==="chart"||Pe.relativeTo==="spacingBox"?null:"plotBox";function He(){De.zoomOut()}ge(this,"beforeShowResetZoom",null,function(){De.resetZoomButton=De.renderer.button(Se.resetZoom,null,null,He,Fe).attr({align:Pe.position.align,title:Se.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(Pe.position,!1,je)}),ge(this,"afterShowResetZoom")}zoomOut(){ge(this,"selection",{resetSelection:!0},()=>this.transform({reset:!0,trigger:"zoom"}))}pan(De,Se){let Pe=this,Fe=typeof Se=="object"?Se:{enabled:Se,type:"x"},je=Fe.type,He=je&&Pe[{x:"xAxis",xy:"axes",y:"yAxis"}[je]].filter(at=>at.options.panningEnabled&&!at.options.isInternal),Qe=Pe.options.chart;Qe!=null&&Qe.panning&&(Qe.panning=Fe),ge(this,"pan",{originalEvent:De},()=>{Pe.transform({axes:He,event:De,to:{x:De.chartX-(Pe.mouseDownX||0),y:De.chartY-(Pe.mouseDownY||0)},trigger:"pan"}),j(Pe.container,{cursor:"move"})})}transform(De){var Nt;let{axes:Se=this.axes,event:Pe,from:Fe={},reset:je,selection:He,to:Qe={},trigger:at}=De,{inverted:rt}=this,dt=!1,gt,Tt;for(let mt of((Nt=this.hoverPoints)==null||Nt.forEach(St=>St.setState()),Se)){let{horiz:St,len:kt,minPointOffset:ii=0,options:fi,reversed:Ht}=mt,fr=St?"width":"height",nr=St?"x":"y",vr=ce(Qe[fr],mt.len),Rr=ce(Fe[fr],mt.len),sr=10>Math.abs(vr)?1:vr/Rr,xr=(Fe[nr]||0)+Rr/2-mt.pos,ht=xr-((Qe[nr]??mt.pos)+vr/2-mt.pos)/sr,bt=Ht&&!rt||!Ht&&rt?-1:1;if(!je&&(xr<0||xr>mt.len))continue;let Mt=mt.toValue(ht,!0)+(He||mt.isOrdinal?0:ii*bt),$t=mt.toValue(ht+kt/sr,!0)-(He||mt.isOrdinal?0:ii*bt||0),Zt=mt.allExtremes;if(Mt>$t&&([Mt,$t]=[$t,Mt]),sr===1&&!je&&mt.coll==="yAxis"&&!Zt){for(let zt of mt.series){let Rt=zt.getExtremes(zt.getProcessedData(!0).yData,!0);Zt??(Zt={dataMin:Number.MAX_VALUE,dataMax:-Number.MAX_VALUE}),ie(Rt.dataMin)&&ie(Rt.dataMax)&&(Zt.dataMin=Math.min(Rt.dataMin,Zt.dataMin),Zt.dataMax=Math.max(Rt.dataMax,Zt.dataMax))}mt.allExtremes=Zt}let{dataMin:ki,dataMax:Di,min:We,max:Te}=oe(mt.getExtremes(),Zt||{}),ze=ki??fi.min,Ve=Di??fi.max,Xe=$t-Mt,et=mt.categories?0:Math.min(Xe,Ve-ze),ct=ze-et*(q(fi.min)?0:fi.minPadding),ot=Ve+et*(q(fi.max)?0:fi.maxPadding),nt=mt.allowZoomOutside||sr===1||at!=="zoom"&&sr>1,ft=Math.min(fi.min??ct,ct,nt?We:ct),wt=Math.max(fi.max??ot,ot,nt?Te:ot);(!mt.isOrdinal||mt.options.overscroll||sr!==1||je)&&(Mt<ft&&(Mt=ft,sr>=1&&($t=Mt+Xe)),$t>wt&&($t=wt,sr>=1&&(Mt=$t-Xe)),(je||mt.series.length&&(Mt!==We||$t!==Te)&&Mt>=ft&&$t<=wt)&&(He?He[mt.coll].push({axis:mt,min:Mt,max:$t}):(mt.isPanning=at!=="zoom",mt.isPanning&&(Tt=!0),mt.setExtremes(je?void 0:Mt,je?void 0:$t,!1,!1,{move:ht,trigger:at,scale:sr}),!je&&(Mt>ft||$t<wt)&&at!=="mousewheel"&&(gt=!0)),dt=!0),Pe&&(this[St?"mouseDownX":"mouseDownY"]=Pe[St?"chartX":"chartY"]))}return dt&&(He?ge(this,"selection",He,()=>{delete De.selection,De.trigger="zoom",this.transform(De)}):(!gt||Tt||this.resetZoomButton?!gt&&this.resetZoomButton&&(this.resetZoomButton=this.resetZoomButton.destroy()):this.showResetZoom(),this.redraw(at==="zoom"&&(this.options.chart.animation??this.pointCount<100)))),dt}}return oe(Re.prototype,{callbacks:[],collectionsWithInit:{xAxis:[Re.prototype.addAxis,[!0]],yAxis:[Re.prototype.addAxis,[!1]],series:[Re.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:["backgroundColor","borderColor","borderWidth","borderRadius","plotBackgroundColor","plotBackgroundImage","plotBorderColor","plotBorderWidth","plotShadow","shadow"],propsRequireReflow:["margin","marginTop","marginRight","marginBottom","marginLeft","spacing","spacingTop","spacingRight","spacingBottom","spacingLeft"],propsRequireUpdateSeries:["chart.inverted","chart.polar","chart.ignoreHiddenSeries","chart.type","colors","plotOptions","time","tooltip"]}),Re}),r(t,"Extensions/ScrollablePlotArea.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{stop:h}=n,{composed:p}=a,{addEvent:m,createElement:y,css:g,defined:x,merge:v,pushUnique:_}=s;function C(){let E=this.scrollablePlotArea;(this.scrollablePixelsX||this.scrollablePixelsY)&&!E&&(this.scrollablePlotArea=E=new w(this)),E==null||E.applyFixed()}function k(){this.chart.scrollablePlotArea&&(this.chart.scrollablePlotArea.isDirty=!0)}class w{static compose(A,M,S){_(p,this.compose)&&(m(A,"afterInit",k),m(M,"afterSetChartSize",N=>this.afterSetSize(N.target,N)),m(M,"render",C),m(S,"show",k))}static afterSetSize(A,M){let S,N,Y,{minWidth:Z,minHeight:K}=A.options.chart.scrollablePlotArea||{},{clipBox:U,plotBox:$,inverted:B,renderer:R}=A;if(!R.forExport&&(Z?(A.scrollablePixelsX=S=Math.max(0,Z-A.chartWidth),S&&(A.scrollablePlotBox=v(A.plotBox),$.width=A.plotWidth+=S,U[B?"height":"width"]+=S,Y=!0)):K&&(A.scrollablePixelsY=N=Math.max(0,K-A.chartHeight),x(N)&&(A.scrollablePlotBox=v(A.plotBox),$.height=A.plotHeight+=N,U[B?"width":"height"]+=N,Y=!1)),x(Y)&&!M.skipAxes))for(let L of A.axes)L.horiz===Y&&(L.setAxisSize(),L.setAxisTranslation())}constructor(A){var G;let M,S=A.options.chart,N=c.getRendererType(),Y=S.scrollablePlotArea||{},Z=this.moveFixedElements.bind(this),K={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};A.scrollablePixelsX&&(K.overflowX="auto"),A.scrollablePixelsY&&(K.overflowY="auto"),this.chart=A;let U=this.parentDiv=y("div",{className:"highcharts-scrolling-parent"},{position:"relative"},A.renderTo),$=this.scrollingContainer=y("div",{className:"highcharts-scrolling"},K,U),B=this.innerContainer=y("div",{className:"highcharts-inner-container"},void 0,$),R=this.fixedDiv=y("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(((G=S.style)==null?void 0:G.zIndex)||0)+2,top:0},void 0,!0),L=this.fixedRenderer=new N(R,A.chartWidth,A.chartHeight,S.style);this.mask=L.path().attr({fill:S.backgroundColor||"#fff","fill-opacity":Y.opacity??.85,zIndex:-1}).addClass("highcharts-scrollable-mask").add(),$.parentNode.insertBefore(R,$),g(A.renderTo,{overflow:"visible"}),m(A,"afterShowResetZoom",Z),m(A,"afterApplyDrilldown",Z),m(A,"afterLayOutTitles",Z),m($,"scroll",()=>{let{pointer:F,hoverPoint:j}=A;F&&(delete F.chartPosition,j&&(M=j),F.runPointActions(void 0,M,!0))}),B.appendChild(A.container)}applyFixed(){var ie;let{chart:A,fixedRenderer:M,isDirty:S,scrollingContainer:N}=this,{axisOffset:Y,chartWidth:Z,chartHeight:K,container:U,plotHeight:$,plotLeft:B,plotTop:R,plotWidth:L,scrollablePixelsX:G=0,scrollablePixelsY:F=0}=A,{scrollPositionX:j=0,scrollPositionY:q=0}=A.options.chart.scrollablePlotArea||{},W=Z+G,se=K+F;M.setSize(Z,K),(S??!0)&&(this.isDirty=!1,this.moveFixedElements()),h(A.container),g(U,{width:`${W}px`,height:`${se}px`}),A.renderer.boxWrapper.attr({width:W,height:se,viewBox:[0,0,W,se].join(" ")}),(ie=A.chartBackground)==null||ie.attr({width:W,height:se}),g(N,{width:`${Z}px`,height:`${K}px`}),x(S)||(N.scrollLeft=G*j,N.scrollTop=F*q);let fe=R-Y[0]-1,ee=B-Y[3]-1,oe=R+$+Y[2]+1,Ce=B+L+Y[1]+1,ge=B+L-G,Ee=R+$-F,J=[["M",0,0]];G?J=[["M",0,fe],["L",B-1,fe],["L",B-1,oe],["L",0,oe],["Z"],["M",ge,fe],["L",Z,fe],["L",Z,oe],["L",ge,oe],["Z"]]:F&&(J=[["M",ee,0],["L",ee,R-1],["L",Ce,R-1],["L",Ce,0],["Z"],["M",ee,Ee],["L",ee,K],["L",Ce,K],["L",Ce,Ee],["Z"]]),A.redrawTrigger!=="adjustHeight"&&this.mask.attr({d:J})}moveFixedElements(){let A,{container:M,inverted:S,scrollablePixelsX:N,scrollablePixelsY:Y}=this.chart,Z=this.fixedRenderer,K=w.fixedSelectors;for(let U of(N&&!S?A=".highcharts-yaxis":N&&S||Y&&!S?A=".highcharts-xaxis":Y&&S&&(A=".highcharts-yaxis"),A&&K.push(`${A}:not(.highcharts-radial-axis)`,`${A}-labels:not(.highcharts-radial-axis-labels)`),K))[].forEach.call(M.querySelectorAll(U),$=>{($.namespaceURI===Z.SVG_NS?Z.box:Z.box.parentNode).appendChild($),$.style.pointerEvents="auto"})}}return w.fixedSelectors=[".highcharts-breadcrumbs-group",".highcharts-contextbutton",".highcharts-caption",".highcharts-credits",".highcharts-drillup-button",".highcharts-legend",".highcharts-legend-checkbox",".highcharts-navigator-series",".highcharts-navigator-xaxis",".highcharts-navigator-yaxis",".highcharts-navigator",".highcharts-range-selector-group",".highcharts-reset-zoom",".highcharts-scrollbar",".highcharts-subtitle",".highcharts-title"],w}),r(t,"Core/Axis/Stacking/StackItem.js",[t["Core/Templating.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c){let{format:s}=n,{series:h}=a,{destroyObjectProperties:p,fireEvent:m,isNumber:y,pick:g}=c;return class{constructor(x,v,_,C,k){let w=x.chart.inverted,E=x.reversed;this.axis=x;let A=this.isNegative=!!_!=!!E;this.options=v=v||{},this.x=C,this.total=null,this.cumulative=null,this.points={},this.hasValidPoints=!1,this.stack=k,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:v.align||(w?A?"left":"right":"center"),verticalAlign:v.verticalAlign||(w?"middle":A?"bottom":"top"),y:v.y,x:v.x},this.textAlign=v.textAlign||(w?A?"right":"left":"center")}destroy(){p(this,this.axis)}render(x){let v=this.axis.chart,_=this.options,C=_.format,k=C?s(C,this,v):_.formatter.call(this);if(this.label)this.label.attr({text:k,visibility:"hidden"});else{this.label=v.renderer.label(k,null,void 0,_.shape,void 0,void 0,_.useHTML,!1,"stack-labels");let w={r:_.borderRadius||0,text:k,padding:g(_.padding,5),visibility:"hidden"};v.styledMode||(w.fill=_.backgroundColor,w.stroke=_.borderColor,w["stroke-width"]=_.borderWidth,this.label.css(_.style||{})),this.label.attr(w),this.label.added||this.label.add(x)}this.label.labelrank=v.plotSizeY,m(this,"afterRender")}setOffset(x,v,_,C,k,w){let{alignOptions:E,axis:A,label:M,options:S,textAlign:N}=this,Y=A.chart,Z=this.getStackBox({xOffset:x,width:v,boxBottom:_,boxTop:C,defaultX:k,xAxis:w}),{verticalAlign:K}=E;if(M&&Z){let U=M.getBBox(void 0,0),$=M.padding,B=g(S.overflow,"justify")==="justify",R;E.x=S.x||0,E.y=S.y||0;let{x:L,y:G}=this.adjustStackPosition({labelBox:U,verticalAlign:K,textAlign:N});Z.x-=L,Z.y-=G,M.align(E,!1,Z),(R=Y.isInsidePlot(M.alignAttr.x+E.x+L,M.alignAttr.y+E.y+G))||(B=!1),B&&h.prototype.justifyDataLabel.call(A,M,E,M.alignAttr,U,Z),M.attr({x:M.alignAttr.x,y:M.alignAttr.y,rotation:S.rotation,rotationOriginX:U.width*{left:0,center:.5,right:1}[S.textAlign||"center"],rotationOriginY:U.height/2}),g(!B&&S.crop,!0)&&(R=y(M.x)&&y(M.y)&&Y.isInsidePlot(M.x-$+(M.width||0),M.y)&&Y.isInsidePlot(M.x+$,M.y)),M[R?"show":"hide"]()}m(this,"afterSetOffset",{xOffset:x,width:v})}adjustStackPosition({labelBox:x,verticalAlign:v,textAlign:_}){let C={bottom:0,middle:1,top:2,right:1,center:0,left:-1},k=C[v],w=C[_];return{x:x.width/2+x.width/2*w,y:x.height/2*k}}getStackBox(x){let v=this.axis,_=v.chart,{boxTop:C,defaultX:k,xOffset:w,width:E,boxBottom:A}=x,M=v.stacking.usePercentage?100:g(C,this.total,0),S=v.toPixels(M),N=x.xAxis||_.xAxis[0],Y=g(k,N.translate(this.x))+w,Z=Math.abs(S-v.toPixels(A||y(v.min)&&v.logarithmic&&v.logarithmic.lin2log(v.min)||0)),K=_.inverted,U=this.isNegative;return K?{x:(U?S:S-Z)-_.plotLeft,y:N.height-Y-E+N.top-_.plotTop,width:Z,height:E}:{x:Y+N.transB-_.plotLeft,y:(U?S-Z:S)-_.plotTop,width:E,height:Z}}}}),r(t,"Core/Axis/Stacking/StackingAxis.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/Axis.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){var p;let{getDeferredAnimation:m}=n,{series:{prototype:y}}=c,{addEvent:g,correctFloat:x,defined:v,destroyObjectProperties:_,fireEvent:C,isArray:k,isNumber:w,objectEach:E,pick:A}=h;function M(){let R=this.inverted;this.axes.forEach(L=>{L.stacking&&L.stacking.stacks&&L.hasVisibleSeries&&(L.stacking.oldStacks=L.stacking.stacks)}),this.series.forEach(L=>{let G=L.xAxis&&L.xAxis.options||{};L.options.stacking&&L.reserveSpace()&&(L.stackKey=[L.type,A(L.options.stack,""),R?G.top:G.left,R?G.height:G.width].join(","))})}function S(){var L;let R=this.stacking;if(R){let G=R.stacks;E(G,(F,j)=>{_(F),delete G[j]}),(L=R.stackTotalGroup)==null||L.destroy()}}function N(){this.stacking||(this.stacking=new B(this))}function Y(R,L,G,F){return!v(R)||R.x!==L||F&&R.stackKey!==F?R={x:L,index:0,key:F,stackKey:F}:R.index++,R.key=[G,L,R.index].join(","),R}function Z(){let R,L=this,G=L.yAxis,F=L.stackKey||"",j=G.stacking.stacks,q=L.processedXData,W=L.options.stacking,se=L[W+"Stacker"];se&&[F,"-"+F].forEach(fe=>{var Ee;let ee=q.length,oe,Ce,ge;for(;ee--;)oe=q[ee],R=L.getStackIndicator(R,oe,L.index,fe),Ce=(Ee=j[fe])==null?void 0:Ee[oe],(ge=Ce==null?void 0:Ce.points[R.key||""])&&se.call(L,ge,Ce,ee)})}function K(R,L,G){let F=L.total?100/L.total:0;R[0]=x(R[0]*F),R[1]=x(R[1]*F),this.stackedYData[G]=R[1]}function U(R){(this.is("column")||this.is("columnrange"))&&(this.options.centerInCategory&&!this.options.stacking&&this.chart.series.length>1?y.setStackedPoints.call(this,R,"group"):R.stacking.resetStacks())}function $(R,L){var me,Re;let G,F,j,q,W,se,fe,ee,oe,Ce=L||this.options.stacking;if(!Ce||!this.reserveSpace()||({group:"xAxis"}[Ce]||"yAxis")!==R.coll)return;let ge=this.processedXData,Ee=this.processedYData,J=[],ie=Ee.length,le=this.options,be=le.threshold||0,te=le.startFromThreshold?be:0,ae=le.stack,ce=L?`${this.type},${Ce}`:this.stackKey||"",xe="-"+ce,_e=this.negStacks,Ne=R.stacking,ke=Ne.stacks,Le=Ne.oldStacks;for(Ne.stacksTouched+=1,fe=0;fe<ie;fe++){ee=ge[fe],oe=Ee[fe],se=(G=this.getStackIndicator(G,ee,this.index)).key||"",ke[W=(F=_e&&oe<(te?0:be))?xe:ce]||(ke[W]={}),ke[W][ee]||((me=Le[W])!=null&&me[ee]?(ke[W][ee]=Le[W][ee],ke[W][ee].total=null):ke[W][ee]=new s(R,R.options.stackLabels,!!F,ee,ae)),j=ke[W][ee],oe!==null?(j.points[se]=j.points[this.index]=[A(j.cumulative,te)],v(j.cumulative)||(j.base=se),j.touched=Ne.stacksTouched,G.index>0&&this.singleStacks===!1&&(j.points[se][0]=j.points[this.index+","+ee+",0"][0])):(delete j.points[se],delete j.points[this.index]);let $e=j.total||0;Ce==="percent"?(q=F?ce:xe,$e=_e&&((Re=ke[q])!=null&&Re[ee])?(q=ke[q][ee]).total=Math.max(q.total||0,$e)+Math.abs(oe)||0:x($e+(Math.abs(oe)||0))):Ce==="group"?(k(oe)&&(oe=oe[0]),oe!==null&&$e++):$e=x($e+(oe||0)),Ce==="group"?j.cumulative=($e||1)-1:j.cumulative=x(A(j.cumulative,te)+(oe||0)),j.total=$e,oe!==null&&(j.points[se].push(j.cumulative),J[fe]=j.cumulative,j.hasValidPoints=!0)}Ce==="percent"&&(Ne.usePercentage=!0),Ce!=="group"&&(this.stackedYData=J),Ne.oldStacks={}}class B{constructor(L){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=L}buildStacks(){let L,G,F=this.axis,j=F.series,q=F.coll==="xAxis",W=F.options.reversedStacks,se=j.length;for(this.resetStacks(),this.usePercentage=!1,G=se;G--;)L=j[W?G:se-G-1],q&&L.setGroupedPoints(F),L.setStackedPoints(F);if(!q)for(G=0;G<se;G++)j[G].modifyStacks();C(F,"afterBuildStacks")}cleanStacks(){this.oldStacks&&(this.stacks=this.oldStacks,E(this.stacks,L=>{E(L,G=>{G.cumulative=G.total})}))}resetStacks(){E(this.stacks,L=>{E(L,(G,F)=>{w(G.touched)&&G.touched<this.stacksTouched?(G.destroy(),delete L[F]):(G.total=null,G.cumulative=null)})})}renderStackTotals(){var se;let L=this.axis,G=L.chart,F=G.renderer,j=this.stacks,q=m(G,((se=L.options.stackLabels)==null?void 0:se.animation)||!1),W=this.stackTotalGroup=this.stackTotalGroup||F.g("stack-labels").attr({zIndex:6,opacity:0}).add();W.translate(G.plotLeft,G.plotTop),E(j,fe=>{E(fe,ee=>{ee.render(W)})}),W.animate({opacity:1},q)}}return(p||(p={})).compose=function(R,L,G){let F=L.prototype,j=G.prototype;F.getStacks||(g(R,"init",N),g(R,"destroy",S),F.getStacks=M,j.getStackIndicator=Y,j.modifyStacks=Z,j.percentStacker=K,j.setGroupedPoints=U,j.setStackedPoints=$)},p}),r(t,"Series/Line/LineSeries.js",[t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c){let{defined:s,merge:h,isObject:p}=c;class m extends n{drawGraph(){let g=this.options,x=(this.gappedPath||this.getGraphPath).call(this),v=this.chart.styledMode;[this,...this.zones].forEach((_,C)=>{let k,w=_.graph,E=w?"animate":"attr",A=_.dashStyle||g.dashStyle;w?(w.endX=this.preventGraphAnimation?null:x.xMap,w.animate({d:x})):x.length&&(_.graph=w=this.chart.renderer.path(x).addClass("highcharts-graph"+(C?` highcharts-zone-graph-${C-1} `:" ")+(C&&_.className||"")).attr({zIndex:1}).add(this.group)),w&&!v&&(k={stroke:!C&&g.lineColor||_.color||this.color||"#cccccc","stroke-width":g.lineWidth||0,fill:this.fillGraph&&this.color||"none"},A?k.dashstyle=A:g.linecap!=="square"&&(k["stroke-linecap"]=k["stroke-linejoin"]="round"),w[E](k).shadow(C<2&&g.shadow&&h({filterUnits:"userSpaceOnUse"},p(g.shadow)?g.shadow:{}))),w&&(w.startX=x.xMap,w.isArea=x.isArea)})}getGraphPath(g,x,v){let _=this,C=_.options,k=[],w=[],E,A=C.step,M=(g=g||_.points).reversed;return M&&g.reverse(),(A={right:1,center:2}[A]||A&&3)&&M&&(A=4-A),(g=this.getValidPoints(g,!1,!(C.connectNulls&&!x&&!v))).forEach(function(S,N){let Y,Z=S.plotX,K=S.plotY,U=g[N-1],$=S.isNull||typeof K!="number";(S.leftCliff||U&&U.rightCliff)&&!v&&(E=!0),$&&!s(x)&&N>0?E=!C.connectNulls:$&&!x?E=!0:(N===0||E?Y=[["M",S.plotX,S.plotY]]:_.getPointSpline?Y=[_.getPointSpline(g,S,N)]:A?(Y=A===1?[["L",U.plotX,K]]:A===2?[["L",(U.plotX+Z)/2,U.plotY],["L",(U.plotX+Z)/2,K]]:[["L",Z,U.plotY]]).push(["L",Z,K]):Y=[["L",Z,K]],w.push(S.x),A&&(w.push(S.x),A===2&&w.push(S.x)),k.push.apply(k,Y),E=!1)}),k.xMap=w,_.graphPath=k,k}}return m.defaultOptions=h(n.defaultOptions,{legendSymbol:"lineMarker"}),a.registerSeriesType("line",m),m}),r(t,"Series/Area/AreaSeriesDefaults.js",[],function(){return{threshold:0,legendSymbol:"areaMarker"}}),r(t,"Series/Area/AreaSeries.js",[t["Series/Area/AreaSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c){let{seriesTypes:{line:s}}=a,{extend:h,merge:p,objectEach:m,pick:y}=c;class g extends s{drawGraph(){this.areaPath=[],super.drawGraph.apply(this);let{areaPath:v,options:_}=this;[this,...this.zones].forEach((C,k)=>{let w={},E=C.fillColor||_.fillColor,A=C.area,M=A?"animate":"attr";A?(A.endX=this.preventGraphAnimation?null:v.xMap,A.animate({d:v})):(w.zIndex=0,(A=C.area=this.chart.renderer.path(v).addClass("highcharts-area"+(k?` highcharts-zone-area-${k-1} `:" ")+(k&&C.className||"")).add(this.group)).isArea=!0),this.chart.styledMode||(w.fill=E||C.color||this.color,w["fill-opacity"]=E?1:_.fillOpacity??.75,A.css({pointerEvents:this.stickyTracking?"none":"auto"})),A[M](w),A.startX=v.xMap,A.shiftUnit=_.step?2:1})}getGraphPath(v){let _,C,k,w=s.prototype.getGraphPath,E=this.options,A=E.stacking,M=this.yAxis,S=[],N=[],Y=this.index,Z=M.stacking.stacks[this.stackKey],K=E.threshold,U=Math.round(M.getThreshold(E.threshold)),$=y(E.connectNulls,A==="percent"),B=function(q,W,se){let fe=v[q],ee=A&&Z[fe.x].points[Y],oe=fe[se+"Null"]||0,Ce=fe[se+"Cliff"]||0,ge,Ee,J=!0;Ce||oe?(ge=(oe?ee[0]:ee[1])+Ce,Ee=ee[0]+Ce,J=!!oe):!A&&v[W]&&v[W].isNull&&(ge=Ee=K),ge!==void 0&&(N.push({plotX:_,plotY:ge===null?U:M.getThreshold(ge),isNull:J,isCliff:!0}),S.push({plotX:_,plotY:Ee===null?U:M.getThreshold(Ee),doCurve:!1}))};v=v||this.points,A&&(v=this.getStackPoints(v));for(let q=0,W=v.length;q<W;++q)A||(v[q].leftCliff=v[q].rightCliff=v[q].leftNull=v[q].rightNull=void 0),C=v[q].isNull,_=y(v[q].rectPlotX,v[q].plotX),k=A?y(v[q].yBottom,U):U,C&&!$||($||B(q,q-1,"left"),C&&!A&&$||(N.push(v[q]),S.push({x:q,plotX:_,plotY:k})),$||B(q,q+1,"right"));let R=w.call(this,N,!0,!0);S.reversed=!0;let L=w.call(this,S,!0,!0),G=L[0];G&&G[0]==="M"&&(L[0]=["L",G[1],G[2]]);let F=R.concat(L);F.length&&F.push(["Z"]);let j=w.call(this,N,!1,$);return this.chart.series.length>1&&A&&N.some(q=>q.isCliff)&&(F.hasStackedCliffs=j.hasStackedCliffs=!0),F.xMap=R.xMap,this.areaPath=F,j}getStackPoints(v){let _=this,C=[],k=[],w=this.xAxis,E=this.yAxis,A=E.stacking.stacks[this.stackKey],M={},S=E.series,N=S.length,Y=E.options.reversedStacks?1:-1,Z=S.indexOf(_);if(v=v||this.points,this.options.stacking){for(let U=0;U<v.length;U++)v[U].leftNull=v[U].rightNull=void 0,M[v[U].x]=v[U];m(A,function(U,$){U.total!==null&&k.push($)}),k.sort(function(U,$){return U-$});let K=S.map(U=>U.visible);k.forEach(function(U,$){let B=0,R,L;if(M[U]&&!M[U].isNull)C.push(M[U]),[-1,1].forEach(function(G){let F=G===1?"rightNull":"leftNull",j=A[k[$+G]],q=0;if(j){let W=Z;for(;W>=0&&W<N;){let se=S[W].index;!(R=j.points[se])&&(se===_.index?M[U][F]=!0:K[W]&&(L=A[U].points[se])&&(q-=L[1]-L[0])),W+=Y}}M[U][G===1?"rightCliff":"leftCliff"]=q});else{let G=Z;for(;G>=0&&G<N;){let F=S[G].index;if(R=A[U].points[F]){B=R[1];break}G+=Y}B=y(B,0),B=E.translate(B,0,1,0,1),C.push({isNull:!0,plotX:w.translate(U,0,0,0,1),x:U,plotY:B,yBottom:B})}})}return C}}return g.defaultOptions=p(s.defaultOptions,n),h(g.prototype,{singleStacks:!1}),a.registerSeriesType("area",g),g}),r(t,"Series/Spline/SplineSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a){let{line:c}=n.seriesTypes,{merge:s,pick:h}=a;class p extends c{getPointSpline(y,g,x){let v,_,C,k,w=g.plotX||0,E=g.plotY||0,A=y[x-1],M=y[x+1];function S(Y){return Y&&!Y.isNull&&Y.doCurve!==!1&&!g.isCliff}if(S(A)&&S(M)){let Y=A.plotX||0,Z=A.plotY||0,K=M.plotX||0,U=M.plotY||0,$=0;v=(1.5*w+Y)/2.5,_=(1.5*E+Z)/2.5,C=(1.5*w+K)/2.5,k=(1.5*E+U)/2.5,C!==v&&($=(k-_)*(C-w)/(C-v)+E-k),_+=$,k+=$,_>Z&&_>E?(_=Math.max(Z,E),k=2*E-_):_<Z&&_<E&&(_=Math.min(Z,E),k=2*E-_),k>U&&k>E?(k=Math.max(U,E),_=2*E-k):k<U&&k<E&&(k=Math.min(U,E),_=2*E-k),g.rightContX=C,g.rightContY=k,g.controlPoints={low:[v,_],high:[C,k]}}let N=["C",h(A.rightContX,A.plotX,0),h(A.rightContY,A.plotY,0),h(v,w,0),h(_,E,0),w,E];return A.rightContX=A.rightContY=void 0,N}}return p.defaultOptions=s(c.defaultOptions),n.registerSeriesType("spline",p),p}),r(t,"Series/AreaSpline/AreaSplineSeries.js",[t["Series/Spline/SplineSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c){let{area:s,area:{prototype:h}}=a.seriesTypes,{extend:p,merge:m}=c;class y extends n{}return y.defaultOptions=m(n.defaultOptions,s.defaultOptions),p(y.prototype,{getGraphPath:h.getGraphPath,getStackPoints:h.getStackPoints,drawGraph:h.drawGraph}),a.registerSeriesType("areaspline",y),y}),r(t,"Series/Column/ColumnSeriesDefaults.js",[],function(){return{borderRadius:3,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}}),r(t,"Series/Column/ColumnSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Color/Color.js"],t["Series/Column/ColumnSeriesDefaults.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,p,m){let{animObject:y}=n,{parse:g}=a,{noop:x}=s,{clamp:v,crisp:_,defined:C,extend:k,fireEvent:w,isArray:E,isNumber:A,merge:M,pick:S,objectEach:N}=m;class Y extends h{animate(K){let U,$,B=this,R=this.yAxis,L=R.pos,G=R.reversed,F=B.options,{clipOffset:j,inverted:q}=this.chart,W={},se=q?"translateX":"translateY";K&&j?(W.scaleY=.001,$=v(R.toPixels(F.threshold),L,L+R.len),q?($+=G?-Math.floor(j[0]):Math.ceil(j[2]),W.translateX=$-R.len):($+=G?Math.ceil(j[0]):-Math.floor(j[2]),W.translateY=$),B.clipBox&&B.setClip(),B.group.attr(W)):(U=Number(B.group.attr(se)),B.group.animate({scaleY:1},k(y(B.options.animation),{step:function(fe,ee){B.group&&(W[se]=U+ee.pos*(L-U),B.group.attr(W))}})))}init(K,U){super.init.apply(this,arguments);let $=this;(K=$.chart).hasRendered&&K.series.forEach(function(B){B.type===$.type&&(B.isDirty=!0)})}getColumnMetrics(){var oe,Ce;let K=this,U=K.options,$=K.xAxis,B=K.yAxis,R=$.options.reversedStacks,L=$.reversed&&!R||!$.reversed&&R,G={},F,j=0;U.grouping===!1?j=1:K.chart.series.forEach(function(ge){let Ee,J=ge.yAxis,ie=ge.options;ge.type===K.type&&ge.reserveSpace()&&B.len===J.len&&B.pos===J.pos&&(ie.stacking&&ie.stacking!=="group"?(G[F=ge.stackKey]===void 0&&(G[F]=j++),Ee=G[F]):ie.grouping!==!1&&(Ee=j++),ge.columnIndex=Ee)});let q=Math.min(Math.abs($.transA)*(!((oe=$.brokenAxis)!=null&&oe.hasBreaks)&&((Ce=$.ordinal)==null?void 0:Ce.slope)||U.pointRange||$.closestPointRange||$.tickInterval||1),$.len),W=q*U.groupPadding,se=(q-2*W)/(j||1),fe=Math.min(U.maxPointWidth||$.len,S(U.pointWidth,se*(1-2*U.pointPadding))),ee=(K.columnIndex||0)+(L?1:0);return K.columnMetrics={width:fe,offset:(se-fe)/2+(W+ee*se-q/2)*(L?-1:1),paddedWidth:se,columnCount:j},K.columnMetrics}crispCol(K,U,$,B){let R=this.borderWidth,L=this.chart.inverted;return B=_(U+B,R,L)-(U=_(U,R,L)),this.options.crisp&&($=_(K+$,R)-(K=_(K,R))),{x:K,y:U,width:$,height:B}}adjustForMissingColumns(K,U,$,B){var R;if(!$.isNull&&B.columnCount>1){let L=this.xAxis.series.filter(q=>q.visible).map(q=>q.index),G=0,F=0;N((R=this.xAxis.stacking)==null?void 0:R.stacks,q=>{if(typeof $.x=="number"){let W=q[$.x.toString()];if(W&&E(W.points[this.index])){let se=Object.keys(W.points).filter(fe=>!fe.match(",")&&W.points[fe]&&W.points[fe].length>1).map(parseFloat).filter(fe=>L.indexOf(fe)!==-1).sort((fe,ee)=>ee-fe);G=se.indexOf(this.index),F=se.length}}}),G=this.xAxis.reversed?F-1-G:G;let j=(F-1)*B.paddedWidth+U;K=($.plotX||0)+j/2-U-G*B.paddedWidth}return K}translate(){let K=this,U=K.chart,$=K.options,B=K.dense=K.closestPointRange*K.xAxis.transA<2,R=K.borderWidth=S($.borderWidth,B?0:1),L=K.xAxis,G=K.yAxis,F=$.threshold,j=S($.minPointLength,5),q=K.getColumnMetrics(),W=q.width,se=K.pointXOffset=q.offset,fe=K.dataMin,ee=K.dataMax,oe=K.translatedThreshold=G.getThreshold(F),Ce=K.barW=Math.max(W,1+2*R);$.pointPadding&&(Ce=Math.ceil(Ce)),h.prototype.translate.apply(K),K.points.forEach(function(ge){let Ee=S(ge.yBottom,oe),J=999+Math.abs(Ee),ie=ge.plotX||0,le=v(ge.plotY,-J,G.len+J),be,te=Math.min(le,Ee),ae=Math.max(le,Ee)-te,ce=W,xe=ie+se,_e=Ce;j&&Math.abs(ae)<j&&(ae=j,be=!G.reversed&&!ge.negative||G.reversed&&ge.negative,A(F)&&A(ee)&&ge.y===F&&ee<=F&&(G.min||0)<F&&(fe!==ee||(G.max||0)<=F)&&(be=!be,ge.negative=!ge.negative),te=Math.abs(te-oe)>j?Ee-j:oe-(be?j:0)),C(ge.options.pointWidth)&&(xe-=Math.round(((ce=_e=Math.ceil(ge.options.pointWidth))-W)/2)),$.centerInCategory&&!$.stacking&&(xe=K.adjustForMissingColumns(xe,ce,ge,q)),ge.barX=xe,ge.pointWidth=ce,ge.tooltipPos=U.inverted?[v(G.len+G.pos-U.plotLeft-le,G.pos-U.plotLeft,G.len+G.pos-U.plotLeft),L.len+L.pos-U.plotTop-xe-_e/2,ae]:[L.left-U.plotLeft+xe+_e/2,v(le+G.pos-U.plotTop,G.pos-U.plotTop,G.len+G.pos-U.plotTop),ae],ge.shapeType=K.pointClass.prototype.shapeType||"roundedRect",ge.shapeArgs=K.crispCol(xe,ge.isNull?oe:te,_e,ge.isNull?0:ae)}),w(this,"afterColumnTranslate")}drawGraph(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")}pointAttribs(K,U){let $=this.options,B=this.pointAttrToOptions||{},R=B.stroke||"borderColor",L=B["stroke-width"]||"borderWidth",G,F,j,q=K&&K.color||this.color,W=K&&K[R]||$[R]||q,se=K&&K.options.dashStyle||$.dashStyle,fe=K&&K[L]||$[L]||this[L]||0,ee=S(K&&K.opacity,$.opacity,1);K&&this.zones.length&&(F=K.getZone(),q=K.options.color||F&&(F.color||K.nonZonedColor)||this.color,F&&(W=F.borderColor||W,se=F.dashStyle||se,fe=F.borderWidth||fe)),U&&K&&(j=(G=M($.states[U],K.options.states&&K.options.states[U]||{})).brightness,q=G.color||j!==void 0&&g(q).brighten(G.brightness).get()||q,W=G[R]||W,fe=G[L]||fe,se=G.dashStyle||se,ee=S(G.opacity,ee));let oe={fill:q,stroke:W,"stroke-width":fe,opacity:ee};return se&&(oe.dashstyle=se),oe}drawPoints(K=this.points){let U,$=this,B=this.chart,R=$.options,L=B.renderer,G=R.animationLimit||250;K.forEach(function(F){let j=F.plotY,q=F.graphic,W=!!q,se=q&&B.pointCount<G?"animate":"attr";A(j)&&F.y!==null?(U=F.shapeArgs,q&&F.hasNewShapeType()&&(q=q.destroy()),$.enabledDataSorting&&(F.startXPos=$.xAxis.reversed?-(U&&U.width||0):$.xAxis.width),!q&&(F.graphic=q=L[F.shapeType](U).add(F.group||$.group),q&&$.enabledDataSorting&&B.hasRendered&&B.pointCount<G&&(q.attr({x:F.startXPos}),W=!0,se="animate")),q&&W&&q[se](M(U)),B.styledMode||q[se]($.pointAttribs(F,F.selected&&"select")).shadow(F.allowShadow!==!1&&R.shadow),q&&(q.addClass(F.getClassName(),!0),q.attr({visibility:F.visible?"inherit":"hidden"}))):q&&(F.graphic=q.destroy())})}drawTracker(K=this.points){let U,$=this,B=$.chart,R=B.pointer,L=function(G){let F=R==null?void 0:R.getPointFromEvent(G);R&&F&&$.options.enableMouseTracking&&(R.isDirectTouch=!0,F.onMouseOver(G))};K.forEach(function(G){U=E(G.dataLabels)?G.dataLabels:G.dataLabel?[G.dataLabel]:[],G.graphic&&(G.graphic.element.point=G),U.forEach(function(F){(F.div||F.element).point=G})}),$._hasTracking||($.trackerGroups.forEach(function(G){$[G]&&($[G].addClass("highcharts-tracker").on("mouseover",L).on("mouseout",function(F){R==null||R.onTrackerMouseOut(F)}).on("touchstart",L),!B.styledMode&&$.options.cursor&&$[G].css({cursor:$.options.cursor}))}),$._hasTracking=!0),w(this,"afterDrawTracker")}remove(){let K=this,U=K.chart;U.hasRendered&&U.series.forEach(function($){$.type===K.type&&($.isDirty=!0)}),h.prototype.remove.apply(K,arguments)}}return Y.defaultOptions=M(h.defaultOptions,c),k(Y.prototype,{directTouch:!0,getSymbol:x,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),p.registerSeriesType("column",Y),Y}),r(t,"Core/Series/DataLabel.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(n,a,c){var s;let{getDeferredAnimation:h}=n,{format:p}=a,{defined:m,extend:y,fireEvent:g,isArray:x,isString:v,merge:_,objectEach:C,pick:k,pInt:w,splat:E}=c;return function(A){function M(){return $(this).some(R=>R==null?void 0:R.enabled)}function S(R,L,G,F,j){var le;let{chart:q,enabledDataSorting:W}=this,se=this.isCartesian&&q.inverted,fe=R.plotX,ee=R.plotY,oe=G.rotation||0,Ce=m(fe)&&m(ee)&&q.isInsidePlot(fe,Math.round(ee),{inverted:se,paneCoordinates:!0,series:this}),ge=oe===0&&k(G.overflow,W?"none":"justify")==="justify",Ee=this.visible&&R.visible!==!1&&m(fe)&&(R.series.forceDL||W&&!ge||Ce||k(G.inside,!!this.options.stacking)&&F&&q.isInsidePlot(fe,se?F.x+1:F.y+F.height-1,{inverted:se,paneCoordinates:!0,series:this})),J=R.pos();if(Ee&&J){var ie;let be=L.getBBox(),te=L.getBBox(void 0,0),ae={right:1,center:.5}[G.align||0]||0,ce={bottom:1,middle:.5}[G.verticalAlign||0]||0;if(F=y({x:J[0],y:Math.round(J[1]),width:0,height:0},F||{}),G.alignTo==="plotEdges"&&this.isCartesian&&(F[se?"x":"y"]=0,F[se?"width":"height"]=((le=this.yAxis)==null?void 0:le.len)||0),y(G,{width:be.width,height:be.height}),ie=F,W&&this.xAxis&&!ge&&this.setDataLabelStartPos(R,L,j,Ce,ie),L.align(_(G,{width:te.width,height:te.height}),!1,F,!1),L.alignAttr.x+=ae*(te.width-be.width),L.alignAttr.y+=ce*(te.height-be.height),L[L.placed?"animate":"attr"]({x:L.alignAttr.x+(be.width-te.width)/2,y:L.alignAttr.y+(be.height-te.height)/2,rotationOriginX:(L.width||0)/2,rotationOriginY:(L.height||0)/2}),ge&&F.height>=0)this.justifyDataLabel(L,G,L.alignAttr,be,F,j);else if(k(G.crop,!0)){let{x:xe,y:_e}=L.alignAttr;Ee=q.isInsidePlot(xe,_e,{paneCoordinates:!0,series:this})&&q.isInsidePlot(xe+be.width-1,_e+be.height-1,{paneCoordinates:!0,series:this})}G.shape&&!oe&&L[j?"attr":"animate"]({anchorX:J[0],anchorY:J[1]})}j&&W&&(L.placed=!1),Ee||W&&!ge?(L.show(),L.placed=!0):(L.hide(),L.placed=!1)}function N(){return this.plotGroup("dataLabelsGroup","data-labels",this.hasRendered?"inherit":"hidden",this.options.dataLabels.zIndex||6)}function Y(R){let L=this.hasRendered||0,G=this.initDataLabelsGroup().attr({opacity:+L});return!L&&G&&(this.visible&&G.show(),this.options.animation?G.animate({opacity:1},R):G.attr({opacity:1})),G}function Z(R){var Ee;let L;R=R||this.points;let G=this,F=G.chart,j=G.options,q=F.renderer,{backgroundColor:W,plotBackgroundColor:se}=F.options.chart,fe=q.getContrast(v(se)&&se||v(W)&&W||"#000000"),ee=$(G),{animation:oe,defer:Ce}=ee[0],ge=Ce?h(F,oe,G):{defer:0,duration:0};g(this,"drawDataLabels"),(Ee=G.hasDataLabels)!=null&&Ee.call(G)&&(L=this.initDataLabels(ge),R.forEach(J=>{var be,te;let ie=J.dataLabels||[];E(U(ee,J.dlOptions||((be=J.options)==null?void 0:be.dataLabels))).forEach((ae,ce)=>{let xe=ae.enabled&&(J.visible||J.dataLabelOnHidden)&&(!J.isNull||J.dataLabelOnNull)&&function(He,Qe){let at=Qe.filter;if(at){let rt=at.operator,dt=He[at.property],gt=at.value;return rt===">"&&dt>gt||rt==="<"&&dt<gt||rt===">="&&dt>=gt||rt==="<="&&dt<=gt||rt==="=="&&dt==gt||rt==="==="&&dt===gt||rt==="!="&&dt!=gt||rt==="!=="&&dt!==gt}return!0}(J,ae),{backgroundColor:_e,borderColor:Ne,distance:ke,style:Le={}}=ae,me,Re,$e,De,Se={},Pe=ie[ce],Fe=!Pe,je;xe&&(Re=k(ae[J.formatPrefix+"Format"],ae.format),me=J.getLabelConfig(),$e=m(Re)?p(Re,me,F):(ae[J.formatPrefix+"Formatter"]||ae.formatter).call(me,ae),De=ae.rotation,!F.styledMode&&(Le.color=k(ae.color,Le.color,v(G.color)?G.color:void 0,"#000000"),Le.color==="contrast"?(_e!=="none"&&(je=_e),J.contrastColor=q.getContrast(je!=="auto"&&je||J.color||G.color),Le.color=je||!m(ke)&&ae.inside||0>w(ke||0)||j.stacking?J.contrastColor:fe):delete J.contrastColor,j.cursor&&(Le.cursor=j.cursor)),Se={r:ae.borderRadius||0,rotation:De,padding:ae.padding,zIndex:1},F.styledMode||(Se.fill=_e==="auto"?J.color:_e,Se.stroke=Ne==="auto"?J.color:Ne,Se["stroke-width"]=ae.borderWidth),C(Se,(He,Qe)=>{He===void 0&&delete Se[Qe]})),!Pe||xe&&m($e)&&!!Pe.div==!!ae.useHTML&&(Pe.rotation&&ae.rotation||Pe.rotation===ae.rotation)||(Pe=void 0,Fe=!0),xe&&m($e)&&(Pe?Se.text=$e:(Pe=q.label($e,0,0,ae.shape,void 0,void 0,ae.useHTML,void 0,"data-label")).addClass(" highcharts-data-label-color-"+J.colorIndex+" "+(ae.className||"")+(ae.useHTML?" highcharts-tracker":"")),Pe&&(Pe.options=ae,Pe.attr(Se),F.styledMode?Le.width&&Pe.css({width:Le.width,textOverflow:Le.textOverflow}):Pe.css(Le).shadow(ae.shadow),g(Pe,"beforeAddingDataLabel",{labelOptions:ae,point:J}),Pe.added||Pe.add(L),G.alignDataLabel(J,Pe,ae,void 0,Fe),Pe.isActive=!0,ie[ce]&&ie[ce]!==Pe&&ie[ce].destroy(),ie[ce]=Pe))});let le=ie.length;for(;le--;)ie[le]&&ie[le].isActive?ie[le].isActive=!1:((te=ie[le])==null||te.destroy(),ie.splice(le,1));J.dataLabel=ie[0],J.dataLabels=ie})),g(this,"afterDrawDataLabels")}function K(R,L,G,F,j,q){let W=this.chart,se=L.align,fe=L.verticalAlign,ee=R.box?0:R.padding||0,oe=W.inverted?this.yAxis:this.xAxis,Ce=oe?oe.left-W.plotLeft:0,ge=W.inverted?this.xAxis:this.yAxis,Ee=ge?ge.top-W.plotTop:0,{x:J=0,y:ie=0}=L,le,be;return(le=(G.x||0)+ee+Ce)<0&&(se==="right"&&J>=0?(L.align="left",L.inside=!0):J-=le,be=!0),(le=(G.x||0)+F.width-ee+Ce)>W.plotWidth&&(se==="left"&&J<=0?(L.align="right",L.inside=!0):J+=W.plotWidth-le,be=!0),(le=G.y+ee+Ee)<0&&(fe==="bottom"&&ie>=0?(L.verticalAlign="top",L.inside=!0):ie-=le,be=!0),(le=(G.y||0)+F.height-ee+Ee)>W.plotHeight&&(fe==="top"&&ie<=0?(L.verticalAlign="bottom",L.inside=!0):ie+=W.plotHeight-le,be=!0),be&&(L.x=J,L.y=ie,R.placed=!q,R.align(L,void 0,j)),be}function U(R,L){let G=[],F;if(x(R)&&!x(L))G=R.map(function(j){return _(j,L)});else if(x(L)&&!x(R))G=L.map(function(j){return _(R,j)});else if(x(R)||x(L)){if(x(R)&&x(L))for(F=Math.max(R.length,L.length);F--;)G[F]=_(R[F],L[F])}else G=_(R,L);return G}function $(R){var G,F;let L=R.chart.options.plotOptions;return E(U(U((G=L==null?void 0:L.series)==null?void 0:G.dataLabels,(F=L==null?void 0:L[R.type])==null?void 0:F.dataLabels),R.options.dataLabels))}function B(R,L,G,F,j){let q=this.chart,W=q.inverted,se=this.xAxis,fe=se.reversed,ee=((W?L.height:L.width)||0)/2,oe=R.pointWidth,Ce=oe?oe/2:0;L.startXPos=W?j.x:fe?-ee-Ce:se.width-ee+Ce,L.startYPos=W?fe?this.yAxis.height-ee+Ce:-ee-Ce:j.y,F?L.visibility==="hidden"&&(L.show(),L.attr({opacity:0}).animate({opacity:1})):L.attr({opacity:1}).animate({opacity:0},void 0,L.hide),q.hasRendered&&(G&&L.attr({x:L.startXPos,y:L.startYPos}),L.placed=!0)}A.compose=function(R){let L=R.prototype;L.initDataLabels||(L.initDataLabels=Y,L.initDataLabelsGroup=N,L.alignDataLabel=S,L.drawDataLabels=Z,L.justifyDataLabel=K,L.setDataLabelStartPos=B,L.hasDataLabels=M)}}(s||(s={})),s}),r(t,"Series/Column/ColumnDataLabel.js",[t["Core/Series/DataLabel.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s){var h;let{composed:p}=a,{series:m}=c,{merge:y,pick:g,pushUnique:x}=s;return function(v){function _(C,k,w,E,A){let M=this.chart.inverted,S=C.series,N=(S.xAxis?S.xAxis.len:this.chart.plotSizeX)||0,Y=(S.yAxis?S.yAxis.len:this.chart.plotSizeY)||0,Z=C.dlBox||C.shapeArgs,K=g(C.below,C.plotY>g(this.translatedThreshold,Y)),U=g(w.inside,!!this.options.stacking);if(Z){if(E=y(Z),!(w.overflow==="allow"&&w.crop===!1)){E.y<0&&(E.height+=E.y,E.y=0);let $=E.y+E.height-Y;$>0&&$<E.height-1&&(E.height-=$)}M&&(E={x:Y-E.y-E.height,y:N-E.x-E.width,width:E.height,height:E.width}),U||(M?(E.x+=K?0:E.width,E.width=0):(E.y+=K?E.height:0,E.height=0))}w.align=g(w.align,!M||U?"center":K?"right":"left"),w.verticalAlign=g(w.verticalAlign,M||U?"middle":K?"top":"bottom"),m.prototype.alignDataLabel.call(this,C,k,w,E,A),w.inside&&C.contrastColor&&k.css({color:C.contrastColor})}v.compose=function(C){n.compose(m),x(p,"ColumnDataLabel")&&(C.prototype.alignDataLabel=_)}}(h||(h={})),h}),r(t,"Series/Bar/BarSeries.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c){let{extend:s,merge:h}=c;class p extends n{}return p.defaultOptions=h(n.defaultOptions,{}),s(p.prototype,{inverted:!0}),a.registerSeriesType("bar",p),p}),r(t,"Series/Scatter/ScatterSeriesDefaults.js",[],function(){return{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">●</span> <span style="font-size: 0.8em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}}),r(t,"Series/Scatter/ScatterSeries.js",[t["Series/Scatter/ScatterSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c){let{column:s,line:h}=a.seriesTypes,{addEvent:p,extend:m,merge:y}=c;class g extends h{applyJitter(){let v=this,_=this.options.jitter,C=this.points.length;_&&this.points.forEach(function(k,w){["x","y"].forEach(function(E,A){if(_[E]&&!k.isNull){let M=`plot${E.toUpperCase()}`,S=v[`${E}Axis`],N=_[E]*S.transA;if(S&&!S.logarithmic){let Y=Math.max(0,(k[M]||0)-N),Z=Math.min(S.len,(k[M]||0)+N);k[M]=Y+(Z-Y)*function(K){let U=1e4*Math.sin(K);return U-Math.floor(U)}(w+A*C),E==="x"&&(k.clientX=k.plotX)}}})})}drawGraph(){this.options.lineWidth?super.drawGraph():this.graph&&(this.graph=this.graph.destroy())}}return g.defaultOptions=y(h.defaultOptions,n),m(g.prototype,{drawTracker:s.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"]}),p(g,"afterTranslate",function(){this.applyJitter()}),a.registerSeriesType("scatter",g),g}),r(t,"Series/CenteredUtilities.js",[t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(n,a,c){var s,h;let{deg2rad:p}=n,{fireEvent:m,isNumber:y,pick:g,relativeLength:x}=c;return(h=s||(s={})).getCenter=function(){let v=this.options,_=this.chart,C=2*(v.slicedOffset||0),k=_.plotWidth-2*C,w=_.plotHeight-2*C,E=v.center,A=Math.min(k,w),M=v.thickness,S,N=v.size,Y=v.innerSize||0,Z,K;typeof N=="string"&&(N=parseFloat(N)),typeof Y=="string"&&(Y=parseFloat(Y));let U=[g(E[0],"50%"),g(E[1],"50%"),g(N&&N<0?void 0:v.size,"100%"),g(Y&&Y<0?void 0:v.innerSize||0,"0%")];for(!_.angular||this instanceof a||(U[3]=0),Z=0;Z<4;++Z)K=U[Z],S=Z<2||Z===2&&/%$/.test(K),U[Z]=x(K,[k,w,A,U[2]][Z])+(S?C:0);return U[3]>U[2]&&(U[3]=U[2]),y(M)&&2*M<U[2]&&M>0&&(U[3]=U[2]-2*M),m(this,"afterGetCenter",{positions:U}),U},h.getStartAndEndRadians=function(v,_){let C=y(v)?v:0,k=y(_)&&_>C&&_-C<360?_:C+360;return{start:p*(C+-90),end:p*(k+-90)}},s}),r(t,"Series/Pie/PiePoint.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(n,a,c){let{setAnimation:s}=n,{addEvent:h,defined:p,extend:m,isNumber:y,pick:g,relativeLength:x}=c;class v extends a{getConnectorPath(C){let k=C.dataLabelPosition,w=C.options||{},E=w.connectorShape,A=this.connectorShapes[E]||E;return k&&A.call(this,{...k.computed,alignment:k.alignment},k.connectorPosition,w)||[]}getTranslate(){return this.sliced&&this.slicedTranslation||{translateX:0,translateY:0}}haloPath(C){let k=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(k.x,k.y,k.r+C,k.r+C,{innerR:k.r-1,start:k.start,end:k.end,borderRadius:k.borderRadius})}constructor(C,k,w){super(C,k,w),this.half=0,this.name??(this.name="Slice");let E=A=>{this.slice(A.type==="select")};h(this,"select",E),h(this,"unselect",E)}isValid(){return y(this.y)&&this.y>=0}setVisible(C,k=!0){C!==this.visible&&this.update({visible:C??!this.visible},k,void 0,!1)}slice(C,k,w){let E=this.series;s(w,E.chart),k=g(k,!0),this.sliced=this.options.sliced=C=p(C)?C:!this.sliced,E.options.data[E.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate())}}return m(v.prototype,{connectorShapes:{fixedOffset:function(_,C,k){let w=C.breakAt,E=C.touchingSliceAt,A=k.softConnector?["C",_.x+(_.alignment==="left"?-5:5),_.y,2*w.x-E.x,2*w.y-E.y,w.x,w.y]:["L",w.x,w.y];return[["M",_.x,_.y],A,["L",E.x,E.y]]},straight:function(_,C){let k=C.touchingSliceAt;return[["M",_.x,_.y],["L",k.x,k.y]]},crookedLine:function(_,C,k){let{breakAt:w,touchingSliceAt:E}=C,{series:A}=this,[M,S,N]=A.center,Y=N/2,{plotLeft:Z,plotWidth:K}=A.chart,U=_.alignment==="left",{x:$,y:B}=_,R=w.x;if(k.crookDistance){let G=x(k.crookDistance,1);R=U?M+Y+(K+Z-M-Y)*(1-G):Z+(M-Y)*G}else R=M+(S-B)*Math.tan((this.angle||0)-Math.PI/2);let L=[["M",$,B]];return(U?R<=$&&R>=w.x:R>=$&&R<=w.x)&&L.push(["L",R,B]),L.push(["L",w.x,w.y],["L",E.x,E.y]),L}}}),v}),r(t,"Series/Pie/PieSeriesDefaults.js",[],function(){return{borderRadius:3,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{connectorPadding:5,connectorShape:"crookedLine",crookDistance:void 0,distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}}),r(t,"Series/Pie/PieSeries.js",[t["Series/CenteredUtilities.js"],t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Series/Pie/PiePoint.js"],t["Series/Pie/PieSeriesDefaults.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/Symbols.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,p,m,y,g){let{getStartAndEndRadians:x}=n,{noop:v}=c,{clamp:_,extend:C,fireEvent:k,merge:w,pick:E}=g;class A extends p{animate(S){let N=this,Y=N.points,Z=N.startAngleRad;S||Y.forEach(function(K){let U=K.graphic,$=K.shapeArgs;U&&$&&(U.attr({r:E(K.startR,N.center&&N.center[3]/2),start:Z,end:Z}),U.animate({r:$.r,start:$.start,end:$.end},N.options.animation))})}drawEmpty(){let S,N,Y=this.startAngleRad,Z=this.endAngleRad,K=this.options;this.total===0&&this.center?(S=this.center[0],N=this.center[1],this.graph||(this.graph=this.chart.renderer.arc(S,N,this.center[1]/2,0,Y,Z).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:y.arc(S,N,this.center[2]/2,0,{start:Y,end:Z,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":K.borderWidth,fill:K.fillColor||"none",stroke:K.color||"#cccccc"})):this.graph&&(this.graph=this.graph.destroy())}drawPoints(){let S=this.chart.renderer;this.points.forEach(function(N){N.graphic&&N.hasNewShapeType()&&(N.graphic=N.graphic.destroy()),N.graphic||(N.graphic=S[N.shapeType](N.shapeArgs).add(N.series.group),N.delayedRendering=!0)})}generatePoints(){super.generatePoints(),this.updateTotals()}getX(S,N,Y,Z){let K=this.center,U=this.radii?this.radii[Y.index]||0:K[2]/2,$=Z.dataLabelPosition,B=($==null?void 0:$.distance)||0,R=Math.asin(_((S-K[1])/(U+B),-1,1));return K[0]+Math.cos(R)*(U+B)*(N?-1:1)+(B>0?(N?-1:1)*(Z.padding||0):0)}hasData(){return!!this.processedXData.length}redrawPoints(){let S,N,Y,Z,K=this,U=K.chart;this.drawEmpty(),K.group&&!U.styledMode&&K.group.shadow(K.options.shadow),K.points.forEach(function($){let B={};N=$.graphic,!$.isNull&&N?(Z=$.shapeArgs,S=$.getTranslate(),U.styledMode||(Y=K.pointAttribs($,$.selected&&"select")),$.delayedRendering?(N.setRadialReference(K.center).attr(Z).attr(S),U.styledMode||N.attr(Y).attr({"stroke-linejoin":"round"}),$.delayedRendering=!1):(N.setRadialReference(K.center),U.styledMode||w(!0,B,Y),w(!0,B,Z,S),N.animate(B)),N.attr({visibility:$.visible?"inherit":"hidden"}),N.addClass($.getClassName(),!0)):N&&($.graphic=N.destroy())})}sortByAngle(S,N){S.sort(function(Y,Z){return Y.angle!==void 0&&(Z.angle-Y.angle)*N})}translate(S){k(this,"translate"),this.generatePoints();let N=this.options,Y=N.slicedOffset,Z=x(N.startAngle,N.endAngle),K=this.startAngleRad=Z.start,U=(this.endAngleRad=Z.end)-K,$=this.points,B=N.ignoreHiddenPoint,R=$.length,L,G,F,j,q,W,se,fe=0;for(S||(this.center=S=this.getCenter()),W=0;W<R;W++){se=$[W],L=K+fe*U,se.isValid()&&(!B||se.visible)&&(fe+=se.percentage/100),G=K+fe*U;let ee={x:S[0],y:S[1],r:S[2]/2,innerR:S[3]/2,start:Math.round(1e3*L)/1e3,end:Math.round(1e3*G)/1e3};se.shapeType="arc",se.shapeArgs=ee,(F=(G+L)/2)>1.5*Math.PI?F-=2*Math.PI:F<-Math.PI/2&&(F+=2*Math.PI),se.slicedTranslation={translateX:Math.round(Math.cos(F)*Y),translateY:Math.round(Math.sin(F)*Y)},j=Math.cos(F)*S[2]/2,q=Math.sin(F)*S[2]/2,se.tooltipPos=[S[0]+.7*j,S[1]+.7*q],se.half=F<-Math.PI/2||F>Math.PI/2?1:0,se.angle=F}k(this,"afterTranslate")}updateTotals(){let S=this.points,N=S.length,Y=this.options.ignoreHiddenPoint,Z,K,U=0;for(Z=0;Z<N;Z++)(K=S[Z]).isValid()&&(!Y||K.visible)&&(U+=K.y);for(Z=0,this.total=U;Z<N;Z++)(K=S[Z]).percentage=U>0&&(K.visible||!Y)?K.y/U*100:0,K.total=U}}return A.defaultOptions=w(p.defaultOptions,h),C(A.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawTracker:a.prototype.drawTracker,getCenter:n.getCenter,getSymbol:v,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointAttribs:a.prototype.pointAttribs,pointClass:s,requireSorting:!1,searchPoint:v,trackerGroups:["group","dataLabelsGroup"]}),m.registerSeriesType("pie",A),A}),r(t,"Series/Pie/PieDataLabel.js",[t["Core/Series/DataLabel.js"],t["Core/Globals.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){var p;let{composed:m,noop:y}=a,{distribute:g}=c,{series:x}=s,{arrayMax:v,clamp:_,defined:C,pick:k,pushUnique:w,relativeLength:E}=h;return function(A){let M={radialDistributionY:function(K,U){var $;return((($=U.dataLabelPosition)==null?void 0:$.top)||0)+K.distributeBox.pos},radialDistributionX:function(K,U,$,B,R){let L=R.dataLabelPosition;return K.getX($<((L==null?void 0:L.top)||0)+2||$>((L==null?void 0:L.bottom)||0)-2?B:$,U.half,U,R)},justify:function(K,U,$,B){var R;return B[0]+(K.half?-1:1)*($+(((R=U.dataLabelPosition)==null?void 0:R.distance)||0))},alignToPlotEdges:function(K,U,$,B){let R=K.getBBox().width;return U?R+B:$-R-B},alignToConnectors:function(K,U,$,B){let R=0,L;return K.forEach(function(G){(L=G.dataLabel.getBBox().width)>R&&(R=L)}),U?R+B:$-R-B}};function S(K,U){let{center:$,options:B}=this,R=$[2]/2,L=K.angle||0,G=Math.cos(L),F=Math.sin(L),j=$[0]+G*R,q=$[1]+F*R,W=Math.min((B.slicedOffset||0)+(B.borderWidth||0),U/5);return{natural:{x:j+G*U,y:q+F*U},computed:{},alignment:U<0?"center":K.half?"right":"left",connectorPosition:{breakAt:{x:j+G*W,y:q+F*W},touchingSliceAt:{x:j,y:q}},distance:U}}function N(){var Ee;let K=this,U=K.points,$=K.chart,B=$.plotWidth,R=$.plotHeight,L=$.plotLeft,G=Math.round($.chartWidth/3),F=K.center,j=F[2]/2,q=F[1],W=[[],[]],se=[0,0,0,0],fe=K.dataLabelPositioners,ee,oe,Ce,ge=0;K.visible&&((Ee=K.hasDataLabels)!=null&&Ee.call(K))&&(U.forEach(J=>{(J.dataLabels||[]).forEach(ie=>{ie.shortened&&(ie.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),ie.shortened=!1)})}),x.prototype.drawDataLabels.apply(K),U.forEach(J=>{(J.dataLabels||[]).forEach((ie,le)=>{var ce;let be=F[2]/2,te=ie.options,ae=E((te==null?void 0:te.distance)||0,be);le===0&&W[J.half].push(J),!C((ce=te==null?void 0:te.style)==null?void 0:ce.width)&&ie.getBBox().width>G&&(ie.css({width:Math.round(.7*G)+"px"}),ie.shortened=!0),ie.dataLabelPosition=this.getDataLabelPosition(J,ae),ge=Math.max(ge,ae)})}),W.forEach((J,ie)=>{let le=J.length,be=[],te,ae,ce=0,xe;le&&(K.sortByAngle(J,ie-.5),ge>0&&(te=Math.max(0,q-j-ge),ae=Math.min(q+j+ge,$.plotHeight),J.forEach(_e=>{(_e.dataLabels||[]).forEach(Ne=>{var Le;let ke=Ne.dataLabelPosition;ke&&ke.distance>0&&(ke.top=Math.max(0,q-j-ke.distance),ke.bottom=Math.min(q+j+ke.distance,$.plotHeight),ce=Ne.getBBox().height||21,Ne.lineHeight=$.renderer.fontMetrics(Ne.text||Ne).h+2*Ne.padding,_e.distributeBox={target:(((Le=Ne.dataLabelPosition)==null?void 0:Le.natural.y)||0)-ke.top+Ne.lineHeight/2,size:ce,rank:_e.y},be.push(_e.distributeBox))})}),g(be,xe=ae+ce-te,xe/5)),J.forEach(_e=>{(_e.dataLabels||[]).forEach(Ne=>{let ke=Ne.options||{},Le=_e.distributeBox,me=Ne.dataLabelPosition,Re=(me==null?void 0:me.natural.y)||0,$e=ke.connectorPadding||0,De=Ne.lineHeight||21,Se=(De-Ne.getBBox().height)/2,Pe=0,Fe=Re,je="inherit";if(me){if(be&&C(Le)&&me.distance>0&&(Le.pos===void 0?je="hidden":(Ce=Le.size,Fe=fe.radialDistributionY(_e,Ne))),ke.justify)Pe=fe.justify(_e,Ne,j,F);else switch(ke.alignTo){case"connectors":Pe=fe.alignToConnectors(J,ie,B,L);break;case"plotEdges":Pe=fe.alignToPlotEdges(Ne,ie,B,L);break;default:Pe=fe.radialDistributionX(K,_e,Fe-Se,Re,Ne)}if(me.attribs={visibility:je,align:me.alignment},me.posAttribs={x:Pe+(ke.x||0)+({left:$e,right:-$e}[me.alignment]||0),y:Fe+(ke.y||0)-De/2},me.computed.x=Pe,me.computed.y=Fe-Se,k(ke.crop,!0)){let He;Pe-(oe=Ne.getBBox().width)<$e&&ie===1?(He=Math.round(oe-Pe+$e),se[3]=Math.max(He,se[3])):Pe+oe>B-$e&&ie===0&&(He=Math.round(Pe+oe-B+$e),se[1]=Math.max(He,se[1])),Fe-Ce/2<0?se[0]=Math.max(Math.round(-Fe+Ce/2),se[0]):Fe+Ce/2>R&&(se[2]=Math.max(Math.round(Fe+Ce/2-R),se[2])),me.sideOverflow=He}}})}))}),(v(se)===0||this.verifyDataLabelOverflow(se))&&(this.placeDataLabels(),this.points.forEach(J=>{(J.dataLabels||[]).forEach(ie=>{var ae;let{connectorColor:le,connectorWidth:be=1}=ie.options||{},te=ie.dataLabelPosition;if(be){let ce;ee=ie.connector,te&&te.distance>0?(ce=!ee,ee||(ie.connector=ee=$.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+J.colorIndex+(J.className?" "+J.className:"")).add(K.dataLabelsGroup)),$.styledMode||ee.attr({"stroke-width":be,stroke:le||J.color||"#666666"}),ee[ce?"attr":"animate"]({d:J.getConnectorPath(ie)}),ee.attr({visibility:(ae=te.attribs)==null?void 0:ae.visibility})):ee&&(ie.connector=ee.destroy())}})})))}function Y(){this.points.forEach(K=>{(K.dataLabels||[]).forEach(U=>{var B;let $=U.dataLabelPosition;$?($.sideOverflow&&(U.css({width:Math.max(U.getBBox().width-$.sideOverflow,0)+"px",textOverflow:(((B=U.options)==null?void 0:B.style)||{}).textOverflow||"ellipsis"}),U.shortened=!0),U.attr($.attribs),U[U.moved?"animate":"attr"]($.posAttribs),U.moved=!0):U&&U.attr({y:-9999})}),delete K.distributeBox},this)}function Z(K){let U=this.center,$=this.options,B=$.center,R=$.minSize||80,L=R,G=$.size!==null;return!G&&(B[0]!==null?L=Math.max(U[2]-Math.max(K[1],K[3]),R):(L=Math.max(U[2]-K[1]-K[3],R),U[0]+=(K[3]-K[1])/2),B[1]!==null?L=_(L,R,U[2]-Math.max(K[0],K[2])):(L=_(L,R,U[2]-K[0]-K[2]),U[1]+=(K[0]-K[2])/2),L<U[2]?(U[2]=L,U[3]=Math.min($.thickness?Math.max(0,L-2*$.thickness):Math.max(0,E($.innerSize||0,L)),L),this.translate(U),this.drawDataLabels&&this.drawDataLabels()):G=!0),G}A.compose=function(K){if(n.compose(x),w(m,"PieDataLabel")){let U=K.prototype;U.dataLabelPositioners=M,U.alignDataLabel=y,U.drawDataLabels=N,U.getDataLabelPosition=S,U.placeDataLabels=Y,U.verifyDataLabelOverflow=Z}}}(p||(p={})),p}),r(t,"Core/Geometry/GeometryUtilities.js",[],function(){var n,a;return(a=n||(n={})).getCenterOfPoints=function(c){let s=c.reduce((h,p)=>(h.x+=p.x,h.y+=p.y,h),{x:0,y:0});return{x:s.x/c.length,y:s.y/c.length}},a.getDistanceBetweenPoints=function(c,s){return Math.sqrt(Math.pow(s.x-c.x,2)+Math.pow(s.y-c.y,2))},a.getAngleBetweenPoints=function(c,s){return Math.atan2(s.x-c.x,s.y-c.y)},a.pointInPolygon=function({x:c,y:s},h){let p=h.length,m,y,g=!1;for(m=0,y=p-1;m<p;y=m++){let[x,v]=h[m],[_,C]=h[y];v>s!=C>s&&c<(_-x)*(s-v)/(C-v)+x&&(g=!g)}return g},n}),r(t,"Extensions/OverlappingDataLabels.js",[t["Core/Geometry/GeometryUtilities.js"],t["Core/Utilities.js"]],function(n,a){let{pointInPolygon:c}=n,{addEvent:s,fireEvent:h,objectEach:p,pick:m}=a;function y(v){let _=v.length,C=(Y,Z)=>!(Z.x>=Y.x+Y.width||Z.x+Z.width<=Y.x||Z.y>=Y.y+Y.height||Z.y+Z.height<=Y.y),k=(Y,Z)=>{for(let K of Y)if(c({x:K[0],y:K[1]},Z))return!0;return!1},w,E,A,M,S,N=!1;for(let Y=0;Y<_;Y++)(w=v[Y])&&(w.oldOpacity=w.opacity,w.newOpacity=1,w.absoluteBox=function(Z){var K,U;if(Z&&(!Z.alignAttr||Z.placed)){let $=Z.box?0:Z.padding||0,B=Z.alignAttr||{x:Z.attr("x"),y:Z.attr("y")},R=Z.getBBox();return Z.width=R.width,Z.height=R.height,{x:B.x+(((K=Z.parentGroup)==null?void 0:K.translateX)||0)+$,y:B.y+(((U=Z.parentGroup)==null?void 0:U.translateY)||0)+$,width:(Z.width||0)-2*$,height:(Z.height||0)-2*$,polygon:R==null?void 0:R.polygon}}}(w));v.sort((Y,Z)=>(Z.labelrank||0)-(Y.labelrank||0));for(let Y=0;Y<_;++Y){M=(E=v[Y])&&E.absoluteBox;let Z=M==null?void 0:M.polygon;for(let K=Y+1;K<_;++K){S=(A=v[K])&&A.absoluteBox;let U=!1;if(M&&S&&E!==A&&E.newOpacity!==0&&A.newOpacity!==0&&E.visibility!=="hidden"&&A.visibility!=="hidden"){let $=S.polygon;if(Z&&$&&Z!==$?k(Z,$)&&(U=!0):C(M,S)&&(U=!0),U){let B=E.labelrank<A.labelrank?E:A,R=B.text;B.newOpacity=0,R!=null&&R.element.querySelector("textPath")&&R.hide()}}}}for(let Y of v)g(Y,this)&&(N=!0);N&&h(this,"afterHideAllOverlappingLabels")}function g(v,_){let C,k,w=!1;return v&&(k=v.newOpacity,v.oldOpacity!==k&&(v.hasClass("highcharts-data-label")?(v[k?"removeClass":"addClass"]("highcharts-data-label-hidden"),C=function(){_.styledMode||v.css({pointerEvents:k?"auto":"none"})},w=!0,v[v.isOld?"animate":"attr"]({opacity:k},void 0,C),h(_,"afterHideOverlappingLabel")):v.attr({opacity:k})),v.isOld=!0),w}function x(){var C;let v=this,_=[];for(let k of v.labelCollectors||[])_=_.concat(k());for(let k of v.yAxis||[])k.stacking&&k.options.stackLabels&&!k.options.stackLabels.allowOverlap&&p(k.stacking.stacks,w=>{p(w,E=>{E.label&&_.push(E.label)})});for(let k of v.series||[])if(k.visible&&((C=k.hasDataLabels)!=null&&C.call(k))){let w=E=>{for(let A of E)A.visible&&(A.dataLabels||[]).forEach(M=>{var N;let S=M.options||{};M.labelrank=m(S.labelrank,A.labelrank,(N=A.shapeArgs)==null?void 0:N.height),S.allowOverlap??Number(S.distance)>0?(M.oldOpacity=M.opacity,M.newOpacity=1,g(M,v)):_.push(M)})};w(k.nodes||[]),w(k.points)}this.hideOverlappingLabels(_)}return{compose:function(v){let _=v.prototype;_.hideOverlappingLabels||(_.hideOverlappingLabels=y,s(v,"render",x))}}}),r(t,"Extensions/BorderRadius.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c){let{defaultOptions:s}=n,{noop:h}=a,{addEvent:p,extend:m,isObject:y,merge:g,relativeLength:x}=c,v={radius:0,scope:"stack",where:void 0},_=h,C=h;function k(S,N,Y,Z,K={}){let U=_(S,N,Y,Z,K),{innerR:$=0,r:B=Y,start:R=0,end:L=0}=K;if(K.open||!K.borderRadius)return U;let G=L-R,F=Math.sin(G/2),j=Math.max(Math.min(x(K.borderRadius||0,B-$),(B-$)/2,B*F/(1+F)),0),q=Math.min(j,G/Math.PI*2*$),W=U.length-1;for(;W--;)(function(se,fe,ee){let oe,Ce,ge,Ee=se[fe],J=se[fe+1];if(J[0]==="Z"&&(J=se[0]),(Ee[0]==="M"||Ee[0]==="L")&&J[0]==="A"?(oe=Ee,Ce=J,ge=!0):Ee[0]==="A"&&(J[0]==="M"||J[0]==="L")&&(oe=J,Ce=Ee),oe&&Ce&&Ce.params){let ie=Ce[1],le=Ce[5],be=Ce.params,{start:te,end:ae,cx:ce,cy:xe}=be,_e=le?ie-ee:ie+ee,Ne=_e?Math.asin(ee/_e):0,ke=le?Ne:-Ne,Le=Math.cos(Ne)*_e;ge?(be.start=te+ke,oe[1]=ce+Le*Math.cos(te),oe[2]=xe+Le*Math.sin(te),se.splice(fe+1,0,["A",ee,ee,0,0,1,ce+ie*Math.cos(be.start),xe+ie*Math.sin(be.start)])):(be.end=ae-ke,Ce[6]=ce+ie*Math.cos(be.end),Ce[7]=xe+ie*Math.sin(be.end),se.splice(fe+1,0,["A",ee,ee,0,0,1,ce+Le*Math.cos(ae),xe+Le*Math.sin(ae)])),Ce[4]=Math.abs(be.end-be.start)<Math.PI?0:1}})(U,W,W>1?q:j);return U}function w(){var S,N;if(this.options.borderRadius&&!(this.chart.is3d&&this.chart.is3d())){let{options:Y,yAxis:Z}=this,K=Y.stacking==="percent",U=(N=(S=s.plotOptions)==null?void 0:S[this.type])==null?void 0:N.borderRadius,$=E(Y.borderRadius,y(U)?U:{}),B=Z.options.reversed;for(let R of this.points){let{shapeArgs:L}=R;if(R.shapeType==="roundedRect"&&L){let{width:G=0,height:F=0,y:j=0}=L,q=j,W=F;if($.scope==="stack"&&R.stackTotal){let oe=Z.translate(K?100:R.stackTotal,!1,!0,!1,!0),Ce=Z.translate(Y.threshold||0,!1,!0,!1,!0),ge=this.crispCol(0,Math.min(oe,Ce),0,Math.abs(oe-Ce));q=ge.y,W=ge.height}let se=(R.negative?-1:1)*(B?-1:1)==-1,fe=$.where;!fe&&this.is("waterfall")&&Math.abs((R.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth&&(fe="all"),fe||(fe="end");let ee=Math.min(x($.radius,G),G/2,fe==="all"?F/2:1/0)||0;fe==="end"&&(se&&(q-=ee),W+=ee),m(L,{brBoxHeight:W,brBoxY:q,r:ee})}}}}function E(S,N){return y(S)||(S={radius:S||0}),g(v,N,S)}function A(){let S=E(this.options.borderRadius);for(let N of this.points){let Y=N.shapeArgs;Y&&(Y.borderRadius=x(S.radius,(Y.r||0)-(Y.innerR||0)))}}function M(S,N,Y,Z,K={}){let U=C(S,N,Y,Z,K),{r:$=0,brBoxHeight:B=Z,brBoxY:R=N}=K,L=N-R,G=R+B-(N+Z),F=L-$>-.1?0:$,j=G-$>-.1?0:$,q=Math.max(F&&L,0),W=Math.max(j&&G,0),se=[S+F,N],fe=[S+Y-F,N],ee=[S+Y,N+F],oe=[S+Y,N+Z-j],Ce=[S+Y-j,N+Z],ge=[S+j,N+Z],Ee=[S,N+Z-j],J=[S,N+F],ie=(le,be)=>Math.sqrt(Math.pow(le,2)-Math.pow(be,2));if(q){let le=ie(F,F-q);se[0]-=le,fe[0]+=le,ee[1]=J[1]=N+F-q}if(Z<F-q){let le=ie(F,F-q-Z);ee[0]=oe[0]=S+Y-F+le,Ce[0]=Math.min(ee[0],Ce[0]),ge[0]=Math.max(oe[0],ge[0]),Ee[0]=J[0]=S+F-le,ee[1]=J[1]=N+Z}if(W){let le=ie(j,j-W);Ce[0]+=le,ge[0]-=le,oe[1]=Ee[1]=N+Z-j+W}if(Z<j-W){let le=ie(j,j-W-Z);ee[0]=oe[0]=S+Y-j+le,fe[0]=Math.min(ee[0],fe[0]),se[0]=Math.max(oe[0],se[0]),Ee[0]=J[0]=S+j-le,oe[1]=Ee[1]=N}return U.length=0,U.push(["M",...se],["L",...fe],["A",F,F,0,0,1,...ee],["L",...oe],["A",j,j,0,0,1,...Ce],["L",...ge],["A",j,j,0,0,1,...Ee],["L",...J],["A",F,F,0,0,1,...se],["Z"]),U}return{compose:function(S,N,Y){let Z=S.types.pie;if(!N.symbolCustomAttribs.includes("borderRadius")){let K=Y.prototype.symbols;p(S,"afterColumnTranslate",w,{order:9}),p(Z,"afterTranslate",A),N.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY"),_=K.arc,C=K.roundedRect,K.arc=k,K.roundedRect=M}},optionsToObject:E}}),r(t,"Core/Responsive.js",[t["Core/Utilities.js"]],function(n){var a;let{diffObjects:c,extend:s,find:h,merge:p,pick:m,uniqueKey:y}=n;return function(g){function x(_,C){let k=_.condition;(k.callback||function(){return this.chartWidth<=m(k.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=m(k.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=m(k.minWidth,0)&&this.chartHeight>=m(k.minHeight,0)}).call(this)&&C.push(_._id)}function v(_,C){let k=this.options.responsive,w=this.currentResponsive,E=[],A;!C&&k&&k.rules&&k.rules.forEach(N=>{N._id===void 0&&(N._id=y()),this.matchResponsiveRule(N,E)},this);let M=p(...E.map(N=>h((k||{}).rules||[],Y=>Y._id===N)).map(N=>N&&N.chartOptions));M.isResponsiveOptions=!0,E=E.toString()||void 0;let S=w&&w.ruleIds;E===S||(w&&(this.currentResponsive=void 0,this.updatingResponsive=!0,this.update(w.undoOptions,_,!0),this.updatingResponsive=!1),E?((A=c(M,this.options,!0,this.collectionsWithUpdate)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:E,mergedOptions:M,undoOptions:A},this.updatingResponsive||this.update(M,_,!0)):this.currentResponsive=void 0)}g.compose=function(_){let C=_.prototype;return C.matchResponsiveRule||s(C,{matchResponsiveRule:x,setResponsive:v}),_}}(a||(a={})),a}),r(t,"masters/highcharts.src.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Core/Defaults.js"],t["Core/Animation/Fx.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Renderer/HTML/AST.js"],t["Core/Templating.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Renderer/HTML/HTMLElement.js"],t["Core/Axis/Axis.js"],t["Core/Axis/DateTimeAxis.js"],t["Core/Axis/LogarithmicAxis.js"],t["Core/Axis/PlotLineOrBand/PlotLineOrBand.js"],t["Core/Axis/Tick.js"],t["Core/Tooltip.js"],t["Core/Series/Point.js"],t["Core/Pointer.js"],t["Core/Legend/Legend.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Chart/Chart.js"],t["Extensions/ScrollablePlotArea.js"],t["Core/Axis/Stacking/StackingAxis.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Series/Column/ColumnDataLabel.js"],t["Series/Pie/PieDataLabel.js"],t["Core/Series/DataLabel.js"],t["Extensions/OverlappingDataLabels.js"],t["Extensions/BorderRadius.js"],t["Core/Responsive.js"],t["Core/Color/Color.js"],t["Core/Time.js"]],function(n,a,c,s,h,p,m,y,g,x,v,_,C,k,w,E,A,M,S,N,Y,Z,K,U,$,B,R,L,G,F,j,q,W,se,fe,ee){return n.AST=p,n.Axis=C,n.Chart=K,n.Color=fe,n.DataLabel=j,n.Fx=s,n.HTMLElement=_,n.Legend=Y,n.LegendSymbol=Z,n.OverlappingDataLabels=n.OverlappingDataLabels||q,n.PlotLineOrBand=E,n.Point=S,n.Pointer=N,n.RendererRegistry=y,n.Series=R,n.SeriesRegistry=L,n.StackItem=B,n.SVGElement=x,n.SVGRenderer=v,n.Templating=m,n.Tick=A,n.Time=ee,n.Tooltip=M,n.animate=h.animate,n.animObject=h.animObject,n.chart=K.chart,n.color=fe.parse,n.dateFormat=m.dateFormat,n.defaultOptions=c.defaultOptions,n.distribute=g.distribute,n.format=m.format,n.getDeferredAnimation=h.getDeferredAnimation,n.getOptions=c.getOptions,n.numberFormat=m.numberFormat,n.seriesType=L.seriesType,n.setAnimation=h.setAnimation,n.setOptions=c.setOptions,n.stop=h.stop,n.time=c.defaultTime,n.timers=s.timers,W.compose(n.Series,n.SVGElement,n.SVGRenderer),G.compose(n.Series.types.column),j.compose(n.Series),k.compose(n.Axis),_.compose(n.SVGRenderer),Y.compose(n.Chart),w.compose(n.Axis),q.compose(n.Chart),F.compose(n.Series.types.pie),E.compose(n.Chart,n.Axis),N.compose(n.Chart),se.compose(n.Chart),U.compose(n.Axis,n.Chart,n.Series),$.compose(n.Axis,n.Chart,n.Series),M.compose(n.Pointer),a.extend(n,a),n}),t["masters/highcharts.src.js"]._modules=t,t["masters/highcharts.src.js"]})})(GI);var PW=GI.exports;const ph=Hu(PW);var HI={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function r(n,a,c,s){n.hasOwnProperty(a)||(n[a]=s.apply(null,c),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:a,module:n[a]}})))}r(t,"Accessibility/Utils/HTMLUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let{doc:c,win:s}=n,{css:h}=a,p=s.EventTarget&&new s.EventTarget||"none";function m(g){if(typeof s.MouseEvent=="function")return new s.MouseEvent(g.type,g);if(c.createEvent){let x=c.createEvent("MouseEvent");if(x.initMouseEvent)return x.initMouseEvent(g.type,g.bubbles,g.cancelable,g.view||s,g.detail,g.screenX,g.screenY,g.clientX,g.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.button,g.relatedTarget),x}return y(g.type)}function y(g,x,v){let _=x||{x:0,y:0};if(typeof s.MouseEvent=="function")return new s.MouseEvent(g,{bubbles:!0,cancelable:!0,composed:!0,button:0,buttons:1,relatedTarget:v||p,view:s,detail:g==="click"?1:0,screenX:_.x,screenY:_.y,clientX:_.x,clientY:_.y});if(c.createEvent){let C=c.createEvent("MouseEvent");if(C.initMouseEvent)return C.initMouseEvent(g,!0,!0,s,g==="click"?1:0,_.x,_.y,_.x,_.y,!1,!1,!1,!1,0,null),C}return{type:g}}return{addClass:function(g,x){g.classList?g.classList.add(x):0>g.className.indexOf(x)&&(g.className+=" "+x)},cloneMouseEvent:m,cloneTouchEvent:function(g){let x=_=>{let C=[];for(let k=0;k<_.length;++k){let w=_.item(k);w&&C.push(w)}return C};if(typeof s.TouchEvent=="function"){let _=new s.TouchEvent(g.type,{touches:x(g.touches),targetTouches:x(g.targetTouches),changedTouches:x(g.changedTouches),ctrlKey:g.ctrlKey,shiftKey:g.shiftKey,altKey:g.altKey,metaKey:g.metaKey,bubbles:g.bubbles,cancelable:g.cancelable,composed:g.composed,detail:g.detail,view:g.view});return g.defaultPrevented&&_.preventDefault(),_}let v=m(g);return v.touches=g.touches,v.changedTouches=g.changedTouches,v.targetTouches=g.targetTouches,v},escapeStringForHTML:function(g){return g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},getElement:function(g){return c.getElementById(g)},getFakeMouseEvent:y,getHeadingTagNameForElement:function(g){let x=k=>"h"+Math.min(6,parseInt(k.slice(1),10)+1),v=k=>/^H[1-6]$/i.test(k),_=k=>{let w=k;for(;w=w.previousSibling;){let E=w.tagName||"";if(v(E))return E}return""},C=k=>{let w=_(k);if(w)return x(w);let E=k.parentElement;if(!E)return"p";let A=E.tagName;return v(A)?x(A):C(E)};return C(g)},removeChildNodes:function(g){for(;g.lastChild;)g.removeChild(g.lastChild)},removeClass:function(g,x){g.classList?g.classList.remove(x):g.className=g.className.replace(RegExp(x,"g"),"")},removeElement:function(g){g&&g.parentNode&&g.parentNode.removeChild(g)},reverseChildNodes:function(g){let x=g.childNodes.length;for(;x--;)g.appendChild(g.childNodes[x])},simulatedEventTarget:p,stripHTMLTagsFromString:function(g,x=!1){return typeof g=="string"?x?g.replace(/<\/?[^>]+(>|$)/g,""):g.replace(/<\/?(?!\s)[^>]+(>|$)/g,""):g},visuallyHideElement:function(g){h(g,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",whiteSpace:"nowrap",clip:"rect(1px, 1px, 1px, 1px)",marginTop:"-3px","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",filter:"alpha(opacity=1)",opacity:.01})}}}),r(t,"Accessibility/A11yI18n.js",[t["Core/Templating.js"],t["Core/Utilities.js"]],function(n,a){var c;let{format:s}=n,{getNestedProperty:h,pick:p}=a;return function(m){function y(x,v,_){let C=(M,S)=>{let N=M.slice(S||0),Y=N.indexOf("{"),Z=N.indexOf("}");if(Y>-1&&Z>Y)return{statement:N.substring(Y+1,Z),begin:S+Y+1,end:S+Z}},k=[],w,E,A=0;do w=C(x,A),(E=x.substring(A,w&&w.begin-1)).length&&k.push({value:E,type:"constant"}),w&&k.push({value:w.statement,type:"statement"}),A=w?w.end+1:A+1;while(w);return k.forEach(M=>{M.type==="statement"&&(M.value=function(S,N){let Y,Z,K=S.indexOf("#each("),U=S.indexOf("#plural("),$=S.indexOf("["),B=S.indexOf("]");if(K>-1){let L=S.slice(K).indexOf(")")+K,G=S.substring(0,K),F=S.substring(L+1),j=S.substring(K+6,L).split(","),q=Number(j[1]),W;if(Z="",Y=h(j[0],N)){W=(q=isNaN(q)?Y.length:q)<0?Y.length+q:Math.min(q,Y.length);for(let se=0;se<W;++se)Z+=G+Y[se]+F}return Z.length?Z:""}if(U>-1){var R;let L=S.slice(U).indexOf(")")+U,G=S.substring(U+8,L).split(",");switch(Number(h(G[0],N))){case 0:Z=p(G[4],G[1]);break;case 1:Z=p(G[2],G[1]);break;case 2:Z=p(G[3],G[1]);break;default:Z=G[1]}return Z?(R=Z).trim&&R.trim()||R.replace(/^\s+|\s+$/g,""):""}if($>-1){let L,G=S.substring(0,$),F=Number(S.substring($+1,B));return Y=h(G,N),!isNaN(F)&&Y&&(F<0?(L=Y[Y.length+F])===void 0&&(L=Y[0]):(L=Y[F])===void 0&&(L=Y[Y.length-1])),L!==void 0?L:""}return"{"+S+"}"}(M.value,v))}),s(k.reduce((M,S)=>M+S.value,""),v,_)}function g(x,v){let _=x.split("."),C=this.options.lang,k=0;for(;k<_.length;++k)C=C&&C[_[k]];return typeof C=="string"?y(C,v,this):""}m.compose=function(x){let v=x.prototype;v.langFormat||(v.langFormat=g)},m.i18nFormat=y}(c||(c={})),c}),r(t,"Accessibility/Utils/ChartUtilities.js",[t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(n,a,c){let{doc:s}=n,{stripHTMLTagsFromString:h}=a,{defined:p,find:m,fireEvent:y}=c;function g(v){if(v.points&&v.points.length){let _=m(v.points,C=>!!C.graphic);return _&&_.graphic&&_.graphic.element}}function x(v){let _=g(v);return _&&_.parentNode||v.graph&&v.graph.element||v.group&&v.group.element}return{fireEventOnWrappedOrUnwrappedElement:function v(_,C){let k=C.type,w=_.hcEvents;s.createEvent&&(_.dispatchEvent||_.fireEvent)?_.dispatchEvent?_.dispatchEvent(C):_.fireEvent(k,C):w&&w[k]?y(_,k,C):_.element&&v(_.element,C)},getChartTitle:function(v){return h(v.options.title.text||v.langFormat("accessibility.defaultChartTitle",{chart:v}),v.renderer.forExport)},getAxisDescription:function(v){var _,C;return v&&(((_=v.options.accessibility)==null?void 0:_.description)||((C=v.axisTitle)==null?void 0:C.textStr)||v.options.id||v.categories&&"categories"||v.dateTime&&"Time"||"values")},getAxisRangeDescription:function(v){let _=v.options||{};return _.accessibility&&_.accessibility.rangeDescription!==void 0?_.accessibility.rangeDescription:v.categories?function(C){let k=C.chart;return C.dataMax&&C.dataMin?k.langFormat("accessibility.axis.rangeCategories",{chart:k,axis:C,numCategories:C.dataMax-C.dataMin+1}):""}(v):v.dateTime&&(v.min===0||v.dataMin===0)?function(C){let k=C.chart,w={},E=C.dataMin||C.min||0,A=C.dataMax||C.max||0,M="Seconds";w.Seconds=(A-E)/1e3,w.Minutes=w.Seconds/60,w.Hours=w.Minutes/60,w.Days=w.Hours/24,["Minutes","Hours","Days"].forEach(function(N){w[N]>2&&(M=N)});let S=w[M].toFixed(M!=="Seconds"&&M!=="Minutes"?1:0);return k.langFormat("accessibility.axis.timeRange"+M,{chart:k,axis:C,range:S.replace(".0","")})}(v):function(C){let k=C.chart,w=k.options,E=w&&w.accessibility&&w.accessibility.screenReaderSection.axisRangeDateFormat||"",A={min:C.dataMin||C.min||0,max:C.dataMax||C.max||0},M=function(S){return C.dateTime?k.time.dateFormat(E,A[S]):A[S].toString()};return k.langFormat("accessibility.axis.rangeFromTo",{chart:k,axis:C,rangeFrom:M("min"),rangeTo:M("max")})}(v)},getPointFromXY:function(v,_,C){let k=v.length,w;for(;k--;)if(w=m(v[k].points||[],function(E){return E.x===_&&E.y===C}))return w},getSeriesFirstPointElement:g,getSeriesFromName:function(v,_){return _?(v.series||[]).filter(function(C){return C.name===_}):v.series},getSeriesA11yElement:x,unhideChartElementFromAT:function v(_,C){C.setAttribute("aria-hidden",!1),C!==_.renderTo&&C.parentNode&&C.parentNode!==s.body&&(Array.prototype.forEach.call(C.parentNode.childNodes,function(k){k.hasAttribute("aria-hidden")||k.setAttribute("aria-hidden",!0)}),v(_,C.parentNode))},hideSeriesFromAT:function(v){let _=x(v);_&&_.setAttribute("aria-hidden",!0)},scrollAxisToPoint:function(v){let _=v.series.xAxis,C=v.series.yAxis,k=_&&_.scrollbar?_:C,w=k&&k.scrollbar;if(w&&p(w.to)&&p(w.from)){let E=w.to-w.from,A=function(M,S){if(!p(M.dataMin)||!p(M.dataMax))return 0;let N=M.toPixels(M.dataMin),Y=M.toPixels(M.dataMax),Z=M.coll==="xAxis"?"x":"y";return(M.toPixels(S[Z]||0)-N)/(Y-N)}(k,v);w.updatePosition(A-E/2,A+E/2),y(w,"changed",{from:w.from,to:w.to,trigger:"scrollbar",DOMEvent:null})}}}}),r(t,"Accessibility/Utils/DOMElementProvider.js",[t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(n,a){let{doc:c}=n,{removeElement:s}=a;return class{constructor(){this.elements=[]}createElement(){let h=c.createElement.apply(c,arguments);return this.elements.push(h),h}removeElement(h){s(h),this.elements.splice(this.elements.indexOf(h),1)}destroyCreatedElements(){this.elements.forEach(function(h){s(h)}),this.elements=[]}}}),r(t,"Accessibility/Utils/EventProvider.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let{addEvent:c}=a;return class{constructor(){this.eventRemovers=[]}addEvent(){let s=c.apply(n,arguments);return this.eventRemovers.push({element:arguments[0],remover:s}),s}removeEvent(s){let h=this.eventRemovers.map(p=>p.remover).indexOf(s);this.eventRemovers[h].remover(),this.eventRemovers.splice(h,1)}removeAddedEvents(){this.eventRemovers.map(s=>s.remover).forEach(s=>s()),this.eventRemovers=[]}}}),r(t,"Accessibility/AccessibilityComponent.js",[t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(n,a,c,s){let{fireEventOnWrappedOrUnwrappedElement:h}=n,{getFakeMouseEvent:p}=s;return class{destroy(){}getKeyboardNavigation(){return[]}init(){}onChartRender(){}onChartUpdate(){}initBase(m,y){this.chart=m,this.eventProvider=new c,this.domElementProvider=new a,this.proxyProvider=y,this.keyCodes={left:37,right:39,up:38,down:40,enter:13,space:32,esc:27,tab:9,pageUp:33,pageDown:34,end:35,home:36}}addEvent(m,y,g,x){return this.eventProvider.addEvent(m,y,g,x)}createElement(m,y){return this.domElementProvider.createElement(m,y)}fakeClickEvent(m){h(m,p("click"))}destroyBase(){this.domElementProvider.destroyCreatedElements(),this.eventProvider.removeAddedEvents()}}}),r(t,"Accessibility/KeyboardNavigationHandler.js",[t["Core/Utilities.js"]],function(n){let{find:a}=n;return class{constructor(c,s){this.chart=c,this.keyCodeMap=s.keyCodeMap||[],this.validate=s.validate,this.init=s.init,this.terminate=s.terminate,this.response={success:1,prev:2,next:3,noHandler:4,fail:5}}run(c){let s=c.which||c.keyCode,h=this.response.noHandler,p=a(this.keyCodeMap,function(m){return m[0].indexOf(s)>-1});return p?h=p[1].call(this,s,c):s===9&&(h=this.response[c.shiftKey?"prev":"next"]),h}}}),r(t,"Accessibility/Components/ContainerComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(n,a,c,s,h){let{unhideChartElementFromAT:p,getChartTitle:m}=c,{doc:y}=s,{stripHTMLTagsFromString:g}=h;return class extends n{onChartUpdate(){this.handleSVGTitleElement(),this.setSVGContainerLabel(),this.setGraphicContainerAttrs(),this.setRenderToAttrs(),this.makeCreditsAccessible()}handleSVGTitleElement(){let x=this.chart,v="highcharts-title-"+x.index,_=g(x.langFormat("accessibility.svgContainerTitle",{chartTitle:m(x)}));if(_.length){let C=this.svgTitleElement=this.svgTitleElement||y.createElementNS("http://www.w3.org/2000/svg","title");C.textContent=_,C.id=v,x.renderTo.insertBefore(C,x.renderTo.firstChild)}}setSVGContainerLabel(){let x=this.chart,v=x.langFormat("accessibility.svgContainerLabel",{chartTitle:m(x)});x.renderer.box&&v.length&&x.renderer.box.setAttribute("aria-label",v)}setGraphicContainerAttrs(){let x=this.chart,v=x.langFormat("accessibility.graphicContainerLabel",{chartTitle:m(x)});v.length&&x.container.setAttribute("aria-label",v)}setRenderToAttrs(){let x=this.chart,v=x.options.accessibility.landmarkVerbosity!=="disabled",_=x.langFormat("accessibility.chartContainerLabel",{title:m(x),chart:x});_&&(x.renderTo.setAttribute("role",v?"region":"group"),x.renderTo.setAttribute("aria-label",_))}makeCreditsAccessible(){let x=this.chart,v=x.credits;v&&(v.textStr&&v.element.setAttribute("aria-label",x.langFormat("accessibility.credits",{creditsStr:g(v.textStr,x.renderer.forExport)})),p(x,v.element))}getKeyboardNavigation(){let x=this.chart;return new a(x,{keyCodeMap:[],validate:function(){return!0},init:function(){let v=x.accessibility;v&&v.keyboardNavigation.tabindexContainer.focus()}})}destroy(){this.chart.renderTo.setAttribute("aria-hidden",!0)}}}),r(t,"Accessibility/FocusBorder.js",[t["Core/Utilities.js"]],function(n){var a;let{addEvent:c,pick:s}=n;return function(h){let p=["x","y","transform","width","height","r","d","stroke-width"];function m(){let v=this.focusElement,_=this.options.accessibility.keyboardNavigation.focusBorder;v&&(v.removeFocusBorder(),_.enabled&&v.addFocusBorder(_.margin,{stroke:_.style.color,strokeWidth:_.style.lineWidth,r:_.style.borderRadius}))}function y(v,_){let C=this.options.accessibility.keyboardNavigation.focusBorder,k=_||v.element;k&&k.focus&&(k.hcEvents&&k.hcEvents.focusin||c(k,"focusin",function(){}),k.focus(),C.hideBrowserFocusOutline&&(k.style.outline="none")),this.focusElement&&this.focusElement.removeFocusBorder(),this.focusElement=v,this.renderFocusBorder()}function g(v,_){this.focusBorder&&this.removeFocusBorder();let C=this.getBBox(),k=s(v,3),w=this.parentGroup,E=this.scaleX||w&&w.scaleX,A=this.scaleY||w&&w.scaleY,M=(E?!A:A)?Math.abs(E||A||1):(Math.abs(E||1)+Math.abs(A||1))/2;C.x+=this.translateX?this.translateX:0,C.y+=this.translateY?this.translateY:0;let S=C.x-k,N=C.y-k,Y=C.width+2*k,Z=C.height+2*k,K=!!this.text;if(this.element.nodeName==="text"||K){let U,$,B=!!this.rotation,R=K?{x:B?1:0,y:0}:(U=0,$=0,this.attr("text-anchor")==="middle"?U=$=.5:this.rotation?U=.25:$=.75,{x:U,y:$}),L=+this.attr("x"),G=+this.attr("y");if(isNaN(L)||(S=L-C.width*R.x-k),isNaN(G)||(N=G-C.height*R.y-k),K&&B){let F=Y;Y=Z,Z=F,isNaN(L)||(S=L-C.height*R.x-k),isNaN(G)||(N=G-C.width*R.y-k)}}this.focusBorder=this.renderer.rect(S,N,Y,Z,parseInt((_&&_.r||0).toString(),10)/M).addClass("highcharts-focus-border").attr({zIndex:99}).add(w),this.renderer.styledMode||this.focusBorder.attr({stroke:_&&_.stroke,"stroke-width":(_&&_.strokeWidth||0)/M}),function(U,...$){U.focusBorderUpdateHooks||(U.focusBorderUpdateHooks={},p.forEach(B=>{let R=B+"Setter",L=U[R]||U._defaultSetter;U.focusBorderUpdateHooks[R]=L,U[R]=function(){let G=L.apply(U,arguments);return U.addFocusBorder.apply(U,$),G}}))}(this,v,_),function(U){if(U.focusBorderDestroyHook)return;let $=U.destroy;U.destroy=function(){return U.focusBorder&&U.focusBorder.destroy&&U.focusBorder.destroy(),$.apply(U,arguments)},U.focusBorderDestroyHook=$}(this)}function x(){var v;v=this,v.focusBorderUpdateHooks&&(Object.keys(v.focusBorderUpdateHooks).forEach(_=>{let C=v.focusBorderUpdateHooks[_];C===v._defaultSetter?delete v[_]:v[_]=C}),delete v.focusBorderUpdateHooks),this.focusBorderDestroyHook&&(this.destroy=this.focusBorderDestroyHook,delete this.focusBorderDestroyHook),this.focusBorder&&(this.focusBorder.destroy(),delete this.focusBorder)}h.compose=function(v,_){let C=v.prototype,k=_.prototype;C.renderFocusBorder||(C.renderFocusBorder=m,C.setFocusToElement=y),k.addFocusBorder||(k.addFocusBorder=g,k.removeFocusBorder=x)}}(a||(a={})),a}),r(t,"Accessibility/Utils/Announcer.js",[t["Core/Renderer/HTML/AST.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{doc:p}=c,{addClass:m,visuallyHideElement:y}=s,{attr:g}=h;return class{constructor(x,v){this.chart=x,this.domElementProvider=new a,this.announceRegion=this.addAnnounceRegion(v)}destroy(){this.domElementProvider.destroyCreatedElements()}announce(x){n.setElementHTML(this.announceRegion,x),this.clearAnnouncementRegionTimer&&clearTimeout(this.clearAnnouncementRegionTimer),this.clearAnnouncementRegionTimer=setTimeout(()=>{this.announceRegion.innerHTML=n.emptyHTML,delete this.clearAnnouncementRegionTimer},3e3)}addAnnounceRegion(x){let v=this.chart.announcerContainer||this.createAnnouncerContainer(),_=this.domElementProvider.createElement("div");return g(_,{"aria-hidden":!1,"aria-live":x,"aria-atomic":!0}),this.chart.styledMode?m(_,"highcharts-visually-hidden"):y(_),v.appendChild(_),_}createAnnouncerContainer(){let x=this.chart,v=p.createElement("div");return g(v,{"aria-hidden":!1,class:"highcharts-announcer-container"}),v.style.position="relative",x.renderTo.insertBefore(v,x.renderTo.firstChild),x.announcerContainer=v,v}}}),r(t,"Accessibility/Components/AnnotationsA11y.js",[t["Accessibility/Utils/HTMLUtilities.js"]],function(n){let{escapeStringForHTML:a,stripHTMLTagsFromString:c}=n;function s(y){return(y.annotations||[]).reduce((g,x)=>(x.options&&x.options.visible!==!1&&(g=g.concat(x.labels)),g),[])}function h(y){return y.options&&y.options.accessibility&&y.options.accessibility.description||y.graphic&&y.graphic.text&&y.graphic.text.textStr||""}function p(y){let g=y.options&&y.options.accessibility&&y.options.accessibility.description;if(g)return g;let x=y.chart,v=h(y),_=y.points,C=M=>M.graphic&&M.graphic.element&&M.graphic.element.getAttribute("aria-label")||"",k=_.filter(M=>!!M.graphic).map(M=>{let S=M.accessibility&&M.accessibility.valueDescription||C(M),N=M&&M.series.name||"";return(N?N+", ":"")+"data point "+S}).filter(M=>!!M),w=k.length,E=w>1?"MultiplePoints":w?"SinglePoint":"NoPoints",A={annotationText:v,annotation:y,numPoints:w,annotationPoint:k[0],additionalAnnotationPoints:k.slice(1)};return x.langFormat("accessibility.screenReaderSection.annotations.description"+E,A)}function m(y){return s(y).map(g=>{let x=a(c(p(g),y.renderer.forExport));return x?`<li>${x}</li>`:""})}return{getAnnotationsInfoHTML:function(y){let g=y.annotations;return g&&g.length?`<ul style="list-style-type: none">${m(y).join(" ")}</ul>`:""},getAnnotationLabelDescription:p,getAnnotationListItems:m,getPointAnnotationTexts:function(y){let g=s(y.series.chart).filter(x=>x.points.indexOf(y)>-1);return g.length?g.map(x=>`${h(x)}`):[]}}}),r(t,"Accessibility/Components/InfoRegionsComponent.js",[t["Accessibility/A11yI18n.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Components/AnnotationsA11y.js"],t["Core/Renderer/HTML/AST.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,p,m,y,g,x){let{getAnnotationsInfoHTML:v}=s,{getAxisDescription:_,getAxisRangeDescription:C,getChartTitle:k,unhideChartElementFromAT:w}=p,{format:E}=m,{doc:A}=y,{addClass:M,getElement:S,getHeadingTagNameForElement:N,stripHTMLTagsFromString:Y,visuallyHideElement:Z}=g,{attr:K,pick:U,replaceNested:$}=x;function B(R){return $(R,[/<([\w\-.:!]+)\b[^<>]*>\s*<\/\1>/g,""])}return class extends a{constructor(){super(...arguments),this.screenReaderSections={}}init(){let R=this.chart,L=this;this.initRegionsDefinitions(),this.addEvent(R,"aftergetTableAST",function(G){L.onDataTableCreated(G)}),this.addEvent(R,"afterViewData",function(G){G.wasHidden&&(L.dataTableDiv=G.element,setTimeout(function(){L.focusDataTable()},300))}),this.addEvent(R,"afterHideData",function(){L.viewDataTableButton&&L.viewDataTableButton.setAttribute("aria-expanded","false")}),R.exporting&&this.addEvent(R,"afterPrint",function(){L.updateAllScreenReaderSections()}),this.announcer=new c(R,"assertive")}initRegionsDefinitions(){let R=this,L=this.chart.options.accessibility;this.screenReaderSections={before:{element:null,buildContent:function(G){let F=L.screenReaderSection.beforeChartFormatter;return F?F(G):R.defaultBeforeChartFormatter(G)},insertIntoDOM:function(G,F){F.renderTo.insertBefore(G,F.renderTo.firstChild)},afterInserted:function(){R.sonifyButtonId!==void 0&&R.initSonifyButton(R.sonifyButtonId),R.dataTableButtonId!==void 0&&R.initDataTableButton(R.dataTableButtonId)}},after:{element:null,buildContent:function(G){let F=L.screenReaderSection.afterChartFormatter;return F?F(G):R.defaultAfterChartFormatter()},insertIntoDOM:function(G,F){F.renderTo.insertBefore(G,F.container.nextSibling)},afterInserted:function(){R.chart.accessibility&&L.keyboardNavigation.enabled&&R.chart.accessibility.keyboardNavigation.updateExitAnchor()}}}}onChartRender(){this.linkedDescriptionElement=this.getLinkedDescriptionElement(),this.setLinkedDescriptionAttrs(),this.updateAllScreenReaderSections()}updateAllScreenReaderSections(){let R=this;Object.keys(this.screenReaderSections).forEach(function(L){R.updateScreenReaderSection(L)})}getLinkedDescriptionElement(){let R=this.chart.options.accessibility.linkedDescription;if(!R)return;if(typeof R!="string")return R;let L=E(R,this.chart),G=A.querySelectorAll(L);if(G.length===1)return G[0]}setLinkedDescriptionAttrs(){let R=this.linkedDescriptionElement;R&&(R.setAttribute("aria-hidden","true"),M(R,"highcharts-linked-description"))}updateScreenReaderSection(R){let L=this.chart,G=this.screenReaderSections[R],F=G.buildContent(L),j=G.element=G.element||this.createElement("div"),q=j.firstChild||this.createElement("div");F?(this.setScreenReaderSectionAttribs(j,R),h.setElementHTML(q,F),j.appendChild(q),G.insertIntoDOM(j,L),L.styledMode?M(q,"highcharts-visually-hidden"):Z(q),w(L,q),G.afterInserted&&G.afterInserted()):(j.parentNode&&j.parentNode.removeChild(j),G.element=null)}setScreenReaderSectionAttribs(R,L){let G=this.chart,F=G.langFormat("accessibility.screenReaderSection."+L+"RegionLabel",{chart:G,chartTitle:k(G)});K(R,{id:`highcharts-screen-reader-region-${L}-${G.index}`,"aria-label":F||void 0}),R.style.position="relative",F&&R.setAttribute("role",G.options.accessibility.landmarkVerbosity==="all"?"region":"group")}defaultBeforeChartFormatter(){let R=this.chart,L=R.options.accessibility.screenReaderSection.beforeChartFormat;if(!L)return"";let G=this.getAxesDescription(),F=R.sonify&&R.options.sonification&&R.options.sonification.enabled,j="highcharts-a11y-sonify-data-btn-"+R.index,q="hc-linkto-highcharts-data-table-"+R.index,W=v(R),se=R.langFormat("accessibility.screenReaderSection.annotations.heading",{chart:R}),fe={headingTagName:N(R.renderTo),chartTitle:k(R),typeDescription:this.getTypeDescriptionText(),chartSubtitle:this.getSubtitleText(),chartLongdesc:this.getLongdescText(),xAxisDescription:G.xAxis,yAxisDescription:G.yAxis,playAsSoundButton:F?this.getSonifyButtonText(j):"",viewTableButton:R.getCSV?this.getDataTableButtonText(q):"",annotationsTitle:W?se:"",annotationsList:W},ee=n.i18nFormat(L,fe,R);return this.dataTableButtonId=q,this.sonifyButtonId=j,B(ee)}defaultAfterChartFormatter(){let R=this.chart,L=R.options.accessibility.screenReaderSection.afterChartFormat;if(!L)return"";let G={endOfChartMarker:this.getEndOfChartMarkerText()};return B(n.i18nFormat(L,G,R))}getLinkedDescription(){let R=this.linkedDescriptionElement;return Y(R&&R.innerHTML||"",this.chart.renderer.forExport)}getLongdescText(){let R=this.chart.options,L=R.caption,G=L&&L.text,F=this.getLinkedDescription();return R.accessibility.description||F||G||""}getTypeDescriptionText(){let R=this.chart;return R.types?R.options.accessibility.typeDescription||function(L,G){let F=G[0],j=L.series&&L.series[0]||{},q=L.mapView&&L.mapView.geoMap&&L.mapView.geoMap.title,W={numSeries:L.series.length,numPoints:j.points&&j.points.length,chart:L,mapTitle:q};return F?F==="map"||F==="tiledwebmap"?W.mapTitle?L.langFormat("accessibility.chartTypes.mapTypeDescription",W):L.langFormat("accessibility.chartTypes.unknownMap",W):L.types.length>1?L.langFormat("accessibility.chartTypes.combinationChart",W):function(se,fe,ee){let oe=fe[0],Ce=se.langFormat("accessibility.seriesTypeDescriptions."+oe,ee),ge=se.series&&se.series.length<2?"Single":"Multiple";return(se.langFormat("accessibility.chartTypes."+oe+ge,ee)||se.langFormat("accessibility.chartTypes.default"+ge,ee))+(Ce?" "+Ce:"")}(L,G,W):L.langFormat("accessibility.chartTypes.emptyChart",W)}(R,R.types):""}getDataTableButtonText(R){let L=this.chart;return'<button id="'+R+'">'+L.langFormat("accessibility.table.viewAsDataTableButtonText",{chart:L,chartTitle:k(L)})+"</button>"}getSonifyButtonText(R){let L=this.chart;return L.options.sonification&&L.options.sonification.enabled===!1?"":'<button id="'+R+'">'+L.langFormat("accessibility.sonification.playAsSoundButtonText",{chart:L,chartTitle:k(L)})+"</button>"}getSubtitleText(){let R=this.chart.options.subtitle;return Y(R&&R.text||"",this.chart.renderer.forExport)}getEndOfChartMarkerText(){let R=S(`highcharts-end-of-chart-marker-${this.chart.index}`);if(R)return R.outerHTML;let L=this.chart,G=L.langFormat("accessibility.screenReaderSection.endOfChartMarker",{chart:L});return'<div id="highcharts-end-of-chart-marker-'+L.index+'">'+G+"</div>"}onDataTableCreated(R){let L=this.chart;if(L.options.accessibility.enabled){this.viewDataTableButton&&this.viewDataTableButton.setAttribute("aria-expanded","true");let G=R.tree.attributes||{};G.tabindex=-1,G.summary=L.langFormat("accessibility.table.tableSummary",{chart:L}),R.tree.attributes=G}}focusDataTable(){let R=this.dataTableDiv,L=R&&R.getElementsByTagName("table")[0];L&&L.focus&&L.focus()}initSonifyButton(R){let L=this.sonifyButton=S(R),G=this.chart,F=j=>{L&&(L.setAttribute("aria-hidden","true"),L.setAttribute("aria-label","")),j.preventDefault(),j.stopPropagation();let q=G.langFormat("accessibility.sonification.playAsSoundClickAnnouncement",{chart:G});this.announcer.announce(q),setTimeout(()=>{L&&(L.removeAttribute("aria-hidden"),L.removeAttribute("aria-label")),G.sonify&&G.sonify()},1e3)};L&&G&&(L.setAttribute("tabindex",-1),L.onclick=function(j){(G.options.accessibility&&G.options.accessibility.screenReaderSection.onPlayAsSoundClick||F).call(this,j,G)})}initDataTableButton(R){let L=this.viewDataTableButton=S(R),G=this.chart,F=R.replace("hc-linkto-","");L&&(K(L,{tabindex:-1,"aria-expanded":!!S(F)}),L.onclick=G.options.accessibility.screenReaderSection.onViewDataTableClick||function(){G.viewData()})}getAxesDescription(){let R=this.chart,L=function(se,fe){let ee=R[se];return ee.length>1||ee[0]&&U(ee[0].options.accessibility&&ee[0].options.accessibility.enabled,fe)},G=!!R.types&&0>R.types.indexOf("map")&&0>R.types.indexOf("treemap")&&0>R.types.indexOf("tilemap"),F=!!R.hasCartesianSeries,j=L("xAxis",!R.angular&&F&&G),q=L("yAxis",F&&G),W={};return j&&(W.xAxis=this.getAxisDescriptionText("xAxis")),q&&(W.yAxis=this.getAxisDescriptionText("yAxis")),W}getAxisDescriptionText(R){let L=this.chart,G=L[R];return L.langFormat("accessibility.axis."+R+"Description"+(G.length>1?"Plural":"Singular"),{chart:L,names:G.map(function(F){return _(F)}),ranges:G.map(function(F){return C(F)}),numAxes:G.length})}destroy(){this.announcer&&this.announcer.destroy()}}}),r(t,"Accessibility/Components/MenuComponent.js",[t["Core/Utilities.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(n,a,c,s,h){let{attr:p}=n,{getChartTitle:m,unhideChartElementFromAT:y}=s,{getFakeMouseEvent:g}=h;function x(_){return _.exportSVGElements&&_.exportSVGElements[0]}class v extends a{init(){let C=this.chart,k=this;this.addEvent(C,"exportMenuShown",function(){k.onMenuShown()}),this.addEvent(C,"exportMenuHidden",function(){k.onMenuHidden()}),this.createProxyGroup()}onMenuHidden(){let C=this.chart.exportContextMenu;C&&C.setAttribute("aria-hidden","true"),this.setExportButtonExpandedState("false")}onMenuShown(){let C=this.chart,k=C.exportContextMenu;k&&(this.addAccessibleContextMenuAttribs(),y(C,k)),this.setExportButtonExpandedState("true")}setExportButtonExpandedState(C){this.exportButtonProxy&&this.exportButtonProxy.innerElement.setAttribute("aria-expanded",C)}onChartRender(){let C=this.chart,k=C.focusElement,w=C.accessibility;this.proxyProvider.clearGroup("chartMenu"),this.proxyMenuButton(),this.exportButtonProxy&&k&&k===C.exportingGroup&&(k.focusBorder?C.setFocusToElement(k,this.exportButtonProxy.innerElement):w&&w.keyboardNavigation.tabindexContainer.focus())}proxyMenuButton(){let C=this.chart,k=this.proxyProvider,w=x(C);(function(E){let A=E.options.exporting,M=x(E);return!!(A&&A.enabled!==!1&&A.accessibility&&A.accessibility.enabled&&M&&M.element)})(C)&&w&&(this.exportButtonProxy=k.addProxyElement("chartMenu",{click:w},"button",{"aria-label":C.langFormat("accessibility.exporting.menuButtonLabel",{chart:C,chartTitle:m(C)}),"aria-expanded":!1,title:C.options.lang.contextButtonTitle||null}))}createProxyGroup(){this.chart&&this.proxyProvider&&this.proxyProvider.addGroup("chartMenu")}addAccessibleContextMenuAttribs(){let C=this.chart,k=C.exportDivElements;if(k&&k.length){k.forEach(E=>{E&&(E.tagName!=="LI"||E.children&&E.children.length?E.setAttribute("aria-hidden","true"):E.setAttribute("tabindex",-1))});let w=k[0]&&k[0].parentNode;w&&p(w,{"aria-hidden":void 0,"aria-label":C.langFormat("accessibility.exporting.chartMenuLabel",{chart:C}),role:"list"})}}getKeyboardNavigation(){let C=this.keyCodes,k=this.chart,w=this;return new c(k,{keyCodeMap:[[[C.left,C.up],function(){return w.onKbdPrevious(this)}],[[C.right,C.down],function(){return w.onKbdNext(this)}],[[C.enter,C.space],function(){return w.onKbdClick(this)}]],validate:function(){return!!k.exporting&&k.options.exporting.enabled!==!1&&k.options.exporting.accessibility.enabled!==!1},init:function(){let E=w.exportButtonProxy,A=w.chart.exportingGroup;E&&A&&k.setFocusToElement(A,E.innerElement)},terminate:function(){k.hideExportMenu()}})}onKbdPrevious(C){let k=this.chart,w=k.options.accessibility,E=C.response,A=k.highlightedExportItemIx||0;for(;A--;)if(k.highlightExportItem(A))return E.success;return w.keyboardNavigation.wrapAround?(k.highlightLastExportItem(),E.success):E.prev}onKbdNext(C){let k=this.chart,w=k.options.accessibility,E=C.response;for(let A=(k.highlightedExportItemIx||0)+1;A<k.exportDivElements.length;++A)if(k.highlightExportItem(A))return E.success;return w.keyboardNavigation.wrapAround?(k.highlightExportItem(0),E.success):E.next}onKbdClick(C){let k=this.chart,w=k.exportDivElements[k.highlightedExportItemIx],E=x(k).element;return k.openMenu?this.fakeClickEvent(w):(this.fakeClickEvent(E),k.highlightExportItem(0)),C.response.success}}return function(_){function C(){let A=x(this);if(A){let M=A.element;M.onclick&&M.onclick(g("click"))}}function k(){let A=this.exportDivElements;A&&this.exportContextMenu&&this.openMenu&&(A.forEach(M=>{M&&M.className==="highcharts-menu-item"&&M.onmouseout&&M.onmouseout(g("mouseout"))}),this.highlightedExportItemIx=0,this.exportContextMenu.hideMenu(),this.container.focus())}function w(A){let M=this.exportDivElements&&this.exportDivElements[A],S=this.exportDivElements&&this.exportDivElements[this.highlightedExportItemIx];if(M&&M.tagName==="LI"&&!(M.children&&M.children.length)){let N=!!(this.renderTo.getElementsByTagName("g")[0]||{}).focus;return M.focus&&N&&M.focus(),S&&S.onmouseout&&S.onmouseout(g("mouseout")),M.onmouseover&&M.onmouseover(g("mouseover")),this.highlightedExportItemIx=A,!0}return!1}function E(){if(this.exportDivElements){let A=this.exportDivElements.length;for(;A--;)if(this.highlightExportItem(A))return!0}return!1}_.compose=function(A){let M=A.prototype;M.hideExportMenu||(M.hideExportMenu=k,M.highlightExportItem=w,M.highlightLastExportItem=E,M.showExportMenu=C)}}(v||(v={})),v}),r(t,"Accessibility/KeyboardNavigation.js",[t["Core/Globals.js"],t["Accessibility/Components/MenuComponent.js"],t["Core/Utilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(n,a,c,s,h){let{doc:p,win:m}=n,{addEvent:y,defined:g,fireEvent:x}=c,{getElement:v,simulatedEventTarget:_}=h;class C{constructor(w,E){this.currentModuleIx=NaN,this.modules=[],this.init(w,E)}init(w,E){let A=this.eventProvider=new s;this.chart=w,this.components=E,this.modules=[],this.currentModuleIx=0,this.update(),A.addEvent(this.tabindexContainer,"keydown",M=>this.onKeydown(M)),A.addEvent(this.tabindexContainer,"focus",M=>this.onFocus(M)),["mouseup","touchend"].forEach(M=>A.addEvent(p,M,S=>this.onMouseUp(S))),["mousedown","touchstart"].forEach(M=>A.addEvent(w.renderTo,M,()=>{this.isClickingChart=!0}))}update(w){let E=this.chart.options.accessibility,A=E&&E.keyboardNavigation,M=this.components;this.updateContainerTabindex(),A&&A.enabled&&w&&w.length?(this.modules=w.reduce(function(S,N){let Y=M[N].getKeyboardNavigation();return S.concat(Y)},[]),this.updateExitAnchor()):(this.modules=[],this.currentModuleIx=0,this.removeExitAnchor())}updateExitAnchor(){let w=v(`highcharts-end-of-chart-marker-${this.chart.index}`);this.removeExitAnchor(),w?(this.makeElementAnExitAnchor(w),this.exitAnchor=w):this.createExitAnchor()}move(w){let E=this.modules&&this.modules[this.currentModuleIx];E&&E.terminate&&E.terminate(w),this.chart.focusElement&&this.chart.focusElement.removeFocusBorder(),this.currentModuleIx+=w;let A=this.modules&&this.modules[this.currentModuleIx];if(A){if(A.validate&&!A.validate())return this.move(w);if(A.init)return A.init(w),!0}return this.currentModuleIx=0,this.exiting=!0,w>0?this.exitAnchor&&this.exitAnchor.focus():this.tabindexContainer.focus(),!1}onFocus(w){let E=this.chart,A=w.relatedTarget&&E.container.contains(w.relatedTarget),M=E.options.accessibility,S=M&&M.keyboardNavigation;if(S&&S.enabled&&!this.exiting&&!this.tabbingInBackwards&&!this.isClickingChart&&!A){let N=this.getFirstValidModuleIx();N!==null&&(this.currentModuleIx=N,this.modules[N].init(1))}this.keyboardReset=!1,this.exiting=!1}onMouseUp(w){if(delete this.isClickingChart,!this.keyboardReset&&w.relatedTarget!==_){let E=this.chart;if(!w.target||!E.container.contains(w.target)){let A=this.modules&&this.modules[this.currentModuleIx||0];A&&A.terminate&&A.terminate(),this.currentModuleIx=0}E.focusElement&&(E.focusElement.removeFocusBorder(),delete E.focusElement),this.keyboardReset=!0}}onKeydown(w){let E,A=w||m.event,M=this.modules&&this.modules.length&&this.modules[this.currentModuleIx],S=A.target;if((!S||S.nodeName!=="INPUT"||S.classList.contains("highcharts-a11y-proxy-element"))&&(this.keyboardReset=!1,this.exiting=!1,M)){let N=M.run(A);N===M.response.success?E=!0:N===M.response.prev?E=this.move(-1):N===M.response.next&&(E=this.move(1)),E&&(A.preventDefault(),A.stopPropagation())}}updateContainerTabindex(){let w,E=this.chart.options.accessibility,A=E&&E.keyboardNavigation,M=!(A&&A.enabled===!1),S=this.chart,N=S.container;S.renderTo.hasAttribute("tabindex")?(N.removeAttribute("tabindex"),w=S.renderTo):w=N,this.tabindexContainer=w;let Y=w.getAttribute("tabindex");M&&!Y?w.setAttribute("tabindex","0"):M||S.container.removeAttribute("tabindex")}createExitAnchor(){let w=this.chart,E=this.exitAnchor=p.createElement("div");w.renderTo.appendChild(E),this.makeElementAnExitAnchor(E)}makeElementAnExitAnchor(w){let E=this.tabindexContainer.getAttribute("tabindex")||0;w.setAttribute("class","highcharts-exit-anchor"),w.setAttribute("tabindex",E),w.setAttribute("aria-hidden",!1),this.addExitAnchorEventsToEl(w)}removeExitAnchor(){if(this.exitAnchor){let w=this.eventProvider.eventRemovers.find(E=>E.element===this.exitAnchor);w&&g(w.remover)&&this.eventProvider.removeEvent(w.remover),this.exitAnchor.parentNode&&this.exitAnchor.parentNode.removeChild(this.exitAnchor),delete this.exitAnchor}}addExitAnchorEventsToEl(w){let E=this.chart,A=this;this.eventProvider.addEvent(w,"focus",function(M){let S=M||m.event,N=!(S.relatedTarget&&E.container.contains(S.relatedTarget)||A.exiting);if(E.focusElement&&delete E.focusElement,N){if(A.tabbingInBackwards=!0,A.tabindexContainer.focus(),delete A.tabbingInBackwards,S.preventDefault(),A.modules&&A.modules.length){A.currentModuleIx=A.modules.length-1;let Y=A.modules[A.currentModuleIx];Y&&Y.validate&&!Y.validate()?A.move(-1):Y&&Y.init(-1)}}else A.exiting=!1})}getFirstValidModuleIx(){let w=this.modules.length;for(let E=0;E<w;++E){let A=this.modules[E];if(!A.validate||A.validate())return E}return null}destroy(){this.removeExitAnchor(),this.eventProvider.removeAddedEvents(),this.chart.container.removeAttribute("tabindex")}}return function(k){function w(){let A=this;x(this,"dismissPopupContent",{},function(){A.tooltip&&A.tooltip.hide(0),A.hideExportMenu()})}function E(A){(A.which||A.keyCode)===27&&n.charts&&n.charts.forEach(M=>{M&&M.dismissPopupContent&&M.dismissPopupContent()})}k.compose=function(A){a.compose(A);let M=A.prototype;return M.dismissPopupContent||(M.dismissPopupContent=w,y(p,"keydown",E)),A}}(C||(C={})),C}),r(t,"Accessibility/Components/LegendComponent.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Legend/Legend.js"],t["Core/Utilities.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(n,a,c,s,h,p,m,y){let{animObject:g}=n,{doc:x}=a,{addEvent:v,fireEvent:_,isNumber:C,pick:k,syncTimeout:w}=s,{getChartTitle:E}=m,{stripHTMLTagsFromString:A,addClass:M,removeClass:S}=y;function N(K){let U=K.legend&&K.legend.allItems,$=K.options.legend.accessibility||{},B=K.colorAxis&&K.colorAxis.some(R=>!R.dataClasses||!R.dataClasses.length);return!!(U&&U.length&&!B&&$.enabled!==!1)}function Y(K,U){let $=U.legendItem||{};for(let B of(U.setState(K?"hover":"",!0),["group","label","symbol"])){let R=$[B],L=R&&R.element||R;L&&_(L,K?"mouseover":"mouseout")}}class Z extends h{constructor(){super(...arguments),this.highlightedLegendItemIx=NaN,this.proxyGroup=null}init(){let U=this;this.recreateProxies(),this.addEvent(c,"afterScroll",function(){this.chart===U.chart&&(U.proxyProvider.updateGroupProxyElementPositions("legend"),U.updateLegendItemProxyVisibility(),U.highlightedLegendItemIx>-1&&this.chart.highlightLegendItem(U.highlightedLegendItemIx))}),this.addEvent(c,"afterPositionItem",function($){this.chart===U.chart&&this.chart.renderer&&U.updateProxyPositionForItem($.item)}),this.addEvent(c,"afterRender",function(){this.chart===U.chart&&this.chart.renderer&&U.recreateProxies()&&w(()=>U.proxyProvider.updateGroupProxyElementPositions("legend"),g(k(this.chart.renderer.globalAnimation,!0)).duration)})}updateLegendItemProxyVisibility(){let U,$=this.chart,B=$.legend,R=B.allItems||[],L=B.currentPage||1,G=B.clipHeight||0;R.forEach(F=>{if(F.a11yProxyElement){let j=B.pages&&B.pages.length,q=F.a11yProxyElement.element,W=!1;if(U=F.legendItem||{},j){let se=U.pageIx||0;W=(U.y||0)+(U.label?Math.round(U.label.getBBox().height):0)-B.pages[se]>G||se!==L-1}W?$.styledMode?M(q,"highcharts-a11y-invisible"):q.style.visibility="hidden":(S(q,"highcharts-a11y-invisible"),q.style.visibility="")}})}onChartRender(){N(this.chart)||this.removeProxies()}highlightAdjacentLegendPage(U){let $=this.chart,B=$.legend,R=(B.currentPage||1)+U,L=B.pages||[];if(R>0&&R<=L.length){let G=0;for(let F of B.allItems)((F.legendItem||{}).pageIx||0)+1===R&&$.highlightLegendItem(G)&&(this.highlightedLegendItemIx=G),++G}}updateProxyPositionForItem(U){U.a11yProxyElement&&U.a11yProxyElement.refreshPosition()}recreateProxies(){let U=x.activeElement,$=this.proxyGroup,B=U&&$&&$.contains(U);return this.removeProxies(),!!N(this.chart)&&(this.addLegendProxyGroup(),this.proxyLegendItems(),this.updateLegendItemProxyVisibility(),this.updateLegendTitle(),B&&this.chart.highlightLegendItem(this.highlightedLegendItemIx),!0)}removeProxies(){this.proxyProvider.removeGroup("legend")}updateLegendTitle(){let U=this.chart,$=A((U.legend&&U.legend.options.title&&U.legend.options.title.text||"").replace(/<br ?\/?>/g," "),U.renderer.forExport),B=U.langFormat("accessibility.legend.legendLabel"+($?"":"NoTitle"),{chart:U,legendTitle:$,chartTitle:E(U)});this.proxyProvider.updateGroupAttrs("legend",{"aria-label":B})}addLegendProxyGroup(){let U=this.chart.options.accessibility.landmarkVerbosity==="all"?"region":null;this.proxyGroup=this.proxyProvider.addGroup("legend","ul",{"aria-label":"_placeholder_",role:U})}proxyLegendItems(){let U,$=this;((this.chart.legend||{}).allItems||[]).forEach(B=>{(U=B.legendItem||{}).label&&U.label.element&&$.proxyLegendItem(B)})}proxyLegendItem(U){let $=U.legendItem||{};if(!$.label||!$.group)return;let B=this.chart.langFormat("accessibility.legend.legendItem",{chart:this.chart,itemName:A(U.name,this.chart.renderer.forExport),item:U}),R={tabindex:-1,"aria-pressed":U.visible,"aria-label":B},L=$.group.div?$.label:$.group;U.a11yProxyElement=this.proxyProvider.addProxyElement("legend",{click:$.label,visual:L.element},"button",R)}getKeyboardNavigation(){let U=this.keyCodes,$=this,B=this.chart;return new p(B,{keyCodeMap:[[[U.left,U.right,U.up,U.down],function(R){return $.onKbdArrowKey(this,R)}],[[U.enter,U.space],function(){return $.onKbdClick(this)}],[[U.pageDown,U.pageUp],function(R){let L=R===U.pageDown?1:-1;return $.highlightAdjacentLegendPage(L),this.response.success}]],validate:function(){return $.shouldHaveLegendNavigation()},init:function(){B.highlightLegendItem(0),$.highlightedLegendItemIx=0},terminate:function(){$.highlightedLegendItemIx=-1,B.legend.allItems.forEach(R=>Y(!1,R))}})}onKbdArrowKey(U,$){let{keyCodes:{left:B,up:R},highlightedLegendItemIx:L,chart:G}=this,F=G.legend.allItems.length,j=G.options.accessibility.keyboardNavigation.wrapAround,q=$===B||$===R?-1:1;return G.highlightLegendItem(L+q)?this.highlightedLegendItemIx+=q:j&&F>1&&(this.highlightedLegendItemIx=q>0?0:F-1,G.highlightLegendItem(this.highlightedLegendItemIx)),U.response.success}onKbdClick(U){let $=this.chart.legend.allItems[this.highlightedLegendItemIx];return $&&$.a11yProxyElement&&$.a11yProxyElement.click(),U.response.success}shouldHaveLegendNavigation(){if(!N(this.chart))return!1;let U=this.chart,$=(U.options.legend||{}).accessibility||{};return!!(U.legend.display&&$.keyboardNavigation&&$.keyboardNavigation.enabled)}destroy(){this.removeProxies()}}return function(K){function U(B){let R=this.legend.allItems,L=this.accessibility&&this.accessibility.components.legend.highlightedLegendItemIx,G=R[B],F=(G==null?void 0:G.legendItem)||{};if(G){C(L)&&R[L]&&Y(!1,R[L]),function(W,se){let fe=(W.allItems[se].legendItem||{}).pageIx,ee=W.currentPage;fe!==void 0&&fe+1!==ee&&W.scroll(1+fe-ee)}(this.legend,B);let j=F.label,q=G.a11yProxyElement&&G.a11yProxyElement.innerElement;return j&&j.element&&q&&this.setFocusToElement(j,q),Y(!0,G),!0}return!1}function $(B){let R=this.chart.options.accessibility,L=B.item;R.enabled&&L&&L.a11yProxyElement&&L.a11yProxyElement.innerElement.setAttribute("aria-pressed",B.visible?"true":"false")}K.compose=function(B,R){let L=B.prototype;L.highlightLegendItem||(L.highlightLegendItem=U,v(R,"afterColorizeItem",$))}}(Z||(Z={})),Z}),r(t,"Stock/Navigator/ChartNavigatorComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let c,{isTouchDevice:s}=n,{addEvent:h,merge:p,pick:m}=a,y=[];function g(){this.navigator&&this.navigator.setBaseSeries(null,!1)}function x(){var Y;let E,A,M,S=this.legend,N=this.navigator;if(N){E=S&&S.options,A=N.xAxis,M=N.yAxis;let{scrollbarHeight:Z,scrollButtonSize:K}=N;this.inverted?(N.left=N.opposite?this.chartWidth-Z-N.height:this.spacing[3]+Z,N.top=this.plotTop+K):(N.left=m(A.left,this.plotLeft+K),N.top=N.navigatorOptions.top||this.chartHeight-N.height-Z-(((Y=this.scrollbar)==null?void 0:Y.options.margin)||0)-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(E&&E.verticalAlign==="bottom"&&E.layout!=="proximate"&&E.enabled&&!E.floating?S.legendHeight+m(E.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)),A&&M&&(this.inverted?A.options.left=M.options.left=N.left:A.options.top=M.options.top=N.top,A.setAxisSize(),M.setAxisSize())}}function v(E){!this.navigator&&!this.scroller&&(this.options.navigator.enabled||this.options.scrollbar.enabled)&&(this.scroller=this.navigator=new c(this),m(E.redraw,!0)&&this.redraw(E.animation))}function _(){let E=this.options;(E.navigator.enabled||E.scrollbar.enabled)&&(this.scroller=this.navigator=new c(this))}function C(){let E=this.options,A=E.navigator,M=E.rangeSelector;if((A&&A.enabled||M&&M.enabled)&&(!s&&this.zooming.type==="x"||s&&this.zooming.pinchType==="x"))return!1}function k(E){let A=E.navigator;if(A&&E.xAxis[0]){let M=E.xAxis[0].getExtremes();A.render(M.min,M.max)}}function w(E){let A=E.options.navigator||{},M=E.options.scrollbar||{};!this.navigator&&!this.scroller&&(A.enabled||M.enabled)&&(p(!0,this.options.navigator,A),p(!0,this.options.scrollbar,M),delete E.options.navigator,delete E.options.scrollbar)}return{compose:function(E,A){if(a.pushUnique(y,E)){let M=E.prototype;c=A,M.callbacks.push(k),h(E,"afterAddSeries",g),h(E,"afterSetChartSize",x),h(E,"afterUpdate",v),h(E,"beforeRender",_),h(E,"beforeShowResetZoom",C),h(E,"update",w)}}}}),r(t,"Core/Axis/NavigatorAxisComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let{isTouchDevice:c}=n,{addEvent:s,correctFloat:h,defined:p,isNumber:m,pick:y}=a;function g(){this.navigatorAxis||(this.navigatorAxis=new v(this))}function x(_){let C,k=this.chart,w=k.options,E=w.navigator,A=this.navigatorAxis,M=k.zooming.pinchType,S=w.rangeSelector,N=k.zooming.type;if(this.isXAxis&&(E!=null&&E.enabled||S!=null&&S.enabled)){if(N==="y"&&_.trigger==="zoom")C=!1;else if((_.trigger==="zoom"&&N==="xy"||c&&M==="xy")&&this.options.range){let Y=A.previousZoom;p(_.min)?A.previousZoom=[this.min,this.max]:Y&&(_.min=Y[0],_.max=Y[1],A.previousZoom=void 0)}}C!==void 0&&_.preventDefault()}class v{static compose(C){C.keepProps.includes("navigatorAxis")||(C.keepProps.push("navigatorAxis"),s(C,"init",g),s(C,"setExtremes",x))}constructor(C){this.axis=C}destroy(){this.axis=void 0}toFixedRange(C,k,w,E){let A=this.axis,M=(A.pointRange||0)/2,S=y(w,A.translate(C,!0,!A.horiz)),N=y(E,A.translate(k,!0,!A.horiz));return p(w)||(S=h(S+M)),p(E)||(N=h(N-M)),m(S)&&m(N)||(S=N=void 0),{min:S,max:N}}}return v}),r(t,"Stock/Navigator/NavigatorDefaults.js",[t["Core/Color/Color.js"],t["Core/Series/SeriesRegistry.js"]],function(n,a){let{parse:c}=n,{seriesTypes:s}=a;return{height:40,margin:25,maskInside:!0,handles:{width:7,borderRadius:0,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:c("#667aff").setOpacity(.3).get(),outlineColor:"#999999",outlineWidth:1,series:{type:s.areaspline===void 0?"line":"areaspline",fillOpacity:.05,lineWidth:1,compare:null,sonification:{enabled:!1},dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,firstAnchor:"firstPoint",anchor:"middle",lastAnchor:"lastPoint",units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2,3,4]],["week",[1,2,3]],["month",[1,3,6]],["year",null]]},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},threshold:null},xAxis:{className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",id:"navigator-x-axis",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#000000",fontSize:"0.7em",opacity:.6,textOutline:"2px contrast"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,id:"navigator-y-axis",maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}}}),r(t,"Stock/Navigator/NavigatorSymbols.js",[t["Core/Renderer/SVG/Symbols.js"],t["Core/Utilities.js"]],function(n,a){let{relativeLength:c}=a;return{"navigator-handle":function(s,h,p,m,y={}){let g=y.width?y.width/2:p,x=c(y.borderRadius||0,Math.min(2*g,m));return[["M",-1.5,(m=y.height||m)/2-3.5],["L",-1.5,m/2+4.5],["M",.5,m/2-3.5],["L",.5,m/2+4.5],...n.rect(-g-1,.5,2*g+1,m,{r:x})]}}}),r(t,"Stock/Utilities/StockUtilities.js",[t["Core/Utilities.js"]],function(n){let{defined:a}=n;return{setFixedRange:function(c){let s=this.xAxis[0];a(s.dataMax)&&a(s.dataMin)&&c?this.fixedRange=Math.min(c,s.dataMax-s.dataMin):this.fixedRange=c}}}),r(t,"Stock/Navigator/NavigatorComposition.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorDefaults.js"],t["Stock/Navigator/NavigatorSymbols.js"],t["Core/Renderer/RendererRegistry.js"],t["Stock/Utilities/StockUtilities.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,p,m,y){let{setOptions:g}=n,{composed:x}=a,{getRendererType:v}=p,{setFixedRange:_}=m,{addEvent:C,extend:k,pushUnique:w}=y;function E(){this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1)}return{compose:function(A,M,S){c.compose(M),w(x,"Navigator")&&(A.prototype.setFixedRange=_,k(v().prototype.symbols,h),C(S,"afterUpdate",E),g({navigator:s}))}}}),r(t,"Core/Axis/ScrollbarAxis.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){var c;let{composed:s}=n,{addEvent:h,defined:p,pick:m,pushUnique:y}=a;return function(g){let x;function v(w){let E=m(w.options&&w.options.min,w.min),A=m(w.options&&w.options.max,w.max);return{axisMin:E,axisMax:A,scrollMin:p(w.dataMin)?Math.min(E,w.min,w.dataMin,m(w.threshold,1/0)):E,scrollMax:p(w.dataMax)?Math.max(A,w.max,w.dataMax,m(w.threshold,-1/0)):A}}function _(){let w=this.scrollbar,E=w&&!w.options.opposite,A=this.horiz?2:E?3:1;w&&(this.chart.scrollbarsOffsets=[0,0],this.chart.axisOffset[A]+=w.size+(w.options.margin||0))}function C(){let w=this;w.options&&w.options.scrollbar&&w.options.scrollbar.enabled&&(w.options.scrollbar.vertical=!w.horiz,w.options.startOnTick=w.options.endOnTick=!1,w.scrollbar=new x(w.chart.renderer,w.options.scrollbar,w.chart),h(w.scrollbar,"changed",function(E){let A,M,{axisMin:S,axisMax:N,scrollMin:Y,scrollMax:Z}=v(w),K=Z-Y;if(p(S)&&p(N))if(w.horiz&&!w.reversed||!w.horiz&&w.reversed?(A=Y+K*this.to,M=Y+K*this.from):(A=Y+K*(1-this.from),M=Y+K*(1-this.to)),this.shouldUpdateExtremes(E.DOMType)){let U=E.DOMType!=="mousemove"&&E.DOMType!=="touchmove"&&void 0;w.setExtremes(M,A,!0,U,E)}else this.setRange(this.from,this.to)}))}function k(){let w,E,A,{scrollMin:M,scrollMax:S}=v(this),N=this.scrollbar,Y=this.axisTitleMargin+(this.titleOffset||0),Z=this.chart.scrollbarsOffsets,K=this.options.margin||0;if(N&&Z){if(this.horiz)this.opposite||(Z[1]+=Y),N.position(this.left,this.top+this.height+2+Z[1]-(this.opposite?K:0),this.width,this.height),this.opposite||(Z[1]+=K),w=1;else{let U;this.opposite&&(Z[0]+=Y),U=N.options.opposite?this.left+this.width+2+Z[0]-(this.opposite?0:K):this.opposite?0:K,N.position(U,this.top,this.width,this.height),this.opposite&&(Z[0]+=K),w=0}if(Z[w]+=N.size+(N.options.margin||0),isNaN(M)||isNaN(S)||!p(this.min)||!p(this.max)||this.dataMin===this.dataMax)N.setRange(0,1);else if(this.min===this.max){let U=this.pointRange/(this.dataMax+1);E=U*this.min,A=U*(this.max+1),N.setRange(E,A)}else E=(this.min-M)/(S-M),A=(this.max-M)/(S-M),this.horiz&&!this.reversed||!this.horiz&&this.reversed?N.setRange(E,A):N.setRange(1-A,1-E)}}g.compose=function(w,E){y(s,"Axis.Scrollbar")&&(x=E,h(w,"afterGetOffset",_),h(w,"afterInit",C),h(w,"afterRender",k))}}(c||(c={})),c}),r(t,"Stock/Scrollbar/ScrollbarDefaults.js",[],function(){return{height:10,barBorderRadius:5,buttonBorderRadius:0,buttonsEnabled:!1,liveRedraw:void 0,margin:void 0,minWidth:6,opposite:!0,step:.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:0,barBorderColor:"#cccccc",buttonArrowColor:"#333333",buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"none",trackBackgroundColor:"rgba(255, 255, 255, 0.001)",trackBorderColor:"#cccccc",trackBorderRadius:5,trackBorderWidth:1}}),r(t,"Stock/Scrollbar/Scrollbar.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/ScrollbarAxis.js"],t["Stock/Scrollbar/ScrollbarDefaults.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{defaultOptions:p}=n,{addEvent:m,correctFloat:y,crisp:g,defined:x,destroyObjectProperties:v,fireEvent:_,merge:C,pick:k,removeEvent:w}=h;class E{static compose(M){c.compose(M,E)}static swapXY(M,S){return S&&M.forEach(N=>{let Y,Z=N.length;for(let K=0;K<Z;K+=2)typeof(Y=N[K+1])=="number"&&(N[K+1]=N[K+2],N[K+2]=Y)}),M}constructor(M,S,N){this._events=[],this.chartX=0,this.chartY=0,this.from=0,this.scrollbarButtons=[],this.scrollbarLeft=0,this.scrollbarStrokeWidth=1,this.scrollbarTop=0,this.size=0,this.to=0,this.trackBorderWidth=1,this.x=0,this.y=0,this.init(M,S,N)}addEvents(){let M=this.options.inverted?[1,0]:[0,1],S=this.scrollbarButtons,N=this.scrollbarGroup.element,Y=this.track.element,Z=this.mouseDownHandler.bind(this),K=this.mouseMoveHandler.bind(this),U=this.mouseUpHandler.bind(this),$=[[S[M[0]].element,"click",this.buttonToMinClick.bind(this)],[S[M[1]].element,"click",this.buttonToMaxClick.bind(this)],[Y,"click",this.trackClick.bind(this)],[N,"mousedown",Z],[N.ownerDocument,"mousemove",K],[N.ownerDocument,"mouseup",U],[N,"touchstart",Z],[N.ownerDocument,"touchmove",K],[N.ownerDocument,"touchend",U]];$.forEach(function(B){m.apply(null,B)}),this._events=$}buttonToMaxClick(M){let S=(this.to-this.from)*k(this.options.step,.2);this.updatePosition(this.from+S,this.to+S),_(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:M})}buttonToMinClick(M){let S=y(this.to-this.from)*k(this.options.step,.2);this.updatePosition(y(this.from-S),y(this.to-S)),_(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:M})}cursorToScrollbarPosition(M){let S=this.options,N=S.minWidth>this.calculatedWidth?S.minWidth:0;return{chartX:(M.chartX-this.x-this.xOffset)/(this.barWidth-N),chartY:(M.chartY-this.y-this.yOffset)/(this.barWidth-N)}}destroy(){let M=this,S=M.chart.scroller;M.removeEvents(),["track","scrollbarRifles","scrollbar","scrollbarGroup","group"].forEach(function(N){M[N]&&M[N].destroy&&(M[N]=M[N].destroy())}),S&&M===S.scrollbar&&(S.scrollbar=null,v(S.scrollbarButtons))}drawScrollbarButton(M){let S=this.renderer,N=this.scrollbarButtons,Y=this.options,Z=this.size,K=S.g().add(this.group);if(N.push(K),Y.buttonsEnabled){let U=S.rect().addClass("highcharts-scrollbar-button").add(K);this.chart.styledMode||U.attr({stroke:Y.buttonBorderColor,"stroke-width":Y.buttonBorderWidth,fill:Y.buttonBackgroundColor}),U.attr(U.crisp({x:-.5,y:-.5,width:Z,height:Z,r:Y.buttonBorderRadius},U.strokeWidth()));let $=S.path(E.swapXY([["M",Z/2+(M?-1:1),Z/2-3],["L",Z/2+(M?-1:1),Z/2+3],["L",Z/2+(M?2:-2),Z/2]],Y.vertical)).addClass("highcharts-scrollbar-arrow").add(N[M]);this.chart.styledMode||$.attr({fill:Y.buttonArrowColor})}}init(M,S,N){this.scrollbarButtons=[],this.renderer=M,this.userOptions=S,this.options=C(s,p.scrollbar,S),this.options.margin=k(this.options.margin,10),this.chart=N,this.size=k(this.options.size,this.options.height),S.enabled&&(this.render(),this.addEvents())}mouseDownHandler(M){var Y;let S=((Y=this.chart.pointer)==null?void 0:Y.normalize(M))||M,N=this.cursorToScrollbarPosition(S);this.chartX=N.chartX,this.chartY=N.chartY,this.initPositions=[this.from,this.to],this.grabbedCenter=!0}mouseMoveHandler(M){var K;let S,N=((K=this.chart.pointer)==null?void 0:K.normalize(M))||M,Y=this.options.vertical?"chartY":"chartX",Z=this.initPositions||[];this.grabbedCenter&&(!M.touches||M.touches[0][Y]!==0)&&(S=this.cursorToScrollbarPosition(N)[Y]-this[Y],this.hasDragged=!0,this.updatePosition(Z[0]+S,Z[1]+S),this.hasDragged&&_(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:M.type,DOMEvent:M}))}mouseUpHandler(M){this.hasDragged&&_(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:M.type,DOMEvent:M}),this.grabbedCenter=this.hasDragged=this.chartX=this.chartY=null}position(M,S,N,Y){let{buttonsEnabled:Z,margin:K=0,vertical:U}=this.options,$=this.rendered?"animate":"attr",B=Y,R=0;this.group.show(),this.x=M,this.y=S+this.trackBorderWidth,this.width=N,this.height=Y,this.xOffset=B,this.yOffset=R,U?(this.width=this.yOffset=N=R=this.size,this.xOffset=B=0,this.yOffset=R=Z?this.size:0,this.barWidth=Y-(Z?2*N:0),this.x=M+=K):(this.height=Y=this.size,this.xOffset=B=Z?this.size:0,this.barWidth=N-(Z?2*Y:0),this.y=this.y+K),this.group[$]({translateX:M,translateY:this.y}),this.track[$]({width:N,height:Y}),this.scrollbarButtons[1][$]({translateX:U?0:N-B,translateY:U?Y-R:0})}removeEvents(){this._events.forEach(function(M){w.apply(null,M)}),this._events.length=0}render(){let M=this.renderer,S=this.options,N=this.size,Y=this.chart.styledMode,Z=M.g("scrollbar").attr({zIndex:S.zIndex}).hide().add();this.group=Z,this.track=M.rect().addClass("highcharts-scrollbar-track").attr({r:S.trackBorderRadius||0,height:N,width:N}).add(Z),Y||this.track.attr({fill:S.trackBackgroundColor,stroke:S.trackBorderColor,"stroke-width":S.trackBorderWidth});let K=this.trackBorderWidth=this.track.strokeWidth();this.track.attr({x:-g(0,K),y:-g(0,K)}),this.scrollbarGroup=M.g().add(Z),this.scrollbar=M.rect().addClass("highcharts-scrollbar-thumb").attr({height:N-K,width:N-K,r:S.barBorderRadius||0}).add(this.scrollbarGroup),this.scrollbarRifles=M.path(E.swapXY([["M",-3,N/4],["L",-3,2*N/3],["M",0,N/4],["L",0,2*N/3],["M",3,N/4],["L",3,2*N/3]],S.vertical)).addClass("highcharts-scrollbar-rifles").add(this.scrollbarGroup),Y||(this.scrollbar.attr({fill:S.barBackgroundColor,stroke:S.barBorderColor,"stroke-width":S.barBorderWidth}),this.scrollbarRifles.attr({stroke:S.rifleColor,"stroke-width":1})),this.scrollbarStrokeWidth=this.scrollbar.strokeWidth(),this.scrollbarGroup.translate(-g(0,this.scrollbarStrokeWidth),-g(0,this.scrollbarStrokeWidth)),this.drawScrollbarButton(0),this.drawScrollbarButton(1)}setRange(M,S){let N,Y,Z=this.options,K=Z.vertical,U=Z.minWidth,$=this.barWidth,B=!this.rendered||this.hasDragged||this.chart.navigator&&this.chart.navigator.hasDragged?"attr":"animate";if(!x($))return;let R=$*Math.min(S,1);N=Math.ceil($*(M=Math.max(M,0))),this.calculatedWidth=Y=y(R-N),Y<U&&(N=($-U+Y)*M,Y=U);let L=Math.floor(N+this.xOffset+this.yOffset),G=Y/2-.5;this.from=M,this.to=S,K?(this.scrollbarGroup[B]({translateY:L}),this.scrollbar[B]({height:Y}),this.scrollbarRifles[B]({translateY:G}),this.scrollbarTop=L,this.scrollbarLeft=0):(this.scrollbarGroup[B]({translateX:L}),this.scrollbar[B]({width:Y}),this.scrollbarRifles[B]({translateX:G}),this.scrollbarLeft=L,this.scrollbarTop=0),Y<=12?this.scrollbarRifles.hide():this.scrollbarRifles.show(),Z.showFull===!1&&(M<=0&&S>=1?this.group.hide():this.group.show()),this.rendered=!0}shouldUpdateExtremes(M){return k(this.options.liveRedraw,a.svg&&!a.isTouchDevice&&!this.chart.boosted)||M==="mouseup"||M==="touchend"||!x(M)}trackClick(M){var K;let S=((K=this.chart.pointer)==null?void 0:K.normalize(M))||M,N=this.to-this.from,Y=this.y+this.scrollbarTop,Z=this.x+this.scrollbarLeft;this.options.vertical&&S.chartY>Y||!this.options.vertical&&S.chartX>Z?this.updatePosition(this.from+N,this.to+N):this.updatePosition(this.from-N,this.to-N),_(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:M})}update(M){this.destroy(),this.init(this.chart.renderer,C(!0,this.options,M),this.chart)}updatePosition(M,S){S>1&&(M=y(1-y(S-M)),S=1),M<0&&(S=y(S-M),M=0),this.from=M,this.to=S}}return E.defaultOptions=s,p.scrollbar=C(!0,E.defaultOptions,p.scrollbar),E}),r(t,"Stock/Navigator/Navigator.js",[t["Core/Axis/Axis.js"],t["Stock/Navigator/ChartNavigatorComposition.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorComposition.js"],t["Stock/Scrollbar/Scrollbar.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,p,m,y,g){let{defaultOptions:x}=c,{isTouchDevice:v}=s,{prototype:{symbols:_}}=y,{addEvent:C,clamp:k,correctFloat:w,defined:E,destroyObjectProperties:A,erase:M,extend:S,find:N,fireEvent:Y,isArray:Z,isNumber:K,merge:U,pick:$,removeEvent:B,splat:R}=g;function L(F,...j){let q=[].filter.call(j,K);if(q.length)return Math[F].apply(0,q)}class G{static compose(j,q,W){a.compose(j,G),p.compose(j,q,W)}constructor(j){this.isDirty=!1,this.scrollbarHeight=0,this.init(j)}drawHandle(j,q,W,se){let fe=this.navigatorOptions.handles.height;this.handles[q][se](W?{translateX:Math.round(this.left+this.height/2),translateY:Math.round(this.top+parseInt(j,10)+.5-fe)}:{translateX:Math.round(this.left+parseInt(j,10)),translateY:Math.round(this.top+this.height/2-fe/2-1)})}drawOutline(j,q,W,se){let fe=this.navigatorOptions.maskInside,ee=this.outline.strokeWidth(),oe=ee/2,Ce=ee%2/2,ge=this.scrollButtonSize,Ee=this.size,J=this.top,ie=this.height,le=J-oe,be=J+ie,te=this.left,ae,ce;W?(ae=J+q+Ce,q=J+j+Ce,ce=[["M",te+ie,J-ge-Ce],["L",te+ie,ae],["L",te,ae],["M",te,q],["L",te+ie,q],["L",te+ie,J+Ee+ge]],fe&&ce.push(["M",te+ie,ae-oe],["L",te+ie,q+oe])):(te-=ge,j+=te+ge-Ce,q+=te+ge-Ce,ce=[["M",te,le],["L",j,le],["L",j,be],["M",q,be],["L",q,le],["L",te+Ee+2*ge,le]],fe&&ce.push(["M",j-oe,le],["L",q+oe,le])),this.outline[se]({d:ce})}drawMasks(j,q,W,se){let fe,ee,oe,Ce,ge=this.left,Ee=this.top,J=this.height;W?(oe=[ge,ge,ge],Ce=[Ee,Ee+j,Ee+q],ee=[J,J,J],fe=[j,q-j,this.size-q]):(oe=[ge,ge+j,ge+q],Ce=[Ee,Ee,Ee],ee=[j,q-j,this.size-q],fe=[J,J,J]),this.shades.forEach((ie,le)=>{ie[se]({x:oe[le],y:Ce[le],width:ee[le],height:fe[le]})})}renderElements(){var ge;let j=this,q=j.navigatorOptions,W=q.maskInside,se=j.chart,fe=se.inverted,ee=se.renderer,oe={cursor:fe?"ns-resize":"ew-resize"},Ce=j.navigatorGroup??(j.navigatorGroup=ee.g("navigator").attr({zIndex:8,visibility:"hidden"}).add());if([!W,W,!W].forEach((Ee,J)=>{let ie=j.shades[J]??(j.shades[J]=ee.rect().addClass("highcharts-navigator-mask"+(J===1?"-inside":"-outside")).add(Ce));se.styledMode||(ie.attr({fill:Ee?q.maskFill:"rgba(0,0,0,0)"}),J===1&&ie.css(oe))}),j.outline||(j.outline=ee.path().addClass("highcharts-navigator-outline").add(Ce)),se.styledMode||j.outline.attr({"stroke-width":q.outlineWidth,stroke:q.outlineColor}),(ge=q.handles)==null?void 0:ge.enabled){let Ee=q.handles,{height:J,width:ie}=Ee;[0,1].forEach(le=>{var te;let be=Ee.symbols[le];if(j.handles[le]&&j.handles[le].symbolUrl===be){if(!j.handles[le].isImg&&j.handles[le].symbolName!==be){let ae=_[be].call(_,-ie/2-1,0,ie,J);j.handles[le].attr({d:ae}),j.handles[le].symbolName=be}}else(te=j.handles[le])==null||te.destroy(),j.handles[le]=ee.symbol(be,-ie/2-1,0,ie,J,Ee),j.handles[le].attr({zIndex:7-le}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][le]).add(Ce),j.addMouseEvents();se.inverted&&j.handles[le].attr({rotation:90,rotationOriginX:Math.floor(-ie/2),rotationOriginY:(J+ie)/2}),se.styledMode||j.handles[le].attr({fill:Ee.backgroundColor,stroke:Ee.borderColor,"stroke-width":Ee.lineWidth,width:Ee.width,height:Ee.height,x:-ie/2-1,y:0}).css(oe)})}}update(j,q=!1){var fe;let W=this.chart,se=W.options.chart.inverted!==((fe=W.scrollbar)==null?void 0:fe.options.vertical);if(U(!0,W.options.navigator,j),this.navigatorOptions=W.options.navigator||{},this.setOpposite(),E(j.enabled)||se)return this.destroy(),this.navigatorEnabled=j.enabled||this.navigatorEnabled,this.init(W);if(this.navigatorEnabled&&(this.isDirty=!0,j.adaptToUpdatedData===!1&&this.baseSeries.forEach(ee=>{B(ee,"updatedData",this.updatedDataHandler)},this),j.adaptToUpdatedData&&this.baseSeries.forEach(ee=>{ee.eventsToUnbind.push(C(ee,"updatedData",this.updatedDataHandler))},this),(j.series||j.baseSeries)&&this.setBaseSeries(void 0,!1),j.height||j.xAxis||j.yAxis)){this.height=j.height??this.height;let ee=this.getXAxisOffsets();this.xAxis.update({...j.xAxis,offsets:ee,[W.inverted?"width":"height"]:this.height,[W.inverted?"height":"width"]:void 0},!1),this.yAxis.update({...j.yAxis,[W.inverted?"width":"height"]:this.height},!1)}q&&W.redraw()}render(j,q,W,se){let fe=this.chart,ee=this.xAxis,oe=ee.pointRange||0,Ce=ee.navigatorAxis.fake?fe.xAxis[0]:ee,ge=this.navigatorEnabled,Ee=this.rendered,J=fe.inverted,ie=fe.xAxis[0].minRange,le=fe.xAxis[0].options.maxRange,be=this.scrollButtonSize,te,ae,ce,xe=this.scrollbarHeight,_e,Ne;if(this.hasDragged&&!E(W))return;if(this.isDirty&&this.renderElements(),j=w(j-oe/2),q=w(q+oe/2),!K(j)||!K(q)){if(!Ee)return;W=0,se=$(ee.width,Ce.width)}this.left=$(ee.left,fe.plotLeft+be+(J?fe.plotWidth:0));let ke=this.size=_e=$(ee.len,(J?fe.plotHeight:fe.plotWidth)-2*be);te=J?xe:_e+2*be,W=$(W,ee.toPixels(j,!0)),se=$(se,ee.toPixels(q,!0)),K(W)&&Math.abs(W)!==1/0||(W=0,se=te);let Le=ee.toValue(W,!0),me=ee.toValue(se,!0),Re=Math.abs(w(me-Le));Re<ie?this.grabbedLeft?W=ee.toPixels(me-ie-oe,!0):this.grabbedRight&&(se=ee.toPixels(Le+ie+oe,!0)):E(le)&&w(Re-oe)>le&&(this.grabbedLeft?W=ee.toPixels(me-le-oe,!0):this.grabbedRight&&(se=ee.toPixels(Le+le+oe,!0))),this.zoomedMax=k(Math.max(W,se),0,ke),this.zoomedMin=k(this.fixedWidth?this.zoomedMax-this.fixedWidth:Math.min(W,se),0,ke),this.range=this.zoomedMax-this.zoomedMin,ke=Math.round(this.zoomedMax);let $e=Math.round(this.zoomedMin);ge&&(this.navigatorGroup.attr({visibility:"inherit"}),Ne=Ee&&!this.hasDragged?"animate":"attr",this.drawMasks($e,ke,J,Ne),this.drawOutline($e,ke,J,Ne),this.navigatorOptions.handles.enabled&&(this.drawHandle($e,0,J,Ne),this.drawHandle(ke,1,J,Ne))),this.scrollbar&&(J?(ce=this.top-be,ae=this.left-xe+(ge||!Ce.opposite?0:(Ce.titleOffset||0)+Ce.axisTitleMargin),xe=_e+2*be):(ce=this.top+(ge?this.height:-xe),ae=this.left-be),this.scrollbar.position(ae,ce,te,xe),this.scrollbar.setRange(this.zoomedMin/(_e||1),this.zoomedMax/(_e||1))),this.rendered=!0,this.isDirty=!1,Y(this,"afterRender")}addMouseEvents(){let j=this,q=j.chart,W=q.container,se=[],fe,ee;j.mouseMoveHandler=fe=function(oe){j.onMouseMove(oe)},j.mouseUpHandler=ee=function(oe){j.onMouseUp(oe)},(se=j.getPartsEvents("mousedown")).push(C(q.renderTo,"mousemove",fe),C(W.ownerDocument,"mouseup",ee),C(q.renderTo,"touchmove",fe),C(W.ownerDocument,"touchend",ee)),se.concat(j.getPartsEvents("touchstart")),j.eventsToUnbind=se,j.series&&j.series[0]&&se.push(C(j.series[0].xAxis,"foundExtremes",function(){q.navigator.modifyNavigatorAxisExtremes()}))}getPartsEvents(j){let q=this,W=[];return["shades","handles"].forEach(function(se){q[se].forEach(function(fe,ee){W.push(C(fe.element,j,function(oe){q[se+"Mousedown"](oe,ee)}))})}),W}shadesMousedown(j,q){var be;j=((be=this.chart.pointer)==null?void 0:be.normalize(j))||j;let W=this.chart,se=this.xAxis,fe=this.zoomedMin,ee=this.size,oe=this.range,Ce=this.left,ge=j.chartX,Ee,J,ie,le;W.inverted&&(ge=j.chartY,Ce=this.top),q===1?(this.grabbedCenter=ge,this.fixedWidth=oe,this.dragOffset=ge-fe):(le=ge-Ce-oe/2,q===0?le=Math.max(0,le):q===2&&le+oe>=ee&&(le=ee-oe,this.reversedExtremes?(le-=oe,J=this.getUnionExtremes().dataMin):Ee=this.getUnionExtremes().dataMax),le!==fe&&(this.fixedWidth=oe,E((ie=se.navigatorAxis.toFixedRange(le,le+oe,J,Ee)).min)&&Y(this,"setRange",{min:Math.min(ie.min,ie.max),max:Math.max(ie.min,ie.max),redraw:!0,eventArguments:{trigger:"navigator"}})))}handlesMousedown(j,q){var ee;j=((ee=this.chart.pointer)==null?void 0:ee.normalize(j))||j;let W=this.chart,se=W.xAxis[0],fe=this.reversedExtremes;q===0?(this.grabbedLeft=!0,this.otherHandlePos=this.zoomedMax,this.fixedExtreme=fe?se.min:se.max):(this.grabbedRight=!0,this.otherHandlePos=this.zoomedMin,this.fixedExtreme=fe?se.max:se.min),W.setFixedRange(void 0)}onMouseMove(j){var Ee;let q=this,W=q.chart,se=q.navigatorSize,fe=q.range,ee=q.dragOffset,oe=W.inverted,Ce=q.left,ge;(!j.touches||j.touches[0].pageX!==0)&&(ge=(j=((Ee=W.pointer)==null?void 0:Ee.normalize(j))||j).chartX,oe&&(Ce=q.top,ge=j.chartY),q.grabbedLeft?(q.hasDragged=!0,q.render(0,0,ge-Ce,q.otherHandlePos)):q.grabbedRight?(q.hasDragged=!0,q.render(0,0,q.otherHandlePos,ge-Ce)):q.grabbedCenter&&(q.hasDragged=!0,ge<ee?ge=ee:ge>se+ee-fe&&(ge=se+ee-fe),q.render(0,0,ge-ee,ge-ee+fe)),q.hasDragged&&q.scrollbar&&$(q.scrollbar.options.liveRedraw,!v&&!this.chart.boosted)&&(j.DOMType=j.type,setTimeout(function(){q.onMouseUp(j)},0)))}onMouseUp(j){let q,W,se,fe,ee,oe,Ce=this.chart,ge=this.xAxis,Ee=this.scrollbar,J=j.DOMEvent||j,ie=Ce.inverted,le=this.rendered&&!this.hasDragged?"animate":"attr";(this.hasDragged&&(!Ee||!Ee.hasDragged)||j.trigger==="scrollbar")&&(se=this.getUnionExtremes(),this.zoomedMin===this.otherHandlePos?fe=this.fixedExtreme:this.zoomedMax===this.otherHandlePos&&(ee=this.fixedExtreme),this.zoomedMax===this.size&&(ee=this.reversedExtremes?se.dataMin:se.dataMax),this.zoomedMin===0&&(fe=this.reversedExtremes?se.dataMax:se.dataMin),E((oe=ge.navigatorAxis.toFixedRange(this.zoomedMin,this.zoomedMax,fe,ee)).min)&&Y(this,"setRange",{min:Math.min(oe.min,oe.max),max:Math.max(oe.min,oe.max),redraw:!0,animation:!this.hasDragged&&null,eventArguments:{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:J}})),j.DOMType!=="mousemove"&&j.DOMType!=="touchmove"&&(this.grabbedLeft=this.grabbedRight=this.grabbedCenter=this.fixedWidth=this.fixedExtreme=this.otherHandlePos=this.hasDragged=this.dragOffset=null),this.navigatorEnabled&&K(this.zoomedMin)&&K(this.zoomedMax)&&(W=Math.round(this.zoomedMin),q=Math.round(this.zoomedMax),this.shades&&this.drawMasks(W,q,ie,le),this.outline&&this.drawOutline(W,q,ie,le),this.navigatorOptions.handles.enabled&&Object.keys(this.handles).length===this.handles.length&&(this.drawHandle(W,0,ie,le),this.drawHandle(q,1,ie,le)))}removeEvents(){this.eventsToUnbind&&(this.eventsToUnbind.forEach(function(j){j()}),this.eventsToUnbind=void 0),this.removeBaseSeriesEvents()}removeBaseSeriesEvents(){let j=this.baseSeries||[];this.navigatorEnabled&&j[0]&&(this.navigatorOptions.adaptToUpdatedData!==!1&&j.forEach(function(q){B(q,"updatedData",this.updatedDataHandler)},this),j[0].xAxis&&B(j[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))}getXAxisOffsets(){return this.chart.inverted?[this.scrollButtonSize,0,-this.scrollButtonSize,0]:[0,-this.scrollButtonSize,0,this.scrollButtonSize]}init(j){var te;let q=j.options,W=q.navigator||{},se=W.enabled,fe=q.scrollbar||{},ee=fe.enabled,oe=se&&W.height||0,Ce=ee&&fe.height||0,ge=fe.buttonsEnabled&&Ce||0;this.handles=[],this.shades=[],this.chart=j,this.setBaseSeries(),this.height=oe,this.scrollbarHeight=Ce,this.scrollButtonSize=ge,this.scrollbarEnabled=ee,this.navigatorEnabled=se,this.navigatorOptions=W,this.scrollbarOptions=fe,this.setOpposite();let Ee=this,J=Ee.baseSeries,ie=j.xAxis.length,le=j.yAxis.length,be=J&&J[0]&&J[0].xAxis||j.xAxis[0]||{options:{}};if(j.isDirtyBox=!0,Ee.navigatorEnabled){let ae=this.getXAxisOffsets();Ee.xAxis=new n(j,U({breaks:be.options.breaks,ordinal:be.options.ordinal,overscroll:be.options.overscroll},W.xAxis,{type:"datetime",yAxis:(te=W.yAxis)==null?void 0:te.id,index:ie,isInternal:!0,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:be.options.ordinal?0:be.options.minPadding,maxPadding:be.options.ordinal?0:be.options.maxPadding,zoomEnabled:!1},j.inverted?{offsets:ae,width:oe}:{offsets:ae,height:oe}),"xAxis"),Ee.yAxis=new n(j,U(W.yAxis,{alignTicks:!1,offset:0,index:le,isInternal:!0,reversed:$(W.yAxis&&W.yAxis.reversed,j.yAxis[0]&&j.yAxis[0].reversed,!1),zoomEnabled:!1},j.inverted?{width:oe}:{height:oe}),"yAxis"),J||W.series.data?Ee.updateNavigatorSeries(!1):j.series.length===0&&(Ee.unbindRedraw=C(j,"beforeRedraw",function(){j.series.length>0&&!Ee.series&&(Ee.setBaseSeries(),Ee.unbindRedraw())})),Ee.reversedExtremes=j.inverted&&!Ee.xAxis.reversed||!j.inverted&&Ee.xAxis.reversed,Ee.renderElements(),Ee.addMouseEvents()}else Ee.xAxis={chart:j,navigatorAxis:{fake:!0},translate:function(ae,ce){let xe=j.xAxis[0],_e=xe.getExtremes(),Ne=xe.len-2*ge,ke=L("min",xe.options.min,_e.dataMin),Le=L("max",xe.options.max,_e.dataMax)-ke;return ce?ae*Le/Ne+ke:Ne*(ae-ke)/Le},toPixels:function(ae){return this.translate(ae)},toValue:function(ae){return this.translate(ae,!0)}},Ee.xAxis.navigatorAxis.axis=Ee.xAxis,Ee.xAxis.navigatorAxis.toFixedRange=h.prototype.toFixedRange.bind(Ee.xAxis.navigatorAxis);if(j.options.scrollbar.enabled){let ae=U(j.options.scrollbar,{vertical:j.inverted});!K(ae.margin)&&Ee.navigatorEnabled&&(ae.margin=j.inverted?-3:3),j.scrollbar=Ee.scrollbar=new m(j.renderer,ae,j),C(Ee.scrollbar,"changed",function(ce){let xe=Ee.size,_e=xe*this.to,Ne=xe*this.from;Ee.hasDragged=Ee.scrollbar.hasDragged,Ee.render(0,0,Ne,_e),this.shouldUpdateExtremes(ce.DOMType)&&setTimeout(function(){Ee.onMouseUp(ce)})})}Ee.addBaseSeriesEvents(),Ee.addChartEvents()}setOpposite(){let j=this.navigatorOptions,q=this.navigatorEnabled,W=this.chart;this.opposite=$(j.opposite,!!(!q&&W.inverted))}getUnionExtremes(j){let q,W=this.chart.xAxis[0],se=this.xAxis,fe=se.options,ee=W.options;return j&&W.dataMin===null||(q={dataMin:$(fe&&fe.min,L("min",ee.min,W.dataMin,se.dataMin,se.min)),dataMax:$(fe&&fe.max,L("max",ee.max,W.dataMax,se.dataMax,se.max))}),q}setBaseSeries(j,q){let W=this.chart,se=this.baseSeries=[];j=j||W.options&&W.options.navigator.baseSeries||(W.series.length?N(W.series,fe=>!fe.options.isInternal).index:0),(W.series||[]).forEach((fe,ee)=>{!fe.options.isInternal&&(fe.options.showInNavigator||(ee===j||fe.options.id===j)&&fe.options.showInNavigator!==!1)&&se.push(fe)}),this.xAxis&&!this.xAxis.navigatorAxis.fake&&this.updateNavigatorSeries(!0,q)}updateNavigatorSeries(j,q){var ie,le;let W=this,se=W.chart,fe=W.baseSeries,ee={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:(ie=this.navigatorOptions.xAxis)==null?void 0:ie.id,yAxis:(le=this.navigatorOptions.yAxis)==null?void 0:le.id,showInLegend:!1,stacking:void 0,isInternal:!0,states:{inactive:{opacity:1}}},oe=W.series=(W.series||[]).filter(be=>{let te=be.baseSeries;return!(0>fe.indexOf(te))||(te&&(B(te,"updatedData",W.updatedDataHandler),delete te.navigatorSeries),be.chart&&be.destroy(),!1)}),Ce,ge,Ee=W.navigatorOptions.series,J;fe&&fe.length&&fe.forEach(be=>{let te=be.navigatorSeries,ae=S({color:be.color,visible:be.visible},Z(Ee)?x.navigator.series:Ee);if(te&&W.navigatorOptions.adaptToUpdatedData===!1)return;ee.name="Navigator "+fe.length,J=(Ce=be.options||{}).navigatorOptions||{},ae.dataLabels=R(ae.dataLabels),(ge=U(Ce,ee,ae,J)).pointRange=$(ae.pointRange,J.pointRange,x.plotOptions[ge.type||"line"].pointRange);let ce=J.data||ae.data;W.hasNavigatorData=W.hasNavigatorData||!!ce,ge.data=ce||Ce.data&&Ce.data.slice(0),te&&te.options?te.update(ge,q):(be.navigatorSeries=se.initSeries(ge),se.setSortedData(),be.navigatorSeries.baseSeries=be,oe.push(be.navigatorSeries))}),(Ee.data&&!(fe&&fe.length)||Z(Ee))&&(W.hasNavigatorData=!1,(Ee=R(Ee)).forEach((be,te)=>{ee.name="Navigator "+(oe.length+1),(ge=U(x.navigator.series,{color:se.series[te]&&!se.series[te].options.isInternal&&se.series[te].color||se.options.colors[te]||se.options.colors[0]},ee,be)).data=be.data,ge.data&&(W.hasNavigatorData=!0,oe.push(se.initSeries(ge)))})),j&&this.addBaseSeriesEvents()}addBaseSeriesEvents(){let j=this,q=j.baseSeries||[];q[0]&&q[0].xAxis&&q[0].eventsToUnbind.push(C(q[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes)),q.forEach(W=>{W.eventsToUnbind.push(C(W,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)})),W.eventsToUnbind.push(C(W,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)})),this.navigatorOptions.adaptToUpdatedData!==!1&&W.xAxis&&W.eventsToUnbind.push(C(W,"updatedData",this.updatedDataHandler)),W.eventsToUnbind.push(C(W,"remove",function(){q&&M(q,W),this.navigatorSeries&&(M(j.series,this.navigatorSeries),E(this.navigatorSeries.options)&&this.navigatorSeries.remove(!1),delete this.navigatorSeries)}))})}getBaseSeriesMin(j){return this.baseSeries.reduce(function(q,W){return Math.min(q,W.xData&&W.xData.length?W.xData[0]:q)},j)}modifyNavigatorAxisExtremes(){let j=this.xAxis;if(j.getExtremes!==void 0){let q=this.getUnionExtremes(!0);q&&(q.dataMin!==j.min||q.dataMax!==j.max)&&(j.min=q.dataMin,j.max=q.dataMax)}}modifyBaseAxisExtremes(){var te;let j,q,W=this.chart.navigator,se=this.getExtremes(),fe=se.min,ee=se.max,oe=se.dataMin,Ce=se.dataMax,ge=ee-fe,Ee=W.stickToMin,J=W.stickToMax,ie=$((te=this.ordinal)==null?void 0:te.convertOverscroll(this.options.overscroll),0),le=W.series&&W.series[0],be=!!this.setExtremes;!(this.eventArgs&&this.eventArgs.trigger==="rangeSelectorButton")&&(Ee&&(j=(q=oe)+ge),J&&(j=Ce+ie,Ee||(q=Math.max(oe,j-ge,W.getBaseSeriesMin(le&&le.xData?le.xData[0]:-Number.MAX_VALUE)))),be&&(Ee||J)&&K(q)&&(this.min=this.userMin=q,this.max=this.userMax=j)),W.stickToMin=W.stickToMax=null}updatedDataHandler(){let j=this.chart.navigator,q=this.navigatorSeries,W=j.reversedExtremes?Math.round(j.zoomedMin)===0:Math.round(j.zoomedMax)>=Math.round(j.size);j.stickToMax=$(this.chart.options.navigator&&this.chart.options.navigator.stickToMax,W),j.stickToMin=j.shouldStickToMin(this,j),q&&!j.hasNavigatorData&&(q.options.pointStart=this.xData[0],q.setData(this.options.data,!1,null,!1))}shouldStickToMin(j,q){let W=q.getBaseSeriesMin(j.xData[0]),se=j.xAxis,fe=se.max,ee=se.min,oe=se.options.range;return!!(K(fe)&&K(ee))&&(oe&&fe-W>0?fe-W<oe:ee<=W)}addChartEvents(){this.eventsToUnbind||(this.eventsToUnbind=[]),this.eventsToUnbind.push(C(this.chart,"redraw",function(){let j=this.navigator,q=j&&(j.baseSeries&&j.baseSeries[0]&&j.baseSeries[0].xAxis||this.xAxis[0]);q&&j.render(q.min,q.max)}),C(this.chart,"getMargins",function(){let j=this.navigator,q=j.opposite?"plotTop":"marginBottom";this.inverted&&(q=j.opposite?"marginRight":"plotLeft"),this[q]=(this[q]||0)+(j.navigatorEnabled||!this.inverted?j.height+j.scrollbarHeight:0)+j.navigatorOptions.margin}),C(G,"setRange",function(j){this.chart.xAxis[0].setExtremes(j.min,j.max,j.redraw,j.animation,j.eventArguments)}))}destroy(){this.removeEvents(),this.xAxis&&(M(this.chart.xAxis,this.xAxis),M(this.chart.axes,this.xAxis)),this.yAxis&&(M(this.chart.yAxis,this.yAxis),M(this.chart.axes,this.yAxis)),(this.series||[]).forEach(j=>{j.destroy&&j.destroy()}),["series","xAxis","yAxis","shades","outline","scrollbarTrack","scrollbarRifles","scrollbarGroup","scrollbar","navigatorGroup","rendered"].forEach(j=>{this[j]&&this[j].destroy&&this[j].destroy(),this[j]=null}),[this.handles].forEach(j=>{A(j)}),this.navigatorEnabled=!1}}return G}),r(t,"Accessibility/Components/NavigatorComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Stock/Navigator/Navigator.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/Utils/ChartUtilities.js"]],function(n,a,c,s,h,p,m,y,g){let{animObject:x}=h,{format:v}=p,{clamp:_,pick:C,syncTimeout:k}=m,{getFakeMouseEvent:w}=y,{getAxisRangeDescription:E,fireEventOnWrappedOrUnwrappedElement:A}=g;return class extends n{init(){let M=this.chart,S=this;this.announcer=new a(M,"polite"),this.addEvent(s,"afterRender",function(){this.chart===S.chart&&this.chart.renderer&&k(()=>{S.proxyProvider.updateGroupProxyElementPositions("navigator"),S.updateHandleValues()},x(C(this.chart.renderer.globalAnimation,!0)).duration)})}onChartUpdate(){var Y,Z,K;let M=this.chart,S=M.options,N=S.navigator;if(N.enabled&&((Y=N.accessibility)!=null&&Y.enabled)){let U=S.accessibility.landmarkVerbosity,$=(Z=S.lang.accessibility)==null?void 0:Z.navigator.groupLabel;this.proxyProvider.removeGroup("navigator"),this.proxyProvider.addGroup("navigator","div",{role:U==="all"?"region":"group","aria-label":v($,{chart:M},M)});let B=(K=S.lang.accessibility)==null?void 0:K.navigator.handleLabel;[0,1].forEach(R=>{let L=this.getHandleByIx(R);if(L){let G=this.proxyProvider.addProxyElement("navigator",{click:L},"input",{type:"range","aria-label":v(B,{handleIx:R,chart:M},M)});this[R?"maxHandleProxy":"minHandleProxy"]=G.innerElement,G.innerElement.style.pointerEvents="none",G.innerElement.oninput=()=>this.updateNavigator()}}),this.updateHandleValues()}else this.proxyProvider.removeGroup("navigator")}getNavigatorHandleNavigation(M){let S=this,N=this.chart,Y=M?this.maxHandleProxy:this.minHandleProxy,Z=this.keyCodes;return new c(N,{keyCodeMap:[[[Z.left,Z.right,Z.up,Z.down],function(K){if(Y){let U=K===Z.left||K===Z.up?-1:1;Y.value=""+_(parseFloat(Y.value)+U,0,100),S.updateNavigator(()=>{let $=S.getHandleByIx(M);$&&N.setFocusToElement($,Y)})}return this.response.success}]],init:()=>{N.setFocusToElement(this.getHandleByIx(M),Y)},validate:()=>{var K;return!!(this.getHandleByIx(M)&&Y&&((K=N.options.navigator.accessibility)!=null&&K.enabled))}})}getKeyboardNavigation(){return[this.getNavigatorHandleNavigation(0),this.getNavigatorHandleNavigation(1)]}destroy(){this.updateNavigatorThrottleTimer&&clearTimeout(this.updateNavigatorThrottleTimer),this.proxyProvider.removeGroup("navigator"),this.announcer&&this.announcer.destroy()}updateHandleValues(){let M=this.chart.navigator;if(M&&this.minHandleProxy&&this.maxHandleProxy){let S=M.size;this.minHandleProxy.value=""+Math.round(M.zoomedMin/S*100),this.maxHandleProxy.value=""+Math.round(M.zoomedMax/S*100)}}getHandleByIx(M){let S=this.chart.navigator;return S&&S.handles&&S.handles[M]}updateNavigator(M){this.updateNavigatorThrottleTimer&&clearTimeout(this.updateNavigatorThrottleTimer),this.updateNavigatorThrottleTimer=setTimeout((S=>{var K;let N=this.chart,{navigator:Y,pointer:Z}=N;if(Y&&Z&&this.minHandleProxy&&this.maxHandleProxy){let U=Z.getChartPosition(),$=parseFloat(this.minHandleProxy.value)/100*Y.size,B=parseFloat(this.maxHandleProxy.value)/100*Y.size;[[0,"mousedown",Y.zoomedMin],[0,"mousemove",$],[0,"mouseup",$],[1,"mousedown",Y.zoomedMax],[1,"mousemove",B],[1,"mouseup",B]].forEach(([G,F,j])=>{var W;let q=(W=this.getHandleByIx(G))==null?void 0:W.element;q&&A(q,w(F,{x:U.left+Y.left+j,y:U.top+Y.top},q))}),S&&S();let R=(K=N.options.lang.accessibility)==null?void 0:K.navigator.changeAnnouncement,L=E(N.xAxis[0]);this.announcer.announce(v(R,{axisRangeDescription:L,chart:N},N))}}).bind(this,M),20)}}}),r(t,"Accessibility/Components/SeriesComponent/SeriesDescriber.js",[t["Accessibility/Components/AnnotationsA11y.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Templating.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{getPointAnnotationTexts:p}=n,{getAxisDescription:m,getSeriesFirstPointElement:y,getSeriesA11yElement:g,unhideChartElementFromAT:x}=a,{format:v,numberFormat:_}=c,{reverseChildNodes:C,stripHTMLTagsFromString:k}=s,{find:w,isNumber:E,isString:A,pick:M,defined:S}=h;function N($){let B=$.chart.options.accessibility.series.pointDescriptionEnabledThreshold;return!!(B!==!1&&$.points&&$.points.length>=+B)}function Y($,B){let R=$.series,L=R.chart,G=L.options.accessibility.point||{},F=R.options.accessibility&&R.options.accessibility.point||{},j=R.tooltipOptions||{},q=L.options.lang;return E(B)?_(B,F.valueDecimals||G.valueDecimals||j.valueDecimals||-1,q.decimalPoint,q.accessibility.thousandsSep||q.thousandsSep):B}function Z($,B){let R=$[B];return $.chart.langFormat("accessibility.series."+B+"Description",{name:m(R),series:$})}function K($){let B=$.series,R=B.chart.series.length>1||B.options.name,L=function(q){let W=q.series,se=W.chart,fe=W.options.accessibility,ee=fe&&fe.point&&fe.point.valueDescriptionFormat||se.options.accessibility.point.valueDescriptionFormat,oe=M(W.xAxis&&W.xAxis.options.accessibility&&W.xAxis.options.accessibility.enabled,!se.angular&&W.type!=="flowmap"),Ce=oe?function(ge){let Ee=function(be){let te=be.series,ae=te.chart,ce=te.options.accessibility&&te.options.accessibility.point||{},xe=ae.options.accessibility.point||{},_e=te.xAxis&&te.xAxis.dateTime;if(_e){let Ne=_e.getXDateFormat(be.x||0,ae.options.tooltip.dateTimeLabelFormats),ke=ce.dateFormatter&&ce.dateFormatter(be)||xe.dateFormatter&&xe.dateFormatter(be)||ce.dateFormat||xe.dateFormat||Ne;return ae.time.dateFormat(ke,be.x||0,void 0)}}(ge),J=(ge.series.xAxis||{}).categories&&S(ge.category)&&(""+ge.category).replace("<br/>"," "),ie=S(ge.id)&&0>(""+ge.id).indexOf("highcharts-"),le="x, "+ge.x;return ge.name||Ee||J||(ie?ge.id:le)}(q):"";return v(ee,{point:q,index:S(q.index)?q.index+1:"",xDescription:Ce,value:function(ge){let Ee=ge.series,J=Ee.chart.options.accessibility.point||{},ie=Ee.chart.options.accessibility&&Ee.chart.options.accessibility.point||{},le=Ee.tooltipOptions||{},be=ie.valuePrefix||J.valuePrefix||le.valuePrefix||"",te=ie.valueSuffix||J.valueSuffix||le.valueSuffix||"",ae=ge.value!==void 0?"value":"y",ce=Y(ge,ge[ae]);return ge.isNull?Ee.chart.langFormat("accessibility.series.nullPointValue",{point:ge}):Ee.pointArrayMap?function(xe,_e,Ne){let ke=_e||"",Le=Ne||"",me=function(Re){let $e=Y(xe,M(xe[Re],xe.options[Re]));return $e!==void 0?Re+": "+ke+$e+Le:$e};return xe.series.pointArrayMap.reduce(function(Re,$e){let De=me($e);return De?Re+(Re.length?", ":"")+De:Re},"")}(ge,be,te):be+ce+te}(q),separator:oe?", ":""},se)}($),G=$.options&&$.options.accessibility&&$.options.accessibility.description,F=R?" "+B.name+".":"",j=function(q){let W=q.series.chart,se=p(q);return se.length?W.langFormat("accessibility.series.pointAnnotationsDescription",{point:q,annotations:se}):""}($);return $.accessibility=$.accessibility||{},$.accessibility.valueDescription=L,L+(G?" "+G:"")+F+(j?" "+j:"")}function U($){let B=$.chart,R=B.types||[],L=function(oe){let Ce=(oe.options.accessibility||{}).description;return Ce&&oe.chart.langFormat("accessibility.series.description",{description:Ce,series:oe})||""}($),G=function(oe){return B[oe]&&B[oe].length>1&&$[oe]},F=$.index+1,j=Z($,"xAxis"),q=Z($,"yAxis"),W={seriesNumber:F,series:$,chart:B},se=R.length>1?"Combination":"",fe=B.langFormat("accessibility.series.summary."+$.type+se,W)||B.langFormat("accessibility.series.summary.default"+se,W),ee=(G("yAxis")?" "+q+".":"")+(G("xAxis")?" "+j+".":"");return v(M($.options.accessibility&&$.options.accessibility.descriptionFormat,B.options.accessibility.series.descriptionFormat,""),{seriesDescription:fe,authorDescription:L?" "+L:"",axisDescription:ee,series:$,chart:B,seriesNumber:F},void 0)}return{defaultPointDescriptionFormatter:K,defaultSeriesDescriptionFormatter:U,describeSeries:function($){let B=$.chart,R=y($),L=g($),G=B.is3d&&B.is3d();L&&(L.lastChild!==R||G||C(L),function(F){let j=function(se){let fe=se.options.accessibility||{};return!N(se)&&!fe.exposeAsGroupOnly}(F),q=function(se){let fe=se.chart.options.accessibility.keyboardNavigation.seriesNavigation;return!!(se.points&&(se.points.length<+fe.pointNavigationEnabledThreshold||fe.pointNavigationEnabledThreshold===!1))}(F),W=F.chart.options.accessibility.point.describeNull;(j||q)&&F.points.forEach(se=>{let fe=se.graphic&&se.graphic.element||function(oe){let Ce=oe.series,ge=Ce&&Ce.chart,Ee=Ce&&Ce.is("sunburst"),J=oe.isNull,ie=ge&&ge.options.accessibility.point.describeNull;return J&&!Ee&&ie}(se)&&function(oe){let Ce=oe.series,ge=function(be){let te=be.index;return be.series&&be.series.data&&S(te)&&w(be.series.data,function(ae){return!!(ae&&ae.index!==void 0&&ae.index>te&&ae.graphic&&ae.graphic.element)})||null}(oe),Ee=ge&&ge.graphic,J=Ee?Ee.parentGroup:Ce.graph||Ce.group,ie=ge?{x:M(oe.plotX,ge.plotX,0),y:M(oe.plotY,ge.plotY,0)}:{x:M(oe.plotX,0),y:M(oe.plotY,0)},le=function(be,te){let ae=be.series.chart.renderer.rect(te.x,te.y,1,1);return ae.attr({class:"highcharts-a11y-mock-point",fill:"none",opacity:0,"fill-opacity":0,"stroke-opacity":0}),ae}(oe,ie);if(J&&J.element)return oe.graphic=le,oe.hasMockGraphic=!0,le.add(J),J.element.insertBefore(le.element,Ee?Ee.element:null),le.element}(se),ee=se.options&&se.options.accessibility&&se.options.accessibility.enabled===!1;if(fe){if(se.isNull&&!W){fe.setAttribute("aria-hidden",!0);return}fe.setAttribute("tabindex","-1"),F.chart.styledMode||(fe.style.outline="none"),j&&!ee?function(oe,Ce){var le,be,te;let ge=oe.series,Ee=((le=ge.options.accessibility)==null?void 0:le.point)||{},J=ge.chart.options.accessibility.point||{},ie=k(A(Ee.descriptionFormat)&&v(Ee.descriptionFormat,oe,ge.chart)||((be=Ee.descriptionFormatter)==null?void 0:be.call(Ee,oe))||A(J.descriptionFormat)&&v(J.descriptionFormat,oe,ge.chart)||((te=J.descriptionFormatter)==null?void 0:te.call(J,oe))||K(oe),ge.chart.renderer.forExport);Ce.setAttribute("role","img"),Ce.setAttribute("aria-label",ie)}(se,fe):fe.setAttribute("aria-hidden",!0)}})}($),x(B,L),function(F){let j=F.chart,q=j.options.chart,W=q.options3d&&q.options3d.enabled,se=j.series.length>1,fe=j.options.accessibility.series.describeSingleSeries,ee=(F.options.accessibility||{}).exposeAsGroupOnly;return!(W&&se)&&(se||fe||ee||N(F))}($)?function(F,j){let q=F.options.accessibility||{},W=F.chart.options.accessibility,se=W.landmarkVerbosity;q.exposeAsGroupOnly?j.setAttribute("role","img"):se==="all"?j.setAttribute("role","region"):j.setAttribute("role","group"),j.setAttribute("tabindex","-1"),F.chart.styledMode||(j.style.outline="none"),j.setAttribute("aria-label",k(W.series.descriptionFormatter&&W.series.descriptionFormatter(F)||U(F),F.chart.renderer.forExport))}($,L):L.removeAttribute("aria-label"))}}}),r(t,"Accessibility/Components/SeriesComponent/NewDataAnnouncer.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(n,a,c,s,h,p){let{composed:m}=n,{addEvent:y,defined:g,pushUnique:x}=a,{getChartTitle:v}=s,{defaultPointDescriptionFormatter:_,defaultSeriesDescriptionFormatter:C}=p;function k(E){return!!E.options.accessibility.announceNewData.enabled}class w{constructor(A){this.dirty={allSeries:{}},this.lastAnnouncementTime=0,this.chart=A}init(){let A=this.chart,M=A.options.accessibility.announceNewData.interruptUser?"assertive":"polite";this.lastAnnouncementTime=0,this.dirty={allSeries:{}},this.eventProvider=new h,this.announcer=new c(A,M),this.addEventListeners()}destroy(){this.eventProvider.removeAddedEvents(),this.announcer.destroy()}addEventListeners(){let A=this,M=this.chart,S=this.eventProvider;S.addEvent(M,"afterApplyDrilldown",function(){A.lastAnnouncementTime=0}),S.addEvent(M,"afterAddSeries",function(N){A.onSeriesAdded(N.series)}),S.addEvent(M,"redraw",function(){A.announceDirtyData()})}onSeriesAdded(A){k(this.chart)&&(this.dirty.hasDirty=!0,this.dirty.allSeries[A.name+A.index]=A,this.dirty.newSeries=g(this.dirty.newSeries)?void 0:A)}announceDirtyData(){let A=this.chart,M=this;if(A.options.accessibility.announceNewData&&this.dirty.hasDirty){let S=this.dirty.newPoint;S&&(S=function(N){let Y=N.series.data.filter(Z=>N.x===Z.x&&N.y===Z.y);return Y.length===1?Y[0]:N}(S)),this.queueAnnouncement(Object.keys(this.dirty.allSeries).map(N=>M.dirty.allSeries[N]),this.dirty.newSeries,S),this.dirty={allSeries:{}}}}queueAnnouncement(A,M,S){let N=this.chart.options.accessibility.announceNewData;if(N.enabled){let Y=+new Date,Z=Y-this.lastAnnouncementTime,K=Math.max(0,N.minAnnounceInterval-Z),U=function(B,R){let L=(B||[]).concat(R||[]).reduce((G,F)=>(G[F.name+F.index]=F,G),{});return Object.keys(L).map(G=>L[G])}(this.queuedAnnouncement&&this.queuedAnnouncement.series,A),$=this.buildAnnouncementMessage(U,M,S);$&&(this.queuedAnnouncement&&clearTimeout(this.queuedAnnouncementTimer),this.queuedAnnouncement={time:Y,message:$,series:U},this.queuedAnnouncementTimer=setTimeout(()=>{this&&this.announcer&&(this.lastAnnouncementTime=+new Date,this.announcer.announce(this.queuedAnnouncement.message),delete this.queuedAnnouncement,delete this.queuedAnnouncementTimer)},K))}}buildAnnouncementMessage(A,M,S){let N=this.chart,Y=N.options.accessibility.announceNewData;if(Y.announcementFormatter){let $=Y.announcementFormatter(A,M,S);if($!==!1)return $.length?$:null}let Z=n.charts&&n.charts.length>1?"Multiple":"Single",K=M?"newSeriesAnnounce"+Z:S?"newPointAnnounce"+Z:"newDataAnnounce",U=v(N);return N.langFormat("accessibility.announceNewData."+K,{chartTitle:U,seriesDesc:M?C(M):null,pointDesc:S?_(S):null,point:S,series:M})}}return function(E){function A(S){var Z;let N=this.chart,Y=(Z=N.accessibility)==null?void 0:Z.components.series.newDataAnnouncer;Y&&Y.chart===N&&k(N)&&(Y.dirty.newPoint=g(Y.dirty.newPoint)?void 0:S.point)}function M(){var Y;let S=this.chart,N=(Y=S.accessibility)==null?void 0:Y.components.series.newDataAnnouncer;N&&N.chart===S&&k(S)&&(N.dirty.hasDirty=!0,N.dirty.allSeries[this.name+this.index]=this)}E.compose=function(S){x(m,"A11y.NDA")&&(y(S,"addPoint",A),y(S,"updatedData",M))}}(w||(w={})),w}),r(t,"Accessibility/ProxyElement.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(n,a,c,s,h){let{doc:p}=n,{attr:m,css:y,merge:g}=a,{fireEventOnWrappedOrUnwrappedElement:x}=s,{cloneMouseEvent:v,cloneTouchEvent:_,getFakeMouseEvent:C,removeElement:k}=h;return class{constructor(w,E,A="button",M,S){this.chart=w,this.target=E,this.eventProvider=new c;let N=this.innerElement=p.createElement(A),Y=this.element=M?p.createElement(M):N;w.styledMode||this.hideElementVisually(N),M&&(M!=="li"||w.styledMode||(Y.style.listStyle="none"),Y.appendChild(N),this.element=Y),this.updateTarget(E,S)}click(){let w=this.getTargetPosition();w.x+=w.width/2,w.y+=w.height/2;let E=C("click",w);x(this.target.click,E)}updateTarget(w,E){this.target=w,this.updateCSSClassName();let A=E||{};Object.keys(A).forEach(S=>{A[S]===null&&delete A[S]});let M=this.getTargetAttr(w.click,"aria-label");m(this.innerElement,g(M?{"aria-label":M}:{},A)),this.eventProvider.removeAddedEvents(),this.addProxyEventsToElement(this.innerElement,w.click),this.refreshPosition()}refreshPosition(){let w=this.getTargetPosition();y(this.innerElement,{width:(w.width||1)+"px",height:(w.height||1)+"px",left:(Math.round(w.x)||0)+"px",top:(Math.round(w.y)||0)+"px"})}remove(){this.eventProvider.removeAddedEvents(),k(this.element)}updateCSSClassName(){let w=N=>N.indexOf("highcharts-no-tooltip")>-1,E=this.chart.legend,A=E.group&&E.group.div,M=w(A&&A.className||""),S=w(this.getTargetAttr(this.target.click,"class")||"");this.innerElement.className=M||S?"highcharts-a11y-proxy-element highcharts-no-tooltip":"highcharts-a11y-proxy-element"}addProxyEventsToElement(w,E){["click","touchstart","touchend","touchcancel","touchmove","mouseover","mouseenter","mouseleave","mouseout"].forEach(A=>{let M=A.indexOf("touch")===0;this.eventProvider.addEvent(w,A,S=>{let N=M?_(S):v(S);E&&x(E,N),S.stopPropagation(),M||S.preventDefault()},{passive:!1})})}hideElementVisually(w){y(w,{borderWidth:0,backgroundColor:"transparent",cursor:"pointer",outline:"none",opacity:.001,filter:"alpha(opacity=1)",zIndex:999,overflow:"hidden",padding:0,margin:0,display:"block",position:"absolute","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)"})}getTargetPosition(){let w=this.target.click,E=w.element?w.element:w,A=this.target.visual||E,M=this.chart.renderTo,S=this.chart.pointer;if(M&&(A!=null&&A.getBoundingClientRect)&&S){let N=A.getBoundingClientRect(),Y=S.getChartPosition();return{x:(N.left-Y.left)/Y.scaleX,y:(N.top-Y.top)/Y.scaleY,width:N.right/Y.scaleX-N.left/Y.scaleX,height:N.bottom/Y.scaleY-N.top/Y.scaleY}}return{x:0,y:0,width:1,height:1}}getTargetAttr(w,E){return w.element?w.element.getAttribute(E):w.getAttribute(E)}}}),r(t,"Accessibility/ProxyProvider.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/ProxyElement.js"]],function(n,a,c,s,h,p){let{doc:m}=n,{attr:y,css:g}=a,{unhideChartElementFromAT:x}=c,{removeChildNodes:v}=h;return class{constructor(_){this.chart=_,this.domElementProvider=new s,this.groups={},this.groupOrder=[],this.beforeChartProxyPosContainer=this.createProxyPosContainer("before"),this.afterChartProxyPosContainer=this.createProxyPosContainer("after"),this.update()}addProxyElement(_,C,k="button",w){let E=this.groups[_];if(!E)throw Error("ProxyProvider.addProxyElement: Invalid group key "+_);let A=E.type==="ul"||E.type==="ol"?"li":void 0,M=new p(this.chart,C,k,A,w);return E.proxyContainerElement.appendChild(M.element),E.proxyElements.push(M),M}addGroup(_,C="div",k){let w,E=this.groups[_];if(E)return E.groupElement;let A=this.domElementProvider.createElement(C);return k&&k.role&&C!=="div"?(w=this.domElementProvider.createElement("div")).appendChild(A):w=A,w.className="highcharts-a11y-proxy-group highcharts-a11y-proxy-group-"+_.replace(/\W/g,"-"),this.groups[_]={proxyContainerElement:A,groupElement:w,type:C,proxyElements:[]},y(w,k||{}),C==="ul"&&A.setAttribute("role","list"),this.afterChartProxyPosContainer.appendChild(w),this.updateGroupOrder(this.groupOrder),w}updateGroupAttrs(_,C){let k=this.groups[_];if(!k)throw Error("ProxyProvider.updateGroupAttrs: Invalid group key "+_);y(k.groupElement,C)}updateGroupOrder(_){if(this.groupOrder=_.slice(),this.isDOMOrderGroupOrder())return;let C=_.indexOf("series"),k=C>-1?_.slice(0,C):_,w=C>-1?_.slice(C+1):[],E=m.activeElement;["before","after"].forEach(A=>{let M=this[A==="before"?"beforeChartProxyPosContainer":"afterChartProxyPosContainer"];v(M),(A==="before"?k:w).forEach(S=>{let N=this.groups[S];N&&M.appendChild(N.groupElement)})}),(this.beforeChartProxyPosContainer.contains(E)||this.afterChartProxyPosContainer.contains(E))&&E&&E.focus&&E.focus()}clearGroup(_){let C=this.groups[_];if(!C)throw Error("ProxyProvider.clearGroup: Invalid group key "+_);v(C.proxyContainerElement)}removeGroup(_){let C=this.groups[_];C&&(this.domElementProvider.removeElement(C.groupElement),C.groupElement!==C.proxyContainerElement&&this.domElementProvider.removeElement(C.proxyContainerElement),delete this.groups[_])}update(){this.updatePosContainerPositions(),this.updateGroupOrder(this.groupOrder),this.updateProxyElementPositions()}updateProxyElementPositions(){Object.keys(this.groups).forEach(this.updateGroupProxyElementPositions.bind(this))}updateGroupProxyElementPositions(_){let C=this.groups[_];C&&C.proxyElements.forEach(k=>k.refreshPosition())}destroy(){this.domElementProvider.destroyCreatedElements()}createProxyPosContainer(_){let C=this.domElementProvider.createElement("div");return C.setAttribute("aria-hidden","false"),C.className="highcharts-a11y-proxy-container"+(_?"-"+_:""),g(C,{top:"0",left:"0"}),this.chart.styledMode||(C.style.whiteSpace="nowrap",C.style.position="absolute"),C}getCurrentGroupOrderInDOM(){let _=E=>{let A=Object.keys(this.groups),M=A.length;for(;M--;){let S=A[M],N=this.groups[S];if(N&&E===N.groupElement)return S}},C=E=>{let A=[],M=E.children;for(let S=0;S<M.length;++S){let N=_(M[S]);N&&A.push(N)}return A},k=C(this.beforeChartProxyPosContainer),w=C(this.afterChartProxyPosContainer);return k.push("series"),k.concat(w)}isDOMOrderGroupOrder(){let _=this.getCurrentGroupOrderInDOM(),C=this.groupOrder.filter(w=>w==="series"||!!this.groups[w]),k=_.length;if(k!==C.length)return!1;for(;k--;)if(_[k]!==C[k])return!1;return!0}updatePosContainerPositions(){let _=this.chart;if(_.renderer.forExport)return;let C=_.renderer.box;_.container.insertBefore(this.afterChartProxyPosContainer,C.nextSibling),_.container.insertBefore(this.beforeChartProxyPosContainer,C),x(this.chart,this.afterChartProxyPosContainer),x(this.chart,this.beforeChartProxyPosContainer)}}}),r(t,"Accessibility/Components/RangeSelectorComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{unhideChartElementFromAT:p,getAxisRangeDescription:m}=c,{addEvent:y,attr:g}=h;class x extends n{init(){let _=this.chart;this.announcer=new a(_,"polite")}onChartUpdate(){let _=this.chart,C=this,k=_.rangeSelector;k&&(this.updateSelectorVisibility(),this.setDropdownAttrs(),k.buttons&&k.buttons.length&&k.buttons.forEach(w=>{C.setRangeButtonAttrs(w)}),k.maxInput&&k.minInput&&["minInput","maxInput"].forEach(function(w,E){let A=k[w];A&&(p(_,A),C.setRangeInputAttrs(A,"accessibility.rangeSelector."+(E?"max":"min")+"InputLabel"))}))}updateSelectorVisibility(){let _=this.chart,C=_.rangeSelector,k=C&&C.dropdown,w=C&&C.buttons||[],E=A=>A.setAttribute("aria-hidden",!0);C&&C.hasVisibleDropdown&&k?(p(_,k),w.forEach(A=>E(A.element))):(k&&E(k),w.forEach(A=>p(_,A.element)))}setDropdownAttrs(){let _=this.chart,C=_.rangeSelector&&_.rangeSelector.dropdown;if(C){let k=_.langFormat("accessibility.rangeSelector.dropdownLabel",{rangeTitle:_.options.lang.rangeSelectorZoom});C.setAttribute("aria-label",k),C.setAttribute("tabindex",-1)}}setRangeButtonAttrs(_){g(_.element,{tabindex:-1,role:"button"})}setRangeInputAttrs(_,C){let k=this.chart;g(_,{tabindex:-1,"aria-label":k.langFormat(C,{chart:k})})}onButtonNavKbdArrowKey(_,C){let k=_.response,w=this.keyCodes,E=this.chart,A=E.options.accessibility.keyboardNavigation.wrapAround,M=C===w.left||C===w.up?-1:1;return E.highlightRangeSelectorButton(E.highlightedRangeSelectorItemIx+M)?k.success:A?(_.init(M),k.success):k[M>0?"next":"prev"]}onButtonNavKbdClick(_){let C=_.response,k=this.chart;return k.oldRangeSelectorItemState!==3&&this.fakeClickEvent(k.rangeSelector.buttons[k.highlightedRangeSelectorItemIx].element),C.success}onAfterBtnClick(){let _=this.chart,C=m(_.xAxis[0]),k=_.langFormat("accessibility.rangeSelector.clickButtonAnnouncement",{chart:_,axisRangeDescription:C});k&&this.announcer.announce(k)}onInputKbdMove(_){let C=this.chart,k=C.rangeSelector,w=C.highlightedInputRangeIx=(C.highlightedInputRangeIx||0)+_;if(w>1||w<0){if(C.accessibility)return C.accessibility.keyboardNavigation.exiting=!0,C.accessibility.keyboardNavigation.tabindexContainer.focus(),C.accessibility.keyboardNavigation.move(_)}else if(k){let E=k[w?"maxDateBox":"minDateBox"],A=k[w?"maxInput":"minInput"];E&&A&&C.setFocusToElement(E,A)}return!0}onInputNavInit(_){let C=this,k=this.chart,w=_>0?0:1,E=k.rangeSelector,A=E&&E[w?"maxDateBox":"minDateBox"],M=E&&E.minInput,S=E&&E.maxInput;if(k.highlightedInputRangeIx=w,A&&M&&S){k.setFocusToElement(A,w?S:M),this.removeInputKeydownHandler&&this.removeInputKeydownHandler();let N=K=>{(K.which||K.keyCode)===this.keyCodes.tab&&C.onInputKbdMove(K.shiftKey?-1:1)&&(K.preventDefault(),K.stopPropagation())},Y=y(M,"keydown",N),Z=y(S,"keydown",N);this.removeInputKeydownHandler=()=>{Y(),Z()}}}onInputNavTerminate(){let _=this.chart.rangeSelector||{};_.maxInput&&_.hideInput("max"),_.minInput&&_.hideInput("min"),this.removeInputKeydownHandler&&(this.removeInputKeydownHandler(),delete this.removeInputKeydownHandler)}initDropdownNav(){let _=this.chart,C=_.rangeSelector,k=C&&C.dropdown;C&&k&&(_.setFocusToElement(C.buttonGroup,k),this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeDropdownKeydownHandler=y(k,"keydown",w=>{let E=(w.which||w.keyCode)===this.keyCodes.tab,A=_.accessibility;E&&(w.preventDefault(),w.stopPropagation(),A&&(A.keyboardNavigation.tabindexContainer.focus(),A.keyboardNavigation.move(w.shiftKey?-1:1)))}))}getRangeSelectorButtonNavigation(){let _=this.chart,C=this.keyCodes,k=this;return new s(_,{keyCodeMap:[[[C.left,C.right,C.up,C.down],function(w){return k.onButtonNavKbdArrowKey(this,w)}],[[C.enter,C.space],function(){return k.onButtonNavKbdClick(this)}]],validate:function(){return!!(_.rangeSelector&&_.rangeSelector.buttons&&_.rangeSelector.buttons.length)},init:function(w){let E=_.rangeSelector;if(E&&E.hasVisibleDropdown)k.initDropdownNav();else if(E){let A=E.buttons.length-1;_.highlightRangeSelectorButton(w>0?0:A)}},terminate:function(){k.removeDropdownKeydownHandler&&(k.removeDropdownKeydownHandler(),delete k.removeDropdownKeydownHandler)}})}getRangeSelectorInputNavigation(){let _=this.chart,C=this;return new s(_,{keyCodeMap:[],validate:function(){return!!(_.rangeSelector&&_.rangeSelector.inputGroup&&_.rangeSelector.inputGroup.element.style.visibility!=="hidden"&&_.options.rangeSelector.inputEnabled!==!1&&_.rangeSelector.minInput&&_.rangeSelector.maxInput)},init:function(k){C.onInputNavInit(k)},terminate:function(){C.onInputNavTerminate()}})}getKeyboardNavigation(){return[this.getRangeSelectorButtonNavigation(),this.getRangeSelectorInputNavigation()]}destroy(){this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeInputKeydownHandler&&this.removeInputKeydownHandler(),this.announcer&&this.announcer.destroy()}}return function(v){function _(k){let w=this.rangeSelector&&this.rangeSelector.buttons||[],E=this.highlightedRangeSelectorItemIx,A=this.rangeSelector&&this.rangeSelector.selected;return E!==void 0&&w[E]&&E!==A&&w[E].setState(this.oldRangeSelectorItemState||0),this.highlightedRangeSelectorItemIx=k,!!w[k]&&(this.setFocusToElement(w[k].box,w[k].element),k!==A&&(this.oldRangeSelectorItemState=w[k].state,w[k].setState(1)),!0)}function C(){let k=this.chart.accessibility;if(k&&k.components.rangeSelector)return k.components.rangeSelector.onAfterBtnClick()}v.compose=function(k,w){let E=k.prototype;E.highlightRangeSelectorButton||(E.highlightRangeSelectorButton=_,y(w,"afterBtnClick",C))}}(x||(x={})),x}),r(t,"Accessibility/Components/SeriesComponent/ForcedMarkers.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){var c;let{composed:s}=n,{addEvent:h,merge:p,pushUnique:m}=a;return function(y){function g(E){p(!0,E,{marker:{enabled:!0,states:{normal:{opacity:0}}}})}function x(E){return E.marker.states&&E.marker.states.normal&&E.marker.states.normal.opacity}function v(E){return!!(E._hasPointMarkers&&E.points&&E.points.length)}function _(){this.chart.styledMode&&(this.markerGroup&&this.markerGroup[this.a11yMarkersForced?"addClass":"removeClass"]("highcharts-a11y-markers-hidden"),v(this)&&this.points.forEach(E=>{E.graphic&&(E.graphic[E.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-hidden"),E.graphic[E.hasForcedA11yMarker===!1?"addClass":"removeClass"]("highcharts-a11y-marker-visible"))}))}function C(E){this.resetA11yMarkerOptions=p(E.options.marker||{},this.userOptions.marker||{})}function k(){let E=this.options;(function(A){let M=A.chart.options.accessibility.enabled,S=(A.options.accessibility&&A.options.accessibility.enabled)!==!1;return M&&S&&function(N){let Y=N.chart.options.accessibility;return N.points.length<Y.series.pointDescriptionEnabledThreshold||Y.series.pointDescriptionEnabledThreshold===!1}(A)})(this)?(E.marker&&E.marker.enabled===!1&&(this.a11yMarkersForced=!0,g(this.options)),v(this)&&function(A){let M=A.points.length;for(;M--;){let S=A.points[M],N=S.options,Y=S.hasForcedA11yMarker;if(delete S.hasForcedA11yMarker,N.marker){let Z=Y&&x(N)===0;N.marker.enabled&&!Z?(p(!0,N.marker,{states:{normal:{opacity:x(N)||1}}}),S.hasForcedA11yMarker=!1):N.marker.enabled===!1&&(g(N),S.hasForcedA11yMarker=!0)}}}(this)):this.a11yMarkersForced&&(delete this.a11yMarkersForced,function(A){let M=A.resetA11yMarkerOptions;if(M){let S=M.states&&M.states.normal&&M.states.normal.opacity;A.userOptions&&A.userOptions.marker&&(A.userOptions.marker.enabled=!0),A.update({marker:{enabled:M.enabled,states:{normal:{opacity:S}}}})}}(this),delete this.resetA11yMarkerOptions)}function w(){this.boosted&&this.a11yMarkersForced&&(p(!0,this.options,{marker:{enabled:!1}}),delete this.a11yMarkersForced)}y.compose=function(E){m(s,"A11y.FM")&&(h(E,"afterSetOptions",C),h(E,"render",k),h(E,"afterRender",_),h(E,"renderCanvas",w))}}(c||(c={})),c}),r(t,"Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js",[t["Core/Series/Point.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/ChartUtilities.js"]],function(n,a,c,s,h,p,m,y){let{seriesTypes:g}=c,{doc:x}=s,{defined:v,fireEvent:_}=h,{getPointFromXY:C,getSeriesFromName:k,scrollAxisToPoint:w}=y;function E(K){let U=K.index,$=K.series.points,B=$.length;if($[U]===K)return U;for(;B--;)if($[B]===K)return B}function A(K){let U=K.chart.options.accessibility.keyboardNavigation.seriesNavigation,$=K.options.accessibility||{},B=$.keyboardNavigation;return B&&B.enabled===!1||$.enabled===!1||K.options.enableMouseTracking===!1||!K.visible||U.pointNavigationEnabledThreshold&&+U.pointNavigationEnabledThreshold<=K.points.length}function M(K){let U=K.series.chart.options.accessibility,$=K.options.accessibility&&K.options.accessibility.enabled===!1;return K.isNull&&U.keyboardNavigation.seriesNavigation.skipNullPoints||K.visible===!1||K.isInside===!1||$||A(K.series)}function S(K){let U=K.series||[],$=U.length;for(let B=0;B<$;++B)if(!A(U[B])){let R=function(L){let G=L.points||[],F=G.length;for(let j=0;j<F;++j)if(!M(G[j]))return G[j];return null}(U[B]);if(R)return R}return null}function N(K){let U=K.series.length,$=!1;for(;U--&&(K.highlightedPoint=K.series[U].points[K.series[U].points.length-1],!($=K.series[U].highlightNextValidPoint())););return $}function Y(K){delete K.highlightedPoint;let U=S(K);return!!U&&U.highlight()}class Z{constructor(U,$){this.keyCodes=$,this.chart=U}init(){let U=this,$=this.chart,B=this.eventProvider=new m;B.addEvent(a,"destroy",function(){return U.onSeriesDestroy(this)}),B.addEvent($,"afterApplyDrilldown",function(){(function(R){let L=S(R);L&&L.highlight(!1)})(this)}),B.addEvent($,"drilldown",function(R){let L=R.point,G=L.series;U.lastDrilledDownPoint={x:L.x,y:L.y,seriesName:G?G.name:""}}),B.addEvent($,"drillupall",function(){setTimeout(function(){U.onDrillupAll()},10)}),B.addEvent(n,"afterSetState",function(){let R=this.graphic&&this.graphic.element,L=x.activeElement,G=L&&L.getAttribute("class"),F=G&&G.indexOf("highcharts-a11y-proxy-element")>-1;$.highlightedPoint===this&&L!==R&&!F&&R&&R.focus&&R.focus()})}onDrillupAll(){let U,$=this.lastDrilledDownPoint,B=this.chart,R=$&&k(B,$.seriesName);$&&R&&v($.x)&&v($.y)&&(U=C(R,$.x,$.y)),U=U||S(B),B.container&&B.container.focus(),U&&U.highlight&&U.highlight(!1)}getKeyboardNavigationHandler(){let U=this,$=this.keyCodes,B=this.chart,R=B.inverted;return new p(B,{keyCodeMap:[[R?[$.up,$.down]:[$.left,$.right],function(L){return U.onKbdSideways(this,L)}],[R?[$.left,$.right]:[$.up,$.down],function(L){return U.onKbdVertical(this,L)}],[[$.enter,$.space],function(L,G){var j;let F=B.highlightedPoint;if(F){let{plotLeft:q,plotTop:W}=this.chart,{plotX:se=0,plotY:fe=0}=F;G={...G,chartX:q+se,chartY:W+fe,point:F,target:((j=F.graphic)==null?void 0:j.element)||G.target},_(F.series,"click",G),F.firePointEvent("click",G)}return this.response.success}],[[$.home],function(){return Y(B),this.response.success}],[[$.end],function(){return N(B),this.response.success}],[[$.pageDown,$.pageUp],function(L){return B.highlightAdjacentSeries(L===$.pageDown),this.response.success}]],init:function(){return U.onHandlerInit(this)},validate:function(){return!!S(B)},terminate:function(){return U.onHandlerTerminate()}})}onKbdSideways(U,$){let B=this.keyCodes,R=$===B.right||$===B.down;return this.attemptHighlightAdjacentPoint(U,R)}onHandlerInit(U){let $=this.chart;return $.options.accessibility.keyboardNavigation.seriesNavigation.rememberPointFocus&&$.highlightedPoint?$.highlightedPoint.highlight():Y($),U.response.success}onKbdVertical(U,$){let B=this.chart,R=this.keyCodes,L=$===R.down||$===R.right,G=B.options.accessibility.keyboardNavigation.seriesNavigation;if(G.mode&&G.mode==="serialize")return this.attemptHighlightAdjacentPoint(U,L);let F=B.highlightedPoint&&B.highlightedPoint.series.keyboardMoveVertical?"highlightAdjacentPointVertical":"highlightAdjacentSeries";return B[F](L),U.response.success}onHandlerTerminate(){let U=this.chart,$=U.options.accessibility.keyboardNavigation;U.tooltip&&U.tooltip.hide(0);let B=U.highlightedPoint&&U.highlightedPoint.series;B&&B.onMouseOut&&B.onMouseOut(),U.highlightedPoint&&U.highlightedPoint.onMouseOut&&U.highlightedPoint.onMouseOut(),$.seriesNavigation.rememberPointFocus||delete U.highlightedPoint}attemptHighlightAdjacentPoint(U,$){let B=this.chart,R=B.options.accessibility.keyboardNavigation.wrapAround;return B.highlightAdjacentPoint($)||R&&($?Y(B):N(B))?U.response.success:U.response[$?"next":"prev"]}onSeriesDestroy(U){let $=this.chart;$.highlightedPoint&&$.highlightedPoint.series===U&&(delete $.highlightedPoint,$.focusElement&&$.focusElement.removeFocusBorder())}destroy(){this.eventProvider.removeAddedEvents()}}return function(K){function U(G){let F,j,q=this.series,W=this.highlightedPoint,se=W&&E(W)||0,fe=W&&W.series.points||[],ee=this.series&&this.series[this.series.length-1],oe=ee&&ee.points&&ee.points[ee.points.length-1];if(!q[0]||!q[0].points)return!1;if(W){if(F=q[W.series.index+(G?1:-1)],(j=fe[se+(G?1:-1)])||!F||(j=F.points[G?0:F.points.length-1]),!j)return!1}else j=G?q[0].points[0]:oe;return M(j)?(A(F=j.series)?this.highlightedPoint=G?F.points[F.points.length-1]:F.points[0]:this.highlightedPoint=j,this.highlightAdjacentPoint(G)):j.highlight()}function $(G){let F=this.highlightedPoint,j=1/0,q;return!!(v(F.plotX)&&v(F.plotY))&&(this.series.forEach(W=>{A(W)||W.points.forEach(se=>{if(!v(se.plotY)||!v(se.plotX)||se===F)return;let fe=se.plotY-F.plotY,ee=Math.abs(se.plotX-F.plotX),oe=Math.abs(fe)*Math.abs(fe)+ee*ee*4;W.yAxis&&W.yAxis.reversed&&(fe*=-1),!(fe<=0&&G||fe>=0&&!G||oe<5||M(se))&&oe<j&&(j=oe,q=se)})}),!!q&&q.highlight())}function B(G){let F,j,q,W=this.highlightedPoint,se=this.series&&this.series[this.series.length-1],fe=se&&se.points&&se.points[se.points.length-1];return this.highlightedPoint?!!((F=this.series[W.series.index+(G?-1:1)])&&(j=function(ee,oe,Ce,ge){let Ee=1/0,J,ie,le,be=oe.points.length,te=ae=>!(v(ae.plotX)&&v(ae.plotY));if(!te(ee)){for(;be--;)!te(J=oe.points[be])&&(le=(ee.plotX-J.plotX)*(ee.plotX-J.plotX)*4+(ee.plotY-J.plotY)*(ee.plotY-J.plotY)*1)<Ee&&(Ee=le,ie=be);return v(ie)?oe.points[ie]:void 0}}(W,F)))&&(A(F)?(j.highlight(),(q=this.highlightAdjacentSeries(G))?q:(W.highlight(),!1)):(j.highlight(),j.series.highlightNextValidPoint())):(F=G?this.series&&this.series[0]:se,!!(j=G?F&&F.points&&F.points[0]:fe)&&j.highlight())}function R(G=!0){var W,se;let F=this.series.chart,j=(se=(W=F.tooltip)==null?void 0:W.label)==null?void 0:se.element;!this.isNull&&G?this.onMouseOver():F.tooltip&&F.tooltip.hide(0),w(this),this.graphic&&(F.setFocusToElement(this.graphic),!G&&F.focusElement&&F.focusElement.removeFocusBorder()),F.highlightedPoint=this;let q=j==null?void 0:j.getBoundingClientRect().top;if(j&&q&&q<0){let fe=window.scrollY;window.scrollTo({behavior:"smooth",top:fe+q})}return this}function L(){let G=this.chart.highlightedPoint,F=(G&&G.series)===this?E(G):0,j=this.points,q=j.length;if(j&&q){for(let W=F;W<q;++W)if(!M(j[W]))return j[W].highlight();for(let W=F;W>=0;--W)if(!M(j[W]))return j[W].highlight()}return!1}K.compose=function(G,F,j){let q=G.prototype,W=F.prototype,se=j.prototype;q.highlightAdjacentPoint||(q.highlightAdjacentPoint=U,q.highlightAdjacentPointVertical=$,q.highlightAdjacentSeries=B,W.highlight=R,se.keyboardMoveVertical=!0,["column","gantt","pie"].forEach(fe=>{g[fe]&&(g[fe].prototype.keyboardMoveVertical=!1)}),se.highlightNextValidPoint=L)}}(Z||(Z={})),Z}),r(t,"Accessibility/Components/SeriesComponent/SeriesComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Components/SeriesComponent/ForcedMarkers.js"],t["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"],t["Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js"]],function(n,a,c,s,h,p){let{hideSeriesFromAT:m}=a,{describeSeries:y}=h;return class extends n{static compose(g,x,v){s.compose(v),c.compose(v),p.compose(g,x,v)}init(){this.newDataAnnouncer=new s(this.chart),this.newDataAnnouncer.init(),this.keyboardNavigation=new p(this.chart,this.keyCodes),this.keyboardNavigation.init(),this.hideTooltipFromATWhenShown(),this.hideSeriesLabelsFromATWhenShown()}hideTooltipFromATWhenShown(){let g=this;this.chart.tooltip&&this.addEvent(this.chart.tooltip.constructor,"refresh",function(){this.chart===g.chart&&this.label&&this.label.element&&this.label.element.setAttribute("aria-hidden",!0)})}hideSeriesLabelsFromATWhenShown(){this.addEvent(this.chart,"afterDrawSeriesLabels",function(){this.series.forEach(function(g){g.labelBySeries&&g.labelBySeries.attr("aria-hidden",!0)})})}onChartRender(){this.chart.series.forEach(function(g){(g.options.accessibility&&g.options.accessibility.enabled)!==!1&&g.visible&&g.getPointsCollection().length!==0?y(g):m(g)})}getKeyboardNavigation(){return this.keyboardNavigation.getKeyboardNavigationHandler()}destroy(){this.newDataAnnouncer.destroy(),this.keyboardNavigation.destroy()}}}),r(t,"Accessibility/Components/ZoomComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{unhideChartElementFromAT:p}=a,{getFakeMouseEvent:m}=c,{attr:y,pick:g}=h;return class extends n{constructor(){super(...arguments),this.focusedMapNavButtonIx=-1}init(){let x=this,v=this.chart;this.proxyProvider.addGroup("zoom","div"),["afterShowResetZoom","afterApplyDrilldown","drillupall"].forEach(_=>{x.addEvent(v,_,function(){x.updateProxyOverlays()})})}onChartUpdate(){let x=this.chart,v=this;x.mapNavigation&&x.mapNavigation.navButtons.forEach((_,C)=>{p(x,_.element),v.setMapNavButtonAttrs(_.element,"accessibility.zoom.mapZoom"+(C?"Out":"In"))})}setMapNavButtonAttrs(x,v){let _=this.chart;y(x,{tabindex:-1,role:"button","aria-label":_.langFormat(v,{chart:_})})}onChartRender(){this.updateProxyOverlays()}updateProxyOverlays(){let x=this.chart;if(this.proxyProvider.clearGroup("zoom"),x.resetZoomButton&&this.createZoomProxyButton(x.resetZoomButton,"resetZoomProxyButton",x.langFormat("accessibility.zoom.resetZoomButton",{chart:x})),x.drillUpButton&&x.breadcrumbs&&x.breadcrumbs.list){let v=x.breadcrumbs.list[x.breadcrumbs.list.length-1];this.createZoomProxyButton(x.drillUpButton,"drillUpProxyButton",x.langFormat("accessibility.drillUpButton",{chart:x,buttonText:x.breadcrumbs.getButtonText(v)}))}}createZoomProxyButton(x,v,_){this[v]=this.proxyProvider.addProxyElement("zoom",{click:x},"button",{"aria-label":_,tabindex:-1})}getMapZoomNavigation(){let x=this.keyCodes,v=this.chart,_=this;return new s(v,{keyCodeMap:[[[x.up,x.down,x.left,x.right],function(C){return _.onMapKbdArrow(this,C)}],[[x.tab],function(C,k){return _.onMapKbdTab(this,k)}],[[x.space,x.enter],function(){return _.onMapKbdClick(this)}]],validate:function(){return!!(v.mapView&&v.mapNavigation&&v.mapNavigation.navButtons.length)},init:function(C){return _.onMapNavInit(C)}})}onMapKbdArrow(x,v){let _=this.chart,C=this.keyCodes,k=_.container,w=v===C.up||v===C.down,E=v===C.left||v===C.up?1:-1,A=(w?_.plotHeight:_.plotWidth)/10*E,M=10*Math.random(),S={x:k.offsetLeft+_.plotLeft+_.plotWidth/2+M,y:k.offsetTop+_.plotTop+_.plotHeight/2+M},N=w?{x:S.x,y:S.y+A}:{x:S.x+A,y:S.y};return[m("mousedown",S),m("mousemove",N),m("mouseup",N)].forEach(Y=>k.dispatchEvent(Y)),x.response.success}onMapKbdTab(x,v){let _=this.chart,C=x.response,k=v.shiftKey,w=k&&!this.focusedMapNavButtonIx||!k&&this.focusedMapNavButtonIx;if(_.mapNavigation.navButtons[this.focusedMapNavButtonIx].setState(0),w)return _.mapView&&_.mapView.zoomBy(),C[k?"prev":"next"];this.focusedMapNavButtonIx+=k?-1:1;let E=_.mapNavigation.navButtons[this.focusedMapNavButtonIx];return _.setFocusToElement(E.box,E.element),E.setState(2),C.success}onMapKbdClick(x){let v=this.chart.mapNavigation.navButtons[this.focusedMapNavButtonIx].element;return this.fakeClickEvent(v),x.response.success}onMapNavInit(x){let v=this.chart,_=v.mapNavigation.navButtons[0],C=v.mapNavigation.navButtons[1],k=x>0?_:C;v.setFocusToElement(k.box,k.element),k.setState(2),this.focusedMapNavButtonIx=x>0?0:1}simpleButtonNavigation(x,v,_){let C=this.keyCodes,k=this,w=this.chart;return new s(w,{keyCodeMap:[[[C.tab,C.up,C.down,C.left,C.right],function(E,A){let M=E===C.tab&&A.shiftKey||E===C.left||E===C.up;return this.response[M?"prev":"next"]}],[[C.space,C.enter],function(){return g(_(this,w),this.response.success)}]],validate:function(){return w[x]&&w[x].box&&k[v].innerElement},init:function(){w.setFocusToElement(w[x].box,k[v].innerElement)}})}getKeyboardNavigation(){return[this.simpleButtonNavigation("resetZoomButton","resetZoomProxyButton",function(x,v){v.zoomOut()}),this.simpleButtonNavigation("drillUpButton","drillUpProxyButton",function(x,v){return v.drillUp(),x.response.prev}),this.getMapZoomNavigation()]}}}),r(t,"Accessibility/HighContrastMode.js",[t["Core/Globals.js"]],function(n){let{doc:a,isMS:c,win:s}=n;return{isHighContrastModeActive:function(){let h=/(Edg)/.test(s.navigator.userAgent);if(s.matchMedia&&h)return s.matchMedia("(-ms-high-contrast: active)").matches;if(c&&s.getComputedStyle){let p=a.createElement("div");p.style.backgroundImage="url(data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==)",a.body.appendChild(p);let m=(p.currentStyle||s.getComputedStyle(p)).backgroundImage;return a.body.removeChild(p),m==="none"}return s.matchMedia&&s.matchMedia("(forced-colors: active)").matches},setHighContrastTheme:function(h){var y;h.highContrastModeActive=!0;let p=h.options.accessibility.highContrastTheme;h.update(p,!1);let m=((y=p.colors)==null?void 0:y.length)>1;h.series.forEach(function(g){let x=p.plotOptions[g.type]||{},v=m&&g.colorIndex!==void 0?p.colors[g.colorIndex]:x.color||"window",_={color:x.color||"windowText",colors:m?p.colors:[x.color||"windowText"],borderColor:x.borderColor||"window",fillColor:v};g.update(_,!1),g.points&&g.points.forEach(function(C){C.options&&C.options.color&&C.update({color:x.color||"windowText",borderColor:x.borderColor||"window"},!1)})}),h.redraw()}}}),r(t,"Accessibility/HighContrastTheme.js",[],function(){return{chart:{backgroundColor:"window"},title:{style:{color:"windowText"}},subtitle:{style:{color:"windowText"}},colorAxis:{minColor:"windowText",maxColor:"windowText",stops:[],dataClasses:[]},colors:["windowText"],xAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},yAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},tooltip:{backgroundColor:"window",borderColor:"windowText",style:{color:"windowText"}},plotOptions:{series:{lineColor:"windowText",fillColor:"window",borderColor:"windowText",edgeColor:"windowText",borderWidth:1,dataLabels:{connectorColor:"windowText",color:"windowText",style:{color:"windowText",textOutline:"none"}},marker:{lineColor:"windowText",fillColor:"windowText"}},pie:{color:"window",colors:["window"],borderColor:"windowText",borderWidth:1},boxplot:{fillColor:"window"},candlestick:{lineColor:"windowText",fillColor:"window"},errorbar:{fillColor:"window"}},legend:{backgroundColor:"window",itemStyle:{color:"windowText"},itemHoverStyle:{color:"windowText"},itemHiddenStyle:{color:"#555"},title:{style:{color:"windowText"}}},credits:{style:{color:"windowText"}},drilldown:{activeAxisLabelStyle:{color:"windowText"},activeDataLabelStyle:{color:"windowText"}},navigation:{buttonOptions:{symbolStroke:"windowText",theme:{fill:"window"}}},rangeSelector:{buttonTheme:{fill:"window",stroke:"windowText",style:{color:"windowText"},states:{hover:{fill:"window",stroke:"windowText",style:{color:"windowText"}},select:{fill:"#444",stroke:"windowText",style:{color:"windowText"}}}},inputBoxBorderColor:"windowText",inputStyle:{backgroundColor:"window",color:"windowText"},labelStyle:{color:"windowText"}},navigator:{handles:{backgroundColor:"window",borderColor:"windowText"},outlineColor:"windowText",maskFill:"transparent",series:{color:"windowText",lineColor:"windowText"},xAxis:{gridLineColor:"windowText"}},scrollbar:{barBackgroundColor:"#444",barBorderColor:"windowText",buttonArrowColor:"windowText",buttonBackgroundColor:"window",buttonBorderColor:"windowText",rifleColor:"windowText",trackBackgroundColor:"window",trackBorderColor:"windowText"}}}),r(t,"Accessibility/Options/A11yDefaults.js",[],function(){return{accessibility:{enabled:!0,screenReaderSection:{beforeChartFormat:"<{headingTagName}>{chartTitle}</{headingTagName}><div>{typeDescription}</div><div>{chartSubtitle}</div><div>{chartLongdesc}</div><div>{playAsSoundButton}</div><div>{viewTableButton}</div><div>{xAxisDescription}</div><div>{yAxisDescription}</div><div>{annotationsTitle}{annotationsList}</div>",afterChartFormat:"{endOfChartMarker}",axisRangeDateFormat:"%Y-%m-%d %H:%M:%S"},series:{descriptionFormat:"{seriesDescription}{authorDescription}{axisDescription}",describeSingleSeries:!1,pointDescriptionEnabledThreshold:200},point:{valueDescriptionFormat:"{xDescription}{separator}{value}.",describeNull:!0},landmarkVerbosity:"all",linkedDescription:'*[data-highcharts-chart="{index}"] + .highcharts-description',highContrastMode:"auto",keyboardNavigation:{enabled:!0,focusBorder:{enabled:!0,hideBrowserFocusOutline:!0,style:{color:"#334eff",lineWidth:2,borderRadius:3},margin:2},order:["series","zoom","rangeSelector","navigator","legend","chartMenu"],wrapAround:!0,seriesNavigation:{skipNullPoints:!0,pointNavigationEnabledThreshold:!1,rememberPointFocus:!1}},announceNewData:{enabled:!1,minAnnounceInterval:5e3,interruptUser:!1}},legend:{accessibility:{enabled:!0,keyboardNavigation:{enabled:!0}}},exporting:{accessibility:{enabled:!0}},navigator:{accessibility:{enabled:!0}}}}),r(t,"Accessibility/Options/LangDefaults.js",[],function(){return{accessibility:{defaultChartTitle:"Chart",chartContainerLabel:"{title}. Highcharts interactive chart.",svgContainerLabel:"Interactive chart",drillUpButton:"{buttonText}",credits:"Chart credits: {creditsStr}",thousandsSep:",",svgContainerTitle:"",graphicContainerLabel:"",screenReaderSection:{beforeRegionLabel:"",afterRegionLabel:"",annotations:{heading:"Chart annotations summary",descriptionSinglePoint:"{annotationText}. Related to {annotationPoint}",descriptionMultiplePoints:"{annotationText}. Related to {annotationPoint}{#each additionalAnnotationPoints}, also related to {this}{/each}",descriptionNoPoints:"{annotationText}"},endOfChartMarker:"End of interactive chart."},sonification:{playAsSoundButtonText:"Play as sound, {chartTitle}",playAsSoundClickAnnouncement:"Play"},legend:{legendLabelNoTitle:"Toggle series visibility, {chartTitle}",legendLabel:"Chart legend: {legendTitle}",legendItem:"Show {itemName}"},zoom:{mapZoomIn:"Zoom chart",mapZoomOut:"Zoom out chart",resetZoomButton:"Reset zoom"},rangeSelector:{dropdownLabel:"{rangeTitle}",minInputLabel:"Select start date.",maxInputLabel:"Select end date.",clickButtonAnnouncement:"Viewing {axisRangeDescription}"},navigator:{handleLabel:"{#eq handleIx 0}Start, percent{else}End, percent{/eq}",groupLabel:"Axis zoom",changeAnnouncement:"{axisRangeDescription}"},table:{viewAsDataTableButtonText:"View as data table, {chartTitle}",tableSummary:"Table representation of chart."},announceNewData:{newDataAnnounce:"Updated data for chart {chartTitle}",newSeriesAnnounceSingle:"New data series: {seriesDesc}",newPointAnnounceSingle:"New data point: {pointDesc}",newSeriesAnnounceMultiple:"New data series in chart {chartTitle}: {seriesDesc}",newPointAnnounceMultiple:"New data point in chart {chartTitle}: {pointDesc}"},seriesTypeDescriptions:{boxplot:"Box plot charts are typically used to display groups of statistical data. Each data point in the chart can have up to 5 values: minimum, lower quartile, median, upper quartile, and maximum.",arearange:"Arearange charts are line charts displaying a range between a lower and higher value for each point.",areasplinerange:"These charts are line charts displaying a range between a lower and higher value for each point.",bubble:"Bubble charts are scatter charts where each data point also has a size value.",columnrange:"Columnrange charts are column charts displaying a range between a lower and higher value for each point.",errorbar:"Errorbar series are used to display the variability of the data.",funnel:"Funnel charts are used to display reduction of data in stages.",pyramid:"Pyramid charts consist of a single pyramid with item heights corresponding to each point value.",waterfall:"A waterfall chart is a column chart where each column contributes towards a total end value."},chartTypes:{emptyChart:"Empty chart",mapTypeDescription:"Map of {mapTitle} with {numSeries} data series.",unknownMap:"Map of unspecified region with {numSeries} data series.",combinationChart:"Combination chart with {numSeries} data series.",defaultSingle:"Chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",defaultMultiple:"Chart with {numSeries} data series.",splineSingle:"Line chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",splineMultiple:"Line chart with {numSeries} lines.",lineSingle:"Line chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",lineMultiple:"Line chart with {numSeries} lines.",columnSingle:"Bar chart with {numPoints} {#eq numPoints 1}bar{else}bars{/eq}.",columnMultiple:"Bar chart with {numSeries} data series.",barSingle:"Bar chart with {numPoints} {#eq numPoints 1}bar{else}bars{/eq}.",barMultiple:"Bar chart with {numSeries} data series.",pieSingle:"Pie chart with {numPoints} {#eq numPoints 1}slice{else}slices{/eq}.",pieMultiple:"Pie chart with {numSeries} pies.",scatterSingle:"Scatter chart with {numPoints} {#eq numPoints 1}point{else}points{/eq}.",scatterMultiple:"Scatter chart with {numSeries} data series.",boxplotSingle:"Boxplot with {numPoints} {#eq numPoints 1}box{else}boxes{/eq}.",boxplotMultiple:"Boxplot with {numSeries} data series.",bubbleSingle:"Bubble chart with {numPoints} {#eq numPoints 1}bubbles{else}bubble{/eq}.",bubbleMultiple:"Bubble chart with {numSeries} data series."},axis:{xAxisDescriptionSingular:"The chart has 1 X axis displaying {names[0]}. {ranges[0]}",xAxisDescriptionPlural:"The chart has {numAxes} X axes displaying {#each names}{#unless @first},{/unless}{#if @last} and{/if} {this}{/each}.",yAxisDescriptionSingular:"The chart has 1 Y axis displaying {names[0]}. {ranges[0]}",yAxisDescriptionPlural:"The chart has {numAxes} Y axes displaying {#each names}{#unless @first},{/unless}{#if @last} and{/if} {this}{/each}.",timeRangeDays:"Data range: {range} days.",timeRangeHours:"Data range: {range} hours.",timeRangeMinutes:"Data range: {range} minutes.",timeRangeSeconds:"Data range: {range} seconds.",rangeFromTo:"Data ranges from {rangeFrom} to {rangeTo}.",rangeCategories:"Data range: {numCategories} categories."},exporting:{chartMenuLabel:"Chart menu",menuButtonLabel:"View chart menu, {chartTitle}"},series:{summary:{default:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",defaultCombination:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",line:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",lineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",spline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",splineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",column:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",columnCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",bar:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",barCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",pie:"{series.name}, pie {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}slice{else}slices{/eq}.",pieCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Pie with {series.points.length} {#eq series.points.length 1}slice{else}slices{/eq}.",scatter:"{series.name}, scatter plot {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}point{else}points{/eq}.",scatterCombination:"{series.name}, series {seriesNumber} of {chart.series.length}, scatter plot with {series.points.length} {#eq series.points.length 1}point{else}points{/eq}.",boxplot:"{series.name}, boxplot {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}box{else}boxes{/eq}.",boxplotCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Boxplot with {series.points.length} {#eq series.points.length 1}box{else}boxes{/eq}.",bubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",bubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",map:"{series.name}, map {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}area{else}areas{/eq}.",mapCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Map with {series.points.length} {#eq series.points.length 1}area{else}areas{/eq}.",mapline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",maplineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",mapbubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",mapbubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}."},description:"{description}",xAxisDescription:"X axis, {name}",yAxisDescription:"Y axis, {name}",nullPointValue:"No value",pointAnnotationsDescription:"{#each annotations}Annotation: {this}{/each}"}}}}),r(t,"Accessibility/Options/DeprecatedOptions.js",[t["Core/Utilities.js"]],function(n){let{error:a,pick:c}=n;function s(p,m,y){let g=p,x,v=0;for(;v<m.length-1;++v)g=g[x=m[v]]=c(g[x],{});g[m[m.length-1]]=y}function h(p,m,y,g){function x(C,k){return k.reduce(function(w,E){return w[E]},C)}let v=x(p.options,m),_=x(p.options,y);Object.keys(g).forEach(function(C){let k=v[C];k!==void 0&&(s(_,g[C],k),a(32,!1,p,{[m.join(".")+"."+C]:y.join(".")+"."+g[C].join(".")}))})}return function(p){(function(m){let y=m.options.chart,g=m.options.accessibility||{};["description","typeDescription"].forEach(function(x){y[x]&&(g[x]=y[x],a(32,!1,m,{[`chart.${x}`]:`use accessibility.${x}`}))})})(p),function(m){m.axes.forEach(function(y){let g=y.options;g&&g.description&&(g.accessibility=g.accessibility||{},g.accessibility.description=g.description,a(32,!1,m,{"axis.description":"use axis.accessibility.description"}))})}(p),p.series&&function(m){let y={description:["accessibility","description"],exposeElementToA11y:["accessibility","exposeAsGroupOnly"],pointDescriptionFormatter:["accessibility","point","descriptionFormatter"],skipKeyboardNavigation:["accessibility","keyboardNavigation","enabled"],"accessibility.pointDescriptionFormatter":["accessibility","point","descriptionFormatter"]};m.series.forEach(function(g){Object.keys(y).forEach(function(x){let v=g.options[x];x==="accessibility.pointDescriptionFormatter"&&(v=g.options.accessibility&&g.options.accessibility.pointDescriptionFormatter),v!==void 0&&(s(g.options,y[x],x==="skipKeyboardNavigation"?!v:v),a(32,!1,m,{[`series.${x}`]:"series."+y[x].join(".")}))})})}(p),h(p,["accessibility"],["accessibility"],{pointDateFormat:["point","dateFormat"],pointDateFormatter:["point","dateFormatter"],pointDescriptionFormatter:["point","descriptionFormatter"],pointDescriptionThreshold:["series","pointDescriptionEnabledThreshold"],pointNavigationThreshold:["keyboardNavigation","seriesNavigation","pointNavigationEnabledThreshold"],pointValueDecimals:["point","valueDecimals"],pointValuePrefix:["point","valuePrefix"],pointValueSuffix:["point","valueSuffix"],screenReaderSectionFormatter:["screenReaderSection","beforeChartFormatter"],describeSingleSeries:["series","describeSingleSeries"],seriesDescriptionFormatter:["series","descriptionFormatter"],onTableAnchorClick:["screenReaderSection","onViewDataTableClick"],axisRangeDateFormat:["screenReaderSection","axisRangeDateFormat"]}),h(p,["accessibility","keyboardNavigation"],["accessibility","keyboardNavigation","seriesNavigation"],{skipNullPoints:["skipNullPoints"],mode:["mode"]}),h(p,["lang","accessibility"],["lang","accessibility"],{legendItem:["legend","legendItem"],legendLabel:["legend","legendLabel"],mapZoomIn:["zoom","mapZoomIn"],mapZoomOut:["zoom","mapZoomOut"],resetZoomButton:["zoom","resetZoomButton"],screenReaderRegionLabel:["screenReaderSection","beforeRegionLabel"],rangeSelectorButton:["rangeSelector","buttonText"],rangeSelectorMaxInput:["rangeSelector","maxInputLabel"],rangeSelectorMinInput:["rangeSelector","minInputLabel"],svgContainerEnd:["screenReaderSection","endOfChartMarker"],viewAsDataTable:["table","viewAsDataTableButtonText"],tableSummary:["table","tableSummary"]})}}),r(t,"Accessibility/Accessibility.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/A11yI18n.js"],t["Accessibility/Components/ContainerComponent.js"],t["Accessibility/FocusBorder.js"],t["Accessibility/Components/InfoRegionsComponent.js"],t["Accessibility/KeyboardNavigation.js"],t["Accessibility/Components/LegendComponent.js"],t["Accessibility/Components/MenuComponent.js"],t["Accessibility/Components/NavigatorComponent.js"],t["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],t["Accessibility/ProxyProvider.js"],t["Accessibility/Components/RangeSelectorComponent.js"],t["Accessibility/Components/SeriesComponent/SeriesComponent.js"],t["Accessibility/Components/ZoomComponent.js"],t["Accessibility/HighContrastMode.js"],t["Accessibility/HighContrastTheme.js"],t["Accessibility/Options/A11yDefaults.js"],t["Accessibility/Options/LangDefaults.js"],t["Accessibility/Options/DeprecatedOptions.js"]],function(n,a,c,s,h,p,m,y,g,x,v,_,C,k,w,E,A,M,S,N,Y,Z){let{defaultOptions:K}=n,{doc:U}=a,{addEvent:$,extend:B,fireEvent:R,merge:L}=c,{removeElement:G}=s;class F{constructor(q){this.init(q)}init(q){if(this.chart=q,!U.addEventListener){this.zombie=!0,this.components={},q.renderTo.setAttribute("aria-hidden",!0);return}Z(q),this.proxyProvider=new k(this.chart),this.initComponents(),this.keyboardNavigation=new g(q,this.components)}initComponents(){let q=this.chart,W=this.proxyProvider,se=q.options.accessibility;this.components={container:new p,infoRegions:new y,legend:new x,chartMenu:new v,rangeSelector:new w,series:new E,zoom:new A,navigator:new _},se.customComponents&&B(this.components,se.customComponents);let fe=this.components;this.getComponentOrder().forEach(function(ee){fe[ee].initBase(q,W),fe[ee].init()})}getComponentOrder(){return this.components?this.components.series?["series"].concat(Object.keys(this.components).filter(q=>q!=="series")):Object.keys(this.components):[]}update(){let q=this.components,W=this.chart,se=W.options.accessibility;R(W,"beforeA11yUpdate"),W.types=this.getChartTypes();let fe=se.keyboardNavigation.order;this.proxyProvider.updateGroupOrder(fe),this.getComponentOrder().forEach(function(ee){q[ee].onChartUpdate(),R(W,"afterA11yComponentUpdate",{name:ee,component:q[ee]})}),this.keyboardNavigation.update(fe),!W.highContrastModeActive&&se.highContrastMode!==!1&&(M.isHighContrastModeActive()||se.highContrastMode===!0)&&M.setHighContrastTheme(W),R(W,"afterA11yUpdate",{accessibility:this})}destroy(){let q=this.chart||{},W=this.components;Object.keys(W).forEach(function(se){W[se].destroy(),W[se].destroyBase()}),this.proxyProvider&&this.proxyProvider.destroy(),q.announcerContainer&&G(q.announcerContainer),this.keyboardNavigation&&this.keyboardNavigation.destroy(),q.renderTo&&q.renderTo.setAttribute("aria-hidden",!0),q.focusElement&&q.focusElement.removeFocusBorder()}getChartTypes(){let q={};return this.chart.series.forEach(function(W){q[W.type]=1}),Object.keys(q)}}return function(j){function q(){this.accessibility&&this.accessibility.destroy()}function W(){this.a11yDirty&&this.renderTo&&(delete this.a11yDirty,this.updateA11yEnabled());let oe=this.accessibility;oe&&!oe.zombie&&(oe.proxyProvider.updateProxyElementPositions(),oe.getComponentOrder().forEach(function(Ce){oe.components[Ce].onChartRender()}))}function se(oe){let Ce=oe.options.accessibility;Ce&&(Ce.customComponents&&(this.options.accessibility.customComponents=Ce.customComponents,delete Ce.customComponents),L(!0,this.options.accessibility,Ce),this.accessibility&&this.accessibility.destroy&&(this.accessibility.destroy(),delete this.accessibility)),this.a11yDirty=!0}function fe(){let oe=this.accessibility,Ce=this.options.accessibility,ge=this.renderer.boxWrapper.element,Ee=this.title;if(Ce&&Ce.enabled)oe&&!oe.zombie?oe.update():(this.accessibility=oe=new j(this),oe&&!oe.zombie&&oe.update(),ge.getAttribute("role")==="img"&&ge.removeAttribute("role"));else if(oe)oe.destroy&&oe.destroy(),delete this.accessibility;else{this.renderTo.setAttribute("role","img"),this.renderTo.setAttribute("aria-hidden",!1),this.renderTo.setAttribute("aria-label",(Ee&&Ee.element.textContent||"").replace(/</g,"&lt;")),ge.setAttribute("aria-hidden",!0);let J=document.getElementsByClassName("highcharts-description")[0];J&&(J.setAttribute("aria-hidden",!1),J.classList.remove("highcharts-linked-description"))}}function ee(){this.series.chart.accessibility&&(this.series.chart.a11yDirty=!0)}j.i18nFormat=h.i18nFormat,j.compose=function(oe,Ce,ge,Ee,J,ie){g.compose(oe),C.compose(Ee),x.compose(oe,Ce),v.compose(oe),E.compose(oe,ge,Ee),h.compose(oe),m.compose(oe,J),ie&&w.compose(oe,ie);let le=oe.prototype;le.updateA11yEnabled||(le.updateA11yEnabled=fe,$(oe,"destroy",q),$(oe,"render",W),$(oe,"update",se),["addSeries","init"].forEach(be=>{$(oe,be,function(){this.a11yDirty=!0})}),["afterApplyDrilldown","drillupall"].forEach(be=>{$(oe,be,function(){let te=this.accessibility;te&&!te.zombie&&te.update()})}),$(ge,"update",ee),["update","updatedData","remove"].forEach(be=>{$(Ee,be,function(){this.chart.accessibility&&(this.chart.a11yDirty=!0)})}))}}(F||(F={})),L(!0,K,N,{accessibility:{highContrastTheme:S},lang:Y}),F}),r(t,"masters/modules/accessibility.src.js",[t["Core/Globals.js"],t["Accessibility/Accessibility.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(n,a,c,s,h,p,m){return n.i18nFormat=a.i18nFormat,n.A11yChartUtilities=s,n.A11yHTMLUtilities=h,n.AccessibilityComponent=c,n.KeyboardNavigationHandler=p,n.SeriesAccessibilityDescriber=m,a.compose(n.Chart,n.Legend,n.Point,n.Series,n.SVGElement,n.RangeSelector),n})})})(HI);var DW=HI.exports;const RW=Hu(DW);var qI={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function r(n,a,c,s){n.hasOwnProperty(a)||(n[a]=s.apply(null,c),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:a,module:n[a]}})))}r(t,"Extensions/Pane/PaneComposition.js",[t["Core/Utilities.js"]],function(n){let{addEvent:a,correctFloat:c,defined:s,pick:h}=n;function p(v){let _,C=this;return v&&C.pane.forEach(k=>{m(v.chartX-C.plotLeft,v.chartY-C.plotTop,k.center)&&(_=k)}),_}function m(v,_,C,k,w){let E=!0,A=C[0],M=C[1],S=Math.sqrt(Math.pow(v-A,2)+Math.pow(_-M,2));if(s(k)&&s(w)){let N=Math.atan2(c(_-M,8),c(v-A,8));w!==k&&(E=k>w?N>=k&&N<=Math.PI||N<=w&&N>=-Math.PI:N>=k&&N<=c(w,8))}return S<=Math.ceil(C[2]/2)&&E}function y(v){this.polar&&(v.options.inverted&&([v.x,v.y]=[v.y,v.x]),v.isInsidePlot=this.pane.some(_=>m(v.x,v.y,_.center,_.axis&&_.axis.normalizedStartAngleRad,_.axis&&_.axis.normalizedEndAngleRad)))}function g(v){let _=this.chart;v.hoverPoint&&v.hoverPoint.plotX&&v.hoverPoint.plotY&&_.hoverPane&&!m(v.hoverPoint.plotX,v.hoverPoint.plotY,_.hoverPane.center)&&(v.hoverPoint=void 0)}function x(v){let _=this.chart;_.polar?(_.hoverPane=_.getHoverPane(v),v.filter=function(C){return C.visible&&!(!v.shared&&C.directTouch)&&h(C.options.enableMouseTracking,!0)&&(!_.hoverPane||C.xAxis.pane===_.hoverPane)}):_.hoverPane=void 0}return{compose:function(v,_){let C=v.prototype;C.getHoverPane||(C.collectionsWithUpdate.push("pane"),C.getHoverPane=p,a(v,"afterIsInsidePlot",y),a(_,"afterGetHoverData",g),a(_,"beforeGetHoverData",x))}}}),r(t,"Extensions/Pane/PaneDefaults.js",[],function(){return{pane:{center:["50%","50%"],size:"85%",innerSize:"0%",startAngle:0},background:{shape:"circle",borderRadius:0,borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}}}),r(t,"Extensions/Pane/Pane.js",[t["Series/CenteredUtilities.js"],t["Extensions/Pane/PaneComposition.js"],t["Extensions/Pane/PaneDefaults.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{extend:h,merge:p,splat:m}=s;class y{constructor(x,v){this.coll="pane",this.init(x,v)}init(x,v){this.chart=v,this.background=[],v.pane.push(this),this.setOptions(x)}setOptions(x){this.options=x=p(c.pane,this.chart.angular?{background:{}}:void 0,x)}render(){let x=this.options,v=this.chart.renderer;this.group||(this.group=v.g("pane-group").attr({zIndex:x.zIndex||0}).add()),this.updateCenter();let _=this.options.background;if(_){let C=Math.max((_=m(_)).length,this.background.length||0);for(let k=0;k<C;k++)_[k]&&this.axis?this.renderBackground(p(c.background,_[k]),k):this.background[k]&&(this.background[k]=this.background[k].destroy(),this.background.splice(k,1))}}renderBackground(x,v){let _={class:"highcharts-pane "+(x.className||"")},C="animate";this.chart.styledMode||h(_,{fill:x.backgroundColor,stroke:x.borderColor,"stroke-width":x.borderWidth}),this.background[v]||(this.background[v]=this.chart.renderer.path().add(this.group),C="attr"),this.background[v][C]({d:this.axis.getPlotBandPath(x.from,x.to,x)}).attr(_)}updateCenter(x){this.center=(x||this.axis||{}).center=n.getCenter.call(this)}update(x,v){p(!0,this.options,x),this.setOptions(this.options),this.render(),this.chart.axes.forEach(function(_){_.pane===this&&(_.pane=null,_.update({},v))},this)}}return y.compose=a.compose,y}),r(t,"Series/AreaRange/AreaRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a){let{area:{prototype:{pointClass:c,pointClass:{prototype:s}}}}=n.seriesTypes,{defined:h,isNumber:p}=a;return class extends c{setState(){let m=this.state,y=this.series,g=y.chart.polar;h(this.plotHigh)||(this.plotHigh=y.yAxis.toPixels(this.high,!0)),h(this.plotLow)||(this.plotLow=this.plotY=y.yAxis.toPixels(this.low,!0)),y.lowerStateMarkerGraphic=y.stateMarkerGraphic,y.stateMarkerGraphic=y.upperStateMarkerGraphic,this.graphic=this.graphics&&this.graphics[1],this.plotY=this.plotHigh,g&&p(this.plotHighX)&&(this.plotX=this.plotHighX),s.setState.apply(this,arguments),this.state=m,this.plotY=this.plotLow,this.graphic=this.graphics&&this.graphics[0],g&&p(this.plotLowX)&&(this.plotX=this.plotLowX),y.upperStateMarkerGraphic=y.stateMarkerGraphic,y.stateMarkerGraphic=y.lowerStateMarkerGraphic,y.lowerStateMarkerGraphic=void 0;let x=y.modifyMarkerSettings();s.setState.apply(this,arguments),y.restoreMarkerSettings(x)}haloPath(){let m=this.series.chart.polar,y=[];return this.plotY=this.plotLow,m&&p(this.plotLowX)&&(this.plotX=this.plotLowX),this.isInside&&(y=s.haloPath.apply(this,arguments)),this.plotY=this.plotHigh,m&&p(this.plotHighX)&&(this.plotX=this.plotHighX),this.isTopInside&&(y=y.concat(s.haloPath.apply(this,arguments))),y}isValid(){return p(this.low)&&p(this.high)}}}),r(t,"Series/AreaRange/AreaRangeSeries.js",[t["Series/AreaRange/AreaRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{noop:h}=a,{area:p,area:{prototype:m},column:{prototype:y}}=c.seriesTypes,{addEvent:g,defined:x,extend:v,isArray:_,isNumber:C,pick:k,merge:w}=s;class E extends p{toYData(M){return[M.low,M.high]}highToXY(M){let S=this.chart,N=this.xAxis.postTranslate(M.rectPlotX||0,this.yAxis.len-(M.plotHigh||0));M.plotHighX=N.x-S.plotLeft,M.plotHigh=N.y-S.plotTop,M.plotLowX=M.plotX}getGraphPath(M){let S=[],N=[],Y=m.getGraphPath,Z=this.options,K=this.chart.polar,U=K&&Z.connectEnds!==!1,$=Z.connectNulls,B,R,L,G=Z.step;for(B=(M=M||this.points).length;B--;){R=M[B];let se=K?{plotX:R.rectPlotX,plotY:R.yBottom,doCurve:!1}:{plotX:R.plotX,plotY:R.plotY,doCurve:!1};R.isNull||U||$||M[B+1]&&!M[B+1].isNull||N.push(se),L={polarPlotY:R.polarPlotY,rectPlotX:R.rectPlotX,yBottom:R.yBottom,plotX:k(R.plotHighX,R.plotX),plotY:R.plotHigh,isNull:R.isNull},N.push(L),S.push(L),R.isNull||U||$||M[B-1]&&!M[B-1].isNull||N.push(se)}let F=Y.call(this,M);G&&(G===!0&&(G="left"),Z.step={left:"right",center:"center",right:"left"}[G]);let j=Y.call(this,S),q=Y.call(this,N);Z.step=G;let W=[].concat(F,j);return!this.chart.polar&&q[0]&&q[0][0]==="M"&&(q[0]=["L",q[0][1],q[0][2]]),this.graphPath=W,this.areaPath=F.concat(q),W.isArea=!0,W.xMap=F.xMap,this.areaPath.xMap=F.xMap,W}drawDataLabels(){var L,G;let M,S,N,Y,Z,K=this.points,U=K.length,$=[],B=this.options.dataLabels,R=this.chart.inverted;if(B){if(_(B)?(Y=B[0]||{enabled:!1},Z=B[1]||{enabled:!1}):((Y=v({},B)).x=B.xHigh,Y.y=B.yHigh,(Z=v({},B)).x=B.xLow,Z.y=B.yLow),Y.enabled||((L=this.hasDataLabels)==null?void 0:L.call(this))){for(M=U;M--;)if(S=K[M]){let{plotHigh:F=0,plotLow:j=0}=S;N=Y.inside?F<j:F>j,S.y=S.high,S._plotY=S.plotY,S.plotY=F,$[M]=S.dataLabel,S.dataLabel=S.dataLabelUpper,S.below=N,R?Y.align||(Y.align=N?"right":"left"):Y.verticalAlign||(Y.verticalAlign=N?"top":"bottom")}for(this.options.dataLabels=Y,m.drawDataLabels&&m.drawDataLabels.apply(this,arguments),M=U;M--;)(S=K[M])&&(S.dataLabelUpper=S.dataLabel,S.dataLabel=$[M],delete S.dataLabels,S.y=S.low,S.plotY=S._plotY)}if(Z.enabled||(G=this.hasDataLabels)!=null&&G.call(this)){for(M=U;M--;)if(S=K[M]){let{plotHigh:F=0,plotLow:j=0}=S;N=Z.inside?F<j:F>j,S.below=!N,R?Z.align||(Z.align=N?"left":"right"):Z.verticalAlign||(Z.verticalAlign=N?"bottom":"top")}this.options.dataLabels=Z,m.drawDataLabels&&m.drawDataLabels.apply(this,arguments)}if(Y.enabled)for(M=U;M--;)(S=K[M])&&(S.dataLabels=[S.dataLabelUpper,S.dataLabel].filter(function(F){return!!F}));this.options.dataLabels=B}}alignDataLabel(){y.alignDataLabel.apply(this,arguments)}modifyMarkerSettings(){let M={marker:this.options.marker,symbol:this.symbol};if(this.options.lowMarker){let{options:{marker:S,lowMarker:N}}=this;this.options.marker=w(S,N),N.symbol&&(this.symbol=N.symbol)}return M}restoreMarkerSettings(M){this.options.marker=M.marker,this.symbol=M.symbol}drawPoints(){let M,S,N=this.points.length,Y=this.modifyMarkerSettings();for(m.drawPoints.apply(this,arguments),this.restoreMarkerSettings(Y),M=0;M<N;)(S=this.points[M]).graphics=S.graphics||[],S.origProps={plotY:S.plotY,plotX:S.plotX,isInside:S.isInside,negative:S.negative,zone:S.zone,y:S.y},(S.graphic||S.graphics[0])&&(S.graphics[0]=S.graphic),S.graphic=S.graphics[1],S.plotY=S.plotHigh,x(S.plotHighX)&&(S.plotX=S.plotHighX),S.y=k(S.high,S.origProps.y),S.negative=S.y<(this.options.threshold||0),this.zones.length&&(S.zone=S.getZone()),this.chart.polar||(S.isInside=S.isTopInside=S.plotY!==void 0&&S.plotY>=0&&S.plotY<=this.yAxis.len&&S.plotX>=0&&S.plotX<=this.xAxis.len),M++;for(m.drawPoints.apply(this,arguments),M=0;M<N;)(S=this.points[M]).graphics=S.graphics||[],(S.graphic||S.graphics[1])&&(S.graphics[1]=S.graphic),S.graphic=S.graphics[0],S.origProps&&(v(S,S.origProps),delete S.origProps),M++}hasMarkerChanged(M,S){let N=M.lowMarker,Y=S.lowMarker||{};return N&&(N.enabled===!1||Y.symbol!==N.symbol||Y.height!==N.height||Y.width!==N.width)||super.hasMarkerChanged(M,S)}}return E.defaultOptions=w(p.defaultOptions,{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:void 0,verticalAlign:void 0,xLow:0,xHigh:0,yLow:0,yHigh:0}}),g(E,"afterTranslate",function(){this.pointArrayMap.join(",")==="low,high"&&this.points.forEach(A=>{let M=A.high,S=A.plotY;A.isNull?A.plotY=void 0:(A.plotLow=S,A.plotHigh=C(M)?this.yAxis.translate(this.dataModify?this.dataModify.modifyValue(M):M,!1,!0,void 0,!0):void 0,this.dataModify&&(A.yBottom=A.plotHigh))})},{order:0}),g(E,"afterTranslate",function(){this.points.forEach(A=>{if(this.chart.polar)this.highToXY(A),A.plotLow=A.plotY,A.tooltipPos=[((A.plotHighX||0)+(A.plotLowX||0))/2,((A.plotHigh||0)+(A.plotLow||0))/2];else{let M=A.pos(!1,A.plotLow),S=A.pos(!1,A.plotHigh);M&&S&&(M[0]=(M[0]+S[0])/2,M[1]=(M[1]+S[1])/2),A.tooltipPos=M}})},{order:3}),v(E.prototype,{deferTranslatePolar:!0,pointArrayMap:["low","high"],pointClass:n,pointValKey:"low",setStackedPoints:h}),c.registerSeriesType("arearange",E),E}),r(t,"Series/AreaSplineRange/AreaSplineRangeSeries.js",[t["Series/AreaRange/AreaRangeSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c){let{spline:{prototype:s}}=a.seriesTypes,{merge:h,extend:p}=c;class m extends n{}return m.defaultOptions=h(n.defaultOptions),p(m.prototype,{getPointSpline:s.getPointSpline}),a.registerSeriesType("areasplinerange",m),m}),r(t,"Series/BoxPlot/BoxPlotSeriesDefaults.js",[],function(){return{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">●</span> <b>{series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,whiskerWidth:2}}),r(t,"Series/BoxPlot/BoxPlotSeries.js",[t["Series/BoxPlot/BoxPlotSeriesDefaults.js"],t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{noop:p}=c,{crisp:m,extend:y,merge:g,pick:x}=h;class v extends a{pointAttribs(){return{}}translate(){let C=this.yAxis,k=this.pointArrayMap;super.translate.apply(this),this.points.forEach(function(w){k.forEach(function(E){w[E]!==null&&(w[E+"Plot"]=C.translate(w[E],0,1,0,1))}),w.plotHigh=w.highPlot})}drawPoints(){let C,k,w,E,A,M,S,N,Y,Z,K,U,$,B=this.points,R=this.options,L=this.chart,G=L.renderer,F=this.doQuartiles!==!1,j=this.options.whiskerLength;for(let q of B){let W=(N=q.graphic)?"animate":"attr",se=q.shapeArgs,fe={},ee={},oe={},Ce={},ge=q.color||this.color;if(q.plotY!==void 0){let Ee;Y=se.width,K=(Z=se.x)+Y,U=Y/2,C=F?q.q1Plot:q.lowPlot,k=F?q.q3Plot:q.lowPlot,w=q.highPlot,E=q.lowPlot,N||(q.graphic=N=G.g("point").add(this.group),q.stem=G.path().addClass("highcharts-boxplot-stem").add(N),j&&(q.whiskers=G.path().addClass("highcharts-boxplot-whisker").add(N)),F&&(q.box=G.path(S).addClass("highcharts-boxplot-box").add(N)),q.medianShape=G.path(M).addClass("highcharts-boxplot-median").add(N)),L.styledMode||(ee.stroke=q.stemColor||R.stemColor||ge,ee["stroke-width"]=x(q.stemWidth,R.stemWidth,R.lineWidth),ee.dashstyle=q.stemDashStyle||R.stemDashStyle||R.dashStyle,q.stem.attr(ee),j&&(oe.stroke=q.whiskerColor||R.whiskerColor||ge,oe["stroke-width"]=x(q.whiskerWidth,R.whiskerWidth,R.lineWidth),oe.dashstyle=q.whiskerDashStyle||R.whiskerDashStyle||R.dashStyle,q.whiskers.attr(oe)),F&&(fe.fill=q.fillColor||R.fillColor||ge,fe.stroke=R.lineColor||ge,fe["stroke-width"]=R.lineWidth||0,fe.dashstyle=q.boxDashStyle||R.boxDashStyle||R.dashStyle,q.box.attr(fe)),Ce.stroke=q.medianColor||R.medianColor||ge,Ce["stroke-width"]=x(q.medianWidth,R.medianWidth,R.lineWidth),Ce.dashstyle=q.medianDashStyle||R.medianDashStyle||R.dashStyle,q.medianShape.attr(Ce));let J=m((q.plotX||0)+(this.pointXOffset||0)+(this.barW||0)/2,q.stem.strokeWidth());if(Ee=[["M",J,k],["L",J,w],["M",J,C],["L",J,E]],q.stem[W]({d:Ee}),F){let ie=q.box.strokeWidth();C=m(C,ie),k=m(k,ie),Ee=[["M",Z=m(Z,ie),k],["L",Z,C],["L",K=m(K,ie),C],["L",K,k],["L",Z,k],["Z"]],q.box[W]({d:Ee})}if(j){let ie=q.whiskers.strokeWidth();w=m(q.highPlot,ie),E=m(q.lowPlot,ie),Ee=[["M",m(J-($=typeof j=="string"&&/%$/.test(j)?U*parseFloat(j)/100:Number(j)/2)),w],["L",m(J+$),w],["M",m(J-$),E],["L",m(J+$),E]],q.whiskers[W]({d:Ee})}Ee=[["M",Z,A=m(q.medianPlot,q.medianShape.strokeWidth())],["L",K,A]],q.medianShape[W]({d:Ee})}}}toYData(C){return[C.low,C.q1,C.median,C.q3,C.high]}}return v.defaultOptions=g(a.defaultOptions,n),y(v.prototype,{pointArrayMap:["low","q1","median","q3","high"],pointValKey:"high",drawDataLabels:p,setStackedPoints:p}),s.registerSeriesType("boxplot",v),v}),r(t,"Series/Bubble/BubbleLegendDefaults.js",[],function(){return{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}),r(t,"Series/Bubble/BubbleLegendItem.js",[t["Core/Color/Color.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{parse:h}=n,{noop:p}=c,{arrayMax:m,arrayMin:y,isNumber:g,merge:x,pick:v,stableSort:_}=s;return class{constructor(C,k){this.setState=p,this.init(C,k)}init(C,k){this.options=C,this.visible=!0,this.chart=k.chart,this.legend=k}addToLegend(C){C.splice(this.options.legendIndex,0,this)}drawLegendSymbol(C){let k,w=v(C.options.itemDistance,20),E=this.legendItem||{},A=this.options,M=A.ranges,S=A.connectorDistance;if(!M||!M.length||!g(M[0].value)){C.options.bubbleLegend.autoRanges=!0;return}_(M,function(K,U){return U.value-K.value}),this.ranges=M,this.setOptions(),this.render();let N=this.getMaxLabelSize(),Y=this.ranges[0].radius,Z=2*Y;k=(k=S-Y+N.width)>0?k:0,this.maxLabel=N,this.movementX=A.labels.align==="left"?k:0,E.labelWidth=Z+k+w,E.labelHeight=Z+N.height/2}setOptions(){let C=this.ranges,k=this.options,w=this.chart.series[k.seriesIndex],E=this.legend.baseline,A={zIndex:k.zIndex,"stroke-width":k.borderWidth},M={zIndex:k.zIndex,"stroke-width":k.connectorWidth},S={align:this.legend.options.rtl||k.labels.align==="left"?"right":"left",zIndex:k.zIndex},N=w.options.marker.fillOpacity,Y=this.chart.styledMode;C.forEach(function(Z,K){Y||(A.stroke=v(Z.borderColor,k.borderColor,w.color),A.fill=v(Z.color,k.color,N!==1?h(w.color).setOpacity(N).get("rgba"):w.color),M.stroke=v(Z.connectorColor,k.connectorColor,w.color)),C[K].radius=this.getRangeRadius(Z.value),C[K]=x(C[K],{center:C[0].radius-C[K].radius+E}),Y||x(!0,C[K],{bubbleAttribs:x(A),connectorAttribs:x(M),labelAttribs:S})},this)}getRangeRadius(C){let k=this.options,w=this.options.seriesIndex,E=this.chart.series[w],A=k.ranges[0].value,M=k.ranges[k.ranges.length-1].value,S=k.minSize,N=k.maxSize;return E.getRadius.call(this,M,A,S,N,C)}render(){let C=this.legendItem||{},k=this.chart.renderer,w=this.options.zThreshold;for(let E of(this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),C.symbol=k.g("bubble-legend"),C.label=k.g("bubble-legend-item").css(this.legend.itemStyle||{}),C.symbol.translateX=0,C.symbol.translateY=0,C.symbol.add(C.label),C.label.add(C.group),this.ranges))E.value>=w&&this.renderRange(E);this.hideOverlappingLabels()}renderRange(C){let k=this.ranges[0],w=this.legend,E=this.options,A=E.labels,M=this.chart,S=M.series[E.seriesIndex],N=M.renderer,Y=this.symbols,Z=Y.labels,K=C.center,U=Math.abs(C.radius),$=E.connectorDistance||0,B=A.align,R=w.options.rtl,L=E.borderWidth,G=E.connectorWidth,F=k.radius||0,j=K-U-L/2+G/2,q=(j%1?1:.5)-(G%2?0:.5),W=N.styledMode,se=R||B==="left"?-$:$;B==="center"&&(se=0,E.connectorDistance=0,C.labelAttribs.align="center"),Y.bubbleItems.push(N.circle(F,K+q,U).attr(W?{}:C.bubbleAttribs).addClass((W?"highcharts-color-"+S.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(E.className||"")).add(this.legendItem.symbol)),Y.connectors.push(N.path(N.crispLine([["M",F,j],["L",F+se,j]],E.connectorWidth)).attr(W?{}:C.connectorAttribs).addClass((W?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(E.connectorClassName||"")).add(this.legendItem.symbol));let fe=N.text(this.formatLabel(C)).attr(W?{}:C.labelAttribs).css(W?{}:A.style).addClass("highcharts-bubble-legend-labels "+(E.labels.className||"")).add(this.legendItem.symbol),ee={x:F+se+E.labels.x,y:j+E.labels.y+.4*fe.getBBox().height};fe.attr(ee),Z.push(fe),fe.placed=!0,fe.alignAttr=ee}getMaxLabelSize(){let C,k;return this.symbols.labels.forEach(function(w){k=w.getBBox(!0),C=C?k.width>C.width?k:C:k}),C||{}}formatLabel(C){let k=this.options,w=k.labels.formatter,E=k.labels.format,{numberFormatter:A}=this.chart;return E?a.format(E,C):w?w.call(C):A(C.value,1)}hideOverlappingLabels(){let C=this.chart,k=this.options.labels.allowOverlap,w=this.symbols;!k&&w&&(C.hideOverlappingLabels(w.labels),w.labels.forEach(function(E,A){E.newOpacity?E.newOpacity!==E.oldOpacity&&w.connectors[A].show():w.connectors[A].hide()}))}getRanges(){let C=this.legend.bubbleLegend,k=C.chart.series,w=C.options.ranges,E,A,M=Number.MAX_VALUE,S=-Number.MAX_VALUE;return k.forEach(function(N){N.isBubble&&!N.ignoreSeries&&(A=N.zData.filter(g)).length&&(M=v(N.options.zMin,Math.min(M,Math.max(y(A),N.options.displayNegative===!1?N.options.zThreshold:-Number.MAX_VALUE))),S=v(N.options.zMax,Math.max(S,m(A))))}),E=M===S?[{value:S}]:[{value:M},{value:(M+S)/2},{value:S,autoRanges:!0}],w.length&&w[0].radius&&E.reverse(),E.forEach(function(N,Y){w&&w[Y]&&(E[Y]=x(w[Y],N))}),E}predictBubbleSizes(){let C=this.chart,k=C.legend.options,w=k.floating,E=k.layout==="horizontal",A=E?C.legend.lastLineHeight:0,M=C.plotSizeX,S=C.plotSizeY,N=C.series[this.options.seriesIndex],Y=N.getPxExtremes(),Z=Math.ceil(Y.minPxSize),K=Math.ceil(Y.maxPxSize),U=Math.min(S,M),$,B=N.options.maxSize;return w||!/%$/.test(B)?$=K:($=(U+A)*(B=parseFloat(B))/100/(B/100+1),(E&&S-$>=M||!E&&M-$>=S)&&($=K)),[Z,Math.ceil($)]}updateRanges(C,k){let w=this.legend.options.bubbleLegend;w.minSize=C,w.maxSize=k,w.ranges=this.getRanges()}correctSizes(){let C=this.legend,k=this.chart.series[this.options.seriesIndex].getPxExtremes();Math.abs(Math.ceil(k.maxPxSize)-this.options.maxSize)>1&&(this.updateRanges(this.options.minSize,k.maxPxSize),C.render())}}}),r(t,"Series/Bubble/BubbleLegendComposition.js",[t["Series/Bubble/BubbleLegendDefaults.js"],t["Series/Bubble/BubbleLegendItem.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{setOptions:p}=c,{composed:m}=s,{addEvent:y,objectEach:g,pushUnique:x,wrap:v}=h;function _(M,S,N){let Y,Z,K,U=this.legend,$=C(this)>=0;U&&U.options.enabled&&U.bubbleLegend&&U.options.bubbleLegend.autoRanges&&$?(Y=U.bubbleLegend.options,Z=U.bubbleLegend.predictBubbleSizes(),U.bubbleLegend.updateRanges(Z[0],Z[1]),Y.placed||(U.group.placed=!1,U.allItems.forEach(B=>{(K=B.legendItem||{}).group&&(K.group.translateY=void 0)})),U.render(),Y.placed||(this.getMargins(),this.axes.forEach(function(B){B.visible&&B.render(),Y.placed||(B.setScale(),B.updateNames(),g(B.ticks,function(R){R.isNew=!0,R.isNewLabel=!0}))}),this.getMargins()),Y.placed=!0,M.call(this,S,N),U.bubbleLegend.correctSizes(),A(U,k(U))):(M.call(this,S,N),U&&U.options.enabled&&U.bubbleLegend&&(U.render(),A(U,k(U))))}function C(M){let S=M.series,N=0;for(;N<S.length;){if(S[N]&&S[N].isBubble&&S[N].visible&&S[N].zData.length)return N;N++}return-1}function k(M){let S=M.allItems,N=[],Y=S.length,Z,K,U,$=0,B=0;for($=0;$<Y;$++)if(K=S[$].legendItem||{},U=(S[$+1]||{}).legendItem||{},K.labelHeight&&(S[$].itemHeight=K.labelHeight),S[$]===S[Y-1]||K.y!==U.y){for(N.push({height:0}),Z=N[N.length-1];B<=$;B++)S[B].itemHeight>Z.height&&(Z.height=S[B].itemHeight);Z.step=$}return N}function w(M){let S=this.bubbleLegend,N=this.options,Y=N.bubbleLegend,Z=C(this.chart);S&&S.ranges&&S.ranges.length&&(Y.ranges.length&&(Y.autoRanges=!!Y.ranges[0].autoRanges),this.destroyItem(S)),Z>=0&&N.enabled&&Y.enabled&&(Y.seriesIndex=Z,this.bubbleLegend=new a(Y,this),this.bubbleLegend.addToLegend(M.allItems))}function E(M){let S;if(M.defaultPrevented)return!1;let N=M.legendItem,Y=this.chart,Z=N.visible;this&&this.bubbleLegend&&(N.visible=!Z,N.ignoreSeries=Z,S=C(Y)>=0,this.bubbleLegend.visible!==S&&(this.update({bubbleLegend:{enabled:S}}),this.bubbleLegend.visible=S),N.visible=Z)}function A(M,S){let N=M.allItems,Y=M.options.rtl,Z,K,U,$,B=0;N.forEach((R,L)=>{($=R.legendItem||{}).group&&(Z=$.group.translateX||0,K=$.y||0,((U=R.movementX)||Y&&R.ranges)&&(U=Y?Z-R.options.maxSize/2:Z+U,$.group.attr({translateX:U})),L>S[B].step&&B++,$.group.attr({translateY:Math.round(K+S[B].height/2)}),$.y=K+S[B].height/2)})}return{compose:function(M,S){x(m,"Series.BubbleLegend")&&(p({legend:{bubbleLegend:n}}),v(M.prototype,"drawChartBox",_),y(S,"afterGetAllItems",w),y(S,"itemClick",E))}}}),r(t,"Series/Bubble/BubblePoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c){let{seriesTypes:{scatter:{prototype:{pointClass:s}}}}=a,{extend:h}=c;class p extends s{haloPath(y){let g=(y&&this.marker&&this.marker.radius||0)+y;if(this.series.chart.inverted){let x=this.pos()||[0,0],{xAxis:v,yAxis:_,chart:C}=this.series;return C.renderer.symbols.circle(v.len-x[1]-g,_.len-x[0]-g,2*g,2*g)}return n.prototype.haloPath.call(this,g)}}return h(p.prototype,{ttBelow:!1}),p}),r(t,"Series/Bubble/BubbleSeries.js",[t["Series/Bubble/BubbleLegendComposition.js"],t["Series/Bubble/BubblePoint.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,p){let{parse:m}=c,{composed:y,noop:g}=s,{series:x,seriesTypes:{column:{prototype:v},scatter:_}}=h,{addEvent:C,arrayMax:k,arrayMin:w,clamp:E,extend:A,isNumber:M,merge:S,pick:N,pushUnique:Y}=p;function Z(){let U=this.len,{coll:$,isXAxis:B,min:R}=this,L=B?"xData":"yData",G=(this.max||0)-(R||0),F=0,j=U,q=U/G,W;($==="xAxis"||$==="yAxis")&&(this.series.forEach(se=>{if(se.bubblePadding&&se.reserveSpace()){this.allowZoomOutside=!0,W=!0;let fe=se[L];if(B&&((se.onPoint||se).getRadii(0,0,se),se.onPoint&&(se.radii=se.onPoint.radii)),G>0){let ee=fe.length;for(;ee--;)if(M(fe[ee])&&this.dataMin<=fe[ee]&&fe[ee]<=this.max){let oe=se.radii&&se.radii[ee]||0;F=Math.min((fe[ee]-R)*q-oe,F),j=Math.max((fe[ee]-R)*q+oe,j)}}}}),W&&G>0&&!this.logarithmic&&(j-=U,q*=(U+Math.max(0,F)-Math.min(j,U))/U,[["min","userMin",F],["max","userMax",j]].forEach(se=>{N(this.options[se[0]],this[se[1]])===void 0&&(this[se[0]]+=se[2]/q)})))}class K extends _{static compose($,B,R){n.compose(B,R),Y(y,"Series.Bubble")&&C($,"foundExtremes",Z)}animate($){!$&&this.points.length<this.options.animationLimit&&this.points.forEach(function(B){let{graphic:R,plotX:L=0,plotY:G=0}=B;R&&R.width&&(this.hasRendered||R.attr({x:L,y:G,width:1,height:1}),R.animate(this.markerAttribs(B),this.options.animation))},this)}getRadii(){let $=this.zData,B=this.yData,R=[],L,G,F,j=this.chart.bubbleZExtremes,{minPxSize:q,maxPxSize:W}=this.getPxExtremes();if(!j){let se,fe=Number.MAX_VALUE,ee=-Number.MAX_VALUE;this.chart.series.forEach(oe=>{if(oe.bubblePadding&&oe.reserveSpace()){let Ce=(oe.onPoint||oe).getZExtremes();Ce&&(fe=Math.min(N(fe,Ce.zMin),Ce.zMin),ee=Math.max(N(ee,Ce.zMax),Ce.zMax),se=!0)}}),se?(j={zMin:fe,zMax:ee},this.chart.bubbleZExtremes=j):j={zMin:0,zMax:0}}for(G=0,L=$.length;G<L;G++)F=$[G],R.push(this.getRadius(j.zMin,j.zMax,q,W,F,B&&B[G]));this.radii=R}getRadius($,B,R,L,G,F){let j=this.options,q=j.sizeBy!=="width",W=j.zThreshold,se=B-$,fe=.5;if(F===null||G===null)return null;if(M(G)){if(j.sizeByAbsoluteValue&&(G=Math.abs(G-W),B=se=Math.max(B-W,Math.abs($-W)),$=0),G<$)return R/2-1;se>0&&(fe=(G-$)/se)}return q&&fe>=0&&(fe=Math.sqrt(fe)),Math.ceil(R+fe*(L-R))/2}hasData(){return!!this.processedXData.length}markerAttribs($,B){let R=super.markerAttribs($,B),{height:L=0,width:G=0}=R;return this.chart.inverted?A(R,{x:($.plotX||0)-G/2,y:($.plotY||0)-L/2}):R}pointAttribs($,B){let R=this.options.marker.fillOpacity,L=x.prototype.pointAttribs.call(this,$,B);return R!==1&&(L.fill=m(L.fill).setOpacity(R).get("rgba")),L}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){let{data:$,options:B,radii:R}=this,{minPxSize:L}=this.getPxExtremes(),G=$.length;for(;G--;){let F=$[G],j=R?R[G]:0;this.zoneAxis==="z"&&(F.negative=(F.z||0)<(B.zThreshold||0)),M(j)&&j>=L/2?(F.marker=A(F.marker,{radius:j,width:2*j,height:2*j}),F.dlBox={x:F.plotX-j,y:F.plotY-j,width:2*j,height:2*j}):(F.shapeArgs=F.plotY=F.dlBox=void 0,F.isInside=!1)}}getPxExtremes(){let $=Math.min(this.chart.plotWidth,this.chart.plotHeight),B=G=>{let F;return typeof G=="string"&&(F=/%$/.test(G),G=parseInt(G,10)),F?$*G/100:G},R=B(N(this.options.minSize,8)),L=Math.max(B(N(this.options.maxSize,"20%")),R);return{minPxSize:R,maxPxSize:L}}getZExtremes(){let $=this.options,B=(this.zData||[]).filter(M);if(B.length){let R=N($.zMin,E(w(B),$.displayNegative===!1?$.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),L=N($.zMax,k(B));if(M(R)&&M(L))return{zMin:R,zMax:L}}}}return K.defaultOptions=S(_.defaultOptions,{dataLabels:{formatter:function(){let{numberFormatter:U}=this.series.chart,{z:$}=this.point;return M($)?U($,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),A(K.prototype,{alignDataLabel:v.alignDataLabel,applyZones:g,bubblePadding:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:a,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),C(K,"updatedData",U=>{delete U.target.chart.bubbleZExtremes}),C(K,"remove",U=>{delete U.target.chart.bubbleZExtremes}),h.registerSeriesType("bubble",K),K}),r(t,"Series/ColumnRange/ColumnRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a){let{seriesTypes:{column:{prototype:{pointClass:{prototype:c}}},arearange:{prototype:{pointClass:s}}}}=n,{extend:h,isNumber:p}=a;class m extends s{isValid(){return p(this.low)}}return h(m.prototype,{setState:c.setState}),m}),r(t,"Series/ColumnRange/ColumnRangeSeries.js",[t["Series/ColumnRange/ColumnRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{noop:h}=a,{seriesTypes:{arearange:p,column:m,column:{prototype:y}}}=c,{addEvent:g,clamp:x,extend:v,isNumber:_,merge:C,pick:k}=s;class w extends p{setOptions(){return C(!0,arguments[0],{stacking:void 0}),p.prototype.setOptions.apply(this,arguments)}translate(){return y.translate.apply(this)}pointAttribs(){return y.pointAttribs.apply(this,arguments)}translate3dPoints(){return y.translate3dPoints.apply(this,arguments)}translate3dShapes(){return y.translate3dShapes.apply(this,arguments)}afterColumnTranslate(){let A,M,S,N,Y=this.yAxis,Z=this.xAxis,K=Z.startAngleRad,U=this.chart,$=this.xAxis.isRadial,B=Math.max(U.chartWidth,U.chartHeight)+999;this.points.forEach(R=>{let L=R.shapeArgs||{},G=this.options.minPointLength,F=R.plotY,j=Y.translate(R.high,0,1,0,1);if(_(j)&&_(F))if(R.plotHigh=x(j,-B,B),R.plotLow=x(F,-B,B),N=R.plotHigh,Math.abs(A=k(R.rectPlotY,R.plotY)-R.plotHigh)<G?(M=G-A,A+=M,N-=M/2):A<0&&(A*=-1,N-=A),$&&this.polar)S=R.barX+K,R.shapeType="arc",R.shapeArgs=this.polar.arc(N+A,N,S,S+R.pointWidth);else{L.height=A,L.y=N;let{x:q=0,width:W=0}=L;R.shapeArgs=C(R.shapeArgs,this.crispCol(q,N,W,A)),R.tooltipPos=U.inverted?[Y.len+Y.pos-U.plotLeft-N-A/2,Z.len+Z.pos-U.plotTop-q-W/2,A]:[Z.left-U.plotLeft+q+W/2,Y.pos-U.plotTop+N+A/2,A]}})}}return w.defaultOptions=C(m.defaultOptions,p.defaultOptions,{borderRadius:{where:"all"},pointRange:null,legendSymbol:"rectangle",marker:null,states:{hover:{halo:!1}}}),g(w,"afterColumnTranslate",function(){w.prototype.afterColumnTranslate.apply(this)},{order:5}),v(w.prototype,{directTouch:!0,pointClass:n,trackerGroups:["group","dataLabelsGroup"],adjustForMissingColumns:y.adjustForMissingColumns,animate:y.animate,crispCol:y.crispCol,drawGraph:h,drawPoints:y.drawPoints,getSymbol:h,drawTracker:y.drawTracker,getColumnMetrics:y.getColumnMetrics}),c.registerSeriesType("columnrange",w),w}),r(t,"Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js",[],function(){return{}}),r(t,"Series/ColumnPyramid/ColumnPyramidSeries.js",[t["Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c){let{column:s}=a.seriesTypes,{clamp:h,merge:p,pick:m}=c;class y extends s{translate(){let x=this.chart,v=this.options,_=this.dense=this.closestPointRange*this.xAxis.transA<2,C=this.borderWidth=m(v.borderWidth,_?0:1),k=this.yAxis,w=v.threshold,E=m(v.minPointLength,5),A=this.getColumnMetrics(),M=A.width,S=this.pointXOffset=A.offset,N=this.translatedThreshold=k.getThreshold(w),Y=this.barW=Math.max(M,1+2*C);for(let Z of(x.inverted&&(N-=.5),v.pointPadding&&(Y=Math.ceil(Y)),super.translate(),this.points)){let K=m(Z.yBottom,N),U=999+Math.abs(K),$=h(Z.plotY,-U,k.len+U),B=Y/2,R=Math.min($,K),L=Math.max($,K)-R,G=Z.plotX+S,F,j,q,W,se,fe,ee,oe,Ce,ge,Ee;v.centerInCategory&&(G=this.adjustForMissingColumns(G,M,Z,A)),Z.barX=G,Z.pointWidth=M,Z.tooltipPos=x.inverted?[k.len+k.pos-x.plotLeft-$,this.xAxis.len-G-B,L]:[G+B,$+k.pos-x.plotTop,L],F=w+(Z.total||Z.y),v.stacking==="percent"&&(F=w+(Z.y<0)?-100:100);let J=k.toPixels(F,!0);q=(j=x.plotHeight-J-(x.plotHeight-N))?B*(R-J)/j:0,W=j?B*(R+L-J)/j:0,fe=G-q+B,ee=G+q+B,oe=G+W+B,Ce=G-W+B,ge=R-E,Ee=R+L,Z.y<0&&(ge=R,Ee=R+L+E),x.inverted&&(se=k.width-R,j=J-(k.width-N),q=B*(J-se)/j,W=B*(J-(se-L))/j,ee=(fe=G+B+q)-2*q,oe=G-W+B,Ce=G+W+B,ge=R,Ee=R+L-E,Z.y<0&&(Ee=R+L+E)),Z.shapeType="path",Z.shapeArgs={x:fe,y:ge,width:ee-fe,height:L,d:[["M",fe,ge],["L",ee,ge],["L",oe,Ee],["L",Ce,Ee],["Z"]]}}}}return y.defaultOptions=p(s.defaultOptions,n),a.registerSeriesType("columnpyramid",y),y}),r(t,"Series/ErrorBar/ErrorBarSeriesDefaults.js",[],function(){return{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}}),r(t,"Series/ErrorBar/ErrorBarSeries.js",[t["Series/BoxPlot/BoxPlotSeries.js"],t["Series/Column/ColumnSeries.js"],t["Series/ErrorBar/ErrorBarSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s,h){let{arearange:p}=s.seriesTypes,{addEvent:m,merge:y,extend:g}=h;class x extends n{getColumnMetrics(){return this.linkedParent&&this.linkedParent.columnMetrics||a.prototype.getColumnMetrics.call(this)}drawDataLabels(){let _=this.pointValKey;if(p)for(let C of(p.prototype.drawDataLabels.call(this),this.points))C.y=C[_]}toYData(_){return[_.low,_.high]}}return x.defaultOptions=y(n.defaultOptions,c),m(x,"afterTranslate",function(){for(let v of this.points)v.plotLow=v.plotY},{order:0}),g(x.prototype,{pointArrayMap:["low","high"],pointValKey:"high",doQuartiles:!1}),s.registerSeriesType("errorbar",x),x}),r(t,"Series/Gauge/GaugePoint.js",[t["Core/Series/SeriesRegistry.js"]],function(n){let{series:{prototype:{pointClass:a}}}=n;return class extends a{setState(c){this.state=c}}}),r(t,"Series/Gauge/GaugeSeries.js",[t["Series/Gauge/GaugePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{noop:h}=a,{series:p,seriesTypes:{column:m}}=c,{clamp:y,isNumber:g,extend:x,merge:v,pick:_,pInt:C,defined:k}=s;class w extends p{translate(){let A=this.yAxis,M=this.options,S=A.center;this.generatePoints(),this.points.forEach(N=>{let Y=v(M.dial,N.dial),Z=C(Y.radius)*S[2]/200,K=C(Y.baseLength)*Z/100,U=C(Y.rearLength)*Z/100,$=Y.baseWidth,B=Y.topWidth,R=M.overshoot,L=A.startAngleRad+A.translate(N.y,void 0,void 0,void 0,!0);(g(R)||M.wrap===!1)&&(R=g(R)?R/180*Math.PI:0,L=y(L,A.startAngleRad-R,A.endAngleRad+R)),L=180*L/Math.PI,N.shapeType="path";let G=Y.path||[["M",-U,-$/2],["L",K,-$/2],["L",Z,-B/2],["L",Z,B/2],["L",K,$/2],["L",-U,$/2],["Z"]];N.shapeArgs={d:G,translateX:S[0],translateY:S[1],rotation:L},N.plotX=S[0],N.plotY=S[1],k(N.y)&&A.max-A.min&&(N.percentage=(N.y-A.min)/(A.max-A.min)*100)})}drawPoints(){let A=this,M=A.chart,S=A.yAxis.center,N=A.pivot,Y=A.options,Z=Y.pivot,K=M.renderer;A.points.forEach(U=>{let $=U.graphic,B=U.shapeArgs,R=B.d,L=v(Y.dial,U.dial);$?($.animate(B),B.d=R):U.graphic=K[U.shapeType](B).addClass("highcharts-dial").add(A.group),M.styledMode||U.graphic[$?"animate":"attr"]({stroke:L.borderColor,"stroke-width":L.borderWidth,fill:L.backgroundColor})}),N?N.animate({translateX:S[0],translateY:S[1]}):Z&&(A.pivot=K.circle(0,0,Z.radius).attr({zIndex:2}).addClass("highcharts-pivot").translate(S[0],S[1]).add(A.group),M.styledMode||A.pivot.attr({fill:Z.backgroundColor,stroke:Z.borderColor,"stroke-width":Z.borderWidth}))}animate(A){let M=this;A||M.points.forEach(S=>{let N=S.graphic;N&&(N.attr({rotation:180*M.yAxis.startAngleRad/Math.PI}),N.animate({rotation:S.shapeArgs.rotation},M.options.animation))})}render(){this.group=this.plotGroup("group","series",this.visible?"inherit":"hidden",this.options.zIndex,this.chart.seriesGroup),p.prototype.render.call(this),this.group.clip(this.chart.clipRect)}setData(A,M){p.prototype.setData.call(this,A,!1),this.processData(),this.generatePoints(),_(M,!0)&&this.chart.redraw()}hasData(){return!!this.points.length}}return w.defaultOptions=v(p.defaultOptions,{dataLabels:{borderColor:"#cccccc",borderRadius:3,borderWidth:1,crop:!1,defer:!1,enabled:!0,verticalAlign:"top",y:15,zIndex:2},dial:{backgroundColor:"#000000",baseLength:"70%",baseWidth:3,borderColor:"#cccccc",borderWidth:0,radius:"80%",rearLength:"10%",topWidth:1},pivot:{radius:5,borderWidth:0,borderColor:"#cccccc",backgroundColor:"#000000"},tooltip:{headerFormat:""},showInLegend:!1}),x(w.prototype,{angular:!0,directTouch:!0,drawGraph:h,drawTracker:m.prototype.drawTracker,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,pointClass:n,trackerGroups:["group","dataLabelsGroup"]}),c.registerSeriesType("gauge",w),w}),r(t,"Series/DragNodesComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let{composed:c}=n,{addEvent:s,pushUnique:h}=a;function p(){let m,y,g,x=this;x.container&&(m=s(x.container,"mousedown",v=>{let _=x.hoverPoint;_&&_.series&&_.series.hasDraggableNodes&&_.series.options.draggable&&(_.series.onMouseDown(_,v),y=s(x.container,"mousemove",C=>_&&_.series&&_.series.onMouseMove(_,C)),g=s(x.container.ownerDocument,"mouseup",C=>(y(),g(),_&&_.series&&_.series.onMouseUp(_,C))))})),s(x,"destroy",function(){m()})}return{compose:function(m){h(c,"DragNodes")&&s(m,"load",p)},onMouseDown:function(m,y){var x;let g=((x=this.chart.pointer)==null?void 0:x.normalize(y))||y;m.fixedPosition={chartX:g.chartX,chartY:g.chartY,plotX:m.plotX,plotY:m.plotY},m.inDragMode=!0},onMouseMove:function(m,y){var g;if(m.fixedPosition&&m.inDragMode){let x,v,_=this.chart,C=((g=_.pointer)==null?void 0:g.normalize(y))||y,k=m.fixedPosition.chartX-C.chartX,w=m.fixedPosition.chartY-C.chartY,E=_.graphLayoutsLookup;(Math.abs(k)>5||Math.abs(w)>5)&&(x=m.fixedPosition.plotX-k,v=m.fixedPosition.plotY-w,_.isInsidePlot(x,v)&&(m.plotX=x,m.plotY=v,m.hasDragged=!0,this.redrawHalo(m),E.forEach(A=>{A.restartSimulation()})))}},onMouseUp:function(m){m.fixedPosition&&(m.hasDragged&&(this.layout.enableSimulation?this.layout.start():this.chart.redraw()),m.inDragMode=m.hasDragged=!1,this.options.fixedDraggable||delete m.fixedPosition)},redrawHalo:function(m){m&&this.halo&&this.halo.attr({d:m.haloPath(this.options.states.hover.halo.size)})}}}),r(t,"Series/GraphLayoutComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c){let{setAnimation:s}=n,{composed:h}=a,{addEvent:p,pushUnique:m}=c;function y(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(_=>{_.updateSimulation()}),this.redraw())}function g(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(_=>{_.updateSimulation(!1)}),this.redraw())}function x(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach(_=>{_.stop()})}function v(){let _,C=!1,k=w=>{w.maxIterations--&&isFinite(w.temperature)&&!w.isStable()&&!w.enableSimulation&&(w.beforeStep&&w.beforeStep(),w.step(),_=!1,C=!0)};if(this.graphLayoutsLookup){for(s(!1,this),this.graphLayoutsLookup.forEach(w=>w.start());!_;)_=!0,this.graphLayoutsLookup.forEach(k);C&&this.series.forEach(w=>{w&&w.layout&&w.render()})}}return{compose:function(_){m(h,"GraphLayout")&&(p(_,"afterPrint",y),p(_,"beforePrint",g),p(_,"predraw",x),p(_,"render",v))},integrations:{},layouts:{}}}),r(t,"Series/PackedBubble/PackedBubblePoint.js",[t["Core/Chart/Chart.js"],t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"]],function(n,a,c){let{seriesTypes:{bubble:{prototype:{pointClass:s}}}}=c;return class extends s{destroy(){var h;return(h=this.series)!=null&&h.layout&&this.series.layout.removeElementFromCollection(this,this.series.layout.nodes),a.prototype.destroy.apply(this,arguments)}firePointEvent(){let h=this.series.options;if(this.isParentNode&&h.parentNode){let p=h.allowPointSelect;h.allowPointSelect=h.parentNode.allowPointSelect,a.prototype.firePointEvent.apply(this,arguments),h.allowPointSelect=p}else a.prototype.firePointEvent.apply(this,arguments)}select(){let h=this.series.chart;this.isParentNode?(h.getSelectedPoints=h.getSelectedParentNodes,a.prototype.select.apply(this,arguments),h.getSelectedPoints=n.prototype.getSelectedPoints):a.prototype.select.apply(this,arguments)}}}),r(t,"Series/PackedBubble/PackedBubbleSeriesDefaults.js",[t["Core/Utilities.js"]],function(n){let{isNumber:a}=n;return{minSize:"10%",maxSize:"50%",sizeBy:"area",zoneAxis:"y",crisp:!1,tooltip:{pointFormat:"Value: {point.value}"},draggable:!0,useSimulation:!0,parentNode:{allowPointSelect:!1},dataLabels:{formatter:function(){let{numberFormatter:c}=this.series.chart,{value:s}=this.point;return a(s)?c(s,-1):""},parentNodeFormatter:function(){return this.name},parentNodeTextPath:{enabled:!0},padding:0,style:{transition:"opacity 2000ms"}},layoutAlgorithm:{initialPositions:"circle",initialPositionRadius:20,bubblePadding:5,parentNodeLimit:!1,seriesInteraction:!0,dragBetweenSeries:!1,parentNodeOptions:{maxIterations:400,gravitationalConstant:.03,maxSpeed:50,initialPositionRadius:100,seriesInteraction:!0,marker:{fillColor:null,fillOpacity:1,lineWidth:null,lineColor:null,symbol:"circle"}},enableSimulation:!0,type:"packedbubble",integration:"packedbubble",maxIterations:1e3,splitSeries:!1,maxSpeed:5,gravitationalConstant:.01,friction:-.981}}}),r(t,"Series/Networkgraph/VerletIntegration.js",[],function(){return{attractive:function(n,a,c){let s=n.getMass(),h=-c.x*a*this.diffTemperature,p=-c.y*a*this.diffTemperature;n.fromNode.fixedPosition||(n.fromNode.plotX-=h*s.fromNode/n.fromNode.degree,n.fromNode.plotY-=p*s.fromNode/n.fromNode.degree),n.toNode.fixedPosition||(n.toNode.plotX+=h*s.toNode/n.toNode.degree,n.toNode.plotY+=p*s.toNode/n.toNode.degree)},attractiveForceFunction:function(n,a){return(a-n)/n},barycenter:function(){let n=this.options.gravitationalConstant||0,a=(this.barycenter.xFactor-(this.box.left+this.box.width)/2)*n,c=(this.barycenter.yFactor-(this.box.top+this.box.height)/2)*n;this.nodes.forEach(function(s){s.fixedPosition||(s.plotX-=a/s.mass/s.degree,s.plotY-=c/s.mass/s.degree)})},getK:function(n){return Math.pow(n.box.width*n.box.height/n.nodes.length,.5)},integrate:function(n,a){let c=-n.options.friction,s=n.options.maxSpeed,h=a.prevX,p=a.prevY,m=(a.plotX+a.dispX-h)*c,y=(a.plotY+a.dispY-p)*c,g=Math.abs,x=g(m)/(m||1),v=g(y)/(y||1),_=x*Math.min(s,Math.abs(m)),C=v*Math.min(s,Math.abs(y));a.prevX=a.plotX+a.dispX,a.prevY=a.plotY+a.dispY,a.plotX+=_,a.plotY+=C,a.temperature=n.vectorLength({x:_,y:C})},repulsive:function(n,a,c){let s=a*this.diffTemperature/n.mass/n.degree;n.fixedPosition||(n.plotX+=c.x*s,n.plotY+=c.y*s)},repulsiveForceFunction:function(n,a){return(a-n)/n*(a>n?1:0)}}}),r(t,"Series/PackedBubble/PackedBubbleIntegration.js",[t["Core/Globals.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(n,a){let{noop:c}=n;return{barycenter:function(){let s,h,p=this.options.gravitationalConstant,m=this.box,y=this.nodes;for(let g of y)this.options.splitSeries&&!g.isParentNode?(s=g.series.parentNode.plotX,h=g.series.parentNode.plotY):(s=m.width/2,h=m.height/2),g.fixedPosition||(g.plotX-=(g.plotX-s)*p/(g.mass*Math.sqrt(y.length)),g.plotY-=(g.plotY-h)*p/(g.mass*Math.sqrt(y.length)))},getK:c,integrate:a.integrate,repulsive:function(s,h,p,m){let y=h*this.diffTemperature/s.mass/s.degree,g=p.x*y,x=p.y*y;s.fixedPosition||(s.plotX+=g,s.plotY+=x),m.fixedPosition||(m.plotX-=g,m.plotY-=x)},repulsiveForceFunction:function(s,h,p,m){return Math.min(s,(p.marker.radius+m.marker.radius)/2)}}}),r(t,"Series/Networkgraph/EulerIntegration.js",[],function(){return{attractive:function(n,a,c,s){let h=n.getMass(),p=c.x/s*a,m=c.y/s*a;n.fromNode.fixedPosition||(n.fromNode.dispX-=p*h.fromNode/n.fromNode.degree,n.fromNode.dispY-=m*h.fromNode/n.fromNode.degree),n.toNode.fixedPosition||(n.toNode.dispX+=p*h.toNode/n.toNode.degree,n.toNode.dispY+=m*h.toNode/n.toNode.degree)},attractiveForceFunction:function(n,a){return n*n/a},barycenter:function(){let n=this.options.gravitationalConstant,a=this.barycenter.xFactor,c=this.barycenter.yFactor;this.nodes.forEach(function(s){if(!s.fixedPosition){let h=s.getDegree(),p=h*(1+h/2);s.dispX+=(a-s.plotX)*n*p/s.degree,s.dispY+=(c-s.plotY)*n*p/s.degree}})},getK:function(n){return Math.pow(n.box.width*n.box.height/n.nodes.length,.3)},integrate:function(n,a){a.dispX+=a.dispX*n.options.friction,a.dispY+=a.dispY*n.options.friction;let c=a.temperature=n.vectorLength({x:a.dispX,y:a.dispY});c!==0&&(a.plotX+=a.dispX/c*Math.min(Math.abs(a.dispX),n.temperature),a.plotY+=a.dispY/c*Math.min(Math.abs(a.dispY),n.temperature))},repulsive:function(n,a,c,s){n.dispX+=c.x/s*a/n.degree,n.dispY+=c.y/s*a/n.degree},repulsiveForceFunction:function(n,a){return a*a/n}}}),r(t,"Series/Networkgraph/QuadTreeNode.js",[],function(){class n{constructor(c){this.body=!1,this.isEmpty=!1,this.isInternal=!1,this.nodes=[],this.box=c,this.boxSize=Math.min(c.width,c.height)}divideBox(){let c=this.box.width/2,s=this.box.height/2;this.nodes[0]=new n({left:this.box.left,top:this.box.top,width:c,height:s}),this.nodes[1]=new n({left:this.box.left+c,top:this.box.top,width:c,height:s}),this.nodes[2]=new n({left:this.box.left+c,top:this.box.top+s,width:c,height:s}),this.nodes[3]=new n({left:this.box.left,top:this.box.top+s,width:c,height:s})}getBoxPosition(c){let s=c.plotX<this.box.left+this.box.width/2,h=c.plotY<this.box.top+this.box.height/2;return s?h?0:3:h?1:2}insert(c,s){let h;this.isInternal?this.nodes[this.getBoxPosition(c)].insert(c,s-1):(this.isEmpty=!1,this.body?s?(this.isInternal=!0,this.divideBox(),this.body!==!0&&(this.nodes[this.getBoxPosition(this.body)].insert(this.body,s-1),this.body=!0),this.nodes[this.getBoxPosition(c)].insert(c,s-1)):((h=new n({top:c.plotX||NaN,left:c.plotY||NaN,width:.1,height:.1})).body=c,h.isInternal=!1,this.nodes.push(h)):(this.isInternal=!1,this.body=c))}updateMassAndCenter(){let c=0,s=0,h=0;if(this.isInternal){for(let p of this.nodes)p.isEmpty||(c+=p.mass,s+=p.plotX*p.mass,h+=p.plotY*p.mass);s/=c,h/=c}else this.body&&(c=this.body.mass,s=this.body.plotX,h=this.body.plotY);this.mass=c,this.plotX=s,this.plotY=h}}return n}),r(t,"Series/Networkgraph/QuadTree.js",[t["Series/Networkgraph/QuadTreeNode.js"]],function(n){return class{constructor(a,c,s,h){this.box={left:a,top:c,width:s,height:h},this.maxDepth=25,this.root=new n(this.box),this.root.isInternal=!0,this.root.isRoot=!0,this.root.divideBox()}calculateMassAndCenter(){this.visitNodeRecursive(null,null,function(a){a.updateMassAndCenter()})}insertNodes(a){for(let c of a)this.root.insert(c,this.maxDepth)}visitNodeRecursive(a,c,s){let h;if(a||(a=this.root),a===this.root&&c&&(h=c(a)),h!==!1){for(let p of a.nodes){if(p.isInternal){if(c&&(h=c(p)),h===!1)continue;this.visitNodeRecursive(p,c,s)}else p.body&&c&&c(p.body);s&&s(p)}a===this.root&&s&&s(a)}}}}),r(t,"Series/Networkgraph/ReingoldFruchtermanLayout.js",[t["Series/Networkgraph/EulerIntegration.js"],t["Core/Globals.js"],t["Series/GraphLayoutComposition.js"],t["Series/Networkgraph/QuadTree.js"],t["Core/Utilities.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(n,a,c,s,h,p){let{win:m}=a,{clamp:y,defined:g,isFunction:x,fireEvent:v,pick:_}=h;class C{constructor(){this.box={},this.currentStep=0,this.initialRendering=!0,this.links=[],this.nodes=[],this.series=[],this.simulation=!1}static compose(w){c.compose(w),c.integrations.euler=n,c.integrations.verlet=p,c.layouts["reingold-fruchterman"]=C}init(w){this.options=w,this.nodes=[],this.links=[],this.series=[],this.box={x:0,y:0,width:0,height:0},this.setInitialRendering(!0),this.integration=c.integrations[w.integration],this.enableSimulation=w.enableSimulation,this.attractiveForce=_(w.attractiveForce,this.integration.attractiveForceFunction),this.repulsiveForce=_(w.repulsiveForce,this.integration.repulsiveForceFunction),this.approximation=w.approximation}updateSimulation(w){this.enableSimulation=_(w,this.options.enableSimulation)}start(){let w=this.series,E=this.options;this.currentStep=0,this.forces=w[0]&&w[0].forces||[],this.chart=w[0]&&w[0].chart,this.initialRendering&&(this.initPositions(),w.forEach(function(A){A.finishedAnimating=!0,A.render()})),this.setK(),this.resetSimulation(E),this.enableSimulation&&this.step()}step(){let w=this.series;for(let E of(this.currentStep++,this.approximation==="barnes-hut"&&(this.createQuadTree(),this.quadTree.calculateMassAndCenter()),this.forces||[]))this[E+"Forces"](this.temperature);if(this.applyLimits(),this.temperature=this.coolDown(this.startTemperature,this.diffTemperature,this.currentStep),this.prevSystemTemperature=this.systemTemperature,this.systemTemperature=this.getSystemTemperature(),this.enableSimulation){for(let E of w)E.chart&&E.render();this.maxIterations--&&isFinite(this.temperature)&&!this.isStable()?(this.simulation&&m.cancelAnimationFrame(this.simulation),this.simulation=m.requestAnimationFrame(()=>this.step())):(this.simulation=!1,this.series.forEach(E=>{v(E,"afterSimulation")}))}}stop(){this.simulation&&m.cancelAnimationFrame(this.simulation)}setArea(w,E,A,M){this.box={left:w,top:E,width:A,height:M}}setK(){this.k=this.options.linkLength||this.integration.getK(this)}addElementsToCollection(w,E){for(let A of w)E.indexOf(A)===-1&&E.push(A)}removeElementFromCollection(w,E){let A=E.indexOf(w);A!==-1&&E.splice(A,1)}clear(){this.nodes.length=0,this.links.length=0,this.series.length=0,this.resetSimulation()}resetSimulation(){this.forcedStop=!1,this.systemTemperature=0,this.setMaxIterations(),this.setTemperature(),this.setDiffTemperature()}restartSimulation(){this.simulation?this.resetSimulation():(this.setInitialRendering(!1),this.enableSimulation?this.start():this.setMaxIterations(1),this.chart&&this.chart.redraw(),this.setInitialRendering(!0))}setMaxIterations(w){this.maxIterations=_(w,this.options.maxIterations)}setTemperature(){this.temperature=this.startTemperature=Math.sqrt(this.nodes.length)}setDiffTemperature(){this.diffTemperature=this.startTemperature/(this.options.maxIterations+1)}setInitialRendering(w){this.initialRendering=w}createQuadTree(){this.quadTree=new s(this.box.left,this.box.top,this.box.width,this.box.height),this.quadTree.insertNodes(this.nodes)}initPositions(){let w=this.options.initialPositions;if(x(w))for(let E of(w.call(this),this.nodes))g(E.prevX)||(E.prevX=E.plotX),g(E.prevY)||(E.prevY=E.plotY),E.dispX=0,E.dispY=0;else w==="circle"?this.setCircularPositions():this.setRandomPositions()}setCircularPositions(){let w,E=this.box,A=this.nodes,M=2*Math.PI/(A.length+1),S=A.filter(function(U){return U.linksTo.length===0}),N={},Y=this.options.initialPositionRadius,Z=U=>{for(let $ of U.linksFrom||[])N[$.toNode.id]||(N[$.toNode.id]=!0,K.push($.toNode),Z($.toNode))},K=[];for(let U of S)K.push(U),Z(U);if(K.length)for(let U of A)K.indexOf(U)===-1&&K.push(U);else K=A;for(let U=0,$=K.length;U<$;++U)(w=K[U]).plotX=w.prevX=_(w.plotX,E.width/2+Y*Math.cos(U*M)),w.plotY=w.prevY=_(w.plotY,E.height/2+Y*Math.sin(U*M)),w.dispX=0,w.dispY=0}setRandomPositions(){let w,E=this.box,A=this.nodes,M=A.length+1,S=N=>{let Y=N*N/Math.PI;return Y-Math.floor(Y)};for(let N=0,Y=A.length;N<Y;++N)(w=A[N]).plotX=w.prevX=_(w.plotX,E.width*S(N)),w.plotY=w.prevY=_(w.plotY,E.height*S(M+N)),w.dispX=0,w.dispY=0}force(w,...E){this.integration[w].apply(this,E)}barycenterForces(){this.getBarycenter(),this.force("barycenter")}getBarycenter(){let w=0,E=0,A=0;for(let M of this.nodes)E+=M.plotX*M.mass,A+=M.plotY*M.mass,w+=M.mass;return this.barycenter={x:E,y:A,xFactor:E/w,yFactor:A/w},this.barycenter}barnesHutApproximation(w,E){let A,M,S=this.getDistXY(w,E),N=this.vectorLength(S);return w!==E&&N!==0&&(E.isInternal?E.boxSize/N<this.options.theta&&N!==0?(M=this.repulsiveForce(N,this.k),this.force("repulsive",w,M*E.mass,S,N),A=!1):A=!0:(M=this.repulsiveForce(N,this.k),this.force("repulsive",w,M*E.mass,S,N))),A}repulsiveForces(){if(this.approximation==="barnes-hut")for(let w of this.nodes)this.quadTree.visitNodeRecursive(null,E=>this.barnesHutApproximation(w,E));else{let w,E,A;for(let M of this.nodes)for(let S of this.nodes)M===S||M.fixedPosition||(A=this.getDistXY(M,S),(E=this.vectorLength(A))!==0&&(w=this.repulsiveForce(E,this.k),this.force("repulsive",M,w*S.mass,A,E)))}}attractiveForces(){let w,E,A;for(let M of this.links)M.fromNode&&M.toNode&&(w=this.getDistXY(M.fromNode,M.toNode),(E=this.vectorLength(w))!==0&&(A=this.attractiveForce(E,this.k),this.force("attractive",M,A,w,E)))}applyLimits(){for(let w of this.nodes)w.fixedPosition||(this.integration.integrate(this,w),this.applyLimitBox(w,this.box),w.dispX=0,w.dispY=0)}applyLimitBox(w,E){let A=w.radius;w.plotX=y(w.plotX,E.left+A,E.width-A),w.plotY=y(w.plotY,E.top+A,E.height-A)}coolDown(w,E,A){return w-E*A}isStable(){return 1e-5>Math.abs(this.systemTemperature-this.prevSystemTemperature)||this.temperature<=0}getSystemTemperature(){let w=0;for(let E of this.nodes)w+=E.temperature;return w}vectorLength(w){return Math.sqrt(w.x*w.x+w.y*w.y)}getDistR(w,E){let A=this.getDistXY(w,E);return this.vectorLength(A)}getDistXY(w,E){let A=w.plotX-E.plotX,M=w.plotY-E.plotY;return{x:A,y:M,absX:Math.abs(A),absY:Math.abs(M)}}}return C}),r(t,"Series/PackedBubble/PackedBubbleLayout.js",[t["Series/GraphLayoutComposition.js"],t["Series/PackedBubble/PackedBubbleIntegration.js"],t["Series/Networkgraph/ReingoldFruchtermanLayout.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{addEvent:h,pick:p}=s;function m(){let x=this.series,v=[];return x.forEach(_=>{_.parentNode&&_.parentNode.selected&&v.push(_.parentNode)}),v}function y(){this.allDataPoints&&delete this.allDataPoints}class g extends c{constructor(){super(...arguments),this.index=NaN,this.nodes=[],this.series=[]}static compose(v){c.compose(v),n.integrations.packedbubble=a,n.layouts.packedbubble=g;let _=v.prototype;_.getSelectedParentNodes||(h(v,"beforeRedraw",y),_.getSelectedParentNodes=m)}beforeStep(){this.options.marker&&this.series.forEach(v=>{v&&v.calculateParentRadius()})}isStable(){let v=Math.abs(this.prevSystemTemperature-this.systemTemperature);return 1>Math.abs(10*this.systemTemperature/Math.sqrt(this.nodes.length))&&v<1e-5||this.temperature<=0}setCircularPositions(){let v=this.box,_=this.nodes,C=2*Math.PI/(_.length+1),k=this.options.initialPositionRadius,w,E,A=0;for(let M of _)this.options.splitSeries&&!M.isParentNode?(w=M.series.parentNode.plotX,E=M.series.parentNode.plotY):(w=v.width/2,E=v.height/2),M.plotX=M.prevX=p(M.plotX,w+k*Math.cos(M.index||A*C)),M.plotY=M.prevY=p(M.plotY,E+k*Math.sin(M.index||A*C)),M.dispX=0,M.dispY=0,A++}repulsiveForces(){let v,_,C,k=this,w=k.options.bubblePadding,E=k.nodes;E.forEach(A=>{A.degree=A.mass,A.neighbours=0,E.forEach(M=>{v=0,A!==M&&!A.fixedPosition&&(k.options.seriesInteraction||A.series===M.series)&&(C=k.getDistXY(A,M),(_=k.vectorLength(C)-(A.marker.radius+M.marker.radius+w))<0&&(A.degree+=.01,A.neighbours++,v=k.repulsiveForce(-_/Math.sqrt(A.neighbours),k.k,A,M)),k.force("repulsive",A,v*M.mass,C,M,_))})})}applyLimitBox(v,_){let C,k;this.options.splitSeries&&!v.isParentNode&&this.options.parentNodeLimit&&(C=this.getDistXY(v,v.series.parentNode),(k=v.series.parentNodeRadius-v.marker.radius-this.vectorLength(C))<0&&k>-2*v.marker.radius&&(v.plotX-=.01*C.x,v.plotY-=.01*C.y)),super.applyLimitBox(v,_)}}return n.layouts.packedbubble=g,g}),r(t,"Series/SimulationSeriesUtilities.js",[t["Core/Utilities.js"],t["Core/Animation/AnimationUtilities.js"]],function(n,a){let{merge:c,syncTimeout:s}=n,{animObject:h}=a;return{initDataLabels:function(){let p=this.options.dataLabels;if(!this.dataLabelsGroup){let m=this.initDataLabelsGroup();return!this.chart.styledMode&&(p!=null&&p.style)&&m.css(p.style),m.attr({opacity:0}),this.visible&&m.show(),m}return this.dataLabelsGroup.attr(c({opacity:1},this.getPlotBox("data-labels"))),this.dataLabelsGroup},initDataLabelsDefer:function(){var m;let p=this.options.dataLabels;p!=null&&p.defer&&((m=this.options.layoutAlgorithm)!=null&&m.enableSimulation)?s(()=>{this.deferDataLabels=!1},p?h(p.animation).defer:0):this.deferDataLabels=!1}}}),r(t,"Extensions/TextPath.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let{deg2rad:c}=n,{addEvent:s,merge:h,uniqueKey:p,defined:m,extend:y}=a;function g(_,C){C=h(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},C);let k=this.renderer.url,w=this.text||this,E=w.textPath,{attributes:A,enabled:M}=C;if(_=_||E&&E.path,E&&E.undo(),_&&M){let S=s(w,"afterModifyTree",N=>{if(_&&M){let Y=_.attr("id");Y||_.attr("id",Y=p());let Z={x:0,y:0};m(A.dx)&&(Z.dx=A.dx,delete A.dx),m(A.dy)&&(Z.dy=A.dy,delete A.dy),w.attr(Z),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());let K=N.nodes.slice(0);N.nodes.length=0,N.nodes[0]={tagName:"textPath",attributes:y(A,{"text-anchor":A.textAnchor,href:`${k}#${Y}`}),children:K}}});w.textPath={path:_,undo:S}}else w.attr({dx:0,dy:0}),delete w.textPath;return this.added&&(w.textCache="",this.renderer.buildText(w)),this}function x(_){var w;let C=_.bBox,k=(w=this.element)==null?void 0:w.querySelector("textPath");if(k){let E=[],{b:A,h:M}=this.renderer.fontMetrics(this.element),S=M-A,N=RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),Y=k.innerHTML.replace(N,"").split(/<tspan class="highcharts-br"[^>]*>/),Z=Y.length,K=(U,$)=>{let{x:B,y:R}=$,L=(k.getRotationOfChar(U)-90)*c,G=Math.cos(L),F=Math.sin(L);return[[B-S*G,R-S*F],[B+A*G,R+A*F]]};for(let U=0,$=0;$<Z;$++){let B=Y[$].length;for(let R=0;R<B;R+=5)try{let L=U+R+$,[G,F]=K(L,k.getStartPositionOfChar(L));R===0?(E.push(F),E.push(G)):($===0&&E.unshift(F),$===Z-1&&E.push(G))}catch{break}U+=B-1;try{let R=U+$,L=k.getEndPositionOfChar(R),[G,F]=K(R,L);E.unshift(F),E.unshift(G)}catch{break}}E.length&&E.push(E[0].slice()),C.polygon=E}return C}function v(_){var E;let C=_.labelOptions,k=_.point,w=C[k.formatPrefix+"TextPath"]||C.textPath;w&&!C.useHTML&&(this.setTextPath(((E=k.getDataLabelPath)==null?void 0:E.call(k,this))||k.graphic,w),k.dataLabelPath&&!w.enabled&&(k.dataLabelPath=k.dataLabelPath.destroy()))}return{compose:function(_){s(_,"afterGetBBox",x),s(_,"beforeAddingDataLabel",v);let C=_.prototype;C.setTextPath||(C.setTextPath=g)}}}),r(t,"Series/PackedBubble/PackedBubbleSeries.js",[t["Core/Color/Color.js"],t["Series/DragNodesComposition.js"],t["Series/GraphLayoutComposition.js"],t["Core/Globals.js"],t["Series/PackedBubble/PackedBubblePoint.js"],t["Series/PackedBubble/PackedBubbleSeriesDefaults.js"],t["Series/PackedBubble/PackedBubbleLayout.js"],t["Core/Series/SeriesRegistry.js"],t["Series/SimulationSeriesUtilities.js"],t["Core/Utilities.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Extensions/TextPath.js"]],function(n,a,c,s,h,p,m,y,g,x,v,_){let{parse:C}=n,{noop:k}=s,{series:{prototype:w},seriesTypes:{bubble:E}}=y,{initDataLabels:A,initDataLabelsDefer:M}=g,{addEvent:S,clamp:N,defined:Y,extend:Z,fireEvent:K,isArray:U,isNumber:$,merge:B,pick:R}=x;_.compose(v);class L extends E{constructor(){super(...arguments),this.parentNodeMass=0,this.deferDataLabels=!0}static compose(F,j,q){E.compose(F,j,q),a.compose(j),m.compose(j)}accumulateAllPoints(){let F,j=this.chart,q=[];for(let W of j.series)if(W.is("packedbubble")&&W.reserveSpace()){F=W.yData||[];for(let se=0;se<F.length;se++)q.push([null,null,F[se],W.index,se,{id:se,marker:{radius:0}}])}return q}addLayout(){let F=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},j=F.type||"packedbubble",q=this.chart.options.chart,W=this.chart.graphLayoutsStorage,se=this.chart.graphLayoutsLookup,fe;W||(this.chart.graphLayoutsStorage=W={},this.chart.graphLayoutsLookup=se=[]),(fe=W[j])||(F.enableSimulation=Y(q.forExport)?!q.forExport:F.enableSimulation,W[j]=fe=new c.layouts[j],fe.init(F),se.splice(fe.index,0,fe)),this.layout=fe,this.points.forEach(ee=>{ee.mass=2,ee.degree=1,ee.collisionNmb=1}),fe.setArea(0,0,this.chart.plotWidth,this.chart.plotHeight),fe.addElementsToCollection([this],fe.series),fe.addElementsToCollection(this.points,fe.nodes)}addSeriesLayout(){let F=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},j=F.type||"packedbubble",q=this.chart.graphLayoutsStorage,W=this.chart.graphLayoutsLookup,se=B(F,F.parentNodeOptions,{enableSimulation:this.layout.options.enableSimulation}),fe=q[j+"-series"];fe||(q[j+"-series"]=fe=new c.layouts[j],fe.init(se),W.splice(fe.index,0,fe)),this.parentNodeLayout=fe,this.createParentNodes()}calculateParentRadius(){let F=this.seriesBox();this.parentNodeRadius=N(Math.sqrt(2*this.parentNodeMass/Math.PI)+20,20,F?Math.max(Math.sqrt(Math.pow(F.width,2)+Math.pow(F.height,2))/2+20,20):Math.sqrt(2*this.parentNodeMass/Math.PI)+20),this.parentNode&&(this.parentNode.marker.radius=this.parentNode.radius=this.parentNodeRadius)}calculateZExtremes(){let F=this.chart.series,j=this.options.zMin,q=this.options.zMax,W=1/0,se=-1/0;return j&&q?[j,q]:(F.forEach(fe=>{fe.yData.forEach(ee=>{Y(ee)&&(ee>se&&(se=ee),ee<W&&(W=ee))})}),[j=R(j,W),q=R(q,se)])}checkOverlap(F,j){let q=F[0]-j[0],W=F[1]-j[1];return Math.sqrt(q*q+W*W)-Math.abs(F[2]+j[2])<-.001}createParentNodes(){let F=this.pointClass,j=this.chart,q=this.parentNodeLayout,W=this.layout.options,se,fe=this.parentNode,ee={radius:this.parentNodeRadius,lineColor:this.color,fillColor:C(this.color).brighten(.4).get()};W.parentNodeOptions&&(ee=B(W.parentNodeOptions.marker||{},ee)),this.parentNodeMass=0,this.points.forEach(oe=>{this.parentNodeMass+=Math.PI*Math.pow(oe.marker.radius,2)}),this.calculateParentRadius(),q.nodes.forEach(oe=>{oe.seriesIndex===this.index&&(se=!0)}),q.setArea(0,0,j.plotWidth,j.plotHeight),se||(fe||(fe=new F(this,{mass:this.parentNodeRadius/2,marker:ee,dataLabels:{inside:!1},states:{normal:{marker:ee},hover:{marker:ee}},dataLabelOnNull:!0,degree:this.parentNodeRadius,isParentNode:!0,seriesIndex:this.index})),this.parentNode&&(fe.plotX=this.parentNode.plotX,fe.plotY=this.parentNode.plotY),this.parentNode=fe,q.addElementsToCollection([this],q.series),q.addElementsToCollection([fe],q.nodes))}deferLayout(){let F=this.options.layoutAlgorithm;this.visible&&(this.addLayout(),F.splitSeries&&this.addSeriesLayout())}destroy(){this.chart.graphLayoutsLookup&&this.chart.graphLayoutsLookup.forEach(F=>{F.removeElementFromCollection(this,F.series)},this),this.parentNode&&this.parentNodeLayout&&(this.parentNodeLayout.removeElementFromCollection(this.parentNode,this.parentNodeLayout.nodes),this.parentNode.dataLabel&&(this.parentNode.dataLabel=this.parentNode.dataLabel.destroy())),w.destroy.apply(this,arguments)}drawDataLabels(){!this.deferDataLabels&&(w.drawDataLabels.call(this,this.points),this.parentNode&&(this.parentNode.formatPrefix="parentNode",w.drawDataLabels.call(this,[this.parentNode])))}drawGraph(){var se;if(!this.layout||!this.layout.options.splitSeries)return;let F=this.chart,j=this.layout.options.parentNodeOptions.marker,q={fill:j.fillColor||C(this.color).brighten(.4).get(),opacity:j.fillOpacity,stroke:j.lineColor||this.color,"stroke-width":R(j.lineWidth,this.options.lineWidth)},W={};this.parentNodesGroup=this.plotGroup("parentNodesGroup","parentNode",this.visible?"inherit":"hidden",.1,F.seriesGroup),(se=this.group)==null||se.attr({zIndex:2}),this.calculateParentRadius(),this.parentNode&&Y(this.parentNode.plotX)&&Y(this.parentNode.plotY)&&Y(this.parentNodeRadius)&&(W=B({x:this.parentNode.plotX-this.parentNodeRadius,y:this.parentNode.plotY-this.parentNodeRadius,width:2*this.parentNodeRadius,height:2*this.parentNodeRadius},q),this.parentNode.graphic||(this.graph=this.parentNode.graphic=F.renderer.symbol(q.symbol).add(this.parentNodesGroup)),this.parentNode.graphic.attr(W))}drawTracker(){let F,j=this.parentNode;super.drawTracker(),j&&(F=U(j.dataLabels)?j.dataLabels:j.dataLabel?[j.dataLabel]:[],j.graphic&&(j.graphic.element.point=j),F.forEach(q=>{(q.div||q.element).point=j}))}getPointRadius(){let F,j,q,W,se=this.chart,fe=se.plotWidth,ee=se.plotHeight,oe=this.options,Ce=oe.useSimulation,ge=Math.min(fe,ee),Ee={},J=[],ie=se.allDataPoints||[],le=ie.length;["minSize","maxSize"].forEach(te=>{let ae=parseInt(oe[te],10),ce=/%$/.test(oe[te]);Ee[te]=ce?ge*ae/100:ae*Math.sqrt(le)}),se.minRadius=F=Ee.minSize/Math.sqrt(le),se.maxRadius=j=Ee.maxSize/Math.sqrt(le);let be=Ce?this.calculateZExtremes():[F,j];ie.forEach((te,ae)=>{q=Ce?N(te[2],be[0],be[1]):te[2],(W=this.getRadius(be[0],be[1],F,j,q))===0&&(W=null),ie[ae][2]=W,J.push(W)}),this.radii=J}init(){return w.init.apply(this,arguments),M.call(this),this.eventsToUnbind.push(S(this,"updatedData",function(){this.chart.series.forEach(F=>{F.type===this.type&&(F.isDirty=!0)},this)})),this}onMouseUp(F){if(F.fixedPosition&&!F.removed){let j,q=this.layout,W=this.parentNodeLayout;W&&q.options.dragBetweenSeries&&W.nodes.forEach(se=>{F&&F.marker&&se!==F.series.parentNode&&(j=q.getDistXY(F,se),q.vectorLength(j)-se.marker.radius-F.marker.radius<0&&(se.series.addPoint(B(F.options,{plotX:F.plotX,plotY:F.plotY}),!1),q.removeElementFromCollection(F,q.nodes),F.remove()))}),a.onMouseUp.apply(this,arguments)}}placeBubbles(F){let j=this.checkOverlap,q=this.positionBubble,W=[],se=1,fe=0,ee=0,oe,Ce=[],ge,Ee=F.sort((J,ie)=>ie[2]-J[2]);if(Ee.length){if(W.push([[0,0,Ee[0][2],Ee[0][3],Ee[0][4]]]),Ee.length>1)for(W.push([[0,0-Ee[1][2]-Ee[0][2],Ee[1][2],Ee[1][3],Ee[1][4]]]),ge=2;ge<Ee.length;ge++)Ee[ge][2]=Ee[ge][2]||1,j(oe=q(W[se][fe],W[se-1][ee],Ee[ge]),W[se][0])?(W.push([]),ee=0,W[se+1].push(q(W[se][fe],W[se][0],Ee[ge])),se++,fe=0):se>1&&W[se-1][ee+1]&&j(oe,W[se-1][ee+1])?(ee++,W[se].push(q(W[se][fe],W[se-1][ee],Ee[ge])),fe++):(fe++,W[se].push(oe));this.chart.stages=W,this.chart.rawPositions=[].concat.apply([],W),this.resizeRadius(),Ce=this.chart.rawPositions}return Ce}pointAttribs(F,j){let q=this.options,W=F&&F.isParentNode,se=q.marker;W&&q.layoutAlgorithm&&q.layoutAlgorithm.parentNodeOptions&&(se=q.layoutAlgorithm.parentNodeOptions.marker);let fe=se.fillOpacity,ee=w.pointAttribs.call(this,F,j);return fe!==1&&(ee["fill-opacity"]=fe),ee}positionBubble(F,j,q){let W=Math.asin,se=Math.acos,fe=Math.pow,ee=Math.abs,oe=(0,Math.sqrt)(fe(F[0]-j[0],2)+fe(F[1]-j[1],2)),Ce=se((fe(oe,2)+fe(q[2]+j[2],2)-fe(q[2]+F[2],2))/(2*(q[2]+j[2])*oe)),ge=W(ee(F[0]-j[0])/oe),Ee=(F[1]-j[1]<0?0:Math.PI)+Ce+ge*((F[0]-j[0])*(F[1]-j[1])<0?1:-1),J=Math.cos(Ee),ie=Math.sin(Ee);return[j[0]+(j[2]+q[2])*ie,j[1]-(j[2]+q[2])*J,q[2],q[3],q[4]]}render(){let F=[];w.render.apply(this,arguments),!this.options.dataLabels.allowOverlap&&(this.data.forEach(j=>{U(j.dataLabels)&&j.dataLabels.forEach(q=>{F.push(q)})}),this.options.useSimulation&&this.chart.hideOverlappingLabels(F))}resizeRadius(){let F,j,q,W,se,fe=this.chart,ee=fe.rawPositions,oe=Math.min,Ce=Math.max,ge=fe.plotLeft,Ee=fe.plotTop,J=fe.plotHeight,ie=fe.plotWidth;for(let ae of(F=q=Number.POSITIVE_INFINITY,j=W=Number.NEGATIVE_INFINITY,ee))se=ae[2],F=oe(F,ae[0]-se),j=Ce(j,ae[0]+se),q=oe(q,ae[1]-se),W=Ce(W,ae[1]+se);let le=[j-F,W-q],be=[(ie-ge)/le[0],(J-Ee)/le[1]],te=oe.apply([],be);if(Math.abs(te-1)>1e-10){for(let ae of ee)ae[2]*=te;this.placeBubbles(ee)}else fe.diffY=J/2+Ee-q-(W-q)/2,fe.diffX=ie/2+ge-F-(j-F)/2}seriesBox(){let F,j=this.chart,q=this.data,W=Math.max,se=Math.min,fe=[j.plotLeft,j.plotLeft+j.plotWidth,j.plotTop,j.plotTop+j.plotHeight];return q.forEach(ee=>{Y(ee.plotX)&&Y(ee.plotY)&&ee.marker.radius&&(F=ee.marker.radius,fe[0]=se(fe[0],ee.plotX-F),fe[1]=W(fe[1],ee.plotX+F),fe[2]=se(fe[2],ee.plotY-F),fe[3]=W(fe[3],ee.plotY+F))}),$(fe.width/fe.height)?fe:null}setVisible(){let F=this;w.setVisible.apply(F,arguments),F.parentNodeLayout&&F.graph?F.visible?(F.graph.show(),F.parentNode.dataLabel&&F.parentNode.dataLabel.show()):(F.graph.hide(),F.parentNodeLayout.removeElementFromCollection(F.parentNode,F.parentNodeLayout.nodes),F.parentNode.dataLabel&&F.parentNode.dataLabel.hide()):F.layout&&(F.visible?F.layout.addElementsToCollection(F.points,F.layout.nodes):F.points.forEach(j=>{F.layout.removeElementFromCollection(j,F.layout.nodes)}))}translate(){let F,j,q,W=this.chart,se=this.data,fe=this.index,ee=this.options.useSimulation;for(let oe of(this.processedXData=this.xData,this.generatePoints(),Y(W.allDataPoints)||(W.allDataPoints=this.accumulateAllPoints(),this.getPointRadius()),ee?q=W.allDataPoints:(q=this.placeBubbles(W.allDataPoints),this.options.draggable=!1),q))oe[3]===fe&&(F=se[oe[4]],j=R(oe[2],void 0),ee||(F.plotX=oe[0]-W.plotLeft+W.diffX,F.plotY=oe[1]-W.plotTop+W.diffY),$(j)&&(F.marker=Z(F.marker,{radius:j,width:2*j,height:2*j}),F.radius=j));ee&&this.deferLayout(),K(this,"afterTranslate")}}return L.defaultOptions=B(E.defaultOptions,p),Z(L.prototype,{pointClass:h,axisTypes:[],directTouch:!0,forces:["barycenter","repulsive"],hasDraggableNodes:!0,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointArrayMap:["value"],pointValKey:"value",requireSorting:!1,trackerGroups:["group","dataLabelsGroup","parentNodesGroup"],initDataLabels:A,alignDataLabel:w.alignDataLabel,indexateNodes:k,onMouseDown:a.onMouseDown,onMouseMove:a.onMouseMove,redrawHalo:a.redrawHalo,searchPoint:k}),y.registerSeriesType("packedbubble",L),L}),r(t,"Series/Polygon/PolygonSeriesDefaults.js",[],function(){return{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:""},trackByArea:!0,legendSymbol:"rectangle"}}),r(t,"Series/Polygon/PolygonSeries.js",[t["Core/Globals.js"],t["Series/Polygon/PolygonSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,a,c,s){let{noop:h}=n,{area:p,line:m,scatter:y}=c.seriesTypes,{extend:g,merge:x}=s;class v extends y{getGraphPath(){let C=m.prototype.getGraphPath.call(this),k=C.length+1;for(;k--;)(k===C.length||C[k][0]==="M")&&k>0&&C.splice(k,0,["Z"]);return this.areaPath=C,C}drawGraph(){this.options.fillColor=this.color,p.prototype.drawGraph.call(this)}}return v.defaultOptions=x(y.defaultOptions,a),g(v.prototype,{type:"polygon",drawTracker:m.prototype.drawTracker,setStackedPoints:h}),c.registerSeriesType("polygon",v),v}),r(t,"Core/Axis/RadialAxisDefaults.js",[],function(){return{circular:{gridLineWidth:1,labels:{align:void 0,x:0,y:void 0,style:{textOverflow:"none"}},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},radial:{gridLineInterpolation:"circle",gridLineWidth:1,labels:{align:"right",padding:5,x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},radialGauge:{endOnTick:!1,gridLineWidth:0,labels:{align:"center",distance:-25,x:0,y:void 0},lineWidth:1,minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickPosition:"inside",tickWidth:2,title:{rotation:0,text:""},zIndex:2}}}),r(t,"Core/Axis/RadialAxis.js",[t["Core/Axis/RadialAxisDefaults.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c,s){var h;let{defaultOptions:p}=a,{composed:m,noop:y}=c,{addEvent:g,correctFloat:x,defined:v,extend:_,fireEvent:C,isObject:k,merge:w,pick:E,pushUnique:A,relativeLength:M,wrap:S}=s;return function(N){function Y(){this.autoConnect=this.isCircular&&E(this.userMax,this.options.max)===void 0&&x(this.endAngleRad-this.startAngleRad)===x(2*Math.PI),!this.isCircular&&this.chart.inverted&&this.max++,this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)}function Z(){return()=>{if(this.isRadial&&this.tickPositions&&this.options.labels&&this.options.labels.allowOverlap!==!0)return this.tickPositions.map(ae=>this.ticks[ae]&&this.ticks[ae].label).filter(ae=>!!ae)}}function K(){return y}function U(ae,ce,xe){let _e=this.pane.center,Ne=ae.value,ke,Le,me;return this.isCircular?(v(Ne)?ae.point&&(ae.point.shapeArgs||{}).start&&(Ne=this.chart.inverted?this.translate(ae.point.rectPlotY,!0):ae.point.x):(Le=ae.chartX||0,me=ae.chartY||0,Ne=this.translate(Math.atan2(me-xe,Le-ce)-this.startAngleRad,!0)),Le=(ke=this.getPosition(Ne)).x,me=ke.y):(v(Ne)||(Le=ae.chartX,me=ae.chartY),v(Le)&&v(me)&&(xe=_e[1]+this.chart.plotTop,Ne=this.translate(Math.min(Math.sqrt(Math.pow(Le-ce,2)+Math.pow(me-xe,2)),_e[2]/2)-_e[3]/2,!0))),[Ne,Le||0,me||0]}function $(ae,ce,xe){let _e=this.pane.center,Ne=this.chart,ke=this.left||0,Le=this.top||0,me,Re=E(ce,_e[2]/2-this.offset),$e;return xe===void 0&&(xe=this.horiz?0:this.center&&-this.center[3]/2),xe&&(Re+=xe),this.isCircular||ce!==void 0?(($e=this.chart.renderer.symbols.arc(ke+_e[0],Le+_e[1],Re,Re,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})).xBounds=[ke+_e[0]],$e.yBounds=[Le+_e[1]-Re]):(me=this.postTranslate(this.angleRad,Re),$e=[["M",this.center[0]+Ne.plotLeft,this.center[1]+Ne.plotTop],["L",me.x,me.y]]),$e}function B(){this.constructor.prototype.getOffset.call(this),this.chart.axisOffset[this.side]=0}function R(ae,ce,xe){let _e=this.chart,Ne=Nt=>{if(typeof Nt=="string"){let mt=parseInt(Nt,10);return Se.test(Nt)&&(mt=mt*me/100),mt}return Nt},ke=this.center,Le=this.startAngleRad,me=ke[2]/2,Re=Math.min(this.offset,0),$e=this.left||0,De=this.top||0,Se=/%$/,Pe=this.isCircular,Fe,je,He,Qe,at,rt,dt=E(Ne(xe.outerRadius),me),gt=Ne(xe.innerRadius),Tt=E(Ne(xe.thickness),10);if(this.options.gridLineInterpolation==="polygon")rt=this.getPlotLinePath({value:ae}).concat(this.getPlotLinePath({value:ce,reverse:!0}));else{ae=Math.max(ae,this.min),ce=Math.min(ce,this.max);let Nt=this.translate(ae),mt=this.translate(ce);Pe||(dt=Nt||0,gt=mt||0),xe.shape!=="circle"&&Pe?(Fe=Le+(Nt||0),je=Le+(mt||0)):(Fe=-Math.PI/2,je=1.5*Math.PI,at=!0),dt-=Re,Tt-=Re,rt=_e.renderer.symbols.arc($e+ke[0],De+ke[1],dt,dt,{start:Math.min(Fe,je),end:Math.max(Fe,je),innerR:E(gt,dt-Tt),open:at,borderRadius:xe.borderRadius}),Pe&&(He=(je+Fe)/2,Qe=$e+ke[0]+ke[2]/2*Math.cos(He),rt.xBounds=He>-Math.PI/2&&He<Math.PI/2?[Qe,_e.plotWidth]:[0,Qe],rt.yBounds=[De+ke[1]+ke[2]/2*Math.sin(He)],rt.yBounds[0]+=He>-Math.PI&&He<0||He>Math.PI?-10:10)}return rt}function L(ae){let ce=this.pane.center,xe=this.chart,_e=xe.inverted,Ne=ae.reverse,ke=this.pane.options.background?this.pane.options.background[0]||this.pane.options.background:{},Le=ke.innerRadius||"0%",me=ke.outerRadius||"100%",Re=ce[0]+xe.plotLeft,$e=ce[1]+xe.plotTop,De=this.height,Se=ae.isCrosshair,Pe=ce[3]/2,Fe=ae.value,je,He,Qe,at,rt,dt,gt,Tt,Nt,mt=this.getPosition(Fe),St=mt.x,kt=mt.y;if(Se&&(Fe=(Tt=this.getCrosshairPosition(ae,Re,$e))[0],St=Tt[1],kt=Tt[2]),this.isCircular)He=Math.sqrt(Math.pow(St-Re,2)+Math.pow(kt-$e,2)),Qe=typeof Le=="string"?M(Le,1):Le/He,at=typeof me=="string"?M(me,1):me/He,ce&&Pe&&(Qe<(je=Pe/He)&&(Qe=je),at<je&&(at=je)),Nt=[["M",Re+Qe*(St-Re),$e-Qe*($e-kt)],["L",St-(1-at)*(St-Re),kt+(1-at)*($e-kt)]];else if((Fe=this.translate(Fe))&&(Fe<0||Fe>De)&&(Fe=0),this.options.gridLineInterpolation==="circle")Nt=this.getLinePath(0,Fe,Pe);else if(Nt=[],xe[_e?"yAxis":"xAxis"].forEach(ii=>{ii.pane===this.pane&&(rt=ii)}),rt){gt=rt.tickPositions,rt.autoConnect&&(gt=gt.concat([gt[0]])),Ne&&(gt=gt.slice().reverse()),Fe&&(Fe+=Pe);for(let ii=0;ii<gt.length;ii++)dt=rt.getPosition(gt[ii],Fe),Nt.push(ii?["L",dt.x,dt.y]:["M",dt.x,dt.y])}return Nt}function G(ae,ce){let xe=this.translate(ae);return this.postTranslate(this.isCircular?xe:this.angleRad,E(this.isCircular?ce:xe<0?0:xe,this.center[2]/2)-this.offset)}function F(){let ae=this.center,ce=this.chart,xe=this.options.title;return{x:ce.plotLeft+ae[0]+(xe.x||0),y:ce.plotTop+ae[1]-{high:.5,middle:.25,low:0}[xe.align]*ae[2]+(xe.y||0)}}function j(ae){ae.beforeSetTickPositions=Y,ae.createLabelCollector=Z,ae.getCrosshairPosition=U,ae.getLinePath=$,ae.getOffset=B,ae.getPlotBandPath=R,ae.getPlotLinePath=L,ae.getPosition=G,ae.getTitlePosition=F,ae.postTranslate=Ee,ae.setAxisSize=ie,ae.setAxisTranslation=le,ae.setOptions=be}function q(){let ae=this.chart,ce=this.options,xe=ae.angular&&this.isXAxis,_e=this.pane,Ne=_e&&_e.options;if(!xe&&_e&&(ae.angular||ae.polar)){let ke=2*Math.PI,Le=(E(Ne.startAngle,0)-90)*Math.PI/180,me=(E(Ne.endAngle,E(Ne.startAngle,0)+360)-90)*Math.PI/180;this.angleRad=(ce.angle||0)*Math.PI/180,this.startAngleRad=Le,this.endAngleRad=me,this.offset=ce.offset||0;let Re=(Le%ke+ke)%ke,$e=(me%ke+ke)%ke;Re>Math.PI&&(Re-=ke),$e>Math.PI&&($e-=ke),this.normalizedStartAngleRad=Re,this.normalizedEndAngleRad=$e}}function W(ae){this.isRadial&&(ae.align=void 0,ae.preventDefault())}function se(){if(this.chart&&this.chart.labelCollectors){let ae=this.labelCollector?this.chart.labelCollectors.indexOf(this.labelCollector):-1;ae>=0&&this.chart.labelCollectors.splice(ae,1)}}function fe(ae){let ce,xe=this.chart,_e=xe.angular,Ne=xe.polar,ke=this.isXAxis,Le=this.coll,me=ae.userOptions.pane||0,Re=this.pane=xe.pane&&xe.pane[me];if(Le==="colorAxis"){this.isRadial=!1;return}_e?(_e&&ke?(this.isHidden=!0,this.createLabelCollector=K,this.getOffset=y,this.redraw=J,this.render=J,this.setScale=y,this.setCategories=y,this.setTitle=y):j(this),ce=!ke):Ne&&(j(this),ce=this.horiz),_e||Ne?(this.isRadial=!0,this.labelCollector||(this.labelCollector=this.createLabelCollector()),this.labelCollector&&xe.labelCollectors.push(this.labelCollector)):this.isRadial=!1,Re&&ce&&(Re.axis=this),this.isCircular=ce}function ee(){this.isRadial&&this.beforeSetTickPositions()}function oe(ae){let ce=this.label;if(!ce)return;let xe=this.axis,_e=ce.getBBox(),Ne=xe.options.labels,ke=(xe.translate(this.pos)+xe.startAngleRad+Math.PI/2)/Math.PI*180%360,Le=Math.round(ke),me=v(Ne.y)?0:-(.3*_e.height),Re=Ne.y,$e,De=20,Se=Ne.align,Pe="end",Fe=Le<0?Le+360:Le,je=Fe,He=0,Qe=0;xe.isRadial&&($e=xe.getPosition(this.pos,xe.center[2]/2+M(E(Ne.distance,-25),xe.center[2]/2,-xe.center[2]/2)),Ne.rotation==="auto"?ce.attr({rotation:ke}):v(Re)||(Re=xe.chart.renderer.fontMetrics(ce).b-_e.height/2),v(Se)||(xe.isCircular?(_e.width>xe.len*xe.tickInterval/(xe.max-xe.min)&&(De=0),Se=ke>De&&ke<180-De?"left":ke>180+De&&ke<360-De?"right":"center"):Se="center",ce.attr({align:Se})),Se==="auto"&&xe.tickPositions.length===2&&xe.isCircular&&(Fe>90&&Fe<180?Fe=180-Fe:Fe>270&&Fe<=360&&(Fe=540-Fe),je>180&&je<=360&&(je=360-je),(xe.pane.options.startAngle===Le||xe.pane.options.startAngle===Le+360||xe.pane.options.startAngle===Le-360)&&(Pe="start"),Se=Le>=-90&&Le<=90||Le>=-360&&Le<=-270||Le>=270&&Le<=360?Pe==="start"?"right":"left":Pe==="start"?"left":"right",je>70&&je<110&&(Se="center"),Fe<15||Fe>=180&&Fe<195?He=.3*_e.height:Fe>=15&&Fe<=35?He=Pe==="start"?0:.75*_e.height:Fe>=195&&Fe<=215?He=Pe==="start"?.75*_e.height:0:Fe>35&&Fe<=90?He=Pe==="start"?-(.25*_e.height):_e.height:Fe>215&&Fe<=270&&(He=Pe==="start"?_e.height:-(.25*_e.height)),je<15?Qe=Pe==="start"?-(.15*_e.height):.15*_e.height:je>165&&je<=180&&(Qe=Pe==="start"?.15*_e.height:-(.15*_e.height)),ce.attr({align:Se}),ce.translate(Qe,He+me)),ae.pos.x=$e.x+(Ne.x||0),ae.pos.y=$e.y+(Re||0))}function Ce(ae){this.axis.getPosition&&_(ae.pos,this.axis.getPosition(this.pos))}function ge({options:ae}){ae.xAxis&&w(!0,N.radialDefaultOptions.circular,ae.xAxis),ae.yAxis&&w(!0,N.radialDefaultOptions.radialGauge,ae.yAxis)}function Ee(ae,ce){let xe=this.chart,_e=this.center;return ae=this.startAngleRad+ae,{x:xe.plotLeft+_e[0]+Math.cos(ae)*ce,y:xe.plotTop+_e[1]+Math.sin(ae)*ce}}function J(){this.isDirty=!1}function ie(){let ae,ce;this.constructor.prototype.setAxisSize.call(this),this.isRadial&&(this.pane.updateCenter(this),ae=this.center=this.pane.center.slice(),this.isCircular?this.sector=this.endAngleRad-this.startAngleRad:(ce=this.postTranslate(this.angleRad,ae[3]/2),ae[0]=ce.x-this.chart.plotLeft,ae[1]=ce.y-this.chart.plotTop),this.len=this.width=this.height=(ae[2]-ae[3])*E(this.sector,1)/2)}function le(){this.constructor.prototype.setAxisTranslation.call(this),this.center&&(this.isCircular?this.transA=(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.transA=(this.center[2]-this.center[3])/2/(this.max-this.min||1),this.isXAxis?this.minPixelPadding=this.transA*this.minPointOffset:this.minPixelPadding=0)}function be(ae){let{coll:ce}=this,{angular:xe,inverted:_e,polar:Ne}=this.chart,ke={};xe?this.isXAxis||(ke=w(p.yAxis,N.radialDefaultOptions.radialGauge)):Ne&&(ke=this.horiz?w(p.xAxis,N.radialDefaultOptions.circular):w(ce==="xAxis"?p.xAxis:p.yAxis,N.radialDefaultOptions.radial)),_e&&ce==="yAxis"&&(ke.stackLabels=k(p.yAxis,!0)?p.yAxis.stackLabels:{},ke.reversedStacks=!0);let Le=this.options=w(ke,ae);Le.plotBands||(Le.plotBands=[]),C(this,"afterSetOptions")}function te(ae,ce,xe,_e,Ne,ke,Le){let me,Re=this.axis;return Re.isRadial?["M",ce,xe,"L",(me=Re.getPosition(this.pos,Re.center[2]/2+_e)).x,me.y]:ae.call(this,ce,xe,_e,Ne,ke,Le)}N.radialDefaultOptions=w(n),N.compose=function(ae,ce){return A(m,"Axis.Radial")&&(g(ae,"afterInit",q),g(ae,"autoLabelAlign",W),g(ae,"destroy",se),g(ae,"init",fe),g(ae,"initialAxisTranslation",ee),g(ce,"afterGetLabelPosition",oe),g(ce,"afterGetPosition",Ce),g(c,"setOptions",ge),S(ce.prototype,"getMarkPath",te)),ae}}(h||(h={})),h}),r(t,"Series/PolarComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Extensions/Pane/Pane.js"],t["Core/Axis/RadialAxis.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,p){let{animObject:m}=n,{composed:y}=a,{addEvent:g,defined:x,find:v,isNumber:_,merge:C,pick:k,pushUnique:w,relativeLength:E,splat:A,uniqueKey:M,wrap:S}=p;function N(){(this.pane||[]).forEach(ge=>{ge.render()})}function Y(ge){let Ee=ge.args[0].xAxis,J=ge.args[0].yAxis,ie=ge.args[0].chart;Ee&&J&&(J.gridLineInterpolation==="polygon"?(Ee.startOnTick=!0,Ee.endOnTick=!0):Ee.gridLineInterpolation==="polygon"&&ie.inverted&&(J.startOnTick=!0,J.endOnTick=!0))}function Z(){this.pane||(this.pane=[]),this.options.pane=A(this.options.pane),this.options.pane.forEach(ge=>{new s(ge,this)},this)}function K(ge){let Ee=ge.args.marker,J=this.chart.xAxis[0],ie=this.chart.yAxis[0],le=this.chart.inverted,be=le?ie:J,te=le?J:ie;if(this.chart.polar){ge.preventDefault();let ae=(Ee.attr?Ee.attr("start"):Ee.start)-be.startAngleRad,ce=Ee.attr?Ee.attr("r"):Ee.r,xe=(Ee.attr?Ee.attr("end"):Ee.end)-be.startAngleRad,_e=Ee.attr?Ee.attr("innerR"):Ee.innerR;ge.result.x=ae+be.pos,ge.result.width=xe-ae,ge.result.y=te.len+te.pos-ce,ge.result.height=ce-_e}}function U(ge){let Ee=this.chart;if(Ee.polar&&Ee.hoverPane&&Ee.hoverPane.axis){ge.preventDefault();let J=Ee.hoverPane.center,ie=Ee.mouseDownX||0,le=Ee.mouseDownY||0,be=ge.args.chartY,te=ge.args.chartX,ae=2*Math.PI,ce=Ee.hoverPane.axis.startAngleRad,xe=Ee.hoverPane.axis.endAngleRad,_e=Ee.inverted?Ee.xAxis[0]:Ee.yAxis[0],Ne={},ke="arc";if(Ne.x=J[0]+Ee.plotLeft,Ne.y=J[1]+Ee.plotTop,this.zoomHor){let Le=ce>0?xe-ce:Math.abs(ce)+Math.abs(xe),me=Math.atan2(le-Ee.plotTop-J[1],ie-Ee.plotLeft-J[0])-ce,Re=Math.atan2(be-Ee.plotTop-J[1],te-Ee.plotLeft-J[0])-ce;Ne.r=J[2]/2,Ne.innerR=J[3]/2,me<=0&&(me+=ae),Re<=0&&(Re+=ae),Re<me&&(Re=[me,me=Re][0]),Le<ae&&ce+Re>xe+(ae-Le)/2&&(Re=me,me=ce<=0?ce:0);let $e=Ne.start=Math.max(me+ce,ce),De=Ne.end=Math.min(Re+ce,xe);if(_e.options.gridLineInterpolation==="polygon"){let Se=Ee.hoverPane.axis,Pe=$e-Se.startAngleRad+Se.pos,Fe=_e.getPlotLinePath({value:_e.max}),je=Se.toValue(Pe),He=Se.toValue(Pe+(De-$e));if(je<Se.getExtremes().min){let{min:Qe,max:at}=Se.getExtremes();je=at-(Qe-je)}if(He<Se.getExtremes().min){let{min:Qe,max:at}=Se.getExtremes();He=at-(Qe-He)}He<je&&(He=[je,je=He][0]),(Fe=L(Fe,je,He,Se)).push(["L",J[0]+Ee.plotLeft,Ee.plotTop+J[1]]),Ne.d=Fe,ke="path"}}if(this.zoomVert){let Le=Ee.inverted?Ee.xAxis[0]:Ee.yAxis[0],me=Math.sqrt(Math.pow(ie-Ee.plotLeft-J[0],2)+Math.pow(le-Ee.plotTop-J[1],2)),Re=Math.sqrt(Math.pow(te-Ee.plotLeft-J[0],2)+Math.pow(be-Ee.plotTop-J[1],2));if(Re<me&&(me=[Re,Re=me][0]),Re>J[2]/2&&(Re=J[2]/2),me<J[3]/2&&(me=J[3]/2),this.zoomHor||(Ne.start=ce,Ne.end=xe),Ne.r=Re,Ne.innerR=me,Le.options.gridLineInterpolation==="polygon"){let $e=Le.toValue(Le.len+Le.pos-me),De=Le.toValue(Le.len+Le.pos-Re),Se=Le.getPlotLinePath({value:De}).concat(Le.getPlotLinePath({value:$e,reverse:!0}));Ne.d=Se,ke="path"}}if(this.zoomHor&&this.zoomVert&&_e.options.gridLineInterpolation==="polygon"){let Le=Ee.hoverPane.axis,me=Ne.start||0,Re=Ne.end||0,$e=me-Le.startAngleRad+Le.pos,De=Le.toValue($e),Se=Le.toValue($e+(Re-me));if(Ne.d instanceof Array){let Pe=Ne.d.slice(0,Ne.d.length/2),Fe=Ne.d.slice(Ne.d.length/2,Ne.d.length);Fe=[...Fe].reverse();let je=Ee.hoverPane.axis;Pe=L(Pe,De,Se,je),(Fe=L(Fe,De,Se,je))&&(Fe[0][0]="L"),Fe=[...Fe].reverse(),Ne.d=Pe.concat(Fe),ke="path"}}ge.attrs=Ne,ge.shapeType=ke}}function $(){let ge=this.chart;ge.polar&&(this.polar=new Ce(this),ge.inverted&&(this.isRadialSeries=!0,this.is("column")&&(this.isRadialBar=!0)))}function B(){if(this.chart.polar&&this.xAxis){let{xAxis:ge,yAxis:Ee}=this,J=this.chart;this.kdByAngle=J.tooltip&&J.tooltip.shared,this.kdByAngle||J.inverted?this.searchPoint=R:this.options.findNearestPointBy="xy";let ie=this.points,le=ie.length;for(;le--;)this.is("column")||this.is("columnrange")||this.polar.toXY(ie[le]),J.hasParallelCoordinates||this.yAxis.reversed||(k(ie[le].y,Number.MIN_VALUE)<Ee.min||ie[le].x<ge.min||ie[le].x>ge.max?(ie[le].isNull=!0,ie[le].plotY=NaN):ie[le].isNull=ie[le].isValid&&!ie[le].isValid());this.hasClipCircleSetter||(this.hasClipCircleSetter=!!this.eventsToUnbind.push(g(this,"afterRender",function(){let be;J.polar&&this.options.clip!==!1&&(be=this.yAxis.pane.center,this.clipCircle?this.clipCircle.animate({x:be[0],y:be[1],r:be[2]/2,innerR:be[3]/2}):this.clipCircle=function(te,ae,ce,xe,_e){let Ne=M(),ke=te.createElement("clipPath").attr({id:Ne}).add(te.defs),Le=_e?te.arc(ae,ce,xe,_e,0,2*Math.PI).add(ke):te.circle(ae,ce,xe).add(ke);return Le.id=Ne,Le.clipPath=ke,Le}(J.renderer,be[0],be[1],be[2]/2,be[3]/2),this.group.clip(this.clipCircle),this.setClip=a.noop)})))}}function R(ge){let Ee=this.chart,J=this.xAxis,ie=this.yAxis,le=J.pane&&J.pane.center,be=ge.chartX-(le&&le[0]||0)-Ee.plotLeft,te=ge.chartY-(le&&le[1]||0)-Ee.plotTop,ae=Ee.inverted?{clientX:ge.chartX-ie.pos,plotY:ge.chartY-J.pos}:{clientX:180+-180/Math.PI*Math.atan2(be,te)};return this.searchKDTree(ae)}function L(ge,Ee,J,ie){let le=ie.tickInterval,be=ie.tickPositions,te=v(be,ce=>ce>=J),ae=v([...be].reverse(),ce=>ce<=Ee);return x(te)||(te=be[be.length-1]),x(ae)||(ae=be[0],te+=le,ge[0][0]="L",ge.unshift(ge[ge.length-3])),(ge=ge.slice(be.indexOf(ae),be.indexOf(te)+1))[0][0]="M",ge}function G(ge,Ee){return v(this.pane||[],J=>J.options.id===Ee)||ge.call(this,Ee)}function F(ge,Ee,J,ie,le,be){let te,ae,ce,xe=this.chart,_e=k(ie.inside,!!this.options.stacking);if(xe.polar){if(te=Ee.rectPlotX/Math.PI*180,xe.inverted)this.forceDL=xe.isInsidePlot(Ee.plotX,Ee.plotY),_e&&Ee.shapeArgs?(ae=Ee.shapeArgs,le=C(le,{x:(ce=this.yAxis.postTranslate(((ae.start||0)+(ae.end||0))/2-this.xAxis.startAngleRad,Ee.barX+Ee.pointWidth/2)).x-xe.plotLeft,y:ce.y-xe.plotTop})):Ee.tooltipPos&&(le=C(le,{x:Ee.tooltipPos[0],y:Ee.tooltipPos[1]})),ie.align=k(ie.align,"center"),ie.verticalAlign=k(ie.verticalAlign,"middle");else{var Ne;let ke,Le;(Ne=ie).align===null&&(ke=te>20&&te<160?"left":te>200&&te<340?"right":"center",Ne.align=ke),Ne.verticalAlign===null&&(Le=te<45||te>315?"bottom":te>135&&te<225?"top":"middle",Ne.verticalAlign=Le),ie=Ne}c.prototype.alignDataLabel.call(this,Ee,J,ie,le,be),this.isRadialBar&&Ee.shapeArgs&&Ee.shapeArgs.start===Ee.shapeArgs.end?J.hide():J.show()}else ge.call(this,Ee,J,ie,le,be)}function j(){let ge=this.options,Ee=ge.stacking,J=this.chart,ie=this.xAxis,le=this.yAxis,be=le.reversed,te=le.center,ae=ie.startAngleRad,ce=ie.endAngleRad-ae,xe=ge.threshold,_e=0,Ne,ke,Le,me,Re,$e=0,De=0,Se,Pe,Fe,je,He,Qe,at,rt;if(ie.isRadial)for(Le=(Ne=this.points).length,me=le.translate(le.min),Re=le.translate(le.max),xe=ge.threshold||0,J.inverted&&_(xe)&&x(_e=le.translate(xe))&&(_e<0?_e=0:_e>ce&&(_e=ce),this.translatedThreshold=_e+ae);Le--;){if(Qe=(ke=Ne[Le]).barX,Pe=ke.x,Fe=ke.y,ke.shapeType="arc",J.inverted){ke.plotY=le.translate(Fe),Ee&&le.stacking?(He=le.stacking.stacks[(Fe<0?"-":"")+this.stackKey],this.visible&&He&&He[Pe]&&!ke.isNull&&(je=He[Pe].points[this.getStackIndicator(void 0,Pe,this.index).key],$e=le.translate(je[0]),De=le.translate(je[1]),x($e)&&($e=p.clamp($e,0,ce)))):($e=_e,De=ke.plotY),$e>De&&(De=[$e,$e=De][0]),be?De>me?De=me:$e<Re?$e=Re:($e>me||De<Re)&&($e=De=ce):$e<me?$e=me:De>Re?De=Re:(De<me||$e>Re)&&($e=De=0),le.min>le.max&&($e=De=be?ce:0),$e+=ae,De+=ae,te&&(ke.barX=Qe+=te[3]/2),at=Math.max(Qe,0),rt=Math.max(Qe+ke.pointWidth,0);let dt=ge.borderRadius,gt=E((typeof dt=="object"?dt.radius:dt)||0,rt-at);ke.shapeArgs={x:te[0],y:te[1],r:rt,innerR:at,start:$e,end:De,borderRadius:gt},ke.opacity=$e===De?0:void 0,ke.plotY=(x(this.translatedThreshold)&&($e<this.translatedThreshold?$e:De))-ae}else $e=Qe+ae,ke.shapeArgs=this.polar.arc(ke.yBottom,ke.plotY,$e,$e+ke.pointWidth),ke.shapeArgs.borderRadius=0;this.polar.toXY(ke),J.inverted?(Se=le.postTranslate(ke.rectPlotY,Qe+ke.pointWidth/2),ke.tooltipPos=[Se.x-J.plotLeft,Se.y-J.plotTop]):ke.tooltipPos=[ke.plotX,ke.plotY],te&&(ke.ttBelow=ke.plotY>te[1])}}function q(ge,Ee){let J,ie,le=this;if(this.chart.polar){Ee=Ee||this.points;for(let te=0;te<Ee.length;te++)if(!Ee[te].isNull){J=te;break}this.options.connectEnds!==!1&&J!==void 0&&(this.connectEnds=!0,Ee.splice(Ee.length,0,Ee[J]),ie=!0),Ee.forEach(te=>{te.polarPlotY===void 0&&le.polar.toXY(te)})}let be=ge.apply(this,[].slice.call(arguments,1));return ie&&Ee.pop(),be}function W(ge,Ee){let J=this.chart,ie={xAxis:[],yAxis:[]};return J.polar?J.axes.forEach(le=>{if(le.coll==="colorAxis")return;let be=le.isXAxis,te=le.center,ae=Ee.chartX-te[0]-J.plotLeft,ce=Ee.chartY-te[1]-J.plotTop;ie[be?"xAxis":"yAxis"].push({axis:le,value:le.translate(be?Math.PI-Math.atan2(ae,ce):Math.sqrt(Math.pow(ae,2)+Math.pow(ce,2)),!0)})}):ie=ge.call(this,Ee),ie}function se(ge,Ee){this.chart.polar||ge.call(this,Ee)}function fe(ge,Ee){let J=this,ie=this.chart,le=this.group,be=this.markerGroup,te=this.xAxis&&this.xAxis.center,ae=ie.plotLeft,ce=ie.plotTop,xe=this.options.animation,_e,Ne,ke,Le,me,Re;ie.polar?J.isRadialBar?Ee||(J.startAngleRad=k(J.translatedThreshold,J.xAxis.startAngleRad),a.seriesTypes.pie.prototype.animate.call(J,Ee)):(xe=m(xe),J.is("column")?Ee||(Ne=te[3]/2,J.points.forEach($e=>{ke=$e.graphic,me=(Le=$e.shapeArgs)&&Le.r,Re=Le&&Le.innerR,ke&&Le&&(ke.attr({r:Ne,innerR:Ne}),ke.animate({r:me,innerR:Re},J.options.animation))})):Ee?(_e={translateX:te[0]+ae,translateY:te[1]+ce,scaleX:.001,scaleY:.001},le.attr(_e),be&&be.attr(_e)):(_e={translateX:ae,translateY:ce,scaleX:1,scaleY:1},le.animate(_e,xe),be&&be.animate(_e,xe))):ge.call(this,Ee)}function ee(ge,Ee,J,ie){let le,be;if(this.chart.polar)if(ie){let te=(be=function ce(xe,_e,Ne,ke){let Le,me,Re,$e,De,Se,Pe=ke?1:0,Fe=(Le=_e>=0&&_e<=xe.length-1?_e:_e<0?xe.length-1+_e:0)-1<0?xe.length-(1+Pe):Le-1,je=Le+1>xe.length-1?Pe:Le+1,He=xe[Fe],Qe=xe[je],at=He.plotX,rt=He.plotY,dt=Qe.plotX,gt=Qe.plotY,Tt=xe[Le].plotX,Nt=xe[Le].plotY;me=(1.5*Tt+at)/2.5,Re=(1.5*Nt+rt)/2.5,$e=(1.5*Tt+dt)/2.5,De=(1.5*Nt+gt)/2.5;let mt=Math.sqrt(Math.pow(me-Tt,2)+Math.pow(Re-Nt,2)),St=Math.sqrt(Math.pow($e-Tt,2)+Math.pow(De-Nt,2)),kt=Math.atan2(Re-Nt,me-Tt);Se=Math.PI/2+(kt+Math.atan2(De-Nt,$e-Tt))/2,Math.abs(kt-Se)>Math.PI/2&&(Se-=Math.PI),me=Tt+Math.cos(Se)*mt,Re=Nt+Math.sin(Se)*mt;let ii={rightContX:$e=Tt+Math.cos(Math.PI+Se)*St,rightContY:De=Nt+Math.sin(Math.PI+Se)*St,leftContX:me,leftContY:Re,plotX:Tt,plotY:Nt};return Ne&&(ii.prevPointCont=ce(xe,Fe,!1,ke)),ii}(Ee,ie,!0,this.connectEnds)).prevPointCont&&be.prevPointCont.rightContX,ae=be.prevPointCont&&be.prevPointCont.rightContY;le=["C",_(te)?te:be.plotX,_(ae)?ae:be.plotY,_(be.leftContX)?be.leftContX:be.plotX,_(be.leftContY)?be.leftContY:be.plotY,be.plotX,be.plotY]}else le=["M",J.plotX,J.plotY];else le=ge.call(this,Ee,J,ie);return le}function oe(ge,Ee,J=this.plotY){if(!this.destroyed){let{plotX:ie,series:le}=this,{chart:be}=le;return be.polar&&_(ie)&&_(J)?[ie+(Ee?be.plotLeft:0),J+(Ee?be.plotTop:0)]:ge.call(this,Ee,J)}}class Ce{static compose(Ee,J,ie,le,be,te,ae,ce,xe,_e){if(s.compose(J,ie),h.compose(Ee,be),w(y,"Polar")){let Ne=J.prototype,ke=te.prototype,Le=ie.prototype,me=le.prototype;if(g(J,"afterDrawChartBox",N),g(J,"getAxes",Z),g(J,"init",Y),S(Ne,"get",G),S(Le,"getCoordinates",W),S(Le,"pinch",se),g(ie,"getSelectionMarkerAttrs",U),g(ie,"getSelectionBox",K),g(le,"afterInit",$),g(le,"afterTranslate",B,{order:2}),g(le,"afterColumnTranslate",j,{order:4}),S(me,"animate",fe),S(ke,"pos",oe),ce){let Re=ce.prototype;S(Re,"alignDataLabel",F),S(Re,"animate",fe)}if(xe&&S(xe.prototype,"getGraphPath",q),_e){let Re=_e.prototype;S(Re,"getPointSpline",ee),ae&&(ae.prototype.getPointSpline=Re.getPointSpline)}}}constructor(Ee){this.series=Ee}arc(Ee,J,ie,le){let be=this.series,te=be.xAxis.center,ae=be.yAxis.len,ce=te[3]/2,xe=ae-J+ce,_e=ae-k(Ee,ae)+ce;return be.yAxis.reversed&&(xe<0&&(xe=ce),_e<0&&(_e=ce)),{x:te[0],y:te[1],r:xe,innerR:_e,start:ie,end:le}}toXY(Ee){let J=this.series,ie=J.chart,le=J.xAxis,be=J.yAxis,te=Ee.plotX,ae=ie.inverted,ce=Ee.y,xe=Ee.plotY,_e=ae?te:be.len-xe,Ne;if(ae&&J&&!J.isRadialBar&&(Ee.plotY=xe=_(ce)?be.translate(ce):0),Ee.rectPlotX=te,Ee.rectPlotY=xe,be.center&&(_e+=be.center[3]/2),_(xe)){let ke=ae?be.postTranslate(xe,_e):le.postTranslate(te,_e);Ee.plotX=Ee.polarPlotX=ke.x-ie.plotLeft,Ee.plotY=Ee.polarPlotY=ke.y-ie.plotTop}J.kdByAngle?((Ne=(te/Math.PI*180+le.pane.options.startAngle)%360)<0&&(Ne+=360),Ee.clientX=Ne):Ee.clientX=Ee.plotX}}return Ce}),r(t,"Core/Axis/WaterfallAxis.js",[t["Core/Globals.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(n,a,c){var s;let{composed:h}=n,{addEvent:p,objectEach:m,pushUnique:y}=c;return function(g){function x(){let w=this.waterfall.stacks;w&&(w.changed=!1,delete w.alreadyChanged)}function v(){let w=this.options.stackLabels;w&&w.enabled&&this.waterfall.stacks&&this.waterfall.renderStackTotals()}function _(){this.waterfall||(this.waterfall=new k(this))}function C(){let w=this.axes;for(let E of this.series)if(E.options.stacking){for(let A of w)A.isXAxis||(A.waterfall.stacks.changed=!0);break}}g.compose=function(w,E){y(h,"Axis.Waterfall")&&(p(w,"init",_),p(w,"afterBuildStacks",x),p(w,"afterRender",v),p(E,"beforeRedraw",C))};class k{constructor(E){this.axis=E,this.stacks={changed:!1}}renderStackTotals(){let E=this.axis,A=E.waterfall.stacks,M=E.stacking&&E.stacking.stackTotalGroup,S=new a(E,E.options.stackLabels||{},!1,0,void 0);this.dummyStackItem=S,M&&m(A,N=>{m(N,(Y,Z)=>{S.total=Y.stackTotal,S.x=+Z,Y.label&&(S.label=Y.label),a.prototype.render.call(S,M),Y.label=S.label,delete S.label})}),S.total=null}}g.Composition=k}(s||(s={})),s}),r(t,"Series/Waterfall/WaterfallPoint.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(n,a,c){let{isNumber:s}=c;class h extends n.prototype.pointClass{getClassName(){let m=a.prototype.getClassName.call(this);return this.isSum?m+=" highcharts-sum":this.isIntermediateSum&&(m+=" highcharts-intermediate-sum"),m}isValid(){return s(this.y)||this.isSum||!!this.isIntermediateSum}}return h}),r(t,"Series/Waterfall/WaterfallSeriesDefaults.js",[],function(){return{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"Dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}}}),r(t,"Series/Waterfall/WaterfallSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Core/Axis/WaterfallAxis.js"],t["Series/Waterfall/WaterfallPoint.js"],t["Series/Waterfall/WaterfallSeriesDefaults.js"]],function(n,a,c,s,h){let{column:p,line:m}=n.seriesTypes,{addEvent:y,arrayMax:g,arrayMin:x,correctFloat:v,crisp:_,extend:C,isNumber:k,merge:w,objectEach:E,pick:A}=a;function M(N,Y){return Object.hasOwnProperty.call(N,Y)}class S extends p{generatePoints(){p.prototype.generatePoints.apply(this);for(let Y=0,Z=this.points.length;Y<Z;Y++){let K=this.points[Y],U=this.processedYData[Y];k(U)&&(K.isIntermediateSum||K.isSum)&&(K.y=v(U))}}processData(Y){let Z,K,U,$,B,R,L=this.options,G=this.yData,F=L.data,j=G.length,q=L.threshold||0;U=K=$=B=0;for(let W=0;W<j;W++)R=G[W],Z=F&&F[W]?F[W]:{},R==="sum"||Z.isSum?G[W]=v(U):R==="intermediateSum"||Z.isIntermediateSum?(G[W]=v(K),K=0):(U+=R,K+=R),$=Math.min(U,$),B=Math.max(U,B);super.processData.call(this,Y),L.stacking||(this.dataMin=$+q,this.dataMax=B)}toYData(Y){return Y.isSum?"sum":Y.isIntermediateSum?"intermediateSum":Y.y}updateParallelArrays(Y,Z){super.updateParallelArrays.call(this,Y,Z),(this.yData[0]==="sum"||this.yData[0]==="intermediateSum")&&(this.yData[0]=null)}pointAttribs(Y,Z){let K=this.options.upColor;K&&!Y.options.color&&k(Y.y)&&(Y.color=Y.y>0?K:void 0);let U=p.prototype.pointAttribs.call(this,Y,Z);return delete U.dashstyle,U}getGraphPath(){return[["M",0,0]]}getCrispPath(){var G;let Y=this.data.filter(F=>k(F.y)),Z=this.yAxis,K=Y.length,U=((G=this.graph)==null?void 0:G.strokeWidth())||0,$=this.xAxis.reversed,B=this.yAxis.reversed,R=this.options.stacking,L=[];for(let F=1;F<K;F++){if(!(this.options.connectNulls||k(this.data[Y[F].index-1].y)))continue;let j=Y[F].box,q=Y[F-1],W=q.y||0,se=Y[F-1].box;if(!j||!se)continue;let fe=Z.waterfall.stacks[this.stackKey],ee=W>0?-se.height:0;if(fe&&se&&j){let oe,Ce=fe[F-1];if(R){let ge=Ce.connectorThreshold;oe=_(Z.translate(ge,!1,!0,!1,!0)+(B?ee:0),U)}else oe=_(se.y+(q.minPointLengthOffset||0),U);L.push(["M",(se.x||0)+($?0:se.width||0),oe],["L",(j.x||0)+($&&j.width||0),oe])}if(se&&L.length&&(!R&&W<0&&!B||W>0&&B)){let oe=L[L.length-2];oe&&typeof oe[2]=="number"&&(oe[2]+=se.height||0);let Ce=L[L.length-1];Ce&&typeof Ce[2]=="number"&&(Ce[2]+=se.height||0)}}return L}drawGraph(){m.prototype.drawGraph.call(this),this.graph&&this.graph.attr({d:this.getCrispPath()})}setStackedPoints(Y){var le;let Z=this.options,K=(le=Y.waterfall)==null?void 0:le.stacks,U=Z.threshold||0,$=this.stackKey,B=this.xData,R=B.length,L=U,G=L,F,j=0,q=0,W=0,se,fe,ee,oe,Ce,ge,Ee,J,ie=(be,te,ae,ce)=>{if(F){if(se)for(;ae<se;ae++)F.stackState[ae]+=ce;else F.stackState[0]=be,se=F.stackState.length;F.stackState.push(F.stackState[se-1]+te)}};if(Y.stacking&&K&&this.reserveSpace()){J=K.changed,(Ee=K.alreadyChanged)&&0>Ee.indexOf($)&&(J=!0),K[$]||(K[$]={});let be=K[$];if(be)for(let te=0;te<R;te++)(!be[ge=B[te]]||J)&&(be[ge]={negTotal:0,posTotal:0,stackTotal:0,threshold:0,stateIndex:0,stackState:[],label:J&&be[ge]?be[ge].label:void 0}),F=be[ge],(Ce=this.yData[te])>=0?F.posTotal+=Ce:F.negTotal+=Ce,oe=Z.data[te],fe=F.absolutePos=F.posTotal,ee=F.absoluteNeg=F.negTotal,F.stackTotal=fe+ee,se=F.stackState.length,oe&&oe.isIntermediateSum?(ie(W,q,0,W),W=q,q=U,L^=G,G^=L,L^=G):oe&&oe.isSum?(ie(U,j,se,0),L=U):(ie(L,Ce,0,j),oe&&(j+=Ce,q+=Ce)),F.stateIndex++,F.threshold=L,L+=F.stackTotal;K.changed=!1,K.alreadyChanged||(K.alreadyChanged=[]),K.alreadyChanged.push($)}}getExtremes(){let Y,Z,K,U=this.options.stacking;return U?(Y=this.yAxis.waterfall.stacks,Z=this.stackedYNeg=[],K=this.stackedYPos=[],U==="overlap"?E(Y[this.stackKey],function($){Z.push(x($.stackState)),K.push(g($.stackState))}):E(Y[this.stackKey],function($){Z.push($.negTotal+$.threshold),K.push($.posTotal+$.threshold)}),{dataMin:x(Z),dataMax:g(K)}):{dataMin:this.dataMin,dataMax:this.dataMax}}}return S.defaultOptions=w(p.defaultOptions,h),S.compose=c.compose,C(S.prototype,{pointValKey:"y",showLine:!0,pointClass:s}),y(S,"afterColumnTranslate",function(){let{options:N,points:Y,yAxis:Z}=this,K=A(N.minPointLength,5),U=K/2,$=N.threshold||0,B=N.stacking,R=Z.waterfall.stacks[this.stackKey],L=$,G=$,F,j,q,W;for(let se=0;se<Y.length;se++){let fe=Y[se],ee=this.processedYData[se],oe=C({x:0,y:0,width:0,height:0},fe.shapeArgs||{});fe.box=oe;let Ce=[0,ee],ge=fe.y||0;if(B){if(R){let ie=R[se];B==="overlap"?(j=ie.stackState[ie.stateIndex--],F=ge>=0?j:j-ge,M(ie,"absolutePos")&&delete ie.absolutePos,M(ie,"absoluteNeg")&&delete ie.absoluteNeg):(ge>=0?(j=ie.threshold+ie.posTotal,ie.posTotal-=ge,F=j):(j=ie.threshold+ie.negTotal,ie.negTotal-=ge,F=j-ge),!ie.posTotal&&k(ie.absolutePos)&&M(ie,"absolutePos")&&(ie.posTotal=ie.absolutePos,delete ie.absolutePos),!ie.negTotal&&k(ie.absoluteNeg)&&M(ie,"absoluteNeg")&&(ie.negTotal=ie.absoluteNeg,delete ie.absoluteNeg)),fe.isSum||(ie.connectorThreshold=ie.threshold+ie.stackTotal),Z.reversed?(q=ge>=0?F-ge:F+ge,W=F):(q=F,W=F-ge),fe.below=q<=$,oe.y=Z.translate(q,!1,!0,!1,!0),oe.height=Math.abs(oe.y-Z.translate(W,!1,!0,!1,!0));let le=Z.waterfall.dummyStackItem;le&&(le.x=se,le.label=R[se].label,le.setOffset(this.pointXOffset||0,this.barW||0,this.stackedYNeg[se],this.stackedYPos[se],void 0,this.xAxis))}}else F=Math.max(G,G+ge)+Ce[0],oe.y=Z.translate(F,!1,!0,!1,!0),fe.isSum?(oe.y=Z.translate(Ce[1],!1,!0,!1,!0),oe.height=Math.min(Z.translate(Ce[0],!1,!0,!1,!0),Z.len)-oe.y,fe.below=Ce[1]<=$):fe.isIntermediateSum?(ge>=0?(q=Ce[1]+L,W=L):(q=L,W=Ce[1]+L),Z.reversed&&(q^=W,W^=q,q^=W),oe.y=Z.translate(q,!1,!0,!1,!0),oe.height=Math.abs(oe.y-Math.min(Z.translate(W,!1,!0,!1,!0),Z.len)),L+=Ce[1],fe.below=q<=$):(oe.height=ee>0?Z.translate(G,!1,!0,!1,!0)-oe.y:Z.translate(G,!1,!0,!1,!0)-Z.translate(G-ee,!1,!0,!1,!0),G+=ee,fe.below=G<$),oe.height<0&&(oe.y+=oe.height,oe.height*=-1);fe.plotY=oe.y,fe.yBottom=oe.y+oe.height,oe.height<=K&&!fe.isNull?(oe.height=K,oe.y-=U,fe.yBottom=oe.y+oe.height,fe.plotY=oe.y,ge<0?fe.minPointLengthOffset=-U:fe.minPointLengthOffset=U):(fe.isNull&&(oe.width=0),fe.minPointLengthOffset=0);let Ee=fe.plotY+(fe.negative?oe.height:0);fe.below&&(fe.plotY+=oe.height),fe.tooltipPos&&(this.chart.inverted?fe.tooltipPos[0]=Z.len-Ee:fe.tooltipPos[1]=Ee),fe.isInside=this.isPointInside(fe);let J=_(fe.yBottom,this.borderWidth);oe.y=_(oe.y,this.borderWidth),oe.height=J-oe.y,w(!0,fe.shapeArgs,oe)}},{order:2}),n.registerSeriesType("waterfall",S),S}),r(t,"masters/highcharts-more.src.js",[t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Extensions/Pane/Pane.js"],t["Series/Bubble/BubbleSeries.js"],t["Series/PackedBubble/PackedBubbleSeries.js"],t["Series/PolarComposition.js"],t["Core/Axis/RadialAxis.js"],t["Series/Waterfall/WaterfallSeries.js"]],function(n,a,c,s,h,p,m,y){return n.RadialAxis=m,s.compose(n.Axis,n.Chart,n.Legend),h.compose(n.Axis,n.Chart,n.Legend),c.compose(n.Chart,n.Pointer),p.compose(n.Axis,n.Chart,n.Pointer,n.Series,n.Tick,n.Point,a.seriesTypes.areasplinerange,a.seriesTypes.column,a.seriesTypes.line,a.seriesTypes.spline),y.compose(n.Axis,n.Chart),n})})})(qI);var LW=qI.exports;const NW=Hu(LW);var WI={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function r(n,a,c,s){n.hasOwnProperty(a)||(n[a]=s.apply(null,c),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:a,module:n[a]}})))}r(t,"Core/Chart/ChartNavigationComposition.js",[],function(){var n;return function(a){a.compose=function(s){return s.navigation||(s.navigation=new c(s)),s};class c{constructor(h){this.updates=[],this.chart=h}addUpdate(h){this.chart.navigation.updates.push(h)}update(h,p){this.updates.forEach(m=>{m.call(this.chart,h,p)})}}a.Additions=c}(n||(n={})),n}),r(t,"Extensions/Exporting/ExportingDefaults.js",[t["Core/Globals.js"]],function(n){let{isTouchDevice:a}=n;return{exporting:{allowTableSorting:!0,type:"image/png",url:"https://export.highcharts.com/",pdfFont:{normal:void 0,bold:void 0,bolditalic:void 0,italic:void 0},printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",titleKey:"contextButtonTitle",menuItems:["viewFullscreen","printChart","separator","downloadPNG","downloadJPEG","downloadPDF","downloadSVG"]}},menuItemDefinitions:{viewFullscreen:{textKey:"viewFullscreen",onclick:function(){this.fullscreen&&this.fullscreen.toggle()}},printChart:{textKey:"printChart",onclick:function(){this.print()}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChart()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}}},lang:{viewFullscreen:"View in full screen",exitFullscreen:"Exit from full screen",printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"},navigation:{buttonOptions:{symbolSize:14,symbolX:14.5,symbolY:13.5,align:"right",buttonSpacing:3,height:28,verticalAlign:"top",width:28,symbolFill:"#666666",symbolStroke:"#666666",symbolStrokeWidth:3,theme:{fill:"#ffffff",padding:5,stroke:"none","stroke-linecap":"round"}},menuStyle:{border:"none",borderRadius:"3px",background:"#ffffff",padding:"0.5em"},menuItemStyle:{background:"none",borderRadius:"3px",color:"#333333",padding:"0.5em",fontSize:a?"0.9em":"0.8em",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:"#f2f2f2"}}}}),r(t,"Extensions/Exporting/ExportingSymbols.js",[],function(){var n;return function(a){let c=[];function s(p,m,y,g){return[["M",p,m+2.5],["L",p+y,m+2.5],["M",p,m+g/2+.5],["L",p+y,m+g/2+.5],["M",p,m+g-1.5],["L",p+y,m+g-1.5]]}function h(p,m,y,g){let x=g/3-2;return[].concat(this.circle(y-x,m,x,x),this.circle(y-x,m+x+4,x,x),this.circle(y-x,m+2*(x+4),x,x))}a.compose=function(p){if(c.indexOf(p)===-1){c.push(p);let m=p.prototype.symbols;m.menu=s,m.menuball=h.bind(m)}}}(n||(n={})),n}),r(t,"Extensions/Exporting/Fullscreen.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,c){let{composed:s}=a,{addEvent:h,fireEvent:p,pushUnique:m}=c;function y(){this.fullscreen=new g(this)}class g{static compose(v){m(s,"Fullscreen")&&h(v,"beforeRender",y)}constructor(v){this.chart=v,this.isOpen=!1;let _=v.renderTo;!this.browserProps&&(typeof _.requestFullscreen=="function"?this.browserProps={fullscreenChange:"fullscreenchange",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen"}:_.mozRequestFullScreen?this.browserProps={fullscreenChange:"mozfullscreenchange",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen"}:_.webkitRequestFullScreen?this.browserProps={fullscreenChange:"webkitfullscreenchange",requestFullscreen:"webkitRequestFullScreen",exitFullscreen:"webkitExitFullscreen"}:_.msRequestFullscreen&&(this.browserProps={fullscreenChange:"MSFullscreenChange",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen"}))}close(){let v=this,_=v.chart,C=_.options.chart;p(_,"fullscreenClose",null,function(){v.isOpen&&v.browserProps&&_.container.ownerDocument instanceof Document&&_.container.ownerDocument[v.browserProps.exitFullscreen](),v.unbindFullscreenEvent&&(v.unbindFullscreenEvent=v.unbindFullscreenEvent()),_.setSize(v.origWidth,v.origHeight,!1),v.origWidth=void 0,v.origHeight=void 0,C.width=v.origWidthOption,C.height=v.origHeightOption,v.origWidthOption=void 0,v.origHeightOption=void 0,v.isOpen=!1,v.setButtonText()})}open(){let v=this,_=v.chart,C=_.options.chart;p(_,"fullscreenOpen",null,function(){if(C&&(v.origWidthOption=C.width,v.origHeightOption=C.height),v.origWidth=_.chartWidth,v.origHeight=_.chartHeight,v.browserProps){let k=h(_.container.ownerDocument,v.browserProps.fullscreenChange,function(){v.isOpen?(v.isOpen=!1,v.close()):(_.setSize(null,null,!1),v.isOpen=!0,v.setButtonText())}),w=h(_,"destroy",k);v.unbindFullscreenEvent=()=>{k(),w()};let E=_.renderTo[v.browserProps.requestFullscreen]();E&&E.catch(function(){alert("Full screen is not supported inside a frame.")})}})}setButtonText(){let v=this.chart,_=v.exportDivElements,C=v.options.exporting,k=C&&C.buttons&&C.buttons.contextButton.menuItems,w=v.options.lang;if(C&&C.menuItemDefinitions&&w&&w.exitFullscreen&&w.viewFullscreen&&k&&_){let E=_[k.indexOf("viewFullscreen")];E&&n.setElementHTML(E,this.isOpen?w.exitFullscreen:C.menuItemDefinitions.viewFullscreen.text||w.viewFullscreen)}}toggle(){this.isOpen?this.close():this.open()}}return g}),r(t,"Core/HttpUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a){let{win:c}=n,{discardElement:s,objectEach:h}=a,p={ajax:function(m){let y={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"},g=new XMLHttpRequest;function x(v,_){m.error&&m.error(v,_)}if(!m.url)return!1;g.open((m.type||"get").toUpperCase(),m.url,!0),m.headers&&m.headers["Content-Type"]||g.setRequestHeader("Content-Type",y[m.dataType||"json"]||y.text),h(m.headers,function(v,_){g.setRequestHeader(_,v)}),m.responseType&&(g.responseType=m.responseType),g.onreadystatechange=function(){let v;if(g.readyState===4){if(g.status===200){if(m.responseType!=="blob"&&(v=g.responseText,m.dataType==="json"))try{v=JSON.parse(v)}catch(_){if(_ instanceof Error)return x(g,_)}return m.success&&m.success(v,g)}x(g,g.responseText)}},m.data&&typeof m.data!="string"&&(m.data=JSON.stringify(m.data)),g.send(m.data)},getJSON:function(m,y){p.ajax({url:m,success:y,dataType:"json",headers:{"Content-Type":"text/plain"}})},post:function(m,y,g){let x=new c.FormData;h(y,function(C,k){x.append(k,C)}),x.append("b64","true");let{filename:v,type:_}=y;return c.fetch(m,{method:"POST",body:x,...g}).then(C=>{C.ok&&C.text().then(k=>{let w=document.createElement("a");w.href=`data:${_};base64,${k}`,w.download=v,w.click(),s(w)})})}};return p}),r(t,"Extensions/Exporting/Exporting.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Chart/Chart.js"],t["Core/Chart/ChartNavigationComposition.js"],t["Core/Defaults.js"],t["Extensions/Exporting/ExportingDefaults.js"],t["Extensions/Exporting/ExportingSymbols.js"],t["Extensions/Exporting/Fullscreen.js"],t["Core/Globals.js"],t["Core/HttpUtilities.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,p,m,y,g,x){var v;let{defaultOptions:_}=s,{doc:C,SVG_NS:k,win:w}=y,{addEvent:E,css:A,createElement:M,discardElement:S,extend:N,find:Y,fireEvent:Z,isObject:K,merge:U,objectEach:$,pick:B,removeEvent:R,uniqueKey:L}=x;return function(G){let F,j=[/-/,/^(clipPath|cssText|d|height|width)$/,/^font$/,/[lL]ogical(Width|Height)$/,/^parentRule$/,/^(cssRules|ownerRules)$/,/perspective/,/TapHighlightColor/,/^transition/,/^length$/,/^\d+$/],q=["fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","textAnchor","x","y"];G.inlineAllowlist=[];let W=["clipPath","defs","desc"];function se(ke){let Le,me,Re=this,$e=Re.renderer,De=U(Re.options.navigation.buttonOptions,ke),Se=De.onclick,Pe=De.menuItems,Fe=De.symbolSize||12;if(Re.btnCount||(Re.btnCount=0),Re.exportDivElements||(Re.exportDivElements=[],Re.exportSVGElements=[]),De.enabled===!1||!De.theme)return;let je=Re.styledMode?{}:De.theme;Se?me=function(Qe){Qe&&Qe.stopPropagation(),Se.call(Re,Qe)}:Pe&&(me=function(Qe){Qe&&Qe.stopPropagation(),Re.contextMenu(He.menuClassName,Pe,He.translateX||0,He.translateY||0,He.width||0,He.height||0,He),He.setState(2)}),De.text&&De.symbol?je.paddingLeft=B(je.paddingLeft,30):De.text||N(je,{width:De.width,height:De.height,padding:0});let He=$e.button(De.text,0,0,me,je,void 0,void 0,void 0,void 0,De.useHTML).addClass(ke.className).attr({title:B(Re.options.lang[De._titleKey||De.titleKey],"")});He.menuClassName=ke.menuClassName||"highcharts-menu-"+Re.btnCount++,De.symbol&&(Le=$e.symbol(De.symbol,Math.round((De.symbolX||0)-Fe/2),Math.round((De.symbolY||0)-Fe/2),Fe,Fe,{width:Fe,height:Fe}).addClass("highcharts-button-symbol").attr({zIndex:1}).add(He),Re.styledMode||Le.attr({stroke:De.symbolStroke,fill:De.symbolFill,"stroke-width":De.symbolStrokeWidth||1})),He.add(Re.exportingGroup).align(N(De,{width:He.width,x:B(De.x,Re.buttonOffset)}),!0,"spacingBox"),Re.buttonOffset+=((He.width||0)+De.buttonSpacing)*(De.align==="right"?-1:1),Re.exportSVGElements.push(He,Le)}function fe(){if(!this.printReverseInfo)return;let{childNodes:ke,origDisplay:Le,resetParams:me}=this.printReverseInfo;this.moveContainers(this.renderTo),[].forEach.call(ke,function(Re,$e){Re.nodeType===1&&(Re.style.display=Le[$e]||"")}),this.isPrinting=!1,me&&this.setSize.apply(this,me),delete this.printReverseInfo,F=void 0,Z(this,"afterPrint")}function ee(){var Re;let ke=C.body,Le=this.options.exporting.printMaxWidth,me={childNodes:ke.childNodes,origDisplay:[],resetParams:void 0};this.isPrinting=!0,(Re=this.pointer)==null||Re.reset(void 0,0),Z(this,"beforePrint"),Le&&this.chartWidth>Le&&(me.resetParams=[this.options.chart.width,void 0,!1],this.setSize(Le,void 0,!1)),[].forEach.call(me.childNodes,function($e,De){$e.nodeType===1&&(me.origDisplay[De]=$e.style.display,$e.style.display="none")}),this.moveContainers(ke),this.printReverseInfo=me}function oe(ke){ke.renderExporting(),E(ke,"redraw",ke.renderExporting),E(ke,"destroy",ke.destroyExport)}function Ce(ke,Le,me,Re,$e,De,Se){var Tt,Nt;let Pe=this,Fe=Pe.options.navigation,je=Pe.chartWidth,He=Pe.chartHeight,Qe="cache-"+ke,at=Math.max($e,De),rt,dt=Pe[Qe];dt||(Pe.exportContextMenu=Pe[Qe]=dt=M("div",{className:ke},{position:"absolute",zIndex:1e3,padding:at+"px",pointerEvents:"auto",...Pe.renderer.style},((Tt=Pe.scrollablePlotArea)==null?void 0:Tt.fixedDiv)||Pe.container),rt=M("ul",{className:"highcharts-menu"},Pe.styledMode?{}:{listStyle:"none",margin:0,padding:0},dt),Pe.styledMode||A(rt,N({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},Fe.menuStyle)),dt.hideMenu=function(){A(dt,{display:"none"}),Se&&Se.setState(0),Pe.openMenu=!1,A(Pe.renderTo,{overflow:"hidden"}),A(Pe.container,{overflow:"hidden"}),x.clearTimeout(dt.hideTimer),Z(Pe,"exportMenuHidden")},Pe.exportEvents.push(E(dt,"mouseleave",function(){dt.hideTimer=w.setTimeout(dt.hideMenu,500)}),E(dt,"mouseenter",function(){x.clearTimeout(dt.hideTimer)}),E(C,"mouseup",function(mt){var St;(St=Pe.pointer)!=null&&St.inClass(mt.target,ke)||dt.hideMenu()}),E(dt,"click",function(){Pe.openMenu&&dt.hideMenu()})),Le.forEach(function(mt){if(typeof mt=="string"&&(mt=Pe.options.exporting.menuItemDefinitions[mt]),K(mt,!0)){let St;mt.separator?St=M("hr",void 0,void 0,rt):(mt.textKey==="viewData"&&Pe.isDataTableVisible&&(mt.textKey="hideData"),St=M("li",{className:"highcharts-menu-item",onclick:function(kt){kt&&kt.stopPropagation(),dt.hideMenu(),typeof mt!="string"&&mt.onclick&&mt.onclick.apply(Pe,arguments)}},void 0,rt),n.setElementHTML(St,mt.text||Pe.options.lang[mt.textKey]),Pe.styledMode||(St.onmouseover=function(){A(this,Fe.menuItemHoverStyle)},St.onmouseout=function(){A(this,Fe.menuItemStyle)},A(St,N({cursor:"pointer"},Fe.menuItemStyle||{})))),Pe.exportDivElements.push(St)}}),Pe.exportDivElements.push(rt,dt),Pe.exportMenuWidth=dt.offsetWidth,Pe.exportMenuHeight=dt.offsetHeight);let gt={display:"block"};me+(Pe.exportMenuWidth||0)>je?gt.right=je-me-$e-at+"px":gt.left=me-at+"px",Re+De+(Pe.exportMenuHeight||0)>He&&((Nt=Se.alignOptions)==null?void 0:Nt.verticalAlign)!=="top"?gt.bottom=He-Re-at+"px":gt.top=Re+De-at+"px",A(dt,gt),A(Pe.renderTo,{overflow:""}),A(Pe.container,{overflow:""}),Pe.openMenu=!0,Z(Pe,"exportMenuShown")}function ge(ke){let Le,me=ke?ke.target:this,Re=me.exportSVGElements,$e=me.exportDivElements,De=me.exportEvents;Re&&(Re.forEach((Se,Pe)=>{Se&&(Se.onclick=Se.ontouchstart=null,me[Le="cache-"+Se.menuClassName]&&delete me[Le],Re[Pe]=Se.destroy())}),Re.length=0),me.exportingGroup&&(me.exportingGroup.destroy(),delete me.exportingGroup),$e&&($e.forEach(function(Se,Pe){Se&&(x.clearTimeout(Se.hideTimer),R(Se,"mouseleave"),$e[Pe]=Se.onmouseout=Se.onmouseover=Se.ontouchstart=Se.onclick=null,S(Se))}),$e.length=0),De&&(De.forEach(function(Se){Se()}),De.length=0)}function Ee(ke,Le){let me=this.getSVGForExport(ke,Le);ke=U(this.options.exporting,ke),g.post(ke.url,{filename:ke.filename?ke.filename.replace(/\//g,"-"):this.getFilename(),type:ke.type,width:ke.width,scale:ke.scale,svg:me},ke.fetchOptions)}function J(){return this.styledMode&&this.inlineStyles(),this.container.innerHTML}function ie(){let ke=this.userOptions.title&&this.userOptions.title.text,Le=this.options.exporting.filename;return Le?Le.replace(/\//g,"-"):(typeof ke=="string"&&(Le=ke.toLowerCase().replace(/<\/?[^>]+(>|$)/g,"").replace(/[\s_]+/g,"-").replace(/[^a-z\d\-]/g,"").replace(/^[\-]+/g,"").replace(/[\-]+/g,"-").substr(0,24).replace(/[\-]+$/g,"")),(!Le||Le.length<5)&&(Le="chart"),Le)}function le(ke){let Le,me,Re=U(this.options,ke);Re.plotOptions=U(this.userOptions.plotOptions,ke&&ke.plotOptions),Re.time=U(this.userOptions.time,ke&&ke.time);let $e=M("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},C.body),De=this.renderTo.style.width,Se=this.renderTo.style.height,Pe=Re.exporting.sourceWidth||Re.chart.width||/px$/.test(De)&&parseInt(De,10)||(Re.isGantt?800:600),Fe=Re.exporting.sourceHeight||Re.chart.height||/px$/.test(Se)&&parseInt(Se,10)||400;N(Re.chart,{animation:!1,renderTo:$e,forExport:!0,renderer:"SVGRenderer",width:Pe,height:Fe}),Re.exporting.enabled=!1,delete Re.data,Re.series=[],this.series.forEach(function(Qe){(me=U(Qe.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:Qe.visible})).isInternal||Re.series.push(me)});let je={};this.axes.forEach(function(Qe){Qe.userOptions.internalKey||(Qe.userOptions.internalKey=L()),Qe.options.isInternal||(je[Qe.coll]||(je[Qe.coll]=!0,Re[Qe.coll]=[]),Re[Qe.coll].push(U(Qe.userOptions,{visible:Qe.visible,type:Qe.type,uniqueNames:Qe.uniqueNames})))}),Re.colorAxis=this.userOptions.colorAxis;let He=new this.constructor(Re,this.callback);return ke&&["xAxis","yAxis","series"].forEach(function(Qe){let at={};ke[Qe]&&(at[Qe]=ke[Qe],He.update(at))}),this.axes.forEach(function(Qe){let at=Y(He.axes,function(Tt){return Tt.options.internalKey===Qe.userOptions.internalKey}),rt=Qe.getExtremes(),dt=rt.userMin,gt=rt.userMax;at&&(dt!==void 0&&dt!==at.min||gt!==void 0&&gt!==at.max)&&at.setExtremes(dt,gt,!0,!1)}),Le=He.getChartHTML(),Z(this,"getSVG",{chartCopy:He}),Le=this.sanitizeSVG(Le,Re),Re=null,He.destroy(),S($e),Le}function be(ke,Le){let me=this.options.exporting;return this.getSVG(U({chart:{borderRadius:0}},me.chartOptions,Le,{exporting:{sourceWidth:ke&&ke.sourceWidth||me.sourceWidth,sourceHeight:ke&&ke.sourceHeight||me.sourceHeight}}))}function te(){let ke,Le=G.inlineAllowlist,me={},Re=C.createElement("iframe");A(Re,{width:"1px",height:"1px",visibility:"hidden"}),C.body.appendChild(Re);let $e=Re.contentWindow&&Re.contentWindow.document;$e&&$e.body.appendChild($e.createElementNS(k,"svg")),function De(Se){let Pe,Fe,je,He,Qe,at,rt={};if($e&&Se.nodeType===1&&W.indexOf(Se.nodeName)===-1){if(Pe=w.getComputedStyle(Se,null),Fe=Se.nodeName==="svg"?{}:w.getComputedStyle(Se.parentNode,null),!me[Se.nodeName]){ke=$e.getElementsByTagName("svg")[0],je=$e.createElementNS(Se.namespaceURI,Se.nodeName),ke.appendChild(je);let dt=w.getComputedStyle(je,null),gt={};for(let Tt in dt)Tt.length<1e3&&typeof dt[Tt]=="string"&&!/^\d+$/.test(Tt)&&(gt[Tt]=dt[Tt]);me[Se.nodeName]=gt,Se.nodeName==="text"&&delete me.text.fill,ke.removeChild(je)}for(let dt in Pe)(y.isFirefox||y.isMS||y.isSafari||Object.hasOwnProperty.call(Pe,dt))&&function(gt,Tt){if(He=Qe=!1,Le.length){for(at=Le.length;at--&&!Qe;)Qe=Le[at].test(Tt);He=!Qe}for(Tt==="transform"&&gt==="none"&&(He=!0),at=j.length;at--&&!He;){if(Tt.length>1e3)throw Error("Input too long");He=j[at].test(Tt)||typeof gt=="function"}!He&&(Fe[Tt]!==gt||Se.nodeName==="svg")&&me[Se.nodeName][Tt]!==gt&&(q&&q.indexOf(Tt)===-1?rt[Tt]=gt:gt&&Se.setAttribute(Tt.replace(/[A-Z]/g,function(Nt){return"-"+Nt.toLowerCase()}),gt))}(Pe[dt],dt);if(A(Se,rt),Se.nodeName==="svg"&&Se.setAttribute("stroke-width","1px"),Se.nodeName==="text")return;[].forEach.call(Se.children||Se.childNodes,De)}}(this.container.querySelector("svg")),ke.parentNode.removeChild(ke),Re.parentNode.removeChild(Re)}function ae(ke){let{scrollablePlotArea:Le}=this;(Le?[Le.fixedDiv,Le.scrollingContainer]:[this.container]).forEach(function(me){ke.appendChild(me)})}function ce(){let ke=this,Le=(me,Re,$e)=>{ke.isDirtyExporting=!0,U(!0,ke.options[me],Re),B($e,!0)&&ke.redraw()};ke.exporting={update:function(me,Re){Le("exporting",me,Re)}},c.compose(ke).navigation.addUpdate((me,Re)=>{Le("navigation",me,Re)})}function xe(){let ke=this;ke.isPrinting||(F=ke,y.isSafari||ke.beforePrint(),setTimeout(()=>{w.focus(),w.print(),y.isSafari||setTimeout(()=>{ke.afterPrint()},1e3)},1))}function _e(){let ke=this,Le=ke.options.exporting,me=Le.buttons,Re=ke.isDirtyExporting||!ke.exportSVGElements;ke.buttonOffset=0,ke.isDirtyExporting&&ke.destroyExport(),Re&&Le.enabled!==!1&&(ke.exportEvents=[],ke.exportingGroup=ke.exportingGroup||ke.renderer.g("exporting-group").attr({zIndex:3}).add(),$(me,function($e){ke.addButton($e)}),ke.isDirtyExporting=!1)}function Ne(ke,Le){let me=ke.indexOf("</svg>")+6,Re=ke.substr(me);return ke=ke.substr(0,me),Le&&Le.exporting&&Le.exporting.allowHTML&&Re&&(Re='<foreignObject x="0" y="0" width="'+Le.chart.width+'" height="'+Le.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+Re.replace(/(<(?:img|br).*?(?=\>))>/g,"$1 />")+"</body></foreignObject>",ke=ke.replace("</svg>",Re+"</svg>")),ke=ke.replace(/zIndex="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery\d+="[^"]+"/g,"").replace(/url\(("|&quot;)(.*?)("|&quot;)\;?\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS\d+\:)?href=/g," xlink:href=").replace(/\n+/g," ").replace(/(fill|stroke)="rgba\(([ \d]+,[ \d]+,[ \d]+),([ \d\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g," ").replace(/&shy;/g,"­")}G.compose=function(ke,Le){p.compose(Le),m.compose(ke);let me=ke.prototype;me.exportChart||(me.afterPrint=fe,me.exportChart=Ee,me.inlineStyles=te,me.print=xe,me.sanitizeSVG=Ne,me.getChartHTML=J,me.getSVG=le,me.getSVGForExport=be,me.getFilename=ie,me.moveContainers=ae,me.beforePrint=ee,me.contextMenu=Ce,me.addButton=se,me.destroyExport=ge,me.renderExporting=_e,me.callbacks.push(oe),E(ke,"init",ce),y.isSafari&&w.matchMedia("print").addListener(function(Re){F&&(Re.matches?F.beforePrint():F.afterPrint())}),_.exporting=U(h.exporting,_.exporting),_.lang=U(h.lang,_.lang),_.navigation=U(h.navigation,_.navigation))}}(v||(v={})),v}),r(t,"masters/modules/exporting.src.js",[t["Core/Globals.js"],t["Extensions/Exporting/Exporting.js"],t["Core/HttpUtilities.js"]],function(n,a,c){return n.HttpUtilities=n.HttpUtilities||c,n.ajax=n.HttpUtilities.ajax,n.getJSON=n.HttpUtilities.getJSON,n.post=n.HttpUtilities.post,a.compose(n.Chart,n.Renderer),n})})})(WI);var zW=WI.exports;const OW=Hu(zW);var YI={exports:{}};(function(i,e){(function(t,r){i.exports=r(Ie)})(typeof self<"u"?self:Tn,function(t){return function(r){function n(c){if(a[c])return a[c].exports;var s=a[c]={i:c,l:!1,exports:{}};return r[c].call(s.exports,s,s.exports,n),s.l=!0,s.exports}var a={};return n.m=r,n.c=a,n.d=function(c,s,h){n.o(c,s)||Object.defineProperty(c,s,{configurable:!1,enumerable:!0,get:h})},n.n=function(c){var s=c&&c.__esModule?function(){return c.default}:function(){return c};return n.d(s,"a",s),s},n.o=function(c,s){return Object.prototype.hasOwnProperty.call(c,s)},n.p="",n(n.s=0)}([function(r,n,a){function c(){return c=Object.assign?Object.assign.bind():function(w){for(var E=1;E<arguments.length;E++){var A=arguments[E];for(var M in A)Object.prototype.hasOwnProperty.call(A,M)&&(w[M]=A[M])}return w},c.apply(this,arguments)}function s(w){return y(w)||m(w)||p(w)||h()}function h(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p(w,E){if(w){if(typeof w=="string")return g(w,E);var A=Object.prototype.toString.call(w).slice(8,-1);return A==="Object"&&w.constructor&&(A=w.constructor.name),A==="Map"||A==="Set"?Array.from(w):A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A)?g(w,E):void 0}}function m(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}function y(w){if(Array.isArray(w))return g(w)}function g(w,E){(E==null||E>w.length)&&(E=w.length);for(var A=0,M=new Array(E);A<E;A++)M[A]=w[A];return M}function x(w){"@babel/helpers - typeof";return(x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(w)}Object.defineProperty(n,"__esModule",{value:!0}),a.d(n,"HighchartsReact",function(){return k});var v=a(1),_=a.n(v),C=typeof window<"u"?v.useLayoutEffect:v.useEffect,k=Object(v.memo)(Object(v.forwardRef)(function(w,E){var A=Object(v.useRef)(),M=Object(v.useRef)(),S=Object(v.useRef)(w.constructorType),N=Object(v.useRef)(w.highcharts);return C(function(){function Y(){var K=w.highcharts||(typeof window>"u"?"undefined":x(window))==="object"&&window.Highcharts,U=w.constructorType||"chart";K?K[U]?w.options?M.current=K[U](A.current,w.options,w.callback):console.warn('The "options" property was not passed.'):console.warn('The "constructorType" property is incorrect or some required module is not imported.'):console.warn('The "highcharts" property was not passed.')}if(M.current){if(w.allowChartUpdate!==!1)if(w.constructorType!==S.current||w.highcharts!==N.current)S.current=w.constructorType,N.current=w.highcharts,Y();else if(!w.immutable&&M.current){var Z;(Z=M.current).update.apply(Z,[w.options].concat(s(w.updateArgs||[!0,!0])))}else Y()}else Y()},[w.options,w.allowChartUpdate,w.updateArgs,w.containerProps,w.highcharts,w.constructorType]),C(function(){return function(){M.current&&(M.current.destroy(),M.current=null)}},[]),Object(v.useImperativeHandle)(E,function(){return{get chart(){return M.current},container:A}},[]),_.a.createElement("div",c({},w.containerProps,{ref:A}))}));n.default=k},function(r,n){r.exports=t}])})})(YI);var jW=YI.exports;const ZI=Hu(jW),FW="_chartContainer_1sr1q_1",BW="_chart_1sr1q_1",$W="_menu_1sr1q_10",s1={chartContainer:FW,chart:BW,menu:$W},UW="أسبوع",VW={"Bi-Week":"كل اسبوعين",Week:UW},GW="Týden",HW={"Bi-Week":"Dvoutýden",Week:GW},qW="Week",WW={'Couldn\'t find a monthly period for weekly period id "{{periodId}}"':`Couldn't find a monthly period for weekly period id "{{periodId}}"`,'Couldn\'t find a weekly period for weekly period id "{{periodId}}"':`Couldn't find a weekly period for weekly period id "{{periodId}}"`,'Couldn\'t handle unknown period id "{{periodId}}"':`Couldn't handle unknown period id "{{periodId}}"`,'Could not find a period type for period id "{{periodId}}"':'Could not find a period type for period id "{{periodId}}"','Could not determine a period type for period id "{{periodId}}"':'Could not determine a period type for period id "{{periodId}}"','Couldn\'t find a period type for weekly period id "{{periodId}}"':`Couldn't find a period type for weekly period id "{{periodId}}"`,"Bi-Week":"Bi-Week",Week:qW,'Date string is invalid, received "{{dateString}}"':'Date string is invalid, received "{{dateString}}"',"Date string format does not match the specified format. Expected {{format}} but got {{detectedFormat}}.":"Date string format does not match the specified format. Expected {{format}} but got {{detectedFormat}}.",'Unrecognized date, received "{{date}}"':'Unrecognized date, received "{{date}}"',"Date is not given":"Date is not given","Invalid date in specified calendar":"Invalid date in specified calendar","Date {{dateString}} is less than the minimum allowed date {{minDateString}}.":"Date {{dateString}} is less than the minimum allowed date {{minDateString}}.","Date {{dateString}} is greater than the maximum allowed date {{maxDateString}}.":"Date {{dateString}} is greater than the maximum allowed date {{maxDateString}}."},YW="Semana",ZW={"Bi-Week":"Quincenal",Week:YW},XW="Semana",KW={"Bi-Week":"Cada dos semanas",Week:XW},QW="Semaine",JW={"Bi-Week":"Bi-hebdomadaire",Week:QW},eY="Minggu",tY={"Bi-Week":"",Week:eY},iY="ອາທິດ",rY={"Bi-Week":"ສອງອາທິດຕໍ່ຄັ້ງ",Week:iY},nY="Uke",sY={"Bi-Week":"Toukentlig",Week:nY},aY="Week",oY={"Bi-Week":"",Week:aY},lY="هفته",cY={"Bi-Week":"",Week:lY},uY="اونۍ",dY={"Bi-Week":"",Week:uY},hY="Semana",pY={"Bi-Week":"Bimensal",Week:hY},fY="Semana",mY={"Bi-Week":"",Week:fY},gY="Неделя",yY={"Bi-Week":"",Week:gY},vY="සතිය",xY={"Bi-Week":"",Week:vY},bY="Тиждень",wY={"Bi-Week":"",Week:bY},_Y="ہفتہ",CY={"Bi-Week":"",Week:_Y},TY="Ҳафта",SY={"Bi-Week":"Жуфт-Ҳафта",Week:TY},EY="Hafta",kY={"Bi-Week":"Juft-Hafta",Week:EY},MY="Tuần",AY={"Bi-Week":"Kỳ 2 tuần này",Week:MY},IY="周",PY={"Bi-Week":"两周",Week:IY},DY="周",RY={"Bi-Week":"",Week:DY},Qn="default";ve.addResources("ar",Qn,VW);ve.addResources("cs",Qn,HW);ve.addResources("en",Qn,WW);ve.addResources("es",Qn,ZW);ve.addResources("es_419",Qn,KW);ve.addResources("fr",Qn,JW);ve.addResources("id",Qn,tY);ve.addResources("lo",Qn,rY);ve.addResources("nb",Qn,sY);ve.addResources("nl",Qn,oY);ve.addResources("prs",Qn,cY);ve.addResources("ps",Qn,dY);ve.addResources("pt",Qn,pY);ve.addResources("pt_BR",Qn,mY);ve.addResources("ru",Qn,yY);ve.addResources("si",Qn,xY);ve.addResources("uk",Qn,wY);ve.addResources("ur",Qn,CY);ve.addResources("uz_UZ_Cyrl",Qn,SY);ve.addResources("uz_UZ_Latn",Qn,kY);ve.addResources("vi",Qn,AY);ve.addResources("zh",Qn,PY);ve.addResources("zh_CN",Qn,RY);const XI={ethiopian:"ethiopic",coptic:"coptic",gregorian:"gregory",islamic:"islamic",iso8601:"iso8601",nepali:"nepali",thai:"buddhist",persian:"persian"},LY={nepali:{"ne-NP":{monthNames:["बैशाख","जेठ","असार","साउन","भदौ","असोज","कार्तिक","मंसिर","पौष","माघ","फागुन","चैत"],dayNamesShort:["सोम","मंगल","बुध","बिही","शुक्र","शनि","आइत"],numbers:["०","१","२","३","४","५","६","७","८","९","१०","११","१२","१३","१४","१५","१६","१७","१८","१९","२०","२१","२२","२३","२४","२५","२६","२७","२८","२९","३०","३१","३२"]},"en-NP":{monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],dayNamesShort:["Som","Mangl","Budha","Bihi","Shukra","Shani","Aaita"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"]}}},co={1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,32,31,32,31,30,30,30,29,30,29,31],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]};class NY extends Zn.Calendar{constructor(){super("iso8601")}toString(){return"nepali"}year(e){var t;const{isoYear:r,isoMonth:n,isoDay:a}=e.getISOFields();return(t=o1({year:r,month:n,day:a}))===null||t===void 0?void 0:t.year}eraYear(e){return this.year(e)}daysInMonth(e){const{year:t,month:r}=e;return co[t][r]}month(e){var t;const{isoYear:r,isoMonth:n,isoDay:a}=e.getISOFields();return(t=o1({year:r,month:n,day:a}))===null||t===void 0?void 0:t.month}monthCode(e){const{month:t}=e;return KI(t)}day(e){const{isoYear:t,isoMonth:r,isoDay:n}=e.getISOFields(),{day:a}=o1({year:t,month:r,day:n});return a}dateFromFields(e,t){const{year:r,day:n,month:a}=a1({year:e.year,month:e.month,day:e.day},t);return new Zn.PlainDate(r,a,n,this)}yearMonthFromFields(e){const{year:t,day:r,month:n}=a1({year:e.year,month:e.month,day:e.day});return new Zn.PlainYearMonth(t,n,this,r)}monthDayFromFields(e){const{year:t,day:r,month:n}=a1({year:e.year,month:e.month,day:e.day});return new Zn.PlainMonthDay(r,n,this,t)}}const Bw=Object.keys(co),mv=Number(Bw[0]),gv=Number(Bw[Bw.length-1]),a1=function(i){let{overflow:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{year:t}=i;if(t<mv||t>gv)throw new Error(`Conversions are only possible between ${mv} and ${gv} in Nepali calendar`);const{month:r,day:n=1}=i;if(e==="reject"&&(r<1||r>12||n>co[t][r]))throw new Error("Invalid date in Nepali calendar");let a=0,c=r;const s=t-(r>9||c===9&&n>=co[t][0]?56:57);for(r!==9&&(a=n,c--);c!==9;)c<=0&&(c=12,t--),a+=co[t][c],c--;r===9?(a+=n-co[t][0],a<0&&(a+=Zn.PlainDate.from({year:s,day:1,month:1}).daysInYear)):a+=co[t][9]-co[t][0];const h=Zn.PlainDate.from({year:s,month:1,day:1}).add({days:a});return{year:h.year,month:h.month,monthCode:KI(h.month),day:h.day}},o1=i=>{const e=Zn.PlainDate.from({year:i.year,month:i.month,day:i.day}),t=e.year,r=e.dayOfYear;let n=t+56;if(!co[n])throw new Error(`Conversions are only possible between ${mv} and ${gv} in Nepali calendar`);let a=9;const c=co[n][0];let s=co[n][a]-c+1;for(;r>s;){var h;a++,a>12&&(a=1,n++),s+=(h=co[n])===null||h===void 0?void 0:h[a]}if(!co[n])throw new Error(`Conversions are only possible between ${mv} and ${gv} in Nepali calendar`);const p=co[n][a]-(s-r);return{year:n,month:a,day:p}};function KI(i){return`M${i.toString().padStart(2,"0")}`}const Z2={nepali:{calendar:new NY,locales:LY.nepali,defaultLocale:"en-NP"}},zY=/^(?:(\d{4})([-./])(\d{2})(\2)(\d{2})|(\d{2})([-./])(\d{2})(\7)(\d{4}))$/;function OY(i,e){const t=i.match(zY);if(!t)throw new Error(ve.t('Date string is invalid, received "{{dateString}}"',{dateString:i}));let r,n,a,c;t[1]?(r=t[1],n=t[3],a=t[5],c="YYYY-MM-DD"):(a=t[6],n=t[8],r=t[10],c="DD-MM-YYYY");const s=parseInt(r,10),h=parseInt(n,10),p=parseInt(a,10);return{year:s,month:h,day:p,format:c}}let FE;(function(i){i.INVALID_DATE_IN_CALENDAR="INVALID_DATE_IN_CALENDAR",i.WRONG_FORMAT="WRONG_FORMAT",i.LESS_THAN_MIN="LESS_THAN_MIN",i.MORE_THAN_MAX="INVALID_DATE_MORE_THAN_MAX"})(FE||(FE={}));const qu=i=>!!Z2[i],Eu=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(i).padStart(e,"0")},Xo=(i,e,t)=>{var r;const n=(r=i.eraYear)!==null&&r!==void 0?r:i.year,a=Eu(i.month);let c=i.day;e==="endOfMonth"?c=i.daysInMonth:e==="startOfMonth"&&(c=1);const s=Eu(c);return t==="DD-MM-YYYY"?`${s}-${a}-${n}`:`${n}-${a}-${s}`},QI=i=>{var e;if(!qu(i))return i;const r=(e=Z2[i])===null||e===void 0?void 0:e.calendar;if(!r)throw new Error(`No implemenation found for custom calendar ${i}`);return r},jY=["adlm","ahom","arab","arabext","armn","armnlow","bali","beng","bhks","brah","cakm","cham","cyrl","deva","ethi","finance","fullwide","geor","gong","gonm","grek","greklow","gujr","guru","hanidays","hanidec","hans","hansfin","hant","hantfin","hebr","hmng","hmnp","java","jpan","jpanfin","jpanyear","kali","khmr","knda","lana","lanatham","laoo","latn","lepc","limb","mathbold","mathdbl","mathmono","mathsanb","mathsans","mlym","modi","mong","mroo","mtei","mymr","mymrshan","mymrtlng","native","newa","nkoo","olck","orya","osma","rohg","roman","romanlow","saur","shrd","sind","sinh","sora","sund","takr","talu","taml","tamldec","telu","thai","tirh","tibt","traditio","vaii","wara","wcho"],FY=(i,e)=>{const t=Object.keys(i).find(r=>{var n,a;return((n=r.split("-"))===null||n===void 0||(a=n[0])===null||a===void 0?void 0:a.toLowerCase())===e});if(t)return i[t]},X2=(i,e)=>{var t,r;const n=Z2[i];if(!n)return;const a=n.locales||{},c=(t=(r=e&&(a==null?void 0:a[e]))!==null&&r!==void 0?r:FY(a,e))!==null&&t!==void 0?t:a==null?void 0:a[n.defaultLocale];if(!c)throw new Error(`no localisation found for custom calendar ${i}. Requested locale: ${e}, Default locale ${n.defaultLocale}`);return c},BY=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{dateStyle:"full"};if(!e.calendar)throw new Error("no calendar provided to localise function");if(!i)throw new Error("a date must be provided to localiseDateLabel");const r=qu(e.calendar),n=i instanceof Zn.ZonedDateTime?i==null?void 0:i.toPlainDate():i;return r?Xo(i):n.toLocaleString(e.locale,{calendar:e.calendar,dateStyle:t.dateStyle}).toString()},$Y=(i,e)=>{var t;if(!e.calendar)throw new Error("no calendar provided to localise function");const r=qu(e.calendar),n=X2(e.calendar,e.locale);return r?(n==null||(t=n.numbers)===null||t===void 0?void 0:t[i.day])||i.day:i.toPlainDate().toLocaleString(e.locale,{calendar:e.calendar,numberingSystem:jY.includes(e.numberingSystem)?e.numberingSystem:void 0,day:"numeric"})},UY=(i,e,t)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");const r=qu(e.calendar),n=X2(e.calendar,e.locale);return r?n==null?void 0:n.monthNames[i.month-1]:i.toLocaleString(e.locale,t)},VY=(i,e)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");const t=qu(e.calendar),r=X2(e.calendar,e.locale),n=r==null?void 0:r.dayNamesShort[i.dayOfWeek-1];return t&&n?n:i.toPlainDate().toLocaleString(e.locale,{weekday:e.weekDayFormat,calendar:e.calendar})},GY=(i,e,t)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");return qu(e.calendar)?i.year:i.toPlainYearMonth().toLocaleString(e.locale,t)},Xd={localiseYear:GY,localiseDateLabel:BY,localiseWeekLabel:$Y,localiseMonth:UY,localiseWeekDayLabel:VY},JI=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const[e,t,r]=i.replace(/_/g,"-").split("-");let n=e;r&&(n=`${n}-${r}`),t&&(n=`${n}-${t}`);try{const a=Intl.DateTimeFormat.supportedLocalesOf(n);return a&&a.length===1?n:void 0}catch{return}},HY=i=>{let{date:e,calendar:t}=i;const{year:r,month:n,day:a}=OY(e);return Zn.PlainDate.from({year:r,month:n,day:a,calendar:t})},Fc=i=>{let{date:e,calendar:t}=i;if(typeof e=="string")return HY({date:e,calendar:t});if(e instanceof Date)return Zn.PlainDate.from({year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),calendar:t});if(e instanceof Zn.PlainDate)return Zn.PlainDate.from({year:e.year,month:e.month,day:e.day,calendar:t});throw new Error(ve.t('Unrecognized date, received "{{date}}"',{date:e}))},Ps=["DAILY","WEEKLY","WEEKLYMON","WEEKLYTUE","WEEKLYWED","WEEKLYTHU","WEEKLYFRI","WEEKLYSAT","WEEKLYSUN","BIWEEKLY","MONTHLY","BIMONTHLY","QUARTERLY","QUARTERLYJAN","QUARTERLYFEB","QUARTERLYMAR","QUARTERLYAPR","QUARTERLYMAY","QUARTERLYJUN","QUARTERLYJUL","QUARTERLYAUG","QUARTERLYSEP","QUARTERLYOCT","QUARTERLYNOV","QUARTERLYDEC","SIXMONTHLY","SIXMONTHLYJAN","SIXMONTHLYFEB","SIXMONTHLYMAR","SIXMONTHLYAPR","SIXMONTHLYMAY","SIXMONTHLYJUN","SIXMONTHLYJUL","SIXMONTHLYAUG","SIXMONTHLYSEP","SIXMONTHLYOCT","SIXMONTHLYNOV","SIXMONTHLYDEC","YEARLY","FYJAN","FYFEB","FYMAR","FYAPR","FYMAY","FYJUN","FYJUL","FYAUG","FYSEP","FYOCT","FYNOV","FYDEC"],qY=Ps.filter(i=>i.match(/WEEKLY/)),eP=Ps.filter(i=>i.match(/MONTHLY|QUARTERLY|SIXMONTHLY/)),$g=Ps.filter(i=>i.match(/QUARTERLY/)),Ug=Ps.filter(i=>i.match(/SIXMONTHLY/)),WY=["MONTHLY","BIMONTHLY","QUARTERLY","QUARTERLYJAN","SIXMONTHLY","SIXMONTHLYJAN"],YY=Ps.filter(i=>i.match(/(QUARTERLY|SIXMONTHLY)[A-Z]/)),tP=eP.filter(i=>i!=="MONTHLY"),ZY=Ps.filter(i=>i.match(/^(YEARLY|FY[A-Z]{3})/)),XY=Ps.filter(i=>i.match(/^FY[A-Z]{3}$/));[...WY,...Ps.filter(i=>i.match(/JAN$/))];const KY=Ps.filter(i=>i.match(/FEB$/)),QY=Ps.filter(i=>i.match(/MAR$/)),JY=Ps.filter(i=>i.match(/APR$/)),eZ=Ps.filter(i=>i.match(/MAY$/)),tZ=Ps.filter(i=>i.match(/JUN$/)),iZ=Ps.filter(i=>i.match(/JUL$/)),rZ=Ps.filter(i=>i.match(/AUG$/)),nZ=Ps.filter(i=>i.match(/SEP$/)),sZ=Ps.filter(i=>i.match(/OCT$/)),aZ=Ps.filter(i=>i.match(/NOV$/)),oZ=Ps.filter(i=>i.match(/DEC/)),{localiseDateLabel:lZ}=Xd,iP=i=>{let{date:e,calendar:t,locale:r}=i;const n=e.year,a=String(e.month).padStart(2,"0"),c=String(e.day).padStart(2,"0"),s=`${n}${a}${c}`,h=lZ(e,{calendar:t,locale:r},{dateStyle:"long"});return{periodType:"DAILY",id:s,iso:s,displayName:h,name:Xo(e),startDate:Xo(e),endDate:Xo(e)}},cZ=i=>{let{year:e,calendar:t,endsBefore:r,locale:n}=i;const a=r?Fc({calendar:t,date:r}):null,c=Zn.PlainDate.from({year:e,month:1,day:1,calendar:t}),s=[];for(let h=0;h<c.daysInYear;h++){const p=c.add({days:h});if(a&&Zn.PlainDate.compare(p,a)>-1)break;const m=iP({date:p,calendar:t,locale:n});s.push(m)}return s},Op=i=>KY.includes(i)?"FEB":QY.includes(i)?"MAR":JY.includes(i)?"APR":eZ.includes(i)?"MAY":tZ.includes(i)?"JUN":iZ.includes(i)?"JUL":rZ.includes(i)?"AUG":nZ.includes(i)?"SEP":sZ.includes(i)?"OCT":aZ.includes(i)?"NOV":oZ.includes(i)?"DEC":"JAN",Kl={JAN:{value:1,name:"January"},FEB:{value:2,name:"February"},MAR:{value:3,name:"March"},APR:{value:4,name:"April"},MAY:{value:5,name:"May"},JUN:{value:6,name:"June"},JUL:{value:7,name:"July"},AUG:{value:8,name:"August"},SEP:{value:9,name:"September"},OCT:{value:10,name:"October"},NOV:{value:11,name:"November"},DEC:{value:12,name:"December"}},uZ=i=>{let{periodType:e,month:t,year:r,calendar:n,locale:a}=i;const c=mZ({periodType:e,month:t.month,monthsInYear:t.monthsInYear}),s=hZ(e),h=t.add({months:s}),p=dZ({periodType:e,currentMonth:t,year:r,index:c});t.calendar==="ethiopic"&&console.warn("todo: confirm the special cases for the 13th month with Abyot, then update the start/end dates for Ethiopic calendar");const m=Zn.PlainDate.from({year:h.year,month:h.month,day:1,calendar:h.calendar}).subtract({days:1}),y=pZ({periodType:e,month:t,locale:a,calendar:n,nextMonth:h.subtract({months:1})});return{periodType:e,id:p,iso:p,name:y,displayName:y,startDate:Xo(t,"startOfMonth"),endDate:Xo(m,"endOfMonth")}},dZ=i=>{let{periodType:e,currentMonth:t,year:r,index:n}=i;if(e==="BIMONTHLY")return`${r}${Eu(n)}B`;if(e==="QUARTERLY")return`${r}Q${n}`;if(e==="SIXMONTHLY")return`${r}S${n}`;if($g.includes(e)){const a=Kl[Op(e)].name;return`${r}${a}Q${n}`}if(Ug.includes(e)){const a=Kl[Op(e)].name;return`${r}${a}S${n}`}return`${r}${Eu(t.month)}`},hZ=i=>{if(Ug.includes(i))return 6;if($g.includes(i))return 3;if(i==="MONTHLY")return 1;if(i==="BIMONTHLY")return 2;throw new Error(`unrecognised monthly period type ${i}`)},pZ=i=>{const{periodType:e,month:t,nextMonth:r,calendar:n,locale:a}=i;if(qu(n))return fZ(i);const c={month:"long",year:"numeric",calendar:n},s={month:"long",calendar:n};let h="";if(tP.includes(e)){const p=t.year===r.year?s:c;h=`${t.toLocaleString(a,p)} - ${r.toLocaleString(a,c)}`}else h=`${t.toLocaleString(a,c)}`;return h=h.replace(/ERA\d+\s*/g,"").trim(),h},fZ=i=>{let{periodType:e,month:t,nextMonth:r,calendar:n,locale:a}=i,c="";if(tP.includes(e)){const s=t.year!==r.year;c=`${Xd.localiseMonth(t,{locale:a,calendar:n},{})}${s?` ${t.year}`:""} - ${Xd.localiseMonth(r,{locale:a,calendar:n},{})} ${r.year}`}else c=`${Xd.localiseMonth(t,{locale:a,calendar:n},{})} ${r.year}`;return c},mZ=i=>{let{periodType:e,month:t,monthsInYear:r}=i;if(e==="MONTHLY")return t;if(e==="BIMONTHLY"){if(t%2===0)throw new Error(`Even numbers can't be a month for BIMONTHLY period type, received "${t}"`);return Math.ceil(t/2)}if($g.includes(e))return yZ(e,t,r);if(Ug.includes(e))return gZ(e,t,r);throw new Error(`Unrecognized period type "${e}"`)},rP=(i,e)=>[...Array(e-i+1).fill(null).map((r,n)=>n+i),1,2,3,4,5,6,7,8,9,10,11,12].slice(0,12),nP=(i,e)=>{const t=[];for(let r=0;r<12;r+=e)t.push(i.slice(r,r+e));return t},gZ=(i,e,t)=>{const r=Op(i),n=Kl[r].value,a=rP(n,t);return nP(a,6)[1].includes(e)?2:1},yZ=(i,e,t)=>{const r=Op(i),n=Kl[r].value,a=rP(n,t),c=nP(a,3);return c[1].includes(e)?2:c[2].includes(e)?3:c[3].includes(e)?4:1},K2=i=>{let{period:e,date:t,calendar:r}=i;const n=Fc({calendar:r,date:e.startDate}),a=Fc({calendar:r,date:e.endDate}),c=Zn.PlainDate.compare(t,n)<1,s=Zn.PlainDate.compare(n,t)===-1,h=Zn.PlainDate.compare(t,a)<1;return c||s&&h},vZ=i=>{let{year:e,calendar:t,periodType:r,endsBefore:n,locale:a}=i,c=Zn.PlainDate.from({year:e,month:bZ(r),day:t.toString()==="nepali"?14:1,calendar:t});const s=[];for(;c.year===e||wZ(r,s.length);){const h=_Z({periodType:r,currentMonth:c.month});if(!xZ(t,c)){const y=uZ({periodType:r,month:c,year:e,calendar:t,locale:a});if(n&&K2({period:y,date:n,calendar:t}))break;s.push(y)}const m=c.add({months:h});c=Fc({date:m,calendar:t})}return s},xZ=(i,e)=>i==="ethiopic"&&e.month===13,bZ=i=>{if(YY.includes(i)){const e=Op(i);return Kl[e].value}return 1},wZ=(i,e)=>Ug.includes(i)?e<2:$g.includes(i)?e<4:!1,_Z=i=>{let{periodType:e}=i;if(Ug.includes(e))return 6;if($g.includes(e))return 3;if(e==="MONTHLY")return 1;if(e==="BIMONTHLY")return 2;throw new Error(`unrecognised monthly period type ${e}`)},lu={Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6,Sunday:7},CZ=i=>{let{year:e,calendar:t,periodType:r,startingDay:n,endsBefore:a}=i;const c=TZ(r,n);let s=SZ({year:e,calendar:t,startingDay:c});const h=[];let p=1;const m=r==="BIWEEKLY"?13:6;do{const y=s.add({days:m});if(a&&K2({period:{startDate:Xo(s),endDate:Xo(y)},date:a,calendar:t}))break;const g=kZ({periodType:r,startingDay:c,year:e,weekIndex:p});if(!(y.year===e+1&&y.day>=4)){const x=MZ({periodType:r,date:s,nextWeek:y,weekIndex:p});h.push({periodType:r,id:g,iso:g,name:x,displayName:x,startDate:Xo(s),endDate:Xo(y)})}s=Fc({date:y,calendar:t}).add({days:1}),p++}while(s.year===e);return h},TZ=(i,e)=>{switch(i){case"WEEKLYMON":return lu.Monday;case"WEEKLYTUE":return lu.Tuesday;case"WEEKLYWED":return lu.Wednesday;case"WEEKLYTHU":return lu.Thursday;case"WEEKLYFRI":return lu.Friday;case"WEEKLYSAT":return lu.Saturday;case"WEEKLYSUN":return lu.Sunday;case"WEEKLY":case"BIWEEKLY":default:return e||lu.Monday}},SZ=i=>{const{year:e,calendar:t,startingDay:r}=i,n=Zn.PlainDate.from({year:e,month:1,day:4,calendar:t}),a=n.dayOfWeek-r;return a>0?n.subtract({days:a}):a<0?n.subtract({days:a+7}):n},EZ={1:"",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat",7:"Sun"},kZ=i=>{let{startingDay:e,periodType:t,year:r,weekIndex:n}=i;const a=t==="BIWEEKLY"?"BiW":"W";return`${r}${EZ[e]}${a}${n}`},MZ=i=>{let{periodType:e,date:t,nextWeek:r,weekIndex:n}=i;const{year:a,month:c,day:s}=t,{year:h,month:p,day:m}=r;return`${e==="BIWEEKLY"?ve.t("Bi-Week"):ve.t("Week")} ${n} - ${a}-${Eu(c)}-${Eu(s)} - ${h}-${Eu(p)}-${Eu(m)}`},sP=i=>{if(i==="YEARLY")return 1;const e=Op(i),t=Kl[e];return(t==null?void 0:t.value)||1},aP={1:"",2:"Feb",3:"March",4:"April",5:"May",6:"Jun",7:"July",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},oP=i=>{let{periodType:e,year:t,locale:r,calendar:n}=i;const a=sP(e),c=AZ({periodType:e,year:t,month:a}),s=a.toString().padStart(2,"0"),h=Fc({date:`${t}-${s}-01`,calendar:n}),p=Fc({date:`${t+1}-${s}-01`,calendar:n}).subtract({days:1}),m=PZ(e,h,{locale:r,calendar:n});return{periodType:e,id:c,iso:c,name:m,displayName:m,startDate:Xo(h,"startOfMonth"),endDate:Xo(p,"endOfMonth")}},AZ=i=>{let{periodType:e,year:t,month:r}=i;if(e==="YEARLY")return t.toString();if(IZ(e)){const n=aP[r];return`${t}${n}`}throw new Error(`can not build value for unrecognised yearly type "${e}"`)},IZ=i=>XY.includes(i),PZ=(i,e,t)=>{if(i==="YEARLY")return e.year.toString();if(qu(t.calendar))return DZ(e,t);const r={month:"long",year:"numeric",calendar:t.calendar},n=Xd.localiseMonth(e,t,r),a=Xd.localiseMonth(e.add({months:e.monthsInYear-1}),t,r);let c=`${n} - ${a}`;return c=c.replace(/ERA\d+\s*/g,"").trim(),c},DZ=(i,e)=>{const t=a=>`${Xd.localiseMonth(a,e,{})} ${a.year}`,r=Zn.PlainDate.from({year:i.year+1,month:i.month-1,day:1,calendar:e.calendar});return`${t(i)} - ${t(r)}`},RZ=i=>{let{year:e,calendar:t,periodType:r,endsBefore:n,yearsCount:a,locale:c}=i;const s=sP(r),h=Zn.PlainDate.from({year:e,month:s,day:t.toString()==="nepali"?14:1,calendar:t}),p=Zn.PlainDate.from({day:1,month:1,year:1970,calendar:"gregory"}).withCalendar(t),m=p.eraYear||p.year,y=[],g=a??e-m+1;for(let x=0;x<g;x++){const v=h.year-x,_=oP({periodType:r,year:v,locale:c,calendar:t});n&&K2({period:_,date:n,calendar:t})||y.push(_)}return y},c0=i=>{var e,t;let{periodType:r,year:n,endsBefore:a,calendar:c,locale:s="en",yearsCount:h=10,startingDay:p=1}=i,m;if(typeof n=="number")m=n;else if(!isNaN(n)&&!isNaN(parseInt(n)))m=parseInt(n);else throw new Error("year must be a number");const y=QI((e=XI[c])!==null&&e!==void 0?e:c),g=(t=JI(s))!==null&&t!==void 0?t:"en",x=a?Fc({calendar:y,date:a}):void 0;if(qY.includes(r))return CZ({year:m,periodType:r,calendar:y,startingDay:p,endsBefore:x});if(ZY.includes(r))return RZ({year:m,periodType:r,locale:g,calendar:y,endsBefore:x,yearsCount:h});if(eP.includes(r))return vZ({year:m,periodType:r,locale:g,calendar:y,endsBefore:x});if(r==="DAILY")return cZ({year:m,locale:g,calendar:y,endsBefore:x});throw new Error(`can not generate period for unrecognised period type "${r}"`)},LZ=new RegExp("^([0-9]{4})W([0-9]+)$"),NZ=new RegExp("^([0-9]{4})BiW([0-9]+)$"),zZ=new RegExp("^([0-9]{4})([A-Z][a-z]{2})W([0-9]+)$"),OZ=new RegExp("^([0-9]{4})([0-9]{2})$"),jZ=new RegExp("^([0-9]{4})([0-9]{2})B$"),FZ=new RegExp("^([0-9]{4})Q([0-9])$"),BZ=new RegExp("^([0-9]{4})([A-Z][a-z]+)Q([0-9])$"),$Z=new RegExp("^([0-9]{4})S([0-9])$"),UZ=new RegExp("^([0-9]{4})([A-Z][a-z]+)S([0-9])$"),VZ=new RegExp("^([0-9]{4})$"),GZ=new RegExp("^([0-9]{4})([A-Z][a-z]{2,})$"),HZ=Object.values(aP).slice(1).join("|"),qZ=new RegExp(`^[0-9]{4}(${HZ})?$`),WZ=i=>qZ.test(i),BE=Object.values(Kl).map(i=>{let{name:e}=i;return e}).join("|"),YZ=["^[0-9]{6}$","^[0-9]{6}B$",`^[0-9]{4}(${BE})?Q[0-9]$`,`^[0-9]{4}(${BE})?S[0-9]$`].join("|"),ZZ=new RegExp(YZ),XZ=i=>ZZ.test(i),KZ=i=>/^[0-9]{4}([A-Z][a-z]{2}|Bi)?W[0-9]+$/.test(i),QZ=i=>/^[0-9]{8}$/.test(i),JZ=i=>{if(OZ.test(i))return"MONTHLY";if(jZ.test(i))return"BIMONTHLY";if(FZ.test(i))return"QUARTERLY";const e=i.match(BZ);if(e){const r=e[2],n=Object.entries(Kl).find(c=>{let[,{name:s}]=c;return s===r});if(!n)throw new Error("@TODO");const[a]=n;return`QUARTERLY${a}`}if($Z.test(i))return"SIXMONTHLY";const t=i.match(UZ);if(t){const r=t[2],n=Object.entries(Kl).find(c=>{let[,{name:s}]=c;return s===r});if(!n)throw new Error("@TODO");const[a]=n;return`SIXMONTHLY${a}`}throw new Error(ve.t('Could not find a period type for period id "{{periodId}}"',{periodId:i}))},eX=i=>{if(LZ.test(i))return"WEEKLY";if(NZ.test(i))return"BIWEEKLY";const e=i.match(zZ);if(e){const[,,t]=e,r=`WEEKLY${t.toUpperCase()}`;if(!Ps.includes(r))throw new Error(ve.t('Could not determine a period type for period id "{{periodId}}"',{periodId:i}));return r}throw new Error(ve.t(`Couldn't find a period type for weekly period id "{{periodId}}"`,{periodId:i}))},tX=i=>{if(VZ.test(i))return"YEARLY";const e=i.match(GZ);if(e){const t=e[2].slice(0,3),r=Object.entries(Kl).find(a=>{let[,{name:c}]=a;return c.startsWith(t)});if(!r)throw new Error("@TODO");const[n]=r;return`FY${n}`}throw new Error(ve.t('Could not find a period type for period id "{{periodId}}"',{periodId:i}))},Q2=i=>{var e,t;let{periodId:r,calendar:n,locale:a="en"}=i;const c=QI((e=XI[n])!==null&&e!==void 0?e:n),s=(t=JI(a))!==null&&t!==void 0?t:"en";if(WZ(r)){const h=parseInt(r.substring(0,4),10),p=tX(r);return oP({year:h,periodType:p,calendar:c,locale:a})}if(XZ(r)){const h=JZ(r),p=parseInt(r.substring(0,4),10),y=c0({periodType:h,year:p,calendar:c,locale:s}).find(v=>{let{id:_}=v;return _===r});if(y)return y;const x=c0({year:p+1,periodType:h,calendar:c,locale:s}).slice(-1).find(v=>{let{id:_}=v;return _===r});if(!x)throw new Error(ve.t(`Couldn't find a monthly period for weekly period id "{{periodId}}"`,{periodId:r}));return x}if(KZ(r)){const h=parseInt(r.substring(0,4),10),p=eX(r),y=c0({year:h,periodType:p,calendar:c,locale:a}).find(x=>{let{id:v}=x;return v===r});if(y)return y;const[g]=c0({year:h-1,periodType:p,calendar:c,locale:a}).slice(-1);if(g.id===r)return g;throw new Error(ve.t(`Couldn't find a weekly period for weekly period id "{{periodId}}"`,{periodId:r}))}if(QZ(r)){const h=r.substring(0,4),p=r.substring(4,6),m=r.substring(6),y=Fc({date:`${h}-${p}-${m}`,calendar:c});return iP({date:y,locale:a,calendar:c})}throw new Error(ve.t(`Couldn't handle unknown period id "{{periodId}}"`,{periodId:r}))};RW(ph);OW(ph);NW(ph);const $E=(i,e)=>{const t=i.filter(n=>n.dataElement==="median").map(n=>[n.period,n.value]),r=i.filter(n=>n.dataElement==="quantile_low").map(n=>[n.period,n.value,i.filter(a=>a.dataElement==="quantile_high"&&a.period===n.period)[0].value]);return{title:{text:ve.t("Prediction for {{predictionTargetName}} for {{orgUnitName}}",{predictionTargetName:e,orgUnitName:i[0].displayName})},tooltip:{shared:!0},xAxis:{type:"category",labels:{enabled:!0,formatter:function(){return Q2({periodId:this.value.toString(),calendar:"gregory"}).displayName},style:{fontSize:"0.9rem"}}},yAxis:{title:{text:"Number of cases"}},credits:{text:"CHAP"},chart:{height:490,marginBottom:125},plotOptions:{series:{lineWidth:5}},series:[{type:"line",data:t,name:ve.t("Quantile median"),color:"#004bbd",zIndex:2},{type:"arearange",name:ve.t("Range"),data:r,zIndex:1,lineWidth:0,color:"#004bbd",fillOpacity:.4}]}};function iX(i){return[...new Set(i.map(t=>t.orgUnit))].map(t=>i.filter(r=>r.orgUnit===t))}const rX=({data:i,predictionTargetName:e})=>{const t=iX(i.dataValues),[r,n]=Ie.useState($E(t[0],e)),[a,c]=Ie.useState(0),s=h=>{c(h),n($E(t[h],e))};return de.createElement(de.Fragment,null,de.createElement("div",{className:s1.chartContainer},de.createElement("div",null,de.createElement(y_,{dense:!0},t.map((h,p)=>de.createElement(tn,{className:s1.menu,active:a==p,key:p,label:h[0].displayName,onClick:()=>s(p)})))),de.createElement("div",{className:s1.chart},de.createElement(ZI,{highcharts:ph,constructorType:"chart",options:r}))))};function um(i,e,t){return(e=nX(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function nX(i){var e=sX(i,"string");return typeof e=="symbol"?e:e+""}function sX(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class $w extends Error{constructor(e,t,r){super(r),um(this,"url",void 0),um(this,"status",void 0),um(this,"statusText",void 0),um(this,"body",void 0),um(this,"request",void 0),this.name="ApiError",this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.body=t.body,this.request=e}}function kd(i,e,t){aX(i,e),e.set(i,t)}function aX(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function cn(i,e){return i.get(lP(i,e))}function Il(i,e,t){return i.set(lP(i,e),t),t}function lP(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}class oX extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}}var cu=new WeakMap,uu=new WeakMap,Cc=new WeakMap,sp=new WeakMap,dm=new WeakMap,u0=new WeakMap,ap=new WeakMap;class cP{constructor(e){kd(this,cu,void 0),kd(this,uu,void 0),kd(this,Cc,void 0),kd(this,sp,void 0),kd(this,dm,void 0),kd(this,u0,void 0),kd(this,ap,void 0),Il(cu,this,!1),Il(uu,this,!1),Il(Cc,this,!1),Il(sp,this,[]),Il(dm,this,new Promise((t,r)=>{Il(u0,this,t),Il(ap,this,r);const n=s=>{cn(cu,this)||cn(uu,this)||cn(Cc,this)||(Il(cu,this,!0),cn(u0,this)&&cn(u0,this).call(this,s))},a=s=>{cn(cu,this)||cn(uu,this)||cn(Cc,this)||(Il(uu,this,!0),cn(ap,this)&&cn(ap,this).call(this,s))},c=s=>{cn(cu,this)||cn(uu,this)||cn(Cc,this)||cn(sp,this).push(s)};return Object.defineProperty(c,"isResolved",{get:()=>cn(cu,this)}),Object.defineProperty(c,"isRejected",{get:()=>cn(uu,this)}),Object.defineProperty(c,"isCancelled",{get:()=>cn(Cc,this)}),e(n,a,c)}))}get[Symbol.toStringTag](){return"Cancellable Promise"}then(e,t){return cn(dm,this).then(e,t)}catch(e){return cn(dm,this).catch(e)}finally(e){return cn(dm,this).finally(e)}cancel(){if(!(cn(cu,this)||cn(uu,this)||cn(Cc,this))){if(Il(Cc,this,!0),cn(sp,this).length)try{for(const e of cn(sp,this))e()}catch(e){console.warn("Cancellation threw an error",e);return}cn(sp,this).length=0,cn(ap,this)&&cn(ap,this).call(this,new oX("Request aborted"))}}get isCancelled(){return cn(Cc,this)}}const ji={BASE:"/v1",VERSION:"0.1.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0};let Ss=function(i){return i.GRAY="gray",i.RED="red",i.ORANGE="orange",i.YELLOW="yellow",i.GREEN="green",i}({}),du=function(i){return i.WEEK="week",i.MONTH="month",i.ANY="any",i.YEAR="year",i}({});var uP={exports:{}};(function(i){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function n(h,p,m){this.fn=h,this.context=p,this.once=m||!1}function a(h,p,m,y,g){if(typeof m!="function")throw new TypeError("The listener must be a function");var x=new n(m,y||h,g),v=t?t+p:p;return h._events[v]?h._events[v].fn?h._events[v]=[h._events[v],x]:h._events[v].push(x):(h._events[v]=x,h._eventsCount++),h}function c(h,p){--h._eventsCount===0?h._events=new r:delete h._events[p]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var p=[],m,y;if(this._eventsCount===0)return p;for(y in m=this._events)e.call(m,y)&&p.push(t?y.slice(1):y);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(m)):p},s.prototype.listeners=function(p){var m=t?t+p:p,y=this._events[m];if(!y)return[];if(y.fn)return[y.fn];for(var g=0,x=y.length,v=new Array(x);g<x;g++)v[g]=y[g].fn;return v},s.prototype.listenerCount=function(p){var m=t?t+p:p,y=this._events[m];return y?y.fn?1:y.length:0},s.prototype.emit=function(p,m,y,g,x,v){var _=t?t+p:p;if(!this._events[_])return!1;var C=this._events[_],k=arguments.length,w,E;if(C.fn){switch(C.once&&this.removeListener(p,C.fn,void 0,!0),k){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,m),!0;case 3:return C.fn.call(C.context,m,y),!0;case 4:return C.fn.call(C.context,m,y,g),!0;case 5:return C.fn.call(C.context,m,y,g,x),!0;case 6:return C.fn.call(C.context,m,y,g,x,v),!0}for(E=1,w=new Array(k-1);E<k;E++)w[E-1]=arguments[E];C.fn.apply(C.context,w)}else{var A=C.length,M;for(E=0;E<A;E++)switch(C[E].once&&this.removeListener(p,C[E].fn,void 0,!0),k){case 1:C[E].fn.call(C[E].context);break;case 2:C[E].fn.call(C[E].context,m);break;case 3:C[E].fn.call(C[E].context,m,y);break;case 4:C[E].fn.call(C[E].context,m,y,g);break;default:if(!w)for(M=1,w=new Array(k-1);M<k;M++)w[M-1]=arguments[M];C[E].fn.apply(C[E].context,w)}}return!0},s.prototype.on=function(p,m,y){return a(this,p,m,y,!1)},s.prototype.once=function(p,m,y){return a(this,p,m,y,!0)},s.prototype.removeListener=function(p,m,y,g){var x=t?t+p:p;if(!this._events[x])return this;if(!m)return c(this,x),this;var v=this._events[x];if(v.fn)v.fn===m&&(!g||v.once)&&(!y||v.context===y)&&c(this,x);else{for(var _=0,C=[],k=v.length;_<k;_++)(v[_].fn!==m||g&&!v[_].once||y&&v[_].context!==y)&&C.push(v[_]);C.length?this._events[x]=C.length===1?C[0]:C:c(this,x)}return this},s.prototype.removeAllListeners=function(p){var m;return p?(m=t?t+p:p,this._events[m]&&c(this,m)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=t,s.EventEmitter=s,i.exports=s})(uP);var lX=uP.exports;const cX=Hu(lX);class dP extends Error{constructor(e){super(e),this.name="TimeoutError"}}class uX extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const UE=i=>globalThis.DOMException===void 0?new uX(i):new DOMException(i),VE=i=>{const e=i.reason===void 0?UE("This operation was aborted."):i.reason;return e instanceof Error?e:UE(e)};function dX(i,e){const{milliseconds:t,fallback:r,message:n,customTimers:a={setTimeout,clearTimeout}}=e;let c,s;const p=new Promise((m,y)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(e.signal){const{signal:x}=e;x.aborted&&y(VE(x)),s=()=>{y(VE(x))},x.addEventListener("abort",s,{once:!0})}if(t===Number.POSITIVE_INFINITY){i.then(m,y);return}const g=new dP;c=a.setTimeout.call(void 0,()=>{if(r){try{m(r())}catch(x){y(x)}return}typeof i.cancel=="function"&&i.cancel(),n===!1?m():n instanceof Error?y(n):(g.message=n??`Promise timed out after ${t} milliseconds`,y(g))},t),(async()=>{try{m(await i)}catch(x){y(x)}})()}).finally(()=>{p.clear(),s&&e.signal&&e.signal.removeEventListener("abort",s)});return p.clear=()=>{a.clearTimeout.call(void 0,c),c=void 0},p}function hX(i,e,t){let r=0,n=i.length;for(;n>0;){const a=Math.trunc(n/2);let c=r+a;t(i[c],e)<=0?(r=++c,n-=a+1):n=a}return r}var Ho;class pX{constructor(){Ws(this,Ho,[])}enqueue(e,t){t={priority:0,...t};const r={priority:t.priority,id:t.id,run:e};if(this.size===0||Bi(this,Ho)[this.size-1].priority>=t.priority){Bi(this,Ho).push(r);return}const n=hX(Bi(this,Ho),r,(a,c)=>c.priority-a.priority);Bi(this,Ho).splice(n,0,r)}setPriority(e,t){const r=Bi(this,Ho).findIndex(a=>a.id===e);if(r===-1)throw new ReferenceError(`No promise function with the id "${e}" exists in the queue.`);const[n]=Bi(this,Ho).splice(r,1);this.enqueue(n.run,{priority:t,id:e})}dequeue(){const e=Bi(this,Ho).shift();return e==null?void 0:e.run}filter(e){return Bi(this,Ho).filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return Bi(this,Ho).length}}Ho=new WeakMap;var Sp,Ep,Cu,fg,kp,mg,qo,Mp,Ha,gg,Wo,Ap,Pc,yg,zv,Jr,hP,pP,fP,mP,gP,j0,Uw,Vw,F0,yP,B0;class fX extends cX{constructor(t){var r,n;super();Ws(this,Jr);Ws(this,Sp);Ws(this,Ep);Ws(this,Cu,0);Ws(this,fg);Ws(this,kp);Ws(this,mg,0);Ws(this,qo);Ws(this,Mp);Ws(this,Ha);Ws(this,gg);Ws(this,Wo,0);Ws(this,Ap);Ws(this,Pc);Ws(this,yg);Ws(this,zv,1n);Ci(this,"timeout");if(t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:pX,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${((r=t.intervalCap)==null?void 0:r.toString())??""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${((n=t.interval)==null?void 0:n.toString())??""}\` (${typeof t.interval})`);rs(this,Sp,t.carryoverConcurrencyCount),rs(this,Ep,t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0),rs(this,fg,t.intervalCap),rs(this,kp,t.interval),rs(this,Ha,new t.queueClass),rs(this,gg,t.queueClass),this.concurrency=t.concurrency,this.timeout=t.timeout,rs(this,yg,t.throwOnTimeout===!0),rs(this,Pc,t.autoStart===!1)}get concurrency(){return Bi(this,Ap)}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);rs(this,Ap,t),sa(this,Jr,F0).call(this)}setPriority(t,r){Bi(this,Ha).setPriority(t,r)}async add(t,r={}){return r.id??(r.id=(tm(this,zv)._++).toString()),r={timeout:this.timeout,throwOnTimeout:Bi(this,yg),...r},new Promise((n,a)=>{Bi(this,Ha).enqueue(async()=>{var c;tm(this,Wo)._++,tm(this,Cu)._++;try{(c=r.signal)==null||c.throwIfAborted();let s=t({signal:r.signal});r.timeout&&(s=dX(Promise.resolve(s),{milliseconds:r.timeout})),r.signal&&(s=Promise.race([s,sa(this,Jr,yP).call(this,r.signal)]));const h=await s;n(h),this.emit("completed",h)}catch(s){if(s instanceof dP&&!r.throwOnTimeout){n();return}a(s),this.emit("error",s)}finally{sa(this,Jr,fP).call(this)}},r),this.emit("add"),sa(this,Jr,j0).call(this)})}async addAll(t,r){return Promise.all(t.map(async n=>this.add(n,r)))}start(){return Bi(this,Pc)?(rs(this,Pc,!1),sa(this,Jr,F0).call(this),this):this}pause(){rs(this,Pc,!0)}clear(){rs(this,Ha,new(Bi(this,gg)))}async onEmpty(){Bi(this,Ha).size!==0&&await sa(this,Jr,B0).call(this,"empty")}async onSizeLessThan(t){Bi(this,Ha).size<t||await sa(this,Jr,B0).call(this,"next",()=>Bi(this,Ha).size<t)}async onIdle(){Bi(this,Wo)===0&&Bi(this,Ha).size===0||await sa(this,Jr,B0).call(this,"idle")}get size(){return Bi(this,Ha).size}sizeBy(t){return Bi(this,Ha).filter(t).length}get pending(){return Bi(this,Wo)}get isPaused(){return Bi(this,Pc)}}Sp=new WeakMap,Ep=new WeakMap,Cu=new WeakMap,fg=new WeakMap,kp=new WeakMap,mg=new WeakMap,qo=new WeakMap,Mp=new WeakMap,Ha=new WeakMap,gg=new WeakMap,Wo=new WeakMap,Ap=new WeakMap,Pc=new WeakMap,yg=new WeakMap,zv=new WeakMap,Jr=new WeakSet,hP=function(){return Bi(this,Ep)||Bi(this,Cu)<Bi(this,fg)},pP=function(){return Bi(this,Wo)<Bi(this,Ap)},fP=function(){tm(this,Wo)._--,sa(this,Jr,j0).call(this),this.emit("next")},mP=function(){sa(this,Jr,Vw).call(this),sa(this,Jr,Uw).call(this),rs(this,Mp,void 0)},gP=function(){const t=Date.now();if(Bi(this,qo)===void 0){const r=Bi(this,mg)-t;if(r<0)rs(this,Cu,Bi(this,Sp)?Bi(this,Wo):0);else return Bi(this,Mp)===void 0&&rs(this,Mp,setTimeout(()=>{sa(this,Jr,mP).call(this)},r)),!0}return!1},j0=function(){if(Bi(this,Ha).size===0)return Bi(this,qo)&&clearInterval(Bi(this,qo)),rs(this,qo,void 0),this.emit("empty"),Bi(this,Wo)===0&&this.emit("idle"),!1;if(!Bi(this,Pc)){const t=!Bi(this,Jr,gP);if(Bi(this,Jr,hP)&&Bi(this,Jr,pP)){const r=Bi(this,Ha).dequeue();return r?(this.emit("active"),r(),t&&sa(this,Jr,Uw).call(this),!0):!1}}return!1},Uw=function(){Bi(this,Ep)||Bi(this,qo)!==void 0||(rs(this,qo,setInterval(()=>{sa(this,Jr,Vw).call(this)},Bi(this,kp))),rs(this,mg,Date.now()+Bi(this,kp)))},Vw=function(){Bi(this,Cu)===0&&Bi(this,Wo)===0&&Bi(this,qo)&&(clearInterval(Bi(this,qo)),rs(this,qo,void 0)),rs(this,Cu,Bi(this,Sp)?Bi(this,Wo):0),sa(this,Jr,F0).call(this)},F0=function(){for(;sa(this,Jr,j0).call(this););},yP=async function(t){return new Promise((r,n)=>{t.addEventListener("abort",()=>{n(t.reason)},{once:!0})})},B0=async function(t,r){return new Promise(n=>{const a=()=>{r&&!r()||(this.off(t,a),n())};this.on(t,a)})};const J2=i=>i!=null,Vg=i=>typeof i=="string",l1=i=>Vg(i)&&i!=="",eC=i=>typeof i=="object"&&typeof i.type=="string"&&typeof i.stream=="function"&&typeof i.arrayBuffer=="function"&&typeof i.constructor=="function"&&typeof i.constructor.name=="string"&&/^(Blob|File)$/.test(i.constructor.name)&&/^(Blob|File)$/.test(i[Symbol.toStringTag]),vP=i=>i instanceof FormData,mX=i=>{try{return btoa(i)}catch{return Buffer.from(i).toString("base64")}},gX=i=>{const e=[],t=(n,a)=>{e.push(`${encodeURIComponent(n)}=${encodeURIComponent(String(a))}`)},r=(n,a)=>{J2(a)&&(Array.isArray(a)?a.forEach(c=>{r(n,c)}):typeof a=="object"?Object.entries(a).forEach(([c,s])=>{r(`${n}[${c}]`,s)}):t(n,a))};return Object.entries(i).forEach(([n,a])=>{r(n,a)}),e.length>0?`?${e.join("&")}`:""},yX=(i,e)=>{const t=i.ENCODE_PATH||encodeURI,r=e.url.replace("{api-version}",i.VERSION).replace(/{(.*?)}/g,(a,c)=>{var s;return(s=e.path)!==null&&s!==void 0&&s.hasOwnProperty(c)?t(String(e.path[c])):a}),n=`${i.BASE}${r}`;return e.query?`${n}${gX(e.query)}`:n},vX=i=>{if(i.formData){const e=new FormData,t=(r,n)=>{Vg(n)||eC(n)?e.append(r,n):e.append(r,JSON.stringify(n))};return Object.entries(i.formData).filter(([r,n])=>J2(n)).forEach(([r,n])=>{Array.isArray(n)?n.forEach(a=>t(r,a)):t(r,n)}),e}},d0=async(i,e)=>typeof e=="function"?e(i):e,xX=async(i,e)=>{const[t,r,n,a]=await Promise.all([d0(e,i.TOKEN),d0(e,i.USERNAME),d0(e,i.PASSWORD),d0(e,i.HEADERS)]),c=Object.entries({Accept:"application/json",...a,...e.headers}).filter(([s,h])=>J2(h)).reduce((s,[h,p])=>({...s,[h]:String(p)}),{});if(l1(t)&&(c.Authorization=`Bearer ${t}`),l1(r)&&l1(n)){const s=mX(`${r}:${n}`);c.Authorization=`Basic ${s}`}return e.body!==void 0&&(e.mediaType?c["Content-Type"]=e.mediaType:eC(e.body)?c["Content-Type"]=e.body.type||"application/octet-stream":Vg(e.body)?c["Content-Type"]="text/plain":vP(e.body)||(c["Content-Type"]="application/json")),new Headers(c)},bX=i=>{if(i.body!==void 0){var e;return(e=i.mediaType)!==null&&e!==void 0&&e.includes("/json")?JSON.stringify(i.body):Vg(i.body)||eC(i.body)||vP(i.body)?i.body:JSON.stringify(i.body)}},wX=async(i,e,t,r,n,a,c)=>{const s=new AbortController,h={headers:a,body:r??n,method:e.method,signal:s.signal};return i.WITH_CREDENTIALS&&(h.credentials=i.CREDENTIALS),c(()=>s.abort()),await fetch(t,h)},_X=(i,e)=>{if(e){const t=i.headers.get(e);if(Vg(t))return t}},CX=async i=>{if(i.status!==204)try{const e=i.headers.get("Content-Type");if(e)return["application/json","application/problem+json"].some(n=>e.toLowerCase().startsWith(n))?await i.json():await i.text()}catch(e){console.error(e)}},TX=(i,e)=>{const r={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...i.errors}[e.status];if(r)throw new $w(i,e,r);if(!e.ok){var n,a;const c=(n=e.status)!==null&&n!==void 0?n:"unknown",s=(a=e.statusText)!==null&&a!==void 0?a:"unknown",h=(()=>{try{return JSON.stringify(e.body,null,2)}catch{return}})();throw new $w(i,e,`Generic Error: status: ${c}; status text: ${s}; body: ${h}`)}},SX=(i,e)=>new cP(async(t,r,n)=>{try{const a=yX(i,e),c=vX(e),s=bX(e),h=await xX(i,e);if(!n.isCancelled){const p=await wX(i,e,a,s,c,h,n),m=await CX(p),y=_X(p,e.responseHeader),g={url:a,ok:p.ok,status:p.status,statusText:p.statusText,body:y??m};TX(e,g),t(g.body)}}catch(a){r(a)}});let ku;const EX={concurrency:2},kX=i=>ku||(console.log("Enabling request queue with options",i),ku=new fX({...EX,...i}),ku),MX=()=>ku,$i=(i,e)=>{const t=SX.bind(null,i,e);return e.method==="GET"&&ku!==void 0?new cP(async(r,n,a)=>{const c=new AbortController;if(!ku){const s=t();return a(()=>{c.abort(),s.cancel()}),s}return ku.add(()=>{const s=t();return a(()=>{s.cancel(),c.abort()}),s.then(h=>r(h)).catch(h=>n(h))},{signal:c.signal})}):t()};class yl{static makeDatasetAnalyticsMakeDatasetPost(e){return $i(ji,{method:"POST",url:"/analytics/make-dataset",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getCompatibleBacktestsAnalyticsCompatibleBacktestsBacktestIdGet(e){return $i(ji,{method:"GET",url:"/analytics/compatible-backtests/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static getBacktestOverlapAnalyticsBacktestOverlapBacktestId1BacktestId2Get(e,t){return $i(ji,{method:"GET",url:"/analytics/backtest-overlap/{backtestId1}/{backtestId2}",path:{backtestId1:e,backtestId2:t},errors:{422:"Validation Error"}})}static getEvaluationEntriesAnalyticsEvaluationEntryGet(e,t,r,n){return $i(ji,{method:"GET",url:"/analytics/evaluation-entry",query:{backtestId:e,quantiles:t,splitPeriod:r,orgUnits:n},errors:{422:"Validation Error"}})}static createBacktestAnalyticsCreateBacktestPost(e){return $i(ji,{method:"POST",url:"/analytics/create-backtest",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static makePredictionAnalyticsMakePredictionPost(e){return $i(ji,{method:"POST",url:"/analytics/make-prediction",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getPredictionEntriesAnalyticsPredictionEntryPredictionIdGet(e,t){return $i(ji,{method:"GET",url:"/analytics/prediction-entry/{predictionId}",path:{predictionId:e},query:{quantiles:t},errors:{422:"Validation Error"}})}static getActualCasesAnalyticsActualCasesBacktestIdGet(e,t){return $i(ji,{method:"GET",url:"/analytics/actualCases/{backtestId}",path:{backtestId:e},query:{orgUnits:t},errors:{422:"Validation Error"}})}static getDataSourcesAnalyticsDataSourcesGet(){return $i(ji,{method:"GET",url:"/analytics/data-sources"})}static createBacktestWithDataAnalyticsCreateBacktestWithDataPost(e,t=!1){return $i(ji,{method:"POST",url:"/analytics/create-backtest-with-data/",query:{dryRun:t},body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}}class ea{static getBacktestsCrudBacktestsGet(){return $i(ji,{method:"GET",url:"/crud/backtests"})}static createBacktestCrudBacktestsPost(e){return $i(ji,{method:"POST",url:"/crud/backtests",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static deleteBacktestBatchCrudBacktestsDelete(e){return $i(ji,{method:"DELETE",url:"/crud/backtests",query:{ids:e},errors:{422:"Validation Error"}})}static getBacktestCrudBacktestsBacktestIdGet(e){return $i(ji,{method:"GET",url:"/crud/backtests/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static deleteBacktestCrudBacktestsBacktestIdDelete(e){return $i(ji,{method:"DELETE",url:"/crud/backtests/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static updateBacktestCrudBacktestsBacktestIdPatch(e,t){return $i(ji,{method:"PATCH",url:"/crud/backtests/{backtestId}",path:{backtestId:e},body:t,mediaType:"application/json",errors:{422:"Validation Error"}})}static getPredictionsCrudPredictionsGet(){return $i(ji,{method:"GET",url:"/crud/predictions"})}static createPredictionCrudPredictionsPost(e){return $i(ji,{method:"POST",url:"/crud/predictions",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getPredictionCrudPredictionsPredictionIdGet(e){return $i(ji,{method:"GET",url:"/crud/predictions/{predictionId}",path:{predictionId:e},errors:{422:"Validation Error"}})}static deletePredictionCrudPredictionsPredictionIdDelete(e){return $i(ji,{method:"DELETE",url:"/crud/predictions/{predictionId}",path:{predictionId:e},errors:{422:"Validation Error"}})}static getDatasetsCrudDatasetsGet(){return $i(ji,{method:"GET",url:"/crud/datasets"})}static createDatasetCrudDatasetsPost(e){return $i(ji,{method:"POST",url:"/crud/datasets",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getDatasetCrudDatasetsDatasetIdGet(e){return $i(ji,{method:"GET",url:"/crud/datasets/{datasetId}",path:{datasetId:e},errors:{422:"Validation Error"}})}static deleteDatasetCrudDatasetsDatasetIdDelete(e){return $i(ji,{method:"DELETE",url:"/crud/datasets/{datasetId}",path:{datasetId:e},errors:{422:"Validation Error"}})}static createDatasetCsvCrudDatasetsCsvFilePost(e){return $i(ji,{method:"POST",url:"/crud/datasets/csvFile",formData:e,mediaType:"multipart/form-data",errors:{422:"Validation Error"}})}static listModelTemplatesCrudModelTemplatesGet(){return $i(ji,{method:"GET",url:"/crud/model-templates"})}static listConfiguredModelsCrudConfiguredModelsGet(){return $i(ji,{method:"GET",url:"/crud/configured-models"})}static addConfiguredModelCrudConfiguredModelsPost(e){return $i(ji,{method:"POST",url:"/crud/configured-models",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static listModelsCrudModelsGet(){return $i(ji,{method:"GET",url:"/crud/models"})}static addModelCrudModelsPost(e){return $i(ji,{method:"POST",url:"/crud/models",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static debugEntryCrudDebugPost(){return $i(ji,{method:"POST",url:"/crud/debug"})}static getDebugEntryCrudDebugDebugIdGet(e){return $i(ji,{method:"GET",url:"/crud/debug/{debugId}",path:{debugId:e},errors:{422:"Validation Error"}})}}class xP{static faviconfaviconIcoGet(){return $i(ji,{method:"GET",url:"favicon.ico"})}static predictPredictPost(e){return $i(ji,{method:"POST",url:"/predict",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static evaluateEvaluatePost(e,t,r=1){return $i(ji,{method:"POST",url:"/evaluate",query:{n_splits:t,stride:r},body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static listModelsListModelsGet(){return $i(ji,{method:"GET",url:"/list-models"})}static listFeaturesListFeaturesGet(){return $i(ji,{method:"GET",url:"/list-features"})}static getResultsGetResultsGet(){return $i(ji,{method:"GET",url:"/get-results"})}static getEvaluationResultsGetEvaluationResultsGet(){return $i(ji,{method:"GET",url:"/get-evaluation-results"})}static getExceptionGetExceptionGet(){return $i(ji,{method:"GET",url:"/get-exception"})}static cancelCancelPost(){return $i(ji,{method:"POST",url:"/cancel"})}static getStatusStatusGet(){return $i(ji,{method:"GET",url:"/status"})}static healthHealthGet(){return $i(ji,{method:"GET",url:"/health"})}static versionVersionGet(){return $i(ji,{method:"GET",url:"/version"})}static isCompatibleIsCompatibleGet(e){return $i(ji,{method:"GET",url:"/is-compatible",query:{modelling_app_version:e},errors:{422:"Validation Error"}})}static systemInfoSystemInfoGet(){return $i(ji,{method:"GET",url:"/system-info"})}}class Bu{static listJobsJobsGet(e,t,r){return $i(ji,{method:"GET",url:"/jobs",query:{ids:e,status:t,type:r},errors:{422:"Validation Error"}})}static getJobStatusJobsJobIdGet(e){return $i(ji,{method:"GET",url:"/jobs/{job_id}",path:{job_id:e},errors:{422:"Validation Error"}})}static deleteJobJobsJobIdDelete(e){return $i(ji,{method:"DELETE",url:"/jobs/{job_id}",path:{job_id:e},errors:{422:"Validation Error"}})}static cancelJobJobsJobIdCancelPost(e){return $i(ji,{method:"POST",url:"/jobs/{job_id}/cancel",path:{job_id:e},errors:{422:"Validation Error"}})}static getLogsJobsJobIdLogsGet(e){return $i(ji,{method:"GET",url:"/jobs/{job_id}/logs",path:{job_id:e},errors:{422:"Validation Error"}})}static getPredictionResultJobsJobIdPredictionResultGet(e){return $i(ji,{method:"GET",url:"/jobs/{job_id}/prediction_result",path:{job_id:e},errors:{422:"Validation Error"}})}static getEvaluationResultJobsJobIdEvaluationResultGet(e){return $i(ji,{method:"GET",url:"/jobs/{job_id}/evaluation_result",path:{job_id:e},errors:{422:"Validation Error"}})}static getDatabaseResultJobsJobIdDatabaseResultGet(e){return $i(ji,{method:"GET",url:"/jobs/{job_id}/database_result",path:{job_id:e},errors:{422:"Validation Error"}})}}function bP(i,e){const t=r=>{if(r.includes("W")){const[n,a]=r.split("W").map(Number),c=new Date(n,0,1),s=(a-1)*7;return new Date(c.setDate(c.getDate()+s))}else{const n=Number(r.slice(0,4)),a=Number(r.slice(4,6))-1;return new Date(n,a)}};return t(i).getTime()-t(e).getTime()}function wP(i,e){var t;const r=e.map(x=>x.pe).sort(bP),n=r.map(x=>{var v,_;return(v=(_=e.find(C=>C.pe===x))===null||_===void 0?void 0:_.value)!==null&&v!==void 0?v:null}),a=(x,v)=>{if(!v)return new Map;const _=new Map;for(let C=0;C<x.length;C++)_.set(x[C],v[C]);return _},c=a(i.periods,i.averages.slice()),s=a(i.periods,i.ranges.slice()),h=a(i.periods,(t=i.midranges)===null||t===void 0?void 0:t.slice()),p=(x,v)=>x.map(_=>{var C;return(C=v.get(_))!==null&&C!==void 0?C:null}),m=p(r,c),y=p(r,s),g=p(r,h);return{periods:r,ranges:y,averages:m,realValues:n,midranges:g}}const AX=(i,e,t)=>{const r=Array.from(new Set(i.map(m=>m.quantile))).sort(),n=r[0],a=r[1],c=r[r.length-2],s=r[r.length-1],h=m=>m.quantile===n?"quantile_low":m.quantile===s?"quantile_high":m.quantile===.5?"median":m.quantile===a?"quantile_mid_low":m.quantile===c?"quantile_mid_high":"unknown",p=Array.from(new Set(i.map(m=>m.modelName||t)));return Array.from(new Set(i.map(m=>m.splitPeriod))).map(m=>({splitPoint:m,evaluation:Array.from(new Set(i.map(y=>y.orgUnit))).map(y=>({orgUnitName:y,orgUnitId:y,models:p.map(g=>{const x=_P(i.filter(_=>_.orgUnit===y&&_.splitPeriod===m&&((_==null?void 0:_.modelName)||t)===g),h),v=wP(x,e.filter(_=>_.ou===y));return{modelName:g,data:v}})}))}))};function _P(i,e){const t=Array.from(new Set(i.map(s=>s.period))).sort(bP),r=[],n=[],a=[];return t.forEach(s=>{var h,p,m,y,g;const x=((h=i.find(w=>w.period===s&&e(w)==="quantile_low"))===null||h===void 0?void 0:h.value)||0,v=((p=i.find(w=>w.period===s&&e(w)==="quantile_high"))===null||p===void 0?void 0:p.value)||0,_=((m=i.find(w=>w.period===s&&e(w)==="median"))===null||m===void 0?void 0:m.value)||0,C=((y=i.find(w=>w.period===s&&e(w)==="quantile_mid_high"))===null||y===void 0?void 0:y.value)||0,k=((g=i.find(w=>w.period===s&&e(w)==="quantile_mid_low"))===null||g===void 0?void 0:g.value)||0;r.push([x,v]),n.push([_]),a.push([k,C])}),{periods:t,ranges:r,averages:n,midranges:a}}function CP(i){return Array.from(new Set(i.map(e=>e.splitPeriod)))}const IX=i=>{const{enabled:e,wrapperClassName:t,children:r,...n}=i;return e?de.createElement(Gl,n,({onMouseOver:a,onMouseOut:c,ref:s})=>de.createElement("span",{className:t,ref:h=>{h&&(h.onpointerenter=a,h.onpointerleave=c,s.current=h)}},r)):r},TP=i=>{if(!i)return"NA";if(i.length==4)return i;if(i.includes("W")){const e=i.match(/(\d{4})W(\d{1,2})/);if(!e||e.length<3)return i;const[t,r]=e.slice(1,3);return`Week ${r.replace(/ˆ0/,"")} ${t}`}if(i.length==6){const e=i.slice(0,4),t=i.slice(4,6);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(t)-1]} ${e}`}return i};var SP={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function r(n,a,c,s){n.hasOwnProperty(a)||(n[a]=s.apply(null,c),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:a,module:n[a]}})))}r(t,"Extensions/DownloadURL.js",[t["Core/Globals.js"]],function(n){let{isSafari:a,win:c,win:{document:s}}=n,h=c.URL||c.webkitURL||c;function p(m){let y=m.replace(/filename=.*;/,"").match(/data:([^;]*)(;base64)?,([A-Z+\d\/]+)/i);if(y&&y.length>3&&c.atob&&c.ArrayBuffer&&c.Uint8Array&&c.Blob&&h.createObjectURL){let g=c.atob(y[3]),x=new c.ArrayBuffer(g.length),v=new c.Uint8Array(x);for(let _=0;_<v.length;++_)v[_]=g.charCodeAt(_);return h.createObjectURL(new c.Blob([v],{type:y[1]}))}}return{dataURLtoBlob:p,downloadURL:function(m,y){let g=c.navigator,x=s.createElement("a");if(typeof m!="string"&&!(m instanceof String)&&g.msSaveOrOpenBlob){g.msSaveOrOpenBlob(m,y);return}if(m=""+m,g.userAgent.length>1e3)throw Error("Input too long");let v=/Edge\/\d+/.test(g.userAgent);if((a&&typeof m=="string"&&m.indexOf("data:application/pdf")===0||v||m.length>2e6)&&!(m=p(m)||""))throw Error("Failed to convert to blob");if(x.download!==void 0)x.href=m,x.download=y,s.body.appendChild(x),x.click(),s.body.removeChild(x);else try{if(!c.open(m,"chart"))throw Error("Failed to open window")}catch{c.location.href=m}}}}),r(t,"Extensions/OfflineExporting/OfflineExportingDefaults.js",[],function(){return{libURL:"https://code.highcharts.com/11.4.8/lib/",menuItemDefinitions:{downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChartLocal()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChartLocal({type:"image/jpeg"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChartLocal({type:"image/svg+xml"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChartLocal({type:"application/pdf"})}}}}}),r(t,"Extensions/OfflineExporting/OfflineExporting.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Chart/Chart.js"],t["Core/Defaults.js"],t["Extensions/DownloadURL.js"],t["Extensions/Exporting/Exporting.js"],t["Core/Globals.js"],t["Core/HttpUtilities.js"],t["Extensions/OfflineExporting/OfflineExportingDefaults.js"],t["Core/Utilities.js"]],function(n,a,c,s,h,p,m,y,g){var x;let{defaultOptions:v}=c,{downloadURL:_}=s,{doc:C,win:k}=p,{ajax:w}=m,{addEvent:E,error:A,extend:M,fireEvent:S,merge:N}=g;return n.allowedAttributes.push("data-z-index","fill-opacity","filter","rx","ry","stroke-dasharray","stroke-linejoin","stroke-opacity","text-anchor","transform","version","viewBox","visibility","xmlns","xmlns:xlink"),n.allowedTags.push("desc","clippath","g"),function(Y){function Z(L,G){let F=this,j=N(F.options.exporting,L),q=function(W){j.fallbackToExportServer===!1?j.error?j.error(j,W):A(28,!0):F.exportChart(j)};if(p.isMS&&F.styledMode&&!h.inlineAllowlist.length&&h.inlineAllowlist.push(/^blockSize/,/^border/,/^caretColor/,/^color/,/^columnRule/,/^columnRuleColor/,/^cssFloat/,/^cursor/,/^fill$/,/^fillOpacity/,/^font/,/^inlineSize/,/^length/,/^lineHeight/,/^opacity/,/^outline/,/^parentRule/,/^rx$/,/^ry$/,/^stroke/,/^textAlign/,/^textAnchor/,/^textDecoration/,/^transform/,/^vectorEffect/,/^visibility/,/^x$/,/^y$/),p.isMS&&(j.type==="application/pdf"||F.container.getElementsByTagName("image").length&&j.type!=="image/svg+xml")||j.type==="application/pdf"&&[].some.call(F.container.getElementsByTagName("image"),function(W){let se=W.getAttribute("href");return se!==""&&typeof se=="string"&&se.indexOf("data:")!==0})){q(Error("Image type not supported for this chart/browser."));return}F.getSVGForLocalExport(j,G||{},q,function(W){W.indexOf("<foreignObject")>-1&&j.type!=="image/svg+xml"&&(p.isMS||j.type==="application/pdf")?q(Error("Image type not supported for charts with embedded HTML")):Y.downloadSVGLocal(W,M({filename:F.getFilename()},j),q,()=>S(F,"exportChartLocalSuccess"))})}function K(L,G){let F=C.getElementsByTagName("head")[0],j=C.createElement("script");j.type="text/javascript",j.src=L,j.onload=G,j.onerror=function(){A("Error loading script "+L)},F.appendChild(j)}function U(L,G,F,j){let q=this,W=le=>q.sanitizeSVG(le,Ce),se=()=>{Ee&&ie===J&&j(W(oe.innerHTML))},fe=(le,be,te)=>{++ie,te.imageElement.setAttributeNS("http://www.w3.org/1999/xlink","href",le),se()},ee,oe,Ce,ge=null,Ee,J=0,ie=0;q.unbindGetSVG=E(q,"getSVG",le=>{Ce=le.chartCopy.options,J=(Ee=(oe=le.chartCopy.container.cloneNode(!0))&&oe.getElementsByTagName("image")||[]).length}),q.getSVGForExport(L,G);try{if(!Ee||!Ee.length){j(W(oe.innerHTML));return}for(let le=0;le<Ee.length;le++)(ge=(ee=Ee[le]).getAttributeNS("http://www.w3.org/1999/xlink","href"))?Y.imageToDataUrl(ge,"image/png",{imageElement:ee},L.scale,fe,F,F,F):(ie++,ee.parentNode.removeChild(ee),le--,se())}catch(le){F(le)}q.unbindGetSVG()}function $(L,G,F,j,q,W,se,fe,ee){let oe=new k.Image,Ce,ge=()=>{setTimeout(function(){let J,ie=C.createElement("canvas"),le=ie.getContext&&ie.getContext("2d");try{if(le){ie.height=oe.height*j,ie.width=oe.width*j,le.drawImage(oe,0,0,ie.width,ie.height);try{J=ie.toDataURL(G),q(J,G,F,j)}catch{Ce(L,G,F,j)}}else se(L,G,F,j)}finally{ee&&ee(L,G,F,j)}},Y.loadEventDeferDelay)},Ee=()=>{fe(L,G,F,j),ee&&ee(L,G,F,j)};Ce=()=>{oe=new k.Image,Ce=W,oe.crossOrigin="Anonymous",oe.onload=ge,oe.onerror=Ee,oe.src=L},oe.onload=ge,oe.onerror=Ee,oe.src=L}function B(L){let G=k.navigator.userAgent,F=G.indexOf("WebKit")>-1&&0>G.indexOf("Chrome");try{if(!F&&L.indexOf("<foreignObject")===-1)return Y.domurl.createObjectURL(new k.Blob([L],{type:"image/svg+xml;charset-utf-16"}))}catch{}return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(L)}function R(L,G,F,j){let q=(Number(L.getAttribute("width"))+2*G)*F,W=(Number(L.getAttribute("height"))+2*G)*F,se=new k.jspdf.jsPDF(W>q?"p":"l","pt",[q,W]);[].forEach.call(L.querySelectorAll('*[visibility="hidden"]'),function(ee){ee.parentNode.removeChild(ee)});let fe=L.querySelectorAll("linearGradient");for(let ee=0;ee<fe.length;ee++){let oe=fe[ee].querySelectorAll("stop"),Ce=0;for(;Ce<oe.length&&oe[Ce].getAttribute("offset")==="0"&&oe[Ce+1].getAttribute("offset")==="0";)oe[Ce].remove(),Ce++}[].forEach.call(L.querySelectorAll("tspan"),ee=>{ee.textContent==="​"&&(ee.textContent=" ",ee.setAttribute("dx",-5))}),se.svg(L,{x:0,y:0,width:q,height:W,removeInvalid:!0}).then(()=>j(se.output("datauristring")))}Y.CanVGRenderer={},Y.domurl=k.URL||k.webkitURL||k,Y.loadEventDeferDelay=p.isMS?150:0,Y.compose=function(L){let G=L.prototype;return G.exportChartLocal||(G.getSVGForLocalExport=U,G.exportChartLocal=Z,N(!0,v.exporting,y)),L},Y.downloadSVGLocal=function(L,G,F,j){let q=C.createElement("div"),W=G.type||"image/png",se=(G.filename||"chart")+"."+(W==="image/svg+xml"?"svg":W.split("/")[1]),fe=G.scale||1,ee,oe,Ce,ge=G.libURL||v.exporting.libURL,Ee=!0,J=G.pdfFont;ge=ge.slice(-1)!=="/"?ge+"/":ge;let ie=(be,te)=>{let ae,ce,xe=(ke,Le)=>{k.jspdf.jsPDF.API.events.push(["initialized",function(){this.addFileToVFS(ke,Le),this.addFont(ke,"HighchartsFont",ke),this.getFontList().HighchartsFont||this.setFont("HighchartsFont")}])};J&&(ce=be.textContent||"",!/[^\u0000-\u007F\u200B]+/.test(ce))&&(J=void 0);let _e=["normal","italic","bold","bolditalic"],Ne=()=>{let ke=_e.shift();if(!ke)return te();let Le=J&&J[ke];Le?w({url:Le,responseType:"blob",success:(me,Re)=>{let $e=new FileReader;$e.onloadend=function(){if(typeof this.result=="string"){let De=this.result.split(",")[1];xe(ke,De),ke==="normal"&&(ae=De)}Ne()},$e.readAsDataURL(Re.response)},error:Ne}):(ae&&xe(ke,ae),Ne())};Ne()},le=()=>{let be,te;n.setElementHTML(q,L);let ae=q.getElementsByTagName("text"),ce=function(_e,Ne){let ke=_e;for(;ke&&ke!==q;){if(ke.style[Ne]){let Le=ke.style[Ne];Ne==="fontSize"&&/em$/.test(Le)&&(Le=Math.round(16*parseFloat(Le))+"px"),_e.style[Ne]=Le;break}ke=ke.parentNode}};[].forEach.call(ae,function(_e){for(["fontFamily","fontSize"].forEach(Ne=>{ce(_e,Ne)}),_e.style.fontFamily=J&&J.normal?"HighchartsFont":String(_e.style.fontFamily&&_e.style.fontFamily.split(" ").splice(-1)),be=_e.getElementsByTagName("title"),[].forEach.call(be,function(Ne){_e.removeChild(Ne)}),te=_e.getElementsByClassName("highcharts-text-outline");te.length>0;){let Ne=te[0];Ne.parentNode&&Ne.parentNode.removeChild(Ne)}});let xe=q.querySelector("svg");xe&&ie(xe,()=>{R(xe,0,fe,_e=>{try{_(_e,se),j&&j()}catch(Ne){F(Ne)}})})};if(W==="image/svg+xml")try{k.MSBlobBuilder!==void 0?((oe=new k.MSBlobBuilder).append(L),ee=oe.getBlob("image/svg+xml")):ee=B(L),_(ee,se),j&&j()}catch(be){F(be)}else W==="application/pdf"?k.jspdf&&k.jspdf.jsPDF?le():(Ee=!0,K(ge+"jspdf.js",function(){K(ge+"svg2pdf.js",le)})):(ee=B(L),Ce=function(){try{Y.domurl.revokeObjectURL(ee)}catch{}},$(ee,W,{},fe,function(be){try{_(be,se),j&&j()}catch(te){F(te)}},function(){if(L.length>1e8)throw Error("Input too long");let be=C.createElement("canvas"),te=be.getContext("2d"),ae=L.match(/^<svg[^>]*\s{,1000}width\s{,1000}=\s{,1000}\"?(\d+)\"?[^>]*>/),ce=L.match(/^<svg[^>]*\s{0,1000}height\s{,1000}=\s{,1000}\"?(\d+)\"?[^>]*>/);if(te&&ae&&ce){let xe=+ae[1]*fe,_e=+ce[1]*fe,Ne=()=>{k.canvg.Canvg.fromString(te,L).start();try{_(k.navigator.msSaveOrOpenBlob?be.msToBlob():be.toDataURL(W),se),j&&j()}catch(ke){F(ke)}finally{Ce()}};be.width=xe,be.height=_e,k.canvg?Ne():(Ee=!0,K(ge+"canvg.js",Ne))}},F,F,function(){Ee&&Ce()}))},Y.getScript=K,Y.imageToDataUrl=$,Y.svgToDataUrl=B,Y.svgToPdf=R}(x||(x={})),x}),r(t,"masters/modules/offline-exporting.src.js",[t["Core/Globals.js"],t["Extensions/DownloadURL.js"],t["Extensions/OfflineExporting/OfflineExporting.js"]],function(n,a,c){return n.dataURLtoBlob=n.dataURLtoBlob||a.dataURLtoBlob,n.downloadSVGLocal=c.downloadSVGLocal,n.downloadURL=n.downloadURL||a.downloadURL,c.compose(n.Chart),n})})})(SP);var PX=SP.exports;const DX=Hu(PX);DX(ph);function RX(i){ph.charts.forEach(e=>{e&&e.xAxis[0].setExtremes(i.min,i.max)})}const LX=i=>[{name:"Real Cases",data:i.realValues,zIndex:4,lineWidth:2.5,type:"line",color:"#f68000",marker:{enabled:!1,lineWidth:2}},{name:"Predicted Cases",type:"line",color:"#004bbd",data:i.averages.slice(),zIndex:3,opacity:1,lineWidth:2.5,marker:{enabled:!1}},{name:"Quantiles Outer",data:i.ranges.slice(),type:"arearange",lineWidth:0,color:"#c4dcf2",fillOpacity:1,zIndex:0,marker:{enabled:!1}},{name:"Quantiles Middle",data:i.midranges.slice(),type:"arearange",lineWidth:1,color:"#9bbdff",fillOpacity:1,zIndex:1,marker:{enabled:!1}}],NX=({data:i,modelName:e,syncZoom:t,nameLabel:r})=>({title:{text:""},subtitle:{text:r||(e?`Model: ${e}`:""),align:"left"},chart:{zoomType:"x"},xAxis:{categories:i.periods,labels:{enabled:!0,formatter:function(){return TP(this.value.toString())},style:{fontSize:"0.9rem"}},events:t&&{afterSetExtremes:RX},title:{text:"Period"}},yAxis:{title:{text:null},min:0},tooltip:{crosshairs:!0,shared:!0,valueSuffix:" cases"},plotOptions:{series:{animation:{duration:0}}},series:LX(i),exporting:{fallbackToExportServer:!1}}),zX=({data:i,modelName:e,syncZoom:t,nameLabel:r})=>de.createElement(de.Fragment,null,de.createElement(ZI,{highcharts:ph,options:NX({data:i,modelName:e,syncZoom:t,nameLabel:r})})),OX="_title_4ki8g_1",jX="_comparionBox_4ki8g_7",FX="_comparionBoxSideBySide_4ki8g_15",BX="_comparionBoxSideBySideItem_4ki8g_22",h0={title:OX,comparionBox:jX,comparionBoxSideBySide:FX,comparionBoxSideBySideItem:BX},GE=de.memo(function({orgUnitsData:e,nameLabel:t}){return de.createElement("div",{className:h0.comparionBox},de.createElement("div",{className:h0.title},e.orgUnitName),de.createElement("div",{className:h0.comparionBoxSideBySide},e.models.map((r,n)=>de.createElement("div",{key:n,className:h0.comparionBoxSideBySideItem},de.createElement(zX,{syncZoom:e.models.length>1,data:r.data,modelName:r.modelName,nameLabel:t})))))}),wx=0,Wu=1,Qp=2,EP=4;function HE(i){return()=>i}function $X(i){i()}function kP(i,e){return t=>i(e(t))}function qE(i,e){return()=>i(e)}function UX(i,e){return t=>i(e,t)}function tC(i){return i!==void 0}function VX(...i){return()=>{i.map($X)}}function Jp(){}function _x(i,e){return e(i),i}function GX(i,e){return e(i)}function Nn(...i){return i}function pn(i,e){return i(Wu,e)}function Tr(i,e){i(wx,e)}function iC(i){i(Qp)}function Ks(i){return i(EP)}function Fi(i,e){return pn(i,UX(e,wx))}function Ql(i,e){const t=i(Wu,r=>{t(),e(r)});return t}function WE(i){let e,t;return r=>n=>{e=n,t&&clearTimeout(t),t=setTimeout(()=>{r(e)},i)}}function MP(i,e){return i===e}function Ln(i=MP){let e;return t=>r=>{i(e,r)||(e=r,t(r))}}function or(i){return e=>t=>{i(t)&&e(t)}}function Mi(i){return e=>kP(e,i)}function Nl(i){return e=>()=>{e(i)}}function qt(i,...e){const t=HX(...e);return(r,n)=>{switch(r){case Qp:iC(i);return;case Wu:return pn(i,t(n))}}}function Bl(i,e){return t=>r=>{t(e=i(e,r))}}function jp(i){return e=>t=>{i>0?i--:e(t)}}function Mu(i){let e=null,t;return r=>n=>{e=n,!t&&(t=setTimeout(()=>{t=void 0,r(e)},i))}}function kr(...i){const e=new Array(i.length);let t=0,r=null;const n=Math.pow(2,i.length)-1;return i.forEach((a,c)=>{const s=Math.pow(2,c);pn(a,h=>{const p=t;t=t|s,e[c]=h,p!==n&&t===n&&r&&(r(),r=null)})}),a=>c=>{const s=()=>{a([c].concat(e))};t===n?s():r=s}}function HX(...i){return e=>i.reduceRight(GX,e)}function qX(i){let e,t;const r=()=>e==null?void 0:e();return function(n,a){switch(n){case Wu:return a?t===a?void 0:(r(),t=a,e=pn(i,a),e):(r(),Jp);case Qp:r(),t=null;return}}}function ti(i){let e=i;const t=Vr();return(r,n)=>{switch(r){case wx:e=n;break;case Wu:{n(e);break}case EP:return e}return t(r,n)}}function Pa(i,e){return _x(ti(e),t=>Fi(i,t))}function Vr(){const i=[];return(e,t)=>{switch(e){case wx:i.slice().forEach(r=>{r(t)});return;case Qp:i.splice(0,i.length);return;case Wu:return i.push(t),()=>{const r=i.indexOf(t);r>-1&&i.splice(r,1)}}}}function No(i){return _x(Vr(),e=>Fi(i,e))}function sn(i,e=[],{singleton:t}={singleton:!0}){return{constructor:i,dependencies:e,id:WX(),singleton:t}}const WX=()=>Symbol();function YX(i){const e=new Map,t=({constructor:r,dependencies:n,id:a,singleton:c})=>{if(c&&e.has(a))return e.get(a);const s=r(n.map(h=>t(h)));return c&&e.set(a,s),s};return t(i)}function Fs(...i){const e=Vr(),t=new Array(i.length);let r=0;const n=Math.pow(2,i.length)-1;return i.forEach((a,c)=>{const s=Math.pow(2,c);pn(a,h=>{t[c]=h,r=r|s,r===n&&Tr(e,t)})}),function(a,c){switch(a){case Qp:{iC(e);return}case Wu:return r===n&&c(t),pn(e,c)}}}function hr(i,e=MP){return qt(i,Ln(e))}function YE(...i){return function(e,t){switch(e){case Qp:return;case Wu:return VX(...i.map(r=>pn(r,t)))}}}var po=(i=>(i[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=3]="ERROR",i))(po||{});const ZX={0:"debug",3:"error",1:"log",2:"warn"},XX=()=>typeof globalThis>"u"?window:globalThis,Yu=sn(()=>{const i=ti(3);return{log:ti((e,t,r=1)=>{var n;const a=(n=XX().VIRTUOSO_LOG_LEVEL)!=null?n:Ks(i);r>=a&&console[ZX[r]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",e,t)}),logLevel:i}},[],{singleton:!0});function fh(i,e,t){return rC(i,e,t).callbackRef}function rC(i,e,t){const r=de.useRef(null);let n=c=>{};const a=de.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(c=>{const s=()=>{const h=c[0].target;h.offsetParent!==null&&i(h)};t?s():requestAnimationFrame(s)}):null,[i,t]);return n=c=>{c&&e?(a==null||a.observe(c),r.current=c):(r.current&&(a==null||a.unobserve(r.current)),r.current=null)},{callbackRef:n,ref:r}}function KX(i,e,t,r,n,a,c,s,h){const p=de.useCallback(m=>{const y=QX(m.children,e,s?"offsetWidth":"offsetHeight",n);let g=m.parentElement;for(;!g.dataset.virtuosoScroller;)g=g.parentElement;const x=g.lastElementChild.dataset.viewportType==="window";let v;x&&(v=g.ownerDocument.defaultView);const _=c?s?c.scrollLeft:c.scrollTop:x?s?v.scrollX||v.document.documentElement.scrollLeft:v.scrollY||v.document.documentElement.scrollTop:s?g.scrollLeft:g.scrollTop,C=c?s?c.scrollWidth:c.scrollHeight:x?s?v.document.documentElement.scrollWidth:v.document.documentElement.scrollHeight:s?g.scrollWidth:g.scrollHeight,k=c?s?c.offsetWidth:c.offsetHeight:x?s?v.innerWidth:v.innerHeight:s?g.offsetWidth:g.offsetHeight;r({scrollHeight:C,scrollTop:Math.max(_,0),viewportHeight:k}),a==null||a(s?ZE("column-gap",getComputedStyle(m).columnGap,n):ZE("row-gap",getComputedStyle(m).rowGap,n)),y!==null&&i(y)},[i,e,n,a,c,r,s]);return rC(p,t,h)}function QX(i,e,t,r){const n=i.length;if(n===0)return null;const a=[];for(let c=0;c<n;c++){const s=i.item(c);if(s.dataset.index===void 0)continue;const h=parseInt(s.dataset.index),p=parseFloat(s.dataset.knownSize),m=e(s,t);if(m===0&&r("Zero-sized element, this should not happen",{child:s},po.ERROR),m===p)continue;const y=a[a.length-1];a.length===0||y.size!==m||y.endIndex!==h-1?a.push({endIndex:h,size:m,startIndex:h}):a[a.length-1].endIndex++}return a}function ZE(i,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${i} was not resolved to pixel value correctly`,e,po.WARN),e==="normal"?0:parseInt(e??"0",10)}function AP(i,e,t){const r=de.useRef(null),n=de.useCallback(h=>{if(!(h!=null&&h.offsetParent))return;const p=h.getBoundingClientRect(),m=p.width;let y,g;if(e){const x=e.getBoundingClientRect(),v=p.top-x.top;g=x.height-Math.max(0,v),y=v+e.scrollTop}else{const x=c.current.ownerDocument.defaultView;g=x.innerHeight-Math.max(0,p.top),y=p.top+x.scrollY}r.current={offsetTop:y,visibleHeight:g,visibleWidth:m},i(r.current)},[i,e]),{callbackRef:a,ref:c}=rC(n,!0,t),s=de.useCallback(()=>{n(c.current)},[n,c]);return de.useEffect(()=>{var h;if(e){e.addEventListener("scroll",s);const p=new ResizeObserver(()=>{requestAnimationFrame(s)});return p.observe(e),()=>{e.removeEventListener("scroll",s),p.unobserve(e)}}else{const p=(h=c.current)==null?void 0:h.ownerDocument.defaultView;return p==null||p.addEventListener("scroll",s),p==null||p.addEventListener("resize",s),()=>{p==null||p.removeEventListener("scroll",s),p==null||p.removeEventListener("resize",s)}}},[s,e,c]),a}const io=sn(()=>{const i=Vr(),e=Vr(),t=ti(0),r=Vr(),n=ti(0),a=Vr(),c=Vr(),s=ti(0),h=ti(0),p=ti(0),m=ti(0),y=Vr(),g=Vr(),x=ti(!1),v=ti(!1),_=ti(!1);return Fi(qt(i,Mi(({scrollTop:C})=>C)),e),Fi(qt(i,Mi(({scrollHeight:C})=>C)),c),Fi(e,n),{deviation:t,fixedFooterHeight:p,fixedHeaderHeight:h,footerHeight:m,headerHeight:s,horizontalDirection:v,scrollBy:g,scrollContainerState:i,scrollHeight:c,scrollingInProgress:x,scrollTo:y,scrollTop:e,skipAnimationFrameInResizeObserver:_,smoothScrollTargetReached:r,statefulScrollTop:n,viewportHeight:a}},[],{singleton:!0}),og={lvl:0};function IP(i,e){const t=i.length;if(t===0)return[];let{index:r,value:n}=e(i[0]);const a=[];for(let c=1;c<t;c++){const{index:s,value:h}=e(i[c]);a.push({end:s-1,start:r,value:n}),r=s,n=h}return a.push({end:1/0,start:r,value:n}),a}function Sn(i){return i===og}function lg(i,e){if(!Sn(i))return e===i.k?i.v:e<i.k?lg(i.l,e):lg(i.r,e)}function vl(i,e,t="k"){if(Sn(i))return[-1/0,void 0];if(Number(i[t])===e)return[i.k,i.v];if(Number(i[t])<e){const r=vl(i.r,e,t);return r[0]===-1/0?[i.k,i.v]:r}return vl(i.l,e,t)}function Do(i,e,t){return Sn(i)?RP(e,t,1):e===i.k?Os(i,{k:e,v:t}):e<i.k?XE(Os(i,{l:Do(i.l,e,t)})):XE(Os(i,{r:Do(i.r,e,t)}))}function Cp(){return og}function Cx(i,e,t){if(Sn(i))return[];const r=vl(i,e)[0];return JX(Hw(i,r,t))}function Gw(i,e){if(Sn(i))return og;const{k:t,l:r,r:n}=i;if(e===t){if(Sn(r))return n;if(Sn(n))return r;{const[a,c]=DP(r);return $0(Os(i,{k:a,l:PP(r),v:c}))}}else return e<t?$0(Os(i,{l:Gw(r,e)})):$0(Os(i,{r:Gw(n,e)}))}function Fd(i){return Sn(i)?[]:[...Fd(i.l),{k:i.k,v:i.v},...Fd(i.r)]}function Hw(i,e,t){if(Sn(i))return[];const{k:r,l:n,r:a,v:c}=i;let s=[];return r>e&&(s=s.concat(Hw(n,e,t))),r>=e&&r<=t&&s.push({k:r,v:c}),r<=t&&(s=s.concat(Hw(a,e,t))),s}function $0(i){const{l:e,lvl:t,r}=i;if(r.lvl>=t-1&&e.lvl>=t-1)return i;if(t>r.lvl+1){if(c1(e))return LP(Os(i,{lvl:t-1}));if(!Sn(e)&&!Sn(e.r))return Os(e.r,{l:Os(e,{r:e.r.l}),lvl:t,r:Os(i,{l:e.r.r,lvl:t-1})});throw new Error("Unexpected empty nodes")}else{if(c1(i))return qw(Os(i,{lvl:t-1}));if(!Sn(r)&&!Sn(r.l)){const n=r.l,a=c1(n)?r.lvl-1:r.lvl;return Os(n,{l:Os(i,{lvl:t-1,r:n.l}),lvl:n.lvl+1,r:qw(Os(r,{l:n.r,lvl:a}))})}else throw new Error("Unexpected empty nodes")}}function Os(i,e){return RP(e.k!==void 0?e.k:i.k,e.v!==void 0?e.v:i.v,e.lvl!==void 0?e.lvl:i.lvl,e.l!==void 0?e.l:i.l,e.r!==void 0?e.r:i.r)}function PP(i){return Sn(i.r)?i.l:$0(Os(i,{r:PP(i.r)}))}function c1(i){return Sn(i)||i.lvl>i.r.lvl}function DP(i){return Sn(i.r)?[i.k,i.v]:DP(i.r)}function RP(i,e,t,r=og,n=og){return{k:i,l:r,lvl:t,r:n,v:e}}function XE(i){return qw(LP(i))}function LP(i){const{l:e}=i;return!Sn(e)&&e.lvl===i.lvl?Os(e,{r:Os(i,{l:e.r})}):i}function qw(i){const{lvl:e,r:t}=i;return!Sn(t)&&!Sn(t.r)&&t.lvl===e&&t.r.lvl===e?Os(t,{l:Os(i,{r:t.l}),lvl:e+1}):i}function JX(i){return IP(i,({k:e,v:t})=>({index:e,value:t}))}function NP(i,e){return!!(i&&i.startIndex===e.startIndex&&i.endIndex===e.endIndex)}function cg(i,e){return!!(i&&i[0]===e[0]&&i[1]===e[1])}const nC=sn(()=>({recalcInProgress:ti(!1)}),[],{singleton:!0});function zP(i,e,t){return i[yv(i,e,t)]}function yv(i,e,t,r=0){let n=i.length-1;for(;r<=n;){const a=Math.floor((r+n)/2),c=i[a],s=t(c,e);if(s===0)return a;if(s===-1){if(n-r<2)return a-1;n=a-1}else{if(n===r)return a;r=a+1}}throw new Error(`Failed binary finding record in array - ${i.join(",")}, searched for ${e}`)}function eK(i,e,t,r){const n=yv(i,e,r),a=yv(i,t,r,n);return i.slice(n,a+1)}function $u(i,e){return Math.round(i.getBoundingClientRect()[e])}function Tx(i){return!Sn(i.groupOffsetTree)}function sC({index:i},e){return e===i?0:e<i?-1:1}function tK(){return{groupIndices:[],groupOffsetTree:Cp(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:Cp()}}function iK(i,e){let t=Sn(i)?0:1/0;for(const r of e){const{endIndex:n,size:a,startIndex:c}=r;if(t=Math.min(t,c),Sn(i)){i=Do(i,0,a);continue}const s=Cx(i,c-1,n+1);if(s.some(cK(r)))continue;let h=!1,p=!1;for(const{end:m,start:y,value:g}of s)h?(n>=y||a===g)&&(i=Gw(i,y)):(p=g!==a,h=!0),m>n&&n>=y&&g!==a&&(i=Do(i,n+1,g));p&&(i=Do(i,c,a))}return[i,t]}function rK(i){return typeof i.groupIndex<"u"}function nK({offset:i},e){return e===i?0:e<i?-1:1}function ug(i,e,t){if(e.length===0)return 0;const{index:r,offset:n,size:a}=zP(e,i,sC),c=i-r,s=a*c+(c-1)*t+n;return s>0?s+t:s}function OP(i,e){if(!Tx(e))return i;let t=0;for(;e.groupIndices[t]<=i+t;)t++;return i+t}function jP(i,e,t){if(rK(i))return e.groupIndices[i.groupIndex]+1;{const r=i.index==="LAST"?t:i.index;let n=OP(r,e);return n=Math.max(0,n,Math.min(t,n)),n}}function sK(i,e,t,r=0){return r>0&&(e=Math.max(e,zP(i,r,sC).offset)),IP(eK(i,e,t,nK),lK)}function aK(i,[e,t,r,n]){e.length>0&&r("received item sizes",e,po.DEBUG);const a=i.sizeTree;let c=a,s=0;if(t.length>0&&Sn(a)&&e.length===2){const g=e[0].size,x=e[1].size;c=t.reduce((v,_)=>Do(Do(v,_,g),_+1,x),c)}else[c,s]=iK(c,e);if(c===a)return i;const{lastIndex:h,lastOffset:p,lastSize:m,offsetTree:y}=Ww(i.offsetTree,s,c,n);return{groupIndices:t,groupOffsetTree:t.reduce((g,x)=>Do(g,x,ug(x,y,n)),Cp()),lastIndex:h,lastOffset:p,lastSize:m,offsetTree:y,sizeTree:c}}function oK(i){return Fd(i).map(({k:e,v:t},r,n)=>{const a=n[r+1];return{endIndex:a?a.k-1:1/0,size:t,startIndex:e}})}function KE(i,e){let t=0,r=0;for(;t<i;)t+=e[r+1]-e[r]-1,r++;return r-(t===i?0:1)}function Ww(i,e,t,r){let n=i,a=0,c=0,s=0,h=0;if(e!==0){h=yv(n,e-1,sC),s=n[h].offset;const p=vl(t,e-1);a=p[0],c=p[1],n.length&&n[h].size===vl(t,e)[1]&&(h-=1),n=n.slice(0,h+1)}else n=[];for(const{start:p,value:m}of Cx(t,e,1/0)){const y=p-a,g=y*c+s+y*r;n.push({index:p,offset:g,size:m}),a=p,s=g,c=m}return{lastIndex:a,lastOffset:s,lastSize:c,offsetTree:n}}function lK(i){return{index:i.index,value:i}}function cK(i){const{endIndex:e,size:t,startIndex:r}=i;return n=>n.start===r&&(n.end===e||n.end===1/0)&&n.value===t}const uK={offsetHeight:"height",offsetWidth:"width"},ac=sn(([{log:i},{recalcInProgress:e}])=>{const t=Vr(),r=Vr(),n=Pa(r,0),a=Vr(),c=Vr(),s=ti(0),h=ti([]),p=ti(void 0),m=ti(void 0),y=ti((M,S)=>$u(M,uK[S])),g=ti(void 0),x=ti(0),v=tK(),_=Pa(qt(t,kr(h,i,x),Bl(aK,v),Ln()),v),C=Pa(qt(h,Ln(),Bl((M,S)=>({current:S,prev:M.current}),{current:[],prev:[]}),Mi(({prev:M})=>M)),[]);Fi(qt(h,or(M=>M.length>0),kr(_,x),Mi(([M,S,N])=>{const Y=M.reduce((Z,K,U)=>Do(Z,K,ug(K,S.offsetTree,N)||U),Cp());return{...S,groupIndices:M,groupOffsetTree:Y}})),_),Fi(qt(r,kr(_),or(([M,{lastIndex:S}])=>M<S),Mi(([M,{lastIndex:S,lastSize:N}])=>[{endIndex:S,size:N,startIndex:M}])),t),Fi(p,m);const k=Pa(qt(p,Mi(M=>M===void 0)),!0);Fi(qt(m,or(M=>M!==void 0&&Sn(Ks(_).sizeTree)),Mi(M=>[{endIndex:0,size:M,startIndex:0}])),t);const w=No(qt(t,kr(_),Bl(({sizes:M},[S,N])=>({changed:N!==M,sizes:N}),{changed:!1,sizes:v}),Mi(M=>M.changed)));pn(qt(s,Bl((M,S)=>({diff:M.prev-S,prev:S}),{diff:0,prev:0}),Mi(M=>M.diff)),M=>{const{groupIndices:S}=Ks(_);if(M>0)Tr(e,!0),Tr(a,M+KE(M,S));else if(M<0){const N=Ks(C);N.length>0&&(M-=KE(-M,N)),Tr(c,M)}}),pn(qt(s,kr(i)),([M,S])=>{M<0&&S("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:s},po.ERROR)});const E=No(a);Fi(qt(a,kr(_),Mi(([M,S])=>{const N=S.groupIndices.length>0,Y=[],Z=S.lastSize;if(N){const K=lg(S.sizeTree,0);let U=0,$=0;for(;U<M;){const R=S.groupIndices[$],L=S.groupIndices.length===$+1?1/0:S.groupIndices[$+1]-R-1;Y.push({endIndex:R,size:K,startIndex:R}),Y.push({endIndex:R+1+L-1,size:Z,startIndex:R+1}),$++,U+=L+1}const B=Fd(S.sizeTree);return U!==M&&B.shift(),B.reduce((R,{k:L,v:G})=>{let F=R.ranges;return R.prevSize!==0&&(F=[...R.ranges,{endIndex:L+M-1,size:R.prevSize,startIndex:R.prevIndex}]),{prevIndex:L+M,prevSize:G,ranges:F}},{prevIndex:M,prevSize:0,ranges:Y}).ranges}return Fd(S.sizeTree).reduce((K,{k:U,v:$})=>({prevIndex:U+M,prevSize:$,ranges:[...K.ranges,{endIndex:U+M-1,size:K.prevSize,startIndex:K.prevIndex}]}),{prevIndex:0,prevSize:Z,ranges:[]}).ranges})),t);const A=No(qt(c,kr(_,x),Mi(([M,{offsetTree:S},N])=>{const Y=-M;return ug(Y,S,N)})));return Fi(qt(c,kr(_,x),Mi(([M,S,N])=>{if(S.groupIndices.length>0){if(Sn(S.sizeTree))return S;let Y=Cp();const Z=Ks(C);let K=0,U=0,$=0;for(;K<-M;){$=Z[U];const B=Z[U+1]-$-1;U++,K+=B+1}if(Y=Fd(S.sizeTree).reduce((B,{k:R,v:L})=>Do(B,Math.max(0,R+M),L),Y),K!==-M){const B=lg(S.sizeTree,$);Y=Do(Y,0,B);const R=vl(S.sizeTree,-M+1)[1];Y=Do(Y,1,R)}return{...S,sizeTree:Y,...Ww(S.offsetTree,0,Y,N)}}else{const Y=Fd(S.sizeTree).reduce((Z,{k:K,v:U})=>Do(Z,Math.max(0,K+M),U),Cp());return{...S,sizeTree:Y,...Ww(S.offsetTree,0,Y,N)}}})),_),{beforeUnshiftWith:E,data:g,defaultItemSize:m,firstItemIndex:s,fixedItemSize:p,gap:x,groupIndices:h,itemSize:y,listRefresh:w,shiftWith:c,shiftWithOffset:A,sizeRanges:t,sizes:_,statefulTotalCount:n,totalCount:r,trackItemSizes:k,unshiftWith:a}},Nn(Yu,nC),{singleton:!0});function dK(i){return i.reduce((e,t)=>(e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e),{groupIndices:[],totalCount:0})}const FP=sn(([{groupIndices:i,sizes:e,totalCount:t},{headerHeight:r,scrollTop:n}])=>{const a=Vr(),c=Vr(),s=No(qt(a,Mi(dK)));return Fi(qt(s,Mi(h=>h.totalCount)),t),Fi(qt(s,Mi(h=>h.groupIndices)),i),Fi(qt(Fs(n,e,r),or(([h,p])=>Tx(p)),Mi(([h,p,m])=>vl(p.groupOffsetTree,Math.max(h-m,0),"v")[0]),Ln(),Mi(h=>[h])),c),{groupCounts:a,topItemsIndexes:c}},Nn(ac,io)),Zu=sn(([{log:i}])=>{const e=ti(!1),t=No(qt(e,or(r=>r),Ln()));return pn(e,r=>{r&&Ks(i)("props updated",{},po.DEBUG)}),{didMount:t,propsReady:e}},Nn(Yu),{singleton:!0}),hK=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function BP(i){const e=typeof i=="number"?{index:i}:i;return e.align||(e.align="start"),(!e.behavior||!hK)&&(e.behavior="auto"),e.offset||(e.offset=0),e}const Gg=sn(([{gap:i,listRefresh:e,sizes:t,totalCount:r},{fixedFooterHeight:n,fixedHeaderHeight:a,footerHeight:c,headerHeight:s,scrollingInProgress:h,scrollTo:p,smoothScrollTargetReached:m,viewportHeight:y},{log:g}])=>{const x=Vr(),v=Vr(),_=ti(0);let C=null,k=null,w=null;function E(){C&&(C(),C=null),w&&(w(),w=null),k&&(clearTimeout(k),k=null),Tr(h,!1)}return Fi(qt(x,kr(t,y,r,_,s,c,g),kr(i,a,n),Mi(([[A,M,S,N,Y,Z,K,U],$,B,R])=>{const L=BP(A),{align:G,behavior:F,offset:j}=L,q=N-1,W=jP(L,M,q);let se=ug(W,M.offsetTree,$)+Z;G==="end"?(se+=B+vl(M.sizeTree,W)[1]-S+R,W===q&&(se+=K)):G==="center"?se+=(B+vl(M.sizeTree,W)[1]-S+R)/2:se-=Y,j&&(se+=j);const fe=ee=>{E(),ee?(U("retrying to scroll to",{location:A},po.DEBUG),Tr(x,A)):(Tr(v,!0),U("list did not change, scroll successful",{},po.DEBUG))};if(E(),F==="smooth"){let ee=!1;w=pn(e,oe=>{ee=ee||oe}),C=Ql(m,()=>{fe(ee)})}else C=Ql(qt(e,pK(150)),fe);return k=setTimeout(()=>{E()},1200),Tr(h,!0),U("scrolling from index to",{behavior:F,index:W,top:se},po.DEBUG),{behavior:F,top:se}})),p),{scrollTargetReached:v,scrollToIndex:x,topListHeight:_}},Nn(ac,io,Yu),{singleton:!0});function pK(i){return e=>{const t=setTimeout(()=>{e(!1)},i);return r=>{r&&(e(!0),clearTimeout(t))}}}function aC(i,e){i==0?e():requestAnimationFrame(()=>{aC(i-1,e)})}function oC(i,e){const t=e-1;return typeof i=="number"?i:i.index==="LAST"?t:i.index}const Hg=sn(([{defaultItemSize:i,listRefresh:e,sizes:t},{scrollTop:r},{scrollTargetReached:n,scrollToIndex:a},{didMount:c}])=>{const s=ti(!0),h=ti(0),p=ti(!0);return Fi(qt(c,kr(h),or(([m,y])=>!!y),Nl(!1)),s),Fi(qt(c,kr(h),or(([m,y])=>!!y),Nl(!1)),p),pn(qt(Fs(e,c),kr(s,t,i,p),or(([[,m],y,{sizeTree:g},x,v])=>m&&(!Sn(g)||tC(x))&&!y&&!v),kr(h)),([,m])=>{Ql(n,()=>{Tr(p,!0)}),aC(4,()=>{Ql(r,()=>{Tr(s,!0)}),Tr(a,m)})}),{initialItemFinalLocationReached:p,initialTopMostItemIndex:h,scrolledToInitialItem:s}},Nn(ac,io,Gg,Zu),{singleton:!0});function $P(i,e){return Math.abs(i-e)<1.01}const dg="up",Vm="down",fK="none",mK={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},gK=0,qg=sn(([{footerHeight:i,headerHeight:e,scrollBy:t,scrollContainerState:r,scrollTop:n,viewportHeight:a}])=>{const c=ti(!1),s=ti(!0),h=Vr(),p=Vr(),m=ti(4),y=ti(gK),g=Pa(qt(YE(qt(hr(n),jp(1),Nl(!0)),qt(hr(n),jp(1),Nl(!1),WE(100))),Ln()),!1),x=Pa(qt(YE(qt(t,Nl(!0)),qt(t,Nl(!1),WE(200))),Ln()),!1);Fi(qt(Fs(hr(n),hr(y)),Mi(([w,E])=>w<=E),Ln()),s),Fi(qt(s,Mu(50)),p);const v=No(qt(Fs(r,hr(a),hr(e),hr(i),hr(m)),Bl((w,[{scrollHeight:E,scrollTop:A},M,S,N,Y])=>{const Z=A+M-E>-Y,K={scrollHeight:E,scrollTop:A,viewportHeight:M};if(Z){let $,B;return A>w.state.scrollTop?($="SCROLLED_DOWN",B=w.state.scrollTop-A):($="SIZE_DECREASED",B=w.state.scrollTop-A||w.scrollTopDelta),{atBottom:!0,atBottomBecause:$,scrollTopDelta:B,state:K}}let U;return K.scrollHeight>w.state.scrollHeight?U="SIZE_INCREASED":M<w.state.viewportHeight?U="VIEWPORT_HEIGHT_DECREASING":A<w.state.scrollTop?U="SCROLLING_UPWARDS":U="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:U,state:K}},mK),Ln((w,E)=>w&&w.atBottom===E.atBottom))),_=Pa(qt(r,Bl((w,{scrollHeight:E,scrollTop:A,viewportHeight:M})=>{if($P(w.scrollHeight,E))return{changed:!1,jump:0,scrollHeight:E,scrollTop:A};{const S=E-(A+M)<1;return w.scrollTop!==A&&S?{changed:!0,jump:w.scrollTop-A,scrollHeight:E,scrollTop:A}:{changed:!0,jump:0,scrollHeight:E,scrollTop:A}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),or(w=>w.changed),Mi(w=>w.jump)),0);Fi(qt(v,Mi(w=>w.atBottom)),c),Fi(qt(c,Mu(50)),h);const C=ti(Vm);Fi(qt(r,Mi(({scrollTop:w})=>w),Ln(),Bl((w,E)=>Ks(x)?{direction:w.direction,prevScrollTop:E}:{direction:E<w.prevScrollTop?dg:Vm,prevScrollTop:E},{direction:Vm,prevScrollTop:0}),Mi(w=>w.direction)),C),Fi(qt(r,Mu(50),Nl(fK)),C);const k=ti(0);return Fi(qt(g,or(w=>!w),Nl(0)),k),Fi(qt(n,Mu(100),kr(g),or(([w,E])=>!!E),Bl(([w,E],[A])=>[E,A],[0,0]),Mi(([w,E])=>E-w)),k),{atBottomState:v,atBottomStateChange:h,atBottomThreshold:m,atTopStateChange:p,atTopThreshold:y,isAtBottom:c,isAtTop:s,isScrolling:g,lastJumpDueToItemResize:_,scrollDirection:C,scrollVelocity:k}},Nn(io)),vv="top",xv="bottom",QE="none";function JE(i,e,t){return typeof i=="number"?t===dg&&e===vv||t===Vm&&e===xv?i:0:t===dg?e===vv?i.main:i.reverse:e===xv?i.main:i.reverse}function e3(i,e){var t;return typeof i=="number"?i:(t=i[e])!=null?t:0}const lC=sn(([{deviation:i,fixedHeaderHeight:e,headerHeight:t,scrollTop:r,viewportHeight:n}])=>{const a=Vr(),c=ti(0),s=ti(0),h=ti(0),p=Pa(qt(Fs(hr(r),hr(n),hr(t),hr(a,cg),hr(h),hr(c),hr(e),hr(i),hr(s)),Mi(([m,y,g,[x,v],_,C,k,w,E])=>{const A=m-w,M=C+k,S=Math.max(g-A,0);let N=QE;const Y=e3(E,vv),Z=e3(E,xv);return x-=w,x+=g+k,v+=g+k,v-=w,x>m+M-Y&&(N=dg),v<m-S+y+Z&&(N=Vm),N!==QE?[Math.max(A-g-JE(_,vv,N)-Y,0),A-S-k+y+JE(_,xv,N)+Z]:null}),or(m=>m!=null),Ln(cg)),[0,0]);return{increaseViewportBy:s,listBoundary:a,overscan:h,topListHeight:c,visibleRange:p}},Nn(io),{singleton:!0});function yK(i,e,t){if(Tx(e)){const r=OP(i,e);return[{index:vl(e.groupOffsetTree,r)[0],offset:0,size:0},{data:t==null?void 0:t[0],index:r,offset:0,size:0}]}return[{data:t==null?void 0:t[0],index:i,offset:0,size:0}]}const u1={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function U0(i,e,t,r,n,a){const{lastIndex:c,lastOffset:s,lastSize:h}=n;let p=0,m=0;if(i.length>0){p=i[0].offset;const _=i[i.length-1];m=_.offset+_.size}const y=t-c,g=s+y*h+(y-1)*r,x=p,v=g-m;return{bottom:m,firstItemIndex:a,items:t3(i,n,a),offsetBottom:v,offsetTop:p,top:x,topItems:t3(e,n,a),topListHeight:e.reduce((_,C)=>C.size+_,0),totalCount:t}}function UP(i,e,t,r,n,a){let c=0;if(t.groupIndices.length>0)for(const m of t.groupIndices){if(m-c>=i)break;c++}const s=i+c,h=oC(e,s),p=Array.from({length:s}).map((m,y)=>({data:a[y+h],index:y+h,offset:0,size:0}));return U0(p,[],s,n,t,r)}function t3(i,e,t){if(i.length===0)return[];if(!Tx(e))return i.map(p=>({...p,index:p.index+t,originalIndex:p.index}));const r=i[0].index,n=i[i.length-1].index,a=[],c=Cx(e.groupOffsetTree,r,n);let s,h=0;for(const p of i){(!s||s.end<p.index)&&(s=c.shift(),h=e.groupIndices.indexOf(s.start));let m;p.index===s.start?m={index:h,type:"group"}:m={groupIndex:h,index:p.index-(h+1)+t},a.push({...m,data:p.data,offset:p.offset,originalIndex:p.index,size:p.size})}return a}const mh=sn(([{data:i,firstItemIndex:e,gap:t,sizes:r,totalCount:n},a,{listBoundary:c,topListHeight:s,visibleRange:h},{initialTopMostItemIndex:p,scrolledToInitialItem:m},{topListHeight:y},g,{didMount:x},{recalcInProgress:v}])=>{const _=ti([]),C=ti(0),k=Vr();Fi(a.topItemsIndexes,_);const w=Pa(qt(Fs(x,v,hr(h,cg),hr(n),hr(r),hr(p),m,hr(_),hr(e),hr(t),i),or(([S,N,,Y,,,,,,,Z])=>{const K=Z&&Z.length!==Y;return S&&!N&&!K}),Mi(([,,[S,N],Y,Z,K,U,$,B,R,L])=>{const G=Z,{offsetTree:F,sizeTree:j}=G,q=Ks(C);if(Y===0)return{...u1,totalCount:Y};if(S===0&&N===0)return q===0?{...u1,totalCount:Y}:UP(q,K,Z,B,R,L||[]);if(Sn(j))return q>0?null:U0(yK(oC(K,Y),G,L),[],Y,R,G,B);const W=[];if($.length>0){const Ce=$[0],ge=$[$.length-1];let Ee=0;for(const J of Cx(j,Ce,ge)){const ie=J.value,le=Math.max(J.start,Ce),be=Math.min(J.end,ge);for(let te=le;te<=be;te++)W.push({data:L==null?void 0:L[te],index:te,offset:Ee,size:ie}),Ee+=ie}}if(!U)return U0([],W,Y,R,G,B);const se=$.length>0?$[$.length-1]+1:0,fe=sK(F,S,N,se);if(fe.length===0)return null;const ee=Y-1,oe=_x([],Ce=>{for(const ge of fe){const Ee=ge.value;let J=Ee.offset,ie=ge.start;const le=Ee.size;if(Ee.offset<S){ie+=Math.floor((S-Ee.offset+R)/(le+R));const te=ie-ge.start;J+=te*le+te*R}ie<se&&(J+=(se-ie)*le,ie=se);const be=Math.min(ge.end,ee);for(let te=ie;te<=be&&!(J>=N);te++)Ce.push({data:L==null?void 0:L[te],index:te,offset:J,size:le}),J+=le+R}});return U0(oe,W,Y,R,G,B)}),or(S=>S!==null),Ln()),u1);Fi(qt(i,or(tC),Mi(S=>S==null?void 0:S.length)),n),Fi(qt(w,Mi(S=>S.topListHeight)),y),Fi(y,s),Fi(qt(w,Mi(S=>[S.top,S.bottom])),c),Fi(qt(w,Mi(S=>S.items)),k);const E=No(qt(w,or(({items:S})=>S.length>0),kr(n,i),or(([{items:S},N])=>S[S.length-1].originalIndex===N-1),Mi(([,S,N])=>[S-1,N]),Ln(cg),Mi(([S])=>S))),A=No(qt(w,Mu(200),or(({items:S,topItems:N})=>S.length>0&&S[0].originalIndex===N.length),Mi(({items:S})=>S[0].index),Ln())),M=No(qt(w,or(({items:S})=>S.length>0),Mi(({items:S})=>{let N=0,Y=S.length-1;for(;S[N].type==="group"&&N<Y;)N++;for(;S[Y].type==="group"&&Y>N;)Y--;return{endIndex:S[Y].index,startIndex:S[N].index}}),Ln(NP)));return{endReached:E,initialItemCount:C,itemsRendered:k,listState:w,rangeChanged:M,startReached:A,topItemsIndexes:_,...g}},Nn(ac,FP,lC,Hg,Gg,qg,Zu,nC),{singleton:!0}),VP=sn(([{fixedFooterHeight:i,fixedHeaderHeight:e,footerHeight:t,headerHeight:r},{listState:n}])=>{const a=Vr(),c=Pa(qt(Fs(t,i,r,e,n),Mi(([s,h,p,m,y])=>s+h+p+m+y.offsetBottom+y.bottom)),0);return Fi(hr(c),a),{totalListHeight:c,totalListHeightChanged:a}},Nn(io,mh),{singleton:!0}),vK=sn(([{viewportHeight:i},{totalListHeight:e}])=>{const t=ti(!1),r=Pa(qt(Fs(t,i,e),or(([n])=>n),Mi(([,n,a])=>Math.max(0,n-a)),Mu(0),Ln()),0);return{alignToBottom:t,paddingTopAddition:r}},Nn(io,VP),{singleton:!0});function i3(i){return i?i==="smooth"?"smooth":"auto":!1}const xK=(i,e)=>typeof i=="function"?i3(i(e)):e&&i3(i),bK=sn(([{listRefresh:i,totalCount:e,fixedItemSize:t},{atBottomState:r,isAtBottom:n},{scrollToIndex:a},{scrolledToInitialItem:c},{didMount:s,propsReady:h},{log:p},{scrollingInProgress:m}])=>{const y=ti(!1),g=Vr();let x=null;function v(C){Tr(a,{align:"end",behavior:C,index:"LAST"})}pn(qt(Fs(qt(hr(e),jp(1)),s),kr(hr(y),n,c,m),Mi(([[C,k],w,E,A,M])=>{let S=k&&A,N="auto";return S&&(N=xK(w,E||M),S=S&&!!N),{followOutputBehavior:N,shouldFollow:S,totalCount:C}}),or(({shouldFollow:C})=>C)),({followOutputBehavior:C,totalCount:k})=>{x&&(x(),x=null),Ks(t)?requestAnimationFrame(()=>{Ks(p)("following output to ",{totalCount:k},po.DEBUG),v(C)}):x=Ql(i,()=>{Ks(p)("following output to ",{totalCount:k},po.DEBUG),v(C),x=null})});function _(C){const k=Ql(r,w=>{C&&!w.atBottom&&w.notAtBottomBecause==="SIZE_INCREASED"&&!x&&(Ks(p)("scrolling to bottom due to increased size",{},po.DEBUG),v("auto"))});setTimeout(k,100)}return pn(qt(Fs(hr(y),e,h),or(([C,,k])=>C&&k),Bl(({value:C},[,k])=>({refreshed:C===k,value:k}),{refreshed:!1,value:0}),or(({refreshed:C})=>C),kr(y,e)),([,C])=>{Ks(c)&&_(C!==!1)}),pn(g,()=>{_(Ks(y)!==!1)}),pn(Fs(hr(y),r),([C,k])=>{C&&!k.atBottom&&k.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&v("auto")}),{autoscrollToBottom:g,followOutput:y}},Nn(ac,qg,Gg,Hg,Zu,Yu,io)),wK=sn(([{data:i,firstItemIndex:e,gap:t,sizes:r},{initialTopMostItemIndex:n},{initialItemCount:a,listState:c},{didMount:s}])=>(Fi(qt(s,kr(a),or(([,h])=>h!==0),kr(n,r,e,t,i),Mi(([[,h],p,m,y,g,x=[]])=>UP(h,p,m,y,g,x))),c),{}),Nn(ac,Hg,mh,Zu),{singleton:!0}),_K=sn(([{didMount:i},{scrollTo:e},{listState:t}])=>{const r=ti(0);return pn(qt(i,kr(r),or(([,n])=>n!==0),Mi(([,n])=>({top:n}))),n=>{Ql(qt(t,jp(1),or(a=>a.items.length>1)),()=>{requestAnimationFrame(()=>{Tr(e,n)})})}),{initialScrollTop:r}},Nn(Zu,io,mh),{singleton:!0}),CK=({itemBottom:i,itemTop:e,locationParams:{align:t,behavior:r,...n},viewportBottom:a,viewportTop:c})=>e<c?{...n,align:t??"start",behavior:r}:i>a?{...n,align:t??"end",behavior:r}:null,TK=sn(([{gap:i,sizes:e,totalCount:t},{fixedFooterHeight:r,fixedHeaderHeight:n,headerHeight:a,scrollingInProgress:c,scrollTop:s,viewportHeight:h},{scrollToIndex:p}])=>{const m=Vr();return Fi(qt(m,kr(e,h,t,a,n,r,s),kr(i),Mi(([[y,g,x,v,_,C,k,w],E])=>{const{align:A,behavior:M,calculateViewLocation:S=CK,done:N,...Y}=y,Z=jP(y,g,v-1),K=ug(Z,g.offsetTree,E)+_+C,U=K+vl(g.sizeTree,Z)[1],$=w+C,B=w+x-k,R=S({itemBottom:U,itemTop:K,locationParams:{align:A,behavior:M,...Y},viewportBottom:B,viewportTop:$});return R?N&&Ql(qt(c,or(L=>!L),jp(Ks(c)?1:2)),N):N&&N(),R}),or(y=>y!==null)),p),{scrollIntoView:m}},Nn(ac,io,Gg,mh,Yu),{singleton:!0}),GP=sn(([{scrollVelocity:i}])=>{const e=ti(!1),t=Vr(),r=ti(!1);return Fi(qt(i,kr(r,e,t),or(([n,a])=>!!a),Mi(([n,a,c,s])=>{const{enter:h,exit:p}=a;if(c){if(p(n,s))return!1}else if(h(n,s))return!0;return c}),Ln()),e),pn(qt(Fs(e,i,t),kr(r)),([[n,a,c],s])=>{n&&s&&s.change&&s.change(a,c)}),{isSeeking:e,scrollSeekConfiguration:r,scrollSeekRangeChanged:t,scrollVelocity:i}},Nn(qg),{singleton:!0}),cC=sn(([{scrollContainerState:i,scrollTo:e}])=>{const t=Vr(),r=Vr(),n=Vr(),a=ti(!1),c=ti(void 0);return Fi(qt(Fs(t,r),Mi(([{scrollHeight:s,scrollTop:h,viewportHeight:p},{offsetTop:m}])=>({scrollHeight:s,scrollTop:Math.max(0,h-m),viewportHeight:p}))),i),Fi(qt(e,kr(r),Mi(([s,{offsetTop:h}])=>({...s,top:s.top+h}))),n),{customScrollParent:c,useWindowScroll:a,windowScrollContainerState:t,windowScrollTo:n,windowViewportRect:r}},Nn(io)),SK=sn(([{sizeRanges:i,sizes:e},{headerHeight:t,scrollTop:r},{initialTopMostItemIndex:n},{didMount:a},{useWindowScroll:c,windowScrollContainerState:s,windowViewportRect:h}])=>{const p=Vr(),m=ti(void 0),y=ti(null),g=ti(null);return Fi(s,y),Fi(h,g),pn(qt(p,kr(e,r,c,y,g,t)),([x,v,_,C,k,w,E])=>{const A=oK(v.sizeTree);C&&k!==null&&w!==null&&(_=k.scrollTop-w.offsetTop),_-=E,x({ranges:A,scrollTop:_})}),Fi(qt(m,or(tC),Mi(EK)),n),Fi(qt(a,kr(m),or(([,x])=>x!==void 0),Ln(),Mi(([,x])=>x.ranges)),i),{getState:p,restoreStateFrom:m}},Nn(ac,io,Hg,Zu,cC));function EK(i){return{align:"start",index:0,offset:i.scrollTop}}const kK=sn(([{topItemsIndexes:i}])=>{const e=ti(0);return Fi(qt(e,or(t=>t>=0),Mi(t=>Array.from({length:t}).map((r,n)=>n))),i),{topItemCount:e}},Nn(mh));function HP(i){let e=!1,t;return()=>(e||(e=!0,t=i()),t)}const MK=HP(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),AK=sn(([{deviation:i,scrollBy:e,scrollingInProgress:t,scrollTop:r},{isAtBottom:n,isScrolling:a,lastJumpDueToItemResize:c,scrollDirection:s},{listState:h},{beforeUnshiftWith:p,gap:m,shiftWithOffset:y,sizes:g},{log:x},{recalcInProgress:v}])=>{const _=No(qt(h,kr(c),Bl(([,k,w,E],[{bottom:A,items:M,offsetBottom:S,totalCount:N},Y])=>{const Z=A+S;let K=0;return w===N&&k.length>0&&M.length>0&&(M[0].originalIndex===0&&k[0].originalIndex===0||(K=Z-E,K!==0&&(K+=Y))),[K,M,N,Z]},[0,[],0,0]),or(([k])=>k!==0),kr(r,s,t,n,x,v),or(([,k,w,E,,,A])=>!A&&!E&&k!==0&&w===dg),Mi(([[k],,,,,w])=>(w("Upward scrolling compensation",{amount:k},po.DEBUG),k))));function C(k){k>0?(Tr(e,{behavior:"auto",top:-k}),Tr(i,0)):(Tr(i,0),Tr(e,{behavior:"auto",top:-k}))}return pn(qt(_,kr(i,a)),([k,w,E])=>{E&&MK()?Tr(i,w-k):C(-k)}),pn(qt(Fs(Pa(a,!1),i,v),or(([k,w,E])=>!k&&!E&&w!==0),Mi(([k,w])=>w),Mu(1)),C),Fi(qt(y,Mi(k=>({top:-k}))),e),pn(qt(p,kr(g,m),Mi(([k,{groupIndices:w,lastSize:E,sizeTree:A},M])=>{function S(N){return N*(E+M)}if(w.length===0)return S(k);{let N=0;const Y=lg(A,0);let Z=0,K=0;for(;Z<k;){Z++,N+=Y;let U=w.length===K+1?1/0:w[K+1]-w[K]-1;Z+U>k&&(N-=Y,U=k-Z+1),Z+=U,N+=S(U),K++}return N}})),k=>{Tr(i,k),requestAnimationFrame(()=>{Tr(e,{top:k}),requestAnimationFrame(()=>{Tr(i,0),Tr(v,!1)})})}),{deviation:i}},Nn(io,qg,mh,ac,Yu,nC)),IK=sn(([i,e,t,r,n,a,c,s,h,p])=>({...i,...e,...t,...r,...n,...a,...c,...s,...h,...p}),Nn(lC,wK,Zu,GP,VP,_K,vK,cC,TK,Yu)),qP=sn(([{data:i,defaultItemSize:e,firstItemIndex:t,fixedItemSize:r,gap:n,groupIndices:a,itemSize:c,sizeRanges:s,sizes:h,statefulTotalCount:p,totalCount:m,trackItemSizes:y},{initialItemFinalLocationReached:g,initialTopMostItemIndex:x,scrolledToInitialItem:v},_,C,k,{listState:w,topItemsIndexes:E,...A},{scrollToIndex:M},S,{topItemCount:N},{groupCounts:Y},Z])=>(Fi(A.rangeChanged,Z.scrollSeekRangeChanged),Fi(qt(Z.windowViewportRect,Mi(K=>K.visibleHeight)),_.viewportHeight),{data:i,defaultItemHeight:e,firstItemIndex:t,fixedItemHeight:r,gap:n,groupCounts:Y,initialItemFinalLocationReached:g,initialTopMostItemIndex:x,scrolledToInitialItem:v,sizeRanges:s,topItemCount:N,topItemsIndexes:E,totalCount:m,...k,groupIndices:a,itemSize:c,listState:w,scrollToIndex:M,statefulTotalCount:p,trackItemSizes:y,...A,...Z,..._,sizes:h,...C}),Nn(ac,Hg,io,SK,bK,mh,Gg,AK,kK,FP,IK));function PK(i,e){const t={},r={};let n=0;const a=i.length;for(;n<a;)r[i[n]]=1,n+=1;for(const c in e)Object.hasOwn(r,c)||(t[c]=e[c]);return t}const p0=typeof document<"u"?de.useLayoutEffect:de.useEffect;function WP(i,e,t){const r=Object.keys(e.required||{}),n=Object.keys(e.optional||{}),a=Object.keys(e.methods||{}),c=Object.keys(e.events||{}),s=de.createContext({});function h(C,k){C.propsReady&&Tr(C.propsReady,!1);for(const w of r){const E=C[e.required[w]];Tr(E,k[w])}for(const w of n)if(w in k){const E=C[e.optional[w]];Tr(E,k[w])}C.propsReady&&Tr(C.propsReady,!0)}function p(C){return a.reduce((k,w)=>(k[w]=E=>{const A=C[e.methods[w]];Tr(A,E)},k),{})}function m(C){return c.reduce((k,w)=>(k[w]=qX(C[e.events[w]]),k),{})}const y=de.forwardRef((C,k)=>{const{children:w,...E}=C,[A]=de.useState(()=>_x(YX(i),N=>{h(N,E)})),[M]=de.useState(qE(m,A));p0(()=>{for(const N of c)N in E&&pn(M[N],E[N]);return()=>{Object.values(M).map(iC)}},[E,M,A]),p0(()=>{h(A,E)}),de.useImperativeHandle(k,HE(p(A)));const S=t;return z.jsx(s.Provider,{value:A,children:t?z.jsx(S,{...PK([...r,...n,...c],E),children:w}):w})}),g=C=>{const k=de.useContext(s);return de.useCallback(w=>{Tr(k[C],w)},[k,C])},x=C=>{const k=de.useContext(s)[C],w=de.useCallback(E=>pn(k,E),[k]);return de.useSyncExternalStore(w,()=>Ks(k),()=>Ks(k))},v=C=>{const k=de.useContext(s)[C],[w,E]=de.useState(qE(Ks,k));return p0(()=>pn(k,A=>{A!==w&&E(HE(A))}),[k,w]),w},_=de.version.startsWith("18")?x:v;return{Component:y,useEmitter:(C,k)=>{const w=de.useContext(s)[C];p0(()=>pn(w,k),[k,w])},useEmitterValue:_,usePublisher:g}}const YP=de.createContext(void 0),ZP=de.createContext(void 0),XP=typeof document<"u"?de.useLayoutEffect:de.useEffect;function d1(i){return"self"in i}function DK(i){return"body"in i}function KP(i,e,t,r=Jp,n,a){const c=de.useRef(null),s=de.useRef(null),h=de.useRef(null),p=de.useCallback(g=>{let x,v,_;const C=g.target;if(DK(C)||d1(C)){const w=d1(C)?C:C.defaultView;_=a?w.scrollX:w.scrollY,x=a?w.document.documentElement.scrollWidth:w.document.documentElement.scrollHeight,v=a?w.innerWidth:w.innerHeight}else _=a?C.scrollLeft:C.scrollTop,x=a?C.scrollWidth:C.scrollHeight,v=a?C.offsetWidth:C.offsetHeight;const k=()=>{i({scrollHeight:x,scrollTop:Math.max(_,0),viewportHeight:v})};g.suppressFlushSync?k():vL.flushSync(k),s.current!==null&&(_===s.current||_<=0||_===x-v)&&(s.current=null,e(!0),h.current&&(clearTimeout(h.current),h.current=null))},[i,e,a]);de.useEffect(()=>{const g=n||c.current;return r(n||c.current),p({suppressFlushSync:!0,target:g}),g.addEventListener("scroll",p,{passive:!0}),()=>{r(null),g.removeEventListener("scroll",p)}},[c,p,t,r,n]);function m(g){const x=c.current;if(!x||(a?"offsetWidth"in x&&x.offsetWidth===0:"offsetHeight"in x&&x.offsetHeight===0))return;const v=g.behavior==="smooth";let _,C,k;d1(x)?(C=Math.max($u(x.document.documentElement,a?"width":"height"),a?x.document.documentElement.scrollWidth:x.document.documentElement.scrollHeight),_=a?x.innerWidth:x.innerHeight,k=a?window.scrollX:window.scrollY):(C=x[a?"scrollWidth":"scrollHeight"],_=$u(x,a?"width":"height"),k=x[a?"scrollLeft":"scrollTop"]);const w=C-_;if(g.top=Math.ceil(Math.max(Math.min(w,g.top),0)),$P(_,C)||g.top===k){i({scrollHeight:C,scrollTop:k,viewportHeight:_}),v&&e(!0);return}v?(s.current=g.top,h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{h.current=null,s.current=null,e(!0)},1e3)):s.current=null,a&&(g={behavior:g.behavior,left:g.top}),x.scrollTo(g)}function y(g){a&&(g={behavior:g.behavior,left:g.top}),c.current.scrollBy(g)}return{scrollByCallback:y,scrollerRef:c,scrollToCallback:m}}const h1="-webkit-sticky",r3="sticky",QP=HP(()=>{if(typeof document>"u")return r3;const i=document.createElement("div");return i.style.position=h1,i.style.position===h1?h1:r3});function uC(i){return i}const RK=sn(()=>{const i=ti(h=>`Item ${h}`),e=ti(null),t=ti(h=>`Group ${h}`),r=ti({}),n=ti(uC),a=ti("div"),c=ti(Jp),s=(h,p=null)=>Pa(qt(r,Mi(m=>m[h]),Ln()),p);return{components:r,computeItemKey:n,context:e,EmptyPlaceholder:s("EmptyPlaceholder"),FooterComponent:s("Footer"),GroupComponent:s("Group","div"),groupContent:t,HeaderComponent:s("Header"),HeaderFooterTag:a,ItemComponent:s("Item","div"),itemContent:i,ListComponent:s("List","div"),ScrollerComponent:s("Scroller","div"),scrollerRef:c,ScrollSeekPlaceholder:s("ScrollSeekPlaceholder"),TopItemListComponent:s("TopItemList")}}),LK=sn(([i,e])=>({...i,...e}),Nn(qP,RK)),NK=({height:i})=>z.jsx("div",{style:{height:i}}),zK={overflowAnchor:"none",position:QP(),zIndex:1},JP={overflowAnchor:"none"},OK={...JP,display:"inline-block",height:"100%"},n3=de.memo(function({showTopList:i=!1}){const e=mr("listState"),t=Ko("sizeRanges"),r=mr("useWindowScroll"),n=mr("customScrollParent"),a=Ko("windowScrollContainerState"),c=Ko("scrollContainerState"),s=n||r?a:c,h=mr("itemContent"),p=mr("context"),m=mr("groupContent"),y=mr("trackItemSizes"),g=mr("itemSize"),x=mr("log"),v=Ko("gap"),_=mr("horizontalDirection"),{callbackRef:C}=KX(t,g,y,i?Jp:s,x,v,n,_,mr("skipAnimationFrameInResizeObserver")),[k,w]=de.useState(0);dC("deviation",R=>{k!==R&&w(R)});const E=mr("EmptyPlaceholder"),A=mr("ScrollSeekPlaceholder")||NK,M=mr("ListComponent"),S=mr("ItemComponent"),N=mr("GroupComponent"),Y=mr("computeItemKey"),Z=mr("isSeeking"),K=mr("groupIndices").length>0,U=mr("alignToBottom"),$=mr("initialItemFinalLocationReached"),B=i?{}:{boxSizing:"border-box",..._?{display:"inline-block",height:"100%",marginLeft:k!==0?k:U?"auto":0,paddingLeft:e.offsetTop,paddingRight:e.offsetBottom,whiteSpace:"nowrap"}:{marginTop:k!==0?k:U?"auto":0,paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},...$?{}:{visibility:"hidden"}};return!i&&e.totalCount===0&&E?z.jsx(E,{...ga(E,p)}):z.jsx(M,{...ga(M,p),"data-testid":i?"virtuoso-top-item-list":"virtuoso-item-list",ref:C,style:B,children:(i?e.topItems:e.items).map(R=>{const L=R.originalIndex,G=Y(L+e.firstItemIndex,R.data,p);return Z?Ie.createElement(A,{...ga(A,p),height:R.size,index:R.index,key:G,type:R.type||"item",...R.type==="group"?{}:{groupIndex:R.groupIndex}}):R.type==="group"?Ie.createElement(N,{...ga(N,p),"data-index":L,"data-item-index":R.index,"data-known-size":R.size,key:G,style:zK},m(R.index,p)):Ie.createElement(S,{...ga(S,p),...$K(S,R.data),"data-index":L,"data-item-group-index":R.groupIndex,"data-item-index":R.index,"data-known-size":R.size,key:G,style:_?OK:JP},K?h(R.index,R.groupIndex,R.data,p):h(R.index,R.data,p))})})}),jK={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},FK={outline:"none",overflowX:"auto",position:"relative"},Sx=i=>({height:"100%",position:"absolute",top:0,width:"100%",...i?{display:"flex",flexDirection:"column"}:{}}),BK={position:QP(),top:0,width:"100%",zIndex:1};function ga(i,e){if(typeof i!="string")return{context:e}}function $K(i,e){return{item:typeof i=="string"?void 0:e}}const UK=de.memo(function(){const i=mr("HeaderComponent"),e=Ko("headerHeight"),t=mr("HeaderFooterTag"),r=fh(de.useMemo(()=>a=>{e($u(a,"height"))},[e]),!0,mr("skipAnimationFrameInResizeObserver")),n=mr("context");return i?z.jsx(t,{ref:r,children:z.jsx(i,{...ga(i,n)})}):null}),VK=de.memo(function(){const i=mr("FooterComponent"),e=Ko("footerHeight"),t=mr("HeaderFooterTag"),r=fh(de.useMemo(()=>a=>{e($u(a,"height"))},[e]),!0,mr("skipAnimationFrameInResizeObserver")),n=mr("context");return i?z.jsx(t,{ref:r,children:z.jsx(i,{...ga(i,n)})}):null});function eD({useEmitter:i,useEmitterValue:e,usePublisher:t}){return de.memo(function({children:r,style:n,...a}){const c=t("scrollContainerState"),s=e("ScrollerComponent"),h=t("smoothScrollTargetReached"),p=e("scrollerRef"),m=e("context"),y=e("horizontalDirection")||!1,{scrollByCallback:g,scrollerRef:x,scrollToCallback:v}=KP(c,h,s,p,void 0,y);return i("scrollTo",v),i("scrollBy",g),z.jsx(s,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:x,style:{...y?FK:jK,...n},tabIndex:0,...a,...ga(s,m),children:r})})}function tD({useEmitter:i,useEmitterValue:e,usePublisher:t}){return de.memo(function({children:r,style:n,...a}){const c=t("windowScrollContainerState"),s=e("ScrollerComponent"),h=t("smoothScrollTargetReached"),p=e("totalListHeight"),m=e("deviation"),y=e("customScrollParent"),g=e("context"),x=de.useRef(null),v=e("scrollerRef"),{scrollByCallback:_,scrollerRef:C,scrollToCallback:k}=KP(c,h,s,v,y);return XP(()=>{var w;return C.current=y||((w=x.current)==null?void 0:w.ownerDocument.defaultView),()=>{C.current=null}},[C,y]),i("windowScrollTo",k),i("scrollBy",_),z.jsx(s,{ref:x,"data-virtuoso-scroller":!0,style:{position:"relative",...n,...p!==0?{height:p+m}:{}},...a,...ga(s,g),children:r})})}const GK=({children:i})=>{const e=de.useContext(YP),t=Ko("viewportHeight"),r=Ko("fixedItemHeight"),n=mr("alignToBottom"),a=mr("horizontalDirection"),c=de.useMemo(()=>kP(t,h=>$u(h,a?"width":"height")),[t,a]),s=fh(c,!0,mr("skipAnimationFrameInResizeObserver"));return de.useEffect(()=>{e&&(t(e.viewportHeight),r(e.itemHeight))},[e,t,r]),z.jsx("div",{"data-viewport-type":"element",ref:s,style:Sx(n),children:i})},HK=({children:i})=>{const e=de.useContext(YP),t=Ko("windowViewportRect"),r=Ko("fixedItemHeight"),n=mr("customScrollParent"),a=AP(t,n,mr("skipAnimationFrameInResizeObserver")),c=mr("alignToBottom");return de.useEffect(()=>{e&&(r(e.itemHeight),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:100}))},[e,t,r]),z.jsx("div",{"data-viewport-type":"window",ref:a,style:Sx(c),children:i})},qK=({children:i})=>{const e=mr("TopItemListComponent")||"div",t=mr("headerHeight"),r={...BK,marginTop:`${t}px`},n=mr("context");return z.jsx(e,{style:r,...ga(e,n),children:i})},WK=de.memo(function(i){const e=mr("useWindowScroll"),t=mr("topItemsIndexes").length>0,r=mr("customScrollParent"),n=mr("context"),a=r||e?XK:ZK,c=r||e?HK:GK;return z.jsxs(a,{...i,...ga(a,n),children:[t&&z.jsx(qK,{children:z.jsx(n3,{showTopList:!0})}),z.jsxs(c,{children:[z.jsx(UK,{}),z.jsx(n3,{}),z.jsx(VK,{})]})]})}),{Component:YK,useEmitter:dC,useEmitterValue:mr,usePublisher:Ko}=WP(LK,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},WK),ZK=eD({useEmitter:dC,useEmitterValue:mr,usePublisher:Ko}),XK=tD({useEmitter:dC,useEmitterValue:mr,usePublisher:Ko}),KK=YK,QK=sn(()=>{const i=ti(h=>z.jsxs("td",{children:["Item $",h]})),e=ti(null),t=ti(null),r=ti(null),n=ti({}),a=ti(uC),c=ti(Jp),s=(h,p=null)=>Pa(qt(n,Mi(m=>m[h]),Ln()),p);return{components:n,computeItemKey:a,context:e,EmptyPlaceholder:s("EmptyPlaceholder"),FillerRow:s("FillerRow"),fixedFooterContent:r,fixedHeaderContent:t,itemContent:i,ScrollerComponent:s("Scroller","div"),scrollerRef:c,ScrollSeekPlaceholder:s("ScrollSeekPlaceholder"),TableBodyComponent:s("TableBody","tbody"),TableComponent:s("Table","table"),TableFooterComponent:s("TableFoot","tfoot"),TableHeadComponent:s("TableHead","thead"),TableRowComponent:s("TableRow","tr")}});Nn(qP,QK);const s3={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},JK={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:a3,floor:bv,max:Gm,min:p1,round:o3}=Math;function l3(i,e,t){return Array.from({length:e-i+1}).map((r,n)=>({data:t===null?null:t[n+i],index:n+i}))}function eQ(i){return{...JK,items:i}}function f0(i,e){return i&&i.width===e.width&&i.height===e.height}function tQ(i,e){return i&&i.column===e.column&&i.row===e.row}const iQ=sn(([{increaseViewportBy:i,listBoundary:e,overscan:t,visibleRange:r},{footerHeight:n,headerHeight:a,scrollBy:c,scrollContainerState:s,scrollTo:h,scrollTop:p,smoothScrollTargetReached:m,viewportHeight:y},g,x,{didMount:v,propsReady:_},{customScrollParent:C,useWindowScroll:k,windowScrollContainerState:w,windowScrollTo:E,windowViewportRect:A},M])=>{const S=ti(0),N=ti(0),Y=ti(s3),Z=ti({height:0,width:0}),K=ti({height:0,width:0}),U=Vr(),$=Vr(),B=ti(0),R=ti(null),L=ti({column:0,row:0}),G=Vr(),F=Vr(),j=ti(!1),q=ti(0),W=ti(!0),se=ti(!1),fe=ti(!1);pn(qt(v,kr(q),or(([J,ie])=>!!ie)),()=>{Tr(W,!1)}),pn(qt(Fs(v,W,K,Z,q,se),or(([J,ie,le,be,,te])=>J&&!ie&&le.height!==0&&be.height!==0&&!te)),([,,,,J])=>{Tr(se,!0),aC(1,()=>{Tr(U,J)}),Ql(qt(p),()=>{Tr(e,[0,0]),Tr(W,!0)})}),Fi(qt(F,or(J=>J!=null&&J.scrollTop>0),Nl(0)),N),pn(qt(v,kr(F),or(([,J])=>J!=null)),([,J])=>{J&&(Tr(Z,J.viewport),Tr(K,J.item),Tr(L,J.gap),J.scrollTop>0&&(Tr(j,!0),Ql(qt(p,jp(1)),ie=>{Tr(j,!1)}),Tr(h,{top:J.scrollTop})))}),Fi(qt(Z,Mi(({height:J})=>J)),y),Fi(qt(Fs(hr(Z,f0),hr(K,f0),hr(L,(J,ie)=>J&&J.column===ie.column&&J.row===ie.row),hr(p)),Mi(([J,ie,le,be])=>({gap:le,item:ie,scrollTop:be,viewport:J}))),G),Fi(qt(Fs(hr(S),r,hr(L,tQ),hr(K,f0),hr(Z,f0),hr(R),hr(N),hr(j),hr(W),hr(q)),or(([,,,,,,,J])=>!J),Mi(([J,[ie,le],be,te,ae,ce,xe,,_e,Ne])=>{const{column:ke,row:Le}=be,{height:me,width:Re}=te,{width:$e}=ae;if(xe===0&&(J===0||$e===0))return s3;if(Re===0){const rt=oC(Ne,J),dt=rt+Math.max(xe-1,0);return eQ(l3(rt,dt,ce))}const De=iD($e,Re,ke);let Se,Pe;_e?ie===0&&le===0&&xe>0?(Se=0,Pe=xe-1):(Se=De*bv((ie+Le)/(me+Le)),Pe=De*a3((le+Le)/(me+Le))-1,Pe=p1(J-1,Gm(Pe,De-1)),Se=p1(Pe,Gm(0,Se))):(Se=0,Pe=-1);const Fe=l3(Se,Pe,ce),{bottom:je,top:He}=c3(ae,be,te,Fe),Qe=a3(J/De),at=Qe*me+(Qe-1)*Le-je;return{bottom:je,itemHeight:me,items:Fe,itemWidth:Re,offsetBottom:at,offsetTop:He,top:He}})),Y),Fi(qt(R,or(J=>J!==null),Mi(J=>J.length)),S),Fi(qt(Fs(Z,K,Y,L),or(([J,ie,{items:le}])=>le.length>0&&ie.height!==0&&J.height!==0),Mi(([J,ie,{items:le},be])=>{const{bottom:te,top:ae}=c3(J,be,ie,le);return[ae,te]}),Ln(cg)),e);const ee=ti(!1);Fi(qt(p,kr(ee),Mi(([J,ie])=>ie||J!==0)),ee);const oe=No(qt(Fs(Y,S),or(([{items:J}])=>J.length>0),kr(ee),or(([[J,ie],le])=>{const be=J.items[J.items.length-1].index===ie-1;return(le||J.bottom>0&&J.itemHeight>0&&J.offsetBottom===0&&J.items.length===ie)&&be}),Mi(([[,J]])=>J-1),Ln())),Ce=No(qt(hr(Y),or(({items:J})=>J.length>0&&J[0].index===0),Nl(0),Ln())),ge=No(qt(hr(Y),kr(j),or(([{items:J},ie])=>J.length>0&&!ie),Mi(([{items:J}])=>({endIndex:J[J.length-1].index,startIndex:J[0].index})),Ln(NP),Mu(0)));Fi(ge,x.scrollSeekRangeChanged),Fi(qt(U,kr(Z,K,S,L),Mi(([J,ie,le,be,te])=>{const ae=BP(J),{align:ce,behavior:xe,offset:_e}=ae;let Ne=ae.index;Ne==="LAST"&&(Ne=be-1),Ne=Gm(0,Ne,p1(be-1,Ne));let ke=Yw(ie,te,le,Ne);return ce==="end"?ke=o3(ke-ie.height+le.height):ce==="center"&&(ke=o3(ke-ie.height/2+le.height/2)),_e&&(ke+=_e),{behavior:xe,top:ke}})),h);const Ee=Pa(qt(Y,Mi(J=>J.offsetBottom+J.bottom)),0);return Fi(qt(A,Mi(J=>({height:J.visibleHeight,width:J.visibleWidth}))),Z),{customScrollParent:C,data:R,deviation:B,footerHeight:n,gap:L,headerHeight:a,increaseViewportBy:i,initialItemCount:N,itemDimensions:K,overscan:t,restoreStateFrom:F,scrollBy:c,scrollContainerState:s,scrollHeight:$,scrollTo:h,scrollToIndex:U,scrollTop:p,smoothScrollTargetReached:m,totalCount:S,useWindowScroll:k,viewportDimensions:Z,windowScrollContainerState:w,windowScrollTo:E,windowViewportRect:A,...x,gridState:Y,horizontalDirection:fe,initialTopMostItemIndex:q,totalListHeight:Ee,...g,endReached:oe,propsReady:_,rangeChanged:ge,startReached:Ce,stateChanged:G,stateRestoreInProgress:j,...M}},Nn(lC,io,qg,GP,Zu,cC,Yu));function iD(i,e,t){return Gm(1,bv((i+t)/(bv(e)+t)))}function c3(i,e,t,r){const{height:n}=t;if(n===void 0||r.length===0)return{bottom:0,top:0};const a=Yw(i,e,t,r[0].index);return{bottom:Yw(i,e,t,r[r.length-1].index)+n,top:a}}function Yw(i,e,t,r){const n=iD(i.width,t.width,e.column),a=bv(r/n),c=a*t.height+Gm(0,a-1)*e.row;return c>0?c+e.row:c}const rQ=sn(()=>{const i=ti(y=>`Item ${y}`),e=ti({}),t=ti(null),r=ti("virtuoso-grid-item"),n=ti("virtuoso-grid-list"),a=ti(uC),c=ti("div"),s=ti(Jp),h=(y,g=null)=>Pa(qt(e,Mi(x=>x[y]),Ln()),g),p=ti(!1),m=ti(!1);return Fi(hr(m),p),{components:e,computeItemKey:a,context:t,FooterComponent:h("Footer"),HeaderComponent:h("Header"),headerFooterTag:c,itemClassName:r,ItemComponent:h("Item","div"),itemContent:i,listClassName:n,ListComponent:h("List","div"),readyStateChanged:p,reportReadyState:m,ScrollerComponent:h("Scroller","div"),scrollerRef:s,ScrollSeekPlaceholder:h("ScrollSeekPlaceholder","div")}}),nQ=sn(([i,e])=>({...i,...e}),Nn(iQ,rQ)),sQ=de.memo(function(){const i=Bn("gridState"),e=Bn("listClassName"),t=Bn("itemClassName"),r=Bn("itemContent"),n=Bn("computeItemKey"),a=Bn("isSeeking"),c=Qo("scrollHeight"),s=Bn("ItemComponent"),h=Bn("ListComponent"),p=Bn("ScrollSeekPlaceholder"),m=Bn("context"),y=Qo("itemDimensions"),g=Qo("gap"),x=Bn("log"),v=Bn("stateRestoreInProgress"),_=Qo("reportReadyState"),C=fh(de.useMemo(()=>k=>{const w=k.parentElement.parentElement.scrollHeight;c(w);const E=k.firstChild;if(E){const{height:A,width:M}=E.getBoundingClientRect();y({height:A,width:M})}g({column:u3("column-gap",getComputedStyle(k).columnGap,x),row:u3("row-gap",getComputedStyle(k).rowGap,x)})},[c,y,g,x]),!0,!1);return XP(()=>{i.itemHeight>0&&i.itemWidth>0&&_(!0)},[i]),v?null:z.jsx(h,{className:e,ref:C,...ga(h,m),"data-testid":"virtuoso-item-list",style:{paddingBottom:i.offsetBottom,paddingTop:i.offsetTop},children:i.items.map(k=>{const w=n(k.index,k.data,m);return a?z.jsx(p,{...ga(p,m),height:i.itemHeight,index:k.index,width:i.itemWidth},w):Ie.createElement(s,{...ga(s,m),className:t,"data-index":k.index,key:w},r(k.index,k.data,m))})})}),aQ=de.memo(function(){const i=Bn("HeaderComponent"),e=Qo("headerHeight"),t=Bn("headerFooterTag"),r=fh(de.useMemo(()=>a=>{e($u(a,"height"))},[e]),!0,!1),n=Bn("context");return i?z.jsx(t,{ref:r,children:z.jsx(i,{...ga(i,n)})}):null}),oQ=de.memo(function(){const i=Bn("FooterComponent"),e=Qo("footerHeight"),t=Bn("headerFooterTag"),r=fh(de.useMemo(()=>a=>{e($u(a,"height"))},[e]),!0,!1),n=Bn("context");return i?z.jsx(t,{ref:r,children:z.jsx(i,{...ga(i,n)})}):null}),lQ=({children:i})=>{const e=de.useContext(ZP),t=Qo("itemDimensions"),r=Qo("viewportDimensions"),n=fh(de.useMemo(()=>a=>{r(a.getBoundingClientRect())},[r]),!0,!1);return de.useEffect(()=>{e&&(r({height:e.viewportHeight,width:e.viewportWidth}),t({height:e.itemHeight,width:e.itemWidth}))},[e,r,t]),z.jsx("div",{ref:n,style:Sx(!1),children:i})},cQ=({children:i})=>{const e=de.useContext(ZP),t=Qo("windowViewportRect"),r=Qo("itemDimensions"),n=Bn("customScrollParent"),a=AP(t,n,!1);return de.useEffect(()=>{e&&(r({height:e.itemHeight,width:e.itemWidth}),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:e.viewportWidth}))},[e,t,r]),z.jsx("div",{ref:a,style:Sx(!1),children:i})},uQ=de.memo(function({...i}){const e=Bn("useWindowScroll"),t=Bn("customScrollParent"),r=t||e?hQ:dQ,n=t||e?cQ:lQ,a=Bn("context");return z.jsx(r,{...i,...ga(r,a),children:z.jsxs(n,{children:[z.jsx(aQ,{}),z.jsx(sQ,{}),z.jsx(oQ,{})]})})}),{useEmitter:rD,useEmitterValue:Bn,usePublisher:Qo}=WP(nQ,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},uQ),dQ=eD({useEmitter:rD,useEmitterValue:Bn,usePublisher:Qo}),hQ=tD({useEmitter:rD,useEmitterValue:Bn,usePublisher:Qo});function u3(i,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${i} was not resolved to pixel value correctly`,e,po.WARN),e==="normal"?0:parseInt(e??"0",10)}function Zw(){return Zw=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Zw.apply(null,arguments)}const nD=({evaluationPerOrgUnits:i,useVirtuoso:e=!0,useVirtuosoWindowScroll:t=!1,virtuosoProps:r,nameLabel:n})=>e?de.createElement(KK,Zw({},r,{style:{height:"100%"},useWindowScroll:t,totalCount:i.length,itemContent:a=>de.createElement(GE,{orgUnitsData:i[a],nameLabel:n})})):de.createElement(de.Fragment,null,i.map(a=>a?de.createElement(GE,{key:a.orgUnitId,orgUnitsData:a,nameLabel:n}):null));function Xw(){return Xw=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Xw.apply(null,arguments)}const pQ=({splitPeriods:i,setSelectedSplitPeriod:e,selectedSplitPeriod:t,...r})=>{const n=i.includes(t);return de.createElement("div",null,de.createElement("div",null,de.createElement(hs,Xw({},r,{selected:n?t:void 0,onChange:a=>e(a.selected)}),i.map((a,c)=>de.createElement(As,{key:c,label:TP(a),value:a})))))},fQ="_wrapper_1ir4t_7",mQ="_filterCheckbox_1ir4t_14",gQ="_filter_1ir4t_14",yQ="_plots_1ir4t_25",vQ="_searchInput_1ir4t_29",xQ="_filterTitle_1ir4t_34",Md={wrapper:fQ,filterCheckbox:mQ,filter:gQ,plots:yQ,searchInput:vQ,filterTitle:xQ},bQ=({evaluationName:i,modelName:e,evaluations:t,splitPeriods:r})=>{var n;const[a,c]=Ie.useState([]),[s,h]=Ie.useState(),[p,m]=Ie.useState([]),[y,g]=Ie.useState([]),[x,v]=Ie.useState(r[0]);Ie.useEffect(()=>{const C=t[0];m(C.evaluation.map(k=>k.orgUnitId)),g(C.evaluation.map(k=>({name:k.orgUnitName,id:k.orgUnitId}))),v(C.splitPoint),c(C.evaluation)},[t,r]),Ie.useEffect(()=>{const C=t.find(w=>w.splitPoint===x),k=p==null?void 0:p.map(w=>C.evaluation.find(E=>E.orgUnitId===w&&E.orgUnitName.toLocaleLowerCase().includes(s?s.toLocaleLowerCase():"")));c(k)},[x,p,s]);const _=C=>{const k=C.checked?[...p,C.value]:p.filter(w=>w!==C.value);m(k)};return de.createElement(de.Fragment,null,de.createElement("div",{className:Md.wrapper},de.createElement("div",{className:Md.filter},de.createElement("div",null,de.createElement("h2",null,"Evaluation: ",i)),de.createElement("div",null,de.createElement("div",{className:Md.filterTitle},"Split period:"),de.createElement(pQ,{splitPeriods:r,setSelectedSplitPeriod:v,selectedSplitPeriod:x})),de.createElement("div",null,de.createElement("div",{className:Md.filterTitle},"Organization units:"),de.createElement("div",{className:Md.filterCheckbox},y.map(C=>de.createElement(pl,{checked:p.filter(k=>k==C.id).length>0,onChange:_,label:C.name,key:C.id,value:C.id}))))),de.createElement("div",{className:Md.plots},de.createElement("div",null,de.createElement("h3",null,"Model: ",e)),de.createElement("div",{className:Md.searchInput},de.createElement(Yl,{label:"Search for organization units:",placeholder:((n=y[0])===null||n===void 0?void 0:n.name)+"..",onChange:C=>h(C.value),value:s})),de.createElement(nD,{evaluationPerOrgUnits:a,useVirtuoso:!0}))))},wQ="_table_11vie_1",_Q={table:wQ},d3=i=>[...new Set(i.map(e=>e.period))],CQ=i=>[...new Set(i.map(e=>e.orgUnit))],TQ=i=>[...new Set(i.map(e=>e.dataElement))],SQ=(i,e)=>{var t;return(t=e.find(r=>r.orgUnit===i))===null||t===void 0?void 0:t.displayName},EQ=({data:i})=>{const e=i.dataValues;return de.createElement(de.Fragment,null,CQ(e).map(t=>de.createElement("div",{key:t},de.createElement("h3",null,ve.t("Prediction for {{orgUnitName}}",{orgUnitName:SQ(t,e)})),de.createElement("table",{className:_Q.table},de.createElement("thead",null,de.createElement("tr",null,de.createElement("th",null,"Quantiles"),d3(e).map(r=>de.createElement("th",{key:r},Q2({periodId:r,calendar:"gregory"}).displayName)))),de.createElement("tbody",null,TQ(e).map(r=>de.createElement("tr",{key:r},de.createElement("td",null,r.replaceAll("_"," ")),d3(e).map(n=>de.createElement("td",{key:n},e.filter(a=>a.dataElement===r&&a.orgUnit===t&&a.period===n)[0].value)))))))))};var kQ={exports:{}};(function(i,e){(function(t,r){i.exports=r()})(Tn,function(){var t,r,n;function a(s,h){if(!t)t=h;else if(!r)r=h;else{var p="var sharedChunk = {}; ("+t+")(sharedChunk); ("+r+")(sharedChunk);",m={};t(m),n=h(m),typeof window<"u"&&(n.workerUrl=window.URL.createObjectURL(new Blob([p],{type:"text/javascript"})))}}a(["exports"],function(s){var h=p;function p(u,o,d,b){this.cx=3*u,this.bx=3*(d-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(b-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=o,this.p2x=d,this.p2y=b}function m(u,o,d,b){const P=new h(u,o,d,b);return function(O){return P.solve(O)}}p.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,o){if(o===void 0&&(o=1e-6),u<0)return 0;if(u>1)return 1;for(var d=u,b=0;b<8;b++){var P=this.sampleCurveX(d)-u;if(Math.abs(P)<o)return d;var O=this.sampleCurveDerivativeX(d);if(Math.abs(O)<1e-6)break;d-=P/O}var H=0,ne=1;for(d=u,b=0;b<20&&(P=this.sampleCurveX(d),!(Math.abs(P-u)<o));b++)u>P?H=d:ne=d,d=.5*(ne-H)+H;return d},solve:function(u,o){return this.sampleCurveY(this.solveCurveX(u,o))}};const y=m(.25,.1,.25,1);function g(u,o,d){return Math.min(d,Math.max(o,u))}function x(u,o,d){const b=d-o,P=((u-o)%b+b)%b+o;return P===o?d:P}function v(u,...o){for(const d of o)for(const b in d)u[b]=d[b];return u}let _=1;function C(u,o){u.forEach(d=>{o[d]&&(o[d]=o[d].bind(o))})}function k(u,o,d){const b={};for(const P in u)b[P]=o.call(d||this,u[P],P,u);return b}function w(u,o,d){const b={};for(const P in u)o.call(d||this,u[P],P,u)&&(b[P]=u[P]);return b}function E(u){return Array.isArray(u)?u.map(E):typeof u=="object"&&u?k(u,E):u}const A={};function M(u){A[u]||(typeof console<"u"&&console.warn(u),A[u]=!0)}function S(u,o,d){return(d.y-u.y)*(o.x-u.x)>(o.y-u.y)*(d.x-u.x)}function N(u){let o=0;for(let d,b,P=0,O=u.length,H=O-1;P<O;H=P++)d=u[P],b=u[H],o+=(b.x-d.x)*(d.y+b.y);return o}function Y(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Z(u){const o={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(d,b,P,O)=>{const H=P||O;return o[b]=!H||H.toLowerCase(),""}),o["max-age"]){const d=parseInt(o["max-age"],10);isNaN(d)?delete o["max-age"]:o["max-age"]=d}return o}let K,U,$=null;function B(u){if($==null){const o=u.navigator?u.navigator.userAgent:null;$=!!u.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return $}function R(u){return typeof ImageBitmap<"u"&&u instanceof ImageBitmap}const L={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(u){const o=requestAnimationFrame(u);return{cancel:()=>cancelAnimationFrame(o)}},getImageData(u,o=0){const d=window.document.createElement("canvas"),b=d.getContext("2d");if(!b)throw new Error("failed to create canvas 2d context");return d.width=u.width,d.height=u.height,b.drawImage(u,0,0,u.width,u.height),b.getImageData(-o,-o,u.width+2*o,u.height+2*o)},resolveURL:u=>(K||(K=document.createElement("a")),K.href=u,K.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(U==null&&(U=matchMedia("(prefers-reduced-motion: reduce)")),U.matches)}};var G=F;function F(u,o){this.x=u,this.y=o}F.prototype={clone:function(){return new F(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,o){return this.clone()._rotateAround(u,o)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var o=u.x-this.x,d=u.y-this.y;return o*o+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,o){return Math.atan2(this.x*o-this.y*u,this.x*u+this.y*o)},_matMult:function(u){var o=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=o,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var o=Math.cos(u),d=Math.sin(u),b=d*this.x+o*this.y;return this.x=o*this.x-d*this.y,this.y=b,this},_rotateAround:function(u,o){var d=Math.cos(u),b=Math.sin(u),P=o.y+b*(this.x-o.x)+d*(this.y-o.y);return this.x=o.x+d*(this.x-o.x)-b*(this.y-o.y),this.y=P,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},F.convert=function(u){return u instanceof F?u:Array.isArray(u)?new F(u[0],u[1]):u};const j={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},q="mapbox-tiles";let W,se=500,fe=50;function ee(){typeof caches>"u"||W||(W=caches.open(q))}let oe=1/0;const Ce={supported:!1,testSupport:function(u){!J&&Ee&&(ie?le(u):ge=u)}};let ge,Ee,J=!1,ie=!1;function le(u){const o=u.createTexture();u.bindTexture(u.TEXTURE_2D,o);try{if(u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,Ee),u.isContextLost())return;Ce.supported=!0}catch{}u.deleteTexture(o),J=!0}typeof document<"u"&&(Ee=document.createElement("img"),Ee.onload=function(){ge&&le(ge),ge=null,ie=!0},Ee.onerror=function(){J=!0,ge=null},Ee.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const be={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(be);class te extends Error{constructor(o,d,b,P){super(`AJAXError: ${d} (${o}): ${b}`),this.status=o,this.statusText=d,this.url=b,this.body=P}}const ae=Y()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function ce(u,o){const d=new AbortController,b=new Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:ae(),signal:d.signal});let P=!1,O=!1;return u.type==="json"&&b.headers.set("Accept","application/json"),((H,ne,ue)=>{O||fetch(b).then(we=>we.ok?((Oe,Ue,qe)=>{(u.type==="arrayBuffer"?Oe.arrayBuffer():u.type==="json"?Oe.json():Oe.text()).then(Ze=>{O||(P=!0,o(null,Ze,Oe.headers.get("Cache-Control"),Oe.headers.get("Expires")))}).catch(Ze=>{O||o(new Error(Ze.message))})})(we):we.blob().then(Oe=>o(new te(we.status,we.statusText,u.url,Oe)))).catch(we=>{we.code!==20&&o(new Error(we.message))})})(),{cancel:()=>{O=!0,P||d.abort()}}}const xe=function(u,o){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){if(Y()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,o);if(!Y()){const b=u.url.substring(0,u.url.indexOf("://"));return(j.REGISTERED_PROTOCOLS[b]||ce)(u,o)}}if(!(/^file:/.test(d=u.url)||/^file:/.test(ae())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ce(u,o);if(Y()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,o,void 0,!0)}var d;return function(b,P){const O=new XMLHttpRequest;O.open(b.method||"GET",b.url,!0),b.type==="arrayBuffer"&&(O.responseType="arraybuffer");for(const H in b.headers)O.setRequestHeader(H,b.headers[H]);return b.type==="json"&&(O.responseType="text",O.setRequestHeader("Accept","application/json")),O.withCredentials=b.credentials==="include",O.onerror=()=>{P(new Error(O.statusText))},O.onload=()=>{if((O.status>=200&&O.status<300||O.status===0)&&O.response!==null){let H=O.response;if(b.type==="json")try{H=JSON.parse(O.response)}catch(ne){return P(ne)}P(null,H,O.getResponseHeader("Cache-Control"),O.getResponseHeader("Expires"))}else{const H=new Blob([O.response],{type:O.getResponseHeader("Content-Type")});P(new te(O.status,O.statusText,b.url,H))}},O.send(b.body),{cancel:()=>O.abort()}}(u,o)},_e=function(u,o){return xe(v(u,{type:"arrayBuffer"}),o)};function Ne(u){const o=window.document.createElement("a");return o.href=u,o.protocol===window.document.location.protocol&&o.host===window.document.location.host}const ke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Le,me;Le=[],me=0;const Re=function(u,o){if(Ce.supported&&(u.headers||(u.headers={}),u.headers.accept="image/webp,*/*"),me>=j.MAX_PARALLEL_IMAGE_REQUESTS){const O={requestParameters:u,callback:o,cancelled:!1,cancel(){this.cancelled=!0}};return Le.push(O),O}me++;let d=!1;const b=()=>{if(!d)for(d=!0,me--;Le.length&&me<j.MAX_PARALLEL_IMAGE_REQUESTS;){const O=Le.shift(),{requestParameters:H,callback:ne,cancelled:ue}=O;ue||(O.cancel=Re(H,ne).cancel)}},P=_e(u,(O,H,ne,ue)=>{b(),O?o(O):H&&function(we,Oe){typeof createImageBitmap=="function"?function(Ue,qe){const Ze=new Blob([new Uint8Array(Ue)],{type:"image/png"});createImageBitmap(Ze).then(Ke=>{qe(null,Ke)}).catch(Ke=>{qe(new Error(`Could not load image because of ${Ke.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(we,Oe):function(Ue,qe){const Ze=new Image;Ze.onload=()=>{qe(null,Ze),URL.revokeObjectURL(Ze.src),Ze.onload=null,window.requestAnimationFrame(()=>{Ze.src=ke})},Ze.onerror=()=>qe(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Ke=new Blob([new Uint8Array(Ue)],{type:"image/png"});Ze.src=Ue.byteLength?URL.createObjectURL(Ke):ke}(we,Oe)}(H,(we,Oe)=>{we!=null?o(we):Oe!=null&&o(null,Oe,{cacheControl:ne,expires:ue})})});return{cancel:()=>{P.cancel(),b()}}};function $e(u,o,d){d[u]&&d[u].indexOf(o)!==-1||(d[u]=d[u]||[],d[u].push(o))}function De(u,o,d){if(d&&d[u]){const b=d[u].indexOf(o);b!==-1&&d[u].splice(b,1)}}class Se{constructor(o,d={}){v(this,d),this.type=o}}class Pe extends Se{constructor(o,d={}){super("error",v({error:o},d))}}class Fe{on(o,d){return this._listeners=this._listeners||{},$e(o,d,this._listeners),this}off(o,d){return De(o,d,this._listeners),De(o,d,this._oneTimeListeners),this}once(o,d){return this._oneTimeListeners=this._oneTimeListeners||{},$e(o,d,this._oneTimeListeners),this}fire(o,d){typeof o=="string"&&(o=new Se(o,d||{}));const b=o.type;if(this.listens(b)){o.target=this;const P=this._listeners&&this._listeners[b]?this._listeners[b].slice():[];for(const ne of P)ne.call(this,o);const O=this._oneTimeListeners&&this._oneTimeListeners[b]?this._oneTimeListeners[b].slice():[];for(const ne of O)De(b,ne,this._oneTimeListeners),ne.call(this,o);const H=this._eventedParent;H&&(v(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),H.fire(o))}else o instanceof Pe&&console.error(o.error);return this}listens(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)}setEventedParent(o,d){return this._eventedParent=o,this._eventedParentData=d,this}}var je={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class He{constructor(o,d,b,P){this.message=(o?`${o}: `:"")+b,P&&(this.identifier=P),d!=null&&d.__line__&&(this.line=d.__line__)}}function Qe(u){const o=u.value;return o?[new He(u.key,o,"constants have been deprecated as of v8")]:[]}function at(u,...o){for(const d of o)for(const b in d)u[b]=d[b];return u}function rt(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function dt(u){if(Array.isArray(u))return u.map(dt);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const o={};for(const d in u)o[d]=dt(u[d]);return o}return rt(u)}class gt extends Error{constructor(o,d){super(d),this.message=d,this.key=o}}class Tt{constructor(o,d=[]){this.parent=o,this.bindings={};for(const[b,P]of d)this.bindings[b]=P}concat(o){return new Tt(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const Nt={kind:"null"},mt={kind:"number"},St={kind:"string"},kt={kind:"boolean"},ii={kind:"color"},fi={kind:"object"},Ht={kind:"value"},fr={kind:"collator"},nr={kind:"formatted"},vr={kind:"padding"},Rr={kind:"resolvedImage"};function sr(u,o){return{kind:"array",itemType:u,N:o}}function xr(u){if(u.kind==="array"){const o=xr(u.itemType);return typeof u.N=="number"?`array<${o}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${o}>`}return u.kind}const ht=[Nt,mt,St,kt,ii,nr,fi,sr(Ht),vr,Rr];function bt(u,o){if(o.kind==="error")return null;if(u.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!bt(u.itemType,o.itemType))&&(typeof u.N!="number"||u.N===o.N))return null}else{if(u.kind===o.kind)return null;if(u.kind==="value"){for(const d of ht)if(!bt(d,o))return null}}return`Expected ${xr(u)} but found ${xr(o)} instead.`}function Mt(u,o){return o.some(d=>d.kind===u.kind)}function $t(u,o){return o.some(d=>d==="null"?u===null:d==="array"?Array.isArray(u):d==="object"?u&&!Array.isArray(u)&&typeof u=="object":d===typeof u)}var Zt,ki={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Di(u){return(u=Math.round(u))<0?0:u>255?255:u}function We(u){return Di(u[u.length-1]==="%"?parseFloat(u)/100*255:parseInt(u))}function Te(u){return(o=u[u.length-1]==="%"?parseFloat(u)/100:parseFloat(u))<0?0:o>1?1:o;var o}function ze(u,o,d){return d<0?d+=1:d>1&&(d-=1),6*d<1?u+(o-u)*d*6:2*d<1?o:3*d<2?u+(o-u)*(2/3-d)*6:u}try{Zt={}.parseCSSColor=function(u){var o,d=u.replace(/ /g,"").toLowerCase();if(d in ki)return ki[d].slice();if(d[0]==="#")return d.length===4?(o=parseInt(d.substr(1),16))>=0&&o<=4095?[(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,1]:null:d.length===7&&(o=parseInt(d.substr(1),16))>=0&&o<=16777215?[(16711680&o)>>16,(65280&o)>>8,255&o,1]:null;var b=d.indexOf("("),P=d.indexOf(")");if(b!==-1&&P+1===d.length){var O=d.substr(0,b),H=d.substr(b+1,P-(b+1)).split(","),ne=1;switch(O){case"rgba":if(H.length!==4)return null;ne=Te(H.pop());case"rgb":return H.length!==3?null:[We(H[0]),We(H[1]),We(H[2]),ne];case"hsla":if(H.length!==4)return null;ne=Te(H.pop());case"hsl":if(H.length!==3)return null;var ue=(parseFloat(H[0])%360+360)%360/360,we=Te(H[1]),Oe=Te(H[2]),Ue=Oe<=.5?Oe*(we+1):Oe+we-Oe*we,qe=2*Oe-Ue;return[Di(255*ze(qe,Ue,ue+1/3)),Di(255*ze(qe,Ue,ue)),Di(255*ze(qe,Ue,ue-1/3)),ne];default:return null}}return null}}catch{}class Ve{constructor(o,d,b,P=1){this.r=o,this.g=d,this.b=b,this.a=P}static parse(o){if(!o)return;if(o instanceof Ve)return o;if(typeof o!="string")return;const d=Zt(o);return d?new Ve(d[0]/255*d[3],d[1]/255*d[3],d[2]/255*d[3],d[3]):void 0}toString(){const[o,d,b,P]=this.toArray();return`rgba(${Math.round(o)},${Math.round(d)},${Math.round(b)},${P})`}toArray(){const{r:o,g:d,b,a:P}=this;return P===0?[0,0,0,0]:[255*o/P,255*d/P,255*b/P,P]}}Ve.black=new Ve(0,0,0,1),Ve.white=new Ve(1,1,1,1),Ve.transparent=new Ve(0,0,0,0),Ve.red=new Ve(1,0,0,1);class Xe{constructor(o,d,b){this.sensitivity=o?d?"variant":"case":d?"accent":"base",this.locale=b,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,d){return this.collator.compare(o,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class et{constructor(o,d,b,P,O){this.text=o,this.image=d,this.scale=b,this.fontStack=P,this.textColor=O}}class ct{constructor(o){this.sections=o}static fromString(o){return new ct([new et(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||o.image&&o.image.name.length!==0)}static factory(o){return o instanceof ct?o:ct.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}}class ot{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof ot)return o;if(typeof o=="number")return new ot([o,o,o,o]);if(Array.isArray(o)&&!(o.length<1||o.length>4)){for(const d of o)if(typeof d!="number")return;switch(o.length){case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}return new ot(o)}}toString(){return JSON.stringify(this.values)}}class nt{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new nt({name:o,available:!1}):null}}function ft(u,o,d,b){return typeof u=="number"&&u>=0&&u<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof d=="number"&&d>=0&&d<=255?b===void 0||typeof b=="number"&&b>=0&&b<=1?null:`Invalid rgba value [${[u,o,d,b].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof b=="number"?[u,o,d,b]:[u,o,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function wt(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof Ve||u instanceof Xe||u instanceof ct||u instanceof ot||u instanceof nt)return!0;if(Array.isArray(u)){for(const o of u)if(!wt(o))return!1;return!0}if(typeof u=="object"){for(const o in u)if(!wt(u[o]))return!1;return!0}return!1}function zt(u){if(u===null)return Nt;if(typeof u=="string")return St;if(typeof u=="boolean")return kt;if(typeof u=="number")return mt;if(u instanceof Ve)return ii;if(u instanceof Xe)return fr;if(u instanceof ct)return nr;if(u instanceof ot)return vr;if(u instanceof nt)return Rr;if(Array.isArray(u)){const o=u.length;let d;for(const b of u){const P=zt(b);if(d){if(d===P)continue;d=Ht;break}d=P}return sr(d||Ht,o)}return fi}function Rt(u){const o=typeof u;return u===null?"":o==="string"||o==="number"||o==="boolean"?String(u):u instanceof Ve||u instanceof ct||u instanceof ot||u instanceof nt?u.toString():JSON.stringify(u)}class ci{constructor(o,d){this.type=o,this.value=d}static parse(o,d){if(o.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!wt(o[1]))return d.error("invalid value");const b=o[1];let P=zt(b);const O=d.expectedType;return P.kind!=="array"||P.N!==0||!O||O.kind!=="array"||typeof O.N=="number"&&O.N!==0||(P=O),new ci(P,b)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Wt{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const gi={string:St,number:mt,boolean:kt,object:fi};class vi{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");let b,P=1;const O=o[0];if(O==="array"){let ne,ue;if(o.length>2){const we=o[1];if(typeof we!="string"||!(we in gi)||we==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);ne=gi[we],P++}else ne=Ht;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return d.error('The length argument to "array" must be a positive integer literal',2);ue=o[2],P++}b=sr(ne,ue)}else{if(!gi[O])throw new Error(`Types doesn't contain name = ${O}`);b=gi[O]}const H=[];for(;P<o.length;P++){const ne=d.parse(o[P],P,Ht);if(!ne)return null;H.push(ne)}return new vi(b,H)}evaluate(o){for(let d=0;d<this.args.length;d++){const b=this.args[d].evaluate(o);if(!bt(this.type,zt(b)))return b;if(d===this.args.length-1)throw new Wt(`Expected value to be of type ${xr(this.type)}, but found ${xr(zt(b))} instead.`)}throw new Error}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const Hi={"to-boolean":kt,"to-color":ii,"to-number":mt,"to-string":St};class Ui{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");const b=o[0];if(!Hi[b])throw new Error(`Can't parse ${b} as it is not part of the known types`);if((b==="to-boolean"||b==="to-string")&&o.length!==2)return d.error("Expected one argument.");const P=Hi[b],O=[];for(let H=1;H<o.length;H++){const ne=d.parse(o[H],H,Ht);if(!ne)return null;O.push(ne)}return new Ui(P,O)}evaluate(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){let d,b;for(const P of this.args){if(d=P.evaluate(o),b=null,d instanceof Ve)return d;if(typeof d=="string"){const O=o.parseColor(d);if(O)return O}else if(Array.isArray(d)&&(b=d.length<3||d.length>4?`Invalid rbga value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:ft(d[0],d[1],d[2],d[3]),!b))return new Ve(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new Wt(b||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}if(this.type.kind==="padding"){let d;for(const b of this.args){d=b.evaluate(o);const P=ot.parse(d);if(P)return P}throw new Wt(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}if(this.type.kind==="number"){let d=null;for(const b of this.args){if(d=b.evaluate(o),d===null)return 0;const P=Number(d);if(!isNaN(P))return P}throw new Wt(`Could not convert ${JSON.stringify(d)} to number.`)}return this.type.kind==="formatted"?ct.fromString(Rt(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?nt.fromString(Rt(this.args[0].evaluate(o))):Rt(this.args[0].evaluate(o))}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const qi=["Unknown","Point","LineString","Polygon"];class mi{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?qi[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(o){let d=this._parseColorCache[o];return d||(d=this._parseColorCache[o]=Ve.parse(o)),d}}class Ri{constructor(o,d,b,P){this.name=o,this.type=d,this._evaluate=b,this.args=P}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}static parse(o,d){const b=o[0],P=Ri.definitions[b];if(!P)return d.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0);const O=Array.isArray(P)?P[0]:P.type,H=Array.isArray(P)?[[P[1],P[2]]]:P.overloads,ne=H.filter(([we])=>!Array.isArray(we)||we.length===o.length-1);let ue=null;for(const[we,Oe]of ne){ue=new xh(d.registry,d.path,null,d.scope);const Ue=[];let qe=!1;for(let Ze=1;Ze<o.length;Ze++){const Ke=o[Ze],ut=Array.isArray(we)?we[Ze-1]:we.type,lt=ue.parse(Ke,1+Ue.length,ut);if(!lt){qe=!0;break}Ue.push(lt)}if(!qe)if(Array.isArray(we)&&we.length!==Ue.length)ue.error(`Expected ${we.length} arguments, but found ${Ue.length} instead.`);else{for(let Ze=0;Ze<Ue.length;Ze++){const Ke=Array.isArray(we)?we[Ze]:we.type,ut=Ue[Ze];ue.concat(Ze+1).checkSubtype(Ke,ut.type)}if(ue.errors.length===0)return new Ri(b,O,Oe,Ue)}}if(ne.length===1)d.errors.push(...ue.errors);else{const we=(ne.length?ne:H).map(([Ue])=>{return qe=Ue,Array.isArray(qe)?`(${qe.map(xr).join(", ")})`:`(${xr(qe.type)}...)`;var qe}).join(" | "),Oe=[];for(let Ue=1;Ue<o.length;Ue++){const qe=d.parse(o[Ue],1+Oe.length);if(!qe)return null;Oe.push(xr(qe.type))}d.error(`Expected arguments of type ${we}, but found (${Oe.join(", ")}) instead.`)}return null}static register(o,d){Ri.definitions=d;for(const b in d)o[b]=Ri}}class Xr{constructor(o,d,b){this.type=fr,this.locale=b,this.caseSensitive=o,this.diacriticSensitive=d}static parse(o,d){if(o.length!==2)return d.error("Expected one argument.");const b=o[1];if(typeof b!="object"||Array.isArray(b))return d.error("Collator options argument must be an object.");const P=d.parse(b["case-sensitive"]!==void 0&&b["case-sensitive"],1,kt);if(!P)return null;const O=d.parse(b["diacritic-sensitive"]!==void 0&&b["diacritic-sensitive"],1,kt);if(!O)return null;let H=null;return b.locale&&(H=d.parse(b.locale,1,St),!H)?null:new Xr(P,O,H)}evaluate(o){return new Xe(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}}const on=8192;function En(u,o){u[0]=Math.min(u[0],o[0]),u[1]=Math.min(u[1],o[1]),u[2]=Math.max(u[2],o[0]),u[3]=Math.max(u[3],o[1])}function br(u,o){return!(u[0]<=o[0]||u[2]>=o[2]||u[1]<=o[1]||u[3]>=o[3])}function Fo(u,o){const d=(180+u[0])/360,b=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,P=Math.pow(2,o.z);return[Math.round(d*P*on),Math.round(b*P*on)]}function _l(u,o,d){const b=u[0]-o[0],P=u[1]-o[1],O=u[0]-d[0],H=u[1]-d[1];return b*H-O*P==0&&b*O<=0&&P*H<=0}function zr(u,o){let d=!1;for(let H=0,ne=o.length;H<ne;H++){const ue=o[H];for(let we=0,Oe=ue.length;we<Oe-1;we++){if(_l(u,ue[we],ue[we+1]))return!1;(P=ue[we])[1]>(b=u)[1]!=(O=ue[we+1])[1]>b[1]&&b[0]<(O[0]-P[0])*(b[1]-P[1])/(O[1]-P[1])+P[0]&&(d=!d)}}var b,P,O;return d}function Ix(u,o){for(let d=0;d<o.length;d++)if(zr(u,o[d]))return!0;return!1}function gh(u,o,d,b){const P=b[0]-d[0],O=b[1]-d[1],H=(u[0]-d[0])*O-P*(u[1]-d[1]),ne=(o[0]-d[0])*O-P*(o[1]-d[1]);return H>0&&ne<0||H<0&&ne>0}function Px(u,o,d){for(const we of d)for(let Oe=0;Oe<we.length-1;++Oe)if((ne=[(H=we[Oe+1])[0]-(O=we[Oe])[0],H[1]-O[1]])[0]*(ue=[(P=o)[0]-(b=u)[0],P[1]-b[1]])[1]-ne[1]*ue[0]!=0&&gh(b,P,O,H)&&gh(O,H,b,P))return!0;var b,P,O,H,ne,ue;return!1}function rf(u,o){for(let d=0;d<u.length;++d)if(!zr(u[d],o))return!1;for(let d=0;d<u.length-1;++d)if(Px(u[d],u[d+1],o))return!1;return!0}function Zg(u,o){for(let d=0;d<o.length;d++)if(rf(u,o[d]))return!0;return!1}function nf(u,o,d){const b=[];for(let P=0;P<u.length;P++){const O=[];for(let H=0;H<u[P].length;H++){const ne=Fo(u[P][H],d);En(o,ne),O.push(ne)}b.push(O)}return b}function sf(u,o,d){const b=[];for(let P=0;P<u.length;P++){const O=nf(u[P],o,d);b.push(O)}return b}function af(u,o,d,b){if(u[0]<d[0]||u[0]>d[2]){const P=.5*b;let O=u[0]-d[0]>P?-b:d[0]-u[0]>P?b:0;O===0&&(O=u[0]-d[2]>P?-b:d[2]-u[0]>P?b:0),u[0]+=O}En(o,u)}function Xg(u,o,d,b){const P=Math.pow(2,b.z)*on,O=[b.x*on,b.y*on],H=[];for(const ne of u)for(const ue of ne){const we=[ue.x+O[0],ue.y+O[1]];af(we,o,d,P),H.push(we)}return H}function Kg(u,o,d,b){const P=Math.pow(2,b.z)*on,O=[b.x*on,b.y*on],H=[];for(const ue of u){const we=[];for(const Oe of ue){const Ue=[Oe.x+O[0],Oe.y+O[1]];En(o,Ue),we.push(Ue)}H.push(we)}if(o[2]-o[0]<=P/2){(ne=o)[0]=ne[1]=1/0,ne[2]=ne[3]=-1/0;for(const ue of H)for(const we of ue)af(we,o,d,P)}var ne;return H}class oc{constructor(o,d){this.type=kt,this.geojson=o,this.geometries=d}static parse(o,d){if(o.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(wt(o[1])){const b=o[1];if(b.type==="FeatureCollection")for(let P=0;P<b.features.length;++P){const O=b.features[P].geometry.type;if(O==="Polygon"||O==="MultiPolygon")return new oc(b,b.features[P].geometry)}else if(b.type==="Feature"){const P=b.geometry.type;if(P==="Polygon"||P==="MultiPolygon")return new oc(b,b.geometry)}else if(b.type==="Polygon"||b.type==="MultiPolygon")return new oc(b,b)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(d,b){const P=[1/0,1/0,-1/0,-1/0],O=[1/0,1/0,-1/0,-1/0],H=d.canonicalID();if(b.type==="Polygon"){const ne=nf(b.coordinates,O,H),ue=Xg(d.geometry(),P,O,H);if(!br(P,O))return!1;for(const we of ue)if(!zr(we,ne))return!1}if(b.type==="MultiPolygon"){const ne=sf(b.coordinates,O,H),ue=Xg(d.geometry(),P,O,H);if(!br(P,O))return!1;for(const we of ue)if(!Ix(we,ne))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(d,b){const P=[1/0,1/0,-1/0,-1/0],O=[1/0,1/0,-1/0,-1/0],H=d.canonicalID();if(b.type==="Polygon"){const ne=nf(b.coordinates,O,H),ue=Kg(d.geometry(),P,O,H);if(!br(P,O))return!1;for(const we of ue)if(!rf(we,ne))return!1}if(b.type==="MultiPolygon"){const ne=sf(b.coordinates,O,H),ue=Kg(d.geometry(),P,O,H);if(!br(P,O))return!1;for(const we of ue)if(!Zg(we,ne))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function yh(u){if(u instanceof Ri&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof oc)return!1;let o=!0;return u.eachChild(d=>{o&&!yh(d)&&(o=!1)}),o}function Gc(u){if(u instanceof Ri&&u.name==="feature-state")return!1;let o=!0;return u.eachChild(d=>{o&&!Gc(d)&&(o=!1)}),o}function Ku(u,o){if(u instanceof Ri&&o.indexOf(u.name)>=0)return!1;let d=!0;return u.eachChild(b=>{d&&!Ku(b,o)&&(d=!1)}),d}class vh{constructor(o,d){this.type=d.type,this.name=o,this.boundExpression=d}static parse(o,d){if(o.length!==2||typeof o[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const b=o[1];return d.scope.has(b)?new vh(b,d.scope.get(b)):d.error(`Unknown variable "${b}". Make sure "${b}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}}class xh{constructor(o,d=[],b,P=new Tt,O=[]){this.registry=o,this.path=d,this.key=d.map(H=>`[${H}]`).join(""),this.scope=P,this.errors=O,this.expectedType=b}parse(o,d,b,P,O={}){return d?this.concat(d,b,P)._parse(o,O):this._parse(o,O)}_parse(o,d){function b(P,O,H){return H==="assert"?new vi(O,[P]):H==="coerce"?new Ui(O,[P]):P}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const P=o[0];if(typeof P!="string")return this.error(`Expression name must be a string, but found ${typeof P} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const O=this.registry[P];if(O){let H=O.parse(o,this);if(!H)return null;if(this.expectedType){const ne=this.expectedType,ue=H.type;if(ne.kind!=="string"&&ne.kind!=="number"&&ne.kind!=="boolean"&&ne.kind!=="object"&&ne.kind!=="array"||ue.kind!=="value")if(ne.kind!=="color"&&ne.kind!=="formatted"&&ne.kind!=="resolvedImage"||ue.kind!=="value"&&ue.kind!=="string")if(ne.kind!=="padding"||ue.kind!=="value"&&ue.kind!=="number"&&ue.kind!=="array"){if(this.checkSubtype(ne,ue))return null}else H=b(H,ne,d.typeAnnotation||"coerce");else H=b(H,ne,d.typeAnnotation||"coerce");else H=b(H,ne,d.typeAnnotation||"assert")}if(!(H instanceof ci)&&H.type.kind!=="resolvedImage"&&Qu(H)){const ne=new mi;try{H=new ci(H.type,H.evaluate(ne))}catch(ue){return this.error(ue.message),null}}return H}return this.error(`Unknown expression "${P}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,d,b){const P=typeof o=="number"?this.path.concat(o):this.path,O=b?this.scope.concat(b):this.scope;return new xh(this.registry,P,d||null,O,this.errors)}error(o,...d){const b=`${this.key}${d.map(P=>`[${P}]`).join("")}`;this.errors.push(new gt(b,o))}checkSubtype(o,d){const b=bt(o,d);return b&&this.error(b),b}}function Qu(u){if(u instanceof vh)return Qu(u.boundExpression);if(u instanceof Ri&&u.name==="error"||u instanceof Xr||u instanceof oc)return!1;const o=u instanceof Ui||u instanceof vi;let d=!0;return u.eachChild(b=>{d=o?d&&Qu(b):d&&b instanceof ci}),!!d&&yh(u)&&Ku(u,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function bh(u,o){const d=u.length-1;let b,P,O=0,H=d,ne=0;for(;O<=H;)if(ne=Math.floor((O+H)/2),b=u[ne],P=u[ne+1],b<=o){if(ne===d||o<P)return ne;O=ne+1}else{if(!(b>o))throw new Wt("Input is not a number.");H=ne-1}return 0}class Ju{constructor(o,d,b){this.type=o,this.input=d,this.labels=[],this.outputs=[];for(const[P,O]of b)this.labels.push(P),this.outputs.push(O)}static parse(o,d){if(o.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return d.error("Expected an even number of arguments.");const b=d.parse(o[1],1,mt);if(!b)return null;const P=[];let O=null;d.expectedType&&d.expectedType.kind!=="value"&&(O=d.expectedType);for(let H=1;H<o.length;H+=2){const ne=H===1?-1/0:o[H],ue=o[H+1],we=H,Oe=H+1;if(typeof ne!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',we);if(P.length&&P[P.length-1][0]>=ne)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',we);const Ue=d.parse(ue,Oe,O);if(!Ue)return null;O=O||Ue.type,P.push([ne,Ue])}return new Ju(O,b,P)}evaluate(o){const d=this.labels,b=this.outputs;if(d.length===1)return b[0].evaluate(o);const P=this.input.evaluate(o);if(P<=d[0])return b[0].evaluate(o);const O=d.length;return P>=d[O-1]?b[O-1].evaluate(o):b[bh(d,P)].evaluate(o)}eachChild(o){o(this.input);for(const d of this.outputs)o(d)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function kn(u,o,d){return u*(1-d)+o*d}var ed=Object.freeze({__proto__:null,number:kn,color:function(u,o,d){return new Ve(kn(u.r,o.r,d),kn(u.g,o.g,d),kn(u.b,o.b,d),kn(u.a,o.a,d))},array:function(u,o,d){return u.map((b,P)=>kn(b,o[P],d))},padding:function(u,o,d){const b=u.values,P=o.values;return new ot([kn(b[0],P[0],d),kn(b[1],P[1],d),kn(b[2],P[2],d),kn(b[3],P[3],d)])}});const of=.95047,Qg=1.08883,Jg=4/29,wh=6/29,lf=3*wh*wh,Dx=Math.PI/180,Rx=180/Math.PI;function cf(u){return u>.008856451679035631?Math.pow(u,1/3):u/lf+Jg}function uf(u){return u>wh?u*u*u:lf*(u-Jg)}function df(u){return 255*(u<=.0031308?12.92*u:1.055*Math.pow(u,1/2.4)-.055)}function hf(u){return(u/=255)<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function ey(u){const o=hf(u.r),d=hf(u.g),b=hf(u.b),P=cf((.4124564*o+.3575761*d+.1804375*b)/of),O=cf((.2126729*o+.7151522*d+.072175*b)/1);return{l:116*O-16,a:500*(P-O),b:200*(O-cf((.0193339*o+.119192*d+.9503041*b)/Qg)),alpha:u.a}}function Or(u){let o=(u.l+16)/116,d=isNaN(u.a)?o:o+u.a/500,b=isNaN(u.b)?o:o-u.b/200;return o=1*uf(o),d=of*uf(d),b=Qg*uf(b),new Ve(df(3.2404542*d-1.5371385*o-.4985314*b),df(-.969266*d+1.8760108*o+.041556*b),df(.0556434*d-.2040259*o+1.0572252*b),u.alpha)}function Lx(u,o,d){const b=o-u;return u+d*(b>180||b<-180?b-360*Math.round(b/360):b)}const td={forward:ey,reverse:Or,interpolate:function(u,o,d){return{l:kn(u.l,o.l,d),a:kn(u.a,o.a,d),b:kn(u.b,o.b,d),alpha:kn(u.alpha,o.alpha,d)}}},id={forward:function(u){const{l:o,a:d,b}=ey(u),P=Math.atan2(b,d)*Rx;return{h:P<0?P+360:P,c:Math.sqrt(d*d+b*b),l:o,alpha:u.a}},reverse:function(u){const o=u.h*Dx,d=u.c;return Or({l:u.l,a:Math.cos(o)*d,b:Math.sin(o)*d,alpha:u.alpha})},interpolate:function(u,o,d){return{h:Lx(u.h,o.h,d),c:kn(u.c,o.c,d),l:kn(u.l,o.l,d),alpha:kn(u.alpha,o.alpha,d)}}};var ty=Object.freeze({__proto__:null,lab:td,hcl:id});class za{constructor(o,d,b,P,O){this.type=o,this.operator=d,this.interpolation=b,this.input=P,this.labels=[],this.outputs=[];for(const[H,ne]of O)this.labels.push(H),this.outputs.push(ne)}static interpolationFactor(o,d,b,P){let O=0;if(o.name==="exponential")O=pf(d,o.base,b,P);else if(o.name==="linear")O=pf(d,1,b,P);else if(o.name==="cubic-bezier"){const H=o.controlPoints;O=new h(H[0],H[1],H[2],H[3]).solve(pf(d,1,b,P))}return O}static parse(o,d){let[b,P,O,...H]=o;if(!Array.isArray(P)||P.length===0)return d.error("Expected an interpolation type expression.",1);if(P[0]==="linear")P={name:"linear"};else if(P[0]==="exponential"){const we=P[1];if(typeof we!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);P={name:"exponential",base:we}}else{if(P[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(P[0])}`,1,0);{const we=P.slice(1);if(we.length!==4||we.some(Oe=>typeof Oe!="number"||Oe<0||Oe>1))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);P={name:"cubic-bezier",controlPoints:we}}}if(o.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(O=d.parse(O,2,mt),!O)return null;const ne=[];let ue=null;b==="interpolate-hcl"||b==="interpolate-lab"?ue=ii:d.expectedType&&d.expectedType.kind!=="value"&&(ue=d.expectedType);for(let we=0;we<H.length;we+=2){const Oe=H[we],Ue=H[we+1],qe=we+3,Ze=we+4;if(typeof Oe!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',qe);if(ne.length&&ne[ne.length-1][0]>=Oe)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',qe);const Ke=d.parse(Ue,Ze,ue);if(!Ke)return null;ue=ue||Ke.type,ne.push([Oe,Ke])}return ue.kind==="number"||ue.kind==="color"||ue.kind==="padding"||ue.kind==="array"&&ue.itemType.kind==="number"&&typeof ue.N=="number"?new za(ue,b,P,O,ne):d.error(`Type ${xr(ue)} is not interpolatable.`)}evaluate(o){const d=this.labels,b=this.outputs;if(d.length===1)return b[0].evaluate(o);const P=this.input.evaluate(o);if(P<=d[0])return b[0].evaluate(o);const O=d.length;if(P>=d[O-1])return b[O-1].evaluate(o);const H=bh(d,P),ne=za.interpolationFactor(this.interpolation,P,d[H],d[H+1]),ue=b[H].evaluate(o),we=b[H+1].evaluate(o);return this.operator==="interpolate"?ed[this.type.kind.toLowerCase()](ue,we,ne):this.operator==="interpolate-hcl"?id.reverse(id.interpolate(id.forward(ue),id.forward(we),ne)):td.reverse(td.interpolate(td.forward(ue),td.forward(we),ne))}eachChild(o){o(this.input);for(const d of this.outputs)o(d)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function pf(u,o,d,b){const P=b-d,O=u-d;return P===0?0:o===1?O/P:(Math.pow(o,O)-1)/(Math.pow(o,P)-1)}class _h{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expectected at least one argument.");let b=null;const P=d.expectedType;P&&P.kind!=="value"&&(b=P);const O=[];for(const ne of o.slice(1)){const ue=d.parse(ne,1+O.length,b,void 0,{typeAnnotation:"omit"});if(!ue)return null;b=b||ue.type,O.push(ue)}if(!b)throw new Error("No output type");const H=P&&O.some(ne=>bt(P,ne.type));return new _h(H?Ht:b,O)}evaluate(o){let d,b=null,P=0;for(const O of this.args)if(P++,b=O.evaluate(o),b&&b instanceof nt&&!b.available&&(d||(d=b.name),b=null,P===this.args.length&&(b=d)),b!==null)break;return b}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}class Ch{constructor(o,d){this.type=d.type,this.bindings=[].concat(o),this.result=d}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const d of this.bindings)o(d[1]);o(this.result)}static parse(o,d){if(o.length<4)return d.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const b=[];for(let O=1;O<o.length-1;O+=2){const H=o[O];if(typeof H!="string")return d.error(`Expected string, but found ${typeof H} instead.`,O);if(/[^a-zA-Z0-9_]/.test(H))return d.error("Variable names must contain only alphanumeric characters or '_'.",O);const ne=d.parse(o[O+1],O+1);if(!ne)return null;b.push([H,ne])}const P=d.parse(o[o.length-1],o.length-1,d.expectedType,b);return P?new Ch(b,P):null}outputDefined(){return this.result.outputDefined()}}class ff{constructor(o,d,b){this.type=o,this.index=d,this.input=b}static parse(o,d){if(o.length!==3)return d.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const b=d.parse(o[1],1,mt),P=d.parse(o[2],2,sr(d.expectedType||Ht));return b&&P?new ff(P.type.itemType,b,P):null}evaluate(o){const d=this.index.evaluate(o),b=this.input.evaluate(o);if(d<0)throw new Wt(`Array index out of bounds: ${d} < 0.`);if(d>=b.length)throw new Wt(`Array index out of bounds: ${d} > ${b.length-1}.`);if(d!==Math.floor(d))throw new Wt(`Array index must be an integer, but found ${d} instead.`);return b[d]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}}class mf{constructor(o,d){this.type=kt,this.needle=o,this.haystack=d}static parse(o,d){if(o.length!==3)return d.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const b=d.parse(o[1],1,Ht),P=d.parse(o[2],2,Ht);return b&&P?Mt(b.type,[kt,St,mt,Nt,Ht])?new mf(b,P):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${xr(b.type)} instead`):null}evaluate(o){const d=this.needle.evaluate(o),b=this.haystack.evaluate(o);if(!b)return!1;if(!$t(d,["boolean","string","number","null"]))throw new Wt(`Expected first argument to be of type boolean, string, number or null, but found ${xr(zt(d))} instead.`);if(!$t(b,["string","array"]))throw new Wt(`Expected second argument to be of type array or string, but found ${xr(zt(b))} instead.`);return b.indexOf(d)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}}class Th{constructor(o,d,b){this.type=mt,this.needle=o,this.haystack=d,this.fromIndex=b}static parse(o,d){if(o.length<=2||o.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const b=d.parse(o[1],1,Ht),P=d.parse(o[2],2,Ht);if(!b||!P)return null;if(!Mt(b.type,[kt,St,mt,Nt,Ht]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${xr(b.type)} instead`);if(o.length===4){const O=d.parse(o[3],3,mt);return O?new Th(b,P,O):null}return new Th(b,P)}evaluate(o){const d=this.needle.evaluate(o),b=this.haystack.evaluate(o);if(!$t(d,["boolean","string","number","null"]))throw new Wt(`Expected first argument to be of type boolean, string, number or null, but found ${xr(zt(d))} instead.`);if(!$t(b,["string","array"]))throw new Wt(`Expected second argument to be of type array or string, but found ${xr(zt(b))} instead.`);if(this.fromIndex){const P=this.fromIndex.evaluate(o);return b.indexOf(d,P)}return b.indexOf(d)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}}class gf{constructor(o,d,b,P,O,H){this.inputType=o,this.type=d,this.input=b,this.cases=P,this.outputs=O,this.otherwise=H}static parse(o,d){if(o.length<5)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return d.error("Expected an even number of arguments.");let b,P;d.expectedType&&d.expectedType.kind!=="value"&&(P=d.expectedType);const O={},H=[];for(let we=2;we<o.length-1;we+=2){let Oe=o[we];const Ue=o[we+1];Array.isArray(Oe)||(Oe=[Oe]);const qe=d.concat(we);if(Oe.length===0)return qe.error("Expected at least one branch label.");for(const Ke of Oe){if(typeof Ke!="number"&&typeof Ke!="string")return qe.error("Branch labels must be numbers or strings.");if(typeof Ke=="number"&&Math.abs(Ke)>Number.MAX_SAFE_INTEGER)return qe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ke=="number"&&Math.floor(Ke)!==Ke)return qe.error("Numeric branch labels must be integer values.");if(b){if(qe.checkSubtype(b,zt(Ke)))return null}else b=zt(Ke);if(O[String(Ke)]!==void 0)return qe.error("Branch labels must be unique.");O[String(Ke)]=H.length}const Ze=d.parse(Ue,we,P);if(!Ze)return null;P=P||Ze.type,H.push(Ze)}const ne=d.parse(o[1],1,Ht);if(!ne)return null;const ue=d.parse(o[o.length-1],o.length-1,P);return ue?ne.type.kind!=="value"&&d.concat(1).checkSubtype(b,ne.type)?null:new gf(b,P,ne,O,H,ue):null}evaluate(o){const d=this.input.evaluate(o);return(zt(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}}class yf{constructor(o,d,b){this.type=o,this.branches=d,this.otherwise=b}static parse(o,d){if(o.length<4)return d.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return d.error("Expected an odd number of arguments.");let b;d.expectedType&&d.expectedType.kind!=="value"&&(b=d.expectedType);const P=[];for(let H=1;H<o.length-1;H+=2){const ne=d.parse(o[H],H,kt);if(!ne)return null;const ue=d.parse(o[H+1],H+1,b);if(!ue)return null;P.push([ne,ue]),b=b||ue.type}const O=d.parse(o[o.length-1],o.length-1,b);if(!O)return null;if(!b)throw new Error("Can't infer output type");return new yf(b,P,O)}evaluate(o){for(const[d,b]of this.branches)if(d.evaluate(o))return b.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[d,b]of this.branches)o(d),o(b);o(this.otherwise)}outputDefined(){return this.branches.every(([o,d])=>d.outputDefined())&&this.otherwise.outputDefined()}}class Sh{constructor(o,d,b,P){this.type=o,this.input=d,this.beginIndex=b,this.endIndex=P}static parse(o,d){if(o.length<=2||o.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const b=d.parse(o[1],1,Ht),P=d.parse(o[2],2,mt);if(!b||!P)return null;if(!Mt(b.type,[sr(Ht),St,Ht]))return d.error(`Expected first argument to be of type array or string, but found ${xr(b.type)} instead`);if(o.length===4){const O=d.parse(o[3],3,mt);return O?new Sh(b.type,b,P,O):null}return new Sh(b.type,b,P)}evaluate(o){const d=this.input.evaluate(o),b=this.beginIndex.evaluate(o);if(!$t(d,["string","array"]))throw new Wt(`Expected first argument to be of type array or string, but found ${xr(zt(d))} instead.`);if(this.endIndex){const P=this.endIndex.evaluate(o);return d.slice(b,P)}return d.slice(b)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}}function iy(u,o){return u==="=="||u==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function ry(u,o,d,b){return b.compare(o,d)===0}function Hc(u,o,d){const b=u!=="=="&&u!=="!=";return class sD{constructor(O,H,ne){this.type=kt,this.lhs=O,this.rhs=H,this.collator=ne,this.hasUntypedArgument=O.type.kind==="value"||H.type.kind==="value"}static parse(O,H){if(O.length!==3&&O.length!==4)return H.error("Expected two or three arguments.");const ne=O[0];let ue=H.parse(O[1],1,Ht);if(!ue)return null;if(!iy(ne,ue.type))return H.concat(1).error(`"${ne}" comparisons are not supported for type '${xr(ue.type)}'.`);let we=H.parse(O[2],2,Ht);if(!we)return null;if(!iy(ne,we.type))return H.concat(2).error(`"${ne}" comparisons are not supported for type '${xr(we.type)}'.`);if(ue.type.kind!==we.type.kind&&ue.type.kind!=="value"&&we.type.kind!=="value")return H.error(`Cannot compare types '${xr(ue.type)}' and '${xr(we.type)}'.`);b&&(ue.type.kind==="value"&&we.type.kind!=="value"?ue=new vi(we.type,[ue]):ue.type.kind!=="value"&&we.type.kind==="value"&&(we=new vi(ue.type,[we])));let Oe=null;if(O.length===4){if(ue.type.kind!=="string"&&we.type.kind!=="string"&&ue.type.kind!=="value"&&we.type.kind!=="value")return H.error("Cannot use collator to compare non-string types.");if(Oe=H.parse(O[3],3,fr),!Oe)return null}return new sD(ue,we,Oe)}evaluate(O){const H=this.lhs.evaluate(O),ne=this.rhs.evaluate(O);if(b&&this.hasUntypedArgument){const ue=zt(H),we=zt(ne);if(ue.kind!==we.kind||ue.kind!=="string"&&ue.kind!=="number")throw new Wt(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${ue.kind}, ${we.kind}) instead.`)}if(this.collator&&!b&&this.hasUntypedArgument){const ue=zt(H),we=zt(ne);if(ue.kind!=="string"||we.kind!=="string")return o(O,H,ne)}return this.collator?d(O,H,ne,this.collator.evaluate(O)):o(O,H,ne)}eachChild(O){O(this.lhs),O(this.rhs),this.collator&&O(this.collator)}outputDefined(){return!0}}}const Nx=Hc("==",function(u,o,d){return o===d},ry),zx=Hc("!=",function(u,o,d){return o!==d},function(u,o,d,b){return!ry(0,o,d,b)}),Ox=Hc("<",function(u,o,d){return o<d},function(u,o,d,b){return b.compare(o,d)<0}),jx=Hc(">",function(u,o,d){return o>d},function(u,o,d,b){return b.compare(o,d)>0}),Fx=Hc("<=",function(u,o,d){return o<=d},function(u,o,d,b){return b.compare(o,d)<=0}),Bx=Hc(">=",function(u,o,d){return o>=d},function(u,o,d,b){return b.compare(o,d)>=0});class vf{constructor(o,d,b,P,O){this.type=St,this.number=o,this.locale=d,this.currency=b,this.minFractionDigits=P,this.maxFractionDigits=O}static parse(o,d){if(o.length!==3)return d.error("Expected two arguments.");const b=d.parse(o[1],1,mt);if(!b)return null;const P=o[2];if(typeof P!="object"||Array.isArray(P))return d.error("NumberFormat options argument must be an object.");let O=null;if(P.locale&&(O=d.parse(P.locale,1,St),!O))return null;let H=null;if(P.currency&&(H=d.parse(P.currency,1,St),!H))return null;let ne=null;if(P["min-fraction-digits"]&&(ne=d.parse(P["min-fraction-digits"],1,mt),!ne))return null;let ue=null;return P["max-fraction-digits"]&&(ue=d.parse(P["max-fraction-digits"],1,mt),!ue)?null:new vf(b,O,H,ne,ue)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}}class Eh{constructor(o){this.type=nr,this.sections=o}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");const b=o[1];if(!Array.isArray(b)&&typeof b=="object")return d.error("First argument must be an image or text section.");const P=[];let O=!1;for(let H=1;H<=o.length-1;++H){const ne=o[H];if(O&&typeof ne=="object"&&!Array.isArray(ne)){O=!1;let ue=null;if(ne["font-scale"]&&(ue=d.parse(ne["font-scale"],1,mt),!ue))return null;let we=null;if(ne["text-font"]&&(we=d.parse(ne["text-font"],1,sr(St)),!we))return null;let Oe=null;if(ne["text-color"]&&(Oe=d.parse(ne["text-color"],1,ii),!Oe))return null;const Ue=P[P.length-1];Ue.scale=ue,Ue.font=we,Ue.textColor=Oe}else{const ue=d.parse(o[H],1,Ht);if(!ue)return null;const we=ue.type.kind;if(we!=="string"&&we!=="value"&&we!=="null"&&we!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");O=!0,P.push({content:ue,scale:null,font:null,textColor:null})}}return new Eh(P)}evaluate(o){return new ct(this.sections.map(d=>{const b=d.content.evaluate(o);return zt(b)===Rr?new et("",b,null,null,null):new et(Rt(b),null,d.scale?d.scale.evaluate(o):null,d.font?d.font.evaluate(o).join(","):null,d.textColor?d.textColor.evaluate(o):null)}))}eachChild(o){for(const d of this.sections)o(d.content),d.scale&&o(d.scale),d.font&&o(d.font),d.textColor&&o(d.textColor)}outputDefined(){return!1}}class xf{constructor(o){this.type=Rr,this.input=o}static parse(o,d){if(o.length!==2)return d.error("Expected two arguments.");const b=d.parse(o[1],1,St);return b?new xf(b):d.error("No image name provided.")}evaluate(o){const d=this.input.evaluate(o),b=nt.fromString(d);return b&&o.availableImages&&(b.available=o.availableImages.indexOf(d)>-1),b}eachChild(o){o(this.input)}outputDefined(){return!1}}class bf{constructor(o){this.type=mt,this.input=o}static parse(o,d){if(o.length!==2)return d.error(`Expected 1 argument, but found ${o.length-1} instead.`);const b=d.parse(o[1],1);return b?b.type.kind!=="array"&&b.type.kind!=="string"&&b.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${xr(b.type)} instead.`):new bf(b):null}evaluate(o){const d=this.input.evaluate(o);if(typeof d=="string"||Array.isArray(d))return d.length;throw new Wt(`Expected value to be of type string or array, but found ${xr(zt(d))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}}const qc={"==":Nx,"!=":zx,">":jx,"<":Ox,">=":Bx,"<=":Fx,array:vi,at:ff,boolean:vi,case:yf,coalesce:_h,collator:Xr,format:Eh,image:xf,in:mf,"index-of":Th,interpolate:za,"interpolate-hcl":za,"interpolate-lab":za,length:bf,let:Ch,literal:ci,match:gf,number:vi,"number-format":vf,object:vi,slice:Sh,step:Ju,string:vi,"to-boolean":Ui,"to-color":Ui,"to-number":Ui,"to-string":Ui,var:vh,within:oc};function ny(u,[o,d,b,P]){o=o.evaluate(u),d=d.evaluate(u),b=b.evaluate(u);const O=P?P.evaluate(u):1,H=ft(o,d,b,O);if(H)throw new Wt(H);return new Ve(o/255*O,d/255*O,b/255*O,O)}function sy(u,o){return u in o}function wf(u,o){const d=o[u];return d===void 0?null:d}function Cl(u){return{type:u}}function ay(u){return{result:"success",value:u}}function Wc(u){return{result:"error",value:u}}function Yc(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function zn(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function _f(u){return!!u.expression&&u.expression.interpolated}function wi(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function Zc(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function Mn(u){return u}function fn(u,o){const d=o.type==="color",b=u.stops&&typeof u.stops[0][0]=="object",P=b||!(b||u.property!==void 0),O=u.type||(_f(o)?"exponential":"interval");if(d||o.type==="padding"){const we=d?Ve.parse:ot.parse;(u=at({},u)).stops&&(u.stops=u.stops.map(Oe=>[Oe[0],we(Oe[1])])),u.default=we(u.default?u.default:o.default)}if(u.colorSpace&&u.colorSpace!=="rgb"&&!ty[u.colorSpace])throw new Error(`Unknown color space: ${u.colorSpace}`);let H,ne,ue;if(O==="exponential")H=ly;else if(O==="interval")H=$x;else if(O==="categorical"){H=oy,ne=Object.create(null);for(const we of u.stops)ne[we[0]]=we[1];ue=typeof u.stops[0][0]}else{if(O!=="identity")throw new Error(`Unknown function type "${O}"`);H=Ux}if(b){const we={},Oe=[];for(let Ze=0;Ze<u.stops.length;Ze++){const Ke=u.stops[Ze],ut=Ke[0].zoom;we[ut]===void 0&&(we[ut]={zoom:ut,type:u.type,property:u.property,default:u.default,stops:[]},Oe.push(ut)),we[ut].stops.push([Ke[0].value,Ke[1]])}const Ue=[];for(const Ze of Oe)Ue.push([we[Ze].zoom,fn(we[Ze],o)]);const qe={name:"linear"};return{kind:"composite",interpolationType:qe,interpolationFactor:za.interpolationFactor.bind(void 0,qe),zoomStops:Ue.map(Ze=>Ze[0]),evaluate:({zoom:Ze},Ke)=>ly({stops:Ue,base:u.base},o,Ze).evaluate(Ze,Ke)}}if(P){const we=O==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:we,interpolationFactor:za.interpolationFactor.bind(void 0,we),zoomStops:u.stops.map(Oe=>Oe[0]),evaluate:({zoom:Oe})=>H(u,o,Oe,ne,ue)}}return{kind:"source",evaluate(we,Oe){const Ue=Oe&&Oe.properties?Oe.properties[u.property]:void 0;return Ue===void 0?Tl(u.default,o.default):H(u,o,Ue,ne,ue)}}}function Tl(u,o,d){return u!==void 0?u:o!==void 0?o:d!==void 0?d:void 0}function oy(u,o,d,b,P){return Tl(typeof d===P?b[d]:void 0,u.default,o.default)}function $x(u,o,d){if(wi(d)!=="number")return Tl(u.default,o.default);const b=u.stops.length;if(b===1||d<=u.stops[0][0])return u.stops[0][1];if(d>=u.stops[b-1][0])return u.stops[b-1][1];const P=bh(u.stops.map(O=>O[0]),d);return u.stops[P][1]}function ly(u,o,d){const b=u.base!==void 0?u.base:1;if(wi(d)!=="number")return Tl(u.default,o.default);const P=u.stops.length;if(P===1||d<=u.stops[0][0])return u.stops[0][1];if(d>=u.stops[P-1][0])return u.stops[P-1][1];const O=bh(u.stops.map(Oe=>Oe[0]),d),H=function(Oe,Ue,qe,Ze){const Ke=Ze-qe,ut=Oe-qe;return Ke===0?0:Ue===1?ut/Ke:(Math.pow(Ue,ut)-1)/(Math.pow(Ue,Ke)-1)}(d,b,u.stops[O][0],u.stops[O+1][0]),ne=u.stops[O][1],ue=u.stops[O+1][1];let we=ed[o.type]||Mn;if(u.colorSpace&&u.colorSpace!=="rgb"){const Oe=ty[u.colorSpace];we=(Ue,qe)=>Oe.reverse(Oe.interpolate(Oe.forward(Ue),Oe.forward(qe),H))}return typeof ne.evaluate=="function"?{evaluate(...Oe){const Ue=ne.evaluate.apply(void 0,Oe),qe=ue.evaluate.apply(void 0,Oe);if(Ue!==void 0&&qe!==void 0)return we(Ue,qe,H)}}:we(ne,ue,H)}function Ux(u,o,d){switch(o.type){case"color":d=Ve.parse(d);break;case"formatted":d=ct.fromString(d.toString());break;case"resolvedImage":d=nt.fromString(d.toString());break;case"padding":d=ot.parse(d);break;default:wi(d)===o.type||o.type==="enum"&&o.values[d]||(d=void 0)}return Tl(d,u.default,o.default)}Ri.register(qc,{error:[{kind:"error"},[St],(u,[o])=>{throw new Wt(o.evaluate(u))}],typeof:[St,[Ht],(u,[o])=>xr(zt(o.evaluate(u)))],"to-rgba":[sr(mt,4),[ii],(u,[o])=>o.evaluate(u).toArray()],rgb:[ii,[mt,mt,mt],ny],rgba:[ii,[mt,mt,mt,mt],ny],has:{type:kt,overloads:[[[St],(u,[o])=>sy(o.evaluate(u),u.properties())],[[St,fi],(u,[o,d])=>sy(o.evaluate(u),d.evaluate(u))]]},get:{type:Ht,overloads:[[[St],(u,[o])=>wf(o.evaluate(u),u.properties())],[[St,fi],(u,[o,d])=>wf(o.evaluate(u),d.evaluate(u))]]},"feature-state":[Ht,[St],(u,[o])=>wf(o.evaluate(u),u.featureState||{})],properties:[fi,[],u=>u.properties()],"geometry-type":[St,[],u=>u.geometryType()],id:[Ht,[],u=>u.id()],zoom:[mt,[],u=>u.globals.zoom],"heatmap-density":[mt,[],u=>u.globals.heatmapDensity||0],"line-progress":[mt,[],u=>u.globals.lineProgress||0],accumulated:[Ht,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[mt,Cl(mt),(u,o)=>{let d=0;for(const b of o)d+=b.evaluate(u);return d}],"*":[mt,Cl(mt),(u,o)=>{let d=1;for(const b of o)d*=b.evaluate(u);return d}],"-":{type:mt,overloads:[[[mt,mt],(u,[o,d])=>o.evaluate(u)-d.evaluate(u)],[[mt],(u,[o])=>-o.evaluate(u)]]},"/":[mt,[mt,mt],(u,[o,d])=>o.evaluate(u)/d.evaluate(u)],"%":[mt,[mt,mt],(u,[o,d])=>o.evaluate(u)%d.evaluate(u)],ln2:[mt,[],()=>Math.LN2],pi:[mt,[],()=>Math.PI],e:[mt,[],()=>Math.E],"^":[mt,[mt,mt],(u,[o,d])=>Math.pow(o.evaluate(u),d.evaluate(u))],sqrt:[mt,[mt],(u,[o])=>Math.sqrt(o.evaluate(u))],log10:[mt,[mt],(u,[o])=>Math.log(o.evaluate(u))/Math.LN10],ln:[mt,[mt],(u,[o])=>Math.log(o.evaluate(u))],log2:[mt,[mt],(u,[o])=>Math.log(o.evaluate(u))/Math.LN2],sin:[mt,[mt],(u,[o])=>Math.sin(o.evaluate(u))],cos:[mt,[mt],(u,[o])=>Math.cos(o.evaluate(u))],tan:[mt,[mt],(u,[o])=>Math.tan(o.evaluate(u))],asin:[mt,[mt],(u,[o])=>Math.asin(o.evaluate(u))],acos:[mt,[mt],(u,[o])=>Math.acos(o.evaluate(u))],atan:[mt,[mt],(u,[o])=>Math.atan(o.evaluate(u))],min:[mt,Cl(mt),(u,o)=>Math.min(...o.map(d=>d.evaluate(u)))],max:[mt,Cl(mt),(u,o)=>Math.max(...o.map(d=>d.evaluate(u)))],abs:[mt,[mt],(u,[o])=>Math.abs(o.evaluate(u))],round:[mt,[mt],(u,[o])=>{const d=o.evaluate(u);return d<0?-Math.round(-d):Math.round(d)}],floor:[mt,[mt],(u,[o])=>Math.floor(o.evaluate(u))],ceil:[mt,[mt],(u,[o])=>Math.ceil(o.evaluate(u))],"filter-==":[kt,[St,Ht],(u,[o,d])=>u.properties()[o.value]===d.value],"filter-id-==":[kt,[Ht],(u,[o])=>u.id()===o.value],"filter-type-==":[kt,[St],(u,[o])=>u.geometryType()===o.value],"filter-<":[kt,[St,Ht],(u,[o,d])=>{const b=u.properties()[o.value],P=d.value;return typeof b==typeof P&&b<P}],"filter-id-<":[kt,[Ht],(u,[o])=>{const d=u.id(),b=o.value;return typeof d==typeof b&&d<b}],"filter->":[kt,[St,Ht],(u,[o,d])=>{const b=u.properties()[o.value],P=d.value;return typeof b==typeof P&&b>P}],"filter-id->":[kt,[Ht],(u,[o])=>{const d=u.id(),b=o.value;return typeof d==typeof b&&d>b}],"filter-<=":[kt,[St,Ht],(u,[o,d])=>{const b=u.properties()[o.value],P=d.value;return typeof b==typeof P&&b<=P}],"filter-id-<=":[kt,[Ht],(u,[o])=>{const d=u.id(),b=o.value;return typeof d==typeof b&&d<=b}],"filter->=":[kt,[St,Ht],(u,[o,d])=>{const b=u.properties()[o.value],P=d.value;return typeof b==typeof P&&b>=P}],"filter-id->=":[kt,[Ht],(u,[o])=>{const d=u.id(),b=o.value;return typeof d==typeof b&&d>=b}],"filter-has":[kt,[Ht],(u,[o])=>o.value in u.properties()],"filter-has-id":[kt,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[kt,[sr(St)],(u,[o])=>o.value.indexOf(u.geometryType())>=0],"filter-id-in":[kt,[sr(Ht)],(u,[o])=>o.value.indexOf(u.id())>=0],"filter-in-small":[kt,[St,sr(Ht)],(u,[o,d])=>d.value.indexOf(u.properties()[o.value])>=0],"filter-in-large":[kt,[St,sr(Ht)],(u,[o,d])=>function(b,P,O,H){for(;O<=H;){const ne=O+H>>1;if(P[ne]===b)return!0;P[ne]>b?H=ne-1:O=ne+1}return!1}(u.properties()[o.value],d.value,0,d.value.length-1)],all:{type:kt,overloads:[[[kt,kt],(u,[o,d])=>o.evaluate(u)&&d.evaluate(u)],[Cl(kt),(u,o)=>{for(const d of o)if(!d.evaluate(u))return!1;return!0}]]},any:{type:kt,overloads:[[[kt,kt],(u,[o,d])=>o.evaluate(u)||d.evaluate(u)],[Cl(kt),(u,o)=>{for(const d of o)if(d.evaluate(u))return!0;return!1}]]},"!":[kt,[kt],(u,[o])=>!o.evaluate(u)],"is-supported-script":[kt,[St],(u,[o])=>{const d=u.globals&&u.globals.isSupportedScript;return!d||d(o.evaluate(u))}],upcase:[St,[St],(u,[o])=>o.evaluate(u).toUpperCase()],downcase:[St,[St],(u,[o])=>o.evaluate(u).toLowerCase()],concat:[St,Cl(Ht),(u,o)=>o.map(d=>Rt(d.evaluate(u))).join("")],"resolved-locale":[St,[fr],(u,[o])=>o.evaluate(u).resolvedLocale()]});class Cf{constructor(o,d){this.expression=o,this._warningHistory={},this._evaluator=new mi,this._defaultValue=d?function(b){return b.type==="color"&&Zc(b.default)?new Ve(0,0,0,0):b.type==="color"?Ve.parse(b.default)||null:b.type==="padding"?ot.parse(b.default)||null:b.default===void 0?null:b.default}(d):null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(o,d,b,P,O,H){return this._evaluator.globals=o,this._evaluator.feature=d,this._evaluator.featureState=b,this._evaluator.canonical=P,this._evaluator.availableImages=O||null,this._evaluator.formattedSection=H,this.expression.evaluate(this._evaluator)}evaluate(o,d,b,P,O,H){this._evaluator.globals=o,this._evaluator.feature=d||null,this._evaluator.featureState=b||null,this._evaluator.canonical=P,this._evaluator.availableImages=O||null,this._evaluator.formattedSection=H||null;try{const ne=this.expression.evaluate(this._evaluator);if(ne==null||typeof ne=="number"&&ne!=ne)return this._defaultValue;if(this._enumValues&&!(ne in this._enumValues))throw new Wt(`Expected value to be one of ${Object.keys(this._enumValues).map(ue=>JSON.stringify(ue)).join(", ")}, but found ${JSON.stringify(ne)} instead.`);return ne}catch(ne){return this._warningHistory[ne.message]||(this._warningHistory[ne.message]=!0,typeof console<"u"&&console.warn(ne.message)),this._defaultValue}}}function rd(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in qc}function nd(u,o){const d=new xh(qc,[],o?function(P){const O={color:ii,string:St,number:mt,enum:St,boolean:kt,formatted:nr,padding:vr,resolvedImage:Rr};return P.type==="array"?sr(O[P.value]||Ht,P.length):O[P.type]}(o):void 0),b=d.parse(u,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return b?ay(new Cf(b,o)):Wc(d.errors)}class kh{constructor(o,d){this.kind=o,this._styleExpression=d,this.isStateDependent=o!=="constant"&&!Gc(d.expression)}evaluateWithoutErrorHandling(o,d,b,P,O,H){return this._styleExpression.evaluateWithoutErrorHandling(o,d,b,P,O,H)}evaluate(o,d,b,P,O,H){return this._styleExpression.evaluate(o,d,b,P,O,H)}}class sd{constructor(o,d,b,P){this.kind=o,this.zoomStops=b,this._styleExpression=d,this.isStateDependent=o!=="camera"&&!Gc(d.expression),this.interpolationType=P}evaluateWithoutErrorHandling(o,d,b,P,O,H){return this._styleExpression.evaluateWithoutErrorHandling(o,d,b,P,O,H)}evaluate(o,d,b,P,O,H){return this._styleExpression.evaluate(o,d,b,P,O,H)}interpolationFactor(o,d,b){return this.interpolationType?za.interpolationFactor(this.interpolationType,o,d,b):0}}function cy(u,o){const d=nd(u,o);if(d.result==="error")return d;const b=d.value.expression,P=yh(b);if(!P&&!Yc(o))return Wc([new gt("","data expressions not supported")]);const O=Ku(b,["zoom"]);if(!O&&!zn(o))return Wc([new gt("","zoom expressions not supported")]);const H=Ah(b);return H||O?H instanceof gt?Wc([H]):H instanceof za&&!_f(o)?Wc([new gt("",'"interpolate" expressions cannot be used with this property')]):ay(H?new sd(P?"camera":"composite",d.value,H.labels,H instanceof za?H.interpolation:void 0):new kh(P?"constant":"source",d.value)):Wc([new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Mh{constructor(o,d){this._parameters=o,this._specification=d,at(this,fn(this._parameters,this._specification))}static deserialize(o){return new Mh(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Ah(u){let o=null;if(u instanceof Ch)o=Ah(u.result);else if(u instanceof _h){for(const d of u.args)if(o=Ah(d),o)break}else(u instanceof Ju||u instanceof za)&&u.input instanceof Ri&&u.input.name==="zoom"&&(o=u);return o instanceof gt||u.eachChild(d=>{const b=Ah(d);b instanceof gt?o=b:!o&&b?o=new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&b&&o!==b&&(o=new gt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function bo(u){const o=u.key,d=u.value,b=u.valueSpec||{},P=u.objectElementValidators||{},O=u.style,H=u.styleSpec;let ne=[];const ue=wi(d);if(ue!=="object")return[new He(o,d,`object expected, ${ue} found`)];for(const we in d){const Oe=we.split(".")[0],Ue=b[Oe]||b["*"];let qe;if(P[Oe])qe=P[Oe];else if(b[Oe])qe=Us;else if(P["*"])qe=P["*"];else{if(!b["*"]){ne.push(new He(o,d[we],`unknown property "${we}"`));continue}qe=Us}ne=ne.concat(qe({key:(o&&`${o}.`)+we,value:d[we],valueSpec:Ue,style:O,styleSpec:H,object:d,objectKey:we},d))}for(const we in b)P[we]||b[we].required&&b[we].default===void 0&&d[we]===void 0&&ne.push(new He(o,d,`missing required property "${we}"`));return ne}function uy(u){const o=u.value,d=u.valueSpec,b=u.style,P=u.styleSpec,O=u.key,H=u.arrayElementValidator||Us;if(wi(o)!=="array")return[new He(O,o,`array expected, ${wi(o)} found`)];if(d.length&&o.length!==d.length)return[new He(O,o,`array length ${d.length} expected, length ${o.length} found`)];if(d["min-length"]&&o.length<d["min-length"])return[new He(O,o,`array length at least ${d["min-length"]} expected, length ${o.length} found`)];let ne={type:d.value,values:d.values};P.$version<7&&(ne.function=d.function),wi(d.value)==="object"&&(ne=d.value);let ue=[];for(let we=0;we<o.length;we++)ue=ue.concat(H({array:o,arrayIndex:we,value:o[we],valueSpec:ne,style:b,styleSpec:P,key:`${O}[${we}]`}));return ue}function Tf(u){const o=u.key,d=u.value,b=u.valueSpec;let P=wi(d);return P==="number"&&d!=d&&(P="NaN"),P!=="number"?[new He(o,d,`number expected, ${P} found`)]:"minimum"in b&&d<b.minimum?[new He(o,d,`${d} is less than the minimum value ${b.minimum}`)]:"maximum"in b&&d>b.maximum?[new He(o,d,`${d} is greater than the maximum value ${b.maximum}`)]:[]}function dy(u){const o=u.valueSpec,d=rt(u.value.type);let b,P,O,H={};const ne=d!=="categorical"&&u.value.property===void 0,ue=!ne,we=wi(u.value.stops)==="array"&&wi(u.value.stops[0])==="array"&&wi(u.value.stops[0][0])==="object",Oe=bo({key:u.key,value:u.value,valueSpec:u.styleSpec.function,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(Ze){if(d==="identity")return[new He(Ze.key,Ze.value,'identity function may not have a "stops" property')];let Ke=[];const ut=Ze.value;return Ke=Ke.concat(uy({key:Ze.key,value:ut,valueSpec:Ze.valueSpec,style:Ze.style,styleSpec:Ze.styleSpec,arrayElementValidator:Ue})),wi(ut)==="array"&&ut.length===0&&Ke.push(new He(Ze.key,ut,"array must have at least one stop")),Ke},default:function(Ze){return Us({key:Ze.key,value:Ze.value,valueSpec:o,style:Ze.style,styleSpec:Ze.styleSpec})}}});return d==="identity"&&ne&&Oe.push(new He(u.key,u.value,'missing required property "property"')),d==="identity"||u.value.stops||Oe.push(new He(u.key,u.value,'missing required property "stops"')),d==="exponential"&&u.valueSpec.expression&&!_f(u.valueSpec)&&Oe.push(new He(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(ue&&!Yc(u.valueSpec)?Oe.push(new He(u.key,u.value,"property functions not supported")):ne&&!zn(u.valueSpec)&&Oe.push(new He(u.key,u.value,"zoom functions not supported"))),d!=="categorical"&&!we||u.value.property!==void 0||Oe.push(new He(u.key,u.value,'"property" property is required')),Oe;function Ue(Ze){let Ke=[];const ut=Ze.value,lt=Ze.key;if(wi(ut)!=="array")return[new He(lt,ut,`array expected, ${wi(ut)} found`)];if(ut.length!==2)return[new He(lt,ut,`array length 2 expected, length ${ut.length} found`)];if(we){if(wi(ut[0])!=="object")return[new He(lt,ut,`object expected, ${wi(ut[0])} found`)];if(ut[0].zoom===void 0)return[new He(lt,ut,"object stop key must have zoom")];if(ut[0].value===void 0)return[new He(lt,ut,"object stop key must have value")];if(O&&O>rt(ut[0].zoom))return[new He(lt,ut[0].zoom,"stop zoom values must appear in ascending order")];rt(ut[0].zoom)!==O&&(O=rt(ut[0].zoom),P=void 0,H={}),Ke=Ke.concat(bo({key:`${lt}[0]`,value:ut[0],valueSpec:{zoom:{}},style:Ze.style,styleSpec:Ze.styleSpec,objectElementValidators:{zoom:Tf,value:qe}}))}else Ke=Ke.concat(qe({key:`${lt}[0]`,value:ut[0],style:Ze.style,styleSpec:Ze.styleSpec},ut));return rd(dt(ut[1]))?Ke.concat([new He(`${lt}[1]`,ut[1],"expressions are not allowed in function stops.")]):Ke.concat(Us({key:`${lt}[1]`,value:ut[1],valueSpec:o,style:Ze.style,styleSpec:Ze.styleSpec}))}function qe(Ze,Ke){const ut=wi(Ze.value),lt=rt(Ze.value),_t=Ze.value!==null?Ze.value:Ke;if(b){if(ut!==b)return[new He(Ze.key,_t,`${ut} stop domain type must match previous stop domain type ${b}`)]}else b=ut;if(ut!=="number"&&ut!=="string"&&ut!=="boolean")return[new He(Ze.key,_t,"stop domain value must be a number, string, or boolean")];if(ut!=="number"&&d!=="categorical"){let Dt=`number expected, ${ut} found`;return Yc(o)&&d===void 0&&(Dt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new He(Ze.key,_t,Dt)]}return d!=="categorical"||ut!=="number"||isFinite(lt)&&Math.floor(lt)===lt?d!=="categorical"&&ut==="number"&&P!==void 0&&lt<P?[new He(Ze.key,_t,"stop domain values must appear in ascending order")]:(P=lt,d==="categorical"&&lt in H?[new He(Ze.key,_t,"stop domain values must be unique")]:(H[lt]=!0,[])):[new He(Ze.key,_t,`integer expected, found ${lt}`)]}}function Xc(u){const o=(u.expressionContext==="property"?cy:nd)(dt(u.value),u.valueSpec);if(o.result==="error")return o.value.map(b=>new He(`${u.key}${b.key}`,u.value,b.message));const d=o.value.expression||o.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!d.outputDefined())return[new He(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!Gc(d))return[new He(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!Gc(d))return[new He(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!Ku(d,["zoom","feature-state"]))return[new He(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!yh(d))return[new He(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ad(u){const o=u.key,d=u.value,b=u.valueSpec,P=[];return Array.isArray(b.values)?b.values.indexOf(rt(d))===-1&&P.push(new He(o,d,`expected one of [${b.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(b.values).indexOf(rt(d))===-1&&P.push(new He(o,d,`expected one of [${Object.keys(b.values).join(", ")}], ${JSON.stringify(d)} found`)),P}function Ih(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const o of u.slice(1))if(!Ih(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}const Ph={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Sf(u){if(u==null)return{filter:()=>!0,needGeometry:!1};Ih(u)||(u=Dh(u));const o=nd(u,Ph);if(o.result==="error")throw new Error(o.value.map(d=>`${d.key}: ${d.message}`).join(", "));return{filter:(d,b,P)=>o.value.evaluate(d,b,{},P),needGeometry:Ef(u)}}function hy(u,o){return u<o?-1:u>o?1:0}function Ef(u){if(!Array.isArray(u))return!1;if(u[0]==="within")return!0;for(let o=1;o<u.length;o++)if(Ef(u[o]))return!0;return!1}function Dh(u){if(!u)return!0;const o=u[0];return u.length<=1?o!=="any":o==="=="?Rh(u[1],u[2],"=="):o==="!="?lc(Rh(u[1],u[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Rh(u[1],u[2],o):o==="any"?(d=u.slice(1),["any"].concat(d.map(Dh))):o==="all"?["all"].concat(u.slice(1).map(Dh)):o==="none"?["all"].concat(u.slice(1).map(Dh).map(lc)):o==="in"?py(u[1],u.slice(2)):o==="!in"?lc(py(u[1],u.slice(2))):o==="has"?Lh(u[1]):o==="!has"?lc(Lh(u[1])):o!=="within"||u;var d}function Rh(u,o,d){switch(u){case"$type":return[`filter-type-${d}`,o];case"$id":return[`filter-id-${d}`,o];default:return[`filter-${d}`,u,o]}}function py(u,o){if(o.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(d=>typeof d!=typeof o[0])?["filter-in-large",u,["literal",o.sort(hy)]]:["filter-in-small",u,["literal",o]]}}function Lh(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function lc(u){return["!",u]}function od(u){return Ih(dt(u.value))?Xc(at({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Nh(u)}function Nh(u){const o=u.value,d=u.key;if(wi(o)!=="array")return[new He(d,o,`array expected, ${wi(o)} found`)];const b=u.styleSpec;let P,O=[];if(o.length<1)return[new He(d,o,"filter array must have at least 1 element")];switch(O=O.concat(ad({key:`${d}[0]`,value:o[0],valueSpec:b.filter_operator,style:u.style,styleSpec:u.styleSpec})),rt(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&rt(o[1])==="$type"&&O.push(new He(d,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&O.push(new He(d,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(P=wi(o[1]),P!=="string"&&O.push(new He(`${d}[1]`,o[1],`string expected, ${P} found`)));for(let H=2;H<o.length;H++)P=wi(o[H]),rt(o[1])==="$type"?O=O.concat(ad({key:`${d}[${H}]`,value:o[H],valueSpec:b.geometry_type,style:u.style,styleSpec:u.styleSpec})):P!=="string"&&P!=="number"&&P!=="boolean"&&O.push(new He(`${d}[${H}]`,o[H],`string, number, or boolean expected, ${P} found`));break;case"any":case"all":case"none":for(let H=1;H<o.length;H++)O=O.concat(Nh({key:`${d}[${H}]`,value:o[H],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":P=wi(o[1]),o.length!==2?O.push(new He(d,o,`filter array for "${o[0]}" operator must have 2 elements`)):P!=="string"&&O.push(new He(`${d}[1]`,o[1],`string expected, ${P} found`));break;case"within":P=wi(o[1]),o.length!==2?O.push(new He(d,o,`filter array for "${o[0]}" operator must have 2 elements`)):P!=="object"&&O.push(new He(`${d}[1]`,o[1],`object expected, ${P} found`))}return O}function fy(u,o){const d=u.key,b=u.style,P=u.styleSpec,O=u.value,H=u.objectKey,ne=P[`${o}_${u.layerType}`];if(!ne)return[];const ue=H.match(/^(.*)-transition$/);if(o==="paint"&&ue&&ne[ue[1]]&&ne[ue[1]].transition)return Us({key:d,value:O,valueSpec:P.transition,style:b,styleSpec:P});const we=u.valueSpec||ne[H];if(!we)return[new He(d,O,`unknown property "${H}"`)];let Oe;if(wi(O)==="string"&&Yc(we)&&!we.tokens&&(Oe=/^{([^}]+)}$/.exec(O)))return[new He(d,O,`"${H}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Oe[1])} }\`.`)];const Ue=[];return u.layerType==="symbol"&&(H==="text-field"&&b&&!b.glyphs&&Ue.push(new He(d,O,'use of "text-field" requires a style "glyphs" property')),H==="text-font"&&Zc(dt(O))&&rt(O.type)==="identity"&&Ue.push(new He(d,O,'"text-font" does not support identity functions'))),Ue.concat(Us({key:u.key,value:O,valueSpec:we,style:b,styleSpec:P,expressionContext:"property",propertyType:o,propertyKey:H}))}function ld(u){return fy(u,"paint")}function my(u){return fy(u,"layout")}function gy(u){let o=[];const d=u.value,b=u.key,P=u.style,O=u.styleSpec;d.type||d.ref||o.push(new He(b,d,'either "type" or "ref" is required'));let H=rt(d.type);const ne=rt(d.ref);if(d.id){const ue=rt(d.id);for(let we=0;we<u.arrayIndex;we++){const Oe=P.layers[we];rt(Oe.id)===ue&&o.push(new He(b,d.id,`duplicate layer id "${d.id}", previously used at line ${Oe.id.__line__}`))}}if("ref"in d){let ue;["type","source","source-layer","filter","layout"].forEach(we=>{we in d&&o.push(new He(b,d[we],`"${we}" is prohibited for ref layers`))}),P.layers.forEach(we=>{rt(we.id)===ne&&(ue=we)}),ue?ue.ref?o.push(new He(b,d.ref,"ref cannot reference another ref layer")):H=rt(ue.type):o.push(new He(b,d.ref,`ref layer "${ne}" not found`))}else if(H!=="background")if(d.source){const ue=P.sources&&P.sources[d.source],we=ue&&rt(ue.type);ue?we==="vector"&&H==="raster"?o.push(new He(b,d.source,`layer "${d.id}" requires a raster source`)):we==="raster"&&H!=="raster"?o.push(new He(b,d.source,`layer "${d.id}" requires a vector source`)):we!=="vector"||d["source-layer"]?we==="raster-dem"&&H!=="hillshade"?o.push(new He(b,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):H!=="line"||!d.paint||!d.paint["line-gradient"]||we==="geojson"&&ue.lineMetrics||o.push(new He(b,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new He(b,d,`layer "${d.id}" must specify a "source-layer"`)):o.push(new He(b,d.source,`source "${d.source}" not found`))}else o.push(new He(b,d,'missing required property "source"'));return o=o.concat(bo({key:b,value:d,valueSpec:O.layer,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Us({key:`${b}.type`,value:d.type,valueSpec:O.layer.type,style:u.style,styleSpec:u.styleSpec,object:d,objectKey:"type"}),filter:od,layout:ue=>bo({layer:d,key:ue.key,value:ue.value,style:ue.style,styleSpec:ue.styleSpec,objectElementValidators:{"*":we=>my(at({layerType:H},we))}}),paint:ue=>bo({layer:d,key:ue.key,value:ue.value,style:ue.style,styleSpec:ue.styleSpec,objectElementValidators:{"*":we=>ld(at({layerType:H},we))}})}})),o}function Kc(u){const o=u.value,d=u.key,b=wi(o);return b!=="string"?[new He(d,o,`string expected, ${b} found`)]:[]}const yy={promoteId:function({key:u,value:o}){if(wi(o)==="string")return Kc({key:u,value:o});{const d=[];for(const b in o)d.push(...Kc({key:`${u}.${b}`,value:o[b]}));return d}}};function vy(u){const o=u.value,d=u.key,b=u.styleSpec,P=u.style;if(!o.type)return[new He(d,o,'"type" is required')];const O=rt(o.type);let H;switch(O){case"vector":case"raster":case"raster-dem":return H=bo({key:d,value:o,valueSpec:b[`source_${O.replace("-","_")}`],style:u.style,styleSpec:b,objectElementValidators:yy}),H;case"geojson":if(H=bo({key:d,value:o,valueSpec:b.source_geojson,style:P,styleSpec:b,objectElementValidators:yy}),o.cluster)for(const ne in o.clusterProperties){const[ue,we]=o.clusterProperties[ne],Oe=typeof ue=="string"?[ue,["accumulated"],["get",ne]]:ue;H.push(...Xc({key:`${d}.${ne}.map`,value:we,expressionContext:"cluster-map"})),H.push(...Xc({key:`${d}.${ne}.reduce`,value:Oe,expressionContext:"cluster-reduce"}))}return H;case"video":return bo({key:d,value:o,valueSpec:b.source_video,style:P,styleSpec:b});case"image":return bo({key:d,value:o,valueSpec:b.source_image,style:P,styleSpec:b});case"canvas":return[new He(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ad({key:`${d}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function cd(u){const o=u.value,d=u.styleSpec,b=d.light,P=u.style;let O=[];const H=wi(o);if(o===void 0)return O;if(H!=="object")return O=O.concat([new He("light",o,`object expected, ${H} found`)]),O;for(const ne in o){const ue=ne.match(/^(.*)-transition$/);O=O.concat(ue&&b[ue[1]]&&b[ue[1]].transition?Us({key:ne,value:o[ne],valueSpec:d.transition,style:P,styleSpec:d}):b[ne]?Us({key:ne,value:o[ne],valueSpec:b[ne],style:P,styleSpec:d}):[new He(ne,o[ne],`unknown property "${ne}"`)])}return O}function ud(u){const o=u.value,d=u.styleSpec,b=d.terrain,P=u.style;let O=[];const H=wi(o);if(o===void 0)return O;if(H!=="object")return O=O.concat([new He("terrain",o,`object expected, ${H} found`)]),O;for(const ne in o)O=O.concat(b[ne]?Us({key:ne,value:o[ne],valueSpec:b[ne],style:P,styleSpec:d}):[new He(ne,o[ne],`unknown property "${ne}"`)]);return O}const Oa={"*":()=>[],array:uy,boolean:function(u){const o=u.value,d=u.key,b=wi(o);return b!=="boolean"?[new He(d,o,`boolean expected, ${b} found`)]:[]},number:Tf,color:function(u){const o=u.key,d=u.value,b=wi(d);return b!=="string"?[new He(o,d,`color expected, ${b} found`)]:Zt(d)===null?[new He(o,d,`color expected, "${d}" found`)]:[]},constants:Qe,enum:ad,filter:od,function:dy,layer:gy,object:bo,source:vy,light:cd,terrain:ud,string:Kc,formatted:function(u){return Kc(u).length===0?[]:Xc(u)},resolvedImage:function(u){return Kc(u).length===0?[]:Xc(u)},padding:function(u){const o=u.key,d=u.value;if(wi(d)==="array"){if(d.length<1||d.length>4)return[new He(o,d,`padding requires 1 to 4 values; ${d.length} values found`)];const b={type:"number"};let P=[];for(let O=0;O<d.length;O++)P=P.concat(Us({key:`${o}[${O}]`,value:d[O],valueSpec:b}));return P}return Tf({key:o,value:d,valueSpec:{}})}};function Us(u){const o=u.value,d=u.valueSpec,b=u.styleSpec;return d.expression&&Zc(rt(o))?dy(u):d.expression&&rd(dt(o))?Xc(u):d.type&&Oa[d.type]?Oa[d.type](u):bo(at({},u,{valueSpec:d.type?b[d.type]:d}))}function Vx(u){const o=u.value,d=u.key,b=Kc(u);return b.length||(o.indexOf("{fontstack}")===-1&&b.push(new He(d,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&b.push(new He(d,o,'"glyphs" url must include a "{range}" token'))),b}function Sl(u,o=je){let d=[];return d=d.concat(Us({key:"",value:u,valueSpec:o.$root,styleSpec:o,style:u,objectElementValidators:{glyphs:Vx,"*":()=>[]}})),u.constants&&(d=d.concat(Qe({key:"constants",value:u.constants}))),xy(d)}function xy(u){return[].concat(u).sort((o,d)=>o.line-d.line)}function cc(u){return function(...o){return xy(u.apply(this,o))}}Sl.source=cc(vy),Sl.light=cc(cd),Sl.terrain=cc(ud),Sl.layer=cc(gy),Sl.filter=cc(od),Sl.paintProperty=cc(ld),Sl.layoutProperty=cc(my);const uc=Sl,Gx=uc.light,kf=uc.paintProperty,Hx=uc.layoutProperty;function by(u,o){let d=!1;if(o&&o.length)for(const b of o)u.fire(new Pe(new Error(b.message))),d=!0;return d}class dc{constructor(o,d,b){const P=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;const H=new Int32Array(this.arrayBuffer);o=H[0],this.d=(d=H[1])+2*(b=H[2]);for(let ue=0;ue<this.d*this.d;ue++){const we=H[3+ue],Oe=H[3+ue+1];P.push(we===Oe?null:H.subarray(we,Oe))}const ne=H[3+P.length+1];this.keys=H.subarray(H[3+P.length],ne),this.bboxes=H.subarray(ne),this.insert=this._insertReadonly}else{this.d=d+2*b;for(let H=0;H<this.d*this.d;H++)P.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=o,this.padding=b,this.scale=d/o,this.uid=0;const O=b/d*o;this.min=-O,this.max=o+O}insert(o,d,b,P,O){this._forEachCell(d,b,P,O,this._insertCell,this.uid++,void 0,void 0),this.keys.push(o),this.bboxes.push(d),this.bboxes.push(b),this.bboxes.push(P),this.bboxes.push(O)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(o,d,b,P,O,H){this.cells[O].push(H)}query(o,d,b,P,O){const H=this.min,ne=this.max;if(o<=H&&d<=H&&ne<=b&&ne<=P&&!O)return Array.prototype.slice.call(this.keys);{const ue=[];return this._forEachCell(o,d,b,P,this._queryCell,ue,{},O),ue}}_queryCell(o,d,b,P,O,H,ne,ue){const we=this.cells[O];if(we!==null){const Oe=this.keys,Ue=this.bboxes;for(let qe=0;qe<we.length;qe++){const Ze=we[qe];if(ne[Ze]===void 0){const Ke=4*Ze;(ue?ue(Ue[Ke+0],Ue[Ke+1],Ue[Ke+2],Ue[Ke+3]):o<=Ue[Ke+2]&&d<=Ue[Ke+3]&&b>=Ue[Ke+0]&&P>=Ue[Ke+1])?(ne[Ze]=!0,H.push(Oe[Ze])):ne[Ze]=!1}}}}_forEachCell(o,d,b,P,O,H,ne,ue){const we=this._convertToCellCoord(o),Oe=this._convertToCellCoord(d),Ue=this._convertToCellCoord(b),qe=this._convertToCellCoord(P);for(let Ze=we;Ze<=Ue;Ze++)for(let Ke=Oe;Ke<=qe;Ke++){const ut=this.d*Ke+Ze;if((!ue||ue(this._convertFromCellCoord(Ze),this._convertFromCellCoord(Ke),this._convertFromCellCoord(Ze+1),this._convertFromCellCoord(Ke+1)))&&O.call(this,o,d,b,P,ut,H,ne,ue))return}}_convertFromCellCoord(o){return(o-this.padding)/this.scale}_convertToCellCoord(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const o=this.cells,d=3+this.cells.length+1+1;let b=0;for(let H=0;H<this.cells.length;H++)b+=this.cells[H].length;const P=new Int32Array(d+b+this.keys.length+this.bboxes.length);P[0]=this.extent,P[1]=this.n,P[2]=this.padding;let O=d;for(let H=0;H<o.length;H++){const ne=o[H];P[3+H]=O,P.set(ne,O),O+=ne.length}return P[3+o.length]=O,P.set(this.keys,O),O+=this.keys.length,P[3+o.length+1]=O,P.set(this.bboxes,O),O+=this.bboxes.length,P.buffer}static serialize(o,d){const b=o.toArrayBuffer();return d&&d.push(b),{buffer:b}}static deserialize(o){return new dc(o.buffer)}}const El={};function hi(u,o,d={}){if(El[u])throw new Error(`${u} is already registered.`);Object.defineProperty(o,"_classRegistryKey",{value:u,writeable:!1}),El[u]={klass:o,omit:d.omit||[],shallow:d.shallow||[]}}hi("Object",Object),hi("TransferableGridIndex",dc),hi("Color",Ve),hi("Error",Error),hi("AJAXError",te),hi("ResolvedImage",nt),hi("StylePropertyFunction",Mh),hi("StyleExpression",Cf,{omit:["_evaluator"]}),hi("ZoomDependentExpression",sd),hi("ZoomConstantExpression",kh),hi("CompoundExpression",Ri,{omit:["_evaluate"]});for(const u in qc)qc[u]._classRegistryKey||hi(`Expression_${u}`,qc[u]);function Mf(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function dd(u,o){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob)return u;if(Mf(u)||R(u))return o&&o.push(u),u;if(ArrayBuffer.isView(u)){const d=u;return o&&o.push(d.buffer),d}if(u instanceof ImageData)return o&&o.push(u.data.buffer),u;if(Array.isArray(u)){const d=[];for(const b of u)d.push(dd(b,o));return d}if(typeof u=="object"){const d=u.constructor,b=d._classRegistryKey;if(!b)throw new Error("can't serialize object of unregistered class");if(!El[b])throw new Error(`${b} is not registered.`);const P=d.serialize?d.serialize(u,o):{};if(d.serialize){if(o&&P===o[o.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const O in u){if(!u.hasOwnProperty(O)||El[b].omit.indexOf(O)>=0)continue;const H=u[O];P[O]=El[b].shallow.indexOf(O)>=0?H:dd(H,o)}u instanceof Error&&(P.message=u.message)}if(P.$name)throw new Error("$name property is reserved for worker serialization logic.");return b!=="Object"&&(P.$name=b),P}throw new Error("can't serialize object of type "+typeof u)}function hc(u){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||Mf(u)||R(u)||ArrayBuffer.isView(u)||u instanceof ImageData)return u;if(Array.isArray(u))return u.map(hc);if(typeof u=="object"){const o=u.$name||"Object";if(!El[o])throw new Error(`can't deserialize unregistered class ${o}`);const{klass:d}=El[o];if(!d)throw new Error(`can't deserialize unregistered class ${o}`);if(d.deserialize)return d.deserialize(u);const b=Object.create(d.prototype);for(const P of Object.keys(u)){if(P==="$name")continue;const O=u[P];b[P]=El[o].shallow.indexOf(P)>=0?O:hc(O)}return b}throw new Error("can't deserialize object of type "+typeof u)}class hd{constructor(){this.first=!0}update(o,d){const b=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=b,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=b,!0):(this.lastFloorZoom>b?(this.lastIntegerZoom=b+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<b&&(this.lastIntegerZoom=b,this.lastIntegerZoomTime=d),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=b,!0))}}const ri={"Latin-1 Supplement":u=>u>=128&&u<=255,Arabic:u=>u>=1536&&u<=1791,"Arabic Supplement":u=>u>=1872&&u<=1919,"Arabic Extended-A":u=>u>=2208&&u<=2303,"Hangul Jamo":u=>u>=4352&&u<=4607,"Unified Canadian Aboriginal Syllabics":u=>u>=5120&&u<=5759,Khmer:u=>u>=6016&&u<=6143,"Unified Canadian Aboriginal Syllabics Extended":u=>u>=6320&&u<=6399,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"CJK Radicals Supplement":u=>u>=11904&&u<=12031,"Kangxi Radicals":u=>u>=12032&&u<=12255,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Hiragana:u=>u>=12352&&u<=12447,Katakana:u=>u>=12448&&u<=12543,Bopomofo:u=>u>=12544&&u<=12591,"Hangul Compatibility Jamo":u=>u>=12592&&u<=12687,Kanbun:u=>u>=12688&&u<=12703,"Bopomofo Extended":u=>u>=12704&&u<=12735,"CJK Strokes":u=>u>=12736&&u<=12783,"Katakana Phonetic Extensions":u=>u>=12784&&u<=12799,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"CJK Unified Ideographs Extension A":u=>u>=13312&&u<=19903,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"CJK Unified Ideographs":u=>u>=19968&&u<=40959,"Yi Syllables":u=>u>=40960&&u<=42127,"Yi Radicals":u=>u>=42128&&u<=42191,"Hangul Jamo Extended-A":u=>u>=43360&&u<=43391,"Hangul Syllables":u=>u>=44032&&u<=55215,"Hangul Jamo Extended-B":u=>u>=55216&&u<=55295,"Private Use Area":u=>u>=57344&&u<=63743,"CJK Compatibility Ideographs":u=>u>=63744&&u<=64255,"Arabic Presentation Forms-A":u=>u>=64336&&u<=65023,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Arabic Presentation Forms-B":u=>u>=65136&&u<=65279,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519};function Af(u){for(const o of u)if(pd(o.charCodeAt(0)))return!0;return!1}function wy(u){for(const o of u)if(!qx(o.charCodeAt(0)))return!1;return!0}function qx(u){return!(ri.Arabic(u)||ri["Arabic Supplement"](u)||ri["Arabic Extended-A"](u)||ri["Arabic Presentation Forms-A"](u)||ri["Arabic Presentation Forms-B"](u))}function pd(u){return!(u!==746&&u!==747&&(u<4352||!(ri["Bopomofo Extended"](u)||ri.Bopomofo(u)||ri["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||ri["CJK Compatibility Ideographs"](u)||ri["CJK Compatibility"](u)||ri["CJK Radicals Supplement"](u)||ri["CJK Strokes"](u)||!(!ri["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||ri["CJK Unified Ideographs Extension A"](u)||ri["CJK Unified Ideographs"](u)||ri["Enclosed CJK Letters and Months"](u)||ri["Hangul Compatibility Jamo"](u)||ri["Hangul Jamo Extended-A"](u)||ri["Hangul Jamo Extended-B"](u)||ri["Hangul Jamo"](u)||ri["Hangul Syllables"](u)||ri.Hiragana(u)||ri["Ideographic Description Characters"](u)||ri.Kanbun(u)||ri["Kangxi Radicals"](u)||ri["Katakana Phonetic Extensions"](u)||ri.Katakana(u)&&u!==12540||!(!ri["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!ri["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||ri["Unified Canadian Aboriginal Syllabics"](u)||ri["Unified Canadian Aboriginal Syllabics Extended"](u)||ri["Vertical Forms"](u)||ri["Yijing Hexagram Symbols"](u)||ri["Yi Syllables"](u)||ri["Yi Radicals"](u))))}function _y(u){return!(pd(u)||function(o){return!!(ri["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||ri["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||ri["Letterlike Symbols"](o)||ri["Number Forms"](o)||ri["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||ri["Control Pictures"](o)&&o!==9251||ri["Optical Character Recognition"](o)||ri["Enclosed Alphanumerics"](o)||ri["Geometric Shapes"](o)||ri["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||ri["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||ri["CJK Symbols and Punctuation"](o)||ri.Katakana(o)||ri["Private Use Area"](o)||ri["CJK Compatibility Forms"](o)||ri["Small Form Variants"](o)||ri["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(u))}function Cy(u){return u>=1424&&u<=2303||ri["Arabic Presentation Forms-A"](u)||ri["Arabic Presentation Forms-B"](u)}function Wx(u,o){return!(!o&&Cy(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||ri.Khmer(u))}function Yx(u){for(const o of u)if(Cy(o.charCodeAt(0)))return!0;return!1}const zh="deferred",If="loading",Pf="loaded";let Df=null,wa="unavailable",kl=null;const Ty=function(u){u&&typeof u=="string"&&u.indexOf("NetworkError")>-1&&(wa="error"),Df&&Df(u)};function Rf(){Qc.fire(new Se("pluginStateChange",{pluginStatus:wa,pluginURL:kl}))}const Qc=new Fe,Lf=function(){return wa},Oh=function(){if(wa!==zh||!kl)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");wa=If,Rf(),kl&&_e({url:kl},u=>{u?Ty(u):(wa=Pf,Rf())})},ro={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>wa===Pf||ro.applyArabicShaping!=null,isLoading:()=>wa===If,setState(u){if(!Y())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");wa=u.pluginStatus,kl=u.pluginURL},isParsed(){if(!Y())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ro.applyArabicShaping!=null&&ro.processBidirectionalText!=null&&ro.processStyledBidirectionalText!=null},getPluginURL(){if(!Y())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return kl}};class bn{constructor(o,d){this.zoom=o,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new hd,this.transition={})}isSupportedScript(o){return function(d,b){for(const P of d)if(!Wx(P.charCodeAt(0),b))return!1;return!0}(o,ro.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const o=this.zoom,d=o-Math.floor(o),b=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*b}:{fromScale:.5,toScale:1,t:1-(1-b)*d}}}class jh{constructor(o,d){this.property=o,this.value=d,this.expression=function(b,P){if(Zc(b))return new Mh(b,P);if(rd(b)){const O=cy(b,P);if(O.result==="error")throw new Error(O.value.map(H=>`${H.key}: ${H.message}`).join(", "));return O.value}{let O=b;return P.type==="color"&&typeof b=="string"?O=Ve.parse(b):P.type!=="padding"||typeof b!="number"&&!Array.isArray(b)||(O=ot.parse(b)),{kind:"constant",evaluate:()=>O}}}(d===void 0?o.specification.default:d,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,d,b){return this.property.possiblyEvaluate(this,o,d,b)}}class Fh{constructor(o){this.property=o,this.value=new jh(o,void 0)}transitioned(o,d){return new Sy(this.property,this.value,d,v({},o.transition,this.transition),o.now)}untransitioned(){return new Sy(this.property,this.value,null,{},0)}}class Nf{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return E(this._values[o].value.value)}setValue(o,d){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new Fh(this._values[o].property)),this._values[o].value=new jh(this._values[o].property,d===null?void 0:E(d))}getTransition(o){return E(this._values[o].transition)}setTransition(o,d){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new Fh(this._values[o].property)),this._values[o].transition=E(d)||void 0}serialize(){const o={};for(const d of Object.keys(this._values)){const b=this.getValue(d);b!==void 0&&(o[d]=b);const P=this.getTransition(d);P!==void 0&&(o[`${d}-transition`]=P)}return o}transitioned(o,d){const b=new Ey(this._properties);for(const P of Object.keys(this._values))b._values[P]=this._values[P].transitioned(o,d._values[P]);return b}untransitioned(){const o=new Ey(this._properties);for(const d of Object.keys(this._values))o._values[d]=this._values[d].untransitioned();return o}}class Sy{constructor(o,d,b,P,O){this.property=o,this.value=d,this.begin=O+P.delay||0,this.end=this.begin+P.duration||0,o.specification.transition&&(P.delay||P.duration)&&(this.prior=b)}possiblyEvaluate(o,d,b){const P=o.now||0,O=this.value.possiblyEvaluate(o,d,b),H=this.prior;if(H){if(P>this.end)return this.prior=null,O;if(this.value.isDataDriven())return this.prior=null,O;if(P<this.begin)return H.possiblyEvaluate(o,d,b);{const ne=(P-this.begin)/(this.end-this.begin);return this.property.interpolate(H.possiblyEvaluate(o,d,b),O,function(ue){if(ue<=0)return 0;if(ue>=1)return 1;const we=ue*ue,Oe=we*ue;return 4*(ue<.5?Oe:3*(ue-we)+Oe-.75)}(ne))}}return O}}class Ey{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,d,b){const P=new Bh(this._properties);for(const O of Object.keys(this._values))P._values[O]=this._values[O].possiblyEvaluate(o,d,b);return P}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class Zx{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}getValue(o){return E(this._values[o].value)}setValue(o,d){this._values[o]=new jh(this._values[o].property,d===null?void 0:E(d))}serialize(){const o={};for(const d of Object.keys(this._values)){const b=this.getValue(d);b!==void 0&&(o[d]=b)}return o}possiblyEvaluate(o,d,b){const P=new Bh(this._properties);for(const O of Object.keys(this._values))P._values[O]=this._values[O].possiblyEvaluate(o,d,b);return P}}class Bo{constructor(o,d,b){this.property=o,this.value=d,this.parameters=b}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,d,b,P){return this.property.evaluate(this.value,this.parameters,o,d,b,P)}}class Bh{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class Si{constructor(o){this.specification=o}possiblyEvaluate(o,d){if(o.isDataDriven())throw new Error("Value should not be data driven");return o.expression.evaluate(d)}interpolate(o,d,b){const P=ed[this.specification.type];return P?P(o,d,b):o}}class Li{constructor(o,d){this.specification=o,this.overrides=d}possiblyEvaluate(o,d,b,P){return new Bo(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(d,null,{},b,P)}:o.expression,d)}interpolate(o,d,b){if(o.value.kind!=="constant"||d.value.kind!=="constant")return o;if(o.value.value===void 0||d.value.value===void 0)return new Bo(this,{kind:"constant",value:void 0},o.parameters);const P=ed[this.specification.type];return P?new Bo(this,{kind:"constant",value:P(o.value.value,d.value.value,b)},o.parameters):o}evaluate(o,d,b,P,O,H){return o.kind==="constant"?o.value:o.evaluate(d,b,P,O,H)}}class fd extends Li{possiblyEvaluate(o,d,b,P){if(o.value===void 0)return new Bo(this,{kind:"constant",value:void 0},d);if(o.expression.kind==="constant"){const O=o.expression.evaluate(d,null,{},b,P),H=o.property.specification.type==="resolvedImage"&&typeof O!="string"?O.name:O,ne=this._calculate(H,H,H,d);return new Bo(this,{kind:"constant",value:ne},d)}if(o.expression.kind==="camera"){const O=this._calculate(o.expression.evaluate({zoom:d.zoom-1}),o.expression.evaluate({zoom:d.zoom}),o.expression.evaluate({zoom:d.zoom+1}),d);return new Bo(this,{kind:"constant",value:O},d)}return new Bo(this,o.expression,d)}evaluate(o,d,b,P,O,H){if(o.kind==="source"){const ne=o.evaluate(d,b,P,O,H);return this._calculate(ne,ne,ne,d)}return o.kind==="composite"?this._calculate(o.evaluate({zoom:Math.floor(d.zoom)-1},b,P),o.evaluate({zoom:Math.floor(d.zoom)},b,P),o.evaluate({zoom:Math.floor(d.zoom)+1},b,P),d):o.value}_calculate(o,d,b,P){return P.zoom>P.zoomHistory.lastIntegerZoom?{from:o,to:d}:{from:b,to:d}}interpolate(o){return o}}class md{constructor(o){this.specification=o}possiblyEvaluate(o,d,b,P){if(o.value!==void 0){if(o.expression.kind==="constant"){const O=o.expression.evaluate(d,null,{},b,P);return this._calculate(O,O,O,d)}return this._calculate(o.expression.evaluate(new bn(Math.floor(d.zoom-1),d)),o.expression.evaluate(new bn(Math.floor(d.zoom),d)),o.expression.evaluate(new bn(Math.floor(d.zoom+1),d)),d)}}_calculate(o,d,b,P){return P.zoom>P.zoomHistory.lastIntegerZoom?{from:o,to:d}:{from:b,to:d}}interpolate(o){return o}}class zf{constructor(o){this.specification=o}possiblyEvaluate(o,d,b,P){return!!o.expression.evaluate(d,null,{},b,P)}interpolate(){return!1}}class os{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in o){const b=o[d];b.specification.overridable&&this.overridableProperties.push(d);const P=this.defaultPropertyValues[d]=new jh(b,void 0),O=this.defaultTransitionablePropertyValues[d]=new Fh(b);this.defaultTransitioningPropertyValues[d]=O.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=P.possiblyEvaluate({})}}}hi("DataDrivenProperty",Li),hi("DataConstantProperty",Si),hi("CrossFadedDataDrivenProperty",fd),hi("CrossFadedProperty",md),hi("ColorRampProperty",zf);const pc="-transition";class _a extends Fe{constructor(o,d){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1},o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),d.layout&&(this._unevaluatedLayout=new Zx(d.layout)),d.paint)){this._transitionablePaint=new Nf(d.paint);for(const b in o.paint)this.setPaintProperty(b,o.paint[b],{validate:!1});for(const b in o.layout)this.setLayoutProperty(b,o.layout[b],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Bh(d.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,d,b={}){d!=null&&this._validate(Hx,`layers.${this.id}.layout.${o}`,o,d,b)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,d):this.visibility=d)}getPaintProperty(o){return o.endsWith(pc)?this._transitionablePaint.getTransition(o.slice(0,-pc.length)):this._transitionablePaint.getValue(o)}setPaintProperty(o,d,b={}){if(d!=null&&this._validate(kf,`layers.${this.id}.paint.${o}`,o,d,b))return!1;if(o.endsWith(pc))return this._transitionablePaint.setTransition(o.slice(0,-pc.length),d||void 0),!1;{const P=this._transitionablePaint._values[o],O=P.property.specification["property-type"]==="cross-faded-data-driven",H=P.value.isDataDriven(),ne=P.value;this._transitionablePaint.setValue(o,d),this._handleSpecialPaintPropertyUpdate(o);const ue=this._transitionablePaint._values[o].value;return ue.isDataDriven()||H||O||this._handleOverridablePaintPropertyUpdate(o,ne,ue)}}_handleSpecialPaintPropertyUpdate(o){}_handleOverridablePaintPropertyUpdate(o,d,b){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,d){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,d)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),w(o,(d,b)=>!(d===void 0||b==="layout"&&!Object.keys(d).length||b==="paint"&&!Object.keys(d).length))}_validate(o,d,b,P,O={}){return(!O||O.validate!==!1)&&by(this,o.call(uc,{key:d,layerType:this.type,objectKey:b,value:P,styleSpec:je,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const d=this.paint.get(o);if(d instanceof Bo&&Yc(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}const Xx={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class gd{constructor(o,d){this._structArray=o,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class mn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,d){return o._trim(),d&&(o.isTransferred=!0,d.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const d=Object.create(this.prototype);return d.arrayBuffer=o.arrayBuffer,d.length=o.length,d.capacity=o.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Jn(u,o=1){let d=0,b=0;return{members:u.map(P=>{const O=Xx[P.type].BYTES_PER_ELEMENT,H=d=ky(d,Math.max(o,O)),ne=P.components||1;return b=Math.max(b,O),d+=O*ne,{name:P.name,type:P.type,components:ne,offset:H}}),size:ky(d,Math.max(b,o)),alignment:o}}function ky(u,o){return Math.ceil(u/o)*o}class Jc extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d){const b=this.length;return this.resize(b+1),this.emplace(b,o,d)}emplace(o,d,b){const P=2*o;return this.int16[P+0]=d,this.int16[P+1]=b,o}}Jc.prototype.bytesPerElement=4,hi("StructArrayLayout2i4",Jc);class yd extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,b,P){const O=this.length;return this.resize(O+1),this.emplace(O,o,d,b,P)}emplace(o,d,b,P,O){const H=4*o;return this.int16[H+0]=d,this.int16[H+1]=b,this.int16[H+2]=P,this.int16[H+3]=O,o}}yd.prototype.bytesPerElement=8,hi("StructArrayLayout4i8",yd);class I extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,b,P,O,H){const ne=this.length;return this.resize(ne+1),this.emplace(ne,o,d,b,P,O,H)}emplace(o,d,b,P,O,H,ne){const ue=6*o;return this.int16[ue+0]=d,this.int16[ue+1]=b,this.int16[ue+2]=P,this.int16[ue+3]=O,this.int16[ue+4]=H,this.int16[ue+5]=ne,o}}I.prototype.bytesPerElement=12,hi("StructArrayLayout2i4i12",I);class l extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,b,P,O,H){const ne=this.length;return this.resize(ne+1),this.emplace(ne,o,d,b,P,O,H)}emplace(o,d,b,P,O,H,ne){const ue=4*o,we=8*o;return this.int16[ue+0]=d,this.int16[ue+1]=b,this.uint8[we+4]=P,this.uint8[we+5]=O,this.uint8[we+6]=H,this.uint8[we+7]=ne,o}}l.prototype.bytesPerElement=8,hi("StructArrayLayout2i4ub8",l);class f extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d){const b=this.length;return this.resize(b+1),this.emplace(b,o,d)}emplace(o,d,b){const P=2*o;return this.float32[P+0]=d,this.float32[P+1]=b,o}}f.prototype.bytesPerElement=8,hi("StructArrayLayout2f8",f);class T extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,b,P,O,H,ne,ue,we,Oe){const Ue=this.length;return this.resize(Ue+1),this.emplace(Ue,o,d,b,P,O,H,ne,ue,we,Oe)}emplace(o,d,b,P,O,H,ne,ue,we,Oe,Ue){const qe=10*o;return this.uint16[qe+0]=d,this.uint16[qe+1]=b,this.uint16[qe+2]=P,this.uint16[qe+3]=O,this.uint16[qe+4]=H,this.uint16[qe+5]=ne,this.uint16[qe+6]=ue,this.uint16[qe+7]=we,this.uint16[qe+8]=Oe,this.uint16[qe+9]=Ue,o}}T.prototype.bytesPerElement=20,hi("StructArrayLayout10ui20",T);class D extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,b,P,O,H,ne,ue,we,Oe,Ue,qe){const Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,o,d,b,P,O,H,ne,ue,we,Oe,Ue,qe)}emplace(o,d,b,P,O,H,ne,ue,we,Oe,Ue,qe,Ze){const Ke=12*o;return this.int16[Ke+0]=d,this.int16[Ke+1]=b,this.int16[Ke+2]=P,this.int16[Ke+3]=O,this.uint16[Ke+4]=H,this.uint16[Ke+5]=ne,this.uint16[Ke+6]=ue,this.uint16[Ke+7]=we,this.int16[Ke+8]=Oe,this.int16[Ke+9]=Ue,this.int16[Ke+10]=qe,this.int16[Ke+11]=Ze,o}}D.prototype.bytesPerElement=24,hi("StructArrayLayout4i4ui4i24",D);class V extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,b){const P=this.length;return this.resize(P+1),this.emplace(P,o,d,b)}emplace(o,d,b,P){const O=3*o;return this.float32[O+0]=d,this.float32[O+1]=b,this.float32[O+2]=P,o}}V.prototype.bytesPerElement=12,hi("StructArrayLayout3f12",V);class re extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.uint32[1*o+0]=d,o}}re.prototype.bytesPerElement=4,hi("StructArrayLayout1ul4",re);class pe extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,b,P,O,H,ne,ue,we){const Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,o,d,b,P,O,H,ne,ue,we)}emplace(o,d,b,P,O,H,ne,ue,we,Oe){const Ue=10*o,qe=5*o;return this.int16[Ue+0]=d,this.int16[Ue+1]=b,this.int16[Ue+2]=P,this.int16[Ue+3]=O,this.int16[Ue+4]=H,this.int16[Ue+5]=ne,this.uint32[qe+3]=ue,this.uint16[Ue+8]=we,this.uint16[Ue+9]=Oe,o}}pe.prototype.bytesPerElement=20,hi("StructArrayLayout6i1ul2ui20",pe);class ye extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,b,P,O,H){const ne=this.length;return this.resize(ne+1),this.emplace(ne,o,d,b,P,O,H)}emplace(o,d,b,P,O,H,ne){const ue=6*o;return this.int16[ue+0]=d,this.int16[ue+1]=b,this.int16[ue+2]=P,this.int16[ue+3]=O,this.int16[ue+4]=H,this.int16[ue+5]=ne,o}}ye.prototype.bytesPerElement=12,hi("StructArrayLayout2i2i2i12",ye);class Ae extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,b,P,O){const H=this.length;return this.resize(H+1),this.emplace(H,o,d,b,P,O)}emplace(o,d,b,P,O,H){const ne=4*o,ue=8*o;return this.float32[ne+0]=d,this.float32[ne+1]=b,this.float32[ne+2]=P,this.int16[ue+6]=O,this.int16[ue+7]=H,o}}Ae.prototype.bytesPerElement=16,hi("StructArrayLayout2f1f2i16",Ae);class Be extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,b,P){const O=this.length;return this.resize(O+1),this.emplace(O,o,d,b,P)}emplace(o,d,b,P,O){const H=12*o,ne=3*o;return this.uint8[H+0]=d,this.uint8[H+1]=b,this.float32[ne+1]=P,this.float32[ne+2]=O,o}}Be.prototype.bytesPerElement=12,hi("StructArrayLayout2ub2f12",Be);class Ge extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,b){const P=this.length;return this.resize(P+1),this.emplace(P,o,d,b)}emplace(o,d,b,P){const O=3*o;return this.uint16[O+0]=d,this.uint16[O+1]=b,this.uint16[O+2]=P,o}}Ge.prototype.bytesPerElement=6,hi("StructArrayLayout3ui6",Ge);class Ye extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,b,P,O,H,ne,ue,we,Oe,Ue,qe,Ze,Ke,ut,lt,_t){const Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,o,d,b,P,O,H,ne,ue,we,Oe,Ue,qe,Ze,Ke,ut,lt,_t)}emplace(o,d,b,P,O,H,ne,ue,we,Oe,Ue,qe,Ze,Ke,ut,lt,_t,Dt){const xt=24*o,Pt=12*o,Ut=48*o;return this.int16[xt+0]=d,this.int16[xt+1]=b,this.uint16[xt+2]=P,this.uint16[xt+3]=O,this.uint32[Pt+2]=H,this.uint32[Pt+3]=ne,this.uint32[Pt+4]=ue,this.uint16[xt+10]=we,this.uint16[xt+11]=Oe,this.uint16[xt+12]=Ue,this.float32[Pt+7]=qe,this.float32[Pt+8]=Ze,this.uint8[Ut+36]=Ke,this.uint8[Ut+37]=ut,this.uint8[Ut+38]=lt,this.uint32[Pt+10]=_t,this.int16[xt+22]=Dt,o}}Ye.prototype.bytesPerElement=48,hi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ye);class it extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,b,P,O,H,ne,ue,we,Oe,Ue,qe,Ze,Ke,ut,lt,_t,Dt,xt,Pt,Ut,Ft,yi,_i,ni,Qt,Yt,si){const ei=this.length;return this.resize(ei+1),this.emplace(ei,o,d,b,P,O,H,ne,ue,we,Oe,Ue,qe,Ze,Ke,ut,lt,_t,Dt,xt,Pt,Ut,Ft,yi,_i,ni,Qt,Yt,si)}emplace(o,d,b,P,O,H,ne,ue,we,Oe,Ue,qe,Ze,Ke,ut,lt,_t,Dt,xt,Pt,Ut,Ft,yi,_i,ni,Qt,Yt,si,ei){const Gt=34*o,Ii=17*o;return this.int16[Gt+0]=d,this.int16[Gt+1]=b,this.int16[Gt+2]=P,this.int16[Gt+3]=O,this.int16[Gt+4]=H,this.int16[Gt+5]=ne,this.int16[Gt+6]=ue,this.int16[Gt+7]=we,this.uint16[Gt+8]=Oe,this.uint16[Gt+9]=Ue,this.uint16[Gt+10]=qe,this.uint16[Gt+11]=Ze,this.uint16[Gt+12]=Ke,this.uint16[Gt+13]=ut,this.uint16[Gt+14]=lt,this.uint16[Gt+15]=_t,this.uint16[Gt+16]=Dt,this.uint16[Gt+17]=xt,this.uint16[Gt+18]=Pt,this.uint16[Gt+19]=Ut,this.uint16[Gt+20]=Ft,this.uint16[Gt+21]=yi,this.uint16[Gt+22]=_i,this.uint32[Ii+12]=ni,this.float32[Ii+13]=Qt,this.float32[Ii+14]=Yt,this.float32[Ii+15]=si,this.float32[Ii+16]=ei,o}}it.prototype.bytesPerElement=68,hi("StructArrayLayout8i15ui1ul4f68",it);class Je extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.float32[1*o+0]=d,o}}Je.prototype.bytesPerElement=4,hi("StructArrayLayout1f4",Je);class tt extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,b){const P=this.length;return this.resize(P+1),this.emplace(P,o,d,b)}emplace(o,d,b,P){const O=3*o;return this.int16[O+0]=d,this.int16[O+1]=b,this.int16[O+2]=P,o}}tt.prototype.bytesPerElement=6,hi("StructArrayLayout3i6",tt);class pt extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,b){const P=this.length;return this.resize(P+1),this.emplace(P,o,d,b)}emplace(o,d,b,P){const O=4*o;return this.uint32[2*o+0]=d,this.uint16[O+2]=b,this.uint16[O+3]=P,o}}pt.prototype.bytesPerElement=8,hi("StructArrayLayout1ul2ui8",pt);class vt extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d){const b=this.length;return this.resize(b+1),this.emplace(b,o,d)}emplace(o,d,b){const P=2*o;return this.uint16[P+0]=d,this.uint16[P+1]=b,o}}vt.prototype.bytesPerElement=4,hi("StructArrayLayout2ui4",vt);class Ct extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.uint16[1*o+0]=d,o}}Ct.prototype.bytesPerElement=2,hi("StructArrayLayout1ui2",Ct);class st extends mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,b,P){const O=this.length;return this.resize(O+1),this.emplace(O,o,d,b,P)}emplace(o,d,b,P,O){const H=4*o;return this.float32[H+0]=d,this.float32[H+1]=b,this.float32[H+2]=P,this.float32[H+3]=O,o}}st.prototype.bytesPerElement=16,hi("StructArrayLayout4f16",st);class It extends gd{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new G(this.anchorPointX,this.anchorPointY)}}It.prototype.size=20;class Et extends pe{get(o){return new It(this,o)}}hi("CollisionBoxArray",Et);class Ot extends gd{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(o){this._structArray.uint8[this._pos1+37]=o}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(o){this._structArray.uint8[this._pos1+38]=o}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(o){this._structArray.uint32[this._pos4+10]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ot.prototype.size=48;class jt extends Ye{get(o){return new Ot(this,o)}}hi("PlacedSymbolArray",jt);class Vt extends gd{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(o){this._structArray.uint32[this._pos4+12]=o}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Vt.prototype.size=68;class Lt extends it{get(o){return new Vt(this,o)}}hi("SymbolInstanceArray",Lt);class li extends Je{getoffsetX(o){return this.float32[1*o+0]}}hi("GlyphOffsetArray",li);class Kt extends tt{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}hi("SymbolLineVertexArray",Kt);class ui extends gd{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ui.prototype.size=8;class tr extends pt{get(o){return new ui(this,o)}}hi("FeatureIndexArray",tr);class ur extends Jc{}class Pi extends Jc{}class qr extends Jc{}class Wr extends I{}class Cr extends l{}class Sr extends f{}class Ar extends T{}class ja extends D{}class $o extends V{}class wo extends re{}class _o extends ye{}class fc extends Be{}class Ds extends Ge{}class Co extends vt{}const mc=Jn([{name:"a_pos",components:2,type:"Int16"}],4),{members:$h}=mc;class Ir{constructor(o=[]){this.segments=o}prepareSegment(o,d,b,P){let O=this.segments[this.segments.length-1];return o>Ir.MAX_VERTEX_ARRAY_LENGTH&&M(`Max vertices per segment is ${Ir.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!O||O.vertexLength+o>Ir.MAX_VERTEX_ARRAY_LENGTH||O.sortKey!==P)&&(O={vertexOffset:d.length,primitiveOffset:b.length,vertexLength:0,primitiveLength:0},P!==void 0&&(O.sortKey=P),this.segments.push(O)),O}get(){return this.segments}destroy(){for(const o of this.segments)for(const d in o.vaos)o.vaos[d].destroy()}static simpleSegment(o,d,b,P){return new Ir([{vertexOffset:o,primitiveOffset:d,vertexLength:b,primitiveLength:P,vaos:{},sortKey:0}])}}function gn(u,o){return 256*(u=g(Math.floor(u),0,255))+g(Math.floor(o),0,255)}Ir.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,hi("SegmentVector",Ir);const Lr=Jn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var es={exports:{}},Ca={exports:{}};Ca.exports=function(u,o){var d,b,P,O,H,ne,ue,we;for(b=u.length-(d=3&u.length),P=o,H=3432918353,ne=461845907,we=0;we<b;)ue=255&u.charCodeAt(we)|(255&u.charCodeAt(++we))<<8|(255&u.charCodeAt(++we))<<16|(255&u.charCodeAt(++we))<<24,++we,P=27492+(65535&(O=5*(65535&(P=(P^=ue=(65535&(ue=(ue=(65535&ue)*H+(((ue>>>16)*H&65535)<<16)&4294967295)<<15|ue>>>17))*ne+(((ue>>>16)*ne&65535)<<16)&4294967295)<<13|P>>>19))+((5*(P>>>16)&65535)<<16)&4294967295))+((58964+(O>>>16)&65535)<<16);switch(ue=0,d){case 3:ue^=(255&u.charCodeAt(we+2))<<16;case 2:ue^=(255&u.charCodeAt(we+1))<<8;case 1:P^=ue=(65535&(ue=(ue=(65535&(ue^=255&u.charCodeAt(we)))*H+(((ue>>>16)*H&65535)<<16)&4294967295)<<15|ue>>>17))*ne+(((ue>>>16)*ne&65535)<<16)&4294967295}return P^=u.length,P=2246822507*(65535&(P^=P>>>16))+((2246822507*(P>>>16)&65535)<<16)&4294967295,P=3266489909*(65535&(P^=P>>>13))+((3266489909*(P>>>16)&65535)<<16)&4294967295,(P^=P>>>16)>>>0};var wn={exports:{}};wn.exports=function(u,o){for(var d,b=u.length,P=o^b,O=0;b>=4;)d=1540483477*(65535&(d=255&u.charCodeAt(O)|(255&u.charCodeAt(++O))<<8|(255&u.charCodeAt(++O))<<16|(255&u.charCodeAt(++O))<<24))+((1540483477*(d>>>16)&65535)<<16),P=1540483477*(65535&P)+((1540483477*(P>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),b-=4,++O;switch(b){case 3:P^=(255&u.charCodeAt(O+2))<<16;case 2:P^=(255&u.charCodeAt(O+1))<<8;case 1:P=1540483477*(65535&(P^=255&u.charCodeAt(O)))+((1540483477*(P>>>16)&65535)<<16)}return P=1540483477*(65535&(P^=P>>>13))+((1540483477*(P>>>16)&65535)<<16),(P^=P>>>15)>>>0};var no=Ca.exports,eu=wn.exports;es.exports=no,es.exports.murmur3=no,es.exports.murmur2=eu;class tu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,d,b,P){this.ids.push(Uh(o)),this.positions.push(d,b,P)}getPositions(o){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=Uh(o);let b=0,P=this.ids.length-1;for(;b<P;){const H=b+P>>1;this.ids[H]>=d?P=H:b=H+1}const O=[];for(;this.ids[b]===d;)O.push({index:this.positions[3*b],start:this.positions[3*b+1],end:this.positions[3*b+2]}),b++;return O}static serialize(o,d){const b=new Float64Array(o.ids),P=new Uint32Array(o.positions);return Of(b,P,0,b.length-1),d&&d.push(b.buffer,P.buffer),{ids:b,positions:P}}static deserialize(o){const d=new tu;return d.ids=o.ids,d.positions=o.positions,d.indexed=!0,d}}function Uh(u){const o=+u;return!isNaN(o)&&o<=Number.MAX_SAFE_INTEGER?o:es.exports(String(u))}function Of(u,o,d,b){for(;d<b;){const P=u[d+b>>1];let O=d-1,H=b+1;for(;;){do O++;while(u[O]<P);do H--;while(u[H]>P);if(O>=H)break;Vh(u,O,H),Vh(o,3*O,3*H),Vh(o,3*O+1,3*H+1),Vh(o,3*O+2,3*H+2)}H-d<b-H?(Of(u,o,d,H),d=H+1):(Of(u,o,H+1,b),b=H)}}function Vh(u,o,d){const b=u[o];u[o]=u[d],u[d]=b}hi("FeaturePositionMap",tu);class To{constructor(o,d){this.gl=o.gl,this.location=d}}class Gh extends To{constructor(o,d){super(o,d),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class vd extends To{constructor(o,d){super(o,d),this.current=[0,0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3]))}}class Hh extends To{constructor(o,d){super(o,d),this.current=Ve.transparent}set(o){o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a))}}const o5=new Float32Array(16);function Kx(u){return[gn(255*u.r,255*u.g),gn(255*u.b,255*u.a)]}class jf{constructor(o,d,b){this.value=o,this.uniformNames=d.map(P=>`u_${P}`),this.type=b}setUniform(o,d,b){o.set(b.constantOr(this.value))}getBinding(o,d,b){return this.type==="color"?new Hh(o,d):new Gh(o,d)}}class qh{constructor(o,d){this.uniformNames=d.map(b=>`u_${b}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=o.tlbr}setUniform(o,d,b,P){const O=P==="u_pattern_to"?this.patternTo:P==="u_pattern_from"?this.patternFrom:P==="u_pixel_ratio_to"?this.pixelRatioTo:P==="u_pixel_ratio_from"?this.pixelRatioFrom:null;O&&o.set(O)}getBinding(o,d,b){return b.substr(0,9)==="u_pattern"?new vd(o,d):new Gh(o,d)}}class gc{constructor(o,d,b,P){this.expression=o,this.type=b,this.maxValue=0,this.paintVertexAttributes=d.map(O=>({name:`a_${O}`,type:"Float32",components:b==="color"?2:1,offset:0})),this.paintVertexArray=new P}populatePaintArray(o,d,b,P,O){const H=this.paintVertexArray.length,ne=this.expression.evaluate(new bn(0),d,{},P,[],O);this.paintVertexArray.resize(o),this._setPaintValue(H,o,ne)}updatePaintArray(o,d,b,P){const O=this.expression.evaluate({zoom:0},b,P);this._setPaintValue(o,d,O)}_setPaintValue(o,d,b){if(this.type==="color"){const P=Kx(b);for(let O=o;O<d;O++)this.paintVertexArray.emplace(O,P[0],P[1])}else{for(let P=o;P<d;P++)this.paintVertexArray.emplace(P,b);this.maxValue=Math.max(this.maxValue,Math.abs(b))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class sl{constructor(o,d,b,P,O,H){this.expression=o,this.uniformNames=d.map(ne=>`u_${ne}_t`),this.type=b,this.useIntegerZoom=P,this.zoom=O,this.maxValue=0,this.paintVertexAttributes=d.map(ne=>({name:`a_${ne}`,type:"Float32",components:b==="color"?4:2,offset:0})),this.paintVertexArray=new H}populatePaintArray(o,d,b,P,O){const H=this.expression.evaluate(new bn(this.zoom),d,{},P,[],O),ne=this.expression.evaluate(new bn(this.zoom+1),d,{},P,[],O),ue=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(ue,o,H,ne)}updatePaintArray(o,d,b,P){const O=this.expression.evaluate({zoom:this.zoom},b,P),H=this.expression.evaluate({zoom:this.zoom+1},b,P);this._setPaintValue(o,d,O,H)}_setPaintValue(o,d,b,P){if(this.type==="color"){const O=Kx(b),H=Kx(P);for(let ne=o;ne<d;ne++)this.paintVertexArray.emplace(ne,O[0],O[1],H[0],H[1])}else{for(let O=o;O<d;O++)this.paintVertexArray.emplace(O,b,P);this.maxValue=Math.max(this.maxValue,Math.abs(b),Math.abs(P))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,d){const b=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,P=g(this.expression.interpolationFactor(b,this.zoom,this.zoom+1),0,1);o.set(P)}getBinding(o,d,b){return new Gh(o,d)}}class iu{constructor(o,d,b,P,O,H){this.expression=o,this.type=d,this.useIntegerZoom=b,this.zoom=P,this.layerId=H,this.zoomInPaintVertexArray=new O,this.zoomOutPaintVertexArray=new O}populatePaintArray(o,d,b){const P=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(P,o,d.patterns&&d.patterns[this.layerId],b)}updatePaintArray(o,d,b,P,O){this._setPaintValues(o,d,b.patterns&&b.patterns[this.layerId],O)}_setPaintValues(o,d,b,P){if(!P||!b)return;const{min:O,mid:H,max:ne}=b,ue=P[O],we=P[H],Oe=P[ne];if(ue&&we&&Oe)for(let Ue=o;Ue<d;Ue++)this.zoomInPaintVertexArray.emplace(Ue,we.tl[0],we.tl[1],we.br[0],we.br[1],ue.tl[0],ue.tl[1],ue.br[0],ue.br[1],we.pixelRatio,ue.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ue,we.tl[0],we.tl[1],we.br[0],we.br[1],Oe.tl[0],Oe.tl[1],Oe.br[0],Oe.br[1],we.pixelRatio,Oe.pixelRatio)}upload(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,Lr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,Lr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class PC{constructor(o,d,b){this.binders={},this._buffers=[];const P=[];for(const O in o.paint._values){if(!b(O))continue;const H=o.paint.get(O);if(!(H instanceof Bo&&Yc(H.property.specification)))continue;const ne=l5(O,o.type),ue=H.value,we=H.property.specification.type,Oe=H.property.useIntegerZoom,Ue=H.property.specification["property-type"],qe=Ue==="cross-faded"||Ue==="cross-faded-data-driven";if(ue.kind==="constant")this.binders[O]=qe?new qh(ue.value,ne):new jf(ue.value,ne,we),P.push(`/u_${O}`);else if(ue.kind==="source"||qe){const Ze=DC(O,we,"source");this.binders[O]=qe?new iu(ue,we,Oe,d,Ze,o.id):new gc(ue,ne,we,Ze),P.push(`/a_${O}`)}else{const Ze=DC(O,we,"composite");this.binders[O]=new sl(ue,ne,we,Oe,d,Ze),P.push(`/z_${O}`)}}this.cacheKey=P.sort().join("")}getMaxValue(o){const d=this.binders[o];return d instanceof gc||d instanceof sl?d.maxValue:0}populatePaintArrays(o,d,b,P,O){for(const H in this.binders){const ne=this.binders[H];(ne instanceof gc||ne instanceof sl||ne instanceof iu)&&ne.populatePaintArray(o,d,b,P,O)}}setConstantPatternPositions(o,d){for(const b in this.binders){const P=this.binders[b];P instanceof qh&&P.setConstantPatternPositions(o,d)}}updatePaintArrays(o,d,b,P,O){let H=!1;for(const ne in o){const ue=d.getPositions(ne);for(const we of ue){const Oe=b.feature(we.index);for(const Ue in this.binders){const qe=this.binders[Ue];if((qe instanceof gc||qe instanceof sl||qe instanceof iu)&&qe.expression.isStateDependent===!0){const Ze=P.paint.get(Ue);qe.expression=Ze.value,qe.updatePaintArray(we.start,we.end,Oe,o[ne],O),H=!0}}}}return H}defines(){const o=[];for(const d in this.binders){const b=this.binders[d];(b instanceof jf||b instanceof qh)&&o.push(...b.uniformNames.map(P=>`#define HAS_UNIFORM_${P}`))}return o}getBinderAttributes(){const o=[];for(const d in this.binders){const b=this.binders[d];if(b instanceof gc||b instanceof sl)for(let P=0;P<b.paintVertexAttributes.length;P++)o.push(b.paintVertexAttributes[P].name);else if(b instanceof iu)for(let P=0;P<Lr.members.length;P++)o.push(Lr.members[P].name)}return o}getBinderUniforms(){const o=[];for(const d in this.binders){const b=this.binders[d];if(b instanceof jf||b instanceof qh||b instanceof sl)for(const P of b.uniformNames)o.push(P)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o,d){const b=[];for(const P in this.binders){const O=this.binders[P];if(O instanceof jf||O instanceof qh||O instanceof sl){for(const H of O.uniformNames)if(d[H]){const ne=O.getBinding(o,d[H],H);b.push({name:H,property:P,binding:ne})}}}return b}setUniforms(o,d,b,P){for(const{name:O,property:H,binding:ne}of d)this.binders[H].setUniform(ne,P,b.get(H),O)}updatePaintBuffers(o){this._buffers=[];for(const d in this.binders){const b=this.binders[d];if(o&&b instanceof iu){const P=o.fromScale===2?b.zoomInPaintVertexBuffer:b.zoomOutPaintVertexBuffer;P&&this._buffers.push(P)}else(b instanceof gc||b instanceof sl)&&b.paintVertexBuffer&&this._buffers.push(b.paintVertexBuffer)}}upload(o){for(const d in this.binders){const b=this.binders[d];(b instanceof gc||b instanceof sl||b instanceof iu)&&b.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const d=this.binders[o];(d instanceof gc||d instanceof sl||d instanceof iu)&&d.destroy()}}}class xd{constructor(o,d,b=()=>!0){this.programConfigurations={};for(const P of o)this.programConfigurations[P.id]=new PC(P,d,b);this.needsUpload=!1,this._featureMap=new tu,this._bufferOffset=0}populatePaintArrays(o,d,b,P,O,H){for(const ne in this.programConfigurations)this.programConfigurations[ne].populatePaintArrays(o,d,P,O,H);d.id!==void 0&&this._featureMap.add(d.id,b,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,d,b,P){for(const O of b)this.needsUpload=this.programConfigurations[O.id].updatePaintArrays(o,this._featureMap,d,O,P)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}function l5(u,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${o}-`,"").replace(/-/g,"_")]}function DC(u,o,d){const b={color:{source:f,composite:st},number:{source:Je,composite:f}},P=function(O){return{"line-pattern":{source:Ar,composite:Ar},"fill-pattern":{source:Ar,composite:Ar},"fill-extrusion-pattern":{source:Ar,composite:Ar}}[O]}(u);return P&&P[d]||b[o][d]}hi("ConstantBinder",jf),hi("CrossFadedConstantBinder",qh),hi("SourceExpressionBinder",gc),hi("CrossFadedCompositeBinder",iu),hi("CompositeExpressionBinder",sl),hi("ProgramConfiguration",PC,{omit:["_buffers"]}),hi("ProgramConfigurationSet",xd);var ls=8192;const Qx=Math.pow(2,14)-1,RC=-Qx-1;function bd(u){const o=ls/u.extent,d=u.loadGeometry();for(let b=0;b<d.length;b++){const P=d[b];for(let O=0;O<P.length;O++){const H=P[O],ne=Math.round(H.x*o),ue=Math.round(H.y*o);H.x=g(ne,RC,Qx),H.y=g(ue,RC,Qx),(ne<H.x||ne>H.x+1||ue<H.y||ue>H.y+1)&&M("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function wd(u,o){return{type:u.type,id:u.id,properties:u.properties,geometry:o?bd(u):[]}}function My(u,o,d,b,P){u.emplaceBack(2*o+(b+1)/2,2*d+(P+1)/2)}class Jx{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(d=>d.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new Pi,this.indexArray=new Ds,this.segments=new Ir,this.programConfigurations=new xd(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(o,d,b){const P=this.layers[0],O=[];let H=null,ne=!1;P.type==="circle"&&(H=P.layout.get("circle-sort-key"),ne=!H.isConstant());for(const{feature:ue,id:we,index:Oe,sourceLayerIndex:Ue}of o){const qe=this.layers[0]._featureFilter.needGeometry,Ze=wd(ue,qe);if(!this.layers[0]._featureFilter.filter(new bn(this.zoom),Ze,b))continue;const Ke=ne?H.evaluate(Ze,{},b):void 0,ut={id:we,properties:ue.properties,type:ue.type,sourceLayerIndex:Ue,index:Oe,geometry:qe?Ze.geometry:bd(ue),patterns:{},sortKey:Ke};O.push(ut)}ne&&O.sort((ue,we)=>ue.sortKey-we.sortKey);for(const ue of O){const{geometry:we,index:Oe,sourceLayerIndex:Ue}=ue,qe=o[Oe].feature;this.addFeature(ue,we,Oe,b),d.featureIndex.insert(qe,we,Oe,Ue,this.index)}}update(o,d,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,$h),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,d,b,P){for(const O of d)for(const H of O){const ne=H.x,ue=H.y;if(ne<0||ne>=ls||ue<0||ue>=ls)continue;const we=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),Oe=we.vertexLength;My(this.layoutVertexArray,ne,ue,-1,-1),My(this.layoutVertexArray,ne,ue,1,-1),My(this.layoutVertexArray,ne,ue,1,1),My(this.layoutVertexArray,ne,ue,-1,1),this.indexArray.emplaceBack(Oe,Oe+1,Oe+2),this.indexArray.emplaceBack(Oe,Oe+3,Oe+2),we.vertexLength+=4,we.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,b,{},P)}}function LC(u,o){for(let d=0;d<u.length;d++)if(Wh(o,u[d]))return!0;for(let d=0;d<o.length;d++)if(Wh(u,o[d]))return!0;return!!eb(u,o)}function c5(u,o,d){return!!Wh(u,o)||!!tb(o,u,d)}function NC(u,o){if(u.length===1)return OC(o,u[0]);for(let d=0;d<o.length;d++){const b=o[d];for(let P=0;P<b.length;P++)if(Wh(u,b[P]))return!0}for(let d=0;d<u.length;d++)if(OC(o,u[d]))return!0;for(let d=0;d<o.length;d++)if(eb(u,o[d]))return!0;return!1}function u5(u,o,d){if(u.length>1){if(eb(u,o))return!0;for(let b=0;b<o.length;b++)if(tb(o[b],u,d))return!0}for(let b=0;b<u.length;b++)if(tb(u[b],o,d))return!0;return!1}function eb(u,o){if(u.length===0||o.length===0)return!1;for(let d=0;d<u.length-1;d++){const b=u[d],P=u[d+1];for(let O=0;O<o.length-1;O++)if(d5(b,P,o[O],o[O+1]))return!0}return!1}function d5(u,o,d,b){return S(u,d,b)!==S(o,d,b)&&S(u,o,d)!==S(u,o,b)}function tb(u,o,d){const b=d*d;if(o.length===1)return u.distSqr(o[0])<b;for(let P=1;P<o.length;P++)if(zC(u,o[P-1],o[P])<b)return!0;return!1}function zC(u,o,d){const b=o.distSqr(d);if(b===0)return u.distSqr(o);const P=((u.x-o.x)*(d.x-o.x)+(u.y-o.y)*(d.y-o.y))/b;return u.distSqr(P<0?o:P>1?d:d.sub(o)._mult(P)._add(o))}function OC(u,o){let d,b,P,O=!1;for(let H=0;H<u.length;H++){d=u[H];for(let ne=0,ue=d.length-1;ne<d.length;ue=ne++)b=d[ne],P=d[ue],b.y>o.y!=P.y>o.y&&o.x<(P.x-b.x)*(o.y-b.y)/(P.y-b.y)+b.x&&(O=!O)}return O}function Wh(u,o){let d=!1;for(let b=0,P=u.length-1;b<u.length;P=b++){const O=u[b],H=u[P];O.y>o.y!=H.y>o.y&&o.x<(H.x-O.x)*(o.y-O.y)/(H.y-O.y)+O.x&&(d=!d)}return d}function h5(u,o,d){const b=d[0],P=d[2];if(u.x<b.x&&o.x<b.x||u.x>P.x&&o.x>P.x||u.y<b.y&&o.y<b.y||u.y>P.y&&o.y>P.y)return!1;const O=S(u,o,d[0]);return O!==S(u,o,d[1])||O!==S(u,o,d[2])||O!==S(u,o,d[3])}function Ff(u,o,d){const b=o.paint.get(u).value;return b.kind==="constant"?b.value:d.programConfigurations.get(o.id).getMaxValue(u)}function Ay(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function Iy(u,o,d,b,P){if(!o[0]&&!o[1])return u;const O=G.convert(o)._mult(P);d==="viewport"&&O._rotate(-b);const H=[];for(let ne=0;ne<u.length;ne++)H.push(u[ne].sub(O));return H}hi("CircleBucket",Jx,{omit:["layers"]});const p5=new os({"circle-sort-key":new Li(je.layout_circle["circle-sort-key"])});var f5={paint:new os({"circle-radius":new Li(je.paint_circle["circle-radius"]),"circle-color":new Li(je.paint_circle["circle-color"]),"circle-blur":new Li(je.paint_circle["circle-blur"]),"circle-opacity":new Li(je.paint_circle["circle-opacity"]),"circle-translate":new Si(je.paint_circle["circle-translate"]),"circle-translate-anchor":new Si(je.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Si(je.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Si(je.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Li(je.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Li(je.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Li(je.paint_circle["circle-stroke-opacity"])}),layout:p5},Ta=1e-6,Sa=typeof Float32Array<"u"?Float32Array:Array;function jC(){var u=new Sa(9);return Sa!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u}function ib(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function FC(u,o,d){var b=o[0],P=o[1],O=o[2],H=o[3],ne=o[4],ue=o[5],we=o[6],Oe=o[7],Ue=o[8],qe=o[9],Ze=o[10],Ke=o[11],ut=o[12],lt=o[13],_t=o[14],Dt=o[15],xt=d[0],Pt=d[1],Ut=d[2],Ft=d[3];return u[0]=xt*b+Pt*ne+Ut*Ue+Ft*ut,u[1]=xt*P+Pt*ue+Ut*qe+Ft*lt,u[2]=xt*O+Pt*we+Ut*Ze+Ft*_t,u[3]=xt*H+Pt*Oe+Ut*Ke+Ft*Dt,u[4]=(xt=d[4])*b+(Pt=d[5])*ne+(Ut=d[6])*Ue+(Ft=d[7])*ut,u[5]=xt*P+Pt*ue+Ut*qe+Ft*lt,u[6]=xt*O+Pt*we+Ut*Ze+Ft*_t,u[7]=xt*H+Pt*Oe+Ut*Ke+Ft*Dt,u[8]=(xt=d[8])*b+(Pt=d[9])*ne+(Ut=d[10])*Ue+(Ft=d[11])*ut,u[9]=xt*P+Pt*ue+Ut*qe+Ft*lt,u[10]=xt*O+Pt*we+Ut*Ze+Ft*_t,u[11]=xt*H+Pt*Oe+Ut*Ke+Ft*Dt,u[12]=(xt=d[12])*b+(Pt=d[13])*ne+(Ut=d[14])*Ue+(Ft=d[15])*ut,u[13]=xt*P+Pt*ue+Ut*qe+Ft*lt,u[14]=xt*O+Pt*we+Ut*Ze+Ft*_t,u[15]=xt*H+Pt*Oe+Ut*Ke+Ft*Dt,u}Math.hypot||(Math.hypot=function(){for(var u=0,o=arguments.length;o--;)u+=arguments[o]*arguments[o];return Math.sqrt(u)});var Bf,m5=FC;function BC(){var u=new Sa(3);return Sa!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u}function $C(u,o,d){var b=new Sa(3);return b[0]=u,b[1]=o,b[2]=d,b}function Py(u,o,d){var b=o[0],P=o[1],O=o[2],H=o[3];return u[0]=d[0]*b+d[4]*P+d[8]*O+d[12]*H,u[1]=d[1]*b+d[5]*P+d[9]*O+d[13]*H,u[2]=d[2]*b+d[6]*P+d[10]*O+d[14]*H,u[3]=d[3]*b+d[7]*P+d[11]*O+d[15]*H,u}function UC(){var u=new Sa(4);return Sa!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u[3]=1,u}function VC(u,o){const d=Py([],[u.x,u.y,0,1],o);return new G(d[0]/d[3],d[1]/d[3])}BC(),Bf=new Sa(4),Sa!=Float32Array&&(Bf[0]=0,Bf[1]=0,Bf[2]=0,Bf[3]=0),BC(),$C(1,0,0),$C(0,1,0),UC(),UC(),jC(),function(){var u;u=new Sa(2),Sa!=Float32Array&&(u[0]=0,u[1]=0)}();class GC extends Jx{}hi("HeatmapBucket",GC,{omit:["layers"]});var g5={paint:new os({"heatmap-radius":new Li(je.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Li(je.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Si(je.paint_heatmap["heatmap-intensity"]),"heatmap-color":new zf(je.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Si(je.paint_heatmap["heatmap-opacity"])})};function rb(u,{width:o,height:d},b,P){if(P){if(P instanceof Uint8ClampedArray)P=new Uint8Array(P.buffer);else if(P.length!==o*d*b)throw new RangeError(`mismatched image size. expected: ${P.length} but got: ${o*d*b}`)}else P=new Uint8Array(o*d*b);return u.width=o,u.height=d,u.data=P,u}function HC(u,{width:o,height:d},b){if(o===u.width&&d===u.height)return;const P=rb({},{width:o,height:d},b);nb(u,P,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,o),height:Math.min(u.height,d)},b),u.width=o,u.height=d,u.data=P.data}function nb(u,o,d,b,P,O){if(P.width===0||P.height===0)return o;if(P.width>u.width||P.height>u.height||d.x>u.width-P.width||d.y>u.height-P.height)throw new RangeError("out of range source coordinates for image copy");if(P.width>o.width||P.height>o.height||b.x>o.width-P.width||b.y>o.height-P.height)throw new RangeError("out of range destination coordinates for image copy");const H=u.data,ne=o.data;if(H===ne)throw new Error("srcData equals dstData, so image is already copied");for(let ue=0;ue<P.height;ue++){const we=((d.y+ue)*u.width+d.x)*O,Oe=((b.y+ue)*o.width+b.x)*O;for(let Ue=0;Ue<P.width*O;Ue++)ne[Oe+Ue]=H[we+Ue]}return o}class $f{constructor(o,d){rb(this,o,1,d)}resize(o){HC(this,o,1)}clone(){return new $f({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,d,b,P,O){nb(o,d,b,P,O,1)}}class So{constructor(o,d){rb(this,o,4,d)}resize(o){HC(this,o,4)}replace(o,d){d?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new So({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,d,b,P,O){nb(o,d,b,P,O,4)}}function qC(u){const o={},d=u.resolution||256,b=u.clips?u.clips.length:1,P=u.image||new So({width:d,height:b});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const O=(H,ne,ue)=>{o[u.evaluationKey]=ue;const we=u.expression.evaluate(o);P.data[H+ne+0]=Math.floor(255*we.r/we.a),P.data[H+ne+1]=Math.floor(255*we.g/we.a),P.data[H+ne+2]=Math.floor(255*we.b/we.a),P.data[H+ne+3]=Math.floor(255*we.a)};if(u.clips)for(let H=0,ne=0;H<b;++H,ne+=4*d)for(let ue=0,we=0;ue<d;ue++,we+=4){const Oe=ue/(d-1),{start:Ue,end:qe}=u.clips[H];O(ne,we,Ue*(1-Oe)+qe*Oe)}else for(let H=0,ne=0;H<d;H++,ne+=4)O(0,ne,H/(d-1));return P}hi("AlphaImage",$f),hi("RGBAImage",So);var y5={paint:new os({"hillshade-illumination-direction":new Si(je.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Si(je.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Si(je.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Si(je.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Si(je.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Si(je.paint_hillshade["hillshade-accent-color"])})};const v5=Jn([{name:"a_pos",components:2,type:"Int16"}],4),{members:x5}=v5;var Dy={exports:{}};function Ry(u,o,d){d=d||2;var b,P,O,H,ne,ue,we,Oe=o&&o.length,Ue=Oe?o[0]*d:u.length,qe=WC(u,0,Ue,d,!0),Ze=[];if(!qe||qe.next===qe.prev)return Ze;if(Oe&&(qe=function(ut,lt,_t,Dt){var xt,Pt,Ut,Ft=[];for(xt=0,Pt=lt.length;xt<Pt;xt++)(Ut=WC(ut,lt[xt]*Dt,xt<Pt-1?lt[xt+1]*Dt:ut.length,Dt,!1))===Ut.next&&(Ut.steiner=!0),Ft.push(k5(Ut));for(Ft.sort(T5),xt=0;xt<Ft.length;xt++)_t=S5(Ft[xt],_t);return _t}(u,o,qe,d)),u.length>80*d){b=O=u[0],P=H=u[1];for(var Ke=d;Ke<Ue;Ke+=d)(ne=u[Ke])<b&&(b=ne),(ue=u[Ke+1])<P&&(P=ue),ne>O&&(O=ne),ue>H&&(H=ue);we=(we=Math.max(O-b,H-P))!==0?32767/we:0}return Uf(qe,Ze,d,b,P,we,0),Ze}function WC(u,o,d,b,P){var O,H;if(P===ob(u,o,d,b)>0)for(O=o;O<d;O+=b)H=XC(O,u[O],u[O+1],H);else for(O=d-b;O>=o;O-=b)H=XC(O,u[O],u[O+1],H);return H&&Ly(H,H.next)&&(Gf(H),H=H.next),H}function _d(u,o){if(!u)return u;o||(o=u);var d,b=u;do if(d=!1,b.steiner||!Ly(b,b.next)&&Hn(b.prev,b,b.next)!==0)b=b.next;else{if(Gf(b),(b=o=b.prev)===b.next)break;d=!0}while(d||b!==o);return o}function Uf(u,o,d,b,P,O,H){if(u){!H&&O&&function(Oe,Ue,qe,Ze){var Ke=Oe;do Ke.z===0&&(Ke.z=sb(Ke.x,Ke.y,Ue,qe,Ze)),Ke.prevZ=Ke.prev,Ke.nextZ=Ke.next,Ke=Ke.next;while(Ke!==Oe);Ke.prevZ.nextZ=null,Ke.prevZ=null,function(ut){var lt,_t,Dt,xt,Pt,Ut,Ft,yi,_i=1;do{for(_t=ut,ut=null,Pt=null,Ut=0;_t;){for(Ut++,Dt=_t,Ft=0,lt=0;lt<_i&&(Ft++,Dt=Dt.nextZ);lt++);for(yi=_i;Ft>0||yi>0&&Dt;)Ft!==0&&(yi===0||!Dt||_t.z<=Dt.z)?(xt=_t,_t=_t.nextZ,Ft--):(xt=Dt,Dt=Dt.nextZ,yi--),Pt?Pt.nextZ=xt:ut=xt,xt.prevZ=Pt,Pt=xt;_t=Dt}Pt.nextZ=null,_i*=2}while(Ut>1)}(Ke)}(u,b,P,O);for(var ne,ue,we=u;u.prev!==u.next;)if(ne=u.prev,ue=u.next,O?w5(u,b,P,O):b5(u))o.push(ne.i/d|0),o.push(u.i/d|0),o.push(ue.i/d|0),Gf(u),u=ue.next,we=ue.next;else if((u=ue)===we){H?H===1?Uf(u=_5(_d(u),o,d),o,d,b,P,O,2):H===2&&C5(u,o,d,b,P,O):Uf(_d(u),o,d,b,P,O,1);break}}}function b5(u){var o=u.prev,d=u,b=u.next;if(Hn(o,d,b)>=0)return!1;for(var P=o.x,O=d.x,H=b.x,ne=o.y,ue=d.y,we=b.y,Oe=P<O?P<H?P:H:O<H?O:H,Ue=ne<ue?ne<we?ne:we:ue<we?ue:we,qe=P>O?P>H?P:H:O>H?O:H,Ze=ne>ue?ne>we?ne:we:ue>we?ue:we,Ke=b.next;Ke!==o;){if(Ke.x>=Oe&&Ke.x<=qe&&Ke.y>=Ue&&Ke.y<=Ze&&Yh(P,ne,O,ue,H,we,Ke.x,Ke.y)&&Hn(Ke.prev,Ke,Ke.next)>=0)return!1;Ke=Ke.next}return!0}function w5(u,o,d,b){var P=u.prev,O=u,H=u.next;if(Hn(P,O,H)>=0)return!1;for(var ne=P.x,ue=O.x,we=H.x,Oe=P.y,Ue=O.y,qe=H.y,Ze=ne<ue?ne<we?ne:we:ue<we?ue:we,Ke=Oe<Ue?Oe<qe?Oe:qe:Ue<qe?Ue:qe,ut=ne>ue?ne>we?ne:we:ue>we?ue:we,lt=Oe>Ue?Oe>qe?Oe:qe:Ue>qe?Ue:qe,_t=sb(Ze,Ke,o,d,b),Dt=sb(ut,lt,o,d,b),xt=u.prevZ,Pt=u.nextZ;xt&&xt.z>=_t&&Pt&&Pt.z<=Dt;){if(xt.x>=Ze&&xt.x<=ut&&xt.y>=Ke&&xt.y<=lt&&xt!==P&&xt!==H&&Yh(ne,Oe,ue,Ue,we,qe,xt.x,xt.y)&&Hn(xt.prev,xt,xt.next)>=0||(xt=xt.prevZ,Pt.x>=Ze&&Pt.x<=ut&&Pt.y>=Ke&&Pt.y<=lt&&Pt!==P&&Pt!==H&&Yh(ne,Oe,ue,Ue,we,qe,Pt.x,Pt.y)&&Hn(Pt.prev,Pt,Pt.next)>=0))return!1;Pt=Pt.nextZ}for(;xt&&xt.z>=_t;){if(xt.x>=Ze&&xt.x<=ut&&xt.y>=Ke&&xt.y<=lt&&xt!==P&&xt!==H&&Yh(ne,Oe,ue,Ue,we,qe,xt.x,xt.y)&&Hn(xt.prev,xt,xt.next)>=0)return!1;xt=xt.prevZ}for(;Pt&&Pt.z<=Dt;){if(Pt.x>=Ze&&Pt.x<=ut&&Pt.y>=Ke&&Pt.y<=lt&&Pt!==P&&Pt!==H&&Yh(ne,Oe,ue,Ue,we,qe,Pt.x,Pt.y)&&Hn(Pt.prev,Pt,Pt.next)>=0)return!1;Pt=Pt.nextZ}return!0}function _5(u,o,d){var b=u;do{var P=b.prev,O=b.next.next;!Ly(P,O)&&YC(P,b,b.next,O)&&Vf(P,O)&&Vf(O,P)&&(o.push(P.i/d|0),o.push(b.i/d|0),o.push(O.i/d|0),Gf(b),Gf(b.next),b=u=O),b=b.next}while(b!==u);return _d(b)}function C5(u,o,d,b,P,O){var H=u;do{for(var ne=H.next.next;ne!==H.prev;){if(H.i!==ne.i&&M5(H,ne)){var ue=ZC(H,ne);return H=_d(H,H.next),ue=_d(ue,ue.next),Uf(H,o,d,b,P,O,0),void Uf(ue,o,d,b,P,O,0)}ne=ne.next}H=H.next}while(H!==u)}function T5(u,o){return u.x-o.x}function S5(u,o){var d=function(P,O){var H,ne=O,ue=P.x,we=P.y,Oe=-1/0;do{if(we<=ne.y&&we>=ne.next.y&&ne.next.y!==ne.y){var Ue=ne.x+(we-ne.y)*(ne.next.x-ne.x)/(ne.next.y-ne.y);if(Ue<=ue&&Ue>Oe&&(Oe=Ue,H=ne.x<ne.next.x?ne:ne.next,Ue===ue))return H}ne=ne.next}while(ne!==O);if(!H)return null;var qe,Ze=H,Ke=H.x,ut=H.y,lt=1/0;ne=H;do ue>=ne.x&&ne.x>=Ke&&ue!==ne.x&&Yh(we<ut?ue:Oe,we,Ke,ut,we<ut?Oe:ue,we,ne.x,ne.y)&&(qe=Math.abs(we-ne.y)/(ue-ne.x),Vf(ne,P)&&(qe<lt||qe===lt&&(ne.x>H.x||ne.x===H.x&&E5(H,ne)))&&(H=ne,lt=qe)),ne=ne.next;while(ne!==Ze);return H}(u,o);if(!d)return o;var b=ZC(d,u);return _d(b,b.next),_d(d,d.next)}function E5(u,o){return Hn(u.prev,u,o.prev)<0&&Hn(o.next,u,u.next)<0}function sb(u,o,d,b,P){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-d)*P|0)|u<<8))|u<<4))|u<<2))|u<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-b)*P|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function k5(u){var o=u,d=u;do(o.x<d.x||o.x===d.x&&o.y<d.y)&&(d=o),o=o.next;while(o!==u);return d}function Yh(u,o,d,b,P,O,H,ne){return(P-H)*(o-ne)>=(u-H)*(O-ne)&&(u-H)*(b-ne)>=(d-H)*(o-ne)&&(d-H)*(O-ne)>=(P-H)*(b-ne)}function M5(u,o){return u.next.i!==o.i&&u.prev.i!==o.i&&!function(d,b){var P=d;do{if(P.i!==d.i&&P.next.i!==d.i&&P.i!==b.i&&P.next.i!==b.i&&YC(P,P.next,d,b))return!0;P=P.next}while(P!==d);return!1}(u,o)&&(Vf(u,o)&&Vf(o,u)&&function(d,b){var P=d,O=!1,H=(d.x+b.x)/2,ne=(d.y+b.y)/2;do P.y>ne!=P.next.y>ne&&P.next.y!==P.y&&H<(P.next.x-P.x)*(ne-P.y)/(P.next.y-P.y)+P.x&&(O=!O),P=P.next;while(P!==d);return O}(u,o)&&(Hn(u.prev,u,o.prev)||Hn(u,o.prev,o))||Ly(u,o)&&Hn(u.prev,u,u.next)>0&&Hn(o.prev,o,o.next)>0)}function Hn(u,o,d){return(o.y-u.y)*(d.x-o.x)-(o.x-u.x)*(d.y-o.y)}function Ly(u,o){return u.x===o.x&&u.y===o.y}function YC(u,o,d,b){var P=zy(Hn(u,o,d)),O=zy(Hn(u,o,b)),H=zy(Hn(d,b,u)),ne=zy(Hn(d,b,o));return P!==O&&H!==ne||!(P!==0||!Ny(u,d,o))||!(O!==0||!Ny(u,b,o))||!(H!==0||!Ny(d,u,b))||!(ne!==0||!Ny(d,o,b))}function Ny(u,o,d){return o.x<=Math.max(u.x,d.x)&&o.x>=Math.min(u.x,d.x)&&o.y<=Math.max(u.y,d.y)&&o.y>=Math.min(u.y,d.y)}function zy(u){return u>0?1:u<0?-1:0}function Vf(u,o){return Hn(u.prev,u,u.next)<0?Hn(u,o,u.next)>=0&&Hn(u,u.prev,o)>=0:Hn(u,o,u.prev)<0||Hn(u,u.next,o)<0}function ZC(u,o){var d=new ab(u.i,u.x,u.y),b=new ab(o.i,o.x,o.y),P=u.next,O=o.prev;return u.next=o,o.prev=u,d.next=P,P.prev=d,b.next=d,d.prev=b,O.next=b,b.prev=O,b}function XC(u,o,d,b){var P=new ab(u,o,d);return b?(P.next=b.next,P.prev=b,b.next.prev=P,b.next=P):(P.prev=P,P.next=P),P}function Gf(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function ab(u,o,d){this.i=u,this.x=o,this.y=d,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ob(u,o,d,b){for(var P=0,O=o,H=d-b;O<d;O+=b)P+=(u[H]-u[O])*(u[O+1]+u[H+1]),H=O;return P}function A5(u,o,d,b,P){KC(u,o,d,b||u.length-1,P||I5)}function KC(u,o,d,b,P){for(;b>d;){if(b-d>600){var O=b-d+1,H=o-d+1,ne=Math.log(O),ue=.5*Math.exp(2*ne/3),we=.5*Math.sqrt(ne*ue*(O-ue)/O)*(H-O/2<0?-1:1);KC(u,o,Math.max(d,Math.floor(o-H*ue/O+we)),Math.min(b,Math.floor(o+(O-H)*ue/O+we)),P)}var Oe=u[o],Ue=d,qe=b;for(Hf(u,d,o),P(u[b],Oe)>0&&Hf(u,d,b);Ue<qe;){for(Hf(u,Ue,qe),Ue++,qe--;P(u[Ue],Oe)<0;)Ue++;for(;P(u[qe],Oe)>0;)qe--}P(u[d],Oe)===0?Hf(u,d,qe):Hf(u,++qe,b),qe<=o&&(d=qe+1),o<=qe&&(b=qe-1)}}function Hf(u,o,d){var b=u[o];u[o]=u[d],u[d]=b}function I5(u,o){return u<o?-1:u>o?1:0}function lb(u,o){const d=u.length;if(d<=1)return[u];const b=[];let P,O;for(let H=0;H<d;H++){const ne=N(u[H]);ne!==0&&(u[H].area=Math.abs(ne),O===void 0&&(O=ne<0),O===ne<0?(P&&b.push(P),P=[u[H]]):P.push(u[H]))}if(P&&b.push(P),o>1)for(let H=0;H<b.length;H++)b[H].length<=o||(A5(b[H],o,1,b[H].length-1,P5),b[H]=b[H].slice(0,o));return b}function P5(u,o){return o.area-u.area}function cb(u,o,d){const b=d.patternDependencies;let P=!1;for(const O of o){const H=O.paint.get(`${u}-pattern`);H.isConstant()||(P=!0);const ne=H.constantOr(null);ne&&(P=!0,b[ne.to]=!0,b[ne.from]=!0)}return P}function ub(u,o,d,b,P){const O=P.patternDependencies;for(const H of o){const ne=H.paint.get(`${u}-pattern`).value;if(ne.kind!=="constant"){let ue=ne.evaluate({zoom:b-1},d,{},P.availableImages),we=ne.evaluate({zoom:b},d,{},P.availableImages),Oe=ne.evaluate({zoom:b+1},d,{},P.availableImages);ue=ue&&ue.name?ue.name:ue,we=we&&we.name?we.name:we,Oe=Oe&&Oe.name?Oe.name:Oe,O[ue]=!0,O[we]=!0,O[Oe]=!0,d.patterns[H.id]={min:ue,mid:we,max:Oe}}}return d}Dy.exports=Ry,Dy.exports.default=Ry,Ry.deviation=function(u,o,d,b){var P=o&&o.length,O=Math.abs(ob(u,0,P?o[0]*d:u.length,d));if(P)for(var H=0,ne=o.length;H<ne;H++)O-=Math.abs(ob(u,o[H]*d,H<ne-1?o[H+1]*d:u.length,d));var ue=0;for(H=0;H<b.length;H+=3){var we=b[H]*d,Oe=b[H+1]*d,Ue=b[H+2]*d;ue+=Math.abs((u[we]-u[Ue])*(u[Oe+1]-u[we+1])-(u[we]-u[Oe])*(u[Ue+1]-u[we+1]))}return O===0&&ue===0?0:Math.abs((ue-O)/O)},Ry.flatten=function(u){for(var o=u[0][0].length,d={vertices:[],holes:[],dimensions:o},b=0,P=0;P<u.length;P++){for(var O=0;O<u[P].length;O++)for(var H=0;H<o;H++)d.vertices.push(u[P][O][H]);P>0&&d.holes.push(b+=u[P-1].length)}return d};class db{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(d=>d.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new qr,this.indexArray=new Ds,this.indexArray2=new Co,this.programConfigurations=new xd(o.layers,o.zoom),this.segments=new Ir,this.segments2=new Ir,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(o,d,b){this.hasPattern=cb("fill",this.layers,d);const P=this.layers[0].layout.get("fill-sort-key"),O=!P.isConstant(),H=[];for(const{feature:ne,id:ue,index:we,sourceLayerIndex:Oe}of o){const Ue=this.layers[0]._featureFilter.needGeometry,qe=wd(ne,Ue);if(!this.layers[0]._featureFilter.filter(new bn(this.zoom),qe,b))continue;const Ze=O?P.evaluate(qe,{},b,d.availableImages):void 0,Ke={id:ue,properties:ne.properties,type:ne.type,sourceLayerIndex:Oe,index:we,geometry:Ue?qe.geometry:bd(ne),patterns:{},sortKey:Ze};H.push(Ke)}O&&H.sort((ne,ue)=>ne.sortKey-ue.sortKey);for(const ne of H){const{geometry:ue,index:we,sourceLayerIndex:Oe}=ne;if(this.hasPattern){const Ue=ub("fill",this.layers,ne,this.zoom,d);this.patternFeatures.push(Ue)}else this.addFeature(ne,ue,we,b,{});d.featureIndex.insert(o[we].feature,ue,we,Oe,this.index)}}update(o,d,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,b)}addFeatures(o,d,b){for(const P of this.patternFeatures)this.addFeature(P,P.geometry,P.index,d,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,x5),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,d,b,P,O){for(const H of lb(d,500)){let ne=0;for(const Ze of H)ne+=Ze.length;const ue=this.segments.prepareSegment(ne,this.layoutVertexArray,this.indexArray),we=ue.vertexLength,Oe=[],Ue=[];for(const Ze of H){if(Ze.length===0)continue;Ze!==H[0]&&Ue.push(Oe.length/2);const Ke=this.segments2.prepareSegment(Ze.length,this.layoutVertexArray,this.indexArray2),ut=Ke.vertexLength;this.layoutVertexArray.emplaceBack(Ze[0].x,Ze[0].y),this.indexArray2.emplaceBack(ut+Ze.length-1,ut),Oe.push(Ze[0].x),Oe.push(Ze[0].y);for(let lt=1;lt<Ze.length;lt++)this.layoutVertexArray.emplaceBack(Ze[lt].x,Ze[lt].y),this.indexArray2.emplaceBack(ut+lt-1,ut+lt),Oe.push(Ze[lt].x),Oe.push(Ze[lt].y);Ke.vertexLength+=Ze.length,Ke.primitiveLength+=Ze.length}const qe=Dy.exports(Oe,Ue);for(let Ze=0;Ze<qe.length;Ze+=3)this.indexArray.emplaceBack(we+qe[Ze],we+qe[Ze+1],we+qe[Ze+2]);ue.vertexLength+=ne,ue.primitiveLength+=qe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,b,O,P)}}hi("FillBucket",db,{omit:["layers","patternFeatures"]});const D5=new os({"fill-sort-key":new Li(je.layout_fill["fill-sort-key"])});var R5={paint:new os({"fill-antialias":new Si(je.paint_fill["fill-antialias"]),"fill-opacity":new Li(je.paint_fill["fill-opacity"]),"fill-color":new Li(je.paint_fill["fill-color"]),"fill-outline-color":new Li(je.paint_fill["fill-outline-color"]),"fill-translate":new Si(je.paint_fill["fill-translate"]),"fill-translate-anchor":new Si(je.paint_fill["fill-translate-anchor"]),"fill-pattern":new fd(je.paint_fill["fill-pattern"])}),layout:D5};const L5=Jn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),N5=Jn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:z5}=L5;var ru={},O5=G,QC=Zh;function Zh(u,o,d,b,P){this.properties={},this.extent=d,this.type=0,this._pbf=u,this._geometry=-1,this._keys=b,this._values=P,u.readFields(j5,this,o)}function j5(u,o,d){u==1?o.id=d.readVarint():u==2?function(b,P){for(var O=b.readVarint()+b.pos;b.pos<O;){var H=P._keys[b.readVarint()],ne=P._values[b.readVarint()];P.properties[H]=ne}}(d,o):u==3?o.type=d.readVarint():u==4&&(o._geometry=d.pos)}function F5(u){for(var o,d,b=0,P=0,O=u.length,H=O-1;P<O;H=P++)b+=((d=u[H]).x-(o=u[P]).x)*(o.y+d.y);return b}Zh.types=["Unknown","Point","LineString","Polygon"],Zh.prototype.loadGeometry=function(){var u=this._pbf;u.pos=this._geometry;for(var o,d=u.readVarint()+u.pos,b=1,P=0,O=0,H=0,ne=[];u.pos<d;){if(P<=0){var ue=u.readVarint();b=7&ue,P=ue>>3}if(P--,b===1||b===2)O+=u.readSVarint(),H+=u.readSVarint(),b===1&&(o&&ne.push(o),o=[]),o.push(new O5(O,H));else{if(b!==7)throw new Error("unknown command "+b);o&&o.push(o[0].clone())}}return o&&ne.push(o),ne},Zh.prototype.bbox=function(){var u=this._pbf;u.pos=this._geometry;for(var o=u.readVarint()+u.pos,d=1,b=0,P=0,O=0,H=1/0,ne=-1/0,ue=1/0,we=-1/0;u.pos<o;){if(b<=0){var Oe=u.readVarint();d=7&Oe,b=Oe>>3}if(b--,d===1||d===2)(P+=u.readSVarint())<H&&(H=P),P>ne&&(ne=P),(O+=u.readSVarint())<ue&&(ue=O),O>we&&(we=O);else if(d!==7)throw new Error("unknown command "+d)}return[H,ue,ne,we]},Zh.prototype.toGeoJSON=function(u,o,d){var b,P,O=this.extent*Math.pow(2,d),H=this.extent*u,ne=this.extent*o,ue=this.loadGeometry(),we=Zh.types[this.type];function Oe(Ze){for(var Ke=0;Ke<Ze.length;Ke++){var ut=Ze[Ke];Ze[Ke]=[360*(ut.x+H)/O-180,360/Math.PI*Math.atan(Math.exp((180-360*(ut.y+ne)/O)*Math.PI/180))-90]}}switch(this.type){case 1:var Ue=[];for(b=0;b<ue.length;b++)Ue[b]=ue[b][0];Oe(ue=Ue);break;case 2:for(b=0;b<ue.length;b++)Oe(ue[b]);break;case 3:for(ue=function(Ze){var Ke=Ze.length;if(Ke<=1)return[Ze];for(var ut,lt,_t=[],Dt=0;Dt<Ke;Dt++){var xt=F5(Ze[Dt]);xt!==0&&(lt===void 0&&(lt=xt<0),lt===xt<0?(ut&&_t.push(ut),ut=[Ze[Dt]]):ut.push(Ze[Dt]))}return ut&&_t.push(ut),_t}(ue),b=0;b<ue.length;b++)for(P=0;P<ue[b].length;P++)Oe(ue[b][P])}ue.length===1?ue=ue[0]:we="Multi"+we;var qe={type:"Feature",geometry:{type:we,coordinates:ue},properties:this.properties};return"id"in this&&(qe.id=this.id),qe};var B5=QC,JC=eT;function eT(u,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields($5,this,o),this.length=this._features.length}function $5(u,o,d){u===15?o.version=d.readVarint():u===1?o.name=d.readString():u===5?o.extent=d.readVarint():u===2?o._features.push(d.pos):u===3?o._keys.push(d.readString()):u===4&&o._values.push(function(b){for(var P=null,O=b.readVarint()+b.pos;b.pos<O;){var H=b.readVarint()>>3;P=H===1?b.readString():H===2?b.readFloat():H===3?b.readDouble():H===4?b.readVarint64():H===5?b.readVarint():H===6?b.readSVarint():H===7?b.readBoolean():null}return P}(d))}eT.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var o=this._pbf.readVarint()+this._pbf.pos;return new B5(this._pbf,o,this.extent,this._keys,this._values)};var U5=JC;function V5(u,o,d){if(u===3){var b=new U5(d,d.readVarint()+d.pos);b.length&&(o[b.name]=b)}}ru.VectorTile=function(u,o){this.layers=u.readFields(V5,{},o)},ru.VectorTileFeature=QC,ru.VectorTileLayer=JC;const G5=ru.VectorTileFeature.types,hb=Math.pow(2,13);function qf(u,o,d,b,P,O,H,ne){u.emplaceBack(o,d,2*Math.floor(b*hb)+H,P*hb*2,O*hb*2,Math.round(ne))}class pb{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(d=>d.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new Wr,this.centroidVertexArray=new ur,this.indexArray=new Ds,this.programConfigurations=new xd(o.layers,o.zoom),this.segments=new Ir,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(o,d,b){this.features=[],this.hasPattern=cb("fill-extrusion",this.layers,d);for(const{feature:P,id:O,index:H,sourceLayerIndex:ne}of o){const ue=this.layers[0]._featureFilter.needGeometry,we=wd(P,ue);if(!this.layers[0]._featureFilter.filter(new bn(this.zoom),we,b))continue;const Oe={id:O,sourceLayerIndex:ne,index:H,geometry:ue?we.geometry:bd(P),properties:P.properties,type:P.type,patterns:{}};this.hasPattern?this.features.push(ub("fill-extrusion",this.layers,Oe,this.zoom,d)):this.addFeature(Oe,Oe.geometry,H,b,{}),d.featureIndex.insert(P,Oe.geometry,H,ne,this.index,!0)}}addFeatures(o,d,b){for(const P of this.features){const{geometry:O}=P;this.addFeature(P,O,P.index,d,b)}}update(o,d,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,b)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,z5),this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,N5.members,!0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(o,d,b,P,O){const H={x:0,y:0,vertexCount:0};for(const ne of lb(d,500)){let ue=0;for(const Ke of ne)ue+=Ke.length;let we=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ke of ne){if(Ke.length===0||q5(Ke))continue;let ut=0;for(let lt=0;lt<Ke.length;lt++){const _t=Ke[lt];if(lt>=1){const Dt=Ke[lt-1];if(!H5(_t,Dt)){we.vertexLength+4>Ir.MAX_VERTEX_ARRAY_LENGTH&&(we=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const xt=_t.sub(Dt)._perp()._unit(),Pt=Dt.dist(_t);ut+Pt>32768&&(ut=0),qf(this.layoutVertexArray,_t.x,_t.y,xt.x,xt.y,0,0,ut),qf(this.layoutVertexArray,_t.x,_t.y,xt.x,xt.y,0,1,ut),H.x+=2*_t.x,H.y+=2*_t.y,H.vertexCount+=2,ut+=Pt,qf(this.layoutVertexArray,Dt.x,Dt.y,xt.x,xt.y,0,0,ut),qf(this.layoutVertexArray,Dt.x,Dt.y,xt.x,xt.y,0,1,ut),H.x+=2*Dt.x,H.y+=2*Dt.y,H.vertexCount+=2;const Ut=we.vertexLength;this.indexArray.emplaceBack(Ut,Ut+2,Ut+1),this.indexArray.emplaceBack(Ut+1,Ut+2,Ut+3),we.vertexLength+=4,we.primitiveLength+=2}}}}if(we.vertexLength+ue>Ir.MAX_VERTEX_ARRAY_LENGTH&&(we=this.segments.prepareSegment(ue,this.layoutVertexArray,this.indexArray)),G5[o.type]!=="Polygon")continue;const Oe=[],Ue=[],qe=we.vertexLength;for(const Ke of ne)if(Ke.length!==0){Ke!==ne[0]&&Ue.push(Oe.length/2);for(let ut=0;ut<Ke.length;ut++){const lt=Ke[ut];qf(this.layoutVertexArray,lt.x,lt.y,0,0,1,1,0),H.x+=lt.x,H.y+=lt.y,H.vertexCount+=1,Oe.push(lt.x),Oe.push(lt.y)}}const Ze=Dy.exports(Oe,Ue);for(let Ke=0;Ke<Ze.length;Ke+=3)this.indexArray.emplaceBack(qe+Ze[Ke],qe+Ze[Ke+2],qe+Ze[Ke+1]);we.primitiveLength+=Ze.length/3,we.vertexLength+=ue}for(let ne=0;ne<H.vertexCount;ne++)this.centroidVertexArray.emplaceBack(Math.floor(H.x/H.vertexCount),Math.floor(H.y/H.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,b,O,P)}}function H5(u,o){return u.x===o.x&&(u.x<0||u.x>ls)||u.y===o.y&&(u.y<0||u.y>ls)}function q5(u){return u.every(o=>o.x<0)||u.every(o=>o.x>ls)||u.every(o=>o.y<0)||u.every(o=>o.y>ls)}hi("FillExtrusionBucket",pb,{omit:["layers","features"]});var W5={paint:new os({"fill-extrusion-opacity":new Si(je["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Li(je["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Si(je["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Si(je["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new fd(je["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Li(je["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Li(je["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Si(je["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Wf(u,o){return u.x*o.x+u.y*o.y}function tT(u,o){if(u.length===1){let d=0;const b=o[d++];let P;for(;!P||b.equals(P);)if(P=o[d++],!P)return 1/0;for(;d<o.length;d++){const O=o[d],H=u[0],ne=P.sub(b),ue=O.sub(b),we=H.sub(b),Oe=Wf(ne,ne),Ue=Wf(ne,ue),qe=Wf(ue,ue),Ze=Wf(we,ne),Ke=Wf(we,ue),ut=Oe*qe-Ue*Ue,lt=(qe*Ze-Ue*Ke)/ut,_t=(Oe*Ke-Ue*Ze)/ut,Dt=b.z*(1-lt-_t)+P.z*lt+O.z*_t;if(isFinite(Dt))return Dt}return 1/0}{let d=1/0;for(const b of o)d=Math.min(d,b.z);return d}}const Y5=Jn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Z5}=Y5,X5=Jn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:K5}=X5,Q5=ru.VectorTileFeature.types,J5=Math.cos(Math.PI/180*37.5),iT=Math.pow(2,14)/.5;class fb{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(d=>d.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(d=>{this.gradients[d.id]={}}),this.layoutVertexArray=new Cr,this.layoutVertexArray2=new Sr,this.indexArray=new Ds,this.programConfigurations=new xd(o.layers,o.zoom),this.segments=new Ir,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(o,d,b){this.hasPattern=cb("line",this.layers,d);const P=this.layers[0].layout.get("line-sort-key"),O=!P.isConstant(),H=[];for(const{feature:ne,id:ue,index:we,sourceLayerIndex:Oe}of o){const Ue=this.layers[0]._featureFilter.needGeometry,qe=wd(ne,Ue);if(!this.layers[0]._featureFilter.filter(new bn(this.zoom),qe,b))continue;const Ze=O?P.evaluate(qe,{},b):void 0,Ke={id:ue,properties:ne.properties,type:ne.type,sourceLayerIndex:Oe,index:we,geometry:Ue?qe.geometry:bd(ne),patterns:{},sortKey:Ze};H.push(Ke)}O&&H.sort((ne,ue)=>ne.sortKey-ue.sortKey);for(const ne of H){const{geometry:ue,index:we,sourceLayerIndex:Oe}=ne;if(this.hasPattern){const Ue=ub("line",this.layers,ne,this.zoom,d);this.patternFeatures.push(Ue)}else this.addFeature(ne,ue,we,b,{});d.featureIndex.insert(o[we].feature,ue,we,Oe,this.index)}}update(o,d,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,b)}addFeatures(o,d,b){for(const P of this.patternFeatures)this.addFeature(P,P.geometry,P.index,d,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,K5)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Z5),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,d,b,P,O){const H=this.layers[0].layout,ne=H.get("line-join").evaluate(o,{}),ue=H.get("line-cap"),we=H.get("line-miter-limit"),Oe=H.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const Ue of d)this.addLine(Ue,o,ne,ue,we,Oe);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,b,O,P)}addLine(o,d,b,P,O,H){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let _t=0;_t<o.length-1;_t++)this.totalDistance+=o[_t].dist(o[_t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const ne=Q5[d.type]==="Polygon";let ue=o.length;for(;ue>=2&&o[ue-1].equals(o[ue-2]);)ue--;let we=0;for(;we<ue-1&&o[we].equals(o[we+1]);)we++;if(ue<(ne?3:2))return;b==="bevel"&&(O=1.05);const Oe=this.overscaling<=16?122880/(512*this.overscaling):0,Ue=this.segments.prepareSegment(10*ue,this.layoutVertexArray,this.indexArray);let qe,Ze,Ke,ut,lt;this.e1=this.e2=-1,ne&&(qe=o[ue-2],lt=o[we].sub(qe)._unit()._perp());for(let _t=we;_t<ue;_t++){if(Ke=_t===ue-1?ne?o[we+1]:void 0:o[_t+1],Ke&&o[_t].equals(Ke))continue;lt&&(ut=lt),qe&&(Ze=qe),qe=o[_t],lt=Ke?Ke.sub(qe)._unit()._perp():ut,ut=ut||lt;let Dt=ut.add(lt);Dt.x===0&&Dt.y===0||Dt._unit();const xt=ut.x*lt.x+ut.y*lt.y,Pt=Dt.x*lt.x+Dt.y*lt.y,Ut=Pt!==0?1/Pt:1/0,Ft=2*Math.sqrt(2-2*Pt),yi=Pt<J5&&Ze&&Ke,_i=ut.x*lt.y-ut.y*lt.x>0;if(yi&&_t>we){const Yt=qe.dist(Ze);if(Yt>2*Oe){const si=qe.sub(qe.sub(Ze)._mult(Oe/Yt)._round());this.updateDistance(Ze,si),this.addCurrentVertex(si,ut,0,0,Ue),Ze=si}}const ni=Ze&&Ke;let Qt=ni?b:ne?"butt":P;if(ni&&Qt==="round"&&(Ut<H?Qt="miter":Ut<=2&&(Qt="fakeround")),Qt==="miter"&&Ut>O&&(Qt="bevel"),Qt==="bevel"&&(Ut>2&&(Qt="flipbevel"),Ut<O&&(Qt="miter")),Ze&&this.updateDistance(Ze,qe),Qt==="miter")Dt._mult(Ut),this.addCurrentVertex(qe,Dt,0,0,Ue);else if(Qt==="flipbevel"){if(Ut>100)Dt=lt.mult(-1);else{const Yt=Ut*ut.add(lt).mag()/ut.sub(lt).mag();Dt._perp()._mult(Yt*(_i?-1:1))}this.addCurrentVertex(qe,Dt,0,0,Ue),this.addCurrentVertex(qe,Dt.mult(-1),0,0,Ue)}else if(Qt==="bevel"||Qt==="fakeround"){const Yt=-Math.sqrt(Ut*Ut-1),si=_i?Yt:0,ei=_i?0:Yt;if(Ze&&this.addCurrentVertex(qe,ut,si,ei,Ue),Qt==="fakeround"){const Gt=Math.round(180*Ft/Math.PI/20);for(let Ii=1;Ii<Gt;Ii++){let Ei=Ii/Gt;if(Ei!==.5){const yn=Ei-.5;Ei+=Ei*yn*(Ei-1)*((1.0904+xt*(xt*(3.55645-1.43519*xt)-3.2452))*yn*yn+(.848013+xt*(.215638*xt-1.06021)))}const dr=lt.sub(ut)._mult(Ei)._add(ut)._unit()._mult(_i?-1:1);this.addHalfVertex(qe,dr.x,dr.y,!1,_i,0,Ue)}}Ke&&this.addCurrentVertex(qe,lt,-si,-ei,Ue)}else if(Qt==="butt")this.addCurrentVertex(qe,Dt,0,0,Ue);else if(Qt==="square"){const Yt=Ze?1:-1;this.addCurrentVertex(qe,Dt,Yt,Yt,Ue)}else Qt==="round"&&(Ze&&(this.addCurrentVertex(qe,ut,0,0,Ue),this.addCurrentVertex(qe,ut,1,1,Ue,!0)),Ke&&(this.addCurrentVertex(qe,lt,-1,-1,Ue,!0),this.addCurrentVertex(qe,lt,0,0,Ue)));if(yi&&_t<ue-1){const Yt=qe.dist(Ke);if(Yt>2*Oe){const si=qe.add(Ke.sub(qe)._mult(Oe/Yt)._round());this.updateDistance(qe,si),this.addCurrentVertex(si,lt,0,0,Ue),qe=si}}}}addCurrentVertex(o,d,b,P,O,H=!1){const ne=d.y*P-d.x,ue=-d.y-d.x*P;this.addHalfVertex(o,d.x+d.y*b,d.y-d.x*b,H,!1,b,O),this.addHalfVertex(o,ne,ue,H,!0,-P,O),this.distance>iT/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(o,d,b,P,O,H))}addHalfVertex({x:o,y:d},b,P,O,H,ne,ue){const we=.5*(this.lineClips?this.scaledDistance*(iT-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(O?1:0),(d<<1)+(H?1:0),Math.round(63*b)+128,Math.round(63*P)+128,1+(ne===0?0:ne<0?-1:1)|(63&we)<<2,we>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Oe=ue.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Oe),ue.primitiveLength++),H?this.e2=Oe:this.e1=Oe}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(o,d){this.distance+=o.dist(d),this.updateScaledDistance()}}hi("LineBucket",fb,{omit:["layers","patternFeatures"]});const eR=new os({"line-cap":new Si(je.layout_line["line-cap"]),"line-join":new Li(je.layout_line["line-join"]),"line-miter-limit":new Si(je.layout_line["line-miter-limit"]),"line-round-limit":new Si(je.layout_line["line-round-limit"]),"line-sort-key":new Li(je.layout_line["line-sort-key"])});var rT={paint:new os({"line-opacity":new Li(je.paint_line["line-opacity"]),"line-color":new Li(je.paint_line["line-color"]),"line-translate":new Si(je.paint_line["line-translate"]),"line-translate-anchor":new Si(je.paint_line["line-translate-anchor"]),"line-width":new Li(je.paint_line["line-width"]),"line-gap-width":new Li(je.paint_line["line-gap-width"]),"line-offset":new Li(je.paint_line["line-offset"]),"line-blur":new Li(je.paint_line["line-blur"]),"line-dasharray":new md(je.paint_line["line-dasharray"]),"line-pattern":new fd(je.paint_line["line-pattern"]),"line-gradient":new zf(je.paint_line["line-gradient"])}),layout:eR};const nT=new class extends Li{possiblyEvaluate(u,o){return o=new bn(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(u,o)}evaluate(u,o,d,b){return o=v({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(u,o,d,b)}}(rT.paint.properties["line-width"].specification);function sT(u,o){return o>0?o+2*u:u}nT.useIntegerZoom=!0;const tR=Jn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),iR=Jn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Jn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const rR=Jn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Jn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const aT=Jn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),nR=Jn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function sR(u,o,d){return u.sections.forEach(b=>{b.text=function(P,O,H){const ne=O.layout.get("text-transform").evaluate(H,{});return ne==="uppercase"?P=P.toLocaleUpperCase():ne==="lowercase"&&(P=P.toLocaleLowerCase()),ro.applyArabicShaping&&(P=ro.applyArabicShaping(P)),P}(b.text,o,d)}),u}Jn([{name:"triangle",components:3,type:"Uint16"}]),Jn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Jn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Jn([{type:"Float32",name:"offsetX"}]),Jn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Yf={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Rs=24,mb=en,oT=function(u,o,d,b,P){var O,H,ne=8*P-b-1,ue=(1<<ne)-1,we=ue>>1,Oe=-7,Ue=P-1,qe=-1,Ze=u[o+Ue];for(Ue+=qe,O=Ze&(1<<-Oe)-1,Ze>>=-Oe,Oe+=ne;Oe>0;O=256*O+u[o+Ue],Ue+=qe,Oe-=8);for(H=O&(1<<-Oe)-1,O>>=-Oe,Oe+=b;Oe>0;H=256*H+u[o+Ue],Ue+=qe,Oe-=8);if(O===0)O=1-we;else{if(O===ue)return H?NaN:1/0*(Ze?-1:1);H+=Math.pow(2,b),O-=we}return(Ze?-1:1)*H*Math.pow(2,O-b)},lT=function(u,o,d,b,P,O){var H,ne,ue,we=8*O-P-1,Oe=(1<<we)-1,Ue=Oe>>1,qe=P===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ze=0,Ke=1,ut=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(ne=isNaN(o)?1:0,H=Oe):(H=Math.floor(Math.log(o)/Math.LN2),o*(ue=Math.pow(2,-H))<1&&(H--,ue*=2),(o+=H+Ue>=1?qe/ue:qe*Math.pow(2,1-Ue))*ue>=2&&(H++,ue/=2),H+Ue>=Oe?(ne=0,H=Oe):H+Ue>=1?(ne=(o*ue-1)*Math.pow(2,P),H+=Ue):(ne=o*Math.pow(2,Ue-1)*Math.pow(2,P),H=0));P>=8;u[d+Ze]=255&ne,Ze+=Ke,ne/=256,P-=8);for(H=H<<P|ne,we+=P;we>0;u[d+Ze]=255&H,Ze+=Ke,H/=256,we-=8);u[d+Ze-Ke]|=128*ut};function en(u){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(u)?u:new Uint8Array(u||0),this.pos=0,this.type=0,this.length=this.buf.length}en.Varint=0,en.Fixed64=1,en.Bytes=2,en.Fixed32=5;var nu,gb=4294967296,cT=1/gb,uT=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function yc(u){return u.type===en.Bytes?u.readVarint()+u.pos:u.pos+1}function Xh(u,o,d){return d?4294967296*o+(u>>>0):4294967296*(o>>>0)+(u>>>0)}function dT(u,o,d){var b=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));d.realloc(b);for(var P=d.pos-1;P>=u;P--)d.buf[P+b]=d.buf[P]}function aR(u,o){for(var d=0;d<u.length;d++)o.writeVarint(u[d])}function oR(u,o){for(var d=0;d<u.length;d++)o.writeSVarint(u[d])}function lR(u,o){for(var d=0;d<u.length;d++)o.writeFloat(u[d])}function cR(u,o){for(var d=0;d<u.length;d++)o.writeDouble(u[d])}function uR(u,o){for(var d=0;d<u.length;d++)o.writeBoolean(u[d])}function dR(u,o){for(var d=0;d<u.length;d++)o.writeFixed32(u[d])}function hR(u,o){for(var d=0;d<u.length;d++)o.writeSFixed32(u[d])}function pR(u,o){for(var d=0;d<u.length;d++)o.writeFixed64(u[d])}function fR(u,o){for(var d=0;d<u.length;d++)o.writeSFixed64(u[d])}function Oy(u,o){return(u[o]|u[o+1]<<8|u[o+2]<<16)+16777216*u[o+3]}function Kh(u,o,d){u[d]=o,u[d+1]=o>>>8,u[d+2]=o>>>16,u[d+3]=o>>>24}function hT(u,o){return(u[o]|u[o+1]<<8|u[o+2]<<16)+(u[o+3]<<24)}function mR(u,o,d){u===1&&d.readMessage(gR,o)}function gR(u,o,d){if(u===3){const{id:b,bitmap:P,width:O,height:H,left:ne,top:ue,advance:we}=d.readMessage(yR,{});o.push({id:b,bitmap:new $f({width:O+6,height:H+6},P),metrics:{width:O,height:H,left:ne,top:ue,advance:we}})}}function yR(u,o,d){u===1?o.id=d.readVarint():u===2?o.bitmap=d.readBytes():u===3?o.width=d.readVarint():u===4?o.height=d.readVarint():u===5?o.left=d.readSVarint():u===6?o.top=d.readSVarint():u===7&&(o.advance=d.readVarint())}function pT(u){let o=0,d=0;for(const H of u)o+=H.w*H.h,d=Math.max(d,H.w);u.sort((H,ne)=>ne.h-H.h);const b=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),d),h:1/0}];let P=0,O=0;for(const H of u)for(let ne=b.length-1;ne>=0;ne--){const ue=b[ne];if(!(H.w>ue.w||H.h>ue.h)){if(H.x=ue.x,H.y=ue.y,O=Math.max(O,H.y+H.h),P=Math.max(P,H.x+H.w),H.w===ue.w&&H.h===ue.h){const we=b.pop();ne<b.length&&(b[ne]=we)}else H.h===ue.h?(ue.x+=H.w,ue.w-=H.w):H.w===ue.w?(ue.y+=H.h,ue.h-=H.h):(b.push({x:ue.x+H.w,y:ue.y,w:ue.w-H.w,h:H.h}),ue.y+=H.h,ue.h-=H.h);break}}return{w:P,h:O,fill:o/(P*O)||0}}en.prototype={destroy:function(){this.buf=null},readFields:function(u,o,d){for(d=d||this.length;this.pos<d;){var b=this.readVarint(),P=b>>3,O=this.pos;this.type=7&b,u(P,o,this),this.pos===O&&this.skip(b)}return o},readMessage:function(u,o){return this.readFields(u,o,this.readVarint()+this.pos)},readFixed32:function(){var u=Oy(this.buf,this.pos);return this.pos+=4,u},readSFixed32:function(){var u=hT(this.buf,this.pos);return this.pos+=4,u},readFixed64:function(){var u=Oy(this.buf,this.pos)+Oy(this.buf,this.pos+4)*gb;return this.pos+=8,u},readSFixed64:function(){var u=Oy(this.buf,this.pos)+hT(this.buf,this.pos+4)*gb;return this.pos+=8,u},readFloat:function(){var u=oT(this.buf,this.pos,!0,23,4);return this.pos+=4,u},readDouble:function(){var u=oT(this.buf,this.pos,!0,52,8);return this.pos+=8,u},readVarint:function(u){var o,d,b=this.buf;return o=127&(d=b[this.pos++]),d<128?o:(o|=(127&(d=b[this.pos++]))<<7,d<128?o:(o|=(127&(d=b[this.pos++]))<<14,d<128?o:(o|=(127&(d=b[this.pos++]))<<21,d<128?o:function(P,O,H){var ne,ue,we=H.buf;if(ne=(112&(ue=we[H.pos++]))>>4,ue<128||(ne|=(127&(ue=we[H.pos++]))<<3,ue<128)||(ne|=(127&(ue=we[H.pos++]))<<10,ue<128)||(ne|=(127&(ue=we[H.pos++]))<<17,ue<128)||(ne|=(127&(ue=we[H.pos++]))<<24,ue<128)||(ne|=(1&(ue=we[H.pos++]))<<31,ue<128))return Xh(P,ne,O);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(d=b[this.pos]))<<28,u,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var u=this.readVarint();return u%2==1?(u+1)/-2:u/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var u=this.readVarint()+this.pos,o=this.pos;return this.pos=u,u-o>=12&&uT?function(d,b,P){return uT.decode(d.subarray(b,P))}(this.buf,o,u):function(d,b,P){for(var O="",H=b;H<P;){var ne,ue,we,Oe=d[H],Ue=null,qe=Oe>239?4:Oe>223?3:Oe>191?2:1;if(H+qe>P)break;qe===1?Oe<128&&(Ue=Oe):qe===2?(192&(ne=d[H+1]))==128&&(Ue=(31&Oe)<<6|63&ne)<=127&&(Ue=null):qe===3?(ue=d[H+2],(192&(ne=d[H+1]))==128&&(192&ue)==128&&((Ue=(15&Oe)<<12|(63&ne)<<6|63&ue)<=2047||Ue>=55296&&Ue<=57343)&&(Ue=null)):qe===4&&(ue=d[H+2],we=d[H+3],(192&(ne=d[H+1]))==128&&(192&ue)==128&&(192&we)==128&&((Ue=(15&Oe)<<18|(63&ne)<<12|(63&ue)<<6|63&we)<=65535||Ue>=1114112)&&(Ue=null)),Ue===null?(Ue=65533,qe=1):Ue>65535&&(Ue-=65536,O+=String.fromCharCode(Ue>>>10&1023|55296),Ue=56320|1023&Ue),O+=String.fromCharCode(Ue),H+=qe}return O}(this.buf,o,u)},readBytes:function(){var u=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,u);return this.pos=u,o},readPackedVarint:function(u,o){if(this.type!==en.Bytes)return u.push(this.readVarint(o));var d=yc(this);for(u=u||[];this.pos<d;)u.push(this.readVarint(o));return u},readPackedSVarint:function(u){if(this.type!==en.Bytes)return u.push(this.readSVarint());var o=yc(this);for(u=u||[];this.pos<o;)u.push(this.readSVarint());return u},readPackedBoolean:function(u){if(this.type!==en.Bytes)return u.push(this.readBoolean());var o=yc(this);for(u=u||[];this.pos<o;)u.push(this.readBoolean());return u},readPackedFloat:function(u){if(this.type!==en.Bytes)return u.push(this.readFloat());var o=yc(this);for(u=u||[];this.pos<o;)u.push(this.readFloat());return u},readPackedDouble:function(u){if(this.type!==en.Bytes)return u.push(this.readDouble());var o=yc(this);for(u=u||[];this.pos<o;)u.push(this.readDouble());return u},readPackedFixed32:function(u){if(this.type!==en.Bytes)return u.push(this.readFixed32());var o=yc(this);for(u=u||[];this.pos<o;)u.push(this.readFixed32());return u},readPackedSFixed32:function(u){if(this.type!==en.Bytes)return u.push(this.readSFixed32());var o=yc(this);for(u=u||[];this.pos<o;)u.push(this.readSFixed32());return u},readPackedFixed64:function(u){if(this.type!==en.Bytes)return u.push(this.readFixed64());var o=yc(this);for(u=u||[];this.pos<o;)u.push(this.readFixed64());return u},readPackedSFixed64:function(u){if(this.type!==en.Bytes)return u.push(this.readSFixed64());var o=yc(this);for(u=u||[];this.pos<o;)u.push(this.readSFixed64());return u},skip:function(u){var o=7&u;if(o===en.Varint)for(;this.buf[this.pos++]>127;);else if(o===en.Bytes)this.pos=this.readVarint()+this.pos;else if(o===en.Fixed32)this.pos+=4;else{if(o!==en.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(u,o){this.writeVarint(u<<3|o)},realloc:function(u){for(var o=this.length||16;o<this.pos+u;)o*=2;if(o!==this.length){var d=new Uint8Array(o);d.set(this.buf),this.buf=d,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(u){this.realloc(4),Kh(this.buf,u,this.pos),this.pos+=4},writeSFixed32:function(u){this.realloc(4),Kh(this.buf,u,this.pos),this.pos+=4},writeFixed64:function(u){this.realloc(8),Kh(this.buf,-1&u,this.pos),Kh(this.buf,Math.floor(u*cT),this.pos+4),this.pos+=8},writeSFixed64:function(u){this.realloc(8),Kh(this.buf,-1&u,this.pos),Kh(this.buf,Math.floor(u*cT),this.pos+4),this.pos+=8},writeVarint:function(u){(u=+u||0)>268435455||u<0?function(o,d){var b,P;if(o>=0?(b=o%4294967296|0,P=o/4294967296|0):(P=~(-o/4294967296),4294967295^(b=~(-o%4294967296))?b=b+1|0:(b=0,P=P+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),function(O,H,ne){ne.buf[ne.pos++]=127&O|128,O>>>=7,ne.buf[ne.pos++]=127&O|128,O>>>=7,ne.buf[ne.pos++]=127&O|128,O>>>=7,ne.buf[ne.pos++]=127&O|128,ne.buf[ne.pos]=127&(O>>>=7)}(b,0,d),function(O,H){var ne=(7&O)<<4;H.buf[H.pos++]|=ne|((O>>>=3)?128:0),O&&(H.buf[H.pos++]=127&O|((O>>>=7)?128:0),O&&(H.buf[H.pos++]=127&O|((O>>>=7)?128:0),O&&(H.buf[H.pos++]=127&O|((O>>>=7)?128:0),O&&(H.buf[H.pos++]=127&O|((O>>>=7)?128:0),O&&(H.buf[H.pos++]=127&O)))))}(P,d)}(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(u){this.writeVarint(u<0?2*-u-1:2*u)},writeBoolean:function(u){this.writeVarint(!!u)},writeString:function(u){u=String(u),this.realloc(4*u.length),this.pos++;var o=this.pos;this.pos=function(b,P,O){for(var H,ne,ue=0;ue<P.length;ue++){if((H=P.charCodeAt(ue))>55295&&H<57344){if(!ne){H>56319||ue+1===P.length?(b[O++]=239,b[O++]=191,b[O++]=189):ne=H;continue}if(H<56320){b[O++]=239,b[O++]=191,b[O++]=189,ne=H;continue}H=ne-55296<<10|H-56320|65536,ne=null}else ne&&(b[O++]=239,b[O++]=191,b[O++]=189,ne=null);H<128?b[O++]=H:(H<2048?b[O++]=H>>6|192:(H<65536?b[O++]=H>>12|224:(b[O++]=H>>18|240,b[O++]=H>>12&63|128),b[O++]=H>>6&63|128),b[O++]=63&H|128)}return O}(this.buf,u,this.pos);var d=this.pos-o;d>=128&&dT(o,d,this),this.pos=o-1,this.writeVarint(d),this.pos+=d},writeFloat:function(u){this.realloc(4),lT(this.buf,u,this.pos,!0,23,4),this.pos+=4},writeDouble:function(u){this.realloc(8),lT(this.buf,u,this.pos,!0,52,8),this.pos+=8},writeBytes:function(u){var o=u.length;this.writeVarint(o),this.realloc(o);for(var d=0;d<o;d++)this.buf[this.pos++]=u[d]},writeRawMessage:function(u,o){this.pos++;var d=this.pos;u(o,this);var b=this.pos-d;b>=128&&dT(d,b,this),this.pos=d-1,this.writeVarint(b),this.pos+=b},writeMessage:function(u,o,d){this.writeTag(u,en.Bytes),this.writeRawMessage(o,d)},writePackedVarint:function(u,o){o.length&&this.writeMessage(u,aR,o)},writePackedSVarint:function(u,o){o.length&&this.writeMessage(u,oR,o)},writePackedBoolean:function(u,o){o.length&&this.writeMessage(u,uR,o)},writePackedFloat:function(u,o){o.length&&this.writeMessage(u,lR,o)},writePackedDouble:function(u,o){o.length&&this.writeMessage(u,cR,o)},writePackedFixed32:function(u,o){o.length&&this.writeMessage(u,dR,o)},writePackedSFixed32:function(u,o){o.length&&this.writeMessage(u,hR,o)},writePackedFixed64:function(u,o){o.length&&this.writeMessage(u,pR,o)},writePackedSFixed64:function(u,o){o.length&&this.writeMessage(u,fR,o)},writeBytesField:function(u,o){this.writeTag(u,en.Bytes),this.writeBytes(o)},writeFixed32Field:function(u,o){this.writeTag(u,en.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(u,o){this.writeTag(u,en.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(u,o){this.writeTag(u,en.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(u,o){this.writeTag(u,en.Fixed64),this.writeSFixed64(o)},writeVarintField:function(u,o){this.writeTag(u,en.Varint),this.writeVarint(o)},writeSVarintField:function(u,o){this.writeTag(u,en.Varint),this.writeSVarint(o)},writeStringField:function(u,o){this.writeTag(u,en.Bytes),this.writeString(o)},writeFloatField:function(u,o){this.writeTag(u,en.Fixed32),this.writeFloat(o)},writeDoubleField:function(u,o){this.writeTag(u,en.Fixed64),this.writeDouble(o)},writeBooleanField:function(u,o){this.writeVarintField(u,!!o)}};class yb{constructor(o,{pixelRatio:d,version:b,stretchX:P,stretchY:O,content:H}){this.paddedRect=o,this.pixelRatio=d,this.stretchX=P,this.stretchY=O,this.content=H,this.version=b}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class fT{constructor(o,d){const b={},P={};this.haveRenderCallbacks=[];const O=[];this.addImages(o,b,O),this.addImages(d,P,O);const{w:H,h:ne}=pT(O),ue=new So({width:H||1,height:ne||1});for(const we in o){const Oe=o[we],Ue=b[we].paddedRect;So.copy(Oe.data,ue,{x:0,y:0},{x:Ue.x+1,y:Ue.y+1},Oe.data)}for(const we in d){const Oe=d[we],Ue=P[we].paddedRect,qe=Ue.x+1,Ze=Ue.y+1,Ke=Oe.data.width,ut=Oe.data.height;So.copy(Oe.data,ue,{x:0,y:0},{x:qe,y:Ze},Oe.data),So.copy(Oe.data,ue,{x:0,y:ut-1},{x:qe,y:Ze-1},{width:Ke,height:1}),So.copy(Oe.data,ue,{x:0,y:0},{x:qe,y:Ze+ut},{width:Ke,height:1}),So.copy(Oe.data,ue,{x:Ke-1,y:0},{x:qe-1,y:Ze},{width:1,height:ut}),So.copy(Oe.data,ue,{x:0,y:0},{x:qe+Ke,y:Ze},{width:1,height:ut})}this.image=ue,this.iconPositions=b,this.patternPositions=P}addImages(o,d,b){for(const P in o){const O=o[P],H={x:0,y:0,w:O.data.width+2,h:O.data.height+2};b.push(H),d[P]=new yb(H,O),O.hasRenderCallback&&this.haveRenderCallbacks.push(P)}}patchUpdatedImages(o,d){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const b in o.updatedImages)this.patchUpdatedImage(this.iconPositions[b],o.getImage(b),d),this.patchUpdatedImage(this.patternPositions[b],o.getImage(b),d)}patchUpdatedImage(o,d,b){if(!o||!d||o.version===d.version)return;o.version=d.version;const[P,O]=o.tl;b.update(d.data,void 0,{x:P,y:O})}}hi("ImagePosition",yb),hi("ImageAtlas",fT),s.WritingMode=void 0,(nu=s.WritingMode||(s.WritingMode={}))[nu.none=0]="none",nu[nu.horizontal=1]="horizontal",nu[nu.vertical=2]="vertical",nu[nu.horizontalOnly=3]="horizontalOnly";const jy=-17;class Zf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,d){const b=new Zf;return b.scale=o||1,b.fontStack=d,b}static forImage(o){const d=new Zf;return d.imageName=o,d}}class Qh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,d){const b=new Qh;for(let P=0;P<o.sections.length;P++){const O=o.sections[P];O.image?b.addImageSection(O):b.addTextSection(O,d)}return b}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(){this.text=function(o){let d="";for(let b=0;b<o.length;b++){const P=o.charCodeAt(b+1)||null,O=o.charCodeAt(b-1)||null;d+=P&&_y(P)&&!Yf[o[b+1]]||O&&_y(O)&&!Yf[o[b-1]]||!Yf[o[b]]?o[b]:Yf[o[b]]}return d}(this.text)}trim(){let o=0;for(let b=0;b<this.text.length&&By[this.text.charCodeAt(b)];b++)o++;let d=this.text.length;for(let b=this.text.length-1;b>=0&&b>=o&&By[this.text.charCodeAt(b)];b--)d--;this.text=this.text.substring(o,d),this.sectionIndex=this.sectionIndex.slice(o,d)}substring(o,d){const b=new Qh;return b.text=this.text.substring(o,d),b.sectionIndex=this.sectionIndex.slice(o,d),b.sections=this.sections,b}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,d)=>Math.max(o,this.sections[d].scale),0)}addTextSection(o,d){this.text+=o.text,this.sections.push(Zf.forText(o.scale,o.fontStack||d));const b=this.sections.length-1;for(let P=0;P<o.text.length;++P)this.sectionIndex.push(b)}addImageSection(o){const d=o.image?o.image.name:"";if(d.length===0)return void M("Can't add FormattedSection with an empty image.");const b=this.getNextImageSectionCharCode();b?(this.text+=String.fromCharCode(b),this.sections.push(Zf.forImage(d)),this.sectionIndex.push(this.sections.length-1)):M("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Fy(u,o,d,b,P,O,H,ne,ue,we,Oe,Ue,qe,Ze,Ke,ut){const lt=Qh.fromFeature(u,P);let _t;Ue===s.WritingMode.vertical&&lt.verticalizePunctuation();const{processBidirectionalText:Dt,processStyledBidirectionalText:xt}=ro;if(Dt&&lt.sections.length===1){_t=[];const Ft=Dt(lt.toString(),vb(lt,we,O,o,b,Ze,Ke));for(const yi of Ft){const _i=new Qh;_i.text=yi,_i.sections=lt.sections;for(let ni=0;ni<yi.length;ni++)_i.sectionIndex.push(0);_t.push(_i)}}else if(xt){_t=[];const Ft=xt(lt.text,lt.sectionIndex,vb(lt,we,O,o,b,Ze,Ke));for(const yi of Ft){const _i=new Qh;_i.text=yi[0],_i.sectionIndex=yi[1],_i.sections=lt.sections,_t.push(_i)}}else _t=function(Ft,yi){const _i=[],ni=Ft.text;let Qt=0;for(const Yt of yi)_i.push(Ft.substring(Qt,Yt)),Qt=Yt;return Qt<ni.length&&_i.push(Ft.substring(Qt,ni.length)),_i}(lt,vb(lt,we,O,o,b,Ze,Ke));const Pt=[],Ut={positionedLines:Pt,text:lt.toString(),top:Oe[1],bottom:Oe[1],left:Oe[0],right:Oe[0],writingMode:Ue,iconsInText:!1,verticalizable:!1};return function(Ft,yi,_i,ni,Qt,Yt,si,ei,Gt,Ii,Ei,dr){let yn=0,_n=jy,cs=0,ko=0;const Vs=ei==="right"?1:ei==="left"?0:.5;let ts=0;for(const is of Qt){is.trim();const Hs=is.getMaxScale(),ra=(Hs-1)*Rs,Ea={positionedGlyphs:[],lineOffset:0};Ft.positionedLines[ts]=Ea;const Ba=Ea.positionedGlyphs;let $a=0;if(!is.length()){_n+=Yt,++ts;continue}for(let bs=0;bs<is.length();bs++){const gr=is.getSection(bs),so=is.getSectionIndex(bs),qs=is.getCharCode(bs);let na=0,Uo=null,al=null,ol=null,xc=Rs;const Vo=!(Gt===s.WritingMode.horizontal||!Ei&&!pd(qs)||Ei&&(By[qs]||(xs=qs,ri.Arabic(xs)||ri["Arabic Supplement"](xs)||ri["Arabic Extended-A"](xs)||ri["Arabic Presentation Forms-A"](xs)||ri["Arabic Presentation Forms-B"](xs))));if(gr.imageName){const Mo=ni[gr.imageName];if(!Mo)continue;ol=gr.imageName,Ft.iconsInText=Ft.iconsInText||!0,al=Mo.paddedRect;const Ua=Mo.displaySize;gr.scale=gr.scale*Rs/dr,Uo={width:Ua[0],height:Ua[1],left:1,top:-3,advance:Vo?Ua[1]:Ua[0]},na=ra+(Rs-Ua[1]*gr.scale),xc=Uo.advance;const bc=Vo?Ua[0]*gr.scale-Rs*Hs:Ua[1]*gr.scale-Rs*Hs;bc>0&&bc>$a&&($a=bc)}else{const Mo=_i[gr.fontStack],Ua=Mo&&Mo[qs];if(Ua&&Ua.rect)al=Ua.rect,Uo=Ua.metrics;else{const bc=yi[gr.fontStack],Qf=bc&&bc[qs];if(!Qf)continue;Uo=Qf.metrics}na=(Hs-gr.scale)*Rs}Vo?(Ft.verticalizable=!0,Ba.push({glyph:qs,imageName:ol,x:yn,y:_n+na,vertical:Vo,scale:gr.scale,fontStack:gr.fontStack,sectionIndex:so,metrics:Uo,rect:al}),yn+=xc*gr.scale+Ii):(Ba.push({glyph:qs,imageName:ol,x:yn,y:_n+na,vertical:Vo,scale:gr.scale,fontStack:gr.fontStack,sectionIndex:so,metrics:Uo,rect:al}),yn+=Uo.advance*gr.scale+Ii)}Ba.length!==0&&(cs=Math.max(yn-Ii,cs),bR(Ba,0,Ba.length-1,Vs,$a)),yn=0;const An=Yt*Hs+$a;Ea.lineOffset=Math.max($a,ra),_n+=An,ko=Math.max(An,ko),++ts}var xs;const Gs=_n-jy,{horizontalAlign:ia,verticalAlign:Fa}=xb(si);(function(is,Hs,ra,Ea,Ba,$a,An,bs,gr){const so=(Hs-ra)*Ba;let qs=0;qs=$a!==An?-bs*Ea-jy:(-Ea*gr+.5)*An;for(const na of is)for(const Uo of na.positionedGlyphs)Uo.x+=so,Uo.y+=qs})(Ft.positionedLines,Vs,ia,Fa,cs,ko,Yt,Gs,Qt.length),Ft.top+=-Fa*Gs,Ft.bottom=Ft.top+Gs,Ft.left+=-ia*cs,Ft.right=Ft.left+cs}(Ut,o,d,b,_t,H,ne,ue,Ue,we,qe,ut),!function(Ft){for(const yi of Ft)if(yi.positionedGlyphs.length!==0)return!1;return!0}(Pt)&&Ut}const By={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},vR={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function mT(u,o,d,b,P,O){if(o.imageName){const H=b[o.imageName];return H?H.displaySize[0]*o.scale*Rs/O+P:0}{const H=d[o.fontStack],ne=H&&H[u];return ne?ne.metrics.advance*o.scale+P:0}}function gT(u,o,d,b){const P=Math.pow(u-o,2);return b?u<o?P/2:2*P:P+Math.abs(d)*d}function xR(u,o,d){let b=0;return u===10&&(b-=1e4),d&&(b+=150),u!==40&&u!==65288||(b+=50),o!==41&&o!==65289||(b+=50),b}function yT(u,o,d,b,P,O){let H=null,ne=gT(o,d,P,O);for(const ue of b){const we=gT(o-ue.x,d,P,O)+ue.badness;we<=ne&&(H=ue,ne=we)}return{index:u,x:o,priorBreak:H,badness:ne}}function vT(u){return u?vT(u.priorBreak).concat(u.index):[]}function vb(u,o,d,b,P,O,H){if(O!=="point")return[];if(!u)return[];const ne=[],ue=function(qe,Ze,Ke,ut,lt,_t){let Dt=0;for(let xt=0;xt<qe.length();xt++){const Pt=qe.getSection(xt);Dt+=mT(qe.getCharCode(xt),Pt,ut,lt,Ze,_t)}return Dt/Math.max(1,Math.ceil(Dt/Ke))}(u,o,d,b,P,H),we=u.text.indexOf("​")>=0;let Oe=0;for(let qe=0;qe<u.length();qe++){const Ze=u.getSection(qe),Ke=u.getCharCode(qe);if(By[Ke]||(Oe+=mT(Ke,Ze,b,P,o,H)),qe<u.length()-1){const ut=!((Ue=Ke)<11904||!(ri["Bopomofo Extended"](Ue)||ri.Bopomofo(Ue)||ri["CJK Compatibility Forms"](Ue)||ri["CJK Compatibility Ideographs"](Ue)||ri["CJK Compatibility"](Ue)||ri["CJK Radicals Supplement"](Ue)||ri["CJK Strokes"](Ue)||ri["CJK Symbols and Punctuation"](Ue)||ri["CJK Unified Ideographs Extension A"](Ue)||ri["CJK Unified Ideographs"](Ue)||ri["Enclosed CJK Letters and Months"](Ue)||ri["Halfwidth and Fullwidth Forms"](Ue)||ri.Hiragana(Ue)||ri["Ideographic Description Characters"](Ue)||ri["Kangxi Radicals"](Ue)||ri["Katakana Phonetic Extensions"](Ue)||ri.Katakana(Ue)||ri["Vertical Forms"](Ue)||ri["Yi Radicals"](Ue)||ri["Yi Syllables"](Ue)));(vR[Ke]||ut||Ze.imageName)&&ne.push(yT(qe+1,Oe,ue,ne,xR(Ke,u.getCharCode(qe+1),ut&&we),!1))}}var Ue;return vT(yT(u.length(),Oe,ue,ne,0,!0))}function xb(u){let o=.5,d=.5;switch(u){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:o,verticalAlign:d}}function bR(u,o,d,b,P){if(!b&&!P)return;const O=u[d],H=(u[d].x+O.metrics.advance*O.scale)*b;for(let ne=o;ne<=d;ne++)u[ne].x-=H,u[ne].y+=P}function wR(u,o,d){const{horizontalAlign:b,verticalAlign:P}=xb(d),O=o[0]-u.displaySize[0]*b,H=o[1]-u.displaySize[1]*P;return{image:u,top:H,bottom:H+u.displaySize[1],left:O,right:O+u.displaySize[0]}}function xT(u,o,d,b,P,O){const H=u.image;let ne;if(H.content){const lt=H.content,_t=H.pixelRatio||1;ne=[lt[0]/_t,lt[1]/_t,H.displaySize[0]-lt[2]/_t,H.displaySize[1]-lt[3]/_t]}const ue=o.left*O,we=o.right*O;let Oe,Ue,qe,Ze;d==="width"||d==="both"?(Ze=P[0]+ue-b[3],Ue=P[0]+we+b[1]):(Ze=P[0]+(ue+we-H.displaySize[0])/2,Ue=Ze+H.displaySize[0]);const Ke=o.top*O,ut=o.bottom*O;return d==="height"||d==="both"?(Oe=P[1]+Ke-b[0],qe=P[1]+ut+b[2]):(Oe=P[1]+(Ke+ut-H.displaySize[1])/2,qe=Oe+H.displaySize[1]),{image:H,top:Oe,right:Ue,bottom:qe,left:Ze,collisionPadding:ne}}const vc=128;function bT(u,o){const{expression:d}=o;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new bn(u+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:b,interpolationType:P}=d;let O=0;for(;O<b.length&&b[O]<=u;)O++;O=Math.max(0,O-1);let H=O;for(;H<b.length&&b[H]<u+1;)H++;H=Math.min(b.length-1,H);const ne=b[O],ue=b[H];return d.kind==="composite"?{kind:"composite",minZoom:ne,maxZoom:ue,interpolationType:P}:{kind:"camera",minZoom:ne,maxZoom:ue,minSize:d.evaluate(new bn(ne)),maxSize:d.evaluate(new bn(ue)),interpolationType:P}}}class su extends G{constructor(o,d,b,P){super(o,d),this.angle=b,P!==void 0&&(this.segment=P)}clone(){return new su(this.x,this.y,this.angle,this.segment)}}function wT(u,o,d,b,P){if(o.segment===void 0)return!0;let O=o,H=o.segment+1,ne=0;for(;ne>-d/2;){if(H--,H<0)return!1;ne-=u[H].dist(O),O=u[H]}ne+=u[H].dist(u[H+1]),H++;const ue=[];let we=0;for(;ne<d/2;){const Oe=u[H],Ue=u[H+1];if(!Ue)return!1;let qe=u[H-1].angleTo(Oe)-Oe.angleTo(Ue);for(qe=Math.abs((qe+3*Math.PI)%(2*Math.PI)-Math.PI),ue.push({distance:ne,angleDelta:qe}),we+=qe;ne-ue[0].distance>b;)we-=ue.shift().angleDelta;if(we>P)return!1;H++,ne+=Oe.dist(Ue)}return!0}function _T(u){let o=0;for(let d=0;d<u.length-1;d++)o+=u[d].dist(u[d+1]);return o}function CT(u,o,d){return u?.6*o*d:0}function TT(u,o){return Math.max(u?u.right-u.left:0,o?o.right-o.left:0)}function _R(u,o,d,b,P,O){const H=CT(d,P,O),ne=TT(d,b)*O;let ue=0;const we=_T(u)/2;for(let Oe=0;Oe<u.length-1;Oe++){const Ue=u[Oe],qe=u[Oe+1],Ze=Ue.dist(qe);if(ue+Ze>we){const Ke=(we-ue)/Ze,ut=kn(Ue.x,qe.x,Ke),lt=kn(Ue.y,qe.y,Ke),_t=new su(ut,lt,qe.angleTo(Ue),Oe);return _t._round(),!H||wT(u,_t,ne,H,o)?_t:void 0}ue+=Ze}}function CR(u,o,d,b,P,O,H,ne,ue){const we=CT(b,O,H),Oe=TT(b,P),Ue=Oe*H,qe=u[0].x===0||u[0].x===ue||u[0].y===0||u[0].y===ue;return o-Ue<o/4&&(o=Ue+o/4),ST(u,qe?o/2*ne%o:(Oe/2+2*O)*H*ne%o,o,we,d,Ue,qe,!1,ue)}function ST(u,o,d,b,P,O,H,ne,ue){const we=O/2,Oe=_T(u);let Ue=0,qe=o-d,Ze=[];for(let Ke=0;Ke<u.length-1;Ke++){const ut=u[Ke],lt=u[Ke+1],_t=ut.dist(lt),Dt=lt.angleTo(ut);for(;qe+d<Ue+_t;){qe+=d;const xt=(qe-Ue)/_t,Pt=kn(ut.x,lt.x,xt),Ut=kn(ut.y,lt.y,xt);if(Pt>=0&&Pt<ue&&Ut>=0&&Ut<ue&&qe-we>=0&&qe+we<=Oe){const Ft=new su(Pt,Ut,Dt,Ke);Ft._round(),b&&!wT(u,Ft,O,b,P)||Ze.push(Ft)}}Ue+=_t}return ne||Ze.length||H||(Ze=ST(u,Ue/2,d,b,P,O,H,!0,ue)),Ze}function ET(u,o,d,b,P){const O=[];for(let H=0;H<u.length;H++){const ne=u[H];let ue;for(let we=0;we<ne.length-1;we++){let Oe=ne[we],Ue=ne[we+1];Oe.x<o&&Ue.x<o||(Oe.x<o?Oe=new G(o,Oe.y+(o-Oe.x)/(Ue.x-Oe.x)*(Ue.y-Oe.y))._round():Ue.x<o&&(Ue=new G(o,Oe.y+(o-Oe.x)/(Ue.x-Oe.x)*(Ue.y-Oe.y))._round()),Oe.y<d&&Ue.y<d||(Oe.y<d?Oe=new G(Oe.x+(d-Oe.y)/(Ue.y-Oe.y)*(Ue.x-Oe.x),d)._round():Ue.y<d&&(Ue=new G(Oe.x+(d-Oe.y)/(Ue.y-Oe.y)*(Ue.x-Oe.x),d)._round()),Oe.x>=b&&Ue.x>=b||(Oe.x>=b?Oe=new G(b,Oe.y+(b-Oe.x)/(Ue.x-Oe.x)*(Ue.y-Oe.y))._round():Ue.x>=b&&(Ue=new G(b,Oe.y+(b-Oe.x)/(Ue.x-Oe.x)*(Ue.y-Oe.y))._round()),Oe.y>=P&&Ue.y>=P||(Oe.y>=P?Oe=new G(Oe.x+(P-Oe.y)/(Ue.y-Oe.y)*(Ue.x-Oe.x),P)._round():Ue.y>=P&&(Ue=new G(Oe.x+(P-Oe.y)/(Ue.y-Oe.y)*(Ue.x-Oe.x),P)._round()),ue&&Oe.equals(ue[ue.length-1])||(ue=[Oe],O.push(ue)),ue.push(Ue)))))}}return O}function kT(u,o,d,b){const P=[],O=u.image,H=O.pixelRatio,ne=O.paddedRect.w-2,ue=O.paddedRect.h-2,we=u.right-u.left,Oe=u.bottom-u.top,Ue=O.stretchX||[[0,ne]],qe=O.stretchY||[[0,ue]],Ze=(Yt,si)=>Yt+si[1]-si[0],Ke=Ue.reduce(Ze,0),ut=qe.reduce(Ze,0),lt=ne-Ke,_t=ue-ut;let Dt=0,xt=Ke,Pt=0,Ut=ut,Ft=0,yi=lt,_i=0,ni=_t;if(O.content&&b){const Yt=O.content;Dt=$y(Ue,0,Yt[0]),Pt=$y(qe,0,Yt[1]),xt=$y(Ue,Yt[0],Yt[2]),Ut=$y(qe,Yt[1],Yt[3]),Ft=Yt[0]-Dt,_i=Yt[1]-Pt,yi=Yt[2]-Yt[0]-xt,ni=Yt[3]-Yt[1]-Ut}const Qt=(Yt,si,ei,Gt)=>{const Ii=Uy(Yt.stretch-Dt,xt,we,u.left),Ei=Vy(Yt.fixed-Ft,yi,Yt.stretch,Ke),dr=Uy(si.stretch-Pt,Ut,Oe,u.top),yn=Vy(si.fixed-_i,ni,si.stretch,ut),_n=Uy(ei.stretch-Dt,xt,we,u.left),cs=Vy(ei.fixed-Ft,yi,ei.stretch,Ke),ko=Uy(Gt.stretch-Pt,Ut,Oe,u.top),Vs=Vy(Gt.fixed-_i,ni,Gt.stretch,ut),ts=new G(Ii,dr),xs=new G(_n,dr),Gs=new G(_n,ko),ia=new G(Ii,ko),Fa=new G(Ei/H,yn/H),is=new G(cs/H,Vs/H),Hs=o*Math.PI/180;if(Hs){const Ba=Math.sin(Hs),$a=Math.cos(Hs),An=[$a,-Ba,Ba,$a];ts._matMult(An),xs._matMult(An),ia._matMult(An),Gs._matMult(An)}const ra=Yt.stretch+Yt.fixed,Ea=si.stretch+si.fixed;return{tl:ts,tr:xs,bl:ia,br:Gs,tex:{x:O.paddedRect.x+1+ra,y:O.paddedRect.y+1+Ea,w:ei.stretch+ei.fixed-ra,h:Gt.stretch+Gt.fixed-Ea},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Fa,pixelOffsetBR:is,minFontScaleX:yi/H/we,minFontScaleY:ni/H/Oe,isSDF:d}};if(b&&(O.stretchX||O.stretchY)){const Yt=MT(Ue,lt,Ke),si=MT(qe,_t,ut);for(let ei=0;ei<Yt.length-1;ei++){const Gt=Yt[ei],Ii=Yt[ei+1];for(let Ei=0;Ei<si.length-1;Ei++)P.push(Qt(Gt,si[Ei],Ii,si[Ei+1]))}}else P.push(Qt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ne+1},{fixed:0,stretch:ue+1}));return P}function $y(u,o,d){let b=0;for(const P of u)b+=Math.max(o,Math.min(d,P[1]))-Math.max(o,Math.min(d,P[0]));return b}function MT(u,o,d){const b=[{fixed:-1,stretch:0}];for(const[P,O]of u){const H=b[b.length-1];b.push({fixed:P-H.stretch,stretch:H.stretch}),b.push({fixed:P-H.stretch,stretch:H.stretch+(O-P)})}return b.push({fixed:o+1,stretch:d}),b}function Uy(u,o,d,b){return u/o*d+b}function Vy(u,o,d,b){return u-o*d/b}hi("Anchor",su);class Gy{constructor(o,d,b,P,O,H,ne,ue,we,Oe){if(this.boxStartIndex=o.length,we){let Ue=H.top,qe=H.bottom;const Ze=H.collisionPadding;Ze&&(Ue-=Ze[1],qe+=Ze[3]);let Ke=qe-Ue;Ke>0&&(Ke=Math.max(10,Ke),this.circleDiameter=Ke)}else{let Ue=H.top*ne-ue[0],qe=H.bottom*ne+ue[2],Ze=H.left*ne-ue[3],Ke=H.right*ne+ue[1];const ut=H.collisionPadding;if(ut&&(Ze-=ut[0]*ne,Ue-=ut[1]*ne,Ke+=ut[2]*ne,qe+=ut[3]*ne),Oe){const lt=new G(Ze,Ue),_t=new G(Ke,Ue),Dt=new G(Ze,qe),xt=new G(Ke,qe),Pt=Oe*Math.PI/180;lt._rotate(Pt),_t._rotate(Pt),Dt._rotate(Pt),xt._rotate(Pt),Ze=Math.min(lt.x,_t.x,Dt.x,xt.x),Ke=Math.max(lt.x,_t.x,Dt.x,xt.x),Ue=Math.min(lt.y,_t.y,Dt.y,xt.y),qe=Math.max(lt.y,_t.y,Dt.y,xt.y)}o.emplaceBack(d.x,d.y,Ze,Ue,Ke,qe,b,P,O)}this.boxEndIndex=o.length}}class TR{constructor(o=[],d=SR){if(this.data=o,this.length=this.data.length,this.compare=d,this.length>0)for(let b=(this.length>>1)-1;b>=0;b--)this._down(b)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:d,compare:b}=this,P=d[o];for(;o>0;){const O=o-1>>1,H=d[O];if(b(P,H)>=0)break;d[o]=H,o=O}d[o]=P}_down(o){const{data:d,compare:b}=this,P=this.length>>1,O=d[o];for(;o<P;){let H=1+(o<<1),ne=d[H];const ue=H+1;if(ue<this.length&&b(d[ue],ne)<0&&(H=ue,ne=d[ue]),b(ne,O)>=0)break;d[o]=ne,o=H}d[o]=O}}function SR(u,o){return u<o?-1:u>o?1:0}function ER(u,o=1,d=!1){let b=1/0,P=1/0,O=-1/0,H=-1/0;const ne=u[0];for(let Ze=0;Ze<ne.length;Ze++){const Ke=ne[Ze];(!Ze||Ke.x<b)&&(b=Ke.x),(!Ze||Ke.y<P)&&(P=Ke.y),(!Ze||Ke.x>O)&&(O=Ke.x),(!Ze||Ke.y>H)&&(H=Ke.y)}const ue=Math.min(O-b,H-P);let we=ue/2;const Oe=new TR([],kR);if(ue===0)return new G(b,P);for(let Ze=b;Ze<O;Ze+=ue)for(let Ke=P;Ke<H;Ke+=ue)Oe.push(new Jh(Ze+we,Ke+we,we,u));let Ue=function(Ze){let Ke=0,ut=0,lt=0;const _t=Ze[0];for(let Dt=0,xt=_t.length,Pt=xt-1;Dt<xt;Pt=Dt++){const Ut=_t[Dt],Ft=_t[Pt],yi=Ut.x*Ft.y-Ft.x*Ut.y;ut+=(Ut.x+Ft.x)*yi,lt+=(Ut.y+Ft.y)*yi,Ke+=3*yi}return new Jh(ut/Ke,lt/Ke,0,Ze)}(u),qe=Oe.length;for(;Oe.length;){const Ze=Oe.pop();(Ze.d>Ue.d||!Ue.d)&&(Ue=Ze,d&&console.log("found best %d after %d probes",Math.round(1e4*Ze.d)/1e4,qe)),Ze.max-Ue.d<=o||(we=Ze.h/2,Oe.push(new Jh(Ze.p.x-we,Ze.p.y-we,we,u)),Oe.push(new Jh(Ze.p.x+we,Ze.p.y-we,we,u)),Oe.push(new Jh(Ze.p.x-we,Ze.p.y+we,we,u)),Oe.push(new Jh(Ze.p.x+we,Ze.p.y+we,we,u)),qe+=4)}return d&&(console.log(`num probes: ${qe}`),console.log(`best distance: ${Ue.d}`)),Ue.p}function kR(u,o){return o.max-u.max}function Jh(u,o,d,b){this.p=new G(u,o),this.h=d,this.d=function(P,O){let H=!1,ne=1/0;for(let ue=0;ue<O.length;ue++){const we=O[ue];for(let Oe=0,Ue=we.length,qe=Ue-1;Oe<Ue;qe=Oe++){const Ze=we[Oe],Ke=we[qe];Ze.y>P.y!=Ke.y>P.y&&P.x<(Ke.x-Ze.x)*(P.y-Ze.y)/(Ke.y-Ze.y)+Ze.x&&(H=!H),ne=Math.min(ne,zC(P,Ze,Ke))}}return(H?1:-1)*Math.sqrt(ne)}(this.p,b),this.max=this.d+this.h*Math.SQRT2}const bb=Number.POSITIVE_INFINITY;function AT(u,o){return o[1]!==bb?function(d,b,P){let O=0,H=0;switch(b=Math.abs(b),P=Math.abs(P),d){case"top-right":case"top-left":case"top":H=P-7;break;case"bottom-right":case"bottom-left":case"bottom":H=7-P}switch(d){case"top-right":case"bottom-right":case"right":O=-b;break;case"top-left":case"bottom-left":case"left":O=b}return[O,H]}(u,o[0],o[1]):function(d,b){let P=0,O=0;b<0&&(b=0);const H=b/Math.sqrt(2);switch(d){case"top-right":case"top-left":O=H-7;break;case"bottom-right":case"bottom-left":O=7-H;break;case"bottom":O=7-b;break;case"top":O=b-7}switch(d){case"top-right":case"bottom-right":P=-H;break;case"top-left":case"bottom-left":P=H;break;case"left":P=b;break;case"right":P=-b}return[P,O]}(u,o[0])}function wb(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function MR(u,o,d,b,P,O,H,ne,ue,we,Oe){let Ue=O.textMaxSize.evaluate(o,{});Ue===void 0&&(Ue=H);const qe=u.layers[0].layout,Ze=qe.get("icon-offset").evaluate(o,{},Oe),Ke=PT(d.horizontal),ut=H/24,lt=u.tilePixelRatio*ut,_t=u.tilePixelRatio*Ue/24,Dt=u.tilePixelRatio*ne,xt=u.tilePixelRatio*qe.get("symbol-spacing"),Pt=qe.get("text-padding")*u.tilePixelRatio,Ut=function(Gt,Ii,Ei,dr=1){const yn=Gt.get("icon-padding").evaluate(Ii,{},Ei),_n=yn&&yn.values;return[_n[0]*dr,_n[1]*dr,_n[2]*dr,_n[3]*dr]}(qe,o,Oe,u.tilePixelRatio),Ft=qe.get("text-max-angle")/180*Math.PI,yi=qe.get("text-rotation-alignment")!=="viewport"&&qe.get("symbol-placement")!=="point",_i=qe.get("icon-rotation-alignment")==="map"&&qe.get("symbol-placement")!=="point",ni=qe.get("symbol-placement"),Qt=xt/2,Yt=qe.get("icon-text-fit");let si;b&&Yt!=="none"&&(u.allowVerticalPlacement&&d.vertical&&(si=xT(b,d.vertical,Yt,qe.get("icon-text-fit-padding"),Ze,ut)),Ke&&(b=xT(b,Ke,Yt,qe.get("icon-text-fit-padding"),Ze,ut)));const ei=(Gt,Ii)=>{Ii.x<0||Ii.x>=ls||Ii.y<0||Ii.y>=ls||function(Ei,dr,yn,_n,cs,ko,Vs,ts,xs,Gs,ia,Fa,is,Hs,ra,Ea,Ba,$a,An,bs,gr,so,qs,na,Uo){const al=Ei.addToLineVertexArray(dr,yn);let ol,xc,Vo,Mo,Ua=0,bc=0,Qf=0,WT=0,Pb=-1,Db=-1;const wc={};let YT=es.exports(""),Rb=0,Lb=0;if(ts._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Rb,Lb]=ts.layout.get("text-offset").evaluate(gr,{},na).map(Va=>Va*Rs):(Rb=ts.layout.get("text-radial-offset").evaluate(gr,{},na)*Rs,Lb=bb),Ei.allowVerticalPlacement&&_n.vertical){const Va=ts.layout.get("text-rotate").evaluate(gr,{},na)+90;Vo=new Gy(xs,dr,Gs,ia,Fa,_n.vertical,is,Hs,ra,Va),Vs&&(Mo=new Gy(xs,dr,Gs,ia,Fa,Vs,Ba,$a,ra,Va))}if(cs){const Va=ts.layout.get("icon-rotate").evaluate(gr,{}),Ml=ts.layout.get("icon-text-fit")!=="none",Jf=kT(cs,Va,qs,Ml),em=Vs?kT(Vs,Va,qs,Ml):void 0;xc=new Gy(xs,dr,Gs,ia,Fa,cs,Ba,$a,!1,Va),Ua=4*Jf.length;const KT=Ei.iconSizeData;let Td=null;KT.kind==="source"?(Td=[vc*ts.layout.get("icon-size").evaluate(gr,{})],Td[0]>au&&M(`${Ei.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):KT.kind==="composite"&&(Td=[vc*so.compositeIconSizes[0].evaluate(gr,{},na),vc*so.compositeIconSizes[1].evaluate(gr,{},na)],(Td[0]>au||Td[1]>au)&&M(`${Ei.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ei.addSymbols(Ei.icon,Jf,Td,bs,An,gr,s.WritingMode.none,dr,al.lineStartIndex,al.lineLength,-1,na),Pb=Ei.icon.placedSymbolArray.length-1,em&&(bc=4*em.length,Ei.addSymbols(Ei.icon,em,Td,bs,An,gr,s.WritingMode.vertical,dr,al.lineStartIndex,al.lineLength,-1,na),Db=Ei.icon.placedSymbolArray.length-1)}const ZT=Object.keys(_n.horizontal);for(const Va of ZT){const Ml=_n.horizontal[Va];if(!ol){YT=es.exports(Ml.text);const em=ts.layout.get("text-rotate").evaluate(gr,{},na);ol=new Gy(xs,dr,Gs,ia,Fa,Ml,is,Hs,ra,em)}const Jf=Ml.positionedLines.length===1;if(Qf+=IT(Ei,dr,Ml,ko,ts,ra,gr,Ea,al,_n.vertical?s.WritingMode.horizontal:s.WritingMode.horizontalOnly,Jf?ZT:[Va],wc,Pb,so,na),Jf)break}_n.vertical&&(WT+=IT(Ei,dr,_n.vertical,ko,ts,ra,gr,Ea,al,s.WritingMode.vertical,["vertical"],wc,Db,so,na));const $R=ol?ol.boxStartIndex:Ei.collisionBoxArray.length,UR=ol?ol.boxEndIndex:Ei.collisionBoxArray.length,VR=Vo?Vo.boxStartIndex:Ei.collisionBoxArray.length,GR=Vo?Vo.boxEndIndex:Ei.collisionBoxArray.length,HR=xc?xc.boxStartIndex:Ei.collisionBoxArray.length,qR=xc?xc.boxEndIndex:Ei.collisionBoxArray.length,WR=Mo?Mo.boxStartIndex:Ei.collisionBoxArray.length,YR=Mo?Mo.boxEndIndex:Ei.collisionBoxArray.length;let ll=-1;const Zy=(Va,Ml)=>Va&&Va.circleDiameter?Math.max(Va.circleDiameter,Ml):Ml;ll=Zy(ol,ll),ll=Zy(Vo,ll),ll=Zy(xc,ll),ll=Zy(Mo,ll);const XT=ll>-1?1:0;XT&&(ll*=Uo/Rs),Ei.glyphOffsetArray.length>=ep.MAX_GLYPHS&&M("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),gr.sortKey!==void 0&&Ei.addToSortKeyRanges(Ei.symbolInstances.length,gr.sortKey),Ei.symbolInstances.emplaceBack(dr.x,dr.y,wc.right>=0?wc.right:-1,wc.center>=0?wc.center:-1,wc.left>=0?wc.left:-1,wc.vertical||-1,Pb,Db,YT,$R,UR,VR,GR,HR,qR,WR,YR,Gs,Qf,WT,Ua,bc,XT,0,is,Rb,Lb,ll)}(u,Ii,Gt,d,b,P,si,u.layers[0],u.collisionBoxArray,o.index,o.sourceLayerIndex,u.index,lt,[Pt,Pt,Pt,Pt],yi,ue,Dt,Ut,_i,Ze,o,O,we,Oe,H)};if(ni==="line")for(const Gt of ET(o.geometry,0,0,ls,ls)){const Ii=CR(Gt,xt,Ft,d.vertical||Ke,b,24,_t,u.overscaling,ls);for(const Ei of Ii){const dr=Ke;dr&&AR(u,dr.text,Qt,Ei)||ei(Gt,Ei)}}else if(ni==="line-center"){for(const Gt of o.geometry)if(Gt.length>1){const Ii=_R(Gt,Ft,d.vertical||Ke,b,24,_t);Ii&&ei(Gt,Ii)}}else if(o.type==="Polygon")for(const Gt of lb(o.geometry,0)){const Ii=ER(Gt,16);ei(Gt[0],new su(Ii.x,Ii.y,0))}else if(o.type==="LineString")for(const Gt of o.geometry)ei(Gt,new su(Gt[0].x,Gt[0].y,0));else if(o.type==="Point")for(const Gt of o.geometry)for(const Ii of Gt)ei([Ii],new su(Ii.x,Ii.y,0))}const au=32640;function IT(u,o,d,b,P,O,H,ne,ue,we,Oe,Ue,qe,Ze,Ke){const ut=function(Dt,xt,Pt,Ut,Ft,yi,_i,ni){const Qt=Ut.layout.get("text-rotate").evaluate(yi,{})*Math.PI/180,Yt=[];for(const si of xt.positionedLines)for(const ei of si.positionedGlyphs){if(!ei.rect)continue;const Gt=ei.rect||{};let Ii=4,Ei=!0,dr=1,yn=0;const _n=(Ft||ni)&&ei.vertical,cs=ei.metrics.advance*ei.scale/2;if(ni&&xt.verticalizable){const An=(ei.scale-1)*Rs,bs=(Rs-ei.metrics.width*ei.scale)/2;yn=si.lineOffset/2-(ei.imageName?-bs:An)}if(ei.imageName){const An=_i[ei.imageName];Ei=An.sdf,dr=An.pixelRatio,Ii=1/dr}const ko=Ft?[ei.x+cs,ei.y]:[0,0];let Vs=Ft?[0,0]:[ei.x+cs+Pt[0],ei.y+Pt[1]-yn],ts=[0,0];_n&&(ts=Vs,Vs=[0,0]);const xs=(ei.metrics.left-Ii)*ei.scale-cs+Vs[0],Gs=(-ei.metrics.top-Ii)*ei.scale+Vs[1],ia=xs+Gt.w*ei.scale/dr,Fa=Gs+Gt.h*ei.scale/dr,is=new G(xs,Gs),Hs=new G(ia,Gs),ra=new G(xs,Fa),Ea=new G(ia,Fa);if(_n){const An=new G(-cs,cs-jy),bs=-Math.PI/2,gr=12-cs,so=new G(22-gr,-(ei.imageName?gr:0)),qs=new G(...ts);is._rotateAround(bs,An)._add(so)._add(qs),Hs._rotateAround(bs,An)._add(so)._add(qs),ra._rotateAround(bs,An)._add(so)._add(qs),Ea._rotateAround(bs,An)._add(so)._add(qs)}if(Qt){const An=Math.sin(Qt),bs=Math.cos(Qt),gr=[bs,-An,An,bs];is._matMult(gr),Hs._matMult(gr),ra._matMult(gr),Ea._matMult(gr)}const Ba=new G(0,0),$a=new G(0,0);Yt.push({tl:is,tr:Hs,bl:ra,br:Ea,tex:Gt,writingMode:xt.writingMode,glyphOffset:ko,sectionIndex:ei.sectionIndex,isSDF:Ei,pixelOffsetTL:Ba,pixelOffsetBR:$a,minFontScaleX:0,minFontScaleY:0})}return Yt}(0,d,ne,P,O,H,b,u.allowVerticalPlacement),lt=u.textSizeData;let _t=null;lt.kind==="source"?(_t=[vc*P.layout.get("text-size").evaluate(H,{})],_t[0]>au&&M(`${u.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):lt.kind==="composite"&&(_t=[vc*Ze.compositeTextSizes[0].evaluate(H,{},Ke),vc*Ze.compositeTextSizes[1].evaluate(H,{},Ke)],(_t[0]>au||_t[1]>au)&&M(`${u.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),u.addSymbols(u.text,ut,_t,ne,O,H,we,o,ue.lineStartIndex,ue.lineLength,qe,Ke);for(const Dt of Oe)Ue[Dt]=u.text.placedSymbolArray.length-1;return 4*ut.length}function PT(u){for(const o in u)return u[o];return null}function AR(u,o,d,b){const P=u.compareText;if(o in P){const O=P[o];for(let H=O.length-1;H>=0;H--)if(b.dist(O[H])<d)return!0}else P[o]=[];return P[o].push(b),!1}const IR=ru.VectorTileFeature.types,PR=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Hy(u,o,d,b,P,O,H,ne,ue,we,Oe,Ue,qe){const Ze=ne?Math.min(au,Math.round(ne[0])):0,Ke=ne?Math.min(au,Math.round(ne[1])):0;u.emplaceBack(o,d,Math.round(32*b),Math.round(32*P),O,H,(Ze<<1)+(ue?1:0),Ke,16*we,16*Oe,256*Ue,256*qe)}function _b(u,o,d){u.emplaceBack(o.x,o.y,d),u.emplaceBack(o.x,o.y,d),u.emplaceBack(o.x,o.y,d),u.emplaceBack(o.x,o.y,d)}function DR(u){for(const o of u.sections)if(Yx(o.text))return!0;return!1}class Cb{constructor(o){this.layoutVertexArray=new ja,this.indexArray=new Ds,this.programConfigurations=o,this.segments=new Ir,this.dynamicLayoutVertexArray=new $o,this.opacityVertexArray=new wo,this.placedSymbolArray=new jt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,d,b,P){this.isEmpty()||(b&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,tR.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,iR.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,PR,!0),this.opacityVertexBuffer.itemSize=1),(b||P)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}hi("SymbolBuffers",Cb);class Tb{constructor(o,d,b){this.layoutVertexArray=new o,this.layoutAttributes=d,this.indexArray=new b,this.segments=new Ir,this.collisionVertexArray=new fc}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,rR.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}hi("CollisionBuffers",Tb);class ep{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(H=>H.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ib([]),this.placementViewportMatrix=ib([]);const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=bT(this.zoom,d["text-size"]),this.iconSizeData=bT(this.zoom,d["icon-size"]);const b=this.layers[0].layout,P=b.get("symbol-sort-key"),O=b.get("symbol-z-order");this.canOverlap=Eb(b,"text-overlap","text-allow-overlap")!=="never"||Eb(b,"icon-overlap","icon-allow-overlap")!=="never"||b.get("text-ignore-placement")||b.get("icon-ignore-placement"),this.sortFeaturesByKey=O!=="viewport-y"&&!P.isConstant(),this.sortFeaturesByY=(O==="viewport-y"||O==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,b.get("symbol-placement")==="point"&&(this.writingModes=b.get("text-writing-mode").map(H=>s.WritingMode[H])),this.stateDependentLayerIds=this.layers.filter(H=>H.isStateDependent()).map(H=>H.id),this.sourceID=o.sourceID}createArrays(){this.text=new Cb(new xd(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new Cb(new xd(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new li,this.lineVertexArray=new Kt,this.symbolInstances=new Lt}calculateGlyphDependencies(o,d,b,P,O){for(let H=0;H<o.length;H++)if(d[o.charCodeAt(H)]=!0,(b||P)&&O){const ne=Yf[o.charAt(H)];ne&&(d[ne.charCodeAt(0)]=!0)}}populate(o,d,b){const P=this.layers[0],O=P.layout,H=O.get("text-font"),ne=O.get("text-field"),ue=O.get("icon-image"),we=(ne.value.kind!=="constant"||ne.value.value instanceof ct&&!ne.value.value.isEmpty()||ne.value.value.toString().length>0)&&(H.value.kind!=="constant"||H.value.value.length>0),Oe=ue.value.kind!=="constant"||!!ue.value.value||Object.keys(ue.parameters).length>0,Ue=O.get("symbol-sort-key");if(this.features=[],!we&&!Oe)return;const qe=d.iconDependencies,Ze=d.glyphDependencies,Ke=d.availableImages,ut=new bn(this.zoom);for(const{feature:lt,id:_t,index:Dt,sourceLayerIndex:xt}of o){const Pt=P._featureFilter.needGeometry,Ut=wd(lt,Pt);if(!P._featureFilter.filter(ut,Ut,b))continue;let Ft,yi;if(Pt||(Ut.geometry=bd(lt)),we){const ni=P.getValueAndResolveTokens("text-field",Ut,b,Ke),Qt=ct.factory(ni);DR(Qt)&&(this.hasRTLText=!0),(!this.hasRTLText||Lf()==="unavailable"||this.hasRTLText&&ro.isParsed())&&(Ft=sR(Qt,P,Ut))}if(Oe){const ni=P.getValueAndResolveTokens("icon-image",Ut,b,Ke);yi=ni instanceof nt?ni:nt.fromString(ni)}if(!Ft&&!yi)continue;const _i=this.sortFeaturesByKey?Ue.evaluate(Ut,{},b):void 0;if(this.features.push({id:_t,text:Ft,icon:yi,index:Dt,sourceLayerIndex:xt,geometry:Ut.geometry,properties:lt.properties,type:IR[lt.type],sortKey:_i}),yi&&(qe[yi.name]=!0),Ft){const ni=H.evaluate(Ut,{},b).join(","),Qt=O.get("text-rotation-alignment")!=="viewport"&&O.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.WritingMode.vertical)>=0;for(const Yt of Ft.sections)if(Yt.image)qe[Yt.image.name]=!0;else{const si=Af(Ft.toString()),ei=Yt.fontStack||ni,Gt=Ze[ei]=Ze[ei]||{};this.calculateGlyphDependencies(Yt.text,Gt,Qt,this.allowVerticalPlacement,si)}}}O.get("symbol-placement")==="line"&&(this.features=function(lt){const _t={},Dt={},xt=[];let Pt=0;function Ut(ni){xt.push(lt[ni]),Pt++}function Ft(ni,Qt,Yt){const si=Dt[ni];return delete Dt[ni],Dt[Qt]=si,xt[si].geometry[0].pop(),xt[si].geometry[0]=xt[si].geometry[0].concat(Yt[0]),si}function yi(ni,Qt,Yt){const si=_t[Qt];return delete _t[Qt],_t[ni]=si,xt[si].geometry[0].shift(),xt[si].geometry[0]=Yt[0].concat(xt[si].geometry[0]),si}function _i(ni,Qt,Yt){const si=Yt?Qt[0][Qt[0].length-1]:Qt[0][0];return`${ni}:${si.x}:${si.y}`}for(let ni=0;ni<lt.length;ni++){const Qt=lt[ni],Yt=Qt.geometry,si=Qt.text?Qt.text.toString():null;if(!si){Ut(ni);continue}const ei=_i(si,Yt),Gt=_i(si,Yt,!0);if(ei in Dt&&Gt in _t&&Dt[ei]!==_t[Gt]){const Ii=yi(ei,Gt,Yt),Ei=Ft(ei,Gt,xt[Ii].geometry);delete _t[ei],delete Dt[Gt],Dt[_i(si,xt[Ei].geometry,!0)]=Ei,xt[Ii].geometry=null}else ei in Dt?Ft(ei,Gt,Yt):Gt in _t?yi(ei,Gt,Yt):(Ut(ni),_t[ei]=Pt-1,Dt[Gt]=Pt-1)}return xt.filter(ni=>ni.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((lt,_t)=>lt.sortKey-_t.sortKey)}update(o,d,b){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,d,this.layers,b),this.icon.programConfigurations.updatePaintArrays(o,d,this.layers,b))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,d){const b=this.lineVertexArray.length;if(o.segment!==void 0){let P=o.dist(d[o.segment+1]),O=o.dist(d[o.segment]);const H={};for(let ne=o.segment+1;ne<d.length;ne++)H[ne]={x:d[ne].x,y:d[ne].y,tileUnitDistanceFromAnchor:P},ne<d.length-1&&(P+=d[ne+1].dist(d[ne]));for(let ne=o.segment||0;ne>=0;ne--)H[ne]={x:d[ne].x,y:d[ne].y,tileUnitDistanceFromAnchor:O},ne>0&&(O+=d[ne-1].dist(d[ne]));for(let ne=0;ne<d.length;ne++){const ue=H[ne];this.lineVertexArray.emplaceBack(ue.x,ue.y,ue.tileUnitDistanceFromAnchor)}}return{lineStartIndex:b,lineLength:this.lineVertexArray.length-b}}addSymbols(o,d,b,P,O,H,ne,ue,we,Oe,Ue,qe){const Ze=o.indexArray,Ke=o.layoutVertexArray,ut=o.segments.prepareSegment(4*d.length,Ke,Ze,this.canOverlap?H.sortKey:void 0),lt=this.glyphOffsetArray.length,_t=ut.vertexLength,Dt=this.allowVerticalPlacement&&ne===s.WritingMode.vertical?Math.PI/2:0,xt=H.text&&H.text.sections;for(let Pt=0;Pt<d.length;Pt++){const{tl:Ut,tr:Ft,bl:yi,br:_i,tex:ni,pixelOffsetTL:Qt,pixelOffsetBR:Yt,minFontScaleX:si,minFontScaleY:ei,glyphOffset:Gt,isSDF:Ii,sectionIndex:Ei}=d[Pt],dr=ut.vertexLength,yn=Gt[1];Hy(Ke,ue.x,ue.y,Ut.x,yn+Ut.y,ni.x,ni.y,b,Ii,Qt.x,Qt.y,si,ei),Hy(Ke,ue.x,ue.y,Ft.x,yn+Ft.y,ni.x+ni.w,ni.y,b,Ii,Yt.x,Qt.y,si,ei),Hy(Ke,ue.x,ue.y,yi.x,yn+yi.y,ni.x,ni.y+ni.h,b,Ii,Qt.x,Yt.y,si,ei),Hy(Ke,ue.x,ue.y,_i.x,yn+_i.y,ni.x+ni.w,ni.y+ni.h,b,Ii,Yt.x,Yt.y,si,ei),_b(o.dynamicLayoutVertexArray,ue,Dt),Ze.emplaceBack(dr,dr+1,dr+2),Ze.emplaceBack(dr+1,dr+2,dr+3),ut.vertexLength+=4,ut.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Gt[0]),Pt!==d.length-1&&Ei===d[Pt+1].sectionIndex||o.programConfigurations.populatePaintArrays(Ke.length,H,H.index,{},qe,xt&&xt[Ei])}o.placedSymbolArray.emplaceBack(ue.x,ue.y,lt,this.glyphOffsetArray.length-lt,_t,we,Oe,ue.segment,b?b[0]:0,b?b[1]:0,P[0],P[1],ne,0,!1,0,Ue)}_addCollisionDebugVertex(o,d,b,P,O,H){return d.emplaceBack(0,0),o.emplaceBack(b.x,b.y,P,O,Math.round(H.x),Math.round(H.y))}addCollisionDebugVertices(o,d,b,P,O,H,ne){const ue=O.segments.prepareSegment(4,O.layoutVertexArray,O.indexArray),we=ue.vertexLength,Oe=O.layoutVertexArray,Ue=O.collisionVertexArray,qe=ne.anchorX,Ze=ne.anchorY;this._addCollisionDebugVertex(Oe,Ue,H,qe,Ze,new G(o,d)),this._addCollisionDebugVertex(Oe,Ue,H,qe,Ze,new G(b,d)),this._addCollisionDebugVertex(Oe,Ue,H,qe,Ze,new G(b,P)),this._addCollisionDebugVertex(Oe,Ue,H,qe,Ze,new G(o,P)),ue.vertexLength+=4;const Ke=O.indexArray;Ke.emplaceBack(we,we+1),Ke.emplaceBack(we+1,we+2),Ke.emplaceBack(we+2,we+3),Ke.emplaceBack(we+3,we),ue.primitiveLength+=4}addDebugCollisionBoxes(o,d,b,P){for(let O=o;O<d;O++){const H=this.collisionBoxArray.get(O);this.addCollisionDebugVertices(H.x1,H.y1,H.x2,H.y2,P?this.textCollisionBox:this.iconCollisionBox,H.anchorPoint,b)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Tb(_o,aT.members,Co),this.iconCollisionBox=new Tb(_o,aT.members,Co);for(let o=0;o<this.symbolInstances.length;o++){const d=this.symbolInstances.get(o);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(o,d,b,P,O,H,ne,ue,we){const Oe={};for(let Ue=d;Ue<b;Ue++){const qe=o.get(Ue);Oe.textBox={x1:qe.x1,y1:qe.y1,x2:qe.x2,y2:qe.y2,anchorPointX:qe.anchorPointX,anchorPointY:qe.anchorPointY},Oe.textFeatureIndex=qe.featureIndex;break}for(let Ue=P;Ue<O;Ue++){const qe=o.get(Ue);Oe.verticalTextBox={x1:qe.x1,y1:qe.y1,x2:qe.x2,y2:qe.y2,anchorPointX:qe.anchorPointX,anchorPointY:qe.anchorPointY},Oe.verticalTextFeatureIndex=qe.featureIndex;break}for(let Ue=H;Ue<ne;Ue++){const qe=o.get(Ue);Oe.iconBox={x1:qe.x1,y1:qe.y1,x2:qe.x2,y2:qe.y2,anchorPointX:qe.anchorPointX,anchorPointY:qe.anchorPointY},Oe.iconFeatureIndex=qe.featureIndex;break}for(let Ue=ue;Ue<we;Ue++){const qe=o.get(Ue);Oe.verticalIconBox={x1:qe.x1,y1:qe.y1,x2:qe.x2,y2:qe.y2,anchorPointX:qe.anchorPointX,anchorPointY:qe.anchorPointY},Oe.verticalIconFeatureIndex=qe.featureIndex;break}return Oe}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const b=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,b.textBoxStartIndex,b.textBoxEndIndex,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b.iconBoxStartIndex,b.iconBoxEndIndex,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,d){const b=o.placedSymbolArray.get(d),P=b.vertexStartIndex+4*b.numGlyphs;for(let O=b.vertexStartIndex;O<P;O+=4)o.indexArray.emplaceBack(O,O+1,O+2),o.indexArray.emplaceBack(O+1,O+2,O+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(o),b=Math.cos(o),P=[],O=[],H=[];for(let ne=0;ne<this.symbolInstances.length;++ne){H.push(ne);const ue=this.symbolInstances.get(ne);P.push(0|Math.round(d*ue.anchorX+b*ue.anchorY)),O.push(ue.featureIndex)}return H.sort((ne,ue)=>P[ne]-P[ue]||O[ue]-O[ne]),H}addToSortKeyRanges(o,d){const b=this.sortKeyRanges[this.sortKeyRanges.length-1];b&&b.sortKey===d?b.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const b=this.symbolInstances.get(d);this.featureSortOrder.push(b.featureIndex),[b.rightJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.leftJustifiedTextSymbolIndex].forEach((P,O,H)=>{P>=0&&H.indexOf(P)===O&&this.addIndicesForPlacedSymbol(this.text,P)}),b.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,b.verticalPlacedTextSymbolIndex),b.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,b.placedIconSymbolIndex),b.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,b.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}hi("SymbolBucket",ep,{omit:["layers","collisionBoxArray","features","compareText"]}),ep.MAX_GLYPHS=65535,ep.addDynamicAttributes=_b;const RR=new os({"symbol-placement":new Si(je.layout_symbol["symbol-placement"]),"symbol-spacing":new Si(je.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Si(je.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Li(je.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Si(je.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Si(je.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Si(je.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Si(je.layout_symbol["icon-ignore-placement"]),"icon-optional":new Si(je.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Si(je.layout_symbol["icon-rotation-alignment"]),"icon-size":new Li(je.layout_symbol["icon-size"]),"icon-text-fit":new Si(je.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Si(je.layout_symbol["icon-text-fit-padding"]),"icon-image":new Li(je.layout_symbol["icon-image"]),"icon-rotate":new Li(je.layout_symbol["icon-rotate"]),"icon-padding":new Li(je.layout_symbol["icon-padding"]),"icon-keep-upright":new Si(je.layout_symbol["icon-keep-upright"]),"icon-offset":new Li(je.layout_symbol["icon-offset"]),"icon-anchor":new Li(je.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Si(je.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Si(je.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Si(je.layout_symbol["text-rotation-alignment"]),"text-field":new Li(je.layout_symbol["text-field"]),"text-font":new Li(je.layout_symbol["text-font"]),"text-size":new Li(je.layout_symbol["text-size"]),"text-max-width":new Li(je.layout_symbol["text-max-width"]),"text-line-height":new Si(je.layout_symbol["text-line-height"]),"text-letter-spacing":new Li(je.layout_symbol["text-letter-spacing"]),"text-justify":new Li(je.layout_symbol["text-justify"]),"text-radial-offset":new Li(je.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Si(je.layout_symbol["text-variable-anchor"]),"text-anchor":new Li(je.layout_symbol["text-anchor"]),"text-max-angle":new Si(je.layout_symbol["text-max-angle"]),"text-writing-mode":new Si(je.layout_symbol["text-writing-mode"]),"text-rotate":new Li(je.layout_symbol["text-rotate"]),"text-padding":new Si(je.layout_symbol["text-padding"]),"text-keep-upright":new Si(je.layout_symbol["text-keep-upright"]),"text-transform":new Li(je.layout_symbol["text-transform"]),"text-offset":new Li(je.layout_symbol["text-offset"]),"text-allow-overlap":new Si(je.layout_symbol["text-allow-overlap"]),"text-overlap":new Si(je.layout_symbol["text-overlap"]),"text-ignore-placement":new Si(je.layout_symbol["text-ignore-placement"]),"text-optional":new Si(je.layout_symbol["text-optional"])});var Sb={paint:new os({"icon-opacity":new Li(je.paint_symbol["icon-opacity"]),"icon-color":new Li(je.paint_symbol["icon-color"]),"icon-halo-color":new Li(je.paint_symbol["icon-halo-color"]),"icon-halo-width":new Li(je.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Li(je.paint_symbol["icon-halo-blur"]),"icon-translate":new Si(je.paint_symbol["icon-translate"]),"icon-translate-anchor":new Si(je.paint_symbol["icon-translate-anchor"]),"text-opacity":new Li(je.paint_symbol["text-opacity"]),"text-color":new Li(je.paint_symbol["text-color"],{runtimeType:ii,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new Li(je.paint_symbol["text-halo-color"]),"text-halo-width":new Li(je.paint_symbol["text-halo-width"]),"text-halo-blur":new Li(je.paint_symbol["text-halo-blur"]),"text-translate":new Si(je.paint_symbol["text-translate"]),"text-translate-anchor":new Si(je.paint_symbol["text-translate-anchor"])}),layout:RR};class DT{constructor(o){if(o.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=o.property.overrides?o.property.overrides.runtimeType:Nt,this.defaultValue=o}evaluate(o){if(o.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(o.formattedSection))return d.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}hi("FormatSectionOverride",DT,{omit:["defaultValue"]});class qy extends _a{constructor(o){super(o,Sb)}recalculate(o,d){if(super.recalculate(o,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const b=this.layout.get("text-writing-mode");if(b){const P=[];for(const O of b)P.indexOf(O)<0&&P.push(O);this.layout._values["text-writing-mode"]=P}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(o,d,b,P){const O=this.layout.get(o).evaluate(d,{},b,P),H=this._unevaluatedLayout._values[o];return H.isDataDriven()||rd(H.value)||!O?O:function(ne,ue){return ue.replace(/{([^{}]+)}/g,(we,Oe)=>Oe in ne?String(ne[Oe]):"")}(d.properties,O)}createBucket(o){return new ep(o)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const o of Sb.paint.overridableProperties){if(!qy.hasPaintOverride(this.layout,o))continue;const d=this.paint.get(o),b=new DT(d),P=new Cf(b,d.property.specification);let O=null;O=d.value.kind==="constant"||d.value.kind==="source"?new kh("source",P):new sd("composite",P,d.value.zoomStops),this.paint._values[o]=new Bo(d.property,O,d.parameters)}}_handleOverridablePaintPropertyUpdate(o,d,b){return!(!this.layout||d.isDataDriven()||b.isDataDriven())&&qy.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,d){const b=o.get("text-field"),P=Sb.paint.properties[d];let O=!1;const H=ne=>{for(const ue of ne)if(P.overrides&&P.overrides.hasOverride(ue))return void(O=!0)};if(b.value.kind==="constant"&&b.value.value instanceof ct)H(b.value.value.sections);else if(b.value.kind==="source"){const ne=we=>{O||(we instanceof ci&&zt(we.value)===nr?H(we.value.sections):we instanceof Eh?H(we.sections):we.eachChild(ne))},ue=b.value;ue._styleExpression&&ne(ue._styleExpression.expression)}return O}}function Eb(u,o,d){let b="never";const P=u.get(o);return P?b=P:u.get(d)&&(b="always"),b}var LR={paint:new os({"background-color":new Si(je.paint_background["background-color"]),"background-pattern":new md(je.paint_background["background-pattern"]),"background-opacity":new Si(je.paint_background["background-opacity"])})},NR={paint:new os({"raster-opacity":new Si(je.paint_raster["raster-opacity"]),"raster-hue-rotate":new Si(je.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Si(je.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Si(je.paint_raster["raster-brightness-max"]),"raster-saturation":new Si(je.paint_raster["raster-saturation"]),"raster-contrast":new Si(je.paint_raster["raster-contrast"]),"raster-resampling":new Si(je.paint_raster["raster-resampling"]),"raster-fade-duration":new Si(je.paint_raster["raster-fade-duration"])})};class zR extends _a{constructor(o){super(o,{}),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const OR={circle:class extends _a{constructor(u){super(u,f5)}createBucket(u){return new Jx(u)}queryRadius(u){const o=u;return Ff("circle-radius",this,o)+Ff("circle-stroke-width",this,o)+Ay(this.paint.get("circle-translate"))}queryIntersectsFeature(u,o,d,b,P,O,H,ne){const ue=Iy(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),O.angle,H),we=this.paint.get("circle-radius").evaluate(o,d)+this.paint.get("circle-stroke-width").evaluate(o,d),Oe=this.paint.get("circle-pitch-alignment")==="map",Ue=Oe?ue:function(Ze,Ke){return Ze.map(ut=>VC(ut,Ke))}(ue,ne),qe=Oe?we*H:we;for(const Ze of b)for(const Ke of Ze){const ut=Oe?Ke:VC(Ke,ne);let lt=qe;const _t=Py([],[Ke.x,Ke.y,0,1],ne);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?lt*=_t[3]/O.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(lt*=O.cameraToCenterDistance/_t[3]),c5(Ue,ut,lt))return!0}return!1}},heatmap:class extends _a{constructor(u){super(u,g5),this._updateColorRamp()}createBucket(u){return new GC(u)}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=qC({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends _a{constructor(u){super(u,y5)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends _a{constructor(u){super(u,R5)}recalculate(u,o){super.recalculate(u,o);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new db(u)}queryRadius(){return Ay(this.paint.get("fill-translate"))}queryIntersectsFeature(u,o,d,b,P,O,H){return NC(Iy(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),O.angle,H),b)}isTileClipped(){return!0}},"fill-extrusion":class extends _a{constructor(u){super(u,W5)}createBucket(u){return new pb(u)}queryRadius(){return Ay(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(u,o,d,b,P,O,H,ne){const ue=Iy(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),O.angle,H),we=this.paint.get("fill-extrusion-height").evaluate(o,d),Oe=this.paint.get("fill-extrusion-base").evaluate(o,d),Ue=function(Ze,Ke,ut,lt){const _t=[];for(const Dt of Ze){const xt=[Dt.x,Dt.y,0,1];Py(xt,xt,Ke),_t.push(new G(xt[0]/xt[3],xt[1]/xt[3]))}return _t}(ue,ne),qe=function(Ze,Ke,ut,lt){const _t=[],Dt=[],xt=lt[8]*Ke,Pt=lt[9]*Ke,Ut=lt[10]*Ke,Ft=lt[11]*Ke,yi=lt[8]*ut,_i=lt[9]*ut,ni=lt[10]*ut,Qt=lt[11]*ut;for(const Yt of Ze){const si=[],ei=[];for(const Gt of Yt){const Ii=Gt.x,Ei=Gt.y,dr=lt[0]*Ii+lt[4]*Ei+lt[12],yn=lt[1]*Ii+lt[5]*Ei+lt[13],_n=lt[2]*Ii+lt[6]*Ei+lt[14],cs=lt[3]*Ii+lt[7]*Ei+lt[15],ko=_n+Ut,Vs=cs+Ft,ts=dr+yi,xs=yn+_i,Gs=_n+ni,ia=cs+Qt,Fa=new G((dr+xt)/Vs,(yn+Pt)/Vs);Fa.z=ko/Vs,si.push(Fa);const is=new G(ts/ia,xs/ia);is.z=Gs/ia,ei.push(is)}_t.push(si),Dt.push(ei)}return[_t,Dt]}(b,Oe,we,ne);return function(Ze,Ke,ut){let lt=1/0;NC(ut,Ke)&&(lt=tT(ut,Ke[0]));for(let _t=0;_t<Ke.length;_t++){const Dt=Ke[_t],xt=Ze[_t];for(let Pt=0;Pt<Dt.length-1;Pt++){const Ut=Dt[Pt],Ft=[Ut,Dt[Pt+1],xt[Pt+1],xt[Pt],Ut];LC(ut,Ft)&&(lt=Math.min(lt,tT(ut,Ft)))}}return lt!==1/0&&lt}(qe[0],qe[1],Ue)}},line:class extends _a{constructor(u){super(u,rT),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(u){u==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ju,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,o){super.recalculate(u,o),this.paint._values["line-floorwidth"]=nT.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new fb(u)}queryRadius(u){const o=u,d=sT(Ff("line-width",this,o),Ff("line-gap-width",this,o)),b=Ff("line-offset",this,o);return d/2+Math.abs(b)+Ay(this.paint.get("line-translate"))}queryIntersectsFeature(u,o,d,b,P,O,H){const ne=Iy(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),O.angle,H),ue=H/2*sT(this.paint.get("line-width").evaluate(o,d),this.paint.get("line-gap-width").evaluate(o,d)),we=this.paint.get("line-offset").evaluate(o,d);return we&&(b=function(Oe,Ue){const qe=[];for(let Ze=0;Ze<Oe.length;Ze++){const Ke=Oe[Ze],ut=[];for(let lt=0;lt<Ke.length;lt++){const _t=Ke[lt-1],Dt=Ke[lt],xt=Ke[lt+1],Pt=lt===0?new G(0,0):Dt.sub(_t)._unit()._perp(),Ut=lt===Ke.length-1?new G(0,0):xt.sub(Dt)._unit()._perp(),Ft=Pt._add(Ut)._unit(),yi=Ft.x*Ut.x+Ft.y*Ut.y;yi!==0&&Ft._mult(1/yi),ut.push(Ft._mult(Ue)._add(Dt))}qe.push(ut)}return qe}(b,we*H)),function(Oe,Ue,qe){for(let Ze=0;Ze<Ue.length;Ze++){const Ke=Ue[Ze];if(Oe.length>=3){for(let ut=0;ut<Ke.length;ut++)if(Wh(Oe,Ke[ut]))return!0}if(u5(Oe,Ke,qe))return!0}return!1}(ne,b,ue)}isTileClipped(){return!0}},symbol:qy,background:class extends _a{constructor(u){super(u,LR)}},raster:class extends _a{constructor(u){super(u,NR)}}};class jR{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const RT=63710088e-1;class On{constructor(o,d){if(isNaN(o)||isNaN(d))throw new Error(`Invalid LngLat object: (${o}, ${d})`);if(this.lng=+o,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new On(x(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const d=Math.PI/180,b=this.lat*d,P=o.lat*d,O=Math.sin(b)*Math.sin(P)+Math.cos(b)*Math.cos(P)*Math.cos((o.lng-this.lng)*d);return RT*Math.acos(Math.min(O,1))}toBounds(o=0){const d=360*o/40075017,b=d/Math.cos(Math.PI/180*this.lat);return new Cd(new On(this.lng-b,this.lat-d),new On(this.lng+b,this.lat+d))}static convert(o){if(o instanceof On)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new On(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new On(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Cd{constructor(o,d){o&&(d?this.setSouthWest(o).setNorthEast(d):o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))}setNorthEast(o){return this._ne=o instanceof On?new On(o.lng,o.lat):On.convert(o),this}setSouthWest(o){return this._sw=o instanceof On?new On(o.lng,o.lat):On.convert(o),this}extend(o){const d=this._sw,b=this._ne;let P,O;if(o instanceof On)P=o,O=o;else{if(!(o instanceof Cd))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(Cd.convert(o)):this.extend(On.convert(o)):this;if(P=o._sw,O=o._ne,!P||!O)return this}return d||b?(d.lng=Math.min(P.lng,d.lng),d.lat=Math.min(P.lat,d.lat),b.lng=Math.max(O.lng,b.lng),b.lat=Math.max(O.lat,b.lat)):(this._sw=new On(P.lng,P.lat),this._ne=new On(O.lng,O.lat)),this}getCenter(){return new On((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new On(this.getWest(),this.getNorth())}getSouthEast(){return new On(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:d,lat:b}=On.convert(o);let P=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(P=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=b&&b<=this._ne.lat&&P}static convert(o){return o instanceof Cd?o:o&&new Cd(o)}}const LT=2*Math.PI*RT;function NT(u){return LT*Math.cos(u*Math.PI/180)}function zT(u){return(180+u)/360}function OT(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function jT(u,o){return u/NT(o)}function kb(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}class Wy{constructor(o,d,b=0){this.x=+o,this.y=+d,this.z=+b}static fromLngLat(o,d=0){const b=On.convert(o);return new Wy(zT(b.lng),OT(b.lat),jT(d,b.lat))}toLngLat(){return new On(360*this.x-180,kb(this.y))}toAltitude(){return this.z*NT(kb(this.y))}meterInMercatorCoordinateUnits(){return 1/LT*(o=kb(this.y),1/Math.cos(o*Math.PI/180));var o}}function FT(u,o,d){var b=2*Math.PI*6378137/256/Math.pow(2,d);return[u*b-2*Math.PI*6378137/2,o*b-2*Math.PI*6378137/2]}class Mb{constructor(o,d,b){if(o<0||o>25||b<0||b>=Math.pow(2,o)||d<0||d>=Math.pow(2,o))throw new Error(`x=${d}, y=${b}, z=${o} outside of bounds. 0<=x<${Math.pow(2,o)}, 0<=y<${Math.pow(2,o)} 0<=z<=25 `);this.z=o,this.x=d,this.y=b,this.key=Xf(0,o,o,d,b)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,d,b){const P=(H=this.y,ne=this.z,ue=FT(256*(O=this.x),256*(H=Math.pow(2,ne)-H-1),ne),we=FT(256*(O+1),256*(H+1),ne),ue[0]+","+ue[1]+","+we[0]+","+we[1]);var O,H,ne,ue,we;const Oe=function(Ue,qe,Ze){let Ke,ut="";for(let lt=Ue;lt>0;lt--)Ke=1<<lt-1,ut+=(qe&Ke?1:0)+(Ze&Ke?2:0);return ut}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(b==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,Oe).replace(/{bbox-epsg-3857}/g,P)}isChildOf(o){const d=this.z-o.z;return d>0&&o.x===this.x>>d&&o.y===this.y>>d}getTilePoint(o){const d=Math.pow(2,this.z);return new G((o.x*d-this.x)*ls,(o.y*d-this.y)*ls)}toString(){return`${this.z}/${this.x}/${this.y}`}}class BT{constructor(o,d){this.wrap=o,this.canonical=d,this.key=Xf(o,d.z,d.z,d.x,d.y)}}class Eo{constructor(o,d,b,P,O){if(o<b)throw new Error(`overscaledZ should be >= z; overscaledZ = ${o}; z = ${b}`);this.overscaledZ=o,this.wrap=d,this.canonical=new Mb(b,+P,+O),this.key=Xf(d,o,b,P,O)}clone(){return new Eo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-o;return o>this.canonical.z?new Eo(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Eo(o,this.wrap,o,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(o,d){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const b=this.canonical.z-o;return o>this.canonical.z?Xf(this.wrap*+d,o,this.canonical.z,this.canonical.x,this.canonical.y):Xf(this.wrap*+d,o,o,this.canonical.x>>b,this.canonical.y>>b)}isChildOf(o){if(o.wrap!==this.wrap)return!1;const d=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>d&&o.canonical.y===this.canonical.y>>d}children(o){if(this.overscaledZ>=o)return[new Eo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,b=2*this.canonical.x,P=2*this.canonical.y;return[new Eo(d,this.wrap,d,b,P),new Eo(d,this.wrap,d,b+1,P),new Eo(d,this.wrap,d,b,P+1),new Eo(d,this.wrap,d,b+1,P+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Eo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Eo(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new BT(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(o){return this.canonical.getTilePoint(new Wy(o.x-this.wrap,o.y))}}function Xf(u,o,d,b,P){(u*=2)<0&&(u=-1*u-1);const O=1<<d;return(O*O*u+O*P+b).toString(36)+d.toString(36)+o.toString(36)}hi("CanonicalTileID",Mb),hi("OverscaledTileID",Eo,{omit:["posMatrix"]});class $T{constructor(o,d,b){if(this.uid=o,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(b&&b!=="mapbox"&&b!=="terrarium")return void M(`"${b}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=d.height;const P=this.dim=d.height-2;this.data=new Uint32Array(d.data.buffer),this.encoding=b||"mapbox";for(let O=0;O<P;O++)this.data[this._idx(-1,O)]=this.data[this._idx(0,O)],this.data[this._idx(P,O)]=this.data[this._idx(P-1,O)],this.data[this._idx(O,-1)]=this.data[this._idx(O,0)],this.data[this._idx(O,P)]=this.data[this._idx(O,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let O=0;O<P;O++)for(let H=0;H<P;H++){const ne=this.get(O,H);ne>this.max&&(this.max=ne),ne<this.min&&(this.min=ne)}}get(o,d){const b=new Uint8Array(this.data.buffer),P=4*this._idx(o,d);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(b[P],b[P+1],b[P+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(o,d){if(o<-1||o>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(o+1)}_unpackMapbox(o,d,b){return(256*o*256+256*d+b)/10-1e4}_unpackTerrarium(o,d,b){return 256*o+d+b/256-32768}getPixels(){return new So({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(o,d,b){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let P=d*this.dim,O=d*this.dim+this.dim,H=b*this.dim,ne=b*this.dim+this.dim;switch(d){case-1:P=O-1;break;case 1:O=P+1}switch(b){case-1:H=ne-1;break;case 1:ne=H+1}const ue=-d*this.dim,we=-b*this.dim;for(let Oe=H;Oe<ne;Oe++)for(let Ue=P;Ue<O;Ue++)this.data[this._idx(Ue,Oe)]=o.data[this._idx(Ue+ue,Oe+we)]}}hi("DEMData",$T);class UT{constructor(o){this._stringToNumber={},this._numberToString=[];for(let d=0;d<o.length;d++){const b=o[d];this._stringToNumber[b]=d,this._numberToString[d]=b}}encode(o){return this._stringToNumber[o]}decode(o){if(o>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${o} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[o]}}class VT{constructor(o,d,b,P,O){this.type="Feature",this._vectorTileFeature=o,o._z=d,o._x=b,o._y=P,this.properties=o.properties,this.id=O}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(o[d]=this[d]);return o}}class GT{constructor(o,d){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new dc(ls,16,0),this.grid3D=new dc(ls,16,0),this.featureIndexArray=new tr,this.promoteId=d}insert(o,d,b,P,O,H){const ne=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(b,P,O);const ue=H?this.grid3D:this.grid;for(let we=0;we<d.length;we++){const Oe=d[we],Ue=[1/0,1/0,-1/0,-1/0];for(let qe=0;qe<Oe.length;qe++){const Ze=Oe[qe];Ue[0]=Math.min(Ue[0],Ze.x),Ue[1]=Math.min(Ue[1],Ze.y),Ue[2]=Math.max(Ue[2],Ze.x),Ue[3]=Math.max(Ue[3],Ze.y)}Ue[0]<ls&&Ue[1]<ls&&Ue[2]>=0&&Ue[3]>=0&&ue.insert(ne,Ue[0],Ue[1],Ue[2],Ue[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ru.VectorTile(new mb(this.rawTileData)).layers,this.sourceLayerCoder=new UT(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(o,d,b,P){this.loadVTLayers();const O=o.params||{},H=ls/o.tileSize/o.scale,ne=Sf(O.filter),ue=o.queryGeometry,we=o.queryPadding*H,Oe=qT(ue),Ue=this.grid.query(Oe.minX-we,Oe.minY-we,Oe.maxX+we,Oe.maxY+we),qe=qT(o.cameraQueryGeometry),Ze=this.grid3D.query(qe.minX-we,qe.minY-we,qe.maxX+we,qe.maxY+we,(lt,_t,Dt,xt)=>function(Pt,Ut,Ft,yi,_i){for(const Qt of Pt)if(Ut<=Qt.x&&Ft<=Qt.y&&yi>=Qt.x&&_i>=Qt.y)return!0;const ni=[new G(Ut,Ft),new G(Ut,_i),new G(yi,_i),new G(yi,Ft)];if(Pt.length>2){for(const Qt of ni)if(Wh(Pt,Qt))return!0}for(let Qt=0;Qt<Pt.length-1;Qt++)if(h5(Pt[Qt],Pt[Qt+1],ni))return!0;return!1}(o.cameraQueryGeometry,lt-we,_t-we,Dt+we,xt+we));for(const lt of Ze)Ue.push(lt);Ue.sort(FR);const Ke={};let ut;for(let lt=0;lt<Ue.length;lt++){const _t=Ue[lt];if(_t===ut)continue;ut=_t;const Dt=this.featureIndexArray.get(_t);let xt=null;this.loadMatchingFeature(Ke,Dt.bucketIndex,Dt.sourceLayerIndex,Dt.featureIndex,ne,O.layers,O.availableImages,d,b,P,(Pt,Ut,Ft)=>(xt||(xt=bd(Pt)),Ut.queryIntersectsFeature(ue,Pt,Ft,xt,this.z,o.transform,H,o.pixelPosMatrix)))}return Ke}loadMatchingFeature(o,d,b,P,O,H,ne,ue,we,Oe,Ue){const qe=this.bucketLayerIDs[d];if(H&&!function(lt,_t){for(let Dt=0;Dt<lt.length;Dt++)if(_t.indexOf(lt[Dt])>=0)return!0;return!1}(H,qe))return;const Ze=this.sourceLayerCoder.decode(b),Ke=this.vtLayers[Ze].feature(P);if(O.needGeometry){const lt=wd(Ke,!0);if(!O.filter(new bn(this.tileID.overscaledZ),lt,this.tileID.canonical))return}else if(!O.filter(new bn(this.tileID.overscaledZ),Ke))return;const ut=this.getId(Ke,Ze);for(let lt=0;lt<qe.length;lt++){const _t=qe[lt];if(H&&H.indexOf(_t)<0)continue;const Dt=ue[_t];if(!Dt)continue;let xt={};ut&&Oe&&(xt=Oe.getState(Dt.sourceLayer||"_geojsonTileLayer",ut));const Pt=v({},we[_t]);Pt.paint=HT(Pt.paint,Dt.paint,Ke,xt,ne),Pt.layout=HT(Pt.layout,Dt.layout,Ke,xt,ne);const Ut=!Ue||Ue(Ke,Dt,xt);if(!Ut)continue;const Ft=new VT(Ke,this.z,this.x,this.y,ut);Ft.layer=Pt;let yi=o[_t];yi===void 0&&(yi=o[_t]=[]),yi.push({featureIndex:P,feature:Ft,intersectionZ:Ut})}}lookupSymbolFeatures(o,d,b,P,O,H,ne,ue){const we={};this.loadVTLayers();const Oe=Sf(O);for(const Ue of o)this.loadMatchingFeature(we,b,P,Ue,Oe,H,ne,ue,d);return we}hasLayer(o){for(const d of this.bucketLayerIDs)for(const b of d)if(o===b)return!0;return!1}getId(o,d){let b=o.id;return this.promoteId&&(b=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof b=="boolean"&&(b=Number(b))),b}}function HT(u,o,d,b,P){return k(u,(O,H)=>{const ne=o instanceof Bh?o.get(H):null;return ne&&ne.evaluate?ne.evaluate(d,b,P):ne})}function qT(u){let o=1/0,d=1/0,b=-1/0,P=-1/0;for(const O of u)o=Math.min(o,O.x),d=Math.min(d,O.y),b=Math.max(b,O.x),P=Math.max(P,O.y);return{minX:o,minY:d,maxX:b,maxY:P}}function FR(u,o){return o-u}var Ab;hi("FeatureIndex",GT,{omit:["rawTileData","sourceLayerCoder"]}),s.PerformanceMarkers=void 0,(Ab=s.PerformanceMarkers||(s.PerformanceMarkers={})).create="create",Ab.load="load",Ab.fullLoad="fullLoad";let Yy=null,Kf=[];const Ib=1e3/30,BR={mark(u){performance.mark(u)},frame(u){const o=u;Yy!=null&&Kf.push(o-Yy),Yy=o},clearMetrics(){Yy=null,Kf=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const u in s.PerformanceMarkers)performance.clearMarks(s.PerformanceMarkers[u])},getPerformanceMetrics(){performance.measure("loadTime",s.PerformanceMarkers.create,s.PerformanceMarkers.load),performance.measure("fullLoadTime",s.PerformanceMarkers.create,s.PerformanceMarkers.fullLoad);const u=performance.getEntriesByName("loadTime")[0].duration,o=performance.getEntriesByName("fullLoadTime")[0].duration,d=Kf.length,b=1/(Kf.reduce((O,H)=>O+H,0)/d/1e3),P=Kf.filter(O=>O>Ib).reduce((O,H)=>O+(H-Ib)/Ib,0);return{loadTime:u,fullLoadTime:o,fps:b,percentDroppedFrames:P/(d+P)*100}}};s.AJAXError=te,s.ARRAY_TYPE=Sa,s.Actor=class{constructor(u,o,d){this.target=u,this.parent=o,this.mapId=d,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},C(["receive","process"],this),this.invoker=new jR(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Y()?u:window}send(u,o,d,b,P=!1){const O=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(this.callbacks[O]=d);const H=B(this.globalScope)?void 0:[];return this.target.postMessage({id:O,type:u,hasCallback:!!d,targetMapId:b,mustQueue:P,sourceMapId:this.mapId,data:dd(o,H)},H),{cancel:()=>{d&&delete this.callbacks[O],this.target.postMessage({id:O,type:"<cancel>",targetMapId:b,sourceMapId:this.mapId})}}}receive(u){const o=u.data,d=o.id;if(d&&(!o.targetMapId||this.mapId===o.targetMapId))if(o.type==="<cancel>"){delete this.tasks[d];const b=this.cancelCallbacks[d];delete this.cancelCallbacks[d],b&&b()}else Y()||o.mustQueue?(this.tasks[d]=o,this.taskQueue.push(d),this.invoker.trigger()):this.processTask(d,o)}process(){if(!this.taskQueue.length)return;const u=this.taskQueue.shift(),o=this.tasks[u];delete this.tasks[u],this.taskQueue.length&&this.invoker.trigger(),o&&this.processTask(u,o)}processTask(u,o){if(o.type==="<response>"){const d=this.callbacks[u];delete this.callbacks[u],d&&(o.error?d(hc(o.error)):d(null,hc(o.data)))}else{let d=!1;const b=B(this.globalScope)?void 0:[],P=o.hasCallback?(ne,ue)=>{d=!0,delete this.cancelCallbacks[u],this.target.postMessage({id:u,type:"<response>",sourceMapId:this.mapId,error:ne?dd(ne):null,data:dd(ue,b)},b)}:ne=>{d=!0};let O=null;const H=hc(o.data);if(this.parent[o.type])O=this.parent[o.type](o.sourceMapId,H,P);else if(this.parent.getWorkerSource){const ne=o.type.split(".");O=this.parent.getWorkerSource(o.sourceMapId,ne[0],H.source)[ne[1]](H,P)}else P(new Error(`Could not find function ${o.type}`));!d&&O&&O.cancel&&(this.cancelCallbacks[u]=O.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.AlphaImage=$f,s.CanonicalTileID=Mb,s.CollisionBoxArray=Et,s.CollisionCircleLayoutArray=class extends Ae{},s.Color=Ve,s.DEMData=$T,s.DataConstantProperty=Si,s.DictionaryCoder=UT,s.EXTENT=ls,s.ErrorEvent=Pe,s.EvaluationParameters=bn,s.Event=Se,s.Evented=Fe,s.FeatureIndex=GT,s.FillBucket=db,s.FillExtrusionBucket=pb,s.GeoJSONFeature=VT,s.ImageAtlas=fT,s.ImagePosition=yb,s.LineBucket=fb,s.LineStripIndexArray=class extends Ct{},s.LngLat=On,s.LngLatBounds=Cd,s.MercatorCoordinate=Wy,s.ONE_EM=Rs,s.OverscaledTileID=Eo,s.PerformanceUtils=BR,s.PosArray=ur,s.Properties=os,s.QuadTriangleArray=class extends Ge{},s.RGBAImage=So,s.RasterBoundsArray=class extends yd{},s.RequestPerformance=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},s.ResourceType=be,s.SegmentVector=Ir,s.SymbolBucket=ep,s.Transitionable=Nf,s.TriangleIndexArray=Ds,s.Uniform1f=Gh,s.Uniform1i=class extends To{constructor(u,o){super(u,o),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},s.Uniform2f=class extends To{constructor(u,o){super(u,o),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},s.Uniform3f=class extends To{constructor(u,o){super(u,o),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},s.Uniform4f=vd,s.UniformColor=Hh,s.UniformMatrix4f=class extends To{constructor(u,o){super(u,o),this.current=o5}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let o=1;o<16;o++)if(u[o]!==this.current[o]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},s.UnwrappedTileID=BT,s.ValidationError=He,s.ZoomHistory=hd,s.add=function(u,o,d){return u[0]=o[0]+d[0],u[1]=o[1]+d[1],u[2]=o[2]+d[2],u},s.addDynamicAttributes=_b,s.asyncAll=function(u,o,d){if(!u.length)return d(null,[]);let b=u.length;const P=new Array(u.length);let O=null;u.forEach((H,ne)=>{o(H,(ue,we)=>{ue&&(O=ue),P[ne]=we,--b==0&&d(O,P)})})},s.bezier=m,s.bindAll=C,s.cacheEntryPossiblyAdded=function(u){oe++,oe>fe&&(u.getActor().send("enforceCacheSizeLimit",se),oe=0)},s.clamp=g,s.clearTileCache=function(u){const o=caches.delete(q);u&&o.catch(u).then(()=>u())},s.clipLine=ET,s.clone=function(u){var o=new Sa(16);return o[0]=u[0],o[1]=u[1],o[2]=u[2],o[3]=u[3],o[4]=u[4],o[5]=u[5],o[6]=u[6],o[7]=u[7],o[8]=u[8],o[9]=u[9],o[10]=u[10],o[11]=u[11],o[12]=u[12],o[13]=u[13],o[14]=u[14],o[15]=u[15],o},s.clone$1=E,s.clone$2=function(u){var o=new Sa(3);return o[0]=u[0],o[1]=u[1],o[2]=u[2],o},s.collisionCircleLayout=nR,s.config=j,s.copy=function(u,o){return u[0]=o[0],u[1]=o[1],u[2]=o[2],u[3]=o[3],u[4]=o[4],u[5]=o[5],u[6]=o[6],u[7]=o[7],u[8]=o[8],u[9]=o[9],u[10]=o[10],u[11]=o[11],u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15],u},s.create=function(){var u=new Sa(16);return Sa!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},s.create$1=jC,s.createExpression=nd,s.createFilter=Sf,s.createLayout=Jn,s.createStyleLayer=function(u){return u.type==="custom"?new zR(u):new OR[u.type](u)},s.cross=function(u,o,d){var b=o[0],P=o[1],O=o[2],H=d[0],ne=d[1],ue=d[2];return u[0]=P*ue-O*ne,u[1]=O*H-b*ue,u[2]=b*ne-P*H,u},s.dot=function(u,o){return u[0]*o[0]+u[1]*o[1]+u[2]*o[2]},s.dot$1=function(u,o){return u[0]*o[0]+u[1]*o[1]+u[2]*o[2]+u[3]*o[3]},s.ease=y,s.emitValidationErrors=by,s.enforceCacheSizeLimit=function(u){ee(),W&&W.then(o=>{o.keys().then(d=>{for(let b=0;b<d.length-u;b++)o.delete(d[b])})})},s.equals=function(u,o){var d=u[0],b=u[1],P=u[2],O=u[3],H=u[4],ne=u[5],ue=u[6],we=u[7],Oe=u[8],Ue=u[9],qe=u[10],Ze=u[11],Ke=u[12],ut=u[13],lt=u[14],_t=u[15],Dt=o[0],xt=o[1],Pt=o[2],Ut=o[3],Ft=o[4],yi=o[5],_i=o[6],ni=o[7],Qt=o[8],Yt=o[9],si=o[10],ei=o[11],Gt=o[12],Ii=o[13],Ei=o[14],dr=o[15];return Math.abs(d-Dt)<=Ta*Math.max(1,Math.abs(d),Math.abs(Dt))&&Math.abs(b-xt)<=Ta*Math.max(1,Math.abs(b),Math.abs(xt))&&Math.abs(P-Pt)<=Ta*Math.max(1,Math.abs(P),Math.abs(Pt))&&Math.abs(O-Ut)<=Ta*Math.max(1,Math.abs(O),Math.abs(Ut))&&Math.abs(H-Ft)<=Ta*Math.max(1,Math.abs(H),Math.abs(Ft))&&Math.abs(ne-yi)<=Ta*Math.max(1,Math.abs(ne),Math.abs(yi))&&Math.abs(ue-_i)<=Ta*Math.max(1,Math.abs(ue),Math.abs(_i))&&Math.abs(we-ni)<=Ta*Math.max(1,Math.abs(we),Math.abs(ni))&&Math.abs(Oe-Qt)<=Ta*Math.max(1,Math.abs(Oe),Math.abs(Qt))&&Math.abs(Ue-Yt)<=Ta*Math.max(1,Math.abs(Ue),Math.abs(Yt))&&Math.abs(qe-si)<=Ta*Math.max(1,Math.abs(qe),Math.abs(si))&&Math.abs(Ze-ei)<=Ta*Math.max(1,Math.abs(Ze),Math.abs(ei))&&Math.abs(Ke-Gt)<=Ta*Math.max(1,Math.abs(Ke),Math.abs(Gt))&&Math.abs(ut-Ii)<=Ta*Math.max(1,Math.abs(ut),Math.abs(Ii))&&Math.abs(lt-Ei)<=Ta*Math.max(1,Math.abs(lt),Math.abs(Ei))&&Math.abs(_t-dr)<=Ta*Math.max(1,Math.abs(_t),Math.abs(dr))},s.evaluateSizeForFeature=function(u,{uSize:o,uSizeT:d},{lowerSize:b,upperSize:P}){return u.kind==="source"?b/vc:u.kind==="composite"?kn(b/vc,P/vc,d):o},s.evaluateSizeForZoom=function(u,o){let d=0,b=0;if(u.kind==="constant")b=u.layoutSize;else if(u.kind!=="source"){const{interpolationType:P,minZoom:O,maxZoom:H}=u,ne=P?g(za.interpolationFactor(P,o,O,H),0,1):0;u.kind==="camera"?b=kn(u.minSize,u.maxSize,ne):d=ne}return{uSizeT:d,uSize:b}},s.evaluateVariableOffset=AT,s.evented=Qc,s.exported=L,s.exported$1=Ce,s.extend=v,s.filterObject=w,s.fromRotation=function(u,o){var d=Math.sin(o),b=Math.cos(o);return u[0]=b,u[1]=d,u[2]=0,u[3]=-d,u[4]=b,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},s.fromScaling=function(u,o){return u[0]=o[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=o[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=o[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},s.getAnchorAlignment=xb,s.getAnchorJustification=wb,s.getArrayBuffer=_e,s.getImage=Re,s.getJSON=function(u,o){return xe(v(u,{type:"json"}),o)},s.getOverlapMode=Eb,s.getRTLTextPluginStatus=Lf,s.getReferrer=ae,s.getVideo=function(u,o){const d=window.document.createElement("video");d.muted=!0,d.onloadstart=function(){o(null,d)};for(let b=0;b<u.length;b++){const P=window.document.createElement("source");Ne(u[b])||(d.crossOrigin="Anonymous"),P.src=u[b],d.appendChild(P)}return{cancel:()=>{}}},s.identity=ib,s.invert=function(u,o){var d=o[0],b=o[1],P=o[2],O=o[3],H=o[4],ne=o[5],ue=o[6],we=o[7],Oe=o[8],Ue=o[9],qe=o[10],Ze=o[11],Ke=o[12],ut=o[13],lt=o[14],_t=o[15],Dt=d*ne-b*H,xt=d*ue-P*H,Pt=d*we-O*H,Ut=b*ue-P*ne,Ft=b*we-O*ne,yi=P*we-O*ue,_i=Oe*ut-Ue*Ke,ni=Oe*lt-qe*Ke,Qt=Oe*_t-Ze*Ke,Yt=Ue*lt-qe*ut,si=Ue*_t-Ze*ut,ei=qe*_t-Ze*lt,Gt=Dt*ei-xt*si+Pt*Yt+Ut*Qt-Ft*ni+yi*_i;return Gt?(u[0]=(ne*ei-ue*si+we*Yt)*(Gt=1/Gt),u[1]=(P*si-b*ei-O*Yt)*Gt,u[2]=(ut*yi-lt*Ft+_t*Ut)*Gt,u[3]=(qe*Ft-Ue*yi-Ze*Ut)*Gt,u[4]=(ue*Qt-H*ei-we*ni)*Gt,u[5]=(d*ei-P*Qt+O*ni)*Gt,u[6]=(lt*Pt-Ke*yi-_t*xt)*Gt,u[7]=(Oe*yi-qe*Pt+Ze*xt)*Gt,u[8]=(H*si-ne*Qt+we*_i)*Gt,u[9]=(b*Qt-d*si-O*_i)*Gt,u[10]=(Ke*Ft-ut*Pt+_t*Dt)*Gt,u[11]=(Ue*Pt-Oe*Ft-Ze*Dt)*Gt,u[12]=(ne*ni-H*Yt-ue*_i)*Gt,u[13]=(d*Yt-b*ni+P*_i)*Gt,u[14]=(ut*xt-Ke*Ut-lt*Dt)*Gt,u[15]=(Oe*Ut-Ue*xt+qe*Dt)*Gt,u):null},s.isImageBitmap=R,s.isSafari=B,s.isWorker=Y,s.keysDifference=function(u,o){const d=[];for(const b in u)b in o||d.push(b);return d},s.lazyLoadRTLTextPlugin=function(){ro.isLoading()||ro.isLoaded()||Lf()!=="deferred"||Oh()},s.makeRequest=xe,s.mapObject=k,s.mercatorXfromLng=zT,s.mercatorYfromLat=OT,s.mercatorZfromAltitude=jT,s.mul=m5,s.mul$1=function(u,o,d){return u[0]=o[0]*d[0],u[1]=o[1]*d[1],u[2]=o[2]*d[2],u[3]=o[3]*d[3],u},s.multiply=FC,s.nextPowerOfTwo=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},s.normalize=function(u,o){var d=o[0],b=o[1],P=o[2],O=d*d+b*b+P*P;return O>0&&(O=1/Math.sqrt(O)),u[0]=o[0]*O,u[1]=o[1]*O,u[2]=o[2]*O,u},s.number=kn,s.ortho=function(u,o,d,b,P,O,H){var ne=1/(o-d),ue=1/(b-P),we=1/(O-H);return u[0]=-2*ne,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*ue,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*we,u[11]=0,u[12]=(o+d)*ne,u[13]=(P+b)*ue,u[14]=(H+O)*we,u[15]=1,u},s.parseCacheControl=Z,s.parseGlyphPbf=function(u){return new mb(u).readFields(mR,[])},s.pbf=mb,s.performSymbolLayout=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=ls/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;const o=u.bucket.layers[0].layout,d=u.bucket.layers[0]._unevaluatedLayout._values,b={layoutIconSize:d["icon-size"].possiblyEvaluate(new bn(u.bucket.zoom+1),u.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new bn(u.bucket.zoom+1),u.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new bn(18))};if(u.bucket.textSizeData.kind==="composite"){const{minZoom:ue,maxZoom:we}=u.bucket.textSizeData;b.compositeTextSizes=[d["text-size"].possiblyEvaluate(new bn(ue),u.canonical),d["text-size"].possiblyEvaluate(new bn(we),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){const{minZoom:ue,maxZoom:we}=u.bucket.iconSizeData;b.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new bn(ue),u.canonical),d["icon-size"].possiblyEvaluate(new bn(we),u.canonical)]}const P=o.get("text-line-height")*Rs,O=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point",H=o.get("text-keep-upright"),ne=o.get("text-size");for(const ue of u.bucket.features){const we=o.get("text-font").evaluate(ue,{},u.canonical).join(","),Oe=ne.evaluate(ue,{},u.canonical),Ue=b.layoutTextSize.evaluate(ue,{},u.canonical),qe=b.layoutIconSize.evaluate(ue,{},u.canonical),Ze={horizontal:{},vertical:void 0},Ke=ue.text;let ut,lt=[0,0];if(Ke){const xt=Ke.toString(),Pt=o.get("text-letter-spacing").evaluate(ue,{},u.canonical)*Rs,Ut=wy(xt)?Pt:0,Ft=o.get("text-anchor").evaluate(ue,{},u.canonical),yi=o.get("text-variable-anchor");if(!yi){const si=o.get("text-radial-offset").evaluate(ue,{},u.canonical);lt=si?AT(Ft,[si*Rs,bb]):o.get("text-offset").evaluate(ue,{},u.canonical).map(ei=>ei*Rs)}let _i=O?"center":o.get("text-justify").evaluate(ue,{},u.canonical);const ni=o.get("symbol-placement"),Qt=ni==="point"?o.get("text-max-width").evaluate(ue,{},u.canonical)*Rs:0,Yt=()=>{u.bucket.allowVerticalPlacement&&Af(xt)&&(Ze.vertical=Fy(Ke,u.glyphMap,u.glyphPositions,u.imagePositions,we,Qt,P,Ft,"left",Ut,lt,s.WritingMode.vertical,!0,ni,Ue,Oe))};if(!O&&yi){const si=_i==="auto"?yi.map(Gt=>wb(Gt)):[_i];let ei=!1;for(let Gt=0;Gt<si.length;Gt++){const Ii=si[Gt];if(!Ze.horizontal[Ii])if(ei)Ze.horizontal[Ii]=Ze.horizontal[0];else{const Ei=Fy(Ke,u.glyphMap,u.glyphPositions,u.imagePositions,we,Qt,P,"center",Ii,Ut,lt,s.WritingMode.horizontal,!1,ni,Ue,Oe);Ei&&(Ze.horizontal[Ii]=Ei,ei=Ei.positionedLines.length===1)}}Yt()}else{_i==="auto"&&(_i=wb(Ft));const si=Fy(Ke,u.glyphMap,u.glyphPositions,u.imagePositions,we,Qt,P,Ft,_i,Ut,lt,s.WritingMode.horizontal,!1,ni,Ue,Oe);si&&(Ze.horizontal[_i]=si),Yt(),Af(xt)&&O&&H&&(Ze.vertical=Fy(Ke,u.glyphMap,u.glyphPositions,u.imagePositions,we,Qt,P,Ft,_i,Ut,lt,s.WritingMode.vertical,!1,ni,Ue,Oe))}}let _t=!1;if(ue.icon&&ue.icon.name){const xt=u.imageMap[ue.icon.name];xt&&(ut=wR(u.imagePositions[ue.icon.name],o.get("icon-offset").evaluate(ue,{},u.canonical),o.get("icon-anchor").evaluate(ue,{},u.canonical)),_t=!!xt.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=_t:u.bucket.sdfIcons!==_t&&M("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xt.pixelRatio!==u.bucket.pixelRatio||o.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}const Dt=PT(Ze.horizontal)||Ze.vertical;u.bucket.iconsInText=!!Dt&&Dt.iconsInText,(Dt||ut)&&MR(u.bucket,ue,Ze,ut,u.imageMap,b,Ue,qe,lt,_t,u.canonical)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},s.perspective=function(u,o,d,b,P){var O,H=1/Math.tan(o/2);return u[0]=H/d,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=H,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,P!=null&&P!==1/0?(u[10]=(P+b)*(O=1/(b-P)),u[14]=2*P*b*O):(u[10]=-1,u[14]=-2*b),u},s.pick=function(u,o){const d={};for(let b=0;b<o.length;b++){const P=o[b];P in u&&(d[P]=u[P])}return d},s.plugin=ro,s.pointGeometry=G,s.polygonIntersectsPolygon=LC,s.potpack=pT,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.register=hi,s.registerForPluginStateChange=function(u){return u({pluginStatus:wa,pluginURL:kl}),Qc.on("pluginStateChange",u),u},s.renderColorRamp=qC,s.rotateX=function(u,o,d){var b=Math.sin(d),P=Math.cos(d),O=o[4],H=o[5],ne=o[6],ue=o[7],we=o[8],Oe=o[9],Ue=o[10],qe=o[11];return o!==u&&(u[0]=o[0],u[1]=o[1],u[2]=o[2],u[3]=o[3],u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15]),u[4]=O*P+we*b,u[5]=H*P+Oe*b,u[6]=ne*P+Ue*b,u[7]=ue*P+qe*b,u[8]=we*P-O*b,u[9]=Oe*P-H*b,u[10]=Ue*P-ne*b,u[11]=qe*P-ue*b,u},s.rotateZ=function(u,o,d){var b=Math.sin(d),P=Math.cos(d),O=o[0],H=o[1],ne=o[2],ue=o[3],we=o[4],Oe=o[5],Ue=o[6],qe=o[7];return o!==u&&(u[8]=o[8],u[9]=o[9],u[10]=o[10],u[11]=o[11],u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15]),u[0]=O*P+we*b,u[1]=H*P+Oe*b,u[2]=ne*P+Ue*b,u[3]=ue*P+qe*b,u[4]=we*P-O*b,u[5]=Oe*P-H*b,u[6]=Ue*P-ne*b,u[7]=qe*P-ue*b,u},s.scale=function(u,o,d){var b=d[0],P=d[1],O=d[2];return u[0]=o[0]*b,u[1]=o[1]*b,u[2]=o[2]*b,u[3]=o[3]*b,u[4]=o[4]*P,u[5]=o[5]*P,u[6]=o[6]*P,u[7]=o[7]*P,u[8]=o[8]*O,u[9]=o[9]*O,u[10]=o[10]*O,u[11]=o[11]*O,u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15],u},s.scale$1=function(u,o,d){return u[0]=o[0]*d,u[1]=o[1]*d,u[2]=o[2]*d,u},s.setCacheLimits=function(u,o){se=u,fe=o},s.setRTLTextPlugin=function(u,o,d=!1){if(wa===zh||wa===If||wa===Pf)throw new Error("setRTLTextPlugin cannot be called multiple times.");kl=L.resolveURL(u),wa=zh,Df=o,Rf(),d||Oh()},s.spec=je,s.sphericalToCartesian=function([u,o,d]){return o+=90,o*=Math.PI/180,d*=Math.PI/180,{x:u*Math.cos(o)*Math.sin(d),y:u*Math.sin(o)*Math.sin(d),z:u*Math.cos(d)}},s.sqrLen=function(u){var o=u[0],d=u[1];return o*o+d*d},s.sub=function(u,o,d){return u[0]=o[0]-d[0],u[1]=o[1]-d[1],u[2]=o[2]-d[2],u},s.toEvaluationFeature=wd,s.transformMat3=function(u,o,d){var b=o[0],P=o[1],O=o[2];return u[0]=b*d[0]+P*d[3]+O*d[6],u[1]=b*d[1]+P*d[4]+O*d[7],u[2]=b*d[2]+P*d[5]+O*d[8],u},s.transformMat4=Py,s.transformMat4$1=function(u,o,d){var b=o[0],P=o[1];return u[0]=d[0]*b+d[4]*P+d[12],u[1]=d[1]*b+d[5]*P+d[13],u},s.translate=function(u,o,d){var b,P,O,H,ne,ue,we,Oe,Ue,qe,Ze,Ke,ut=d[0],lt=d[1],_t=d[2];return o===u?(u[12]=o[0]*ut+o[4]*lt+o[8]*_t+o[12],u[13]=o[1]*ut+o[5]*lt+o[9]*_t+o[13],u[14]=o[2]*ut+o[6]*lt+o[10]*_t+o[14],u[15]=o[3]*ut+o[7]*lt+o[11]*_t+o[15]):(P=o[1],O=o[2],H=o[3],ne=o[4],ue=o[5],we=o[6],Oe=o[7],Ue=o[8],qe=o[9],Ze=o[10],Ke=o[11],u[0]=b=o[0],u[1]=P,u[2]=O,u[3]=H,u[4]=ne,u[5]=ue,u[6]=we,u[7]=Oe,u[8]=Ue,u[9]=qe,u[10]=Ze,u[11]=Ke,u[12]=b*ut+ne*lt+Ue*_t+o[12],u[13]=P*ut+ue*lt+qe*_t+o[13],u[14]=O*ut+we*lt+Ze*_t+o[14],u[15]=H*ut+Oe*lt+Ke*_t+o[15]),u},s.triggerPluginCompletionEvent=Ty,s.unicodeBlockLookup=ri,s.uniqueId=function(){return _++},s.validateCustomStyleLayer=function(u){const o=[],d=u.id;return d===void 0&&o.push({message:`layers.${d}: missing required property "id"`}),u.render===void 0&&o.push({message:`layers.${d}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&o.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),o},s.validateLight=Gx,s.validateStyle=uc,s.vectorTile=ru,s.warnOnce=M,s.wrap=x}),a(["./shared"],function(s){function h(We){const Te=typeof We;if(Te==="number"||Te==="boolean"||Te==="string"||We==null)return JSON.stringify(We);if(Array.isArray(We)){let Xe="[";for(const et of We)Xe+=`${h(et)},`;return`${Xe}]`}const ze=Object.keys(We).sort();let Ve="{";for(let Xe=0;Xe<ze.length;Xe++)Ve+=`${JSON.stringify(ze[Xe])}:${h(We[ze[Xe]])},`;return`${Ve}}`}function p(We){let Te="";for(const ze of s.refProperties)Te+=`/${h(We[ze])}`;return Te}class m{constructor(Te){this.keyCache={},Te&&this.replace(Te)}replace(Te){this._layerConfigs={},this._layers={},this.update(Te,[])}update(Te,ze){for(const Xe of Te){this._layerConfigs[Xe.id]=Xe;const et=this._layers[Xe.id]=s.createStyleLayer(Xe);et._featureFilter=s.createFilter(et.filter),this.keyCache[Xe.id]&&delete this.keyCache[Xe.id]}for(const Xe of ze)delete this.keyCache[Xe],delete this._layerConfigs[Xe],delete this._layers[Xe];this.familiesBySource={};const Ve=function(Xe,et){const ct={};for(let nt=0;nt<Xe.length;nt++){const ft=et&&et[Xe[nt].id]||p(Xe[nt]);et&&(et[Xe[nt].id]=ft);let wt=ct[ft];wt||(wt=ct[ft]=[]),wt.push(Xe[nt])}const ot=[];for(const nt in ct)ot.push(ct[nt]);return ot}(Object.values(this._layerConfigs),this.keyCache);for(const Xe of Ve){const et=Xe.map(zt=>this._layers[zt.id]),ct=et[0];if(ct.visibility==="none")continue;const ot=ct.source||"";let nt=this.familiesBySource[ot];nt||(nt=this.familiesBySource[ot]={});const ft=ct.sourceLayer||"_geojsonTileLayer";let wt=nt[ft];wt||(wt=nt[ft]=[]),wt.push(et)}}}class y{constructor(Te){const ze={},Ve=[];for(const ot in Te){const nt=Te[ot],ft=ze[ot]={};for(const wt in nt){const zt=nt[+wt];if(!zt||zt.bitmap.width===0||zt.bitmap.height===0)continue;const Rt={x:0,y:0,w:zt.bitmap.width+2,h:zt.bitmap.height+2};Ve.push(Rt),ft[wt]={rect:Rt,metrics:zt.metrics}}}const{w:Xe,h:et}=s.potpack(Ve),ct=new s.AlphaImage({width:Xe||1,height:et||1});for(const ot in Te){const nt=Te[ot];for(const ft in nt){const wt=nt[+ft];if(!wt||wt.bitmap.width===0||wt.bitmap.height===0)continue;const zt=ze[ot][ft].rect;s.AlphaImage.copy(wt.bitmap,ct,{x:0,y:0},{x:zt.x+1,y:zt.y+1},wt.bitmap)}}this.image=ct,this.positions=ze}}s.register("GlyphAtlas",y);class g{constructor(Te){this.tileID=new s.OverscaledTileID(Te.tileID.overscaledZ,Te.tileID.wrap,Te.tileID.canonical.z,Te.tileID.canonical.x,Te.tileID.canonical.y),this.uid=Te.uid,this.zoom=Te.zoom,this.pixelRatio=Te.pixelRatio,this.tileSize=Te.tileSize,this.source=Te.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Te.showCollisionBoxes,this.collectResourceTiming=!!Te.collectResourceTiming,this.returnDependencies=!!Te.returnDependencies,this.promoteId=Te.promoteId}parse(Te,ze,Ve,Xe,et){this.status="parsing",this.data=Te,this.collisionBoxArray=new s.CollisionBoxArray;const ct=new s.DictionaryCoder(Object.keys(Te.layers).sort()),ot=new s.FeatureIndex(this.tileID,this.promoteId);ot.bucketLayerIDs=[];const nt={},ft={featureIndex:ot,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ve},wt=ze.familiesBySource[this.source];for(const qi in wt){const mi=Te.layers[qi];if(!mi)continue;mi.version===1&&s.warnOnce(`Vector tile source "${this.source}" layer "${qi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ri=ct.encode(qi),Xr=[];for(let on=0;on<mi.length;on++){const En=mi.feature(on),br=ot.getId(En,qi);Xr.push({feature:En,id:br,index:on,sourceLayerIndex:Ri})}for(const on of wt[qi]){const En=on[0];En.source!==this.source&&s.warnOnce(`layer.source = ${En.source} does not equal this.source = ${this.source}`),En.minzoom&&this.zoom<Math.floor(En.minzoom)||En.maxzoom&&this.zoom>=En.maxzoom||En.visibility!=="none"&&(x(on,this.zoom,Ve),(nt[En.id]=En.createBucket({index:ot.bucketLayerIDs.length,layers:on,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ri,sourceID:this.source})).populate(Xr,ft,this.tileID.canonical),ot.bucketLayerIDs.push(on.map(br=>br.id)))}}let zt,Rt,ci,Wt;const gi=s.mapObject(ft.glyphDependencies,qi=>Object.keys(qi).map(Number));Object.keys(gi).length?Xe.send("getGlyphs",{uid:this.uid,stacks:gi},(qi,mi)=>{zt||(zt=qi,Rt=mi,Ui.call(this))}):Rt={};const vi=Object.keys(ft.iconDependencies);vi.length?Xe.send("getImages",{icons:vi,source:this.source,tileID:this.tileID,type:"icons"},(qi,mi)=>{zt||(zt=qi,ci=mi,Ui.call(this))}):ci={};const Hi=Object.keys(ft.patternDependencies);function Ui(){if(zt)return et(zt);if(Rt&&ci&&Wt){const qi=new y(Rt),mi=new s.ImageAtlas(ci,Wt);for(const Ri in nt){const Xr=nt[Ri];Xr instanceof s.SymbolBucket?(x(Xr.layers,this.zoom,Ve),s.performSymbolLayout({bucket:Xr,glyphMap:Rt,glyphPositions:qi.positions,imageMap:ci,imagePositions:mi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Xr.hasPattern&&(Xr instanceof s.LineBucket||Xr instanceof s.FillBucket||Xr instanceof s.FillExtrusionBucket)&&(x(Xr.layers,this.zoom,Ve),Xr.addFeatures(ft,this.tileID.canonical,mi.patternPositions))}this.status="done",et(null,{buckets:Object.values(nt).filter(Ri=>!Ri.isEmpty()),featureIndex:ot,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:qi.image,imageAtlas:mi,glyphMap:this.returnDependencies?Rt:null,iconMap:this.returnDependencies?ci:null,glyphPositions:this.returnDependencies?qi.positions:null})}}Hi.length?Xe.send("getImages",{icons:Hi,source:this.source,tileID:this.tileID,type:"patterns"},(qi,mi)=>{zt||(zt=qi,Wt=mi,Ui.call(this))}):Wt={},Ui.call(this)}}function x(We,Te,ze){const Ve=new s.EvaluationParameters(Te);for(const Xe of We)Xe.recalculate(Ve,ze)}function v(We,Te){const ze=s.getArrayBuffer(We.request,(Ve,Xe,et,ct)=>{Ve?Te(Ve):Xe&&Te(null,{vectorTile:new s.vectorTile.VectorTile(new s.pbf(Xe)),rawData:Xe,cacheControl:et,expires:ct})});return()=>{ze.cancel(),Te()}}class _{constructor(Te,ze,Ve,Xe){this.actor=Te,this.layerIndex=ze,this.availableImages=Ve,this.loadVectorData=Xe||v,this.loading={},this.loaded={}}loadTile(Te,ze){const Ve=Te.uid;this.loading||(this.loading={});const Xe=!!(Te&&Te.request&&Te.request.collectResourceTiming)&&new s.RequestPerformance(Te.request),et=this.loading[Ve]=new g(Te);et.abort=this.loadVectorData(Te,(ct,ot)=>{if(delete this.loading[Ve],ct||!ot)return et.status="done",this.loaded[Ve]=et,ze(ct);const nt=ot.rawData,ft={};ot.expires&&(ft.expires=ot.expires),ot.cacheControl&&(ft.cacheControl=ot.cacheControl);const wt={};if(Xe){const zt=Xe.finish();zt&&(wt.resourceTiming=JSON.parse(JSON.stringify(zt)))}et.vectorTile=ot.vectorTile,et.parse(ot.vectorTile,this.layerIndex,this.availableImages,this.actor,(zt,Rt)=>{if(zt||!Rt)return ze(zt);ze(null,s.extend({rawTileData:nt.slice(0)},Rt,ft,wt))}),this.loaded=this.loaded||{},this.loaded[Ve]=et})}reloadTile(Te,ze){const Ve=this.loaded,Xe=Te.uid,et=this;if(Ve&&Ve[Xe]){const ct=Ve[Xe];ct.showCollisionBoxes=Te.showCollisionBoxes;const ot=(nt,ft)=>{const wt=ct.reloadCallback;wt&&(delete ct.reloadCallback,ct.parse(ct.vectorTile,et.layerIndex,this.availableImages,et.actor,wt)),ze(nt,ft)};ct.status==="parsing"?ct.reloadCallback=ot:ct.status==="done"&&(ct.vectorTile?ct.parse(ct.vectorTile,this.layerIndex,this.availableImages,this.actor,ot):ot())}}abortTile(Te,ze){const Ve=this.loading,Xe=Te.uid;Ve&&Ve[Xe]&&Ve[Xe].abort&&(Ve[Xe].abort(),delete Ve[Xe]),ze()}removeTile(Te,ze){const Ve=this.loaded,Xe=Te.uid;Ve&&Ve[Xe]&&delete Ve[Xe],ze()}}class C{constructor(){this.loaded={}}loadTile(Te,ze){const{uid:Ve,encoding:Xe,rawImageData:et}=Te,ct=s.isImageBitmap(et)?this.getImageData(et):et,ot=new s.DEMData(Ve,ct,Xe);this.loaded=this.loaded||{},this.loaded[Ve]=ot,ze(null,ot)}getImageData(Te){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Te.width,Te.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Te.width,this.offscreenCanvas.height=Te.height,this.offscreenCanvasContext.drawImage(Te,0,0,Te.width,Te.height);const ze=this.offscreenCanvasContext.getImageData(-1,-1,Te.width+2,Te.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new s.RGBAImage({width:ze.width,height:ze.height},ze.data)}removeTile(Te){const ze=this.loaded,Ve=Te.uid;ze&&ze[Ve]&&delete ze[Ve]}}var k=function We(Te,ze){var Ve,Xe=Te&&Te.type;if(Xe==="FeatureCollection")for(Ve=0;Ve<Te.features.length;Ve++)We(Te.features[Ve],ze);else if(Xe==="GeometryCollection")for(Ve=0;Ve<Te.geometries.length;Ve++)We(Te.geometries[Ve],ze);else if(Xe==="Feature")We(Te.geometry,ze);else if(Xe==="Polygon")w(Te.coordinates,ze);else if(Xe==="MultiPolygon")for(Ve=0;Ve<Te.coordinates.length;Ve++)w(Te.coordinates[Ve],ze);return Te};function w(We,Te){if(We.length!==0){E(We[0],Te);for(var ze=1;ze<We.length;ze++)E(We[ze],!1)}}function E(We,Te){for(var ze=0,Ve=0,Xe=0,et=We.length,ct=et-1;Xe<et;ct=Xe++){var ot=(We[Xe][0]-We[ct][0])*(We[ct][1]+We[Xe][1]),nt=ze+ot;Ve+=Math.abs(ze)>=Math.abs(ot)?ze-nt+ot:ot-nt+ze,ze=nt}ze+Ve>=0!=!!Te&&We.reverse()}const A=s.vectorTile.VectorTileFeature.prototype.toGeoJSON;class M{constructor(Te){this._feature=Te,this.extent=s.EXTENT,this.type=Te.type,this.properties=Te.tags,"id"in Te&&!isNaN(Te.id)&&(this.id=parseInt(Te.id,10))}loadGeometry(){if(this._feature.type===1){const Te=[];for(const ze of this._feature.geometry)Te.push([new s.pointGeometry(ze[0],ze[1])]);return Te}{const Te=[];for(const ze of this._feature.geometry){const Ve=[];for(const Xe of ze)Ve.push(new s.pointGeometry(Xe[0],Xe[1]));Te.push(Ve)}return Te}}toGeoJSON(Te,ze,Ve){return A.call(this,Te,ze,Ve)}}class S{constructor(Te){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=Te.length,this._features=Te}feature(Te){return new M(this._features[Te])}}var N={exports:{}},Y=s.pointGeometry,Z=s.vectorTile.VectorTileFeature,K=U;function U(We,Te){this.options=Te||{},this.features=We,this.length=We.length}function $(We,Te){this.id=typeof We.id=="number"?We.id:void 0,this.type=We.type,this.rawGeometry=We.type===1?[We.geometry]:We.geometry,this.properties=We.tags,this.extent=Te||4096}U.prototype.feature=function(We){return new $(this.features[We],this.options.extent)},$.prototype.loadGeometry=function(){var We=this.rawGeometry;this.geometry=[];for(var Te=0;Te<We.length;Te++){for(var ze=We[Te],Ve=[],Xe=0;Xe<ze.length;Xe++)Ve.push(new Y(ze[Xe][0],ze[Xe][1]));this.geometry.push(Ve)}return this.geometry},$.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var We=this.geometry,Te=1/0,ze=-1/0,Ve=1/0,Xe=-1/0,et=0;et<We.length;et++)for(var ct=We[et],ot=0;ot<ct.length;ot++){var nt=ct[ot];Te=Math.min(Te,nt.x),ze=Math.max(ze,nt.x),Ve=Math.min(Ve,nt.y),Xe=Math.max(Xe,nt.y)}return[Te,Ve,ze,Xe]},$.prototype.toGeoJSON=Z.prototype.toGeoJSON;var B=s.pbf,R=K;function L(We){var Te=new B;return function(ze,Ve){for(var Xe in ze.layers)Ve.writeMessage(3,G,ze.layers[Xe])}(We,Te),Te.finish()}function G(We,Te){var ze;Te.writeVarintField(15,We.version||1),Te.writeStringField(1,We.name||""),Te.writeVarintField(5,We.extent||4096);var Ve={keys:[],values:[],keycache:{},valuecache:{}};for(ze=0;ze<We.length;ze++)Ve.feature=We.feature(ze),Te.writeMessage(2,F,Ve);var Xe=Ve.keys;for(ze=0;ze<Xe.length;ze++)Te.writeStringField(3,Xe[ze]);var et=Ve.values;for(ze=0;ze<et.length;ze++)Te.writeMessage(4,fe,et[ze])}function F(We,Te){var ze=We.feature;ze.id!==void 0&&Te.writeVarintField(1,ze.id),Te.writeMessage(2,j,We),Te.writeVarintField(3,ze.type),Te.writeMessage(4,se,ze)}function j(We,Te){var ze=We.feature,Ve=We.keys,Xe=We.values,et=We.keycache,ct=We.valuecache;for(var ot in ze.properties){var nt=ze.properties[ot],ft=et[ot];if(nt!==null){ft===void 0&&(Ve.push(ot),et[ot]=ft=Ve.length-1),Te.writeVarint(ft);var wt=typeof nt;wt!=="string"&&wt!=="boolean"&&wt!=="number"&&(nt=JSON.stringify(nt));var zt=wt+":"+nt,Rt=ct[zt];Rt===void 0&&(Xe.push(nt),ct[zt]=Rt=Xe.length-1),Te.writeVarint(Rt)}}}function q(We,Te){return(Te<<3)+(7&We)}function W(We){return We<<1^We>>31}function se(We,Te){for(var ze=We.loadGeometry(),Ve=We.type,Xe=0,et=0,ct=ze.length,ot=0;ot<ct;ot++){var nt=ze[ot],ft=1;Ve===1&&(ft=nt.length),Te.writeVarint(q(1,ft));for(var wt=Ve===3?nt.length-1:nt.length,zt=0;zt<wt;zt++){zt===1&&Ve!==1&&Te.writeVarint(q(2,wt-1));var Rt=nt[zt].x-Xe,ci=nt[zt].y-et;Te.writeVarint(W(Rt)),Te.writeVarint(W(ci)),Xe+=Rt,et+=ci}Ve===3&&Te.writeVarint(q(7,1))}}function fe(We,Te){var ze=typeof We;ze==="string"?Te.writeStringField(1,We):ze==="boolean"?Te.writeBooleanField(7,We):ze==="number"&&(We%1!=0?Te.writeDoubleField(3,We):We<0?Te.writeSVarintField(6,We):Te.writeVarintField(5,We))}function ee(We,Te,ze,Ve,Xe,et){if(Xe-Ve<=ze)return;const ct=Ve+Xe>>1;oe(We,Te,ct,Ve,Xe,et%2),ee(We,Te,ze,Ve,ct-1,et+1),ee(We,Te,ze,ct+1,Xe,et+1)}function oe(We,Te,ze,Ve,Xe,et){for(;Xe>Ve;){if(Xe-Ve>600){const ft=Xe-Ve+1,wt=ze-Ve+1,zt=Math.log(ft),Rt=.5*Math.exp(2*zt/3),ci=.5*Math.sqrt(zt*Rt*(ft-Rt)/ft)*(wt-ft/2<0?-1:1);oe(We,Te,ze,Math.max(Ve,Math.floor(ze-wt*Rt/ft+ci)),Math.min(Xe,Math.floor(ze+(ft-wt)*Rt/ft+ci)),et)}const ct=Te[2*ze+et];let ot=Ve,nt=Xe;for(Ce(We,Te,Ve,ze),Te[2*Xe+et]>ct&&Ce(We,Te,Ve,Xe);ot<nt;){for(Ce(We,Te,ot,nt),ot++,nt--;Te[2*ot+et]<ct;)ot++;for(;Te[2*nt+et]>ct;)nt--}Te[2*Ve+et]===ct?Ce(We,Te,Ve,nt):(nt++,Ce(We,Te,nt,Xe)),nt<=ze&&(Ve=nt+1),ze<=nt&&(Xe=nt-1)}}function Ce(We,Te,ze,Ve){ge(We,ze,Ve),ge(Te,2*ze,2*Ve),ge(Te,2*ze+1,2*Ve+1)}function ge(We,Te,ze){const Ve=We[Te];We[Te]=We[ze],We[ze]=Ve}function Ee(We,Te,ze,Ve){const Xe=We-ze,et=Te-Ve;return Xe*Xe+et*et}N.exports=L,N.exports.fromVectorTileJs=L,N.exports.fromGeojsonVt=function(We,Te){Te=Te||{};var ze={};for(var Ve in We)ze[Ve]=new R(We[Ve].features,Te),ze[Ve].name=Ve,ze[Ve].version=Te.version,ze[Ve].extent=Te.extent;return L({layers:ze})},N.exports.GeoJSONWrapper=R;const J=We=>We[0],ie=We=>We[1];class le{constructor(Te,ze=J,Ve=ie,Xe=64,et=Float64Array){this.nodeSize=Xe,this.points=Te;const ct=Te.length<65536?Uint16Array:Uint32Array,ot=this.ids=new ct(Te.length),nt=this.coords=new et(2*Te.length);for(let ft=0;ft<Te.length;ft++)ot[ft]=ft,nt[2*ft]=ze(Te[ft]),nt[2*ft+1]=Ve(Te[ft]);ee(ot,nt,Xe,0,ot.length-1,0)}range(Te,ze,Ve,Xe){return function(et,ct,ot,nt,ft,wt,zt){const Rt=[0,et.length-1,0],ci=[];let Wt,gi;for(;Rt.length;){const vi=Rt.pop(),Hi=Rt.pop(),Ui=Rt.pop();if(Hi-Ui<=zt){for(let Ri=Ui;Ri<=Hi;Ri++)Wt=ct[2*Ri],gi=ct[2*Ri+1],Wt>=ot&&Wt<=ft&&gi>=nt&&gi<=wt&&ci.push(et[Ri]);continue}const qi=Math.floor((Ui+Hi)/2);Wt=ct[2*qi],gi=ct[2*qi+1],Wt>=ot&&Wt<=ft&&gi>=nt&&gi<=wt&&ci.push(et[qi]);const mi=(vi+1)%2;(vi===0?ot<=Wt:nt<=gi)&&(Rt.push(Ui),Rt.push(qi-1),Rt.push(mi)),(vi===0?ft>=Wt:wt>=gi)&&(Rt.push(qi+1),Rt.push(Hi),Rt.push(mi))}return ci}(this.ids,this.coords,Te,ze,Ve,Xe,this.nodeSize)}within(Te,ze,Ve){return function(Xe,et,ct,ot,nt,ft){const wt=[0,Xe.length-1,0],zt=[],Rt=nt*nt;for(;wt.length;){const ci=wt.pop(),Wt=wt.pop(),gi=wt.pop();if(Wt-gi<=ft){for(let mi=gi;mi<=Wt;mi++)Ee(et[2*mi],et[2*mi+1],ct,ot)<=Rt&&zt.push(Xe[mi]);continue}const vi=Math.floor((gi+Wt)/2),Hi=et[2*vi],Ui=et[2*vi+1];Ee(Hi,Ui,ct,ot)<=Rt&&zt.push(Xe[vi]);const qi=(ci+1)%2;(ci===0?ct-nt<=Hi:ot-nt<=Ui)&&(wt.push(gi),wt.push(vi-1),wt.push(qi)),(ci===0?ct+nt>=Hi:ot+nt>=Ui)&&(wt.push(vi+1),wt.push(Wt),wt.push(qi))}return zt}(this.ids,this.coords,Te,ze,Ve,this.nodeSize)}}const be={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:We=>We},te=Math.fround||(ae=new Float32Array(1),We=>(ae[0]=+We,ae[0]));var ae;class ce{constructor(Te){this.options=$e(Object.create(be),Te),this.trees=new Array(this.options.maxZoom+1)}load(Te){const{log:ze,minZoom:Ve,maxZoom:Xe,nodeSize:et}=this.options;ze&&console.time("total time");const ct=`prepare ${Te.length} points`;ze&&console.time(ct),this.points=Te;let ot=[];for(let nt=0;nt<Te.length;nt++)Te[nt].geometry&&ot.push(_e(Te[nt],nt));this.trees[Xe+1]=new le(ot,De,Se,et,Float32Array),ze&&console.timeEnd(ct);for(let nt=Xe;nt>=Ve;nt--){const ft=+Date.now();ot=this._cluster(ot,nt),this.trees[nt]=new le(ot,De,Se,et,Float32Array),ze&&console.log("z%d: %d clusters in %dms",nt,ot.length,+Date.now()-ft)}return ze&&console.timeEnd("total time"),this}getClusters(Te,ze){let Ve=((Te[0]+180)%360+360)%360-180;const Xe=Math.max(-90,Math.min(90,Te[1]));let et=Te[2]===180?180:((Te[2]+180)%360+360)%360-180;const ct=Math.max(-90,Math.min(90,Te[3]));if(Te[2]-Te[0]>=360)Ve=-180,et=180;else if(Ve>et){const wt=this.getClusters([Ve,Xe,180,ct],ze),zt=this.getClusters([-180,Xe,et,ct],ze);return wt.concat(zt)}const ot=this.trees[this._limitZoom(ze)],nt=ot.range(Le(Ve),me(ct),Le(et),me(Xe)),ft=[];for(const wt of nt){const zt=ot.points[wt];ft.push(zt.numPoints?Ne(zt):this.points[zt.index])}return ft}getChildren(Te){const ze=this._getOriginId(Te),Ve=this._getOriginZoom(Te),Xe="No cluster with the specified id.",et=this.trees[Ve];if(!et)throw new Error(Xe);const ct=et.points[ze];if(!ct)throw new Error(Xe);const ot=this.options.radius/(this.options.extent*Math.pow(2,Ve-1)),nt=et.within(ct.x,ct.y,ot),ft=[];for(const wt of nt){const zt=et.points[wt];zt.parentId===Te&&ft.push(zt.numPoints?Ne(zt):this.points[zt.index])}if(ft.length===0)throw new Error(Xe);return ft}getLeaves(Te,ze,Ve){const Xe=[];return this._appendLeaves(Xe,Te,ze=ze||10,Ve=Ve||0,0),Xe}getTile(Te,ze,Ve){const Xe=this.trees[this._limitZoom(Te)],et=Math.pow(2,Te),{extent:ct,radius:ot}=this.options,nt=ot/ct,ft=(Ve-nt)/et,wt=(Ve+1+nt)/et,zt={features:[]};return this._addTileFeatures(Xe.range((ze-nt)/et,ft,(ze+1+nt)/et,wt),Xe.points,ze,Ve,et,zt),ze===0&&this._addTileFeatures(Xe.range(1-nt/et,ft,1,wt),Xe.points,et,Ve,et,zt),ze===et-1&&this._addTileFeatures(Xe.range(0,ft,nt/et,wt),Xe.points,-1,Ve,et,zt),zt.features.length?zt:null}getClusterExpansionZoom(Te){let ze=this._getOriginZoom(Te)-1;for(;ze<=this.options.maxZoom;){const Ve=this.getChildren(Te);if(ze++,Ve.length!==1)break;Te=Ve[0].properties.cluster_id}return ze}_appendLeaves(Te,ze,Ve,Xe,et){const ct=this.getChildren(ze);for(const ot of ct){const nt=ot.properties;if(nt&&nt.cluster?et+nt.point_count<=Xe?et+=nt.point_count:et=this._appendLeaves(Te,nt.cluster_id,Ve,Xe,et):et<Xe?et++:Te.push(ot),Te.length===Ve)break}return et}_addTileFeatures(Te,ze,Ve,Xe,et,ct){for(const ot of Te){const nt=ze[ot],ft=nt.numPoints;let wt,zt,Rt;if(ft)wt=ke(nt),zt=nt.x,Rt=nt.y;else{const gi=this.points[nt.index];wt=gi.properties,zt=Le(gi.geometry.coordinates[0]),Rt=me(gi.geometry.coordinates[1])}const ci={type:1,geometry:[[Math.round(this.options.extent*(zt*et-Ve)),Math.round(this.options.extent*(Rt*et-Xe))]],tags:wt};let Wt;ft?Wt=nt.id:this.options.generateId?Wt=nt.index:this.points[nt.index].id&&(Wt=this.points[nt.index].id),Wt!==void 0&&(ci.id=Wt),ct.features.push(ci)}}_limitZoom(Te){return Math.max(this.options.minZoom,Math.min(Math.floor(+Te),this.options.maxZoom+1))}_cluster(Te,ze){const Ve=[],{radius:Xe,extent:et,reduce:ct,minPoints:ot}=this.options,nt=Xe/(et*Math.pow(2,ze));for(let ft=0;ft<Te.length;ft++){const wt=Te[ft];if(wt.zoom<=ze)continue;wt.zoom=ze;const zt=this.trees[ze+1],Rt=zt.within(wt.x,wt.y,nt),ci=wt.numPoints||1;let Wt=ci;for(const gi of Rt){const vi=zt.points[gi];vi.zoom>ze&&(Wt+=vi.numPoints||1)}if(Wt>ci&&Wt>=ot){let gi=wt.x*ci,vi=wt.y*ci,Hi=ct&&ci>1?this._map(wt,!0):null;const Ui=(ft<<5)+(ze+1)+this.points.length;for(const qi of Rt){const mi=zt.points[qi];if(mi.zoom<=ze)continue;mi.zoom=ze;const Ri=mi.numPoints||1;gi+=mi.x*Ri,vi+=mi.y*Ri,mi.parentId=Ui,ct&&(Hi||(Hi=this._map(wt,!0)),ct(Hi,this._map(mi)))}wt.parentId=Ui,Ve.push(xe(gi/Wt,vi/Wt,Ui,Wt,Hi))}else if(Ve.push(wt),Wt>1)for(const gi of Rt){const vi=zt.points[gi];vi.zoom<=ze||(vi.zoom=ze,Ve.push(vi))}}return Ve}_getOriginId(Te){return Te-this.points.length>>5}_getOriginZoom(Te){return(Te-this.points.length)%32}_map(Te,ze){if(Te.numPoints)return ze?$e({},Te.properties):Te.properties;const Ve=this.points[Te.index].properties,Xe=this.options.map(Ve);return ze&&Xe===Ve?$e({},Xe):Xe}}function xe(We,Te,ze,Ve,Xe){return{x:te(We),y:te(Te),zoom:1/0,id:ze,parentId:-1,numPoints:Ve,properties:Xe}}function _e(We,Te){const[ze,Ve]=We.geometry.coordinates;return{x:te(Le(ze)),y:te(me(Ve)),zoom:1/0,index:Te,parentId:-1}}function Ne(We){return{type:"Feature",id:We.id,properties:ke(We),geometry:{type:"Point",coordinates:[(Te=We.x,360*(Te-.5)),Re(We.y)]}};var Te}function ke(We){const Te=We.numPoints,ze=Te>=1e4?`${Math.round(Te/1e3)}k`:Te>=1e3?Math.round(Te/100)/10+"k":Te;return $e($e({},We.properties),{cluster:!0,cluster_id:We.id,point_count:Te,point_count_abbreviated:ze})}function Le(We){return We/360+.5}function me(We){const Te=Math.sin(We*Math.PI/180),ze=.5-.25*Math.log((1+Te)/(1-Te))/Math.PI;return ze<0?0:ze>1?1:ze}function Re(We){const Te=(180-360*We)*Math.PI/180;return 360*Math.atan(Math.exp(Te))/Math.PI-90}function $e(We,Te){for(const ze in Te)We[ze]=Te[ze];return We}function De(We){return We.x}function Se(We){return We.y}function Pe(We,Te,ze,Ve){for(var Xe,et=Ve,ct=ze-Te>>1,ot=ze-Te,nt=We[Te],ft=We[Te+1],wt=We[ze],zt=We[ze+1],Rt=Te+3;Rt<ze;Rt+=3){var ci=Fe(We[Rt],We[Rt+1],nt,ft,wt,zt);if(ci>et)Xe=Rt,et=ci;else if(ci===et){var Wt=Math.abs(Rt-ct);Wt<ot&&(Xe=Rt,ot=Wt)}}et>Ve&&(Xe-Te>3&&Pe(We,Te,Xe,Ve),We[Xe+2]=et,ze-Xe>3&&Pe(We,Xe,ze,Ve))}function Fe(We,Te,ze,Ve,Xe,et){var ct=Xe-ze,ot=et-Ve;if(ct!==0||ot!==0){var nt=((We-ze)*ct+(Te-Ve)*ot)/(ct*ct+ot*ot);nt>1?(ze=Xe,Ve=et):nt>0&&(ze+=ct*nt,Ve+=ot*nt)}return(ct=We-ze)*ct+(ot=Te-Ve)*ot}function je(We,Te,ze,Ve){var Xe={id:We===void 0?null:We,type:Te,geometry:ze,tags:Ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(et){var ct=et.geometry,ot=et.type;if(ot==="Point"||ot==="MultiPoint"||ot==="LineString")He(et,ct);else if(ot==="Polygon"||ot==="MultiLineString")for(var nt=0;nt<ct.length;nt++)He(et,ct[nt]);else if(ot==="MultiPolygon")for(nt=0;nt<ct.length;nt++)for(var ft=0;ft<ct[nt].length;ft++)He(et,ct[nt][ft])}(Xe),Xe}function He(We,Te){for(var ze=0;ze<Te.length;ze+=3)We.minX=Math.min(We.minX,Te[ze]),We.minY=Math.min(We.minY,Te[ze+1]),We.maxX=Math.max(We.maxX,Te[ze]),We.maxY=Math.max(We.maxY,Te[ze+1])}function Qe(We,Te,ze,Ve){if(Te.geometry){var Xe=Te.geometry.coordinates,et=Te.geometry.type,ct=Math.pow(ze.tolerance/((1<<ze.maxZoom)*ze.extent),2),ot=[],nt=Te.id;if(ze.promoteId?nt=Te.properties[ze.promoteId]:ze.generateId&&(nt=Ve||0),et==="Point")at(Xe,ot);else if(et==="MultiPoint")for(var ft=0;ft<Xe.length;ft++)at(Xe[ft],ot);else if(et==="LineString")rt(Xe,ot,ct,!1);else if(et==="MultiLineString"){if(ze.lineMetrics){for(ft=0;ft<Xe.length;ft++)rt(Xe[ft],ot=[],ct,!1),We.push(je(nt,"LineString",ot,Te.properties));return}dt(Xe,ot,ct,!1)}else if(et==="Polygon")dt(Xe,ot,ct,!0);else{if(et!=="MultiPolygon"){if(et==="GeometryCollection"){for(ft=0;ft<Te.geometry.geometries.length;ft++)Qe(We,{id:nt,geometry:Te.geometry.geometries[ft],properties:Te.properties},ze,Ve);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ft=0;ft<Xe.length;ft++){var wt=[];dt(Xe[ft],wt,ct,!0),ot.push(wt)}}We.push(je(nt,et,ot,Te.properties))}}function at(We,Te){Te.push(gt(We[0])),Te.push(Tt(We[1])),Te.push(0)}function rt(We,Te,ze,Ve){for(var Xe,et,ct=0,ot=0;ot<We.length;ot++){var nt=gt(We[ot][0]),ft=Tt(We[ot][1]);Te.push(nt),Te.push(ft),Te.push(0),ot>0&&(ct+=Ve?(Xe*ft-nt*et)/2:Math.sqrt(Math.pow(nt-Xe,2)+Math.pow(ft-et,2))),Xe=nt,et=ft}var wt=Te.length-3;Te[2]=1,Pe(Te,0,wt,ze),Te[wt+2]=1,Te.size=Math.abs(ct),Te.start=0,Te.end=Te.size}function dt(We,Te,ze,Ve){for(var Xe=0;Xe<We.length;Xe++){var et=[];rt(We[Xe],et,ze,Ve),Te.push(et)}}function gt(We){return We/360+.5}function Tt(We){var Te=Math.sin(We*Math.PI/180),ze=.5-.25*Math.log((1+Te)/(1-Te))/Math.PI;return ze<0?0:ze>1?1:ze}function Nt(We,Te,ze,Ve,Xe,et,ct,ot){if(Ve/=Te,et>=(ze/=Te)&&ct<Ve)return We;if(ct<ze||et>=Ve)return null;for(var nt=[],ft=0;ft<We.length;ft++){var wt=We[ft],zt=wt.geometry,Rt=wt.type,ci=Xe===0?wt.minX:wt.minY,Wt=Xe===0?wt.maxX:wt.maxY;if(ci>=ze&&Wt<Ve)nt.push(wt);else if(!(Wt<ze||ci>=Ve)){var gi=[];if(Rt==="Point"||Rt==="MultiPoint")mt(zt,gi,ze,Ve,Xe);else if(Rt==="LineString")St(zt,gi,ze,Ve,Xe,!1,ot.lineMetrics);else if(Rt==="MultiLineString")ii(zt,gi,ze,Ve,Xe,!1);else if(Rt==="Polygon")ii(zt,gi,ze,Ve,Xe,!0);else if(Rt==="MultiPolygon")for(var vi=0;vi<zt.length;vi++){var Hi=[];ii(zt[vi],Hi,ze,Ve,Xe,!0),Hi.length&&gi.push(Hi)}if(gi.length){if(ot.lineMetrics&&Rt==="LineString"){for(vi=0;vi<gi.length;vi++)nt.push(je(wt.id,Rt,gi[vi],wt.tags));continue}Rt!=="LineString"&&Rt!=="MultiLineString"||(gi.length===1?(Rt="LineString",gi=gi[0]):Rt="MultiLineString"),Rt!=="Point"&&Rt!=="MultiPoint"||(Rt=gi.length===3?"Point":"MultiPoint"),nt.push(je(wt.id,Rt,gi,wt.tags))}}}return nt.length?nt:null}function mt(We,Te,ze,Ve,Xe){for(var et=0;et<We.length;et+=3){var ct=We[et+Xe];ct>=ze&&ct<=Ve&&(Te.push(We[et]),Te.push(We[et+1]),Te.push(We[et+2]))}}function St(We,Te,ze,Ve,Xe,et,ct){for(var ot,nt,ft=kt(We),wt=Xe===0?Ht:fr,zt=We.start,Rt=0;Rt<We.length-3;Rt+=3){var ci=We[Rt],Wt=We[Rt+1],gi=We[Rt+2],vi=We[Rt+3],Hi=We[Rt+4],Ui=Xe===0?ci:Wt,qi=Xe===0?vi:Hi,mi=!1;ct&&(ot=Math.sqrt(Math.pow(ci-vi,2)+Math.pow(Wt-Hi,2))),Ui<ze?qi>ze&&(nt=wt(ft,ci,Wt,vi,Hi,ze),ct&&(ft.start=zt+ot*nt)):Ui>Ve?qi<Ve&&(nt=wt(ft,ci,Wt,vi,Hi,Ve),ct&&(ft.start=zt+ot*nt)):fi(ft,ci,Wt,gi),qi<ze&&Ui>=ze&&(nt=wt(ft,ci,Wt,vi,Hi,ze),mi=!0),qi>Ve&&Ui<=Ve&&(nt=wt(ft,ci,Wt,vi,Hi,Ve),mi=!0),!et&&mi&&(ct&&(ft.end=zt+ot*nt),Te.push(ft),ft=kt(We)),ct&&(zt+=ot)}var Ri=We.length-3;ci=We[Ri],Wt=We[Ri+1],gi=We[Ri+2],(Ui=Xe===0?ci:Wt)>=ze&&Ui<=Ve&&fi(ft,ci,Wt,gi),Ri=ft.length-3,et&&Ri>=3&&(ft[Ri]!==ft[0]||ft[Ri+1]!==ft[1])&&fi(ft,ft[0],ft[1],ft[2]),ft.length&&Te.push(ft)}function kt(We){var Te=[];return Te.size=We.size,Te.start=We.start,Te.end=We.end,Te}function ii(We,Te,ze,Ve,Xe,et){for(var ct=0;ct<We.length;ct++)St(We[ct],Te,ze,Ve,Xe,et,!1)}function fi(We,Te,ze,Ve){We.push(Te),We.push(ze),We.push(Ve)}function Ht(We,Te,ze,Ve,Xe,et){var ct=(et-Te)/(Ve-Te);return We.push(et),We.push(ze+(Xe-ze)*ct),We.push(1),ct}function fr(We,Te,ze,Ve,Xe,et){var ct=(et-ze)/(Xe-ze);return We.push(Te+(Ve-Te)*ct),We.push(et),We.push(1),ct}function nr(We,Te){for(var ze=[],Ve=0;Ve<We.length;Ve++){var Xe,et=We[Ve],ct=et.type;if(ct==="Point"||ct==="MultiPoint"||ct==="LineString")Xe=vr(et.geometry,Te);else if(ct==="MultiLineString"||ct==="Polygon"){Xe=[];for(var ot=0;ot<et.geometry.length;ot++)Xe.push(vr(et.geometry[ot],Te))}else if(ct==="MultiPolygon")for(Xe=[],ot=0;ot<et.geometry.length;ot++){for(var nt=[],ft=0;ft<et.geometry[ot].length;ft++)nt.push(vr(et.geometry[ot][ft],Te));Xe.push(nt)}ze.push(je(et.id,ct,Xe,et.tags))}return ze}function vr(We,Te){var ze=[];ze.size=We.size,We.start!==void 0&&(ze.start=We.start,ze.end=We.end);for(var Ve=0;Ve<We.length;Ve+=3)ze.push(We[Ve]+Te,We[Ve+1],We[Ve+2]);return ze}function Rr(We,Te){if(We.transformed)return We;var ze,Ve,Xe,et=1<<We.z,ct=We.x,ot=We.y;for(ze=0;ze<We.features.length;ze++){var nt=We.features[ze],ft=nt.geometry,wt=nt.type;if(nt.geometry=[],wt===1)for(Ve=0;Ve<ft.length;Ve+=2)nt.geometry.push(sr(ft[Ve],ft[Ve+1],Te,et,ct,ot));else for(Ve=0;Ve<ft.length;Ve++){var zt=[];for(Xe=0;Xe<ft[Ve].length;Xe+=2)zt.push(sr(ft[Ve][Xe],ft[Ve][Xe+1],Te,et,ct,ot));nt.geometry.push(zt)}}return We.transformed=!0,We}function sr(We,Te,ze,Ve,Xe,et){return[Math.round(ze*(We*Ve-Xe)),Math.round(ze*(Te*Ve-et))]}function xr(We,Te,ze,Ve,Xe){for(var et=Te===Xe.maxZoom?0:Xe.tolerance/((1<<Te)*Xe.extent),ct={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ze,y:Ve,z:Te,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ot=0;ot<We.length;ot++){ct.numFeatures++,ht(ct,We[ot],et,Xe);var nt=We[ot].minX,ft=We[ot].minY,wt=We[ot].maxX,zt=We[ot].maxY;nt<ct.minX&&(ct.minX=nt),ft<ct.minY&&(ct.minY=ft),wt>ct.maxX&&(ct.maxX=wt),zt>ct.maxY&&(ct.maxY=zt)}return ct}function ht(We,Te,ze,Ve){var Xe=Te.geometry,et=Te.type,ct=[];if(et==="Point"||et==="MultiPoint")for(var ot=0;ot<Xe.length;ot+=3)ct.push(Xe[ot]),ct.push(Xe[ot+1]),We.numPoints++,We.numSimplified++;else if(et==="LineString")bt(ct,Xe,We,ze,!1,!1);else if(et==="MultiLineString"||et==="Polygon")for(ot=0;ot<Xe.length;ot++)bt(ct,Xe[ot],We,ze,et==="Polygon",ot===0);else if(et==="MultiPolygon")for(var nt=0;nt<Xe.length;nt++){var ft=Xe[nt];for(ot=0;ot<ft.length;ot++)bt(ct,ft[ot],We,ze,!0,ot===0)}if(ct.length){var wt=Te.tags||null;if(et==="LineString"&&Ve.lineMetrics){for(var zt in wt={},Te.tags)wt[zt]=Te.tags[zt];wt.mapbox_clip_start=Xe.start/Xe.size,wt.mapbox_clip_end=Xe.end/Xe.size}var Rt={geometry:ct,type:et==="Polygon"||et==="MultiPolygon"?3:et==="LineString"||et==="MultiLineString"?2:1,tags:wt};Te.id!==null&&(Rt.id=Te.id),We.features.push(Rt)}}function bt(We,Te,ze,Ve,Xe,et){var ct=Ve*Ve;if(Ve>0&&Te.size<(Xe?ct:Ve))ze.numPoints+=Te.length/3;else{for(var ot=[],nt=0;nt<Te.length;nt+=3)(Ve===0||Te[nt+2]>ct)&&(ze.numSimplified++,ot.push(Te[nt]),ot.push(Te[nt+1])),ze.numPoints++;Xe&&function(ft,wt){for(var zt=0,Rt=0,ci=ft.length,Wt=ci-2;Rt<ci;Wt=Rt,Rt+=2)zt+=(ft[Rt]-ft[Wt])*(ft[Rt+1]+ft[Wt+1]);if(zt>0===wt)for(Rt=0,ci=ft.length;Rt<ci/2;Rt+=2){var gi=ft[Rt],vi=ft[Rt+1];ft[Rt]=ft[ci-2-Rt],ft[Rt+1]=ft[ci-1-Rt],ft[ci-2-Rt]=gi,ft[ci-1-Rt]=vi}}(ot,et),We.push(ot)}}function Mt(We,Te){var ze=(Te=this.options=function(Xe,et){for(var ct in et)Xe[ct]=et[ct];return Xe}(Object.create(this.options),Te)).debug;if(ze&&console.time("preprocess data"),Te.maxZoom<0||Te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Te.promoteId&&Te.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ve=function(Xe,et){var ct=[];if(Xe.type==="FeatureCollection")for(var ot=0;ot<Xe.features.length;ot++)Qe(ct,Xe.features[ot],et,ot);else Qe(ct,Xe.type==="Feature"?Xe:{geometry:Xe},et);return ct}(We,Te);this.tiles={},this.tileCoords=[],ze&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Te.indexMaxZoom,Te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ve=function(Xe,et){var ct=et.buffer/et.extent,ot=Xe,nt=Nt(Xe,1,-1-ct,ct,0,-1,2,et),ft=Nt(Xe,1,1-ct,2+ct,0,-1,2,et);return(nt||ft)&&(ot=Nt(Xe,1,-ct,1+ct,0,-1,2,et)||[],nt&&(ot=nr(nt,1).concat(ot)),ft&&(ot=ot.concat(nr(ft,-1)))),ot}(Ve,Te),Ve.length&&this.splitTile(Ve,0,0,0),ze&&(Ve.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function $t(We,Te,ze){return 32*((1<<We)*ze+Te)+We}function Zt(We,Te){const ze=We.tileID.canonical;if(!this._geoJSONIndex)return Te(null,null);const Ve=this._geoJSONIndex.getTile(ze.z,ze.x,ze.y);if(!Ve)return Te(null,null);const Xe=new S(Ve.features);let et=N.exports(Xe);et.byteOffset===0&&et.byteLength===et.buffer.byteLength||(et=new Uint8Array(et)),Te(null,{vectorTile:Xe,rawData:et.buffer})}Mt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Mt.prototype.splitTile=function(We,Te,ze,Ve,Xe,et,ct){for(var ot=[We,Te,ze,Ve],nt=this.options,ft=nt.debug;ot.length;){Ve=ot.pop(),ze=ot.pop(),Te=ot.pop(),We=ot.pop();var wt=1<<Te,zt=$t(Te,ze,Ve),Rt=this.tiles[zt];if(!Rt&&(ft>1&&console.time("creation"),Rt=this.tiles[zt]=xr(We,Te,ze,Ve,nt),this.tileCoords.push({z:Te,x:ze,y:Ve}),ft)){ft>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Te,ze,Ve,Rt.numFeatures,Rt.numPoints,Rt.numSimplified),console.timeEnd("creation"));var ci="z"+Te;this.stats[ci]=(this.stats[ci]||0)+1,this.total++}if(Rt.source=We,Xe){if(Te===nt.maxZoom||Te===Xe)continue;var Wt=1<<Xe-Te;if(ze!==Math.floor(et/Wt)||Ve!==Math.floor(ct/Wt))continue}else if(Te===nt.indexMaxZoom||Rt.numPoints<=nt.indexMaxPoints)continue;if(Rt.source=null,We.length!==0){ft>1&&console.time("clipping");var gi,vi,Hi,Ui,qi,mi,Ri=.5*nt.buffer/nt.extent,Xr=.5-Ri,on=.5+Ri,En=1+Ri;gi=vi=Hi=Ui=null,qi=Nt(We,wt,ze-Ri,ze+on,0,Rt.minX,Rt.maxX,nt),mi=Nt(We,wt,ze+Xr,ze+En,0,Rt.minX,Rt.maxX,nt),We=null,qi&&(gi=Nt(qi,wt,Ve-Ri,Ve+on,1,Rt.minY,Rt.maxY,nt),vi=Nt(qi,wt,Ve+Xr,Ve+En,1,Rt.minY,Rt.maxY,nt),qi=null),mi&&(Hi=Nt(mi,wt,Ve-Ri,Ve+on,1,Rt.minY,Rt.maxY,nt),Ui=Nt(mi,wt,Ve+Xr,Ve+En,1,Rt.minY,Rt.maxY,nt),mi=null),ft>1&&console.timeEnd("clipping"),ot.push(gi||[],Te+1,2*ze,2*Ve),ot.push(vi||[],Te+1,2*ze,2*Ve+1),ot.push(Hi||[],Te+1,2*ze+1,2*Ve),ot.push(Ui||[],Te+1,2*ze+1,2*Ve+1)}}},Mt.prototype.getTile=function(We,Te,ze){var Ve=this.options,Xe=Ve.extent,et=Ve.debug;if(We<0||We>24)return null;var ct=1<<We,ot=$t(We,Te=(Te%ct+ct)%ct,ze);if(this.tiles[ot])return Rr(this.tiles[ot],Xe);et>1&&console.log("drilling down to z%d-%d-%d",We,Te,ze);for(var nt,ft=We,wt=Te,zt=ze;!nt&&ft>0;)ft--,wt=Math.floor(wt/2),zt=Math.floor(zt/2),nt=this.tiles[$t(ft,wt,zt)];return nt&&nt.source?(et>1&&console.log("found parent tile z%d-%d-%d",ft,wt,zt),et>1&&console.time("drilling down"),this.splitTile(nt.source,ft,wt,zt,We,Te,ze),et>1&&console.timeEnd("drilling down"),this.tiles[ot]?Rr(this.tiles[ot],Xe):null):null};class ki extends _{constructor(Te,ze,Ve,Xe){super(Te,ze,Ve,Zt),Xe&&(this.loadGeoJSON=Xe)}loadData(Te,ze){var Ve;(Ve=this._pendingRequest)===null||Ve===void 0||Ve.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Xe=!!(Te&&Te.request&&Te.request.collectResourceTiming)&&new s.RequestPerformance(Te.request);this._pendingCallback=ze,this._pendingRequest=this.loadGeoJSON(Te,(et,ct)=>{if(delete this._pendingCallback,delete this._pendingRequest,et||!ct)return ze(et);if(typeof ct!="object")return ze(new Error(`Input data given to '${Te.source}' is not a valid GeoJSON object.`));{k(ct,!0);try{if(Te.filter){const nt=s.createExpression(Te.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(nt.result==="error")throw new Error(nt.value.map(wt=>`${wt.key}: ${wt.message}`).join(", "));ct={type:"FeatureCollection",features:ct.features.filter(wt=>nt.value.evaluate({zoom:0},wt))}}this._geoJSONIndex=Te.cluster?new ce(function({superclusterOptions:nt,clusterProperties:ft}){if(!ft||!nt)return nt;const wt={},zt={},Rt={accumulated:null,zoom:0},ci={properties:null},Wt=Object.keys(ft);for(const gi of Wt){const[vi,Hi]=ft[gi],Ui=s.createExpression(Hi),qi=s.createExpression(typeof vi=="string"?[vi,["accumulated"],["get",gi]]:vi);wt[gi]=Ui.value,zt[gi]=qi.value}return nt.map=gi=>{ci.properties=gi;const vi={};for(const Hi of Wt)vi[Hi]=wt[Hi].evaluate(Rt,ci);return vi},nt.reduce=(gi,vi)=>{ci.properties=vi;for(const Hi of Wt)Rt.accumulated=gi[Hi],gi[Hi]=zt[Hi].evaluate(Rt,ci)},nt}(Te)).load(ct.features):function(nt,ft){return new Mt(nt,ft)}(ct,Te.geojsonVtOptions)}catch(nt){return ze(nt)}this.loaded={};const ot={};if(Xe){const nt=Xe.finish();nt&&(ot.resourceTiming={},ot.resourceTiming[Te.source]=JSON.parse(JSON.stringify(nt)))}ze(null,ot)}})}reloadTile(Te,ze){const Ve=this.loaded;return Ve&&Ve[Te.uid]?super.reloadTile(Te,ze):this.loadTile(Te,ze)}loadGeoJSON(Te,ze){if(Te.request)return s.getJSON(Te.request,ze);if(typeof Te.data=="string")try{ze(null,JSON.parse(Te.data))}catch{ze(new Error(`Input data given to '${Te.source}' is not a valid GeoJSON object.`))}else ze(new Error(`Input data given to '${Te.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(Te,ze){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ze()}getClusterExpansionZoom(Te,ze){try{ze(null,this._geoJSONIndex.getClusterExpansionZoom(Te.clusterId))}catch(Ve){ze(Ve)}}getClusterChildren(Te,ze){try{ze(null,this._geoJSONIndex.getChildren(Te.clusterId))}catch(Ve){ze(Ve)}}getClusterLeaves(Te,ze){try{ze(null,this._geoJSONIndex.getLeaves(Te.clusterId,Te.limit,Te.offset))}catch(Ve){ze(Ve)}}}class Di{constructor(Te){this.self=Te,this.actor=new s.Actor(Te,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:_,geojson:ki},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ze,Ve)=>{if(this.workerSourceTypes[ze])throw new Error(`Worker source with name "${ze}" already registered.`);this.workerSourceTypes[ze]=Ve},this.self.registerRTLTextPlugin=ze=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=ze.applyArabicShaping,s.plugin.processBidirectionalText=ze.processBidirectionalText,s.plugin.processStyledBidirectionalText=ze.processStyledBidirectionalText}}setReferrer(Te,ze){this.referrer=ze}setImages(Te,ze,Ve){this.availableImages[Te]=ze;for(const Xe in this.workerSources[Te]){const et=this.workerSources[Te][Xe];for(const ct in et)et[ct].availableImages=ze}Ve()}setLayers(Te,ze,Ve){this.getLayerIndex(Te).replace(ze),Ve()}updateLayers(Te,ze,Ve){this.getLayerIndex(Te).update(ze.layers,ze.removedIds),Ve()}loadTile(Te,ze,Ve){this.getWorkerSource(Te,ze.type,ze.source).loadTile(ze,Ve)}loadDEMTile(Te,ze,Ve){this.getDEMWorkerSource(Te,ze.source).loadTile(ze,Ve)}reloadTile(Te,ze,Ve){this.getWorkerSource(Te,ze.type,ze.source).reloadTile(ze,Ve)}abortTile(Te,ze,Ve){this.getWorkerSource(Te,ze.type,ze.source).abortTile(ze,Ve)}removeTile(Te,ze,Ve){this.getWorkerSource(Te,ze.type,ze.source).removeTile(ze,Ve)}removeDEMTile(Te,ze){this.getDEMWorkerSource(Te,ze.source).removeTile(ze)}removeSource(Te,ze,Ve){if(!this.workerSources[Te]||!this.workerSources[Te][ze.type]||!this.workerSources[Te][ze.type][ze.source])return;const Xe=this.workerSources[Te][ze.type][ze.source];delete this.workerSources[Te][ze.type][ze.source],Xe.removeSource!==void 0?Xe.removeSource(ze,Ve):Ve()}loadWorkerSource(Te,ze,Ve){try{this.self.importScripts(ze.url),Ve()}catch(Xe){Ve(Xe.toString())}}syncRTLPluginState(Te,ze,Ve){try{s.plugin.setState(ze);const Xe=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&Xe!=null){this.self.importScripts(Xe);const et=s.plugin.isParsed();Ve(et?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Xe}`),et)}}catch(Xe){Ve(Xe.toString())}}getAvailableImages(Te){let ze=this.availableImages[Te];return ze||(ze=[]),ze}getLayerIndex(Te){let ze=this.layerIndexes[Te];return ze||(ze=this.layerIndexes[Te]=new m),ze}getWorkerSource(Te,ze,Ve){if(this.workerSources[Te]||(this.workerSources[Te]={}),this.workerSources[Te][ze]||(this.workerSources[Te][ze]={}),!this.workerSources[Te][ze][Ve]){const Xe={send:(et,ct,ot)=>{this.actor.send(et,ct,ot,Te)}};this.workerSources[Te][ze][Ve]=new this.workerSourceTypes[ze](Xe,this.getLayerIndex(Te),this.getAvailableImages(Te))}return this.workerSources[Te][ze][Ve]}getDEMWorkerSource(Te,ze){return this.demWorkerSources[Te]||(this.demWorkerSources[Te]={}),this.demWorkerSources[Te][ze]||(this.demWorkerSources[Te][ze]=new C),this.demWorkerSources[Te][ze]}enforceCacheSizeLimit(Te,ze){s.enforceCacheSizeLimit(ze)}}return s.isWorker()&&(self.worker=new Di(self)),Di}),a(["./shared"],function(s){var h=p;function p(I){return!function(l){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var T,D,V=new Blob([""],{type:"text/javascript"}),re=URL.createObjectURL(V);try{D=new Worker(re),T=!0}catch{T=!1}return D&&D.terminate(),URL.revokeObjectURL(re),T}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var T=document.createElement("canvas");T.width=T.height=1;var D=T.getContext("2d");if(!D)return!1;var V=D.getImageData(0,0,1,1);return V&&V.width===T.width}()?(m[f=l&&l.failIfMajorPerformanceCaveat]===void 0&&(m[f]=function(T){var D,V=function(re){var pe=document.createElement("canvas"),ye=Object.create(p.webGLContextAttributes);return ye.failIfMajorPerformanceCaveat=re,pe.getContext("webgl",ye)||pe.getContext("experimental-webgl",ye)}(T);if(!V)return!1;try{D=V.createShader(V.VERTEX_SHADER)}catch{return!1}return!(!D||V.isContextLost())&&(V.shaderSource(D,"void main() {}"),V.compileShader(D),V.getShaderParameter(D,V.COMPILE_STATUS)===!0)}(f)),m[f]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var f}(I)}var m={};function y(I,l){if(Array.isArray(I)){if(!Array.isArray(l)||I.length!==l.length)return!1;for(let f=0;f<I.length;f++)if(!y(I[f],l[f]))return!1;return!0}if(typeof I=="object"&&I!==null&&l!==null){if(typeof l!="object"||Object.keys(I).length!==Object.keys(l).length)return!1;for(const f in I)if(!y(I[f],l[f]))return!1;return!0}return I===l}p.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class g{static testProp(l){if(!g.docStyle)return l[0];for(let f=0;f<l.length;f++)if(l[f]in g.docStyle)return l[f];return l[0]}static create(l,f,T){const D=window.document.createElement(l);return f!==void 0&&(D.className=f),T&&T.appendChild(D),D}static createNS(l,f){return window.document.createElementNS(l,f)}static disableDrag(){g.docStyle&&g.selectProp&&(g.userSelect=g.docStyle[g.selectProp],g.docStyle[g.selectProp]="none")}static enableDrag(){g.docStyle&&g.selectProp&&(g.docStyle[g.selectProp]=g.userSelect)}static setTransform(l,f){l.style[g.transformProp]=f}static addEventListener(l,f,T,D={}){l.addEventListener(f,T,"passive"in D?D:D.capture)}static removeEventListener(l,f,T,D={}){l.removeEventListener(f,T,"passive"in D?D:D.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",g.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",g.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",g.suppressClickInternal,!0)},0)}static mousePos(l,f){const T=l.getBoundingClientRect();return new s.pointGeometry(f.clientX-T.left-l.clientLeft,f.clientY-T.top-l.clientTop)}static touchPos(l,f){const T=l.getBoundingClientRect(),D=[];for(let V=0;V<f.length;V++)D.push(new s.pointGeometry(f[V].clientX-T.left-l.clientLeft,f[V].clientY-T.top-l.clientTop));return D}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}}g.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,g.selectProp=g.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),g.transformProp=g.testProp(["transform","WebkitTransform"]);class x{constructor(l){this._transformRequestFn=l}transformRequest(l,f){return this._transformRequestFn&&this._transformRequestFn(l,f)||{url:l}}normalizeSpriteURL(l,f,T){const D=function(V){const re=V.match(v);if(!re)throw new Error(`Unable to parse URL "${V}"`);return{protocol:re[1],authority:re[2],path:re[3]||"/",params:re[4]?re[4].split("&"):[]}}(l);return D.path+=`${f}${T}`,function(V){const re=V.params.length?`?${V.params.join("&")}`:"";return`${V.protocol}://${V.authority}${V.path}${re}`}(D)}setTransformRequest(l){this._transformRequestFn=l}}const v=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class _{constructor(l,f,T,D){this.context=l,this.format=T,this.texture=l.gl.createTexture(),this.update(f,D)}update(l,f,T){const{width:D,height:V}=l,re=!(this.size&&this.size[0]===D&&this.size[1]===V||T),{context:pe}=this,{gl:ye}=pe;if(this.useMipmap=!!(f&&f.useMipmap),ye.bindTexture(ye.TEXTURE_2D,this.texture),pe.pixelStoreUnpackFlipY.set(!1),pe.pixelStoreUnpack.set(1),pe.pixelStoreUnpackPremultiplyAlpha.set(this.format===ye.RGBA&&(!f||f.premultiply!==!1)),re)this.size=[D,V],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||s.isImageBitmap(l)?ye.texImage2D(ye.TEXTURE_2D,0,this.format,this.format,ye.UNSIGNED_BYTE,l):ye.texImage2D(ye.TEXTURE_2D,0,this.format,D,V,0,this.format,ye.UNSIGNED_BYTE,l.data);else{const{x:Ae,y:Be}=T||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||s.isImageBitmap(l)?ye.texSubImage2D(ye.TEXTURE_2D,0,Ae,Be,ye.RGBA,ye.UNSIGNED_BYTE,l):ye.texSubImage2D(ye.TEXTURE_2D,0,Ae,Be,D,V,ye.RGBA,ye.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ye.generateMipmap(ye.TEXTURE_2D)}bind(l,f,T){const{context:D}=this,{gl:V}=D;V.bindTexture(V.TEXTURE_2D,this.texture),T!==V.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(T=V.LINEAR),l!==this.filter&&(V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MAG_FILTER,l),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MIN_FILTER,T||l),this.filter=l),f!==this.wrap&&(V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_S,f),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_T,f),this.wrap=f)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}function C(I){const{userImage:l}=I;return!!(l&&l.render&&l.render())&&(I.data.replace(new Uint8Array(l.data.buffer)),!0)}class k extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:f,callback:T}of this.requestors)this._notify(f,T);this.requestors=[]}}getImage(l){return this.images[l]}addImage(l,f){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,f)&&(this.images[l]=f)}_validate(l,f){let T=!0;return this._validateStretch(f.stretchX,f.data&&f.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),T=!1),this._validateStretch(f.stretchY,f.data&&f.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),T=!1),this._validateContent(f.content,f)||(this.fire(new s.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),T=!1),T}_validateStretch(l,f){if(!l)return!0;let T=0;for(const D of l){if(D[0]<T||D[1]<D[0]||f<D[1])return!1;T=D[1]}return!0}_validateContent(l,f){return!(l&&(l.length!==4||l[0]<0||f.data.width<l[0]||l[1]<0||f.data.height<l[1]||l[2]<0||f.data.width<l[2]||l[3]<0||f.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,f){const T=this.images[l];if(T.data.width!==f.data.width||T.data.height!==f.data.height)throw new Error(`size mismatch between old image (${T.data.width}x${T.data.height}) and new image (${f.data.width}x${f.data.height}).`);f.version=T.version+1,this.images[l]=f,this.updatedImages[l]=!0}removeImage(l){const f=this.images[l];delete this.images[l],delete this.patterns[l],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,f){let T=!0;if(!this.isLoaded())for(const D of l)this.images[D]||(T=!1);this.isLoaded()||T?this._notify(l,f):this.requestors.push({ids:l,callback:f})}_notify(l,f){const T={};for(const D of l){this.images[D]||this.fire(new s.Event("styleimagemissing",{id:D}));const V=this.images[D];V?T[D]={data:V.data.clone(),pixelRatio:V.pixelRatio,sdf:V.sdf,version:V.version,stretchX:V.stretchX,stretchY:V.stretchY,content:V.content,hasRenderCallback:!!(V.userImage&&V.userImage.render)}:s.warnOnce(`Image "${D}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}f(null,T)}getPixelSize(){const{width:l,height:f}=this.atlasImage;return{width:l,height:f}}getPattern(l){const f=this.patterns[l],T=this.getImage(l);if(!T)return null;if(f&&f.position.version===T.version)return f.position;if(f)f.position.version=T.version;else{const D={w:T.data.width+2,h:T.data.height+2,x:0,y:0},V=new s.ImagePosition(D,T);this.patterns[l]={bin:D,position:V}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const f=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new _(l,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const V in this.patterns)l.push(this.patterns[V].bin);const{w:f,h:T}=s.potpack(l),D=this.atlasImage;D.resize({width:f||1,height:T||1});for(const V in this.patterns){const{bin:re}=this.patterns[V],pe=re.x+1,ye=re.y+1,Ae=this.images[V].data,Be=Ae.width,Ge=Ae.height;s.RGBAImage.copy(Ae,D,{x:0,y:0},{x:pe,y:ye},{width:Be,height:Ge}),s.RGBAImage.copy(Ae,D,{x:0,y:Ge-1},{x:pe,y:ye-1},{width:Be,height:1}),s.RGBAImage.copy(Ae,D,{x:0,y:0},{x:pe,y:ye+Ge},{width:Be,height:1}),s.RGBAImage.copy(Ae,D,{x:Be-1,y:0},{x:pe-1,y:ye},{width:1,height:Ge}),s.RGBAImage.copy(Ae,D,{x:0,y:0},{x:pe+Be,y:ye},{width:1,height:Ge})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const f of l){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const T=this.images[f];T||s.warnOnce(`Image with ID: "${f}" was not found`),C(T)&&this.updateImage(f,T)}}}const w=1e20;function E(I,l,f,T,D,V,re,pe,ye){for(let Ae=l;Ae<l+T;Ae++)A(I,f*V+Ae,V,D,re,pe,ye);for(let Ae=f;Ae<f+D;Ae++)A(I,Ae*V+l,1,T,re,pe,ye)}function A(I,l,f,T,D,V,re){V[0]=0,re[0]=-1e20,re[1]=w,D[0]=I[l];for(let pe=1,ye=0,Ae=0;pe<T;pe++){D[pe]=I[l+pe*f];const Be=pe*pe;do{const Ge=V[ye];Ae=(D[pe]-D[Ge]+Be-Ge*Ge)/(pe-Ge)/2}while(Ae<=re[ye]&&--ye>-1);ye++,V[ye]=pe,re[ye]=Ae,re[ye+1]=w}for(let pe=0,ye=0;pe<T;pe++){for(;re[ye+1]<pe;)ye++;const Ae=V[ye],Be=pe-Ae;I[l+pe*f]=D[Ae]+Be*Be}}class M{constructor(l,f){this.requestManager=l,this.localIdeographFontFamily=f,this.entries={}}setURL(l){this.url=l}getGlyphs(l,f){const T=[];for(const D in l)for(const V of l[D])T.push({stack:D,id:V});s.asyncAll(T,({stack:D,id:V},re)=>{let pe=this.entries[D];pe||(pe=this.entries[D]={glyphs:{},requests:{},ranges:{}});let ye=pe.glyphs[V];if(ye!==void 0)return void re(null,{stack:D,id:V,glyph:ye});if(ye=this._tinySDF(pe,D,V),ye)return pe.glyphs[V]=ye,void re(null,{stack:D,id:V,glyph:ye});const Ae=Math.floor(V/256);if(256*Ae>65535)return void re(new Error("glyphs > 65535 not supported"));if(pe.ranges[Ae])return void re(null,{stack:D,id:V,glyph:ye});let Be=pe.requests[Ae];Be||(Be=pe.requests[Ae]=[],M.loadGlyphRange(D,Ae,this.url,this.requestManager,(Ge,Ye)=>{if(Ye){for(const it in Ye)this._doesCharSupportLocalGlyph(+it)||(pe.glyphs[+it]=Ye[+it]);pe.ranges[Ae]=!0}for(const it of Be)it(Ge,Ye);delete pe.requests[Ae]})),Be.push((Ge,Ye)=>{Ge?re(Ge):Ye&&re(null,{stack:D,id:V,glyph:Ye[V]||null})})},(D,V)=>{if(D)f(D);else if(V){const re={};for(const{stack:pe,id:ye,glyph:Ae}of V)(re[pe]||(re[pe]={}))[ye]=Ae&&{id:Ae.id,bitmap:Ae.bitmap.clone(),metrics:Ae.metrics};f(null,re)}})}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&(s.unicodeBlockLookup["CJK Unified Ideographs"](l)||s.unicodeBlockLookup["Hangul Syllables"](l)||s.unicodeBlockLookup.Hiragana(l)||s.unicodeBlockLookup.Katakana(l))}_tinySDF(l,f,T){const D=this.localIdeographFontFamily;if(!D||!this._doesCharSupportLocalGlyph(T))return;let V=l.tinySDF;if(!V){let pe="400";/bold/i.test(f)?pe="900":/medium/i.test(f)?pe="500":/light/i.test(f)&&(pe="200"),V=l.tinySDF=new M.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:D,fontWeight:pe})}const re=V.draw(String.fromCharCode(T));return{id:T,bitmap:new s.AlphaImage({width:re.width||30,height:re.height||30},re.data),metrics:{width:re.glyphWidth||24,height:re.glyphHeight||24,left:re.glyphLeft||0,top:re.glyphTop-27||-8,advance:re.glyphAdvance||24}}}}M.loadGlyphRange=function(I,l,f,T,D){const V=256*l,re=V+255,pe=T.transformRequest(f.replace("{fontstack}",I).replace("{range}",`${V}-${re}`),s.ResourceType.Glyphs);s.getArrayBuffer(pe,(ye,Ae)=>{if(ye)D(ye);else if(Ae){const Be={};for(const Ge of s.parseGlyphPbf(Ae))Be[Ge.id]=Ge;D(null,Be)}})},M.TinySDF=class{constructor({fontSize:I=24,buffer:l=3,radius:f=8,cutoff:T=.25,fontFamily:D="sans-serif",fontWeight:V="normal",fontStyle:re="normal"}={}){this.buffer=l,this.cutoff=T,this.radius=f;const pe=this.size=I+4*l,ye=this._createCanvas(pe),Ae=this.ctx=ye.getContext("2d",{willReadFrequently:!0});Ae.font=`${re} ${V} ${I}px ${D}`,Ae.textBaseline="alphabetic",Ae.textAlign="left",Ae.fillStyle="black",this.gridOuter=new Float64Array(pe*pe),this.gridInner=new Float64Array(pe*pe),this.f=new Float64Array(pe),this.z=new Float64Array(pe+1),this.v=new Uint16Array(pe)}_createCanvas(I){const l=document.createElement("canvas");return l.width=l.height=I,l}draw(I){const{width:l,actualBoundingBoxAscent:f,actualBoundingBoxDescent:T,actualBoundingBoxLeft:D,actualBoundingBoxRight:V}=this.ctx.measureText(I),re=Math.ceil(f),pe=Math.min(this.size-this.buffer,Math.ceil(V-D)),ye=Math.min(this.size-this.buffer,re+Math.ceil(T)),Ae=pe+2*this.buffer,Be=ye+2*this.buffer,Ge=Math.max(Ae*Be,0),Ye=new Uint8ClampedArray(Ge),it={data:Ye,width:Ae,height:Be,glyphWidth:pe,glyphHeight:ye,glyphTop:re,glyphLeft:0,glyphAdvance:l};if(pe===0||ye===0)return it;const{ctx:Je,buffer:tt,gridInner:pt,gridOuter:vt}=this;Je.clearRect(tt,tt,pe,ye),Je.fillText(I,tt,tt+re);const Ct=Je.getImageData(tt,tt,pe,ye);vt.fill(w,0,Ge),pt.fill(0,0,Ge);for(let st=0;st<ye;st++)for(let It=0;It<pe;It++){const Et=Ct.data[4*(st*pe+It)+3]/255;if(Et===0)continue;const Ot=(st+tt)*Ae+It+tt;if(Et===1)vt[Ot]=0,pt[Ot]=w;else{const jt=.5-Et;vt[Ot]=jt>0?jt*jt:0,pt[Ot]=jt<0?jt*jt:0}}E(vt,0,0,Ae,Be,Ae,this.f,this.v,this.z),E(pt,tt,tt,pe,ye,Ae,this.f,this.v,this.z);for(let st=0;st<Ge;st++){const It=Math.sqrt(vt[st])-Math.sqrt(pt[st]);Ye[st]=Math.round(255-255*(It/this.radius+this.cutoff))}return it}};const S=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(I,l){return s.sphericalToCartesian(I.expression.evaluate(l))}interpolate(I,l,f){return{x:s.number(I.x,l.x,f),y:s.number(I.y,l.y,f),z:s.number(I.z,l.z,f)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)}),N="-transition";class Y extends s.Evented{constructor(l){super(),this._transitionable=new s.Transitionable(S),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,f={}){if(!this._validate(s.validateLight,l,f))for(const T in l){const D=l[T];T.endsWith(N)?this._transitionable.setTransition(T.slice(0,-N.length),D):this._transitionable.setValue(T,D)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,f,T){return(!T||T.validate!==!1)&&s.emitValidationErrors(this,l.call(s.validateStyle,s.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class Z{constructor(l,f){this.width=l,this.height=f,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,f){const T=l.join(",")+String(f);return this.dashEntry[T]||(this.dashEntry[T]=this.addDash(l,f)),this.dashEntry[T]}getDashRanges(l,f,T){const D=[];let V=l.length%2==1?-l[l.length-1]*T:0,re=l[0]*T,pe=!0;D.push({left:V,right:re,isDash:pe,zeroLength:l[0]===0});let ye=l[0];for(let Ae=1;Ae<l.length;Ae++){pe=!pe;const Be=l[Ae];V=ye*T,ye+=Be,re=ye*T,D.push({left:V,right:re,isDash:pe,zeroLength:Be===0})}return D}addRoundDash(l,f,T){const D=f/2;for(let V=-T;V<=T;V++){const re=this.width*(this.nextRow+T+V);let pe=0,ye=l[pe];for(let Ae=0;Ae<this.width;Ae++){Ae/ye.right>1&&(ye=l[++pe]);const Be=Math.abs(Ae-ye.left),Ge=Math.abs(Ae-ye.right),Ye=Math.min(Be,Ge);let it;const Je=V/T*(D+1);if(ye.isDash){const tt=D-Math.abs(Je);it=Math.sqrt(Ye*Ye+tt*tt)}else it=D-Math.sqrt(Ye*Ye+Je*Je);this.data[re+Ae]=Math.max(0,Math.min(255,it+128))}}}addRegularDash(l){for(let pe=l.length-1;pe>=0;--pe){const ye=l[pe],Ae=l[pe+1];ye.zeroLength?l.splice(pe,1):Ae&&Ae.isDash===ye.isDash&&(Ae.left=ye.left,l.splice(pe,1))}const f=l[0],T=l[l.length-1];f.isDash===T.isDash&&(f.left=T.left-this.width,T.right=f.right+this.width);const D=this.width*this.nextRow;let V=0,re=l[V];for(let pe=0;pe<this.width;pe++){pe/re.right>1&&(re=l[++V]);const ye=Math.abs(pe-re.left),Ae=Math.abs(pe-re.right),Be=Math.min(ye,Ae);this.data[D+pe]=Math.max(0,Math.min(255,(re.isDash?Be:-Be)+128))}}addDash(l,f){const T=f?7:0,D=2*T+1;if(this.nextRow+D>this.height)return s.warnOnce("LineAtlas out of space"),null;let V=0;for(let pe=0;pe<l.length;pe++)V+=l[pe];if(V!==0){const pe=this.width/V,ye=this.getDashRanges(l,this.width,pe);f?this.addRoundDash(ye,pe,T):this.addRegularDash(ye)}const re={y:(this.nextRow+T+.5)/this.height,height:2*T/this.height,width:V};return this.nextRow+=D,this.dirty=!0,re}bind(l){const f=l.gl;this.texture?(f.bindTexture(f.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,f.texSubImage2D(f.TEXTURE_2D,0,0,0,this.width,this.height,f.ALPHA,f.UNSIGNED_BYTE,this.data))):(this.texture=f.createTexture(),f.bindTexture(f.TEXTURE_2D,this.texture),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texImage2D(f.TEXTURE_2D,0,f.ALPHA,this.width,this.height,0,f.ALPHA,f.UNSIGNED_BYTE,this.data))}}class K{constructor(l,f){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const T=this.workerPool.acquire(this.id);for(let D=0;D<T.length;D++){const V=new K.Actor(T[D],f,this.id);V.name=`Worker ${D}`,this.actors.push(V)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,f,T){s.asyncAll(this.actors,(D,V)=>{D.send(l,f,V)},T=T||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function U(I,l,f){const T=function(D,V){if(D)return f(D);if(V){const re=s.pick(s.extend(V,I),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);V.vector_layers&&(re.vectorLayers=V.vector_layers,re.vectorLayerIds=re.vectorLayers.map(pe=>pe.id)),f(null,re)}};return I.url?s.getJSON(l.transformRequest(I.url,s.ResourceType.Source),T):s.exported.frame(()=>T(null,I))}K.Actor=s.Actor;class ${constructor(l,f,T){this.bounds=s.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=f||0,this.maxzoom=T||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const f=Math.pow(2,l.z),T=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*f),D=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*f),V=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*f),re=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*f);return l.x>=T&&l.x<V&&l.y>=D&&l.y<re}}class B extends s.Evented{constructor(l,f,T,D){if(super(),this.id=l,this.dispatcher=T,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(f,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(D)}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=U(this._options,this.map._requestManager,(l,f)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),l?this.fire(new s.ErrorEvent(l)):f&&(s.extend(this,f),f.bounds&&(this.tileBounds=new $(f.bounds,this.minzoom,this.maxzoom)),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.cancel(),l(),this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}loadTile(l,f){const T=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),D={request:this.map._requestManager.transformRequest(T,s.ResourceType.Tile),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function V(re,pe){return delete l.request,l.aborted?f(null):re&&re.status!==404?f(re):(pe&&pe.resourceTiming&&(l.resourceTiming=pe.resourceTiming),this.map._refreshExpiredTiles&&pe&&l.setExpiryData(pe),l.loadVectorData(pe,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),f(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}D.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired"?l.state==="loading"?l.reloadCallback=f:l.request=l.actor.send("reloadTile",D,V.bind(this)):(l.actor=this.dispatcher.getActor(),l.request=l.actor.send("loadTile",D,V.bind(this)))}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id},void 0)}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class R extends s.Evented{constructor(l,f,T,D){super(),this.id=l,this.dispatcher=T,this.setEventedParent(D),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},f),s.extend(this,s.pick(f,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=U(this._options,this.map._requestManager,(l,f)=>{this._tileJSONRequest=null,this._loaded=!0,l?this.fire(new s.ErrorEvent(l)):f&&(s.extend(this,f),f.bounds&&(this.tileBounds=new $(f.bounds,this.minzoom,this.maxzoom)),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,f){const T=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.request=s.getImage(this.map._requestManager.transformRequest(T,s.ResourceType.Tile),(D,V,re)=>{if(delete l.request,l.aborted)l.state="unloaded",f(null);else if(D)l.state="errored",f(D);else if(V){this.map._refreshExpiredTiles&&l.setExpiryData(re);const pe=this.map.painter.context,ye=pe.gl;l.texture=this.map.painter.getTileTexture(V.width),l.texture?l.texture.update(V,{useMipmap:!0}):(l.texture=new _(pe,V,ye.RGBA,{useMipmap:!0}),l.texture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE,ye.LINEAR_MIPMAP_NEAREST),pe.extTextureFilterAnisotropic&&ye.texParameterf(ye.TEXTURE_2D,pe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,pe.extTextureFilterAnisotropicMax)),l.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),f(null)}})}abortTile(l,f){l.request&&(l.request.cancel(),delete l.request),f()}unloadTile(l,f){l.texture&&this.map.painter.saveTileTexture(l.texture),f()}hasTransition(){return!1}}let L;class G extends R{constructor(l,f,T,D){super(l,f,T,D),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},f),this.encoding=f.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(l,f){const T=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function D(V,re){V&&(l.state="errored",f(V)),re&&(l.dem=re,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded",f(null))}l.request=s.getImage(this.map._requestManager.transformRequest(T,s.ResourceType.Tile),(function(V,re){if(delete l.request,l.aborted)l.state="unloaded",f(null);else if(V)l.state="errored",f(V);else if(re){this.map._refreshExpiredTiles&&l.setExpiryData(re),delete re.cacheControl,delete re.expires;const pe=s.isImageBitmap(re)&&(L==null&&(L=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),L)?re:s.exported.getImageData(re,1),ye={uid:l.uid,coord:l.tileID,source:this.id,rawImageData:pe,encoding:this.encoding};l.actor&&l.state!=="expired"||(l.actor=this.dispatcher.getActor(),l.actor.send("loadDEMTile",ye,D.bind(this)))}}).bind(this)),l.neighboringTiles=this._getNeighboringTiles(l.tileID)}_getNeighboringTiles(l){const f=l.canonical,T=Math.pow(2,f.z),D=(f.x-1+T)%T,V=f.x===0?l.wrap-1:l.wrap,re=(f.x+1+T)%T,pe=f.x+1===T?l.wrap+1:l.wrap,ye={};return ye[new s.OverscaledTileID(l.overscaledZ,V,f.z,D,f.y).key]={backfilled:!1},ye[new s.OverscaledTileID(l.overscaledZ,pe,f.z,re,f.y).key]={backfilled:!1},f.y>0&&(ye[new s.OverscaledTileID(l.overscaledZ,V,f.z,D,f.y-1).key]={backfilled:!1},ye[new s.OverscaledTileID(l.overscaledZ,l.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},ye[new s.OverscaledTileID(l.overscaledZ,pe,f.z,re,f.y-1).key]={backfilled:!1}),f.y+1<T&&(ye[new s.OverscaledTileID(l.overscaledZ,V,f.z,D,f.y+1).key]={backfilled:!1},ye[new s.OverscaledTileID(l.overscaledZ,l.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},ye[new s.OverscaledTileID(l.overscaledZ,pe,f.z,re,f.y+1).key]={backfilled:!1}),ye}unloadTile(l){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&l.actor.send("removeDEMTile",{uid:l.uid,source:this.id})}}class F extends s.Evented{constructor(l,f,T,D){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=T.getActor(),this.setEventedParent(D),this._data=f.data,this._options=s.extend({},f),this._collectResourceTiming=f.collectResourceTiming,f.maxzoom!==void 0&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId;const V=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:f.cluster||!1,geojsonVtOptions:{buffer:(f.buffer!==void 0?f.buffer:128)*V,tolerance:(f.tolerance!==void 0?f.tolerance:.375)*V,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:f.clusterMaxZoom!==void 0?f.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,f.clusterMinPoints||2),extent:s.EXTENT,radius:(f.clusterRadius||50)*V,log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._updateWorkerData("content"),this}getClusterExpansionZoom(l,f){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:l,source:this.id},f),this}getClusterChildren(l,f){return this.actor.send("geojson.getClusterChildren",{clusterId:l,source:this.id},f),this}getClusterLeaves(l,f,T,D){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:l,limit:f,offset:T},D),this}_updateWorkerData(l){const f=s.extend({},this.workerOptions),T=this._data;typeof T=="string"?(f.request=this.map._requestManager.transformRequest(s.exported.resolveURL(T),s.ResourceType.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(T),this._pendingLoads++,this.fire(new s.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,f,(D,V)=>{if(this._pendingLoads--,this._removed||V&&V.abandoned)return void this.fire(new s.Event("dataabort",{dataType:"source",sourceDataType:l}));let re=null;if(V&&V.resourceTiming&&V.resourceTiming[this.id]&&(re=V.resourceTiming[this.id].slice(0)),D)return void this.fire(new s.ErrorEvent(D));const pe={dataType:"source",sourceDataType:l};this._collectResourceTiming&&re&&re.length>0&&s.extend(pe,{resourceTiming:re}),this.fire(new s.Event("data",pe))})}loaded(){return this._pendingLoads===0}loadTile(l,f){const T=l.actor?"reloadTile":"loadTile";l.actor=this.actor;const D={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};l.request=this.actor.send(T,D,(V,re)=>(delete l.request,l.unloadVectorData(),l.aborted?f(null):V?f(V):(l.loadVectorData(re,this.map.painter,T==="reloadTile"),f(null))))}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.aborted=!0}unloadTile(l){l.unloadVectorData(),this.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var j=s.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class q extends s.Evented{constructor(l,f,T,D){super(),this.id=l,this.dispatcher=T,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(D),this.options=f}load(l,f){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(T,D)=>{this._loaded=!0,T?this.fire(new s.ErrorEvent(T)):D&&(this.image=D,l&&(this.coordinates=l),f&&f(),this._finishLoading())})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this.options.url=l.url,this.load(l.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}setCoordinates(l){this.coordinates=l;const f=l.map(s.MercatorCoordinate.fromLngLat);this.tileID=function(D){let V=1/0,re=1/0,pe=-1/0,ye=-1/0;for(const Ye of D)V=Math.min(V,Ye.x),re=Math.min(re,Ye.y),pe=Math.max(pe,Ye.x),ye=Math.max(ye,Ye.y);const Ae=Math.max(pe-V,ye-re),Be=Math.max(0,Math.floor(-Math.log(Ae)/Math.LN2)),Ge=Math.pow(2,Be);return new s.CanonicalTileID(Be,Math.floor((V+pe)/2*Ge),Math.floor((re+ye)/2*Ge))}(f),this.minzoom=this.maxzoom=this.tileID.z;const T=f.map(D=>this.tileID.getTilePoint(D)._round());return this._boundsArray=new s.RasterBoundsArray,this._boundsArray.emplaceBack(T[0].x,T[0].y,0,0),this._boundsArray.emplaceBack(T[1].x,T[1].y,s.EXTENT,0),this._boundsArray.emplaceBack(T[3].x,T[3].y,0,s.EXTENT),this._boundsArray.emplaceBack(T[2].x,T[2].y,s.EXTENT,s.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,f=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,j.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new _(l,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));for(const T in this.tiles){const D=this.tiles[T];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture)}}loadTile(l,f){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},f(null)):(l.state="errored",f(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class W extends q{constructor(l,f,T,D){super(l,f,T,D),this.roundZoom=!0,this.type="video",this.options=f}load(){this._loaded=!1;const l=this.options;this.urls=[];for(const f of l.urls)this.urls.push(this.map._requestManager.transformRequest(f,s.ResourceType.Source).url);s.getVideo(this.urls,(f,T)=>{this._loaded=!0,f?this.fire(new s.ErrorEvent(f)):T&&(this.video=T,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const f=this.video.seekable;l<f.start(0)||l>f.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${f.start(0)} and ${f.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,f=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,j.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,this.video)):(this.texture=new _(l,this.video,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));for(const T in this.tiles){const D=this.tiles[T];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class se extends q{constructor(l,f,T,D){super(l,f,T,D),f.coordinates?Array.isArray(f.coordinates)&&f.coordinates.length===4&&!f.coordinates.some(V=>!Array.isArray(V)||V.length!==2||V.some(re=>typeof re!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${l}`,null,'missing required property "coordinates"'))),f.animate&&typeof f.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),f.canvas?typeof f.canvas=="string"||f.canvas instanceof HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${l}`,null,'missing required property "canvas"'))),this.options=f,this.animate=f.animate===void 0||f.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const f=this.map.painter.context,T=f.gl;this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,j.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new _(f,this.canvas,T.RGBA,{premultiply:!0});for(const D in this.tiles){const V=this.tiles[D];V.state!=="loaded"&&(V.state="loaded",V.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const fe={vector:B,raster:R,"raster-dem":G,geojson:F,video:W,image:q,canvas:se};function ee(I,l){const f=s.create();return s.translate(f,f,[1,1,0]),s.scale(f,f,[.5*I.width,.5*I.height,1]),s.multiply(f,f,I.calculatePosMatrix(l.toUnwrapped()))}function oe(I,l,f,T,D,V){const re=function(Ge,Ye,it){if(Ge)for(const Je of Ge){const tt=Ye[Je];if(tt&&tt.source===it&&tt.type==="fill-extrusion")return!0}else for(const Je in Ye){const tt=Ye[Je];if(tt.source===it&&tt.type==="fill-extrusion")return!0}return!1}(D&&D.layers,l,I.id),pe=V.maxPitchScaleFactor(),ye=I.tilesIn(T,pe,re);ye.sort(Ce);const Ae=[];for(const Ge of ye)Ae.push({wrappedTileID:Ge.tileID.wrapped().key,queryResults:Ge.tile.queryRenderedFeatures(l,f,I._state,Ge.queryGeometry,Ge.cameraQueryGeometry,Ge.scale,D,V,pe,ee(I.transform,Ge.tileID))});const Be=function(Ge){const Ye={},it={};for(const Je of Ge){const tt=Je.queryResults,pt=Je.wrappedTileID,vt=it[pt]=it[pt]||{};for(const Ct in tt){const st=tt[Ct],It=vt[Ct]=vt[Ct]||{},Et=Ye[Ct]=Ye[Ct]||[];for(const Ot of st)It[Ot.featureIndex]||(It[Ot.featureIndex]=!0,Et.push(Ot))}}return Ye}(Ae);for(const Ge in Be)Be[Ge].forEach(Ye=>{const it=Ye.feature,Je=I.getFeatureState(it.layer["source-layer"],it.id);it.source=it.layer.source,it.layer["source-layer"]&&(it.sourceLayer=it.layer["source-layer"]),it.state=Je});return Be}function Ce(I,l){const f=I.tileID,T=l.tileID;return f.overscaledZ-T.overscaledZ||f.canonical.y-T.canonical.y||f.wrap-T.wrap||f.canonical.x-T.canonical.x}class ge{constructor(l,f){this.tileID=l,this.uid=s.uniqueId(),this.uses=0,this.tileSize=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const f=l+this.timeAdded;f<s.exported.now()||this.fadeEndTime&&f<this.fadeEndTime||(this.fadeEndTime=f)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.textures.forEach(f=>l.saveTileTexture(f)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(l,f,T){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(D,V){const re={};if(!V)return re;for(const pe of D){const ye=pe.layerIds.map(Ae=>V.getLayer(Ae)).filter(Boolean);if(ye.length!==0){pe.layers=ye,pe.stateDependentLayerIds&&(pe.stateDependentLayers=pe.stateDependentLayerIds.map(Ae=>ye.filter(Be=>Be.id===Ae)[0]));for(const Ae of ye)re[Ae.id]=pe}}return re}(l.buckets,f.style),this.hasSymbolBuckets=!1;for(const D in this.buckets){const V=this.buckets[D];if(V instanceof s.SymbolBucket){if(this.hasSymbolBuckets=!0,!T)break;V.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const D in this.buckets){const V=this.buckets[D];if(V instanceof s.SymbolBucket&&V.hasRTLText){this.hasRTLText=!0,s.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const D in this.buckets){const V=this.buckets[D];this.queryPadding=Math.max(this.queryPadding,f.style.getLayer(D).queryRadius(V))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new s.CollisionBoxArray}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const T in this.buckets){const D=this.buckets[T];D.uploadPending()&&D.upload(l)}const f=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new _(l,this.imageAtlas.image,f.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new _(l,this.glyphAtlasImage,f.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,f,T,D,V,re,pe,ye,Ae,Be){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:D,cameraQueryGeometry:V,scale:re,tileSize:this.tileSize,pixelPosMatrix:Be,transform:ye,params:pe,queryPadding:this.queryPadding*Ae},l,f,T):{}}querySourceFeatures(l,f){const T=this.latestFeatureIndex;if(!T||!T.rawTileData)return;const D=T.loadVTLayers(),V=f?f.sourceLayer:"",re=D._geojsonTileLayer||D[V];if(!re)return;const pe=s.createFilter(f&&f.filter),{z:ye,x:Ae,y:Be}=this.tileID.canonical,Ge={z:ye,x:Ae,y:Be};for(let Ye=0;Ye<re.length;Ye++){const it=re.feature(Ye);if(pe.needGeometry){const pt=s.toEvaluationFeature(it,!0);if(!pe.filter(new s.EvaluationParameters(this.tileID.overscaledZ),pt,this.tileID.canonical))continue}else if(!pe.filter(new s.EvaluationParameters(this.tileID.overscaledZ),it))continue;const Je=T.getId(it,V),tt=new s.GeoJSONFeature(it,ye,Ae,Be,Je);tt.tile=Ge,l.push(tt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const f=this.expirationTime;if(l.cacheControl){const T=s.parseCacheControl(l.cacheControl);T["max-age"]&&(this.expirationTime=Date.now()+1e3*T["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const T=Date.now();let D=!1;if(this.expirationTime>T)D=!1;else if(f)if(this.expirationTime<f)D=!0;else{const V=this.expirationTime-f;V?this.expirationTime=T+Math.max(V,3e4):D=!0}else D=!0;D?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,f){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const T=this.latestFeatureIndex.loadVTLayers();for(const D in this.buckets){if(!f.style.hasLayer(D))continue;const V=this.buckets[D],re=V.layers[0].sourceLayer||"_geojsonTileLayer",pe=T[re],ye=l[re];if(!pe||!ye||Object.keys(ye).length===0)continue;V.update(ye,pe,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Ae=f&&f.style&&f.style.getLayer(D);Ae&&(this.queryPadding=Math.max(this.queryPadding,Ae.queryRadius(V)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<s.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=s.exported.now()+l}setDependencies(l,f){const T={};for(const D of f)T[D]=!0;this.dependencies[l]=T}hasDependency(l,f){for(const T of l){const D=this.dependencies[T];if(D){for(const V of f)if(D[V])return!0}}return!1}}class Ee{constructor(l,f){this.max=l,this.onRemove=f,this.reset()}reset(){for(const l in this.data)for(const f of this.data[l])f.timeout&&clearTimeout(f.timeout),this.onRemove(f.value);return this.data={},this.order=[],this}add(l,f,T){const D=l.wrapped().key;this.data[D]===void 0&&(this.data[D]=[]);const V={value:f,timeout:void 0};if(T!==void 0&&(V.timeout=setTimeout(()=>{this.remove(l,V)},T)),this.data[D].push(V),this.order.push(D),this.order.length>this.max){const re=this._getAndRemoveByKey(this.order[0]);re&&this.onRemove(re)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const f=this.data[l].shift();return f.timeout&&clearTimeout(f.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),f.value}getByKey(l){const f=this.data[l];return f?f[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,f){if(!this.has(l))return this;const T=l.wrapped().key,D=f===void 0?0:this.data[T].indexOf(f),V=this.data[T][D];return this.data[T].splice(D,1),V.timeout&&clearTimeout(V.timeout),this.data[T].length===0&&delete this.data[T],this.onRemove(V.value),this.order.splice(this.order.indexOf(T),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const f=this._getAndRemoveByKey(this.order[0]);f&&this.onRemove(f)}return this}filter(l){const f=[];for(const T in this.data)for(const D of this.data[T])l(D.value)||f.push(D);for(const T of f)this.remove(T.value.tileID,T)}}class J{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,f,T){const D=String(f);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][D]=this.stateChanges[l][D]||{},s.extend(this.stateChanges[l][D],T),this.deletedStates[l]===null){this.deletedStates[l]={};for(const V in this.state[l])V!==D&&(this.deletedStates[l][V]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][D]===null){this.deletedStates[l][D]={};for(const V in this.state[l][D])T[V]||(this.deletedStates[l][D][V]=null)}else for(const V in T)this.deletedStates[l]&&this.deletedStates[l][D]&&this.deletedStates[l][D][V]===null&&delete this.deletedStates[l][D][V]}removeFeatureState(l,f,T){if(this.deletedStates[l]===null)return;const D=String(f);if(this.deletedStates[l]=this.deletedStates[l]||{},T&&f!==void 0)this.deletedStates[l][D]!==null&&(this.deletedStates[l][D]=this.deletedStates[l][D]||{},this.deletedStates[l][D][T]=null);else if(f!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][D])for(T in this.deletedStates[l][D]={},this.stateChanges[l][D])this.deletedStates[l][D][T]=null;else this.deletedStates[l][D]=null;else this.deletedStates[l]=null}getState(l,f){const T=String(f),D=s.extend({},(this.state[l]||{})[T],(this.stateChanges[l]||{})[T]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const V=this.deletedStates[l][f];if(V===null)return{};for(const re in V)delete D[re]}return D}initializeTileState(l,f){l.setFeatureState(this.state,f)}coalesceChanges(l,f){const T={};for(const D in this.stateChanges){this.state[D]=this.state[D]||{};const V={};for(const re in this.stateChanges[D])this.state[D][re]||(this.state[D][re]={}),s.extend(this.state[D][re],this.stateChanges[D][re]),V[re]=this.state[D][re];T[D]=V}for(const D in this.deletedStates){this.state[D]=this.state[D]||{};const V={};if(this.deletedStates[D]===null)for(const re in this.state[D])V[re]={},this.state[D][re]={};else for(const re in this.deletedStates[D]){if(this.deletedStates[D][re]===null)this.state[D][re]={};else for(const pe of Object.keys(this.deletedStates[D][re]))delete this.state[D][re][pe];V[re]=this.state[D][re]}T[D]=T[D]||{},s.extend(T[D],V)}if(this.stateChanges={},this.deletedStates={},Object.keys(T).length!==0)for(const D in l)l[D].setFeatureState(T,f)}}class ie extends s.Evented{constructor(l,f,T){super(),this.id=l,this.dispatcher=T,this.on("data",D=>{D.dataType==="source"&&D.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&D.dataType==="source"&&D.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(D,V,re,pe){const ye=new fe[V.type](D,V,re,pe);if(ye.id!==D)throw new Error(`Expected Source id to be ${D} instead of ${ye.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],ye),ye}(l,f,T,this),this._tiles={},this._cache=new Ee(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new J}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const l in this._tiles){const f=this._tiles[l];if(f.state!=="loaded"&&f.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,f){return this._source.loadTile(l,f)}_unloadTile(l){if(this._source.unloadTile)return this._source.unloadTile(l,()=>{})}_abortTile(l){this._source.abortTile&&this._source.abortTile(l,()=>{}),this._source.fire(new s.Event("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const f in this._tiles){const T=this._tiles[f];T.upload(l),T.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(l=>l.tileID).sort(le).map(l=>l.key)}getRenderableIds(l){const f=[];for(const T in this._tiles)this._isIdRenderable(T,l)&&f.push(this._tiles[T]);return l?f.sort((T,D)=>{const V=T.tileID,re=D.tileID,pe=new s.pointGeometry(V.canonical.x,V.canonical.y)._rotate(this.transform.angle),ye=new s.pointGeometry(re.canonical.x,re.canonical.y)._rotate(this.transform.angle);return V.overscaledZ-re.overscaledZ||ye.y-pe.y||ye.x-pe.x}).map(T=>T.tileID.key):f.map(T=>T.tileID).sort(le).map(T=>T.key)}hasRenderableParent(l){const f=this.findLoadedParent(l,0);return!!f&&this._isIdRenderable(f.tileID.key)}_isIdRenderable(l,f){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(f||!this._tiles[l].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)this._tiles[l].state!=="errored"&&this._reloadTile(l,"reloading")}}_reloadTile(l,f){const T=this._tiles[l];T&&(T.state!=="loading"&&(T.state=f),this._loadTile(T,this._tileLoaded.bind(this,T,l,f)))}_tileLoaded(l,f,T,D){if(D)return l.state="errored",void(D.status!==404?this._source.fire(new s.ErrorEvent(D,{tile:l})):this.update(this.transform,this.terrain));l.timeAdded=s.exported.now(),T==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(f,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new s.Event("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const f=this.getRenderableIds();for(let D=0;D<f.length;D++){const V=f[D];if(l.neighboringTiles&&l.neighboringTiles[V]){const re=this.getTileByID(V);T(l,re),T(re,l)}}function T(D,V){D.needsHillshadePrepare=!0,D.needsTerrainPrepare=!0;let re=V.tileID.canonical.x-D.tileID.canonical.x;const pe=V.tileID.canonical.y-D.tileID.canonical.y,ye=Math.pow(2,D.tileID.canonical.z),Ae=V.tileID.key;re===0&&pe===0||Math.abs(pe)>1||(Math.abs(re)>1&&(Math.abs(re+ye)===1?re+=ye:Math.abs(re-ye)===1&&(re-=ye)),V.dem&&D.dem&&(D.dem.backfillBorder(V.dem,re,pe),D.neighboringTiles&&D.neighboringTiles[Ae]&&(D.neighboringTiles[Ae].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,f,T,D){for(const V in this._tiles){let re=this._tiles[V];if(D[V]||!re.hasData()||re.tileID.overscaledZ<=f||re.tileID.overscaledZ>T)continue;let pe=re.tileID;for(;re&&re.tileID.overscaledZ>f+1;){const Ae=re.tileID.scaledTo(re.tileID.overscaledZ-1);re=this._tiles[Ae.key],re&&re.hasData()&&(pe=Ae)}let ye=pe;for(;ye.overscaledZ>f;)if(ye=ye.scaledTo(ye.overscaledZ-1),l[ye.key]){D[pe.key]=pe;break}}}findLoadedParent(l,f){if(l.key in this._loadedParentTiles){const T=this._loadedParentTiles[l.key];return T&&T.tileID.overscaledZ>=f?T:null}for(let T=l.overscaledZ-1;T>=f;T--){const D=l.scaledTo(T),V=this._getLoadedTile(D);if(V)return V}}_getLoadedTile(l){const f=this._tiles[l.key];return f&&f.hasData()?f:this._cache.getByKey(l.wrapped().key)}updateCacheSize(l){const f=Math.ceil(l.width/this._source.tileSize)+1,T=Math.ceil(l.height/this._source.tileSize)+1,D=Math.floor(f*T*5),V=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,D):D;this._cache.setMaxSize(V)}handleWrapJump(l){const f=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,f){const T={};for(const D in this._tiles){const V=this._tiles[D];V.tileID=V.tileID.unwrapTo(V.tileID.wrap+f),T[V.tileID.key]=V}this._tiles=T;for(const D in this._timers)clearTimeout(this._timers[D]),delete this._timers[D];for(const D in this._tiles)this._setTileReloadTimer(D,this._tiles[D])}}update(l,f){if(this.transform=l,this.terrain=f,!this._sourceLoaded||this._paused)return;let T;this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?T=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(Ae=>new s.OverscaledTileID(Ae.canonical.z,Ae.wrap,Ae.canonical.z,Ae.canonical.x,Ae.canonical.y)):(T=l.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:f}),this._source.hasTile&&(T=T.filter(Ae=>this._source.hasTile(Ae)))):T=[];const D=l.coveringZoomLevel(this._source),V=Math.max(D-ie.maxOverzooming,this._source.minzoom),re=Math.max(D+ie.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Ae={};for(const Be of T)if(Be.canonical.z>this._source.minzoom){const Ge=Be.scaledTo(Be.canonical.z-1);Ae[Ge.key]=Ge;const Ye=Be.scaledTo(Math.max(this._source.minzoom,Math.min(Be.canonical.z,5)));Ae[Ye.key]=Ye}T=T.concat(Object.values(Ae))}const pe=this._updateRetainedTiles(T,D);if(be(this._source.type)){const Ae={},Be={},Ge=Object.keys(pe);for(const Ye of Ge){const it=pe[Ye],Je=this._tiles[Ye];if(!Je||Je.fadeEndTime&&Je.fadeEndTime<=s.exported.now())continue;const tt=this.findLoadedParent(it,V);tt&&(this._addTile(tt.tileID),Ae[tt.tileID.key]=tt.tileID),Be[Ye]=it}this._retainLoadedChildren(Be,D,re,pe);for(const Ye in Ae)pe[Ye]||(this._coveredTiles[Ye]=!0,pe[Ye]=Ae[Ye]);if(f){const Ye={},it={};for(const Je of T)this._tiles[Je.key].hasData()?Ye[Je.key]=Je:it[Je.key]=Je;for(const Je in it){const tt=it[Je].children(this._source.maxzoom);this._tiles[tt[0].key]&&this._tiles[tt[1].key]&&this._tiles[tt[2].key]&&this._tiles[tt[3].key]&&(Ye[tt[0].key]=pe[tt[0].key]=tt[0],Ye[tt[1].key]=pe[tt[1].key]=tt[1],Ye[tt[2].key]=pe[tt[2].key]=tt[2],Ye[tt[3].key]=pe[tt[3].key]=tt[3],delete it[Je])}for(const Je in it){const tt=this.findLoadedParent(it[Je],this._source.minzoom);if(tt){Ye[tt.tileID.key]=pe[tt.tileID.key]=tt.tileID;for(const pt in Ye)Ye[pt].isChildOf(tt.tileID)&&delete Ye[pt]}}for(const Je in this._tiles)Ye[Je]||(this._coveredTiles[Je]=!0)}}for(const Ae in pe)this._tiles[Ae].clearFadeHold();const ye=s.keysDifference(this._tiles,pe);for(const Ae of ye){const Be=this._tiles[Ae];Be.hasSymbolBuckets&&!Be.holdingForFade()?Be.setHoldDuration(this.map._fadeDuration):Be.hasSymbolBuckets&&!Be.symbolFadeFinished()||this._removeTile(Ae)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(l)}_updateRetainedTiles(l,f){const T={},D={},V=Math.max(f-ie.maxOverzooming,this._source.minzoom),re=Math.max(f+ie.maxUnderzooming,this._source.minzoom),pe={};for(const ye of l){const Ae=this._addTile(ye);T[ye.key]=ye,Ae.hasData()||f<this._source.maxzoom&&(pe[ye.key]=ye)}this._retainLoadedChildren(pe,f,re,T);for(const ye of l){let Ae=this._tiles[ye.key];if(Ae.hasData())continue;if(f+1>this._source.maxzoom){const Ge=ye.children(this._source.maxzoom)[0],Ye=this.getTile(Ge);if(Ye&&Ye.hasData()){T[Ge.key]=Ge;continue}}else{const Ge=ye.children(this._source.maxzoom);if(T[Ge[0].key]&&T[Ge[1].key]&&T[Ge[2].key]&&T[Ge[3].key])continue}let Be=Ae.wasRequested();for(let Ge=ye.overscaledZ-1;Ge>=V;--Ge){const Ye=ye.scaledTo(Ge);if(D[Ye.key]||(D[Ye.key]=!0,Ae=this.getTile(Ye),!Ae&&Be&&(Ae=this._addTile(Ye)),Ae&&(T[Ye.key]=Ye,Be=Ae.wasRequested(),Ae.hasData())))break}}return T}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const f=[];let T,D=this._tiles[l].tileID;for(;D.overscaledZ>0;){if(D.key in this._loadedParentTiles){T=this._loadedParentTiles[D.key];break}f.push(D.key);const V=D.scaledTo(D.overscaledZ-1);if(T=this._getLoadedTile(V),T)break;D=V}for(const V of f)this._loadedParentTiles[V]=T}}_addTile(l){let f=this._tiles[l.key];if(f)return f;f=this._cache.getAndRemove(l),f&&(this._setTileReloadTimer(l.key,f),f.tileID=l,this._state.initializeTileState(f,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,f)));const T=f;return f||(f=new ge(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(f,this._tileLoaded.bind(this,f,l.key,f.state))),f.uses++,this._tiles[l.key]=f,T||this._source.fire(new s.Event("dataloading",{tile:f,coord:f.tileID,dataType:"source"})),f}_setTileReloadTimer(l,f){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const T=f.getExpiryTimeout();T&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},T))}_removeTile(l){const f=this._tiles[l];f&&(f.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),f.uses>0||(f.hasData()&&f.state!=="reloading"?this._cache.add(f.tileID,f,f.getExpiryTimeout()):(f.aborted=!0,this._abortTile(f),this._unloadTile(f))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,f,T){const D=[],V=this.transform;if(!V)return D;const re=T?V.getCameraQueryGeometry(l):l,pe=l.map(Je=>V.pointCoordinate(Je,this.terrain)),ye=re.map(Je=>V.pointCoordinate(Je,this.terrain)),Ae=this.getIds();let Be=1/0,Ge=1/0,Ye=-1/0,it=-1/0;for(const Je of ye)Be=Math.min(Be,Je.x),Ge=Math.min(Ge,Je.y),Ye=Math.max(Ye,Je.x),it=Math.max(it,Je.y);for(let Je=0;Je<Ae.length;Je++){const tt=this._tiles[Ae[Je]];if(tt.holdingForFade())continue;const pt=tt.tileID,vt=Math.pow(2,V.zoom-tt.tileID.overscaledZ),Ct=f*tt.queryPadding*s.EXTENT/tt.tileSize/vt,st=[pt.getTilePoint(new s.MercatorCoordinate(Be,Ge)),pt.getTilePoint(new s.MercatorCoordinate(Ye,it))];if(st[0].x-Ct<s.EXTENT&&st[0].y-Ct<s.EXTENT&&st[1].x+Ct>=0&&st[1].y+Ct>=0){const It=pe.map(Ot=>pt.getTilePoint(Ot)),Et=ye.map(Ot=>pt.getTilePoint(Ot));D.push({tile:tt,tileID:pt,queryGeometry:It,cameraQueryGeometry:Et,scale:vt})}}return D}getVisibleCoordinates(l){const f=this.getRenderableIds(l).map(T=>this._tiles[T].tileID);for(const T of f)T.posMatrix=this.transform.calculatePosMatrix(T.toUnwrapped());return f}hasTransition(){if(this._source.hasTransition())return!0;if(be(this._source.type))for(const l in this._tiles){const f=this._tiles[l];if(f.fadeEndTime!==void 0&&f.fadeEndTime>=s.exported.now())return!0}return!1}setFeatureState(l,f,T){this._state.updateState(l=l||"_geojsonTileLayer",f,T)}removeFeatureState(l,f,T){this._state.removeFeatureState(l=l||"_geojsonTileLayer",f,T)}getFeatureState(l,f){return this._state.getState(l=l||"_geojsonTileLayer",f)}setDependencies(l,f,T){const D=this._tiles[l];D&&D.setDependencies(f,T)}reloadTilesForDependencies(l,f){for(const T in this._tiles)this._tiles[T].hasDependency(l,f)&&this._reloadTile(T,"reloading");this._cache.filter(T=>!T.hasDependency(l,f))}}function le(I,l){const f=Math.abs(2*I.wrap)-+(I.wrap<0),T=Math.abs(2*l.wrap)-+(l.wrap<0);return I.overscaledZ-l.overscaledZ||T-f||l.canonical.y-I.canonical.y||l.canonical.x-I.canonical.x}function be(I){return I==="raster"||I==="image"||I==="video"}ie.maxOverzooming=10,ie.maxUnderzooming=3;const te="mapboxgl_preloaded_worker_pool";class ae{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<ae.workerCount;)this.workers.push(new Worker(yd.workerUrl));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[te]}numActive(){return Object.keys(this.active).length}}const ce=Math.floor(s.exported.hardwareConcurrency/2);let xe;function _e(){return xe||(xe=new ae),xe}function Ne(I,l){const f={};for(const T in I)T!=="ref"&&(f[T]=I[T]);return s.refProperties.forEach(T=>{T in l&&(f[T]=l[T])}),f}function ke(I){I=I.slice();const l=Object.create(null);for(let f=0;f<I.length;f++)l[I[f].id]=I[f];for(let f=0;f<I.length;f++)"ref"in I[f]&&(I[f]=Ne(I[f],l[I[f].ref]));return I}ae.workerCount=Math.max(Math.min(ce,6),1);const Le={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function me(I,l,f){f.push({command:Le.addSource,args:[I,l[I]]})}function Re(I,l,f){l.push({command:Le.removeSource,args:[I]}),f[I]=!0}function $e(I,l,f,T){Re(I,f,T),me(I,l,f)}function De(I,l,f){let T;for(T in I[f])if(Object.prototype.hasOwnProperty.call(I[f],T)&&T!=="data"&&!y(I[f][T],l[f][T]))return!1;for(T in l[f])if(Object.prototype.hasOwnProperty.call(l[f],T)&&T!=="data"&&!y(I[f][T],l[f][T]))return!1;return!0}function Se(I,l,f,T,D,V){let re;for(re in l=l||{},I=I||{})Object.prototype.hasOwnProperty.call(I,re)&&(y(I[re],l[re])||f.push({command:V,args:[T,re,l[re],D]}));for(re in l)Object.prototype.hasOwnProperty.call(l,re)&&!Object.prototype.hasOwnProperty.call(I,re)&&(y(I[re],l[re])||f.push({command:V,args:[T,re,l[re],D]}))}function Pe(I){return I.id}function Fe(I,l){return I[l.id]=l,I}class je{constructor(l,f){this.reset(l,f)}reset(l,f){this.points=l||[],this._distances=[0];for(let T=1;T<this.points.length;T++)this._distances[T]=this._distances[T-1]+this.points[T].dist(this.points[T-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=s.clamp(l,0,1);let f=1,T=this._distances[f];const D=l*this.paddedLength+this.padding;for(;T<D&&f<this._distances.length;)T=this._distances[++f];const V=f-1,re=this._distances[V],pe=T-re,ye=pe>0?(D-re)/pe:0;return this.points[V].mult(1-ye).add(this.points[f].mult(ye))}}function He(I,l){let f=!0;return I==="always"||I!=="never"&&l!=="never"||(f=!1),f}class Qe{constructor(l,f,T){const D=this.boxCells=[],V=this.circleCells=[];this.xCellCount=Math.ceil(l/T),this.yCellCount=Math.ceil(f/T);for(let re=0;re<this.xCellCount*this.yCellCount;re++)D.push([]),V.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=f,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,f,T,D,V){this._forEachCell(f,T,D,V,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(f),this.bboxes.push(T),this.bboxes.push(D),this.bboxes.push(V)}insertCircle(l,f,T,D){this._forEachCell(f-D,T-D,f+D,T+D,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(f),this.circles.push(T),this.circles.push(D)}_insertBoxCell(l,f,T,D,V,re){this.boxCells[V].push(re)}_insertCircleCell(l,f,T,D,V,re){this.circleCells[V].push(re)}_query(l,f,T,D,V,re,pe){if(T<0||l>this.width||D<0||f>this.height)return[];const ye=[];if(l<=0&&f<=0&&this.width<=T&&this.height<=D){if(V)return[{key:null,x1:l,y1:f,x2:T,y2:D}];for(let Ae=0;Ae<this.boxKeys.length;Ae++)ye.push({key:this.boxKeys[Ae],x1:this.bboxes[4*Ae],y1:this.bboxes[4*Ae+1],x2:this.bboxes[4*Ae+2],y2:this.bboxes[4*Ae+3]});for(let Ae=0;Ae<this.circleKeys.length;Ae++){const Be=this.circles[3*Ae],Ge=this.circles[3*Ae+1],Ye=this.circles[3*Ae+2];ye.push({key:this.circleKeys[Ae],x1:Be-Ye,y1:Ge-Ye,x2:Be+Ye,y2:Ge+Ye})}}else this._forEachCell(l,f,T,D,this._queryCell,ye,{hitTest:V,overlapMode:re,seenUids:{box:{},circle:{}}},pe);return ye}query(l,f,T,D){return this._query(l,f,T,D,!1,null)}hitTest(l,f,T,D,V,re){return this._query(l,f,T,D,!0,V,re).length>0}hitTestCircle(l,f,T,D,V){const re=l-T,pe=l+T,ye=f-T,Ae=f+T;if(pe<0||re>this.width||Ae<0||ye>this.height)return!1;const Be=[];return this._forEachCell(re,ye,pe,Ae,this._queryCellCircle,Be,{hitTest:!0,overlapMode:D,circle:{x:l,y:f,radius:T},seenUids:{box:{},circle:{}}},V),Be.length>0}_queryCell(l,f,T,D,V,re,pe,ye){const{seenUids:Ae,hitTest:Be,overlapMode:Ge}=pe,Ye=this.boxCells[V];if(Ye!==null){const Je=this.bboxes;for(const tt of Ye)if(!Ae.box[tt]){Ae.box[tt]=!0;const pt=4*tt,vt=this.boxKeys[tt];if(l<=Je[pt+2]&&f<=Je[pt+3]&&T>=Je[pt+0]&&D>=Je[pt+1]&&(!ye||ye(vt))&&(!Be||!He(Ge,vt.overlapMode))&&(re.push({key:vt,x1:Je[pt],y1:Je[pt+1],x2:Je[pt+2],y2:Je[pt+3]}),Be))return!0}}const it=this.circleCells[V];if(it!==null){const Je=this.circles;for(const tt of it)if(!Ae.circle[tt]){Ae.circle[tt]=!0;const pt=3*tt,vt=this.circleKeys[tt];if(this._circleAndRectCollide(Je[pt],Je[pt+1],Je[pt+2],l,f,T,D)&&(!ye||ye(vt))&&(!Be||!He(Ge,vt.overlapMode))){const Ct=Je[pt],st=Je[pt+1],It=Je[pt+2];if(re.push({key:vt,x1:Ct-It,y1:st-It,x2:Ct+It,y2:st+It}),Be)return!0}}}return!1}_queryCellCircle(l,f,T,D,V,re,pe,ye){const{circle:Ae,seenUids:Be,overlapMode:Ge}=pe,Ye=this.boxCells[V];if(Ye!==null){const Je=this.bboxes;for(const tt of Ye)if(!Be.box[tt]){Be.box[tt]=!0;const pt=4*tt,vt=this.boxKeys[tt];if(this._circleAndRectCollide(Ae.x,Ae.y,Ae.radius,Je[pt+0],Je[pt+1],Je[pt+2],Je[pt+3])&&(!ye||ye(vt))&&!He(Ge,vt.overlapMode))return re.push(!0),!0}}const it=this.circleCells[V];if(it!==null){const Je=this.circles;for(const tt of it)if(!Be.circle[tt]){Be.circle[tt]=!0;const pt=3*tt,vt=this.circleKeys[tt];if(this._circlesCollide(Je[pt],Je[pt+1],Je[pt+2],Ae.x,Ae.y,Ae.radius)&&(!ye||ye(vt))&&!He(Ge,vt.overlapMode))return re.push(!0),!0}}}_forEachCell(l,f,T,D,V,re,pe,ye){const Ae=this._convertToXCellCoord(l),Be=this._convertToYCellCoord(f),Ge=this._convertToXCellCoord(T),Ye=this._convertToYCellCoord(D);for(let it=Ae;it<=Ge;it++)for(let Je=Be;Je<=Ye;Je++)if(V.call(this,l,f,T,D,this.xCellCount*Je+it,re,pe,ye))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,f,T,D,V,re){const pe=D-l,ye=V-f,Ae=T+re;return Ae*Ae>pe*pe+ye*ye}_circleAndRectCollide(l,f,T,D,V,re,pe){const ye=(re-D)/2,Ae=Math.abs(l-(D+ye));if(Ae>ye+T)return!1;const Be=(pe-V)/2,Ge=Math.abs(f-(V+Be));if(Ge>Be+T)return!1;if(Ae<=ye||Ge<=Be)return!0;const Ye=Ae-ye,it=Ge-Be;return Ye*Ye+it*it<=T*T}}function at(I,l,f,T,D){const V=s.create();return l?(s.scale(V,V,[1/D,1/D,1]),f||s.rotateZ(V,V,T.angle)):s.multiply(V,T.labelPlaneMatrix,I),V}function rt(I,l,f,T,D){if(l){const V=s.clone(I);return s.scale(V,V,[D,D,1]),f||s.rotateZ(V,V,-T.angle),V}return T.glCoordMatrix}function dt(I,l,f){let T;f?(T=[I.x,I.y,f(I.x,I.y),1],s.transformMat4(T,T,l)):(T=[I.x,I.y,0,1],nr(T,T,l));const D=T[3];return{point:new s.pointGeometry(T[0]/D,T[1]/D),signedDistanceFromCamera:D}}function gt(I,l){return .5+I/l*.5}function Tt(I,l){const f=I[0]/I[3],T=I[1]/I[3];return f>=-l[0]&&f<=l[0]&&T>=-l[1]&&T<=l[1]}function Nt(I,l,f,T,D,V,re,pe,ye,Ae){const Be=T?I.textSizeData:I.iconSizeData,Ge=s.evaluateSizeForZoom(Be,f.transform.zoom),Ye=[256/f.width*2+1,256/f.height*2+1],it=T?I.text.dynamicLayoutVertexArray:I.icon.dynamicLayoutVertexArray;it.clear();const Je=I.lineVertexArray,tt=T?I.text.placedSymbolArray:I.icon.placedSymbolArray,pt=f.transform.width/f.transform.height;let vt=!1;for(let Ct=0;Ct<tt.length;Ct++){const st=tt.get(Ct);if(st.hidden||st.writingMode===s.WritingMode.vertical&&!vt){fr(st.numGlyphs,it);continue}let It;if(vt=!1,Ae?(It=[st.anchorX,st.anchorY,Ae(st.anchorX,st.anchorY),1],s.transformMat4(It,It,l)):(It=[st.anchorX,st.anchorY,0,1],nr(It,It,l)),!Tt(It,Ye)){fr(st.numGlyphs,it);continue}const Et=gt(f.transform.cameraToCenterDistance,It[3]),Ot=s.evaluateSizeForFeature(Be,Ge,st),jt=re?Ot/Et:Ot*Et,Vt=new s.pointGeometry(st.anchorX,st.anchorY),Lt=dt(Vt,D,Ae).point,li={},Kt=kt(st,jt,!1,pe,l,D,V,I.glyphOffsetArray,Je,it,Lt,Vt,li,pt,ye,Ae);vt=Kt.useVertical,(Kt.notEnoughRoom||vt||Kt.needsFlipping&&kt(st,jt,!0,pe,l,D,V,I.glyphOffsetArray,Je,it,Lt,Vt,li,pt,ye,Ae).notEnoughRoom)&&fr(st.numGlyphs,it)}T?I.text.dynamicLayoutVertexBuffer.updateData(it):I.icon.dynamicLayoutVertexBuffer.updateData(it)}function mt(I,l,f,T,D,V,re,pe,ye,Ae,Be,Ge,Ye){const it=pe.glyphStartIndex+pe.numGlyphs,Je=pe.lineStartIndex,tt=pe.lineStartIndex+pe.lineLength,pt=l.getoffsetX(pe.glyphStartIndex),vt=l.getoffsetX(it-1),Ct=fi(I*pt,f,T,D,V,re,pe.segment,Je,tt,ye,Ae,Be,Ge,Ye);if(!Ct)return null;const st=fi(I*vt,f,T,D,V,re,pe.segment,Je,tt,ye,Ae,Be,Ge,Ye);return st?{first:Ct,last:st}:null}function St(I,l,f,T){return I===s.WritingMode.horizontal&&Math.abs(f.y-l.y)>Math.abs(f.x-l.x)*T?{useVertical:!0}:(I===s.WritingMode.vertical?l.y<f.y:l.x>f.x)?{needsFlipping:!0}:null}function kt(I,l,f,T,D,V,re,pe,ye,Ae,Be,Ge,Ye,it,Je,tt){const pt=l/24,vt=I.lineOffsetX*pt,Ct=I.lineOffsetY*pt;let st;if(I.numGlyphs>1){const It=I.glyphStartIndex+I.numGlyphs,Et=I.lineStartIndex,Ot=I.lineStartIndex+I.lineLength,jt=mt(pt,pe,vt,Ct,f,Be,Ge,I,ye,V,Ye,Je,tt);if(!jt)return{notEnoughRoom:!0};const Vt=dt(jt.first.point,re,tt).point,Lt=dt(jt.last.point,re,tt).point;if(T&&!f){const li=St(I.writingMode,Vt,Lt,it);if(li)return li}st=[jt.first];for(let li=I.glyphStartIndex+1;li<It-1;li++)st.push(fi(pt*pe.getoffsetX(li),vt,Ct,f,Be,Ge,I.segment,Et,Ot,ye,V,Ye,Je,tt));st.push(jt.last)}else{if(T&&!f){const Et=dt(Ge,D,tt).point,Ot=I.lineStartIndex+I.segment+1,jt=new s.pointGeometry(ye.getx(Ot),ye.gety(Ot)),Vt=dt(jt,D,tt),Lt=Vt.signedDistanceFromCamera>0?Vt.point:ii(Ge,jt,Et,1,D,tt),li=St(I.writingMode,Et,Lt,it);if(li)return li}const It=fi(pt*pe.getoffsetX(I.glyphStartIndex),vt,Ct,f,Be,Ge,I.segment,I.lineStartIndex,I.lineStartIndex+I.lineLength,ye,V,Ye,Je,tt);if(!It)return{notEnoughRoom:!0};st=[It]}for(const It of st)s.addDynamicAttributes(Ae,It.point,It.angle);return{}}function ii(I,l,f,T,D,V){const re=dt(I.add(I.sub(l)._unit()),D,V).point,pe=f.sub(re);return f.add(pe._mult(T/pe.mag()))}function fi(I,l,f,T,D,V,re,pe,ye,Ae,Be,Ge,Ye,it){const Je=T?I-l:I+l;let tt=Je>0?1:-1,pt=0;T&&(tt*=-1,pt=Math.PI),tt<0&&(pt+=Math.PI);let vt=tt>0?pe+re:pe+re+1,Ct=D,st=D,It=0,Et=0;const Ot=Math.abs(Je),jt=[];for(;It+Et<=Ot;){if(vt+=tt,vt<pe||vt>=ye)return null;if(st=Ct,jt.push(Ct),Ct=Ge[vt],Ct===void 0){const ui=new s.pointGeometry(Ae.getx(vt),Ae.gety(vt)),tr=dt(ui,Be,it);if(tr.signedDistanceFromCamera>0)Ct=Ge[vt]=tr.point;else{const ur=vt-tt;Ct=ii(It===0?V:new s.pointGeometry(Ae.getx(ur),Ae.gety(ur)),ui,st,Ot-It+1,Be,it)}}It+=Et,Et=st.dist(Ct)}const Vt=(Ot-It)/Et,Lt=Ct.sub(st),li=Lt.mult(Vt)._add(st);li._add(Lt._unit()._perp()._mult(f*tt));const Kt=pt+Math.atan2(Ct.y-st.y,Ct.x-st.x);return jt.push(li),{point:li,angle:Ye?Kt:0,path:jt}}const Ht=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function fr(I,l){for(let f=0;f<I;f++){const T=l.length;l.resize(T+4),l.float32.set(Ht,3*T)}}function nr(I,l,f){const T=l[0],D=l[1];return I[0]=f[0]*T+f[4]*D+f[12],I[1]=f[1]*T+f[5]*D+f[13],I[3]=f[3]*T+f[7]*D+f[15],I}const vr=100;class Rr{constructor(l,f=new Qe(l.width+200,l.height+200,25),T=new Qe(l.width+200,l.height+200,25)){this.transform=l,this.grid=f,this.ignoredGrid=T,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+vr,this.screenBottomBoundary=l.height+vr,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,f,T,D,V,re){const pe=this.projectAndGetPerspectiveRatio(D,l.anchorPointX,l.anchorPointY,re),ye=T*pe.perspectiveRatio,Ae=l.x1*ye+pe.point.x,Be=l.y1*ye+pe.point.y,Ge=l.x2*ye+pe.point.x,Ye=l.y2*ye+pe.point.y;return!this.isInsideGrid(Ae,Be,Ge,Ye)||f!=="always"&&this.grid.hitTest(Ae,Be,Ge,Ye,f,V)||pe.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[Ae,Be,Ge,Ye],offscreen:this.isOffscreen(Ae,Be,Ge,Ye)}}placeCollisionCircles(l,f,T,D,V,re,pe,ye,Ae,Be,Ge,Ye,it,Je){const tt=[],pt=new s.pointGeometry(f.anchorX,f.anchorY),vt=dt(pt,re,Je),Ct=gt(this.transform.cameraToCenterDistance,vt.signedDistanceFromCamera),st=(Be?V/Ct:V*Ct)/s.ONE_EM,It=dt(pt,pe,Je).point,Et=mt(st,D,f.lineOffsetX*st,f.lineOffsetY*st,!1,It,pt,f,T,pe,{},!1,Je);let Ot=!1,jt=!1,Vt=!0;if(Et){const Lt=.5*Ye*Ct+it,li=new s.pointGeometry(-100,-100),Kt=new s.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),ui=new je,tr=Et.first,ur=Et.last;let Pi=[];for(let Cr=tr.path.length-1;Cr>=1;Cr--)Pi.push(tr.path[Cr]);for(let Cr=1;Cr<ur.path.length;Cr++)Pi.push(ur.path[Cr]);const qr=2.5*Lt;if(ye){const Cr=Pi.map(Sr=>dt(Sr,ye,Je));Pi=Cr.some(Sr=>Sr.signedDistanceFromCamera<=0)?[]:Cr.map(Sr=>Sr.point)}let Wr=[];if(Pi.length>0){const Cr=Pi[0].clone(),Sr=Pi[0].clone();for(let Ar=1;Ar<Pi.length;Ar++)Cr.x=Math.min(Cr.x,Pi[Ar].x),Cr.y=Math.min(Cr.y,Pi[Ar].y),Sr.x=Math.max(Sr.x,Pi[Ar].x),Sr.y=Math.max(Sr.y,Pi[Ar].y);Wr=Cr.x>=li.x&&Sr.x<=Kt.x&&Cr.y>=li.y&&Sr.y<=Kt.y?[Pi]:Sr.x<li.x||Cr.x>Kt.x||Sr.y<li.y||Cr.y>Kt.y?[]:s.clipLine([Pi],li.x,li.y,Kt.x,Kt.y)}for(const Cr of Wr){ui.reset(Cr,.25*Lt);let Sr=0;Sr=ui.length<=.5*Lt?1:Math.ceil(ui.paddedLength/qr)+1;for(let Ar=0;Ar<Sr;Ar++){const ja=Ar/Math.max(Sr-1,1),$o=ui.lerp(ja),wo=$o.x+vr,_o=$o.y+vr;tt.push(wo,_o,Lt,0);const fc=wo-Lt,Ds=_o-Lt,Co=wo+Lt,mc=_o+Lt;if(Vt=Vt&&this.isOffscreen(fc,Ds,Co,mc),jt=jt||this.isInsideGrid(fc,Ds,Co,mc),l!=="always"&&this.grid.hitTestCircle(wo,_o,Lt,l,Ge)&&(Ot=!0,!Ae))return{circles:[],offscreen:!1,collisionDetected:Ot}}}}return{circles:!Ae&&Ot||!jt||Ct<this.perspectiveRatioCutoff?[]:tt,offscreen:Vt,collisionDetected:Ot}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[];let T=1/0,D=1/0,V=-1/0,re=-1/0;for(const Be of l){const Ge=new s.pointGeometry(Be.x+vr,Be.y+vr);T=Math.min(T,Ge.x),D=Math.min(D,Ge.y),V=Math.max(V,Ge.x),re=Math.max(re,Ge.y),f.push(Ge)}const pe=this.grid.query(T,D,V,re).concat(this.ignoredGrid.query(T,D,V,re)),ye={},Ae={};for(const Be of pe){const Ge=Be.key;if(ye[Ge.bucketInstanceId]===void 0&&(ye[Ge.bucketInstanceId]={}),ye[Ge.bucketInstanceId][Ge.featureIndex])continue;const Ye=[new s.pointGeometry(Be.x1,Be.y1),new s.pointGeometry(Be.x2,Be.y1),new s.pointGeometry(Be.x2,Be.y2),new s.pointGeometry(Be.x1,Be.y2)];s.polygonIntersectsPolygon(f,Ye)&&(ye[Ge.bucketInstanceId][Ge.featureIndex]=!0,Ae[Ge.bucketInstanceId]===void 0&&(Ae[Ge.bucketInstanceId]=[]),Ae[Ge.bucketInstanceId].push(Ge.featureIndex))}return Ae}insertCollisionBox(l,f,T,D,V,re){(T?this.ignoredGrid:this.grid).insert({bucketInstanceId:D,featureIndex:V,collisionGroupID:re,overlapMode:f},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,f,T,D,V,re){const pe=T?this.ignoredGrid:this.grid,ye={bucketInstanceId:D,featureIndex:V,collisionGroupID:re,overlapMode:f};for(let Ae=0;Ae<l.length;Ae+=4)pe.insertCircle(ye,l[Ae],l[Ae+1],l[Ae+2])}projectAndGetPerspectiveRatio(l,f,T,D){let V;return D?(V=[f,T,D(f,T),1],s.transformMat4(V,V,l)):(V=[f,T,0,1],nr(V,V,l)),{point:new s.pointGeometry((V[0]/V[3]+1)/2*this.transform.width+vr,(-V[1]/V[3]+1)/2*this.transform.height+vr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/V[3]*.5}}isOffscreen(l,f,T,D){return T<vr||l>=this.screenRightBoundary||D<vr||f>this.screenBottomBoundary}isInsideGrid(l,f,T,D){return T>=0&&l<this.gridRightBoundary&&D>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const l=s.identity([]);return s.translate(l,l,[-100,-100,0]),l}}function sr(I,l,f){return l*(s.EXTENT/(I.tileSize*Math.pow(2,f-I.tileID.overscaledZ)))}class xr{constructor(l,f,T,D){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?f:-f))):D&&T?1:0,this.placed=T}isHidden(){return this.opacity===0&&!this.placed}}class ht{constructor(l,f,T,D,V){this.text=new xr(l?l.text:null,f,T,V),this.icon=new xr(l?l.icon:null,f,D,V)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class bt{constructor(l,f,T){this.text=l,this.icon=f,this.skipFade=T}}class Mt{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class $t{constructor(l,f,T,D,V){this.bucketInstanceId=l,this.featureIndex=f,this.sourceLayerIndex=T,this.bucketIndex=D,this.tileID=V}}class Zt{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const f=++this.maxGroupID;this.collisionGroups[l]={ID:f,predicate:T=>T.collisionGroupID===f}}return this.collisionGroups[l]}}function ki(I,l,f,T,D){const{horizontalAlign:V,verticalAlign:re}=s.getAnchorAlignment(I),pe=-(V-.5)*l,ye=-(re-.5)*f,Ae=s.evaluateVariableOffset(I,T);return new s.pointGeometry(pe+Ae[0]*D,ye+Ae[1]*D)}function Di(I,l,f,T,D,V){const{x1:re,x2:pe,y1:ye,y2:Ae,anchorPointX:Be,anchorPointY:Ge}=I,Ye=new s.pointGeometry(l,f);return T&&Ye._rotate(D?V:-V),{x1:re+Ye.x,y1:ye+Ye.y,x2:pe+Ye.x,y2:Ae+Ye.y,anchorPointX:Be,anchorPointY:Ge}}class We{constructor(l,f,T,D,V){this.transform=l.clone(),this.terrain=f,this.collisionIndex=new Rr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=T,this.retainedQueryData={},this.collisionGroups=new Zt(D),this.collisionCircleArrays={},this.prevPlacement=V,V&&(V.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,f,T,D){const V=T.getBucket(f),re=T.latestFeatureIndex;if(!V||!re||f.id!==V.layerIds[0])return;const pe=T.collisionBoxArray,ye=V.layers[0].layout,Ae=Math.pow(2,this.transform.zoom-T.tileID.overscaledZ),Be=T.tileSize/s.EXTENT,Ge=this.transform.calculatePosMatrix(T.tileID.toUnwrapped()),Ye=ye.get("text-pitch-alignment")==="map",it=ye.get("text-rotation-alignment")==="map",Je=sr(T,1,this.transform.zoom),tt=at(Ge,Ye,it,this.transform,Je);let pt=null;if(Ye){const Ct=rt(Ge,Ye,it,this.transform,Je);pt=s.multiply([],this.transform.labelPlaneMatrix,Ct)}this.retainedQueryData[V.bucketInstanceId]=new $t(V.bucketInstanceId,re,V.sourceLayerIndex,V.index,T.tileID);const vt={bucket:V,layout:ye,posMatrix:Ge,textLabelPlaneMatrix:tt,labelToScreenMatrix:pt,scale:Ae,textPixelRatio:Be,holdingForFade:T.holdingForFade(),collisionBoxArray:pe,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(V.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(V.sourceID)};if(D)for(const Ct of V.sortKeyRanges){const{sortKey:st,symbolInstanceStart:It,symbolInstanceEnd:Et}=Ct;l.push({sortKey:st,symbolInstanceStart:It,symbolInstanceEnd:Et,parameters:vt})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:V.symbolInstances.length,parameters:vt})}attemptAnchorPlacement(l,f,T,D,V,re,pe,ye,Ae,Be,Ge,Ye,it,Je,tt,pt){const vt=[Ye.textOffset0,Ye.textOffset1],Ct=ki(l,T,D,vt,V),st=this.collisionIndex.placeCollisionBox(Di(f,Ct.x,Ct.y,re,pe,this.transform.angle),Ge,ye,Ae,Be.predicate,pt);if((!tt||this.collisionIndex.placeCollisionBox(Di(tt,Ct.x,Ct.y,re,pe,this.transform.angle),Ge,ye,Ae,Be.predicate,pt).box.length!==0)&&st.box.length>0){let It;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ye.crossTileID]&&this.prevPlacement.placements[Ye.crossTileID]&&this.prevPlacement.placements[Ye.crossTileID].text&&(It=this.prevPlacement.variableOffsets[Ye.crossTileID].anchor),Ye.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ye.crossTileID]={textOffset:vt,width:T,height:D,anchor:l,textBoxScale:V,prevAnchor:It},this.markUsedJustification(it,l,Ye,Je),it.allowVerticalPlacement&&(this.markUsedOrientation(it,Je,Ye),this.placedOrientations[Ye.crossTileID]=Je),{shift:Ct,placedGlyphBoxes:st}}}placeLayerBucketPart(l,f,T){const{bucket:D,layout:V,posMatrix:re,textLabelPlaneMatrix:pe,labelToScreenMatrix:ye,textPixelRatio:Ae,holdingForFade:Be,collisionBoxArray:Ge,partiallyEvaluatedTextSize:Ye,collisionGroup:it}=l.parameters,Je=V.get("text-optional"),tt=V.get("icon-optional"),pt=s.getOverlapMode(V,"text-overlap","text-allow-overlap"),vt=pt==="always",Ct=s.getOverlapMode(V,"icon-overlap","icon-allow-overlap"),st=Ct==="always",It=V.get("text-rotation-alignment")==="map",Et=V.get("text-pitch-alignment")==="map",Ot=V.get("icon-text-fit")!=="none",jt=V.get("symbol-z-order")==="viewport-y",Vt=vt&&(st||!D.hasIconData()||tt),Lt=st&&(vt||!D.hasTextData()||Je);!D.collisionArrays&&Ge&&D.deserializeCollisionBoxes(Ge);const li=(Kt,ui)=>{if(f[Kt.crossTileID])return;if(Be)return void(this.placements[Kt.crossTileID]=new bt(!1,!1,!1));let tr=!1,ur=!1,Pi=!0,qr=null,Wr={box:null,offscreen:null},Cr={box:null},Sr=null,Ar=null,ja=null,$o=0,wo=0,_o=0;ui.textFeatureIndex?$o=ui.textFeatureIndex:Kt.useRuntimeCollisionCircles&&($o=Kt.featureIndex),ui.verticalTextFeatureIndex&&(wo=ui.verticalTextFeatureIndex);const fc=this.retainedQueryData[D.bucketInstanceId].tileID,Ds=this.terrain?(Ir,gn)=>this.terrain.getElevation(fc,Ir,gn):null;for(const Ir of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const gn=ui[Ir];gn&&(gn.elevation=Ds?Ds(gn.anchorPointX,gn.anchorPointY):0)}const Co=ui.textBox;if(Co){const Ir=Lr=>{let es=s.WritingMode.horizontal;if(D.allowVerticalPlacement&&!Lr&&this.prevPlacement){const Ca=this.prevPlacement.placedOrientations[Kt.crossTileID];Ca&&(this.placedOrientations[Kt.crossTileID]=Ca,es=Ca,this.markUsedOrientation(D,es,Kt))}return es},gn=(Lr,es)=>{if(D.allowVerticalPlacement&&Kt.numVerticalGlyphVertices>0&&ui.verticalTextBox){for(const Ca of D.writingModes)if(Ca===s.WritingMode.vertical?(Wr=es(),Cr=Wr):Wr=Lr(),Wr&&Wr.box&&Wr.box.length)break}else Wr=Lr()};if(V.get("text-variable-anchor")){let Lr=V.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Kt.crossTileID]){const wn=this.prevPlacement.variableOffsets[Kt.crossTileID];Lr.indexOf(wn.anchor)>0&&(Lr=Lr.filter(no=>no!==wn.anchor),Lr.unshift(wn.anchor))}const es=(wn,no,eu)=>{const tu=wn.x2-wn.x1,Uh=wn.y2-wn.y1,Of=Kt.textBoxScale,Vh=Ot&&Ct==="never"?no:null;let To={box:[],offscreen:!1};const Gh=pt!=="never"?2*Lr.length:Lr.length;for(let vd=0;vd<Gh;++vd){const Hh=this.attemptAnchorPlacement(Lr[vd%Lr.length],wn,tu,Uh,Of,It,Et,Ae,re,it,vd>=Lr.length?pt:"never",Kt,D,eu,Vh,Ds);if(Hh&&(To=Hh.placedGlyphBoxes,To&&To.box&&To.box.length)){tr=!0,qr=Hh.shift;break}}return To};gn(()=>es(Co,ui.iconBox,s.WritingMode.horizontal),()=>{const wn=ui.verticalTextBox;return D.allowVerticalPlacement&&!(Wr&&Wr.box&&Wr.box.length)&&Kt.numVerticalGlyphVertices>0&&wn?es(wn,ui.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null}}),Wr&&(tr=Wr.box,Pi=Wr.offscreen);const Ca=Ir(Wr&&Wr.box);if(!tr&&this.prevPlacement){const wn=this.prevPlacement.variableOffsets[Kt.crossTileID];wn&&(this.variableOffsets[Kt.crossTileID]=wn,this.markUsedJustification(D,wn.anchor,Kt,Ca))}}else{const Lr=(es,Ca)=>{const wn=this.collisionIndex.placeCollisionBox(es,pt,Ae,re,it.predicate,Ds);return wn&&wn.box&&wn.box.length&&(this.markUsedOrientation(D,Ca,Kt),this.placedOrientations[Kt.crossTileID]=Ca),wn};gn(()=>Lr(Co,s.WritingMode.horizontal),()=>{const es=ui.verticalTextBox;return D.allowVerticalPlacement&&Kt.numVerticalGlyphVertices>0&&es?Lr(es,s.WritingMode.vertical):{box:null,offscreen:null}}),Ir(Wr&&Wr.box&&Wr.box.length)}}if(Sr=Wr,tr=Sr&&Sr.box&&Sr.box.length>0,Pi=Sr&&Sr.offscreen,Kt.useRuntimeCollisionCircles){const Ir=D.text.placedSymbolArray.get(Kt.centerJustifiedTextSymbolIndex),gn=s.evaluateSizeForFeature(D.textSizeData,Ye,Ir),Lr=V.get("text-padding");Ar=this.collisionIndex.placeCollisionCircles(pt,Ir,D.lineVertexArray,D.glyphOffsetArray,gn,re,pe,ye,T,Et,it.predicate,Kt.collisionCircleDiameter,Lr,Ds),Ar.circles.length&&Ar.collisionDetected&&!T&&s.warnOnce("Collisions detected, but collision boxes are not shown"),tr=vt||Ar.circles.length>0&&!Ar.collisionDetected,Pi=Pi&&Ar.offscreen}if(ui.iconFeatureIndex&&(_o=ui.iconFeatureIndex),ui.iconBox){const Ir=gn=>{const Lr=Ot&&qr?Di(gn,qr.x,qr.y,It,Et,this.transform.angle):gn;return this.collisionIndex.placeCollisionBox(Lr,Ct,Ae,re,it.predicate,Ds)};Cr&&Cr.box&&Cr.box.length&&ui.verticalIconBox?(ja=Ir(ui.verticalIconBox),ur=ja.box.length>0):(ja=Ir(ui.iconBox),ur=ja.box.length>0),Pi=Pi&&ja.offscreen}const mc=Je||Kt.numHorizontalGlyphVertices===0&&Kt.numVerticalGlyphVertices===0,$h=tt||Kt.numIconVertices===0;if(mc||$h?$h?mc||(ur=ur&&tr):tr=ur&&tr:ur=tr=ur&&tr,tr&&Sr&&Sr.box&&this.collisionIndex.insertCollisionBox(Sr.box,pt,V.get("text-ignore-placement"),D.bucketInstanceId,Cr&&Cr.box&&wo?wo:$o,it.ID),ur&&ja&&this.collisionIndex.insertCollisionBox(ja.box,Ct,V.get("icon-ignore-placement"),D.bucketInstanceId,_o,it.ID),Ar&&(tr&&this.collisionIndex.insertCollisionCircles(Ar.circles,pt,V.get("text-ignore-placement"),D.bucketInstanceId,$o,it.ID),T)){const Ir=D.bucketInstanceId;let gn=this.collisionCircleArrays[Ir];gn===void 0&&(gn=this.collisionCircleArrays[Ir]=new Mt);for(let Lr=0;Lr<Ar.circles.length;Lr+=4)gn.circles.push(Ar.circles[Lr+0]),gn.circles.push(Ar.circles[Lr+1]),gn.circles.push(Ar.circles[Lr+2]),gn.circles.push(Ar.collisionDetected?1:0)}if(Kt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(D.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Kt.crossTileID]=new bt(tr||Vt,ur||Lt,Pi||D.justReloaded),f[Kt.crossTileID]=!0};if(jt){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Kt=D.getSortedSymbolIndexes(this.transform.angle);for(let ui=Kt.length-1;ui>=0;--ui){const tr=Kt[ui];li(D.symbolInstances.get(tr),D.collisionArrays[tr])}}else for(let Kt=l.symbolInstanceStart;Kt<l.symbolInstanceEnd;Kt++)li(D.symbolInstances.get(Kt),D.collisionArrays[Kt]);if(T&&D.bucketInstanceId in this.collisionCircleArrays){const Kt=this.collisionCircleArrays[D.bucketInstanceId];s.invert(Kt.invProjMatrix,re),Kt.viewportMatrix=this.collisionIndex.getViewportMatrix()}D.justReloaded=!1}markUsedJustification(l,f,T,D){let V;V=D===s.WritingMode.vertical?T.verticalPlacedTextSymbolIndex:{left:T.leftJustifiedTextSymbolIndex,center:T.centerJustifiedTextSymbolIndex,right:T.rightJustifiedTextSymbolIndex}[s.getAnchorJustification(f)];const re=[T.leftJustifiedTextSymbolIndex,T.centerJustifiedTextSymbolIndex,T.rightJustifiedTextSymbolIndex,T.verticalPlacedTextSymbolIndex];for(const pe of re)pe>=0&&(l.text.placedSymbolArray.get(pe).crossTileID=V>=0&&pe!==V?0:T.crossTileID)}markUsedOrientation(l,f,T){const D=f===s.WritingMode.horizontal||f===s.WritingMode.horizontalOnly?f:0,V=f===s.WritingMode.vertical?f:0,re=[T.leftJustifiedTextSymbolIndex,T.centerJustifiedTextSymbolIndex,T.rightJustifiedTextSymbolIndex];for(const pe of re)l.text.placedSymbolArray.get(pe).placedOrientation=D;T.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(T.verticalPlacedTextSymbolIndex).placedOrientation=V)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let T=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const D=f?f.symbolFadeChange(l):1,V=f?f.opacities:{},re=f?f.variableOffsets:{},pe=f?f.placedOrientations:{};for(const ye in this.placements){const Ae=this.placements[ye],Be=V[ye];Be?(this.opacities[ye]=new ht(Be,D,Ae.text,Ae.icon),T=T||Ae.text!==Be.text.placed||Ae.icon!==Be.icon.placed):(this.opacities[ye]=new ht(null,D,Ae.text,Ae.icon,Ae.skipFade),T=T||Ae.text||Ae.icon)}for(const ye in V){const Ae=V[ye];if(!this.opacities[ye]){const Be=new ht(Ae,D,!1,!1);Be.isHidden()||(this.opacities[ye]=Be,T=T||Ae.text.placed||Ae.icon.placed)}}for(const ye in re)this.variableOffsets[ye]||!this.opacities[ye]||this.opacities[ye].isHidden()||(this.variableOffsets[ye]=re[ye]);for(const ye in pe)this.placedOrientations[ye]||!this.opacities[ye]||this.opacities[ye].isHidden()||(this.placedOrientations[ye]=pe[ye]);if(f&&f.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");T?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:l)}updateLayerOpacities(l,f){const T={};for(const D of f){const V=D.getBucket(l);V&&D.latestFeatureIndex&&l.id===V.layerIds[0]&&this.updateBucketOpacities(V,T,D.collisionBoxArray)}}updateBucketOpacities(l,f,T){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const D=l.layers[0].layout,V=new ht(null,0,!1,!1,!0),re=D.get("text-allow-overlap"),pe=D.get("icon-allow-overlap"),ye=D.get("text-variable-anchor"),Ae=D.get("text-rotation-alignment")==="map",Be=D.get("text-pitch-alignment")==="map",Ge=D.get("icon-text-fit")!=="none",Ye=new ht(null,0,re&&(pe||!l.hasIconData()||D.get("icon-optional")),pe&&(re||!l.hasTextData()||D.get("text-optional")),!0);!l.collisionArrays&&T&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(T);const it=(Je,tt,pt)=>{for(let vt=0;vt<tt/4;vt++)Je.opacityVertexArray.emplaceBack(pt)};for(let Je=0;Je<l.symbolInstances.length;Je++){const tt=l.symbolInstances.get(Je),{numHorizontalGlyphVertices:pt,numVerticalGlyphVertices:vt,crossTileID:Ct}=tt;let st=this.opacities[Ct];f[Ct]?st=V:st||(st=Ye,this.opacities[Ct]=st),f[Ct]=!0;const It=tt.numIconVertices>0,Et=this.placedOrientations[tt.crossTileID],Ot=Et===s.WritingMode.vertical,jt=Et===s.WritingMode.horizontal||Et===s.WritingMode.horizontalOnly;if(pt>0||vt>0){const Vt=ft(st.text);it(l.text,pt,Ot?wt:Vt),it(l.text,vt,jt?wt:Vt);const Lt=st.text.isHidden();[tt.rightJustifiedTextSymbolIndex,tt.centerJustifiedTextSymbolIndex,tt.leftJustifiedTextSymbolIndex].forEach(ui=>{ui>=0&&(l.text.placedSymbolArray.get(ui).hidden=Lt||Ot?1:0)}),tt.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(tt.verticalPlacedTextSymbolIndex).hidden=Lt||jt?1:0);const li=this.variableOffsets[tt.crossTileID];li&&this.markUsedJustification(l,li.anchor,tt,Et);const Kt=this.placedOrientations[tt.crossTileID];Kt&&(this.markUsedJustification(l,"left",tt,Kt),this.markUsedOrientation(l,Kt,tt))}if(It){const Vt=ft(st.icon),Lt=!(Ge&&tt.verticalPlacedIconSymbolIndex&&Ot);tt.placedIconSymbolIndex>=0&&(it(l.icon,tt.numIconVertices,Lt?Vt:wt),l.icon.placedSymbolArray.get(tt.placedIconSymbolIndex).hidden=st.icon.isHidden()),tt.verticalPlacedIconSymbolIndex>=0&&(it(l.icon,tt.numVerticalIconVertices,Lt?wt:Vt),l.icon.placedSymbolArray.get(tt.verticalPlacedIconSymbolIndex).hidden=st.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const Vt=l.collisionArrays[Je];if(Vt){let Lt=new s.pointGeometry(0,0);if(Vt.textBox||Vt.verticalTextBox){let Kt=!0;if(ye){const ui=this.variableOffsets[Ct];ui?(Lt=ki(ui.anchor,ui.width,ui.height,ui.textOffset,ui.textBoxScale),Ae&&Lt._rotate(Be?this.transform.angle:-this.transform.angle)):Kt=!1}Vt.textBox&&Te(l.textCollisionBox.collisionVertexArray,st.text.placed,!Kt||Ot,Lt.x,Lt.y),Vt.verticalTextBox&&Te(l.textCollisionBox.collisionVertexArray,st.text.placed,!Kt||jt,Lt.x,Lt.y)}const li=!!(!jt&&Vt.verticalIconBox);Vt.iconBox&&Te(l.iconCollisionBox.collisionVertexArray,st.icon.placed,li,Ge?Lt.x:0,Ge?Lt.y:0),Vt.verticalIconBox&&Te(l.iconCollisionBox.collisionVertexArray,st.icon.placed,!li,Ge?Lt.x:0,Ge?Lt.y:0)}}}if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);if(l.bucketInstanceId in this.collisionCircleArrays){const Je=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=Je.invProjMatrix,l.placementViewportMatrix=Je.viewportMatrix,l.collisionCircleArray=Je.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,f){const T=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*T>l}setStale(){this.stale=!0}}function Te(I,l,f,T,D){I.emplaceBack(l?1:0,f?1:0,T||0,D||0),I.emplaceBack(l?1:0,f?1:0,T||0,D||0),I.emplaceBack(l?1:0,f?1:0,T||0,D||0),I.emplaceBack(l?1:0,f?1:0,T||0,D||0)}const ze=Math.pow(2,25),Ve=Math.pow(2,24),Xe=Math.pow(2,17),et=Math.pow(2,16),ct=Math.pow(2,9),ot=Math.pow(2,8),nt=Math.pow(2,1);function ft(I){if(I.opacity===0&&!I.placed)return 0;if(I.opacity===1&&I.placed)return 4294967295;const l=I.placed?1:0,f=Math.floor(127*I.opacity);return f*ze+l*Ve+f*Xe+l*et+f*ct+l*ot+f*nt+l}const wt=0;class zt{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,f,T,D,V){const re=this._bucketParts;for(;this._currentTileIndex<l.length;)if(f.getBucketParts(re,D,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,V())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,re.sort((pe,ye)=>pe.sortKey-ye.sortKey));this._currentPartIndex<re.length;)if(f.placeLayerBucketPart(re[this._currentPartIndex],this._seenCrossTileIDs,T),this._currentPartIndex++,V())return!0;return!1}}class Rt{constructor(l,f,T,D,V,re,pe,ye){this.placement=new We(l,f,re,pe,ye),this._currentPlacementIndex=T.length-1,this._forceFullPlacement=D,this._showCollisionBoxes=V,this._done=!1}isDone(){return this._done}continuePlacement(l,f,T){const D=s.exported.now(),V=()=>{const re=s.exported.now()-D;return!this._forceFullPlacement&&re>2};for(;this._currentPlacementIndex>=0;){const re=f[l[this._currentPlacementIndex]],pe=this.placement.collisionIndex.transform.zoom;if(re.type==="symbol"&&(!re.minzoom||re.minzoom<=pe)&&(!re.maxzoom||re.maxzoom>pe)){if(this._inProgressLayer||(this._inProgressLayer=new zt(re)),this._inProgressLayer.continuePlacement(T[re.source],this.placement,this._showCollisionBoxes,re,V))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const ci=512/s.EXTENT/2;class Wt{constructor(l,f,T){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=T;for(let D=0;D<f.length;D++){const V=f.get(D),re=V.key;this.indexedSymbolInstances[re]||(this.indexedSymbolInstances[re]=[]),this.indexedSymbolInstances[re].push({crossTileID:V.crossTileID,coord:this.getScaledCoordinates(V,l)})}}getScaledCoordinates(l,f){const T=ci/Math.pow(2,f.canonical.z-this.tileID.canonical.z);return{x:Math.floor((f.canonical.x*s.EXTENT+l.anchorX)*T),y:Math.floor((f.canonical.y*s.EXTENT+l.anchorY)*T)}}findMatches(l,f,T){const D=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let V=0;V<l.length;V++){const re=l.get(V);if(re.crossTileID)continue;const pe=this.indexedSymbolInstances[re.key];if(!pe)continue;const ye=this.getScaledCoordinates(re,f);for(const Ae of pe)if(Math.abs(Ae.coord.x-ye.x)<=D&&Math.abs(Ae.coord.y-ye.y)<=D&&!T[Ae.crossTileID]){T[Ae.crossTileID]=!0,re.crossTileID=Ae.crossTileID;break}}}}class gi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class vi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const f=Math.round((l-this.lng)/360);if(f!==0)for(const T in this.indexes){const D=this.indexes[T],V={};for(const re in D){const pe=D[re];pe.tileID=pe.tileID.unwrapTo(pe.tileID.wrap+f),V[pe.tileID.key]=pe}this.indexes[T]=V}this.lng=l}addBucket(l,f,T){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let V=0;V<f.symbolInstances.length;V++)f.symbolInstances.get(V).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const D=this.usedCrossTileIDs[l.overscaledZ];for(const V in this.indexes){const re=this.indexes[V];if(Number(V)>l.overscaledZ)for(const pe in re){const ye=re[pe];ye.tileID.isChildOf(l)&&ye.findMatches(f.symbolInstances,l,D)}else{const pe=re[l.scaledTo(Number(V)).key];pe&&pe.findMatches(f.symbolInstances,l,D)}}for(let V=0;V<f.symbolInstances.length;V++){const re=f.symbolInstances.get(V);re.crossTileID||(re.crossTileID=T.generate(),D[re.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Wt(l,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(l,f){for(const T in f.indexedSymbolInstances)for(const D of f.indexedSymbolInstances[T])delete this.usedCrossTileIDs[l][D.crossTileID]}removeStaleBuckets(l){let f=!1;for(const T in this.indexes){const D=this.indexes[T];for(const V in D)l[D[V].bucketInstanceId]||(this.removeBucketCrossTileIDs(T,D[V]),delete D[V],f=!0)}return f}}class Hi{constructor(){this.layerIndexes={},this.crossTileIDs=new gi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,f,T){let D=this.layerIndexes[l.id];D===void 0&&(D=this.layerIndexes[l.id]=new vi);let V=!1;const re={};D.handleWrapJump(T);for(const pe of f){const ye=pe.getBucket(l);ye&&l.id===ye.layerIds[0]&&(ye.bucketInstanceId||(ye.bucketInstanceId=++this.maxBucketInstanceId),D.addBucket(pe.tileID,ye,this.crossTileIDs)&&(V=!0),re[ye.bucketInstanceId]=!0)}return D.removeStaleBuckets(re)&&(V=!0),V}pruneUnusedLayers(l){const f={};l.forEach(T=>{f[T]=!0});for(const T in this.layerIndexes)f[T]||delete this.layerIndexes[T]}}var Ui=s.createLayout([{name:"a_pos",type:"Int16",components:2}]);class qi extends s.Evented{constructor(l){super(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=l._cache.max,l.usedForTerrain=!0,l.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const l in this._tiles){const f=this._tiles[l];f.textures.forEach(T=>T.destroy()),f.textures=[]}}update(l,f){this.sourceCache.update(l,f),this._renderableTilesKeys=[];for(const T of l.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:f}))this._renderableTilesKeys.push(T.key),this._tiles[T.key]||(T.posMatrix=new Float64Array(16),s.ortho(T.posMatrix,0,s.EXTENT,0,s.EXTENT,0,1),this._tiles[T.key]=new ge(T,this.tileSize))}removeOutdated(l){const f={};this.renderHistory=this.renderHistory.filter((T,D)=>this.renderHistory.indexOf(T)===D).slice(0,this.renderHistorySize);for(const T of this._renderableTilesKeys)f[T]=!0;for(const T of this.renderHistory)f[T]=!0;for(const T in this._tiles)f[T]||(this._tiles[T].clearTextures(l),delete this._tiles[T])}getRenderableTiles(){return this._renderableTilesKeys.map(l=>this.getTileByID(l))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l){const f={};for(const T of this._renderableTilesKeys){const D=this._tiles[T].tileID;if(D.canonical.equals(l.canonical)){const V=l.clone();V.posMatrix=new Float64Array(16),s.ortho(V.posMatrix,0,s.EXTENT,0,s.EXTENT,0,1),f[T]=V}else if(D.canonical.isChildOf(l.canonical)){const V=l.clone();V.posMatrix=new Float64Array(16);const re=D.canonical.z-l.canonical.z,pe=D.canonical.x-(D.canonical.x>>re<<re),ye=D.canonical.y-(D.canonical.y>>re<<re),Ae=s.EXTENT>>re;s.ortho(V.posMatrix,0,Ae,0,Ae,0,1),s.translate(V.posMatrix,V.posMatrix,[-pe*Ae,-ye*Ae,0]),f[T]=V}else if(l.canonical.isChildOf(D.canonical)){const V=l.clone();V.posMatrix=new Float64Array(16);const re=l.canonical.z-D.canonical.z,pe=l.canonical.x-(l.canonical.x>>re<<re),ye=l.canonical.y-(l.canonical.y>>re<<re),Ae=s.EXTENT>>re;s.ortho(V.posMatrix,0,s.EXTENT,0,s.EXTENT,0,1),s.translate(V.posMatrix,V.posMatrix,[pe*Ae,ye*Ae,0]),s.scale(V.posMatrix,V.posMatrix,[1/2**re,1/2**re,0]),f[T]=V}}return f}getSourceTile(l,f){const T=this.sourceCache._source;let D=l.overscaledZ-this.deltaZoom;if(D>T.maxzoom&&(D=T.maxzoom),D<T.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(D).key);let V=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!V||!V.dem)&&f)for(;D>=T.minzoom&&(!V||!V.dem);)V=this.sourceCache.getTileByID(l.scaledTo(D--).key);return V}tilesAfterTime(l=Date.now()){return Object.values(this._tiles).filter(f=>f.timeLoaded>=l)}}class mi{constructor(l,f,T){this.style=l,this.sourceCache=new qi(f),this.options=T,this.exaggeration=typeof T.exaggeration=="number"?T.exaggeration:1,this.elevationOffset=typeof T.elevationOffset=="number"?T.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(l,f,T,D=s.EXTENT){if(!(f>=0&&f<D&&T>=0&&T<D))return this.elevationOffset;let V=0;const re=this.getTerrainData(l);if(re.tile&&re.tile.dem){const pe=s.transformMat4$1([],[f/D*s.EXTENT,T/D*s.EXTENT],re.u_terrain_matrix),ye=[pe[0]*re.tile.dem.dim,pe[1]*re.tile.dem.dim],Ae=[Math.floor(ye[0]),Math.floor(ye[1])],Be=re.tile.dem.get(Ae[0],Ae[1]),Ge=re.tile.dem.get(Ae[0],Ae[1]+1),Ye=re.tile.dem.get(Ae[0]+1,Ae[1]),it=re.tile.dem.get(Ae[0]+1,Ae[1]+1);V=s.number(s.number(Be,Ge,ye[0]-Ae[0]),s.number(Ye,it,ye[0]-Ae[0]),ye[1]-Ae[1])}return V}rememberForRerender(l,f){for(const T in this.sourceCache._tiles){const D=this.sourceCache._tiles[T];(D.tileID.equals(f)||D.tileID.isChildOf(f))&&(l===this.sourceCache.sourceCache.id&&(D.timeLoaded=Date.now()),this._rerender[l]=this._rerender[l]||{},this._rerender[l][D.tileID.key]=!0)}}needsRerender(l,f){return this._rerender[l]&&this._rerender[l][f.key]}clearRerenderCache(){this._rerender={}}getElevation(l,f,T,D=s.EXTENT){return(this.getDEMElevation(l,f,T,D)+this.elevationOffset)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const D=this.style.map.painter.context,V=new s.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new _(D,V,D.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new _(D,new s.RGBAImage({width:1,height:1}),D.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(D.gl.NEAREST,D.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.identity([])}const f=this.sourceCache.getSourceTile(l,!0);if(f&&f.dem&&(!f.demTexture||f.needsTerrainPrepare)){const D=this.style.map.painter.context;f.demTexture=this.style.map.painter.getTileTexture(f.dem.stride),f.demTexture?f.demTexture.update(f.dem.getPixels(),{premultiply:!1}):f.demTexture=new _(D,f.dem.getPixels(),D.gl.RGBA,{premultiply:!1}),f.demTexture.bind(D.gl.NEAREST,D.gl.CLAMP_TO_EDGE),f.needsTerrainPrepare=!1}const T=f&&f+f.tileID.key+l.key;if(T&&!this._demMatrixCache[T]){const D=this.sourceCache.sourceCache._source.maxzoom;let V=l.canonical.z-f.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=D?V=l.canonical.z-D:s.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const re=l.canonical.x-(l.canonical.x>>V<<V),pe=l.canonical.y-(l.canonical.y>>V<<V),ye=s.fromScaling(new Float64Array(16),[1/(s.EXTENT<<V),1/(s.EXTENT<<V),0]);s.translate(ye,ye,[re*s.EXTENT,pe*s.EXTENT,0]),this._demMatrixCache[l.key]={matrix:ye,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:f&&f.dem&&f.dem.dim||1,u_terrain_matrix:T?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:f&&f.dem&&f.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(f&&f.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:f}}getRTTFramebuffer(){const l=this.style.map.painter;if(!this._rttFramebuffer){const f=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=l.context.createFramebuffer(f,f,!0),this._rttFramebuffer.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,f,f))}return this._rttFramebuffer}getFramebuffer(l){const f=this.style.map.painter,T=f.width/devicePixelRatio,D=f.height/devicePixelRatio;return!this._fbo||this._fbo.width===T&&this._fbo.height===D||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new _(f.context,{width:T,height:D,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new _(f.context,{width:T,height:D,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=f.context.createFramebuffer(T,D,!0),this._fbo.depthAttachment.set(f.context.createRenderbuffer(f.context.gl.DEPTH_COMPONENT16,T,D))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const f=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let V=0,re=0;V<this._coordsTextureSize;V++)for(let pe=0;pe<this._coordsTextureSize;pe++,re+=4)f[re+0]=255&pe,f[re+1]=255&V,f[re+2]=pe>>8<<4|V>>8,f[re+3]=0;const T=new s.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(f.buffer)),D=new _(l,T,l.gl.RGBA,{premultiply:!1});return D.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=D,D}pointCoordinate(l){const f=new Uint8Array(4),T=this.style.map.painter,D=T.context,V=D.gl;D.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),V.readPixels(l.x,T.height/devicePixelRatio-l.y-1,1,1,V.RGBA,V.UNSIGNED_BYTE,f),D.bindFramebuffer.set(null);const re=f[0]+(f[2]>>4<<8),pe=f[1]+((15&f[2])<<8),ye=this.coordsIndex[255-f[3]],Ae=ye&&this.sourceCache.getTileByID(ye);if(!Ae)return null;const Be=this._coordsTextureSize,Ge=(1<<Ae.tileID.canonical.z)*Be;return new s.MercatorCoordinate((Ae.tileID.canonical.x*Be+re)/Ge,(Ae.tileID.canonical.y*Be+pe)/Ge,this.getElevation(Ae.tileID,re,pe,Be))}getTerrainMesh(){if(this._mesh)return this._mesh;const l=this.style.map.painter.context,f=new s.PosArray,T=new s.TriangleIndexArray,D=this.meshSize,V=s.EXTENT/D,re=D*D;for(let pe=0;pe<=D;pe++)for(let ye=0;ye<=D;ye++)f.emplaceBack(ye*V,pe*V);for(let pe=0;pe<re;pe+=D+1)for(let ye=0;ye<D;ye++)T.emplaceBack(ye+pe,D+ye+pe+1,D+ye+pe+2),T.emplaceBack(ye+pe,D+ye+pe+2,ye+pe+1);return this._mesh={indexBuffer:l.createIndexBuffer(T),vertexBuffer:l.createVertexBuffer(f,Ui.members),segments:s.SegmentVector.simpleSegment(0,0,f.length,T.length)},this._mesh}getMinMaxElevation(l){const f=this.getTerrainData(l).tile,T={minElevation:null,maxElevation:null};return f&&f.dem&&(T.minElevation=(f.dem.min+this.elevationOffset)*this.exaggeration,T.maxElevation=(f.dem.max+this.elevationOffset)*this.exaggeration),T}}const Ri=(I,l)=>s.emitValidationErrors(I,l&&l.filter(f=>f.identifier!=="source.canvas")),Xr=s.pick(Le,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),on=s.pick(Le,["setCenter","setZoom","setBearing","setPitch"]),En=function(){const I={},l=s.spec.$version;for(const f in s.spec.$root){const T=s.spec.$root[f];if(T.required){let D=null;D=f==="version"?l:T.type==="array"?[]:{},D!=null&&(I[f]=D)}}return I}();class br extends s.Evented{constructor(l,f={}){super(),this.map=l,this.dispatcher=new K(_e(),this),this.imageManager=new k,this.imageManager.setEventedParent(this),this.glyphManager=new M(l._requestManager,f.localIdeographFontFamily),this.lineAtlas=new Z(256,512),this.crossTileSymbolIndex=new Hi,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const T=this;this._rtlTextPluginCallback=br.registerForPluginStateChange(D=>{T.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:D.pluginStatus,pluginURL:D.pluginURL},(V,re)=>{if(s.triggerPluginCompletionEvent(V),re&&re.every(pe=>pe))for(const pe in T.sourceCaches)T.sourceCaches[pe].reload()})}),this.on("data",D=>{if(D.dataType!=="source"||D.sourceDataType!=="metadata")return;const V=this.sourceCaches[D.sourceId];if(!V)return;const re=V.getSource();if(re&&re.vectorLayerIds)for(const pe in this._layers){const ye=this._layers[pe];ye.source===re.id&&this._validateLayer(ye)}})}loadURL(l,f={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const T=typeof f.validate!="boolean"||f.validate,D=this.map._requestManager.transformRequest(l,s.ResourceType.Style);this._request=s.getJSON(D,(V,re)=>{this._request=null,V?this.fire(new s.ErrorEvent(V)):re&&this._load(re,T)})}loadJSON(l,f={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(l,f.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(En,!1)}_load(l,f){if(f&&Ri(this,s.validateStyle(l)))return;this._loaded=!0,this.stylesheet=l;for(const D in l.sources)this.addSource(D,l.sources[D],{validate:!1});l.sprite?this._loadSprite(l.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(l.glyphs);const T=ke(this.stylesheet.layers);this._order=T.map(D=>D.id),this._layers={},this._serializedLayers={};for(let D of T)D=s.createStyleLayer(D),D.setEventedParent(this,{layer:{id:D.id}}),this._layers[D.id]=D,this._serializedLayers[D.id]=D.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Y(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}_loadSprite(l){this._spriteRequest=function(f,T,D,V){let re,pe,ye;const Ae=D>1?"@2x":"";let Be=s.getJSON(T.transformRequest(T.normalizeSpriteURL(f,Ae,".json"),s.ResourceType.SpriteJSON),(it,Je)=>{Be=null,ye||(ye=it,re=Je,Ye())}),Ge=s.getImage(T.transformRequest(T.normalizeSpriteURL(f,Ae,".png"),s.ResourceType.SpriteImage),(it,Je)=>{Ge=null,ye||(ye=it,pe=Je,Ye())});function Ye(){if(ye)V(ye);else if(re&&pe){const it=s.exported.getImageData(pe),Je={};for(const tt in re){const{width:pt,height:vt,x:Ct,y:st,sdf:It,pixelRatio:Et,stretchX:Ot,stretchY:jt,content:Vt}=re[tt],Lt=new s.RGBAImage({width:pt,height:vt});s.RGBAImage.copy(it,Lt,{x:Ct,y:st},{x:0,y:0},{width:pt,height:vt}),Je[tt]={data:Lt,pixelRatio:Et,sdf:It,stretchX:Ot,stretchY:jt,content:Vt}}V(null,Je)}}return{cancel(){Be&&(Be.cancel(),Be=null),Ge&&(Ge.cancel(),Ge=null)}}}(l,this.map._requestManager,this.map.getPixelRatio(),(f,T)=>{if(this._spriteRequest=null,f)this.fire(new s.ErrorEvent(f));else if(T)for(const D in T)this.imageManager.addImage(D,T[D]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(l){const f=this.sourceCaches[l.source];if(!f)return;const T=l.sourceLayer;if(!T)return;const D=f.getSource();(D.type==="geojson"||D.vectorLayerIds&&D.vectorLayerIds.indexOf(T)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${T}" does not exist on source "${D.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const f=[];for(const T of l){const D=this._layers[T];D.type!=="custom"&&f.push(D.serialize())}return f}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const l in this.sourceCaches)if(this.sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const f=this._changed;if(this._changed){const D=Object.keys(this._updatedLayers),V=Object.keys(this._removedLayers);(D.length||V.length)&&this._updateWorkerLayers(D,V);for(const re in this._updatedSources){const pe=this._updatedSources[re];if(pe==="reload")this._reloadSource(re);else{if(pe!=="clear")throw new Error(`Invalid action ${pe}`);this._clearSource(re)}}this._updateTilesForChangedImages();for(const re in this._updatedPaintProps)this._layers[re].updateTransitions(l);this.light.updateTransitions(l),this._resetUpdates()}const T={};for(const D in this.sourceCaches){const V=this.sourceCaches[D];T[D]=V.used,V.used=!1}for(const D of this._order){const V=this._layers[D];V.recalculate(l,this._availableImages),!V.isHidden(l.zoom)&&V.source&&(this.sourceCaches[V.source].used=!0)}for(const D in T){const V=this.sourceCaches[D];T[D]!==V.used&&V.fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:D}))}this.light.recalculate(l),this.z=l.zoom,f&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const f in this.sourceCaches)this.sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,f){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(l){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),l){const f=this.sourceCaches[l.source];if(!f)throw new Error(`cannot load terrain, because there exists no source with ID: ${l.source}`);this.terrain=new mi(this,f,l),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=T=>{T.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=T=>{T.tile&&(T.sourceId===l.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(T.sourceId,T.tile.tileID)):T.source.type==="geojson"&&this.terrain.rememberForRerender(T.sourceId,T.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new s.Event("terrain",{terrain:l}))}setState(l){if(this._checkLoaded(),Ri(this,s.validateStyle(l)))return!1;(l=s.clone$1(l)).layers=ke(l.layers);const f=function(D,V){if(!D)return[{command:Le.setStyle,args:[V]}];let re=[];try{if(!y(D.version,V.version))return[{command:Le.setStyle,args:[V]}];y(D.center,V.center)||re.push({command:Le.setCenter,args:[V.center]}),y(D.zoom,V.zoom)||re.push({command:Le.setZoom,args:[V.zoom]}),y(D.bearing,V.bearing)||re.push({command:Le.setBearing,args:[V.bearing]}),y(D.pitch,V.pitch)||re.push({command:Le.setPitch,args:[V.pitch]}),y(D.sprite,V.sprite)||re.push({command:Le.setSprite,args:[V.sprite]}),y(D.glyphs,V.glyphs)||re.push({command:Le.setGlyphs,args:[V.glyphs]}),y(D.transition,V.transition)||re.push({command:Le.setTransition,args:[V.transition]}),y(D.light,V.light)||re.push({command:Le.setLight,args:[V.light]});const pe={},ye=[];(function(Be,Ge,Ye,it){let Je;for(Je in Ge=Ge||{},Be=Be||{})Object.prototype.hasOwnProperty.call(Be,Je)&&(Object.prototype.hasOwnProperty.call(Ge,Je)||Re(Je,Ye,it));for(Je in Ge)Object.prototype.hasOwnProperty.call(Ge,Je)&&(Object.prototype.hasOwnProperty.call(Be,Je)?y(Be[Je],Ge[Je])||(Be[Je].type==="geojson"&&Ge[Je].type==="geojson"&&De(Be,Ge,Je)?Ye.push({command:Le.setGeoJSONSourceData,args:[Je,Ge[Je].data]}):$e(Je,Ge,Ye,it)):me(Je,Ge,Ye))})(D.sources,V.sources,ye,pe);const Ae=[];D.layers&&D.layers.forEach(Be=>{pe[Be.source]?re.push({command:Le.removeLayer,args:[Be.id]}):Ae.push(Be)}),re=re.concat(ye),function(Be,Ge,Ye){Ge=Ge||[];const it=(Be=Be||[]).map(Pe),Je=Ge.map(Pe),tt=Be.reduce(Fe,{}),pt=Ge.reduce(Fe,{}),vt=it.slice(),Ct=Object.create(null);let st,It,Et,Ot,jt,Vt,Lt;for(st=0,It=0;st<it.length;st++)Et=it[st],Object.prototype.hasOwnProperty.call(pt,Et)?It++:(Ye.push({command:Le.removeLayer,args:[Et]}),vt.splice(vt.indexOf(Et,It),1));for(st=0,It=0;st<Je.length;st++)Et=Je[Je.length-1-st],vt[vt.length-1-st]!==Et&&(Object.prototype.hasOwnProperty.call(tt,Et)?(Ye.push({command:Le.removeLayer,args:[Et]}),vt.splice(vt.lastIndexOf(Et,vt.length-It),1)):It++,Vt=vt[vt.length-st],Ye.push({command:Le.addLayer,args:[pt[Et],Vt]}),vt.splice(vt.length-st,0,Et),Ct[Et]=!0);for(st=0;st<Je.length;st++)if(Et=Je[st],Ot=tt[Et],jt=pt[Et],!Ct[Et]&&!y(Ot,jt))if(y(Ot.source,jt.source)&&y(Ot["source-layer"],jt["source-layer"])&&y(Ot.type,jt.type)){for(Lt in Se(Ot.layout,jt.layout,Ye,Et,null,Le.setLayoutProperty),Se(Ot.paint,jt.paint,Ye,Et,null,Le.setPaintProperty),y(Ot.filter,jt.filter)||Ye.push({command:Le.setFilter,args:[Et,jt.filter]}),y(Ot.minzoom,jt.minzoom)&&y(Ot.maxzoom,jt.maxzoom)||Ye.push({command:Le.setLayerZoomRange,args:[Et,jt.minzoom,jt.maxzoom]}),Ot)Object.prototype.hasOwnProperty.call(Ot,Lt)&&Lt!=="layout"&&Lt!=="paint"&&Lt!=="filter"&&Lt!=="metadata"&&Lt!=="minzoom"&&Lt!=="maxzoom"&&(Lt.indexOf("paint.")===0?Se(Ot[Lt],jt[Lt],Ye,Et,Lt.slice(6),Le.setPaintProperty):y(Ot[Lt],jt[Lt])||Ye.push({command:Le.setLayerProperty,args:[Et,Lt,jt[Lt]]}));for(Lt in jt)Object.prototype.hasOwnProperty.call(jt,Lt)&&!Object.prototype.hasOwnProperty.call(Ot,Lt)&&Lt!=="layout"&&Lt!=="paint"&&Lt!=="filter"&&Lt!=="metadata"&&Lt!=="minzoom"&&Lt!=="maxzoom"&&(Lt.indexOf("paint.")===0?Se(Ot[Lt],jt[Lt],Ye,Et,Lt.slice(6),Le.setPaintProperty):y(Ot[Lt],jt[Lt])||Ye.push({command:Le.setLayerProperty,args:[Et,Lt,jt[Lt]]}))}else Ye.push({command:Le.removeLayer,args:[Et]}),Vt=vt[vt.lastIndexOf(Et)+1],Ye.push({command:Le.addLayer,args:[jt,Vt]})}(Ae,V.layers,re)}catch(pe){console.warn("Unable to compute style diff:",pe),re=[{command:Le.setStyle,args:[V]}]}return re}(this.serialize(),l).filter(D=>!(D.command in on));if(f.length===0)return!1;const T=f.filter(D=>!(D.command in Xr));if(T.length>0)throw new Error(`Unimplemented: ${T.map(D=>D.command).join(", ")}.`);return f.forEach(D=>{D.command!=="setTransition"&&this[D.command].apply(this,D.args)}),this.stylesheet=l,!0}addImage(l,f){if(this.getImage(l))return this.fire(new s.ErrorEvent(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,f),this._afterImageUpdated(l)}updateImage(l,f){this.imageManager.updateImage(l,f)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new s.ErrorEvent(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,f,T={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(s.validateStyle.source,`sources.${l}`,f,null,T))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const D=this.sourceCaches[l]=new ie(l,f,this.dispatcher);D.style=this,D.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:D.serialize(),sourceId:l})),D.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const T in this._layers)if(this._layers[T].source===l)return this.fire(new s.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${T}" is using it.`)));const f=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],f.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),f.setEventedParent(null),f.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,f){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const T=this.sourceCaches[l].getSource();if(T.type!=="geojson")throw new Error(`geojsonSource.type is ${T.type}, which is !== 'geojson`);T.setData(f),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,f,T={}){this._checkLoaded();const D=l.id;if(this.getLayer(D))return void this.fire(new s.ErrorEvent(new Error(`Layer "${D}" already exists on this map.`)));let V;if(l.type==="custom"){if(Ri(this,s.validateCustomStyleLayer(l)))return;V=s.createStyleLayer(l)}else{if(typeof l.source=="object"&&(this.addSource(D,l.source),l=s.clone$1(l),l=s.extend(l,{source:D})),this._validate(s.validateStyle.layer,`layers.${D}`,l,{arrayIndex:-1},T))return;V=s.createStyleLayer(l),this._validateLayer(V),V.setEventedParent(this,{layer:{id:D}}),this._serializedLayers[V.id]=V.serialize()}const re=f?this._order.indexOf(f):this._order.length;if(f&&re===-1)this.fire(new s.ErrorEvent(new Error(`Cannot add layer "${D}" before non-existing layer "${f}".`)));else{if(this._order.splice(re,0,D),this._layerOrderChanged=!0,this._layers[D]=V,this._removedLayers[D]&&V.source&&V.type!=="custom"){const pe=this._removedLayers[D];delete this._removedLayers[D],pe.type!==V.type?this._updatedSources[V.source]="clear":(this._updatedSources[V.source]="reload",this.sourceCaches[V.source].pause())}this._updateLayer(V),V.onAdd&&V.onAdd(this.map)}}moveLayer(l,f){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===f)return;const T=this._order.indexOf(l);this._order.splice(T,1);const D=f?this._order.indexOf(f):this._order.length;f&&D===-1?this.fire(new s.ErrorEvent(new Error(`Cannot move layer "${l}" before non-existing layer "${f}".`))):(this._order.splice(D,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const f=this._layers[l];if(!f)return void this.fire(new s.ErrorEvent(new Error(`Cannot remove non-existing layer "${l}".`)));f.setEventedParent(null);const T=this._order.indexOf(l);this._order.splice(T,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=f,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],f.onRemove&&f.onRemove(this.map)}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,f,T){this._checkLoaded();const D=this.getLayer(l);D?D.minzoom===f&&D.maxzoom===T||(f!=null&&(D.minzoom=f),T!=null&&(D.maxzoom=T),this._updateLayer(D)):this.fire(new s.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,f,T={}){this._checkLoaded();const D=this.getLayer(l);if(D){if(!y(D.filter,f))return f==null?(D.filter=void 0,void this._updateLayer(D)):void(this._validate(s.validateStyle.filter,`layers.${D.id}.filter`,f,null,T)||(D.filter=s.clone$1(f),this._updateLayer(D)))}else this.fire(new s.ErrorEvent(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return s.clone$1(this.getLayer(l).filter)}setLayoutProperty(l,f,T,D={}){this._checkLoaded();const V=this.getLayer(l);V?y(V.getLayoutProperty(f),T)||(V.setLayoutProperty(f,T,D),this._updateLayer(V)):this.fire(new s.ErrorEvent(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,f){const T=this.getLayer(l);if(T)return T.getLayoutProperty(f);this.fire(new s.ErrorEvent(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,f,T,D={}){this._checkLoaded();const V=this.getLayer(l);V?y(V.getPaintProperty(f),T)||(V.setPaintProperty(f,T,D)&&this._updateLayer(V),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new s.ErrorEvent(new Error(`Cannot style non-existing layer "${l}".`)))}getPaintProperty(l,f){return this.getLayer(l).getPaintProperty(f)}setFeatureState(l,f){this._checkLoaded();const T=l.source,D=l.sourceLayer,V=this.sourceCaches[T];if(V===void 0)return void this.fire(new s.ErrorEvent(new Error(`The source '${T}' does not exist in the map's style.`)));const re=V.getSource().type;re==="geojson"&&D?this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):re!=="vector"||D?(l.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),V.setFeatureState(D,l.id,f)):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,f){this._checkLoaded();const T=l.source,D=this.sourceCaches[T];if(D===void 0)return void this.fire(new s.ErrorEvent(new Error(`The source '${T}' does not exist in the map's style.`)));const V=D.getSource().type,re=V==="vector"?l.sourceLayer:void 0;V!=="vector"||re?f&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):D.removeFeatureState(re,l.id,f):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const f=l.source,T=l.sourceLayer,D=this.sourceCaches[f];if(D!==void 0)return D.getSource().type!=="vector"||T?(l.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),D.getFeatureState(T,l.id)):void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:s.mapObject(this.sourceCaches,l=>l.serialize()),layers:this._serializeLayers(this._order)},l=>l!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(l){const f=re=>this._layers[re].type==="fill-extrusion",T={},D=[];for(let re=this._order.length-1;re>=0;re--){const pe=this._order[re];if(f(pe)){T[pe]=re;for(const ye of l){const Ae=ye[pe];if(Ae)for(const Be of Ae)D.push(Be)}}}D.sort((re,pe)=>pe.intersectionZ-re.intersectionZ);const V=[];for(let re=this._order.length-1;re>=0;re--){const pe=this._order[re];if(f(pe))for(let ye=D.length-1;ye>=0;ye--){const Ae=D[ye].feature;if(T[Ae.layer.id]<re)break;V.push(Ae),D.pop()}else for(const ye of l){const Ae=ye[pe];if(Ae)for(const Be of Ae)V.push(Be.feature)}}return V}queryRenderedFeatures(l,f,T){f&&f.filter&&this._validate(s.validateStyle.filter,"queryRenderedFeatures.filter",f.filter,null,f);const D={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const re of f.layers){const pe=this._layers[re];if(!pe)return this.fire(new s.ErrorEvent(new Error(`The layer '${re}' does not exist in the map's style and cannot be queried for features.`))),[];D[pe.source]=!0}}const V=[];f.availableImages=this._availableImages;for(const re in this.sourceCaches)f.layers&&!D[re]||V.push(oe(this.sourceCaches[re],this._layers,this._serializedLayers,l,f,T));return this.placement&&V.push(function(re,pe,ye,Ae,Be,Ge,Ye){const it={},Je=Ge.queryRenderedSymbols(Ae),tt=[];for(const pt of Object.keys(Je).map(Number))tt.push(Ye[pt]);tt.sort(Ce);for(const pt of tt){const vt=pt.featureIndex.lookupSymbolFeatures(Je[pt.bucketInstanceId],pe,pt.bucketIndex,pt.sourceLayerIndex,Be.filter,Be.layers,Be.availableImages,re);for(const Ct in vt){const st=it[Ct]=it[Ct]||[],It=vt[Ct];It.sort((Et,Ot)=>{const jt=pt.featureSortOrder;if(jt){const Vt=jt.indexOf(Et.featureIndex);return jt.indexOf(Ot.featureIndex)-Vt}return Ot.featureIndex-Et.featureIndex});for(const Et of It)st.push(Et)}}for(const pt in it)it[pt].forEach(vt=>{const Ct=vt.feature,st=ye[re[pt].source].getFeatureState(Ct.layer["source-layer"],Ct.id);Ct.source=Ct.layer.source,Ct.layer["source-layer"]&&(Ct.sourceLayer=Ct.layer["source-layer"]),Ct.state=st});return it}(this._layers,this._serializedLayers,this.sourceCaches,l,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(V)}querySourceFeatures(l,f){f&&f.filter&&this._validate(s.validateStyle.filter,"querySourceFeatures.filter",f.filter,null,f);const T=this.sourceCaches[l];return T?function(D,V){const re=D.getRenderableIds().map(Ae=>D.getTileByID(Ae)),pe=[],ye={};for(let Ae=0;Ae<re.length;Ae++){const Be=re[Ae],Ge=Be.tileID.canonical.key;ye[Ge]||(ye[Ge]=!0,Be.querySourceFeatures(pe,V))}return pe}(T,f):[]}addSourceType(l,f,T){return br.getSourceType(l)?T(new Error(`A source type called "${l}" already exists.`)):(br.setSourceType(l,f),f.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:f.workerSourceURL},T):T(null,null))}getLight(){return this.light.getLight()}setLight(l,f={}){this._checkLoaded();const T=this.light.getLight();let D=!1;for(const re in l)if(!y(l[re],T[re])){D=!0;break}if(!D)return;const V={now:s.exported.now(),transition:s.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,f),this.light.updateTransitions(V)}_validate(l,f,T,D,V={}){return(!V||V.validate!==!1)&&Ri(this,l.call(s.validateStyle,s.extend({key:f,style:this.serialize(),value:T,styleSpec:s.spec},D)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.sourceCaches){const f=this.sourceCaches[l];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const f in this.sourceCaches)this.sourceCaches[f].update(l,this.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,f,T,D,V=!1){let re=!1,pe=!1;const ye={};for(const Ae of this._order){const Be=this._layers[Ae];if(Be.type!=="symbol")continue;if(!ye[Be.source]){const Ye=this.sourceCaches[Be.source];ye[Be.source]=Ye.getRenderableIds(!0).map(it=>Ye.getTileByID(it)).sort((it,Je)=>Je.tileID.overscaledZ-it.tileID.overscaledZ||(it.tileID.isLessThan(Je.tileID)?-1:1))}const Ge=this.crossTileSymbolIndex.addLayer(Be,ye[Be.source],l.center.lng);re=re||Ge}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((V=V||this._layerOrderChanged||T===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),l.zoom))&&(this.pauseablePlacement=new Rt(l,this.terrain,this._order,V,f,T,D,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ye),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),pe=!0),re&&this.pauseablePlacement.placement.setStale()),pe||re)for(const Ae of this._order){const Be=this._layers[Ae];Be.type==="symbol"&&this.placement.updateLayerOpacities(Be,ye[Be.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,f,T){this.imageManager.getImages(f.icons,T),this._updateTilesForChangedImages();const D=this.sourceCaches[f.source];D&&D.setDependencies(f.tileID.key,f.type,f.icons)}getGlyphs(l,f,T){this.glyphManager.getGlyphs(f.stacks,T)}getResource(l,f,T){return s.makeRequest(f,T)}}br.getSourceType=function(I){return fe[I]},br.setSourceType=function(I,l){fe[I]=l},br.registerForPluginStateChange=s.registerForPluginStateChange;var Fo="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const _l={prelude:zr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:zr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:zr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:zr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:zr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:zr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:zr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:zr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:zr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:zr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:zr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:zr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:zr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:zr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:zr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:zr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:zr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:zr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:zr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:zr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:zr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:zr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:zr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:zr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:zr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:zr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:zr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Fo),terrainDepth:zr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Fo),terrainCoords:zr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Fo)};function zr(I,l){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,T=l.match(/attribute ([\w]+) ([\w]+)/g),D=I.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),V=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),re=V?V.concat(D):D,pe={};return{fragmentSource:I=I.replace(f,(ye,Ae,Be,Ge,Ye)=>(pe[Ye]=!0,Ae==="define"?`
#ifndef HAS_UNIFORM_u_${Ye}
varying ${Be} ${Ge} ${Ye};
#else
uniform ${Be} ${Ge} u_${Ye};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Ye}
    ${Be} ${Ge} ${Ye} = u_${Ye};
#endif
`)),vertexSource:l=l.replace(f,(ye,Ae,Be,Ge,Ye)=>{const it=Ge==="float"?"vec2":"vec4",Je=Ye.match(/color/)?"color":it;return pe[Ye]?Ae==="define"?`
#ifndef HAS_UNIFORM_u_${Ye}
uniform lowp float u_${Ye}_t;
attribute ${Be} ${it} a_${Ye};
varying ${Be} ${Ge} ${Ye};
#else
uniform ${Be} ${Ge} u_${Ye};
#endif
`:Je==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ye}
    ${Ye} = a_${Ye};
#else
    ${Be} ${Ge} ${Ye} = u_${Ye};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ye}
    ${Ye} = unpack_mix_${Je}(a_${Ye}, u_${Ye}_t);
#else
    ${Be} ${Ge} ${Ye} = u_${Ye};
#endif
`:Ae==="define"?`
#ifndef HAS_UNIFORM_u_${Ye}
uniform lowp float u_${Ye}_t;
attribute ${Be} ${it} a_${Ye};
#else
uniform ${Be} ${Ge} u_${Ye};
#endif
`:Je==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ye}
    ${Be} ${Ge} ${Ye} = a_${Ye};
#else
    ${Be} ${Ge} ${Ye} = u_${Ye};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ye}
    ${Be} ${Ge} ${Ye} = unpack_mix_${Je}(a_${Ye}, u_${Ye}_t);
#else
    ${Be} ${Ge} ${Ye} = u_${Ye};
#endif
`}),staticAttributes:T,staticUniforms:re}}class Ix{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,f,T,D,V,re,pe,ye,Ae){this.context=l;let Be=this.boundPaintVertexBuffers.length!==D.length;for(let Ge=0;!Be&&Ge<D.length;Ge++)this.boundPaintVertexBuffers[Ge]!==D[Ge]&&(Be=!0);l.extVertexArrayObject&&this.vao&&this.boundProgram===f&&this.boundLayoutVertexBuffer===T&&!Be&&this.boundIndexBuffer===V&&this.boundVertexOffset===re&&this.boundDynamicVertexBuffer===pe&&this.boundDynamicVertexBuffer2===ye&&this.boundDynamicVertexBuffer3===Ae?(l.bindVertexArrayOES.set(this.vao),pe&&pe.bind(),V&&V.dynamicDraw&&V.bind(),ye&&ye.bind(),Ae&&Ae.bind()):this.freshBind(f,T,D,V,re,pe,ye,Ae)}freshBind(l,f,T,D,V,re,pe,ye){let Ae;const Be=l.numAttributes,Ge=this.context,Ye=Ge.gl;if(Ge.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ge.extVertexArrayObject.createVertexArrayOES(),Ge.bindVertexArrayOES.set(this.vao),Ae=0,this.boundProgram=l,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=T,this.boundIndexBuffer=D,this.boundVertexOffset=V,this.boundDynamicVertexBuffer=re,this.boundDynamicVertexBuffer2=pe,this.boundDynamicVertexBuffer3=ye;else{Ae=Ge.currentNumAttributes||0;for(let it=Be;it<Ae;it++)Ye.disableVertexAttribArray(it)}f.enableAttributes(Ye,l);for(const it of T)it.enableAttributes(Ye,l);re&&re.enableAttributes(Ye,l),pe&&pe.enableAttributes(Ye,l),ye&&ye.enableAttributes(Ye,l),f.bind(),f.setVertexAttribPointers(Ye,l,V);for(const it of T)it.bind(),it.setVertexAttribPointers(Ye,l,V);re&&(re.bind(),re.setVertexAttribPointers(Ye,l,V)),D&&D.bind(),pe&&(pe.bind(),pe.setVertexAttribPointers(Ye,l,V)),ye&&(ye.bind(),ye.setVertexAttribPointers(Ye,l,V)),Ge.currentNumAttributes=Be}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function gh(I){const l=[];for(let f=0;f<I.length;f++){if(I[f]===null)continue;const T=I[f].split(" ");l.push(T.pop())}return l}class Px{constructor(l,f,T,D,V,re,pe){const ye=l.gl;this.program=ye.createProgram();const Ae=gh(T.staticAttributes),Be=D?D.getBinderAttributes():[],Ge=Ae.concat(Be),Ye=_l.prelude.staticUniforms?gh(_l.prelude.staticUniforms):[],it=T.staticUniforms?gh(T.staticUniforms):[],Je=D?D.getBinderUniforms():[],tt=Ye.concat(it).concat(Je),pt=[];for(const jt of tt)pt.indexOf(jt)<0&&pt.push(jt);const vt=D?D.defines():[];re&&vt.push("#define OVERDRAW_INSPECTOR;"),pe&&vt.push("#define TERRAIN3D;");const Ct=vt.concat(_l.prelude.fragmentSource,T.fragmentSource).join(`
`),st=vt.concat(_l.prelude.vertexSource,T.vertexSource).join(`
`),It=ye.createShader(ye.FRAGMENT_SHADER);if(ye.isContextLost())return void(this.failedToCreate=!0);ye.shaderSource(It,Ct),ye.compileShader(It),ye.attachShader(this.program,It);const Et=ye.createShader(ye.VERTEX_SHADER);if(ye.isContextLost())return void(this.failedToCreate=!0);ye.shaderSource(Et,st),ye.compileShader(Et),ye.attachShader(this.program,Et),this.attributes={};const Ot={};this.numAttributes=Ge.length;for(let jt=0;jt<this.numAttributes;jt++)Ge[jt]&&(ye.bindAttribLocation(this.program,jt,Ge[jt]),this.attributes[Ge[jt]]=jt);ye.linkProgram(this.program),ye.deleteShader(Et),ye.deleteShader(It);for(let jt=0;jt<pt.length;jt++){const Vt=pt[jt];if(Vt&&!Ot[Vt]){const Lt=ye.getUniformLocation(this.program,Vt);Lt&&(Ot[Vt]=Lt)}}this.fixedUniforms=V(l,Ot),this.terrainUniforms=((jt,Vt)=>({u_depth:new s.Uniform1i(jt,Vt.u_depth),u_terrain:new s.Uniform1i(jt,Vt.u_terrain),u_terrain_dim:new s.Uniform1f(jt,Vt.u_terrain_dim),u_terrain_matrix:new s.UniformMatrix4f(jt,Vt.u_terrain_matrix),u_terrain_unpack:new s.Uniform4f(jt,Vt.u_terrain_unpack),u_terrain_offset:new s.Uniform1f(jt,Vt.u_terrain_offset),u_terrain_exaggeration:new s.Uniform1f(jt,Vt.u_terrain_exaggeration)}))(l,Ot),this.binderUniforms=D?D.getUniforms(l,Ot):[]}draw(l,f,T,D,V,re,pe,ye,Ae,Be,Ge,Ye,it,Je,tt,pt,vt,Ct){const st=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(T),l.setStencilMode(D),l.setColorMode(V),l.setCullFace(re),ye){l.activeTexture.set(st.TEXTURE2),st.bindTexture(st.TEXTURE_2D,ye.depthTexture),l.activeTexture.set(st.TEXTURE3),st.bindTexture(st.TEXTURE_2D,ye.texture);for(const Et in this.terrainUniforms)this.terrainUniforms[Et].set(ye[Et])}for(const Et in this.fixedUniforms)this.fixedUniforms[Et].set(pe[Et]);tt&&tt.setUniforms(l,this.binderUniforms,it,{zoom:Je});let It=0;switch(f){case st.LINES:It=2;break;case st.TRIANGLES:It=3;break;case st.LINE_STRIP:It=1}for(const Et of Ye.get()){const Ot=Et.vaos||(Et.vaos={});(Ot[Ae]||(Ot[Ae]=new Ix)).bind(l,this,Be,tt?tt.getPaintVertexBuffers():[],Ge,Et.vertexOffset,pt,vt,Ct),st.drawElements(f,Et.primitiveLength*It,st.UNSIGNED_SHORT,Et.primitiveOffset*It*2)}}}function rf(I,l,f){const T=1/sr(f,1,l.transform.tileZoom),D=Math.pow(2,f.tileID.overscaledZ),V=f.tileSize*Math.pow(2,l.transform.tileZoom)/D,re=V*(f.tileID.canonical.x+f.tileID.wrap*D),pe=V*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[T,I.fromScale,I.toScale],u_fade:I.t,u_pixel_coord_upper:[re>>16,pe>>16],u_pixel_coord_lower:[65535&re,65535&pe]}}const Zg=(I,l,f,T)=>{const D=l.style.light,V=D.properties.get("position"),re=[V.x,V.y,V.z],pe=s.create$1();D.properties.get("anchor")==="viewport"&&s.fromRotation(pe,-l.transform.angle),s.transformMat3(re,re,pe);const ye=D.properties.get("color");return{u_matrix:I,u_lightpos:re,u_lightintensity:D.properties.get("intensity"),u_lightcolor:[ye.r,ye.g,ye.b],u_vertical_gradient:+f,u_opacity:T}},nf=(I,l,f,T,D,V,re)=>s.extend(Zg(I,l,f,T),rf(V,l,re),{u_height_factor:-Math.pow(2,D.overscaledZ)/re.tileSize/8}),sf=I=>({u_matrix:I}),af=(I,l,f,T)=>s.extend(sf(I),rf(f,l,T)),Xg=(I,l)=>({u_matrix:I,u_world:l}),Kg=(I,l,f,T,D)=>s.extend(af(I,l,f,T),{u_world:D}),oc=(I,l,f,T)=>{const D=I.transform;let V,re;if(T.paint.get("circle-pitch-alignment")==="map"){const pe=sr(f,1,D.zoom);V=!0,re=[pe,pe]}else V=!1,re=D.pixelsToGLUnits;return{u_camera_to_center_distance:D.cameraToCenterDistance,u_scale_with_map:+(T.paint.get("circle-pitch-scale")==="map"),u_matrix:I.translatePosMatrix(l.posMatrix,f,T.paint.get("circle-translate"),T.paint.get("circle-translate-anchor")),u_pitch_with_map:+V,u_device_pixel_ratio:I.pixelRatio,u_extrude_scale:re}},yh=(I,l,f)=>{const T=sr(f,1,l.zoom),D=Math.pow(2,l.zoom-f.tileID.overscaledZ),V=f.tileID.overscaleFactor();return{u_matrix:I,u_camera_to_center_distance:l.cameraToCenterDistance,u_pixels_to_tile_units:T,u_extrude_scale:[l.pixelsToGLUnits[0]/(T*D),l.pixelsToGLUnits[1]/(T*D)],u_overscale_factor:V}},Gc=(I,l,f=1)=>({u_matrix:I,u_color:l,u_overlay:0,u_overlay_scale:f}),Ku=I=>({u_matrix:I}),vh=(I,l,f,T)=>({u_matrix:I,u_extrude_scale:sr(l,1,f),u_intensity:T});function xh(I,l){const f=Math.pow(2,l.canonical.z),T=l.canonical.y;return[new s.MercatorCoordinate(0,T/f).toLngLat().lat,new s.MercatorCoordinate(0,(T+1)/f).toLngLat().lat]}const Qu=(I,l,f,T)=>{const D=I.transform;return{u_matrix:of(I,l,f,T),u_ratio:1/sr(l,1,D.zoom),u_device_pixel_ratio:I.pixelRatio,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]]}},bh=(I,l,f,T,D)=>s.extend(Qu(I,l,f,D),{u_image:0,u_image_height:T}),Ju=(I,l,f,T,D)=>{const V=I.transform,re=ed(l,V);return{u_matrix:of(I,l,f,D),u_texsize:l.imageAtlasTexture.size,u_ratio:1/sr(l,1,V.zoom),u_device_pixel_ratio:I.pixelRatio,u_image:0,u_scale:[re,T.fromScale,T.toScale],u_fade:T.t,u_units_to_pixels:[1/V.pixelsToGLUnits[0],1/V.pixelsToGLUnits[1]]}},kn=(I,l,f,T,D,V)=>{const re=I.lineAtlas,pe=ed(l,I.transform),ye=f.layout.get("line-cap")==="round",Ae=re.getDash(T.from,ye),Be=re.getDash(T.to,ye),Ge=Ae.width*D.fromScale,Ye=Be.width*D.toScale;return s.extend(Qu(I,l,f,V),{u_patternscale_a:[pe/Ge,-Ae.height/2],u_patternscale_b:[pe/Ye,-Be.height/2],u_sdfgamma:re.width/(256*Math.min(Ge,Ye)*I.pixelRatio)/2,u_image:0,u_tex_y_a:Ae.y,u_tex_y_b:Be.y,u_mix:D.t})};function ed(I,l){return 1/sr(I,1,l.tileZoom)}function of(I,l,f,T){return I.translatePosMatrix(T?T.posMatrix:l.tileID.posMatrix,l,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}const Qg=(I,l,f,T,D)=>{return{u_matrix:I,u_tl_parent:l,u_scale_parent:f,u_buffer_scale:1,u_fade_t:T.mix,u_opacity:T.opacity*D.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:D.paint.get("raster-brightness-min"),u_brightness_high:D.paint.get("raster-brightness-max"),u_saturation_factor:(re=D.paint.get("raster-saturation"),re>0?1-1/(1.001-re):-re),u_contrast_factor:(V=D.paint.get("raster-contrast"),V>0?1/(1-V):1+V),u_spin_weights:Jg(D.paint.get("raster-hue-rotate"))};var V,re};function Jg(I){I*=Math.PI/180;const l=Math.sin(I),f=Math.cos(I);return[(2*f+1)/3,(-Math.sqrt(3)*l-f+1)/3,(Math.sqrt(3)*l-f+1)/3]}const wh=(I,l,f,T,D,V,re,pe,ye,Ae)=>{const Be=D.transform;return{u_is_size_zoom_constant:+(I==="constant"||I==="source"),u_is_size_feature_constant:+(I==="constant"||I==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:Be.cameraToCenterDistance,u_pitch:Be.pitch/360*2*Math.PI,u_rotate_symbol:+f,u_aspect_ratio:Be.width/Be.height,u_fade_change:D.options.fadeDuration?D.symbolFadeChange:1,u_matrix:V,u_label_plane_matrix:re,u_coord_matrix:pe,u_is_text:+ye,u_pitch_with_map:+T,u_texsize:Ae,u_texture:0}},lf=(I,l,f,T,D,V,re,pe,ye,Ae,Be)=>{const Ge=D.transform;return s.extend(wh(I,l,f,T,D,V,re,pe,ye,Ae),{u_gamma_scale:T?Math.cos(Ge._pitch)*Ge.cameraToCenterDistance:1,u_device_pixel_ratio:D.pixelRatio,u_is_halo:1})},Dx=(I,l,f,T,D,V,re,pe,ye,Ae)=>s.extend(lf(I,l,f,T,D,V,re,pe,!0,ye),{u_texsize_icon:Ae,u_texture_icon:1}),Rx=(I,l,f)=>({u_matrix:I,u_opacity:l,u_color:f}),cf=(I,l,f,T,D,V)=>s.extend(function(re,pe,ye,Ae){const Be=ye.imageManager.getPattern(re.from.toString()),Ge=ye.imageManager.getPattern(re.to.toString()),{width:Ye,height:it}=ye.imageManager.getPixelSize(),Je=Math.pow(2,Ae.tileID.overscaledZ),tt=Ae.tileSize*Math.pow(2,ye.transform.tileZoom)/Je,pt=tt*(Ae.tileID.canonical.x+Ae.tileID.wrap*Je),vt=tt*Ae.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Be.tl,u_pattern_br_a:Be.br,u_pattern_tl_b:Ge.tl,u_pattern_br_b:Ge.br,u_texsize:[Ye,it],u_mix:pe.t,u_pattern_size_a:Be.displaySize,u_pattern_size_b:Ge.displaySize,u_scale_a:pe.fromScale,u_scale_b:pe.toScale,u_tile_units_to_pixels:1/sr(Ae,1,ye.transform.tileZoom),u_pixel_coord_upper:[pt>>16,vt>>16],u_pixel_coord_lower:[65535&pt,65535&vt]}}(T,V,f,D),{u_matrix:I,u_opacity:l}),uf={fillExtrusion:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_lightpos:new s.Uniform3f(I,l.u_lightpos),u_lightintensity:new s.Uniform1f(I,l.u_lightintensity),u_lightcolor:new s.Uniform3f(I,l.u_lightcolor),u_vertical_gradient:new s.Uniform1f(I,l.u_vertical_gradient),u_opacity:new s.Uniform1f(I,l.u_opacity)}),fillExtrusionPattern:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_lightpos:new s.Uniform3f(I,l.u_lightpos),u_lightintensity:new s.Uniform1f(I,l.u_lightintensity),u_lightcolor:new s.Uniform3f(I,l.u_lightcolor),u_vertical_gradient:new s.Uniform1f(I,l.u_vertical_gradient),u_height_factor:new s.Uniform1f(I,l.u_height_factor),u_image:new s.Uniform1i(I,l.u_image),u_texsize:new s.Uniform2f(I,l.u_texsize),u_pixel_coord_upper:new s.Uniform2f(I,l.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(I,l.u_pixel_coord_lower),u_scale:new s.Uniform3f(I,l.u_scale),u_fade:new s.Uniform1f(I,l.u_fade),u_opacity:new s.Uniform1f(I,l.u_opacity)}),fill:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix)}),fillPattern:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_image:new s.Uniform1i(I,l.u_image),u_texsize:new s.Uniform2f(I,l.u_texsize),u_pixel_coord_upper:new s.Uniform2f(I,l.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(I,l.u_pixel_coord_lower),u_scale:new s.Uniform3f(I,l.u_scale),u_fade:new s.Uniform1f(I,l.u_fade)}),fillOutline:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_world:new s.Uniform2f(I,l.u_world)}),fillOutlinePattern:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_world:new s.Uniform2f(I,l.u_world),u_image:new s.Uniform1i(I,l.u_image),u_texsize:new s.Uniform2f(I,l.u_texsize),u_pixel_coord_upper:new s.Uniform2f(I,l.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(I,l.u_pixel_coord_lower),u_scale:new s.Uniform3f(I,l.u_scale),u_fade:new s.Uniform1f(I,l.u_fade)}),circle:(I,l)=>({u_camera_to_center_distance:new s.Uniform1f(I,l.u_camera_to_center_distance),u_scale_with_map:new s.Uniform1i(I,l.u_scale_with_map),u_pitch_with_map:new s.Uniform1i(I,l.u_pitch_with_map),u_extrude_scale:new s.Uniform2f(I,l.u_extrude_scale),u_device_pixel_ratio:new s.Uniform1f(I,l.u_device_pixel_ratio),u_matrix:new s.UniformMatrix4f(I,l.u_matrix)}),collisionBox:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_camera_to_center_distance:new s.Uniform1f(I,l.u_camera_to_center_distance),u_pixels_to_tile_units:new s.Uniform1f(I,l.u_pixels_to_tile_units),u_extrude_scale:new s.Uniform2f(I,l.u_extrude_scale),u_overscale_factor:new s.Uniform1f(I,l.u_overscale_factor)}),collisionCircle:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_inv_matrix:new s.UniformMatrix4f(I,l.u_inv_matrix),u_camera_to_center_distance:new s.Uniform1f(I,l.u_camera_to_center_distance),u_viewport_size:new s.Uniform2f(I,l.u_viewport_size)}),debug:(I,l)=>({u_color:new s.UniformColor(I,l.u_color),u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_overlay:new s.Uniform1i(I,l.u_overlay),u_overlay_scale:new s.Uniform1f(I,l.u_overlay_scale)}),clippingMask:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix)}),heatmap:(I,l)=>({u_extrude_scale:new s.Uniform1f(I,l.u_extrude_scale),u_intensity:new s.Uniform1f(I,l.u_intensity),u_matrix:new s.UniformMatrix4f(I,l.u_matrix)}),heatmapTexture:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_world:new s.Uniform2f(I,l.u_world),u_image:new s.Uniform1i(I,l.u_image),u_color_ramp:new s.Uniform1i(I,l.u_color_ramp),u_opacity:new s.Uniform1f(I,l.u_opacity)}),hillshade:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_image:new s.Uniform1i(I,l.u_image),u_latrange:new s.Uniform2f(I,l.u_latrange),u_light:new s.Uniform2f(I,l.u_light),u_shadow:new s.UniformColor(I,l.u_shadow),u_highlight:new s.UniformColor(I,l.u_highlight),u_accent:new s.UniformColor(I,l.u_accent)}),hillshadePrepare:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_image:new s.Uniform1i(I,l.u_image),u_dimension:new s.Uniform2f(I,l.u_dimension),u_zoom:new s.Uniform1f(I,l.u_zoom),u_unpack:new s.Uniform4f(I,l.u_unpack)}),line:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_ratio:new s.Uniform1f(I,l.u_ratio),u_device_pixel_ratio:new s.Uniform1f(I,l.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(I,l.u_units_to_pixels)}),lineGradient:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_ratio:new s.Uniform1f(I,l.u_ratio),u_device_pixel_ratio:new s.Uniform1f(I,l.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(I,l.u_units_to_pixels),u_image:new s.Uniform1i(I,l.u_image),u_image_height:new s.Uniform1f(I,l.u_image_height)}),linePattern:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_texsize:new s.Uniform2f(I,l.u_texsize),u_ratio:new s.Uniform1f(I,l.u_ratio),u_device_pixel_ratio:new s.Uniform1f(I,l.u_device_pixel_ratio),u_image:new s.Uniform1i(I,l.u_image),u_units_to_pixels:new s.Uniform2f(I,l.u_units_to_pixels),u_scale:new s.Uniform3f(I,l.u_scale),u_fade:new s.Uniform1f(I,l.u_fade)}),lineSDF:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_ratio:new s.Uniform1f(I,l.u_ratio),u_device_pixel_ratio:new s.Uniform1f(I,l.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(I,l.u_units_to_pixels),u_patternscale_a:new s.Uniform2f(I,l.u_patternscale_a),u_patternscale_b:new s.Uniform2f(I,l.u_patternscale_b),u_sdfgamma:new s.Uniform1f(I,l.u_sdfgamma),u_image:new s.Uniform1i(I,l.u_image),u_tex_y_a:new s.Uniform1f(I,l.u_tex_y_a),u_tex_y_b:new s.Uniform1f(I,l.u_tex_y_b),u_mix:new s.Uniform1f(I,l.u_mix)}),raster:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_tl_parent:new s.Uniform2f(I,l.u_tl_parent),u_scale_parent:new s.Uniform1f(I,l.u_scale_parent),u_buffer_scale:new s.Uniform1f(I,l.u_buffer_scale),u_fade_t:new s.Uniform1f(I,l.u_fade_t),u_opacity:new s.Uniform1f(I,l.u_opacity),u_image0:new s.Uniform1i(I,l.u_image0),u_image1:new s.Uniform1i(I,l.u_image1),u_brightness_low:new s.Uniform1f(I,l.u_brightness_low),u_brightness_high:new s.Uniform1f(I,l.u_brightness_high),u_saturation_factor:new s.Uniform1f(I,l.u_saturation_factor),u_contrast_factor:new s.Uniform1f(I,l.u_contrast_factor),u_spin_weights:new s.Uniform3f(I,l.u_spin_weights)}),symbolIcon:(I,l)=>({u_is_size_zoom_constant:new s.Uniform1i(I,l.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(I,l.u_is_size_feature_constant),u_size_t:new s.Uniform1f(I,l.u_size_t),u_size:new s.Uniform1f(I,l.u_size),u_camera_to_center_distance:new s.Uniform1f(I,l.u_camera_to_center_distance),u_pitch:new s.Uniform1f(I,l.u_pitch),u_rotate_symbol:new s.Uniform1i(I,l.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(I,l.u_aspect_ratio),u_fade_change:new s.Uniform1f(I,l.u_fade_change),u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(I,l.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(I,l.u_coord_matrix),u_is_text:new s.Uniform1i(I,l.u_is_text),u_pitch_with_map:new s.Uniform1i(I,l.u_pitch_with_map),u_texsize:new s.Uniform2f(I,l.u_texsize),u_texture:new s.Uniform1i(I,l.u_texture)}),symbolSDF:(I,l)=>({u_is_size_zoom_constant:new s.Uniform1i(I,l.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(I,l.u_is_size_feature_constant),u_size_t:new s.Uniform1f(I,l.u_size_t),u_size:new s.Uniform1f(I,l.u_size),u_camera_to_center_distance:new s.Uniform1f(I,l.u_camera_to_center_distance),u_pitch:new s.Uniform1f(I,l.u_pitch),u_rotate_symbol:new s.Uniform1i(I,l.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(I,l.u_aspect_ratio),u_fade_change:new s.Uniform1f(I,l.u_fade_change),u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(I,l.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(I,l.u_coord_matrix),u_is_text:new s.Uniform1i(I,l.u_is_text),u_pitch_with_map:new s.Uniform1i(I,l.u_pitch_with_map),u_texsize:new s.Uniform2f(I,l.u_texsize),u_texture:new s.Uniform1i(I,l.u_texture),u_gamma_scale:new s.Uniform1f(I,l.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(I,l.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(I,l.u_is_halo)}),symbolTextAndIcon:(I,l)=>({u_is_size_zoom_constant:new s.Uniform1i(I,l.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(I,l.u_is_size_feature_constant),u_size_t:new s.Uniform1f(I,l.u_size_t),u_size:new s.Uniform1f(I,l.u_size),u_camera_to_center_distance:new s.Uniform1f(I,l.u_camera_to_center_distance),u_pitch:new s.Uniform1f(I,l.u_pitch),u_rotate_symbol:new s.Uniform1i(I,l.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(I,l.u_aspect_ratio),u_fade_change:new s.Uniform1f(I,l.u_fade_change),u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(I,l.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(I,l.u_coord_matrix),u_is_text:new s.Uniform1i(I,l.u_is_text),u_pitch_with_map:new s.Uniform1i(I,l.u_pitch_with_map),u_texsize:new s.Uniform2f(I,l.u_texsize),u_texsize_icon:new s.Uniform2f(I,l.u_texsize_icon),u_texture:new s.Uniform1i(I,l.u_texture),u_texture_icon:new s.Uniform1i(I,l.u_texture_icon),u_gamma_scale:new s.Uniform1f(I,l.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(I,l.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(I,l.u_is_halo)}),background:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_opacity:new s.Uniform1f(I,l.u_opacity),u_color:new s.UniformColor(I,l.u_color)}),backgroundPattern:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_opacity:new s.Uniform1f(I,l.u_opacity),u_image:new s.Uniform1i(I,l.u_image),u_pattern_tl_a:new s.Uniform2f(I,l.u_pattern_tl_a),u_pattern_br_a:new s.Uniform2f(I,l.u_pattern_br_a),u_pattern_tl_b:new s.Uniform2f(I,l.u_pattern_tl_b),u_pattern_br_b:new s.Uniform2f(I,l.u_pattern_br_b),u_texsize:new s.Uniform2f(I,l.u_texsize),u_mix:new s.Uniform1f(I,l.u_mix),u_pattern_size_a:new s.Uniform2f(I,l.u_pattern_size_a),u_pattern_size_b:new s.Uniform2f(I,l.u_pattern_size_b),u_scale_a:new s.Uniform1f(I,l.u_scale_a),u_scale_b:new s.Uniform1f(I,l.u_scale_b),u_pixel_coord_upper:new s.Uniform2f(I,l.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(I,l.u_pixel_coord_lower),u_tile_units_to_pixels:new s.Uniform1f(I,l.u_tile_units_to_pixels)}),terrain:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_texture:new s.Uniform1i(I,l.u_texture)}),terrainDepth:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix)}),terrainCoords:(I,l)=>({u_matrix:new s.UniformMatrix4f(I,l.u_matrix),u_texture:new s.Uniform1i(I,l.u_texture),u_terrain_coords_id:new s.Uniform1f(I,l.u_terrain_coords_id)})};class df{constructor(l,f,T){this.context=l;const D=l.gl;this.buffer=D.createBuffer(),this.dynamicDraw=!!T,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),D.bufferData(D.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const f=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const hf={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ey{constructor(l,f,T,D){this.length=f.length,this.attributes=T,this.itemSize=f.bytesPerElement,this.dynamicDraw=D,this.context=l;const V=l.gl;this.buffer=V.createBuffer(),l.bindVertexBuffer.set(this.buffer),V.bufferData(V.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?V.DYNAMIC_DRAW:V.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,f){for(let T=0;T<this.attributes.length;T++){const D=f.attributes[this.attributes[T].name];D!==void 0&&l.enableVertexAttribArray(D)}}setVertexAttribPointers(l,f,T){for(let D=0;D<this.attributes.length;D++){const V=this.attributes[D],re=f.attributes[V.name];re!==void 0&&l.vertexAttribPointer(re,V.components,l[hf[V.type]],!1,this.itemSize,V.offset+this.itemSize*(T||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Or{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Lx extends Or{getDefault(){return s.Color.transparent}set(l){const f=this.current;(l.r!==f.r||l.g!==f.g||l.b!==f.b||l.a!==f.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class td extends Or{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class id extends Or{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class ty extends Or{getDefault(){return[!0,!0,!0,!0]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||l[3]!==f[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class za extends Or{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class pf extends Or{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class _h extends Or{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const f=this.current;(l.func!==f.func||l.ref!==f.ref||l.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class Ch extends Or{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class ff extends Or{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=l,this.dirty=!1}}class mf extends Or{getDefault(){return[0,1]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Th extends Or{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=l,this.dirty=!1}}class gf extends Or{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class yf extends Or{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.BLEND):f.disable(f.BLEND),this.current=l,this.dirty=!1}}class Sh extends Or{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class iy extends Or{getDefault(){return s.Color.transparent}set(l){const f=this.current;(l.r!==f.r||l.g!==f.g||l.b!==f.b||l.a!==f.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class ry extends Or{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class Hc extends Or{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=l,this.dirty=!1}}class Nx extends Or{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class zx extends Or{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class Ox extends Or{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class jx extends Or{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Fx extends Or{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||l[3]!==f[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Bx extends Or{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class vf extends Or{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Eh extends Or{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class xf extends Or{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class bf extends Or{getDefault(){return null}set(l){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class qc extends Or{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class ny extends Or{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class sy extends Or{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class wf extends Or{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class Cl extends Or{constructor(l,f){super(l),this.context=l,this.parent=f}getDefault(){return null}}class ay extends Cl{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Wc extends Cl{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Yc{constructor(l,f,T,D){this.context=l,this.width=f,this.height=T;const V=l.gl,re=this.framebuffer=V.createFramebuffer();if(this.colorAttachment=new ay(l,re),D&&(this.depthAttachment=new Wc(l,re)),V.checkFramebufferStatus(V.FRAMEBUFFER)!==V.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const l=this.context.gl,f=this.colorAttachment.get();if(f&&l.deleteTexture(f),this.depthAttachment){const T=this.depthAttachment.get();T&&l.deleteRenderbuffer(T)}l.deleteFramebuffer(this.framebuffer)}}class zn{constructor(l,f,T){this.blendFunction=l,this.blendColor=f,this.mask=T}}zn.Replace=[1,0],zn.disabled=new zn(zn.Replace,s.Color.transparent,[!1,!1,!1,!1]),zn.unblended=new zn(zn.Replace,s.Color.transparent,[!0,!0,!0,!0]),zn.alphaBlended=new zn([1,771],s.Color.transparent,[!0,!0,!0,!0]);class _f{constructor(l){this.gl=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Lx(this),this.clearDepth=new td(this),this.clearStencil=new id(this),this.colorMask=new ty(this),this.depthMask=new za(this),this.stencilMask=new pf(this),this.stencilFunc=new _h(this),this.stencilOp=new Ch(this),this.stencilTest=new ff(this),this.depthRange=new mf(this),this.depthTest=new Th(this),this.depthFunc=new gf(this),this.blend=new yf(this),this.blendFunc=new Sh(this),this.blendColor=new iy(this),this.blendEquation=new ry(this),this.cullFace=new Hc(this),this.cullFaceSide=new Nx(this),this.frontFace=new zx(this),this.program=new Ox(this),this.activeTexture=new jx(this),this.viewport=new Fx(this),this.bindFramebuffer=new Bx(this),this.bindRenderbuffer=new vf(this),this.bindTexture=new Eh(this),this.bindVertexBuffer=new xf(this),this.bindElementBuffer=new bf(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new qc(this),this.pixelStoreUnpack=new ny(this),this.pixelStoreUnpackPremultiplyAlpha=new sy(this),this.pixelStoreUnpackFlipY=new wf(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=l.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(l.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,f){return new df(this,l,f)}createVertexBuffer(l,f,T){return new ey(this,l,f,T)}createRenderbuffer(l,f,T){const D=this.gl,V=D.createRenderbuffer();return this.bindRenderbuffer.set(V),D.renderbufferStorage(D.RENDERBUFFER,l,f,T),this.bindRenderbuffer.set(null),V}createFramebuffer(l,f,T){return new Yc(this,l,f,T)}clear({color:l,depth:f}){const T=this.gl;let D=0;l&&(D|=T.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(D|=T.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),T.clear(D)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){y(l.blendFunction,zn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class wi{constructor(l,f,T){this.func=l,this.mask=f,this.range=T}}wi.ReadOnly=!1,wi.ReadWrite=!0,wi.disabled=new wi(519,wi.ReadOnly,[0,1]);const Zc=7680;class Mn{constructor(l,f,T,D,V,re){this.test=l,this.ref=f,this.mask=T,this.fail=D,this.depthFail=V,this.pass=re}}Mn.disabled=new Mn({func:519,mask:0},0,0,Zc,Zc,Zc);class fn{constructor(l,f,T){this.enable=l,this.mode=f,this.frontFace=T}}let Tl;function oy(I,l,f,T,D,V,re){const pe=I.context,ye=pe.gl,Ae=I.useProgram("collisionBox"),Be=[];let Ge=0,Ye=0;for(let st=0;st<T.length;st++){const It=T[st],Et=l.getTile(It),Ot=Et.getBucket(f);if(!Ot)continue;let jt=It.posMatrix;D[0]===0&&D[1]===0||(jt=I.translatePosMatrix(It.posMatrix,Et,D,V));const Vt=re?Ot.textCollisionBox:Ot.iconCollisionBox,Lt=Ot.collisionCircleArray;if(Lt.length>0){const li=s.create(),Kt=jt;s.mul(li,Ot.placementInvProjMatrix,I.transform.glCoordMatrix),s.mul(li,li,Ot.placementViewportMatrix),Be.push({circleArray:Lt,circleOffset:Ye,transform:Kt,invTransform:li,coord:It}),Ge+=Lt.length/4,Ye=Ge}Vt&&Ae.draw(pe,ye.LINES,wi.disabled,Mn.disabled,I.colorModeForRenderPass(),fn.disabled,yh(jt,I.transform,Et),I.style.terrain&&I.style.terrain.getTerrainData(It),f.id,Vt.layoutVertexBuffer,Vt.indexBuffer,Vt.segments,null,I.transform.zoom,null,null,Vt.collisionVertexBuffer)}if(!re||!Be.length)return;const it=I.useProgram("collisionCircle"),Je=new s.CollisionCircleLayoutArray;Je.resize(4*Ge),Je._trim();let tt=0;for(const st of Be)for(let It=0;It<st.circleArray.length/4;It++){const Et=4*It,Ot=st.circleArray[Et+0],jt=st.circleArray[Et+1],Vt=st.circleArray[Et+2],Lt=st.circleArray[Et+3];Je.emplace(tt++,Ot,jt,Vt,Lt,0),Je.emplace(tt++,Ot,jt,Vt,Lt,1),Je.emplace(tt++,Ot,jt,Vt,Lt,2),Je.emplace(tt++,Ot,jt,Vt,Lt,3)}(!Tl||Tl.length<2*Ge)&&(Tl=function(st){const It=2*st,Et=new s.QuadTriangleArray;Et.resize(It),Et._trim();for(let Ot=0;Ot<It;Ot++){const jt=6*Ot;Et.uint16[jt+0]=4*Ot+0,Et.uint16[jt+1]=4*Ot+1,Et.uint16[jt+2]=4*Ot+2,Et.uint16[jt+3]=4*Ot+2,Et.uint16[jt+4]=4*Ot+3,Et.uint16[jt+5]=4*Ot+0}return Et}(Ge));const pt=pe.createIndexBuffer(Tl,!0),vt=pe.createVertexBuffer(Je,s.collisionCircleLayout.members,!0);for(const st of Be){const It={u_matrix:st.transform,u_inv_matrix:st.invTransform,u_camera_to_center_distance:(Ct=I.transform).cameraToCenterDistance,u_viewport_size:[Ct.width,Ct.height]};it.draw(pe,ye.TRIANGLES,wi.disabled,Mn.disabled,I.colorModeForRenderPass(),fn.disabled,It,I.style.terrain&&I.style.terrain.getTerrainData(st.coord),f.id,vt,pt,s.SegmentVector.simpleSegment(0,2*st.circleOffset,st.circleArray.length,st.circleArray.length/2),null,I.transform.zoom,null,null,null)}var Ct;vt.destroy(),pt.destroy()}fn.disabled=new fn(!1,1029,2305),fn.backCCW=new fn(!0,1029,2305);const $x=s.identity(new Float32Array(16));function ly(I,l,f,T,D,V){const{horizontalAlign:re,verticalAlign:pe}=s.getAnchorAlignment(I),ye=-(re-.5)*l,Ae=-(pe-.5)*f,Be=s.evaluateVariableOffset(I,T);return new s.pointGeometry((ye/D+Be[0])*V,(Ae/D+Be[1])*V)}function Ux(I,l,f,T,D,V,re,pe,ye,Ae,Be){const Ge=I.text.placedSymbolArray,Ye=I.text.dynamicLayoutVertexArray,it=I.icon.dynamicLayoutVertexArray,Je={};Ye.clear();for(let tt=0;tt<Ge.length;tt++){const pt=Ge.get(tt),vt=I.allowVerticalPlacement&&!pt.placedOrientation,Ct=pt.hidden||!pt.crossTileID||vt?null:T[pt.crossTileID];if(Ct){const st=new s.pointGeometry(pt.anchorX,pt.anchorY),It=dt(st,f?re:V,Be),Et=gt(D.cameraToCenterDistance,It.signedDistanceFromCamera);let Ot=s.evaluateSizeForFeature(I.textSizeData,ye,pt)*Et/s.ONE_EM;f&&(Ot*=I.tilePixelRatio/pe);const{width:jt,height:Vt,anchor:Lt,textOffset:li,textBoxScale:Kt}=Ct,ui=ly(Lt,jt,Vt,li,Kt,Ot),tr=f?dt(st.add(ui),V,Be).point:It.point.add(l?ui.rotate(-D.angle):ui),ur=I.allowVerticalPlacement&&pt.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let Pi=0;Pi<pt.numGlyphs;Pi++)s.addDynamicAttributes(Ye,tr,ur);Ae&&pt.associatedIconIndex>=0&&(Je[pt.associatedIconIndex]={shiftedAnchor:tr,angle:ur})}else fr(pt.numGlyphs,Ye)}if(Ae){it.clear();const tt=I.icon.placedSymbolArray;for(let pt=0;pt<tt.length;pt++){const vt=tt.get(pt);if(vt.hidden)fr(vt.numGlyphs,it);else{const Ct=Je[pt];if(Ct)for(let st=0;st<vt.numGlyphs;st++)s.addDynamicAttributes(it,Ct.shiftedAnchor,Ct.angle);else fr(vt.numGlyphs,it)}}I.icon.dynamicLayoutVertexBuffer.updateData(it)}I.text.dynamicLayoutVertexBuffer.updateData(Ye)}function Cf(I,l,f){return f.iconsInText&&l?"symbolTextAndIcon":I?"symbolSDF":"symbolIcon"}function rd(I,l,f,T,D,V,re,pe,ye,Ae,Be,Ge){const Ye=I.context,it=Ye.gl,Je=I.transform,tt=pe==="map",pt=ye==="map",vt=pe!=="viewport"&&f.layout.get("symbol-placement")!=="point",Ct=tt&&!pt&&!vt,st=!f.layout.get("symbol-sort-key").isConstant();let It=!1;const Et=I.depthModeForSublayer(0,wi.ReadOnly),Ot=f.layout.get("text-variable-anchor"),jt=[];for(const Vt of T){const Lt=l.getTile(Vt),li=Lt.getBucket(f);if(!li)continue;const Kt=D?li.text:li.icon;if(!Kt||!Kt.segments.get().length)continue;const ui=Kt.programConfigurations.get(f.id),tr=D||li.sdfIcons,ur=D?li.textSizeData:li.iconSizeData,Pi=pt||Je.pitch!==0,qr=I.useProgram(Cf(tr,D,li),ui),Wr=s.evaluateSizeForZoom(ur,Je.zoom),Cr=I.style.terrain&&I.style.terrain.getTerrainData(Vt);let Sr,Ar,ja,$o,wo=[0,0],_o=null;if(D){if(Ar=Lt.glyphAtlasTexture,ja=it.LINEAR,Sr=Lt.glyphAtlasTexture.size,li.iconsInText){wo=Lt.imageAtlasTexture.size,_o=Lt.imageAtlasTexture;const no=ur.kind==="composite"||ur.kind==="camera";$o=Pi||I.options.rotating||I.options.zooming||no?it.LINEAR:it.NEAREST}}else{const no=f.layout.get("icon-size").constantOr(0)!==1||li.iconsNeedLinear;Ar=Lt.imageAtlasTexture,ja=tr||I.options.rotating||I.options.zooming||no||Pi?it.LINEAR:it.NEAREST,Sr=Lt.imageAtlasTexture.size}const fc=sr(Lt,1,I.transform.zoom),Ds=at(Vt.posMatrix,pt,tt,I.transform,fc),Co=rt(Vt.posMatrix,pt,tt,I.transform,fc),mc=Ot&&li.hasTextData(),$h=f.layout.get("icon-text-fit")!=="none"&&mc&&li.hasIconData();if(vt){const no=I.style.terrain?(tu,Uh)=>I.style.terrain.getElevation(Vt,tu,Uh):null,eu=f.layout.get("text-rotation-alignment")==="map";Nt(li,Vt.posMatrix,I,D,Ds,Co,pt,Ae,eu,no)}const Ir=I.translatePosMatrix(Vt.posMatrix,Lt,V,re),gn=vt||D&&Ot||$h?$x:Ds,Lr=I.translatePosMatrix(Co,Lt,V,re,!0),es=tr&&f.paint.get(D?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ca;Ca=tr?li.iconsInText?Dx(ur.kind,Wr,Ct,pt,I,Ir,gn,Lr,Sr,wo):lf(ur.kind,Wr,Ct,pt,I,Ir,gn,Lr,D,Sr):wh(ur.kind,Wr,Ct,pt,I,Ir,gn,Lr,D,Sr);const wn={program:qr,buffers:Kt,uniformValues:Ca,atlasTexture:Ar,atlasTextureIcon:_o,atlasInterpolation:ja,atlasInterpolationIcon:$o,isSDF:tr,hasHalo:es};if(st&&li.canOverlap){It=!0;const no=Kt.segments.get();for(const eu of no)jt.push({segments:new s.SegmentVector([eu]),sortKey:eu.sortKey,state:wn,terrainData:Cr})}else jt.push({segments:Kt.segments,sortKey:0,state:wn,terrainData:Cr})}It&&jt.sort((Vt,Lt)=>Vt.sortKey-Lt.sortKey);for(const Vt of jt){const Lt=Vt.state;if(Ye.activeTexture.set(it.TEXTURE0),Lt.atlasTexture.bind(Lt.atlasInterpolation,it.CLAMP_TO_EDGE),Lt.atlasTextureIcon&&(Ye.activeTexture.set(it.TEXTURE1),Lt.atlasTextureIcon&&Lt.atlasTextureIcon.bind(Lt.atlasInterpolationIcon,it.CLAMP_TO_EDGE)),Lt.isSDF){const li=Lt.uniformValues;Lt.hasHalo&&(li.u_is_halo=1,nd(Lt.buffers,Vt.segments,f,I,Lt.program,Et,Be,Ge,li,Vt.terrainData)),li.u_is_halo=0}nd(Lt.buffers,Vt.segments,f,I,Lt.program,Et,Be,Ge,Lt.uniformValues,Vt.terrainData)}}function nd(I,l,f,T,D,V,re,pe,ye,Ae){const Be=T.context;D.draw(Be,Be.gl.TRIANGLES,V,re,pe,fn.disabled,ye,Ae,f.id,I.layoutVertexBuffer,I.indexBuffer,l,f.paint,T.transform.zoom,I.programConfigurations.get(f.id),I.dynamicLayoutVertexBuffer,I.opacityVertexBuffer)}function kh(I,l,f,T,D,V,re){const pe=I.context.gl,ye=f.paint.get("fill-pattern"),Ae=ye&&ye.constantOr(1),Be=f.getCrossfadeParameters();let Ge,Ye,it,Je,tt;re?(Ye=Ae&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ge=pe.LINES):(Ye=Ae?"fillPattern":"fill",Ge=pe.TRIANGLES);for(const pt of T){const vt=l.getTile(pt);if(Ae&&!vt.patternsLoaded())continue;const Ct=vt.getBucket(f);if(!Ct)continue;const st=Ct.programConfigurations.get(f.id),It=I.useProgram(Ye,st),Et=I.style.terrain&&I.style.terrain.getTerrainData(pt);Ae&&(I.context.activeTexture.set(pe.TEXTURE0),vt.imageAtlasTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),st.updatePaintBuffers(Be));const Ot=ye.constantOr(null);if(Ot&&vt.imageAtlas){const Lt=vt.imageAtlas,li=Lt.patternPositions[Ot.to.toString()],Kt=Lt.patternPositions[Ot.from.toString()];li&&Kt&&st.setConstantPatternPositions(li,Kt)}const jt=Et?pt:null,Vt=I.translatePosMatrix(jt?jt.posMatrix:pt.posMatrix,vt,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(re){Je=Ct.indexBuffer2,tt=Ct.segments2;const Lt=[pe.drawingBufferWidth,pe.drawingBufferHeight];it=Ye==="fillOutlinePattern"&&Ae?Kg(Vt,I,Be,vt,Lt):Xg(Vt,Lt)}else Je=Ct.indexBuffer,tt=Ct.segments,it=Ae?af(Vt,I,Be,vt):sf(Vt);It.draw(I.context,Ge,D,I.stencilModeForClipping(pt),V,fn.disabled,it,Et,f.id,Ct.layoutVertexBuffer,Je,tt,f.paint,I.transform.zoom,st)}}function sd(I,l,f,T,D,V,re){const pe=I.context,ye=pe.gl,Ae=f.paint.get("fill-extrusion-pattern"),Be=Ae.constantOr(1),Ge=f.getCrossfadeParameters(),Ye=f.paint.get("fill-extrusion-opacity");for(const it of T){const Je=l.getTile(it),tt=Je.getBucket(f);if(!tt)continue;const pt=I.style.terrain&&I.style.terrain.getTerrainData(it),vt=tt.programConfigurations.get(f.id),Ct=I.useProgram(Be?"fillExtrusionPattern":"fillExtrusion",vt);Be&&(I.context.activeTexture.set(ye.TEXTURE0),Je.imageAtlasTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),vt.updatePaintBuffers(Ge));const st=Ae.constantOr(null);if(st&&Je.imageAtlas){const jt=Je.imageAtlas,Vt=jt.patternPositions[st.to.toString()],Lt=jt.patternPositions[st.from.toString()];Vt&&Lt&&vt.setConstantPatternPositions(Vt,Lt)}const It=I.translatePosMatrix(it.posMatrix,Je,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),Et=f.paint.get("fill-extrusion-vertical-gradient"),Ot=Be?nf(It,I,Et,Ye,it,Ge,Je):Zg(It,I,Et,Ye);Ct.draw(pe,pe.gl.TRIANGLES,D,V,re,fn.backCCW,Ot,pt,f.id,tt.layoutVertexBuffer,tt.indexBuffer,tt.segments,f.paint,I.transform.zoom,vt,I.style.terrain&&tt.centroidVertexBuffer)}}function cy(I,l,f,T,D,V,re){const pe=I.context,ye=pe.gl,Ae=f.fbo;if(!Ae)return;const Be=I.useProgram("hillshade"),Ge=I.style.terrain&&I.style.terrain.getTerrainData(l);pe.activeTexture.set(ye.TEXTURE0),ye.bindTexture(ye.TEXTURE_2D,Ae.colorAttachment.get()),Be.draw(pe,ye.TRIANGLES,D,V,re,fn.disabled,((Ye,it,Je,tt)=>{const pt=Je.paint.get("hillshade-shadow-color"),vt=Je.paint.get("hillshade-highlight-color"),Ct=Je.paint.get("hillshade-accent-color");let st=Je.paint.get("hillshade-illumination-direction")*(Math.PI/180);Je.paint.get("hillshade-illumination-anchor")==="viewport"&&(st-=Ye.transform.angle);const It=!Ye.options.moving;return{u_matrix:tt?tt.posMatrix:Ye.transform.calculatePosMatrix(it.tileID.toUnwrapped(),It),u_image:0,u_latrange:xh(0,it.tileID),u_light:[Je.paint.get("hillshade-exaggeration"),st],u_shadow:pt,u_highlight:vt,u_accent:Ct}})(I,f,T,Ge?l:null),Ge,T.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments)}function Mh(I,l,f,T,D,V){const re=I.context,pe=re.gl,ye=l.dem;if(ye&&ye.data){const Ae=ye.dim,Be=ye.stride,Ge=ye.getPixels();if(re.activeTexture.set(pe.TEXTURE1),re.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||I.getTileTexture(Be),l.demTexture){const it=l.demTexture;it.update(Ge,{premultiply:!1}),it.bind(pe.NEAREST,pe.CLAMP_TO_EDGE)}else l.demTexture=new _(re,Ge,pe.RGBA,{premultiply:!1}),l.demTexture.bind(pe.NEAREST,pe.CLAMP_TO_EDGE);re.activeTexture.set(pe.TEXTURE0);let Ye=l.fbo;if(!Ye){const it=new _(re,{width:Ae,height:Ae,data:null},pe.RGBA);it.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),Ye=l.fbo=re.createFramebuffer(Ae,Ae,!0),Ye.colorAttachment.set(it.texture)}re.bindFramebuffer.set(Ye.framebuffer),re.viewport.set([0,0,Ae,Ae]),I.useProgram("hillshadePrepare").draw(re,pe.TRIANGLES,T,D,V,fn.disabled,((it,Je)=>{const tt=Je.stride,pt=s.create();return s.ortho(pt,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(pt,pt,[0,-s.EXTENT,0]),{u_matrix:pt,u_image:1,u_dimension:[tt,tt],u_zoom:it.overscaledZ,u_unpack:Je.getUnpackVector()}})(l.tileID,ye),null,f.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments),l.needsHillshadePrepare=!1}}function Ah(I,l,f,T,D,V){const re=T.paint.get("raster-fade-duration");if(!V&&re>0){const pe=s.exported.now(),ye=(pe-I.timeAdded)/re,Ae=l?(pe-l.timeAdded)/re:-1,Be=f.getSource(),Ge=D.coveringZoomLevel({tileSize:Be.tileSize,roundZoom:Be.roundZoom}),Ye=!l||Math.abs(l.tileID.overscaledZ-Ge)>Math.abs(I.tileID.overscaledZ-Ge),it=Ye&&I.refreshedUponExpiration?1:s.clamp(Ye?ye:1-Ae,0,1);return I.refreshedUponExpiration&&ye>=1&&(I.refreshedUponExpiration=!1),l?{opacity:1,mix:1-it}:{opacity:it,mix:0}}return{opacity:1,mix:0}}const bo=new s.Color(1,0,0,1),uy=new s.Color(0,1,0,1),Tf=new s.Color(0,0,1,1),dy=new s.Color(1,0,1,1),Xc=new s.Color(0,1,1,1);function ad(I,l,f,T){Ph(I,0,l+f/2,I.transform.width,f,T)}function Ih(I,l,f,T){Ph(I,l-f/2,0,f,I.transform.height,T)}function Ph(I,l,f,T,D,V){const re=I.context,pe=re.gl;pe.enable(pe.SCISSOR_TEST),pe.scissor(l*I.pixelRatio,f*I.pixelRatio,T*I.pixelRatio,D*I.pixelRatio),re.clear({color:V}),pe.disable(pe.SCISSOR_TEST)}function Sf(I,l,f){const T=I.context,D=T.gl,V=f.posMatrix,re=I.useProgram("debug"),pe=wi.disabled,ye=Mn.disabled,Ae=I.colorModeForRenderPass(),Be="$debug",Ge=I.style.terrain&&I.style.terrain.getTerrainData(f);T.activeTexture.set(D.TEXTURE0),I.emptyTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE);const Ye=l.getTileByID(f.key).latestRawTileData,it=Math.floor((Ye&&Ye.byteLength||0)/1024),Je=l.getTile(f).tileSize,tt=512/Math.min(Je,512)*(f.overscaledZ/I.transform.zoom)*.5;let pt=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(pt+=` => ${f.overscaledZ}`),function(vt,Ct){vt.initDebugOverlayCanvas();const st=vt.debugOverlayCanvas,It=vt.context.gl,Et=vt.debugOverlayCanvas.getContext("2d");Et.clearRect(0,0,st.width,st.height),Et.shadowColor="white",Et.shadowBlur=2,Et.lineWidth=1.5,Et.strokeStyle="white",Et.textBaseline="top",Et.font="bold 36px Open Sans, sans-serif",Et.fillText(Ct,5,5),Et.strokeText(Ct,5,5),vt.debugOverlayTexture.update(st),vt.debugOverlayTexture.bind(It.LINEAR,It.CLAMP_TO_EDGE)}(I,`${pt} ${it}kB`),re.draw(T,D.TRIANGLES,pe,ye,zn.alphaBlended,fn.disabled,Gc(V,s.Color.transparent,tt),null,Be,I.debugBuffer,I.quadTriangleIndexBuffer,I.debugSegments),re.draw(T,D.LINE_STRIP,pe,ye,Ae,fn.disabled,Gc(V,s.Color.red),Ge,Be,I.debugBuffer,I.tileBorderIndexBuffer,I.debugSegments)}function hy(I,l,f){const T=I.context,D=T.gl,V=I.colorModeForRenderPass(),re=new wi(D.LEQUAL,wi.ReadWrite,I.depthRangeFor3D),pe=I.useProgram("terrain"),ye=l.getTerrainMesh(),Ae=l.getTerrainData(f.tileID);T.bindFramebuffer.set(null),T.viewport.set([0,0,I.width,I.height]),T.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,l.getRTTFramebuffer().colorAttachment.get());const Be=I.transform.calculatePosMatrix(f.tileID.toUnwrapped());pe.draw(T,D.TRIANGLES,re,Mn.disabled,V,fn.backCCW,{u_matrix:Be,u_texture:0},Ae,"terrain",ye.vertexBuffer,ye.indexBuffer,ye.segments)}function Ef(I,l,f,T){const D=I.context,V=f.tileSize*l.qualityFactor;f.textures[T]||(f.textures[T]=I.getTileTexture(V)||new _(D,{width:V,height:V,data:null},D.gl.RGBA),f.textures[T].bind(D.gl.LINEAR,D.gl.CLAMP_TO_EDGE),T===0&&l.sourceCache.renderHistory.unshift(f.tileID.key));const re=l.getRTTFramebuffer();re.colorAttachment.set(f.textures[T].texture),D.bindFramebuffer.set(re.framebuffer),D.viewport.set([0,0,V,V])}class Dh{constructor(l){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=l,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=l.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const l=this.painter.style,f=l.terrain;for(const T in l.sourceCaches){this._coordsDescendingInv[T]={};const D=l.sourceCaches[T].getVisibleCoordinates();for(const V of D){const re=f.sourceCache.getTerrainCoords(V);for(const pe in re)this._coordsDescendingInv[T][pe]||(this._coordsDescendingInv[T][pe]=[]),this._coordsDescendingInv[T][pe].push(re[pe])}}for(const T of l._order){const D=l._layers[T],V=D.source;if(this._renderToTexture[D.type]&&!this._coordsDescendingInvStr[V]){this._coordsDescendingInvStr[V]={};for(const re in this._coordsDescendingInv[V])this._coordsDescendingInvStr[V][re]=this._coordsDescendingInv[V][re].map(pe=>pe.key).sort().join()}}return this._renderableTiles.forEach(T=>{for(const D in this._coordsDescendingInvStr){const V=this._coordsDescendingInvStr[D][T.tileID.key];V&&V!==T.textureCoords[D]&&T.clearTextures(this.painter),f.needsRerender(D,T.tileID)&&T.clearTextures(this.painter)}this._rerender[T.tileID.key]=!T.textures.length}),f.clearRerenderCache(),f.sourceCache.removeOutdated(this.painter),this}renderLayer(l){const f=l.type,T=this.painter,D=T.style._order,V=T.currentLayer,re=V+1===D.length;if(this._renderToTexture[f]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=f,this._stacks[this._stacks.length-1].push(D[V]),!re))return!0;if(this._renderToTexture[this._prevType]||f==="hillshade"||this._renderToTexture[f]&&re){this._prevType=f;const pe=this._stacks.length-1,ye=this._stacks[pe]||[];for(const Ae of this._renderableTiles){if(Ef(T,T.style.terrain,Ae,pe),this._rerender[Ae.tileID.key]){T.context.clear({color:s.Color.transparent});for(let Be=0;Be<ye.length;Be++){const Ge=T.style._layers[ye[Be]],Ye=Ge.source?this._coordsDescendingInv[Ge.source][Ae.tileID.key]:[Ae.tileID];T._renderTileClippingMasks(Ge,Ye),T.renderLayer(T,T.style.sourceCaches[Ge.source],Ge,Ye),Ge.source&&(Ae.textureCoords[Ge.source]=this._coordsDescendingInvStr[Ge.source][Ae.tileID.key])}}hy(T,T.style.terrain,Ae)}if(f==="hillshade"){this._stacks.push([D[V]]);for(const Ae of this._renderableTiles){const Be=this._coordsDescendingInv[l.source][Ae.tileID.key];Ef(T,T.style.terrain,Ae,this._stacks.length-1),T.context.clear({color:s.Color.transparent}),T._renderTileClippingMasks(l,Be),T.renderLayer(T,T.style.sourceCaches[l.source],l,Be),hy(T,T.style.terrain,Ae)}return!0}return this._renderToTexture[f]}return!1}}const Rh={symbol:function(I,l,f,T,D){if(I.renderPass!=="translucent")return;const V=Mn.disabled,re=I.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(pe,ye,Ae,Be,Ge,Ye,it){const Je=ye.transform,tt=Ge==="map",pt=Ye==="map";for(const vt of pe){const Ct=Be.getTile(vt),st=Ct.getBucket(Ae);if(!st||!st.text||!st.text.segments.get().length)continue;const It=s.evaluateSizeForZoom(st.textSizeData,Je.zoom),Et=sr(Ct,1,ye.transform.zoom),Ot=at(vt.posMatrix,pt,tt,ye.transform,Et),jt=Ae.layout.get("icon-text-fit")!=="none"&&st.hasIconData();if(It){const Vt=Math.pow(2,Je.zoom-Ct.tileID.overscaledZ);Ux(st,tt,pt,it,Je,Ot,vt.posMatrix,Vt,It,jt,ye.style.terrain?(Lt,li)=>ye.style.terrain.getElevation(vt,Lt,li):null)}}}(T,I,f,l,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),D),f.paint.get("icon-opacity").constantOr(1)!==0&&rd(I,l,f,T,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),V,re),f.paint.get("text-opacity").constantOr(1)!==0&&rd(I,l,f,T,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),V,re),l.map.showCollisionBoxes&&(oy(I,l,f,T,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),oy(I,l,f,T,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))},circle:function(I,l,f,T){if(I.renderPass!=="translucent")return;const D=f.paint.get("circle-opacity"),V=f.paint.get("circle-stroke-width"),re=f.paint.get("circle-stroke-opacity"),pe=!f.layout.get("circle-sort-key").isConstant();if(D.constantOr(1)===0&&(V.constantOr(1)===0||re.constantOr(1)===0))return;const ye=I.context,Ae=ye.gl,Be=I.depthModeForSublayer(0,wi.ReadOnly),Ge=Mn.disabled,Ye=I.colorModeForRenderPass(),it=[];for(let Je=0;Je<T.length;Je++){const tt=T[Je],pt=l.getTile(tt),vt=pt.getBucket(f);if(!vt)continue;const Ct=vt.programConfigurations.get(f.id),st=I.useProgram("circle",Ct),It=vt.layoutVertexBuffer,Et=vt.indexBuffer,Ot=I.style.terrain&&I.style.terrain.getTerrainData(tt),jt={programConfiguration:Ct,program:st,layoutVertexBuffer:It,indexBuffer:Et,uniformValues:oc(I,tt,pt,f),terrainData:Ot};if(pe){const Vt=vt.segments.get();for(const Lt of Vt)it.push({segments:new s.SegmentVector([Lt]),sortKey:Lt.sortKey,state:jt})}else it.push({segments:vt.segments,sortKey:0,state:jt})}pe&&it.sort((Je,tt)=>Je.sortKey-tt.sortKey);for(const Je of it){const{programConfiguration:tt,program:pt,layoutVertexBuffer:vt,indexBuffer:Ct,uniformValues:st,terrainData:It}=Je.state;pt.draw(ye,Ae.TRIANGLES,Be,Ge,Ye,fn.disabled,st,It,f.id,vt,Ct,Je.segments,f.paint,I.transform.zoom,tt)}},heatmap:function(I,l,f,T){if(f.paint.get("heatmap-opacity")!==0)if(I.renderPass==="offscreen"){const D=I.context,V=D.gl,re=Mn.disabled,pe=new zn([V.ONE,V.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(ye,Ae,Be){const Ge=ye.gl;ye.activeTexture.set(Ge.TEXTURE1),ye.viewport.set([0,0,Ae.width/4,Ae.height/4]);let Ye=Be.heatmapFbo;if(Ye)Ge.bindTexture(Ge.TEXTURE_2D,Ye.colorAttachment.get()),ye.bindFramebuffer.set(Ye.framebuffer);else{const it=Ge.createTexture();Ge.bindTexture(Ge.TEXTURE_2D,it),Ge.texParameteri(Ge.TEXTURE_2D,Ge.TEXTURE_WRAP_S,Ge.CLAMP_TO_EDGE),Ge.texParameteri(Ge.TEXTURE_2D,Ge.TEXTURE_WRAP_T,Ge.CLAMP_TO_EDGE),Ge.texParameteri(Ge.TEXTURE_2D,Ge.TEXTURE_MIN_FILTER,Ge.LINEAR),Ge.texParameteri(Ge.TEXTURE_2D,Ge.TEXTURE_MAG_FILTER,Ge.LINEAR),Ye=Be.heatmapFbo=ye.createFramebuffer(Ae.width/4,Ae.height/4,!1),function(Je,tt,pt,vt){const Ct=Je.gl;Ct.texImage2D(Ct.TEXTURE_2D,0,Ct.RGBA,tt.width/4,tt.height/4,0,Ct.RGBA,Je.extRenderToTextureHalfFloat?Je.extTextureHalfFloat.HALF_FLOAT_OES:Ct.UNSIGNED_BYTE,null),vt.colorAttachment.set(pt)}(ye,Ae,it,Ye)}})(D,I,f),D.clear({color:s.Color.transparent});for(let ye=0;ye<T.length;ye++){const Ae=T[ye];if(l.hasRenderableParent(Ae))continue;const Be=l.getTile(Ae),Ge=Be.getBucket(f);if(!Ge)continue;const Ye=Ge.programConfigurations.get(f.id),it=I.useProgram("heatmap",Ye),{zoom:Je}=I.transform;it.draw(D,V.TRIANGLES,wi.disabled,re,pe,fn.disabled,vh(Ae.posMatrix,Be,Je,f.paint.get("heatmap-intensity")),null,f.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,f.paint,I.transform.zoom,Ye)}D.viewport.set([0,0,I.width,I.height])}else I.renderPass==="translucent"&&(I.context.setColorMode(I.colorModeForRenderPass()),function(D,V){const re=D.context,pe=re.gl,ye=V.heatmapFbo;if(!ye)return;re.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,ye.colorAttachment.get()),re.activeTexture.set(pe.TEXTURE1);let Ae=V.colorRampTexture;Ae||(Ae=V.colorRampTexture=new _(re,V.colorRamp,pe.RGBA)),Ae.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(re,pe.TRIANGLES,wi.disabled,Mn.disabled,D.colorModeForRenderPass(),fn.disabled,((Be,Ge,Ye,it)=>{const Je=s.create();s.ortho(Je,0,Be.width,Be.height,0,0,1);const tt=Be.context.gl;return{u_matrix:Je,u_world:[tt.drawingBufferWidth,tt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ge.paint.get("heatmap-opacity")}})(D,V),null,V.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,V.paint,D.transform.zoom)}(I,f))},line:function(I,l,f,T){if(I.renderPass!=="translucent")return;const D=f.paint.get("line-opacity"),V=f.paint.get("line-width");if(D.constantOr(1)===0||V.constantOr(1)===0)return;const re=I.depthModeForSublayer(0,wi.ReadOnly),pe=I.colorModeForRenderPass(),ye=f.paint.get("line-dasharray"),Ae=f.paint.get("line-pattern"),Be=Ae.constantOr(1),Ge=f.paint.get("line-gradient"),Ye=f.getCrossfadeParameters(),it=Be?"linePattern":ye?"lineSDF":Ge?"lineGradient":"line",Je=I.context,tt=Je.gl;let pt=!0;for(const vt of T){const Ct=l.getTile(vt);if(Be&&!Ct.patternsLoaded())continue;const st=Ct.getBucket(f);if(!st)continue;const It=st.programConfigurations.get(f.id),Et=I.context.program.get(),Ot=I.useProgram(it,It),jt=pt||Ot.program!==Et,Vt=I.style.terrain&&I.style.terrain.getTerrainData(vt),Lt=Ae.constantOr(null);if(Lt&&Ct.imageAtlas){const ui=Ct.imageAtlas,tr=ui.patternPositions[Lt.to.toString()],ur=ui.patternPositions[Lt.from.toString()];tr&&ur&&It.setConstantPatternPositions(tr,ur)}const li=Vt?vt:null,Kt=Be?Ju(I,Ct,f,Ye,li):ye?kn(I,Ct,f,ye,Ye,li):Ge?bh(I,Ct,f,st.lineClipsArray.length,li):Qu(I,Ct,f,li);if(Be)Je.activeTexture.set(tt.TEXTURE0),Ct.imageAtlasTexture.bind(tt.LINEAR,tt.CLAMP_TO_EDGE),It.updatePaintBuffers(Ye);else if(ye&&(jt||I.lineAtlas.dirty))Je.activeTexture.set(tt.TEXTURE0),I.lineAtlas.bind(Je);else if(Ge){const ui=st.gradients[f.id];let tr=ui.texture;if(f.gradientVersion!==ui.version){let ur=256;if(f.stepInterpolant){const Pi=l.getSource().maxzoom,qr=vt.canonical.z===Pi?Math.ceil(1<<I.transform.maxZoom-vt.canonical.z):1;ur=s.clamp(s.nextPowerOfTwo(st.maxLineLength/s.EXTENT*1024*qr),256,Je.maxTextureSize)}ui.gradient=s.renderColorRamp({expression:f.gradientExpression(),evaluationKey:"lineProgress",resolution:ur,image:ui.gradient||void 0,clips:st.lineClipsArray}),ui.texture?ui.texture.update(ui.gradient):ui.texture=new _(Je,ui.gradient,tt.RGBA),ui.version=f.gradientVersion,tr=ui.texture}Je.activeTexture.set(tt.TEXTURE0),tr.bind(f.stepInterpolant?tt.NEAREST:tt.LINEAR,tt.CLAMP_TO_EDGE)}Ot.draw(Je,tt.TRIANGLES,re,I.stencilModeForClipping(vt),pe,fn.disabled,Kt,Vt,f.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,f.paint,I.transform.zoom,It,st.layoutVertexBuffer2),pt=!1}},fill:function(I,l,f,T){const D=f.paint.get("fill-color"),V=f.paint.get("fill-opacity");if(V.constantOr(1)===0)return;const re=I.colorModeForRenderPass(),pe=f.paint.get("fill-pattern"),ye=I.opaquePassEnabledForLayer()&&!pe.constantOr(1)&&D.constantOr(s.Color.transparent).a===1&&V.constantOr(0)===1?"opaque":"translucent";if(I.renderPass===ye){const Ae=I.depthModeForSublayer(1,I.renderPass==="opaque"?wi.ReadWrite:wi.ReadOnly);kh(I,l,f,T,Ae,re,!1)}if(I.renderPass==="translucent"&&f.paint.get("fill-antialias")){const Ae=I.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,wi.ReadOnly);kh(I,l,f,T,Ae,re,!0)}},"fill-extrusion":function(I,l,f,T){const D=f.paint.get("fill-extrusion-opacity");if(D!==0&&I.renderPass==="translucent"){const V=new wi(I.context.gl.LEQUAL,wi.ReadWrite,I.depthRangeFor3D);if(D!==1||f.paint.get("fill-extrusion-pattern").constantOr(1))sd(I,l,f,T,V,Mn.disabled,zn.disabled),sd(I,l,f,T,V,I.stencilModeFor3D(),I.colorModeForRenderPass());else{const re=I.colorModeForRenderPass();sd(I,l,f,T,V,Mn.disabled,re)}}},hillshade:function(I,l,f,T){if(I.renderPass!=="offscreen"&&I.renderPass!=="translucent")return;const D=I.context,V=I.depthModeForSublayer(0,wi.ReadOnly),re=I.colorModeForRenderPass(),[pe,ye]=I.renderPass==="translucent"?I.stencilConfigForOverlap(T):[{},T];for(const Ae of ye){const Be=l.getTile(Ae);Be.needsHillshadePrepare!==void 0&&Be.needsHillshadePrepare&&I.renderPass==="offscreen"?Mh(I,Be,f,V,Mn.disabled,re):I.renderPass==="translucent"&&cy(I,Ae,Be,f,V,pe[Ae.overscaledZ],re)}D.viewport.set([0,0,I.width,I.height])},raster:function(I,l,f,T){if(I.renderPass!=="translucent"||f.paint.get("raster-opacity")===0||!T.length)return;const D=I.context,V=D.gl,re=l.getSource(),pe=I.useProgram("raster"),ye=I.colorModeForRenderPass(),[Ae,Be]=re instanceof q?[{},T]:I.stencilConfigForOverlap(T),Ge=Be[Be.length-1].overscaledZ,Ye=!I.options.moving;for(const it of Be){const Je=I.depthModeForSublayer(it.overscaledZ-Ge,f.paint.get("raster-opacity")===1?wi.ReadWrite:wi.ReadOnly,V.LESS),tt=l.getTile(it);tt.registerFadeDuration(f.paint.get("raster-fade-duration"));const pt=l.findLoadedParent(it,0),vt=Ah(tt,pt,l,f,I.transform,I.style.terrain);let Ct,st;const It=f.paint.get("raster-resampling")==="nearest"?V.NEAREST:V.LINEAR;D.activeTexture.set(V.TEXTURE0),tt.texture.bind(It,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),D.activeTexture.set(V.TEXTURE1),pt?(pt.texture.bind(It,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),Ct=Math.pow(2,pt.tileID.overscaledZ-tt.tileID.overscaledZ),st=[tt.tileID.canonical.x*Ct%1,tt.tileID.canonical.y*Ct%1]):tt.texture.bind(It,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST);const Et=I.style.terrain&&I.style.terrain.getTerrainData(it),Ot=Et?it:null,jt=Ot?Ot.posMatrix:I.transform.calculatePosMatrix(it.toUnwrapped(),Ye),Vt=Qg(jt,st||[0,0],Ct||1,vt,f);re instanceof q?pe.draw(D,V.TRIANGLES,Je,Mn.disabled,ye,fn.disabled,Vt,Et,f.id,re.boundsBuffer,I.quadTriangleIndexBuffer,re.boundsSegments):pe.draw(D,V.TRIANGLES,Je,Ae[it.overscaledZ],ye,fn.disabled,Vt,Et,f.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments)}},background:function(I,l,f,T){const D=f.paint.get("background-color"),V=f.paint.get("background-opacity");if(V===0)return;const re=I.context,pe=re.gl,ye=I.transform,Ae=ye.tileSize,Be=f.paint.get("background-pattern");if(I.isPatternMissing(Be))return;const Ge=!Be&&D.a===1&&V===1&&I.opaquePassEnabledForLayer()?"opaque":"translucent";if(I.renderPass!==Ge)return;const Ye=Mn.disabled,it=I.depthModeForSublayer(0,Ge==="opaque"?wi.ReadWrite:wi.ReadOnly),Je=I.colorModeForRenderPass(),tt=I.useProgram(Be?"backgroundPattern":"background"),pt=T||ye.coveringTiles({tileSize:Ae,terrain:I.style.terrain});Be&&(re.activeTexture.set(pe.TEXTURE0),I.imageManager.bind(I.context));const vt=f.getCrossfadeParameters();for(const Ct of pt){const st=T?Ct.posMatrix:I.transform.calculatePosMatrix(Ct.toUnwrapped()),It=Be?cf(st,V,I,Be,{tileID:Ct,tileSize:Ae},vt):Rx(st,V,D),Et=I.style.terrain&&I.style.terrain.getTerrainData(Ct);tt.draw(re,pe.TRIANGLES,it,Ye,Je,fn.disabled,It,Et,f.id,I.tileExtentBuffer,I.quadTriangleIndexBuffer,I.tileExtentSegments)}},debug:function(I,l,f){for(let T=0;T<f.length;T++)Sf(I,l,f[T])},custom:function(I,l,f){const T=I.context,D=f.implementation;if(I.renderPass==="offscreen"){const V=D.prerender;V&&(I.setCustomLayerDefaults(),T.setColorMode(I.colorModeForRenderPass()),V.call(D,T.gl,I.transform.customLayerMatrix()),T.setDirty(),I.setBaseState())}else if(I.renderPass==="translucent"){I.setCustomLayerDefaults(),T.setColorMode(I.colorModeForRenderPass()),T.setStencilMode(Mn.disabled);const V=D.renderingMode==="3d"?new wi(I.context.gl.LEQUAL,wi.ReadWrite,I.depthRangeFor3D):I.depthModeForSublayer(0,wi.ReadOnly);T.setDepthMode(V),D.render(T.gl,I.transform.customLayerMatrix()),T.setDirty(),I.setBaseState(),T.bindFramebuffer.set(null)}}};class py{constructor(l,f){this.context=new _f(l),this.transform=f,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.create(),renderTime:0},this.setup(),this.numSublayers=ie.maxUnderzooming+ie.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Hi,this.gpuTimers={}}resize(l,f,T){if(this.width=l*T,this.height=f*T,this.pixelRatio=T,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const D of this.style._order)this.style._layers[D].resize()}setup(){const l=this.context,f=new s.PosArray;f.emplaceBack(0,0),f.emplaceBack(s.EXTENT,0),f.emplaceBack(0,s.EXTENT),f.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(f,Ui.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const T=new s.PosArray;T.emplaceBack(0,0),T.emplaceBack(s.EXTENT,0),T.emplaceBack(0,s.EXTENT),T.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=l.createVertexBuffer(T,Ui.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const D=new s.RasterBoundsArray;D.emplaceBack(0,0,0,0),D.emplaceBack(s.EXTENT,0,s.EXTENT,0),D.emplaceBack(0,s.EXTENT,0,s.EXTENT),D.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.rasterBoundsBuffer=l.createVertexBuffer(D,j.members),this.rasterBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const V=new s.PosArray;V.emplaceBack(0,0),V.emplaceBack(1,0),V.emplaceBack(0,1),V.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(V,Ui.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const re=new s.LineStripIndexArray;re.emplaceBack(0),re.emplaceBack(1),re.emplaceBack(3),re.emplaceBack(2),re.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(re);const pe=new s.TriangleIndexArray;pe.emplaceBack(0,1,2),pe.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(pe),this.emptyTexture=new _(l,{width:1,height:1,data:new Uint8Array([0,0,0,0])},l.gl.RGBA);const ye=this.context.gl;this.stencilClearMode=new Mn({func:ye.ALWAYS,mask:0},0,255,ye.ZERO,ye.ZERO,ye.ZERO)}clearStencil(){const l=this.context,f=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const T=s.create();s.ortho(T,0,this.width,this.height,0,0,1),s.scale(T,T,[f.drawingBufferWidth,f.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,f.TRIANGLES,wi.disabled,this.stencilClearMode,zn.disabled,fn.disabled,Ku(T),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,f){if(this.currentStencilSource===l.source||!l.isTileClipped()||!f||!f.length)return;this.currentStencilSource=l.source;const T=this.context,D=T.gl;this.nextStencilID+f.length>256&&this.clearStencil(),T.setColorMode(zn.disabled),T.setDepthMode(wi.disabled);const V=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const re of f){const pe=this._tileClippingMaskIDs[re.key]=this.nextStencilID++,ye=this.style.terrain&&this.style.terrain.getTerrainData(re);V.draw(T,D.TRIANGLES,wi.disabled,new Mn({func:D.ALWAYS,mask:0},pe,255,D.KEEP,D.KEEP,D.REPLACE),zn.disabled,fn.disabled,Ku(re.posMatrix),ye,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,f=this.context.gl;return new Mn({func:f.NOTEQUAL,mask:255},l,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(l){const f=this.context.gl;return new Mn({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(l){const f=this.context.gl,T=l.sort((re,pe)=>pe.overscaledZ-re.overscaledZ),D=T[T.length-1].overscaledZ,V=T[0].overscaledZ-D+1;if(V>1){this.currentStencilSource=void 0,this.nextStencilID+V>256&&this.clearStencil();const re={};for(let pe=0;pe<V;pe++)re[pe+D]=new Mn({func:f.GEQUAL,mask:255},pe+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=V,[re,T]}return[{[D]:Mn.disabled},T]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new zn([l.CONSTANT_COLOR,l.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?zn.unblended:zn.alphaBlended}depthModeForSublayer(l,f,T){if(!this.opaquePassEnabledForLayer())return wi.disabled;const D=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new wi(T||this.context.gl.LEQUAL,f,[D,D])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,f){this.style=l,this.options=f,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const T=this.style._order,D=this.style.sourceCaches,V=this.style.terrain&&new Dh(this);for(const Ae in D){const Be=D[Ae];Be.used&&Be.prepare(this.context)}const re={},pe={},ye={};for(const Ae in D){const Be=D[Ae];re[Ae]=Be.getVisibleCoordinates(),pe[Ae]=re[Ae].slice().reverse(),ye[Ae]=Be.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Ae=0;Ae<T.length;Ae++)if(this.style._layers[T[Ae]].is3D()){this.opaquePassCutoff=Ae;break}if(V){this.opaquePassCutoff=0;const Ae=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!s.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||Ae.length)&&(s.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(Be,Ge){const Ye=Be.context,it=Ye.gl,Je=zn.unblended,tt=new wi(it.LEQUAL,wi.ReadWrite,[0,1]),pt=Ge.getTerrainMesh(),vt=Ge.sourceCache.getRenderableTiles(),Ct=Be.useProgram("terrainDepth");Ye.bindFramebuffer.set(Ge.getFramebuffer("depth").framebuffer),Ye.viewport.set([0,0,Be.width/devicePixelRatio,Be.height/devicePixelRatio]),Ye.clear({color:s.Color.transparent,depth:1});for(const st of vt){const It=Ge.getTerrainData(st.tileID),Et=Be.transform.calculatePosMatrix(st.tileID.toUnwrapped());Ct.draw(Ye,it.TRIANGLES,tt,Mn.disabled,Je,fn.backCCW,{u_matrix:Et},It,"terrain",pt.vertexBuffer,pt.indexBuffer,pt.segments)}Ye.bindFramebuffer.set(null),Ye.viewport.set([0,0,Be.width,Be.height])}(this,this.style.terrain),function(Be,Ge){const Ye=Be.context,it=Ye.gl,Je=zn.unblended,tt=new wi(it.LEQUAL,wi.ReadWrite,[0,1]),pt=Ge.getTerrainMesh(),vt=Ge.getCoordsTexture(),Ct=Ge.sourceCache.getRenderableTiles(),st=Be.useProgram("terrainCoords");Ye.bindFramebuffer.set(Ge.getFramebuffer("coords").framebuffer),Ye.viewport.set([0,0,Be.width/devicePixelRatio,Be.height/devicePixelRatio]),Ye.clear({color:s.Color.transparent,depth:1}),Ge.coordsIndex=[];for(const It of Ct){const Et=Ge.getTerrainData(It.tileID);Ye.activeTexture.set(it.TEXTURE0),it.bindTexture(it.TEXTURE_2D,vt.texture);const Ot=Be.transform.calculatePosMatrix(It.tileID.toUnwrapped());st.draw(Ye,it.TRIANGLES,tt,Mn.disabled,Je,fn.backCCW,{u_matrix:Ot,u_terrain_coords_id:(255-Ge.coordsIndex.length)/255,u_texture:0},Et,"terrain",pt.vertexBuffer,pt.indexBuffer,pt.segments),Ge.coordsIndex.push(It.tileID.key)}Ye.bindFramebuffer.set(null),Ye.viewport.set([0,0,Be.width,Be.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const Ae of T){const Be=this.style._layers[Ae];if(!Be.hasOffscreenPass()||Be.isHidden(this.transform.zoom))continue;const Ge=pe[Be.source];(Be.type==="custom"||Ge.length)&&this.renderLayer(this,D[Be.source],Be,Ge)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:f.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!V)for(this.renderPass="opaque",this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const Ae=this.style._layers[T[this.currentLayer]],Be=D[Ae.source],Ge=re[Ae.source];this._renderTileClippingMasks(Ae,Ge),this.renderLayer(this,Be,Ae,Ge)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const Ae=this.style._layers[T[this.currentLayer]],Be=D[Ae.source];if(V&&V.renderLayer(Ae))continue;const Ge=(Ae.type==="symbol"?ye:pe)[Ae.source];this._renderTileClippingMasks(Ae,re[Ae.source]),this.renderLayer(this,Be,Ae,Ge)}if(this.options.showTileBoundaries){let Ae,Be;Object.values(this.style._layers).forEach(Ge=>{Ge.source&&!Ge.isHidden(this.transform.zoom)&&(Ge.source!==(Be&&Be.id)&&(Be=this.style.sourceCaches[Ge.source]),(!Ae||Ae.getSource().maxzoom<Be.getSource().maxzoom)&&(Ae=Be))}),Ae&&Rh.debug(this,Ae,Ae.getVisibleCoordinates())}this.options.showPadding&&function(Ae){const Be=Ae.transform.padding;ad(Ae,Ae.transform.height-(Be.top||0),3,bo),ad(Ae,Be.bottom||0,3,uy),Ih(Ae,Be.left||0,3,Tf),Ih(Ae,Ae.transform.width-(Be.right||0),3,dy);const Ge=Ae.transform.centerPoint;(function(Ye,it,Je,tt){Ph(Ye,it-1,Je-10,2,20,tt),Ph(Ye,it-10,Je-1,20,2,tt)})(Ae,Ge.x,Ae.transform.height-Ge.y,Xc)}(this),this.context.setDefault()}renderLayer(l,f,T,D){T.isHidden(this.transform.zoom)||(T.type==="background"||T.type==="custom"||(D||[]).length)&&(this.id=T.id,this.gpuTimingStart(T),Rh[T.type](l,f,T,D,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const f=this.context.extTimerQuery;let T=this.gpuTimers[l.id];T||(T=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:f.createQueryEXT()}),T.calls++,f.beginQueryEXT(f.TIME_ELAPSED_EXT,T.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}queryGpuTimers(l){const f={};for(const T in l){const D=l[T],V=this.context.extTimerQuery,re=V.getQueryObjectEXT(D.query,V.QUERY_RESULT_EXT)/1e6;V.deleteQueryEXT(D.query),f[T]=re}return f}translatePosMatrix(l,f,T,D,V){if(!T[0]&&!T[1])return l;const re=V?D==="map"?this.transform.angle:0:D==="viewport"?-this.transform.angle:0;if(re){const Ae=Math.sin(re),Be=Math.cos(re);T=[T[0]*Be-T[1]*Ae,T[0]*Ae+T[1]*Be]}const pe=[V?T[0]:sr(f,T[0],this.transform.zoom),V?T[1]:sr(f,T[1],this.transform.zoom),0],ye=new Float32Array(16);return s.translate(ye,l,pe),ye}saveTileTexture(l){const f=this._tileTextures[l.size[0]];f?f.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const f=this._tileTextures[l];return f&&f.length>0?f.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const f=this.imageManager.getPattern(l.from.toString()),T=this.imageManager.getPattern(l.to.toString());return!f||!T}useProgram(l,f){this.cache=this.cache||{};const T=l+(f?f.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[T]||(this.cache[T]=new Px(this.context,l,_l[l],f,uf[l],this._showOverdrawInspector,this.style.terrain)),this.cache[T]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new _(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Lh{constructor(l,f){this.points=l,this.planes=f}static fromInvProjectionMatrix(l,f,T){const D=Math.pow(2,T),V=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(pe=>{const ye=1/(pe=s.transformMat4([],pe,l))[3]/f*D;return s.mul$1(pe,pe,[ye,ye,1/pe[3],ye])}),re=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(pe=>{const ye=s.sub([],V[pe[0]],V[pe[1]]),Ae=s.sub([],V[pe[2]],V[pe[1]]),Be=s.normalize([],s.cross([],ye,Ae)),Ge=-s.dot(Be,V[pe[1]]);return Be.concat(Ge)});return new Lh(V,re)}}class lc{constructor(l,f){this.min=l,this.max=f,this.center=s.scale$1([],s.add([],this.min,this.max),.5)}quadrant(l){const f=[l%2==0,l<2],T=s.clone$2(this.min),D=s.clone$2(this.max);for(let V=0;V<f.length;V++)T[V]=f[V]?this.min[V]:this.center[V],D[V]=f[V]?this.center[V]:this.max[V];return D[2]=this.max[2],new lc(T,D)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersects(l){const f=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let T=!0;for(let D=0;D<l.planes.length;D++){const V=l.planes[D];let re=0;for(let pe=0;pe<f.length;pe++)s.dot$1(V,f[pe])>=0&&re++;if(re===0)return 0;re!==f.length&&(T=!1)}if(T)return 2;for(let D=0;D<3;D++){let V=Number.MAX_VALUE,re=-Number.MAX_VALUE;for(let pe=0;pe<l.points.length;pe++){const ye=l.points[pe][D]-this.min[D];V=Math.min(V,ye),re=Math.max(re,ye)}if(re<0||V>this.max[D]-this.min[D])return 0}return 1}}class od{constructor(l=0,f=0,T=0,D=0){if(isNaN(l)||l<0||isNaN(f)||f<0||isNaN(T)||T<0||isNaN(D)||D<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=f,this.left=T,this.right=D}interpolate(l,f,T){return f.top!=null&&l.top!=null&&(this.top=s.number(l.top,f.top,T)),f.bottom!=null&&l.bottom!=null&&(this.bottom=s.number(l.bottom,f.bottom,T)),f.left!=null&&l.left!=null&&(this.left=s.number(l.left,f.left,T)),f.right!=null&&l.right!=null&&(this.right=s.number(l.right,f.right,T)),this}getCenter(l,f){const T=s.clamp((this.left+l-this.right)/2,0,l),D=s.clamp((this.top+f-this.bottom)/2,0,f);return new s.pointGeometry(T,D)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new od(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Nh{constructor(l,f,T,D,V){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=V===void 0||!!V,this._minZoom=l||0,this._maxZoom=f||22,this._minPitch=T??0,this._maxPitch=D??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new od,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const l=new Nh(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.tileSize=this.tileSize,l.latRange=this.latRange,l.width=this.width,l.height=this.height,l._center=this._center,l._elevation=this._elevation,l.zoom=this.zoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._calcMatrices(),l}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(l){const f=-s.wrap(l,-180,180)*Math.PI/180;var T;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=(T=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(T[1]=0,T[2]=0),T[0]=1,T[3]=1,T),function(D,V,re){var pe=V[0],ye=V[1],Ae=V[2],Be=V[3],Ge=Math.sin(re),Ye=Math.cos(re);D[0]=pe*Ye+Ae*Ge,D[1]=ye*Ye+Be*Ge,D[2]=pe*-Ge+Ae*Ye,D[3]=ye*-Ge+Be*Ye}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const f=s.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(l){const f=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._zoom=f,this.scale=this.zoomScale(f),this.tileZoom=Math.floor(f),this.zoomFraction=f-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(l){l!==this._elevation&&(this._elevation=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,f,T){this._unmodified=!1,this._edgeInsets.interpolate(l,f,T),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const f=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(l){const f=[new s.UnwrappedTileID(0,l)];if(this._renderWorldCopies){const T=this.pointCoordinate(new s.pointGeometry(0,0)),D=this.pointCoordinate(new s.pointGeometry(this.width,0)),V=this.pointCoordinate(new s.pointGeometry(this.width,this.height)),re=this.pointCoordinate(new s.pointGeometry(0,this.height)),pe=Math.floor(Math.min(T.x,D.x,V.x,re.x)),ye=Math.floor(Math.max(T.x,D.x,V.x,re.x)),Ae=1;for(let Be=pe-Ae;Be<=ye+Ae;Be++)Be!==0&&f.push(new s.UnwrappedTileID(Be,l))}return f}coveringTiles(l){var f,T;let D=this.coveringZoomLevel(l);const V=D;if(l.minzoom!==void 0&&D<l.minzoom)return[];l.maxzoom!==void 0&&D>l.maxzoom&&(D=l.maxzoom);const re=this.pointCoordinate(this.getCameraPoint()),pe=s.MercatorCoordinate.fromLngLat(this.center),ye=Math.pow(2,D),Ae=[ye*re.x,ye*re.y,0],Be=[ye*pe.x,ye*pe.y,0],Ge=Lh.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,D);let Ye=l.minzoom||0;!l.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Ye=D);const it=l.terrain?2/Math.min(this.tileSize,l.tileSize)*this.tileSize:3,Je=st=>({aabb:new lc([st*ye,0,0],[(st+1)*ye,ye,0]),zoom:0,x:0,y:0,wrap:st,fullyVisible:!1}),tt=[],pt=[],vt=D,Ct=l.reparseOverscaled?V:D;if(this._renderWorldCopies)for(let st=1;st<=3;st++)tt.push(Je(-st)),tt.push(Je(st));for(tt.push(Je(0));tt.length>0;){const st=tt.pop(),It=st.x,Et=st.y;let Ot=st.fullyVisible;if(!Ot){const ui=st.aabb.intersects(Ge);if(ui===0)continue;Ot=ui===2}const jt=l.terrain?Ae:Be,Vt=st.aabb.distanceX(jt),Lt=st.aabb.distanceY(jt),li=Math.max(Math.abs(Vt),Math.abs(Lt)),Kt=it+(1<<vt-st.zoom)-2;if(st.zoom===vt||li>Kt&&st.zoom>=Ye){const ui=vt-st.zoom,tr=Ae[0]-.5-(It<<ui),ur=Ae[1]-.5-(Et<<ui);pt.push({tileID:new s.OverscaledTileID(st.zoom===vt?Ct:st.zoom,st.wrap,st.zoom,It,Et),distanceSq:s.sqrLen([Be[0]-.5-It,Be[1]-.5-Et]),tileDistanceToCamera:Math.sqrt(tr*tr+ur*ur)})}else for(let ui=0;ui<4;ui++){const tr=(It<<1)+ui%2,ur=(Et<<1)+(ui>>1),Pi=st.zoom+1;let qr=st.aabb.quadrant(ui);if(l.terrain){const Wr=new s.OverscaledTileID(Pi,st.wrap,Pi,tr,ur),Cr=l.terrain.getMinMaxElevation(Wr),Sr=(f=Cr.minElevation)!==null&&f!==void 0?f:this.elevation,Ar=(T=Cr.maxElevation)!==null&&T!==void 0?T:this.elevation;qr=new lc([qr.min[0],qr.min[1],Sr],[qr.max[0],qr.max[1],Ar])}tt.push({aabb:qr,zoom:Pi,x:tr,y:ur,wrap:st.wrap,fullyVisible:Ot})}}return pt.sort((st,It)=>st.distanceSq-It.distanceSq).map(st=>st.tileID)}resize(l,f){this.width=l,this.height=f,this.pixelsToGLUnits=[2/l,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const f=s.clamp(l.lat,-this.maxValidLatitude,this.maxValidLatitude);return new s.pointGeometry(s.mercatorXfromLng(l.lng)*this.worldSize,s.mercatorYfromLat(f)*this.worldSize)}unproject(l){return new s.MercatorCoordinate(l.x/this.worldSize,l.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(l){this.freezeElevation||(this.elevation=l?this.getElevation(this._center,l):0)}getElevation(l,f){const T=s.MercatorCoordinate.fromLngLat(l),D=(1<<this.tileZoom)*s.EXTENT,V=T.x*D,re=T.y*D,pe=Math.floor(V/s.EXTENT),ye=Math.floor(re/s.EXTENT),Ae=new s.OverscaledTileID(this.tileZoom,0,this.tileZoom,pe,ye);return f.getElevation(Ae,V%s.EXTENT,re%s.EXTENT,s.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(l){const f=this.pointLocation(this.centerPoint,l),T=this.getElevation(f,l);if(!(this.elevation-T))return;const D=this.getCameraPosition(),V=s.MercatorCoordinate.fromLngLat(D.lngLat,D.altitude),re=s.MercatorCoordinate.fromLngLat(f,T),pe=V.x-re.x,ye=V.y-re.y,Ae=V.z-re.z,Be=Math.sqrt(pe*pe+ye*ye+Ae*Ae),Ge=this.scaleZoom(this.cameraToCenterDistance/Be/this.tileSize);this._elevation=T,this._center=f,this.zoom=Ge}setLocationAtPoint(l,f){const T=this.pointCoordinate(f),D=this.pointCoordinate(this.centerPoint),V=this.locationCoordinate(l),re=new s.MercatorCoordinate(V.x-(T.x-D.x),V.y-(T.y-D.y));this.center=this.coordinateLocation(re),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(l,f){return f?this.coordinatePoint(this.locationCoordinate(l),this.getElevation(l,f),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(l))}pointLocation(l,f){return this.coordinateLocation(this.pointCoordinate(l,f))}locationCoordinate(l){return s.MercatorCoordinate.fromLngLat(l)}coordinateLocation(l){return l&&l.toLngLat()}pointCoordinate(l,f){if(f){const Ye=f.pointCoordinate(l);if(Ye!=null)return Ye}const T=[l.x,l.y,0,1],D=[l.x,l.y,1,1];s.transformMat4(T,T,this.pixelMatrixInverse),s.transformMat4(D,D,this.pixelMatrixInverse);const V=T[3],re=D[3],pe=T[1]/V,ye=D[1]/re,Ae=T[2]/V,Be=D[2]/re,Ge=Ae===Be?0:(0-Ae)/(Be-Ae);return new s.MercatorCoordinate(s.number(T[0]/V,D[0]/re,Ge)/this.worldSize,s.number(pe,ye,Ge)/this.worldSize)}coordinatePoint(l,f=0,T=this.pixelMatrix){const D=[l.x*this.worldSize,l.y*this.worldSize,f,1];return s.transformMat4(D,D,T),new s.pointGeometry(D[0]/D[3],D[1]/D[3])}getBounds(){const l=Math.max(0,this.height/2-this.getHorizon());return new s.LngLatBounds().extend(this.pointLocation(new s.pointGeometry(0,l))).extend(this.pointLocation(new s.pointGeometry(this.width,l))).extend(this.pointLocation(new s.pointGeometry(this.width,this.height))).extend(this.pointLocation(new s.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new s.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(l,f=!1){const T=l.key,D=f?this._alignedPosMatrixCache:this._posMatrixCache;if(D[T])return D[T];const V=l.canonical,re=this.worldSize/this.zoomScale(V.z),pe=V.x+Math.pow(2,V.z)*l.wrap,ye=s.identity(new Float64Array(16));return s.translate(ye,ye,[pe*re,V.y*re,0]),s.scale(ye,ye,[re/s.EXTENT,re/s.EXTENT,1]),s.multiply(ye,f?this.alignedProjMatrix:this.projMatrix,ye),D[T]=new Float32Array(ye),D[T]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let l,f,T,D,V=-90,re=90,pe=-180,ye=180;const Ae=this.size,Be=this._unmodified;if(this.latRange){const it=this.latRange;V=s.mercatorYfromLat(it[1])*this.worldSize,re=s.mercatorYfromLat(it[0])*this.worldSize,l=re-V<Ae.y?Ae.y/(re-V):0}if(this.lngRange){const it=this.lngRange;pe=s.wrap(s.mercatorXfromLng(it[0])*this.worldSize,0,this.worldSize),ye=s.wrap(s.mercatorXfromLng(it[1])*this.worldSize,0,this.worldSize),ye<pe&&(ye+=this.worldSize),f=ye-pe<Ae.x?Ae.x/(ye-pe):0}const Ge=this.point,Ye=Math.max(f||0,l||0);if(Ye)return this.center=this.unproject(new s.pointGeometry(f?(ye+pe)/2:Ge.x,l?(re+V)/2:Ge.y)),this.zoom+=this.scaleZoom(Ye),this._unmodified=Be,void(this._constraining=!1);if(this.latRange){const it=Ge.y,Je=Ae.y/2;it-Je<V&&(D=V+Je),it+Je>re&&(D=re-Je)}if(this.lngRange){const it=(pe+ye)/2,Je=s.wrap(Ge.x,it-this.worldSize/2,it+this.worldSize/2),tt=Ae.x/2;Je-tt<pe&&(T=pe+tt),Je+tt>ye&&(T=ye-tt)}T===void 0&&D===void 0||(this.center=this.unproject(new s.pointGeometry(T!==void 0?T:Ge.x,D!==void 0?D:Ge.y)).wrap()),this._unmodified=Be,this._constraining=!1}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,f=this.point.x,T=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=s.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let D=s.identity(new Float64Array(16));s.scale(D,D,[this.width/2,-this.height/2,1]),s.translate(D,D,[1,-1,0]),this.labelPlaneMatrix=D,D=s.identity(new Float64Array(16)),s.scale(D,D,[1,-1,1]),s.translate(D,D,[-1,-1,0]),s.scale(D,D,[2/this.width,2/this.height,1]),this.glCoordMatrix=D,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const V=Math.PI/2+this._pitch,re=this._fov*(.5+l.y/this.height),pe=Math.sin(re)*this.cameraToSeaLevelDistance/Math.sin(s.clamp(Math.PI-V-re,.01,Math.PI-.01)),ye=this.getHorizon(),Ae=2*Math.atan(ye/this.cameraToCenterDistance)*(.5+l.y/(2*ye)),Be=Math.sin(Ae)*this.cameraToSeaLevelDistance/Math.sin(s.clamp(Math.PI-V-Ae,.01,Math.PI-.01)),Ge=Math.cos(Math.PI/2-this._pitch)*pe+this.cameraToSeaLevelDistance,Ye=Math.cos(Math.PI/2-this._pitch)*Be+this.cameraToSeaLevelDistance,it=1.01*Math.min(Ge,Ye),Je=this.height/50;D=new Float64Array(16),s.perspective(D,this._fov,this.width/this.height,Je,it),D[8]=2*-l.x/this.width,D[9]=2*l.y/this.height,s.scale(D,D,[1,-1,1]),s.translate(D,D,[0,0,-this.cameraToCenterDistance]),s.rotateX(D,D,this._pitch),s.rotateZ(D,D,this.angle),s.translate(D,D,[-f,-T,0]),this.mercatorMatrix=s.scale([],D,[this.worldSize,this.worldSize,this.worldSize]),s.scale(D,D,[1,1,this._pixelPerMeter]),this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,D),s.translate(D,D,[0,0,-this.elevation]),this.projMatrix=D,this.invProjMatrix=s.invert([],D),this.pixelMatrix3D=s.multiply(new Float64Array(16),this.labelPlaneMatrix,D);const tt=this.width%2/2,pt=this.height%2/2,vt=Math.cos(this.angle),Ct=Math.sin(this.angle),st=f-Math.round(f)+vt*tt+Ct*pt,It=T-Math.round(T)+vt*pt+Ct*tt,Et=new Float64Array(D);if(s.translate(Et,Et,[st>.5?st-1:st,It>.5?It-1:It,0]),this.alignedProjMatrix=Et,D=s.invert(new Float64Array(16),this.pixelMatrix),!D)throw new Error("failed to invert matrix");this.pixelMatrixInverse=D,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const l=this.pointCoordinate(new s.pointGeometry(0,0)),f=[l.x*this.worldSize,l.y*this.worldSize,0,1];return s.transformMat4(f,f,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.pointGeometry(0,l))}getCameraQueryGeometry(l){const f=this.getCameraPoint();if(l.length===1)return[l[0],f];{let T=f.x,D=f.y,V=f.x,re=f.y;for(const pe of l)T=Math.min(T,pe.x),D=Math.min(D,pe.y),V=Math.max(V,pe.x),re=Math.max(re,pe.y);return[new s.pointGeometry(T,D),new s.pointGeometry(V,D),new s.pointGeometry(V,re),new s.pointGeometry(T,re),new s.pointGeometry(T,D)]}}}class fy{constructor(l){this._hashName=l&&encodeURIComponent(l),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(f,T){let D=!1,V=null;const re=()=>{V=null,D&&(f(),V=setTimeout(re,300),D=!1)};return()=>(D=!0,V||re(),V)}(this._updateHashUnthrottled.bind(this))}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(l){const f=this._map.getCenter(),T=Math.round(100*this._map.getZoom())/100,D=Math.ceil((T*Math.LN2+Math.log(512/360/.5))/Math.LN10),V=Math.pow(10,D),re=Math.round(f.lng*V)/V,pe=Math.round(f.lat*V)/V,ye=this._map.getBearing(),Ae=this._map.getPitch();let Be="";if(Be+=l?`/${re}/${pe}/${T}`:`${T}/${pe}/${re}`,(ye||Ae)&&(Be+="/"+Math.round(10*ye)/10),Ae&&(Be+=`/${Math.round(Ae)}`),this._hashName){const Ge=this._hashName;let Ye=!1;const it=window.location.hash.slice(1).split("&").map(Je=>{const tt=Je.split("=")[0];return tt===Ge?(Ye=!0,`${tt}=${Be}`):Je}).filter(Je=>Je);return Ye||it.push(`${Ge}=${Be}`),`#${it.join("&")}`}return`#${Be}`}_getCurrentHash(){const l=window.location.hash.replace("#","");if(this._hashName){let f;return l.split("&").map(T=>T.split("=")).forEach(T=>{T[0]===this._hashName&&(f=T)}),(f&&f[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._getCurrentHash();if(l.length>=3&&!l.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:f,pitch:+(l[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,l)}catch{}}}const ld={linearity:.3,easing:s.bezier(0,0,.3,1)},my=s.extend({deceleration:2500,maxSpeed:1400},ld),gy=s.extend({deceleration:20,maxSpeed:1400},ld),Kc=s.extend({deceleration:1e3,maxSpeed:360},ld),yy=s.extend({deceleration:1e3,maxSpeed:90},ld);class vy{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,f=s.exported.now();for(;l.length>0&&f-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const f={zoom:0,bearing:0,pitch:0,pan:new s.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:V}of this._inertiaBuffer)f.zoom+=V.zoomDelta||0,f.bearing+=V.bearingDelta||0,f.pitch+=V.pitchDelta||0,V.panDelta&&f.pan._add(V.panDelta),V.around&&(f.around=V.around),V.pinchAround&&(f.pinchAround=V.pinchAround);const T=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,D={};if(f.pan.mag()){const V=ud(f.pan.mag(),T,s.extend({},my,l||{}));D.offset=f.pan.mult(V.amount/f.pan.mag()),D.center=this._map.transform.center,cd(D,V)}if(f.zoom){const V=ud(f.zoom,T,gy);D.zoom=this._map.transform.zoom+V.amount,cd(D,V)}if(f.bearing){const V=ud(f.bearing,T,Kc);D.bearing=this._map.transform.bearing+s.clamp(V.amount,-179,179),cd(D,V)}if(f.pitch){const V=ud(f.pitch,T,yy);D.pitch=this._map.transform.pitch+V.amount,cd(D,V)}if(D.zoom||D.bearing){const V=f.pinchAround===void 0?f.around:f.pinchAround;D.around=V?this._map.unproject(V):this._map.getCenter()}return this.clear(),s.extend(D,{noMoveStart:!0})}}function cd(I,l){(!I.duration||I.duration<l.duration)&&(I.duration=l.duration,I.easing=l.easing)}function ud(I,l,f){const{maxSpeed:T,linearity:D,deceleration:V}=f,re=s.clamp(I*D/(l/1e3),-T,T),pe=Math.abs(re)/(V*D);return{easing:f.easing,duration:1e3*pe,amount:re*(pe/2)}}class Oa extends s.Event{constructor(l,f,T,D={}){const V=g.mousePos(f.getCanvasContainer(),T),re=f.unproject(V);super(l,s.extend({point:V,lngLat:re,originalEvent:T},D)),this._defaultPrevented=!1,this.target=f}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Us extends s.Event{constructor(l,f,T){const D=l==="touchend"?T.changedTouches:T.touches,V=g.touchPos(f.getCanvasContainer(),D),re=V.map(ye=>f.unproject(ye)),pe=V.reduce((ye,Ae,Be,Ge)=>ye.add(Ae.div(Ge.length)),new s.pointGeometry(0,0));super(l,{points:V,point:pe,lngLats:re,lngLat:f.unproject(pe),originalEvent:T}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Vx extends s.Event{constructor(l,f,T){super(l,{originalEvent:T}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Sl{constructor(l,f){this._map=l,this._clickTolerance=f.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new Vx(l.type,this._map,l))}mousedown(l,f){return this._mousedownPos=f,this._firePreventable(new Oa(l.type,this._map,l))}mouseup(l){this._map.fire(new Oa(l.type,this._map,l))}click(l,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||this._map.fire(new Oa(l.type,this._map,l))}dblclick(l){return this._firePreventable(new Oa(l.type,this._map,l))}mouseover(l){this._map.fire(new Oa(l.type,this._map,l))}mouseout(l){this._map.fire(new Oa(l.type,this._map,l))}touchstart(l){return this._firePreventable(new Us(l.type,this._map,l))}touchmove(l){this._map.fire(new Us(l.type,this._map,l))}touchend(l){this._map.fire(new Us(l.type,this._map,l))}touchcancel(l){this._map.fire(new Us(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xy{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new Oa(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Oa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new Oa(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class cc{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,f){this.isEnabled()&&l.shiftKey&&l.button===0&&(g.disableDrag(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(l,f){if(!this._active)return;const T=f;if(this._lastPos.equals(T)||!this._box&&T.dist(this._startPos)<this._clickTolerance)return;const D=this._startPos;this._lastPos=T,this._box||(this._box=g.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const V=Math.min(D.x,T.x),re=Math.max(D.x,T.x),pe=Math.min(D.y,T.y),ye=Math.max(D.y,T.y);g.setTransform(this._box,`translate(${V}px,${pe}px)`),this._box.style.width=re-V+"px",this._box.style.height=ye-pe+"px"}mouseupWindow(l,f){if(!this._active||l.button!==0)return;const T=this._startPos,D=f;if(this.reset(),g.suppressClick(),T.x!==D.x||T.y!==D.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:V=>V.fitScreenCoordinates(T,D,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(g.remove(this._box),this._box=null),g.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,f){return this._map.fire(new s.Event(l,{originalEvent:f}))}}function uc(I,l){if(I.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${I.length}, points ${l.length}`);const f={};for(let T=0;T<I.length;T++)f[I[T].identifier]=l[T];return f}class Gx{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,f,T){(this.centroid||T.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),T.length===this.numTouches&&(this.centroid=function(D){const V=new s.pointGeometry(0,0);for(const re of D)V._add(re);return V.div(D.length)}(f),this.touches=uc(T,f)))}touchmove(l,f,T){if(this.aborted||!this.centroid)return;const D=uc(T,f);for(const V in this.touches){const re=this.touches[V],pe=D[V];(!pe||pe.dist(re)>30)&&(this.aborted=!0)}}touchend(l,f,T){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),T.length===0){const D=!this.aborted&&this.centroid;if(this.reset(),D)return D}}}class kf{constructor(l){this.singleTap=new Gx(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,f,T){this.singleTap.touchstart(l,f,T)}touchmove(l,f,T){this.singleTap.touchmove(l,f,T)}touchend(l,f,T){const D=this.singleTap.touchend(l,f,T);if(D){const V=l.timeStamp-this.lastTime<500,re=!this.lastTap||this.lastTap.dist(D)<30;if(V&&re||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=D,this.count===this.numTaps)return this.reset(),D}}}class Hx{constructor(){this._zoomIn=new kf({numTouches:1,numTaps:2}),this._zoomOut=new kf({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,f,T){this._zoomIn.touchstart(l,f,T),this._zoomOut.touchstart(l,f,T)}touchmove(l,f,T){this._zoomIn.touchmove(l,f,T),this._zoomOut.touchmove(l,f,T)}touchend(l,f,T){const D=this._zoomIn.touchend(l,f,T),V=this._zoomOut.touchend(l,f,T);return D?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:re=>re.easeTo({duration:300,zoom:re.getZoom()+1,around:re.unproject(D)},{originalEvent:l})}):V?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:re=>re.easeTo({duration:300,zoom:re.getZoom()-1,around:re.unproject(V)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const by={0:1,2:2};class dc{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(l,f){return!1}_move(l,f){return{}}mousedown(l,f){if(this._lastPoint)return;const T=g.mouseButton(l);this._correctButton(l,T)&&(this._lastPoint=f,this._eventButton=T)}mousemoveWindow(l,f){const T=this._lastPoint;if(T){if(l.preventDefault(),function(D,V){const re=by[V];return D.buttons===void 0||(D.buttons&re)!==re}(l,this._eventButton))this.reset();else if(this._moved||!(f.dist(T)<this._clickTolerance))return this._moved=!0,this._lastPoint=f,this._move(T,f)}}mouseupWindow(l){this._lastPoint&&g.mouseButton(l)===this._eventButton&&(this._moved&&g.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class El extends dc{mousedown(l,f){super.mousedown(l,f),this._lastPoint&&(this._active=!0)}_correctButton(l,f){return f===0&&!l.ctrlKey}_move(l,f){return{around:f,panDelta:f.sub(l)}}}class hi extends dc{_correctButton(l,f){return f===0&&l.ctrlKey||f===2}_move(l,f){const T=.8*(f.x-l.x);if(T)return this._active=!0,{bearingDelta:T}}contextmenu(l){l.preventDefault()}}class Mf extends dc{_correctButton(l,f){return f===0&&l.ctrlKey||f===2}_move(l,f){const T=-.5*(f.y-l.y);if(T)return this._active=!0,{pitchDelta:T}}contextmenu(l){l.preventDefault()}}class dd{constructor(l,f){this._minTouches=l.cooperativeGestures?2:1,this._clickTolerance=l.clickTolerance||1,this._map=f,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(l,f,T){return this._calculateTransform(l,f,T)}touchmove(l,f,T){if(this._map._cooperativeGestures&&(this._minTouches===2&&T.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(l,!1,T.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(T.length<this._minTouches))return l.preventDefault(),this._calculateTransform(l,f,T)}touchend(l,f,T){this._calculateTransform(l,f,T),this._active&&T.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,f,T){T.length>0&&(this._active=!0);const D=uc(T,f),V=new s.pointGeometry(0,0),re=new s.pointGeometry(0,0);let pe=0;for(const Ae in D){const Be=D[Ae],Ge=this._touches[Ae];Ge&&(V._add(Be),re._add(Be.sub(Ge)),pe++,D[Ae]=Be)}if(this._touches=D,pe<this._minTouches||!re.mag())return;const ye=re.div(pe);return this._sum._add(ye),this._sum.mag()<this._clickTolerance?void 0:{around:V.div(pe),panDelta:ye}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(l){}_move(l,f,T){return{}}touchstart(l,f,T){this._firstTwoTouches||T.length<2||(this._firstTwoTouches=[T[0].identifier,T[1].identifier],this._start([f[0],f[1]]))}touchmove(l,f,T){if(!this._firstTwoTouches)return;l.preventDefault();const[D,V]=this._firstTwoTouches,re=hd(T,f,D),pe=hd(T,f,V);if(!re||!pe)return;const ye=this._aroundCenter?null:re.add(pe).div(2);return this._move([re,pe],ye,l)}touchend(l,f,T){if(!this._firstTwoTouches)return;const[D,V]=this._firstTwoTouches,re=hd(T,f,D),pe=hd(T,f,V);re&&pe||(this._active&&g.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function hd(I,l,f){for(let T=0;T<I.length;T++)if(I[T].identifier===f)return l[T]}function ri(I,l){return Math.log(I/l)/Math.LN2}class Af extends hc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,f){const T=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(ri(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ri(this._distance,T),pinchAround:f}}}function wy(I,l){return 180*I.angleWith(l)/Math.PI}class qx extends hc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,f){const T=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:wy(this._vector,T),pinchAround:f}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const f=25/(Math.PI*this._minDiameter)*360,T=wy(l,this._startVector);return Math.abs(T)<f}}function pd(I){return Math.abs(I.y)>Math.abs(I.x)}class _y extends hc{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,f,T){super.touchstart(l,f,T),this._currentTouchCount=T.length}_start(l){this._lastPoints=l,pd(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,f,T){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const D=l[0].sub(this._lastPoints[0]),V=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(D,V,T.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(D.y+V.y)/2*-.5}):void 0}gestureBeginsVertically(l,f,T){if(this._valid!==void 0)return this._valid;const D=l.mag()>=2,V=f.mag()>=2;if(!D&&!V)return;if(!D||!V)return this._firstMove===void 0&&(this._firstMove=T),T-this._firstMove<100&&void 0;const re=l.y>0==f.y>0;return pd(l)&&pd(f)&&re}}const Cy={panStep:100,bearingStep:15,pitchStep:10};class Wx{constructor(){const l=Cy;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let f=0,T=0,D=0,V=0,re=0;switch(l.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:l.shiftKey?T=-1:(l.preventDefault(),V=-1);break;case 39:l.shiftKey?T=1:(l.preventDefault(),V=1);break;case 38:l.shiftKey?D=1:(l.preventDefault(),re=-1);break;case 40:l.shiftKey?D=-1:(l.preventDefault(),re=1);break;default:return}return this._rotationDisabled&&(T=0,D=0),{cameraAnimation:pe=>{const ye=pe.getZoom();pe.easeTo({duration:300,easeId:"keyboardHandler",easing:Yx,zoom:f?Math.round(ye)+f*(l.shiftKey?2:1):ye,bearing:pe.getBearing()+T*this._bearingStep,pitch:pe.getPitch()+D*this._pitchStep,offset:[-V*this._panStep,-re*this._panStep],center:pe.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Yx(I){return I*(2-I)}const zh=4.000244140625;class If{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._handler=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;l.preventDefault()}let f=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const T=s.exported.now(),D=T-(this._lastWheelEventTime||0);this._lastWheelEventTime=T,f!==0&&f%zh==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":D>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(D*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),l.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=l,this._delta-=f,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=g.mousePos(this._el,l);this._around=s.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(f)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;if(this._delta!==0){const pe=this._type==="wheel"&&Math.abs(this._delta)>zh?this._wheelZoomRate:this._defaultZoomRate;let ye=2/(1+Math.exp(-Math.abs(this._delta*pe)));this._delta<0&&ye!==0&&(ye=1/ye);const Ae=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):l.scale;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(Ae*ye))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const f=typeof this._targetZoom=="number"?this._targetZoom:l.zoom,T=this._startZoom,D=this._easing;let V,re=!1;if(this._type==="wheel"&&T&&D){const pe=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),ye=D(pe);V=s.number(T,f,ye),pe<1?this._frameId||(this._frameId=!0):re=!0}else V=f,re=!0;return this._active=!0,re&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!re,zoomDelta:V-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let f=s.ease;if(this._prevEase){const T=this._prevEase,D=(s.exported.now()-T.start)/T.duration,V=T.easing(D+.01)-T.easing(D),re=.27/Math.sqrt(V*V+1e-4)*.01,pe=Math.sqrt(.0729-re*re);f=s.bezier(re,pe,.25,1)}return this._prevEase={start:s.exported.now(),duration:l,easing:f},f}reset(){this._active=!1}}class Pf{constructor(l,f){this._clickZoom=l,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Df{constructor(){this.reset()}reset(){this._active=!1}dblclick(l,f){return l.preventDefault(),{cameraAnimation:T=>{T.easeTo({duration:300,zoom:T.getZoom()+(l.shiftKey?-1:1),around:T.unproject(f)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wa{constructor(){this._tap=new kf({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(l,f,T){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?T.length>0&&(this._swipePoint=f[0],this._swipeTouch=T[0].identifier):this._tap.touchstart(l,f,T))}touchmove(l,f,T){if(this._tapTime){if(this._swipePoint){if(T[0].identifier!==this._swipeTouch)return;const D=f[0],V=D.y-this._swipePoint.y;return this._swipePoint=D,l.preventDefault(),this._active=!0,{zoomDelta:V/128}}}else this._tap.touchmove(l,f,T)}touchend(l,f,T){this._tapTime?this._swipePoint&&T.length===0&&this.reset():this._tap.touchend(l,f,T)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kl{constructor(l,f,T){this._el=l,this._mousePan=f,this._touchPan=T}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ty{constructor(l,f,T){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=f,this._mousePitch=T}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Rf{constructor(l,f,T,D){this._el=l,this._touchZoom=f,this._touchRotate=T,this._tapDragZoom=D,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Qc=I=>I.zoom||I.drag||I.pitch||I.rotate;class Lf extends s.Event{}function Oh(I){return I.panDelta&&I.panDelta.mag()||I.zoomDelta||I.bearingDelta||I.pitchDelta}class ro{constructor(l,f){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new vy(l),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(f),s.bindAll(["handleEvent","handleWindowEvent"],this);const T=this._el;this._listeners=[[T,"touchstart",{passive:!0}],[T,"touchmove",{passive:!1}],[T,"touchend",void 0],[T,"touchcancel",void 0],[T,"mousedown",void 0],[T,"mousemove",void 0],[T,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[T,"mouseover",void 0],[T,"mouseout",void 0],[T,"dblclick",void 0],[T,"click",void 0],[T,"keydown",{capture:!1}],[T,"keyup",void 0],[T,"wheel",{passive:!1}],[T,"contextmenu",void 0],[window,"blur",void 0]];for(const[D,V,re]of this._listeners)g.addEventListener(D,V,D===document?this.handleWindowEvent:this.handleEvent,re)}destroy(){for(const[l,f,T]of this._listeners)g.removeEventListener(l,f,l===document?this.handleWindowEvent:this.handleEvent,T)}_addDefaultHandlers(l){const f=this._map,T=f.getCanvasContainer();this._add("mapEvent",new Sl(f,l));const D=f.boxZoom=new cc(f,l);this._add("boxZoom",D);const V=new Hx,re=new Df;f.doubleClickZoom=new Pf(re,V),this._add("tapZoom",V),this._add("clickZoom",re);const pe=new wa;this._add("tapDragZoom",pe);const ye=f.touchPitch=new _y(f);this._add("touchPitch",ye);const Ae=new hi(l),Be=new Mf(l);f.dragRotate=new Ty(l,Ae,Be),this._add("mouseRotate",Ae,["mousePitch"]),this._add("mousePitch",Be,["mouseRotate"]);const Ge=new El(l),Ye=new dd(l,f);f.dragPan=new kl(T,Ge,Ye),this._add("mousePan",Ge),this._add("touchPan",Ye,["touchZoom","touchRotate"]);const it=new qx,Je=new Af;f.touchZoomRotate=new Rf(T,Je,it,pe),this._add("touchRotate",it,["touchPan","touchZoom"]),this._add("touchZoom",Je,["touchPan","touchRotate"]);const tt=f.scrollZoom=new If(f,this);this._add("scrollZoom",tt,["mousePan"]);const pt=f.keyboard=new Wx;this._add("keyboard",pt),this._add("blockableMapEvent",new xy(f));for(const vt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[vt]&&f[vt].enable(l[vt])}_add(l,f,T){this._handlers.push({handlerName:l,handler:f,allowed:T}),this._handlersById[l]=f}stop(l){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Qc(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,f,T){for(const D in l)if(D!==T&&(!f||f.indexOf(D)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const f=[];for(const T of l)this._el.contains(T.target)&&f.push(T);return f}handleEvent(l,f){if(l.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=l.type==="renderFrame"?void 0:l,D={needsRenderFrame:!1},V={},re={},pe=l.touches,ye=pe?this._getMapTouches(pe):void 0,Ae=ye?g.touchPos(this._el,ye):g.mousePos(this._el,l);for(const{handlerName:Ye,handler:it,allowed:Je}of this._handlers){if(!it.isEnabled())continue;let tt;this._blockedByActive(re,Je,Ye)?it.reset():it[f||l.type]&&(tt=it[f||l.type](l,Ae,ye),this.mergeHandlerResult(D,V,tt,Ye,T),tt&&tt.needsRenderFrame&&this._triggerRenderFrame()),(tt||it.isActive())&&(re[Ye]=it)}const Be={};for(const Ye in this._previousActiveHandlers)re[Ye]||(Be[Ye]=T);this._previousActiveHandlers=re,(Object.keys(Be).length||Oh(D))&&(this._changes.push([D,V,Be]),this._triggerRenderFrame()),(Object.keys(re).length||Oh(D))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ge}=D;Ge&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ge(this._map))}mergeHandlerResult(l,f,T,D,V){if(!T)return;s.extend(l,T);const re={handlerName:D,originalEvent:T.originalEvent||V};T.zoomDelta!==void 0&&(f.zoom=re),T.panDelta!==void 0&&(f.drag=re),T.pitchDelta!==void 0&&(f.pitch=re),T.bearingDelta!==void 0&&(f.rotate=re)}_applyChanges(){const l={},f={},T={};for(const[D,V,re]of this._changes)D.panDelta&&(l.panDelta=(l.panDelta||new s.pointGeometry(0,0))._add(D.panDelta)),D.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+D.zoomDelta),D.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+D.bearingDelta),D.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+D.pitchDelta),D.around!==void 0&&(l.around=D.around),D.pinchAround!==void 0&&(l.pinchAround=D.pinchAround),D.noInertia&&(l.noInertia=D.noInertia),s.extend(f,V),s.extend(T,re);this._updateMapTransform(l,f,T),this._changes=[]}_updateMapTransform(l,f,T){const D=this._map,V=D.transform,re=D.style&&D.style.terrain;if(!(Oh(l)||re&&this._drag))return this._fireEvents(f,T,!0);let{panDelta:pe,zoomDelta:ye,bearingDelta:Ae,pitchDelta:Be,around:Ge,pinchAround:Ye}=l;Ye!==void 0&&(Ge=Ye),D._stop(!0),Ge=Ge||D.transform.centerPoint;const it=V.pointLocation(pe?Ge.sub(pe):Ge);Ae&&(V.bearing+=Ae),Be&&(V.pitch+=Be),ye&&(V.zoom+=ye),re?f.drag&&!this._drag?(this._drag={center:V.centerPoint,lngLat:V.pointLocation(Ge),point:Ge,handlerName:f.drag.handlerName},D.fire(new s.Event("freezeElevation",{freeze:!0}))):this._drag&&T[this._drag.handlerName]?(D.fire(new s.Event("freezeElevation",{freeze:!1})),this._drag=null):f.drag&&this._drag&&(V.center=V.pointLocation(V.centerPoint.sub(pe))):V.setLocationAtPoint(it,Ge),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(f,T,!0)}_fireEvents(l,f,T){const D=Qc(this._eventsInProgress),V=Qc(l),re={};for(const Be in l){const{originalEvent:Ge}=l[Be];this._eventsInProgress[Be]||(re[`${Be}start`]=Ge),this._eventsInProgress[Be]=l[Be]}!D&&V&&this._fireEvent("movestart",V.originalEvent);for(const Be in re)this._fireEvent(Be,re[Be]);V&&this._fireEvent("move",V.originalEvent);for(const Be in l){const{originalEvent:Ge}=l[Be];this._fireEvent(Be,Ge)}const pe={};let ye;for(const Be in this._eventsInProgress){const{handlerName:Ge,originalEvent:Ye}=this._eventsInProgress[Be];this._handlersById[Ge].isActive()||(delete this._eventsInProgress[Be],ye=f[Ge]||Ye,pe[`${Be}end`]=ye)}for(const Be in pe)this._fireEvent(Be,pe[Be]);const Ae=Qc(this._eventsInProgress);if(T&&(D||V)&&!Ae){this._updatingCamera=!0;const Be=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ge=Ye=>Ye!==0&&-this._bearingSnap<Ye&&Ye<this._bearingSnap;Be?(Ge(Be.bearing||this._map.getBearing())&&(Be.bearing=0),this._map.easeTo(Be,{originalEvent:ye})):(this._map.fire(new s.Event("moveend",{originalEvent:ye})),Ge(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,f){this._map.fire(new s.Event(l,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{delete this._frameId,this.handleEvent(new Lf("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const bn={extend:(I,...l)=>s.extend(I,...l),run(I){I()},logToElement(I,l=!1,f="log"){const T=window.document.getElementById(f);T&&(l&&(T.innerHTML=""),T.innerHTML+=`<br>${I}`)}};class jh extends s.Evented{constructor(l,f){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=f.bearingSnap,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,f){return this.jumpTo({center:l},f)}panBy(l,f,T){return l=s.pointGeometry.convert(l).mult(-1),this.panTo(this.transform.center,s.extend({offset:l},f),T)}panTo(l,f,T){return this.easeTo(s.extend({center:l},f),T)}getZoom(){return this.transform.zoom}setZoom(l,f){return this.jumpTo({zoom:l},f),this}zoomTo(l,f,T){return this.easeTo(s.extend({zoom:l},f),T)}zoomIn(l,f){return this.zoomTo(this.getZoom()+1,l,f),this}zoomOut(l,f){return this.zoomTo(this.getZoom()-1,l,f),this}getBearing(){return this.transform.bearing}setBearing(l,f){return this.jumpTo({bearing:l},f),this}getPadding(){return this.transform.padding}setPadding(l,f){return this.jumpTo({padding:l},f),this}rotateTo(l,f,T){return this.easeTo(s.extend({bearing:l},f),T)}resetNorth(l,f){return this.rotateTo(0,s.extend({duration:1e3},l),f),this}resetNorthPitch(l,f){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},l),f),this}snapToNorth(l,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,f):this}getPitch(){return this.transform.pitch}setPitch(l,f){return this.jumpTo({pitch:l},f),this}cameraForBounds(l,f){l=s.LngLatBounds.convert(l);const T=f&&f.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),T,f)}_cameraForBoxAndBearing(l,f,T,D){const V={top:0,bottom:0,right:0,left:0};if(typeof(D=s.extend({padding:V,offset:[0,0],maxZoom:this.transform.maxZoom},D)).padding=="number"){const Et=D.padding;D.padding={top:Et,bottom:Et,right:Et,left:Et}}D.padding=s.extend(V,D.padding);const re=this.transform,pe=re.padding,ye=re.project(s.LngLat.convert(l)),Ae=re.project(s.LngLat.convert(f)),Be=ye.rotate(-T*Math.PI/180),Ge=Ae.rotate(-T*Math.PI/180),Ye=new s.pointGeometry(Math.max(Be.x,Ge.x),Math.max(Be.y,Ge.y)),it=new s.pointGeometry(Math.min(Be.x,Ge.x),Math.min(Be.y,Ge.y)),Je=Ye.sub(it),tt=(re.width-(pe.left+pe.right+D.padding.left+D.padding.right))/Je.x,pt=(re.height-(pe.top+pe.bottom+D.padding.top+D.padding.bottom))/Je.y;if(pt<0||tt<0)return void s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const vt=Math.min(re.scaleZoom(re.scale*Math.min(tt,pt)),D.maxZoom),Ct=s.pointGeometry.convert(D.offset),st=new s.pointGeometry((D.padding.left-D.padding.right)/2,(D.padding.top-D.padding.bottom)/2).rotate(T*Math.PI/180),It=Ct.add(st).mult(re.scale/re.zoomScale(vt));return{center:re.unproject(ye.add(Ae).div(2).sub(It)),zoom:vt,bearing:T}}fitBounds(l,f,T){return this._fitInternal(this.cameraForBounds(l,f),f,T)}fitScreenCoordinates(l,f,T,D,V){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.pointGeometry.convert(l)),this.transform.pointLocation(s.pointGeometry.convert(f)),T,D),D,V)}_fitInternal(l,f,T){return l?(delete(f=s.extend(l,f)).padding,f.linear?this.easeTo(f,T):this.flyTo(f,T)):this}jumpTo(l,f){this.stop();const T=this.transform;let D=!1,V=!1,re=!1;return"zoom"in l&&T.zoom!==+l.zoom&&(D=!0,T.zoom=+l.zoom),l.center!==void 0&&(T.center=s.LngLat.convert(l.center)),"bearing"in l&&T.bearing!==+l.bearing&&(V=!0,T.bearing=+l.bearing),"pitch"in l&&T.pitch!==+l.pitch&&(re=!0,T.pitch=+l.pitch),l.padding==null||T.isPaddingEqual(l.padding)||(T.padding=l.padding),this.fire(new s.Event("movestart",f)).fire(new s.Event("move",f)),D&&this.fire(new s.Event("zoomstart",f)).fire(new s.Event("zoom",f)).fire(new s.Event("zoomend",f)),V&&this.fire(new s.Event("rotatestart",f)).fire(new s.Event("rotate",f)).fire(new s.Event("rotateend",f)),re&&this.fire(new s.Event("pitchstart",f)).fire(new s.Event("pitch",f)).fire(new s.Event("pitchend",f)),this.fire(new s.Event("moveend",f))}calculateCameraOptionsFromTo(l,f,T,D=0){const V=s.MercatorCoordinate.fromLngLat(l,f),re=s.MercatorCoordinate.fromLngLat(T,D),pe=re.x-V.x,ye=re.y-V.y,Ae=re.z-V.z,Be=Math.hypot(pe,ye,Ae);if(Be===0)throw new Error("Can't calculate camera options with same From and To");const Ge=Math.hypot(pe,ye),Ye=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Be/this.transform.tileSize),it=180*Math.atan2(pe,-ye)/Math.PI;let Je=180*Math.acos(Ge/Be)/Math.PI;return Je=Ae<0?90-Je:90+Je,{center:re.toLngLat(),zoom:Ye,pitch:Je,bearing:it}}easeTo(l,f){this._stop(!1,l.easeId),((l=s.extend({offset:[0,0],duration:500,easing:s.ease},l)).animate===!1||!l.essential&&s.exported.prefersReducedMotion)&&(l.duration=0);const T=this.transform,D=this.getZoom(),V=this.getBearing(),re=this.getPitch(),pe=this.getPadding(),ye="zoom"in l?+l.zoom:D,Ae="bearing"in l?this._normalizeBearing(l.bearing,V):V,Be="pitch"in l?+l.pitch:re,Ge="padding"in l?l.padding:T.padding,Ye=s.pointGeometry.convert(l.offset);let it=T.centerPoint.add(Ye);const Je=T.pointLocation(it),tt=s.LngLat.convert(l.center||Je);this._normalizeCenter(tt);const pt=T.project(Je),vt=T.project(tt).sub(pt),Ct=T.zoomScale(ye-D);let st,It;l.around&&(st=s.LngLat.convert(l.around),It=T.locationPoint(st));const Et={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ye!==D,this._rotating=this._rotating||V!==Ae,this._pitching=this._pitching||Be!==re,this._padding=!T.isPaddingEqual(Ge),this._easeId=l.easeId,this._prepareEase(f,l.noMoveStart,Et),this._ease(Ot=>{if(this._zooming&&(T.zoom=s.number(D,ye,Ot)),this._rotating&&(T.bearing=s.number(V,Ae,Ot)),this._pitching&&(T.pitch=s.number(re,Be,Ot)),this._padding&&(T.interpolatePadding(pe,Ge,Ot),it=T.centerPoint.add(Ye)),st)T.setLocationAtPoint(st,It);else{const jt=T.zoomScale(T.zoom-D),Vt=ye>D?Math.min(2,Ct):Math.max(.5,Ct),Lt=Math.pow(Vt,1-Ot),li=T.unproject(pt.add(vt.mult(Ot*Lt)).mult(jt));T.setLocationAtPoint(T.renderWorldCopies?li.wrap():li,it)}this._fireMoveEvents(f)},Ot=>{this._afterEase(f,Ot)},l),this}_prepareEase(l,f,T={}){this._moving=!0,this.fire(new s.Event("freezeElevation",{freeze:!0})),f||T.moving||this.fire(new s.Event("movestart",l)),this._zooming&&!T.zooming&&this.fire(new s.Event("zoomstart",l)),this._rotating&&!T.rotating&&this.fire(new s.Event("rotatestart",l)),this._pitching&&!T.pitching&&this.fire(new s.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new s.Event("move",l)),this._zooming&&this.fire(new s.Event("zoom",l)),this._rotating&&this.fire(new s.Event("rotate",l)),this._pitching&&this.fire(new s.Event("pitch",l))}_afterEase(l,f){if(this._easeId&&f&&this._easeId===f)return;delete this._easeId,this.fire(new s.Event("freezeElevation",{freeze:!1}));const T=this._zooming,D=this._rotating,V=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,T&&this.fire(new s.Event("zoomend",l)),D&&this.fire(new s.Event("rotateend",l)),V&&this.fire(new s.Event("pitchend",l)),this.fire(new s.Event("moveend",l))}flyTo(l,f){if(!l.essential&&s.exported.prefersReducedMotion){const Pi=s.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Pi,f)}this.stop(),l=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},l);const T=this.transform,D=this.getZoom(),V=this.getBearing(),re=this.getPitch(),pe=this.getPadding(),ye="zoom"in l?s.clamp(+l.zoom,T.minZoom,T.maxZoom):D,Ae="bearing"in l?this._normalizeBearing(l.bearing,V):V,Be="pitch"in l?+l.pitch:re,Ge="padding"in l?l.padding:T.padding,Ye=T.zoomScale(ye-D),it=s.pointGeometry.convert(l.offset);let Je=T.centerPoint.add(it);const tt=T.pointLocation(Je),pt=s.LngLat.convert(l.center||tt);this._normalizeCenter(pt);const vt=T.project(tt),Ct=T.project(pt).sub(vt);let st=l.curve;const It=Math.max(T.width,T.height),Et=It/Ye,Ot=Ct.mag();if("minZoom"in l){const Pi=s.clamp(Math.min(l.minZoom,D,ye),T.minZoom,T.maxZoom),qr=It/T.zoomScale(Pi-D);st=Math.sqrt(qr/Ot*2)}const jt=st*st;function Vt(Pi){const qr=(Et*Et-It*It+(Pi?-1:1)*jt*jt*Ot*Ot)/(2*(Pi?Et:It)*jt*Ot);return Math.log(Math.sqrt(qr*qr+1)-qr)}function Lt(Pi){return(Math.exp(Pi)-Math.exp(-Pi))/2}function li(Pi){return(Math.exp(Pi)+Math.exp(-Pi))/2}const Kt=Vt(0);let ui=function(Pi){return li(Kt)/li(Kt+st*Pi)},tr=function(Pi){return It*((li(Kt)*(Lt(qr=Kt+st*Pi)/li(qr))-Lt(Kt))/jt)/Ot;var qr},ur=(Vt(1)-Kt)/st;if(Math.abs(Ot)<1e-6||!isFinite(ur)){if(Math.abs(It-Et)<1e-6)return this.easeTo(l,f);const Pi=Et<It?-1:1;ur=Math.abs(Math.log(Et/It))/st,tr=function(){return 0},ui=function(qr){return Math.exp(Pi*st*qr)}}return l.duration="duration"in l?+l.duration:1e3*ur/("screenSpeed"in l?+l.screenSpeed/st:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=V!==Ae,this._pitching=Be!==re,this._padding=!T.isPaddingEqual(Ge),this._prepareEase(f,!1),this._ease(Pi=>{const qr=Pi*ur,Wr=1/ui(qr);T.zoom=Pi===1?ye:D+T.scaleZoom(Wr),this._rotating&&(T.bearing=s.number(V,Ae,Pi)),this._pitching&&(T.pitch=s.number(re,Be,Pi)),this._padding&&(T.interpolatePadding(pe,Ge,Pi),Je=T.centerPoint.add(it));const Cr=Pi===1?pt:T.unproject(vt.add(Ct.mult(tr(qr))).mult(Wr));T.setLocationAtPoint(T.renderWorldCopies?Cr.wrap():Cr,Je),this._fireMoveEvents(f)},()=>this._afterEase(f),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,f){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const T=this._onEaseEnd;delete this._onEaseEnd,T.call(this,f)}if(!l){const T=this.handlers;T&&T.stop(!1)}return this}_ease(l,f,T){T.animate===!1||T.duration===0?(l(1),f()):(this._easeStart=s.exported.now(),this._easeOptions=T,this._onEaseFrame=l,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,f){l=s.wrap(l,-180,180);const T=Math.abs(l-f);return Math.abs(l-360-f)<T&&(l-=360),Math.abs(l+360-f)<T&&(l+=360),l}_normalizeCenter(l){const f=this.transform;if(!f.renderWorldCopies||f.lngRange)return;const T=l.lng-f.center.lng;l.lng+=T>180?-360:T<-180?360:0}}class Fh{constructor(l={}){this.options=l,s.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options&&this.options.compact,this._container=g.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=g.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=g.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){g.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,f){const T=this._map._getUIString(`AttributionControl.${f}`);l.title=T,l.setAttribute("aria-label",T)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(D=>typeof D!="string"?"":D)):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const D=this._map.style.stylesheet;this.styleOwner=D.owner,this.styleId=D.id}const f=this._map.style.sourceCaches;for(const D in f){const V=f[D];if(V.used||V.usedForTerrain){const re=V.getSource();re.attribution&&l.indexOf(re.attribution)<0&&l.push(re.attribution)}}l=l.filter(D=>String(D).trim()),l.sort((D,V)=>D.length-V.length),l=l.filter((D,V)=>{for(let re=V+1;re<l.length;re++)if(l[re].indexOf(D)>=0)return!1;return!0});const T=l.join(" | ");T!==this._attribHTML&&(this._attribHTML=T,l.length?(this._innerContainer.innerHTML=T,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Nf{constructor(l={}){this.options=l,s.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=g.create("div","maplibregl-ctrl mapboxgl-ctrl");const f=g.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://maplibre.org/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){g.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const l=this._container.children;if(l.length){const f=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact","mapboxgl-compact"):f.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Sy{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const f=++this._id;return this._queue.push({callback:l,id:f,cancelled:!1}),f}remove(l){const f=this._currentlyRunning,T=f?this._queue.concat(f):this._queue;for(const D of T)if(D.id===l)return void(D.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const f=this._currentlyRunning=this._queue;this._queue=[];for(const T of f)if(!T.cancelled&&(T.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Ey={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},Zx={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Bo={showCompass:!0,showZoom:!0,visualizePitch:!1};class Bh{constructor(l,f,T=!1){this._clickTolerance=10,this.element=f,this.mouseRotate=new hi({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,T&&(this.mousePitch=new Mf({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),g.addEventListener(f,"mousedown",this.mousedown),g.addEventListener(f,"touchstart",this.touchstart,{passive:!1}),g.addEventListener(f,"touchmove",this.touchmove),g.addEventListener(f,"touchend",this.touchend),g.addEventListener(f,"touchcancel",this.reset)}down(l,f){this.mouseRotate.mousedown(l,f),this.mousePitch&&this.mousePitch.mousedown(l,f),g.disableDrag()}move(l,f){const T=this.map,D=this.mouseRotate.mousemoveWindow(l,f);if(D&&D.bearingDelta&&T.setBearing(T.getBearing()+D.bearingDelta),this.mousePitch){const V=this.mousePitch.mousemoveWindow(l,f);V&&V.pitchDelta&&T.setPitch(T.getPitch()+V.pitchDelta)}}off(){const l=this.element;g.removeEventListener(l,"mousedown",this.mousedown),g.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),g.removeEventListener(l,"touchmove",this.touchmove),g.removeEventListener(l,"touchend",this.touchend),g.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){g.enableDrag(),g.removeEventListener(window,"mousemove",this.mousemove),g.removeEventListener(window,"mouseup",this.mouseup)}mousedown(l){this.down(s.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),g.mousePos(this.element,l)),g.addEventListener(window,"mousemove",this.mousemove),g.addEventListener(window,"mouseup",this.mouseup)}mousemove(l){this.move(l,g.mousePos(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=g.touchPos(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=g.touchPos(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Si(I,l,f){if(I=new s.LngLat(I.lng,I.lat),l){const T=new s.LngLat(I.lng-360,I.lat),D=new s.LngLat(I.lng+360,I.lat),V=f.locationPoint(I).distSqr(l);f.locationPoint(T).distSqr(l)<V?I=T:f.locationPoint(D).distSqr(l)<V&&(I=D)}for(;Math.abs(I.lng-f.center.lng)>180;){const T=f.locationPoint(I);if(T.x>=0&&T.y>=0&&T.x<=f.width&&T.y<=f.height)break;I.lng>f.center.lng?I.lng-=360:I.lng+=360}return I}const Li={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function fd(I,l,f){const T=I.classList;for(const D in Li)T.remove(`maplibregl-${f}-anchor-${D}`,`mapboxgl-${f}-anchor-${D}`);T.add(`maplibregl-${f}-anchor-${l}`,`mapboxgl-${f}-anchor-${l}`)}class md extends s.Evented{constructor(l,f){if(super(),(l instanceof HTMLElement||f)&&(l=s.extend({element:l},f)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,l&&l.element)this._element=l.element,this._offset=s.pointGeometry.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=g.create("div"),this._element.setAttribute("aria-label","Map marker");const T=g.createNS("http://www.w3.org/2000/svg","svg"),D=41,V=27;T.setAttributeNS(null,"display","block"),T.setAttributeNS(null,"height",`${D}px`),T.setAttributeNS(null,"width",`${V}px`),T.setAttributeNS(null,"viewBox",`0 0 ${V} ${D}`);const re=g.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"stroke","none"),re.setAttributeNS(null,"stroke-width","1"),re.setAttributeNS(null,"fill","none"),re.setAttributeNS(null,"fill-rule","evenodd");const pe=g.createNS("http://www.w3.org/2000/svg","g");pe.setAttributeNS(null,"fill-rule","nonzero");const ye=g.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ye.setAttributeNS(null,"fill","#000000");const Ae=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ct of Ae){const st=g.createNS("http://www.w3.org/2000/svg","ellipse");st.setAttributeNS(null,"opacity","0.04"),st.setAttributeNS(null,"cx","10.5"),st.setAttributeNS(null,"cy","5.80029008"),st.setAttributeNS(null,"rx",Ct.rx),st.setAttributeNS(null,"ry",Ct.ry),ye.appendChild(st)}const Be=g.createNS("http://www.w3.org/2000/svg","g");Be.setAttributeNS(null,"fill",this._color);const Ge=g.createNS("http://www.w3.org/2000/svg","path");Ge.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Be.appendChild(Ge);const Ye=g.createNS("http://www.w3.org/2000/svg","g");Ye.setAttributeNS(null,"opacity","0.25"),Ye.setAttributeNS(null,"fill","#000000");const it=g.createNS("http://www.w3.org/2000/svg","path");it.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ye.appendChild(it);const Je=g.createNS("http://www.w3.org/2000/svg","g");Je.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Je.setAttributeNS(null,"fill","#FFFFFF");const tt=g.createNS("http://www.w3.org/2000/svg","g");tt.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pt=g.createNS("http://www.w3.org/2000/svg","circle");pt.setAttributeNS(null,"fill","#000000"),pt.setAttributeNS(null,"opacity","0.25"),pt.setAttributeNS(null,"cx","5.5"),pt.setAttributeNS(null,"cy","5.5"),pt.setAttributeNS(null,"r","5.4999962");const vt=g.createNS("http://www.w3.org/2000/svg","circle");vt.setAttributeNS(null,"fill","#FFFFFF"),vt.setAttributeNS(null,"cx","5.5"),vt.setAttributeNS(null,"cy","5.5"),vt.setAttributeNS(null,"r","5.4999962"),tt.appendChild(pt),tt.appendChild(vt),pe.appendChild(ye),pe.appendChild(Be),pe.appendChild(Ye),pe.appendChild(Je),pe.appendChild(tt),T.appendChild(pe),T.setAttributeNS(null,"height",D*this._scale+"px"),T.setAttributeNS(null,"width",V*this._scale+"px"),this._element.appendChild(T),this._offset=s.pointGeometry.convert(l&&l.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",T=>{T.preventDefault()}),this._element.addEventListener("mousedown",T=>{T.preventDefault()}),fd(this._element,this._anchor,"marker"),this._popup=null}addTo(l){return this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),g.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=s.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const D=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[D,-1*(38.1-13.5+D)],"bottom-right":[-D,-1*(38.1-13.5+D)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(l){const f=l.code,T=l.charCode||l.keyCode;f!=="Space"&&f!=="Enter"&&T!==32&&T!==13||this.togglePopup()}_onMapClick(l){const f=l.originalEvent.target,T=this._element;this._popup&&(f===T||T.contains(f))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?l.remove():l.addTo(this._map),this):this}_update(l){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Si(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let f="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?f=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(f=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),l&&l.type!=="moveend"||(this._pos=this._pos.round()),g.setTransform(this._element,`${Li[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${f}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const D=this._map.unproject(this._pos),V=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=D.distanceTo(this._lngLat)>20*V?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(l){return this._offset=s.pointGeometry.convert(l),this._update(),this}_onMove(l){if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(l){this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const zf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let os,pc=0,_a=!1;const Xx={maxWidth:100,unit:"metric"};function gd(I,l,f){const T=f&&f.maxWidth||100,D=I._container.clientHeight/2,V=I.unproject([0,D]),re=I.unproject([T,D]),pe=V.distanceTo(re);if(f&&f.unit==="imperial"){const ye=3.2808*pe;ye>5280?mn(l,T,ye/5280,I._getUIString("ScaleControl.Miles")):mn(l,T,ye,I._getUIString("ScaleControl.Feet"))}else f&&f.unit==="nautical"?mn(l,T,pe/1852,I._getUIString("ScaleControl.NauticalMiles")):pe>=1e3?mn(l,T,pe/1e3,I._getUIString("ScaleControl.Kilometers")):mn(l,T,pe,I._getUIString("ScaleControl.Meters"))}function mn(I,l,f,T){const D=function(V){const re=Math.pow(10,`${Math.floor(V)}`.length-1);let pe=V/re;return pe=pe>=10?10:pe>=5?5:pe>=3?3:pe>=2?2:pe>=1?1:function(ye){const Ae=Math.pow(10,Math.ceil(-Math.log(ye)/Math.LN10));return Math.round(ye*Ae)/Ae}(pe),re*pe}(f);I.style.width=l*(D/f)+"px",I.innerHTML=`${D}&nbsp;${T}`}const Jn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ky=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Jc(I){if(I){if(typeof I=="number"){const l=Math.round(Math.sqrt(.5*Math.pow(I,2)));return{center:new s.pointGeometry(0,0),top:new s.pointGeometry(0,I),"top-left":new s.pointGeometry(l,l),"top-right":new s.pointGeometry(-l,l),bottom:new s.pointGeometry(0,-I),"bottom-left":new s.pointGeometry(l,-l),"bottom-right":new s.pointGeometry(-l,-l),left:new s.pointGeometry(I,0),right:new s.pointGeometry(-I,0)}}if(I instanceof s.pointGeometry||Array.isArray(I)){const l=s.pointGeometry.convert(I);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:s.pointGeometry.convert(I.center||[0,0]),top:s.pointGeometry.convert(I.top||[0,0]),"top-left":s.pointGeometry.convert(I["top-left"]||[0,0]),"top-right":s.pointGeometry.convert(I["top-right"]||[0,0]),bottom:s.pointGeometry.convert(I.bottom||[0,0]),"bottom-left":s.pointGeometry.convert(I["bottom-left"]||[0,0]),"bottom-right":s.pointGeometry.convert(I["bottom-right"]||[0,0]),left:s.pointGeometry.convert(I.left||[0,0]),right:s.pointGeometry.convert(I.right||[0,0])}}return Jc(new s.pointGeometry(0,0))}const yd={supported:h,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends jh{constructor(I){var l;if(s.PerformanceUtils.mark(s.PerformanceMarkers.create),(I=s.extend({},Zx,I)).minZoom!=null&&I.maxZoom!=null&&I.minZoom>I.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(I.minPitch!=null&&I.maxPitch!=null&&I.minPitch>I.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(I.minPitch!=null&&I.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(I.maxPitch!=null&&I.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Nh(I.minZoom,I.maxZoom,I.minPitch,I.maxPitch,I.renderWorldCopies),{bearingSnap:I.bearingSnap}),this._interactive=I.interactive,this._cooperativeGestures=I.cooperativeGestures,this._maxTileCacheSize=I.maxTileCacheSize,this._failIfMajorPerformanceCaveat=I.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=I.preserveDrawingBuffer,this._antialias=I.antialias,this._trackResize=I.trackResize,this._bearingSnap=I.bearingSnap,this._refreshExpiredTiles=I.refreshExpiredTiles,this._fadeDuration=I.fadeDuration,this._crossSourceCollisions=I.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=I.collectResourceTiming,this._renderTaskQueue=new Sy,this._controls=[],this._mapId=s.uniqueId(),this._locale=s.extend({},Ey,I.locale),this._clickTolerance=I.clickTolerance,this._pixelRatio=(l=I.pixelRatio)!==null&&l!==void 0?l:devicePixelRatio,this._requestManager=new x(I.transformRequest),typeof I.container=="string"){if(this._container=document.getElementById(I.container),!this._container)throw new Error(`Container '${I.container}' not found.`)}else{if(!(I.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=I.container}if(I.maxBounds&&this.setMaxBounds(I.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ro(this,I),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=I.hash&&new fy(typeof I.hash=="string"&&I.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:I.center,zoom:I.zoom,bearing:I.bearing,pitch:I.pitch}),I.bounds&&(this.resize(),this.fitBounds(I.bounds,s.extend({},I.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=I.localIdeographFontFamily,I.style&&this.setStyle(I.style,{localIdeographFontFamily:I.localIdeographFontFamily}),I.attributionControl&&this.addControl(new Fh({customAttribution:I.customAttribution})),I.maplibreLogo&&this.addControl(new Nf,I.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",f=>{this._update(f.dataType==="style"),this.fire(new s.Event(`${f.dataType}data`,f))}),this.on("dataloading",f=>{this.fire(new s.Event(`${f.dataType}dataloading`,f))}),this.on("dataabort",f=>{this.fire(new s.Event("sourcedataabort",f))})}_getMapId(){return this._mapId}addControl(I,l){if(l===void 0&&(l=I.getDefaultPosition?I.getDefaultPosition():"top-right"),!I||!I.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=I.onAdd(this);this._controls.push(I);const T=this._controlPositions[l];return l.indexOf("bottom")!==-1?T.insertBefore(f,T.firstChild):T.appendChild(f),this}removeControl(I){if(!I||!I.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(I);return l>-1&&this._controls.splice(l,1),I.onRemove(this),this}hasControl(I){return this._controls.indexOf(I)>-1}calculateCameraOptionsFromTo(I,l,f,T){return T==null&&this.style.terrain&&(T=this.transform.getElevation(f,this.style.terrain)),super.calculateCameraOptionsFromTo(I,l,f,T)}resize(I){const l=this._containerDimensions(),f=l[0],T=l[1];this._resizeCanvas(f,T,this.getPixelRatio()),this.transform.resize(f,T),this.painter.resize(f,T,this.getPixelRatio());const D=!this._moving;return D&&(this.stop(),this.fire(new s.Event("movestart",I)).fire(new s.Event("move",I))),this.fire(new s.Event("resize",I)),D&&this.fire(new s.Event("moveend",I)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(I){const[l,f]=this._containerDimensions();this._pixelRatio=I,this._resizeCanvas(l,f,I),this.painter.resize(l,f,I)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(I){return this.transform.setMaxBounds(s.LngLatBounds.convert(I)),this._update()}setMinZoom(I){if((I=I??-2)>=-2&&I<=this.transform.maxZoom)return this.transform.minZoom=I,this._update(),this.getZoom()<I&&this.setZoom(I),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(I){if((I=I??22)>=this.transform.minZoom)return this.transform.maxZoom=I,this._update(),this.getZoom()>I&&this.setZoom(I),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(I){if((I=I??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(I>=0&&I<=this.transform.maxPitch)return this.transform.minPitch=I,this._update(),this.getPitch()<I&&this.setPitch(I),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(I){if((I=I??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(I>=this.transform.minPitch)return this.transform.maxPitch=I,this._update(),this.getPitch()>I&&this.setPitch(I),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(I){return this.transform.renderWorldCopies=I,this._update()}project(I){return this.transform.locationPoint(s.LngLat.convert(I),this.style&&this.style.terrain)}unproject(I){return this.transform.pointLocation(s.pointGeometry.convert(I),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(I,l,f){if(I==="mouseenter"||I==="mouseover"){let T=!1;return{layer:l,listener:f,delegates:{mousemove:V=>{const re=this.getLayer(l)?this.queryRenderedFeatures(V.point,{layers:[l]}):[];re.length?T||(T=!0,f.call(this,new Oa(I,this,V.originalEvent,{features:re}))):T=!1},mouseout:()=>{T=!1}}}}if(I==="mouseleave"||I==="mouseout"){let T=!1;return{layer:l,listener:f,delegates:{mousemove:re=>{(this.getLayer(l)?this.queryRenderedFeatures(re.point,{layers:[l]}):[]).length?T=!0:T&&(T=!1,f.call(this,new Oa(I,this,re.originalEvent)))},mouseout:re=>{T&&(T=!1,f.call(this,new Oa(I,this,re.originalEvent)))}}}}{const T=D=>{const V=this.getLayer(l)?this.queryRenderedFeatures(D.point,{layers:[l]}):[];V.length&&(D.features=V,f.call(this,D),delete D.features)};return{layer:l,listener:f,delegates:{[I]:T}}}}on(I,l,f){if(f===void 0)return super.on(I,l);const T=this._createDelegatedListener(I,l,f);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[I]=this._delegatedListeners[I]||[],this._delegatedListeners[I].push(T);for(const D in T.delegates)this.on(D,T.delegates[D]);return this}once(I,l,f){if(f===void 0)return super.once(I,l);const T=this._createDelegatedListener(I,l,f);for(const D in T.delegates)this.once(D,T.delegates[D]);return this}off(I,l,f){return f===void 0?super.off(I,l):(this._delegatedListeners&&this._delegatedListeners[I]&&(T=>{const D=this._delegatedListeners[I];for(let V=0;V<D.length;V++){const re=D[V];if(re.layer===l&&re.listener===f){for(const pe in re.delegates)this.off(pe,re.delegates[pe]);return D.splice(V,1),this}}})(),this)}queryRenderedFeatures(I,l){if(!this.style)return[];let f;if(l!==void 0||I===void 0||I instanceof s.pointGeometry||Array.isArray(I)||(l=I,I=void 0),l=l||{},(I=I||[[0,0],[this.transform.width,this.transform.height]])instanceof s.pointGeometry||typeof I[0]=="number")f=[s.pointGeometry.convert(I)];else{const T=s.pointGeometry.convert(I[0]),D=s.pointGeometry.convert(I[1]);f=[T,new s.pointGeometry(D.x,T.y),D,new s.pointGeometry(T.x,D.y),T]}return this.style.queryRenderedFeatures(f,l,this.transform)}querySourceFeatures(I,l){return this.style.querySourceFeatures(I,l)}setStyle(I,l){return(l=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&I?(this._diffStyle(I,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(I,l))}setTransformRequest(I){return this._requestManager.setTransformRequest(I),this}_getUIString(I){const l=this._locale[I];if(l==null)throw new Error(`Missing UI string '${I}'`);return l}_updateStyle(I,l){return this.style&&(this.style.setEventedParent(null),this.style._remove()),I?(this.style=new br(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof I=="string"?this.style.loadURL(I):this.style.loadJSON(I),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new br(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(I,l){if(typeof I=="string"){const f=this._requestManager.transformRequest(I,s.ResourceType.Style);s.getJSON(f,(T,D)=>{T?this.fire(new s.ErrorEvent(T)):D&&this._updateDiff(D,l)})}else typeof I=="object"&&this._updateDiff(I,l)}_updateDiff(I,l){try{this.style.setState(I)&&this._update(!0)}catch(f){s.warnOnce(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(I,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.warnOnce("There is no style added to the map.")}addSource(I,l){return this._lazyInitEmptyStyle(),this.style.addSource(I,l),this._update(!0)}isSourceLoaded(I){const l=this.style&&this.style.sourceCaches[I];if(l!==void 0)return l.loaded();this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${I}'`)))}setTerrain(I){return this.style.setTerrain(I),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const I=this.style&&this.style.sourceCaches;for(const l in I){const f=I[l]._tiles;for(const T in f){const D=f[T];if(D.state!=="loaded"&&D.state!=="errored")return!1}}return!0}addSourceType(I,l,f){return this._lazyInitEmptyStyle(),this.style.addSourceType(I,l,f)}removeSource(I){return this.style.removeSource(I),this._update(!0)}getSource(I){return this.style.getSource(I)}addImage(I,l,{pixelRatio:f=1,sdf:T=!1,stretchX:D,stretchY:V,content:re}={}){if(this._lazyInitEmptyStyle(),l instanceof HTMLImageElement||s.isImageBitmap(l)){const{width:pe,height:ye,data:Ae}=s.exported.getImageData(l);this.style.addImage(I,{data:new s.RGBAImage({width:pe,height:ye},Ae),pixelRatio:f,stretchX:D,stretchY:V,content:re,sdf:T,version:0})}else{if(l.width===void 0||l.height===void 0)return this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:pe,height:ye,data:Ae}=l,Be=l;this.style.addImage(I,{data:new s.RGBAImage({width:pe,height:ye},new Uint8Array(Ae)),pixelRatio:f,stretchX:D,stretchY:V,content:re,sdf:T,version:0,userImage:Be}),Be.onAdd&&Be.onAdd(this,I)}}}updateImage(I,l){const f=this.style.getImage(I);if(!f)return this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const T=l instanceof HTMLImageElement||s.isImageBitmap(l)?s.exported.getImageData(l):l,{width:D,height:V,data:re}=T;if(D===void 0||V===void 0)return this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(D!==f.data.width||V!==f.data.height)return this.fire(new s.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const pe=!(l instanceof HTMLImageElement||s.isImageBitmap(l));f.data.replace(re,pe),this.style.updateImage(I,f)}hasImage(I){return I?!!this.style.getImage(I):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(I){this.style.removeImage(I)}loadImage(I,l){s.getImage(this._requestManager.transformRequest(I,s.ResourceType.Image),l)}listImages(){return this.style.listImages()}addLayer(I,l){return this._lazyInitEmptyStyle(),this.style.addLayer(I,l),this._update(!0)}moveLayer(I,l){return this.style.moveLayer(I,l),this._update(!0)}removeLayer(I){return this.style.removeLayer(I),this._update(!0)}getLayer(I){return this.style.getLayer(I)}setLayerZoomRange(I,l,f){return this.style.setLayerZoomRange(I,l,f),this._update(!0)}setFilter(I,l,f={}){return this.style.setFilter(I,l,f),this._update(!0)}getFilter(I){return this.style.getFilter(I)}setPaintProperty(I,l,f,T={}){return this.style.setPaintProperty(I,l,f,T),this._update(!0)}getPaintProperty(I,l){return this.style.getPaintProperty(I,l)}setLayoutProperty(I,l,f,T={}){return this.style.setLayoutProperty(I,l,f,T),this._update(!0)}getLayoutProperty(I,l){return this.style.getLayoutProperty(I,l)}setLight(I,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(I,l),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(I,l){return this.style.setFeatureState(I,l),this._update()}removeFeatureState(I,l){return this.style.removeFeatureState(I,l),this._update()}getFeatureState(I){return this.style.getFeatureState(I)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let I=0,l=0;return this._container&&(I=this._container.clientWidth||400,l=this._container.clientHeight||300),[I,l]}_setupContainer(){const I=this._container;I.classList.add("maplibregl-map","mapboxgl-map");const l=this._canvasContainer=g.create("div","maplibregl-canvas-container mapboxgl-canvas-container",I);this._interactive&&l.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=g.create("canvas","maplibregl-canvas mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const f=this._containerDimensions();this._resizeCanvas(f[0],f[1],this.getPixelRatio());const T=this._controlContainer=g.create("div","maplibregl-control-container mapboxgl-control-container",I),D=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(V=>{D[V]=g.create("div",`maplibregl-ctrl-${V} mapboxgl-ctrl-${V}`,T)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const I=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=g.create("div","maplibregl-cooperative-gesture-screen",I);let l="Control",f=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(f=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map",l="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${f}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",T=>{T.key===l&&(this._metaPress=!0)}),document.addEventListener("keyup",T=>{T.key===l&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",T=>{this._onCooperativeGesture(T,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(I,l,f){this._canvas.width=f*I,this._canvas.height=f*l,this._canvas.style.width=`${I}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const I=s.extend({},h.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._canvas.getContext("webgl",I)||this._canvas.getContext("experimental-webgl",I);l?(this.painter=new py(l,this.transform),s.exported$1.testSupport(l)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(I){I.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:I}))}_contextRestored(I){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:I}))}_onMapScroll(I){if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(I,l,f){return!l&&f<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(I){return this.style?(this._styleDirty=this._styleDirty||I,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(I){return this._update(),this._renderTaskQueue.add(I)}_cancelRenderFrame(I){this._renderTaskQueue.remove(I)}_render(I){let l,f=0;const T=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(l=T.createQueryEXT(),T.beginQueryEXT(T.TIME_ELAPSED_EXT,l),f=s.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(I),this._removed)return;let D=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const re=this.transform.zoom,pe=s.exported.now();this.style.zoomHistory.update(re,pe);const ye=new s.EvaluationParameters(re,{now:pe,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ae=ye.crossFadingFactor();Ae===1&&Ae===this._crossFadingFactor||(D=!0,this._crossFadingFactor=Ae),this.style.update(ye)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.PerformanceUtils.mark(s.PerformanceMarkers.load),this.fire(new s.Event("load"))),this.style&&(this.style.hasTransitions()||D)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const re=s.exported.now()-f;T.endQueryEXT(T.TIME_ELAPSED_EXT,l),setTimeout(()=>{const pe=T.getQueryObjectEXT(l,T.QUERY_RESULT_EXT)/1e6;T.deleteQueryEXT(l),this.fire(new s.Event("gpu-timing-frame",{cpuTime:re,gpuTime:pe}))},50)}if(this.listens("gpu-timing-layer")){const re=this.painter.collectGpuTimers();setTimeout(()=>{const pe=this.painter.queryGpuTimers(re);this.fire(new s.Event("gpu-timing-layer",{layerTimes:pe}))},50)}const V=this._sourcesDirty||this._styleDirty||this._placementDirty;return V||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.Event("idle")),!this._loaded||this._fullyLoaded||V||(this._fullyLoaded=!0,s.PerformanceUtils.mark(s.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const I=this.painter.context.gl.getExtension("WEBGL_lose_context");I&&I.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),g.remove(this._canvasContainer),g.remove(this._controlContainer),this._cooperativeGestures&&g.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),s.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=s.exported.frame(I=>{s.PerformanceUtils.frame(I),this._frame=null,this._render(I)}))}_onWindowOnline(){this._update()}_onWindowResize(I){this._trackResize&&this.resize({originalEvent:I})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())}get showPadding(){return!!this._showPadding}set showPadding(I){this._showPadding!==I&&(this._showPadding=I,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())}get repaint(){return!!this._repaint}set repaint(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(I){this._vertices=I,this._update()}_setCacheLimits(I,l){s.setCacheLimits(I,l)}get version(){return"2.4.0"}},NavigationControl:class{constructor(I){this.options=s.extend({},Bo,I),this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",l=>this._map.zoomIn({},{originalEvent:l})),g.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",l=>this._map.zoomOut({},{originalEvent:l})),g.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})}),this._compassIcon=g.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const I=this._map.getZoom(),l=I===this._map.getMaxZoom(),f=I===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())}_rotateCompassArrow(){const I=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=I}onAdd(I){return this._map=I,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Bh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){g.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(I,l){const f=g.create("button",I,this._container);return f.type="button",f.addEventListener("click",l),f}_setButtonTitle(I,l){const f=this._map._getUIString(`NavigationControl.${l}`);I.title=f,I.setAttribute("aria-label",f)}},GeolocateControl:class extends s.Evented{constructor(I){super(),this.options=s.extend({},zf,I),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(I){var l;return this._map=I,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),l=this._setupUI,os!==void 0?l(os):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(f=>{os=f.state!=="denied",l(os)}):(os=!!window.navigator.geolocation,l(os)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),g.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,pc=0,_a=!1}_isOutOfMapMaxBounds(I){const l=this._map.getMaxBounds(),f=I.coords;return l&&(f.longitude<l.getWest()||f.longitude>l.getEast()||f.latitude<l.getSouth()||f.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(I){if(this._map){if(this._isOutOfMapMaxBounds(I))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",I)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=I,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(I),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(I),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",I)),this._finish()}}_updateCamera(I){const l=new s.LngLat(I.coords.longitude,I.coords.latitude),f=I.coords.accuracy,T=this._map.getBearing(),D=s.extend({bearing:T},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(f),D,{geolocateSource:!0})}_updateMarker(I){if(I){const l=new s.LngLat(I.coords.longitude,I.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=I.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const I=this._map._container.clientHeight/2,l=this._map.unproject([0,I]),f=this._map.unproject([1,I]),T=l.distanceTo(f),D=Math.ceil(2*this._accuracy/T);this._circleElement.style.width=`${D}px`,this._circleElement.style.height=`${D}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(I){if(this._map){if(this.options.trackUserLocation)if(I.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(I.code===3&&_a)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",I)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(I){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=g.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),g.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",I===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=g.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new md(this._dotElement),this._circleElement=g.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new md({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":pc--,_a=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let I;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),pc++,pc>1?(I={maximumAge:6e5,timeout:0},_a=!0):(I=this.options.positionOptions,_a=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,I)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Fh,LogoControl:Nf,ScaleControl:class{constructor(I){this.options=s.extend({},Xx,I),s.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){gd(this._map,this._container,this.options)}onAdd(I){return this._map=I,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",I.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){g.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(I){this.options.unit=I,gd(this._map,this._container,this.options)}},FullscreenControl:class{constructor(I){this._fullscreen=!1,I&&I.container&&(I.container instanceof HTMLElement?this._container=I.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(I){return this._map=I,this._container||(this._container=this._map.getContainer()),this._controlContainer=g.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){g.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const I=this._fullscreenButton=g.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);g.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",I).setAttribute("aria-hidden","true"),I.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const I=this._getTitle();this._fullscreenButton.setAttribute("aria-label",I),this._fullscreenButton.title=I}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(I){this.options=I,s.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(I){return this._map=I,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=g.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),g.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){g.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends s.Evented{constructor(I){super(),this.options=s.extend(Object.create(Jn),I),s.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(I){return this._map&&this.remove(),this._map=I,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&g.remove(this._content),this._container&&(g.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(I){return this._lngLat=s.LngLat.convert(I),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(I){return this.setDOMContent(document.createTextNode(I))}setHTML(I){const l=document.createDocumentFragment(),f=document.createElement("body");let T;for(f.innerHTML=I;T=f.firstChild,T;)l.appendChild(T);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(I){return this.options.maxWidth=I,this._update(),this}setDOMContent(I){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=g.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(I),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(I){this._container&&this._container.classList.add(I)}removeClassName(I){this._container&&this._container.classList.remove(I)}setOffset(I){return this.options.offset=I,this._update(),this}toggleClassName(I){if(this._container)return this._container.classList.toggle(I)}_createCloseButton(){this.options.closeButton&&(this._closeButton=g.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(I){this._update(I.point)}_onMouseMove(I){this._update(I.point)}_onDrag(I){this._update(I.point)}_update(I){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=g.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=g.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(V=>this._container.classList.add(V)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Si(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!I))return;const l=this._pos=this._trackPointer&&I?I:this._map.project(this._lngLat);let f=this.options.anchor;const T=Jc(this.options.offset);if(!f){const V=this._container.offsetWidth,re=this._container.offsetHeight;let pe;pe=l.y+T.bottom.y<re?["top"]:l.y>this._map.transform.height-re?["bottom"]:[],l.x<V/2?pe.push("left"):l.x>this._map.transform.width-V/2&&pe.push("right"),f=pe.length===0?"bottom":pe.join("-")}const D=l.add(T[f]).round();g.setTransform(this._container,`${Li[f]} translate(${D.x}px,${D.y}px)`),fd(this._container,f,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const I=this._container.querySelector(ky);I&&I.focus()}_onClose(){this.remove()}},Marker:md,Style:br,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.pointGeometry,MercatorCoordinate:s.MercatorCoordinate,Evented:s.Evented,AJAXError:s.AJAXError,config:s.config,CanvasSource:se,GeoJSONSource:F,ImageSource:q,RasterDEMTileSource:G,RasterTileSource:R,VectorTileSource:B,VideoSource:W,prewarm:function(){_e().acquire(te)},clearPrewarmedResources:function(){const I=xe;I&&(I.isPreloaded()&&I.numActive()===1?(I.release(te),xe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return ae.workerCount},set workerCount(I){ae.workerCount=I},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(I){s.config.MAX_PARALLEL_IMAGE_REQUESTS=I},clearStorage(I){s.clearTileCache(I)},workerUrl:"",addProtocol(I,l){s.config.REGISTERED_PROTOCOLS[I]=l},removeProtocol(I){delete s.config.REGISTERED_PROTOCOLS[I]}};return bn.extend(yd,{isSafari:s.isSafari,getPerformanceMetrics:s.PerformanceUtils.getPerformanceMetrics}),yd});var c=n;return c})})(kQ);var aD={exports:{}};class MQ{constructor(e=[],t=AQ){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,n=t[e];for(;e>0;){const a=e-1>>1,c=t[a];if(r(n,c)>=0)break;t[e]=c,e=a}t[e]=n}_down(e){const{data:t,compare:r}=this,n=this.length>>1,a=t[e];for(;e<n;){let c=(e<<1)+1,s=t[c];const h=c+1;if(h<this.length&&r(t[h],s)<0&&(c=h,s=t[h]),r(s,a)>=0)break;t[e]=s,e=c}t[e]=a}}function AQ(i,e){return i<e?-1:i>e?1:0}const IQ=Object.freeze(Object.defineProperty({__proto__:null,default:MQ},Symbol.toStringTag,{value:"Module"})),PQ=xL(IQ);var V0=PQ;V0.default&&(V0=V0.default);aD.exports=oD;aD.exports.default=oD;function oD(i,e,t){e=e||1;for(var r,n,a,c,s=0;s<i[0].length;s++){var h=i[0][s];(!s||h[0]<r)&&(r=h[0]),(!s||h[1]<n)&&(n=h[1]),(!s||h[0]>a)&&(a=h[0]),(!s||h[1]>c)&&(c=h[1])}var p=a-r,m=c-n,y=Math.min(p,m),g=y/2;if(y===0){var x=[r,n];return x.distance=0,x}for(var v=new V0(void 0,DQ),_=r;_<a;_+=y)for(var C=n;C<c;C+=y)v.push(new yu(_+g,C+g,g,i));var k=LQ(i),w=new yu(r+p/2,n+m/2,0,i);w.d>k.d&&(k=w);for(var E=v.length;v.length;){var A=v.pop();A.d>k.d&&(k=A,t&&console.log("found best %d after %d probes",Math.round(1e4*A.d)/1e4,E)),!(A.max-k.d<=e)&&(g=A.h/2,v.push(new yu(A.x-g,A.y-g,g,i)),v.push(new yu(A.x+g,A.y-g,g,i)),v.push(new yu(A.x-g,A.y+g,g,i)),v.push(new yu(A.x+g,A.y+g,g,i)),E+=4)}t&&(console.log("num probes: "+E),console.log("best distance: "+k.d));var M=[k.x,k.y];return M.distance=k.d,M}function DQ(i,e){return e.max-i.max}function yu(i,e,t,r){this.x=i,this.y=e,this.h=t,this.d=RQ(i,e,r),this.max=this.d+this.h*Math.SQRT2}function RQ(i,e,t){for(var r=!1,n=1/0,a=0;a<t.length;a++)for(var c=t[a],s=0,h=c.length,p=h-1;s<h;p=s++){var m=c[s],y=c[p];m[1]>e!=y[1]>e&&i<(y[0]-m[0])*(e-m[1])/(y[1]-m[1])+m[0]&&(r=!r),n=Math.min(n,NQ(i,e,m,y))}return n===0?0:(r?1:-1)*Math.sqrt(n)}function LQ(i){for(var e=0,t=0,r=0,n=i[0],a=0,c=n.length,s=c-1;a<c;s=a++){var h=n[a],p=n[s],m=h[0]*p[1]-p[0]*h[1];t+=(h[0]+p[0])*m,r+=(h[1]+p[1])*m,e+=m*3}return e===0?new yu(n[0][0],n[0][1],0,i):new yu(t/e,r/e,0,i)}function NQ(i,e,t,r){var n=t[0],a=t[1],c=r[0]-n,s=r[1]-a;if(c!==0||s!==0){var h=((i-n)*c+(e-a)*s)/(c*c+s*s);h>1?(n=r[0],a=r[1]):h>0&&(n+=c*h,a+=s*h)}return c=i-n,s=e-a,c*c+s*s}var zQ=typeof Tn=="object"&&Tn&&Tn.Object===Object&&Tn,OQ=typeof self=="object"&&self&&self.Object===Object&&self;zQ||OQ||Function("return this")();var jQ={exports:{}};(function(i,e){var t=function(){var r={},n=Math.PI/180,a=180/Math.PI,c=6378137,s=20037508342789244e-9;function h(m){return Number(m)===m&&m%1!==0}function p(m){if(m=m||{},this.size=m.size||256,this.expansion=m.antimeridian===!0?2:1,!r[this.size]){var y=this.size,g=r[this.size]={};g.Bc=[],g.Cc=[],g.zc=[],g.Ac=[];for(var x=0;x<30;x++)g.Bc.push(y/360),g.Cc.push(y/(2*Math.PI)),g.zc.push(y/2),g.Ac.push(y),y*=2}this.Bc=r[this.size].Bc,this.Cc=r[this.size].Cc,this.zc=r[this.size].zc,this.Ac=r[this.size].Ac}return p.prototype.px=function(m,y){if(h(y)){var g=this.size*Math.pow(2,y),x=g/2,v=g/360,_=g/(2*Math.PI),C=g,k=Math.min(Math.max(Math.sin(n*m[1]),-.9999),.9999),w=x+m[0]*v,E=x+.5*Math.log((1+k)/(1-k))*-_;return w>C*this.expansion&&(w=C*this.expansion),E>C&&(E=C),[w,E]}else{var x=this.zc[y],k=Math.min(Math.max(Math.sin(n*m[1]),-.9999),.9999),w=Math.round(x+m[0]*this.Bc[y]),E=Math.round(x+.5*Math.log((1+k)/(1-k))*-this.Cc[y]);return w>this.Ac[y]*this.expansion&&(w=this.Ac[y]*this.expansion),E>this.Ac[y]&&(E=this.Ac[y]),[w,E]}},p.prototype.ll=function(m,y){if(h(y)){var g=this.size*Math.pow(2,y),x=g/360,v=g/(2*Math.PI),_=g/2,C=(m[1]-_)/-v,k=(m[0]-_)/x,w=a*(2*Math.atan(Math.exp(C))-.5*Math.PI);return[k,w]}else{var C=(m[1]-this.zc[y])/-this.Cc[y],k=(m[0]-this.zc[y])/this.Bc[y],w=a*(2*Math.atan(Math.exp(C))-.5*Math.PI);return[k,w]}},p.prototype.bbox=function(m,y,g,x,v){x&&(y=Math.pow(2,g)-1-y);var _=[m*this.size,(+y+1)*this.size],C=[(+m+1)*this.size,y*this.size],k=this.ll(_,g).concat(this.ll(C,g));return v==="900913"?this.convert(k,"900913"):k},p.prototype.xyz=function(m,y,g,x){x==="900913"&&(m=this.convert(m,"WGS84"));var v=[m[0],m[1]],_=[m[2],m[3]],C=this.px(v,y),k=this.px(_,y),w=[Math.floor(C[0]/this.size),Math.floor((k[0]-1)/this.size)],E=[Math.floor(k[1]/this.size),Math.floor((C[1]-1)/this.size)],A={minX:Math.min.apply(Math,w)<0?0:Math.min.apply(Math,w),minY:Math.min.apply(Math,E)<0?0:Math.min.apply(Math,E),maxX:Math.max.apply(Math,w),maxY:Math.max.apply(Math,E)};if(g){var M={minY:Math.pow(2,y)-1-A.maxY,maxY:Math.pow(2,y)-1-A.minY};A.minY=M.minY,A.maxY=M.maxY}return A},p.prototype.convert=function(m,y){return y==="900913"?this.forward(m.slice(0,2)).concat(this.forward(m.slice(2,4))):this.inverse(m.slice(0,2)).concat(this.inverse(m.slice(2,4)))},p.prototype.forward=function(m){var y=[c*m[0]*n,c*Math.log(Math.tan(Math.PI*.25+.5*m[1]*n))];return y[0]>s&&(y[0]=s),y[0]<-20037508342789244e-9&&(y[0]=-20037508342789244e-9),y[1]>s&&(y[1]=s),y[1]<-20037508342789244e-9&&(y[1]=-20037508342789244e-9),y},p.prototype.inverse=function(m){return[m[0]*a/c,(Math.PI*.5-2*Math.atan(Math.exp(-m[1]/c)))*a]},p}();i.exports=t})(jQ);var h3={exports:{}};(function(i,e){(function(t,r){r(e,i)})(Tn,function(t,r){var n={timeout:5e3,jsonpCallback:"callback"};function a(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function c(p){try{delete window[p]}catch{window[p]=void 0}}function s(p){var m=document.getElementById(p);m&&document.getElementsByTagName("head")[0].removeChild(m)}function h(p){var m=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],y=p,g=m.timeout||n.timeout,x=m.jsonpCallback||n.jsonpCallback,v=void 0;return new Promise(function(_,C){var k=m.jsonpCallbackFunction||a(),w=x+"_"+k;window[k]=function(A){_({ok:!0,json:function(){return Promise.resolve(A)}}),v&&clearTimeout(v),s(w),c(k)},y+=y.indexOf("?")===-1?"?":"&";var E=document.createElement("script");E.setAttribute("src",""+y+x+"="+k),m.charset&&E.setAttribute("charset",m.charset),m.nonce&&E.setAttribute("nonce",m.nonce),m.referrerPolicy&&E.setAttribute("referrerPolicy",m.referrerPolicy),m.crossorigin&&E.setAttribute("crossorigin","true"),E.id=w,document.getElementsByTagName("head")[0].appendChild(E),v=setTimeout(function(){C(new Error("JSONP request to "+p+" timed out")),c(k),s(w),window[k]=function(){c(k)}},g),E.onerror=function(){C(new Error("JSONP request to "+p+" failed")),c(k),s(w),v&&clearTimeout(v)}})}r.exports=h})})(h3,h3.exports);var FQ=$Q,BQ=Object.prototype.hasOwnProperty;function $Q(){for(var i={},e=0;e<arguments.length;e++){var t=arguments[e];for(var r in t)BQ.call(t,r)&&(i[r]=t[r])}return i}var lD={exports:{}};(function(i,e){(function(){var t={};i.exports=t,t.simpleFilter=function(r,n){return n.filter(function(a){return t.test(r,a)})},t.test=function(r,n){return t.match(r,n)!==null},t.match=function(r,n,a){a=a||{};var c=0,s=[],h=n.length,p=0,m=0,y=a.pre||"",g=a.post||"",x=a.caseSensitive&&n||n.toLowerCase(),v;r=a.caseSensitive&&r||r.toLowerCase();for(var _=0;_<h;_++)v=n[_],x[_]===r[c]?(v=y+v+g,c+=1,m+=1+m):m=0,p+=m,s[s.length]=v;return c===r.length?(p=x===r?1/0:p,{rendered:s.join(""),score:p}):null},t.filter=function(r,n,a){return!n||n.length===0?[]:typeof r!="string"?n:(a=a||{},n.reduce(function(c,s,h,p){var m=s;a.extract&&(m=a.extract(s));var y=t.match(r,m,a);return y!=null&&(c[c.length]={string:y.rendered,score:y.score,index:h,original:s}),c},[]).sort(function(c,s){var h=s.score-c.score;return h||c.index-s.index}))}})()})(lD);var UQ=lD.exports,xo=function(i){return this.component=i,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,i.el.parentNode.insertBefore(this.wrapper,i.el.nextSibling),this};xo.prototype.show=function(){this.element.style.display="block"};xo.prototype.hide=function(){this.element.style.display="none"};xo.prototype.add=function(i){this.items.push(i)};xo.prototype.clear=function(){this.items=[],this.active=0};xo.prototype.isEmpty=function(){return!this.items.length};xo.prototype.isVisible=function(){return this.element.style.display==="block"};xo.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var i=0;i<this.items.length;i++)this.drawItem(this.items[i],this.active===i);this.show()};xo.prototype.drawItem=function(i,e){var t=document.createElement("li"),r=document.createElement("a");e&&(t.className+=" active"),r.innerHTML=i.string,t.appendChild(r),this.element.appendChild(t),t.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),t.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,i)}).bind(this))};xo.prototype.handleMouseUp=function(i){this.selectingListItem=!1,this.component.value(i.original),this.clear(),this.draw()};xo.prototype.move=function(i){this.active=i,this.draw()};xo.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};xo.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};xo.prototype.drawError=function(i){var e=document.createElement("li");e.innerHTML=i,this.element.appendChild(e),this.show()};var VQ=xo,GQ=FQ,HQ=UQ,qQ=VQ,Na=function(i,e,t){return t=t||{},this.options=GQ({minLength:2,limit:5,filter:!0,hideOnBlur:!0},t),this.el=i,this.data=e||[],this.list=new qQ(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(r){this.handleKeyUp(r.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(r){this.handleKeyDown(r)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(r){this.handlePaste(r)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};Na.prototype.handleKeyUp=function(i){i===40||i===38||i===27||i===13||i===9||this.handleInputChange(this.el.value)};Na.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};Na.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};Na.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(i.target.value)},100)}};Na.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(e){for(var t=0;t<e.length&&(this.list.add(e[t]),t!==this.options.limit-1);t++);this.list.draw()}).bind(this))};Na.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};Na.prototype.update=function(i){this.data=i,this.handleKeyUp()};Na.prototype.clear=function(){this.data=[],this.list.clear()};Na.prototype.normalize=function(i){return i=i.toLowerCase(),i};Na.prototype.match=function(i,e){return i.indexOf(e)>-1};Na.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")};Na.prototype.getCandidates=function(i){var e={pre:"<strong>",post:"</strong>",extract:(function(r){return this.getItemValue(r)}).bind(this)},t;this.options.filter?(t=HQ.filter(this.query,this.data,e),t=t.map((function(r){return{original:r.original,string:this.render(r.original,r.string)}}).bind(this))):t=this.data.map((function(r){var n=this.render(r);return{original:r,string:n}}).bind(this)),i(t)};Na.prototype.getItemValue=function(i){return i};Na.prototype.render=function(i,e){if(e)return e;for(var t=i.original?this.getItemValue(i.original):this.getItemValue(i),r=this.normalize(t),n=r.lastIndexOf(this.query);n>-1;){var a=n+this.query.length;t=t.slice(0,n)+"<strong>"+t.slice(n,a)+"</strong>"+t.slice(a),n=r.slice(0,n).lastIndexOf(this.query)}return t};Na.prototype.renderError=function(i){this.list.drawError(i)};var WQ=Na,YQ=WQ;typeof window<"u"&&(window.Suggestions=YQ);const ZQ="_pillWrapper_cps7i_1",XQ="_pill_cps7i_1",KQ="_destructive_cps7i_18",QQ="_info_cps7i_23",JQ="_warning_cps7i_28",eJ="_success_cps7i_33",Ad={pillWrapper:ZQ,pill:XQ,default:"_default_cps7i_13",destructive:KQ,info:QQ,warning:JQ,success:eJ},tJ=({children:i,variant:e="default"})=>de.createElement("span",{className:Gi(Ad.pillWrapper,{[Ad.default]:e==="default",[Ad.destructive]:e==="destructive",[Ad.info]:e==="info",[Ad.warning]:e==="warning",[Ad.success]:e==="success"})},de.createElement("div",{className:Ad.pill},i)),iJ="_wrapper_ff9cy_1",rJ="_ping_ff9cy_8",nJ="_active_ff9cy_16",sJ="_dot_ff9cy_20",aJ="_destructive_ff9cy_39",oJ="_info_ff9cy_43",lJ="_warning_ff9cy_47",cJ="_success_ff9cy_51",op={wrapper:iJ,ping:rJ,active:nJ,dot:sJ,default:"_default_ff9cy_35",destructive:aJ,info:oJ,warning:lJ,success:cJ},uJ=({active:i=!1,variant:e="default"})=>de.createElement("span",{className:op.wrapper},de.createElement("span",{className:Gi(op.ping,op[e],{[op.active]:i})}),de.createElement("span",{className:Gi(op.dot,op[e])})),dJ="_card_1fxs6_1",hJ={card:dJ},hC=({children:i,className:e})=>de.createElement("div",{className:`${hJ.card} ${e||""}`},i),cD=({label:i,primary:e,secondary:t,small:r,large:n,disabled:a,onClick:c,open:s,icon:h,dataTest:p,component:m})=>{const[y,g]=Ie.useState(!1),x=Ie.useRef(null),v=s!==void 0?s:y,_=()=>{s===void 0&&g(C=>!C),c==null||c()};return de.createElement("div",{ref:x},de.createElement(Ti,{title:i??ve.t("More"),primary:e,secondary:t,dataTest:p,disabled:a,small:r,large:n,onClick:_,icon:h},i),v&&de.createElement(xg,{onBackdropClick:_},de.createElement(rh,{reference:x,placement:"bottom-start"},m)))},pJ="_contentWrapper_137cv_1",fJ={contentWrapper:pJ},uD=({label:i,variant:e="default",active:t=!1})=>de.createElement(tJ,{variant:e},de.createElement("div",{className:fJ.contentWrapper},de.createElement(uJ,{variant:e,active:t}),de.createElement("span",null,i)));var dD={exports:{}};(function(i,e){(function(t,r){r()})(Tn,function(){function t(p,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(p.type)?new Blob(["\uFEFF",p],{type:p.type}):p}function r(p,m,y){var g=new XMLHttpRequest;g.open("GET",p),g.responseType="blob",g.onload=function(){h(g.response,m,y)},g.onerror=function(){console.error("could not download file")},g.send()}function n(p){var m=new XMLHttpRequest;m.open("HEAD",p,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function a(p){try{p.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),p.dispatchEvent(m)}}var c=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Tn=="object"&&Tn.global===Tn?Tn:void 0,s=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=c.saveAs||(typeof window!="object"||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(p,m,y){var g=c.URL||c.webkitURL,x=document.createElement("a");m=m||p.name||"download",x.download=m,x.rel="noopener",typeof p=="string"?(x.href=p,x.origin===location.origin?a(x):n(x.href)?r(p,m,y):a(x,x.target="_blank")):(x.href=g.createObjectURL(p),setTimeout(function(){g.revokeObjectURL(x.href)},4e4),setTimeout(function(){a(x)},0))}:"msSaveOrOpenBlob"in navigator?function(p,m,y){if(m=m||p.name||"download",typeof p!="string")navigator.msSaveOrOpenBlob(t(p,y),m);else if(n(p))r(p,m,y);else{var g=document.createElement("a");g.href=p,g.target="_blank",setTimeout(function(){a(g)})}}:function(p,m,y,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof p=="string")return r(p,m,y);var x=p.type==="application/octet-stream",v=/constructor/i.test(c.HTMLElement)||c.safari,_=/CriOS\/[\d]+/.test(navigator.userAgent);if((_||x&&v||s)&&typeof FileReader<"u"){var C=new FileReader;C.onloadend=function(){var E=C.result;E=_?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=E:location=E,g=null},C.readAsDataURL(p)}else{var k=c.URL||c.webkitURL,w=k.createObjectURL(p);g?g.location=w:location.href=w,g=null,setTimeout(function(){k.revokeObjectURL(w)},4e4)}});c.saveAs=h.saveAs=h,i.exports=h})})(dD);var mJ=dD.exports;const gJ=Hu(mJ),yJ="_errorChap_1v22m_1",vJ="_errorBar_1v22m_6",xJ="_errorHeader_1v22m_16",bJ="_detailedError_1v22m_23",wJ="_scrollMissingData_1v22m_29",_J="_notFoundDataTable_1v22m_34",lp={errorChap:yJ,errorBar:vJ,errorHeader:xJ,detailedError:bJ,scrollMissingData:wJ,notFoundDataTable:_J},CJ="_buttons_1a7lz_1",TJ="_text_1a7lz_7",p3={buttons:CJ,text:TJ},SJ=({startDownload:i,isSendingDataToChap:e,formValid:t,orgUnits:r,onClickDownloadOrPostData:n,onButtonSendAction:a})=>{const c=()=>{if(r.length===0)return!0;const p=r[0].path.split("/").length;return r.every(m=>m.path.split("/").length===p)},s=a==="predict"?"Send prediction":"Create dataset",h=a==="predict"?z.jsx(Bv,{}):z.jsx(b_,{});return z.jsxs("div",{children:[z.jsxs("div",{className:p3.buttons,children:[z.jsx(Ti,{icon:z.jsx(bk,{}),loading:i.startDownload&&i.action==="download",disabled:!t||i.startDownload||!c(),onClick:()=>n("download"),children:"Download data"}),z.jsx(Ti,{icon:h,primary:!0,loading:i.startDownload&&i.action===a||e,disabled:!t||i.startDownload||!c(),onClick:()=>n(a),children:s})]}),e&&z.jsx("p",{className:p3.text,children:"Sending data.."})]})},hD=({onSendAction:i,onDrawerSubmit:e,selectedModel:t,name:r,selectedPeriodItems:n,selectedOrgUnits:a,orgUnitLevel:c,dataLayers:s})=>{const h=$s(),[p,m]=Ie.useState({action:"download",startDownload:!1}),[y,g]=Ie.useState(!1),[x,v]=Ie.useState(void 0),[_,C]=Ie.useState(),[k,w]=Ie.useState({}),E=s.filter(ee=>ee.origin==="dataItem"),[A,M]=Ie.useState([]),[S,N]=Ie.useState([]),[Y,Z]=Ie.useState(""),K=()=>!(c===void 0||a.length==0||n.length==0||r===""||n.length==0||s.length==0||s.some(ee=>ee.feature===""||ee.dataSource===""||ee.origin==="")),U=ee=>{v(void 0),C(void 0),N([]),m({action:ee,startDownload:!0})};Ie.useEffect(()=>{if(x&&_){if(Z(""),m(ee=>({...ee,startDownload:!1})),p.action==="download"){fe();return}if(B(x))return;p.action==="predict"&&se(),p.action==="new-dataset"&&W()}},[x,_]);const $=(ee,oe,Ce,ge)=>{var ie;const Ee=[],J=[...new Set(ee.map(le=>le.orgUnit))];n.forEach(le=>{J.forEach(be=>{var ae;let te=!0;ee.filter(ce=>ce.featureName===Ce).forEach(ce=>{if(le.id==ce.period){te=!1;return}}),te&&Ee.push({covariate:ge,orgUnitName:((ae=k[be])==null?void 0:ae.name)||"",period:le.id})})}),Ee.length>0&&oe.push({title:ge+" is missing for the following orgUnit and time periods: ",description:z.jsxs("div",{children:[z.jsxs("p",{children:["Total missing: ",Ee.length," | Use the"," ",z.jsx("a",{target:"_blank",href:((ie=R==null?void 0:R.systemInfo)==null?void 0:ie.contextPath)+"/api/apps/climate-data/index.html#/import",rel:"noreferrer",children:"Climate App"})," ","to import climate data."]}),z.jsx("div",{className:lp.scrollMissingData,children:z.jsxs("table",{className:lp.notFoundDataTable,children:[z.jsx("thead",{children:z.jsxs("tr",{children:[z.jsx("th",{children:"Organisation unit:"}),z.jsx("th",{children:"Time period:"})]})}),z.jsx("tbody",{children:Ee.map(le=>z.jsxs("tr",{children:[z.jsx("td",{children:le.orgUnitName}),z.jsx("td",{children:Q2({periodId:le.period,calendar:"gregory"}).displayName})]},`${le.orgUnitName}-${le.period}`))})]})})]})})},B=ee=>{const oe=[];return s.filter(Ce=>Ce.origin=="dataItem").forEach(Ce=>{var ge;if(((ge=ee.filter(Ee=>Ee.featureName===Ce.feature))==null?void 0:ge.length)===0){const Ee='Thes selected data item for covarate "'+Ce.feature+'" returned no data.';oe.push({description:"Ensure you have exported the analytics tables in DHIS2.",title:Ee})}}),s.find(Ce=>Ce.feature==="rainfall"&&Ce.origin=="dataItem")&&$(ee,oe,"rainfall","Rainfall"),s.find(Ce=>Ce.feature==="mean_temperature"&&Ce.origin=="dataItem")&&$(ee,oe,"mean_temperature","Mean Temperature"),oe.length>0?(N([...S,...oe]),!0):!1},R=wg(),L=()=>{var ee,oe;return{appVersion:((ee=R==null?void 0:R.appVersion)==null?void 0:ee.full)||"Unknown",dhis2Version:((oe=R==null?void 0:R.systemInfo)==null?void 0:oe.version)||"Unknown",dataItemMapper:A}},G=()=>({name:r,dataToBeFetched:q(),metaData:L(),providedData:x,geojson:_}),F=()=>G(),j=()=>({type:"predict",modelId:t==null?void 0:t.name,...G()}),q=()=>s.filter(ee=>ee.origin==="CHAP").map(ee=>({dataSourceName:ee.dataSource,featureName:ee.feature})),W=async()=>{const ee=F();g(!0),await yl.makeDatasetAnalyticsMakeDatasetPost(ee).then(()=>{Z(""),e(),h.invalidateQueries({queryKey:["jobs"]})}).catch(oe=>{var Ce,ge;(Ce=oe==null?void 0:oe.body)!=null&&Ce.detail?Z(JSON.stringify((ge=oe==null?void 0:oe.body)==null?void 0:ge.detail)):Z("An error occured while sending the request to CHAP Core.")}).finally(()=>{g(!1)})},se=async()=>{const ee=j();g(!0),await yl.makePredictionAnalyticsMakePredictionPost(ee).then(()=>{e(),h.invalidateQueries({queryKey:["jobs"]})}).catch(oe=>{var Ce,ge;(Ce=oe==null?void 0:oe.body)!=null&&Ce.detail?Z(JSON.stringify((ge=oe==null?void 0:oe.body)==null?void 0:ge.detail)):Z("An error occured while sending the request to CHAP Core.")}).finally(()=>{g(!1)})},fe=()=>{let ee={};i==="predict"&&(ee=j()),i==="new-dataset"&&(ee=F());const oe=new Blob([JSON.stringify(ee,null,2)],{type:"application/json"}),Ce=new Date;gJ(oe,i.replaceAll("-","_")+"_chap_request_data_"+Ce.toJSON()+".json")};return z.jsxs("div",{children:[z.jsx(SJ,{formValid:K(),onButtonSendAction:i,onClickDownloadOrPostData:U,orgUnits:a,isSendingDataToChap:y,startDownload:p}),z.jsx("p",{className:lp.errorChap,children:Y}),p.startDownload&&K()&&z.jsx(IW,{setAnalyticsMetaData:w,setFeatureDataItemMapper:M,model_id:t==null?void 0:t.name,setObservations:v,setGeoJSon:C,analyticsDataLayers:E,startDownload:p,setStartDownload:m,selectedPeriodItems:n,setErrorMessages:N,selectedOrgUnits:a,orgUnitLevel:c}),S.map((ee,oe)=>z.jsxs("div",{className:lp.errorBar,children:[z.jsxs("div",{className:lp.errorHeader,children:[z.jsx(S_,{}),z.jsx("span",{children:ee.title})]}),z.jsx("span",{className:lp.detailedError,children:ee.description})]},oe))]})},EJ="_dataLineWrapper_epwpx_1",kJ="_selectField_epwpx_9",MJ="_selectDataLineWrapper_epwpx_19",AJ="_predictLabel_epwpx_27",hm={dataLineWrapper:EJ,selectField:kJ,selectDataLineWrapper:MJ,predictLabel:AJ},IJ="_searchSelectField_188cg_1",PJ="_label_188cg_5",DJ="_selectContainer_188cg_12",RJ="_triggerButton_188cg_18",LJ="_triggerText_188cg_45",NJ="_hasSelection_188cg_56",zJ="_iconContainer_188cg_60",OJ="_clearButton_188cg_68",jJ="_dropdownIcon_188cg_87",FJ="_dropDown_188cg_96",BJ="_searchContainer_188cg_105",$J="_searchInput_188cg_110",UJ="_resultsList_188cg_125",VJ="_dropDownItem_188cg_133",GJ="_rightDropDownItem_188cg_152",HJ="_infoSearchItem_188cg_162",Ys={searchSelectField:IJ,label:PJ,selectContainer:DJ,triggerButton:RJ,triggerText:LJ,hasSelection:NJ,iconContainer:zJ,clearButton:OJ,dropdownIcon:jJ,dropDown:FJ,searchContainer:BJ,searchInput:$J,resultsList:UJ,dropDownItem:VJ,rightDropDownItem:GJ,infoSearchItem:HJ},ef=({query:i,queryKey:e,...t})=>{const r=sh();return tl({queryKey:e,queryFn:async()=>(await r.query({apiDataQuery:i})).apiDataQuery,...t})},qJ=(i,e=300)=>{const[t,r]=Ie.useState(i);return Ie.useEffect(()=>{const n=setTimeout(()=>{r(i)},e);return()=>{clearTimeout(n)}},[i,e]),t},WJ={PROGRAM_DATA_ELEMENT:ve.t("Data Element"),INDICATOR:ve.t("Indicator"),PROGRAM_INDICATOR:ve.t("Program Indicator"),DATA_ELEMENT:ve.t("Data Element")},pD=({feature:i,onChangeSearchSelectField:e})=>{const[t,r]=Ie.useState(""),[n,a]=Ie.useState(null),[c,s]=Ie.useState(!1),h=qJ(t,300),p=Ie.useRef(null),m=Ie.useRef(null),{data:y,isLoading:g}=ef({queryKey:["dataItems",h],query:{resource:"dataItems",params:{filter:[...h?[`displayName:ilike:${h}`]:[],"dimensionItemType:in:[PROGRAM_DATA_ELEMENT,INDICATOR,PROGRAM_INDICATOR,DATA_ELEMENT]"],fields:"id,displayName,dimensionItemType",order:"displayName:asc",page:1,pageSize:20}},staleTime:5*60*1e3,cacheTime:10*60*1e3}),x=(y==null?void 0:y.dataItems)||[],v=()=>{s(!c),r(""),c||setTimeout(()=>{m.current&&m.current.focus()},100)},_=()=>{s(!1),r("")},C=A=>{const M=A.target.value;r(M)},k=A=>{a(A),r(""),s(!1),e(i,A.id,A.displayName)},w=A=>{A.stopPropagation(),a(null),r(""),e(i,"","")},E=()=>g?z.jsx("li",{className:Ys.infoSearchItem,children:ve.t("Loading")}):x.length===0&&t.length===0?z.jsx("li",{className:Ys.infoSearchItem,children:ve.t("Start typing to search for data items")}):x.length===0&&t.length>0?z.jsx("li",{className:Ys.infoSearchItem,children:ve.t("No matches found")}):z.jsx(z.Fragment,{children:x.map(A=>z.jsxs("li",{onClick:()=>k(A),className:Ys.dropDownItem,children:[z.jsx("div",{children:A.displayName}),z.jsx("div",{className:Ys.rightDropDownItem,children:WJ[A.dimensionItemType]})]},A.id))});return z.jsxs("div",{className:Ys.searchSelectField,children:[z.jsx(Da,{className:Ys.label,children:i.displayName}),z.jsx("div",{ref:p,className:Ys.selectContainer,children:z.jsxs("button",{type:"button",onClick:v,className:`${Ys.triggerButton} ${n?Ys.hasSelection:""}`,children:[z.jsx("span",{className:Ys.triggerText,children:n?n.displayName:"Select a data item..."}),z.jsxs("div",{className:Ys.iconContainer,children:[n&&z.jsx("button",{type:"button",onClick:w,className:Ys.clearButton,"aria-label":"Clear selection",children:z.jsx(ck,{})}),z.jsx("div",{className:Ys.dropdownIcon,children:z.jsx($v,{})})]})]})}),c&&z.jsx(xg,{onBackdropClick:_,children:z.jsx(rh,{reference:p,placement:"bottom-start",children:z.jsxs("div",{className:Ys.dropDown,children:[z.jsx("div",{className:Ys.searchContainer,children:z.jsx("input",{ref:m,type:"text",value:t,onChange:C,placeholder:ve.t("Search for indicators, data elements, or program indicators"),className:Ys.searchInput})}),z.jsx("ul",{className:Ys.resultsList,children:E()})]})})})]})},fD=({datasetLayers:i,setDataLayers:e,predictMode:t})=>{const[r,n]=Ie.useState([]),a=async()=>{await yl.getDataSourcesAnalyticsDataSourcesGet().then(h=>{n(h)})};Ie.useEffect(()=>{a()},[]);const c=(h,p,m)=>{const y=[...i];h.selected!=null&&(y[m][p]=h.selected,e(y))},s=(h,p)=>{c({selected:h},"dataSource",p)};return z.jsxs("div",{children:[z.jsx("h3",{children:"Covariates"}),z.jsx("div",{className:hm.selectDataLineWrapper,children:i.map((h,p)=>{var m,y,g,x;return z.jsx("div",{children:z.jsxs("div",{className:hm.dataLineWrapper,children:[t?z.jsx("div",{className:hm.predictLabel,children:((m=Pm.filter(v=>v.id===h.feature)[0])==null?void 0:m.name)+":"}):z.jsx("div",{className:hm.predictLabel,children:((y=Pm.filter(v=>v.id===h.feature)[0])==null?void 0:y.name)+":"}),z.jsxs("div",{className:hm.selectField,children:[(h.origin==="CHAP"||h.origin==="")&&z.jsx(hs,{disabled:h.origin==="",label:"Data Element",onChange:v=>c(v,"dataSource",p),selected:h.dataSource,children:r.map(v=>v.supportedFeatures.includes(h.feature)&&z.jsx(As,{label:`${v.dataset.toUpperCase()} - ${v.displayName}`,value:v.dataset},v.name))}),h.origin==="dataItem"&&z.jsx(pD,{feature:{name:(g=Pm.filter(v=>v.id===h.feature)[0])==null?void 0:g.name,id:h.feature,description:"",displayName:((x=Pm.filter(v=>v.id===h.feature)[0])==null?void 0:x.name)||""},onChangeSearchSelectField:(v,_)=>s(_,p)})]})]})},p)})})]})},Pm=[{id:"rainfall",name:"Rainfall",description:"The amount of rainfall in mm",optional:!0},{id:"mean_temperature",name:"Mean Temperature",description:"The average temperature in degrees Celsius",optional:!0},{id:"population",name:"Population",description:"The population of the area",optional:!1},{name:"Disease cases",id:"disease_cases",description:"Feature 5"}],YJ=()=>Pm.map(e=>({feature:e.id,origin:"dataItem",dataSource:""})),ZJ=({onDrawerSubmit:i})=>{const[e,t]=Ie.useState(YJ()),[r,n]=Ie.useState([]),[a,c]=Ie.useState([]),[s,h]=Ie.useState(void 0),[p,m]=Ie.useState("");return z.jsx(z.Fragment,{children:z.jsxs("div",{className:CG.formWrapper,children:[z.jsx(Yl,{autoComplete:"",label:"Dataset name",value:p,onChange:y=>m(y.value),helpText:"Name your dataset",placeholder:"Example: Monthly malaria cases, ERA5 climate data, all districts"}),z.jsx(fD,{setDataLayers:t,datasetLayers:e}),z.jsx(UI,{setTimePeriods:c}),z.jsx(VI,{orgUnits:r,setOrgUnits:n,orgUnitLevel:s,setOrgUnitLevel:h}),z.jsx(hD,{onDrawerSubmit:i,name:p,dataLayers:e,onSendAction:"new-dataset",orgUnitLevel:s,selectedPeriodItems:a,selectedOrgUnits:r})]})})},XJ="_newDatasetWrapper_1jun0_1",KJ="_newEvaluationDatasetTitle_1jun0_5",f3={newDatasetWrapper:XJ,newEvaluationDatasetTitle:KJ},QJ=({onDrawerClose:i,onDrawerSubmit:e})=>z.jsx(z.Fragment,{children:z.jsxs("div",{className:f3.newDatasetWrapper,children:[z.jsxs("div",{className:f3.newEvaluationDatasetTitle,children:[z.jsx("h2",{children:"New evaluation dataset"}),z.jsx(Ti,{icon:z.jsx(v_,{}),onClick:i})]}),z.jsx(ZJ,{onDrawerSubmit:e})]})}),JJ=({isOpen:i,onDrawerSubmit:e,onDrawerClose:t})=>{const r=window.innerWidth<900?"100vw":"1000px";return z.jsx("div",{children:z.jsx(B2,{open:i,onClose:t,direction:"right",size:r,children:z.jsx("div",{className:bG.drawerWrapper,children:z.jsx(QJ,{onDrawerClose:t,onDrawerSubmit:e})})})})},eee="_pageHeader_19yth_1",tee="_pageDescription_19yth_11",m3={pageHeader:eee,pageDescription:tee},Uu=({pageTitle:i,pageDescription:e,setDrawerOpen:t,setDrawerOpenText:r})=>z.jsxs("div",{className:m3.pageHeader,children:[z.jsxs("div",{children:[z.jsx("h2",{children:i}),z.jsx("p",{className:m3.pageDescription,children:e})]}),t&&r&&z.jsx(Ti,{onClick:()=>t(!0),icon:z.jsx(jv,{}),primary:!0,children:r})]}),iee="_jobResultPanelContainer_16af9_1",ree="_flexMedium_16af9_17",nee="_flexItemRight_16af9_21",see="_resultTextHeader_16af9_46",aee="_evaluationModal_16af9_53",oee="_jobLogsModal_16af9_58",vu={jobResultPanelContainer:iee,flexMedium:ree,flexItemRight:nee,resultTextHeader:see,evaluationModal:aee,jobLogsModal:oee},lee="_modal_1k0a4_1",cee={modal:lee},uee="_container_mngpy_1",dee="_innerContainer_mngpy_6",hee="_prediction_mngpy_21",pee="_warning_mngpy_26",fee="_footer_mngpy_31",mee="_post_mngpy_36",gee="_redText_mngpy_40",yee="_greenText_mngpy_45",hu={container:uee,innerContainer:dee,prediction:hee,warning:pee,footer:fee,post:mee,redText:gee,greenText:yee},vee={orgUnits:{resource:"organisationUnits",params:{paging:!1,fields:["id","displayName"]}}},mD=()=>{const[i,e]=Ie.useState(),{loading:t,error:r}=eo(vee,{onComplete:n=>e(n.orgUnits)});return{orgUnits:i,error:r,loading:t}},xee=({prediction:i,qLowDataElementId:e,qMedianDataElementId:t,qHighDataElementId:r,setPostHttpError:n,setPostStatus:a})=>{const c=v=>{if(v==="quantile_low")return e;if(v==="median")return t;if(v==="quantile_high")return r},s=v=>v.dataValues.map(_=>({dataElement:c(_.dataElement),period:_.period,orgUnit:_.orgUnit,value:_.value})),h=v=>({resource:"dataValueSets",type:"create",data:{dataValues:v}}),[p,{error:m,loading:y,called:g}]=eA(h(s(i))),x=async()=>{await p()};return Ie.useEffect(()=>{x()},[]),Ie.useEffect(()=>{g&&(y||(m&&(n("Something went wrong when posting the prediction."),a("error")),m||(n(""),a("finish"))))},[y]),null},bee="_selectWrapper_8vdsv_1",wee="_select_8vdsv_1",g3={selectWrapper:bee,select:wee},f1=({value:i,onChange:e,label:t,dataElements:r})=>{const n=c=>{e({displayName:r==null?void 0:r.find(s=>s.id===c.selected).displayName,id:c.selected})},a=(r==null?void 0:r.length)===0&&r!=null;return z.jsx("div",{children:z.jsx("div",{children:z.jsx("div",{className:g3.select,children:z.jsxs("div",{className:g3.selectWrapper,children:[z.jsx("span",{children:t}),z.jsx(hs,{tabIndex:"1",placeholder:ve.t("Select data element"),disabled:a,selected:i?i.id:"",warning:a,onChange:n,children:r==null?void 0:r.map(c=>z.jsx(As,{label:c.displayName,value:c.id},c.id))})]})})})})},_ee="_textWarning_3ldzr_1",Cee="_wrapper_3ldzr_6",Tee="_wrapperWarning_3ldzr_14",m1={textWarning:_ee,wrapper:Cee,wrapperWarning:Tee},See="_dataTable_1koi3_1",Eee="_dataValueTables_1koi3_10",kee="_warning_1koi3_17",Kw={dataTable:See,dataValueTables:Eee,warning:kee},Mee=({setModalOpen:i,modalOpen:e,predictionTarget:t})=>{const r=wg();return e&&z.jsx(va,{large:!0,onClose:()=>i(!1),children:z.jsxs(go,{children:[z.jsx("h2",{children:ve.t("Add required Data Elements")}),z.jsxs("p",{children:[ve.t("This app requires specific DHIS2 Data Elements to import data into. If you have not already added them, go to the "),z.jsx("a",{target:"_blank",href:`${r.baseUrl}/dhis-web-maintenance/index.html#/list/dataElementSection/dataElement`,rel:"noreferrer",children:"Maintenance"}),ve.t("-app and create the Data Elements listed below.")]}),z.jsx("p",{className:Kw.warning,children:ve.t("NB! Make sure the CODE property for each data element is exactly the same as below.")}),z.jsx("p",{children:ve.t("Properties in the new Data Element form not specified in the tables below should have the default value.")}),z.jsxs("div",{className:Kw.dataValueTables,children:[z.jsx(g1,{q:"Low",disease:t}),z.jsx(g1,{q:"Median",disease:t}),z.jsx(g1,{q:"High",disease:t})]})]})})},g1=({q:i,disease:e})=>z.jsx("table",{className:Kw.dataTable,children:z.jsxs("tbody",{children:[z.jsxs("tr",{children:[z.jsx("th",{children:ve.t("Name")}),z.jsxs("td",{children:["CHAP",ve.t(` ${e} Quantile ${i}`)]})]}),z.jsxs("tr",{children:[z.jsx("th",{children:ve.t("Short name")}),z.jsxs("td",{children:["CHAP",ve.t(` ${e} Quantile ${i}`)]})]}),z.jsxs("tr",{children:[z.jsx("th",{children:ve.t("Code")}),z.jsx("td",{children:`CHAP_${i.toUpperCase()}_${e.toLocaleUpperCase().replaceAll(" ","_")}`})]}),z.jsxs("tr",{children:[z.jsx("th",{children:ve.t("Domain type")}),z.jsx("td",{children:ve.t("Aggregate")})]}),z.jsxs("tr",{children:[z.jsx("th",{children:ve.t("Aggregation levels")}),z.jsx("td",{children:z.jsx("em",{children:ve.t("Assign all org unit levels")})})]})]})}),Aee=({predictionTarget:i,warning:e})=>{const[t,r]=Ie.useState(!1);return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:e?m1.wrapperWarning:m1.wrapper,children:[z.jsx("div",{className:m1.textWarning,children:e&&z.jsx(z.Fragment,{children:z.jsx("p",{children:ve.t("It seems like you missing Data Elements for CHAP prediction.")})})}),z.jsx("div",{children:z.jsx(Ti,{icon:z.jsx(b_,{}),onClick:()=>r(!0),children:ve.t("Add data elements")})})]}),z.jsx(Mee,{modalOpen:t,setModalOpen:r,predictionTarget:i})]})},Iee=i=>({dataElements:{resource:"dataElements",params:{paging:!1,fields:["code","displayName","id"],filter:`code:ilike:${i}`}}}),y1=i=>{const[e,t]=Ie.useState(),{loading:r,error:n}=eo(Iee(i),{onComplete:a=>t(a.dataElements.dataElements)});return{dataElements:e,error:n,loading:r}},Pee=i=>({dataItems:{resource:"dataItems",params:{paging:!1,filter:`id:eq:${i}`}}}),Dee=i=>{const[e,t]=Ie.useState(),{loading:r,error:n,engine:a}=eo({});Ie.useEffect(()=>{i&&c()},[i]);const c=async()=>{const s=await a.query(Pee(i));s.dataItems.dataItems.length===0?t("?"):t(s.dataItems.dataItems[0].displayName)};return{displayName:e,error:n,loading:r}},Ree=({prediction_unprocessed:i})=>{var G;const e=nc(),[t,r]=Ie.useState("chart"),[n,a]=Ie.useState(),[c,s]=Ie.useState(null),[h,p]=Ie.useState(null),[m,y]=Ie.useState(null),g=(F,j)=>{if(!j)return 0;const q=[...j].sort((oe,Ce)=>oe-Ce),W=q.length,se=F*(W-1),fe=Math.floor(se),ee=Math.ceil(se);return Math.round(fe===ee?q[fe]:q[fe]+(q[ee]-q[fe])*(se-fe))},x=[{q:.1,name:"quantile_low"},{q:.5,name:"median"},{q:.9,name:"quantile_high"}],v=()=>{var F,j;return((j=(F=i==null?void 0:i.metaData)==null?void 0:F.dataItemMapper)==null?void 0:j.find(q=>q.featureName==="disease_cases").dataItemId)??""},_=()=>({diseaseId:E,dataValues:i.forecasts.flatMap(F=>x.map(j=>({orgUnit:F.orgUnit,value:g(j.q,F.values),displayName:F.orgUnit,dataElement:j.name,period:F.period})))}),{dataElements:C}=y1("CHAP_LOW"),{dataElements:k}=y1("CHAP_MEDIAN"),{dataElements:w}=y1("CHAP_HIGH"),E=v(),{displayName:A}=Dee(E),{orgUnits:M,loading:S}=mD(),[N,Y]=Ie.useState("initial"),[Z,K]=Ie.useState("");Ie.useEffect(()=>{M&&$()},[(G=e==null?void 0:e.state)==null?void 0:G.data,M]);const U=()=>(C==null?void 0:C.length)===0||(k==null?void 0:k.length)===0||(w==null?void 0:w.length)===0,$=async()=>{Y("initial")};Ie.useEffect(()=>{A&&M&&i&&a(R(_()))},[A,M,i]),Ie.useEffect(()=>{if(C&&k&&w&&A){const F=C.find(W=>W.code===`CHAP_LOW_${A.toLocaleUpperCase().replaceAll(" ","_")}`);F&&s(F);const j=k.find(W=>W.code===`CHAP_MEDIAN_${A.toLocaleUpperCase().replaceAll(" ","_")}`);j&&p(j);const q=w.find(W=>W.code===`CHAP_HIGH_${A.toLocaleUpperCase().replaceAll(" ","_")}`);q&&y(q)}},[C,k,w,A]);const B=()=>!c&&!h&&!m?!1:!!(c&&!(c!=null&&c.displayName.includes(A))||h&&!(h!=null&&h.displayName.includes(A))||m&&!(m!=null&&m.displayName.includes(A))),R=F=>({dataValues:F.dataValues.map(j=>{var q;return{...j,displayName:(q=M==null?void 0:M.organisationUnits.find(W=>W.id===j.orgUnit))==null?void 0:q.displayName}}),diseaseId:F.diseaseId}),L=()=>!!(c&&h&&m);return z.jsx("div",{className:hu.container,children:z.jsxs("div",{className:hu.innerContainer,children:[S&&z.jsx("p",{children:"Loading metadata from DHIS2.. "}),z.jsxs("h1",{children:["Prediction: ",i.name]}),n&&z.jsxs(z.Fragment,{children:[z.jsxs(T2,{scrollable:!0,children:[z.jsx(Np,{selected:t==="chart",onClick:()=>r("chart"),children:"Chart"}),z.jsx(Np,{selected:t==="table",onClick:()=>r("table"),children:"Table"})]}),z.jsx("div",{className:hu.prediction,children:{chart:z.jsx(rX,{predictionTargetName:A,data:n}),table:z.jsx(EQ,{data:n}),map:z.jsx(z.Fragment,{})}[t]}),z.jsx("h3",{children:ve.t("Select which data element prediction should be imported to:")}),z.jsx(Aee,{warning:U(),predictionTarget:A}),z.jsx(f1,{label:ve.t("Select data element for low quantile"),dataElements:C,onChange:s,value:c}),z.jsx(f1,{label:ve.t("Select data element for median quantile"),dataElements:k,onChange:p,value:h}),z.jsx(f1,{label:ve.t("Select data element for high quantile"),dataElements:w,onChange:y,value:m}),B()&&z.jsx("p",{className:hu.warning,children:"Warning: It seems like selected data elements do not match the disease of prediction."}),z.jsx("div",{className:hu.footer,children:z.jsx(Ti,{onClick:()=>Y("loading"),loading:N==="loading",disabled:N==="finish"||N==="loading"||!L(),icon:z.jsx(Bv,{}),primary:!0,children:ve.t("Import prediction")})}),N==="loading"&&z.jsx(xee,{setPostHttpError:K,setPostStatus:Y,prediction:n,qLowDataElementId:c==null?void 0:c.id,qMedianDataElementId:h==null?void 0:h.id,qHighDataElementId:m==null?void 0:m.id}),z.jsxs("div",{className:hu.post,children:[N==="finish"&&z.jsx("p",{className:hu.greenText,children:ve.t("Prediction has been imported.")}),z.jsx("p",{className:hu.redText,children:ve.t(Z)})]})]})]})})},Lee=({isImportModalOpen:i,setIsImportModalOpen:e,predictionIdToImport:t})=>{const[r,n]=Ie.useState(),a=async c=>{await ea.getPredictionCrudPredictionsPredictionIdGet(c).then(s=>{n(s)})};return Ie.useEffect(()=>{t&&a(Number(t))},[]),z.jsx("div",{children:i&&z.jsx(z.Fragment,{children:z.jsx(va,{className:cee.modal,onClose:()=>{e(!1)},children:z.jsx(z.Fragment,{children:r&&z.jsx(Ree,{prediction_unprocessed:r})})})})})},Nee="_jobResultPanelContainer_8nqrq_1",zee="_boxPanel_8nqrq_9",Oee="_flexMedium_8nqrq_17",jee="_flexItemRight_8nqrq_21",Fee="_inProgress_8nqrq_29",Bee="_notStarted_8nqrq_34",$ee="_completed_8nqrq_39",Uee="_failed_8nqrq_44",Vee="_popupMenuDiv_8nqrq_66",cl={jobResultPanelContainer:Nee,boxPanel:zee,flexMedium:Oee,flexItemRight:jee,inProgress:Fee,notStarted:Bee,completed:$ee,failed:Uee,popupMenuDiv:Vee},Gee=(i,e)=>{Ie.useEffect(()=>{const t=r=>{const n=i.current;!n||n.contains(r.target)||e(r)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}},[i,e])},Hee=({i,jobResult:e,onClickEvaluateDataset:t,onClickViewEvaluation:r,onClickImport:n,onClickViewLogs:a,onClickRemove:c})=>{const[s,h]=Ie.useState(!1),p=Ie.useRef(null),m=Ie.useRef(null);Gee(m,x=>{var v;(v=p.current)!=null&&v.contains(x.target)||h(!1)});const y=x=>{switch(x){case"STARTED":return cl.inProgress;case"PENDING":return cl.notStarted;case"FAILURE":return cl.failed;default:return cl.completed}},g=x=>{switch(x){case"STARTED":return"In progress..";case"PENDING":return"Pending..";case"FAILURE":return"Failed";default:return"Completed"}};return z.jsx("div",{className:cl.boxPanel,children:z.jsxs("div",{className:cl.jobResultPanelContainer,children:[z.jsx("div",{className:cl.flexMedium,children:e.name}),z.jsx("div",{className:cl.flexMedium,children:e.created.toDateString()+", "+e.created.toLocaleTimeString().slice(0,5)}),z.jsx("div",{className:cl.flexMedium,children:z.jsx("span",{className:y(e.status),children:g(e.status)})}),z.jsxs("div",{className:cl.flexItemRight,children:[{prediction:z.jsx(z.Fragment,{children:e.status=="SUCCESS"&&z.jsx(Ti,{icon:z.jsx(_k,{}),onClick:()=>n(e.result),small:!0,children:"Import"})}),dataset:z.jsx(z.Fragment,{children:e.status=="SUCCESS"&&z.jsx(Ti,{icon:z.jsx(Ck,{}),onClick:()=>t(e.result),small:!0,children:"Evaluate"})}),evaluation:z.jsx(z.Fragment,{children:e.status=="SUCCESS"&&z.jsx(Ti,{icon:z.jsx(Mk,{}),onClick:()=>r(e.result),small:!0,children:"View"})})}[e.type],e.status!="SUCCESS"&&z.jsx(Ti,{icon:z.jsx(uk,{}),onClick:()=>a(e.id),small:!0,children:"Logs"}),z.jsx("div",{ref:p,children:z.jsx(IX,{enabled:e.status==="STARTED",content:ve.t("Job is still running. Please wait until it is finished before doing any actions."),children:z.jsx(Ti,{small:!0,icon:z.jsx(Tg,{}),disabled:e.status==="STARTED",onClick:()=>h(x=>!x)})})}),s&&z.jsx(rh,{reference:p,placement:"top-end",children:z.jsx("div",{ref:m,className:cl.popupMenuDiv,children:z.jsx(y_,{children:["SUCCESS","FAILURE"].includes(e.status)&&z.jsx(tn,{label:"Delete",icon:z.jsx(vk,{}),destructive:!0,onClick:()=>{h(!1),c(e)}})})})})]})]})},i)},qee="_jobLogs_pzpzf_1",Wee="_logContent_pzpzf_7",v1={jobLogs:qee,logContent:Wee},gD=(i,e)=>{const t=Ie.useRef(),r=Ie.useRef(null),n=()=>{r.current===null&&document.visibilityState==="visible"&&(r.current=setInterval(()=>{t.current&&t.current()},e))},a=()=>{r.current!==null&&(clearInterval(r.current),r.current=null)};Ie.useEffect(()=>{t.current=i},[i]),Ie.useEffect(()=>{const c=()=>{document.visibilityState==="visible"?n():a()};return document.addEventListener("visibilitychange",c),document.visibilityState==="visible"&&n(),()=>{a(),document.removeEventListener("visibilitychange",c)}},[e])},Yee=({jobId:i})=>{const[e,t]=Ie.useState(null),[r,n]=Ie.useState(null),[a,c]=Ie.useState(!1),s=Ie.useRef(null),h=async()=>{if(i){console.log("fetching logs");try{const p=await Bu.getLogsJobsJobIdLogsGet(i);t(p)}catch(p){n(p.body.detail)}finally{c(!1)}}};return Ie.useEffect(()=>{c(!0),n(null),h()},[i]),Ie.useEffect(()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},[e]),gD(h,5e3),i?a?z.jsx("p",{children:"Loading logs..."}):r?z.jsxs("p",{className:v1.error,children:["Error: ",r]}):z.jsxs("div",{className:v1.jobLogs,children:[z.jsx("h2",{children:"Job Logs"}),z.jsx("pre",{className:v1.logContent,ref:s,children:e||"<No logs reported for this job>"})]}):z.jsx("p",{children:"No job ID provided."})},Zee="_drawerWrapper_l3raf_1",Xee={drawerWrapper:Zee},Kee="_formWrapper_13v73_1",Qee="_newEvaluationTitle_13v73_8",Jee="_buttons_13v73_15",x1={formWrapper:Kee,newEvaluationTitle:Qee,buttons:Jee},Hm=i=>{if(!i)return"NA";if(i.length==4)return i;if(i.includes("W")){const e=i.match(/(\d{4})W(\d{1,2})/);if(!e||e.length<3)return i;const[t,r]=e.slice(1,3);return`Week ${r.replace(/ˆ0/,"")} ${t}`}if(i.length==6){const e=i.slice(0,4),t=i.slice(4,6);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(t)-1]} ${e}`}return i},ete="_datasetDetailsWrapper_dewdk_1",tte="_label_dewdk_13",Id={datasetDetailsWrapper:ete,label:tte},ite=({datasetId:i})=>{var h;const[e,t]=Ie.useState(null),[r,n]=Ie.useState(""),[a,c]=Ie.useState(!0),s=p=>{const m=p.observations.map(k=>k.period),y=Array.from(new Set(m)).sort(),g=y[0],x=y[y.length-1],_=Array.from(new Set(m)).length,C=Array.from(new Set(p.observations.map(k=>k.featureName).filter(k=>k!=="disease_cases")));return{name:p.name,created:p.created,startPeriod:g,endPeriod:x,orgUnitCount:_,covariates:C}};return Ie.useEffect(()=>{if(console.log("datasetid",i),!i)return;(async()=>{try{console.log("fetching dataset",i);const m=await ea.getDatasetCrudDatasetsDatasetIdGet(i);console.log("dataset loaded",m);const y=s(m);t(y)}catch(m){n(m)}finally{c(!1)}})()},[i]),a?z.jsxs("div",{className:Id.datasetLoader,children:[z.jsx(La,{}),z.jsx("span",{children:"Loading dataset"})]}):r?z.jsxs("p",{children:["Error: ",r]}):z.jsxs(z.Fragment,{children:[z.jsx("h3",{children:"Evaluation Dataset"}),z.jsx(bg,{children:z.jsxs("div",{className:Id.datasetDetailsWrapper,children:[z.jsxs("div",{children:[z.jsx("span",{className:Id.label,children:"Name: "}),z.jsx("span",{children:e.name})]}),z.jsxs("div",{children:[z.jsx("span",{className:Id.label,children:"Org Units: "}),z.jsx("span",{children:e.orgUnitCount})]}),z.jsxs("div",{children:[z.jsx("span",{className:Id.label,children:"Time period: "}),z.jsxs("span",{children:[Hm(e.startPeriod)," to ",Hm(e.endPeriod)]})]}),z.jsxs("div",{children:[z.jsx("span",{className:Id.label,children:"Covariates: "}),z.jsx("span",{children:((h=e==null?void 0:e.covariates)==null?void 0:h.join(", "))||"None"})]}),z.jsxs("div",{children:[z.jsx("span",{className:Id.label,children:"Created: "}),z.jsx("span",{children:e.created})]})]})})]})},rte="_modelDetailsContainer_mnj31_1",nte="_selectedModelDetails_mnj31_10",ste="_modelAuthor_mnj31_17",ate="_modelAuthorLogo_mnj31_25",ote="_modelAuthorName_mnj31_32",lte="_modelHumanName_mnj31_36",cte="_modelEmail_mnj31_42",ute="_modelDescription_mnj31_47",dte="_modelDescriptionText_mnj31_52",hte="_modelCovariates_mnj31_57",pte="_modelCovariatesList_mnj31_62",fte="_modelCovariateItem_mnj31_71",mte="_modelCitation_mnj31_75",gte="_modelCitationText_mnj31_80",yte="_modelLink_mnj31_86",Ga={modelDetailsContainer:rte,selectedModelDetails:nte,modelAuthor:ste,modelAuthorLogo:ate,modelAuthorName:ote,modelHumanName:lte,modelEmail:cte,modelDescription:ute,modelDescriptionText:dte,modelCovariates:hte,modelCovariatesList:pte,modelCovariateItem:fte,modelCitation:mte,modelCitationText:gte,modelLink:yte},vte=({selectedModel:i,onChangeModel:e})=>z.jsx("div",{className:Ga.modelDetailsContainer,children:z.jsxs("div",{className:Ga.selectedModelDetails,children:[z.jsx("h3",{className:Ga.modelHumanName,children:i.displayName}),z.jsxs("div",{className:Ga.modelAuthor,children:[z.jsx("img",{src:i.organizationLogoUrl||"/default-model-logo.png",alt:i.name+" logo",className:Ga.modelAuthorLogo}),z.jsxs("span",{className:Ga.modelAuthorName,children:[i.author," - ",i.organization]})]}),z.jsxs("p",{className:Ga.modelDescription,children:[z.jsx("div",{children:"Description:"}),z.jsx("div",{className:Ga.modelDescriptionText,children:i.description||"Coming soon..."})]}),z.jsxs("div",{className:Ga.modelCovariates,children:[z.jsx("span",{children:"Model inputs:"}),z.jsx("ul",{className:Ga.modelCovariatesList,children:i.covariates.map((t,r)=>z.jsxs("li",{className:Ga.modelCovariateItem,children:["✔ ",t.name]},r))})]}),z.jsxs("div",{className:Ga.modelCitation,children:[z.jsx("span",{children:"Attribution:"}),z.jsx("pre",{className:Ga.modelCitationText,children:i.citationInfo||"Coming soon..."})]}),z.jsxs("p",{className:Ga.modelLink,children:["External link: ",z.jsx("a",{href:i.sourceUrl||"",target:"_blank",rel:"noreferrer",children:i.sourceUrl||"http://example.com"})]}),z.jsxs("p",{className:Ga.modelEmail,children:["Contact email: ",i.contactEmail||"Coming soon..."]}),e&&z.jsx("div",{children:z.jsx(Ti,{onClick:e,primary:!0,children:"Change Model"})})]},i.name)}),xte="_modelSelectContainer_1u7s7_1",bte="_modelGrid_1u7s7_10",wte="_modelCard_1u7s7_17",_te="_selectedModelCard_1u7s7_31",Cte="_modelAuthor_1u7s7_42",Tte="_modelAuthorLogo_1u7s7_50",Ste="_modelAuthorName_1u7s7_57",Ete="_modelHumanName_1u7s7_61",kte="_modelCovariatesList_1u7s7_87",Mte="_modelCovariateItem_1u7s7_96",Pl={modelSelectContainer:xte,modelGrid:bte,modelCard:wte,selectedModelCard:_te,modelAuthor:Cte,modelAuthorLogo:Tte,modelAuthorName:Ste,modelHumanName:Ete,modelCovariatesList:kte,modelCovariateItem:Mte},y3={name:"Download data (CHAP is offline)",id:0,description:"Download data from the CHAP API",displayName:"",covariates:[],target:{name:"target",description:"target",displayName:""}},yD=({selectedModel:i,setSelectedModel:e})=>{const[t,r]=Ie.useState([]),[n,a]=Ie.useState(!0),[c,s]=Ie.useState(!0),h=async()=>{await ea.listModelsCrudModelsGet().then(m=>{const y=m.map(g=>(g.covariates=g.covariates.concat(g.target),g));a(!1),r(y)}).catch(()=>{r([y3]),e(y3),a(!1)})},p=m=>{e(m),s(!1)};return Ie.useEffect(()=>{h()},[]),z.jsx("div",{className:Pl.modelSelectContainer,children:n?z.jsx("p",{children:"Loading models..."}):z.jsxs(z.Fragment,{children:[z.jsx("h3",{children:"Prediction Model"}),!c&&i&&z.jsx("div",{children:z.jsx(vte,{selectedModel:i,onChangeModel:()=>s(!0)})}),c&&z.jsx("div",{children:z.jsx("div",{className:Pl.modelGrid,children:t.map(m=>z.jsxs("div",{className:`${Pl.modelCard} ${(i==null?void 0:i.name)===m.name?Pl.selectedModelCard:""}`,children:[z.jsx("h3",{className:Pl.modelHumanName,children:m.displayName}),z.jsxs("div",{className:Pl.modelAuthor,children:[z.jsx("img",{src:m.organizationLogoUrl||"/default-model-logo.png",alt:m.name+" logo",className:Pl.modelAuthorLogo}),z.jsxs("span",{className:Pl.modelAuthorName,children:[m.author," - ",m.organization]})]}),z.jsx("ul",{className:Pl.modelCovariatesList,children:m.covariates.map((y,g)=>z.jsxs("li",{className:Pl.modelCovariateItem,children:["✔ ",y.name]},g))}),z.jsx(Ti,{onClick:()=>p(m),primary:!0,children:(i==null?void 0:i.name)===m.name?"Selected":"Select Model"})]},m.name))})})]})})},Ate=({onDrawerClose:i,datasetIdToEvaluate:e})=>{const t=$s(),[r,n]=Ie.useState(""),[a,c]=Ie.useState(void 0),s=r&&e&&a,h=()=>{if(console.log("should evaluate",r,e,a),s)try{const p=yl.createBacktestAnalyticsCreateBacktestPost({nPeriods:3,nSplits:10,stride:1,name:r,datasetId:e,modelId:a.name});t.invalidateQueries({queryKey:["jobs"]}),console.log("evaluate response",p)}catch{alert("There was an unknown error creating the evaluation")}finally{i()}};return z.jsx(z.Fragment,{children:z.jsxs("div",{className:x1.formWrapper,children:[z.jsxs("div",{className:x1.newEvaluationTitle,children:[z.jsx("h2",{children:"New model evaluation"}),z.jsx(Ti,{icon:z.jsx(v_,{}),onClick:i})]}),z.jsx(Yl,{autoComplete:"",label:"Evaluation name",value:r,onChange:p=>n(p.value),helpText:"Name your evaluation",placeholder:"Example: EWARS evaluation, 2020-2024"}),z.jsx(ite,{datasetId:e}),z.jsx(yD,{selectedModel:a,setSelectedModel:c}),z.jsx("div",{className:x1.buttons,children:z.jsx(Ti,{primary:!0,icon:z.jsx(Bv,{}),onClick:h,disabled:!s,children:"Evaluate"})})]})})},Ite=({isOpen:i,setIsOpen:e,datasetIdToEvaluate:t})=>{const r=window.innerWidth<900?"100vw":"1000px";return z.jsx("div",{children:z.jsx(B2,{open:i,onClose:()=>e(!1),direction:"right",size:r,children:z.jsx("div",{className:Xee.drawerWrapper,children:z.jsx(Ate,{onDrawerClose:()=>e(!1),datasetIdToEvaluate:t})})})})},Pte=({evaluationId:i})=>{const[e,t]=Ie.useState(""),[r,n]=Ie.useState([]),[a,c]=Ie.useState(),[s,h]=Ie.useState(),[p,m]=Ie.useState(""),[y,g]=Ie.useState(""),[x,v]=Ie.useState(!1),{orgUnits:_}=mD();Ie.useEffect(()=>{if(_&&s){const E=AX(s.predictions,s.actualCases.data,"");E.forEach(A=>{A.evaluation.forEach(M=>{const S=_==null?void 0:_.organisationUnits.find(N=>N.id===M.orgUnitId);S&&(M.orgUnitName=S.displayName)})}),c(E),n(CP(s.predictions))}},[_,s]);const C=async E=>(await ea.getBacktestsCrudBacktestsGet()).find(M=>M.id===Number(E)),k=async E=>(await ea.listModelsCrudModelsGet()).find(M=>M.name===E),w=async()=>{v(!0);const E=[.1,.25,.5,.75,.9];try{const[A,M,S]=await Promise.all([C(i),yl.getEvaluationEntriesAnalyticsEvaluationEntryGet(i,E),yl.getActualCasesAnalyticsActualCasesBacktestIdGet(i)]);if(!A)throw new Error("Evaluation info not found");m(A.name??"");const N=await k(A.modelId);g((N==null?void 0:N.displayName)??""),h({predictions:M,actualCases:S})}catch(A){t(A.toString())}finally{v(!1)}};return Ie.useEffect(()=>{w()},[]),z.jsxs("div",{children:[e&&z.jsx("p",{children:"Not available"}),x&&z.jsx("p",{children:"Loading.."}),a&&z.jsx(bQ,{evaluationName:p,modelName:y,evaluations:a,splitPeriods:r})]})},Dte=({jobResults:i})=>{const[e,t]=Ie.useState(!1),[r,n]=Ie.useState(void 0),[a,c]=Ie.useState(!1),[s,h]=Ie.useState(!1),[p,m]=Ie.useState(void 0),[y,g]=Ie.useState(void 0),[x,v]=Ie.useState(!1),[_,C]=Ie.useState(void 0),k=S=>{t(!0),n(S)},w=S=>{h(!0),m(S)},E=S=>{v(!0),C(S)},A=S=>{if(confirm("Are you sure you want to permanently remove this item? Any data entries that depend on this item will also be deleted.")==!0){console.log("Should remove item");const Y=S.result;if(Y)S.type=="dataset"?ea.deleteDatasetCrudDatasetsDatasetIdDelete(parseInt(Y)):S.type=="evaluation"?ea.deleteBacktestCrudBacktestsBacktestIdDelete(parseInt(Y)):S.type=="prediction"&&ea.deletePredictionCrudPredictionsPredictionIdDelete(parseInt(Y));else{const Z=S.id;Bu.deleteJobJobsJobIdDelete(Z)}}},M=S=>{console.log("clicked evaluate dataset id",S),g(S),c(!0)};return z.jsxs(z.Fragment,{children:[i.map((S,N)=>z.jsx(Hee,{i:N,jobResult:S,onClickEvaluateDataset:M,onClickViewEvaluation:w,onClickImport:k,onClickRemove:A,onClickViewLogs:E},N)),e&&z.jsx(Lee,{setIsImportModalOpen:t,isImportModalOpen:e,predictionIdToImport:r}),z.jsx(Ite,{isOpen:a,setIsOpen:c,datasetIdToEvaluate:y}),s&&p&&z.jsx(va,{className:vu.evaluationModal,onClose:()=>{h(!1)},children:z.jsx(Pte,{evaluationId:p})}),x&&z.jsx(va,{className:vu.jobLogsModal,onClose:()=>{v(!1)},children:z.jsx(Yee,{jobId:_})})]})},Rte=()=>z.jsx("div",{children:z.jsxs("div",{className:[vu.jobResultPanelContainer,vu.resultTextHeader].join(" "),children:[z.jsx("div",{className:vu.flexMedium,children:"Name:"}),z.jsx("div",{className:vu.flexMedium,children:"Created:"}),z.jsx("div",{className:vu.flexMedium,children:"Status:"}),z.jsx("div",{className:vu.flexItemRight})]})}),Lte="_noticeBox_18bg1_1",Nte="_details_18bg1_8",zte="_button_18bg1_14",b1={noticeBox:Lte,details:Nte,button:zte},v3=({error:i,type:e})=>{const[t,r]=Ie.useState(!1);return i==null?z.jsx(z.Fragment,{}):z.jsx("div",{children:z.jsxs(xa,{error:!0,title:`Unable to retrieve ${e}. Please try again later.`,className:b1.noticeBox,children:[z.jsx("div",{className:b1.button,children:z.jsx(Ti,{small:!0,onClick:()=>r(!t),children:t?"Hide details":"See details"})}),t&&z.jsx("div",{className:b1.details,children:z.jsx("div",{children:i})})]})})},Ote="_loaderWrapper_iu471_1",jte="_textLoad_iu471_8",Fte="_loader_iu471_1",w1={loaderWrapper:Ote,textLoad:jte,loader:Fte},Bte=({type:i})=>z.jsxs(z.Fragment,{children:[z.jsx("div",{className:w1.loaderWrapper,children:z.jsx("div",{className:w1.loader,children:z.jsx(La,{})})}),z.jsx("p",{className:w1.textLoad,children:z.jsxs("i",{children:["Loading ",i]})})]}),$te="_text_3x5i9_1",Ute={text:$te},Vte=({type:i})=>z.jsxs("div",{className:Ute.text,children:["No ",i," found"]}),Qw=({type:i})=>{const[e,t]=Ie.useState([]),[r,n]=Ie.useState([]),[a,c]=Ie.useState([]),[s,h]=Ie.useState([]),[p,m]=Ie.useState([]),[y,g]=Ie.useState(),[x,v]=Ie.useState(),[_,C]=Ie.useState(!0),k=async S=>{for(let N=0;N<5;N++)try{const Y=await S;return v(void 0),Y}catch(Y){if(N===4)return v((Y==null?void 0:Y.message)??`Couldn't fetch ${i}`),[]}},w=()=>{switch(i){case"predictions":return k(ea.getPredictionsCrudPredictionsGet()).then(S=>n(S));case"datasets":return k(ea.getDatasetsCrudDatasetsGet()).then(S=>c(S));case"evaluations":return k(ea.getBacktestsCrudBacktestsGet()).then(S=>h(S))}},E=async()=>{let S=[];for(let N=0;N<6;N++)try{S=await Bu.listJobsJobsGet();break}catch(Y){if(N===2)return g((Y==null?void 0:Y.message)??"Couldn't fetch jobs"),[]}return g(void 0),S},A=()=>{const S=[];a.filter(Z=>Z.type=="evaluation").forEach(Z=>{S.push({id:"Unknown",name:Z.name,created:new Date(Z.created??""),type:"dataset",status:"SUCCESS",result:Z.id.toString()})}),s.forEach(Z=>{S.push({id:"Unknown",name:Z.name??"",created:new Date(Z.created??""),type:"evaluation",status:"SUCCESS",result:Z.id.toString()})}),r.forEach(Z=>{S.push({id:"Unknown",name:Z.name,created:new Date(Z.created),type:"prediction",status:"SUCCESS",result:Z.id.toString(),datasetId:Z.datasetId,estimatorId:Z.modelId,nPeriods:Z.nPeriods})});const N={predictions:"create_prediction",datasets:"create_dataset",evaluations:"create_backtest"},Y={predictions:"prediction",datasets:"dataset",evaluations:"evaluation"};return e.filter(Z=>Z.status!="SUCCESS"&&Z.type==N[i]).forEach(Z=>{S.push({id:Z.id,name:Z.name,created:new Date(Z.start_time),type:Y[i],status:Z.status})}),S.sort((Z,K)=>K.created.getTime()-Z.created.getTime()),S},M=async()=>{await w();const S=await E();t(S),C(!1)};return Ie.useEffect(()=>{M()},[]),gD(M,5e3),Ie.useEffect(()=>{m(A())},[e,r,s,a]),z.jsxs("div",{children:[z.jsx(v3,{error:y,type:"jobs"}),z.jsx(v3,{error:x,type:i}),_&&z.jsx(Bte,{type:i}),p.length>0&&z.jsx(Rte,{}),p.length==0&&!_&&z.jsx(Vte,{type:i}),z.jsx(Dte,{jobResults:p})]})},Gte=()=>{const[i,e]=Ie.useState(!1),t=()=>{e(!1)};return z.jsxs("div",{children:[z.jsx(Uu,{pageTitle:"Evaluation Datasets",pageDescription:"Historical data used to evaluate the accuracy of predictive models, combining DHIS2 and climate data sources.",setDrawerOpenText:"New Dataset",setDrawerOpen:e}),z.jsx(Qw,{type:"datasets"}),z.jsx(JJ,{isOpen:i,onDrawerClose:()=>e(!1),onDrawerSubmit:t}),z.jsx(Uu,{pageTitle:"Model Evaluations",pageDescription:"Evaluates the accuracy of a predictive model using historical data. Compares actual outcomes with predicted values to assess model performance."}),z.jsx(Qw,{type:"evaluations"})]})},Hte=()=>z.jsx(Gte,{}),vD=({route:i})=>{const{data:e,error:t,isLoading:r}=tl({queryKey:["modelTemplates",i==null?void 0:i.url],queryFn:()=>ea.listModelTemplatesCrudModelTemplatesGet(),enabled:!!i,retry:0,staleTime:3e5,cacheTime:3e5});return{modelTemplates:e,error:t,isLoading:r}},qte={resource:"routes",params:{filter:"code:eq:chap",fields:"id,code,name,displayName,url,authorities,disabled,headers,sharing[public]"}},Xu=()=>{const{data:i,error:e,isLoading:t,isError:r}=ef({queryKey:["routes","chap"],query:qte,select:n=>n.routes[0],staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return{route:i,error:e,isLoading:t,isError:r}},Wte="_loadingContainer_1kfpp_1",Yte="_backButton_1kfpp_8",Zte="_errorContainer_1kfpp_12",Xte="_emptyContainer_1kfpp_20",m0={loadingContainer:Wte,backButton:Yte,errorContainer:Zte,emptyContainer:Xte};var Wg=i=>i.type==="checkbox",Bd=i=>i instanceof Date,Wa=i=>i==null;const xD=i=>typeof i=="object";var ys=i=>!Wa(i)&&!Array.isArray(i)&&xD(i)&&!Bd(i),bD=i=>ys(i)&&i.target?Wg(i.target)?i.target.checked:i.target.value:i,Kte=i=>i.substring(0,i.search(/\.\d+(\.|$)/))||i,wD=(i,e)=>i.has(Kte(e)),Qte=i=>{const e=i.constructor&&i.constructor.prototype;return ys(e)&&e.hasOwnProperty("isPrototypeOf")},pC=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Wn(i){let e;const t=Array.isArray(i),r=typeof FileList<"u"?i instanceof FileList:!1;if(i instanceof Date)e=new Date(i);else if(i instanceof Set)e=new Set(i);else if(!(pC&&(i instanceof Blob||r))&&(t||ys(i)))if(e=t?[]:{},!t&&!Qte(i))e=i;else for(const n in i)i.hasOwnProperty(n)&&(e[n]=Wn(i[n]));else return i;return e}var Yg=i=>Array.isArray(i)?i.filter(Boolean):[],Rn=i=>i===void 0,ai=(i,e,t)=>{if(!e||!ys(i))return t;const r=Yg(e.split(/[,[\].]+?/)).reduce((n,a)=>Wa(n)?n:n[a],i);return Rn(r)||r===i?Rn(i[e])?t:i[e]:r},Po=i=>typeof i=="boolean",fC=i=>/^\w*$/.test(i),_D=i=>Yg(i.replace(/["|']|\]/g,"").split(/\.|\[/)),Kr=(i,e,t)=>{let r=-1;const n=fC(e)?[e]:_D(e),a=n.length,c=a-1;for(;++r<a;){const s=n[r];let h=t;if(r!==c){const p=i[s];h=ys(p)||Array.isArray(p)?p:isNaN(+n[r+1])?{}:[]}if(s==="__proto__"||s==="constructor"||s==="prototype")return;i[s]=h,i=i[s]}};const wv={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Zo={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Tc={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},CD=de.createContext(null),Vc=()=>de.useContext(CD),Jte=i=>{const{children:e,...t}=i;return de.createElement(CD.Provider,{value:t},e)};var TD=(i,e,t,r=!0)=>{const n={defaultValues:e._defaultValues};for(const a in i)Object.defineProperty(n,a,{get:()=>{const c=a;return e._proxyFormState[c]!==Zo.all&&(e._proxyFormState[c]=!r||Zo.all),t&&(t[c]=!0),i[c]}});return n};const mC=typeof window<"u"?Ie.useLayoutEffect:Ie.useEffect;function eie(i){const e=Vc(),{control:t=e.control,disabled:r,name:n,exact:a}=i||{},[c,s]=de.useState(t._formState),h=de.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return mC(()=>t._subscribe({name:n,formState:h.current,exact:a,callback:p=>{!r&&s({...t._formState,...p})}}),[n,r,a]),de.useEffect(()=>{h.current.isValid&&t._setValid(!0)},[t]),de.useMemo(()=>TD(c,t,h.current,!1),[c,t])}var $l=i=>typeof i=="string",SD=(i,e,t,r,n)=>$l(i)?(r&&e.watch.add(i),ai(t,i,n)):Array.isArray(i)?i.map(a=>(r&&e.watch.add(a),ai(t,a))):(r&&(e.watchAll=!0),t);function jc(i){const e=Vc(),{control:t=e.control,name:r,defaultValue:n,disabled:a,exact:c}=i||{},s=de.useRef(n),[h,p]=de.useState(t._getWatch(r,s.current));return mC(()=>t._subscribe({name:r,formState:{values:!0},exact:c,callback:m=>!a&&p(SD(r,t._names,m.values||t._formValues,!1,s.current))}),[r,t,a,c]),de.useEffect(()=>t._removeUnmounted()),h}function tie(i){const e=Vc(),{name:t,disabled:r,control:n=e.control,shouldUnregister:a}=i,c=wD(n._names.array,t),s=jc({control:n,name:t,defaultValue:ai(n._formValues,t,ai(n._defaultValues,t,i.defaultValue)),exact:!0}),h=eie({control:n,name:t,exact:!0}),p=de.useRef(i),m=de.useRef(n.register(t,{...i.rules,value:s,...Po(i.disabled)?{disabled:i.disabled}:{}})),y=de.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ai(h.errors,t)},isDirty:{enumerable:!0,get:()=>!!ai(h.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!ai(h.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!ai(h.validatingFields,t)},error:{enumerable:!0,get:()=>ai(h.errors,t)}}),[h,t]),g=de.useCallback(C=>m.current.onChange({target:{value:bD(C),name:t},type:wv.CHANGE}),[t]),x=de.useCallback(()=>m.current.onBlur({target:{value:ai(n._formValues,t),name:t},type:wv.BLUR}),[t,n._formValues]),v=de.useCallback(C=>{const k=ai(n._fields,t);k&&C&&(k._f.ref={focus:()=>C.focus(),select:()=>C.select(),setCustomValidity:w=>C.setCustomValidity(w),reportValidity:()=>C.reportValidity()})},[n._fields,t]),_=de.useMemo(()=>({name:t,value:s,...Po(r)||h.disabled?{disabled:h.disabled||r}:{},onChange:g,onBlur:x,ref:v}),[t,r,h.disabled,g,x,v,s]);return de.useEffect(()=>{const C=n._options.shouldUnregister||a;n.register(t,{...p.current.rules,...Po(p.current.disabled)?{disabled:p.current.disabled}:{}});const k=(w,E)=>{const A=ai(n._fields,w);A&&A._f&&(A._f.mount=E)};if(k(t,!0),C){const w=Wn(ai(n._options.defaultValues,t));Kr(n._defaultValues,t,w),Rn(ai(n._formValues,t))&&Kr(n._formValues,t,w)}return!c&&n.register(t),()=>{(c?C&&!n._state.action:C)?n.unregister(t):k(t,!1)}},[t,n,c,a]),de.useEffect(()=>{n._setDisabledField({disabled:r,name:t})},[r,t,n]),de.useMemo(()=>({field:_,formState:h,fieldState:y}),[_,h,y])}const el=i=>i.render(tie(i));var ED=(i,e,t,r,n)=>e?{...t[i],types:{...t[i]&&t[i].types?t[i].types:{},[r]:n||!0}}:{},ho=i=>Array.isArray(i)?i:[i],x3=()=>{let i=[];return{get observers(){return i},next:n=>{for(const a of i)a.next&&a.next(n)},subscribe:n=>(i.push(n),{unsubscribe:()=>{i=i.filter(a=>a!==n)}}),unsubscribe:()=>{i=[]}}},Jw=i=>Wa(i)||!xD(i);function _u(i,e){if(Jw(i)||Jw(e))return i===e;if(Bd(i)&&Bd(e))return i.getTime()===e.getTime();const t=Object.keys(i),r=Object.keys(e);if(t.length!==r.length)return!1;for(const n of t){const a=i[n];if(!r.includes(n))return!1;if(n!=="ref"){const c=e[n];if(Bd(a)&&Bd(c)||ys(a)&&ys(c)||Array.isArray(a)&&Array.isArray(c)?!_u(a,c):a!==c)return!1}}return!0}var Ia=i=>ys(i)&&!Object.keys(i).length,gC=i=>i.type==="file",hl=i=>typeof i=="function",_v=i=>{if(!pC)return!1;const e=i?i.ownerDocument:0;return i instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},kD=i=>i.type==="select-multiple",yC=i=>i.type==="radio",iie=i=>yC(i)||Wg(i),_1=i=>_v(i)&&i.isConnected;function rie(i,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)i=Rn(i)?r++:i[e[r++]];return i}function nie(i){for(const e in i)if(i.hasOwnProperty(e)&&!Rn(i[e]))return!1;return!0}function ws(i,e){const t=Array.isArray(e)?e:fC(e)?[e]:_D(e),r=t.length===1?i:rie(i,t),n=t.length-1,a=t[n];return r&&delete r[a],n!==0&&(ys(r)&&Ia(r)||Array.isArray(r)&&nie(r))&&ws(i,t.slice(0,-1)),i}var MD=i=>{for(const e in i)if(hl(i[e]))return!0;return!1};function Cv(i,e={}){const t=Array.isArray(i);if(ys(i)||t)for(const r in i)Array.isArray(i[r])||ys(i[r])&&!MD(i[r])?(e[r]=Array.isArray(i[r])?[]:{},Cv(i[r],e[r])):Wa(i[r])||(e[r]=!0);return e}function AD(i,e,t){const r=Array.isArray(i);if(ys(i)||r)for(const n in i)Array.isArray(i[n])||ys(i[n])&&!MD(i[n])?Rn(e)||Jw(t[n])?t[n]=Array.isArray(i[n])?Cv(i[n],[]):{...Cv(i[n])}:AD(i[n],Wa(e)?{}:e[n],t[n]):t[n]=!_u(i[n],e[n]);return t}var pm=(i,e)=>AD(i,e,Cv(e));const b3={value:!1,isValid:!1},w3={value:!0,isValid:!0};var ID=i=>{if(Array.isArray(i)){if(i.length>1){const e=i.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return i[0].checked&&!i[0].disabled?i[0].attributes&&!Rn(i[0].attributes.value)?Rn(i[0].value)||i[0].value===""?w3:{value:i[0].value,isValid:!0}:w3:b3}return b3},PD=(i,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>Rn(i)?i:e?i===""?NaN:i&&+i:t&&$l(i)?new Date(i):r?r(i):i;const _3={isValid:!1,value:null};var DD=i=>Array.isArray(i)?i.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,_3):_3;function C3(i){const e=i.ref;return gC(e)?e.files:yC(e)?DD(i.refs).value:kD(e)?[...e.selectedOptions].map(({value:t})=>t):Wg(e)?ID(i.refs).value:PD(Rn(e.value)?i.ref.value:e.value,i)}var sie=(i,e,t,r)=>{const n={};for(const a of i){const c=ai(e,a);c&&Kr(n,a,c._f)}return{criteriaMode:t,names:[...i],fields:n,shouldUseNativeValidation:r}},Tv=i=>i instanceof RegExp,fm=i=>Rn(i)?i:Tv(i)?i.source:ys(i)?Tv(i.value)?i.value.source:i.value:i,yp=i=>({isOnSubmit:!i||i===Zo.onSubmit,isOnBlur:i===Zo.onBlur,isOnChange:i===Zo.onChange,isOnAll:i===Zo.all,isOnTouch:i===Zo.onTouched});const T3="AsyncFunction";var aie=i=>!!i&&!!i.validate&&!!(hl(i.validate)&&i.validate.constructor.name===T3||ys(i.validate)&&Object.values(i.validate).find(e=>e.constructor.name===T3)),oie=i=>i.mount&&(i.required||i.min||i.max||i.maxLength||i.minLength||i.pattern||i.validate),e_=(i,e,t)=>!t&&(e.watchAll||e.watch.has(i)||[...e.watch].some(r=>i.startsWith(r)&&/^\.\w+/.test(i.slice(r.length))));const Tp=(i,e,t,r)=>{for(const n of t||Object.keys(i)){const a=ai(i,n);if(a){const{_f:c,...s}=a;if(c){if(c.refs&&c.refs[0]&&e(c.refs[0],n)&&!r)return!0;if(c.ref&&e(c.ref,c.name)&&!r)return!0;if(Tp(s,e))break}else if(ys(s)&&Tp(s,e))break}}};function S3(i,e,t){const r=ai(i,t);if(r||fC(t))return{error:r,name:t};const n=t.split(".");for(;n.length;){const a=n.join("."),c=ai(e,a),s=ai(i,a);if(c&&!Array.isArray(c)&&t!==a)return{name:t};if(s&&s.type)return{name:a,error:s};n.pop()}return{name:t}}var lie=(i,e,t,r)=>{t(i);const{name:n,...a}=i;return Ia(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(c=>e[c]===(!r||Zo.all))},cie=(i,e,t)=>!i||!e||i===e||ho(i).some(r=>r&&(t?r===e:r.startsWith(e)||e.startsWith(r))),uie=(i,e,t,r,n)=>n.isOnAll?!1:!t&&n.isOnTouch?!(e||i):(t?r.isOnBlur:n.isOnBlur)?!i:(t?r.isOnChange:n.isOnChange)?i:!0,die=(i,e)=>!Yg(ai(i,e)).length&&ws(i,e),RD=(i,e,t)=>{const r=ho(ai(i,t));return Kr(r,"root",e[t]),Kr(i,t,r),i},G0=i=>$l(i);function E3(i,e,t="validate"){if(G0(i)||Array.isArray(i)&&i.every(G0)||Po(i)&&!i)return{type:t,message:G0(i)?i:"",ref:e}}var cp=i=>ys(i)&&!Tv(i)?i:{value:i,message:""},t_=async(i,e,t,r,n,a)=>{const{ref:c,refs:s,required:h,maxLength:p,minLength:m,min:y,max:g,pattern:x,validate:v,name:_,valueAsNumber:C,mount:k}=i._f,w=ai(t,_);if(!k||e.has(_))return{};const E=s?s[0]:c,A=$=>{n&&E.reportValidity&&(E.setCustomValidity(Po($)?"":$||""),E.reportValidity())},M={},S=yC(c),N=Wg(c),Y=S||N,Z=(C||gC(c))&&Rn(c.value)&&Rn(w)||_v(c)&&c.value===""||w===""||Array.isArray(w)&&!w.length,K=ED.bind(null,_,r,M),U=($,B,R,L=Tc.maxLength,G=Tc.minLength)=>{const F=$?B:R;M[_]={type:$?L:G,message:F,ref:c,...K($?L:G,F)}};if(a?!Array.isArray(w)||!w.length:h&&(!Y&&(Z||Wa(w))||Po(w)&&!w||N&&!ID(s).isValid||S&&!DD(s).isValid)){const{value:$,message:B}=G0(h)?{value:!!h,message:h}:cp(h);if($&&(M[_]={type:Tc.required,message:B,ref:E,...K(Tc.required,B)},!r))return A(B),M}if(!Z&&(!Wa(y)||!Wa(g))){let $,B;const R=cp(g),L=cp(y);if(!Wa(w)&&!isNaN(w)){const G=c.valueAsNumber||w&&+w;Wa(R.value)||($=G>R.value),Wa(L.value)||(B=G<L.value)}else{const G=c.valueAsDate||new Date(w),F=W=>new Date(new Date().toDateString()+" "+W),j=c.type=="time",q=c.type=="week";$l(R.value)&&w&&($=j?F(w)>F(R.value):q?w>R.value:G>new Date(R.value)),$l(L.value)&&w&&(B=j?F(w)<F(L.value):q?w<L.value:G<new Date(L.value))}if(($||B)&&(U(!!$,R.message,L.message,Tc.max,Tc.min),!r))return A(M[_].message),M}if((p||m)&&!Z&&($l(w)||a&&Array.isArray(w))){const $=cp(p),B=cp(m),R=!Wa($.value)&&w.length>+$.value,L=!Wa(B.value)&&w.length<+B.value;if((R||L)&&(U(R,$.message,B.message),!r))return A(M[_].message),M}if(x&&!Z&&$l(w)){const{value:$,message:B}=cp(x);if(Tv($)&&!w.match($)&&(M[_]={type:Tc.pattern,message:B,ref:c,...K(Tc.pattern,B)},!r))return A(B),M}if(v){if(hl(v)){const $=await v(w,t),B=E3($,E);if(B&&(M[_]={...B,...K(Tc.validate,B.message)},!r))return A(B.message),M}else if(ys(v)){let $={};for(const B in v){if(!Ia($)&&!r)break;const R=E3(await v[B](w,t),E,B);R&&($={...R,...K(B,R.message)},A(R.message),r&&(M[_]=$))}if(!Ia($)&&(M[_]={ref:E,...$},!r))return M}}return A(!0),M};const hie={mode:Zo.onSubmit,reValidateMode:Zo.onChange,shouldFocusError:!0};function pie(i={}){let e={...hie,...i},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:hl(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let n=ys(e.defaultValues)||ys(e.values)?Wn(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Wn(n),c={action:!1,mount:!1,watch:!1},s={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},h,p=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let y={...m};const g={array:x3(),state:x3()},x=e.criteriaMode===Zo.all,v=me=>Re=>{clearTimeout(p),p=setTimeout(me,Re)},_=async me=>{if(!e.disabled&&(m.isValid||y.isValid||me)){const Re=e.resolver?Ia((await N()).errors):await Z(r,!0);Re!==t.isValid&&g.state.next({isValid:Re})}},C=(me,Re)=>{!e.disabled&&(m.isValidating||m.validatingFields||y.isValidating||y.validatingFields)&&((me||Array.from(s.mount)).forEach($e=>{$e&&(Re?Kr(t.validatingFields,$e,Re):ws(t.validatingFields,$e))}),g.state.next({validatingFields:t.validatingFields,isValidating:!Ia(t.validatingFields)}))},k=(me,Re=[],$e,De,Se=!0,Pe=!0)=>{if(De&&$e&&!e.disabled){if(c.action=!0,Pe&&Array.isArray(ai(r,me))){const Fe=$e(ai(r,me),De.argA,De.argB);Se&&Kr(r,me,Fe)}if(Pe&&Array.isArray(ai(t.errors,me))){const Fe=$e(ai(t.errors,me),De.argA,De.argB);Se&&Kr(t.errors,me,Fe),die(t.errors,me)}if((m.touchedFields||y.touchedFields)&&Pe&&Array.isArray(ai(t.touchedFields,me))){const Fe=$e(ai(t.touchedFields,me),De.argA,De.argB);Se&&Kr(t.touchedFields,me,Fe)}(m.dirtyFields||y.dirtyFields)&&(t.dirtyFields=pm(n,a)),g.state.next({name:me,isDirty:U(me,Re),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else Kr(a,me,Re)},w=(me,Re)=>{Kr(t.errors,me,Re),g.state.next({errors:t.errors})},E=me=>{t.errors=me,g.state.next({errors:t.errors,isValid:!1})},A=(me,Re,$e,De)=>{const Se=ai(r,me);if(Se){const Pe=ai(a,me,Rn($e)?ai(n,me):$e);Rn(Pe)||De&&De.defaultChecked||Re?Kr(a,me,Re?Pe:C3(Se._f)):R(me,Pe),c.mount&&_()}},M=(me,Re,$e,De,Se)=>{let Pe=!1,Fe=!1;const je={name:me};if(!e.disabled){if(!$e||De){(m.isDirty||y.isDirty)&&(Fe=t.isDirty,t.isDirty=je.isDirty=U(),Pe=Fe!==je.isDirty);const He=_u(ai(n,me),Re);Fe=!!ai(t.dirtyFields,me),He?ws(t.dirtyFields,me):Kr(t.dirtyFields,me,!0),je.dirtyFields=t.dirtyFields,Pe=Pe||(m.dirtyFields||y.dirtyFields)&&Fe!==!He}if($e){const He=ai(t.touchedFields,me);He||(Kr(t.touchedFields,me,$e),je.touchedFields=t.touchedFields,Pe=Pe||(m.touchedFields||y.touchedFields)&&He!==$e)}Pe&&Se&&g.state.next(je)}return Pe?je:{}},S=(me,Re,$e,De)=>{const Se=ai(t.errors,me),Pe=(m.isValid||y.isValid)&&Po(Re)&&t.isValid!==Re;if(e.delayError&&$e?(h=v(()=>w(me,$e)),h(e.delayError)):(clearTimeout(p),h=null,$e?Kr(t.errors,me,$e):ws(t.errors,me)),($e?!_u(Se,$e):Se)||!Ia(De)||Pe){const Fe={...De,...Pe&&Po(Re)?{isValid:Re}:{},errors:t.errors,name:me};t={...t,...Fe},g.state.next(Fe)}},N=async me=>{C(me,!0);const Re=await e.resolver(a,e.context,sie(me||s.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return C(me),Re},Y=async me=>{const{errors:Re}=await N(me);if(me)for(const $e of me){const De=ai(Re,$e);De?Kr(t.errors,$e,De):ws(t.errors,$e)}else t.errors=Re;return Re},Z=async(me,Re,$e={valid:!0})=>{for(const De in me){const Se=me[De];if(Se){const{_f:Pe,...Fe}=Se;if(Pe){const je=s.array.has(Pe.name),He=Se._f&&aie(Se._f);He&&m.validatingFields&&C([De],!0);const Qe=await t_(Se,s.disabled,a,x,e.shouldUseNativeValidation&&!Re,je);if(He&&m.validatingFields&&C([De]),Qe[Pe.name]&&($e.valid=!1,Re))break;!Re&&(ai(Qe,Pe.name)?je?RD(t.errors,Qe,Pe.name):Kr(t.errors,Pe.name,Qe[Pe.name]):ws(t.errors,Pe.name))}!Ia(Fe)&&await Z(Fe,Re,$e)}}return $e.valid},K=()=>{for(const me of s.unMount){const Re=ai(r,me);Re&&(Re._f.refs?Re._f.refs.every($e=>!_1($e)):!_1(Re._f.ref))&&Ee(me)}s.unMount=new Set},U=(me,Re)=>!e.disabled&&(me&&Re&&Kr(a,me,Re),!_u(W(),n)),$=(me,Re,$e)=>SD(me,s,{...c.mount?a:Rn(Re)?n:$l(me)?{[me]:Re}:Re},$e,Re),B=me=>Yg(ai(c.mount?a:n,me,e.shouldUnregister?ai(n,me,[]):[])),R=(me,Re,$e={})=>{const De=ai(r,me);let Se=Re;if(De){const Pe=De._f;Pe&&(!Pe.disabled&&Kr(a,me,PD(Re,Pe)),Se=_v(Pe.ref)&&Wa(Re)?"":Re,kD(Pe.ref)?[...Pe.ref.options].forEach(Fe=>Fe.selected=Se.includes(Fe.value)):Pe.refs?Wg(Pe.ref)?Pe.refs.forEach(Fe=>{(!Fe.defaultChecked||!Fe.disabled)&&(Array.isArray(Se)?Fe.checked=!!Se.find(je=>je===Fe.value):Fe.checked=Se===Fe.value||!!Se)}):Pe.refs.forEach(Fe=>Fe.checked=Fe.value===Se):gC(Pe.ref)?Pe.ref.value="":(Pe.ref.value=Se,Pe.ref.type||g.state.next({name:me,values:Wn(a)})))}($e.shouldDirty||$e.shouldTouch)&&M(me,Se,$e.shouldTouch,$e.shouldDirty,!0),$e.shouldValidate&&q(me)},L=(me,Re,$e)=>{for(const De in Re){if(!Re.hasOwnProperty(De))return;const Se=Re[De],Pe=`${me}.${De}`,Fe=ai(r,Pe);(s.array.has(me)||ys(Se)||Fe&&!Fe._f)&&!Bd(Se)?L(Pe,Se,$e):R(Pe,Se,$e)}},G=(me,Re,$e={})=>{const De=ai(r,me),Se=s.array.has(me),Pe=Wn(Re);Kr(a,me,Pe),Se?(g.array.next({name:me,values:Wn(a)}),(m.isDirty||m.dirtyFields||y.isDirty||y.dirtyFields)&&$e.shouldDirty&&g.state.next({name:me,dirtyFields:pm(n,a),isDirty:U(me,Pe)})):De&&!De._f&&!Wa(Pe)?L(me,Pe,$e):R(me,Pe,$e),e_(me,s)&&g.state.next({...t}),g.state.next({name:c.mount?me:void 0,values:Wn(a)})},F=async me=>{c.mount=!0;const Re=me.target;let $e=Re.name,De=!0;const Se=ai(r,$e),Pe=He=>{De=Number.isNaN(He)||Bd(He)&&isNaN(He.getTime())||_u(He,ai(a,$e,He))},Fe=yp(e.mode),je=yp(e.reValidateMode);if(Se){let He,Qe;const at=Re.type?C3(Se._f):bD(me),rt=me.type===wv.BLUR||me.type===wv.FOCUS_OUT,dt=!oie(Se._f)&&!e.resolver&&!ai(t.errors,$e)&&!Se._f.deps||uie(rt,ai(t.touchedFields,$e),t.isSubmitted,je,Fe),gt=e_($e,s,rt);Kr(a,$e,at),rt?(Se._f.onBlur&&Se._f.onBlur(me),h&&h(0)):Se._f.onChange&&Se._f.onChange(me);const Tt=M($e,at,rt),Nt=!Ia(Tt)||gt;if(!rt&&g.state.next({name:$e,type:me.type,values:Wn(a)}),dt)return(m.isValid||y.isValid)&&(e.mode==="onBlur"?rt&&_():rt||_()),Nt&&g.state.next({name:$e,...gt?{}:Tt});if(!rt&&gt&&g.state.next({...t}),e.resolver){const{errors:mt}=await N([$e]);if(Pe(at),De){const St=S3(t.errors,r,$e),kt=S3(mt,r,St.name||$e);He=kt.error,$e=kt.name,Qe=Ia(mt)}}else C([$e],!0),He=(await t_(Se,s.disabled,a,x,e.shouldUseNativeValidation))[$e],C([$e]),Pe(at),De&&(He?Qe=!1:(m.isValid||y.isValid)&&(Qe=await Z(r,!0)));De&&(Se._f.deps&&q(Se._f.deps),S($e,Qe,He,Tt))}},j=(me,Re)=>{if(ai(t.errors,Re)&&me.focus)return me.focus(),1},q=async(me,Re={})=>{let $e,De;const Se=ho(me);if(e.resolver){const Pe=await Y(Rn(me)?me:Se);$e=Ia(Pe),De=me?!Se.some(Fe=>ai(Pe,Fe)):$e}else me?(De=(await Promise.all(Se.map(async Pe=>{const Fe=ai(r,Pe);return await Z(Fe&&Fe._f?{[Pe]:Fe}:Fe)}))).every(Boolean),!(!De&&!t.isValid)&&_()):De=$e=await Z(r);return g.state.next({...!$l(me)||(m.isValid||y.isValid)&&$e!==t.isValid?{}:{name:me},...e.resolver||!me?{isValid:$e}:{},errors:t.errors}),Re.shouldFocus&&!De&&Tp(r,j,me?Se:s.mount),De},W=me=>{const Re={...c.mount?a:n};return Rn(me)?Re:$l(me)?ai(Re,me):me.map($e=>ai(Re,$e))},se=(me,Re)=>({invalid:!!ai((Re||t).errors,me),isDirty:!!ai((Re||t).dirtyFields,me),error:ai((Re||t).errors,me),isValidating:!!ai(t.validatingFields,me),isTouched:!!ai((Re||t).touchedFields,me)}),fe=me=>{me&&ho(me).forEach(Re=>ws(t.errors,Re)),g.state.next({errors:me?t.errors:{}})},ee=(me,Re,$e)=>{const De=(ai(r,me,{_f:{}})._f||{}).ref,Se=ai(t.errors,me)||{},{ref:Pe,message:Fe,type:je,...He}=Se;Kr(t.errors,me,{...He,...Re,ref:De}),g.state.next({name:me,errors:t.errors,isValid:!1}),$e&&$e.shouldFocus&&De&&De.focus&&De.focus()},oe=(me,Re)=>hl(me)?g.state.subscribe({next:$e=>me($(void 0,Re),$e)}):$(me,Re,!0),Ce=me=>g.state.subscribe({next:Re=>{cie(me.name,Re.name,me.exact)&&lie(Re,me.formState||m,Ne,me.reRenderRoot)&&me.callback({values:{...a},...t,...Re})}}).unsubscribe,ge=me=>(c.mount=!0,y={...y,...me.formState},Ce({...me,formState:y})),Ee=(me,Re={})=>{for(const $e of me?ho(me):s.mount)s.mount.delete($e),s.array.delete($e),Re.keepValue||(ws(r,$e),ws(a,$e)),!Re.keepError&&ws(t.errors,$e),!Re.keepDirty&&ws(t.dirtyFields,$e),!Re.keepTouched&&ws(t.touchedFields,$e),!Re.keepIsValidating&&ws(t.validatingFields,$e),!e.shouldUnregister&&!Re.keepDefaultValue&&ws(n,$e);g.state.next({values:Wn(a)}),g.state.next({...t,...Re.keepDirty?{isDirty:U()}:{}}),!Re.keepIsValid&&_()},J=({disabled:me,name:Re})=>{(Po(me)&&c.mount||me||s.disabled.has(Re))&&(me?s.disabled.add(Re):s.disabled.delete(Re))},ie=(me,Re={})=>{let $e=ai(r,me);const De=Po(Re.disabled)||Po(e.disabled);return Kr(r,me,{...$e||{},_f:{...$e&&$e._f?$e._f:{ref:{name:me}},name:me,mount:!0,...Re}}),s.mount.add(me),$e?J({disabled:Po(Re.disabled)?Re.disabled:e.disabled,name:me}):A(me,!0,Re.value),{...De?{disabled:Re.disabled||e.disabled}:{},...e.progressive?{required:!!Re.required,min:fm(Re.min),max:fm(Re.max),minLength:fm(Re.minLength),maxLength:fm(Re.maxLength),pattern:fm(Re.pattern)}:{},name:me,onChange:F,onBlur:F,ref:Se=>{if(Se){ie(me,Re),$e=ai(r,me);const Pe=Rn(Se.value)&&Se.querySelectorAll&&Se.querySelectorAll("input,select,textarea")[0]||Se,Fe=iie(Pe),je=$e._f.refs||[];if(Fe?je.find(He=>He===Pe):Pe===$e._f.ref)return;Kr(r,me,{_f:{...$e._f,...Fe?{refs:[...je.filter(_1),Pe,...Array.isArray(ai(n,me))?[{}]:[]],ref:{type:Pe.type,name:me}}:{ref:Pe}}}),A(me,!1,void 0,Pe)}else $e=ai(r,me,{}),$e._f&&($e._f.mount=!1),(e.shouldUnregister||Re.shouldUnregister)&&!(wD(s.array,me)&&c.action)&&s.unMount.add(me)}}},le=()=>e.shouldFocusError&&Tp(r,j,s.mount),be=me=>{Po(me)&&(g.state.next({disabled:me}),Tp(r,(Re,$e)=>{const De=ai(r,$e);De&&(Re.disabled=De._f.disabled||me,Array.isArray(De._f.refs)&&De._f.refs.forEach(Se=>{Se.disabled=De._f.disabled||me}))},0,!1))},te=(me,Re)=>async $e=>{let De;$e&&($e.preventDefault&&$e.preventDefault(),$e.persist&&$e.persist());let Se=Wn(a);if(g.state.next({isSubmitting:!0}),e.resolver){const{errors:Pe,values:Fe}=await N();t.errors=Pe,Se=Fe}else await Z(r);if(s.disabled.size)for(const Pe of s.disabled)Kr(Se,Pe,void 0);if(ws(t.errors,"root"),Ia(t.errors)){g.state.next({errors:{}});try{await me(Se,$e)}catch(Pe){De=Pe}}else Re&&await Re({...t.errors},$e),le(),setTimeout(le);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ia(t.errors)&&!De,submitCount:t.submitCount+1,errors:t.errors}),De)throw De},ae=(me,Re={})=>{ai(r,me)&&(Rn(Re.defaultValue)?G(me,Wn(ai(n,me))):(G(me,Re.defaultValue),Kr(n,me,Wn(Re.defaultValue))),Re.keepTouched||ws(t.touchedFields,me),Re.keepDirty||(ws(t.dirtyFields,me),t.isDirty=Re.defaultValue?U(me,Wn(ai(n,me))):U()),Re.keepError||(ws(t.errors,me),m.isValid&&_()),g.state.next({...t}))},ce=(me,Re={})=>{const $e=me?Wn(me):n,De=Wn($e),Se=Ia(me),Pe=Se?n:De;if(Re.keepDefaultValues||(n=$e),!Re.keepValues){if(Re.keepDirtyValues){const Fe=new Set([...s.mount,...Object.keys(pm(n,a))]);for(const je of Array.from(Fe))ai(t.dirtyFields,je)?Kr(Pe,je,ai(a,je)):G(je,ai(Pe,je))}else{if(pC&&Rn(me))for(const Fe of s.mount){const je=ai(r,Fe);if(je&&je._f){const He=Array.isArray(je._f.refs)?je._f.refs[0]:je._f.ref;if(_v(He)){const Qe=He.closest("form");if(Qe){Qe.reset();break}}}}for(const Fe of s.mount)G(Fe,ai(Pe,Fe))}a=Wn(Pe),g.array.next({values:{...Pe}}),g.state.next({values:{...Pe}})}s={mount:Re.keepDirtyValues?s.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!m.isValid||!!Re.keepIsValid||!!Re.keepDirtyValues,c.watch=!!e.shouldUnregister,g.state.next({submitCount:Re.keepSubmitCount?t.submitCount:0,isDirty:Se?!1:Re.keepDirty?t.isDirty:!!(Re.keepDefaultValues&&!_u(me,n)),isSubmitted:Re.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:Se?{}:Re.keepDirtyValues?Re.keepDefaultValues&&a?pm(n,a):t.dirtyFields:Re.keepDefaultValues&&me?pm(n,me):Re.keepDirty?t.dirtyFields:{},touchedFields:Re.keepTouched?t.touchedFields:{},errors:Re.keepErrors?t.errors:{},isSubmitSuccessful:Re.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},xe=(me,Re)=>ce(hl(me)?me(a):me,Re),_e=(me,Re={})=>{const $e=ai(r,me),De=$e&&$e._f;if(De){const Se=De.refs?De.refs[0]:De.ref;Se.focus&&(Se.focus(),Re.shouldSelect&&hl(Se.select)&&Se.select())}},Ne=me=>{t={...t,...me}},Le={control:{register:ie,unregister:Ee,getFieldState:se,handleSubmit:te,setError:ee,_subscribe:Ce,_runSchema:N,_getWatch:$,_getDirty:U,_setValid:_,_setFieldArray:k,_setDisabledField:J,_setErrors:E,_getFieldArray:B,_reset:ce,_resetDefaultValues:()=>hl(e.defaultValues)&&e.defaultValues().then(me=>{xe(me,e.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:K,_disableForm:be,_subjects:g,_proxyFormState:m,get _fields(){return r},get _formValues(){return a},get _state(){return c},set _state(me){c=me},get _defaultValues(){return n},get _names(){return s},set _names(me){s=me},get _formState(){return t},get _options(){return e},set _options(me){e={...e,...me}}},subscribe:ge,trigger:q,register:ie,handleSubmit:te,watch:oe,setValue:G,getValues:W,reset:xe,resetField:ae,clearErrors:fe,unregister:Ee,setError:ee,setFocus:_e,getFieldState:se};return{...Le,formControl:Le}}var pu=()=>{const i=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=(Math.random()*16+i)%16|0;return(e=="x"?t:t&3|8).toString(16)})},C1=(i,e,t={})=>t.shouldFocus||Rn(t.shouldFocus)?t.focusName||`${i}.${Rn(t.focusIndex)?e:t.focusIndex}.`:"",T1=(i,e)=>[...i,...ho(e)],S1=i=>Array.isArray(i)?i.map(()=>{}):void 0;function E1(i,e,t){return[...i.slice(0,e),...ho(t),...i.slice(e)]}var k1=(i,e,t)=>Array.isArray(i)?(Rn(i[t])&&(i[t]=void 0),i.splice(t,0,i.splice(e,1)[0]),i):[],M1=(i,e)=>[...ho(e),...ho(i)];function fie(i,e){let t=0;const r=[...i];for(const n of e)r.splice(n-t,1),t++;return Yg(r).length?r:[]}var A1=(i,e)=>Rn(e)?[]:fie(i,ho(e).sort((t,r)=>t-r)),I1=(i,e,t)=>{[i[e],i[t]]=[i[t],i[e]]},k3=(i,e,t)=>(i[e]=t,i);function mie(i){const e=Vc(),{control:t=e.control,name:r,keyName:n="id",shouldUnregister:a,rules:c}=i,[s,h]=de.useState(t._getFieldArray(r)),p=de.useRef(t._getFieldArray(r).map(pu)),m=de.useRef(s),y=de.useRef(r),g=de.useRef(!1);y.current=r,m.current=s,t._names.array.add(r),c&&t.register(r,c),de.useEffect(()=>t._subjects.array.subscribe({next:({values:S,name:N})=>{if(N===y.current||!N){const Y=ai(S,y.current);Array.isArray(Y)&&(h(Y),p.current=Y.map(pu))}}}).unsubscribe,[t]);const x=de.useCallback(S=>{g.current=!0,t._setFieldArray(r,S)},[t,r]),v=(S,N)=>{const Y=ho(Wn(S)),Z=T1(t._getFieldArray(r),Y);t._names.focus=C1(r,Z.length-1,N),p.current=T1(p.current,Y.map(pu)),x(Z),h(Z),t._setFieldArray(r,Z,T1,{argA:S1(S)})},_=(S,N)=>{const Y=ho(Wn(S)),Z=M1(t._getFieldArray(r),Y);t._names.focus=C1(r,0,N),p.current=M1(p.current,Y.map(pu)),x(Z),h(Z),t._setFieldArray(r,Z,M1,{argA:S1(S)})},C=S=>{const N=A1(t._getFieldArray(r),S);p.current=A1(p.current,S),x(N),h(N),!Array.isArray(ai(t._fields,r))&&Kr(t._fields,r,void 0),t._setFieldArray(r,N,A1,{argA:S})},k=(S,N,Y)=>{const Z=ho(Wn(N)),K=E1(t._getFieldArray(r),S,Z);t._names.focus=C1(r,S,Y),p.current=E1(p.current,S,Z.map(pu)),x(K),h(K),t._setFieldArray(r,K,E1,{argA:S,argB:S1(N)})},w=(S,N)=>{const Y=t._getFieldArray(r);I1(Y,S,N),I1(p.current,S,N),x(Y),h(Y),t._setFieldArray(r,Y,I1,{argA:S,argB:N},!1)},E=(S,N)=>{const Y=t._getFieldArray(r);k1(Y,S,N),k1(p.current,S,N),x(Y),h(Y),t._setFieldArray(r,Y,k1,{argA:S,argB:N},!1)},A=(S,N)=>{const Y=Wn(N),Z=k3(t._getFieldArray(r),S,Y);p.current=[...Z].map((K,U)=>!K||U===S?pu():p.current[U]),x(Z),h([...Z]),t._setFieldArray(r,Z,k3,{argA:S,argB:Y},!0,!1)},M=S=>{const N=ho(Wn(S));p.current=N.map(pu),x([...N]),h([...N]),t._setFieldArray(r,[...N],Y=>Y,{},!0,!1)};return de.useEffect(()=>{if(t._state.action=!1,e_(r,t._names)&&t._subjects.state.next({...t._formState}),g.current&&(!yp(t._options.mode).isOnSubmit||t._formState.isSubmitted)&&!yp(t._options.reValidateMode).isOnSubmit)if(t._options.resolver)t._runSchema([r]).then(S=>{const N=ai(S.errors,r),Y=ai(t._formState.errors,r);(Y?!N&&Y.type||N&&(Y.type!==N.type||Y.message!==N.message):N&&N.type)&&(N?Kr(t._formState.errors,r,N):ws(t._formState.errors,r),t._subjects.state.next({errors:t._formState.errors}))});else{const S=ai(t._fields,r);S&&S._f&&!(yp(t._options.reValidateMode).isOnSubmit&&yp(t._options.mode).isOnSubmit)&&t_(S,t._names.disabled,t._formValues,t._options.criteriaMode===Zo.all,t._options.shouldUseNativeValidation,!0).then(N=>!Ia(N)&&t._subjects.state.next({errors:RD(t._formState.errors,N,r)}))}t._subjects.state.next({name:r,values:Wn(t._formValues)}),t._names.focus&&Tp(t._fields,(S,N)=>{if(t._names.focus&&N.startsWith(t._names.focus)&&S.focus)return S.focus(),1}),t._names.focus="",t._setValid(),g.current=!1},[s,r,t]),de.useEffect(()=>(!ai(t._formValues,r)&&t._setFieldArray(r),()=>{const S=(N,Y)=>{const Z=ai(t._fields,N);Z&&Z._f&&(Z._f.mount=Y)};t._options.shouldUnregister||a?t.unregister(r):S(r,!1)}),[r,t,n,a]),{swap:de.useCallback(w,[x,r,t]),move:de.useCallback(E,[x,r,t]),prepend:de.useCallback(_,[x,r,t]),append:de.useCallback(v,[x,r,t]),remove:de.useCallback(C,[x,r,t]),insert:de.useCallback(k,[x,r,t]),update:de.useCallback(A,[x,r,t]),replace:de.useCallback(M,[x,r,t]),fields:de.useMemo(()=>s.map((S,N)=>({...S,[n]:p.current[N]||pu()})),[s,n])}}function Ex(i={}){const e=de.useRef(void 0),t=de.useRef(void 0),[r,n]=de.useState({isDirty:!1,isValidating:!1,isLoading:hl(i.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:i.errors||{},disabled:i.disabled||!1,isReady:!1,defaultValues:hl(i.defaultValues)?void 0:i.defaultValues});e.current||(e.current={...i.formControl?i.formControl:pie(i),formState:r},i.formControl&&i.defaultValues&&!hl(i.defaultValues)&&i.formControl.reset(i.defaultValues,i.resetOptions));const a=e.current.control;return a._options=i,mC(()=>{const c=a._subscribe({formState:a._proxyFormState,callback:()=>n({...a._formState}),reRenderRoot:!0});return n(s=>({...s,isReady:!0})),a._formState.isReady=!0,c},[a]),de.useEffect(()=>a._disableForm(i.disabled),[a,i.disabled]),de.useEffect(()=>{i.mode&&(a._options.mode=i.mode),i.reValidateMode&&(a._options.reValidateMode=i.reValidateMode),i.errors&&!Ia(i.errors)&&a._setErrors(i.errors)},[a,i.errors,i.mode,i.reValidateMode]),de.useEffect(()=>{i.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,i.shouldUnregister]),de.useEffect(()=>{if(a._proxyFormState.isDirty){const c=a._getDirty();c!==r.isDirty&&a._subjects.state.next({isDirty:c})}},[a,r.isDirty]),de.useEffect(()=>{i.values&&!_u(i.values,t.current)?(a._reset(i.values,a._options.resetOptions),t.current=i.values,n(c=>({...c}))):a._resetDefaultValues()},[a,i.values]),de.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=TD(r,a),e.current}const gie="_formField_4q43h_1",yie="_userOptionsContainer_4q43h_5",vie="_arrayField_4q43h_13",xie="_arrayInput_4q43h_17",bie="_arrayItems_4q43h_28",Ul={formField:gie,userOptionsContainer:yie,arrayField:vie,arrayInput:xie,arrayItems:bie},wie=({optionKey:i,optionConfig:e,setValue:t,disabled:r,watchedUserOptions:n,arrayInputs:a,setArrayInputs:c})=>{const s=(n==null?void 0:n[i])||[],h=a[i]||"",p=()=>{const g=h.trim();if(g&&!s.includes(g)){const x=[...s,g];t(`userOptions.${i}`,x),c(v=>({...v,[i]:""}))}},m=g=>{const x=s.filter((v,_)=>_!==g);t(`userOptions.${i}`,x)},y=g=>{c(x=>({...x,[i]:g}))};return z.jsxs("div",{className:Ul.formField,children:[z.jsx(Da,{children:e.title||i}),z.jsxs("div",{className:Ul.arrayField,children:[z.jsxs("div",{className:Ul.arrayInput,children:[z.jsx(Yl,{value:h,placeholder:ve.t("Enter item"),onChange:({value:g})=>y(g||""),disabled:r}),z.jsx(Ti,{onClick:p,disabled:!h.trim()||r,small:!0,children:ve.t("Add")})]}),z.jsx("div",{className:Ul.arrayItems,children:s.map((g,x)=>z.jsx(j_,{onRemove:()=>m(x),children:g},x))})]})]},i)},_ie=({optionKey:i,optionConfig:e,control:t,disabled:r})=>{const{title:n,enum:a}=e,c=n||i;return z.jsxs("div",{className:Ul.formField,children:[z.jsx(Da,{children:c}),z.jsx(el,{name:`userOptions.${i}`,control:t,render:({field:s})=>{var h;return z.jsx(il,{selected:((h=s.value)==null?void 0:h.toString())||"",disabled:r,onChange:({selected:p})=>s.onChange(p),children:a.map(p=>z.jsx(As,{label:p,value:p},p))})}})]},i)},Cie=({optionKey:i,optionConfig:e,control:t,disabled:r})=>{const n=e.title||i;return z.jsx("div",{className:Ul.formField,children:z.jsx(el,{name:`userOptions.${i}`,control:t,render:({field:a})=>z.jsx(pl,{label:n,checked:a.value||!1,disabled:r,onChange:({checked:c})=>a.onChange(c)})})},i)};var Qr;(function(i){i.assertEqual=n=>{};function e(n){}i.assertIs=e;function t(n){throw new Error}i.assertNever=t,i.arrayToEnum=n=>{const a={};for(const c of n)a[c]=c;return a},i.getValidEnumValues=n=>{const a=i.objectKeys(n).filter(s=>typeof n[n[s]]!="number"),c={};for(const s of a)c[s]=n[s];return i.objectValues(c)},i.objectValues=n=>i.objectKeys(n).map(function(a){return n[a]}),i.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const a=[];for(const c in n)Object.prototype.hasOwnProperty.call(n,c)&&a.push(c);return a},i.find=(n,a)=>{for(const c of n)if(a(c))return c},i.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function r(n,a=" | "){return n.map(c=>typeof c=="string"?`'${c}'`:c).join(a)}i.joinValues=r,i.jsonStringifyReplacer=(n,a)=>typeof a=="bigint"?a.toString():a})(Qr||(Qr={}));var M3;(function(i){i.mergeShapes=(e,t)=>({...e,...t})})(M3||(M3={}));const Ai=Qr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),xu=i=>{switch(typeof i){case"undefined":return Ai.undefined;case"string":return Ai.string;case"number":return Number.isNaN(i)?Ai.nan:Ai.number;case"boolean":return Ai.boolean;case"function":return Ai.function;case"bigint":return Ai.bigint;case"symbol":return Ai.symbol;case"object":return Array.isArray(i)?Ai.array:i===null?Ai.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?Ai.promise:typeof Map<"u"&&i instanceof Map?Ai.map:typeof Set<"u"&&i instanceof Set?Ai.set:typeof Date<"u"&&i instanceof Date?Ai.date:Ai.object;default:return Ai.unknown}},Xt=Qr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class xl extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},r={_errors:[]},n=a=>{for(const c of a.issues)if(c.code==="invalid_union")c.unionErrors.map(n);else if(c.code==="invalid_return_type")n(c.returnTypeError);else if(c.code==="invalid_arguments")n(c.argumentsError);else if(c.path.length===0)r._errors.push(t(c));else{let s=r,h=0;for(;h<c.path.length;){const p=c.path[h];h===c.path.length-1?(s[p]=s[p]||{_errors:[]},s[p]._errors.push(t(c))):s[p]=s[p]||{_errors:[]},s=s[p],h++}}};return n(this),r}static assert(e){if(!(e instanceof xl))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Qr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}xl.create=i=>new xl(i);const i_=(i,e)=>{let t;switch(i.code){case Xt.invalid_type:i.received===Ai.undefined?t="Required":t=`Expected ${i.expected}, received ${i.received}`;break;case Xt.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(i.expected,Qr.jsonStringifyReplacer)}`;break;case Xt.unrecognized_keys:t=`Unrecognized key(s) in object: ${Qr.joinValues(i.keys,", ")}`;break;case Xt.invalid_union:t="Invalid input";break;case Xt.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Qr.joinValues(i.options)}`;break;case Xt.invalid_enum_value:t=`Invalid enum value. Expected ${Qr.joinValues(i.options)}, received '${i.received}'`;break;case Xt.invalid_arguments:t="Invalid function arguments";break;case Xt.invalid_return_type:t="Invalid function return type";break;case Xt.invalid_date:t="Invalid date";break;case Xt.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(t=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?t=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?t=`Invalid input: must end with "${i.validation.endsWith}"`:Qr.assertNever(i.validation):i.validation!=="regex"?t=`Invalid ${i.validation}`:t="Invalid";break;case Xt.too_small:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:t="Invalid input";break;case Xt.too_big:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?t=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:t="Invalid input";break;case Xt.custom:t="Invalid input";break;case Xt.invalid_intersection_types:t="Intersection results could not be merged";break;case Xt.not_multiple_of:t=`Number must be a multiple of ${i.multipleOf}`;break;case Xt.not_finite:t="Number must be finite";break;default:t=e.defaultError,Qr.assertNever(i)}return{message:t}};let Tie=i_;function Sie(){return Tie}const Eie=i=>{const{data:e,path:t,errorMaps:r,issueData:n}=i,a=[...t,...n.path||[]],c={...n,path:a};if(n.message!==void 0)return{...n,path:a,message:n.message};let s="";const h=r.filter(p=>!!p).slice().reverse();for(const p of h)s=p(c,{data:e,defaultError:s}).message;return{...n,path:a,message:s}};function xi(i,e){const t=Sie(),r=Eie({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,t,t===i_?void 0:i_].filter(n=>!!n)});i.common.issues.push(r)}class Ja{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if(n.status==="aborted")return pr;n.status==="dirty"&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const n of t){const a=await n.key,c=await n.value;r.push({key:a,value:c})}return Ja.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:a,value:c}=n;if(a.status==="aborted"||c.status==="aborted")return pr;a.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof c.value<"u"||n.alwaysSet)&&(r[a.value]=c.value)}return{status:e.value,value:r}}}const pr=Object.freeze({status:"aborted"}),Dm=i=>({status:"dirty",value:i}),nl=i=>({status:"valid",value:i}),A3=i=>i.status==="aborted",I3=i=>i.status==="dirty",Fp=i=>i.status==="valid",Sv=i=>typeof Promise<"u"&&i instanceof Promise;var Ni;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ni||(Ni={}));class Jl{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const P3=(i,e)=>{if(Fp(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new xl(i.common.issues);return this._error=t,this._error}}};function _r(i){if(!i)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:n}=i;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(c,s)=>{const{message:h}=i;return c.code==="invalid_enum_value"?{message:h??s.defaultError}:typeof s.data>"u"?{message:h??r??s.defaultError}:c.code!=="invalid_type"?{message:s.defaultError}:{message:h??t??s.defaultError}},description:n}}class $r{get description(){return this._def.description}_getType(e){return xu(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:xu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ja,ctx:{common:e.parent.common,data:e.data,parsedType:xu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Sv(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:xu(e)},n=this._parseSync({data:e,path:r.path,parent:r});return P3(r,n)}"~validate"(e){var r,n;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:xu(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:t});return Fp(a)?{value:a.value}:{issues:t.common.issues}}catch(a){(n=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&n.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(a=>Fp(a)?{value:a.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:xu(e)},n=this._parse({data:e,path:r.path,parent:r}),a=await(Sv(n)?n:Promise.resolve(n));return P3(r,a)}refine(e,t){const r=n=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(n):t;return this._refinement((n,a)=>{const c=e(n),s=()=>a.addIssue({code:Xt.custom,...r(n)});return typeof Promise<"u"&&c instanceof Promise?c.then(h=>h?!0:(s(),!1)):c?!0:(s(),!1)})}refinement(e,t){return this._refinement((r,n)=>e(r)?!0:(n.addIssue(typeof t=="function"?t(r,n):t),!1))}_refinement(e){return new Up({schema:this,typeName:cr.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Pu.create(this,this._def)}nullable(){return Vp.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Wl.create(this)}promise(){return Iv.create(this,this._def)}or(e){return kv.create([this,e],this._def)}and(e){return Mv.create(this,e,this._def)}transform(e){return new Up({..._r(this._def),schema:this,typeName:cr.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new s_({..._r(this._def),innerType:this,defaultValue:t,typeName:cr.ZodDefault})}brand(){return new Zie({typeName:cr.ZodBranded,type:this,..._r(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new a_({..._r(this._def),innerType:this,catchValue:t,typeName:cr.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return vC.create(this,e)}readonly(){return o_.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const kie=/^c[^\s-]{8,}$/i,Mie=/^[0-9a-z]+$/,Aie=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Iie=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Pie=/^[a-z0-9_-]{21}$/i,Die=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Rie=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Lie=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Nie="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let P1;const zie=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Oie=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,jie=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Fie=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Bie=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,$ie=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,LD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Uie=new RegExp(`^${LD}$`);function ND(i){let e="[0-5]\\d";i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`);const t=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function Vie(i){return new RegExp(`^${ND(i)}$`)}function Gie(i){let e=`${LD}T${ND(i)}`;const t=[];return t.push(i.local?"Z?":"Z"),i.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Hie(i,e){return!!((e==="v4"||!e)&&zie.test(i)||(e==="v6"||!e)&&jie.test(i))}function qie(i,e){if(!Die.test(i))return!1;try{const[t]=i.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),n=JSON.parse(atob(r));return!(typeof n!="object"||n===null||"typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||e&&n.alg!==e)}catch{return!1}}function Wie(i,e){return!!((e==="v4"||!e)&&Oie.test(i)||(e==="v6"||!e)&&Fie.test(i))}class Rc extends $r{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ai.string){const a=this._getOrReturnCtx(e);return xi(a,{code:Xt.invalid_type,expected:Ai.string,received:a.parsedType}),pr}const r=new Ja;let n;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const c=e.data.length>a.value,s=e.data.length<a.value;(c||s)&&(n=this._getOrReturnCtx(e,n),c?xi(n,{code:Xt.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):s&&xi(n,{code:Xt.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")Lie.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"email",code:Xt.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")P1||(P1=new RegExp(Nie,"u")),P1.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"emoji",code:Xt.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")Iie.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"uuid",code:Xt.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")Pie.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"nanoid",code:Xt.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")kie.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"cuid",code:Xt.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")Mie.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"cuid2",code:Xt.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")Aie.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"ulid",code:Xt.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),xi(n,{validation:"url",code:Xt.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"regex",code:Xt.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?Gie(a).test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?Uie.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?Vie(a).test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?Rie.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"duration",code:Xt.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?Hie(e.data,a.version)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"ip",code:Xt.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?qie(e.data,a.alg)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"jwt",code:Xt.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?Wie(e.data,a.version)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"cidr",code:Xt.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?Bie.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"base64",code:Xt.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?$ie.test(e.data)||(n=this._getOrReturnCtx(e,n),xi(n,{validation:"base64url",code:Xt.invalid_string,message:a.message}),r.dirty()):Qr.assertNever(a);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(n=>e.test(n),{validation:t,code:Xt.invalid_string,...Ni.errToObj(r)})}_addCheck(e){return new Rc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ni.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ni.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ni.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ni.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ni.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ni.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ni.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ni.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ni.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ni.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ni.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ni.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ni.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Ni.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ni.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ni.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Ni.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Ni.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Ni.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Ni.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Ni.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Ni.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Ni.errToObj(t)})}nonempty(e){return this.min(1,Ni.errToObj(e))}trim(){return new Rc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Rc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Rc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Rc.create=i=>new Rc({checks:[],typeName:cr.ZodString,coerce:(i==null?void 0:i.coerce)??!1,..._r(i)});function Yie(i,e){const t=(i.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,n=t>r?t:r,a=Number.parseInt(i.toFixed(n).replace(".","")),c=Number.parseInt(e.toFixed(n).replace(".",""));return a%c/10**n}class Bp extends $r{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ai.number){const a=this._getOrReturnCtx(e);return xi(a,{code:Xt.invalid_type,expected:Ai.number,received:a.parsedType}),pr}let r;const n=new Ja;for(const a of this._def.checks)a.kind==="int"?Qr.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),xi(r,{code:Xt.invalid_type,expected:"integer",received:"float",message:a.message}),n.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),xi(r,{code:Xt.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),xi(r,{code:Xt.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):a.kind==="multipleOf"?Yie(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),xi(r,{code:Xt.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),xi(r,{code:Xt.not_finite,message:a.message}),n.dirty()):Qr.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ni.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ni.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ni.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ni.toString(t))}setLimit(e,t,r,n){return new Bp({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Ni.toString(n)}]})}_addCheck(e){return new Bp({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ni.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ni.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ni.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ni.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ni.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ni.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Ni.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ni.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ni.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Qr.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Bp.create=i=>new Bp({checks:[],typeName:cr.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,..._r(i)});class hg extends $r{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ai.bigint)return this._getInvalidInput(e);let r;const n=new Ja;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),xi(r,{code:Xt.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),xi(r,{code:Xt.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),xi(r,{code:Xt.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):Qr.assertNever(a);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return xi(t,{code:Xt.invalid_type,expected:Ai.bigint,received:t.parsedType}),pr}gte(e,t){return this.setLimit("min",e,!0,Ni.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ni.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ni.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ni.toString(t))}setLimit(e,t,r,n){return new hg({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Ni.toString(n)}]})}_addCheck(e){return new hg({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ni.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ni.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ni.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ni.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ni.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}hg.create=i=>new hg({checks:[],typeName:cr.ZodBigInt,coerce:(i==null?void 0:i.coerce)??!1,..._r(i)});class D3 extends $r{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ai.boolean){const r=this._getOrReturnCtx(e);return xi(r,{code:Xt.invalid_type,expected:Ai.boolean,received:r.parsedType}),pr}return nl(e.data)}}D3.create=i=>new D3({typeName:cr.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,..._r(i)});class Ev extends $r{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ai.date){const a=this._getOrReturnCtx(e);return xi(a,{code:Xt.invalid_type,expected:Ai.date,received:a.parsedType}),pr}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return xi(a,{code:Xt.invalid_date}),pr}const r=new Ja;let n;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(n=this._getOrReturnCtx(e,n),xi(n,{code:Xt.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Qr.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ev({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Ni.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Ni.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Ev.create=i=>new Ev({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:cr.ZodDate,..._r(i)});class R3 extends $r{_parse(e){if(this._getType(e)!==Ai.symbol){const r=this._getOrReturnCtx(e);return xi(r,{code:Xt.invalid_type,expected:Ai.symbol,received:r.parsedType}),pr}return nl(e.data)}}R3.create=i=>new R3({typeName:cr.ZodSymbol,..._r(i)});class L3 extends $r{_parse(e){if(this._getType(e)!==Ai.undefined){const r=this._getOrReturnCtx(e);return xi(r,{code:Xt.invalid_type,expected:Ai.undefined,received:r.parsedType}),pr}return nl(e.data)}}L3.create=i=>new L3({typeName:cr.ZodUndefined,..._r(i)});class N3 extends $r{_parse(e){if(this._getType(e)!==Ai.null){const r=this._getOrReturnCtx(e);return xi(r,{code:Xt.invalid_type,expected:Ai.null,received:r.parsedType}),pr}return nl(e.data)}}N3.create=i=>new N3({typeName:cr.ZodNull,..._r(i)});class r_ extends $r{constructor(){super(...arguments),this._any=!0}_parse(e){return nl(e.data)}}r_.create=i=>new r_({typeName:cr.ZodAny,..._r(i)});class z3 extends $r{constructor(){super(...arguments),this._unknown=!0}_parse(e){return nl(e.data)}}z3.create=i=>new z3({typeName:cr.ZodUnknown,..._r(i)});class Vu extends $r{_parse(e){const t=this._getOrReturnCtx(e);return xi(t,{code:Xt.invalid_type,expected:Ai.never,received:t.parsedType}),pr}}Vu.create=i=>new Vu({typeName:cr.ZodNever,..._r(i)});class O3 extends $r{_parse(e){if(this._getType(e)!==Ai.undefined){const r=this._getOrReturnCtx(e);return xi(r,{code:Xt.invalid_type,expected:Ai.void,received:r.parsedType}),pr}return nl(e.data)}}O3.create=i=>new O3({typeName:cr.ZodVoid,..._r(i)});class Wl extends $r{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==Ai.array)return xi(t,{code:Xt.invalid_type,expected:Ai.array,received:t.parsedType}),pr;if(n.exactLength!==null){const c=t.data.length>n.exactLength.value,s=t.data.length<n.exactLength.value;(c||s)&&(xi(t,{code:c?Xt.too_big:Xt.too_small,minimum:s?n.exactLength.value:void 0,maximum:c?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(n.minLength!==null&&t.data.length<n.minLength.value&&(xi(t,{code:Xt.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),n.maxLength!==null&&t.data.length>n.maxLength.value&&(xi(t,{code:Xt.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((c,s)=>n.type._parseAsync(new Jl(t,c,t.path,s)))).then(c=>Ja.mergeArray(r,c));const a=[...t.data].map((c,s)=>n.type._parseSync(new Jl(t,c,t.path,s)));return Ja.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new Wl({...this._def,minLength:{value:e,message:Ni.toString(t)}})}max(e,t){return new Wl({...this._def,maxLength:{value:e,message:Ni.toString(t)}})}length(e,t){return new Wl({...this._def,exactLength:{value:e,message:Ni.toString(t)}})}nonempty(e){return this.min(1,e)}}Wl.create=(i,e)=>new Wl({type:i,minLength:null,maxLength:null,exactLength:null,typeName:cr.ZodArray,..._r(e)});function gp(i){if(i instanceof Es){const e={};for(const t in i.shape){const r=i.shape[t];e[t]=Pu.create(gp(r))}return new Es({...i._def,shape:()=>e})}else return i instanceof Wl?new Wl({...i._def,type:gp(i.element)}):i instanceof Pu?Pu.create(gp(i.unwrap())):i instanceof Vp?Vp.create(gp(i.unwrap())):i instanceof ih?ih.create(i.items.map(e=>gp(e))):i}class Es extends $r{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Qr.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==Ai.object){const p=this._getOrReturnCtx(e);return xi(p,{code:Xt.invalid_type,expected:Ai.object,received:p.parsedType}),pr}const{status:r,ctx:n}=this._processInputParams(e),{shape:a,keys:c}=this._getCached(),s=[];if(!(this._def.catchall instanceof Vu&&this._def.unknownKeys==="strip"))for(const p in n.data)c.includes(p)||s.push(p);const h=[];for(const p of c){const m=a[p],y=n.data[p];h.push({key:{status:"valid",value:p},value:m._parse(new Jl(n,y,n.path,p)),alwaysSet:p in n.data})}if(this._def.catchall instanceof Vu){const p=this._def.unknownKeys;if(p==="passthrough")for(const m of s)h.push({key:{status:"valid",value:m},value:{status:"valid",value:n.data[m]}});else if(p==="strict")s.length>0&&(xi(n,{code:Xt.unrecognized_keys,keys:s}),r.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const m of s){const y=n.data[m];h.push({key:{status:"valid",value:m},value:p._parse(new Jl(n,y,n.path,m)),alwaysSet:m in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const p=[];for(const m of h){const y=await m.key,g=await m.value;p.push({key:y,value:g,alwaysSet:m.alwaysSet})}return p}).then(p=>Ja.mergeObjectSync(r,p)):Ja.mergeObjectSync(r,h)}get shape(){return this._def.shape()}strict(e){return Ni.errToObj,new Es({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var a,c;const n=((c=(a=this._def).errorMap)==null?void 0:c.call(a,t,r).message)??r.defaultError;return t.code==="unrecognized_keys"?{message:Ni.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new Es({...this._def,unknownKeys:"strip"})}passthrough(){return new Es({...this._def,unknownKeys:"passthrough"})}extend(e){return new Es({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Es({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:cr.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Es({...this._def,catchall:e})}pick(e){const t={};for(const r of Qr.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new Es({...this._def,shape:()=>t})}omit(e){const t={};for(const r of Qr.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new Es({...this._def,shape:()=>t})}deepPartial(){return gp(this)}partial(e){const t={};for(const r of Qr.objectKeys(this.shape)){const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}return new Es({...this._def,shape:()=>t})}required(e){const t={};for(const r of Qr.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Pu;)a=a._def.innerType;t[r]=a}return new Es({...this._def,shape:()=>t})}keyof(){return zD(Qr.objectKeys(this.shape))}}Es.create=(i,e)=>new Es({shape:()=>i,unknownKeys:"strip",catchall:Vu.create(),typeName:cr.ZodObject,..._r(e)});Es.strictCreate=(i,e)=>new Es({shape:()=>i,unknownKeys:"strict",catchall:Vu.create(),typeName:cr.ZodObject,..._r(e)});Es.lazycreate=(i,e)=>new Es({shape:i,unknownKeys:"strip",catchall:Vu.create(),typeName:cr.ZodObject,..._r(e)});class kv extends $r{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function n(a){for(const s of a)if(s.result.status==="valid")return s.result;for(const s of a)if(s.result.status==="dirty")return t.common.issues.push(...s.ctx.common.issues),s.result;const c=a.map(s=>new xl(s.ctx.common.issues));return xi(t,{code:Xt.invalid_union,unionErrors:c}),pr}if(t.common.async)return Promise.all(r.map(async a=>{const c={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:c}),ctx:c}})).then(n);{let a;const c=[];for(const h of r){const p={...t,common:{...t.common,issues:[]},parent:null},m=h._parseSync({data:t.data,path:t.path,parent:p});if(m.status==="valid")return m;m.status==="dirty"&&!a&&(a={result:m,ctx:p}),p.common.issues.length&&c.push(p.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const s=c.map(h=>new xl(h));return xi(t,{code:Xt.invalid_union,unionErrors:s}),pr}}get options(){return this._def.options}}kv.create=(i,e)=>new kv({options:i,typeName:cr.ZodUnion,..._r(e)});function n_(i,e){const t=xu(i),r=xu(e);if(i===e)return{valid:!0,data:i};if(t===Ai.object&&r===Ai.object){const n=Qr.objectKeys(e),a=Qr.objectKeys(i).filter(s=>n.indexOf(s)!==-1),c={...i,...e};for(const s of a){const h=n_(i[s],e[s]);if(!h.valid)return{valid:!1};c[s]=h.data}return{valid:!0,data:c}}else if(t===Ai.array&&r===Ai.array){if(i.length!==e.length)return{valid:!1};const n=[];for(let a=0;a<i.length;a++){const c=i[a],s=e[a],h=n_(c,s);if(!h.valid)return{valid:!1};n.push(h.data)}return{valid:!0,data:n}}else return t===Ai.date&&r===Ai.date&&+i==+e?{valid:!0,data:i}:{valid:!1}}class Mv extends $r{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(a,c)=>{if(A3(a)||A3(c))return pr;const s=n_(a.value,c.value);return s.valid?((I3(a)||I3(c))&&t.dirty(),{status:t.value,value:s.data}):(xi(r,{code:Xt.invalid_intersection_types}),pr)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,c])=>n(a,c)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Mv.create=(i,e,t)=>new Mv({left:i,right:e,typeName:cr.ZodIntersection,..._r(t)});class ih extends $r{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ai.array)return xi(r,{code:Xt.invalid_type,expected:Ai.array,received:r.parsedType}),pr;if(r.data.length<this._def.items.length)return xi(r,{code:Xt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),pr;!this._def.rest&&r.data.length>this._def.items.length&&(xi(r,{code:Xt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...r.data].map((c,s)=>{const h=this._def.items[s]||this._def.rest;return h?h._parse(new Jl(r,c,r.path,s)):null}).filter(c=>!!c);return r.common.async?Promise.all(a).then(c=>Ja.mergeArray(t,c)):Ja.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new ih({...this._def,rest:e})}}ih.create=(i,e)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ih({items:i,typeName:cr.ZodTuple,rest:null,..._r(e)})};class Av extends $r{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ai.object)return xi(r,{code:Xt.invalid_type,expected:Ai.object,received:r.parsedType}),pr;const n=[],a=this._def.keyType,c=this._def.valueType;for(const s in r.data)n.push({key:a._parse(new Jl(r,s,r.path,s)),value:c._parse(new Jl(r,r.data[s],r.path,s)),alwaysSet:s in r.data});return r.common.async?Ja.mergeObjectAsync(t,n):Ja.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof $r?new Av({keyType:e,valueType:t,typeName:cr.ZodRecord,..._r(r)}):new Av({keyType:Rc.create(),valueType:e,typeName:cr.ZodRecord,..._r(t)})}}class j3 extends $r{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ai.map)return xi(r,{code:Xt.invalid_type,expected:Ai.map,received:r.parsedType}),pr;const n=this._def.keyType,a=this._def.valueType,c=[...r.data.entries()].map(([s,h],p)=>({key:n._parse(new Jl(r,s,r.path,[p,"key"])),value:a._parse(new Jl(r,h,r.path,[p,"value"]))}));if(r.common.async){const s=new Map;return Promise.resolve().then(async()=>{for(const h of c){const p=await h.key,m=await h.value;if(p.status==="aborted"||m.status==="aborted")return pr;(p.status==="dirty"||m.status==="dirty")&&t.dirty(),s.set(p.value,m.value)}return{status:t.value,value:s}})}else{const s=new Map;for(const h of c){const p=h.key,m=h.value;if(p.status==="aborted"||m.status==="aborted")return pr;(p.status==="dirty"||m.status==="dirty")&&t.dirty(),s.set(p.value,m.value)}return{status:t.value,value:s}}}}j3.create=(i,e,t)=>new j3({valueType:e,keyType:i,typeName:cr.ZodMap,..._r(t)});class pg extends $r{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ai.set)return xi(r,{code:Xt.invalid_type,expected:Ai.set,received:r.parsedType}),pr;const n=this._def;n.minSize!==null&&r.data.size<n.minSize.value&&(xi(r,{code:Xt.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),n.maxSize!==null&&r.data.size>n.maxSize.value&&(xi(r,{code:Xt.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const a=this._def.valueType;function c(h){const p=new Set;for(const m of h){if(m.status==="aborted")return pr;m.status==="dirty"&&t.dirty(),p.add(m.value)}return{status:t.value,value:p}}const s=[...r.data.values()].map((h,p)=>a._parse(new Jl(r,h,r.path,p)));return r.common.async?Promise.all(s).then(h=>c(h)):c(s)}min(e,t){return new pg({...this._def,minSize:{value:e,message:Ni.toString(t)}})}max(e,t){return new pg({...this._def,maxSize:{value:e,message:Ni.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}pg.create=(i,e)=>new pg({valueType:i,minSize:null,maxSize:null,typeName:cr.ZodSet,..._r(e)});class F3 extends $r{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}F3.create=(i,e)=>new F3({getter:i,typeName:cr.ZodLazy,..._r(e)});class B3 extends $r{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return xi(t,{received:t.data,code:Xt.invalid_literal,expected:this._def.value}),pr}return{status:"valid",value:e.data}}get value(){return this._def.value}}B3.create=(i,e)=>new B3({value:i,typeName:cr.ZodLiteral,..._r(e)});function zD(i,e){return new $p({values:i,typeName:cr.ZodEnum,..._r(e)})}class $p extends $r{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return xi(t,{expected:Qr.joinValues(r),received:t.parsedType,code:Xt.invalid_type}),pr}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return xi(t,{received:t.data,code:Xt.invalid_enum_value,options:r}),pr}return nl(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return $p.create(e,{...this._def,...t})}exclude(e,t=this._def){return $p.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}$p.create=zD;class $3 extends $r{_parse(e){const t=Qr.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ai.string&&r.parsedType!==Ai.number){const n=Qr.objectValues(t);return xi(r,{expected:Qr.joinValues(n),received:r.parsedType,code:Xt.invalid_type}),pr}if(this._cache||(this._cache=new Set(Qr.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const n=Qr.objectValues(t);return xi(r,{received:r.data,code:Xt.invalid_enum_value,options:n}),pr}return nl(e.data)}get enum(){return this._def.values}}$3.create=(i,e)=>new $3({values:i,typeName:cr.ZodNativeEnum,..._r(e)});class Iv extends $r{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ai.promise&&t.common.async===!1)return xi(t,{code:Xt.invalid_type,expected:Ai.promise,received:t.parsedType}),pr;const r=t.parsedType===Ai.promise?t.data:Promise.resolve(t.data);return nl(r.then(n=>this._def.type.parseAsync(n,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Iv.create=(i,e)=>new Iv({type:i,typeName:cr.ZodPromise,..._r(e)});class Up extends $r{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===cr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,a={addIssue:c=>{xi(r,c),c.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),n.type==="preprocess"){const c=n.transform(r.data,a);if(r.common.async)return Promise.resolve(c).then(async s=>{if(t.value==="aborted")return pr;const h=await this._def.schema._parseAsync({data:s,path:r.path,parent:r});return h.status==="aborted"?pr:h.status==="dirty"||t.value==="dirty"?Dm(h.value):h});{if(t.value==="aborted")return pr;const s=this._def.schema._parseSync({data:c,path:r.path,parent:r});return s.status==="aborted"?pr:s.status==="dirty"||t.value==="dirty"?Dm(s.value):s}}if(n.type==="refinement"){const c=s=>{const h=n.refinement(s,a);if(r.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?pr:(s.status==="dirty"&&t.dirty(),c(s.value),{status:t.value,value:s.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>s.status==="aborted"?pr:(s.status==="dirty"&&t.dirty(),c(s.value).then(()=>({status:t.value,value:s.value}))))}if(n.type==="transform")if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Fp(c))return pr;const s=n.transform(c.value,a);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>Fp(c)?Promise.resolve(n.transform(c.value,a)).then(s=>({status:t.value,value:s})):pr);Qr.assertNever(n)}}Up.create=(i,e,t)=>new Up({schema:i,typeName:cr.ZodEffects,effect:e,..._r(t)});Up.createWithPreprocess=(i,e,t)=>new Up({schema:e,effect:{type:"preprocess",transform:i},typeName:cr.ZodEffects,..._r(t)});class Pu extends $r{_parse(e){return this._getType(e)===Ai.undefined?nl(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Pu.create=(i,e)=>new Pu({innerType:i,typeName:cr.ZodOptional,..._r(e)});class Vp extends $r{_parse(e){return this._getType(e)===Ai.null?nl(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Vp.create=(i,e)=>new Vp({innerType:i,typeName:cr.ZodNullable,..._r(e)});class s_ extends $r{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===Ai.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}s_.create=(i,e)=>new s_({innerType:i,typeName:cr.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,..._r(e)});class a_ extends $r{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Sv(n)?n.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new xl(r.common.issues)},input:r.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new xl(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}a_.create=(i,e)=>new a_({innerType:i,typeName:cr.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,..._r(e)});class U3 extends $r{_parse(e){if(this._getType(e)!==Ai.nan){const r=this._getOrReturnCtx(e);return xi(r,{code:Xt.invalid_type,expected:Ai.nan,received:r.parsedType}),pr}return{status:"valid",value:e.data}}}U3.create=i=>new U3({typeName:cr.ZodNaN,..._r(i)});class Zie extends $r{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class vC extends $r{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?pr:a.status==="dirty"?(t.dirty(),Dm(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const n=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return n.status==="aborted"?pr:n.status==="dirty"?(t.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:r.path,parent:r})}}static create(e,t){return new vC({in:e,out:t,typeName:cr.ZodPipeline})}}class o_ extends $r{_parse(e){const t=this._def.innerType._parse(e),r=n=>(Fp(n)&&(n.value=Object.freeze(n.value)),n);return Sv(t)?t.then(n=>r(n)):r(t)}unwrap(){return this._def.innerType}}o_.create=(i,e)=>new o_({innerType:i,typeName:cr.ZodReadonly,..._r(e)});var cr;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(cr||(cr={}));const Ms=Rc.create,Xie=Bp.create,Kie=r_.create;Vu.create;const Pv=Wl.create,Bc=Es.create;kv.create;Mv.create;ih.create;const Qie=Av.create,Jie=$p.create;Iv.create;Pu.create;Vp.create;const Rm={INTEGER:"integer",NUMBER:"number",NULL:"null"},V3=i=>i.replace(",","."),ere=i=>{const e=Ms().transform(t=>t.trim()).refine(t=>{if(t==="")return!0;const r=V3(t);return!isNaN(Number(r))},{message:ve.t("Please enter a valid number or leave empty")}).transform(t=>{if(t==="")return null;const r=V3(t);return Number(r)});return i===Rm.INTEGER?e.refine(t=>t===null||Number.isInteger(t),{message:ve.t("Please enter a whole number or leave empty")}):e},tre=({optionKey:i,optionConfig:e,control:t,disabled:r})=>{const n=e.title||i,a=e.anyOf.find(g=>g.type!==Rm.NULL),[c,s]=Ie.useState(""),h=(a==null?void 0:a.type)===Rm.INTEGER||(a==null?void 0:a.type)===Rm.NUMBER,p=h?ere(a.type):null,m=g=>{var x;if(!h||!p)return!0;try{return p.parse(g),s(""),!0}catch(v){return v instanceof xl&&s(((x=v.errors[0])==null?void 0:x.message)||ve.t("Invalid input")),!1}},y=g=>{if(!h||!p)return g===""?null:g;try{return p.parse(g)}catch{return g}};return z.jsx("div",{className:Ul.formField,children:z.jsx(el,{name:`userOptions.${i}`,control:t,render:({field:g})=>{var x;return z.jsx(Yl,{label:n,type:"text",value:g.value===null?"":((x=g.value)==null?void 0:x.toString())||"",disabled:r,error:!!c,validationText:c,placeholder:h?(a==null?void 0:a.type)===Rm.INTEGER?ve.t("Enter a whole number or leave empty for null"):ve.t("Enter a number (use , or . for decimal) or leave empty for null"):ve.t("Leave empty for null"),onChange:({value:v})=>{g.onChange(v||""),c&&s("")},onBlur:()=>{var _;const v=g.value===null?"":((_=g.value)==null?void 0:_.toString())||"";if(m(v)){const C=y(v);g.onChange(C)}}})}})},i)},H0={INTEGER:"integer",NUMBER:"number"},ire=i=>i.replace(",","."),rre=i=>{const e=Ms().transform(t=>ire(t.trim())).refine(t=>t===""||!isNaN(Number(t)),{message:ve.t("Please enter a valid number")}).transform(t=>t===""?0:Number(t));return i===H0.INTEGER?e.refine(t=>Number.isInteger(t),{message:ve.t("Please enter a whole number")}):e},nre=({optionKey:i,optionConfig:e,control:t,disabled:r})=>{const{type:n,title:a}=e,c=a||i,[s,h]=Ie.useState(""),p=n===H0.INTEGER||n===H0.NUMBER,m=p?rre(n):null,y=x=>{var v;if(!p||!m)return!0;try{return m.parse(x),h(""),!0}catch(_){return _ instanceof xl&&h(((v=_.errors[0])==null?void 0:v.message)||ve.t("Invalid input")),!1}},g=x=>{if(!p||!m)return x;try{return m.parse(x)}catch{return x}};return z.jsx("div",{className:Ul.formField,children:z.jsx(el,{name:`userOptions.${i}`,control:t,render:({field:x})=>{var v;return z.jsx(Yl,{label:c,type:"text",value:((v=x.value)==null?void 0:v.toString())||"",disabled:r,error:!!s,validationText:s,placeholder:p?n===H0.INTEGER?ve.t("Enter a whole number"):ve.t("Enter a number (use , or . for decimal)"):void 0,onChange:({value:_})=>{x.onChange(_||""),s&&h("")},onBlur:()=>{var C;const _=((C=x.value)==null?void 0:C.toString())||"";if(y(_)){const k=g(_);x.onChange(k)}}})}})},i)},ka={INTEGER:"integer",NUMBER:"number",BOOLEAN:"boolean",STRING:"string",ARRAY:"array",NULL:"null"},sre={getDefault:i=>{if(i.default!==void 0)return i.default;const e=i.type;if(e===ka.INTEGER||e===ka.NUMBER)return 0;if(e===ka.BOOLEAN)return!1;if(e===ka.ARRAY)return[];if(e===ka.STRING)return"";if(i.anyOf){if(i.anyOf.some(n=>n.type===ka.NULL))return null;const r=i.anyOf.find(n=>n.type!==ka.NULL);if((r==null?void 0:r.type)===ka.INTEGER||(r==null?void 0:r.type)===ka.NUMBER)return 0;if((r==null?void 0:r.type)===ka.BOOLEAN)return!1;if((r==null?void 0:r.type)===ka.STRING)return""}return null},convertInput:(i,e)=>{const t=e.type;if(t===ka.INTEGER){const r=parseInt(i,10);return isNaN(r)?0:r}if(t===ka.NUMBER){const r=parseFloat(i);return isNaN(r)?0:r}if(t===ka.BOOLEAN)return i==="true";if(e.anyOf){if(i===""||i===null||i==="null")return null;const r=e.anyOf.find(a=>a.type===ka.INTEGER),n=e.anyOf.find(a=>a.type===ka.NUMBER);if(r){const a=parseInt(i,10);return isNaN(a)?null:a}if(n){const a=parseFloat(i);return isNaN(a)?null:a}}return i}},D1={BOOLEAN:"boolean",ARRAY:"array",NULL:"null"},mm={ARRAY:"array",ENUM:"enum",BOOLEAN:"boolean",NULLABLE:"nullable",DEFAULT:"default"},are=i=>{var e;return i.type===D1.ARRAY?mm.ARRAY:i.enum&&i.enum.length>0?mm.ENUM:i.type===D1.BOOLEAN?mm.BOOLEAN:(e=i.anyOf)!=null&&e.some(t=>t.type===D1.NULL)?mm.NULLABLE:mm.DEFAULT},gm={ARRAY:"array",ENUM:"enum",BOOLEAN:"boolean",NULLABLE:"nullable",DEFAULT:"default"},ore={[gm.ARRAY]:i=>z.jsx(wie,{optionKey:i.optionKey,optionConfig:i.optionConfig,setValue:i.setValue,disabled:i.disabled,watchedUserOptions:i.watchedUserOptions,arrayInputs:i.arrayInputs,setArrayInputs:i.setArrayInputs}),[gm.ENUM]:i=>z.jsx(_ie,{optionKey:i.optionKey,optionConfig:i.optionConfig,control:i.control,disabled:i.disabled}),[gm.BOOLEAN]:i=>z.jsx(Cie,{optionKey:i.optionKey,optionConfig:i.optionConfig,control:i.control,disabled:i.disabled}),[gm.NULLABLE]:i=>z.jsx(tre,{optionKey:i.optionKey,optionConfig:i.optionConfig,control:i.control,disabled:i.disabled}),[gm.DEFAULT]:i=>z.jsx(nre,{optionKey:i.optionKey,optionConfig:i.optionConfig,control:i.control,disabled:i.disabled})},lre=({control:i,setValue:e,currentTemplate:t,disabled:r=!1})=>{const[n,a]=Ie.useState({}),c=(t==null?void 0:t.userOptions)||{},s=jc({control:i,name:"userOptions"});Ie.useEffect(()=>{if(t!=null&&t.userOptions){const p={};Object.entries(t.userOptions).filter(([m])=>m!=="additional_covariates").forEach(([m,y])=>{p[m]=sre.getDefault(y)}),e("userOptions",p)}else e("userOptions",{})},[t,e]);const h=(p,m)=>{const y=are(m),g=ore[y];return g({optionKey:p,optionConfig:m,control:i,setValue:e,disabled:r,watchedUserOptions:s,arrayInputs:n,setArrayInputs:a})};return Object.keys(c).length===0?null:z.jsxs("div",{className:Ul.formField,children:[z.jsx(Da,{children:ve.t("Model Parameters")}),z.jsx("div",{className:Ul.userOptionsContainer,children:Object.entries(c).filter(([p])=>p!=="additional_covariates").map(([p,m])=>h(p,m))})]})},G3=(i,e,t)=>{if(i&&"reportValidity"in i){const r=ai(t,e);i.setCustomValidity(r&&r.message||""),i.reportValidity()}},OD=(i,e)=>{for(const t in e.fields){const r=e.fields[t];r&&r.ref&&"reportValidity"in r.ref?G3(r.ref,t,i):r&&r.refs&&r.refs.forEach(n=>G3(n,t,i))}},cre=(i,e)=>{e.shouldUseNativeValidation&&OD(i,e);const t={};for(const r in i){const n=ai(e.fields,r),a=Object.assign(i[r]||{},{ref:n&&n.ref});if(ure(e.names||Object.keys(i),r)){const c=Object.assign({},ai(t,r));Kr(c,"root",a),Kr(t,r,c)}else Kr(t,r,a)}return t},ure=(i,e)=>{const t=H3(e);return i.some(r=>H3(r).match(`^${t}\\.\\d+`))};function H3(i){return i.replace(/\]|\[/g,"")}function dre(i,e){for(var t={};i.length;){var r=i[0],n=r.code,a=r.message,c=r.path.join(".");if(!t[c])if("unionErrors"in r){var s=r.unionErrors[0].errors[0];t[c]={message:s.message,type:s.code}}else t[c]={message:a,type:n};if("unionErrors"in r&&r.unionErrors.forEach(function(m){return m.errors.forEach(function(y){return i.push(y)})}),e){var h=t[c].types,p=h&&h[r.code];t[c]=ED(c,e,t,n,p?[].concat(p,r.message):r.message)}i.shift()}return t}function kx(i,e,t){return t===void 0&&(t={}),function(r,n,a){try{return Promise.resolve(function(c,s){try{var h=Promise.resolve(i[t.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(p){return a.shouldUseNativeValidation&&OD({},a),{errors:{},values:t.raw?Object.assign({},r):p}})}catch(p){return s(p)}return h&&h.then?h.then(void 0,s):h}(0,function(c){if(function(s){return Array.isArray(s==null?void 0:s.errors)}(c))return{values:{},errors:cre(dre(c.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw c}))}catch(c){return Promise.reject(c)}}}const hre=Bc({name:Ms().min(1,{message:ve.t("Name is required")}),templateId:Xie().min(1,{message:ve.t("Template is required")}),covariates:Pv(Bc({name:Ms().min(1,{message:ve.t("Covariate name is required")}).regex(/^\S*$/,{message:ve.t("Covariate name cannot contain spaces")})})),userOptions:Qie(Kie())}),pre=()=>{const{route:i}=Xu(),{modelTemplates:e,isLoading:t}=vD({route:i}),[r,n]=Ie.useState(""),[a,c]=Ie.useState(""),{control:s,handleSubmit:h,formState:{errors:p},watch:m,setValue:y}=Ex({resolver:kx(hre),defaultValues:{name:"",templateId:0,covariates:[],userOptions:{}}}),{fields:g,append:x,remove:v}=mie({control:s,name:"covariates"}),_=m("templateId"),C=Ie.useMemo(()=>e==null?void 0:e.find(E=>E.id===_),[e,_]),k=(C==null?void 0:C.requiredCovariates)||[];return{control:s,handleSubmit:h,errors:p,watch:m,setValue:y,fields:g,append:x,remove:v,newCovariate:r,setNewCovariate:n,covariateError:a,setCovariateError:c,handleAddCovariate:()=>{if(r.trim()){const E=r.trim();if(/\s/.test(E)){c(ve.t("Covariate name cannot contain spaces"));return}const A=k.includes(E),M=g.some(S=>m(`covariates.${g.indexOf(S)}.name`)===E);if(!A&&!M)x({name:E}),n(""),c("");else{c(ve.t("Covariate already exists"));return}}},currentTemplate:C,requiredCovariates:k,modelTemplates:e,isLoadingTemplates:t,watchedTemplateId:_}},fre="_formContainer_efg0v_1",mre="_formTitle_efg0v_9",gre="_formField_efg0v_14",yre="_errorText_efg0v_18",vre="_covariate_efg0v_24",xre="_covariateInput_efg0v_30",bre="_covariatesList_efg0v_35",wre="_covariateItem_efg0v_39",_re="_covariateItemText_efg0v_48",Cre="_actionButtons_efg0v_52",Tre="_requiredCovariateItem_efg0v_58",Sre="_requiredLabel_efg0v_63",Ls={formContainer:fre,formTitle:mre,formField:gre,errorText:yre,covariate:vre,covariateInput:xre,covariatesList:bre,covariateItem:wre,covariateItemText:_re,actionButtons:Cre,requiredCovariateItem:Tre,requiredLabel:Sre},Ere=({onSubmit:i,isSubmitting:e})=>{const{control:t,handleSubmit:r,errors:n,watch:a,setValue:c,fields:s,remove:h,newCovariate:p,setNewCovariate:m,covariateError:y,setCovariateError:g,handleAddCovariate:x,currentTemplate:v,requiredCovariates:_,modelTemplates:C,isLoadingTemplates:k,watchedTemplateId:w}=pre(),E=A=>{i(A)};return z.jsxs("div",{className:Ls.formContainer,children:[z.jsx("h2",{className:Ls.formTitle,children:ve.t("Configure Model")}),z.jsxs("form",{onSubmit:r(E),children:[z.jsxs("div",{className:Ls.formField,children:[z.jsx(Da,{children:ve.t("Model Template")}),z.jsx(el,{name:"templateId",control:t,render:({field:A})=>z.jsx(il,{selected:A.value>0?A.value.toString():"",loading:k,error:!!n.templateId,placeholder:ve.t("Select a model template"),disabled:k||!C,onChange:({selected:M})=>A.onChange(M?Number(M):0),children:C==null?void 0:C.map(M=>z.jsx(As,{label:M.displayName??M.name,value:M.id.toString()},M.id))})}),n.templateId&&z.jsx("p",{className:Ls.errorText,children:n.templateId.message})]}),z.jsxs("div",{className:Ls.formField,children:[z.jsx(el,{name:"name",control:t,render:({field:A})=>z.jsx(Yl,{label:ve.t("Configured Model Name"),value:A.value,error:!!n.name,disabled:!w,placeholder:ve.t('Enter something to identify your model, e.g. "Debug" or "Malaria"'),onChange:({value:M})=>A.onChange(M),helpText:A.value?ve.t("Your model will be saved as {{modelName}} [{{configuredModelName}}]",{modelName:v==null?void 0:v.displayName,configuredModelName:A.value,escape:":"}):void 0})}),n.name&&z.jsx("p",{className:Ls.errorText,children:n.name.message})]}),z.jsx(lre,{control:t,setValue:c,currentTemplate:v,disabled:!w}),z.jsxs("div",{className:Ls.formField,children:[z.jsx(Da,{children:ve.t("Additional Covariates")}),z.jsxs("div",{className:Ls.covariate,children:[z.jsx("div",{className:Ls.covariateInput,children:z.jsx(Yl,{value:p,placeholder:ve.t("Enter covariate name"),onChange:({value:A})=>{m(A||""),y&&g("")},disabled:!w,error:!!y})}),z.jsx(Ti,{onClick:x,disabled:!p.trim(),children:ve.t("Add")})]}),z.jsxs("div",{className:Ls.covariatesList,children:[_.map((A,M)=>z.jsxs("div",{className:`${Ls.covariateItem} ${Ls.requiredCovariateItem}`,children:[z.jsx("span",{className:Ls.covariateItemText,children:A}),z.jsx("span",{className:Ls.requiredLabel,children:ve.t("Required")})]},`required-${M}`)),s.map((A,M)=>z.jsxs("div",{className:Ls.covariateItem,children:[z.jsx("span",{className:Ls.covariateItemText,children:a(`covariates.${M}.name`)}),z.jsx(Ti,{onClick:()=>h(M),small:!0,children:ve.t("Remove")})]},A.id))]}),y&&z.jsx("p",{className:Ls.errorText,children:y}),n.covariates&&z.jsx("p",{className:Ls.errorText,children:ve.t("Please check covariates")})]}),z.jsx("div",{className:Ls.actionButtons,children:z.jsx(to,{children:z.jsx(Ti,{primary:!0,loading:e,type:"submit",children:ve.t("Configure Model")})})})]})]})},kre=()=>{const i=$s(),e=vo(),{show:t}=ba(ve.t("Model configured"),{success:!0}),{show:r}=ba(ve.t("Failed to configure model"),{error:!0});return rc({mutationFn:n=>ea.addConfiguredModelCrudConfiguredModelsPost({modelTemplateId:n.templateId,name:n.name,additionalContinuousCovariates:n.covariates.map(a=>a.name),userOptionValues:n.userOptions}),onSuccess:()=>{i.invalidateQueries({queryKey:["models"]}),e("/settings"),t()},onError:n=>{console.error(n),r()}})},Mre=()=>{const{route:i}=Xu(),{modelTemplates:e,error:t,isLoading:r}=vD({route:i}),{mutate:n,isLoading:a}=kre(),c=vo(),s=p=>{n(p)},h=()=>r?z.jsx("div",{className:m0.loadingContainer,children:z.jsx(La,{})}):t?z.jsxs("div",{className:m0.errorContainer,children:[z.jsx("p",{children:ve.t("Error loading model templates:")}),z.jsx("p",{children:t instanceof Error?t.message:ve.t("Unknown error")})]}):!e||e.length===0?z.jsx("div",{className:m0.emptyContainer,children:z.jsx("p",{children:ve.t("No model templates found.")})}):z.jsx("div",{children:z.jsx(Ere,{onSubmit:s,isSubmitting:a})});return z.jsxs("div",{children:[z.jsx(Uu,{pageTitle:ve.t("Model Templates"),pageDescription:ve.t("Configure new models based on generic model templates")}),z.jsx(Ti,{onClick:()=>c("/settings"),small:!0,icon:z.jsx(_g,{}),className:m0.backButton,children:ve.t("Back to settings")}),h()]})},Are=()=>z.jsx(Mre,{}),Ire="_drawerWrapper_g5ang_1",Pre={drawerWrapper:Ire},Dre="_formWrapper_1wb8p_1",Rre="_newPredictionForm_1wb8p_8",Lre="_newPredictionTitle_1wb8p_12",R1={formWrapper:Dre,newPredictionForm:Rre,newPredictionTitle:Lre},Nre=({onDrawerClose:i,onDrawerSubmit:e})=>{const[t,r]=Ie.useState([]),[n,a]=Ie.useState([]),[c,s]=Ie.useState([]),[h,p]=Ie.useState(void 0),[m,y]=Ie.useState(""),[g,x]=Ie.useState(void 0);return Ie.useEffect(()=>{if(g==null)return;const v=g.covariates.map(_=>({feature:_.name,origin:"dataItem",dataSource:""}));r(v)},[g]),z.jsx(z.Fragment,{children:z.jsxs("div",{className:R1.newPredictionForm,children:[z.jsxs("div",{className:R1.newPredictionTitle,children:[z.jsx("h2",{children:"New prediction"}),z.jsx(Ti,{icon:z.jsx(v_,{}),onClick:i})]}),z.jsxs("div",{className:R1.formWrapper,children:[z.jsx(Yl,{autoComplete:"",label:"Name of prediction",value:m,onChange:v=>y(v.value),placeholder:ve.t("Prediction for Northern Province")}),z.jsx(yD,{selectedModel:g,setSelectedModel:x}),z.jsx(fD,{setDataLayers:r,datasetLayers:t,predictMode:!0}),z.jsx(UI,{setTimePeriods:s}),z.jsx(VI,{orgUnits:n,setOrgUnits:a,orgUnitLevel:h,setOrgUnitLevel:p}),z.jsx(hD,{onDrawerSubmit:e,selectedModel:g,name:m,dataLayers:t,onSendAction:"predict",orgUnitLevel:h,selectedPeriodItems:c,selectedOrgUnits:n})]})]})})},zre=({onDrawerClose:i,isOpen:e,onDrawerSubmit:t})=>{const r=window.innerWidth<900?"100vw":"1000px";return z.jsx("div",{children:z.jsx(B2,{open:e,onClose:i,direction:"right",size:r,children:z.jsx("div",{className:Pre.drawerWrapper,children:z.jsx(Nre,{onDrawerClose:i,onDrawerSubmit:t})})})})},Ore=()=>{const[i,e]=Ie.useState(!1),[t,r]=Ie.useState(!1),n=()=>{r(!1),e(!1)};return Ie.useEffect(()=>{r(!0)},[t]),z.jsxs("div",{children:[z.jsx(Uu,{setDrawerOpen:e,pageTitle:"Predictions",pageDescription:"Forecasted disease trends generated by applying a predictive model to current data. These can be reviewed and imported into DHIS2 to support decision-making in the field.",setDrawerOpenText:"New prediction"}),z.jsx(zre,{isOpen:i,onDrawerClose:()=>e(!1),onDrawerSubmit:n}),t&&z.jsx(Qw,{type:"predictions"})]})},jre=({children:i})=>{const{baseUrl:e}=wg(),[t,r]=Ie.useState(!1),n=$s();return Ie.useEffect(()=>{ji.WITH_CREDENTIALS=!0,ji.BASE=e+"/api/routes/chap/run",n.setDefaultOptions({queries:{retry:(a,c)=>{if(c instanceof $w&&c.status>500){const s=MX();return s==null&&kX({concurrency:2}),a>0&&s&&(s==null?void 0:s.concurrency)!==1&&(console.log("set API request concurrency to 1"),s.concurrency=1),a<2}return!1}}}),r(!0)},[e,n]),t?z.jsx(z.Fragment,{children:i}):z.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:z.jsx(La,{})})},Fre="_settingsContainer_11gky_1",Bre={settingsContainer:Fre},$re="_container_1o19c_1",Ure="_header_1o19c_5",Vre="_settingsContainer_1o19c_16",Gre="_loaderContainer_1o19c_22",Hre="_mutedText_1o19c_32",qre="_routeInfo_1o19c_43",Wre="_routeInfoHeader_1o19c_50",Yre="_infoGrid_1o19c_64",Zre="_label_1o19c_71",Xre="_value_1o19c_76",Kre="_authorities_1o19c_82",Qre="_authority_1o19c_88",un={container:$re,header:Ure,settingsContainer:Vre,loaderContainer:Gre,mutedText:Hre,routeInfo:qre,routeInfoHeader:Wre,infoGrid:Yre,label:Zre,value:Xre,authorities:Kre,authority:Qre},Jre="F_CHAP_MODELING_APP",jD=({onSuccess:i,onError:e}={})=>{const t=$s(),r=sh(),{show:n}=ba(ve.t("Error saving route"),{critical:!0}),{show:a}=ba(ve.t("Route saved successfully"),{success:!0}),c=rc(async s=>{const{id:h,url:p}=s;if(h){const m=["routes","chap"],y=t.getQueryData(m);if(!y)throw new Error(`Route data not found in cache for key ${m}.`);const g=y.routes.find(v=>v.id===h);if(!g)throw new Error(`Route with id ${h} not found in cache for update.`);const x={resource:"routes",type:"update",id:h,data:{...g||{},url:p}};return r.mutate(x)}else{const m={resource:"routes",type:"create",data:{name:"Chap Modeling App",code:"chap",url:p,authorities:[Jre],headers:{"Content-Type":"application/json"}}};return r.mutate(m)}},{onSuccess:()=>{a(),t.invalidateQueries(["routes"]),i==null||i()},onError:s=>{n(),console.error("Error saving route:",s),e==null||e(s)}});return{saveRoute:c.mutate,isSaving:c.isLoading,error:c.error}},ene=Bc({url:Ms().url({message:ve.t("Invalid URL format")}).min(1,{message:ve.t("URL is required")}).refine(i=>i.endsWith("/**"),{message:ve.t("URL must end with a double wildcard (/**)")})}),FD=({onClose:i,onSubmit:e,isLoading:t,initialUrl:r="",modalTitle:n,submitButtonText:a})=>{const{control:c,handleSubmit:s,formState:{errors:h}}=Ex({resolver:kx(ene),shouldFocusError:!1,defaultValues:{url:r}}),p=m=>e(m);return z.jsx(va,{onClose:i,dataTest:"route-form-modal",children:z.jsxs("form",{onSubmit:s(p),children:[z.jsx(Oo,{children:n}),z.jsxs(go,{children:[z.jsx(Da,{htmlFor:"url",children:ve.t("CHAP Core URL")}),z.jsx(el,{name:"url",control:c,render:({field:m})=>z.jsx(nh,{...m,type:"text",error:!!h.url,onChange:y=>m.onChange(y.value),dataTest:"route-url-input"})}),h.url?z.jsx("p",{className:un.mutedText,children:h.url.message}):null]}),z.jsx(jo,{children:z.jsxs(to,{children:[z.jsx(Ti,{onClick:i,secondary:!0,disabled:t,dataTest:"cancel-route-button",children:ve.t("Cancel")}),z.jsx(Ti,{type:"submit",primary:!0,loading:t,disabled:t,dataTest:"submit-route-button",children:a})]})})]})})},tne=()=>{const[i,e]=Ie.useState(!1),{saveRoute:t,isSaving:r}=jD({onSuccess:()=>{e(!1)}}),n=s=>{t({url:s.url})},a=()=>{e(!0)},c=()=>{e(!1)};return z.jsxs(z.Fragment,{children:[z.jsx("div",{className:un.settingsContainer,children:z.jsxs("div",{className:un.routeInfo,children:[z.jsx("div",{className:un.routeInfoHeader,children:z.jsx("h3",{children:ve.t("Route configuration")})}),z.jsxs("div",{className:un.infoGrid,children:[z.jsx("span",{className:un.label,children:ve.t("Status")}),z.jsx("span",{className:un.mutedText,children:ve.t("No route found.")})]}),z.jsx("div",{style:{marginTop:"16px"},children:z.jsx(Ti,{onClick:a,icon:z.jsx(jv,{}),small:!0,loading:r,dataTest:"add-route-button",children:ve.t("Add route")})})]})}),i&&z.jsx(FD,{onClose:c,onSubmit:n,isLoading:r,initialUrl:"",modalTitle:ve.t("Add route"),submitButtonText:ve.t("Add")})]})},ine=({route:i,onClose:e})=>{const{saveRoute:t,isSaving:r}=jD({onSuccess:()=>{e()}}),n=a=>{t({id:i.id,url:a.url})};return z.jsx(FD,{onClose:e,onSubmit:n,isLoading:r,initialUrl:i.url,modalTitle:ve.t("Edit route"),submitButtonText:ve.t("Save")})},rne=({id:i,onSuccess:e,onError:t})=>{const r=sh(),n=$s(),{show:a}=ba(ve.t("Error deleting route"),{critical:!0}),{show:c}=ba(ve.t("Route deleted successfully"),{success:!0}),s={resource:"routes",id:i,type:"delete"},{mutate:h,isLoading:p}=rc(()=>r.mutate(s),{onSuccess:()=>{c(),n.invalidateQueries({queryKey:["routes"]}),e==null||e()},onError:m=>{a(),console.error("Error deleting route:",m),t==null||t(m)}});return{deleteRoute:h,isDeleting:p}},nne=({routeId:i,onClose:e})=>{const{deleteRoute:t,isDeleting:r}=rne({id:i,onSuccess:()=>{e()}});return z.jsxs(va,{onClose:e,small:!0,children:[z.jsx(Oo,{children:ve.t("Delete route")}),z.jsx(go,{children:z.jsx("p",{children:ve.t("Are you sure you want to delete this route?")})}),z.jsx(jo,{children:z.jsxs(to,{children:[z.jsx(Ti,{onClick:e,secondary:!0,children:ve.t("Cancel")}),z.jsx(Ti,{onClick:()=>t(),destructive:!0,loading:r,children:ve.t("Delete")})]})})]})},sne="_routeActions_1etwp_2",ane={routeActions:sne},one=({route:i})=>{const e=$s(),[t,r]=Ie.useState(!1),[n,a]=Ie.useState(!1),[c,s]=Ie.useState(!1),[h,p]=Ie.useState(!1),m=Ie.useRef(null);return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:ane.routeActions,children:[z.jsx(Ti,{icon:z.jsx(K1,{}),small:!0,onClick:()=>a(!0),children:ve.t("Sharing")}),z.jsxs("div",{ref:m,children:[z.jsx(Ti,{small:!0,onClick:()=>r(!t),children:z.jsx(Tg,{})}),t&&z.jsx(xg,{onBackdropClick:()=>r(!1),children:z.jsx(rh,{placement:"bottom-end",reference:m,children:z.jsxs(x_,{children:[z.jsx(tn,{dense:!0,onClick:()=>{p(!0),r(!1)},label:ve.t("Edit"),icon:z.jsx(T_,{})}),z.jsx(tn,{dense:!0,onClick:()=>{a(!0),r(!1)},label:ve.t("Sharing"),icon:z.jsx(K1,{})}),z.jsx(tn,{dense:!0,destructive:!0,onClick:()=>{s(!0),r(!1)},label:ve.t("Delete"),icon:z.jsx(Cg,{})})]})})})]})]}),n&&z.jsx(GA,{id:i.id,type:"route",onClose:()=>{e.invalidateQueries({queryKey:["routes"]}),a(!1)}}),c&&z.jsx(nne,{routeId:i.id,onClose:()=>s(!1)}),h&&z.jsx(ine,{route:i,onClose:()=>p(!1)})]})},lne=({route:i})=>Ie.useMemo(()=>!!i.sharing.public.startsWith("rw"),[i.sharing.public])?z.jsx(xa,{warning:!0,title:ve.t("Public access"),children:ve.t('Your route is public and can be accessed by anyone. This can potentially expose sensitive data. If you want to restrict access, click the "Sharing" button and remove access for "All users".')}):null,cne=()=>{const i="id,username,displayName,authorities",{data:e,isLoading:t,error:r}=ef({queryKey:["me",i],query:{resource:"me",params:{fields:i}},staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return{user:e,isLoading:t,error:r}},une=({authority:i})=>{const{user:e,isLoading:t,error:r}=cne(),n=Ie.useMemo(()=>{if(e)return e.authorities.includes("ALL")},[e]);return{hasAuthority:Ie.useMemo(()=>{if(e)return n?!0:Array.isArray(i)?i.some(c=>e.authorities.includes(c)):e.authorities.includes(i)},[e,i,n]),isSuperUser:n,isLoading:t,error:r}},ym=({children:i})=>z.jsx(bg,{children:z.jsxs("div",{className:un.container,children:[z.jsx("div",{className:un.header,children:z.jsx("h2",{children:ve.t("Route settings")})}),i]})}),dne="F_ROUTE_PRIVATE_ADD",hne="F_ROUTE_PUBLIC_ADD",pne=()=>{const{route:i,isLoading:e,error:t}=Xu(),{hasAuthority:r,isLoading:n}=une({authority:[dne,hne]});return Ie.useEffect(()=>{t&&console.error(t)},[t]),e||n?z.jsx(ym,{children:z.jsx("div",{className:un.loaderContainer,children:z.jsx(La,{})})}):t?z.jsx(ym,{children:z.jsxs("div",{className:un.loaderContainer,children:[z.jsx("p",{className:un.mutedText,children:ve.t("There was an error loading the route settings. Please try to reload the page.")}),z.jsx("p",{className:un.mutedText,children:ve.t("If the problem persists, please contact your system administrator.")})]})}):r?i?z.jsx(ym,{children:z.jsxs("div",{className:un.settingsContainer,children:[z.jsx(lne,{route:i}),z.jsxs("div",{className:un.routeInfo,children:[z.jsxs("div",{className:un.routeInfoHeader,children:[z.jsx("h3",{children:ve.t("Route configuration")}),z.jsx(one,{route:i})]}),z.jsxs("div",{className:un.infoGrid,children:[z.jsx("span",{className:un.label,children:ve.t("Name")}),z.jsx("span",{className:un.value,children:i.displayName}),z.jsx("span",{className:un.label,children:ve.t("Code")}),z.jsx("span",{className:un.value,children:i.code}),z.jsx("span",{className:un.label,children:ve.t("URL")}),z.jsx("span",{className:un.value,children:i.url}),i.authorities.length>0?z.jsxs(z.Fragment,{children:[z.jsx("span",{className:un.label,children:ve.t("Authorities")}),z.jsx("div",{className:un.authorities,children:i.authorities.map((a,c)=>z.jsx("span",{className:un.authority,children:a},c))})]}):null]})]})]})}):z.jsx(ym,{children:z.jsx(tne,{})}):z.jsx(ym,{children:z.jsxs("div",{className:un.loaderContainer,children:[z.jsx("p",{className:un.mutedText,children:ve.t("You do not have permission to add or modify routes.")}),z.jsx("p",{className:un.mutedText,children:ve.t("If you think this is an error, please contact your system administrator.")})]})})},fne="_container_18e5w_1",mne="_header_18e5w_5",gne="_loaderContainer_18e5w_16",yne="_mutedText_18e5w_26",vne="_info_18e5w_31",xne="_infoHeader_18e5w_38",bne="_settingsContainer_18e5w_52",wne="_infoGrid_18e5w_58",_ne="_label_18e5w_65",Cne="_value_18e5w_70",Zs={container:fne,header:mne,loaderContainer:gne,mutedText:yne,info:vne,infoHeader:xne,settingsContainer:bne,infoGrid:wne,label:_ne,value:Cne},xC=({route:i})=>{const{data:e,error:t,isLoading:r}=tl({queryKey:["systemInfo",i==null?void 0:i.url],queryFn:()=>xP.systemInfoSystemInfoGet(),enabled:!!i,staleTime:3e5,cacheTime:3e5,retry:0});return{status:e,error:t,isLoading:r}},Tne=()=>{const{route:i}=Xu(),{data:e,isLoading:t,error:r}=tl({queryKey:["chap-status",i==null?void 0:i.url],enabled:!!(i!=null&&i.url),queryFn:()=>fetch(`${i==null?void 0:i.url.replace("/**","")}/system-info`).then(n=>n.json()),staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return t?null:r||!e?z.jsx(xa,{title:ve.t("Your server might not be secure"),children:z.jsx("span",{className:Zs.mutedText,children:ve.t("CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access on your server firewall.")})}):z.jsx(z.Fragment,{children:z.jsx(xa,{error:!0,title:ve.t("Your server is not secure"),children:z.jsx("span",{className:Zs.mutedText,children:ve.t("CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access on your server firewall.")})})})},L1=({children:i})=>z.jsx(bg,{children:z.jsxs("div",{className:Zs.container,children:[z.jsx("div",{className:Zs.header,children:z.jsx("h2",{children:ve.t("CHAP settings")})}),i]})}),Sne=({route:i})=>{const{status:e,error:t,isLoading:r}=xC({route:i});return Ie.useEffect(()=>{t&&console.error(t)},[t]),r?z.jsx(L1,{children:z.jsx("div",{className:Zs.loaderContainer,children:z.jsx(La,{})})}):t||!e?z.jsx(L1,{children:z.jsx("div",{children:z.jsx(xa,{error:!0,title:ve.t("An error occurred while connecting to the CHAP server."),className:Zs.mutedText,children:ve.t("Are you sure you have configured your route correctly? See the console for more details.")})})}):z.jsx(L1,{children:z.jsxs("div",{className:Zs.settingsContainer,children:[z.jsx(Tne,{}),z.jsxs("div",{className:Zs.info,children:[z.jsx("div",{className:Zs.infoHeader,children:z.jsx("h3",{children:ve.t("Server information")})}),z.jsxs("div",{className:Zs.infoGrid,children:[e.chap_core_version&&z.jsxs(z.Fragment,{children:[z.jsx("span",{className:Zs.label,children:ve.t("CHAP Version")}),z.jsx("span",{className:Zs.value,children:e.chap_core_version})]}),e.python_version&&z.jsxs(z.Fragment,{children:[z.jsx("span",{className:Zs.label,children:ve.t("Python Version")}),z.jsx("span",{className:Zs.value,children:e.python_version})]}),e.os&&z.jsxs(z.Fragment,{children:[z.jsx("span",{className:Zs.label,children:ve.t("Operating System")}),z.jsx("span",{className:Zs.value,children:e.os})]}),z.jsx("span",{className:Zs.label,children:ve.t("Status")}),z.jsx("span",{className:Zs.value,style:{color:Me.green600},children:ve.t("Connected")})]})]})]})})},Ene="_container_15df0_1",kne="_header_15df0_5",Mne="_loaderContainer_15df0_16",Ane="_mutedText_15df0_26",Ine="_info_15df0_31",Pne="_infoHeader_15df0_38",Dne="_settingsContainer_15df0_52",Rne="_infoGrid_15df0_58",Lne="_label_15df0_65",Nne="_value_15df0_70",Ll={container:Ene,header:kne,loaderContainer:Mne,mutedText:Ane,info:Ine,infoHeader:Pne,settingsContainer:Dne,infoGrid:Rne,label:Lne,value:Nne},Mx=()=>{const{data:i,error:e,isLoading:t}=tl({queryKey:["models"],queryFn:()=>ea.listModelsCrudModelsGet(),staleTime:1/0,cacheTime:1/0,retry:0});return{models:i,error:e,isLoading:t}},N1=({children:i})=>z.jsx(bg,{children:z.jsxs("div",{className:Ll.container,children:[z.jsx("div",{className:Ll.header,children:z.jsx("h2",{children:ve.t("Model settings")})}),i]})}),zne=()=>{const{models:i,error:e,isLoading:t}=Mx(),r=vo();if(Ie.useEffect(()=>{e&&console.error(e)},[e]),t)return z.jsx(N1,{children:z.jsx("div",{className:Ll.loaderContainer,children:z.jsx(La,{})})});if(e)return z.jsx(N1,{children:z.jsx("div",{children:z.jsx(xa,{error:!0,title:ve.t("An error occurred while loading models."),className:Ll.mutedText,children:ve.t("Please try to reload the page. If the problem persists, contact your system administrator.")})})});const n=()=>{r("/settings/models")};return z.jsx(N1,{children:z.jsxs("div",{className:Ll.settingsContainer,children:[z.jsx(xa,{title:ve.t("Model templates"),children:ve.t("Model templates are base models that can be configured to fit your data with different parameters and covariates. This is still an advanced feature and should be used with caution.")}),z.jsxs("div",{className:Ll.info,children:[z.jsxs("div",{className:Ll.infoHeader,children:[z.jsx("h3",{children:ve.t("Configured models")}),z.jsx(Ti,{small:!0,onClick:n,icon:z.jsx(k_,{}),children:ve.t("Configure")})]}),z.jsxs("div",{className:Ll.infoGrid,children:[z.jsx("span",{className:Ll.label,children:ve.t("Models configured")}),z.jsx("span",{className:Ll.value,children:(i==null?void 0:i.length)||0})]})]})]})})},One=()=>{const{route:i}=Xu();return z.jsxs("div",{className:Bre.settingsContainer,children:[z.jsx(pne,{}),i&&z.jsx(Sne,{route:i}),i&&z.jsx(zne,{})]})},jne=function(){return null},Fne="_asideWrapper_35hxr_11",Bne="_collapsed_35hxr_18",$ne="_iconWrapper_35hxr_33",Une="_collapseButton_35hxr_53",vm={asideWrapper:Fne,collapsed:Bne,iconWrapper:$ne,collapseButton:Une},Vne="_active_1ej51_129",lo={"sidenav-wrap":"_sidenav-wrap_1ej51_22","sidenav-items":"_sidenav-items_1ej51_40","sidenav-parent":"_sidenav-parent_1ej51_48","sidenav-parent-chevron":"_sidenav-parent-chevron_1ej51_83","parent-is-open":"_parent-is-open_1ej51_89","sidenav-link":"_sidenav-link_1ej51_94","sidenav-link-disabled":"_sidenav-link-disabled_1ej51_120",active:Vne,"sidenav-item-icon":"_sidenav-item-icon_1ej51_144","sidenav-parent-has-icon":"_sidenav-parent-has-icon_1ej51_154"},Gne=({children:i,className:e})=>z.jsx("nav",{"data-test":"sidenav",className:Gi(lo["sidenav-wrap"],e),children:i}),Hne=({children:i})=>z.jsx("ul",{className:lo["sidenav-items"],children:i}),qne=({label:i,icon:e,disabled:t,children:r,open:n,onClick:a})=>z.jsx(z.Fragment,{children:z.jsxs("li",{className:Gi(lo["sidenav-parent"],{[lo["sidenav-parent-has-icon"]]:e,[lo["parent-is-open"]]:n}),children:[z.jsxs("button",{onClick:a,disabled:t,children:[e&&z.jsx("span",{className:lo["sidenav-item-icon"],children:e}),z.jsx("span",{className:lo["sidenav-parent-label"],children:i}),z.jsx("span",{className:lo["sidenav-parent-chevron"],children:z.jsx($v,{})})]}),n&&z.jsx("ul",{className:lo["sidenav-submenu"],children:r})]})}),Wne=({children:i,disabled:e})=>z.jsx("li",{className:Gi(lo["sidenav-link"],{[lo["sidenav-link-disabled"]]:e}),children:i}),Yne=({icon:i,active:e,disabled:t,children:r,to:n,LinkComponent:a,label:c,end:s})=>{const h=a?z.jsxs(a,{to:n,end:s,children:[i&&z.jsx("span",{className:lo["sidenav-item-icon"],children:i}),c]}):z.jsxs("a",{href:n,className:Gi({[lo.active]:e}),children:[i&&z.jsx("span",{className:lo["sidenav-item-icon"],children:i}),c]});return z.jsx(Wne,{disabled:t,children:de.Children.count(r)>0?r:h})},qm=({to:i,label:e,disabled:t,end:r})=>z.jsx(Yne,{to:i,disabled:t,LinkComponent:SI,label:e,end:r}),Zne=({label:i,links:e=[],initiallyOpen:t=!0})=>{const[r,n]=Ie.useState(t),a=()=>{n(!r)};return e.length===1?z.jsx(qm,{to:e[0].to,label:e[0].label,end:!0}):z.jsx(qne,{label:i,open:r,onClick:a,children:e.map(({to:c,label:s})=>z.jsx(qm,{to:c,label:s,end:!0},s))})},Xne=({className:i,hideSidebar:e})=>{const t=de.useRef(!1),[r,n]=Ie.useState(!1);return Ie.useEffect(()=>{(e!==void 0||t.current)&&(n(!!e),t.current=!!e)},[e]),z.jsxs("aside",{className:Gi(vm.asideWrapper,i,{[vm.collapsed]:r}),children:[z.jsx(Gne,{children:z.jsxs(Hne,{children:[z.jsx(Zne,{label:ve.t("Evaluate"),links:[{label:ve.t("Overview"),to:"/evaluate"},{label:ve.t("Compare"),to:"/evaluate/compare"}]}),z.jsx(qm,{to:"/predict",label:ve.t("Predict")}),z.jsx(qm,{to:"/jobs",label:ve.t("Jobs")}),z.jsx(qm,{to:"/settings",label:ve.t("Settings")})]})}),z.jsx("button",{className:vm.collapseButton,type:"button",onClick:()=>n(!r),children:z.jsx("div",{className:Gi(vm.iconWrapper,{[vm.collapsed]:r}),children:z.jsx(mk,{})})})]})},Kne="_wrapper_mpm4i_8",Qne="_main_mpm4i_18",Jne="_sidebar_mpm4i_26",ese="_hide_mpm4i_30",Dv={wrapper:Kne,main:Qne,sidebar:Jne,hide:ese},BD="main-layout",tse=({children:i,sidebar:e})=>z.jsxs("div",{className:Dv.wrapper,children:[e,z.jsx("div",{id:BD,className:Dv.main,children:i})]}),ise=({children:i,hideSidebar:e,collapseSidebar:t=!1})=>z.jsx(tse,{sidebar:z.jsx(Xne,{hideSidebar:t||e,className:Gi(Dv.sidebar,{[Dv.hide]:e})}),children:i}),rse=()=>{const i=yI().some(e=>{var t;return(t=e.handle)==null?void 0:t.collapseSidebar});return z.jsx(ise,{collapseSidebar:i,children:z.jsx(Nw,{})})},nse="_loadingContainer_d9803_1",sse={loadingContainer:nse},ase=({children:i})=>{const{route:e,isLoading:t}=Xu();return t?z.jsx("div",{className:sse.loadingContainer,children:z.jsx(La,{})}):e?i:z.jsx(bI,{to:"/get-started",replace:!0})},ose="_infoAboutReportingBugs_7cpvy_1",lse="_infoAboutReportingBugsInner_7cpvy_7",cse="_icon_7cpvy_17",z1={infoAboutReportingBugs:ose,infoAboutReportingBugsInner:lse,icon:cse},use=()=>{const[i,e]=Ie.useState(!0);return z.jsx("div",{className:z1.infoAboutReportingBugs,children:i&&z.jsxs("div",{className:z1.infoAboutReportingBugsInner,style:{maxWidth:"1400px"},children:[z.jsxs("div",{children:[z.jsx("span",{className:z1.icon,children:z.jsx(Pk,{})}),"Please be aware that you are using an alpha version, meaning you could experience bugs or issues. If you encounter any problems, please report to:"," ",z.jsx("a",{href:"mailto:example@example.com?subject=Modeling App | Issue%20Report:&body=RELEVANT%20LOGS:%0ADESCRIBE%20YOUR%20ISSUE:%0AHOW%20TO%20REPRODUCE:%0AIF%20ALLOWED,%20ATTACH%20THE%20DATA%20USED%20WHEN%20FAILING,%20GET%20THE%20DATA%20BY%20USING%20THE%20'DOWNLOAD%20BUTTON.':",children:"chap@dhis2.org"})]}),z.jsx("div",{children:z.jsx(Ti,{small:!0,onClick:()=>e(!i),children:z.jsx(ck,{})})})]})})},dse="_warningMargin_odnwa_1",hse="_warningMarginInner_odnwa_6",pse="_resultDescription_odnwa_11",xm={warningMargin:dse,warningMarginInner:hse,resultDescription:pse},fse="1.0.9",q3={minChapVersion:fse},mse=(i,e)=>{const t=i.split(".").map(Number),r=e.split(".").map(Number),n=Math.max(t.length,r.length);for(let a=0;a<n;a++){const c=t[a]||0,s=r[a]||0;if(c<s)return-1;if(c>s)return 1}return 0},gse=(i,e)=>mse(i,e)>=0,yse=()=>{const{appVersion:i}=wg(),e=i==null?void 0:i.full,{route:t}=Xu(),{status:r}=xC({route:t}),n=r&&gse(r.chap_core_version,q3.minChapVersion),{data:a,isError:c}=tl({queryKey:["is-compatible",t==null?void 0:t.url,e],queryFn:async()=>await xP.isCompatibleIsCompatibleGet(e),enabled:!!e,staleTime:1/0,cacheTime:1/0}),s=n===!1||(a==null?void 0:a.compatible)===!1||c;return z.jsx(z.Fragment,{children:s&&z.jsx("div",{className:xm.warningMargin,style:{maxWidth:"1400px"},children:z.jsx("div",{className:xm.warningMarginInner,children:z.jsxs(xa,{error:!0,title:"Incompatible versions",children:[z.jsx("div",{children:ve.t("The version of the Modeling App is not compatible with the backend (Chap core).")}),z.jsx("br",{}),!(a!=null&&a.compatible)&&z.jsx("p",{className:xm.resultDescription,children:z.jsx("i",{children:a==null?void 0:a.description})}),c&&z.jsx("p",{className:xm.resultDescription,children:z.jsx("i",{children:"Not able to check if the app is compatible with the Chap Core you are using, which means you are probably using an old version of Chap Core. See https://github.com/dhis2-chap/chap-core/releases/ for information on how to update."})}),n===!1&&z.jsx("p",{className:xm.resultDescription,children:z.jsx("i",{children:ve.t("The Chap Core version {{chapVersion}} is too old. The Modeling App specifies minimum Chap core version: {{chapMinVersion}}",{chapVersion:r==null?void 0:r.chap_core_version,chapMinVersion:q3.minChapVersion})})})]})})})})},vse="_container_zakw0_1",xse="_loadingContainer_zakw0_5",bse="_errorContainer_zakw0_12",O1={container:vse,loadingContainer:xse,errorContainer:bse},$D=()=>{const{data:i,error:e,isLoading:t}=tl({queryKey:["backtests"],queryFn:()=>ea.getBacktestsCrudBacktestsGet(),staleTime:3e5,cacheTime:3e5,retry:0});return{backtests:i,error:e,isLoading:t}};/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function bC(){return{accessor:(i,e)=>typeof i=="function"?{...e,accessorFn:i}:{...e,accessorKey:i},display:i=>i,group:i=>i}}function Au(i,e){return typeof i=="function"?i(e):i}function zo(i,e){return t=>{e.setState(r=>({...r,[i]:Au(t,r[i])}))}}function Ax(i){return i instanceof Function}function wse(i){return Array.isArray(i)&&i.every(e=>typeof e=="number")}function _se(i,e){const t=[],r=n=>{n.forEach(a=>{t.push(a);const c=e(a);c!=null&&c.length&&r(c)})};return r(i),t}function Wi(i,e,t){let r=[],n;return a=>{let c;t.key&&t.debug&&(c=Date.now());const s=i(a);if(!(s.length!==r.length||s.some((m,y)=>r[y]!==m)))return n;r=s;let p;if(t.key&&t.debug&&(p=Date.now()),n=e(...s),t==null||t.onChange==null||t.onChange(n),t.key&&t.debug&&t!=null&&t.debug()){const m=Math.round((Date.now()-c)*100)/100,y=Math.round((Date.now()-p)*100)/100,g=y/16,x=(v,_)=>{for(v=String(v);v.length<_;)v=" "+v;return v};console.info(`%c⏱ ${x(y,5)} /${x(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,t==null?void 0:t.key)}return n}}function Yi(i,e,t,r){return{debug:()=>{var n;return(n=i==null?void 0:i.debugAll)!=null?n:i[e]},key:!1,onChange:r}}function Cse(i,e,t,r){const n=()=>{var c;return(c=a.getValue())!=null?c:i.options.renderFallbackValue},a={id:`${e.id}_${t.id}`,row:e,column:t,getValue:()=>e.getValue(r),renderValue:n,getContext:Wi(()=>[i,t,e,a],(c,s,h,p)=>({table:c,column:s,row:h,cell:p,getValue:p.getValue,renderValue:p.renderValue}),Yi(i.options,"debugCells"))};return i._features.forEach(c=>{c.createCell==null||c.createCell(a,t,e,i)},{}),a}function Tse(i,e,t,r){var n,a;const s={...i._getDefaultColumnDef(),...e},h=s.accessorKey;let p=(n=(a=s.id)!=null?a:h?typeof String.prototype.replaceAll=="function"?h.replaceAll(".","_"):h.replace(/\./g,"_"):void 0)!=null?n:typeof s.header=="string"?s.header:void 0,m;if(s.accessorFn?m=s.accessorFn:h&&(h.includes(".")?m=g=>{let x=g;for(const _ of h.split(".")){var v;x=(v=x)==null?void 0:v[_]}return x}:m=g=>g[s.accessorKey]),!p)throw new Error;let y={id:`${String(p)}`,accessorFn:m,parent:r,depth:t,columnDef:s,columns:[],getFlatColumns:Wi(()=>[!0],()=>{var g;return[y,...(g=y.columns)==null?void 0:g.flatMap(x=>x.getFlatColumns())]},Yi(i.options,"debugColumns")),getLeafColumns:Wi(()=>[i._getOrderColumnsFn()],g=>{var x;if((x=y.columns)!=null&&x.length){let v=y.columns.flatMap(_=>_.getLeafColumns());return g(v)}return[y]},Yi(i.options,"debugColumns"))};for(const g of i._features)g.createColumn==null||g.createColumn(y,i);return y}const Ma="debugHeaders";function W3(i,e,t){var r;let a={id:(r=t.id)!=null?r:e.id,column:e,index:t.index,isPlaceholder:!!t.isPlaceholder,placeholderId:t.placeholderId,depth:t.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const c=[],s=h=>{h.subHeaders&&h.subHeaders.length&&h.subHeaders.map(s),c.push(h)};return s(a),c},getContext:()=>({table:i,header:a,column:e})};return i._features.forEach(c=>{c.createHeader==null||c.createHeader(a,i)}),a}const Sse={createTable:i=>{i.getHeaderGroups=Wi(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.left,i.getState().columnPinning.right],(e,t,r,n)=>{var a,c;const s=(a=r==null?void 0:r.map(y=>t.find(g=>g.id===y)).filter(Boolean))!=null?a:[],h=(c=n==null?void 0:n.map(y=>t.find(g=>g.id===y)).filter(Boolean))!=null?c:[],p=t.filter(y=>!(r!=null&&r.includes(y.id))&&!(n!=null&&n.includes(y.id)));return g0(e,[...s,...p,...h],i)},Yi(i.options,Ma)),i.getCenterHeaderGroups=Wi(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.left,i.getState().columnPinning.right],(e,t,r,n)=>(t=t.filter(a=>!(r!=null&&r.includes(a.id))&&!(n!=null&&n.includes(a.id))),g0(e,t,i,"center")),Yi(i.options,Ma)),i.getLeftHeaderGroups=Wi(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.left],(e,t,r)=>{var n;const a=(n=r==null?void 0:r.map(c=>t.find(s=>s.id===c)).filter(Boolean))!=null?n:[];return g0(e,a,i,"left")},Yi(i.options,Ma)),i.getRightHeaderGroups=Wi(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.right],(e,t,r)=>{var n;const a=(n=r==null?void 0:r.map(c=>t.find(s=>s.id===c)).filter(Boolean))!=null?n:[];return g0(e,a,i,"right")},Yi(i.options,Ma)),i.getFooterGroups=Wi(()=>[i.getHeaderGroups()],e=>[...e].reverse(),Yi(i.options,Ma)),i.getLeftFooterGroups=Wi(()=>[i.getLeftHeaderGroups()],e=>[...e].reverse(),Yi(i.options,Ma)),i.getCenterFooterGroups=Wi(()=>[i.getCenterHeaderGroups()],e=>[...e].reverse(),Yi(i.options,Ma)),i.getRightFooterGroups=Wi(()=>[i.getRightHeaderGroups()],e=>[...e].reverse(),Yi(i.options,Ma)),i.getFlatHeaders=Wi(()=>[i.getHeaderGroups()],e=>e.map(t=>t.headers).flat(),Yi(i.options,Ma)),i.getLeftFlatHeaders=Wi(()=>[i.getLeftHeaderGroups()],e=>e.map(t=>t.headers).flat(),Yi(i.options,Ma)),i.getCenterFlatHeaders=Wi(()=>[i.getCenterHeaderGroups()],e=>e.map(t=>t.headers).flat(),Yi(i.options,Ma)),i.getRightFlatHeaders=Wi(()=>[i.getRightHeaderGroups()],e=>e.map(t=>t.headers).flat(),Yi(i.options,Ma)),i.getCenterLeafHeaders=Wi(()=>[i.getCenterFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),Yi(i.options,Ma)),i.getLeftLeafHeaders=Wi(()=>[i.getLeftFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),Yi(i.options,Ma)),i.getRightLeafHeaders=Wi(()=>[i.getRightFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),Yi(i.options,Ma)),i.getLeafHeaders=Wi(()=>[i.getLeftHeaderGroups(),i.getCenterHeaderGroups(),i.getRightHeaderGroups()],(e,t,r)=>{var n,a,c,s,h,p;return[...(n=(a=e[0])==null?void 0:a.headers)!=null?n:[],...(c=(s=t[0])==null?void 0:s.headers)!=null?c:[],...(h=(p=r[0])==null?void 0:p.headers)!=null?h:[]].map(m=>m.getLeafHeaders()).flat()},Yi(i.options,Ma))}};function g0(i,e,t,r){var n,a;let c=0;const s=function(g,x){x===void 0&&(x=1),c=Math.max(c,x),g.filter(v=>v.getIsVisible()).forEach(v=>{var _;(_=v.columns)!=null&&_.length&&s(v.columns,x+1)},0)};s(i);let h=[];const p=(g,x)=>{const v={depth:x,id:[r,`${x}`].filter(Boolean).join("_"),headers:[]},_=[];g.forEach(C=>{const k=[..._].reverse()[0],w=C.column.depth===v.depth;let E,A=!1;if(w&&C.column.parent?E=C.column.parent:(E=C.column,A=!0),k&&(k==null?void 0:k.column)===E)k.subHeaders.push(C);else{const M=W3(t,E,{id:[r,x,E.id,C==null?void 0:C.id].filter(Boolean).join("_"),isPlaceholder:A,placeholderId:A?`${_.filter(S=>S.column===E).length}`:void 0,depth:x,index:_.length});M.subHeaders.push(C),_.push(M)}v.headers.push(C),C.headerGroup=v}),h.push(v),x>0&&p(_,x-1)},m=e.map((g,x)=>W3(t,g,{depth:c,index:x}));p(m,c-1),h.reverse();const y=g=>g.filter(v=>v.column.getIsVisible()).map(v=>{let _=0,C=0,k=[0];v.subHeaders&&v.subHeaders.length?(k=[],y(v.subHeaders).forEach(E=>{let{colSpan:A,rowSpan:M}=E;_+=A,k.push(M)})):_=1;const w=Math.min(...k);return C=C+w,v.colSpan=_,v.rowSpan=C,{colSpan:_,rowSpan:C}});return y((n=(a=h[0])==null?void 0:a.headers)!=null?n:[]),h}const wC=(i,e,t,r,n,a,c)=>{let s={id:e,index:r,original:t,depth:n,parentId:c,_valuesCache:{},_uniqueValuesCache:{},getValue:h=>{if(s._valuesCache.hasOwnProperty(h))return s._valuesCache[h];const p=i.getColumn(h);if(p!=null&&p.accessorFn)return s._valuesCache[h]=p.accessorFn(s.original,r),s._valuesCache[h]},getUniqueValues:h=>{if(s._uniqueValuesCache.hasOwnProperty(h))return s._uniqueValuesCache[h];const p=i.getColumn(h);if(p!=null&&p.accessorFn)return p.columnDef.getUniqueValues?(s._uniqueValuesCache[h]=p.columnDef.getUniqueValues(s.original,r),s._uniqueValuesCache[h]):(s._uniqueValuesCache[h]=[s.getValue(h)],s._uniqueValuesCache[h])},renderValue:h=>{var p;return(p=s.getValue(h))!=null?p:i.options.renderFallbackValue},subRows:[],getLeafRows:()=>_se(s.subRows,h=>h.subRows),getParentRow:()=>s.parentId?i.getRow(s.parentId,!0):void 0,getParentRows:()=>{let h=[],p=s;for(;;){const m=p.getParentRow();if(!m)break;h.push(m),p=m}return h.reverse()},getAllCells:Wi(()=>[i.getAllLeafColumns()],h=>h.map(p=>Cse(i,s,p,p.id)),Yi(i.options,"debugRows")),_getAllCellsByColumnId:Wi(()=>[s.getAllCells()],h=>h.reduce((p,m)=>(p[m.column.id]=m,p),{}),Yi(i.options,"debugRows"))};for(let h=0;h<i._features.length;h++){const p=i._features[h];p==null||p.createRow==null||p.createRow(s,i)}return s},Ese={createColumn:(i,e)=>{i._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,i.id),i.getFacetedRowModel=()=>i._getFacetedRowModel?i._getFacetedRowModel():e.getPreFilteredRowModel(),i._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,i.id),i.getFacetedUniqueValues=()=>i._getFacetedUniqueValues?i._getFacetedUniqueValues():new Map,i._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,i.id),i.getFacetedMinMaxValues=()=>{if(i._getFacetedMinMaxValues)return i._getFacetedMinMaxValues()}}},UD=(i,e,t)=>{var r,n;const a=t==null||(r=t.toString())==null?void 0:r.toLowerCase();return!!(!((n=i.getValue(e))==null||(n=n.toString())==null||(n=n.toLowerCase())==null)&&n.includes(a))};UD.autoRemove=i=>fl(i);const VD=(i,e,t)=>{var r;return!!(!((r=i.getValue(e))==null||(r=r.toString())==null)&&r.includes(t))};VD.autoRemove=i=>fl(i);const GD=(i,e,t)=>{var r;return((r=i.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(t==null?void 0:t.toLowerCase())};GD.autoRemove=i=>fl(i);const HD=(i,e,t)=>{var r;return(r=i.getValue(e))==null?void 0:r.includes(t)};HD.autoRemove=i=>fl(i);const qD=(i,e,t)=>!t.some(r=>{var n;return!((n=i.getValue(e))!=null&&n.includes(r))});qD.autoRemove=i=>fl(i)||!(i!=null&&i.length);const WD=(i,e,t)=>t.some(r=>{var n;return(n=i.getValue(e))==null?void 0:n.includes(r)});WD.autoRemove=i=>fl(i)||!(i!=null&&i.length);const YD=(i,e,t)=>i.getValue(e)===t;YD.autoRemove=i=>fl(i);const ZD=(i,e,t)=>i.getValue(e)==t;ZD.autoRemove=i=>fl(i);const _C=(i,e,t)=>{let[r,n]=t;const a=i.getValue(e);return a>=r&&a<=n};_C.resolveFilterValue=i=>{let[e,t]=i,r=typeof e!="number"?parseFloat(e):e,n=typeof t!="number"?parseFloat(t):t,a=e===null||Number.isNaN(r)?-1/0:r,c=t===null||Number.isNaN(n)?1/0:n;if(a>c){const s=a;a=c,c=s}return[a,c]};_C.autoRemove=i=>fl(i)||fl(i[0])&&fl(i[1]);const Mc={includesString:UD,includesStringSensitive:VD,equalsString:GD,arrIncludes:HD,arrIncludesAll:qD,arrIncludesSome:WD,equals:YD,weakEquals:ZD,inNumberRange:_C};function fl(i){return i==null||i===""}const kse={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:i=>({columnFilters:[],...i}),getDefaultOptions:i=>({onColumnFiltersChange:zo("columnFilters",i),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(i,e)=>{i.getAutoFilterFn=()=>{const t=e.getCoreRowModel().flatRows[0],r=t==null?void 0:t.getValue(i.id);return typeof r=="string"?Mc.includesString:typeof r=="number"?Mc.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?Mc.equals:Array.isArray(r)?Mc.arrIncludes:Mc.weakEquals},i.getFilterFn=()=>{var t,r;return Ax(i.columnDef.filterFn)?i.columnDef.filterFn:i.columnDef.filterFn==="auto"?i.getAutoFilterFn():(t=(r=e.options.filterFns)==null?void 0:r[i.columnDef.filterFn])!=null?t:Mc[i.columnDef.filterFn]},i.getCanFilter=()=>{var t,r,n;return((t=i.columnDef.enableColumnFilter)!=null?t:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((n=e.options.enableFilters)!=null?n:!0)&&!!i.accessorFn},i.getIsFiltered=()=>i.getFilterIndex()>-1,i.getFilterValue=()=>{var t;return(t=e.getState().columnFilters)==null||(t=t.find(r=>r.id===i.id))==null?void 0:t.value},i.getFilterIndex=()=>{var t,r;return(t=(r=e.getState().columnFilters)==null?void 0:r.findIndex(n=>n.id===i.id))!=null?t:-1},i.setFilterValue=t=>{e.setColumnFilters(r=>{const n=i.getFilterFn(),a=r==null?void 0:r.find(m=>m.id===i.id),c=Au(t,a?a.value:void 0);if(Y3(n,c,i)){var s;return(s=r==null?void 0:r.filter(m=>m.id!==i.id))!=null?s:[]}const h={id:i.id,value:c};if(a){var p;return(p=r==null?void 0:r.map(m=>m.id===i.id?h:m))!=null?p:[]}return r!=null&&r.length?[...r,h]:[h]})}},createRow:(i,e)=>{i.columnFilters={},i.columnFiltersMeta={}},createTable:i=>{i.setColumnFilters=e=>{const t=i.getAllLeafColumns(),r=n=>{var a;return(a=Au(e,n))==null?void 0:a.filter(c=>{const s=t.find(h=>h.id===c.id);if(s){const h=s.getFilterFn();if(Y3(h,c.value,s))return!1}return!0})};i.options.onColumnFiltersChange==null||i.options.onColumnFiltersChange(r)},i.resetColumnFilters=e=>{var t,r;i.setColumnFilters(e?[]:(t=(r=i.initialState)==null?void 0:r.columnFilters)!=null?t:[])},i.getPreFilteredRowModel=()=>i.getCoreRowModel(),i.getFilteredRowModel=()=>(!i._getFilteredRowModel&&i.options.getFilteredRowModel&&(i._getFilteredRowModel=i.options.getFilteredRowModel(i)),i.options.manualFiltering||!i._getFilteredRowModel?i.getPreFilteredRowModel():i._getFilteredRowModel())}};function Y3(i,e,t){return(i&&i.autoRemove?i.autoRemove(e,t):!1)||typeof e>"u"||typeof e=="string"&&!e}const Mse=(i,e,t)=>t.reduce((r,n)=>{const a=n.getValue(i);return r+(typeof a=="number"?a:0)},0),Ase=(i,e,t)=>{let r;return t.forEach(n=>{const a=n.getValue(i);a!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}),r},Ise=(i,e,t)=>{let r;return t.forEach(n=>{const a=n.getValue(i);a!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}),r},Pse=(i,e,t)=>{let r,n;return t.forEach(a=>{const c=a.getValue(i);c!=null&&(r===void 0?c>=c&&(r=n=c):(r>c&&(r=c),n<c&&(n=c)))}),[r,n]},Dse=(i,e)=>{let t=0,r=0;if(e.forEach(n=>{let a=n.getValue(i);a!=null&&(a=+a)>=a&&(++t,r+=a)}),t)return r/t},Rse=(i,e)=>{if(!e.length)return;const t=e.map(a=>a.getValue(i));if(!wse(t))return;if(t.length===1)return t[0];const r=Math.floor(t.length/2),n=t.sort((a,c)=>a-c);return t.length%2!==0?n[r]:(n[r-1]+n[r])/2},Lse=(i,e)=>Array.from(new Set(e.map(t=>t.getValue(i))).values()),Nse=(i,e)=>new Set(e.map(t=>t.getValue(i))).size,zse=(i,e)=>e.length,j1={sum:Mse,min:Ase,max:Ise,extent:Pse,mean:Dse,median:Rse,unique:Lse,uniqueCount:Nse,count:zse},Ose={getDefaultColumnDef:()=>({aggregatedCell:i=>{var e,t;return(e=(t=i.getValue())==null||t.toString==null?void 0:t.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:i=>({grouping:[],...i}),getDefaultOptions:i=>({onGroupingChange:zo("grouping",i),groupedColumnMode:"reorder"}),createColumn:(i,e)=>{i.toggleGrouping=()=>{e.setGrouping(t=>t!=null&&t.includes(i.id)?t.filter(r=>r!==i.id):[...t??[],i.id])},i.getCanGroup=()=>{var t,r;return((t=i.columnDef.enableGrouping)!=null?t:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!i.accessorFn||!!i.columnDef.getGroupingValue)},i.getIsGrouped=()=>{var t;return(t=e.getState().grouping)==null?void 0:t.includes(i.id)},i.getGroupedIndex=()=>{var t;return(t=e.getState().grouping)==null?void 0:t.indexOf(i.id)},i.getToggleGroupingHandler=()=>{const t=i.getCanGroup();return()=>{t&&i.toggleGrouping()}},i.getAutoAggregationFn=()=>{const t=e.getCoreRowModel().flatRows[0],r=t==null?void 0:t.getValue(i.id);if(typeof r=="number")return j1.sum;if(Object.prototype.toString.call(r)==="[object Date]")return j1.extent},i.getAggregationFn=()=>{var t,r;if(!i)throw new Error;return Ax(i.columnDef.aggregationFn)?i.columnDef.aggregationFn:i.columnDef.aggregationFn==="auto"?i.getAutoAggregationFn():(t=(r=e.options.aggregationFns)==null?void 0:r[i.columnDef.aggregationFn])!=null?t:j1[i.columnDef.aggregationFn]}},createTable:i=>{i.setGrouping=e=>i.options.onGroupingChange==null?void 0:i.options.onGroupingChange(e),i.resetGrouping=e=>{var t,r;i.setGrouping(e?[]:(t=(r=i.initialState)==null?void 0:r.grouping)!=null?t:[])},i.getPreGroupedRowModel=()=>i.getFilteredRowModel(),i.getGroupedRowModel=()=>(!i._getGroupedRowModel&&i.options.getGroupedRowModel&&(i._getGroupedRowModel=i.options.getGroupedRowModel(i)),i.options.manualGrouping||!i._getGroupedRowModel?i.getPreGroupedRowModel():i._getGroupedRowModel())},createRow:(i,e)=>{i.getIsGrouped=()=>!!i.groupingColumnId,i.getGroupingValue=t=>{if(i._groupingValuesCache.hasOwnProperty(t))return i._groupingValuesCache[t];const r=e.getColumn(t);return r!=null&&r.columnDef.getGroupingValue?(i._groupingValuesCache[t]=r.columnDef.getGroupingValue(i.original),i._groupingValuesCache[t]):i.getValue(t)},i._groupingValuesCache={}},createCell:(i,e,t,r)=>{i.getIsGrouped=()=>e.getIsGrouped()&&e.id===t.groupingColumnId,i.getIsPlaceholder=()=>!i.getIsGrouped()&&e.getIsGrouped(),i.getIsAggregated=()=>{var n;return!i.getIsGrouped()&&!i.getIsPlaceholder()&&!!((n=t.subRows)!=null&&n.length)}}};function jse(i,e,t){if(!(e!=null&&e.length)||!t)return i;const r=i.filter(a=>!e.includes(a.id));return t==="remove"?r:[...e.map(a=>i.find(c=>c.id===a)).filter(Boolean),...r]}const Fse={getInitialState:i=>({columnOrder:[],...i}),getDefaultOptions:i=>({onColumnOrderChange:zo("columnOrder",i)}),createColumn:(i,e)=>{i.getIndex=Wi(t=>[Wm(e,t)],t=>t.findIndex(r=>r.id===i.id),Yi(e.options,"debugColumns")),i.getIsFirstColumn=t=>{var r;return((r=Wm(e,t)[0])==null?void 0:r.id)===i.id},i.getIsLastColumn=t=>{var r;const n=Wm(e,t);return((r=n[n.length-1])==null?void 0:r.id)===i.id}},createTable:i=>{i.setColumnOrder=e=>i.options.onColumnOrderChange==null?void 0:i.options.onColumnOrderChange(e),i.resetColumnOrder=e=>{var t;i.setColumnOrder(e?[]:(t=i.initialState.columnOrder)!=null?t:[])},i._getOrderColumnsFn=Wi(()=>[i.getState().columnOrder,i.getState().grouping,i.options.groupedColumnMode],(e,t,r)=>n=>{let a=[];if(!(e!=null&&e.length))a=n;else{const c=[...e],s=[...n];for(;s.length&&c.length;){const h=c.shift(),p=s.findIndex(m=>m.id===h);p>-1&&a.push(s.splice(p,1)[0])}a=[...a,...s]}return jse(a,t,r)},Yi(i.options,"debugTable"))}},F1=()=>({left:[],right:[]}),Bse={getInitialState:i=>({columnPinning:F1(),...i}),getDefaultOptions:i=>({onColumnPinningChange:zo("columnPinning",i)}),createColumn:(i,e)=>{i.pin=t=>{const r=i.getLeafColumns().map(n=>n.id).filter(Boolean);e.setColumnPinning(n=>{var a,c;if(t==="right"){var s,h;return{left:((s=n==null?void 0:n.left)!=null?s:[]).filter(y=>!(r!=null&&r.includes(y))),right:[...((h=n==null?void 0:n.right)!=null?h:[]).filter(y=>!(r!=null&&r.includes(y))),...r]}}if(t==="left"){var p,m;return{left:[...((p=n==null?void 0:n.left)!=null?p:[]).filter(y=>!(r!=null&&r.includes(y))),...r],right:((m=n==null?void 0:n.right)!=null?m:[]).filter(y=>!(r!=null&&r.includes(y)))}}return{left:((a=n==null?void 0:n.left)!=null?a:[]).filter(y=>!(r!=null&&r.includes(y))),right:((c=n==null?void 0:n.right)!=null?c:[]).filter(y=>!(r!=null&&r.includes(y)))}})},i.getCanPin=()=>i.getLeafColumns().some(r=>{var n,a,c;return((n=r.columnDef.enablePinning)!=null?n:!0)&&((a=(c=e.options.enableColumnPinning)!=null?c:e.options.enablePinning)!=null?a:!0)}),i.getIsPinned=()=>{const t=i.getLeafColumns().map(s=>s.id),{left:r,right:n}=e.getState().columnPinning,a=t.some(s=>r==null?void 0:r.includes(s)),c=t.some(s=>n==null?void 0:n.includes(s));return a?"left":c?"right":!1},i.getPinnedIndex=()=>{var t,r;const n=i.getIsPinned();return n?(t=(r=e.getState().columnPinning)==null||(r=r[n])==null?void 0:r.indexOf(i.id))!=null?t:-1:0}},createRow:(i,e)=>{i.getCenterVisibleCells=Wi(()=>[i._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,r,n)=>{const a=[...r??[],...n??[]];return t.filter(c=>!a.includes(c.column.id))},Yi(e.options,"debugRows")),i.getLeftVisibleCells=Wi(()=>[i._getAllVisibleCells(),e.getState().columnPinning.left],(t,r)=>(r??[]).map(a=>t.find(c=>c.column.id===a)).filter(Boolean).map(a=>({...a,position:"left"})),Yi(e.options,"debugRows")),i.getRightVisibleCells=Wi(()=>[i._getAllVisibleCells(),e.getState().columnPinning.right],(t,r)=>(r??[]).map(a=>t.find(c=>c.column.id===a)).filter(Boolean).map(a=>({...a,position:"right"})),Yi(e.options,"debugRows"))},createTable:i=>{i.setColumnPinning=e=>i.options.onColumnPinningChange==null?void 0:i.options.onColumnPinningChange(e),i.resetColumnPinning=e=>{var t,r;return i.setColumnPinning(e?F1():(t=(r=i.initialState)==null?void 0:r.columnPinning)!=null?t:F1())},i.getIsSomeColumnsPinned=e=>{var t;const r=i.getState().columnPinning;if(!e){var n,a;return!!((n=r.left)!=null&&n.length||(a=r.right)!=null&&a.length)}return!!((t=r[e])!=null&&t.length)},i.getLeftLeafColumns=Wi(()=>[i.getAllLeafColumns(),i.getState().columnPinning.left],(e,t)=>(t??[]).map(r=>e.find(n=>n.id===r)).filter(Boolean),Yi(i.options,"debugColumns")),i.getRightLeafColumns=Wi(()=>[i.getAllLeafColumns(),i.getState().columnPinning.right],(e,t)=>(t??[]).map(r=>e.find(n=>n.id===r)).filter(Boolean),Yi(i.options,"debugColumns")),i.getCenterLeafColumns=Wi(()=>[i.getAllLeafColumns(),i.getState().columnPinning.left,i.getState().columnPinning.right],(e,t,r)=>{const n=[...t??[],...r??[]];return e.filter(a=>!n.includes(a.id))},Yi(i.options,"debugColumns"))}};function $se(i){return i||(typeof document<"u"?document:null)}const y0={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},B1=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Use={getDefaultColumnDef:()=>y0,getInitialState:i=>({columnSizing:{},columnSizingInfo:B1(),...i}),getDefaultOptions:i=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:zo("columnSizing",i),onColumnSizingInfoChange:zo("columnSizingInfo",i)}),createColumn:(i,e)=>{i.getSize=()=>{var t,r,n;const a=e.getState().columnSizing[i.id];return Math.min(Math.max((t=i.columnDef.minSize)!=null?t:y0.minSize,(r=a??i.columnDef.size)!=null?r:y0.size),(n=i.columnDef.maxSize)!=null?n:y0.maxSize)},i.getStart=Wi(t=>[t,Wm(e,t),e.getState().columnSizing],(t,r)=>r.slice(0,i.getIndex(t)).reduce((n,a)=>n+a.getSize(),0),Yi(e.options,"debugColumns")),i.getAfter=Wi(t=>[t,Wm(e,t),e.getState().columnSizing],(t,r)=>r.slice(i.getIndex(t)+1).reduce((n,a)=>n+a.getSize(),0),Yi(e.options,"debugColumns")),i.resetSize=()=>{e.setColumnSizing(t=>{let{[i.id]:r,...n}=t;return n})},i.getCanResize=()=>{var t,r;return((t=i.columnDef.enableResizing)!=null?t:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},i.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===i.id},createHeader:(i,e)=>{i.getSize=()=>{let t=0;const r=n=>{if(n.subHeaders.length)n.subHeaders.forEach(r);else{var a;t+=(a=n.column.getSize())!=null?a:0}};return r(i),t},i.getStart=()=>{if(i.index>0){const t=i.headerGroup.headers[i.index-1];return t.getStart()+t.getSize()}return 0},i.getResizeHandler=t=>{const r=e.getColumn(i.column.id),n=r==null?void 0:r.getCanResize();return a=>{if(!r||!n||(a.persist==null||a.persist(),$1(a)&&a.touches&&a.touches.length>1))return;const c=i.getSize(),s=i?i.getLeafHeaders().map(k=>[k.column.id,k.column.getSize()]):[[r.id,r.getSize()]],h=$1(a)?Math.round(a.touches[0].clientX):a.clientX,p={},m=(k,w)=>{typeof w=="number"&&(e.setColumnSizingInfo(E=>{var A,M;const S=e.options.columnResizeDirection==="rtl"?-1:1,N=(w-((A=E==null?void 0:E.startOffset)!=null?A:0))*S,Y=Math.max(N/((M=E==null?void 0:E.startSize)!=null?M:0),-.999999);return E.columnSizingStart.forEach(Z=>{let[K,U]=Z;p[K]=Math.round(Math.max(U+U*Y,0)*100)/100}),{...E,deltaOffset:N,deltaPercentage:Y}}),(e.options.columnResizeMode==="onChange"||k==="end")&&e.setColumnSizing(E=>({...E,...p})))},y=k=>m("move",k),g=k=>{m("end",k),e.setColumnSizingInfo(w=>({...w,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},x=$se(t),v={moveHandler:k=>y(k.clientX),upHandler:k=>{x==null||x.removeEventListener("mousemove",v.moveHandler),x==null||x.removeEventListener("mouseup",v.upHandler),g(k.clientX)}},_={moveHandler:k=>(k.cancelable&&(k.preventDefault(),k.stopPropagation()),y(k.touches[0].clientX),!1),upHandler:k=>{var w;x==null||x.removeEventListener("touchmove",_.moveHandler),x==null||x.removeEventListener("touchend",_.upHandler),k.cancelable&&(k.preventDefault(),k.stopPropagation()),g((w=k.touches[0])==null?void 0:w.clientX)}},C=Vse()?{passive:!1}:!1;$1(a)?(x==null||x.addEventListener("touchmove",_.moveHandler,C),x==null||x.addEventListener("touchend",_.upHandler,C)):(x==null||x.addEventListener("mousemove",v.moveHandler,C),x==null||x.addEventListener("mouseup",v.upHandler,C)),e.setColumnSizingInfo(k=>({...k,startOffset:h,startSize:c,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:r.id}))}}},createTable:i=>{i.setColumnSizing=e=>i.options.onColumnSizingChange==null?void 0:i.options.onColumnSizingChange(e),i.setColumnSizingInfo=e=>i.options.onColumnSizingInfoChange==null?void 0:i.options.onColumnSizingInfoChange(e),i.resetColumnSizing=e=>{var t;i.setColumnSizing(e?{}:(t=i.initialState.columnSizing)!=null?t:{})},i.resetHeaderSizeInfo=e=>{var t;i.setColumnSizingInfo(e?B1():(t=i.initialState.columnSizingInfo)!=null?t:B1())},i.getTotalSize=()=>{var e,t;return(e=(t=i.getHeaderGroups()[0])==null?void 0:t.headers.reduce((r,n)=>r+n.getSize(),0))!=null?e:0},i.getLeftTotalSize=()=>{var e,t;return(e=(t=i.getLeftHeaderGroups()[0])==null?void 0:t.headers.reduce((r,n)=>r+n.getSize(),0))!=null?e:0},i.getCenterTotalSize=()=>{var e,t;return(e=(t=i.getCenterHeaderGroups()[0])==null?void 0:t.headers.reduce((r,n)=>r+n.getSize(),0))!=null?e:0},i.getRightTotalSize=()=>{var e,t;return(e=(t=i.getRightHeaderGroups()[0])==null?void 0:t.headers.reduce((r,n)=>r+n.getSize(),0))!=null?e:0}}};let v0=null;function Vse(){if(typeof v0=="boolean")return v0;let i=!1;try{const e={get passive(){return i=!0,!1}},t=()=>{};window.addEventListener("test",t,e),window.removeEventListener("test",t)}catch{i=!1}return v0=i,v0}function $1(i){return i.type==="touchstart"}const Gse={getInitialState:i=>({columnVisibility:{},...i}),getDefaultOptions:i=>({onColumnVisibilityChange:zo("columnVisibility",i)}),createColumn:(i,e)=>{i.toggleVisibility=t=>{i.getCanHide()&&e.setColumnVisibility(r=>({...r,[i.id]:t??!i.getIsVisible()}))},i.getIsVisible=()=>{var t,r;const n=i.columns;return(t=n.length?n.some(a=>a.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[i.id])!=null?t:!0},i.getCanHide=()=>{var t,r;return((t=i.columnDef.enableHiding)!=null?t:!0)&&((r=e.options.enableHiding)!=null?r:!0)},i.getToggleVisibilityHandler=()=>t=>{i.toggleVisibility==null||i.toggleVisibility(t.target.checked)}},createRow:(i,e)=>{i._getAllVisibleCells=Wi(()=>[i.getAllCells(),e.getState().columnVisibility],t=>t.filter(r=>r.column.getIsVisible()),Yi(e.options,"debugRows")),i.getVisibleCells=Wi(()=>[i.getLeftVisibleCells(),i.getCenterVisibleCells(),i.getRightVisibleCells()],(t,r,n)=>[...t,...r,...n],Yi(e.options,"debugRows"))},createTable:i=>{const e=(t,r)=>Wi(()=>[r(),r().filter(n=>n.getIsVisible()).map(n=>n.id).join("_")],n=>n.filter(a=>a.getIsVisible==null?void 0:a.getIsVisible()),Yi(i.options,"debugColumns"));i.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>i.getAllFlatColumns()),i.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>i.getAllLeafColumns()),i.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>i.getLeftLeafColumns()),i.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>i.getRightLeafColumns()),i.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>i.getCenterLeafColumns()),i.setColumnVisibility=t=>i.options.onColumnVisibilityChange==null?void 0:i.options.onColumnVisibilityChange(t),i.resetColumnVisibility=t=>{var r;i.setColumnVisibility(t?{}:(r=i.initialState.columnVisibility)!=null?r:{})},i.toggleAllColumnsVisible=t=>{var r;t=(r=t)!=null?r:!i.getIsAllColumnsVisible(),i.setColumnVisibility(i.getAllLeafColumns().reduce((n,a)=>({...n,[a.id]:t||!(a.getCanHide!=null&&a.getCanHide())}),{}))},i.getIsAllColumnsVisible=()=>!i.getAllLeafColumns().some(t=>!(t.getIsVisible!=null&&t.getIsVisible())),i.getIsSomeColumnsVisible=()=>i.getAllLeafColumns().some(t=>t.getIsVisible==null?void 0:t.getIsVisible()),i.getToggleAllColumnsVisibilityHandler=()=>t=>{var r;i.toggleAllColumnsVisible((r=t.target)==null?void 0:r.checked)}}};function Wm(i,e){return e?e==="center"?i.getCenterVisibleLeafColumns():e==="left"?i.getLeftVisibleLeafColumns():i.getRightVisibleLeafColumns():i.getVisibleLeafColumns()}const Hse={createTable:i=>{i._getGlobalFacetedRowModel=i.options.getFacetedRowModel&&i.options.getFacetedRowModel(i,"__global__"),i.getGlobalFacetedRowModel=()=>i.options.manualFiltering||!i._getGlobalFacetedRowModel?i.getPreFilteredRowModel():i._getGlobalFacetedRowModel(),i._getGlobalFacetedUniqueValues=i.options.getFacetedUniqueValues&&i.options.getFacetedUniqueValues(i,"__global__"),i.getGlobalFacetedUniqueValues=()=>i._getGlobalFacetedUniqueValues?i._getGlobalFacetedUniqueValues():new Map,i._getGlobalFacetedMinMaxValues=i.options.getFacetedMinMaxValues&&i.options.getFacetedMinMaxValues(i,"__global__"),i.getGlobalFacetedMinMaxValues=()=>{if(i._getGlobalFacetedMinMaxValues)return i._getGlobalFacetedMinMaxValues()}}},qse={getInitialState:i=>({globalFilter:void 0,...i}),getDefaultOptions:i=>({onGlobalFilterChange:zo("globalFilter",i),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var t;const r=(t=i.getCoreRowModel().flatRows[0])==null||(t=t._getAllCellsByColumnId()[e.id])==null?void 0:t.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(i,e)=>{i.getCanGlobalFilter=()=>{var t,r,n,a;return((t=i.columnDef.enableGlobalFilter)!=null?t:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((n=e.options.enableFilters)!=null?n:!0)&&((a=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(i))!=null?a:!0)&&!!i.accessorFn}},createTable:i=>{i.getGlobalAutoFilterFn=()=>Mc.includesString,i.getGlobalFilterFn=()=>{var e,t;const{globalFilterFn:r}=i.options;return Ax(r)?r:r==="auto"?i.getGlobalAutoFilterFn():(e=(t=i.options.filterFns)==null?void 0:t[r])!=null?e:Mc[r]},i.setGlobalFilter=e=>{i.options.onGlobalFilterChange==null||i.options.onGlobalFilterChange(e)},i.resetGlobalFilter=e=>{i.setGlobalFilter(e?void 0:i.initialState.globalFilter)}}},Wse={getInitialState:i=>({expanded:{},...i}),getDefaultOptions:i=>({onExpandedChange:zo("expanded",i),paginateExpandedRows:!0}),createTable:i=>{let e=!1,t=!1;i._autoResetExpanded=()=>{var r,n;if(!e){i._queue(()=>{e=!0});return}if((r=(n=i.options.autoResetAll)!=null?n:i.options.autoResetExpanded)!=null?r:!i.options.manualExpanding){if(t)return;t=!0,i._queue(()=>{i.resetExpanded(),t=!1})}},i.setExpanded=r=>i.options.onExpandedChange==null?void 0:i.options.onExpandedChange(r),i.toggleAllRowsExpanded=r=>{r??!i.getIsAllRowsExpanded()?i.setExpanded(!0):i.setExpanded({})},i.resetExpanded=r=>{var n,a;i.setExpanded(r?{}:(n=(a=i.initialState)==null?void 0:a.expanded)!=null?n:{})},i.getCanSomeRowsExpand=()=>i.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),i.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),i.toggleAllRowsExpanded()},i.getIsSomeRowsExpanded=()=>{const r=i.getState().expanded;return r===!0||Object.values(r).some(Boolean)},i.getIsAllRowsExpanded=()=>{const r=i.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||i.getRowModel().flatRows.some(n=>!n.getIsExpanded()))},i.getExpandedDepth=()=>{let r=0;return(i.getState().expanded===!0?Object.keys(i.getRowModel().rowsById):Object.keys(i.getState().expanded)).forEach(a=>{const c=a.split(".");r=Math.max(r,c.length)}),r},i.getPreExpandedRowModel=()=>i.getSortedRowModel(),i.getExpandedRowModel=()=>(!i._getExpandedRowModel&&i.options.getExpandedRowModel&&(i._getExpandedRowModel=i.options.getExpandedRowModel(i)),i.options.manualExpanding||!i._getExpandedRowModel?i.getPreExpandedRowModel():i._getExpandedRowModel())},createRow:(i,e)=>{i.toggleExpanded=t=>{e.setExpanded(r=>{var n;const a=r===!0?!0:!!(r!=null&&r[i.id]);let c={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(s=>{c[s]=!0}):c=r,t=(n=t)!=null?n:!a,!a&&t)return{...c,[i.id]:!0};if(a&&!t){const{[i.id]:s,...h}=c;return h}return r})},i.getIsExpanded=()=>{var t;const r=e.getState().expanded;return!!((t=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(i))!=null?t:r===!0||r!=null&&r[i.id])},i.getCanExpand=()=>{var t,r,n;return(t=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(i))!=null?t:((r=e.options.enableExpanding)!=null?r:!0)&&!!((n=i.subRows)!=null&&n.length)},i.getIsAllParentsExpanded=()=>{let t=!0,r=i;for(;t&&r.parentId;)r=e.getRow(r.parentId,!0),t=r.getIsExpanded();return t},i.getToggleExpandedHandler=()=>{const t=i.getCanExpand();return()=>{t&&i.toggleExpanded()}}}},l_=0,c_=10,U1=()=>({pageIndex:l_,pageSize:c_}),Yse={getInitialState:i=>({...i,pagination:{...U1(),...i==null?void 0:i.pagination}}),getDefaultOptions:i=>({onPaginationChange:zo("pagination",i)}),createTable:i=>{let e=!1,t=!1;i._autoResetPageIndex=()=>{var r,n;if(!e){i._queue(()=>{e=!0});return}if((r=(n=i.options.autoResetAll)!=null?n:i.options.autoResetPageIndex)!=null?r:!i.options.manualPagination){if(t)return;t=!0,i._queue(()=>{i.resetPageIndex(),t=!1})}},i.setPagination=r=>{const n=a=>Au(r,a);return i.options.onPaginationChange==null?void 0:i.options.onPaginationChange(n)},i.resetPagination=r=>{var n;i.setPagination(r?U1():(n=i.initialState.pagination)!=null?n:U1())},i.setPageIndex=r=>{i.setPagination(n=>{let a=Au(r,n.pageIndex);const c=typeof i.options.pageCount>"u"||i.options.pageCount===-1?Number.MAX_SAFE_INTEGER:i.options.pageCount-1;return a=Math.max(0,Math.min(a,c)),{...n,pageIndex:a}})},i.resetPageIndex=r=>{var n,a;i.setPageIndex(r?l_:(n=(a=i.initialState)==null||(a=a.pagination)==null?void 0:a.pageIndex)!=null?n:l_)},i.resetPageSize=r=>{var n,a;i.setPageSize(r?c_:(n=(a=i.initialState)==null||(a=a.pagination)==null?void 0:a.pageSize)!=null?n:c_)},i.setPageSize=r=>{i.setPagination(n=>{const a=Math.max(1,Au(r,n.pageSize)),c=n.pageSize*n.pageIndex,s=Math.floor(c/a);return{...n,pageIndex:s,pageSize:a}})},i.setPageCount=r=>i.setPagination(n=>{var a;let c=Au(r,(a=i.options.pageCount)!=null?a:-1);return typeof c=="number"&&(c=Math.max(-1,c)),{...n,pageCount:c}}),i.getPageOptions=Wi(()=>[i.getPageCount()],r=>{let n=[];return r&&r>0&&(n=[...new Array(r)].fill(null).map((a,c)=>c)),n},Yi(i.options,"debugTable")),i.getCanPreviousPage=()=>i.getState().pagination.pageIndex>0,i.getCanNextPage=()=>{const{pageIndex:r}=i.getState().pagination,n=i.getPageCount();return n===-1?!0:n===0?!1:r<n-1},i.previousPage=()=>i.setPageIndex(r=>r-1),i.nextPage=()=>i.setPageIndex(r=>r+1),i.firstPage=()=>i.setPageIndex(0),i.lastPage=()=>i.setPageIndex(i.getPageCount()-1),i.getPrePaginationRowModel=()=>i.getExpandedRowModel(),i.getPaginationRowModel=()=>(!i._getPaginationRowModel&&i.options.getPaginationRowModel&&(i._getPaginationRowModel=i.options.getPaginationRowModel(i)),i.options.manualPagination||!i._getPaginationRowModel?i.getPrePaginationRowModel():i._getPaginationRowModel()),i.getPageCount=()=>{var r;return(r=i.options.pageCount)!=null?r:Math.ceil(i.getRowCount()/i.getState().pagination.pageSize)},i.getRowCount=()=>{var r;return(r=i.options.rowCount)!=null?r:i.getPrePaginationRowModel().rows.length}}},V1=()=>({top:[],bottom:[]}),Zse={getInitialState:i=>({rowPinning:V1(),...i}),getDefaultOptions:i=>({onRowPinningChange:zo("rowPinning",i)}),createRow:(i,e)=>{i.pin=(t,r,n)=>{const a=r?i.getLeafRows().map(h=>{let{id:p}=h;return p}):[],c=n?i.getParentRows().map(h=>{let{id:p}=h;return p}):[],s=new Set([...c,i.id,...a]);e.setRowPinning(h=>{var p,m;if(t==="bottom"){var y,g;return{top:((y=h==null?void 0:h.top)!=null?y:[]).filter(_=>!(s!=null&&s.has(_))),bottom:[...((g=h==null?void 0:h.bottom)!=null?g:[]).filter(_=>!(s!=null&&s.has(_))),...Array.from(s)]}}if(t==="top"){var x,v;return{top:[...((x=h==null?void 0:h.top)!=null?x:[]).filter(_=>!(s!=null&&s.has(_))),...Array.from(s)],bottom:((v=h==null?void 0:h.bottom)!=null?v:[]).filter(_=>!(s!=null&&s.has(_)))}}return{top:((p=h==null?void 0:h.top)!=null?p:[]).filter(_=>!(s!=null&&s.has(_))),bottom:((m=h==null?void 0:h.bottom)!=null?m:[]).filter(_=>!(s!=null&&s.has(_)))}})},i.getCanPin=()=>{var t;const{enableRowPinning:r,enablePinning:n}=e.options;return typeof r=="function"?r(i):(t=r??n)!=null?t:!0},i.getIsPinned=()=>{const t=[i.id],{top:r,bottom:n}=e.getState().rowPinning,a=t.some(s=>r==null?void 0:r.includes(s)),c=t.some(s=>n==null?void 0:n.includes(s));return a?"top":c?"bottom":!1},i.getPinnedIndex=()=>{var t,r;const n=i.getIsPinned();if(!n)return-1;const a=(t=n==="top"?e.getTopRows():e.getBottomRows())==null?void 0:t.map(c=>{let{id:s}=c;return s});return(r=a==null?void 0:a.indexOf(i.id))!=null?r:-1}},createTable:i=>{i.setRowPinning=e=>i.options.onRowPinningChange==null?void 0:i.options.onRowPinningChange(e),i.resetRowPinning=e=>{var t,r;return i.setRowPinning(e?V1():(t=(r=i.initialState)==null?void 0:r.rowPinning)!=null?t:V1())},i.getIsSomeRowsPinned=e=>{var t;const r=i.getState().rowPinning;if(!e){var n,a;return!!((n=r.top)!=null&&n.length||(a=r.bottom)!=null&&a.length)}return!!((t=r[e])!=null&&t.length)},i._getPinnedRows=(e,t,r)=>{var n;return((n=i.options.keepPinnedRows)==null||n?(t??[]).map(c=>{const s=i.getRow(c,!0);return s.getIsAllParentsExpanded()?s:null}):(t??[]).map(c=>e.find(s=>s.id===c))).filter(Boolean).map(c=>({...c,position:r}))},i.getTopRows=Wi(()=>[i.getRowModel().rows,i.getState().rowPinning.top],(e,t)=>i._getPinnedRows(e,t,"top"),Yi(i.options,"debugRows")),i.getBottomRows=Wi(()=>[i.getRowModel().rows,i.getState().rowPinning.bottom],(e,t)=>i._getPinnedRows(e,t,"bottom"),Yi(i.options,"debugRows")),i.getCenterRows=Wi(()=>[i.getRowModel().rows,i.getState().rowPinning.top,i.getState().rowPinning.bottom],(e,t,r)=>{const n=new Set([...t??[],...r??[]]);return e.filter(a=>!n.has(a.id))},Yi(i.options,"debugRows"))}},Xse={getInitialState:i=>({rowSelection:{},...i}),getDefaultOptions:i=>({onRowSelectionChange:zo("rowSelection",i),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:i=>{i.setRowSelection=e=>i.options.onRowSelectionChange==null?void 0:i.options.onRowSelectionChange(e),i.resetRowSelection=e=>{var t;return i.setRowSelection(e?{}:(t=i.initialState.rowSelection)!=null?t:{})},i.toggleAllRowsSelected=e=>{i.setRowSelection(t=>{e=typeof e<"u"?e:!i.getIsAllRowsSelected();const r={...t},n=i.getPreGroupedRowModel().flatRows;return e?n.forEach(a=>{a.getCanSelect()&&(r[a.id]=!0)}):n.forEach(a=>{delete r[a.id]}),r})},i.toggleAllPageRowsSelected=e=>i.setRowSelection(t=>{const r=typeof e<"u"?e:!i.getIsAllPageRowsSelected(),n={...t};return i.getRowModel().rows.forEach(a=>{u_(n,a.id,r,!0,i)}),n}),i.getPreSelectedRowModel=()=>i.getCoreRowModel(),i.getSelectedRowModel=Wi(()=>[i.getState().rowSelection,i.getCoreRowModel()],(e,t)=>Object.keys(e).length?G1(i,t):{rows:[],flatRows:[],rowsById:{}},Yi(i.options,"debugTable")),i.getFilteredSelectedRowModel=Wi(()=>[i.getState().rowSelection,i.getFilteredRowModel()],(e,t)=>Object.keys(e).length?G1(i,t):{rows:[],flatRows:[],rowsById:{}},Yi(i.options,"debugTable")),i.getGroupedSelectedRowModel=Wi(()=>[i.getState().rowSelection,i.getSortedRowModel()],(e,t)=>Object.keys(e).length?G1(i,t):{rows:[],flatRows:[],rowsById:{}},Yi(i.options,"debugTable")),i.getIsAllRowsSelected=()=>{const e=i.getFilteredRowModel().flatRows,{rowSelection:t}=i.getState();let r=!!(e.length&&Object.keys(t).length);return r&&e.some(n=>n.getCanSelect()&&!t[n.id])&&(r=!1),r},i.getIsAllPageRowsSelected=()=>{const e=i.getPaginationRowModel().flatRows.filter(n=>n.getCanSelect()),{rowSelection:t}=i.getState();let r=!!e.length;return r&&e.some(n=>!t[n.id])&&(r=!1),r},i.getIsSomeRowsSelected=()=>{var e;const t=Object.keys((e=i.getState().rowSelection)!=null?e:{}).length;return t>0&&t<i.getFilteredRowModel().flatRows.length},i.getIsSomePageRowsSelected=()=>{const e=i.getPaginationRowModel().flatRows;return i.getIsAllPageRowsSelected()?!1:e.filter(t=>t.getCanSelect()).some(t=>t.getIsSelected()||t.getIsSomeSelected())},i.getToggleAllRowsSelectedHandler=()=>e=>{i.toggleAllRowsSelected(e.target.checked)},i.getToggleAllPageRowsSelectedHandler=()=>e=>{i.toggleAllPageRowsSelected(e.target.checked)}},createRow:(i,e)=>{i.toggleSelected=(t,r)=>{const n=i.getIsSelected();e.setRowSelection(a=>{var c;if(t=typeof t<"u"?t:!n,i.getCanSelect()&&n===t)return a;const s={...a};return u_(s,i.id,t,(c=r==null?void 0:r.selectChildren)!=null?c:!0,e),s})},i.getIsSelected=()=>{const{rowSelection:t}=e.getState();return CC(i,t)},i.getIsSomeSelected=()=>{const{rowSelection:t}=e.getState();return d_(i,t)==="some"},i.getIsAllSubRowsSelected=()=>{const{rowSelection:t}=e.getState();return d_(i,t)==="all"},i.getCanSelect=()=>{var t;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(i):(t=e.options.enableRowSelection)!=null?t:!0},i.getCanSelectSubRows=()=>{var t;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(i):(t=e.options.enableSubRowSelection)!=null?t:!0},i.getCanMultiSelect=()=>{var t;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(i):(t=e.options.enableMultiRowSelection)!=null?t:!0},i.getToggleSelectedHandler=()=>{const t=i.getCanSelect();return r=>{var n;t&&i.toggleSelected((n=r.target)==null?void 0:n.checked)}}}},u_=(i,e,t,r,n)=>{var a;const c=n.getRow(e,!0);t?(c.getCanMultiSelect()||Object.keys(i).forEach(s=>delete i[s]),c.getCanSelect()&&(i[e]=!0)):delete i[e],r&&(a=c.subRows)!=null&&a.length&&c.getCanSelectSubRows()&&c.subRows.forEach(s=>u_(i,s.id,t,r,n))};function G1(i,e){const t=i.getState().rowSelection,r=[],n={},a=function(c,s){return c.map(h=>{var p;const m=CC(h,t);if(m&&(r.push(h),n[h.id]=h),(p=h.subRows)!=null&&p.length&&(h={...h,subRows:a(h.subRows)}),m)return h}).filter(Boolean)};return{rows:a(e.rows),flatRows:r,rowsById:n}}function CC(i,e){var t;return(t=e[i.id])!=null?t:!1}function d_(i,e,t){var r;if(!((r=i.subRows)!=null&&r.length))return!1;let n=!0,a=!1;return i.subRows.forEach(c=>{if(!(a&&!n)&&(c.getCanSelect()&&(CC(c,e)?a=!0:n=!1),c.subRows&&c.subRows.length)){const s=d_(c,e);s==="all"?a=!0:(s==="some"&&(a=!0),n=!1)}}),n?"all":a?"some":!1}const h_=/([0-9]+)/gm,Kse=(i,e,t)=>XD(Gu(i.getValue(t)).toLowerCase(),Gu(e.getValue(t)).toLowerCase()),Qse=(i,e,t)=>XD(Gu(i.getValue(t)),Gu(e.getValue(t))),Jse=(i,e,t)=>TC(Gu(i.getValue(t)).toLowerCase(),Gu(e.getValue(t)).toLowerCase()),eae=(i,e,t)=>TC(Gu(i.getValue(t)),Gu(e.getValue(t))),tae=(i,e,t)=>{const r=i.getValue(t),n=e.getValue(t);return r>n?1:r<n?-1:0},iae=(i,e,t)=>TC(i.getValue(t),e.getValue(t));function TC(i,e){return i===e?0:i>e?1:-1}function Gu(i){return typeof i=="number"?isNaN(i)||i===1/0||i===-1/0?"":String(i):typeof i=="string"?i:""}function XD(i,e){const t=i.split(h_).filter(Boolean),r=e.split(h_).filter(Boolean);for(;t.length&&r.length;){const n=t.shift(),a=r.shift(),c=parseInt(n,10),s=parseInt(a,10),h=[c,s].sort();if(isNaN(h[0])){if(n>a)return 1;if(a>n)return-1;continue}if(isNaN(h[1]))return isNaN(c)?-1:1;if(c>s)return 1;if(s>c)return-1}return t.length-r.length}const bm={alphanumeric:Kse,alphanumericCaseSensitive:Qse,text:Jse,textCaseSensitive:eae,datetime:tae,basic:iae},rae={getInitialState:i=>({sorting:[],...i}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:i=>({onSortingChange:zo("sorting",i),isMultiSortEvent:e=>e.shiftKey}),createColumn:(i,e)=>{i.getAutoSortingFn=()=>{const t=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const n of t){const a=n==null?void 0:n.getValue(i.id);if(Object.prototype.toString.call(a)==="[object Date]")return bm.datetime;if(typeof a=="string"&&(r=!0,a.split(h_).length>1))return bm.alphanumeric}return r?bm.text:bm.basic},i.getAutoSortDir=()=>{const t=e.getFilteredRowModel().flatRows[0];return typeof(t==null?void 0:t.getValue(i.id))=="string"?"asc":"desc"},i.getSortingFn=()=>{var t,r;if(!i)throw new Error;return Ax(i.columnDef.sortingFn)?i.columnDef.sortingFn:i.columnDef.sortingFn==="auto"?i.getAutoSortingFn():(t=(r=e.options.sortingFns)==null?void 0:r[i.columnDef.sortingFn])!=null?t:bm[i.columnDef.sortingFn]},i.toggleSorting=(t,r)=>{const n=i.getNextSortingOrder(),a=typeof t<"u"&&t!==null;e.setSorting(c=>{const s=c==null?void 0:c.find(x=>x.id===i.id),h=c==null?void 0:c.findIndex(x=>x.id===i.id);let p=[],m,y=a?t:n==="desc";if(c!=null&&c.length&&i.getCanMultiSort()&&r?s?m="toggle":m="add":c!=null&&c.length&&h!==c.length-1?m="replace":s?m="toggle":m="replace",m==="toggle"&&(a||n||(m="remove")),m==="add"){var g;p=[...c,{id:i.id,desc:y}],p.splice(0,p.length-((g=e.options.maxMultiSortColCount)!=null?g:Number.MAX_SAFE_INTEGER))}else m==="toggle"?p=c.map(x=>x.id===i.id?{...x,desc:y}:x):m==="remove"?p=c.filter(x=>x.id!==i.id):p=[{id:i.id,desc:y}];return p})},i.getFirstSortDir=()=>{var t,r;return((t=(r=i.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?t:i.getAutoSortDir()==="desc")?"desc":"asc"},i.getNextSortingOrder=t=>{var r,n;const a=i.getFirstSortDir(),c=i.getIsSorted();return c?c!==a&&((r=e.options.enableSortingRemoval)==null||r)&&(!(t&&(n=e.options.enableMultiRemove)!=null)||n)?!1:c==="desc"?"asc":"desc":a},i.getCanSort=()=>{var t,r;return((t=i.columnDef.enableSorting)!=null?t:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!i.accessorFn},i.getCanMultiSort=()=>{var t,r;return(t=(r=i.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?t:!!i.accessorFn},i.getIsSorted=()=>{var t;const r=(t=e.getState().sorting)==null?void 0:t.find(n=>n.id===i.id);return r?r.desc?"desc":"asc":!1},i.getSortIndex=()=>{var t,r;return(t=(r=e.getState().sorting)==null?void 0:r.findIndex(n=>n.id===i.id))!=null?t:-1},i.clearSorting=()=>{e.setSorting(t=>t!=null&&t.length?t.filter(r=>r.id!==i.id):[])},i.getToggleSortingHandler=()=>{const t=i.getCanSort();return r=>{t&&(r.persist==null||r.persist(),i.toggleSorting==null||i.toggleSorting(void 0,i.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:i=>{i.setSorting=e=>i.options.onSortingChange==null?void 0:i.options.onSortingChange(e),i.resetSorting=e=>{var t,r;i.setSorting(e?[]:(t=(r=i.initialState)==null?void 0:r.sorting)!=null?t:[])},i.getPreSortedRowModel=()=>i.getGroupedRowModel(),i.getSortedRowModel=()=>(!i._getSortedRowModel&&i.options.getSortedRowModel&&(i._getSortedRowModel=i.options.getSortedRowModel(i)),i.options.manualSorting||!i._getSortedRowModel?i.getPreSortedRowModel():i._getSortedRowModel())}},nae=[Sse,Gse,Fse,Bse,Ese,kse,Hse,qse,rae,Ose,Wse,Yse,Zse,Xse,Use];function sae(i){var e,t;const r=[...nae,...(e=i._features)!=null?e:[]];let n={_features:r};const a=n._features.reduce((g,x)=>Object.assign(g,x.getDefaultOptions==null?void 0:x.getDefaultOptions(n)),{}),c=g=>n.options.mergeOptions?n.options.mergeOptions(a,g):{...a,...g};let h={...{},...(t=i.initialState)!=null?t:{}};n._features.forEach(g=>{var x;h=(x=g.getInitialState==null?void 0:g.getInitialState(h))!=null?x:h});const p=[];let m=!1;const y={_features:r,options:{...a,...i},initialState:h,_queue:g=>{p.push(g),m||(m=!0,Promise.resolve().then(()=>{for(;p.length;)p.shift()();m=!1}).catch(x=>setTimeout(()=>{throw x})))},reset:()=>{n.setState(n.initialState)},setOptions:g=>{const x=Au(g,n.options);n.options=c(x)},getState:()=>n.options.state,setState:g=>{n.options.onStateChange==null||n.options.onStateChange(g)},_getRowId:(g,x,v)=>{var _;return(_=n.options.getRowId==null?void 0:n.options.getRowId(g,x,v))!=null?_:`${v?[v.id,x].join("."):x}`},getCoreRowModel:()=>(n._getCoreRowModel||(n._getCoreRowModel=n.options.getCoreRowModel(n)),n._getCoreRowModel()),getRowModel:()=>n.getPaginationRowModel(),getRow:(g,x)=>{let v=(x?n.getPrePaginationRowModel():n.getRowModel()).rowsById[g];if(!v&&(v=n.getCoreRowModel().rowsById[g],!v))throw new Error;return v},_getDefaultColumnDef:Wi(()=>[n.options.defaultColumn],g=>{var x;return g=(x=g)!=null?x:{},{header:v=>{const _=v.header.column.columnDef;return _.accessorKey?_.accessorKey:_.accessorFn?_.id:null},cell:v=>{var _,C;return(_=(C=v.renderValue())==null||C.toString==null?void 0:C.toString())!=null?_:null},...n._features.reduce((v,_)=>Object.assign(v,_.getDefaultColumnDef==null?void 0:_.getDefaultColumnDef()),{}),...g}},Yi(i,"debugColumns")),_getColumnDefs:()=>n.options.columns,getAllColumns:Wi(()=>[n._getColumnDefs()],g=>{const x=function(v,_,C){return C===void 0&&(C=0),v.map(k=>{const w=Tse(n,k,C,_),E=k;return w.columns=E.columns?x(E.columns,w,C+1):[],w})};return x(g)},Yi(i,"debugColumns")),getAllFlatColumns:Wi(()=>[n.getAllColumns()],g=>g.flatMap(x=>x.getFlatColumns()),Yi(i,"debugColumns")),_getAllFlatColumnsById:Wi(()=>[n.getAllFlatColumns()],g=>g.reduce((x,v)=>(x[v.id]=v,x),{}),Yi(i,"debugColumns")),getAllLeafColumns:Wi(()=>[n.getAllColumns(),n._getOrderColumnsFn()],(g,x)=>{let v=g.flatMap(_=>_.getLeafColumns());return x(v)},Yi(i,"debugColumns")),getColumn:g=>n._getAllFlatColumnsById()[g]};Object.assign(n,y);for(let g=0;g<n._features.length;g++){const x=n._features[g];x==null||x.createTable==null||x.createTable(n)}return n}function SC(){return i=>Wi(()=>[i.options.data],e=>{const t={rows:[],flatRows:[],rowsById:{}},r=function(n,a,c){a===void 0&&(a=0);const s=[];for(let p=0;p<n.length;p++){const m=wC(i,i._getRowId(n[p],p,c),n[p],p,a,void 0,c==null?void 0:c.id);if(t.flatRows.push(m),t.rowsById[m.id]=m,s.push(m),i.options.getSubRows){var h;m.originalSubRows=i.options.getSubRows(n[p],p),(h=m.originalSubRows)!=null&&h.length&&(m.subRows=r(m.originalSubRows,a+1,m))}}return s};return t.rows=r(e),t},Yi(i.options,"debugTable","getRowModel",()=>i._autoResetPageIndex()))}function aae(i){const e=[],t=r=>{var n;e.push(r),(n=r.subRows)!=null&&n.length&&r.getIsExpanded()&&r.subRows.forEach(t)};return i.rows.forEach(t),{rows:e,flatRows:i.flatRows,rowsById:i.rowsById}}function oae(i,e,t){return t.options.filterFromLeafRows?lae(i,e,t):cae(i,e,t)}function lae(i,e,t){var r;const n=[],a={},c=(r=t.options.maxLeafRowFilterDepth)!=null?r:100,s=function(h,p){p===void 0&&(p=0);const m=[];for(let g=0;g<h.length;g++){var y;let x=h[g];const v=wC(t,x.id,x.original,x.index,x.depth,void 0,x.parentId);if(v.columnFilters=x.columnFilters,(y=x.subRows)!=null&&y.length&&p<c){if(v.subRows=s(x.subRows,p+1),x=v,e(x)&&!v.subRows.length){m.push(x),a[x.id]=x,n.push(x);continue}if(e(x)||v.subRows.length){m.push(x),a[x.id]=x,n.push(x);continue}}else x=v,e(x)&&(m.push(x),a[x.id]=x,n.push(x))}return m};return{rows:s(i),flatRows:n,rowsById:a}}function cae(i,e,t){var r;const n=[],a={},c=(r=t.options.maxLeafRowFilterDepth)!=null?r:100,s=function(h,p){p===void 0&&(p=0);const m=[];for(let g=0;g<h.length;g++){let x=h[g];if(e(x)){var y;if((y=x.subRows)!=null&&y.length&&p<c){const _=wC(t,x.id,x.original,x.index,x.depth,void 0,x.parentId);_.subRows=s(x.subRows,p+1),x=_}m.push(x),n.push(x),a[x.id]=x}}return m};return{rows:s(i),flatRows:n,rowsById:a}}function EC(){return i=>Wi(()=>[i.getPreFilteredRowModel(),i.getState().columnFilters,i.getState().globalFilter],(e,t,r)=>{if(!e.rows.length||!(t!=null&&t.length)&&!r){for(let g=0;g<e.flatRows.length;g++)e.flatRows[g].columnFilters={},e.flatRows[g].columnFiltersMeta={};return e}const n=[],a=[];(t??[]).forEach(g=>{var x;const v=i.getColumn(g.id);if(!v)return;const _=v.getFilterFn();_&&n.push({id:g.id,filterFn:_,resolvedValue:(x=_.resolveFilterValue==null?void 0:_.resolveFilterValue(g.value))!=null?x:g.value})});const c=(t??[]).map(g=>g.id),s=i.getGlobalFilterFn(),h=i.getAllLeafColumns().filter(g=>g.getCanGlobalFilter());r&&s&&h.length&&(c.push("__global__"),h.forEach(g=>{var x;a.push({id:g.id,filterFn:s,resolvedValue:(x=s.resolveFilterValue==null?void 0:s.resolveFilterValue(r))!=null?x:r})}));let p,m;for(let g=0;g<e.flatRows.length;g++){const x=e.flatRows[g];if(x.columnFilters={},n.length)for(let v=0;v<n.length;v++){p=n[v];const _=p.id;x.columnFilters[_]=p.filterFn(x,_,p.resolvedValue,C=>{x.columnFiltersMeta[_]=C})}if(a.length){for(let v=0;v<a.length;v++){m=a[v];const _=m.id;if(m.filterFn(x,_,m.resolvedValue,C=>{x.columnFiltersMeta[_]=C})){x.columnFilters.__global__=!0;break}}x.columnFilters.__global__!==!0&&(x.columnFilters.__global__=!1)}}const y=g=>{for(let x=0;x<c.length;x++)if(g.columnFilters[c[x]]===!1)return!1;return!0};return oae(e.rows,y,i)},Yi(i.options,"debugTable","getFilteredRowModel",()=>i._autoResetPageIndex()))}function KD(i){return e=>Wi(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(t,r)=>{if(!r.rows.length)return r;const{pageSize:n,pageIndex:a}=t;let{rows:c,flatRows:s,rowsById:h}=r;const p=n*a,m=p+n;c=c.slice(p,m);let y;e.options.paginateExpandedRows?y={rows:c,flatRows:s,rowsById:h}:y=aae({rows:c,flatRows:s,rowsById:h}),y.flatRows=[];const g=x=>{y.flatRows.push(x),x.subRows.length&&x.subRows.forEach(g)};return y.rows.forEach(g),y},Yi(e.options,"debugTable"))}function kC(){return i=>Wi(()=>[i.getState().sorting,i.getPreSortedRowModel()],(e,t)=>{if(!t.rows.length||!(e!=null&&e.length))return t;const r=i.getState().sorting,n=[],a=r.filter(h=>{var p;return(p=i.getColumn(h.id))==null?void 0:p.getCanSort()}),c={};a.forEach(h=>{const p=i.getColumn(h.id);p&&(c[h.id]={sortUndefined:p.columnDef.sortUndefined,invertSorting:p.columnDef.invertSorting,sortingFn:p.getSortingFn()})});const s=h=>{const p=h.map(m=>({...m}));return p.sort((m,y)=>{for(let x=0;x<a.length;x+=1){var g;const v=a[x],_=c[v.id],C=_.sortUndefined,k=(g=v==null?void 0:v.desc)!=null?g:!1;let w=0;if(C){const E=m.getValue(v.id),A=y.getValue(v.id),M=E===void 0,S=A===void 0;if(M||S){if(C==="first")return M?-1:1;if(C==="last")return M?1:-1;w=M&&S?0:M?C:-C}}if(w===0&&(w=_.sortingFn(m,y,v.id)),w!==0)return k&&(w*=-1),_.invertSorting&&(w*=-1),w}return m.index-y.index}),p.forEach(m=>{var y;n.push(m),(y=m.subRows)!=null&&y.length&&(m.subRows=s(m.subRows))}),p};return{rows:s(t.rows),flatRows:n,rowsById:t.rowsById}},Yi(i.options,"debugTable","getSortedRowModel",()=>i._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Rv(i,e){return i?uae(i)?Ie.createElement(i,e):i:null}function uae(i){return dae(i)||typeof i=="function"||hae(i)}function dae(i){return typeof i=="function"&&(()=>{const e=Object.getPrototypeOf(i);return e.prototype&&e.prototype.isReactComponent})()}function hae(i){return typeof i=="object"&&typeof i.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(i.$$typeof.description)}function MC(i){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...i},[t]=Ie.useState(()=>({current:sae(e)})),[r,n]=Ie.useState(()=>t.current.initialState);return t.current.setOptions(a=>({...a,...i,state:{...r,...i.state},onStateChange:c=>{n(c),i.onStateChange==null||i.onStateChange(c)}})),t.current}const pae="_buttonContainer_1hxkr_1",fae="_leftSection_1hxkr_6",mae="_rightSection_1hxkr_13",gae="_headerWithTooltip_1hxkr_44",yae="_iconContainer_1hxkr_50",Ym={buttonContainer:pae,leftSection:fae,rightSection:mae,headerWithTooltip:gae,iconContainer:yae},vae="_mutedText_tjqo0_1",xae={mutedText:vae},bae=({onSuccess:i,onError:e}={})=>{const t=$s(),{show:r}=ba(ve.t("Error renaming evaluation"),{critical:!0}),{mutate:n,isLoading:a,error:c}=rc(({id:s,name:h})=>ea.updateBacktestCrudBacktestsBacktestIdPatch(s,{name:h}),{onSuccess:(s,h)=>{t.setQueryData(["backtests"],p=>p==null?void 0:p.map(m=>m.id===h.id?{...m,name:h.name}:m)),i==null||i()},onError:s=>{r(),console.log("There was an error renaming the evaluation",s),e==null||e()}});return{renameEvaluation:n,isSubmitting:a,error:c}},wae=Bc({name:Ms().min(1,{message:ve.t("Name is required")})}),_ae=({id:i,onClose:e,initialName:t=""})=>{const{renameEvaluation:r,isSubmitting:n}=bae({onSuccess:()=>{e()}}),{control:a,handleSubmit:c,formState:{errors:s}}=Ex({resolver:kx(wae),defaultValues:{name:t}}),h=p=>{r({id:i,name:p.name})};return z.jsx(va,{onClose:e,dataTest:"edit-backtest-modal",children:z.jsxs("form",{onSubmit:c(h),children:[z.jsx(Oo,{children:ve.t("Rename evaluation")}),z.jsxs(go,{children:[z.jsx(Da,{htmlFor:"backtest-name",children:ve.t("Name")}),z.jsx(el,{name:"name",control:a,render:({field:p})=>z.jsx(nh,{...p,type:"text",error:!!s.name,onChange:m=>p.onChange(m.value),dataTest:"backtest-name-input"})}),s.name&&z.jsx("p",{className:xae.mutedText,children:s.name.message})]}),z.jsx(jo,{children:z.jsxs(to,{children:[z.jsx(Ti,{onClick:e,secondary:!0,disabled:n,dataTest:"cancel-edit-backtest-button",children:ve.t("Cancel")}),z.jsx(Ti,{type:"submit",primary:!0,loading:n,disabled:n,dataTest:"submit-edit-backtest-button",children:ve.t("Save")})]})})]})})},Cae=({onSuccess:i,onError:e}={})=>{const t=$s(),{show:r}=ba(ve.t("Evaluation deleted"),{success:!0}),{show:n}=ba(ve.t("Failed to delete evaluation"),{success:!1}),{mutate:a,isLoading:c,isError:s,error:h}=rc({mutationFn:p=>ea.deleteBacktestCrudBacktestsBacktestIdDelete(p),onSuccess:p=>{t.invalidateQueries({queryKey:["backtests"]}),r(),i==null||i({id:p})},onError:p=>{console.error(p),n(),e==null||e()}});return{deleteBacktest:a,isLoading:c,isError:s,error:h}},Tae=({id:i,onClose:e})=>{const{deleteBacktest:t,isLoading:r}=Cae({onSuccess:()=>{e()}});return z.jsxs(va,{onClose:e,dataTest:"delete-backtest-modal",children:[z.jsx(Oo,{children:ve.t("Delete evaluation")}),z.jsx(go,{children:z.jsx("p",{children:ve.t("Are you sure you want to delete this evaluation? This action cannot be undone.")})}),z.jsx(jo,{children:z.jsxs(to,{children:[z.jsx(Ti,{onClick:e,secondary:!0,disabled:r,dataTest:"cancel-delete-backtest-button",children:ve.t("Cancel")}),z.jsx(Ti,{primary:!0,onClick:()=>t(i),destructive:!0,loading:r,disabled:r,dataTest:"submit-delete-backtest-button",children:ve.t("Delete")})]})})]})},Sae=({id:i,name:e})=>{const t=vo(),[r,n]=Ie.useState(!1),[a,c]=Ie.useState(!1),[s,h]=Ie.useState(!1),p=()=>{t(`/evaluate/compare?baseEvaluation=${i}`)};return z.jsxs(z.Fragment,{children:[z.jsx(cD,{small:!0,open:r,icon:z.jsx(Tg,{}),onClick:()=>{n(m=>!m)},component:z.jsxs(x_,{dense:!0,children:[z.jsx(tn,{label:ve.t("View"),dataTest:"backtest-overflow-view",icon:z.jsx(M_,{}),onClick:()=>{p(),n(!1)}}),z.jsx(tn,{label:ve.t("Rename"),dataTest:"backtest-overflow-rename",icon:z.jsx(T_,{}),onClick:()=>{h(!0),n(!1)}}),z.jsx(tn,{label:ve.t("Delete"),dataTest:"backtest-overflow-delete",destructive:!0,icon:z.jsx(Cg,{}),onClick:()=>{c(!0),n(!1)}})]})}),s&&z.jsx(_ae,{id:i,initialName:e??"",onClose:()=>h(!1)}),a&&z.jsx(Tae,{id:i,onClose:()=>c(!1)})]})},Eae="_inputContainer_1xqyj_1",kae="_singleSelectContainer_1xqyj_10",Mae="_singleSelectMenuItem_1xqyj_19",H1={inputContainer:Eae,singleSelectContainer:kae,singleSelectMenuItem:Mae},Aae=({table:i,models:e})=>{var t,r;return z.jsxs(z.Fragment,{children:[z.jsx("div",{className:H1.inputContainer,children:z.jsx(nh,{dense:!0,placeholder:ve.t("Search"),value:((t=i.getColumn("name"))==null?void 0:t.getFilterValue())??"",onChange:n=>{var a;return(a=i.getColumn("name"))==null?void 0:a.setFilterValue(n.value)}})}),z.jsx("div",{className:H1.singleSelectContainer,children:z.jsx(il,{filterable:!0,noMatchText:ve.t("No models found"),dense:!0,clearable:!0,clearText:ve.t("Clear"),selected:(r=i.getColumn("modelId"))==null?void 0:r.getFilterValue(),placeholder:ve.t("Model"),onChange:n=>{var a;return(a=i.getColumn("modelId"))==null?void 0:a.setFilterValue(n.selected)},children:e.map(n=>z.jsx(tn,{className:H1.singleSelectMenuItem,label:n.displayName??n.name,value:n.name.toString()},n.id))})})]})},Iae="_batchActionsContainer_1q9sy_1",Pae="_leftSection_1q9sy_10",Dae="_rightSection_1q9sy_16",q1={batchActionsContainer:Iae,leftSection:Pae,rightSection:Dae},Rae=({onSuccess:i,onError:e}={})=>{const t=$s(),{show:r}=ba(ve.t("Evaluations deleted"),{success:!0}),{show:n}=ba(ve.t("Failed to delete evaluations"),{critical:!0}),{mutate:a,isLoading:c}=rc({mutationFn:s=>ea.deleteBacktestBatchCrudBacktestsDelete(s.join(",")),onSuccess:()=>{t.invalidateQueries({queryKey:["backtests"]}),r(),i==null||i()},onError:s=>{n(),console.error("Failed to delete evaluations",s),e==null||e(s)}});return{deleteBacktests:a,isSubmitting:c}},Lae=({table:i})=>{const{deleteBacktests:e,isSubmitting:t}=Rae({onSuccess:()=>{i.resetRowSelection()}}),r=()=>{const n=i.getSelectedRowModel().rows.map(a=>a.original.id);e(n)};return z.jsxs("div",{className:q1.batchActionsContainer,children:[z.jsx("div",{className:q1.leftSection,children:ve.t("{{count}} evaluations selected",{count:i.getSelectedRowModel().rows.length,defaultValue:"{{count}} evaluation selected",defaultValue_plural:"{{count}} evaluations selected"})}),z.jsxs("div",{className:q1.rightSection,children:[z.jsx(Ti,{icon:z.jsx(Cg,{}),small:!0,onClick:r,loading:t,children:ve.t("Delete")}),z.jsx(Ti,{small:!0,onClick:()=>i.resetRowSelection(),disabled:t,children:ve.t("Cancel")})]})]})},Gr={SUCCESS:"SUCCESS",PENDING:"PENDING",STARTED:"STARTED",FAILED:"FAILURE",REVOKED:"REVOKED"},Vl={BACKTEST:"create_backtest",CREATE_BACKTEST_WITH_DATA:"create_backtest_from_data",MAKE_PREDICTION:"create_prediction",CREATE_DATASET:"create_dataset"},QD=()=>{const i=$s(),{data:e,error:t,isLoading:r}=tl({queryKey:["jobs"],queryFn:()=>Bu.listJobsJobsGet(),staleTime:5*60*1e3,cacheTime:5*60*1e3,retry:0}),n=Ie.useMemo(()=>new Set((e==null?void 0:e.filter(c=>c.status===Gr.PENDING||c.status===Gr.STARTED).map(c=>c.id))??[]),[e]),{data:a}=tl({queryKey:["jobs","active"],queryFn:()=>Bu.listJobsJobsGet(Array.from(n)),refetchInterval:()=>n.size>0?5e3:!1,enabled:n.size>0});return Ie.useEffect(()=>{if(!(a!=null&&a.length))return;let c=!1;i.setQueryData(["jobs"],s=>s==null?void 0:s.map(h=>{if(n.has(h.id)){const p=a.find(m=>m.id===h.id);if(p&&p.status!==h.status)return c=!0,p}return c&&(i.invalidateQueries({queryKey:["backtests"]}),i.invalidateQueries({queryKey:["predictions"]})),h}))},[a]),{jobs:e,error:t,isLoading:r}},Nae=()=>{const{jobs:i}=QD();return((i==null?void 0:i.filter(t=>t.type===Vl.CREATE_BACKTEST_WITH_DATA&&(t.status===Gr.PENDING||t.status===Gr.STARTED)))||[]).length===0?null:z.jsx(Gl,{content:ve.t("There are running jobs in the background"),children:z.jsx(uD,{variant:"info",active:!0,label:ve.t("Running jobs")})})},Pd=bC(),zae=[Pd.display({id:"select",header:({table:i})=>z.jsx(pl,{checked:i.getIsAllPageRowsSelected(),onChange:()=>i.toggleAllPageRowsSelected(),disabled:i.getRowModel().rows.length===0}),cell:({row:i})=>z.jsx(pl,{checked:i.getIsSelected(),onChange:()=>i.toggleSelected()})}),Pd.accessor("id",{header:ve.t("ID"),filterFn:"equals"}),Pd.accessor("name",{header:ve.t("Name"),filterFn:"includesString",cell:i=>z.jsx(j2,{to:`/evaluate/compare?baseEvaluation=${i.row.original.id}`,children:i.getValue()})}),Pd.accessor("created",{header:ve.t("Created"),cell:i=>i.getValue()?new Date(i.getValue()).toLocaleString():void 0}),Pd.accessor("modelId",{header:ve.t("Model"),filterFn:"equals",cell:i=>{var n;const e=i.getValue(),t=(n=i.table.options.meta)==null?void 0:n.models,r=t==null?void 0:t.find(a=>a.name===e);return(r==null?void 0:r.displayName)||e}}),Pd.accessor("aggregateMetrics.crps_norm_mean",{header:()=>z.jsxs("div",{className:Ym.headerWithTooltip,children:[z.jsx("span",{children:ve.t("CRPS (Norm)")}),z.jsx(Gl,{content:ve.t("Normalized CRPS (Continuous Ranked Probability Score) shows how close a model's predicted range of outcomes is to the actual result on a 0 - 1 scale. Lower values indicate better probabilistic accuracy"),children:z.jsx("div",{className:Ym.iconContainer,children:z.jsx(E_,{})})})]}),cell:i=>{const e=i.getValue();return e?e.toFixed(2):void 0}}),Pd.display({id:"actions",header:ve.t("Actions"),cell:i=>z.jsx(Sae,{id:i.row.original.id,name:i.row.original.name})})],Oae=i=>i.getIsSorted()||"default",jae=({backtests:i,models:e})=>{const t=vo(),r=MC({data:i||[],columns:zae,initialState:{sorting:[{id:"created",desc:!0}]},meta:{models:e},getRowId:a=>a.id.toString(),enableRowSelection:!0,getSortedRowModel:kC(),getCoreRowModel:SC(),getFilteredRowModel:EC(),getPaginationRowModel:KD()}),n=r.getRowModel().rows.length>0;return z.jsxs("div",{children:[r.getIsSomeRowsSelected()||r.getIsAllRowsSelected()?z.jsx(Lae,{table:r}):z.jsxs("div",{className:Ym.buttonContainer,children:[z.jsx("div",{className:Ym.leftSection,children:z.jsx(Aae,{table:r,models:e})}),z.jsxs("div",{className:Ym.rightSection,children:[z.jsx(Nae,{}),z.jsx(Ti,{primary:!0,icon:z.jsx(jv,{}),small:!0,onClick:()=>{t("/evaluate/new")},children:ve.t("New evaluation")})]})]}),z.jsxs(hx,{children:[z.jsx(ux,{children:r.getHeaderGroups().map(a=>z.jsx(Fl,{children:a.headers.map(c=>z.jsx(px,{fixed:!0,top:!0,...c.column.getCanSort()?{sortDirection:Oae(c.column),sortIconTitle:ve.t("Sort by {{column}}",{column:c.column.id}),onSortIconClick:()=>c.column.toggleSorting()}:{},children:c.isPlaceholder?null:Rv(c.column.columnDef.header,c.getContext())},c.id))},a.id))}),z.jsx(ax,{children:n?r.getRowModel().rows.map(a=>z.jsx(Fl,{selected:a.getIsSelected(),children:a.getVisibleCells().map(c=>z.jsx(Iu,{children:Rv(c.column.columnDef.cell,c.getContext())},c.id))},a.id)):z.jsx(Fl,{children:z.jsx(Iu,{colSpan:String(r.getAllColumns().length),align:"center",children:ve.t("No evaluations available")})})}),z.jsx(cx,{children:z.jsx(Fl,{children:z.jsx(Iu,{colSpan:String(r.getAllColumns().length),children:z.jsx(_2,{page:r.getState().pagination.pageIndex+1,pageSize:r.getState().pagination.pageSize,onPageSizeChange:a=>r.setPageSize(a),pageCount:r.getPageCount(),total:r.getRowCount(),isLastPage:!r.getCanNextPage(),onPageChange:a=>r.setPageIndex(a-1)})})})})]})]})},Fae=()=>{const{backtests:i,error:e,isLoading:t}=$D(),{models:r,error:n,isLoading:a}=Mx();return t||a?z.jsx("div",{className:O1.loadingContainer,children:z.jsx(La,{})}):e||n?z.jsx("div",{className:O1.errorContainer,children:z.jsx(xa,{error:!0,title:ve.t("Error loading evaluations"),children:(e==null?void 0:e.message)||(n==null?void 0:n.message)||ve.t("An unknown error occurred")})}):z.jsxs(z.Fragment,{children:[z.jsx(Uu,{pageTitle:ve.t("Evaluations"),pageDescription:ve.t("Evaluates the accuracy of a predictive model using historical data. Compares actual outcomes with predicted values to assess model performance.")}),z.jsx(hC,{className:O1.container,children:z.jsx(jae,{backtests:i||[],models:r||[]})})]})},Bae="_loadingContainer_1jc2q_1",$ae="_noChapContainer_1jc2q_8",Uae="_noChapIcon_1jc2q_15",Vae="_noChapContent_1jc2q_26",Gae="_noChapTitle_1jc2q_33",Hae="_noChapText_1jc2q_42",qae="_noChapLink_1jc2q_49",Dd={loadingContainer:Bae,noChapContainer:$ae,noChapIcon:Uae,noChapContent:Vae,noChapTitle:Gae,noChapText:Hae,noChapLink:qae},Wae=({children:i})=>{const{route:e}=Xu(),{status:t,error:r,isLoading:n}=xC({route:e}),a=vo();return Ie.useEffect(()=>{r&&console.error("CHAP connection error:",r)},[r]),n?z.jsx("div",{className:Dd.loadingContainer,children:z.jsx(La,{})}):r||!t?z.jsx("div",{className:Dd.noChapContainer,children:z.jsxs("div",{className:Dd.noChapContent,children:[z.jsx("div",{className:Dd.noChapIcon,children:z.jsx(S_,{})}),z.jsx("h1",{className:Dd.noChapTitle,children:ve.t("Could not connect to CHAP")}),z.jsxs("div",{className:Dd.noChapText,children:[z.jsx("p",{children:ve.t("The app is not able to connect to the CHAP server.")}),z.jsx("p",{children:ve.t("Please check your route configuration and make sure the CHAP server is running.")}),z.jsx("a",{href:"https://github.com/dhis2-chap/chap-core/wiki",target:"_blank",rel:"noopener noreferrer",className:Dd.noChapLink,children:ve.t("Learn more about Modeling and CHAP")})]}),z.jsx(Ti,{onClick:()=>a("/settings"),children:ve.t("Configure settings")})]})}):i},Yae="_container_47x3d_1",Zae="_backButton_47x3d_8",Xae="_formWrapper_47x3d_12",Kae="_buttons_47x3d_26",Qae="_errorNotice_47x3d_32",Lm={container:Yae,backButton:Zae,formWrapper:Xae,buttons:Kae,errorNotice:Qae},Jae="_formField_19y2a_1",eoe="_datePickersContainer_19y2a_5",toe="_datePickerField_19y2a_11",ioe="_errorText_19y2a_15",roe="_input_19y2a_21",Sc={formField:Jae,datePickersContainer:eoe,datePickerField:toe,errorText:ioe,input:roe},Jo={DAY:"DAY",WEEK:"WEEK",MONTH:"MONTH"},Z3=i=>{switch(i){case Jo.DAY:return"date";case Jo.WEEK:return"week";case Jo.MONTH:return"month";default:return"text"}},noe=({control:i,errors:e})=>{const t=jc({control:i,name:"periodType"}),r=Vc(),n=a=>{a===Jo.DAY||r.setValue("periodType",a,{shouldValidate:!0}),a!==t&&(r.resetField("fromDate"),r.resetField("toDate"))};return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:Sc.formField,children:[z.jsx(Da,{children:ve.t("Period type")}),z.jsx(el,{name:"periodType",control:i,render:({field:a})=>z.jsxs(hs,{selected:a.value,error:!!e.periodType,onChange:({selected:c})=>n(c),dataTest:"evaluation-period-type-select",children:[z.jsx(As,{disabled:!0,value:Jo.DAY,label:ve.t("Daily")}),z.jsx(As,{value:Jo.WEEK,label:ve.t("Weekly")}),z.jsx(As,{value:Jo.MONTH,label:ve.t("Monthly")})]})}),e.periodType&&z.jsx("p",{className:Sc.errorText,children:e.periodType.message})]}),z.jsxs("div",{className:Sc.datePickersContainer,children:[z.jsxs("div",{className:Sc.datePickerField,children:[z.jsx(Da,{children:ve.t("From period")}),z.jsx(el,{name:"fromDate",control:i,render:({field:a})=>z.jsxs("div",{children:[z.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[z.jsx("input",{className:Sc.input,type:t?Z3(t):"text",disabled:!t,value:a.value,onChange:c=>a.onChange(c.target.value),"data-test":"evaluation-from-date-input",style:{opacity:t?1:.6}}),e.fromDate&&z.jsx(iS,{color:"#d32f2f"})]}),e.fromDate&&z.jsx("p",{className:Sc.errorText,children:e.fromDate.message})]})})]}),z.jsxs("div",{className:Sc.datePickerField,children:[z.jsx(Da,{children:ve.t("To period")}),z.jsx(el,{name:"toDate",control:i,render:({field:a})=>z.jsxs("div",{children:[z.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[z.jsx("input",{className:Sc.input,type:t?Z3(t):"text",disabled:!t,value:a.value,onChange:c=>a.onChange(c.target.value),"data-test":"evaluation-to-date-input",style:{opacity:t?1:.6}}),e.toDate&&z.jsx(iS,{color:"#d32f2f"})]}),e.toDate&&z.jsx("p",{className:Sc.errorText,children:e.toDate.message})]})})]})]})]})},soe="_formField_10bcl_1",aoe="_errorText_10bcl_5",X3={formField:soe,errorText:aoe},ooe=({control:i,errors:e})=>z.jsxs("div",{className:X3.formField,children:[z.jsx(Da,{htmlFor:"evaluation-name",children:ve.t("Evaluation name")}),z.jsx(el,{name:"name",control:i,render:({field:t})=>z.jsx(nh,{...t,type:"text",error:!!e.name,onChange:r=>t.onChange(r.value),dataTest:"evaluation-name-input",placeholder:ve.t("EWARS Evaluation 22-24")})}),e.name&&z.jsx("p",{className:X3.errorText,children:e.name.message})]}),JD=i=>console.log("Error: ",i),loe={resource:"organisationUnitLevels",params:({displayNameProp:i="displayName"}={})=>({fields:`id,level,${i}~rename(displayName),name`,paging:!1})},coe={resource:"organisationUnitGroups",params:({displayNameProp:i="displayName"}={})=>({fields:`id,${i}~rename(displayName),name`,paging:!1})},uoe=async i=>(await i.query({orgUnitLevels:loe},{onError:JD})).orgUnitLevels.organisationUnitLevels,doe=async(i,e)=>(await i.query({orgUnitGroups:coe},{variables:{displayNameProp:e},onError:JD})).orgUnitGroups.organisationUnitGroups,p_=i=>{try{const e="en";return new Intl.ListFormat(e,{style:"long",type:"conjunction"}).format(i)}catch(e){return console.error(e),i.join(", ")}},Lv="LEVEL",Nv="OU_GROUP",f_="USER_ORGUNIT",m_="USER_ORGUNIT_CHILDREN",g_="USER_ORGUNIT_GRANDCHILDREN",e5=i=>i.substr(0,Nv.length)===Nv,t5=i=>i.substr(0,Lv.length)===Lv,hoe=i=>t5(i)?i.substr(Lv.length+1):i,poe=i=>e5(i)?i.substr(Nv.length+1):i,W1=i=>poe(hoe(i)),_s=Object.freeze({addLevelPrefix:i=>`${Lv}-${W1(i)}`,addGroupPrefix:i=>`${Nv}-${W1(i)}`,removePrefix:W1,hasGroupPrefix:e5,hasLevelPrefix:t5}),x0="ou",foe="_container_m2uc3_1",moe="_orgUnitTreeWrapper_m2uc3_7",goe="_userOrgUnitsWrapper_m2uc3_26",yoe="_selectsWrapper_m2uc3_37",voe="_hidden_m2uc3_44",xoe="_summaryWrapper_m2uc3_52",boe="_warningWrapper_m2uc3_58",woe="_warningText_m2uc3_63",_oe="_summaryText_m2uc3_70",Coe="_deselectButton_m2uc3_76",Dl={container:foe,orgUnitTreeWrapper:moe,userOrgUnitsWrapper:goe,selectsWrapper:yoe,hidden:voe,summaryWrapper:xoe,warningWrapper:boe,warningText:woe,summaryText:_oe,deselectButton:Coe},zd=[f_,m_,g_],Toe=({roots:i,selected:e,onSelect:t,hideGroupSelect:r=!1,hideLevelSelect:n=!1,hideUserOrgUnits:a=!1,warning:c,displayNameProp:s="displayName",i18n:h})=>{const[p,m]=Ie.useState([]),[y,g]=Ie.useState([]),x=sh(),v=E=>{const{id:A,checked:M,displayName:S,path:N}=E;let Y=[...e];M&&zd.includes(A)?Y=[...Y,{id:A,displayName:S}]:M?Y.push({id:A,path:N,name:S}):Y=[...Y.filter(Z=>Z.id!==A)],t({dimensionId:x0,items:Y})},_=()=>t({dimensionId:x0,items:[]});Ie.useEffect(()=>{const E=async()=>{const M=await uoe(x);M.sort((S,N)=>S.level>N.level?1:-1),m(M)},A=async()=>{const M=await doe(x,s);g(M)};n||E(),r||A()},[x,n,r,s]);const C=E=>{var S;const A=e.filter(N=>!_s.hasLevelPrefix(N.id)),M=E?[...A,{id:_s.addLevelPrefix(E),name:((S=p.find(N=>N.id===E))==null?void 0:S.displayName)||""}]:A;t({dimensionId:x0,items:M})},k=E=>{const A=E.map(M=>{var S;return{id:_s.addGroupPrefix(M),name:((S=y.find(N=>N.id===M))==null?void 0:S.displayName)||""}});t({dimensionId:x0,items:[...e.filter(M=>!_s.hasGroupPrefix(M.id)),...A]})},w=()=>{let E;if(e.length){const A=e.filter(Z=>!zd.includes(Z.id)&&!_s.hasLevelPrefix(Z.id)&&!_s.hasGroupPrefix(Z.id)).length,M=e.filter(Z=>_s.hasLevelPrefix(Z.id)).length,S=e.filter(Z=>_s.hasGroupPrefix(Z.id)).length,N=e.filter(Z=>zd.includes(Z.id)),Y=[];A&&Y.push(h!=null&&h.t?h.t("{{count}} org units",{count:A,defaultValue:"{{count}} org unit",defaultValue_plural:"{{count}} org units"}):`${A} org unit${A>1?"s":""}`),M&&Y.push(h!=null&&h.t?h.t("{{count}} levels",{count:M,defaultValue:"{{count}} level",defaultValue_plural:"{{count}} levels"}):`${M} level${M>1?"s":""}`),S&&Y.push(h!=null&&h.t?h.t("{{count}} groups",{count:S,defaultValue:"{{count}} group",defaultValue_plural:"{{count}} groups"}):`${S} group${S>1?"s":""}`),N.forEach(Z=>{Y.push(Z.name||Z.displayName||"")}),E=h!=null&&h.t?h.t("Selected: {{commaSeparatedListOfOrganisationUnits}}",{keySeparator:">",nsSeparator:"|",commaSeparatedListOfOrganisationUnits:p_(Y)}):`Selected: ${p_(Y)}`}else E=h!=null&&h.t?h.t("Nothing selected"):"Nothing selected";return E};return z.jsxs("div",{className:Dl.container,children:[!a&&z.jsxs("div",{className:Dl.userOrgUnitsWrapper,children:[z.jsx(pl,{label:h!=null&&h.t?h.t("User organisation unit"):"User organisation unit",checked:e.some(E=>E.id===f_),onChange:({checked:E})=>v({id:f_,checked:E,displayName:h!=null&&h.t?h.t("User organisation unit"):"User organisation unit"}),dense:!0}),z.jsx(pl,{label:h!=null&&h.t?h.t("User sub-units"):"User sub-units",checked:e.some(E=>E.id===m_),onChange:({checked:E})=>v({id:m_,checked:E,displayName:h!=null&&h.t?h.t("User sub-units"):"User sub-units"}),dense:!0}),z.jsx(pl,{label:h!=null&&h.t?h.t("User sub-x2-units"):"User sub-x2-units",checked:e.some(E=>E.id===g_),onChange:({checked:E})=>v({id:g_,checked:E,displayName:h!=null&&h.t?h.t("User sub-x2-units"):"User sub-x2-units"}),dense:!0})]}),z.jsx("div",{className:Dl.orgUnitTreeWrapper,children:z.jsx(w2,{roots:i,initiallyExpanded:[...i.length===1?[`/${i[0]}`]:[],...e.filter(E=>!zd.includes(E.id)&&!_s.hasLevelPrefix(E.id)&&!_s.hasGroupPrefix(E.id)).map(E=>{var A;return((A=E.path)==null?void 0:A.substring(0,E.path.lastIndexOf("/")))||""}).filter(E=>E)],selected:e.filter(E=>!zd.includes(E.id)&&!_s.hasLevelPrefix(E.id)&&!_s.hasGroupPrefix(E.id)).map(E=>E.path).filter(E=>!!E),onChange:v,dataTest:"org-unit-tree"})}),z.jsxs("div",{className:Gi(Dl.selectsWrapper,{[Dl.hidden]:n&&r}),children:[!n&&z.jsx(hs,{selected:p.length&&e.filter(E=>_s.hasLevelPrefix(E.id)).map(E=>_s.removePrefix(E.id))[0]||"",onChange:({selected:E})=>C(E),placeholder:h!=null&&h.t?h.t("Select a level"):"Select a level",loading:!p.length,dense:!0,clearable:!0,clearText:h!=null&&h.t?h.t("Clear"):"Clear",dataTest:"org-unit-level-select",children:p.map(E=>z.jsx(As,{value:E.id,label:E.displayName,dataTest:`org-unit-level-select-option-${E.id}`},E.id))}),!r&&z.jsx(F_,{selected:y.length?e.filter(E=>_s.hasGroupPrefix(E.id)).map(E=>_s.removePrefix(E.id)):[],onChange:({selected:E})=>k(E),placeholder:h!=null&&h.t?h.t("Select a group"):"Select a group",loading:!y.length,dense:!0,dataTest:"org-unit-group-select",children:y.map(E=>z.jsx(B_,{value:E.id,label:E.displayName,dataTest:`org-unit-group-select-option-${E.id}`},E.id))})]}),z.jsxs("div",{className:Dl.summaryWrapper,children:[c?z.jsxs("div",{className:Dl.warningWrapper,children:[z.jsx(Dk,{color:Me.red500}),z.jsx("span",{className:Dl.warningText,children:c})]}):z.jsx("span",{className:Dl.summaryText,children:w()}),z.jsx("div",{className:Dl.deselectButton,children:z.jsx(Ti,{secondary:!0,small:!0,onClick:_,disabled:!e.length,children:h!=null&&h.t?h.t("Deselect all"):"Deselect all"})})]})]})},Soe=i=>{if(!i.length)return ve.t("Nothing selected");const e=i.filter(c=>!zd.includes(c.id)&&!_s.hasLevelPrefix(c.id)&&!_s.hasGroupPrefix(c.id)).length,t=i.filter(c=>_s.hasLevelPrefix(c.id)).length,r=i.filter(c=>_s.hasGroupPrefix(c.id)).length,n=i.filter(c=>zd.includes(c.id)),a=[];return e&&a.push(ve.t("{{count}} org units",{count:e,defaultValue:"{{count}} org unit",defaultValue_plural:"{{count}} org units"})),t&&a.push(ve.t("{{count}} levels",{count:t,defaultValue:"{{count}} level",defaultValue_plural:"{{count}} levels"})),r&&a.push(ve.t("{{count}} groups",{count:r,defaultValue:"{{count}} group",defaultValue_plural:"{{count}} groups"})),n.forEach(c=>{a.push(c.name||c.displayName||"")}),ve.t("Selected: {{commaSeparatedListOfOrganisationUnits}}",{keySeparator:">",nsSeparator:"|",commaSeparatedListOfOrganisationUnits:p_(a)})},Eoe={resource:"organisationUnits",params:{userDataViewFallback:!0,fields:"id"}},koe=()=>{const{data:i,error:e,isLoading:t,isError:r}=ef({queryKey:["organisationUnits","dataViewRoot"],query:Eoe,select:n=>n.organisationUnits});return{orgUnits:i,error:e,isLoading:t,isError:r}},Moe="_formField_1mwfn_1",Aoe="_noticeBox_1mwfn_19",Ioe="_mutedText_1mwfn_23",Poe="_errorText_1mwfn_28",Doe="_orgUnitSelector_1mwfn_34",Nm={formField:Moe,noticeBox:Aoe,mutedText:Ioe,errorText:Poe,orgUnitSelector:Doe},Roe=({orgUnitRoots:i,selectedOrgUnits:e,onClose:t,onConfirm:r})=>{const[n,a]=Ie.useState(e),c=p=>{a(p.items)},s=()=>{r(n)},h=Ie.useMemo(()=>{if(n.length<=1)return!0;const p=n.filter(g=>g.path);if(p.length===0)return!0;const m=p.map(g=>g.path.split("/").filter(v=>v.length>0).length),y=m[0];return m.every(g=>g===y)},[n]);return z.jsxs(va,{onClose:t,large:!0,children:[z.jsx(Oo,{children:ve.t("Select Organisation Units")}),z.jsxs(go,{children:[z.jsx("div",{className:Nm.noticeBox,children:z.jsx(xa,{title:ve.t("Organisation unit levels"),children:ve.t("Some models require you to only select organisation units from the same level.")})}),z.jsx(Toe,{roots:i,selected:n,onSelect:c,hideGroupSelect:!0,hideLevelSelect:!1,hideUserOrgUnits:!0,warning:h?void 0:ve.t("All org units must be at the same level")})]}),z.jsx(jo,{children:z.jsxs(to,{children:[z.jsx(Ti,{onClick:t,children:ve.t("Cancel")}),z.jsx(Ti,{primary:!0,onClick:s,disabled:!h,children:ve.t("Confirm Selection")})]})})]})},Loe=({control:i,errors:e,onUpdateOrgUnits:t})=>{const r=jc({control:i,name:"orgUnits"}),[n,a]=Ie.useState(!1),{orgUnits:c,isLoading:s}=koe(),h=()=>{a(!1)},p=m=>{t(m),a(!1)};return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:Gi(Nm.formField,Nm.orgUnitSelector),children:[z.jsx(Da,{children:ve.t("Organisation Units")}),z.jsx("p",{className:Nm.mutedText,children:Soe(r)}),z.jsx(Ti,{onClick:()=>a(!0),disabled:s,loading:s,icon:z.jsx(xk,{}),dataTest:"evaluation-org-unit-select-button",small:!0,children:ve.t("Select organisation units")}),e.orgUnits&&z.jsx("p",{className:Nm.errorText,children:e.orgUnits.message})]}),n&&z.jsx(Roe,{orgUnitRoots:(c==null?void 0:c.map(m=>m.id))||[],selectedOrgUnits:r,onClose:h,onConfirm:p})]})},Noe="_modelCardContainer_19stu_1",zoe="_description_19stu_12",Ooe="_selectedModelCard_19stu_19",joe="_modelCard_19stu_1",Foe="_title_19stu_30",Boe="_modelAuthor_19stu_38",$oe="_modelAuthorInfo_19stu_49",Uoe="_modelAuthorLogo_19stu_55",Voe="_modelAuthorName_19stu_62",Goe="_modelOrganizationName_19stu_66",Hoe="_modelHumanName_19stu_71",qoe="_list_19stu_81",Woe="_listItem_19stu_91",Yoe="_assessmentStatus_19stu_101",Zoe="_statusGray_19stu_109",Xoe="_statusRed_19stu_115",Koe="_statusOrange_19stu_121",Qoe="_statusYellow_19stu_127",Joe="_statusGreen_19stu_133",qn={modelCardContainer:Noe,description:zoe,selectedModelCard:Ooe,modelCard:joe,title:Foe,modelAuthor:Boe,modelAuthorInfo:$oe,modelAuthorLogo:Uoe,modelAuthorName:Voe,modelOrganizationName:Goe,modelHumanName:Hoe,list:qoe,listItem:Woe,assessmentStatus:Yoe,statusGray:Zoe,statusRed:Xoe,statusOrange:Koe,statusYellow:Qoe,statusGreen:Joe},ele={month:ve.t("Monthly"),year:ve.t("Yearly"),week:ve.t("Weekly"),day:ve.t("Daily"),any:ve.t("Any")},tle={[Ss.GRAY]:{label:ve.t("Deprecated"),description:ve.t("This model is not intended for use or has been deprecated."),className:qn.statusGray},[Ss.RED]:{label:ve.t("Experimental"),description:ve.t("An early prototype with no formal validation - only for initial experimentation."),className:qn.statusRed},[Ss.ORANGE]:{label:ve.t("Limited"),description:ve.t("Tested on a small dataset. Requires manual tuning and close monitoring."),className:qn.statusOrange},[Ss.YELLOW]:{label:ve.t("Testing"),description:ve.t("Prepared for more extensive testing; not yet approved for production."),className:qn.statusYellow},[Ss.GREEN]:{label:ve.t("Production"),description:ve.t("Approved for general use."),className:qn.statusGreen}},ile=({model:i,isSelected:e,onSelect:t})=>{const r=i.authorAssessedStatus&&tle[i.authorAssessedStatus];return z.jsxs("div",{className:Gi(qn.modelCardContainer,{[qn.selectedModelCard]:e}),children:[z.jsxs("div",{className:qn.modelCard,children:[z.jsxs("div",{className:qn.title,children:[z.jsx("h3",{className:qn.modelHumanName,children:i.displayName||i.name}),r&&z.jsx(Gl,{content:r.description,children:z.jsx("div",{className:Gi(qn.assessmentStatus,r.className),children:r.label})})]}),z.jsx("div",{className:qn.description,children:i.description}),z.jsxs("div",{className:qn.modelAuthor,children:[i.organizationLogoUrl&&z.jsx("img",{src:i.organizationLogoUrl,alt:i.name+" logo",className:qn.modelAuthorLogo}),z.jsxs("div",{className:qn.modelAuthorInfo,children:[z.jsx("span",{className:qn.modelAuthorName,children:i.author}),z.jsx("span",{className:qn.modelOrganizationName,children:i.organization})]})]}),z.jsxs("div",{children:[z.jsxs("ul",{className:qn.list,children:[i.target&&z.jsx("li",{className:qn.listItem,children:z.jsx(Mm,{icon:z.jsx(Fv,{}),children:i.target.displayName})}),i.covariates&&i.covariates.length>0&&z.jsx(Gl,{content:i.covariates.map(n=>n.displayName).join(", "),children:z.jsx("li",{className:qn.listItem,children:z.jsx(Mm,{icon:z.jsx(C_,{}),children:ve.t("{{count}} covariates",{count:i.covariates.length,defaultValue:"{{count}} covariate",defaultValue_plural:"{{count}} covariates"})})})})]}),z.jsxs("ul",{className:qn.list,children:[z.jsx("li",{className:qn.listItem,children:z.jsx(Mm,{neutral:!0,icon:z.jsx(hk,{}),children:ele[i.supportedPeriodType]||i.supportedPeriodType})}),i.authorNote&&i.authorNote!=="No Author note yet"&&z.jsx(z.Fragment,{children:z.jsx("li",{className:qn.listItem,children:z.jsx(Gl,{content:i.authorNote,children:z.jsx(Mm,{icon:z.jsx(E_,{}),children:ve.t("Author note")})})})})]})]})]}),z.jsx(Ti,{onClick:()=>t(i),primary:!0,small:!0,children:e?ve.t("Selected"):ve.t("Select Model")})]})},rle="_filtersContainer_126mx_1",nle="_inputContainer_126mx_9",sle="_filtersGroup_126mx_18",ale="_singleSelectContainer_126mx_24",ole="_singleSelectMenuItem_126mx_32",ao={filtersContainer:rle,inputContainer:nle,filtersGroup:sle,singleSelectContainer:ale,singleSelectMenuItem:ole},lle=({table:i})=>{var e,t,r;return z.jsxs("div",{className:ao.filtersContainer,children:[z.jsx("div",{className:ao.inputContainer,children:z.jsx(nh,{dense:!0,placeholder:ve.t("Search by title"),value:((e=i.getColumn("displayName"))==null?void 0:e.getFilterValue())??"",onChange:n=>{var a;return(a=i.getColumn("displayName"))==null?void 0:a.setFilterValue(n.value)}})}),z.jsxs("div",{className:ao.filtersGroup,children:[z.jsx("div",{className:ao.singleSelectContainer,children:z.jsxs(il,{dense:!0,clearable:!0,clearText:ve.t("Clear"),selected:(t=i.getColumn("supportedPeriodType"))==null?void 0:t.getFilterValue(),placeholder:ve.t("Period Type"),onChange:n=>{var a;return(a=i.getColumn("supportedPeriodType"))==null?void 0:a.setFilterValue(n.selected)},children:[z.jsx(tn,{className:ao.singleSelectMenuItem,label:ve.t("Weekly"),value:du.WEEK},du.WEEK),z.jsx(tn,{className:ao.singleSelectMenuItem,label:ve.t("Monthly"),value:du.MONTH},du.MONTH),z.jsx(tn,{className:ao.singleSelectMenuItem,label:ve.t("Yearly"),value:du.YEAR},du.YEAR),z.jsx(tn,{className:ao.singleSelectMenuItem,label:ve.t("Any"),value:du.ANY},du.ANY)]})}),z.jsx("div",{className:ao.singleSelectContainer,children:z.jsxs(il,{dense:!0,clearable:!0,clearText:ve.t("Clear"),selected:(r=i.getColumn("authorAssessedStatus"))==null?void 0:r.getFilterValue(),placeholder:ve.t("Assessment Status"),onChange:n=>{var a;return(a=i.getColumn("authorAssessedStatus"))==null?void 0:a.setFilterValue(n.selected)},children:[z.jsx(tn,{className:ao.singleSelectMenuItem,label:ve.t("Production"),value:Ss.GREEN},Ss.GREEN),z.jsx(tn,{className:ao.singleSelectMenuItem,label:ve.t("Testing"),value:Ss.YELLOW},Ss.YELLOW),z.jsx(tn,{className:ao.singleSelectMenuItem,label:ve.t("Limited"),value:Ss.ORANGE},Ss.ORANGE),z.jsx(tn,{className:ao.singleSelectMenuItem,label:ve.t("Experimental"),value:Ss.RED},Ss.RED),z.jsx(tn,{className:ao.singleSelectMenuItem,label:ve.t("Deprecated"),value:Ss.GRAY},Ss.GRAY)]})})]})]})},cle="_content_1nq6p_1",ule="_filterBar_1nq6p_7",dle="_modelGrid_1nq6p_24",hle="_modelModal_1nq6p_33",ple="_noResults_1nq6p_36",wm={content:cle,filterBar:ule,modelGrid:dle,modelModal:hle,noResults:ple},K3=[Ss.GREEN,Ss.YELLOW,Ss.ORANGE,Ss.RED,Ss.GRAY],fle=({models:i,selectedModel:e,onClose:t,onConfirm:r})=>{const[n,a]=Ie.useState(e),c=()=>{a(void 0),t()},s=()=>{n&&r(n),c()},h=x=>{(n==null?void 0:n.id)===x.id?a(void 0):a(x)},p=bC(),m=Ie.useMemo(()=>[p.accessor("displayName",{id:"displayName",enableColumnFilter:!0,filterFn:"includesString"}),p.accessor("supportedPeriodType",{id:"supportedPeriodType",enableColumnFilter:!0,filterFn:"includesString"}),p.accessor("authorAssessedStatus",{id:"authorAssessedStatus",enableColumnFilter:!0,filterFn:"equalsString",sortingFn:(x,v)=>{const _=x.original.authorAssessedStatus,C=v.original.authorAssessedStatus;if(!_&&!C)return 0;if(!_)return 1;if(!C)return-1;const k=K3.indexOf(_),w=K3.indexOf(C);return k===-1&&w===-1?0:k===-1?1:w===-1?-1:k-w}})],[]),y=MC({data:i||[],columns:m,initialState:{pagination:{pageSize:5},sorting:[{id:"authorAssessedStatus",desc:!1}]},getCoreRowModel:SC(),getFilteredRowModel:EC(),getSortedRowModel:kC()}),g=y.getRowModel().rows;return z.jsxs(va,{fluid:!0,className:wm.modelModal,onClose:c,children:[z.jsx(Oo,{children:ve.t("Select Model")}),z.jsxs(go,{children:[z.jsx("div",{className:wm.filterBar,children:z.jsx(lle,{table:y})}),z.jsx("div",{className:wm.content,children:z.jsx("div",{className:wm.modelGrid,children:g.length>0?g.map(x=>z.jsx(ile,{model:x.original,isSelected:(n==null?void 0:n.id)===x.original.id,onSelect:h},x.original.id)):z.jsx("div",{className:wm.noResults,children:ve.t("No models found")})})})]}),z.jsx(jo,{children:z.jsxs(to,{end:!0,children:[z.jsx(Ti,{onClick:c,children:ve.t("Cancel")}),z.jsx(Ti,{primary:!0,onClick:s,disabled:!n,children:ve.t("Confirm Selection")})]})})]})},mle="_formField_e44e7_1",gle="_errorText_e44e7_23",yle="_modelSelector_e44e7_29",vle="_mutedText_e44e7_37",_m={formField:mle,errorText:gle,modelSelector:yle,mutedText:vle},xle=({control:i})=>{const{models:e,isLoading:t}=Mx(),[r,n]=Ie.useState(!1),a=Vc(),c=jc({control:i,name:"modelId"}),s=p=>{a.setValue("modelId",p.id.toString(),{shouldValidate:!0,shouldDirty:!0}),a.resetField("covariateMappings"),a.resetField("targetMapping"),n(!1)},h=e==null?void 0:e.find(p=>p.id.toString()===c);return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:Gi(_m.formField,_m.modelSelector),children:[z.jsx(Da,{children:ve.t("Model")}),h?z.jsx("p",{className:_m.mutedText,children:h.displayName||h.name}):z.jsx("p",{className:_m.mutedText,children:ve.t("No model selected")}),z.jsx(Ti,{onClick:()=>n(!0),icon:z.jsx(k_,{}),dataTest:"evaluation-model-select-button",small:!0,loading:t,children:ve.t("Select model")}),a.formState.errors.modelId&&z.jsx("p",{className:_m.errorText,children:a.formState.errors.modelId.message})]}),r&&z.jsx(fle,{models:e,selectedModel:h,onClose:()=>n(!1),onConfirm:s})]})},ble="_mappingItem_1i5xd_1",wle="_featureDescription_1i5xd_9",Q3={mappingItem:ble,featureDescription:wle},J3=({feature:i,onMapping:e})=>{const t=n=>({id:n.name||n.displayName,name:n.displayName,displayName:n.displayName,description:n.description}),r=n=>n.description&&n.description.toLowerCase()!==(n.displayName??n.name).toLowerCase();return z.jsxs("div",{className:Q3.mappingItem,children:[z.jsx(pD,{feature:t(i),onChangeSearchSelectField:(n,a)=>{e(i.name||i.displayName,a)}}),r(i)&&z.jsx("p",{className:Q3.featureDescription,children:i.description})]})},i5=()=>{const i=$s(),e=Vc(),t=jc({control:e.control,name:"modelId"}),r=jc({control:e.control,name:"covariateMappings"}),n=jc({control:e.control,name:"targetMapping"}),a=m=>{var y;if(m)return(y=i.getQueryData(["models"]))==null?void 0:y.find(g=>g.id===Number(m))},c=(m,y)=>{const g=a(m);return!g||!g.target?null:y?y.covariateName!==g.target.name||!y.dataItemId?ve.t('Target "{{targetName}}" must be mapped to a data item',{targetName:g.target.displayName||g.target.name}):null:ve.t('Target "{{targetName}}" must be mapped to a data item',{targetName:g.target.displayName||g.target.name})},s=(m,y)=>{const g=a(m),x={};return!g||!g.covariates||g.covariates.forEach(v=>{if(!v.name)return;const _=y==null?void 0:y.find(C=>C.covariateName===v.name);(!_||!_.dataItemId)&&(x[v.name]=ve.t('Covariate "{{covariateName}}" must be mapped to a data item',{covariateName:v.displayName||v.name}))}),x},h=(m,y,g)=>{var C;const x=a(m);if(!x)return{missingCovariates:[],missingTarget:!1};const v=((C=x.covariates)==null?void 0:C.filter(k=>!(y!=null&&y.some(w=>w.covariateName===k.name&&w.dataItemId))))||[],_=!g||!x.target||g.covariateName!==x.target.name||!g.dataItemId;return{missingCovariates:v,missingTarget:_}};return{getSelectedModel:a,validateTargetMapping:c,validateCovariateMapping:s,getMissingMappings:h,getDetailedValidationSummary:()=>{var C;if(!t)return{isValid:!1,hasMissingMappings:!1,missingCovariates:[],missingTarget:!1,totalCovariates:0,mappedCovariates:0};const m=a(t);if(!m)return{isValid:!1,hasMissingMappings:!1,missingCovariates:[],missingTarget:!1,totalCovariates:0,mappedCovariates:0};const{missingCovariates:y,missingTarget:g}=h(t,r,n),x=((C=m.covariates)==null?void 0:C.length)||0,v=x-y.length,_=y.length>0||g;return{isValid:!_,hasMissingMappings:_,missingCovariates:y,missingTarget:g,totalCovariates:x,mappedCovariates:v}}}},_le=i=>{const e=Vc(),{validateTargetMapping:t,validateCovariateMapping:r}=i5(),[n,a]=Ie.useState(()=>{const v=(e.getValues("covariateMappings")||[]).reduce((_,C)=>(_[C.covariateName]=C.dataItemId,_),{});return{targetMapping:e.getValues("targetMapping"),covariateMappings:v}}),c=(x,v)=>{a(_=>({..._,targetMapping:{covariateName:x,dataItemId:v}}))},s=(x,v)=>{a(_=>({..._,covariateMappings:{..._.covariateMappings,[x]:v}}))},h=()=>{const x=Object.entries(n.covariateMappings).map(([v,_])=>({covariateName:v,dataItemId:_}));return{targetMapping:n.targetMapping,covariateMappings:x}},p=()=>{const{targetMapping:x}=h();return t(i.id.toString(),x)===null},m=()=>{const{covariateMappings:x}=h(),v=r(i.id.toString(),x);return Object.keys(v).length===0},y=p()&&m();return{localState:n,handleTargetMapping:c,handleCovariateMapping:s,isTargetMapped:p,areAllCovariatesMapped:m,isFormValid:y,getMappingsForSubmission:()=>{if(!n.targetMapping)return null;const{targetMapping:x,covariateMappings:v}=h();return{targetMapping:x,covariateMappings:v}}}},Cle="_dataMappingModal_1415l_1",Tle="_content_1415l_7",Sle="_modalDescription_1415l_13",Ele="_targetSection_1415l_19",kle="_covariatesSection_1415l_20",Mle="_sectionTitle_1415l_28",Ale="_sectionDescription_1415l_34",Ec={dataMappingModal:Cle,content:Tle,modalDescription:Sle,targetSection:Ele,covariatesSection:kle,sectionTitle:Mle,sectionDescription:Ale},Ile=({model:i,onClose:e,onConfirm:t})=>{const{handleTargetMapping:r,handleCovariateMapping:n,isFormValid:a,getMappingsForSubmission:c}=_le(i),s=()=>{const h=c();h&&h.targetMapping&&t(h.targetMapping,h.covariateMappings)};return z.jsxs(va,{className:Ec.dataMappingModal,onClose:e,children:[z.jsx(Oo,{children:ve.t("Map Data Items")}),z.jsx(go,{children:z.jsxs("div",{className:Ec.content,children:[z.jsx("p",{className:Ec.modalDescription,children:ve.t("Map the model features to corresponding data items in DHIS2")}),i.target&&z.jsxs("div",{className:Ec.targetSection,children:[z.jsx("h4",{className:Ec.sectionTitle,children:ve.t("Target")}),z.jsx("p",{className:Ec.sectionDescription,children:ve.t("Map the model target to the corresponding data item in DHIS2")}),z.jsx(J3,{feature:i.target,onMapping:r})]}),i.covariates&&i.covariates.length>0&&z.jsxs("div",{className:Ec.covariatesSection,children:[z.jsx("h4",{className:Ec.sectionTitle,children:"Covariates"}),z.jsx("p",{className:Ec.sectionDescription,children:ve.t("Map each model covariate to the corresponding data item in DHIS2")}),i.covariates.map((h,p)=>z.jsx(J3,{feature:h,onMapping:n},h.name||p))]})]})}),z.jsx(jo,{children:z.jsxs(to,{children:[z.jsx(Ti,{onClick:e,children:ve.t("Cancel")}),z.jsx(Ti,{primary:!0,onClick:s,disabled:!a,children:ve.t("Save")})]})})]})},Ple="_formField_iyfss_1",Dle="_mutedText_iyfss_5",Rle="_errorText_iyfss_11",Lle="_datasetConfiguration_iyfss_17",b0={formField:Ple,mutedText:Dle,errorText:Rle,datasetConfiguration:Lle},Nle=i=>{let{missingEntryPoint:e,appShortName:t}=i;return de.createElement(de.Fragment,null,de.createElement("p",null,"Plugin unavailable"),e?de.createElement(de.Fragment,null,de.createElement("p",null,`You do not have access to the requested plugin ${t}, or it is not installed`)):null)},zle={apps:{resource:"apps"}},Ole=i=>{var e;let{apps:t,appShortName:r}=i;return(e=t.find(n=>{let{short_name:a}=n;return a&&a===r}))===null||e===void 0?void 0:e.pluginLaunchUrl},jle=i=>{let{pluginSource:e,pluginShortName:t,height:r,width:n,className:a,clientWidth:c,...s}=i;const h=Ie.useRef(null),{add:p}=Ie.useContext(bL),{data:m}=eo(zle),y=e??Ole({apps:(m==null?void 0:m.apps)||[],appShortName:t}),[g,x]=Ie.useState(!1),[v,_]=Ie.useState(!1),[C,k]=Ie.useState(!1),[w,E]=Ie.useState(150),[A,M]=Ie.useState(500),S=Ie.useMemo(()=>s,[...Object.keys(s).sort().map(N=>s[N])]);return Ie.useEffect(()=>{x(!1)},[y]),Ie.useEffect(()=>{const N=v;if(_(g),!(N===!1&&g===!0)&&h!=null&&h.current){const Y={...S,alertsAdd:p,setPluginHeight:r?null:E,setPluginWidth:!n&&c?M:null,setInErrorState:k,setCommunicationReceived:x,clientWidth:c};if(!g&&!C){const Z=rS.on("getPropsFromParent",{window:h.current.contentWindow},()=>(x(!0),Y));return()=>Z.cancel()}g&&h.current.contentWindow&&!C&&rS.send(h.current.contentWindow,"updated",Y).catch(Z=>{console.error(Z)})}},[S,g,C,p]),m&&!y?de.createElement(Nle,{missingEntryPoint:!0,appShortName:t}):y?de.createElement("iframe",{ref:h,src:e,className:a,width:c?A:n??"100%",height:r??w,style:{border:"none"}}):de.createElement(de.Fragment,null)},Fle=i=>z.jsx(jle,{pluginSource:"http://localhost:8080/dhis-web-data-visualizer/plugin.html",...i}),Ble=({onClose:i,selectedOrgUnits:e,periodType:t,fromDate:r,toDate:n,covariateMappings:a,targetMapping:c})=>{const{baseUrl:s}=wg(),h=()=>{const y=Jo[t];return y?Y2(r,n,y.toLowerCase()).map(x=>({id:x.id})):[]},p=()=>[{id:c.dataItemId},...a.map(g=>({id:g.dataItemId}))],m=()=>e.map(y=>({id:y.id}));return z.jsxs(va,{large:!0,onClose:i,children:[z.jsx(Oo,{children:ve.t("Inspect dataset")}),z.jsx(go,{children:z.jsx(Fle,{pluginSource:`${s}/dhis-web-data-visualizer/plugin.html`,height:"500px",forDashboard:!0,displayProperty:"name",visualization:{type:"PIVOT_TABLE",columns:[{dimension:"pe",items:h()}],rows:[{dimension:"ou",items:m()},{dimension:"dx",items:p()}],filters:[]}})}),z.jsx(jo,{children:z.jsx(to,{children:z.jsx(Ti,{onClick:i,children:ve.t("Close")})})})]})},$le=({enabled:i=!0,select:e}={})=>{const{data:t,isLoading:r,error:n}=ef({queryKey:["apps"],query:{resource:"apps",params:{fields:"key,displayName,version,pluginLaunchUrl"}},cacheTime:1/0,staleTime:1/0,enabled:i,select:e});return{apps:t,isLoading:r,error:n}},Ule=[101,0,0],Vle=(i,e)=>{const[t,r,n]=i.split(".").map(p=>parseInt(p,10)),[a,c,s]=e;return t>a||t===a&&r>c||t===a&&r===c&&n>=s},Gle=i=>Vle(i,Ule),Hle="data-visualizer",qle=()=>{const{apps:i,isLoading:e,error:t}=$le({select:a=>a.filter(c=>c.key===Hle)}),r=i==null?void 0:i[0],n=r?Gle(r.version):!1;return{version:r==null?void 0:r.version,isCompatible:n,isLoading:e,error:t}},Wle=i=>{const{enabled:e,children:t,...r}=i;return e?z.jsx(Gl,{...r,children:({onMouseOver:n,onMouseOut:a,ref:c})=>z.jsx("span",{ref:c,onMouseEnter:n,onMouseLeave:a,children:t})}):t},Yle=({control:i,errors:e})=>{const[t,r]=Ie.useState(!1),[n,a]=Ie.useState(!1),c=Vc(),s=jc({control:i,name:"modelId"}),p=i5().getDetailedValidationSummary(),{models:m}=Mx(),{isCompatible:y,isLoading:g}=qle(),x=m==null?void 0:m.find(k=>k.id.toString()===s),v=()=>{r(!1)},_=(k,w)=>{c.setValue("targetMapping",k,{shouldValidate:!0,shouldDirty:!0}),c.setValue("covariateMappings",w,{shouldValidate:!0,shouldDirty:!0}),r(!1)},C=()=>x?p.isValid?ve.t("All data items mapped"):ve.t("{{mapped}}/{{total}} data items mapped",{mapped:p.mappedCovariates+(p.missingTarget?0:1),total:p.totalCovariates+1}):ve.t("No model selected");return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:Gi(b0.formField,b0.datasetConfiguration),children:[z.jsx(Da,{children:ve.t("Dataset Configuration")}),z.jsx("p",{className:b0.mutedText,children:C()}),z.jsxs(to,{children:[z.jsx(Ti,{onClick:()=>r(!0),icon:z.jsx(C_,{}),dataTest:"evaluation-data-mapping-button",disabled:!x,small:!0,children:ve.t("Configure sources")}),z.jsx(Wle,{enabled:!g&&!y,content:ve.t("The Data Visualizer app is not compatible with this feature. Please update to a newer version."),children:z.jsx(Ti,{small:!0,disabled:!x||!p.isValid||!y,icon:z.jsx(kk,{}),onClick:()=>a(!0),children:ve.t("Inspect dataset")})})]}),(e.targetMapping||e.covariateMappings)&&z.jsx("p",{className:b0.errorText,children:ve.t("Please map all model covariates to valid data items")})]}),t&&x&&z.jsx(Ile,{model:x,onClose:v,onConfirm:_}),n&&z.jsx(Ble,{onClose:()=>a(!1),selectedOrgUnits:c.getValues("orgUnits"),periodType:c.getValues("periodType"),fromDate:c.getValues("fromDate"),toDate:c.getValues("toDate"),covariateMappings:c.getValues("covariateMappings"),targetMapping:c.getValues("targetMapping")})]})},Zle=({onSubmit:i,methods:e,onUpdateOrgUnits:t})=>{const r=s=>{i(s)},{control:n,handleSubmit:a,formState:{errors:c}}=e;return z.jsx(z.Fragment,{children:z.jsx("div",{className:Lm.formWrapper,children:z.jsxs("form",{onSubmit:a(r),children:[z.jsx(ooe,{control:n,errors:c}),z.jsx(noe,{control:n,errors:c}),z.jsx(Loe,{control:n,errors:c,onUpdateOrgUnits:t}),z.jsx(xle,{control:n}),z.jsx(Yle,{control:n,errors:c})]})})})},Xle=10,Kle=1,Qle={[Jo.MONTH]:3,[Jo.WEEK]:12},Jle=(i,e,t)=>{const r=Jo[i];return r?Y2(e,t,r.toLowerCase()).map(a=>a.id):[]},ece=(i,e,t)=>({response:{resource:"analytics",params:{paging:!1,dimension:`dx:${i.join(";")},ou:${t.join(";")},pe:${e.join(";")}`}}}),tce=i=>({geojson:{resource:"organisationUnits",params:{filter:`id:in:[${i.join(",")}]`,fields:"id,geometry,parent[id],level,displayName",paging:!1}}}),ice=({onSuccess:i,onError:e}={})=>{const t=sh(),r=$s(),n=vo(),{mutate:a,isLoading:c,error:s}=rc({mutationFn:async h=>{var A;const p=(A=r.getQueryData(["models"]))==null?void 0:A.find(M=>M.id===Number(h.modelId));if(!p)throw new Error("Model not found");const m=Jle(h.periodType,h.fromDate,h.toDate),y=[...h.covariateMappings.map(M=>M.dataItemId),h.targetMapping.dataItemId],g=await t.query(ece(y,m,h.orgUnits.map(M=>M.id))),x=g.response.metaData.dimensions.ou,v=await t.query(tce(x)),_=v.geojson.organisationUnits.filter(M=>!M.geometry);if(_.length>0)throw new Error(`The following org units have no geometry: ${_.map(M=>M.displayName).join(", ")}`);const k=(M=>M.map(S=>{const N=S[0],Y=h.targetMapping.dataItemId===N?h.targetMapping:h.covariateMappings.find(Z=>Z.dataItemId===N);if(!Y)throw new Error(`Data layer not found for data item id: ${N}`);return{featureName:Y.covariateName,orgUnit:S[1],period:S[2],value:parseFloat(S[3])}}))(g.response.rows),w={type:"FeatureCollection",features:v.geojson.organisationUnits.map(M=>({id:M.id,type:"Feature",geometry:M.geometry,properties:{id:M.id,parent:M.parent.id,parentGraph:M.parent.id,level:M.level}}))},E={name:h.name,geojson:w,providedData:k,dataToBeFetched:[],modelId:p.name,nPeriods:Qle[h.periodType],nSplits:Xle,stride:Kle};return yl.createBacktestWithDataAnalyticsCreateBacktestWithDataPost(E)},onSuccess:()=>{r.invalidateQueries({queryKey:["jobs"]}),i==null||i(),n("/jobs")},onError:h=>{e==null||e(h)}});return{createNewBacktest:a,isSubmitting:c,error:s}},rce=Bc({id:Ms().min(1,{message:ve.t("Missing id for org unit")}),name:Ms().optional(),displayName:Ms().optional(),path:Ms().optional()}),nce=Bc({covariateName:Ms(),dataItemId:Ms()}),sce=Bc({name:Ms().min(1,{message:ve.t("Name is required")}),periodType:Jie(["WEEK","MONTH"],{message:ve.t("Period type is required")}),fromDate:Ms().min(1,{message:ve.t("Start date is required")}),toDate:Ms().min(1,{message:ve.t("End date is required")}),orgUnits:Pv(rce).min(1,{message:ve.t("At least one org unit is required")}),modelId:Ms().min(1,{message:ve.t("Please select a model")}),covariateMappings:Pv(nce).min(1,{message:ve.t("Please map the covariates to valid data items")}),targetMapping:Bc({covariateName:Ms(),dataItemId:Ms()},{message:ve.t("Please map the target to a valid data item")})}).refine(i=>{const e=jE(i.fromDate),t=jE(i.toDate);return H2(t,e)||KH(t,e)},{path:["toDate"],message:ve.t("End period must be after start period")}),ace=()=>{const i=Ex({resolver:kx(sce),defaultValues:{name:"",periodType:Jo.MONTH,fromDate:"",toDate:"",orgUnits:[],modelId:"",covariateMappings:[],targetMapping:void 0},shouldFocusError:!1}),{createNewBacktest:e,isSubmitting:t,error:r}=ice({onSuccess:()=>{i.reset()}}),n=s=>{i.setValue("orgUnits",s,{shouldValidate:!0,shouldDirty:!0})},a=s=>e(s);return{methods:i,onUpdateOrgUnits:n,handleSubmit:a,handleStartJob:()=>{i.handleSubmit(a)()},isSubmitting:t,error:r}},oce=({shouldBlock:i})=>{const e=_U(({currentLocation:n,nextLocation:a})=>i&&n.pathname!==a.pathname),t=Ie.useCallback(()=>{e.state==="blocked"&&e.proceed()},[e]),r=Ie.useCallback(()=>{var n;e.state==="blocked"&&((n=e.reset)==null||n.call(e))},[e]);return{showConfirmModal:e.state==="blocked",handleConfirmNavigation:t,handleCancelNavigation:r}},lce=({onConfirm:i,onCancel:e})=>z.jsxs(va,{onClose:e,small:!0,children:[z.jsx(Oo,{children:ve.t("Unsaved changes")}),z.jsx(go,{children:z.jsx("p",{children:ve.t("You have unsaved changes that will be lost if you leave this page. Are you sure you want to continue?")})}),z.jsx(jo,{children:z.jsxs(to,{children:[z.jsx(Ti,{onClick:e,secondary:!0,children:ve.t("Cancel")}),z.jsx(Ti,{onClick:i,destructive:!0,children:ve.t("Leave page")})]})})]}),cce=()=>{const i=vo(),{methods:e,onUpdateOrgUnits:t,handleSubmit:r,handleStartJob:n,isSubmitting:a,error:c}=ace(),{showConfirmModal:s,handleConfirmNavigation:h,handleCancelNavigation:p}=oce({shouldBlock:!a&&e.formState.isDirty}),m=()=>{i("/evaluate")};return z.jsxs(z.Fragment,{children:[z.jsx(Ti,{className:Lm.backButton,small:!0,icon:z.jsx(_g,{}),onClick:m,children:ve.t("Back to evaluations")}),z.jsx(Jte,{...e,children:z.jsx("div",{className:Lm.container,children:z.jsxs(hC,{children:[z.jsx(Zle,{onSubmit:r,methods:e,onUpdateOrgUnits:t}),!!c&&z.jsx(xa,{error:!0,title:ve.t("Error starting evaluation job"),className:Lm.errorNotice,children:c.message}),z.jsx("div",{className:Lm.buttons,children:z.jsx(to,{end:!0,children:z.jsx(Ti,{primary:!0,loading:a,onClick:n,icon:z.jsx(dk,{}),children:ve.t("Start job")})})})]})})}),s&&z.jsx(lce,{onConfirm:h,onCancel:p})]})},uce=()=>z.jsxs("div",{children:[z.jsx(Uu,{pageTitle:ve.t("New evaluation"),pageDescription:ve.t("Create a new evaluation to assess the performance of a model")}),z.jsx(cce,{})]}),dce="_container_1a6i8_1",hce="_loadingContainer_1a6i8_5",pce="_errorContainer_1a6i8_12",Y1={container:dce,loadingContainer:hce,errorContainer:pce},fce="_buttonContainer_urbmf_1",mce="_leftSection_urbmf_7",ek={buttonContainer:fce,leftSection:mce},gce="_inputContainer_1ore4_1",yce="_singleSelectContainer_1ore4_11",Z1={inputContainer:gce,singleSelectContainer:yce},vce=({table:i})=>{var e,t,r;return z.jsxs(z.Fragment,{children:[z.jsx("div",{className:Z1.inputContainer,children:z.jsx(nh,{dense:!0,placeholder:ve.t("Search"),value:((e=i.getColumn("name"))==null?void 0:e.getFilterValue())??"",onChange:n=>{var a;return(a=i.getColumn("name"))==null?void 0:a.setFilterValue(n.value)}})}),z.jsx("div",{className:Z1.singleSelectContainer,children:z.jsxs(il,{dense:!0,clearable:!0,clearText:ve.t("Clear"),selected:(t=i.getColumn("status"))==null?void 0:t.getFilterValue(),placeholder:ve.t("Status"),onChange:n=>{var a;return(a=i.getColumn("status"))==null?void 0:a.setFilterValue(n.selected)},children:[z.jsx(tn,{label:ve.t("Pending"),value:Gr.PENDING}),z.jsx(tn,{label:ve.t("Running"),value:Gr.STARTED}),z.jsx(tn,{label:ve.t("Success"),value:Gr.SUCCESS}),z.jsx(tn,{label:ve.t("Failed"),value:Gr.FAILED}),z.jsx(tn,{label:ve.t("Revoked"),value:Gr.REVOKED})]})}),z.jsx("div",{className:Z1.singleSelectContainer,children:z.jsxs(il,{dense:!0,clearable:!0,clearText:ve.t("Clear"),selected:(r=i.getColumn("type"))==null?void 0:r.getFilterValue(),placeholder:ve.t("Type"),onChange:n=>{var a;return(a=i.getColumn("type"))==null?void 0:a.setFilterValue(n.selected)},children:[z.jsx(tn,{label:ve.t("Create evaluation"),value:Vl.CREATE_BACKTEST_WITH_DATA}),z.jsx(tn,{label:ve.t("Make prediction"),value:Vl.MAKE_PREDICTION})]})})]})},xce={[Gr.SUCCESS]:ve.t("Success"),[Gr.PENDING]:ve.t("Pending"),[Gr.STARTED]:ve.t("Running"),[Gr.FAILED]:ve.t("Failed"),[Gr.REVOKED]:ve.t("Cancelled")},bce={[Gr.SUCCESS]:"success",[Gr.PENDING]:"default",[Gr.STARTED]:"info",[Gr.FAILED]:"destructive",[Gr.REVOKED]:"default"},wce={[Gr.SUCCESS]:!1,[Gr.PENDING]:!1,[Gr.STARTED]:!0,[Gr.FAILED]:!1,[Gr.REVOKED]:!1},r5=({status:i})=>{const e=i,t=xce[e]||e,r=bce[e]||"default",n=wce[e]||!1;return i?z.jsx(uD,{label:t,variant:r,active:n}):null},_ce={[Vl.BACKTEST]:ve.t("Create evaluation (Legacy)"),[Vl.CREATE_BACKTEST_WITH_DATA]:ve.t("Create evaluation"),[Vl.MAKE_PREDICTION]:ve.t("Make prediction"),[Vl.CREATE_DATASET]:ve.t("Create dataset")},Cce=({jobType:i})=>{const e=i,t=_ce[e]||e;return z.jsx(z.Fragment,{children:t})},Tce="_modal_1rrd7_1",Sce="_loading_1rrd7_9",Ece="_logContent_1rrd7_19",kce="_error_1rrd7_30",up={modal:Tce,loading:Sce,logContent:Ece,error:kce},$d={LOADING:"loading",ERROR:"error",SUCCESS:"success"},Mce=({isLoading:i,error:e})=>i?$d.LOADING:e?$d.ERROR:$d.SUCCESS,Ace=({jobId:i,status:e,onClose:t})=>{const r=Ie.useRef(null),{data:n,error:a,isLoading:c}=tl({queryKey:["jobLogs",i],queryFn:()=>Bu.getLogsJobsJobIdLogsGet(i),refetchInterval:()=>e===Gr.PENDING||e===Gr.STARTED?10*1e3:!1,enabled:!!i});Ie.useEffect(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[n]);const s=Mce({isLoading:c,error:a});return z.jsxs(va,{onClose:t,fluid:s===$d.SUCCESS,children:[z.jsxs(Oo,{children:[ve.t("Job Logs")," - ",i]}),z.jsxs(go,{className:up.modal,children:[s===$d.LOADING&&z.jsx("div",{className:up.loading,children:z.jsx(La,{})}),s===$d.ERROR&&z.jsxs("div",{className:up.loading,children:[z.jsx("p",{className:up.error,children:ve.t("An error occurred while loading the logs.")}),a&&z.jsx("p",{className:up.error,children:a.message})]}),s===$d.SUCCESS&&z.jsxs("div",{children:[z.jsx("pre",{className:up.logContent,ref:r,children:n||ve.t("No logs reported for this job")}),z.jsx("div",{style:{marginTop:"1rem"},children:z.jsx(r5,{status:e})})]})]}),z.jsx(jo,{children:z.jsx(Ti,{onClick:t,secondary:!0,children:ve.t("Close")})})]})},Ice=({onSuccess:i,onError:e}={})=>{const t=$s(),{show:r}=ba(ve.t("Job deleted"),{success:!0}),{show:n}=ba(ve.t("Failed to delete job"),{success:!1}),{mutate:a,isLoading:c,isError:s,error:h}=rc({mutationFn:p=>Bu.deleteJobJobsJobIdDelete(p),onSuccess:(p,m)=>{t.invalidateQueries({queryKey:["jobs"]}),r(),i==null||i({id:m})},onError:p=>{console.error(p),n(),e==null||e()}});return{deleteJob:a,isLoading:c,isError:s,error:h}},Pce=({id:i,onClose:e,onDelete:t})=>{const{deleteJob:r,isLoading:n}=Ice({onSuccess:()=>{t==null||t(),e()}});return z.jsxs(va,{onClose:e,small:!0,children:[z.jsx(Oo,{children:ve.t("Delete job")}),z.jsx(go,{children:ve.t("Are you sure you want to delete this job? This action cannot be undone.")}),z.jsx(jo,{children:z.jsxs(to,{end:!0,children:[z.jsx(Ti,{onClick:e,secondary:!0,disabled:n,children:ve.t("Cancel")}),z.jsx(Ti,{onClick:()=>r(i),destructive:!0,disabled:n,loading:n,children:ve.t("Delete")})]})})]})},Dce=({onSuccess:i,onError:e}={})=>{const t=$s(),{show:r}=ba(ve.t("Job cancelled"),{success:!0}),{show:n}=ba(ve.t("Failed to cancel job"),{critical:!0}),{mutate:a,isLoading:c,error:s}=rc({mutationFn:h=>Bu.cancelJobJobsJobIdCancelPost(h),onSuccess:(h,p)=>{t.setQueryData(["jobs"],m=>m==null?void 0:m.map(y=>y.id===p?{...y,status:Gr.REVOKED}:y)),r(),i==null||i({id:p})},onError:()=>{n(),e==null||e()}});return{cancelJob:a,isLoading:c,error:s}},Rce=({id:i,onClose:e,onCancel:t})=>{const{cancelJob:r,isLoading:n}=Dce({onSuccess:()=>{t==null||t(),e()}});return z.jsxs(va,{onClose:e,small:!0,children:[z.jsx(Oo,{children:ve.t("Cancel job")}),z.jsx(go,{children:ve.t("Are you sure you want to cancel this job? This action cannot be undone.")}),z.jsx(jo,{children:z.jsxs(to,{end:!0,children:[z.jsx(Ti,{onClick:e,secondary:!0,disabled:n,children:ve.t("Close")}),z.jsx(Ti,{onClick:()=>r(i),destructive:!0,disabled:n,loading:n,children:ve.t("Cancel job")})]})})]})},Lce=async i=>{if(!(navigator!=null&&navigator.clipboard))throw new Error("Clipboard API not available");await navigator.clipboard.writeText(i)},Nce=({onSuccess:i,onError:e}={})=>{const t=rc({mutationFn:Lce,onSuccess:()=>{setTimeout(()=>{t.reset()},1500),i==null||i()},onError:()=>{e==null||e()}});return{copy:t.mutate,isCopied:t.isSuccess,isLoading:t.isLoading,error:t.error,reset:t.reset}},zce=({jobId:i,status:e,result:t,type:r})=>{const n=vo(),[a,c]=Ie.useState(!1),[s,h]=Ie.useState(!1),[p,m]=Ie.useState(!1),[y,g]=Ie.useState(!1),{show:x}=ba(ve.t("Failed to copy job ID"),{success:!1}),{copy:v,isCopied:_}=Nce({onError:()=>x()}),C=()=>{c(!1),h(!0)},k=()=>{r===Vl.CREATE_BACKTEST_WITH_DATA||r===Vl.BACKTEST?n(`/evaluate/compare?baseEvaluation=${t}`):r===Vl.MAKE_PREDICTION&&n("/predict"),c(!1)};return z.jsxs(z.Fragment,{children:[z.jsx(cD,{small:!0,open:a,icon:z.jsx(Tg,{}),onClick:()=>{c(w=>!w)},component:z.jsxs(x_,{dense:!0,children:[e===Gr.SUCCESS&&z.jsx(tn,{label:ve.t("Go to result"),dataTest:"job-overflow-go-to-result",disabled:!t,icon:z.jsx(Fv,{}),onClick:k}),e!==Gr.PENDING&&z.jsx(tn,{label:ve.t("View Logs"),dataTest:"job-overflow-view-logs",icon:z.jsx(M_,{}),onClick:C}),z.jsx(tn,{label:ve.t("Copy Job ID"),dataTest:"job-overflow-copy-job-id",icon:_?z.jsx(pk,{}):z.jsx(yk,{}),onClick:()=>{v(i)}}),(e===Gr.PENDING||e===Gr.STARTED)&&z.jsx(tn,{label:ve.t("Cancel"),dataTest:"job-overflow-cancel",destructive:!0,icon:z.jsx(Sk,{}),onClick:()=>{g(!0),c(!1)}}),(e===Gr.SUCCESS||e===Gr.FAILED||e===Gr.REVOKED)&&z.jsx(tn,{label:ve.t("Delete"),dataTest:"job-overflow-delete",destructive:!0,icon:z.jsx(Cg,{}),onClick:()=>{m(!0),c(!1)}})]})}),s&&z.jsx(Ace,{jobId:i,status:e,onClose:()=>h(!1)}),p&&z.jsx(Pce,{id:i,onClose:()=>m(!1)}),y&&z.jsx(Rce,{id:i,onClose:()=>g(!1)})]})},fu=bC(),Oce=[fu.accessor("id",{header:ve.t("ID"),enableSorting:!1}),fu.accessor("status",{header:ve.t("Status"),filterFn:"equals",enableSorting:!1,cell:i=>z.jsx(r5,{status:i.getValue()})}),fu.accessor("name",{header:ve.t("Name"),filterFn:"includesString"}),fu.accessor("type",{header:ve.t("Type"),enableSorting:!1,cell:i=>z.jsx(Cce,{jobType:i.getValue()})}),fu.accessor("start_time",{header:ve.t("Start date"),cell:i=>{const e=i.getValue();return e?Zd(new Date(e),"dd-MM-yyyy hh:mm"):void 0}}),fu.accessor("end_time",{header:ve.t("End date"),cell:i=>{const e=i.getValue();return e?Zd(new Date(e),"dd-MM-yyyy hh:mm"):void 0}}),fu.display({id:"duration",header:ve.t("Duration"),cell:i=>{const e=i.row.original.start_time,t=i.row.original.end_time;if(!e||!t)return;const r=XH({start:new Date(e),end:new Date(t)});return WH(r,{format:["hours","minutes","seconds"],delimiter:" "})}}),fu.display({id:"actions",header:ve.t("Actions"),cell:i=>{const e=i.row.original.status;return z.jsx(zce,{jobId:i.row.original.id,result:i.row.original.result,status:e,type:i.row.original.type})}})],jce=i=>i.getIsSorted()||"default",Fce=({jobs:i})=>{const e=MC({data:i||[],columns:Oce,initialState:{sorting:[{id:"start_time",desc:!0}],columnVisibility:{id:!1}},getRowId:r=>r.id.toString(),enableRowSelection:!1,getSortedRowModel:kC(),getCoreRowModel:SC(),getFilteredRowModel:EC(),getPaginationRowModel:KD()}),t=e.getRowModel().rows.length>0;return z.jsxs("div",{children:[z.jsx("div",{className:ek.buttonContainer,children:z.jsx("div",{className:ek.leftSection,children:z.jsx(vce,{table:e})})}),z.jsxs(hx,{children:[z.jsx(ux,{children:e.getHeaderGroups().map(r=>z.jsx(Fl,{children:r.headers.map(n=>z.jsx(px,{fixed:!0,top:!0,...n.column.getCanSort()?{sortDirection:jce(n.column),sortIconTitle:ve.t("Sort by {{column}}",{column:n.column.id}),onSortIconClick:()=>n.column.toggleSorting()}:{},children:n.isPlaceholder?null:Rv(n.column.columnDef.header,n.getContext())},n.id))},r.id))}),z.jsx(ax,{children:t?e.getRowModel().rows.map(r=>z.jsx(Fl,{children:r.getVisibleCells().map(n=>z.jsx(Iu,{children:Rv(n.column.columnDef.cell,n.getContext())},n.id))},r.id)):z.jsx(Fl,{children:z.jsx(Iu,{colSpan:String(e.getAllColumns().length),align:"center",children:ve.t("No jobs available")})})}),z.jsx(cx,{children:z.jsx(Fl,{children:z.jsx(Iu,{colSpan:String(e.getAllColumns().length),children:z.jsx(_2,{page:e.getState().pagination.pageIndex+1,pageSize:e.getState().pagination.pageSize,onPageSizeChange:r=>e.setPageSize(r),pageCount:e.getPageCount(),total:e.getRowCount(),isLastPage:!e.getCanNextPage(),onPageChange:r=>e.setPageIndex(r-1)})})})})]})]})},Bce=()=>{const{jobs:i,error:e,isLoading:t}=QD();return t?z.jsx("div",{className:Y1.loadingContainer,children:z.jsx(La,{})}):e?z.jsx("div",{className:Y1.errorContainer,children:z.jsx(xa,{error:!0,title:ve.t("Error loading jobs"),children:e.message||ve.t("An unknown error occurred")})}):z.jsxs(z.Fragment,{children:[z.jsx(Uu,{pageTitle:ve.t("Active jobs"),pageDescription:ve.t("View and manage currently running jobs and their status.")}),z.jsx(hC,{className:Y1.container,children:z.jsx(Fce,{jobs:i||[]})})]})},$ce="_selector_1powy_2",Uce="_selectorWrapper_1powy_6",Vce="_messageWrapper_1powy_10",q0={selector:$ce,selectorWrapper:Uce,messageWrapper:Vce},Gce=({onSelect:i,selected:e,compatibleEvaluationId:t,...r})=>{const{data:n,isLoading:a,isError:c,error:s,isSuccess:h}=tl({queryKey:["backtests","compatible",t],queryFn:()=>t?yl.getCompatibleBacktestsAnalyticsCompatibleBacktestsBacktestIdGet(t):Promise.resolve([]),enabled:t!=null,staleTime:3e5,cacheTime:3e5}),p=de.useRef(i);p.current=i,Ie.useEffect(()=>{e&&t!=null&&h&&!n.some(y=>y.id==(e==null?void 0:e.id))&&p.current(void 0)},[n,t,h]);const m=()=>h&&(n==null?void 0:n.length)===0?z.jsx(X1,{children:ve.t("No compatible evaluations found")}):s?z.jsx(X1,{error:!0,children:s.message??s.toString()}):null;return z.jsx("div",{className:q0.selectorWrapper,children:z.jsx(n5,{available:n??[],selected:e,onSelect:i,disabled:t==null,error:c,loading:a,listMessage:m(),...r,placeholder:ve.t("Select evaluation to compare with")})})},n5=({onSelect:i,selected:e,available:t,listMessage:r,...n})=>{const{availableMap:a,availableList:c}=Ie.useMemo(()=>{const s=new Map(t.map(h=>[h.id.toString(),h]));return e&&!s.has(e.id.toString())&&s.set(e==null?void 0:e.id.toString(),e),{availableMap:s,availableList:Array.from(s.values())}},[t,n.loading,e]);return z.jsx("div",{className:q0.selectorWrapper,children:z.jsxs(il,{className:q0.selector,onChange:({selected:s})=>i(a.get(s)),selected:(e==null?void 0:e.id.toString())||"",clearable:!0,filterable:!0,noMatchText:ve.t("No evaluations found"),...n,prefix:e!=null?n.prefix||ve.t("Evaluation"):void 0,children:[r&&z.jsx("div",{className:q0.messageWrapper,children:r}),c.map(s=>z.jsx(As,{value:s.id.toString(),label:s.name??s.id.toString()},s.id))]})})},Hce="_wrapper_dry7x_2",qce="_compareSelectors_dry7x_9",Wce="_loaderWrapper_dry7x_15",Yce="_loader_dry7x_15",Zce="_selectorRow_dry7x_28",Xce="_selectionToolbar_dry7x_38",Kce="_emptySelection_dry7x_48",Qce="_iconGroup_dry7x_66",Jce="_arrowIcons_dry7x_75",eue="_textGroup_dry7x_92",tue="_footerSlider_dry7x_108",dl={wrapper:Hce,compareSelectors:qce,loaderWrapper:Wce,loader:Yce,selectorRow:Zce,selectionToolbar:Xce,emptySelection:Kce,iconGroup:Qce,arrowIcons:Jce,textGroup:eue,footerSlider:tue},iue=[.1,.25,.5,.75,.9],rue=i=>{const[e,t]=i.data,r=CP(e);return{evaluationEntries:e.map(n=>({...n,modelName:i.evaluation.name||void 0})),actualCases:t.data,splitPeriods:r,evaluation:i.evaluation}},nue=i=>i&&i.evaluation&&Array.isArray(i.data)&&i.data.length===2,sue=i=>!!i.state.data&&nue(i.state.data),aue={splitPeriod:void 0,orgUnits:void 0},oue=(i,{orgUnits:e,splitPeriod:t}=aue)=>{var y;const r=$s(),n=Ie.useMemo(()=>e?e.sort():[],[e]),a=(g,{includeOrgunits:x}={includeOrgunits:!0})=>["evaluation-entry",g,{splitPeriod:t,...x&&{orgUnits:n}}],c=Ie.useCallback(g=>{if(!e||e.length===0)return;const x=new Set(e),v=a(g,{includeOrgunits:!1}),_=r.getQueryCache().find(v,{exact:!1,predicate:C=>{var w;const k=(w=C.queryKey[2])==null?void 0:w.orgUnits;if(sue(C)&&k){const E=new Set(k);return e.every(M=>E.has(M))}return!1}});if(_){const C=_.state.data,k=C.data[0].filter(w=>x.has(w.orgUnit));return{...C,data:[k,C.data[1]]}}},[t,e,r]),s=pz({queries:i.map(g=>({queryKey:a(g.id),queryFn:async()=>{const x=yl.getEvaluationEntriesAnalyticsEvaluationEntryGet(g.id,iue,t,e),v=yl.getActualCasesAnalyticsActualCasesBacktestIdGet(g.id,e);return{data:await Promise.all([x,v]),evaluation:g}},initialData:c(g.id),select:rue,enabled:!!g&&(e?e.length>0:!0),staleTime:60*1e3}))}),h=Ie.useMemo(()=>{const g=s.flatMap(_=>_.data||[]),x=s.flatMap(_=>{var C;return((C=_.data)==null?void 0:C.splitPeriods)||[]});return{viewData:lue(g),splitPeriods:x}},[s]),p=s.some(g=>g.isLoading&&g.isFetching),m=((y=s.find(g=>g.isError))==null?void 0:y.error)||void 0;return{queries:s,combined:h,isLoading:p,error:m}},lue=i=>{const e=i.flatMap(a=>a.evaluationEntries),t=Array.from(new Set(e.map(a=>a.splitPeriod))),r=Array.from(new Set(e.map(a=>a.orgUnit))),n=a=>{const c=a[0],s=a[1],h=a[a.length-2],p=a[a.length-1];return m=>m.quantile===c?"quantile_low":m.quantile===p?"quantile_high":m.quantile===.5?"median":m.quantile===s?"quantile_mid_low":m.quantile===h?"quantile_mid_high":"unknown"};return t.map(a=>({splitPoint:a,evaluation:r.map(c=>({orgUnitName:c,orgUnitId:c,models:i.map(s=>{const h=s.evaluationEntries.filter(x=>x.orgUnit===c&&x.splitPeriod===a),p=s.actualCases.filter(x=>x.ou===c),m=h.map(x=>x.quantile),y=_P(h,n(m)),g=wP(y,p);return{modelName:s.evaluation.name||s.evaluation.modelId,data:g}})}))}))},cue="_help_s6y39_2",uue={help:cue},due=10,hue=({available:i,selected:e,onSelect:t,maxSelections:r=due,...n})=>{const[a,c]=Ie.useState(null),s=a!==null?a:e,{orgUnits:h,selectedOrgUnitIds:p}=Ie.useMemo(()=>{const m=new Map(i.map(v=>[v.id,v])),y=new Set(s);s.forEach(v=>{m.get(v)||m.set(v,{id:v,displayName:v})});const g=Array.from(m.values()),x=g.filter(v=>y.has(v.id)).map(v=>v.id);return{orgUnits:g,selectedOrgUnitIds:x}},[i,s]);return z.jsxs(F_,{prefix:ve.t("Organisation Units"),selected:p,disabled:i.length<1,filterable:!0,filterPlaceholder:ve.t("Search organisation units"),clearable:!0,clearText:ve.t("Clear all organisation units"),noMatchText:ve.t("No organisation units match your search"),onChange:({selected:m},y)=>{y.type==="click"?t({selected:m}):c(m.slice(0,r))},onBlur:()=>{a!=null&&(t({selected:a??[]}),Ie.startTransition(()=>{c(null)}))},inputMaxHeight:"26px",...n,children:[e.length>=r&&z.jsx(X1,{className:uue.help,warning:!0,children:ve.t("You cannot select more than {{max}} organisation units at a time",{max:r})}),h.map(m=>z.jsx(B_,{label:m.displayName,value:m.id},m.id))]})},pue=Bc({baseEvaluation:Ms().optional(),comparisonEvaluation:Pv(Ms()).optional().default([])}),ml={baseEvaluation:"baseEvaluation",comparisonEvaluation:"comparisonEvaluation",splitPeriod:"splitPeriod",orgUnit:"orgUnit"},fue=i=>({baseEvaluation:i.get(ml.baseEvaluation),comparisonEvaluation:i.getAll(ml.comparisonEvaluation)});function mue(i,e){return typeof i=="function"?i(e):i}const s5=(i,e)=>t=>{const r=new URLSearchParams(t),n=mue(e,t.getAll(i));return r.delete(i),n==null||n.forEach(a=>{r.append(i,a)}),r},gue=()=>{const[i,e]=F2(),t=Ie.useMemo(()=>{const s=fue(i),h=pue.safeParse(s);return h.success?h.data:{baseEvalation:void 0,comparisonEvaluation:[]}},[i]),r=Ie.useCallback(s=>{e(h=>{const p=new URLSearchParams(h);return s?p.set(ml.baseEvaluation,s):p.delete(ml.baseEvaluation),p})},[e]),n=Ie.useCallback(s=>{e(s5(ml.comparisonEvaluation,s))},[e]),a=Ie.useCallback(s=>n(s?[s]:[]),[n]),c=t.comparisonEvaluation[0];return{baseEvaluation:t.baseEvaluation,comparisonEvaluations:t.comparisonEvaluation,comparisonEvaluation:c,setBaseEvaluation:r,setComparisonEvaluations:n,setComparisonEvaluation:a}},yue=()=>{const{backtests:i}=$D(),{baseEvaluation:e,comparisonEvaluation:t,setBaseEvaluation:r,setComparisonEvaluation:n}=gue();return{...Ie.useMemo(()=>{if(!i||i.length===0)return{baseEvaluation:void 0,comparisonEvaluation:void 0,comparisonEvaluations:[]};const c=new Map(i.map(s=>[s.id.toString(),s]));return{baseEvaluation:e?c.get(e):void 0,comparisonEvaluation:t?c.get(t):void 0}},[i,e,t]),setBaseEvaluation:r,setComparisonEvaluation:n,evaluations:i}},vue=()=>{const[i,e]=F2(),t=i.get(ml.splitPeriod),r=Ie.useCallback(n=>{e(a=>{const c=new URLSearchParams(a);return n?c.set(ml.splitPeriod,n):c.delete(ml.splitPeriod),c})},[e]);return[t,r]},xue=({initialValue:i}={})=>{const[e,t]=F2(),[r,n]=Ie.useState(!1),a=e.has(ml.orgUnit),c=!r&&i&&!a?i:e.getAll(ml.orgUnit),s=Ie.useCallback(h=>(n(!0),t(s5(ml.orgUnit,h))),[t,n]);return[c,s]},bue=i=>{const{baseEvaluation:e,comparisonEvaluation:t}=i;return tl({queryKey:["backtest-overlap",[e,t]],queryFn:()=>yl.getBacktestOverlapAnalyticsBacktestOverlapBacktestId1BacktestId2Get(e,t),staleTime:60*1e3*5,enabled:!!e&&!!t,select:Ie.useCallback(r=>({...r,splitPeriods:r.splitPeriods.sort()}),[])})},wue=i=>i&&Array.isArray(i.organisationUnits),_ue=i=>!!i.state.data&&wue(i.state.data),Cue=i=>{const e=$s(),t=Ie.useMemo(()=>{const r=new Set(i),n=e.getQueryCache().findAll(["organisationUnits"],{exact:!1}).flatMap(s=>{var h;return _ue(s)?((h=s.state.data)==null?void 0:h.organisationUnits)??[]:[]}).filter(s=>r.has(s.id));if(n.length===0)return;const a=new Map(n.map(s=>[s.id,s]));return i.every(s=>a.has(s))?{organisationUnits:Array.from(a.values())}:void 0},[i,e]);return ef({queryKey:["organisationUnits",i],initialData:t,query:{resource:"organisationUnits",params:{paging:!1,fields:["id","displayName"],filter:`id:in:[${i.join(",")}]`,order:"displayName:asc"}},enabled:i.length>0,select:Ie.useCallback(r=>{if(r.organisationUnits.length!==i.length){const n=new Set(r.organisationUnits.map(c=>c.id)),a=i.filter(c=>!n.has(c)).map(c=>({id:c,displayName:c}));return{organisationUnits:r.organisationUnits.concat(a)}}return r},[i]),cacheTime:1/0,staleTime:1/0})},Tue=({maxSelectedOrgUnits:i=10}={})=>{const{evaluations:e,baseEvaluation:t,comparisonEvaluation:r,setBaseEvaluation:n,setComparisonEvaluation:a}=yue(),c=Ie.useMemo(()=>[t,r].filter(E=>!!E),[t,r]),[s,h]=vue(),p=bue({baseEvaluation:t==null?void 0:t.id,comparisonEvaluation:r==null?void 0:r.id}),m=Ie.useMemo(()=>(p.isSuccess?p.data.splitPeriods:(t==null?void 0:t.splitPeriods)??[]).sort(),[p.data,t==null?void 0:t.splitPeriods]),y=s??m[0],{availableOrgUnitIds:g,availableOrgUnitSet:x}=Ie.useMemo(()=>{let E=p.data?p.data.orgUnits:(t==null?void 0:t.orgUnits)??[];return p.isInitialLoading&&(E=[]),{availableOrgUnitIds:E,availableOrgUnitSet:new Set(E)}},[p.data,t==null?void 0:t.orgUnits]),{data:v}=Cue(g),[_,C]=xue({initialValue:v==null?void 0:v.organisationUnits.map(E=>E.id).slice(0,i)}),k=Ie.useMemo(()=>_.filter(E=>x.has(E)),[_,x]),w=p.isSuccess&&p.data.splitPeriods.length===0;return Ie.useEffect(()=>{y&&m.length>0&&!m.some(E=>E===s)&&h(void 0)},[m,s]),{selectedEvaluations:c,baseEvaluation:t,comparisonEvaluation:r,selectedSplitPeriod:y,selectedOrgUnits:k,availableOrgUnitIds:g,evaluations:e,orgUnits:v==null?void 0:v.organisationUnits,splitPeriods:m,hasNoMatchingSplitPeriods:w,setBaseEvaluation:n,setComparisonEvaluation:a,setSelectedOrgUnits:C,setSelectedSplitPeriod:h}},Sue="_wrapper_mo3m0_1",Eue="_sliderContainer_mo3m0_9",kue="_labelsContainer_mo3m0_13",Mue="_label_mo3m0_13",Aue="_selectedLabelContainer_mo3m0_25",Iue="_selectedLabel_mo3m0_25",Pue="_track_mo3m0_38",Due="_thumb_mo3m0_44",Rue="_mark_mo3m0_56",kc={wrapper:Sue,sliderContainer:Eue,labelsContainer:kue,label:Mue,selectedLabelContainer:Aue,selectedLabel:Iue,track:Pue,thumb:Due,mark:Rue};var a5={},AC={},IC={},tf={};Object.defineProperty(tf,"__esModule",{value:!0});tf.Direction=void 0;var tk;(function(i){i.Right="to right",i.Left="to left",i.Down="to bottom",i.Up="to top"})(tk||(tf.Direction=tk={}));(function(i){var e=Tn&&Tn.__spreadArray||function($,B,R){if(R||arguments.length===2)for(var L=0,G=B.length,F;L<G;L++)(F||!(L in B))&&(F||(F=Array.prototype.slice.call(B,0,L)),F[L]=B[L]);return $.concat(F||Array.prototype.slice.call(B))};Object.defineProperty(i,"__esModule",{value:!0}),i.isIOS=i.useThumbOverlap=i.assertUnreachable=i.voidFn=i.getTrackBackground=i.replaceAt=i.schd=i.translate=i.getClosestThumbIndex=i.translateThumbs=i.getPaddingAndBorder=i.getMargin=i.checkInitialOverlap=i.checkValuesAgainstBoundaries=i.checkBoundaries=i.isVertical=i.relativeValue=i.normalizeValue=i.isStepDivisible=i.isTouchEvent=i.getStepDecimals=void 0;var t=Ie,r=tf,n=function($){var B=$.toString().split(".")[1];return B?B.length:0};i.getStepDecimals=n;function a($){return $.touches&&$.touches.length||$.changedTouches&&$.changedTouches.length}i.isTouchEvent=a;function c($,B,R){var L=(B-$)/R,G=8,F=Number(L.toFixed(G));return parseInt(F.toString(),10)===F}i.isStepDivisible=c;function s($,B,R,L,G,F,j){var q=1e11;if($=Math.round($*q)/q,!F){var W=j[B-1],se=j[B+1];if(W&&W>$)return W;if(se&&se<$)return se}if($>L)return L;if($<R)return R;var fe=Math.floor($*q-R*q)%Math.floor(G*q),ee=Math.floor($*q-Math.abs(fe)),oe=fe===0?$:ee/q,Ce=Math.abs(fe/q)<G/2?oe:oe+G,ge=(0,i.getStepDecimals)(G);return parseFloat(Ce.toFixed(ge))}i.normalizeValue=s;function h($,B,R){return($-B)/(R-B)}i.relativeValue=h;function p($){return $===r.Direction.Up||$===r.Direction.Down}i.isVertical=p;function m($,B,R){if(B>=R)throw new RangeError("min (".concat(B,") is equal/bigger than max (").concat(R,")"));if($<B)throw new RangeError("value (".concat($,") is smaller than min (").concat(B,")"));if($>R)throw new RangeError("value (".concat($,") is bigger than max (").concat(R,")"))}i.checkBoundaries=m;function y($,B,R){return $<B?B:$>R?R:$}i.checkValuesAgainstBoundaries=y;function g($){if(!($.length<2)&&!$.slice(1).every(function(B,R){return $[R]<=B}))throw new RangeError("values={[".concat($,"]} needs to be sorted when allowOverlap={false}"))}i.checkInitialOverlap=g;function x($){var B=window.getComputedStyle($);return{top:parseInt(B["margin-top"],10),bottom:parseInt(B["margin-bottom"],10),left:parseInt(B["margin-left"],10),right:parseInt(B["margin-right"],10)}}i.getMargin=x;function v($){var B=window.getComputedStyle($);return{top:parseInt(B["padding-top"],10)+parseInt(B["border-top-width"],10),bottom:parseInt(B["padding-bottom"],10)+parseInt(B["border-bottom-width"],10),left:parseInt(B["padding-left"],10)+parseInt(B["border-left-width"],10),right:parseInt(B["padding-right"],10)+parseInt(B["border-right-width"],10)}}i.getPaddingAndBorder=v;function _($,B,R){var L=R?-1:1;$.forEach(function(G,F){return k(G,L*B[F].x,B[F].y)})}i.translateThumbs=_;function C($,B,R,L){for(var G=0,F=K($[0],B,R,L),j=1;j<$.length;j++){var q=K($[j],B,R,L);q<F&&(F=q,G=j)}return G}i.getClosestThumbIndex=C;function k($,B,R){$.style.transform="translate(".concat(B,"px, ").concat(R,"px)")}i.translate=k;var w=function($){var B=[],R=null,L=function(){for(var G=[],F=0;F<arguments.length;F++)G[F]=arguments[F];B=G,!R&&(R=requestAnimationFrame(function(){R=null,$.apply(void 0,B)}))};return L};i.schd=w;function E($,B,R){var L=$.slice(0);return L[B]=R,L}i.replaceAt=E;function A($){var B=$.values,R=$.colors,L=$.min,G=$.max,F=$.direction,j=F===void 0?r.Direction.Right:F,q=$.rtl,W=q===void 0?!1:q;W&&j===r.Direction.Right?j=r.Direction.Left:W&&r.Direction.Left&&(j=r.Direction.Right);var se=B.slice(0).sort(function(ee,oe){return ee-oe}).map(function(ee){return(ee-L)/(G-L)*100}),fe=se.reduce(function(ee,oe,Ce){return"".concat(ee,", ").concat(R[Ce]," ").concat(oe,"%, ").concat(R[Ce+1]," ").concat(oe,"%")},"");return"linear-gradient(".concat(j,", ").concat(R[0]," 0%").concat(fe,", ").concat(R[R.length-1]," 100%)")}i.getTrackBackground=A;function M(){}i.voidFn=M;function S($){throw new Error("Didn't expect to get here")}i.assertUnreachable=S;var N=function($,B,R,L,G){G===void 0&&(G=function(j){return j});var F=Math.ceil(e([$],Array.from($.children),!0).reduce(function(j,q){var W=Math.ceil(q.getBoundingClientRect().width);if(q.innerText&&q.innerText.includes(R)&&q.childElementCount===0){var se=q.cloneNode(!0);se.innerHTML=G(B.toFixed(L)),se.style.visibility="hidden",document.body.appendChild(se),W=Math.ceil(se.getBoundingClientRect().width),document.body.removeChild(se)}return W>j?W:j},$.getBoundingClientRect().width));return F},Y=function($,B,R,L,G,F,j){j===void 0&&(j=function(se){return se});var q=[],W=function(se){var fe=N(R[se],L[se],G,F,j),ee=B[se].x;B.forEach(function(oe,Ce){var ge=oe.x,Ee=N(R[Ce],L[Ce],G,F,j);se!==Ce&&(ee>=ge&&ee<=ge+Ee||ee+fe>=ge&&ee+fe<=ge+Ee)&&(q.includes(Ce)||(q.push(se),q.push(Ce),q=e(e([],q,!0),[se,Ce],!1),W(Ce)))})};return W($),Array.from(new Set(q.sort()))},Z=function($,B,R,L,G,F){L===void 0&&(L=.1),G===void 0&&(G=" - "),F===void 0&&(F=function(Ce){return Ce});var j=(0,i.getStepDecimals)(L),q=(0,t.useState)({}),W=q[0],se=q[1],fe=(0,t.useState)(F(B[R].toFixed(j))),ee=fe[0],oe=fe[1];return(0,t.useEffect)(function(){if($){var Ce=$.getThumbs();if(Ce.length<1)return;var ge={},Ee=$.getOffsets(),J=Y(R,Ee,Ce,B,G,j,F),ie=F(B[R].toFixed(j));if(J.length){var le=J.reduce(function(xe,_e,Ne,ke){return xe.length?e(e([],xe,!0),[Ee[ke[Ne]].x],!1):[Ee[ke[Ne]].x]},[]);if(Math.min.apply(Math,le)===Ee[R].x){var be=[];J.forEach(function(xe){be.push(B[xe].toFixed(j))}),ie=Array.from(new Set(be.sort(function(xe,_e){return parseFloat(xe)-parseFloat(_e)}))).map(F).join(G);var te=Math.min.apply(Math,le),ae=Math.max.apply(Math,le),ce=Ce[J[le.indexOf(ae)]].getBoundingClientRect().width;ge.left="".concat(Math.abs(te-(ae+ce))/2,"px"),ge.transform="translate(-50%, 0)"}else ge.visibility="hidden"}oe(ie),se(ge)}},[$,B]),[ee,W]};i.useThumbOverlap=Z;function K($,B,R,L){var G=$.getBoundingClientRect(),F=G.left,j=G.top,q=G.width,W=G.height;return p(L)?Math.abs(R-(j+W/2)):Math.abs(B-(F+q/2))}var U=function(){var $,B=(($=navigator.userAgentData)===null||$===void 0?void 0:$.platform)||navigator.platform;return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(B)||navigator.userAgent.includes("Mac")&&"ontouchend"in document};i.isIOS=U})(IC);var Lue=Tn&&Tn.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Nue=Tn&&Tn.__createBinding||(Object.create?function(i,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,r,n)}:function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]}),zue=Tn&&Tn.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),Oue=Tn&&Tn.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&Nue(e,i,t);return zue(e,i),e},ik=Tn&&Tn.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))};Object.defineProperty(AC,"__esModule",{value:!0});var w0=Oue(Ie),Ur=IC,Ns=tf,jue=["ArrowRight","ArrowUp","k","PageUp"],Fue=["ArrowLeft","ArrowDown","j","PageDown"],Bue=function(i){Lue(e,i);function e(t){var r=i.call(this,t)||this;if(r.trackRef=w0.createRef(),r.thumbRefs=[],r.state={draggedTrackPos:[-1,-1],draggedThumbIndex:-1,thumbZIndexes:new Array(r.props.values.length).fill(0).map(function(n,a){return a}),isChanged:!1,markOffsets:[]},r.getOffsets=function(){var n=r.props,a=n.direction,c=n.values,s=n.min,h=n.max,p=r.trackRef.current;if(!p)return console.warn("No track element found."),[];var m=p.getBoundingClientRect(),y=(0,Ur.getPaddingAndBorder)(p);return r.getThumbs().map(function(g,x){var v={x:0,y:0},_=g.getBoundingClientRect(),C=(0,Ur.getMargin)(g);switch(a){case Ns.Direction.Right:return v.x=(C.left+y.left)*-1,v.y=((_.height-m.height)/2+y.top)*-1,v.x+=m.width*(0,Ur.relativeValue)(c[x],s,h)-_.width/2,v;case Ns.Direction.Left:return v.x=(C.right+y.right)*-1,v.y=((_.height-m.height)/2+y.top)*-1,v.x+=m.width-m.width*(0,Ur.relativeValue)(c[x],s,h)-_.width/2,v;case Ns.Direction.Up:return v.x=((_.width-m.width)/2+C.left+y.left)*-1,v.y=-y.left,v.y+=m.height-m.height*(0,Ur.relativeValue)(c[x],s,h)-_.height/2,v;case Ns.Direction.Down:return v.x=((_.width-m.width)/2+C.left+y.left)*-1,v.y=-y.left,v.y+=m.height*(0,Ur.relativeValue)(c[x],s,h)-_.height/2,v;default:return(0,Ur.assertUnreachable)(a)}})},r.getThumbs=function(){return r.trackRef&&r.trackRef.current?Array.from(r.trackRef.current.children).filter(function(n){return n.hasAttribute("aria-valuenow")}):(console.warn("No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?"),[])},r.getTargetIndex=function(n){return r.getThumbs().findIndex(function(a){return a===n.target||a.contains(n.target)})},r.addTouchEvents=function(n){document.addEventListener("touchmove",r.schdOnTouchMove,{passive:!1}),document.addEventListener("touchend",r.schdOnEnd,{passive:!1}),document.addEventListener("touchcancel",r.schdOnEnd,{passive:!1})},r.addMouseEvents=function(n){document.addEventListener("mousemove",r.schdOnMouseMove),document.addEventListener("mouseup",r.schdOnEnd)},r.onMouseDownTrack=function(n){var a;if(!(n.button!==0||(0,Ur.isIOS)()))if(n.persist(),n.preventDefault(),r.addMouseEvents(n.nativeEvent),r.props.values.length>1&&r.props.draggableTrack){if(r.thumbRefs.some(function(s){var h;return(h=s.current)===null||h===void 0?void 0:h.contains(n.target)}))return;r.setState({draggedTrackPos:[n.clientX,n.clientY]},function(){return r.onMove(n.clientX,n.clientY)})}else{var c=(0,Ur.getClosestThumbIndex)(r.thumbRefs.map(function(s){return s.current}),n.clientX,n.clientY,r.props.direction);(a=r.thumbRefs[c].current)===null||a===void 0||a.focus(),r.setState({draggedThumbIndex:c},function(){return r.onMove(n.clientX,n.clientY)})}},r.onResize=function(){(0,Ur.translateThumbs)(r.getThumbs(),r.getOffsets(),r.props.rtl),r.calculateMarkOffsets()},r.onTouchStartTrack=function(n){var a;if(n.persist(),r.addTouchEvents(n.nativeEvent),r.props.values.length>1&&r.props.draggableTrack){if(r.thumbRefs.some(function(s){var h;return(h=s.current)===null||h===void 0?void 0:h.contains(n.target)}))return;r.setState({draggedTrackPos:[n.touches[0].clientX,n.touches[0].clientY]},function(){return r.onMove(n.touches[0].clientX,n.touches[0].clientY)})}else{var c=(0,Ur.getClosestThumbIndex)(r.thumbRefs.map(function(s){return s.current}),n.touches[0].clientX,n.touches[0].clientY,r.props.direction);(a=r.thumbRefs[c].current)===null||a===void 0||a.focus(),r.setState({draggedThumbIndex:c},function(){return r.onMove(n.touches[0].clientX,n.touches[0].clientY)})}},r.onMouseOrTouchStart=function(n){if(!r.props.disabled){var a=(0,Ur.isTouchEvent)(n);if(!(!a&&n.button!==0)){var c=r.getTargetIndex(n);c!==-1&&(a?r.addTouchEvents(n):r.addMouseEvents(n),r.setState({draggedThumbIndex:c,thumbZIndexes:r.state.thumbZIndexes.map(function(s,h){return h===c?Math.max.apply(Math,r.state.thumbZIndexes):s<=r.state.thumbZIndexes[c]?s:s-1})}))}}},r.onMouseMove=function(n){n.preventDefault(),r.onMove(n.clientX,n.clientY)},r.onTouchMove=function(n){n.preventDefault(),r.onMove(n.touches[0].clientX,n.touches[0].clientY)},r.onKeyDown=function(n){var a=r.props,c=a.values,s=a.onChange,h=a.step,p=a.rtl,m=a.direction,y=r.state.isChanged,g=r.getTargetIndex(n.nativeEvent),x=p||m===Ns.Direction.Left||m===Ns.Direction.Down?-1:1;g!==-1&&(jue.includes(n.key)?(n.preventDefault(),r.setState({draggedThumbIndex:g,isChanged:!0}),s((0,Ur.replaceAt)(c,g,r.normalizeValue(c[g]+x*(n.key==="PageUp"?h*10:h),g)))):Fue.includes(n.key)?(n.preventDefault(),r.setState({draggedThumbIndex:g,isChanged:!0}),s((0,Ur.replaceAt)(c,g,r.normalizeValue(c[g]-x*(n.key==="PageDown"?h*10:h),g)))):n.key==="Tab"?r.setState({draggedThumbIndex:-1},function(){y&&r.fireOnFinalChange()}):y&&r.fireOnFinalChange())},r.onKeyUp=function(n){var a=r.state.isChanged;r.setState({draggedThumbIndex:-1},function(){a&&r.fireOnFinalChange()})},r.onMove=function(n,a){var c=r.state,s=c.draggedThumbIndex,h=c.draggedTrackPos,p=r.props,m=p.direction,y=p.min,g=p.max,x=p.onChange,v=p.values,_=p.step,C=p.rtl;if(s===-1&&h[0]===-1&&h[1]===-1)return null;var k=r.trackRef.current;if(!k)return null;var w=k.getBoundingClientRect(),E=(0,Ur.isVertical)(m)?w.height:w.width;if(h[0]!==-1&&h[1]!==-1){var A=n-h[0],M=a-h[1],S=0;switch(m){case Ns.Direction.Right:case Ns.Direction.Left:S=A/E*(g-y);break;case Ns.Direction.Down:case Ns.Direction.Up:S=M/E*(g-y);break;default:(0,Ur.assertUnreachable)(m)}if(C&&(S*=-1),Math.abs(S)>=_/2){for(var N=0;N<r.thumbRefs.length;N++){if(v[N]===g&&Math.sign(S)===1||v[N]===y&&Math.sign(S)===-1)return;var Y=v[N]+S;Y>g?S=g-v[N]:Y<y&&(S=y-v[N])}for(var Z=v.slice(0),N=0;N<r.thumbRefs.length;N++)Z=(0,Ur.replaceAt)(Z,N,r.normalizeValue(v[N]+S,N));r.setState({draggedTrackPos:[n,a]}),x(Z)}}else{var K=0;switch(m){case Ns.Direction.Right:K=(n-w.left)/E*(g-y)+y;break;case Ns.Direction.Left:K=(E-(n-w.left))/E*(g-y)+y;break;case Ns.Direction.Down:K=(a-w.top)/E*(g-y)+y;break;case Ns.Direction.Up:K=(E-(a-w.top))/E*(g-y)+y;break;default:(0,Ur.assertUnreachable)(m)}C&&(K=g+y-K),Math.abs(v[s]-K)>=_/2&&x((0,Ur.replaceAt)(v,s,r.normalizeValue(K,s)))}},r.normalizeValue=function(n,a){var c=r.props,s=c.min,h=c.max,p=c.step,m=c.allowOverlap,y=c.values;return(0,Ur.normalizeValue)(n,a,s,h,p,m,y)},r.onEnd=function(n){if(n.preventDefault(),document.removeEventListener("mousemove",r.schdOnMouseMove),document.removeEventListener("touchmove",r.schdOnTouchMove),document.removeEventListener("mouseup",r.schdOnEnd),document.removeEventListener("touchend",r.schdOnEnd),document.removeEventListener("touchcancel",r.schdOnEnd),r.state.draggedThumbIndex===-1&&r.state.draggedTrackPos[0]===-1&&r.state.draggedTrackPos[1]===-1)return null;r.setState({draggedThumbIndex:-1,draggedTrackPos:[-1,-1]},function(){r.fireOnFinalChange()})},r.fireOnFinalChange=function(){r.setState({isChanged:!1});var n=r.props,a=n.onFinalChange,c=n.values;a&&a(c)},r.updateMarkRefs=function(n){if(!n.renderMark){r.numOfMarks=void 0,r.markRefs=void 0;return}r.numOfMarks=(n.max-n.min)/r.props.step,r.markRefs=[];for(var a=0;a<r.numOfMarks+1;a++)r.markRefs[a]=w0.createRef()},r.calculateMarkOffsets=function(){if(!(!r.props.renderMark||!r.trackRef||!r.numOfMarks||!r.markRefs||r.trackRef.current===null)){for(var n=window.getComputedStyle(r.trackRef.current),a=parseInt(n.width,10),c=parseInt(n.height,10),s=parseInt(n.paddingLeft,10),h=parseInt(n.paddingTop,10),p=[],m=0;m<r.numOfMarks+1;m++){var y=9999,g=9999;if(r.markRefs[m].current){var x=r.markRefs[m].current.getBoundingClientRect();y=x.height,g=x.width}r.props.direction===Ns.Direction.Left||r.props.direction===Ns.Direction.Right?p.push([Math.round(a/r.numOfMarks*m+s-g/2),-Math.round((y-c)/2)]):p.push([Math.round(c/r.numOfMarks*m+h-y/2),-Math.round((g-a)/2)])}r.setState({markOffsets:p})}},t.step===0)throw new Error('"step" property should be a positive number');return r.schdOnMouseMove=(0,Ur.schd)(r.onMouseMove),r.schdOnTouchMove=(0,Ur.schd)(r.onTouchMove),r.schdOnEnd=(0,Ur.schd)(r.onEnd),r.thumbRefs=t.values.map(function(){return w0.createRef()}),r.updateMarkRefs(t),r}return e.prototype.componentDidMount=function(){var t=this,r=this.props,n=r.values,a=r.min,c=r.step;this.resizeObserver=window.ResizeObserver?new window.ResizeObserver(this.onResize):{observe:function(){return window.addEventListener("resize",t.onResize)},unobserve:function(){return window.removeEventListener("resize",t.onResize)}},document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),!this.props.allowOverlap&&(0,Ur.checkInitialOverlap)(this.props.values),this.props.values.forEach(function(s){return(0,Ur.checkBoundaries)(s,t.props.min,t.props.max)}),this.resizeObserver.observe(this.trackRef.current),(0,Ur.translateThumbs)(this.getThumbs(),this.getOffsets(),this.props.rtl),this.calculateMarkOffsets(),n.forEach(function(s){(0,Ur.isStepDivisible)(a,s,c)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")})},e.prototype.componentDidUpdate=function(t,r){var n=this.props,a=n.max,c=n.min,s=n.step,h=n.values,p=n.rtl;(t.max!==a||t.min!==c||t.step!==s)&&this.updateMarkRefs(this.props),(0,Ur.translateThumbs)(this.getThumbs(),this.getOffsets(),p),(t.max!==a||t.min!==c||t.step!==s||r.markOffsets.length!==this.state.markOffsets.length)&&(this.calculateMarkOffsets(),h.forEach(function(m){(0,Ur.isStepDivisible)(c,m,s)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")}))},e.prototype.componentWillUnmount=function(){var t={passive:!1};document.removeEventListener("mousedown",this.onMouseOrTouchStart,t),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchend",this.schdOnEnd),this.resizeObserver.unobserve(this.trackRef.current)},e.prototype.render=function(){var t=this,r=this.props,n=r.label,a=r.labelledBy,c=r.renderTrack,s=r.renderThumb,h=r.renderMark,p=h===void 0?function(){return null}:h,m=r.values,y=r.min,g=r.max,x=r.allowOverlap,v=r.disabled,_=this.state,C=_.draggedThumbIndex,k=_.thumbZIndexes,w=_.markOffsets;return c({props:{style:{transform:"scale(1)",cursor:C>-1?"grabbing":this.props.draggableTrack?(0,Ur.isVertical)(this.props.direction)?"ns-resize":"ew-resize":m.length===1&&!v?"pointer":"inherit"},onMouseDown:v?Ur.voidFn:this.onMouseDownTrack,onTouchStart:v?Ur.voidFn:this.onTouchStartTrack,ref:this.trackRef},isDragged:this.state.draggedThumbIndex>-1,disabled:v,children:ik(ik([],w.map(function(E,A,M){return p({props:{style:t.props.direction===Ns.Direction.Left||t.props.direction===Ns.Direction.Right?{position:"absolute",left:"".concat(E[0],"px"),marginTop:"".concat(E[1],"px")}:{position:"absolute",top:"".concat(E[0],"px"),marginLeft:"".concat(E[1],"px")},key:"mark".concat(A),ref:t.markRefs[A]},index:A})}),!0),m.map(function(E,A){var M=t.state.draggedThumbIndex===A;return s({index:A,value:E,isDragged:M,props:{style:{position:"absolute",zIndex:k[A],cursor:v?"inherit":M?"grabbing":"grab",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},key:A,tabIndex:v?void 0:0,"aria-valuemax":x?g:m[A+1]||g,"aria-valuemin":x?y:m[A-1]||y,"aria-valuenow":E,draggable:!1,ref:t.thumbRefs[A],"aria-label":n,"aria-labelledby":a,role:"slider",onKeyDown:v?Ur.voidFn:t.onKeyDown,onKeyUp:v?Ur.voidFn:t.onKeyUp}})}),!0)})},e.defaultProps={label:"Accessibility label",labelledBy:null,step:1,direction:Ns.Direction.Right,rtl:!1,disabled:!1,allowOverlap:!1,draggableTrack:!1,min:0,max:100},e}(w0.Component);AC.default=Bue;(function(i){var e=Tn&&Tn.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(i,"__esModule",{value:!0}),i.checkValuesAgainstBoundaries=i.relativeValue=i.useThumbOverlap=i.Direction=i.getTrackBackground=i.Range=void 0;var t=e(AC);i.Range=t.default;var r=IC;Object.defineProperty(i,"getTrackBackground",{enumerable:!0,get:function(){return r.getTrackBackground}}),Object.defineProperty(i,"useThumbOverlap",{enumerable:!0,get:function(){return r.useThumbOverlap}}),Object.defineProperty(i,"relativeValue",{enumerable:!0,get:function(){return r.relativeValue}}),Object.defineProperty(i,"checkValuesAgainstBoundaries",{enumerable:!0,get:function(){return r.checkValuesAgainstBoundaries}});var n=tf;Object.defineProperty(i,"Direction",{enumerable:!0,get:function(){return n.Direction}})})(a5);const $ue=(i,e,t)=>Math.max(e,Math.min(i,t)),Uue=({splitPeriods:i,selectedSplitPeriod:e,onChange:t,periods:r=[],splitPeriodLength:n=3})=>{const a=i[i.length-1],c=_=>{const C=$ue(_[0],0,i.length-1),k=i[C]??a;return t(k)},s=r.findIndex(_=>_===a),h=s<0?r.length-n:s,p=i.concat(r.slice(h+1,h+n)).concat("LAST_PERIOD"),m=Math.floor(p.length/2),y=[p[0],p[m],p[p.length-2]].filter((_,C,k)=>k.indexOf(_)===C).map(_=>Hm(_)),g=p.indexOf(e),x=g+n-1,v=()=>{const _=p.length-1,C=g*(100/_),k=(g+n)*(100/_);return`linear-gradient(
            to right,
            var(--colors-grey300) ${C}%,
            var(--colors-blue300) ${C}%,
            var(--colors-blue300) ${k}%,
            var(--colors-grey300) ${k}%
            
        )`};return Ie.useEffect(()=>{const _=C=>{if(C.defaultPrevented)return;const k=g,w=new Set(["j","J"]),E=new Set(["k","K"]);w.has(C.key)?c([k-1]):E.has(C.key)&&c([k+1])};return window.addEventListener("keydown",_),()=>{window.removeEventListener("keydown",_)}},[g,i,t]),z.jsxs("div",{className:kc.wrapper,children:[z.jsxs("div",{className:kc.selectedLabelContainer,children:[z.jsx(Da,{htmlFor:"splitPeriodSlider",children:ve.t("Split period")}),z.jsx("span",{className:kc.selectedLabel,children:`${Hm(e)} - ${Hm(p[x])}`})]}),z.jsx("div",{className:kc.sliderContainer,children:z.jsx(a5.Range,{labelledBy:"splitPeriodSlider",min:0,max:p.length-1,values:[g],renderThumb:({props:_})=>Ie.createElement("div",{..._,key:_.key,className:kc.thumb},z.jsx("svg",{width:"100%",height:"auto",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:z.jsx("path",{d:"M7 10l5 5 5-5H7z"})})),renderTrack:({props:_,children:C})=>z.jsx("div",{..._,style:{..._.style,background:v()},className:kc.track,children:C}),onChange:c,renderMark:({props:_,index:C})=>C>=i.length?null:Ie.createElement("div",{..._,key:_.key,className:kc.mark})})}),z.jsx("div",{className:kc.labelsContainer,children:y.map(_=>z.jsx("span",{className:kc.label,children:_},_))})]})},rk=10,Vue=()=>{const i=vo(),e=Ie.useRef(document.getElementById(BD)),{selectedEvaluations:t,baseEvaluation:r,comparisonEvaluation:n,evaluations:a,orgUnits:c,selectedOrgUnits:s,selectedSplitPeriod:h,splitPeriods:p,hasNoMatchingSplitPeriods:m,setSelectedOrgUnits:y,setBaseEvaluation:g,setComparisonEvaluation:x,setSelectedSplitPeriod:v}=Tue({maxSelectedOrgUnits:rk}),{combined:_,isLoading:C,error:k}=oue(t,{orgUnits:s}),{dataForSplitPeriod:w,periods:E}=Ie.useMemo(()=>{var S;const A=_.viewData.filter(N=>N.splitPoint===h).flatMap(N=>N.evaluation.map(Y=>{var Z;return{...Y,orgUnitName:((Z=c==null?void 0:c.find(K=>K.id===Y.orgUnitId))==null?void 0:Z.displayName)??Y.orgUnitId}})).sort((N,Y)=>N.orgUnitName.localeCompare(Y.orgUnitName)),M=((S=A[0])==null?void 0:S.models[0].data.periods)??[];return{dataForSplitPeriod:A,periods:M}},[_.viewData,h,c]);return z.jsxs("div",{className:dl.wrapper,children:[z.jsxs("div",{className:dl.selectionToolbar,children:[z.jsx(Uu,{pageTitle:ve.t("Compare evaluations"),pageDescription:ve.t("Compare evaluations to assess model, co-variates and data performance.")}),z.jsx("div",{children:z.jsx(Ti,{small:!0,icon:z.jsx(_g,{}),onClick:()=>{i("/evaluate")},children:ve.t("Back to evaluations")})}),z.jsxs("div",{className:dl.compareSelectors,children:[z.jsx(n5,{onSelect:A=>{g(A==null?void 0:A.id.toString())},selected:r,available:a??[],loading:a===void 0,placeholder:ve.t("Select base evaluation")}),z.jsx(Gce,{onSelect:A=>{x(A==null?void 0:A.id.toString())},selected:n,compatibleEvaluationId:r==null?void 0:r.id})]}),z.jsx("div",{className:dl.selectorRow,children:z.jsx(hue,{prefix:ve.t("Organisation Units"),selected:s,disabled:!c,onSelect:({selected:A})=>y(A),available:c??[],inputMaxHeight:"52px",maxSelections:rk})}),C&&z.jsx("div",{className:dl.loaderWrapper,children:z.jsx(La,{small:!0,className:dl.loader})})]}),m&&z.jsx(xa,{warning:!0,children:ve.t("Selected evaluations do not have any split periods in common. Please select evaluations with overlapping split periods.")}),!!k&&z.jsx(xa,{title:ve.t("An error occurred while fetching chart data "),error:!0,children:k.message}),p.length>0&&E.length>0&&z.jsx("div",{className:dl.footerSlider,children:z.jsx(Uue,{splitPeriods:p,selectedSplitPeriod:h,onChange:v,periods:E})}),z.jsx("div",{children:_.viewData.length>0&&z.jsx(nD,{virtuosoProps:{customScrollParent:e.current},useVirtuoso:!0,evaluationPerOrgUnits:w,nameLabel:ve.t("Evaluation:",{nsSeparator:"~~"})})}),t.length===0&&z.jsx(Gue,{})]})},Gue=()=>z.jsxs("div",{className:dl.emptySelection,children:[z.jsxs("div",{className:dl.iconGroup,children:[z.jsx(Ak,{}),z.jsxs("div",{className:dl.arrowIcons,children:[z.jsx(Fv,{}),z.jsx(_g,{})]}),z.jsx(Ik,{})]}),z.jsxs("div",{className:dl.textGroup,children:[z.jsx("p",{children:ve.t(`Select two evaluations to compare their results. The
                    selected evaluations must be compatible.`)}),z.jsx("p",{children:ve.t("Compatible evaluations have overlapping organisation units and split periods.")})]})]}),Hue=()=>z.jsx(Vue,{}),que="_container_nebz9_1",Wue="_content_nebz9_8",Yue="_title_nebz9_15",Zue="_text_nebz9_24",Xue="_link_nebz9_31",Cm={container:que,content:Wue,title:Yue,text:Zue,link:Xue},Kue=()=>z.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[z.jsx("path",{d:"M32.1162 60.999C32.6683 60.9865 33.1261 61.4235 33.1387 61.9756C33.1512 62.5276 32.7141 62.9853 32.1621 62.998C32.1083 62.9993 32.0541 63 32 63C31.9459 63 31.8917 62.9993 31.8379 62.998C31.2859 62.9853 30.8488 62.5276 30.8613 61.9756C30.8739 61.4235 31.3317 60.9865 31.8838 60.999C31.9224 60.9999 31.9611 61 32 61C32.0389 61 32.0776 60.9999 32.1162 60.999ZM26.9697 59.4199C27.3443 59.0624 27.9243 59.0533 28.3096 59.3828L28.3838 59.4531L28.5469 59.6162L28.6172 59.6904C28.9467 60.0757 28.9376 60.6557 28.5801 61.0303C28.2225 61.4047 27.6432 61.4411 27.2432 61.1299L27.166 61.0625L26.9375 60.834L26.8701 60.7568C26.5589 60.3568 26.5953 59.7775 26.9697 59.4199ZM35.6904 59.3828C36.0757 59.0533 36.6557 59.0624 37.0303 59.4199C37.4297 59.8014 37.4439 60.4346 37.0625 60.834L36.834 61.0625L36.7568 61.1299C36.3568 61.4411 35.7775 61.4047 35.4199 61.0303C35.0386 60.6309 35.0538 59.9976 35.4531 59.6162L35.6162 59.4531L35.6904 59.3828ZM25 56C25 55.9459 25.0007 55.8917 25.002 55.8379C25.0147 55.2859 25.4724 54.8488 26.0244 54.8613C26.5765 54.8739 27.0135 55.3317 27.001 55.8838C27.0001 55.9224 27 55.9611 27 56C27 56.0389 27.0001 56.0776 27.001 56.1162L26.998 56.2188C26.9582 56.7239 26.5419 57.1269 26.0244 57.1387C25.4724 57.1512 25.0147 56.7141 25.002 56.1621L25 56ZM38.998 56.1621C38.9853 56.7141 38.5276 57.1512 37.9756 57.1387C37.4235 57.1261 36.9865 56.6683 36.999 56.1162L38.998 56.1621ZM37 56C37 55.9611 36.9999 55.9224 36.999 55.8838L38.998 55.8379C38.9993 55.8917 39 55.9459 39 56C39 56.0541 38.9993 56.1083 38.998 56.1621L36.999 56.1162C36.9999 56.0776 37 56.0389 37 56ZM37.9756 54.8613C38.5276 54.8488 38.9853 55.2859 38.998 55.8379L36.999 55.8838C36.9865 55.3317 37.4235 54.8739 37.9756 54.8613ZM27.2432 50.8701C27.6432 50.5589 28.2225 50.5953 28.5801 50.9697C28.9614 51.3691 28.9462 52.0024 28.5469 52.3838L28.3838 52.5469L28.3096 52.6172C27.9243 52.9467 27.3443 52.9376 26.9697 52.5801C26.5703 52.1986 26.5561 51.5654 26.9375 51.166L27.166 50.9375L27.2432 50.8701ZM35.4199 50.9697C35.7775 50.5953 36.3568 50.5589 36.7568 50.8701L36.834 50.9375L37.0625 51.166L37.1299 51.2432C37.4411 51.6432 37.4047 52.2225 37.0303 52.5801C36.6557 52.9376 36.0757 52.9467 35.6904 52.6172L35.6162 52.5469L35.4531 52.3838L35.3828 52.3096C35.0533 51.9243 35.0624 51.3443 35.4199 50.9697ZM32.1621 49.002C32.7141 49.0147 33.1512 49.4724 33.1387 50.0244C33.1261 50.5765 32.6683 51.0135 32.1162 51.001C32.0776 51.0001 32.0389 51 32 51C31.9611 51 31.9224 51.0001 31.8838 51.001L31.7812 50.998C31.2761 50.9582 30.8731 50.5419 30.8613 50.0244C30.8488 49.4724 31.2859 49.0147 31.8379 49.002L32 49C32.0541 49 32.1083 49.0007 32.1621 49.002Z",fill:"#6C7787"}),z.jsx("path",{d:"M56.1162 36.999C56.6683 36.9865 57.1261 37.4235 57.1387 37.9756C57.1512 38.5276 56.7141 38.9853 56.1621 38.998C56.1083 38.9993 56.0541 39 56 39C55.9459 39 55.8917 38.9993 55.8379 38.998C55.2859 38.9853 54.8488 38.5276 54.8613 37.9756C54.8739 37.4235 55.3317 36.9865 55.8838 36.999C55.9224 36.9999 55.9611 37 56 37C56.0389 37 56.0776 36.9999 56.1162 36.999ZM50.9697 35.4199C51.3443 35.0624 51.9243 35.0533 52.3096 35.3828L52.3838 35.4531L52.5469 35.6162L52.6172 35.6904C52.9467 36.0757 52.9376 36.6557 52.5801 37.0303C52.2225 37.4047 51.6432 37.4411 51.2432 37.1299L51.166 37.0625L50.9375 36.834L50.8701 36.7568C50.5589 36.3568 50.5953 35.7775 50.9697 35.4199ZM59.6904 35.3828C60.0757 35.0533 60.6557 35.0624 61.0303 35.4199C61.4297 35.8014 61.4439 36.4346 61.0625 36.834L60.834 37.0625L60.7568 37.1299C60.3568 37.4411 59.7775 37.4047 59.4199 37.0303C59.0386 36.6309 59.0538 35.9976 59.4531 35.6162L59.6162 35.4531L59.6904 35.3828ZM49 32C49 31.9459 49.0007 31.8917 49.002 31.8379C49.0147 31.2859 49.4724 30.8488 50.0244 30.8613C50.5765 30.8739 51.0135 31.3317 51.001 31.8838C51.0001 31.9224 51 31.9611 51 32C51 32.0389 51.0001 32.0776 51.001 32.1162L50.998 32.2188C50.9582 32.7239 50.5419 33.1269 50.0244 33.1387C49.4724 33.1512 49.0147 32.7141 49.002 32.1621L49 32ZM62.998 32.1621C62.9853 32.7141 62.5276 33.1512 61.9756 33.1387C61.4235 33.1261 60.9865 32.6683 60.999 32.1162L62.998 32.1621ZM61 32C61 31.9611 60.9999 31.9224 60.999 31.8838L62.998 31.8379C62.9993 31.8917 63 31.9459 63 32C63 32.0541 62.9993 32.1083 62.998 32.1621L60.999 32.1162C60.9999 32.0776 61 32.0389 61 32ZM61.9756 30.8613C62.5276 30.8488 62.9853 31.2859 62.998 31.8379L60.999 31.8838C60.9865 31.3317 61.4235 30.8739 61.9756 30.8613ZM51.2432 26.8701C51.6432 26.5589 52.2225 26.5953 52.5801 26.9697C52.9614 27.3691 52.9462 28.0024 52.5469 28.3838L52.3838 28.5469L52.3096 28.6172C51.9243 28.9467 51.3443 28.9376 50.9697 28.5801C50.5703 28.1986 50.5561 27.5654 50.9375 27.166L51.166 26.9375L51.2432 26.8701ZM59.4199 26.9697C59.7775 26.5953 60.3568 26.5589 60.7568 26.8701L60.834 26.9375L61.0625 27.166L61.1299 27.2432C61.4411 27.6432 61.4047 28.2225 61.0303 28.5801C60.6557 28.9376 60.0757 28.9467 59.6904 28.6172L59.6162 28.5469L59.4531 28.3838L59.3828 28.3096C59.0533 27.9243 59.0624 27.3443 59.4199 26.9697ZM56.1621 25.002C56.7141 25.0147 57.1512 25.4724 57.1387 26.0244C57.1261 26.5765 56.6683 27.0135 56.1162 27.001C56.0776 27.0001 56.0389 27 56 27C55.9611 27 55.9224 27.0001 55.8838 27.001L55.7812 26.998C55.2761 26.9582 54.8731 26.5419 54.8613 26.0244C54.8488 25.4724 55.2859 25.0147 55.8379 25.002L56 25C56.0541 25 56.1083 25.0007 56.1621 25.002Z",fill:"#6C7787"}),z.jsx("path",{d:"M13 32C13 29.2386 10.7614 27 8 27C5.23858 27 3 29.2386 3 32C3 34.7614 5.23858 37 8 37C10.7614 37 13 34.7614 13 32ZM15 32C15 35.866 11.866 39 8 39C4.13401 39 1 35.866 1 32C1 28.134 4.13401 25 8 25C11.866 25 15 28.134 15 32Z",fill:"#404B5A"}),z.jsx("path",{d:"M13 56C13 53.2386 10.7614 51 8 51C5.23858 51 3 53.2386 3 56C3 58.7614 5.23858 61 8 61C10.7614 61 13 58.7614 13 56ZM15 56C15 59.866 11.866 63 8 63C4.13401 63 1 59.866 1 56C1 52.134 4.13401 49 8 49C11.866 49 15 52.134 15 56Z",fill:"#404B5A"}),z.jsx("path",{d:"M56.1162 60.999C56.6683 60.9865 57.1261 61.4235 57.1387 61.9756C57.1512 62.5276 56.7141 62.9853 56.1621 62.998C56.1083 62.9993 56.0541 63 56 63C55.9459 63 55.8917 62.9993 55.8379 62.998C55.2859 62.9853 54.8488 62.5276 54.8613 61.9756C54.8739 61.4235 55.3317 60.9865 55.8838 60.999C55.9224 60.9999 55.9611 61 56 61C56.0389 61 56.0776 60.9999 56.1162 60.999ZM50.9697 59.4199C51.3443 59.0624 51.9243 59.0533 52.3096 59.3828L52.3838 59.4531L52.5469 59.6162L52.6172 59.6904C52.9467 60.0757 52.9376 60.6557 52.5801 61.0303C52.2225 61.4047 51.6432 61.4411 51.2432 61.1299L51.166 61.0625L50.9375 60.834L50.8701 60.7568C50.5589 60.3568 50.5953 59.7775 50.9697 59.4199ZM59.6904 59.3828C60.0757 59.0533 60.6557 59.0624 61.0303 59.4199C61.4297 59.8014 61.4439 60.4346 61.0625 60.834L60.834 61.0625L60.7568 61.1299C60.3568 61.4411 59.7775 61.4047 59.4199 61.0303C59.0386 60.6309 59.0538 59.9976 59.4531 59.6162L59.6162 59.4531L59.6904 59.3828ZM49 56C49 55.9459 49.0007 55.8917 49.002 55.8379C49.0147 55.2859 49.4724 54.8488 50.0244 54.8613C50.5765 54.8739 51.0135 55.3317 51.001 55.8838C51.0001 55.9224 51 55.9611 51 56C51 56.0389 51.0001 56.0776 51.001 56.1162L50.998 56.2188C50.9582 56.7239 50.5419 57.1269 50.0244 57.1387C49.4724 57.1512 49.0147 56.7141 49.002 56.1621L49 56ZM62.998 56.1621C62.9853 56.7141 62.5276 57.1512 61.9756 57.1387C61.4235 57.1261 60.9865 56.6683 60.999 56.1162L62.998 56.1621ZM61 56C61 55.9611 60.9999 55.9224 60.999 55.8838L62.998 55.8379C62.9993 55.8917 63 55.9459 63 56C63 56.0541 62.9993 56.1083 62.998 56.1621L60.999 56.1162C60.9999 56.0776 61 56.0389 61 56ZM61.9756 54.8613C62.5276 54.8488 62.9853 55.2859 62.998 55.8379L60.999 55.8838C60.9865 55.3317 61.4235 54.8739 61.9756 54.8613ZM51.2432 50.8701C51.6432 50.5589 52.2225 50.5953 52.5801 50.9697C52.9614 51.3691 52.9462 52.0024 52.5469 52.3838L52.3838 52.5469L52.3096 52.6172C51.9243 52.9467 51.3443 52.9376 50.9697 52.5801C50.5703 52.1986 50.5561 51.5654 50.9375 51.166L51.166 50.9375L51.2432 50.8701ZM59.4199 50.9697C59.7775 50.5953 60.3568 50.5589 60.7568 50.8701L60.834 50.9375L61.0625 51.166L61.1299 51.2432C61.4411 51.6432 61.4047 52.2225 61.0303 52.5801C60.6557 52.9376 60.0757 52.9467 59.6904 52.6172L59.6162 52.5469L59.4531 52.3838L59.3828 52.3096C59.0533 51.9243 59.0624 51.3443 59.4199 50.9697ZM56.1621 49.002C56.7141 49.0147 57.1512 49.4724 57.1387 50.0244C57.1261 50.5765 56.6683 51.0135 56.1162 51.001C56.0776 51.0001 56.0389 51 56 51C55.9611 51 55.9224 51.0001 55.8838 51.001L55.7812 50.998C55.2761 50.9582 54.8731 50.5419 54.8613 50.0244C54.8488 49.4724 55.2859 49.0147 55.8379 49.002L56 49C56.0541 49 56.1083 49.0007 56.1621 49.002Z",fill:"#6C7787"}),z.jsx("path",{d:"M13 8C13 5.23858 10.7614 3 8 3C5.23858 3 3 5.23858 3 8C3 10.7614 5.23858 13 8 13C10.7614 13 13 10.7614 13 8ZM15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1C11.866 1 15 4.13401 15 8Z",fill:"#404B5A"}),z.jsx("path",{d:"M32.1162 12.999C32.6683 12.9865 33.1261 13.4235 33.1387 13.9756C33.1512 14.5276 32.7141 14.9853 32.1621 14.998C32.1083 14.9993 32.0541 15 32 15C31.9459 15 31.8917 14.9993 31.8379 14.998C31.2859 14.9853 30.8488 14.5276 30.8613 13.9756C30.8739 13.4235 31.3317 12.9865 31.8838 12.999C31.9224 12.9999 31.9611 13 32 13C32.0389 13 32.0776 12.9999 32.1162 12.999ZM26.9697 11.4199C27.3443 11.0624 27.9243 11.0533 28.3096 11.3828L28.3838 11.4531L28.5469 11.6162L28.6172 11.6904C28.9467 12.0757 28.9376 12.6557 28.5801 13.0303C28.2225 13.4047 27.6432 13.4411 27.2432 13.1299L27.166 13.0625L26.9375 12.834L26.8701 12.7568C26.5589 12.3568 26.5953 11.7775 26.9697 11.4199ZM35.6904 11.3828C36.0757 11.0533 36.6557 11.0624 37.0303 11.4199C37.4297 11.8014 37.4439 12.4346 37.0625 12.834L36.834 13.0625L36.7568 13.1299C36.3568 13.4411 35.7775 13.4047 35.4199 13.0303C35.0386 12.6309 35.0538 11.9976 35.4531 11.6162L35.6162 11.4531L35.6904 11.3828ZM25 8C25 7.94595 25.0007 7.89168 25.002 7.83789C25.0147 7.28591 25.4724 6.84878 26.0244 6.86133C26.5765 6.87394 27.0135 7.33168 27.001 7.88379C27.0001 7.9224 27 7.96114 27 8C27 8.03886 27.0001 8.0776 27.001 8.11621L26.998 8.21875C26.9582 8.72394 26.5419 9.12685 26.0244 9.13867C25.4724 9.15122 25.0147 8.71409 25.002 8.16211L25 8ZM38.998 8.16211C38.9853 8.71409 38.5276 9.15122 37.9756 9.13867C37.4235 9.12606 36.9865 8.66832 36.999 8.11621L38.998 8.16211ZM37 8C37 7.96114 36.9999 7.9224 36.999 7.88379L38.998 7.83789C38.9993 7.89168 39 7.94595 39 8C39 8.05405 38.9993 8.10832 38.998 8.16211L36.999 8.11621C36.9999 8.0776 37 8.03886 37 8ZM37.9756 6.86133C38.5276 6.84878 38.9853 7.28591 38.998 7.83789L36.999 7.88379C36.9865 7.33168 37.4235 6.87394 37.9756 6.86133ZM27.2432 2.87012C27.6432 2.55893 28.2225 2.59532 28.5801 2.96973C28.9614 3.36912 28.9462 4.00239 28.5469 4.38379L28.3838 4.54688L28.3096 4.61719C27.9243 4.94672 27.3443 4.93763 26.9697 4.58008C26.5703 4.19863 26.5561 3.5654 26.9375 3.16602L27.166 2.9375L27.2432 2.87012ZM35.4199 2.96973C35.7775 2.59532 36.3568 2.55892 36.7568 2.87012L36.834 2.9375L37.0625 3.16602L37.1299 3.24316C37.4411 3.64319 37.4047 4.22248 37.0303 4.58008C36.6557 4.93763 36.0757 4.94672 35.6904 4.61719L35.6162 4.54688L35.4531 4.38379L35.3828 4.30957C35.0533 3.92432 35.0624 3.34427 35.4199 2.96973ZM32.1621 1.00195C32.7141 1.01469 33.1512 1.47239 33.1387 2.02441C33.1261 2.57651 32.6683 3.01353 32.1162 3.00098C32.0776 3.0001 32.0389 3 32 3C31.9611 3 31.9224 3.0001 31.8838 3.00098L31.7812 2.99805C31.2761 2.95825 30.8731 2.54195 30.8613 2.02441C30.8488 1.47239 31.2859 1.01469 31.8379 1.00195L32 1C32.0541 1 32.1083 1.00073 32.1621 1.00195Z",fill:"#6C7787"}),z.jsx("path",{d:"M56.1162 12.999C56.6683 12.9865 57.1261 13.4235 57.1387 13.9756C57.1512 14.5276 56.7141 14.9853 56.1621 14.998C56.1083 14.9993 56.0541 15 56 15C55.9459 15 55.8917 14.9993 55.8379 14.998C55.2859 14.9853 54.8488 14.5276 54.8613 13.9756C54.8739 13.4235 55.3317 12.9865 55.8838 12.999C55.9224 12.9999 55.9611 13 56 13C56.0389 13 56.0776 12.9999 56.1162 12.999ZM50.9697 11.4199C51.3443 11.0624 51.9243 11.0533 52.3096 11.3828L52.3838 11.4531L52.5469 11.6162L52.6172 11.6904C52.9467 12.0757 52.9376 12.6557 52.5801 13.0303C52.2225 13.4047 51.6432 13.4411 51.2432 13.1299L51.166 13.0625L50.9375 12.834L50.8701 12.7568C50.5589 12.3568 50.5953 11.7775 50.9697 11.4199ZM59.6904 11.3828C60.0757 11.0533 60.6557 11.0624 61.0303 11.4199C61.4297 11.8014 61.4439 12.4346 61.0625 12.834L60.834 13.0625L60.7568 13.1299C60.3568 13.4411 59.7775 13.4047 59.4199 13.0303C59.0386 12.6309 59.0538 11.9976 59.4531 11.6162L59.6162 11.4531L59.6904 11.3828ZM49 8C49 7.94595 49.0007 7.89168 49.002 7.83789C49.0147 7.28591 49.4724 6.84878 50.0244 6.86133C50.5765 6.87394 51.0135 7.33168 51.001 7.88379C51.0001 7.9224 51 7.96114 51 8C51 8.03886 51.0001 8.0776 51.001 8.11621L50.998 8.21875C50.9582 8.72394 50.5419 9.12685 50.0244 9.13867C49.4724 9.15122 49.0147 8.71409 49.002 8.16211L49 8ZM62.998 8.16211C62.9853 8.71409 62.5276 9.15122 61.9756 9.13867C61.4235 9.12606 60.9865 8.66832 60.999 8.11621L62.998 8.16211ZM61 8C61 7.96114 60.9999 7.9224 60.999 7.88379L62.998 7.83789C62.9993 7.89168 63 7.94595 63 8C63 8.05405 62.9993 8.10832 62.998 8.16211L60.999 8.11621C60.9999 8.0776 61 8.03886 61 8ZM61.9756 6.86133C62.5276 6.84878 62.9853 7.28591 62.998 7.83789L60.999 7.88379C60.9865 7.33168 61.4235 6.87394 61.9756 6.86133ZM51.2432 2.87012C51.6432 2.55893 52.2225 2.59532 52.5801 2.96973C52.9614 3.36912 52.9462 4.00239 52.5469 4.38379L52.3838 4.54688L52.3096 4.61719C51.9243 4.94672 51.3443 4.93763 50.9697 4.58008C50.5703 4.19863 50.5561 3.5654 50.9375 3.16602L51.166 2.9375L51.2432 2.87012ZM59.4199 2.96973C59.7775 2.59532 60.3568 2.55892 60.7568 2.87012L60.834 2.9375L61.0625 3.16602L61.1299 3.24316C61.4411 3.64319 61.4047 4.22248 61.0303 4.58008C60.6557 4.93763 60.0757 4.94672 59.6904 4.61719L59.6162 4.54688L59.4531 4.38379L59.3828 4.30957C59.0533 3.92432 59.0624 3.34427 59.4199 2.96973ZM56.1621 1.00195C56.7141 1.01469 57.1512 1.47239 57.1387 2.02441C57.1261 2.57651 56.6683 3.01353 56.1162 3.00098C56.0776 3.0001 56.0389 3 56 3C55.9611 3 55.9224 3.0001 55.8838 3.00098L55.7812 2.99805C55.2761 2.95825 54.8731 2.54195 54.8613 2.02441C54.8488 1.47239 55.2859 1.01469 55.8379 1.00195L56 1C56.0541 1 56.1083 1.00073 56.1621 1.00195Z",fill:"#6C7787"}),z.jsx("path",{d:"M26 7C26.5523 7 27 7.44772 27 8C27 8.55228 26.5523 9 26 9H14C13.4477 9 13 8.55228 13 8C13 7.44772 13.4477 7 14 7H26Z",fill:"#404B5A"}),z.jsx("path",{d:"M38.1172 7L38.2197 7.00488C38.7241 7.056 39.1172 7.48217 39.1172 8C39.1172 8.51783 38.7241 8.944 38.2197 8.99512L38.1172 9H38V7H38.1172ZM42.1172 7L42.2197 7.00488C42.7241 7.056 43.1172 7.48217 43.1172 8C43.1172 8.51783 42.7241 8.944 42.2197 8.99512L42.1172 9H41.8828C41.3305 9 40.8828 8.55228 40.8828 8C40.8828 7.44772 41.3305 7 41.8828 7H42.1172ZM46.1172 7L46.2197 7.00488C46.7241 7.056 47.1172 7.48217 47.1172 8C47.1172 8.51783 46.7241 8.944 46.2197 8.99512L46.1172 9H45.8828C45.3305 9 44.8828 8.55228 44.8828 8C44.8828 7.44772 45.3305 7 45.8828 7H46.1172ZM50 7V9H49.8828C49.3305 9 48.8828 8.55228 48.8828 8C48.8828 7.44772 49.3305 7 49.8828 7H50Z",fill:"#6C7787"}),z.jsx("path",{d:"M26 31V33H14V31H26Z",fill:"#404B5A"}),z.jsx("path",{d:"M38.1172 31L38.2197 31.0049C38.7241 31.056 39.1172 31.4822 39.1172 32C39.1172 32.5178 38.7241 32.944 38.2197 32.9951L38.1172 33H38V31H38.1172ZM42.1172 31L42.2197 31.0049C42.7241 31.056 43.1172 31.4822 43.1172 32C43.1172 32.5178 42.7241 32.944 42.2197 32.9951L42.1172 33H41.8828C41.3305 33 40.8828 32.5523 40.8828 32C40.8828 31.4477 41.3305 31 41.8828 31H42.1172ZM46.1172 31L46.2197 31.0049C46.7241 31.056 47.1172 31.4822 47.1172 32C47.1172 32.5178 46.7241 32.944 46.2197 32.9951L46.1172 33H45.8828C45.3305 33 44.8828 32.5523 44.8828 32C44.8828 31.4477 45.3305 31 45.8828 31H46.1172ZM50 31V33H49.8828C49.3305 33 48.8828 32.5523 48.8828 32C48.8828 31.4477 49.3305 31 49.8828 31H50Z",fill:"#6C7787"}),z.jsx("path",{d:"M38.1172 55L38.2197 55.0049C38.7241 55.056 39.1172 55.4822 39.1172 56C39.1172 56.5178 38.7241 56.944 38.2197 56.9951L38.1172 57H38V55H38.1172ZM42.1172 55L42.2197 55.0049C42.7241 55.056 43.1172 55.4822 43.1172 56C43.1172 56.5178 42.7241 56.944 42.2197 56.9951L42.1172 57H41.8828C41.3305 57 40.8828 56.5523 40.8828 56C40.8828 55.4477 41.3305 55 41.8828 55H42.1172ZM46.1172 55L46.2197 55.0049C46.7241 55.056 47.1172 55.4822 47.1172 56C47.1172 56.5178 46.7241 56.944 46.2197 56.9951L46.1172 57H45.8828C45.3305 57 44.8828 56.5523 44.8828 56C44.8828 55.4477 45.3305 55 45.8828 55H46.1172ZM50 55V57H49.8828C49.3305 57 48.8828 56.5523 48.8828 56C48.8828 55.4477 49.3305 55 49.8828 55H50Z",fill:"#6C7787"}),z.jsx("path",{d:"M57 38.1172L56.9951 38.2197C56.944 38.7241 56.5178 39.1172 56 39.1172C55.4822 39.1172 55.056 38.7241 55.0049 38.2197L55 38.1172L55 38L57 38L57 38.1172ZM57 42.1172L56.9951 42.2197C56.944 42.7241 56.5178 43.1172 56 43.1172C55.4822 43.1172 55.056 42.7241 55.0049 42.2197L55 42.1172L55 41.8828C55 41.3305 55.4477 40.8828 56 40.8828C56.5523 40.8828 57 41.3305 57 41.8828L57 42.1172ZM57 46.1172L56.9951 46.2197C56.944 46.7241 56.5178 47.1172 56 47.1172C55.4822 47.1172 55.056 46.7241 55.0049 46.2197L55 46.1172L55 45.8828C55 45.3305 55.4477 44.8828 56 44.8828C56.5523 44.8828 57 45.3305 57 45.8828L57 46.1172ZM57 50L55 50L55 49.8828C55 49.3305 55.4477 48.8828 56 48.8828C56.5523 48.8828 57 49.3305 57 49.8828L57 50Z",fill:"#6C7787"}),z.jsx("path",{d:"M26 55C26.5523 55 27 55.4477 27 56C27 56.5523 26.5523 57 26 57H14V55H26Z",fill:"#404B5A"}),z.jsx("path",{d:"M9 14V26H7V14H9Z",fill:"#404B5A"}),z.jsx("path",{d:"M31 14C31 13.4477 31.4477 13 32 13C32.5523 13 33 13.4477 33 14V26H31V14Z",fill:"#404B5A"}),z.jsx("path",{d:"M9 38V50H7V38H9Z",fill:"#404B5A"}),z.jsx("path",{d:"M31 50V38H33V50C33 50.5523 32.5523 51 32 51C31.4477 51 31 50.5523 31 50Z",fill:"#404B5A"}),z.jsx("path",{d:"M57 14.1172L56.9951 14.2197C56.944 14.7241 56.5178 15.1172 56 15.1172C55.4822 15.1172 55.056 14.7241 55.0049 14.2197L55 14.1172L55 14L57 14L57 14.1172ZM57 18.1172L56.9951 18.2197C56.944 18.7241 56.5178 19.1172 56 19.1172C55.4822 19.1172 55.056 18.7241 55.0049 18.2197L55 18.1172L55 17.8828C55 17.3305 55.4477 16.8828 56 16.8828C56.5523 16.8828 57 17.3305 57 17.8828L57 18.1172ZM57 22.1172L56.9951 22.2197C56.944 22.7241 56.5178 23.1172 56 23.1172C55.4822 23.1172 55.056 22.7241 55.0049 22.2197L55 22.1172L55 21.8828C55 21.3305 55.4477 20.8828 56 20.8828C56.5523 20.8828 57 21.3305 57 21.8828L57 22.1172ZM57 26L55 26L55 25.8828C55 25.3305 55.4477 24.8828 56 24.8828C56.5523 24.8828 57 25.3305 57 25.8828L57 26Z",fill:"#6C7787"}),z.jsx("path",{d:"M37 32C37 29.2386 34.7614 27 32 27C29.2386 27 27 29.2386 27 32C27 34.7614 29.2386 37 32 37C34.7614 37 37 34.7614 37 32ZM39 32C39 35.866 35.866 39 32 39C28.134 39 25 35.866 25 32C25 28.134 28.134 25 32 25C35.866 25 39 28.134 39 32Z",fill:"#404B5A"})]}),Que=()=>{const i=vo();return z.jsx("div",{className:Cm.container,children:z.jsxs("div",{className:Cm.content,children:[z.jsx(Kue,{}),z.jsx("h1",{className:Cm.title,children:ve.t("Get started with the Modeling app")}),z.jsxs("div",{className:Cm.text,children:[z.jsx("p",{children:ve.t("To get started, create a route that points to a running CHAP server.")}),z.jsx("p",{children:ve.t("Route and servers are configured on the settings page.")}),z.jsx("a",{href:"https://github.com/dhis2-chap/chap-core/wiki",target:"_blank",rel:"noopener noreferrer",className:Cm.link,children:ve.t("Learn more about Modeling and CHAP")})]}),z.jsx(Ti,{onClick:()=>i("/settings"),children:ve.t("Configure settings")})]})})},Jue=tV([{element:z.jsx(rse,{}),errorElement:z.jsx(ME,{}),children:[{path:"/",element:z.jsx(bI,{to:"/evaluate",replace:!0})},{element:z.jsx(ase,{children:z.jsxs(Wae,{children:[z.jsx(use,{}),z.jsx(yse,{}),z.jsx(AE,{children:z.jsx(Nw,{})})]})}),errorElement:z.jsx(ME,{}),children:[{path:"/evaluate",children:[{index:!0,element:z.jsx(Fae,{})},{path:"compare",handle:{fullWidth:!0},element:z.jsx(Hue,{})},{path:"new",element:z.jsx(uce,{}),handle:{collapseSidebar:!0}}]},{path:"/evaluate-old",element:z.jsx(Hte,{})},{path:"/jobs",element:z.jsx(Bce,{})},{path:"/predict",element:z.jsx(Ore,{})}]},{path:"/settings",element:z.jsx(AE,{children:z.jsx(Nw,{})}),children:[{path:"/settings",children:[{index:!0,element:z.jsx(One,{})},{path:"models",element:z.jsx(Are,{})}]}]},{path:"/get-started",handle:{collapseSidebar:!0},element:z.jsx(Que,{})}]}]),nde=()=>z.jsxs(z.Fragment,{children:[z.jsx(wL,{}),z.jsx(JM,{theme:!0,spacers:!0,colors:!0,elevations:!0}),z.jsx(jre,{children:z.jsx(hV,{router:Jue})}),z.jsx(jne,{position:"bottom-right"})]});export{nde as default};
//# sourceMappingURL=App-BznI9jcN.js.map
