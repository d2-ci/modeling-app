import{P as Q,c as Oe,e as Pg,l as rC,s as n5,a as Gt,b as r5,t as Jt,r as $e,R as fe,_ as _t,d as bn,m as Ly,f as Xr,i as Qe,B as Jn,L as vv,g as Pf,h as Iw,C as Qo,I as sC,j as s5,S as aC,F as oC,k as $p,n as a5,o as o5,p as l5,q as lC,u as c5,v as zy,w as u5,x as d5,y as cC,z as h5,A as uh,D as Aa,M as ku,E as _v,G as Ny,H as wv,J as Tv,K as If,N as Oy,O as Df,Q as Cv,T as Jp,U as p5,V as f5,W as Ho,X as ef,Y as m5,Z as he,$ as $a,a0 as dh,a1 as g5,a2 as y5,a3 as jy,a4 as Sv,a5 as Fy,a6 as x5,a7 as b5,a8 as v5,a9 as _5}from"./main-CTk2s-oC.js";const w5=i=>typeof i>"u"||i===null||i==="",Dw=(i,e,t)=>(n,s,l)=>{const u=n[s];return t?new Error(`Property \`${s}\` on component \`${l}\` is using the \`requiredIf\` prop-validator combined with \`.isRequired\`. This is an invalid combination.`):typeof i!="function"?new Error("The `condition` argument passed to the `requiredIf` prop-validator was not a function."):typeof e!="function"?new Error("The `propType` argument passed to the `requiredIf` prop-validator was not a function."):i(n)&&w5(u)?new Error(`Invalid prop \`${s}\` supplied to \`${l}\`, this prop is conditionally required but has value \`${u}\`. The condition that made this prop required is: \`${i.toString()}\`.`):(Q.checkPropTypes({[s]:e},n,"prop",l),null)};function Rr(i,e){const t=Dw(i,e,!1);return t.isRequired=Dw(i,e,!0),t}const T5=Object.freeze(Object.defineProperty({__proto__:null,colors:Oe,elevations:Pg,layers:rC,sharedPropTypes:n5,spacers:Gt,spacersNum:r5,theme:Jt},Symbol.toStringTag,{value:"Module"}));function Ev(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M8 2a1 1 0 011 1v4h4a1 1 0 010 2H9v4a1 1 0 01-2 0V9H3a1 1 0 110-2h4V3a1 1 0 011-1z",fill:"currentColor",fillRule:"evenodd"}))}Ev.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function kv(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M12 3a1 1 0 011 1v7h7a1 1 0 010 2h-7v7a1 1 0 01-2 0v-7H4a1 1 0 010-2h7V4a1 1 0 011-1z",fill:"currentColor",fillRule:"evenodd"}))}kv.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function uC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M19 3a2 2 0 012 2v4h-1v10a2 2 0 01-2 2H6a2 2 0 01-2-2V9H3V5a2 2 0 012-2zm-1 6H6v10h12zm-4 3v2h-4v-2zm5-7H5v2h14z",fill:"currentColor"}))}uC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function By(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M13.613 5.21l.094.083 6 6a1 1 0 01.083 1.32l-.083.094-6 6a1 1 0 01-1.497-1.32l.083-.094L16.584 13H5a1 1 0 01-.117-1.993L5 11h11.586l-4.293-4.293a1 1 0 01-.083-1.32l.083-.094a1 1 0 011.32-.083z",fill:"currentColor"}))}By.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function $y(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M4.146 6.146a.5.5 0 01.638-.057l.07.057L8 9.293l3.146-3.147a.5.5 0 01.638-.057l.07.057a.5.5 0 01.057.638l-.057.07-3.5 3.5a.5.5 0 01-.638.057l-.07-.057-3.5-3.5a.5.5 0 010-.708z",fill:"currentColor"}))}$y.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function dC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M11.293 15.707a1 1 0 001.414 0l5-5a1 1 0 00-1.414-1.414L12 13.586 7.707 9.293a1 1 0 00-1.414 1.414z",fill:"currentColor"}))}dC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function hC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M9.146 4.146a.5.5 0 01.765.638l-.057.07L6.707 8l3.147 3.146a.5.5 0 01.057.638l-.057.07a.5.5 0 01-.638.057l-.07-.057-3.5-3.5a.5.5 0 01-.057-.638l.057-.07z",fill:"currentColor"}))}hC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function pC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M13.293 6.293a1 1 0 011.497 1.32l-.083.094L10.415 12l4.292 4.293a1 1 0 01.083 1.32l-.083.094a1 1 0 01-1.32.083l-.094-.083-5-5a1 1 0 01-.083-1.32l.083-.094z",fill:"currentColor"}))}pC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function fC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M6.146 4.146a.5.5 0 01.638-.057l.07.057 3.5 3.5a.5.5 0 01.057.638l-.057.07-3.5 3.5a.5.5 0 01-.765-.638l.057-.07L9.293 8 6.146 4.854a.5.5 0 01-.057-.638z",fill:"currentColor"}))}fC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function mC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M7.646 5.646a.5.5 0 01.638-.057l.07.057 3.5 3.5a.5.5 0 01-.638.765l-.07-.057L8 6.707 4.854 9.854a.5.5 0 01-.638.057l-.07-.057a.5.5 0 01-.057-.638l.057-.07z",fill:"currentColor"}))}mC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function gC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M11.293 8.293a1 1 0 011.32-.083l.094.083 5 5a1 1 0 01-1.32 1.497l-.094-.083L12 10.415l-4.293 4.292a1 1 0 01-1.32.083l-.094-.083a1 1 0 01-.083-1.32l.083-.094z",fill:"currentColor"}))}gC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function yC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M13.5 3a.5.5 0 110 1H13v10a1 1 0 01-1 1H4a1 1 0 01-1-1V4h-.5a.5.5 0 010-1zM12 4H4v10h8zM7 6v6H6V6zm3 0v6H9V6zm-.5-5a.5.5 0 010 1h-3a.5.5 0 010-1z",fill:"currentColor"}))}yC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function xC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M20 5a1 1 0 010 2h-1v13a2 2 0 01-2 2H7a2 2 0 01-2-2V7H4a1 1 0 110-2zm-3 2H7v13h10zm-6 2v8h-1V9zm3 0v8h-1V9zm1-7v2H9V2z",fill:"currentColor"}))}xC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function bC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M20 14a1 1 0 01.993.883L21 15v3a3 3 0 01-2.824 2.995L18 21H6a3 3 0 01-2.995-2.824L3 18v-3a1 1 0 011.993-.117L5 15v3a1 1 0 00.883.993L6 19h12a1 1 0 00.993-.883L19 18v-3a1 1 0 011-1zM12 3a1 1 0 01.993.883L13 4v9.584l2.293-2.291a1 1 0 011.32-.083l.094.083a1 1 0 01.083 1.32l-.083.094-4 4a1 1 0 01-1.32.083l-.094-.083-4-4a1 1 0 011.32-1.497l.094.083L11 13.584V4a1 1 0 011-1z",fill:"currentColor"}))}bC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function vC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M9.5 16a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm5 0a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm-5-6a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm5 0a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm-5-6a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm5 0a1.5 1.5 0 110 3 1.5 1.5 0 010-3z",fill:"currentColor",fillRule:"evenodd"}))}vC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function _C(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M10.613 2.624l.094.083 2.586 2.586a1 1 0 01.083 1.32l-.083.094L6 14H2v-4l7.293-7.293a1 1 0 011.32-.083zm-.613.79l-6.793 6.792 2.585 2.585L12.586 6z",fill:"currentColor"}))}_C.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function wC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 100 16 8 8 0 000-16zm0 11a1 1 0 110 2 1 1 0 010-2zm1-8v6h-2V7z",fill:"currentColor"}))}wC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function TC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M11 3v2H5v14h14v-6h2v6a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2zm11-2a1 1 0 01.993.883L23 2v6a1 1 0 01-1.993.117L21 8V4.414l-7.293 7.293a1 1 0 01-1.497-1.32l.083-.094L19.584 3H16a1 1 0 01-.993-.883L15 2a1 1 0 01.883-.993L16 1z",fill:"currentColor"}))}TC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function CC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M3 7a1 1 0 110 2 1 1 0 010-2zm5 0a1 1 0 110 2 1 1 0 010-2zm5 0a1 1 0 110 2 1 1 0 010-2z",fill:"currentColor",fillRule:"evenodd"}))}CC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function SC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M20 7a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V9a2 2 0 012-2zM6 9H4v6h16V9h-2v3a1 1 0 01-2 0V9h-3v3a1 1 0 01-2 0V9H8v3a1 1 0 01-2 0z",fill:"currentColor"}))}SC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function EC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M6 1a5 5 0 013.871 8.164l4.483 4.482-.708.708L9.164 9.87A5 5 0 116 1zm0 1a4 4 0 100 8 4 4 0 000-8z",fill:"currentColor"}))}EC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function kC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M11.5 1a2.5 2.5 0 11-1.913 4.11l.024.027-3.73 2.098a2.498 2.498 0 01-.003 1.539l.003-.009 3.73 2.098-.024.027a2.5 2.5 0 11-.465.837l-.003.008L5.39 9.636l.023-.026a2.5 2.5 0 110-3.22l-.024-.027 3.73-2.098A2.5 2.5 0 0111.5 1zm0 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm-8-4.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm8-4.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3z",fill:"currentColor"}))}kC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function AC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M13 15a4 4 0 014 4v2H7v-2a4 4 0 014-4zm0 2h-2a2 2 0 00-1.995 1.85L9 19h6a2 2 0 00-1.85-1.995zM7 9v2H6a2 2 0 00-1.995 1.85L4 13h3v2H2v-2a4 4 0 014-4zm11 0a4 4 0 014 4v2h-5v-2h3a2 2 0 00-1.85-1.995L18 11h-1V9zm-6-1a3 3 0 110 6 3 3 0 010-6zm0 2a1 1 0 100 2 1 1 0 000-2zM7 2a3 3 0 110 6 3 3 0 010-6zm10 0a3 3 0 110 6 3 3 0 010-6zM7 4a1 1 0 100 2 1 1 0 000-2zm10 0a1 1 0 100 2 1 1 0 000-2z",fill:"currentColor"}))}AC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function MC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",color:e,"data-test":t},$e.createElement("path",{fill:"currentColor",d:"M4 2v18h18v2H2V2h2zm18 10v6H6v-4l5-2 5 4 6-4zM6 3l5 3 5-2 6 4v2l-6 4-5-4-5 2V3z"}))}MC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function PC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M8.85 1.839l.056.103 5.43 11.635a1 1 0 01-.79 1.416L13.43 15H2.57a1 1 0 01-.95-1.314l.044-.109 5.43-11.635a1 1 0 011.757-.103zM8 2.365L2.57 14h10.86zM8 11a1 1 0 110 2 1 1 0 010-2zm.5-6v5h-1V5z",fill:"currentColor"}))}PC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};function IC(i){let{color:e,dataTest:t,ariaLabel:n}=i;return $e.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},$e.createElement("path",{d:"M12 3a9 9 0 110 18 9 9 0 010-18zm0 2a6.967 6.967 0 00-3.848 1.152l.494.494a.5.5 0 00.708 0l.5-.5A.5.5 0 0110.207 6h.859a.5.5 0 01.416.777l-1.434 2.15a.5.5 0 00-.069.157l-.384 1.537A.5.5 0 019.11 11H8.5a.5.5 0 01-.5-.5V10a.414.414 0 00-.707-.293l-.94.94a.5.5 0 000 .707l1.5 1.5a.5.5 0 00.354.146h1.484a.5.5 0 01.447.276l.75 1.5a.5.5 0 010 .448L9.275 18.45c.838.354 1.759.55 2.725.55a6.968 6.968 0 004.026-1.273.43.43 0 01-.026-.152V15.36a.5.5 0 00-.342-.474l-2.184-.728a.5.5 0 01-.316-.632l.728-2.184A.5.5 0 0114.36 11h4.57a6.951 6.951 0 00-.712-2.218l-.928.928a.5.5 0 01-.631.063l-2.243-1.496a.5.5 0 01-.139-.693l1.133-1.699A6.968 6.968 0 0012 5zm-7 7.009a6.98 6.98 0 002.435 5.298l-.398-1.195a.5.5 0 00-.12-.195l-.77-.77A.5.5 0 016 14.792v-1.586a.5.5 0 00-.146-.353l-.797-.797z",fill:"currentColor"}))}IC.propTypes={color:Q.string,dataTest:Q.string,ariaLabel:Q.string};const da=["svg.jsx-4069423049{display:block;pointer-events:none;}",`svg.jsx-4069423049 .border.jsx-4069423049{fill:${Oe.grey800};}`,`svg.jsx-4069423049 .background.jsx-4069423049,svg.jsx-4069423049 .indeterminate.jsx-4069423049,svg.jsx-4069423049 .checkmark.jsx-4069423049{fill:${Oe.white};}`,`svg.checked.jsx-4069423049 .background.jsx-4069423049,svg.indeterminate.jsx-4069423049 .background.jsx-4069423049{fill:${Oe.teal500};}`,`svg.valid.jsx-4069423049 .background.jsx-4069423049{fill:${Oe.blue600};}`,`svg.warning.jsx-4069423049 .background.jsx-4069423049{fill:${Oe.yellow700};}`,`svg.error.jsx-4069423049 .background.jsx-4069423049{fill:${Oe.red500};}`,`svg.checked.jsx-4069423049 .border.jsx-4069423049,svg.indeterminate.jsx-4069423049 .border.jsx-4069423049{fill:${Oe.teal900};}`,"svg.jsx-4069423049:not(.checked) .checkmark.jsx-4069423049,svg.jsx-4069423049:not(.indeterminate) .indeterminate.jsx-4069423049{fill:none;}",`svg.jsx-4069423049:not(.checked):not(.indeterminate) .background.jsx-4069423049{fill:${Oe.white};}`];da.__hash="4069423049";function DC(i){let{className:e}=i;return fe.createElement("svg",{viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",className:`jsx-${da.__hash} `+_t.dynamic([["2753140462",[Oe.grey300,Oe.grey400,Oe.blue600,Oe.blue700,Oe.yellow700,Oe.yellow800,Oe.red500,Oe.red700]]])+" "+(e||"")},fe.createElement("rect",{x:"0",y:"0",width:"18",height:"18",rx:"3",className:`jsx-${da.__hash} `+_t.dynamic([["2753140462",[Oe.grey300,Oe.grey400,Oe.blue600,Oe.blue700,Oe.yellow700,Oe.yellow800,Oe.red500,Oe.red700]]])+" background"}),fe.createElement("path",{d:"M15,0 C16.6568542,0 18,1.34314575 18,3 L18,15 C18,16.6568542 16.6568542,18 15,18 L3,18 C1.34314575,18 0,16.6568542 0,15 L0,3 C0,1.34314575 1.34314575,0 3,0 L15,0 Z M15,1 L3,1 C1.9456382,1 1.08183488,1.81587779 1.00548574,2.85073766 L1,3 L1,15 C1,16.0543618 1.81587779,16.9181651 2.85073766,16.9945143 L3,17 L15,17 C16.0543618,17 16.9181651,16.1841222 16.9945143,15.1492623 L17,15 L17,3 C17,1.9456382 16.1841222,1.08183488 15.1492623,1.00548574 L15,1 Z",className:`jsx-${da.__hash} `+_t.dynamic([["2753140462",[Oe.grey300,Oe.grey400,Oe.blue600,Oe.blue700,Oe.yellow700,Oe.yellow800,Oe.red500,Oe.red700]]])+" border"}),fe.createElement("path",{d:"M4.74451387,8.02852516 C4.39595738,8.11985643 4.12375034,8.39235188 4.03251575,8.74127768 C3.94128115,9.09020348 4.04521722,9.46125864 4.30437605,9.71182782 L7.29823844,12.7078028 C7.68753993,13.0973991 8.31859767,13.0973991 8.70789916,12.7078028 L13.695624,6.71585285 C13.9547828,6.46528367 14.0587189,6.09422851 13.9674843,5.74530271 C13.8762497,5.39637691 13.6040426,5.12388146 13.2554861,5.0325502 C12.9069296,4.94121893 12.5362672,5.04526513 12.2859632,5.30469855 L8.0030688,10.5910713 L5.71403676,8.30067351 C5.46373279,8.0412401 5.09307036,7.9371939 4.74451387,8.02852516 Z",className:`jsx-${da.__hash} `+_t.dynamic([["2753140462",[Oe.grey300,Oe.grey400,Oe.blue600,Oe.blue700,Oe.yellow700,Oe.yellow800,Oe.red500,Oe.red700]]])+" checkmark"}),fe.createElement("rect",{x:"4",y:"8",width:"10",height:"2",rx:"1",className:`jsx-${da.__hash} `+_t.dynamic([["2753140462",[Oe.grey300,Oe.grey400,Oe.blue600,Oe.blue700,Oe.yellow700,Oe.yellow800,Oe.red500,Oe.red700]]])+" indeterminate"}),fe.createElement(_t,{id:da.__hash},da),fe.createElement(_t,{id:"2753140462",dynamic:[Oe.grey300,Oe.grey400,Oe.blue600,Oe.blue700,Oe.yellow700,Oe.yellow800,Oe.red500,Oe.red700]},["svg.__jsx-style-dynamic-selector{width:18px;height:18px;}",`svg.disabled.__jsx-style-dynamic-selector .background.__jsx-style-dynamic-selector{fill:${Oe.grey300};}`,`svg.disabled.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Oe.grey400};}`,`svg.valid.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Oe.blue600};}`,`svg.valid.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.valid.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Oe.blue700};}`,`svg.warning.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Oe.yellow700};}`,`svg.warning.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.warning.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Oe.yellow800};}`,`svg.error.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Oe.red500};}`,`svg.error.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.error.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Oe.red700};}`]))}DC.propTypes={className:Q.string};function RC(i){let{className:e}=i;return fe.createElement("svg",{viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg",className:`jsx-${da.__hash} `+_t.dynamic([["86695588",[Oe.grey400,Oe.grey400,Oe.grey500,Oe.blue600,Oe.blue800,Oe.yellow700,Oe.yellow800,Oe.red500,Oe.red800]]])+" "+(e||"")},fe.createElement("rect",{x:"0",y:"0",width:"14",height:"14",rx:"2",className:`jsx-${da.__hash} `+_t.dynamic([["86695588",[Oe.grey400,Oe.grey400,Oe.grey500,Oe.blue600,Oe.blue800,Oe.yellow700,Oe.yellow800,Oe.red500,Oe.red800]]])+" background"}),fe.createElement("path",{d:"M2,0 L12,0 C13.1045695,0 14,0.8954305 14,2 L14,12 C14,13.1045695 13.1045695,14 12,14 L2,14 C0.8954305,14 0,13.1045695 0,12 L0,2 C0,0.8954305 0.8954305,0 2,0 Z M2,1 C1.44771525,1 1,1.44771525 1,2 L1,12 C1,12.5522847 1.44771525,13 2,13 L12,13 C12.5522847,13 13,12.5522847 13,12 L13,2 C13,1.44771525 12.5522847,1 12,1 L2,1 Z",className:`jsx-${da.__hash} `+_t.dynamic([["86695588",[Oe.grey400,Oe.grey400,Oe.grey500,Oe.blue600,Oe.blue800,Oe.yellow700,Oe.yellow800,Oe.red500,Oe.red800]]])+" border"}),fe.createElement("path",{d:"M10.3520005,3.30015877 L5.54268293,8.03252726 L3.64634146,6.16652726 L2.28668615,7.5044281 L5.54310367,10.7010587 L11.7145993,4.628307 L10.3520005,3.30015877 Z M5.54268293,9.43547274 L5.61193184,9.36733181 L5.54226219,9.29894127 L5.47309681,9.367 L5.54268293,9.43547274 Z M10.6496329,4.41023392 L10.6495057,4.35652297 L10.5648412,4.35672356 L10.2854007,4.631693 L10.3553166,4.69984123 L10.6496329,4.41023392 Z M3.42891348,7.22439304 L3.35030905,7.22439304 L3.35034135,7.27820863 L3.64634146,7.56947274 L3.71331385,7.5035719 L3.42891348,7.22439304 Z",className:`jsx-${da.__hash} `+_t.dynamic([["86695588",[Oe.grey400,Oe.grey400,Oe.grey500,Oe.blue600,Oe.blue800,Oe.yellow700,Oe.yellow800,Oe.red500,Oe.red800]]])+" checkmark"}),fe.createElement("rect",{x:"3",y:"6",width:"8",height:"2",className:`jsx-${da.__hash} `+_t.dynamic([["86695588",[Oe.grey400,Oe.grey400,Oe.grey500,Oe.blue600,Oe.blue800,Oe.yellow700,Oe.yellow800,Oe.red500,Oe.red800]]])+" indeterminate"}),fe.createElement(_t,{id:da.__hash},da),fe.createElement(_t,{id:"86695588",dynamic:[Oe.grey400,Oe.grey400,Oe.grey500,Oe.blue600,Oe.blue800,Oe.yellow700,Oe.yellow800,Oe.red500,Oe.red800]},["svg.__jsx-style-dynamic-selector{width:14px;height:14px;}",`svg.disabled.__jsx-style-dynamic-selector .background.__jsx-style-dynamic-selector{fill:${Oe.grey400};}`,`svg.disabled.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Oe.grey400};}`,`svg.disabled.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.disabled.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Oe.grey500};}`,`svg.valid.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Oe.blue600};}`,`svg.valid.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.valid.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Oe.blue800};}`,`svg.warning.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Oe.yellow700};}`,`svg.warning.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.warning.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Oe.yellow800};}`,`svg.error.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Oe.red500};}`,`svg.error.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.error.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${Oe.red800};}`]))}RC.propTypes={className:Q.string};function Bd(i,e,t){return(e=C5(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function C5(i){var e=S5(i,"string");return typeof e=="symbol"?e:e+""}function S5(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class Rf extends $e.Component{constructor(){super(...arguments),Bd(this,"ref",$e.createRef()),Bd(this,"handleChange",e=>{this.props.onChange&&this.props.onChange(this.createHandlerPayload(),e)}),Bd(this,"handleBlur",e=>{this.props.onBlur&&this.props.onBlur(this.createHandlerPayload(),e)}),Bd(this,"handleFocus",e=>{this.props.onFocus&&this.props.onFocus(this.createHandlerPayload(),e)}),Bd(this,"handleKeyDown",e=>{this.props.onKeyDown&&this.props.onKeyDown(this.createHandlerPayload(),e)})}componentDidMount(){this.props.initialFocus&&this.ref.current.focus(),this.setIndeterminate(this.props.indeterminate)}componentDidUpdate(e){e.indeterminate!==this.props.indeterminate&&this.setIndeterminate(this.props.indeterminate)}setIndeterminate(e){this.ref.current.indeterminate=e}createHandlerPayload(){return{value:this.props.value,name:this.props.name,checked:!this.props.checked}}render(){const{checked:e=!1,indeterminate:t=!1,className:n,disabled:s,error:l,label:u,name:r,tabIndex:p,valid:f,value:g,warning:b,dense:y,dataTest:w="dhis2-uicore-checkbox"}=this.props,v=bn({checked:e,indeterminate:t,disabled:s,valid:f,error:l,warning:b});return fe.createElement("label",{"data-test":w,className:_t.dynamic([["1252368010",[Oe.grey900,Jt.disabled,Gt.dp4,Jt.focus]]])+" "+(bn(n,{disabled:s,dense:y})||"")},fe.createElement("input",{type:"checkbox",ref:this.ref,name:r,value:g,checked:e,disabled:s,tabIndex:p,onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur,className:_t.dynamic([["1252368010",[Oe.grey900,Jt.disabled,Gt.dp4,Jt.focus]]])}),fe.createElement("div",{className:_t.dynamic([["1252368010",[Oe.grey900,Jt.disabled,Gt.dp4,Jt.focus]]])+" "+(bn("icon",{dense:y})||"")},y?fe.createElement(RC,{className:v}):fe.createElement(DC,{className:v})),u,fe.createElement(_t,{id:"1252368010",dynamic:[Oe.grey900,Jt.disabled,Gt.dp4,Jt.focus]},[`label.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;cursor:pointer;color:${Oe.grey900};font-size:14px;line-height:19px;}`,"label.dense.__jsx-style-dynamic-selector{font-size:14px;line-height:16px;}",`label.disabled.__jsx-style-dynamic-selector{cursor:not-allowed;color:${Jt.disabled};}`,"input.__jsx-style-dynamic-selector{opacity:0;position:absolute;height:18px;width:18px;inset-inline-start:3px;}","label.dense.__jsx-style-dynamic-selector input.__jsx-style-dynamic-selector{height:14px;width:14px;}",`.icon.__jsx-style-dynamic-selector{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-inline-end:${Gt.dp4};border:2px solid transparent;padding:1px;border-radius:5px;}`,"label.dense.__jsx-style-dynamic-selector .icon.__jsx-style-dynamic-selector{margin-inline-end:3px;border-radius:4px;}",`input.__jsx-style-dynamic-selector:focus+.icon.__jsx-style-dynamic-selector{outline:3px solid ${Jt.focus};outline-offset:-3px;}`]))}}Bd(Rf,"defaultProps",{checked:!1,indeterminate:!1,dataTest:"dhis2-uicore-checkbox"});const Rw=Ly(["checked","indeterminate"],Q.bool);Rf.propTypes={checked:Rw,className:Q.string,dataTest:Q.string,dense:Q.bool,disabled:Q.bool,error:Xr,indeterminate:Rw,initialFocus:Q.bool,label:Q.node,name:Q.string,tabIndex:Q.string,valid:Xr,value:Q.string,warning:Xr,onBlur:Q.func,onChange:Q.func,onFocus:Q.func,onKeyDown:Q.func};const E5={"Toggle dropdown":"Toggle dropdown"},k5="default";Qe.addResources("en",k5,E5);function $d(i,e,t){return(e=A5(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function A5(i){var e=M5(i,"string");return typeof e=="symbol"?e:e+""}function M5(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}const Lw={styles:fe.createElement(_t,{id:"2502148942"},[`button.jsx-2502148942{padding:0 ${Gt.dp12};}`]),className:"jsx-2502148942"};class Av extends $e.Component{constructor(){super(...arguments),$d(this,"state",{open:!1}),$d(this,"anchorRef",fe.createRef()),$d(this,"handleKeyDown",e=>{e.key==="Escape"&&this.state.open&&(e.preventDefault(),e.stopPropagation(),this.setState({open:!1}),this.anchorRef.current&&this.anchorRef.current.focus())}),$d(this,"onClick",(e,t)=>{this.props.onClick&&this.props.onClick({name:e.name,value:e.value,open:this.state.open},t)}),$d(this,"onToggle",()=>{this.setState(e=>({open:!e.open}))})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}render(){const{open:e}=this.state,{component:t,children:n,className:s,name:l,value:u,icon:r,small:p,large:f,primary:g,secondary:b,destructive:y,disabled:w,type:v,tabIndex:T,dataTest:S="dhis2-uicore-splitbutton",initialFocus:E}=this.props,x=e?fe.createElement(mC,null):fe.createElement($y,null);return fe.createElement("div",{ref:this.anchorRef,"data-test":S,className:"jsx-2116647326"},fe.createElement(Jn,{name:l,value:u,icon:r,small:p,large:f,primary:g,secondary:b,destructive:y,disabled:w,onClick:this.onClick,type:v,tabIndex:T,className:bn(s),initialFocus:E,dataTest:`${S}-button`},n),fe.createElement(Jn,{name:l,value:u,small:p,large:f,primary:g,secondary:b,destructive:y,disabled:w,onClick:this.onToggle,type:v,tabIndex:T,className:bn(s,Lw.className),dataTest:`${S}-toggle`,title:Qe.t("Toggle dropdown"),"aria-label":Qe.t("Toggle dropdown")},x),e&&fe.createElement(vv,{onBackdropClick:this.onToggle,transparent:!0},fe.createElement(Pf,{dataTest:`${S}-menu`,placement:"bottom-end",reference:this.anchorRef},t)),Lw.styles,fe.createElement(_t,{id:"2116647326"},["div.jsx-2116647326{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;color:inherit;white-space:nowrap;position:relative;z-index:0;}","div.jsx-2116647326>button:first-child{border-start-end-radius:0;border-end-end-radius:0;border-inline-end:0;}","div.jsx-2116647326>button:last-child{border-start-start-radius:0;border-end-start-radius:0;}"]))}}$d(Av,"defaultProps",{dataTest:"dhis2-uicore-splitbutton"});Av.propTypes={children:Q.string,className:Q.string,component:Q.element,dataTest:Q.string,destructive:Q.bool,disabled:Q.bool,icon:Q.element,initialFocus:Q.bool,large:Iw,name:Q.string,primary:Q.bool,secondary:Q.bool,small:Iw,tabIndex:Q.string,type:Q.oneOf(["submit","reset","button"]),value:Q.string,onClick:Q.func};var P5=void 0;const I5=(i,e,t)=>{let n;return function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];const r=P5,p=()=>{n=null,i.apply(r,l)};clearTimeout(n),n=setTimeout(p,e)}},LC=i=>{let{dataTest:e,onToggle:t,children:n,tabIndex:s="0",error:l,warning:u,valid:r,disabled:p,dense:f,className:g,inputRef:b}=i;const y=bn(g,"root",{error:l,warning:u,valid:r,disabled:p,dense:f});return fe.createElement("div",{onClick:t,tabIndex:s,ref:b,"data-test":e,className:_t.dynamic([["1568723238",[Oe.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,Oe.grey100,Oe.grey500,Jt.disabled]]])+" "+(y||"")},fe.createElement("div",{className:_t.dynamic([["1568723238",[Oe.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,Oe.grey100,Oe.grey500,Jt.disabled]]])+" root-children"},n),fe.createElement("div",{className:_t.dynamic([["1568723238",[Oe.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,Oe.grey100,Oe.grey500,Jt.disabled]]])+" root-right"},fe.createElement($y,null)),fe.createElement(_t,{id:"1568723238",dynamic:[Oe.grey500,Jt.focus,Jt.focus,Jt.valid,Jt.warning,Jt.error,Oe.grey100,Oe.grey500,Jt.disabled]},[`.root.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:white;border-radius:3px;border:1px solid ${Oe.grey500};box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:40px;padding-block:6px;padding-inline:12px;box-shadow:inset 0 0 1px 0 rgba(48,54,60,0.1);}`,`.root.__jsx-style-dynamic-selector:not(.disabled):focus,.root.__jsx-style-dynamic-selector:not(.disabled):active{outline:none;box-shadow:inset 0 0 0 2px ${Jt.focus};border-color:${Jt.focus};}`,`.root.valid.__jsx-style-dynamic-selector{border-color:${Jt.valid};}`,`.root.warning.__jsx-style-dynamic-selector{border-color:${Jt.warning};}`,`.root.error.__jsx-style-dynamic-selector{border-color:${Jt.error};}`,`.root.disabled.__jsx-style-dynamic-selector{background-color:${Oe.grey100};border-color:${Oe.grey500};color:${Jt.disabled};cursor:not-allowed;}`,".root.dense.__jsx-style-dynamic-selector{padding-block:2px;padding-inline:8px;min-height:32px;}",".root-children.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".root-right.__jsx-style-dynamic-selector{margin-block-start:4px;margin-inline-start:8px;}"]))};LC.propTypes={dataTest:Q.string.isRequired,inputRef:Q.object.isRequired,onToggle:Q.func.isRequired,children:Q.element,className:Q.string,dense:Q.bool,disabled:Q.bool,error:Xr,tabIndex:Q.string,valid:Xr,warning:Xr};const zC=i=>{let{children:e,dataTest:t,maxHeight:n="280px",menuWidth:s,onClick:l,selectRef:u}=i;return fe.createElement(vv,{onBackdropClick:l,transparent:!0},fe.createElement(Pf,{reference:u,placement:"bottom-start",observeReferenceResize:!0},fe.createElement("div",{"data-test":`${t}-menuwrapper`,className:_t.dynamic([["1363246346",[s,n,Oe.white,Oe.grey200,Pg.e300]]])},e,fe.createElement(_t,{id:"1363246346",dynamic:[s,n,Oe.white,Oe.grey200,Pg.e300]},[`div.__jsx-style-dynamic-selector{width:${s};height:auto;max-height:${n};overflow:auto;background:${Oe.white};border:1px solid ${Oe.grey200};border-radius:3px;box-shadow:${Pg.e300};}`]))))};zC.propTypes={dataTest:Q.string.isRequired,menuWidth:Q.string.isRequired,selectRef:Q.object.isRequired,children:Q.node,maxHeight:Q.string,onClick:Q.func};function eo(i,e,t){return(e=D5(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function D5(i){var e=R5(i,"string");return typeof e=="symbol"?e:e+""}function R5(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}const L5=27,z5=32,N5=38,O5=40;class Uy extends $e.Component{constructor(){super(...arguments),eo(this,"state",{open:!1,menuWidth:"auto"}),eo(this,"selectRef",fe.createRef()),eo(this,"inputRef",fe.createRef()),eo(this,"onResize",I5(()=>{const e=this.getMenuWidth();this.state.menuWidth!==e&&this.setState({menuWidth:e})},50)),eo(this,"handleFocusInput",()=>{this.inputRef.current.focus()}),eo(this,"onFocus",e=>{const{onFocus:t,disabled:n,selected:s}=this.props;n||!t||t({selected:s},e)}),eo(this,"handleOpen",()=>{this.setState({open:!0,menuWidth:this.getMenuWidth()})}),eo(this,"handleClose",()=>{this.setState({open:!1})}),eo(this,"onToggle",e=>{this.props.disabled||(e.stopPropagation(),this.state.open?this.handleClose():this.handleOpen())}),eo(this,"onOutsideClick",e=>{const{onBlur:t,disabled:n,selected:s}=this.props;n||(this.handleClose(),t&&t({selected:s},e))}),eo(this,"onKeyDown",e=>{const{onKeyDown:t,disabled:n,selected:s}=this.props;if(n||(t&&t({selected:s},e),e.defaultPrevented))return;e.stopPropagation();const{open:l}=this.state,{keyCode:u}=e,r=!l&&(u===z5||u===N5||u===O5);if(l&&u===L5)return this.handleClose();if(r)return this.handleOpen()})}componentDidMount(){this.props.initialFocus&&this.inputRef.current.focus(),this.setState({menuWidth:this.getMenuWidth()}),window.addEventListener("resize",this.onResize)}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}getMenuWidth(){const{offsetWidth:e}=this.inputRef.current,{menuWidth:t}=this.state;return e&&`${e}px`!==t?`${e}px`:t}render(){const{open:e,menuWidth:t}=this.state,{children:n,className:s,selected:l,onChange:u,tabIndex:r,maxHeight:p,error:f,warning:g,valid:b,disabled:y,dense:w,dataTest:v}=this.props,T={selected:l,onChange:u,options:n,disabled:y},S=fe.cloneElement(this.props.input,T),E={selected:l,onChange:u,options:n,handleClose:this.handleClose,handleFocusInput:this.handleFocusInput},x=fe.cloneElement(this.props.menu,E);return fe.createElement("div",{className:s,ref:this.selectRef,onFocus:this.onFocus,onKeyDown:this.onKeyDown,"data-test":v},fe.createElement(LC,{onToggle:this.onToggle,inputRef:this.inputRef,tabIndex:y?"-1":r,error:f,warning:g,valid:b,disabled:y,dense:w,dataTest:`${v}-input`},S),e&&fe.createElement(zC,{onClick:this.onOutsideClick,maxHeight:p,selectRef:this.selectRef,menuWidth:t,dataTest:`${v}-menu`},x))}}eo(Uy,"defaultProps",{dataTest:"dhis2-uicore-select"});Uy.propTypes={input:Q.element.isRequired,menu:Q.element.isRequired,selected:Q.oneOfType([Q.string,Q.arrayOf(Q.string)]).isRequired,children:Q.node,className:Q.string,dataTest:Q.string,dense:Q.bool,disabled:Q.bool,error:Xr,initialFocus:Q.bool,maxHeight:Q.string,tabIndex:Q.string,valid:Xr,warning:Xr,onBlur:Q.func,onChange:Q.func,onFocus:Q.func,onKeyDown:Q.func};const Mv=i=>{let{message:e,className:t,dataTest:n}=i;return fe.createElement("div",{"data-test":n,className:_t.dynamic([["3603755746",[Gt.dp16,Oe.grey700,Jt.fonts,Gt.dp8,Gt.dp24]]])+" "+(bn(t,"container")||"")},fe.createElement("div",{className:_t.dynamic([["3603755746",[Gt.dp16,Oe.grey700,Jt.fonts,Gt.dp8,Gt.dp24]]])},fe.createElement(Qo,{small:!0})),e,fe.createElement(_t,{id:"3603755746",dynamic:[Gt.dp16,Oe.grey700,Jt.fonts,Gt.dp8,Gt.dp24]},[`.container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:${Gt.dp16};-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:${Oe.grey700};font-family:${Jt.fonts};font-size:13px;padding-block:${Gt.dp8};padding-inline:${Gt.dp24};}`]))};Mv.propTypes={dataTest:Q.string.isRequired,className:Q.string,message:Q.string};const bb=i=>{let{value:e,onChange:t,placeholder:n,className:s,dataTest:l}=i;return fe.createElement("div",{className:_t.dynamic([["730881408",[Oe.white,Gt.dp8,Gt.dp8,Gt.dp4,Gt.dp8]]])+" "+(s||"")},fe.createElement(sC,{dense:!0,dataTest:l,value:e,onChange:t,type:"text",name:"filter",placeholder:n,initialFocus:!0}),fe.createElement(_t,{id:"730881408",dynamic:[Oe.white,Gt.dp8,Gt.dp8,Gt.dp4,Gt.dp8]},[`div.__jsx-style-dynamic-selector{position:-webkit-sticky;position:sticky;-webkit-inset-block-start:0;-ms-intb-rlock-start:0;inset-block-start:0;background:${Oe.white};padding-block-start:${Gt.dp8};padding-inline-end:${Gt.dp8};padding-block-end:${Gt.dp4};padding-inline-start:${Gt.dp8};z-index:1;}`]))};bb.propTypes={dataTest:Q.string.isRequired,value:Q.string.isRequired,className:Q.string,placeholder:Q.string,onChange:Q.func};const NC=i=>{let{message:e,className:t}=i;return fe.createElement("div",{className:_t.dynamic([["3788156646",[Oe.grey700,Jt.fonts,Gt.dp8,Gt.dp24]]])+" "+(t||"")},e,fe.createElement(_t,{id:"3788156646",dynamic:[Oe.grey700,Jt.fonts,Gt.dp8,Gt.dp24]},[`div.__jsx-style-dynamic-selector{color:${Oe.grey700};font-family:${Jt.fonts};font-size:13px;line-height:16px;padding-block:${Gt.dp8};padding-inline:${Gt.dp24};text-align:center;}`]))};NC.propTypes={message:Q.string.isRequired,className:Q.string};const Pv=i=>i&&"props"in i&&"value"in i.props&&"label"in i.props,Iv=i=>fe.Children.toArray(i).filter(e=>e!==null&&e!==!1&&e!==void 0),OC=(i,e)=>fe.Children.toArray(e).find(t=>t.props?i===t.props.value:!1),j5=(i,e)=>e.find(t=>i===t),jC=(i,e)=>e.filter(t=>t!==i);function Xg(){return Xg=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Xg.apply(null,arguments)}function zw(i,e,t){return(e=F5(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function F5(i){var e=B5(i,"string");return typeof e=="symbol"?e:e+""}function B5(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}let Dv=class extends $e.Component{constructor(){super(...arguments),zw(this,"state",{filter:""}),zw(this,"onFilterChange",e=>{let{value:t}=e;this.setState({filter:t})})}render(){const{dataTest:e,options:t,onChange:n,selected:s,empty:l,handleClose:u,handleFocusInput:r,placeholder:p,noMatchText:f,Menu:g}=this.props,{filter:b}=this.state,y={onChange:n,selected:s,empty:l,handleClose:u,handleFocusInput:r,dataTest:e},w=Iv(t);if(fe.Children.count(w)===0||!b)return fe.createElement(fe.Fragment,null,fe.createElement(bb,{dataTest:`${e}-filterinput`,placeholder:p,value:b,onChange:this.onFilterChange}),fe.createElement(g,Xg({},y,{options:t})));const v=fe.Children.map(t,S=>{if(!Pv(S))return null;const{label:x}=S.props;return x.toLowerCase().includes(b.toLowerCase())?S:null}),T=fe.Children.count(v)>0;return fe.createElement(fe.Fragment,null,fe.createElement(bb,{dataTest:`${e}-filterinput`,placeholder:p,value:b,onChange:this.onFilterChange}),T?fe.createElement(g,Xg({},y,{options:v})):fe.createElement(NC,{message:f}))}};Dv.propTypes={Menu:Q.elementType.isRequired,dataTest:Q.string.isRequired,noMatchText:Q.string.isRequired,selected:Q.oneOfType([Q.string,Q.arrayOf(Q.string)]).isRequired,empty:Q.node,handleClose:Q.func,handleFocusInput:Q.func,options:Q.node,placeholder:Q.string,onChange:Q.func};const Rv=i=>{let{message:e,className:t,dataTest:n}=i;return fe.createElement("div",{"data-test":n,className:_t.dynamic([["3788156646",[Oe.grey700,Jt.fonts,Gt.dp8,Gt.dp24]]])+" "+(t||"")},e,fe.createElement(_t,{id:"3788156646",dynamic:[Oe.grey700,Jt.fonts,Gt.dp8,Gt.dp24]},[`div.__jsx-style-dynamic-selector{color:${Oe.grey700};font-family:${Jt.fonts};font-size:13px;line-height:16px;padding-block:${Gt.dp8};padding-inline:${Gt.dp24};text-align:center;}`]))};Rv.propTypes={dataTest:Q.string.isRequired,message:Q.string.isRequired,className:Q.string};const $5=4,Nw={styles:fe.createElement(_t,{id:"1892168270"},[`.jsx-1892168270{z-index:${rC.applicationTop};}`,'div[data-popper-reference-hidden="true"].jsx-1892168270{visibility:hidden;}']),className:"jsx-1892168270"},U5={name:"offset",options:{offset:[0,$5]}},V5={name:"hide"},G5={name:"flip",options:{altBoundary:!0}},Vy=i=>{let{children:e,className:t,closeDelay:n=200,content:s,dataTest:l="dhis2-uicore-tooltip",maxWidth:u=300,openDelay:r=200,placement:p="top"}=i;const[f,g]=$e.useState(!1),b=$e.useRef(),y=$e.useRef(null),w=$e.useRef(null),v=()=>{clearTimeout(w.current),y.current=setTimeout(()=>{g(!0)},r)},T=()=>{clearTimeout(y.current),w.current=setTimeout(()=>{g(!1)},n)},S=()=>{clearTimeout(w.current),y.current=setTimeout(()=>{g(!0)},r)},E=()=>{clearTimeout(y.current),w.current=setTimeout(()=>{g(!1)},n)},x=A=>{A.key==="Escape"&&(w.current=setTimeout(()=>{g(!1)},n))};return $e.useEffect(()=>(document.addEventListener("keydown",x),()=>{clearTimeout(y.current),clearTimeout(w.current),document.removeEventListener("keydown",x)}),[]),fe.createElement(fe.Fragment,null,typeof e=="function"?e({onMouseOver:v,onMouseOut:T,onFocus:S,onBlur:E,ref:b}):fe.createElement("span",{onMouseOver:v,onMouseOut:T,onFocus:S,onBlur:E,ref:b,tabIndex:0,"aria-describedby":f?"tooltipContenDhis2Ui":"","data-test":`${l}-reference`,className:_t.dynamic([["3515683788",[u,Oe.grey900,Oe.white]]])},e),f&&fe.createElement(s5,null,fe.createElement(Pf,{className:Nw.className,placement:p,reference:b,modifiers:[U5,G5,V5]},fe.createElement("div",{id:"tooltipContenDhis2Ui",onMouseOver:v,onMouseOut:T,"data-test":`${l}-content`,role:"tooltip",className:_t.dynamic([["3515683788",[u,Oe.grey900,Oe.white]]])+" "+(t||"")},s))),Nw.styles,fe.createElement(_t,{id:"3515683788",dynamic:[u,Oe.grey900,Oe.white]},[`div.__jsx-style-dynamic-selector{max-width:${u}px;}`,`div.__jsx-style-dynamic-selector{padding:4px 6px;background-color:${Oe.grey900};border-radius:3px;color:${Oe.white};font-size:13px;line-height:17px;}`]))};Vy.propTypes={children:Q.oneOfType([Q.node,Q.func]),className:Q.string,closeDelay:Q.number,content:Q.node,dataTest:Q.string,maxWidth:Q.number,openDelay:Q.number,placement:Q.oneOf(["top","right","bottom","left"])};const Lv=i=>{let{onClear:e,clearText:t,className:n,dataTest:s}=i;return fe.createElement(Vy,{openDelay:500,content:t},fe.createElement("button",{"data-test":s,onClick:e,type:"button",className:_t.dynamic([["2606883952",[Oe.grey500,Oe.grey800,Oe.grey200,Jt.focus]]])+" "+(n||"")},fe.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:_t.dynamic([["2606883952",[Oe.grey500,Oe.grey800,Oe.grey200,Jt.focus]]])},fe.createElement("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16Zm3.536-5.879a1 1 0 1 1-1.415 1.414l-2.12-2.12-2.122 2.121a1 1 0 1 1-1.415-1.414L6.586 8 4.464 5.878A1 1 0 1 1 5.88 4.464L8 6.586l2.121-2.121a1 1 0 1 1 1.415 1.414L9.415 8l2.12 2.121Z",fill:"none",className:_t.dynamic([["2606883952",[Oe.grey500,Oe.grey800,Oe.grey200,Jt.focus]]])})),fe.createElement(_t,{id:"2606883952",dynamic:[Oe.grey500,Oe.grey800,Oe.grey200,Jt.focus]},["button.__jsx-style-dynamic-selector{background:none;border:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;height:24px;width:24px;border-radius:3px;}",`button.__jsx-style-dynamic-selector svg.__jsx-style-dynamic-selector path.__jsx-style-dynamic-selector{fill:${Oe.grey500};}`,`button.__jsx-style-dynamic-selector:hover svg.__jsx-style-dynamic-selector path.__jsx-style-dynamic-selector{fill:${Oe.grey800};}`,`button.__jsx-style-dynamic-selector:hover{background:${Oe.grey200};}`,`button.__jsx-style-dynamic-selector:focus{outline:2px solid ${Jt.focus};}`])))};Lv.propTypes={clearText:Q.string.isRequired,dataTest:Q.string.isRequired,onClear:Q.func.isRequired,className:Q.string};const zv=i=>{let{placeholder:e,className:t,dataTest:n}=i;return e?fe.createElement("div",{"data-test":n,className:_t.dynamic([["1027033961",[Oe.grey600]]])+" "+(t||"")},e,fe.createElement(_t,{id:"1027033961",dynamic:[Oe.grey600]},[`div.__jsx-style-dynamic-selector{color:${Oe.grey600};-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`])):null};zv.propTypes={dataTest:Q.string.isRequired,className:Q.string,placeholder:Q.string};const Nv=i=>{let{prefix:e,className:t,dataTest:n}=i;return e?fe.createElement("div",{"data-test":n,className:_t.dynamic([["1343055987",[Oe.grey600,Gt.dp12]]])+" "+(t||"")},e,fe.createElement(_t,{id:"1343055987",dynamic:[Oe.grey600,Gt.dp12]},[`div.__jsx-style-dynamic-selector{color:${Oe.grey600};padding-inline-end:${Gt.dp12};font-size:14px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`])):null};Nv.propTypes={dataTest:Q.string.isRequired,className:Q.string,prefix:Q.string};const H5=(i,e)=>{e.stopPropagation(),e.preventDefault()},q5=i=>{let{isActive:e,onChange:t,selected:n,value:s}=i;return(l,u)=>{if(u.stopPropagation(),e){const f={selected:jC(s,n)};return t(f,u)}const r={selected:n.concat([s])};return t(r,u)}},Ov=i=>{let{options:e,onChange:t,selected:n,empty:s="",dataTest:l}=i;const u=Iv(e);if(fe.Children.count(u)===0)return typeof s=="string"?fe.createElement(Rv,{message:s,dataTest:`${l}-empty`}):s;const r=fe.Children.map(e,p=>{if(!Pv(p))return p;const{value:g,label:b,disabled:y}=p.props,w=!!j5(g,n),v=y?H5:q5({isActive:w,onChange:t,selected:n,value:g,label:b});return fe.cloneElement(p,{...p.props,onClick:v,active:w})});return fe.createElement(fe.Fragment,null,r)};Ov.propTypes={dataTest:Q.string.isRequired,empty:Q.node,options:Q.node,selected:Q.arrayOf(Q.string),onChange:Q.func};const FC=i=>{let{dataTest:e,options:t,onChange:n,selected:s,empty:l,handleClose:u,handleFocusInput:r,placeholder:p,noMatchText:f}=i;return fe.createElement(Dv,{dataTest:e,options:t,onChange:n,selected:s,empty:l,handleClose:u,handleFocusInput:r,placeholder:p,noMatchText:f,Menu:Ov})};FC.propTypes={dataTest:Q.string.isRequired,noMatchText:Q.string.isRequired,empty:Q.node,handleClose:Q.func,handleFocusInput:Q.func,options:Q.node,placeholder:Q.string,selected:Q.arrayOf(Q.string),onChange:Q.func};const BC=i=>{let{children:e,overflow:t}=i;return fe.createElement("span",{className:_t.dynamic([["765109298",[Gt.dp12]]])+" "+(bn({overflow:t})||"")},e,fe.createElement(_t,{id:"765109298",dynamic:[Gt.dp12]},[`span.__jsx-style-dynamic-selector{margin:0 ${Gt.dp12};color:inherit;white-space:nowrap;}`,".overflow.__jsx-style-dynamic-selector{max-width:150px;overflow:hidden;text-overflow:ellipsis;}"]))};BC.propTypes={children:Q.any,overflow:Q.bool};const $C=i=>{let{icon:e,dataTest:t}=i;return e?fe.createElement("span",{"data-test":t,className:_t.dynamic([["1889825154",[Gt.dp4]]])},e,fe.createElement(_t,{id:"1889825154",dynamic:[Gt.dp4]},[`span.__jsx-style-dynamic-selector{width:24px;height:24px;margin-inline-start:${Gt.dp4};margin-inline-end:-6px;border-radius:50%;overflow:hidden;}`,"span.__jsx-style-dynamic-selector>*{max-height:24px;max-width:24px;}"])):null};$C.propTypes={dataTest:Q.string.isRequired,icon:Q.element};function UC(i){let{className:e}=i;return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",className:"jsx-2898942518 "+(e||"")},fe.createElement("path",{d:"M11.2928932,3.29289322 L12.7071068,4.70710678 L9.41389322,7.99989322 L12.7071068,11.2928932 L11.2928932,12.7071068 L7.99989322,9.41389322 L4.70710678,12.7071068 L3.29289322,11.2928932 L6.58589322,7.99989322 L3.29289322,4.70710678 L4.70710678,3.29289322 L7.99989322,6.58589322 L11.2928932,3.29289322 Z",className:"jsx-2898942518"}),fe.createElement(_t,{id:"2898942518"},["svg.jsx-2898942518{fill:inherit;height:16px;width:16px;vertical-align:middle;pointer-events:none;}"]))}UC.propTypes={className:Q.string};const Ig=["span.jsx-2824632002{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:20px;width:20px;margin-inline-end:4px;border-radius:12px;margin-inline-start:-8px;}",`span.jsx-2824632002:hover{background:${Oe.grey400};}`];Ig.__hash="2824632002";const Ow={styles:fe.createElement(_t,{id:"2658726446"},[`svg.jsx-2658726446{fill:${Oe.grey600};height:16px;width:16px;cursor:pointer;opacity:1;pointer-events:all;}`]),className:"jsx-2658726446"},VC=i=>{let{onRemove:e,dataTest:t}=i;return e?fe.createElement("span",{onClick:n=>{n.stopPropagation(),e({},n)},"data-test":t,className:`jsx-${Ig.__hash}`},fe.createElement(UC,{className:Ow.className}),Ow.styles,fe.createElement(_t,{id:Ig.__hash},Ig)):null};VC.propTypes={dataTest:Q.string.isRequired,onRemove:Q.func};const Pd="4",GC=i=>{var e,t,n,s;let{selected:l,dense:u,disabled:r,dragging:p,overflow:f,className:g,children:b,onRemove:y,onClick:w,icon:v,dataTest:T="dhis2-uicore-chip",marginBottom:S=4,marginLeft:E,marginRight:x,marginTop:A=4,marginInlineStart:D,marginInlineEnd:C}=i;return fe.createElement("span",{onClick:I=>{!r&&w&&w({},I)},"data-test":T,className:_t.dynamic([["3780556490",[Oe.grey200,Oe.grey900,Oe.grey300,Jt.secondary600,Oe.white]],["1687525377",[S&&`margin-bottom: ${S}px;`,(e=D??E)!==null&&e!==void 0?e:Pd,(t=C??x)!==null&&t!==void 0?t:Pd,A&&`margin-top: ${A}px`]]])+" "+(bn(g,{selected:l,dense:u,disabled:r,dragging:p})||"")},fe.createElement($C,{icon:v,dataTest:`${T}-icon`}),fe.createElement(BC,{overflow:f},b),fe.createElement(VC,{onRemove:y,dataTest:`${T}-remove`}),fe.createElement(_t,{id:"3780556490",dynamic:[Oe.grey200,Oe.grey900,Oe.grey300,Jt.secondary600,Oe.white]},[`span.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:32px;border-radius:16px;background-color:${Oe.grey200};font-size:14px;line-height:16px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:${Oe.grey900};}`,".dense.__jsx-style-dynamic-selector{height:24px;font-size:13px;line-height:15px;}",`span.__jsx-style-dynamic-selector:hover{background-color:${Oe.grey300};}`,`.selected.__jsx-style-dynamic-selector{background-color:${Jt.secondary600};font-weight:500;}`,".selected.__jsx-style-dynamic-selector:hover{background-color:#00695c;}",`.selected.__jsx-style-dynamic-selector,.selected.__jsx-style-dynamic-selector .icon.__jsx-style-dynamic-selector,.selected.__jsx-style-dynamic-selector .remove-icon.__jsx-style-dynamic-selector{color:${Oe.white};}`,".disabled.__jsx-style-dynamic-selector{cursor:not-allowed;opacity:0.3;}",".disabled.__jsx-style-dynamic-selector .remove-icon.__jsx-style-dynamic-selector{pointer-events:none;}",".dragging.__jsx-style-dynamic-selector{box-shadow:0 3px 1px -2px rgba(0,0,0,0.2), 0 2px 2px 0 rgba(0,0,0,0.14), 0 1px 5px 0 rgba(0,0,0,0.12);}"]),fe.createElement(_t,{id:"1687525377",dynamic:[S&&`margin-bottom: ${S}px;`,(e=D??E)!==null&&e!==void 0?e:Pd,(t=C??x)!==null&&t!==void 0?t:Pd,A&&`margin-top: ${A}px`]},[`span.__jsx-style-dynamic-selector{${S&&`margin-bottom: ${S}px;`} margin-inline-start:${(n=D??E)!==null&&n!==void 0?n:Pd}px;margin-inline-end:${(s=C??x)!==null&&s!==void 0?s:Pd}px;${A&&`margin-top: ${A}px`};}`]))};GC.propTypes={children:Q.any,className:Q.string,dataTest:Q.string,dense:Q.bool,disabled:Q.bool,dragging:Q.bool,icon:Q.element,marginBottom:Q.number,marginInlineEnd:Q.number,marginInlineStart:Q.number,marginLeft:Q.number,marginRight:Q.number,marginTop:Q.number,overflow:Q.bool,selected:Q.bool,onClick:Q.func,onRemove:Q.func};const W5=i=>{let{selected:e,onChange:t,value:n}=i;return(s,l)=>{const r={selected:jC(n,e)};t(r,l)}},HC=i=>{let{selected:e,onChange:t,disabled:n,options:s}=i;return fe.createElement(fe.Fragment,null,e.map(l=>{const u=OC(l,s);if(!u){const g=`There is no option with the value: "${l}". Make sure that all the values passed to the selected prop match the value of an existing option.`;console.error(g)}const r=u&&u.props.disabled||n,p=u?u.props.label:l,f=r?void 0:W5({selected:e,onChange:t,value:l});return fe.createElement(GC,{key:l,onRemove:f,disabled:r,marginBottom:0,marginLeft:0,marginTop:0,marginRight:0,overflow:!0,dense:!0},p)}))};HC.propTypes={disabled:Q.bool,options:Q.node,selected:Q.arrayOf(Q.string),onChange:Q.func};const qC=i=>{let{selected:e,onChange:t,clearable:n,clearText:s,placeholder:l,dataTest:u,prefix:r,options:p,className:f,disabled:g,inputMaxHeight:b="100px"}=i;const y=e.length>0,w=v=>{const T={selected:[]};v.stopPropagation(),t(T,v)};return fe.createElement("div",{className:_t.dynamic([["64009541",[Oe.grey900]],["1331770409",[b]]])+" "+(bn("root",f)||"")},fe.createElement(Nv,{prefix:r,dataTest:`${u}-prefix`}),!y&&!r&&fe.createElement(zv,{placeholder:l,dataTest:`${u}-placeholder`}),y&&fe.createElement("div",{className:_t.dynamic([["64009541",[Oe.grey900]],["1331770409",[b]]])+" root-input"},fe.createElement(HC,{selected:e,onChange:t,options:p,disabled:g})),y&&n&&!g&&fe.createElement("div",{className:_t.dynamic([["64009541",[Oe.grey900]],["1331770409",[b]]])+" root-right"},fe.createElement(Lv,{onClear:w,clearText:s,dataTest:`${u}-clear`})),fe.createElement(_t,{id:"64009541",dynamic:[Oe.grey900]},[`.root.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:${Oe.grey900};font-size:14px;line-height:16px;}`,".root-input.__jsx-style-dynamic-selector{overflow-y:auto;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:wrap;-ms-flex-flow:wrap;flex-flow:wrap;gap:4px;}",".root-right.__jsx-style-dynamic-selector{margin-inline-start:auto;}"]),fe.createElement(_t,{id:"1331770409",dynamic:[b]},[`.root-input.__jsx-style-dynamic-selector{max-height:${b};}`]))};qC.propTypes={dataTest:Q.string.isRequired,className:Q.string,clearText:Rr(i=>i.clearable,Q.string),clearable:Q.bool,disabled:Q.bool,inputMaxHeight:Q.string,options:Q.node,placeholder:Q.string,prefix:Q.string,selected:Q.arrayOf(Q.string),onChange:Q.func};const Y5=[],WC=i=>{let{className:e,selected:t=Y5,tabIndex:n,maxHeight:s,inputMaxHeight:l,onChange:u,onFocus:r,onKeyDown:p,onBlur:f,loading:g,error:b,warning:y,valid:w,disabled:v,children:T,clearable:S,clearText:E,filterable:x,filterPlaceholder:A,placeholder:D,prefix:C,empty:I,loadingText:N,noMatchText:W,initialFocus:Y,dense:X,dataTest:O="dhis2-uicore-multiselect"}=i;const V=x?fe.createElement(FC,{dataTest:O,empty:I,noMatchText:W,placeholder:A}):fe.createElement(Ov,{empty:I,dataTest:O});return fe.createElement("div",{"data-test":O,className:_t.dynamic([["2180377457",[Gt.dp8]]])+" root"},fe.createElement("div",{className:_t.dynamic([["2180377457",[Gt.dp8]]])+" root-input"},fe.createElement(Uy,{className:e,selected:t,input:fe.createElement(qC,{clearable:S,clearText:E,dataTest:O,placeholder:D,prefix:C,inputMaxHeight:l}),menu:V,tabIndex:n,maxHeight:s,onChange:u,onFocus:r,onKeyDown:p,onBlur:f,error:b,warning:y,valid:w,disabled:v,initialFocus:Y,dense:X},T,g&&fe.createElement(Mv,{message:N,dataTest:`${O}-loading`}))),fe.createElement(aC,{error:b,valid:w,warning:y}),fe.createElement(_t,{id:"2180377457",dynamic:[Gt.dp8]},[`.root.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:${Gt.dp8};}`,".root-input.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;}"]))};WC.propTypes={children:Q.node,className:Q.string,clearText:Rr(i=>i.clearable,Q.string),clearable:Q.bool,dataTest:Q.string,dense:Q.bool,disabled:Q.bool,empty:Q.node,error:Xr,filterPlaceholder:Q.string,filterable:Q.bool,initialFocus:Q.bool,inputMaxHeight:Q.string,loading:Q.bool,loadingText:Q.string,maxHeight:Q.string,noMatchText:Rr(i=>i.filterable,Q.string),placeholder:Q.string,prefix:Q.string,selected:Q.arrayOf(Q.string),tabIndex:Q.string,valid:Xr,warning:Xr,onBlur:Q.func,onChange:Q.func,onFocus:Q.func,onKeyDown:Q.func};const Z5="",X5={Clear:Z5,"No data found":"   ","Type to filter options":"  ","Loading options":" ","No options found":"    "},K5="",Q5={Clear:K5,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},J5="",eP={Clear:J5,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},tP="Vyistit",iP={Clear:tP,"No data found":"Nenalezena dn data","Type to filter options":"Zadnm filtrujete monosti","Loading options":"Monosti natn","No options found":"Nenalezeny dn monosti"},nP="Clear",rP={Clear:nP,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},sP="",aP={Clear:sP,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},oP="Limpiar",lP={Clear:oP,"No data found":"Datos no encontrados","Type to filter options":"Escriba para filtrar opciones","Loading options":"Cargando las opciones","No options found":"No se ha encontrado ninguna opcin"},cP="Limpiar",uP={Clear:cP,"No data found":"No se han encontrado datos","Type to filter options":"Escriba para filtrar opciones","Loading options":"Opciones de carga","No options found":"No se han encontrado opciones"},dP="Effacer",hP={Clear:dP,"No data found":"Aucune valeur trouve","Type to filter options":"","Loading options":"Chargement des options","No options found":""},pP="Hapus",fP={Clear:pP,"No data found":"Tidak ada data yang ditemukan","Type to filter options":"Tipe opsi filter","Loading options":"Opsi mengunggah","No options found":"Opsi tidak tersedia"},mP="",gP={Clear:mP,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},yP="",xP={Clear:yP,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},bP="",vP={Clear:bP,"No data found":"data ","Type to filter options":"","Loading options":"","No options found":""},_P="Fjern",wP={Clear:_P,"No data found":"Ingen data funnet","Type to filter options":"Skriv for  filtrere alternativer","Loading options":"Laster alternativer","No options found":"Ingen alternativer funnet"},TP="Duidelijk",CP={Clear:TP,"No data found":"Geen gegevens gevonden","Type to filter options":"Typ om opties te filteren","Loading options":"Laad opties","No options found":"Geen opties gevonden"},SP=" ",EP={Clear:SP,"No data found":"   ","Type to filter options":"","Loading options":"","No options found":""},kP="  ",AP={Clear:kP,"No data found":"      ","Type to filter options":"","Loading options":"","No options found":""},MP="Limpar",PP={Clear:MP,"No data found":"Dado no encontrado","Type to filter options":"Tipo de opes de filtros","Loading options":"","No options found":""},IP="Limpar",DP={Clear:IP,"No data found":"Dado no encontrado","Type to filter options":"","Loading options":"","No options found":""},RP="",LP={Clear:RP,"No data found":"  ","Type to filter options":"    ","Loading options":" ","No options found":"  "},zP="Klar",NP={Clear:zP,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},OP="Hams",jP={Clear:OP,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},FP=" ",BP={Clear:FP,"No data found":"   ","Type to filter options":"","Loading options":"","No options found":""},$P="",UP={Clear:$P,"No data found":"  ","Type to filter options":"  ","Loading options":" ","No options found":"  "},VP="",GP={Clear:VP,"No data found":"   ","Type to filter options":"","Loading options":"","No options found":""},HP="",qP={Clear:HP,"No data found":"Malumotlar topilmadi","Type to filter options":"","Loading options":"","No options found":""},WP="",YP={Clear:WP,"No data found":" ","Type to filter options":"","Loading options":" ","No options found":""},ZP="",XP={Clear:ZP,"No data found":"Malumotlar topilmadi","Type to filter options":"","Loading options":"","No options found":""},KP="Xa",QP={Clear:KP,"No data found":"Khng tm thy d liu","Type to filter options":"Nhp  lc ty chn","Loading options":"","No options found":""},JP="",eI={Clear:JP,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},tI="",iI={Clear:tI,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},Wn="default";Qe.addResources("ar",Wn,X5);Qe.addResources("ar_IQ",Wn,Q5);Qe.addResources("ckb",Wn,eP);Qe.addResources("cs",Wn,iP);Qe.addResources("da",Wn,rP);Qe.addResources("en",Wn,aP);Qe.addResources("es",Wn,lP);Qe.addResources("es_419",Wn,uP);Qe.addResources("fr",Wn,hP);Qe.addResources("id",Wn,fP);Qe.addResources("km",Wn,gP);Qe.addResources("lo",Wn,xP);Qe.addResources("my",Wn,vP);Qe.addResources("nb",Wn,wP);Qe.addResources("nl",Wn,CP);Qe.addResources("prs",Wn,EP);Qe.addResources("ps",Wn,AP);Qe.addResources("pt",Wn,PP);Qe.addResources("pt_BR",Wn,DP);Qe.addResources("ru",Wn,LP);Qe.addResources("sv",Wn,NP);Qe.addResources("tet",Wn,jP);Qe.addResources("tg",Wn,BP);Qe.addResources("uk",Wn,UP);Qe.addResources("ur",Wn,GP);Qe.addResources("uz_Latn",Wn,qP);Qe.addResources("uz_UZ_Cyrl",Wn,YP);Qe.addResources("uz_UZ_Latn",Wn,XP);Qe.addResources("vi",Wn,QP);Qe.addResources("zh",Wn,eI);Qe.addResources("zh_CN",Wn,iI);function nI(i,e,t){return(e=rI(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function rI(i){var e=sI(i,"string");return typeof e=="symbol"?e:e+""}function sI(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}const _p=(i,e)=>typeof i=="function"?i(e):i;class po extends fe.Component{render(){const{className:e,onChange:t,onFocus:n,onKeyDown:s,onBlur:l,required:u,label:r,valid:p,error:f,disabled:g,warning:b,loading:y,selected:w=po.defaultProps.selected,tabIndex:v,helpText:T,validationText:S,maxHeight:E,inputMaxHeight:x,inputWidth:A,children:D,clearable:C,clearText:I=po.defaultProps.clearText,filterable:N,filterPlaceholder:W=po.defaultProps.filterPlaceholder,placeholder:Y,prefix:X,empty:O=po.defaultProps.empty,loadingText:V=po.defaultProps.loadingText,noMatchText:$=po.defaultProps.noMatchText,initialFocus:L,dense:R,dataTest:G=po.defaultProps.dataTest}=this.props;return fe.createElement(oC,{className:e,dataTest:G,disabled:g,required:u,label:r,helpText:T,validationText:S,error:f,warning:b,valid:p},fe.createElement($p,{width:A,minWidth:"100px"},fe.createElement(WC,{selected:w,tabIndex:v,maxHeight:E,inputMaxHeight:x,onChange:t,onFocus:n,onKeyDown:s,onBlur:l,loading:y,error:f,warning:b,valid:p,disabled:g,clearable:C,clearText:_p(I),filterable:N,filterPlaceholder:_p(W),placeholder:Y,prefix:X,empty:_p(O),loadingText:_p(V),noMatchText:_p($),initialFocus:L,dense:R},D)))}}nI(po,"defaultProps",{selected:[],dataTest:"dhis2-uiwidgets-multiselectfield",clearText:()=>Qe.t("Clear"),empty:()=>Qe.t("No data found"),filterPlaceholder:()=>Qe.t("Type to filter options"),loadingText:()=>Qe.t("Loading options"),noMatchText:()=>Qe.t("No options found")});po.propTypes={children:Q.node,className:Q.string,clearText:Q.oneOfType([Q.string,Q.func]),clearable:Q.bool,dataTest:Q.string,dense:Q.bool,disabled:Q.bool,empty:Q.oneOfType([Q.node,Q.func]),error:Xr,filterPlaceholder:Q.oneOfType([Q.node,Q.func]),filterable:Q.bool,helpText:Q.string,initialFocus:Q.bool,inputMaxHeight:Q.string,inputWidth:Q.string,label:Q.string,loading:Q.bool,loadingText:Q.oneOfType([Q.string,Q.func]),maxHeight:Q.string,noMatchText:Q.oneOfType([Q.string,Q.func]),placeholder:Q.string,prefix:Q.string,required:Q.bool,selected:Q.arrayOf(Q.string),tabIndex:Q.string,valid:Xr,validationText:Q.string,warning:Xr,onBlur:Q.func,onChange:Q.func,onFocus:Q.func,onKeyDown:Q.func};const{styles:aI,className:oI}={styles:fe.createElement(_t,{id:"2013783366"},[`.jsx-2013783366{padding:${Gt.dp8} ${Gt.dp12};}`]),className:"jsx-2013783366"},YC=i=>{let{label:e,active:t,disabled:n,onClick:s,className:l,dataTest:u="dhis2-uicore-multiselectoption",value:r}=i;return fe.createElement("div",{"data-test":u,"data-value":r,"data-label":e,className:_t.dynamic([["3813980210",[Oe.grey200]]])+" "+(bn(l,{disabled:n})||"")},fe.createElement(Rf,{name:e,className:oI,checked:t,label:e,onChange:s,disabled:n,dense:!0}),aI,fe.createElement(_t,{id:"3813980210",dynamic:[Oe.grey200]},[`div.__jsx-style-dynamic-selector:hover{background-color:${Oe.grey200};}`,"div.disabled.__jsx-style-dynamic-selector:hover{background-color:initial;}"]))};YC.propTypes={label:Q.string.isRequired,value:Q.string.isRequired,active:Q.bool,className:Q.string,dataTest:Q.string,disabled:Q.bool,onClick:Q.func};const lI=(i,e)=>{e.stopPropagation(),e.preventDefault()},jv=i=>{let{options:e,onChange:t,selected:n,empty:s="",handleFocusInput:l,handleClose:u,dataTest:r}=i;const p=Iv(e);if(fe.Children.count(p)===0)return typeof s=="string"?fe.createElement(Rv,{message:s,dataTest:`${r}-empty`}):s;const f=fe.Children.map(e,g=>{if(!Pv(g))return g;const{value:y,disabled:w}=g.props,v=y===n,T=(E,x)=>{const A={selected:y};x.stopPropagation(),t(A,x),u(),l()},S=v||w;return fe.cloneElement(g,{...g.props,onClick:S?lI:T,active:v})});return fe.createElement(fe.Fragment,null,f)};jv.propTypes={dataTest:Q.string.isRequired,empty:Q.node,handleClose:Q.func,handleFocusInput:Q.func,options:Q.node,selected:Q.string,onChange:Q.func};const ZC=i=>{let{dataTest:e,options:t,onChange:n,selected:s,empty:l,handleClose:u,handleFocusInput:r,placeholder:p,noMatchText:f}=i;return fe.createElement(Dv,{dataTest:e,options:t,onChange:n,selected:s,empty:l,handleClose:u,handleFocusInput:r,placeholder:p,noMatchText:f,Menu:jv})};ZC.propTypes={dataTest:Q.string.isRequired,noMatchText:Q.string.isRequired,empty:Q.node,handleClose:Q.func,handleFocusInput:Q.func,options:Q.node,placeholder:Q.string,selected:Q.string,onChange:Q.func};const XC=i=>{let{options:e,selected:t,className:n}=i;const s=OC(t,e);if(!s){const r=`There is no option with the value: "${t}". Make sure that the value passed to the selected prop matches the value of an existing option.`;console.error(r)}const l=s&&s.props.icon,u=s?s.props.label:t;return fe.createElement("div",{className:_t.dynamic([["1914911415",[Gt.dp8,Gt.dp16,Gt.dp16]]])+" "+(bn(n,"root")||"")},l&&fe.createElement("div",{className:_t.dynamic([["1914911415",[Gt.dp8,Gt.dp16,Gt.dp16]]])+" root-icon"},l),u,fe.createElement(_t,{id:"1914911415",dynamic:[Gt.dp8,Gt.dp16,Gt.dp16]},[".root.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",`.root-icon.__jsx-style-dynamic-selector{margin-inline-end:${Gt.dp8};width:${Gt.dp16};height:${Gt.dp16};overflow:hidden;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}`]))};XC.propTypes={className:Q.string,options:Q.node,selected:Q.string};const KC=i=>{let{selected:e,onChange:t,clearable:n,clearText:s,placeholder:l,dataTest:u,prefix:r,options:p,className:f,disabled:g,inputMaxHeight:b="100px"}=i;const y=e&&typeof e=="string",w=v=>{const T={selected:""};v.stopPropagation(),t(T,v)};return fe.createElement("div",{className:_t.dynamic([["2186325794",[Oe.grey900]],["1331770409",[b]]])+" "+(bn("root",f)||"")},fe.createElement(Nv,{prefix:r,dataTest:`${u}-prefix`}),!y&&!r&&fe.createElement(zv,{placeholder:l,dataTest:`${u}-placeholder`}),y&&fe.createElement("div",{className:_t.dynamic([["2186325794",[Oe.grey900]],["1331770409",[b]]])+" root-input"},fe.createElement(XC,{selected:e,options:p})),y&&n&&!g&&fe.createElement("div",{className:_t.dynamic([["2186325794",[Oe.grey900]],["1331770409",[b]]])+" root-right"},fe.createElement(Lv,{onClear:w,clearText:s,dataTest:`${u}-clear`})),fe.createElement(_t,{id:"2186325794",dynamic:[Oe.grey900]},[`.root.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:${Oe.grey900};font-size:14px;line-height:16px;}`,".root-input.__jsx-style-dynamic-selector{overflow-y:auto;-webkit-flex:1;-ms-flex:1;flex:1;}",".root-right.__jsx-style-dynamic-selector{margin-inline-start:auto;}"]),fe.createElement(_t,{id:"1331770409",dynamic:[b]},[`.root-input.__jsx-style-dynamic-selector{max-height:${b};}`]))};KC.propTypes={dataTest:Q.string.isRequired,className:Q.string,clearText:Rr(i=>i.clearable,Q.string),clearable:Q.bool,disabled:Q.bool,inputMaxHeight:Q.string,options:Q.node,placeholder:Q.string,prefix:Q.string,selected:Q.string,onChange:Q.func};const QC=i=>{let{className:e,selected:t="",tabIndex:n,maxHeight:s,inputMaxHeight:l,onChange:u,onFocus:r,onKeyDown:p,onBlur:f,loading:g,error:b,warning:y,valid:w,disabled:v,children:T,clearable:S,clearText:E,filterable:x,filterPlaceholder:A,placeholder:D,prefix:C,empty:I,loadingText:N,noMatchText:W,initialFocus:Y,dense:X,dataTest:O="dhis2-uicore-singleselect"}=i;const V=x?fe.createElement(ZC,{dataTest:O,empty:I,noMatchText:W,placeholder:A}):fe.createElement(jv,{empty:I,dataTest:O});return fe.createElement("div",{"data-test":O,className:_t.dynamic([["2180377457",[Gt.dp8]]])+" root"},fe.createElement("div",{className:_t.dynamic([["2180377457",[Gt.dp8]]])+" root-input"},fe.createElement(Uy,{className:e,selected:t,input:fe.createElement(KC,{clearable:S,clearText:E,dataTest:O,placeholder:D,prefix:C,inputMaxHeight:l}),menu:V,tabIndex:n,maxHeight:s,onChange:u,onFocus:r,onKeyDown:p,onBlur:f,error:b,warning:y,valid:w,disabled:v,initialFocus:Y,dense:X},T,g&&fe.createElement(Mv,{message:N,dataTest:`${O}-loading`}))),fe.createElement(aC,{error:b,valid:w,warning:y}),fe.createElement(_t,{id:"2180377457",dynamic:[Gt.dp8]},[`.root.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:${Gt.dp8};}`,".root-input.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;}"]))};QC.propTypes={children:Q.node,className:Q.string,clearText:Rr(i=>i.clearable,Q.string),clearable:Q.bool,dataTest:Q.string,dense:Q.bool,disabled:Q.bool,empty:Q.node,error:Xr,filterPlaceholder:Q.string,filterable:Q.bool,initialFocus:Q.bool,inputMaxHeight:Q.string,loading:Q.bool,loadingText:Q.string,maxHeight:Q.string,noMatchText:Rr(i=>i.filterable,Q.string),placeholder:Q.string,prefix:Q.string,selected:Q.string,tabIndex:Q.string,valid:Xr,warning:Xr,onBlur:Q.func,onChange:Q.func,onFocus:Q.func,onKeyDown:Q.func};function cI(i,e,t){return(e=uI(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function uI(i){var e=dI(i,"string");return typeof e=="symbol"?e:e+""}function dI(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}const wp=(i,e)=>typeof i=="function"?i(e):i;class hs extends fe.Component{render(){const{className:e,onChange:t,onFocus:n,onKeyDown:s,onBlur:l,required:u,label:r,valid:p,error:f,warning:g,disabled:b,loading:y,selected:w=hs.defaultProps.selected,tabIndex:v,helpText:T,validationText:S,maxHeight:E,inputMaxHeight:x,inputWidth:A,children:D,clearable:C,clearText:I=hs.defaultProps.clearText,filterable:N,filterPlaceholder:W=hs.defaultProps.filterPlaceholder,placeholder:Y,prefix:X,empty:O=hs.defaultProps.empty,loadingText:V=hs.defaultProps.loadingText,noMatchText:$=hs.defaultProps.noMatchText,initialFocus:L,dense:R,dataTest:G=hs.defaultProps.dataTest}=this.props;return fe.createElement(oC,{className:e,dataTest:G,disabled:b,required:u,label:r,helpText:T,validationText:S,error:f,warning:g,valid:p},fe.createElement($p,{width:A,minWidth:"100px"},fe.createElement(QC,{selected:w,tabIndex:v,maxHeight:E,inputMaxHeight:x,onChange:t,onFocus:n,onKeyDown:s,onBlur:l,loading:y,error:f,warning:g,valid:p,disabled:b,clearable:C,clearText:wp(I),filterable:N,filterPlaceholder:wp(W),placeholder:Y,prefix:X,empty:wp(O),loadingText:wp(V),noMatchText:wp($),initialFocus:L,dense:R},D)))}}cI(hs,"defaultProps",{dataTest:"dhis2-uiwidgets-singleselectfield",selected:"",clearText:()=>Qe.t("Clear"),empty:()=>Qe.t("No data found"),filterPlaceholder:()=>Qe.t("Type to filter options"),loadingText:()=>Qe.t("Loading options"),noMatchText:()=>Qe.t("No options found")});hs.propTypes={children:Q.node,className:Q.string,clearText:Q.oneOfType([Q.string,Q.func]),clearable:Q.bool,dataTest:Q.string,dense:Q.bool,disabled:Q.bool,empty:Q.oneOfType([Q.node,Q.func]),error:Xr,filterPlaceholder:Q.oneOfType([Q.node,Q.func]),filterable:Q.bool,helpText:Q.string,initialFocus:Q.bool,inputMaxHeight:Q.string,inputWidth:Q.string,label:Q.string,loading:Q.bool,loadingText:Q.oneOfType([Q.string,Q.func]),maxHeight:Q.string,noMatchText:Q.oneOfType([Q.string,Q.func]),placeholder:Q.string,prefix:Q.string,required:Q.bool,selected:Q.string,tabIndex:Q.string,valid:Xr,validationText:Q.string,warning:Xr,onBlur:Q.func,onChange:Q.func,onFocus:Q.func,onKeyDown:Q.func};const _o=i=>{let{label:e,active:t,disabled:n,onClick:s,className:l,dataTest:u="dhis2-uicore-singleselectoption",value:r}=i;return fe.createElement("div",{onClick:p=>s({},p),"data-test":u,"data-value":r,"data-label":e,className:_t.dynamic([["3808134379",[Oe.grey900,Gt.dp8,Gt.dp12,Oe.grey200,Oe.teal700,Oe.white,Oe.grey500]]])+" "+(bn(l,{disabled:n,active:t})||"")},e,fe.createElement(_t,{id:"3808134379",dynamic:[Oe.grey900,Gt.dp8,Gt.dp12,Oe.grey200,Oe.teal700,Oe.white,Oe.grey500]},[`div.__jsx-style-dynamic-selector{cursor:pointer;font-size:14px;-webkit-text-decoration:none;text-decoration:none;color:${Oe.grey900};padding-block:${Gt.dp8};padding-inline:${Gt.dp12};}`,`div.__jsx-style-dynamic-selector:hover{background-color:${Oe.grey200};}`,`div.__jsx-style-dynamic-selector:active,div.active.__jsx-style-dynamic-selector{background-color:${Oe.teal700};color:${Oe.white};cursor:auto;}`,`div.disabled.__jsx-style-dynamic-selector{color:${Oe.grey500};cursor:not-allowed;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`,"div.disabled.__jsx-style-dynamic-selector:hover{background-color:initial;}"]))};_o.propTypes={label:Q.string.isRequired,value:Q.string.isRequired,active:Q.bool,className:Q.string,dataTest:Q.string,disabled:Q.bool,onClick:Q.func};class de extends Array{constructor(e,t){if(super(e),this.sign=t,Object.setPrototypeOf(this,de.prototype),e>de.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(e){var t=Math.floor,n=Number.isFinite;if(typeof e=="number"){if(e===0)return de.__zero();if(de.__isOneDigitInt(e))return 0>e?de.__oneDigit(-e,!0):de.__oneDigit(e,!1);if(!n(e)||t(e)!==e)throw new RangeError("The number "+e+" cannot be converted to BigInt because it is not an integer");return de.__fromDouble(e)}if(typeof e=="string"){const s=de.__fromString(e);if(s===null)throw new SyntaxError("Cannot convert "+e+" to a BigInt");return s}if(typeof e=="boolean")return e===!0?de.__oneDigit(1,!1):de.__zero();if(typeof e=="object"){if(e.constructor===de)return e;const s=de.__toPrimitive(e);return de.BigInt(s)}throw new TypeError("Cannot convert "+e+" to a BigInt")}toDebugString(){const e=["BigInt["];for(const t of this)e.push((t&&(t>>>0).toString(16))+", ");return e.push("]"),e.join("")}toString(e=10){if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":e&e-1?de.__toStringGeneric(this,e,!1):de.__toStringBasePowerOfTwo(this,e)}valueOf(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}static toNumber(e){const t=e.length;if(t===0)return 0;if(t===1){const S=e.__unsignedDigit(0);return e.sign?-S:S}const n=e.__digit(t-1),s=de.__clz30(n),l=30*t-s;if(1024<l)return e.sign?-1/0:1/0;let u=l-1,r=n,p=t-1;const f=s+3;let g=f===32?0:r<<f;g>>>=12;const b=f-12;let y=12<=f?0:r<<20+f,w=20+f;for(0<b&&0<p&&(p--,r=e.__digit(p),g|=r>>>30-b,y=r<<b+2,w=b+2);0<w&&0<p;)p--,r=e.__digit(p),y|=30<=w?r<<w-30:r>>>30-w,w-=30;const v=de.__decideRounding(e,w,p,r);if((v===1||v===0&&(1&y)==1)&&(y=y+1>>>0,y===0&&(g++,g>>>20!=0&&(g=0,u++,1023<u))))return e.sign?-1/0:1/0;const T=e.sign?-2147483648:0;return u=u+1023<<20,de.__kBitConversionInts[1]=T|u|g,de.__kBitConversionInts[0]=y,de.__kBitConversionDouble[0]}static unaryMinus(e){if(e.length===0)return e;const t=e.__copy();return t.sign=!e.sign,t}static bitwiseNot(e){return e.sign?de.__absoluteSubOne(e).__trim():de.__absoluteAddOne(e,!0)}static exponentiate(e,t){if(t.sign)throw new RangeError("Exponent must be positive");if(t.length===0)return de.__oneDigit(1,!1);if(e.length===0)return e;if(e.length===1&&e.__digit(0)===1)return e.sign&&!(1&t.__digit(0))?de.unaryMinus(e):e;if(1<t.length)throw new RangeError("BigInt too big");let n=t.__unsignedDigit(0);if(n===1)return e;if(n>=de.__kMaxLengthBits)throw new RangeError("BigInt too big");if(e.length===1&&e.__digit(0)===2){const u=1+(0|n/30),r=e.sign&&(1&n)!=0,p=new de(u,r);p.__initializeDigits();const f=1<<n%30;return p.__setDigit(u-1,f),p}let s=null,l=e;for(1&n&&(s=e),n>>=1;n!==0;n>>=1)l=de.multiply(l,l),1&n&&(s===null?s=l:s=de.multiply(s,l));return s}static multiply(e,t){if(e.length===0)return e;if(t.length===0)return t;let n=e.length+t.length;30<=e.__clzmsd()+t.__clzmsd()&&n--;const s=new de(n,e.sign!==t.sign);s.__initializeDigits();for(let l=0;l<e.length;l++)de.__multiplyAccumulate(t,e.__digit(l),s,l);return s.__trim()}static divide(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>de.__absoluteCompare(e,t))return de.__zero();const n=e.sign!==t.sign,s=t.__unsignedDigit(0);let l;if(t.length===1&&32767>=s){if(s===1)return n===e.sign?e:de.unaryMinus(e);l=de.__absoluteDivSmall(e,s,null)}else l=de.__absoluteDivLarge(e,t,!0,!1);return l.sign=n,l.__trim()}static remainder(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>de.__absoluteCompare(e,t))return e;const n=t.__unsignedDigit(0);if(t.length===1&&32767>=n){if(n===1)return de.__zero();const l=de.__absoluteModSmall(e,n);return l===0?de.__zero():de.__oneDigit(l,e.sign)}const s=de.__absoluteDivLarge(e,t,!1,!0);return s.sign=e.sign,s.__trim()}static add(e,t){const n=e.sign;return n===t.sign?de.__absoluteAdd(e,t,n):0<=de.__absoluteCompare(e,t)?de.__absoluteSub(e,t,n):de.__absoluteSub(t,e,!n)}static subtract(e,t){const n=e.sign;return n===t.sign?0<=de.__absoluteCompare(e,t)?de.__absoluteSub(e,t,n):de.__absoluteSub(t,e,!n):de.__absoluteAdd(e,t,n)}static leftShift(e,t){return t.length===0||e.length===0?e:t.sign?de.__rightShiftByAbsolute(e,t):de.__leftShiftByAbsolute(e,t)}static signedRightShift(e,t){return t.length===0||e.length===0?e:t.sign?de.__leftShiftByAbsolute(e,t):de.__rightShiftByAbsolute(e,t)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(e,t){return 0>de.__compareToBigInt(e,t)}static lessThanOrEqual(e,t){return 0>=de.__compareToBigInt(e,t)}static greaterThan(e,t){return 0<de.__compareToBigInt(e,t)}static greaterThanOrEqual(e,t){return 0<=de.__compareToBigInt(e,t)}static equal(e,t){if(e.sign!==t.sign||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e.__digit(n)!==t.__digit(n))return!1;return!0}static notEqual(e,t){return!de.equal(e,t)}static bitwiseAnd(e,t){var n=Math.max;if(!e.sign&&!t.sign)return de.__absoluteAnd(e,t).__trim();if(e.sign&&t.sign){const s=n(e.length,t.length)+1;let l=de.__absoluteSubOne(e,s);const u=de.__absoluteSubOne(t);return l=de.__absoluteOr(l,u,l),de.__absoluteAddOne(l,!0,l).__trim()}return e.sign&&([e,t]=[t,e]),de.__absoluteAndNot(e,de.__absoluteSubOne(t)).__trim()}static bitwiseXor(e,t){var n=Math.max;if(!e.sign&&!t.sign)return de.__absoluteXor(e,t).__trim();if(e.sign&&t.sign){const u=n(e.length,t.length),r=de.__absoluteSubOne(e,u),p=de.__absoluteSubOne(t);return de.__absoluteXor(r,p,r).__trim()}const s=n(e.length,t.length)+1;e.sign&&([e,t]=[t,e]);let l=de.__absoluteSubOne(t,s);return l=de.__absoluteXor(l,e,l),de.__absoluteAddOne(l,!0,l).__trim()}static bitwiseOr(e,t){var n=Math.max;const s=n(e.length,t.length);if(!e.sign&&!t.sign)return de.__absoluteOr(e,t).__trim();if(e.sign&&t.sign){let u=de.__absoluteSubOne(e,s);const r=de.__absoluteSubOne(t);return u=de.__absoluteAnd(u,r,u),de.__absoluteAddOne(u,!0,u).__trim()}e.sign&&([e,t]=[t,e]);let l=de.__absoluteSubOne(t,s);return l=de.__absoluteAndNot(l,e,l),de.__absoluteAddOne(l,!0,l).__trim()}static asIntN(e,t){var n=Math.floor;if(t.length===0)return t;if(e=n(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return de.__zero();if(e>=de.__kMaxLengthBits)return t;const s=0|(e+29)/30;if(t.length<s)return t;const l=t.__unsignedDigit(s-1),u=1<<(e-1)%30;if(t.length===s&&l<u)return t;if((l&u)!==u)return de.__truncateToNBits(e,t);if(!t.sign)return de.__truncateAndSubFromPowerOfTwo(e,t,!0);if(!(l&u-1)){for(let r=s-2;0<=r;r--)if(t.__digit(r)!==0)return de.__truncateAndSubFromPowerOfTwo(e,t,!1);return t.length===s&&l===u?t:de.__truncateToNBits(e,t)}return de.__truncateAndSubFromPowerOfTwo(e,t,!1)}static asUintN(e,t){var n=Math.floor;if(t.length===0)return t;if(e=n(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return de.__zero();if(t.sign){if(e>de.__kMaxLengthBits)throw new RangeError("BigInt too big");return de.__truncateAndSubFromPowerOfTwo(e,t,!1)}if(e>=de.__kMaxLengthBits)return t;const s=0|(e+29)/30;if(t.length<s)return t;const l=e%30;return t.length==s&&(l===0||!(t.__digit(s-1)>>>l))?t:de.__truncateToNBits(e,t)}static ADD(e,t){if(e=de.__toPrimitive(e),t=de.__toPrimitive(t),typeof e=="string")return typeof t!="string"&&(t=t.toString()),e+t;if(typeof t=="string")return e.toString()+t;if(e=de.__toNumeric(e),t=de.__toNumeric(t),de.__isBigInt(e)&&de.__isBigInt(t))return de.add(e,t);if(typeof e=="number"&&typeof t=="number")return e+t;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(e,t){return de.__compare(e,t,0)}static LE(e,t){return de.__compare(e,t,1)}static GT(e,t){return de.__compare(e,t,2)}static GE(e,t){return de.__compare(e,t,3)}static EQ(e,t){for(;;){if(de.__isBigInt(e))return de.__isBigInt(t)?de.equal(e,t):de.EQ(t,e);if(typeof e=="number"){if(de.__isBigInt(t))return de.__equalToNumber(t,e);if(typeof t!="object")return e==t;t=de.__toPrimitive(t)}else if(typeof e=="string"){if(de.__isBigInt(t))return e=de.__fromString(e),e!==null&&de.equal(e,t);if(typeof t!="object")return e==t;t=de.__toPrimitive(t)}else if(typeof e=="boolean"){if(de.__isBigInt(t))return de.__equalToNumber(t,+e);if(typeof t!="object")return e==t;t=de.__toPrimitive(t)}else if(typeof e=="symbol"){if(de.__isBigInt(t))return!1;if(typeof t!="object")return e==t;t=de.__toPrimitive(t)}else if(typeof e=="object"){if(typeof t=="object"&&t.constructor!==de)return e==t;e=de.__toPrimitive(e)}else return e==t}}static NE(e,t){return!de.EQ(e,t)}static DataViewGetBigInt64(e,t,n=!1){return de.asIntN(64,de.DataViewGetBigUint64(e,t,n))}static DataViewGetBigUint64(e,t,n=!1){const[s,l]=n?[4,0]:[0,4],u=e.getUint32(t+s,n),r=e.getUint32(t+l,n),p=new de(3,!1);return p.__setDigit(0,1073741823&r),p.__setDigit(1,(268435455&u)<<2|r>>>30),p.__setDigit(2,u>>>28),p.__trim()}static DataViewSetBigInt64(e,t,n,s=!1){de.DataViewSetBigUint64(e,t,n,s)}static DataViewSetBigUint64(e,t,n,s=!1){n=de.asUintN(64,n);let l=0,u=0;if(0<n.length&&(u=n.__digit(0),1<n.length)){const f=n.__digit(1);u|=f<<30,l=f>>>2,2<n.length&&(l|=n.__digit(2)<<28)}const[r,p]=s?[4,0]:[0,4];e.setUint32(t+r,l,s),e.setUint32(t+p,u,s)}static __zero(){return new de(0,!1)}static __oneDigit(e,t){const n=new de(1,t);return n.__setDigit(0,e),n}__copy(){const e=new de(this.length,this.sign);for(let t=0;t<this.length;t++)e[t]=this[t];return e}__trim(){let e=this.length,t=this[e-1];for(;t===0;)e--,t=this[e-1],this.pop();return e===0&&(this.sign=!1),this}__initializeDigits(){for(let e=0;e<this.length;e++)this[e]=0}static __decideRounding(e,t,n,s){if(0<t)return-1;let l;if(0>t)l=-t-1;else{if(n===0)return-1;n--,s=e.__digit(n),l=29}let u=1<<l;if(!(s&u))return-1;if(u-=1,(s&u)!=0)return 1;for(;0<n;)if(n--,e.__digit(n)!==0)return 1;return 0}static __fromDouble(e){de.__kBitConversionDouble[0]=e;const t=2047&de.__kBitConversionInts[1]>>>20,n=t-1023,s=(0|n/30)+1,l=new de(s,0>e);let u=1048575&de.__kBitConversionInts[1]|1048576,r=de.__kBitConversionInts[0];const p=20,f=n%30;let g,b=0;if(f<20){const y=p-f;b=y+32,g=u>>>y,u=u<<32-y|r>>>y,r<<=32-y}else if(f===20)b=32,g=u,u=r,r=0;else{const y=f-p;b=32-y,g=u<<y|r>>>32-y,u=r<<y,r=0}l.__setDigit(s-1,g);for(let y=s-2;0<=y;y--)0<b?(b-=30,g=u>>>2,u=u<<30|r>>>2,r<<=30):g=0,l.__setDigit(y,g);return l.__trim()}static __isWhitespace(e){return 13>=e&&9<=e||(159>=e?e==32:131071>=e?e==160||e==5760:196607>=e?(e&=131071,10>=e||e==40||e==41||e==47||e==95||e==4096):e==65279)}static __fromString(e,t=0){let n=0;const s=e.length;let l=0;if(l===s)return de.__zero();let u=e.charCodeAt(l);for(;de.__isWhitespace(u);){if(++l===s)return de.__zero();u=e.charCodeAt(l)}if(u===43){if(++l===s)return null;u=e.charCodeAt(l),n=1}else if(u===45){if(++l===s)return null;u=e.charCodeAt(l),n=-1}if(t===0){if(t=10,u===48){if(++l===s)return de.__zero();if(u=e.charCodeAt(l),u===88||u===120){if(t=16,++l===s)return null;u=e.charCodeAt(l)}else if(u===79||u===111){if(t=8,++l===s)return null;u=e.charCodeAt(l)}else if(u===66||u===98){if(t=2,++l===s)return null;u=e.charCodeAt(l)}}}else if(t===16&&u===48){if(++l===s)return de.__zero();if(u=e.charCodeAt(l),u===88||u===120){if(++l===s)return null;u=e.charCodeAt(l)}}if(n!=0&&t!==10)return null;for(;u===48;){if(++l===s)return de.__zero();u=e.charCodeAt(l)}const r=s-l;let p=de.__kMaxBitsPerChar[t],f=de.__kBitsPerCharTableMultiplier-1;if(r>1073741824/p)return null;const g=p*r+f>>>de.__kBitsPerCharTableShift,b=new de(0|(g+29)/30,!1),y=10>t?t:10,w=10<t?t-10:0;if(t&t-1){b.__initializeDigits();let v=!1,T=0;do{let S=0,E=1;for(;;){let A;if(u-48>>>0<y)A=u-48;else if((32|u)-97>>>0<w)A=(32|u)-87;else{v=!0;break}const D=E*t;if(1073741823<D)break;if(E=D,S=S*t+A,T++,++l===s){v=!0;break}u=e.charCodeAt(l)}f=30*de.__kBitsPerCharTableMultiplier-1;const x=0|(p*T+f>>>de.__kBitsPerCharTableShift)/30;b.__inplaceMultiplyAdd(E,S,x)}while(!v)}else{p>>=de.__kBitsPerCharTableShift;const v=[],T=[];let S=!1;do{let E=0,x=0;for(;;){let A;if(u-48>>>0<y)A=u-48;else if((32|u)-97>>>0<w)A=(32|u)-87;else{S=!0;break}if(x+=p,E=E<<p|A,++l===s){S=!0;break}if(u=e.charCodeAt(l),30<x+p)break}v.push(E),T.push(x)}while(!S);de.__fillFromParts(b,v,T)}if(l!==s){if(!de.__isWhitespace(u))return null;for(l++;l<s;l++)if(u=e.charCodeAt(l),!de.__isWhitespace(u))return null}return b.sign=n==-1,b.__trim()}static __fillFromParts(e,t,n){let s=0,l=0,u=0;for(let r=t.length-1;0<=r;r--){const p=t[r],f=n[r];l|=p<<u,u+=f,u===30?(e.__setDigit(s++,l),u=0,l=0):30<u&&(e.__setDigit(s++,1073741823&l),u-=30,l=p>>>f-u)}if(l!==0){if(s>=e.length)throw new Error("implementation bug");e.__setDigit(s++,l)}for(;s<e.length;s++)e.__setDigit(s,0)}static __toStringBasePowerOfTwo(e,t){const n=e.length;let s=t-1;s=(85&s>>>1)+(85&s),s=(51&s>>>2)+(51&s),s=(15&s>>>4)+(15&s);const l=s,u=t-1,r=e.__digit(n-1),p=de.__clz30(r);let f=0|(30*n-p+l-1)/l;if(e.sign&&f++,268435456<f)throw new Error("string too long");const g=Array(f);let b=f-1,y=0,w=0;for(let T=0;T<n-1;T++){const S=e.__digit(T),E=(y|S<<w)&u;g[b--]=de.__kConversionChars[E];const x=l-w;for(y=S>>>x,w=30-x;w>=l;)g[b--]=de.__kConversionChars[y&u],y>>>=l,w-=l}const v=(y|r<<w)&u;for(g[b--]=de.__kConversionChars[v],y=r>>>l-w;y!==0;)g[b--]=de.__kConversionChars[y&u],y>>>=l;if(e.sign&&(g[b--]="-"),b!=-1)throw new Error("implementation bug");return g.join("")}static __toStringGeneric(e,t,n){const s=e.length;if(s===0)return"";if(s===1){let T=e.__unsignedDigit(0).toString(t);return n===!1&&e.sign&&(T="-"+T),T}const l=30*s-de.__clz30(e.__digit(s-1)),u=de.__kMaxBitsPerChar[t],r=u-1;let p=l*de.__kBitsPerCharTableMultiplier;p+=r-1,p=0|p/r;const f=p+1>>1,g=de.exponentiate(de.__oneDigit(t,!1),de.__oneDigit(f,!1));let b,y;const w=g.__unsignedDigit(0);if(g.length===1&&32767>=w){b=new de(e.length,!1),b.__initializeDigits();let T=0;for(let S=2*e.length-1;0<=S;S--){const E=T<<15|e.__halfDigit(S);b.__setHalfDigit(S,0|E/w),T=0|E%w}y=T.toString(t)}else{const T=de.__absoluteDivLarge(e,g,!0,!0);b=T.quotient;const S=T.remainder.__trim();y=de.__toStringGeneric(S,t,!0)}b.__trim();let v=de.__toStringGeneric(b,t,!0);for(;y.length<f;)y="0"+y;return n===!1&&e.sign&&(v="-"+v),v+y}static __unequalSign(e){return e?-1:1}static __absoluteGreater(e){return e?-1:1}static __absoluteLess(e){return e?1:-1}static __compareToBigInt(e,t){const n=e.sign;if(n!==t.sign)return de.__unequalSign(n);const s=de.__absoluteCompare(e,t);return 0<s?de.__absoluteGreater(n):0>s?de.__absoluteLess(n):0}static __compareToNumber(e,t){if(de.__isOneDigitInt(t)){const n=e.sign,s=0>t;if(n!==s)return de.__unequalSign(n);if(e.length===0){if(s)throw new Error("implementation bug");return t===0?0:-1}if(1<e.length)return de.__absoluteGreater(n);const l=Math.abs(t),u=e.__unsignedDigit(0);return u>l?de.__absoluteGreater(n):u<l?de.__absoluteLess(n):0}return de.__compareToDouble(e,t)}static __compareToDouble(e,t){if(t!==t)return t;if(t===1/0)return-1;if(t===-1/0)return 1;const n=e.sign;if(n!==0>t)return de.__unequalSign(n);if(t===0)throw new Error("implementation bug: should be handled elsewhere");if(e.length===0)return-1;de.__kBitConversionDouble[0]=t;const s=2047&de.__kBitConversionInts[1]>>>20;if(s==2047)throw new Error("implementation bug: handled elsewhere");const l=s-1023;if(0>l)return de.__absoluteGreater(n);const u=e.length;let r=e.__digit(u-1);const p=de.__clz30(r),f=30*u-p,g=l+1;if(f<g)return de.__absoluteLess(n);if(f>g)return de.__absoluteGreater(n);let b=1048576|1048575&de.__kBitConversionInts[1],y=de.__kBitConversionInts[0];const w=20,v=29-p;if(v!==(0|(f-1)%30))throw new Error("implementation bug");let T,S=0;if(20>v){const E=w-v;S=E+32,T=b>>>E,b=b<<32-E|y>>>E,y<<=32-E}else if(v===20)S=32,T=b,b=y,y=0;else{const E=v-w;S=32-E,T=b<<E|y>>>32-E,b=y<<E,y=0}if(r>>>=0,T>>>=0,r>T)return de.__absoluteGreater(n);if(r<T)return de.__absoluteLess(n);for(let E=u-2;0<=E;E--){0<S?(S-=30,T=b>>>2,b=b<<30|y>>>2,y<<=30):T=0;const x=e.__unsignedDigit(E);if(x>T)return de.__absoluteGreater(n);if(x<T)return de.__absoluteLess(n)}if(b!==0||y!==0){if(S===0)throw new Error("implementation bug");return de.__absoluteLess(n)}return 0}static __equalToNumber(e,t){var n=Math.abs;return de.__isOneDigitInt(t)?t===0?e.length===0:e.length===1&&e.sign===0>t&&e.__unsignedDigit(0)===n(t):de.__compareToDouble(e,t)===0}static __comparisonResultToBool(e,t){return t===0?0>e:t===1?0>=e:t===2?0<e:t===3?0<=e:void 0}static __compare(e,t,n){if(e=de.__toPrimitive(e),t=de.__toPrimitive(t),typeof e=="string"&&typeof t=="string")switch(n){case 0:return e<t;case 1:return e<=t;case 2:return e>t;case 3:return e>=t}if(de.__isBigInt(e)&&typeof t=="string")return t=de.__fromString(t),t!==null&&de.__comparisonResultToBool(de.__compareToBigInt(e,t),n);if(typeof e=="string"&&de.__isBigInt(t))return e=de.__fromString(e),e!==null&&de.__comparisonResultToBool(de.__compareToBigInt(e,t),n);if(e=de.__toNumeric(e),t=de.__toNumeric(t),de.__isBigInt(e)){if(de.__isBigInt(t))return de.__comparisonResultToBool(de.__compareToBigInt(e,t),n);if(typeof t!="number")throw new Error("implementation bug");return de.__comparisonResultToBool(de.__compareToNumber(e,t),n)}if(typeof e!="number")throw new Error("implementation bug");if(de.__isBigInt(t))return de.__comparisonResultToBool(de.__compareToNumber(t,e),2^n);if(typeof t!="number")throw new Error("implementation bug");return n===0?e<t:n===1?e<=t:n===2?e>t:n===3?e>=t:void 0}__clzmsd(){return de.__clz30(this.__digit(this.length-1))}static __absoluteAdd(e,t,n){if(e.length<t.length)return de.__absoluteAdd(t,e,n);if(e.length===0)return e;if(t.length===0)return e.sign===n?e:de.unaryMinus(e);let s=e.length;(e.__clzmsd()===0||t.length===e.length&&t.__clzmsd()===0)&&s++;const l=new de(s,n);let u=0,r=0;for(;r<t.length;r++){const p=e.__digit(r)+t.__digit(r)+u;u=p>>>30,l.__setDigit(r,1073741823&p)}for(;r<e.length;r++){const p=e.__digit(r)+u;u=p>>>30,l.__setDigit(r,1073741823&p)}return r<l.length&&l.__setDigit(r,u),l.__trim()}static __absoluteSub(e,t,n){if(e.length===0)return e;if(t.length===0)return e.sign===n?e:de.unaryMinus(e);const s=new de(e.length,n);let l=0,u=0;for(;u<t.length;u++){const r=e.__digit(u)-t.__digit(u)-l;l=1&r>>>30,s.__setDigit(u,1073741823&r)}for(;u<e.length;u++){const r=e.__digit(u)-l;l=1&r>>>30,s.__setDigit(u,1073741823&r)}return s.__trim()}static __absoluteAddOne(e,t,n=null){const s=e.length;n===null?n=new de(s,t):n.sign=t;let l=1;for(let u=0;u<s;u++){const r=e.__digit(u)+l;l=r>>>30,n.__setDigit(u,1073741823&r)}return l!=0&&n.__setDigitGrow(s,1),n}static __absoluteSubOne(e,t){const n=e.length;t=t||n;const s=new de(t,!1);let l=1;for(let u=0;u<n;u++){const r=e.__digit(u)-l;l=1&r>>>30,s.__setDigit(u,1073741823&r)}if(l!=0)throw new Error("implementation bug");for(let u=n;u<t;u++)s.__setDigit(u,0);return s}static __absoluteAnd(e,t,n=null){let s=e.length,l=t.length,u=l;if(s<l){u=s;const f=e,g=s;e=t,s=l,t=f,l=g}let r=u;n===null?n=new de(r,!1):r=n.length;let p=0;for(;p<u;p++)n.__setDigit(p,e.__digit(p)&t.__digit(p));for(;p<r;p++)n.__setDigit(p,0);return n}static __absoluteAndNot(e,t,n=null){const s=e.length,l=t.length;let u=l;s<l&&(u=s);let r=s;n===null?n=new de(r,!1):r=n.length;let p=0;for(;p<u;p++)n.__setDigit(p,e.__digit(p)&~t.__digit(p));for(;p<s;p++)n.__setDigit(p,e.__digit(p));for(;p<r;p++)n.__setDigit(p,0);return n}static __absoluteOr(e,t,n=null){let s=e.length,l=t.length,u=l;if(s<l){u=s;const f=e,g=s;e=t,s=l,t=f,l=g}let r=s;n===null?n=new de(r,!1):r=n.length;let p=0;for(;p<u;p++)n.__setDigit(p,e.__digit(p)|t.__digit(p));for(;p<s;p++)n.__setDigit(p,e.__digit(p));for(;p<r;p++)n.__setDigit(p,0);return n}static __absoluteXor(e,t,n=null){let s=e.length,l=t.length,u=l;if(s<l){u=s;const f=e,g=s;e=t,s=l,t=f,l=g}let r=s;n===null?n=new de(r,!1):r=n.length;let p=0;for(;p<u;p++)n.__setDigit(p,e.__digit(p)^t.__digit(p));for(;p<s;p++)n.__setDigit(p,e.__digit(p));for(;p<r;p++)n.__setDigit(p,0);return n}static __absoluteCompare(e,t){const n=e.length-t.length;if(n!=0)return n;let s=e.length-1;for(;0<=s&&e.__digit(s)===t.__digit(s);)s--;return 0>s?0:e.__unsignedDigit(s)>t.__unsignedDigit(s)?1:-1}static __multiplyAccumulate(e,t,n,s){if(t===0)return;const l=32767&t,u=t>>>15;let r=0,p=0;for(let f,g=0;g<e.length;g++,s++){f=n.__digit(s);const b=e.__digit(g),y=32767&b,w=b>>>15,v=de.__imul(y,l),T=de.__imul(y,u),S=de.__imul(w,l),E=de.__imul(w,u);f+=p+v+r,r=f>>>30,f&=1073741823,f+=((32767&T)<<15)+((32767&S)<<15),r+=f>>>30,p=E+(T>>>15)+(S>>>15),n.__setDigit(s,1073741823&f)}for(;r!=0||p!==0;s++){let f=n.__digit(s);f+=r+p,p=0,r=f>>>30,n.__setDigit(s,1073741823&f)}}static __internalMultiplyAdd(e,t,n,s,l){let u=n,r=0;for(let p=0;p<s;p++){const f=e.__digit(p),g=de.__imul(32767&f,t),b=de.__imul(f>>>15,t),y=g+((32767&b)<<15)+r+u;u=y>>>30,r=b>>>15,l.__setDigit(p,1073741823&y)}if(l.length>s)for(l.__setDigit(s++,u+r);s<l.length;)l.__setDigit(s++,0);else if(u+r!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(e,t,n){n>this.length&&(n=this.length);const s=32767&e,l=e>>>15;let u=0,r=t;for(let p=0;p<n;p++){const f=this.__digit(p),g=32767&f,b=f>>>15,y=de.__imul(g,s),w=de.__imul(g,l),v=de.__imul(b,s),T=de.__imul(b,l);let S=r+y+u;u=S>>>30,S&=1073741823,S+=((32767&w)<<15)+((32767&v)<<15),u+=S>>>30,r=T+(w>>>15)+(v>>>15),this.__setDigit(p,1073741823&S)}if(u!=0||r!==0)throw new Error("implementation bug")}static __absoluteDivSmall(e,t,n=null){n===null&&(n=new de(e.length,!1));let s=0;for(let l,u=2*e.length-1;0<=u;u-=2){l=(s<<15|e.__halfDigit(u))>>>0;const r=0|l/t;s=0|l%t,l=(s<<15|e.__halfDigit(u-1))>>>0;const p=0|l/t;s=0|l%t,n.__setDigit(u>>>1,r<<15|p)}return n}static __absoluteModSmall(e,t){let n=0;for(let s=2*e.length-1;0<=s;s--)n=0|((n<<15|e.__halfDigit(s))>>>0)%t;return n}static __absoluteDivLarge(e,t,n,s){const l=t.__halfDigitLength(),u=t.length,r=e.__halfDigitLength()-l;let p=null;n&&(p=new de(r+2>>>1,!1),p.__initializeDigits());const f=new de(l+2>>>1,!1);f.__initializeDigits();const g=de.__clz15(t.__halfDigit(l-1));0<g&&(t=de.__specialLeftShift(t,g,0));const b=de.__specialLeftShift(e,g,1),y=t.__halfDigit(l-1);let w=0;for(let v,T=r;0<=T;T--){v=32767;const S=b.__halfDigit(T+l);if(S!==y){const x=(S<<15|b.__halfDigit(T+l-1))>>>0;v=0|x/y;let A=0|x%y;const D=t.__halfDigit(l-2),C=b.__halfDigit(T+l-2);for(;de.__imul(v,D)>>>0>(A<<16|C)>>>0&&(v--,A+=y,!(32767<A)););}de.__internalMultiplyAdd(t,v,0,u,f);let E=b.__inplaceSub(f,T,l+1);E!==0&&(E=b.__inplaceAdd(t,T,l),b.__setHalfDigit(T+l,32767&b.__halfDigit(T+l)+E),v--),n&&(1&T?w=v<<15:p.__setDigit(T>>>1,w|v))}if(s)return b.__inplaceRightShift(g),n?{quotient:p,remainder:b}:b;if(n)return p;throw new Error("unreachable")}static __clz15(e){return de.__clz30(e)-15}__inplaceAdd(e,t,n){let s=0;for(let l=0;l<n;l++){const u=this.__halfDigit(t+l)+e.__halfDigit(l)+s;s=u>>>15,this.__setHalfDigit(t+l,32767&u)}return s}__inplaceSub(e,t,n){let s=0;if(1&t){t>>=1;let l=this.__digit(t),u=32767&l,r=0;for(;r<n-1>>>1;r++){const g=e.__digit(r),b=(l>>>15)-(32767&g)-s;s=1&b>>>15,this.__setDigit(t+r,(32767&b)<<15|32767&u),l=this.__digit(t+r+1),u=(32767&l)-(g>>>15)-s,s=1&u>>>15}const p=e.__digit(r),f=(l>>>15)-(32767&p)-s;if(s=1&f>>>15,this.__setDigit(t+r,(32767&f)<<15|32767&u),t+r+1>=this.length)throw new RangeError("out of bounds");!(1&n)&&(l=this.__digit(t+r+1),u=(32767&l)-(p>>>15)-s,s=1&u>>>15,this.__setDigit(t+e.length,1073709056&l|32767&u))}else{t>>=1;let l=0;for(;l<e.length-1;l++){const g=this.__digit(t+l),b=e.__digit(l),y=(32767&g)-(32767&b)-s;s=1&y>>>15;const w=(g>>>15)-(b>>>15)-s;s=1&w>>>15,this.__setDigit(t+l,(32767&w)<<15|32767&y)}const u=this.__digit(t+l),r=e.__digit(l),p=(32767&u)-(32767&r)-s;s=1&p>>>15;let f=0;!(1&n)&&(f=(u>>>15)-(r>>>15)-s,s=1&f>>>15),this.__setDigit(t+l,(32767&f)<<15|32767&p)}return s}__inplaceRightShift(e){if(e===0)return;let t=this.__digit(0)>>>e;const n=this.length-1;for(let s=0;s<n;s++){const l=this.__digit(s+1);this.__setDigit(s,1073741823&l<<30-e|t),t=l>>>e}this.__setDigit(n,t)}static __specialLeftShift(e,t,n){const s=e.length,l=new de(s+n,!1);if(t===0){for(let r=0;r<s;r++)l.__setDigit(r,e.__digit(r));return 0<n&&l.__setDigit(s,0),l}let u=0;for(let r=0;r<s;r++){const p=e.__digit(r);l.__setDigit(r,1073741823&p<<t|u),u=p>>>30-t}return 0<n&&l.__setDigit(s,u),l}static __leftShiftByAbsolute(e,t){const n=de.__toShiftAmount(t);if(0>n)throw new RangeError("BigInt too big");const s=0|n/30,l=n%30,u=e.length,r=l!==0&&e.__digit(u-1)>>>30-l!=0,p=u+s+(r?1:0),f=new de(p,e.sign);if(l===0){let g=0;for(;g<s;g++)f.__setDigit(g,0);for(;g<p;g++)f.__setDigit(g,e.__digit(g-s))}else{let g=0;for(let b=0;b<s;b++)f.__setDigit(b,0);for(let b=0;b<u;b++){const y=e.__digit(b);f.__setDigit(b+s,1073741823&y<<l|g),g=y>>>30-l}if(r)f.__setDigit(u+s,g);else if(g!==0)throw new Error("implementation bug")}return f.__trim()}static __rightShiftByAbsolute(e,t){const n=e.length,s=e.sign,l=de.__toShiftAmount(t);if(0>l)return de.__rightShiftByMaximum(s);const u=0|l/30,r=l%30;let p=n-u;if(0>=p)return de.__rightShiftByMaximum(s);let f=!1;if(s){if(e.__digit(u)&(1<<r)-1)f=!0;else for(let b=0;b<u;b++)if(e.__digit(b)!==0){f=!0;break}}f&&r===0&&!~e.__digit(n-1)&&p++;let g=new de(p,s);if(r===0){g.__setDigit(p-1,0);for(let b=u;b<n;b++)g.__setDigit(b-u,e.__digit(b))}else{let b=e.__digit(u)>>>r;const y=n-u-1;for(let w=0;w<y;w++){const v=e.__digit(w+u+1);g.__setDigit(w,1073741823&v<<30-r|b),b=v>>>r}g.__setDigit(y,b)}return f&&(g=de.__absoluteAddOne(g,!0,g)),g.__trim()}static __rightShiftByMaximum(e){return e?de.__oneDigit(1,!0):de.__zero()}static __toShiftAmount(e){if(1<e.length)return-1;const t=e.__unsignedDigit(0);return t>de.__kMaxLengthBits?-1:t}static __toPrimitive(e,t="default"){if(typeof e!="object"||e.constructor===de)return e;if(typeof Symbol<"u"&&typeof Symbol.toPrimitive=="symbol"){const l=e[Symbol.toPrimitive];if(l){const u=l(t);if(typeof u!="object")return u;throw new TypeError("Cannot convert object to primitive value")}}const n=e.valueOf;if(n){const l=n.call(e);if(typeof l!="object")return l}const s=e.toString;if(s){const l=s.call(e);if(typeof l!="object")return l}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(e){return de.__isBigInt(e)?e:+e}static __isBigInt(e){return typeof e=="object"&&e!==null&&e.constructor===de}static __truncateToNBits(e,t){const n=0|(e+29)/30,s=new de(n,t.sign),l=n-1;for(let r=0;r<l;r++)s.__setDigit(r,t.__digit(r));let u=t.__digit(l);if(e%30!=0){const r=32-e%30;u=u<<r>>>r}return s.__setDigit(l,u),s.__trim()}static __truncateAndSubFromPowerOfTwo(e,t,n){var s=Math.min;const l=0|(e+29)/30,u=new de(l,n);let r=0;const p=l-1;let f=0;for(const w=s(p,t.length);r<w;r++){const v=0-t.__digit(r)-f;f=1&v>>>30,u.__setDigit(r,1073741823&v)}for(;r<p;r++)u.__setDigit(r,0|1073741823&-f);let g=p<t.length?t.__digit(p):0;const b=e%30;let y;if(b==0)y=0-g-f,y&=1073741823;else{const w=32-b;g=g<<w>>>w;const v=1<<32-w;y=v-g-f,y&=v-1}return u.__setDigit(p,y),u.__trim()}__digit(e){return this[e]}__unsignedDigit(e){return this[e]>>>0}__setDigit(e,t){this[e]=0|t}__setDigitGrow(e,t){this[e]=0|t}__halfDigitLength(){const e=this.length;return 32767>=this.__unsignedDigit(e-1)?2*e-1:2*e}__halfDigit(e){return 32767&this[e>>>1]>>>15*(1&e)}__setHalfDigit(e,t){const n=e>>>1,s=this.__digit(n),l=1&e?32767&s|t<<15:1073709056&s|32767&t;this.__setDigit(n,l)}static __digitPow(e,t){let n=1;for(;0<t;)1&t&&(n*=e),t>>>=1,e*=e;return n}static __isOneDigitInt(e){return(1073741823&e)===e}}de.__kMaxLength=33554432,de.__kMaxLengthBits=de.__kMaxLength<<5,de.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],de.__kBitsPerCharTableShift=5,de.__kBitsPerCharTableMultiplier=1<<de.__kBitsPerCharTableShift,de.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],de.__kBitConversionBuffer=new ArrayBuffer(8),de.__kBitConversionDouble=new Float64Array(de.__kBitConversionBuffer),de.__kBitConversionInts=new Int32Array(de.__kBitConversionBuffer),de.__clz30=Math.clz32?function(i){return Math.clz32(i)-2}:function(i){return i===0?30:0|29-(0|Math.log(i>>>0)/Math.LN2)},de.__imul=Math.imul||function(i,e){return 0|i*e};const vb={};function Jo(i,e){Object.defineProperty(i.prototype,Symbol.toStringTag,{value:e,writable:!1,enumerable:!1,configurable:!0});for(const t of Object.getOwnPropertyNames(i)){const n=Object.getOwnPropertyDescriptor(i,t);n.configurable&&n.enumerable&&(n.enumerable=!1,Object.defineProperty(i,t,n))}for(const t of Object.getOwnPropertyNames(i.prototype)){const n=Object.getOwnPropertyDescriptor(i.prototype,t);n.configurable&&n.enumerable&&(n.enumerable=!1,Object.defineProperty(i.prototype,t,n))}_b(e,i),_b(`${e}.prototype`,i.prototype)}function _b(i,e){const t=`%${i}%`;if(vb[t]!==void 0)throw new Error(`intrinsic ${i} already exists`);vb[t]=e}function zi(i){return vb[i]}const Li="slot-epochNanoSeconds",rc="slot-timezone-identifier",ri="slot-year",ui="slot-month",gi="slot-day",Gi="slot-hour",Hi="slot-minute",qi="slot-second",Wi="slot-millisecond",Yi="slot-microsecond",Zi="slot-nanosecond",kt="slot-calendar",Cs="slot-cached-instant",Rn="slot-time-zone",Ps="slot-years",is="slot-months",Ys="slot-weeks",Is="slot-days",Ds="slot-hours",Rs="slot-minutes",Ls="slot-seconds",zs="slot-milliseconds",Ns="slot-microseconds",Os="slot-nanoseconds",Tr="slot-calendar-identifier",JC=new WeakMap;function el(i){JC.set(i,Object.create(null))}function Fv(i){return JC.get(i)}function Jr(i,...e){if(!i||typeof i!="object")return!1;const t=Fv(i);return!!t&&e.reduce((n,s)=>n&&s in t,!0)}function Z(i,e){const t=Fv(i)[e];if(t===void 0)throw new TypeError(`Missing internal slot ${e}`);return t}function Ji(i,e,t){Fv(i)[e]=t}const jw=/\.[-A-Za-z_]|\.\.[-A-Za-z._]{1,12}|\.[-A-Za-z_][-A-Za-z._]{0,12}|[A-Za-z_][-A-Za-z._]{0,13}/,hI=new RegExp(`(?:(?:${jw.source})(?:\\/(?:${jw.source}))*|Etc/GMT[-+]\\d{1,2}|${/(?:[+\u2212-][0-2][0-9](?::?[0-5][0-9](?::?[0-5][0-9](?:[.,]\d{1,9})?)?)?)/.source})`),Fw=/[A-Za-z0-9]{3,8}/,pI=new RegExp(`(?:${Fw.source}(?:-${Fw.source})*)`),eS=/(?:[+\u2212-]\d{6}|\d{4})/,Kg=/(?:0[1-9]|1[0-2])/,wb=/(?:0[1-9]|[12]\d|3[01])/,fI=new RegExp(`(${eS.source})(?:-(${Kg.source})-(${wb.source})|(${Kg.source})(${wb.source}))`),tS=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,iS=/([+\u2212-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/,nS=new RegExp(`(?:([zZ])|(?:${iS.source})?)(?:\\[(${hI.source})\\])?`),rS=new RegExp(`\\[u-ca=(${pI.source})\\]`),mI=new RegExp(`^${fI.source}(?:(?:T|\\s+)${tS.source})?${nS.source}(?:${rS.source})?$`,"i"),gI=new RegExp(`^T?${tS.source}(?:${nS.source})?(?:${rS.source})?$`,"i"),yI=new RegExp(`^(${eS.source})-?(${Kg.source})$`),xI=new RegExp(`^(?:--)?(${Kg.source})-?(${wb.source})$`),k0=/(\d+)(?:[.,](\d{1,9}))?/,bI=new RegExp(`(?:${k0.source}H)?(?:${k0.source}M)?(?:${k0.source}S)?`),vI=new RegExp(`^([+-])?P${/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/.source}(?:T(?!$)${bI.source})?$`,"i"),sS=Array.prototype.includes,Bv=Array.prototype.push,aS=globalThis.Intl.DateTimeFormat,_I=Math.min,wI=Math.max,Sn=Math.abs,Zr=Math.floor,tf=Math.sign,Ud=Math.trunc,Lf=Number.isNaN,rs=Number.isFinite,TI=Number,zf=String,CI=Number.MAX_SAFE_INTEGER,oS=Object.assign,gs=Object.create,SI=Object.getOwnPropertyDescriptor,EI=Object.is,$v=Reflect.apply,Sr=de.BigInt(0),Uv=de.BigInt(1),xu=de.BigInt(60),Ln=de.BigInt(1e3),Va=de.BigInt(1e6),Al=de.BigInt(1e9),kI=de.BigInt(-1),gc=de.multiply(de.BigInt(86400),Al),nf=de.multiply(de.BigInt(-86400),de.BigInt(1e17)),rf=de.multiply(de.BigInt(86400),de.BigInt(1e17)),lS=de.multiply(de.BigInt(-388152),de.BigInt(1e13)),AI=de.multiply(gc,de.BigInt(3660)),cS=de.multiply(gc,de.BigInt(366)),uS=de.multiply(gc,de.BigInt(14)),MI=["iso8601","hebrew","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","islamicc","persian","ethiopic","ethioaa","coptic","chinese","dangi","roc","indian","buddhist","japanese","gregory"];function dS(i){if(typeof i!="number"||!rs(i))return!1;const e=Sn(i);return Zr(e)===e}function Zn(i){return typeof i=="object"&&i!==null||typeof i=="function"}function sf(i){if(typeof i=="bigint")throw new TypeError("Cannot convert BigInt to number");return TI(i)}function zn(i){const e=sf(i);if(Lf(e))return 0;const t=Ud(e);return e===0?0:t}function Bi(i){if(typeof i=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return zf(i)}function Gn(i){const e=zn(i);if(!rs(e))throw new RangeError("infinity is out of range");return e}function af(i,e){const t=zn(i);if(!rs(t))throw new RangeError("infinity is out of range");if(t<1)throw e!==void 0?new RangeError(`property '${e}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return t}function Wr(i){const e=sf(i);if(Lf(e))return 0;if(!rs(e))throw new RangeError("infinity is out of range");if(!dS(e))throw new RangeError(`unsupported fractional value ${e}`);return zn(e)}function qr(i,e){return{quotient:de.divide(i,e),remainder:de.remainder(i,e)}}function Vv(i){return de.lessThan(i,Sr)?de.multiply(i,kI):i}function Tb(i,...e){return Bv.apply(i,e),i}const Bw=new Map([["year",Gn],["month",af],["monthCode",Bi],["day",af],["hour",Gn],["minute",Gn],["second",Gn],["millisecond",Gn],["microsecond",Gn],["nanosecond",Gn],["years",Wr],["months",Wr],["weeks",Wr],["days",Wr],["hours",Wr],["minutes",Wr],["seconds",Wr],["milliseconds",Wr],["microseconds",Wr],["nanoseconds",Wr],["era",Bi],["eraYear",zn],["offset",Bi]]),PI=new Map([["hour",0],["minute",0],["second",0],["millisecond",0],["microsecond",0],["nanosecond",0]]),hh=[["years","year","date"],["months","month","date"],["weeks","week","date"],["days","day","date"],["hours","hour","time"],["minutes","minute","time"],["seconds","second","time"],["milliseconds","millisecond","time"],["microseconds","microsecond","time"],["nanoseconds","nanosecond","time"]],Qg=new Map(hh.map(i=>[i[0],i[1]])),II=new Map(hh.map(([i,e])=>[e,i])),$w=hh.map(([,i])=>i),Uw=Array.from(Qg.keys()).sort(),Vw=new Map;function hS(i){let e=Vw.get(i);return e===void 0&&(e=new aS("en-us",{timeZone:zf(i),hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),Vw.set(i,e)),e}function $r(i){return Jr(i,Li)&&!Jr(i,Rn,kt)}function Oo(i){return Jr(i,rc)}function wr(i){return Jr(i,Tr)}function gr(i){return Jr(i,Ps,is,Is,Ds,Rs,Ls,zs,Ns,Os)}function gn(i){return Jr(i,"slot-date-brand")}function yr(i){return Jr(i,Gi,Hi,qi,Wi,Yi,Zi)&&!Jr(i,ri,ui,gi)}function Qi(i){return Jr(i,ri,ui,gi,Gi,Hi,qi,Wi,Yi,Zi)}function Mn(i){return Jr(i,"slot-year-month-brand")}function ns(i){return Jr(i,"slot-month-day-brand")}function wi(i){return Jr(i,Li,Rn,kt)}function ph(i){if(Jr(i,kt)||Jr(i,Rn))throw new TypeError("with() does not support a calendar or timeZone property");if(i.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(i.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function pS(i){let{ianaName:e,offset:t,z:n}=function(l){try{let u=Xv(l);if(u)return{ianaName:u.toString()}}catch{}try{const u=tl(l);if(u.z||u.offset||u.ianaName)return u}catch{}throw new RangeError(`Invalid time zone: ${l}`)}(i);return e||(n?"UTC":t)}function Nf(i,e){return e==="never"||e==="auto"&&i==="iso8601"?"":`[u-ca=${i}]`}function tl(i){const e=mI.exec(i);if(!e)throw new RangeError(`invalid ISO 8601 string: ${i}`);let t=e[1];if(t[0]===""&&(t=`-${t.slice(1)}`),t==="-000000")throw new RangeError(`invalid ISO 8601 string: ${i}`);const n=zn(t),s=zn(e[2]||e[4]),l=zn(e[3]||e[5]),u=zn(e[6]),r=e[6]!==void 0,p=zn(e[7]||e[10]);let f=zn(e[8]||e[11]);f===60&&(f=59);const g=(e[9]||e[12])+"000000000",b=zn(g.slice(0,3)),y=zn(g.slice(3,6)),w=zn(g.slice(6,9));let v,T=!1;if(e[13])v=void 0,T=!0;else if(e[14]&&e[15]){const x=e[14]==="-"||e[14]===""?"-":"+",A=e[15]||"00",D=e[16]||"00",C=e[17]||"00";let I=e[18]||"0";if(v=`${x}${A}:${D}`,+I){for(;I.endsWith("0");)I=I.slice(0,-1);v+=`:${C}.${I}`}else+C&&(v+=`:${C}`);v==="-00:00"&&(v="+00:00")}let S=e[19];if(S)try{S=Xv(S).toString()}catch{}const E=e[20];return e1(n,s,l,u,p,f,b,y,w),{year:n,month:s,day:l,hasTime:r,hour:u,minute:p,second:f,millisecond:b,microsecond:y,nanosecond:w,ianaName:S,offset:v,z:T,calendar:E}}function fS(i){const e=yI.exec(i);let t,n,s,l;if(e){let u=e[1];if(u[0]===""&&(u=`-${u.slice(1)}`),u==="-000000")throw new RangeError(`invalid ISO 8601 string: ${i}`);t=zn(u),n=zn(e[2]),s=e[3]}else{let u;if({year:t,month:n,calendar:s,day:l,z:u}=tl(i),u)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:t,month:n,calendar:s,referenceISODay:l}}function mS(i){const e=xI.exec(i);let t,n,s,l;if(e)t=zn(e[1]),n=zn(e[2]);else{let u;if({month:t,day:n,calendar:s,year:l,z:u}=tl(i),u)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:t,day:n,calendar:s,referenceISOYear:l}}function DI(i){const e=vI.exec(i);if(!e)throw new RangeError(`invalid duration: ${i}`);if(e.slice(2).every(S=>S===void 0))throw new RangeError(`invalid duration: ${i}`);const t=e[1]==="-"||e[1]===""?-1:1,n=zn(e[2])*t,s=zn(e[3])*t,l=zn(e[4])*t,u=zn(e[5])*t,r=zn(e[6])*t;let p=e[7],f=zn(e[8])*t,g=e[9],b=zn(e[10])*t;const y=e[11]+"000000000";let w=zn(y.slice(0,3))*t,v=zn(y.slice(3,6))*t,T=zn(y.slice(6,9))*t;return p=p?t*zn(p)/10**p.length:0,g=g?t*zn(g)/10**g.length:0,{minutes:f,seconds:b,milliseconds:w,microseconds:v,nanoseconds:T}=function(E,x,A,D,C,I,N){let W=E,Y=x,X=A,O=D,V=C,$=I,L=N;if(W!==0){[Y,X,O,V,$,L].forEach(G=>{if(G!==0)throw new RangeError("only the smallest unit can be fractional")});const R=60*W;Y=Ud(R),X=R%1}if(X!==0){[O,V,$,L].forEach(U=>{if(U!==0)throw new RangeError("only the smallest unit can be fractional")});const R=60*X;O=Ud(R);const G=R%1;if(G!==0){const U=1e3*G;V=Ud(U);const B=U%1;if(B!==0){const H=1e3*B;$=Ud(H);const q=H%1;q!==0&&(L=Ud(1e3*q))}}}return{minutes:Y,seconds:O,milliseconds:V,microseconds:$,nanoseconds:L}}(p,f,g,b,w,v,T),nx(n,s,l,u,r,f,b,w,v,T),{years:n,months:s,weeks:l,days:u,hours:r,minutes:f,seconds:b,milliseconds:w,microseconds:v,nanoseconds:T}}function RI(i){let{year:e,month:t,day:n,hour:s,minute:l,second:u,millisecond:r,microsecond:p,nanosecond:f,offset:g,z:b}=function(T){const S=tl(T);if(!S.z&&!S.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return S}(i);if(!b&&!g)throw new RangeError("Temporal.Instant requires a time zone offset");const y=b?0:Iu(g);({year:e,month:t,day:n,hour:s,minute:l,second:u,millisecond:r,microsecond:p,nanosecond:f}=Qv(e,t,n,s,l,u,r,p,f-y));const w=bc(e,t,n,s,l,u,r,p,f);if(w===null)throw new RangeError("DateTime outside of supported range");return w}function Jg(i,e,t,n){let s=i,l=e,u=t;switch(n){case"reject":qo(s,l,u);break;case"constrain":({year:s,month:l,day:u}=PS(s,l,u))}return{year:s,month:l,day:u}}function Gy(i,e,t,n,s,l,u){let r=i,p=e,f=t,g=n,b=s,y=l;switch(u){case"reject":ix(r,p,f,g,b,y);break;case"constrain":({hour:r,minute:p,second:f,millisecond:g,microsecond:b,nanosecond:y}=function(v,T,S,E,x,A){const D=pa(v,0,23),C=pa(T,0,59),I=pa(S,0,59),N=pa(E,0,999),W=pa(x,0,999),Y=pa(A,0,999);return{hour:D,minute:C,second:I,millisecond:N,microsecond:W,nanosecond:Y}}(r,p,f,g,b,y))}return{hour:r,minute:p,second:f,millisecond:g,microsecond:b,nanosecond:y}}function Nu(i){if(!Zn(i))return DI(Bi(i));if(gr(i))return{years:Z(i,Ps),months:Z(i,is),weeks:Z(i,Ys),days:Z(i,Is),hours:Z(i,Ds),minutes:Z(i,Rs),seconds:Z(i,Ls),milliseconds:Z(i,zs),microseconds:Z(i,Ns),nanoseconds:Z(i,Os)};const e={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};let t=function(v){if(!Zn(v))throw new TypeError("invalid duration-like");const T={years:void 0,months:void 0,weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0,milliseconds:void 0,microseconds:void 0,nanoseconds:void 0};let S=!1;for(const E of Uw){const x=v[E];x!==void 0&&(S=!0,T[E]=Wr(x))}if(!S)throw new TypeError("invalid duration-like");return T}(i);for(const w of Uw){const v=t[w];v!==void 0&&(e[w]=v)}let{years:n,months:s,weeks:l,days:u,hours:r,minutes:p,seconds:f,milliseconds:g,microseconds:b,nanoseconds:y}=e;return nx(n,s,l,u,r,p,f,g,b,y),{years:n,months:s,weeks:l,days:u,hours:r,minutes:p,seconds:f,milliseconds:g,microseconds:b,nanoseconds:y}}function kr(i){return i===void 0?"constrain":_c(i,"overflow",["constrain","reject"],"constrain")}function of(i){return i===void 0?"compatible":_c(i,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function Xs(i,e){return _c(i,"roundingMode",["ceil","floor","trunc","halfExpand"],e)}function Of(i){switch(i){case"ceil":return"floor";case"floor":return"ceil";default:return i}}function Cb(i,e){return i===void 0?e:_c(i,"offset",["prefer","use","ignore","reject"],e)}function jf(i){return _c(i,"calendarName",["auto","always","never"],"auto")}function Rl(i,e,t){let n=1/0;e!==void 0&&(n=e),t||e===void 0||(n=e>1?e-1:1);const s=function(u,r,p,f,g){let b=u[r];if(b===void 0)return g;const y=sf(b);if(Lf(y)||y<p||y>f)throw new RangeError(`${String(r)} must be between ${p} and ${f}, not ${y}`);return Zr(y)}(i,"roundingIncrement",1,n,1);if(e!==void 0&&e%s!=0)throw new RangeError(`Rounding increment must divide evenly into ${e}`);return s}function Gv(i,e){return Rl(i,{year:void 0,month:void 0,week:void 0,day:void 0,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[e],!1)}function Ff(i){const e=Kr(i,"smallestUnit","time",void 0);if(e==="hour"){const s=hh.reduce((l,[u,r,p])=>(p==="time"&&r!=="hour"&&l.push(r,u),l),[]);throw new RangeError(`smallestUnit must be one of ${s.join(", ")}, not ${e}`)}switch(e){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}let t=i.fractionalSecondDigits;if(t===void 0&&(t="auto"),typeof t!="number"){const s=Bi(t);if(s==="auto")return{precision:"auto",unit:"nanosecond",increment:1};throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${s}`)}if(Lf(t)||t<0||t>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`);const n=Zr(t);switch(n){case 0:return{precision:n,unit:"second",increment:1};case 1:case 2:case 3:return{precision:n,unit:"millisecond",increment:10**(3-n)};case 4:case 5:case 6:return{precision:n,unit:"microsecond",increment:10**(6-n)};case 7:case 8:case 9:return{precision:n,unit:"nanosecond",increment:10**(9-n)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`)}}const Au=Symbol("~required~");function Kr(i,e,t,n,s=[]){const l=[];for(const[,f,g]of hh)t!=="datetime"&&t!==g||l.push(f);l.push(...s);let u=n;u===Au?u=void 0:u!==void 0&&l.push(u);const r=[...l];for(const f of l){const g=II.get(f);g!==void 0&&r.push(g)}let p=_c(i,e,r,u);if(p===void 0&&n===Au)throw new RangeError(`${e} is required`);return Qg.has(p)?Qg.get(p):p}function Dg(i){const e=i.relativeTo;if(e===void 0)return e;let t,n,s,l,u,r,p,f,g,b,y,w,v="option",T=!1;if(Zn(e)){if(wi(e)||gn(e))return e;if(Qi(e))return Jd(e);b=fh(e);const S=an(e,zr(b,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]),E=gs(null);E.overflow="constrain",{year:t,month:n,day:s,hour:l,minute:u,second:r,millisecond:p,microsecond:f,nanosecond:g}=Bf(b,S,E),w=e.offset,w===void 0&&(v="wall"),y=e.timeZone}else{let S,E;({year:t,month:n,day:s,hour:l,minute:u,second:r,millisecond:p,microsecond:f,nanosecond:g,calendar:b,ianaName:S,offset:w,z:E}=tl(Bi(e))),S&&(y=S),E?v="exact":w||(v="wall"),b||(b=Ar()),b=ss(b),T=!0}if(y!==void 0){y=Bs(y);let S=0;return v==="option"&&(S=Iu(Bi(w))),us(ty(t,n,s,l,u,r,p,f,g,v,S,y,"compatible","reject",T),y,b)}return ao(t,n,s,b)}function Sb(i,e,t,n,s,l,u,r,p,f){for(const[g,b]of[["years",i],["months",e],["weeks",t],["days",n],["hours",s],["minutes",l],["seconds",u],["milliseconds",r],["microseconds",p],["nanoseconds",f]])if(b!==0)return Qg.get(g);return"nanosecond"}function ya(i,e){return $w.indexOf(i)>$w.indexOf(e)?e:i}function Hy(i,e){let t=i;return t===void 0&&(t=gs(null)),oS(gs(null),t,{largestUnit:e})}function an(i,e,t,{emptySourceErrorMessage:n}={emptySourceErrorMessage:"no supported properties found"}){const s=gs(null);let l=!1;for(const u of e){let r=i[u];if(r!==void 0)l=!0,Bw.has(u)&&(r=Bw.get(u)(r)),s[u]=r;else if(t!=="partial"){if(sS.call(t,u))throw new TypeError(`required property '${u}' missing or undefined`);r=PI.get(u),s[u]=r}}if(t==="partial"&&!l)throw new TypeError(n);if(s.era===void 0!=(s.eraYear===void 0))throw new RangeError("properties 'era' and 'eraYear' must be provided together");return s}function ey(i,e="complete"){const t=["hour","microsecond","millisecond","minute","nanosecond","second"],n=an(i,t,"partial",{emptySourceErrorMessage:"invalid time-like"}),s={};for(const l of t){const u=SI(n,l);u!==void 0?s[l]=u.value:e==="complete"&&(s[l]=0)}return s}function Vn(i,e){let t=i;if(Zn(t)){if(gn(t))return t;if(wi(t)&&(kr(e),t=ka(Z(t,Rn),Z(t,Cs),Z(t,kt))),Qi(t))return kr(e),ao(Z(t,ri),Z(t,ui),Z(t,gi),Z(t,kt));const p=fh(t);return xc(p,an(t,zr(p,["day","month","monthCode","year"]),[]),e)}kr(e);const{year:n,month:s,day:l,calendar:u,z:r}=function(f){return tl(f)}(Bi(t));if(r)throw new RangeError("Z designator not supported for PlainDate");return new(zi("%Temporal.PlainDate%"))(n,s,l,u)}function Bf(i,e,t){let{hour:n,minute:s,second:l,millisecond:u,microsecond:r,nanosecond:p}=ey(e);const f=kr(t),g=xc(i,e,t),b=Z(g,ri),y=Z(g,ui),w=Z(g,gi);return{hour:n,minute:s,second:l,millisecond:u,microsecond:r,nanosecond:p}=Gy(n,s,l,u,r,p,f),{year:b,month:y,day:w,hour:n,minute:s,second:l,millisecond:u,microsecond:r,nanosecond:p}}function fu(i,e){let t,n,s,l,u,r,p,f,g,b;if(Zn(i)){if(Qi(i))return i;if(wi(i))return kr(e),ka(Z(i,Rn),Z(i,Cs),Z(i,kt));if(gn(i))return kr(e),ha(Z(i,ri),Z(i,ui),Z(i,gi),0,0,0,0,0,0,Z(i,kt));b=fh(i);const y=an(i,zr(b,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]);({year:t,month:n,day:s,hour:l,minute:u,second:r,millisecond:p,microsecond:f,nanosecond:g}=Bf(b,y,e))}else{let y;if(kr(e),{year:t,month:n,day:s,hour:l,minute:u,second:r,millisecond:p,microsecond:f,nanosecond:g,calendar:b,z:y}=function(v){return tl(v)}(Bi(i)),y)throw new RangeError("Z designator not supported for PlainDateTime");e1(t,n,s,l,u,r,p,f,g),b===void 0&&(b=Ar()),b=ss(b)}return ha(t,n,s,l,u,r,p,f,g,b)}function qd(i){if(gr(i))return i;let{years:e,months:t,weeks:n,days:s,hours:l,minutes:u,seconds:r,milliseconds:p,microseconds:f,nanoseconds:g}=Nu(i);return new(zi("%Temporal.Duration%"))(e,t,n,s,l,u,r,p,f,g)}function Fo(i){if($r(i))return i;if(wi(i))return new(zi("%Temporal.Instant%"))(Z(i,Li));const e=RI(Bi(i));return new(zi("%Temporal.Instant%"))(e)}function Gw(i,e){let t=i;if(Zn(t)){if(ns(t))return t;let p,f;if(Jr(t,kt))p=Z(t,kt),f=!1;else{let b=t.calendar;f=b===void 0,b===void 0&&(b=Ar()),p=ss(b)}t=t;const g=an(t,zr(p,["day","month","monthCode","year"]),[]);return f&&g.month!==void 0&&g.monthCode===void 0&&g.year===void 0&&(g.year=1972),Qd(p,g,e)}kr(e);let{month:n,day:s,referenceISOYear:l,calendar:u}=mS(Bi(t)),r=u;return r===void 0&&(r=Ar()),r=ss(r),l===void 0?(qo(1972,n,s),lf(n,s,r)):Qd(r,lf(n,s,r,l))}function kl(i,e="constrain"){let t,n,s,l,u,r,p,f=i;if(Zn(f)){if(yr(f))return f;if(wi(f)&&(f=ka(Z(f,Rn),Z(f,Cs),Z(f,kt))),Qi(f))return new(zi("%Temporal.PlainTime%"))(Z(f,Gi),Z(f,Hi),Z(f,qi),Z(f,Wi),Z(f,Yi),Z(f,Zi));if(p=fh(f),Bi(p)!=="iso8601")throw new RangeError("PlainTime can only have iso8601 calendar");({hour:t,minute:n,second:s,millisecond:l,microsecond:u,nanosecond:r}=ey(f)),{hour:t,minute:n,second:s,millisecond:l,microsecond:u,nanosecond:r}=Gy(t,n,s,l,u,r,e)}else if({hour:t,minute:n,second:s,millisecond:l,microsecond:u,nanosecond:r,calendar:p}=function(b){const y=gI.exec(b);let w,v,T,S,E,x,A;if(y){w=zn(y[1]),v=zn(y[2]||y[5]),T=zn(y[3]||y[6]),T===60&&(T=59);const D=(y[4]||y[7])+"000000000";S=zn(D.slice(0,3)),E=zn(D.slice(3,6)),x=zn(D.slice(6,9)),A=y[15]}else{let D,C;if({hasTime:C,hour:w,minute:v,second:T,millisecond:S,microsecond:E,nanosecond:x,calendar:A,z:D}=tl(b),!C)throw new RangeError(`time is missing in string: ${b}`);if(D)throw new RangeError("Z designator not supported for PlainTime")}if(/[tT ][0-9][0-9]/.test(b))return{hour:w,minute:v,second:T,millisecond:S,microsecond:E,nanosecond:x,calendar:A};try{const{month:D,day:C}=mS(b);qo(1972,D,C)}catch{try{const{year:D,month:C}=fS(b);qo(D,C,1)}catch{return{hour:w,minute:v,second:T,millisecond:S,microsecond:E,nanosecond:x,calendar:A}}}throw new RangeError(`invalid ISO 8601 time-only string ${b}; may need a T prefix`)}(Bi(f)),ix(t,n,s,l,u,r),p!==void 0&&p!=="iso8601")throw new RangeError("PlainTime can only have iso8601 calendar");return new(zi("%Temporal.PlainTime%"))(t,n,s,l,u,r)}function zp(i,e){if(Zn(i)){if(Mn(i))return i;const r=fh(i);return Pu(r,an(i,zr(r,["month","monthCode","year"]),[]),e)}kr(e);let{year:t,month:n,referenceISODay:s,calendar:l}=fS(Bi(i)),u=l;return u===void 0&&(u=Ar()),u=ss(u),s===void 0?(qo(t,n,1),cf(t,n,u)):Pu(u,cf(t,n,u,s))}function ty(i,e,t,n,s,l,u,r,p,f,g,b,y,w,v){const T=new(zi("%Temporal.PlainDateTime%"))(i,e,t,n,s,l,u,r,p);if(f==="wall"||w==="ignore")return Z(Fs(b,T,y),Li);if(f==="exact"||w==="use"){const E=bc(i,e,t,n,s,l,u,r,p);if(E===null)throw new RangeError("ZonedDateTime outside of supported range");return de.subtract(E,de.BigInt(g))}const S=iy(b,T);for(const E of S){const x=wo(b,E),A=de.toNumber(la(de.BigInt(x),6e10,"halfExpand"));if(x===g||v&&A===g)return Z(E,Li)}if(w==="reject"){const E=Kv(g),x=Oo(b)?Z(b,rc):"time zone";throw new RangeError(`Offset ${E} is invalid for ${T.toString()} in ${x}`)}return Z(TS(S,b,T,y),Li)}function Np(i,e){let t,n,s,l,u,r,p,f,g,b,y,w,v=!1,T="option";if(Zn(i)){if(wi(i))return i;w=fh(i);const E=an(i,Tb(zr(w,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),"timeZone","offset"),["timeZone"]);({year:t,month:n,day:s,hour:l,minute:u,second:r,millisecond:p,microsecond:f,nanosecond:g}=Bf(w,E,e)),b=Bs(E.timeZone),y=E.offset,y===void 0?T="wall":y=Bi(y)}else{let E,x;if(kr(e),{year:t,month:n,day:s,hour:l,minute:u,second:r,millisecond:p,microsecond:f,nanosecond:g,ianaName:E,offset:y,z:x,calendar:w}=function(D){const C=tl(D);if(!C.ianaName)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return C}(Bi(i)),!E)throw new RangeError("time zone ID required in brackets");x?T="exact":y||(T="wall"),b=new(zi("%Temporal.TimeZone%"))(E),w||(w=Ar()),w=ss(w),v=!0}let S=0;return T==="option"&&(S=Iu(y)),us(ty(t,n,s,l,u,r,p,f,g,T,S,b,of(e),Cb(e,"reject"),v),b,w)}function gS(i,e,t,n,s){qo(e,t,n),IS(e,t,n),el(i),Ji(i,ri,e),Ji(i,ui,t),Ji(i,gi,n),Ji(i,kt,s),Ji(i,"slot-date-brand",!0)}function ao(i,e,t,n=Ar()){const s=zi("%Temporal.PlainDate%"),l=gs(s.prototype);return gS(l,i,e,t,n),l}function yS(i,e,t,n,s,l,u,r,p,f,g){e1(e,t,n,s,l,u,r,p,f),DS(e,t,n,s,l,u,r,p,f),el(i),Ji(i,ri,e),Ji(i,ui,t),Ji(i,gi,n),Ji(i,Gi,s),Ji(i,Hi,l),Ji(i,qi,u),Ji(i,Wi,r),Ji(i,Yi,p),Ji(i,Zi,f),Ji(i,kt,g)}function ha(i,e,t,n,s,l,u,r,p,f=Ar()){const g=zi("%Temporal.PlainDateTime%"),b=gs(g.prototype);return yS(b,i,e,t,n,s,l,u,r,p,f),b}function xS(i,e,t,n,s){qo(s,e,t),IS(s,e,t),el(i),Ji(i,ui,e),Ji(i,gi,t),Ji(i,ri,s),Ji(i,kt,n),Ji(i,"slot-month-day-brand",!0)}function lf(i,e,t=Ar(),n=1972){const s=zi("%Temporal.PlainMonthDay%"),l=gs(s.prototype);return xS(l,i,e,t,n),l}function bS(i,e,t,n,s){qo(e,t,s),function(u,r){ps(u,-271821,275760),u===-271821?ps(r,4,12):u===275760&&ps(r,1,9)}(e,t),el(i),Ji(i,ri,e),Ji(i,ui,t),Ji(i,gi,s),Ji(i,kt,n),Ji(i,"slot-year-month-brand",!0)}function cf(i,e,t=Ar(),n=1){const s=zi("%Temporal.PlainYearMonth%"),l=gs(s.prototype);return bS(l,i,e,t,n),l}function vS(i,e,t,n){hu(e),el(i),Ji(i,Li,e),Ji(i,Rn,t),Ji(i,kt,n);const s=new(zi("%Temporal.Instant%"))(Z(i,Li));Ji(i,Cs,s)}function us(i,e,t=Ar()){const n=zi("%Temporal.ZonedDateTime%"),s=gs(n.prototype);return vS(s,i,e,t),s}function Ar(){return new(zi("%Temporal.Calendar%"))("iso8601")}function zr(i,e){let t=e;i.fields&&(t=i.fields(t));const n=[];for(const s of t){if(typeof s!="string")throw new TypeError("bad return from calendar.fields()");Bv.call(n,s)}return n}function Mu(i,e,t){const n=i.mergeFields;if(!n)return{...e,...t};const s=Reflect.apply(n,i,[e,t]);if(!Zn(s))throw new TypeError("bad return from calendar.mergeFields()");return s}function js(i,e,t,n,s){let l=s;l===void 0&&(l=i.dateAdd);const u=$v(l,i,[e,t,n]);if(!gn(u))throw new TypeError("invalid result");return u}function yc(i,e,t,n,s){let l=s;l===void 0&&(l=i.dateUntil);const u=$v(l,i,[e,t,n]);if(!gr(u))throw new TypeError("invalid result");return u}function qy(i,e){const t=i.year(e);if(t===void 0)throw new RangeError("calendar year result must be an integer");return Gn(t)}function Wy(i,e){const t=i.month(e);if(t===void 0)throw new RangeError("calendar month result must be a positive integer");return af(t)}function $f(i,e){const t=i.monthCode(e);if(t===void 0)throw new RangeError("calendar monthCode result must be a string");return Bi(t)}function Yy(i,e){const t=i.day(e);if(t===void 0)throw new RangeError("calendar day result must be a positive integer");return af(t)}function Zy(i,e){let t=i.era(e);return t!==void 0&&(t=Bi(t)),t}function Xy(i,e){let t=i.eraYear(e);return t!==void 0&&(t=Gn(t)),t}function Hv(i,e){return i.dayOfWeek(e)}function qv(i,e){return i.dayOfYear(e)}function Wv(i,e){return i.weekOfYear(e)}function Yv(i,e){return i.daysInWeek(e)}function Uf(i,e){return i.daysInMonth(e)}function Ky(i,e){return i.daysInYear(e)}function Qy(i,e){return i.monthsInYear(e)}function Jy(i,e){return i.inLeapYear(e)}function ss(i){let e=i;if(Zn(e)){if(Jr(e,kt))return Z(e,kt);if(!("calendar"in e)||(e=e.calendar,Zn(e)&&!("calendar"in e)))return e}const t=Bi(e),n=zi("%Temporal.Calendar%");if(jS(t))return new n(t);let s;try{({calendar:s}=tl(t))}catch{throw new RangeError(`Invalid calendar: ${t}`)}return s||(s="iso8601"),new n(s)}function fh(i){if(Jr(i,kt))return Z(i,kt);const{calendar:e}=i;return e===void 0?Ar():ss(e)}function Vf(i,e){return i===e?!0:Bi(i)===Bi(e)}function _S(i,e){if(i===e)return e;const t=Bi(i),n=Bi(e);if(t===n||t==="iso8601")return e;if(n==="iso8601")return i;throw new RangeError("irreconcilable calendars")}function xc(i,e,t){const n=i.dateFromFields(e,t);if(!gn(n))throw new TypeError("invalid result");return n}function Pu(i,e,t){const n=i.yearMonthFromFields(e,t);if(!Mn(n))throw new TypeError("invalid result");return n}function Qd(i,e,t){const n=i.monthDayFromFields(e,t);if(!ns(n))throw new TypeError("invalid result");return n}function Bs(i){let e=i;if(Zn(e)){if(wi(e))return Z(e,Rn);if(!("timeZone"in e)||(e=e.timeZone,Zn(e)&&!("timeZone"in e)))return e}const t=pS(Bi(e));return new(zi("%Temporal.TimeZone%"))(t)}function wS(i,e){return i===e?!0:Bi(i)===Bi(e)}function Jd(i){return ao(Z(i,ri),Z(i,ui),Z(i,gi),Z(i,kt))}function Zv(i){return new(zi("%Temporal.PlainTime%"))(Z(i,Gi),Z(i,Hi),Z(i,qi),Z(i,Wi),Z(i,Yi),Z(i,Zi))}function wo(i,e){let t=i.getOffsetNanosecondsFor;if(typeof t!="function")throw new TypeError("getOffsetNanosecondsFor not callable");const n=Reflect.apply(t,i,[e]);if(typeof n!="number")throw new TypeError("bad return from getOffsetNanosecondsFor");if(!dS(n)||Sn(n)>864e11)throw new RangeError("out-of-range return from getOffsetNanosecondsFor");return n}function Eb(i,e){return Kv(wo(i,e))}function ka(i,e,t){const n=Z(e,Li),s=wo(i,e);let{year:l,month:u,day:r,hour:p,minute:f,second:g,millisecond:b,microsecond:y,nanosecond:w}=SS(n);return{year:l,month:u,day:r,hour:p,minute:f,second:g,millisecond:b,microsecond:y,nanosecond:w}=Qv(l,u,r,p,f,g,b,y,w+s),ha(l,u,r,p,f,g,b,y,w,t)}function Fs(i,e,t){return TS(iy(i,e),i,e,t)}function TS(i,e,t,n){const s=zi("%Temporal.Instant%"),l=i.length;if(l===1)return i[0];if(l)switch(n){case"compatible":case"earlier":return i[0];case"later":return i[l-1];case"reject":throw new RangeError("multiple instants found")}const u=Z(t,ri),r=Z(t,ui),p=Z(t,gi),f=Z(t,Gi),g=Z(t,Hi),b=Z(t,qi),y=Z(t,Wi),w=Z(t,Yi),v=Z(t,Zi),T=bc(u,r,p,f,g,b,y,w,v);if(T===null)throw new RangeError("DateTime outside of supported range");const S=new s(de.subtract(T,gc)),E=new s(de.add(T,gc)),x=wo(e,S),A=wo(e,E)-x;switch(n){case"earlier":{const D=Z(t,kt),C=zi("%Temporal.PlainDateTime%"),I=Ab(u,r,p,f,g,b,y,w,v,D,0,0,0,0,0,0,0,0,0,-A,void 0);return iy(e,new C(I.year,I.month,I.day,I.hour,I.minute,I.second,I.millisecond,I.microsecond,I.nanosecond,D))[0]}case"compatible":case"later":{const D=Z(t,kt),C=zi("%Temporal.PlainDateTime%"),I=Ab(u,r,p,f,g,b,y,w,v,D,0,0,0,0,0,0,0,0,0,A,void 0),N=iy(e,new C(I.year,I.month,I.day,I.hour,I.minute,I.second,I.millisecond,I.microsecond,I.nanosecond,D));return N[N.length-1]}case"reject":throw new RangeError("no such instant found")}}function iy(i,e){const t=i.getPossibleInstantsFor(e),n=[];for(const s of t){if(!$r(s))throw new TypeError("bad return from getPossibleInstantsFor");Bv.call(n,s)}return n}function Ou(i){let e;return i<0||i>9999?e=(i<0?"-":"+")+`000000${Sn(i)}`.slice(-6):e=`0000${i}`.slice(-4),e}function or(i){return`00${i}`.slice(-2)}function ex(i,e,t,n,s){if(s==="minute")return"";const l=`:${or(i)}`;let u,r=1e6*e+1e3*t+n;if(s==="auto"){if(r===0)return l;for(u=`${r}`.padStart(9,"0");u[u.length-1]==="0";)u=u.slice(0,-1)}else{if(s===0)return l;u=`${r}`.padStart(9,"0").slice(0,s)}return`${l}.${u}`}function Hw(i,e,t){let n=e;n===void 0&&(n=new(zi("%Temporal.TimeZone%"))("UTC"));const s=ka(n,i,Ar()),l=Ou(Z(s,ri)),u=or(Z(s,ui)),r=or(Z(s,gi)),p=or(Z(s,Gi)),f=or(Z(s,Hi)),g=ex(Z(s,qi),Z(s,Wi),Z(s,Yi),Z(s,Zi),t);let b="Z";return e!==void 0&&(b=CS(wo(n,i))),`${l}-${u}-${r}T${p}:${f}${g}${b}`}function A0(i,e="auto",t){function n(Y){return Y<=CI?Y.toString(10):de.BigInt(Y).toString(10)}const s=Z(i,Ps),l=Z(i,is),u=Z(i,Ys),r=Z(i,Is),p=Z(i,Ds),f=Z(i,Rs);let g=Z(i,Ls),b=Z(i,zs),y=Z(i,Ns),w=Z(i,Os);const v=Uo(s,l,u,r,p,f,g,b,y,w);if(t){const{unit:Y,increment:X,roundingMode:O}=t;({seconds:g,milliseconds:b,microseconds:y,nanoseconds:w}=vc(0,0,0,0,0,0,g,b,y,w,X,Y,O))}const T=[];s&&T.push(`${n(Sn(s))}Y`),l&&T.push(`${n(Sn(l))}M`),u&&T.push(`${n(Sn(u))}W`),r&&T.push(`${n(Sn(r))}D`);const S=[];p&&S.push(`${n(Sn(p))}H`),f&&S.push(`${n(Sn(f))}M`);const E=[];let x,A,D,C,I=eh(0,0,0,g,b,y,w,0);({quotient:I,remainder:x}=qr(I,Ln)),{quotient:I,remainder:A}=qr(I,Ln),{quotient:C,remainder:D}=qr(I,Ln);const N=1e6*Sn(de.toNumber(D))+1e3*Sn(de.toNumber(A))+Sn(de.toNumber(x));let W;if(e==="auto"){if(N!==0)for(W=`${N}`.padStart(9,"0");W[W.length-1]==="0";)W=W.slice(0,-1)}else e!==0&&(W=`${N}`.padStart(9,"0").slice(0,e));return W&&E.unshift(".",W),de.equal(C,Sr)&&!E.length&&e==="auto"||E.unshift(Vv(C).toString()),E.length&&S.push(`${E.join("")}S`),S.length&&S.unshift("T"),T.length||S.length?`${v<0?"-":""}P${T.join("")}${S.join("")}`:"PT0S"}function qw(i,e="auto"){return`${Ou(Z(i,ri))}-${or(Z(i,ui))}-${or(Z(i,gi))}${Nf(Bi(Z(i,kt)),e)}`}function Ww(i,e,t="auto",n){let s=Z(i,ri),l=Z(i,ui),u=Z(i,gi),r=Z(i,Gi),p=Z(i,Hi),f=Z(i,qi),g=Z(i,Wi),b=Z(i,Yi),y=Z(i,Zi);if(n){const{unit:w,increment:v,roundingMode:T}=n;({year:s,month:l,day:u,hour:r,minute:p,second:f,millisecond:g,microsecond:b,nanosecond:y}=r1(s,l,u,r,p,f,g,b,y,v,w,T))}return`${Ou(s)}-${or(l)}-${or(u)}T${or(r)}:${or(p)}${ex(f,g,b,y,e)}${Nf(Bi(Z(i,kt)),t)}`}function Yw(i,e="auto"){let t=`${or(Z(i,ui))}-${or(Z(i,gi))}`;const n=Bi(Z(i,kt));(e==="always"||n!=="iso8601")&&(t=`${Ou(Z(i,ri))}-${t}`);const s=Nf(n,e);return s&&(t+=s),t}function Zw(i,e="auto"){let t=`${Ou(Z(i,ri))}-${or(Z(i,ui))}`;const n=Bi(Z(i,kt));(e==="always"||n!=="iso8601")&&(t+=`-${or(Z(i,gi))}`);const s=Nf(n,e);return s&&(t+=s),t}function Xw(i,e,t="auto",n="auto",s="auto",l){let u=Z(i,Cs);if(l){const{unit:g,increment:b,roundingMode:y}=l,w=ry(Z(i,Li),b,g,y);u=new(zi("%Temporal.Instant%"))(w)}const r=Z(i,Rn),p=ka(r,u,Ar());let f=`${Ou(Z(p,ri))}-${or(Z(p,ui))}-${or(Z(p,gi))}T${or(Z(p,Gi))}:${or(Z(p,Hi))}${ex(Z(p,qi),Z(p,Wi),Z(p,Yi),Z(p,Zi),e)}`;return s!=="never"&&(f+=CS(wo(r,u))),n!=="never"&&(f+=`[${r}]`),f+=Nf(Bi(Z(i,kt)),t),f}function Op(i){return FS.test(zf(i))}function Iu(i){const e=FS.exec(zf(i));if(!e)throw new RangeError(`invalid time zone offset: ${i}`);return(e[1]==="-"||e[1]===""?-1:1)*(1e9*(60*(60*+e[2]+ +(e[3]||0))+ +(e[4]||0))+ +((e[5]||0)+"000000000").slice(0,9))}function Xv(i){return Op(i)?Kv(Iu(i)):hS(zf(i)).resolvedOptions().timeZone}function Cl(i,e){const{year:t,month:n,day:s,hour:l,minute:u,second:r,millisecond:p,microsecond:f,nanosecond:g}=ES(i,e),b=bc(t,n,s,l,u,r,p,f,g);if(b===null)throw new RangeError("Date outside of supported range");return de.toNumber(de.subtract(b,i))}function Kv(i){const e=i<0?"-":"+",t=Sn(i),n=t%1e9,s=Zr(t/1e9)%60,l=Zr(t/6e10)%60,u=or(Zr(t/36e11)),r=or(l),p=or(s);let f="";if(n){let g=`${n}`.padStart(9,"0");for(;g[g.length-1]==="0";)g=g.slice(0,-1);f=`:${p}.${g}`}else s&&(f=`:${p}`);return`${e}${u}:${r}${f}`}function CS(i){let e=de.toNumber(la(de.BigInt(i),6e10,"halfExpand"));const t=e<0?"-":"+";e=Sn(e);const n=e/6e10%60;return`${t}${or(Zr(e/36e11))}:${or(n)}`}function bc(i,e,t,n,s,l,u,r,p){const f=new Date;f.setUTCHours(n,s,l,u),f.setUTCFullYear(i,e-1,t);const g=f.getTime();if(Lf(g))return null;let b=de.multiply(de.BigInt(g),Va);return b=de.add(b,de.multiply(de.BigInt(r),Ln)),b=de.add(b,de.BigInt(p)),de.lessThan(b,nf)||de.greaterThan(b,rf)?null:b}function SS(i){const{quotient:e,remainder:t}=qr(i,Va);let n=de.toNumber(e),s=de.toNumber(t);s<0&&(s+=1e6,n-=1);const l=Zr(s/1e3)%1e3,u=s%1e3,r=new Date(n);return{epochMilliseconds:n,year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds(),microsecond:l,nanosecond:u}}function ES(i,e){const{epochMilliseconds:t,millisecond:n,microsecond:s,nanosecond:l}=SS(i),{year:u,month:r,day:p,hour:f,minute:g,second:b}=function(w,v){const T=hS(w);return function(E){const x=E.split(/[^\w]+/);if(x.length!==7)throw new RangeError(`expected 7 parts in "${E}`);const A=+x[0],D=+x[1];let C=+x[2];const I=x[3].toUpperCase();if(I==="B"||I==="BC")C=1-C;else if(I!=="A"&&I!=="AD")throw new RangeError(`Unknown era ${I} in "${E}`);let N=+x[4];N===24&&(N=0);const W=+x[5],Y=+x[6];if(!(rs(C)&&rs(A)&&rs(D)&&rs(N)&&rs(W)&&rs(Y)))throw new RangeError(`Invalid number in "${E}`);return{year:C,month:A,day:D,hour:N,minute:W,second:Y}}(T.format(new Date(v)))}(e,t);return Qv(u,r,p,f,g,b,n,s,l)}function Kw(i,e){return de.lessThan(i,e)?e:i}function kS(){return de.add(a1(),AI)}function AS(i,e){const t=kS(),n=de.greaterThan(i,t),s=n?de.subtract(i,cS):lS;let l=de.subtract(i,Uv);const u=Cl(l,e);let r=l,p=u;for(;u===p&&de.greaterThan(l,s);)r=de.subtract(l,uS),p=Cl(r,e),u===p&&(l=r);return u===p?n?AS(de.subtract(t,gc),e):null:BS(f=>Cl(f,e),r,l,p,u)}function uc(i){return i===void 0?!1:i%4==0&&(i%100!=0||i%400==0)}function Ml(i,e){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[uc(i)?"leapyear":"standard"][e-1]}function M0(i,e,t){const n=e+(e<3?10:-2),s=i-(e<3?1:0),l=Zr(s/100),u=s-100*l,r=(t+Zr(2.6*n-.2)+(u+Zr(u/4))+(Zr(l/4)-2*l))%7;return r+(r<=0?7:0)}function ny(i,e,t){let n=t;for(let s=e-1;s>0;s--)n+=Ml(i,s);return n}function Uo(i,e,t,n,s,l,u,r,p,f){for(const g of[i,e,t,n,s,l,u,r,p,f])if(g!==0)return g<0?-1:1;return 0}function Rg(i,e){let t=i,n=e;if(!rs(t)||!rs(n))throw new RangeError("infinity is out of range");return n-=1,t+=Zr(n/12),n%=12,n<0&&(n+=12),n+=1,{year:t,month:n}}function tx(i,e,t){let n=i,s=e,l=t;if(!rs(l))throw new RangeError("infinity is out of range");({year:n,month:s}=Rg(n,s));let u=0,r=s>2?n:n-1;for(;u=uc(r)?366:365,l<-u;)n-=1,r-=1,l+=u;for(r+=1;u=uc(r)?366:365,l>u;)n+=1,r+=1,l-=u;for(;l<1;)({year:n,month:s}=Rg(n,s-1)),l+=Ml(n,s);for(;l>Ml(n,s);)l-=Ml(n,s),{year:n,month:s}=Rg(n,s+1);return{year:n,month:s,day:l}}function Qv(i,e,t,n,s,l,u,r,p){const{deltaDays:f,hour:g,minute:b,second:y,millisecond:w,microsecond:v,nanosecond:T}=Sl(n,s,l,u,r,p),{year:S,month:E,day:x}=tx(i,e,t+f);return{year:S,month:E,day:x,hour:g,minute:b,second:y,millisecond:w,microsecond:v,nanosecond:T}}function Sl(i,e,t,n,s,l){let u=i,r=e,p=t,f=n,g=s,b=l;if(!(rs(u)&&rs(r)&&rs(p)&&rs(f)&&rs(g)&&rs(b)))throw new RangeError("infinity is out of range");g+=Zr(b/1e3),b=Id(b,1e3),f+=Zr(g/1e3),g=Id(g,1e3),p+=Zr(f/1e3),f=Id(f,1e3),r+=Zr(p/60),p=Id(p,60),u+=Zr(r/60),r=Id(r,60);const y=Zr(u/24);return u=Id(u,24),{deltaDays:y,hour:u,minute:r,second:p,millisecond:f,microsecond:g,nanosecond:b}}function eh(i,e,t,n,s,l,u,r){const p=de.BigInt(i);let f=de.BigInt(u);i!==0&&(f=de.subtract(de.BigInt(u),de.BigInt(r)));const g=de.add(de.BigInt(e),de.multiply(p,de.BigInt(24))),b=de.add(de.BigInt(t),de.multiply(g,xu)),y=de.add(de.BigInt(n),de.multiply(b,xu)),w=de.add(de.BigInt(s),de.multiply(y,Ln)),v=de.add(de.BigInt(l),de.multiply(w,Ln));return de.add(de.BigInt(f),de.multiply(v,Ln))}function Jv(i,e){const t=zi("%Temporal.Instant%"),n=tf(de.toNumber(i));let s=de.BigInt(i),l=864e11;if(n===0)return{days:0,nanoseconds:Sr,dayLengthNs:l};if(!wi(e)){let x;return{quotient:x,remainder:s}=qr(s,de.BigInt(l)),{days:de.toNumber(x),nanoseconds:s,dayLengthNs:l}}const u=Z(e,Li),r=Z(e,Cs),p=de.add(u,s),f=new t(p),g=Z(e,Rn),b=Z(e,kt),y=ka(g,r,b),w=ka(g,f,b);let{days:v}=n1(Z(y,ri),Z(y,ui),Z(y,gi),Z(y,Gi),Z(y,Hi),Z(y,qi),Z(y,Wi),Z(y,Yi),Z(y,Zi),Z(w,ri),Z(w,ui),Z(w,gi),Z(w,Gi),Z(w,Hi),Z(w,qi),Z(w,Wi),Z(w,Yi),Z(w,Zi),b,"day",gs(null)),T=Ga(r,g,b,0,0,0,v,0,0,0,0,0,0);if(n===1)for(;v>0&&de.greaterThan(T,p);)--v,T=Ga(r,g,b,0,0,0,v,0,0,0,0,0,0);s=de.subtract(p,T);let S=!1,E=new t(T);do{const x=Ga(E,g,b,0,0,0,n,0,0,0,0,0,0),A=Z(E,Li);l=de.toNumber(de.subtract(x,A)),S=de.greaterThan(de.multiply(de.subtract(s,de.BigInt(l)),de.BigInt(n)),Sr),S&&(s=de.subtract(s,de.BigInt(l)),E=new t(x),v+=n)}while(S);return{days:v,nanoseconds:s,dayLengthNs:Sn(l)}}function ga(i,e,t,n,s,l,u,r,p){let f,g,b,y,w,v,T=i;if(wi(p)){const E=Ga(Z(p,Cs),Z(p,Rn),Z(p,kt),0,0,0,T,e,t,n,s,l,u),x=Z(p,Li);f=de.subtract(E,x)}else f=eh(T,e,t,n,s,l,u,0);r==="year"||r==="month"||r==="week"||r==="day"?{days:T,nanoseconds:f}=Jv(f,p):T=0;const S=de.lessThan(f,Sr)?-1:1;switch(f=Vv(f),g=b=y=w=v=Sr,r){case"year":case"month":case"week":case"day":case"hour":({quotient:g,remainder:f}=qr(f,Ln)),{quotient:b,remainder:g}=qr(g,Ln),{quotient:y,remainder:b}=qr(b,Ln),{quotient:w,remainder:y}=qr(y,xu),{quotient:v,remainder:w}=qr(w,xu);break;case"minute":({quotient:g,remainder:f}=qr(f,Ln)),{quotient:b,remainder:g}=qr(g,Ln),{quotient:y,remainder:b}=qr(b,Ln),{quotient:w,remainder:y}=qr(y,xu);break;case"second":({quotient:g,remainder:f}=qr(f,Ln)),{quotient:b,remainder:g}=qr(g,Ln),{quotient:y,remainder:b}=qr(b,Ln);break;case"millisecond":({quotient:g,remainder:f}=qr(f,Ln)),{quotient:b,remainder:g}=qr(g,Ln);break;case"microsecond":({quotient:g,remainder:f}=qr(f,Ln));break;case"nanosecond":break;default:throw new Error("assert not reached")}return{days:T,hours:de.toNumber(v)*S,minutes:de.toNumber(w)*S,seconds:de.toNumber(y)*S,milliseconds:de.toNumber(b)*S,microseconds:de.toNumber(g)*S,nanoseconds:de.toNumber(f)*S}}function og(i,e,t,n,s,l){let u=i,r=e,p=t,f=n;const g=zi("%Temporal.Duration%"),b=Uo(u,r,p,f,0,0,0,0,0,0);let y,w;l&&(w=Vn(l),y=Z(w,kt));const v=new g(b),T=new g(0,b),S=new g(0,0,b);switch(s){case"year":break;case"month":{if(!y)throw new RangeError("a starting point is required for months balancing");const E=y.dateAdd,x=y.dateUntil;let A=w;for(;Sn(u)>0;){const D=js(y,A,v,void 0,E),C=gs(null);C.largestUnit="month";const I=Z(yc(y,A,D,C,x),is);A=D,r+=I,u-=b}}break;case"week":if(!y)throw new RangeError("a starting point is required for weeks balancing");for(;Sn(u)>0;){let E;({relativeTo:w,days:E}=Ts(y,w,v)),f+=E,u-=b}for(;Sn(r)>0;){let E;({relativeTo:w,days:E}=Ts(y,w,T)),f+=E,r-=b}break;default:for(;Sn(u)>0;){if(!y)throw new RangeError("a starting point is required for balancing calendar units");let E;({relativeTo:w,days:E}=Ts(y,w,v)),f+=E,u-=b}for(;Sn(r)>0;){if(!y)throw new RangeError("a starting point is required for balancing calendar units");let E;({relativeTo:w,days:E}=Ts(y,w,T)),f+=E,r-=b}for(;Sn(p)>0;){if(!y)throw new RangeError("a starting point is required for balancing calendar units");let E;({relativeTo:w,days:E}=Ts(y,w,S)),f+=E,p-=b}}return{years:u,months:r,weeks:p,days:f}}function Qw(i,e,t,n,s){if(wi(i)){const l=Z(i,Cs),u=Z(i,Rn),r=Z(i,kt),p=wo(u,l),f=Ga(l,u,r,e,t,n,s,0,0,0,0,0,0);return wo(u,new(zi("%Temporal.Instant%"))(f))-p}return 0}function MS(i){return new(zi("%Temporal.Duration%"))(-Z(i,Ps),-Z(i,is),-Z(i,Ys),-Z(i,Is),-Z(i,Ds),-Z(i,Rs),-Z(i,Ls),-Z(i,zs),-Z(i,Ns),-Z(i,Os))}function pa(i,e,t){return _I(t,wI(e,i))}function PS(i,e,t){const n=pa(e,1,12);return{year:i,month:n,day:pa(t,1,Ml(i,n))}}function ps(i,e,t){if(i<e||i>t)throw new RangeError(`value out of range: ${e} <= ${i} <= ${t}`)}function qo(i,e,t){ps(e,1,12),ps(t,1,Ml(i,e))}function IS(i,e,t){DS(i,e,t,12,0,0,0,0,0)}function ix(i,e,t,n,s,l){ps(i,0,23),ps(e,0,59),ps(t,0,59),ps(n,0,999),ps(s,0,999),ps(l,0,999)}function e1(i,e,t,n,s,l,u,r,p){qo(i,e,t),ix(n,s,l,u,r,p)}function DS(i,e,t,n,s,l,u,r,p){if(ps(i,-271821,275760),i===-271821&&bc(i,e,t+1,n,s,l,u,r,p-1)==null||i===275760&&bc(i,e,t-1,n,s,l,u,r,p+1)==null)throw new RangeError("DateTime outside of supported range")}function hu(i){if(de.lessThan(i,nf)||de.greaterThan(i,rf))throw new RangeError("Instant outside of supported range")}function nx(i,e,t,n,s,l,u,r,p,f){const g=Uo(i,e,t,n,s,l,u,r,p,f);for(const b of[i,e,t,n,s,l,u,r,p,f]){if(!rs(b))throw new RangeError("infinite values not allowed as duration fields");const y=tf(b);if(y!==0&&y!==g)throw new RangeError("mixed-sign values not allowed as duration fields")}}function t1(i,e,t,n,s,l,u){switch(u){case"year":case"month":{const r=-dc(i,e,t,n,s,l);if(r===0)return{years:0,months:0,weeks:0,days:0};const p={year:i,month:e,day:t},f={year:n,month:s,day:l};let g=f.year-p.year,b=bu(i,e,t,g,0,0,0,"constrain"),y=-dc(b.year,b.month,b.day,n,s,l);if(y===0)return u==="year"?{years:g,months:0,weeks:0,days:0}:{years:0,months:12*g,weeks:0,days:0};let w=f.month-p.month;if(y!==r&&(g-=r,w+=12*r),b=bu(i,e,t,g,w,0,0,"constrain"),y=-dc(b.year,b.month,b.day,n,s,l),y===0)return u==="year"?{years:g,months:w,weeks:0,days:0}:{years:0,months:w+12*g,weeks:0,days:0};y!==r&&(w-=r,w===-r&&(g-=r,w=11*r),b=bu(i,e,t,g,w,0,0,"constrain"));let v=0;return v=b.month===f.month?f.day-b.day:r<0?-b.day-(Ml(f.year,f.month)-f.day):f.day+(Ml(b.year,b.month)-b.day),u==="month"&&(w+=12*g,g=0),{years:g,months:w,weeks:0,days:v}}case"week":case"day":{let r,p,f;dc(i,e,t,n,s,l)<0?(p={year:i,month:e,day:t},r={year:n,month:s,day:l},f=1):(p={year:n,month:s,day:l},r={year:i,month:e,day:t},f=-1);let g=ny(r.year,r.month,r.day)-ny(p.year,p.month,p.day);for(let y=p.year;y<r.year;++y)g+=uc(y)?366:365;let b=0;return u==="week"&&(b=Zr(g/7),g%=7),b*=f,g*=f,{years:0,months:0,weeks:b,days:g}}default:throw new Error("assert not reached")}}function RS(i,e,t,n,s,l,u,r,p,f,g,b){let y=u-i,w=r-e,v=p-t,T=f-n,S=g-s,E=b-l;const x=Uo(0,0,0,0,y,w,v,T,S,E);y*=x,w*=x,v*=x,T*=x,S*=x,E*=x;let A=0;if({deltaDays:A,hour:y,minute:w,second:v,millisecond:T,microsecond:S,nanosecond:E}=Sl(y,w,v,T,S,E),A!=0)throw new Error("assertion failure in DifferenceTime: _bt_.[[Days]] should be 0");return y*=x,w*=x,v*=x,T*=x,S*=x,E*=x,{hours:y,minutes:w,seconds:v,milliseconds:T,microseconds:S,nanoseconds:E}}function i1(i,e,t,n,s){const l=de.subtract(e,i),u=de.remainder(l,de.BigInt(864e11)),r=de.subtract(l,u),p=la(u,o1[n]*t,s),f=de.add(r,p),g=de.toNumber(de.remainder(f,Ln)),b=de.toNumber(de.remainder(de.divide(f,Ln),Ln)),y=de.toNumber(de.remainder(de.divide(f,Va),Ln));return{seconds:de.toNumber(de.divide(f,Al)),milliseconds:y,microseconds:b,nanoseconds:g}}function n1(i,e,t,n,s,l,u,r,p,f,g,b,y,w,v,T,S,E,x,A,D){let C=i,I=e,N=t,{hours:W,minutes:Y,seconds:X,milliseconds:O,microseconds:V,nanoseconds:$}=RS(n,s,l,u,r,p,y,w,v,T,S,E);const L=Uo(0,0,0,0,W,Y,X,O,V,$);dc(f,g,b,C,I,N)===-L&&({year:C,month:I,day:N}=tx(C,I,N-L),{hours:W,minutes:Y,seconds:X,milliseconds:O,microseconds:V,nanoseconds:$}=ga(-L,W,Y,X,O,V,$,A));const R=ao(C,I,N,x),G=ao(f,g,b,x),U=Hy(D,ya("day",A));let{years:B,months:H,weeks:q,days:se}=yc(x,R,G,U);return{days:se,hours:W,minutes:Y,seconds:X,milliseconds:O,microseconds:V,nanoseconds:$}=ga(se,W,Y,X,O,V,$,A),{years:B,months:H,weeks:q,days:se,hours:W,minutes:Y,seconds:X,milliseconds:O,microseconds:V,nanoseconds:$}}function LS(i,e,t,n,s,l){const u=de.subtract(e,i);if(de.equal(u,Sr))return{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};const r=zi("%Temporal.Instant%"),p=new r(i),f=new r(e),g=ka(t,p,n),b=ka(t,f,n);let{years:y,months:w,weeks:v,days:T}=n1(Z(g,ri),Z(g,ui),Z(g,gi),Z(g,Gi),Z(g,Hi),Z(g,qi),Z(g,Wi),Z(g,Yi),Z(g,Zi),Z(b,ri),Z(b,ui),Z(b,gi),Z(b,Gi),Z(b,Hi),Z(b,qi),Z(b,Wi),Z(b,Yi),Z(b,Zi),n,s,l);const S=Ga(p,t,n,y,w,v,0,0,0,0,0,0,0);let E=de.subtract(e,S);const x=us(S,t,n);({nanoseconds:E,days:T}=Jv(E,x));const{hours:A,minutes:D,seconds:C,milliseconds:I,microseconds:N,nanoseconds:W}=ga(0,0,0,0,0,0,de.toNumber(E),"hour");return{years:y,months:w,weeks:v,days:T,hours:A,minutes:D,seconds:C,milliseconds:I,microseconds:N,nanoseconds:W}}function Jw(i,e,t,n){const s=Fo(t);let l,u;[l,u]=i==="until"?[e,s]:[s,e];const r=ln(n),p=Kr(r,"smallestUnit","time","nanosecond"),f=ya("second",p);let g=Kr(r,"largestUnit","time","auto");if(g==="auto"&&(g=f),ya(g,p)!==g)throw new RangeError(`largestUnit ${g} cannot be smaller than smallestUnit ${p}`);const b=Xs(r,"trunc"),y=Rl(r,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[p],!1),w=Z(l,Li),v=Z(u,Li);let T,S,{seconds:E,milliseconds:x,microseconds:A,nanoseconds:D}=i1(w,v,y,p,b);return{hours:T,minutes:S,seconds:E,milliseconds:x,microseconds:A,nanoseconds:D}=ga(0,0,0,E,x,A,D,g),new(zi("%Temporal.Duration%"))(0,0,0,0,T,S,E,x,A,D)}function e2(i,e,t,n){const s=i==="since"?-1:1,l=Vn(t),u=Z(e,kt),r=Z(l,kt),p=Bi(u),f=Bi(r);if(p!==f)throw new RangeError(`cannot compute difference between dates of ${p} and ${f} calendars`);const g=ln(n),b=Kr(g,"smallestUnit","date","day"),y=ya("day",b);let w=Kr(g,"largestUnit","date","auto");if(w==="auto"&&(w=y),ya(w,b)!==w)throw new RangeError(`largestUnit ${w} cannot be smaller than smallestUnit ${b}`);let v=Xs(g,"trunc");i==="since"&&(v=Of(v));const T=Rl(g,void 0,!1),S=Hy(g,w);let{years:E,months:x,weeks:A,days:D}=yc(u,e,l,S);return b==="day"&&T===1||({years:E,months:x,weeks:A,days:D}=vc(E,x,A,D,0,0,0,0,0,0,T,b,v,e)),new(zi("%Temporal.Duration%"))(s*E,s*x,s*A,s*D,0,0,0,0,0,0)}function t2(i,e,t,n){const s=i==="since"?-1:1,l=fu(t),u=Z(e,kt),r=Z(l,kt),p=Bi(u),f=Bi(r);if(p!==f)throw new RangeError(`cannot compute difference between dates of ${p} and ${f} calendars`);const g=ln(n),b=Kr(g,"smallestUnit","datetime","nanosecond"),y=ya("day",b);let w=Kr(g,"largestUnit","datetime","auto");if(w==="auto"&&(w=y),ya(w,b)!==w)throw new RangeError(`largestUnit ${w} cannot be smaller than smallestUnit ${b}`);let v=Xs(g,"trunc");i==="since"&&(v=Of(v));const T=Gv(g,b);let{years:S,months:E,weeks:x,days:A,hours:D,minutes:C,seconds:I,milliseconds:N,microseconds:W,nanoseconds:Y}=n1(Z(e,ri),Z(e,ui),Z(e,gi),Z(e,Gi),Z(e,Hi),Z(e,qi),Z(e,Wi),Z(e,Yi),Z(e,Zi),Z(l,ri),Z(l,ui),Z(l,gi),Z(l,Gi),Z(l,Hi),Z(l,qi),Z(l,Wi),Z(l,Yi),Z(l,Zi),u,w,g);const X=Jd(e);return{years:S,months:E,weeks:x,days:A,hours:D,minutes:C,seconds:I,milliseconds:N,microseconds:W,nanoseconds:Y}=vc(S,E,x,A,D,C,I,N,W,Y,T,b,v,X),{days:A,hours:D,minutes:C,seconds:I,milliseconds:N,microseconds:W,nanoseconds:Y}=ga(A,D,C,I,N,W,Y,w),new(zi("%Temporal.Duration%"))(s*S,s*E,s*x,s*A,s*D,s*C,s*I,s*N,s*W,s*Y)}function i2(i,e,t,n){const s=i==="since"?-1:1,l=kl(t),u=ln(n);let r=Kr(u,"largestUnit","time","auto");r==="auto"&&(r="hour");const p=Kr(u,"smallestUnit","time","nanosecond");if(ya(r,p)!==r)throw new RangeError(`largestUnit ${r} cannot be smaller than smallestUnit ${p}`);let f=Xs(u,"trunc");i==="since"&&(f=Of(f));const g=Rl(u,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[p],!1);let{hours:b,minutes:y,seconds:w,milliseconds:v,microseconds:T,nanoseconds:S}=RS(Z(e,Gi),Z(e,Hi),Z(e,qi),Z(e,Wi),Z(e,Yi),Z(e,Zi),Z(l,Gi),Z(l,Hi),Z(l,qi),Z(l,Wi),Z(l,Yi),Z(l,Zi));return{hours:b,minutes:y,seconds:w,milliseconds:v,microseconds:T,nanoseconds:S}=vc(0,0,0,0,b,y,w,v,T,S,g,p,f),{hours:b,minutes:y,seconds:w,milliseconds:v,microseconds:T,nanoseconds:S}=ga(0,b,y,w,v,T,S,r),new(zi("%Temporal.Duration%"))(0,0,0,0,s*b,s*y,s*w,s*v,s*T,s*S)}function n2(i,e,t,n){const s=i==="since"?-1:1,l=zp(t),u=Z(e,kt),r=Z(l,kt),p=Bi(u),f=Bi(r);if(p!==f)throw new RangeError(`cannot compute difference between months of ${p} and ${f} calendars`);const g=ln(n),b=hh.reduce((W,[Y,X,O])=>(O==="date"&&X!=="week"&&X!=="day"&&W.push(X,Y),W),[]),y=Kr(g,"smallestUnit","date","month");if(y==="week"||y==="day")throw new RangeError(`smallestUnit must be one of ${b.join(", ")}, not ${y}`);let w=Kr(g,"largestUnit","date","auto");if(w==="week"||w==="day")throw new RangeError(`largestUnit must be one of ${b.join(", ")}, not ${w}`);if(w==="auto"&&(w="year"),ya(w,y)!==w)throw new RangeError(`largestUnit ${w} cannot be smaller than smallestUnit ${y}`);let v=Xs(g,"trunc");i==="since"&&(v=Of(v));const T=Rl(g,void 0,!1),S=zr(u,["monthCode","year"]),E=an(l,S,[]);E.day=1;const x=an(e,S,[]);x.day=1;const A=xc(u,E),D=xc(u,x),C=Hy(g,w);let{years:I,months:N}=yc(u,D,A,C);return y==="month"&&T===1||({years:I,months:N}=vc(I,N,0,0,0,0,0,0,0,0,T,y,v,D)),new(zi("%Temporal.Duration%"))(s*I,s*N,0,0,0,0,0,0,0,0)}function r2(i,e,t,n){const s=i==="since"?-1:1,l=Np(t),u=Z(e,kt),r=Z(l,kt),p=Bi(u),f=Bi(r);if(p!==f)throw new RangeError(`cannot compute difference between dates of ${p} and ${f} calendars`);const g=ln(n),b=Kr(g,"smallestUnit","datetime","nanosecond"),y=ya("hour",b);let w=Kr(g,"largestUnit","datetime","auto");if(w==="auto"&&(w=y),ya(w,b)!==w)throw new RangeError(`largestUnit ${w} cannot be smaller than smallestUnit ${b}`);let v=Xs(g,"trunc");i==="since"&&(v=Of(v));const T=Gv(g,b),S=Z(e,Li),E=Z(l,Li);let x,A,D,C,I,N,W,Y,X,O;if(w!=="year"&&w!=="month"&&w!=="week"&&w!=="day")x=0,A=0,D=0,C=0,{seconds:W,milliseconds:Y,microseconds:X,nanoseconds:O}=i1(S,E,T,b,v),{hours:I,minutes:N,seconds:W,milliseconds:Y,microseconds:X,nanoseconds:O}=ga(0,0,0,W,Y,X,O,w);else{const V=Z(e,Rn);if(!wS(V,Z(l,Rn)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");const $=Hy(g,w);({years:x,months:A,weeks:D,days:C,hours:I,minutes:N,seconds:W,milliseconds:Y,microseconds:X,nanoseconds:O}=LS(S,E,V,u,w,$)),{years:x,months:A,weeks:D,days:C,hours:I,minutes:N,seconds:W,milliseconds:Y,microseconds:X,nanoseconds:O}=vc(x,A,D,C,I,N,W,Y,X,O,T,b,v,e),{years:x,months:A,weeks:D,days:C,hours:I,minutes:N,seconds:W,milliseconds:Y,microseconds:X,nanoseconds:O}=OS(x,A,D,C,I,N,W,Y,X,O,T,b,v,e)}return new(zi("%Temporal.Duration%"))(s*x,s*A,s*D,s*C,s*I,s*N,s*W,s*Y,s*X,s*O)}function bu(i,e,t,n,s,l,u,r){let p=i,f=e,g=t,b=l,y=u;return p+=n,f+=s,{year:p,month:f}=Rg(p,f),{year:p,month:f,day:g}=Jg(p,f,g,r),y+=7*b,g+=y,{year:p,month:f,day:g}=tx(p,f,g),{year:p,month:f,day:g}}function zS(i,e,t,n,s,l,u,r,p,f,g,b){let y=i,w=e,v=t,T=n,S=s,E=l;y+=u,w+=r,v+=p,T+=f,S+=g,E+=b;let x=0;return{deltaDays:x,hour:y,minute:w,second:v,millisecond:T,microsecond:S,nanosecond:E}=Sl(y,w,v,T,S,E),{deltaDays:x,hour:y,minute:w,second:v,millisecond:T,microsecond:S,nanosecond:E}}function NS(i,e,t,n,s,l,u,r,p,f,g,b,y,w,v,T,S,E,x,A,D){const C=ya(Sb(i,e,t,n,s,l,u,r,p,f),Sb(g,b,y,w,v,T,S,E,x,A));let I,N,W,Y,X,O,V,$,L,R;if(D)if(gn(D)){const G=zi("%Temporal.Duration%"),U=Z(D,kt),B=new G(i,e,t,n,0,0,0,0,0,0),H=new G(g,b,y,w,0,0,0,0,0,0),q=U.dateAdd,se=js(U,D,B,void 0,q),pe=js(U,se,H,void 0,q),ne=ya("day",C),le=gs(null);le.largestUnit=ne,{years:I,months:N,weeks:W,days:Y}=yc(U,D,pe,le),{days:Y,hours:X,minutes:O,seconds:V,milliseconds:$,microseconds:L,nanoseconds:R}=ga(Y,s+v,l+T,u+S,r+E,p+x,f+A,C)}else{const G=zi("%Temporal.Instant%"),U=Z(D,Rn),B=Z(D,kt),H=Ga(Z(D,Cs),U,B,i,e,t,n,s,l,u,r,p,f),q=Ga(new G(H),U,B,g,b,y,w,v,T,S,E,x,A);C!=="year"&&C!=="month"&&C!=="week"&&C!=="day"?(I=0,N=0,W=0,Y=0,{seconds:V,milliseconds:$,microseconds:L,nanoseconds:R}=i1(Z(D,Li),q,1,"nanosecond","halfExpand"),{hours:X,minutes:O,seconds:V,milliseconds:$,microseconds:L,nanoseconds:R}=ga(0,0,0,V,$,L,R,C)):{years:I,months:N,weeks:W,days:Y,hours:X,minutes:O,seconds:V,milliseconds:$,microseconds:L,nanoseconds:R}=LS(Z(D,Li),q,U,B,C,gs(null))}else{if(C==="year"||C==="month"||C==="week")throw new RangeError("relativeTo is required for years, months, or weeks arithmetic");I=N=W=0,{days:Y,hours:X,minutes:O,seconds:V,milliseconds:$,microseconds:L,nanoseconds:R}=ga(n+w,s+v,l+T,u+S,r+E,p+x,f+A,C)}return nx(I,N,W,Y,X,O,V,$,L,R),{years:I,months:N,weeks:W,days:Y,hours:X,minutes:O,seconds:V,milliseconds:$,microseconds:L,nanoseconds:R}}function kb(i,e,t,n,s,l,u){let r=Sr;r=de.add(r,de.BigInt(u)),r=de.add(r,de.multiply(de.BigInt(l),Ln)),r=de.add(r,de.multiply(de.BigInt(s),Va)),r=de.add(r,de.multiply(de.BigInt(n),Al)),r=de.add(r,de.multiply(de.BigInt(t),de.BigInt(6e10))),r=de.add(r,de.multiply(de.BigInt(e),de.BigInt(36e11)));const p=de.add(i,r);return hu(p),p}function Ab(i,e,t,n,s,l,u,r,p,f,g,b,y,w,v,T,S,E,x,A,D){let C=w,{deltaDays:I,hour:N,minute:W,second:Y,millisecond:X,microsecond:O,nanosecond:V}=zS(n,s,l,u,r,p,v,T,S,E,x,A);C+=I;const $=zi("%Temporal.Duration%"),L=js(f,ao(i,e,t,f),new $(g,b,y,C,0,0,0,0,0,0),D);return{year:Z(L,ri),month:Z(L,ui),day:Z(L,gi),hour:N,minute:W,second:Y,millisecond:X,microsecond:O,nanosecond:V}}function Ga(i,e,t,n,s,l,u,r,p,f,g,b,y,w){const v=zi("%Temporal.Duration%");if(Uo(n,s,l,u,0,0,0,0,0,0)===0)return kb(Z(i,Li),r,p,f,g,b,y);const T=ka(e,i,t),S=js(t,ao(Z(T,ri),Z(T,ui),Z(T,gi),t),new v(n,s,l,u,0,0,0,0,0,0),w),E=ha(Z(S,ri),Z(S,ui),Z(S,gi),Z(T,Gi),Z(T,Hi),Z(T,qi),Z(T,Wi),Z(T,Yi),Z(T,Zi),t);return kb(Z(Fs(e,E,"compatible"),Li),r,p,f,g,b,y)}function s2(i,e,t,n){const s=i==="subtract"?-1:1;let{years:l,months:u,weeks:r,days:p,hours:f,minutes:g,seconds:b,milliseconds:y,microseconds:w,nanoseconds:v}=Nu(t);const T=Dg(ln(n));return{years:l,months:u,weeks:r,days:p,hours:f,minutes:g,seconds:b,milliseconds:y,microseconds:w,nanoseconds:v}=NS(Z(e,Ps),Z(e,is),Z(e,Ys),Z(e,Is),Z(e,Ds),Z(e,Rs),Z(e,Ls),Z(e,zs),Z(e,Ns),Z(e,Os),s*l,s*u,s*r,s*p,s*f,s*g,s*b,s*y,s*w,s*v,T),new(zi("%Temporal.Duration%"))(l,u,r,p,f,g,b,y,w,v)}function a2(i,e,t){const n=i==="subtract"?-1:1,{hours:s,minutes:l,seconds:u,milliseconds:r,microseconds:p,nanoseconds:f}=function(y,w){let v=Nu(y);for(const T of w)if(v[T]!==0)throw new RangeError(`Duration field ${T} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);return v}(t,["years","months","weeks","days"]),g=kb(Z(e,Li),n*s,n*l,n*u,n*r,n*p,n*f);return new(zi("%Temporal.Instant%"))(g)}function o2(i,e,t,n){const s=i==="subtract"?-1:1,{years:l,months:u,weeks:r,days:p,hours:f,minutes:g,seconds:b,milliseconds:y,microseconds:w,nanoseconds:v}=Nu(t),T=ln(n),S=Z(e,kt),{year:E,month:x,day:A,hour:D,minute:C,second:I,millisecond:N,microsecond:W,nanosecond:Y}=Ab(Z(e,ri),Z(e,ui),Z(e,gi),Z(e,Gi),Z(e,Hi),Z(e,qi),Z(e,Wi),Z(e,Yi),Z(e,Zi),S,s*l,s*u,s*r,s*p,s*f,s*g,s*b,s*y,s*w,s*v,T);return ha(E,x,A,D,C,I,N,W,Y,S)}function l2(i,e,t){const n=i==="subtract"?-1:1,{hours:s,minutes:l,seconds:u,milliseconds:r,microseconds:p,nanoseconds:f}=Nu(t);let{hour:g,minute:b,second:y,millisecond:w,microsecond:v,nanosecond:T}=zS(Z(e,Gi),Z(e,Hi),Z(e,qi),Z(e,Wi),Z(e,Yi),Z(e,Zi),n*s,n*l,n*u,n*r,n*p,n*f);return{hour:g,minute:b,second:y,millisecond:w,microsecond:v,nanosecond:T}=Gy(g,b,y,w,v,T,"reject"),new(zi("%Temporal.PlainTime%"))(g,b,y,w,v,T)}function c2(i,e,t,n){let s=Nu(t);i==="subtract"&&(s={years:-s.years,months:-s.months,weeks:-s.weeks,days:-s.days,hours:-s.hours,minutes:-s.minutes,seconds:-s.seconds,milliseconds:-s.milliseconds,microseconds:-s.microseconds,nanoseconds:-s.nanoseconds});let{years:l,months:u,weeks:r,days:p,hours:f,minutes:g,seconds:b,milliseconds:y,microseconds:w,nanoseconds:v}=s;({days:p}=ga(p,f,g,b,y,w,v,"day"));const T=ln(n),S=Z(e,kt),E=zr(S,["monthCode","year"]),x=an(e,E,[]),A=Uo(l,u,r,p,0,0,0,0,0,0);x.day=A<0?af(Uf(S,e)):1;const D=xc(S,x),C=new(zi("%Temporal.Duration%"))(l,u,r,p,0,0,0,0,0,0),I=oS(gs(null),T);return Pu(S,an(js(S,D,C,T),E,[]),I)}function u2(i,e,t,n){const s=i==="subtract"?-1:1,{years:l,months:u,weeks:r,days:p,hours:f,minutes:g,seconds:b,milliseconds:y,microseconds:w,nanoseconds:v}=Nu(t),T=ln(n),S=Z(e,Rn),E=Z(e,kt);return us(Ga(Z(e,Cs),S,E,s*l,s*u,s*r,s*p,s*f,s*g,s*b,s*y,s*w,s*v,T),S,E)}function la(i,e,t){if(e===1)return i;let{quotient:n,remainder:s}=qr(i,de.BigInt(e));if(de.equal(s,Sr))return i;const l=de.lessThan(s,Sr)?-1:1;switch(t){case"ceil":l>0&&(n=de.add(n,de.BigInt(l)));break;case"floor":l<0&&(n=de.add(n,de.BigInt(l)));break;case"trunc":break;case"halfExpand":de.toNumber(Vv(de.multiply(s,de.BigInt(2))))>=e&&(n=de.add(n,de.BigInt(l)))}return de.multiply(n,de.BigInt(e))}function ry(i,e,t,n){let s=de.remainder(i,de.BigInt(864e11));de.lessThan(s,Sr)&&(s=de.add(s,de.BigInt(864e11)));const l=de.subtract(i,s),u=la(s,o1[t]*e,n);return de.add(l,u)}function r1(i,e,t,n,s,l,u,r,p,f,g,b,y=864e11){const{deltaDays:w,hour:v,minute:T,second:S,millisecond:E,microsecond:x,nanosecond:A}=s1(n,s,l,u,r,p,f,g,b,y),{year:D,month:C,day:I}=tx(i,e,t+w);return{year:D,month:C,day:I,hour:v,minute:T,second:S,millisecond:E,microsecond:x,nanosecond:A}}function s1(i,e,t,n,s,l,u,r,p,f=864e11){let g=Sr;switch(r){case"day":case"hour":g=de.BigInt(i);case"minute":g=de.add(de.multiply(g,xu),de.BigInt(e));case"second":g=de.add(de.multiply(g,xu),de.BigInt(t));case"millisecond":g=de.add(de.multiply(g,Ln),de.BigInt(n));case"microsecond":g=de.add(de.multiply(g,Ln),de.BigInt(s));case"nanosecond":g=de.add(de.multiply(g,Ln),de.BigInt(l))}const b=r==="day"?f:o1[r],y=la(g,b*u,p),w=de.toNumber(de.divide(y,de.BigInt(b)));switch(r){case"day":return{deltaDays:w,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return Sl(w,0,0,0,0,0);case"minute":return Sl(i,w,0,0,0,0);case"second":return Sl(i,e,w,0,0,0);case"millisecond":return Sl(i,e,t,w,0,0);case"microsecond":return Sl(i,e,t,n,w,0);case"nanosecond":return Sl(i,e,t,n,s,w);default:throw new Error(`Invalid unit ${r}`)}}function Lg(i,e){return t1(Z(i,ri),Z(i,ui),Z(i,gi),Z(e,ri),Z(e,ui),Z(e,gi),"day").days}function Ts(i,e,t){const n=js(i,e,t,void 0);return{relativeTo:n,days:Lg(e,n)}}function Mb(i,e,t,n,s){const l=Z(i,Rn),u=Z(i,kt);return us(Ga(Z(i,Cs),l,u,e,t,n,s,0,0,0,0,0,0),l,u)}function OS(i,e,t,n,s,l,u,r,p,f,g,b,y,w){let v=i,T=e,S=t,E=n,x=s,A=l,D=u,C=r,I=p,N=f;if(!wi(w)||b==="year"||b==="month"||b==="week"||b==="day"||b==="nanosecond"&&g===1)return{years:v,months:T,weeks:S,days:E,hours:x,minutes:A,seconds:D,milliseconds:C,microseconds:I,nanoseconds:N};let W=eh(0,x,A,D,C,I,N,0);const Y=tf(de.toNumber(W)),X=Z(w,Rn),O=Z(w,kt),V=Ga(Z(w,Cs),X,O,v,T,S,E,0,0,0,0,0,0),$=Ga(new(zi("%Temporal.Instant%"))(V),X,O,0,0,0,Y,0,0,0,0,0,0),L=de.subtract($,V);return de.greaterThanOrEqual(de.multiply(de.subtract(W,L),de.BigInt(Y)),Sr)&&({years:v,months:T,weeks:S,days:E}=NS(v,T,S,E,0,0,0,0,0,0,0,0,0,Y,0,0,0,0,0,0,w),W=ry(de.subtract(W,L),g,b,y),{hours:x,minutes:A,seconds:D,milliseconds:C,microseconds:I,nanoseconds:N}=ga(0,0,0,0,0,0,de.toNumber(W),"hour")),{years:v,months:T,weeks:S,days:E,hours:x,minutes:A,seconds:D,milliseconds:C,microseconds:I,nanoseconds:N}}function vc(i,e,t,n,s,l,u,r,p,f,g,b,y,w){let v=i,T=e,S=t,E=n,x=s,A=l,D=u,C=r,I=p,N=de.BigInt(f);const W=zi("%Temporal.Duration%");let Y,X,O,V,$=w;if($){if(wi($))X=$,$=Vn($);else if(!gn($))throw new TypeError("starting point must be PlainDate or ZonedDateTime");Y=Z($,kt)}if(b==="year"||b==="month"||b==="week"||b==="day"){let L,R,G;N=eh(0,x,A,D,C,I,f,0),X&&(L=Mb(X,v,T,S,E)),{days:R,nanoseconds:N,dayLengthNs:G}=Jv(N,L),O=de.BigInt(G),E+=R,x=A=D=C=I=0}switch(b){case"year":{if(!Y)throw new RangeError("A starting point is required for years rounding");const L=new W(v),R=Y.dateAdd,G=js(Y,$,L,void 0,R),U=js(Y,$,new W(v,T,S),void 0,R);$=G,E+=Lg(G,U);const B=js(Y,$,{days:E},void 0,R),H=gs(null);H.largestUnit="year";const q=yc(Y,$,B,H).years;v+=q;const se=$;$=js(Y,$,{years:q},void 0,R),E-=Lg(se,$);const pe=new W(E<0?-1:1);let{days:ne}=Ts(Y,$,pe);ne=Sn(ne);const le=de.multiply(de.BigInt(ne),O);N=de.add(de.add(de.multiply(le,de.BigInt(v)),de.multiply(de.BigInt(E),O)),N);const ke=la(N,de.toNumber(de.multiply(le,de.BigInt(g))),y);V=de.toNumber(N)/de.toNumber(le),v=de.toNumber(de.divide(ke,le)),N=Sr,T=S=E=0;break}case"month":{if(!Y)throw new RangeError("A starting point is required for months rounding");const L=new W(v,T),R=Y.dateAdd,G=js(Y,$,L,void 0,R),U=js(Y,$,new W(v,T,S),void 0,R);$=G,E+=Lg(G,U);const B=tf(E),H=new W(0,E<0?-1:1);let q;for({relativeTo:$,days:q}=Ts(Y,$,H);Sn(E)>=Sn(q);)T+=B,E-=q,{relativeTo:$,days:q}=Ts(Y,$,H);q=Sn(q);const se=de.multiply(de.BigInt(q),O);N=de.add(de.add(de.multiply(se,de.BigInt(T)),de.multiply(de.BigInt(E),O)),N);const pe=la(N,de.toNumber(de.multiply(se,de.BigInt(g))),y);V=de.toNumber(N)/de.toNumber(se),T=de.toNumber(de.divide(pe,se)),N=Sr,S=E=0;break}case"week":{if(!Y)throw new RangeError("A starting point is required for weeks rounding");const L=tf(E),R=new W(0,0,E<0?-1:1);let G;for({relativeTo:$,days:G}=Ts(Y,$,R);Sn(E)>=Sn(G);)S+=L,E-=G,{relativeTo:$,days:G}=Ts(Y,$,R);G=Sn(G);const U=de.multiply(de.BigInt(G),O);N=de.add(de.add(de.multiply(U,de.BigInt(S)),de.multiply(de.BigInt(E),O)),N);const B=la(N,de.toNumber(de.multiply(U,de.BigInt(g))),y);V=de.toNumber(N)/de.toNumber(U),S=de.toNumber(de.divide(B,U)),N=Sr,E=0;break}case"day":{const L=O;N=de.add(de.multiply(L,de.BigInt(E)),N);const R=la(N,de.toNumber(de.multiply(L,de.BigInt(g))),y);V=de.toNumber(N)/de.toNumber(L),E=de.toNumber(de.divide(R,L)),N=Sr;break}case"hour":{let R=de.multiply(de.BigInt(x),de.BigInt(36e11));R=de.add(R,de.multiply(de.BigInt(A),de.BigInt(6e10))),R=de.add(R,de.multiply(de.BigInt(D),Al)),R=de.add(R,de.multiply(de.BigInt(C),Va)),R=de.add(R,de.multiply(de.BigInt(I),Ln)),R=de.add(R,N),V=de.toNumber(R)/36e11;const G=la(R,36e11*g,y);x=de.toNumber(de.divide(G,de.BigInt(36e11))),N=Sr,A=D=C=I=0;break}case"minute":{let R=de.multiply(de.BigInt(A),de.BigInt(6e10));R=de.add(R,de.multiply(de.BigInt(D),Al)),R=de.add(R,de.multiply(de.BigInt(C),Va)),R=de.add(R,de.multiply(de.BigInt(I),Ln)),R=de.add(R,N),V=de.toNumber(R)/6e10;const G=la(R,6e10*g,y);A=de.toNumber(de.divide(G,de.BigInt(6e10))),N=Sr,D=C=I=0;break}case"second":{let R=de.multiply(de.BigInt(D),Al);R=de.add(R,de.multiply(de.BigInt(C),Va)),R=de.add(R,de.multiply(de.BigInt(I),Ln)),R=de.add(R,N),V=de.toNumber(R)/1e9;const G=la(R,1e9*g,y);D=de.toNumber(de.divide(G,de.BigInt(1e9))),N=Sr,C=I=0;break}case"millisecond":{let R=de.multiply(de.BigInt(C),Va);R=de.add(R,de.multiply(de.BigInt(I),Ln)),R=de.add(R,N),V=de.toNumber(R)/1e6;const G=la(R,1e6*g,y);C=de.toNumber(de.divide(G,de.BigInt(1e6))),N=Sr,I=0;break}case"microsecond":{let R=de.multiply(de.BigInt(I),Ln);R=de.add(R,N),V=de.toNumber(R)/1e3;const G=la(R,1e3*g,y);I=de.toNumber(de.divide(G,de.BigInt(1e3))),N=Sr;break}case"nanosecond":V=de.toNumber(N),N=la(N,g,y)}return{years:v,months:T,weeks:S,days:E,hours:x,minutes:A,seconds:D,milliseconds:C,microseconds:I,nanoseconds:de.toNumber(N),total:V}}function dc(i,e,t,n,s,l){for(const[u,r]of[[i,n],[e,s],[t,l]])if(u!==r)return vu(u-r);return 0}function Id(i,e){let t=i%e;return EI(t,-0)?0:(t<0&&(t+=e),t)}function sy(i){const e=Up(i);return globalThis.BigInt!==void 0?globalThis.BigInt(e.toString(10)):e}function Up(i){if(i instanceof de)return i;let e=i;if(typeof i=="object"){const t=i[Symbol.toPrimitive];t&&typeof t=="function"&&(e=$v(t,i,["number"]))}switch(typeof e){case"undefined":case"object":case"number":case"symbol":default:throw new TypeError(`cannot convert ${typeof i} to bigint`);case"string":if(!e.match(/^\s*(?:[+-]?\d+\s*)?$/))throw new SyntaxError("invalid BigInt syntax");case"bigint":try{return de.BigInt(e.toString())}catch(t){throw t instanceof Error&&t.message.startsWith("Invalid integer")?new SyntaxError(t.message):t}case"boolean":return e?Uv:Sr}}const a1=(()=>{let i=de.BigInt(Date.now()%1e6);return()=>{const e=de.BigInt(Date.now()),t=de.add(de.multiply(e,Va),i);return i=de.remainder(e,Va),de.greaterThan(t,rf)?rf:de.lessThan(t,nf)?nf:t}})();function vu(i){return i<0?-1:i>0?1:i}function ln(i){if(i===void 0)return gs(null);if(Zn(i)&&i!==null)return i;throw new TypeError("Options parameter must be an object, not "+(i===null?"null":typeof i))}function th(i,e){const t=gs(null);return t[i]=e,t}function _c(i,e,t,n){let s=i[e];if(s!==void 0){if(s=Bi(s),!t.includes(s))throw new RangeError(`${e} must be one of ${t.join(", ")}, not ${s}`);return s}return n}function jS(i){return sS.call(MI,i)}const FS=new RegExp(`^${iS.source}$`);function BS(i,e,t,n=i(e),s=i(t)){let l=de.BigInt(e),u=de.BigInt(t),r=n,p=s;for(;de.greaterThan(de.subtract(u,l),Uv);){const f=de.divide(de.add(l,u),de.BigInt(2)),g=i(f);if(g===r)l=f,r=g;else{if(g!==p)throw new Error(`invalid state in bisection ${r} - ${g} - ${p}`);u=f,p=g}}return u}const o1={hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},$S=Symbol("date"),US=Symbol("ym"),VS=Symbol("md"),GS=Symbol("time"),HS=Symbol("datetime"),qS=Symbol("zoneddatetime"),WS=Symbol("instant"),Wd=Symbol("original"),Pb=Symbol("timezone"),zg=Symbol("timezone-id-given"),Ta=Symbol("calendar-id"),YS=Symbol("locale"),Ib=Symbol("options"),Vp=i=>({value:i,enumerable:!0,writable:!1,configurable:!0}),_u=globalThis.Intl.DateTimeFormat,Wo=Object.assign,LI=Object.prototype.hasOwnProperty,zI=Reflect.apply;function lu(i,e){let t=i[e];return typeof t=="function"&&(t=new _u(i[YS],t(i[Ib])),i[e]=t),t}function Tp(i){let e=i[Pb];return typeof e=="string"&&(e=Bs(e),i[Pb]=e),e}function Du(i,e={}){if(!(this instanceof Du))return new Du(i,e);const t=e!==void 0,n=t?Wo({},e):{},s=new _u(i,n),l=s.resolvedOptions();if(t){const u=Wo({},l);for(const r in u)zI(LI,n,[r])||delete u[r];this[Ib]=u}else this[Ib]=n;this[zg]=n.timeZone?n.timeZone:null,this[YS]=l.locale,this[Wd]=s,this[Pb]=l.timeZone,this[Ta]=l.calendar,this[$S]=FI,this[US]=OI,this[VS]=jI,this[GS]=NI,this[HS]=BI,this[qS]=$I,this[WS]=UI}Object.defineProperty(Du,"name",{writable:!0,value:"DateTimeFormat"}),Du.supportedLocalesOf=function(i,e){return _u.supportedLocalesOf(i,e)};const P0={resolvedOptions:Vp(function(){return this[Wd].resolvedOptions()}),format:Vp(function(e,...t){let{instant:n,formatter:s,timeZone:l}=Yd(e,this);return n&&s?(s=ay(s,l),s.format(n.epochMilliseconds)):this[Wd].format(e,...t)}),formatRange:Vp(function(e,t){if(ih(e)||ih(t)){if(!ZS(e,t))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");const{instant:n,formatter:s,timeZone:l}=Yd(e,this),{instant:u,formatter:r,timeZone:p}=Yd(t,this);if(l&&p&&l!==p)throw new RangeError("cannot format range between different time zones");if(n&&u&&s&&r&&s===r)return ay(s,l).formatRange(n.epochMilliseconds,u.epochMilliseconds)}return this[Wd].formatRange(e,t)})};"formatToParts"in _u.prototype&&(P0.formatToParts=Vp(function(e,...t){let{instant:n,formatter:s,timeZone:l}=Yd(e,this);return n&&s?(s=ay(s,l),s.formatToParts(n.epochMilliseconds)):this[Wd].formatToParts(e,...t)})),"formatRangeToParts"in _u.prototype&&(P0.formatRangeToParts=Vp(function(e,t){if(ih(e)||ih(t)){if(!ZS(e,t))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");const{instant:n,formatter:s,timeZone:l}=Yd(e,this),{instant:u,formatter:r,timeZone:p}=Yd(t,this);if(l&&p&&l!==p)throw new RangeError("cannot format range between different time zones");if(n&&u&&s&&r&&s===r)return ay(s,l).formatRangeToParts(n.epochMilliseconds,u.epochMilliseconds)}return this[Wd].formatRangeToParts(e,t)})),Du.prototype=Object.create(_u.prototype,P0),Object.defineProperty(Du,"prototype",{writable:!1,enumerable:!1,configurable:!1});const ju=Du;function ay(i,e){if(!e)return i;const t=i.resolvedOptions();return t.timeZone===e?i:((t.dateStyle||t.timeStyle)&&(delete t.weekday,delete t.era,delete t.year,delete t.month,delete t.day,delete t.hour,delete t.minute,delete t.second,delete t.timeZoneName,delete t.hourCycle,delete t.hour12,delete t.dayPeriod),new _u(t.locale,{...t,timeZone:e}))}function Gf(i={},e={}){const t=Wo({},i);for(const n of["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"])t[n]=n in e?e[n]:t[n],t[n]!==!1&&t[n]!==void 0||delete t[n];return t}function NI(i){let e=Gf(i,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});return sx(e)||(e=Wo({},e,{hour:"numeric",minute:"numeric",second:"numeric"})),e}function OI(i){let e=Gf(i,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"year"in e||"month"in e||(e=Wo(e,{year:"numeric",month:"numeric"})),e}function jI(i){let e=Gf(i,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"month"in e||"day"in e||(e=Wo({},e,{month:"numeric",day:"numeric"})),e}function FI(i){let e=Gf(i,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});return rx(e)||(e=Wo({},e,{year:"numeric",month:"numeric",day:"numeric"})),e}function BI(i){let e=Gf(i,{timeZoneName:!1});return sx(e)||rx(e)||(e=Wo({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function $I(i){let e=i;return sx(e)||rx(e)||(e=Wo({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),e.timeZoneName===void 0&&(e.timeZoneName="short")),e}function UI(i){let e=i;return sx(e)||rx(e)||(e=Wo({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function rx(i){return"year"in i||"month"in i||"day"in i||"weekday"in i||"dateStyle"in i}function sx(i){return"hour"in i||"minute"in i||"second"in i||"timeStyle"in i||"dayPeriod"in i}function ih(i){return gn(i)||yr(i)||Qi(i)||wi(i)||Mn(i)||ns(i)||$r(i)}function ZS(i,e){return!(!ih(i)||!ih(e))&&!(yr(i)&&!yr(e))&&!(gn(i)&&!gn(e))&&!(Qi(i)&&!Qi(e))&&!(wi(i)&&!wi(e))&&!(Mn(i)&&!Mn(e))&&!(ns(i)&&!ns(e))&&!($r(i)&&!$r(e))}function Yd(i,e){const t=zi("%Temporal.PlainDateTime%");if(yr(i)){const n=new t(1970,1,1,Z(i,Gi),Z(i,Hi),Z(i,qi),Z(i,Wi),Z(i,Yi),Z(i,Zi),e[Ta]);return{instant:Fs(Tp(e),n,"compatible"),formatter:lu(e,GS)}}if(Mn(i)){const n=Z(i,ri),s=Z(i,ui),l=Z(i,gi),u=Bi(Z(i,kt));if(u!==e[Ta])throw new RangeError(`cannot format PlainYearMonth with calendar ${u} in locale with calendar ${e[Ta]}`);const r=new t(n,s,l,12,0,0,0,0,0,u);return{instant:Fs(Tp(e),r,"compatible"),formatter:lu(e,US)}}if(ns(i)){const n=Z(i,ri),s=Z(i,ui),l=Z(i,gi),u=Bi(Z(i,kt));if(u!==e[Ta])throw new RangeError(`cannot format PlainMonthDay with calendar ${u} in locale with calendar ${e[Ta]}`);const r=new t(n,s,l,12,0,0,0,0,0,u);return{instant:Fs(Tp(e),r,"compatible"),formatter:lu(e,VS)}}if(gn(i)){const n=Z(i,ri),s=Z(i,ui),l=Z(i,gi),u=Bi(Z(i,kt));if(u!=="iso8601"&&u!==e[Ta])throw new RangeError(`cannot format PlainDate with calendar ${u} in locale with calendar ${e[Ta]}`);const r=new t(n,s,l,12,0,0,0,0,0,e[Ta]);return{instant:Fs(Tp(e),r,"compatible"),formatter:lu(e,$S)}}if(Qi(i)){const n=Z(i,ri),s=Z(i,ui),l=Z(i,gi),u=Z(i,Gi),r=Z(i,Hi),p=Z(i,qi),f=Z(i,Wi),g=Z(i,Yi),b=Z(i,Zi),y=Bi(Z(i,kt));if(y!=="iso8601"&&y!==e[Ta])throw new RangeError(`cannot format PlainDateTime with calendar ${y} in locale with calendar ${e[Ta]}`);let w=i;return y==="iso8601"&&(w=new t(n,s,l,u,r,p,f,g,b,e[Ta])),{instant:Fs(Tp(e),w,"compatible"),formatter:lu(e,HS)}}if(wi(i)){const n=Bi(Z(i,kt));if(n!=="iso8601"&&n!==e[Ta])throw new RangeError(`cannot format ZonedDateTime with calendar ${n} in locale with calendar ${e[Ta]}`);const s=Bi(Z(i,Rn));if(e[zg]&&e[zg]!==s)throw new RangeError(`timeZone option ${e[zg]} doesn't match actual time zone ${s}`);return{instant:Z(i,Cs),formatter:lu(e,qS),timeZone:s}}return $r(i)?{instant:i,formatter:lu(e,WS)}:{}}class fo{constructor(e){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");const t=Up(e);hu(t),el(this),Ji(this,Li,t)}get epochSeconds(){if(!$r(this))throw new TypeError("invalid receiver");const e=Z(this,Li);return de.toNumber(de.divide(e,Al))}get epochMilliseconds(){if(!$r(this))throw new TypeError("invalid receiver");const e=de.BigInt(Z(this,Li));return de.toNumber(de.divide(e,Va))}get epochMicroseconds(){if(!$r(this))throw new TypeError("invalid receiver");const e=de.BigInt(Z(this,Li));return sy(de.divide(e,Ln))}get epochNanoseconds(){if(!$r(this))throw new TypeError("invalid receiver");return sy(de.BigInt(Z(this,Li)))}add(e){if(!$r(this))throw new TypeError("invalid receiver");return a2("add",this,e)}subtract(e){if(!$r(this))throw new TypeError("invalid receiver");return a2("subtract",this,e)}until(e,t){if(!$r(this))throw new TypeError("invalid receiver");return Jw("until",this,e,t)}since(e,t){if(!$r(this))throw new TypeError("invalid receiver");return Jw("since",this,e,t)}round(e){if(!$r(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?th("smallestUnit",e):ln(e),n=Kr(t,"smallestUnit","time",Au),s=Xs(t,"halfExpand"),l=Rl(t,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[n],!0),u=ry(Z(this,Li),l,n,s);return new fo(u)}equals(e){if(!$r(this))throw new TypeError("invalid receiver");const t=Fo(e),n=Z(this,Li),s=Z(t,Li);return de.equal(de.BigInt(n),de.BigInt(s))}toString(e){if(!$r(this))throw new TypeError("invalid receiver");const t=ln(e);let n=t.timeZone;n!==void 0&&(n=Bs(n));const{precision:s,unit:l,increment:u}=Ff(t),r=Xs(t,"trunc"),p=ry(Z(this,Li),u,l,r);return Hw(new fo(p),n,s)}toJSON(){if(!$r(this))throw new TypeError("invalid receiver");return Hw(this,void 0,"auto")}toLocaleString(e,t){if(!$r(this))throw new TypeError("invalid receiver");return new ju(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.Instant")}toZonedDateTime(e){if(!$r(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid argument in toZonedDateTime");const t=e.calendar;if(t===void 0)throw new TypeError("missing calendar property in toZonedDateTime");const n=ss(t),s=e.timeZone;if(s===void 0)throw new TypeError("missing timeZone property in toZonedDateTime");const l=Bs(s);return us(Z(this,Li),l,n)}toZonedDateTimeISO(e){let t=e;if(!$r(this))throw new TypeError("invalid receiver");if(Zn(t)){const l=t.timeZone;l!==void 0&&(t=l)}const n=Bs(t),s=Ar();return us(Z(this,Li),n,s)}static fromEpochSeconds(e){const t=sf(e),n=de.multiply(de.BigInt(t),Al);return hu(n),new fo(n)}static fromEpochMilliseconds(e){const t=sf(e),n=de.multiply(de.BigInt(t),Va);return hu(n),new fo(n)}static fromEpochMicroseconds(e){const t=Up(e),n=de.multiply(t,Ln);return hu(n),new fo(n)}static fromEpochNanoseconds(e){const t=Up(e);return hu(t),new fo(t)}static from(e){return $r(e)?new fo(Z(e,Li)):Fo(e)}static compare(e,t){const n=Fo(e),s=Fo(t),l=Z(n,Li),u=Z(s,Li);return de.lessThan(l,u)?-1:de.greaterThan(l,u)?1:0}}Jo(fo,"Temporal.Instant");const oy=Array.prototype.includes,VI=Array.prototype.push,GI=globalThis.Intl.DateTimeFormat,HI=Array.prototype.sort,qI=Math.abs,WI=Math.floor,Db=Object.entries,d2=Object.keys,xr={};class ly{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: id is required");const t=Bi(e);if(!jS(t))throw new RangeError(`invalid calendar identifier ${t}`);el(this),Ji(this,Tr,t)}get id(){if(!wr(this))throw new TypeError("invalid receiver");return Bi(this)}dateFromFields(e,t){if(!wr(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid fields");const n=ln(t);return xr[Z(this,Tr)].dateFromFields(e,n,this)}yearMonthFromFields(e,t){if(!wr(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid fields");const n=ln(t);return xr[Z(this,Tr)].yearMonthFromFields(e,n,this)}monthDayFromFields(e,t){if(!wr(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid fields");const n=ln(t);return xr[Z(this,Tr)].monthDayFromFields(e,n,this)}fields(e){if(!wr(this))throw new TypeError("invalid receiver");const t=[],n=new Set(["year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond"]);for(const s of e){if(typeof s!="string")throw new TypeError("invalid fields");if(!n.has(s))throw new RangeError(`invalid field name ${s}`);n.delete(s),VI.call(t,s)}return xr[Z(this,Tr)].fields(t)}mergeFields(e,t){if(!wr(this))throw new TypeError("invalid receiver");return xr[Z(this,Tr)].mergeFields(e,t)}dateAdd(e,t,n){if(!wr(this))throw new TypeError("invalid receiver");const s=Vn(e),l=qd(t),u=kr(ln(n)),{days:r}=ga(Z(l,Is),Z(l,Ds),Z(l,Rs),Z(l,Ls),Z(l,zs),Z(l,Ns),Z(l,Os),"day");return xr[Z(this,Tr)].dateAdd(s,Z(l,Ps),Z(l,is),Z(l,Ys),r,u,this)}dateUntil(e,t,n){if(!wr(this))throw new TypeError("invalid receiver");const s=Vn(e),l=Vn(t);let u=Kr(ln(n),"largestUnit","date","auto");u==="auto"&&(u="day");const{years:r,months:p,weeks:f,days:g}=xr[Z(this,Tr)].dateUntil(s,l,u);return new(zi("%Temporal.Duration%"))(r,p,f,g,0,0,0,0,0,0)}year(e){let t=e;if(!wr(this))throw new TypeError("invalid receiver");return Mn(t)||(t=Vn(t)),xr[Z(this,Tr)].year(t)}month(e){let t=e;if(!wr(this))throw new TypeError("invalid receiver");if(ns(t))throw new TypeError("use monthCode on PlainMonthDay instead");return Mn(t)||(t=Vn(t)),xr[Z(this,Tr)].month(t)}monthCode(e){let t=e;if(!wr(this))throw new TypeError("invalid receiver");return Mn(t)||ns(t)||(t=Vn(t)),xr[Z(this,Tr)].monthCode(t)}day(e){let t=e;if(!wr(this))throw new TypeError("invalid receiver");return ns(t)||(t=Vn(t)),xr[Z(this,Tr)].day(t)}era(e){let t=e;if(!wr(this))throw new TypeError("invalid receiver");return Mn(t)||(t=Vn(t)),xr[Z(this,Tr)].era(t)}eraYear(e){let t=e;if(!wr(this))throw new TypeError("invalid receiver");return Mn(t)||(t=Vn(t)),xr[Z(this,Tr)].eraYear(t)}dayOfWeek(e){if(!wr(this))throw new TypeError("invalid receiver");const t=Vn(e);return xr[Z(this,Tr)].dayOfWeek(t)}dayOfYear(e){if(!wr(this))throw new TypeError("invalid receiver");const t=Vn(e);return xr[Z(this,Tr)].dayOfYear(t)}weekOfYear(e){if(!wr(this))throw new TypeError("invalid receiver");const t=Vn(e);return xr[Z(this,Tr)].weekOfYear(t)}daysInWeek(e){if(!wr(this))throw new TypeError("invalid receiver");const t=Vn(e);return xr[Z(this,Tr)].daysInWeek(t)}daysInMonth(e){let t=e;if(!wr(this))throw new TypeError("invalid receiver");return Mn(t)||(t=Vn(t)),xr[Z(this,Tr)].daysInMonth(t)}daysInYear(e){let t=e;if(!wr(this))throw new TypeError("invalid receiver");return Mn(t)||(t=Vn(t)),xr[Z(this,Tr)].daysInYear(t)}monthsInYear(e){let t=e;if(!wr(this))throw new TypeError("invalid receiver");return Mn(t)||(t=Vn(t)),xr[Z(this,Tr)].monthsInYear(t)}inLeapYear(e){let t=e;if(!wr(this))throw new TypeError("invalid receiver");return Mn(t)||(t=Vn(t)),xr[Z(this,Tr)].inLeapYear(t)}toString(){if(!wr(this))throw new TypeError("invalid receiver");return Z(this,Tr)}toJSON(){if(!wr(this))throw new TypeError("invalid receiver");return Bi(this)}static from(e){return ss(e)}}function l1(i){if(!i.startsWith("M"))throw new RangeError(`Invalid month code: ${i}.  Month codes must start with M.`);const e=+i.slice(1);if(isNaN(e))throw new RangeError(`Invalid month code: ${i}`);return e}function Pl(i,e=!1){return`M${i.toString().padStart(2,"0")}${e?"L":""}`}function Ng(i,e,t=12){let{month:n,monthCode:s}=i;if(s===void 0){if(n===void 0)throw new TypeError("Either month or monthCode are required");e==="reject"&&ps(n,1,t),e==="constrain"&&(n=pa(n,1,t)),s=Pl(n)}else{const l=l1(s);if(n!==void 0&&n!==l)throw new RangeError(`monthCode ${s} and month ${n} must match if both are present`);if(s!==Pl(l))throw new RangeError(`Invalid month code: ${s}`);if(n=l,n<1||n>t)throw new RangeError(`Invalid monthCode: ${s}`)}return{...i,month:n,monthCode:s}}Jo(ly,"Temporal.Calendar"),_b("Temporal.Calendar.from",ly.from),xr.iso8601={dateFromFields(i,e,t){const n=kr(e);let s=an(i,["day","month","monthCode","year"],["year","day"]);s=Ng(s);let{year:l,month:u,day:r}=s;return{year:l,month:u,day:r}=Jg(l,u,r,n),ao(l,u,r,t)},yearMonthFromFields(i,e,t){const n=kr(e);let s=an(i,["month","monthCode","year"],["year"]);s=Ng(s);let{year:l,month:u}=s;return{year:l,month:u}=function(p,f,g){let b=p,y=f;switch(g){case"reject":qo(b,y,1);break;case"constrain":({year:b,month:y}=PS(b,y))}return{year:b,month:y}}(l,u,n),cf(l,u,t,1)},monthDayFromFields(i,e,t){const n=kr(e);let s=an(i,["day","month","monthCode","year"],["day"]);if(s.month!==void 0&&s.year===void 0&&s.monthCode===void 0)throw new TypeError("either year or monthCode required with month");const l=s.monthCode===void 0;s=Ng(s);let{month:u,day:r,year:p}=s;return{month:u,day:r}=Jg(l?p:1972,u,r,n),lf(u,r,t,1972)},fields:i=>i,mergeFields(i,e){const t={};for(const s of d2(i))s!=="month"&&s!=="monthCode"&&(t[s]=i[s]);const n=d2(e);for(const s of n)t[s]=e[s];if(!oy.call(n,"month")&&!oy.call(n,"monthCode")){const{month:s,monthCode:l}=i;s!==void 0&&(t.month=s),l!==void 0&&(t.monthCode=l)}return t},dateAdd(i,e,t,n,s,l,u){let r=Z(i,ri),p=Z(i,ui),f=Z(i,gi);return{year:r,month:p,day:f}=bu(r,p,f,e,t,n,s,l),ao(r,p,f,u)},dateUntil:(i,e,t)=>t1(Z(i,ri),Z(i,ui),Z(i,gi),Z(e,ri),Z(e,ui),Z(e,gi),t),year:i=>Z(i,ri),era(){},eraYear(){},month:i=>Z(i,ui),monthCode:i=>Pl(Z(i,ui)),day:i=>Z(i,gi),dayOfWeek:i=>M0(Z(i,ri),Z(i,ui),Z(i,gi)),dayOfYear:i=>ny(Z(i,ri),Z(i,ui),Z(i,gi)),weekOfYear:i=>function(t,n,s){const l=ny(t,n,s),u=M0(t,n,s)||7,r=M0(t,1,1),p=Zr((l-u+10)/7);return p<1?r===5||r===6&&uc(t-1)?53:52:p===53&&(uc(t)?366:365)-l<4-u?1:p}(Z(i,ri),Z(i,ui),Z(i,gi)),daysInWeek:()=>7,daysInMonth:i=>Ml(Z(i,ri),Z(i,ui)),daysInYear(i){let e=i;return Jr(e,ri)||(e=Vn(e)),uc(Z(e,ri))?366:365},monthsInYear:()=>12,inLeapYear(i){let e=i;return Jr(e,ri)||(e=Vn(e)),uc(Z(e,ri))}};class dr{constructor(e){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,this.now=globalThis.performance?globalThis.performance.now():Date.now(),e!==void 0){let t=0;for(const n of e.map.entries()){if(++t>dr.MAX_CACHE_ENTRIES)break;this.map.set(...n)}}}get(e){const t=this.map.get(e);return t&&(this.hits++,this.report()),this.calls++,t}set(e,t){this.map.set(e,t),this.misses++,this.report()}report(){}setObject(e){if(dr.objectMap.get(e))throw new RangeError("object already cached");dr.objectMap.set(e,this),this.report()}static getCacheForObject(e){let t=dr.objectMap.get(e);return t||(t=new dr,dr.objectMap.set(e,t)),t}}function XS({isoYear:i,isoMonth:e,isoDay:t}){return`${Ou(i)}-${or(e)}-${or(t)}T00:00Z`}function I0(i,e){return{years:i.year-e.year,months:i.month-e.month,days:i.day-e.day}}dr.objectMap=new WeakMap,dr.MAX_CACHE_ENTRIES=1e3;class mh{constructor(){this.eraLength="short",this.hasEra=!0}getFormatter(){return this.formatter===void 0&&(this.formatter=new GI(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:this.eraLength,timeZone:"UTC"})),this.formatter}isoToCalendarDate(e,t){const{year:n,month:s,day:l}=e,u=JSON.stringify({func:"isoToCalendarDate",isoYear:n,isoMonth:s,isoDay:l,id:this.id}),r=t.get(u);if(r)return r;const p=this.getFormatter();let f,g;try{g=XS({isoYear:n,isoMonth:s,isoDay:l}),f=p.formatToParts(new Date(g))}catch{throw new RangeError(`Invalid ISO date: ${JSON.stringify({isoYear:n,isoMonth:s,isoDay:l})}`)}const b={};for(let{type:w,value:v}of f){if(w==="year"&&(b.eraYear=+v),w==="relatedYear"&&(b.eraYear=+v),w==="month"){const T=/^([0-9]*)(.*?)$/.exec(v);if(!T||T.length!=3||!T[1]&&!T[2])throw new RangeError(`Unexpected month: ${v}`);if(b.month=T[1]?+T[1]:1,b.month<1)throw new RangeError(`Invalid month ${v} from ${g}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(b.month>13)throw new RangeError(`Invalid month ${v} from ${g}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);T[2]&&(b.monthExtra=T[2])}w==="day"&&(b.day=+v),this.hasEra&&w==="era"&&v!=null&&v!==""&&(v=v.split(" (")[0],b.era=v.normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(" ","-").toLowerCase())}if(b.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.reviseIntlEra){const{era:w,eraYear:v}=this.reviseIntlEra(b,e);b.era=w,b.eraYear=v}this.checkIcuBugs&&this.checkIcuBugs(e);const y=this.adjustCalendarDate(b,t,"constrain",!0);if(y.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(e)}`);if(y.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(e)}`);if(y.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(e)}`);return t.set(u,y),["constrain","reject"].forEach(w=>{const v=JSON.stringify({func:"calendarToIsoDate",year:y.year,month:y.month,day:y.day,overflow:w,id:this.id});t.set(v,e)}),y}validateCalendarDate(e){const{era:t,month:n,year:s,day:l,eraYear:u,monthCode:r,monthExtra:p}=e;if(p!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(s===void 0&&u===void 0)throw new TypeError("year or eraYear is required");if(n===void 0&&r===void 0)throw new TypeError("month or monthCode is required");if(l===void 0)throw new RangeError("Missing day");if(r!==void 0){if(typeof r!="string")throw new RangeError("monthCode must be a string, not "+typeof r);if(!/^M([01]?\d)(L?)$/.test(r))throw new RangeError(`Invalid monthCode: ${r}`)}if(this.constantEra){if(t!==void 0&&t!==this.constantEra)throw new RangeError(`era must be ${this.constantEra}, not ${t}`);if(u!==void 0&&s!==void 0&&u!==s)throw new RangeError(`eraYear ${u} does not match year ${s}`)}}adjustCalendarDate(e,t,n="constrain",s=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let l=e;if(this.validateCalendarDate(l),this.constantEra){const{year:f,eraYear:g}=l;l={...l,era:this.constantEra,year:f!==void 0?f:g,eraYear:g!==void 0?g:f}}const u=this.monthsInYear(l,t);let{month:r,monthCode:p}=l;return{month:r,monthCode:p}=Ng(l,n,u),{...l,month:r,monthCode:p}}regulateMonthDayNaive(e,t,n){const s=this.monthsInYear(e,n);let{month:l,day:u}=e;return t==="reject"?(ps(l,1,s),ps(u,1,this.maximumMonthLength(e))):(l=pa(l,1,s),u=pa(u,1,this.maximumMonthLength({...e,month:l}))),{...e,month:l,day:u}}calendarToIsoDate(e,t="constrain",n){const s=e;let l=this.adjustCalendarDate(e,n,t,!1);l=this.regulateMonthDayNaive(l,t,n);const{year:u,month:r,day:p}=l,f=JSON.stringify({func:"calendarToIsoDate",year:u,month:r,day:p,overflow:t,id:this.id});let g,b=n.get(f);if(b||s.year!==void 0&&s.month!==void 0&&s.day!==void 0&&(s.year!==l.year||s.month!==l.month||s.day!==l.day)&&(g=JSON.stringify({func:"calendarToIsoDate",year:s.year,month:s.month,day:s.day,overflow:t,id:this.id}),b=n.get(g),b))return b;let y=this.estimateIsoDate({year:u,month:r,day:p});const w=A=>{let D=this.addDaysIso(y,A);if(l.day>this.minimumMonthLength(l)){let C=this.isoToCalendarDate(D,n);for(;C.month!==r||C.year!==u;){if(t==="reject")throw new RangeError(`day ${p} does not exist in month ${r} of year ${u}`);D=this.addDaysIso(D,-1),C=this.isoToCalendarDate(D,n)}}return D};let v=0,T=this.isoToCalendarDate(y,n),S=I0(l,T);if(S.years!==0||S.months!==0||S.days!==0){const A=365*S.years+30*S.months+S.days;y=this.addDaysIso(y,A),T=this.isoToCalendarDate(y,n),S=I0(l,T),S.years===0&&S.months===0?y=w(S.days):v=this.compareCalendarDates(l,T)}let E=8,x=!1;for(;v;){y=this.addDaysIso(y,v*E);const A=T;T=this.isoToCalendarDate(y,n);const D=v;if(v=this.compareCalendarDates(l,T),v){if(S=I0(l,T),S.years===0&&S.months===0)y=w(S.days),v=0,x=l.day>this.minimumMonthLength(l);else if(D&&v!==D)if(E>1)E/=2;else{if(t==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...s})}`);this.compareCalendarDates(T,A)>0&&(y=this.addDaysIso(y,-1)),x=!0,v=0}}}if(n.set(f,y),g&&n.set(g,y),l.year===void 0||l.month===void 0||l.day===void 0||l.monthCode===void 0||this.hasEra&&(l.era===void 0||l.eraYear===void 0))throw new RangeError("Unexpected missing property");if(!x){const A=JSON.stringify({func:"isoToCalendarDate",isoYear:y.year,isoMonth:y.month,isoDay:y.day,id:this.id});n.set(A,l)}return y}temporalToCalendarDate(e,t){const n={year:Z(e,ri),month:Z(e,ui),day:Z(e,gi)};return this.isoToCalendarDate(n,t)}compareCalendarDates(e,t){const n=an(e,["day","month","year"],["day","month","year"]),s=an(t,["day","month","year"],["day","month","year"]);return n.year!==s.year?vu(n.year-s.year):n.month!==s.month?vu(n.month-s.month):n.day!==s.day?vu(n.day-s.day):0}regulateDate(e,t="constrain",n){const s=this.calendarToIsoDate(e,t,n);return this.isoToCalendarDate(s,n)}addDaysIso(e,t){return bu(e.year,e.month,e.day,0,0,0,t,"constrain")}addDaysCalendar(e,t,n){const s=this.calendarToIsoDate(e,"constrain",n),l=this.addDaysIso(s,t);return this.isoToCalendarDate(l,n)}addMonthsCalendar(e,t,n,s){let l=e;const{day:u}=l;for(let r=0,p=qI(t);r<p;r++){const{month:f}=l,g=l,b=t<0?-Math.max(u,this.daysInPreviousMonth(l,s)):this.daysInMonth(l,s),y=this.calendarToIsoDate(l,"constrain",s);let w=this.addDaysIso(y,b);if(l=this.isoToCalendarDate(w,s),t>0){const v=this.monthsInYear(g,s);for(;l.month-1!=f%v;)w=this.addDaysIso(w,-1),l=this.isoToCalendarDate(w,s)}l.day!==u&&(l=this.regulateDate({...l,day:u},"constrain",s))}if(n==="reject"&&l.day!==u)throw new RangeError(`Day ${u} does not exist in resulting calendar month`);return l}addCalendar(e,{years:t=0,months:n=0,weeks:s=0,days:l=0},u,r){const{year:p,day:f,monthCode:g}=e,b=this.adjustCalendarDate({year:p+t,monthCode:g,day:f},r),y=this.addMonthsCalendar(b,n,u,r),w=l+7*s;return this.addDaysCalendar(y,w,r)}untilCalendar(e,t,n,s){let l=0,u=0,r=0,p=0;switch(n){case"day":l=this.calendarDaysUntil(e,t,s);break;case"week":{const f=this.calendarDaysUntil(e,t,s);l=f%7,u=(f-l)/7;break}case"month":case"year":{const f=t.year-e.year,g=t.month-e.month,b=t.day-e.day,y=this.compareCalendarDates(t,e);if(!y)return{years:0,months:0,weeks:0,days:0};n==="year"&&f&&(p=g*y<0||g===0&&b*y<0?f-y:f);let w,v=p?this.addCalendar(e,{years:p},"constrain",s):e;do r+=y,w=v,v=this.addMonthsCalendar(w,y,"constrain",s),v.day!==e.day&&(v=this.regulateDate({...v,day:e.day},"constrain",s));while(this.compareCalendarDates(t,v)*y>=0);r-=y,l=this.calendarDaysUntil(w,t,s);break}}return{years:p,months:r,weeks:u,days:l}}daysInMonth(e,t){const{day:n}=e,s=this.maximumMonthLength(e),l=this.minimumMonthLength(e);if(l===s)return l;const u=n<=s-l?s:l,r=this.calendarToIsoDate(e,"constrain",t),p=this.addDaysIso(r,u),f=this.isoToCalendarDate(p,t),g=this.addDaysIso(p,-f.day);return this.isoToCalendarDate(g,t).day}daysInPreviousMonth(e,t){const{day:n,month:s,year:l}=e;let u={year:s>1?l:l-1,month:s,day:1};const r=s>1?s-1:this.monthsInYear(u,t);u={...u,month:r};const p=this.minimumMonthLength(u),f=this.maximumMonthLength(u);if(p===f)return f;const g=this.calendarToIsoDate(e,"constrain",t),b=this.addDaysIso(g,-n);return this.isoToCalendarDate(b,t).day}startOfCalendarYear(e){return{year:e.year,month:1,monthCode:"M01",day:1}}startOfCalendarMonth(e){return{year:e.year,month:e.month,day:1}}calendarDaysUntil(e,t,n){const s=this.calendarToIsoDate(e,"constrain",n),l=this.calendarToIsoDate(t,"constrain",n);return this.isoDaysUntil(s,l)}isoDaysUntil(e,t){return t1(e.year,e.month,e.day,t.year,t.month,t.day,"day").days}monthDayFromFields(e,t,n){let s,l,u,r,p,{year:f,month:g,monthCode:b,day:y,era:w,eraYear:v}=e;if(b===void 0){if(f===void 0&&(w===void 0||v===void 0))throw new TypeError("`monthCode`, `year`, or `era` and `eraYear` is required");({monthCode:b,year:f}=this.adjustCalendarDate({year:f,month:g,monthCode:b,day:y,era:w,eraYear:v},n,t))}const{year:T}=this.isoToCalendarDate({year:1972,month:1,day:1},n);for(let S=0;S<100;S++){const E=this.adjustCalendarDate({day:y,monthCode:b,year:T-S},n),x=this.calendarToIsoDate(E,"constrain",n),A=this.isoToCalendarDate(x,n);if({year:s,month:l,day:u}=x,A.monthCode===b&&A.day===y)return{month:l,day:u,year:s};t==="constrain"&&(r===void 0||A.monthCode===r.monthCode&&A.day>r.day)&&(r=A,p=x)}if(t==="constrain"&&p!==void 0)return p;throw new RangeError(`No recent ${this.id} year with monthCode ${b} and day ${y}`)}}class YI extends mh{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}},this.hasEra=!1}inLeapYear(e){const{year:t}=e;return(7*t+1)%19<7}monthsInYear(e){return this.inLeapYear(e)?13:12}minimumMonthLength(e){return this.minMaxMonthLength(e,"min")}maximumMonthLength(e){return this.minMaxMonthLength(e,"max")}minMaxMonthLength(e,t){const{month:n,year:s}=e,l=this.getMonthCode(s,n),u=Db(this.months).find(p=>p[1].monthCode===l);if(u===void 0)throw new RangeError(`unmatched Hebrew month: ${n}`);const r=u[1].days;return typeof r=="number"?r:r[t]}estimateIsoDate(e){const{year:t}=e;return{year:t-3760,month:1,day:1}}getMonthCode(e,t){return this.inLeapYear({year:e})?t===6?Pl(5,!0):Pl(t<6?t:t-1):Pl(t)}adjustCalendarDate(e,t,n="constrain",s=!1){let{year:l,eraYear:u,month:r,monthCode:p,day:f,monthExtra:g}=e;if(l===void 0&&u!==void 0&&(l=u),u===void 0&&l!==void 0&&(u=l),s){if(g){const b=this.months[g];if(!b)throw new RangeError(`Unrecognized month from formatToParts: ${g}`);r=this.inLeapYear({year:l})?b.leap:b.regular}return p=this.getMonthCode(l,r),{year:l,month:r,day:f,era:void 0,eraYear:u,monthCode:p}}if(this.validateCalendarDate(e),r===void 0)if(p.endsWith("L")){if(p!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${p}`);if(r=6,!this.inLeapYear({year:l})){if(n==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${l} which is not a leap year`);r=5,f=30,p="M05"}}else{r=l1(p),this.inLeapYear({year:l})&&r>=6&&r++;const b=this.monthsInYear({year:l});if(r<1||r>b)throw new RangeError(`Invalid monthCode: ${p}`)}else if(n==="reject"?(ps(r,1,this.monthsInYear({year:l})),ps(f,1,this.maximumMonthLength({year:l,month:r}))):(r=pa(r,1,this.monthsInYear({year:l})),f=pa(f,1,this.maximumMonthLength({year:l,month:r}))),p===void 0)p=this.getMonthCode(l,r);else if(this.getMonthCode(l,r)!==p)throw new RangeError(`monthCode ${p} doesn't correspond to month ${r} in Hebrew year ${l}`);return{...e,day:f,month:r,monthCode:p,year:l,eraYear:u}}}class gh extends mh{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425,this.constantEra="ah"}inLeapYear(e,t){return this.daysInMonth({year:e.year,month:12,day:1},t)===30}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}estimateIsoDate(e){const{year:t}=this.adjustCalendarDate(e);return{year:WI(t*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}}class KS extends gh{constructor(){super(...arguments),this.id="islamic"}}class ZI extends gh{constructor(){super(...arguments),this.id="islamic-umalqura"}}class XI extends gh{constructor(){super(...arguments),this.id="islamic-tbla"}}class KI extends gh{constructor(){super(...arguments),this.id="islamic-civil"}}class QI extends gh{constructor(){super(...arguments),this.id="islamic-rgsa"}}class JI extends gh{constructor(){super(...arguments),this.id="islamicc"}}class eD extends mh{constructor(){super(...arguments),this.id="persian",this.calendarType="solar",this.constantEra="ap"}inLeapYear(e,t){return KS.prototype.inLeapYear.call(this,e,t)}monthsInYear(){return 12}minimumMonthLength(e){const{month:t}=e;return t===12?29:t<=6?31:30}maximumMonthLength(e){const{month:t}=e;return t===12?30:t<=6?31:30}estimateIsoDate(e){const{year:t}=this.adjustCalendarDate(e);return{year:t+621,month:1,day:1}}}class tD extends mh{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.constantEra="saka",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(e){return QS(e.year+78)}monthsInYear(){return 12}minimumMonthLength(e){return this.getMonthInfo(e).length}maximumMonthLength(e){return this.getMonthInfo(e).length}getMonthInfo(e){const{month:t}=e;let n=this.months[t];if(n===void 0)throw new RangeError(`Invalid month: ${t}`);return this.inLeapYear(e)&&n.leap&&(n=n.leap),n}estimateIsoDate(e){const t=this.adjustCalendarDate(e),n=this.getMonthInfo(t);return bu(t.year+78+(n.nextYear?1:0),n.month,n.day,0,0,0,t.day-1,"constrain")}checkIcuBugs(e){if(this.vulnerableToBceBug&&e.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}}function QS(i){return i%4==0&&(i%100!=0||i%400==0)}class Hf extends mh{constructor(e,t){super(),this.calendarType="solar",this.v8IsVulnerableToJulianBug=new Date("+001001-01-01T00:00Z").toLocaleDateString("en-US-u-ca-japanese",{timeZone:"UTC"}).startsWith("12"),this.calendarIsVulnerableToJulianBug=!1,this.id=e;const{eras:n,anchorEra:s}=function(u){let r,p=u;if(p.length===0)throw new RangeError("Invalid era data: eras are required");if(p.length===1&&p[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(p.length===1&&!p[0].name)throw new RangeError("Invalid era data: at least one named era is required");if(p.filter(g=>g.reverseOf!=null).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");p.forEach(g=>{if(g.isAnchor||!g.anchorEpoch&&!g.reverseOf){if(r)throw new RangeError("Invalid era data: cannot have multiple anchor eras");r=g,g.anchorEpoch={year:g.hasYearZero?0:1}}else if(!g.name)throw new RangeError("If era name is blank, it must be the anchor era")}),p=p.filter(g=>g.name),p.forEach(g=>{const{reverseOf:b}=g;if(b){const y=p.find(w=>w.name===b);if(y===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${b}`);g.reverseOf=y,g.anchorEpoch=y.anchorEpoch,g.isoEpoch=y.isoEpoch}g.anchorEpoch.month===void 0&&(g.anchorEpoch.month=1),g.anchorEpoch.day===void 0&&(g.anchorEpoch.day=1)}),HI.call(p,(g,b)=>{if(g.reverseOf)return 1;if(b.reverseOf)return-1;if(!g.isoEpoch||!b.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return b.isoEpoch.year-g.isoEpoch.year});const f=p[p.length-1].reverseOf;if(f&&f!==p[p.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return p.forEach((g,b)=>{g.genericName="era"+(p.length-1-b)}),{eras:p,anchorEra:r||p[0]}}(t);this.anchorEra=s,this.eras=n}inLeapYear(e){const{year:t}=this.estimateIsoDate({month:1,day:1,year:e.year});return QS(t)}monthsInYear(){return 12}minimumMonthLength(e){const{month:t}=e;return t===2?this.inLeapYear(e)?29:28:[4,6,9,11].indexOf(t)>=0?30:31}maximumMonthLength(e){return this.minimumMonthLength(e)}completeEraYear(e){const t=(r,p)=>{const f=e[r];if(f!=null&&f!=p)throw new RangeError(`Input ${r} ${f} doesn't match calculated value ${p}`)},n=r=>{let p;const f={...e,year:r},g=this.eras.find((b,y)=>{if(y===this.eras.length-1){if(b.reverseOf){if(r>0)throw new RangeError(`Signed year ${r} is invalid for era ${b.name}`);return p=b.anchorEpoch.year-r,!0}return p=r-b.anchorEpoch.year+(b.hasYearZero?0:1),!0}return this.compareCalendarDates(f,b.anchorEpoch)>=0&&(p=r-b.anchorEpoch.year+(b.hasYearZero?0:1),!0)});if(!g)throw new RangeError(`Year ${r} was not matched by any era`);return{eraYear:p,era:g.name}};let{year:s,eraYear:l,era:u}=e;if(s!=null)({eraYear:l,era:u}=n(s)),t("era",u),t("eraYear",l);else{if(l==null)throw new RangeError("Either `year` or `eraYear` and `era` are required");{const r=u===void 0?void 0:this.eras.find(p=>p.name===u||p.genericName===u);if(!r)throw new RangeError(`Era ${u} (ISO year ${l}) was not matched by any era`);if(l<1&&r.reverseOf)throw new RangeError(`Years in ${u} era must be positive, not ${s}`);s=r.reverseOf?r.anchorEpoch.year-l:l+r.anchorEpoch.year-(r.hasYearZero?0:1),t("year",s),{eraYear:l,era:u}=n(s)}}return{...e,year:s,eraYear:l,era:u}}adjustCalendarDate(e,t,n="constrain"){let s=e;const{month:l,monthCode:u}=s;return l===void 0&&(s={...s,month:l1(u)}),this.validateCalendarDate(s),s=this.completeEraYear(s),super.adjustCalendarDate(s,t,n)}estimateIsoDate(e){const t=this.adjustCalendarDate(e),{year:n,month:s,day:l}=t,{anchorEra:u}=this;return Jg(n+u.isoEpoch.year-(u.hasYearZero?0:1),s,l,"constrain")}checkIcuBugs(e){if(this.calendarIsVulnerableToJulianBug&&this.v8IsVulnerableToJulianBug&&dc(e.year,e.month,e.day,1582,10,15)<0)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 1582-10-15 (see https://bugs.chromium.org/p/chromium/issues/detail?id=1173158)`)}}class c1 extends Hf{constructor(e,t){super(e,t)}inLeapYear(e){const{year:t}=e;return(t+1)%4==0}monthsInYear(){return 13}minimumMonthLength(e){const{month:t}=e;return t===13?this.inLeapYear(e)?6:5:30}maximumMonthLength(e){return this.minimumMonthLength(e)}}class iD extends c1{constructor(){super("ethioaa",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}}])}}class nD extends c1{constructor(){super("coptic",[{name:"era1",isoEpoch:{year:284,month:8,day:29}},{name:"era0",reverseOf:"era1"}])}}class rD extends c1{constructor(){super("ethiopic",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}},{name:"era1",isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}}class sD extends Hf{constructor(){super("roc",[{name:"minguo",isoEpoch:{year:1912,month:1,day:1}},{name:"before-roc",reverseOf:"minguo"}]),this.calendarIsVulnerableToJulianBug=!0}}class aD extends Hf{constructor(){super("buddhist",[{name:"be",hasYearZero:!0,isoEpoch:{year:-543,month:1,day:1}}]),this.calendarIsVulnerableToJulianBug=!0}}class oD extends Hf{constructor(){super("gregory",[{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}])}reviseIntlEra(e){let{era:t,eraYear:n}=e;return t!=="bc"&&t!=="b"||(t="bce"),t!=="ad"&&t!=="a"||(t="ce"),{era:t,eraYear:n}}}class lD extends Hf{constructor(){super("japanese",[{name:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{name:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{name:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{name:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{name:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}]),this.calendarIsVulnerableToJulianBug=!0,this.eraLength="long"}reviseIntlEra(e,t){const{era:n,eraYear:s}=e,{year:l}=t;return this.eras.find(u=>u.name===n)?{era:n,eraYear:s}:l<1?{era:"bce",eraYear:1-l}:{era:"ce",eraYear:l}}}class JS extends mh{constructor(){super(...arguments),this.calendarType="lunisolar",this.hasEra=!1}inLeapYear(e,t){const n=this.getMonthList(e.year,t);return Db(n).length===13}monthsInYear(e,t){return this.inLeapYear(e,t)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}getMonthList(e,t){if(e===void 0)throw new TypeError("Missing year");const n=JSON.stringify({func:"getMonthList",calendarYear:e,id:this.id}),s=t.get(n);if(s)return s;const l=this.getFormatter(),u=(S,E)=>{const x=XS({isoYear:S,isoMonth:2,isoDay:1}),A=new Date(x);A.setUTCDate(E+1);const D=l.formatToParts(A),C=D.find(W=>W.type==="month").value,I=+D.find(W=>W.type==="day").value;let N=D.find(W=>W.type==="relatedYear");if(N===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return N=+N.value,{calendarMonthString:C,calendarDay:I,calendarYearToVerify:N}};let r=17,{calendarMonthString:p,calendarDay:f,calendarYearToVerify:g}=u(e,r);p!=="1"&&(r+=29,{calendarMonthString:p,calendarDay:f}=u(e,r)),r-=f-5;const b={};let y,w,v=1,T=!1;do({calendarMonthString:p,calendarDay:f,calendarYearToVerify:g}=u(e,r)),y&&(b[w].daysInMonth=y+30-f),g!==e?T=!0:(b[p]={monthIndex:v++},r+=30),y=f,w=p;while(!T);return b[w].daysInMonth=y+30-f,t.set(n,b),b}estimateIsoDate(e){const{year:t,month:n}=e;return{year:t,month:n>=12?12:n+1,day:1}}adjustCalendarDate(e,t,n="constrain",s=!1){let{year:l,month:u,monthExtra:r,day:p,monthCode:f,eraYear:g}=e;if(s){if(l=g,r&&r!=="bis")throw new RangeError(`Unexpected leap month suffix: ${r}`);const b=Pl(u,r!==void 0),y=`${u}${r||""}`,w=this.getMonthList(l,t)[y];if(w===void 0)throw new RangeError(`Unmatched month ${y} in Chinese year ${l}`);return u=w.monthIndex,{year:l,month:u,day:p,era:void 0,eraYear:g,monthCode:b}}if(this.validateCalendarDate(e),l===void 0&&(l=g),g===void 0&&(g=l),u===void 0){const b=this.getMonthList(l,t);let y=f.replace("L","bis").slice(1);y[0]==="0"&&(y=y.slice(1));let w=b[y];if(u=w&&w.monthIndex,u===void 0&&f.endsWith("L")&&!oy.call(["M01L","M12L","M13L"],f)&&n==="constrain"){let v=f.slice(1,-1);v[0]==="0"&&(v=v.slice(1)),w=b[v],w&&({daysInMonth:p,monthIndex:u}=w,f=Pl(v))}if(u===void 0)throw new RangeError(`Unmatched month ${f} in Chinese year ${l}`)}else if(f===void 0){const b=this.getMonthList(l,t),y=Db(b),w=y.length;n==="reject"?(ps(u,1,w),ps(p,1,this.maximumMonthLength())):(u=pa(u,1,w),p=pa(p,1,this.maximumMonthLength()));const v=y.find(([,T])=>T.monthIndex===u);if(v===void 0)throw new RangeError(`Invalid month ${u} in Chinese year ${l}`);f=Pl(v[0].replace("bis",""),v[0].indexOf("bis")!==-1)}else{const b=this.getMonthList(l,t);let y=f.replace("L","bis").slice(1);y[0]==="0"&&(y=y.slice(1));const w=b[y];if(!w)throw new RangeError(`Unmatched monthCode ${f} in Chinese year ${l}`);if(u!==w.monthIndex)throw new RangeError(`monthCode ${f} doesn't correspond to month ${u} in Chinese year ${l}`)}return{...e,year:l,eraYear:g,month:u,monthCode:f,day:p}}}class cD extends JS{constructor(){super(...arguments),this.id="chinese"}}class uD extends JS{constructor(){super(...arguments),this.id="dangi"}}const dD={helper:void 0,dateFromFields(i,e,t){const n=kr(e),s=new dr,l=an(i,["day","era","eraYear","month","monthCode","year"],["day"]),{year:u,month:r,day:p}=this.helper.calendarToIsoDate(l,n,s),f=ao(u,r,p,t);return s.setObject(f),f},yearMonthFromFields(i,e,t){const n=kr(e),s=new dr,l=an(i,["era","eraYear","month","monthCode","year"],[]),{year:u,month:r,day:p}=this.helper.calendarToIsoDate({...l,day:1},n,s),f=cf(u,r,t,p);return s.setObject(f),f},monthDayFromFields(i,e,t){const n=kr(e),s=new dr,l=an(i,["day","era","eraYear","month","monthCode","year"],["day"]),{year:u,month:r,day:p}=this.helper.monthDayFromFields(l,n,s),f=lf(r,p,t,u);return s.setObject(f),f},fields(i){let e=i;return oy.call(e,"year")&&(e=[...e,"era","eraYear"]),e},mergeFields(i,e){const t={...i},n={...e},{month:s,monthCode:l,year:u,era:r,eraYear:p,...f}=t,{month:g,monthCode:b,year:y,era:w,eraYear:v}=n;return g===void 0&&b===void 0&&(f.month=s,f.monthCode=l),y===void 0&&w===void 0&&v===void 0&&(f.year=u),{...f,...n}},dateAdd(i,e,t,n,s,l,u){const r=dr.getCacheForObject(i),p=this.helper.temporalToCalendarDate(i,r),f=this.helper.addCalendar(p,{years:e,months:t,weeks:n,days:s},l,r),g=this.helper.calendarToIsoDate(f,"constrain",r),{year:b,month:y,day:w}=g,v=ao(b,y,w,u);return new dr(r).setObject(v),v},dateUntil(i,e,t){const n=dr.getCacheForObject(i),s=dr.getCacheForObject(e),l=this.helper.temporalToCalendarDate(i,n),u=this.helper.temporalToCalendarDate(e,s);return this.helper.untilCalendar(l,u,t,n)},year(i){const e=dr.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).year},month(i){const e=dr.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).month},day(i){const e=dr.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).day},era(i){if(!this.helper.hasEra)return;const e=dr.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).era},eraYear(i){if(!this.helper.hasEra)return;const e=dr.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).eraYear},monthCode(i){const e=dr.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).monthCode},dayOfWeek:i=>xr.iso8601.dayOfWeek(i),dayOfYear(i){const e=dr.getCacheForObject(i),t=this.helper.isoToCalendarDate(i,e),n=this.helper.startOfCalendarYear(t);return this.helper.calendarDaysUntil(n,t,e)+1},weekOfYear:i=>xr.iso8601.weekOfYear(i),daysInWeek:i=>xr.iso8601.daysInWeek(i),daysInMonth(i){const e=dr.getCacheForObject(i),t=this.helper.temporalToCalendarDate(i,e),n=this.helper.maximumMonthLength(t);if(n===this.helper.minimumMonthLength(t))return n;const s=this.helper.startOfCalendarMonth(t),l=this.helper.addMonthsCalendar(s,1,"constrain",e);return this.helper.calendarDaysUntil(s,l,e)},daysInYear(i){let e=i;Jr(e,ri)||(e=Vn(e));const t=dr.getCacheForObject(e),n=this.helper.temporalToCalendarDate(e,t),s=this.helper.startOfCalendarYear(n),l=this.helper.addCalendar(s,{years:1},"constrain",t);return this.helper.calendarDaysUntil(s,l,t)},monthsInYear(i){const e=dr.getCacheForObject(i),t=this.helper.temporalToCalendarDate(i,e);return this.helper.monthsInYear(t,e)},inLeapYear(i){let e=i;Jr(e,ri)||(e=Vn(e));const t=dr.getCacheForObject(e),n=this.helper.temporalToCalendarDate(e,t);return this.helper.inLeapYear(n,t)}};for(const i of[YI,eD,rD,iD,nD,cD,uD,sD,tD,aD,oD,lD,KS,ZI,XI,KI,QI,JI]){const e=new i;xr[e.id]={...dD,helper:e}}class qf{constructor(e,t,n,s=Ar()){const l=Gn(e),u=Gn(t),r=Gn(n),p=ss(s);if(arguments.length<3)throw new RangeError("missing argument: isoYear, isoMonth and isoDay are required");gS(this,l,u,r,p)}get calendar(){if(!gn(this))throw new TypeError("invalid receiver");return Z(this,kt)}get era(){if(!gn(this))throw new TypeError("invalid receiver");return Zy(Z(this,kt),this)}get eraYear(){if(!gn(this))throw new TypeError("invalid receiver");return Xy(Z(this,kt),this)}get year(){if(!gn(this))throw new TypeError("invalid receiver");return qy(Z(this,kt),this)}get month(){if(!gn(this))throw new TypeError("invalid receiver");return Wy(Z(this,kt),this)}get monthCode(){if(!gn(this))throw new TypeError("invalid receiver");return $f(Z(this,kt),this)}get day(){if(!gn(this))throw new TypeError("invalid receiver");return Yy(Z(this,kt),this)}get dayOfWeek(){if(!gn(this))throw new TypeError("invalid receiver");return Hv(Z(this,kt),this)}get dayOfYear(){if(!gn(this))throw new TypeError("invalid receiver");return qv(Z(this,kt),this)}get weekOfYear(){if(!gn(this))throw new TypeError("invalid receiver");return Wv(Z(this,kt),this)}get daysInWeek(){if(!gn(this))throw new TypeError("invalid receiver");return Yv(Z(this,kt),this)}get daysInMonth(){if(!gn(this))throw new TypeError("invalid receiver");return Uf(Z(this,kt),this)}get daysInYear(){if(!gn(this))throw new TypeError("invalid receiver");return Ky(Z(this,kt),this)}get monthsInYear(){if(!gn(this))throw new TypeError("invalid receiver");return Qy(Z(this,kt),this)}get inLeapYear(){if(!gn(this))throw new TypeError("invalid receiver");return Jy(Z(this,kt),this)}with(e,t){if(!gn(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid argument");ph(e);const n=Z(this,kt),s=zr(n,["day","month","monthCode","year"]),l=an(e,s,"partial");if(!l)throw new TypeError("invalid date-like");let u=an(this,s,[]);return u=Mu(n,u,l),u=an(u,s,[]),xc(n,u,ln(t))}withCalendar(e){if(!gn(this))throw new TypeError("invalid receiver");const t=ss(e);return new qf(Z(this,ri),Z(this,ui),Z(this,gi),t)}add(e,t){if(!gn(this))throw new TypeError("invalid receiver");const n=qd(e),s=ln(t);return js(Z(this,kt),this,n,s)}subtract(e,t){if(!gn(this))throw new TypeError("invalid receiver");const n=MS(qd(e)),s=ln(t);return js(Z(this,kt),this,n,s)}until(e,t){if(!gn(this))throw new TypeError("invalid receiver");return e2("until",this,e,t)}since(e,t){if(!gn(this))throw new TypeError("invalid receiver");return e2("since",this,e,t)}equals(e){if(!gn(this))throw new TypeError("invalid receiver");const t=Vn(e);for(const n of[ri,ui,gi])if(Z(this,n)!==Z(t,n))return!1;return Vf(Z(this,kt),Z(t,kt))}toString(e){if(!gn(this))throw new TypeError("invalid receiver");return qw(this,jf(ln(e)))}toJSON(){if(!gn(this))throw new TypeError("invalid receiver");return qw(this)}toLocaleString(e,t){if(!gn(this))throw new TypeError("invalid receiver");return new ju(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDate")}toPlainDateTime(e){if(!gn(this))throw new TypeError("invalid receiver");const t=Z(this,ri),n=Z(this,ui),s=Z(this,gi),l=Z(this,kt);if(e===void 0)return ha(t,n,s,0,0,0,0,0,0,l);const u=kl(e);return ha(t,n,s,Z(u,Gi),Z(u,Hi),Z(u,qi),Z(u,Wi),Z(u,Yi),Z(u,Zi),l)}toZonedDateTime(e){if(!gn(this))throw new TypeError("invalid receiver");let t,n;if(Zn(e)){const v=e.timeZone;v===void 0?t=Bs(e):(t=Bs(v),n=e.plainTime)}else t=Bs(e);const s=Z(this,ri),l=Z(this,ui),u=Z(this,gi),r=Z(this,kt);let p=0,f=0,g=0,b=0,y=0,w=0;return n!==void 0&&(n=kl(n),p=Z(n,Gi),f=Z(n,Hi),g=Z(n,qi),b=Z(n,Wi),y=Z(n,Yi),w=Z(n,Zi)),us(Z(Fs(t,ha(s,l,u,p,f,g,b,y,w,r),"compatible"),Li),t,r)}toPlainYearMonth(){if(!gn(this))throw new TypeError("invalid receiver");const e=Z(this,kt);return Pu(e,an(this,zr(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!gn(this))throw new TypeError("invalid receiver");const e=Z(this,kt);return Qd(e,an(this,zr(e,["day","monthCode"]),[]))}getISOFields(){if(!gn(this))throw new TypeError("invalid receiver");return{calendar:Z(this,kt),isoDay:Z(this,gi),isoMonth:Z(this,ui),isoYear:Z(this,ri)}}static from(e,t){const n=ln(t);return gn(e)?(kr(n),ao(Z(e,ri),Z(e,ui),Z(e,gi),Z(e,kt))):Vn(e,n)}static compare(e,t){const n=Vn(e),s=Vn(t);return dc(Z(n,ri),Z(n,ui),Z(n,gi),Z(s,ri),Z(s,ui),Z(s,gi))}}Jo(qf,"Temporal.PlainDate");class Wf{constructor(e,t,n,s=0,l=0,u=0,r=0,p=0,f=0,g=Ar()){const b=Gn(e),y=Gn(t),w=Gn(n),v=Gn(s),T=Gn(l),S=Gn(u),E=Gn(r),x=Gn(p),A=Gn(f),D=ss(g);if(arguments.length<3)throw new RangeError("missing argument: isoYear, isoMonth and isoDay are required");yS(this,b,y,w,v,T,S,E,x,A,D)}get calendar(){if(!Qi(this))throw new TypeError("invalid receiver");return Z(this,kt)}get year(){if(!Qi(this))throw new TypeError("invalid receiver");return qy(Z(this,kt),this)}get month(){if(!Qi(this))throw new TypeError("invalid receiver");return Wy(Z(this,kt),this)}get monthCode(){if(!Qi(this))throw new TypeError("invalid receiver");return $f(Z(this,kt),this)}get day(){if(!Qi(this))throw new TypeError("invalid receiver");return Yy(Z(this,kt),this)}get hour(){if(!Qi(this))throw new TypeError("invalid receiver");return Z(this,Gi)}get minute(){if(!Qi(this))throw new TypeError("invalid receiver");return Z(this,Hi)}get second(){if(!Qi(this))throw new TypeError("invalid receiver");return Z(this,qi)}get millisecond(){if(!Qi(this))throw new TypeError("invalid receiver");return Z(this,Wi)}get microsecond(){if(!Qi(this))throw new TypeError("invalid receiver");return Z(this,Yi)}get nanosecond(){if(!Qi(this))throw new TypeError("invalid receiver");return Z(this,Zi)}get era(){if(!Qi(this))throw new TypeError("invalid receiver");return Zy(Z(this,kt),this)}get eraYear(){if(!Qi(this))throw new TypeError("invalid receiver");return Xy(Z(this,kt),this)}get dayOfWeek(){if(!Qi(this))throw new TypeError("invalid receiver");return Hv(Z(this,kt),this)}get dayOfYear(){if(!Qi(this))throw new TypeError("invalid receiver");return qv(Z(this,kt),this)}get weekOfYear(){if(!Qi(this))throw new TypeError("invalid receiver");return Wv(Z(this,kt),this)}get daysInWeek(){if(!Qi(this))throw new TypeError("invalid receiver");return Yv(Z(this,kt),this)}get daysInYear(){if(!Qi(this))throw new TypeError("invalid receiver");return Ky(Z(this,kt),this)}get daysInMonth(){if(!Qi(this))throw new TypeError("invalid receiver");return Uf(Z(this,kt),this)}get monthsInYear(){if(!Qi(this))throw new TypeError("invalid receiver");return Qy(Z(this,kt),this)}get inLeapYear(){if(!Qi(this))throw new TypeError("invalid receiver");return Jy(Z(this,kt),this)}with(e,t){if(!Qi(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid argument");ph(e);const n=ln(t),s=Z(this,kt),l=zr(s,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),u=an(e,l,"partial");if(!u)throw new TypeError("invalid date-time-like");let r=an(this,l,[]);r=Mu(s,r,u),r=an(r,l,[]);const{year:p,month:f,day:g,hour:b,minute:y,second:w,millisecond:v,microsecond:T,nanosecond:S}=Bf(s,r,n);return ha(p,f,g,b,y,w,v,T,S,s)}withPlainTime(e){if(!Qi(this))throw new TypeError("invalid receiver");const t=Z(this,ri),n=Z(this,ui),s=Z(this,gi),l=Z(this,kt);if(e===void 0)return ha(t,n,s,0,0,0,0,0,0,l);const u=kl(e);return ha(t,n,s,Z(u,Gi),Z(u,Hi),Z(u,qi),Z(u,Wi),Z(u,Yi),Z(u,Zi),l)}withPlainDate(e){if(!Qi(this))throw new TypeError("invalid receiver");const t=Vn(e),n=Z(t,ri),s=Z(t,ui),l=Z(t,gi);let u=Z(t,kt);const r=Z(this,Gi),p=Z(this,Hi),f=Z(this,qi),g=Z(this,Wi),b=Z(this,Yi),y=Z(this,Zi);return u=_S(Z(this,kt),u),ha(n,s,l,r,p,f,g,b,y,u)}withCalendar(e){if(!Qi(this))throw new TypeError("invalid receiver");const t=ss(e);return new Wf(Z(this,ri),Z(this,ui),Z(this,gi),Z(this,Gi),Z(this,Hi),Z(this,qi),Z(this,Wi),Z(this,Yi),Z(this,Zi),t)}add(e,t){if(!Qi(this))throw new TypeError("invalid receiver");return o2("add",this,e,t)}subtract(e,t){if(!Qi(this))throw new TypeError("invalid receiver");return o2("subtract",this,e,t)}until(e,t){if(!Qi(this))throw new TypeError("invalid receiver");return t2("until",this,e,t)}since(e,t){if(!Qi(this))throw new TypeError("invalid receiver");return t2("since",this,e,t)}round(e){if(!Qi(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?th("smallestUnit",e):ln(e),n=Kr(t,"smallestUnit","time",Au,["day"]),s=Xs(t,"halfExpand"),l=Rl(t,{day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[n],!1);let u=Z(this,ri),r=Z(this,ui),p=Z(this,gi),f=Z(this,Gi),g=Z(this,Hi),b=Z(this,qi),y=Z(this,Wi),w=Z(this,Yi),v=Z(this,Zi);return{year:u,month:r,day:p,hour:f,minute:g,second:b,millisecond:y,microsecond:w,nanosecond:v}=r1(u,r,p,f,g,b,y,w,v,l,n,s),ha(u,r,p,f,g,b,y,w,v,Z(this,kt))}equals(e){if(!Qi(this))throw new TypeError("invalid receiver");const t=fu(e);for(const n of[ri,ui,gi,Gi,Hi,qi,Wi,Yi,Zi])if(Z(this,n)!==Z(t,n))return!1;return Vf(Z(this,kt),Z(t,kt))}toString(e){if(!Qi(this))throw new TypeError("invalid receiver");const t=ln(e),{precision:n,unit:s,increment:l}=Ff(t);return Ww(this,n,jf(t),{unit:s,increment:l,roundingMode:Xs(t,"trunc")})}toJSON(){if(!Qi(this))throw new TypeError("invalid receiver");return Ww(this,"auto")}toLocaleString(e,t){if(!Qi(this))throw new TypeError("invalid receiver");return new ju(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDateTime")}toZonedDateTime(e,t){if(!Qi(this))throw new TypeError("invalid receiver");const n=Bs(e);return us(Z(Fs(n,this,of(ln(t))),Li),n,Z(this,kt))}toPlainDate(){if(!Qi(this))throw new TypeError("invalid receiver");return Jd(this)}toPlainYearMonth(){if(!Qi(this))throw new TypeError("invalid receiver");const e=Z(this,kt);return Pu(e,an(this,zr(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!Qi(this))throw new TypeError("invalid receiver");const e=Z(this,kt);return Qd(e,an(this,zr(e,["day","monthCode"]),[]))}toPlainTime(){if(!Qi(this))throw new TypeError("invalid receiver");return Zv(this)}getISOFields(){if(!Qi(this))throw new TypeError("invalid receiver");return{calendar:Z(this,kt),isoDay:Z(this,gi),isoHour:Z(this,Gi),isoMicrosecond:Z(this,Yi),isoMillisecond:Z(this,Wi),isoMinute:Z(this,Hi),isoMonth:Z(this,ui),isoNanosecond:Z(this,Zi),isoSecond:Z(this,qi),isoYear:Z(this,ri)}}static from(e,t){const n=ln(t);return Qi(e)?(kr(n),ha(Z(e,ri),Z(e,ui),Z(e,gi),Z(e,Gi),Z(e,Hi),Z(e,qi),Z(e,Wi),Z(e,Yi),Z(e,Zi),Z(e,kt))):fu(e,n)}static compare(e,t){const n=fu(e),s=fu(t);for(const l of[ri,ui,gi,Gi,Hi,qi,Wi,Yi,Zi]){const u=Z(n,l),r=Z(s,l);if(u!==r)return vu(u-r)}return 0}}Jo(Wf,"Temporal.PlainDateTime");class hc{constructor(e=0,t=0,n=0,s=0,l=0,u=0,r=0,p=0,f=0,g=0){const b=Wr(e),y=Wr(t),w=Wr(n),v=Wr(s),T=Wr(l),S=Wr(u),E=Wr(r),x=Wr(p),A=Wr(f),D=Wr(g);nx(b,y,w,v,T,S,E,x,A,D),el(this),Ji(this,Ps,b),Ji(this,is,y),Ji(this,Ys,w),Ji(this,Is,v),Ji(this,Ds,T),Ji(this,Rs,S),Ji(this,Ls,E),Ji(this,zs,x),Ji(this,Ns,A),Ji(this,Os,D)}get years(){if(!gr(this))throw new TypeError("invalid receiver");return Z(this,Ps)}get months(){if(!gr(this))throw new TypeError("invalid receiver");return Z(this,is)}get weeks(){if(!gr(this))throw new TypeError("invalid receiver");return Z(this,Ys)}get days(){if(!gr(this))throw new TypeError("invalid receiver");return Z(this,Is)}get hours(){if(!gr(this))throw new TypeError("invalid receiver");return Z(this,Ds)}get minutes(){if(!gr(this))throw new TypeError("invalid receiver");return Z(this,Rs)}get seconds(){if(!gr(this))throw new TypeError("invalid receiver");return Z(this,Ls)}get milliseconds(){if(!gr(this))throw new TypeError("invalid receiver");return Z(this,zs)}get microseconds(){if(!gr(this))throw new TypeError("invalid receiver");return Z(this,Ns)}get nanoseconds(){if(!gr(this))throw new TypeError("invalid receiver");return Z(this,Os)}get sign(){if(!gr(this))throw new TypeError("invalid receiver");return Uo(Z(this,Ps),Z(this,is),Z(this,Ys),Z(this,Is),Z(this,Ds),Z(this,Rs),Z(this,Ls),Z(this,zs),Z(this,Ns),Z(this,Os))}get blank(){if(!gr(this))throw new TypeError("invalid receiver");return Uo(Z(this,Ps),Z(this,is),Z(this,Ys),Z(this,Is),Z(this,Ds),Z(this,Rs),Z(this,Ls),Z(this,zs),Z(this,Ns),Z(this,Os))===0}with(e){if(!gr(this))throw new TypeError("invalid receiver");const t=an(e,["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"],"partial");if(!t)throw new TypeError("invalid duration-like");const{years:n=Z(this,Ps),months:s=Z(this,is),weeks:l=Z(this,Ys),days:u=Z(this,Is),hours:r=Z(this,Ds),minutes:p=Z(this,Rs),seconds:f=Z(this,Ls),milliseconds:g=Z(this,zs),microseconds:b=Z(this,Ns),nanoseconds:y=Z(this,Os)}=t;return new hc(n,s,l,u,r,p,f,g,b,y)}negated(){if(!gr(this))throw new TypeError("invalid receiver");return MS(this)}abs(){if(!gr(this))throw new TypeError("invalid receiver");return new hc(Math.abs(Z(this,Ps)),Math.abs(Z(this,is)),Math.abs(Z(this,Ys)),Math.abs(Z(this,Is)),Math.abs(Z(this,Ds)),Math.abs(Z(this,Rs)),Math.abs(Z(this,Ls)),Math.abs(Z(this,zs)),Math.abs(Z(this,Ns)),Math.abs(Z(this,Os)))}add(e,t){if(!gr(this))throw new TypeError("invalid receiver");return s2("add",this,e,t)}subtract(e,t){if(!gr(this))throw new TypeError("invalid receiver");return s2("subtract",this,e,t)}round(e){if(!gr(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let t=Z(this,Ps),n=Z(this,is),s=Z(this,Ys),l=Z(this,Is),u=Z(this,Ds),r=Z(this,Rs),p=Z(this,Ls),f=Z(this,zs),g=Z(this,Ns),b=Z(this,Os),y=Sb(t,n,s,l,u,r,p,f,g,b);const w=typeof e=="string"?th("smallestUnit",e):ln(e);let v=Kr(w,"smallestUnit","datetime",void 0),T=!0;v||(T=!1,v="nanosecond"),y=ya(y,v);let S=Kr(w,"largestUnit","datetime",void 0,["auto"]),E=!0;if(S||(E=!1,S=y),S==="auto"&&(S=y),!T&&!E)throw new RangeError("at least one of smallestUnit or largestUnit is required");if(ya(S,v)!==S)throw new RangeError(`largestUnit ${S} cannot be smaller than smallestUnit ${v}`);const x=Xs(w,"halfExpand"),A=Gv(w,v);let D=Dg(w);return{years:t,months:n,weeks:s,days:l}=og(t,n,s,l,S,D),{years:t,months:n,weeks:s,days:l,hours:u,minutes:r,seconds:p,milliseconds:f,microseconds:g,nanoseconds:b}=vc(t,n,s,l,u,r,p,f,g,b,A,v,x,D),{years:t,months:n,weeks:s,days:l,hours:u,minutes:r,seconds:p,milliseconds:f,microseconds:g,nanoseconds:b}=OS(t,n,s,l,u,r,p,f,g,b,A,v,x,D),{years:t,months:n,weeks:s,days:l}=function(I,N,W,Y,X,O){let V=I,$=N,L=W,R=Y;const G=zi("%Temporal.Duration%"),U=Uo(V,$,L,R,0,0,0,0,0,0);if(U===0)return{years:V,months:$,weeks:L,days:R};let B,H;O&&(H=Vn(O),B=Z(H,kt));const q=new G(U),se=new G(0,U),pe=new G(0,0,U);switch(X){case"year":{if(!B)throw new RangeError("a starting point is required for years balancing");let ne,le,ke;for({relativeTo:ne,days:le}=Ts(B,H,q);Sn(R)>=Sn(le);)R-=le,V+=U,H=ne,{relativeTo:ne,days:le}=Ts(B,H,q);for({relativeTo:ne,days:ke}=Ts(B,H,se);Sn(R)>=Sn(ke);)R-=ke,$+=U,H=ne,{relativeTo:ne,days:ke}=Ts(B,H,se);const be=B.dateAdd;ne=js(B,H,q,void 0,be);const Ee=B.dateUntil,K=gs(null);K.largestUnit="month";let J=yc(B,H,ne,K,Ee),oe=Z(J,is);for(;Sn($)>=Sn(oe);){$-=oe,V+=U,H=ne,ne=js(B,H,q,void 0,be);const we=gs(null);we.largestUnit="month",J=yc(B,H,ne,we,Ee),oe=Z(J,is)}break}case"month":{if(!B)throw new RangeError("a starting point is required for months balancing");let ne,le;for({relativeTo:ne,days:le}=Ts(B,H,se);Sn(R)>=Sn(le);)R-=le,$+=U,H=ne,{relativeTo:ne,days:le}=Ts(B,H,se);break}case"week":{if(!B)throw new RangeError("a starting point is required for weeks balancing");let ne,le;for({relativeTo:ne,days:le}=Ts(B,H,pe);Sn(R)>=Sn(le);)R-=le,L+=U,H=ne,{relativeTo:ne,days:le}=Ts(B,H,pe);break}}return{years:V,months:$,weeks:L,days:R}}(t,n,s,l,S,D),wi(D)&&(D=Mb(D,t,n,s,0)),{days:l,hours:u,minutes:r,seconds:p,milliseconds:f,microseconds:g,nanoseconds:b}=ga(l,u,r,p,f,g,b,S,D),new hc(t,n,s,l,u,r,p,f,g,b)}total(e){if(!gr(this))throw new TypeError("invalid receiver");let t=Z(this,Ps),n=Z(this,is),s=Z(this,Ys),l=Z(this,Is),u=Z(this,Ds),r=Z(this,Rs),p=Z(this,Ls),f=Z(this,zs),g=Z(this,Ns),b=Z(this,Os);if(e===void 0)throw new TypeError("options argument is required");const y=typeof e=="string"?th("unit",e):ln(e),w=Kr(y,"unit","datetime",Au),v=Dg(y);let T;({years:t,months:n,weeks:s,days:l}=og(t,n,s,l,w,v)),wi(v)&&(T=Mb(v,t,n,s,0)),{days:l,hours:u,minutes:r,seconds:p,milliseconds:f,microseconds:g,nanoseconds:b}=ga(l,u,r,p,f,g,b,w,T);const{total:S}=vc(t,n,s,l,u,r,p,f,g,b,1,w,"trunc",v);return S}toString(e){if(!gr(this))throw new TypeError("invalid receiver");const t=ln(e),{precision:n,unit:s,increment:l}=Ff(t);if(n==="minute")throw new RangeError('smallestUnit must not be "minute"');return A0(this,n,{unit:s,increment:l,roundingMode:Xs(t,"trunc")})}toJSON(){if(!gr(this))throw new TypeError("invalid receiver");return A0(this)}toLocaleString(e,t){if(!gr(this))throw new TypeError("invalid receiver");return typeof Intl<"u"&&Intl.DurationFormat!==void 0?new Intl.DurationFormat(e,t).format(this):(console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),A0(this))}valueOf(){throw new TypeError("use compare() to compare Temporal.Duration")}static from(e){return gr(e)?new hc(Z(e,Ps),Z(e,is),Z(e,Ys),Z(e,Is),Z(e,Ds),Z(e,Rs),Z(e,Ls),Z(e,zs),Z(e,Ns),Z(e,Os)):qd(e)}static compare(e,t,n){const s=qd(e),l=qd(t),u=Dg(ln(n)),r=Z(s,Ps),p=Z(s,is),f=Z(s,Ys);let g=Z(s,Is);const b=Z(s,Ds),y=Z(s,Rs),w=Z(s,Ls),v=Z(s,zs),T=Z(s,Ns);let S=Z(s,Os);const E=Z(l,Ps),x=Z(l,is),A=Z(l,Ys);let D=Z(l,Is);const C=Z(l,Ds),I=Z(l,Rs),N=Z(l,Ls),W=Z(l,zs),Y=Z(l,Ns);let X=Z(l,Os);const O=Qw(u,r,p,f,g),V=Qw(u,E,x,A,D);r===0&&E===0&&p===0&&x===0&&f===0&&A===0||({days:g}=og(r,p,f,g,"day",u),{days:D}=og(E,x,A,D,"day",u));const $=eh(g,b,y,w,v,T,S,O),L=eh(D,C,I,N,W,Y,X,V);return vu(de.toNumber(de.subtract($,L)))}}Jo(hc,"Temporal.Duration");const hD=Object.create;class u1{constructor(e,t,n=Ar(),s=1972){const l=Gn(e),u=Gn(t),r=ss(n),p=Gn(s);if(arguments.length<2)throw new RangeError("missing argument: isoMonth and isoDay are required");xS(this,l,u,r,p)}get monthCode(){if(!ns(this))throw new TypeError("invalid receiver");return $f(Z(this,kt),this)}get day(){if(!ns(this))throw new TypeError("invalid receiver");return Yy(Z(this,kt),this)}get calendar(){if(!ns(this))throw new TypeError("invalid receiver");return Z(this,kt)}with(e,t){if(!ns(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid argument");ph(e);const n=Z(this,kt),s=zr(n,["day","month","monthCode","year"]),l=an(e,s,"partial");if(!l)throw new TypeError("invalid month-day-like");let u=an(this,s,[]);return u=Mu(n,u,l),u=an(u,s,[]),Qd(n,u,ln(t))}equals(e){if(!ns(this))throw new TypeError("invalid receiver");const t=Gw(e);for(const n of[ui,gi,ri])if(Z(this,n)!==Z(t,n))return!1;return Vf(Z(this,kt),Z(t,kt))}toString(e){if(!ns(this))throw new TypeError("invalid receiver");return Yw(this,jf(ln(e)))}toJSON(){if(!ns(this))throw new TypeError("invalid receiver");return Yw(this)}toLocaleString(e,t){if(!ns(this))throw new TypeError("invalid receiver");return new ju(e,t).format(this)}valueOf(){throw new TypeError("use equals() to compare Temporal.PlainMonthDay")}toPlainDate(e){if(!ns(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("argument should be an object");const t=Z(this,kt),n=zr(t,["day","monthCode"]),s=an(this,n,[]),l=zr(t,["year"]);let u=Mu(t,s,an(e,l,[]));u=an(u,[...new Set([...n,...l])],[]);const r=hD(null);return r.overflow="reject",xc(t,u,r)}getISOFields(){if(!ns(this))throw new TypeError("invalid receiver");return{calendar:Z(this,kt),isoDay:Z(this,gi),isoMonth:Z(this,ui),isoYear:Z(this,ri)}}static from(e,t){const n=ln(t);return ns(e)?(kr(n),lf(Z(e,ui),Z(e,gi),Z(e,kt),Z(e,ri))):Gw(e,n)}}Jo(u1,"Temporal.PlainMonthDay");const d1=()=>new(zi("%Temporal.Instant%"))(a1()),h2=(i,e=oc())=>{const t=Bs(e),n=ss(i);return ka(t,d1(),n)},D0=(i=oc())=>{const e=Bs(i),t=Ar();return ka(e,d1(),t)},p2=(i,e=oc())=>{const t=Bs(e),n=ss(i);return us(a1(),t,n)},oc=()=>function(){const e=new aS("en-us");return new(zi("%Temporal.TimeZone%"))(pS(e.resolvedOptions().timeZone))}(),eE={instant:d1,plainDateTime:h2,plainDateTimeISO:D0,plainDate:(i,e=oc())=>Jd(h2(i,e)),plainDateISO:(i=oc())=>Jd(D0(i)),plainTimeISO:(i=oc())=>Zv(D0(i)),timeZone:oc,zonedDateTime:p2,zonedDateTimeISO:(i=oc())=>p2(Ar(),i),[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(eE,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});const pD=Object.assign;function f2(i,e,t){let n=Z(i,Gi),s=Z(i,Hi),l=Z(i,qi),u=Z(i,Wi),r=Z(i,Yi),p=Z(i,Zi);if(t){const{unit:f,increment:g,roundingMode:b}=t;({hour:n,minute:s,second:l,millisecond:u,microsecond:r,nanosecond:p}=s1(n,s,l,u,r,p,g,f,b))}return`${or(n)}:${or(s)}${ex(l,u,r,p,e)}`}class wu{constructor(e=0,t=0,n=0,s=0,l=0,u=0){const r=Gn(e),p=Gn(t),f=Gn(n),g=Gn(s),b=Gn(l),y=Gn(u);ix(r,p,f,g,b,y),el(this),Ji(this,Gi,r),Ji(this,Hi,p),Ji(this,qi,f),Ji(this,Wi,g),Ji(this,Yi,b),Ji(this,Zi,y),Ji(this,kt,Ar())}get calendar(){if(!yr(this))throw new TypeError("invalid receiver");return Z(this,kt)}get hour(){if(!yr(this))throw new TypeError("invalid receiver");return Z(this,Gi)}get minute(){if(!yr(this))throw new TypeError("invalid receiver");return Z(this,Hi)}get second(){if(!yr(this))throw new TypeError("invalid receiver");return Z(this,qi)}get millisecond(){if(!yr(this))throw new TypeError("invalid receiver");return Z(this,Wi)}get microsecond(){if(!yr(this))throw new TypeError("invalid receiver");return Z(this,Yi)}get nanosecond(){if(!yr(this))throw new TypeError("invalid receiver");return Z(this,Zi)}with(e,t){if(!yr(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid argument");ph(e);const n=ey(e,"partial"),s=kr(ln(t)),l=ey(this);let{hour:u,minute:r,second:p,millisecond:f,microsecond:g,nanosecond:b}=pD(l,n);return{hour:u,minute:r,second:p,millisecond:f,microsecond:g,nanosecond:b}=Gy(u,r,p,f,g,b,s),new wu(u,r,p,f,g,b)}add(e){if(!yr(this))throw new TypeError("invalid receiver");return l2("add",this,e)}subtract(e){if(!yr(this))throw new TypeError("invalid receiver");return l2("subtract",this,e)}until(e,t){if(!yr(this))throw new TypeError("invalid receiver");return i2("until",this,e,t)}since(e,t){if(!yr(this))throw new TypeError("invalid receiver");return i2("since",this,e,t)}round(e){if(!yr(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?th("smallestUnit",e):ln(e),n=Kr(t,"smallestUnit","time",Au),s=Xs(t,"halfExpand"),l=Rl(t,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[n],!1);let u=Z(this,Gi),r=Z(this,Hi),p=Z(this,qi),f=Z(this,Wi),g=Z(this,Yi),b=Z(this,Zi);return{hour:u,minute:r,second:p,millisecond:f,microsecond:g,nanosecond:b}=s1(u,r,p,f,g,b,l,n,s),new wu(u,r,p,f,g,b)}equals(e){if(!yr(this))throw new TypeError("invalid receiver");const t=kl(e);for(const n of[Gi,Hi,qi,Wi,Yi,Zi])if(Z(this,n)!==Z(t,n))return!1;return!0}toString(e){if(!yr(this))throw new TypeError("invalid receiver");const t=ln(e),{precision:n,unit:s,increment:l}=Ff(t);return f2(this,n,{unit:s,increment:l,roundingMode:Xs(t,"trunc")})}toJSON(){if(!yr(this))throw new TypeError("invalid receiver");return f2(this,"auto")}toLocaleString(e,t){if(!yr(this))throw new TypeError("invalid receiver");return new ju(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainTime")}toPlainDateTime(e){if(!yr(this))throw new TypeError("invalid receiver");const t=Vn(e),n=Z(t,ri),s=Z(t,ui),l=Z(t,gi),u=Z(t,kt);return ha(n,s,l,Z(this,Gi),Z(this,Hi),Z(this,qi),Z(this,Wi),Z(this,Yi),Z(this,Zi),u)}toZonedDateTime(e){if(!yr(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid argument");const t=e.plainDate;if(t===void 0)throw new TypeError("missing date property");const n=Vn(t),s=e.timeZone;if(s===void 0)throw new TypeError("missing timeZone property");const l=Bs(s),u=Z(n,ri),r=Z(n,ui),p=Z(n,gi),f=Z(n,kt),g=Z(this,Gi),b=Z(this,Hi),y=Z(this,qi),w=Z(this,Wi),v=Z(this,Yi),T=Z(this,Zi);return us(Z(Fs(l,new(zi("%Temporal.PlainDateTime%"))(u,r,p,g,b,y,w,v,T,f),"compatible"),Li),l,f)}getISOFields(){if(!yr(this))throw new TypeError("invalid receiver");return{calendar:Z(this,kt),isoHour:Z(this,Gi),isoMicrosecond:Z(this,Yi),isoMillisecond:Z(this,Wi),isoMinute:Z(this,Hi),isoNanosecond:Z(this,Zi),isoSecond:Z(this,qi)}}static from(e,t){const n=kr(ln(t));return yr(e)?new wu(Z(e,Gi),Z(e,Hi),Z(e,qi),Z(e,Wi),Z(e,Yi),Z(e,Zi)):kl(e,n)}static compare(e,t){const n=kl(e),s=kl(t);for(const l of[Gi,Hi,qi,Wi,Yi,Zi]){const u=Z(n,l),r=Z(s,l);if(u!==r)return vu(u-r)}return 0}}Jo(wu,"Temporal.PlainTime");class h1{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: identifier is required");const t=Xv(e);el(this),Ji(this,rc,t)}get id(){if(!Oo(this))throw new TypeError("invalid receiver");return Bi(this)}getOffsetNanosecondsFor(e){if(!Oo(this))throw new TypeError("invalid receiver");const t=Fo(e),n=Z(this,rc);return Op(n)?Iu(n):Cl(Z(t,Li),n)}getOffsetStringFor(e){if(!Oo(this))throw new TypeError("invalid receiver");return Eb(this,Fo(e))}getPlainDateTimeFor(e,t=Ar()){return ka(this,Fo(e),ss(t))}getInstantFor(e,t){if(!Oo(this))throw new TypeError("invalid receiver");return Fs(this,fu(e),of(ln(t)))}getPossibleInstantsFor(e){if(!Oo(this))throw new TypeError("invalid receiver");const t=fu(e),n=zi("%Temporal.Instant%"),s=Z(this,rc);if(Op(s)){const l=bc(Z(t,ri),Z(t,ui),Z(t,gi),Z(t,Gi),Z(t,Hi),Z(t,qi),Z(t,Wi),Z(t,Yi),Z(t,Zi));if(l===null)throw new RangeError("DateTime outside of supported range");const u=Iu(s);return[new n(de.subtract(l,de.BigInt(u)))]}return function(u,r,p,f,g,b,y,w,v,T){const S=bc(r,p,f,g,b,y,w,v,T);if(S===null)throw new RangeError("DateTime outside of supported range");let E=de.subtract(S,gc);de.lessThan(E,nf)&&(E=S);let x=de.add(S,gc);de.greaterThan(x,rf)&&(x=S);const A=Cl(E,u),D=Cl(x,u);return(A===D?[A]:[A,D]).map(C=>{const I=de.subtract(S,de.BigInt(C)),N=ES(I,u);if(r===N.year&&p===N.month&&f===N.day&&g===N.hour&&b===N.minute&&y===N.second&&w===N.millisecond&&v===N.microsecond&&T===N.nanosecond)return I}).filter(C=>C!==void 0)}(s,Z(t,ri),Z(t,ui),Z(t,gi),Z(t,Gi),Z(t,Hi),Z(t,qi),Z(t,Wi),Z(t,Yi),Z(t,Zi)).map(l=>new n(l))}getNextTransition(e){if(!Oo(this))throw new TypeError("invalid receiver");const t=Fo(e),n=Z(this,rc);if(Op(n)||n==="UTC")return null;let s=Z(t,Li);const l=zi("%Temporal.Instant%");return s=function(r,p){const f=de.add(r,cS),g=Kw(kS(),f);let b=Kw(lS,r);const y=Cl(b,p);let w=b,v=y;for(;y===v&&de.lessThan(de.BigInt(b),g);)w=de.add(b,uS),v=Cl(w,p),y===v&&(b=w);return y===v?null:BS(T=>Cl(T,p),b,w,y,v)}(s,n),s===null?null:new l(s)}getPreviousTransition(e){if(!Oo(this))throw new TypeError("invalid receiver");const t=Fo(e),n=Z(this,rc);if(Op(n)||n==="UTC")return null;let s=Z(t,Li);const l=zi("%Temporal.Instant%");return s=AS(s,n),s===null?null:new l(s)}toString(){if(!Oo(this))throw new TypeError("invalid receiver");return Bi(Z(this,rc))}toJSON(){if(!Oo(this))throw new TypeError("invalid receiver");return Bi(this)}static from(e){return Bs(e)}}Jo(h1,"Temporal.TimeZone");const fD=Object.create;class p1{constructor(e,t,n=Ar(),s=1){const l=Gn(e),u=Gn(t),r=ss(n),p=Gn(s);if(arguments.length<2)throw new RangeError("missing argument: isoYear and isoMonth are required");bS(this,l,u,r,p)}get year(){if(!Mn(this))throw new TypeError("invalid receiver");return qy(Z(this,kt),this)}get month(){if(!Mn(this))throw new TypeError("invalid receiver");return Wy(Z(this,kt),this)}get monthCode(){if(!Mn(this))throw new TypeError("invalid receiver");return $f(Z(this,kt),this)}get calendar(){if(!Mn(this))throw new TypeError("invalid receiver");return Z(this,kt)}get era(){if(!Mn(this))throw new TypeError("invalid receiver");return Zy(Z(this,kt),this)}get eraYear(){if(!Mn(this))throw new TypeError("invalid receiver");return Xy(Z(this,kt),this)}get daysInMonth(){if(!Mn(this))throw new TypeError("invalid receiver");return Uf(Z(this,kt),this)}get daysInYear(){if(!Mn(this))throw new TypeError("invalid receiver");return Ky(Z(this,kt),this)}get monthsInYear(){if(!Mn(this))throw new TypeError("invalid receiver");return Qy(Z(this,kt),this)}get inLeapYear(){if(!Mn(this))throw new TypeError("invalid receiver");return Jy(Z(this,kt),this)}with(e,t){if(!Mn(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid argument");ph(e);const n=Z(this,kt),s=zr(n,["month","monthCode","year"]),l=an(e,s,"partial");if(!l)throw new TypeError("invalid year-month-like");let u=an(this,s,[]);return u=Mu(n,u,l),u=an(u,s,[]),Pu(n,u,ln(t))}add(e,t){if(!Mn(this))throw new TypeError("invalid receiver");return c2("add",this,e,t)}subtract(e,t){if(!Mn(this))throw new TypeError("invalid receiver");return c2("subtract",this,e,t)}until(e,t){if(!Mn(this))throw new TypeError("invalid receiver");return n2("until",this,e,t)}since(e,t){if(!Mn(this))throw new TypeError("invalid receiver");return n2("since",this,e,t)}equals(e){if(!Mn(this))throw new TypeError("invalid receiver");const t=zp(e);for(const n of[ri,ui,gi])if(Z(this,n)!==Z(t,n))return!1;return Vf(Z(this,kt),Z(t,kt))}toString(e){if(!Mn(this))throw new TypeError("invalid receiver");return Zw(this,jf(ln(e)))}toJSON(){if(!Mn(this))throw new TypeError("invalid receiver");return Zw(this)}toLocaleString(e,t){if(!Mn(this))throw new TypeError("invalid receiver");return new ju(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainYearMonth")}toPlainDate(e){if(!Mn(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("argument should be an object");const t=Z(this,kt),n=zr(t,["monthCode","year"]),s=an(this,n,[]),l=zr(t,["day"]);let u=Mu(t,s,an(e,l,[]));u=an(u,[...new Set([...n,...l])],[]);const r=fD(null);return r.overflow="reject",xc(t,u,r)}getISOFields(){if(!Mn(this))throw new TypeError("invalid receiver");return{calendar:Z(this,kt),isoDay:Z(this,gi),isoMonth:Z(this,ui),isoYear:Z(this,ri)}}static from(e,t){const n=ln(t);return Mn(e)?(kr(n),cf(Z(e,ri),Z(e,ui),Z(e,kt),Z(e,gi))):zp(e,n)}static compare(e,t){const n=zp(e),s=zp(t);return dc(Z(n,ri),Z(n,ui),Z(n,gi),Z(s,ri),Z(s,ui),Z(s,gi))}}Jo(p1,"Temporal.PlainYearMonth");class f1{constructor(e,t,n=Ar()){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");vS(this,Up(e),Bs(t),ss(n))}get calendar(){if(!wi(this))throw new TypeError("invalid receiver");return Z(this,kt)}get timeZone(){if(!wi(this))throw new TypeError("invalid receiver");return Z(this,Rn)}get year(){if(!wi(this))throw new TypeError("invalid receiver");return qy(Z(this,kt),Xn(this))}get month(){if(!wi(this))throw new TypeError("invalid receiver");return Wy(Z(this,kt),Xn(this))}get monthCode(){if(!wi(this))throw new TypeError("invalid receiver");return $f(Z(this,kt),Xn(this))}get day(){if(!wi(this))throw new TypeError("invalid receiver");return Yy(Z(this,kt),Xn(this))}get hour(){if(!wi(this))throw new TypeError("invalid receiver");return Z(Xn(this),Gi)}get minute(){if(!wi(this))throw new TypeError("invalid receiver");return Z(Xn(this),Hi)}get second(){if(!wi(this))throw new TypeError("invalid receiver");return Z(Xn(this),qi)}get millisecond(){if(!wi(this))throw new TypeError("invalid receiver");return Z(Xn(this),Wi)}get microsecond(){if(!wi(this))throw new TypeError("invalid receiver");return Z(Xn(this),Yi)}get nanosecond(){if(!wi(this))throw new TypeError("invalid receiver");return Z(Xn(this),Zi)}get era(){if(!wi(this))throw new TypeError("invalid receiver");return Zy(Z(this,kt),Xn(this))}get eraYear(){if(!wi(this))throw new TypeError("invalid receiver");return Xy(Z(this,kt),Xn(this))}get epochSeconds(){if(!wi(this))throw new TypeError("invalid receiver");const e=Z(this,Li);return de.toNumber(de.divide(e,Al))}get epochMilliseconds(){if(!wi(this))throw new TypeError("invalid receiver");const e=Z(this,Li);return de.toNumber(de.divide(e,Va))}get epochMicroseconds(){if(!wi(this))throw new TypeError("invalid receiver");const e=Z(this,Li);return sy(de.divide(e,Ln))}get epochNanoseconds(){if(!wi(this))throw new TypeError("invalid receiver");return sy(Z(this,Li))}get dayOfWeek(){if(!wi(this))throw new TypeError("invalid receiver");return Hv(Z(this,kt),Xn(this))}get dayOfYear(){if(!wi(this))throw new TypeError("invalid receiver");return qv(Z(this,kt),Xn(this))}get weekOfYear(){if(!wi(this))throw new TypeError("invalid receiver");return Wv(Z(this,kt),Xn(this))}get hoursInDay(){if(!wi(this))throw new TypeError("invalid receiver");const e=Xn(this),t=zi("%Temporal.PlainDateTime%"),n=Z(e,ri),s=Z(e,ui),l=Z(e,gi),u=new t(n,s,l,0,0,0,0,0,0),r=bu(n,s,l,0,0,0,1,"reject"),p=new t(r.year,r.month,r.day,0,0,0,0,0,0),f=Z(this,Rn),g=Z(Fs(f,u,"compatible"),Li),b=Z(Fs(f,p,"compatible"),Li);return de.toNumber(de.subtract(b,g))/36e11}get daysInWeek(){if(!wi(this))throw new TypeError("invalid receiver");return Yv(Z(this,kt),Xn(this))}get daysInMonth(){if(!wi(this))throw new TypeError("invalid receiver");return Uf(Z(this,kt),Xn(this))}get daysInYear(){if(!wi(this))throw new TypeError("invalid receiver");return Ky(Z(this,kt),Xn(this))}get monthsInYear(){if(!wi(this))throw new TypeError("invalid receiver");return Qy(Z(this,kt),Xn(this))}get inLeapYear(){if(!wi(this))throw new TypeError("invalid receiver");return Jy(Z(this,kt),Xn(this))}get offset(){if(!wi(this))throw new TypeError("invalid receiver");return Eb(Z(this,Rn),Z(this,Cs))}get offsetNanoseconds(){if(!wi(this))throw new TypeError("invalid receiver");return wo(Z(this,Rn),Z(this,Cs))}with(e,t){if(!wi(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid zoned-date-time-like");ph(e);const n=ln(t),s=of(n),l=Cb(n,"prefer"),u=Z(this,Rn),r=Z(this,kt),p=Tb(zr(r,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),"offset"),f=an(e,p,"partial"),g=Tb(p,"timeZone");let b=an(this,g,["timeZone","offset"]);b=Mu(r,b,f),b=an(b,g,["timeZone","offset"]);let{year:y,month:w,day:v,hour:T,minute:S,second:E,millisecond:x,microsecond:A,nanosecond:D}=Bf(r,b,n);return us(ty(y,w,v,T,S,E,x,A,D,"option",Iu(b.offset),u,s,l,!1),Z(this,Rn),r)}withPlainDate(e){if(!wi(this))throw new TypeError("invalid receiver");const t=Vn(e),n=Z(t,ri),s=Z(t,ui),l=Z(t,gi);let u=Z(t,kt);const r=Xn(this),p=Z(r,Gi),f=Z(r,Hi),g=Z(r,qi),b=Z(r,Wi),y=Z(r,Yi),w=Z(r,Zi);u=_S(Z(this,kt),u);const v=Z(this,Rn);return us(Z(Fs(v,new(zi("%Temporal.PlainDateTime%"))(n,s,l,p,f,g,b,y,w,u),"compatible"),Li),v,u)}withPlainTime(e){if(!wi(this))throw new TypeError("invalid receiver");const t=zi("%Temporal.PlainTime%"),n=e===void 0?new t:kl(e),s=Xn(this),l=Z(s,ri),u=Z(s,ui),r=Z(s,gi),p=Z(this,kt),f=Z(n,Gi),g=Z(n,Hi),b=Z(n,qi),y=Z(n,Wi),w=Z(n,Yi),v=Z(n,Zi),T=Z(this,Rn);return us(Z(Fs(T,new(zi("%Temporal.PlainDateTime%"))(l,u,r,f,g,b,y,w,v,p),"compatible"),Li),T,p)}withTimeZone(e){if(!wi(this))throw new TypeError("invalid receiver");const t=Bs(e);return us(Z(this,Li),t,Z(this,kt))}withCalendar(e){if(!wi(this))throw new TypeError("invalid receiver");const t=ss(e);return us(Z(this,Li),Z(this,Rn),t)}add(e,t){if(!wi(this))throw new TypeError("invalid receiver");return u2("add",this,e,t)}subtract(e,t){if(!wi(this))throw new TypeError("invalid receiver");return u2("subtract",this,e,t)}until(e,t){if(!wi(this))throw new TypeError("invalid receiver");return r2("until",this,e,t)}since(e,t){if(!wi(this))throw new TypeError("invalid receiver");return r2("since",this,e,t)}round(e){if(!wi(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?th("smallestUnit",e):ln(e),n=Kr(t,"smallestUnit","time",Au,["day"]),s=Xs(t,"halfExpand"),l=Rl(t,{day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[n],!1),u=Xn(this);let r=Z(u,ri),p=Z(u,ui),f=Z(u,gi),g=Z(u,Gi),b=Z(u,Hi),y=Z(u,qi),w=Z(u,Wi),v=Z(u,Yi),T=Z(u,Zi);const S=zi("%Temporal.PlainDateTime%"),E=Z(this,Rn),x=Z(this,kt),A=Fs(E,new S(Z(u,ri),Z(u,ui),Z(u,gi),0,0,0,0,0,0),"compatible"),D=Ga(A,E,x,0,0,0,1,0,0,0,0,0,0),C=de.subtract(D,de.BigInt(Z(A,Li)));if(de.equal(C,Sr))throw new RangeError("cannot round a ZonedDateTime in a calendar with zero-length days");return{year:r,month:p,day:f,hour:g,minute:b,second:y,millisecond:w,microsecond:v,nanosecond:T}=r1(r,p,f,g,b,y,w,v,T,l,n,s,de.toNumber(C)),us(ty(r,p,f,g,b,y,w,v,T,"option",wo(E,Z(this,Cs)),E,"compatible","prefer",!1),E,Z(this,kt))}equals(e){if(!wi(this))throw new TypeError("invalid receiver");const t=Np(e),n=Z(this,Li),s=Z(t,Li);return!!de.equal(de.BigInt(n),de.BigInt(s))&&!!wS(Z(this,Rn),Z(t,Rn))&&Vf(Z(this,kt),Z(t,kt))}toString(e){if(!wi(this))throw new TypeError("invalid receiver");const t=ln(e),{precision:n,unit:s,increment:l}=Ff(t),u=Xs(t,"trunc");return Xw(this,n,jf(t),function(p){return _c(p,"timeZoneName",["auto","never"],"auto")}(t),function(p){return _c(p,"offset",["auto","never"],"auto")}(t),{unit:s,increment:l,roundingMode:u})}toLocaleString(e,t){if(!wi(this))throw new TypeError("invalid receiver");return new ju(e,t).format(this)}toJSON(){if(!wi(this))throw new TypeError("invalid receiver");return Xw(this,"auto")}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.ZonedDateTime")}startOfDay(){if(!wi(this))throw new TypeError("invalid receiver");const e=Xn(this),t=zi("%Temporal.PlainDateTime%"),n=Z(this,kt),s=new t(Z(e,ri),Z(e,ui),Z(e,gi),0,0,0,0,0,0,n),l=Z(this,Rn);return us(Z(Fs(l,s,"compatible"),Li),l,n)}toInstant(){if(!wi(this))throw new TypeError("invalid receiver");return new(zi("%Temporal.Instant%"))(Z(this,Li))}toPlainDate(){if(!wi(this))throw new TypeError("invalid receiver");return Jd(Xn(this))}toPlainTime(){if(!wi(this))throw new TypeError("invalid receiver");return Zv(Xn(this))}toPlainDateTime(){if(!wi(this))throw new TypeError("invalid receiver");return Xn(this)}toPlainYearMonth(){if(!wi(this))throw new TypeError("invalid receiver");const e=Z(this,kt);return Pu(e,an(this,zr(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!wi(this))throw new TypeError("invalid receiver");const e=Z(this,kt);return Qd(e,an(this,zr(e,["day","monthCode"]),[]))}getISOFields(){if(!wi(this))throw new TypeError("invalid receiver");const e=Xn(this),t=Z(this,Rn);return{calendar:Z(this,kt),isoDay:Z(e,gi),isoHour:Z(e,Gi),isoMicrosecond:Z(e,Yi),isoMillisecond:Z(e,Wi),isoMinute:Z(e,Hi),isoMonth:Z(e,ui),isoNanosecond:Z(e,Zi),isoSecond:Z(e,qi),isoYear:Z(e,ri),offset:Eb(t,Z(this,Cs)),timeZone:t}}static from(e,t){const n=ln(t);return wi(e)?(kr(n),of(n),Cb(n,"reject"),us(Z(e,Li),Z(e,Rn),Z(e,kt))):Np(e,n)}static compare(e,t){const n=Np(e),s=Np(t),l=Z(n,Li),u=Z(s,Li);return de.lessThan(de.BigInt(l),de.BigInt(u))?-1:de.greaterThan(de.BigInt(l),de.BigInt(u))?1:0}}function Xn(i){return ka(Z(i,Rn),Z(i,Cs),Z(i,kt))}Jo(f1,"Temporal.ZonedDateTime");var Lr=Object.freeze({__proto__:null,Instant:fo,Calendar:ly,PlainDate:qf,PlainDateTime:Wf,Duration:hc,PlainMonthDay:u1,Now:eE,PlainTime:wu,TimeZone:h1,PlainYearMonth:p1,ZonedDateTime:f1});const mD=[fo,ly,qf,Wf,hc,u1,wu,h1,p1,f1];for(const i of mD){const e=Object.getOwnPropertyDescriptor(i,"prototype");(e.configurable||e.enumerable||e.writable)&&(e.configurable=!1,e.enumerable=!1,e.writable=!1,Object.defineProperty(i,"prototype",e))}const gD=i=>Object.entries(T5[i]).reduce((e,t)=>{let[n,s]=t;return e[`${i}-${n}`]=s,e},{}),yD=i=>Object.entries(i).map(e=>{let[t,n]=e;return`--${t}: ${n};`}).join(`
`),tE=i=>{let{colors:e=!1,theme:t=!1,layers:n=!1,spacers:s=!1,elevations:l=!1}=i;const u={colors:e,theme:t,layers:n,spacers:s,elevations:l},r=Object.keys(u).filter(p=>u[p]).map(gD).map(yD).join(`
`);return fe.createElement(_t,{id:"3443925957",dynamic:[r]},[`html{${r};}`])};tE.propTypes={colors:Q.bool,elevations:Q.bool,layers:Q.bool,spacers:Q.bool,theme:Q.bool};let xD=class extends a5{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const n=this.options;this.options=this.client.defaultMutationOptions(e),o5(n,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(t=this.currentMutation)==null||t.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const t={listeners:!0};e.type==="success"?t.onSuccess=!0:e.type==="error"&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:l5(),t={...e,isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){lC.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var t,n,s,l;(t=(n=this.mutateOptions).onSuccess)==null||t.call(n,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(s=(l=this.mutateOptions).onSettled)==null||s.call(l,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var u,r,p,f;(u=(r=this.mutateOptions).onError)==null||u.call(r,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(p=(f=this.mutateOptions).onSettled)==null||p.call(f,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(({listener:g})=>{g(this.currentResult)})})}};function iE(i,e,t){const n=c5(i,e,t),s=zy({context:n.context}),[l]=$e.useState(()=>new xD(s,n));$e.useEffect(()=>{l.setOptions(n)},[l,n]);const u=u5($e.useCallback(p=>l.subscribe(lC.batchCalls(p)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),r=$e.useCallback((p,f)=>{l.mutate(p,f).catch(bD)},[l]);if(u.error&&d5(l.options.useErrorBoundary,[u.error]))throw u.error;return{...u,mutate:r,mutateAsync:u.mutate}}function bD(){}const vD=i=>{let{execute:e,variables:t,singular:n,immediate:s,onComplete:l,onError:u}=i;const[r]=cC(e),[p,f]=$e.useState({called:!!s,loading:!!s}),g=$e.useRef(t),b=$e.useRef([]),y=$e.useCallback(()=>{b.current.forEach(T=>T.abort()),b.current=[]},[]),w=$e.useCallback(()=>{y(),f(T=>({called:T.called,loading:!1,error:new h5({type:"aborted",message:"Aborted"})}))},[y]),v=$e.useCallback(function(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};f(x=>!x.called||!x.loading?{called:!0,loading:!0}:x),n&&y();const S=new AbortController;b.current.push(S),g.current={...g.current,...T};const E={variables:g.current,signal:S.signal,onComplete:l,onError:u};return r(E).then(x=>S.signal.aborted?new Promise(()=>{}):(f({called:!0,loading:!1,data:x}),x)).catch(x=>(S.signal.aborted||f({called:!0,loading:!1,error:x}),new Promise(()=>{})))},[y,l,u,n,r]);return $e.useEffect(()=>(s&&v(),y),[]),{refetch:v,abort:w,...p}},_D={},nE=function(i){let{onComplete:e,onError:t,variables:n=_D,lazy:s=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l=uh(),[u]=cC(i,{warn:!0,name:"mutation"}),r=$e.useCallback(w=>l.mutate(u,w),[l,u]),{refetch:p,called:f,loading:g,error:b,data:y}=vD({execute:r,variables:n,singular:!1,immediate:!s,onComplete:e,onError:t});return[p,{engine:l,called:f,loading:g,error:b,data:y}]},rE=i=>{let{children:e,open:t,dataTest:n}=i;return fe.createElement("div",{"data-test":n,className:"jsx-3677374542 "+(bn({open:t})||"")},e,fe.createElement(_t,{id:"3677374542"},["div.jsx-3677374542{height:0;overflow:hidden;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".open.jsx-3677374542{height:auto;}"]))};rE.propTypes={children:Q.node,dataTest:Q.string,open:Q.bool};const wD=()=>fe.createElement("div",{className:"jsx-2503342345"},fe.createElement(_t,{id:"2503342345"},["div.jsx-2503342345{width:24px;}"])),TD=()=>fe.createElement("div",{className:"nodeArrow"},fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"jsx-4098137027"},fe.createElement("path",{d:"M15.7041 10.3329L12.1495 14.3318C12.0699 14.4213 11.9301 14.4213 11.8505 14.3318L8.29589 10.3329C8.18124 10.2039 8.2728 10 8.44537 10H15.5546C15.7272 10 15.8188 10.2039 15.7041 10.3329Z",className:"jsx-4098137027"}),fe.createElement(_t,{id:"4098137027"},["svg.jsx-4098137027{fill:inherit;height:24px;width:24px;vertical-align:middle;pointer-events:none;}"]))),sE=i=>{let{open:e,onOpen:t,onClose:n,dataTest:s}=i;const l=e?n:t;return fe.createElement("div",{"data-test":s,onClick:u=>l&&l({open:!e},u),className:_t.dynamic([["375729792",[Oe.grey400,Oe.grey900,Oe.grey100]]])+" "+(bn({open:e})||"")},fe.createElement("span",{className:_t.dynamic([["375729792",[Oe.grey400,Oe.grey900,Oe.grey100]]])},fe.createElement(TD,null)),fe.createElement(_t,{id:"375729792",dynamic:[Oe.grey400,Oe.grey900,Oe.grey100]},["div.__jsx-style-dynamic-selector{width:24px;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",`div.__jsx-style-dynamic-selector:after{background:${Oe.grey400};height:calc(100% - 24px);inset-inline-start:12px;position:absolute;top:15px;width:1px;z-index:1;}`,".open.__jsx-style-dynamic-selector:after{content:'';}",`span.__jsx-style-dynamic-selector{display:block;position:relative;z-index:2;fill:${Oe.grey900};}`,"div.__jsx-style-dynamic-selector .nodeArrow{vertical-align:top;-webkit-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg);-webkit-transition:-webkit-transform 0.1s ease-out;-webkit-transition:transform 0.1s ease-out;transition:transform 0.1s ease-out;}","div.__jsx-style-dynamic-selector .nodeArrow:dir(rtl){-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}",".open.__jsx-style-dynamic-selector .nodeArrow{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}",".open.__jsx-style-dynamic-selector .nodeArrow:dir(rtl){-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}",`div.__jsx-style-dynamic-selector:hover{cursor:pointer;border-radius:3px;background:${Oe.grey100};}`,"div.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector:after{background:#bcc8d4;}"]))};sE.propTypes={dataTest:Q.string.isRequired,open:Q.bool,onClose:Q.func,onOpen:Q.func};const aE=i=>{let{open:e,className:t,component:n,children:s,icon:l,onOpen:u,onClose:r,dataTest:p="dhis2-uicore-node"}=i;const f=!!fe.Children.toArray(s).filter(y=>y).length,g=!l&&f,b=!l&&!f;return fe.createElement("div",{"data-test":p,className:"jsx-1433072554 "+(bn("node",t)||"")},l&&fe.createElement("div",{"data-test":`${p}-icon`,className:"jsx-1433072554"},l),g&&fe.createElement(sE,{open:e,onOpen:u,onClose:r,dataTest:`${p}-toggle`}),b&&fe.createElement(wD,null),fe.createElement("div",{"data-test":`${p}-content`,className:"jsx-1433072554"},fe.createElement("div",{"data-test":`${p}-label`,className:"jsx-1433072554"},n),fe.createElement(rE,{open:e,dataTest:`${p}-leaves`},s)),fe.createElement(_t,{id:"1433072554"},[".node.jsx-1433072554{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}"]))};aE.propTypes={children:Q.node,className:Q.string,component:Q.element,dataTest:Q.string,icon:Q.node,open:Q.bool,onClose:Q.func,onOpen:Q.func};const oE=(i,e)=>i.some(n=>e===n?!0:n.startsWith(`${e}/`)),CD=(i,e)=>i.replace(new RegExp(`^.*(/${e})`),"$1"),SD=i=>[...i].sort((e,t)=>e.displayName.localeCompare(t.displayName)),ED={"No children match filter":"","Could not load children":"  ","Error: {{ ERRORMESSAGE }}":": {{ ERRORMESSAGE }}"},kD={"No children match filter":"Filtru neodpovdaj dn podzen","Could not load children":"Nelze nast podazen","Error: {{ ERRORMESSAGE }}":"Chyba: {{ ERRORMESSAGE }}"},AD={"No children match filter":"No children match filter","Could not load children":"Could not load children","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},MD={"No children match filter":"Sin filtros de coincidencia en los elementos inferiores","Could not load children":"No se pudo cargar los elementos inferiores","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},PD={"No children match filter":"Ningn descendiente coincide con el filtro","Could not load children":"No se han podido cargar los descendientes","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},ID={"No children match filter":"","Could not load children":"","Error: {{ ERRORMESSAGE }}":"Erreur : {{ ERRORMESSAGE }}"},DD={"No children match filter":"","Could not load children":"","Error: {{ ERRORMESSAGE }}":" {{ ERRORMESSAGE }}"},RD={"No children match filter":"Ingen underenheter matcher filter","Could not load children":"Kunne ikke laste underordnede enheter","Error: {{ ERRORMESSAGE }}":"Feil: {{ ERRORMESSAGE }}"},LD={"No children match filter":"Er komen geen kinderen overeen met het filter","Could not load children":"Kan kinderen niet laden","Error: {{ ERRORMESSAGE }}":"Fout: {{ ERRORMESSAGE }}"},zD={"No children match filter":"Nenhum filho corresponde ao filtro","Could not load children":"No foi possvel carregar as crianas","Error: {{ ERRORMESSAGE }}":"Erro: {{ ERRORMESSAGE }}"},ND={"No children match filter":"  ,  ","Could not load children":"    ","Error: {{ ERRORMESSAGE }}":": {{ ERRORMESSAGE }}"},OD={"No children match filter":"  ',   ","Could not load children":"    '","Error: {{ ERRORMESSAGE }}":": {{ ERRORMESSAGE }}"},jD={"No children match filter":"","Could not load children":"Bolalar yuklanmadi","Error: {{ ERRORMESSAGE }}":""},FD={"No children match filter":"     ","Could not load children":" ","Error: {{ ERRORMESSAGE }}":": {{ ERRORMESSAGE }}"},BD={"No children match filter":"","Could not load children":"Bolalar yuklanmadi","Error: {{ ERRORMESSAGE }}":""},$D={"No children match filter":"Khng c n v con ph hp vi b lc","Could not load children":"Khng th ti n v con","Error: {{ ERRORMESSAGE }}":"Li: {{ ERRORMESSAGE }}"},UD={"No children match filter":"","Could not load children":"","Error: {{ ERRORMESSAGE }}":"{{ ERRORMESSAGE }}"},VD={"No children match filter":"","Could not load children":"","Error: {{ ERRORMESSAGE }}":""},Ss="default";Qe.addResources("ar",Ss,ED);Qe.addResources("cs",Ss,kD);Qe.addResources("en",Ss,AD);Qe.addResources("es",Ss,MD);Qe.addResources("es_419",Ss,PD);Qe.addResources("fr",Ss,ID);Qe.addResources("lo",Ss,DD);Qe.addResources("nb",Ss,RD);Qe.addResources("nl",Ss,LD);Qe.addResources("pt",Ss,zD);Qe.addResources("ru",Ss,ND);Qe.addResources("uk",Ss,OD);Qe.addResources("uz_Latn",Ss,jD);Qe.addResources("uz_UZ_Cyrl",Ss,FD);Qe.addResources("uz_UZ_Latn",Ss,BD);Qe.addResources("vi",Ss,$D);Qe.addResources("zh",Ss,UD);Qe.addResources("zh_CN",Ss,VD);const GD="[a-zA-Z][a-zA-Z0-9]{10}",HD=new RegExp(`(/${GD})+`),Ea=(i,e,t,n,s)=>{if(!HD.test(i[e]))return new Error(`Invalid org unit path \`${i[e]}\` supplied to \`${t}.${s}\``)},lE=i=>{let{children:e,dataTest:t}=i;return fe.createElement("span",{"data-test":`${t}-error`,className:_t.dynamic([["3198585030",[Oe.grey800,Gt.dp4,Jt.error]]])},e,fe.createElement(_t,{id:"3198585030",dynamic:[Oe.grey800,Gt.dp4,Jt.error]},[`span.__jsx-style-dynamic-selector{font-size:14px;color:${Oe.grey800};margin:${Gt.dp4};color:${Jt.error};}`]))};lE.propTypes={children:Q.any.isRequired,dataTest:Q.string.isRequired};const qD=(i,e)=>e.some(t=>{const n=!t.match(new RegExp(`${i}$`)),s=t.match(new RegExp(i));return n&&s}),m1=i=>{let{checked:e,children:t,onChange:n,loading:s}=i;return fe.createElement("span",{onClick:l=>{n({checked:!e},l)},className:_t.dynamic([["321503310",[Oe.grey900,Oe.teal700]]])+" "+(bn({checked:e,loading:s})||"")},t,fe.createElement(_t,{id:"321503310",dynamic:[Oe.grey900,Oe.teal700]},[`span.__jsx-style-dynamic-selector{background:transparent;border-radius:3px;color:${Oe.grey900};cursor:pointer;display:inline-block;font-size:14px;line-height:24px;padding:0 5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;}`,`.checked.__jsx-style-dynamic-selector{background:${Oe.teal700};color:white;}`,".loading.__jsx-style-dynamic-selector{cursor:auto;}"]))};m1.propTypes={children:Q.any.isRequired,checked:Q.bool,loading:Q.bool,onChange:Q.func};const cE=i=>{let{children:e,loading:t,onToggleOpen:n}=i;return fe.createElement(m1,{checked:!1,loading:t,onChange:n},e)};cE.propTypes={children:Q.any.isRequired,onToggleOpen:Q.func.isRequired,loading:Q.bool};const uE=i=>{let{dataTest:e}=i;return fe.createElement("svg",{height:"18px",version:"1.1",viewBox:"0 0 18 18",width:"18px","data-test":`${e}-iconempty`,className:"jsx-3201893673"},fe.createElement("g",{fill:"none",fillRule:"evenodd",id:"icon/empty",stroke:"none",strokeWidth:"1",className:"jsx-3201893673"}),fe.createElement(_t,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};uE.propTypes={dataTest:Q.string.isRequired};const dE=i=>{let{dataTest:e}=i;return fe.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1","data-test":`${e}-iconfolderclosed`,className:"jsx-3201893673"},fe.createElement("g",{id:"icon/folder/closed",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"jsx-3201893673"},fe.createElement("path",{d:"M2,3.5 C1.17157288,3.5 0.5,4.17157288 0.5,5 L0.5,13 C0.5,13.8284271 1.17157288,14.5 2,14.5 L12,14.5 C12.8284271,14.5 13.5,13.8284271 13.5,13 L13.5,7 C13.5,6.17157288 12.8284271,5.5 12,5.5 L6.69098301,5.5 L5.82917961,3.7763932 C5.7444836,3.60700119 5.57135204,3.5 5.38196601,3.5 L2,3.5 Z",id:"Path-2",stroke:"#6C7787",fill:"#D5DDE5",className:"jsx-3201893673"})),fe.createElement(_t,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};dE.propTypes={dataTest:Q.string.isRequired};const hE=i=>{let{dataTest:e}=i;return fe.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1","data-test":`${e}-iconfolderopen`,className:"jsx-2091325045"},fe.createElement("g",{id:"icon/folder/open",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"jsx-2091325045"},fe.createElement("g",{id:"Group",transform:"translate(0.000000, 3.000000)",stroke:"#6C7787",className:"jsx-2091325045"},fe.createElement("path",{d:"M2,0.5 C1.17157288,0.5 0.5,1.17157288 0.5,2 L0.5,10 C0.5,10.8284271 1.17157288,11.5 2,11.5 L12,11.5 C12.8284271,11.5 13.5,10.8284271 13.5,10 L13.5,4 C13.5,3.17157288 12.8284271,2.5 12,2.5 L6.69098301,2.5 L5.82917961,0.776393202 C5.7444836,0.607001188 5.57135204,0.5 5.38196601,0.5 L2,0.5 Z",id:"Path-2",fill:"#A0ADBA",className:"jsx-2091325045"}),fe.createElement("path",{d:"M1.53632259,10.7093809 C1.47575089,10.7941813 1.44318932,10.8957885 1.44318932,11 C1.44318932,11.2761424 1.66704695,11.5 1.94318932,11.5 L12.4853821,11.5 C12.6468577,11.5 12.7983931,11.4220172 12.8922488,11.2906191 L16.4636774,6.2906191 C16.5242491,6.20581872 16.5568107,6.10421149 16.5568107,6 C16.5568107,5.72385763 16.3329531,5.5 16.0568107,5.5 L5.5146179,5.5 C5.35314234,5.5 5.20160692,5.57798284 5.10775116,5.7093809 L1.53632259,10.7093809 Z",id:"Path-3",fill:"#FBFCFD",className:"jsx-2091325045"}))),fe.createElement(_t,{id:"2091325045"},["svg.jsx-2091325045{margin:3px 0;display:block;}"]))};hE.propTypes={dataTest:Q.string.isRequired};const pE=i=>{let{dataTest:e}=i;return fe.createElement("svg",{height:"18px",version:"1.1",viewBox:"0 0 18 18",width:"18px","data-test":`${e}-iconsingle`,className:"jsx-3201893673"},fe.createElement("g",{fill:"none",fillRule:"evenodd",id:"icon/single",stroke:"none",strokeWidth:"1",className:"jsx-3201893673"},fe.createElement("rect",{fill:"#A0ADBA",height:"4",id:"Rectangle",rx:"1",width:"4",x:"7",y:"7",className:"jsx-3201893673"})),fe.createElement(_t,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};pE.propTypes={dataTest:Q.string.isRequired};const fE=i=>{let{loading:e,hasChildren:t,open:n,dataTest:s}=i;return e?fe.createElement(uE,{dataTest:s}):t?n?fe.createElement(hE,{dataTest:s}):fe.createElement(dE,{dataTest:s}):fe.createElement(pE,{dataTest:s})};fE.propTypes={dataTest:Q.string.isRequired,hasChildren:Q.bool,loading:Q.bool,open:Q.bool};const mE=i=>{let{checked:e,dataTest:t,hasChildren:n,indeterminate:s,children:l,loading:u,name:r,open:p,value:f,onChange:g}=i;const b=fe.createElement(fE,{loading:u,open:p,hasChildren:n,dataTest:t}),y=fe.createElement(fe.Fragment,null,fe.createElement("span",{className:"jsx-1000763175"},b),l,fe.createElement(_t,{id:"1000763175"},["span.jsx-1000763175{display:inline-block;margin-inline-end:4px;}"]));return fe.createElement(fe.Fragment,null,fe.createElement(Rf,{dense:!0,checked:e,name:r,value:f,label:y,indeterminate:s,onChange:g}))};mE.propTypes={checked:Q.bool.isRequired,children:Q.any.isRequired,dataTest:Q.string.isRequired,hasChildren:Q.bool.isRequired,indeterminate:Q.bool.isRequired,loading:Q.bool.isRequired,name:Q.string.isRequired,open:Q.bool.isRequired,value:Q.string.isRequired,onChange:Q.func.isRequired};const Og=i=>{let{highlighted:e,children:t}=i;return fe.createElement("div",{className:_t.dynamic([["1387769986",[Oe.teal200]]])+" "+(bn({highlighted:e})||"")},fe.createElement("span",{className:_t.dynamic([["1387769986",[Oe.teal200]]])},t),fe.createElement(_t,{id:"1387769986",dynamic:[Oe.teal200]},["div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}","span.__jsx-style-dynamic-selector{display:block;}",`.highlighted.__jsx-style-dynamic-selector{background:${Oe.teal200};padding-inline-end:4px;}`]))};Og.propTypes={children:Q.node,highlighted:Q.bool};const WD=i=>{let{selected:e,path:t,checked:n,singleSelection:s}=i;const l=e.indexOf(t);if(n&&l!==-1)return e;if(s&&n)return[t];if(n)return[...e,t];if(l===-1)return e;if(s)return[];if(e.indexOf(t)===0)return e.slice(1);const u=e.slice(0,l),r=e.slice(l+1);return[...u,...r]},gE=i=>{let{checked:e,children:t,dataTest:n,disableSelection:s,fullPath:l,hasChildren:u,hasSelectedDescendants:r,highlighted:p,loading:f,node:g,onChange:b,onToggleOpen:y,open:w,rootId:v,selected:T,singleSelection:S}=i;const E=(x,A)=>{let{checked:D}=x;const C=WD({path:l,selected:T,checked:D,singleSelection:S,rootId:v}),I={...g,path:l,checked:D,selected:C};b(I,A)};return s?fe.createElement(Og,{highlighted:p},fe.createElement(cE,{loading:f,onToggleOpen:y},t)):S?fe.createElement(Og,{highlighted:p},fe.createElement(m1,{checked:e,onChange:E,loading:f},t)):fe.createElement(Og,{highlighted:p},fe.createElement(mE,{dataTest:n,checked:e,name:"org-unit",value:g.id,loading:f,indeterminate:!e&&r,onChange:E,open:w,hasChildren:u},t))};gE.propTypes={children:Q.any.isRequired,dataTest:Q.string.isRequired,fullPath:Q.string.isRequired,hasChildren:Q.bool.isRequired,loading:Q.bool.isRequired,node:Q.shape({displayName:Q.string.isRequired,id:Q.string.isRequired,children:Q.number,path:Q.string}).isRequired,open:Q.bool.isRequired,rootId:Q.string.isRequired,onChange:Q.func.isRequired,onToggleOpen:Q.func.isRequired,checked:Q.bool,disableSelection:Q.bool,hasSelectedDescendants:Q.bool,highlighted:Q.bool,selected:Q.arrayOf(Ea),singleSelection:Q.bool};const m2={styles:fe.createElement(_t,{id:"358163430"},[".extrasmall.jsx-358163430{display:block;margin:3px 0;}"]),className:"jsx-358163430"},yE=()=>fe.createElement("div",{className:"jsx-2503342345"},fe.createElement(Qo,{extrasmall:!0,className:m2.className}),fe.createElement("style",null,m2.styles),fe.createElement(_t,{id:"2503342345"},["div.jsx-2503342345{width:24px;}"])),YD={orgUnit:{resource:"organisationUnits",id:i=>{let{id:e}=i;return e},params:{fields:"children[id,path,displayName]"}}},ZD=i=>{let{node:e,suppressAlphabeticalSorting:t,onComplete:n}=i;const s=$e.useRef(!1),{called:l,loading:u,error:r,data:p}=Aa(YD,{variables:{id:e.id}}),f=$e.useMemo(()=>{if(!p)return;if(!e.children)return[];const{orgUnit:g}=p;return t?g.children:SD(g.children)},[p,t]);return $e.useEffect(()=>{n&&f&&!s.current&&(n({...e,children:f}),s.current=!0)},[n,f,s]),{called:l,loading:u,error:r||null,data:f}},XD=i=>{let{orgChildren:e,filter:t,node:n}=i;return t!=null&&t.length?e.filter(s=>oE(t,`${n.path}/${s.id}`)):e},xE=i=>{let{node:e,autoExpandLoadingError:t,dataTest:n,disableSelection:s,expanded:l,filter:u,highlighted:r,isUserDataViewFallback:p,onChange:f,onChildrenLoaded:g,onCollapse:b,onExpand:y,parentPath:w,renderNodeLabel:v,rootId:T,selected:S,singleSelection:E,suppressAlphabeticalSorting:x,OrganisationUnitNode:A}=i;const D=ZD({node:e,isUserDataViewFallback:p,suppressAlphabeticalSorting:x,onComplete:g}),C=D.called&&!D.loading&&!D.error,I=C?XD({orgChildren:D.data,filter:u,node:e}):[];return fe.createElement(fe.Fragment,null,D.loading&&fe.createElement(yE,null),D.error&&`Error: ${D.error}`,C&&!I.length&&Qe.t("No children match filter"),!!I.length&&I.map(N=>{const W=`${w}/${N.id}`;return fe.createElement(A,{autoExpandLoadingError:t,dataTest:n,disableSelection:s,displayName:N.displayName,expanded:l,filter:u,highlighted:r,id:N.id,isUserDataViewFallback:p,key:W,onChange:f,onChildrenLoaded:g,onCollapse:b,onExpand:y,path:W,renderNodeLabel:v,rootId:T,selected:S,singleSelection:E,suppressAlphabeticalSorting:x})}))};xE.propTypes={OrganisationUnitNode:Q.func.isRequired,dataTest:Q.string.isRequired,node:Q.object.isRequired,parentPath:Q.string.isRequired,renderNodeLabel:Q.func.isRequired,rootId:Q.string.isRequired,onChange:Q.func.isRequired,autoExpandLoadingError:Q.bool,disableSelection:Q.bool,expanded:Q.arrayOf(Ea),filter:Q.arrayOf(Ea),highlighted:Q.arrayOf(Ea),isUserDataViewFallback:Q.bool,selected:Q.arrayOf(Ea),singleSelection:Q.bool,suppressAlphabeticalSorting:Q.bool,onChildrenLoaded:Q.func,onCollapse:Q.func,onExpand:Q.func};const KD=i=>{let{path:e,expanded:t,onExpand:n,onCollapse:s,errorMessage:l,autoExpandLoadingError:u}=i;const r=u&&!!l,[p,f]=$e.useState(!!l);$e.useEffect(()=>{r&&!p&&(n({path:e}),f(!0))},[r,p]);const g=r&&!p||!!t.includes(e);return{open:g,onToggleOpen:()=>g?s({path:e}):n({path:e}),openedOnceDueToError:p}},QD={orgUnit:{resource:"organisationUnits",id:i=>{let{id:e}=i;return e},params:i=>{let{isUserDataViewFallback:e}=i;return{isUserDataViewFallback:e,fields:["path","children::size"]}}}},JD=(i,e)=>{let{displayName:t,isUserDataViewFallback:n}=e;if(!t)throw new Error('"displayName" is required');const s={id:i,isUserDataViewFallback:n},{loading:l,error:u,data:r={}}=Aa(QD,{variables:s});return{loading:l,error:u||null,data:{id:i,displayName:t,...r.orgUnit}}},g1=i=>{let{autoExpandLoadingError:e,dataTest:t,disableSelection:n,displayName:s,expanded:l,highlighted:u,id:r,isUserDataViewFallback:p,path:f,renderNodeLabel:g,rootId:b,selected:y,singleSelection:w,filter:v,suppressAlphabeticalSorting:T,onChange:S,onChildrenLoaded:E,onCollapse:x,onExpand:A}=i;const D=JD(r,{isUserDataViewFallback:p,displayName:s}),C=CD(f,b),I={displayName:s,id:r,...D.data,path:C},N=!!I.children&&I.children>0,W=qD(C,y),Y=u.includes(f),{open:X,onToggleOpen:O}=KD({autoExpandLoadingError:e,errorMessage:D.error&&D.error.toString(),path:C,expanded:l,onExpand:A,onCollapse:x}),V=!!y.find(U=>U.match(new RegExp(`${C}$`))),$=g({disableSelection:n,hasChildren:N,hasSelectedDescendants:W,loading:D.loading,error:D.error,selected:y,open:X,path:f,singleSelection:w,node:I,label:s,checked:V,highlighted:Y}),L=fe.createElement(gE,{node:I,fullPath:f,open:X,loading:D.loading,checked:V,rootId:b,onChange:S,dataTest:`${t}-label`,selected:y,hasChildren:N,highlighted:Y,onToggleOpen:O,disableSelection:n,singleSelection:w,hasSelectedDescendants:W},$),R=N&&!X&&!D.error,G=N&&X&&!D.error;return fe.createElement(aE,{dataTest:`${t}-node`,open:X,onOpen:O,onClose:O,component:L,icon:D.loading&&fe.createElement(yE,null)},D.error&&fe.createElement(lE,{dataTest:t},Qe.t("Could not load children")),R&&fe.createElement("span",{"data-test":`${t}-placeholder`}),G&&fe.createElement(xE,{OrganisationUnitNode:g1,node:I,autoExpandLoadingError:e,dataTest:t,disableSelection:n,expanded:l,filter:v,highlighted:u,isUserDataViewFallback:p,onChange:S,onChildrenLoaded:E,onCollapse:x,onExpand:A,parentPath:f,renderNodeLabel:g,rootId:b,selected:y,singleSelection:w,suppressAlphabeticalSorting:T}))};g1.propTypes={dataTest:Q.string.isRequired,id:Q.string.isRequired,renderNodeLabel:Q.func.isRequired,rootId:Q.string.isRequired,onChange:Q.func.isRequired,autoExpandLoadingError:Q.bool,disableSelection:Q.bool,displayName:Q.string,expanded:Q.arrayOf(Ea),filter:Q.arrayOf(Ea),highlighted:Q.arrayOf(Ea),isUserDataViewFallback:Q.bool,path:Ea,selected:Q.arrayOf(Ea),singleSelection:Q.bool,suppressAlphabeticalSorting:Q.bool,onChildrenLoaded:Q.func,onCollapse:Q.func,onExpand:Q.func};const eR=i=>{let{label:e}=i;return e},tR=(i,e)=>i!=null&&i.length?e.filter(t=>oE(i,`/${t}`)):e,bE=i=>{let{dataTest:e="dhis2-uiwidgets-orgunittree-error",error:t}=i;return fe.createElement("div",{"data-test":e},Qe.t("Error: {{ ERRORMESSAGE }}",{ERRORMESSAGE:t,nsSeparator:">"}))};bE.propTypes={error:Q.string.isRequired,dataTest:Q.string};const vE=i=>{let{dataTest:e="dhis2-uiwidgets-orgunittree-loading"}=i;return fe.createElement("div",{"data-test":e,className:"jsx-814846266"},fe.createElement(Qo,{small:!0}),fe.createElement(_t,{id:"814846266"},["div.jsx-814846266{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]))};vE.propTypes={dataTest:Q.string};const iR=i=>Array.from(new Set(i)),nR=i=>{const e=i.replace(/^\//,"").split("/"),t=e.map((n,s)=>`/${e.slice(0,s+1).join("/")}`);return iR(t)},rR=i=>i.reduce((e,t)=>{const n=nR(t);return[...e,...n]},[]),sR=i=>{let{expanded:e,setExpanded:t,onExpand:n,onCollapse:s}=i;return{handleExpand:r=>{let{path:p,...f}=r;e.includes(p)||(t([...e,p]),n&&n({path:p,...f}))},handleCollapse:r=>{let{path:p,...f}=r;const g=e.indexOf(p);if(g!==-1){const b=g===0?e.slice(1):[...e.slice(0,g),...e.slice(g+1)];t(b),s&&s({path:p,...f})}}}},aR=i=>{let{initiallyExpanded:e,onExpand:t,onCollapse:n,expandedControlled:s,handleExpandControlled:l,handleCollapseControlled:u}=i;const r=!!s,p=r?[]:rR(e),[f,g]=$e.useState(p);if(r)return{expanded:s,handleExpand:l,handleCollapse:u};const{handleExpand:b,handleCollapse:y}=sR({expanded:f,setExpanded:g,onExpand:t,onCollapse:n});return{expanded:f,handleExpand:b,handleCollapse:y}},oR=i=>{const[e,t]=$e.useState(0);return $e.useEffect(()=>{const n=e+1;i===!0&&t(n)},[i]),e},lR=i=>{const t=Object.entries(i).map(n=>{let[s,l]=n;const u=l.displayName||"";return[s,{...l,displayName:u}]});return Object.fromEntries(t)},cR=i=>i.reduce((e,t)=>({...e,[t]:{id:t,resource:"organisationUnits",params:n=>{let{isUserDataViewFallback:s}=n;return{isUserDataViewFallback:s,fields:["displayName","path","id"]}}}}),{}),uR=function(i){let{isUserDataViewFallback:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=$e.useMemo(()=>cR(i),[i]),s=Aa(t,{variables:{isUserDataViewFallback:e}}),{called:l,loading:u,error:r,data:p,refetch:f}=s,g=$e.useMemo(()=>p&&lR(p),[p]);return{called:l,loading:u,error:r||null,data:g||null,refetch:f}},lg=[],_E=i=>{let{onChange:e,roots:t,autoExpandLoadingError:n,dataTest:s="dhis2-uiwidgets-orgunittree",disableSelection:l,forceReload:u,highlighted:r=lg,isUserDataViewFallback:p,initiallyExpanded:f=lg,filter:g=lg,renderNodeLabel:b=eR,selected:y=lg,singleSelection:w,suppressAlphabeticalSorting:v,expanded:T,handleExpand:S,handleCollapse:E,onExpand:x,onCollapse:A,onChildrenLoaded:D}=i;const C=tR(g,Array.isArray(t)?t:[t]),I=oR(u),[N,W]=$e.useState(I),{called:Y,loading:X,error:O,data:V,refetch:$}=uR(C,{isUserDataViewFallback:p,suppressAlphabeticalSorting:v}),{expanded:L,handleExpand:R,handleCollapse:G}=aR({initiallyExpanded:f,onExpand:x,onCollapse:A,expandedControlled:T,handleExpandControlled:S,handleCollapseControlled:E});$e.useEffect(()=>($&&I>0&&I!==N&&($(),W(I)),()=>console.warn("@TODO: Why does this component unmount after a force reload?")),[I,N,$]);const U=!Y||X;return fe.createElement("div",{"data-test":s},U&&fe.createElement(vE,null),O&&fe.createElement(bE,{error:O}),!O&&!U&&C.map(B=>{const H=V[B];return fe.createElement(g1,{key:H.path,rootId:B,autoExpandLoadingError:n,dataTest:s,disableSelection:l,displayName:H.displayName,expanded:L,highlighted:r,id:B,isUserDataViewFallback:p,filter:g,path:H.path,renderNodeLabel:b,selected:y,singleSelection:w,suppressAlphabeticalSorting:v,onChange:e,onChildrenLoaded:D,onCollapse:G,onExpand:R})}))};_E.propTypes={roots:Q.oneOfType([Q.string,Q.arrayOf(Q.string)]).isRequired,onChange:Q.func.isRequired,autoExpandLoadingError:Q.bool,dataTest:Q.string,disableSelection:Q.bool,expanded:Rr(i=>!!i.handleExpand||!!i.handleCollapse,Q.arrayOf(Q.string)),filter:Q.arrayOf(Ea),forceReload:Q.bool,handleCollapse:Rr(i=>!!i.expanded||!!i.handleExpand,Q.func),handleExpand:Rr(i=>!!i.expanded||!!i.handleCollapse,Q.func),highlighted:Q.arrayOf(Ea),initiallyExpanded:Q.arrayOf(Ea),isUserDataViewFallback:Q.bool,renderNodeLabel:Q.func,selected:Q.arrayOf(Ea),singleSelection:Q.bool,suppressAlphabeticalSorting:Q.bool,onChildrenLoaded:Q.func,onCollapse:Q.func,onExpand:Q.func};const vn="ACCESS_NONE",Qn="ACCESS_VIEW_ONLY",ar="ACCESS_VIEW_AND_EDIT",y1="SHARE_TARGET_EXTERNAL",Fu="SHARE_TARGET_PUBLIC",Bu="SHARE_TARGET_USER",yh="SHARE_TARGET_GROUP",wE={AGGREGATE_DATA_EXCHANGE:"aggregateDataExchange",API_TOKEN:"apiToken",ATTRIBUTE:"attribute",CATEGORY:"category",CATEGORY_COMBO:"categoryCombo",CATEGORY_OPTION:"categoryOption",CATEGORY_OPTION_GROUP:"categoryOptionGroup",CATEGORY_OPTION_GROUP_SET:"categoryOptionGroupSet",CONSTANT:"constant",DASHBOARD:"dashboard",DATA_APPROVAL_LEVEL:"dataApprovalLevel",DATA_APPROVAL_WORKFLOW:"dataApprovalWorkflow",DATA_ELEMENT:"dataElement",DATA_ELEMENT_GROUP:"dataElementGroup",DATA_ELEMENT_GROUP_SET:"dataElementGroupSet",DATA_SET:"dataSet",DOCUMENT:"document",EVENT_CHART:"eventChart",EVENT_FILTER:"eventFilter",EVENT_REPORT:"eventReport",EVENT_VISUALIZATION:"eventVisualization",EXPRESSION_DIMENSION_ITEM:"expressionDimensionItem",EXTERNAL_MAP_LAYER:"externalMapLayer",IDENTIFIABLE_OBJECT:"identifiableObject",INDICATOR:"indicator",INDICATOR_GROUP:"indicatorGroup",INDICATOR_GROUP_SET:"indicatorGroupSet",INTERPRETATION:"interpretation",LEGEND_SET:"legendSet",MAP:"map",OPTION_GROUP:"optionGroup",OPTION_GROUP_SET:"optionGroupSet",OPTION_SET:"optionSet",ORGANISATION_UNIT_GROUP:"organisationUnitGroup",ORGANISATION_UNIT_GROUP_SET:"organisationUnitGroupSet",PREDICTOR_GROUP:"predictorGroup",PROGRAM:"program",PROGRAM_INDICATOR:"programIndicator",PROGRAM_INDICATOR_GROUP:"programIndicatorGroup",PROGRAM_STAGE:"programStage",PROGRAM_STAGE_WORKING_LIST:"programStageWorkingList",RELATIONSHIP_TYPE:"relationshipType",REPORT:"report",SQL_VIEW:"sqlView",TRACKED_ENTITY_ATTRIBUTE:"trackedEntityAttribute",TRACKED_ENTITY_FILTER:"trackedEntityFilter",TRACKED_ENTITY_TYPE:"trackedEntityType",USER_GROUP:"userGroup",USER_ROLE:"userRole",VALIDATION_RULE:"validationRule",VALIDATION_RULE_GROUP:"validationRuleGroup",VISUALIZATION:"visualization"},TE=Object.values(wE),cy=$e.createContext(!1);var dR=void 0;const hR=(i,e,t)=>{let n;return function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];const r=dR,p=()=>{n=null,i.apply(r,l)};clearTimeout(n),n=setTimeout(p,e)}},R0=i=>i===void 0?vn:typeof i=="boolean"?i?Qn:vn:i.startsWith("rw")?ar:i.startsWith("r-")?Qn:vn,CE=i=>{if(typeof i=="boolean")return{data:vn,metadata:R0(i)};const e=i==null?void 0:i.substring(0,2),t=i==null?void 0:i.substring(2,4);return{data:R0(t),metadata:R0(e)}},g2=i=>{switch(i){case vn:return"--";case Qn:return"r-";case ar:return"rw";default:return"--"}},Gp=i=>`${g2(i.metadata)}${g2(i.data)}----`,cg=i=>{let{access:e,...t}=i;return{...t,access:CE(e)}},pR=[y1,Fu],y2=i=>!pR.includes(i),fR=i=>{let{object:e,type:t,access:n,id:s}=i;switch(t){case"public":return{object:{...e,publicAccess:Gp(n)}};case"group":{const l=e.userGroupAccesses.map(r=>r.id!==s?r:{...r,access:Gp(n)}),u={object:{...e,userGroupAccesses:l}};return console.log(u),u}case"user":{const l=e.userAccesses.map(r=>r.id!==s?r:{...r,access:Gp(n)});return{object:{...e,userAccesses:l}}}}},mR=i=>{let{object:e,type:t,id:n,access:s,name:l}=i;switch(t){case"group":return{object:{...e,userGroupAccesses:[...e.userGroupAccesses,{id:n,name:l,access:Gp(s)}]}};case"user":return{object:{...e,userAccesses:[...e.userAccesses,{id:n,name:l,access:Gp(s)}]}}}},gR=i=>{let{object:e,type:t,id:n}=i;switch(t){case"group":{const s=e.userGroupAccesses.filter(u=>u.id!==n);return{object:{...e,userGroupAccesses:s}}}case"user":{const s=e.userAccesses.filter(u=>u.id!==n);return{object:{...e,userAccesses:s}}}}},yR="",xR="",bR=" ",vR="",_R="",wR={"View only":" ","View and edit":" ","No access":"  ","Give access to a user or group":"      ","Data access level":"","Choose a level":"","Not available offline":"     ","Metadata access level":"","Access level":" ","Give access":" ","Users and groups that currently have access":"      ","User / Group":"","All users":" ","Anyone logged in":"","User group":" ",User:yR,Data:xR,"Remove access":" ",Metadata:bR,"User or group":"  ",Search:vR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"  ","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:_R,"Dashboard sharing":""},TR="",CR="",SR="",ER="",kR="",AR={"View only":"","View and edit":"","No access":" ","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:TR,Data:CR,"Remove access":"",Metadata:SR,"User or group":"",Search:ER,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:kR,"Dashboard sharing":""},MR=" ",PR="",IR="",DR={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:MR,"Remove access":"","User or group":"",Search:PR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"  ","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:IR,"Dashboard sharing":""},RR="Uivatel",LR="Data",zR="Metadata",NR="Hledat",OR="Zavt",jR={"View only":"Pouze zobrazen","View and edit":"Zobrazen a pravy","No access":"dn pstup","Give access to a user or group":"Udlte pstup uivateli nebo skupin","Data access level":"","Choose a level":"","Not available offline":"Nen k dispozici offline","Metadata access level":"","Access level":"rove pstupu","Give access":"Povolit pstup","Users and groups that currently have access":"Uivatel a skupiny, kte maj aktuln pstup","User / Group":"Uivatel / Skupina","All users":"Vichni uivatel","Anyone logged in":"","User group":"Uivatelsk skupina",User:RR,Data:LR,"Remove access":"Odebrat pstup",Metadata:zR,"User or group":"Uivatel nebo skupina",Search:NR,"Apply dashboard sharing settings to visualizations":"Na vizualizace pouijte nastaven sdlen ovldacho panelu","Something went wrong":"Nco se pokazilo","Apply sharing to dashboard visualizations":"Pout sdlen na vizualizace ovldacho panelu","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Nebyly aktualizovny dn vizualizace. Zkontrolujte, zda mte oprvnn ke zmn sdlen pro vechny vizualizace.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Ne vechny vizualizace bylo mon spn aktualizovat. {{ success }} aktualizovno spn, {{ failed }} se nepodailo aktualizovat. Zkontrolujte, zda mte oprvnn ke zmn sdlen pro vechny vizualizace.","No visualizations were updated because sharing settings are already sufficient.":"Nebyly aktualizovny dn vizualizace, protoe nastaven sdlen je ji dostaujc.","Successfully updated sharing for all visualizations.":"spn aktualizovno sdlen pro vechny vizualizace.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Ne vechna nastaven sdlen vizualizac bylo nutn aktualizovat. {{ updated }} aktualizovno, {{ skipped }} ji m dostaten nastaven sdlen.","There are no users or groups to apply sharing settings for.":"Nejsou dn uivatel ani skupiny, pro kter by bylo mon pout nastaven sdlen.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Poet vizualizac na tomto dicm panelu, kter potenciln zskaj aktualizovan nastaven sdlen: {{ visualizationsCount }}. Poet uivatel nebo skupin, na kter se tato aktualizovan nastaven budou vztahovat: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"Pouit stejnch nastaven sdlen zajist, e uivatel a skupiny, kter maj pstup k dicmu panelu, budou mt tak pstup k jeho vizualizacm (grafy, tabulky, mapy, grafy udlost a zprvy o udlostech) alespo Pouze zobrazen.",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"Pokud uivatel nebo skupina ji m k vizualizaci pstup Zobrazen a pravy, nebude to omezeno na Pouze zobrazen. rove pstupu Vichni uivatel nebude aktualizovna ani zmnna.","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Pouit sdlen nelze vrtit zpt a je nutn jej provst znovu, pokud na ovldac panel pidte nov vizualizace nebo se zmn jeho nastaven sdlen.","Sharing and access: {{- objectName}}":"Sdlen a pstup: {{- objectName}}","Sharing and access":"Sdlen a pstup",Close:OR,"Dashboard sharing":"Sdlen ovldacho panelu"},FR="",BR="",$R="",UR="",VR="Close",GR={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:FR,Data:BR,"Remove access":"",Metadata:$R,"User or group":"",Search:UR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:VR,"Dashboard sharing":""},HR="User",qR="Data",WR="Metadata",YR="Search",ZR="Close",XR={"View only":"View only","View and edit":"View and edit","No access":"No access","Give access to a user or group":"Give access to a user or group","Data access level":"Data access level","Choose a level":"Choose a level","Not available offline":"Not available offline","Metadata access level":"Metadata access level","Access level":"Access level","Give access":"Give access","Users and groups that currently have access":"Users and groups that currently have access","User / Group":"User / Group","All users":"All users","Anyone logged in":"Anyone logged in","User group":"User group",User:HR,Data:qR,"Remove access":"Remove access",Metadata:WR,"User or group":"User or group",Search:YR,"Apply dashboard sharing settings to visualizations":"Apply dashboard sharing settings to visualizations","Something went wrong":"Something went wrong","Apply sharing to dashboard visualizations":"Apply sharing to dashboard visualizations","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No visualizations were updated. Check that you have permission to change sharing for all visualizations.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.","No visualizations were updated because sharing settings are already sufficient.":"No visualizations were updated because sharing settings are already sufficient.","Successfully updated sharing for all visualizations.":"Successfully updated sharing for all visualizations.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.","There are no users or groups to apply sharing settings for.":"There are no users or groups to apply sharing settings for.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':`If a user or group already has "View and edit" access to a visualization, this won't be reduced to "View only". The "All users" access level won't be updated or changed.`,"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.","Sharing and access: {{- objectName}}":"Sharing and access: {{- objectName}}","Sharing and access":"Sharing and access",Close:ZR,"Dashboard sharing":"Dashboard sharing"},KR="Usuario",QR="Datos",JR="Metadatos",eL="Buscar",tL="Cerrar",iL={"View only":"Solo lectura","View and edit":"Ver y editar","No access":"Sin acceso","Give access to a user or group":"Dar acceso a un usuario o grupo","Data access level":"","Choose a level":"","Not available offline":"No disponible sin conexin a internet","Metadata access level":"","Access level":"Nivel de acceso","Give access":"Dar acceso","Users and groups that currently have access":"Usuarios y grupos que actualmente tienen acceso","User / Group":"Usuario / Grupo","All users":"Todos los usuarios","Anyone logged in":"","User group":"Grupo de usuario",User:KR,Data:QR,"Remove access":"Eliminar acceso",Metadata:JR,"User or group":"Usuario o Grupo",Search:eL,"Apply dashboard sharing settings to visualizations":"Aplicar la configuracin compartir del tablero a las visualizaciones","Something went wrong":"Algo ha salido mal","Apply sharing to dashboard visualizations":"Aplicar compartir a las visualizaciones del tablero","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No se actualizaron las visualizaciones. Compruebe que tiene permiso para cambiar la configuracin compartir de todas las visualizaciones.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"No todas las visualizaciones se pudieron actualizar correctamente. {{ success }} actualizado con xito, {{ failed }} error al actualizar. Compruebe que tiene permiso para cambiar la configuracin de uso compartido de todas las visualizaciones.","No visualizations were updated because sharing settings are already sufficient.":"No se han actualizado las visualizaciones porque la configuracin para compartir ya es suficiente","Successfully updated sharing for all visualizations.":"Configuracin de uso compartido actualizado con xito para todas las visualizaciones.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"No todas las configuraciones para compartir visualizaciones requieren actualizacin. {{ updated }} actualizado, {{ skipped }} ya tiene suficiente acceso.","There are no users or groups to apply sharing settings for.":"No hay usuarios o grupos a los que aplicar la configuracin de uso compartido","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Nmero de visualizaciones en este tablero que potencialmente actualizarn su confugiracin de uso compartido: {{ visualizationsCount }}. El nmero de usuarios o grupos a los que se aplicarn estas configuraciones actualizadas: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'La aplicacin de la misma configuracin para compartir garantiza que los usuarios y grupos que tienen acceso al tablero tambin tienen al menos acceso de "Solo lectura" a sus visualizaciones (grficos, tablas, mapas, grficos de eventos e informes de eventos).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Si un usuario o grupo ya tiene acceso "Ver y editar" a una visualizacin, este no se reducir a "Solo lectura". El nivel de acceso "Todos los usuarios" no se actualizar ni cambiar.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Aplicar esta configuracin de uso compartido no puede deshacerse, y debers hacer estos cambios nuevamente si nuevas visualizaciones son agregadas al tablero o si su configuracin de uso compartido es modificada.","Sharing and access: {{- objectName}}":"Compartir y acceder: {{- objectName}}","Sharing and access":"Acceso compartido",Close:tL,"Dashboard sharing":"Compartir tablero"},nL="",rL="Datos",sL="Metadatos",aL="Buscar",oL="Cerrar",lL={"View only":"Ver slo","View and edit":"Ver y editar","No access":"Sin acceso","Give access to a user or group":"Dar acceso a un usuario o grupo","Data access level":"","Choose a level":"","Not available offline":"No disponible sin conexin","Metadata access level":"","Access level":"Nivel de acceso","Give access":"Dar acceso","Users and groups that currently have access":"Usuarios y grupos que tienen acceso actualmente","User / Group":"Usuario / Grupo","All users":"Todos los usuarios","Anyone logged in":"","User group":"",User:nL,Data:rL,"Remove access":"Eliminar el acceso",Metadata:sL,"User or group":"Usuario o grupo",Search:aL,"Apply dashboard sharing settings to visualizations":"Aplicar la configuracin de uso compartido del cuadro de mandos a las visualizaciones","Something went wrong":"Algo ha ido mal","Apply sharing to dashboard visualizations":"Aplicar la comparticin a las visualizaciones de cuadros de mando","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No se ha actualizado ninguna visualizacin. Compruebe que tiene permiso para cambiar el uso compartido de todas las visualizaciones.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"No se han podido actualizar correctamente todas las visualizaciones. {{ success }} se ha actualizado correctamente, {{ failed }} no se ha podido actualizar. Compruebe que tiene permiso para cambiar la comparticin de todas las visualizaciones.","No visualizations were updated because sharing settings are already sufficient.":"No se ha actualizado ninguna visualizacin porque los ajustes de comparticin ya son suficientes.","Successfully updated sharing for all visualizations.":"Actualizada con xito la comparticin de todas las visualizaciones.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"No era necesario actualizar todos los ajustes de comparticin de visualizaciones. {{ updated }} actualizado, {{ skipped }} ya tena suficientes ajustes de comparticin.","There are no users or groups to apply sharing settings for.":"No hay usuarios ni grupos a los que aplicar la configuracin de uso compartido.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Nmero de visualizaciones en este cuadro de mando que potencialmente obtendrn ajustes de uso compartido actualizados: {{ visualizationsCount }}. Nmero de usuarios o grupos a los que se aplicarn estos ajustes actualizados: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Aplicando la misma configuracin de comparticin se garantiza que los usuarios y grupos que tienen acceso al cuadro de mando tambin tienen al menos acceso de "slo visualizacin" a sus visualizaciones (grficos, tablas, mapas, grficos de eventos e informes de eventos).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Si un usuario o grupo ya tiene acceso "Ver y editar" a una visualizacin, ste no se reducir a "Slo ver". El nivel de acceso "Todos los usuarios" no se actualizar ni cambiar.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"La aplicacin de la comparticin no puede deshacerse, y debe hacerse de nuevo si se aaden nuevas visualizaciones al cuadro de mandos o se cambia su configuracin de comparticin.","Sharing and access: {{- objectName}}":"Compartir y acceder: {{- objectName}}","Sharing and access":"Compartir y acceder",Close:oL,"Dashboard sharing":"Compartir el cuadro de mandos"},cL="",uL="",dL="",hL={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:cL,"Remove access":"","User or group":"",Search:uL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Jokin meni pieleen","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:dL,"Dashboard sharing":""},pL="Utilisateur",fL="Donnes",mL="Mtadonnes",gL="Chercher",yL="Fermer",xL={"View only":"","View and edit":"","No access":"Pas d'accs","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Non disponible hors ligne","Metadata access level":"","Access level":"Niveau d'accs","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Groupe d'utilisateurs",User:pL,Data:fL,"Remove access":"",Metadata:mL,"User or group":"",Search:gL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Quelque chose a mal tourn","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:yL,"Dashboard sharing":""},bL="",vL="Data",_L="Metadata",wL="Pencarian",TL="Tutup",CL={"View only":"","View and edit":"","No access":"Tidak ada akses","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:bL,Data:vL,"Remove access":"",Metadata:_L,"User or group":"",Search:wL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Terjadi kesalahan","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:TL,"Dashboard sharing":""},SL="",EL="Data",kL="",AL="",ML="",PL={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:SL,Data:EL,"Remove access":"",Metadata:kL,"User or group":"",Search:AL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:ML,"Dashboard sharing":""},IL="",DL="",RL="",LL="",zL="",NL={"View only":"","View and edit":"  ","No access":"","Give access to a user or group":"  ","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"  ","User / Group":" / ","All users":"","Anyone logged in":"","User group":"",User:IL,Data:DL,"Remove access":"",Metadata:RL,"User or group":"  ",Search:LL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":". .","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":".  {{ success }} , {{ failed }} . .","No visualizations were updated because sharing settings are already sufficient.":".","Successfully updated sharing for all visualizations.":".","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":". {{ updated }} , {{ skipped }} .","There are no users or groups to apply sharing settings for.":"  .","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":": {{ visualizationsCount }}.  : {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'   ""  (, , ,   ).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'   " "  "".  ""   .',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":",    .","Sharing and access: {{- objectName}}":"  : {{- objectName}}","Sharing and access":"  ",Close:zL,"Dashboard sharing":""},OL="",jL="",FL="",BL="",$L="",UL={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:OL,Data:jL,"Remove access":"",Metadata:FL,"User or group":"",Search:BL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:$L,"Dashboard sharing":""},VL="Bruker",GL="Data",HL="Metadata",qL="Sk",WL="Lukk",YL={"View only":"","View and edit":"","No access":"Ingen tilgang","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Ikke tilgjengelig i frakoblet modus","Metadata access level":"","Access level":"Tilgangsniv","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Brukergruppe",User:VL,Data:GL,"Remove access":"",Metadata:HL,"User or group":"",Search:qL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Noe gikk galt","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:WL,"Dashboard sharing":""},ZL="",XL="",KL="",QL={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:ZL,"Remove access":"","User or group":"",Search:XL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:KL,"Dashboard sharing":""},JL="Gebruiker",e4="Gegevens",t4="Metagegevens",i4="Zoek",n4="Sluit",r4={"View only":"Alleen bekijken","View and edit":"Bekijk en bewerk","No access":"Geen toegang","Give access to a user or group":"Geef toegang aan een gebruiker of groep","Data access level":"","Choose a level":"","Not available offline":"Niet beschikbaar offline","Metadata access level":"","Access level":"Toegangsniveau","Give access":"Toegang geven","Users and groups that currently have access":"Gebruikers en groepen die momenteel toegang hebben","User / Group":"Gebruiker / groep","All users":"Alle gebruikers","Anyone logged in":"","User group":"",User:JL,Data:e4,"Remove access":"Toegang verwijderen",Metadata:t4,"User or group":"Gebruiker of groep",Search:i4,"Apply dashboard sharing settings to visualizations":"Instellingen voor delen van dashboards toepassen op visualisaties","Something went wrong":"Er is iets fout gegaan.","Apply sharing to dashboard visualizations":"Pas delen toe op dashboardvisualisaties","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Er zijn geen visualisaties bijgewerkt. Controleer of u gemachtigd bent om het delen voor alle visualisaties te wijzigen.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Niet alle visualisaties konden met succes worden bijgewerkt. {{ success }} succesvol bijgewerkt, {{ failed }} kan niet worden bijgewerkt. Controleer of u gemachtigd bent om het delen voor alle visualisaties te wijzigen.","No visualizations were updated because sharing settings are already sufficient.":"Er zijn geen visualisaties bijgewerkt omdat de instellingen voor delen al voldoende zijn.","Successfully updated sharing for all visualizations.":"Delen voor alle visualisaties is gepdatet.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Niet alle instellingen voor het delen van visualisaties hoefden te worden bijgewerkt. {{ updated }} bijgewerkt, {{ skipped }} had al voldoende instellingen voor delen.","There are no users or groups to apply sharing settings for.":"Er zijn geen gebruikers of groepen om instellingen voor delen toe te passen.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Aantal visualisaties op dit dashboard dat mogelijk gepdatete instellingen voor delen krijgt: {{ visualizationsCount }}. Het aantal gebruikers of groepen waarop deze bijgewerkte instellingen van toepassing zijn: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Het toepassen van dezelfde instellingen voor delen zorgt ervoor dat gebruikers en groepen die toegang hebben tot het dashboard ook ten minste "Alleen weergeven" toegang hebben tot de visualisaties (grafieken, tabellen, kaarten, gebeurtenisgrafieken en gebeurtenisrapporten).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':`Als een gebruiker of groep al het recht "Bekijken en bewerken" heeft voor een visualisatie, wordt dit niet beperkt tot "Alleen weergeven". Het toegangsniveau 'Alle gebruikers' wordt niet bijgewerkt of gewijzigd.`,"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Het toepassen van delen kan niet ongedaan worden gemaakt en moet opnieuw worden gedaan als er nieuwe visualisaties aan het dashboard worden toegevoegd of als de instellingen voor delen worden gewijzigd.","Sharing and access: {{- objectName}}":"Delen en toegang: {{- objectName}}","Sharing and access":"Delen en toegang",Close:n4,"Dashboard sharing":"Dashboard delen"},s4=" ",a4="",o4="",l4="",c4="",u4={"View only":"","View and edit":"","No access":"  ","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"  ",User:s4,Data:a4,"Remove access":"",Metadata:o4,"User or group":"",Search:l4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:c4,"Dashboard sharing":""},d4="",h4=" ()",p4="",f4="",m4="  ",g4={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:d4,Data:h4,"Remove access":"",Metadata:p4,"User or group":"",Search:f4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:m4,"Dashboard sharing":""},y4="Utilizador",x4="Dados",b4="Metadados",v4="Pesquisar",_4="Fechar",w4={"View only":"Ver apenas","View and edit":"","No access":"Sem acesso","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"No disponvel offline","Metadata access level":"","Access level":"Niveis de acesso ","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Grupo de usurios",User:y4,Data:x4,"Remove access":"",Metadata:b4,"User or group":"",Search:v4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Ocorreu algo de errado","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:_4,"Dashboard sharing":""},T4="Usurio",C4="Dados",S4="Metadados",E4="Pesquisar",k4="Fechar",A4={"View only":"","View and edit":"","No access":"Sem acesso","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Grupo de usurios",User:T4,Data:C4,"Remove access":"",Metadata:S4,"User or group":"",Search:E4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:k4,"Dashboard sharing":""},M4="",P4="Cutare",I4="nchidere",D4={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:M4,"Remove access":"","User or group":"",Search:P4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:I4,"Dashboard sharing":""},R4="",L4="",z4="",N4="",O4="",j4={"View only":" ","View and edit":"  ","No access":" ","Give access to a user or group":"    ","Data access level":"","Choose a level":"","Not available offline":"   ","Metadata access level":"","Access level":" ","Give access":" ","Users and groups that currently have access":"    ","User / Group":" / ","All users":" ","Anyone logged in":"","User group":" ",User:R4,Data:L4,"Remove access":" ",Metadata:z4,"User or group":"  ",Search:N4,"Apply dashboard sharing settings to visualizations":"      ","Something went wrong":"-   ","Apply sharing to dashboard visualizations":"     ","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"   . ,            .","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"     . : {{ success }},  : {{ failed }} . ,             .","No visualizations were updated because sharing settings are already sufficient.":"   ,     .","Successfully updated sharing for all visualizations.":"     ","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"       . : {{ updated }},   : {{ skipped }}.","There are no users or groups to apply sharing settings for.":"        .","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"    ,      : {{ visualizationsCount }}.    ,      : {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"       ,    ,  (   )    (, , ,    ).",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'        "  "  ,      " ".   " "     .',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"   .    ,          .","Sharing and access: {{- objectName}}":": {{- objectName}}","Sharing and access":"   ",Close:O4,"Dashboard sharing":"  "},F4="",B4="",$4="",U4="",V4="",G4={"View only":"","View and edit":"","No access":" ","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"  ","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:F4,Data:B4,"Remove access":"",Metadata:$4,"User or group":"",Search:U4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:V4,"Dashboard sharing":""},H4="",q4="Data",W4="Metadata",Y4="Sk",Z4="Stnga",X4={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:H4,Data:q4,"Remove access":"",Metadata:W4,"User or group":"",Search:Y4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Ngot gick fel","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:Z4,"Dashboard sharing":""},K4="",Q4="Dadus",J4="",ez="",tz="Taka",iz={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:K4,Data:Q4,"Remove access":"",Metadata:J4,"User or group":"",Search:ez,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:tz,"Dashboard sharing":""},nz="",rz="",sz="",az="",oz="",lz={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:nz,Data:rz,"Remove access":"",Metadata:sz,"User or group":"",Search:az,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:oz,"Dashboard sharing":""},cz="",uz="",dz="",hz="",pz="",fz={"View only":" ","View and edit":"  ","No access":" ","Give access to a user or group":"    ","Data access level":"","Choose a level":"","Not available offline":"   ","Metadata access level":"","Access level":" ","Give access":" ","Users and groups that currently have access":"  ,    ","User / Group":" / ","All users":" ","Anyone logged in":"","User group":" ",User:cz,Data:uz,"Remove access":" ",Metadata:dz,"User or group":"  ",Search:hz,"Apply dashboard sharing settings to visualizations":"        ","Something went wrong":" ","Apply sharing to dashboard visualizations":"      ","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"  . ,            .","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"    . {{ success }}  , {{ failed }}   . ,            .","No visualizations were updated because sharing settings are already sufficient.":"  ,      .","Successfully updated sharing for all visualizations.":"      .","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"         . {{ updated }} , {{ skipped }}      .","There are no users or groups to apply sharing settings for.":"   ,       .","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"     ,       : {{ visualizationsCount }}.    ,      : {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'     ,    ,      ,     " "    (, , ,      ).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'         "  ",       " ".   " "     .',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"    ,     ,            .","Sharing and access: {{- objectName}}":" : {{- objectName}}","Sharing and access":" ",Close:pz,"Dashboard sharing":"    "},mz="",gz="",yz=" ",xz=" ",bz="",vz={"View only":"","View and edit":"","No access":"  ","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":" ",User:mz,Data:gz,"Remove access":"",Metadata:yz,"User or group":"",Search:xz,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:bz,"Dashboard sharing":""},_z="Metadata",wz="Izlash",Tz="Yopmoq",Cz={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"Pogonani tanlang","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"Kirish taqiqlangan","Can view":" ","Can view and edit":"",Metadata:_z,"Remove access":"","User or group":"",Search:wz,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Nimadir notogri bajarildi","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:Tz,"Dashboard sharing":""},Sz="",Ez="",kz="",Az="",Mz="",Pz={"View only":"  ","View and edit":"  ","No access":"   ","Give access to a user or group":"     ","Data access level":"","Choose a level":"","Not available offline":"   ","Metadata access level":"","Access level":"   ","Give access":" ","Users and groups that currently have access":"     ","User / Group":"/","All users":" ","Anyone logged in":"","User group":" ",User:Sz,Data:Ez,"Remove access":"  ",Metadata:kz,"User or group":"  ",Search:Az,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"  ","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"  : {{- objectName}}","Sharing and access":"  ",Close:Mz,"Dashboard sharing":"  "},Iz="Foydalanuvchi",Dz="",Rz="Metadata",Lz="Izlash",zz="Yopmoq",Nz={"View only":"","View and edit":"","No access":"Kirish taqiqlangan","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:Iz,Data:Dz,"Remove access":"",Metadata:Rz,"User or group":"",Search:Lz,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Nimadir notogri bajarildi","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:zz,"Dashboard sharing":""},Oz="Ngi dng",jz="D liu",Fz="Siu d liu",Bz="Tm kim",$z="ng li",Uz={"View only":"Ch xem","View and edit":"","No access":"Khng truy cp","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Khng c cho ngoi tuyn","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Nhm Ngi Dng",User:Oz,Data:jz,"Remove access":"",Metadata:Fz,"User or group":"",Search:Bz,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"C li","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:$z,"Dashboard sharing":""},Vz="",Gz="",Hz="",qz="",Wz="",Yz={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"/","All users":"","Anyone logged in":"","User group":"",User:Vz,Data:Gz,"Remove access":"",Metadata:Hz,"User or group":"",Search:qz,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":" {{ success }}{{ failed }}","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":" {{ updated }}{{ skipped }}","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"{{ visualizationsCount }}{{ entityAmount }}",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':" ","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"{{- objectName}}","Sharing and access":"",Close:Wz,"Dashboard sharing":""},Zz="",Xz="",Kz="",Qz="",Jz="",e6={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"User",User:Zz,Data:Xz,"Remove access":"",Metadata:Kz,"User or group":"",Search:Qz,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:Jz,"Dashboard sharing":""},Nn="default";Qe.addResources("ar",Nn,wR);Qe.addResources("ar_IQ",Nn,AR);Qe.addResources("ckb",Nn,DR);Qe.addResources("cs",Nn,jR);Qe.addResources("da",Nn,GR);Qe.addResources("en",Nn,XR);Qe.addResources("es",Nn,iL);Qe.addResources("es_419",Nn,lL);Qe.addResources("fi",Nn,hL);Qe.addResources("fr",Nn,xL);Qe.addResources("id",Nn,CL);Qe.addResources("km",Nn,PL);Qe.addResources("lo",Nn,NL);Qe.addResources("my",Nn,UL);Qe.addResources("nb",Nn,YL);Qe.addResources("ne",Nn,QL);Qe.addResources("nl",Nn,r4);Qe.addResources("prs",Nn,u4);Qe.addResources("ps",Nn,g4);Qe.addResources("pt",Nn,w4);Qe.addResources("pt_BR",Nn,A4);Qe.addResources("ro",Nn,D4);Qe.addResources("ru",Nn,j4);Qe.addResources("si",Nn,G4);Qe.addResources("sv",Nn,X4);Qe.addResources("tet",Nn,iz);Qe.addResources("tg",Nn,lz);Qe.addResources("uk",Nn,fz);Qe.addResources("ur",Nn,vz);Qe.addResources("uz_Latn",Nn,Cz);Qe.addResources("uz_UZ_Cyrl",Nn,Pz);Qe.addResources("uz_UZ_Latn",Nn,Nz);Qe.addResources("vi",Nn,Uz);Qe.addResources("zh",Nn,Yz);Qe.addResources("zh_CN",Nn,e6);const Rb=i=>{let{onClose:e,name:t,children:n,dataTest:s="dhis2-uicore-sharingdialog-modal"}=i;const l=t?Qe.t("Sharing and access: {{- objectName}}",{objectName:t,nsSeparator:"|"}):Qe.t("Sharing and access");return fe.createElement(ku,{large:!0,position:"top",onClose:e,dataTest:s},fe.createElement(_v,null,l),fe.createElement(Ny,null,n),fe.createElement(wv,null,fe.createElement(Tv,{end:!0},fe.createElement(Jn,{type:"button",secondary:!0,onClick:e},Qe.t("Close")))))};Rb.propTypes={children:Q.node.isRequired,dataTest:Q.string,name:Q.string,onClose:Q.func};const nh=fe.forwardRef((i,e)=>{let{icon:t,onClick:n,selected:s,disabled:l,children:u,className:r,dataTest:p="dhis2-uicore-tab"}=i,f=$e.useRef(null);e&&(f=e);const[g,b]=$e.useState(!1);return $e.useEffect(()=>{(()=>{const w=f.current.scrollWidth>f.current.clientWidth;b(w)})()},[]),fe.createElement("button",{onClick:l?void 0:y=>n({},y),"data-test":p,ref:f,role:"tab","aria-selected":s?"true":"false","aria-disabled":l?"true":"false",onFocus:l?void 0:y=>n({},y),tabIndex:-1,className:_t.dynamic([["2433456263",[Oe.grey400,Oe.grey600,Jt.focus,Oe.grey600,Oe.grey900,Oe.grey600,Oe.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,Oe.grey500,Oe.grey500]]])+` ${bn("tab",r,{selected:s,disabled:l})}`},t,g?fe.createElement(Vy,{content:u,maxWidth:"100%"},fe.createElement("span",{ref:f,className:_t.dynamic([["2433456263",[Oe.grey400,Oe.grey600,Jt.focus,Oe.grey600,Oe.grey900,Oe.grey600,Oe.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,Oe.grey500,Oe.grey500]]])},u)):fe.createElement("span",{ref:f,className:_t.dynamic([["2433456263",[Oe.grey400,Oe.grey600,Jt.focus,Oe.grey600,Oe.grey900,Oe.grey600,Oe.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,Oe.grey500,Oe.grey500]]])},u),fe.createElement(_t,{id:"2433456263",dynamic:[Oe.grey400,Oe.grey600,Jt.focus,Oe.grey600,Oe.grey900,Oe.grey600,Oe.grey800,Jt.primary800,Jt.primary700,Jt.primary700,Jt.primary700,Oe.grey500,Oe.grey500]},[`button.__jsx-style-dynamic-selector{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;position:relative;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;vertical-align:bottom;height:100%;padding:16px 16px 11px;background-color:transparent;outline:none;border:none;border-bottom:1px solid ${Oe.grey400};color:${Oe.grey600};font-size:14px;line-height:20px;cursor:pointer;}`,".fixed>button.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}","button.__jsx-style-dynamic-selector::after{content:' ';display:block;position:absolute;bottom:-1px;inset-inline-start:0;height:4px;width:100%;background-color:transparent;}","span.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;max-width:320px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-transition:fill 150ms ease-in-out;transition:fill 150ms ease-in-out;}",`button.__jsx-style-dynamic-selector:focus{outline:3px solid ${Jt.focus};outline-offset:-3px;}`,"button.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector:not(:focus-visible){outline:none;}",`button.__jsx-style-dynamic-selector>svg{fill:${Oe.grey600};width:14px;height:14px;margin:0 4px 0 0;}`,`button.__jsx-style-dynamic-selector:hover{color:${Oe.grey900};}`,`button.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector::after{background-color:${Oe.grey600};height:2px;}`,`button.__jsx-style-dynamic-selector:active.__jsx-style-dynamic-selector::after{background-color:${Oe.grey800};}`,`button.selected.__jsx-style-dynamic-selector{color:${Jt.primary800};}`,`button.selected.__jsx-style-dynamic-selector::after{background-color:${Jt.primary700};-webkit-transition:background-color 150ms ease-in-out;transition:background-color 150ms ease-in-out;}`,`button.selected.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector::after{background-color:${Jt.primary700};height:4px;}`,`button.selected.__jsx-style-dynamic-selector>svg{fill:${Jt.primary700};}`,`button.disabled.__jsx-style-dynamic-selector{color:${Oe.grey500};cursor:not-allowed;}`,"button.disabled.__jsx-style-dynamic-selector:hover,button.selected.__jsx-style-dynamic-selector:hover{background-color:transparent;}",`button.disabled.__jsx-style-dynamic-selector>svg{fill:${Oe.grey500};}`]))});nh.propTypes={children:Q.node,className:Q.string,dataTest:Q.string,disabled:Q.bool,icon:Q.element,selected:Q.bool,onClick:Q.func};nh.displayName="Tab";const Lb=250,t6=.5;function i6(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const n=i.scrollLeft,s=n6(i,n,t),l=s-n,u=r6({scrollBox:i,callback:e,startValue:n,endValue:s,change:l});window.requestAnimationFrame(u)}function n6(i,e,t){const n=i.clientWidth*t6;return Math.floor(e+n*(t?-1:1))}function r6(i){let{scrollBox:e,callback:t,startValue:n,endValue:s,change:l}=i,u,r,p;return function f(g){u||(u=g),r=g-u,p=s6({currentTime:r,DURATION:Lb,startValue:n,change:l}),r>=Lb?(p!==s&&(e.scrollLeft=s),t&&t()):(e.scrollLeft=p,window.requestAnimationFrame(f))}}function s6(i){let{currentTime:e,startValue:t,change:n}=i;return(e/=Lb/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}let ug;const zb="__vertical-scrollbar-height-test__",a6=`
    .${zb} {
        position: absolute;
        top: -9999px;
        width: 100px;
        height: 100px;
        overflow-x: scroll;
    }
    .${zb}::-webkit-scrollbar {
        display: none;
    }
`;function o6(){if(ug)return ug;const i=document.createElement("style");i.innerHTML=a6;const e=document.createElement("div");return e.classList.add(zb),document.body.appendChild(i),document.body.appendChild(e),ug=e.offsetHeight-e.clientHeight,document.body.removeChild(i),document.body.removeChild(e),ug}const uy=i=>{let{children:e,disabled:t,hidden:n,onClick:s}=i;return fe.createElement("button",{onClick:t?void 0:s,className:_t.dynamic([["2701682090",[Oe.white,Oe.grey400,Oe.grey600,Oe.grey100,Oe.grey200,Oe.grey500]]])+" "+(bn("scroll-button",{disabled:t,hidden:n})||"")},e,fe.createElement(_t,{id:"2701682090",dynamic:[Oe.white,Oe.grey400,Oe.grey600,Oe.grey100,Oe.grey200,Oe.grey500]},[`.scroll-button.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:inherit;background-color:${Oe.white};border:none;border-bottom:1px solid ${Oe.grey400};outline:none;padding:16px 16px 11px 16px;cursor:pointer;}`,".scroll-button.hidden.__jsx-style-dynamic-selector{display:none;}",`.scroll-button.__jsx-style-dynamic-selector svg{width:20px;height:20px;fill:${Oe.grey600};-webkit-transition:opacity 150ms ease-in-out;transition:opacity 150ms ease-in-out;opacity:1;}`,`.scroll-button.__jsx-style-dynamic-selector:hover{background-color:${Oe.grey100};}`,`.scroll-button.__jsx-style-dynamic-selector:active{background-color:${Oe.grey200};}`,".scroll-button.disabled.__jsx-style-dynamic-selector{cursor:not-allowed;}",".scroll-button.disabled.__jsx-style-dynamic-selector:hover{background-color:transparent;}",`.scroll-button.disabled.__jsx-style-dynamic-selector svg{fill:${Oe.grey500};}`]))};uy.displayName="ScrollButton";uy.propTypes={children:Q.any.isRequired,disabled:Q.bool,hidden:Q.bool,onClick:Q.func};function xl(i,e,t){return(e=l6(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function l6(i){var e=c6(i,"string");return typeof e=="symbol"?e:e+""}function c6(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class SE extends $e.Component{constructor(e){super(e),xl(this,"scrollBox",$e.createRef()),xl(this,"scrollArea",$e.createRef()),xl(this,"horizontalScrollBarHeight",o6()),xl(this,"scrollBoxResizeObserver",null),xl(this,"calculateShouldHideButtons",()=>{this.setState({hideScrollButtonsInitialized:!1});const{current:t}=this.scrollBox,{current:n}=this.scrollArea,s=n.offsetWidth,l=t.offsetWidth,u=s<=l;this.setState({hideScrollButtons:u}),u||(this.state.scrolledToStart&&this.scrollLeft(),this.state.scrolledToEnd&&this.scrollRight()),this.setState({hideScrollButtonsInitialized:!0})}),xl(this,"scrollRight",()=>this.scroll()),xl(this,"scrollLeft",()=>this.scroll(!0)),xl(this,"animatedScrollCallback",()=>{this.updateScrolledToStates(),this.attachSideScrollListener()}),xl(this,"updateScrolledToStates",()=>{const{scrollLeft:t,offsetWidth:n}=this.scrollBox.current,{offsetWidth:s}=this.scrollArea.current,l=t<=0,u=t+n>=s;(this.state.scrolledToStart!==l||this.state.scrolledToEnd!==u)&&this.setState({scrolledToStart:l,scrolledToEnd:u})}),this.state={scrolledToStart:!0,scrolledToEnd:!1,hideScrollButtonsInitialized:!1,hideScrollButtons:!1},this.scrollBoxResizeObserver=new ResizeObserver(this.calculateShouldHideButtons)}componentDidMount(){this.scrollSelectedTabIntoView(),this.attachSideScrollListener(),this.manageShouldHideButtons()}componentWillUnmount(){this.removeSideScrollListener(),this.scrollBoxResizeObserver.disconnect()}manageShouldHideButtons(){const{current:e}=this.scrollBox;this.scrollBoxResizeObserver.observe(e),this.calculateShouldHideButtons()}scroll(e){this.removeSideScrollListener(),i6(this.scrollBox.current,this.animatedScrollCallback,e)}scrollSelectedTabIntoView(){const e=this.scrollBox.current,t=e.querySelector(".tab.selected");if(t){const n=t.offsetLeft+t.offsetWidth;n>e.offsetWidth&&(e.scrollLeft=n-e.offsetWidth)}}attachSideScrollListener(){this.scrollBox.current.addEventListener("scroll",this.updateScrolledToStates)}removeSideScrollListener(){this.scrollBox.current.removeEventListener("scroll",this.updateScrolledToStates)}render(){const{scrolledToStart:e,scrolledToEnd:t,hideScrollButtonsInitialized:n,hideScrollButtons:s}=this.state,{children:l,className:u,dataTest:r}=this.props,p=!n||s;return fe.createElement("div",{"data-test":r,className:"jsx-191575146 "+_t.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" "+(bn("scroll-bar",u)||"")},fe.createElement(uy,{disabled:e,onClick:this.scrollLeft,hidden:p},fe.createElement(hC,null)),fe.createElement("div",{className:"jsx-191575146 "+_t.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-box-clipper"},fe.createElement("div",{ref:this.scrollBox,className:"jsx-191575146 "+_t.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-box"},fe.createElement("div",{ref:this.scrollArea,className:"jsx-191575146 "+_t.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-area"},l))),fe.createElement(uy,{disabled:t,onClick:this.scrollRight,hidden:p},fe.createElement(fC,null)),fe.createElement(_t,{id:"4174900658",dynamic:[-this.horizontalScrollBarHeight]},[`.scroll-box.__jsx-style-dynamic-selector{margin-bottom:${-this.horizontalScrollBarHeight}px;}`]),fe.createElement(_t,{id:"191575146"},[".scroll-bar.jsx-191575146{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;}",".scroll-box-clipper.jsx-191575146{overflow-y:hidden;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".scroll-box.jsx-191575146{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;overflow-x:scroll;-webkit-overflow-scrolling:touch;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".scroll-box.jsx-191575146::-webkit-scrollbar{display:none;}",".scroll-area.jsx-191575146{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;overflow-x:hidden;}"]))}}SE.propTypes={children:Q.node.isRequired,dataTest:Q.string.isRequired,className:Q.string};const Nb=i=>{let{children:e,fixed:t,dataTest:n}=i;const s=$e.useRef(null),l=$e.useMemo(()=>fe.Children.map(e,()=>fe.createRef()),[e]),u=r=>{const p=document.activeElement;if(s.current&&s.current===p){l.length>0&&l[0].current&&l[0].current.focus();return}const f=l.findIndex(g=>g.current===p);if(f!==-1){if(r.key==="ArrowRight"){r.preventDefault();const g=(f+1)%l.length;l[g].current.focus()}if(r.key==="ArrowLeft"){r.preventDefault();const g=(f-1+l.length)%l.length;l[g].current.focus()}}};return fe.createElement("div",{ref:s,"data-test":n,role:"tablist",tabIndex:0,onKeyDown:u,className:_t.dynamic([["771129571",[Oe.grey400,Oe.white]]])+" "+(bn({fixed:t})||"")},fe.Children.map(e,(r,p)=>fe.isValidElement(r)?fe.cloneElement(r,{ref:l[p]}):fe.createElement("span",{ref:l[p],tabIndex:-1,className:_t.dynamic([["771129571",[Oe.grey400,Oe.white]]])},r)),fe.createElement(_t,{id:"771129571",dynamic:[Oe.grey400,Oe.white]},[`div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;position:relative;overflow:hidden;box-shadow:inset 0 -1px 0 0 ${Oe.grey400};-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;background:${Oe.white};}`]))};Nb.propTypes={dataTest:Q.string.isRequired,children:Q.node,fixed:Q.bool};const x1=i=>{let{fixed:e,children:t,className:n,scrollable:s,dataTest:l="dhis2-uicore-tabbar"}=i;return s?fe.createElement("div",{className:n,"data-test":l},fe.createElement(SE,{dataTest:`${l}-scrollbar`},fe.createElement(Nb,{fixed:e,dataTest:`${l}-tabs`},t))):fe.createElement("div",{className:n,"data-test":l},fe.createElement(Nb,{fixed:e,dataTest:`${l}-tabs`},t))};x1.propTypes={children:Q.node,className:Q.string,dataTest:Q.string,fixed:Q.bool,scrollable:Q.bool};var Tu=[],u6=function(){return Tu.some(function(i){return i.activeTargets.length>0})},d6=function(){return Tu.some(function(i){return i.skippedTargets.length>0})},x2="ResizeObserver loop completed with undelivered notifications.",h6=function(){var i;typeof ErrorEvent=="function"?i=new ErrorEvent("error",{message:x2}):(i=document.createEvent("Event"),i.initEvent("error",!1,!1),i.message=x2),window.dispatchEvent(i)},uf;(function(i){i.BORDER_BOX="border-box",i.CONTENT_BOX="content-box",i.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(uf||(uf={}));var Cu=function(i){return Object.freeze(i)},p6=function(){function i(e,t){this.inlineSize=e,this.blockSize=t,Cu(this)}return i}(),EE=function(){function i(e,t,n,s){return this.x=e,this.y=t,this.width=n,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Cu(this)}return i.prototype.toJSON=function(){var e=this,t=e.x,n=e.y,s=e.top,l=e.right,u=e.bottom,r=e.left,p=e.width,f=e.height;return{x:t,y:n,top:s,right:l,bottom:u,left:r,width:p,height:f}},i.fromRect=function(e){return new i(e.x,e.y,e.width,e.height)},i}(),b1=function(i){return i instanceof SVGElement&&"getBBox"in i},kE=function(i){if(b1(i)){var e=i.getBBox(),t=e.width,n=e.height;return!t&&!n}var s=i,l=s.offsetWidth,u=s.offsetHeight;return!(l||u||i.getClientRects().length)},b2=function(i){var e;if(i instanceof Element)return!0;var t=(e=i==null?void 0:i.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(t&&i instanceof t.Element)},f6=function(i){switch(i.tagName){case"INPUT":if(i.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Hp=typeof window<"u"?window:{},dg=new WeakMap,v2=/auto|scroll/,m6=/^tb|vertical/,g6=/msie|trident/i.test(Hp.navigator&&Hp.navigator.userAgent),Lo=function(i){return parseFloat(i||"0")},Zd=function(i,e,t){return i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=!1),new p6((t?e:i)||0,(t?i:e)||0)},_2=Cu({devicePixelContentBoxSize:Zd(),borderBoxSize:Zd(),contentBoxSize:Zd(),contentRect:new EE(0,0,0,0)}),AE=function(i,e){if(e===void 0&&(e=!1),dg.has(i)&&!e)return dg.get(i);if(kE(i))return dg.set(i,_2),_2;var t=getComputedStyle(i),n=b1(i)&&i.ownerSVGElement&&i.getBBox(),s=!g6&&t.boxSizing==="border-box",l=m6.test(t.writingMode||""),u=!n&&v2.test(t.overflowY||""),r=!n&&v2.test(t.overflowX||""),p=n?0:Lo(t.paddingTop),f=n?0:Lo(t.paddingRight),g=n?0:Lo(t.paddingBottom),b=n?0:Lo(t.paddingLeft),y=n?0:Lo(t.borderTopWidth),w=n?0:Lo(t.borderRightWidth),v=n?0:Lo(t.borderBottomWidth),T=n?0:Lo(t.borderLeftWidth),S=b+f,E=p+g,x=T+w,A=y+v,D=r?i.offsetHeight-A-i.clientHeight:0,C=u?i.offsetWidth-x-i.clientWidth:0,I=s?S+x:0,N=s?E+A:0,W=n?n.width:Lo(t.width)-I-C,Y=n?n.height:Lo(t.height)-N-D,X=W+S+C+x,O=Y+E+D+A,V=Cu({devicePixelContentBoxSize:Zd(Math.round(W*devicePixelRatio),Math.round(Y*devicePixelRatio),l),borderBoxSize:Zd(X,O,l),contentBoxSize:Zd(W,Y,l),contentRect:new EE(b,p,W,Y)});return dg.set(i,V),V},ME=function(i,e,t){var n=AE(i,t),s=n.borderBoxSize,l=n.contentBoxSize,u=n.devicePixelContentBoxSize;switch(e){case uf.DEVICE_PIXEL_CONTENT_BOX:return u;case uf.BORDER_BOX:return s;default:return l}},y6=function(){function i(e){var t=AE(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=Cu([t.borderBoxSize]),this.contentBoxSize=Cu([t.contentBoxSize]),this.devicePixelContentBoxSize=Cu([t.devicePixelContentBoxSize])}return i}(),PE=function(i){if(kE(i))return 1/0;for(var e=0,t=i.parentNode;t;)e+=1,t=t.parentNode;return e},x6=function(){var i=1/0,e=[];Tu.forEach(function(u){if(u.activeTargets.length!==0){var r=[];u.activeTargets.forEach(function(f){var g=new y6(f.target),b=PE(f.target);r.push(g),f.lastReportedSize=ME(f.target,f.observedBox),b<i&&(i=b)}),e.push(function(){u.callback.call(u.observer,r,u.observer)}),u.activeTargets.splice(0,u.activeTargets.length)}});for(var t=0,n=e;t<n.length;t++){var s=n[t];s()}return i},w2=function(i){Tu.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(s){s.isActive()&&(PE(s.target)>i?t.activeTargets.push(s):t.skippedTargets.push(s))})})},b6=function(){var i=0;for(w2(i);u6();)i=x6(),w2(i);return d6()&&h6(),i>0},L0,IE=[],v6=function(){return IE.splice(0).forEach(function(i){return i()})},_6=function(i){if(!L0){var e=0,t=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return v6()}).observe(t,n),L0=function(){t.textContent="".concat(e?e--:e++)}}IE.push(i),L0()},w6=function(i){_6(function(){requestAnimationFrame(i)})},jg=0,T6=function(){return!!jg},C6=250,S6={attributes:!0,characterData:!0,childList:!0,subtree:!0},T2=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],C2=function(i){return i===void 0&&(i=0),Date.now()+i},z0=!1,E6=function(){function i(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return i.prototype.run=function(e){var t=this;if(e===void 0&&(e=C6),!z0){z0=!0;var n=C2(e);w6(function(){var s=!1;try{s=b6()}finally{if(z0=!1,e=n-C2(),!T6())return;s?t.run(1e3):e>0?t.run(e):t.start()}})}},i.prototype.schedule=function(){this.stop(),this.run()},i.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,S6)};document.body?t():Hp.addEventListener("DOMContentLoaded",t)},i.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),T2.forEach(function(t){return Hp.addEventListener(t,e.listener,!0)}))},i.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),T2.forEach(function(t){return Hp.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},i}(),Ob=new E6,S2=function(i){!jg&&i>0&&Ob.start(),jg+=i,!jg&&Ob.stop()},k6=function(i){return!b1(i)&&!f6(i)&&getComputedStyle(i).display==="inline"},A6=function(){function i(e,t){this.target=e,this.observedBox=t||uf.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return i.prototype.isActive=function(){var e=ME(this.target,this.observedBox,!0);return k6(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},i}(),M6=function(){function i(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}return i}(),hg=new WeakMap,E2=function(i,e){for(var t=0;t<i.length;t+=1)if(i[t].target===e)return t;return-1},pg=function(){function i(){}return i.connect=function(e,t){var n=new M6(e,t);hg.set(e,n)},i.observe=function(e,t,n){var s=hg.get(e),l=s.observationTargets.length===0;E2(s.observationTargets,t)<0&&(l&&Tu.push(s),s.observationTargets.push(new A6(t,n&&n.box)),S2(1),Ob.schedule())},i.unobserve=function(e,t){var n=hg.get(e),s=E2(n.observationTargets,t),l=n.observationTargets.length===1;s>=0&&(l&&Tu.splice(Tu.indexOf(n),1),n.observationTargets.splice(s,1),S2(-1))},i.disconnect=function(e){var t=this,n=hg.get(e);n.observationTargets.slice().forEach(function(s){return t.unobserve(e,s.target)}),n.activeTargets.splice(0,n.activeTargets.length)},i}(),P6=function(){function i(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");pg.connect(this,e)}return i.prototype.observe=function(e,t){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!b2(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");pg.observe(this,e,t)},i.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!b2(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");pg.unobserve(this,e)},i.prototype.disconnect=function(){pg.disconnect(this)},i.toString=function(){return"function ResizeObserver () { [polyfill code] }"},i}();const DE=fe[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],I6=i=>{const e=$e.useRef(i);return $e.useEffect(()=>{e.current=i}),e},D6=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:P6;function R6(){}function L6(i,e){const t=N6(),n=I6(e);return DE(()=>{let s=!1;const l=i&&"current"in i?i.current:i;if(!l)return R6;function u(r,p){s||n.current(r,p)}return t.subscribe(l,u),()=>{s=!0,t.unsubscribe(l,u)}},[i,t,n]),t.observer}function z6(){let i=!1,e=[];const t=new Map,n=new D6((s,l)=>{e=e.concat(s);function u(){const r=new Set;for(let p=0;p<e.length;p++){if(r.has(e[p].target))continue;r.add(e[p].target);const f=t.get(e[p].target);f==null||f.forEach(g=>g(e[p],l))}e=[],i=!1}i||window.requestAnimationFrame(u),i=!0});return{observer:n,subscribe(s,l){var u;n.observe(s);const r=(u=t.get(s))!==null&&u!==void 0?u:[];r.push(l),t.set(s,r)},unsubscribe(s,l){var u;const r=(u=t.get(s))!==null&&u!==void 0?u:[];if(r.length===1){n.unobserve(s),t.delete(s);return}const p=r.indexOf(l);p!==-1&&r.splice(p,1),t.set(s,r)}}}let N0;const N6=()=>N0||(N0=z6()),O6=(i,e)=>{const[t,n]=$e.useState(()=>{var s,l;const u=i&&"current"in i?i.current:i;return u?[u.offsetWidth,u.offsetHeight]:[(s=void 0)!==null&&s!==void 0?s:0,(l=void 0)!==null&&l!==void 0?l:0]});return DE(()=>{const s=i&&"current"in i?i.current:i;s&&n([s.offsetWidth,s.offsetHeight])},[i]),L6(i,s=>{const l=s.target;n([l.offsetWidth,l.offsetHeight])}),t},RE=i=>{let{children:e,dataTest:t,maxHeight:n="280px",menuWidth:s,onClick:l,menuRef:u}=i;return fe.createElement(vv,{onBackdropClick:l,transparent:!0},fe.createElement(Pf,{reference:u,placement:"bottom",observeReferenceResize:!0},fe.createElement("div",{"data-test":`${t}-menuwrapper`,className:_t.dynamic([["1686499909",[s,n]]])+" card"},fe.createElement(If,null,e))),fe.createElement(_t,{id:"1686499909",dynamic:[s,n]},[`.card.__jsx-style-dynamic-selector{width:${s};max-height:${n};}`]))};RE.propTypes={dataTest:Q.string.isRequired,menuRef:Q.object.isRequired,menuWidth:Q.string.isRequired,children:Q.node,maxHeight:Q.string,onClick:Q.func};const LE=i=>{let{dataTest:e="dhis2-sharingdialog-autocomplete",inputWidth:t,label:n,loading:s,onClose:l,onSearch:u,onSelect:r,placeholder:p,search:f,searchResults:g}=i;const b=$e.useRef(null),[y]=O6(b),{isDisconnected:w}=Oy();return fe.createElement(fe.Fragment,null,fe.createElement("div",{ref:b},fe.createElement(Df,{label:n,loading:s,placeholder:p,onChange:v=>{let{value:T}=v;return u(T)},value:f,inputWidth:t,disabled:w,helpText:w?Qe.t("Not available offline"):""})),g.length>0&&fe.createElement(RE,{onClick:l,menuWidth:`${y}px`,menuRef:b,dataTest:`${e}-menu`},fe.createElement(Cv,null,g.map(v=>fe.createElement(Jp,{key:v.id,label:v.displayName,value:v.id,onClick:T=>{let{value:S}=T;return r(S)}})))))};LE.propTypes={searchResults:Q.arrayOf(Q.shape({displayName:Q.string,id:Q.string})).isRequired,dataTest:Q.string,inputWidth:Q.string,label:Q.string,loading:Q.bool,placeholder:Q.string,search:Q.string,onClose:Q.func,onSearch:Q.func,onSelect:Q.func};const j6={search:{resource:"sharing/search",params:i=>{let{search:e}=i;return{key:e}}}},zE=i=>{var e,t;let{selected:n,onSelection:s}=i;const[l,u]=$e.useState(""),[r,p]=$e.useState(!1),{data:f,refetch:g,fetching:b}=Aa(j6,{lazy:!0,onComplete:()=>p(!0)});$e.useEffect(()=>u(n),[n]);const y=$e.useCallback(hR(g,250),[g]);$e.useEffect(()=>{l&&l===n||(l?y({search:l}):(s(null),p(!1)))},[l]);let w=[];if(f!=null&&(e=f.search)!==null&&e!==void 0&&e.users){const v=f.search.users.map(T=>({...T,type:"user"}));w=w.concat(v)}if(f!=null&&(t=f.search)!==null&&t!==void 0&&t.userGroups){const v=f.search.userGroups.map(T=>({...T,type:"group"}));w=w.concat(v)}return fe.createElement(LE,{inputWidth:"100%",label:Qe.t("User or group"),loading:b,placeholder:Qe.t("Search"),search:l,searchResults:r?w:[],onClose:()=>p(!1),onSearch:u,onSelect:v=>{s(w.find(T=>T.id===v)),p(!1)}})};zE.propTypes={onSelection:Q.func.isRequired,selected:Q.string};const ax=i=>{let{children:e}=i;return fe.createElement(fe.Fragment,null,fe.createElement("h2",{className:_t.dynamic([["2416527184",[Oe.grey900]]])},e),fe.createElement(_t,{id:"2416527184",dynamic:[Oe.grey900]},[`h2.__jsx-style-dynamic-selector{font-size:16px;color:${Oe.grey900};}`]))};ax.propTypes={children:Q.node.isRequired};const jb=i=>{let{onAdd:e,dataSharing:t}=i;const n=$e.useContext(cy),[s,l]=$e.useState(null),[u,r]=$e.useState(""),[p,f]=$e.useState(""),{isDisconnected:g}=Oy(),b=v=>{v.preventDefault(),e({type:s.type,id:s.id,name:s.displayName||s.name,access:{data:u,metadata:p}}),l(null),r(""),f("")},y=[{value:Qn,label:Qe.t("View only")},{value:ar,label:Qe.t("View and edit")}],w=[...y,{value:vn,label:Qe.t("No access")}];return fe.createElement(fe.Fragment,null,fe.createElement(ax,null,Qe.t("Give access to a user or group")),fe.createElement("form",{onSubmit:b,className:_t.dynamic([["3476690250",[Oe.grey100,Oe.grey900,Gt.dp8]]])},fe.createElement("div",{className:_t.dynamic([["3476690250",[Oe.grey100,Oe.grey900,Gt.dp8]]])+" "+((t?"startWrapperData":"startWrapperMetadata")||"")},fe.createElement(zE,{selected:(s==null?void 0:s.displayName)||(s==null?void 0:s.name),onSelection:l})),fe.createElement("div",{className:_t.dynamic([["3476690250",[Oe.grey100,Oe.grey900,Gt.dp8]]])+" "+((t?"endWrapper endWrapperData":"endWrapper endWrapperMetadata")||"")},t&&fe.createElement("div",{className:_t.dynamic([["3476690250",[Oe.grey100,Oe.grey900,Gt.dp8]]])+" select-wrapper"},fe.createElement(hs,{label:Qe.t("Data access level"),placeholder:Qe.t("Choose a level"),disabled:g,selected:u,helpText:g?Qe.t("Not available offline"):"",onChange:v=>{let{selected:T}=v;return r(T)}},w.map(v=>{let{value:T,label:S}=v;return fe.createElement(_o,{key:T,label:S,value:T,active:T===u})}))),fe.createElement("div",{className:_t.dynamic([["3476690250",[Oe.grey100,Oe.grey900,Gt.dp8]]])+" select-wrapper"},fe.createElement(hs,{label:t?Qe.t("Metadata access level"):Qe.t("Access level"),placeholder:Qe.t("Choose a level"),disabled:g,selected:p,helpText:g?Qe.t("Not available offline"):"",onChange:v=>{let{selected:T}=v;return f(T)}},(t?w:y).map(v=>{let{value:T,label:S}=v;return fe.createElement(_o,{key:T,label:S,value:T,active:T===p})}))),fe.createElement(Jn,{type:"submit",disabled:g||n||!s||t&&!u||!p||u===vn&&p===vn},Qe.t("Give access")))),fe.createElement(_t,{id:"3476690250",dynamic:[Oe.grey100,Oe.grey900,Gt.dp8]},[`form.__jsx-style-dynamic-selector{background-color:${Oe.grey100};color:${Oe.grey900};margin-bottom:21px;padding:8px 12px;border-radius:5px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}`,".select-wrapper.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;}",".startWrapperData.__jsx-style-dynamic-selector{width:35%;}",".startWrapperMetadata.__jsx-style-dynamic-selector{width:55%;}",`.endWrapper.__jsx-style-dynamic-selector{margin-inline-start:8px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;gap:${Gt.dp8};}`,".endWrapperMetadata.__jsx-style-dynamic-selector{width:45%;}",".endWrapperData.__jsx-style-dynamic-selector{width:65%;}"]))};jb.propTypes={onAdd:Q.func.isRequired,dataSharing:Q.bool};const Fb=i=>{let{label:e,onClick:t}=i;return fe.createElement("div",{onClick:t,className:_t.dynamic([["1009072197",[Oe.red700,Gt.dp8,Gt.dp12,Oe.red050]]])},e,fe.createElement(_t,{id:"1009072197",dynamic:[Oe.red700,Gt.dp8,Gt.dp12,Oe.red050]},[`div.__jsx-style-dynamic-selector{cursor:pointer;font-size:14px;-webkit-text-decoration:none;text-decoration:none;color:${Oe.red700};padding:${Gt.dp8} ${Gt.dp12};}`,`div.__jsx-style-dynamic-selector:hover{background-color:${Oe.red050};}`]))};Fb.propTypes={label:Q.string.isRequired,onClick:Q.func.isRequired};const F6={[Fu]:Qe.t("Anyone logged in"),[yh]:Qe.t("User group"),[Bu]:Qe.t("User")},NE=i=>{var e;let{target:t,id:n}=i;return fe.createElement(fe.Fragment,null,fe.createElement("p",{className:_t.dynamic([["2525483302",[Oe.grey700]]])},t===Bu?n:(e=F6[t])!==null&&e!==void 0?e:""),fe.createElement(_t,{id:"2525483302",dynamic:[Oe.grey700]},[`p.__jsx-style-dynamic-selector{font-size:14px;color:${Oe.grey700};margin:6px 0 0 0;padding:0;}`]))};NE.propTypes={target:Q.oneOf([Fu,yh,Bu]).isRequired,id:Q.string};const OE=i=>{let{target:e,name:t}=i;switch(e){case y1:return fe.createElement(IC,{color:Oe.grey600});case Fu:case yh:return fe.createElement(AC,{color:Oe.grey600});case Bu:return fe.createElement(p5,{name:t,small:!0});default:return null}};OE.propTypes={target:Q.oneOf([y1,Fu,Bu,yh]).isRequired,name:Q.string};const k2=i=>{let{dataSharing:e,accessOtherField:t}=i;return e?t===vn:!0},Fg=i=>{let{name:e,id:t,target:n,access:s,accessOptions:l,disabled:u,onChange:r,onRemove:p,dataSharing:f,allUsersItem:g=!1}=i;const b=$e.useContext(cy),{isDisconnected:y}=Oy(),w={ACCESS_NONE:Qe.t("No access"),ACCESS_VIEW_ONLY:Qe.t("View only"),ACCESS_VIEW_AND_EDIT:Qe.t("View and edit")};return fe.createElement(fe.Fragment,null,fe.createElement("div",{className:_t.dynamic([["650548845",[Oe.grey900]]])+" wrapper"},fe.createElement("div",{className:_t.dynamic([["650548845",[Oe.grey900]]])+" "+((f?"detailsWithData":"detailsMetadata")||"")},fe.createElement(OE,{target:n,name:e}),fe.createElement("div",{className:_t.dynamic([["650548845",[Oe.grey900]]])+" details-text"},fe.createElement("p",{className:_t.dynamic([["650548845",[Oe.grey900]]])+" details-name"},e),fe.createElement(NE,{target:n,id:t}))),fe.createElement("div",{className:_t.dynamic([["650548845",[Oe.grey900]]])+" "+((f?"selectWrapperWithData":"selectWrapperMetadata")||"")},f&&fe.createElement("div",{className:_t.dynamic([["650548845",[Oe.grey900]]])+" select"},fe.createElement(hs,{disabled:u||y||b,prefix:Qe.t("Data"),selected:s.data,helpText:y?Qe.t("Not available offline"):"",onChange:v=>{let{selected:T}=v;return r({...s,data:T})}},l.map(v=>fe.createElement(_o,{key:v,label:w[v],value:v,active:v===s.data})),y2(n)&&k2({accessOtherField:s.metadata,dataSharing:f})&&fe.createElement(Fb,{onClick:p,label:Qe.t("Remove access")}))),fe.createElement("div",{className:_t.dynamic([["650548845",[Oe.grey900]]])+" select"},fe.createElement(hs,{disabled:u||y||b,prefix:Qe.t("Metadata"),selected:s.metadata,helpText:y?Qe.t("Not available offline"):"",onChange:v=>{let{selected:T}=v;return r({...s,metadata:T})}},l.map(v=>fe.createElement(_o,{key:v,label:w[v],value:v,active:v===s.metadata,disabled:!g&&v===vn&&!f})),y2(n)&&k2({accessOtherField:s.data,dataSharing:f})&&fe.createElement(Fb,{onClick:p,label:Qe.t("Remove access")}))))),fe.createElement(f5,null),fe.createElement(_t,{id:"650548845",dynamic:[Oe.grey900]},[".wrapper.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:4px 8px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".detailsMetadata.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:65%;}",".detailsWithData.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:35%;}",".details-text.__jsx-style-dynamic-selector{margin-inline-start:8px;}",`.details-name.__jsx-style-dynamic-selector{font-size:15px;font-weight:500;color:${Oe.grey900};margin:0;padding:0;}`,".selectWrapperMetadata.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:35%;}",".selectWrapperWithData.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:65%;}",".select.__jsx-style-dynamic-selector{margin-inline-start:8px;-webkit-flex:1;-ms-flex:1;flex:1;}"]))};Fg.propTypes={access:Q.shape({data:Q.oneOf([vn,Qn,ar]),metadata:Q.oneOf([vn,Qn,ar])}).isRequired,accessOptions:Q.arrayOf(Q.oneOf([vn,Qn,ar])).isRequired,dataSharing:Q.bool.isRequired,name:Q.string.isRequired,target:Q.oneOf([Fu,yh,Bu]).isRequired,onChange:Q.func.isRequired,allUsersItem:Q.bool,disabled:Q.bool,id:Q.string,onRemove:Q.func};const Bb=i=>{let{onChange:e,onRemove:t,publicAccess:n,allowPublicAccess:s,users:l,groups:u,dataSharing:r}=i;const p=[vn,Qn,ar];return fe.createElement(fe.Fragment,null,fe.createElement(ax,null,Qe.t("Users and groups that currently have access")),fe.createElement("div",{className:_t.dynamic([["3415079234",[Oe.grey200,Oe.grey900]]])+" header"},fe.createElement("div",{className:_t.dynamic([["3415079234",[Oe.grey200,Oe.grey900]]])+" "+((r?"header-start-column-data":"header-start-column-metadata")||"")},Qe.t("User / Group")),fe.createElement("div",{className:_t.dynamic([["3415079234",[Oe.grey200,Oe.grey900]]])+" "+((r?"header-end-column-data":"header-end-column-metadata")||"")},fe.createElement("span",{className:_t.dynamic([["3415079234",[Oe.grey200,Oe.grey900]]])+" hea"},Qe.t("Access level")))),fe.createElement("div",{className:_t.dynamic([["3415079234",[Oe.grey200,Oe.grey900]]])+" list"},fe.createElement(Fg,{name:Qe.t("All users"),target:Fu,access:n,accessOptions:p,disabled:!s,onChange:f=>e({type:"public",access:f}),dataSharing:r,allUsersItem:!0}),u.map(f=>{let{id:g,name:b,access:y}=f;return fe.createElement(Fg,{key:g,name:b,target:yh,access:y,accessOptions:p,onChange:w=>e({type:"group",id:g,access:w}),onRemove:()=>t({type:"group",id:g}),dataSharing:r})}),l.map(f=>{let{id:g,name:b,access:y}=f;return y&&fe.createElement(Fg,{key:g,id:g,name:b,target:Bu,access:y,accessOptions:p,onChange:w=>e({type:"user",id:g,access:w}),onRemove:()=>t({type:"user",id:g}),dataSharing:r})})),fe.createElement(_t,{id:"3415079234",dynamic:[Oe.grey200,Oe.grey900]},[`.header.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:10px 8px;margin:0 0 8px 0;background-color:${Oe.grey200};color:${Oe.grey900};font-size:13px;}`,".header-start-column-metadata.__jsx-style-dynamic-selector{width:65%;}",".header-end-column-metadata.__jsx-style-dynamic-selector{margin-inline-start:auto;width:35%;}",".header-start-column-data.__jsx-style-dynamic-selector{width:35%;}",".header-end-column-data.__jsx-style-dynamic-selector{margin-inline-start:auto;width:65%;}",".hea.__jsx-style-dynamic-selector{display:inline-block;margin-inline-start:8px;}",".list.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow-y:auto;}"]))};Bb.propTypes={allowPublicAccess:Q.bool.isRequired,dataSharing:Q.bool.isRequired,groups:Q.arrayOf(Q.shape({id:Q.string.isRequired,name:Q.string.isRequired,access:Q.shape({data:Q.oneOf([vn,Qn,ar]),metadata:Q.oneOf([vn,Qn,ar])})})).isRequired,publicAccess:Q.shape({data:Q.oneOf([vn,Qn,ar]),metadata:Q.oneOf([vn,Qn,ar])}).isRequired,users:Q.arrayOf(Q.shape({access:Q.shape({data:Q.oneOf([vn,Qn,ar]),metadata:Q.oneOf([vn,Qn,ar])}).isRequired,id:Q.string.isRequired,name:Q.string.isRequired})).isRequired,onChange:Q.func.isRequired,onRemove:Q.func.isRequired};const jE=i=>{if(i.length===0)return i.length;const e=["VISUALIZATION","MAP","EVENT_CHART","EVENT_REPORT"];return i.filter(t=>e.includes(t.type)).length},B6=i=>{let{itemsCount:e,visualizationsCount:t,hasErrors:n,updatedItems:s}=i;if(n){if(s===0)return Qe.t("No visualizations were updated. Check that you have permission to change sharing for all visualizations.");if(s&&e)return Qe.t("Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.",{success:s,failed:t-s})}return s===0?Qe.t("No visualizations were updated because sharing settings are already sufficient."):s===t?Qe.t("Successfully updated sharing for all visualizations."):s<t?Qe.t("Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.",{updated:s,skipped:t-s}):""},$6=i=>{let{entityAmount:e,visualizationsCount:t}=i;return e===0?Qe.t("There are no users or groups to apply sharing settings for."):Qe.t("Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.",{visualizationsCount:t,entityAmount:e,nsSeparator:">"})},FE=i=>{let{hasErrors:e,updatedItems:t,dashboardItems:n,itemsCount:s}=i;const l=jE(n);if(!l)return null;const u=B6({visualizationsCount:l,itemsCount:s,hasErrors:e,updatedItems:t});return fe.createElement(Ho,null,u)};FE.propTypes={dashboardItems:Q.array.isRequired,hasErrors:Q.bool.isRequired,itemsCount:Q.number.isRequired,updatedItems:Q.number.isRequired};const U6={dashboard:{resource:"dashboards",id:i=>{let{id:e}=i;return e},params:{fields:"dashboardItems[type]"}}},BE=i=>{let{id:e,entityAmount:t}=i;const{data:n,loading:s}=Aa(U6,{variables:{id:e}});if(s)return null;const{dashboard:l}=n,u=jE(l.dashboardItems);if(!u)return null;const r=$6({visualizationsCount:u,entityAmount:t});return fe.createElement(Ho,null,r)};BE.propTypes={entityAmount:Q.number.isRequired,id:Q.string.isRequired};const V6={dashboard:{resource:"dashboards",id:i=>{let{id:e}=i;return e},params:{fields:"dashboardItems[type]"}}},$E=i=>{var e;let{id:t,entityAmount:n}=i;const{isDisconnected:s}=Oy(),{data:l,refetch:u}=Aa(V6,{variables:{id:t}});$e.useEffect(()=>{u({id:t})},[u,t]);const r=uh(),[p,f]=$e.useState(!1),[g,b]=$e.useState(!1),[y,w]=$e.useState(null),[v,T]=$e.useState(null),S={resource:`dashboards/cascadeSharing/${t}`,type:"create"},E=()=>{f(!0),b(!0),T(null),w(null),r.mutate(S).then(D=>{T(D)}).catch(D=>{w(D.message||Qe.t("Something went wrong"))}).finally(()=>{b(!1)})},x=(v==null||(e=v.errorReports)===null||e===void 0?void 0:e.length)>0,A=v==null?void 0:v.countUpdatedDashboardItems;return fe.createElement(fe.Fragment,null,!p&&fe.createElement(BE,{id:t,entityAmount:n}),y&&fe.createElement($p,{marginTop:Gt.dp12},fe.createElement(Ho,{error:!0},y)),l&&v&&fe.createElement($p,{marginTop:Gt.dp12},fe.createElement(FE,{hasErrors:x,updatedItems:A,dashboardItems:l.dashboard.dashboardItems,itemsCount:l.dashboard.itemsCount})),fe.createElement($p,{marginTop:Gt.dp12},fe.createElement(Jn,{type:"button",disabled:s||g||!n,loading:g,secondary:!0,onClick:E},Qe.t("Apply sharing to dashboard visualizations"))))};$E.propTypes={entityAmount:Q.number.isRequired,id:Q.string.isRequired};const G6=()=>fe.createElement(fe.Fragment,null,fe.createElement("p",{className:_t.dynamic([["3321084332",[Oe.grey800]]])},Qe.t('Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).')),fe.createElement("p",{className:_t.dynamic([["3321084332",[Oe.grey800]]])},Qe.t(`If a user or group already has "View and edit" access to a visualization, this won't be reduced to "View only". The "All users" access level won't be updated or changed.`)),fe.createElement("p",{className:_t.dynamic([["3321084332",[Oe.grey800]]])},Qe.t("Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.")),fe.createElement(_t,{id:"3321084332",dynamic:[Oe.grey800]},[`p.__jsx-style-dynamic-selector{font-size:14px;line-height:19px;color:${Oe.grey800};}`])),UE=i=>{let{id:e,entityAmount:t}=i;return fe.createElement(fe.Fragment,null,fe.createElement(ax,null,Qe.t("Apply dashboard sharing settings to visualizations")),fe.createElement(G6,null),fe.createElement($E,{id:e,entityAmount:t}))};UE.propTypes={entityAmount:Q.number.isRequired,id:Q.string.isRequired};const $b=i=>{let{type:e,users:t,groups:n,publicAccess:s,allowPublicAccess:l,id:u,onAdd:r,onChange:p,onRemove:f,dataSharing:g}=i;const[b,y]=$e.useState(0);return e===wE.DASHBOARD?fe.createElement(fe.Fragment,null,fe.createElement(x1,null,fe.createElement(nh,{onClick:()=>y(0),selected:b===0},Qe.t("Dashboard sharing")),fe.createElement(nh,{onClick:()=>y(1),selected:b===1},Qe.t("Apply sharing to dashboard visualizations"))),fe.createElement("div",null,b===0&&fe.createElement(fe.Fragment,null,fe.createElement(jb,{onAdd:r,dataSharing:g}),fe.createElement(Bb,{users:t,groups:n,publicAccess:s,allowPublicAccess:l,onChange:p,onRemove:f,dataSharing:g})),b===1&&fe.createElement(UE,{id:u,entityAmount:t.length+n.length}))):fe.createElement(fe.Fragment,null,fe.createElement(jb,{onAdd:r,dataSharing:g}),fe.createElement(Bb,{users:t,groups:n,publicAccess:s,allowPublicAccess:l,onChange:p,onRemove:f,dataSharing:g}))};$b.propTypes={allowPublicAccess:Q.bool.isRequired,dataSharing:Q.bool.isRequired,groups:Q.arrayOf(Q.shape({access:Q.shape({data:Q.oneOf([vn,Qn,ar]),metadata:Q.oneOf([vn,Qn,ar])}).isRequired,id:Q.string.isRequired,name:Q.string.isRequired})).isRequired,id:Q.string.isRequired,publicAccess:Q.shape({data:Q.oneOf([vn,Qn,ar]),metadata:Q.oneOf([vn,Qn,ar])}).isRequired,type:Q.oneOf(TE).isRequired,users:Q.arrayOf(Q.shape({access:Q.shape({data:Q.oneOf([vn,Qn,ar]),metadata:Q.oneOf([vn,Qn,ar])}).isRequired,id:Q.string.isRequired,name:Q.string.isRequired})).isRequired,onAdd:Q.func.isRequired,onChange:Q.func.isRequired,onRemove:Q.func.isRequired};const H6={sharing:{resource:"sharing",params:i=>{let{type:e,id:t}=i;return{type:e,id:t}}}},q6={resource:"sharing",params:i=>{let{type:e,id:t}=i;return{type:e,id:t}},type:"update",data:i=>{let{data:e}=i;return e}},O0=()=>{},W6={name:"",allowPublic:!0,public:{data:vn,metadata:vn},groups:[],users:[]},Y6=i=>{const e={...i};return i.public&&typeof i.public=="string"&&(e.public={data:vn,metadata:i.public}),e.groups=i.groups.map(t=>t.access&&typeof t.access=="string"?{...t,access:{data:vn,metadata:t.access}}:t),e.users=i.users.map(t=>t.access&&typeof t.access=="string"?{...t,access:{data:vn,metadata:t.access}}:t),e},VE=i=>{let{id:e,type:t,onClose:n=O0,onError:s=O0,onSave:l=O0,initialSharingSettings:u=W6,dataTest:r="dhis2-uicore-sharingdialog",dataSharing:p=!1}=i;const{show:f}=ef(Y=>Y,{critical:!0}),g=Y6(u),{data:b,refetch:y,loading:w,fetching:v}=Aa(H6,{variables:{id:e,type:t},onError:Y=>{f(Y),s(Y)}}),[T,{loading:S}]=nE(q6,{variables:{type:t,id:e},onError:Y=>{f(Y),s(Y),y()},onComplete:()=>{y(),l()}});if($e.useEffect(()=>{y({type:t,id:e})},[t,e]),w){const Y=Object.keys(u.users).map(cg),X=Object.keys(u.groups).map(cg);return fe.createElement(cy.Provider,{value:!0},fe.createElement(Rb,{onClose:n},fe.createElement($b,{id:e,users:Y,groups:X,publicAccess:g.public,allowPublicAccess:g.allowPublic,type:t,onAdd:()=>{},onChange:()=>{},onRemove:()=>{},dataSharing:p})))}const{object:E,meta:x}=b.sharing,A=CE(E.publicAccess),D=E.userAccesses.map(cg),C=E.userGroupAccesses.map(cg),I=Y=>{let{type:X,id:O,access:V,name:$}=Y;const L=mR({object:E,type:X,access:V,id:O,name:$});T({data:L,type:t,id:e})},N=Y=>{let{type:X,id:O,access:V}=Y;const $=fR({object:E,type:X,access:V,id:O});T({data:$,type:t,id:e})},W=Y=>{let{type:X,id:O}=Y;const V=gR({object:E,type:X,id:O});T({data:V,type:t,id:e})};return fe.createElement(cy.Provider,{value:S||v},fe.createElement(Rb,{onClose:n,name:E.displayName||E.name,dataTest:r},fe.createElement($b,{id:e,users:D,groups:C,publicAccess:A,allowPublicAccess:x.allowPublicAccess,type:t,onAdd:I,onChange:N,onRemove:W,dataSharing:p})))};VE.propTypes={id:Q.string.isRequired,type:Q.oneOf(TE).isRequired,dataSharing:Q.bool,dataTest:Q.string,initialSharingSettings:Q.shape({allowPublic:Q.bool.isRequired,groups:Q.objectOf(Q.shape({id:Q.string.isRequired,name:Q.string.isRequired,access:Q.oneOfType([Q.shape({data:Q.oneOf([vn,Qn,ar]),metadata:Q.oneOf([vn,Qn,ar])}),Q.oneOf([vn,Qn,ar])])})),name:Q.string,public:Q.oneOfType([Q.shape({data:Q.oneOf([vn,Qn,ar]),metadata:Q.oneOf([vn,Qn,ar])}),Q.oneOf([vn,Qn,ar])]),users:Q.objectOf(Q.shape({id:Q.string.isRequired,name:Q.string.isRequired,access:Q.oneOfType([Q.shape({data:Q.oneOf([vn,Qn,ar]),metadata:Q.oneOf([vn,Qn,ar])}),Q.oneOf([vn,Qn,ar])])}))}),onClose:Q.func,onError:Q.func,onSave:Q.func};function Ub(){return Ub=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Ub.apply(null,arguments)}const v1=$e.forwardRef((i,e)=>{let{children:t,className:n,dataTest:s="dhis2-uicore-table",layout:l="auto",role:u,borderless:r,width:p="100%",...f}=i;return fe.createElement("table",Ub({},f,{"data-test":s,ref:e,role:u,className:_t.dynamic([["3140496910",[l,p,Oe.grey300]]])+" "+(bn(n,{borderless:r})||"")}),t,fe.createElement(_t,{id:"3140496910",dynamic:[l,p,Oe.grey300]},[`table.__jsx-style-dynamic-selector{table-layout:${l};border-collapse:separate;border-spacing:0;width:${p};box-sizing:border-box;border:1px solid ${Oe.grey300};}`,"table.borderless.__jsx-style-dynamic-selector{border:none;}"]))});v1.displayName="Table";v1.propTypes={borderless:Q.bool,children:Q.node,className:Q.string,dataTest:Q.string,layout:Q.oneOf(["auto","fixed","initial","inherit"]),role:Q.string,width:Q.string};function Vb(){return Vb=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Vb.apply(null,arguments)}const _1=$e.forwardRef((i,e)=>{let{children:t,className:n,dataTest:s="dhis2-uicore-tablebody",role:l,loading:u,...r}=i;return fe.createElement("tbody",Vb({},r,{"data-test":s,ref:e,role:l,className:_t.dynamic([["2478922139",[Oe.blue600]]])+" "+(bn(n,{loading:u})||"")}),t,fe.createElement(_t,{id:"2478922139",dynamic:[Oe.blue600]},["tbody.__jsx-style-dynamic-selector{position:relative;}",".loading.__jsx-style-dynamic-selector:before{content:'';position:absolute;top:0;bottom:0;inset-inline-start:0;inset-inline-end:0;background-color:rgba(255,255,255,0.8);}",`.loading.__jsx-style-dynamic-selector:after{content:'';position:absolute;top:calc(50% - 24px);inset-inline-start:calc(50% - 24px);width:48px;height:48px;border:6px solid rgba(110,122,138,0.15);border-bottom-color:${Oe.blue600};border-radius:50%;-webkit-animation:rotation-__jsx-style-dynamic-selector 1s linear infinite;animation:rotation-__jsx-style-dynamic-selector 1s linear infinite;}`,"@-webkit-keyframes rotation-__jsx-style-dynamic-selector{0%{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}","@keyframes rotation-__jsx-style-dynamic-selector{0%{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}"]))});_1.displayName="TableBody";_1.propTypes={children:Q.node,className:Q.string,dataTest:Q.string,loading:Q.bool,role:Q.string};const Bg=[`td.jsx-533878895{padding:14px 12px;font-size:14px;border:1px solid transparant;border-bottom:1px solid ${Oe.grey300};color:${Oe.grey900};}`,`td.active.jsx-533878895{outline:2px solid ${Oe.grey600};outline-offset:-2px;}`,`td.bordered.jsx-533878895{border-inline-end:1px solid ${Oe.grey300};}`,"td.bordered.jsx-533878895:last-child{border-inline-end:1px solid transparent;}",`td.error.jsx-533878895{color:${Oe.red700};}`,`td.muted.jsx-533878895{color:${Oe.grey700};font-style:italic;}`,`td.valid.jsx-533878895{color:${Oe.green700};}`,"td.large.jsx-533878895{padding:20px 12px;font-size:16px;}","tr:last-child td.jsx-533878895{border-bottom:1px solid transparent;}",`tfoot tr:first-child td.jsx-533878895{border-top:1px solid ${Oe.grey300};}`];Bg.__hash="533878895";function Gb(){return Gb=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Gb.apply(null,arguments)}const Z6={left:"right",right:"left",center:"center"},xh=$e.forwardRef((i,e)=>{var t;let{active:n,align:s="left",backgroundColor:l,bordered:u,children:r,className:p,colSpan:f,dataTest:g="dhis2-uicore-tabledatacel",error:b,large:y,left:w="auto",muted:v,role:T,rowSpan:S,scope:E,staticStyle:x,valid:A,width:D="auto",onClick:C,...I}=i;const N=(t=Z6[s])!==null&&t!==void 0?t:s;return fe.createElement("td",Gb({},I,{ref:e,colSpan:f,rowSpan:S,onClick:C,"data-test":g,role:T,scope:E,className:`jsx-${Bg.__hash} `+_t.dynamic([["836058623",[w,s,D,l||Oe.white,N,l||Oe.teal100,l||Oe.grey100,l||Oe.grey200,l||"#cdeae8"]]])+" "+(bn(p,{active:n,bordered:u,error:b,large:y,muted:v,staticStyle:x,valid:A})||"")}),r,fe.createElement(_t,{id:Bg.__hash},Bg),fe.createElement(_t,{id:"836058623",dynamic:[w,s,D,l||Oe.white,N,l||Oe.teal100,l||Oe.grey100,l||Oe.grey200,l||"#cdeae8"]},[`td.__jsx-style-dynamic-selector{inset-inline-start:${w};text-align:${s};width:${D};background-color:${l||Oe.white};}`,`.__jsx-style-dynamic-selector:dir(rtl){text-align:${N};}`,`tr.selected>td.__jsx-style-dynamic-selector{background-color:${l||Oe.teal100};}`,`tr:hover>td.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${l||Oe.grey100};}`,`tr:active>td.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${l||Oe.grey200};}`,`tr.selected:hover>td.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${l||"#cdeae8"};}`]))});xh.displayName="TableDataCell";const j0=Ly(["valid","error","muted"],Q.bool);xh.propTypes={active:Q.bool,align:Q.oneOf(["left","center","right"]),backgroundColor:Q.string,bordered:Q.bool,children:Q.node,className:Q.string,colSpan:Q.string,dataTest:Q.string,error:j0,large:Q.bool,left:Rr(i=>i.fixed,Q.string),muted:j0,role:Q.string,rowSpan:Q.string,scope:Q.string,staticStyle:Q.bool,valid:j0,width:Q.string,onClick:Q.func};const $g=[`th.jsx-2895298632{padding:12px;border:1px solid transparant;border-bottom:1px solid ${Oe.grey300};color:${Oe.grey800};font-weight:normal;font-size:14px;vertical-align:top;}`,"thead th.jsx-2895298632{padding:8px 12px;font-size:13px;}",`th.jsx-2895298632:last-of-type{border-inline-end:1px solid ${Oe.grey300};}`,`th.active.jsx-2895298632{outline:2px solid ${Oe.grey600};outline-offset:-2px;}`,`th.bordered.jsx-2895298632{border-inline-end:1px solid ${Oe.grey300};}`,"th.bordered.jsx-2895298632:last-child{border-inline-end:1px solid transparent;}",`th.error.jsx-2895298632{color:${Oe.red700};}`,`th.muted.jsx-2895298632{color:${Oe.grey700};font-style:italic;}`,`th.valid.jsx-2895298632{color:${Oe.green700};}`,"th.large.jsx-2895298632{padding:14px 12px;font-size:16px;}","thead th.large.jsx-2895298632{padding:13px 12px;font-size:15px;}","th.fixed.jsx-2895298632{position:-webkit-sticky;position:sticky;z-index:1;}","thead th.fixed.jsx-2895298632{position:-webkit-sticky;position:sticky;z-index:2;}","thead th.fixedHorizontally.jsx-2895298632{z-index:3;}","tr:last-child th.jsx-2895298632{border-bottom:1px solid transparent;}",`thead tr:last-child th.jsx-2895298632{border-bottom:1px solid ${Oe.grey300};}`,`tfoot>tr:first-child th.jsx-2895298632{border-top:1px solid ${Oe.grey300};}`];$g.__hash="2895298632";function Hb(){return Hb=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Hb.apply(null,arguments)}const fg="auto",ox=$e.forwardRef((i,e)=>{let{active:t,align:n="left",backgroundColor:s,bordered:l,children:u,className:r,colSpan:p,dataTest:f="dhis2-uicore-tablecell",error:g,fixed:b,large:y,left:w=fg,muted:v,rowSpan:T,role:S,scope:E,staticStyle:x,top:A=fg,valid:D,width:C=fg,onClick:I,...N}=i;return fe.createElement("th",Hb({},N,{ref:e,colSpan:p,rowSpan:T,onClick:I,"data-test":f,role:S,scope:E,className:`jsx-${$g.__hash} `+_t.dynamic([["2588011372",[w,A,n,C,s||Oe.grey200,s||Oe.grey300,s||Oe.grey300,s||Oe.grey200]]])+" "+(bn(r,{active:t,bordered:l,error:g,fixed:b,fixedHorizontally:b&&w!==fg,large:y,muted:v,staticStyle:x,valid:D})||"")}),u,fe.createElement(_t,{id:$g.__hash},$g),fe.createElement(_t,{id:"2588011372",dynamic:[w,A,n,C,s||Oe.grey200,s||Oe.grey300,s||Oe.grey300,s||Oe.grey200]},[`th.__jsx-style-dynamic-selector{inset-inline-start:${w};top:${A};text-align:${n};width:${C};background-color:${s||Oe.grey200};}`,`thead th.fixedHorizontally.__jsx-style-dynamic-selector{background-color:${s||Oe.grey300};}`,`tbody>tr:hover>th.__jsx-style-dynamic-selector:not(.staticStyle),tfoot>tr:hover>th.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${s||Oe.grey300};}`,`tbody>tr:active>th.__jsx-style-dynamic-selector:not(.staticStyle){background-color:${s||Oe.grey200};}`]))});ox.displayName="TableHeaderCell";const F0=Ly(["valid","error","muted"],Q.bool);ox.propTypes={active:Q.bool,align:Q.oneOf(["left","center","right"]),backgroundColor:Q.string,bordered:Q.bool,children:Q.node,className:Q.string,colSpan:Q.string,dataTest:Q.string,error:F0,fixed:Q.bool,large:Q.bool,left:Rr(i=>i.fixed&&!i.top,Q.string),muted:F0,role:Q.string,rowSpan:Q.string,scope:Q.string,staticStyle:Q.bool,top:Rr(i=>i.fixed&&!i.left,Q.string),valid:F0,width:Q.string,onClick:Q.func};function qb(){return qb=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},qb.apply(null,arguments)}const lx=$e.forwardRef((i,e)=>{let{onClick:t,children:n,className:s,dataTest:l="dhis2-uicore-tableheadercellaction",title:u,...r}=i;return fe.createElement("button",qb({},r,{"data-test":l,onClick:t,title:u,ref:e,className:_t.dynamic([["4225768774",[Oe.grey400]]])+" "+(s||"")}),n,fe.createElement(_t,{id:"4225768774",dynamic:[Oe.grey400]},["button.__jsx-style-dynamic-selector{border:none;padding:0;background:transparent;width:24px;height:24px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;cursor:pointer;border-radius:4px;margin-inline-start:2px;}",`button.__jsx-style-dynamic-selector:hover,button.__jsx-style-dynamic-selector:focus-visible{background:${Oe.grey400};}`,"button.__jsx-style-dynamic-selector:active,button.__jsx-style-dynamic-selector:focus{outline:none;}"]))});lx.displayName="TableHeaderCellAction";lx.propTypes={children:Q.node,className:Q.string,dataTest:Q.string,title:Q.string,onClick:Q.func};function Wb(){return Wb=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Wb.apply(null,arguments)}const w1=$e.forwardRef((i,e)=>{let{children:t,className:n,dataTest:s,role:l,...u}=i;return fe.createElement("thead",Wb({},u,{className:n,"data-test":s,ref:e,role:l}),t)});w1.displayName="TableHead";w1.propTypes={children:Q.node,className:Q.string,dataTest:Q.string,role:Q.string};function Yb(){return Yb=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Yb.apply(null,arguments)}const cx=$e.forwardRef((i,e)=>{let{children:t,className:n,dataTest:s="dhis2-uicore-tablerow",draggable:l,role:u,selected:r,...p}=i;return fe.createElement("tr",Yb({},p,{ref:e,"data-test":s,role:u,className:"jsx-1820444258 "+(bn(n,{selected:r,draggable:l})||"")}),t,fe.createElement(_t,{id:"1820444258"},["tbody>tr.draggable.jsx-1820444258,tfoot>tr.draggable.jsx-1820444258{cursor:move;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}"]))});cx.displayName="TableRow";cx.propTypes={children:Q.node,className:Q.string,dataTest:Q.string,draggable:Q.bool,role:Q.string,selected:Q.bool};function Zb(){return Zb=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Zb.apply(null,arguments)}const T1=$e.forwardRef((i,e)=>{let{children:t,className:n,dataTest:s="dhis2-uicore-tablescrollbox",maxHeight:l="auto",maxWidth:u="auto",...r}=i;return fe.createElement("div",Zb({},r,{"data-test":s,ref:e,className:_t.dynamic([["2859562182",[Oe.grey300,l,u]]])+" "+(n||"")}),t,fe.createElement(_t,{id:"2859562182",dynamic:[Oe.grey300,l,u]},[`div.__jsx-style-dynamic-selector{border:1px solid ${Oe.grey300};border-top:none;box-sizing:border-box;max-height:${l};max-width:${u};overflow:auto;}`]))});T1.displayName="TableScrollBox";T1.propTypes={children:Q.node,className:Q.string,dataTest:Q.string,maxHeight:Q.string,maxWidth:Q.string};const C1=$e.forwardRef((i,e)=>{let{children:t,className:n,dataTest:s="dhis2-uicore-datatable",layout:l="auto",role:u,scrollHeight:r,scrollWidth:p,width:f="100%"}=i;const g=!!(r||p),b=fe.createElement(v1,{borderless:g,className:n,dataTest:s,layout:l,ref:e,role:u,width:f},t);return g?fe.createElement(T1,{className:bn(n,"tablescrollbox"),dataTest:`${s}-scrollbox`,maxHeight:r,maxWidth:p},b):b});C1.displayName="DataTable";C1.propTypes={children:Q.node,className:Q.string,dataTest:Q.string,layout:Q.oneOf(["auto","fixed","initial","inherit"]),role:Q.string,scrollHeight:Q.string,scrollWidth:Q.string,width:Q.string};function Xb(){return Xb=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Xb.apply(null,arguments)}const dy=$e.forwardRef((i,e)=>{let{active:t,align:n="left",backgroundColor:s,bordered:l,children:u,className:r,colSpan:p,dataTest:f="dhis2-uicore-datatablecell",error:g,fixed:b,large:y,left:w="auto",muted:v,rowSpan:T,role:S,scope:E,staticStyle:x,tag:A,valid:D,width:C="auto",onClick:I,...N}=i;const W=!A&&b||A&&A==="th"?ox:xh;return fe.createElement(W,Xb({},N,{active:t,align:n,backgroundColor:s,bordered:l,className:r,colSpan:p,dataTest:f,error:g,fixed:b,large:y,left:w,muted:v,rowSpan:T,ref:e,role:S,staticStyle:x,scope:E,valid:D,width:C,onClick:I}),u)});dy.displayName="DataTableCell";const B0=Ly(["valid","error","muted"],Q.bool),A2=Rr(i=>i.fixed,Q.string);dy.propTypes={active:Q.bool,align:Q.oneOf(["left","center","right"]),backgroundColor:Q.string,bordered:Q.bool,children:Q.node,className:Q.string,colSpan:Q.string,dataTest:Q.string,error:B0,fixed:Q.bool,large:Q.bool,left:A2,muted:B0,role:Q.string,rowSpan:Q.string,scope:Q.string,staticStyle:Q.bool,tag:Q.oneOf(["td","th"]),valid:B0,width:A2,onClick:Q.func};const Vd=["span.container.jsx-1552921066{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}","span.top.jsx-1552921066{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}","span.content.jsx-1552921066{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:24px;}"];Vd.__hash="1552921066";const M2={styles:fe.createElement(_t,{id:"1231353820"},["thead>tr>th.DataTableColumnHeader.jsx-1231353820{padding-top:6px;padding-bottom:6px;}","thead>tr>th.DataTableColumnHeader.large.jsx-1231353820{padding-top:12px;padding-bottom:12px;}"]),className:"jsx-1231353820"},X6={"Toggle filter":"","Sort items":" "},K6={"Toggle filter":"Pepnout filtr","Sort items":"Tdit poloky"},Q6={"Toggle filter":"Toggle filter","Sort items":"Sort items"},J6={"Toggle filter":"Alternar filtro","Sort items":"Ordena elementos"},eN={"Toggle filter":"Alternar filtro","Sort items":"Clasificar artculos"},tN={"Toggle filter":"","Sort items":""},iN={"Toggle filter":"","Sort items":""},nN={"Toggle filter":"Sl p filter","Sort items":"Sorter elementer"},rN={"Toggle filter":"Schakelfilter","Sort items":"Items sorteren"},sN={"Toggle filter":" ","Sort items":" "},aN={"Toggle filter":" ","Sort items":" '"},oN={"Toggle filter":" ","Sort items":" "},lN={"Toggle filter":"","Sort items":""},Za="default";Qe.addResources("ar",Za,X6);Qe.addResources("cs",Za,K6);Qe.addResources("en",Za,Q6);Qe.addResources("es",Za,J6);Qe.addResources("es_419",Za,eN);Qe.addResources("km",Za,tN);Qe.addResources("lo",Za,iN);Qe.addResources("nb",Za,nN);Qe.addResources("nl",Za,rN);Qe.addResources("ru",Za,sN);Qe.addResources("uk",Za,aN);Qe.addResources("uz_UZ_Cyrl",Za,oN);Qe.addResources("zh",Za,lN);const GE=i=>{let{active:e,name:t,onClick:n}=i;const s=e?Oe.blue700:Oe.grey600,l=n?u=>{n({name:t,show:!e},u)}:void 0;return fe.createElement(lx,{onClick:l,title:Qe.t("Toggle filter")},fe.createElement(EC,{color:s}))};GE.propTypes={active:Q.bool,name:Q.string,onClick:Q.func};const cN="asc",uN="desc",dN="default",qp=[dN,cN,uN],hN=i=>{const t=(qp.indexOf(i)+1)%qp.length;return qp[t]},HE=i=>{let{name:e,sortDirection:t,title:n,onClick:s}=i;const l=hN(t),u=s?r=>{s({name:e,direction:l},r)}:void 0;return fe.createElement(lx,{onClick:u,title:n||Qe.t("Sort items")},fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",className:_t.dynamic([["884818973",[Oe.grey500,Oe.blue700]]])+" "+(t||"")},fe.createElement("g",{fill:"none",fillRule:"evenodd",className:_t.dynamic([["884818973",[Oe.grey500,Oe.blue700]]])},fe.createElement("polygon",{points:"4 9 12 9 8 14",className:_t.dynamic([["884818973",[Oe.grey500,Oe.blue700]]])+" top"}),fe.createElement("polygon",{points:"4 7 12 7 8 2",className:_t.dynamic([["884818973",[Oe.grey500,Oe.blue700]]])+" bottom"}))),fe.createElement(_t,{id:"884818973",dynamic:[Oe.grey500,Oe.blue700]},[`svg.__jsx-style-dynamic-selector .top.__jsx-style-dynamic-selector,svg.__jsx-style-dynamic-selector .bottom.__jsx-style-dynamic-selector{fill:${Oe.grey500};}`,`svg.asc.__jsx-style-dynamic-selector .top.__jsx-style-dynamic-selector,svg.desc.__jsx-style-dynamic-selector .bottom.__jsx-style-dynamic-selector{fill:${Oe.blue700};}`]))};HE.propTypes={name:Q.string,sortDirection:Rr(i=>i.onClick,Q.oneOf(qp)),title:Q.string,onClick:Q.func};const mg={left:"flex-start",center:"center",right:"flex-end"},S1=$e.forwardRef((i,e)=>{let{align:t,children:n,className:s,colSpan:l,dataTest:u="dhis2-uicore-datatablecellhead",filter:r,fixed:p,large:f,left:g,name:b,role:y,rowSpan:w,scope:v,showFilter:T,sortDirection:S,sortIconTitle:E,top:x,width:A,onFilterIconClick:D,onSortIconClick:C}=i;return fe.createElement(ox,{align:t,className:bn(s,"DataTableColumnHeader",M2.className),colSpan:l,dataTest:u,fixed:p,large:f,left:g,ref:e,rowSpan:w,role:y,scope:v,top:x,width:A},fe.createElement("span",{className:`jsx-3463223249 jsx-${Vd.__hash} container`},fe.createElement("span",{className:`jsx-3463223249 jsx-${Vd.__hash} `+(bn("top",{large:f})||"")},fe.createElement("span",{className:`jsx-3463223249 jsx-${Vd.__hash} content`},n),S&&fe.createElement(HE,{name:b,sortDirection:S,onClick:C,title:E}),r&&fe.createElement(GE,{name:b,active:T,onClick:D})),T&&r),M2.styles,fe.createElement(_t,{id:Vd.__hash},Vd),fe.createElement(_t,{id:"3463223249"},[`.label.jsx-3463223249{-webkit-box-pack:${mg[t]};-webkit-justify-content:${mg[t]};-ms-flex-pack:${mg[t]};justify-content:${mg[t]};}`]))});S1.displayName="DataTableColumnHeader";S1.propTypes={align:Q.oneOf(["left","center","right"]),children:Q.node,className:Q.string,colSpan:Q.string,dataTest:Q.string,filter:Rr(i=>i.onFilterIconClick||i.showFilter,Q.node),fixed:Q.bool,large:Q.bool,left:Rr(i=>i.fixed&&!i.top,Q.string),name:Q.string,role:Q.string,rowSpan:Q.string,scope:Q.string,showFilter:Rr(i=>i.filter,Q.bool),sortDirection:Rr(i=>i.onSortIconClick,Q.oneOf(qp)),sortIconTitle:Q.string,top:Rr(i=>i.fixed&&!i.left,Q.string),width:Q.string,onFilterIconClick:Rr(i=>i.filter,Q.func),onSortIconClick:Rr(i=>i.sortDirection,Q.func)};const P2={styles:fe.createElement(_t,{id:"1795567040"},[`tr.isHoveringExpandedContent.jsx-1795567040>td{background-color:${Oe.grey100};}`,`tr.isHoveringExpandedContent.jsx-1795567040>th{background-color:${Oe.grey300};}`,"tr.selected.isHoveringExpandedContent.jsx-1795567040>td{background-color:#cdeae8;}","tr.expanded.jsx-1795567040>td{border-bottom-color:transparent;}",`tr.expanded.jsx-1795567040>td.bordered{border-bottom-color:${Oe.grey300};}`]),className:"jsx-1795567040"},pN=()=>fe.createElement(xh,{width:"48px"},fe.createElement(vC,null)),I2={styles:fe.createElement(_t,{id:"927553068"},["td.jsx-927553068{cursor:pointer;}"]),className:"jsx-927553068"},qE=i=>{let{expanded:e,onClick:t}=i;return fe.createElement(xh,{className:bn(I2.className,{expanded:e}),onClick:()=>t({expanded:!e}),width:"48px"},e?fe.createElement(gC,null):fe.createElement(dC,null),I2.styles)};qE.propTypes={expanded:Q.bool,onClick:Q.func};const{className:fN,styles:mN}={styles:fe.createElement(_t,{id:"626485122"},[`tr.expanded:hover+tr>td.jsx-626485122{background-color:${Oe.grey100};}`,`tr.expanded:active+tr>td.jsx-626485122{background-color:${Oe.grey200};}`,"tr.selected.expanded:hover+tr.jsx-626485122>td.jsx-626485122{background-color:#cdeae8;}"]),className:"jsx-626485122"},WE=i=>{let{children:e,className:t,colSpan:n,dataTest:s,selected:l,setIsHoveringExpandedContent:u}=i;return fe.createElement(cx,{onMouseOver:()=>u(!0),onMouseOut:()=>u(!1),className:bn({[`${t}-expandedrow`]:!!t}),selected:l,dataTest:s&&`${s}-expandedrow`},fe.createElement(xh,{className:fN,colSpan:n},e,mN))};WE.propTypes={children:Q.node,className:Q.string,colSpan:Q.string,dataTest:Q.string,selected:Q.bool,setIsHoveringExpandedContent:Q.func};function Kb(){return Kb=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Kb.apply(null,arguments)}const Wp=$e.forwardRef((i,e)=>{let{children:t,className:n,dataTest:s="dhis2-uicore-datatablerow",expandableContent:l,expanded:u,selected:r,draggable:p,role:f,onExpandToggle:g,...b}=i;const[y,w]=$e.useState(!1),v=bn(n,P2.className,{expanded:u,selected:r,draggable:p,isHoveringExpandedContent:y}),T=fe.Children.count(t),S=String(p||l?T+1:T);return fe.createElement(fe.Fragment,null,fe.createElement(cx,Kb({ref:e,className:v,dataTest:s,selected:r,draggable:p,role:f},b),p&&fe.createElement(pN,null),l&&fe.createElement(qE,{expanded:u,onClick:g}),t,P2.styles),l&&u&&fe.createElement(WE,{className:n,dataTest:s,setIsHoveringExpandedContent:w,colSpan:S,selected:r},l))});Wp.displayName="DataTableRow";Wp.propTypes={children:Q.node,className:Q.string,dataTest:Q.string,draggable:Q.bool,expandableContent:Rr(i=>i.onExpandToggle,Q.node),expanded:Q.bool,role:Q.string,selected:Q.bool,onExpandToggle:Rr(i=>i.expandableContent,Q.func)};var E1={};Object.defineProperty(E1,"__esModule",{value:!0});E1.parse=wN;E1.serialize=TN;const gN=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,yN=/^[\u0021-\u003A\u003C-\u007E]*$/,xN=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,bN=/^[\u0020-\u003A\u003D-\u007E]*$/,vN=Object.prototype.toString,_N=(()=>{const i=function(){};return i.prototype=Object.create(null),i})();function wN(i,e){const t=new _N,n=i.length;if(n<2)return t;const s=(e==null?void 0:e.decode)||CN;let l=0;do{const u=i.indexOf("=",l);if(u===-1)break;const r=i.indexOf(";",l),p=r===-1?n:r;if(u>p){l=i.lastIndexOf(";",u-1)+1;continue}const f=D2(i,l,u),g=R2(i,u,f),b=i.slice(f,g);if(t[b]===void 0){let y=D2(i,u+1,p),w=R2(i,p,y);const v=s(i.slice(y,w));t[b]=v}l=p+1}while(l<n);return t}function D2(i,e,t){do{const n=i.charCodeAt(e);if(n!==32&&n!==9)return e}while(++e<t);return t}function R2(i,e,t){for(;e>t;){const n=i.charCodeAt(--e);if(n!==32&&n!==9)return e+1}return t}function TN(i,e,t){const n=(t==null?void 0:t.encode)||encodeURIComponent;if(!gN.test(i))throw new TypeError(`argument name is invalid: ${i}`);const s=n(e);if(!yN.test(s))throw new TypeError(`argument val is invalid: ${e}`);let l=i+"="+s;if(!t)return l;if(t.maxAge!==void 0){if(!Number.isInteger(t.maxAge))throw new TypeError(`option maxAge is invalid: ${t.maxAge}`);l+="; Max-Age="+t.maxAge}if(t.domain){if(!xN.test(t.domain))throw new TypeError(`option domain is invalid: ${t.domain}`);l+="; Domain="+t.domain}if(t.path){if(!bN.test(t.path))throw new TypeError(`option path is invalid: ${t.path}`);l+="; Path="+t.path}if(t.expires){if(!SN(t.expires)||!Number.isFinite(t.expires.valueOf()))throw new TypeError(`option expires is invalid: ${t.expires}`);l+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(l+="; HttpOnly"),t.secure&&(l+="; Secure"),t.partitioned&&(l+="; Partitioned"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():void 0){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${t.priority}`)}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${t.sameSite}`)}return l}function CN(i){if(i.indexOf("%")===-1)return i;try{return decodeURIComponent(i)}catch{return i}}function SN(i){return vN.call(i)==="[object Date]"}/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var L2="popstate";function EN(i={}){function e(s,l){let{pathname:u="/",search:r="",hash:p=""}=Ll(s.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),df("",{pathname:u,search:r,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let u=s.document.querySelector("base"),r="";if(u&&u.getAttribute("href")){let p=s.location.href,f=p.indexOf("#");r=f===-1?p:p.slice(0,f)}return r+"#"+(typeof l=="string"?l:wc(l))}function n(s,l){ms(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return AN(e,t,n,i)}function In(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function ms(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kN(){return Math.random().toString(36).substring(2,10)}function z2(i,e){return{usr:i.state,key:i.key,idx:e}}function df(i,e,t=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Ll(e):e,state:t,key:e&&e.key||n||kN()}}function wc({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Ll(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substring(n),i=i.substring(0,n)),i&&(e.pathname=i)}return e}function AN(i,e,t,n={}){let{window:s=document.defaultView,v5Compat:l=!1}=n,u=s.history,r="POP",p=null,f=g();f==null&&(f=0,u.replaceState({...u.state,idx:f},""));function g(){return(u.state||{idx:null}).idx}function b(){r="POP";let S=g(),E=S==null?null:S-f;f=S,p&&p({action:r,location:T.location,delta:E})}function y(S,E){r="PUSH";let x=df(T.location,S,E);t(x,S),f=g()+1;let A=z2(x,f),D=T.createHref(x);try{u.pushState(A,"",D)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(D)}l&&p&&p({action:r,location:T.location,delta:1})}function w(S,E){r="REPLACE";let x=df(T.location,S,E);t(x,S),f=g();let A=z2(x,f),D=T.createHref(x);u.replaceState(A,"",D),l&&p&&p({action:r,location:T.location,delta:0})}function v(S){let E=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof S=="string"?S:wc(S);return x=x.replace(/ $/,"%20"),In(E,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,E)}let T={get action(){return r},get location(){return i(s,u)},listen(S){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(L2,b),p=S,()=>{s.removeEventListener(L2,b),p=null}},createHref(S){return e(s,S)},createURL:v,encodeLocation(S){let E=v(S);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:y,replace:w,go(S){return u.go(S)}};return T}var MN=new Set(["lazy","caseSensitive","path","id","index","children"]);function PN(i){return i.index===!0}function hy(i,e,t=[],n={}){return i.map((s,l)=>{let u=[...t,String(l)],r=typeof s.id=="string"?s.id:u.join("-");if(In(s.index!==!0||!s.children,"Cannot specify children on an index route"),In(!n[r],`Found a route id collision on id "${r}".  Route id's must be globally unique within Data Router usages`),PN(s)){let p={...s,...e(s),id:r};return n[r]=p,p}else{let p={...s,...e(s),id:r,children:void 0};return n[r]=p,s.children&&(p.children=hy(s.children,e,u,n)),p}})}function lc(i,e,t="/"){return Ug(i,e,t,!1)}function Ug(i,e,t,n){let s=typeof e=="string"?Ll(e):e,l=To(s.pathname||"/",t);if(l==null)return null;let u=ZE(i);IN(u);let r=null;for(let p=0;r==null&&p<u.length;++p){let f=UN(l);r=BN(u[p],f,n)}return r}function YE(i,e){let{route:t,pathname:n,params:s}=i;return{id:t.id,pathname:n,params:s,data:e[t.id],handle:t.handle}}function ZE(i,e=[],t=[],n=""){let s=(l,u,r)=>{let p={relativePath:r===void 0?l.path||"":r,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};p.relativePath.startsWith("/")&&(In(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length));let f=Vo([n,p.relativePath]),g=t.concat(p);l.children&&l.children.length>0&&(In(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),ZE(l.children,e,g,f)),!(l.path==null&&!l.index)&&e.push({path:f,score:jN(f,l.index),routesMeta:g})};return i.forEach((l,u)=>{var r;if(l.path===""||!((r=l.path)!=null&&r.includes("?")))s(l,u);else for(let p of XE(l.path))s(l,u,p)}),e}function XE(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(n.length===0)return s?[l,""]:[l];let u=XE(n.join("/")),r=[];return r.push(...u.map(p=>p===""?l:[l,p].join("/"))),s&&r.push(...u),r.map(p=>i.startsWith("/")&&p===""?"/":p)}function IN(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:FN(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var DN=/^:[\w-]+$/,RN=3,LN=2,zN=1,NN=10,ON=-2,N2=i=>i==="*";function jN(i,e){let t=i.split("/"),n=t.length;return t.some(N2)&&(n+=ON),e&&(n+=LN),t.filter(s=>!N2(s)).reduce((s,l)=>s+(DN.test(l)?RN:l===""?zN:NN),n)}function FN(i,e){return i.length===e.length&&i.slice(0,-1).every((n,s)=>n===e[s])?i[i.length-1]-e[e.length-1]:0}function BN(i,e,t=!1){let{routesMeta:n}=i,s={},l="/",u=[];for(let r=0;r<n.length;++r){let p=n[r],f=r===n.length-1,g=l==="/"?e:e.slice(l.length)||"/",b=py({path:p.relativePath,caseSensitive:p.caseSensitive,end:f},g),y=p.route;if(!b&&f&&t&&!n[n.length-1].route.index&&(b=py({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},g)),!b)return null;Object.assign(s,b.params),u.push({params:s,pathname:Vo([l,b.pathname]),pathnameBase:HN(Vo([l,b.pathnameBase])),route:y}),b.pathnameBase!=="/"&&(l=Vo([l,b.pathnameBase]))}return u}function py(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=$N(i.path,i.caseSensitive,i.end),s=e.match(t);if(!s)return null;let l=s[0],u=l.replace(/(.)\/+$/,"$1"),r=s.slice(1);return{params:n.reduce((f,{paramName:g,isOptional:b},y)=>{if(g==="*"){let v=r[y]||"";u=l.slice(0,l.length-v.length).replace(/(.)\/+$/,"$1")}const w=r[y];return b&&!w?f[g]=void 0:f[g]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:u,pattern:i}}function $N(i,e=!1,t=!0){ms(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,r,p)=>(n.push({paramName:r,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function UN(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ms(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function To(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}function VN(i,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof i=="string"?Ll(i):i;return{pathname:t?t.startsWith("/")?t:GN(t,e):e,search:qN(n),hash:WN(s)}}function GN(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function $0(i,e,t,n){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function KE(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ux(i){let e=KE(i);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function dx(i,e,t,n=!1){let s;typeof i=="string"?s=Ll(i):(s={...i},In(!s.pathname||!s.pathname.includes("?"),$0("?","pathname","search",s)),In(!s.pathname||!s.pathname.includes("#"),$0("#","pathname","hash",s)),In(!s.search||!s.search.includes("#"),$0("#","search","hash",s)));let l=i===""||s.pathname==="",u=l?"/":s.pathname,r;if(u==null)r=t;else{let b=e.length-1;if(!n&&u.startsWith("..")){let y=u.split("/");for(;y[0]==="..";)y.shift(),b-=1;s.pathname=y.join("/")}r=b>=0?e[b]:"/"}let p=VN(s,r),f=u&&u!=="/"&&u.endsWith("/"),g=(l||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(f||g)&&(p.pathname+="/"),p}var Vo=i=>i.join("/").replace(/\/\/+/g,"/"),HN=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),qN=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,WN=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,fy=class{constructor(i,e,t,n=!1){this.status=i,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Yf(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var QE=["POST","PUT","PATCH","DELETE"],YN=new Set(QE),ZN=["GET",...QE],XN=new Set(ZN),KN=new Set([301,302,303,307,308]),QN=new Set([307,308]),U0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},JN={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Cp={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},k1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eO=i=>({hasErrorBoundary:!!i.hasErrorBoundary}),JE="remix-router-transitions",e3=Symbol("ResetLoaderData");function tO(i){const e=i.window?i.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";In(i.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=i.mapRouteProperties||eO,s={},l=hy(i.routes,n,void 0,s),u,r=i.basename||"/",p=i.dataStrategy||aO,f=i.patchRoutesOnNavigation,g={...i.future},b=null,y=new Set,w=null,v=null,T=null,S=i.hydrationData!=null,E=lc(l,i.history.location,r),x=null;if(E==null&&!f){let dt=to(404,{pathname:i.history.location.pathname}),{matches:bt,route:It}=W2(l);E=bt,x={[It.id]:dt}}E&&!i.hydrationData&&Xi(E,l,i.history.location.pathname).active&&(E=null);let A;if(E)if(E.some(dt=>dt.route.lazy))A=!1;else if(!E.some(dt=>dt.route.loader))A=!0;else{let dt=i.hydrationData?i.hydrationData.loaderData:null,bt=i.hydrationData?i.hydrationData.errors:null;if(bt){let It=E.findIndex(Ft=>bt[Ft.route.id]!==void 0);A=E.slice(0,It+1).every(Ft=>!Jb(Ft.route,dt,bt))}else A=E.every(It=>!Jb(It.route,dt,bt))}else{A=!1,E=[];let dt=Xi(null,l,i.history.location.pathname);dt.active&&dt.matches&&(E=dt.matches)}let D,C={historyAction:i.history.action,location:i.history.location,matches:E,initialized:A,navigation:U0,restoreScrollPosition:i.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:i.hydrationData&&i.hydrationData.loaderData||{},actionData:i.hydrationData&&i.hydrationData.actionData||null,errors:i.hydrationData&&i.hydrationData.errors||x,fetchers:new Map,blockers:new Map},I="POP",N=!1,W,Y=!1,X=new Map,O=null,V=!1,$=!1,L=new Set,R=new Map,G=0,U=-1,B=new Map,H=new Set,q=new Map,se=new Map,pe=new Set,ne=new Map,le,ke=null;function be(){if(b=i.history.listen(({action:dt,location:bt,delta:It})=>{if(le){le(),le=void 0;return}ms(ne.size===0||It!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ft=Et({currentLocation:C.location,nextLocation:bt,historyAction:dt});if(Ft&&It!=null){let Yt=new Promise(bi=>{le=bi});i.history.go(It*-1),ft(Ft,{state:"blocked",location:bt,proceed(){ft(Ft,{state:"proceeding",proceed:void 0,reset:void 0,location:bt}),Yt.then(()=>i.history.go(It))},reset(){let bi=new Map(C.blockers);bi.set(Ft,Cp),J({blockers:bi})}});return}return re(dt,bt)}),t){yO(e,X);let dt=()=>xO(e,X);e.addEventListener("pagehide",dt),O=()=>e.removeEventListener("pagehide",dt)}return C.initialized||re("POP",C.location,{initialHydration:!0}),D}function Ee(){b&&b(),O&&O(),y.clear(),W&&W.abort(),C.fetchers.forEach((dt,bt)=>Fe(bt)),C.blockers.forEach((dt,bt)=>Lt(bt))}function K(dt){return y.add(dt),()=>y.delete(dt)}function J(dt,bt={}){C={...C,...dt};let It=[],Ft=[];C.fetchers.forEach((Yt,bi)=>{Yt.state==="idle"&&(pe.has(bi)?It.push(bi):Ft.push(bi))}),pe.forEach(Yt=>{!C.fetchers.has(Yt)&&!R.has(Yt)&&It.push(Yt)}),[...y].forEach(Yt=>Yt(C,{deletedFetchers:It,viewTransitionOpts:bt.viewTransitionOpts,flushSync:bt.flushSync===!0})),It.forEach(Yt=>Fe(Yt)),Ft.forEach(Yt=>C.fetchers.delete(Yt))}function oe(dt,bt,{flushSync:It}={}){var ve,Le;let Ft=C.actionData!=null&&C.navigation.formMethod!=null&&mo(C.navigation.formMethod)&&C.navigation.state==="loading"&&((ve=dt.state)==null?void 0:ve._isRedirect)!==!0,Yt;bt.actionData?Object.keys(bt.actionData).length>0?Yt=bt.actionData:Yt=null:Ft?Yt=C.actionData:Yt=null;let bi=bt.loaderData?H2(C.loaderData,bt.loaderData,bt.matches||[],bt.errors):C.loaderData,Oi=C.blockers;Oi.size>0&&(Oi=new Map(Oi),Oi.forEach((Ve,Ke)=>Oi.set(Ke,Cp)));let hi=N===!0||C.navigation.formMethod!=null&&mo(C.navigation.formMethod)&&((Le=dt.state)==null?void 0:Le._isRedirect)!==!0;u&&(l=u,u=void 0),V||I==="POP"||(I==="PUSH"?i.history.push(dt,dt.state):I==="REPLACE"&&i.history.replace(dt,dt.state));let qe;if(I==="POP"){let Ve=X.get(C.location.pathname);Ve&&Ve.has(dt.pathname)?qe={currentLocation:C.location,nextLocation:dt}:X.has(dt.pathname)&&(qe={currentLocation:dt,nextLocation:C.location})}else if(Y){let Ve=X.get(C.location.pathname);Ve?Ve.add(dt.pathname):(Ve=new Set([dt.pathname]),X.set(C.location.pathname,Ve)),qe={currentLocation:C.location,nextLocation:dt}}J({...bt,actionData:Yt,loaderData:bi,historyAction:I,location:dt,initialized:!0,navigation:U0,revalidation:"idle",restoreScrollPosition:cn(dt,bt.matches||C.matches),preventScrollReset:hi,blockers:Oi},{viewTransitionOpts:qe,flushSync:It===!0}),I="POP",N=!1,Y=!1,V=!1,$=!1,ke==null||ke.resolve(),ke=null}async function we(dt,bt){if(typeof dt=="number"){i.history.go(dt);return}let It=Qb(C.location,C.matches,r,dt,bt==null?void 0:bt.fromRouteId,bt==null?void 0:bt.relative),{path:Ft,submission:Yt,error:bi}=O2(!1,It,bt),Oi=C.location,hi=df(C.location,Ft,bt&&bt.state);hi={...hi,...i.history.encodeLocation(hi)};let qe=bt&&bt.replace!=null?bt.replace:void 0,ve="PUSH";qe===!0?ve="REPLACE":qe===!1||Yt!=null&&mo(Yt.formMethod)&&Yt.formAction===C.location.pathname+C.location.search&&(ve="REPLACE");let Le=bt&&"preventScrollReset"in bt?bt.preventScrollReset===!0:void 0,Ve=(bt&&bt.flushSync)===!0,Ke=Et({currentLocation:Oi,nextLocation:hi,historyAction:ve});if(Ke){ft(Ke,{state:"blocked",location:hi,proceed(){ft(Ke,{state:"proceeding",proceed:void 0,reset:void 0,location:hi}),we(dt,bt)},reset(){let st=new Map(C.blockers);st.set(Ke,Cp),J({blockers:st})}});return}await re(ve,hi,{submission:Yt,pendingError:bi,preventScrollReset:Le,replace:bt&&bt.replace,enableViewTransition:bt&&bt.viewTransition,flushSync:Ve})}function ee(){ke||(ke=bO()),ge(),J({revalidation:"loading"});let dt=ke.promise;return C.navigation.state==="submitting"?dt:C.navigation.state==="idle"?(re(C.historyAction,C.location,{startUninterruptedRevalidation:!0}),dt):(re(I||C.historyAction,C.navigation.location,{overrideNavigation:C.navigation,enableViewTransition:Y===!0}),dt)}async function re(dt,bt,It){W&&W.abort(),W=null,I=dt,V=(It&&It.startUninterruptedRevalidation)===!0,qt(C.location,C.matches),N=(It&&It.preventScrollReset)===!0,Y=(It&&It.enableViewTransition)===!0;let Ft=u||l,Yt=It&&It.overrideNavigation,bi=lc(Ft,bt,r),Oi=(It&&It.flushSync)===!0,hi=Xi(bi,Ft,bt.pathname);if(hi.active&&hi.matches&&(bi=hi.matches),!bi){let{error:ct,notFoundMatches:ot,route:rt}=Ct(bt.pathname);oe(bt,{matches:ot,loaderData:{},errors:{[rt.id]:ct}},{flushSync:Oi});return}if(C.initialized&&!$&&hO(C.location,bt)&&!(It&&It.submission&&mo(It.submission.formMethod))){oe(bt,{matches:bi},{flushSync:Oi});return}W=new AbortController;let qe=Dd(i.history,bt,W.signal,It&&It.submission),ve;if(It&&It.pendingError)ve=[pu(bi).route.id,{type:"error",error:It.pendingError}];else if(It&&It.submission&&mo(It.submission.formMethod)){let ct=await ue(qe,bt,It.submission,bi,hi.active,{replace:It.replace,flushSync:Oi});if(ct.shortCircuited)return;if(ct.pendingActionResult){let[ot,rt]=ct.pendingActionResult;if(Fa(rt)&&Yf(rt.error)&&rt.error.status===404){W=null,oe(bt,{matches:ct.matches,loaderData:{},errors:{[ot]:rt.error}});return}}bi=ct.matches||bi,ve=ct.pendingActionResult,Yt=V0(bt,It.submission),Oi=!1,hi.active=!1,qe=Dd(i.history,qe.url,qe.signal)}let{shortCircuited:Le,matches:Ve,loaderData:Ke,errors:st}=await xe(qe,bt,bi,hi.active,Yt,It&&It.submission,It&&It.fetcherSubmission,It&&It.replace,It&&It.initialHydration===!0,Oi,ve);Le||(W=null,oe(bt,{matches:Ve||bi,...q2(ve),loaderData:Ke,errors:st}))}async function ue(dt,bt,It,Ft,Yt,bi={}){ge();let Oi=mO(bt,It);if(J({navigation:Oi},{flushSync:bi.flushSync===!0}),Yt){let ve=await xn(Ft,bt.pathname,dt.signal);if(ve.type==="aborted")return{shortCircuited:!0};if(ve.type==="error"){let Le=pu(ve.partialMatches).route.id;return{matches:ve.partialMatches,pendingActionResult:[Le,{type:"error",error:ve.error}]}}else if(ve.matches)Ft=ve.matches;else{let{notFoundMatches:Le,error:Ve,route:Ke}=Ct(bt.pathname);return{matches:Le,pendingActionResult:[Ke.id,{type:"error",error:Ve}]}}}let hi,qe=jp(Ft,bt);if(!qe.route.action&&!qe.route.lazy)hi={type:"error",error:to(405,{method:dt.method,pathname:bt.pathname,routeId:qe.route.id})};else if(hi=(await Ae("action",C,dt,[qe],Ft,null))[qe.route.id],dt.signal.aborted)return{shortCircuited:!0};if(mu(hi)){let ve;return bi&&bi.replace!=null?ve=bi.replace:ve=U2(hi.response.headers.get("Location"),new URL(dt.url),r)===C.location.pathname+C.location.search,await He(dt,hi,!0,{submission:It,replace:ve}),{shortCircuited:!0}}if(Fa(hi)){let ve=pu(Ft,qe.route.id);return(bi&&bi.replace)!==!0&&(I="PUSH"),{matches:Ft,pendingActionResult:[ve.route.id,hi]}}return{matches:Ft,pendingActionResult:[qe.route.id,hi]}}async function xe(dt,bt,It,Ft,Yt,bi,Oi,hi,qe,ve,Le){let Ve=Yt||V0(bt,bi),Ke=bi||Oi||Z2(Ve),st=!V&&!qe;if(Ft){if(st){let Pi=Te(Le);J({navigation:Ve,...Pi!==void 0?{actionData:Pi}:{}},{flushSync:ve})}let _i=await xn(It,bt.pathname,dt.signal);if(_i.type==="aborted")return{shortCircuited:!0};if(_i.type==="error"){let Pi=pu(_i.partialMatches).route.id;return{matches:_i.partialMatches,loaderData:{},errors:{[Pi]:_i.error}}}else if(_i.matches)It=_i.matches;else{let{error:Pi,notFoundMatches:Ui,route:ji}=Ct(bt.pathname);return{matches:Ui,loaderData:{},errors:{[ji.id]:Pi}}}}let ct=u||l,[ot,rt]=F2(i.history,C,It,Ke,bt,qe===!0,$,L,pe,q,H,ct,r,Le);if(U=++G,ot.length===0&&rt.length===0){let _i=ht();return oe(bt,{matches:It,loaderData:{},errors:Le&&Fa(Le[1])?{[Le[0]]:Le[1].error}:null,...q2(Le),..._i?{fetchers:new Map(C.fetchers)}:{}},{flushSync:ve}),{shortCircuited:!0}}if(st){let _i={};if(!Ft){_i.navigation=Ve;let Pi=Te(Le);Pi!==void 0&&(_i.actionData=Pi)}rt.length>0&&(_i.fetchers=ze(rt)),J(_i,{flushSync:ve})}rt.forEach(_i=>{tt(_i.key),_i.controller&&R.set(_i.key,_i.controller)});let mt=()=>rt.forEach(_i=>tt(_i.key));W&&W.signal.addEventListener("abort",mt);let{loaderResults:At,fetcherResults:Nt}=await ye(C,It,ot,rt,dt);if(dt.signal.aborted)return{shortCircuited:!0};W&&W.signal.removeEventListener("abort",mt),rt.forEach(_i=>R.delete(_i.key));let Rt=gg(At);if(Rt)return await He(dt,Rt.result,!0,{replace:hi}),{shortCircuited:!0};if(Rt=gg(Nt),Rt)return H.add(Rt.key),await He(dt,Rt.result,!0,{replace:hi}),{shortCircuited:!0};let{loaderData:oi,errors:Qt}=G2(C,It,At,Le,rt,Nt);qe&&C.errors&&(Qt={...C.errors,...Qt});let pi=ht(),vi=gt(U),$i=pi||vi||rt.length>0;return{matches:It,loaderData:oi,errors:Qt,...$i?{fetchers:new Map(C.fetchers)}:{}}}function Te(dt){if(dt&&!Fa(dt[1]))return{[dt[0]]:dt[1].data};if(C.actionData)return Object.keys(C.actionData).length===0?null:C.actionData}function ze(dt){return dt.forEach(bt=>{let It=C.fetchers.get(bt.key),Ft=Sp(void 0,It?It.data:void 0);C.fetchers.set(bt.key,Ft)}),new Map(C.fetchers)}async function Ce(dt,bt,It,Ft){tt(dt);let Yt=(Ft&&Ft.flushSync)===!0,bi=u||l,Oi=Qb(C.location,C.matches,r,It,bt,Ft==null?void 0:Ft.relative),hi=lc(bi,Oi,r),qe=Xi(hi,bi,Oi);if(qe.active&&qe.matches&&(hi=qe.matches),!hi){De(dt,bt,to(404,{pathname:Oi}),{flushSync:Yt});return}let{path:ve,submission:Le,error:Ve}=O2(!0,Oi,Ft);if(Ve){De(dt,bt,Ve,{flushSync:Yt});return}let Ke=jp(hi,ve),st=(Ft&&Ft.preventScrollReset)===!0;if(Le&&mo(Le.formMethod)){await Ie(dt,bt,ve,Ke,hi,qe.active,Yt,st,Le);return}q.set(dt,{routeId:bt,path:ve}),await Be(dt,bt,ve,Ke,hi,qe.active,Yt,st,Le)}async function Ie(dt,bt,It,Ft,Yt,bi,Oi,hi,qe){ge(),q.delete(dt);function ve(pn){if(!pn.route.action&&!pn.route.lazy){let Hn=to(405,{method:qe.formMethod,pathname:It,routeId:bt});return De(dt,bt,Hn,{flushSync:Oi}),!0}return!1}if(!bi&&ve(Ft))return;let Le=C.fetchers.get(dt);Me(dt,gO(qe,Le),{flushSync:Oi});let Ve=new AbortController,Ke=Dd(i.history,It,Ve.signal,qe);if(bi){let pn=await xn(Yt,It,Ke.signal);if(pn.type==="aborted")return;if(pn.type==="error"){De(dt,bt,pn.error,{flushSync:Oi});return}else if(pn.matches){if(Yt=pn.matches,Ft=jp(Yt,It),ve(Ft))return}else{De(dt,bt,to(404,{pathname:It}),{flushSync:Oi});return}}R.set(dt,Ve);let st=G,ot=(await Ae("action",C,Ke,[Ft],Yt,dt))[Ft.route.id];if(Ke.signal.aborted){R.get(dt)===Ve&&R.delete(dt);return}if(pe.has(dt)){if(mu(ot)||Fa(ot)){Me(dt,nc(void 0));return}}else{if(mu(ot))if(R.delete(dt),U>st){Me(dt,nc(void 0));return}else return H.add(dt),Me(dt,Sp(qe)),He(Ke,ot,!1,{fetcherSubmission:qe,preventScrollReset:hi});if(Fa(ot)){De(dt,bt,ot.error);return}}let rt=C.navigation.location||C.location,mt=Dd(i.history,rt,Ve.signal),At=u||l,Nt=C.navigation.state!=="idle"?lc(At,C.navigation.location,r):C.matches;In(Nt,"Didn't find any matches after fetcher action");let Rt=++G;B.set(dt,Rt);let oi=Sp(qe,ot.data);C.fetchers.set(dt,oi);let[Qt,pi]=F2(i.history,C,Nt,qe,rt,!1,$,L,pe,q,H,At,r,[Ft.route.id,ot]);pi.filter(pn=>pn.key!==dt).forEach(pn=>{let Hn=pn.key,br=C.fetchers.get(Hn),Ur=Sp(void 0,br?br.data:void 0);C.fetchers.set(Hn,Ur),tt(Hn),pn.controller&&R.set(Hn,pn.controller)}),J({fetchers:new Map(C.fetchers)});let vi=()=>pi.forEach(pn=>tt(pn.key));Ve.signal.addEventListener("abort",vi);let{loaderResults:$i,fetcherResults:_i}=await ye(C,Nt,Qt,pi,mt);if(Ve.signal.aborted)return;Ve.signal.removeEventListener("abort",vi),B.delete(dt),R.delete(dt),pi.forEach(pn=>R.delete(pn.key));let Pi=gg($i);if(Pi)return He(mt,Pi.result,!1,{preventScrollReset:hi});if(Pi=gg(_i),Pi)return H.add(Pi.key),He(mt,Pi.result,!1,{preventScrollReset:hi});let{loaderData:Ui,errors:ji}=G2(C,Nt,$i,void 0,pi,_i);if(C.fetchers.has(dt)){let pn=nc(ot.data);C.fetchers.set(dt,pn)}gt(Rt),C.navigation.state==="loading"&&Rt>U?(In(I,"Expected pending action"),W&&W.abort(),oe(C.navigation.location,{matches:Nt,loaderData:Ui,errors:ji,fetchers:new Map(C.fetchers)})):(J({errors:ji,loaderData:H2(C.loaderData,Ui,Nt,ji),fetchers:new Map(C.fetchers)}),$=!1)}async function Be(dt,bt,It,Ft,Yt,bi,Oi,hi,qe){let ve=C.fetchers.get(dt);Me(dt,Sp(qe,ve?ve.data:void 0),{flushSync:Oi});let Le=new AbortController,Ve=Dd(i.history,It,Le.signal);if(bi){let ot=await xn(Yt,It,Ve.signal);if(ot.type==="aborted")return;if(ot.type==="error"){De(dt,bt,ot.error,{flushSync:Oi});return}else if(ot.matches)Yt=ot.matches,Ft=jp(Yt,It);else{De(dt,bt,to(404,{pathname:It}),{flushSync:Oi});return}}R.set(dt,Le);let Ke=G,ct=(await Ae("loader",C,Ve,[Ft],Yt,dt))[Ft.route.id];if(R.get(dt)===Le&&R.delete(dt),!Ve.signal.aborted){if(pe.has(dt)){Me(dt,nc(void 0));return}if(mu(ct))if(U>Ke){Me(dt,nc(void 0));return}else{H.add(dt),await He(Ve,ct,!1,{preventScrollReset:hi});return}if(Fa(ct)){De(dt,bt,ct.error);return}Me(dt,nc(ct.data))}}async function He(dt,bt,It,{submission:Ft,fetcherSubmission:Yt,preventScrollReset:bi,replace:Oi}={}){bt.response.headers.has("X-Remix-Revalidate")&&($=!0);let hi=bt.response.headers.get("Location");In(hi,"Expected a Location header on the redirect Response"),hi=U2(hi,new URL(dt.url),r);let qe=df(C.location,hi,{_isRedirect:!0});if(t){let ct=!1;if(bt.response.headers.has("X-Remix-Reload-Document"))ct=!0;else if(k1.test(hi)){const ot=i.history.createURL(hi);ct=ot.origin!==e.location.origin||To(ot.pathname,r)==null}if(ct){Oi?e.location.replace(hi):e.location.assign(hi);return}}W=null;let ve=Oi===!0||bt.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Le,formAction:Ve,formEncType:Ke}=C.navigation;!Ft&&!Yt&&Le&&Ve&&Ke&&(Ft=Z2(C.navigation));let st=Ft||Yt;if(QN.has(bt.response.status)&&st&&mo(st.formMethod))await re(ve,qe,{submission:{...st,formAction:hi},preventScrollReset:bi||N,enableViewTransition:It?Y:void 0});else{let ct=V0(qe,Ft);await re(ve,qe,{overrideNavigation:ct,fetcherSubmission:Yt,preventScrollReset:bi||N,enableViewTransition:It?Y:void 0})}}async function Ae(dt,bt,It,Ft,Yt,bi){let Oi,hi={};try{Oi=await oO(p,dt,bt,It,Ft,Yt,bi,s,n)}catch(qe){return Ft.forEach(ve=>{hi[ve.route.id]={type:"error",error:qe}}),hi}for(let[qe,ve]of Object.entries(Oi))if(pO(ve)){let Le=ve.result;hi[qe]={type:"redirect",response:uO(Le,It,qe,Yt,r)}}else hi[qe]=await cO(ve);return hi}async function ye(dt,bt,It,Ft,Yt){let bi=Ae("loader",dt,Yt,It,bt,null),Oi=Promise.all(Ft.map(async ve=>{if(ve.matches&&ve.match&&ve.controller){let Ve=(await Ae("loader",dt,Dd(i.history,ve.path,ve.controller.signal),[ve.match],ve.matches,ve.key))[ve.match.route.id];return{[ve.key]:Ve}}else return Promise.resolve({[ve.key]:{type:"error",error:to(404,{pathname:ve.path})}})})),hi=await bi,qe=(await Oi).reduce((ve,Le)=>Object.assign(ve,Le),{});return{loaderResults:hi,fetcherResults:qe}}function ge(){$=!0,q.forEach((dt,bt)=>{R.has(bt)&&L.add(bt),tt(bt)})}function Me(dt,bt,It={}){C.fetchers.set(dt,bt),J({fetchers:new Map(C.fetchers)},{flushSync:(It&&It.flushSync)===!0})}function De(dt,bt,It,Ft={}){let Yt=pu(C.matches,bt);Fe(dt),J({errors:{[Yt.route.id]:It},fetchers:new Map(C.fetchers)},{flushSync:(Ft&&Ft.flushSync)===!0})}function Pe(dt){return se.set(dt,(se.get(dt)||0)+1),pe.has(dt)&&pe.delete(dt),C.fetchers.get(dt)||JN}function Fe(dt){let bt=C.fetchers.get(dt);R.has(dt)&&!(bt&&bt.state==="loading"&&B.has(dt))&&tt(dt),q.delete(dt),B.delete(dt),H.delete(dt),pe.delete(dt),L.delete(dt),C.fetchers.delete(dt)}function Xe(dt){let bt=(se.get(dt)||0)-1;bt<=0?(se.delete(dt),pe.add(dt)):se.set(dt,bt),J({fetchers:new Map(C.fetchers)})}function tt(dt){let bt=R.get(dt);bt&&(bt.abort(),R.delete(dt))}function nt(dt){for(let bt of dt){let It=Pe(bt),Ft=nc(It.data);C.fetchers.set(bt,Ft)}}function ht(){let dt=[],bt=!1;for(let It of H){let Ft=C.fetchers.get(It);In(Ft,`Expected fetcher: ${It}`),Ft.state==="loading"&&(H.delete(It),dt.push(It),bt=!0)}return nt(dt),bt}function gt(dt){let bt=[];for(let[It,Ft]of B)if(Ft<dt){let Yt=C.fetchers.get(It);In(Yt,`Expected fetcher: ${It}`),Yt.state==="loading"&&(tt(It),B.delete(It),bt.push(It))}return nt(bt),bt.length>0}function Tt(dt,bt){let It=C.blockers.get(dt)||Cp;return ne.get(dt)!==bt&&ne.set(dt,bt),It}function Lt(dt){C.blockers.delete(dt),ne.delete(dt)}function ft(dt,bt){let It=C.blockers.get(dt)||Cp;In(It.state==="unblocked"&&bt.state==="blocked"||It.state==="blocked"&&bt.state==="blocked"||It.state==="blocked"&&bt.state==="proceeding"||It.state==="blocked"&&bt.state==="unblocked"||It.state==="proceeding"&&bt.state==="unblocked",`Invalid blocker state transition: ${It.state} -> ${bt.state}`);let Ft=new Map(C.blockers);Ft.set(dt,bt),J({blockers:Ft})}function Et({currentLocation:dt,nextLocation:bt,historyAction:It}){if(ne.size===0)return;ne.size>1&&ms(!1,"A router only supports one blocker at a time");let Ft=Array.from(ne.entries()),[Yt,bi]=Ft[Ft.length-1],Oi=C.blockers.get(Yt);if(!(Oi&&Oi.state==="proceeding")&&bi({currentLocation:dt,nextLocation:bt,historyAction:It}))return Yt}function Ct(dt){let bt=to(404,{pathname:dt}),It=u||l,{matches:Ft,route:Yt}=W2(It);return{notFoundMatches:Ft,route:Yt,error:bt}}function si(dt,bt,It){if(w=dt,T=bt,v=It||null,!S&&C.navigation===U0){S=!0;let Ft=cn(C.location,C.matches);Ft!=null&&J({restoreScrollPosition:Ft})}return()=>{w=null,T=null,v=null}}function di(dt,bt){return v&&v(dt,bt.map(Ft=>YE(Ft,C.loaderData)))||dt.key}function qt(dt,bt){if(w&&T){let It=di(dt,bt);w[It]=T()}}function cn(dt,bt){if(w){let It=di(dt,bt),Ft=w[It];if(typeof Ft=="number")return Ft}return null}function Xi(dt,bt,It){if(f)if(dt){if(Object.keys(dt[0].params).length>0)return{active:!0,matches:Ug(bt,It,r,!0)}}else return{active:!0,matches:Ug(bt,It,r,!0)||[]};return{active:!1,matches:null}}async function xn(dt,bt,It){if(!f)return{type:"success",matches:dt};let Ft=dt;for(;;){let Yt=u==null,bi=u||l,Oi=s;try{await f({path:bt,matches:Ft,patch:(ve,Le)=>{It.aborted||$2(ve,Le,bi,Oi,n)}})}catch(ve){return{type:"error",error:ve,partialMatches:Ft}}finally{Yt&&!It.aborted&&(l=[...l])}if(It.aborted)return{type:"aborted"};let hi=lc(bi,bt,r);if(hi)return{type:"success",matches:hi};let qe=Ug(bi,bt,r,!0);if(!qe||Ft.length===qe.length&&Ft.every((ve,Le)=>ve.route.id===qe[Le].route.id))return{type:"success",matches:null};Ft=qe}}function Fn(dt){s={},u=hy(dt,n,void 0,s)}function sn(dt,bt){let It=u==null;$2(dt,bt,u||l,s,n),It&&(l=[...l],J({}))}return D={get basename(){return r},get future(){return g},get state(){return C},get routes(){return l},get window(){return e},initialize:be,subscribe:K,enableScrollRestoration:si,navigate:we,fetch:Ce,revalidate:ee,createHref:dt=>i.history.createHref(dt),encodeLocation:dt=>i.history.encodeLocation(dt),getFetcher:Pe,deleteFetcher:Xe,dispose:Ee,getBlocker:Tt,deleteBlocker:Lt,patchRoutes:sn,_internalFetchControllers:R,_internalSetRoutes:Fn},D}function iO(i){return i!=null&&("formData"in i&&i.formData!=null||"body"in i&&i.body!==void 0)}function Qb(i,e,t,n,s,l){let u,r;if(s){u=[];for(let f of e)if(u.push(f),f.route.id===s){r=f;break}}else u=e,r=e[e.length-1];let p=dx(n||".",ux(u),To(i.pathname,t)||i.pathname,l==="path");if(n==null&&(p.search=i.search,p.hash=i.hash),(n==null||n===""||n===".")&&r){let f=A1(p.search);if(r.route.index&&!f)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!r.route.index&&f){let g=new URLSearchParams(p.search),b=g.getAll("index");g.delete("index"),b.filter(w=>w).forEach(w=>g.append("index",w));let y=g.toString();p.search=y?`?${y}`:""}}return t!=="/"&&(p.pathname=p.pathname==="/"?t:Vo([t,p.pathname])),wc(p)}function O2(i,e,t){if(!t||!iO(t))return{path:e};if(t.formMethod&&!fO(t.formMethod))return{path:e,error:to(405,{method:t.formMethod})};let n=()=>({path:e,error:to(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),u=i3(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!mo(l))return n();let b=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((y,[w,v])=>`${y}${w}=${v}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:u,formEncType:t.formEncType,formData:void 0,json:void 0,text:b}}}else if(t.formEncType==="application/json"){if(!mo(l))return n();try{let b=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:u,formEncType:t.formEncType,formData:void 0,json:b,text:void 0}}}catch{return n()}}}In(typeof FormData=="function","FormData is not available in this environment");let r,p;if(t.formData)r=ev(t.formData),p=t.formData;else if(t.body instanceof FormData)r=ev(t.body),p=t.body;else if(t.body instanceof URLSearchParams)r=t.body,p=V2(r);else if(t.body==null)r=new URLSearchParams,p=new FormData;else try{r=new URLSearchParams(t.body),p=V2(r)}catch{return n()}let f={formMethod:l,formAction:u,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(mo(f.formMethod))return{path:e,submission:f};let g=Ll(e);return i&&g.search&&A1(g.search)&&r.append("index",""),g.search=`?${r}`,{path:wc(g),submission:f}}function j2(i,e,t=!1){let n=i.findIndex(s=>s.route.id===e);return n>=0?i.slice(0,t?n+1:n):i}function F2(i,e,t,n,s,l,u,r,p,f,g,b,y,w){let v=w?Fa(w[1])?w[1].error:w[1].data:void 0,T=i.createURL(e.location),S=i.createURL(s),E=t;l&&e.errors?E=j2(t,Object.keys(e.errors)[0],!0):w&&Fa(w[1])&&(E=j2(t,w[0]));let x=w?w[1].statusCode:void 0,A=x&&x>=400,D=E.filter((I,N)=>{let{route:W}=I;if(W.lazy)return!0;if(W.loader==null)return!1;if(l)return Jb(W,e.loaderData,e.errors);if(nO(e.loaderData,e.matches[N],I))return!0;let Y=e.matches[N],X=I;return B2(I,{currentUrl:T,currentParams:Y.params,nextUrl:S,nextParams:X.params,...n,actionResult:v,actionStatus:x,defaultShouldRevalidate:A?!1:u||T.pathname+T.search===S.pathname+S.search||T.search!==S.search||rO(Y,X)})}),C=[];return f.forEach((I,N)=>{if(l||!t.some(V=>V.route.id===I.routeId)||p.has(N))return;let W=lc(b,I.path,y);if(!W){C.push({key:N,routeId:I.routeId,path:I.path,matches:null,match:null,controller:null});return}let Y=e.fetchers.get(N),X=jp(W,I.path),O=!1;g.has(N)?O=!1:r.has(N)?(r.delete(N),O=!0):Y&&Y.state!=="idle"&&Y.data===void 0?O=u:O=B2(X,{currentUrl:T,currentParams:e.matches[e.matches.length-1].params,nextUrl:S,nextParams:t[t.length-1].params,...n,actionResult:v,actionStatus:x,defaultShouldRevalidate:A?!1:u}),O&&C.push({key:N,routeId:I.routeId,path:I.path,matches:W,match:X,controller:new AbortController})}),[D,C]}function Jb(i,e,t){if(i.lazy)return!0;if(!i.loader)return!1;let n=e!=null&&e[i.id]!==void 0,s=t!=null&&t[i.id]!==void 0;return!n&&s?!1:typeof i.loader=="function"&&i.loader.hydrate===!0?!0:!n&&!s}function nO(i,e,t){let n=!e||t.route.id!==e.route.id,s=!i.hasOwnProperty(t.route.id);return n||s}function rO(i,e){let t=i.route.path;return i.pathname!==e.pathname||t!=null&&t.endsWith("*")&&i.params["*"]!==e.params["*"]}function B2(i,e){if(i.route.shouldRevalidate){let t=i.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function $2(i,e,t,n,s){let l;if(i){let p=n[i];In(p,`No route found to patch children into: routeId = ${i}`),p.children||(p.children=[]),l=p.children}else l=t;let u=e.filter(p=>!l.some(f=>t3(p,f))),r=hy(u,s,[i||"_","patch",String((l==null?void 0:l.length)||"0")],n);l.push(...r)}function t3(i,e){return"id"in i&&"id"in e&&i.id===e.id?!0:i.index===e.index&&i.path===e.path&&i.caseSensitive===e.caseSensitive?(!i.children||i.children.length===0)&&(!e.children||e.children.length===0)?!0:i.children.every((t,n)=>{var s;return(s=e.children)==null?void 0:s.some(l=>t3(t,l))}):!1}async function sO(i,e,t){if(!i.lazy)return;let n=await i.lazy();if(!i.lazy)return;let s=t[i.id];In(s,"No route found in manifest");let l={};for(let u in n){let p=s[u]!==void 0&&u!=="hasErrorBoundary";ms(!p,`Route "${s.id}" has a static property "${u}" defined but its lazy function is also returning a value for this property. The lazy route property "${u}" will be ignored.`),!p&&!MN.has(u)&&(l[u]=n[u])}Object.assign(s,l),Object.assign(s,{...e(s),lazy:void 0})}async function aO({matches:i}){let e=i.filter(n=>n.shouldLoad);return(await Promise.all(e.map(n=>n.resolve()))).reduce((n,s,l)=>Object.assign(n,{[e[l].route.id]:s}),{})}async function oO(i,e,t,n,s,l,u,r,p,f){let g=l.map(w=>w.route.lazy?sO(w.route,p,r):void 0),b=l.map((w,v)=>{let T=g[v],S=s.some(x=>x.route.id===w.route.id);return{...w,shouldLoad:S,resolve:async x=>(x&&n.method==="GET"&&(w.route.lazy||w.route.loader)&&(S=!0),S?lO(e,n,w,T,x,f):Promise.resolve({type:"data",result:void 0}))}}),y=await i({matches:b,request:n,params:l[0].params,fetcherKey:u,context:f});try{await Promise.all(g)}catch{}return y}async function lO(i,e,t,n,s,l){let u,r,p=f=>{let g,b=new Promise((v,T)=>g=T);r=()=>g(),e.signal.addEventListener("abort",r);let y=v=>typeof f!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${i}" [routeId: ${t.route.id}]`)):f({request:e,params:t.params,context:l},...v!==void 0?[v]:[]),w=(async()=>{try{return{type:"data",result:await(s?s(T=>y(T)):y())}}catch(v){return{type:"error",result:v}}})();return Promise.race([w,b])};try{let f=t.route[i];if(n)if(f){let g,[b]=await Promise.all([p(f).catch(y=>{g=y}),n]);if(g!==void 0)throw g;u=b}else if(await n,f=t.route[i],f)u=await p(f);else if(i==="action"){let g=new URL(e.url),b=g.pathname+g.search;throw to(405,{method:e.method,pathname:b,routeId:t.route.id})}else return{type:"data",result:void 0};else if(f)u=await p(f);else{let g=new URL(e.url),b=g.pathname+g.search;throw to(404,{pathname:b})}}catch(f){return{type:"error",result:f}}finally{r&&e.signal.removeEventListener("abort",r)}return u}async function cO(i){var n,s,l,u;let{result:e,type:t}=i;if(n3(e)){let r;try{let p=e.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?e.body==null?r=null:r=await e.json():r=await e.text()}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new fy(e.status,e.statusText,r),statusCode:e.status,headers:e.headers}:{type:"data",data:r,statusCode:e.status,headers:e.headers}}if(t==="error"){if(Y2(e)){if(e.data instanceof Error)return{type:"error",error:e.data,statusCode:(n=e.init)==null?void 0:n.status};e=new fy(((s=e.init)==null?void 0:s.status)||500,void 0,e.data)}return{type:"error",error:e,statusCode:Yf(e)?e.status:void 0}}return Y2(e)?{type:"data",data:e.data,statusCode:(l=e.init)==null?void 0:l.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function uO(i,e,t,n,s){let l=i.headers.get("Location");if(In(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!k1.test(l)){let u=n.slice(0,n.findIndex(r=>r.route.id===t)+1);l=Qb(new URL(e.url),u,s,l),i.headers.set("Location",l)}return i}function U2(i,e,t){if(k1.test(i)){let n=i,s=n.startsWith("//")?new URL(e.protocol+n):new URL(n),l=To(s.pathname,t)!=null;if(s.origin===e.origin&&l)return s.pathname+s.search+s.hash}return i}function Dd(i,e,t,n){let s=i.createURL(i3(e)).toString(),l={signal:t};if(n&&mo(n.formMethod)){let{formMethod:u,formEncType:r}=n;l.method=u.toUpperCase(),r==="application/json"?(l.headers=new Headers({"Content-Type":r}),l.body=JSON.stringify(n.json)):r==="text/plain"?l.body=n.text:r==="application/x-www-form-urlencoded"&&n.formData?l.body=ev(n.formData):l.body=n.formData}return new Request(s,l)}function ev(i){let e=new URLSearchParams;for(let[t,n]of i.entries())e.append(t,typeof n=="string"?n:n.name);return e}function V2(i){let e=new FormData;for(let[t,n]of i.entries())e.append(t,n);return e}function dO(i,e,t,n=!1,s=!1){let l={},u=null,r,p=!1,f={},g=t&&Fa(t[1])?t[1].error:void 0;return i.forEach(b=>{if(!(b.route.id in e))return;let y=b.route.id,w=e[y];if(In(!mu(w),"Cannot handle redirect results in processLoaderData"),Fa(w)){let v=w.error;if(g!==void 0&&(v=g,g=void 0),u=u||{},s)u[y]=v;else{let T=pu(i,y);u[T.route.id]==null&&(u[T.route.id]=v)}n||(l[y]=e3),p||(p=!0,r=Yf(w.error)?w.error.status:500),w.headers&&(f[y]=w.headers)}else l[y]=w.data,w.statusCode&&w.statusCode!==200&&!p&&(r=w.statusCode),w.headers&&(f[y]=w.headers)}),g!==void 0&&t&&(u={[t[0]]:g},l[t[0]]=void 0),{loaderData:l,errors:u,statusCode:r||200,loaderHeaders:f}}function G2(i,e,t,n,s,l){let{loaderData:u,errors:r}=dO(e,t,n);return s.forEach(p=>{let{key:f,match:g,controller:b}=p,y=l[f];if(In(y,"Did not find corresponding fetcher result"),!(b&&b.signal.aborted))if(Fa(y)){let w=pu(i.matches,g==null?void 0:g.route.id);r&&r[w.route.id]||(r={...r,[w.route.id]:y.error}),i.fetchers.delete(f)}else if(mu(y))In(!1,"Unhandled fetcher revalidation redirect");else{let w=nc(y.data);i.fetchers.set(f,w)}}),{loaderData:u,errors:r}}function H2(i,e,t,n){let s=Object.entries(e).filter(([,l])=>l!==e3).reduce((l,[u,r])=>(l[u]=r,l),{});for(let l of t){let u=l.route.id;if(!e.hasOwnProperty(u)&&i.hasOwnProperty(u)&&l.route.loader&&(s[u]=i[u]),n&&n.hasOwnProperty(u))break}return s}function q2(i){return i?Fa(i[1])?{actionData:{}}:{actionData:{[i[0]]:i[1].data}}:{}}function pu(i,e){return(e?i.slice(0,i.findIndex(n=>n.route.id===e)+1):[...i]).reverse().find(n=>n.route.hasErrorBoundary===!0)||i[0]}function W2(i){let e=i.length===1?i[0]:i.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function to(i,{pathname:e,routeId:t,method:n,type:s,message:l}={}){let u="Unknown Server Error",r="Unknown @remix-run/router error";return i===400?(u="Bad Request",n&&e&&t?r=`You made a ${n} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(r="Unable to encode submission body")):i===403?(u="Forbidden",r=`Route "${t}" does not match URL "${e}"`):i===404?(u="Not Found",r=`No route matches URL "${e}"`):i===405&&(u="Method Not Allowed",n&&e&&t?r=`You made a ${n.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:n&&(r=`Invalid request method "${n.toUpperCase()}"`)),new fy(i||500,u,new Error(r),!0)}function gg(i){let e=Object.entries(i);for(let t=e.length-1;t>=0;t--){let[n,s]=e[t];if(mu(s))return{key:n,result:s}}}function i3(i){let e=typeof i=="string"?Ll(i):i;return wc({...e,hash:""})}function hO(i,e){return i.pathname!==e.pathname||i.search!==e.search?!1:i.hash===""?e.hash!=="":i.hash===e.hash?!0:e.hash!==""}function pO(i){return n3(i.result)&&KN.has(i.result.status)}function Fa(i){return i.type==="error"}function mu(i){return(i&&i.type)==="redirect"}function Y2(i){return typeof i=="object"&&i!=null&&"type"in i&&"data"in i&&"init"in i&&i.type==="DataWithResponseInit"}function n3(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.headers=="object"&&typeof i.body<"u"}function fO(i){return XN.has(i.toUpperCase())}function mo(i){return YN.has(i.toUpperCase())}function A1(i){return new URLSearchParams(i).getAll("index").some(e=>e==="")}function jp(i,e){let t=typeof e=="string"?Ll(e).search:e.search;if(i[i.length-1].route.index&&A1(t||""))return i[i.length-1];let n=KE(i);return n[n.length-1]}function Z2(i){let{formMethod:e,formAction:t,formEncType:n,text:s,formData:l,json:u}=i;if(!(!e||!t||!n)){if(s!=null)return{formMethod:e,formAction:t,formEncType:n,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:e,formAction:t,formEncType:n,formData:l,json:void 0,text:void 0};if(u!==void 0)return{formMethod:e,formAction:t,formEncType:n,formData:void 0,json:u,text:void 0}}}function V0(i,e){return e?{state:"loading",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:i,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function mO(i,e){return{state:"submitting",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Sp(i,e){return i?{state:"loading",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function gO(i,e){return{state:"submitting",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e?e.data:void 0}}function nc(i){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:i}}function yO(i,e){try{let t=i.sessionStorage.getItem(JE);if(t){let n=JSON.parse(t);for(let[s,l]of Object.entries(n||{}))l&&Array.isArray(l)&&e.set(s,new Set(l||[]))}}catch{}}function xO(i,e){if(e.size>0){let t={};for(let[n,s]of e)t[n]=[...s];try{i.sessionStorage.setItem(JE,JSON.stringify(t))}catch(n){ms(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function bO(){let i,e,t=new Promise((n,s)=>{i=async l=>{n(l);try{await t}catch{}},e=async l=>{s(l);try{await t}catch{}}});return{promise:t,resolve:i,reject:e}}var $u=$e.createContext(null);$u.displayName="DataRouter";var Zf=$e.createContext(null);Zf.displayName="DataRouterState";var M1=$e.createContext({isTransitioning:!1});M1.displayName="ViewTransition";var r3=$e.createContext(new Map);r3.displayName="Fetchers";var vO=$e.createContext(null);vO.displayName="Await";var Eo=$e.createContext(null);Eo.displayName="Navigation";var hx=$e.createContext(null);hx.displayName="Location";var ko=$e.createContext({outlet:null,matches:[],isDataRoute:!1});ko.displayName="Route";var P1=$e.createContext(null);P1.displayName="RouteError";function _O(i,{relative:e}={}){In(bh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=$e.useContext(Eo),{hash:s,pathname:l,search:u}=Xf(i,{relative:e}),r=l;return t!=="/"&&(r=l==="/"?t:Vo([t,l])),n.createHref({pathname:r,search:u,hash:s})}function bh(){return $e.useContext(hx)!=null}function zl(){return In(bh(),"useLocation() may be used only in the context of a <Router> component."),$e.useContext(hx).location}var s3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function a3(i){$e.useContext(Eo).static||$e.useLayoutEffect(i)}function I1(){let{isDataRoute:i}=$e.useContext(ko);return i?zO():wO()}function wO(){In(bh(),"useNavigate() may be used only in the context of a <Router> component.");let i=$e.useContext($u),{basename:e,navigator:t}=$e.useContext(Eo),{matches:n}=$e.useContext(ko),{pathname:s}=zl(),l=JSON.stringify(ux(n)),u=$e.useRef(!1);return a3(()=>{u.current=!0}),$e.useCallback((p,f={})=>{if(ms(u.current,s3),!u.current)return;if(typeof p=="number"){t.go(p);return}let g=dx(p,JSON.parse(l),s,f.relative==="path");i==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Vo([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,l,s,i])}var TO=$e.createContext(null);function CO(i){let e=$e.useContext(ko).outlet;return e&&$e.createElement(TO.Provider,{value:i},e)}function Xf(i,{relative:e}={}){let{matches:t}=$e.useContext(ko),{pathname:n}=zl(),s=JSON.stringify(ux(t));return $e.useMemo(()=>dx(i,JSON.parse(s),n,e==="path"),[i,s,n,e])}function SO(i,e,t,n){In(bh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=$e.useContext(Eo),{matches:l}=$e.useContext(ko),u=l[l.length-1],r=u?u.params:{},p=u?u.pathname:"/",f=u?u.pathnameBase:"/",g=u&&u.route;{let E=g&&g.path||"";c3(p,!g||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let b=zl(),y;y=b;let w=y.pathname||"/",v=w;if(f!=="/"){let E=f.replace(/^\//,"").split("/");v="/"+w.replace(/^\//,"").split("/").slice(E.length).join("/")}let T=lc(i,{pathname:v});return ms(g||T!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),ms(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),PO(T&&T.map(E=>Object.assign({},E,{params:Object.assign({},r,E.params),pathname:Vo([f,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?f:Vo([f,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),l,t,n)}function EO(){let i=l3(),e=Yf(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},u=null;return console.error("Error handled by React Router default ErrorBoundary:",i),u=$e.createElement($e.Fragment,null,$e.createElement("p",null," Hey developer "),$e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$e.createElement("code",{style:l},"ErrorBoundary")," or"," ",$e.createElement("code",{style:l},"errorElement")," prop on your route.")),$e.createElement($e.Fragment,null,$e.createElement("h2",null,"Unexpected Application Error!"),$e.createElement("h3",{style:{fontStyle:"italic"}},e),t?$e.createElement("pre",{style:s},t):null,u)}var kO=$e.createElement(EO,null),AO=class extends $e.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?$e.createElement(ko.Provider,{value:this.props.routeContext},$e.createElement(P1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function MO({routeContext:i,match:e,children:t}){let n=$e.useContext($u);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),$e.createElement(ko.Provider,{value:i},t)}function PO(i,e=[],t=null,n=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let s=i,l=t==null?void 0:t.errors;if(l!=null){let p=s.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);In(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let u=!1,r=-1;if(t)for(let p=0;p<s.length;p++){let f=s[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(r=p),f.route.id){let{loaderData:g,errors:b}=t,y=f.route.loader&&!g.hasOwnProperty(f.route.id)&&(!b||b[f.route.id]===void 0);if(f.route.lazy||y){u=!0,r>=0?s=s.slice(0,r+1):s=[s[0]];break}}}return s.reduceRight((p,f,g)=>{let b,y=!1,w=null,v=null;t&&(b=l&&f.route.id?l[f.route.id]:void 0,w=f.route.errorElement||kO,u&&(r<0&&g===0?(c3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,v=null):r===g&&(y=!0,v=f.route.hydrateFallbackElement||null)));let T=e.concat(s.slice(0,g+1)),S=()=>{let E;return b?E=w:y?E=v:f.route.Component?E=$e.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=p,$e.createElement(MO,{match:f,routeContext:{outlet:p,matches:T,isDataRoute:t!=null},children:E})};return t&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?$e.createElement(AO,{location:t.location,revalidation:t.revalidation,component:w,error:b,children:S(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):S()},null)}function D1(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function IO(i){let e=$e.useContext($u);return In(e,D1(i)),e}function o3(i){let e=$e.useContext(Zf);return In(e,D1(i)),e}function DO(i){let e=$e.useContext(ko);return In(e,D1(i)),e}function R1(i){let e=DO(i),t=e.matches[e.matches.length-1];return In(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function RO(){return R1("useRouteId")}function LO(){let{matches:i,loaderData:e}=o3("useMatches");return $e.useMemo(()=>i.map(t=>YE(t,e)),[i,e])}function l3(){var n;let i=$e.useContext(P1),e=o3("useRouteError"),t=R1("useRouteError");return i!==void 0?i:(n=e.errors)==null?void 0:n[t]}function zO(){let{router:i}=IO("useNavigate"),e=R1("useNavigate"),t=$e.useRef(!1);return a3(()=>{t.current=!0}),$e.useCallback(async(s,l={})=>{ms(t.current,s3),t.current&&(typeof s=="number"?i.navigate(s):await i.navigate(s,{fromRouteId:e,...l}))},[i,e])}var X2={};function c3(i,e,t){!e&&!X2[i]&&(X2[i]=!0,ms(!1,t))}var K2={};function Q2(i,e){!i&&!K2[e]&&(K2[e]=!0,console.warn(e))}function NO(i){let e={hasErrorBoundary:i.hasErrorBoundary||i.ErrorBoundary!=null||i.errorElement!=null};return i.Component&&(i.element&&ms(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:$e.createElement(i.Component),Component:void 0})),i.HydrateFallback&&(i.hydrateFallbackElement&&ms(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:$e.createElement(i.HydrateFallback),HydrateFallback:void 0})),i.ErrorBoundary&&(i.errorElement&&ms(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:$e.createElement(i.ErrorBoundary),ErrorBoundary:void 0})),e}var OO=class{constructor(){this.status="pending",this.promise=new Promise((i,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",i(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function jO({router:i,flushSync:e}){let[t,n]=$e.useState(i.state),[s,l]=$e.useState(),[u,r]=$e.useState({isTransitioning:!1}),[p,f]=$e.useState(),[g,b]=$e.useState(),[y,w]=$e.useState(),v=$e.useRef(new Map),T=$e.useCallback((A,{deletedFetchers:D,flushSync:C,viewTransitionOpts:I})=>{A.fetchers.forEach((W,Y)=>{W.data!==void 0&&v.current.set(Y,W.data)}),D.forEach(W=>v.current.delete(W)),Q2(C===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let N=i.window!=null&&i.window.document!=null&&typeof i.window.document.startViewTransition=="function";if(Q2(I==null||N,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!I||!N){e&&C?e(()=>n(A)):$e.startTransition(()=>n(A));return}if(e&&C){e(()=>{g&&(p&&p.resolve(),g.skipTransition()),r({isTransitioning:!0,flushSync:!0,currentLocation:I.currentLocation,nextLocation:I.nextLocation})});let W=i.window.document.startViewTransition(()=>{e(()=>n(A))});W.finished.finally(()=>{e(()=>{f(void 0),b(void 0),l(void 0),r({isTransitioning:!1})})}),e(()=>b(W));return}g?(p&&p.resolve(),g.skipTransition(),w({state:A,currentLocation:I.currentLocation,nextLocation:I.nextLocation})):(l(A),r({isTransitioning:!0,flushSync:!1,currentLocation:I.currentLocation,nextLocation:I.nextLocation}))},[i.window,e,g,p]);$e.useLayoutEffect(()=>i.subscribe(T),[i,T]),$e.useEffect(()=>{u.isTransitioning&&!u.flushSync&&f(new OO)},[u]),$e.useEffect(()=>{if(p&&s&&i.window){let A=s,D=p.promise,C=i.window.document.startViewTransition(async()=>{$e.startTransition(()=>n(A)),await D});C.finished.finally(()=>{f(void 0),b(void 0),l(void 0),r({isTransitioning:!1})}),b(C)}},[s,p,i.window]),$e.useEffect(()=>{p&&s&&t.location.key===s.location.key&&p.resolve()},[p,g,t.location,s]),$e.useEffect(()=>{!u.isTransitioning&&y&&(l(y.state),r({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),w(void 0))},[u.isTransitioning,y]);let S=$e.useMemo(()=>({createHref:i.createHref,encodeLocation:i.encodeLocation,go:A=>i.navigate(A),push:(A,D,C)=>i.navigate(A,{state:D,preventScrollReset:C==null?void 0:C.preventScrollReset}),replace:(A,D,C)=>i.navigate(A,{replace:!0,state:D,preventScrollReset:C==null?void 0:C.preventScrollReset})}),[i]),E=i.basename||"/",x=$e.useMemo(()=>({router:i,navigator:S,static:!1,basename:E}),[i,S,E]);return $e.createElement($e.Fragment,null,$e.createElement($u.Provider,{value:x},$e.createElement(Zf.Provider,{value:t},$e.createElement(r3.Provider,{value:v.current},$e.createElement(M1.Provider,{value:u},$e.createElement(UO,{basename:E,location:t.location,navigationType:t.historyAction,navigator:S},$e.createElement(FO,{routes:i.routes,future:i.future,state:t})))))),null)}var FO=$e.memo(BO);function BO({routes:i,future:e,state:t}){return SO(i,void 0,t,e)}function $O({to:i,replace:e,state:t,relative:n}){In(bh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=$e.useContext(Eo);ms(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=$e.useContext(ko),{pathname:u}=zl(),r=I1(),p=dx(i,ux(l),u,n==="path"),f=JSON.stringify(p);return $e.useEffect(()=>{r(JSON.parse(f),{replace:e,state:t,relative:n})},[r,f,n,e,t]),null}function u3(i){return CO(i.context)}function UO({basename:i="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:l=!1}){In(!bh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=i.replace(/^\/*/,"/"),r=$e.useMemo(()=>({basename:u,navigator:s,static:l,future:{}}),[u,s,l]);typeof t=="string"&&(t=Ll(t));let{pathname:p="/",search:f="",hash:g="",state:b=null,key:y="default"}=t,w=$e.useMemo(()=>{let v=To(p,u);return v==null?null:{location:{pathname:v,search:f,hash:g,state:b,key:y},navigationType:n}},[u,p,f,g,b,y,n]);return ms(w!=null,`<Router basename="${u}"> is not able to match the URL "${p}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:$e.createElement(Eo.Provider,{value:r},$e.createElement(hx.Provider,{children:e,value:w}))}var Vg="get",Gg="application/x-www-form-urlencoded";function px(i){return i!=null&&typeof i.tagName=="string"}function VO(i){return px(i)&&i.tagName.toLowerCase()==="button"}function GO(i){return px(i)&&i.tagName.toLowerCase()==="form"}function HO(i){return px(i)&&i.tagName.toLowerCase()==="input"}function qO(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function WO(i,e){return i.button===0&&(!e||e==="_self")&&!qO(i)}var yg=null;function YO(){if(yg===null)try{new FormData(document.createElement("form"),0),yg=!1}catch{yg=!0}return yg}var ZO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function G0(i){return i!=null&&!ZO.has(i)?(ms(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gg}"`),null):i}function XO(i,e){let t,n,s,l,u;if(GO(i)){let r=i.getAttribute("action");n=r?To(r,e):null,t=i.getAttribute("method")||Vg,s=G0(i.getAttribute("enctype"))||Gg,l=new FormData(i)}else if(VO(i)||HO(i)&&(i.type==="submit"||i.type==="image")){let r=i.form;if(r==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||r.getAttribute("action");if(n=p?To(p,e):null,t=i.getAttribute("formmethod")||r.getAttribute("method")||Vg,s=G0(i.getAttribute("formenctype"))||G0(r.getAttribute("enctype"))||Gg,l=new FormData(r,i),!YO()){let{name:f,type:g,value:b}=i;if(g==="image"){let y=f?`${f}.`:"";l.append(`${y}x`,"0"),l.append(`${y}y`,"0")}else f&&l.append(f,b)}}else{if(px(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Vg,n=null,s=Gg,u=i}return l&&s==="text/plain"&&(u=l,l=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:l,body:u}}function L1(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function KO(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function QO(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function JO(i,e,t){let n=await Promise.all(i.map(async s=>{let l=e.routes[s.route.id];if(l){let u=await KO(l,t);return u.links?u.links():[]}return[]}));return n9(n.flat(1).filter(QO).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function J2(i,e,t,n,s,l){let u=(p,f)=>t[f]?p.route.id!==t[f].route.id:!0,r=(p,f)=>{var g;return t[f].pathname!==p.pathname||((g=t[f].route.path)==null?void 0:g.endsWith("*"))&&t[f].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,f)=>u(p,f)||r(p,f)):l==="data"?e.filter((p,f)=>{var b;let g=n.routes[p.route.id];if(!g||!g.hasLoader)return!1;if(u(p,f)||r(p,f))return!0;if(p.route.shouldRevalidate){let y=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((b=t[0])==null?void 0:b.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function e9(i,e){return t9(i.map(t=>{let n=e.routes[t.route.id];if(!n)return[];let s=[n.module];return n.imports&&(s=s.concat(n.imports)),s}).flat(1))}function t9(i){return[...new Set(i)]}function i9(i){let e={},t=Object.keys(i).sort();for(let n of t)e[n]=i[n];return e}function n9(i,e){let t=new Set;return new Set(e),i.reduce((n,s)=>{let l=JSON.stringify(i9(s));return t.has(l)||(t.add(l),n.push({key:l,link:s})),n},[])}function r9(i){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function s9(){let i=$e.useContext($u);return L1(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function a9(){let i=$e.useContext(Zf);return L1(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var z1=$e.createContext(void 0);z1.displayName="FrameworkContext";function d3(){let i=$e.useContext(z1);return L1(i,"You must render this element inside a <HydratedRouter> element"),i}function o9(i,e){let t=$e.useContext(z1),[n,s]=$e.useState(!1),[l,u]=$e.useState(!1),{onFocus:r,onBlur:p,onMouseEnter:f,onMouseLeave:g,onTouchStart:b}=e,y=$e.useRef(null);$e.useEffect(()=>{if(i==="render"&&u(!0),i==="viewport"){let T=E=>{E.forEach(x=>{u(x.isIntersecting)})},S=new IntersectionObserver(T,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[i]),$e.useEffect(()=>{if(n){let T=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(T)}}},[n]);let w=()=>{s(!0)},v=()=>{s(!1),u(!1)};return t?i!=="intent"?[l,y,{}]:[l,y,{onFocus:Ep(r,w),onBlur:Ep(p,v),onMouseEnter:Ep(f,w),onMouseLeave:Ep(g,v),onTouchStart:Ep(b,w)}]:[!1,y,{}]}function Ep(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function l9({page:i,...e}){let{router:t}=s9(),n=$e.useMemo(()=>lc(t.routes,i,t.basename),[t.routes,i,t.basename]);return n?$e.createElement(u9,{page:i,matches:n,...e}):null}function c9(i){let{manifest:e,routeModules:t}=d3(),[n,s]=$e.useState([]);return $e.useEffect(()=>{let l=!1;return JO(i,e,t).then(u=>{l||s(u)}),()=>{l=!0}},[i,e,t]),n}function u9({page:i,matches:e,...t}){let n=zl(),{manifest:s,routeModules:l}=d3(),{loaderData:u,matches:r}=a9(),p=$e.useMemo(()=>J2(i,e,r,s,n,"data"),[i,e,r,s,n]),f=$e.useMemo(()=>J2(i,e,r,s,n,"assets"),[i,e,r,s,n]),g=$e.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let w=new Set,v=!1;if(e.forEach(S=>{var x;let E=s.routes[S.route.id];!E||!E.hasLoader||(!p.some(A=>A.route.id===S.route.id)&&S.route.id in u&&((x=l[S.route.id])!=null&&x.shouldRevalidate)||E.hasClientLoader?v=!0:w.add(S.route.id))}),w.size===0)return[];let T=r9(i);return v&&w.size>0&&T.searchParams.set("_routes",e.filter(S=>w.has(S.route.id)).map(S=>S.route.id).join(",")),[T.pathname+T.search]},[u,n,s,p,e,i,l]),b=$e.useMemo(()=>e9(f,s),[f,s]),y=c9(f);return $e.createElement($e.Fragment,null,g.map(w=>$e.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),b.map(w=>$e.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),y.map(({key:w,link:v})=>$e.createElement("link",{key:w,...v})))}function d9(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var h3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{h3&&(window.__reactRouterVersion="7.1.3")}catch{}function h9(i,e){return tO({basename:e==null?void 0:e.basename,future:e==null?void 0:e.future,history:EN({window:e==null?void 0:e.window}),hydrationData:p9(),routes:i,mapRouteProperties:NO,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function p9(){let i=window==null?void 0:window.__staticRouterHydrationData;return i&&i.errors&&(i={...i,errors:f9(i.errors)}),i}function f9(i){if(!i)return null;let e=Object.entries(i),t={};for(let[n,s]of e)if(s&&s.__type==="RouteErrorResponse")t[n]=new fy(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let u=new l(s.message);u.stack="",t[n]=u}catch{}}if(t[n]==null){let l=new Error(s.message);l.stack="",t[n]=l}}else t[n]=s;return t}var p3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,f3=$e.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:l,replace:u,state:r,target:p,to:f,preventScrollReset:g,viewTransition:b,...y},w){let{basename:v}=$e.useContext(Eo),T=typeof f=="string"&&p3.test(f),S,E=!1;if(typeof f=="string"&&T&&(S=f,h3))try{let Y=new URL(window.location.href),X=f.startsWith("//")?new URL(Y.protocol+f):new URL(f),O=To(X.pathname,v);X.origin===Y.origin&&O!=null?f=O+X.search+X.hash:E=!0}catch{ms(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=_O(f,{relative:s}),[A,D,C]=o9(n,y),I=y9(f,{replace:u,state:r,target:p,preventScrollReset:g,relative:s,viewTransition:b});function N(Y){e&&e(Y),Y.defaultPrevented||I(Y)}let W=$e.createElement("a",{...y,...C,href:S||x,onClick:E||l?e:N,ref:d9(w,D),target:p,"data-discover":!T&&t==="render"?"true":void 0});return A&&!T?$e.createElement($e.Fragment,null,W,$e.createElement(l9,{page:x})):W});f3.displayName="Link";var m3=$e.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:l,to:u,viewTransition:r,children:p,...f},g){let b=Xf(u,{relative:f.relative}),y=zl(),w=$e.useContext(Zf),{navigator:v,basename:T}=$e.useContext(Eo),S=w!=null&&w9(b)&&r===!0,E=v.encodeLocation?v.encodeLocation(b).pathname:b.pathname,x=y.pathname,A=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(x=x.toLowerCase(),A=A?A.toLowerCase():null,E=E.toLowerCase()),A&&T&&(A=To(A,T)||A);const D=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let C=x===E||!s&&x.startsWith(E)&&x.charAt(D)==="/",I=A!=null&&(A===E||!s&&A.startsWith(E)&&A.charAt(E.length)==="/"),N={isActive:C,isPending:I,isTransitioning:S},W=C?e:void 0,Y;typeof n=="function"?Y=n(N):Y=[n,C?"active":null,I?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let X=typeof l=="function"?l(N):l;return $e.createElement(f3,{...f,"aria-current":W,className:Y,ref:g,style:X,to:u,viewTransition:r},typeof p=="function"?p(N):p)});m3.displayName="NavLink";var m9=$e.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:l,method:u=Vg,action:r,onSubmit:p,relative:f,preventScrollReset:g,viewTransition:b,...y},w)=>{let v=v9(),T=_9(r,{relative:f}),S=u.toLowerCase()==="get"?"get":"post",E=typeof r=="string"&&p3.test(r),x=A=>{if(p&&p(A),A.defaultPrevented)return;A.preventDefault();let D=A.nativeEvent.submitter,C=(D==null?void 0:D.getAttribute("formmethod"))||u;v(D||A.currentTarget,{fetcherKey:e,method:C,navigate:t,replace:s,state:l,relative:f,preventScrollReset:g,viewTransition:b})};return $e.createElement("form",{ref:w,method:S,action:T,onSubmit:n?p:x,...y,"data-discover":!E&&i==="render"?"true":void 0})});m9.displayName="Form";function g9(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function g3(i){let e=$e.useContext($u);return In(e,g9(i)),e}function y9(i,{target:e,replace:t,state:n,preventScrollReset:s,relative:l,viewTransition:u}={}){let r=I1(),p=zl(),f=Xf(i,{relative:l});return $e.useCallback(g=>{if(WO(g,e)){g.preventDefault();let b=t!==void 0?t:wc(p)===wc(f);r(i,{replace:b,state:n,preventScrollReset:s,relative:l,viewTransition:u})}},[p,r,f,t,n,e,i,s,l,u])}var x9=0,b9=()=>`__${String(++x9)}__`;function v9(){let{router:i}=g3("useSubmit"),{basename:e}=$e.useContext(Eo),t=RO();return $e.useCallback(async(n,s={})=>{let{action:l,method:u,encType:r,formData:p,body:f}=XO(n,e);if(s.navigate===!1){let g=s.fetcherKey||b9();await i.fetch(g,t,s.action||l,{preventScrollReset:s.preventScrollReset,formData:p,body:f,formMethod:s.method||u,formEncType:s.encType||r,flushSync:s.flushSync})}else await i.navigate(s.action||l,{preventScrollReset:s.preventScrollReset,formData:p,body:f,formMethod:s.method||u,formEncType:s.encType||r,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[i,e,t])}function _9(i,{relative:e}={}){let{basename:t}=$e.useContext(Eo),n=$e.useContext(ko);In(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),l={...Xf(i||".",{relative:e})},u=zl();if(i==null){l.search=u.search;let r=new URLSearchParams(l.search),p=r.getAll("index");if(p.some(g=>g==="")){r.delete("index"),p.filter(b=>b).forEach(b=>r.append("index",b));let g=r.toString();l.search=g?`?${g}`:""}}return(!i||i===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Vo([t,l.pathname])),wc(l)}function w9(i,e={}){let t=$e.useContext(M1);In(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=g3("useViewTransitionState"),s=Xf(i,{relative:e.relative});if(!t.isTransitioning)return!1;let l=To(t.currentLocation.pathname,n)||t.currentLocation.pathname,u=To(t.nextLocation.pathname,n)||t.nextLocation.pathname;return py(s.pathname,u)!=null||py(s.pathname,l)!=null}new TextEncoder;/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function T9(i){return $e.createElement(jO,{flushSync:m5.flushSync,...i})}const C9=()=>{const i=l3();return console.error(i),Yf(i)?he.jsxs("div",{id:"error-page",children:[he.jsx("h1",{children:Qe.t("Oops!")}),he.jsx("p",{children:Qe.t("Sorry, an unexpected error has occurred.")}),he.jsx("p",{children:he.jsx("i",{children:i.statusText})})]}):he.jsxs("div",{id:"error-page",children:[he.jsx("h1",{children:Qe.t("Oops!")}),he.jsx("p",{children:Qe.t("Sorry, an unexpected error has occurred.")})]})},y3="1400px",S9={maxWidth:y3,marginLeft:"auto",marginRight:"auto",padding:"20px 10px",width:"100%"},eT=({children:i,maxWidth:e})=>{const t=LO().some(n=>{var s;return!!((s=n.handle)!=null&&s.fullWidth)});return he.jsx("div",{style:{...S9,maxWidth:t?"none":e||y3,width:"100%"},children:i})},E9="_drawerWrapper_1jnc9_1",k9={drawerWrapper:E9};function tv(){return tv=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},tv.apply(this,arguments)}var A9=function(e,t){var n={left:{top:0,left:0,transform:"translate3d(-100%, 0, 0)",width:t,height:"100vh"},right:{top:0,right:0,transform:"translate3d(100%, 0, 0)",width:t,height:"100vh"},bottom:{left:0,right:0,bottom:0,transform:"translate3d(0, 100%, 0)",width:"100%",height:t},top:{left:0,right:0,top:0,transform:"translate3d(0, -100%, 0)",width:"100%",height:t}};return n[e]},N1=function(e){var t=e.open,n=e.onClose,s=n===void 0?function(){}:n,l=e.children,u=e.style,r=e.enableOverlay,p=r===void 0?!0:r,f=e.overlayColor,g=f===void 0?"#000":f,b=e.overlayOpacity,y=b===void 0?.4:b,w=e.zIndex,v=w===void 0?100:w,T=e.duration,S=T===void 0?500:T,E=e.direction,x=e.size,A=x===void 0?250:x,D=e.className,C=e.customIdSuffix,I=e.lockBackgroundScroll,N=I===void 0?!1:I,W=e.overlayClassName,Y=W===void 0?"":W,X=$e.useRef(null);$e.useEffect(function(){var L=function(){X.current=window.document.querySelector("body"),X.current&&N&&(X.current.style.overflow=t?"hidden":"")};L()},[t]);var O=$e.useMemo(function(){return C||(Math.random()+1).toString(36).substring(7)},[C]),V={backgroundColor:g.toString(),opacity:y,zIndex:v},$=tv({zIndex:v+1,transitionDuration:S+"ms"},A9(E,A),u);return fe.createElement("div",{id:"EZDrawer"+O,className:"EZDrawer"},fe.createElement("input",{type:"checkbox",id:"EZDrawer__checkbox"+O,className:"EZDrawer__checkbox",onChange:s,checked:t}),fe.createElement("nav",{role:"navigation",id:"EZDrawer__container"+O,style:$,className:"EZDrawer__container "+D},l),p&&fe.createElement("label",{htmlFor:"EZDrawer__checkbox"+O,id:"EZDrawer__overlay"+O,className:"EZDrawer__overlay "+Y,style:V}))};const M9="_formWrapper_6d4wk_1",P9={formWrapper:M9},I9=({value:i,onChange:e})=>he.jsx("div",{children:he.jsxs(hs,{onChange:({selected:t})=>e(t),selected:i,label:"Period type",children:[he.jsx(_o,{value:"week",label:"Weekly"}),he.jsx(_o,{value:"month",label:"Monthly"})]})}),D9="_datePicker_1yiz7_1",R9="_label_1yiz7_5",L9="_content_1yiz7_14",z9="_box_1yiz7_18",N9="_inputDiv_1yiz7_23",O9="_input_1yiz7_23",Rd={datePicker:D9,label:R9,content:L9,box:z9,inputDiv:N9,input:O9},tT=({label:i,name:e,onChange:t,periodeType:n})=>{const s=$e.useRef(null);return he.jsxs("div",{className:Rd.datePicker,style:{opacity:n===""?.6:1},children:[he.jsx("label",{className:Rd.label,children:i}),he.jsx("div",{className:Rd.content,children:he.jsx("div",{className:Rd.box,children:he.jsx("div",{className:Rd.inputDiv,children:he.jsx("input",{disabled:n==="",className:Rd.input,ref:s,type:n,name:e,onChange:l=>t(l.target.value)})})})})]})},j9="_timePeriodeSelector_fpkps_1",F9="_timePeriodeSelectorInputFields_fpkps_7",B9="_timePeriodeSelectorInputFieldsChild_fpkps_13",xg={timePeriodeSelector:j9,timePeriodeSelectorInputFields:F9,timePeriodeSelectorInputFieldsChild:B9},$9=(i,e,t)=>t==="week"?U9(i,e):t==="month"?H9(i,e):[],U9=(i,e)=>{let[t,n]=i.split("-W").map(Number),[s,l]=e.split("-W").map(Number);if(s-t>100)return[];let u=[];for(let r=t;r<=s;r++){let p=G9(r),f=r===t?n:1,g=r===s?l:p;for(let b=f;b<=g;b++){let y=`${r}W${String(b).padStart(2,"0")}`;u.push({endDate:void 0,startDate:void 0,id:y})}}return u},V9=i=>{i=new Date(+i),i.setHours(0,0,0,0),i.setDate(i.getDate()+4-(i.getDay()||7));var e=new Date(i.getFullYear(),0,1),t=Math.ceil(((i-e)/864e5+1)/7);return[i.getFullYear(),t]},G9=i=>{var e=new Date(i,11,31),t=V9(e)[1];return t==1?52:t},H9=(i,e)=>{const[t,n]=i.split("-").map(Number),[s,l]=e.split("-").map(Number);if(s-t>100)return[];let u=[],r=t,p=n;for(;r<s||r===s&&p<=l;){let f=String(p).padStart(2,"0");u.push({id:`${r}${f}`,endDate:void 0,startDate:void 0}),p++,p>12&&(p=1,r++)}return u},x3=({setTimePeriods:i})=>{const[e,t]=$e.useState(""),[n,s]=$e.useState(""),[l,u]=$e.useState(""),r=p=>{s(""),u(""),t(p)};return $e.useEffect(()=>{i($9(n,l,e))},[n,l]),he.jsxs("div",{children:[he.jsx("h3",{children:"Period"}),he.jsxs("div",{className:xg.timePeriodeSelector,children:[he.jsx(I9,{value:e,onChange:r}),he.jsxs("div",{className:xg.timePeriodeSelectorInputFields,children:[he.jsx("div",{className:xg.timePeriodeSelectorInputFieldsChild,children:he.jsx(tT,{periodeType:e,label:"Dateset start:",name:"",onChange:s})}),he.jsx("div",{className:xg.timePeriodeSelectorInputFieldsChild,children:he.jsx(tT,{periodeType:e,label:"Dateset end:",name:"",onChange:u})})]})]})]})},q9="_error_1rljs_1",W9={error:q9},Y9={roots:{resource:"organisationUnits",params:()=>({fields:["id","displayName~rename(name)","path"],userDataViewFallback:!0})}},Z9=()=>{var n;const{loading:i,error:e,data:t}=Aa(Y9);return{roots:(n=t==null?void 0:t.roots)==null?void 0:n.organisationUnits,error:e,loading:i}},X9=({selectedOrgUnits:i,onChange:e})=>{const{roots:t,error:n}=Z9();return $e.useEffect(()=>{if(t&&!i){const[s]=t;e({...s,selected:[s.path]})}},[t]),t?he.jsxs("div",{children:[he.jsx("h3",{children:Qe.t("Organisation units")}),he.jsx(_E,{roots:t.map(s=>s.id),selected:i==null?void 0:i.map(s=>s.path),onChange:e,initiallyExpanded:t.map(s=>s.path)})]}):n?he.jsx("div",{children:n.message}):null},K9={levels:{resource:"organisationUnitLevels",params:{fields:["id","displayName~rename(name)","level"],order:"level:asc",paging:!1}}},Q9=()=>{var n;const{loading:i,error:e,data:t}=Aa(K9);return{levels:(n=t==null?void 0:t.levels)==null?void 0:n.organisationUnitLevels,error:e,loading:i}},J9="_selectField_2clxr_1",ej={selectField:J9},tj=({orgUnitLevels:i,onChange:e})=>{const{levels:t,loading:n,error:s}=Q9(),l=u=>{const r={id:u.selected,level:t.find(p=>p.id===u.selected).level};e(r)};return $e.useEffect(()=>{var u;(t==null?void 0:t.length)>2&&!i&&e({id:(u=t[1])==null?void 0:u.id,level:t[1].level})},[t,i,e]),t?he.jsx("div",{className:ej.selectField,children:he.jsx(hs,{label:Qe.t("Organisation unit level"),helpText:Qe.t("Organisation unit level to import data to"),tabIndex:"1",selected:i==null?void 0:i.id,loading:n,error:!!s,onChange:l,children:t.map((u,r)=>he.jsx(_o,{value:u.id,label:u.name},u.id))})}):null},b3=({setOrgUnits:i,orgUnits:e,orgUnitLevel:t,setOrgUnitLevel:n})=>{const s=u=>{u.checked?i([...e,u]):i(e.filter(r=>r.path!==u.path))};function l(){if(e.length===0)return!0;const u=e[0].path.split("/").length;return e.every(r=>r.path.split("/").length===u)}return he.jsxs(he.Fragment,{children:[he.jsx(X9,{selectedOrgUnits:e,onChange:u=>{s(u)}}),!l()&&he.jsx("p",{className:W9.error,children:"Only select organization units that are one the same level."}),he.jsx(tj,{orgUnitLevels:t,onChange:n})]})},ij=({dataElements:i=[],periodes:e=[],orgUnit:t={}}={})=>({request:{resource:"analytics",params:{paging:!1,dimension:`dx:${i.join(";")},ou:${t},pe:${e.join(";")}`}}}),nj=(i,e,t)=>{var r,p,f;const n=i.map(g=>g.dataSource);if(n.length===0)return{data:[],metaData:{},error:"",loading:!1};const{loading:s,error:l,data:u}=Aa(ij({dataElements:n,periodes:e,orgUnit:t}));return!s&&u&&!l?{data:(r=u==null?void 0:u.request)==null?void 0:r.rows,metaData:(f=(p=u==null?void 0:u.request)==null?void 0:p.metaData)==null?void 0:f.items,error:l,loading:s}:{data:u,metaData:{},error:l,loading:s}},rj={geojson:{resource:"organisationUnits.geojson",params:({level:i})=>({level:i})}},sj=i=>({features:i.geojson.features.map(({type:e,id:t,geometry:n,properties:s})=>({type:e,id:t,properties:s,geometry:n})),...i}),aj=(i,e)=>({type:"FeatureCollection",features:i.features.filter(t=>e.some(n=>n.id===t.id||t.properties.parentGraph.includes(n.id)))}),oj=(i,e)=>{const{data:t,loading:n,error:s}=Aa(rj,{variables:{level:i}});return{data:t&&aj(sj(t),e),error:s,loading:n}},lj="_text_b9rbg_1",cj={text:lj},uj=({selectedPeriodItems:i,setGeoJSon:e,setObservations:t,setFeatureDataItemMapper:n,setAnalyticsMetaData:s,setStartDownload:l,orgUnitLevel:u,selectedOrgUnits:r,analyticsDataLayers:p,setErrorMessages:f})=>{if(u==null)return he.jsx(he.Fragment,{});const g="LEVEL-"+u.id+";"+r.map(C=>C.id).join(";"),b=C=>C.map(I=>I.id),{data:y,error:w,loading:v,metaData:T}=nj(p,b(i),g),{data:S,error:E,loading:x}=oj(u.level,r),A=C=>C.map(I=>({featureName:p.filter(N=>N.dataSource===I)[0].feature,dataItemId:I})),D=C=>{const I=[...new Set(C.map(W=>W[0]))],N=A(I);return n(N),C.map(W=>({featureName:N.filter(Y=>Y.dataItemId===W[0])[0].featureName,orgUnit:W[1],period:W[2],value:parseFloat(W[3])}))};return $e.useEffect(()=>{if(!(v||x)&&(y&&S&&(f([]),e(S),t(D(y)),s(T)),w||E)){const C=[];w&&C.push({description:JSON.stringify(w),title:"Analytics request failed"}),E&&C.push({description:JSON.stringify(E),title:"OrgUnits request failed"}),f(C),l(I=>({...I,startDownload:!1}))}},[v,x]),he.jsx("p",{className:cj.text,children:"Downloading data.."})};var v3={exports:{}};(function(i){(function(e,t){i.exports?(t.default=t,i.exports=e&&e.document?t(e):t):(e.Highcharts&&e.Highcharts.error(16,!0),e.Highcharts=t(e))})(typeof window<"u"?window:$a,function(e){var t={};function n(s,l,u,r){!s.hasOwnProperty(l)&&(s[l]=r.apply(null,u),e&&typeof CustomEvent=="function"&&e.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:l,module:s[l]}})))}return n(t,"Core/Globals.js",[],function(){var s,l;return(l=s||(s={})).SVG_NS="http://www.w3.org/2000/svg",l.product="Highcharts",l.version="11.4.8",l.win=e!==void 0?e:{},l.doc=l.win.document,l.svg=l.doc&&l.doc.createElementNS&&!!l.doc.createElementNS(l.SVG_NS,"svg").createSVGRect,l.userAgent=l.win.navigator&&l.win.navigator.userAgent||"",l.isChrome=l.win.chrome,l.isFirefox=l.userAgent.indexOf("Firefox")!==-1,l.isMS=/(edge|msie|trident)/i.test(l.userAgent)&&!l.win.opera,l.isSafari=!l.isChrome&&l.userAgent.indexOf("Safari")!==-1,l.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(l.userAgent),l.isWebKit=l.userAgent.indexOf("AppleWebKit")!==-1,l.deg2rad=2*Math.PI/360,l.hasBidiBug=l.isFirefox&&4>parseInt(l.userAgent.split("Firefox/")[1],10),l.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],l.noop=function(){},l.supportsPassiveEvents=function(){let u=!1;if(!l.isMS){let r=Object.defineProperty({},"passive",{get:function(){u=!0}});l.win.addEventListener&&l.win.removeEventListener&&(l.win.addEventListener("testPassive",l.noop,r),l.win.removeEventListener("testPassive",l.noop,r))}return u}(),l.charts=[],l.composed=[],l.dateFormats={},l.seriesTypes={},l.symbolSizes={},l.chartCount=0,s}),n(t,"Core/Utilities.js",[t["Core/Globals.js"]],function(s){let l,{charts:u,doc:r,win:p}=s;function f(L,R,G,U){let B=R?"Highcharts error":"Highcharts warning";L===32&&(L=`${B}: Deprecated member`);let H=S(L),q=H?`${B} #${L}: www.highcharts.com/errors/${L}/`:L.toString();if(U!==void 0){let se="";H&&(q+="?"),X(U,function(pe,ne){se+=`
 - ${ne}: ${pe}`,H&&(q+=encodeURI(ne)+"="+encodeURI(pe))}),q+=se}V(s,"displayError",{chart:G,code:L,message:q,params:U},function(){if(R)throw Error(q);p.console&&f.messages.indexOf(q)===-1&&console.warn(q)}),f.messages.push(q)}function g(L,R){return parseInt(L,R||10)}function b(L){return typeof L=="string"}function y(L){let R=Object.prototype.toString.call(L);return R==="[object Array]"||R==="[object Array Iterator]"}function w(L,R){return!!L&&typeof L=="object"&&(!R||!y(L))}function v(L){return w(L)&&typeof L.nodeType=="number"}function T(L){let R=L&&L.constructor;return!!(w(L,!0)&&!v(L)&&R&&R.name&&R.name!=="Object")}function S(L){return typeof L=="number"&&!isNaN(L)&&L<1/0&&L>-1/0}function E(L){return L!=null}function x(L,R,G){let U,B=b(R)&&!E(G),H=(q,se)=>{E(q)?L.setAttribute(se,q):B?(U=L.getAttribute(se))||se!=="class"||(U=L.getAttribute(se+"Name")):L.removeAttribute(se)};return b(R)?H(G,R):X(R,H),U}function A(L){return y(L)?L:[L]}function D(L,R){let G;for(G in L||(L={}),R)L[G]=R[G];return L}function C(){let L=arguments,R=L.length;for(let G=0;G<R;G++){let U=L[G];if(U!=null)return U}}function I(L,R){D(L.style,R)}function N(L){return Math.pow(10,Math.floor(Math.log(L)/Math.LN10))}function W(L,R){return L>1e14?L:parseFloat(L.toPrecision(R||14))}f.messages=[],Math.easeInOutSine=function(L){return-.5*(Math.cos(Math.PI*L)-1)};let Y=Array.prototype.find?function(L,R){return L.find(R)}:function(L,R){let G,U=L.length;for(G=0;G<U;G++)if(R(L[G],G))return L[G]};function X(L,R,G){for(let U in L)Object.hasOwnProperty.call(L,U)&&R.call(G||L[U],L[U],U,L)}function O(L,R,G){function U(q,se){let pe=L.removeEventListener;pe&&pe.call(L,q,se,!1)}function B(q){let se,pe;L.nodeName&&(R?(se={})[R]=!0:se=q,X(se,function(ne,le){if(q[le])for(pe=q[le].length;pe--;)U(le,q[le][pe].fn)}))}let H=typeof L=="function"&&L.prototype||L;if(Object.hasOwnProperty.call(H,"hcEvents")){let q=H.hcEvents;if(R){let se=q[R]||[];G?(q[R]=se.filter(function(pe){return G!==pe.fn}),U(R,G)):(B(q),q[R]=[])}else B(q),delete H.hcEvents}}function V(L,R,G,U){if(G=G||{},r.createEvent&&(L.dispatchEvent||L.fireEvent&&L!==s)){let B=r.createEvent("Events");B.initEvent(R,!0,!0),G=D(B,G),L.dispatchEvent?L.dispatchEvent(G):L.fireEvent(R,G)}else if(L.hcEvents){G.target||D(G,{preventDefault:function(){G.defaultPrevented=!0},target:L,type:R});let B=[],H=L,q=!1;for(;H.hcEvents;)Object.hasOwnProperty.call(H,"hcEvents")&&H.hcEvents[R]&&(B.length&&(q=!0),B.unshift.apply(B,H.hcEvents[R])),H=Object.getPrototypeOf(H);q&&B.sort((se,pe)=>se.order-pe.order),B.forEach(se=>{se.fn.call(L,G)===!1&&G.preventDefault()})}U&&!G.defaultPrevented&&U.call(L,G)}X({map:"map",each:"forEach",grep:"filter",reduce:"reduce",some:"some"},function(L,R){s[R]=function(G){return f(32,!1,void 0,{[`Highcharts.${R}`]:`use Array.${L}`}),Array.prototype[L].apply(G,[].slice.call(arguments,1))}});let $=function(){let L=Math.random().toString(36).substring(2,9)+"-",R=0;return function(){return"highcharts-"+(l?"":L)+R++}}();return p.jQuery&&(p.jQuery.fn.highcharts=function(){let L=[].slice.call(arguments);if(this[0])return L[0]?(new s[b(L[0])?L.shift():"Chart"](this[0],L[0],L[1]),this):u[x(this[0],"data-highcharts-chart")]}),{addEvent:function(L,R,G,U={}){let B=typeof L=="function"&&L.prototype||L;Object.hasOwnProperty.call(B,"hcEvents")||(B.hcEvents={});let H=B.hcEvents;s.Point&&L instanceof s.Point&&L.series&&L.series.chart&&(L.series.chart.runTrackerClick=!0);let q=L.addEventListener;q&&q.call(L,R,G,!!s.supportsPassiveEvents&&{passive:U.passive===void 0?R.indexOf("touch")!==-1:U.passive,capture:!1}),H[R]||(H[R]=[]);let se={fn:G,order:typeof U.order=="number"?U.order:1/0};return H[R].push(se),H[R].sort((pe,ne)=>pe.order-ne.order),function(){O(L,R,G)}},arrayMax:function(L){let R=L.length,G=L[0];for(;R--;)L[R]>G&&(G=L[R]);return G},arrayMin:function(L){let R=L.length,G=L[0];for(;R--;)L[R]<G&&(G=L[R]);return G},attr:x,clamp:function(L,R,G){return L>R?L<G?L:G:R},clearTimeout:function(L){E(L)&&clearTimeout(L)},correctFloat:W,createElement:function(L,R,G,U,B){let H=r.createElement(L);return R&&D(H,R),B&&I(H,{padding:"0",border:"none",margin:"0"}),G&&I(H,G),U&&U.appendChild(H),H},crisp:(L,R=0,G)=>{let U=R%2/2,B=G?-1:1;return(Math.round(L*B-U)+U)*B},css:I,defined:E,destroyObjectProperties:function(L,R,G){X(L,function(U,B){U!==R&&(U!=null&&U.destroy)&&U.destroy(),(U!=null&&U.destroy||!G)&&delete L[B]})},diffObjects:function(L,R,G,U){let B={};return function H(q,se,pe,ne){let le=G?se:q;X(q,function(ke,be){if(!ne&&U&&U.indexOf(be)>-1&&se[be]){ke=A(ke),pe[be]=[];for(let Ee=0;Ee<Math.max(ke.length,se[be].length);Ee++)se[be][Ee]&&(ke[Ee]===void 0?pe[be][Ee]=se[be][Ee]:(pe[be][Ee]={},H(ke[Ee],se[be][Ee],pe[be][Ee],ne+1)))}else w(ke,!0)&&!ke.nodeType?(pe[be]=y(ke)?[]:{},H(ke,se[be]||{},pe[be],ne+1),Object.keys(pe[be]).length!==0||be==="colorAxis"&&ne===0||delete pe[be]):(q[be]!==se[be]||be in q&&!(be in se))&&be!=="__proto__"&&be!=="constructor"&&(pe[be]=le[be])})}(L,R,B,0),B},discardElement:function(L){L&&L.parentElement&&L.parentElement.removeChild(L)},erase:function(L,R){let G=L.length;for(;G--;)if(L[G]===R){L.splice(G,1);break}},error:f,extend:D,extendClass:function(L,R){let G=function(){};return G.prototype=new L,D(G.prototype,R),G},find:Y,fireEvent:V,getClosestDistance:function(L,R){let G,U,B,H=!R;return L.forEach(q=>{if(q.length>1)for(B=q.length-1;B>0;B--)(U=q[B]-q[B-1])<0&&!H?(R==null||R(),R=void 0):U&&(G===void 0||U<G)&&(G=U)}),G},getMagnitude:N,getNestedProperty:function(L,R){let G=L.split(".");for(;G.length&&E(R);){let U=G.shift();if(U===void 0||U==="__proto__")return;if(U==="this"){let H;return w(R)&&(H=R["@this"]),H??R}let B=R[U];if(!E(B)||typeof B=="function"||typeof B.nodeType=="number"||B===p)return;R=B}return R},getStyle:function L(R,G,U){let B;if(G==="width"){let q=Math.min(R.offsetWidth,R.scrollWidth),se=R.getBoundingClientRect&&R.getBoundingClientRect().width;return se<q&&se>=q-1&&(q=Math.floor(se)),Math.max(0,q-(L(R,"padding-left",!0)||0)-(L(R,"padding-right",!0)||0))}if(G==="height")return Math.max(0,Math.min(R.offsetHeight,R.scrollHeight)-(L(R,"padding-top",!0)||0)-(L(R,"padding-bottom",!0)||0));let H=p.getComputedStyle(R,void 0);return H&&(B=H.getPropertyValue(G),C(U,G!=="opacity")&&(B=g(B))),B},inArray:function(L,R,G){return f(32,!1,void 0,{"Highcharts.inArray":"use Array.indexOf"}),R.indexOf(L,G)},insertItem:function(L,R){let G,U=L.options.index,B=R.length;for(G=L.options.isInternal?B:0;G<B+1;G++)if(!R[G]||S(U)&&U<C(R[G].options.index,R[G]._i)||R[G].options.isInternal){R.splice(G,0,L);break}return G},isArray:y,isClass:T,isDOMElement:v,isFunction:function(L){return typeof L=="function"},isNumber:S,isObject:w,isString:b,keys:function(L){return f(32,!1,void 0,{"Highcharts.keys":"use Object.keys"}),Object.keys(L)},merge:function(){let L,R=arguments,G={},U=function(H,q){return typeof H!="object"&&(H={}),X(q,function(se,pe){pe!=="__proto__"&&pe!=="constructor"&&(!w(se,!0)||T(se)||v(se)?H[pe]=q[pe]:H[pe]=U(H[pe]||{},se))}),H};R[0]===!0&&(G=R[1],R=Array.prototype.slice.call(R,2));let B=R.length;for(L=0;L<B;L++)G=U(G,R[L]);return G},normalizeTickInterval:function(L,R,G,U,B){let H,q=L;G=C(G,N(L));let se=L/G;for(!R&&(R=B?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],U===!1&&(G===1?R=R.filter(function(pe){return pe%1==0}):G<=.1&&(R=[1/G]))),H=0;H<R.length&&(q=R[H],(!B||!(q*G>=L))&&(B||!(se<=(R[H]+(R[H+1]||R[H]))/2)));H++);return W(q*G,-Math.round(Math.log(.001)/Math.LN10))},objectEach:X,offset:function(L){let R=r.documentElement,G=L.parentElement||L.parentNode?L.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:G.top+(p.pageYOffset||R.scrollTop)-(R.clientTop||0),left:G.left+(p.pageXOffset||R.scrollLeft)-(R.clientLeft||0),width:G.width,height:G.height}},pad:function(L,R,G){return Array((R||2)+1-String(L).replace("-","").length).join(G||"0")+L},pick:C,pInt:g,pushUnique:function(L,R){return 0>L.indexOf(R)&&!!L.push(R)},relativeLength:function(L,R,G){return/%$/.test(L)?R*parseFloat(L)/100+(G||0):parseFloat(L)},removeEvent:O,replaceNested:function(L,...R){let G,U;do for(U of(G=L,R))L=L.replace(U[0],U[1]);while(L!==G);return L},splat:A,stableSort:function(L,R){let G,U,B=L.length;for(U=0;U<B;U++)L[U].safeI=U;for(L.sort(function(H,q){return(G=R(H,q))===0?H.safeI-q.safeI:G}),U=0;U<B;U++)delete L[U].safeI},syncTimeout:function(L,R,G){return R>0?setTimeout(L,R,G):(L.call(0,G),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},uniqueKey:$,useSerialIds:function(L){return l=C(L,l)},wrap:function(L,R,G){let U=L[R];L[R]=function(){let B=arguments,H=this;return G.apply(this,[function(){return U.apply(H,arguments.length?arguments:B)}].concat([].slice.call(arguments)))}}}}),n(t,"Core/Chart/ChartDefaults.js",[],function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}}),n(t,"Core/Color/Palettes.js",[],function(){return{colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"]}}),n(t,"Core/Time.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{win:u}=s,{defined:r,error:p,extend:f,isNumber:g,isObject:b,merge:y,objectEach:w,pad:v,pick:T,splat:S,timeUnits:E}=l,x=s.isSafari&&u.Intl&&u.Intl.DateTimeFormat.prototype.formatRange,A=s.isSafari&&u.Intl&&!u.Intl.DateTimeFormat.prototype.formatRange;class D{constructor(I){this.options={},this.useUTC=!1,this.variableTimezone=!1,this.Date=u.Date,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.update(I)}get(I,N){if(this.variableTimezone||this.timezoneOffset){let W=N.getTime(),Y=W-this.getTimezoneOffset(N);N.setTime(Y);let X=N["getUTC"+I]();return N.setTime(W),X}return this.useUTC?N["getUTC"+I]():N["get"+I]()}set(I,N,W){if(this.variableTimezone||this.timezoneOffset){if(I==="Milliseconds"||I==="Seconds"||I==="Minutes"&&this.getTimezoneOffset(N)%36e5==0)return N["setUTC"+I](W);let Y=this.getTimezoneOffset(N),X=N.getTime()-Y;N.setTime(X),N["setUTC"+I](W);let O=this.getTimezoneOffset(N);return X=N.getTime()+O,N.setTime(X)}return this.useUTC||x&&I==="FullYear"?N["setUTC"+I](W):N["set"+I](W)}update(I={}){let N=T(I.useUTC,!0);this.options=I=y(!0,this.options,I),this.Date=I.Date||u.Date||Date,this.useUTC=N,this.timezoneOffset=N&&I.timezoneOffset||void 0,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.variableTimezone=N&&!!(I.getTimezoneOffset||I.timezone)}makeTime(I,N,W,Y,X,O){let V,$,L;return this.useUTC?(V=this.Date.UTC.apply(0,arguments),$=this.getTimezoneOffset(V),V+=$,$!==(L=this.getTimezoneOffset(V))?V+=L-$:$-36e5!==this.getTimezoneOffset(V-36e5)||A||(V-=36e5)):V=new this.Date(I,N,T(W,1),T(Y,0),T(X,0),T(O,0)).getTime(),V}timezoneOffsetFunction(){let I=this,N=this.options,W=N.getTimezoneOffset;return this.useUTC?N.timezone?Y=>{try{let X=`shortOffset,${N.timezone||""}`,[O,V,$,L,R=0]=(D.formatCache[X]=D.formatCache[X]||Intl.DateTimeFormat("en",{timeZone:N.timezone,timeZoneName:"shortOffset"})).format(Y).split(/(GMT|:)/).map(Number),G=-(36e5*($+R/60));if(g(G))return G}catch{p(34)}return 0}:this.useUTC&&W?Y=>6e4*W(Y.valueOf()):()=>6e4*(I.timezoneOffset||0):Y=>6e4*new Date(Y.toString()).getTimezoneOffset()}dateFormat(I,N,W){if(!r(N)||isNaN(N))return s.defaultOptions.lang&&s.defaultOptions.lang.invalidDate||"";I=T(I,"%Y-%m-%d %H:%M:%S");let Y=this,X=new this.Date(N),O=this.get("Hours",X),V=this.get("Day",X),$=this.get("Date",X),L=this.get("Month",X),R=this.get("FullYear",X),G=s.defaultOptions.lang,U=G&&G.weekdays,B=G&&G.shortWeekdays;return w(f({a:B?B[V]:U[V].substr(0,3),A:U[V],d:v($),e:v($,2," "),w:V,b:G.shortMonths[L],B:G.months[L],m:v(L+1),o:L+1,y:R.toString().substr(2,2),Y:R,H:v(O),k:O,I:v(O%12||12),l:O%12||12,M:v(this.get("Minutes",X)),p:O<12?"AM":"PM",P:O<12?"am":"pm",S:v(this.get("Seconds",X)),L:v(Math.floor(N%1e3),3)},s.dateFormats),function(H,q){for(;I.indexOf("%"+q)!==-1;)I=I.replace("%"+q,typeof H=="function"?H.call(Y,N):H)}),W?I.substr(0,1).toUpperCase()+I.substr(1):I}resolveDTLFormat(I){return b(I,!0)?I:{main:(I=S(I))[0],from:I[1],to:I[2]}}getTimeTicks(I,N,W,Y){let X,O,V,$,L=this,R=L.Date,G=[],U={},B=new R(N),H=I.unitRange,q=I.count||1;if(Y=T(Y,1),r(N)){L.set("Milliseconds",B,H>=E.second?0:q*Math.floor(L.get("Milliseconds",B)/q)),H>=E.second&&L.set("Seconds",B,H>=E.minute?0:q*Math.floor(L.get("Seconds",B)/q)),H>=E.minute&&L.set("Minutes",B,H>=E.hour?0:q*Math.floor(L.get("Minutes",B)/q)),H>=E.hour&&L.set("Hours",B,H>=E.day?0:q*Math.floor(L.get("Hours",B)/q)),H>=E.day&&L.set("Date",B,H>=E.month?1:Math.max(1,q*Math.floor(L.get("Date",B)/q))),H>=E.month&&(L.set("Month",B,H>=E.year?0:q*Math.floor(L.get("Month",B)/q)),O=L.get("FullYear",B)),H>=E.year&&(O-=O%q,L.set("FullYear",B,O)),H===E.week&&($=L.get("Day",B),L.set("Date",B,L.get("Date",B)-$+Y+($<Y?-7:0))),O=L.get("FullYear",B);let se=L.get("Month",B),pe=L.get("Date",B),ne=L.get("Hours",B);N=B.getTime(),(L.variableTimezone||!L.useUTC)&&r(W)&&(V=W-N>4*E.month||L.getTimezoneOffset(N)!==L.getTimezoneOffset(W));let le=B.getTime();for(X=1;le<W;)G.push(le),H===E.year?le=L.makeTime(O+X*q,0):H===E.month?le=L.makeTime(O,se+X*q):V&&(H===E.day||H===E.week)?le=L.makeTime(O,se,pe+X*q*(H===E.day?1:7)):V&&H===E.hour&&q>1?le=L.makeTime(O,se,pe,ne+X*q):le+=H*q,X++;G.push(le),H<=E.hour&&G.length<1e4&&G.forEach(function(ke){ke%18e5==0&&L.dateFormat("%H%M%S%L",ke)==="000000000"&&(U[ke]="day")})}return G.info=f(I,{higherRanks:U,totalRange:H*q}),G}getDateFormat(I,N,W,Y){let X=this.dateFormat("%m-%d %H:%M:%S.%L",N),O="01-01 00:00:00.000",V={millisecond:15,second:12,minute:9,hour:6,day:3},$="millisecond",L=$;for($ in E){if(I===E.week&&+this.dateFormat("%w",N)===W&&X.substr(6)===O.substr(6)){$="week";break}if(E[$]>I){$=L;break}if(V[$]&&X.substr(V[$])!==O.substr(V[$]))break;$!=="week"&&(L=$)}return this.resolveDTLFormat(Y[$]).main}}return D.formatCache={},D}),n(t,"Core/Defaults.js",[t["Core/Chart/ChartDefaults.js"],t["Core/Globals.js"],t["Core/Color/Palettes.js"],t["Core/Time.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{isTouchDevice:f}=l,{fireEvent:g,merge:b}=p,y={colors:u.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{buttonTheme:{fill:"#f7f7f7",padding:8,r:2,stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontSize:"0.8em",fontWeight:"normal"},states:{hover:{fill:"#e6e6e6"},select:{fill:"#e6e9ff",style:{color:"#000000",fontWeight:"bold"}},disabled:{style:{color:"#cccccc"}}}}},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:s,title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:"",align:"center",widthAdjust:-44},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",events:{},layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:{duration:300,easing:v=>Math.sqrt(1-Math.pow(v-1,2))},borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %e %b, %H:%M:%S.%L",second:"%A, %e %b, %H:%M:%S",minute:"%A, %e %b, %H:%M",hour:"%A, %e %b, %H:%M",day:"%A, %e %b %Y",week:"Week from %A, %e %b %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:f?25:10,headerFormat:'<span style="font-size: 0.8em">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}"></span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}};y.chart.styledMode=!1;let w=new r(y.time);return{defaultOptions:y,defaultTime:w,getOptions:function(){return y},setOptions:function(v){return g(l,"setOptions",{options:v}),b(!0,y,v),(v.time||v.global)&&(l.time?l.time.update(b(y.global,y.time,v.global,v.time)):l.time=w),y}}}),n(t,"Core/Color/Color.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{isNumber:u,merge:r,pInt:p}=l;class f{static parse(b){return b?new f(b):f.None}constructor(b){let y,w,v,T;this.rgba=[NaN,NaN,NaN,NaN],this.input=b;let S=s.Color;if(S&&S!==f)return new S(b);if(typeof b=="object"&&b.stops!==void 0)this.stops=b.stops.map(E=>new f(E[1]));else if(typeof b=="string"){if(this.input=b=f.names[b.toLowerCase()]||b,b.charAt(0)==="#"){let E=b.length,x=parseInt(b.substr(1),16);E===7?w=[(16711680&x)>>16,(65280&x)>>8,255&x,1]:E===4&&(w=[(3840&x)>>4|(3840&x)>>8,(240&x)>>4|240&x,(15&x)<<4|15&x,1])}if(!w)for(v=f.parsers.length;v--&&!w;)(y=(T=f.parsers[v]).regex.exec(b))&&(w=T.parse(y))}w&&(this.rgba=w)}get(b){let y=this.input,w=this.rgba;if(typeof y=="object"&&this.stops!==void 0){let v=r(y);return v.stops=[].slice.call(v.stops),this.stops.forEach((T,S)=>{v.stops[S]=[v.stops[S][0],T.get(b)]}),v}return w&&u(w[0])?b!=="rgb"&&(b||w[3]!==1)?b==="a"?`${w[3]}`:"rgba("+w.join(",")+")":"rgb("+w[0]+","+w[1]+","+w[2]+")":y}brighten(b){let y=this.rgba;if(this.stops)this.stops.forEach(function(w){w.brighten(b)});else if(u(b)&&b!==0)for(let w=0;w<3;w++)y[w]+=p(255*b),y[w]<0&&(y[w]=0),y[w]>255&&(y[w]=255);return this}setOpacity(b){return this.rgba[3]=b,this}tweenTo(b,y){let w=this.rgba,v=b.rgba;if(!u(w[0])||!u(v[0]))return b.input||"none";let T=v[3]!==1||w[3]!==1;return(T?"rgba(":"rgb(")+Math.round(v[0]+(w[0]-v[0])*(1-y))+","+Math.round(v[1]+(w[1]-v[1])*(1-y))+","+Math.round(v[2]+(w[2]-v[2])*(1-y))+(T?","+(v[3]+(w[3]-v[3])*(1-y)):"")+")"}}return f.names={white:"#ffffff",black:"#000000"},f.parsers=[{regex:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?(?:\.\d+)?)\s*\)/,parse:function(g){return[p(g[1]),p(g[2]),p(g[3]),parseFloat(g[4],10)]}},{regex:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/,parse:function(g){return[p(g[1]),p(g[2]),p(g[3]),1]}}],f.None=new f(""),f}),n(t,"Core/Animation/Fx.js",[t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){let{parse:r}=s,{win:p}=l,{isNumber:f,objectEach:g}=u;class b{constructor(w,v,T){this.pos=NaN,this.options=v,this.elem=w,this.prop=T}dSetter(){let w=this.paths,v=w&&w[0],T=w&&w[1],S=this.now||0,E=[];if(S!==1&&v&&T)if(v.length===T.length&&S<1)for(let x=0;x<T.length;x++){let A=v[x],D=T[x],C=[];for(let I=0;I<D.length;I++){let N=A[I],W=D[I];f(N)&&f(W)&&!(D[0]==="A"&&(I===4||I===5))?C[I]=N+S*(W-N):C[I]=W}E.push(C)}else E=T;else E=this.toD||[];this.elem.attr("d",E,void 0,!0)}update(){let w=this.elem,v=this.prop,T=this.now,S=this.options.step;this[v+"Setter"]?this[v+"Setter"]():w.attr?w.element&&w.attr(v,T,null,!0):w.style[v]=T+this.unit,S&&S.call(w,T,this)}run(w,v,T){let S=this,E=S.options,x=function(C){return!x.stopped&&S.step(C)},A=p.requestAnimationFrame||function(C){setTimeout(C,13)},D=function(){for(let C=0;C<b.timers.length;C++)b.timers[C]()||b.timers.splice(C--,1);b.timers.length&&A(D)};w!==v||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=w,this.end=v,this.unit=T,this.now=this.start,this.pos=0,x.elem=this.elem,x.prop=this.prop,x()&&b.timers.push(x)===1&&A(D)):(delete E.curAnim[this.prop],E.complete&&Object.keys(E.curAnim).length===0&&E.complete.call(this.elem))}step(w){let v,T,S=+new Date,E=this.options,x=this.elem,A=E.complete,D=E.duration,C=E.curAnim;return x.attr&&!x.element?v=!1:w||S>=D+this.startTime?(this.now=this.end,this.pos=1,this.update(),C[this.prop]=!0,T=!0,g(C,function(I){I!==!0&&(T=!1)}),T&&A&&A.call(x),v=!1):(this.pos=E.easing((S-this.startTime)/D),this.now=this.start+(this.end-this.start)*this.pos,this.update(),v=!0),v}initPath(w,v,T){let S=w.startX,E=w.endX,x=T.slice(),A=w.isArea,D=A?2:1,C=v&&T.length>v.length&&T.hasStackedCliffs,I,N,W,Y,X=v&&v.slice();if(!X||C)return[x,x];function O($,L){for(;$.length<N;){let R=$[0],G=L[N-$.length];if(G&&R[0]==="M"&&(G[0]==="C"?$[0]=["C",R[1],R[2],R[1],R[2],R[1],R[2]]:$[0]=["L",R[1],R[2]]),$.unshift(R),A){let U=$.pop();$.push($[$.length-1],U)}}}function V($){for(;$.length<N;){let L=$[Math.floor($.length/D)-1].slice();if(L[0]==="C"&&(L[1]=L[5],L[2]=L[6]),A){let R=$[Math.floor($.length/D)].slice();$.splice($.length/2,0,L,R)}else $.push(L)}}if(S&&E&&E.length){for(W=0;W<S.length;W++){if(S[W]===E[0]){I=W;break}if(S[0]===E[E.length-S.length+W]){I=W,Y=!0;break}if(S[S.length-1]===E[E.length-S.length+W]){I=S.length-W;break}}I===void 0&&(X=[])}return X.length&&f(I)&&(N=x.length+I*D,Y?(O(X,x),V(x)):(O(x,X),V(X))),[X,x]}fillSetter(){b.prototype.strokeSetter.apply(this,arguments)}strokeSetter(){this.elem.attr(this.prop,r(this.start).tweenTo(r(this.end),this.pos),void 0,!0)}}return b.timers=[],b}),n(t,"Core/Animation/AnimationUtilities.js",[t["Core/Animation/Fx.js"],t["Core/Utilities.js"]],function(s,l){let{defined:u,getStyle:r,isArray:p,isNumber:f,isObject:g,merge:b,objectEach:y,pick:w}=l;function v(S){return g(S)?b({duration:500,defer:0},S):{duration:S?500:0,defer:0}}function T(S,E){let x=s.timers.length;for(;x--;)s.timers[x].elem!==S||E&&E!==s.timers[x].prop||(s.timers[x].stopped=!0)}return{animate:function(S,E,x){let A,D="",C,I,N;g(x)||(N=arguments,x={duration:N[2],easing:N[3],complete:N[4]}),f(x.duration)||(x.duration=400),x.easing=typeof x.easing=="function"?x.easing:Math[x.easing]||Math.easeInOutSine,x.curAnim=b(E),y(E,function(W,Y){T(S,Y),I=new s(S,x,Y),C=void 0,Y==="d"&&p(E.d)?(I.paths=I.initPath(S,S.pathArray,E.d),I.toD=E.d,A=0,C=1):S.attr?A=S.attr(Y):(A=parseFloat(r(S,Y))||0,Y!=="opacity"&&(D="px")),C||(C=W),typeof C=="string"&&C.match("px")&&(C=C.replace(/px/g,"")),I.run(A,C,D)})},animObject:v,getDeferredAnimation:function(S,E,x){let A=v(E),D=x?[x]:S.series,C=0,I=0;return D.forEach(N=>{let W=v(N.options.animation);C=g(E)&&u(E.defer)?A.defer:Math.max(C,W.duration+W.defer),I=Math.min(A.duration,W.duration)}),S.renderer.forExport&&(C=0),{defer:Math.max(0,C-I),duration:Math.min(C,I)}},setAnimation:function(S,E){E.renderer.globalAnimation=w(S,E.options.chart.animation,!0)},stop:T}}),n(t,"Core/Renderer/HTML/AST.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{SVG_NS:u,win:r}=s,{attr:p,createElement:f,css:g,error:b,isFunction:y,isString:w,objectEach:v,splat:T}=l,{trustedTypes:S}=r,E=S&&y(S.createPolicy)&&S.createPolicy("highcharts",{createHTML:C=>C}),x=E?E.createHTML(""):"",A=function(){try{return!!new DOMParser().parseFromString(x,"text/html")}catch{return!1}}();class D{static filterUserAttributes(I){return v(I,(N,W)=>{let Y=!0;D.allowedAttributes.indexOf(W)===-1&&(Y=!1),["background","dynsrc","href","lowsrc","src"].indexOf(W)!==-1&&(Y=w(N)&&D.allowedReferences.some(X=>N.indexOf(X)===0)),Y||(b(33,!1,void 0,{"Invalid attribute in config":`${W}`}),delete I[W]),w(N)&&I[W]&&(I[W]=N.replace(/</g,"&lt;"))}),I}static parseStyle(I){return I.split(";").reduce((N,W)=>{let Y=W.split(":").map(O=>O.trim()),X=Y.shift();return X&&Y.length&&(N[X.replace(/-([a-z])/g,O=>O[1].toUpperCase())]=Y.join(":")),N},{})}static setElementHTML(I,N){I.innerHTML=D.emptyHTML,N&&new D(N).addToDOM(I)}constructor(I){this.nodes=typeof I=="string"?this.parseMarkup(I):I}addToDOM(I){return function N(W,Y){let X;return T(W).forEach(function(O){let V,$=O.tagName,L=O.textContent?s.doc.createTextNode(O.textContent):void 0,R=D.bypassHTMLFiltering;if($)if($==="#text")V=L;else if(D.allowedTags.indexOf($)!==-1||R){let G=$==="svg"?u:Y.namespaceURI||u,U=s.doc.createElementNS(G,$),B=O.attributes||{};v(O,function(H,q){q!=="tagName"&&q!=="attributes"&&q!=="children"&&q!=="style"&&q!=="textContent"&&(B[q]=H)}),p(U,R?B:D.filterUserAttributes(B)),O.style&&g(U,O.style),L&&U.appendChild(L),N(O.children||[],U),V=U}else b(33,!1,void 0,{"Invalid tagName in config":$});V&&Y.appendChild(V),X=V}),X}(this.nodes,I)}parseMarkup(I){let N,W=[];if(I=I.trim().replace(/ style=(["'])/g," data-style=$1"),A)N=new DOMParser().parseFromString(E?E.createHTML(I):I,"text/html");else{let X=f("div");X.innerHTML=I,N={body:X}}let Y=(X,O)=>{let V=X.nodeName.toLowerCase(),$={tagName:V};V==="#text"&&($.textContent=X.textContent||"");let L=X.attributes;if(L){let R={};[].forEach.call(L,G=>{G.name==="data-style"?$.style=D.parseStyle(G.value):R[G.name]=G.value}),$.attributes=R}if(X.childNodes.length){let R=[];[].forEach.call(X.childNodes,G=>{Y(G,R)}),R.length&&($.children=R)}O.push($)};return[].forEach.call(N.body.childNodes,X=>Y(X,W)),W}}return D.allowedAttributes=["alt","aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","dx","dy","disabled","fill","filterUnits","flood-color","flood-opacity","height","href","id","in","in2","markerHeight","markerWidth","offset","opacity","operator","orient","padding","paddingLeft","paddingRight","patternUnits","r","radius","refX","refY","role","scope","slope","src","startOffset","stdDeviation","stroke","stroke-linecap","stroke-width","style","tableValues","result","rowspan","summary","target","tabindex","text-align","text-anchor","textAnchor","textLength","title","type","valign","width","x","x1","x2","xlink:href","y","y1","y2","zIndex"],D.allowedReferences=["https://","http://","mailto:","/","../","./","#"],D.allowedTags=["a","abbr","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feComposite","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMorphology","feOffset","feMerge","feMergeNode","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","text","textPath","thead","title","tbody","tspan","td","th","tr","u","ul","#text"],D.emptyHTML=x,D.bypassHTMLFiltering=!1,D}),n(t,"Core/Templating.js",[t["Core/Defaults.js"],t["Core/Utilities.js"]],function(s,l){let{defaultOptions:u,defaultTime:r}=s,{extend:p,getNestedProperty:f,isArray:g,isNumber:b,isObject:y,pick:w,pInt:v}=l,T={add:(x,A)=>x+A,divide:(x,A)=>A!==0?x/A:"",eq:(x,A)=>x==A,each:function(x){let A=arguments[arguments.length-1];return!!g(x)&&x.map((D,C)=>S(A.body,p(y(D)?D:{"@this":D},{"@index":C,"@first":C===0,"@last":C===x.length-1}))).join("")},ge:(x,A)=>x>=A,gt:(x,A)=>x>A,if:x=>!!x,le:(x,A)=>x<=A,lt:(x,A)=>x<A,multiply:(x,A)=>x*A,ne:(x,A)=>x!=A,subtract:(x,A)=>x-A,unless:x=>!x};function S(x="",A,D){let C=/\{([\w\:\.\,;\-\/<>%@"'= #\(\)]+)\}/g,I=/\(([\w\:\.\,;\-\/<>%@"'= ]+)\)/g,N=[],W=/f$/,Y=/\.(\d)/,X=u.lang,O=D&&D.time||r,V=D&&D.numberFormatter||E,$=(B="")=>{let H;return B==="true"||B!=="false"&&((H=Number(B)).toString()===B?H:f(B,A))},L,R,G=0,U;for(;(L=C.exec(x))!==null;){let B=I.exec(L[1]);B&&(L=B,U=!0),R&&R.isBlock||(R={ctx:A,expression:L[1],find:L[0],isBlock:L[1].charAt(0)==="#",start:L.index,startInner:L.index+L[0].length,length:L[0].length});let H=L[1].split(" ")[0].replace("#","");T[H]&&(R.isBlock&&H===R.fn&&G++,R.fn||(R.fn=H));let q=L[1]==="else";if(R.isBlock&&R.fn&&(L[1]===`/${R.fn}`||q))if(G)!q&&G--;else{let se=R.startInner,pe=x.substr(se,L.index-se);R.body===void 0?(R.body=pe,R.startInner=L.index+L[0].length):R.elseBody=pe,R.find+=pe+L[0],q||(N.push(R),R=void 0)}else R.isBlock||N.push(R);if(B&&!(R!=null&&R.isBlock))break}return N.forEach(B=>{let H,q,{body:se,elseBody:pe,expression:ne,fn:le}=B;if(le){let ke=[B],be=ne.split(" ");for(q=T[le].length;q--;)ke.unshift($(be[q+1]));H=T[le].apply(A,ke),B.isBlock&&typeof H=="boolean"&&(H=S(H?se:pe,A,D))}else{let ke=ne.split(":");if(H=$(ke.shift()||""),ke.length&&typeof H=="number"){let be=ke.join(":");if(W.test(be)){let Ee=parseInt((be.match(Y)||["","-1"])[1],10);H!==null&&(H=V(H,Ee,X.decimalPoint,be.indexOf(",")>-1?X.thousandsSep:""))}else H=O.dateFormat(be,H)}}x=x.replace(B.find,w(H,""))}),U?S(x,A,D):x}function E(x,A,D,C){let I,N;x=+x||0,A=+A;let W=u.lang,Y=(x.toString().split(".")[1]||"").split("e")[0].length,X=x.toString().split("e"),O=A;A===-1?A=Math.min(Y,20):b(A)?A&&X[1]&&X[1]<0&&((N=A+ +X[1])>=0?(X[0]=(+X[0]).toExponential(N).split("e")[0],A=N):(X[0]=X[0].split(".")[0]||0,x=A<20?(X[0]*Math.pow(10,X[1])).toFixed(A):0,X[1]=0)):A=2;let V=(Math.abs(X[1]?X[0]:x)+Math.pow(10,-Math.max(A,Y)-1)).toFixed(A),$=String(v(V)),L=$.length>3?$.length%3:0;return D=w(D,W.decimalPoint),C=w(C,W.thousandsSep),I=(x<0?"-":"")+(L?$.substr(0,L)+C:""),0>+X[1]&&!O?I="0":I+=$.substr(L).replace(/(\d{3})(?=\d)/g,"$1"+C),A?I+=D+V.slice(-A):+I==0&&(I="0"),X[1]&&+I!=0&&(I+="e"+X[1]),I}return{dateFormat:function(x,A,D){return r.dateFormat(x,A,D)},format:S,helpers:T,numberFormat:E}}),n(t,"Core/Renderer/RendererRegistry.js",[t["Core/Globals.js"]],function(s){var l,u;let r;return(u=l||(l={})).rendererTypes={},u.getRendererType=function(p=r){return u.rendererTypes[p]||u.rendererTypes[r]},u.registerRendererType=function(p,f,g){u.rendererTypes[p]=f,(!r||g)&&(r=p,s.Renderer=f)},l}),n(t,"Core/Renderer/RendererUtilities.js",[t["Core/Utilities.js"]],function(s){var l;let{clamp:u,pick:r,pushUnique:p,stableSort:f}=s;return(l||(l={})).distribute=function g(b,y,w){let v=b,T=v.reducedLen||y,S=($,L)=>$.target-L.target,E=[],x=b.length,A=[],D=E.push,C,I,N,W=!0,Y,X,O=0,V;for(C=x;C--;)O+=b[C].size;if(O>T){for(f(b,($,L)=>(L.rank||0)-($.rank||0)),N=(V=b[0].rank===b[b.length-1].rank)?x/2:-1,I=V?N:x-1;N&&O>T;)Y=b[C=Math.floor(I)],p(A,C)&&(O-=Y.size),I+=N,V&&I>=b.length&&(N/=2,I=N);A.sort(($,L)=>L-$).forEach($=>D.apply(E,b.splice($,1)))}for(f(b,S),b=b.map($=>({size:$.size,targets:[$.target],align:r($.align,.5)}));W;){for(C=b.length;C--;)Y=b[C],X=(Math.min.apply(0,Y.targets)+Math.max.apply(0,Y.targets))/2,Y.pos=u(X-Y.size*Y.align,0,y-Y.size);for(C=b.length,W=!1;C--;)C>0&&b[C-1].pos+b[C-1].size>b[C].pos&&(b[C-1].size+=b[C].size,b[C-1].targets=b[C-1].targets.concat(b[C].targets),b[C-1].align=.5,b[C-1].pos+b[C-1].size>y&&(b[C-1].pos=y-b[C-1].size),b.splice(C,1),W=!0)}return D.apply(v,E),C=0,b.some($=>{let L=0;return($.targets||[]).some(()=>(v[C].pos=$.pos+L,w!==void 0&&Math.abs(v[C].pos-v[C].target)>w?(v.slice(0,C+1).forEach(R=>delete R.pos),v.reducedLen=(v.reducedLen||y)-.1*y,v.reducedLen>.1*y&&g(v,y,w),!0):(L+=v[C].size,C++,!1)))}),f(v,S),v},l}),n(t,"Core/Renderer/SVG/SVGElement.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{animate:p,animObject:f,stop:g}=s,{deg2rad:b,doc:y,svg:w,SVG_NS:v,win:T}=u,{addEvent:S,attr:E,createElement:x,crisp:A,css:D,defined:C,erase:I,extend:N,fireEvent:W,isArray:Y,isFunction:X,isObject:O,isString:V,merge:$,objectEach:L,pick:R,pInt:G,pushUnique:U,replaceNested:B,syncTimeout:H,uniqueKey:q}=r;class se{_defaultGetter(ne){let le=R(this[ne+"Value"],this[ne],this.element?this.element.getAttribute(ne):null,0);return/^-?[\d\.]+$/.test(le)&&(le=parseFloat(le)),le}_defaultSetter(ne,le,ke){ke.setAttribute(le,ne)}add(ne){let le,ke=this.renderer,be=this.element;return ne&&(this.parentGroup=ne),this.textStr!==void 0&&this.element.nodeName==="text"&&ke.buildText(this),this.added=!0,(!ne||ne.handleZ||this.zIndex)&&(le=this.zIndexSetter()),le||(ne?ne.element:ke.box).appendChild(be),this.onAdd&&this.onAdd(),this}addClass(ne,le){let ke=le?"":this.attr("class")||"";return(ne=(ne||"").split(/ /g).reduce(function(be,Ee){return ke.indexOf(Ee)===-1&&be.push(Ee),be},ke?[ke]:[]).join(" "))!==ke&&this.attr("class",ne),this}afterSetters(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)}align(ne,le,ke,be=!0){let Ee,K,J,oe,we={},ee=this.renderer,re=ee.alignedObjects,ue=!!ne;ne?(this.alignOptions=ne,this.alignByTranslate=le,this.alignTo=ke):(ne=this.alignOptions||{},le=this.alignByTranslate,ke=this.alignTo);let xe=!ke||V(ke)?ke||"renderer":void 0;xe&&(ue&&U(re,this),ke=void 0);let Te=R(ke,ee[xe],ee),ze=ne.align,Ce=ne.verticalAlign;return Ee=(Te.x||0)+(ne.x||0),K=(Te.y||0)+(ne.y||0),ze==="right"?J=1:ze==="center"&&(J=2),J&&(Ee+=((Te.width||0)-(ne.width||0))/J),we[le?"translateX":"x"]=Math.round(Ee),Ce==="bottom"?oe=1:Ce==="middle"&&(oe=2),oe&&(K+=((Te.height||0)-(ne.height||0))/oe),we[le?"translateY":"y"]=Math.round(K),be&&(this[this.placed?"animate":"attr"](we),this.placed=!0),this.alignAttr=we,this}alignSetter(ne){let le={left:"start",center:"middle",right:"end"};le[ne]&&(this.alignValue=ne,this.element.setAttribute("text-anchor",le[ne]))}animate(ne,le,ke){let be=f(R(le,this.renderer.globalAnimation,!0)),Ee=be.defer;return y.hidden&&(be.duration=0),be.duration!==0?(ke&&(be.complete=ke),H(()=>{this.element&&p(this,ne,be)},Ee)):(this.attr(ne,void 0,ke||be.complete),L(ne,function(K,J){be.step&&be.step.call(this,K,{prop:J,pos:1,elem:this})},this)),this}applyTextOutline(ne){let le=this.element;ne.indexOf("contrast")!==-1&&(ne=ne.replace(/contrast/g,this.renderer.getContrast(le.style.fill)));let ke=ne.split(" "),be=ke[ke.length-1],Ee=ke[0];if(Ee&&Ee!=="none"&&u.svg){this.fakeTS=!0,Ee=Ee.replace(/(^[\d\.]+)(.*?)$/g,function(ee,re,ue){return 2*Number(re)+ue}),this.removeTextOutline();let K=y.createElementNS(v,"tspan");E(K,{class:"highcharts-text-outline",fill:be,stroke:be,"stroke-width":Ee,"stroke-linejoin":"round"});let J=le.querySelector("textPath")||le;[].forEach.call(J.childNodes,ee=>{let re=ee.cloneNode(!0);re.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach(ue=>re.removeAttribute(ue)),K.appendChild(re)});let oe=0;[].forEach.call(J.querySelectorAll("text tspan"),ee=>{oe+=Number(ee.getAttribute("dy"))});let we=y.createElementNS(v,"tspan");we.textContent="",E(we,{x:Number(le.getAttribute("x")),dy:-oe}),K.appendChild(we),J.insertBefore(K,J.firstChild)}}attr(ne,le,ke,be){let{element:Ee}=this,K=se.symbolCustomAttribs,J,oe,we=this,ee;return typeof ne=="string"&&le!==void 0&&(J=ne,(ne={})[J]=le),typeof ne=="string"?we=(this[ne+"Getter"]||this._defaultGetter).call(this,ne,Ee):(L(ne,function(re,ue){ee=!1,be||g(this,ue),this.symbolName&&K.indexOf(ue)!==-1&&(oe||(this.symbolAttr(ne),oe=!0),ee=!0),this.rotation&&(ue==="x"||ue==="y")&&(this.doTransform=!0),ee||(this[ue+"Setter"]||this._defaultSetter).call(this,re,ue,Ee)},this),this.afterSetters()),ke&&ke.call(this),we}clip(ne){if(ne&&!ne.clipPath){let le=q()+"-",ke=this.renderer.createElement("clipPath").attr({id:le}).add(this.renderer.defs);N(ne,{clipPath:ke,id:le,count:0}),ne.add(ke)}return this.attr("clip-path",ne?`url(${this.renderer.url}#${ne.id})`:"none")}crisp(ne,le){le=Math.round(le||ne.strokeWidth||0);let ke=ne.x||this.x||0,be=ne.y||this.y||0,Ee=(ne.width||this.width||0)+ke,K=(ne.height||this.height||0)+be,J=A(ke,le),oe=A(be,le);return N(ne,{x:J,y:oe,width:A(Ee,le)-J,height:A(K,le)-oe}),C(ne.strokeWidth)&&(ne.strokeWidth=le),ne}complexColor(ne,le,ke){let be=this.renderer,Ee,K,J,oe,we,ee,re,ue,xe,Te,ze=[],Ce;W(this.renderer,"complexColor",{args:arguments},function(){if(ne.radialGradient?K="radialGradient":ne.linearGradient&&(K="linearGradient"),K){if(J=ne[K],we=be.gradients,ee=ne.stops,xe=ke.radialReference,Y(J)&&(ne[K]=J={x1:J[0],y1:J[1],x2:J[2],y2:J[3],gradientUnits:"userSpaceOnUse"}),K==="radialGradient"&&xe&&!C(J.gradientUnits)&&(oe=J,J=$(J,be.getRadialAttr(xe,oe),{gradientUnits:"userSpaceOnUse"})),L(J,function(Ie,Be){Be!=="id"&&ze.push(Be,Ie)}),L(ee,function(Ie){ze.push(Ie)}),we[ze=ze.join(",")])Te=we[ze].attr("id");else{J.id=Te=q();let Ie=we[ze]=be.createElement(K).attr(J).add(be.defs);Ie.radAttr=oe,Ie.stops=[],ee.forEach(function(Be){Be[1].indexOf("rgba")===0?(re=(Ee=l.parse(Be[1])).get("rgb"),ue=Ee.get("a")):(re=Be[1],ue=1);let He=be.createElement("stop").attr({offset:Be[0],"stop-color":re,"stop-opacity":ue}).add(Ie);Ie.stops.push(He)})}Ce="url("+be.url+"#"+Te+")",ke.setAttribute(le,Ce),ke.gradient=ze,ne.toString=function(){return Ce}}})}css(ne){let le=this.styles,ke={},be=this.element,Ee,K=!le;if(le&&L(ne,function(J,oe){le&&le[oe]!==J&&(ke[oe]=J,K=!0)}),K){le&&(ne=N(le,ke)),ne.width===null||ne.width==="auto"?delete this.textWidth:be.nodeName.toLowerCase()==="text"&&ne.width&&(Ee=this.textWidth=G(ne.width)),N(this.styles,ne),Ee&&!w&&this.renderer.forExport&&delete ne.width;let J=$(ne);be.namespaceURI===this.SVG_NS&&(["textOutline","textOverflow","width"].forEach(oe=>J&&delete J[oe]),J.color&&(J.fill=J.color)),D(be,J)}return this.added&&(this.element.nodeName==="text"&&this.renderer.buildText(this),ne.textOutline&&this.applyTextOutline(ne.textOutline)),this}dashstyleSetter(ne){let le,ke=this["stroke-width"];if(ke==="inherit"&&(ke=1),ne=ne&&ne.toLowerCase()){let be=ne.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(le=be.length;le--;)be[le]=""+G(be[le])*R(ke,NaN);ne=be.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",ne)}}destroy(){var oe;let ne=this,le=ne.element||{},ke=ne.renderer,be=le.ownerSVGElement,Ee=le.nodeName==="SPAN"&&ne.parentGroup||void 0,K,J;if(le.onclick=le.onmouseout=le.onmouseover=le.onmousemove=le.point=null,g(ne),ne.clipPath&&be){let we=ne.clipPath;[].forEach.call(be.querySelectorAll("[clip-path],[CLIP-PATH]"),function(ee){ee.getAttribute("clip-path").indexOf(we.element.id)>-1&&ee.removeAttribute("clip-path")}),ne.clipPath=we.destroy()}if(ne.connector=(oe=ne.connector)==null?void 0:oe.destroy(),ne.stops){for(J=0;J<ne.stops.length;J++)ne.stops[J].destroy();ne.stops.length=0,ne.stops=void 0}for(ne.safeRemoveChild(le);Ee&&Ee.div&&Ee.div.childNodes.length===0;)K=Ee.parentGroup,ne.safeRemoveChild(Ee.div),delete Ee.div,Ee=K;ne.alignOptions&&I(ke.alignedObjects,ne),L(ne,function(we,ee){ne[ee]&&ne[ee].parentGroup===ne&&ne[ee].destroy&&ne[ee].destroy(),delete ne[ee]})}dSetter(ne,le,ke){Y(ne)&&(typeof ne[0]=="string"&&(ne=this.renderer.pathToSegments(ne)),this.pathArray=ne,ne=ne.reduce((be,Ee,K)=>Ee&&Ee.join?(K?be+" ":"")+Ee.join(" "):(Ee||"").toString(),"")),/(NaN| {2}|^$)/.test(ne)&&(ne="M 0 0"),this[le]!==ne&&(ke.setAttribute(le,ne),this[le]=ne)}fillSetter(ne,le,ke){typeof ne=="string"?ke.setAttribute(le,ne):ne&&this.complexColor(ne,le,ke)}hrefSetter(ne,le,ke){ke.setAttributeNS("http://www.w3.org/1999/xlink",le,ne)}getBBox(ne,le){let ke,be,Ee,K,{alignValue:J,element:oe,renderer:we,styles:ee,textStr:re}=this,{cache:ue,cacheKeys:xe}=we,Te=oe.namespaceURI===this.SVG_NS,ze=R(le,this.rotation,0),Ce=we.styledMode?oe&&se.prototype.getStyle.call(oe,"font-size"):ee.fontSize;if(C(re)&&((K=re.toString()).indexOf("<")===-1&&(K=K.replace(/\d/g,"0")),K+=["",we.rootFontSize,Ce,ze,this.textWidth,J,ee.textOverflow,ee.fontWeight].join(",")),K&&!ne&&(ke=ue[K]),!ke||ke.polygon){if(Te||we.forExport){try{Ee=this.fakeTS&&function(Be){let He=oe.querySelector(".highcharts-text-outline");He&&D(He,{display:Be})},X(Ee)&&Ee("none"),ke=oe.getBBox?N({},oe.getBBox()):{width:oe.offsetWidth,height:oe.offsetHeight,x:0,y:0},X(Ee)&&Ee("")}catch{}(!ke||ke.width<0)&&(ke={x:0,y:0,width:0,height:0})}else ke=this.htmlGetBBox();be=ke.height,Te&&(ke.height=be={"11px,17":14,"13px,20":16}[`${Ce||""},${Math.round(be)}`]||be),ze&&(ke=this.getRotatedBox(ke,ze));let Ie={bBox:ke};W(this,"afterGetBBox",Ie),ke=Ie.bBox}if(K&&(re===""||ke.height>0)){for(;xe.length>250;)delete ue[xe.shift()];ue[K]||xe.push(K),ue[K]=ke}return ke}getRotatedBox(ne,le){let{x:ke,y:be,width:Ee,height:K}=ne,{alignValue:J,translateY:oe,rotationOriginX:we=0,rotationOriginY:ee=0}=this,re={right:1,center:.5}[J||0]||0,ue=Number(this.element.getAttribute("y")||0)-(oe?0:be),xe=le*b,Te=(le-90)*b,ze=Math.cos(xe),Ce=Math.sin(xe),Ie=Ee*ze,Be=Ee*Ce,He=Math.cos(Te),Ae=Math.sin(Te),[[ye,ge],[Me,De]]=[we,ee].map(si=>[si-si*ze,si*Ce]),Pe=ke+re*(Ee-Ie)+ye+De+ue*He,Fe=Pe+Ie,Xe=Fe-K*He,tt=Xe-Ie,nt=be+ue-re*Be-ge+Me+ue*Ae,ht=nt+Be,gt=ht-K*Ae,Tt=gt-Be,Lt=Math.min(Pe,Fe,Xe,tt),ft=Math.min(nt,ht,gt,Tt),Et=Math.max(Pe,Fe,Xe,tt)-Lt,Ct=Math.max(nt,ht,gt,Tt)-ft;return{x:Lt,y:ft,width:Et,height:Ct,polygon:[[Pe,nt],[Fe,ht],[Xe,gt],[tt,Tt]]}}getStyle(ne){return T.getComputedStyle(this.element||this,"").getPropertyValue(ne)}hasClass(ne){return(""+this.attr("class")).split(" ").indexOf(ne)!==-1}hide(){return this.attr({visibility:"hidden"})}htmlGetBBox(){return{height:0,width:0,x:0,y:0}}constructor(ne,le){this.onEvents={},this.opacity=1,this.SVG_NS=v,this.element=le==="span"||le==="body"?x(le):y.createElementNS(this.SVG_NS,le),this.renderer=ne,this.styles={},W(this,"afterInit")}on(ne,le){let{onEvents:ke}=this;return ke[ne]&&ke[ne](),ke[ne]=S(this.element,ne,le),this}opacitySetter(ne,le,ke){let be=Number(Number(ne).toFixed(3));this.opacity=be,ke.setAttribute(le,be)}reAlign(){var ne;(ne=this.alignOptions)!=null&&ne.width&&this.alignOptions.align!=="left"&&(this.alignOptions.width=this.getBBox().width,this.placed=!1,this.align())}removeClass(ne){return this.attr("class",(""+this.attr("class")).replace(V(ne)?RegExp(`(^| )${ne}( |$)`):ne," ").replace(/ +/g," ").trim())}removeTextOutline(){let ne=this.element.querySelector("tspan.highcharts-text-outline");ne&&this.safeRemoveChild(ne)}safeRemoveChild(ne){let le=ne.parentNode;le&&le.removeChild(ne)}setRadialReference(ne){let le=this.element.gradient&&this.renderer.gradients[this.element.gradient];return this.element.radialReference=ne,le&&le.radAttr&&le.animate(this.renderer.getRadialAttr(ne,le.radAttr)),this}shadow(ne){var Ee;let{renderer:le}=this,ke=$(((Ee=this.parentGroup)==null?void 0:Ee.rotation)===90?{offsetX:-1,offsetY:-1}:{},O(ne)?ne:{}),be=le.shadowDefinition(ke);return this.attr({filter:ne?`url(${le.url}#${be})`:"none"})}show(ne=!0){return this.attr({visibility:ne?"inherit":"visible"})}"stroke-widthSetter"(ne,le,ke){this[le]=ne,ke.setAttribute(le,ne)}strokeWidth(){if(!this.renderer.styledMode)return this["stroke-width"]||0;let ne=this.getStyle("stroke-width"),le=0,ke;return/px$/.test(ne)?le=G(ne):ne!==""&&(E(ke=y.createElementNS(v,"rect"),{width:ne,"stroke-width":0}),this.element.parentNode.appendChild(ke),le=ke.getBBox().width,ke.parentNode.removeChild(ke)),le}symbolAttr(ne){let le=this;se.symbolCustomAttribs.forEach(function(ke){le[ke]=R(ne[ke],le[ke])}),le.attr({d:le.renderer.symbols[le.symbolName](le.x,le.y,le.width,le.height,le)})}textSetter(ne){ne!==this.textStr&&(delete this.textPxLength,this.textStr=ne,this.added&&this.renderer.buildText(this),this.reAlign())}titleSetter(ne){let le=this.element,ke=le.getElementsByTagName("title")[0]||y.createElementNS(this.SVG_NS,"title");le.insertBefore?le.insertBefore(ke,le.firstChild):le.appendChild(ke),ke.textContent=B(R(ne,""),[/<[^>]*>/g,""]).replace(/&lt;/g,"<").replace(/&gt;/g,">")}toFront(){let ne=this.element;return ne.parentNode.appendChild(ne),this}translate(ne,le){return this.attr({translateX:ne,translateY:le})}updateTransform(ne="transform"){var ue;let{element:le,matrix:ke,rotation:be=0,rotationOriginX:Ee,rotationOriginY:K,scaleX:J,scaleY:oe,translateX:we=0,translateY:ee=0}=this,re=["translate("+we+","+ee+")"];C(ke)&&re.push("matrix("+ke.join(",")+")"),be&&(re.push("rotate("+be+" "+R(Ee,le.getAttribute("x"),0)+" "+R(K,le.getAttribute("y")||0)+")"),((ue=this.text)==null?void 0:ue.element.tagName)==="SPAN"&&this.text.attr({rotation:be,rotationOriginX:(Ee||0)-this.padding,rotationOriginY:(K||0)-this.padding})),(C(J)||C(oe))&&re.push("scale("+R(J,1)+" "+R(oe,1)+")"),re.length&&!(this.text||this).textPath&&le.setAttribute(ne,re.join(" "))}visibilitySetter(ne,le,ke){ne==="inherit"?ke.removeAttribute(le):this[le]!==ne&&ke.setAttribute(le,ne),this[le]=ne}xGetter(ne){return this.element.nodeName==="circle"&&(ne==="x"?ne="cx":ne==="y"&&(ne="cy")),this._defaultGetter(ne)}zIndexSetter(ne,le){let ke=this.renderer,be=this.parentGroup,Ee=(be||ke).element||ke.box,K=this.element,J=Ee===ke.box,oe,we,ee,re=!1,ue,xe=this.added,Te;if(C(ne)?(K.setAttribute("data-z-index",ne),ne=+ne,this[le]===ne&&(xe=!1)):C(this[le])&&K.removeAttribute("data-z-index"),this[le]=ne,xe){for((ne=this.zIndex)&&be&&(be.handleZ=!0),Te=(oe=Ee.childNodes).length-1;Te>=0&&!re;Te--)ue=!C(ee=(we=oe[Te]).getAttribute("data-z-index")),we!==K&&(ne<0&&ue&&!J&&!Te?(Ee.insertBefore(K,oe[Te]),re=!0):(G(ee)<=ne||ue&&(!C(ne)||ne>=0))&&(Ee.insertBefore(K,oe[Te+1]),re=!0));re||(Ee.insertBefore(K,oe[J?3:0]),re=!0)}return re}}return se.symbolCustomAttribs=["anchorX","anchorY","clockwise","end","height","innerR","r","start","width","x","y"],se.prototype.strokeSetter=se.prototype.fillSetter,se.prototype.yGetter=se.prototype.xGetter,se.prototype.matrixSetter=se.prototype.rotationOriginXSetter=se.prototype.rotationOriginYSetter=se.prototype.rotationSetter=se.prototype.scaleXSetter=se.prototype.scaleYSetter=se.prototype.translateXSetter=se.prototype.translateYSetter=se.prototype.verticalAlignSetter=function(pe,ne){this[ne]=pe,this.doTransform=!0},se}),n(t,"Core/Renderer/SVG/SVGLabel.js",[t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(s,l){let{defined:u,extend:r,isNumber:p,merge:f,pick:g,removeEvent:b}=l;class y extends s{constructor(v,T,S,E,x,A,D,C,I,N){let W;super(v,"g"),this.paddingLeftSetter=this.paddingSetter,this.paddingRightSetter=this.paddingSetter,this.doUpdate=!1,this.textStr=T,this.x=S,this.y=E,this.anchorX=A,this.anchorY=D,this.baseline=I,this.className=N,this.addClass(N==="button"?"highcharts-no-tooltip":"highcharts-label"),N&&this.addClass("highcharts-"+N),this.text=v.text(void 0,0,0,C).attr({zIndex:1}),typeof x=="string"&&((W=/^url\((.*?)\)$/.test(x))||this.renderer.symbols[x])&&(this.symbolKey=x),this.bBox=y.emptyBBox,this.padding=3,this.baselineOffset=0,this.needsBox=v.styledMode||W,this.deferredAttr={},this.alignFactor=0}alignSetter(v){let T={left:0,center:.5,right:1}[v];T!==this.alignFactor&&(this.alignFactor=T,this.bBox&&p(this.xSetting)&&this.attr({x:this.xSetting}))}anchorXSetter(v,T){this.anchorX=v,this.boxAttr(T,Math.round(v)-this.getCrispAdjust()-this.xSetting)}anchorYSetter(v,T){this.anchorY=v,this.boxAttr(T,v-this.ySetting)}boxAttr(v,T){this.box?this.box.attr(v,T):this.deferredAttr[v]=T}css(v){if(v){let T={};v=f(v),y.textProps.forEach(S=>{v[S]!==void 0&&(T[S]=v[S],delete v[S])}),this.text.css(T),"fontSize"in T||"fontWeight"in T?this.updateTextPadding():("width"in T||"textOverflow"in T)&&this.updateBoxSize()}return s.prototype.css.call(this,v)}destroy(){b(this.element,"mouseenter"),b(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),s.prototype.destroy.call(this)}fillSetter(v,T){v&&(this.needsBox=!0),this.fill=v,this.boxAttr(T,v)}getBBox(v,T){this.textStr&&this.bBox.width===0&&this.bBox.height===0&&this.updateBoxSize();let{padding:S,height:E=0,translateX:x=0,translateY:A=0,width:D=0}=this,C=g(this.paddingLeft,S),I=T??(this.rotation||0),N={width:D,height:E,x:x+this.bBox.x-C,y:A+this.bBox.y-S+this.baselineOffset};return I&&(N=this.getRotatedBox(N,I)),N}getCrispAdjust(){return(this.renderer.styledMode&&this.box?this.box.strokeWidth():this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2}heightSetter(v){this.heightSetting=v,this.doUpdate=!0}afterSetters(){super.afterSetters(),this.doUpdate&&(this.updateBoxSize(),this.doUpdate=!1)}onAdd(){this.text.add(this),this.attr({text:g(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&u(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})}paddingSetter(v,T){p(v)?v!==this[T]&&(this[T]=v,this.updateTextPadding()):this[T]=void 0}rSetter(v,T){this.boxAttr(T,v)}strokeSetter(v,T){this.stroke=v,this.boxAttr(T,v)}"stroke-widthSetter"(v,T){v&&(this.needsBox=!0),this["stroke-width"]=v,this.boxAttr(T,v)}"text-alignSetter"(v){this.textAlign=v}textSetter(v){v!==void 0&&this.text.attr({text:v}),this.updateTextPadding(),this.reAlign()}updateBoxSize(){let v,T=this.text,S={},E=this.padding,x=this.bBox=(!p(this.widthSetting)||!p(this.heightSetting)||this.textAlign)&&u(T.textStr)?T.getBBox(void 0,0):y.emptyBBox;this.width=this.getPaddedWidth(),this.height=(this.heightSetting||x.height||0)+2*E;let A=this.renderer.fontMetrics(T);if(this.baselineOffset=E+Math.min((this.text.firstLineMetrics||A).b,x.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-A.h)/2),this.needsBox&&!T.textPath){if(!this.box){let D=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect();D.addClass((this.className==="button"?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),D.add(this)}v=this.getCrispAdjust(),S.x=v,S.y=(this.baseline?-this.baselineOffset:0)+v,S.width=Math.round(this.width),S.height=Math.round(this.height),this.box.attr(r(S,this.deferredAttr)),this.deferredAttr={}}}updateTextPadding(){let v=this.text;if(!v.textPath){this.updateBoxSize();let T=this.baseline?0:this.baselineOffset,S=g(this.paddingLeft,this.padding);u(this.widthSetting)&&this.bBox&&(this.textAlign==="center"||this.textAlign==="right")&&(S+={center:.5,right:1}[this.textAlign]*(this.widthSetting-this.bBox.width)),(S!==v.x||T!==v.y)&&(v.attr("x",S),v.hasBoxWidthChanged&&(this.bBox=v.getBBox(!0)),T!==void 0&&v.attr("y",T)),v.x=S,v.y=T}}widthSetter(v){this.widthSetting=p(v)?v:void 0,this.doUpdate=!0}getPaddedWidth(){let v=this.padding,T=g(this.paddingLeft,v),S=g(this.paddingRight,v);return(this.widthSetting||this.bBox.width||0)+T+S}xSetter(v){this.x=v,this.alignFactor&&(v-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(v),this.attr("translateX",this.xSetting)}ySetter(v){this.ySetting=this.y=Math.round(v),this.attr("translateY",this.ySetting)}}return y.emptyBBox={width:0,height:0,x:0,y:0},y.textProps=["color","direction","fontFamily","fontSize","fontStyle","fontWeight","lineHeight","textAlign","textDecoration","textOutline","textOverflow","whiteSpace","width"],y}),n(t,"Core/Renderer/SVG/Symbols.js",[t["Core/Utilities.js"]],function(s){let{defined:l,isNumber:u,pick:r}=s;function p(b,y,w,v,T){let S=[];if(T){let E=T.start||0,x=r(T.r,w),A=r(T.r,v||w),D=2e-4/(T.borderRadius?1:Math.max(x,1)),C=Math.abs((T.end||0)-E-2*Math.PI)<D,I=(T.end||0)-(C?D:0),N=T.innerR,W=r(T.open,C),Y=Math.cos(E),X=Math.sin(E),O=Math.cos(I),V=Math.sin(I),$=r(T.longArc,I-E-Math.PI<D?0:1),L=["A",x,A,0,$,r(T.clockwise,1),b+x*O,y+A*V];L.params={start:E,end:I,cx:b,cy:y},S.push(["M",b+x*Y,y+A*X],L),l(N)&&((L=["A",N,N,0,$,l(T.clockwise)?1-T.clockwise:0,b+N*Y,y+N*X]).params={start:I,end:E,cx:b,cy:y},S.push(W?["M",b+N*O,y+N*V]:["L",b+N*O,y+N*V],L)),W||S.push(["Z"])}return S}function f(b,y,w,v,T){return T&&T.r?g(b,y,w,v,T):[["M",b,y],["L",b+w,y],["L",b+w,y+v],["L",b,y+v],["Z"]]}function g(b,y,w,v,T){let S=(T==null?void 0:T.r)||0;return[["M",b+S,y],["L",b+w-S,y],["A",S,S,0,0,1,b+w,y+S],["L",b+w,y+v-S],["A",S,S,0,0,1,b+w-S,y+v],["L",b+S,y+v],["A",S,S,0,0,1,b,y+v-S],["L",b,y+S],["A",S,S,0,0,1,b+S,y],["Z"]]}return{arc:p,callout:function(b,y,w,v,T){let S=Math.min(T&&T.r||0,w,v),E=S+6,x=T&&T.anchorX,A=T&&T.anchorY||0,D=g(b,y,w,v,{r:S});if(!u(x)||x<w&&x>0&&A<v&&A>0)return D;if(b+x>w-E)if(A>y+E&&A<y+v-E)D.splice(3,1,["L",b+w,A-6],["L",b+w+6,A],["L",b+w,A+6],["L",b+w,y+v-S]);else if(x<w){let C=A<y+E,I=C?y:y+v;D.splice(C?2:5,0,["L",x,A],["L",b+w-S,I])}else D.splice(3,1,["L",b+w,v/2],["L",x,A],["L",b+w,v/2],["L",b+w,y+v-S]);else if(b+x<E)if(A>y+E&&A<y+v-E)D.splice(7,1,["L",b,A+6],["L",b-6,A],["L",b,A-6],["L",b,y+S]);else if(x>0){let C=A<y+E,I=C?y:y+v;D.splice(C?1:6,0,["L",x,A],["L",b+S,I])}else D.splice(7,1,["L",b,v/2],["L",x,A],["L",b,v/2],["L",b,y+S]);else A>v&&x<w-E?D.splice(5,1,["L",x+6,y+v],["L",x,y+v+6],["L",x-6,y+v],["L",b+S,y+v]):A<0&&x>E&&D.splice(1,1,["L",x-6,y],["L",x,y-6],["L",x+6,y],["L",w-S,y]);return D},circle:function(b,y,w,v){return p(b+w/2,y+v/2,w/2,v/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(b,y,w,v){return[["M",b+w/2,y],["L",b+w,y+v/2],["L",b+w/2,y+v],["L",b,y+v/2],["Z"]]},rect:f,roundedRect:g,square:f,triangle:function(b,y,w,v){return[["M",b+w/2,y],["L",b+w,y+v],["L",b,y+v],["Z"]]},"triangle-down":function(b,y,w,v){return[["M",b,y],["L",b+w,y],["L",b+w/2,y+v],["Z"]]}}}),n(t,"Core/Renderer/SVG/TextBuilder.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){let{doc:r,SVG_NS:p,win:f}=l,{attr:g,extend:b,fireEvent:y,isString:w,objectEach:v,pick:T}=u;return class{constructor(S){let E=S.styles;this.renderer=S.renderer,this.svgElement=S,this.width=S.textWidth,this.textLineHeight=E&&E.lineHeight,this.textOutline=E&&E.textOutline,this.ellipsis=!!(E&&E.textOverflow==="ellipsis"),this.noWrap=!!(E&&E.whiteSpace==="nowrap")}buildSVG(){let S=this.svgElement,E=S.element,x=S.renderer,A=T(S.textStr,"").toString(),D=A.indexOf("<")!==-1,C=E.childNodes,I=!S.added&&x.box,N=[A,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,S.getStyle("font-size"),this.width].join(",");if(N!==S.textCache){S.textCache=N,delete S.actualWidth;for(let W=C.length;W--;)E.removeChild(C[W]);if(D||this.ellipsis||this.width||S.textPath||A.indexOf(" ")!==-1&&(!this.noWrap||/<br.*?>/g.test(A))){if(A!==""){I&&I.appendChild(E);let W=new s(A);this.modifyTree(W.nodes),W.addToDOM(E),this.modifyDOM(),this.ellipsis&&(E.textContent||"").indexOf("")!==-1&&S.attr("title",this.unescapeEntities(S.textStr||"",["&lt;","&gt;"])),I&&I.removeChild(E)}}else E.appendChild(r.createTextNode(this.unescapeEntities(A)));w(this.textOutline)&&S.applyTextOutline&&S.applyTextOutline(this.textOutline)}}modifyDOM(){let S,E=this.svgElement,x=g(E.element,"x");for(E.firstLineMetrics=void 0;(S=E.element.firstChild)&&/^[\s\u200B]*$/.test(S.textContent||" ");)E.element.removeChild(S);[].forEach.call(E.element.querySelectorAll("tspan.highcharts-br"),(I,N)=>{I.nextSibling&&I.previousSibling&&(N===0&&I.previousSibling.nodeType===1&&(E.firstLineMetrics=E.renderer.fontMetrics(I.previousSibling)),g(I,{dy:this.getLineHeight(I.nextSibling),x}))});let A=this.width||0;if(!A)return;let D=(I,N)=>{let W=I.textContent||"",Y=W.replace(/([^\^])-/g,"$1- ").split(" "),X=!this.noWrap&&(Y.length>1||E.element.childNodes.length>1),O=this.getLineHeight(N),V=0,$=E.actualWidth;if(this.ellipsis)W&&this.truncate(I,W,void 0,0,Math.max(0,A-.8*O),(L,R)=>L.substring(0,R)+"");else if(X){let L=[],R=[];for(;N.firstChild&&N.firstChild!==I;)R.push(N.firstChild),N.removeChild(N.firstChild);for(;Y.length;)Y.length&&!this.noWrap&&V>0&&(L.push(I.textContent||""),I.textContent=Y.join(" ").replace(/- /g,"-")),this.truncate(I,void 0,Y,V===0&&$||0,A,(G,U)=>Y.slice(0,U).join(" ").replace(/- /g,"-")),$=E.actualWidth,V++;R.forEach(G=>{N.insertBefore(G,I)}),L.forEach(G=>{N.insertBefore(r.createTextNode(G),I);let U=r.createElementNS(p,"tspan");U.textContent="",g(U,{dy:O,x}),N.insertBefore(U,I)})}},C=I=>{[].slice.call(I.childNodes).forEach(N=>{N.nodeType===f.Node.TEXT_NODE?D(N,I):(N.className.baseVal.indexOf("highcharts-br")!==-1&&(E.actualWidth=0),C(N))})};C(E.element)}getLineHeight(S){let E=S.nodeType===f.Node.TEXT_NODE?S.parentElement:S;return this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(E||this.svgElement.element).h}modifyTree(S){let E=(x,A)=>{let{attributes:D={},children:C,style:I={},tagName:N}=x,W=this.renderer.styledMode;if(N==="b"||N==="strong"?W?D.class="highcharts-strong":I.fontWeight="bold":(N==="i"||N==="em")&&(W?D.class="highcharts-emphasized":I.fontStyle="italic"),I&&I.color&&(I.fill=I.color),N==="br"){D.class="highcharts-br",x.textContent="";let Y=S[A+1];Y&&Y.textContent&&(Y.textContent=Y.textContent.replace(/^ +/gm,""))}else N==="a"&&C&&C.some(Y=>Y.tagName==="#text")&&(x.children=[{children:C,tagName:"tspan"}]);N!=="#text"&&N!=="a"&&(x.tagName="tspan"),b(x,{attributes:D,style:I}),C&&C.filter(Y=>Y.tagName!=="#text").forEach(E)};S.forEach(E),y(this.svgElement,"afterModifyTree",{nodes:S})}truncate(S,E,x,A,D,C){let I,N,W=this.svgElement,{rotation:Y}=W,X=[],O=x?1:0,V=(E||x||"").length,$=V,L=function(R,G){let U=G||R,B=S.parentNode;if(B&&X[U]===void 0&&B.getSubStringLength)try{X[U]=A+B.getSubStringLength(0,x?U+1:U)}catch{}return X[U]};if(W.rotation=0,A+(N=L(S.textContent.length))>D){for(;O<=V;)$=Math.ceil((O+V)/2),x&&(I=C(x,$)),N=L($,I&&I.length-1),O===V?O=V+1:N>D?V=$-1:O=$;V===0?S.textContent="":E&&V===E.length-1||(S.textContent=I||C(E||x,$))}x&&x.splice(0,$),W.actualWidth=N,W.rotation=Y}unescapeEntities(S,E){return v(this.renderer.escapes,function(x,A){E&&E.indexOf(x)!==-1||(S=S.toString().replace(RegExp(x,"g"),A))}),S}}}),n(t,"Core/Renderer/SVG/SVGRenderer.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Defaults.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Renderer/SVG/SVGLabel.js"],t["Core/Renderer/SVG/Symbols.js"],t["Core/Renderer/SVG/TextBuilder.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,g,b,y,w){let v,{defaultOptions:T}=l,{charts:S,deg2rad:E,doc:x,isFirefox:A,isMS:D,isWebKit:C,noop:I,SVG_NS:N,symbolSizes:W,win:Y}=r,{addEvent:X,attr:O,createElement:V,crisp:$,css:L,defined:R,destroyObjectProperties:G,extend:U,isArray:B,isNumber:H,isObject:q,isString:se,merge:pe,pick:ne,pInt:le,replaceNested:ke,uniqueKey:be}=w;class Ee{constructor(J,oe,we,ee,re,ue,xe){let Te,ze,Ce=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),Ie=Ce.element;xe||Ce.css(this.getStyle(ee||{})),J.appendChild(Ie),O(J,"dir","ltr"),J.innerHTML.indexOf("xmlns")===-1&&O(Ie,"xmlns",this.SVG_NS),this.box=Ie,this.boxWrapper=Ce,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(x.createTextNode("Created with Highcharts 11.4.8")),this.defs=this.createElement("defs").add(),this.allowHTML=ue,this.forExport=re,this.styledMode=xe,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.rootFontSize=Ce.getStyle("font-size"),this.setSize(oe,we,!1),A&&J.getBoundingClientRect&&((Te=function(){L(J,{left:0,top:0}),ze=J.getBoundingClientRect(),L(J,{left:Math.ceil(ze.left)-ze.left+"px",top:Math.ceil(ze.top)-ze.top+"px"})})(),this.unSubPixelFix=X(Y,"resize",Te))}definition(J){return new s([J]).addToDOM(this.defs.element)}getReferenceURL(){if((A||C)&&x.getElementsByTagName("base").length){if(!R(v)){let J=be(),oe=new s([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:J},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":`url(#${J})`,fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(x.body);L(oe,{position:"fixed",top:0,left:0,zIndex:9e5});let we=x.elementFromPoint(6,6);v=(we&&we.id)==="hitme",x.body.removeChild(oe)}if(v)return ke(Y.location.href.split("#")[0],[/<[^>]*>/g,""],[/([\('\)])/g,"\\$1"],[/ /g,"%20"])}return""}getStyle(J){return this.style=U({fontFamily:"Helvetica, Arial, sans-serif",fontSize:"1rem"},J),this.style}setStyle(J){this.boxWrapper.css(this.getStyle(J))}isHidden(){return!this.boxWrapper.getBBox().width}destroy(){let J=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),G(this.gradients||{}),this.gradients=null,this.defs=J.destroy(),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null,null}createElement(J){return new this.Element(this,J)}getRadialAttr(J,oe){return{cx:J[0]-J[2]/2+(oe.cx||0)*J[2],cy:J[1]-J[2]/2+(oe.cy||0)*J[2],r:(oe.r||0)*J[2]}}shadowDefinition(J){let oe=[`highcharts-drop-shadow-${this.chartIndex}`,...Object.keys(J).map(ee=>`${ee}-${J[ee]}`)].join("-").toLowerCase().replace(/[^a-z\d\-]/g,""),we=pe({color:"#000000",offsetX:1,offsetY:1,opacity:.15,width:5},J);return this.defs.element.querySelector(`#${oe}`)||this.definition({tagName:"filter",attributes:{id:oe,filterUnits:we.filterUnits},children:this.getShadowFilterContent(we)}),oe}getShadowFilterContent(J){return[{tagName:"feDropShadow",attributes:{dx:J.offsetX,dy:J.offsetY,"flood-color":J.color,"flood-opacity":Math.min(5*J.opacity,1),stdDeviation:J.width/2}}]}buildText(J){new y(J).buildSVG()}getContrast(J){let oe=u.parse(J).rgba.map(ee=>{let re=ee/255;return re<=.03928?re/12.92:Math.pow((re+.055)/1.055,2.4)}),we=.2126*oe[0]+.7152*oe[1]+.0722*oe[2];return 1.05/(we+.05)>(we+.05)/.05?"#FFFFFF":"#000000"}button(J,oe,we,ee,re={},ue,xe,Te,ze,Ce){let Ie=this.label(J,oe,we,ze,void 0,void 0,Ce,void 0,"button"),Be=this.styledMode,He=arguments,Ae=0;re=pe(T.global.buttonTheme,re),Be&&(delete re.fill,delete re.stroke,delete re["stroke-width"]);let ye=re.states||{},ge=re.style||{};delete re.states,delete re.style;let Me=[s.filterUserAttributes(re)],De=[ge];return Be||["hover","select","disabled"].forEach((Pe,Fe)=>{Me.push(pe(Me[0],s.filterUserAttributes(He[Fe+5]||ye[Pe]||{}))),De.push(Me[Fe+1].style),delete Me[Fe+1].style}),X(Ie.element,D?"mouseover":"mouseenter",function(){Ae!==3&&Ie.setState(1)}),X(Ie.element,D?"mouseout":"mouseleave",function(){Ae!==3&&Ie.setState(Ae)}),Ie.setState=(Pe=0)=>{if(Pe!==1&&(Ie.state=Ae=Pe),Ie.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][Pe]),!Be){Ie.attr(Me[Pe]);let Fe=De[Pe];q(Fe)&&Ie.css(Fe)}},Ie.attr(Me[0]),!Be&&(Ie.css(U({cursor:"default"},ge)),Ce&&Ie.text.css({pointerEvents:"none"})),Ie.on("touchstart",Pe=>Pe.stopPropagation()).on("click",function(Pe){Ae!==3&&ee.call(Ie,Pe)})}crispLine(J,oe){let[we,ee]=J;return R(we[1])&&we[1]===ee[1]&&(we[1]=ee[1]=$(we[1],oe)),R(we[2])&&we[2]===ee[2]&&(we[2]=ee[2]=$(we[2],oe)),J}path(J){let oe=this.styledMode?{}:{fill:"none"};return B(J)?oe.d=J:q(J)&&U(oe,J),this.createElement("path").attr(oe)}circle(J,oe,we){let ee=q(J)?J:J===void 0?{}:{x:J,y:oe,r:we},re=this.createElement("circle");return re.xSetter=re.ySetter=function(ue,xe,Te){Te.setAttribute("c"+xe,ue)},re.attr(ee)}arc(J,oe,we,ee,re,ue){let xe;q(J)?(oe=(xe=J).y,we=xe.r,ee=xe.innerR,re=xe.start,ue=xe.end,J=xe.x):xe={innerR:ee,start:re,end:ue};let Te=this.symbol("arc",J,oe,we,we,xe);return Te.r=we,Te}rect(J,oe,we,ee,re,ue){let xe=q(J)?J:J===void 0?{}:{x:J,y:oe,r:re,width:Math.max(we||0,0),height:Math.max(ee||0,0)},Te=this.createElement("rect");return this.styledMode||(ue!==void 0&&(xe["stroke-width"]=ue,U(xe,Te.crisp(xe))),xe.fill="none"),Te.rSetter=function(ze,Ce,Ie){Te.r=ze,O(Ie,{rx:ze,ry:ze})},Te.rGetter=function(){return Te.r||0},Te.attr(xe)}roundedRect(J){return this.symbol("roundedRect").attr(J)}setSize(J,oe,we){this.width=J,this.height=oe,this.boxWrapper.animate({width:J,height:oe},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:ne(we,!0)?void 0:0}),this.alignElements()}g(J){let oe=this.createElement("g");return J?oe.attr({class:"highcharts-"+J}):oe}image(J,oe,we,ee,re,ue){let xe={preserveAspectRatio:"none"};H(oe)&&(xe.x=oe),H(we)&&(xe.y=we),H(ee)&&(xe.width=ee),H(re)&&(xe.height=re);let Te=this.createElement("image").attr(xe),ze=function(Ce){Te.attr({href:J}),ue.call(Te,Ce)};if(ue){Te.attr({href:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="});let Ce=new Y.Image;X(Ce,"load",ze),Ce.src=J,Ce.complete&&ze({})}else Te.attr({href:J});return Te}symbol(J,oe,we,ee,re,ue){let xe,Te,ze,Ce,Ie=this,Be=/^url\((.*?)\)$/,He=Be.test(J),Ae=!He&&(this.symbols[J]?J:"circle"),ye=Ae&&this.symbols[Ae];if(ye)typeof oe=="number"&&(Te=ye.call(this.symbols,oe||0,we||0,ee||0,re||0,ue)),xe=this.path(Te),Ie.styledMode||xe.attr("fill","none"),U(xe,{symbolName:Ae||void 0,x:oe,y:we,width:ee,height:re}),ue&&U(xe,ue);else if(He){ze=J.match(Be)[1];let ge=xe=this.image(ze);ge.imgwidth=ne(ue&&ue.width,W[ze]&&W[ze].width),ge.imgheight=ne(ue&&ue.height,W[ze]&&W[ze].height),Ce=Me=>Me.attr({width:Me.width,height:Me.height}),["width","height"].forEach(Me=>{ge[`${Me}Setter`]=function(De,Pe){this[Pe]=De;let{alignByTranslate:Fe,element:Xe,width:tt,height:nt,imgwidth:ht,imgheight:gt}=this,Tt=Pe==="width"?ht:gt,Lt=1;ue&&ue.backgroundSize==="within"&&tt&&nt&&ht&&gt?(Lt=Math.min(tt/ht,nt/gt),O(Xe,{width:Math.round(ht*Lt),height:Math.round(gt*Lt)})):Xe&&Tt&&Xe.setAttribute(Pe,Tt),!Fe&&ht&&gt&&this.translate(((tt||0)-ht*Lt)/2,((nt||0)-gt*Lt)/2)}}),R(oe)&&ge.attr({x:oe,y:we}),ge.isImg=!0,ge.symbolUrl=J,R(ge.imgwidth)&&R(ge.imgheight)?Ce(ge):(ge.attr({width:0,height:0}),V("img",{onload:function(){let Me=S[Ie.chartIndex];this.width===0&&(L(this,{position:"absolute",top:"-999em"}),x.body.appendChild(this)),W[ze]={width:this.width,height:this.height},ge.imgwidth=this.width,ge.imgheight=this.height,ge.element&&Ce(ge),this.parentNode&&this.parentNode.removeChild(this),Ie.imgCount--,Ie.imgCount||!Me||Me.hasLoaded||Me.onload()},src:ze}),this.imgCount++)}return xe}clipRect(J,oe,we,ee){return this.rect(J,oe,we,ee,0)}text(J,oe,we,ee){let re={};if(ee&&(this.allowHTML||!this.forExport))return this.html(J,oe,we);re.x=Math.round(oe||0),we&&(re.y=Math.round(we)),R(J)&&(re.text=J);let ue=this.createElement("text").attr(re);return ee&&(!this.forExport||this.allowHTML)||(ue.xSetter=function(xe,Te,ze){let Ce=ze.getElementsByTagName("tspan"),Ie=ze.getAttribute(Te);for(let Be=0,He;Be<Ce.length;Be++)(He=Ce[Be]).getAttribute(Te)===Ie&&He.setAttribute(Te,xe);ze.setAttribute(Te,xe)}),ue}fontMetrics(J){let oe=le(f.prototype.getStyle.call(J,"font-size")||0),we=oe<24?oe+3:Math.round(1.2*oe),ee=Math.round(.8*we);return{h:we,b:ee,f:oe}}rotCorr(J,oe,we){let ee=J;return oe&&we&&(ee=Math.max(ee*Math.cos(oe*E),4)),{x:-J/3*Math.sin(oe*E),y:ee}}pathToSegments(J){let oe=[],we=[],ee={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2};for(let re=0;re<J.length;re++)se(we[0])&&H(J[re])&&we.length===ee[we[0].toUpperCase()]&&J.splice(re,0,we[0].replace("M","L").replace("m","l")),typeof J[re]=="string"&&(we.length&&oe.push(we.slice(0)),we.length=0),we.push(J[re]);return oe.push(we.slice(0)),oe}label(J,oe,we,ee,re,ue,xe,Te,ze){return new g(this,J,oe,we,ee,re,ue,xe,Te,ze)}alignElements(){this.alignedObjects.forEach(J=>J.align())}}return U(Ee.prototype,{Element:f,SVG_NS:N,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:b,draw:I}),p.registerRendererType("svg",Ee,!0),Ee}),n(t,"Core/Renderer/HTML/HTMLElement.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{composed:p}=l,{attr:f,css:g,createElement:b,defined:y,extend:w,pInt:v,pushUnique:T}=r;function S(D,C,I){var W;let N=((W=this.div)==null?void 0:W.style)||I.style;u.prototype[`${C}Setter`].call(this,D,C,I),N&&(N[C]=D)}let E=(D,C)=>{var I;if(!D.div){let N=f(D.element,"class"),W=D.css,Y=b("div",N?{className:N}:void 0,{position:"absolute",left:`${D.translateX||0}px`,top:`${D.translateY||0}px`,...D.styles,display:D.display,opacity:D.opacity,visibility:D.visibility},((I=D.parentGroup)==null?void 0:I.div)||C);D.classSetter=(X,O,V)=>{V.setAttribute("class",X),Y.className=X},D.translateXSetter=D.translateYSetter=(X,O)=>{D[O]=X,Y.style[O==="translateX"?"left":"top"]=`${X}px`,D.doTransform=!0},D.opacitySetter=D.visibilitySetter=S,D.css=X=>(W.call(D,X),X.cursor&&(Y.style.cursor=X.cursor),X.pointerEvents&&(Y.style.pointerEvents=X.pointerEvents),D),D.on=function(){return u.prototype.on.apply({element:Y,onEvents:D.onEvents},arguments),D},D.div=Y}return D.div};class x extends u{static compose(C){T(p,this.compose)&&(C.prototype.html=function(I,N,W){return new x(this,"span").attr({text:I,x:Math.round(N),y:Math.round(W)})})}constructor(C,I){super(C,I),this.css({position:"absolute",...C.styledMode?{}:{fontFamily:C.style.fontFamily,fontSize:C.style.fontSize}}),this.element.style.whiteSpace="nowrap"}getSpanCorrection(C,I,N){this.xCorr=-C*N,this.yCorr=-I}css(C){let I,{element:N}=this,W=N.tagName==="SPAN"&&C&&"width"in C,Y=W&&C.width;return W&&(delete C.width,this.textWidth=v(Y)||void 0,I=!0),(C==null?void 0:C.textOverflow)==="ellipsis"&&(C.whiteSpace="nowrap",C.overflow="hidden"),w(this.styles,C),g(N,C),I&&this.updateTransform(),this}htmlGetBBox(){let{element:C}=this;return{x:C.offsetLeft,y:C.offsetTop,width:C.offsetWidth,height:C.offsetHeight}}updateTransform(){var H;if(!this.added){this.alignOnAdd=!0;return}let{element:C,renderer:I,rotation:N,rotationOriginX:W,rotationOriginY:Y,styles:X,textAlign:O="left",textWidth:V,translateX:$=0,translateY:L=0,x:R=0,y:G=0}=this,U={left:0,center:.5,right:1}[O],B=X.whiteSpace;if(g(C,{marginLeft:`${$}px`,marginTop:`${L}px`}),C.tagName==="SPAN"){let q=[N,O,C.innerHTML,V,this.textAlign].join(","),se=-(((H=this.parentGroup)==null?void 0:H.padding)*1)||0,pe,ne=!1;if(V!==this.oldTextWidth){let K=this.textPxLength?this.textPxLength:(g(C,{width:"",whiteSpace:B||"nowrap"}),C.offsetWidth),J=V||0;(J>this.oldTextWidth||K>J)&&(/[ \-]/.test(C.textContent||C.innerText)||C.style.textOverflow==="ellipsis")&&(g(C,{width:K>J||N?V+"px":"auto",display:"block",whiteSpace:B||"normal"}),this.oldTextWidth=V,ne=!0)}this.hasBoxWidthChanged=ne,q!==this.cTT&&(pe=I.fontMetrics(C).b,y(N)&&(N!==(this.oldRotation||0)||O!==this.oldAlign)&&this.setSpanRotation(N,se,se),this.getSpanCorrection(!y(N)&&this.textPxLength||C.offsetWidth,pe,U));let{xCorr:le=0,yCorr:ke=0}=this,be=(W??R)-le-R-se,Ee=(Y??G)-ke-G-se;g(C,{left:`${R+le}px`,top:`${G+ke}px`,transformOrigin:`${be}px ${Ee}px`}),this.cTT=q,this.oldRotation=N,this.oldAlign=O}}setSpanRotation(C,I,N){g(this.element,{transform:`rotate(${C}deg)`,transformOrigin:`${I}% ${N}px`})}add(C){let I,N=this.renderer.box.parentNode,W=[];if(this.parentGroup=C,C&&!(I=C.div)){let Y=C;for(;Y;)W.push(Y),Y=Y.parentGroup;for(let X of W.reverse())I=E(X,N)}return(I||N).appendChild(this.element),this.added=!0,this.alignOnAdd&&this.updateTransform(),this}textSetter(C){C!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,s.setElementHTML(this.element,C??""),this.textStr=C,this.doTransform=!0)}alignSetter(C){this.alignValue=this.textAlign=C,this.doTransform=!0}xSetter(C,I){this[I]=C,this.doTransform=!0}}let A=x.prototype;return A.visibilitySetter=A.opacitySetter=S,A.ySetter=A.rotationSetter=A.rotationOriginXSetter=A.rotationOriginYSetter=A.xSetter,x}),n(t,"Core/Axis/AxisDefaults.js",[],function(){var s,l;return(l=s||(s={})).xAxis={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%H:%M:%S.%L",range:!1},second:{main:"%H:%M:%S",range:!1},minute:{main:"%H:%M",range:!1},hour:{main:"%H:%M",range:!1},day:{main:"%e %b"},week:{main:"%e %b"},month:{main:"%b '%y"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotationLimit:80,distance:15,enabled:!0,indentation:10,overflow:"justify",reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,zIndex:7,style:{color:"#333333",cursor:"default",fontSize:"0.8em"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minorTicksPerMajor:5,minPadding:.01,offset:void 0,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",useHTML:!1,x:0,y:0,style:{color:"#666666",fontSize:"0.8em"}},visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#333333",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#333333"},l.yAxis={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:void 0},startOnTick:!0,title:{text:"Values"},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){let{numberFormatter:u}=this.axis.chart;return u(this.total||0,-1)},style:{color:"#000000",fontSize:"0.7em",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},s}),n(t,"Core/Foundation.js",[t["Core/Utilities.js"]],function(s){var l;let{addEvent:u,isFunction:r,objectEach:p,removeEvent:f}=s;return(l||(l={})).registerEventOptions=function(g,b){g.eventOptions=g.eventOptions||{},p(b.events,function(y,w){g.eventOptions[w]!==y&&(g.eventOptions[w]&&(f(g,w,g.eventOptions[w]),delete g.eventOptions[w]),r(y)&&(g.eventOptions[w]=y,u(g,w,y,{order:0})))})},l}),n(t,"Core/Axis/Tick.js",[t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){let{deg2rad:r}=l,{clamp:p,correctFloat:f,defined:g,destroyObjectProperties:b,extend:y,fireEvent:w,isNumber:v,merge:T,objectEach:S,pick:E}=u;return class{constructor(x,A,D,C,I){this.isNew=!0,this.isNewLabel=!0,this.axis=x,this.pos=A,this.type=D||"",this.parameters=I||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,w(this,"init"),D||C||this.addLabel()}addLabel(){let x=this,A=x.axis,D=A.options,C=A.chart,I=A.categories,N=A.logarithmic,W=A.names,Y=x.pos,X=E(x.options&&x.options.labels,D.labels),O=A.tickPositions,V=Y===O[0],$=Y===O[O.length-1],L=(!X.step||X.step===1)&&A.tickInterval===1,R=O.info,G=x.label,U,B,H,q=this.parameters.category||(I?E(I[Y],W[Y],Y):Y);N&&v(q)&&(q=f(N.lin2log(q))),A.dateTime&&(R?U=(B=C.time.resolveDTLFormat(D.dateTimeLabelFormats[!D.grid&&R.higherRanks[Y]||R.unitName])).main:v(q)&&(U=A.dateTime.getXDateFormat(q,D.dateTimeLabelFormats||{}))),x.isFirst=V,x.isLast=$;let se={axis:A,chart:C,dateTimeLabelFormat:U,isFirst:V,isLast:$,pos:Y,tick:x,tickPositionInfo:R,value:q};w(this,"labelFormat",se);let pe=ke=>X.formatter?X.formatter.call(ke,ke):X.format?(ke.text=A.defaultLabelFormatter.call(ke),s.format(X.format,ke,C)):A.defaultLabelFormatter.call(ke),ne=pe.call(se,se),le=B&&B.list;le?x.shortenLabel=function(){for(H=0;H<le.length;H++)if(y(se,{dateTimeLabelFormat:le[H]}),G.attr({text:pe.call(se,se)}),G.getBBox().width<A.getSlotWidth(x)-2*(X.padding||0))return;G.attr({text:""})}:x.shortenLabel=void 0,L&&A._addedPlotLB&&x.moveLabel(ne,X),g(G)||x.movedLabel?G&&G.textStr!==ne&&!L&&(!G.textWidth||X.style.width||G.styles.width||G.css({width:null}),G.attr({text:ne}),G.textPxLength=G.getBBox().width):(x.label=G=x.createLabel(ne,X),x.rotation=0)}createLabel(x,A,D){let C=this.axis,I=C.chart,N=g(x)&&A.enabled?I.renderer.text(x,D==null?void 0:D.x,D==null?void 0:D.y,A.useHTML).add(C.labelGroup):void 0;return N&&(I.styledMode||N.css(T(A.style)),N.textPxLength=N.getBBox().width),N}destroy(){b(this,this.axis)}getPosition(x,A,D,C){let I=this.axis,N=I.chart,W=C&&N.oldChartHeight||N.chartHeight,Y={x:x?f(I.translate(A+D,void 0,void 0,C)+I.transB):I.left+I.offset+(I.opposite?(C&&N.oldChartWidth||N.chartWidth)-I.right-I.left:0),y:x?W-I.bottom+I.offset-(I.opposite?I.height:0):f(W-I.translate(A+D,void 0,void 0,C)-I.transB)};return Y.y=p(Y.y,-1e9,1e9),w(this,"afterGetPosition",{pos:Y}),Y}getLabelPosition(x,A,D,C,I,N,W,Y){let X,O,V=this.axis,$=V.transA,L=V.isLinked&&V.linkedParent?V.linkedParent.reversed:V.reversed,R=V.staggerLines,G=V.tickRotCorr||{x:0,y:0},U=C||V.reserveSpaceDefault?0:-V.labelOffset*(V.labelAlign==="center"?.5:1),B=I.distance,H={};return X=V.side===0?D.rotation?-B:-D.getBBox().height:V.side===2?G.y+B:Math.cos(D.rotation*r)*(G.y-D.getBBox(!1,0).height/2),g(I.y)&&(X=V.side===0&&V.horiz?I.y+X:I.y),x=x+E(I.x,[0,1,0,-1][V.side]*B)+U+G.x-(N&&C?N*$*(L?-1:1):0),A=A+X-(N&&!C?N*$*(L?1:-1):0),R&&(O=W/(Y||1)%R,V.opposite&&(O=R-O-1),A+=O*(V.labelOffset/R)),H.x=x,H.y=Math.round(A),w(this,"afterGetLabelPosition",{pos:H,tickmarkOffset:N,index:W}),H}getLabelSize(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0}getMarkPath(x,A,D,C,I=!1,N){return N.crispLine([["M",x,A],["L",x+(I?0:-D),A+(I?D:0)]],C)}handleOverflow(x){let A=this.axis,D=A.options.labels,C=x.x,I=A.chart.chartWidth,N=A.chart.spacing,W=E(A.labelLeft,Math.min(A.pos,N[3])),Y=E(A.labelRight,Math.max(A.isRadial?0:A.pos+A.len,I-N[1])),X=this.label,O=this.rotation,V={left:0,center:.5,right:1}[A.labelAlign||X.attr("align")],$=X.getBBox().width,L=A.getSlotWidth(this),R={},G=L,U=1,B,H,q;O||D.overflow!=="justify"?O<0&&C-V*$<W?q=Math.round(C/Math.cos(O*r)-W):O>0&&C+V*$>Y&&(q=Math.round((I-C)/Math.cos(O*r))):(B=C-V*$,H=C+(1-V)*$,B<W?G=x.x+G*(1-V)-W:H>Y&&(G=Y-x.x+G*V,U=-1),(G=Math.min(L,G))<L&&A.labelAlign==="center"&&(x.x+=U*(L-G-V*(L-Math.min($,G)))),($>G||A.autoRotation&&(X.styles||{}).width)&&(q=G)),q&&(this.shortenLabel?this.shortenLabel():(R.width=Math.floor(q)+"px",(D.style||{}).textOverflow||(R.textOverflow="ellipsis"),X.css(R)))}moveLabel(x,A){let D=this,C=D.label,I=D.axis,N=!1,W;C&&C.textStr===x?(D.movedLabel=C,N=!0,delete D.label):S(I.ticks,function(Y){N||Y.isNew||Y===D||!Y.label||Y.label.textStr!==x||(D.movedLabel=Y.label,N=!0,Y.labelPos=D.movedLabel.xy,delete Y.label)}),!N&&(D.labelPos||C)&&(W=D.labelPos||C.xy,D.movedLabel=D.createLabel(x,A,W),D.movedLabel&&D.movedLabel.attr({opacity:0}))}render(x,A,D){let C=this.axis,I=C.horiz,N=this.pos,W=E(this.tickmarkOffset,C.tickmarkOffset),Y=this.getPosition(I,N,W,A),X=Y.x,O=Y.y,V=C.pos,$=V+C.len,L=I?X:O;!C.chart.polar&&this.isNew&&(f(L)<V||L>$)&&(D=0);let R=E(D,this.label&&this.label.newOpacity,1);D=E(D,1),this.isActive=!0,this.renderGridLine(A,D),this.renderMark(Y,D),this.renderLabel(Y,A,R,x),this.isNew=!1,w(this,"afterRender")}renderGridLine(x,A){let D=this.axis,C=D.options,I={},N=this.pos,W=this.type,Y=E(this.tickmarkOffset,D.tickmarkOffset),X=D.chart.renderer,O=this.gridLine,V,$=C.gridLineWidth,L=C.gridLineColor,R=C.gridLineDashStyle;this.type==="minor"&&($=C.minorGridLineWidth,L=C.minorGridLineColor,R=C.minorGridLineDashStyle),O||(D.chart.styledMode||(I.stroke=L,I["stroke-width"]=$||0,I.dashstyle=R),W||(I.zIndex=1),x&&(A=0),this.gridLine=O=X.path().attr(I).addClass("highcharts-"+(W?W+"-":"")+"grid-line").add(D.gridGroup)),O&&(V=D.getPlotLinePath({value:N+Y,lineWidth:O.strokeWidth(),force:"pass",old:x,acrossPanes:!1}))&&O[x||this.isNew?"attr":"animate"]({d:V,opacity:A})}renderMark(x,A){let D=this.axis,C=D.options,I=D.chart.renderer,N=this.type,W=D.tickSize(N?N+"Tick":"tick"),Y=x.x,X=x.y,O=E(C[N!=="minor"?"tickWidth":"minorTickWidth"],!N&&D.isXAxis?1:0),V=C[N!=="minor"?"tickColor":"minorTickColor"],$=this.mark,L=!$;W&&(D.opposite&&(W[0]=-W[0]),$||(this.mark=$=I.path().addClass("highcharts-"+(N?N+"-":"")+"tick").add(D.axisGroup),D.chart.styledMode||$.attr({stroke:V,"stroke-width":O})),$[L?"attr":"animate"]({d:this.getMarkPath(Y,X,W[0],$.strokeWidth(),D.horiz,I),opacity:A}))}renderLabel(x,A,D,C){let I=this.axis,N=I.horiz,W=I.options,Y=this.label,X=W.labels,O=X.step,V=E(this.tickmarkOffset,I.tickmarkOffset),$=x.x,L=x.y,R=!0;Y&&v($)&&(Y.xy=x=this.getLabelPosition($,L,Y,N,X,V,C,O),(!this.isFirst||this.isLast||W.showFirstLabel)&&(!this.isLast||this.isFirst||W.showLastLabel)?!N||X.step||X.rotation||A||D===0||this.handleOverflow(x):R=!1,O&&C%O&&(R=!1),R&&v(x.y)?(x.opacity=D,Y[this.isNewLabel?"attr":"animate"](x).show(!0),this.isNewLabel=!1):(Y.hide(),this.isNewLabel=!0))}replaceMovedLabel(){let x=this.label,A=this.axis;x&&!this.isNew&&(x.animate({opacity:0},void 0,x.destroy),delete this.label),A.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel}}}),n(t,"Core/Axis/Axis.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/AxisDefaults.js"],t["Core/Color/Color.js"],t["Core/Defaults.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Axis/Tick.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,g,b){let{animObject:y}=s,{xAxis:w,yAxis:v}=l,{defaultOptions:T}=r,{registerEventOptions:S}=p,{deg2rad:E}=f,{arrayMax:x,arrayMin:A,clamp:D,correctFloat:C,defined:I,destroyObjectProperties:N,erase:W,error:Y,extend:X,fireEvent:O,getClosestDistance:V,insertItem:$,isArray:L,isNumber:R,isString:G,merge:U,normalizeTickInterval:B,objectEach:H,pick:q,relativeLength:se,removeEvent:pe,splat:ne,syncTimeout:le}=b,ke=(Ee,K)=>B(K,void 0,void 0,q(Ee.options.allowDecimals,K<.5||Ee.tickAmount!==void 0),!!Ee.tickAmount);X(T,{xAxis:w,yAxis:U(w,v)});class be{constructor(K,J,oe){this.init(K,J,oe)}init(K,J,oe=this.coll){let we=oe==="xAxis",ee=this.isZAxis||(K.inverted?!we:we);this.chart=K,this.horiz=ee,this.isXAxis=we,this.coll=oe,O(this,"init",{userOptions:J}),this.opposite=q(J.opposite,this.opposite),this.side=q(J.side,this.side,ee?this.opposite?0:2:this.opposite?1:3),this.setOptions(J);let re=this.options,ue=re.labels;this.type??(this.type=re.type||"linear"),this.uniqueNames??(this.uniqueNames=re.uniqueNames??!0),O(this,"afterSetType"),this.userOptions=J,this.minPixelPadding=0,this.reversed=q(re.reversed,this.reversed),this.visible=re.visible,this.zoomEnabled=re.zoomEnabled,this.hasNames=this.type==="category"||re.categories===!0,this.categories=L(re.categories)&&re.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=I(re.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len??(this.len=0),this.minRange=this.userMinRange=re.minRange||re.maxZoom,this.range=re.range,this.offset=re.offset||0,this.max=void 0,this.min=void 0;let xe=q(re.crosshair,ne(K.options.tooltip.crosshairs)[we?0:1]);this.crosshair=xe===!0?{}:xe,K.axes.indexOf(this)===-1&&(we?K.axes.splice(K.xAxis.length,0,this):K.axes.push(this),$(this,K[this.coll])),K.orderItems(this.coll),this.series=this.series||[],K.inverted&&!this.isZAxis&&we&&!I(this.reversed)&&(this.reversed=!0),this.labelRotation=R(ue.rotation)?ue.rotation:void 0,S(this,re),O(this,"afterInit")}setOptions(K){let J=this.horiz?{labels:{autoRotation:[-45],padding:4},margin:15}:{labels:{padding:1},title:{rotation:90*this.side}};this.options=U(J,T[this.coll],K),O(this,"afterSetOptions",{userOptions:K})}defaultLabelFormatter(){let K=this.axis,{numberFormatter:J}=this.chart,oe=R(this.value)?this.value:NaN,we=K.chart.time,ee=K.categories,re=this.dateTimeLabelFormat,ue=T.lang,xe=ue.numericSymbols,Te=ue.numericSymbolMagnitude||1e3,ze=K.logarithmic?Math.abs(oe):K.tickInterval,Ce=xe&&xe.length,Ie,Be;if(ee)Be=`${this.value}`;else if(re)Be=we.dateFormat(re,oe);else if(Ce&&xe&&ze>=1e3)for(;Ce--&&Be===void 0;)ze>=(Ie=Math.pow(Te,Ce+1))&&10*oe%Ie==0&&xe[Ce]!==null&&oe!==0&&(Be=J(oe/Ie,-1)+xe[Ce]);return Be===void 0&&(Be=Math.abs(oe)>=1e4?J(oe,-1):J(oe,-1,void 0,"")),Be}getSeriesExtremes(){let K,J=this;O(this,"getSeriesExtremes",null,function(){J.hasVisibleSeries=!1,J.dataMin=J.dataMax=J.threshold=void 0,J.softThreshold=!J.isXAxis,J.series.forEach(oe=>{if(oe.reserveSpace()){let we=oe.options,ee,re=we.threshold,ue,xe;if(J.hasVisibleSeries=!0,J.positiveValuesOnly&&0>=(re||0)&&(re=void 0),J.isXAxis)(ee=oe.xData)&&ee.length&&(ee=J.logarithmic?ee.filter(Te=>Te>0):ee,ue=(K=oe.getXExtremes(ee)).min,xe=K.max,R(ue)||ue instanceof Date||(ee=ee.filter(R),ue=(K=oe.getXExtremes(ee)).min,xe=K.max),ee.length&&(J.dataMin=Math.min(q(J.dataMin,ue),ue),J.dataMax=Math.max(q(J.dataMax,xe),xe)));else{let Te=oe.applyExtremes();R(Te.dataMin)&&(ue=Te.dataMin,J.dataMin=Math.min(q(J.dataMin,ue),ue)),R(Te.dataMax)&&(xe=Te.dataMax,J.dataMax=Math.max(q(J.dataMax,xe),xe)),I(re)&&(J.threshold=re),(!we.softThreshold||J.positiveValuesOnly)&&(J.softThreshold=!1)}}})}),O(this,"afterGetSeriesExtremes")}translate(K,J,oe,we,ee,re){var Ae;let ue=this.linkedParent||this,xe=we&&ue.old?ue.old.min:ue.min;if(!R(xe))return NaN;let Te=ue.minPixelPadding,ze=(ue.isOrdinal||((Ae=ue.brokenAxis)==null?void 0:Ae.hasBreaks)||ue.logarithmic&&ee)&&ue.lin2val,Ce=1,Ie=0,Be=we&&ue.old?ue.old.transA:ue.transA,He=0;return Be||(Be=ue.transA),oe&&(Ce*=-1,Ie=ue.len),ue.reversed&&(Ce*=-1,Ie-=Ce*(ue.sector||ue.len)),J?(He=(K=K*Ce+Ie-Te)/Be+xe,ze&&(He=ue.lin2val(He))):(ze&&(K=ue.val2lin(K)),He=Ce*(K-xe)*Be+Ie+Ce*Te+(R(re)?Be*re:0),ue.isRadial||(He=C(He))),He}toPixels(K,J){return this.translate(K,!1,!this.horiz,void 0,!0)+(J?0:this.pos)}toValue(K,J){return this.translate(K-(J?0:this.pos),!0,!this.horiz,void 0,!0)}getPlotLinePath(K){let J=this,oe=J.chart,we=J.left,ee=J.top,re=K.old,ue=K.value,xe=K.lineWidth,Te=re&&oe.oldChartHeight||oe.chartHeight,ze=re&&oe.oldChartWidth||oe.chartWidth,Ce=J.transB,Ie=K.translatedValue,Be=K.force,He,Ae,ye,ge,Me;function De(Fe,Xe,tt){return Be!=="pass"&&(Fe<Xe||Fe>tt)&&(Be?Fe=D(Fe,Xe,tt):Me=!0),Fe}let Pe={value:ue,lineWidth:xe,old:re,force:Be,acrossPanes:K.acrossPanes,translatedValue:Ie};return O(this,"getPlotLinePath",Pe,function(Fe){He=ye=(Ie=D(Ie=q(Ie,J.translate(ue,void 0,void 0,re)),-1e9,1e9))+Ce,Ae=ge=Te-Ie-Ce,R(Ie)?J.horiz?(Ae=ee,ge=Te-J.bottom+(J.options.isInternal?0:oe.scrollablePixelsY||0),He=ye=De(He,we,we+J.width)):(He=we,ye=ze-J.right+(oe.scrollablePixelsX||0),Ae=ge=De(Ae,ee,ee+J.height)):(Me=!0,Be=!1),Fe.path=Me&&!Be?void 0:oe.renderer.crispLine([["M",He,Ae],["L",ye,ge]],xe||1)}),Pe.path}getLinearTickPositions(K,J,oe){let we,ee,re,ue=C(Math.floor(J/K)*K),xe=C(Math.ceil(oe/K)*K),Te=[];if(C(ue+K)===ue&&(re=20),this.single)return[J];for(we=ue;we<=xe&&(Te.push(we),(we=C(we+K,re))!==ee);)ee=we;return Te}getMinorTickInterval(){let{minorTicks:K,minorTickInterval:J}=this.options;return K===!0?q(J,"auto"):K!==!1?J:void 0}getMinorTickPositions(){let K=this.options,J=this.tickPositions,oe=this.minorTickInterval,we=this.pointRangePadding||0,ee=(this.min||0)-we,re=(this.max||0)+we,ue=re-ee,xe=[],Te;if(ue&&ue/oe<this.len/3){let ze=this.logarithmic;if(ze)this.paddedTicks.forEach(function(Ce,Ie,Be){Ie&&xe.push.apply(xe,ze.getLogTickPositions(oe,Be[Ie-1],Be[Ie],!0))});else if(this.dateTime&&this.getMinorTickInterval()==="auto")xe=xe.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(oe),ee,re,K.startOfWeek));else for(Te=ee+(J[0]-ee)%oe;Te<=re&&Te!==xe[0];Te+=oe)xe.push(Te)}return xe.length!==0&&this.trimTicks(xe),xe}adjustForMinRange(){let K=this.options,J=this.logarithmic,{max:oe,min:we,minRange:ee}=this,re,ue,xe,Te;this.isXAxis&&ee===void 0&&!J&&(ee=I(K.min)||I(K.max)||I(K.floor)||I(K.ceiling)?null:Math.min(5*(V(this.series.map(ze=>{var Ce;return(ze.xIncrement?(Ce=ze.xData)==null?void 0:Ce.slice(0,2):ze.xData)||[]}))||0),this.dataMax-this.dataMin)),R(oe)&&R(we)&&R(ee)&&oe-we<ee&&(ue=this.dataMax-this.dataMin>=ee,re=(ee-oe+we)/2,xe=[we-re,q(K.min,we-re)],ue&&(xe[2]=J?J.log2lin(this.dataMin):this.dataMin),Te=[(we=x(xe))+ee,q(K.max,we+ee)],ue&&(Te[2]=J?J.log2lin(this.dataMax):this.dataMax),(oe=A(Te))-we<ee&&(xe[0]=oe-ee,xe[1]=q(K.min,oe-ee),we=x(xe))),this.minRange=ee,this.min=we,this.max=oe}getClosest(){let K,J;if(this.categories)J=1;else{let oe=[];this.series.forEach(function(we){var re;let ee=we.closestPointRange;((re=we.xData)==null?void 0:re.length)===1?oe.push(we.xData[0]):!we.noSharedTooltip&&I(ee)&&we.reserveSpace()&&(J=I(J)?Math.min(J,ee):ee)}),oe.length&&(oe.sort((we,ee)=>we-ee),K=V([oe]))}return K&&J?Math.min(K,J):K||J}nameToX(K){let J=L(this.options.categories),oe=J?this.categories:this.names,we=K.options.x,ee;return K.series.requireSorting=!1,I(we)||(we=this.uniqueNames&&oe?J?oe.indexOf(K.name):q(oe.keys[K.name],-1):K.series.autoIncrement()),we===-1?!J&&oe&&(ee=oe.length):ee=we,ee!==void 0?(this.names[ee]=K.name,this.names.keys[K.name]=ee):K.x&&(ee=K.x),ee}updateNames(){let K=this,J=this.names;J.length>0&&(Object.keys(J.keys).forEach(function(oe){delete J.keys[oe]}),J.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach(oe=>{oe.xIncrement=null,(!oe.points||oe.isDirtyData)&&(K.max=Math.max(K.max,oe.xData.length-1),oe.processData(),oe.generatePoints()),oe.data.forEach(function(we,ee){let re;we!=null&&we.options&&we.name!==void 0&&(re=K.nameToX(we))!==void 0&&re!==we.x&&(we.x=re,oe.xData[ee]=re)})}))}setAxisTranslation(){let K=this,J=K.max-K.min,oe=K.linkedParent,we=!!K.categories,ee=K.isXAxis,re=K.axisPointRange||0,ue,xe=0,Te=0,ze,Ce=K.transA;(ee||we||re)&&(ue=K.getClosest(),oe?(xe=oe.minPointOffset,Te=oe.pointRangePadding):K.series.forEach(function(Ie){let Be=we?1:ee?q(Ie.options.pointRange,ue,0):K.axisPointRange||0,He=Ie.options.pointPlacement;if(re=Math.max(re,Be),!K.single||we){let Ae=Ie.is("xrange")?!ee:ee;xe=Math.max(xe,Ae&&G(He)?0:Be/2),Te=Math.max(Te,Ae&&He==="on"?0:Be)}}),ze=K.ordinal&&K.ordinal.slope&&ue?K.ordinal.slope/ue:1,K.minPointOffset=xe*=ze,K.pointRangePadding=Te*=ze,K.pointRange=Math.min(re,K.single&&we?1:J),ee&&ue&&(K.closestPointRange=ue)),K.translationSlope=K.transA=Ce=K.staticScale||K.len/(J+Te||1),K.transB=K.horiz?K.left:K.bottom,K.minPixelPadding=Ce*xe,O(this,"afterSetAxisTranslation")}minFromRange(){let{max:K,min:J}=this;return R(K)&&R(J)&&K-J||void 0}setTickInterval(K){var Et,Ct,si,di;let{categories:J,chart:oe,dataMax:we,dataMin:ee,dateTime:re,isXAxis:ue,logarithmic:xe,options:Te,softThreshold:ze}=this,Ce=R(this.threshold)?this.threshold:void 0,Ie=this.minRange||0,{ceiling:Be,floor:He,linkedTo:Ae,softMax:ye,softMin:ge}=Te,Me=R(Ae)&&((Et=oe[this.coll])==null?void 0:Et[Ae]),De=Te.tickPixelInterval,Pe=Te.maxPadding,Fe=Te.minPadding,Xe=0,tt,nt=R(Te.tickInterval)&&Te.tickInterval>=0?Te.tickInterval:void 0,ht,gt,Tt,Lt;if(re||J||Me||this.getTickAmount(),Tt=q(this.userMin,Te.min),Lt=q(this.userMax,Te.max),Me?(this.linkedParent=Me,tt=Me.getExtremes(),this.min=q(tt.min,tt.dataMin),this.max=q(tt.max,tt.dataMax),this.type!==Me.type&&Y(11,!0,oe)):(ze&&I(Ce)&&R(we)&&R(ee)&&(ee>=Ce?(ht=Ce,Fe=0):we<=Ce&&(gt=Ce,Pe=0)),this.min=q(Tt,ht,ee),this.max=q(Lt,gt,we)),R(this.max)&&R(this.min)&&(xe&&(this.positiveValuesOnly&&!K&&0>=Math.min(this.min,q(ee,this.min))&&Y(10,!0,oe),this.min=C(xe.log2lin(this.min),16),this.max=C(xe.log2lin(this.max),16)),this.range&&R(ee)&&(this.userMin=this.min=Tt=Math.max(ee,this.minFromRange()||0),this.userMax=Lt=this.max,this.range=void 0)),O(this,"foundExtremes"),this.adjustForMinRange(),R(this.min)&&R(this.max)){if(!R(this.userMin)&&R(ge)&&ge<this.min&&(this.min=Tt=ge),!R(this.userMax)&&R(ye)&&ye>this.max&&(this.max=Lt=ye),J||this.axisPointRange||(Ct=this.stacking)!=null&&Ct.usePercentage||Me||!(Xe=this.max-this.min)||(!I(Tt)&&Fe&&(this.min-=Xe*Fe),I(Lt)||!Pe||(this.max+=Xe*Pe)),!R(this.userMin)&&R(He)&&(this.min=Math.max(this.min,He)),!R(this.userMax)&&R(Be)&&(this.max=Math.min(this.max,Be)),ze&&R(ee)&&R(we)){let qt=Ce||0;!I(Tt)&&this.min<qt&&ee>=qt?this.min=Te.minRange?Math.min(qt,this.max-Ie):qt:!I(Lt)&&this.max>qt&&we<=qt&&(this.max=Te.minRange?Math.max(qt,this.min+Ie):qt)}!oe.polar&&this.min>this.max&&(I(Te.min)?this.max=this.min:I(Te.max)&&(this.min=this.max)),Xe=this.max-this.min}if(this.min!==this.max&&R(this.min)&&R(this.max)?Me&&!nt&&De===Me.options.tickPixelInterval?this.tickInterval=nt=Me.tickInterval:this.tickInterval=q(nt,this.tickAmount?Xe/Math.max(this.tickAmount-1,1):void 0,J?1:Xe*De/Math.max(this.len,De)):this.tickInterval=1,ue&&!K){let qt=this.min!==((si=this.old)==null?void 0:si.min)||this.max!==((di=this.old)==null?void 0:di.max);this.series.forEach(function(cn){var Xi;cn.forceCrop=(Xi=cn.forceCropping)==null?void 0:Xi.call(cn),cn.processData(qt)}),O(this,"postProcessData",{hasExtremesChanged:qt})}this.setAxisTranslation(),O(this,"initialAxisTranslation"),this.pointRange&&!nt&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval));let ft=q(Te.minTickInterval,re&&!this.series.some(qt=>qt.noSharedTooltip)?this.closestPointRange:0);!nt&&this.tickInterval<ft&&(this.tickInterval=ft),re||xe||nt||(this.tickInterval=ke(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()}setTickPositions(){var ze,Ce;let K=this.options,J=K.tickPositions,oe=K.tickPositioner,we=this.getMinorTickInterval(),ee=!this.isPanning,re=ee&&K.startOnTick,ue=ee&&K.endOnTick,xe=[],Te;if(this.tickmarkOffset=this.categories&&K.tickmarkPlacement==="between"&&this.tickInterval===1?.5:0,this.single=this.min===this.max&&I(this.min)&&!this.tickAmount&&(this.min%1==0||K.allowDecimals!==!1),J)xe=J.slice();else if(R(this.min)&&R(this.max)){if(!((ze=this.ordinal)!=null&&ze.positions)&&(this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))xe=[this.min,this.max],Y(19,!1,this.chart);else if(this.dateTime)xe=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,K.units),this.min,this.max,K.startOfWeek,(Ce=this.ordinal)==null?void 0:Ce.positions,this.closestPointRange,!0);else if(this.logarithmic)xe=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else{let Ie=this.tickInterval,Be=Ie;for(;Be<=2*Ie&&(xe=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&xe.length>this.tickAmount);)this.tickInterval=ke(this,Be*=1.1)}xe.length>this.len&&(xe=[xe[0],xe[xe.length-1]])[0]===xe[1]&&(xe.length=1),oe&&(this.tickPositions=xe,(Te=oe.apply(this,[this.min,this.max]))&&(xe=Te))}this.tickPositions=xe,this.minorTickInterval=we==="auto"&&this.tickInterval?this.tickInterval/K.minorTicksPerMajor:we,this.paddedTicks=xe.slice(0),this.trimTicks(xe,re,ue),!this.isLinked&&R(this.min)&&R(this.max)&&(this.single&&xe.length<2&&!this.categories&&!this.series.some(Ie=>Ie.is("heatmap")&&Ie.options.pointPlacement==="between")&&(this.min-=.5,this.max+=.5),J||Te||this.adjustTickAmount()),O(this,"afterSetTickPositions")}trimTicks(K,J,oe){let we=K[0],ee=K[K.length-1],re=!this.isOrdinal&&this.minPointOffset||0;if(O(this,"trimTicks"),!this.isLinked){if(J&&we!==-1/0)this.min=we;else for(;this.min-re>K[0];)K.shift();if(oe)this.max=ee;else for(;this.max+re<K[K.length-1];)K.pop();K.length===0&&I(we)&&!this.options.tickPositions&&K.push((ee+we)/2)}}alignToOthers(){let K,J=this,oe=J.chart,we=[this],ee=J.options,re=oe.options.chart,ue=this.coll==="yAxis"&&re.alignThresholds,xe=[];if(J.thresholdAlignment=void 0,(re.alignTicks!==!1&&ee.alignTicks||ue)&&ee.startOnTick!==!1&&ee.endOnTick!==!1&&!J.logarithmic){let Te=Ce=>{let{horiz:Ie,options:Be}=Ce;return[Ie?Be.left:Be.top,Be.width,Be.height,Be.pane].join(",")},ze=Te(this);oe[this.coll].forEach(function(Ce){let{series:Ie}=Ce;Ie.length&&Ie.some(Be=>Be.visible)&&Ce!==J&&Te(Ce)===ze&&(K=!0,we.push(Ce))})}if(K&&ue){we.forEach(ze=>{let Ce=ze.getThresholdAlignment(J);R(Ce)&&xe.push(Ce)});let Te=xe.length>1?xe.reduce((ze,Ce)=>ze+=Ce,0)/xe.length:void 0;we.forEach(ze=>{ze.thresholdAlignment=Te})}return K}getThresholdAlignment(K){if((!R(this.dataMin)||this!==K&&this.series.some(J=>J.isDirty||J.isDirtyData))&&this.getSeriesExtremes(),R(this.threshold)){let J=D((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1);return this.options.reversed&&(J=1-J),J}}getTickAmount(){let K=this.options,J=K.tickPixelInterval,oe=K.tickAmount;I(K.tickInterval)||oe||!(this.len<J)||this.isRadial||this.logarithmic||!K.startOnTick||!K.endOnTick||(oe=2),!oe&&this.alignToOthers()&&(oe=Math.ceil(this.len/J)+1),oe<4&&(this.finalTickAmt=oe,oe=5),this.tickAmount=oe}adjustTickAmount(){let K=this,{finalTickAmt:J,max:oe,min:we,options:ee,tickPositions:re,tickAmount:ue,thresholdAlignment:xe}=K,Te=re==null?void 0:re.length,ze=q(K.threshold,K.softThreshold?0:null),Ce,Ie,Be=K.tickInterval,He,Ae=()=>re.push(C(re[re.length-1]+Be)),ye=()=>re.unshift(C(re[0]-Be));if(R(xe)&&(He=xe<.5?Math.ceil(xe*(ue-1)):Math.floor(xe*(ue-1)),ee.reversed&&(He=ue-1-He)),K.hasData()&&R(we)&&R(oe)){let ge=()=>{K.transA*=(Te-1)/(ue-1),K.min=ee.startOnTick?re[0]:Math.min(we,re[0]),K.max=ee.endOnTick?re[re.length-1]:Math.max(oe,re[re.length-1])};if(R(He)&&R(K.threshold)){for(;re[He]!==ze||re.length!==ue||re[0]>we||re[re.length-1]<oe;){for(re.length=0,re.push(K.threshold);re.length<ue;)re[He]===void 0||re[He]>K.threshold?ye():Ae();if(Be>8*K.tickInterval)break;Be*=2}ge()}else if(Te<ue){for(;re.length<ue;)re.length%2||we===ze?Ae():ye();ge()}if(I(J)){for(Ie=Ce=re.length;Ie--;)(J===3&&Ie%2==1||J<=2&&Ie>0&&Ie<Ce-1)&&re.splice(Ie,1);K.finalTickAmt=void 0}}}setScale(){var re,ue;let{coll:K,stacking:J}=this,oe=!1,we=!1;this.series.forEach(xe=>{oe=oe||xe.isDirtyData||xe.isDirty,we=we||xe.xAxis&&xe.xAxis.isDirty||!1}),this.setAxisSize();let ee=this.len!==(this.old&&this.old.len);ee||oe||we||this.isLinked||this.forceRedraw||this.userMin!==(this.old&&this.old.userMin)||this.userMax!==(this.old&&this.old.userMax)||this.alignToOthers()?(J&&K==="yAxis"&&J.buildStacks(),this.forceRedraw=!1,this.userMinRange||(this.minRange=void 0),this.getSeriesExtremes(),this.setTickInterval(),J&&K==="xAxis"&&J.buildStacks(),this.isDirty||(this.isDirty=ee||this.min!==((re=this.old)==null?void 0:re.min)||this.max!==((ue=this.old)==null?void 0:ue.max))):J&&J.cleanStacks(),oe&&delete this.allExtremes,O(this,"afterSetScale")}setExtremes(K,J,oe=!0,we,ee){this.series.forEach(re=>{delete re.kdTree}),O(this,"setExtremes",ee=X(ee,{min:K,max:J}),re=>{this.userMin=re.min,this.userMax=re.max,this.eventArgs=re,oe&&this.chart.redraw(we)})}setAxisSize(){let K=this.chart,J=this.options,oe=J.offsets||[0,0,0,0],we=this.horiz,ee=this.width=Math.round(se(q(J.width,K.plotWidth-oe[3]+oe[1]),K.plotWidth)),re=this.height=Math.round(se(q(J.height,K.plotHeight-oe[0]+oe[2]),K.plotHeight)),ue=this.top=Math.round(se(q(J.top,K.plotTop+oe[0]),K.plotHeight,K.plotTop)),xe=this.left=Math.round(se(q(J.left,K.plotLeft+oe[3]),K.plotWidth,K.plotLeft));this.bottom=K.chartHeight-re-ue,this.right=K.chartWidth-ee-xe,this.len=Math.max(we?ee:re,0),this.pos=we?xe:ue}getExtremes(){let K=this.logarithmic;return{min:K?C(K.lin2log(this.min)):this.min,max:K?C(K.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}}getThreshold(K){let J=this.logarithmic,oe=J?J.lin2log(this.min):this.min,we=J?J.lin2log(this.max):this.max;return K===null||K===-1/0?K=oe:K===1/0?K=we:oe>K?K=oe:we<K&&(K=we),this.translate(K,0,1,0,1)}autoLabelAlign(K){let J=(q(K,0)-90*this.side+720)%360,oe={align:"center"};return O(this,"autoLabelAlign",oe,function(we){J>15&&J<165?we.align="right":J>195&&J<345&&(we.align="left")}),oe.align}tickSize(K){let J=this.options,oe=q(J[K==="tick"?"tickWidth":"minorTickWidth"],K==="tick"&&this.isXAxis&&!this.categories?1:0),we=J[K==="tick"?"tickLength":"minorTickLength"],ee;oe&&we&&(J[K+"Position"]==="inside"&&(we=-we),ee=[we,oe]);let re={tickSize:ee};return O(this,"afterTickSize",re),re.tickSize}labelMetrics(){let K=this.chart.renderer,J=this.ticks,oe=J[Object.keys(J)[0]]||{};return this.chart.renderer.fontMetrics(oe.label||oe.movedLabel||K.box)}unsquish(){let K=this.options.labels,J=K.padding||0,oe=this.horiz,we=this.tickInterval,ee=this.len/(((this.categories?1:0)+this.max-this.min)/we),re=K.rotation,ue=C(.8*this.labelMetrics().h),xe=Math.max(this.max-this.min,0),Te=function(He){let Ae=(He+2*J)/(ee||1);return(Ae=Ae>1?Math.ceil(Ae):1)*we>xe&&He!==1/0&&ee!==1/0&&xe&&(Ae=Math.ceil(xe/we)),C(Ae*we)},ze=we,Ce,Ie=Number.MAX_VALUE,Be;if(oe){if(!K.staggerLines&&(R(re)?Be=[re]:ee<K.autoRotationLimit&&(Be=K.autoRotation)),Be){let He,Ae;for(let ye of Be)(ye===re||ye&&ye>=-90&&ye<=90)&&(Ae=(He=Te(Math.abs(ue/Math.sin(E*ye))))+Math.abs(ye/360))<Ie&&(Ie=Ae,Ce=ye,ze=He)}}else ze=Te(.75*ue);return this.autoRotation=Be,this.labelRotation=q(Ce,R(re)?re:0),K.step?we:ze}getSlotWidth(K){let J=this.chart,oe=this.horiz,we=this.options.labels,ee=Math.max(this.tickPositions.length-(this.categories?0:1),1),re=J.margin[3];if(K&&R(K.slotWidth))return K.slotWidth;if(oe&&we.step<2)return we.rotation?0:(this.staggerLines||1)*this.len/ee;if(!oe){let ue=we.style.width;if(ue!==void 0)return parseInt(String(ue),10);if(re)return re-J.spacing[3]}return .33*J.chartWidth}renderUnsquish(){let K=this.chart,J=K.renderer,oe=this.tickPositions,we=this.ticks,ee=this.options.labels,re=ee.style,ue=this.horiz,xe=this.getSlotWidth(),Te=Math.max(1,Math.round(xe-(ue?2*(ee.padding||0):ee.distance||0))),ze={},Ce=this.labelMetrics(),Ie=re.textOverflow,Be,He,Ae=0,ye,ge;if(G(ee.rotation)||(ze.rotation=ee.rotation||0),oe.forEach(function(Me){let De=we[Me];De.movedLabel&&De.replaceMovedLabel(),De&&De.label&&De.label.textPxLength>Ae&&(Ae=De.label.textPxLength)}),this.maxLabelLength=Ae,this.autoRotation)Ae>Te&&Ae>Ce.h?ze.rotation=this.labelRotation:this.labelRotation=0;else if(xe&&(Be=Te,!Ie))for(He="clip",ge=oe.length;!ue&&ge--;)(ye=we[oe[ge]].label)&&(ye.styles.textOverflow==="ellipsis"?ye.css({textOverflow:"clip"}):ye.textPxLength>xe&&ye.css({width:xe+"px"}),ye.getBBox().height>this.len/oe.length-(Ce.h-Ce.f)&&(ye.specificTextOverflow="ellipsis"));ze.rotation&&(Be=Ae>.5*K.chartHeight?.33*K.chartHeight:Ae,Ie||(He="ellipsis")),this.labelAlign=ee.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(ze.align=this.labelAlign),oe.forEach(function(Me){let De=we[Me],Pe=De&&De.label,Fe=re.width,Xe={};Pe&&(Pe.attr(ze),De.shortenLabel?De.shortenLabel():Be&&!Fe&&re.whiteSpace!=="nowrap"&&(Be<Pe.textPxLength||Pe.element.tagName==="SPAN")?(Xe.width=Be+"px",Ie||(Xe.textOverflow=Pe.specificTextOverflow||He),Pe.css(Xe)):!Pe.styles.width||Xe.width||Fe||Pe.css({width:null}),delete Pe.specificTextOverflow,De.rotation=ze.rotation)},this),this.tickRotCorr=J.rotCorr(Ce.b,this.labelRotation||0,this.side!==0)}hasData(){return this.series.some(function(K){return K.hasData()})||this.options.showEmpty&&I(this.min)&&I(this.max)}addTitle(K){let J,oe=this.chart.renderer,we=this.horiz,ee=this.opposite,re=this.options.title,ue=this.chart.styledMode;this.axisTitle||((J=re.textAlign)||(J=(we?{low:"left",middle:"center",high:"right"}:{low:ee?"right":"left",middle:"center",high:ee?"left":"right"})[re.align]),this.axisTitle=oe.text(re.text||"",0,0,re.useHTML).attr({zIndex:7,rotation:re.rotation||0,align:J}).addClass("highcharts-axis-title"),ue||this.axisTitle.css(U(re.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),ue||re.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[K?"show":"hide"](K)}generateTick(K){let J=this.ticks;J[K]?J[K].addLabel():J[K]=new g(this,K)}createGroups(){let{axisParent:K,chart:J,coll:oe,options:we}=this,ee=J.renderer,re=(ue,xe,Te)=>ee.g(ue).attr({zIndex:Te}).addClass(`highcharts-${oe.toLowerCase()}${xe} `+(this.isRadial?`highcharts-radial-axis${xe} `:"")+(we.className||"")).add(K);this.axisGroup||(this.gridGroup=re("grid","-grid",we.gridZIndex),this.axisGroup=re("axis","",we.zIndex),this.labelGroup=re("axis-labels","-labels",we.labels.zIndex))}getOffset(){let K=this,{chart:J,horiz:oe,options:we,side:ee,ticks:re,tickPositions:ue,coll:xe}=K,Te=J.inverted&&!K.isZAxis?[1,0,3,2][ee]:ee,ze=K.hasData(),Ce=we.title,Ie=we.labels,Be=R(we.crossing),He=J.axisOffset,Ae=J.clipOffset,ye=[-1,1,1,-1][ee],ge,Me=0,De,Pe=0,Fe=0,Xe,tt;if(K.showAxis=ge=ze||we.showEmpty,K.staggerLines=K.horiz&&Ie.staggerLines||void 0,K.createGroups(),ze||K.isLinked?(ue.forEach(function(nt){K.generateTick(nt)}),K.renderUnsquish(),K.reserveSpaceDefault=ee===0||ee===2||{1:"left",3:"right"}[ee]===K.labelAlign,q(Ie.reserveSpace,!Be&&null,K.labelAlign==="center"||null,K.reserveSpaceDefault)&&ue.forEach(function(nt){Fe=Math.max(re[nt].getLabelSize(),Fe)}),K.staggerLines&&(Fe*=K.staggerLines),K.labelOffset=Fe*(K.opposite?-1:1)):H(re,function(nt,ht){nt.destroy(),delete re[ht]}),Ce!=null&&Ce.text&&Ce.enabled!==!1&&(K.addTitle(ge),ge&&!Be&&Ce.reserveSpace!==!1&&(K.titleOffset=Me=K.axisTitle.getBBox()[oe?"height":"width"],Pe=I(De=Ce.offset)?0:q(Ce.margin,oe?5:10))),K.renderLine(),K.offset=ye*q(we.offset,He[ee]?He[ee]+(we.margin||0):0),K.tickRotCorr=K.tickRotCorr||{x:0,y:0},tt=ee===0?-K.labelMetrics().h:ee===2?K.tickRotCorr.y:0,Xe=Math.abs(Fe)+Pe,Fe&&(Xe-=tt,Xe+=ye*(oe?q(Ie.y,K.tickRotCorr.y+ye*Ie.distance):q(Ie.x,ye*Ie.distance))),K.axisTitleMargin=q(De,Xe),K.getMaxLabelDimensions&&(K.maxLabelDimensions=K.getMaxLabelDimensions(re,ue)),xe!=="colorAxis"&&Ae){let nt=this.tickSize("tick");He[ee]=Math.max(He[ee],(K.axisTitleMargin||0)+Me+ye*K.offset,Xe,ue&&ue.length&&nt?nt[0]+ye*K.offset:0);let ht=!K.axisLine||we.offset?0:K.axisLine.strokeWidth()/2;Ae[Te]=Math.max(Ae[Te],ht)}O(this,"afterGetOffset")}getLinePath(K){let J=this.chart,oe=this.opposite,we=this.offset,ee=this.horiz,re=this.left+(oe?this.width:0)+we,ue=J.chartHeight-this.bottom-(oe?this.height:0)+we;return oe&&(K*=-1),J.renderer.crispLine([["M",ee?this.left:re,ee?ue:this.top],["L",ee?J.chartWidth-this.right:re,ee?ue:J.chartHeight-this.bottom]],K)}renderLine(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))}getTitlePosition(K){let J=this.horiz,oe=this.left,we=this.top,ee=this.len,re=this.options.title,ue=J?oe:we,xe=this.opposite,Te=this.offset,ze=re.x,Ce=re.y,Ie=this.chart.renderer.fontMetrics(K),Be=K?Math.max(K.getBBox(!1,0).height-Ie.h-1,0):0,He={low:ue+(J?0:ee),middle:ue+ee/2,high:ue+(J?ee:0)}[re.align],Ae=(J?we+this.height:oe)+(J?1:-1)*(xe?-1:1)*(this.axisTitleMargin||0)+[-Be,Be,Ie.f,-Be][this.side],ye={x:J?He+ze:Ae+(xe?this.width:0)+Te+ze,y:J?Ae+Ce-(xe?this.height:0)+Te:He+Ce};return O(this,"afterGetTitlePosition",{titlePosition:ye}),ye}renderMinorTick(K,J){let oe=this.minorTicks;oe[K]||(oe[K]=new g(this,K,"minor")),J&&oe[K].isNew&&oe[K].render(null,!0),oe[K].render(null,!1,1)}renderTick(K,J,oe){let we=this.isLinked,ee=this.ticks;(!we||K>=this.min&&K<=this.max||this.grid&&this.grid.isColumn)&&(ee[K]||(ee[K]=new g(this,K)),oe&&ee[K].isNew&&ee[K].render(J,!0,-1),ee[K].render(J))}render(){let K,J,oe=this,we=oe.chart,ee=oe.logarithmic,re=we.renderer,ue=oe.options,xe=oe.isLinked,Te=oe.tickPositions,ze=oe.axisTitle,Ce=oe.ticks,Ie=oe.minorTicks,Be=oe.alternateBands,He=ue.stackLabels,Ae=ue.alternateGridColor,ye=ue.crossing,ge=oe.tickmarkOffset,Me=oe.axisLine,De=oe.showAxis,Pe=y(re.globalAnimation);if(oe.labelEdge.length=0,oe.overlap=!1,[Ce,Ie,Be].forEach(function(Fe){H(Fe,function(Xe){Xe.isActive=!1})}),R(ye)){let Fe=this.isXAxis?we.yAxis[0]:we.xAxis[0],Xe=[1,-1,-1,1][this.side];if(Fe){let tt=Fe.toPixels(ye,!0);oe.horiz&&(tt=Fe.len-tt),oe.offset=Xe*tt}}if(oe.hasData()||xe){let Fe=oe.chart.hasRendered&&oe.old&&R(oe.old.min);oe.minorTickInterval&&!oe.categories&&oe.getMinorTickPositions().forEach(function(Xe){oe.renderMinorTick(Xe,Fe)}),Te.length&&(Te.forEach(function(Xe,tt){oe.renderTick(Xe,tt,Fe)}),ge&&(oe.min===0||oe.single)&&(Ce[-1]||(Ce[-1]=new g(oe,-1,null,!0)),Ce[-1].render(-1))),Ae&&Te.forEach(function(Xe,tt){J=Te[tt+1]!==void 0?Te[tt+1]+ge:oe.max-ge,tt%2==0&&Xe<oe.max&&J<=oe.max+(we.polar?-ge:ge)&&(Be[Xe]||(Be[Xe]=new f.PlotLineOrBand(oe,{})),K=Xe+ge,Be[Xe].options={from:ee?ee.lin2log(K):K,to:ee?ee.lin2log(J):J,color:Ae,className:"highcharts-alternate-grid"},Be[Xe].render(),Be[Xe].isActive=!0)}),oe._addedPlotLB||(oe._addedPlotLB=!0,(ue.plotLines||[]).concat(ue.plotBands||[]).forEach(function(Xe){oe.addPlotBandOrLine(Xe)}))}[Ce,Ie,Be].forEach(function(Fe){let Xe=[],tt=Pe.duration;H(Fe,function(nt,ht){nt.isActive||(nt.render(ht,!1,0),nt.isActive=!1,Xe.push(ht))}),le(function(){let nt=Xe.length;for(;nt--;)Fe[Xe[nt]]&&!Fe[Xe[nt]].isActive&&(Fe[Xe[nt]].destroy(),delete Fe[Xe[nt]])},Fe!==Be&&we.hasRendered&&tt?tt:0)}),Me&&(Me[Me.isPlaced?"animate":"attr"]({d:this.getLinePath(Me.strokeWidth())}),Me.isPlaced=!0,Me[De?"show":"hide"](De)),ze&&De&&(ze[ze.isNew?"attr":"animate"](oe.getTitlePosition(ze)),ze.isNew=!1),He&&He.enabled&&oe.stacking&&oe.stacking.renderStackTotals(),oe.old={len:oe.len,max:oe.max,min:oe.min,transA:oe.transA,userMax:oe.userMax,userMin:oe.userMin},oe.isDirty=!1,O(this,"afterRender")}redraw(){this.visible&&(this.render(),this.plotLinesAndBands.forEach(function(K){K.render()})),this.series.forEach(function(K){K.isDirty=!0})}getKeepProps(){return this.keepProps||be.keepProps}destroy(K){let J=this,oe=J.plotLinesAndBands,we=this.eventOptions;if(O(this,"destroy",{keepEvents:K}),K||pe(J),[J.ticks,J.minorTicks,J.alternateBands].forEach(function(ee){N(ee)}),oe){let ee=oe.length;for(;ee--;)oe[ee].destroy()}for(let ee in["axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross","scrollbar"].forEach(function(re){J[re]&&(J[re]=J[re].destroy())}),J.plotLinesAndBandsGroups)J.plotLinesAndBandsGroups[ee]=J.plotLinesAndBandsGroups[ee].destroy();H(J,function(ee,re){J.getKeepProps().indexOf(re)===-1&&delete J[re]}),this.eventOptions=we}drawCrosshair(K,J){let oe=this.crosshair,we=q(oe&&oe.snap,!0),ee=this.chart,re,ue,xe,Te=this.cross,ze;if(O(this,"drawCrosshair",{e:K,point:J}),K||(K=this.cross&&this.cross.e),oe&&(I(J)||!we)!==!1){if(we?I(J)&&(ue=q(this.coll!=="colorAxis"?J.crosshairPos:null,this.isXAxis?J.plotX:this.len-J.plotY)):ue=K&&(this.horiz?K.chartX-this.pos:this.len-K.chartY+this.pos),I(ue)&&(ze={value:J&&(this.isXAxis?J.x:q(J.stackY,J.y)),translatedValue:ue},ee.polar&&X(ze,{isCrosshair:!0,chartX:K&&K.chartX,chartY:K&&K.chartY,point:J}),re=this.getPlotLinePath(ze)||null),!I(re)){this.hideCrosshair();return}xe=this.categories&&!this.isRadial,Te||(this.cross=Te=ee.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(xe?"category ":"thin ")+(oe.className||"")).attr({zIndex:q(oe.zIndex,2)}).add(),!ee.styledMode&&(Te.attr({stroke:oe.color||(xe?u.parse("#ccd3ff").setOpacity(.25).get():"#cccccc"),"stroke-width":q(oe.width,1)}).css({"pointer-events":"none"}),oe.dashStyle&&Te.attr({dashstyle:oe.dashStyle}))),Te.show().attr({d:re}),xe&&!oe.width&&Te.attr({"stroke-width":this.transA}),this.cross.e=K}else this.hideCrosshair();O(this,"afterDrawCrosshair",{e:K,point:J})}hideCrosshair(){this.cross&&this.cross.hide(),O(this,"afterHideCrosshair")}update(K,J){let oe=this.chart;K=U(this.userOptions,K),this.destroy(!0),this.init(oe,K),oe.isDirtyBox=!0,q(J,!0)&&oe.redraw()}remove(K){let J=this.chart,oe=this.coll,we=this.series,ee=we.length;for(;ee--;)we[ee]&&we[ee].remove(!1);W(J.axes,this),W(J[oe]||[],this),J.orderItems(oe),this.destroy(),J.isDirtyBox=!0,q(K,!0)&&J.redraw()}setTitle(K,J){this.update({title:K},J)}setCategories(K,J){this.update({categories:K},J)}}return be.keepProps=["coll","extKey","hcEvents","len","names","series","userMax","userMin"],be}),n(t,"Core/Axis/DateTimeAxis.js",[t["Core/Utilities.js"]],function(s){var l;let{addEvent:u,getMagnitude:r,normalizeTickInterval:p,timeUnits:f}=s;return function(g){function b(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function y(){if(this.type!=="datetime"){this.dateTime=void 0;return}this.dateTime||(this.dateTime=new w(this))}g.compose=function(v){return v.keepProps.includes("dateTime")||(v.keepProps.push("dateTime"),v.prototype.getTimeTicks=b,u(v,"afterSetType",y)),v};class w{constructor(T){this.axis=T}normalizeTimeTickInterval(T,S){let E=S||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],x=E[E.length-1],A=f[x[0]],D=x[1],C;for(C=0;C<E.length&&(A=f[(x=E[C])[0]],D=x[1],!E[C+1]||!(T<=(A*D[D.length-1]+f[E[C+1][0]])/2));C++);A===f.year&&T<5*A&&(D=[1,2,5]);let I=p(T/A,D,x[0]==="year"?Math.max(r(T/A),1):1);return{unitRange:A,count:I,unitName:x[0]}}getXDateFormat(T,S){let{axis:E}=this,x=E.chart.time;return E.closestPointRange?x.getDateFormat(E.closestPointRange,T,E.options.startOfWeek,S)||x.resolveDTLFormat(S.year).main:x.resolveDTLFormat(S.day).main}}g.Additions=w}(l||(l={})),l}),n(t,"Core/Axis/LogarithmicAxis.js",[t["Core/Utilities.js"]],function(s){var l;let{addEvent:u,normalizeTickInterval:r,pick:p}=s;return function(f){function g(){this.type!=="logarithmic"?this.logarithmic=void 0:this.logarithmic??(this.logarithmic=new y(this))}function b(){let w=this.logarithmic;w&&(this.lin2val=function(v){return w.lin2log(v)},this.val2lin=function(v){return w.log2lin(v)})}f.compose=function(w){return w.keepProps.includes("logarithmic")||(w.keepProps.push("logarithmic"),u(w,"afterSetType",g),u(w,"afterInit",b)),w};class y{constructor(v){this.axis=v}getLogTickPositions(v,T,S,E){let x=this.axis,A=x.len,D=x.options,C=[];if(E||(this.minorAutoInterval=void 0),v>=.5)v=Math.round(v),C=x.getLinearTickPositions(v,T,S);else if(v>=.08){let I,N,W,Y,X,O,V,$=Math.floor(T);for(I=v>.3?[1,2,4]:v>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],N=$;N<S+1&&!V;N++)for(W=0,Y=I.length;W<Y&&!V;W++)(X=this.log2lin(this.lin2log(N)*I[W]))>T&&(!E||O<=S)&&O!==void 0&&C.push(O),O>S&&(V=!0),O=X}else{let I=this.lin2log(T),N=this.lin2log(S),W=E?x.getMinorTickInterval():D.tickInterval,Y=D.tickPixelInterval/(E?5:1),X=E?A/x.tickPositions.length:A;v=r(v=p(W==="auto"?null:W,this.minorAutoInterval,(N-I)*Y/(X||1))),C=x.getLinearTickPositions(v,I,N).map(this.log2lin),E||(this.minorAutoInterval=v/5)}return E||(x.tickInterval=v),C}lin2log(v){return Math.pow(10,v)}log2lin(v){return Math.log(v)/Math.LN10}}f.Additions=y}(l||(l={})),l}),n(t,"Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js",[t["Core/Utilities.js"]],function(s){var l;let{erase:u,extend:r,isNumber:p}=s;return function(f){let g;function b(x){return this.addPlotBandOrLine(x,"plotBands")}function y(x,A){let D=this.userOptions,C=new g(this,x);if(this.visible&&(C=C.render()),C){if(this._addedPlotLB||(this._addedPlotLB=!0,(D.plotLines||[]).concat(D.plotBands||[]).forEach(I=>{this.addPlotBandOrLine(I)})),A){let I=D[A]||[];I.push(x),D[A]=I}this.plotLinesAndBands.push(C)}return C}function w(x){return this.addPlotBandOrLine(x,"plotLines")}function v(x,A,D){D=D||this.options;let C=this.getPlotLinePath({value:A,force:!0,acrossPanes:D.acrossPanes}),I=[],N=this.horiz,W=!p(this.min)||!p(this.max)||x<this.min&&A<this.min||x>this.max&&A>this.max,Y=this.getPlotLinePath({value:x,force:!0,acrossPanes:D.acrossPanes}),X,O=1,V;if(Y&&C)for(W&&(V=Y.toString()===C.toString(),O=0),X=0;X<Y.length;X+=2){let $=Y[X],L=Y[X+1],R=C[X],G=C[X+1];($[0]==="M"||$[0]==="L")&&(L[0]==="M"||L[0]==="L")&&(R[0]==="M"||R[0]==="L")&&(G[0]==="M"||G[0]==="L")&&(N&&R[1]===$[1]?(R[1]+=O,G[1]+=O):N||R[2]!==$[2]||(R[2]+=O,G[2]+=O),I.push(["M",$[1],$[2]],["L",L[1],L[2]],["L",G[1],G[2]],["L",R[1],R[2]],["Z"])),I.isFlat=V}return I}function T(x){this.removePlotBandOrLine(x)}function S(x){let A=this.plotLinesAndBands,D=this.options,C=this.userOptions;if(A){let I=A.length;for(;I--;)A[I].id===x&&A[I].destroy();[D.plotLines||[],C.plotLines||[],D.plotBands||[],C.plotBands||[]].forEach(function(N){for(I=N.length;I--;)(N[I]||{}).id===x&&u(N,N[I])})}}function E(x){this.removePlotBandOrLine(x)}f.compose=function(x,A){let D=A.prototype;return D.addPlotBand||(g=x,r(D,{addPlotBand:b,addPlotLine:w,addPlotBandOrLine:y,getPlotBandPath:v,removePlotBand:T,removePlotLine:E,removePlotBandOrLine:S})),A}}(l||(l={})),l}),n(t,"Core/Axis/PlotLineOrBand/PlotLineOrBand.js",[t["Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js"],t["Core/Utilities.js"]],function(s,l){let{addEvent:u,arrayMax:r,arrayMin:p,defined:f,destroyObjectProperties:g,erase:b,fireEvent:y,merge:w,objectEach:v,pick:T}=l;class S{static compose(x,A){return u(x,"afterInit",function(){this.labelCollectors.push(()=>{var C;let D=[];for(let I of this.axes)for(let{label:N,options:W}of I.plotLinesAndBands)N&&!((C=W==null?void 0:W.label)!=null&&C.allowOverlap)&&D.push(N);return D})}),s.compose(S,A)}constructor(x,A){this.axis=x,this.options=A,this.id=A.id}render(){y(this,"render");let{axis:x,options:A}=this,{horiz:D,logarithmic:C}=x,{color:I,events:N,zIndex:W=0}=A,Y={},X=x.chart.renderer,O=A.to,V=A.from,$=A.value,L=A.borderWidth,R=A.label,{label:G,svgElem:U}=this,B=[],H,q=f(V)&&f(O),se=f($),pe=!U,ne={class:"highcharts-plot-"+(q?"band ":"line ")+(A.className||"")},le=q?"bands":"lines";if(!x.chart.styledMode&&(se?(ne.stroke=I||"#999999",ne["stroke-width"]=T(A.width,1),A.dashStyle&&(ne.dashstyle=A.dashStyle)):q&&(ne.fill=I||"#e6e9ff",L&&(ne.stroke=A.borderColor,ne["stroke-width"]=L))),Y.zIndex=W,le+="-"+W,(H=x.plotLinesAndBandsGroups[le])||(x.plotLinesAndBandsGroups[le]=H=X.g("plot-"+le).attr(Y).add()),U||(this.svgElem=U=X.path().attr(ne).add(H)),f($))B=x.getPlotLinePath({value:(C==null?void 0:C.log2lin($))??$,lineWidth:U.strokeWidth(),acrossPanes:A.acrossPanes});else{if(!(f(V)&&f(O)))return;B=x.getPlotBandPath((C==null?void 0:C.log2lin(V))??V,(C==null?void 0:C.log2lin(O))??O,A)}return!this.eventsAdded&&N&&(v(N,(ke,be)=>{U==null||U.on(be,Ee=>{N[be].apply(this,[Ee])})}),this.eventsAdded=!0),(pe||!U.d)&&(B!=null&&B.length)?U.attr({d:B}):U&&(B?(U.show(),U.animate({d:B})):U.d&&(U.hide(),G&&(this.label=G=G.destroy()))),R&&(f(R.text)||f(R.formatter))&&(B!=null&&B.length)&&x.width>0&&x.height>0&&!B.isFlat?(R=w({align:D&&q?"center":void 0,x:D?!q&&4:10,verticalAlign:!D&&q?"middle":void 0,y:D?q?16:10:q?6:-4,rotation:D&&!q?90:0,...q?{inside:!0}:{}},R),this.renderLabel(R,B,q,W)):G&&G.hide(),this}renderLabel(x,A,D,C){var R;let I=this.axis,N=I.chart.renderer,W=x.inside,Y=this.label;Y||(this.label=Y=N.text(this.getLabelText(x),0,0,x.useHTML).attr({align:x.textAlign||x.align,rotation:x.rotation,class:"highcharts-plot-"+(D?"band":"line")+"-label "+(x.className||""),zIndex:C}),I.chart.styledMode||Y.css(w({fontSize:"0.8em",textOverflow:D&&!W?"":"ellipsis"},x.style)),Y.add());let X=A.xBounds||[A[0][1],A[1][1],D?A[2][1]:A[0][1]],O=A.yBounds||[A[0][2],A[1][2],D?A[2][2]:A[0][2]],V=p(X),$=p(O),L=r(X)-V;Y.align(x,!1,{x:V,y:$,width:L,height:r(O)-$}),(!Y.alignValue||Y.alignValue==="left"||f(W))&&Y.css({width:(((R=x.style)==null?void 0:R.width)||(D&&W?L:Y.rotation===90?I.height-(Y.alignAttr.y-I.top):(x.clip?I.width:I.chart.chartWidth)-(Y.alignAttr.x-I.left)))+"px"}),Y.show(!0)}getLabelText(x){return f(x.formatter)?x.formatter.call(this):x.text}destroy(){b(this.axis.plotLinesAndBands,this),delete this.axis,g(this)}}return S}),n(t,"Core/Tooltip.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f){var g;let{animObject:b}=s,{format:y}=l,{composed:w,doc:v,isSafari:T}=u,{distribute:S}=r,{addEvent:E,clamp:x,css:A,discardElement:D,extend:C,fireEvent:I,isArray:N,isNumber:W,isString:Y,merge:X,pick:O,pushUnique:V,splat:$,syncTimeout:L}=f;class R{constructor(U,B,H){this.allowShared=!0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.options={},this.outside=!1,this.chart=U,this.init(U,B),this.pointer=H}bodyFormatter(U){return U.map(function(B){let H=B.series.tooltipOptions;return(H[(B.point.formatPrefix||"point")+"Formatter"]||B.point.tooltipFormatter).call(B.point,H[(B.point.formatPrefix||"point")+"Format"]||"")})}cleanSplit(U){this.chart.series.forEach(function(B){let H=B&&B.tt;H&&(!H.isActive||U?B.tt=H.destroy():H.isActive=!1)})}defaultFormatter(U){let B,H=this.points||$(this);return(B=(B=[U.tooltipFooterHeaderFormatter(H[0])]).concat(U.bodyFormatter(H))).push(U.tooltipFooterHeaderFormatter(H[0],!0)),B}destroy(){this.label&&(this.label=this.label.destroy()),this.split&&(this.cleanSplit(!0),this.tt&&(this.tt=this.tt.destroy())),this.renderer&&(this.renderer=this.renderer.destroy(),D(this.container)),f.clearTimeout(this.hideTimer)}getAnchor(U,B){let H,{chart:q,pointer:se}=this,pe=q.inverted,ne=q.plotTop,le=q.plotLeft;if((U=$(U))[0].series&&U[0].series.yAxis&&!U[0].series.yAxis.options.reversedStacks&&(U=U.slice().reverse()),this.followPointer&&B)B.chartX===void 0&&(B=se.normalize(B)),H=[B.chartX-le,B.chartY-ne];else if(U[0].tooltipPos)H=U[0].tooltipPos;else{let ke=0,be=0;U.forEach(function(Ee){let K=Ee.pos(!0);K&&(ke+=K[0],be+=K[1])}),ke/=U.length,be/=U.length,this.shared&&U.length>1&&B&&(pe?ke=B.chartX:be=B.chartY),H=[ke-le,be-ne]}return H.map(Math.round)}getClassName(U,B,H){let q=this.options,se=U.series,pe=se.options;return[q.className,"highcharts-label",H&&"highcharts-tooltip-header",B?"highcharts-tooltip-box":"highcharts-tooltip",!H&&"highcharts-color-"+O(U.colorIndex,se.colorIndex),pe&&pe.className].filter(Y).join(" ")}getLabel({anchorX:U,anchorY:B}={anchorX:0,anchorY:0}){let H=this,q=this.chart.styledMode,se=this.options,pe=this.split&&this.allowShared,ne=this.container,le=this.chart.renderer;if(this.label){let ke=!this.label.hasClass("highcharts-label");(!pe&&ke||pe&&!ke)&&this.destroy()}if(!this.label){if(this.outside){let ke=this.chart.options.chart.style,be=p.getRendererType();this.container=ne=u.doc.createElement("div"),ne.className="highcharts-tooltip-container",A(ne,{position:"absolute",top:"1px",pointerEvents:"none",zIndex:Math.max(this.options.style.zIndex||0,(ke&&ke.zIndex||0)+3)}),this.renderer=le=new be(ne,0,0,ke,void 0,void 0,le.styledMode)}if(pe?this.label=le.g("tooltip"):(this.label=le.label("",U,B,se.shape,void 0,void 0,se.useHTML,void 0,"tooltip").attr({padding:se.padding,r:se.borderRadius}),q||this.label.attr({fill:se.backgroundColor,"stroke-width":se.borderWidth||0}).css(se.style).css({pointerEvents:se.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none")})),H.outside){let ke=this.label;[ke.xSetter,ke.ySetter].forEach((be,Ee)=>{ke[Ee?"ySetter":"xSetter"]=K=>{be.call(ke,H.distance),ke[Ee?"y":"x"]=K,ne&&(ne.style[Ee?"top":"left"]=`${K}px`)}})}this.label.attr({zIndex:8}).shadow(se.shadow).add()}return ne&&!ne.parentElement&&u.doc.body.appendChild(ne),this.label}getPlayingField(){let{body:U,documentElement:B}=v,{chart:H,distance:q,outside:se}=this;return{width:se?Math.max(U.scrollWidth,B.scrollWidth,U.offsetWidth,B.offsetWidth,B.clientWidth)-2*q:H.chartWidth,height:se?Math.max(U.scrollHeight,B.scrollHeight,U.offsetHeight,B.offsetHeight,B.clientHeight):H.chartHeight}}getPosition(U,B,H){var Pe,Fe;let{distance:q,chart:se,outside:pe,pointer:ne}=this,{inverted:le,plotLeft:ke,plotTop:be,polar:Ee}=se,{plotX:K=0,plotY:J=0}=H,oe={},we=le&&H.h||0,{height:ee,width:re}=this.getPlayingField(),ue=ne.getChartPosition(),xe=Xe=>Xe*ue.scaleX,Te=Xe=>Xe*ue.scaleY,ze=Xe=>{let tt=Xe==="x";return[Xe,tt?re:ee,tt?U:B].concat(pe?[tt?xe(U):Te(B),tt?ue.left-q+xe(K+ke):ue.top-q+Te(J+be),0,tt?re:ee]:[tt?U:B,tt?K+ke:J+be,tt?ke:be,tt?ke+se.plotWidth:be+se.plotHeight])},Ce=ze("y"),Ie=ze("x"),Be,He=!!H.negative;!Ee&&((Fe=(Pe=se.hoverSeries)==null?void 0:Pe.yAxis)!=null&&Fe.reversed)&&(He=!He);let Ae=!this.followPointer&&O(H.ttBelow,!Ee&&!le===He),ye=function(Xe,tt,nt,ht,gt,Tt,Lt){let ft=pe?Xe==="y"?Te(q):xe(q):q,Et=(nt-ht)/2,Ct=ht<gt-q,si=gt+q+ht<tt,di=gt-ft-nt+Et,qt=gt+ft-Et;if(Ae&&si)oe[Xe]=qt;else if(!Ae&&Ct)oe[Xe]=di;else if(Ct)oe[Xe]=Math.min(Lt-ht,di-we<0?di:di-we);else{if(!si)return!1;oe[Xe]=Math.max(Tt,qt+we+nt>tt?qt:qt+we)}},ge=function(Xe,tt,nt,ht,gt){if(gt<q||gt>tt-q)return!1;gt<nt/2?oe[Xe]=1:gt>tt-ht/2?oe[Xe]=tt-ht-2:oe[Xe]=gt-nt/2},Me=function(Xe){[Ce,Ie]=[Ie,Ce],Be=Xe},De=()=>{ye.apply(0,Ce)!==!1?ge.apply(0,Ie)!==!1||Be||(Me(!0),De()):Be?oe.x=oe.y=0:(Me(!0),De())};return(le&&!Ee||this.len>1)&&Me(),De(),oe}hide(U){let B=this;f.clearTimeout(this.hideTimer),U=O(U,this.options.hideDelay),this.isHidden||(this.hideTimer=L(function(){let H=B.getLabel();B.getLabel().animate({opacity:0},{duration:U&&150,complete:()=>{H.hide(),B.container&&B.container.remove()}}),B.isHidden=!0},U))}init(U,B){this.chart=U,this.options=B,this.crosshairs=[],this.isHidden=!0,this.split=B.split&&!U.inverted&&!U.polar,this.shared=B.shared||this.split,this.outside=O(B.outside,!!(U.scrollablePixelsX||U.scrollablePixelsY))}shouldStickOnContact(U){return!!(!this.followPointer&&this.options.stickOnContact&&(!U||this.pointer.inClass(U.target,"highcharts-tooltip")))}move(U,B,H,q){let se=this,pe=b(!se.isHidden&&se.options.animation),ne=se.followPointer||(se.len||0)>1,le={x:U,y:B};ne||(le.anchorX=H,le.anchorY=q),pe.step=()=>se.drawTracker(),se.getLabel().animate(le,pe)}refresh(U,B){let{chart:H,options:q,pointer:se,shared:pe}=this,ne=$(U),le=ne[0],ke=[],be=q.format,Ee=q.formatter||this.defaultFormatter,K=H.styledMode,J={},oe=this.allowShared;if(!q.enabled||!le.series)return;f.clearTimeout(this.hideTimer),this.allowShared=!(!N(U)&&U.series&&U.series.noSharedTooltip),oe=oe&&!this.allowShared,this.followPointer=!this.split&&le.series.tooltipOptions.followPointer;let we=this.getAnchor(U,B),ee=we[0],re=we[1];pe&&this.allowShared?(se.applyInactiveState(ne),ne.forEach(function(Te){Te.setState("hover"),ke.push(Te.getLabelConfig())}),(J=le.getLabelConfig()).points=ke):J=le.getLabelConfig(),this.len=ke.length;let ue=Y(be)?y(be,J,H):Ee.call(J,this),xe=le.series;if(this.distance=O(xe.tooltipOptions.distance,16),ue===!1)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(ue,ne);else{let Te=ee,ze=re;if(B&&se.isDirectTouch&&(Te=B.chartX-H.plotLeft,ze=B.chartY-H.plotTop),H.polar||xe.options.clip===!1||ne.some(Ce=>se.isDirectTouch||Ce.series.shouldShowTooltip(Te,ze))){let Ce=this.getLabel(oe&&this.tt||{});(!q.style.width||K)&&Ce.css({width:(this.outside?this.getPlayingField():H.spacingBox).width+"px"}),Ce.attr({class:this.getClassName(le),text:ue&&ue.join?ue.join(""):ue}),this.outside&&Ce.attr({x:x(Ce.x||0,0,this.getPlayingField().width-(Ce.width||0))}),K||Ce.attr({stroke:q.borderColor||le.color||xe.color||"#666666"}),this.updatePosition({plotX:ee,plotY:re,negative:le.negative,ttBelow:le.ttBelow,h:we[2]||0})}else{this.hide();return}}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}I(this,"refresh")}renderSplit(U,B){var tt;let H=this,{chart:q,chart:{chartWidth:se,chartHeight:pe,plotHeight:ne,plotLeft:le,plotTop:ke,scrollablePixelsY:be=0,scrollablePixelsX:Ee,styledMode:K},distance:J,options:oe,options:{positioner:we},pointer:ee}=H,{scrollLeft:re=0,scrollTop:ue=0}=((tt=q.scrollablePlotArea)==null?void 0:tt.scrollingContainer)||{},xe=H.outside&&typeof Ee!="number"?v.documentElement.getBoundingClientRect():{left:re,right:re+se,top:ue,bottom:ue+pe},Te=H.getLabel(),ze=this.renderer||q.renderer,Ce=!!(q.xAxis[0]&&q.xAxis[0].opposite),{left:Ie,top:Be}=ee.getChartPosition(),He=ke+ue,Ae=0,ye=ne-be;function ge(nt,ht,gt,Tt,Lt=!0){let ft,Et;return gt?(ft=Ce?0:ye,Et=x(nt-Tt/2,xe.left,xe.right-Tt-(H.outside?Ie:0))):(ft=ht-He,Et=x(Et=Lt?nt-Tt-J:nt+J,Lt?Et:xe.left,xe.right)),{x:Et,y:ft}}Y(U)&&(U=[!1,U]);let Me=U.slice(0,B.length+1).reduce(function(nt,ht,gt){if(ht!==!1&&ht!==""){let Tt=B[gt-1]||{isHeader:!0,plotX:B[0].plotX,plotY:ne,series:{}},Lt=Tt.isHeader,ft=Lt?H:Tt.series,Et=ft.tt=function(cn,Xi,xn){let Fn=cn,{isHeader:sn,series:dt}=Xi;if(!Fn){let bt={padding:oe.padding,r:oe.borderRadius};K||(bt.fill=oe.backgroundColor,bt["stroke-width"]=oe.borderWidth??1),Fn=ze.label("",0,0,oe[sn?"headerShape":"shape"],void 0,void 0,oe.useHTML).addClass(H.getClassName(Xi,!0,sn)).attr(bt).add(Te)}return Fn.isActive=!0,Fn.attr({text:xn}),K||Fn.css(oe.style).attr({stroke:oe.borderColor||Xi.color||dt.color||"#333333"}),Fn}(ft.tt,Tt,ht.toString()),Ct=Et.getBBox(),si=Ct.width+Et.strokeWidth();Lt&&(Ae=Ct.height,ye+=Ae,Ce&&(He-=Ae));let{anchorX:di,anchorY:qt}=function(cn){let Xi,xn,{isHeader:Fn,plotX:sn=0,plotY:dt=0,series:bt}=cn;if(Fn)Xi=Math.max(le+sn,le),xn=ke+ne/2;else{let{xAxis:It,yAxis:Ft}=bt;Xi=It.pos+x(sn,-J,It.len+J),bt.shouldShowTooltip(0,Ft.pos-ke+dt,{ignoreX:!0})&&(xn=Ft.pos+dt)}return{anchorX:Xi=x(Xi,xe.left-J,xe.right+J),anchorY:xn}}(Tt);if(typeof qt=="number"){let cn=Ct.height+1,Xi=we?we.call(H,si,cn,Tt):ge(di,qt,Lt,si);nt.push({align:we?0:void 0,anchorX:di,anchorY:qt,boxWidth:si,point:Tt,rank:O(Xi.rank,Lt?1:0),size:cn,target:Xi.y,tt:Et,x:Xi.x})}else Et.isActive=!1}return nt},[]);!we&&Me.some(nt=>{let{outside:ht}=H,gt=(ht?Ie:0)+nt.anchorX;return gt<xe.left&&gt+nt.boxWidth<xe.right||gt<Ie-xe.left+nt.boxWidth&&xe.right-gt>gt})&&(Me=Me.map(nt=>{let{x:ht,y:gt}=ge(nt.anchorX,nt.anchorY,nt.point.isHeader,nt.boxWidth,!1);return C(nt,{target:gt,x:ht})})),H.cleanSplit(),S(Me,ye);let De={left:Ie,right:Ie};Me.forEach(function(nt){let{x:ht,boxWidth:gt,isHeader:Tt}=nt;!Tt&&(H.outside&&Ie+ht<De.left&&(De.left=Ie+ht),!Tt&&H.outside&&De.left+gt>De.right&&(De.right=Ie+ht))}),Me.forEach(function(nt){let{x:ht,anchorX:gt,anchorY:Tt,pos:Lt,point:{isHeader:ft}}=nt,Et={visibility:Lt===void 0?"hidden":"inherit",x:ht,y:(Lt||0)+He,anchorX:gt,anchorY:Tt};if(H.outside&&ht<gt){let Ct=Ie-De.left;Ct>0&&(ft||(Et.x=ht+Ct,Et.anchorX=gt+Ct),ft&&(Et.x=(De.right-De.left)/2,Et.anchorX=gt+Ct))}nt.tt.attr(Et)});let{container:Pe,outside:Fe,renderer:Xe}=H;if(Fe&&Pe&&Xe){let{width:nt,height:ht,x:gt,y:Tt}=Te.getBBox();Xe.setSize(nt+gt,ht+Tt,!1),Pe.style.left=De.left+"px",Pe.style.top=Be+"px"}T&&Te.attr({opacity:Te.opacity===1?.999:1})}drawTracker(){if(!this.shouldStickOnContact()){this.tracker&&(this.tracker=this.tracker.destroy());return}let U=this.chart,B=this.label,H=this.shared?U.hoverPoints:U.hoverPoint;if(!B||!H)return;let q={x:0,y:0,width:0,height:0},se=this.getAnchor(H),pe=B.getBBox();se[0]+=U.plotLeft-(B.translateX||0),se[1]+=U.plotTop-(B.translateY||0),q.x=Math.min(0,se[0]),q.y=Math.min(0,se[1]),q.width=se[0]<0?Math.max(Math.abs(se[0]),pe.width-se[0]):Math.max(Math.abs(se[0]),pe.width),q.height=se[1]<0?Math.max(Math.abs(se[1]),pe.height-Math.abs(se[1])):Math.max(Math.abs(se[1]),pe.height),this.tracker?this.tracker.attr(q):(this.tracker=B.renderer.rect(q).addClass("highcharts-tracker").add(B),U.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}styledModeFormat(U){return U.replace('style="font-size: 0.8em"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')}tooltipFooterHeaderFormatter(U,B){let H=U.series,q=H.tooltipOptions,se=H.xAxis,pe=se&&se.dateTime,ne={isFooter:B,labelConfig:U},le=q.xDateFormat,ke=q[B?"footerFormat":"headerFormat"];return I(this,"headerFormatter",ne,function(be){pe&&!le&&W(U.key)&&(le=pe.getXDateFormat(U.key,q.dateTimeLabelFormats)),pe&&le&&(U.point&&U.point.tooltipDateKeys||["key"]).forEach(function(Ee){ke=ke.replace("{point."+Ee+"}","{point."+Ee+":"+le+"}")}),H.chart.styledMode&&(ke=this.styledModeFormat(ke)),be.text=y(ke,{point:U,series:H},this.chart)}),ne.text}update(U){this.destroy(),this.init(this.chart,X(!0,this.options,U))}updatePosition(U){let{chart:B,container:H,distance:q,options:se,pointer:pe,renderer:ne}=this,{height:le=0,width:ke=0}=this.getLabel(),{left:be,top:Ee,scaleX:K,scaleY:J}=pe.getChartPosition(),oe=(se.positioner||this.getPosition).call(this,ke,le,U),we=(U.plotX||0)+B.plotLeft,ee=(U.plotY||0)+B.plotTop,re;ne&&H&&(se.positioner&&(oe.x+=be-q,oe.y+=Ee-q),re=(se.borderWidth||0)+2*q+2,ne.setSize(ke+re,le+re,!1),(K!==1||J!==1)&&(A(H,{transform:`scale(${K}, ${J})`}),we*=K,ee*=J),we+=be-oe.x,ee+=Ee-oe.y),this.move(Math.round(oe.x),Math.round(oe.y||0),we,ee)}}return(g=R).compose=function(G){V(w,"Core.Tooltip")&&E(G,"afterInit",function(){let U=this.chart;U.options.tooltip&&(U.tooltip=new g(U,U.options.tooltip,this))})},R}),n(t,"Core/Series/Point.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Defaults.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{animObject:f}=l,{defaultOptions:g}=u,{format:b}=r,{addEvent:y,crisp:w,erase:v,extend:T,fireEvent:S,getNestedProperty:E,isArray:x,isFunction:A,isNumber:D,isObject:C,merge:I,pick:N,syncTimeout:W,removeEvent:Y,uniqueKey:X}=p;class O{animateBeforeDestroy(){let $=this,L={x:$.startXPos,opacity:0},R=$.getGraphicalProps();R.singular.forEach(function(G){$[G]=$[G].animate(G==="dataLabel"?{x:$[G].startXPos,y:$[G].startYPos,opacity:0}:L)}),R.plural.forEach(function(G){$[G].forEach(function(U){U.element&&U.animate(T({x:$.startXPos},U.startYPos?{x:U.startXPos,y:U.startYPos}:{}))})})}applyOptions($,L){let R=this.series,G=R.options.pointValKey||R.pointValKey;return T(this,$=O.prototype.optionsToObject.call(this,$)),this.options=this.options?T(this.options,$):$,$.group&&delete this.group,$.dataLabels&&delete this.dataLabels,G&&(this.y=O.prototype.getNestedProperty.call(this,G)),this.selected&&(this.state="select"),"name"in this&&L===void 0&&R.xAxis&&R.xAxis.hasNames&&(this.x=R.xAxis.nameToX(this)),this.x===void 0&&R?this.x=L??R.autoIncrement():D($.x)&&R.options.relativeXValue&&(this.x=R.autoIncrement($.x)),this.isNull=this.isValid&&!this.isValid(),this.formatPrefix=this.isNull?"null":"point",this}destroy(){if(!this.destroyed){let $=this,L=$.series,R=L.chart,G=L.options.dataSorting,U=R.hoverPoints,B=f($.series.chart.renderer.globalAnimation),H=()=>{for(let q in($.graphic||$.graphics||$.dataLabel||$.dataLabels)&&(Y($),$.destroyElements()),$)delete $[q]};$.legendItem&&R.legend.destroyItem($),U&&($.setState(),v(U,$),U.length||(R.hoverPoints=null)),$===R.hoverPoint&&$.onMouseOut(),G&&G.enabled?(this.animateBeforeDestroy(),W(H,B.duration)):H(),R.pointCount--}this.destroyed=!0}destroyElements($){let L=this,R=L.getGraphicalProps($);R.singular.forEach(function(G){L[G]=L[G].destroy()}),R.plural.forEach(function(G){L[G].forEach(function(U){U&&U.element&&U.destroy()}),delete L[G]})}firePointEvent($,L,R){let G=this,U=this.series.options;G.manageEvent($),$==="click"&&U.allowPointSelect&&(R=function(B){!G.destroyed&&G.select&&G.select(null,B.ctrlKey||B.metaKey||B.shiftKey)}),S(G,$,L,R)}getClassName(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(this.colorIndex!==void 0?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")}getGraphicalProps($){let L,R,G=this,U=[],B={singular:[],plural:[]};for(($=$||{graphic:1,dataLabel:1}).graphic&&U.push("graphic","connector"),$.dataLabel&&U.push("dataLabel","dataLabelPath","dataLabelUpper"),R=U.length;R--;)G[L=U[R]]&&B.singular.push(L);return["graphic","dataLabel"].forEach(function(H){let q=H+"s";$[H]&&G[q]&&B.plural.push(q)}),B}getLabelConfig(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}}getNestedProperty($){return $?$.indexOf("custom.")===0?E($,this.options):this[$]:void 0}getZone(){let $=this.series,L=$.zones,R=$.zoneAxis||"y",G,U=0;for(G=L[0];this[R]>=G.value;)G=L[++U];return this.nonZonedColor||(this.nonZonedColor=this.color),G&&G.color&&!this.options.color?this.color=G.color:this.color=this.nonZonedColor,G}hasNewShapeType(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType}constructor($,L,R){this.formatPrefix="point",this.visible=!0,this.series=$,this.applyOptions(L,R),this.id??(this.id=X()),this.resolveColor(),$.chart.pointCount++,S(this,"afterInit")}isValid(){return(D(this.x)||this.x instanceof Date)&&D(this.y)}optionsToObject($){let L=this.series,R=L.options.keys,G=R||L.pointArrayMap||["y"],U=G.length,B={},H,q=0,se=0;if(D($)||$===null)B[G[0]]=$;else if(x($))for(!R&&$.length>U&&((H=typeof $[0])=="string"?B.name=$[0]:H==="number"&&(B.x=$[0]),q++);se<U;)R&&$[q]===void 0||(G[se].indexOf(".")>0?O.prototype.setNestedProperty(B,$[q],G[se]):B[G[se]]=$[q]),q++,se++;else typeof $=="object"&&(B=$,$.dataLabels&&(L.hasDataLabels=()=>!0),$.marker&&(L._hasPointMarkers=!0));return B}pos($,L=this.plotY){if(!this.destroyed){let{plotX:R,series:G}=this,{chart:U,xAxis:B,yAxis:H}=G,q=0,se=0;if(D(R)&&D(L))return $&&(q=B?B.pos:U.plotLeft,se=H?H.pos:U.plotTop),U.inverted&&B&&H?[H.len-L+se,B.len-R+q]:[R+q,L+se]}}resolveColor(){let $=this.series,L=$.chart.options.chart,R=$.chart.styledMode,G,U,B=L.colorCount,H;delete this.nonZonedColor,$.options.colorByPoint?(R||(G=(U=$.options.colors||$.chart.options.colors)[$.colorCounter],B=U.length),H=$.colorCounter,$.colorCounter++,$.colorCounter===B&&($.colorCounter=0)):(R||(G=$.color),H=$.colorIndex),this.colorIndex=N(this.options.colorIndex,H),this.color=N(this.options.color,G)}setNestedProperty($,L,R){return R.split(".").reduce(function(G,U,B,H){let q=H.length-1===B;return G[U]=q?L:C(G[U],!0)?G[U]:{},G[U]},$),$}shouldDraw(){return!this.isNull}tooltipFormatter($){let L=this.series,R=L.tooltipOptions,G=N(R.valueDecimals,""),U=R.valuePrefix||"",B=R.valueSuffix||"";return L.chart.styledMode&&($=L.chart.tooltip.styledModeFormat($)),(L.pointArrayMap||["y"]).forEach(function(H){H="{point."+H,(U||B)&&($=$.replace(RegExp(H+"}","g"),U+H+"}"+B)),$=$.replace(RegExp(H+"}","g"),H+":,."+G+"f}")}),b($,{point:this,series:this.series},L.chart)}update($,L,R,G){let U,B=this,H=B.series,q=B.graphic,se=H.chart,pe=H.options;function ne(){B.applyOptions($);let le=q&&B.hasMockGraphic,ke=B.y===null?!le:le;q&&ke&&(B.graphic=q.destroy(),delete B.hasMockGraphic),C($,!0)&&(q&&q.element&&$&&$.marker&&$.marker.symbol!==void 0&&(B.graphic=q.destroy()),$!=null&&$.dataLabels&&B.dataLabel&&(B.dataLabel=B.dataLabel.destroy())),U=B.index,H.updateParallelArrays(B,U),pe.data[U]=C(pe.data[U],!0)||C($,!0)?B.options:N($,pe.data[U]),H.isDirty=H.isDirtyData=!0,!H.fixedBox&&H.hasCartesianSeries&&(se.isDirtyBox=!0),pe.legendType==="point"&&(se.isDirtyLegend=!0),L&&se.redraw(R)}L=N(L,!0),G===!1?ne():B.firePointEvent("update",{options:$},ne)}remove($,L){this.series.removePoint(this.series.data.indexOf(this),$,L)}select($,L){let R=this,G=R.series,U=G.chart;$=N($,!R.selected),this.selectedStaging=$,R.firePointEvent($?"select":"unselect",{accumulate:L},function(){R.selected=R.options.selected=$,G.options.data[G.data.indexOf(R)]=R.options,R.setState($&&"select"),L||U.getSelectedPoints().forEach(function(B){let H=B.series;B.selected&&B!==R&&(B.selected=B.options.selected=!1,H.options.data[H.data.indexOf(B)]=B.options,B.setState(U.hoverPoints&&H.options.inactiveOtherPoints?"inactive":""),B.firePointEvent("unselect"))})}),delete this.selectedStaging}onMouseOver($){let{inverted:L,pointer:R}=this.series.chart;R&&($=$?R.normalize($):R.getChartCoordinatesFromPoint(this,L),R.runPointActions($,this))}onMouseOut(){let $=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||($.hoverPoints||[]).forEach(function(L){L.setState()}),$.hoverPoints=$.hoverPoint=null}manageEvent($){var G,U,B,H,q,se;let L=I(this.series.options.point,this.options),R=(G=L.events)==null?void 0:G[$];A(R)&&(!((U=this.hcEvents)!=null&&U[$])||((H=(B=this.hcEvents)==null?void 0:B[$])==null?void 0:H.map(pe=>pe.fn).indexOf(R))===-1)?((q=this.importedUserEvent)==null||q.call(this),this.importedUserEvent=y(this,$,R)):this.importedUserEvent&&!R&&((se=this.hcEvents)!=null&&se[$])&&(Y(this,$),delete this.hcEvents[$],Object.keys(this.hcEvents)||delete this.importedUserEvent)}setState($,L){var ue;let R=this.series,G=this.state,U=R.options.states[$||"normal"]||{},B=g.plotOptions[R.type].marker&&R.options.marker,H=B&&B.enabled===!1,q=B&&B.states&&B.states[$||"normal"]||{},se=q.enabled===!1,pe=this.marker||{},ne=R.chart,le=B&&R.markerAttribs,ke=R.halo,be,Ee,K,J=R.stateMarkerGraphic,oe;if(($=$||"")===this.state&&!L||this.selected&&$!=="select"||U.enabled===!1||$&&(se||H&&q.enabled===!1)||$&&pe.states&&pe.states[$]&&pe.states[$].enabled===!1)return;if(this.state=$,le&&(be=R.markerAttribs(this,$)),this.graphic&&!this.hasMockGraphic){if(G&&this.graphic.removeClass("highcharts-point-"+G),$&&this.graphic.addClass("highcharts-point-"+$),!ne.styledMode){Ee=R.pointAttribs(this,$),K=N(ne.options.chart.animation,U.animation);let xe=Ee.opacity;R.options.inactiveOtherPoints&&D(xe)&&(this.dataLabels||[]).forEach(function(Te){Te&&!Te.hasClass("highcharts-data-label-hidden")&&(Te.animate({opacity:xe},K),Te.connector&&Te.connector.animate({opacity:xe},K))}),this.graphic.animate(Ee,K)}be&&this.graphic.animate(be,N(ne.options.chart.animation,q.animation,B.animation)),J&&J.hide()}else $&&q&&(oe=pe.symbol||R.symbol,J&&J.currentSymbol!==oe&&(J=J.destroy()),be&&(J?J[L?"animate":"attr"]({x:be.x,y:be.y}):oe&&(R.stateMarkerGraphic=J=ne.renderer.symbol(oe,be.x,be.y,be.width,be.height).add(R.markerGroup),J.currentSymbol=oe)),!ne.styledMode&&J&&this.state!=="inactive"&&J.attr(R.pointAttribs(this,$))),J&&(J[$&&this.isInside?"show":"hide"](),J.element.point=this,J.addClass(this.getClassName(),!0));let we=U.halo,ee=this.graphic||J,re=ee&&ee.visibility||"inherit";we&&we.size&&ee&&re!=="hidden"&&!this.isCluster?(ke||(R.halo=ke=ne.renderer.path().add(ee.parentGroup)),ke.show()[L?"animate":"attr"]({d:this.haloPath(we.size)}),ke.attr({class:"highcharts-halo highcharts-color-"+N(this.colorIndex,R.colorIndex)+(this.className?" "+this.className:""),visibility:re,zIndex:-1}),ke.point=this,ne.styledMode||ke.attr(T({fill:this.color||R.color,"fill-opacity":we.opacity},s.filterUserAttributes(we.attributes||{})))):(ue=ke==null?void 0:ke.point)!=null&&ue.haloPath&&!ke.point.destroyed&&ke.animate({d:ke.point.haloPath(0)},null,ke.hide),S(this,"afterSetState",{state:$})}haloPath($){let L=this.pos();return L?this.series.chart.renderer.symbols.circle(w(L[0],1)-$,L[1]-$,2*$,2*$):[]}}return O}),n(t,"Core/Pointer.js",[t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){var r;let{parse:p}=s,{charts:f,composed:g,isTouchDevice:b}=l,{addEvent:y,attr:w,css:v,extend:T,find:S,fireEvent:E,isNumber:x,isObject:A,objectEach:D,offset:C,pick:I,pushUnique:N,splat:W}=u;class Y{applyInactiveState(O){let V=[],$;(O||[]).forEach(function(L){$=L.series,V.push($),$.linkedParent&&V.push($.linkedParent),$.linkedSeries&&(V=V.concat($.linkedSeries)),$.navigatorSeries&&V.push($.navigatorSeries)}),this.chart.series.forEach(function(L){V.indexOf(L)===-1?L.setState("inactive",!0):L.options.inactiveOtherPoints&&L.setAllPointsToState("inactive")})}destroy(){let O=this;this.eventsToUnbind.forEach(V=>V()),this.eventsToUnbind=[],!l.chartCount&&(Y.unbindDocumentMouseUp&&Y.unbindDocumentMouseUp.forEach(V=>V()),Y.unbindDocumentTouchEnd&&(Y.unbindDocumentTouchEnd=Y.unbindDocumentTouchEnd())),clearInterval(O.tooltipTimeout),D(O,function(V,$){O[$]=void 0})}getSelectionMarkerAttrs(O,V){let $={args:{chartX:O,chartY:V},attrs:{},shapeType:"rect"};return E(this,"getSelectionMarkerAttrs",$,L=>{let R,{chart:G,zoomHor:U,zoomVert:B}=this,{mouseDownX:H=0,mouseDownY:q=0}=G,se=L.attrs;se.x=G.plotLeft,se.y=G.plotTop,se.width=U?1:G.plotWidth,se.height=B?1:G.plotHeight,U&&(R=O-H,se.width=Math.max(1,Math.abs(R)),se.x=(R>0?0:R)+H),B&&(R=V-q,se.height=Math.max(1,Math.abs(R)),se.y=(R>0?0:R)+q)}),$}drag(O){let{chart:V}=this,{mouseDownX:$=0,mouseDownY:L=0}=V,{panning:R,panKey:G,selectionMarkerFill:U}=V.options.chart,B=V.plotLeft,H=V.plotTop,q=V.plotWidth,se=V.plotHeight,pe=A(R)?R.enabled:R,ne=G&&O[`${G}Key`],le=O.chartX,ke=O.chartY,be,Ee=this.selectionMarker;if((!Ee||!Ee.touch)&&(le<B?le=B:le>B+q&&(le=B+q),ke<H?ke=H:ke>H+se&&(ke=H+se),this.hasDragged=Math.sqrt(Math.pow($-le,2)+Math.pow(L-ke,2)),this.hasDragged>10)){be=V.isInsidePlot($-B,L-H,{visiblePlotOnly:!0});let{shapeType:K,attrs:J}=this.getSelectionMarkerAttrs(le,ke);(V.hasCartesianSeries||V.mapView)&&this.hasZoom&&be&&!ne&&!Ee&&(this.selectionMarker=Ee=V.renderer[K](),Ee.attr({class:"highcharts-selection-marker",zIndex:7}).add(),V.styledMode||Ee.attr({fill:U||p("#334eff").setOpacity(.25).get()})),Ee&&Ee.attr(J),be&&!Ee&&pe&&V.pan(O,R)}}dragStart(O){let V=this.chart;V.mouseIsDown=O.type,V.cancelClick=!1,V.mouseDownX=O.chartX,V.mouseDownY=O.chartY}getSelectionBox(O){let V={args:{marker:O},result:O.getBBox()};return E(this,"getSelectionBox",V),V.result}drop(O){let V,{chart:$,selectionMarker:L}=this;for(let R of $.axes)R.isPanning&&(R.isPanning=!1,(R.options.startOnTick||R.options.endOnTick||R.series.some(G=>G.boosted))&&(R.forceRedraw=!0,R.setExtremes(R.userMin,R.userMax,!1),V=!0));if(V&&$.redraw(),L&&O){if(this.hasDragged){let R=this.getSelectionBox(L);$.transform({axes:$.axes.filter(G=>G.zoomEnabled&&(G.coll==="xAxis"&&this.zoomX||G.coll==="yAxis"&&this.zoomY)),selection:{originalEvent:O,xAxis:[],yAxis:[],...R},from:R})}x($.index)&&(this.selectionMarker=L.destroy())}$&&x($.index)&&(v($.container,{cursor:$._cursor}),$.cancelClick=this.hasDragged>10,$.mouseIsDown=!1,this.hasDragged=0,this.pinchDown=[])}findNearestKDPoint(O,V,$){let L;return O.forEach(function(R){let G=!(R.noSharedTooltip&&V)&&0>R.options.findNearestPointBy.indexOf("y"),U=R.searchPoint($,G);A(U,!0)&&U.series&&(!A(L,!0)||function(B,H){var ne,le;let q=B.distX-H.distX,se=B.dist-H.dist,pe=((ne=H.series.group)==null?void 0:ne.zIndex)-((le=B.series.group)==null?void 0:le.zIndex);return q!==0&&V?q:se!==0?se:pe!==0?pe:B.series.index>H.series.index?-1:1}(L,U)>0)&&(L=U)}),L}getChartCoordinatesFromPoint(O,V){let{xAxis:$,yAxis:L}=O.series,R=O.shapeArgs;if($&&L){let G=O.clientX??O.plotX??0,U=O.plotY||0;return O.isNode&&R&&x(R.x)&&x(R.y)&&(G=R.x,U=R.y),V?{chartX:L.len+L.pos-U,chartY:$.len+$.pos-G}:{chartX:G+$.pos,chartY:U+L.pos}}if(R&&R.x&&R.y)return{chartX:R.x,chartY:R.y}}getChartPosition(){if(this.chartPosition)return this.chartPosition;let{container:O}=this.chart,V=C(O);this.chartPosition={left:V.left,top:V.top,scaleX:1,scaleY:1};let{offsetHeight:$,offsetWidth:L}=O;return L>2&&$>2&&(this.chartPosition.scaleX=V.width/L,this.chartPosition.scaleY=V.height/$),this.chartPosition}getCoordinates(O){let V={xAxis:[],yAxis:[]};for(let $ of this.chart.axes)V[$.isXAxis?"xAxis":"yAxis"].push({axis:$,value:$.toValue(O[$.horiz?"chartX":"chartY"])});return V}getHoverData(O,V,$,L,R,G){let U=[],B=function(ne){return ne.visible&&!(!R&&ne.directTouch)&&I(ne.options.enableMouseTracking,!0)},H=V,q,se={chartX:G?G.chartX:void 0,chartY:G?G.chartY:void 0,shared:R};E(this,"beforeGetHoverData",se),q=H&&!H.stickyTracking?[H]:$.filter(ne=>ne.stickyTracking&&(se.filter||B)(ne));let pe=L&&O||!G?O:this.findNearestKDPoint(q,R,G);return H=pe&&pe.series,pe&&(R&&!H.noSharedTooltip?(q=$.filter(function(ne){return se.filter?se.filter(ne):B(ne)&&!ne.noSharedTooltip})).forEach(function(ne){let le=S(ne.points,function(ke){return ke.x===pe.x&&!ke.isNull});A(le)&&(ne.boosted&&ne.boost&&(le=ne.boost.getPoint(le)),U.push(le))}):U.push(pe)),E(this,"afterGetHoverData",se={hoverPoint:pe}),{hoverPoint:se.hoverPoint,hoverSeries:H,hoverPoints:U}}getPointFromEvent(O){let V=O.target,$;for(;V&&!$;)$=V.point,V=V.parentNode;return $}onTrackerMouseOut(O){let V=this.chart,$=O.relatedTarget,L=V.hoverSeries;this.isDirectTouch=!1,!L||!$||L.stickyTracking||this.inClass($,"highcharts-tooltip")||this.inClass($,"highcharts-series-"+L.index)&&this.inClass($,"highcharts-tracker")||L.onMouseOut()}inClass(O,V){let $=O,L;for(;$;){if(L=w($,"class")){if(L.indexOf(V)!==-1)return!0;if(L.indexOf("highcharts-container")!==-1)return!1}$=$.parentElement}}constructor(O,V){var $;this.hasDragged=0,this.pointerCaptureEventsToUnbind=[],this.eventsToUnbind=[],this.options=V,this.chart=O,this.runChartClick=!!(($=V.chart.events)!=null&&$.click),this.pinchDown=[],this.setDOMEvents(),E(this,"afterInit")}normalize(O,V){let $=O.touches,L=$?$.length?$.item(0):I($.changedTouches,O.changedTouches)[0]:O;V||(V=this.getChartPosition());let R=L.pageX-V.left,G=L.pageY-V.top;return T(O,{chartX:Math.round(R/=V.scaleX),chartY:Math.round(G/=V.scaleY)})}onContainerClick(O){let V=this.chart,$=V.hoverPoint,L=this.normalize(O),R=V.plotLeft,G=V.plotTop;!V.cancelClick&&($&&this.inClass(L.target,"highcharts-tracker")?(E($.series,"click",T(L,{point:$})),V.hoverPoint&&$.firePointEvent("click",L)):(T(L,this.getCoordinates(L)),V.isInsidePlot(L.chartX-R,L.chartY-G,{visiblePlotOnly:!0})&&E(V,"click",L)))}onContainerMouseDown(O){var $;let V=(1&(O.buttons||O.button))==1;O=this.normalize(O),l.isFirefox&&O.button!==0&&this.onContainerMouseMove(O),(O.button===void 0||V)&&(this.zoomOption(O),V&&(($=O.preventDefault)==null||$.call(O)),this.dragStart(O))}onContainerMouseLeave(O){let{pointer:V}=f[I(Y.hoverChartIndex,-1)]||{};O=this.normalize(O),this.onContainerMouseMove(O),V&&!this.inClass(O.relatedTarget,"highcharts-tooltip")&&(V.reset(),V.chartPosition=void 0)}onContainerMouseEnter(){delete this.chartPosition}onContainerMouseMove(O){let V=this.chart,$=V.tooltip,L=this.normalize(O);this.setHoverChartIndex(O),(V.mouseIsDown==="mousedown"||this.touchSelect(L))&&this.drag(L),!V.openMenu&&(this.inClass(L.target,"highcharts-tracker")||V.isInsidePlot(L.chartX-V.plotLeft,L.chartY-V.plotTop,{visiblePlotOnly:!0}))&&!($&&$.shouldStickOnContact(L))&&(this.inClass(L.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(L))}onDocumentTouchEnd(O){this.onDocumentMouseUp(O)}onContainerTouchMove(O){this.touchSelect(O)?this.onContainerMouseMove(O):this.touch(O)}onContainerTouchStart(O){this.touchSelect(O)?this.onContainerMouseDown(O):(this.zoomOption(O),this.touch(O,!0))}onDocumentMouseMove(O){let V=this.chart,$=V.tooltip,L=this.chartPosition,R=this.normalize(O,L);!L||V.isInsidePlot(R.chartX-V.plotLeft,R.chartY-V.plotTop,{visiblePlotOnly:!0})||$&&$.shouldStickOnContact(R)||R.target!==V.container.ownerDocument&&this.inClass(R.target,"highcharts-tracker")||this.reset()}onDocumentMouseUp(O){var V,$;($=(V=f[I(Y.hoverChartIndex,-1)])==null?void 0:V.pointer)==null||$.drop(O)}pinch(O){let V=this,{chart:$,hasZoom:L,lastTouches:R}=V,G=[].map.call(O.touches||[],se=>V.normalize(se)),U=G.length,B=U===1&&(V.inClass(O.target,"highcharts-tracker")&&$.runTrackerClick||V.runChartClick),H=$.tooltip,q=U===1&&I(H==null?void 0:H.options.followTouchMove,!0);U>1?V.initiated=!0:q&&(V.initiated=!1),L&&V.initiated&&!B&&O.cancelable!==!1&&O.preventDefault(),O.type==="touchstart"?(V.pinchDown=G,V.res=!0,$.mouseDownX=O.chartX):q?this.runPointActions(V.normalize(O)):R&&(E($,"touchpan",{originalEvent:O,touches:G},()=>{let se=pe=>{let ne=pe[0],le=pe[1]||ne;return{x:ne.chartX,y:ne.chartY,width:le.chartX-ne.chartX,height:le.chartY-ne.chartY}};$.transform({axes:$.axes.filter(pe=>pe.zoomEnabled&&(this.zoomHor&&pe.horiz||this.zoomVert&&!pe.horiz)),to:se(G),from:se(R),trigger:O.type})}),V.res&&(V.res=!1,this.reset(!1,0))),V.lastTouches=G}reset(O,V){let $=this.chart,L=$.hoverSeries,R=$.hoverPoint,G=$.hoverPoints,U=$.tooltip,B=U&&U.shared?G:R;O&&B&&W(B).forEach(function(H){H.series.isCartesian&&H.plotX===void 0&&(O=!1)}),O?U&&B&&W(B).length&&(U.refresh(B),U.shared&&G?G.forEach(function(H){H.setState(H.state,!0),H.series.isCartesian&&(H.series.xAxis.crosshair&&H.series.xAxis.drawCrosshair(null,H),H.series.yAxis.crosshair&&H.series.yAxis.drawCrosshair(null,H))}):R&&(R.setState(R.state,!0),$.axes.forEach(function(H){H.crosshair&&R.series[H.coll]===H&&H.drawCrosshair(null,R)}))):(R&&R.onMouseOut(),G&&G.forEach(function(H){H.setState()}),L&&L.onMouseOut(),U&&U.hide(V),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),$.axes.forEach(function(H){H.hideCrosshair()}),$.hoverPoints=$.hoverPoint=void 0)}runPointActions(O,V,$){let L=this.chart,R=L.series,G=L.tooltip&&L.tooltip.options.enabled?L.tooltip:void 0,U=!!G&&G.shared,B=V||L.hoverPoint,H=B&&B.series||L.hoverSeries,q=(!O||O.type!=="touchmove")&&(!!V||H&&H.directTouch&&this.isDirectTouch),se=this.getHoverData(B,H,R,q,U,O);B=se.hoverPoint,H=se.hoverSeries;let pe=se.hoverPoints,ne=H&&H.tooltipOptions.followPointer&&!H.tooltipOptions.split,le=U&&H&&!H.noSharedTooltip;if(B&&($||B!==L.hoverPoint||G&&G.isHidden)){if((L.hoverPoints||[]).forEach(function(ke){pe.indexOf(ke)===-1&&ke.setState()}),L.hoverSeries!==H&&H.onMouseOver(),this.applyInactiveState(pe),(pe||[]).forEach(function(ke){ke.setState("hover")}),L.hoverPoint&&L.hoverPoint.firePointEvent("mouseOut"),!B.series)return;L.hoverPoints=pe,L.hoverPoint=B,B.firePointEvent("mouseOver",void 0,()=>{G&&B&&G.refresh(le?pe:B,O)})}else if(ne&&G&&!G.isHidden){let ke=G.getAnchor([{}],O);L.isInsidePlot(ke[0],ke[1],{visiblePlotOnly:!0})&&G.updatePosition({plotX:ke[0],plotY:ke[1]})}this.unDocMouseMove||(this.unDocMouseMove=y(L.container.ownerDocument,"mousemove",ke=>{var be,Ee;return(Ee=(be=f[Y.hoverChartIndex??-1])==null?void 0:be.pointer)==null?void 0:Ee.onDocumentMouseMove(ke)}),this.eventsToUnbind.push(this.unDocMouseMove)),L.axes.forEach(function(ke){let be,Ee=I((ke.crosshair||{}).snap,!0);!Ee||(be=L.hoverPoint)&&be.series[ke.coll]===ke||(be=S(pe,K=>K.series&&K.series[ke.coll]===ke)),be||!Ee?ke.drawCrosshair(O,be):ke.hideCrosshair()})}setDOMEvents(){let O=this.chart.container,V=O.ownerDocument;O.onmousedown=this.onContainerMouseDown.bind(this),O.onmousemove=this.onContainerMouseMove.bind(this),O.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(y(O,"mouseenter",this.onContainerMouseEnter.bind(this)),y(O,"mouseleave",this.onContainerMouseLeave.bind(this))),Y.unbindDocumentMouseUp||(Y.unbindDocumentMouseUp=[]),Y.unbindDocumentMouseUp.push(y(V,"mouseup",this.onDocumentMouseUp.bind(this)));let $=this.chart.renderTo.parentElement;for(;$&&$.tagName!=="BODY";)this.eventsToUnbind.push(y($,"scroll",()=>{delete this.chartPosition})),$=$.parentElement;this.eventsToUnbind.push(y(O,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1}),y(O,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),Y.unbindDocumentTouchEnd||(Y.unbindDocumentTouchEnd=y(V,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})),this.setPointerCapture(),y(this.chart,"redraw",this.setPointerCapture.bind(this))}setPointerCapture(){var R,G;if(!b)return;let O=this.pointerCaptureEventsToUnbind,V=this.chart,$=V.container,L=I((R=V.options.tooltip)==null?void 0:R.followTouchMove,!0)&&V.series.some(U=>U.options.findNearestPointBy.indexOf("y")>-1);!this.hasPointerCapture&&L?(O.push(y($,"pointerdown",U=>{var B,H;(B=U.target)!=null&&B.hasPointerCapture(U.pointerId)&&((H=U.target)==null||H.releasePointerCapture(U.pointerId))}),y($,"pointermove",U=>{var B,H;(H=(B=V.pointer)==null?void 0:B.getPointFromEvent(U))==null||H.onMouseOver(U)})),V.styledMode||v($,{"touch-action":"none"}),$.className+=" highcharts-no-touch-action",this.hasPointerCapture=!0):this.hasPointerCapture&&!L&&(O.forEach(U=>U()),O.length=0,V.styledMode||v($,{"touch-action":I((G=V.options.chart.style)==null?void 0:G["touch-action"],"manipulation")}),$.className=$.className.replace(" highcharts-no-touch-action",""),this.hasPointerCapture=!1)}setHoverChartIndex(O){var L;let V=this.chart,$=l.charts[I(Y.hoverChartIndex,-1)];if($&&$!==V){let R={relatedTarget:V.container};O&&!(O!=null&&O.relatedTarget)&&(O={...R,...O}),(L=$.pointer)==null||L.onContainerMouseLeave(O||R)}$&&$.mouseIsDown||(Y.hoverChartIndex=V.index)}touch(O,V){let $,{chart:L,pinchDown:R=[]}=this;this.setHoverChartIndex(),(O=this.normalize(O)).touches.length===1?L.isInsidePlot(O.chartX-L.plotLeft,O.chartY-L.plotTop,{visiblePlotOnly:!0})&&!L.openMenu?(V&&this.runPointActions(O),O.type==="touchmove"&&($=!!R[0]&&Math.pow(R[0].chartX-O.chartX,2)+Math.pow(R[0].chartY-O.chartY,2)>=16),I($,!0)&&this.pinch(O)):V&&this.reset():O.touches.length===2&&this.pinch(O)}touchSelect(O){return!!(this.chart.zooming.singleTouch&&O.touches&&O.touches.length===1)}zoomOption(O){let V=this.chart,$=V.inverted,L=V.zooming.type||"",R,G;/touch/.test(O.type)&&(L=I(V.zooming.pinchType,L)),this.zoomX=R=/x/.test(L),this.zoomY=G=/y/.test(L),this.zoomHor=R&&!$||G&&$,this.zoomVert=G&&!$||R&&$,this.hasZoom=R||G}}return(r=Y).compose=function(X){N(g,"Core.Pointer")&&y(X,"beforeRender",function(){this.pointer=new r(this,this.options)})},Y}),n(t,"Core/Legend/LegendSymbol.js",[t["Core/Utilities.js"]],function(s){var l;let{extend:u,merge:r,pick:p}=s;return function(f){function g(b,y,w){var $,L;let v=this.legendItem=this.legendItem||{},{chart:T,options:S}=this,{baseline:E=0,symbolWidth:x,symbolHeight:A}=b,D=this.symbol||"circle",C=A/2,I=T.renderer,N=v.group,W=E-Math.round(((($=b.fontMetrics)==null?void 0:$.b)||A)*(w?.4:.3)),Y={},X,O=S.marker,V=0;if(T.styledMode||(Y["stroke-width"]=Math.min(S.lineWidth||0,24),S.dashStyle?Y.dashstyle=S.dashStyle:S.linecap==="square"||(Y["stroke-linecap"]="round")),v.line=I.path().addClass("highcharts-graph").attr(Y).add(N),w&&(v.area=I.path().addClass("highcharts-area").add(N)),Y["stroke-linecap"]&&(V=Math.min(v.line.strokeWidth(),x)/2),x){let R=[["M",V,W],["L",x-V,W]];v.line.attr({d:R}),(L=v.area)==null||L.attr({d:[...R,["L",x-V,E],["L",V,E]]})}if(O&&O.enabled!==!1&&x){let R=Math.min(p(O.radius,C),C);D.indexOf("url")===0&&(O=r(O,{width:A,height:A}),R=0),v.symbol=X=I.symbol(D,x/2-R,W-R,2*R,2*R,u({context:"legend"},O)).addClass("highcharts-point").add(N),X.isMarker=!0}}f.areaMarker=function(b,y){g.call(this,b,y,!0)},f.lineMarker=g,f.rectangle=function(b,y){let w=y.legendItem||{},v=b.options,T=b.symbolHeight,S=v.squareSymbol,E=S?T:b.symbolWidth;w.symbol=this.chart.renderer.rect(S?(b.symbolWidth-T)/2:0,b.baseline-T+1,E,T,p(b.options.symbolRadius,T/2)).addClass("highcharts-point").attr({zIndex:3}).add(w.group)}}(l||(l={})),l}),n(t,"Core/Series/SeriesDefaults.js",[],function(){return{lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},enableMouseTracking:!0,events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:150},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",borderWidth:0,defer:!0,formatter:function(){let{numberFormatter:s}=this.series.chart;return typeof this.y!="number"?"":s(this.y,-1)},padding:5,style:{fontSize:"0.7em",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:150},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:150},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"}}),n(t,"Core/Series/SeriesRegistry.js",[t["Core/Globals.js"],t["Core/Defaults.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(s,l,u,r){var p;let{defaultOptions:f}=l,{extend:g,extendClass:b,merge:y}=r;return function(w){function v(T,S){let E=f.plotOptions||{},x=S.defaultOptions,A=S.prototype;return A.type=T,A.pointClass||(A.pointClass=u),!w.seriesTypes[T]&&(x&&(E[T]=x),w.seriesTypes[T]=S,!0)}w.seriesTypes=s.seriesTypes,w.registerSeriesType=v,w.seriesType=function(T,S,E,x,A){let D=f.plotOptions||{};if(S=S||"",D[T]=y(D[S],E),delete w.seriesTypes[T],v(T,b(w.seriesTypes[S]||function(){},x)),w.seriesTypes[T].prototype.type=T,A){class C extends u{}g(C.prototype,A),w.seriesTypes[T].prototype.pointClass=C}return w.seriesTypes[T]}}(p||(p={})),p}),n(t,"Core/Series/Series.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Defaults.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Series/Point.js"],t["Core/Series/SeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,g,b,y,w){let{animObject:v,setAnimation:T}=s,{defaultOptions:S}=l,{registerEventOptions:E}=u,{svg:x,win:A}=r,{seriesTypes:D}=b,{arrayMax:C,arrayMin:I,clamp:N,correctFloat:W,crisp:Y,defined:X,destroyObjectProperties:O,diffObjects:V,erase:$,error:L,extend:R,find:G,fireEvent:U,getClosestDistance:B,getNestedProperty:H,insertItem:q,isArray:se,isNumber:pe,isString:ne,merge:le,objectEach:ke,pick:be,removeEvent:Ee,splat:K,syncTimeout:J}=w;class oe{constructor(){this.zoneAxis="y"}init(ee,re){let ue;U(this,"init",{options:re});let xe=this,Te=ee.series;this.eventsToUnbind=[],xe.chart=ee,xe.options=xe.setOptions(re);let ze=xe.options,Ce=ze.visible!==!1;xe.linkedSeries=[],xe.bindAxes(),R(xe,{name:ze.name,state:"",visible:Ce,selected:ze.selected===!0}),E(this,ze);let Ie=ze.events;(Ie&&Ie.click||ze.point&&ze.point.events&&ze.point.events.click||ze.allowPointSelect)&&(ee.runTrackerClick=!0),xe.getColor(),xe.getSymbol(),xe.parallelArrays.forEach(function(Be){xe[Be+"Data"]||(xe[Be+"Data"]=[])}),xe.isCartesian&&(ee.hasCartesianSeries=!0),Te.length&&(ue=Te[Te.length-1]),xe._i=be(ue&&ue._i,-1)+1,xe.opacity=xe.options.opacity,ee.orderItems("series",q(this,Te)),ze.dataSorting&&ze.dataSorting.enabled?xe.setDataSortingOptions():xe.points||xe.data||xe.setData(ze.data,!1),U(this,"afterInit")}is(ee){return D[ee]&&this instanceof D[ee]}bindAxes(){let ee,re=this,ue=re.options,xe=re.chart;U(this,"bindAxes",null,function(){(re.axisTypes||[]).forEach(function(Te){(xe[Te]||[]).forEach(function(ze){ee=ze.options,(be(ue[Te],0)===ze.index||ue[Te]!==void 0&&ue[Te]===ee.id)&&(q(re,ze.series),re[Te]=ze,ze.isDirty=!0)}),re[Te]||re.optionalAxis===Te||L(18,!0,xe)})}),U(this,"afterBindAxes")}updateParallelArrays(ee,re,ue){let xe=ee.series,Te=pe(re)?function(ze){let Ce=ze==="y"&&xe.toYData?xe.toYData(ee):ee[ze];xe[ze+"Data"][re]=Ce}:function(ze){Array.prototype[re].apply(xe[ze+"Data"],ue)};xe.parallelArrays.forEach(Te)}hasData(){return this.visible&&this.dataMax!==void 0&&this.dataMin!==void 0||this.visible&&this.yData&&this.yData.length>0}hasMarkerChanged(ee,re){let ue=ee.marker,xe=re.marker||{};return ue&&(xe.enabled&&!ue.enabled||xe.symbol!==ue.symbol||xe.height!==ue.height||xe.width!==ue.width)}autoIncrement(ee){let re=this.options,ue=re.pointIntervalUnit,xe=re.relativeXValue,Te=this.chart.time,ze=this.xIncrement,Ce,Ie;return ze=be(ze,re.pointStart,0),this.pointInterval=Ie=be(this.pointInterval,re.pointInterval,1),xe&&pe(ee)&&(Ie*=ee),ue&&(Ce=new Te.Date(ze),ue==="day"?Te.set("Date",Ce,Te.get("Date",Ce)+Ie):ue==="month"?Te.set("Month",Ce,Te.get("Month",Ce)+Ie):ue==="year"&&Te.set("FullYear",Ce,Te.get("FullYear",Ce)+Ie),Ie=Ce.getTime()-ze),xe&&pe(ee)?ze+Ie:(this.xIncrement=ze+Ie,ze)}setDataSortingOptions(){let ee=this.options;R(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),X(ee.pointRange)||(ee.pointRange=1)}setOptions(ee){var Pe,Fe;let re,ue=this.chart,xe=ue.options.plotOptions,Te=ue.userOptions||{},ze=le(ee),Ce=ue.styledMode,Ie={plotOptions:xe,userOptions:ze};U(this,"setOptions",Ie);let Be=Ie.plotOptions[this.type],He=Te.plotOptions||{},Ae=He.series||{},ye=S.plotOptions[this.type]||{},ge=He[this.type]||{};this.userOptions=Ie.userOptions;let Me=le(Be,xe.series,ge,ze);this.tooltipOptions=le(S.tooltip,(Pe=S.plotOptions.series)==null?void 0:Pe.tooltip,ye==null?void 0:ye.tooltip,ue.userOptions.tooltip,(Fe=He.series)==null?void 0:Fe.tooltip,ge.tooltip,ze.tooltip),this.stickyTracking=be(ze.stickyTracking,ge.stickyTracking,Ae.stickyTracking,!!this.tooltipOptions.shared&&!this.noSharedTooltip||Me.stickyTracking),Be.marker===null&&delete Me.marker,this.zoneAxis=Me.zoneAxis||"y";let De=this.zones=(Me.zones||[]).map(Xe=>({...Xe}));return(Me.negativeColor||Me.negativeFillColor)&&!Me.zones&&(re={value:Me[this.zoneAxis+"Threshold"]||Me.threshold||0,className:"highcharts-negative"},Ce||(re.color=Me.negativeColor,re.fillColor=Me.negativeFillColor),De.push(re)),De.length&&X(De[De.length-1].value)&&De.push(Ce?{}:{color:this.color,fillColor:this.fillColor}),U(this,"afterSetOptions",{options:Me}),Me}getName(){return be(this.options.name,"Series "+(this.index+1))}getCyclic(ee,re,ue){let xe,Te,ze=this.chart,Ce=`${ee}Index`,Ie=`${ee}Counter`,Be=(ue==null?void 0:ue.length)||ze.options.chart.colorCount;!re&&(X(Te=be(ee==="color"?this.options.colorIndex:void 0,this[Ce]))?xe=Te:(ze.series.length||(ze[Ie]=0),xe=ze[Ie]%Be,ze[Ie]+=1),ue&&(re=ue[xe])),xe!==void 0&&(this[Ce]=xe),this[ee]=re}getColor(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||S.plotOptions[this.type].color,this.chart.options.colors)}getPointsCollection(){return(this.hasGroupedData?this.points:this.data)||[]}getSymbol(){let ee=this.options.marker;this.getCyclic("symbol",ee.symbol,this.chart.options.symbols)}findPointIndex(ee,re){let ue,xe,Te,ze=ee.id,Ce=ee.x,Ie=this.points,Be=this.options.dataSorting;if(ze){let He=this.chart.get(ze);He instanceof f&&(ue=He)}else if(this.linkedParent||this.enabledDataSorting||this.options.relativeXValue){let He=Ae=>!Ae.touched&&Ae.index===ee.index;if(Be&&Be.matchByName?He=Ae=>!Ae.touched&&Ae.name===ee.name:this.options.relativeXValue&&(He=Ae=>!Ae.touched&&Ae.options.x===ee.x),!(ue=G(Ie,He)))return}return ue&&(Te=ue&&ue.index)!==void 0&&(xe=!0),Te===void 0&&pe(Ce)&&(Te=this.xData.indexOf(Ce,re)),Te!==-1&&Te!==void 0&&this.cropped&&(Te=Te>=this.cropStart?Te-this.cropStart:Te),!xe&&pe(Te)&&Ie[Te]&&Ie[Te].touched&&(Te=void 0),Te}updateData(ee,re){let ue=this.options,xe=ue.dataSorting,Te=this.points,ze=[],Ce=this.requireSorting,Ie=ee.length===Te.length,Be,He,Ae,ye,ge=!0;if(this.xIncrement=null,ee.forEach(function(Me,De){let Pe,Fe=X(Me)&&this.pointClass.prototype.optionsToObject.call({series:this},Me)||{},Xe=Fe.x;Fe.id||pe(Xe)?((Pe=this.findPointIndex(Fe,ye))===-1||Pe===void 0?ze.push(Me):Te[Pe]&&Me!==ue.data[Pe]?(Te[Pe].update(Me,!1,null,!1),Te[Pe].touched=!0,Ce&&(ye=Pe+1)):Te[Pe]&&(Te[Pe].touched=!0),(!Ie||De!==Pe||xe&&xe.enabled||this.hasDerivedData)&&(Be=!0)):ze.push(Me)},this),Be)for(He=Te.length;He--;)(Ae=Te[He])&&!Ae.touched&&Ae.remove&&Ae.remove(!1,re);else!Ie||xe&&xe.enabled?ge=!1:(ee.forEach(function(Me,De){Me===Te[De].y||Te[De].destroyed||Te[De].update(Me,!1,null,!1)}),ze.length=0);return Te.forEach(function(Me){Me&&(Me.touched=!1)}),!!ge&&(ze.forEach(function(Me){this.addPoint(Me,!1,null,null,!1)},this),this.xIncrement===null&&this.xData&&this.xData.length&&(this.xIncrement=C(this.xData),this.autoIncrement()),!0)}setData(ee,re=!0,ue,xe){var ft;let Te=this,ze=Te.points,Ce=ze&&ze.length||0,Ie=Te.options,Be=Te.chart,He=Ie.dataSorting,Ae=Te.xAxis,ye=Ie.turboThreshold,ge=this.xData,Me=this.yData,De=Te.pointArrayMap,Pe=De&&De.length,Fe=Ie.keys,Xe,tt,nt,ht=0,gt=1,Tt;Be.options.chart.allowMutatingData||(Ie.data&&delete Te.options.data,Te.userOptions.data&&delete Te.userOptions.data,Tt=le(!0,ee));let Lt=(ee=Tt||ee||[]).length;if(He&&He.enabled&&(ee=this.sortData(ee)),Be.options.chart.allowMutatingData&&xe!==!1&&Lt&&Ce&&!Te.cropped&&!Te.hasGroupedData&&Te.visible&&!Te.boosted&&(nt=this.updateData(ee,ue)),!nt){Te.xIncrement=null,Te.colorCounter=0,this.parallelArrays.forEach(function(Ct){Te[Ct+"Data"].length=0});let Et=ye&&Lt>ye;if(Et){let Ct=Te.getFirstValidPoint(ee),si=Te.getFirstValidPoint(ee,Lt-1,-1),di=qt=>!!(se(qt)&&(Fe||pe(qt[0])));if(pe(Ct)&&pe(si))for(Xe=0;Xe<Lt;Xe++)ge[Xe]=this.autoIncrement(),Me[Xe]=ee[Xe];else if(di(Ct)&&di(si))if(Pe)if(Ct.length===Pe)for(Xe=0;Xe<Lt;Xe++)ge[Xe]=this.autoIncrement(),Me[Xe]=ee[Xe];else for(Xe=0;Xe<Lt;Xe++)tt=ee[Xe],ge[Xe]=tt[0],Me[Xe]=tt.slice(1,Pe+1);else if(Fe&&(ht=Fe.indexOf("x"),gt=Fe.indexOf("y"),ht=ht>=0?ht:0,gt=gt>=0?gt:1),Ct.length===1&&(gt=0),ht===gt)for(Xe=0;Xe<Lt;Xe++)ge[Xe]=this.autoIncrement(),Me[Xe]=ee[Xe][gt];else for(Xe=0;Xe<Lt;Xe++)tt=ee[Xe],ge[Xe]=tt[ht],Me[Xe]=tt[gt];else Et=!1}if(!Et)for(Xe=0;Xe<Lt;Xe++)tt={series:Te},Te.pointClass.prototype.applyOptions.apply(tt,[ee[Xe]]),Te.updateParallelArrays(tt,Xe);for(Me&&ne(Me[0])&&L(14,!0,Be),Te.data=[],Te.options.data=Te.userOptions.data=ee,Xe=Ce;Xe--;)(ft=ze[Xe])==null||ft.destroy();Ae&&(Ae.minRange=Ae.userMinRange),Te.isDirty=Be.isDirtyBox=!0,Te.isDirtyData=!!ze,ue=!1}Ie.legendType==="point"&&(this.processData(),this.generatePoints()),re&&Be.redraw(ue)}sortData(ee){let re=this,ue=re.options.dataSorting.sortKey||"y",xe=function(Te,ze){return X(ze)&&Te.pointClass.prototype.optionsToObject.call({series:Te},ze)||{}};return ee.forEach(function(Te,ze){ee[ze]=xe(re,Te),ee[ze].index=ze},this),ee.concat().sort((Te,ze)=>{let Ce=H(ue,Te),Ie=H(ue,ze);return Ie<Ce?-1:Ie>Ce?1:0}).forEach(function(Te,ze){Te.x=ze},this),re.linkedSeries&&re.linkedSeries.forEach(function(Te){let ze=Te.options,Ce=ze.data;ze.dataSorting&&ze.dataSorting.enabled||!Ce||(Ce.forEach(function(Ie,Be){Ce[Be]=xe(Te,Ie),ee[Be]&&(Ce[Be].x=ee[Be].x,Ce[Be].index=Be)}),Te.setData(Ce,!1))}),ee}getProcessedData(ee){let re=this,ue=re.xAxis,xe=re.options.cropThreshold,Te=ue==null?void 0:ue.logarithmic,ze=re.isCartesian,Ce,Ie,Be=0,He,Ae,ye,ge=re.xData,Me=re.yData,De=!1,Pe=ge.length;ue&&(Ae=(He=ue.getExtremes()).min,ye=He.max,De=!!(ue.categories&&!ue.names.length)),ze&&re.sorted&&!ee&&(!xe||Pe>xe||re.forceCrop)&&(ge[Pe-1]<Ae||ge[0]>ye?(ge=[],Me=[]):re.yData&&(ge[0]<Ae||ge[Pe-1]>ye)&&(ge=(Ce=this.cropData(re.xData,re.yData,Ae,ye)).xData,Me=Ce.yData,Be=Ce.start,Ie=!0));let Fe=B([Te?ge.map(Te.log2lin):ge],()=>re.requireSorting&&!De&&L(15,!1,re.chart));return{xData:ge,yData:Me,cropped:Ie,cropStart:Be,closestPointRange:Fe}}processData(ee){let re=this.xAxis;if(this.isCartesian&&!this.isDirty&&!re.isDirty&&!this.yAxis.isDirty&&!ee)return!1;let ue=this.getProcessedData();this.cropped=ue.cropped,this.cropStart=ue.cropStart,this.processedXData=ue.xData,this.processedYData=ue.yData,this.closestPointRange=this.basePointRange=ue.closestPointRange,U(this,"afterProcessData")}cropData(ee,re,ue,xe){let Te=ee.length,ze,Ce,Ie=0,Be=Te;for(ze=0;ze<Te;ze++)if(ee[ze]>=ue){Ie=Math.max(0,ze-1);break}for(Ce=ze;Ce<Te;Ce++)if(ee[Ce]>xe){Be=Ce+1;break}return{xData:ee.slice(Ie,Be),yData:re.slice(Ie,Be),start:Ie,end:Be}}generatePoints(){let ee=this.options,re=this.processedData||ee.data,ue=this.processedXData,xe=this.processedYData,Te=this.pointClass,ze=ue.length,Ce=this.cropStart||0,Ie=this.hasGroupedData,Be=ee.keys,He=[],Ae=ee.dataGrouping&&ee.dataGrouping.groupAll?Ce:0,ye,ge,Me,De,Pe=this.data;if(!Pe&&!Ie){let Fe=[];Fe.length=re.length,Pe=this.data=Fe}for(Be&&Ie&&(this.options.keys=!1),De=0;De<ze;De++)ge=Ce+De,Ie?((Me=new Te(this,[ue[De]].concat(K(xe[De])))).dataGroup=this.groupMap[Ae+De],Me.dataGroup.options&&(Me.options=Me.dataGroup.options,R(Me,Me.dataGroup.options),delete Me.dataLabels)):(Me=Pe[ge])||re[ge]===void 0||(Pe[ge]=Me=new Te(this,re[ge],ue[De])),Me&&(Me.index=Ie?Ae+De:ge,He[De]=Me);if(this.options.keys=Be,Pe&&(ze!==(ye=Pe.length)||Ie))for(De=0;De<ye;De++)De!==Ce||Ie||(De+=ze),Pe[De]&&(Pe[De].destroyElements(),Pe[De].plotX=void 0);this.data=Pe,this.points=He,U(this,"afterGeneratePoints")}getXExtremes(ee){return{min:I(ee),max:C(ee)}}getExtremes(ee,re){let ue=this.xAxis,xe=this.yAxis,Te=[],ze=this.requireSorting&&!this.is("column")?1:0,Ce=!!xe&&xe.positiveValuesOnly,Ie=re||this.getExtremesFromAll||this.options.getExtremesFromAll,{processedXData:Be,processedYData:He}=this,Ae,ye,ge,Me,De,Pe,Fe,Xe=0,tt=0,nt=0;if(this.cropped&&Ie){let Lt=this.getProcessedData(!0);Be=Lt.xData,He=Lt.yData}let ht=(ee=ee||this.stackedYData||He||[]).length,gt=Be||this.xData;for(ue&&(Xe=(Ae=ue.getExtremes()).min,tt=Ae.max),Pe=0;Pe<ht;Pe++)if(Me=gt[Pe],ye=(pe(De=ee[Pe])||se(De))&&((pe(De)?De>0:De.length)||!Ce),ge=re||this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||!ue||(gt[Pe+ze]||Me)>=Xe&&(gt[Pe-ze]||Me)<=tt,ye&&ge)if(Fe=De.length)for(;Fe--;)pe(De[Fe])&&(Te[nt++]=De[Fe]);else Te[nt++]=De;let Tt={activeYData:Te,dataMin:I(Te),dataMax:C(Te)};return U(this,"afterGetExtremes",{dataExtremes:Tt}),Tt}applyExtremes(){let ee=this.getExtremes();return this.dataMin=ee.dataMin,this.dataMax=ee.dataMax,ee}getFirstValidPoint(ee,re=0,ue=1){let xe=ee.length,Te=re;for(;Te>=0&&Te<xe;){if(X(ee[Te]))return ee[Te];Te+=ue}}translate(){var tt;this.processedXData||this.processData(),this.generatePoints();let ee=this.options,re=ee.stacking,ue=this.xAxis,xe=ue.categories,Te=this.enabledDataSorting,ze=this.yAxis,Ce=this.points,Ie=Ce.length,Be=this.pointPlacementToXValue(),He=!!Be,Ae=ee.threshold,ye=ee.startFromThreshold?Ae:0,ge,Me,De,Pe,Fe=Number.MAX_VALUE;function Xe(nt){return N(nt,-1e9,1e9)}for(ge=0;ge<Ie;ge++){let nt,ht=Ce[ge],gt=ht.x,Tt,Lt,ft=ht.y,Et=ht.low,Ct=re&&((tt=ze.stacking)==null?void 0:tt.stacks[(this.negStacks&&ft<(ye?0:Ae)?"-":"")+this.stackKey]);Me=ue.translate(gt,!1,!1,!1,!0,Be),ht.plotX=pe(Me)?W(Xe(Me)):void 0,re&&this.visible&&Ct&&Ct[gt]&&(Pe=this.getStackIndicator(Pe,gt,this.index),!ht.isNull&&Pe.key&&(Lt=(Tt=Ct[gt]).points[Pe.key]),Tt&&se(Lt)&&(Et=Lt[0],ft=Lt[1],Et===ye&&Pe.key===Ct[gt].base&&(Et=be(pe(Ae)?Ae:ze.min)),ze.positiveValuesOnly&&X(Et)&&Et<=0&&(Et=void 0),ht.total=ht.stackTotal=be(Tt.total),ht.percentage=X(ht.y)&&Tt.total?ht.y/Tt.total*100:void 0,ht.stackY=ft,this.irregularWidths||Tt.setOffset(this.pointXOffset||0,this.barW||0,void 0,void 0,void 0,this.xAxis))),ht.yBottom=X(Et)?Xe(ze.translate(Et,!1,!0,!1,!0)):void 0,this.dataModify&&(ft=this.dataModify.modifyValue(ft,ge)),pe(ft)&&ht.plotX!==void 0&&(nt=pe(nt=ze.translate(ft,!1,!0,!1,!0))?Xe(nt):void 0),ht.plotY=nt,ht.isInside=this.isPointInside(ht),ht.clientX=He?W(ue.translate(gt,!1,!1,!1,!0,Be)):Me,ht.negative=(ht.y||0)<(Ae||0),ht.category=be(xe&&xe[ht.x],ht.x),ht.isNull||ht.visible===!1||(De!==void 0&&(Fe=Math.min(Fe,Math.abs(Me-De))),De=Me),ht.zone=this.zones.length?ht.getZone():void 0,!ht.graphic&&this.group&&Te&&(ht.isNew=!0)}this.closestPointRangePx=Fe,U(this,"afterTranslate")}getValidPoints(ee,re,ue){let xe=this.chart;return(ee||this.points||[]).filter(function(Te){let{plotX:ze,plotY:Ce}=Te;return!!((ue||!Te.isNull&&pe(Ce))&&(!re||xe.isInsidePlot(ze,Ce,{inverted:xe.inverted})))&&Te.visible!==!1})}getClipBox(){let{chart:ee,xAxis:re,yAxis:ue}=this,{x:xe,y:Te,width:ze,height:Ce}=le(ee.clipBox);return re&&re.len!==ee.plotSizeX&&(ze=re.len),ue&&ue.len!==ee.plotSizeY&&(Ce=ue.len),ee.inverted&&!this.invertible&&([ze,Ce]=[Ce,ze]),{x:xe,y:Te,width:ze,height:Ce}}getSharedClipKey(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0),this.sharedClipKey}setClip(){let{chart:ee,group:re,markerGroup:ue}=this,xe=ee.sharedClips,Te=ee.renderer,ze=this.getClipBox(),Ce=this.getSharedClipKey(),Ie=xe[Ce];Ie?Ie.animate(ze):xe[Ce]=Ie=Te.clipRect(ze),re&&re.clip(this.options.clip===!1?void 0:Ie),ue&&ue.clip()}animate(ee){let{chart:re,group:ue,markerGroup:xe}=this,Te=re.inverted,ze=v(this.options.animation),Ce=[this.getSharedClipKey(),ze.duration,ze.easing,ze.defer].join(","),Ie=re.sharedClips[Ce],Be=re.sharedClips[Ce+"m"];if(ee&&ue){let He=this.getClipBox();if(Ie)Ie.attr("height",He.height);else{He.width=0,Te&&(He.x=re.plotHeight),Ie=re.renderer.clipRect(He),re.sharedClips[Ce]=Ie;let Ae={x:-99,y:-99,width:Te?re.plotWidth+199:99,height:Te?99:re.plotHeight+199};Be=re.renderer.clipRect(Ae),re.sharedClips[Ce+"m"]=Be}ue.clip(Ie),xe==null||xe.clip(Be)}else if(Ie&&!Ie.hasClass("highcharts-animating")){let He=this.getClipBox(),Ae=ze.step;(xe!=null&&xe.element.childNodes.length||re.series.length>1)&&(ze.step=function(ye,ge){Ae&&Ae.apply(ge,arguments),ge.prop==="width"&&(Be!=null&&Be.element)&&Be.attr(Te?"height":"width",ye+99)}),Ie.addClass("highcharts-animating").animate(He,ze)}}afterAnimate(){this.setClip(),ke(this.chart.sharedClips,(ee,re,ue)=>{ee&&!this.chart.container.querySelector(`[clip-path="url(#${ee.id})"]`)&&(ee.destroy(),delete ue[re])}),this.finishedAnimating=!0,U(this,"afterAnimate")}drawPoints(ee=this.points){let re,ue,xe,Te,ze,Ce,Ie,Be=this.chart,He=Be.styledMode,{colorAxis:Ae,options:ye}=this,ge=ye.marker,Me=this[this.specialGroup||"markerGroup"],De=this.xAxis,Pe=be(ge.enabled,!De||!!De.isRadial||null,this.closestPointRangePx>=ge.enabledThreshold*ge.radius);if(ge.enabled!==!1||this._hasPointMarkers)for(re=0;re<ee.length;re++)if(Te=(xe=(ue=ee[re]).graphic)?"animate":"attr",ze=ue.marker||{},Ce=!!ue.marker,(Pe&&ze.enabled===void 0||ze.enabled)&&!ue.isNull&&ue.visible!==!1){let Fe=be(ze.symbol,this.symbol,"rect");Ie=this.markerAttribs(ue,ue.selected&&"select"),this.enabledDataSorting&&(ue.startXPos=De.reversed?-(Ie.width||0):De.width);let Xe=ue.isInside!==!1;if(!xe&&Xe&&((Ie.width||0)>0||ue.hasImage)&&(ue.graphic=xe=Be.renderer.symbol(Fe,Ie.x,Ie.y,Ie.width,Ie.height,Ce?ze:ge).add(Me),this.enabledDataSorting&&Be.hasRendered&&(xe.attr({x:ue.startXPos}),Te="animate")),xe&&Te==="animate"&&xe[Xe?"show":"hide"](Xe).animate(Ie),xe){let tt=this.pointAttribs(ue,He||!ue.selected?void 0:"select");He?Ae&&xe.css({fill:tt.fill}):xe[Te](tt)}xe&&xe.addClass(ue.getClassName(),!0)}else xe&&(ue.graphic=xe.destroy())}markerAttribs(ee,re){let ue=this.options,xe=ue.marker,Te=ee.marker||{},ze=Te.symbol||xe.symbol,Ce={},Ie,Be,He=be(Te.radius,xe&&xe.radius);re&&(Ie=xe.states[re],He=be((Be=Te.states&&Te.states[re])&&Be.radius,Ie&&Ie.radius,He&&He+(Ie&&Ie.radiusPlus||0))),ee.hasImage=ze&&ze.indexOf("url")===0,ee.hasImage&&(He=0);let Ae=ee.pos();return pe(He)&&Ae&&(ue.crisp&&(Ae[0]=Y(Ae[0],ee.hasImage?0:ze==="rect"?(xe==null?void 0:xe.lineWidth)||0:1)),Ce.x=Ae[0]-He,Ce.y=Ae[1]-He),He&&(Ce.width=Ce.height=2*He),Ce}pointAttribs(ee,re){let ue=this.options.marker,xe=ee&&ee.options,Te=xe&&xe.marker||{},ze=xe&&xe.color,Ce=ee&&ee.color,Ie=ee&&ee.zone&&ee.zone.color,Be,He,Ae=this.color,ye,ge,Me=be(Te.lineWidth,ue.lineWidth),De=1;return Ae=ze||Ie||Ce||Ae,ye=Te.fillColor||ue.fillColor||Ae,ge=Te.lineColor||ue.lineColor||Ae,re=re||"normal",Be=ue.states[re]||{},Me=be((He=Te.states&&Te.states[re]||{}).lineWidth,Be.lineWidth,Me+be(He.lineWidthPlus,Be.lineWidthPlus,0)),ye=He.fillColor||Be.fillColor||ye,{stroke:ge=He.lineColor||Be.lineColor||ge,"stroke-width":Me,fill:ye,opacity:De=be(He.opacity,Be.opacity,De)}}destroy(ee){let re,ue,xe,Te=this,ze=Te.chart,Ce=/AppleWebKit\/533/.test(A.navigator.userAgent),Ie=Te.data||[];for(U(Te,"destroy",{keepEventsForUpdate:ee}),this.removeEvents(ee),(Te.axisTypes||[]).forEach(function(Be){(xe=Te[Be])&&xe.series&&($(xe.series,Te),xe.isDirty=xe.forceRedraw=!0)}),Te.legendItem&&Te.chart.legend.destroyItem(Te),re=Ie.length;re--;)(ue=Ie[re])&&ue.destroy&&ue.destroy();for(let Be of Te.zones)O(Be,void 0,!0);w.clearTimeout(Te.animationTimeout),ke(Te,function(Be,He){Be instanceof y&&!Be.survive&&Be[Ce&&He==="group"?"hide":"destroy"]()}),ze.hoverSeries===Te&&(ze.hoverSeries=void 0),$(ze.series,Te),ze.orderItems("series"),ke(Te,function(Be,He){ee&&He==="hcEvents"||delete Te[He]})}applyZones(){let{area:ee,chart:re,graph:ue,zones:xe,points:Te,xAxis:ze,yAxis:Ce,zoneAxis:Ie}=this,{inverted:Be,renderer:He}=re,Ae=this[`${Ie}Axis`],{isXAxis:ye,len:ge=0}=Ae||{},Me=((ue==null?void 0:ue.strokeWidth())||0)/2+1,De=(Pe,Fe=0,Xe=0)=>{Be&&(Xe=ge-Xe);let{translated:tt=0,lineClip:nt}=Pe,ht=Xe-tt;nt==null||nt.push(["L",Fe,Math.abs(ht)<Me?Xe-Me*(ht<=0?-1:1):tt])};if(xe.length&&(ue||ee)&&Ae&&pe(Ae.min)){let Pe=Ae.getExtremes().max,Fe=nt=>{nt.forEach((ht,gt)=>{(ht[0]==="M"||ht[0]==="L")&&(nt[gt]=[ht[0],ye?ge-ht[1]:ht[1],ye?ht[2]:ge-ht[2]])})};if(xe.forEach(nt=>{nt.lineClip=[],nt.translated=N(Ae.toPixels(be(nt.value,Pe),!0)||0,0,ge)}),ue&&!this.showLine&&ue.hide(),ee&&ee.hide(),Ie==="y"&&Te.length<ze.len)for(let nt of Te){let{plotX:ht,plotY:gt,zone:Tt}=nt,Lt=Tt&&xe[xe.indexOf(Tt)-1];Tt&&De(Tt,ht,gt),Lt&&De(Lt,ht,gt)}let Xe=[],tt=Ae.toPixels(Ae.getExtremes().min,!0);xe.forEach(nt=>{var cn,Xi;let ht=nt.lineClip||[],gt=Math.round(nt.translated||0);ze.reversed&&ht.reverse();let{clip:Tt,simpleClip:Lt}=nt,ft=0,Et=0,Ct=ze.len,si=Ce.len;ye?(ft=gt,Ct=tt):(Et=gt,si=tt);let di=[["M",ft,Et],["L",Ct,Et],["L",Ct,si],["L",ft,si],["Z"]],qt=[di[0],...ht,di[1],di[2],...Xe,di[3],di[4]];Xe=ht.reverse(),tt=gt,Be&&(Fe(qt),ee&&Fe(di)),Tt?(Tt.animate({d:qt}),Lt==null||Lt.animate({d:di})):(Tt=nt.clip=He.path(qt),ee&&(Lt=nt.simpleClip=He.path(di))),ue&&((cn=nt.graph)==null||cn.clip(Tt)),ee&&((Xi=nt.area)==null||Xi.clip(Lt))})}else this.visible&&(ue&&ue.show(),ee&&ee.show())}plotGroup(ee,re,ue,xe,Te){let ze=this[ee],Ce=!ze,Ie={visibility:ue,zIndex:xe||.1};return X(this.opacity)&&!this.chart.styledMode&&this.state!=="inactive"&&(Ie.opacity=this.opacity),ze||(this[ee]=ze=this.chart.renderer.g().add(Te)),ze.addClass("highcharts-"+re+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(X(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(ze.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),ze.attr(Ie)[Ce?"attr":"animate"](this.getPlotBox(re)),ze}getPlotBox(ee){let re=this.xAxis,ue=this.yAxis,xe=this.chart,Te=xe.inverted&&!xe.polar&&re&&this.invertible&&ee==="series";return xe.inverted&&(re=ue,ue=this.xAxis),{translateX:re?re.left:xe.plotLeft,translateY:ue?ue.top:xe.plotTop,rotation:Te?90:0,rotationOriginX:Te?(re.len-ue.len)/2:0,rotationOriginY:Te?(re.len+ue.len)/2:0,scaleX:Te?-1:1,scaleY:1}}removeEvents(ee){let{eventsToUnbind:re}=this;ee||Ee(this),re.length&&(re.forEach(ue=>{ue()}),re.length=0)}render(){var He,Ae,ye,ge,Me;let ee=this,{chart:re,options:ue,hasRendered:xe}=ee,Te=v(ue.animation),ze=ee.visible?"inherit":"hidden",Ce=ue.zIndex,Ie=re.seriesGroup,Be=ee.finishedAnimating?0:Te.duration;U(this,"render"),ee.plotGroup("group","series",ze,Ce,Ie),ee.markerGroup=ee.plotGroup("markerGroup","markers",ze,Ce,Ie),ue.clip!==!1&&ee.setClip(),Be&&((He=ee.animate)==null||He.call(ee,!0)),ee.drawGraph&&(ee.drawGraph(),ee.applyZones()),ee.visible&&ee.drawPoints(),(Ae=ee.drawDataLabels)==null||Ae.call(ee),(ye=ee.redrawPoints)==null||ye.call(ee),ue.enableMouseTracking&&((ge=ee.drawTracker)==null||ge.call(ee)),Be&&((Me=ee.animate)==null||Me.call(ee)),xe||(Be&&Te.defer&&(Be+=Te.defer),ee.animationTimeout=J(()=>{ee.afterAnimate()},Be||0)),ee.isDirty=!1,ee.hasRendered=!0,U(ee,"afterRender")}redraw(){let ee=this.isDirty||this.isDirtyData;this.translate(),this.render(),ee&&delete this.kdTree}reserveSpace(){return this.visible||!this.chart.options.chart.ignoreHiddenSeries}searchPoint(ee,re){let{xAxis:ue,yAxis:xe}=this,Te=this.chart.inverted;return this.searchKDTree({clientX:Te?ue.len-ee.chartY+ue.pos:ee.chartX-ue.pos,plotY:Te?xe.len-ee.chartX+xe.pos:ee.chartY-xe.pos},re,ee)}buildKDTree(ee){this.buildingKdTree=!0;let re=this,ue=re.options.findNearestPointBy.indexOf("y")>-1?2:1;delete re.kdTree,J(function(){re.kdTree=function xe(Te,ze,Ce){let Ie,Be,He=Te==null?void 0:Te.length;if(He)return Ie=re.kdAxisArray[ze%Ce],Te.sort((Ae,ye)=>(Ae[Ie]||0)-(ye[Ie]||0)),{point:Te[Be=Math.floor(He/2)],left:xe(Te.slice(0,Be),ze+1,Ce),right:xe(Te.slice(Be+1),ze+1,Ce)}}(re.getValidPoints(void 0,!re.directTouch),ue,ue),re.buildingKdTree=!1},re.options.kdNow||(ee==null?void 0:ee.type)==="touchstart"?0:1)}searchKDTree(ee,re,ue){let xe=this,[Te,ze]=this.kdAxisArray,Ce=re?"distX":"dist",Ie=(xe.options.findNearestPointBy||"").indexOf("y")>-1?2:1,Be=!!xe.isBubble;if(this.kdTree||this.buildingKdTree||this.buildKDTree(ue),this.kdTree)return function He(Ae,ye,ge,Me){var Tt;let De=ye.point,Pe=xe.kdAxisArray[ge%Me],Fe,Xe,tt=De;(function(Lt,ft){var xn;let Et=Lt[Te],Ct=ft[Te],si=X(Et)&&X(Ct)?Et-Ct:null,di=Lt[ze],qt=ft[ze],cn=X(di)&&X(qt)?di-qt:0,Xi=Be&&((xn=ft.marker)==null?void 0:xn.radius)||0;ft.dist=Math.sqrt((si&&si*si||0)+cn*cn)-Xi,ft.distX=X(si)?Math.abs(si)-Xi:Number.MAX_VALUE})(Ae,De);let nt=(Ae[Pe]||0)-(De[Pe]||0)+(Be&&((Tt=De.marker)==null?void 0:Tt.radius)||0),ht=nt<0?"left":"right",gt=nt<0?"right":"left";return ye[ht]&&(tt=(Fe=He(Ae,ye[ht],ge+1,Me))[Ce]<tt[Ce]?Fe:De),ye[gt]&&Math.sqrt(nt*nt)<tt[Ce]&&(tt=(Xe=He(Ae,ye[gt],ge+1,Me))[Ce]<tt[Ce]?Xe:tt),tt}(ee,this.kdTree,Ie,Ie)}pointPlacementToXValue(){let{options:ee,xAxis:re}=this,ue=ee.pointPlacement;return ue==="between"&&(ue=re.reversed?-.5:.5),pe(ue)?ue*(ee.pointRange||re.pointRange):0}isPointInside(ee){let{chart:re,xAxis:ue,yAxis:xe}=this,{plotX:Te=-1,plotY:ze=-1}=ee;return ze>=0&&ze<=(xe?xe.len:re.plotHeight)&&Te>=0&&Te<=(ue?ue.len:re.plotWidth)}drawTracker(){var ye;let ee=this,re=ee.options,ue=re.trackByArea,xe=[].concat((ue?ee.areaPath:ee.graphPath)||[]),Te=ee.chart,ze=Te.pointer,Ce=Te.renderer,Ie=((ye=Te.options.tooltip)==null?void 0:ye.snap)||0,Be=()=>{re.enableMouseTracking&&Te.hoverSeries!==ee&&ee.onMouseOver()},He="rgba(192,192,192,"+(x?1e-4:.002)+")",Ae=ee.tracker;Ae?Ae.attr({d:xe}):ee.graph&&(ee.tracker=Ae=Ce.path(xe).attr({visibility:ee.visible?"inherit":"hidden",zIndex:2}).addClass(ue?"highcharts-tracker-area":"highcharts-tracker-line").add(ee.group),Te.styledMode||Ae.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:He,fill:ue?He:"none","stroke-width":ee.graph.strokeWidth()+(ue?0:2*Ie)}),[ee.tracker,ee.markerGroup,ee.dataLabelsGroup].forEach(ge=>{ge&&(ge.addClass("highcharts-tracker").on("mouseover",Be).on("mouseout",Me=>{ze==null||ze.onTrackerMouseOut(Me)}),re.cursor&&!Te.styledMode&&ge.css({cursor:re.cursor}),ge.on("touchstart",Be))})),U(this,"afterDrawTracker")}addPoint(ee,re,ue,xe,Te){let ze,Ce,Ie=this.options,Be=this.data,He=this.chart,Ae=this.xAxis,ye=Ae&&Ae.hasNames&&Ae.names,ge=Ie.data,Me=this.xData;re=be(re,!0);let De={series:this};this.pointClass.prototype.applyOptions.apply(De,[ee]);let Pe=De.x;if(Ce=Me.length,this.requireSorting&&Pe<Me[Ce-1])for(ze=!0;Ce&&Me[Ce-1]>Pe;)Ce--;this.updateParallelArrays(De,"splice",[Ce,0,0]),this.updateParallelArrays(De,Ce),ye&&De.name&&(ye[Pe]=De.name),ge.splice(Ce,0,ee),(ze||this.processedData)&&(this.data.splice(Ce,0,null),this.processData()),Ie.legendType==="point"&&this.generatePoints(),ue&&(Be[0]&&Be[0].remove?Be[0].remove(!1):(Be.shift(),this.updateParallelArrays(De,"shift"),ge.shift())),Te!==!1&&U(this,"addPoint",{point:De}),this.isDirty=!0,this.isDirtyData=!0,re&&He.redraw(xe)}removePoint(ee,re,ue){let xe=this,Te=xe.data,ze=Te[ee],Ce=xe.points,Ie=xe.chart,Be=function(){Ce&&Ce.length===Te.length&&Ce.splice(ee,1),Te.splice(ee,1),xe.options.data.splice(ee,1),xe.updateParallelArrays(ze||{series:xe},"splice",[ee,1]),ze&&ze.destroy(),xe.isDirty=!0,xe.isDirtyData=!0,re&&Ie.redraw()};T(ue,Ie),re=be(re,!0),ze?ze.firePointEvent("remove",null,Be):Be()}remove(ee,re,ue,xe){let Te=this,ze=Te.chart;function Ce(){Te.destroy(xe),ze.isDirtyLegend=ze.isDirtyBox=!0,ze.linkSeries(xe),be(ee,!0)&&ze.redraw(re)}ue!==!1?U(Te,"remove",null,Ce):Ce()}update(ee,re){var Fe,Xe,tt;U(this,"update",{options:ee=V(ee,this.userOptions)});let ue=this,xe=ue.chart,Te=ue.userOptions,ze=ue.initialType||ue.type,Ce=xe.options.plotOptions,Ie=D[ze].prototype,Be=ue.finishedAnimating&&{animation:!1},He={},Ae,ye,ge=["colorIndex","eventOptions","navigatorSeries","symbolIndex","baseSeries"],Me=ee.type||Te.type||xe.options.chart.type,De=!(this.hasDerivedData||Me&&Me!==this.type||ee.pointStart!==void 0||ee.pointInterval!==void 0||ee.relativeXValue!==void 0||ee.joinBy||ee.mapData||["dataGrouping","pointStart","pointInterval","pointIntervalUnit","keys"].some(nt=>ue.hasOptionChanged(nt)));Me=Me||ze,De&&(ge.push("data","isDirtyData","isDirtyCanvas","points","processedData","processedXData","processedYData","xIncrement","cropped","_hasPointMarkers","hasDataLabels","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX","transformGroups"),ee.visible!==!1&&ge.push("area","graph"),ue.parallelArrays.forEach(function(nt){ge.push(nt+"Data")}),ee.data&&(ee.dataSorting&&R(ue.options.dataSorting,ee.dataSorting),this.setData(ee.data,!1))),ee=le(Te,{index:Te.index===void 0?ue.index:Te.index,pointStart:((Fe=Ce==null?void 0:Ce.series)==null?void 0:Fe.pointStart)??Te.pointStart??((Xe=ue.xData)==null?void 0:Xe[0])},!De&&{data:ue.options.data},ee,Be),De&&ee.data&&(ee.data=ue.options.data),(ge=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(ge)).forEach(function(nt){ge[nt]=ue[nt],delete ue[nt]});let Pe=!1;if(D[Me]){if(Pe=Me!==ue.type,ue.remove(!1,!1,!1,!0),Pe)if(xe.propFromSeries(),Object.setPrototypeOf)Object.setPrototypeOf(ue,D[Me].prototype);else{let nt=Object.hasOwnProperty.call(ue,"hcEvents")&&ue.hcEvents;for(ye in Ie)ue[ye]=void 0;R(ue,D[Me].prototype),nt?ue.hcEvents=nt:delete ue.hcEvents}}else L(17,!0,xe,{missingModuleFor:Me});if(ge.forEach(function(nt){ue[nt]=ge[nt]}),ue.init(xe,ee),De&&this.points)for(let nt of((Ae=ue.options).visible===!1?(He.graphic=1,He.dataLabel=1):(this.hasMarkerChanged(Ae,Te)&&(He.graphic=1),(tt=ue.hasDataLabels)!=null&&tt.call(ue)||(He.dataLabel=1)),this.points))nt&&nt.series&&(nt.resolveColor(),Object.keys(He).length&&nt.destroyElements(He),Ae.showInLegend===!1&&nt.legendItem&&xe.legend.destroyItem(nt));ue.initialType=ze,xe.linkSeries(),xe.setSortedData(),Pe&&ue.linkedSeries.length&&(ue.isDirtyData=!0),U(this,"afterUpdate"),be(re,!0)&&xe.redraw(!!De&&void 0)}setName(ee){this.name=this.options.name=this.userOptions.name=ee,this.chart.isDirtyLegend=!0}hasOptionChanged(ee){var Ce,Ie;let re=this.chart,ue=this.options[ee],xe=re.options.plotOptions,Te=this.userOptions[ee],ze=be((Ce=xe==null?void 0:xe[this.type])==null?void 0:Ce[ee],(Ie=xe==null?void 0:xe.series)==null?void 0:Ie[ee]);return Te&&!X(ze)?ue!==Te:ue!==be(ze,ue)}onMouseOver(){let ee=this.chart,re=ee.hoverSeries,ue=ee.pointer;ue==null||ue.setHoverChartIndex(),re&&re!==this&&re.onMouseOut(),this.options.events.mouseOver&&U(this,"mouseOver"),this.setState("hover"),ee.hoverSeries=this}onMouseOut(){let ee=this.options,re=this.chart,ue=re.tooltip,xe=re.hoverPoint;re.hoverSeries=null,xe&&xe.onMouseOut(),this&&ee.events.mouseOut&&U(this,"mouseOut"),ue&&!this.stickyTracking&&(!ue.shared||this.noSharedTooltip)&&ue.hide(),re.series.forEach(function(Te){Te.setState("",!0)})}setState(ee,re){let ue=this,xe=ue.options,Te=ue.graph,ze=xe.inactiveOtherPoints,Ce=xe.states,Ie=be(Ce[ee||"normal"]&&Ce[ee||"normal"].animation,ue.chart.options.chart.animation),Be=xe.lineWidth,He=xe.opacity;if(ee=ee||"",ue.state!==ee&&([ue.group,ue.markerGroup,ue.dataLabelsGroup].forEach(function(Ae){Ae&&(ue.state&&Ae.removeClass("highcharts-series-"+ue.state),ee&&Ae.addClass("highcharts-series-"+ee))}),ue.state=ee,!ue.chart.styledMode)){if(Ce[ee]&&Ce[ee].enabled===!1)return;if(ee&&(Be=Ce[ee].lineWidth||Be+(Ce[ee].lineWidthPlus||0),He=be(Ce[ee].opacity,He)),Te&&!Te.dashstyle&&pe(Be))for(let Ae of[Te,...this.zones.map(ye=>ye.graph)])Ae==null||Ae.animate({"stroke-width":Be},Ie);ze||[ue.group,ue.markerGroup,ue.dataLabelsGroup,ue.labelBySeries].forEach(function(Ae){Ae&&Ae.animate({opacity:He},Ie)})}re&&ze&&ue.points&&ue.setAllPointsToState(ee||void 0)}setAllPointsToState(ee){this.points.forEach(function(re){re.setState&&re.setState(ee)})}setVisible(ee,re){var Ie;let ue=this,xe=ue.chart,Te=xe.options.chart.ignoreHiddenSeries,ze=ue.visible;ue.visible=ee=ue.options.visible=ue.userOptions.visible=ee===void 0?!ze:ee;let Ce=ee?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach(Be=>{var He;(He=ue[Be])==null||He[Ce]()}),(xe.hoverSeries===ue||((Ie=xe.hoverPoint)==null?void 0:Ie.series)===ue)&&ue.onMouseOut(),ue.legendItem&&xe.legend.colorizeItem(ue,ee),ue.isDirty=!0,ue.options.stacking&&xe.series.forEach(Be=>{Be.options.stacking&&Be.visible&&(Be.isDirty=!0)}),ue.linkedSeries.forEach(Be=>{Be.setVisible(ee,!1)}),Te&&(xe.isDirtyBox=!0),U(ue,Ce),re!==!1&&xe.redraw()}show(){this.setVisible(!0)}hide(){this.setVisible(!1)}select(ee){this.selected=ee=this.options.selected=ee===void 0?!this.selected:ee,this.checkbox&&(this.checkbox.checked=ee),U(this,ee?"select":"unselect")}shouldShowTooltip(ee,re,ue={}){return ue.series=this,ue.visiblePlotOnly=!0,this.chart.isInsidePlot(ee,re,ue)}drawLegendSymbol(ee,re){var ue;(ue=p[this.options.legendSymbol||"rectangle"])==null||ue.call(this,ee,re)}}return oe.defaultOptions=g,oe.types=b.seriesTypes,oe.registerType=b.registerSeriesType,R(oe.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,directTouch:!1,invertible:!0,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:f,requireSorting:!0,sorted:!0}),b.series=oe,oe}),n(t,"Core/Legend/Legend.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Series/Point.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,g,b){var y;let{animObject:w,setAnimation:v}=s,{registerEventOptions:T}=l,{composed:S,marginNames:E}=u,{distribute:x}=f,{format:A}=g,{addEvent:D,createElement:C,css:I,defined:N,discardElement:W,find:Y,fireEvent:X,isNumber:O,merge:V,pick:$,pushUnique:L,relativeLength:R,stableSort:G,syncTimeout:U}=b;class B{constructor(q,se){this.allItems=[],this.initialItemY=0,this.itemHeight=0,this.itemMarginBottom=0,this.itemMarginTop=0,this.itemX=0,this.itemY=0,this.lastItemY=0,this.lastLineHeight=0,this.legendHeight=0,this.legendWidth=0,this.maxItemWidth=0,this.maxLegendWidth=0,this.offsetWidth=0,this.padding=0,this.pages=[],this.symbolHeight=0,this.symbolWidth=0,this.titleHeight=0,this.totalItemWidth=0,this.widthOption=0,this.chart=q,this.setOptions(se),se.enabled&&(this.render(),T(this,se),D(this.chart,"endResize",function(){this.legend.positionCheckboxes()})),D(this.chart,"render",()=>{this.options.enabled&&this.proximate&&(this.proximatePositions(),this.positionItems())})}setOptions(q){let se=$(q.padding,8);this.options=q,this.chart.styledMode||(this.itemStyle=q.itemStyle,this.itemHiddenStyle=V(this.itemStyle,q.itemHiddenStyle)),this.itemMarginTop=q.itemMarginTop,this.itemMarginBottom=q.itemMarginBottom,this.padding=se,this.initialItemY=se-5,this.symbolWidth=$(q.symbolWidth,16),this.pages=[],this.proximate=q.layout==="proximate"&&!this.chart.inverted,this.baseline=void 0}update(q,se){let pe=this.chart;this.setOptions(V(!0,this.options,q)),"events"in this.options&&T(this,this.options),this.destroy(),pe.isDirtyLegend=pe.isDirtyBox=!0,$(se,!0)&&pe.redraw(),X(this,"afterUpdate",{redraw:se})}colorizeItem(q,se){let{area:pe,group:ne,label:le,line:ke,symbol:be}=q.legendItem||{};if(ne==null||ne[se?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){let{itemHiddenStyle:Ee={}}=this,K=Ee.color,{fillColor:J,fillOpacity:oe,lineColor:we,marker:ee}=q.options,re=ue=>(!se&&(ue.fill&&(ue.fill=K),ue.stroke&&(ue.stroke=K)),ue);le==null||le.css(V(se?this.itemStyle:Ee)),ke==null||ke.attr(re({stroke:we||q.color})),be&&be.attr(re(ee&&be.isMarker?q.pointAttribs():{fill:q.color})),pe==null||pe.attr(re({fill:J||q.color,"fill-opacity":J?1:oe??.75}))}X(this,"afterColorizeItem",{item:q,visible:se})}positionItems(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()}positionItem(q){let{group:se,x:pe=0,y:ne=0}=q.legendItem||{},le=this.options,ke=le.symbolPadding,be=!le.rtl,Ee=q.checkbox;if(se&&se.element){let K={translateX:be?pe:this.legendWidth-pe-2*ke-4,translateY:ne};se[N(se.translateY)?"animate":"attr"](K,void 0,()=>{X(this,"afterPositionItem",{item:q})})}Ee&&(Ee.x=pe,Ee.y=ne)}destroyItem(q){let se=q.checkbox,pe=q.legendItem||{};for(let ne of["group","label","line","symbol"])pe[ne]&&(pe[ne]=pe[ne].destroy());se&&W(se),q.legendItem=void 0}destroy(){for(let q of this.getAllItems())this.destroyItem(q);for(let q of["clipRect","up","down","pager","nav","box","title","group"])this[q]&&(this[q]=this[q].destroy());this.display=null}positionCheckboxes(){let q,se=this.group&&this.group.alignAttr,pe=this.clipHeight||this.legendHeight,ne=this.titleHeight;se&&(q=se.translateY,this.allItems.forEach(function(le){let ke,be=le.checkbox;be&&(ke=q+ne+be.y+(this.scrollOffset||0)+3,I(be,{left:se.translateX+le.checkboxOffset+be.x-20+"px",top:ke+"px",display:this.proximate||ke>q-6&&ke<q+pe-6?"":"none"}))},this))}renderTitle(){let q=this.options,se=this.padding,pe=q.title,ne,le=0;pe.text&&(this.title||(this.title=this.chart.renderer.label(pe.text,se-3,se-4,void 0,void 0,void 0,q.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(pe.style),this.title.add(this.group)),pe.width||this.title.css({width:this.maxLegendWidth+"px"}),le=(ne=this.title.getBBox()).height,this.offsetWidth=ne.width,this.contentGroup.attr({translateY:le})),this.titleHeight=le}setText(q){let se=this.options;q.legendItem.label.attr({text:se.labelFormat?A(se.labelFormat,q,this.chart):se.labelFormatter.call(q)})}renderItem(q){let se=q.legendItem=q.legendItem||{},pe=this.chart,ne=pe.renderer,le=this.options,ke=le.layout==="horizontal",be=this.symbolWidth,Ee=le.symbolPadding||0,K=this.itemStyle,J=this.itemHiddenStyle,oe=ke?$(le.itemDistance,20):0,we=!le.rtl,ee=!q.series,re=!ee&&q.series.drawLegendSymbol?q.series:q,ue=re.options,xe=!!this.createCheckboxForItem&&ue&&ue.showCheckbox,Te=le.useHTML,ze=q.options.className,Ce=se.label,Ie=be+Ee+oe+(xe?20:0);!Ce&&(se.group=ne.g("legend-item").addClass("highcharts-"+re.type+"-series highcharts-color-"+q.colorIndex+(ze?" "+ze:"")+(ee?" highcharts-series-"+q.index:"")).attr({zIndex:1}).add(this.scrollGroup),se.label=Ce=ne.text("",we?be+Ee:-Ee,this.baseline||0,Te),pe.styledMode||Ce.css(V(q.visible?K:J)),Ce.attr({align:we?"left":"right",zIndex:2}).add(se.group),!this.baseline&&(this.fontMetrics=ne.fontMetrics(Ce),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,Ce.attr("y",this.baseline),this.symbolHeight=$(le.symbolHeight,this.fontMetrics.f),le.squareSymbol&&(this.symbolWidth=$(le.symbolWidth,Math.max(this.symbolHeight,16)),Ie=this.symbolWidth+Ee+oe+(xe?20:0),we&&Ce.attr("x",this.symbolWidth+Ee))),re.drawLegendSymbol(this,q),this.setItemEvents&&this.setItemEvents(q,Ce,Te)),xe&&!q.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(q),this.colorizeItem(q,q.visible),(pe.styledMode||!K.width)&&Ce.css({width:(le.itemWidth||this.widthOption||pe.spacingBox.width)-Ie+"px"}),this.setText(q);let Be=Ce.getBBox(),He=this.fontMetrics&&this.fontMetrics.h||0;q.itemWidth=q.checkboxOffset=le.itemWidth||se.labelWidth||Be.width+Ie,this.maxItemWidth=Math.max(this.maxItemWidth,q.itemWidth),this.totalItemWidth+=q.itemWidth,this.itemHeight=q.itemHeight=Math.round(se.labelHeight||(Be.height>1.5*He?Be.height:He))}layoutItem(q){let se=this.options,pe=this.padding,ne=se.layout==="horizontal",le=q.itemHeight,ke=this.itemMarginBottom,be=this.itemMarginTop,Ee=ne?$(se.itemDistance,20):0,K=this.maxLegendWidth,J=se.alignColumns&&this.totalItemWidth>K?this.maxItemWidth:q.itemWidth,oe=q.legendItem||{};ne&&this.itemX-pe+J>K&&(this.itemX=pe,this.lastLineHeight&&(this.itemY+=be+this.lastLineHeight+ke),this.lastLineHeight=0),this.lastItemY=be+this.itemY+ke,this.lastLineHeight=Math.max(le,this.lastLineHeight),oe.x=this.itemX,oe.y=this.itemY,ne?this.itemX+=J:(this.itemY+=be+le+ke,this.lastLineHeight=le),this.offsetWidth=this.widthOption||Math.max((ne?this.itemX-pe-(q.checkbox?0:Ee):J)+pe,this.offsetWidth)}getAllItems(){let q=[];return this.chart.series.forEach(function(se){let pe=se&&se.options;se&&$(pe.showInLegend,!N(pe.linkedTo)&&void 0,!0)&&(q=q.concat((se.legendItem||{}).labels||(pe.legendType==="point"?se.data:se)))}),X(this,"afterGetAllItems",{allItems:q}),q}getAlignment(){let q=this.options;return this.proximate?q.align.charAt(0)+"tv":q.floating?"":q.align.charAt(0)+q.verticalAlign.charAt(0)+q.layout.charAt(0)}adjustMargins(q,se){let pe=this.chart,ne=this.options,le=this.getAlignment();le&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach(function(ke,be){ke.test(le)&&!N(q[be])&&(pe[E[be]]=Math.max(pe[E[be]],pe.legend[(be+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][be]*ne[be%2?"x":"y"]+$(ne.margin,12)+se[be]+(pe.titleOffset[be]||0)))})}proximatePositions(){let q,se=this.chart,pe=[],ne=this.options.align==="left";for(let le of(this.allItems.forEach(function(ke){let be,Ee,K=ne,J,oe;ke.yAxis&&(ke.xAxis.options.reversed&&(K=!K),ke.points&&(be=Y(K?ke.points:ke.points.slice(0).reverse(),function(we){return O(we.plotY)})),Ee=this.itemMarginTop+ke.legendItem.label.getBBox().height+this.itemMarginBottom,oe=ke.yAxis.top-se.plotTop,J=ke.visible?(be?be.plotY:ke.yAxis.height)+(oe-.3*Ee):oe+ke.yAxis.height,pe.push({target:J,size:Ee,item:ke}))},this),x(pe,se.plotHeight)))q=le.item.legendItem||{},O(le.pos)&&(q.y=se.plotTop-se.spacing[0]+le.pos)}render(){let q=this.chart,se=q.renderer,pe=this.options,ne=this.padding,le=this.getAllItems(),ke,be,Ee,K=this.group,J,oe=this.box;this.itemX=ne,this.itemY=this.initialItemY,this.offsetWidth=0,this.lastItemY=0,this.widthOption=R(pe.width,q.spacingBox.width-ne),J=q.spacingBox.width-2*ne-pe.x,["rm","lm"].indexOf(this.getAlignment().substring(0,2))>-1&&(J/=2),this.maxLegendWidth=this.widthOption||J,K||(this.group=K=se.g("legend").addClass(pe.className||"").attr({zIndex:7}).add(),this.contentGroup=se.g().attr({zIndex:1}).add(K),this.scrollGroup=se.g().add(this.contentGroup)),this.renderTitle(),G(le,(we,ee)=>(we.options&&we.options.legendIndex||0)-(ee.options&&ee.options.legendIndex||0)),pe.reversed&&le.reverse(),this.allItems=le,this.display=ke=!!le.length,this.lastLineHeight=0,this.maxItemWidth=0,this.totalItemWidth=0,this.itemHeight=0,le.forEach(this.renderItem,this),le.forEach(this.layoutItem,this),be=(this.widthOption||this.offsetWidth)+ne,Ee=this.lastItemY+this.lastLineHeight+this.titleHeight,Ee=this.handleOverflow(Ee)+ne,oe||(this.box=oe=se.rect().addClass("highcharts-legend-box").attr({r:pe.borderRadius}).add(K)),q.styledMode||oe.attr({stroke:pe.borderColor,"stroke-width":pe.borderWidth||0,fill:pe.backgroundColor||"none"}).shadow(pe.shadow),be>0&&Ee>0&&oe[oe.placed?"animate":"attr"](oe.crisp.call({},{x:0,y:0,width:be,height:Ee},oe.strokeWidth())),K[ke?"show":"hide"](),q.styledMode&&K.getStyle("display")==="none"&&(be=Ee=0),this.legendWidth=be,this.legendHeight=Ee,ke&&this.align(),this.proximate||this.positionItems(),X(this,"afterRender")}align(q=this.chart.spacingBox){let se=this.chart,pe=this.options,ne=q.y;/(lth|ct|rth)/.test(this.getAlignment())&&se.titleOffset[0]>0?ne+=se.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&se.titleOffset[2]>0&&(ne-=se.titleOffset[2]),ne!==q.y&&(q=V(q,{y:ne})),se.hasRendered||(this.group.placed=!1),this.group.align(V(pe,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":pe.verticalAlign}),!0,q)}handleOverflow(q){let se=this,pe=this.chart,ne=pe.renderer,le=this.options,ke=le.y,be=le.verticalAlign==="top",Ee=this.padding,K=le.maxHeight,J=le.navigation,oe=$(J.animation,!0),we=J.arrowSize||12,ee=this.pages,re=this.allItems,ue=function(Ae){typeof Ae=="number"?He.attr({height:Ae}):He&&(se.clipRect=He.destroy(),se.contentGroup.clip()),se.contentGroup.div&&(se.contentGroup.div.style.clip=Ae?"rect("+Ee+"px,9999px,"+(Ee+Ae)+"px,0)":"auto")},xe=function(Ae){return se[Ae]=ne.circle(0,0,1.3*we).translate(we/2,we/2).add(Be),pe.styledMode||se[Ae].attr("fill","rgba(0,0,0,0.0001)"),se[Ae]},Te,ze,Ce,Ie=pe.spacingBox.height+(be?-ke:ke)-Ee,Be=this.nav,He=this.clipRect;return le.layout!=="horizontal"||le.verticalAlign==="middle"||le.floating||(Ie/=2),K&&(Ie=Math.min(Ie,K)),ee.length=0,q&&Ie>0&&q>Ie&&J.enabled!==!1?(this.clipHeight=Te=Math.max(Ie-20-this.titleHeight-Ee,0),this.currentPage=$(this.currentPage,1),this.fullHeight=q,re.forEach((Ae,ye)=>{let ge=(Ce=Ae.legendItem||{}).y||0,Me=Math.round(Ce.label.getBBox().height),De=ee.length;(!De||ge-ee[De-1]>Te&&(ze||ge)!==ee[De-1])&&(ee.push(ze||ge),De++),Ce.pageIx=De-1,ze&&((re[ye-1].legendItem||{}).pageIx=De-1),ye===re.length-1&&ge+Me-ee[De-1]>Te&&ge>ee[De-1]&&(ee.push(ge),Ce.pageIx=De),ge!==ze&&(ze=ge)}),He||(He=se.clipRect=ne.clipRect(0,Ee-2,9999,0),se.contentGroup.clip(He)),ue(Te),Be||(this.nav=Be=ne.g().attr({zIndex:1}).add(this.group),this.up=ne.symbol("triangle",0,0,we,we).add(Be),xe("upTracker").on("click",function(){se.scroll(-1,oe)}),this.pager=ne.text("",15,10).addClass("highcharts-legend-navigation"),!pe.styledMode&&J.style&&this.pager.css(J.style),this.pager.add(Be),this.down=ne.symbol("triangle-down",0,0,we,we).add(Be),xe("downTracker").on("click",function(){se.scroll(1,oe)})),se.scroll(0),q=Ie):Be&&(ue(),this.nav=Be.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),q}scroll(q,se){let pe=this.chart,ne=this.pages,le=ne.length,ke=this.clipHeight,be=this.options.navigation,Ee=this.pager,K=this.padding,J=this.currentPage+q;J>le&&(J=le),J>0&&(se!==void 0&&v(se,pe),this.nav.attr({translateX:K,translateY:ke+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach(function(oe){oe.attr({class:J===1?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),Ee.attr({text:J+"/"+le}),[this.down,this.downTracker].forEach(function(oe){oe.attr({x:18+this.pager.getBBox().width,class:J===le?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})},this),pe.styledMode||(this.up.attr({fill:J===1?be.inactiveColor:be.activeColor}),this.upTracker.css({cursor:J===1?"default":"pointer"}),this.down.attr({fill:J===le?be.inactiveColor:be.activeColor}),this.downTracker.css({cursor:J===le?"default":"pointer"})),this.scrollOffset=-ne[J-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=J,this.positionCheckboxes(),U(()=>{X(this,"afterScroll",{currentPage:J})},w($(se,pe.renderer.globalAnimation,!0)).duration))}setItemEvents(q,se,pe){let ne=this,le=q.legendItem||{},ke=ne.chart.renderer.boxWrapper,be=q instanceof p,Ee=q instanceof r,K="highcharts-legend-"+(be?"point":"series")+"-active",J=ne.chart.styledMode,oe=pe?[se,le.symbol]:[le.group],we=ee=>{ne.allItems.forEach(re=>{q!==re&&[re].concat(re.linkedSeries||[]).forEach(ue=>{ue.setState(ee,!be)})})};for(let ee of oe)ee&&ee.on("mouseover",function(){q.visible&&we("inactive"),q.setState("hover"),q.visible&&ke.addClass(K),J||se.css(ne.options.itemHoverStyle)}).on("mouseout",function(){ne.chart.styledMode||se.css(V(q.visible?ne.itemStyle:ne.itemHiddenStyle)),we(""),ke.removeClass(K),q.setState()}).on("click",function(re){let ue=function(){q.setVisible&&q.setVisible(),we(q.visible?"inactive":"")};ke.removeClass(K),X(ne,"itemClick",{browserEvent:re,legendItem:q},ue),be?q.firePointEvent("legendItemClick",{browserEvent:re}):Ee&&X(q,"legendItemClick",{browserEvent:re})})}createCheckboxForItem(q){q.checkbox=C("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:q.selected,defaultChecked:q.selected},this.options.itemCheckboxStyle,this.chart.container),D(q.checkbox,"click",function(se){let pe=se.target;X(q.series||q,"checkboxClick",{checked:pe.checked,item:q},function(){q.select()})})}}return(y=B).compose=function(H){L(S,"Core.Legend")&&D(H,"beforeMargins",function(){this.legend=new y(this,this.options.legend)})},B}),n(t,"Core/Chart/Chart.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/Axis.js"],t["Core/Defaults.js"],t["Core/Templating.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Time.js"],t["Core/Utilities.js"],t["Core/Renderer/HTML/AST.js"],t["Core/Axis/Tick.js"]],function(s,l,u,r,p,f,g,b,y,w,v,T,S,E){let{animate:x,animObject:A,setAnimation:D}=s,{defaultOptions:C,defaultTime:I}=u,{numberFormat:N}=r,{registerEventOptions:W}=p,{charts:Y,doc:X,marginNames:O,svg:V,win:$}=f,{seriesTypes:L}=y,{addEvent:R,attr:G,createElement:U,css:B,defined:H,diffObjects:q,discardElement:se,erase:pe,error:ne,extend:le,find:ke,fireEvent:be,getStyle:Ee,isArray:K,isNumber:J,isObject:oe,isString:we,merge:ee,objectEach:re,pick:ue,pInt:xe,relativeLength:Te,removeEvent:ze,splat:Ce,syncTimeout:Ie,uniqueKey:Be}=T;class He{static chart(ye,ge,Me){return new He(ye,ge,Me)}constructor(ye,ge,Me){this.sharedClips={};let De=[...arguments];(we(ye)||ye.nodeName)&&(this.renderTo=De.shift()),this.init(De[0],De[1])}setZoomOptions(){let ye=this.options.chart,ge=ye.zooming;this.zooming={...ge,type:ue(ye.zoomType,ge.type),key:ue(ye.zoomKey,ge.key),pinchType:ue(ye.pinchType,ge.pinchType),singleTouch:ue(ye.zoomBySingleTouch,ge.singleTouch,!1),resetButton:ee(ge.resetButton,ye.resetZoomButton)}}init(ye,ge){be(this,"init",{args:arguments},function(){let Me=ee(C,ye),De=Me.chart;this.userOptions=le({},ye),this.margin=[],this.spacing=[],this.labelCollectors=[],this.callback=ge,this.isResizing=0,this.options=Me,this.axes=[],this.series=[],this.time=ye.time&&Object.keys(ye.time).length?new v(ye.time):f.time,this.numberFormatter=De.numberFormatter||N,this.styledMode=De.styledMode,this.hasCartesianSeries=De.showAxes,this.index=Y.length,Y.push(this),f.chartCount++,W(this,De),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,this.setZoomOptions(),be(this,"afterInit"),this.firstRender()})}initSeries(ye){let ge=this.options.chart,Me=ye.type||ge.type,De=L[Me];De||ne(17,!0,this,{missingModuleFor:Me});let Pe=new De;return typeof Pe.init=="function"&&Pe.init(this,ye),Pe}setSortedData(){this.getSeriesOrderByLinks().forEach(function(ye){ye.points||ye.data||!ye.enabledDataSorting||ye.setData(ye.options.data,!1)})}getSeriesOrderByLinks(){return this.series.concat().sort(function(ye,ge){return ye.linkedSeries.length||ge.linkedSeries.length?ge.linkedSeries.length-ye.linkedSeries.length:0})}orderItems(ye,ge=0){let Me=this[ye],De=this.options[ye]=Ce(this.options[ye]).slice(),Pe=this.userOptions[ye]=this.userOptions[ye]?Ce(this.userOptions[ye]).slice():[];if(this.hasRendered&&(De.splice(ge),Pe.splice(ge)),Me)for(let Fe=ge,Xe=Me.length;Fe<Xe;++Fe){let tt=Me[Fe];tt&&(tt.index=Fe,tt instanceof b&&(tt.name=tt.getName()),tt.options.isInternal||(De[Fe]=tt.options,Pe[Fe]=tt.userOptions))}}isInsidePlot(ye,ge,Me={}){var Ct;let{inverted:De,plotBox:Pe,plotLeft:Fe,plotTop:Xe,scrollablePlotBox:tt}=this,{scrollLeft:nt=0,scrollTop:ht=0}=Me.visiblePlotOnly&&((Ct=this.scrollablePlotArea)==null?void 0:Ct.scrollingContainer)||{},gt=Me.series,Tt=Me.visiblePlotOnly&&tt||Pe,Lt=Me.inverted?ge:ye,ft=Me.inverted?ye:ge,Et={x:Lt,y:ft,isInsidePlot:!0,options:Me};if(!Me.ignoreX){let si=gt&&(De&&!this.polar?gt.yAxis:gt.xAxis)||{pos:Fe,len:1/0},di=Me.paneCoordinates?si.pos+Lt:Fe+Lt;di>=Math.max(nt+Fe,si.pos)&&di<=Math.min(nt+Fe+Tt.width,si.pos+si.len)||(Et.isInsidePlot=!1)}if(!Me.ignoreY&&Et.isInsidePlot){let si=!De&&Me.axis&&!Me.axis.isXAxis&&Me.axis||gt&&(De?gt.xAxis:gt.yAxis)||{pos:Xe,len:1/0},di=Me.paneCoordinates?si.pos+ft:Xe+ft;di>=Math.max(ht+Xe,si.pos)&&di<=Math.min(ht+Xe+Tt.height,si.pos+si.len)||(Et.isInsidePlot=!1)}return be(this,"afterIsInsidePlot",Et),Et.isInsidePlot}redraw(ye){be(this,"beforeRedraw");let ge=this.hasCartesianSeries?this.axes:this.colorAxis||[],Me=this.series,De=this.pointer,Pe=this.legend,Fe=this.userOptions.legend,Xe=this.renderer,tt=Xe.isHidden(),nt=[],ht,gt,Tt,Lt=this.isDirtyBox,ft=this.isDirtyLegend,Et;for(Xe.rootFontSize=Xe.boxWrapper.getStyle("font-size"),this.setResponsive&&this.setResponsive(!1),D(!!this.hasRendered&&ye,this),tt&&this.temporaryDisplay(),this.layOutTitles(!1),Tt=Me.length;Tt--;)if(((Et=Me[Tt]).options.stacking||Et.options.centerInCategory)&&(gt=!0,Et.isDirty)){ht=!0;break}if(ht)for(Tt=Me.length;Tt--;)(Et=Me[Tt]).options.stacking&&(Et.isDirty=!0);Me.forEach(function(Ct){Ct.isDirty&&(Ct.options.legendType==="point"?(typeof Ct.updateTotals=="function"&&Ct.updateTotals(),ft=!0):Fe&&(Fe.labelFormatter||Fe.labelFormat)&&(ft=!0)),Ct.isDirtyData&&be(Ct,"updatedData")}),ft&&Pe&&Pe.options.enabled&&(Pe.render(),this.isDirtyLegend=!1),gt&&this.getStacks(),ge.forEach(function(Ct){Ct.updateNames(),Ct.setScale()}),this.getMargins(),ge.forEach(function(Ct){Ct.isDirty&&(Lt=!0)}),ge.forEach(function(Ct){let si=Ct.min+","+Ct.max;Ct.extKey!==si&&(Ct.extKey=si,nt.push(function(){be(Ct,"afterSetExtremes",le(Ct.eventArgs,Ct.getExtremes())),delete Ct.eventArgs})),(Lt||gt)&&Ct.redraw()}),Lt&&this.drawChartBox(),be(this,"predraw"),Me.forEach(function(Ct){(Lt||Ct.isDirty)&&Ct.visible&&Ct.redraw(),Ct.isDirtyData=!1}),De&&De.reset(!0),Xe.draw(),be(this,"redraw"),be(this,"render"),tt&&this.temporaryDisplay(!0),nt.forEach(function(Ct){Ct.call()})}get(ye){let ge=this.series;function Me(Pe){return Pe.id===ye||Pe.options&&Pe.options.id===ye}let De=ke(this.axes,Me)||ke(this.series,Me);for(let Pe=0;!De&&Pe<ge.length;Pe++)De=ke(ge[Pe].points||[],Me);return De}getAxes(){let ye=this.userOptions;for(let ge of(be(this,"getAxes"),["xAxis","yAxis"]))for(let Me of ye[ge]=Ce(ye[ge]||{}))new l(this,Me,ge);be(this,"afterGetAxes")}getSelectedPoints(){return this.series.reduce((ye,ge)=>(ge.getPointsCollection().forEach(Me=>{ue(Me.selectedStaging,Me.selected)&&ye.push(Me)}),ye),[])}getSelectedSeries(){return this.series.filter(function(ye){return ye.selected})}setTitle(ye,ge,Me){this.applyDescription("title",ye),this.applyDescription("subtitle",ge),this.applyDescription("caption",void 0),this.layOutTitles(Me)}applyDescription(ye,ge){let Me=this,De=this.options[ye]=ee(this.options[ye],ge),Pe=this[ye];Pe&&ge&&(this[ye]=Pe=Pe.destroy()),De&&!Pe&&((Pe=this.renderer.text(De.text,0,0,De.useHTML).attr({align:De.align,class:"highcharts-"+ye,zIndex:De.zIndex||4}).add()).update=function(Fe,Xe){Me.applyDescription(ye,Fe),Me.layOutTitles(Xe)},this.styledMode||Pe.css(le(ye==="title"?{fontSize:this.options.isStock?"1em":"1.2em"}:{},De.style)),this[ye]=Pe)}layOutTitles(ye=!0){let ge=[0,0,0],Me=this.renderer,De=this.spacingBox;["title","subtitle","caption"].forEach(function(Fe){let Xe=this[Fe],tt=this.options[Fe],nt=tt.verticalAlign||"top",ht=Fe==="title"?nt==="top"?-3:0:nt==="top"?ge[0]+2:0;if(Xe){Xe.css({width:(tt.width||De.width+(tt.widthAdjust||0))+"px"});let gt=Me.fontMetrics(Xe).b,Tt=Math.round(Xe.getBBox(tt.useHTML).height);Xe.align(le({y:nt==="bottom"?gt:ht+gt,height:Tt},tt),!1,"spacingBox"),tt.floating||(nt==="top"?ge[0]=Math.ceil(ge[0]+Tt):nt==="bottom"&&(ge[2]=Math.ceil(ge[2]+Tt)))}},this),ge[0]&&(this.options.title.verticalAlign||"top")==="top"&&(ge[0]+=this.options.title.margin),ge[2]&&this.options.caption.verticalAlign==="bottom"&&(ge[2]+=this.options.caption.margin);let Pe=!this.titleOffset||this.titleOffset.join(",")!==ge.join(",");this.titleOffset=ge,be(this,"afterLayOutTitles"),!this.isDirtyBox&&Pe&&(this.isDirtyBox=this.isDirtyLegend=Pe,this.hasRendered&&ye&&this.isDirtyBox&&this.redraw())}getContainerBox(){let ye=[].map.call(this.renderTo.children,Me=>{if(Me!==this.container){let De=Me.style.display;return Me.style.display="none",[Me,De]}}),ge={width:Ee(this.renderTo,"width",!0)||0,height:Ee(this.renderTo,"height",!0)||0};return ye.filter(Boolean).forEach(([Me,De])=>{Me.style.display=De}),ge}getChartSize(){var Fe;let ye=this.options.chart,ge=ye.width,Me=ye.height,De=this.getContainerBox(),Pe=De.height>1&&!(!((Fe=this.renderTo.parentElement)!=null&&Fe.style.height)&&this.renderTo.style.height==="100%");this.chartWidth=Math.max(0,ge||De.width||600),this.chartHeight=Math.max(0,Te(Me,this.chartWidth)||(Pe?De.height:400)),this.containerBox=De}temporaryDisplay(ye){let ge=this.renderTo,Me;if(ye)for(;ge&&ge.style;)ge.hcOrigStyle&&(B(ge,ge.hcOrigStyle),delete ge.hcOrigStyle),ge.hcOrigDetached&&(X.body.removeChild(ge),ge.hcOrigDetached=!1),ge=ge.parentNode;else for(;ge&&ge.style&&(X.body.contains(ge)||ge.parentNode||(ge.hcOrigDetached=!0,X.body.appendChild(ge)),(Ee(ge,"display",!1)==="none"||ge.hcOricDetached)&&(ge.hcOrigStyle={display:ge.style.display,height:ge.style.height,overflow:ge.style.overflow},Me={display:"block",overflow:"hidden"},ge!==this.renderTo&&(Me.height=0),B(ge,Me),ge.offsetWidth||ge.style.setProperty("display","block","important")),(ge=ge.parentNode)!==X.body););}setClassName(ye){this.container.className="highcharts-container "+(ye||"")}getContainer(){var Tt;let ye=this.options,ge=ye.chart,Me="data-highcharts-chart",De=Be(),Pe,Fe=this.renderTo;Fe||(this.renderTo=Fe=ge.renderTo),we(Fe)&&(this.renderTo=Fe=X.getElementById(Fe)),Fe||ne(13,!0,this);let Xe=xe(G(Fe,Me));J(Xe)&&Y[Xe]&&Y[Xe].hasRendered&&Y[Xe].destroy(),G(Fe,Me,this.index),Fe.innerHTML=S.emptyHTML,ge.skipClone||Fe.offsetWidth||this.temporaryDisplay(),this.getChartSize();let tt=this.chartHeight,nt=this.chartWidth;B(Fe,{overflow:"hidden"}),this.styledMode||(Pe=le({position:"relative",overflow:"hidden",width:nt+"px",height:tt+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none",padding:"0px"},ge.style||{}));let ht=U("div",{id:De},Pe,Fe);this.container=ht,this.getChartSize(),nt===this.chartWidth||(nt=this.chartWidth,this.styledMode||B(ht,{width:ue((Tt=ge.style)==null?void 0:Tt.width,nt+"px")})),this.containerBox=this.getContainerBox(),this._cursor=ht.style.cursor;let gt=ge.renderer||!V?g.getRendererType(ge.renderer):w;if(this.renderer=new gt(ht,nt,tt,void 0,ge.forExport,ye.exporting&&ye.exporting.allowHTML,this.styledMode),D(void 0,this),this.setClassName(ge.className),this.styledMode)for(let Lt in ye.defs)this.renderer.definition(ye.defs[Lt]);else this.renderer.setStyle(ge.style);this.renderer.chartIndex=this.index,be(this,"afterGetContainer")}getMargins(ye){let{spacing:ge,margin:Me,titleOffset:De}=this;this.resetMargins(),De[0]&&!H(Me[0])&&(this.plotTop=Math.max(this.plotTop,De[0]+ge[0])),De[2]&&!H(Me[2])&&(this.marginBottom=Math.max(this.marginBottom,De[2]+ge[2])),this.legend&&this.legend.display&&this.legend.adjustMargins(Me,ge),be(this,"getMargins"),ye||this.getAxisMargins()}getAxisMargins(){let ye=this,ge=ye.axisOffset=[0,0,0,0],Me=ye.colorAxis,De=ye.margin,Pe=function(Fe){Fe.forEach(function(Xe){Xe.visible&&Xe.getOffset()})};ye.hasCartesianSeries?Pe(ye.axes):Me&&Me.length&&Pe(Me),O.forEach(function(Fe,Xe){H(De[Xe])||(ye[Fe]+=ge[Xe])}),ye.setChartSize()}getOptions(){return q(this.userOptions,C)}reflow(ye){var Pe;let ge=this,Me=ge.containerBox,De=ge.getContainerBox();(Pe=ge.pointer)==null||delete Pe.chartPosition,!ge.isPrinting&&!ge.isResizing&&Me&&De.width&&((De.width!==Me.width||De.height!==Me.height)&&(T.clearTimeout(ge.reflowTimeout),ge.reflowTimeout=Ie(function(){ge.container&&ge.setSize(void 0,void 0,!1)},ye?100:0)),ge.containerBox=De)}setReflow(){let ye=this,ge=Me=>{var De;(De=ye.options)!=null&&De.chart.reflow&&ye.hasLoaded&&ye.reflow(Me)};if(typeof ResizeObserver=="function")new ResizeObserver(ge).observe(ye.renderTo);else{let Me=R($,"resize",ge);R(this,"destroy",Me)}}setSize(ye,ge,Me){let De=this,Pe=De.renderer;De.isResizing+=1,D(Me,De);let Fe=Pe.globalAnimation;De.oldChartHeight=De.chartHeight,De.oldChartWidth=De.chartWidth,ye!==void 0&&(De.options.chart.width=ye),ge!==void 0&&(De.options.chart.height=ge),De.getChartSize();let{chartWidth:Xe,chartHeight:tt,scrollablePixelsX:nt=0,scrollablePixelsY:ht=0}=De;(De.isDirtyBox||Xe!==De.oldChartWidth||tt!==De.oldChartHeight)&&(De.styledMode||(Fe?x:B)(De.container,{width:`${Xe+nt}px`,height:`${tt+ht}px`},Fe),De.setChartSize(!0),Pe.setSize(Xe,tt,Fe),De.axes.forEach(function(gt){gt.isDirty=!0,gt.setScale()}),De.isDirtyLegend=!0,De.isDirtyBox=!0,De.layOutTitles(),De.getMargins(),De.redraw(Fe),De.oldChartHeight=void 0,be(De,"resize"),setTimeout(()=>{De&&be(De,"endResize")},A(Fe).duration)),De.isResizing-=1}setChartSize(ye){let ge,Me,De,Pe,{chartHeight:Fe,chartWidth:Xe,inverted:tt,spacing:nt,renderer:ht}=this,gt=this.clipOffset,Tt=Math[tt?"floor":"round"];this.plotLeft=ge=Math.round(this.plotLeft),this.plotTop=Me=Math.round(this.plotTop),this.plotWidth=De=Math.max(0,Math.round(Xe-ge-this.marginRight)),this.plotHeight=Pe=Math.max(0,Math.round(Fe-Me-this.marginBottom)),this.plotSizeX=tt?Pe:De,this.plotSizeY=tt?De:Pe,this.spacingBox=ht.spacingBox={x:nt[3],y:nt[0],width:Xe-nt[3]-nt[1],height:Fe-nt[0]-nt[2]},this.plotBox=ht.plotBox={x:ge,y:Me,width:De,height:Pe},gt&&(this.clipBox={x:Tt(gt[3]),y:Tt(gt[0]),width:Tt(this.plotSizeX-gt[1]-gt[3]),height:Tt(this.plotSizeY-gt[0]-gt[2])}),ye||(this.axes.forEach(function(Lt){Lt.setAxisSize(),Lt.setAxisTranslation()}),ht.alignElements()),be(this,"afterSetChartSize",{skipAxes:ye})}resetMargins(){be(this,"resetMargins");let ye=this,ge=ye.options.chart,Me=ge.plotBorderWidth||0,De=Me/2;["margin","spacing"].forEach(function(Pe){let Fe=ge[Pe],Xe=oe(Fe)?Fe:[Fe,Fe,Fe,Fe];["Top","Right","Bottom","Left"].forEach(function(tt,nt){ye[Pe][nt]=ue(ge[Pe+tt],Xe[nt])})}),O.forEach(function(Pe,Fe){ye[Pe]=ue(ye.margin[Fe],ye.spacing[Fe])}),ye.axisOffset=[0,0,0,0],ye.clipOffset=[De,De,De,De],ye.plotBorderWidth=Me}drawChartBox(){let ye=this.options.chart,ge=this.renderer,Me=this.chartWidth,De=this.chartHeight,Pe=this.styledMode,Fe=this.plotBGImage,Xe=ye.backgroundColor,tt=ye.plotBackgroundColor,nt=ye.plotBackgroundImage,ht=this.plotLeft,gt=this.plotTop,Tt=this.plotWidth,Lt=this.plotHeight,ft=this.plotBox,Et=this.clipRect,Ct=this.clipBox,si=this.chartBackground,di=this.plotBackground,qt=this.plotBorder,cn,Xi,xn,Fn="animate";si||(this.chartBackground=si=ge.rect().addClass("highcharts-background").add(),Fn="attr"),Pe?cn=Xi=si.strokeWidth():(Xi=(cn=ye.borderWidth||0)+(ye.shadow?8:0),xn={fill:Xe||"none"},(cn||si["stroke-width"])&&(xn.stroke=ye.borderColor,xn["stroke-width"]=cn),si.attr(xn).shadow(ye.shadow)),si[Fn]({x:Xi/2,y:Xi/2,width:Me-Xi-cn%2,height:De-Xi-cn%2,r:ye.borderRadius}),Fn="animate",di||(Fn="attr",this.plotBackground=di=ge.rect().addClass("highcharts-plot-background").add()),di[Fn](ft),!Pe&&(di.attr({fill:tt||"none"}).shadow(ye.plotShadow),nt&&(Fe?(nt!==Fe.attr("href")&&Fe.attr("href",nt),Fe.animate(ft)):this.plotBGImage=ge.image(nt,ht,gt,Tt,Lt).add())),Et?Et.animate({width:Ct.width,height:Ct.height}):this.clipRect=ge.clipRect(Ct),Fn="animate",qt||(Fn="attr",this.plotBorder=qt=ge.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),Pe||qt.attr({stroke:ye.plotBorderColor,"stroke-width":ye.plotBorderWidth||0,fill:"none"}),qt[Fn](qt.crisp({x:ht,y:gt,width:Tt,height:Lt},-qt.strokeWidth())),this.isDirtyBox=!1,be(this,"afterDrawChartBox")}propFromSeries(){let ye,ge,Me,De=this,Pe=De.options.chart,Fe=De.options.series;["inverted","angular","polar"].forEach(function(Xe){for(ge=L[Pe.type],Me=Pe[Xe]||ge&&ge.prototype[Xe],ye=Fe&&Fe.length;!Me&&ye--;)(ge=L[Fe[ye].type])&&ge.prototype[Xe]&&(Me=!0);De[Xe]=Me})}linkSeries(ye){let ge=this,Me=ge.series;Me.forEach(function(De){De.linkedSeries.length=0}),Me.forEach(function(De){let{linkedTo:Pe}=De.options;if(we(Pe)){let Fe;(Fe=Pe===":previous"?ge.series[De.index-1]:ge.get(Pe))&&Fe.linkedParent!==De&&(Fe.linkedSeries.push(De),De.linkedParent=Fe,Fe.enabledDataSorting&&De.setDataSortingOptions(),De.visible=ue(De.options.visible,Fe.options.visible,De.visible))}}),be(this,"afterLinkSeries",{isUpdating:ye})}renderSeries(){this.series.forEach(function(ye){ye.translate(),ye.render()})}render(){var ht;let ye=this.axes,ge=this.colorAxis,Me=this.renderer,De=this.options.chart.axisLayoutRuns||2,Pe=gt=>{gt.forEach(Tt=>{Tt.visible&&Tt.render()})},Fe=0,Xe=!0,tt,nt=0;for(let gt of(this.setTitle(),be(this,"beforeMargins"),(ht=this.getStacks)==null||ht.call(this),this.getMargins(!0),this.setChartSize(),ye)){let{options:Tt}=gt,{labels:Lt}=Tt;if(this.hasCartesianSeries&&gt.horiz&&gt.visible&&Lt.enabled&&gt.series.length&&gt.coll!=="colorAxis"&&!this.polar){Fe=Tt.tickLength,gt.createGroups();let ft=new E(gt,0,"",!0),Et=ft.createLabel("x",Lt);if(ft.destroy(),Et&&ue(Lt.reserveSpace,!J(Tt.crossing))&&(Fe=Et.getBBox().height+Lt.distance+Math.max(Tt.offset||0,0)),Fe){Et==null||Et.destroy();break}}}for(this.plotHeight=Math.max(this.plotHeight-Fe,0);(Xe||tt||De>1)&&nt<De;){let gt=this.plotWidth,Tt=this.plotHeight;for(let Lt of ye)nt===0?Lt.setScale():(Lt.horiz&&Xe||!Lt.horiz&&tt)&&Lt.setTickInterval(!0);nt===0?this.getAxisMargins():this.getMargins(),Xe=gt/this.plotWidth>(nt?1:1.1),tt=Tt/this.plotHeight>(nt?1:1.05),nt++}this.drawChartBox(),this.hasCartesianSeries?Pe(ye):ge&&ge.length&&Pe(ge),this.seriesGroup||(this.seriesGroup=Me.g("series-group").attr({zIndex:3}).shadow(this.options.chart.seriesGroupShadow).add()),this.renderSeries(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0}addCredits(ye){let ge=this,Me=ee(!0,this.options.credits,ye);Me.enabled&&!this.credits&&(this.credits=this.renderer.text(Me.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){Me.href&&($.location.href=Me.href)}).attr({align:Me.position.align,zIndex:8}),ge.styledMode||this.credits.css(Me.style),this.credits.add().align(Me.position),this.credits.update=function(De){ge.credits=ge.credits.destroy(),ge.addCredits(De)})}destroy(){let ye,ge=this,Me=ge.axes,De=ge.series,Pe=ge.container,Fe=Pe&&Pe.parentNode;for(be(ge,"destroy"),ge.renderer.forExport?pe(Y,ge):Y[ge.index]=void 0,f.chartCount--,ge.renderTo.removeAttribute("data-highcharts-chart"),ze(ge),ye=Me.length;ye--;)Me[ye]=Me[ye].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),ye=De.length;ye--;)De[ye]=De[ye].destroy();["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","rangeSelector","legend","resetZoomButton","tooltip","renderer"].forEach(function(Xe){let tt=ge[Xe];tt&&tt.destroy&&(ge[Xe]=tt.destroy())}),Pe&&(Pe.innerHTML=S.emptyHTML,ze(Pe),Fe&&se(Pe)),re(ge,function(Xe,tt){delete ge[tt]})}firstRender(){var De;let ye=this,ge=ye.options;ye.getContainer(),ye.resetMargins(),ye.setChartSize(),ye.propFromSeries(),ye.getAxes();let Me=K(ge.series)?ge.series:[];ge.series=[],Me.forEach(function(Pe){ye.initSeries(Pe)}),ye.linkSeries(),ye.setSortedData(),be(ye,"beforeRender"),ye.render(),(De=ye.pointer)==null||De.getChartPosition(),ye.renderer.imgCount||ye.hasLoaded||ye.onload(),ye.temporaryDisplay(!0)}onload(){this.callbacks.concat([this.callback]).forEach(function(ye){ye&&this.index!==void 0&&ye.apply(this,[this])},this),be(this,"load"),be(this,"render"),H(this.index)&&this.setReflow(),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0}warnIfA11yModuleNotLoaded(){let{options:ye,title:ge}=this;!ye||this.accessibility||(this.renderer.boxWrapper.attr({role:"img","aria-label":(ge&&ge.element.textContent||"").replace(/</g,"&lt;")}),ye.accessibility&&ye.accessibility.enabled===!1||ne('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))}addSeries(ye,ge,Me){let De,Pe=this;return ye&&(ge=ue(ge,!0),be(Pe,"addSeries",{options:ye},function(){De=Pe.initSeries(ye),Pe.isDirtyLegend=!0,Pe.linkSeries(),De.enabledDataSorting&&De.setData(ye.data,!1),be(Pe,"afterAddSeries",{series:De}),ge&&Pe.redraw(Me)})),De}addAxis(ye,ge,Me,De){return this.createAxis(ge?"xAxis":"yAxis",{axis:ye,redraw:Me,animation:De})}addColorAxis(ye,ge,Me){return this.createAxis("colorAxis",{axis:ye,redraw:ge,animation:Me})}createAxis(ye,ge){let Me=new l(this,ge.axis,ye);return ue(ge.redraw,!0)&&this.redraw(ge.animation),Me}showLoading(ye){let ge=this,Me=ge.options,De=Me.loading,Pe=function(){Fe&&B(Fe,{left:ge.plotLeft+"px",top:ge.plotTop+"px",width:ge.plotWidth+"px",height:ge.plotHeight+"px"})},Fe=ge.loadingDiv,Xe=ge.loadingSpan;Fe||(ge.loadingDiv=Fe=U("div",{className:"highcharts-loading highcharts-loading-hidden"},null,ge.container)),Xe||(ge.loadingSpan=Xe=U("span",{className:"highcharts-loading-inner"},null,Fe),R(ge,"redraw",Pe)),Fe.className="highcharts-loading",S.setElementHTML(Xe,ue(ye,Me.lang.loading,"")),ge.styledMode||(B(Fe,le(De.style,{zIndex:10})),B(Xe,De.labelStyle),ge.loadingShown||(B(Fe,{opacity:0,display:""}),x(Fe,{opacity:De.style.opacity||.5},{duration:De.showDuration||0}))),ge.loadingShown=!0,Pe()}hideLoading(){let ye=this.options,ge=this.loadingDiv;ge&&(ge.className="highcharts-loading highcharts-loading-hidden",this.styledMode||x(ge,{opacity:0},{duration:ye.loading.hideDuration||100,complete:function(){B(ge,{display:"none"})}})),this.loadingShown=!1}update(ye,ge,Me,De){let Pe,Fe,Xe,tt=this,nt={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},ht=ye.isResponsiveOptions,gt=[];be(tt,"update",{options:ye}),ht||tt.setResponsive(!1,!0),ye=q(ye,tt.options),tt.userOptions=ee(tt.userOptions,ye);let Tt=ye.chart;Tt&&(ee(!0,tt.options.chart,Tt),this.setZoomOptions(),"className"in Tt&&tt.setClassName(Tt.className),("inverted"in Tt||"polar"in Tt||"type"in Tt)&&(tt.propFromSeries(),Pe=!0),"alignTicks"in Tt&&(Pe=!0),"events"in Tt&&W(this,Tt),re(Tt,function(Et,Ct){tt.propsRequireUpdateSeries.indexOf("chart."+Ct)!==-1&&(Fe=!0),tt.propsRequireDirtyBox.indexOf(Ct)!==-1&&(tt.isDirtyBox=!0),tt.propsRequireReflow.indexOf(Ct)===-1||(tt.isDirtyBox=!0,ht||(Xe=!0))}),!tt.styledMode&&Tt.style&&tt.renderer.setStyle(tt.options.chart.style||{})),!tt.styledMode&&ye.colors&&(this.options.colors=ye.colors),ye.time&&(this.time===I&&(this.time=new v(ye.time)),ee(!0,tt.options.time,ye.time)),re(ye,function(Et,Ct){tt[Ct]&&typeof tt[Ct].update=="function"?tt[Ct].update(Et,!1):typeof tt[nt[Ct]]=="function"?tt[nt[Ct]](Et):Ct!=="colors"&&tt.collectionsWithUpdate.indexOf(Ct)===-1&&ee(!0,tt.options[Ct],ye[Ct]),Ct!=="chart"&&tt.propsRequireUpdateSeries.indexOf(Ct)!==-1&&(Fe=!0)}),this.collectionsWithUpdate.forEach(function(Et){ye[Et]&&(Ce(ye[Et]).forEach(function(Ct,si){let di,qt=H(Ct.id);qt&&(di=tt.get(Ct.id)),!di&&tt[Et]&&(di=tt[Et][ue(Ct.index,si)])&&(qt&&H(di.options.id)||di.options.isInternal)&&(di=void 0),di&&di.coll===Et&&(di.update(Ct,!1),Me&&(di.touched=!0)),!di&&Me&&tt.collectionsWithInit[Et]&&(tt.collectionsWithInit[Et][0].apply(tt,[Ct].concat(tt.collectionsWithInit[Et][1]||[]).concat([!1])).touched=!0)}),Me&&tt[Et].forEach(function(Ct){Ct.touched||Ct.options.isInternal?delete Ct.touched:gt.push(Ct)}))}),gt.forEach(function(Et){Et.chart&&Et.remove&&Et.remove(!1)}),Pe&&tt.axes.forEach(function(Et){Et.update({},!1)}),Fe&&tt.getSeriesOrderByLinks().forEach(function(Et){Et.chart&&Et.update({},!1)},this);let Lt=Tt&&Tt.width,ft=Tt&&(we(Tt.height)?Te(Tt.height,Lt||tt.chartWidth):Tt.height);Xe||J(Lt)&&Lt!==tt.chartWidth||J(ft)&&ft!==tt.chartHeight?tt.setSize(Lt,ft,De):ue(ge,!0)&&tt.redraw(De),be(tt,"afterUpdate",{options:ye,redraw:ge,animation:De})}setSubtitle(ye,ge){this.applyDescription("subtitle",ye),this.layOutTitles(ge)}setCaption(ye,ge){this.applyDescription("caption",ye),this.layOutTitles(ge)}showResetZoom(){let ye=this,ge=C.lang,Me=ye.zooming.resetButton,De=Me.theme,Pe=Me.relativeTo==="chart"||Me.relativeTo==="spacingBox"?null:"plotBox";function Fe(){ye.zoomOut()}be(this,"beforeShowResetZoom",null,function(){ye.resetZoomButton=ye.renderer.button(ge.resetZoom,null,null,Fe,De).attr({align:Me.position.align,title:ge.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(Me.position,!1,Pe)}),be(this,"afterShowResetZoom")}zoomOut(){be(this,"selection",{resetSelection:!0},()=>this.transform({reset:!0,trigger:"zoom"}))}pan(ye,ge){let Me=this,De=typeof ge=="object"?ge:{enabled:ge,type:"x"},Pe=De.type,Fe=Pe&&Me[{x:"xAxis",xy:"axes",y:"yAxis"}[Pe]].filter(tt=>tt.options.panningEnabled&&!tt.options.isInternal),Xe=Me.options.chart;Xe!=null&&Xe.panning&&(Xe.panning=De),be(this,"pan",{originalEvent:ye},()=>{Me.transform({axes:Fe,event:ye,to:{x:ye.chartX-(Me.mouseDownX||0),y:ye.chartY-(Me.mouseDownY||0)},trigger:"pan"}),B(Me.container,{cursor:"move"})})}transform(ye){var Lt;let{axes:ge=this.axes,event:Me,from:De={},reset:Pe,selection:Fe,to:Xe={},trigger:tt}=ye,{inverted:nt}=this,ht=!1,gt,Tt;for(let ft of((Lt=this.hoverPoints)==null||Lt.forEach(Et=>Et.setState()),ge)){let{horiz:Et,len:Ct,minPointOffset:si=0,options:di,reversed:qt}=ft,cn=Et?"width":"height",Xi=Et?"x":"y",xn=ue(Xe[cn],ft.len),Fn=ue(De[cn],ft.len),sn=10>Math.abs(xn)?1:xn/Fn,dt=(De[Xi]||0)+Fn/2-ft.pos,bt=dt-((Xe[Xi]??ft.pos)+xn/2-ft.pos)/sn,It=qt&&!nt||!qt&&nt?-1:1;if(!Pe&&(dt<0||dt>ft.len))continue;let Ft=ft.toValue(bt,!0)+(Fe||ft.isOrdinal?0:si*It),Yt=ft.toValue(bt+Ct/sn,!0)-(Fe||ft.isOrdinal?0:si*It||0),bi=ft.allExtremes;if(Ft>Yt&&([Ft,Yt]=[Yt,Ft]),sn===1&&!Pe&&ft.coll==="yAxis"&&!bi){for(let Nt of ft.series){let Rt=Nt.getExtremes(Nt.getProcessedData(!0).yData,!0);bi??(bi={dataMin:Number.MAX_VALUE,dataMax:-Number.MAX_VALUE}),J(Rt.dataMin)&&J(Rt.dataMax)&&(bi.dataMin=Math.min(Rt.dataMin,bi.dataMin),bi.dataMax=Math.max(Rt.dataMax,bi.dataMax))}ft.allExtremes=bi}let{dataMin:Oi,dataMax:hi,min:qe,max:ve}=le(ft.getExtremes(),bi||{}),Le=Oi??di.min,Ve=hi??di.max,Ke=Yt-Ft,st=ft.categories?0:Math.min(Ke,Ve-Le),ct=Le-st*(H(di.min)?0:di.minPadding),ot=Ve+st*(H(di.max)?0:di.maxPadding),rt=ft.allowZoomOutside||sn===1||tt!=="zoom"&&sn>1,mt=Math.min(di.min??ct,ct,rt?qe:ct),At=Math.max(di.max??ot,ot,rt?ve:ot);(!ft.isOrdinal||ft.options.overscroll||sn!==1||Pe)&&(Ft<mt&&(Ft=mt,sn>=1&&(Yt=Ft+Ke)),Yt>At&&(Yt=At,sn>=1&&(Ft=Yt-Ke)),(Pe||ft.series.length&&(Ft!==qe||Yt!==ve)&&Ft>=mt&&Yt<=At)&&(Fe?Fe[ft.coll].push({axis:ft,min:Ft,max:Yt}):(ft.isPanning=tt!=="zoom",ft.isPanning&&(Tt=!0),ft.setExtremes(Pe?void 0:Ft,Pe?void 0:Yt,!1,!1,{move:bt,trigger:tt,scale:sn}),!Pe&&(Ft>mt||Yt<At)&&tt!=="mousewheel"&&(gt=!0)),ht=!0),Me&&(this[Et?"mouseDownX":"mouseDownY"]=Me[Et?"chartX":"chartY"]))}return ht&&(Fe?be(this,"selection",Fe,()=>{delete ye.selection,ye.trigger="zoom",this.transform(ye)}):(!gt||Tt||this.resetZoomButton?!gt&&this.resetZoomButton&&(this.resetZoomButton=this.resetZoomButton.destroy()):this.showResetZoom(),this.redraw(tt==="zoom"&&(this.options.chart.animation??this.pointCount<100)))),ht}}return le(He.prototype,{callbacks:[],collectionsWithInit:{xAxis:[He.prototype.addAxis,[!0]],yAxis:[He.prototype.addAxis,[!1]],series:[He.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:["backgroundColor","borderColor","borderWidth","borderRadius","plotBackgroundColor","plotBackgroundImage","plotBorderColor","plotBorderWidth","plotShadow","shadow"],propsRequireReflow:["margin","marginTop","marginRight","marginBottom","marginLeft","spacing","spacingTop","spacingRight","spacingBottom","spacingLeft"],propsRequireUpdateSeries:["chart.inverted","chart.polar","chart.ignoreHiddenSeries","chart.type","colors","plotOptions","time","tooltip"]}),He}),n(t,"Extensions/ScrollablePlotArea.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{stop:p}=s,{composed:f}=l,{addEvent:g,createElement:b,css:y,defined:w,merge:v,pushUnique:T}=r;function S(){let A=this.scrollablePlotArea;(this.scrollablePixelsX||this.scrollablePixelsY)&&!A&&(this.scrollablePlotArea=A=new x(this)),A==null||A.applyFixed()}function E(){this.chart.scrollablePlotArea&&(this.chart.scrollablePlotArea.isDirty=!0)}class x{static compose(D,C,I){T(f,this.compose)&&(g(D,"afterInit",E),g(C,"afterSetChartSize",N=>this.afterSetSize(N.target,N)),g(C,"render",S),g(I,"show",E))}static afterSetSize(D,C){let I,N,W,{minWidth:Y,minHeight:X}=D.options.chart.scrollablePlotArea||{},{clipBox:O,plotBox:V,inverted:$,renderer:L}=D;if(!L.forExport&&(Y?(D.scrollablePixelsX=I=Math.max(0,Y-D.chartWidth),I&&(D.scrollablePlotBox=v(D.plotBox),V.width=D.plotWidth+=I,O[$?"height":"width"]+=I,W=!0)):X&&(D.scrollablePixelsY=N=Math.max(0,X-D.chartHeight),w(N)&&(D.scrollablePlotBox=v(D.plotBox),V.height=D.plotHeight+=N,O[$?"width":"height"]+=N,W=!1)),w(W)&&!C.skipAxes))for(let R of D.axes)R.horiz===W&&(R.setAxisSize(),R.setAxisTranslation())}constructor(D){var G;let C,I=D.options.chart,N=u.getRendererType(),W=I.scrollablePlotArea||{},Y=this.moveFixedElements.bind(this),X={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};D.scrollablePixelsX&&(X.overflowX="auto"),D.scrollablePixelsY&&(X.overflowY="auto"),this.chart=D;let O=this.parentDiv=b("div",{className:"highcharts-scrolling-parent"},{position:"relative"},D.renderTo),V=this.scrollingContainer=b("div",{className:"highcharts-scrolling"},X,O),$=this.innerContainer=b("div",{className:"highcharts-inner-container"},void 0,V),L=this.fixedDiv=b("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(((G=I.style)==null?void 0:G.zIndex)||0)+2,top:0},void 0,!0),R=this.fixedRenderer=new N(L,D.chartWidth,D.chartHeight,I.style);this.mask=R.path().attr({fill:I.backgroundColor||"#fff","fill-opacity":W.opacity??.85,zIndex:-1}).addClass("highcharts-scrollable-mask").add(),V.parentNode.insertBefore(L,V),y(D.renderTo,{overflow:"visible"}),g(D,"afterShowResetZoom",Y),g(D,"afterApplyDrilldown",Y),g(D,"afterLayOutTitles",Y),g(V,"scroll",()=>{let{pointer:U,hoverPoint:B}=D;U&&(delete U.chartPosition,B&&(C=B),U.runPointActions(void 0,C,!0))}),$.appendChild(D.container)}applyFixed(){var J;let{chart:D,fixedRenderer:C,isDirty:I,scrollingContainer:N}=this,{axisOffset:W,chartWidth:Y,chartHeight:X,container:O,plotHeight:V,plotLeft:$,plotTop:L,plotWidth:R,scrollablePixelsX:G=0,scrollablePixelsY:U=0}=D,{scrollPositionX:B=0,scrollPositionY:H=0}=D.options.chart.scrollablePlotArea||{},q=Y+G,se=X+U;C.setSize(Y,X),(I??!0)&&(this.isDirty=!1,this.moveFixedElements()),p(D.container),y(O,{width:`${q}px`,height:`${se}px`}),D.renderer.boxWrapper.attr({width:q,height:se,viewBox:[0,0,q,se].join(" ")}),(J=D.chartBackground)==null||J.attr({width:q,height:se}),y(N,{width:`${Y}px`,height:`${X}px`}),w(I)||(N.scrollLeft=G*B,N.scrollTop=U*H);let pe=L-W[0]-1,ne=$-W[3]-1,le=L+V+W[2]+1,ke=$+R+W[1]+1,be=$+R-G,Ee=L+V-U,K=[["M",0,0]];G?K=[["M",0,pe],["L",$-1,pe],["L",$-1,le],["L",0,le],["Z"],["M",be,pe],["L",Y,pe],["L",Y,le],["L",be,le],["Z"]]:U&&(K=[["M",ne,0],["L",ne,L-1],["L",ke,L-1],["L",ke,0],["Z"],["M",ne,Ee],["L",ne,X],["L",ke,X],["L",ke,Ee],["Z"]]),D.redrawTrigger!=="adjustHeight"&&this.mask.attr({d:K})}moveFixedElements(){let D,{container:C,inverted:I,scrollablePixelsX:N,scrollablePixelsY:W}=this.chart,Y=this.fixedRenderer,X=x.fixedSelectors;for(let O of(N&&!I?D=".highcharts-yaxis":N&&I||W&&!I?D=".highcharts-xaxis":W&&I&&(D=".highcharts-yaxis"),D&&X.push(`${D}:not(.highcharts-radial-axis)`,`${D}-labels:not(.highcharts-radial-axis-labels)`),X))[].forEach.call(C.querySelectorAll(O),V=>{(V.namespaceURI===Y.SVG_NS?Y.box:Y.box.parentNode).appendChild(V),V.style.pointerEvents="auto"})}}return x.fixedSelectors=[".highcharts-breadcrumbs-group",".highcharts-contextbutton",".highcharts-caption",".highcharts-credits",".highcharts-drillup-button",".highcharts-legend",".highcharts-legend-checkbox",".highcharts-navigator-series",".highcharts-navigator-xaxis",".highcharts-navigator-yaxis",".highcharts-navigator",".highcharts-range-selector-group",".highcharts-reset-zoom",".highcharts-scrollbar",".highcharts-subtitle",".highcharts-title"],x}),n(t,"Core/Axis/Stacking/StackItem.js",[t["Core/Templating.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{format:r}=s,{series:p}=l,{destroyObjectProperties:f,fireEvent:g,isNumber:b,pick:y}=u;return class{constructor(w,v,T,S,E){let x=w.chart.inverted,A=w.reversed;this.axis=w;let D=this.isNegative=!!T!=!!A;this.options=v=v||{},this.x=S,this.total=null,this.cumulative=null,this.points={},this.hasValidPoints=!1,this.stack=E,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:v.align||(x?D?"left":"right":"center"),verticalAlign:v.verticalAlign||(x?"middle":D?"bottom":"top"),y:v.y,x:v.x},this.textAlign=v.textAlign||(x?D?"right":"left":"center")}destroy(){f(this,this.axis)}render(w){let v=this.axis.chart,T=this.options,S=T.format,E=S?r(S,this,v):T.formatter.call(this);if(this.label)this.label.attr({text:E,visibility:"hidden"});else{this.label=v.renderer.label(E,null,void 0,T.shape,void 0,void 0,T.useHTML,!1,"stack-labels");let x={r:T.borderRadius||0,text:E,padding:y(T.padding,5),visibility:"hidden"};v.styledMode||(x.fill=T.backgroundColor,x.stroke=T.borderColor,x["stroke-width"]=T.borderWidth,this.label.css(T.style||{})),this.label.attr(x),this.label.added||this.label.add(w)}this.label.labelrank=v.plotSizeY,g(this,"afterRender")}setOffset(w,v,T,S,E,x){let{alignOptions:A,axis:D,label:C,options:I,textAlign:N}=this,W=D.chart,Y=this.getStackBox({xOffset:w,width:v,boxBottom:T,boxTop:S,defaultX:E,xAxis:x}),{verticalAlign:X}=A;if(C&&Y){let O=C.getBBox(void 0,0),V=C.padding,$=y(I.overflow,"justify")==="justify",L;A.x=I.x||0,A.y=I.y||0;let{x:R,y:G}=this.adjustStackPosition({labelBox:O,verticalAlign:X,textAlign:N});Y.x-=R,Y.y-=G,C.align(A,!1,Y),(L=W.isInsidePlot(C.alignAttr.x+A.x+R,C.alignAttr.y+A.y+G))||($=!1),$&&p.prototype.justifyDataLabel.call(D,C,A,C.alignAttr,O,Y),C.attr({x:C.alignAttr.x,y:C.alignAttr.y,rotation:I.rotation,rotationOriginX:O.width*{left:0,center:.5,right:1}[I.textAlign||"center"],rotationOriginY:O.height/2}),y(!$&&I.crop,!0)&&(L=b(C.x)&&b(C.y)&&W.isInsidePlot(C.x-V+(C.width||0),C.y)&&W.isInsidePlot(C.x+V,C.y)),C[L?"show":"hide"]()}g(this,"afterSetOffset",{xOffset:w,width:v})}adjustStackPosition({labelBox:w,verticalAlign:v,textAlign:T}){let S={bottom:0,middle:1,top:2,right:1,center:0,left:-1},E=S[v],x=S[T];return{x:w.width/2+w.width/2*x,y:w.height/2*E}}getStackBox(w){let v=this.axis,T=v.chart,{boxTop:S,defaultX:E,xOffset:x,width:A,boxBottom:D}=w,C=v.stacking.usePercentage?100:y(S,this.total,0),I=v.toPixels(C),N=w.xAxis||T.xAxis[0],W=y(E,N.translate(this.x))+x,Y=Math.abs(I-v.toPixels(D||b(v.min)&&v.logarithmic&&v.logarithmic.lin2log(v.min)||0)),X=T.inverted,O=this.isNegative;return X?{x:(O?I:I-Y)-T.plotLeft,y:N.height-W-A+N.top-T.plotTop,width:Y,height:A}:{x:W+N.transB-T.plotLeft,y:(O?I-Y:I)-T.plotTop,width:A,height:Y}}}}),n(t,"Core/Axis/Stacking/StackingAxis.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/Axis.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){var f;let{getDeferredAnimation:g}=s,{series:{prototype:b}}=u,{addEvent:y,correctFloat:w,defined:v,destroyObjectProperties:T,fireEvent:S,isArray:E,isNumber:x,objectEach:A,pick:D}=p;function C(){let L=this.inverted;this.axes.forEach(R=>{R.stacking&&R.stacking.stacks&&R.hasVisibleSeries&&(R.stacking.oldStacks=R.stacking.stacks)}),this.series.forEach(R=>{let G=R.xAxis&&R.xAxis.options||{};R.options.stacking&&R.reserveSpace()&&(R.stackKey=[R.type,D(R.options.stack,""),L?G.top:G.left,L?G.height:G.width].join(","))})}function I(){var R;let L=this.stacking;if(L){let G=L.stacks;A(G,(U,B)=>{T(U),delete G[B]}),(R=L.stackTotalGroup)==null||R.destroy()}}function N(){this.stacking||(this.stacking=new $(this))}function W(L,R,G,U){return!v(L)||L.x!==R||U&&L.stackKey!==U?L={x:R,index:0,key:U,stackKey:U}:L.index++,L.key=[G,R,L.index].join(","),L}function Y(){let L,R=this,G=R.yAxis,U=R.stackKey||"",B=G.stacking.stacks,H=R.processedXData,q=R.options.stacking,se=R[q+"Stacker"];se&&[U,"-"+U].forEach(pe=>{var Ee;let ne=H.length,le,ke,be;for(;ne--;)le=H[ne],L=R.getStackIndicator(L,le,R.index,pe),ke=(Ee=B[pe])==null?void 0:Ee[le],(be=ke==null?void 0:ke.points[L.key||""])&&se.call(R,be,ke,ne)})}function X(L,R,G){let U=R.total?100/R.total:0;L[0]=w(L[0]*U),L[1]=w(L[1]*U),this.stackedYData[G]=L[1]}function O(L){(this.is("column")||this.is("columnrange"))&&(this.options.centerInCategory&&!this.options.stacking&&this.chart.series.length>1?b.setStackedPoints.call(this,L,"group"):L.stacking.resetStacks())}function V(L,R){var Be,He;let G,U,B,H,q,se,pe,ne,le,ke=R||this.options.stacking;if(!ke||!this.reserveSpace()||({group:"xAxis"}[ke]||"yAxis")!==L.coll)return;let be=this.processedXData,Ee=this.processedYData,K=[],J=Ee.length,oe=this.options,we=oe.threshold||0,ee=oe.startFromThreshold?we:0,re=oe.stack,ue=R?`${this.type},${ke}`:this.stackKey||"",xe="-"+ue,Te=this.negStacks,ze=L.stacking,Ce=ze.stacks,Ie=ze.oldStacks;for(ze.stacksTouched+=1,pe=0;pe<J;pe++){ne=be[pe],le=Ee[pe],se=(G=this.getStackIndicator(G,ne,this.index)).key||"",Ce[q=(U=Te&&le<(ee?0:we))?xe:ue]||(Ce[q]={}),Ce[q][ne]||((Be=Ie[q])!=null&&Be[ne]?(Ce[q][ne]=Ie[q][ne],Ce[q][ne].total=null):Ce[q][ne]=new r(L,L.options.stackLabels,!!U,ne,re)),B=Ce[q][ne],le!==null?(B.points[se]=B.points[this.index]=[D(B.cumulative,ee)],v(B.cumulative)||(B.base=se),B.touched=ze.stacksTouched,G.index>0&&this.singleStacks===!1&&(B.points[se][0]=B.points[this.index+","+ne+",0"][0])):(delete B.points[se],delete B.points[this.index]);let Ae=B.total||0;ke==="percent"?(H=U?ue:xe,Ae=Te&&((He=Ce[H])!=null&&He[ne])?(H=Ce[H][ne]).total=Math.max(H.total||0,Ae)+Math.abs(le)||0:w(Ae+(Math.abs(le)||0))):ke==="group"?(E(le)&&(le=le[0]),le!==null&&Ae++):Ae=w(Ae+(le||0)),ke==="group"?B.cumulative=(Ae||1)-1:B.cumulative=w(D(B.cumulative,ee)+(le||0)),B.total=Ae,le!==null&&(B.points[se].push(B.cumulative),K[pe]=B.cumulative,B.hasValidPoints=!0)}ke==="percent"&&(ze.usePercentage=!0),ke!=="group"&&(this.stackedYData=K),ze.oldStacks={}}class ${constructor(R){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=R}buildStacks(){let R,G,U=this.axis,B=U.series,H=U.coll==="xAxis",q=U.options.reversedStacks,se=B.length;for(this.resetStacks(),this.usePercentage=!1,G=se;G--;)R=B[q?G:se-G-1],H&&R.setGroupedPoints(U),R.setStackedPoints(U);if(!H)for(G=0;G<se;G++)B[G].modifyStacks();S(U,"afterBuildStacks")}cleanStacks(){this.oldStacks&&(this.stacks=this.oldStacks,A(this.stacks,R=>{A(R,G=>{G.cumulative=G.total})}))}resetStacks(){A(this.stacks,R=>{A(R,(G,U)=>{x(G.touched)&&G.touched<this.stacksTouched?(G.destroy(),delete R[U]):(G.total=null,G.cumulative=null)})})}renderStackTotals(){var se;let R=this.axis,G=R.chart,U=G.renderer,B=this.stacks,H=g(G,((se=R.options.stackLabels)==null?void 0:se.animation)||!1),q=this.stackTotalGroup=this.stackTotalGroup||U.g("stack-labels").attr({zIndex:6,opacity:0}).add();q.translate(G.plotLeft,G.plotTop),A(B,pe=>{A(pe,ne=>{ne.render(q)})}),q.animate({opacity:1},H)}}return(f||(f={})).compose=function(L,R,G){let U=R.prototype,B=G.prototype;U.getStacks||(y(L,"init",N),y(L,"destroy",I),U.getStacks=C,B.getStackIndicator=W,B.modifyStacks=Y,B.percentStacker=X,B.setGroupedPoints=O,B.setStackedPoints=V)},f}),n(t,"Series/Line/LineSeries.js",[t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{defined:r,merge:p,isObject:f}=u;class g extends s{drawGraph(){let y=this.options,w=(this.gappedPath||this.getGraphPath).call(this),v=this.chart.styledMode;[this,...this.zones].forEach((T,S)=>{let E,x=T.graph,A=x?"animate":"attr",D=T.dashStyle||y.dashStyle;x?(x.endX=this.preventGraphAnimation?null:w.xMap,x.animate({d:w})):w.length&&(T.graph=x=this.chart.renderer.path(w).addClass("highcharts-graph"+(S?` highcharts-zone-graph-${S-1} `:" ")+(S&&T.className||"")).attr({zIndex:1}).add(this.group)),x&&!v&&(E={stroke:!S&&y.lineColor||T.color||this.color||"#cccccc","stroke-width":y.lineWidth||0,fill:this.fillGraph&&this.color||"none"},D?E.dashstyle=D:y.linecap!=="square"&&(E["stroke-linecap"]=E["stroke-linejoin"]="round"),x[A](E).shadow(S<2&&y.shadow&&p({filterUnits:"userSpaceOnUse"},f(y.shadow)?y.shadow:{}))),x&&(x.startX=w.xMap,x.isArea=w.isArea)})}getGraphPath(y,w,v){let T=this,S=T.options,E=[],x=[],A,D=S.step,C=(y=y||T.points).reversed;return C&&y.reverse(),(D={right:1,center:2}[D]||D&&3)&&C&&(D=4-D),(y=this.getValidPoints(y,!1,!(S.connectNulls&&!w&&!v))).forEach(function(I,N){let W,Y=I.plotX,X=I.plotY,O=y[N-1],V=I.isNull||typeof X!="number";(I.leftCliff||O&&O.rightCliff)&&!v&&(A=!0),V&&!r(w)&&N>0?A=!S.connectNulls:V&&!w?A=!0:(N===0||A?W=[["M",I.plotX,I.plotY]]:T.getPointSpline?W=[T.getPointSpline(y,I,N)]:D?(W=D===1?[["L",O.plotX,X]]:D===2?[["L",(O.plotX+Y)/2,O.plotY],["L",(O.plotX+Y)/2,X]]:[["L",Y,O.plotY]]).push(["L",Y,X]):W=[["L",Y,X]],x.push(I.x),D&&(x.push(I.x),D===2&&x.push(I.x)),E.push.apply(E,W),A=!1)}),E.xMap=x,T.graphPath=E,E}}return g.defaultOptions=p(s.defaultOptions,{legendSymbol:"lineMarker"}),l.registerSeriesType("line",g),g}),n(t,"Series/Area/AreaSeriesDefaults.js",[],function(){return{threshold:0,legendSymbol:"areaMarker"}}),n(t,"Series/Area/AreaSeries.js",[t["Series/Area/AreaSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{seriesTypes:{line:r}}=l,{extend:p,merge:f,objectEach:g,pick:b}=u;class y extends r{drawGraph(){this.areaPath=[],super.drawGraph.apply(this);let{areaPath:v,options:T}=this;[this,...this.zones].forEach((S,E)=>{let x={},A=S.fillColor||T.fillColor,D=S.area,C=D?"animate":"attr";D?(D.endX=this.preventGraphAnimation?null:v.xMap,D.animate({d:v})):(x.zIndex=0,(D=S.area=this.chart.renderer.path(v).addClass("highcharts-area"+(E?` highcharts-zone-area-${E-1} `:" ")+(E&&S.className||"")).add(this.group)).isArea=!0),this.chart.styledMode||(x.fill=A||S.color||this.color,x["fill-opacity"]=A?1:T.fillOpacity??.75,D.css({pointerEvents:this.stickyTracking?"none":"auto"})),D[C](x),D.startX=v.xMap,D.shiftUnit=T.step?2:1})}getGraphPath(v){let T,S,E,x=r.prototype.getGraphPath,A=this.options,D=A.stacking,C=this.yAxis,I=[],N=[],W=this.index,Y=C.stacking.stacks[this.stackKey],X=A.threshold,O=Math.round(C.getThreshold(A.threshold)),V=b(A.connectNulls,D==="percent"),$=function(H,q,se){let pe=v[H],ne=D&&Y[pe.x].points[W],le=pe[se+"Null"]||0,ke=pe[se+"Cliff"]||0,be,Ee,K=!0;ke||le?(be=(le?ne[0]:ne[1])+ke,Ee=ne[0]+ke,K=!!le):!D&&v[q]&&v[q].isNull&&(be=Ee=X),be!==void 0&&(N.push({plotX:T,plotY:be===null?O:C.getThreshold(be),isNull:K,isCliff:!0}),I.push({plotX:T,plotY:Ee===null?O:C.getThreshold(Ee),doCurve:!1}))};v=v||this.points,D&&(v=this.getStackPoints(v));for(let H=0,q=v.length;H<q;++H)D||(v[H].leftCliff=v[H].rightCliff=v[H].leftNull=v[H].rightNull=void 0),S=v[H].isNull,T=b(v[H].rectPlotX,v[H].plotX),E=D?b(v[H].yBottom,O):O,S&&!V||(V||$(H,H-1,"left"),S&&!D&&V||(N.push(v[H]),I.push({x:H,plotX:T,plotY:E})),V||$(H,H+1,"right"));let L=x.call(this,N,!0,!0);I.reversed=!0;let R=x.call(this,I,!0,!0),G=R[0];G&&G[0]==="M"&&(R[0]=["L",G[1],G[2]]);let U=L.concat(R);U.length&&U.push(["Z"]);let B=x.call(this,N,!1,V);return this.chart.series.length>1&&D&&N.some(H=>H.isCliff)&&(U.hasStackedCliffs=B.hasStackedCliffs=!0),U.xMap=L.xMap,this.areaPath=U,B}getStackPoints(v){let T=this,S=[],E=[],x=this.xAxis,A=this.yAxis,D=A.stacking.stacks[this.stackKey],C={},I=A.series,N=I.length,W=A.options.reversedStacks?1:-1,Y=I.indexOf(T);if(v=v||this.points,this.options.stacking){for(let O=0;O<v.length;O++)v[O].leftNull=v[O].rightNull=void 0,C[v[O].x]=v[O];g(D,function(O,V){O.total!==null&&E.push(V)}),E.sort(function(O,V){return O-V});let X=I.map(O=>O.visible);E.forEach(function(O,V){let $=0,L,R;if(C[O]&&!C[O].isNull)S.push(C[O]),[-1,1].forEach(function(G){let U=G===1?"rightNull":"leftNull",B=D[E[V+G]],H=0;if(B){let q=Y;for(;q>=0&&q<N;){let se=I[q].index;!(L=B.points[se])&&(se===T.index?C[O][U]=!0:X[q]&&(R=D[O].points[se])&&(H-=R[1]-R[0])),q+=W}}C[O][G===1?"rightCliff":"leftCliff"]=H});else{let G=Y;for(;G>=0&&G<N;){let U=I[G].index;if(L=D[O].points[U]){$=L[1];break}G+=W}$=b($,0),$=A.translate($,0,1,0,1),S.push({isNull:!0,plotX:x.translate(O,0,0,0,1),x:O,plotY:$,yBottom:$})}})}return S}}return y.defaultOptions=f(r.defaultOptions,s),p(y.prototype,{singleStacks:!1}),l.registerSeriesType("area",y),y}),n(t,"Series/Spline/SplineSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l){let{line:u}=s.seriesTypes,{merge:r,pick:p}=l;class f extends u{getPointSpline(b,y,w){let v,T,S,E,x=y.plotX||0,A=y.plotY||0,D=b[w-1],C=b[w+1];function I(W){return W&&!W.isNull&&W.doCurve!==!1&&!y.isCliff}if(I(D)&&I(C)){let W=D.plotX||0,Y=D.plotY||0,X=C.plotX||0,O=C.plotY||0,V=0;v=(1.5*x+W)/2.5,T=(1.5*A+Y)/2.5,S=(1.5*x+X)/2.5,E=(1.5*A+O)/2.5,S!==v&&(V=(E-T)*(S-x)/(S-v)+A-E),T+=V,E+=V,T>Y&&T>A?(T=Math.max(Y,A),E=2*A-T):T<Y&&T<A&&(T=Math.min(Y,A),E=2*A-T),E>O&&E>A?(E=Math.max(O,A),T=2*A-E):E<O&&E<A&&(E=Math.min(O,A),T=2*A-E),y.rightContX=S,y.rightContY=E,y.controlPoints={low:[v,T],high:[S,E]}}let N=["C",p(D.rightContX,D.plotX,0),p(D.rightContY,D.plotY,0),p(v,x,0),p(T,A,0),x,A];return D.rightContX=D.rightContY=void 0,N}}return f.defaultOptions=r(u.defaultOptions),s.registerSeriesType("spline",f),f}),n(t,"Series/AreaSpline/AreaSplineSeries.js",[t["Series/Spline/SplineSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{area:r,area:{prototype:p}}=l.seriesTypes,{extend:f,merge:g}=u;class b extends s{}return b.defaultOptions=g(s.defaultOptions,r.defaultOptions),f(b.prototype,{getGraphPath:p.getGraphPath,getStackPoints:p.getStackPoints,drawGraph:p.drawGraph}),l.registerSeriesType("areaspline",b),b}),n(t,"Series/Column/ColumnSeriesDefaults.js",[],function(){return{borderRadius:3,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}}),n(t,"Series/Column/ColumnSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Color/Color.js"],t["Series/Column/ColumnSeriesDefaults.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,g){let{animObject:b}=s,{parse:y}=l,{noop:w}=r,{clamp:v,crisp:T,defined:S,extend:E,fireEvent:x,isArray:A,isNumber:D,merge:C,pick:I,objectEach:N}=g;class W extends p{animate(X){let O,V,$=this,L=this.yAxis,R=L.pos,G=L.reversed,U=$.options,{clipOffset:B,inverted:H}=this.chart,q={},se=H?"translateX":"translateY";X&&B?(q.scaleY=.001,V=v(L.toPixels(U.threshold),R,R+L.len),H?(V+=G?-Math.floor(B[0]):Math.ceil(B[2]),q.translateX=V-L.len):(V+=G?Math.ceil(B[0]):-Math.floor(B[2]),q.translateY=V),$.clipBox&&$.setClip(),$.group.attr(q)):(O=Number($.group.attr(se)),$.group.animate({scaleY:1},E(b($.options.animation),{step:function(pe,ne){$.group&&(q[se]=O+ne.pos*(R-O),$.group.attr(q))}})))}init(X,O){super.init.apply(this,arguments);let V=this;(X=V.chart).hasRendered&&X.series.forEach(function($){$.type===V.type&&($.isDirty=!0)})}getColumnMetrics(){var le,ke;let X=this,O=X.options,V=X.xAxis,$=X.yAxis,L=V.options.reversedStacks,R=V.reversed&&!L||!V.reversed&&L,G={},U,B=0;O.grouping===!1?B=1:X.chart.series.forEach(function(be){let Ee,K=be.yAxis,J=be.options;be.type===X.type&&be.reserveSpace()&&$.len===K.len&&$.pos===K.pos&&(J.stacking&&J.stacking!=="group"?(G[U=be.stackKey]===void 0&&(G[U]=B++),Ee=G[U]):J.grouping!==!1&&(Ee=B++),be.columnIndex=Ee)});let H=Math.min(Math.abs(V.transA)*(!((le=V.brokenAxis)!=null&&le.hasBreaks)&&((ke=V.ordinal)==null?void 0:ke.slope)||O.pointRange||V.closestPointRange||V.tickInterval||1),V.len),q=H*O.groupPadding,se=(H-2*q)/(B||1),pe=Math.min(O.maxPointWidth||V.len,I(O.pointWidth,se*(1-2*O.pointPadding))),ne=(X.columnIndex||0)+(R?1:0);return X.columnMetrics={width:pe,offset:(se-pe)/2+(q+ne*se-H/2)*(R?-1:1),paddedWidth:se,columnCount:B},X.columnMetrics}crispCol(X,O,V,$){let L=this.borderWidth,R=this.chart.inverted;return $=T(O+$,L,R)-(O=T(O,L,R)),this.options.crisp&&(V=T(X+V,L)-(X=T(X,L))),{x:X,y:O,width:V,height:$}}adjustForMissingColumns(X,O,V,$){var L;if(!V.isNull&&$.columnCount>1){let R=this.xAxis.series.filter(H=>H.visible).map(H=>H.index),G=0,U=0;N((L=this.xAxis.stacking)==null?void 0:L.stacks,H=>{if(typeof V.x=="number"){let q=H[V.x.toString()];if(q&&A(q.points[this.index])){let se=Object.keys(q.points).filter(pe=>!pe.match(",")&&q.points[pe]&&q.points[pe].length>1).map(parseFloat).filter(pe=>R.indexOf(pe)!==-1).sort((pe,ne)=>ne-pe);G=se.indexOf(this.index),U=se.length}}}),G=this.xAxis.reversed?U-1-G:G;let B=(U-1)*$.paddedWidth+O;X=(V.plotX||0)+B/2-O-G*$.paddedWidth}return X}translate(){let X=this,O=X.chart,V=X.options,$=X.dense=X.closestPointRange*X.xAxis.transA<2,L=X.borderWidth=I(V.borderWidth,$?0:1),R=X.xAxis,G=X.yAxis,U=V.threshold,B=I(V.minPointLength,5),H=X.getColumnMetrics(),q=H.width,se=X.pointXOffset=H.offset,pe=X.dataMin,ne=X.dataMax,le=X.translatedThreshold=G.getThreshold(U),ke=X.barW=Math.max(q,1+2*L);V.pointPadding&&(ke=Math.ceil(ke)),p.prototype.translate.apply(X),X.points.forEach(function(be){let Ee=I(be.yBottom,le),K=999+Math.abs(Ee),J=be.plotX||0,oe=v(be.plotY,-K,G.len+K),we,ee=Math.min(oe,Ee),re=Math.max(oe,Ee)-ee,ue=q,xe=J+se,Te=ke;B&&Math.abs(re)<B&&(re=B,we=!G.reversed&&!be.negative||G.reversed&&be.negative,D(U)&&D(ne)&&be.y===U&&ne<=U&&(G.min||0)<U&&(pe!==ne||(G.max||0)<=U)&&(we=!we,be.negative=!be.negative),ee=Math.abs(ee-le)>B?Ee-B:le-(we?B:0)),S(be.options.pointWidth)&&(xe-=Math.round(((ue=Te=Math.ceil(be.options.pointWidth))-q)/2)),V.centerInCategory&&!V.stacking&&(xe=X.adjustForMissingColumns(xe,ue,be,H)),be.barX=xe,be.pointWidth=ue,be.tooltipPos=O.inverted?[v(G.len+G.pos-O.plotLeft-oe,G.pos-O.plotLeft,G.len+G.pos-O.plotLeft),R.len+R.pos-O.plotTop-xe-Te/2,re]:[R.left-O.plotLeft+xe+Te/2,v(oe+G.pos-O.plotTop,G.pos-O.plotTop,G.len+G.pos-O.plotTop),re],be.shapeType=X.pointClass.prototype.shapeType||"roundedRect",be.shapeArgs=X.crispCol(xe,be.isNull?le:ee,Te,be.isNull?0:re)}),x(this,"afterColumnTranslate")}drawGraph(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")}pointAttribs(X,O){let V=this.options,$=this.pointAttrToOptions||{},L=$.stroke||"borderColor",R=$["stroke-width"]||"borderWidth",G,U,B,H=X&&X.color||this.color,q=X&&X[L]||V[L]||H,se=X&&X.options.dashStyle||V.dashStyle,pe=X&&X[R]||V[R]||this[R]||0,ne=I(X&&X.opacity,V.opacity,1);X&&this.zones.length&&(U=X.getZone(),H=X.options.color||U&&(U.color||X.nonZonedColor)||this.color,U&&(q=U.borderColor||q,se=U.dashStyle||se,pe=U.borderWidth||pe)),O&&X&&(B=(G=C(V.states[O],X.options.states&&X.options.states[O]||{})).brightness,H=G.color||B!==void 0&&y(H).brighten(G.brightness).get()||H,q=G[L]||q,pe=G[R]||pe,se=G.dashStyle||se,ne=I(G.opacity,ne));let le={fill:H,stroke:q,"stroke-width":pe,opacity:ne};return se&&(le.dashstyle=se),le}drawPoints(X=this.points){let O,V=this,$=this.chart,L=V.options,R=$.renderer,G=L.animationLimit||250;X.forEach(function(U){let B=U.plotY,H=U.graphic,q=!!H,se=H&&$.pointCount<G?"animate":"attr";D(B)&&U.y!==null?(O=U.shapeArgs,H&&U.hasNewShapeType()&&(H=H.destroy()),V.enabledDataSorting&&(U.startXPos=V.xAxis.reversed?-(O&&O.width||0):V.xAxis.width),!H&&(U.graphic=H=R[U.shapeType](O).add(U.group||V.group),H&&V.enabledDataSorting&&$.hasRendered&&$.pointCount<G&&(H.attr({x:U.startXPos}),q=!0,se="animate")),H&&q&&H[se](C(O)),$.styledMode||H[se](V.pointAttribs(U,U.selected&&"select")).shadow(U.allowShadow!==!1&&L.shadow),H&&(H.addClass(U.getClassName(),!0),H.attr({visibility:U.visible?"inherit":"hidden"}))):H&&(U.graphic=H.destroy())})}drawTracker(X=this.points){let O,V=this,$=V.chart,L=$.pointer,R=function(G){let U=L==null?void 0:L.getPointFromEvent(G);L&&U&&V.options.enableMouseTracking&&(L.isDirectTouch=!0,U.onMouseOver(G))};X.forEach(function(G){O=A(G.dataLabels)?G.dataLabels:G.dataLabel?[G.dataLabel]:[],G.graphic&&(G.graphic.element.point=G),O.forEach(function(U){(U.div||U.element).point=G})}),V._hasTracking||(V.trackerGroups.forEach(function(G){V[G]&&(V[G].addClass("highcharts-tracker").on("mouseover",R).on("mouseout",function(U){L==null||L.onTrackerMouseOut(U)}).on("touchstart",R),!$.styledMode&&V.options.cursor&&V[G].css({cursor:V.options.cursor}))}),V._hasTracking=!0),x(this,"afterDrawTracker")}remove(){let X=this,O=X.chart;O.hasRendered&&O.series.forEach(function(V){V.type===X.type&&(V.isDirty=!0)}),p.prototype.remove.apply(X,arguments)}}return W.defaultOptions=C(p.defaultOptions,u),E(W.prototype,{directTouch:!0,getSymbol:w,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),f.registerSeriesType("column",W),W}),n(t,"Core/Series/DataLabel.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(s,l,u){var r;let{getDeferredAnimation:p}=s,{format:f}=l,{defined:g,extend:b,fireEvent:y,isArray:w,isString:v,merge:T,objectEach:S,pick:E,pInt:x,splat:A}=u;return function(D){function C(){return V(this).some(L=>L==null?void 0:L.enabled)}function I(L,R,G,U,B){var oe;let{chart:H,enabledDataSorting:q}=this,se=this.isCartesian&&H.inverted,pe=L.plotX,ne=L.plotY,le=G.rotation||0,ke=g(pe)&&g(ne)&&H.isInsidePlot(pe,Math.round(ne),{inverted:se,paneCoordinates:!0,series:this}),be=le===0&&E(G.overflow,q?"none":"justify")==="justify",Ee=this.visible&&L.visible!==!1&&g(pe)&&(L.series.forceDL||q&&!be||ke||E(G.inside,!!this.options.stacking)&&U&&H.isInsidePlot(pe,se?U.x+1:U.y+U.height-1,{inverted:se,paneCoordinates:!0,series:this})),K=L.pos();if(Ee&&K){var J;let we=R.getBBox(),ee=R.getBBox(void 0,0),re={right:1,center:.5}[G.align||0]||0,ue={bottom:1,middle:.5}[G.verticalAlign||0]||0;if(U=b({x:K[0],y:Math.round(K[1]),width:0,height:0},U||{}),G.alignTo==="plotEdges"&&this.isCartesian&&(U[se?"x":"y"]=0,U[se?"width":"height"]=((oe=this.yAxis)==null?void 0:oe.len)||0),b(G,{width:we.width,height:we.height}),J=U,q&&this.xAxis&&!be&&this.setDataLabelStartPos(L,R,B,ke,J),R.align(T(G,{width:ee.width,height:ee.height}),!1,U,!1),R.alignAttr.x+=re*(ee.width-we.width),R.alignAttr.y+=ue*(ee.height-we.height),R[R.placed?"animate":"attr"]({x:R.alignAttr.x+(we.width-ee.width)/2,y:R.alignAttr.y+(we.height-ee.height)/2,rotationOriginX:(R.width||0)/2,rotationOriginY:(R.height||0)/2}),be&&U.height>=0)this.justifyDataLabel(R,G,R.alignAttr,we,U,B);else if(E(G.crop,!0)){let{x:xe,y:Te}=R.alignAttr;Ee=H.isInsidePlot(xe,Te,{paneCoordinates:!0,series:this})&&H.isInsidePlot(xe+we.width-1,Te+we.height-1,{paneCoordinates:!0,series:this})}G.shape&&!le&&R[B?"attr":"animate"]({anchorX:K[0],anchorY:K[1]})}B&&q&&(R.placed=!1),Ee||q&&!be?(R.show(),R.placed=!0):(R.hide(),R.placed=!1)}function N(){return this.plotGroup("dataLabelsGroup","data-labels",this.hasRendered?"inherit":"hidden",this.options.dataLabels.zIndex||6)}function W(L){let R=this.hasRendered||0,G=this.initDataLabelsGroup().attr({opacity:+R});return!R&&G&&(this.visible&&G.show(),this.options.animation?G.animate({opacity:1},L):G.attr({opacity:1})),G}function Y(L){var Ee;let R;L=L||this.points;let G=this,U=G.chart,B=G.options,H=U.renderer,{backgroundColor:q,plotBackgroundColor:se}=U.options.chart,pe=H.getContrast(v(se)&&se||v(q)&&q||"#000000"),ne=V(G),{animation:le,defer:ke}=ne[0],be=ke?p(U,le,G):{defer:0,duration:0};y(this,"drawDataLabels"),(Ee=G.hasDataLabels)!=null&&Ee.call(G)&&(R=this.initDataLabels(be),L.forEach(K=>{var we,ee;let J=K.dataLabels||[];A(O(ne,K.dlOptions||((we=K.options)==null?void 0:we.dataLabels))).forEach((re,ue)=>{let xe=re.enabled&&(K.visible||K.dataLabelOnHidden)&&(!K.isNull||K.dataLabelOnNull)&&function(Fe,Xe){let tt=Xe.filter;if(tt){let nt=tt.operator,ht=Fe[tt.property],gt=tt.value;return nt===">"&&ht>gt||nt==="<"&&ht<gt||nt===">="&&ht>=gt||nt==="<="&&ht<=gt||nt==="=="&&ht==gt||nt==="==="&&ht===gt||nt==="!="&&ht!=gt||nt==="!=="&&ht!==gt}return!0}(K,re),{backgroundColor:Te,borderColor:ze,distance:Ce,style:Ie={}}=re,Be,He,Ae,ye,ge={},Me=J[ue],De=!Me,Pe;xe&&(He=E(re[K.formatPrefix+"Format"],re.format),Be=K.getLabelConfig(),Ae=g(He)?f(He,Be,U):(re[K.formatPrefix+"Formatter"]||re.formatter).call(Be,re),ye=re.rotation,!U.styledMode&&(Ie.color=E(re.color,Ie.color,v(G.color)?G.color:void 0,"#000000"),Ie.color==="contrast"?(Te!=="none"&&(Pe=Te),K.contrastColor=H.getContrast(Pe!=="auto"&&Pe||K.color||G.color),Ie.color=Pe||!g(Ce)&&re.inside||0>x(Ce||0)||B.stacking?K.contrastColor:pe):delete K.contrastColor,B.cursor&&(Ie.cursor=B.cursor)),ge={r:re.borderRadius||0,rotation:ye,padding:re.padding,zIndex:1},U.styledMode||(ge.fill=Te==="auto"?K.color:Te,ge.stroke=ze==="auto"?K.color:ze,ge["stroke-width"]=re.borderWidth),S(ge,(Fe,Xe)=>{Fe===void 0&&delete ge[Xe]})),!Me||xe&&g(Ae)&&!!Me.div==!!re.useHTML&&(Me.rotation&&re.rotation||Me.rotation===re.rotation)||(Me=void 0,De=!0),xe&&g(Ae)&&(Me?ge.text=Ae:(Me=H.label(Ae,0,0,re.shape,void 0,void 0,re.useHTML,void 0,"data-label")).addClass(" highcharts-data-label-color-"+K.colorIndex+" "+(re.className||"")+(re.useHTML?" highcharts-tracker":"")),Me&&(Me.options=re,Me.attr(ge),U.styledMode?Ie.width&&Me.css({width:Ie.width,textOverflow:Ie.textOverflow}):Me.css(Ie).shadow(re.shadow),y(Me,"beforeAddingDataLabel",{labelOptions:re,point:K}),Me.added||Me.add(R),G.alignDataLabel(K,Me,re,void 0,De),Me.isActive=!0,J[ue]&&J[ue]!==Me&&J[ue].destroy(),J[ue]=Me))});let oe=J.length;for(;oe--;)J[oe]&&J[oe].isActive?J[oe].isActive=!1:((ee=J[oe])==null||ee.destroy(),J.splice(oe,1));K.dataLabel=J[0],K.dataLabels=J})),y(this,"afterDrawDataLabels")}function X(L,R,G,U,B,H){let q=this.chart,se=R.align,pe=R.verticalAlign,ne=L.box?0:L.padding||0,le=q.inverted?this.yAxis:this.xAxis,ke=le?le.left-q.plotLeft:0,be=q.inverted?this.xAxis:this.yAxis,Ee=be?be.top-q.plotTop:0,{x:K=0,y:J=0}=R,oe,we;return(oe=(G.x||0)+ne+ke)<0&&(se==="right"&&K>=0?(R.align="left",R.inside=!0):K-=oe,we=!0),(oe=(G.x||0)+U.width-ne+ke)>q.plotWidth&&(se==="left"&&K<=0?(R.align="right",R.inside=!0):K+=q.plotWidth-oe,we=!0),(oe=G.y+ne+Ee)<0&&(pe==="bottom"&&J>=0?(R.verticalAlign="top",R.inside=!0):J-=oe,we=!0),(oe=(G.y||0)+U.height-ne+Ee)>q.plotHeight&&(pe==="top"&&J<=0?(R.verticalAlign="bottom",R.inside=!0):J+=q.plotHeight-oe,we=!0),we&&(R.x=K,R.y=J,L.placed=!H,L.align(R,void 0,B)),we}function O(L,R){let G=[],U;if(w(L)&&!w(R))G=L.map(function(B){return T(B,R)});else if(w(R)&&!w(L))G=R.map(function(B){return T(L,B)});else if(w(L)||w(R)){if(w(L)&&w(R))for(U=Math.max(L.length,R.length);U--;)G[U]=T(L[U],R[U])}else G=T(L,R);return G}function V(L){var G,U;let R=L.chart.options.plotOptions;return A(O(O((G=R==null?void 0:R.series)==null?void 0:G.dataLabels,(U=R==null?void 0:R[L.type])==null?void 0:U.dataLabels),L.options.dataLabels))}function $(L,R,G,U,B){let H=this.chart,q=H.inverted,se=this.xAxis,pe=se.reversed,ne=((q?R.height:R.width)||0)/2,le=L.pointWidth,ke=le?le/2:0;R.startXPos=q?B.x:pe?-ne-ke:se.width-ne+ke,R.startYPos=q?pe?this.yAxis.height-ne+ke:-ne-ke:B.y,U?R.visibility==="hidden"&&(R.show(),R.attr({opacity:0}).animate({opacity:1})):R.attr({opacity:1}).animate({opacity:0},void 0,R.hide),H.hasRendered&&(G&&R.attr({x:R.startXPos,y:R.startYPos}),R.placed=!0)}D.compose=function(L){let R=L.prototype;R.initDataLabels||(R.initDataLabels=W,R.initDataLabelsGroup=N,R.alignDataLabel=I,R.drawDataLabels=Y,R.justifyDataLabel=X,R.setDataLabelStartPos=$,R.hasDataLabels=C)}}(r||(r={})),r}),n(t,"Series/Column/ColumnDataLabel.js",[t["Core/Series/DataLabel.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r){var p;let{composed:f}=l,{series:g}=u,{merge:b,pick:y,pushUnique:w}=r;return function(v){function T(S,E,x,A,D){let C=this.chart.inverted,I=S.series,N=(I.xAxis?I.xAxis.len:this.chart.plotSizeX)||0,W=(I.yAxis?I.yAxis.len:this.chart.plotSizeY)||0,Y=S.dlBox||S.shapeArgs,X=y(S.below,S.plotY>y(this.translatedThreshold,W)),O=y(x.inside,!!this.options.stacking);if(Y){if(A=b(Y),!(x.overflow==="allow"&&x.crop===!1)){A.y<0&&(A.height+=A.y,A.y=0);let V=A.y+A.height-W;V>0&&V<A.height-1&&(A.height-=V)}C&&(A={x:W-A.y-A.height,y:N-A.x-A.width,width:A.height,height:A.width}),O||(C?(A.x+=X?0:A.width,A.width=0):(A.y+=X?A.height:0,A.height=0))}x.align=y(x.align,!C||O?"center":X?"right":"left"),x.verticalAlign=y(x.verticalAlign,C||O?"middle":X?"top":"bottom"),g.prototype.alignDataLabel.call(this,S,E,x,A,D),x.inside&&S.contrastColor&&E.css({color:S.contrastColor})}v.compose=function(S){s.compose(g),w(f,"ColumnDataLabel")&&(S.prototype.alignDataLabel=T)}}(p||(p={})),p}),n(t,"Series/Bar/BarSeries.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{extend:r,merge:p}=u;class f extends s{}return f.defaultOptions=p(s.defaultOptions,{}),r(f.prototype,{inverted:!0}),l.registerSeriesType("bar",f),f}),n(t,"Series/Scatter/ScatterSeriesDefaults.js",[],function(){return{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}"></span> <span style="font-size: 0.8em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}}),n(t,"Series/Scatter/ScatterSeries.js",[t["Series/Scatter/ScatterSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{column:r,line:p}=l.seriesTypes,{addEvent:f,extend:g,merge:b}=u;class y extends p{applyJitter(){let v=this,T=this.options.jitter,S=this.points.length;T&&this.points.forEach(function(E,x){["x","y"].forEach(function(A,D){if(T[A]&&!E.isNull){let C=`plot${A.toUpperCase()}`,I=v[`${A}Axis`],N=T[A]*I.transA;if(I&&!I.logarithmic){let W=Math.max(0,(E[C]||0)-N),Y=Math.min(I.len,(E[C]||0)+N);E[C]=W+(Y-W)*function(X){let O=1e4*Math.sin(X);return O-Math.floor(O)}(x+D*S),A==="x"&&(E.clientX=E.plotX)}}})})}drawGraph(){this.options.lineWidth?super.drawGraph():this.graph&&(this.graph=this.graph.destroy())}}return y.defaultOptions=b(p.defaultOptions,s),g(y.prototype,{drawTracker:r.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"]}),f(y,"afterTranslate",function(){this.applyJitter()}),l.registerSeriesType("scatter",y),y}),n(t,"Series/CenteredUtilities.js",[t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(s,l,u){var r,p;let{deg2rad:f}=s,{fireEvent:g,isNumber:b,pick:y,relativeLength:w}=u;return(p=r||(r={})).getCenter=function(){let v=this.options,T=this.chart,S=2*(v.slicedOffset||0),E=T.plotWidth-2*S,x=T.plotHeight-2*S,A=v.center,D=Math.min(E,x),C=v.thickness,I,N=v.size,W=v.innerSize||0,Y,X;typeof N=="string"&&(N=parseFloat(N)),typeof W=="string"&&(W=parseFloat(W));let O=[y(A[0],"50%"),y(A[1],"50%"),y(N&&N<0?void 0:v.size,"100%"),y(W&&W<0?void 0:v.innerSize||0,"0%")];for(!T.angular||this instanceof l||(O[3]=0),Y=0;Y<4;++Y)X=O[Y],I=Y<2||Y===2&&/%$/.test(X),O[Y]=w(X,[E,x,D,O[2]][Y])+(I?S:0);return O[3]>O[2]&&(O[3]=O[2]),b(C)&&2*C<O[2]&&C>0&&(O[3]=O[2]-2*C),g(this,"afterGetCenter",{positions:O}),O},p.getStartAndEndRadians=function(v,T){let S=b(v)?v:0,E=b(T)&&T>S&&T-S<360?T:S+360;return{start:f*(S+-90),end:f*(E+-90)}},r}),n(t,"Series/Pie/PiePoint.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(s,l,u){let{setAnimation:r}=s,{addEvent:p,defined:f,extend:g,isNumber:b,pick:y,relativeLength:w}=u;class v extends l{getConnectorPath(S){let E=S.dataLabelPosition,x=S.options||{},A=x.connectorShape,D=this.connectorShapes[A]||A;return E&&D.call(this,{...E.computed,alignment:E.alignment},E.connectorPosition,x)||[]}getTranslate(){return this.sliced&&this.slicedTranslation||{translateX:0,translateY:0}}haloPath(S){let E=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(E.x,E.y,E.r+S,E.r+S,{innerR:E.r-1,start:E.start,end:E.end,borderRadius:E.borderRadius})}constructor(S,E,x){super(S,E,x),this.half=0,this.name??(this.name="Slice");let A=D=>{this.slice(D.type==="select")};p(this,"select",A),p(this,"unselect",A)}isValid(){return b(this.y)&&this.y>=0}setVisible(S,E=!0){S!==this.visible&&this.update({visible:S??!this.visible},E,void 0,!1)}slice(S,E,x){let A=this.series;r(x,A.chart),E=y(E,!0),this.sliced=this.options.sliced=S=f(S)?S:!this.sliced,A.options.data[A.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate())}}return g(v.prototype,{connectorShapes:{fixedOffset:function(T,S,E){let x=S.breakAt,A=S.touchingSliceAt,D=E.softConnector?["C",T.x+(T.alignment==="left"?-5:5),T.y,2*x.x-A.x,2*x.y-A.y,x.x,x.y]:["L",x.x,x.y];return[["M",T.x,T.y],D,["L",A.x,A.y]]},straight:function(T,S){let E=S.touchingSliceAt;return[["M",T.x,T.y],["L",E.x,E.y]]},crookedLine:function(T,S,E){let{breakAt:x,touchingSliceAt:A}=S,{series:D}=this,[C,I,N]=D.center,W=N/2,{plotLeft:Y,plotWidth:X}=D.chart,O=T.alignment==="left",{x:V,y:$}=T,L=x.x;if(E.crookDistance){let G=w(E.crookDistance,1);L=O?C+W+(X+Y-C-W)*(1-G):Y+(C-W)*G}else L=C+(I-$)*Math.tan((this.angle||0)-Math.PI/2);let R=[["M",V,$]];return(O?L<=V&&L>=x.x:L>=V&&L<=x.x)&&R.push(["L",L,$]),R.push(["L",x.x,x.y],["L",A.x,A.y]),R}}}),v}),n(t,"Series/Pie/PieSeriesDefaults.js",[],function(){return{borderRadius:3,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{connectorPadding:5,connectorShape:"crookedLine",crookDistance:void 0,distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}}),n(t,"Series/Pie/PieSeries.js",[t["Series/CenteredUtilities.js"],t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Series/Pie/PiePoint.js"],t["Series/Pie/PieSeriesDefaults.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/Symbols.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,g,b,y){let{getStartAndEndRadians:w}=s,{noop:v}=u,{clamp:T,extend:S,fireEvent:E,merge:x,pick:A}=y;class D extends f{animate(I){let N=this,W=N.points,Y=N.startAngleRad;I||W.forEach(function(X){let O=X.graphic,V=X.shapeArgs;O&&V&&(O.attr({r:A(X.startR,N.center&&N.center[3]/2),start:Y,end:Y}),O.animate({r:V.r,start:V.start,end:V.end},N.options.animation))})}drawEmpty(){let I,N,W=this.startAngleRad,Y=this.endAngleRad,X=this.options;this.total===0&&this.center?(I=this.center[0],N=this.center[1],this.graph||(this.graph=this.chart.renderer.arc(I,N,this.center[1]/2,0,W,Y).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:b.arc(I,N,this.center[2]/2,0,{start:W,end:Y,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":X.borderWidth,fill:X.fillColor||"none",stroke:X.color||"#cccccc"})):this.graph&&(this.graph=this.graph.destroy())}drawPoints(){let I=this.chart.renderer;this.points.forEach(function(N){N.graphic&&N.hasNewShapeType()&&(N.graphic=N.graphic.destroy()),N.graphic||(N.graphic=I[N.shapeType](N.shapeArgs).add(N.series.group),N.delayedRendering=!0)})}generatePoints(){super.generatePoints(),this.updateTotals()}getX(I,N,W,Y){let X=this.center,O=this.radii?this.radii[W.index]||0:X[2]/2,V=Y.dataLabelPosition,$=(V==null?void 0:V.distance)||0,L=Math.asin(T((I-X[1])/(O+$),-1,1));return X[0]+Math.cos(L)*(O+$)*(N?-1:1)+($>0?(N?-1:1)*(Y.padding||0):0)}hasData(){return!!this.processedXData.length}redrawPoints(){let I,N,W,Y,X=this,O=X.chart;this.drawEmpty(),X.group&&!O.styledMode&&X.group.shadow(X.options.shadow),X.points.forEach(function(V){let $={};N=V.graphic,!V.isNull&&N?(Y=V.shapeArgs,I=V.getTranslate(),O.styledMode||(W=X.pointAttribs(V,V.selected&&"select")),V.delayedRendering?(N.setRadialReference(X.center).attr(Y).attr(I),O.styledMode||N.attr(W).attr({"stroke-linejoin":"round"}),V.delayedRendering=!1):(N.setRadialReference(X.center),O.styledMode||x(!0,$,W),x(!0,$,Y,I),N.animate($)),N.attr({visibility:V.visible?"inherit":"hidden"}),N.addClass(V.getClassName(),!0)):N&&(V.graphic=N.destroy())})}sortByAngle(I,N){I.sort(function(W,Y){return W.angle!==void 0&&(Y.angle-W.angle)*N})}translate(I){E(this,"translate"),this.generatePoints();let N=this.options,W=N.slicedOffset,Y=w(N.startAngle,N.endAngle),X=this.startAngleRad=Y.start,O=(this.endAngleRad=Y.end)-X,V=this.points,$=N.ignoreHiddenPoint,L=V.length,R,G,U,B,H,q,se,pe=0;for(I||(this.center=I=this.getCenter()),q=0;q<L;q++){se=V[q],R=X+pe*O,se.isValid()&&(!$||se.visible)&&(pe+=se.percentage/100),G=X+pe*O;let ne={x:I[0],y:I[1],r:I[2]/2,innerR:I[3]/2,start:Math.round(1e3*R)/1e3,end:Math.round(1e3*G)/1e3};se.shapeType="arc",se.shapeArgs=ne,(U=(G+R)/2)>1.5*Math.PI?U-=2*Math.PI:U<-Math.PI/2&&(U+=2*Math.PI),se.slicedTranslation={translateX:Math.round(Math.cos(U)*W),translateY:Math.round(Math.sin(U)*W)},B=Math.cos(U)*I[2]/2,H=Math.sin(U)*I[2]/2,se.tooltipPos=[I[0]+.7*B,I[1]+.7*H],se.half=U<-Math.PI/2||U>Math.PI/2?1:0,se.angle=U}E(this,"afterTranslate")}updateTotals(){let I=this.points,N=I.length,W=this.options.ignoreHiddenPoint,Y,X,O=0;for(Y=0;Y<N;Y++)(X=I[Y]).isValid()&&(!W||X.visible)&&(O+=X.y);for(Y=0,this.total=O;Y<N;Y++)(X=I[Y]).percentage=O>0&&(X.visible||!W)?X.y/O*100:0,X.total=O}}return D.defaultOptions=x(f.defaultOptions,p),S(D.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawTracker:l.prototype.drawTracker,getCenter:s.getCenter,getSymbol:v,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointAttribs:l.prototype.pointAttribs,pointClass:r,requireSorting:!1,searchPoint:v,trackerGroups:["group","dataLabelsGroup"]}),g.registerSeriesType("pie",D),D}),n(t,"Series/Pie/PieDataLabel.js",[t["Core/Series/DataLabel.js"],t["Core/Globals.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){var f;let{composed:g,noop:b}=l,{distribute:y}=u,{series:w}=r,{arrayMax:v,clamp:T,defined:S,pick:E,pushUnique:x,relativeLength:A}=p;return function(D){let C={radialDistributionY:function(X,O){var V;return(((V=O.dataLabelPosition)==null?void 0:V.top)||0)+X.distributeBox.pos},radialDistributionX:function(X,O,V,$,L){let R=L.dataLabelPosition;return X.getX(V<((R==null?void 0:R.top)||0)+2||V>((R==null?void 0:R.bottom)||0)-2?$:V,O.half,O,L)},justify:function(X,O,V,$){var L;return $[0]+(X.half?-1:1)*(V+(((L=O.dataLabelPosition)==null?void 0:L.distance)||0))},alignToPlotEdges:function(X,O,V,$){let L=X.getBBox().width;return O?L+$:V-L-$},alignToConnectors:function(X,O,V,$){let L=0,R;return X.forEach(function(G){(R=G.dataLabel.getBBox().width)>L&&(L=R)}),O?L+$:V-L-$}};function I(X,O){let{center:V,options:$}=this,L=V[2]/2,R=X.angle||0,G=Math.cos(R),U=Math.sin(R),B=V[0]+G*L,H=V[1]+U*L,q=Math.min(($.slicedOffset||0)+($.borderWidth||0),O/5);return{natural:{x:B+G*O,y:H+U*O},computed:{},alignment:O<0?"center":X.half?"right":"left",connectorPosition:{breakAt:{x:B+G*q,y:H+U*q},touchingSliceAt:{x:B,y:H}},distance:O}}function N(){var Ee;let X=this,O=X.points,V=X.chart,$=V.plotWidth,L=V.plotHeight,R=V.plotLeft,G=Math.round(V.chartWidth/3),U=X.center,B=U[2]/2,H=U[1],q=[[],[]],se=[0,0,0,0],pe=X.dataLabelPositioners,ne,le,ke,be=0;X.visible&&((Ee=X.hasDataLabels)!=null&&Ee.call(X))&&(O.forEach(K=>{(K.dataLabels||[]).forEach(J=>{J.shortened&&(J.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),J.shortened=!1)})}),w.prototype.drawDataLabels.apply(X),O.forEach(K=>{(K.dataLabels||[]).forEach((J,oe)=>{var ue;let we=U[2]/2,ee=J.options,re=A((ee==null?void 0:ee.distance)||0,we);oe===0&&q[K.half].push(K),!S((ue=ee==null?void 0:ee.style)==null?void 0:ue.width)&&J.getBBox().width>G&&(J.css({width:Math.round(.7*G)+"px"}),J.shortened=!0),J.dataLabelPosition=this.getDataLabelPosition(K,re),be=Math.max(be,re)})}),q.forEach((K,J)=>{let oe=K.length,we=[],ee,re,ue=0,xe;oe&&(X.sortByAngle(K,J-.5),be>0&&(ee=Math.max(0,H-B-be),re=Math.min(H+B+be,V.plotHeight),K.forEach(Te=>{(Te.dataLabels||[]).forEach(ze=>{var Ie;let Ce=ze.dataLabelPosition;Ce&&Ce.distance>0&&(Ce.top=Math.max(0,H-B-Ce.distance),Ce.bottom=Math.min(H+B+Ce.distance,V.plotHeight),ue=ze.getBBox().height||21,ze.lineHeight=V.renderer.fontMetrics(ze.text||ze).h+2*ze.padding,Te.distributeBox={target:(((Ie=ze.dataLabelPosition)==null?void 0:Ie.natural.y)||0)-Ce.top+ze.lineHeight/2,size:ue,rank:Te.y},we.push(Te.distributeBox))})}),y(we,xe=re+ue-ee,xe/5)),K.forEach(Te=>{(Te.dataLabels||[]).forEach(ze=>{let Ce=ze.options||{},Ie=Te.distributeBox,Be=ze.dataLabelPosition,He=(Be==null?void 0:Be.natural.y)||0,Ae=Ce.connectorPadding||0,ye=ze.lineHeight||21,ge=(ye-ze.getBBox().height)/2,Me=0,De=He,Pe="inherit";if(Be){if(S(Ie)&&Be.distance>0&&(Ie.pos===void 0?Pe="hidden":(ke=Ie.size,De=pe.radialDistributionY(Te,ze))),Ce.justify)Me=pe.justify(Te,ze,B,U);else switch(Ce.alignTo){case"connectors":Me=pe.alignToConnectors(K,J,$,R);break;case"plotEdges":Me=pe.alignToPlotEdges(ze,J,$,R);break;default:Me=pe.radialDistributionX(X,Te,De-ge,He,ze)}if(Be.attribs={visibility:Pe,align:Be.alignment},Be.posAttribs={x:Me+(Ce.x||0)+({left:Ae,right:-Ae}[Be.alignment]||0),y:De+(Ce.y||0)-ye/2},Be.computed.x=Me,Be.computed.y=De-ge,E(Ce.crop,!0)){let Fe;Me-(le=ze.getBBox().width)<Ae&&J===1?(Fe=Math.round(le-Me+Ae),se[3]=Math.max(Fe,se[3])):Me+le>$-Ae&&J===0&&(Fe=Math.round(Me+le-$+Ae),se[1]=Math.max(Fe,se[1])),De-ke/2<0?se[0]=Math.max(Math.round(-De+ke/2),se[0]):De+ke/2>L&&(se[2]=Math.max(Math.round(De+ke/2-L),se[2])),Be.sideOverflow=Fe}}})}))}),(v(se)===0||this.verifyDataLabelOverflow(se))&&(this.placeDataLabels(),this.points.forEach(K=>{(K.dataLabels||[]).forEach(J=>{var re;let{connectorColor:oe,connectorWidth:we=1}=J.options||{},ee=J.dataLabelPosition;if(we){let ue;ne=J.connector,ee&&ee.distance>0?(ue=!ne,ne||(J.connector=ne=V.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+K.colorIndex+(K.className?" "+K.className:"")).add(X.dataLabelsGroup)),V.styledMode||ne.attr({"stroke-width":we,stroke:oe||K.color||"#666666"}),ne[ue?"attr":"animate"]({d:K.getConnectorPath(J)}),ne.attr({visibility:(re=ee.attribs)==null?void 0:re.visibility})):ne&&(J.connector=ne.destroy())}})})))}function W(){this.points.forEach(X=>{(X.dataLabels||[]).forEach(O=>{var $;let V=O.dataLabelPosition;V?(V.sideOverflow&&(O.css({width:Math.max(O.getBBox().width-V.sideOverflow,0)+"px",textOverflow:((($=O.options)==null?void 0:$.style)||{}).textOverflow||"ellipsis"}),O.shortened=!0),O.attr(V.attribs),O[O.moved?"animate":"attr"](V.posAttribs),O.moved=!0):O&&O.attr({y:-9999})}),delete X.distributeBox},this)}function Y(X){let O=this.center,V=this.options,$=V.center,L=V.minSize||80,R=L,G=V.size!==null;return!G&&($[0]!==null?R=Math.max(O[2]-Math.max(X[1],X[3]),L):(R=Math.max(O[2]-X[1]-X[3],L),O[0]+=(X[3]-X[1])/2),$[1]!==null?R=T(R,L,O[2]-Math.max(X[0],X[2])):(R=T(R,L,O[2]-X[0]-X[2]),O[1]+=(X[0]-X[2])/2),R<O[2]?(O[2]=R,O[3]=Math.min(V.thickness?Math.max(0,R-2*V.thickness):Math.max(0,A(V.innerSize||0,R)),R),this.translate(O),this.drawDataLabels&&this.drawDataLabels()):G=!0),G}D.compose=function(X){if(s.compose(w),x(g,"PieDataLabel")){let O=X.prototype;O.dataLabelPositioners=C,O.alignDataLabel=b,O.drawDataLabels=N,O.getDataLabelPosition=I,O.placeDataLabels=W,O.verifyDataLabelOverflow=Y}}}(f||(f={})),f}),n(t,"Core/Geometry/GeometryUtilities.js",[],function(){var s,l;return(l=s||(s={})).getCenterOfPoints=function(u){let r=u.reduce((p,f)=>(p.x+=f.x,p.y+=f.y,p),{x:0,y:0});return{x:r.x/u.length,y:r.y/u.length}},l.getDistanceBetweenPoints=function(u,r){return Math.sqrt(Math.pow(r.x-u.x,2)+Math.pow(r.y-u.y,2))},l.getAngleBetweenPoints=function(u,r){return Math.atan2(r.x-u.x,r.y-u.y)},l.pointInPolygon=function({x:u,y:r},p){let f=p.length,g,b,y=!1;for(g=0,b=f-1;g<f;b=g++){let[w,v]=p[g],[T,S]=p[b];v>r!=S>r&&u<(T-w)*(r-v)/(S-v)+w&&(y=!y)}return y},s}),n(t,"Extensions/OverlappingDataLabels.js",[t["Core/Geometry/GeometryUtilities.js"],t["Core/Utilities.js"]],function(s,l){let{pointInPolygon:u}=s,{addEvent:r,fireEvent:p,objectEach:f,pick:g}=l;function b(v){let T=v.length,S=(W,Y)=>!(Y.x>=W.x+W.width||Y.x+Y.width<=W.x||Y.y>=W.y+W.height||Y.y+Y.height<=W.y),E=(W,Y)=>{for(let X of W)if(u({x:X[0],y:X[1]},Y))return!0;return!1},x,A,D,C,I,N=!1;for(let W=0;W<T;W++)(x=v[W])&&(x.oldOpacity=x.opacity,x.newOpacity=1,x.absoluteBox=function(Y){var X,O;if(Y&&(!Y.alignAttr||Y.placed)){let V=Y.box?0:Y.padding||0,$=Y.alignAttr||{x:Y.attr("x"),y:Y.attr("y")},L=Y.getBBox();return Y.width=L.width,Y.height=L.height,{x:$.x+(((X=Y.parentGroup)==null?void 0:X.translateX)||0)+V,y:$.y+(((O=Y.parentGroup)==null?void 0:O.translateY)||0)+V,width:(Y.width||0)-2*V,height:(Y.height||0)-2*V,polygon:L==null?void 0:L.polygon}}}(x));v.sort((W,Y)=>(Y.labelrank||0)-(W.labelrank||0));for(let W=0;W<T;++W){C=(A=v[W])&&A.absoluteBox;let Y=C==null?void 0:C.polygon;for(let X=W+1;X<T;++X){I=(D=v[X])&&D.absoluteBox;let O=!1;if(C&&I&&A!==D&&A.newOpacity!==0&&D.newOpacity!==0&&A.visibility!=="hidden"&&D.visibility!=="hidden"){let V=I.polygon;if(Y&&V&&Y!==V?E(Y,V)&&(O=!0):S(C,I)&&(O=!0),O){let $=A.labelrank<D.labelrank?A:D,L=$.text;$.newOpacity=0,L!=null&&L.element.querySelector("textPath")&&L.hide()}}}}for(let W of v)y(W,this)&&(N=!0);N&&p(this,"afterHideAllOverlappingLabels")}function y(v,T){let S,E,x=!1;return v&&(E=v.newOpacity,v.oldOpacity!==E&&(v.hasClass("highcharts-data-label")?(v[E?"removeClass":"addClass"]("highcharts-data-label-hidden"),S=function(){T.styledMode||v.css({pointerEvents:E?"auto":"none"})},x=!0,v[v.isOld?"animate":"attr"]({opacity:E},void 0,S),p(T,"afterHideOverlappingLabel")):v.attr({opacity:E})),v.isOld=!0),x}function w(){var S;let v=this,T=[];for(let E of v.labelCollectors||[])T=T.concat(E());for(let E of v.yAxis||[])E.stacking&&E.options.stackLabels&&!E.options.stackLabels.allowOverlap&&f(E.stacking.stacks,x=>{f(x,A=>{A.label&&T.push(A.label)})});for(let E of v.series||[])if(E.visible&&((S=E.hasDataLabels)!=null&&S.call(E))){let x=A=>{for(let D of A)D.visible&&(D.dataLabels||[]).forEach(C=>{var N;let I=C.options||{};C.labelrank=g(I.labelrank,D.labelrank,(N=D.shapeArgs)==null?void 0:N.height),I.allowOverlap??Number(I.distance)>0?(C.oldOpacity=C.opacity,C.newOpacity=1,y(C,v)):T.push(C)})};x(E.nodes||[]),x(E.points)}this.hideOverlappingLabels(T)}return{compose:function(v){let T=v.prototype;T.hideOverlappingLabels||(T.hideOverlappingLabels=b,r(v,"render",w))}}}),n(t,"Extensions/BorderRadius.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){let{defaultOptions:r}=s,{noop:p}=l,{addEvent:f,extend:g,isObject:b,merge:y,relativeLength:w}=u,v={radius:0,scope:"stack",where:void 0},T=p,S=p;function E(I,N,W,Y,X={}){let O=T(I,N,W,Y,X),{innerR:V=0,r:$=W,start:L=0,end:R=0}=X;if(X.open||!X.borderRadius)return O;let G=R-L,U=Math.sin(G/2),B=Math.max(Math.min(w(X.borderRadius||0,$-V),($-V)/2,$*U/(1+U)),0),H=Math.min(B,G/Math.PI*2*V),q=O.length-1;for(;q--;)(function(se,pe,ne){let le,ke,be,Ee=se[pe],K=se[pe+1];if(K[0]==="Z"&&(K=se[0]),(Ee[0]==="M"||Ee[0]==="L")&&K[0]==="A"?(le=Ee,ke=K,be=!0):Ee[0]==="A"&&(K[0]==="M"||K[0]==="L")&&(le=K,ke=Ee),le&&ke&&ke.params){let J=ke[1],oe=ke[5],we=ke.params,{start:ee,end:re,cx:ue,cy:xe}=we,Te=oe?J-ne:J+ne,ze=Te?Math.asin(ne/Te):0,Ce=oe?ze:-ze,Ie=Math.cos(ze)*Te;be?(we.start=ee+Ce,le[1]=ue+Ie*Math.cos(ee),le[2]=xe+Ie*Math.sin(ee),se.splice(pe+1,0,["A",ne,ne,0,0,1,ue+J*Math.cos(we.start),xe+J*Math.sin(we.start)])):(we.end=re-Ce,ke[6]=ue+J*Math.cos(we.end),ke[7]=xe+J*Math.sin(we.end),se.splice(pe+1,0,["A",ne,ne,0,0,1,ue+Ie*Math.cos(re),xe+Ie*Math.sin(re)])),ke[4]=Math.abs(we.end-we.start)<Math.PI?0:1}})(O,q,q>1?H:B);return O}function x(){var I,N;if(this.options.borderRadius&&!(this.chart.is3d&&this.chart.is3d())){let{options:W,yAxis:Y}=this,X=W.stacking==="percent",O=(N=(I=r.plotOptions)==null?void 0:I[this.type])==null?void 0:N.borderRadius,V=A(W.borderRadius,b(O)?O:{}),$=Y.options.reversed;for(let L of this.points){let{shapeArgs:R}=L;if(L.shapeType==="roundedRect"&&R){let{width:G=0,height:U=0,y:B=0}=R,H=B,q=U;if(V.scope==="stack"&&L.stackTotal){let le=Y.translate(X?100:L.stackTotal,!1,!0,!1,!0),ke=Y.translate(W.threshold||0,!1,!0,!1,!0),be=this.crispCol(0,Math.min(le,ke),0,Math.abs(le-ke));H=be.y,q=be.height}let se=(L.negative?-1:1)*($?-1:1)==-1,pe=V.where;!pe&&this.is("waterfall")&&Math.abs((L.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth&&(pe="all"),pe||(pe="end");let ne=Math.min(w(V.radius,G),G/2,pe==="all"?U/2:1/0)||0;pe==="end"&&(se&&(H-=ne),q+=ne),g(R,{brBoxHeight:q,brBoxY:H,r:ne})}}}}function A(I,N){return b(I)||(I={radius:I||0}),y(v,N,I)}function D(){let I=A(this.options.borderRadius);for(let N of this.points){let W=N.shapeArgs;W&&(W.borderRadius=w(I.radius,(W.r||0)-(W.innerR||0)))}}function C(I,N,W,Y,X={}){let O=S(I,N,W,Y,X),{r:V=0,brBoxHeight:$=Y,brBoxY:L=N}=X,R=N-L,G=L+$-(N+Y),U=R-V>-.1?0:V,B=G-V>-.1?0:V,H=Math.max(U&&R,0),q=Math.max(B&&G,0),se=[I+U,N],pe=[I+W-U,N],ne=[I+W,N+U],le=[I+W,N+Y-B],ke=[I+W-B,N+Y],be=[I+B,N+Y],Ee=[I,N+Y-B],K=[I,N+U],J=(oe,we)=>Math.sqrt(Math.pow(oe,2)-Math.pow(we,2));if(H){let oe=J(U,U-H);se[0]-=oe,pe[0]+=oe,ne[1]=K[1]=N+U-H}if(Y<U-H){let oe=J(U,U-H-Y);ne[0]=le[0]=I+W-U+oe,ke[0]=Math.min(ne[0],ke[0]),be[0]=Math.max(le[0],be[0]),Ee[0]=K[0]=I+U-oe,ne[1]=K[1]=N+Y}if(q){let oe=J(B,B-q);ke[0]+=oe,be[0]-=oe,le[1]=Ee[1]=N+Y-B+q}if(Y<B-q){let oe=J(B,B-q-Y);ne[0]=le[0]=I+W-B+oe,pe[0]=Math.min(ne[0],pe[0]),se[0]=Math.max(le[0],se[0]),Ee[0]=K[0]=I+B-oe,le[1]=Ee[1]=N}return O.length=0,O.push(["M",...se],["L",...pe],["A",U,U,0,0,1,...ne],["L",...le],["A",B,B,0,0,1,...ke],["L",...be],["A",B,B,0,0,1,...Ee],["L",...K],["A",U,U,0,0,1,...se],["Z"]),O}return{compose:function(I,N,W){let Y=I.types.pie;if(!N.symbolCustomAttribs.includes("borderRadius")){let X=W.prototype.symbols;f(I,"afterColumnTranslate",x,{order:9}),f(Y,"afterTranslate",D),N.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY"),T=X.arc,S=X.roundedRect,X.arc=E,X.roundedRect=C}},optionsToObject:A}}),n(t,"Core/Responsive.js",[t["Core/Utilities.js"]],function(s){var l;let{diffObjects:u,extend:r,find:p,merge:f,pick:g,uniqueKey:b}=s;return function(y){function w(T,S){let E=T.condition;(E.callback||function(){return this.chartWidth<=g(E.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=g(E.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=g(E.minWidth,0)&&this.chartHeight>=g(E.minHeight,0)}).call(this)&&S.push(T._id)}function v(T,S){let E=this.options.responsive,x=this.currentResponsive,A=[],D;!S&&E&&E.rules&&E.rules.forEach(N=>{N._id===void 0&&(N._id=b()),this.matchResponsiveRule(N,A)},this);let C=f(...A.map(N=>p((E||{}).rules||[],W=>W._id===N)).map(N=>N&&N.chartOptions));C.isResponsiveOptions=!0,A=A.toString()||void 0;let I=x&&x.ruleIds;A===I||(x&&(this.currentResponsive=void 0,this.updatingResponsive=!0,this.update(x.undoOptions,T,!0),this.updatingResponsive=!1),A?((D=u(C,this.options,!0,this.collectionsWithUpdate)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:A,mergedOptions:C,undoOptions:D},this.updatingResponsive||this.update(C,T,!0)):this.currentResponsive=void 0)}y.compose=function(T){let S=T.prototype;return S.matchResponsiveRule||r(S,{matchResponsiveRule:w,setResponsive:v}),T}}(l||(l={})),l}),n(t,"masters/highcharts.src.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Core/Defaults.js"],t["Core/Animation/Fx.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Renderer/HTML/AST.js"],t["Core/Templating.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Renderer/HTML/HTMLElement.js"],t["Core/Axis/Axis.js"],t["Core/Axis/DateTimeAxis.js"],t["Core/Axis/LogarithmicAxis.js"],t["Core/Axis/PlotLineOrBand/PlotLineOrBand.js"],t["Core/Axis/Tick.js"],t["Core/Tooltip.js"],t["Core/Series/Point.js"],t["Core/Pointer.js"],t["Core/Legend/Legend.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Chart/Chart.js"],t["Extensions/ScrollablePlotArea.js"],t["Core/Axis/Stacking/StackingAxis.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Series/Column/ColumnDataLabel.js"],t["Series/Pie/PieDataLabel.js"],t["Core/Series/DataLabel.js"],t["Extensions/OverlappingDataLabels.js"],t["Extensions/BorderRadius.js"],t["Core/Responsive.js"],t["Core/Color/Color.js"],t["Core/Time.js"]],function(s,l,u,r,p,f,g,b,y,w,v,T,S,E,x,A,D,C,I,N,W,Y,X,O,V,$,L,R,G,U,B,H,q,se,pe,ne){return s.AST=f,s.Axis=S,s.Chart=X,s.Color=pe,s.DataLabel=B,s.Fx=r,s.HTMLElement=T,s.Legend=W,s.LegendSymbol=Y,s.OverlappingDataLabels=s.OverlappingDataLabels||H,s.PlotLineOrBand=A,s.Point=I,s.Pointer=N,s.RendererRegistry=b,s.Series=L,s.SeriesRegistry=R,s.StackItem=$,s.SVGElement=w,s.SVGRenderer=v,s.Templating=g,s.Tick=D,s.Time=ne,s.Tooltip=C,s.animate=p.animate,s.animObject=p.animObject,s.chart=X.chart,s.color=pe.parse,s.dateFormat=g.dateFormat,s.defaultOptions=u.defaultOptions,s.distribute=y.distribute,s.format=g.format,s.getDeferredAnimation=p.getDeferredAnimation,s.getOptions=u.getOptions,s.numberFormat=g.numberFormat,s.seriesType=R.seriesType,s.setAnimation=p.setAnimation,s.setOptions=u.setOptions,s.stop=p.stop,s.time=u.defaultTime,s.timers=r.timers,q.compose(s.Series,s.SVGElement,s.SVGRenderer),G.compose(s.Series.types.column),B.compose(s.Series),E.compose(s.Axis),T.compose(s.SVGRenderer),W.compose(s.Chart),x.compose(s.Axis),H.compose(s.Chart),U.compose(s.Series.types.pie),A.compose(s.Chart,s.Axis),N.compose(s.Chart),se.compose(s.Chart),O.compose(s.Axis,s.Chart,s.Series),V.compose(s.Axis,s.Chart,s.Series),C.compose(s.Pointer),l.extend(s,l),s}),t["masters/highcharts.src.js"]._modules=t,t["masters/highcharts.src.js"]})})(v3);var dj=v3.exports;const Uu=dh(dj);var _3={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function n(s,l,u,r){s.hasOwnProperty(l)||(s[l]=r.apply(null,u),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:l,module:s[l]}})))}n(t,"Accessibility/Utils/HTMLUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{doc:u,win:r}=s,{css:p}=l,f=r.EventTarget&&new r.EventTarget||"none";function g(y){if(typeof r.MouseEvent=="function")return new r.MouseEvent(y.type,y);if(u.createEvent){let w=u.createEvent("MouseEvent");if(w.initMouseEvent)return w.initMouseEvent(y.type,y.bubbles,y.cancelable,y.view||r,y.detail,y.screenX,y.screenY,y.clientX,y.clientY,y.ctrlKey,y.altKey,y.shiftKey,y.metaKey,y.button,y.relatedTarget),w}return b(y.type)}function b(y,w,v){let T=w||{x:0,y:0};if(typeof r.MouseEvent=="function")return new r.MouseEvent(y,{bubbles:!0,cancelable:!0,composed:!0,button:0,buttons:1,relatedTarget:v||f,view:r,detail:y==="click"?1:0,screenX:T.x,screenY:T.y,clientX:T.x,clientY:T.y});if(u.createEvent){let S=u.createEvent("MouseEvent");if(S.initMouseEvent)return S.initMouseEvent(y,!0,!0,r,y==="click"?1:0,T.x,T.y,T.x,T.y,!1,!1,!1,!1,0,null),S}return{type:y}}return{addClass:function(y,w){y.classList?y.classList.add(w):0>y.className.indexOf(w)&&(y.className+=" "+w)},cloneMouseEvent:g,cloneTouchEvent:function(y){let w=T=>{let S=[];for(let E=0;E<T.length;++E){let x=T.item(E);x&&S.push(x)}return S};if(typeof r.TouchEvent=="function"){let T=new r.TouchEvent(y.type,{touches:w(y.touches),targetTouches:w(y.targetTouches),changedTouches:w(y.changedTouches),ctrlKey:y.ctrlKey,shiftKey:y.shiftKey,altKey:y.altKey,metaKey:y.metaKey,bubbles:y.bubbles,cancelable:y.cancelable,composed:y.composed,detail:y.detail,view:y.view});return y.defaultPrevented&&T.preventDefault(),T}let v=g(y);return v.touches=y.touches,v.changedTouches=y.changedTouches,v.targetTouches=y.targetTouches,v},escapeStringForHTML:function(y){return y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},getElement:function(y){return u.getElementById(y)},getFakeMouseEvent:b,getHeadingTagNameForElement:function(y){let w=E=>"h"+Math.min(6,parseInt(E.slice(1),10)+1),v=E=>/^H[1-6]$/i.test(E),T=E=>{let x=E;for(;x=x.previousSibling;){let A=x.tagName||"";if(v(A))return A}return""},S=E=>{let x=T(E);if(x)return w(x);let A=E.parentElement;if(!A)return"p";let D=A.tagName;return v(D)?w(D):S(A)};return S(y)},removeChildNodes:function(y){for(;y.lastChild;)y.removeChild(y.lastChild)},removeClass:function(y,w){y.classList?y.classList.remove(w):y.className=y.className.replace(RegExp(w,"g"),"")},removeElement:function(y){y&&y.parentNode&&y.parentNode.removeChild(y)},reverseChildNodes:function(y){let w=y.childNodes.length;for(;w--;)y.appendChild(y.childNodes[w])},simulatedEventTarget:f,stripHTMLTagsFromString:function(y,w=!1){return typeof y=="string"?w?y.replace(/<\/?[^>]+(>|$)/g,""):y.replace(/<\/?(?!\s)[^>]+(>|$)/g,""):y},visuallyHideElement:function(y){p(y,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",whiteSpace:"nowrap",clip:"rect(1px, 1px, 1px, 1px)",marginTop:"-3px","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",filter:"alpha(opacity=1)",opacity:.01})}}}),n(t,"Accessibility/A11yI18n.js",[t["Core/Templating.js"],t["Core/Utilities.js"]],function(s,l){var u;let{format:r}=s,{getNestedProperty:p,pick:f}=l;return function(g){function b(w,v,T){let S=(C,I)=>{let N=C.slice(I||0),W=N.indexOf("{"),Y=N.indexOf("}");if(W>-1&&Y>W)return{statement:N.substring(W+1,Y),begin:I+W+1,end:I+Y}},E=[],x,A,D=0;do x=S(w,D),(A=w.substring(D,x&&x.begin-1)).length&&E.push({value:A,type:"constant"}),x&&E.push({value:x.statement,type:"statement"}),D=x?x.end+1:D+1;while(x);return E.forEach(C=>{C.type==="statement"&&(C.value=function(I,N){let W,Y,X=I.indexOf("#each("),O=I.indexOf("#plural("),V=I.indexOf("["),$=I.indexOf("]");if(X>-1){let R=I.slice(X).indexOf(")")+X,G=I.substring(0,X),U=I.substring(R+1),B=I.substring(X+6,R).split(","),H=Number(B[1]),q;if(Y="",W=p(B[0],N)){q=(H=isNaN(H)?W.length:H)<0?W.length+H:Math.min(H,W.length);for(let se=0;se<q;++se)Y+=G+W[se]+U}return Y.length?Y:""}if(O>-1){var L;let R=I.slice(O).indexOf(")")+O,G=I.substring(O+8,R).split(",");switch(Number(p(G[0],N))){case 0:Y=f(G[4],G[1]);break;case 1:Y=f(G[2],G[1]);break;case 2:Y=f(G[3],G[1]);break;default:Y=G[1]}return Y?(L=Y).trim&&L.trim()||L.replace(/^\s+|\s+$/g,""):""}if(V>-1){let R,G=I.substring(0,V),U=Number(I.substring(V+1,$));return W=p(G,N),!isNaN(U)&&W&&(U<0?(R=W[W.length+U])===void 0&&(R=W[0]):(R=W[U])===void 0&&(R=W[W.length-1])),R!==void 0?R:""}return"{"+I+"}"}(C.value,v))}),r(E.reduce((C,I)=>C+I.value,""),v,T)}function y(w,v){let T=w.split("."),S=this.options.lang,E=0;for(;E<T.length;++E)S=S&&S[T[E]];return typeof S=="string"?b(S,v,this):""}g.compose=function(w){let v=w.prototype;v.langFormat||(v.langFormat=y)},g.i18nFormat=b}(u||(u={})),u}),n(t,"Accessibility/Utils/ChartUtilities.js",[t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(s,l,u){let{doc:r}=s,{stripHTMLTagsFromString:p}=l,{defined:f,find:g,fireEvent:b}=u;function y(v){if(v.points&&v.points.length){let T=g(v.points,S=>!!S.graphic);return T&&T.graphic&&T.graphic.element}}function w(v){let T=y(v);return T&&T.parentNode||v.graph&&v.graph.element||v.group&&v.group.element}return{fireEventOnWrappedOrUnwrappedElement:function v(T,S){let E=S.type,x=T.hcEvents;r.createEvent&&(T.dispatchEvent||T.fireEvent)?T.dispatchEvent?T.dispatchEvent(S):T.fireEvent(E,S):x&&x[E]?b(T,E,S):T.element&&v(T.element,S)},getChartTitle:function(v){return p(v.options.title.text||v.langFormat("accessibility.defaultChartTitle",{chart:v}),v.renderer.forExport)},getAxisDescription:function(v){var T,S;return v&&(((T=v.options.accessibility)==null?void 0:T.description)||((S=v.axisTitle)==null?void 0:S.textStr)||v.options.id||v.categories&&"categories"||v.dateTime&&"Time"||"values")},getAxisRangeDescription:function(v){let T=v.options||{};return T.accessibility&&T.accessibility.rangeDescription!==void 0?T.accessibility.rangeDescription:v.categories?function(S){let E=S.chart;return S.dataMax&&S.dataMin?E.langFormat("accessibility.axis.rangeCategories",{chart:E,axis:S,numCategories:S.dataMax-S.dataMin+1}):""}(v):v.dateTime&&(v.min===0||v.dataMin===0)?function(S){let E=S.chart,x={},A=S.dataMin||S.min||0,D=S.dataMax||S.max||0,C="Seconds";x.Seconds=(D-A)/1e3,x.Minutes=x.Seconds/60,x.Hours=x.Minutes/60,x.Days=x.Hours/24,["Minutes","Hours","Days"].forEach(function(N){x[N]>2&&(C=N)});let I=x[C].toFixed(C!=="Seconds"&&C!=="Minutes"?1:0);return E.langFormat("accessibility.axis.timeRange"+C,{chart:E,axis:S,range:I.replace(".0","")})}(v):function(S){let E=S.chart,x=E.options,A=x&&x.accessibility&&x.accessibility.screenReaderSection.axisRangeDateFormat||"",D={min:S.dataMin||S.min||0,max:S.dataMax||S.max||0},C=function(I){return S.dateTime?E.time.dateFormat(A,D[I]):D[I].toString()};return E.langFormat("accessibility.axis.rangeFromTo",{chart:E,axis:S,rangeFrom:C("min"),rangeTo:C("max")})}(v)},getPointFromXY:function(v,T,S){let E=v.length,x;for(;E--;)if(x=g(v[E].points||[],function(A){return A.x===T&&A.y===S}))return x},getSeriesFirstPointElement:y,getSeriesFromName:function(v,T){return T?(v.series||[]).filter(function(S){return S.name===T}):v.series},getSeriesA11yElement:w,unhideChartElementFromAT:function v(T,S){S.setAttribute("aria-hidden",!1),S!==T.renderTo&&S.parentNode&&S.parentNode!==r.body&&(Array.prototype.forEach.call(S.parentNode.childNodes,function(E){E.hasAttribute("aria-hidden")||E.setAttribute("aria-hidden",!0)}),v(T,S.parentNode))},hideSeriesFromAT:function(v){let T=w(v);T&&T.setAttribute("aria-hidden",!0)},scrollAxisToPoint:function(v){let T=v.series.xAxis,S=v.series.yAxis,E=T&&T.scrollbar?T:S,x=E&&E.scrollbar;if(x&&f(x.to)&&f(x.from)){let A=x.to-x.from,D=function(C,I){if(!f(C.dataMin)||!f(C.dataMax))return 0;let N=C.toPixels(C.dataMin),W=C.toPixels(C.dataMax),Y=C.coll==="xAxis"?"x":"y";return(C.toPixels(I[Y]||0)-N)/(W-N)}(E,v);x.updatePosition(D-A/2,D+A/2),b(x,"changed",{from:x.from,to:x.to,trigger:"scrollbar",DOMEvent:null})}}}}),n(t,"Accessibility/Utils/DOMElementProvider.js",[t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l){let{doc:u}=s,{removeElement:r}=l;return class{constructor(){this.elements=[]}createElement(){let p=u.createElement.apply(u,arguments);return this.elements.push(p),p}removeElement(p){r(p),this.elements.splice(this.elements.indexOf(p),1)}destroyCreatedElements(){this.elements.forEach(function(p){r(p)}),this.elements=[]}}}),n(t,"Accessibility/Utils/EventProvider.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{addEvent:u}=l;return class{constructor(){this.eventRemovers=[]}addEvent(){let r=u.apply(s,arguments);return this.eventRemovers.push({element:arguments[0],remover:r}),r}removeEvent(r){let p=this.eventRemovers.map(f=>f.remover).indexOf(r);this.eventRemovers[p].remover(),this.eventRemovers.splice(p,1)}removeAddedEvents(){this.eventRemovers.map(r=>r.remover).forEach(r=>r()),this.eventRemovers=[]}}}),n(t,"Accessibility/AccessibilityComponent.js",[t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l,u,r){let{fireEventOnWrappedOrUnwrappedElement:p}=s,{getFakeMouseEvent:f}=r;return class{destroy(){}getKeyboardNavigation(){return[]}init(){}onChartRender(){}onChartUpdate(){}initBase(g,b){this.chart=g,this.eventProvider=new u,this.domElementProvider=new l,this.proxyProvider=b,this.keyCodes={left:37,right:39,up:38,down:40,enter:13,space:32,esc:27,tab:9,pageUp:33,pageDown:34,end:35,home:36}}addEvent(g,b,y,w){return this.eventProvider.addEvent(g,b,y,w)}createElement(g,b){return this.domElementProvider.createElement(g,b)}fakeClickEvent(g){p(g,f("click"))}destroyBase(){this.domElementProvider.destroyCreatedElements(),this.eventProvider.removeAddedEvents()}}}),n(t,"Accessibility/KeyboardNavigationHandler.js",[t["Core/Utilities.js"]],function(s){let{find:l}=s;return class{constructor(u,r){this.chart=u,this.keyCodeMap=r.keyCodeMap||[],this.validate=r.validate,this.init=r.init,this.terminate=r.terminate,this.response={success:1,prev:2,next:3,noHandler:4,fail:5}}run(u){let r=u.which||u.keyCode,p=this.response.noHandler,f=l(this.keyCodeMap,function(g){return g[0].indexOf(r)>-1});return f?p=f[1].call(this,r,u):r===9&&(p=this.response[u.shiftKey?"prev":"next"]),p}}}),n(t,"Accessibility/Components/ContainerComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l,u,r,p){let{unhideChartElementFromAT:f,getChartTitle:g}=u,{doc:b}=r,{stripHTMLTagsFromString:y}=p;return class extends s{onChartUpdate(){this.handleSVGTitleElement(),this.setSVGContainerLabel(),this.setGraphicContainerAttrs(),this.setRenderToAttrs(),this.makeCreditsAccessible()}handleSVGTitleElement(){let w=this.chart,v="highcharts-title-"+w.index,T=y(w.langFormat("accessibility.svgContainerTitle",{chartTitle:g(w)}));if(T.length){let S=this.svgTitleElement=this.svgTitleElement||b.createElementNS("http://www.w3.org/2000/svg","title");S.textContent=T,S.id=v,w.renderTo.insertBefore(S,w.renderTo.firstChild)}}setSVGContainerLabel(){let w=this.chart,v=w.langFormat("accessibility.svgContainerLabel",{chartTitle:g(w)});w.renderer.box&&v.length&&w.renderer.box.setAttribute("aria-label",v)}setGraphicContainerAttrs(){let w=this.chart,v=w.langFormat("accessibility.graphicContainerLabel",{chartTitle:g(w)});v.length&&w.container.setAttribute("aria-label",v)}setRenderToAttrs(){let w=this.chart,v=w.options.accessibility.landmarkVerbosity!=="disabled",T=w.langFormat("accessibility.chartContainerLabel",{title:g(w),chart:w});T&&(w.renderTo.setAttribute("role",v?"region":"group"),w.renderTo.setAttribute("aria-label",T))}makeCreditsAccessible(){let w=this.chart,v=w.credits;v&&(v.textStr&&v.element.setAttribute("aria-label",w.langFormat("accessibility.credits",{creditsStr:y(v.textStr,w.renderer.forExport)})),f(w,v.element))}getKeyboardNavigation(){let w=this.chart;return new l(w,{keyCodeMap:[],validate:function(){return!0},init:function(){let v=w.accessibility;v&&v.keyboardNavigation.tabindexContainer.focus()}})}destroy(){this.chart.renderTo.setAttribute("aria-hidden",!0)}}}),n(t,"Accessibility/FocusBorder.js",[t["Core/Utilities.js"]],function(s){var l;let{addEvent:u,pick:r}=s;return function(p){let f=["x","y","transform","width","height","r","d","stroke-width"];function g(){let v=this.focusElement,T=this.options.accessibility.keyboardNavigation.focusBorder;v&&(v.removeFocusBorder(),T.enabled&&v.addFocusBorder(T.margin,{stroke:T.style.color,strokeWidth:T.style.lineWidth,r:T.style.borderRadius}))}function b(v,T){let S=this.options.accessibility.keyboardNavigation.focusBorder,E=T||v.element;E&&E.focus&&(E.hcEvents&&E.hcEvents.focusin||u(E,"focusin",function(){}),E.focus(),S.hideBrowserFocusOutline&&(E.style.outline="none")),this.focusElement&&this.focusElement.removeFocusBorder(),this.focusElement=v,this.renderFocusBorder()}function y(v,T){this.focusBorder&&this.removeFocusBorder();let S=this.getBBox(),E=r(v,3),x=this.parentGroup,A=this.scaleX||x&&x.scaleX,D=this.scaleY||x&&x.scaleY,C=(A?!D:D)?Math.abs(A||D||1):(Math.abs(A||1)+Math.abs(D||1))/2;S.x+=this.translateX?this.translateX:0,S.y+=this.translateY?this.translateY:0;let I=S.x-E,N=S.y-E,W=S.width+2*E,Y=S.height+2*E,X=!!this.text;if(this.element.nodeName==="text"||X){let O,V,$=!!this.rotation,L=X?{x:$?1:0,y:0}:(O=0,V=0,this.attr("text-anchor")==="middle"?O=V=.5:this.rotation?O=.25:V=.75,{x:O,y:V}),R=+this.attr("x"),G=+this.attr("y");if(isNaN(R)||(I=R-S.width*L.x-E),isNaN(G)||(N=G-S.height*L.y-E),X&&$){let U=W;W=Y,Y=U,isNaN(R)||(I=R-S.height*L.x-E),isNaN(G)||(N=G-S.width*L.y-E)}}this.focusBorder=this.renderer.rect(I,N,W,Y,parseInt((T&&T.r||0).toString(),10)/C).addClass("highcharts-focus-border").attr({zIndex:99}).add(x),this.renderer.styledMode||this.focusBorder.attr({stroke:T&&T.stroke,"stroke-width":(T&&T.strokeWidth||0)/C}),function(O,...V){O.focusBorderUpdateHooks||(O.focusBorderUpdateHooks={},f.forEach($=>{let L=$+"Setter",R=O[L]||O._defaultSetter;O.focusBorderUpdateHooks[L]=R,O[L]=function(){let G=R.apply(O,arguments);return O.addFocusBorder.apply(O,V),G}}))}(this,v,T),function(O){if(O.focusBorderDestroyHook)return;let V=O.destroy;O.destroy=function(){return O.focusBorder&&O.focusBorder.destroy&&O.focusBorder.destroy(),V.apply(O,arguments)},O.focusBorderDestroyHook=V}(this)}function w(){var v;v=this,v.focusBorderUpdateHooks&&(Object.keys(v.focusBorderUpdateHooks).forEach(T=>{let S=v.focusBorderUpdateHooks[T];S===v._defaultSetter?delete v[T]:v[T]=S}),delete v.focusBorderUpdateHooks),this.focusBorderDestroyHook&&(this.destroy=this.focusBorderDestroyHook,delete this.focusBorderDestroyHook),this.focusBorder&&(this.focusBorder.destroy(),delete this.focusBorder)}p.compose=function(v,T){let S=v.prototype,E=T.prototype;S.renderFocusBorder||(S.renderFocusBorder=g,S.setFocusToElement=b),E.addFocusBorder||(E.addFocusBorder=y,E.removeFocusBorder=w)}}(l||(l={})),l}),n(t,"Accessibility/Utils/Announcer.js",[t["Core/Renderer/HTML/AST.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{doc:f}=u,{addClass:g,visuallyHideElement:b}=r,{attr:y}=p;return class{constructor(w,v){this.chart=w,this.domElementProvider=new l,this.announceRegion=this.addAnnounceRegion(v)}destroy(){this.domElementProvider.destroyCreatedElements()}announce(w){s.setElementHTML(this.announceRegion,w),this.clearAnnouncementRegionTimer&&clearTimeout(this.clearAnnouncementRegionTimer),this.clearAnnouncementRegionTimer=setTimeout(()=>{this.announceRegion.innerHTML=s.emptyHTML,delete this.clearAnnouncementRegionTimer},3e3)}addAnnounceRegion(w){let v=this.chart.announcerContainer||this.createAnnouncerContainer(),T=this.domElementProvider.createElement("div");return y(T,{"aria-hidden":!1,"aria-live":w,"aria-atomic":!0}),this.chart.styledMode?g(T,"highcharts-visually-hidden"):b(T),v.appendChild(T),T}createAnnouncerContainer(){let w=this.chart,v=f.createElement("div");return y(v,{"aria-hidden":!1,class:"highcharts-announcer-container"}),v.style.position="relative",w.renderTo.insertBefore(v,w.renderTo.firstChild),w.announcerContainer=v,v}}}),n(t,"Accessibility/Components/AnnotationsA11y.js",[t["Accessibility/Utils/HTMLUtilities.js"]],function(s){let{escapeStringForHTML:l,stripHTMLTagsFromString:u}=s;function r(b){return(b.annotations||[]).reduce((y,w)=>(w.options&&w.options.visible!==!1&&(y=y.concat(w.labels)),y),[])}function p(b){return b.options&&b.options.accessibility&&b.options.accessibility.description||b.graphic&&b.graphic.text&&b.graphic.text.textStr||""}function f(b){let y=b.options&&b.options.accessibility&&b.options.accessibility.description;if(y)return y;let w=b.chart,v=p(b),T=b.points,S=C=>C.graphic&&C.graphic.element&&C.graphic.element.getAttribute("aria-label")||"",E=T.filter(C=>!!C.graphic).map(C=>{let I=C.accessibility&&C.accessibility.valueDescription||S(C),N=C&&C.series.name||"";return(N?N+", ":"")+"data point "+I}).filter(C=>!!C),x=E.length,A=x>1?"MultiplePoints":x?"SinglePoint":"NoPoints",D={annotationText:v,annotation:b,numPoints:x,annotationPoint:E[0],additionalAnnotationPoints:E.slice(1)};return w.langFormat("accessibility.screenReaderSection.annotations.description"+A,D)}function g(b){return r(b).map(y=>{let w=l(u(f(y),b.renderer.forExport));return w?`<li>${w}</li>`:""})}return{getAnnotationsInfoHTML:function(b){let y=b.annotations;return y&&y.length?`<ul style="list-style-type: none">${g(b).join(" ")}</ul>`:""},getAnnotationLabelDescription:f,getAnnotationListItems:g,getPointAnnotationTexts:function(b){let y=r(b.series.chart).filter(w=>w.points.indexOf(b)>-1);return y.length?y.map(w=>`${p(w)}`):[]}}}),n(t,"Accessibility/Components/InfoRegionsComponent.js",[t["Accessibility/A11yI18n.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Components/AnnotationsA11y.js"],t["Core/Renderer/HTML/AST.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,g,b,y,w){let{getAnnotationsInfoHTML:v}=r,{getAxisDescription:T,getAxisRangeDescription:S,getChartTitle:E,unhideChartElementFromAT:x}=f,{format:A}=g,{doc:D}=b,{addClass:C,getElement:I,getHeadingTagNameForElement:N,stripHTMLTagsFromString:W,visuallyHideElement:Y}=y,{attr:X,pick:O,replaceNested:V}=w;function $(L){return V(L,[/<([\w\-.:!]+)\b[^<>]*>\s*<\/\1>/g,""])}return class extends l{constructor(){super(...arguments),this.screenReaderSections={}}init(){let L=this.chart,R=this;this.initRegionsDefinitions(),this.addEvent(L,"aftergetTableAST",function(G){R.onDataTableCreated(G)}),this.addEvent(L,"afterViewData",function(G){G.wasHidden&&(R.dataTableDiv=G.element,setTimeout(function(){R.focusDataTable()},300))}),this.addEvent(L,"afterHideData",function(){R.viewDataTableButton&&R.viewDataTableButton.setAttribute("aria-expanded","false")}),L.exporting&&this.addEvent(L,"afterPrint",function(){R.updateAllScreenReaderSections()}),this.announcer=new u(L,"assertive")}initRegionsDefinitions(){let L=this,R=this.chart.options.accessibility;this.screenReaderSections={before:{element:null,buildContent:function(G){let U=R.screenReaderSection.beforeChartFormatter;return U?U(G):L.defaultBeforeChartFormatter(G)},insertIntoDOM:function(G,U){U.renderTo.insertBefore(G,U.renderTo.firstChild)},afterInserted:function(){L.sonifyButtonId!==void 0&&L.initSonifyButton(L.sonifyButtonId),L.dataTableButtonId!==void 0&&L.initDataTableButton(L.dataTableButtonId)}},after:{element:null,buildContent:function(G){let U=R.screenReaderSection.afterChartFormatter;return U?U(G):L.defaultAfterChartFormatter()},insertIntoDOM:function(G,U){U.renderTo.insertBefore(G,U.container.nextSibling)},afterInserted:function(){L.chart.accessibility&&R.keyboardNavigation.enabled&&L.chart.accessibility.keyboardNavigation.updateExitAnchor()}}}}onChartRender(){this.linkedDescriptionElement=this.getLinkedDescriptionElement(),this.setLinkedDescriptionAttrs(),this.updateAllScreenReaderSections()}updateAllScreenReaderSections(){let L=this;Object.keys(this.screenReaderSections).forEach(function(R){L.updateScreenReaderSection(R)})}getLinkedDescriptionElement(){let L=this.chart.options.accessibility.linkedDescription;if(!L)return;if(typeof L!="string")return L;let R=A(L,this.chart),G=D.querySelectorAll(R);if(G.length===1)return G[0]}setLinkedDescriptionAttrs(){let L=this.linkedDescriptionElement;L&&(L.setAttribute("aria-hidden","true"),C(L,"highcharts-linked-description"))}updateScreenReaderSection(L){let R=this.chart,G=this.screenReaderSections[L],U=G.buildContent(R),B=G.element=G.element||this.createElement("div"),H=B.firstChild||this.createElement("div");U?(this.setScreenReaderSectionAttribs(B,L),p.setElementHTML(H,U),B.appendChild(H),G.insertIntoDOM(B,R),R.styledMode?C(H,"highcharts-visually-hidden"):Y(H),x(R,H),G.afterInserted&&G.afterInserted()):(B.parentNode&&B.parentNode.removeChild(B),G.element=null)}setScreenReaderSectionAttribs(L,R){let G=this.chart,U=G.langFormat("accessibility.screenReaderSection."+R+"RegionLabel",{chart:G,chartTitle:E(G)});X(L,{id:`highcharts-screen-reader-region-${R}-${G.index}`,"aria-label":U||void 0}),L.style.position="relative",U&&L.setAttribute("role",G.options.accessibility.landmarkVerbosity==="all"?"region":"group")}defaultBeforeChartFormatter(){let L=this.chart,R=L.options.accessibility.screenReaderSection.beforeChartFormat;if(!R)return"";let G=this.getAxesDescription(),U=L.sonify&&L.options.sonification&&L.options.sonification.enabled,B="highcharts-a11y-sonify-data-btn-"+L.index,H="hc-linkto-highcharts-data-table-"+L.index,q=v(L),se=L.langFormat("accessibility.screenReaderSection.annotations.heading",{chart:L}),pe={headingTagName:N(L.renderTo),chartTitle:E(L),typeDescription:this.getTypeDescriptionText(),chartSubtitle:this.getSubtitleText(),chartLongdesc:this.getLongdescText(),xAxisDescription:G.xAxis,yAxisDescription:G.yAxis,playAsSoundButton:U?this.getSonifyButtonText(B):"",viewTableButton:L.getCSV?this.getDataTableButtonText(H):"",annotationsTitle:q?se:"",annotationsList:q},ne=s.i18nFormat(R,pe,L);return this.dataTableButtonId=H,this.sonifyButtonId=B,$(ne)}defaultAfterChartFormatter(){let L=this.chart,R=L.options.accessibility.screenReaderSection.afterChartFormat;if(!R)return"";let G={endOfChartMarker:this.getEndOfChartMarkerText()};return $(s.i18nFormat(R,G,L))}getLinkedDescription(){let L=this.linkedDescriptionElement;return W(L&&L.innerHTML||"",this.chart.renderer.forExport)}getLongdescText(){let L=this.chart.options,R=L.caption,G=R&&R.text,U=this.getLinkedDescription();return L.accessibility.description||U||G||""}getTypeDescriptionText(){let L=this.chart;return L.types?L.options.accessibility.typeDescription||function(R,G){let U=G[0],B=R.series&&R.series[0]||{},H=R.mapView&&R.mapView.geoMap&&R.mapView.geoMap.title,q={numSeries:R.series.length,numPoints:B.points&&B.points.length,chart:R,mapTitle:H};return U?U==="map"||U==="tiledwebmap"?q.mapTitle?R.langFormat("accessibility.chartTypes.mapTypeDescription",q):R.langFormat("accessibility.chartTypes.unknownMap",q):R.types.length>1?R.langFormat("accessibility.chartTypes.combinationChart",q):function(se,pe,ne){let le=pe[0],ke=se.langFormat("accessibility.seriesTypeDescriptions."+le,ne),be=se.series&&se.series.length<2?"Single":"Multiple";return(se.langFormat("accessibility.chartTypes."+le+be,ne)||se.langFormat("accessibility.chartTypes.default"+be,ne))+(ke?" "+ke:"")}(R,G,q):R.langFormat("accessibility.chartTypes.emptyChart",q)}(L,L.types):""}getDataTableButtonText(L){let R=this.chart;return'<button id="'+L+'">'+R.langFormat("accessibility.table.viewAsDataTableButtonText",{chart:R,chartTitle:E(R)})+"</button>"}getSonifyButtonText(L){let R=this.chart;return R.options.sonification&&R.options.sonification.enabled===!1?"":'<button id="'+L+'">'+R.langFormat("accessibility.sonification.playAsSoundButtonText",{chart:R,chartTitle:E(R)})+"</button>"}getSubtitleText(){let L=this.chart.options.subtitle;return W(L&&L.text||"",this.chart.renderer.forExport)}getEndOfChartMarkerText(){let L=I(`highcharts-end-of-chart-marker-${this.chart.index}`);if(L)return L.outerHTML;let R=this.chart,G=R.langFormat("accessibility.screenReaderSection.endOfChartMarker",{chart:R});return'<div id="highcharts-end-of-chart-marker-'+R.index+'">'+G+"</div>"}onDataTableCreated(L){let R=this.chart;if(R.options.accessibility.enabled){this.viewDataTableButton&&this.viewDataTableButton.setAttribute("aria-expanded","true");let G=L.tree.attributes||{};G.tabindex=-1,G.summary=R.langFormat("accessibility.table.tableSummary",{chart:R}),L.tree.attributes=G}}focusDataTable(){let L=this.dataTableDiv,R=L&&L.getElementsByTagName("table")[0];R&&R.focus&&R.focus()}initSonifyButton(L){let R=this.sonifyButton=I(L),G=this.chart,U=B=>{R&&(R.setAttribute("aria-hidden","true"),R.setAttribute("aria-label","")),B.preventDefault(),B.stopPropagation();let H=G.langFormat("accessibility.sonification.playAsSoundClickAnnouncement",{chart:G});this.announcer.announce(H),setTimeout(()=>{R&&(R.removeAttribute("aria-hidden"),R.removeAttribute("aria-label")),G.sonify&&G.sonify()},1e3)};R&&G&&(R.setAttribute("tabindex",-1),R.onclick=function(B){(G.options.accessibility&&G.options.accessibility.screenReaderSection.onPlayAsSoundClick||U).call(this,B,G)})}initDataTableButton(L){let R=this.viewDataTableButton=I(L),G=this.chart,U=L.replace("hc-linkto-","");R&&(X(R,{tabindex:-1,"aria-expanded":!!I(U)}),R.onclick=G.options.accessibility.screenReaderSection.onViewDataTableClick||function(){G.viewData()})}getAxesDescription(){let L=this.chart,R=function(se,pe){let ne=L[se];return ne.length>1||ne[0]&&O(ne[0].options.accessibility&&ne[0].options.accessibility.enabled,pe)},G=!!L.types&&0>L.types.indexOf("map")&&0>L.types.indexOf("treemap")&&0>L.types.indexOf("tilemap"),U=!!L.hasCartesianSeries,B=R("xAxis",!L.angular&&U&&G),H=R("yAxis",U&&G),q={};return B&&(q.xAxis=this.getAxisDescriptionText("xAxis")),H&&(q.yAxis=this.getAxisDescriptionText("yAxis")),q}getAxisDescriptionText(L){let R=this.chart,G=R[L];return R.langFormat("accessibility.axis."+L+"Description"+(G.length>1?"Plural":"Singular"),{chart:R,names:G.map(function(U){return T(U)}),ranges:G.map(function(U){return S(U)}),numAxes:G.length})}destroy(){this.announcer&&this.announcer.destroy()}}}),n(t,"Accessibility/Components/MenuComponent.js",[t["Core/Utilities.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l,u,r,p){let{attr:f}=s,{getChartTitle:g,unhideChartElementFromAT:b}=r,{getFakeMouseEvent:y}=p;function w(T){return T.exportSVGElements&&T.exportSVGElements[0]}class v extends l{init(){let S=this.chart,E=this;this.addEvent(S,"exportMenuShown",function(){E.onMenuShown()}),this.addEvent(S,"exportMenuHidden",function(){E.onMenuHidden()}),this.createProxyGroup()}onMenuHidden(){let S=this.chart.exportContextMenu;S&&S.setAttribute("aria-hidden","true"),this.setExportButtonExpandedState("false")}onMenuShown(){let S=this.chart,E=S.exportContextMenu;E&&(this.addAccessibleContextMenuAttribs(),b(S,E)),this.setExportButtonExpandedState("true")}setExportButtonExpandedState(S){this.exportButtonProxy&&this.exportButtonProxy.innerElement.setAttribute("aria-expanded",S)}onChartRender(){let S=this.chart,E=S.focusElement,x=S.accessibility;this.proxyProvider.clearGroup("chartMenu"),this.proxyMenuButton(),this.exportButtonProxy&&E&&E===S.exportingGroup&&(E.focusBorder?S.setFocusToElement(E,this.exportButtonProxy.innerElement):x&&x.keyboardNavigation.tabindexContainer.focus())}proxyMenuButton(){let S=this.chart,E=this.proxyProvider,x=w(S);(function(A){let D=A.options.exporting,C=w(A);return!!(D&&D.enabled!==!1&&D.accessibility&&D.accessibility.enabled&&C&&C.element)})(S)&&x&&(this.exportButtonProxy=E.addProxyElement("chartMenu",{click:x},"button",{"aria-label":S.langFormat("accessibility.exporting.menuButtonLabel",{chart:S,chartTitle:g(S)}),"aria-expanded":!1,title:S.options.lang.contextButtonTitle||null}))}createProxyGroup(){this.chart&&this.proxyProvider&&this.proxyProvider.addGroup("chartMenu")}addAccessibleContextMenuAttribs(){let S=this.chart,E=S.exportDivElements;if(E&&E.length){E.forEach(A=>{A&&(A.tagName!=="LI"||A.children&&A.children.length?A.setAttribute("aria-hidden","true"):A.setAttribute("tabindex",-1))});let x=E[0]&&E[0].parentNode;x&&f(x,{"aria-hidden":void 0,"aria-label":S.langFormat("accessibility.exporting.chartMenuLabel",{chart:S}),role:"list"})}}getKeyboardNavigation(){let S=this.keyCodes,E=this.chart,x=this;return new u(E,{keyCodeMap:[[[S.left,S.up],function(){return x.onKbdPrevious(this)}],[[S.right,S.down],function(){return x.onKbdNext(this)}],[[S.enter,S.space],function(){return x.onKbdClick(this)}]],validate:function(){return!!E.exporting&&E.options.exporting.enabled!==!1&&E.options.exporting.accessibility.enabled!==!1},init:function(){let A=x.exportButtonProxy,D=x.chart.exportingGroup;A&&D&&E.setFocusToElement(D,A.innerElement)},terminate:function(){E.hideExportMenu()}})}onKbdPrevious(S){let E=this.chart,x=E.options.accessibility,A=S.response,D=E.highlightedExportItemIx||0;for(;D--;)if(E.highlightExportItem(D))return A.success;return x.keyboardNavigation.wrapAround?(E.highlightLastExportItem(),A.success):A.prev}onKbdNext(S){let E=this.chart,x=E.options.accessibility,A=S.response;for(let D=(E.highlightedExportItemIx||0)+1;D<E.exportDivElements.length;++D)if(E.highlightExportItem(D))return A.success;return x.keyboardNavigation.wrapAround?(E.highlightExportItem(0),A.success):A.next}onKbdClick(S){let E=this.chart,x=E.exportDivElements[E.highlightedExportItemIx],A=w(E).element;return E.openMenu?this.fakeClickEvent(x):(this.fakeClickEvent(A),E.highlightExportItem(0)),S.response.success}}return function(T){function S(){let D=w(this);if(D){let C=D.element;C.onclick&&C.onclick(y("click"))}}function E(){let D=this.exportDivElements;D&&this.exportContextMenu&&this.openMenu&&(D.forEach(C=>{C&&C.className==="highcharts-menu-item"&&C.onmouseout&&C.onmouseout(y("mouseout"))}),this.highlightedExportItemIx=0,this.exportContextMenu.hideMenu(),this.container.focus())}function x(D){let C=this.exportDivElements&&this.exportDivElements[D],I=this.exportDivElements&&this.exportDivElements[this.highlightedExportItemIx];if(C&&C.tagName==="LI"&&!(C.children&&C.children.length)){let N=!!(this.renderTo.getElementsByTagName("g")[0]||{}).focus;return C.focus&&N&&C.focus(),I&&I.onmouseout&&I.onmouseout(y("mouseout")),C.onmouseover&&C.onmouseover(y("mouseover")),this.highlightedExportItemIx=D,!0}return!1}function A(){if(this.exportDivElements){let D=this.exportDivElements.length;for(;D--;)if(this.highlightExportItem(D))return!0}return!1}T.compose=function(D){let C=D.prototype;C.hideExportMenu||(C.hideExportMenu=E,C.highlightExportItem=x,C.highlightLastExportItem=A,C.showExportMenu=S)}}(v),v}),n(t,"Accessibility/KeyboardNavigation.js",[t["Core/Globals.js"],t["Accessibility/Components/MenuComponent.js"],t["Core/Utilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l,u,r,p){let{doc:f,win:g}=s,{addEvent:b,defined:y,fireEvent:w}=u,{getElement:v,simulatedEventTarget:T}=p;class S{constructor(x,A){this.currentModuleIx=NaN,this.modules=[],this.init(x,A)}init(x,A){let D=this.eventProvider=new r;this.chart=x,this.components=A,this.modules=[],this.currentModuleIx=0,this.update(),D.addEvent(this.tabindexContainer,"keydown",C=>this.onKeydown(C)),D.addEvent(this.tabindexContainer,"focus",C=>this.onFocus(C)),["mouseup","touchend"].forEach(C=>D.addEvent(f,C,I=>this.onMouseUp(I))),["mousedown","touchstart"].forEach(C=>D.addEvent(x.renderTo,C,()=>{this.isClickingChart=!0}))}update(x){let A=this.chart.options.accessibility,D=A&&A.keyboardNavigation,C=this.components;this.updateContainerTabindex(),D&&D.enabled&&x&&x.length?(this.modules=x.reduce(function(I,N){let W=C[N].getKeyboardNavigation();return I.concat(W)},[]),this.updateExitAnchor()):(this.modules=[],this.currentModuleIx=0,this.removeExitAnchor())}updateExitAnchor(){let x=v(`highcharts-end-of-chart-marker-${this.chart.index}`);this.removeExitAnchor(),x?(this.makeElementAnExitAnchor(x),this.exitAnchor=x):this.createExitAnchor()}move(x){let A=this.modules&&this.modules[this.currentModuleIx];A&&A.terminate&&A.terminate(x),this.chart.focusElement&&this.chart.focusElement.removeFocusBorder(),this.currentModuleIx+=x;let D=this.modules&&this.modules[this.currentModuleIx];if(D){if(D.validate&&!D.validate())return this.move(x);if(D.init)return D.init(x),!0}return this.currentModuleIx=0,this.exiting=!0,x>0?this.exitAnchor&&this.exitAnchor.focus():this.tabindexContainer.focus(),!1}onFocus(x){let A=this.chart,D=x.relatedTarget&&A.container.contains(x.relatedTarget),C=A.options.accessibility,I=C&&C.keyboardNavigation;if(I&&I.enabled&&!this.exiting&&!this.tabbingInBackwards&&!this.isClickingChart&&!D){let N=this.getFirstValidModuleIx();N!==null&&(this.currentModuleIx=N,this.modules[N].init(1))}this.keyboardReset=!1,this.exiting=!1}onMouseUp(x){if(delete this.isClickingChart,!this.keyboardReset&&x.relatedTarget!==T){let A=this.chart;if(!x.target||!A.container.contains(x.target)){let D=this.modules&&this.modules[this.currentModuleIx||0];D&&D.terminate&&D.terminate(),this.currentModuleIx=0}A.focusElement&&(A.focusElement.removeFocusBorder(),delete A.focusElement),this.keyboardReset=!0}}onKeydown(x){let A,D=x||g.event,C=this.modules&&this.modules.length&&this.modules[this.currentModuleIx],I=D.target;if((!I||I.nodeName!=="INPUT"||I.classList.contains("highcharts-a11y-proxy-element"))&&(this.keyboardReset=!1,this.exiting=!1,C)){let N=C.run(D);N===C.response.success?A=!0:N===C.response.prev?A=this.move(-1):N===C.response.next&&(A=this.move(1)),A&&(D.preventDefault(),D.stopPropagation())}}updateContainerTabindex(){let x,A=this.chart.options.accessibility,D=A&&A.keyboardNavigation,C=!(D&&D.enabled===!1),I=this.chart,N=I.container;I.renderTo.hasAttribute("tabindex")?(N.removeAttribute("tabindex"),x=I.renderTo):x=N,this.tabindexContainer=x;let W=x.getAttribute("tabindex");C&&!W?x.setAttribute("tabindex","0"):C||I.container.removeAttribute("tabindex")}createExitAnchor(){let x=this.chart,A=this.exitAnchor=f.createElement("div");x.renderTo.appendChild(A),this.makeElementAnExitAnchor(A)}makeElementAnExitAnchor(x){let A=this.tabindexContainer.getAttribute("tabindex")||0;x.setAttribute("class","highcharts-exit-anchor"),x.setAttribute("tabindex",A),x.setAttribute("aria-hidden",!1),this.addExitAnchorEventsToEl(x)}removeExitAnchor(){if(this.exitAnchor){let x=this.eventProvider.eventRemovers.find(A=>A.element===this.exitAnchor);x&&y(x.remover)&&this.eventProvider.removeEvent(x.remover),this.exitAnchor.parentNode&&this.exitAnchor.parentNode.removeChild(this.exitAnchor),delete this.exitAnchor}}addExitAnchorEventsToEl(x){let A=this.chart,D=this;this.eventProvider.addEvent(x,"focus",function(C){let I=C||g.event,N=!(I.relatedTarget&&A.container.contains(I.relatedTarget)||D.exiting);if(A.focusElement&&delete A.focusElement,N){if(D.tabbingInBackwards=!0,D.tabindexContainer.focus(),delete D.tabbingInBackwards,I.preventDefault(),D.modules&&D.modules.length){D.currentModuleIx=D.modules.length-1;let W=D.modules[D.currentModuleIx];W&&W.validate&&!W.validate()?D.move(-1):W&&W.init(-1)}}else D.exiting=!1})}getFirstValidModuleIx(){let x=this.modules.length;for(let A=0;A<x;++A){let D=this.modules[A];if(!D.validate||D.validate())return A}return null}destroy(){this.removeExitAnchor(),this.eventProvider.removeAddedEvents(),this.chart.container.removeAttribute("tabindex")}}return function(E){function x(){let D=this;w(this,"dismissPopupContent",{},function(){D.tooltip&&D.tooltip.hide(0),D.hideExportMenu()})}function A(D){(D.which||D.keyCode)===27&&s.charts&&s.charts.forEach(C=>{C&&C.dismissPopupContent&&C.dismissPopupContent()})}E.compose=function(D){l.compose(D);let C=D.prototype;return C.dismissPopupContent||(C.dismissPopupContent=x,b(f,"keydown",A)),D}}(S),S}),n(t,"Accessibility/Components/LegendComponent.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Legend/Legend.js"],t["Core/Utilities.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l,u,r,p,f,g,b){let{animObject:y}=s,{doc:w}=l,{addEvent:v,fireEvent:T,isNumber:S,pick:E,syncTimeout:x}=r,{getChartTitle:A}=g,{stripHTMLTagsFromString:D,addClass:C,removeClass:I}=b;function N(X){let O=X.legend&&X.legend.allItems,V=X.options.legend.accessibility||{},$=X.colorAxis&&X.colorAxis.some(L=>!L.dataClasses||!L.dataClasses.length);return!!(O&&O.length&&!$&&V.enabled!==!1)}function W(X,O){let V=O.legendItem||{};for(let $ of(O.setState(X?"hover":"",!0),["group","label","symbol"])){let L=V[$],R=L&&L.element||L;R&&T(R,X?"mouseover":"mouseout")}}class Y extends p{constructor(){super(...arguments),this.highlightedLegendItemIx=NaN,this.proxyGroup=null}init(){let O=this;this.recreateProxies(),this.addEvent(u,"afterScroll",function(){this.chart===O.chart&&(O.proxyProvider.updateGroupProxyElementPositions("legend"),O.updateLegendItemProxyVisibility(),O.highlightedLegendItemIx>-1&&this.chart.highlightLegendItem(O.highlightedLegendItemIx))}),this.addEvent(u,"afterPositionItem",function(V){this.chart===O.chart&&this.chart.renderer&&O.updateProxyPositionForItem(V.item)}),this.addEvent(u,"afterRender",function(){this.chart===O.chart&&this.chart.renderer&&O.recreateProxies()&&x(()=>O.proxyProvider.updateGroupProxyElementPositions("legend"),y(E(this.chart.renderer.globalAnimation,!0)).duration)})}updateLegendItemProxyVisibility(){let O,V=this.chart,$=V.legend,L=$.allItems||[],R=$.currentPage||1,G=$.clipHeight||0;L.forEach(U=>{if(U.a11yProxyElement){let B=$.pages&&$.pages.length,H=U.a11yProxyElement.element,q=!1;if(O=U.legendItem||{},B){let se=O.pageIx||0;q=(O.y||0)+(O.label?Math.round(O.label.getBBox().height):0)-$.pages[se]>G||se!==R-1}q?V.styledMode?C(H,"highcharts-a11y-invisible"):H.style.visibility="hidden":(I(H,"highcharts-a11y-invisible"),H.style.visibility="")}})}onChartRender(){N(this.chart)||this.removeProxies()}highlightAdjacentLegendPage(O){let V=this.chart,$=V.legend,L=($.currentPage||1)+O,R=$.pages||[];if(L>0&&L<=R.length){let G=0;for(let U of $.allItems)((U.legendItem||{}).pageIx||0)+1===L&&V.highlightLegendItem(G)&&(this.highlightedLegendItemIx=G),++G}}updateProxyPositionForItem(O){O.a11yProxyElement&&O.a11yProxyElement.refreshPosition()}recreateProxies(){let O=w.activeElement,V=this.proxyGroup,$=O&&V&&V.contains(O);return this.removeProxies(),!!N(this.chart)&&(this.addLegendProxyGroup(),this.proxyLegendItems(),this.updateLegendItemProxyVisibility(),this.updateLegendTitle(),$&&this.chart.highlightLegendItem(this.highlightedLegendItemIx),!0)}removeProxies(){this.proxyProvider.removeGroup("legend")}updateLegendTitle(){let O=this.chart,V=D((O.legend&&O.legend.options.title&&O.legend.options.title.text||"").replace(/<br ?\/?>/g," "),O.renderer.forExport),$=O.langFormat("accessibility.legend.legendLabel"+(V?"":"NoTitle"),{chart:O,legendTitle:V,chartTitle:A(O)});this.proxyProvider.updateGroupAttrs("legend",{"aria-label":$})}addLegendProxyGroup(){let O=this.chart.options.accessibility.landmarkVerbosity==="all"?"region":null;this.proxyGroup=this.proxyProvider.addGroup("legend","ul",{"aria-label":"_placeholder_",role:O})}proxyLegendItems(){let O,V=this;((this.chart.legend||{}).allItems||[]).forEach($=>{(O=$.legendItem||{}).label&&O.label.element&&V.proxyLegendItem($)})}proxyLegendItem(O){let V=O.legendItem||{};if(!V.label||!V.group)return;let $=this.chart.langFormat("accessibility.legend.legendItem",{chart:this.chart,itemName:D(O.name,this.chart.renderer.forExport),item:O}),L={tabindex:-1,"aria-pressed":O.visible,"aria-label":$},R=V.group.div?V.label:V.group;O.a11yProxyElement=this.proxyProvider.addProxyElement("legend",{click:V.label,visual:R.element},"button",L)}getKeyboardNavigation(){let O=this.keyCodes,V=this,$=this.chart;return new f($,{keyCodeMap:[[[O.left,O.right,O.up,O.down],function(L){return V.onKbdArrowKey(this,L)}],[[O.enter,O.space],function(){return V.onKbdClick(this)}],[[O.pageDown,O.pageUp],function(L){let R=L===O.pageDown?1:-1;return V.highlightAdjacentLegendPage(R),this.response.success}]],validate:function(){return V.shouldHaveLegendNavigation()},init:function(){$.highlightLegendItem(0),V.highlightedLegendItemIx=0},terminate:function(){V.highlightedLegendItemIx=-1,$.legend.allItems.forEach(L=>W(!1,L))}})}onKbdArrowKey(O,V){let{keyCodes:{left:$,up:L},highlightedLegendItemIx:R,chart:G}=this,U=G.legend.allItems.length,B=G.options.accessibility.keyboardNavigation.wrapAround,H=V===$||V===L?-1:1;return G.highlightLegendItem(R+H)?this.highlightedLegendItemIx+=H:B&&U>1&&(this.highlightedLegendItemIx=H>0?0:U-1,G.highlightLegendItem(this.highlightedLegendItemIx)),O.response.success}onKbdClick(O){let V=this.chart.legend.allItems[this.highlightedLegendItemIx];return V&&V.a11yProxyElement&&V.a11yProxyElement.click(),O.response.success}shouldHaveLegendNavigation(){if(!N(this.chart))return!1;let O=this.chart,V=(O.options.legend||{}).accessibility||{};return!!(O.legend.display&&V.keyboardNavigation&&V.keyboardNavigation.enabled)}destroy(){this.removeProxies()}}return function(X){function O($){let L=this.legend.allItems,R=this.accessibility&&this.accessibility.components.legend.highlightedLegendItemIx,G=L[$],U=(G==null?void 0:G.legendItem)||{};if(G){S(R)&&L[R]&&W(!1,L[R]),function(q,se){let pe=(q.allItems[se].legendItem||{}).pageIx,ne=q.currentPage;pe!==void 0&&pe+1!==ne&&q.scroll(1+pe-ne)}(this.legend,$);let B=U.label,H=G.a11yProxyElement&&G.a11yProxyElement.innerElement;return B&&B.element&&H&&this.setFocusToElement(B,H),W(!0,G),!0}return!1}function V($){let L=this.chart.options.accessibility,R=$.item;L.enabled&&R&&R.a11yProxyElement&&R.a11yProxyElement.innerElement.setAttribute("aria-pressed",$.visible?"true":"false")}X.compose=function($,L){let R=$.prototype;R.highlightLegendItem||(R.highlightLegendItem=O,v(L,"afterColorizeItem",V))}}(Y),Y}),n(t,"Stock/Navigator/ChartNavigatorComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let u,{isTouchDevice:r}=s,{addEvent:p,merge:f,pick:g}=l,b=[];function y(){this.navigator&&this.navigator.setBaseSeries(null,!1)}function w(){var W;let A,D,C,I=this.legend,N=this.navigator;if(N){A=I&&I.options,D=N.xAxis,C=N.yAxis;let{scrollbarHeight:Y,scrollButtonSize:X}=N;this.inverted?(N.left=N.opposite?this.chartWidth-Y-N.height:this.spacing[3]+Y,N.top=this.plotTop+X):(N.left=g(D.left,this.plotLeft+X),N.top=N.navigatorOptions.top||this.chartHeight-N.height-Y-(((W=this.scrollbar)==null?void 0:W.options.margin)||0)-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(A&&A.verticalAlign==="bottom"&&A.layout!=="proximate"&&A.enabled&&!A.floating?I.legendHeight+g(A.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)),D&&C&&(this.inverted?D.options.left=C.options.left=N.left:D.options.top=C.options.top=N.top,D.setAxisSize(),C.setAxisSize())}}function v(A){!this.navigator&&!this.scroller&&(this.options.navigator.enabled||this.options.scrollbar.enabled)&&(this.scroller=this.navigator=new u(this),g(A.redraw,!0)&&this.redraw(A.animation))}function T(){let A=this.options;(A.navigator.enabled||A.scrollbar.enabled)&&(this.scroller=this.navigator=new u(this))}function S(){let A=this.options,D=A.navigator,C=A.rangeSelector;if((D&&D.enabled||C&&C.enabled)&&(!r&&this.zooming.type==="x"||r&&this.zooming.pinchType==="x"))return!1}function E(A){let D=A.navigator;if(D&&A.xAxis[0]){let C=A.xAxis[0].getExtremes();D.render(C.min,C.max)}}function x(A){let D=A.options.navigator||{},C=A.options.scrollbar||{};!this.navigator&&!this.scroller&&(D.enabled||C.enabled)&&(f(!0,this.options.navigator,D),f(!0,this.options.scrollbar,C),delete A.options.navigator,delete A.options.scrollbar)}return{compose:function(A,D){if(l.pushUnique(b,A)){let C=A.prototype;u=D,C.callbacks.push(E),p(A,"afterAddSeries",y),p(A,"afterSetChartSize",w),p(A,"afterUpdate",v),p(A,"beforeRender",T),p(A,"beforeShowResetZoom",S),p(A,"update",x)}}}}),n(t,"Core/Axis/NavigatorAxisComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{isTouchDevice:u}=s,{addEvent:r,correctFloat:p,defined:f,isNumber:g,pick:b}=l;function y(){this.navigatorAxis||(this.navigatorAxis=new v(this))}function w(T){let S,E=this.chart,x=E.options,A=x.navigator,D=this.navigatorAxis,C=E.zooming.pinchType,I=x.rangeSelector,N=E.zooming.type;if(this.isXAxis&&(A!=null&&A.enabled||I!=null&&I.enabled)){if(N==="y"&&T.trigger==="zoom")S=!1;else if((T.trigger==="zoom"&&N==="xy"||u&&C==="xy")&&this.options.range){let W=D.previousZoom;f(T.min)?D.previousZoom=[this.min,this.max]:W&&(T.min=W[0],T.max=W[1],D.previousZoom=void 0)}}S!==void 0&&T.preventDefault()}class v{static compose(S){S.keepProps.includes("navigatorAxis")||(S.keepProps.push("navigatorAxis"),r(S,"init",y),r(S,"setExtremes",w))}constructor(S){this.axis=S}destroy(){this.axis=void 0}toFixedRange(S,E,x,A){let D=this.axis,C=(D.pointRange||0)/2,I=b(x,D.translate(S,!0,!D.horiz)),N=b(A,D.translate(E,!0,!D.horiz));return f(x)||(I=p(I+C)),f(A)||(N=p(N-C)),g(I)&&g(N)||(I=N=void 0),{min:I,max:N}}}return v}),n(t,"Stock/Navigator/NavigatorDefaults.js",[t["Core/Color/Color.js"],t["Core/Series/SeriesRegistry.js"]],function(s,l){let{parse:u}=s,{seriesTypes:r}=l;return{height:40,margin:25,maskInside:!0,handles:{width:7,borderRadius:0,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:u("#667aff").setOpacity(.3).get(),outlineColor:"#999999",outlineWidth:1,series:{type:r.areaspline===void 0?"line":"areaspline",fillOpacity:.05,lineWidth:1,compare:null,sonification:{enabled:!1},dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,firstAnchor:"firstPoint",anchor:"middle",lastAnchor:"lastPoint",units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2,3,4]],["week",[1,2,3]],["month",[1,3,6]],["year",null]]},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},threshold:null},xAxis:{className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",id:"navigator-x-axis",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#000000",fontSize:"0.7em",opacity:.6,textOutline:"2px contrast"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,id:"navigator-y-axis",maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}}}),n(t,"Stock/Navigator/NavigatorSymbols.js",[t["Core/Renderer/SVG/Symbols.js"],t["Core/Utilities.js"]],function(s,l){let{relativeLength:u}=l;return{"navigator-handle":function(r,p,f,g,b={}){let y=b.width?b.width/2:f,w=u(b.borderRadius||0,Math.min(2*y,g));return[["M",-1.5,(g=b.height||g)/2-3.5],["L",-1.5,g/2+4.5],["M",.5,g/2-3.5],["L",.5,g/2+4.5],...s.rect(-y-1,.5,2*y+1,g,{r:w})]}}}),n(t,"Stock/Utilities/StockUtilities.js",[t["Core/Utilities.js"]],function(s){let{defined:l}=s;return{setFixedRange:function(u){let r=this.xAxis[0];l(r.dataMax)&&l(r.dataMin)&&u?this.fixedRange=Math.min(u,r.dataMax-r.dataMin):this.fixedRange=u}}}),n(t,"Stock/Navigator/NavigatorComposition.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorDefaults.js"],t["Stock/Navigator/NavigatorSymbols.js"],t["Core/Renderer/RendererRegistry.js"],t["Stock/Utilities/StockUtilities.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,g,b){let{setOptions:y}=s,{composed:w}=l,{getRendererType:v}=f,{setFixedRange:T}=g,{addEvent:S,extend:E,pushUnique:x}=b;function A(){this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1)}return{compose:function(D,C,I){u.compose(C),x(w,"Navigator")&&(D.prototype.setFixedRange=T,E(v().prototype.symbols,p),S(I,"afterUpdate",A),y({navigator:r}))}}}),n(t,"Core/Axis/ScrollbarAxis.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){var u;let{composed:r}=s,{addEvent:p,defined:f,pick:g,pushUnique:b}=l;return function(y){let w;function v(x){let A=g(x.options&&x.options.min,x.min),D=g(x.options&&x.options.max,x.max);return{axisMin:A,axisMax:D,scrollMin:f(x.dataMin)?Math.min(A,x.min,x.dataMin,g(x.threshold,1/0)):A,scrollMax:f(x.dataMax)?Math.max(D,x.max,x.dataMax,g(x.threshold,-1/0)):D}}function T(){let x=this.scrollbar,A=x&&!x.options.opposite,D=this.horiz?2:A?3:1;x&&(this.chart.scrollbarsOffsets=[0,0],this.chart.axisOffset[D]+=x.size+(x.options.margin||0))}function S(){let x=this;x.options&&x.options.scrollbar&&x.options.scrollbar.enabled&&(x.options.scrollbar.vertical=!x.horiz,x.options.startOnTick=x.options.endOnTick=!1,x.scrollbar=new w(x.chart.renderer,x.options.scrollbar,x.chart),p(x.scrollbar,"changed",function(A){let D,C,{axisMin:I,axisMax:N,scrollMin:W,scrollMax:Y}=v(x),X=Y-W;if(f(I)&&f(N))if(x.horiz&&!x.reversed||!x.horiz&&x.reversed?(D=W+X*this.to,C=W+X*this.from):(D=W+X*(1-this.from),C=W+X*(1-this.to)),this.shouldUpdateExtremes(A.DOMType)){let O=A.DOMType!=="mousemove"&&A.DOMType!=="touchmove"&&void 0;x.setExtremes(C,D,!0,O,A)}else this.setRange(this.from,this.to)}))}function E(){let x,A,D,{scrollMin:C,scrollMax:I}=v(this),N=this.scrollbar,W=this.axisTitleMargin+(this.titleOffset||0),Y=this.chart.scrollbarsOffsets,X=this.options.margin||0;if(N&&Y){if(this.horiz)this.opposite||(Y[1]+=W),N.position(this.left,this.top+this.height+2+Y[1]-(this.opposite?X:0),this.width,this.height),this.opposite||(Y[1]+=X),x=1;else{let O;this.opposite&&(Y[0]+=W),O=N.options.opposite?this.left+this.width+2+Y[0]-(this.opposite?0:X):this.opposite?0:X,N.position(O,this.top,this.width,this.height),this.opposite&&(Y[0]+=X),x=0}if(Y[x]+=N.size+(N.options.margin||0),isNaN(C)||isNaN(I)||!f(this.min)||!f(this.max)||this.dataMin===this.dataMax)N.setRange(0,1);else if(this.min===this.max){let O=this.pointRange/(this.dataMax+1);A=O*this.min,D=O*(this.max+1),N.setRange(A,D)}else A=(this.min-C)/(I-C),D=(this.max-C)/(I-C),this.horiz&&!this.reversed||!this.horiz&&this.reversed?N.setRange(A,D):N.setRange(1-D,1-A)}}y.compose=function(x,A){b(r,"Axis.Scrollbar")&&(w=A,p(x,"afterGetOffset",T),p(x,"afterInit",S),p(x,"afterRender",E))}}(u||(u={})),u}),n(t,"Stock/Scrollbar/ScrollbarDefaults.js",[],function(){return{height:10,barBorderRadius:5,buttonBorderRadius:0,buttonsEnabled:!1,liveRedraw:void 0,margin:void 0,minWidth:6,opposite:!0,step:.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:0,barBorderColor:"#cccccc",buttonArrowColor:"#333333",buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"none",trackBackgroundColor:"rgba(255, 255, 255, 0.001)",trackBorderColor:"#cccccc",trackBorderRadius:5,trackBorderWidth:1}}),n(t,"Stock/Scrollbar/Scrollbar.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/ScrollbarAxis.js"],t["Stock/Scrollbar/ScrollbarDefaults.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{defaultOptions:f}=s,{addEvent:g,correctFloat:b,crisp:y,defined:w,destroyObjectProperties:v,fireEvent:T,merge:S,pick:E,removeEvent:x}=p;class A{static compose(C){u.compose(C,A)}static swapXY(C,I){return I&&C.forEach(N=>{let W,Y=N.length;for(let X=0;X<Y;X+=2)typeof(W=N[X+1])=="number"&&(N[X+1]=N[X+2],N[X+2]=W)}),C}constructor(C,I,N){this._events=[],this.chartX=0,this.chartY=0,this.from=0,this.scrollbarButtons=[],this.scrollbarLeft=0,this.scrollbarStrokeWidth=1,this.scrollbarTop=0,this.size=0,this.to=0,this.trackBorderWidth=1,this.x=0,this.y=0,this.init(C,I,N)}addEvents(){let C=this.options.inverted?[1,0]:[0,1],I=this.scrollbarButtons,N=this.scrollbarGroup.element,W=this.track.element,Y=this.mouseDownHandler.bind(this),X=this.mouseMoveHandler.bind(this),O=this.mouseUpHandler.bind(this),V=[[I[C[0]].element,"click",this.buttonToMinClick.bind(this)],[I[C[1]].element,"click",this.buttonToMaxClick.bind(this)],[W,"click",this.trackClick.bind(this)],[N,"mousedown",Y],[N.ownerDocument,"mousemove",X],[N.ownerDocument,"mouseup",O],[N,"touchstart",Y],[N.ownerDocument,"touchmove",X],[N.ownerDocument,"touchend",O]];V.forEach(function($){g.apply(null,$)}),this._events=V}buttonToMaxClick(C){let I=(this.to-this.from)*E(this.options.step,.2);this.updatePosition(this.from+I,this.to+I),T(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:C})}buttonToMinClick(C){let I=b(this.to-this.from)*E(this.options.step,.2);this.updatePosition(b(this.from-I),b(this.to-I)),T(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:C})}cursorToScrollbarPosition(C){let I=this.options,N=I.minWidth>this.calculatedWidth?I.minWidth:0;return{chartX:(C.chartX-this.x-this.xOffset)/(this.barWidth-N),chartY:(C.chartY-this.y-this.yOffset)/(this.barWidth-N)}}destroy(){let C=this,I=C.chart.scroller;C.removeEvents(),["track","scrollbarRifles","scrollbar","scrollbarGroup","group"].forEach(function(N){C[N]&&C[N].destroy&&(C[N]=C[N].destroy())}),I&&C===I.scrollbar&&(I.scrollbar=null,v(I.scrollbarButtons))}drawScrollbarButton(C){let I=this.renderer,N=this.scrollbarButtons,W=this.options,Y=this.size,X=I.g().add(this.group);if(N.push(X),W.buttonsEnabled){let O=I.rect().addClass("highcharts-scrollbar-button").add(X);this.chart.styledMode||O.attr({stroke:W.buttonBorderColor,"stroke-width":W.buttonBorderWidth,fill:W.buttonBackgroundColor}),O.attr(O.crisp({x:-.5,y:-.5,width:Y,height:Y,r:W.buttonBorderRadius},O.strokeWidth()));let V=I.path(A.swapXY([["M",Y/2+(C?-1:1),Y/2-3],["L",Y/2+(C?-1:1),Y/2+3],["L",Y/2+(C?2:-2),Y/2]],W.vertical)).addClass("highcharts-scrollbar-arrow").add(N[C]);this.chart.styledMode||V.attr({fill:W.buttonArrowColor})}}init(C,I,N){this.scrollbarButtons=[],this.renderer=C,this.userOptions=I,this.options=S(r,f.scrollbar,I),this.options.margin=E(this.options.margin,10),this.chart=N,this.size=E(this.options.size,this.options.height),I.enabled&&(this.render(),this.addEvents())}mouseDownHandler(C){var W;let I=((W=this.chart.pointer)==null?void 0:W.normalize(C))||C,N=this.cursorToScrollbarPosition(I);this.chartX=N.chartX,this.chartY=N.chartY,this.initPositions=[this.from,this.to],this.grabbedCenter=!0}mouseMoveHandler(C){var X;let I,N=((X=this.chart.pointer)==null?void 0:X.normalize(C))||C,W=this.options.vertical?"chartY":"chartX",Y=this.initPositions||[];this.grabbedCenter&&(!C.touches||C.touches[0][W]!==0)&&(I=this.cursorToScrollbarPosition(N)[W]-this[W],this.hasDragged=!0,this.updatePosition(Y[0]+I,Y[1]+I),this.hasDragged&&T(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:C.type,DOMEvent:C}))}mouseUpHandler(C){this.hasDragged&&T(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:C.type,DOMEvent:C}),this.grabbedCenter=this.hasDragged=this.chartX=this.chartY=null}position(C,I,N,W){let{buttonsEnabled:Y,margin:X=0,vertical:O}=this.options,V=this.rendered?"animate":"attr",$=W,L=0;this.group.show(),this.x=C,this.y=I+this.trackBorderWidth,this.width=N,this.height=W,this.xOffset=$,this.yOffset=L,O?(this.width=this.yOffset=N=L=this.size,this.xOffset=$=0,this.yOffset=L=Y?this.size:0,this.barWidth=W-(Y?2*N:0),this.x=C+=X):(this.height=W=this.size,this.xOffset=$=Y?this.size:0,this.barWidth=N-(Y?2*W:0),this.y=this.y+X),this.group[V]({translateX:C,translateY:this.y}),this.track[V]({width:N,height:W}),this.scrollbarButtons[1][V]({translateX:O?0:N-$,translateY:O?W-L:0})}removeEvents(){this._events.forEach(function(C){x.apply(null,C)}),this._events.length=0}render(){let C=this.renderer,I=this.options,N=this.size,W=this.chart.styledMode,Y=C.g("scrollbar").attr({zIndex:I.zIndex}).hide().add();this.group=Y,this.track=C.rect().addClass("highcharts-scrollbar-track").attr({r:I.trackBorderRadius||0,height:N,width:N}).add(Y),W||this.track.attr({fill:I.trackBackgroundColor,stroke:I.trackBorderColor,"stroke-width":I.trackBorderWidth});let X=this.trackBorderWidth=this.track.strokeWidth();this.track.attr({x:-y(0,X),y:-y(0,X)}),this.scrollbarGroup=C.g().add(Y),this.scrollbar=C.rect().addClass("highcharts-scrollbar-thumb").attr({height:N-X,width:N-X,r:I.barBorderRadius||0}).add(this.scrollbarGroup),this.scrollbarRifles=C.path(A.swapXY([["M",-3,N/4],["L",-3,2*N/3],["M",0,N/4],["L",0,2*N/3],["M",3,N/4],["L",3,2*N/3]],I.vertical)).addClass("highcharts-scrollbar-rifles").add(this.scrollbarGroup),W||(this.scrollbar.attr({fill:I.barBackgroundColor,stroke:I.barBorderColor,"stroke-width":I.barBorderWidth}),this.scrollbarRifles.attr({stroke:I.rifleColor,"stroke-width":1})),this.scrollbarStrokeWidth=this.scrollbar.strokeWidth(),this.scrollbarGroup.translate(-y(0,this.scrollbarStrokeWidth),-y(0,this.scrollbarStrokeWidth)),this.drawScrollbarButton(0),this.drawScrollbarButton(1)}setRange(C,I){let N,W,Y=this.options,X=Y.vertical,O=Y.minWidth,V=this.barWidth,$=!this.rendered||this.hasDragged||this.chart.navigator&&this.chart.navigator.hasDragged?"attr":"animate";if(!w(V))return;let L=V*Math.min(I,1);N=Math.ceil(V*(C=Math.max(C,0))),this.calculatedWidth=W=b(L-N),W<O&&(N=(V-O+W)*C,W=O);let R=Math.floor(N+this.xOffset+this.yOffset),G=W/2-.5;this.from=C,this.to=I,X?(this.scrollbarGroup[$]({translateY:R}),this.scrollbar[$]({height:W}),this.scrollbarRifles[$]({translateY:G}),this.scrollbarTop=R,this.scrollbarLeft=0):(this.scrollbarGroup[$]({translateX:R}),this.scrollbar[$]({width:W}),this.scrollbarRifles[$]({translateX:G}),this.scrollbarLeft=R,this.scrollbarTop=0),W<=12?this.scrollbarRifles.hide():this.scrollbarRifles.show(),Y.showFull===!1&&(C<=0&&I>=1?this.group.hide():this.group.show()),this.rendered=!0}shouldUpdateExtremes(C){return E(this.options.liveRedraw,l.svg&&!l.isTouchDevice&&!this.chart.boosted)||C==="mouseup"||C==="touchend"||!w(C)}trackClick(C){var X;let I=((X=this.chart.pointer)==null?void 0:X.normalize(C))||C,N=this.to-this.from,W=this.y+this.scrollbarTop,Y=this.x+this.scrollbarLeft;this.options.vertical&&I.chartY>W||!this.options.vertical&&I.chartX>Y?this.updatePosition(this.from+N,this.to+N):this.updatePosition(this.from-N,this.to-N),T(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:C})}update(C){this.destroy(),this.init(this.chart.renderer,S(!0,this.options,C),this.chart)}updatePosition(C,I){I>1&&(C=b(1-b(I-C)),I=1),C<0&&(I=b(I-C),C=0),this.from=C,this.to=I}}return A.defaultOptions=r,f.scrollbar=S(!0,A.defaultOptions,f.scrollbar),A}),n(t,"Stock/Navigator/Navigator.js",[t["Core/Axis/Axis.js"],t["Stock/Navigator/ChartNavigatorComposition.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorComposition.js"],t["Stock/Scrollbar/Scrollbar.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,g,b,y){let{defaultOptions:w}=u,{isTouchDevice:v}=r,{prototype:{symbols:T}}=b,{addEvent:S,clamp:E,correctFloat:x,defined:A,destroyObjectProperties:D,erase:C,extend:I,find:N,fireEvent:W,isArray:Y,isNumber:X,merge:O,pick:V,removeEvent:$,splat:L}=y;function R(U,...B){let H=[].filter.call(B,X);if(H.length)return Math[U].apply(0,H)}class G{static compose(B,H,q){l.compose(B,G),f.compose(B,H,q)}constructor(B){this.isDirty=!1,this.scrollbarHeight=0,this.init(B)}drawHandle(B,H,q,se){let pe=this.navigatorOptions.handles.height;this.handles[H][se](q?{translateX:Math.round(this.left+this.height/2),translateY:Math.round(this.top+parseInt(B,10)+.5-pe)}:{translateX:Math.round(this.left+parseInt(B,10)),translateY:Math.round(this.top+this.height/2-pe/2-1)})}drawOutline(B,H,q,se){let pe=this.navigatorOptions.maskInside,ne=this.outline.strokeWidth(),le=ne/2,ke=ne%2/2,be=this.scrollButtonSize,Ee=this.size,K=this.top,J=this.height,oe=K-le,we=K+J,ee=this.left,re,ue;q?(re=K+H+ke,H=K+B+ke,ue=[["M",ee+J,K-be-ke],["L",ee+J,re],["L",ee,re],["M",ee,H],["L",ee+J,H],["L",ee+J,K+Ee+be]],pe&&ue.push(["M",ee+J,re-le],["L",ee+J,H+le])):(ee-=be,B+=ee+be-ke,H+=ee+be-ke,ue=[["M",ee,oe],["L",B,oe],["L",B,we],["M",H,we],["L",H,oe],["L",ee+Ee+2*be,oe]],pe&&ue.push(["M",B-le,oe],["L",H+le,oe])),this.outline[se]({d:ue})}drawMasks(B,H,q,se){let pe,ne,le,ke,be=this.left,Ee=this.top,K=this.height;q?(le=[be,be,be],ke=[Ee,Ee+B,Ee+H],ne=[K,K,K],pe=[B,H-B,this.size-H]):(le=[be,be+B,be+H],ke=[Ee,Ee,Ee],ne=[B,H-B,this.size-H],pe=[K,K,K]),this.shades.forEach((J,oe)=>{J[se]({x:le[oe],y:ke[oe],width:ne[oe],height:pe[oe]})})}renderElements(){var be;let B=this,H=B.navigatorOptions,q=H.maskInside,se=B.chart,pe=se.inverted,ne=se.renderer,le={cursor:pe?"ns-resize":"ew-resize"},ke=B.navigatorGroup??(B.navigatorGroup=ne.g("navigator").attr({zIndex:8,visibility:"hidden"}).add());if([!q,q,!q].forEach((Ee,K)=>{let J=B.shades[K]??(B.shades[K]=ne.rect().addClass("highcharts-navigator-mask"+(K===1?"-inside":"-outside")).add(ke));se.styledMode||(J.attr({fill:Ee?H.maskFill:"rgba(0,0,0,0)"}),K===1&&J.css(le))}),B.outline||(B.outline=ne.path().addClass("highcharts-navigator-outline").add(ke)),se.styledMode||B.outline.attr({"stroke-width":H.outlineWidth,stroke:H.outlineColor}),(be=H.handles)==null?void 0:be.enabled){let Ee=H.handles,{height:K,width:J}=Ee;[0,1].forEach(oe=>{var ee;let we=Ee.symbols[oe];if(B.handles[oe]&&B.handles[oe].symbolUrl===we){if(!B.handles[oe].isImg&&B.handles[oe].symbolName!==we){let re=T[we].call(T,-J/2-1,0,J,K);B.handles[oe].attr({d:re}),B.handles[oe].symbolName=we}}else(ee=B.handles[oe])==null||ee.destroy(),B.handles[oe]=ne.symbol(we,-J/2-1,0,J,K,Ee),B.handles[oe].attr({zIndex:7-oe}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][oe]).add(ke),B.addMouseEvents();se.inverted&&B.handles[oe].attr({rotation:90,rotationOriginX:Math.floor(-J/2),rotationOriginY:(K+J)/2}),se.styledMode||B.handles[oe].attr({fill:Ee.backgroundColor,stroke:Ee.borderColor,"stroke-width":Ee.lineWidth,width:Ee.width,height:Ee.height,x:-J/2-1,y:0}).css(le)})}}update(B,H=!1){var pe;let q=this.chart,se=q.options.chart.inverted!==((pe=q.scrollbar)==null?void 0:pe.options.vertical);if(O(!0,q.options.navigator,B),this.navigatorOptions=q.options.navigator||{},this.setOpposite(),A(B.enabled)||se)return this.destroy(),this.navigatorEnabled=B.enabled||this.navigatorEnabled,this.init(q);if(this.navigatorEnabled&&(this.isDirty=!0,B.adaptToUpdatedData===!1&&this.baseSeries.forEach(ne=>{$(ne,"updatedData",this.updatedDataHandler)},this),B.adaptToUpdatedData&&this.baseSeries.forEach(ne=>{ne.eventsToUnbind.push(S(ne,"updatedData",this.updatedDataHandler))},this),(B.series||B.baseSeries)&&this.setBaseSeries(void 0,!1),B.height||B.xAxis||B.yAxis)){this.height=B.height??this.height;let ne=this.getXAxisOffsets();this.xAxis.update({...B.xAxis,offsets:ne,[q.inverted?"width":"height"]:this.height,[q.inverted?"height":"width"]:void 0},!1),this.yAxis.update({...B.yAxis,[q.inverted?"width":"height"]:this.height},!1)}H&&q.redraw()}render(B,H,q,se){let pe=this.chart,ne=this.xAxis,le=ne.pointRange||0,ke=ne.navigatorAxis.fake?pe.xAxis[0]:ne,be=this.navigatorEnabled,Ee=this.rendered,K=pe.inverted,J=pe.xAxis[0].minRange,oe=pe.xAxis[0].options.maxRange,we=this.scrollButtonSize,ee,re,ue,xe=this.scrollbarHeight,Te,ze;if(this.hasDragged&&!A(q))return;if(this.isDirty&&this.renderElements(),B=x(B-le/2),H=x(H+le/2),!X(B)||!X(H)){if(!Ee)return;q=0,se=V(ne.width,ke.width)}this.left=V(ne.left,pe.plotLeft+we+(K?pe.plotWidth:0));let Ce=this.size=Te=V(ne.len,(K?pe.plotHeight:pe.plotWidth)-2*we);ee=K?xe:Te+2*we,q=V(q,ne.toPixels(B,!0)),se=V(se,ne.toPixels(H,!0)),X(q)&&Math.abs(q)!==1/0||(q=0,se=ee);let Ie=ne.toValue(q,!0),Be=ne.toValue(se,!0),He=Math.abs(x(Be-Ie));He<J?this.grabbedLeft?q=ne.toPixels(Be-J-le,!0):this.grabbedRight&&(se=ne.toPixels(Ie+J+le,!0)):A(oe)&&x(He-le)>oe&&(this.grabbedLeft?q=ne.toPixels(Be-oe-le,!0):this.grabbedRight&&(se=ne.toPixels(Ie+oe+le,!0))),this.zoomedMax=E(Math.max(q,se),0,Ce),this.zoomedMin=E(this.fixedWidth?this.zoomedMax-this.fixedWidth:Math.min(q,se),0,Ce),this.range=this.zoomedMax-this.zoomedMin,Ce=Math.round(this.zoomedMax);let Ae=Math.round(this.zoomedMin);be&&(this.navigatorGroup.attr({visibility:"inherit"}),ze=Ee&&!this.hasDragged?"animate":"attr",this.drawMasks(Ae,Ce,K,ze),this.drawOutline(Ae,Ce,K,ze),this.navigatorOptions.handles.enabled&&(this.drawHandle(Ae,0,K,ze),this.drawHandle(Ce,1,K,ze))),this.scrollbar&&(K?(ue=this.top-we,re=this.left-xe+(be||!ke.opposite?0:(ke.titleOffset||0)+ke.axisTitleMargin),xe=Te+2*we):(ue=this.top+(be?this.height:-xe),re=this.left-we),this.scrollbar.position(re,ue,ee,xe),this.scrollbar.setRange(this.zoomedMin/(Te||1),this.zoomedMax/(Te||1))),this.rendered=!0,this.isDirty=!1,W(this,"afterRender")}addMouseEvents(){let B=this,H=B.chart,q=H.container,se=[],pe,ne;B.mouseMoveHandler=pe=function(le){B.onMouseMove(le)},B.mouseUpHandler=ne=function(le){B.onMouseUp(le)},(se=B.getPartsEvents("mousedown")).push(S(H.renderTo,"mousemove",pe),S(q.ownerDocument,"mouseup",ne),S(H.renderTo,"touchmove",pe),S(q.ownerDocument,"touchend",ne)),se.concat(B.getPartsEvents("touchstart")),B.eventsToUnbind=se,B.series&&B.series[0]&&se.push(S(B.series[0].xAxis,"foundExtremes",function(){H.navigator.modifyNavigatorAxisExtremes()}))}getPartsEvents(B){let H=this,q=[];return["shades","handles"].forEach(function(se){H[se].forEach(function(pe,ne){q.push(S(pe.element,B,function(le){H[se+"Mousedown"](le,ne)}))})}),q}shadesMousedown(B,H){var we;B=((we=this.chart.pointer)==null?void 0:we.normalize(B))||B;let q=this.chart,se=this.xAxis,pe=this.zoomedMin,ne=this.size,le=this.range,ke=this.left,be=B.chartX,Ee,K,J,oe;q.inverted&&(be=B.chartY,ke=this.top),H===1?(this.grabbedCenter=be,this.fixedWidth=le,this.dragOffset=be-pe):(oe=be-ke-le/2,H===0?oe=Math.max(0,oe):H===2&&oe+le>=ne&&(oe=ne-le,this.reversedExtremes?(oe-=le,K=this.getUnionExtremes().dataMin):Ee=this.getUnionExtremes().dataMax),oe!==pe&&(this.fixedWidth=le,A((J=se.navigatorAxis.toFixedRange(oe,oe+le,K,Ee)).min)&&W(this,"setRange",{min:Math.min(J.min,J.max),max:Math.max(J.min,J.max),redraw:!0,eventArguments:{trigger:"navigator"}})))}handlesMousedown(B,H){var ne;B=((ne=this.chart.pointer)==null?void 0:ne.normalize(B))||B;let q=this.chart,se=q.xAxis[0],pe=this.reversedExtremes;H===0?(this.grabbedLeft=!0,this.otherHandlePos=this.zoomedMax,this.fixedExtreme=pe?se.min:se.max):(this.grabbedRight=!0,this.otherHandlePos=this.zoomedMin,this.fixedExtreme=pe?se.max:se.min),q.setFixedRange(void 0)}onMouseMove(B){var Ee;let H=this,q=H.chart,se=H.navigatorSize,pe=H.range,ne=H.dragOffset,le=q.inverted,ke=H.left,be;(!B.touches||B.touches[0].pageX!==0)&&(be=(B=((Ee=q.pointer)==null?void 0:Ee.normalize(B))||B).chartX,le&&(ke=H.top,be=B.chartY),H.grabbedLeft?(H.hasDragged=!0,H.render(0,0,be-ke,H.otherHandlePos)):H.grabbedRight?(H.hasDragged=!0,H.render(0,0,H.otherHandlePos,be-ke)):H.grabbedCenter&&(H.hasDragged=!0,be<ne?be=ne:be>se+ne-pe&&(be=se+ne-pe),H.render(0,0,be-ne,be-ne+pe)),H.hasDragged&&H.scrollbar&&V(H.scrollbar.options.liveRedraw,!v&&!this.chart.boosted)&&(B.DOMType=B.type,setTimeout(function(){H.onMouseUp(B)},0)))}onMouseUp(B){let H,q,se,pe,ne,le,ke=this.chart,be=this.xAxis,Ee=this.scrollbar,K=B.DOMEvent||B,J=ke.inverted,oe=this.rendered&&!this.hasDragged?"animate":"attr";(this.hasDragged&&(!Ee||!Ee.hasDragged)||B.trigger==="scrollbar")&&(se=this.getUnionExtremes(),this.zoomedMin===this.otherHandlePos?pe=this.fixedExtreme:this.zoomedMax===this.otherHandlePos&&(ne=this.fixedExtreme),this.zoomedMax===this.size&&(ne=this.reversedExtremes?se.dataMin:se.dataMax),this.zoomedMin===0&&(pe=this.reversedExtremes?se.dataMax:se.dataMin),A((le=be.navigatorAxis.toFixedRange(this.zoomedMin,this.zoomedMax,pe,ne)).min)&&W(this,"setRange",{min:Math.min(le.min,le.max),max:Math.max(le.min,le.max),redraw:!0,animation:!this.hasDragged&&null,eventArguments:{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:K}})),B.DOMType!=="mousemove"&&B.DOMType!=="touchmove"&&(this.grabbedLeft=this.grabbedRight=this.grabbedCenter=this.fixedWidth=this.fixedExtreme=this.otherHandlePos=this.hasDragged=this.dragOffset=null),this.navigatorEnabled&&X(this.zoomedMin)&&X(this.zoomedMax)&&(q=Math.round(this.zoomedMin),H=Math.round(this.zoomedMax),this.shades&&this.drawMasks(q,H,J,oe),this.outline&&this.drawOutline(q,H,J,oe),this.navigatorOptions.handles.enabled&&Object.keys(this.handles).length===this.handles.length&&(this.drawHandle(q,0,J,oe),this.drawHandle(H,1,J,oe)))}removeEvents(){this.eventsToUnbind&&(this.eventsToUnbind.forEach(function(B){B()}),this.eventsToUnbind=void 0),this.removeBaseSeriesEvents()}removeBaseSeriesEvents(){let B=this.baseSeries||[];this.navigatorEnabled&&B[0]&&(this.navigatorOptions.adaptToUpdatedData!==!1&&B.forEach(function(H){$(H,"updatedData",this.updatedDataHandler)},this),B[0].xAxis&&$(B[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))}getXAxisOffsets(){return this.chart.inverted?[this.scrollButtonSize,0,-this.scrollButtonSize,0]:[0,-this.scrollButtonSize,0,this.scrollButtonSize]}init(B){var ee;let H=B.options,q=H.navigator||{},se=q.enabled,pe=H.scrollbar||{},ne=pe.enabled,le=se&&q.height||0,ke=ne&&pe.height||0,be=pe.buttonsEnabled&&ke||0;this.handles=[],this.shades=[],this.chart=B,this.setBaseSeries(),this.height=le,this.scrollbarHeight=ke,this.scrollButtonSize=be,this.scrollbarEnabled=ne,this.navigatorEnabled=se,this.navigatorOptions=q,this.scrollbarOptions=pe,this.setOpposite();let Ee=this,K=Ee.baseSeries,J=B.xAxis.length,oe=B.yAxis.length,we=K&&K[0]&&K[0].xAxis||B.xAxis[0]||{options:{}};if(B.isDirtyBox=!0,Ee.navigatorEnabled){let re=this.getXAxisOffsets();Ee.xAxis=new s(B,O({breaks:we.options.breaks,ordinal:we.options.ordinal,overscroll:we.options.overscroll},q.xAxis,{type:"datetime",yAxis:(ee=q.yAxis)==null?void 0:ee.id,index:J,isInternal:!0,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:we.options.ordinal?0:we.options.minPadding,maxPadding:we.options.ordinal?0:we.options.maxPadding,zoomEnabled:!1},B.inverted?{offsets:re,width:le}:{offsets:re,height:le}),"xAxis"),Ee.yAxis=new s(B,O(q.yAxis,{alignTicks:!1,offset:0,index:oe,isInternal:!0,reversed:V(q.yAxis&&q.yAxis.reversed,B.yAxis[0]&&B.yAxis[0].reversed,!1),zoomEnabled:!1},B.inverted?{width:le}:{height:le}),"yAxis"),K||q.series.data?Ee.updateNavigatorSeries(!1):B.series.length===0&&(Ee.unbindRedraw=S(B,"beforeRedraw",function(){B.series.length>0&&!Ee.series&&(Ee.setBaseSeries(),Ee.unbindRedraw())})),Ee.reversedExtremes=B.inverted&&!Ee.xAxis.reversed||!B.inverted&&Ee.xAxis.reversed,Ee.renderElements(),Ee.addMouseEvents()}else Ee.xAxis={chart:B,navigatorAxis:{fake:!0},translate:function(re,ue){let xe=B.xAxis[0],Te=xe.getExtremes(),ze=xe.len-2*be,Ce=R("min",xe.options.min,Te.dataMin),Ie=R("max",xe.options.max,Te.dataMax)-Ce;return ue?re*Ie/ze+Ce:ze*(re-Ce)/Ie},toPixels:function(re){return this.translate(re)},toValue:function(re){return this.translate(re,!0)}},Ee.xAxis.navigatorAxis.axis=Ee.xAxis,Ee.xAxis.navigatorAxis.toFixedRange=p.prototype.toFixedRange.bind(Ee.xAxis.navigatorAxis);if(B.options.scrollbar.enabled){let re=O(B.options.scrollbar,{vertical:B.inverted});!X(re.margin)&&Ee.navigatorEnabled&&(re.margin=B.inverted?-3:3),B.scrollbar=Ee.scrollbar=new g(B.renderer,re,B),S(Ee.scrollbar,"changed",function(ue){let xe=Ee.size,Te=xe*this.to,ze=xe*this.from;Ee.hasDragged=Ee.scrollbar.hasDragged,Ee.render(0,0,ze,Te),this.shouldUpdateExtremes(ue.DOMType)&&setTimeout(function(){Ee.onMouseUp(ue)})})}Ee.addBaseSeriesEvents(),Ee.addChartEvents()}setOpposite(){let B=this.navigatorOptions,H=this.navigatorEnabled,q=this.chart;this.opposite=V(B.opposite,!!(!H&&q.inverted))}getUnionExtremes(B){let H,q=this.chart.xAxis[0],se=this.xAxis,pe=se.options,ne=q.options;return B&&q.dataMin===null||(H={dataMin:V(pe&&pe.min,R("min",ne.min,q.dataMin,se.dataMin,se.min)),dataMax:V(pe&&pe.max,R("max",ne.max,q.dataMax,se.dataMax,se.max))}),H}setBaseSeries(B,H){let q=this.chart,se=this.baseSeries=[];B=B||q.options&&q.options.navigator.baseSeries||(q.series.length?N(q.series,pe=>!pe.options.isInternal).index:0),(q.series||[]).forEach((pe,ne)=>{!pe.options.isInternal&&(pe.options.showInNavigator||(ne===B||pe.options.id===B)&&pe.options.showInNavigator!==!1)&&se.push(pe)}),this.xAxis&&!this.xAxis.navigatorAxis.fake&&this.updateNavigatorSeries(!0,H)}updateNavigatorSeries(B,H){var J,oe;let q=this,se=q.chart,pe=q.baseSeries,ne={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:(J=this.navigatorOptions.xAxis)==null?void 0:J.id,yAxis:(oe=this.navigatorOptions.yAxis)==null?void 0:oe.id,showInLegend:!1,stacking:void 0,isInternal:!0,states:{inactive:{opacity:1}}},le=q.series=(q.series||[]).filter(we=>{let ee=we.baseSeries;return!(0>pe.indexOf(ee))||(ee&&($(ee,"updatedData",q.updatedDataHandler),delete ee.navigatorSeries),we.chart&&we.destroy(),!1)}),ke,be,Ee=q.navigatorOptions.series,K;pe&&pe.length&&pe.forEach(we=>{let ee=we.navigatorSeries,re=I({color:we.color,visible:we.visible},Y(Ee)?w.navigator.series:Ee);if(ee&&q.navigatorOptions.adaptToUpdatedData===!1)return;ne.name="Navigator "+pe.length,K=(ke=we.options||{}).navigatorOptions||{},re.dataLabels=L(re.dataLabels),(be=O(ke,ne,re,K)).pointRange=V(re.pointRange,K.pointRange,w.plotOptions[be.type||"line"].pointRange);let ue=K.data||re.data;q.hasNavigatorData=q.hasNavigatorData||!!ue,be.data=ue||ke.data&&ke.data.slice(0),ee&&ee.options?ee.update(be,H):(we.navigatorSeries=se.initSeries(be),se.setSortedData(),we.navigatorSeries.baseSeries=we,le.push(we.navigatorSeries))}),(Ee.data&&!(pe&&pe.length)||Y(Ee))&&(q.hasNavigatorData=!1,(Ee=L(Ee)).forEach((we,ee)=>{ne.name="Navigator "+(le.length+1),(be=O(w.navigator.series,{color:se.series[ee]&&!se.series[ee].options.isInternal&&se.series[ee].color||se.options.colors[ee]||se.options.colors[0]},ne,we)).data=we.data,be.data&&(q.hasNavigatorData=!0,le.push(se.initSeries(be)))})),B&&this.addBaseSeriesEvents()}addBaseSeriesEvents(){let B=this,H=B.baseSeries||[];H[0]&&H[0].xAxis&&H[0].eventsToUnbind.push(S(H[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes)),H.forEach(q=>{q.eventsToUnbind.push(S(q,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)})),q.eventsToUnbind.push(S(q,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)})),this.navigatorOptions.adaptToUpdatedData!==!1&&q.xAxis&&q.eventsToUnbind.push(S(q,"updatedData",this.updatedDataHandler)),q.eventsToUnbind.push(S(q,"remove",function(){C(H,q),this.navigatorSeries&&(C(B.series,this.navigatorSeries),A(this.navigatorSeries.options)&&this.navigatorSeries.remove(!1),delete this.navigatorSeries)}))})}getBaseSeriesMin(B){return this.baseSeries.reduce(function(H,q){return Math.min(H,q.xData&&q.xData.length?q.xData[0]:H)},B)}modifyNavigatorAxisExtremes(){let B=this.xAxis;if(B.getExtremes!==void 0){let H=this.getUnionExtremes(!0);H&&(H.dataMin!==B.min||H.dataMax!==B.max)&&(B.min=H.dataMin,B.max=H.dataMax)}}modifyBaseAxisExtremes(){var ee;let B,H,q=this.chart.navigator,se=this.getExtremes(),pe=se.min,ne=se.max,le=se.dataMin,ke=se.dataMax,be=ne-pe,Ee=q.stickToMin,K=q.stickToMax,J=V((ee=this.ordinal)==null?void 0:ee.convertOverscroll(this.options.overscroll),0),oe=q.series&&q.series[0],we=!!this.setExtremes;!(this.eventArgs&&this.eventArgs.trigger==="rangeSelectorButton")&&(Ee&&(B=(H=le)+be),K&&(B=ke+J,Ee||(H=Math.max(le,B-be,q.getBaseSeriesMin(oe&&oe.xData?oe.xData[0]:-Number.MAX_VALUE)))),we&&(Ee||K)&&X(H)&&(this.min=this.userMin=H,this.max=this.userMax=B)),q.stickToMin=q.stickToMax=null}updatedDataHandler(){let B=this.chart.navigator,H=this.navigatorSeries,q=B.reversedExtremes?Math.round(B.zoomedMin)===0:Math.round(B.zoomedMax)>=Math.round(B.size);B.stickToMax=V(this.chart.options.navigator&&this.chart.options.navigator.stickToMax,q),B.stickToMin=B.shouldStickToMin(this,B),H&&!B.hasNavigatorData&&(H.options.pointStart=this.xData[0],H.setData(this.options.data,!1,null,!1))}shouldStickToMin(B,H){let q=H.getBaseSeriesMin(B.xData[0]),se=B.xAxis,pe=se.max,ne=se.min,le=se.options.range;return!!(X(pe)&&X(ne))&&(le&&pe-q>0?pe-q<le:ne<=q)}addChartEvents(){this.eventsToUnbind||(this.eventsToUnbind=[]),this.eventsToUnbind.push(S(this.chart,"redraw",function(){let B=this.navigator,H=B&&(B.baseSeries&&B.baseSeries[0]&&B.baseSeries[0].xAxis||this.xAxis[0]);H&&B.render(H.min,H.max)}),S(this.chart,"getMargins",function(){let B=this.navigator,H=B.opposite?"plotTop":"marginBottom";this.inverted&&(H=B.opposite?"marginRight":"plotLeft"),this[H]=(this[H]||0)+(B.navigatorEnabled||!this.inverted?B.height+B.scrollbarHeight:0)+B.navigatorOptions.margin}),S(G,"setRange",function(B){this.chart.xAxis[0].setExtremes(B.min,B.max,B.redraw,B.animation,B.eventArguments)}))}destroy(){this.removeEvents(),this.xAxis&&(C(this.chart.xAxis,this.xAxis),C(this.chart.axes,this.xAxis)),this.yAxis&&(C(this.chart.yAxis,this.yAxis),C(this.chart.axes,this.yAxis)),(this.series||[]).forEach(B=>{B.destroy&&B.destroy()}),["series","xAxis","yAxis","shades","outline","scrollbarTrack","scrollbarRifles","scrollbarGroup","scrollbar","navigatorGroup","rendered"].forEach(B=>{this[B]&&this[B].destroy&&this[B].destroy(),this[B]=null}),[this.handles].forEach(B=>{D(B)}),this.navigatorEnabled=!1}}return G}),n(t,"Accessibility/Components/NavigatorComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Stock/Navigator/Navigator.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/Utils/ChartUtilities.js"]],function(s,l,u,r,p,f,g,b,y){let{animObject:w}=p,{format:v}=f,{clamp:T,pick:S,syncTimeout:E}=g,{getFakeMouseEvent:x}=b,{getAxisRangeDescription:A,fireEventOnWrappedOrUnwrappedElement:D}=y;return class extends s{init(){let C=this.chart,I=this;this.announcer=new l(C,"polite"),this.addEvent(r,"afterRender",function(){this.chart===I.chart&&this.chart.renderer&&E(()=>{I.proxyProvider.updateGroupProxyElementPositions("navigator"),I.updateHandleValues()},w(S(this.chart.renderer.globalAnimation,!0)).duration)})}onChartUpdate(){var W,Y,X;let C=this.chart,I=C.options,N=I.navigator;if(N.enabled&&((W=N.accessibility)!=null&&W.enabled)){let O=I.accessibility.landmarkVerbosity,V=(Y=I.lang.accessibility)==null?void 0:Y.navigator.groupLabel;this.proxyProvider.removeGroup("navigator"),this.proxyProvider.addGroup("navigator","div",{role:O==="all"?"region":"group","aria-label":v(V,{chart:C},C)});let $=(X=I.lang.accessibility)==null?void 0:X.navigator.handleLabel;[0,1].forEach(L=>{let R=this.getHandleByIx(L);if(R){let G=this.proxyProvider.addProxyElement("navigator",{click:R},"input",{type:"range","aria-label":v($,{handleIx:L,chart:C},C)});this[L?"maxHandleProxy":"minHandleProxy"]=G.innerElement,G.innerElement.style.pointerEvents="none",G.innerElement.oninput=()=>this.updateNavigator()}}),this.updateHandleValues()}else this.proxyProvider.removeGroup("navigator")}getNavigatorHandleNavigation(C){let I=this,N=this.chart,W=C?this.maxHandleProxy:this.minHandleProxy,Y=this.keyCodes;return new u(N,{keyCodeMap:[[[Y.left,Y.right,Y.up,Y.down],function(X){if(W){let O=X===Y.left||X===Y.up?-1:1;W.value=""+T(parseFloat(W.value)+O,0,100),I.updateNavigator(()=>{let V=I.getHandleByIx(C);V&&N.setFocusToElement(V,W)})}return this.response.success}]],init:()=>{N.setFocusToElement(this.getHandleByIx(C),W)},validate:()=>{var X;return!!(this.getHandleByIx(C)&&W&&((X=N.options.navigator.accessibility)!=null&&X.enabled))}})}getKeyboardNavigation(){return[this.getNavigatorHandleNavigation(0),this.getNavigatorHandleNavigation(1)]}destroy(){this.updateNavigatorThrottleTimer&&clearTimeout(this.updateNavigatorThrottleTimer),this.proxyProvider.removeGroup("navigator"),this.announcer&&this.announcer.destroy()}updateHandleValues(){let C=this.chart.navigator;if(C&&this.minHandleProxy&&this.maxHandleProxy){let I=C.size;this.minHandleProxy.value=""+Math.round(C.zoomedMin/I*100),this.maxHandleProxy.value=""+Math.round(C.zoomedMax/I*100)}}getHandleByIx(C){let I=this.chart.navigator;return I&&I.handles&&I.handles[C]}updateNavigator(C){this.updateNavigatorThrottleTimer&&clearTimeout(this.updateNavigatorThrottleTimer),this.updateNavigatorThrottleTimer=setTimeout((I=>{var X;let N=this.chart,{navigator:W,pointer:Y}=N;if(W&&Y&&this.minHandleProxy&&this.maxHandleProxy){let O=Y.getChartPosition(),V=parseFloat(this.minHandleProxy.value)/100*W.size,$=parseFloat(this.maxHandleProxy.value)/100*W.size;[[0,"mousedown",W.zoomedMin],[0,"mousemove",V],[0,"mouseup",V],[1,"mousedown",W.zoomedMax],[1,"mousemove",$],[1,"mouseup",$]].forEach(([G,U,B])=>{var q;let H=(q=this.getHandleByIx(G))==null?void 0:q.element;H&&D(H,x(U,{x:O.left+W.left+B,y:O.top+W.top},H))}),I&&I();let L=(X=N.options.lang.accessibility)==null?void 0:X.navigator.changeAnnouncement,R=A(N.xAxis[0]);this.announcer.announce(v(L,{axisRangeDescription:R,chart:N},N))}}).bind(this,C),20)}}}),n(t,"Accessibility/Components/SeriesComponent/SeriesDescriber.js",[t["Accessibility/Components/AnnotationsA11y.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Templating.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{getPointAnnotationTexts:f}=s,{getAxisDescription:g,getSeriesFirstPointElement:b,getSeriesA11yElement:y,unhideChartElementFromAT:w}=l,{format:v,numberFormat:T}=u,{reverseChildNodes:S,stripHTMLTagsFromString:E}=r,{find:x,isNumber:A,isString:D,pick:C,defined:I}=p;function N(V){let $=V.chart.options.accessibility.series.pointDescriptionEnabledThreshold;return!!($!==!1&&V.points&&V.points.length>=+$)}function W(V,$){let L=V.series,R=L.chart,G=R.options.accessibility.point||{},U=L.options.accessibility&&L.options.accessibility.point||{},B=L.tooltipOptions||{},H=R.options.lang;return A($)?T($,U.valueDecimals||G.valueDecimals||B.valueDecimals||-1,H.decimalPoint,H.accessibility.thousandsSep||H.thousandsSep):$}function Y(V,$){let L=V[$];return V.chart.langFormat("accessibility.series."+$+"Description",{name:g(L),series:V})}function X(V){let $=V.series,L=$.chart.series.length>1||$.options.name,R=function(H){let q=H.series,se=q.chart,pe=q.options.accessibility,ne=pe&&pe.point&&pe.point.valueDescriptionFormat||se.options.accessibility.point.valueDescriptionFormat,le=C(q.xAxis&&q.xAxis.options.accessibility&&q.xAxis.options.accessibility.enabled,!se.angular&&q.type!=="flowmap"),ke=le?function(be){let Ee=function(we){let ee=we.series,re=ee.chart,ue=ee.options.accessibility&&ee.options.accessibility.point||{},xe=re.options.accessibility.point||{},Te=ee.xAxis&&ee.xAxis.dateTime;if(Te){let ze=Te.getXDateFormat(we.x||0,re.options.tooltip.dateTimeLabelFormats),Ce=ue.dateFormatter&&ue.dateFormatter(we)||xe.dateFormatter&&xe.dateFormatter(we)||ue.dateFormat||xe.dateFormat||ze;return re.time.dateFormat(Ce,we.x||0,void 0)}}(be),K=(be.series.xAxis||{}).categories&&I(be.category)&&(""+be.category).replace("<br/>"," "),J=I(be.id)&&0>(""+be.id).indexOf("highcharts-"),oe="x, "+be.x;return be.name||Ee||K||(J?be.id:oe)}(H):"";return v(ne,{point:H,index:I(H.index)?H.index+1:"",xDescription:ke,value:function(be){let Ee=be.series,K=Ee.chart.options.accessibility.point||{},J=Ee.chart.options.accessibility&&Ee.chart.options.accessibility.point||{},oe=Ee.tooltipOptions||{},we=J.valuePrefix||K.valuePrefix||oe.valuePrefix||"",ee=J.valueSuffix||K.valueSuffix||oe.valueSuffix||"",re=be.value!==void 0?"value":"y",ue=W(be,be[re]);return be.isNull?Ee.chart.langFormat("accessibility.series.nullPointValue",{point:be}):Ee.pointArrayMap?function(xe,Te,ze){let Ce=Te||"",Ie=ze||"",Be=function(He){let Ae=W(xe,C(xe[He],xe.options[He]));return Ae!==void 0?He+": "+Ce+Ae+Ie:Ae};return xe.series.pointArrayMap.reduce(function(He,Ae){let ye=Be(Ae);return ye?He+(He.length?", ":"")+ye:He},"")}(be,we,ee):we+ue+ee}(H),separator:le?", ":""},se)}(V),G=V.options&&V.options.accessibility&&V.options.accessibility.description,U=L?" "+$.name+".":"",B=function(H){let q=H.series.chart,se=f(H);return se.length?q.langFormat("accessibility.series.pointAnnotationsDescription",{point:H,annotations:se}):""}(V);return V.accessibility=V.accessibility||{},V.accessibility.valueDescription=R,R+(G?" "+G:"")+U+(B?" "+B:"")}function O(V){let $=V.chart,L=$.types||[],R=function(le){let ke=(le.options.accessibility||{}).description;return ke&&le.chart.langFormat("accessibility.series.description",{description:ke,series:le})||""}(V),G=function(le){return $[le]&&$[le].length>1&&V[le]},U=V.index+1,B=Y(V,"xAxis"),H=Y(V,"yAxis"),q={seriesNumber:U,series:V,chart:$},se=L.length>1?"Combination":"",pe=$.langFormat("accessibility.series.summary."+V.type+se,q)||$.langFormat("accessibility.series.summary.default"+se,q),ne=(G("yAxis")?" "+H+".":"")+(G("xAxis")?" "+B+".":"");return v(C(V.options.accessibility&&V.options.accessibility.descriptionFormat,$.options.accessibility.series.descriptionFormat,""),{seriesDescription:pe,authorDescription:R?" "+R:"",axisDescription:ne,series:V,chart:$,seriesNumber:U},void 0)}return{defaultPointDescriptionFormatter:X,defaultSeriesDescriptionFormatter:O,describeSeries:function(V){let $=V.chart,L=b(V),R=y(V),G=$.is3d&&$.is3d();R&&(R.lastChild!==L||G||S(R),function(U){let B=function(se){let pe=se.options.accessibility||{};return!N(se)&&!pe.exposeAsGroupOnly}(U),H=function(se){let pe=se.chart.options.accessibility.keyboardNavigation.seriesNavigation;return!!(se.points&&(se.points.length<+pe.pointNavigationEnabledThreshold||pe.pointNavigationEnabledThreshold===!1))}(U),q=U.chart.options.accessibility.point.describeNull;(B||H)&&U.points.forEach(se=>{let pe=se.graphic&&se.graphic.element||function(le){let ke=le.series,be=ke&&ke.chart,Ee=ke&&ke.is("sunburst"),K=le.isNull,J=be&&be.options.accessibility.point.describeNull;return K&&!Ee&&J}(se)&&function(le){let ke=le.series,be=function(we){let ee=we.index;return we.series&&we.series.data&&I(ee)&&x(we.series.data,function(re){return!!(re&&re.index!==void 0&&re.index>ee&&re.graphic&&re.graphic.element)})||null}(le),Ee=be&&be.graphic,K=Ee?Ee.parentGroup:ke.graph||ke.group,J=be?{x:C(le.plotX,be.plotX,0),y:C(le.plotY,be.plotY,0)}:{x:C(le.plotX,0),y:C(le.plotY,0)},oe=function(we,ee){let re=we.series.chart.renderer.rect(ee.x,ee.y,1,1);return re.attr({class:"highcharts-a11y-mock-point",fill:"none",opacity:0,"fill-opacity":0,"stroke-opacity":0}),re}(le,J);if(K&&K.element)return le.graphic=oe,le.hasMockGraphic=!0,oe.add(K),K.element.insertBefore(oe.element,Ee?Ee.element:null),oe.element}(se),ne=se.options&&se.options.accessibility&&se.options.accessibility.enabled===!1;if(pe){if(se.isNull&&!q){pe.setAttribute("aria-hidden",!0);return}pe.setAttribute("tabindex","-1"),U.chart.styledMode||(pe.style.outline="none"),B&&!ne?function(le,ke){var oe,we,ee;let be=le.series,Ee=((oe=be.options.accessibility)==null?void 0:oe.point)||{},K=be.chart.options.accessibility.point||{},J=E(D(Ee.descriptionFormat)&&v(Ee.descriptionFormat,le,be.chart)||((we=Ee.descriptionFormatter)==null?void 0:we.call(Ee,le))||D(K.descriptionFormat)&&v(K.descriptionFormat,le,be.chart)||((ee=K.descriptionFormatter)==null?void 0:ee.call(K,le))||X(le),be.chart.renderer.forExport);ke.setAttribute("role","img"),ke.setAttribute("aria-label",J)}(se,pe):pe.setAttribute("aria-hidden",!0)}})}(V),w($,R),function(U){let B=U.chart,H=B.options.chart,q=H.options3d&&H.options3d.enabled,se=B.series.length>1,pe=B.options.accessibility.series.describeSingleSeries,ne=(U.options.accessibility||{}).exposeAsGroupOnly;return!(q&&se)&&(se||pe||ne||N(U))}(V)?function(U,B){let H=U.options.accessibility||{},q=U.chart.options.accessibility,se=q.landmarkVerbosity;H.exposeAsGroupOnly?B.setAttribute("role","img"):se==="all"?B.setAttribute("role","region"):B.setAttribute("role","group"),B.setAttribute("tabindex","-1"),U.chart.styledMode||(B.style.outline="none"),B.setAttribute("aria-label",E(q.series.descriptionFormatter&&q.series.descriptionFormatter(U)||O(U),U.chart.renderer.forExport))}(V,R):R.removeAttribute("aria-label"))}}}),n(t,"Accessibility/Components/SeriesComponent/NewDataAnnouncer.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(s,l,u,r,p,f){let{composed:g}=s,{addEvent:b,defined:y,pushUnique:w}=l,{getChartTitle:v}=r,{defaultPointDescriptionFormatter:T,defaultSeriesDescriptionFormatter:S}=f;function E(A){return!!A.options.accessibility.announceNewData.enabled}class x{constructor(D){this.dirty={allSeries:{}},this.lastAnnouncementTime=0,this.chart=D}init(){let D=this.chart,C=D.options.accessibility.announceNewData.interruptUser?"assertive":"polite";this.lastAnnouncementTime=0,this.dirty={allSeries:{}},this.eventProvider=new p,this.announcer=new u(D,C),this.addEventListeners()}destroy(){this.eventProvider.removeAddedEvents(),this.announcer.destroy()}addEventListeners(){let D=this,C=this.chart,I=this.eventProvider;I.addEvent(C,"afterApplyDrilldown",function(){D.lastAnnouncementTime=0}),I.addEvent(C,"afterAddSeries",function(N){D.onSeriesAdded(N.series)}),I.addEvent(C,"redraw",function(){D.announceDirtyData()})}onSeriesAdded(D){E(this.chart)&&(this.dirty.hasDirty=!0,this.dirty.allSeries[D.name+D.index]=D,this.dirty.newSeries=y(this.dirty.newSeries)?void 0:D)}announceDirtyData(){let D=this.chart,C=this;if(D.options.accessibility.announceNewData&&this.dirty.hasDirty){let I=this.dirty.newPoint;I&&(I=function(N){let W=N.series.data.filter(Y=>N.x===Y.x&&N.y===Y.y);return W.length===1?W[0]:N}(I)),this.queueAnnouncement(Object.keys(this.dirty.allSeries).map(N=>C.dirty.allSeries[N]),this.dirty.newSeries,I),this.dirty={allSeries:{}}}}queueAnnouncement(D,C,I){let N=this.chart.options.accessibility.announceNewData;if(N.enabled){let W=+new Date,Y=W-this.lastAnnouncementTime,X=Math.max(0,N.minAnnounceInterval-Y),O=function($,L){let R=($||[]).concat(L||[]).reduce((G,U)=>(G[U.name+U.index]=U,G),{});return Object.keys(R).map(G=>R[G])}(this.queuedAnnouncement&&this.queuedAnnouncement.series,D),V=this.buildAnnouncementMessage(O,C,I);V&&(this.queuedAnnouncement&&clearTimeout(this.queuedAnnouncementTimer),this.queuedAnnouncement={time:W,message:V,series:O},this.queuedAnnouncementTimer=setTimeout(()=>{this&&this.announcer&&(this.lastAnnouncementTime=+new Date,this.announcer.announce(this.queuedAnnouncement.message),delete this.queuedAnnouncement,delete this.queuedAnnouncementTimer)},X))}}buildAnnouncementMessage(D,C,I){let N=this.chart,W=N.options.accessibility.announceNewData;if(W.announcementFormatter){let V=W.announcementFormatter(D,C,I);if(V!==!1)return V.length?V:null}let Y=s.charts&&s.charts.length>1?"Multiple":"Single",X=C?"newSeriesAnnounce"+Y:I?"newPointAnnounce"+Y:"newDataAnnounce",O=v(N);return N.langFormat("accessibility.announceNewData."+X,{chartTitle:O,seriesDesc:C?S(C):null,pointDesc:I?T(I):null,point:I,series:C})}}return function(A){function D(I){var Y;let N=this.chart,W=(Y=N.accessibility)==null?void 0:Y.components.series.newDataAnnouncer;W&&W.chart===N&&E(N)&&(W.dirty.newPoint=y(W.dirty.newPoint)?void 0:I.point)}function C(){var W;let I=this.chart,N=(W=I.accessibility)==null?void 0:W.components.series.newDataAnnouncer;N&&N.chart===I&&E(I)&&(N.dirty.hasDirty=!0,N.dirty.allSeries[this.name+this.index]=this)}A.compose=function(I){w(g,"A11y.NDA")&&(b(I,"addPoint",D),b(I,"updatedData",C))}}(x),x}),n(t,"Accessibility/ProxyElement.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l,u,r,p){let{doc:f}=s,{attr:g,css:b,merge:y}=l,{fireEventOnWrappedOrUnwrappedElement:w}=r,{cloneMouseEvent:v,cloneTouchEvent:T,getFakeMouseEvent:S,removeElement:E}=p;return class{constructor(x,A,D="button",C,I){this.chart=x,this.target=A,this.eventProvider=new u;let N=this.innerElement=f.createElement(D),W=this.element=C?f.createElement(C):N;x.styledMode||this.hideElementVisually(N),C&&(C!=="li"||x.styledMode||(W.style.listStyle="none"),W.appendChild(N),this.element=W),this.updateTarget(A,I)}click(){let x=this.getTargetPosition();x.x+=x.width/2,x.y+=x.height/2;let A=S("click",x);w(this.target.click,A)}updateTarget(x,A){this.target=x,this.updateCSSClassName();let D=A||{};Object.keys(D).forEach(I=>{D[I]===null&&delete D[I]});let C=this.getTargetAttr(x.click,"aria-label");g(this.innerElement,y(C?{"aria-label":C}:{},D)),this.eventProvider.removeAddedEvents(),this.addProxyEventsToElement(this.innerElement,x.click),this.refreshPosition()}refreshPosition(){let x=this.getTargetPosition();b(this.innerElement,{width:(x.width||1)+"px",height:(x.height||1)+"px",left:(Math.round(x.x)||0)+"px",top:(Math.round(x.y)||0)+"px"})}remove(){this.eventProvider.removeAddedEvents(),E(this.element)}updateCSSClassName(){let x=N=>N.indexOf("highcharts-no-tooltip")>-1,A=this.chart.legend,D=A.group&&A.group.div,C=x(D&&D.className||""),I=x(this.getTargetAttr(this.target.click,"class")||"");this.innerElement.className=C||I?"highcharts-a11y-proxy-element highcharts-no-tooltip":"highcharts-a11y-proxy-element"}addProxyEventsToElement(x,A){["click","touchstart","touchend","touchcancel","touchmove","mouseover","mouseenter","mouseleave","mouseout"].forEach(D=>{let C=D.indexOf("touch")===0;this.eventProvider.addEvent(x,D,I=>{let N=C?T(I):v(I);A&&w(A,N),I.stopPropagation(),C||I.preventDefault()},{passive:!1})})}hideElementVisually(x){b(x,{borderWidth:0,backgroundColor:"transparent",cursor:"pointer",outline:"none",opacity:.001,filter:"alpha(opacity=1)",zIndex:999,overflow:"hidden",padding:0,margin:0,display:"block",position:"absolute","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)"})}getTargetPosition(){let x=this.target.click,A=x.element?x.element:x,D=this.target.visual||A,C=this.chart.renderTo,I=this.chart.pointer;if(C&&(D!=null&&D.getBoundingClientRect)&&I){let N=D.getBoundingClientRect(),W=I.getChartPosition();return{x:(N.left-W.left)/W.scaleX,y:(N.top-W.top)/W.scaleY,width:N.right/W.scaleX-N.left/W.scaleX,height:N.bottom/W.scaleY-N.top/W.scaleY}}return{x:0,y:0,width:1,height:1}}getTargetAttr(x,A){return x.element?x.element.getAttribute(A):x.getAttribute(A)}}}),n(t,"Accessibility/ProxyProvider.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/ProxyElement.js"]],function(s,l,u,r,p,f){let{doc:g}=s,{attr:b,css:y}=l,{unhideChartElementFromAT:w}=u,{removeChildNodes:v}=p;return class{constructor(T){this.chart=T,this.domElementProvider=new r,this.groups={},this.groupOrder=[],this.beforeChartProxyPosContainer=this.createProxyPosContainer("before"),this.afterChartProxyPosContainer=this.createProxyPosContainer("after"),this.update()}addProxyElement(T,S,E="button",x){let A=this.groups[T];if(!A)throw Error("ProxyProvider.addProxyElement: Invalid group key "+T);let D=A.type==="ul"||A.type==="ol"?"li":void 0,C=new f(this.chart,S,E,D,x);return A.proxyContainerElement.appendChild(C.element),A.proxyElements.push(C),C}addGroup(T,S="div",E){let x,A=this.groups[T];if(A)return A.groupElement;let D=this.domElementProvider.createElement(S);return E&&E.role&&S!=="div"?(x=this.domElementProvider.createElement("div")).appendChild(D):x=D,x.className="highcharts-a11y-proxy-group highcharts-a11y-proxy-group-"+T.replace(/\W/g,"-"),this.groups[T]={proxyContainerElement:D,groupElement:x,type:S,proxyElements:[]},b(x,E||{}),S==="ul"&&D.setAttribute("role","list"),this.afterChartProxyPosContainer.appendChild(x),this.updateGroupOrder(this.groupOrder),x}updateGroupAttrs(T,S){let E=this.groups[T];if(!E)throw Error("ProxyProvider.updateGroupAttrs: Invalid group key "+T);b(E.groupElement,S)}updateGroupOrder(T){if(this.groupOrder=T.slice(),this.isDOMOrderGroupOrder())return;let S=T.indexOf("series"),E=S>-1?T.slice(0,S):T,x=S>-1?T.slice(S+1):[],A=g.activeElement;["before","after"].forEach(D=>{let C=this[D==="before"?"beforeChartProxyPosContainer":"afterChartProxyPosContainer"];v(C),(D==="before"?E:x).forEach(I=>{let N=this.groups[I];N&&C.appendChild(N.groupElement)})}),(this.beforeChartProxyPosContainer.contains(A)||this.afterChartProxyPosContainer.contains(A))&&A&&A.focus&&A.focus()}clearGroup(T){let S=this.groups[T];if(!S)throw Error("ProxyProvider.clearGroup: Invalid group key "+T);v(S.proxyContainerElement)}removeGroup(T){let S=this.groups[T];S&&(this.domElementProvider.removeElement(S.groupElement),S.groupElement!==S.proxyContainerElement&&this.domElementProvider.removeElement(S.proxyContainerElement),delete this.groups[T])}update(){this.updatePosContainerPositions(),this.updateGroupOrder(this.groupOrder),this.updateProxyElementPositions()}updateProxyElementPositions(){Object.keys(this.groups).forEach(this.updateGroupProxyElementPositions.bind(this))}updateGroupProxyElementPositions(T){let S=this.groups[T];S&&S.proxyElements.forEach(E=>E.refreshPosition())}destroy(){this.domElementProvider.destroyCreatedElements()}createProxyPosContainer(T){let S=this.domElementProvider.createElement("div");return S.setAttribute("aria-hidden","false"),S.className="highcharts-a11y-proxy-container"+(T?"-"+T:""),y(S,{top:"0",left:"0"}),this.chart.styledMode||(S.style.whiteSpace="nowrap",S.style.position="absolute"),S}getCurrentGroupOrderInDOM(){let T=A=>{let D=Object.keys(this.groups),C=D.length;for(;C--;){let I=D[C],N=this.groups[I];if(N&&A===N.groupElement)return I}},S=A=>{let D=[],C=A.children;for(let I=0;I<C.length;++I){let N=T(C[I]);N&&D.push(N)}return D},E=S(this.beforeChartProxyPosContainer),x=S(this.afterChartProxyPosContainer);return E.push("series"),E.concat(x)}isDOMOrderGroupOrder(){let T=this.getCurrentGroupOrderInDOM(),S=this.groupOrder.filter(x=>x==="series"||!!this.groups[x]),E=T.length;if(E!==S.length)return!1;for(;E--;)if(T[E]!==S[E])return!1;return!0}updatePosContainerPositions(){let T=this.chart;if(T.renderer.forExport)return;let S=T.renderer.box;T.container.insertBefore(this.afterChartProxyPosContainer,S.nextSibling),T.container.insertBefore(this.beforeChartProxyPosContainer,S),w(this.chart,this.afterChartProxyPosContainer),w(this.chart,this.beforeChartProxyPosContainer)}}}),n(t,"Accessibility/Components/RangeSelectorComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{unhideChartElementFromAT:f,getAxisRangeDescription:g}=u,{addEvent:b,attr:y}=p;class w extends s{init(){let T=this.chart;this.announcer=new l(T,"polite")}onChartUpdate(){let T=this.chart,S=this,E=T.rangeSelector;E&&(this.updateSelectorVisibility(),this.setDropdownAttrs(),E.buttons&&E.buttons.length&&E.buttons.forEach(x=>{S.setRangeButtonAttrs(x)}),E.maxInput&&E.minInput&&["minInput","maxInput"].forEach(function(x,A){let D=E[x];D&&(f(T,D),S.setRangeInputAttrs(D,"accessibility.rangeSelector."+(A?"max":"min")+"InputLabel"))}))}updateSelectorVisibility(){let T=this.chart,S=T.rangeSelector,E=S&&S.dropdown,x=S&&S.buttons||[],A=D=>D.setAttribute("aria-hidden",!0);S&&S.hasVisibleDropdown&&E?(f(T,E),x.forEach(D=>A(D.element))):(E&&A(E),x.forEach(D=>f(T,D.element)))}setDropdownAttrs(){let T=this.chart,S=T.rangeSelector&&T.rangeSelector.dropdown;if(S){let E=T.langFormat("accessibility.rangeSelector.dropdownLabel",{rangeTitle:T.options.lang.rangeSelectorZoom});S.setAttribute("aria-label",E),S.setAttribute("tabindex",-1)}}setRangeButtonAttrs(T){y(T.element,{tabindex:-1,role:"button"})}setRangeInputAttrs(T,S){let E=this.chart;y(T,{tabindex:-1,"aria-label":E.langFormat(S,{chart:E})})}onButtonNavKbdArrowKey(T,S){let E=T.response,x=this.keyCodes,A=this.chart,D=A.options.accessibility.keyboardNavigation.wrapAround,C=S===x.left||S===x.up?-1:1;return A.highlightRangeSelectorButton(A.highlightedRangeSelectorItemIx+C)?E.success:D?(T.init(C),E.success):E[C>0?"next":"prev"]}onButtonNavKbdClick(T){let S=T.response,E=this.chart;return E.oldRangeSelectorItemState!==3&&this.fakeClickEvent(E.rangeSelector.buttons[E.highlightedRangeSelectorItemIx].element),S.success}onAfterBtnClick(){let T=this.chart,S=g(T.xAxis[0]),E=T.langFormat("accessibility.rangeSelector.clickButtonAnnouncement",{chart:T,axisRangeDescription:S});E&&this.announcer.announce(E)}onInputKbdMove(T){let S=this.chart,E=S.rangeSelector,x=S.highlightedInputRangeIx=(S.highlightedInputRangeIx||0)+T;if(x>1||x<0){if(S.accessibility)return S.accessibility.keyboardNavigation.exiting=!0,S.accessibility.keyboardNavigation.tabindexContainer.focus(),S.accessibility.keyboardNavigation.move(T)}else if(E){let A=E[x?"maxDateBox":"minDateBox"],D=E[x?"maxInput":"minInput"];A&&D&&S.setFocusToElement(A,D)}return!0}onInputNavInit(T){let S=this,E=this.chart,x=T>0?0:1,A=E.rangeSelector,D=A&&A[x?"maxDateBox":"minDateBox"],C=A&&A.minInput,I=A&&A.maxInput;if(E.highlightedInputRangeIx=x,D&&C&&I){E.setFocusToElement(D,x?I:C),this.removeInputKeydownHandler&&this.removeInputKeydownHandler();let N=X=>{(X.which||X.keyCode)===this.keyCodes.tab&&S.onInputKbdMove(X.shiftKey?-1:1)&&(X.preventDefault(),X.stopPropagation())},W=b(C,"keydown",N),Y=b(I,"keydown",N);this.removeInputKeydownHandler=()=>{W(),Y()}}}onInputNavTerminate(){let T=this.chart.rangeSelector||{};T.maxInput&&T.hideInput("max"),T.minInput&&T.hideInput("min"),this.removeInputKeydownHandler&&(this.removeInputKeydownHandler(),delete this.removeInputKeydownHandler)}initDropdownNav(){let T=this.chart,S=T.rangeSelector,E=S&&S.dropdown;S&&E&&(T.setFocusToElement(S.buttonGroup,E),this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeDropdownKeydownHandler=b(E,"keydown",x=>{let A=(x.which||x.keyCode)===this.keyCodes.tab,D=T.accessibility;A&&(x.preventDefault(),x.stopPropagation(),D&&(D.keyboardNavigation.tabindexContainer.focus(),D.keyboardNavigation.move(x.shiftKey?-1:1)))}))}getRangeSelectorButtonNavigation(){let T=this.chart,S=this.keyCodes,E=this;return new r(T,{keyCodeMap:[[[S.left,S.right,S.up,S.down],function(x){return E.onButtonNavKbdArrowKey(this,x)}],[[S.enter,S.space],function(){return E.onButtonNavKbdClick(this)}]],validate:function(){return!!(T.rangeSelector&&T.rangeSelector.buttons&&T.rangeSelector.buttons.length)},init:function(x){let A=T.rangeSelector;if(A&&A.hasVisibleDropdown)E.initDropdownNav();else if(A){let D=A.buttons.length-1;T.highlightRangeSelectorButton(x>0?0:D)}},terminate:function(){E.removeDropdownKeydownHandler&&(E.removeDropdownKeydownHandler(),delete E.removeDropdownKeydownHandler)}})}getRangeSelectorInputNavigation(){let T=this.chart,S=this;return new r(T,{keyCodeMap:[],validate:function(){return!!(T.rangeSelector&&T.rangeSelector.inputGroup&&T.rangeSelector.inputGroup.element.style.visibility!=="hidden"&&T.options.rangeSelector.inputEnabled!==!1&&T.rangeSelector.minInput&&T.rangeSelector.maxInput)},init:function(E){S.onInputNavInit(E)},terminate:function(){S.onInputNavTerminate()}})}getKeyboardNavigation(){return[this.getRangeSelectorButtonNavigation(),this.getRangeSelectorInputNavigation()]}destroy(){this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeInputKeydownHandler&&this.removeInputKeydownHandler(),this.announcer&&this.announcer.destroy()}}return function(v){function T(E){let x=this.rangeSelector&&this.rangeSelector.buttons||[],A=this.highlightedRangeSelectorItemIx,D=this.rangeSelector&&this.rangeSelector.selected;return A!==void 0&&x[A]&&A!==D&&x[A].setState(this.oldRangeSelectorItemState||0),this.highlightedRangeSelectorItemIx=E,!!x[E]&&(this.setFocusToElement(x[E].box,x[E].element),E!==D&&(this.oldRangeSelectorItemState=x[E].state,x[E].setState(1)),!0)}function S(){let E=this.chart.accessibility;if(E&&E.components.rangeSelector)return E.components.rangeSelector.onAfterBtnClick()}v.compose=function(E,x){let A=E.prototype;A.highlightRangeSelectorButton||(A.highlightRangeSelectorButton=T,b(x,"afterBtnClick",S))}}(w),w}),n(t,"Accessibility/Components/SeriesComponent/ForcedMarkers.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){var u;let{composed:r}=s,{addEvent:p,merge:f,pushUnique:g}=l;return function(b){function y(A){f(!0,A,{marker:{enabled:!0,states:{normal:{opacity:0}}}})}function w(A){return A.marker.states&&A.marker.states.normal&&A.marker.states.normal.opacity}function v(A){return!!(A._hasPointMarkers&&A.points&&A.points.length)}function T(){this.chart.styledMode&&(this.markerGroup&&this.markerGroup[this.a11yMarkersForced?"addClass":"removeClass"]("highcharts-a11y-markers-hidden"),v(this)&&this.points.forEach(A=>{A.graphic&&(A.graphic[A.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-hidden"),A.graphic[A.hasForcedA11yMarker===!1?"addClass":"removeClass"]("highcharts-a11y-marker-visible"))}))}function S(A){this.resetA11yMarkerOptions=f(A.options.marker||{},this.userOptions.marker||{})}function E(){let A=this.options;(function(D){let C=D.chart.options.accessibility.enabled,I=(D.options.accessibility&&D.options.accessibility.enabled)!==!1;return C&&I&&function(N){let W=N.chart.options.accessibility;return N.points.length<W.series.pointDescriptionEnabledThreshold||W.series.pointDescriptionEnabledThreshold===!1}(D)})(this)?(A.marker&&A.marker.enabled===!1&&(this.a11yMarkersForced=!0,y(this.options)),v(this)&&function(D){let C=D.points.length;for(;C--;){let I=D.points[C],N=I.options,W=I.hasForcedA11yMarker;if(delete I.hasForcedA11yMarker,N.marker){let Y=W&&w(N)===0;N.marker.enabled&&!Y?(f(!0,N.marker,{states:{normal:{opacity:w(N)||1}}}),I.hasForcedA11yMarker=!1):N.marker.enabled===!1&&(y(N),I.hasForcedA11yMarker=!0)}}}(this)):this.a11yMarkersForced&&(delete this.a11yMarkersForced,function(D){let C=D.resetA11yMarkerOptions;if(C){let I=C.states&&C.states.normal&&C.states.normal.opacity;D.userOptions&&D.userOptions.marker&&(D.userOptions.marker.enabled=!0),D.update({marker:{enabled:C.enabled,states:{normal:{opacity:I}}}})}}(this),delete this.resetA11yMarkerOptions)}function x(){this.boosted&&this.a11yMarkersForced&&(f(!0,this.options,{marker:{enabled:!1}}),delete this.a11yMarkersForced)}b.compose=function(A){g(r,"A11y.FM")&&(p(A,"afterSetOptions",S),p(A,"render",E),p(A,"afterRender",T),p(A,"renderCanvas",x))}}(u||(u={})),u}),n(t,"Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js",[t["Core/Series/Point.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/ChartUtilities.js"]],function(s,l,u,r,p,f,g,b){let{seriesTypes:y}=u,{doc:w}=r,{defined:v,fireEvent:T}=p,{getPointFromXY:S,getSeriesFromName:E,scrollAxisToPoint:x}=b;function A(X){let O=X.index,V=X.series.points,$=V.length;if(V[O]===X)return O;for(;$--;)if(V[$]===X)return $}function D(X){let O=X.chart.options.accessibility.keyboardNavigation.seriesNavigation,V=X.options.accessibility||{},$=V.keyboardNavigation;return $&&$.enabled===!1||V.enabled===!1||X.options.enableMouseTracking===!1||!X.visible||O.pointNavigationEnabledThreshold&&+O.pointNavigationEnabledThreshold<=X.points.length}function C(X){let O=X.series.chart.options.accessibility,V=X.options.accessibility&&X.options.accessibility.enabled===!1;return X.isNull&&O.keyboardNavigation.seriesNavigation.skipNullPoints||X.visible===!1||X.isInside===!1||V||D(X.series)}function I(X){let O=X.series||[],V=O.length;for(let $=0;$<V;++$)if(!D(O[$])){let L=function(R){let G=R.points||[],U=G.length;for(let B=0;B<U;++B)if(!C(G[B]))return G[B];return null}(O[$]);if(L)return L}return null}function N(X){let O=X.series.length,V=!1;for(;O--&&(X.highlightedPoint=X.series[O].points[X.series[O].points.length-1],!(V=X.series[O].highlightNextValidPoint())););return V}function W(X){delete X.highlightedPoint;let O=I(X);return!!O&&O.highlight()}class Y{constructor(O,V){this.keyCodes=V,this.chart=O}init(){let O=this,V=this.chart,$=this.eventProvider=new g;$.addEvent(l,"destroy",function(){return O.onSeriesDestroy(this)}),$.addEvent(V,"afterApplyDrilldown",function(){(function(L){let R=I(L);R&&R.highlight(!1)})(this)}),$.addEvent(V,"drilldown",function(L){let R=L.point,G=R.series;O.lastDrilledDownPoint={x:R.x,y:R.y,seriesName:G?G.name:""}}),$.addEvent(V,"drillupall",function(){setTimeout(function(){O.onDrillupAll()},10)}),$.addEvent(s,"afterSetState",function(){let L=this.graphic&&this.graphic.element,R=w.activeElement,G=R&&R.getAttribute("class"),U=G&&G.indexOf("highcharts-a11y-proxy-element")>-1;V.highlightedPoint===this&&R!==L&&!U&&L&&L.focus&&L.focus()})}onDrillupAll(){let O,V=this.lastDrilledDownPoint,$=this.chart,L=V&&E($,V.seriesName);V&&L&&v(V.x)&&v(V.y)&&(O=S(L,V.x,V.y)),O=O||I($),$.container&&$.container.focus(),O&&O.highlight&&O.highlight(!1)}getKeyboardNavigationHandler(){let O=this,V=this.keyCodes,$=this.chart,L=$.inverted;return new f($,{keyCodeMap:[[L?[V.up,V.down]:[V.left,V.right],function(R){return O.onKbdSideways(this,R)}],[L?[V.left,V.right]:[V.up,V.down],function(R){return O.onKbdVertical(this,R)}],[[V.enter,V.space],function(R,G){var B;let U=$.highlightedPoint;if(U){let{plotLeft:H,plotTop:q}=this.chart,{plotX:se=0,plotY:pe=0}=U;G={...G,chartX:H+se,chartY:q+pe,point:U,target:((B=U.graphic)==null?void 0:B.element)||G.target},T(U.series,"click",G),U.firePointEvent("click",G)}return this.response.success}],[[V.home],function(){return W($),this.response.success}],[[V.end],function(){return N($),this.response.success}],[[V.pageDown,V.pageUp],function(R){return $.highlightAdjacentSeries(R===V.pageDown),this.response.success}]],init:function(){return O.onHandlerInit(this)},validate:function(){return!!I($)},terminate:function(){return O.onHandlerTerminate()}})}onKbdSideways(O,V){let $=this.keyCodes,L=V===$.right||V===$.down;return this.attemptHighlightAdjacentPoint(O,L)}onHandlerInit(O){let V=this.chart;return V.options.accessibility.keyboardNavigation.seriesNavigation.rememberPointFocus&&V.highlightedPoint?V.highlightedPoint.highlight():W(V),O.response.success}onKbdVertical(O,V){let $=this.chart,L=this.keyCodes,R=V===L.down||V===L.right,G=$.options.accessibility.keyboardNavigation.seriesNavigation;if(G.mode&&G.mode==="serialize")return this.attemptHighlightAdjacentPoint(O,R);let U=$.highlightedPoint&&$.highlightedPoint.series.keyboardMoveVertical?"highlightAdjacentPointVertical":"highlightAdjacentSeries";return $[U](R),O.response.success}onHandlerTerminate(){let O=this.chart,V=O.options.accessibility.keyboardNavigation;O.tooltip&&O.tooltip.hide(0);let $=O.highlightedPoint&&O.highlightedPoint.series;$&&$.onMouseOut&&$.onMouseOut(),O.highlightedPoint&&O.highlightedPoint.onMouseOut&&O.highlightedPoint.onMouseOut(),V.seriesNavigation.rememberPointFocus||delete O.highlightedPoint}attemptHighlightAdjacentPoint(O,V){let $=this.chart,L=$.options.accessibility.keyboardNavigation.wrapAround;return $.highlightAdjacentPoint(V)||L&&(V?W($):N($))?O.response.success:O.response[V?"next":"prev"]}onSeriesDestroy(O){let V=this.chart;V.highlightedPoint&&V.highlightedPoint.series===O&&(delete V.highlightedPoint,V.focusElement&&V.focusElement.removeFocusBorder())}destroy(){this.eventProvider.removeAddedEvents()}}return function(X){function O(G){let U,B,H=this.series,q=this.highlightedPoint,se=q&&A(q)||0,pe=q&&q.series.points||[],ne=this.series&&this.series[this.series.length-1],le=ne&&ne.points&&ne.points[ne.points.length-1];if(!H[0]||!H[0].points)return!1;if(q){if(U=H[q.series.index+(G?1:-1)],(B=pe[se+(G?1:-1)])||!U||(B=U.points[G?0:U.points.length-1]),!B)return!1}else B=G?H[0].points[0]:le;return C(B)?(D(U=B.series)?this.highlightedPoint=G?U.points[U.points.length-1]:U.points[0]:this.highlightedPoint=B,this.highlightAdjacentPoint(G)):B.highlight()}function V(G){let U=this.highlightedPoint,B=1/0,H;return!!(v(U.plotX)&&v(U.plotY))&&(this.series.forEach(q=>{D(q)||q.points.forEach(se=>{if(!v(se.plotY)||!v(se.plotX)||se===U)return;let pe=se.plotY-U.plotY,ne=Math.abs(se.plotX-U.plotX),le=Math.abs(pe)*Math.abs(pe)+ne*ne*4;q.yAxis&&q.yAxis.reversed&&(pe*=-1),!(pe<=0&&G||pe>=0&&!G||le<5||C(se))&&le<B&&(B=le,H=se)})}),!!H&&H.highlight())}function $(G){let U,B,H,q=this.highlightedPoint,se=this.series&&this.series[this.series.length-1],pe=se&&se.points&&se.points[se.points.length-1];return this.highlightedPoint?!!((U=this.series[q.series.index+(G?-1:1)])&&(B=function(ne,le,ke,be){let Ee=1/0,K,J,oe,we=le.points.length,ee=re=>!(v(re.plotX)&&v(re.plotY));if(!ee(ne)){for(;we--;)!ee(K=le.points[we])&&(oe=(ne.plotX-K.plotX)*(ne.plotX-K.plotX)*4+(ne.plotY-K.plotY)*(ne.plotY-K.plotY)*1)<Ee&&(Ee=oe,J=we);return v(J)?le.points[J]:void 0}}(q,U)))&&(D(U)?(B.highlight(),(H=this.highlightAdjacentSeries(G))?H:(q.highlight(),!1)):(B.highlight(),B.series.highlightNextValidPoint())):(U=G?this.series&&this.series[0]:se,!!(B=G?U&&U.points&&U.points[0]:pe)&&B.highlight())}function L(G=!0){var q,se;let U=this.series.chart,B=(se=(q=U.tooltip)==null?void 0:q.label)==null?void 0:se.element;!this.isNull&&G?this.onMouseOver():U.tooltip&&U.tooltip.hide(0),x(this),this.graphic&&(U.setFocusToElement(this.graphic),!G&&U.focusElement&&U.focusElement.removeFocusBorder()),U.highlightedPoint=this;let H=B==null?void 0:B.getBoundingClientRect().top;if(B&&H&&H<0){let pe=window.scrollY;window.scrollTo({behavior:"smooth",top:pe+H})}return this}function R(){let G=this.chart.highlightedPoint,U=(G&&G.series)===this?A(G):0,B=this.points,H=B.length;if(B&&H){for(let q=U;q<H;++q)if(!C(B[q]))return B[q].highlight();for(let q=U;q>=0;--q)if(!C(B[q]))return B[q].highlight()}return!1}X.compose=function(G,U,B){let H=G.prototype,q=U.prototype,se=B.prototype;H.highlightAdjacentPoint||(H.highlightAdjacentPoint=O,H.highlightAdjacentPointVertical=V,H.highlightAdjacentSeries=$,q.highlight=L,se.keyboardMoveVertical=!0,["column","gantt","pie"].forEach(pe=>{y[pe]&&(y[pe].prototype.keyboardMoveVertical=!1)}),se.highlightNextValidPoint=R)}}(Y),Y}),n(t,"Accessibility/Components/SeriesComponent/SeriesComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Components/SeriesComponent/ForcedMarkers.js"],t["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"],t["Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js"]],function(s,l,u,r,p,f){let{hideSeriesFromAT:g}=l,{describeSeries:b}=p;return class extends s{static compose(y,w,v){r.compose(v),u.compose(v),f.compose(y,w,v)}init(){this.newDataAnnouncer=new r(this.chart),this.newDataAnnouncer.init(),this.keyboardNavigation=new f(this.chart,this.keyCodes),this.keyboardNavigation.init(),this.hideTooltipFromATWhenShown(),this.hideSeriesLabelsFromATWhenShown()}hideTooltipFromATWhenShown(){let y=this;this.chart.tooltip&&this.addEvent(this.chart.tooltip.constructor,"refresh",function(){this.chart===y.chart&&this.label&&this.label.element&&this.label.element.setAttribute("aria-hidden",!0)})}hideSeriesLabelsFromATWhenShown(){this.addEvent(this.chart,"afterDrawSeriesLabels",function(){this.series.forEach(function(y){y.labelBySeries&&y.labelBySeries.attr("aria-hidden",!0)})})}onChartRender(){this.chart.series.forEach(function(y){(y.options.accessibility&&y.options.accessibility.enabled)!==!1&&y.visible&&y.getPointsCollection().length!==0?b(y):g(y)})}getKeyboardNavigation(){return this.keyboardNavigation.getKeyboardNavigationHandler()}destroy(){this.newDataAnnouncer.destroy(),this.keyboardNavigation.destroy()}}}),n(t,"Accessibility/Components/ZoomComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{unhideChartElementFromAT:f}=l,{getFakeMouseEvent:g}=u,{attr:b,pick:y}=p;return class extends s{constructor(){super(...arguments),this.focusedMapNavButtonIx=-1}init(){let w=this,v=this.chart;this.proxyProvider.addGroup("zoom","div"),["afterShowResetZoom","afterApplyDrilldown","drillupall"].forEach(T=>{w.addEvent(v,T,function(){w.updateProxyOverlays()})})}onChartUpdate(){let w=this.chart,v=this;w.mapNavigation&&w.mapNavigation.navButtons.forEach((T,S)=>{f(w,T.element),v.setMapNavButtonAttrs(T.element,"accessibility.zoom.mapZoom"+(S?"Out":"In"))})}setMapNavButtonAttrs(w,v){let T=this.chart;b(w,{tabindex:-1,role:"button","aria-label":T.langFormat(v,{chart:T})})}onChartRender(){this.updateProxyOverlays()}updateProxyOverlays(){let w=this.chart;if(this.proxyProvider.clearGroup("zoom"),w.resetZoomButton&&this.createZoomProxyButton(w.resetZoomButton,"resetZoomProxyButton",w.langFormat("accessibility.zoom.resetZoomButton",{chart:w})),w.drillUpButton&&w.breadcrumbs&&w.breadcrumbs.list){let v=w.breadcrumbs.list[w.breadcrumbs.list.length-1];this.createZoomProxyButton(w.drillUpButton,"drillUpProxyButton",w.langFormat("accessibility.drillUpButton",{chart:w,buttonText:w.breadcrumbs.getButtonText(v)}))}}createZoomProxyButton(w,v,T){this[v]=this.proxyProvider.addProxyElement("zoom",{click:w},"button",{"aria-label":T,tabindex:-1})}getMapZoomNavigation(){let w=this.keyCodes,v=this.chart,T=this;return new r(v,{keyCodeMap:[[[w.up,w.down,w.left,w.right],function(S){return T.onMapKbdArrow(this,S)}],[[w.tab],function(S,E){return T.onMapKbdTab(this,E)}],[[w.space,w.enter],function(){return T.onMapKbdClick(this)}]],validate:function(){return!!(v.mapView&&v.mapNavigation&&v.mapNavigation.navButtons.length)},init:function(S){return T.onMapNavInit(S)}})}onMapKbdArrow(w,v){let T=this.chart,S=this.keyCodes,E=T.container,x=v===S.up||v===S.down,A=v===S.left||v===S.up?1:-1,D=(x?T.plotHeight:T.plotWidth)/10*A,C=10*Math.random(),I={x:E.offsetLeft+T.plotLeft+T.plotWidth/2+C,y:E.offsetTop+T.plotTop+T.plotHeight/2+C},N=x?{x:I.x,y:I.y+D}:{x:I.x+D,y:I.y};return[g("mousedown",I),g("mousemove",N),g("mouseup",N)].forEach(W=>E.dispatchEvent(W)),w.response.success}onMapKbdTab(w,v){let T=this.chart,S=w.response,E=v.shiftKey,x=E&&!this.focusedMapNavButtonIx||!E&&this.focusedMapNavButtonIx;if(T.mapNavigation.navButtons[this.focusedMapNavButtonIx].setState(0),x)return T.mapView&&T.mapView.zoomBy(),S[E?"prev":"next"];this.focusedMapNavButtonIx+=E?-1:1;let A=T.mapNavigation.navButtons[this.focusedMapNavButtonIx];return T.setFocusToElement(A.box,A.element),A.setState(2),S.success}onMapKbdClick(w){let v=this.chart.mapNavigation.navButtons[this.focusedMapNavButtonIx].element;return this.fakeClickEvent(v),w.response.success}onMapNavInit(w){let v=this.chart,T=v.mapNavigation.navButtons[0],S=v.mapNavigation.navButtons[1],E=w>0?T:S;v.setFocusToElement(E.box,E.element),E.setState(2),this.focusedMapNavButtonIx=w>0?0:1}simpleButtonNavigation(w,v,T){let S=this.keyCodes,E=this,x=this.chart;return new r(x,{keyCodeMap:[[[S.tab,S.up,S.down,S.left,S.right],function(A,D){let C=A===S.tab&&D.shiftKey||A===S.left||A===S.up;return this.response[C?"prev":"next"]}],[[S.space,S.enter],function(){return y(T(this,x),this.response.success)}]],validate:function(){return x[w]&&x[w].box&&E[v].innerElement},init:function(){x.setFocusToElement(x[w].box,E[v].innerElement)}})}getKeyboardNavigation(){return[this.simpleButtonNavigation("resetZoomButton","resetZoomProxyButton",function(w,v){v.zoomOut()}),this.simpleButtonNavigation("drillUpButton","drillUpProxyButton",function(w,v){return v.drillUp(),w.response.prev}),this.getMapZoomNavigation()]}}}),n(t,"Accessibility/HighContrastMode.js",[t["Core/Globals.js"]],function(s){let{doc:l,isMS:u,win:r}=s;return{isHighContrastModeActive:function(){let p=/(Edg)/.test(r.navigator.userAgent);if(r.matchMedia&&p)return r.matchMedia("(-ms-high-contrast: active)").matches;if(u&&r.getComputedStyle){let f=l.createElement("div");f.style.backgroundImage="url(data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==)",l.body.appendChild(f);let g=(f.currentStyle||r.getComputedStyle(f)).backgroundImage;return l.body.removeChild(f),g==="none"}return r.matchMedia&&r.matchMedia("(forced-colors: active)").matches},setHighContrastTheme:function(p){var b;p.highContrastModeActive=!0;let f=p.options.accessibility.highContrastTheme;p.update(f,!1);let g=((b=f.colors)==null?void 0:b.length)>1;p.series.forEach(function(y){let w=f.plotOptions[y.type]||{},v=g&&y.colorIndex!==void 0?f.colors[y.colorIndex]:w.color||"window",T={color:w.color||"windowText",colors:g?f.colors:[w.color||"windowText"],borderColor:w.borderColor||"window",fillColor:v};y.update(T,!1),y.points&&y.points.forEach(function(S){S.options&&S.options.color&&S.update({color:w.color||"windowText",borderColor:w.borderColor||"window"},!1)})}),p.redraw()}}}),n(t,"Accessibility/HighContrastTheme.js",[],function(){return{chart:{backgroundColor:"window"},title:{style:{color:"windowText"}},subtitle:{style:{color:"windowText"}},colorAxis:{minColor:"windowText",maxColor:"windowText",stops:[],dataClasses:[]},colors:["windowText"],xAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},yAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},tooltip:{backgroundColor:"window",borderColor:"windowText",style:{color:"windowText"}},plotOptions:{series:{lineColor:"windowText",fillColor:"window",borderColor:"windowText",edgeColor:"windowText",borderWidth:1,dataLabels:{connectorColor:"windowText",color:"windowText",style:{color:"windowText",textOutline:"none"}},marker:{lineColor:"windowText",fillColor:"windowText"}},pie:{color:"window",colors:["window"],borderColor:"windowText",borderWidth:1},boxplot:{fillColor:"window"},candlestick:{lineColor:"windowText",fillColor:"window"},errorbar:{fillColor:"window"}},legend:{backgroundColor:"window",itemStyle:{color:"windowText"},itemHoverStyle:{color:"windowText"},itemHiddenStyle:{color:"#555"},title:{style:{color:"windowText"}}},credits:{style:{color:"windowText"}},drilldown:{activeAxisLabelStyle:{color:"windowText"},activeDataLabelStyle:{color:"windowText"}},navigation:{buttonOptions:{symbolStroke:"windowText",theme:{fill:"window"}}},rangeSelector:{buttonTheme:{fill:"window",stroke:"windowText",style:{color:"windowText"},states:{hover:{fill:"window",stroke:"windowText",style:{color:"windowText"}},select:{fill:"#444",stroke:"windowText",style:{color:"windowText"}}}},inputBoxBorderColor:"windowText",inputStyle:{backgroundColor:"window",color:"windowText"},labelStyle:{color:"windowText"}},navigator:{handles:{backgroundColor:"window",borderColor:"windowText"},outlineColor:"windowText",maskFill:"transparent",series:{color:"windowText",lineColor:"windowText"},xAxis:{gridLineColor:"windowText"}},scrollbar:{barBackgroundColor:"#444",barBorderColor:"windowText",buttonArrowColor:"windowText",buttonBackgroundColor:"window",buttonBorderColor:"windowText",rifleColor:"windowText",trackBackgroundColor:"window",trackBorderColor:"windowText"}}}),n(t,"Accessibility/Options/A11yDefaults.js",[],function(){return{accessibility:{enabled:!0,screenReaderSection:{beforeChartFormat:"<{headingTagName}>{chartTitle}</{headingTagName}><div>{typeDescription}</div><div>{chartSubtitle}</div><div>{chartLongdesc}</div><div>{playAsSoundButton}</div><div>{viewTableButton}</div><div>{xAxisDescription}</div><div>{yAxisDescription}</div><div>{annotationsTitle}{annotationsList}</div>",afterChartFormat:"{endOfChartMarker}",axisRangeDateFormat:"%Y-%m-%d %H:%M:%S"},series:{descriptionFormat:"{seriesDescription}{authorDescription}{axisDescription}",describeSingleSeries:!1,pointDescriptionEnabledThreshold:200},point:{valueDescriptionFormat:"{xDescription}{separator}{value}.",describeNull:!0},landmarkVerbosity:"all",linkedDescription:'*[data-highcharts-chart="{index}"] + .highcharts-description',highContrastMode:"auto",keyboardNavigation:{enabled:!0,focusBorder:{enabled:!0,hideBrowserFocusOutline:!0,style:{color:"#334eff",lineWidth:2,borderRadius:3},margin:2},order:["series","zoom","rangeSelector","navigator","legend","chartMenu"],wrapAround:!0,seriesNavigation:{skipNullPoints:!0,pointNavigationEnabledThreshold:!1,rememberPointFocus:!1}},announceNewData:{enabled:!1,minAnnounceInterval:5e3,interruptUser:!1}},legend:{accessibility:{enabled:!0,keyboardNavigation:{enabled:!0}}},exporting:{accessibility:{enabled:!0}},navigator:{accessibility:{enabled:!0}}}}),n(t,"Accessibility/Options/LangDefaults.js",[],function(){return{accessibility:{defaultChartTitle:"Chart",chartContainerLabel:"{title}. Highcharts interactive chart.",svgContainerLabel:"Interactive chart",drillUpButton:"{buttonText}",credits:"Chart credits: {creditsStr}",thousandsSep:",",svgContainerTitle:"",graphicContainerLabel:"",screenReaderSection:{beforeRegionLabel:"",afterRegionLabel:"",annotations:{heading:"Chart annotations summary",descriptionSinglePoint:"{annotationText}. Related to {annotationPoint}",descriptionMultiplePoints:"{annotationText}. Related to {annotationPoint}{#each additionalAnnotationPoints}, also related to {this}{/each}",descriptionNoPoints:"{annotationText}"},endOfChartMarker:"End of interactive chart."},sonification:{playAsSoundButtonText:"Play as sound, {chartTitle}",playAsSoundClickAnnouncement:"Play"},legend:{legendLabelNoTitle:"Toggle series visibility, {chartTitle}",legendLabel:"Chart legend: {legendTitle}",legendItem:"Show {itemName}"},zoom:{mapZoomIn:"Zoom chart",mapZoomOut:"Zoom out chart",resetZoomButton:"Reset zoom"},rangeSelector:{dropdownLabel:"{rangeTitle}",minInputLabel:"Select start date.",maxInputLabel:"Select end date.",clickButtonAnnouncement:"Viewing {axisRangeDescription}"},navigator:{handleLabel:"{#eq handleIx 0}Start, percent{else}End, percent{/eq}",groupLabel:"Axis zoom",changeAnnouncement:"{axisRangeDescription}"},table:{viewAsDataTableButtonText:"View as data table, {chartTitle}",tableSummary:"Table representation of chart."},announceNewData:{newDataAnnounce:"Updated data for chart {chartTitle}",newSeriesAnnounceSingle:"New data series: {seriesDesc}",newPointAnnounceSingle:"New data point: {pointDesc}",newSeriesAnnounceMultiple:"New data series in chart {chartTitle}: {seriesDesc}",newPointAnnounceMultiple:"New data point in chart {chartTitle}: {pointDesc}"},seriesTypeDescriptions:{boxplot:"Box plot charts are typically used to display groups of statistical data. Each data point in the chart can have up to 5 values: minimum, lower quartile, median, upper quartile, and maximum.",arearange:"Arearange charts are line charts displaying a range between a lower and higher value for each point.",areasplinerange:"These charts are line charts displaying a range between a lower and higher value for each point.",bubble:"Bubble charts are scatter charts where each data point also has a size value.",columnrange:"Columnrange charts are column charts displaying a range between a lower and higher value for each point.",errorbar:"Errorbar series are used to display the variability of the data.",funnel:"Funnel charts are used to display reduction of data in stages.",pyramid:"Pyramid charts consist of a single pyramid with item heights corresponding to each point value.",waterfall:"A waterfall chart is a column chart where each column contributes towards a total end value."},chartTypes:{emptyChart:"Empty chart",mapTypeDescription:"Map of {mapTitle} with {numSeries} data series.",unknownMap:"Map of unspecified region with {numSeries} data series.",combinationChart:"Combination chart with {numSeries} data series.",defaultSingle:"Chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",defaultMultiple:"Chart with {numSeries} data series.",splineSingle:"Line chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",splineMultiple:"Line chart with {numSeries} lines.",lineSingle:"Line chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",lineMultiple:"Line chart with {numSeries} lines.",columnSingle:"Bar chart with {numPoints} {#eq numPoints 1}bar{else}bars{/eq}.",columnMultiple:"Bar chart with {numSeries} data series.",barSingle:"Bar chart with {numPoints} {#eq numPoints 1}bar{else}bars{/eq}.",barMultiple:"Bar chart with {numSeries} data series.",pieSingle:"Pie chart with {numPoints} {#eq numPoints 1}slice{else}slices{/eq}.",pieMultiple:"Pie chart with {numSeries} pies.",scatterSingle:"Scatter chart with {numPoints} {#eq numPoints 1}point{else}points{/eq}.",scatterMultiple:"Scatter chart with {numSeries} data series.",boxplotSingle:"Boxplot with {numPoints} {#eq numPoints 1}box{else}boxes{/eq}.",boxplotMultiple:"Boxplot with {numSeries} data series.",bubbleSingle:"Bubble chart with {numPoints} {#eq numPoints 1}bubbles{else}bubble{/eq}.",bubbleMultiple:"Bubble chart with {numSeries} data series."},axis:{xAxisDescriptionSingular:"The chart has 1 X axis displaying {names[0]}. {ranges[0]}",xAxisDescriptionPlural:"The chart has {numAxes} X axes displaying {#each names}{#unless @first},{/unless}{#if @last} and{/if} {this}{/each}.",yAxisDescriptionSingular:"The chart has 1 Y axis displaying {names[0]}. {ranges[0]}",yAxisDescriptionPlural:"The chart has {numAxes} Y axes displaying {#each names}{#unless @first},{/unless}{#if @last} and{/if} {this}{/each}.",timeRangeDays:"Data range: {range} days.",timeRangeHours:"Data range: {range} hours.",timeRangeMinutes:"Data range: {range} minutes.",timeRangeSeconds:"Data range: {range} seconds.",rangeFromTo:"Data ranges from {rangeFrom} to {rangeTo}.",rangeCategories:"Data range: {numCategories} categories."},exporting:{chartMenuLabel:"Chart menu",menuButtonLabel:"View chart menu, {chartTitle}"},series:{summary:{default:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",defaultCombination:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",line:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",lineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",spline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",splineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",column:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",columnCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",bar:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",barCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",pie:"{series.name}, pie {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}slice{else}slices{/eq}.",pieCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Pie with {series.points.length} {#eq series.points.length 1}slice{else}slices{/eq}.",scatter:"{series.name}, scatter plot {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}point{else}points{/eq}.",scatterCombination:"{series.name}, series {seriesNumber} of {chart.series.length}, scatter plot with {series.points.length} {#eq series.points.length 1}point{else}points{/eq}.",boxplot:"{series.name}, boxplot {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}box{else}boxes{/eq}.",boxplotCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Boxplot with {series.points.length} {#eq series.points.length 1}box{else}boxes{/eq}.",bubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",bubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",map:"{series.name}, map {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}area{else}areas{/eq}.",mapCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Map with {series.points.length} {#eq series.points.length 1}area{else}areas{/eq}.",mapline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",maplineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",mapbubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",mapbubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}."},description:"{description}",xAxisDescription:"X axis, {name}",yAxisDescription:"Y axis, {name}",nullPointValue:"No value",pointAnnotationsDescription:"{#each annotations}Annotation: {this}{/each}"}}}}),n(t,"Accessibility/Options/DeprecatedOptions.js",[t["Core/Utilities.js"]],function(s){let{error:l,pick:u}=s;function r(f,g,b){let y=f,w,v=0;for(;v<g.length-1;++v)y=y[w=g[v]]=u(y[w],{});y[g[g.length-1]]=b}function p(f,g,b,y){function w(S,E){return E.reduce(function(x,A){return x[A]},S)}let v=w(f.options,g),T=w(f.options,b);Object.keys(y).forEach(function(S){let E=v[S];E!==void 0&&(r(T,y[S],E),l(32,!1,f,{[g.join(".")+"."+S]:b.join(".")+"."+y[S].join(".")}))})}return function(f){(function(g){let b=g.options.chart,y=g.options.accessibility||{};["description","typeDescription"].forEach(function(w){b[w]&&(y[w]=b[w],l(32,!1,g,{[`chart.${w}`]:`use accessibility.${w}`}))})})(f),function(g){g.axes.forEach(function(b){let y=b.options;y&&y.description&&(y.accessibility=y.accessibility||{},y.accessibility.description=y.description,l(32,!1,g,{"axis.description":"use axis.accessibility.description"}))})}(f),f.series&&function(g){let b={description:["accessibility","description"],exposeElementToA11y:["accessibility","exposeAsGroupOnly"],pointDescriptionFormatter:["accessibility","point","descriptionFormatter"],skipKeyboardNavigation:["accessibility","keyboardNavigation","enabled"],"accessibility.pointDescriptionFormatter":["accessibility","point","descriptionFormatter"]};g.series.forEach(function(y){Object.keys(b).forEach(function(w){let v=y.options[w];w==="accessibility.pointDescriptionFormatter"&&(v=y.options.accessibility&&y.options.accessibility.pointDescriptionFormatter),v!==void 0&&(r(y.options,b[w],w==="skipKeyboardNavigation"?!v:v),l(32,!1,g,{[`series.${w}`]:"series."+b[w].join(".")}))})})}(f),p(f,["accessibility"],["accessibility"],{pointDateFormat:["point","dateFormat"],pointDateFormatter:["point","dateFormatter"],pointDescriptionFormatter:["point","descriptionFormatter"],pointDescriptionThreshold:["series","pointDescriptionEnabledThreshold"],pointNavigationThreshold:["keyboardNavigation","seriesNavigation","pointNavigationEnabledThreshold"],pointValueDecimals:["point","valueDecimals"],pointValuePrefix:["point","valuePrefix"],pointValueSuffix:["point","valueSuffix"],screenReaderSectionFormatter:["screenReaderSection","beforeChartFormatter"],describeSingleSeries:["series","describeSingleSeries"],seriesDescriptionFormatter:["series","descriptionFormatter"],onTableAnchorClick:["screenReaderSection","onViewDataTableClick"],axisRangeDateFormat:["screenReaderSection","axisRangeDateFormat"]}),p(f,["accessibility","keyboardNavigation"],["accessibility","keyboardNavigation","seriesNavigation"],{skipNullPoints:["skipNullPoints"],mode:["mode"]}),p(f,["lang","accessibility"],["lang","accessibility"],{legendItem:["legend","legendItem"],legendLabel:["legend","legendLabel"],mapZoomIn:["zoom","mapZoomIn"],mapZoomOut:["zoom","mapZoomOut"],resetZoomButton:["zoom","resetZoomButton"],screenReaderRegionLabel:["screenReaderSection","beforeRegionLabel"],rangeSelectorButton:["rangeSelector","buttonText"],rangeSelectorMaxInput:["rangeSelector","maxInputLabel"],rangeSelectorMinInput:["rangeSelector","minInputLabel"],svgContainerEnd:["screenReaderSection","endOfChartMarker"],viewAsDataTable:["table","viewAsDataTableButtonText"],tableSummary:["table","tableSummary"]})}}),n(t,"Accessibility/Accessibility.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/A11yI18n.js"],t["Accessibility/Components/ContainerComponent.js"],t["Accessibility/FocusBorder.js"],t["Accessibility/Components/InfoRegionsComponent.js"],t["Accessibility/KeyboardNavigation.js"],t["Accessibility/Components/LegendComponent.js"],t["Accessibility/Components/MenuComponent.js"],t["Accessibility/Components/NavigatorComponent.js"],t["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],t["Accessibility/ProxyProvider.js"],t["Accessibility/Components/RangeSelectorComponent.js"],t["Accessibility/Components/SeriesComponent/SeriesComponent.js"],t["Accessibility/Components/ZoomComponent.js"],t["Accessibility/HighContrastMode.js"],t["Accessibility/HighContrastTheme.js"],t["Accessibility/Options/A11yDefaults.js"],t["Accessibility/Options/LangDefaults.js"],t["Accessibility/Options/DeprecatedOptions.js"]],function(s,l,u,r,p,f,g,b,y,w,v,T,S,E,x,A,D,C,I,N,W,Y){let{defaultOptions:X}=s,{doc:O}=l,{addEvent:V,extend:$,fireEvent:L,merge:R}=u,{removeElement:G}=r;class U{constructor(H){this.init(H)}init(H){if(this.chart=H,!O.addEventListener){this.zombie=!0,this.components={},H.renderTo.setAttribute("aria-hidden",!0);return}Y(H),this.proxyProvider=new E(this.chart),this.initComponents(),this.keyboardNavigation=new y(H,this.components)}initComponents(){let H=this.chart,q=this.proxyProvider,se=H.options.accessibility;this.components={container:new f,infoRegions:new b,legend:new w,chartMenu:new v,rangeSelector:new x,series:new A,zoom:new D,navigator:new T},se.customComponents&&$(this.components,se.customComponents);let pe=this.components;this.getComponentOrder().forEach(function(ne){pe[ne].initBase(H,q),pe[ne].init()})}getComponentOrder(){return this.components?this.components.series?["series"].concat(Object.keys(this.components).filter(H=>H!=="series")):Object.keys(this.components):[]}update(){let H=this.components,q=this.chart,se=q.options.accessibility;L(q,"beforeA11yUpdate"),q.types=this.getChartTypes();let pe=se.keyboardNavigation.order;this.proxyProvider.updateGroupOrder(pe),this.getComponentOrder().forEach(function(ne){H[ne].onChartUpdate(),L(q,"afterA11yComponentUpdate",{name:ne,component:H[ne]})}),this.keyboardNavigation.update(pe),!q.highContrastModeActive&&se.highContrastMode!==!1&&(C.isHighContrastModeActive()||se.highContrastMode===!0)&&C.setHighContrastTheme(q),L(q,"afterA11yUpdate",{accessibility:this})}destroy(){let H=this.chart||{},q=this.components;Object.keys(q).forEach(function(se){q[se].destroy(),q[se].destroyBase()}),this.proxyProvider&&this.proxyProvider.destroy(),H.announcerContainer&&G(H.announcerContainer),this.keyboardNavigation&&this.keyboardNavigation.destroy(),H.renderTo&&H.renderTo.setAttribute("aria-hidden",!0),H.focusElement&&H.focusElement.removeFocusBorder()}getChartTypes(){let H={};return this.chart.series.forEach(function(q){H[q.type]=1}),Object.keys(H)}}return function(B){function H(){this.accessibility&&this.accessibility.destroy()}function q(){this.a11yDirty&&this.renderTo&&(delete this.a11yDirty,this.updateA11yEnabled());let le=this.accessibility;le&&!le.zombie&&(le.proxyProvider.updateProxyElementPositions(),le.getComponentOrder().forEach(function(ke){le.components[ke].onChartRender()}))}function se(le){let ke=le.options.accessibility;ke&&(ke.customComponents&&(this.options.accessibility.customComponents=ke.customComponents,delete ke.customComponents),R(!0,this.options.accessibility,ke),this.accessibility&&this.accessibility.destroy&&(this.accessibility.destroy(),delete this.accessibility)),this.a11yDirty=!0}function pe(){let le=this.accessibility,ke=this.options.accessibility,be=this.renderer.boxWrapper.element,Ee=this.title;if(ke&&ke.enabled)le&&!le.zombie?le.update():(this.accessibility=le=new B(this),le&&!le.zombie&&le.update(),be.getAttribute("role")==="img"&&be.removeAttribute("role"));else if(le)le.destroy&&le.destroy(),delete this.accessibility;else{this.renderTo.setAttribute("role","img"),this.renderTo.setAttribute("aria-hidden",!1),this.renderTo.setAttribute("aria-label",(Ee&&Ee.element.textContent||"").replace(/</g,"&lt;")),be.setAttribute("aria-hidden",!0);let K=document.getElementsByClassName("highcharts-description")[0];K&&(K.setAttribute("aria-hidden",!1),K.classList.remove("highcharts-linked-description"))}}function ne(){this.series.chart.accessibility&&(this.series.chart.a11yDirty=!0)}B.i18nFormat=p.i18nFormat,B.compose=function(le,ke,be,Ee,K,J){y.compose(le),S.compose(Ee),w.compose(le,ke),v.compose(le),A.compose(le,be,Ee),p.compose(le),g.compose(le,K),J&&x.compose(le,J);let oe=le.prototype;oe.updateA11yEnabled||(oe.updateA11yEnabled=pe,V(le,"destroy",H),V(le,"render",q),V(le,"update",se),["addSeries","init"].forEach(we=>{V(le,we,function(){this.a11yDirty=!0})}),["afterApplyDrilldown","drillupall"].forEach(we=>{V(le,we,function(){let ee=this.accessibility;ee&&!ee.zombie&&ee.update()})}),V(be,"update",ne),["update","updatedData","remove"].forEach(we=>{V(Ee,we,function(){this.chart.accessibility&&(this.chart.a11yDirty=!0)})}))}}(U),R(!0,X,N,{accessibility:{highContrastTheme:I},lang:W}),U}),n(t,"masters/modules/accessibility.src.js",[t["Core/Globals.js"],t["Accessibility/Accessibility.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(s,l,u,r,p,f,g){return s.i18nFormat=l.i18nFormat,s.A11yChartUtilities=r,s.A11yHTMLUtilities=p,s.AccessibilityComponent=u,s.KeyboardNavigationHandler=f,s.SeriesAccessibilityDescriber=g,l.compose(s.Chart,s.Legend,s.Point,s.Series,s.SVGElement,s.RangeSelector),s})})})(_3);var hj=_3.exports;const pj=dh(hj);var w3={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function n(s,l,u,r){s.hasOwnProperty(l)||(s[l]=r.apply(null,u),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:l,module:s[l]}})))}n(t,"Extensions/Pane/PaneComposition.js",[t["Core/Utilities.js"]],function(s){let{addEvent:l,correctFloat:u,defined:r,pick:p}=s;function f(v){let T,S=this;return v&&S.pane.forEach(E=>{g(v.chartX-S.plotLeft,v.chartY-S.plotTop,E.center)&&(T=E)}),T}function g(v,T,S,E,x){let A=!0,D=S[0],C=S[1],I=Math.sqrt(Math.pow(v-D,2)+Math.pow(T-C,2));if(r(E)&&r(x)){let N=Math.atan2(u(T-C,8),u(v-D,8));x!==E&&(A=E>x?N>=E&&N<=Math.PI||N<=x&&N>=-Math.PI:N>=E&&N<=u(x,8))}return I<=Math.ceil(S[2]/2)&&A}function b(v){this.polar&&(v.options.inverted&&([v.x,v.y]=[v.y,v.x]),v.isInsidePlot=this.pane.some(T=>g(v.x,v.y,T.center,T.axis&&T.axis.normalizedStartAngleRad,T.axis&&T.axis.normalizedEndAngleRad)))}function y(v){let T=this.chart;v.hoverPoint&&v.hoverPoint.plotX&&v.hoverPoint.plotY&&T.hoverPane&&!g(v.hoverPoint.plotX,v.hoverPoint.plotY,T.hoverPane.center)&&(v.hoverPoint=void 0)}function w(v){let T=this.chart;T.polar?(T.hoverPane=T.getHoverPane(v),v.filter=function(S){return S.visible&&!(!v.shared&&S.directTouch)&&p(S.options.enableMouseTracking,!0)&&(!T.hoverPane||S.xAxis.pane===T.hoverPane)}):T.hoverPane=void 0}return{compose:function(v,T){let S=v.prototype;S.getHoverPane||(S.collectionsWithUpdate.push("pane"),S.getHoverPane=f,l(v,"afterIsInsidePlot",b),l(T,"afterGetHoverData",y),l(T,"beforeGetHoverData",w))}}}),n(t,"Extensions/Pane/PaneDefaults.js",[],function(){return{pane:{center:["50%","50%"],size:"85%",innerSize:"0%",startAngle:0},background:{shape:"circle",borderRadius:0,borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}}}),n(t,"Extensions/Pane/Pane.js",[t["Series/CenteredUtilities.js"],t["Extensions/Pane/PaneComposition.js"],t["Extensions/Pane/PaneDefaults.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{extend:p,merge:f,splat:g}=r;class b{constructor(w,v){this.coll="pane",this.init(w,v)}init(w,v){this.chart=v,this.background=[],v.pane.push(this),this.setOptions(w)}setOptions(w){this.options=w=f(u.pane,this.chart.angular?{background:{}}:void 0,w)}render(){let w=this.options,v=this.chart.renderer;this.group||(this.group=v.g("pane-group").attr({zIndex:w.zIndex||0}).add()),this.updateCenter();let T=this.options.background;if(T){let S=Math.max((T=g(T)).length,this.background.length||0);for(let E=0;E<S;E++)T[E]&&this.axis?this.renderBackground(f(u.background,T[E]),E):this.background[E]&&(this.background[E]=this.background[E].destroy(),this.background.splice(E,1))}}renderBackground(w,v){let T={class:"highcharts-pane "+(w.className||"")},S="animate";this.chart.styledMode||p(T,{fill:w.backgroundColor,stroke:w.borderColor,"stroke-width":w.borderWidth}),this.background[v]||(this.background[v]=this.chart.renderer.path().add(this.group),S="attr"),this.background[v][S]({d:this.axis.getPlotBandPath(w.from,w.to,w)}).attr(T)}updateCenter(w){this.center=(w||this.axis||{}).center=s.getCenter.call(this)}update(w,v){f(!0,this.options,w),this.setOptions(this.options),this.render(),this.chart.axes.forEach(function(T){T.pane===this&&(T.pane=null,T.update({},v))},this)}}return b.compose=l.compose,b}),n(t,"Series/AreaRange/AreaRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l){let{area:{prototype:{pointClass:u,pointClass:{prototype:r}}}}=s.seriesTypes,{defined:p,isNumber:f}=l;return class extends u{setState(){let g=this.state,b=this.series,y=b.chart.polar;p(this.plotHigh)||(this.plotHigh=b.yAxis.toPixels(this.high,!0)),p(this.plotLow)||(this.plotLow=this.plotY=b.yAxis.toPixels(this.low,!0)),b.lowerStateMarkerGraphic=b.stateMarkerGraphic,b.stateMarkerGraphic=b.upperStateMarkerGraphic,this.graphic=this.graphics&&this.graphics[1],this.plotY=this.plotHigh,y&&f(this.plotHighX)&&(this.plotX=this.plotHighX),r.setState.apply(this,arguments),this.state=g,this.plotY=this.plotLow,this.graphic=this.graphics&&this.graphics[0],y&&f(this.plotLowX)&&(this.plotX=this.plotLowX),b.upperStateMarkerGraphic=b.stateMarkerGraphic,b.stateMarkerGraphic=b.lowerStateMarkerGraphic,b.lowerStateMarkerGraphic=void 0;let w=b.modifyMarkerSettings();r.setState.apply(this,arguments),b.restoreMarkerSettings(w)}haloPath(){let g=this.series.chart.polar,b=[];return this.plotY=this.plotLow,g&&f(this.plotLowX)&&(this.plotX=this.plotLowX),this.isInside&&(b=r.haloPath.apply(this,arguments)),this.plotY=this.plotHigh,g&&f(this.plotHighX)&&(this.plotX=this.plotHighX),this.isTopInside&&(b=b.concat(r.haloPath.apply(this,arguments))),b}isValid(){return f(this.low)&&f(this.high)}}}),n(t,"Series/AreaRange/AreaRangeSeries.js",[t["Series/AreaRange/AreaRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{noop:p}=l,{area:f,area:{prototype:g},column:{prototype:b}}=u.seriesTypes,{addEvent:y,defined:w,extend:v,isArray:T,isNumber:S,pick:E,merge:x}=r;class A extends f{toYData(C){return[C.low,C.high]}highToXY(C){let I=this.chart,N=this.xAxis.postTranslate(C.rectPlotX||0,this.yAxis.len-(C.plotHigh||0));C.plotHighX=N.x-I.plotLeft,C.plotHigh=N.y-I.plotTop,C.plotLowX=C.plotX}getGraphPath(C){let I=[],N=[],W=g.getGraphPath,Y=this.options,X=this.chart.polar,O=X&&Y.connectEnds!==!1,V=Y.connectNulls,$,L,R,G=Y.step;for($=(C=C||this.points).length;$--;){L=C[$];let se=X?{plotX:L.rectPlotX,plotY:L.yBottom,doCurve:!1}:{plotX:L.plotX,plotY:L.plotY,doCurve:!1};L.isNull||O||V||C[$+1]&&!C[$+1].isNull||N.push(se),R={polarPlotY:L.polarPlotY,rectPlotX:L.rectPlotX,yBottom:L.yBottom,plotX:E(L.plotHighX,L.plotX),plotY:L.plotHigh,isNull:L.isNull},N.push(R),I.push(R),L.isNull||O||V||C[$-1]&&!C[$-1].isNull||N.push(se)}let U=W.call(this,C);G&&(G===!0&&(G="left"),Y.step={left:"right",center:"center",right:"left"}[G]);let B=W.call(this,I),H=W.call(this,N);Y.step=G;let q=[].concat(U,B);return!this.chart.polar&&H[0]&&H[0][0]==="M"&&(H[0]=["L",H[0][1],H[0][2]]),this.graphPath=q,this.areaPath=U.concat(H),q.isArea=!0,q.xMap=U.xMap,this.areaPath.xMap=U.xMap,q}drawDataLabels(){var R,G;let C,I,N,W,Y,X=this.points,O=X.length,V=[],$=this.options.dataLabels,L=this.chart.inverted;if($){if(T($)?(W=$[0]||{enabled:!1},Y=$[1]||{enabled:!1}):((W=v({},$)).x=$.xHigh,W.y=$.yHigh,(Y=v({},$)).x=$.xLow,Y.y=$.yLow),W.enabled||((R=this.hasDataLabels)==null?void 0:R.call(this))){for(C=O;C--;)if(I=X[C]){let{plotHigh:U=0,plotLow:B=0}=I;N=W.inside?U<B:U>B,I.y=I.high,I._plotY=I.plotY,I.plotY=U,V[C]=I.dataLabel,I.dataLabel=I.dataLabelUpper,I.below=N,L?W.align||(W.align=N?"right":"left"):W.verticalAlign||(W.verticalAlign=N?"top":"bottom")}for(this.options.dataLabels=W,g.drawDataLabels&&g.drawDataLabels.apply(this,arguments),C=O;C--;)(I=X[C])&&(I.dataLabelUpper=I.dataLabel,I.dataLabel=V[C],delete I.dataLabels,I.y=I.low,I.plotY=I._plotY)}if(Y.enabled||(G=this.hasDataLabels)!=null&&G.call(this)){for(C=O;C--;)if(I=X[C]){let{plotHigh:U=0,plotLow:B=0}=I;N=Y.inside?U<B:U>B,I.below=!N,L?Y.align||(Y.align=N?"left":"right"):Y.verticalAlign||(Y.verticalAlign=N?"bottom":"top")}this.options.dataLabels=Y,g.drawDataLabels&&g.drawDataLabels.apply(this,arguments)}if(W.enabled)for(C=O;C--;)(I=X[C])&&(I.dataLabels=[I.dataLabelUpper,I.dataLabel].filter(function(U){return!!U}));this.options.dataLabels=$}}alignDataLabel(){b.alignDataLabel.apply(this,arguments)}modifyMarkerSettings(){let C={marker:this.options.marker,symbol:this.symbol};if(this.options.lowMarker){let{options:{marker:I,lowMarker:N}}=this;this.options.marker=x(I,N),N.symbol&&(this.symbol=N.symbol)}return C}restoreMarkerSettings(C){this.options.marker=C.marker,this.symbol=C.symbol}drawPoints(){let C,I,N=this.points.length,W=this.modifyMarkerSettings();for(g.drawPoints.apply(this,arguments),this.restoreMarkerSettings(W),C=0;C<N;)(I=this.points[C]).graphics=I.graphics||[],I.origProps={plotY:I.plotY,plotX:I.plotX,isInside:I.isInside,negative:I.negative,zone:I.zone,y:I.y},(I.graphic||I.graphics[0])&&(I.graphics[0]=I.graphic),I.graphic=I.graphics[1],I.plotY=I.plotHigh,w(I.plotHighX)&&(I.plotX=I.plotHighX),I.y=E(I.high,I.origProps.y),I.negative=I.y<(this.options.threshold||0),this.zones.length&&(I.zone=I.getZone()),this.chart.polar||(I.isInside=I.isTopInside=I.plotY!==void 0&&I.plotY>=0&&I.plotY<=this.yAxis.len&&I.plotX>=0&&I.plotX<=this.xAxis.len),C++;for(g.drawPoints.apply(this,arguments),C=0;C<N;)(I=this.points[C]).graphics=I.graphics||[],(I.graphic||I.graphics[1])&&(I.graphics[1]=I.graphic),I.graphic=I.graphics[0],I.origProps&&(v(I,I.origProps),delete I.origProps),C++}hasMarkerChanged(C,I){let N=C.lowMarker,W=I.lowMarker||{};return N&&(N.enabled===!1||W.symbol!==N.symbol||W.height!==N.height||W.width!==N.width)||super.hasMarkerChanged(C,I)}}return A.defaultOptions=x(f.defaultOptions,{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}"></span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:void 0,verticalAlign:void 0,xLow:0,xHigh:0,yLow:0,yHigh:0}}),y(A,"afterTranslate",function(){this.pointArrayMap.join(",")==="low,high"&&this.points.forEach(D=>{let C=D.high,I=D.plotY;D.isNull?D.plotY=void 0:(D.plotLow=I,D.plotHigh=S(C)?this.yAxis.translate(this.dataModify?this.dataModify.modifyValue(C):C,!1,!0,void 0,!0):void 0,this.dataModify&&(D.yBottom=D.plotHigh))})},{order:0}),y(A,"afterTranslate",function(){this.points.forEach(D=>{if(this.chart.polar)this.highToXY(D),D.plotLow=D.plotY,D.tooltipPos=[((D.plotHighX||0)+(D.plotLowX||0))/2,((D.plotHigh||0)+(D.plotLow||0))/2];else{let C=D.pos(!1,D.plotLow),I=D.pos(!1,D.plotHigh);C&&I&&(C[0]=(C[0]+I[0])/2,C[1]=(C[1]+I[1])/2),D.tooltipPos=C}})},{order:3}),v(A.prototype,{deferTranslatePolar:!0,pointArrayMap:["low","high"],pointClass:s,pointValKey:"low",setStackedPoints:p}),u.registerSeriesType("arearange",A),A}),n(t,"Series/AreaSplineRange/AreaSplineRangeSeries.js",[t["Series/AreaRange/AreaRangeSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{spline:{prototype:r}}=l.seriesTypes,{merge:p,extend:f}=u;class g extends s{}return g.defaultOptions=p(s.defaultOptions),f(g.prototype,{getPointSpline:r.getPointSpline}),l.registerSeriesType("areasplinerange",g),g}),n(t,"Series/BoxPlot/BoxPlotSeriesDefaults.js",[],function(){return{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}"></span> <b>{series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,whiskerWidth:2}}),n(t,"Series/BoxPlot/BoxPlotSeries.js",[t["Series/BoxPlot/BoxPlotSeriesDefaults.js"],t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{noop:f}=u,{crisp:g,extend:b,merge:y,pick:w}=p;class v extends l{pointAttribs(){return{}}translate(){let S=this.yAxis,E=this.pointArrayMap;super.translate.apply(this),this.points.forEach(function(x){E.forEach(function(A){x[A]!==null&&(x[A+"Plot"]=S.translate(x[A],0,1,0,1))}),x.plotHigh=x.highPlot})}drawPoints(){let S,E,x,A,D,C,I,N,W,Y,X,O,V,$=this.points,L=this.options,R=this.chart,G=R.renderer,U=this.doQuartiles!==!1,B=this.options.whiskerLength;for(let H of $){let q=(N=H.graphic)?"animate":"attr",se=H.shapeArgs,pe={},ne={},le={},ke={},be=H.color||this.color;if(H.plotY!==void 0){let Ee;W=se.width,X=(Y=se.x)+W,O=W/2,S=U?H.q1Plot:H.lowPlot,E=U?H.q3Plot:H.lowPlot,x=H.highPlot,A=H.lowPlot,N||(H.graphic=N=G.g("point").add(this.group),H.stem=G.path().addClass("highcharts-boxplot-stem").add(N),B&&(H.whiskers=G.path().addClass("highcharts-boxplot-whisker").add(N)),U&&(H.box=G.path(I).addClass("highcharts-boxplot-box").add(N)),H.medianShape=G.path(C).addClass("highcharts-boxplot-median").add(N)),R.styledMode||(ne.stroke=H.stemColor||L.stemColor||be,ne["stroke-width"]=w(H.stemWidth,L.stemWidth,L.lineWidth),ne.dashstyle=H.stemDashStyle||L.stemDashStyle||L.dashStyle,H.stem.attr(ne),B&&(le.stroke=H.whiskerColor||L.whiskerColor||be,le["stroke-width"]=w(H.whiskerWidth,L.whiskerWidth,L.lineWidth),le.dashstyle=H.whiskerDashStyle||L.whiskerDashStyle||L.dashStyle,H.whiskers.attr(le)),U&&(pe.fill=H.fillColor||L.fillColor||be,pe.stroke=L.lineColor||be,pe["stroke-width"]=L.lineWidth||0,pe.dashstyle=H.boxDashStyle||L.boxDashStyle||L.dashStyle,H.box.attr(pe)),ke.stroke=H.medianColor||L.medianColor||be,ke["stroke-width"]=w(H.medianWidth,L.medianWidth,L.lineWidth),ke.dashstyle=H.medianDashStyle||L.medianDashStyle||L.dashStyle,H.medianShape.attr(ke));let K=g((H.plotX||0)+(this.pointXOffset||0)+(this.barW||0)/2,H.stem.strokeWidth());if(Ee=[["M",K,E],["L",K,x],["M",K,S],["L",K,A]],H.stem[q]({d:Ee}),U){let J=H.box.strokeWidth();S=g(S,J),E=g(E,J),Ee=[["M",Y=g(Y,J),E],["L",Y,S],["L",X=g(X,J),S],["L",X,E],["L",Y,E],["Z"]],H.box[q]({d:Ee})}if(B){let J=H.whiskers.strokeWidth();x=g(H.highPlot,J),A=g(H.lowPlot,J),Ee=[["M",g(K-(V=typeof B=="string"&&/%$/.test(B)?O*parseFloat(B)/100:Number(B)/2)),x],["L",g(K+V),x],["M",g(K-V),A],["L",g(K+V),A]],H.whiskers[q]({d:Ee})}Ee=[["M",Y,D=g(H.medianPlot,H.medianShape.strokeWidth())],["L",X,D]],H.medianShape[q]({d:Ee})}}}toYData(S){return[S.low,S.q1,S.median,S.q3,S.high]}}return v.defaultOptions=y(l.defaultOptions,s),b(v.prototype,{pointArrayMap:["low","q1","median","q3","high"],pointValKey:"high",drawDataLabels:f,setStackedPoints:f}),r.registerSeriesType("boxplot",v),v}),n(t,"Series/Bubble/BubbleLegendDefaults.js",[],function(){return{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}),n(t,"Series/Bubble/BubbleLegendItem.js",[t["Core/Color/Color.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{parse:p}=s,{noop:f}=u,{arrayMax:g,arrayMin:b,isNumber:y,merge:w,pick:v,stableSort:T}=r;return class{constructor(S,E){this.setState=f,this.init(S,E)}init(S,E){this.options=S,this.visible=!0,this.chart=E.chart,this.legend=E}addToLegend(S){S.splice(this.options.legendIndex,0,this)}drawLegendSymbol(S){let E,x=v(S.options.itemDistance,20),A=this.legendItem||{},D=this.options,C=D.ranges,I=D.connectorDistance;if(!C||!C.length||!y(C[0].value)){S.options.bubbleLegend.autoRanges=!0;return}T(C,function(X,O){return O.value-X.value}),this.ranges=C,this.setOptions(),this.render();let N=this.getMaxLabelSize(),W=this.ranges[0].radius,Y=2*W;E=(E=I-W+N.width)>0?E:0,this.maxLabel=N,this.movementX=D.labels.align==="left"?E:0,A.labelWidth=Y+E+x,A.labelHeight=Y+N.height/2}setOptions(){let S=this.ranges,E=this.options,x=this.chart.series[E.seriesIndex],A=this.legend.baseline,D={zIndex:E.zIndex,"stroke-width":E.borderWidth},C={zIndex:E.zIndex,"stroke-width":E.connectorWidth},I={align:this.legend.options.rtl||E.labels.align==="left"?"right":"left",zIndex:E.zIndex},N=x.options.marker.fillOpacity,W=this.chart.styledMode;S.forEach(function(Y,X){W||(D.stroke=v(Y.borderColor,E.borderColor,x.color),D.fill=v(Y.color,E.color,N!==1?p(x.color).setOpacity(N).get("rgba"):x.color),C.stroke=v(Y.connectorColor,E.connectorColor,x.color)),S[X].radius=this.getRangeRadius(Y.value),S[X]=w(S[X],{center:S[0].radius-S[X].radius+A}),W||w(!0,S[X],{bubbleAttribs:w(D),connectorAttribs:w(C),labelAttribs:I})},this)}getRangeRadius(S){let E=this.options,x=this.options.seriesIndex,A=this.chart.series[x],D=E.ranges[0].value,C=E.ranges[E.ranges.length-1].value,I=E.minSize,N=E.maxSize;return A.getRadius.call(this,C,D,I,N,S)}render(){let S=this.legendItem||{},E=this.chart.renderer,x=this.options.zThreshold;for(let A of(this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),S.symbol=E.g("bubble-legend"),S.label=E.g("bubble-legend-item").css(this.legend.itemStyle||{}),S.symbol.translateX=0,S.symbol.translateY=0,S.symbol.add(S.label),S.label.add(S.group),this.ranges))A.value>=x&&this.renderRange(A);this.hideOverlappingLabels()}renderRange(S){let E=this.ranges[0],x=this.legend,A=this.options,D=A.labels,C=this.chart,I=C.series[A.seriesIndex],N=C.renderer,W=this.symbols,Y=W.labels,X=S.center,O=Math.abs(S.radius),V=A.connectorDistance||0,$=D.align,L=x.options.rtl,R=A.borderWidth,G=A.connectorWidth,U=E.radius||0,B=X-O-R/2+G/2,H=(B%1?1:.5)-(G%2?0:.5),q=N.styledMode,se=L||$==="left"?-V:V;$==="center"&&(se=0,A.connectorDistance=0,S.labelAttribs.align="center"),W.bubbleItems.push(N.circle(U,X+H,O).attr(q?{}:S.bubbleAttribs).addClass((q?"highcharts-color-"+I.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(A.className||"")).add(this.legendItem.symbol)),W.connectors.push(N.path(N.crispLine([["M",U,B],["L",U+se,B]],A.connectorWidth)).attr(q?{}:S.connectorAttribs).addClass((q?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(A.connectorClassName||"")).add(this.legendItem.symbol));let pe=N.text(this.formatLabel(S)).attr(q?{}:S.labelAttribs).css(q?{}:D.style).addClass("highcharts-bubble-legend-labels "+(A.labels.className||"")).add(this.legendItem.symbol),ne={x:U+se+A.labels.x,y:B+A.labels.y+.4*pe.getBBox().height};pe.attr(ne),Y.push(pe),pe.placed=!0,pe.alignAttr=ne}getMaxLabelSize(){let S,E;return this.symbols.labels.forEach(function(x){E=x.getBBox(!0),S=S?E.width>S.width?E:S:E}),S||{}}formatLabel(S){let E=this.options,x=E.labels.formatter,A=E.labels.format,{numberFormatter:D}=this.chart;return A?l.format(A,S):x?x.call(S):D(S.value,1)}hideOverlappingLabels(){let S=this.chart,E=this.options.labels.allowOverlap,x=this.symbols;!E&&x&&(S.hideOverlappingLabels(x.labels),x.labels.forEach(function(A,D){A.newOpacity?A.newOpacity!==A.oldOpacity&&x.connectors[D].show():x.connectors[D].hide()}))}getRanges(){let S=this.legend.bubbleLegend,E=S.chart.series,x=S.options.ranges,A,D,C=Number.MAX_VALUE,I=-Number.MAX_VALUE;return E.forEach(function(N){N.isBubble&&!N.ignoreSeries&&(D=N.zData.filter(y)).length&&(C=v(N.options.zMin,Math.min(C,Math.max(b(D),N.options.displayNegative===!1?N.options.zThreshold:-Number.MAX_VALUE))),I=v(N.options.zMax,Math.max(I,g(D))))}),A=C===I?[{value:I}]:[{value:C},{value:(C+I)/2},{value:I,autoRanges:!0}],x.length&&x[0].radius&&A.reverse(),A.forEach(function(N,W){x&&x[W]&&(A[W]=w(x[W],N))}),A}predictBubbleSizes(){let S=this.chart,E=S.legend.options,x=E.floating,A=E.layout==="horizontal",D=A?S.legend.lastLineHeight:0,C=S.plotSizeX,I=S.plotSizeY,N=S.series[this.options.seriesIndex],W=N.getPxExtremes(),Y=Math.ceil(W.minPxSize),X=Math.ceil(W.maxPxSize),O=Math.min(I,C),V,$=N.options.maxSize;return x||!/%$/.test($)?V=X:(V=(O+D)*($=parseFloat($))/100/($/100+1),(A&&I-V>=C||!A&&C-V>=I)&&(V=X)),[Y,Math.ceil(V)]}updateRanges(S,E){let x=this.legend.options.bubbleLegend;x.minSize=S,x.maxSize=E,x.ranges=this.getRanges()}correctSizes(){let S=this.legend,E=this.chart.series[this.options.seriesIndex].getPxExtremes();Math.abs(Math.ceil(E.maxPxSize)-this.options.maxSize)>1&&(this.updateRanges(this.options.minSize,E.maxPxSize),S.render())}}}),n(t,"Series/Bubble/BubbleLegendComposition.js",[t["Series/Bubble/BubbleLegendDefaults.js"],t["Series/Bubble/BubbleLegendItem.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{setOptions:f}=u,{composed:g}=r,{addEvent:b,objectEach:y,pushUnique:w,wrap:v}=p;function T(C,I,N){let W,Y,X,O=this.legend,V=S(this)>=0;O&&O.options.enabled&&O.bubbleLegend&&O.options.bubbleLegend.autoRanges&&V?(W=O.bubbleLegend.options,Y=O.bubbleLegend.predictBubbleSizes(),O.bubbleLegend.updateRanges(Y[0],Y[1]),W.placed||(O.group.placed=!1,O.allItems.forEach($=>{(X=$.legendItem||{}).group&&(X.group.translateY=void 0)})),O.render(),W.placed||(this.getMargins(),this.axes.forEach(function($){$.visible&&$.render(),W.placed||($.setScale(),$.updateNames(),y($.ticks,function(L){L.isNew=!0,L.isNewLabel=!0}))}),this.getMargins()),W.placed=!0,C.call(this,I,N),O.bubbleLegend.correctSizes(),D(O,E(O))):(C.call(this,I,N),O&&O.options.enabled&&O.bubbleLegend&&(O.render(),D(O,E(O))))}function S(C){let I=C.series,N=0;for(;N<I.length;){if(I[N]&&I[N].isBubble&&I[N].visible&&I[N].zData.length)return N;N++}return-1}function E(C){let I=C.allItems,N=[],W=I.length,Y,X,O,V=0,$=0;for(V=0;V<W;V++)if(X=I[V].legendItem||{},O=(I[V+1]||{}).legendItem||{},X.labelHeight&&(I[V].itemHeight=X.labelHeight),I[V]===I[W-1]||X.y!==O.y){for(N.push({height:0}),Y=N[N.length-1];$<=V;$++)I[$].itemHeight>Y.height&&(Y.height=I[$].itemHeight);Y.step=V}return N}function x(C){let I=this.bubbleLegend,N=this.options,W=N.bubbleLegend,Y=S(this.chart);I&&I.ranges&&I.ranges.length&&(W.ranges.length&&(W.autoRanges=!!W.ranges[0].autoRanges),this.destroyItem(I)),Y>=0&&N.enabled&&W.enabled&&(W.seriesIndex=Y,this.bubbleLegend=new l(W,this),this.bubbleLegend.addToLegend(C.allItems))}function A(C){let I;if(C.defaultPrevented)return!1;let N=C.legendItem,W=this.chart,Y=N.visible;this&&this.bubbleLegend&&(N.visible=!Y,N.ignoreSeries=Y,I=S(W)>=0,this.bubbleLegend.visible!==I&&(this.update({bubbleLegend:{enabled:I}}),this.bubbleLegend.visible=I),N.visible=Y)}function D(C,I){let N=C.allItems,W=C.options.rtl,Y,X,O,V,$=0;N.forEach((L,R)=>{(V=L.legendItem||{}).group&&(Y=V.group.translateX||0,X=V.y||0,((O=L.movementX)||W&&L.ranges)&&(O=W?Y-L.options.maxSize/2:Y+O,V.group.attr({translateX:O})),R>I[$].step&&$++,V.group.attr({translateY:Math.round(X+I[$].height/2)}),V.y=X+I[$].height/2)})}return{compose:function(C,I){w(g,"Series.BubbleLegend")&&(f({legend:{bubbleLegend:s}}),v(C.prototype,"drawChartBox",T),b(I,"afterGetAllItems",x),b(I,"itemClick",A))}}}),n(t,"Series/Bubble/BubblePoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{seriesTypes:{scatter:{prototype:{pointClass:r}}}}=l,{extend:p}=u;class f extends r{haloPath(b){let y=(b&&this.marker&&this.marker.radius||0)+b;if(this.series.chart.inverted){let w=this.pos()||[0,0],{xAxis:v,yAxis:T,chart:S}=this.series;return S.renderer.symbols.circle(v.len-w[1]-y,T.len-w[0]-y,2*y,2*y)}return s.prototype.haloPath.call(this,y)}}return p(f.prototype,{ttBelow:!1}),f}),n(t,"Series/Bubble/BubbleSeries.js",[t["Series/Bubble/BubbleLegendComposition.js"],t["Series/Bubble/BubblePoint.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f){let{parse:g}=u,{composed:b,noop:y}=r,{series:w,seriesTypes:{column:{prototype:v},scatter:T}}=p,{addEvent:S,arrayMax:E,arrayMin:x,clamp:A,extend:D,isNumber:C,merge:I,pick:N,pushUnique:W}=f;function Y(){let O=this.len,{coll:V,isXAxis:$,min:L}=this,R=$?"xData":"yData",G=(this.max||0)-(L||0),U=0,B=O,H=O/G,q;(V==="xAxis"||V==="yAxis")&&(this.series.forEach(se=>{if(se.bubblePadding&&se.reserveSpace()){this.allowZoomOutside=!0,q=!0;let pe=se[R];if($&&((se.onPoint||se).getRadii(0,0,se),se.onPoint&&(se.radii=se.onPoint.radii)),G>0){let ne=pe.length;for(;ne--;)if(C(pe[ne])&&this.dataMin<=pe[ne]&&pe[ne]<=this.max){let le=se.radii&&se.radii[ne]||0;U=Math.min((pe[ne]-L)*H-le,U),B=Math.max((pe[ne]-L)*H+le,B)}}}}),q&&G>0&&!this.logarithmic&&(B-=O,H*=(O+Math.max(0,U)-Math.min(B,O))/O,[["min","userMin",U],["max","userMax",B]].forEach(se=>{N(this.options[se[0]],this[se[1]])===void 0&&(this[se[0]]+=se[2]/H)})))}class X extends T{static compose(V,$,L){s.compose($,L),W(b,"Series.Bubble")&&S(V,"foundExtremes",Y)}animate(V){!V&&this.points.length<this.options.animationLimit&&this.points.forEach(function($){let{graphic:L,plotX:R=0,plotY:G=0}=$;L&&L.width&&(this.hasRendered||L.attr({x:R,y:G,width:1,height:1}),L.animate(this.markerAttribs($),this.options.animation))},this)}getRadii(){let V=this.zData,$=this.yData,L=[],R,G,U,B=this.chart.bubbleZExtremes,{minPxSize:H,maxPxSize:q}=this.getPxExtremes();if(!B){let se,pe=Number.MAX_VALUE,ne=-Number.MAX_VALUE;this.chart.series.forEach(le=>{if(le.bubblePadding&&le.reserveSpace()){let ke=(le.onPoint||le).getZExtremes();ke&&(pe=Math.min(N(pe,ke.zMin),ke.zMin),ne=Math.max(N(ne,ke.zMax),ke.zMax),se=!0)}}),se?(B={zMin:pe,zMax:ne},this.chart.bubbleZExtremes=B):B={zMin:0,zMax:0}}for(G=0,R=V.length;G<R;G++)U=V[G],L.push(this.getRadius(B.zMin,B.zMax,H,q,U,$&&$[G]));this.radii=L}getRadius(V,$,L,R,G,U){let B=this.options,H=B.sizeBy!=="width",q=B.zThreshold,se=$-V,pe=.5;if(U===null||G===null)return null;if(C(G)){if(B.sizeByAbsoluteValue&&(G=Math.abs(G-q),$=se=Math.max($-q,Math.abs(V-q)),V=0),G<V)return L/2-1;se>0&&(pe=(G-V)/se)}return H&&pe>=0&&(pe=Math.sqrt(pe)),Math.ceil(L+pe*(R-L))/2}hasData(){return!!this.processedXData.length}markerAttribs(V,$){let L=super.markerAttribs(V,$),{height:R=0,width:G=0}=L;return this.chart.inverted?D(L,{x:(V.plotX||0)-G/2,y:(V.plotY||0)-R/2}):L}pointAttribs(V,$){let L=this.options.marker.fillOpacity,R=w.prototype.pointAttribs.call(this,V,$);return L!==1&&(R.fill=g(R.fill).setOpacity(L).get("rgba")),R}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){let{data:V,options:$,radii:L}=this,{minPxSize:R}=this.getPxExtremes(),G=V.length;for(;G--;){let U=V[G],B=L?L[G]:0;this.zoneAxis==="z"&&(U.negative=(U.z||0)<($.zThreshold||0)),C(B)&&B>=R/2?(U.marker=D(U.marker,{radius:B,width:2*B,height:2*B}),U.dlBox={x:U.plotX-B,y:U.plotY-B,width:2*B,height:2*B}):(U.shapeArgs=U.plotY=U.dlBox=void 0,U.isInside=!1)}}getPxExtremes(){let V=Math.min(this.chart.plotWidth,this.chart.plotHeight),$=G=>{let U;return typeof G=="string"&&(U=/%$/.test(G),G=parseInt(G,10)),U?V*G/100:G},L=$(N(this.options.minSize,8)),R=Math.max($(N(this.options.maxSize,"20%")),L);return{minPxSize:L,maxPxSize:R}}getZExtremes(){let V=this.options,$=(this.zData||[]).filter(C);if($.length){let L=N(V.zMin,A(x($),V.displayNegative===!1?V.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),R=N(V.zMax,E($));if(C(L)&&C(R))return{zMin:L,zMax:R}}}}return X.defaultOptions=I(T.defaultOptions,{dataLabels:{formatter:function(){let{numberFormatter:O}=this.series.chart,{z:V}=this.point;return C(V)?O(V,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),D(X.prototype,{alignDataLabel:v.alignDataLabel,applyZones:y,bubblePadding:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:l,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),S(X,"updatedData",O=>{delete O.target.chart.bubbleZExtremes}),S(X,"remove",O=>{delete O.target.chart.bubbleZExtremes}),p.registerSeriesType("bubble",X),X}),n(t,"Series/ColumnRange/ColumnRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l){let{seriesTypes:{column:{prototype:{pointClass:{prototype:u}}},arearange:{prototype:{pointClass:r}}}}=s,{extend:p,isNumber:f}=l;class g extends r{isValid(){return f(this.low)}}return p(g.prototype,{setState:u.setState}),g}),n(t,"Series/ColumnRange/ColumnRangeSeries.js",[t["Series/ColumnRange/ColumnRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{noop:p}=l,{seriesTypes:{arearange:f,column:g,column:{prototype:b}}}=u,{addEvent:y,clamp:w,extend:v,isNumber:T,merge:S,pick:E}=r;class x extends f{setOptions(){return S(!0,arguments[0],{stacking:void 0}),f.prototype.setOptions.apply(this,arguments)}translate(){return b.translate.apply(this)}pointAttribs(){return b.pointAttribs.apply(this,arguments)}translate3dPoints(){return b.translate3dPoints.apply(this,arguments)}translate3dShapes(){return b.translate3dShapes.apply(this,arguments)}afterColumnTranslate(){let D,C,I,N,W=this.yAxis,Y=this.xAxis,X=Y.startAngleRad,O=this.chart,V=this.xAxis.isRadial,$=Math.max(O.chartWidth,O.chartHeight)+999;this.points.forEach(L=>{let R=L.shapeArgs||{},G=this.options.minPointLength,U=L.plotY,B=W.translate(L.high,0,1,0,1);if(T(B)&&T(U))if(L.plotHigh=w(B,-$,$),L.plotLow=w(U,-$,$),N=L.plotHigh,Math.abs(D=E(L.rectPlotY,L.plotY)-L.plotHigh)<G?(C=G-D,D+=C,N-=C/2):D<0&&(D*=-1,N-=D),V&&this.polar)I=L.barX+X,L.shapeType="arc",L.shapeArgs=this.polar.arc(N+D,N,I,I+L.pointWidth);else{R.height=D,R.y=N;let{x:H=0,width:q=0}=R;L.shapeArgs=S(L.shapeArgs,this.crispCol(H,N,q,D)),L.tooltipPos=O.inverted?[W.len+W.pos-O.plotLeft-N-D/2,Y.len+Y.pos-O.plotTop-H-q/2,D]:[Y.left-O.plotLeft+H+q/2,W.pos-O.plotTop+N+D/2,D]}})}}return x.defaultOptions=S(g.defaultOptions,f.defaultOptions,{borderRadius:{where:"all"},pointRange:null,legendSymbol:"rectangle",marker:null,states:{hover:{halo:!1}}}),y(x,"afterColumnTranslate",function(){x.prototype.afterColumnTranslate.apply(this)},{order:5}),v(x.prototype,{directTouch:!0,pointClass:s,trackerGroups:["group","dataLabelsGroup"],adjustForMissingColumns:b.adjustForMissingColumns,animate:b.animate,crispCol:b.crispCol,drawGraph:p,drawPoints:b.drawPoints,getSymbol:p,drawTracker:b.drawTracker,getColumnMetrics:b.getColumnMetrics}),u.registerSeriesType("columnrange",x),x}),n(t,"Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js",[],function(){return{}}),n(t,"Series/ColumnPyramid/ColumnPyramidSeries.js",[t["Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{column:r}=l.seriesTypes,{clamp:p,merge:f,pick:g}=u;class b extends r{translate(){let w=this.chart,v=this.options,T=this.dense=this.closestPointRange*this.xAxis.transA<2,S=this.borderWidth=g(v.borderWidth,T?0:1),E=this.yAxis,x=v.threshold,A=g(v.minPointLength,5),D=this.getColumnMetrics(),C=D.width,I=this.pointXOffset=D.offset,N=this.translatedThreshold=E.getThreshold(x),W=this.barW=Math.max(C,1+2*S);for(let Y of(w.inverted&&(N-=.5),v.pointPadding&&(W=Math.ceil(W)),super.translate(),this.points)){let X=g(Y.yBottom,N),O=999+Math.abs(X),V=p(Y.plotY,-O,E.len+O),$=W/2,L=Math.min(V,X),R=Math.max(V,X)-L,G=Y.plotX+I,U,B,H,q,se,pe,ne,le,ke,be,Ee;v.centerInCategory&&(G=this.adjustForMissingColumns(G,C,Y,D)),Y.barX=G,Y.pointWidth=C,Y.tooltipPos=w.inverted?[E.len+E.pos-w.plotLeft-V,this.xAxis.len-G-$,R]:[G+$,V+E.pos-w.plotTop,R],U=x+(Y.total||Y.y),v.stacking==="percent"&&(U=x+(Y.y<0)?-100:100);let K=E.toPixels(U,!0);H=(B=w.plotHeight-K-(w.plotHeight-N))?$*(L-K)/B:0,q=B?$*(L+R-K)/B:0,pe=G-H+$,ne=G+H+$,le=G+q+$,ke=G-q+$,be=L-A,Ee=L+R,Y.y<0&&(be=L,Ee=L+R+A),w.inverted&&(se=E.width-L,B=K-(E.width-N),H=$*(K-se)/B,q=$*(K-(se-R))/B,ne=(pe=G+$+H)-2*H,le=G-q+$,ke=G+q+$,be=L,Ee=L+R-A,Y.y<0&&(Ee=L+R+A)),Y.shapeType="path",Y.shapeArgs={x:pe,y:be,width:ne-pe,height:R,d:[["M",pe,be],["L",ne,be],["L",le,Ee],["L",ke,Ee],["Z"]]}}}}return b.defaultOptions=f(r.defaultOptions,s),l.registerSeriesType("columnpyramid",b),b}),n(t,"Series/ErrorBar/ErrorBarSeriesDefaults.js",[],function(){return{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}"></span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}}),n(t,"Series/ErrorBar/ErrorBarSeries.js",[t["Series/BoxPlot/BoxPlotSeries.js"],t["Series/Column/ColumnSeries.js"],t["Series/ErrorBar/ErrorBarSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r,p){let{arearange:f}=r.seriesTypes,{addEvent:g,merge:b,extend:y}=p;class w extends s{getColumnMetrics(){return this.linkedParent&&this.linkedParent.columnMetrics||l.prototype.getColumnMetrics.call(this)}drawDataLabels(){let T=this.pointValKey;if(f)for(let S of(f.prototype.drawDataLabels.call(this),this.points))S.y=S[T]}toYData(T){return[T.low,T.high]}}return w.defaultOptions=b(s.defaultOptions,u),g(w,"afterTranslate",function(){for(let v of this.points)v.plotLow=v.plotY},{order:0}),y(w.prototype,{pointArrayMap:["low","high"],pointValKey:"high",doQuartiles:!1}),r.registerSeriesType("errorbar",w),w}),n(t,"Series/Gauge/GaugePoint.js",[t["Core/Series/SeriesRegistry.js"]],function(s){let{series:{prototype:{pointClass:l}}}=s;return class extends l{setState(u){this.state=u}}}),n(t,"Series/Gauge/GaugeSeries.js",[t["Series/Gauge/GaugePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{noop:p}=l,{series:f,seriesTypes:{column:g}}=u,{clamp:b,isNumber:y,extend:w,merge:v,pick:T,pInt:S,defined:E}=r;class x extends f{translate(){let D=this.yAxis,C=this.options,I=D.center;this.generatePoints(),this.points.forEach(N=>{let W=v(C.dial,N.dial),Y=S(W.radius)*I[2]/200,X=S(W.baseLength)*Y/100,O=S(W.rearLength)*Y/100,V=W.baseWidth,$=W.topWidth,L=C.overshoot,R=D.startAngleRad+D.translate(N.y,void 0,void 0,void 0,!0);(y(L)||C.wrap===!1)&&(L=y(L)?L/180*Math.PI:0,R=b(R,D.startAngleRad-L,D.endAngleRad+L)),R=180*R/Math.PI,N.shapeType="path";let G=W.path||[["M",-O,-V/2],["L",X,-V/2],["L",Y,-$/2],["L",Y,$/2],["L",X,V/2],["L",-O,V/2],["Z"]];N.shapeArgs={d:G,translateX:I[0],translateY:I[1],rotation:R},N.plotX=I[0],N.plotY=I[1],E(N.y)&&D.max-D.min&&(N.percentage=(N.y-D.min)/(D.max-D.min)*100)})}drawPoints(){let D=this,C=D.chart,I=D.yAxis.center,N=D.pivot,W=D.options,Y=W.pivot,X=C.renderer;D.points.forEach(O=>{let V=O.graphic,$=O.shapeArgs,L=$.d,R=v(W.dial,O.dial);V?(V.animate($),$.d=L):O.graphic=X[O.shapeType]($).addClass("highcharts-dial").add(D.group),C.styledMode||O.graphic[V?"animate":"attr"]({stroke:R.borderColor,"stroke-width":R.borderWidth,fill:R.backgroundColor})}),N?N.animate({translateX:I[0],translateY:I[1]}):Y&&(D.pivot=X.circle(0,0,Y.radius).attr({zIndex:2}).addClass("highcharts-pivot").translate(I[0],I[1]).add(D.group),C.styledMode||D.pivot.attr({fill:Y.backgroundColor,stroke:Y.borderColor,"stroke-width":Y.borderWidth}))}animate(D){let C=this;D||C.points.forEach(I=>{let N=I.graphic;N&&(N.attr({rotation:180*C.yAxis.startAngleRad/Math.PI}),N.animate({rotation:I.shapeArgs.rotation},C.options.animation))})}render(){this.group=this.plotGroup("group","series",this.visible?"inherit":"hidden",this.options.zIndex,this.chart.seriesGroup),f.prototype.render.call(this),this.group.clip(this.chart.clipRect)}setData(D,C){f.prototype.setData.call(this,D,!1),this.processData(),this.generatePoints(),T(C,!0)&&this.chart.redraw()}hasData(){return!!this.points.length}}return x.defaultOptions=v(f.defaultOptions,{dataLabels:{borderColor:"#cccccc",borderRadius:3,borderWidth:1,crop:!1,defer:!1,enabled:!0,verticalAlign:"top",y:15,zIndex:2},dial:{backgroundColor:"#000000",baseLength:"70%",baseWidth:3,borderColor:"#cccccc",borderWidth:0,radius:"80%",rearLength:"10%",topWidth:1},pivot:{radius:5,borderWidth:0,borderColor:"#cccccc",backgroundColor:"#000000"},tooltip:{headerFormat:""},showInLegend:!1}),w(x.prototype,{angular:!0,directTouch:!0,drawGraph:p,drawTracker:g.prototype.drawTracker,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,pointClass:s,trackerGroups:["group","dataLabelsGroup"]}),u.registerSeriesType("gauge",x),x}),n(t,"Series/DragNodesComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{composed:u}=s,{addEvent:r,pushUnique:p}=l;function f(){let g,b,y,w=this;w.container&&(g=r(w.container,"mousedown",v=>{let T=w.hoverPoint;T&&T.series&&T.series.hasDraggableNodes&&T.series.options.draggable&&(T.series.onMouseDown(T,v),b=r(w.container,"mousemove",S=>T&&T.series&&T.series.onMouseMove(T,S)),y=r(w.container.ownerDocument,"mouseup",S=>(b(),y(),T&&T.series&&T.series.onMouseUp(T,S))))})),r(w,"destroy",function(){g()})}return{compose:function(g){p(u,"DragNodes")&&r(g,"load",f)},onMouseDown:function(g,b){var w;let y=((w=this.chart.pointer)==null?void 0:w.normalize(b))||b;g.fixedPosition={chartX:y.chartX,chartY:y.chartY,plotX:g.plotX,plotY:g.plotY},g.inDragMode=!0},onMouseMove:function(g,b){var y;if(g.fixedPosition&&g.inDragMode){let w,v,T=this.chart,S=((y=T.pointer)==null?void 0:y.normalize(b))||b,E=g.fixedPosition.chartX-S.chartX,x=g.fixedPosition.chartY-S.chartY,A=T.graphLayoutsLookup;(Math.abs(E)>5||Math.abs(x)>5)&&(w=g.fixedPosition.plotX-E,v=g.fixedPosition.plotY-x,T.isInsidePlot(w,v)&&(g.plotX=w,g.plotY=v,g.hasDragged=!0,this.redrawHalo(g),A.forEach(D=>{D.restartSimulation()})))}},onMouseUp:function(g){g.fixedPosition&&(g.hasDragged&&(this.layout.enableSimulation?this.layout.start():this.chart.redraw()),g.inDragMode=g.hasDragged=!1,this.options.fixedDraggable||delete g.fixedPosition)},redrawHalo:function(g){g&&this.halo&&this.halo.attr({d:g.haloPath(this.options.states.hover.halo.size)})}}}),n(t,"Series/GraphLayoutComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){let{setAnimation:r}=s,{composed:p}=l,{addEvent:f,pushUnique:g}=u;function b(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(T=>{T.updateSimulation()}),this.redraw())}function y(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(T=>{T.updateSimulation(!1)}),this.redraw())}function w(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach(T=>{T.stop()})}function v(){let T,S=!1,E=x=>{x.maxIterations--&&isFinite(x.temperature)&&!x.isStable()&&!x.enableSimulation&&(x.beforeStep&&x.beforeStep(),x.step(),T=!1,S=!0)};if(this.graphLayoutsLookup){for(r(!1,this),this.graphLayoutsLookup.forEach(x=>x.start());!T;)T=!0,this.graphLayoutsLookup.forEach(E);S&&this.series.forEach(x=>{x&&x.layout&&x.render()})}}return{compose:function(T){g(p,"GraphLayout")&&(f(T,"afterPrint",b),f(T,"beforePrint",y),f(T,"predraw",w),f(T,"render",v))},integrations:{},layouts:{}}}),n(t,"Series/PackedBubble/PackedBubblePoint.js",[t["Core/Chart/Chart.js"],t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"]],function(s,l,u){let{seriesTypes:{bubble:{prototype:{pointClass:r}}}}=u;return class extends r{destroy(){var p;return(p=this.series)!=null&&p.layout&&this.series.layout.removeElementFromCollection(this,this.series.layout.nodes),l.prototype.destroy.apply(this,arguments)}firePointEvent(){let p=this.series.options;if(this.isParentNode&&p.parentNode){let f=p.allowPointSelect;p.allowPointSelect=p.parentNode.allowPointSelect,l.prototype.firePointEvent.apply(this,arguments),p.allowPointSelect=f}else l.prototype.firePointEvent.apply(this,arguments)}select(){let p=this.series.chart;this.isParentNode?(p.getSelectedPoints=p.getSelectedParentNodes,l.prototype.select.apply(this,arguments),p.getSelectedPoints=s.prototype.getSelectedPoints):l.prototype.select.apply(this,arguments)}}}),n(t,"Series/PackedBubble/PackedBubbleSeriesDefaults.js",[t["Core/Utilities.js"]],function(s){let{isNumber:l}=s;return{minSize:"10%",maxSize:"50%",sizeBy:"area",zoneAxis:"y",crisp:!1,tooltip:{pointFormat:"Value: {point.value}"},draggable:!0,useSimulation:!0,parentNode:{allowPointSelect:!1},dataLabels:{formatter:function(){let{numberFormatter:u}=this.series.chart,{value:r}=this.point;return l(r)?u(r,-1):""},parentNodeFormatter:function(){return this.name},parentNodeTextPath:{enabled:!0},padding:0,style:{transition:"opacity 2000ms"}},layoutAlgorithm:{initialPositions:"circle",initialPositionRadius:20,bubblePadding:5,parentNodeLimit:!1,seriesInteraction:!0,dragBetweenSeries:!1,parentNodeOptions:{maxIterations:400,gravitationalConstant:.03,maxSpeed:50,initialPositionRadius:100,seriesInteraction:!0,marker:{fillColor:null,fillOpacity:1,lineWidth:null,lineColor:null,symbol:"circle"}},enableSimulation:!0,type:"packedbubble",integration:"packedbubble",maxIterations:1e3,splitSeries:!1,maxSpeed:5,gravitationalConstant:.01,friction:-.981}}}),n(t,"Series/Networkgraph/VerletIntegration.js",[],function(){return{attractive:function(s,l,u){let r=s.getMass(),p=-u.x*l*this.diffTemperature,f=-u.y*l*this.diffTemperature;s.fromNode.fixedPosition||(s.fromNode.plotX-=p*r.fromNode/s.fromNode.degree,s.fromNode.plotY-=f*r.fromNode/s.fromNode.degree),s.toNode.fixedPosition||(s.toNode.plotX+=p*r.toNode/s.toNode.degree,s.toNode.plotY+=f*r.toNode/s.toNode.degree)},attractiveForceFunction:function(s,l){return(l-s)/s},barycenter:function(){let s=this.options.gravitationalConstant||0,l=(this.barycenter.xFactor-(this.box.left+this.box.width)/2)*s,u=(this.barycenter.yFactor-(this.box.top+this.box.height)/2)*s;this.nodes.forEach(function(r){r.fixedPosition||(r.plotX-=l/r.mass/r.degree,r.plotY-=u/r.mass/r.degree)})},getK:function(s){return Math.pow(s.box.width*s.box.height/s.nodes.length,.5)},integrate:function(s,l){let u=-s.options.friction,r=s.options.maxSpeed,p=l.prevX,f=l.prevY,g=(l.plotX+l.dispX-p)*u,b=(l.plotY+l.dispY-f)*u,y=Math.abs,w=y(g)/(g||1),v=y(b)/(b||1),T=w*Math.min(r,Math.abs(g)),S=v*Math.min(r,Math.abs(b));l.prevX=l.plotX+l.dispX,l.prevY=l.plotY+l.dispY,l.plotX+=T,l.plotY+=S,l.temperature=s.vectorLength({x:T,y:S})},repulsive:function(s,l,u){let r=l*this.diffTemperature/s.mass/s.degree;s.fixedPosition||(s.plotX+=u.x*r,s.plotY+=u.y*r)},repulsiveForceFunction:function(s,l){return(l-s)/s*(l>s?1:0)}}}),n(t,"Series/PackedBubble/PackedBubbleIntegration.js",[t["Core/Globals.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(s,l){let{noop:u}=s;return{barycenter:function(){let r,p,f=this.options.gravitationalConstant,g=this.box,b=this.nodes;for(let y of b)this.options.splitSeries&&!y.isParentNode?(r=y.series.parentNode.plotX,p=y.series.parentNode.plotY):(r=g.width/2,p=g.height/2),y.fixedPosition||(y.plotX-=(y.plotX-r)*f/(y.mass*Math.sqrt(b.length)),y.plotY-=(y.plotY-p)*f/(y.mass*Math.sqrt(b.length)))},getK:u,integrate:l.integrate,repulsive:function(r,p,f,g){let b=p*this.diffTemperature/r.mass/r.degree,y=f.x*b,w=f.y*b;r.fixedPosition||(r.plotX+=y,r.plotY+=w),g.fixedPosition||(g.plotX-=y,g.plotY-=w)},repulsiveForceFunction:function(r,p,f,g){return Math.min(r,(f.marker.radius+g.marker.radius)/2)}}}),n(t,"Series/Networkgraph/EulerIntegration.js",[],function(){return{attractive:function(s,l,u,r){let p=s.getMass(),f=u.x/r*l,g=u.y/r*l;s.fromNode.fixedPosition||(s.fromNode.dispX-=f*p.fromNode/s.fromNode.degree,s.fromNode.dispY-=g*p.fromNode/s.fromNode.degree),s.toNode.fixedPosition||(s.toNode.dispX+=f*p.toNode/s.toNode.degree,s.toNode.dispY+=g*p.toNode/s.toNode.degree)},attractiveForceFunction:function(s,l){return s*s/l},barycenter:function(){let s=this.options.gravitationalConstant,l=this.barycenter.xFactor,u=this.barycenter.yFactor;this.nodes.forEach(function(r){if(!r.fixedPosition){let p=r.getDegree(),f=p*(1+p/2);r.dispX+=(l-r.plotX)*s*f/r.degree,r.dispY+=(u-r.plotY)*s*f/r.degree}})},getK:function(s){return Math.pow(s.box.width*s.box.height/s.nodes.length,.3)},integrate:function(s,l){l.dispX+=l.dispX*s.options.friction,l.dispY+=l.dispY*s.options.friction;let u=l.temperature=s.vectorLength({x:l.dispX,y:l.dispY});u!==0&&(l.plotX+=l.dispX/u*Math.min(Math.abs(l.dispX),s.temperature),l.plotY+=l.dispY/u*Math.min(Math.abs(l.dispY),s.temperature))},repulsive:function(s,l,u,r){s.dispX+=u.x/r*l/s.degree,s.dispY+=u.y/r*l/s.degree},repulsiveForceFunction:function(s,l){return l*l/s}}}),n(t,"Series/Networkgraph/QuadTreeNode.js",[],function(){class s{constructor(u){this.body=!1,this.isEmpty=!1,this.isInternal=!1,this.nodes=[],this.box=u,this.boxSize=Math.min(u.width,u.height)}divideBox(){let u=this.box.width/2,r=this.box.height/2;this.nodes[0]=new s({left:this.box.left,top:this.box.top,width:u,height:r}),this.nodes[1]=new s({left:this.box.left+u,top:this.box.top,width:u,height:r}),this.nodes[2]=new s({left:this.box.left+u,top:this.box.top+r,width:u,height:r}),this.nodes[3]=new s({left:this.box.left,top:this.box.top+r,width:u,height:r})}getBoxPosition(u){let r=u.plotX<this.box.left+this.box.width/2,p=u.plotY<this.box.top+this.box.height/2;return r?p?0:3:p?1:2}insert(u,r){let p;this.isInternal?this.nodes[this.getBoxPosition(u)].insert(u,r-1):(this.isEmpty=!1,this.body?r?(this.isInternal=!0,this.divideBox(),this.body!==!0&&(this.nodes[this.getBoxPosition(this.body)].insert(this.body,r-1),this.body=!0),this.nodes[this.getBoxPosition(u)].insert(u,r-1)):((p=new s({top:u.plotX||NaN,left:u.plotY||NaN,width:.1,height:.1})).body=u,p.isInternal=!1,this.nodes.push(p)):(this.isInternal=!1,this.body=u))}updateMassAndCenter(){let u=0,r=0,p=0;if(this.isInternal){for(let f of this.nodes)f.isEmpty||(u+=f.mass,r+=f.plotX*f.mass,p+=f.plotY*f.mass);r/=u,p/=u}else this.body&&(u=this.body.mass,r=this.body.plotX,p=this.body.plotY);this.mass=u,this.plotX=r,this.plotY=p}}return s}),n(t,"Series/Networkgraph/QuadTree.js",[t["Series/Networkgraph/QuadTreeNode.js"]],function(s){return class{constructor(l,u,r,p){this.box={left:l,top:u,width:r,height:p},this.maxDepth=25,this.root=new s(this.box),this.root.isInternal=!0,this.root.isRoot=!0,this.root.divideBox()}calculateMassAndCenter(){this.visitNodeRecursive(null,null,function(l){l.updateMassAndCenter()})}insertNodes(l){for(let u of l)this.root.insert(u,this.maxDepth)}visitNodeRecursive(l,u,r){let p;if(l||(l=this.root),l===this.root&&u&&(p=u(l)),p!==!1){for(let f of l.nodes){if(f.isInternal){if(u&&(p=u(f)),p===!1)continue;this.visitNodeRecursive(f,u,r)}else f.body&&u&&u(f.body);r&&r(f)}l===this.root&&r&&r(l)}}}}),n(t,"Series/Networkgraph/ReingoldFruchtermanLayout.js",[t["Series/Networkgraph/EulerIntegration.js"],t["Core/Globals.js"],t["Series/GraphLayoutComposition.js"],t["Series/Networkgraph/QuadTree.js"],t["Core/Utilities.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(s,l,u,r,p,f){let{win:g}=l,{clamp:b,defined:y,isFunction:w,fireEvent:v,pick:T}=p;class S{constructor(){this.box={},this.currentStep=0,this.initialRendering=!0,this.links=[],this.nodes=[],this.series=[],this.simulation=!1}static compose(x){u.compose(x),u.integrations.euler=s,u.integrations.verlet=f,u.layouts["reingold-fruchterman"]=S}init(x){this.options=x,this.nodes=[],this.links=[],this.series=[],this.box={x:0,y:0,width:0,height:0},this.setInitialRendering(!0),this.integration=u.integrations[x.integration],this.enableSimulation=x.enableSimulation,this.attractiveForce=T(x.attractiveForce,this.integration.attractiveForceFunction),this.repulsiveForce=T(x.repulsiveForce,this.integration.repulsiveForceFunction),this.approximation=x.approximation}updateSimulation(x){this.enableSimulation=T(x,this.options.enableSimulation)}start(){let x=this.series,A=this.options;this.currentStep=0,this.forces=x[0]&&x[0].forces||[],this.chart=x[0]&&x[0].chart,this.initialRendering&&(this.initPositions(),x.forEach(function(D){D.finishedAnimating=!0,D.render()})),this.setK(),this.resetSimulation(A),this.enableSimulation&&this.step()}step(){let x=this.series;for(let A of(this.currentStep++,this.approximation==="barnes-hut"&&(this.createQuadTree(),this.quadTree.calculateMassAndCenter()),this.forces||[]))this[A+"Forces"](this.temperature);if(this.applyLimits(),this.temperature=this.coolDown(this.startTemperature,this.diffTemperature,this.currentStep),this.prevSystemTemperature=this.systemTemperature,this.systemTemperature=this.getSystemTemperature(),this.enableSimulation){for(let A of x)A.chart&&A.render();this.maxIterations--&&isFinite(this.temperature)&&!this.isStable()?(this.simulation&&g.cancelAnimationFrame(this.simulation),this.simulation=g.requestAnimationFrame(()=>this.step())):(this.simulation=!1,this.series.forEach(A=>{v(A,"afterSimulation")}))}}stop(){this.simulation&&g.cancelAnimationFrame(this.simulation)}setArea(x,A,D,C){this.box={left:x,top:A,width:D,height:C}}setK(){this.k=this.options.linkLength||this.integration.getK(this)}addElementsToCollection(x,A){for(let D of x)A.indexOf(D)===-1&&A.push(D)}removeElementFromCollection(x,A){let D=A.indexOf(x);D!==-1&&A.splice(D,1)}clear(){this.nodes.length=0,this.links.length=0,this.series.length=0,this.resetSimulation()}resetSimulation(){this.forcedStop=!1,this.systemTemperature=0,this.setMaxIterations(),this.setTemperature(),this.setDiffTemperature()}restartSimulation(){this.simulation?this.resetSimulation():(this.setInitialRendering(!1),this.enableSimulation?this.start():this.setMaxIterations(1),this.chart&&this.chart.redraw(),this.setInitialRendering(!0))}setMaxIterations(x){this.maxIterations=T(x,this.options.maxIterations)}setTemperature(){this.temperature=this.startTemperature=Math.sqrt(this.nodes.length)}setDiffTemperature(){this.diffTemperature=this.startTemperature/(this.options.maxIterations+1)}setInitialRendering(x){this.initialRendering=x}createQuadTree(){this.quadTree=new r(this.box.left,this.box.top,this.box.width,this.box.height),this.quadTree.insertNodes(this.nodes)}initPositions(){let x=this.options.initialPositions;if(w(x))for(let A of(x.call(this),this.nodes))y(A.prevX)||(A.prevX=A.plotX),y(A.prevY)||(A.prevY=A.plotY),A.dispX=0,A.dispY=0;else x==="circle"?this.setCircularPositions():this.setRandomPositions()}setCircularPositions(){let x,A=this.box,D=this.nodes,C=2*Math.PI/(D.length+1),I=D.filter(function(O){return O.linksTo.length===0}),N={},W=this.options.initialPositionRadius,Y=O=>{for(let V of O.linksFrom||[])N[V.toNode.id]||(N[V.toNode.id]=!0,X.push(V.toNode),Y(V.toNode))},X=[];for(let O of I)X.push(O),Y(O);if(X.length)for(let O of D)X.indexOf(O)===-1&&X.push(O);else X=D;for(let O=0,V=X.length;O<V;++O)(x=X[O]).plotX=x.prevX=T(x.plotX,A.width/2+W*Math.cos(O*C)),x.plotY=x.prevY=T(x.plotY,A.height/2+W*Math.sin(O*C)),x.dispX=0,x.dispY=0}setRandomPositions(){let x,A=this.box,D=this.nodes,C=D.length+1,I=N=>{let W=N*N/Math.PI;return W-Math.floor(W)};for(let N=0,W=D.length;N<W;++N)(x=D[N]).plotX=x.prevX=T(x.plotX,A.width*I(N)),x.plotY=x.prevY=T(x.plotY,A.height*I(C+N)),x.dispX=0,x.dispY=0}force(x,...A){this.integration[x].apply(this,A)}barycenterForces(){this.getBarycenter(),this.force("barycenter")}getBarycenter(){let x=0,A=0,D=0;for(let C of this.nodes)A+=C.plotX*C.mass,D+=C.plotY*C.mass,x+=C.mass;return this.barycenter={x:A,y:D,xFactor:A/x,yFactor:D/x},this.barycenter}barnesHutApproximation(x,A){let D,C,I=this.getDistXY(x,A),N=this.vectorLength(I);return x!==A&&N!==0&&(A.isInternal?A.boxSize/N<this.options.theta&&N!==0?(C=this.repulsiveForce(N,this.k),this.force("repulsive",x,C*A.mass,I,N),D=!1):D=!0:(C=this.repulsiveForce(N,this.k),this.force("repulsive",x,C*A.mass,I,N))),D}repulsiveForces(){if(this.approximation==="barnes-hut")for(let x of this.nodes)this.quadTree.visitNodeRecursive(null,A=>this.barnesHutApproximation(x,A));else{let x,A,D;for(let C of this.nodes)for(let I of this.nodes)C===I||C.fixedPosition||(D=this.getDistXY(C,I),(A=this.vectorLength(D))!==0&&(x=this.repulsiveForce(A,this.k),this.force("repulsive",C,x*I.mass,D,A)))}}attractiveForces(){let x,A,D;for(let C of this.links)C.fromNode&&C.toNode&&(x=this.getDistXY(C.fromNode,C.toNode),(A=this.vectorLength(x))!==0&&(D=this.attractiveForce(A,this.k),this.force("attractive",C,D,x,A)))}applyLimits(){for(let x of this.nodes)x.fixedPosition||(this.integration.integrate(this,x),this.applyLimitBox(x,this.box),x.dispX=0,x.dispY=0)}applyLimitBox(x,A){let D=x.radius;x.plotX=b(x.plotX,A.left+D,A.width-D),x.plotY=b(x.plotY,A.top+D,A.height-D)}coolDown(x,A,D){return x-A*D}isStable(){return 1e-5>Math.abs(this.systemTemperature-this.prevSystemTemperature)||this.temperature<=0}getSystemTemperature(){let x=0;for(let A of this.nodes)x+=A.temperature;return x}vectorLength(x){return Math.sqrt(x.x*x.x+x.y*x.y)}getDistR(x,A){let D=this.getDistXY(x,A);return this.vectorLength(D)}getDistXY(x,A){let D=x.plotX-A.plotX,C=x.plotY-A.plotY;return{x:D,y:C,absX:Math.abs(D),absY:Math.abs(C)}}}return S}),n(t,"Series/PackedBubble/PackedBubbleLayout.js",[t["Series/GraphLayoutComposition.js"],t["Series/PackedBubble/PackedBubbleIntegration.js"],t["Series/Networkgraph/ReingoldFruchtermanLayout.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{addEvent:p,pick:f}=r;function g(){let w=this.series,v=[];return w.forEach(T=>{T.parentNode&&T.parentNode.selected&&v.push(T.parentNode)}),v}function b(){this.allDataPoints&&delete this.allDataPoints}class y extends u{constructor(){super(...arguments),this.index=NaN,this.nodes=[],this.series=[]}static compose(v){u.compose(v),s.integrations.packedbubble=l,s.layouts.packedbubble=y;let T=v.prototype;T.getSelectedParentNodes||(p(v,"beforeRedraw",b),T.getSelectedParentNodes=g)}beforeStep(){this.options.marker&&this.series.forEach(v=>{v&&v.calculateParentRadius()})}isStable(){let v=Math.abs(this.prevSystemTemperature-this.systemTemperature);return 1>Math.abs(10*this.systemTemperature/Math.sqrt(this.nodes.length))&&v<1e-5||this.temperature<=0}setCircularPositions(){let v=this.box,T=this.nodes,S=2*Math.PI/(T.length+1),E=this.options.initialPositionRadius,x,A,D=0;for(let C of T)this.options.splitSeries&&!C.isParentNode?(x=C.series.parentNode.plotX,A=C.series.parentNode.plotY):(x=v.width/2,A=v.height/2),C.plotX=C.prevX=f(C.plotX,x+E*Math.cos(C.index||D*S)),C.plotY=C.prevY=f(C.plotY,A+E*Math.sin(C.index||D*S)),C.dispX=0,C.dispY=0,D++}repulsiveForces(){let v,T,S,E=this,x=E.options.bubblePadding,A=E.nodes;A.forEach(D=>{D.degree=D.mass,D.neighbours=0,A.forEach(C=>{v=0,D!==C&&!D.fixedPosition&&(E.options.seriesInteraction||D.series===C.series)&&(S=E.getDistXY(D,C),(T=E.vectorLength(S)-(D.marker.radius+C.marker.radius+x))<0&&(D.degree+=.01,D.neighbours++,v=E.repulsiveForce(-T/Math.sqrt(D.neighbours),E.k,D,C)),E.force("repulsive",D,v*C.mass,S,C,T))})})}applyLimitBox(v,T){let S,E;this.options.splitSeries&&!v.isParentNode&&this.options.parentNodeLimit&&(S=this.getDistXY(v,v.series.parentNode),(E=v.series.parentNodeRadius-v.marker.radius-this.vectorLength(S))<0&&E>-2*v.marker.radius&&(v.plotX-=.01*S.x,v.plotY-=.01*S.y)),super.applyLimitBox(v,T)}}return s.layouts.packedbubble=y,y}),n(t,"Series/SimulationSeriesUtilities.js",[t["Core/Utilities.js"],t["Core/Animation/AnimationUtilities.js"]],function(s,l){let{merge:u,syncTimeout:r}=s,{animObject:p}=l;return{initDataLabels:function(){let f=this.options.dataLabels;if(!this.dataLabelsGroup){let g=this.initDataLabelsGroup();return!this.chart.styledMode&&(f!=null&&f.style)&&g.css(f.style),g.attr({opacity:0}),this.visible&&g.show(),g}return this.dataLabelsGroup.attr(u({opacity:1},this.getPlotBox("data-labels"))),this.dataLabelsGroup},initDataLabelsDefer:function(){var g;let f=this.options.dataLabels;f!=null&&f.defer&&((g=this.options.layoutAlgorithm)!=null&&g.enableSimulation)?r(()=>{this.deferDataLabels=!1},f?p(f.animation).defer:0):this.deferDataLabels=!1}}}),n(t,"Extensions/TextPath.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{deg2rad:u}=s,{addEvent:r,merge:p,uniqueKey:f,defined:g,extend:b}=l;function y(T,S){S=p(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},S);let E=this.renderer.url,x=this.text||this,A=x.textPath,{attributes:D,enabled:C}=S;if(T=T||A&&A.path,A&&A.undo(),T&&C){let I=r(x,"afterModifyTree",N=>{if(T&&C){let W=T.attr("id");W||T.attr("id",W=f());let Y={x:0,y:0};g(D.dx)&&(Y.dx=D.dx,delete D.dx),g(D.dy)&&(Y.dy=D.dy,delete D.dy),x.attr(Y),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());let X=N.nodes.slice(0);N.nodes.length=0,N.nodes[0]={tagName:"textPath",attributes:b(D,{"text-anchor":D.textAnchor,href:`${E}#${W}`}),children:X}}});x.textPath={path:T,undo:I}}else x.attr({dx:0,dy:0}),delete x.textPath;return this.added&&(x.textCache="",this.renderer.buildText(x)),this}function w(T){var x;let S=T.bBox,E=(x=this.element)==null?void 0:x.querySelector("textPath");if(E){let A=[],{b:D,h:C}=this.renderer.fontMetrics(this.element),I=C-D,N=RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),W=E.innerHTML.replace(N,"").split(/<tspan class="highcharts-br"[^>]*>/),Y=W.length,X=(O,V)=>{let{x:$,y:L}=V,R=(E.getRotationOfChar(O)-90)*u,G=Math.cos(R),U=Math.sin(R);return[[$-I*G,L-I*U],[$+D*G,L+D*U]]};for(let O=0,V=0;V<Y;V++){let $=W[V].length;for(let L=0;L<$;L+=5)try{let R=O+L+V,[G,U]=X(R,E.getStartPositionOfChar(R));L===0?(A.push(U),A.push(G)):(V===0&&A.unshift(U),V===Y-1&&A.push(G))}catch{break}O+=$-1;try{let L=O+V,R=E.getEndPositionOfChar(L),[G,U]=X(L,R);A.unshift(U),A.unshift(G)}catch{break}}A.length&&A.push(A[0].slice()),S.polygon=A}return S}function v(T){var A;let S=T.labelOptions,E=T.point,x=S[E.formatPrefix+"TextPath"]||S.textPath;x&&!S.useHTML&&(this.setTextPath(((A=E.getDataLabelPath)==null?void 0:A.call(E,this))||E.graphic,x),E.dataLabelPath&&!x.enabled&&(E.dataLabelPath=E.dataLabelPath.destroy()))}return{compose:function(T){r(T,"afterGetBBox",w),r(T,"beforeAddingDataLabel",v);let S=T.prototype;S.setTextPath||(S.setTextPath=y)}}}),n(t,"Series/PackedBubble/PackedBubbleSeries.js",[t["Core/Color/Color.js"],t["Series/DragNodesComposition.js"],t["Series/GraphLayoutComposition.js"],t["Core/Globals.js"],t["Series/PackedBubble/PackedBubblePoint.js"],t["Series/PackedBubble/PackedBubbleSeriesDefaults.js"],t["Series/PackedBubble/PackedBubbleLayout.js"],t["Core/Series/SeriesRegistry.js"],t["Series/SimulationSeriesUtilities.js"],t["Core/Utilities.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Extensions/TextPath.js"]],function(s,l,u,r,p,f,g,b,y,w,v,T){let{parse:S}=s,{noop:E}=r,{series:{prototype:x},seriesTypes:{bubble:A}}=b,{initDataLabels:D,initDataLabelsDefer:C}=y,{addEvent:I,clamp:N,defined:W,extend:Y,fireEvent:X,isArray:O,isNumber:V,merge:$,pick:L}=w;T.compose(v);class R extends A{constructor(){super(...arguments),this.parentNodeMass=0,this.deferDataLabels=!0}static compose(U,B,H){A.compose(U,B,H),l.compose(B),g.compose(B)}accumulateAllPoints(){let U,B=this.chart,H=[];for(let q of B.series)if(q.is("packedbubble")&&q.reserveSpace()){U=q.yData||[];for(let se=0;se<U.length;se++)H.push([null,null,U[se],q.index,se,{id:se,marker:{radius:0}}])}return H}addLayout(){let U=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},B=U.type||"packedbubble",H=this.chart.options.chart,q=this.chart.graphLayoutsStorage,se=this.chart.graphLayoutsLookup,pe;q||(this.chart.graphLayoutsStorage=q={},this.chart.graphLayoutsLookup=se=[]),(pe=q[B])||(U.enableSimulation=W(H.forExport)?!H.forExport:U.enableSimulation,q[B]=pe=new u.layouts[B],pe.init(U),se.splice(pe.index,0,pe)),this.layout=pe,this.points.forEach(ne=>{ne.mass=2,ne.degree=1,ne.collisionNmb=1}),pe.setArea(0,0,this.chart.plotWidth,this.chart.plotHeight),pe.addElementsToCollection([this],pe.series),pe.addElementsToCollection(this.points,pe.nodes)}addSeriesLayout(){let U=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},B=U.type||"packedbubble",H=this.chart.graphLayoutsStorage,q=this.chart.graphLayoutsLookup,se=$(U,U.parentNodeOptions,{enableSimulation:this.layout.options.enableSimulation}),pe=H[B+"-series"];pe||(H[B+"-series"]=pe=new u.layouts[B],pe.init(se),q.splice(pe.index,0,pe)),this.parentNodeLayout=pe,this.createParentNodes()}calculateParentRadius(){let U=this.seriesBox();this.parentNodeRadius=N(Math.sqrt(2*this.parentNodeMass/Math.PI)+20,20,U?Math.max(Math.sqrt(Math.pow(U.width,2)+Math.pow(U.height,2))/2+20,20):Math.sqrt(2*this.parentNodeMass/Math.PI)+20),this.parentNode&&(this.parentNode.marker.radius=this.parentNode.radius=this.parentNodeRadius)}calculateZExtremes(){let U=this.chart.series,B=this.options.zMin,H=this.options.zMax,q=1/0,se=-1/0;return B&&H?[B,H]:(U.forEach(pe=>{pe.yData.forEach(ne=>{W(ne)&&(ne>se&&(se=ne),ne<q&&(q=ne))})}),[B=L(B,q),H=L(H,se)])}checkOverlap(U,B){let H=U[0]-B[0],q=U[1]-B[1];return Math.sqrt(H*H+q*q)-Math.abs(U[2]+B[2])<-.001}createParentNodes(){let U=this.pointClass,B=this.chart,H=this.parentNodeLayout,q=this.layout.options,se,pe=this.parentNode,ne={radius:this.parentNodeRadius,lineColor:this.color,fillColor:S(this.color).brighten(.4).get()};q.parentNodeOptions&&(ne=$(q.parentNodeOptions.marker||{},ne)),this.parentNodeMass=0,this.points.forEach(le=>{this.parentNodeMass+=Math.PI*Math.pow(le.marker.radius,2)}),this.calculateParentRadius(),H.nodes.forEach(le=>{le.seriesIndex===this.index&&(se=!0)}),H.setArea(0,0,B.plotWidth,B.plotHeight),se||(pe||(pe=new U(this,{mass:this.parentNodeRadius/2,marker:ne,dataLabels:{inside:!1},states:{normal:{marker:ne},hover:{marker:ne}},dataLabelOnNull:!0,degree:this.parentNodeRadius,isParentNode:!0,seriesIndex:this.index})),this.parentNode&&(pe.plotX=this.parentNode.plotX,pe.plotY=this.parentNode.plotY),this.parentNode=pe,H.addElementsToCollection([this],H.series),H.addElementsToCollection([pe],H.nodes))}deferLayout(){let U=this.options.layoutAlgorithm;this.visible&&(this.addLayout(),U.splitSeries&&this.addSeriesLayout())}destroy(){this.chart.graphLayoutsLookup&&this.chart.graphLayoutsLookup.forEach(U=>{U.removeElementFromCollection(this,U.series)},this),this.parentNode&&this.parentNodeLayout&&(this.parentNodeLayout.removeElementFromCollection(this.parentNode,this.parentNodeLayout.nodes),this.parentNode.dataLabel&&(this.parentNode.dataLabel=this.parentNode.dataLabel.destroy())),x.destroy.apply(this,arguments)}drawDataLabels(){!this.deferDataLabels&&(x.drawDataLabels.call(this,this.points),this.parentNode&&(this.parentNode.formatPrefix="parentNode",x.drawDataLabels.call(this,[this.parentNode])))}drawGraph(){var se;if(!this.layout||!this.layout.options.splitSeries)return;let U=this.chart,B=this.layout.options.parentNodeOptions.marker,H={fill:B.fillColor||S(this.color).brighten(.4).get(),opacity:B.fillOpacity,stroke:B.lineColor||this.color,"stroke-width":L(B.lineWidth,this.options.lineWidth)},q={};this.parentNodesGroup=this.plotGroup("parentNodesGroup","parentNode",this.visible?"inherit":"hidden",.1,U.seriesGroup),(se=this.group)==null||se.attr({zIndex:2}),this.calculateParentRadius(),this.parentNode&&W(this.parentNode.plotX)&&W(this.parentNode.plotY)&&W(this.parentNodeRadius)&&(q=$({x:this.parentNode.plotX-this.parentNodeRadius,y:this.parentNode.plotY-this.parentNodeRadius,width:2*this.parentNodeRadius,height:2*this.parentNodeRadius},H),this.parentNode.graphic||(this.graph=this.parentNode.graphic=U.renderer.symbol(H.symbol).add(this.parentNodesGroup)),this.parentNode.graphic.attr(q))}drawTracker(){let U,B=this.parentNode;super.drawTracker(),B&&(U=O(B.dataLabels)?B.dataLabels:B.dataLabel?[B.dataLabel]:[],B.graphic&&(B.graphic.element.point=B),U.forEach(H=>{(H.div||H.element).point=B}))}getPointRadius(){let U,B,H,q,se=this.chart,pe=se.plotWidth,ne=se.plotHeight,le=this.options,ke=le.useSimulation,be=Math.min(pe,ne),Ee={},K=[],J=se.allDataPoints||[],oe=J.length;["minSize","maxSize"].forEach(ee=>{let re=parseInt(le[ee],10),ue=/%$/.test(le[ee]);Ee[ee]=ue?be*re/100:re*Math.sqrt(oe)}),se.minRadius=U=Ee.minSize/Math.sqrt(oe),se.maxRadius=B=Ee.maxSize/Math.sqrt(oe);let we=ke?this.calculateZExtremes():[U,B];J.forEach((ee,re)=>{H=ke?N(ee[2],we[0],we[1]):ee[2],(q=this.getRadius(we[0],we[1],U,B,H))===0&&(q=null),J[re][2]=q,K.push(q)}),this.radii=K}init(){return x.init.apply(this,arguments),C.call(this),this.eventsToUnbind.push(I(this,"updatedData",function(){this.chart.series.forEach(U=>{U.type===this.type&&(U.isDirty=!0)},this)})),this}onMouseUp(U){if(U.fixedPosition&&!U.removed){let B,H=this.layout,q=this.parentNodeLayout;q&&H.options.dragBetweenSeries&&q.nodes.forEach(se=>{U&&U.marker&&se!==U.series.parentNode&&(B=H.getDistXY(U,se),H.vectorLength(B)-se.marker.radius-U.marker.radius<0&&(se.series.addPoint($(U.options,{plotX:U.plotX,plotY:U.plotY}),!1),H.removeElementFromCollection(U,H.nodes),U.remove()))}),l.onMouseUp.apply(this,arguments)}}placeBubbles(U){let B=this.checkOverlap,H=this.positionBubble,q=[],se=1,pe=0,ne=0,le,ke=[],be,Ee=U.sort((K,J)=>J[2]-K[2]);if(Ee.length){if(q.push([[0,0,Ee[0][2],Ee[0][3],Ee[0][4]]]),Ee.length>1)for(q.push([[0,0-Ee[1][2]-Ee[0][2],Ee[1][2],Ee[1][3],Ee[1][4]]]),be=2;be<Ee.length;be++)Ee[be][2]=Ee[be][2]||1,B(le=H(q[se][pe],q[se-1][ne],Ee[be]),q[se][0])?(q.push([]),ne=0,q[se+1].push(H(q[se][pe],q[se][0],Ee[be])),se++,pe=0):se>1&&q[se-1][ne+1]&&B(le,q[se-1][ne+1])?(ne++,q[se].push(H(q[se][pe],q[se-1][ne],Ee[be])),pe++):(pe++,q[se].push(le));this.chart.stages=q,this.chart.rawPositions=[].concat.apply([],q),this.resizeRadius(),ke=this.chart.rawPositions}return ke}pointAttribs(U,B){let H=this.options,q=U&&U.isParentNode,se=H.marker;q&&H.layoutAlgorithm&&H.layoutAlgorithm.parentNodeOptions&&(se=H.layoutAlgorithm.parentNodeOptions.marker);let pe=se.fillOpacity,ne=x.pointAttribs.call(this,U,B);return pe!==1&&(ne["fill-opacity"]=pe),ne}positionBubble(U,B,H){let q=Math.asin,se=Math.acos,pe=Math.pow,ne=Math.abs,le=(0,Math.sqrt)(pe(U[0]-B[0],2)+pe(U[1]-B[1],2)),ke=se((pe(le,2)+pe(H[2]+B[2],2)-pe(H[2]+U[2],2))/(2*(H[2]+B[2])*le)),be=q(ne(U[0]-B[0])/le),Ee=(U[1]-B[1]<0?0:Math.PI)+ke+be*((U[0]-B[0])*(U[1]-B[1])<0?1:-1),K=Math.cos(Ee),J=Math.sin(Ee);return[B[0]+(B[2]+H[2])*J,B[1]-(B[2]+H[2])*K,H[2],H[3],H[4]]}render(){let U=[];x.render.apply(this,arguments),!this.options.dataLabels.allowOverlap&&(this.data.forEach(B=>{O(B.dataLabels)&&B.dataLabels.forEach(H=>{U.push(H)})}),this.options.useSimulation&&this.chart.hideOverlappingLabels(U))}resizeRadius(){let U,B,H,q,se,pe=this.chart,ne=pe.rawPositions,le=Math.min,ke=Math.max,be=pe.plotLeft,Ee=pe.plotTop,K=pe.plotHeight,J=pe.plotWidth;for(let re of(U=H=Number.POSITIVE_INFINITY,B=q=Number.NEGATIVE_INFINITY,ne))se=re[2],U=le(U,re[0]-se),B=ke(B,re[0]+se),H=le(H,re[1]-se),q=ke(q,re[1]+se);let oe=[B-U,q-H],we=[(J-be)/oe[0],(K-Ee)/oe[1]],ee=le.apply([],we);if(Math.abs(ee-1)>1e-10){for(let re of ne)re[2]*=ee;this.placeBubbles(ne)}else pe.diffY=K/2+Ee-H-(q-H)/2,pe.diffX=J/2+be-U-(B-U)/2}seriesBox(){let U,B=this.chart,H=this.data,q=Math.max,se=Math.min,pe=[B.plotLeft,B.plotLeft+B.plotWidth,B.plotTop,B.plotTop+B.plotHeight];return H.forEach(ne=>{W(ne.plotX)&&W(ne.plotY)&&ne.marker.radius&&(U=ne.marker.radius,pe[0]=se(pe[0],ne.plotX-U),pe[1]=q(pe[1],ne.plotX+U),pe[2]=se(pe[2],ne.plotY-U),pe[3]=q(pe[3],ne.plotY+U))}),V(pe.width/pe.height)?pe:null}setVisible(){let U=this;x.setVisible.apply(U,arguments),U.parentNodeLayout&&U.graph?U.visible?(U.graph.show(),U.parentNode.dataLabel&&U.parentNode.dataLabel.show()):(U.graph.hide(),U.parentNodeLayout.removeElementFromCollection(U.parentNode,U.parentNodeLayout.nodes),U.parentNode.dataLabel&&U.parentNode.dataLabel.hide()):U.layout&&(U.visible?U.layout.addElementsToCollection(U.points,U.layout.nodes):U.points.forEach(B=>{U.layout.removeElementFromCollection(B,U.layout.nodes)}))}translate(){let U,B,H,q=this.chart,se=this.data,pe=this.index,ne=this.options.useSimulation;for(let le of(this.processedXData=this.xData,this.generatePoints(),W(q.allDataPoints)||(q.allDataPoints=this.accumulateAllPoints(),this.getPointRadius()),ne?H=q.allDataPoints:(H=this.placeBubbles(q.allDataPoints),this.options.draggable=!1),H))le[3]===pe&&(U=se[le[4]],B=L(le[2],void 0),ne||(U.plotX=le[0]-q.plotLeft+q.diffX,U.plotY=le[1]-q.plotTop+q.diffY),V(B)&&(U.marker=Y(U.marker,{radius:B,width:2*B,height:2*B}),U.radius=B));ne&&this.deferLayout(),X(this,"afterTranslate")}}return R.defaultOptions=$(A.defaultOptions,f),Y(R.prototype,{pointClass:p,axisTypes:[],directTouch:!0,forces:["barycenter","repulsive"],hasDraggableNodes:!0,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointArrayMap:["value"],pointValKey:"value",requireSorting:!1,trackerGroups:["group","dataLabelsGroup","parentNodesGroup"],initDataLabels:D,alignDataLabel:x.alignDataLabel,indexateNodes:E,onMouseDown:l.onMouseDown,onMouseMove:l.onMouseMove,redrawHalo:l.redrawHalo,searchPoint:E}),b.registerSeriesType("packedbubble",R),R}),n(t,"Series/Polygon/PolygonSeriesDefaults.js",[],function(){return{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:""},trackByArea:!0,legendSymbol:"rectangle"}}),n(t,"Series/Polygon/PolygonSeries.js",[t["Core/Globals.js"],t["Series/Polygon/PolygonSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,r){let{noop:p}=s,{area:f,line:g,scatter:b}=u.seriesTypes,{extend:y,merge:w}=r;class v extends b{getGraphPath(){let S=g.prototype.getGraphPath.call(this),E=S.length+1;for(;E--;)(E===S.length||S[E][0]==="M")&&E>0&&S.splice(E,0,["Z"]);return this.areaPath=S,S}drawGraph(){this.options.fillColor=this.color,f.prototype.drawGraph.call(this)}}return v.defaultOptions=w(b.defaultOptions,l),y(v.prototype,{type:"polygon",drawTracker:g.prototype.drawTracker,setStackedPoints:p}),u.registerSeriesType("polygon",v),v}),n(t,"Core/Axis/RadialAxisDefaults.js",[],function(){return{circular:{gridLineWidth:1,labels:{align:void 0,x:0,y:void 0,style:{textOverflow:"none"}},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},radial:{gridLineInterpolation:"circle",gridLineWidth:1,labels:{align:"right",padding:5,x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},radialGauge:{endOnTick:!1,gridLineWidth:0,labels:{align:"center",distance:-25,x:0,y:void 0},lineWidth:1,minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickPosition:"inside",tickWidth:2,title:{rotation:0,text:""},zIndex:2}}}),n(t,"Core/Axis/RadialAxis.js",[t["Core/Axis/RadialAxisDefaults.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u,r){var p;let{defaultOptions:f}=l,{composed:g,noop:b}=u,{addEvent:y,correctFloat:w,defined:v,extend:T,fireEvent:S,isObject:E,merge:x,pick:A,pushUnique:D,relativeLength:C,wrap:I}=r;return function(N){function W(){this.autoConnect=this.isCircular&&A(this.userMax,this.options.max)===void 0&&w(this.endAngleRad-this.startAngleRad)===w(2*Math.PI),!this.isCircular&&this.chart.inverted&&this.max++,this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)}function Y(){return()=>{if(this.isRadial&&this.tickPositions&&this.options.labels&&this.options.labels.allowOverlap!==!0)return this.tickPositions.map(re=>this.ticks[re]&&this.ticks[re].label).filter(re=>!!re)}}function X(){return b}function O(re,ue,xe){let Te=this.pane.center,ze=re.value,Ce,Ie,Be;return this.isCircular?(v(ze)?re.point&&(re.point.shapeArgs||{}).start&&(ze=this.chart.inverted?this.translate(re.point.rectPlotY,!0):re.point.x):(Ie=re.chartX||0,Be=re.chartY||0,ze=this.translate(Math.atan2(Be-xe,Ie-ue)-this.startAngleRad,!0)),Ie=(Ce=this.getPosition(ze)).x,Be=Ce.y):(v(ze)||(Ie=re.chartX,Be=re.chartY),v(Ie)&&v(Be)&&(xe=Te[1]+this.chart.plotTop,ze=this.translate(Math.min(Math.sqrt(Math.pow(Ie-ue,2)+Math.pow(Be-xe,2)),Te[2]/2)-Te[3]/2,!0))),[ze,Ie||0,Be||0]}function V(re,ue,xe){let Te=this.pane.center,ze=this.chart,Ce=this.left||0,Ie=this.top||0,Be,He=A(ue,Te[2]/2-this.offset),Ae;return xe===void 0&&(xe=this.horiz?0:this.center&&-this.center[3]/2),xe&&(He+=xe),this.isCircular||ue!==void 0?((Ae=this.chart.renderer.symbols.arc(Ce+Te[0],Ie+Te[1],He,He,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})).xBounds=[Ce+Te[0]],Ae.yBounds=[Ie+Te[1]-He]):(Be=this.postTranslate(this.angleRad,He),Ae=[["M",this.center[0]+ze.plotLeft,this.center[1]+ze.plotTop],["L",Be.x,Be.y]]),Ae}function $(){this.constructor.prototype.getOffset.call(this),this.chart.axisOffset[this.side]=0}function L(re,ue,xe){let Te=this.chart,ze=Lt=>{if(typeof Lt=="string"){let ft=parseInt(Lt,10);return ge.test(Lt)&&(ft=ft*Be/100),ft}return Lt},Ce=this.center,Ie=this.startAngleRad,Be=Ce[2]/2,He=Math.min(this.offset,0),Ae=this.left||0,ye=this.top||0,ge=/%$/,Me=this.isCircular,De,Pe,Fe,Xe,tt,nt,ht=A(ze(xe.outerRadius),Be),gt=ze(xe.innerRadius),Tt=A(ze(xe.thickness),10);if(this.options.gridLineInterpolation==="polygon")nt=this.getPlotLinePath({value:re}).concat(this.getPlotLinePath({value:ue,reverse:!0}));else{re=Math.max(re,this.min),ue=Math.min(ue,this.max);let Lt=this.translate(re),ft=this.translate(ue);Me||(ht=Lt||0,gt=ft||0),xe.shape!=="circle"&&Me?(De=Ie+(Lt||0),Pe=Ie+(ft||0)):(De=-Math.PI/2,Pe=1.5*Math.PI,tt=!0),ht-=He,Tt-=He,nt=Te.renderer.symbols.arc(Ae+Ce[0],ye+Ce[1],ht,ht,{start:Math.min(De,Pe),end:Math.max(De,Pe),innerR:A(gt,ht-Tt),open:tt,borderRadius:xe.borderRadius}),Me&&(Fe=(Pe+De)/2,Xe=Ae+Ce[0]+Ce[2]/2*Math.cos(Fe),nt.xBounds=Fe>-Math.PI/2&&Fe<Math.PI/2?[Xe,Te.plotWidth]:[0,Xe],nt.yBounds=[ye+Ce[1]+Ce[2]/2*Math.sin(Fe)],nt.yBounds[0]+=Fe>-Math.PI&&Fe<0||Fe>Math.PI?-10:10)}return nt}function R(re){let ue=this.pane.center,xe=this.chart,Te=xe.inverted,ze=re.reverse,Ce=this.pane.options.background?this.pane.options.background[0]||this.pane.options.background:{},Ie=Ce.innerRadius||"0%",Be=Ce.outerRadius||"100%",He=ue[0]+xe.plotLeft,Ae=ue[1]+xe.plotTop,ye=this.height,ge=re.isCrosshair,Me=ue[3]/2,De=re.value,Pe,Fe,Xe,tt,nt,ht,gt,Tt,Lt,ft=this.getPosition(De),Et=ft.x,Ct=ft.y;if(ge&&(De=(Tt=this.getCrosshairPosition(re,He,Ae))[0],Et=Tt[1],Ct=Tt[2]),this.isCircular)Fe=Math.sqrt(Math.pow(Et-He,2)+Math.pow(Ct-Ae,2)),Xe=typeof Ie=="string"?C(Ie,1):Ie/Fe,tt=typeof Be=="string"?C(Be,1):Be/Fe,ue&&Me&&(Xe<(Pe=Me/Fe)&&(Xe=Pe),tt<Pe&&(tt=Pe)),Lt=[["M",He+Xe*(Et-He),Ae-Xe*(Ae-Ct)],["L",Et-(1-tt)*(Et-He),Ct+(1-tt)*(Ae-Ct)]];else if((De=this.translate(De))&&(De<0||De>ye)&&(De=0),this.options.gridLineInterpolation==="circle")Lt=this.getLinePath(0,De,Me);else if(Lt=[],xe[Te?"yAxis":"xAxis"].forEach(si=>{si.pane===this.pane&&(nt=si)}),nt){gt=nt.tickPositions,nt.autoConnect&&(gt=gt.concat([gt[0]])),ze&&(gt=gt.slice().reverse()),De&&(De+=Me);for(let si=0;si<gt.length;si++)ht=nt.getPosition(gt[si],De),Lt.push(si?["L",ht.x,ht.y]:["M",ht.x,ht.y])}return Lt}function G(re,ue){let xe=this.translate(re);return this.postTranslate(this.isCircular?xe:this.angleRad,A(this.isCircular?ue:xe<0?0:xe,this.center[2]/2)-this.offset)}function U(){let re=this.center,ue=this.chart,xe=this.options.title;return{x:ue.plotLeft+re[0]+(xe.x||0),y:ue.plotTop+re[1]-{high:.5,middle:.25,low:0}[xe.align]*re[2]+(xe.y||0)}}function B(re){re.beforeSetTickPositions=W,re.createLabelCollector=Y,re.getCrosshairPosition=O,re.getLinePath=V,re.getOffset=$,re.getPlotBandPath=L,re.getPlotLinePath=R,re.getPosition=G,re.getTitlePosition=U,re.postTranslate=Ee,re.setAxisSize=J,re.setAxisTranslation=oe,re.setOptions=we}function H(){let re=this.chart,ue=this.options,xe=re.angular&&this.isXAxis,Te=this.pane,ze=Te&&Te.options;if(!xe&&Te&&(re.angular||re.polar)){let Ce=2*Math.PI,Ie=(A(ze.startAngle,0)-90)*Math.PI/180,Be=(A(ze.endAngle,A(ze.startAngle,0)+360)-90)*Math.PI/180;this.angleRad=(ue.angle||0)*Math.PI/180,this.startAngleRad=Ie,this.endAngleRad=Be,this.offset=ue.offset||0;let He=(Ie%Ce+Ce)%Ce,Ae=(Be%Ce+Ce)%Ce;He>Math.PI&&(He-=Ce),Ae>Math.PI&&(Ae-=Ce),this.normalizedStartAngleRad=He,this.normalizedEndAngleRad=Ae}}function q(re){this.isRadial&&(re.align=void 0,re.preventDefault())}function se(){if(this.chart&&this.chart.labelCollectors){let re=this.labelCollector?this.chart.labelCollectors.indexOf(this.labelCollector):-1;re>=0&&this.chart.labelCollectors.splice(re,1)}}function pe(re){let ue,xe=this.chart,Te=xe.angular,ze=xe.polar,Ce=this.isXAxis,Ie=this.coll,Be=re.userOptions.pane||0,He=this.pane=xe.pane&&xe.pane[Be];if(Ie==="colorAxis"){this.isRadial=!1;return}Te?(Te&&Ce?(this.isHidden=!0,this.createLabelCollector=X,this.getOffset=b,this.redraw=K,this.render=K,this.setScale=b,this.setCategories=b,this.setTitle=b):B(this),ue=!Ce):ze&&(B(this),ue=this.horiz),Te||ze?(this.isRadial=!0,this.labelCollector||(this.labelCollector=this.createLabelCollector()),this.labelCollector&&xe.labelCollectors.push(this.labelCollector)):this.isRadial=!1,He&&ue&&(He.axis=this),this.isCircular=ue}function ne(){this.isRadial&&this.beforeSetTickPositions()}function le(re){let ue=this.label;if(!ue)return;let xe=this.axis,Te=ue.getBBox(),ze=xe.options.labels,Ce=(xe.translate(this.pos)+xe.startAngleRad+Math.PI/2)/Math.PI*180%360,Ie=Math.round(Ce),Be=v(ze.y)?0:-(.3*Te.height),He=ze.y,Ae,ye=20,ge=ze.align,Me="end",De=Ie<0?Ie+360:Ie,Pe=De,Fe=0,Xe=0;xe.isRadial&&(Ae=xe.getPosition(this.pos,xe.center[2]/2+C(A(ze.distance,-25),xe.center[2]/2,-xe.center[2]/2)),ze.rotation==="auto"?ue.attr({rotation:Ce}):v(He)||(He=xe.chart.renderer.fontMetrics(ue).b-Te.height/2),v(ge)||(xe.isCircular?(Te.width>xe.len*xe.tickInterval/(xe.max-xe.min)&&(ye=0),ge=Ce>ye&&Ce<180-ye?"left":Ce>180+ye&&Ce<360-ye?"right":"center"):ge="center",ue.attr({align:ge})),ge==="auto"&&xe.tickPositions.length===2&&xe.isCircular&&(De>90&&De<180?De=180-De:De>270&&De<=360&&(De=540-De),Pe>180&&Pe<=360&&(Pe=360-Pe),(xe.pane.options.startAngle===Ie||xe.pane.options.startAngle===Ie+360||xe.pane.options.startAngle===Ie-360)&&(Me="start"),ge=Ie>=-90&&Ie<=90||Ie>=-360&&Ie<=-270||Ie>=270&&Ie<=360?Me==="start"?"right":"left":Me==="start"?"left":"right",Pe>70&&Pe<110&&(ge="center"),De<15||De>=180&&De<195?Fe=.3*Te.height:De>=15&&De<=35?Fe=Me==="start"?0:.75*Te.height:De>=195&&De<=215?Fe=Me==="start"?.75*Te.height:0:De>35&&De<=90?Fe=Me==="start"?-(.25*Te.height):Te.height:De>215&&De<=270&&(Fe=Me==="start"?Te.height:-(.25*Te.height)),Pe<15?Xe=Me==="start"?-(.15*Te.height):.15*Te.height:Pe>165&&Pe<=180&&(Xe=Me==="start"?.15*Te.height:-(.15*Te.height)),ue.attr({align:ge}),ue.translate(Xe,Fe+Be)),re.pos.x=Ae.x+(ze.x||0),re.pos.y=Ae.y+(He||0))}function ke(re){this.axis.getPosition&&T(re.pos,this.axis.getPosition(this.pos))}function be({options:re}){re.xAxis&&x(!0,N.radialDefaultOptions.circular,re.xAxis),re.yAxis&&x(!0,N.radialDefaultOptions.radialGauge,re.yAxis)}function Ee(re,ue){let xe=this.chart,Te=this.center;return re=this.startAngleRad+re,{x:xe.plotLeft+Te[0]+Math.cos(re)*ue,y:xe.plotTop+Te[1]+Math.sin(re)*ue}}function K(){this.isDirty=!1}function J(){let re,ue;this.constructor.prototype.setAxisSize.call(this),this.isRadial&&(this.pane.updateCenter(this),re=this.center=this.pane.center.slice(),this.isCircular?this.sector=this.endAngleRad-this.startAngleRad:(ue=this.postTranslate(this.angleRad,re[3]/2),re[0]=ue.x-this.chart.plotLeft,re[1]=ue.y-this.chart.plotTop),this.len=this.width=this.height=(re[2]-re[3])*A(this.sector,1)/2)}function oe(){this.constructor.prototype.setAxisTranslation.call(this),this.center&&(this.isCircular?this.transA=(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.transA=(this.center[2]-this.center[3])/2/(this.max-this.min||1),this.isXAxis?this.minPixelPadding=this.transA*this.minPointOffset:this.minPixelPadding=0)}function we(re){let{coll:ue}=this,{angular:xe,inverted:Te,polar:ze}=this.chart,Ce={};xe?this.isXAxis||(Ce=x(f.yAxis,N.radialDefaultOptions.radialGauge)):ze&&(Ce=this.horiz?x(f.xAxis,N.radialDefaultOptions.circular):x(ue==="xAxis"?f.xAxis:f.yAxis,N.radialDefaultOptions.radial)),Te&&ue==="yAxis"&&(Ce.stackLabels=E(f.yAxis,!0)?f.yAxis.stackLabels:{},Ce.reversedStacks=!0);let Ie=this.options=x(Ce,re);Ie.plotBands||(Ie.plotBands=[]),S(this,"afterSetOptions")}function ee(re,ue,xe,Te,ze,Ce,Ie){let Be,He=this.axis;return He.isRadial?["M",ue,xe,"L",(Be=He.getPosition(this.pos,He.center[2]/2+Te)).x,Be.y]:re.call(this,ue,xe,Te,ze,Ce,Ie)}N.radialDefaultOptions=x(s),N.compose=function(re,ue){return D(g,"Axis.Radial")&&(y(re,"afterInit",H),y(re,"autoLabelAlign",q),y(re,"destroy",se),y(re,"init",pe),y(re,"initialAxisTranslation",ne),y(ue,"afterGetLabelPosition",le),y(ue,"afterGetPosition",ke),y(u,"setOptions",be),I(ue.prototype,"getMarkPath",ee)),re}}(p||(p={})),p}),n(t,"Series/PolarComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Extensions/Pane/Pane.js"],t["Core/Axis/RadialAxis.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f){let{animObject:g}=s,{composed:b}=l,{addEvent:y,defined:w,find:v,isNumber:T,merge:S,pick:E,pushUnique:x,relativeLength:A,splat:D,uniqueKey:C,wrap:I}=f;function N(){(this.pane||[]).forEach(be=>{be.render()})}function W(be){let Ee=be.args[0].xAxis,K=be.args[0].yAxis,J=be.args[0].chart;Ee&&K&&(K.gridLineInterpolation==="polygon"?(Ee.startOnTick=!0,Ee.endOnTick=!0):Ee.gridLineInterpolation==="polygon"&&J.inverted&&(K.startOnTick=!0,K.endOnTick=!0))}function Y(){this.pane||(this.pane=[]),this.options.pane=D(this.options.pane),this.options.pane.forEach(be=>{new r(be,this)},this)}function X(be){let Ee=be.args.marker,K=this.chart.xAxis[0],J=this.chart.yAxis[0],oe=this.chart.inverted,we=oe?J:K,ee=oe?K:J;if(this.chart.polar){be.preventDefault();let re=(Ee.attr?Ee.attr("start"):Ee.start)-we.startAngleRad,ue=Ee.attr?Ee.attr("r"):Ee.r,xe=(Ee.attr?Ee.attr("end"):Ee.end)-we.startAngleRad,Te=Ee.attr?Ee.attr("innerR"):Ee.innerR;be.result.x=re+we.pos,be.result.width=xe-re,be.result.y=ee.len+ee.pos-ue,be.result.height=ue-Te}}function O(be){let Ee=this.chart;if(Ee.polar&&Ee.hoverPane&&Ee.hoverPane.axis){be.preventDefault();let K=Ee.hoverPane.center,J=Ee.mouseDownX||0,oe=Ee.mouseDownY||0,we=be.args.chartY,ee=be.args.chartX,re=2*Math.PI,ue=Ee.hoverPane.axis.startAngleRad,xe=Ee.hoverPane.axis.endAngleRad,Te=Ee.inverted?Ee.xAxis[0]:Ee.yAxis[0],ze={},Ce="arc";if(ze.x=K[0]+Ee.plotLeft,ze.y=K[1]+Ee.plotTop,this.zoomHor){let Ie=ue>0?xe-ue:Math.abs(ue)+Math.abs(xe),Be=Math.atan2(oe-Ee.plotTop-K[1],J-Ee.plotLeft-K[0])-ue,He=Math.atan2(we-Ee.plotTop-K[1],ee-Ee.plotLeft-K[0])-ue;ze.r=K[2]/2,ze.innerR=K[3]/2,Be<=0&&(Be+=re),He<=0&&(He+=re),He<Be&&(He=[Be,Be=He][0]),Ie<re&&ue+He>xe+(re-Ie)/2&&(He=Be,Be=ue<=0?ue:0);let Ae=ze.start=Math.max(Be+ue,ue),ye=ze.end=Math.min(He+ue,xe);if(Te.options.gridLineInterpolation==="polygon"){let ge=Ee.hoverPane.axis,Me=Ae-ge.startAngleRad+ge.pos,De=Te.getPlotLinePath({value:Te.max}),Pe=ge.toValue(Me),Fe=ge.toValue(Me+(ye-Ae));if(Pe<ge.getExtremes().min){let{min:Xe,max:tt}=ge.getExtremes();Pe=tt-(Xe-Pe)}if(Fe<ge.getExtremes().min){let{min:Xe,max:tt}=ge.getExtremes();Fe=tt-(Xe-Fe)}Fe<Pe&&(Fe=[Pe,Pe=Fe][0]),(De=R(De,Pe,Fe,ge)).push(["L",K[0]+Ee.plotLeft,Ee.plotTop+K[1]]),ze.d=De,Ce="path"}}if(this.zoomVert){let Ie=Ee.inverted?Ee.xAxis[0]:Ee.yAxis[0],Be=Math.sqrt(Math.pow(J-Ee.plotLeft-K[0],2)+Math.pow(oe-Ee.plotTop-K[1],2)),He=Math.sqrt(Math.pow(ee-Ee.plotLeft-K[0],2)+Math.pow(we-Ee.plotTop-K[1],2));if(He<Be&&(Be=[He,He=Be][0]),He>K[2]/2&&(He=K[2]/2),Be<K[3]/2&&(Be=K[3]/2),this.zoomHor||(ze.start=ue,ze.end=xe),ze.r=He,ze.innerR=Be,Ie.options.gridLineInterpolation==="polygon"){let Ae=Ie.toValue(Ie.len+Ie.pos-Be),ye=Ie.toValue(Ie.len+Ie.pos-He),ge=Ie.getPlotLinePath({value:ye}).concat(Ie.getPlotLinePath({value:Ae,reverse:!0}));ze.d=ge,Ce="path"}}if(this.zoomHor&&this.zoomVert&&Te.options.gridLineInterpolation==="polygon"){let Ie=Ee.hoverPane.axis,Be=ze.start||0,He=ze.end||0,Ae=Be-Ie.startAngleRad+Ie.pos,ye=Ie.toValue(Ae),ge=Ie.toValue(Ae+(He-Be));if(ze.d instanceof Array){let Me=ze.d.slice(0,ze.d.length/2),De=ze.d.slice(ze.d.length/2,ze.d.length);De=[...De].reverse();let Pe=Ee.hoverPane.axis;Me=R(Me,ye,ge,Pe),(De=R(De,ye,ge,Pe))&&(De[0][0]="L"),De=[...De].reverse(),ze.d=Me.concat(De),Ce="path"}}be.attrs=ze,be.shapeType=Ce}}function V(){let be=this.chart;be.polar&&(this.polar=new ke(this),be.inverted&&(this.isRadialSeries=!0,this.is("column")&&(this.isRadialBar=!0)))}function $(){if(this.chart.polar&&this.xAxis){let{xAxis:be,yAxis:Ee}=this,K=this.chart;this.kdByAngle=K.tooltip&&K.tooltip.shared,this.kdByAngle||K.inverted?this.searchPoint=L:this.options.findNearestPointBy="xy";let J=this.points,oe=J.length;for(;oe--;)this.is("column")||this.is("columnrange")||this.polar.toXY(J[oe]),K.hasParallelCoordinates||this.yAxis.reversed||(E(J[oe].y,Number.MIN_VALUE)<Ee.min||J[oe].x<be.min||J[oe].x>be.max?(J[oe].isNull=!0,J[oe].plotY=NaN):J[oe].isNull=J[oe].isValid&&!J[oe].isValid());this.hasClipCircleSetter||(this.hasClipCircleSetter=!!this.eventsToUnbind.push(y(this,"afterRender",function(){let we;K.polar&&this.options.clip!==!1&&(we=this.yAxis.pane.center,this.clipCircle?this.clipCircle.animate({x:we[0],y:we[1],r:we[2]/2,innerR:we[3]/2}):this.clipCircle=function(ee,re,ue,xe,Te){let ze=C(),Ce=ee.createElement("clipPath").attr({id:ze}).add(ee.defs),Ie=Te?ee.arc(re,ue,xe,Te,0,2*Math.PI).add(Ce):ee.circle(re,ue,xe).add(Ce);return Ie.id=ze,Ie.clipPath=Ce,Ie}(K.renderer,we[0],we[1],we[2]/2,we[3]/2),this.group.clip(this.clipCircle),this.setClip=l.noop)})))}}function L(be){let Ee=this.chart,K=this.xAxis,J=this.yAxis,oe=K.pane&&K.pane.center,we=be.chartX-(oe&&oe[0]||0)-Ee.plotLeft,ee=be.chartY-(oe&&oe[1]||0)-Ee.plotTop,re=Ee.inverted?{clientX:be.chartX-J.pos,plotY:be.chartY-K.pos}:{clientX:180+-180/Math.PI*Math.atan2(we,ee)};return this.searchKDTree(re)}function R(be,Ee,K,J){let oe=J.tickInterval,we=J.tickPositions,ee=v(we,ue=>ue>=K),re=v([...we].reverse(),ue=>ue<=Ee);return w(ee)||(ee=we[we.length-1]),w(re)||(re=we[0],ee+=oe,be[0][0]="L",be.unshift(be[be.length-3])),(be=be.slice(we.indexOf(re),we.indexOf(ee)+1))[0][0]="M",be}function G(be,Ee){return v(this.pane||[],K=>K.options.id===Ee)||be.call(this,Ee)}function U(be,Ee,K,J,oe,we){let ee,re,ue,xe=this.chart,Te=E(J.inside,!!this.options.stacking);if(xe.polar){if(ee=Ee.rectPlotX/Math.PI*180,xe.inverted)this.forceDL=xe.isInsidePlot(Ee.plotX,Ee.plotY),Te&&Ee.shapeArgs?(re=Ee.shapeArgs,oe=S(oe,{x:(ue=this.yAxis.postTranslate(((re.start||0)+(re.end||0))/2-this.xAxis.startAngleRad,Ee.barX+Ee.pointWidth/2)).x-xe.plotLeft,y:ue.y-xe.plotTop})):Ee.tooltipPos&&(oe=S(oe,{x:Ee.tooltipPos[0],y:Ee.tooltipPos[1]})),J.align=E(J.align,"center"),J.verticalAlign=E(J.verticalAlign,"middle");else{var ze;let Ce,Ie;(ze=J).align===null&&(Ce=ee>20&&ee<160?"left":ee>200&&ee<340?"right":"center",ze.align=Ce),ze.verticalAlign===null&&(Ie=ee<45||ee>315?"bottom":ee>135&&ee<225?"top":"middle",ze.verticalAlign=Ie),J=ze}u.prototype.alignDataLabel.call(this,Ee,K,J,oe,we),this.isRadialBar&&Ee.shapeArgs&&Ee.shapeArgs.start===Ee.shapeArgs.end?K.hide():K.show()}else be.call(this,Ee,K,J,oe,we)}function B(){let be=this.options,Ee=be.stacking,K=this.chart,J=this.xAxis,oe=this.yAxis,we=oe.reversed,ee=oe.center,re=J.startAngleRad,ue=J.endAngleRad-re,xe=be.threshold,Te=0,ze,Ce,Ie,Be,He,Ae=0,ye=0,ge,Me,De,Pe,Fe,Xe,tt,nt;if(J.isRadial)for(Ie=(ze=this.points).length,Be=oe.translate(oe.min),He=oe.translate(oe.max),xe=be.threshold||0,K.inverted&&T(xe)&&w(Te=oe.translate(xe))&&(Te<0?Te=0:Te>ue&&(Te=ue),this.translatedThreshold=Te+re);Ie--;){if(Xe=(Ce=ze[Ie]).barX,Me=Ce.x,De=Ce.y,Ce.shapeType="arc",K.inverted){Ce.plotY=oe.translate(De),Ee&&oe.stacking?(Fe=oe.stacking.stacks[(De<0?"-":"")+this.stackKey],this.visible&&Fe&&Fe[Me]&&!Ce.isNull&&(Pe=Fe[Me].points[this.getStackIndicator(void 0,Me,this.index).key],Ae=oe.translate(Pe[0]),ye=oe.translate(Pe[1]),w(Ae)&&(Ae=f.clamp(Ae,0,ue)))):(Ae=Te,ye=Ce.plotY),Ae>ye&&(ye=[Ae,Ae=ye][0]),we?ye>Be?ye=Be:Ae<He?Ae=He:(Ae>Be||ye<He)&&(Ae=ye=ue):Ae<Be?Ae=Be:ye>He?ye=He:(ye<Be||Ae>He)&&(Ae=ye=0),oe.min>oe.max&&(Ae=ye=we?ue:0),Ae+=re,ye+=re,ee&&(Ce.barX=Xe+=ee[3]/2),tt=Math.max(Xe,0),nt=Math.max(Xe+Ce.pointWidth,0);let ht=be.borderRadius,gt=A((typeof ht=="object"?ht.radius:ht)||0,nt-tt);Ce.shapeArgs={x:ee[0],y:ee[1],r:nt,innerR:tt,start:Ae,end:ye,borderRadius:gt},Ce.opacity=Ae===ye?0:void 0,Ce.plotY=(w(this.translatedThreshold)&&(Ae<this.translatedThreshold?Ae:ye))-re}else Ae=Xe+re,Ce.shapeArgs=this.polar.arc(Ce.yBottom,Ce.plotY,Ae,Ae+Ce.pointWidth),Ce.shapeArgs.borderRadius=0;this.polar.toXY(Ce),K.inverted?(ge=oe.postTranslate(Ce.rectPlotY,Xe+Ce.pointWidth/2),Ce.tooltipPos=[ge.x-K.plotLeft,ge.y-K.plotTop]):Ce.tooltipPos=[Ce.plotX,Ce.plotY],ee&&(Ce.ttBelow=Ce.plotY>ee[1])}}function H(be,Ee){let K,J,oe=this;if(this.chart.polar){Ee=Ee||this.points;for(let ee=0;ee<Ee.length;ee++)if(!Ee[ee].isNull){K=ee;break}this.options.connectEnds!==!1&&K!==void 0&&(this.connectEnds=!0,Ee.splice(Ee.length,0,Ee[K]),J=!0),Ee.forEach(ee=>{ee.polarPlotY===void 0&&oe.polar.toXY(ee)})}let we=be.apply(this,[].slice.call(arguments,1));return J&&Ee.pop(),we}function q(be,Ee){let K=this.chart,J={xAxis:[],yAxis:[]};return K.polar?K.axes.forEach(oe=>{if(oe.coll==="colorAxis")return;let we=oe.isXAxis,ee=oe.center,re=Ee.chartX-ee[0]-K.plotLeft,ue=Ee.chartY-ee[1]-K.plotTop;J[we?"xAxis":"yAxis"].push({axis:oe,value:oe.translate(we?Math.PI-Math.atan2(re,ue):Math.sqrt(Math.pow(re,2)+Math.pow(ue,2)),!0)})}):J=be.call(this,Ee),J}function se(be,Ee){this.chart.polar||be.call(this,Ee)}function pe(be,Ee){let K=this,J=this.chart,oe=this.group,we=this.markerGroup,ee=this.xAxis&&this.xAxis.center,re=J.plotLeft,ue=J.plotTop,xe=this.options.animation,Te,ze,Ce,Ie,Be,He;J.polar?K.isRadialBar?Ee||(K.startAngleRad=E(K.translatedThreshold,K.xAxis.startAngleRad),l.seriesTypes.pie.prototype.animate.call(K,Ee)):(xe=g(xe),K.is("column")?Ee||(ze=ee[3]/2,K.points.forEach(Ae=>{Ce=Ae.graphic,Be=(Ie=Ae.shapeArgs)&&Ie.r,He=Ie&&Ie.innerR,Ce&&Ie&&(Ce.attr({r:ze,innerR:ze}),Ce.animate({r:Be,innerR:He},K.options.animation))})):Ee?(Te={translateX:ee[0]+re,translateY:ee[1]+ue,scaleX:.001,scaleY:.001},oe.attr(Te),we&&we.attr(Te)):(Te={translateX:re,translateY:ue,scaleX:1,scaleY:1},oe.animate(Te,xe),we&&we.animate(Te,xe))):be.call(this,Ee)}function ne(be,Ee,K,J){let oe,we;if(this.chart.polar)if(J){let ee=(we=function ue(xe,Te,ze,Ce){let Ie,Be,He,Ae,ye,ge,Me=Ce?1:0,De=(Ie=Te>=0&&Te<=xe.length-1?Te:Te<0?xe.length-1+Te:0)-1<0?xe.length-(1+Me):Ie-1,Pe=Ie+1>xe.length-1?Me:Ie+1,Fe=xe[De],Xe=xe[Pe],tt=Fe.plotX,nt=Fe.plotY,ht=Xe.plotX,gt=Xe.plotY,Tt=xe[Ie].plotX,Lt=xe[Ie].plotY;Be=(1.5*Tt+tt)/2.5,He=(1.5*Lt+nt)/2.5,Ae=(1.5*Tt+ht)/2.5,ye=(1.5*Lt+gt)/2.5;let ft=Math.sqrt(Math.pow(Be-Tt,2)+Math.pow(He-Lt,2)),Et=Math.sqrt(Math.pow(Ae-Tt,2)+Math.pow(ye-Lt,2)),Ct=Math.atan2(He-Lt,Be-Tt);ge=Math.PI/2+(Ct+Math.atan2(ye-Lt,Ae-Tt))/2,Math.abs(Ct-ge)>Math.PI/2&&(ge-=Math.PI),Be=Tt+Math.cos(ge)*ft,He=Lt+Math.sin(ge)*ft;let si={rightContX:Ae=Tt+Math.cos(Math.PI+ge)*Et,rightContY:ye=Lt+Math.sin(Math.PI+ge)*Et,leftContX:Be,leftContY:He,plotX:Tt,plotY:Lt};return ze&&(si.prevPointCont=ue(xe,De,!1,Ce)),si}(Ee,J,!0,this.connectEnds)).prevPointCont&&we.prevPointCont.rightContX,re=we.prevPointCont&&we.prevPointCont.rightContY;oe=["C",T(ee)?ee:we.plotX,T(re)?re:we.plotY,T(we.leftContX)?we.leftContX:we.plotX,T(we.leftContY)?we.leftContY:we.plotY,we.plotX,we.plotY]}else oe=["M",K.plotX,K.plotY];else oe=be.call(this,Ee,K,J);return oe}function le(be,Ee,K=this.plotY){if(!this.destroyed){let{plotX:J,series:oe}=this,{chart:we}=oe;return we.polar&&T(J)&&T(K)?[J+(Ee?we.plotLeft:0),K+(Ee?we.plotTop:0)]:be.call(this,Ee,K)}}class ke{static compose(Ee,K,J,oe,we,ee,re,ue,xe,Te){if(r.compose(K,J),p.compose(Ee,we),x(b,"Polar")){let ze=K.prototype,Ce=ee.prototype,Ie=J.prototype,Be=oe.prototype;if(y(K,"afterDrawChartBox",N),y(K,"getAxes",Y),y(K,"init",W),I(ze,"get",G),I(Ie,"getCoordinates",q),I(Ie,"pinch",se),y(J,"getSelectionMarkerAttrs",O),y(J,"getSelectionBox",X),y(oe,"afterInit",V),y(oe,"afterTranslate",$,{order:2}),y(oe,"afterColumnTranslate",B,{order:4}),I(Be,"animate",pe),I(Ce,"pos",le),ue){let He=ue.prototype;I(He,"alignDataLabel",U),I(He,"animate",pe)}if(xe&&I(xe.prototype,"getGraphPath",H),Te){let He=Te.prototype;I(He,"getPointSpline",ne),re&&(re.prototype.getPointSpline=He.getPointSpline)}}}constructor(Ee){this.series=Ee}arc(Ee,K,J,oe){let we=this.series,ee=we.xAxis.center,re=we.yAxis.len,ue=ee[3]/2,xe=re-K+ue,Te=re-E(Ee,re)+ue;return we.yAxis.reversed&&(xe<0&&(xe=ue),Te<0&&(Te=ue)),{x:ee[0],y:ee[1],r:xe,innerR:Te,start:J,end:oe}}toXY(Ee){let K=this.series,J=K.chart,oe=K.xAxis,we=K.yAxis,ee=Ee.plotX,re=J.inverted,ue=Ee.y,xe=Ee.plotY,Te=re?ee:we.len-xe,ze;if(re&&K&&!K.isRadialBar&&(Ee.plotY=xe=T(ue)?we.translate(ue):0),Ee.rectPlotX=ee,Ee.rectPlotY=xe,we.center&&(Te+=we.center[3]/2),T(xe)){let Ce=re?we.postTranslate(xe,Te):oe.postTranslate(ee,Te);Ee.plotX=Ee.polarPlotX=Ce.x-J.plotLeft,Ee.plotY=Ee.polarPlotY=Ce.y-J.plotTop}K.kdByAngle?((ze=(ee/Math.PI*180+oe.pane.options.startAngle)%360)<0&&(ze+=360),Ee.clientX=ze):Ee.clientX=Ee.plotX}}return ke}),n(t,"Core/Axis/WaterfallAxis.js",[t["Core/Globals.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(s,l,u){var r;let{composed:p}=s,{addEvent:f,objectEach:g,pushUnique:b}=u;return function(y){function w(){let x=this.waterfall.stacks;x&&(x.changed=!1,delete x.alreadyChanged)}function v(){let x=this.options.stackLabels;x&&x.enabled&&this.waterfall.stacks&&this.waterfall.renderStackTotals()}function T(){this.waterfall||(this.waterfall=new E(this))}function S(){let x=this.axes;for(let A of this.series)if(A.options.stacking){for(let D of x)D.isXAxis||(D.waterfall.stacks.changed=!0);break}}y.compose=function(x,A){b(p,"Axis.Waterfall")&&(f(x,"init",T),f(x,"afterBuildStacks",w),f(x,"afterRender",v),f(A,"beforeRedraw",S))};class E{constructor(A){this.axis=A,this.stacks={changed:!1}}renderStackTotals(){let A=this.axis,D=A.waterfall.stacks,C=A.stacking&&A.stacking.stackTotalGroup,I=new l(A,A.options.stackLabels||{},!1,0,void 0);this.dummyStackItem=I,C&&g(D,N=>{g(N,(W,Y)=>{I.total=W.stackTotal,I.x=+Y,W.label&&(I.label=W.label),l.prototype.render.call(I,C),W.label=I.label,delete I.label})}),I.total=null}}y.Composition=E}(r||(r={})),r}),n(t,"Series/Waterfall/WaterfallPoint.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(s,l,u){let{isNumber:r}=u;class p extends s.prototype.pointClass{getClassName(){let g=l.prototype.getClassName.call(this);return this.isSum?g+=" highcharts-sum":this.isIntermediateSum&&(g+=" highcharts-intermediate-sum"),g}isValid(){return r(this.y)||this.isSum||!!this.isIntermediateSum}}return p}),n(t,"Series/Waterfall/WaterfallSeriesDefaults.js",[],function(){return{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"Dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}}}),n(t,"Series/Waterfall/WaterfallSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Core/Axis/WaterfallAxis.js"],t["Series/Waterfall/WaterfallPoint.js"],t["Series/Waterfall/WaterfallSeriesDefaults.js"]],function(s,l,u,r,p){let{column:f,line:g}=s.seriesTypes,{addEvent:b,arrayMax:y,arrayMin:w,correctFloat:v,crisp:T,extend:S,isNumber:E,merge:x,objectEach:A,pick:D}=l;function C(N,W){return Object.hasOwnProperty.call(N,W)}class I extends f{generatePoints(){f.prototype.generatePoints.apply(this);for(let W=0,Y=this.points.length;W<Y;W++){let X=this.points[W],O=this.processedYData[W];E(O)&&(X.isIntermediateSum||X.isSum)&&(X.y=v(O))}}processData(W){let Y,X,O,V,$,L,R=this.options,G=this.yData,U=R.data,B=G.length,H=R.threshold||0;O=X=V=$=0;for(let q=0;q<B;q++)L=G[q],Y=U&&U[q]?U[q]:{},L==="sum"||Y.isSum?G[q]=v(O):L==="intermediateSum"||Y.isIntermediateSum?(G[q]=v(X),X=0):(O+=L,X+=L),V=Math.min(O,V),$=Math.max(O,$);super.processData.call(this,W),R.stacking||(this.dataMin=V+H,this.dataMax=$)}toYData(W){return W.isSum?"sum":W.isIntermediateSum?"intermediateSum":W.y}updateParallelArrays(W,Y){super.updateParallelArrays.call(this,W,Y),(this.yData[0]==="sum"||this.yData[0]==="intermediateSum")&&(this.yData[0]=null)}pointAttribs(W,Y){let X=this.options.upColor;X&&!W.options.color&&E(W.y)&&(W.color=W.y>0?X:void 0);let O=f.prototype.pointAttribs.call(this,W,Y);return delete O.dashstyle,O}getGraphPath(){return[["M",0,0]]}getCrispPath(){var G;let W=this.data.filter(U=>E(U.y)),Y=this.yAxis,X=W.length,O=((G=this.graph)==null?void 0:G.strokeWidth())||0,V=this.xAxis.reversed,$=this.yAxis.reversed,L=this.options.stacking,R=[];for(let U=1;U<X;U++){if(!(this.options.connectNulls||E(this.data[W[U].index-1].y)))continue;let B=W[U].box,H=W[U-1],q=H.y||0,se=W[U-1].box;if(!B||!se)continue;let pe=Y.waterfall.stacks[this.stackKey],ne=q>0?-se.height:0;if(pe&&se&&B){let le,ke=pe[U-1];if(L){let be=ke.connectorThreshold;le=T(Y.translate(be,!1,!0,!1,!0)+($?ne:0),O)}else le=T(se.y+(H.minPointLengthOffset||0),O);R.push(["M",(se.x||0)+(V?0:se.width||0),le],["L",(B.x||0)+(V&&B.width||0),le])}if(se&&R.length&&(!L&&q<0&&!$||q>0&&$)){let le=R[R.length-2];le&&typeof le[2]=="number"&&(le[2]+=se.height||0);let ke=R[R.length-1];ke&&typeof ke[2]=="number"&&(ke[2]+=se.height||0)}}return R}drawGraph(){g.prototype.drawGraph.call(this),this.graph&&this.graph.attr({d:this.getCrispPath()})}setStackedPoints(W){var oe;let Y=this.options,X=(oe=W.waterfall)==null?void 0:oe.stacks,O=Y.threshold||0,V=this.stackKey,$=this.xData,L=$.length,R=O,G=R,U,B=0,H=0,q=0,se,pe,ne,le,ke,be,Ee,K,J=(we,ee,re,ue)=>{if(U){if(se)for(;re<se;re++)U.stackState[re]+=ue;else U.stackState[0]=we,se=U.stackState.length;U.stackState.push(U.stackState[se-1]+ee)}};if(W.stacking&&X&&this.reserveSpace()){K=X.changed,(Ee=X.alreadyChanged)&&0>Ee.indexOf(V)&&(K=!0),X[V]||(X[V]={});let we=X[V];if(we)for(let ee=0;ee<L;ee++)(!we[be=$[ee]]||K)&&(we[be]={negTotal:0,posTotal:0,stackTotal:0,threshold:0,stateIndex:0,stackState:[],label:K&&we[be]?we[be].label:void 0}),U=we[be],(ke=this.yData[ee])>=0?U.posTotal+=ke:U.negTotal+=ke,le=Y.data[ee],pe=U.absolutePos=U.posTotal,ne=U.absoluteNeg=U.negTotal,U.stackTotal=pe+ne,se=U.stackState.length,le&&le.isIntermediateSum?(J(q,H,0,q),q=H,H=O,R^=G,G^=R,R^=G):le&&le.isSum?(J(O,B,se,0),R=O):(J(R,ke,0,B),le&&(B+=ke,H+=ke)),U.stateIndex++,U.threshold=R,R+=U.stackTotal;X.changed=!1,X.alreadyChanged||(X.alreadyChanged=[]),X.alreadyChanged.push(V)}}getExtremes(){let W,Y,X,O=this.options.stacking;return O?(W=this.yAxis.waterfall.stacks,Y=this.stackedYNeg=[],X=this.stackedYPos=[],O==="overlap"?A(W[this.stackKey],function(V){Y.push(w(V.stackState)),X.push(y(V.stackState))}):A(W[this.stackKey],function(V){Y.push(V.negTotal+V.threshold),X.push(V.posTotal+V.threshold)}),{dataMin:w(Y),dataMax:y(X)}):{dataMin:this.dataMin,dataMax:this.dataMax}}}return I.defaultOptions=x(f.defaultOptions,p),I.compose=u.compose,S(I.prototype,{pointValKey:"y",showLine:!0,pointClass:r}),b(I,"afterColumnTranslate",function(){let{options:N,points:W,yAxis:Y}=this,X=D(N.minPointLength,5),O=X/2,V=N.threshold||0,$=N.stacking,L=Y.waterfall.stacks[this.stackKey],R=V,G=V,U,B,H,q;for(let se=0;se<W.length;se++){let pe=W[se],ne=this.processedYData[se],le=S({x:0,y:0,width:0,height:0},pe.shapeArgs||{});pe.box=le;let ke=[0,ne],be=pe.y||0;if($){if(L){let J=L[se];$==="overlap"?(B=J.stackState[J.stateIndex--],U=be>=0?B:B-be,C(J,"absolutePos")&&delete J.absolutePos,C(J,"absoluteNeg")&&delete J.absoluteNeg):(be>=0?(B=J.threshold+J.posTotal,J.posTotal-=be,U=B):(B=J.threshold+J.negTotal,J.negTotal-=be,U=B-be),!J.posTotal&&E(J.absolutePos)&&C(J,"absolutePos")&&(J.posTotal=J.absolutePos,delete J.absolutePos),!J.negTotal&&E(J.absoluteNeg)&&C(J,"absoluteNeg")&&(J.negTotal=J.absoluteNeg,delete J.absoluteNeg)),pe.isSum||(J.connectorThreshold=J.threshold+J.stackTotal),Y.reversed?(H=be>=0?U-be:U+be,q=U):(H=U,q=U-be),pe.below=H<=V,le.y=Y.translate(H,!1,!0,!1,!0),le.height=Math.abs(le.y-Y.translate(q,!1,!0,!1,!0));let oe=Y.waterfall.dummyStackItem;oe&&(oe.x=se,oe.label=L[se].label,oe.setOffset(this.pointXOffset||0,this.barW||0,this.stackedYNeg[se],this.stackedYPos[se],void 0,this.xAxis))}}else U=Math.max(G,G+be)+ke[0],le.y=Y.translate(U,!1,!0,!1,!0),pe.isSum?(le.y=Y.translate(ke[1],!1,!0,!1,!0),le.height=Math.min(Y.translate(ke[0],!1,!0,!1,!0),Y.len)-le.y,pe.below=ke[1]<=V):pe.isIntermediateSum?(be>=0?(H=ke[1]+R,q=R):(H=R,q=ke[1]+R),Y.reversed&&(H^=q,q^=H,H^=q),le.y=Y.translate(H,!1,!0,!1,!0),le.height=Math.abs(le.y-Math.min(Y.translate(q,!1,!0,!1,!0),Y.len)),R+=ke[1],pe.below=H<=V):(le.height=ne>0?Y.translate(G,!1,!0,!1,!0)-le.y:Y.translate(G,!1,!0,!1,!0)-Y.translate(G-ne,!1,!0,!1,!0),G+=ne,pe.below=G<V),le.height<0&&(le.y+=le.height,le.height*=-1);pe.plotY=le.y,pe.yBottom=le.y+le.height,le.height<=X&&!pe.isNull?(le.height=X,le.y-=O,pe.yBottom=le.y+le.height,pe.plotY=le.y,be<0?pe.minPointLengthOffset=-O:pe.minPointLengthOffset=O):(pe.isNull&&(le.width=0),pe.minPointLengthOffset=0);let Ee=pe.plotY+(pe.negative?le.height:0);pe.below&&(pe.plotY+=le.height),pe.tooltipPos&&(this.chart.inverted?pe.tooltipPos[0]=Y.len-Ee:pe.tooltipPos[1]=Ee),pe.isInside=this.isPointInside(pe);let K=T(pe.yBottom,this.borderWidth);le.y=T(le.y,this.borderWidth),le.height=K-le.y,x(!0,pe.shapeArgs,le)}},{order:2}),s.registerSeriesType("waterfall",I),I}),n(t,"masters/highcharts-more.src.js",[t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Extensions/Pane/Pane.js"],t["Series/Bubble/BubbleSeries.js"],t["Series/PackedBubble/PackedBubbleSeries.js"],t["Series/PolarComposition.js"],t["Core/Axis/RadialAxis.js"],t["Series/Waterfall/WaterfallSeries.js"]],function(s,l,u,r,p,f,g,b){return s.RadialAxis=g,r.compose(s.Axis,s.Chart,s.Legend),p.compose(s.Axis,s.Chart,s.Legend),u.compose(s.Chart,s.Pointer),f.compose(s.Axis,s.Chart,s.Pointer,s.Series,s.Tick,s.Point,l.seriesTypes.areasplinerange,l.seriesTypes.column,l.seriesTypes.line,l.seriesTypes.spline),b.compose(s.Axis,s.Chart),s})})})(w3);var fj=w3.exports;const mj=dh(fj);var T3={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function n(s,l,u,r){s.hasOwnProperty(l)||(s[l]=r.apply(null,u),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:l,module:s[l]}})))}n(t,"Core/Chart/ChartNavigationComposition.js",[],function(){var s;return function(l){l.compose=function(r){return r.navigation||(r.navigation=new u(r)),r};class u{constructor(p){this.updates=[],this.chart=p}addUpdate(p){this.chart.navigation.updates.push(p)}update(p,f){this.updates.forEach(g=>{g.call(this.chart,p,f)})}}l.Additions=u}(s||(s={})),s}),n(t,"Extensions/Exporting/ExportingDefaults.js",[t["Core/Globals.js"]],function(s){let{isTouchDevice:l}=s;return{exporting:{allowTableSorting:!0,type:"image/png",url:"https://export.highcharts.com/",pdfFont:{normal:void 0,bold:void 0,bolditalic:void 0,italic:void 0},printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",titleKey:"contextButtonTitle",menuItems:["viewFullscreen","printChart","separator","downloadPNG","downloadJPEG","downloadPDF","downloadSVG"]}},menuItemDefinitions:{viewFullscreen:{textKey:"viewFullscreen",onclick:function(){this.fullscreen&&this.fullscreen.toggle()}},printChart:{textKey:"printChart",onclick:function(){this.print()}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChart()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}}},lang:{viewFullscreen:"View in full screen",exitFullscreen:"Exit from full screen",printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"},navigation:{buttonOptions:{symbolSize:14,symbolX:14.5,symbolY:13.5,align:"right",buttonSpacing:3,height:28,verticalAlign:"top",width:28,symbolFill:"#666666",symbolStroke:"#666666",symbolStrokeWidth:3,theme:{fill:"#ffffff",padding:5,stroke:"none","stroke-linecap":"round"}},menuStyle:{border:"none",borderRadius:"3px",background:"#ffffff",padding:"0.5em"},menuItemStyle:{background:"none",borderRadius:"3px",color:"#333333",padding:"0.5em",fontSize:l?"0.9em":"0.8em",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:"#f2f2f2"}}}}),n(t,"Extensions/Exporting/ExportingSymbols.js",[],function(){var s;return function(l){let u=[];function r(f,g,b,y){return[["M",f,g+2.5],["L",f+b,g+2.5],["M",f,g+y/2+.5],["L",f+b,g+y/2+.5],["M",f,g+y-1.5],["L",f+b,g+y-1.5]]}function p(f,g,b,y){let w=y/3-2;return[].concat(this.circle(b-w,g,w,w),this.circle(b-w,g+w+4,w,w),this.circle(b-w,g+2*(w+4),w,w))}l.compose=function(f){if(u.indexOf(f)===-1){u.push(f);let g=f.prototype.symbols;g.menu=r,g.menuball=p.bind(g)}}}(s||(s={})),s}),n(t,"Extensions/Exporting/Fullscreen.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){let{composed:r}=l,{addEvent:p,fireEvent:f,pushUnique:g}=u;function b(){this.fullscreen=new y(this)}class y{static compose(v){g(r,"Fullscreen")&&p(v,"beforeRender",b)}constructor(v){this.chart=v,this.isOpen=!1;let T=v.renderTo;!this.browserProps&&(typeof T.requestFullscreen=="function"?this.browserProps={fullscreenChange:"fullscreenchange",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen"}:T.mozRequestFullScreen?this.browserProps={fullscreenChange:"mozfullscreenchange",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen"}:T.webkitRequestFullScreen?this.browserProps={fullscreenChange:"webkitfullscreenchange",requestFullscreen:"webkitRequestFullScreen",exitFullscreen:"webkitExitFullscreen"}:T.msRequestFullscreen&&(this.browserProps={fullscreenChange:"MSFullscreenChange",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen"}))}close(){let v=this,T=v.chart,S=T.options.chart;f(T,"fullscreenClose",null,function(){v.isOpen&&v.browserProps&&T.container.ownerDocument instanceof Document&&T.container.ownerDocument[v.browserProps.exitFullscreen](),v.unbindFullscreenEvent&&(v.unbindFullscreenEvent=v.unbindFullscreenEvent()),T.setSize(v.origWidth,v.origHeight,!1),v.origWidth=void 0,v.origHeight=void 0,S.width=v.origWidthOption,S.height=v.origHeightOption,v.origWidthOption=void 0,v.origHeightOption=void 0,v.isOpen=!1,v.setButtonText()})}open(){let v=this,T=v.chart,S=T.options.chart;f(T,"fullscreenOpen",null,function(){if(S&&(v.origWidthOption=S.width,v.origHeightOption=S.height),v.origWidth=T.chartWidth,v.origHeight=T.chartHeight,v.browserProps){let E=p(T.container.ownerDocument,v.browserProps.fullscreenChange,function(){v.isOpen?(v.isOpen=!1,v.close()):(T.setSize(null,null,!1),v.isOpen=!0,v.setButtonText())}),x=p(T,"destroy",E);v.unbindFullscreenEvent=()=>{E(),x()};let A=T.renderTo[v.browserProps.requestFullscreen]();A&&A.catch(function(){alert("Full screen is not supported inside a frame.")})}})}setButtonText(){let v=this.chart,T=v.exportDivElements,S=v.options.exporting,E=S&&S.buttons&&S.buttons.contextButton.menuItems,x=v.options.lang;if(S&&S.menuItemDefinitions&&x&&x.exitFullscreen&&x.viewFullscreen&&E&&T){let A=T[E.indexOf("viewFullscreen")];A&&s.setElementHTML(A,this.isOpen?x.exitFullscreen:S.menuItemDefinitions.viewFullscreen.text||x.viewFullscreen)}}toggle(){this.isOpen?this.close():this.open()}}return y}),n(t,"Core/HttpUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{win:u}=s,{discardElement:r,objectEach:p}=l,f={ajax:function(g){let b={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"},y=new XMLHttpRequest;function w(v,T){g.error&&g.error(v,T)}if(!g.url)return!1;y.open((g.type||"get").toUpperCase(),g.url,!0),g.headers&&g.headers["Content-Type"]||y.setRequestHeader("Content-Type",b[g.dataType||"json"]||b.text),p(g.headers,function(v,T){y.setRequestHeader(T,v)}),g.responseType&&(y.responseType=g.responseType),y.onreadystatechange=function(){let v;if(y.readyState===4){if(y.status===200){if(g.responseType!=="blob"&&(v=y.responseText,g.dataType==="json"))try{v=JSON.parse(v)}catch(T){if(T instanceof Error)return w(y,T)}return g.success&&g.success(v,y)}w(y,y.responseText)}},g.data&&typeof g.data!="string"&&(g.data=JSON.stringify(g.data)),y.send(g.data)},getJSON:function(g,b){f.ajax({url:g,success:b,dataType:"json",headers:{"Content-Type":"text/plain"}})},post:function(g,b,y){let w=new u.FormData;p(b,function(S,E){w.append(E,S)}),w.append("b64","true");let{filename:v,type:T}=b;return u.fetch(g,{method:"POST",body:w,...y}).then(S=>{S.ok&&S.text().then(E=>{let x=document.createElement("a");x.href=`data:${T};base64,${E}`,x.download=v,x.click(),r(x)})})}};return f}),n(t,"Extensions/Exporting/Exporting.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Chart/Chart.js"],t["Core/Chart/ChartNavigationComposition.js"],t["Core/Defaults.js"],t["Extensions/Exporting/ExportingDefaults.js"],t["Extensions/Exporting/ExportingSymbols.js"],t["Extensions/Exporting/Fullscreen.js"],t["Core/Globals.js"],t["Core/HttpUtilities.js"],t["Core/Utilities.js"]],function(s,l,u,r,p,f,g,b,y,w){var v;let{defaultOptions:T}=r,{doc:S,SVG_NS:E,win:x}=b,{addEvent:A,css:D,createElement:C,discardElement:I,extend:N,find:W,fireEvent:Y,isObject:X,merge:O,objectEach:V,pick:$,removeEvent:L,uniqueKey:R}=w;return function(G){let U,B=[/-/,/^(clipPath|cssText|d|height|width)$/,/^font$/,/[lL]ogical(Width|Height)$/,/^parentRule$/,/^(cssRules|ownerRules)$/,/perspective/,/TapHighlightColor/,/^transition/,/^length$/,/^\d+$/],H=["fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","textAnchor","x","y"];G.inlineAllowlist=[];let q=["clipPath","defs","desc"];function se(Ce){let Ie,Be,He=this,Ae=He.renderer,ye=O(He.options.navigation.buttonOptions,Ce),ge=ye.onclick,Me=ye.menuItems,De=ye.symbolSize||12;if(He.btnCount||(He.btnCount=0),He.exportDivElements||(He.exportDivElements=[],He.exportSVGElements=[]),ye.enabled===!1||!ye.theme)return;let Pe=He.styledMode?{}:ye.theme;ge?Be=function(Xe){Xe&&Xe.stopPropagation(),ge.call(He,Xe)}:Me&&(Be=function(Xe){Xe&&Xe.stopPropagation(),He.contextMenu(Fe.menuClassName,Me,Fe.translateX||0,Fe.translateY||0,Fe.width||0,Fe.height||0,Fe),Fe.setState(2)}),ye.text&&ye.symbol?Pe.paddingLeft=$(Pe.paddingLeft,30):ye.text||N(Pe,{width:ye.width,height:ye.height,padding:0});let Fe=Ae.button(ye.text,0,0,Be,Pe,void 0,void 0,void 0,void 0,ye.useHTML).addClass(Ce.className).attr({title:$(He.options.lang[ye._titleKey||ye.titleKey],"")});Fe.menuClassName=Ce.menuClassName||"highcharts-menu-"+He.btnCount++,ye.symbol&&(Ie=Ae.symbol(ye.symbol,Math.round((ye.symbolX||0)-De/2),Math.round((ye.symbolY||0)-De/2),De,De,{width:De,height:De}).addClass("highcharts-button-symbol").attr({zIndex:1}).add(Fe),He.styledMode||Ie.attr({stroke:ye.symbolStroke,fill:ye.symbolFill,"stroke-width":ye.symbolStrokeWidth||1})),Fe.add(He.exportingGroup).align(N(ye,{width:Fe.width,x:$(ye.x,He.buttonOffset)}),!0,"spacingBox"),He.buttonOffset+=((Fe.width||0)+ye.buttonSpacing)*(ye.align==="right"?-1:1),He.exportSVGElements.push(Fe,Ie)}function pe(){if(!this.printReverseInfo)return;let{childNodes:Ce,origDisplay:Ie,resetParams:Be}=this.printReverseInfo;this.moveContainers(this.renderTo),[].forEach.call(Ce,function(He,Ae){He.nodeType===1&&(He.style.display=Ie[Ae]||"")}),this.isPrinting=!1,Be&&this.setSize.apply(this,Be),delete this.printReverseInfo,U=void 0,Y(this,"afterPrint")}function ne(){var He;let Ce=S.body,Ie=this.options.exporting.printMaxWidth,Be={childNodes:Ce.childNodes,origDisplay:[],resetParams:void 0};this.isPrinting=!0,(He=this.pointer)==null||He.reset(void 0,0),Y(this,"beforePrint"),Ie&&this.chartWidth>Ie&&(Be.resetParams=[this.options.chart.width,void 0,!1],this.setSize(Ie,void 0,!1)),[].forEach.call(Be.childNodes,function(Ae,ye){Ae.nodeType===1&&(Be.origDisplay[ye]=Ae.style.display,Ae.style.display="none")}),this.moveContainers(Ce),this.printReverseInfo=Be}function le(Ce){Ce.renderExporting(),A(Ce,"redraw",Ce.renderExporting),A(Ce,"destroy",Ce.destroyExport)}function ke(Ce,Ie,Be,He,Ae,ye,ge){var Tt,Lt;let Me=this,De=Me.options.navigation,Pe=Me.chartWidth,Fe=Me.chartHeight,Xe="cache-"+Ce,tt=Math.max(Ae,ye),nt,ht=Me[Xe];ht||(Me.exportContextMenu=Me[Xe]=ht=C("div",{className:Ce},{position:"absolute",zIndex:1e3,padding:tt+"px",pointerEvents:"auto",...Me.renderer.style},((Tt=Me.scrollablePlotArea)==null?void 0:Tt.fixedDiv)||Me.container),nt=C("ul",{className:"highcharts-menu"},Me.styledMode?{}:{listStyle:"none",margin:0,padding:0},ht),Me.styledMode||D(nt,N({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},De.menuStyle)),ht.hideMenu=function(){D(ht,{display:"none"}),ge&&ge.setState(0),Me.openMenu=!1,D(Me.renderTo,{overflow:"hidden"}),D(Me.container,{overflow:"hidden"}),w.clearTimeout(ht.hideTimer),Y(Me,"exportMenuHidden")},Me.exportEvents.push(A(ht,"mouseleave",function(){ht.hideTimer=x.setTimeout(ht.hideMenu,500)}),A(ht,"mouseenter",function(){w.clearTimeout(ht.hideTimer)}),A(S,"mouseup",function(ft){var Et;(Et=Me.pointer)!=null&&Et.inClass(ft.target,Ce)||ht.hideMenu()}),A(ht,"click",function(){Me.openMenu&&ht.hideMenu()})),Ie.forEach(function(ft){if(typeof ft=="string"&&(ft=Me.options.exporting.menuItemDefinitions[ft]),X(ft,!0)){let Et;ft.separator?Et=C("hr",void 0,void 0,nt):(ft.textKey==="viewData"&&Me.isDataTableVisible&&(ft.textKey="hideData"),Et=C("li",{className:"highcharts-menu-item",onclick:function(Ct){Ct&&Ct.stopPropagation(),ht.hideMenu(),typeof ft!="string"&&ft.onclick&&ft.onclick.apply(Me,arguments)}},void 0,nt),s.setElementHTML(Et,ft.text||Me.options.lang[ft.textKey]),Me.styledMode||(Et.onmouseover=function(){D(this,De.menuItemHoverStyle)},Et.onmouseout=function(){D(this,De.menuItemStyle)},D(Et,N({cursor:"pointer"},De.menuItemStyle||{})))),Me.exportDivElements.push(Et)}}),Me.exportDivElements.push(nt,ht),Me.exportMenuWidth=ht.offsetWidth,Me.exportMenuHeight=ht.offsetHeight);let gt={display:"block"};Be+(Me.exportMenuWidth||0)>Pe?gt.right=Pe-Be-Ae-tt+"px":gt.left=Be-tt+"px",He+ye+(Me.exportMenuHeight||0)>Fe&&((Lt=ge.alignOptions)==null?void 0:Lt.verticalAlign)!=="top"?gt.bottom=Fe-He-tt+"px":gt.top=He+ye-tt+"px",D(ht,gt),D(Me.renderTo,{overflow:""}),D(Me.container,{overflow:""}),Me.openMenu=!0,Y(Me,"exportMenuShown")}function be(Ce){let Ie,Be=Ce?Ce.target:this,He=Be.exportSVGElements,Ae=Be.exportDivElements,ye=Be.exportEvents;He&&(He.forEach((ge,Me)=>{ge&&(ge.onclick=ge.ontouchstart=null,Be[Ie="cache-"+ge.menuClassName]&&delete Be[Ie],He[Me]=ge.destroy())}),He.length=0),Be.exportingGroup&&(Be.exportingGroup.destroy(),delete Be.exportingGroup),Ae&&(Ae.forEach(function(ge,Me){ge&&(w.clearTimeout(ge.hideTimer),L(ge,"mouseleave"),Ae[Me]=ge.onmouseout=ge.onmouseover=ge.ontouchstart=ge.onclick=null,I(ge))}),Ae.length=0),ye&&(ye.forEach(function(ge){ge()}),ye.length=0)}function Ee(Ce,Ie){let Be=this.getSVGForExport(Ce,Ie);Ce=O(this.options.exporting,Ce),y.post(Ce.url,{filename:Ce.filename?Ce.filename.replace(/\//g,"-"):this.getFilename(),type:Ce.type,width:Ce.width,scale:Ce.scale,svg:Be},Ce.fetchOptions)}function K(){return this.styledMode&&this.inlineStyles(),this.container.innerHTML}function J(){let Ce=this.userOptions.title&&this.userOptions.title.text,Ie=this.options.exporting.filename;return Ie?Ie.replace(/\//g,"-"):(typeof Ce=="string"&&(Ie=Ce.toLowerCase().replace(/<\/?[^>]+(>|$)/g,"").replace(/[\s_]+/g,"-").replace(/[^a-z\d\-]/g,"").replace(/^[\-]+/g,"").replace(/[\-]+/g,"-").substr(0,24).replace(/[\-]+$/g,"")),(!Ie||Ie.length<5)&&(Ie="chart"),Ie)}function oe(Ce){let Ie,Be,He=O(this.options,Ce);He.plotOptions=O(this.userOptions.plotOptions,Ce&&Ce.plotOptions),He.time=O(this.userOptions.time,Ce&&Ce.time);let Ae=C("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},S.body),ye=this.renderTo.style.width,ge=this.renderTo.style.height,Me=He.exporting.sourceWidth||He.chart.width||/px$/.test(ye)&&parseInt(ye,10)||(He.isGantt?800:600),De=He.exporting.sourceHeight||He.chart.height||/px$/.test(ge)&&parseInt(ge,10)||400;N(He.chart,{animation:!1,renderTo:Ae,forExport:!0,renderer:"SVGRenderer",width:Me,height:De}),He.exporting.enabled=!1,delete He.data,He.series=[],this.series.forEach(function(Xe){(Be=O(Xe.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:Xe.visible})).isInternal||He.series.push(Be)});let Pe={};this.axes.forEach(function(Xe){Xe.userOptions.internalKey||(Xe.userOptions.internalKey=R()),Xe.options.isInternal||(Pe[Xe.coll]||(Pe[Xe.coll]=!0,He[Xe.coll]=[]),He[Xe.coll].push(O(Xe.userOptions,{visible:Xe.visible,type:Xe.type,uniqueNames:Xe.uniqueNames})))}),He.colorAxis=this.userOptions.colorAxis;let Fe=new this.constructor(He,this.callback);return Ce&&["xAxis","yAxis","series"].forEach(function(Xe){let tt={};Ce[Xe]&&(tt[Xe]=Ce[Xe],Fe.update(tt))}),this.axes.forEach(function(Xe){let tt=W(Fe.axes,function(Tt){return Tt.options.internalKey===Xe.userOptions.internalKey}),nt=Xe.getExtremes(),ht=nt.userMin,gt=nt.userMax;tt&&(ht!==void 0&&ht!==tt.min||gt!==void 0&&gt!==tt.max)&&tt.setExtremes(ht,gt,!0,!1)}),Ie=Fe.getChartHTML(),Y(this,"getSVG",{chartCopy:Fe}),Ie=this.sanitizeSVG(Ie,He),He=null,Fe.destroy(),I(Ae),Ie}function we(Ce,Ie){let Be=this.options.exporting;return this.getSVG(O({chart:{borderRadius:0}},Be.chartOptions,Ie,{exporting:{sourceWidth:Ce&&Ce.sourceWidth||Be.sourceWidth,sourceHeight:Ce&&Ce.sourceHeight||Be.sourceHeight}}))}function ee(){let Ce,Ie=G.inlineAllowlist,Be={},He=S.createElement("iframe");D(He,{width:"1px",height:"1px",visibility:"hidden"}),S.body.appendChild(He);let Ae=He.contentWindow&&He.contentWindow.document;Ae&&Ae.body.appendChild(Ae.createElementNS(E,"svg")),function ye(ge){let Me,De,Pe,Fe,Xe,tt,nt={};if(Ae&&ge.nodeType===1&&q.indexOf(ge.nodeName)===-1){if(Me=x.getComputedStyle(ge,null),De=ge.nodeName==="svg"?{}:x.getComputedStyle(ge.parentNode,null),!Be[ge.nodeName]){Ce=Ae.getElementsByTagName("svg")[0],Pe=Ae.createElementNS(ge.namespaceURI,ge.nodeName),Ce.appendChild(Pe);let ht=x.getComputedStyle(Pe,null),gt={};for(let Tt in ht)Tt.length<1e3&&typeof ht[Tt]=="string"&&!/^\d+$/.test(Tt)&&(gt[Tt]=ht[Tt]);Be[ge.nodeName]=gt,ge.nodeName==="text"&&delete Be.text.fill,Ce.removeChild(Pe)}for(let ht in Me)(b.isFirefox||b.isMS||b.isSafari||Object.hasOwnProperty.call(Me,ht))&&function(gt,Tt){if(Fe=Xe=!1,Ie.length){for(tt=Ie.length;tt--&&!Xe;)Xe=Ie[tt].test(Tt);Fe=!Xe}for(Tt==="transform"&&gt==="none"&&(Fe=!0),tt=B.length;tt--&&!Fe;){if(Tt.length>1e3)throw Error("Input too long");Fe=B[tt].test(Tt)||typeof gt=="function"}!Fe&&(De[Tt]!==gt||ge.nodeName==="svg")&&Be[ge.nodeName][Tt]!==gt&&(H.indexOf(Tt)===-1?nt[Tt]=gt:gt&&ge.setAttribute(Tt.replace(/[A-Z]/g,function(Lt){return"-"+Lt.toLowerCase()}),gt))}(Me[ht],ht);if(D(ge,nt),ge.nodeName==="svg"&&ge.setAttribute("stroke-width","1px"),ge.nodeName==="text")return;[].forEach.call(ge.children||ge.childNodes,ye)}}(this.container.querySelector("svg")),Ce.parentNode.removeChild(Ce),He.parentNode.removeChild(He)}function re(Ce){let{scrollablePlotArea:Ie}=this;(Ie?[Ie.fixedDiv,Ie.scrollingContainer]:[this.container]).forEach(function(Be){Ce.appendChild(Be)})}function ue(){let Ce=this,Ie=(Be,He,Ae)=>{Ce.isDirtyExporting=!0,O(!0,Ce.options[Be],He),$(Ae,!0)&&Ce.redraw()};Ce.exporting={update:function(Be,He){Ie("exporting",Be,He)}},u.compose(Ce).navigation.addUpdate((Be,He)=>{Ie("navigation",Be,He)})}function xe(){let Ce=this;Ce.isPrinting||(U=Ce,b.isSafari||Ce.beforePrint(),setTimeout(()=>{x.focus(),x.print(),b.isSafari||setTimeout(()=>{Ce.afterPrint()},1e3)},1))}function Te(){let Ce=this,Ie=Ce.options.exporting,Be=Ie.buttons,He=Ce.isDirtyExporting||!Ce.exportSVGElements;Ce.buttonOffset=0,Ce.isDirtyExporting&&Ce.destroyExport(),He&&Ie.enabled!==!1&&(Ce.exportEvents=[],Ce.exportingGroup=Ce.exportingGroup||Ce.renderer.g("exporting-group").attr({zIndex:3}).add(),V(Be,function(Ae){Ce.addButton(Ae)}),Ce.isDirtyExporting=!1)}function ze(Ce,Ie){let Be=Ce.indexOf("</svg>")+6,He=Ce.substr(Be);return Ce=Ce.substr(0,Be),Ie&&Ie.exporting&&Ie.exporting.allowHTML&&He&&(He='<foreignObject x="0" y="0" width="'+Ie.chart.width+'" height="'+Ie.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+He.replace(/(<(?:img|br).*?(?=\>))>/g,"$1 />")+"</body></foreignObject>",Ce=Ce.replace("</svg>",He+"</svg>")),Ce=Ce.replace(/zIndex="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery\d+="[^"]+"/g,"").replace(/url\(("|&quot;)(.*?)("|&quot;)\;?\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS\d+\:)?href=/g," xlink:href=").replace(/\n+/g," ").replace(/(fill|stroke)="rgba\(([ \d]+,[ \d]+,[ \d]+),([ \d\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"").replace(/&shy;/g,"")}G.compose=function(Ce,Ie){f.compose(Ie),g.compose(Ce);let Be=Ce.prototype;Be.exportChart||(Be.afterPrint=pe,Be.exportChart=Ee,Be.inlineStyles=ee,Be.print=xe,Be.sanitizeSVG=ze,Be.getChartHTML=K,Be.getSVG=oe,Be.getSVGForExport=we,Be.getFilename=J,Be.moveContainers=re,Be.beforePrint=ne,Be.contextMenu=ke,Be.addButton=se,Be.destroyExport=be,Be.renderExporting=Te,Be.callbacks.push(le),A(Ce,"init",ue),b.isSafari&&x.matchMedia("print").addListener(function(He){U&&(He.matches?U.beforePrint():U.afterPrint())}),T.exporting=O(p.exporting,T.exporting),T.lang=O(p.lang,T.lang),T.navigation=O(p.navigation,T.navigation))}}(v||(v={})),v}),n(t,"masters/modules/exporting.src.js",[t["Core/Globals.js"],t["Extensions/Exporting/Exporting.js"],t["Core/HttpUtilities.js"]],function(s,l,u){return s.HttpUtilities=s.HttpUtilities||u,s.ajax=s.HttpUtilities.ajax,s.getJSON=s.HttpUtilities.getJSON,s.post=s.HttpUtilities.post,l.compose(s.Chart,s.Renderer),s})})})(T3);var gj=T3.exports;const yj=dh(gj);var C3={exports:{}};(function(i,e){(function(t,n){i.exports=n($e)})(typeof self<"u"?self:$a,function(t){return function(n){function s(u){if(l[u])return l[u].exports;var r=l[u]={i:u,l:!1,exports:{}};return n[u].call(r.exports,r,r.exports,s),r.l=!0,r.exports}var l={};return s.m=n,s.c=l,s.d=function(u,r,p){s.o(u,r)||Object.defineProperty(u,r,{configurable:!1,enumerable:!0,get:p})},s.n=function(u){var r=u&&u.__esModule?function(){return u.default}:function(){return u};return s.d(r,"a",r),r},s.o=function(u,r){return Object.prototype.hasOwnProperty.call(u,r)},s.p="",s(s.s=0)}([function(n,s,l){function u(){return u=Object.assign?Object.assign.bind():function(x){for(var A=1;A<arguments.length;A++){var D=arguments[A];for(var C in D)Object.prototype.hasOwnProperty.call(D,C)&&(x[C]=D[C])}return x},u.apply(this,arguments)}function r(x){return b(x)||g(x)||f(x)||p()}function p(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(x,A){{if(typeof x=="string")return y(x,A);var D=Object.prototype.toString.call(x).slice(8,-1);return D==="Object"&&x.constructor&&(D=x.constructor.name),D==="Map"||D==="Set"?Array.from(x):D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?y(x,A):void 0}}function g(x){if(typeof Symbol<"u"&&x[Symbol.iterator]!=null||x["@@iterator"]!=null)return Array.from(x)}function b(x){if(Array.isArray(x))return y(x)}function y(x,A){(A==null||A>x.length)&&(A=x.length);for(var D=0,C=new Array(A);D<A;D++)C[D]=x[D];return C}function w(x){"@babel/helpers - typeof";return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(x)}Object.defineProperty(s,"__esModule",{value:!0}),l.d(s,"HighchartsReact",function(){return E});var v=l(1),T=l.n(v),S=typeof window<"u"?v.useLayoutEffect:v.useEffect,E=Object(v.memo)(Object(v.forwardRef)(function(x,A){var D=Object(v.useRef)(),C=Object(v.useRef)(),I=Object(v.useRef)(x.constructorType),N=Object(v.useRef)(x.highcharts);return S(function(){function W(){var X=x.highcharts||(typeof window>"u"?"undefined":w(window))==="object"&&window.Highcharts,O=x.constructorType||"chart";X?X[O]?x.options?C.current=X[O](D.current,x.options,x.callback):console.warn('The "options" property was not passed.'):console.warn('The "constructorType" property is incorrect or some required module is not imported.'):console.warn('The "highcharts" property was not passed.')}if(C.current){if(x.allowChartUpdate!==!1)if(x.constructorType!==I.current||x.highcharts!==N.current)I.current=x.constructorType,N.current=x.highcharts,W();else if(!x.immutable&&C.current){var Y;(Y=C.current).update.apply(Y,[x.options].concat(r(x.updateArgs||[!0,!0])))}else W()}else W()},[x.options,x.allowChartUpdate,x.updateArgs,x.containerProps,x.highcharts,x.constructorType]),S(function(){return function(){C.current&&(C.current.destroy(),C.current=null)}},[]),Object(v.useImperativeHandle)(A,function(){return{get chart(){return C.current},container:D}},[]),T.a.createElement("div",u({},x.containerProps,{ref:D}))}));s.default=E},function(n,s){n.exports=t}])})})(C3);var xj=C3.exports;const S3=dh(xj),bj="_chartContainer_1sr1q_1",vj="_chart_1sr1q_1",_j="_menu_1sr1q_10",H0={chartContainer:bj,chart:vj,menu:_j},wj="",Tj={"Bi-Week":" ",Week:wj},Cj="Tden",Sj={"Bi-Week":"Dvoutden",Week:Cj},Ej="Week",kj={'Couldn\'t find a monthly period for weekly period id "{{periodId}}"':`Couldn't find a monthly period for weekly period id "{{periodId}}"`,'Couldn\'t find a weekly period for weekly period id "{{periodId}}"':`Couldn't find a weekly period for weekly period id "{{periodId}}"`,'Couldn\'t handle unknown period id "{{periodId}}"':`Couldn't handle unknown period id "{{periodId}}"`,'Could not find a period type for period id "{{periodId}}"':'Could not find a period type for period id "{{periodId}}"','Could not determine a period type for period id "{{periodId}}"':'Could not determine a period type for period id "{{periodId}}"','Couldn\'t find a period type for weekly period id "{{periodId}}"':`Couldn't find a period type for weekly period id "{{periodId}}"`,"Bi-Week":"Bi-Week",Week:Ej,'Date string is invalid, received "{{dateString}}"':'Date string is invalid, received "{{dateString}}"',"Date string format does not match the specified format. Expected {{format}} but got {{detectedFormat}}.":"Date string format does not match the specified format. Expected {{format}} but got {{detectedFormat}}.",'Unrecognized date, received "{{date}}"':'Unrecognized date, received "{{date}}"',"Date is not given":"Date is not given","Invalid date in specified calendar":"Invalid date in specified calendar","Date {{dateString}} is less than the minimum allowed date {{minDateString}}.":"Date {{dateString}} is less than the minimum allowed date {{minDateString}}.","Date {{dateString}} is greater than the maximum allowed date {{maxDateString}}.":"Date {{dateString}} is greater than the maximum allowed date {{maxDateString}}."},Aj="Semana",Mj={"Bi-Week":"Quincenal",Week:Aj},Pj="Semana",Ij={"Bi-Week":"Cada dos semanas",Week:Pj},Dj="Semaine",Rj={"Bi-Week":"Bi-hebdomadaire",Week:Dj},Lj="Minggu",zj={"Bi-Week":"",Week:Lj},Nj="",Oj={"Bi-Week":"",Week:Nj},jj="Uke",Fj={"Bi-Week":"Toukentlig",Week:jj},Bj="Week",$j={"Bi-Week":"",Week:Bj},Uj="",Vj={"Bi-Week":"",Week:Uj},Gj="",Hj={"Bi-Week":"",Week:Gj},qj="Semana",Wj={"Bi-Week":"Bimensal",Week:qj},Yj="Semana",Zj={"Bi-Week":"",Week:Yj},Xj="",Kj={"Bi-Week":"",Week:Xj},Qj="",Jj={"Bi-Week":"",Week:Qj},e8="",t8={"Bi-Week":"",Week:e8},i8="",n8={"Bi-Week":"",Week:i8},r8="",s8={"Bi-Week":"-",Week:r8},a8="Hafta",o8={"Bi-Week":"Juft-Hafta",Week:a8},l8="Tun",c8={"Bi-Week":"K 2 tun ny",Week:l8},u8="",d8={"Bi-Week":"",Week:u8},h8="",p8={"Bi-Week":"",Week:h8},Nr="default";Qe.addResources("ar",Nr,Tj);Qe.addResources("cs",Nr,Sj);Qe.addResources("en",Nr,kj);Qe.addResources("es",Nr,Mj);Qe.addResources("es_419",Nr,Ij);Qe.addResources("fr",Nr,Rj);Qe.addResources("id",Nr,zj);Qe.addResources("lo",Nr,Oj);Qe.addResources("nb",Nr,Fj);Qe.addResources("nl",Nr,$j);Qe.addResources("prs",Nr,Vj);Qe.addResources("ps",Nr,Hj);Qe.addResources("pt",Nr,Wj);Qe.addResources("pt_BR",Nr,Zj);Qe.addResources("ru",Nr,Kj);Qe.addResources("si",Nr,Jj);Qe.addResources("uk",Nr,t8);Qe.addResources("ur",Nr,n8);Qe.addResources("uz_UZ_Cyrl",Nr,s8);Qe.addResources("uz_UZ_Latn",Nr,o8);Qe.addResources("vi",Nr,c8);Qe.addResources("zh",Nr,d8);Qe.addResources("zh_CN",Nr,p8);const E3={ethiopian:"ethiopic",coptic:"coptic",gregorian:"gregory",islamic:"islamic",iso8601:"iso8601",nepali:"nepali",thai:"buddhist",persian:"persian"},f8={nepali:{"ne-NP":{monthNames:["","","","","","","","","","","",""],dayNamesShort:["","","","","","",""],numbers:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},"en-NP":{monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],dayNamesShort:["Som","Mangl","Budha","Bihi","Shukra","Shani","Aaita"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"]}}},Sa={1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,32,31,32,31,30,30,30,29,30,29,31],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]};class m8 extends Lr.Calendar{constructor(){super("iso8601")}toString(){return"nepali"}year(e){var t;const{isoYear:n,isoMonth:s,isoDay:l}=e.getISOFields();return(t=W0({year:n,month:s,day:l}))===null||t===void 0?void 0:t.year}eraYear(e){return this.year(e)}daysInMonth(e){const{year:t,month:n}=e;return Sa[t][n]}month(e){var t;const{isoYear:n,isoMonth:s,isoDay:l}=e.getISOFields();return(t=W0({year:n,month:s,day:l}))===null||t===void 0?void 0:t.month}monthCode(e){const{month:t}=e;return k3(t)}day(e){const{isoYear:t,isoMonth:n,isoDay:s}=e.getISOFields(),{day:l}=W0({year:t,month:n,day:s});return l}dateFromFields(e,t){const{year:n,day:s,month:l}=q0({year:e.year,month:e.month,day:e.day},t);return new Lr.PlainDate(n,l,s,this)}yearMonthFromFields(e){const{year:t,day:n,month:s}=q0({year:e.year,month:e.month,day:e.day});return new Lr.PlainYearMonth(t,s,this,n)}monthDayFromFields(e){const{year:t,day:n,month:s}=q0({year:e.year,month:e.month,day:e.day});return new Lr.PlainMonthDay(n,s,this,t)}}const iv=Object.keys(Sa),my=Number(iv[0]),gy=Number(iv[iv.length-1]),q0=function(i){let{overflow:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{year:t}=i;if(t<my||t>gy)throw new Error(`Conversions are only possible between ${my} and ${gy} in Nepali calendar`);const{month:n,day:s=1}=i;if(e==="reject"&&(n<1||n>12||s>Sa[t][n]))throw new Error("Invalid date in Nepali calendar");let l=0,u=n;const r=t-(n>9||u===9&&s>=Sa[t][0]?56:57);for(n!==9&&(l=s,u--);u!==9;)u<=0&&(u=12,t--),l+=Sa[t][u],u--;n===9?(l+=s-Sa[t][0],l<0&&(l+=Lr.PlainDate.from({year:r,day:1,month:1}).daysInYear)):l+=Sa[t][9]-Sa[t][0];const p=Lr.PlainDate.from({year:r,month:1,day:1}).add({days:l});return{year:p.year,month:p.month,monthCode:k3(p.month),day:p.day}},W0=i=>{const e=Lr.PlainDate.from({year:i.year,month:i.month,day:i.day}),t=e.year,n=e.dayOfYear;let s=t+56;if(!Sa[s])throw new Error(`Conversions are only possible between ${my} and ${gy} in Nepali calendar`);let l=9;const u=Sa[s][0];let r=Sa[s][l]-u+1;for(;n>r;){var p;l++,l>12&&(l=1,s++),r+=(p=Sa[s])===null||p===void 0?void 0:p[l]}if(!Sa[s])throw new Error(`Conversions are only possible between ${my} and ${gy} in Nepali calendar`);const f=Sa[s][l]-(r-n);return{year:s,month:l,day:f}};function k3(i){return`M${i.toString().padStart(2,"0")}`}const O1={nepali:{calendar:new m8,locales:f8.nepali,defaultLocale:"en-NP"}},g8=/^(?:(\d{4})([-./])(\d{2})(\2)(\d{2})|(\d{2})([-./])(\d{2})(\7)(\d{4}))$/;function y8(i,e){const t=i.match(g8);if(!t)throw new Error(Qe.t('Date string is invalid, received "{{dateString}}"',{dateString:i}));let n,s,l,u;t[1]?(n=t[1],s=t[3],l=t[5],u="YYYY-MM-DD"):(l=t[6],s=t[8],n=t[10],u="DD-MM-YYYY");const r=parseInt(n,10),p=parseInt(s,10),f=parseInt(l,10);return{year:r,month:p,day:f,format:u}}let iT;(function(i){i.INVALID_DATE_IN_CALENDAR="INVALID_DATE_IN_CALENDAR",i.WRONG_FORMAT="WRONG_FORMAT",i.LESS_THAN_MIN="LESS_THAN_MIN",i.MORE_THAN_MAX="INVALID_DATE_MORE_THAN_MAX"})(iT||(iT={}));const Mc=i=>!!O1[i],pc=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(i).padStart(e,"0")},io=(i,e,t)=>{var n;const s=(n=i.eraYear)!==null&&n!==void 0?n:i.year,l=pc(i.month);let u=i.day;e==="endOfMonth"?u=i.daysInMonth:e==="startOfMonth"&&(u=1);const r=pc(u);return t==="DD-MM-YYYY"?`${r}-${l}-${s}`:`${s}-${l}-${r}`},A3=i=>{var e;if(!Mc(i))return i;const n=(e=O1[i])===null||e===void 0?void 0:e.calendar;if(!n)throw new Error(`No implemenation found for custom calendar ${i}`);return n},x8=["adlm","ahom","arab","arabext","armn","armnlow","bali","beng","bhks","brah","cakm","cham","cyrl","deva","ethi","finance","fullwide","geor","gong","gonm","grek","greklow","gujr","guru","hanidays","hanidec","hans","hansfin","hant","hantfin","hebr","hmng","hmnp","java","jpan","jpanfin","jpanyear","kali","khmr","knda","lana","lanatham","laoo","latn","lepc","limb","mathbold","mathdbl","mathmono","mathsanb","mathsans","mlym","modi","mong","mroo","mtei","mymr","mymrshan","mymrtlng","native","newa","nkoo","olck","orya","osma","rohg","roman","romanlow","saur","shrd","sind","sinh","sora","sund","takr","talu","taml","tamldec","telu","thai","tirh","tibt","traditio","vaii","wara","wcho"],b8=(i,e)=>{const t=Object.keys(i).find(n=>{var s,l;return((s=n.split("-"))===null||s===void 0||(l=s[0])===null||l===void 0?void 0:l.toLowerCase())===e});if(t)return i[t]},j1=(i,e)=>{var t,n;const s=O1[i];if(!s)return;const l=s.locales||{},u=(t=(n=e&&(l==null?void 0:l[e]))!==null&&n!==void 0?n:b8(l,e))!==null&&t!==void 0?t:l==null?void 0:l[s.defaultLocale];if(!u)throw new Error(`no localisation found for custom calendar ${i}. Requested locale: ${e}, Default locale ${s.defaultLocale}`);return u},v8=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{dateStyle:"full"};if(!e.calendar)throw new Error("no calendar provided to localise function");if(!i)throw new Error("a date must be provided to localiseDateLabel");const n=Mc(e.calendar),s=i instanceof Lr.ZonedDateTime?i==null?void 0:i.toPlainDate():i;return n?io(i):s.toLocaleString(e.locale,{calendar:e.calendar,dateStyle:t.dateStyle}).toString()},_8=(i,e)=>{var t;if(!e.calendar)throw new Error("no calendar provided to localise function");const n=Mc(e.calendar),s=j1(e.calendar,e.locale);return n?(s==null||(t=s.numbers)===null||t===void 0?void 0:t[i.day])||i.day:i.toPlainDate().toLocaleString(e.locale,{calendar:e.calendar,numberingSystem:x8.includes(e.numberingSystem)?e.numberingSystem:void 0,day:"numeric"})},w8=(i,e,t)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");const n=Mc(e.calendar),s=j1(e.calendar,e.locale);return n?s==null?void 0:s.monthNames[i.month-1]:i.toLocaleString(e.locale,t)},T8=(i,e)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");const t=Mc(e.calendar),n=j1(e.calendar,e.locale),s=n==null?void 0:n.dayNamesShort[i.dayOfWeek-1];return t&&s?s:i.toPlainDate().toLocaleString(e.locale,{weekday:e.weekDayFormat,calendar:e.calendar})},C8=(i,e,t)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");return Mc(e.calendar)?i.year:i.toPlainYearMonth().toLocaleString(e.locale,t)},Su={localiseYear:C8,localiseDateLabel:v8,localiseWeekLabel:_8,localiseMonth:w8,localiseWeekDayLabel:T8},M3=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const[e,t,n]=i.replace(/_/g,"-").split("-");let s=e;n&&(s=`${s}-${n}`),t&&(s=`${s}-${t}`);try{const l=Intl.DateTimeFormat.supportedLocalesOf(s);return l&&l.length===1?s:void 0}catch{return}},S8=i=>{let{date:e,calendar:t}=i;const{year:n,month:s,day:l}=y8(e);return Lr.PlainDate.from({year:n,month:s,day:l,calendar:t})},Il=i=>{let{date:e,calendar:t}=i;if(typeof e=="string")return S8({date:e,calendar:t});if(e instanceof Date)return Lr.PlainDate.from({year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),calendar:t});if(e instanceof Lr.PlainDate)return Lr.PlainDate.from({year:e.year,month:e.month,day:e.day,calendar:t});throw new Error(Qe.t('Unrecognized date, received "{{date}}"',{date:e}))},as=["DAILY","WEEKLY","WEEKLYMON","WEEKLYTUE","WEEKLYWED","WEEKLYTHU","WEEKLYFRI","WEEKLYSAT","WEEKLYSUN","BIWEEKLY","MONTHLY","BIMONTHLY","QUARTERLY","QUARTERLYJAN","QUARTERLYFEB","QUARTERLYMAR","QUARTERLYAPR","QUARTERLYMAY","QUARTERLYJUN","QUARTERLYJUL","QUARTERLYAUG","QUARTERLYSEP","QUARTERLYOCT","QUARTERLYNOV","QUARTERLYDEC","SIXMONTHLY","SIXMONTHLYJAN","SIXMONTHLYFEB","SIXMONTHLYMAR","SIXMONTHLYAPR","SIXMONTHLYMAY","SIXMONTHLYJUN","SIXMONTHLYJUL","SIXMONTHLYAUG","SIXMONTHLYSEP","SIXMONTHLYOCT","SIXMONTHLYNOV","SIXMONTHLYDEC","YEARLY","FYJAN","FYFEB","FYMAR","FYAPR","FYMAY","FYJUN","FYJUL","FYAUG","FYSEP","FYOCT","FYNOV","FYDEC"],E8=as.filter(i=>i.match(/WEEKLY/)),P3=as.filter(i=>i.match(/MONTHLY|QUARTERLY|SIXMONTHLY/)),Kf=as.filter(i=>i.match(/QUARTERLY/)),Qf=as.filter(i=>i.match(/SIXMONTHLY/)),k8=["MONTHLY","BIMONTHLY","QUARTERLY","QUARTERLYJAN","SIXMONTHLY","SIXMONTHLYJAN"],A8=as.filter(i=>i.match(/(QUARTERLY|SIXMONTHLY)[A-Z]/)),I3=P3.filter(i=>i!=="MONTHLY"),M8=as.filter(i=>i.match(/^(YEARLY|FY[A-Z]{3})/)),P8=as.filter(i=>i.match(/^FY[A-Z]{3}$/));[...k8,...as.filter(i=>i.match(/JAN$/))];const I8=as.filter(i=>i.match(/FEB$/)),D8=as.filter(i=>i.match(/MAR$/)),R8=as.filter(i=>i.match(/APR$/)),L8=as.filter(i=>i.match(/MAY$/)),z8=as.filter(i=>i.match(/JUN$/)),N8=as.filter(i=>i.match(/JUL$/)),O8=as.filter(i=>i.match(/AUG$/)),j8=as.filter(i=>i.match(/SEP$/)),F8=as.filter(i=>i.match(/OCT$/)),B8=as.filter(i=>i.match(/NOV$/)),$8=as.filter(i=>i.match(/DEC/)),{localiseDateLabel:U8}=Su,D3=i=>{let{date:e,calendar:t,locale:n}=i;const s=e.year,l=String(e.month).padStart(2,"0"),u=String(e.day).padStart(2,"0"),r=`${s}${l}${u}`,p=U8(e,{calendar:t,locale:n},{dateStyle:"long"});return{periodType:"DAILY",id:r,iso:r,displayName:p,name:io(e),startDate:io(e),endDate:io(e)}},V8=i=>{let{year:e,calendar:t,endsBefore:n,locale:s}=i;const l=n?Il({calendar:t,date:n}):null,u=Lr.PlainDate.from({year:e,month:1,day:1,calendar:t}),r=[];for(let p=0;p<u.daysInYear;p++){const f=u.add({days:p});if(l&&Lr.PlainDate.compare(f,l)>-1)break;const g=D3({date:f,calendar:t,locale:s});r.push(g)}return r},rh=i=>I8.includes(i)?"FEB":D8.includes(i)?"MAR":R8.includes(i)?"APR":L8.includes(i)?"MAY":z8.includes(i)?"JUN":N8.includes(i)?"JUL":O8.includes(i)?"AUG":j8.includes(i)?"SEP":F8.includes(i)?"OCT":B8.includes(i)?"NOV":$8.includes(i)?"DEC":"JAN",Yo={JAN:{value:1,name:"January"},FEB:{value:2,name:"February"},MAR:{value:3,name:"March"},APR:{value:4,name:"April"},MAY:{value:5,name:"May"},JUN:{value:6,name:"June"},JUL:{value:7,name:"July"},AUG:{value:8,name:"August"},SEP:{value:9,name:"September"},OCT:{value:10,name:"October"},NOV:{value:11,name:"November"},DEC:{value:12,name:"December"}},G8=i=>{let{periodType:e,month:t,year:n,calendar:s,locale:l}=i;const u=Z8({periodType:e,month:t.month,monthsInYear:t.monthsInYear}),r=q8(e),p=t.add({months:r}),f=H8({periodType:e,currentMonth:t,year:n,index:u});t.calendar==="ethiopic"&&console.warn("todo: confirm the special cases for the 13th month with Abyot, then update the start/end dates for Ethiopic calendar");const g=Lr.PlainDate.from({year:p.year,month:p.month,day:1,calendar:p.calendar}).subtract({days:1}),b=W8({periodType:e,month:t,locale:l,calendar:s,nextMonth:p.subtract({months:1}),index:u});return{periodType:e,id:f,iso:f,name:b,displayName:b,startDate:io(t,"startOfMonth"),endDate:io(g,"endOfMonth")}},H8=i=>{let{periodType:e,currentMonth:t,year:n,index:s}=i;if(e==="BIMONTHLY")return`${n}${pc(s)}B`;if(e==="QUARTERLY")return`${n}Q${s}`;if(e==="SIXMONTHLY")return`${n}S${s}`;if(Kf.includes(e)){const l=Yo[rh(e)].name;return`${n}${l}Q${s}`}if(Qf.includes(e)){const l=Yo[rh(e)].name;return`${n}${l}S${s}`}return`${n}${pc(t.month)}`},q8=i=>{if(Qf.includes(i))return 6;if(Kf.includes(i))return 3;if(i==="MONTHLY")return 1;if(i==="BIMONTHLY")return 2;throw new Error(`unrecognised monthly period type ${i}`)},W8=i=>{const{periodType:e,month:t,nextMonth:n,calendar:s,locale:l}=i;if(Mc(s))return Y8(i);const u={month:"long",year:"numeric",calendar:s},r={month:"long",calendar:s};let p="";if(I3.includes(e)){const f=t.year===n.year?r:u;p=`${t.toLocaleString(l,f)} - ${n.toLocaleString(l,u)}`}else p=`${t.toLocaleString(l,u)}`;return p=p.replace(/ERA\d+\s*/g,"").trim(),p},Y8=i=>{let{periodType:e,month:t,nextMonth:n,calendar:s,locale:l}=i,u="";if(I3.includes(e)){const r=t.year!==n.year;u=`${Su.localiseMonth(t,{locale:l,calendar:s},{})}${r?` ${t.year}`:""} - ${Su.localiseMonth(n,{locale:l,calendar:s},{})} ${n.year}`}else u=`${Su.localiseMonth(t,{locale:l,calendar:s},{})} ${n.year}`;return u},Z8=i=>{let{periodType:e,month:t,monthsInYear:n}=i;if(e==="MONTHLY")return t;if(e==="BIMONTHLY"){if(t%2===0)throw new Error(`Even numbers can't be a month for BIMONTHLY period type, received "${t}"`);return Math.ceil(t/2)}if(Kf.includes(e))return K8(e,t,n);if(Qf.includes(e))return X8(e,t,n);throw new Error(`Unrecognized period type "${e}"`)},R3=(i,e)=>[...Array(e-i+1).fill(null).map((n,s)=>s+i),1,2,3,4,5,6,7,8,9,10,11,12].slice(0,12),L3=(i,e)=>{const t=[];for(let n=0;n<12;n+=e)t.push(i.slice(n,n+e));return t},X8=(i,e,t)=>{const n=rh(i),s=Yo[n].value,l=R3(s,t);return L3(l,6)[1].includes(e)?2:1},K8=(i,e,t)=>{const n=rh(i),s=Yo[n].value,l=R3(s,t),u=L3(l,3);return u[1].includes(e)?2:u[2].includes(e)?3:u[3].includes(e)?4:1},F1=i=>{let{period:e,date:t,calendar:n}=i;const s=Il({calendar:n,date:e.startDate}),l=Il({calendar:n,date:e.endDate}),u=Lr.PlainDate.compare(t,s)<1,r=Lr.PlainDate.compare(s,t)===-1,p=Lr.PlainDate.compare(t,l)<1;return u||r&&p},Q8=i=>{let{year:e,calendar:t,periodType:n,endsBefore:s,locale:l}=i,u=Lr.PlainDate.from({year:e,month:eF(n),day:t.toString()==="nepali"?14:1,calendar:t});const r=[];for(;u.year===e||tF(n,r.length);){const p=iF({periodType:n,currentMonth:u.month,year:e,calendar:t});if(!J8(t,u)){const b=G8({periodType:n,month:u,year:e,calendar:t,locale:l});if(s&&F1({period:b,date:s,calendar:t}))break;r.push(b)}const g=u.add({months:p});u=Il({date:g,calendar:t})}return r},J8=(i,e)=>i==="ethiopic"&&e.month===13,eF=i=>{if(A8.includes(i)){const e=rh(i);return Yo[e].value}return 1},tF=(i,e)=>Qf.includes(i)?e<2:Kf.includes(i)?e<4:!1,iF=i=>{let{periodType:e}=i;if(Qf.includes(e))return 6;if(Kf.includes(e))return 3;if(e==="MONTHLY")return 1;if(e==="BIMONTHLY")return 2;throw new Error(`unrecognised monthly period type ${e}`)},Jl={Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6,Sunday:7},nF=i=>{let{year:e,calendar:t,periodType:n,startingDay:s,endsBefore:l}=i;const u=rF(n,s);let r=sF({year:e,calendar:t,periodType:n,startingDay:u});const p=[];let f=1;const g=n==="BIWEEKLY"?13:6;do{const b=r.add({days:g});if(l&&F1({period:{startDate:io(r),endDate:io(b)},date:l,calendar:t}))break;const y=oF({periodType:n,startingDay:u,year:e,weekIndex:f});if(!(b.year===e+1&&b.day>=4)){const w=lF({periodType:n,date:r,nextWeek:b,weekIndex:f});p.push({periodType:n,id:y,iso:y,name:w,displayName:w,startDate:io(r),endDate:io(b)})}r=Il({date:b,calendar:t}).add({days:1}),f++}while(r.year===e);return p},rF=(i,e)=>{switch(i){case"WEEKLYMON":return Jl.Monday;case"WEEKLYTUE":return Jl.Tuesday;case"WEEKLYWED":return Jl.Wednesday;case"WEEKLYTHU":return Jl.Thursday;case"WEEKLYFRI":return Jl.Friday;case"WEEKLYSAT":return Jl.Saturday;case"WEEKLYSUN":return Jl.Sunday;case"WEEKLY":case"BIWEEKLY":default:return e||Jl.Monday}},sF=i=>{const{year:e,calendar:t,startingDay:n}=i,s=Lr.PlainDate.from({year:e,month:1,day:4,calendar:t}),l=s.dayOfWeek-n;return l>0?s.subtract({days:l}):l<0?s.subtract({days:l+7}):s},aF={1:"",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat",7:"Sun"},oF=i=>{let{startingDay:e,periodType:t,year:n,weekIndex:s}=i;const l=t==="BIWEEKLY"?"BiW":"W";return`${n}${aF[e]}${l}${s}`},lF=i=>{let{periodType:e,date:t,nextWeek:n,weekIndex:s}=i;const{year:l,month:u,day:r}=t,{year:p,month:f,day:g}=n;return`${e==="BIWEEKLY"?Qe.t("Bi-Week"):Qe.t("Week")} ${s} - ${l}-${pc(u)}-${pc(r)} - ${p}-${pc(f)}-${pc(g)}`},z3=i=>{if(i==="YEARLY")return 1;const e=rh(i),t=Yo[e];return(t==null?void 0:t.value)||1},N3={1:"",2:"Feb",3:"March",4:"April",5:"May",6:"Jun",7:"July",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},O3=i=>{let{periodType:e,year:t,locale:n,calendar:s}=i;const l=z3(e),u=cF({periodType:e,year:t,month:l}),r=l.toString().padStart(2,"0"),p=Il({date:`${t}-${r}-01`,calendar:s}),f=Il({date:`${t+1}-${r}-01`,calendar:s}).subtract({days:1}),g=dF(e,p,{locale:n,calendar:s});return{periodType:e,id:u,iso:u,name:g,displayName:g,startDate:io(p,"startOfMonth"),endDate:io(f,"endOfMonth")}},cF=i=>{let{periodType:e,year:t,month:n}=i;if(e==="YEARLY")return t.toString();if(uF(e)){const s=N3[n];return`${t}${s}`}throw new Error(`can not build value for unrecognised yearly type "${e}"`)},uF=i=>P8.includes(i),dF=(i,e,t)=>{if(i==="YEARLY")return e.year.toString();if(Mc(t.calendar))return hF(e,t);const n={month:"long",year:"numeric",calendar:t.calendar},s=Su.localiseMonth(e,t,n),l=Su.localiseMonth(e.add({months:e.monthsInYear-1}),t,n);let u=`${s} - ${l}`;return u=u.replace(/ERA\d+\s*/g,"").trim(),u},hF=(i,e)=>{const t=l=>`${Su.localiseMonth(l,e,{})} ${l.year}`,n=Lr.PlainDate.from({year:i.year+1,month:i.month-1,day:1,calendar:e.calendar});return`${t(i)} - ${t(n)}`},pF=i=>{let{year:e,calendar:t,periodType:n,endsBefore:s,yearsCount:l,locale:u}=i;const r=z3(n),p=Lr.PlainDate.from({year:e,month:r,day:t.toString()==="nepali"?14:1,calendar:t}),f=Lr.PlainDate.from({day:1,month:1,year:1970,calendar:"gregory"}).withCalendar(t),g=f.eraYear||f.year,b=[],y=l??e-g+1;for(let w=0;w<y;w++){const v=p.year-w,T=O3({periodType:n,year:v,locale:u,calendar:t});s&&F1({period:T,date:s,calendar:t})||b.push(T)}return b},bg=i=>{var e,t;let{periodType:n,year:s,endsBefore:l,calendar:u,locale:r="en",yearsCount:p=10,startingDay:f=1}=i,g;if(typeof s=="number")g=s;else if(!isNaN(s)&&!isNaN(parseInt(s)))g=parseInt(s);else throw new Error("year must be a number");const b=A3((e=E3[u])!==null&&e!==void 0?e:u),y=(t=M3(r))!==null&&t!==void 0?t:"en",w=l?Il({calendar:b,date:l}):void 0;if(E8.includes(n))return nF({year:g,periodType:n,calendar:b,startingDay:f,endsBefore:w});if(M8.includes(n))return pF({year:g,periodType:n,locale:y,calendar:b,endsBefore:w,yearsCount:p});if(P3.includes(n))return Q8({year:g,periodType:n,locale:y,calendar:b,endsBefore:w});if(n==="DAILY")return V8({year:g,locale:y,calendar:b,endsBefore:w});throw new Error(`can not generate period for unrecognised period type "${n}"`)},fF=new RegExp("^([0-9]{4})W([0-9]+)$"),mF=new RegExp("^([0-9]{4})BiW([0-9]+)$"),gF=new RegExp("^([0-9]{4})([A-Z][a-z]{2})W([0-9]+)$"),yF=new RegExp("^([0-9]{4})([0-9]{2})$"),xF=new RegExp("^([0-9]{4})([0-9]{2})B$"),bF=new RegExp("^([0-9]{4})Q([0-9])$"),vF=new RegExp("^([0-9]{4})([A-Z][a-z]+)Q([0-9])$"),_F=new RegExp("^([0-9]{4})S([0-9])$"),wF=new RegExp("^([0-9]{4})([A-Z][a-z]+)S([0-9])$"),TF=new RegExp("^([0-9]{4})$"),CF=new RegExp("^([0-9]{4})([A-Z][a-z]{2,})$"),SF=Object.values(N3).slice(1).join("|"),EF=new RegExp(`^[0-9]{4}(${SF})?$`),kF=i=>EF.test(i),nT=Object.values(Yo).map(i=>{let{name:e}=i;return e}).join("|"),AF=["^[0-9]{6}$","^[0-9]{6}B$",`^[0-9]{4}(${nT})?Q[0-9]$`,`^[0-9]{4}(${nT})?S[0-9]$`].join("|"),MF=new RegExp(AF),PF=i=>MF.test(i),IF=i=>/^[0-9]{4}([A-Z][a-z]{2}|Bi)?W[0-9]+$/.test(i),DF=i=>/^[0-9]{8}$/.test(i),RF=i=>{if(yF.test(i))return"MONTHLY";if(xF.test(i))return"BIMONTHLY";if(bF.test(i))return"QUARTERLY";const e=i.match(vF);if(e){const n=e[2],s=Object.entries(Yo).find(u=>{let[,{name:r}]=u;return r===n});if(!s)throw new Error("@TODO");const[l]=s;return`QUARTERLY${l}`}if(_F.test(i))return"SIXMONTHLY";const t=i.match(wF);if(t){const n=t[2],s=Object.entries(Yo).find(u=>{let[,{name:r}]=u;return r===n});if(!s)throw new Error("@TODO");const[l]=s;return`SIXMONTHLY${l}`}throw new Error(Qe.t('Could not find a period type for period id "{{periodId}}"',{periodId:i}))},LF=i=>{if(fF.test(i))return"WEEKLY";if(mF.test(i))return"BIWEEKLY";const e=i.match(gF);if(e){const[,,t]=e,n=`WEEKLY${t.toUpperCase()}`;if(!as.includes(n))throw new Error(Qe.t('Could not determine a period type for period id "{{periodId}}"',{periodId:i}));return n}throw new Error(Qe.t(`Couldn't find a period type for weekly period id "{{periodId}}"`,{periodId:i}))},zF=i=>{if(TF.test(i))return"YEARLY";const e=i.match(CF);if(e){const t=e[2].slice(0,3),n=Object.entries(Yo).find(l=>{let[,{name:u}]=l;return u.startsWith(t)});if(!n)throw new Error("@TODO");const[s]=n;return`FY${s}`}throw new Error(Qe.t('Could not find a period type for period id "{{periodId}}"',{periodId:i}))},B1=i=>{var e,t;let{periodId:n,calendar:s,locale:l="en"}=i;const u=A3((e=E3[s])!==null&&e!==void 0?e:s),r=(t=M3(l))!==null&&t!==void 0?t:"en";if(kF(n)){const p=parseInt(n.substring(0,4),10),f=zF(n);return O3({year:p,periodType:f,calendar:u,locale:l})}if(PF(n)){const p=RF(n),f=parseInt(n.substring(0,4),10),b=bg({periodType:p,year:f,calendar:u,locale:r}).find(v=>{let{id:T}=v;return T===n});if(b)return b;const w=bg({year:f+1,periodType:p,calendar:u,locale:r}).slice(-1).find(v=>{let{id:T}=v;return T===n});if(!w)throw new Error(Qe.t(`Couldn't find a monthly period for weekly period id "{{periodId}}"`,{periodId:n}));return w}if(IF(n)){const p=parseInt(n.substring(0,4),10),f=LF(n),b=bg({year:p,periodType:f,calendar:u,locale:l}).find(w=>{let{id:v}=w;return v===n});if(b)return b;const[y]=bg({year:p-1,periodType:f,calendar:u,locale:l}).slice(-1);if(y.id===n)return y;throw new Error(Qe.t(`Couldn't find a weekly period for weekly period id "{{periodId}}"`,{periodId:n}))}if(DF(n)){const p=n.substring(0,4),f=n.substring(4,6),g=n.substring(6),b=Il({date:`${p}-${f}-${g}`,calendar:u});return D3({date:b,locale:l,calendar:u})}throw new Error(Qe.t(`Couldn't handle unknown period id "{{periodId}}"`,{periodId:n}))};pj(Uu);yj(Uu);mj(Uu);const rT=(i,e)=>{Uu.getOptions().colors;const t=i.filter(s=>s.dataElement==="median").map(s=>[s.period,s.value]),n=i.filter(s=>s.dataElement==="quantile_low").map(s=>[s.period,s.value,i.filter(l=>l.dataElement==="quantile_high"&&l.period===s.period)[0].value]);return{title:{text:Qe.t("Prediction for {{predictionTargetName}} for {{orgUnitName}}",{predictionTargetName:e,orgUnitName:i[0].displayName})},tooltip:{shared:!0},xAxis:{type:"category",labels:{enabled:!0,formatter:function(){return B1({periodId:this.value.toString(),calendar:"gregory"}).displayName},style:{fontSize:"0.9rem"}}},yAxis:{title:{text:"Number of cases"}},credits:{text:"CHAP"},chart:{height:490,marginBottom:125},plotOptions:{series:{lineWidth:5}},series:[{type:"line",data:t,name:Qe.t("Quantile median"),color:"#004bbd",zIndex:2},{type:"arearange",name:Qe.t("Range"),data:n,zIndex:1,lineWidth:0,color:"#004bbd",fillOpacity:.4}]}};function NF(i){return[...new Set(i.map(t=>t.orgUnit))].map(t=>i.filter(n=>n.orgUnit===t))}const OF=i=>{let{data:e,predictionTargetName:t}=i;const n=NF(e.dataValues),[s,l]=$e.useState(rT(n[0],t)),[u,r]=$e.useState(0),p=f=>{r(f),l(rT(n[f],t))};return fe.createElement(fe.Fragment,null,fe.createElement("div",{className:H0.chartContainer},fe.createElement("div",null,fe.createElement(Cv,{dense:!0},n.map((f,g)=>fe.createElement(Jp,{className:H0.menu,active:u==g,key:g,label:f[0].displayName,onClick:()=>p(g)})))),fe.createElement("div",{className:H0.chart},fe.createElement(S3,{highcharts:Uu,constructorType:"chart",options:s}))))};function kp(i,e,t){return(e=jF(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function jF(i){var e=FF(i,"string");return typeof e=="symbol"?e:e+""}function FF(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class sT extends Error{constructor(e,t,n){super(n),kp(this,"url",void 0),kp(this,"status",void 0),kp(this,"statusText",void 0),kp(this,"body",void 0),kp(this,"request",void 0),this.name="ApiError",this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.body=t.body,this.request=e}}function cu(i,e,t){BF(i,e),e.set(i,t)}function BF(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Kn(i,e){return i.get(j3(i,e))}function zo(i,e,t){return i.set(j3(i,e),t),t}function j3(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}class $F extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}}var ec=new WeakMap,tc=new WeakMap,bl=new WeakMap,Ld=new WeakMap,Ap=new WeakMap,vg=new WeakMap,zd=new WeakMap;class UF{constructor(e){cu(this,ec,void 0),cu(this,tc,void 0),cu(this,bl,void 0),cu(this,Ld,void 0),cu(this,Ap,void 0),cu(this,vg,void 0),cu(this,zd,void 0),zo(ec,this,!1),zo(tc,this,!1),zo(bl,this,!1),zo(Ld,this,[]),zo(Ap,this,new Promise((t,n)=>{zo(vg,this,t),zo(zd,this,n);const s=r=>{Kn(ec,this)||Kn(tc,this)||Kn(bl,this)||(zo(ec,this,!0),Kn(vg,this)&&Kn(vg,this).call(this,r))},l=r=>{Kn(ec,this)||Kn(tc,this)||Kn(bl,this)||(zo(tc,this,!0),Kn(zd,this)&&Kn(zd,this).call(this,r))},u=r=>{Kn(ec,this)||Kn(tc,this)||Kn(bl,this)||Kn(Ld,this).push(r)};return Object.defineProperty(u,"isResolved",{get:()=>Kn(ec,this)}),Object.defineProperty(u,"isRejected",{get:()=>Kn(tc,this)}),Object.defineProperty(u,"isCancelled",{get:()=>Kn(bl,this)}),e(s,l,u)}))}get[Symbol.toStringTag](){return"Cancellable Promise"}then(e,t){return Kn(Ap,this).then(e,t)}catch(e){return Kn(Ap,this).catch(e)}finally(e){return Kn(Ap,this).finally(e)}cancel(){if(!(Kn(ec,this)||Kn(tc,this)||Kn(bl,this))){if(zo(bl,this,!0),Kn(Ld,this).length)try{for(const e of Kn(Ld,this))e()}catch(e){console.warn("Cancellation threw an error",e);return}Kn(Ld,this).length=0,Kn(zd,this)&&Kn(zd,this).call(this,new $F("Request aborted"))}}get isCancelled(){return Kn(bl,this)}}const Fi={BASE:"/v1",VERSION:"0.1.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},$1=i=>i!=null,Jf=i=>typeof i=="string",Y0=i=>Jf(i)&&i!=="",U1=i=>typeof i=="object"&&typeof i.type=="string"&&typeof i.stream=="function"&&typeof i.arrayBuffer=="function"&&typeof i.constructor=="function"&&typeof i.constructor.name=="string"&&/^(Blob|File)$/.test(i.constructor.name)&&/^(Blob|File)$/.test(i[Symbol.toStringTag]),F3=i=>i instanceof FormData,VF=i=>{try{return btoa(i)}catch{return Buffer.from(i).toString("base64")}},GF=i=>{const e=[],t=(s,l)=>{e.push(`${encodeURIComponent(s)}=${encodeURIComponent(String(l))}`)},n=(s,l)=>{$1(l)&&(Array.isArray(l)?l.forEach(u=>{n(s,u)}):typeof l=="object"?Object.entries(l).forEach(u=>{let[r,p]=u;n(`${s}[${r}]`,p)}):t(s,l))};return Object.entries(i).forEach(s=>{let[l,u]=s;n(l,u)}),e.length>0?`?${e.join("&")}`:""},HF=(i,e)=>{const t=encodeURI,n=e.url.replace("{api-version}",i.VERSION).replace(/{(.*?)}/g,(l,u)=>{var r;return(r=e.path)!==null&&r!==void 0&&r.hasOwnProperty(u)?t(String(e.path[u])):l}),s=`${i.BASE}${n}`;return e.query?`${s}${GF(e.query)}`:s},qF=i=>{if(i.formData){const e=new FormData,t=(n,s)=>{Jf(s)||U1(s)?e.append(n,s):e.append(n,JSON.stringify(s))};return Object.entries(i.formData).filter(n=>{let[s,l]=n;return $1(l)}).forEach(n=>{let[s,l]=n;Array.isArray(l)?l.forEach(u=>t(s,u)):t(s,l)}),e}},_g=async(i,e)=>e,WF=async(i,e)=>{const[t,n,s,l]=await Promise.all([_g(e,i.TOKEN),_g(e,i.USERNAME),_g(e,i.PASSWORD),_g(e,i.HEADERS)]),u=Object.entries({Accept:"application/json",...l,...e.headers}).filter(r=>{let[p,f]=r;return $1(f)}).reduce((r,p)=>{let[f,g]=p;return{...r,[f]:String(g)}},{});if(Y0(t)&&(u.Authorization=`Bearer ${t}`),Y0(n)&&Y0(s)){const r=VF(`${n}:${s}`);u.Authorization=`Basic ${r}`}return e.body!==void 0&&(e.mediaType?u["Content-Type"]=e.mediaType:U1(e.body)?u["Content-Type"]=e.body.type||"application/octet-stream":Jf(e.body)?u["Content-Type"]="text/plain":F3(e.body)||(u["Content-Type"]="application/json")),new Headers(u)},YF=i=>{if(i.body!==void 0){var e;return(e=i.mediaType)!==null&&e!==void 0&&e.includes("/json")?JSON.stringify(i.body):Jf(i.body)||U1(i.body)||F3(i.body)?i.body:JSON.stringify(i.body)}},ZF=async(i,e,t,n,s,l,u)=>{const r=new AbortController,p={headers:l,body:n??s,method:e.method,signal:r.signal};return i.WITH_CREDENTIALS&&(p.credentials=i.CREDENTIALS),u(()=>r.abort()),await fetch(t,p)},XF=(i,e)=>{if(e){const t=i.headers.get(e);if(Jf(t))return t}},KF=async i=>{if(i.status!==204)try{const e=i.headers.get("Content-Type");if(e)return["application/json","application/problem+json"].some(s=>e.toLowerCase().startsWith(s))?await i.json():await i.text()}catch(e){console.error(e)}},QF=(i,e)=>{const n={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...i.errors}[e.status];if(n)throw new sT(i,e,n);if(!e.ok){var s,l;const u=(s=e.status)!==null&&s!==void 0?s:"unknown",r=(l=e.statusText)!==null&&l!==void 0?l:"unknown",p=(()=>{try{return JSON.stringify(e.body,null,2)}catch{return}})();throw new sT(i,e,`Generic Error: status: ${u}; status text: ${r}; body: ${p}`)}},Vi=(i,e)=>new UF(async(t,n,s)=>{try{const l=HF(i,e),u=qF(e),r=YF(e),p=await WF(i,e);if(!s.isCancelled){const f=await ZF(i,e,l,r,u,p,s),g=await KF(f),b=XF(f,e.responseHeader),y={url:l,ok:f.ok,status:f.status,statusText:f.statusText,body:b??g};QF(e,y),t(y.body)}}catch(l){n(l)}});class sh{static makeDatasetAnalyticsMakeDatasetPost(e){return Vi(Fi,{method:"POST",url:"/analytics/make-dataset",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getCompatibleBacktestsAnalyticsCompatibleBacktestsBacktestIdGet(e){return Vi(Fi,{method:"GET",url:"/analytics/compatible-backtests/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static getBacktestOverlapAnalyticsBacktestOverlapBacktestId1BacktestId2Get(e,t){return Vi(Fi,{method:"GET",url:"/analytics/backtest-overlap/{backtestId1}/{backtestId2}",path:{backtestId1:e,backtestId2:t},errors:{422:"Validation Error"}})}static getEvaluationEntriesAnalyticsEvaluationEntryGet(e,t,n,s){return Vi(Fi,{method:"GET",url:"/analytics/evaluation-entry",query:{backtestId:e,quantiles:t,splitPeriod:n,orgUnits:s},errors:{422:"Validation Error"}})}static createBacktestAnalyticsCreateBacktestPost(e){return Vi(Fi,{method:"POST",url:"/analytics/create-backtest",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static makePredictionAnalyticsMakePredictionPost(e){return Vi(Fi,{method:"POST",url:"/analytics/make-prediction",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getPredictionEntriesAnalyticsPredictionEntryPredictionIdGet(e,t){return Vi(Fi,{method:"GET",url:"/analytics/prediction-entry/{predictionId}",path:{predictionId:e},query:{quantiles:t},errors:{422:"Validation Error"}})}static getActualCasesAnalyticsActualCasesBacktestIdGet(e,t){return Vi(Fi,{method:"GET",url:"/analytics/actualCases/{backtestId}",path:{backtestId:e},query:{orgUnits:t},errors:{422:"Validation Error"}})}static getDataSourcesAnalyticsDataSourcesGet(){return Vi(Fi,{method:"GET",url:"/analytics/data-sources"})}}class so{static getBacktestsCrudBacktestsGet(){return Vi(Fi,{method:"GET",url:"/crud/backtests"})}static createBacktestCrudBacktestsPost(e){return Vi(Fi,{method:"POST",url:"/crud/backtests",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getBacktestCrudBacktestsBacktestIdGet(e){return Vi(Fi,{method:"GET",url:"/crud/backtests/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static deleteBacktestCrudBacktestsBacktestIdDelete(e){return Vi(Fi,{method:"DELETE",url:"/crud/backtests/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static getPredictionsCrudPredictionsGet(){return Vi(Fi,{method:"GET",url:"/crud/predictions"})}static createPredictionCrudPredictionsPost(e){return Vi(Fi,{method:"POST",url:"/crud/predictions",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getPredictionCrudPredictionsPredictionIdGet(e){return Vi(Fi,{method:"GET",url:"/crud/predictions/{predictionId}",path:{predictionId:e},errors:{422:"Validation Error"}})}static deletePredictionCrudPredictionsPredictionIdDelete(e){return Vi(Fi,{method:"DELETE",url:"/crud/predictions/{predictionId}",path:{predictionId:e},errors:{422:"Validation Error"}})}static getDatasetsCrudDatasetsGet(){return Vi(Fi,{method:"GET",url:"/crud/datasets"})}static createDatasetCrudDatasetsPost(e){return Vi(Fi,{method:"POST",url:"/crud/datasets",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getDatasetCrudDatasetsDatasetIdGet(e){return Vi(Fi,{method:"GET",url:"/crud/datasets/{datasetId}",path:{datasetId:e},errors:{422:"Validation Error"}})}static deleteDatasetCrudDatasetsDatasetIdDelete(e){return Vi(Fi,{method:"DELETE",url:"/crud/datasets/{datasetId}",path:{datasetId:e},errors:{422:"Validation Error"}})}static createDatasetCsvCrudDatasetsCsvFilePost(e){return Vi(Fi,{method:"POST",url:"/crud/datasets/csvFile",formData:e,mediaType:"multipart/form-data",errors:{422:"Validation Error"}})}static listModelsCrudModelsGet(){return Vi(Fi,{method:"GET",url:"/crud/models"})}static listModelsFromModelTemplatesCrudModelsFromModelTemplatesGet(){return Vi(Fi,{method:"GET",url:"/crud/models-from-model-templates"})}static listModelTemplatesCrudModelTemplatesGet(){return Vi(Fi,{method:"GET",url:"/crud/modelTemplates"})}static debugEntryCrudDebugPost(){return Vi(Fi,{method:"POST",url:"/crud/debug"})}static getDebugEntryCrudDebugDebugIdGet(e){return Vi(Fi,{method:"GET",url:"/crud/debug/{debugId}",path:{debugId:e},errors:{422:"Validation Error"}})}static listFeatureTypesCrudFeatureSourcesGet(){return Vi(Fi,{method:"GET",url:"/crud/feature-sources"})}}class B3{static faviconfaviconIcoGet(){return Vi(Fi,{method:"GET",url:"favicon.ico"})}static predictPredictPost(e){return Vi(Fi,{method:"POST",url:"/predict",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static evaluateEvaluatePost(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Vi(Fi,{method:"POST",url:"/evaluate",query:{n_splits:t,stride:n},body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static listModelsListModelsGet(){return Vi(Fi,{method:"GET",url:"/list-models"})}static listModelTemplatesListModelTemplatesGet(){return Vi(Fi,{method:"GET",url:"/list-model-templates"})}static listFeaturesListFeaturesGet(){return Vi(Fi,{method:"GET",url:"/list-features"})}static getResultsGetResultsGet(){return Vi(Fi,{method:"GET",url:"/get-results"})}static getEvaluationResultsGetEvaluationResultsGet(){return Vi(Fi,{method:"GET",url:"/get-evaluation-results"})}static getExceptionGetExceptionGet(){return Vi(Fi,{method:"GET",url:"/get-exception"})}static cancelCancelPost(){return Vi(Fi,{method:"POST",url:"/cancel"})}static getStatusStatusGet(){return Vi(Fi,{method:"GET",url:"/status"})}static healthHealthGet(){return Vi(Fi,{method:"GET",url:"/health"})}static versionVersionGet(){return Vi(Fi,{method:"GET",url:"/version"})}static isCompatibleIsCompatibleGet(e){return Vi(Fi,{method:"GET",url:"/is-compatible",query:{modelling_app_version:e},errors:{422:"Validation Error"}})}static systemInfoSystemInfoGet(){return Vi(Fi,{method:"GET",url:"/system-info"})}}class V1{static listJobsJobsGet(){return Vi(Fi,{method:"GET",url:"/jobs"})}static getJobStatusJobsJobIdGet(e){return Vi(Fi,{method:"GET",url:"/jobs/{job_id}",path:{job_id:e},errors:{422:"Validation Error"}})}static deleteJobJobsJobIdDelete(e){return Vi(Fi,{method:"DELETE",url:"/jobs/{job_id}",path:{job_id:e},errors:{422:"Validation Error"}})}static getLogsJobsJobIdLogsGet(e){return Vi(Fi,{method:"GET",url:"/jobs/{job_id}/logs",path:{job_id:e},errors:{422:"Validation Error"}})}static getPredictionResultJobsJobIdPredictionResultGet(e){return Vi(Fi,{method:"GET",url:"/jobs/{job_id}/prediction_result",path:{job_id:e},errors:{422:"Validation Error"}})}static getEvaluationResultJobsJobIdEvaluationResultGet(e){return Vi(Fi,{method:"GET",url:"/jobs/{job_id}/evaluation_result",path:{job_id:e},errors:{422:"Validation Error"}})}static getDatabaseResultJobsJobIdDatabaseResultGet(e){return Vi(Fi,{method:"GET",url:"/jobs/{job_id}/database_result",path:{job_id:e},errors:{422:"Validation Error"}})}}function $3(i,e){const t=n=>{if(n.includes("W")){const[s,l]=n.split("W").map(Number),u=new Date(s,0,1),r=(l-1)*7;return new Date(u.setDate(u.getDate()+r))}else{const s=Number(n.slice(0,4)),l=Number(n.slice(4,6))-1;return new Date(s,l)}};return t(i).getTime()-t(e).getTime()}function JF(i,e){var t;const n=e.map(w=>w.pe).sort($3),s=n.map(w=>{var v,T;return(v=(T=e.find(S=>S.pe===w))===null||T===void 0?void 0:T.value)!==null&&v!==void 0?v:null}),l=(w,v)=>{if(!v)return new Map;const T=new Map;for(let S=0;S<w.length;S++)T.set(w[S],v[S]);return T},u=l(i.periods,i.averages.slice()),r=l(i.periods,i.ranges.slice()),p=l(i.periods,(t=i.midranges)===null||t===void 0?void 0:t.slice()),f=(w,v)=>w.map(T=>{var S;return(S=v.get(T))!==null&&S!==void 0?S:null}),g=f(n,u),b=f(n,r),y=f(n,p);return{periods:n,ranges:b,averages:g,realValues:s,midranges:y}}const eB=(i,e,t)=>{const n=Array.from(new Set(i.map(g=>g.quantile))).sort(),s=n[0],l=n[1],u=n[n.length-2],r=n[n.length-1],p=g=>g.quantile===s?"quantile_low":g.quantile===r?"quantile_high":g.quantile===.5?"median":g.quantile===l?"quantile_mid_low":g.quantile===u?"quantile_mid_high":"unknown",f=Array.from(new Set(i.map(g=>g.modelName||t)));return Array.from(new Set(i.map(g=>g.splitPeriod))).map(g=>({splitPoint:g,evaluation:Array.from(new Set(i.map(b=>b.orgUnit))).map(b=>({orgUnitName:b,orgUnitId:b,models:f.map(y=>{const w=tB(i.filter(T=>T.orgUnit===b&&T.splitPeriod===g&&((T==null?void 0:T.modelName)||t)===y),p),v=JF(w,e.filter(T=>T.ou===b));return{modelName:y,data:v}})}))}))};function tB(i,e){const t=Array.from(new Set(i.map(r=>r.period))).sort($3),n=[],s=[],l=[];return t.forEach(r=>{var p,f,g,b,y;const w=((p=i.find(x=>x.period===r&&e(x)==="quantile_low"))===null||p===void 0?void 0:p.value)||0,v=((f=i.find(x=>x.period===r&&e(x)==="quantile_high"))===null||f===void 0?void 0:f.value)||0,T=((g=i.find(x=>x.period===r&&e(x)==="median"))===null||g===void 0?void 0:g.value)||0,S=((b=i.find(x=>x.period===r&&e(x)==="quantile_mid_high"))===null||b===void 0?void 0:b.value)||0,E=((y=i.find(x=>x.period===r&&e(x)==="quantile_mid_low"))===null||y===void 0?void 0:y.value)||0;n.push([w,v]),s.push([T]),l.push([E,S])}),{periods:t,ranges:n,averages:s,midranges:l}}function iB(i){return Array.from(new Set(i.map(e=>e.splitPeriod)))}const nB=i=>{const{enabled:e,wrapperClassName:t,children:n,...s}=i;return e?fe.createElement(Vy,s,l=>{let{onMouseOver:u,onMouseOut:r,ref:p}=l;return fe.createElement("span",{className:t,ref:f=>{f&&(f.onpointerenter=u,f.onpointerleave=r,p.current=f)}},n)}):n},U3=i=>{if(!i)return"NA";if(i.length==4)return i;if(i.length==6){const e=i.slice(0,4),t=i.slice(4,6);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(t)-1]} ${e}`}if(i.length==5){const e=i.slice(0,4);return`Week ${i.slice(5,6)} ${e}`}};function rB(i){Uu.charts.forEach(e=>{e&&e.xAxis[0].setExtremes(i.min,i.max)})}const sB=i=>[{name:"Real Cases",data:i.realValues,zIndex:4,lineWidth:2.5,type:"spline",color:"#f68000",marker:{enabled:!1,lineWidth:2}},{name:"Predicted Cases",type:"line",color:"#004bbd",data:i.averages.slice(),zIndex:3,opacity:1,lineWidth:2.5,marker:{enabled:!1}},{name:"Quantiles Outer",data:i.ranges.slice(),type:"arearange",lineWidth:0,color:"#c4dcf2",fillOpacity:1,zIndex:0,marker:{enabled:!1}},{name:"Quantiles Middle",data:i.midranges.slice(),type:"arearange",lineWidth:1,color:"#9bbdff",fillOpacity:1,zIndex:1,marker:{enabled:!1}}],aB=(i,e,t)=>({title:{text:""},subtitle:{text:e?"Model: "+e:"",align:"left"},chart:{zoomType:"x"},xAxis:{categories:i.periods,labels:{enabled:!0,formatter:function(){return U3(this.value)},style:{fontSize:"0.9rem"}},events:t&&{afterSetExtremes:rB},title:{text:"Period"}},yAxis:{title:{text:null},min:0},tooltip:{crosshairs:!0,shared:!0,valueSuffix:" cases"},plotOptions:{series:{animation:{duration:0}}},series:sB(i)}),oB=i=>{let{data:e,modelName:t,syncZoom:n}=i;const[s,l]=$e.useState(!1);return $e.useEffect(()=>{l(!0)},[e]),$e.useEffect(()=>{s&&l(!1)},[s]),fe.createElement(fe.Fragment,null,!s&&fe.createElement(S3,{highcharts:Uu,options:aB(e,t,n)}))},lB="_title_4ki8g_1",cB="_comparionBox_4ki8g_7",uB="_comparionBoxSideBySide_4ki8g_15",dB="_comparionBoxSideBySideItem_4ki8g_22",wg={title:lB,comparionBox:cB,comparionBoxSideBySide:uB,comparionBoxSideBySideItem:dB},aT=i=>{let{orgUnitsData:e}=i;return fe.createElement("div",{className:wg.comparionBox},fe.createElement("div",{className:wg.title},e.orgUnitName),fe.createElement("div",{className:wg.comparionBoxSideBySide},e.models.map((t,n)=>fe.createElement("div",{key:n,className:wg.comparionBoxSideBySideItem},fe.createElement(oB,{syncZoom:e.models.length>1,data:t.data,modelName:t.modelName})))))},fx=0,Pc=1,vh=2,V3=4;function G3(i,e){return t=>i(e(t))}function hB(i,e){return e(i)}function H3(i,e){return t=>i(e,t)}function oT(i,e){return()=>i(e)}function mx(i,e){return e(i),i}function Mr(...i){return i}function pB(i){i()}function lT(i){return()=>i}function fB(...i){return()=>{i.map(pB)}}function G1(i){return i!==void 0}function _h(){}function er(i,e){return i(Pc,e)}function Tn(i,e){i(fx,e)}function H1(i){i(vh)}function Zs(i){return i(V3)}function Ni(i,e){return er(i,H3(e,fx))}function Zo(i,e){const t=i(Pc,n=>{t(),e(n)});return t}function On(){const i=[];return(e,t)=>{switch(e){case vh:i.splice(0,i.length);return;case Pc:return i.push(t),()=>{const n=i.indexOf(t);n>-1&&i.splice(n,1)};case fx:i.slice().forEach(n=>{n(t)});return;default:throw new Error(`unrecognized action ${e}`)}}}function ci(i){let e=i;const t=On();return(n,s)=>{switch(n){case Pc:s(e);break;case fx:e=s;break;case V3:return e}return t(n,s)}}function mB(i){let e,t;const n=()=>e&&e();return function(s,l){switch(s){case Pc:return l?t===l?void 0:(n(),t=l,e=er(i,l),e):(n(),_h);case vh:n(),t=null;return;default:throw new Error(`unrecognized action ${s}`)}}}function Ha(i){return mx(On(),e=>Ni(i,e))}function ma(i,e){return mx(ci(e),t=>Ni(i,t))}function gB(...i){return e=>i.reduceRight(hB,e)}function Wt(i,...e){const t=gB(...e);return(n,s)=>{switch(n){case Pc:return er(i,t(s));case vh:H1(i);return}}}function q3(i,e){return i===e}function Er(i=q3){let e;return t=>n=>{i(e,n)||(e=n,t(n))}}function on(i){return e=>t=>{i(t)&&e(t)}}function Ai(i){return e=>G3(e,i)}function jo(i){return e=>()=>e(i)}function Bo(i,e){return t=>n=>t(e=i(e,n))}function ah(i){return e=>t=>{i>0?i--:e(t)}}function fc(i){let e=null,t;return n=>s=>{e=s,!t&&(t=setTimeout(()=>{t=void 0,n(e)},i))}}function cT(i){let e,t;return n=>s=>{e=s,t&&clearTimeout(t),t=setTimeout(()=>{n(e)},i)}}function En(...i){const e=new Array(i.length);let t=0,n=null;const s=Math.pow(2,i.length)-1;return i.forEach((l,u)=>{const r=Math.pow(2,u);er(l,p=>{const f=t;t=t|r,e[u]=p,f!==s&&t===s&&n&&(n(),n=null)})}),l=>u=>{const r=()=>l([u].concat(e));t===s?r():n=r}}function uT(...i){return function(e,t){switch(e){case Pc:return fB(...i.map(n=>er(n,t)));case vh:return;default:throw new Error(`unrecognized action ${e}`)}}}function hn(i,e=q3){return Wt(i,Er(e))}function fs(...i){const e=On(),t=new Array(i.length);let n=0;const s=Math.pow(2,i.length)-1;return i.forEach((l,u)=>{const r=Math.pow(2,u);er(l,p=>{t[u]=p,n=n|r,n===s&&Tn(e,t)})}),function(l,u){switch(l){case Pc:return n===s&&u(t),er(e,u);case vh:return H1(e);default:throw new Error(`unrecognized action ${l}`)}}}function tr(i,e=[],{singleton:t}={singleton:!0}){return{id:yB(),constructor:i,dependencies:e,singleton:t}}const yB=()=>Symbol();function xB(i){const e=new Map,t=({id:n,constructor:s,dependencies:l,singleton:u})=>{if(u&&e.has(n))return e.get(n);const r=s(l.map(p=>t(p)));return u&&e.set(n,r),r};return t(i)}function bB(i,e){const t={},n={};let s=0;const l=i.length;for(;s<l;)n[i[s]]=1,s+=1;for(const u in e)n.hasOwnProperty(u)||(t[u]=e[u]);return t}const Tg=typeof document<"u"?fe.useLayoutEffect:fe.useEffect;function W3(i,e,t){const n=Object.keys(e.required||{}),s=Object.keys(e.optional||{}),l=Object.keys(e.methods||{}),u=Object.keys(e.events||{}),r=fe.createContext({});function p(E,x){E.propsReady&&Tn(E.propsReady,!1);for(const A of n){const D=E[e.required[A]];Tn(D,x[A])}for(const A of s)if(A in x){const D=E[e.optional[A]];Tn(D,x[A])}E.propsReady&&Tn(E.propsReady,!0)}function f(E){return l.reduce((x,A)=>(x[A]=D=>{const C=E[e.methods[A]];Tn(C,D)},x),{})}function g(E){return u.reduce((x,A)=>(x[A]=mB(E[e.events[A]]),x),{})}const b=fe.forwardRef((E,x)=>{const{children:A,...D}=E,[C]=fe.useState(()=>mx(xB(i),W=>p(W,D))),[I]=fe.useState(oT(g,C));Tg(()=>{for(const W of u)W in D&&er(I[W],D[W]);return()=>{Object.values(I).map(H1)}},[D,I,C]),Tg(()=>{p(C,D)}),fe.useImperativeHandle(x,lT(f(C)));const N=t;return he.jsx(r.Provider,{value:C,children:t?he.jsx(N,{...bB([...n,...s,...u],D),children:A}):A})}),y=E=>fe.useCallback(H3(Tn,fe.useContext(r)[E]),[E]),w=E=>{const A=fe.useContext(r)[E],D=fe.useCallback(C=>er(A,C),[A]);return fe.useSyncExternalStore(D,()=>Zs(A),()=>Zs(A))},v=E=>{const A=fe.useContext(r)[E],[D,C]=fe.useState(oT(Zs,A));return Tg(()=>er(A,I=>{I!==D&&C(lT(I))}),[A,D]),D},T=fe.version.startsWith("18")?w:v;return{Component:b,usePublisher:y,useEmitterValue:T,useEmitter:(E,x)=>{const D=fe.useContext(r)[E];Tg(()=>er(D,x),[x,D])}}}const Y3=typeof document<"u"?fe.useLayoutEffect:fe.useEffect;var qa=(i=>(i[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=3]="ERROR",i))(qa||{});const vB={0:"debug",1:"log",2:"warn",3:"error"},_B=()=>typeof globalThis>"u"?window:globalThis,Ic=tr(()=>{const i=ci(3);return{log:ci((t,n,s=1)=>{var l;const u=(l=_B().VIRTUOSO_LOG_LEVEL)!=null?l:Zs(i);s>=u&&console[vB[s]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,n)}),logLevel:i}},[],{singleton:!0});function q1(i,e,t){const n=fe.useRef(null);let s=l=>{};if(typeof ResizeObserver<"u"){const l=fe.useMemo(()=>new ResizeObserver(u=>{const r=()=>{const p=u[0].target;p.offsetParent!==null&&i(p)};t?r():requestAnimationFrame(r)}),[i]);s=u=>{u&&e?(l.observe(u),n.current=u):(n.current&&l.unobserve(n.current),n.current=null)}}return{ref:n,callbackRef:s}}function Vu(i,e,t){return q1(i,e,t).callbackRef}function wB(i,e,t,n,s,l,u,r,p){const f=fe.useCallback(g=>{const b=TB(g.children,e,r?"offsetWidth":"offsetHeight",s);let y=g.parentElement;for(;!y.dataset.virtuosoScroller;)y=y.parentElement;const w=y.lastElementChild.dataset.viewportType==="window",v=u?r?u.scrollLeft:u.scrollTop:w?r?window.pageXOffset||document.documentElement.scrollLeft:window.pageYOffset||document.documentElement.scrollTop:r?y.scrollLeft:y.scrollTop,T=u?r?u.scrollWidth:u.scrollHeight:w?r?document.documentElement.scrollWidth:document.documentElement.scrollHeight:r?y.scrollWidth:y.scrollHeight,S=u?r?u.offsetWidth:u.offsetHeight:w?r?window.innerWidth:window.innerHeight:r?y.offsetWidth:y.offsetHeight;n({scrollTop:Math.max(v,0),scrollHeight:T,viewportHeight:S}),l==null||l(r?dT("column-gap",getComputedStyle(g).columnGap,s):dT("row-gap",getComputedStyle(g).rowGap,s)),b!==null&&i(b)},[i,e,s,l,u,n]);return q1(f,t,p)}function TB(i,e,t,n){const s=i.length;if(s===0)return null;const l=[];for(let u=0;u<s;u++){const r=i.item(u);if(!r||r.dataset.index===void 0)continue;const p=parseInt(r.dataset.index),f=parseFloat(r.dataset.knownSize),g=e(r,t);if(g===0&&n("Zero-sized element, this should not happen",{child:r},qa.ERROR),g===f)continue;const b=l[l.length-1];l.length===0||b.size!==g||b.endIndex!==p-1?l.push({startIndex:p,endIndex:p,size:g}):l[l.length-1].endIndex++}return l}function dT(i,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${i} was not resolved to pixel value correctly`,e,qa.WARN),e==="normal"?0:parseInt(e??"0",10)}function Tc(i,e){return Math.round(i.getBoundingClientRect()[e])}function Z3(i,e){return Math.abs(i-e)<1.01}function X3(i,e,t,n=_h,s,l){const u=fe.useRef(null),r=fe.useRef(null),p=fe.useRef(null),f=fe.useCallback(y=>{const w=y.target,v=w===window||w===document,T=l?v?window.pageXOffset||document.documentElement.scrollLeft:w.scrollLeft:v?window.pageYOffset||document.documentElement.scrollTop:w.scrollTop,S=l?v?document.documentElement.scrollWidth:w.scrollWidth:v?document.documentElement.scrollHeight:w.scrollHeight,E=l?v?window.innerWidth:w.offsetWidth:v?window.innerHeight:w.offsetHeight,x=()=>{i({scrollTop:Math.max(T,0),scrollHeight:S,viewportHeight:E})};y.suppressFlushSync?x():g5.flushSync(x),r.current!==null&&(T===r.current||T<=0||T===S-E)&&(r.current=null,e(!0),p.current&&(clearTimeout(p.current),p.current=null))},[i,e]);fe.useEffect(()=>{const y=s||u.current;return n(s||u.current),f({target:y,suppressFlushSync:!0}),y.addEventListener("scroll",f,{passive:!0}),()=>{n(null),y.removeEventListener("scroll",f)}},[u,f,t,n,s]);function g(y){const w=u.current;if(!w||(l?"offsetWidth"in w&&w.offsetWidth===0:"offsetHeight"in w&&w.offsetHeight===0))return;const v=y.behavior==="smooth";let T,S,E;w===window?(S=Math.max(Tc(document.documentElement,l?"width":"height"),l?document.documentElement.scrollWidth:document.documentElement.scrollHeight),T=l?window.innerWidth:window.innerHeight,E=l?document.documentElement.scrollLeft:document.documentElement.scrollTop):(S=w[l?"scrollWidth":"scrollHeight"],T=Tc(w,l?"width":"height"),E=w[l?"scrollLeft":"scrollTop"]);const x=S-T;if(y.top=Math.ceil(Math.max(Math.min(x,y.top),0)),Z3(T,S)||y.top===E){i({scrollTop:E,scrollHeight:S,viewportHeight:T}),v&&e(!0);return}v?(r.current=y.top,p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{p.current=null,r.current=null,e(!0)},1e3)):r.current=null,l&&(y={left:y.top,behavior:y.behavior}),w.scrollTo(y)}function b(y){l&&(y={left:y.top,behavior:y.behavior}),u.current.scrollBy(y)}return{scrollerRef:u,scrollByCallback:b,scrollToCallback:g}}const ba=tr(()=>{const i=On(),e=On(),t=ci(0),n=On(),s=ci(0),l=On(),u=On(),r=ci(0),p=ci(0),f=ci(0),g=ci(0),b=On(),y=On(),w=ci(!1),v=ci(!1),T=ci(!1);return Ni(Wt(i,Ai(({scrollTop:S})=>S)),e),Ni(Wt(i,Ai(({scrollHeight:S})=>S)),u),Ni(e,s),{scrollContainerState:i,scrollTop:e,viewportHeight:l,headerHeight:r,fixedHeaderHeight:p,fixedFooterHeight:f,footerHeight:g,scrollHeight:u,smoothScrollTargetReached:n,horizontalDirection:v,skipAnimationFrameInResizeObserver:T,scrollTo:b,scrollBy:y,statefulScrollTop:s,deviation:t,scrollingInProgress:w}},[],{singleton:!0}),hf={lvl:0};function K3(i,e,t,n=hf,s=hf){return{k:i,v:e,lvl:t,l:n,r:s}}function hr(i){return i===hf}function Xd(){return hf}function nv(i,e){if(hr(i))return hf;const{k:t,l:n,r:s}=i;if(e===t){if(hr(n))return s;if(hr(s))return n;{const[l,u]=Q3(n);return Hg(ds(i,{k:l,v:u,l:J3(n)}))}}else return e<t?Hg(ds(i,{l:nv(n,e)})):Hg(ds(i,{r:nv(s,e)}))}function pf(i,e){if(!hr(i))return e===i.k?i.v:e<i.k?pf(i.l,e):pf(i.r,e)}function Co(i,e,t="k"){if(hr(i))return[-1/0,void 0];if(Number(i[t])===e)return[i.k,i.v];if(Number(i[t])<e){const n=Co(i.r,e,t);return n[0]===-1/0?[i.k,i.v]:n}return Co(i.l,e,t)}function Ua(i,e,t){return hr(i)?K3(e,t,1):e===i.k?ds(i,{k:e,v:t}):e<i.k?hT(ds(i,{l:Ua(i.l,e,t)})):hT(ds(i,{r:Ua(i.r,e,t)}))}function rv(i,e,t){if(hr(i))return[];const{k:n,v:s,l,r:u}=i;let r=[];return n>e&&(r=r.concat(rv(l,e,t))),n>=e&&n<=t&&r.push({k:n,v:s}),n<=t&&(r=r.concat(rv(u,e,t))),r}function gu(i){return hr(i)?[]:[...gu(i.l),{k:i.k,v:i.v},...gu(i.r)]}function Q3(i){return hr(i.r)?[i.k,i.v]:Q3(i.r)}function J3(i){return hr(i.r)?i.l:Hg(ds(i,{r:J3(i.r)}))}function ds(i,e){return K3(e.k!==void 0?e.k:i.k,e.v!==void 0?e.v:i.v,e.lvl!==void 0?e.lvl:i.lvl,e.l!==void 0?e.l:i.l,e.r!==void 0?e.r:i.r)}function Z0(i){return hr(i)||i.lvl>i.r.lvl}function hT(i){return sv(tk(i))}function Hg(i){const{l:e,r:t,lvl:n}=i;if(t.lvl>=n-1&&e.lvl>=n-1)return i;if(n>t.lvl+1){if(Z0(e))return tk(ds(i,{lvl:n-1}));if(!hr(e)&&!hr(e.r))return ds(e.r,{l:ds(e,{r:e.r.l}),r:ds(i,{l:e.r.r,lvl:n-1}),lvl:n});throw new Error("Unexpected empty nodes")}else{if(Z0(i))return sv(ds(i,{lvl:n-1}));if(!hr(t)&&!hr(t.l)){const s=t.l,l=Z0(s)?t.lvl-1:t.lvl;return ds(s,{l:ds(i,{r:s.l,lvl:n-1}),r:sv(ds(t,{l:s.r,lvl:l})),lvl:s.lvl+1})}else throw new Error("Unexpected empty nodes")}}function gx(i,e,t){if(hr(i))return[];const n=Co(i,e)[0];return CB(rv(i,n,t))}function ek(i,e){const t=i.length;if(t===0)return[];let{index:n,value:s}=e(i[0]);const l=[];for(let u=1;u<t;u++){const{index:r,value:p}=e(i[u]);l.push({start:n,end:r-1,value:s}),n=r,s=p}return l.push({start:n,end:1/0,value:s}),l}function CB(i){return ek(i,({k:e,v:t})=>({index:e,value:t}))}function sv(i){const{r:e,lvl:t}=i;return!hr(e)&&!hr(e.r)&&e.lvl===t&&e.r.lvl===t?ds(e,{l:ds(i,{r:e.l}),lvl:t+1}):i}function tk(i){const{l:e}=i;return!hr(e)&&e.lvl===i.lvl?ds(e,{r:ds(i,{l:e.r})}):i}function yy(i,e,t,n=0){let s=i.length-1;for(;n<=s;){const l=Math.floor((n+s)/2),u=i[l],r=t(u,e);if(r===0)return l;if(r===-1){if(s-n<2)return l-1;s=l-1}else{if(s===n)return l;n=l+1}}throw new Error(`Failed binary finding record in array - ${i.join(",")}, searched for ${e}`)}function ik(i,e,t){return i[yy(i,e,t)]}function SB(i,e,t,n){const s=yy(i,e,n),l=yy(i,t,n,s);return i.slice(s,l+1)}const W1=tr(()=>({recalcInProgress:ci(!1)}),[],{singleton:!0});function EB(i){const{size:e,startIndex:t,endIndex:n}=i;return s=>s.start===t&&(s.end===n||s.end===1/0)&&s.value===e}function pT(i,e){let t=0,n=0;for(;t<i;)t+=e[n+1]-e[n]-1,n++;return n-(t===i?0:1)}function kB(i,e){let t=hr(i)?0:1/0;for(const n of e){const{size:s,startIndex:l,endIndex:u}=n;if(t=Math.min(t,l),hr(i)){i=Ua(i,0,s);continue}const r=gx(i,l-1,u+1);if(r.some(EB(n)))continue;let p=!1,f=!1;for(const{start:g,end:b,value:y}of r)p?(u>=g||s===y)&&(i=nv(i,g)):(f=y!==s,p=!0),b>u&&u>=g&&y!==s&&(i=Ua(i,u+1,y));f&&(i=Ua(i,l,s))}return[i,t]}function AB(){return{offsetTree:[],sizeTree:Xd(),groupOffsetTree:Xd(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]}}function Y1({index:i},e){return e===i?0:e<i?-1:1}function MB({offset:i},e){return e===i?0:e<i?-1:1}function PB(i){return{index:i.index,value:i}}function IB(i,e,t,n=0){return n>0&&(e=Math.max(e,ik(i,n,Y1).offset)),ek(SB(i,e,t,MB),PB)}function av(i,e,t,n){let s=i,l=0,u=0,r=0,p=0;if(e!==0){p=yy(s,e-1,Y1),r=s[p].offset;const g=Co(t,e-1);l=g[0],u=g[1],s.length&&s[p].size===Co(t,e)[1]&&(p-=1),s=s.slice(0,p+1)}else s=[];for(const{start:f,value:g}of gx(t,e,1/0)){const b=f-l,y=b*u+r+b*n;s.push({offset:y,size:g,index:f}),l=f,r=y,u=g}return{offsetTree:s,lastIndex:l,lastOffset:r,lastSize:u}}function DB(i,[e,t,n,s]){e.length>0&&n("received item sizes",e,qa.DEBUG);const l=i.sizeTree;let u=l,r=0;if(t.length>0&&hr(l)&&e.length===2){const y=e[0].size,w=e[1].size;u=t.reduce((v,T)=>Ua(Ua(v,T,y),T+1,w),u)}else[u,r]=kB(u,e);if(u===l)return i;const{offsetTree:p,lastIndex:f,lastSize:g,lastOffset:b}=av(i.offsetTree,r,u,s);return{sizeTree:u,offsetTree:p,lastIndex:f,lastOffset:b,lastSize:g,groupOffsetTree:t.reduce((y,w)=>Ua(y,w,ff(w,p,s)),Xd()),groupIndices:t}}function ff(i,e,t){if(e.length===0)return 0;const{offset:n,index:s,size:l}=ik(e,i,Y1),u=i-s,r=l*u+(u-1)*t+n;return r>0?r+t:r}function RB(i){return typeof i.groupIndex<"u"}function nk(i,e,t){if(RB(i))return e.groupIndices[i.groupIndex]+1;{const n=i.index==="LAST"?t:i.index;let s=rk(n,e);return s=Math.max(0,s,Math.min(t,s)),s}}function rk(i,e){if(!yx(e))return i;let t=0;for(;e.groupIndices[t]<=i+t;)t++;return i+t}function yx(i){return!hr(i.groupOffsetTree)}function LB(i){return gu(i).map(({k:e,v:t},n,s)=>{const l=s[n+1],u=l?l.k-1:1/0;return{startIndex:e,endIndex:u,size:t}})}const zB={offsetHeight:"height",offsetWidth:"width"},il=tr(([{log:i},{recalcInProgress:e}])=>{const t=On(),n=On(),s=ma(n,0),l=On(),u=On(),r=ci(0),p=ci([]),f=ci(void 0),g=ci(void 0),b=ci((C,I)=>Tc(C,zB[I])),y=ci(void 0),w=ci(0),v=AB(),T=ma(Wt(t,En(p,i,w),Bo(DB,v),Er()),v),S=ma(Wt(p,Er(),Bo((C,I)=>({prev:C.current,current:I}),{prev:[],current:[]}),Ai(({prev:C})=>C)),[]);Ni(Wt(p,on(C=>C.length>0),En(T,w),Ai(([C,I,N])=>{const W=C.reduce((Y,X,O)=>Ua(Y,X,ff(X,I.offsetTree,N)||O),Xd());return{...I,groupIndices:C,groupOffsetTree:W}})),T),Ni(Wt(n,En(T),on(([C,{lastIndex:I}])=>C<I),Ai(([C,{lastIndex:I,lastSize:N}])=>[{startIndex:C,endIndex:I,size:N}])),t),Ni(f,g);const E=ma(Wt(f,Ai(C=>C===void 0)),!0);Ni(Wt(g,on(C=>C!==void 0&&hr(Zs(T).sizeTree)),Ai(C=>[{startIndex:0,endIndex:0,size:C}])),t);const x=Ha(Wt(t,En(T),Bo(({sizes:C},[I,N])=>({changed:N!==C,sizes:N}),{changed:!1,sizes:v}),Ai(C=>C.changed)));er(Wt(r,Bo((C,I)=>({diff:C.prev-I,prev:I}),{diff:0,prev:0}),Ai(C=>C.diff)),C=>{const{groupIndices:I}=Zs(T);if(C>0)Tn(e,!0),Tn(l,C+pT(C,I));else if(C<0){const N=Zs(S);N.length>0&&(C-=pT(-C,N)),Tn(u,C)}}),er(Wt(r,En(i)),([C,I])=>{C<0&&I("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:r},qa.ERROR)});const A=Ha(l);Ni(Wt(l,En(T),Ai(([C,I])=>{const N=I.groupIndices.length>0,W=[],Y=I.lastSize;if(N){const X=pf(I.sizeTree,0);let O=0,V=0;for(;O<C;){const R=I.groupIndices[V],G=I.groupIndices.length===V+1?1/0:I.groupIndices[V+1]-R-1;W.push({startIndex:R,endIndex:R,size:X}),W.push({startIndex:R+1,endIndex:R+1+G-1,size:Y}),V++,O+=G+1}const $=gu(I.sizeTree);return O!==C&&$.shift(),$.reduce((R,{k:G,v:U})=>{let B=R.ranges;return R.prevSize!==0&&(B=[...R.ranges,{startIndex:R.prevIndex,endIndex:G+C-1,size:R.prevSize}]),{ranges:B,prevIndex:G+C,prevSize:U}},{ranges:W,prevIndex:C,prevSize:0}).ranges}return gu(I.sizeTree).reduce((X,{k:O,v:V})=>({ranges:[...X.ranges,{startIndex:X.prevIndex,endIndex:O+C-1,size:X.prevSize}],prevIndex:O+C,prevSize:V}),{ranges:[],prevIndex:0,prevSize:Y}).ranges})),t);const D=Ha(Wt(u,En(T,w),Ai(([C,{offsetTree:I},N])=>{const W=-C;return ff(W,I,N)})));return Ni(Wt(u,En(T,w),Ai(([C,I,N])=>{if(I.groupIndices.length>0){if(hr(I.sizeTree))return I;let Y=Xd();const X=Zs(S);let O=0,V=0,$=0;for(;O<-C;){$=X[V];const R=X[V+1]-$-1;V++,O+=R+1}if(Y=gu(I.sizeTree).reduce((R,{k:G,v:U})=>Ua(R,Math.max(0,G+C),U),Y),O!==-C){const R=pf(I.sizeTree,$);Y=Ua(Y,0,R);const G=Co(I.sizeTree,-C+1)[1];Y=Ua(Y,1,G)}return{...I,sizeTree:Y,...av(I.offsetTree,0,Y,N)}}else{const Y=gu(I.sizeTree).reduce((X,{k:O,v:V})=>Ua(X,Math.max(0,O+C),V),Xd());return{...I,sizeTree:Y,...av(I.offsetTree,0,Y,N)}}})),T),{data:y,totalCount:n,sizeRanges:t,groupIndices:p,defaultItemSize:g,fixedItemSize:f,unshiftWith:l,shiftWith:u,shiftWithOffset:D,beforeUnshiftWith:A,firstItemIndex:r,gap:w,sizes:T,listRefresh:x,statefulTotalCount:s,trackItemSizes:E,itemSize:b}},Mr(Ic,W1),{singleton:!0}),NB=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function sk(i){const e=typeof i=="number"?{index:i}:i;return e.align||(e.align="start"),(!e.behavior||!NB)&&(e.behavior="auto"),e.offset||(e.offset=0),e}const em=tr(([{sizes:i,totalCount:e,listRefresh:t,gap:n},{scrollingInProgress:s,viewportHeight:l,scrollTo:u,smoothScrollTargetReached:r,headerHeight:p,footerHeight:f,fixedHeaderHeight:g,fixedFooterHeight:b},{log:y}])=>{const w=On(),v=On(),T=ci(0);let S=null,E=null,x=null;function A(){S&&(S(),S=null),x&&(x(),x=null),E&&(clearTimeout(E),E=null),Tn(s,!1)}return Ni(Wt(w,En(i,l,e,T,p,f,y),En(n,g,b),Ai(([[D,C,I,N,W,Y,X,O],V,$,L])=>{const R=sk(D),{align:G,behavior:U,offset:B}=R,H=N-1,q=nk(R,C,H);let se=ff(q,C.offsetTree,V)+Y;G==="end"?(se+=$+Co(C.sizeTree,q)[1]-I+L,q===H&&(se+=X)):G==="center"?se+=($+Co(C.sizeTree,q)[1]-I+L)/2:se-=W,B&&(se+=B);const pe=ne=>{A(),ne?(O("retrying to scroll to",{location:D},qa.DEBUG),Tn(w,D)):(Tn(v,!0),O("list did not change, scroll successful",{},qa.DEBUG))};if(A(),U==="smooth"){let ne=!1;x=er(t,le=>{ne=ne||le}),S=Zo(r,()=>{pe(ne)})}else S=Zo(Wt(t,OB(150)),pe);return E=setTimeout(()=>{A()},1200),Tn(s,!0),O("scrolling from index to",{index:q,top:se,behavior:U},qa.DEBUG),{top:se,behavior:U}})),u),{scrollToIndex:w,scrollTargetReached:v,topListHeight:T}},Mr(il,ba,Ic),{singleton:!0});function OB(i){return e=>{const t=setTimeout(()=>{e(!1)},i);return n=>{n&&(e(!0),clearTimeout(t))}}}const mf="up",Yp="down",jB="none",FB={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},BB=0,tm=tr(([{scrollContainerState:i,scrollTop:e,viewportHeight:t,headerHeight:n,footerHeight:s,scrollBy:l}])=>{const u=ci(!1),r=ci(!0),p=On(),f=On(),g=ci(4),b=ci(BB),y=ma(Wt(uT(Wt(hn(e),ah(1),jo(!0)),Wt(hn(e),ah(1),jo(!1),cT(100))),Er()),!1),w=ma(Wt(uT(Wt(l,jo(!0)),Wt(l,jo(!1),cT(200))),Er()),!1);Ni(Wt(fs(hn(e),hn(b)),Ai(([x,A])=>x<=A),Er()),r),Ni(Wt(r,fc(50)),f);const v=Ha(Wt(fs(i,hn(t),hn(n),hn(s),hn(g)),Bo((x,[{scrollTop:A,scrollHeight:D},C,I,N,W])=>{const Y=A+C-D>-W,X={viewportHeight:C,scrollTop:A,scrollHeight:D};if(Y){let V,$;return A>x.state.scrollTop?(V="SCROLLED_DOWN",$=x.state.scrollTop-A):(V="SIZE_DECREASED",$=x.state.scrollTop-A||x.scrollTopDelta),{atBottom:!0,state:X,atBottomBecause:V,scrollTopDelta:$}}let O;return X.scrollHeight>x.state.scrollHeight?O="SIZE_INCREASED":C<x.state.viewportHeight?O="VIEWPORT_HEIGHT_DECREASING":A<x.state.scrollTop?O="SCROLLING_UPWARDS":O="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:O,state:X}},FB),Er((x,A)=>x&&x.atBottom===A.atBottom))),T=ma(Wt(i,Bo((x,{scrollTop:A,scrollHeight:D,viewportHeight:C})=>{if(Z3(x.scrollHeight,D))return{scrollTop:A,scrollHeight:D,jump:0,changed:!1};{const I=D-(A+C)<1;return x.scrollTop!==A&&I?{scrollHeight:D,scrollTop:A,jump:x.scrollTop-A,changed:!0}:{scrollHeight:D,scrollTop:A,jump:0,changed:!0}}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),on(x=>x.changed),Ai(x=>x.jump)),0);Ni(Wt(v,Ai(x=>x.atBottom)),u),Ni(Wt(u,fc(50)),p);const S=ci(Yp);Ni(Wt(i,Ai(({scrollTop:x})=>x),Er(),Bo((x,A)=>Zs(w)?{direction:x.direction,prevScrollTop:A}:{direction:A<x.prevScrollTop?mf:Yp,prevScrollTop:A},{direction:Yp,prevScrollTop:0}),Ai(x=>x.direction)),S),Ni(Wt(i,fc(50),jo(jB)),S);const E=ci(0);return Ni(Wt(y,on(x=>!x),jo(0)),E),Ni(Wt(e,fc(100),En(y),on(([x,A])=>!!A),Bo(([x,A],[D])=>[A,D],[0,0]),Ai(([x,A])=>A-x)),E),{isScrolling:y,isAtTop:r,isAtBottom:u,atBottomState:v,atTopStateChange:f,atBottomStateChange:p,scrollDirection:S,atBottomThreshold:g,atTopThreshold:b,scrollVelocity:E,lastJumpDueToItemResize:T}},Mr(ba)),Dc=tr(([{log:i}])=>{const e=ci(!1),t=Ha(Wt(e,on(n=>n),Er()));return er(e,n=>{n&&Zs(i)("props updated",{},qa.DEBUG)}),{propsReady:e,didMount:t}},Mr(Ic),{singleton:!0});function Z1(i,e){i==0?e():requestAnimationFrame(()=>Z1(i-1,e))}function X1(i,e){const t=e-1;return typeof i=="number"?i:i.index==="LAST"?t:i.index}const im=tr(([{sizes:i,listRefresh:e,defaultItemSize:t},{scrollTop:n},{scrollToIndex:s,scrollTargetReached:l},{didMount:u}])=>{const r=ci(!0),p=ci(0),f=ci(!0);return Ni(Wt(u,En(p),on(([g,b])=>!!b),jo(!1)),r),Ni(Wt(u,En(p),on(([g,b])=>!!b),jo(!1)),f),er(Wt(fs(e,u),En(r,i,t,f),on(([[,g],b,{sizeTree:y},w,v])=>g&&(!hr(y)||G1(w))&&!b&&!v),En(p)),([,g])=>{Zo(l,()=>{Tn(f,!0)}),Z1(4,()=>{Zo(n,()=>{Tn(r,!0)}),Tn(s,g)})}),{scrolledToInitialItem:r,initialTopMostItemIndex:p,initialItemFinalLocationReached:f}},Mr(il,ba,em,Dc),{singleton:!0});function fT(i){return i?i==="smooth"?"smooth":"auto":!1}const $B=(i,e)=>typeof i=="function"?fT(i(e)):e&&fT(i),UB=tr(([{totalCount:i,listRefresh:e},{isAtBottom:t,atBottomState:n},{scrollToIndex:s},{scrolledToInitialItem:l},{propsReady:u,didMount:r},{log:p},{scrollingInProgress:f}])=>{const g=ci(!1),b=On();let y=null;function w(T){Tn(s,{index:"LAST",align:"end",behavior:T})}er(Wt(fs(Wt(hn(i),ah(1)),r),En(hn(g),t,l,f),Ai(([[T,S],E,x,A,D])=>{let C=S&&A,I="auto";return C&&(I=$B(E,x||D),C=C&&!!I),{totalCount:T,shouldFollow:C,followOutputBehavior:I}}),on(({shouldFollow:T})=>T)),({totalCount:T,followOutputBehavior:S})=>{y&&(y(),y=null),y=Zo(e,()=>{Zs(p)("following output to ",{totalCount:T},qa.DEBUG),w(S),y=null})});function v(T){const S=Zo(n,E=>{T&&!E.atBottom&&E.notAtBottomBecause==="SIZE_INCREASED"&&!y&&(Zs(p)("scrolling to bottom due to increased size",{},qa.DEBUG),w("auto"))});setTimeout(S,100)}return er(Wt(fs(hn(g),i,u),on(([T,,S])=>T&&S),Bo(({value:T},[,S])=>({refreshed:T===S,value:S}),{refreshed:!1,value:0}),on(({refreshed:T})=>T),En(g,i)),([,T])=>{Zs(l)&&v(T!==!1)}),er(b,()=>{v(Zs(g)!==!1)}),er(fs(hn(g),n),([T,S])=>{T&&!S.atBottom&&S.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&w("auto")}),{followOutput:g,autoscrollToBottom:b}},Mr(il,tm,em,im,Dc,Ic,ba));function VB(i){return i.reduce((e,t)=>(e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e),{totalCount:0,groupIndices:[]})}const ak=tr(([{totalCount:i,groupIndices:e,sizes:t},{scrollTop:n,headerHeight:s}])=>{const l=On(),u=On(),r=Ha(Wt(l,Ai(VB)));return Ni(Wt(r,Ai(p=>p.totalCount)),i),Ni(Wt(r,Ai(p=>p.groupIndices)),e),Ni(Wt(fs(n,t,s),on(([p,f])=>yx(f)),Ai(([p,f,g])=>Co(f.groupOffsetTree,Math.max(p-g,0),"v")[0]),Er(),Ai(p=>[p])),u),{groupCounts:l,topItemsIndexes:u}},Mr(il,ba));function gf(i,e){return!!(i&&i[0]===e[0]&&i[1]===e[1])}function ok(i,e){return!!(i&&i.startIndex===e.startIndex&&i.endIndex===e.endIndex)}const xy="top",by="bottom",mT="none";function gT(i,e,t){return typeof i=="number"?t===mf&&e===xy||t===Yp&&e===by?i:0:t===mf?e===xy?i.main:i.reverse:e===by?i.main:i.reverse}function yT(i,e){return typeof i=="number"?i:i[e]||0}const K1=tr(([{scrollTop:i,viewportHeight:e,deviation:t,headerHeight:n,fixedHeaderHeight:s}])=>{const l=On(),u=ci(0),r=ci(0),p=ci(0),f=ma(Wt(fs(hn(i),hn(e),hn(n),hn(l,gf),hn(p),hn(u),hn(s),hn(t),hn(r)),Ai(([g,b,y,[w,v],T,S,E,x,A])=>{const D=g-x,C=S+E,I=Math.max(y-D,0);let N=mT;const W=yT(A,xy),Y=yT(A,by);return w-=x,w+=y+E,v+=y+E,v-=x,w>g+C-W&&(N=mf),v<g-I+b+Y&&(N=Yp),N!==mT?[Math.max(D-y-gT(T,xy,N)-W,0),D-I-E+b+gT(T,by,N)+Y]:null}),on(g=>g!=null),Er(gf)),[0,0]);return{listBoundary:l,overscan:p,topListHeight:u,increaseViewportBy:r,visibleRange:f}},Mr(ba),{singleton:!0});function GB(i,e,t){if(yx(e)){const n=rk(i,e);return[{index:Co(e.groupOffsetTree,n)[0],size:0,offset:0},{index:n,size:0,offset:0,data:t&&t[0]}]}return[{index:i,size:0,offset:0,data:t&&t[0]}]}const X0={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0};function xT(i,e,t){if(i.length===0)return[];if(!yx(e))return i.map(f=>({...f,index:f.index+t,originalIndex:f.index}));const n=i[0].index,s=i[i.length-1].index,l=[],u=gx(e.groupOffsetTree,n,s);let r,p=0;for(const f of i){(!r||r.end<f.index)&&(r=u.shift(),p=e.groupIndices.indexOf(r.start));let g;f.index===r.start?g={type:"group",index:p}:g={index:f.index-(p+1)+t,groupIndex:p},l.push({...g,size:f.size,offset:f.offset,originalIndex:f.index,data:f.data})}return l}function qg(i,e,t,n,s,l){const{lastSize:u,lastOffset:r,lastIndex:p}=s;let f=0,g=0;if(i.length>0){f=i[0].offset;const T=i[i.length-1];g=T.offset+T.size}const b=t-p,y=r+b*u+(b-1)*n,w=f,v=y-g;return{items:xT(i,s,l),topItems:xT(e,s,l),topListHeight:e.reduce((T,S)=>S.size+T,0),offsetTop:f,offsetBottom:v,top:w,bottom:g,totalCount:t,firstItemIndex:l}}function lk(i,e,t,n,s,l){let u=0;if(t.groupIndices.length>0)for(const g of t.groupIndices){if(g-u>=i)break;u++}const r=i+u,p=X1(e,r),f=Array.from({length:r}).map((g,b)=>({index:b+p,size:0,offset:0,data:l[b+p]}));return qg(f,[],r,s,t,n)}const Gu=tr(([{sizes:i,totalCount:e,data:t,firstItemIndex:n,gap:s},l,{visibleRange:u,listBoundary:r,topListHeight:p},{scrolledToInitialItem:f,initialTopMostItemIndex:g},{topListHeight:b},y,{didMount:w},{recalcInProgress:v}])=>{const T=ci([]),S=ci(0),E=On();Ni(l.topItemsIndexes,T);const x=ma(Wt(fs(w,v,hn(u,gf),hn(e),hn(i),hn(g),f,hn(T),hn(n),hn(s),t),on(([I,N,,W,,,,,,,Y])=>{const X=Y&&Y.length!==W;return I&&!N&&!X}),Ai(([,,[I,N],W,Y,X,O,V,$,L,R])=>{const G=Y,{sizeTree:U,offsetTree:B}=G,H=Zs(S);if(W===0)return{...X0,totalCount:W};if(I===0&&N===0)return H===0?{...X0,totalCount:W}:lk(H,X,Y,$,L,R||[]);if(hr(U))return H>0?null:qg(GB(X1(X,W),G,R),[],W,L,G,$);const q=[];if(V.length>0){const ke=V[0],be=V[V.length-1];let Ee=0;for(const K of gx(U,ke,be)){const J=K.value,oe=Math.max(K.start,ke),we=Math.min(K.end,be);for(let ee=oe;ee<=we;ee++)q.push({index:ee,size:J,offset:Ee,data:R&&R[ee]}),Ee+=J}}if(!O)return qg([],q,W,L,G,$);const se=V.length>0?V[V.length-1]+1:0,pe=IB(B,I,N,se);if(pe.length===0)return null;const ne=W-1,le=mx([],ke=>{for(const be of pe){const Ee=be.value;let K=Ee.offset,J=be.start;const oe=Ee.size;if(Ee.offset<I){J+=Math.floor((I-Ee.offset+L)/(oe+L));const ee=J-be.start;K+=ee*oe+ee*L}J<se&&(K+=(se-J)*oe,J=se);const we=Math.min(be.end,ne);for(let ee=J;ee<=we&&!(K>=N);ee++)ke.push({index:ee,size:oe,offset:K,data:R&&R[ee]}),K+=oe+L}});return qg(le,q,W,L,G,$)}),on(I=>I!==null),Er()),X0);Ni(Wt(t,on(G1),Ai(I=>I==null?void 0:I.length)),e),Ni(Wt(x,Ai(I=>I.topListHeight)),b),Ni(b,p),Ni(Wt(x,Ai(I=>[I.top,I.bottom])),r),Ni(Wt(x,Ai(I=>I.items)),E);const A=Ha(Wt(x,on(({items:I})=>I.length>0),En(e,t),on(([{items:I},N])=>I[I.length-1].originalIndex===N-1),Ai(([,I,N])=>[I-1,N]),Er(gf),Ai(([I])=>I))),D=Ha(Wt(x,fc(200),on(({items:I,topItems:N})=>I.length>0&&I[0].originalIndex===N.length),Ai(({items:I})=>I[0].index),Er())),C=Ha(Wt(x,on(({items:I})=>I.length>0),Ai(({items:I})=>{let N=0,W=I.length-1;for(;I[N].type==="group"&&N<W;)N++;for(;I[W].type==="group"&&W>N;)W--;return{startIndex:I[N].index,endIndex:I[W].index}}),Er(ok)));return{listState:x,topItemsIndexes:T,endReached:A,startReached:D,rangeChanged:C,itemsRendered:E,initialItemCount:S,...y}},Mr(il,ak,K1,im,em,tm,Dc,W1),{singleton:!0}),HB=tr(([{sizes:i,firstItemIndex:e,data:t,gap:n},{initialTopMostItemIndex:s},{initialItemCount:l,listState:u},{didMount:r}])=>(Ni(Wt(r,En(l),on(([,p])=>p!==0),En(s,i,e,n,t),Ai(([[,p],f,g,b,y,w=[]])=>lk(p,f,g,b,y,w))),u),{}),Mr(il,im,Gu,Dc),{singleton:!0}),ck=tr(([{scrollVelocity:i}])=>{const e=ci(!1),t=On(),n=ci(!1);return Ni(Wt(i,En(n,e,t),on(([s,l])=>!!l),Ai(([s,l,u,r])=>{const{exit:p,enter:f}=l;if(u){if(p(s,r))return!1}else if(f(s,r))return!0;return u}),Er()),e),er(Wt(fs(e,i,t),En(n)),([[s,l,u],r])=>s&&r&&r.change&&r.change(l,u)),{isSeeking:e,scrollSeekConfiguration:n,scrollVelocity:i,scrollSeekRangeChanged:t}},Mr(tm),{singleton:!0}),qB=tr(([{topItemsIndexes:i}])=>{const e=ci(0);return Ni(Wt(e,on(t=>t>=0),Ai(t=>Array.from({length:t}).map((n,s)=>s))),i),{topItemCount:e}},Mr(Gu)),uk=tr(([{footerHeight:i,headerHeight:e,fixedHeaderHeight:t,fixedFooterHeight:n},{listState:s}])=>{const l=On(),u=ma(Wt(fs(i,n,e,t,s),Ai(([r,p,f,g,b])=>r+p+f+g+b.offsetBottom+b.bottom)),0);return Ni(hn(u),l),{totalListHeight:u,totalListHeightChanged:l}},Mr(ba,Gu),{singleton:!0});function dk(i){let e=!1,t;return()=>(e||(e=!0,t=i()),t)}const WB=dk(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),YB=tr(([{scrollBy:i,scrollTop:e,deviation:t,scrollingInProgress:n},{isScrolling:s,isAtBottom:l,scrollDirection:u,lastJumpDueToItemResize:r},{listState:p},{beforeUnshiftWith:f,shiftWithOffset:g,sizes:b,gap:y},{log:w},{recalcInProgress:v}])=>{const T=Ha(Wt(p,En(r),Bo(([,E,x,A],[{items:D,totalCount:C,bottom:I,offsetBottom:N},W])=>{const Y=I+N;let X=0;return x===C&&E.length>0&&D.length>0&&(D[0].originalIndex===0&&E[0].originalIndex===0||(X=Y-A,X!==0&&(X+=W))),[X,D,C,Y]},[0,[],0,0]),on(([E])=>E!==0),En(e,u,n,l,w,v),on(([,E,x,A,,,D])=>!D&&!A&&E!==0&&x===mf),Ai(([[E],,,,,x])=>(x("Upward scrolling compensation",{amount:E},qa.DEBUG),E))));function S(E){E>0?(Tn(i,{top:-E,behavior:"auto"}),Tn(t,0)):(Tn(t,0),Tn(i,{top:-E,behavior:"auto"}))}return er(Wt(T,En(t,s)),([E,x,A])=>{A&&WB()?Tn(t,x-E):S(-E)}),er(Wt(fs(ma(s,!1),t,v),on(([E,x,A])=>!E&&!A&&x!==0),Ai(([E,x])=>x),fc(1)),S),Ni(Wt(g,Ai(E=>({top:-E}))),i),er(Wt(f,En(b,y),Ai(([E,{lastSize:x,groupIndices:A,sizeTree:D},C])=>{function I(N){return N*(x+C)}if(A.length===0)return I(E);{let N=0;const W=pf(D,0);let Y=0,X=0;for(;Y<E;){Y++,N+=W;let O=A.length===X+1?1/0:A[X+1]-A[X]-1;Y+O>E&&(N-=W,O=E-Y+1),Y+=O,N+=I(O),X++}return N}})),E=>{Tn(t,E),requestAnimationFrame(()=>{Tn(i,{top:E}),requestAnimationFrame(()=>{Tn(t,0),Tn(v,!1)})})}),{deviation:t}},Mr(ba,tm,Gu,il,Ic,W1)),ZB=tr(([{didMount:i},{scrollTo:e},{listState:t}])=>{const n=ci(0);return er(Wt(i,En(n),on(([,s])=>s!==0),Ai(([,s])=>({top:s}))),s=>{Zo(Wt(t,ah(1),on(l=>l.items.length>1)),()=>{requestAnimationFrame(()=>{Tn(e,s)})})}),{initialScrollTop:n}},Mr(Dc,ba,Gu),{singleton:!0}),XB=tr(([{viewportHeight:i},{totalListHeight:e}])=>{const t=ci(!1),n=ma(Wt(fs(t,i,e),on(([s])=>s),Ai(([,s,l])=>Math.max(0,s-l)),fc(0),Er()),0);return{alignToBottom:t,paddingTopAddition:n}},Mr(ba,uk),{singleton:!0}),Q1=tr(([{scrollTo:i,scrollContainerState:e}])=>{const t=On(),n=On(),s=On(),l=ci(!1),u=ci(void 0);return Ni(Wt(fs(t,n),Ai(([{viewportHeight:r,scrollTop:p,scrollHeight:f},{offsetTop:g}])=>({scrollTop:Math.max(0,p-g),scrollHeight:f,viewportHeight:r}))),e),Ni(Wt(i,En(n),Ai(([r,{offsetTop:p}])=>({...r,top:r.top+p}))),s),{useWindowScroll:l,customScrollParent:u,windowScrollContainerState:t,windowViewportRect:n,windowScrollTo:s}},Mr(ba)),KB=({itemTop:i,itemBottom:e,viewportTop:t,viewportBottom:n,locationParams:{behavior:s,align:l,...u}})=>i<t?{...u,behavior:s,align:l??"start"}:e>n?{...u,behavior:s,align:l??"end"}:null,QB=tr(([{sizes:i,totalCount:e,gap:t},{scrollTop:n,viewportHeight:s,headerHeight:l,fixedHeaderHeight:u,fixedFooterHeight:r,scrollingInProgress:p},{scrollToIndex:f}])=>{const g=On();return Ni(Wt(g,En(i,s,e,l,u,r,n),En(t),Ai(([[b,y,w,v,T,S,E,x],A])=>{const{done:D,behavior:C,align:I,calculateViewLocation:N=KB,...W}=b,Y=nk(b,y,v-1),X=ff(Y,y.offsetTree,A)+T+S,O=X+Co(y.sizeTree,Y)[1],V=x+S,$=x+w-E,L=N({itemTop:X,itemBottom:O,viewportTop:V,viewportBottom:$,locationParams:{behavior:C,align:I,...W}});return L?D&&Zo(Wt(p,on(R=>R===!1),ah(Zs(p)?1:2)),D):D&&D(),L}),on(b=>b!==null)),f),{scrollIntoView:g}},Mr(il,ba,em,Gu,Ic),{singleton:!0}),JB=tr(([{sizes:i,sizeRanges:e},{scrollTop:t,headerHeight:n},{initialTopMostItemIndex:s},{didMount:l},{useWindowScroll:u,windowScrollContainerState:r,windowViewportRect:p}])=>{const f=On(),g=ci(void 0),b=ci(null),y=ci(null);return Ni(r,b),Ni(p,y),er(Wt(f,En(i,t,u,b,y,n)),([w,v,T,S,E,x,A])=>{const D=LB(v.sizeTree);S&&E!==null&&x!==null&&(T=E.scrollTop-x.offsetTop),T-=A,w({ranges:D,scrollTop:T})}),Ni(Wt(g,on(G1),Ai(e7)),s),Ni(Wt(l,En(g),on(([,w])=>w!==void 0),Er(),Ai(([,w])=>w.ranges)),e),{getState:f,restoreStateFrom:g}},Mr(il,ba,im,Dc,Q1));function e7(i){return{offset:i.scrollTop,index:0,align:"start"}}const t7=tr(([i,e,t,n,s,l,u,r,p,f])=>({...i,...e,...t,...n,...s,...l,...u,...r,...p,...f}),Mr(K1,HB,Dc,ck,uk,ZB,XB,Q1,QB,Ic)),i7=tr(([{totalCount:i,sizeRanges:e,fixedItemSize:t,defaultItemSize:n,trackItemSizes:s,itemSize:l,data:u,firstItemIndex:r,groupIndices:p,statefulTotalCount:f,gap:g,sizes:b},{initialTopMostItemIndex:y,scrolledToInitialItem:w,initialItemFinalLocationReached:v},T,S,E,{listState:x,topItemsIndexes:A,...D},{scrollToIndex:C},I,{topItemCount:N},{groupCounts:W},Y])=>(Ni(D.rangeChanged,Y.scrollSeekRangeChanged),Ni(Wt(Y.windowViewportRect,Ai(X=>X.visibleHeight)),T.viewportHeight),{totalCount:i,data:u,firstItemIndex:r,sizeRanges:e,initialTopMostItemIndex:y,scrolledToInitialItem:w,initialItemFinalLocationReached:v,topItemsIndexes:A,topItemCount:N,groupCounts:W,fixedItemHeight:t,defaultItemHeight:n,gap:g,...E,statefulTotalCount:f,listState:x,scrollToIndex:C,trackItemSizes:s,itemSize:l,groupIndices:p,...D,...Y,...T,sizes:b,...S}),Mr(il,im,ba,JB,UB,Gu,em,YB,qB,ak,t7)),K0="-webkit-sticky",bT="sticky",hk=dk(()=>{if(typeof document>"u")return bT;const i=document.createElement("div");return i.style.position=K0,i.style.position===K0?K0:bT});function pk(i,e,t){const n=fe.useRef(null),s=fe.useCallback(p=>{if(p===null||!p.offsetParent)return;const f=p.getBoundingClientRect(),g=f.width;let b,y;if(e){const w=e.getBoundingClientRect(),v=f.top-w.top;b=w.height-Math.max(0,v),y=v+e.scrollTop}else b=window.innerHeight-Math.max(0,f.top),y=f.top+window.pageYOffset;n.current={offsetTop:y,visibleHeight:b,visibleWidth:g},i(n.current)},[i,e]),{callbackRef:l,ref:u}=q1(s,!0,t),r=fe.useCallback(()=>{s(u.current)},[s,u]);return fe.useEffect(()=>{if(e){e.addEventListener("scroll",r);const p=new ResizeObserver(()=>{requestAnimationFrame(r)});return p.observe(e),()=>{e.removeEventListener("scroll",r),p.unobserve(e)}}else return window.addEventListener("scroll",r),window.addEventListener("resize",r),()=>{window.removeEventListener("scroll",r),window.removeEventListener("resize",r)}},[r,e]),l}const fk=fe.createContext(void 0),mk=fe.createContext(void 0);function gk(i){return i}const n7=tr(()=>{const i=ci(p=>`Item ${p}`),e=ci(null),t=ci(p=>`Group ${p}`),n=ci({}),s=ci(gk),l=ci("div"),u=ci(_h),r=(p,f=null)=>ma(Wt(n,Ai(g=>g[p]),Er()),f);return{context:e,itemContent:i,groupContent:t,components:n,computeItemKey:s,HeaderFooterTag:l,scrollerRef:u,FooterComponent:r("Footer"),HeaderComponent:r("Header"),TopItemListComponent:r("TopItemList"),ListComponent:r("List","div"),ItemComponent:r("Item","div"),GroupComponent:r("Group","div"),ScrollerComponent:r("Scroller","div"),EmptyPlaceholder:r("EmptyPlaceholder"),ScrollSeekPlaceholder:r("ScrollSeekPlaceholder")}}),r7=tr(([i,e])=>({...i,...e}),Mr(i7,n7)),s7=({height:i})=>he.jsx("div",{style:{height:i}}),a7={position:hk(),zIndex:1,overflowAnchor:"none"},yk={overflowAnchor:"none"},o7={...yk,display:"inline-block",height:"100%"},vT=fe.memo(function({showTopList:e=!1}){const t=fn("listState"),n=no("sizeRanges"),s=fn("useWindowScroll"),l=fn("customScrollParent"),u=no("windowScrollContainerState"),r=no("scrollContainerState"),p=l||s?u:r,f=fn("itemContent"),g=fn("context"),b=fn("groupContent"),y=fn("trackItemSizes"),w=fn("itemSize"),v=fn("log"),T=no("gap"),S=fn("horizontalDirection"),{callbackRef:E}=wB(n,w,y,e?_h:p,v,T,l,S,fn("skipAnimationFrameInResizeObserver")),[x,A]=fe.useState(0);J1("deviation",R=>{x!==R&&A(R)});const D=fn("EmptyPlaceholder"),C=fn("ScrollSeekPlaceholder")||s7,I=fn("ListComponent"),N=fn("ItemComponent"),W=fn("GroupComponent"),Y=fn("computeItemKey"),X=fn("isSeeking"),O=fn("groupIndices").length>0,V=fn("alignToBottom"),$=fn("initialItemFinalLocationReached"),L=e?{}:{boxSizing:"border-box",...S?{whiteSpace:"nowrap",display:"inline-block",height:"100%",paddingLeft:t.offsetTop,paddingRight:t.offsetBottom,marginLeft:x!==0?x:V?"auto":0}:{marginTop:x!==0?x:V?"auto":0,paddingTop:t.offsetTop,paddingBottom:t.offsetBottom},...$?{}:{visibility:"hidden"}};return!e&&t.totalCount===0&&D?he.jsx(D,{...fa(D,g)}):he.jsx(I,{...fa(I,g),ref:E,style:L,"data-testid":e?"virtuoso-top-item-list":"virtuoso-item-list",children:(e?t.topItems:t.items).map(R=>{const G=R.originalIndex,U=Y(G+t.firstItemIndex,R.data,g);return X?$e.createElement(C,{...fa(C,g),key:U,index:R.index,height:R.size,type:R.type||"item",...R.type==="group"?{}:{groupIndex:R.groupIndex}}):R.type==="group"?$e.createElement(W,{...fa(W,g),key:U,"data-index":G,"data-known-size":R.size,"data-item-index":R.index,style:a7},b(R.index,g)):$e.createElement(N,{...fa(N,g),...d7(N,R.data),key:U,"data-index":G,"data-known-size":R.size,"data-item-index":R.index,"data-item-group-index":R.groupIndex,style:S?o7:yk},O?f(R.index,R.groupIndex,R.data,g):f(R.index,R.data,g))})})}),l7={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},c7={outline:"none",overflowX:"auto",position:"relative"},xx=i=>({width:"100%",height:"100%",position:"absolute",top:0,...i?{display:"flex",flexDirection:"column"}:{}}),u7={width:"100%",position:hk(),top:0,zIndex:1};function fa(i,e){if(typeof i!="string")return{context:e}}function d7(i,e){return{item:typeof i=="string"?void 0:e}}const h7=fe.memo(function(){const e=fn("HeaderComponent"),t=no("headerHeight"),n=fn("HeaderFooterTag"),s=Vu(fe.useMemo(()=>u=>t(Tc(u,"height")),[t]),!0,fn("skipAnimationFrameInResizeObserver")),l=fn("context");return e?he.jsx(n,{ref:s,children:he.jsx(e,{...fa(e,l)})}):null}),p7=fe.memo(function(){const e=fn("FooterComponent"),t=no("footerHeight"),n=fn("HeaderFooterTag"),s=Vu(fe.useMemo(()=>u=>t(Tc(u,"height")),[t]),!0,fn("skipAnimationFrameInResizeObserver")),l=fn("context");return e?he.jsx(n,{ref:s,children:he.jsx(e,{...fa(e,l)})}):null});function xk({usePublisher:i,useEmitter:e,useEmitterValue:t}){return fe.memo(function({style:l,children:u,...r}){const p=i("scrollContainerState"),f=t("ScrollerComponent"),g=i("smoothScrollTargetReached"),b=t("scrollerRef"),y=t("context"),w=t("horizontalDirection")||!1,{scrollerRef:v,scrollByCallback:T,scrollToCallback:S}=X3(p,g,f,b,void 0,w);e("scrollTo",S),e("scrollBy",T);const E=w?c7:l7;return he.jsx(f,{ref:v,style:{...E,...l},"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0,...r,...fa(f,y),children:u})})}function bk({usePublisher:i,useEmitter:e,useEmitterValue:t}){return fe.memo(function({style:l,children:u,...r}){const p=i("windowScrollContainerState"),f=t("ScrollerComponent"),g=i("smoothScrollTargetReached"),b=t("totalListHeight"),y=t("deviation"),w=t("customScrollParent"),v=t("context"),{scrollerRef:T,scrollByCallback:S,scrollToCallback:E}=X3(p,g,f,_h,w);return Y3(()=>(T.current=w||window,()=>{T.current=null}),[T,w]),e("windowScrollTo",E),e("scrollBy",S),he.jsx(f,{style:{position:"relative",...l,...b!==0?{height:b+y}:{}},"data-virtuoso-scroller":!0,...r,...fa(f,v),children:u})})}const f7=({children:i})=>{const e=fe.useContext(fk),t=no("viewportHeight"),n=no("fixedItemHeight"),s=fn("alignToBottom"),l=fn("horizontalDirection"),u=fe.useMemo(()=>G3(t,p=>Tc(p,l?"width":"height")),[t,l]),r=Vu(u,!0,fn("skipAnimationFrameInResizeObserver"));return fe.useEffect(()=>{e&&(t(e.viewportHeight),n(e.itemHeight))},[e,t,n]),he.jsx("div",{style:xx(s),ref:r,"data-viewport-type":"element",children:i})},m7=({children:i})=>{const e=fe.useContext(fk),t=no("windowViewportRect"),n=no("fixedItemHeight"),s=fn("customScrollParent"),l=pk(t,s,fn("skipAnimationFrameInResizeObserver")),u=fn("alignToBottom");return fe.useEffect(()=>{e&&(n(e.itemHeight),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:100}))},[e,t,n]),he.jsx("div",{ref:l,style:xx(u),"data-viewport-type":"window",children:i})},g7=({children:i})=>{const e=fn("TopItemListComponent")||"div",t=fn("headerHeight"),n={...u7,marginTop:`${t}px`},s=fn("context");return he.jsx(e,{style:n,...fa(e,s),children:i})},y7=fe.memo(function(e){const t=fn("useWindowScroll"),n=fn("topItemsIndexes").length>0,s=fn("customScrollParent"),l=s||t?v7:b7,u=s||t?m7:f7;return he.jsxs(l,{...e,children:[n&&he.jsx(g7,{children:he.jsx(vT,{showTopList:!0})}),he.jsxs(u,{children:[he.jsx(h7,{}),he.jsx(vT,{}),he.jsx(p7,{})]})]})}),{Component:x7,usePublisher:no,useEmitterValue:fn,useEmitter:J1}=W3(r7,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},y7),b7=xk({usePublisher:no,useEmitterValue:fn,useEmitter:J1}),v7=bk({usePublisher:no,useEmitterValue:fn,useEmitter:J1}),_7=x7,_T={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},w7={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},{round:wT,ceil:TT,floor:vy,min:Q0,max:Zp}=Math;function T7(i){return{...w7,items:i}}function CT(i,e,t){return Array.from({length:e-i+1}).map((n,s)=>{const l=t===null?null:t[s+i];return{index:s+i,data:l}})}function C7(i,e){return i&&i.column===e.column&&i.row===e.row}function Cg(i,e){return i&&i.width===e.width&&i.height===e.height}const S7=tr(([{overscan:i,visibleRange:e,listBoundary:t,increaseViewportBy:n},{scrollTop:s,viewportHeight:l,scrollBy:u,scrollTo:r,smoothScrollTargetReached:p,scrollContainerState:f,footerHeight:g,headerHeight:b},y,w,{propsReady:v,didMount:T},{windowViewportRect:S,useWindowScroll:E,customScrollParent:x,windowScrollContainerState:A,windowScrollTo:D},C])=>{const I=ci(0),N=ci(0),W=ci(_T),Y=ci({height:0,width:0}),X=ci({height:0,width:0}),O=On(),V=On(),$=ci(0),L=ci(null),R=ci({row:0,column:0}),G=On(),U=On(),B=ci(!1),H=ci(0),q=ci(!0),se=ci(!1),pe=ci(!1);er(Wt(T,En(H),on(([K,J])=>!!J)),()=>{Tn(q,!1)}),er(Wt(fs(T,q,X,Y,H,se),on(([K,J,oe,we,,ee])=>K&&!J&&oe.height!==0&&we.height!==0&&!ee)),([,,,,K])=>{Tn(se,!0),Z1(1,()=>{Tn(O,K)}),Zo(Wt(s),()=>{Tn(t,[0,0]),Tn(q,!0)})}),Ni(Wt(U,on(K=>K!=null&&K.scrollTop>0),jo(0)),N),er(Wt(T,En(U),on(([,K])=>K!=null)),([,K])=>{K&&(Tn(Y,K.viewport),Tn(X,K==null?void 0:K.item),Tn(R,K.gap),K.scrollTop>0&&(Tn(B,!0),Zo(Wt(s,ah(1)),J=>{Tn(B,!1)}),Tn(r,{top:K.scrollTop})))}),Ni(Wt(Y,Ai(({height:K})=>K)),l),Ni(Wt(fs(hn(Y,Cg),hn(X,Cg),hn(R,(K,J)=>K&&K.column===J.column&&K.row===J.row),hn(s)),Ai(([K,J,oe,we])=>({viewport:K,item:J,gap:oe,scrollTop:we}))),G),Ni(Wt(fs(hn(I),e,hn(R,C7),hn(X,Cg),hn(Y,Cg),hn(L),hn(N),hn(B),hn(q),hn(H)),on(([,,,,,,,K])=>!K),Ai(([K,[J,oe],we,ee,re,ue,xe,,Te,ze])=>{const{row:Ce,column:Ie}=we,{height:Be,width:He}=ee,{width:Ae}=re;if(xe===0&&(K===0||Ae===0))return _T;if(He===0){const ht=X1(ze,K),gt=ht+Math.max(xe-1,0);return T7(CT(ht,gt,ue))}const ye=vk(Ae,He,Ie);let ge,Me;Te?J===0&&oe===0&&xe>0?(ge=0,Me=xe-1):(ge=ye*vy((J+Ce)/(Be+Ce)),Me=ye*TT((oe+Ce)/(Be+Ce))-1,Me=Q0(K-1,Zp(Me,ye-1)),ge=Q0(Me,Zp(0,ge))):(ge=0,Me=-1);const De=CT(ge,Me,ue),{top:Pe,bottom:Fe}=ST(re,we,ee,De),Xe=TT(K/ye),nt=Xe*Be+(Xe-1)*Ce-Fe;return{items:De,offsetTop:Pe,offsetBottom:nt,top:Pe,bottom:Fe,itemHeight:Be,itemWidth:He}})),W),Ni(Wt(L,on(K=>K!==null),Ai(K=>K.length)),I),Ni(Wt(fs(Y,X,W,R),on(([K,J,{items:oe}])=>oe.length>0&&J.height!==0&&K.height!==0),Ai(([K,J,{items:oe},we])=>{const{top:ee,bottom:re}=ST(K,we,J,oe);return[ee,re]}),Er(gf)),t);const ne=ci(!1);Ni(Wt(s,En(ne),Ai(([K,J])=>J||K!==0)),ne);const le=Ha(Wt(fs(W,I),on(([{items:K}])=>K.length>0),En(ne),on(([[K,J],oe])=>{const ee=K.items[K.items.length-1].index===J-1;return(oe||K.bottom>0&&K.itemHeight>0&&K.offsetBottom===0&&K.items.length===J)&&ee}),Ai(([[,K]])=>K-1),Er())),ke=Ha(Wt(hn(W),on(({items:K})=>K.length>0&&K[0].index===0),jo(0),Er())),be=Ha(Wt(hn(W),En(B),on(([{items:K},J])=>K.length>0&&!J),Ai(([{items:K}])=>({startIndex:K[0].index,endIndex:K[K.length-1].index})),Er(ok),fc(0)));Ni(be,w.scrollSeekRangeChanged),Ni(Wt(O,En(Y,X,I,R),Ai(([K,J,oe,we,ee])=>{const re=sk(K),{align:ue,behavior:xe,offset:Te}=re;let ze=re.index;ze==="LAST"&&(ze=we-1),ze=Zp(0,ze,Q0(we-1,ze));let Ce=ov(J,ee,oe,ze);return ue==="end"?Ce=wT(Ce-J.height+oe.height):ue==="center"&&(Ce=wT(Ce-J.height/2+oe.height/2)),Te&&(Ce+=Te),{top:Ce,behavior:xe}})),r);const Ee=ma(Wt(W,Ai(K=>K.offsetBottom+K.bottom)),0);return Ni(Wt(S,Ai(K=>({width:K.visibleWidth,height:K.visibleHeight}))),Y),{data:L,totalCount:I,viewportDimensions:Y,itemDimensions:X,scrollTop:s,scrollHeight:V,overscan:i,increaseViewportBy:n,scrollBy:u,scrollTo:r,scrollToIndex:O,smoothScrollTargetReached:p,windowViewportRect:S,windowScrollTo:D,useWindowScroll:E,customScrollParent:x,windowScrollContainerState:A,deviation:$,scrollContainerState:f,footerHeight:g,headerHeight:b,initialItemCount:N,gap:R,restoreStateFrom:U,...w,initialTopMostItemIndex:H,horizontalDirection:pe,gridState:W,totalListHeight:Ee,...y,startReached:ke,endReached:le,rangeChanged:be,stateChanged:G,propsReady:v,stateRestoreInProgress:B,...C}},Mr(K1,ba,tm,ck,Dc,Q1,Ic));function ST(i,e,t,n){const{height:s}=t;if(s===void 0||n.length===0)return{top:0,bottom:0};const l=ov(i,e,t,n[0].index),u=ov(i,e,t,n[n.length-1].index)+s;return{top:l,bottom:u}}function ov(i,e,t,n){const s=vk(i.width,t.width,e.column),l=vy(n/s),u=l*t.height+Zp(0,l-1)*e.row;return u>0?u+e.row:u}function vk(i,e,t){return Zp(1,vy((i+t)/(vy(e)+t)))}const E7=tr(()=>{const i=ci(b=>`Item ${b}`),e=ci({}),t=ci(null),n=ci("virtuoso-grid-item"),s=ci("virtuoso-grid-list"),l=ci(gk),u=ci("div"),r=ci(_h),p=(b,y=null)=>ma(Wt(e,Ai(w=>w[b]),Er()),y),f=ci(!1),g=ci(!1);return Ni(hn(g),f),{readyStateChanged:f,reportReadyState:g,context:t,itemContent:i,components:e,computeItemKey:l,itemClassName:n,listClassName:s,headerFooterTag:u,scrollerRef:r,FooterComponent:p("Footer"),HeaderComponent:p("Header"),ListComponent:p("List","div"),ItemComponent:p("Item","div"),ScrollerComponent:p("Scroller","div"),ScrollSeekPlaceholder:p("ScrollSeekPlaceholder","div")}}),k7=tr(([i,e])=>({...i,...e}),Mr(S7,E7)),A7=fe.memo(function(){const e=Ir("gridState"),t=Ir("listClassName"),n=Ir("itemClassName"),s=Ir("itemContent"),l=Ir("computeItemKey"),u=Ir("isSeeking"),r=ro("scrollHeight"),p=Ir("ItemComponent"),f=Ir("ListComponent"),g=Ir("ScrollSeekPlaceholder"),b=Ir("context"),y=ro("itemDimensions"),w=ro("gap"),v=Ir("log"),T=Ir("stateRestoreInProgress"),S=ro("reportReadyState"),E=Vu(fe.useMemo(()=>x=>{const A=x.parentElement.parentElement.scrollHeight;r(A);const D=x.firstChild;if(D){const{width:C,height:I}=D.getBoundingClientRect();y({width:C,height:I})}w({row:ET("row-gap",getComputedStyle(x).rowGap,v),column:ET("column-gap",getComputedStyle(x).columnGap,v)})},[r,y,w,v]),!0,!1);return Y3(()=>{e.itemHeight>0&&e.itemWidth>0&&S(!0)},[e]),T?null:he.jsx(f,{ref:E,className:t,...fa(f,b),style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom},"data-testid":"virtuoso-item-list",children:e.items.map(x=>{const A=l(x.index,x.data,b);return u?he.jsx(g,{...fa(g,b),index:x.index,height:e.itemHeight,width:e.itemWidth},A):$e.createElement(p,{...fa(p,b),className:n,"data-index":x.index,key:A},s(x.index,x.data,b))})})}),M7=fe.memo(function(){const e=Ir("HeaderComponent"),t=ro("headerHeight"),n=Ir("headerFooterTag"),s=Vu(fe.useMemo(()=>u=>t(Tc(u,"height")),[t]),!0,!1),l=Ir("context");return e?he.jsx(n,{ref:s,children:he.jsx(e,{...fa(e,l)})}):null}),P7=fe.memo(function(){const e=Ir("FooterComponent"),t=ro("footerHeight"),n=Ir("headerFooterTag"),s=Vu(fe.useMemo(()=>u=>t(Tc(u,"height")),[t]),!0,!1),l=Ir("context");return e?he.jsx(n,{ref:s,children:he.jsx(e,{...fa(e,l)})}):null}),I7=({children:i})=>{const e=fe.useContext(mk),t=ro("itemDimensions"),n=ro("viewportDimensions"),s=Vu(fe.useMemo(()=>l=>{n(l.getBoundingClientRect())},[n]),!0,!1);return fe.useEffect(()=>{e&&(n({height:e.viewportHeight,width:e.viewportWidth}),t({height:e.itemHeight,width:e.itemWidth}))},[e,n,t]),he.jsx("div",{style:xx(!1),ref:s,children:i})},D7=({children:i})=>{const e=fe.useContext(mk),t=ro("windowViewportRect"),n=ro("itemDimensions"),s=Ir("customScrollParent"),l=pk(t,s,!1);return fe.useEffect(()=>{e&&(n({height:e.itemHeight,width:e.itemWidth}),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:e.viewportWidth}))},[e,t,n]),he.jsx("div",{ref:l,style:xx(!1),children:i})},R7=fe.memo(function({...e}){const t=Ir("useWindowScroll"),n=Ir("customScrollParent"),s=n||t?z7:L7,l=n||t?D7:I7;return he.jsx(s,{...e,children:he.jsxs(l,{children:[he.jsx(M7,{}),he.jsx(A7,{}),he.jsx(P7,{})]})})}),{Component:RY,usePublisher:ro,useEmitterValue:Ir,useEmitter:_k}=W3(k7,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},R7),L7=xk({usePublisher:ro,useEmitterValue:Ir,useEmitter:_k}),z7=bk({usePublisher:ro,useEmitterValue:Ir,useEmitter:_k});function ET(i,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${i} was not resolved to pixel value correctly`,e,qa.WARN),e==="normal"?0:parseInt(e??"0",10)}const N7=i=>{let{evaluationPerOrgUnits:e,useVirtuoso:t=!0,useVirtuosoWindowScroll:n=!1}=i;function s(){return l=>{const u=e[l];return u&&fe.createElement("div",{key:u.orgUnitId},fe.createElement(aT,{orgUnitsData:u}))}}return t?fe.createElement("div",null,fe.createElement(_7,{style:{height:"60vh"},useWindowScroll:n,totalCount:e.length,itemContent:s()})):fe.createElement(fe.Fragment,null,e.map((l,u)=>fe.createElement(aT,{orgUnitsData:l})))},O7=i=>{let{splitPeriods:e,setSelectedSplitPeriod:t,selectedSplitPeriod:n}=i;return e.includes(n)?fe.createElement("div",null,fe.createElement("div",null,fe.createElement(hs,{selected:n,onChange:s=>t(s.selected)},e.map((s,l)=>fe.createElement(_o,{key:l,label:U3(s),value:s}))))):fe.createElement(fe.Fragment,null)},j7="_orgUnitsSelction_1ir4t_1",F7="_wrapper_1ir4t_7",B7="_filterCheckbox_1ir4t_14",$7="_filter_1ir4t_14",U7="_plots_1ir4t_25",V7="_searchInput_1ir4t_29",G7="_filterTitle_1ir4t_34",uu={orgUnitsSelction:j7,wrapper:F7,filterCheckbox:B7,filter:$7,plots:U7,searchInput:V7,filterTitle:G7},H7=i=>{var e;let{evaluationName:t,modelName:n,evaluations:s,splitPeriods:l}=i;const[u,r]=$e.useState([]),[p,f]=$e.useState(),[g,b]=$e.useState([]),[y,w]=$e.useState([]),[v,T]=$e.useState(l[0]);$e.useEffect(()=>{const E=s[0];b(E.evaluation.map(x=>x.orgUnitId)),w(E.evaluation.map(x=>({name:x.orgUnitName,id:x.orgUnitId}))),T(E.splitPoint),r(E.evaluation)},[s,l]),$e.useEffect(()=>{const E=s.find(A=>A.splitPoint===v),x=g==null?void 0:g.map(A=>E.evaluation.find(D=>D.orgUnitId===A&&D.orgUnitName.toLocaleLowerCase().includes(p?p.toLocaleLowerCase():"")));r(x)},[v,g,p]);const S=E=>{const x=E.checked?[...g,E.value]:g.filter(A=>A!==E.value);b(x)};return fe.createElement(fe.Fragment,null,fe.createElement("div",{className:uu.wrapper},fe.createElement("div",{className:uu.filter},fe.createElement("div",null,fe.createElement("h2",null,"Evaluation: ",t)),fe.createElement("div",null,fe.createElement("div",{className:uu.filterTitle},"Split period:"),fe.createElement(O7,{splitPeriods:l,setSelectedSplitPeriod:T,selectedSplitPeriod:v})),fe.createElement("div",null,fe.createElement("div",{className:uu.filterTitle},"Organization units:"),fe.createElement("div",{className:uu.filterCheckbox},y.map((E,x)=>fe.createElement(Rf,{checked:g.filter(A=>A==E.id).length>0,onChange:S,label:E.name,key:E.id,value:E.id}))))),fe.createElement("div",{className:uu.plots},fe.createElement("div",null,fe.createElement("h3",null,"Model: ",n)),fe.createElement("div",{className:uu.searchInput},fe.createElement(Df,{label:"Search for organization units:",placeholder:((e=y[0])===null||e===void 0?void 0:e.name)+"..",onChange:E=>f(E.value),value:p})),fe.createElement(N7,{evaluationPerOrgUnits:u,useVirtuoso:!0}))))},q7="_table_11vie_1",W7="_quantile_low_11vie_22",Y7="_quantile_high_11vie_26",Z7={table:q7,quantile_low:W7,quantile_high:Y7},kT=i=>[...new Set(i.map(e=>e.period))],X7=i=>[...new Set(i.map(e=>e.orgUnit))],K7=i=>[...new Set(i.map(e=>e.dataElement))],Q7=(i,e)=>{var t;return(t=e.find(n=>n.orgUnit===i))===null||t===void 0?void 0:t.displayName},J7=i=>{let{data:e}=i;const t=e.dataValues;return fe.createElement(fe.Fragment,null,X7(t).map(n=>fe.createElement("div",{key:n},fe.createElement("h3",null,Qe.t("Prediction for {{orgUnitName}}",{orgUnitName:Q7(n,t)})),fe.createElement("table",{className:Z7.table},fe.createElement("thead",null,fe.createElement("tr",null,fe.createElement("th",null,"Quantiles"),kT(t).map(s=>fe.createElement("th",{key:s},B1({periodId:s,calendar:"gregory"}).displayName)))),fe.createElement("tbody",null,K7(t).map(s=>fe.createElement("tr",{key:s},fe.createElement("td",null,s.replaceAll("_"," ")),kT(t).map(l=>fe.createElement("td",{key:l},t.filter(u=>u.dataElement===s&&u.orgUnit===n&&u.period===l)[0].value)))))))))};var e$={exports:{}};(function(i,e){(function(t,n){i.exports=n()})($a,function(){var t,n,s;function l(r,p){if(!t)t=p;else if(!n)n=p;else{var f="var sharedChunk = {}; ("+t+")(sharedChunk); ("+n+")(sharedChunk);",g={};t(g),s=p(g),typeof window<"u"&&(s.workerUrl=window.URL.createObjectURL(new Blob([f],{type:"text/javascript"})))}}l(["exports"],function(r){var p=f;function f(c,a,d,m){this.cx=3*c,this.bx=3*(d-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(m-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=a,this.p2x=d,this.p2y=m}function g(c,a,d,m){const M=new p(c,a,d,m);return function(z){return M.solve(z)}}f.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,a){if(a===void 0&&(a=1e-6),c<0)return 0;if(c>1)return 1;for(var d=c,m=0;m<8;m++){var M=this.sampleCurveX(d)-c;if(Math.abs(M)<a)return d;var z=this.sampleCurveDerivativeX(d);if(Math.abs(z)<1e-6)break;d-=M/z}var F=0,ie=1;for(d=c,m=0;m<20&&(M=this.sampleCurveX(d),!(Math.abs(M-c)<a));m++)c>M?F=d:ie=d,d=.5*(ie-F)+F;return d},solve:function(c,a){return this.sampleCurveY(this.solveCurveX(c,a))}};const b=g(.25,.1,.25,1);function y(c,a,d){return Math.min(d,Math.max(a,c))}function w(c,a,d){const m=d-a,M=((c-a)%m+m)%m+a;return M===a?d:M}function v(c,...a){for(const d of a)for(const m in d)c[m]=d[m];return c}let T=1;function S(c,a){c.forEach(d=>{a[d]&&(a[d]=a[d].bind(a))})}function E(c,a,d){const m={};for(const M in c)m[M]=a.call(d||this,c[M],M,c);return m}function x(c,a,d){const m={};for(const M in c)a.call(d||this,c[M],M,c)&&(m[M]=c[M]);return m}function A(c){return Array.isArray(c)?c.map(A):typeof c=="object"&&c?E(c,A):c}const D={};function C(c){D[c]||(typeof console<"u"&&console.warn(c),D[c]=!0)}function I(c,a,d){return(d.y-c.y)*(a.x-c.x)>(a.y-c.y)*(d.x-c.x)}function N(c){let a=0;for(let d,m,M=0,z=c.length,F=z-1;M<z;F=M++)d=c[M],m=c[F],a+=(m.x-d.x)*(d.y+m.y);return a}function W(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Y(c){const a={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(d,m,M,z)=>{const F=M||z;return a[m]=!F||F.toLowerCase(),""}),a["max-age"]){const d=parseInt(a["max-age"],10);isNaN(d)?delete a["max-age"]:a["max-age"]=d}return a}let X,O,V=null;function $(c){if(V==null){const a=c.navigator?c.navigator.userAgent:null;V=!!c.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return V}function L(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const R={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(c){const a=requestAnimationFrame(c);return{cancel:()=>cancelAnimationFrame(a)}},getImageData(c,a=0){const d=window.document.createElement("canvas"),m=d.getContext("2d");if(!m)throw new Error("failed to create canvas 2d context");return d.width=c.width,d.height=c.height,m.drawImage(c,0,0,c.width,c.height),m.getImageData(-a,-a,c.width+2*a,c.height+2*a)},resolveURL:c=>(X||(X=document.createElement("a")),X.href=c,X.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(O==null&&(O=matchMedia("(prefers-reduced-motion: reduce)")),O.matches)}};var G=U;function U(c,a){this.x=c,this.y=a}U.prototype={clone:function(){return new U(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,a){return this.clone()._rotateAround(c,a)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var a=c.x-this.x,d=c.y-this.y;return a*a+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,a){return Math.atan2(this.x*a-this.y*c,this.x*c+this.y*a)},_matMult:function(c){var a=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=a,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var a=Math.cos(c),d=Math.sin(c),m=d*this.x+a*this.y;return this.x=a*this.x-d*this.y,this.y=m,this},_rotateAround:function(c,a){var d=Math.cos(c),m=Math.sin(c),M=a.y+m*(this.x-a.x)+d*(this.y-a.y);return this.x=a.x+d*(this.x-a.x)-m*(this.y-a.y),this.y=M,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},U.convert=function(c){return c instanceof U?c:Array.isArray(c)?new U(c[0],c[1]):c};const B={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},H="mapbox-tiles";let q,se=500,pe=50;function ne(){typeof caches>"u"||q||(q=caches.open(H))}let le=1/0;const ke={supported:!1,testSupport:function(c){!K&&Ee&&(J?oe(c):be=c)}};let be,Ee,K=!1,J=!1;function oe(c){const a=c.createTexture();c.bindTexture(c.TEXTURE_2D,a);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,Ee),c.isContextLost())return;ke.supported=!0}catch{}c.deleteTexture(a),K=!0}typeof document<"u"&&(Ee=document.createElement("img"),Ee.onload=function(){be&&oe(be),be=null,J=!0},Ee.onerror=function(){K=!0,be=null},Ee.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const we={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(we);class ee extends Error{constructor(a,d,m,M){super(`AJAXError: ${d} (${a}): ${m}`),this.status=a,this.statusText=d,this.url=m,this.body=M}}const re=W()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function ue(c,a){const d=new AbortController,m=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:re(),signal:d.signal});let M=!1,z=!1;return c.type==="json"&&m.headers.set("Accept","application/json"),((F,ie,ae)=>{z||fetch(m).then(_e=>_e.ok?((Re,je,Ge)=>{(c.type==="arrayBuffer"?Re.arrayBuffer():c.type==="json"?Re.json():Re.text()).then(Ye=>{z||(M=!0,a(null,Ye,Re.headers.get("Cache-Control"),Re.headers.get("Expires")))}).catch(Ye=>{z||a(new Error(Ye.message))})})(_e):_e.blob().then(Re=>a(new ee(_e.status,_e.statusText,c.url,Re)))).catch(_e=>{_e.code!==20&&a(new Error(_e.message))})})(),{cancel:()=>{z=!0,M||d.abort()}}}const xe=function(c,a){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){if(W()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,a);if(!W()){const m=c.url.substring(0,c.url.indexOf("://"));return(B.REGISTERED_PROTOCOLS[m]||ue)(c,a)}}if(!(/^file:/.test(d=c.url)||/^file:/.test(re())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ue(c,a);if(W()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,a,void 0,!0)}var d;return function(m,M){const z=new XMLHttpRequest;z.open(m.method||"GET",m.url,!0),m.type==="arrayBuffer"&&(z.responseType="arraybuffer");for(const F in m.headers)z.setRequestHeader(F,m.headers[F]);return m.type==="json"&&(z.responseType="text",z.setRequestHeader("Accept","application/json")),z.withCredentials=m.credentials==="include",z.onerror=()=>{M(new Error(z.statusText))},z.onload=()=>{if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){let F=z.response;if(m.type==="json")try{F=JSON.parse(z.response)}catch(ie){return M(ie)}M(null,F,z.getResponseHeader("Cache-Control"),z.getResponseHeader("Expires"))}else{const F=new Blob([z.response],{type:z.getResponseHeader("Content-Type")});M(new ee(z.status,z.statusText,m.url,F))}},z.send(m.body),{cancel:()=>z.abort()}}(c,a)},Te=function(c,a){return xe(v(c,{type:"arrayBuffer"}),a)};function ze(c){const a=window.document.createElement("a");return a.href=c,a.protocol===window.document.location.protocol&&a.host===window.document.location.host}const Ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ie,Be;Ie=[],Be=0;const He=function(c,a){if(ke.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),Be>=B.MAX_PARALLEL_IMAGE_REQUESTS){const z={requestParameters:c,callback:a,cancelled:!1,cancel(){this.cancelled=!0}};return Ie.push(z),z}Be++;let d=!1;const m=()=>{if(!d)for(d=!0,Be--;Ie.length&&Be<B.MAX_PARALLEL_IMAGE_REQUESTS;){const z=Ie.shift(),{requestParameters:F,callback:ie,cancelled:ae}=z;ae||(z.cancel=He(F,ie).cancel)}},M=Te(c,(z,F,ie,ae)=>{m(),z?a(z):F&&function(_e,Re){typeof createImageBitmap=="function"?function(je,Ge){const Ye=new Blob([new Uint8Array(je)],{type:"image/png"});createImageBitmap(Ye).then(Ze=>{Ge(null,Ze)}).catch(Ze=>{Ge(new Error(`Could not load image because of ${Ze.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(_e,Re):function(je,Ge){const Ye=new Image;Ye.onload=()=>{Ge(null,Ye),URL.revokeObjectURL(Ye.src),Ye.onload=null,window.requestAnimationFrame(()=>{Ye.src=Ce})},Ye.onerror=()=>Ge(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Ze=new Blob([new Uint8Array(je)],{type:"image/png"});Ye.src=je.byteLength?URL.createObjectURL(Ze):Ce}(_e,Re)}(F,(_e,Re)=>{_e!=null?a(_e):Re!=null&&a(null,Re,{cacheControl:ie,expires:ae})})});return{cancel:()=>{M.cancel(),m()}}};function Ae(c,a,d){d[c]&&d[c].indexOf(a)!==-1||(d[c]=d[c]||[],d[c].push(a))}function ye(c,a,d){if(d&&d[c]){const m=d[c].indexOf(a);m!==-1&&d[c].splice(m,1)}}class ge{constructor(a,d={}){v(this,d),this.type=a}}class Me extends ge{constructor(a,d={}){super("error",v({error:a},d))}}class De{on(a,d){return this._listeners=this._listeners||{},Ae(a,d,this._listeners),this}off(a,d){return ye(a,d,this._listeners),ye(a,d,this._oneTimeListeners),this}once(a,d){return this._oneTimeListeners=this._oneTimeListeners||{},Ae(a,d,this._oneTimeListeners),this}fire(a,d){typeof a=="string"&&(a=new ge(a,d||{}));const m=a.type;if(this.listens(m)){a.target=this;const M=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const ie of M)ie.call(this,a);const z=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const ie of z)ye(m,ie,this._oneTimeListeners),ie.call(this,a);const F=this._eventedParent;F&&(v(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),F.fire(a))}else a instanceof Me&&console.error(a.error);return this}listens(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)}setEventedParent(a,d){return this._eventedParent=a,this._eventedParentData=d,this}}var Pe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Fe{constructor(a,d,m,M){this.message=(a?`${a}: `:"")+m,M&&(this.identifier=M),d!=null&&d.__line__&&(this.line=d.__line__)}}function Xe(c){const a=c.value;return a?[new Fe(c.key,a,"constants have been deprecated as of v8")]:[]}function tt(c,...a){for(const d of a)for(const m in d)c[m]=d[m];return c}function nt(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function ht(c){if(Array.isArray(c))return c.map(ht);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const a={};for(const d in c)a[d]=ht(c[d]);return a}return nt(c)}class gt extends Error{constructor(a,d){super(d),this.message=d,this.key=a}}class Tt{constructor(a,d=[]){this.parent=a,this.bindings={};for(const[m,M]of d)this.bindings[m]=M}concat(a){return new Tt(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const Lt={kind:"null"},ft={kind:"number"},Et={kind:"string"},Ct={kind:"boolean"},si={kind:"color"},di={kind:"object"},qt={kind:"value"},cn={kind:"collator"},Xi={kind:"formatted"},xn={kind:"padding"},Fn={kind:"resolvedImage"};function sn(c,a){return{kind:"array",itemType:c,N:a}}function dt(c){if(c.kind==="array"){const a=dt(c.itemType);return typeof c.N=="number"?`array<${a}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${a}>`}return c.kind}const bt=[Lt,ft,Et,Ct,si,Xi,di,sn(qt),xn,Fn];function It(c,a){if(a.kind==="error")return null;if(c.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!It(c.itemType,a.itemType))&&(typeof c.N!="number"||c.N===a.N))return null}else{if(c.kind===a.kind)return null;if(c.kind==="value"){for(const d of bt)if(!It(d,a))return null}}return`Expected ${dt(c)} but found ${dt(a)} instead.`}function Ft(c,a){return a.some(d=>d.kind===c.kind)}function Yt(c,a){return a.some(d=>d==="null"?c===null:d==="array"?Array.isArray(c):d==="object"?c&&!Array.isArray(c)&&typeof c=="object":d===typeof c)}var bi,Oi={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function hi(c){return(c=Math.round(c))<0?0:c>255?255:c}function qe(c){return hi(c[c.length-1]==="%"?parseFloat(c)/100*255:parseInt(c))}function ve(c){return(a=c[c.length-1]==="%"?parseFloat(c)/100:parseFloat(c))<0?0:a>1?1:a;var a}function Le(c,a,d){return d<0?d+=1:d>1&&(d-=1),6*d<1?c+(a-c)*d*6:2*d<1?a:3*d<2?c+(a-c)*(2/3-d)*6:c}try{bi={}.parseCSSColor=function(c){var a,d=c.replace(/ /g,"").toLowerCase();if(d in Oi)return Oi[d].slice();if(d[0]==="#")return d.length===4?(a=parseInt(d.substr(1),16))>=0&&a<=4095?[(3840&a)>>4|(3840&a)>>8,240&a|(240&a)>>4,15&a|(15&a)<<4,1]:null:d.length===7&&(a=parseInt(d.substr(1),16))>=0&&a<=16777215?[(16711680&a)>>16,(65280&a)>>8,255&a,1]:null;var m=d.indexOf("("),M=d.indexOf(")");if(m!==-1&&M+1===d.length){var z=d.substr(0,m),F=d.substr(m+1,M-(m+1)).split(","),ie=1;switch(z){case"rgba":if(F.length!==4)return null;ie=ve(F.pop());case"rgb":return F.length!==3?null:[qe(F[0]),qe(F[1]),qe(F[2]),ie];case"hsla":if(F.length!==4)return null;ie=ve(F.pop());case"hsl":if(F.length!==3)return null;var ae=(parseFloat(F[0])%360+360)%360/360,_e=ve(F[1]),Re=ve(F[2]),je=Re<=.5?Re*(_e+1):Re+_e-Re*_e,Ge=2*Re-je;return[hi(255*Le(Ge,je,ae+1/3)),hi(255*Le(Ge,je,ae)),hi(255*Le(Ge,je,ae-1/3)),ie];default:return null}}return null}}catch{}class Ve{constructor(a,d,m,M=1){this.r=a,this.g=d,this.b=m,this.a=M}static parse(a){if(!a)return;if(a instanceof Ve)return a;if(typeof a!="string")return;const d=bi(a);return d?new Ve(d[0]/255*d[3],d[1]/255*d[3],d[2]/255*d[3],d[3]):void 0}toString(){const[a,d,m,M]=this.toArray();return`rgba(${Math.round(a)},${Math.round(d)},${Math.round(m)},${M})`}toArray(){const{r:a,g:d,b:m,a:M}=this;return M===0?[0,0,0,0]:[255*a/M,255*d/M,255*m/M,M]}}Ve.black=new Ve(0,0,0,1),Ve.white=new Ve(1,1,1,1),Ve.transparent=new Ve(0,0,0,0),Ve.red=new Ve(1,0,0,1);class Ke{constructor(a,d,m){this.sensitivity=a?d?"variant":"case":d?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,d){return this.collator.compare(a,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class st{constructor(a,d,m,M,z){this.text=a,this.image=d,this.scale=m,this.fontStack=M,this.textColor=z}}class ct{constructor(a){this.sections=a}static fromString(a){return new ct([new st(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(a=>a.text.length!==0||a.image&&a.image.name.length!==0)}static factory(a){return a instanceof ct?a:ct.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map(a=>a.text).join("")}}class ot{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof ot)return a;if(typeof a=="number")return new ot([a,a,a,a]);if(Array.isArray(a)&&!(a.length<1||a.length>4)){for(const d of a)if(typeof d!="number")return;switch(a.length){case 1:a=[a[0],a[0],a[0],a[0]];break;case 2:a=[a[0],a[1],a[0],a[1]];break;case 3:a=[a[0],a[1],a[2],a[1]]}return new ot(a)}}toString(){return JSON.stringify(this.values)}}class rt{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new rt({name:a,available:!1}):null}}function mt(c,a,d,m){return typeof c=="number"&&c>=0&&c<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof d=="number"&&d>=0&&d<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[c,a,d,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[c,a,d,m]:[c,a,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function At(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Ve||c instanceof Ke||c instanceof ct||c instanceof ot||c instanceof rt)return!0;if(Array.isArray(c)){for(const a of c)if(!At(a))return!1;return!0}if(typeof c=="object"){for(const a in c)if(!At(c[a]))return!1;return!0}return!1}function Nt(c){if(c===null)return Lt;if(typeof c=="string")return Et;if(typeof c=="boolean")return Ct;if(typeof c=="number")return ft;if(c instanceof Ve)return si;if(c instanceof Ke)return cn;if(c instanceof ct)return Xi;if(c instanceof ot)return xn;if(c instanceof rt)return Fn;if(Array.isArray(c)){const a=c.length;let d;for(const m of c){const M=Nt(m);if(d){if(d===M)continue;d=qt;break}d=M}return sn(d||qt,a)}return di}function Rt(c){const a=typeof c;return c===null?"":a==="string"||a==="number"||a==="boolean"?String(c):c instanceof Ve||c instanceof ct||c instanceof ot||c instanceof rt?c.toString():JSON.stringify(c)}class oi{constructor(a,d){this.type=a,this.value=d}static parse(a,d){if(a.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!At(a[1]))return d.error("invalid value");const m=a[1];let M=Nt(m);const z=d.expectedType;return M.kind!=="array"||M.N!==0||!z||z.kind!=="array"||typeof z.N=="number"&&z.N!==0||(M=z),new oi(M,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Qt{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}const pi={string:Et,number:ft,boolean:Ct,object:di};class vi{constructor(a,d){this.type=a,this.args=d}static parse(a,d){if(a.length<2)return d.error("Expected at least one argument.");let m,M=1;const z=a[0];if(z==="array"){let ie,ae;if(a.length>2){const _e=a[1];if(typeof _e!="string"||!(_e in pi)||_e==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);ie=pi[_e],M++}else ie=qt;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return d.error('The length argument to "array" must be a positive integer literal',2);ae=a[2],M++}m=sn(ie,ae)}else{if(!pi[z])throw new Error(`Types doesn't contain name = ${z}`);m=pi[z]}const F=[];for(;M<a.length;M++){const ie=d.parse(a[M],M,qt);if(!ie)return null;F.push(ie)}return new vi(m,F)}evaluate(a){for(let d=0;d<this.args.length;d++){const m=this.args[d].evaluate(a);if(!It(this.type,Nt(m)))return m;if(d===this.args.length-1)throw new Qt(`Expected value to be of type ${dt(this.type)}, but found ${dt(Nt(m))} instead.`)}throw new Error}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const $i={"to-boolean":Ct,"to-color":si,"to-number":ft,"to-string":Et};class _i{constructor(a,d){this.type=a,this.args=d}static parse(a,d){if(a.length<2)return d.error("Expected at least one argument.");const m=a[0];if(!$i[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&a.length!==2)return d.error("Expected one argument.");const M=$i[m],z=[];for(let F=1;F<a.length;F++){const ie=d.parse(a[F],F,qt);if(!ie)return null;z.push(ie)}return new _i(M,z)}evaluate(a){if(this.type.kind==="boolean")return!!this.args[0].evaluate(a);if(this.type.kind==="color"){let d,m;for(const M of this.args){if(d=M.evaluate(a),m=null,d instanceof Ve)return d;if(typeof d=="string"){const z=a.parseColor(d);if(z)return z}else if(Array.isArray(d)&&(m=d.length<3||d.length>4?`Invalid rbga value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:mt(d[0],d[1],d[2],d[3]),!m))return new Ve(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new Qt(m||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}if(this.type.kind==="padding"){let d;for(const m of this.args){d=m.evaluate(a);const M=ot.parse(d);if(M)return M}throw new Qt(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}if(this.type.kind==="number"){let d=null;for(const m of this.args){if(d=m.evaluate(a),d===null)return 0;const M=Number(d);if(!isNaN(M))return M}throw new Qt(`Could not convert ${JSON.stringify(d)} to number.`)}return this.type.kind==="formatted"?ct.fromString(Rt(this.args[0].evaluate(a))):this.type.kind==="resolvedImage"?rt.fromString(Rt(this.args[0].evaluate(a))):Rt(this.args[0].evaluate(a))}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const Pi=["Unknown","Point","LineString","Polygon"];class Ui{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Pi[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let d=this._parseColorCache[a];return d||(d=this._parseColorCache[a]=Ve.parse(a)),d}}class ji{constructor(a,d,m,M){this.name=a,this.type=d,this._evaluate=m,this.args=M}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}static parse(a,d){const m=a[0],M=ji.definitions[m];if(!M)return d.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const z=Array.isArray(M)?M[0]:M.type,F=Array.isArray(M)?[[M[1],M[2]]]:M.overloads,ie=F.filter(([_e])=>!Array.isArray(_e)||_e.length===a.length-1);let ae=null;for(const[_e,Re]of ie){ae=new Yu(d.registry,d.path,null,d.scope);const je=[];let Ge=!1;for(let Ye=1;Ye<a.length;Ye++){const Ze=a[Ye],ut=Array.isArray(_e)?_e[Ye-1]:_e.type,lt=ae.parse(Ze,1+je.length,ut);if(!lt){Ge=!0;break}je.push(lt)}if(!Ge)if(Array.isArray(_e)&&_e.length!==je.length)ae.error(`Expected ${_e.length} arguments, but found ${je.length} instead.`);else{for(let Ye=0;Ye<je.length;Ye++){const Ze=Array.isArray(_e)?_e[Ye]:_e.type,ut=je[Ye];ae.concat(Ye+1).checkSubtype(Ze,ut.type)}if(ae.errors.length===0)return new ji(m,z,Re,je)}}if(ie.length===1)d.errors.push(...ae.errors);else{const _e=(ie.length?ie:F).map(([je])=>{return Ge=je,Array.isArray(Ge)?`(${Ge.map(dt).join(", ")})`:`(${dt(Ge.type)}...)`;var Ge}).join(" | "),Re=[];for(let je=1;je<a.length;je++){const Ge=d.parse(a[je],1+Re.length);if(!Ge)return null;Re.push(dt(Ge.type))}d.error(`Expected arguments of type ${_e}, but found (${Re.join(", ")}) instead.`)}return null}static register(a,d){ji.definitions=d;for(const m in d)a[m]=ji}}class pn{constructor(a,d,m){this.type=cn,this.locale=m,this.caseSensitive=a,this.diacriticSensitive=d}static parse(a,d){if(a.length!==2)return d.error("Expected one argument.");const m=a[1];if(typeof m!="object"||Array.isArray(m))return d.error("Collator options argument must be an object.");const M=d.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,Ct);if(!M)return null;const z=d.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,Ct);if(!z)return null;let F=null;return m.locale&&(F=d.parse(m.locale,1,Et),!F)?null:new pn(M,z,F)}evaluate(a){return new Ke(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}}const Hn=8192;function br(c,a){c[0]=Math.min(c[0],a[0]),c[1]=Math.min(c[1],a[1]),c[2]=Math.max(c[2],a[0]),c[3]=Math.max(c[3],a[1])}function Ur(c,a){return!(c[0]<=a[0]||c[2]>=a[2]||c[1]<=a[1]||c[3]>=a[3])}function wh(c,a){const d=(180+c[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,M=Math.pow(2,a.z);return[Math.round(d*M*Hn),Math.round(m*M*Hn)]}function Rc(c,a,d){const m=c[0]-a[0],M=c[1]-a[1],z=c[0]-d[0],F=c[1]-d[1];return m*F-z*M==0&&m*z<=0&&M*F<=0}function Bn(c,a){let d=!1;for(let F=0,ie=a.length;F<ie;F++){const ae=a[F];for(let _e=0,Re=ae.length;_e<Re-1;_e++){if(Rc(c,ae[_e],ae[_e+1]))return!1;(M=ae[_e])[1]>(m=c)[1]!=(z=ae[_e+1])[1]>m[1]&&m[0]<(z[0]-M[0])*(m[1]-M[1])/(z[1]-M[1])+M[0]&&(d=!d)}}var m,M,z;return d}function wx(c,a){for(let d=0;d<a.length;d++)if(Bn(c,a[d]))return!0;return!1}function Hu(c,a,d,m){const M=m[0]-d[0],z=m[1]-d[1],F=(c[0]-d[0])*z-M*(c[1]-d[1]),ie=(a[0]-d[0])*z-M*(a[1]-d[1]);return F>0&&ie<0||F<0&&ie>0}function Tx(c,a,d){for(const _e of d)for(let Re=0;Re<_e.length-1;++Re)if((ie=[(F=_e[Re+1])[0]-(z=_e[Re])[0],F[1]-z[1]])[0]*(ae=[(M=a)[0]-(m=c)[0],M[1]-m[1]])[1]-ie[1]*ae[0]!=0&&Hu(m,M,z,F)&&Hu(z,F,m,M))return!0;var m,M,z,F,ie,ae;return!1}function Th(c,a){for(let d=0;d<c.length;++d)if(!Bn(c[d],a))return!1;for(let d=0;d<c.length-1;++d)if(Tx(c[d],c[d+1],a))return!1;return!0}function am(c,a){for(let d=0;d<a.length;d++)if(Th(c,a[d]))return!0;return!1}function Ch(c,a,d){const m=[];for(let M=0;M<c.length;M++){const z=[];for(let F=0;F<c[M].length;F++){const ie=wh(c[M][F],d);br(a,ie),z.push(ie)}m.push(z)}return m}function Sh(c,a,d){const m=[];for(let M=0;M<c.length;M++){const z=Ch(c[M],a,d);m.push(z)}return m}function Eh(c,a,d,m){if(c[0]<d[0]||c[0]>d[2]){const M=.5*m;let z=c[0]-d[0]>M?-m:d[0]-c[0]>M?m:0;z===0&&(z=c[0]-d[2]>M?-m:d[2]-c[0]>M?m:0),c[0]+=z}br(a,c)}function om(c,a,d,m){const M=Math.pow(2,m.z)*Hn,z=[m.x*Hn,m.y*Hn],F=[];for(const ie of c)for(const ae of ie){const _e=[ae.x+z[0],ae.y+z[1]];Eh(_e,a,d,M),F.push(_e)}return F}function lm(c,a,d,m){const M=Math.pow(2,m.z)*Hn,z=[m.x*Hn,m.y*Hn],F=[];for(const ae of c){const _e=[];for(const Re of ae){const je=[Re.x+z[0],Re.y+z[1]];br(a,je),_e.push(je)}F.push(_e)}if(a[2]-a[0]<=M/2){(ie=a)[0]=ie[1]=1/0,ie[2]=ie[3]=-1/0;for(const ae of F)for(const _e of ae)Eh(_e,a,d,M)}var ie;return F}class nl{constructor(a,d){this.type=Ct,this.geojson=a,this.geometries=d}static parse(a,d){if(a.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(At(a[1])){const m=a[1];if(m.type==="FeatureCollection")for(let M=0;M<m.features.length;++M){const z=m.features[M].geometry.type;if(z==="Polygon"||z==="MultiPolygon")return new nl(m,m.features[M].geometry)}else if(m.type==="Feature"){const M=m.geometry.type;if(M==="Polygon"||M==="MultiPolygon")return new nl(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new nl(m,m)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(d,m){const M=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],F=d.canonicalID();if(m.type==="Polygon"){const ie=Ch(m.coordinates,z,F),ae=om(d.geometry(),M,z,F);if(!Ur(M,z))return!1;for(const _e of ae)if(!Bn(_e,ie))return!1}if(m.type==="MultiPolygon"){const ie=Sh(m.coordinates,z,F),ae=om(d.geometry(),M,z,F);if(!Ur(M,z))return!1;for(const _e of ae)if(!wx(_e,ie))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(d,m){const M=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],F=d.canonicalID();if(m.type==="Polygon"){const ie=Ch(m.coordinates,z,F),ae=lm(d.geometry(),M,z,F);if(!Ur(M,z))return!1;for(const _e of ae)if(!Th(_e,ie))return!1}if(m.type==="MultiPolygon"){const ie=Sh(m.coordinates,z,F),ae=lm(d.geometry(),M,z,F);if(!Ur(M,z))return!1;for(const _e of ae)if(!am(_e,ie))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function qu(c){if(c instanceof ji&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof nl)return!1;let a=!0;return c.eachChild(d=>{a&&!qu(d)&&(a=!1)}),a}function Nl(c){if(c instanceof ji&&c.name==="feature-state")return!1;let a=!0;return c.eachChild(d=>{a&&!Nl(d)&&(a=!1)}),a}function Lc(c,a){if(c instanceof ji&&a.indexOf(c.name)>=0)return!1;let d=!0;return c.eachChild(m=>{d&&!Lc(m,a)&&(d=!1)}),d}class Wu{constructor(a,d){this.type=d.type,this.name=a,this.boundExpression=d}static parse(a,d){if(a.length!==2||typeof a[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const m=a[1];return d.scope.has(m)?new Wu(m,d.scope.get(m)):d.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}}class Yu{constructor(a,d=[],m,M=new Tt,z=[]){this.registry=a,this.path=d,this.key=d.map(F=>`[${F}]`).join(""),this.scope=M,this.errors=z,this.expectedType=m}parse(a,d,m,M,z={}){return d?this.concat(d,m,M)._parse(a,z):this._parse(a,z)}_parse(a,d){function m(M,z,F){return F==="assert"?new vi(z,[M]):F==="coerce"?new _i(z,[M]):M}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const M=a[0];if(typeof M!="string")return this.error(`Expression name must be a string, but found ${typeof M} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const z=this.registry[M];if(z){let F=z.parse(a,this);if(!F)return null;if(this.expectedType){const ie=this.expectedType,ae=F.type;if(ie.kind!=="string"&&ie.kind!=="number"&&ie.kind!=="boolean"&&ie.kind!=="object"&&ie.kind!=="array"||ae.kind!=="value")if(ie.kind!=="color"&&ie.kind!=="formatted"&&ie.kind!=="resolvedImage"||ae.kind!=="value"&&ae.kind!=="string")if(ie.kind!=="padding"||ae.kind!=="value"&&ae.kind!=="number"&&ae.kind!=="array"){if(this.checkSubtype(ie,ae))return null}else F=m(F,ie,d.typeAnnotation||"coerce");else F=m(F,ie,d.typeAnnotation||"coerce");else F=m(F,ie,d.typeAnnotation||"assert")}if(!(F instanceof oi)&&F.type.kind!=="resolvedImage"&&zc(F)){const ie=new Ui;try{F=new oi(F.type,F.evaluate(ie))}catch(ae){return this.error(ae.message),null}}return F}return this.error(`Unknown expression "${M}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,d,m){const M=typeof a=="number"?this.path.concat(a):this.path,z=m?this.scope.concat(m):this.scope;return new Yu(this.registry,M,d||null,z,this.errors)}error(a,...d){const m=`${this.key}${d.map(M=>`[${M}]`).join("")}`;this.errors.push(new gt(m,a))}checkSubtype(a,d){const m=It(a,d);return m&&this.error(m),m}}function zc(c){if(c instanceof Wu)return zc(c.boundExpression);if(c instanceof ji&&c.name==="error"||c instanceof pn||c instanceof nl)return!1;const a=c instanceof _i||c instanceof vi;let d=!0;return c.eachChild(m=>{d=a?d&&zc(m):d&&m instanceof oi}),!!d&&qu(c)&&Lc(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Zu(c,a){const d=c.length-1;let m,M,z=0,F=d,ie=0;for(;z<=F;)if(ie=Math.floor((z+F)/2),m=c[ie],M=c[ie+1],m<=a){if(ie===d||a<M)return ie;z=ie+1}else{if(!(m>a))throw new Qt("Input is not a number.");F=ie-1}return 0}class Nc{constructor(a,d,m){this.type=a,this.input=d,this.labels=[],this.outputs=[];for(const[M,z]of m)this.labels.push(M),this.outputs.push(z)}static parse(a,d){if(a.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return d.error("Expected an even number of arguments.");const m=d.parse(a[1],1,ft);if(!m)return null;const M=[];let z=null;d.expectedType&&d.expectedType.kind!=="value"&&(z=d.expectedType);for(let F=1;F<a.length;F+=2){const ie=F===1?-1/0:a[F],ae=a[F+1],_e=F,Re=F+1;if(typeof ie!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_e);if(M.length&&M[M.length-1][0]>=ie)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',_e);const je=d.parse(ae,Re,z);if(!je)return null;z=z||je.type,M.push([ie,je])}return new Nc(z,m,M)}evaluate(a){const d=this.labels,m=this.outputs;if(d.length===1)return m[0].evaluate(a);const M=this.input.evaluate(a);if(M<=d[0])return m[0].evaluate(a);const z=d.length;return M>=d[z-1]?m[z-1].evaluate(a):m[Zu(d,M)].evaluate(a)}eachChild(a){a(this.input);for(const d of this.outputs)a(d)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function pr(c,a,d){return c*(1-d)+a*d}var Oc=Object.freeze({__proto__:null,number:pr,color:function(c,a,d){return new Ve(pr(c.r,a.r,d),pr(c.g,a.g,d),pr(c.b,a.b,d),pr(c.a,a.a,d))},array:function(c,a,d){return c.map((m,M)=>pr(m,a[M],d))},padding:function(c,a,d){const m=c.values,M=a.values;return new ot([pr(m[0],M[0],d),pr(m[1],M[1],d),pr(m[2],M[2],d),pr(m[3],M[3],d)])}});const kh=.95047,cm=1.08883,um=4/29,Xu=6/29,Ah=3*Xu*Xu,Cx=Math.PI/180,Sx=180/Math.PI;function Mh(c){return c>.008856451679035631?Math.pow(c,1/3):c/Ah+um}function Ph(c){return c>Xu?c*c*c:Ah*(c-um)}function Ih(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function Dh(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function dm(c){const a=Dh(c.r),d=Dh(c.g),m=Dh(c.b),M=Mh((.4124564*a+.3575761*d+.1804375*m)/kh),z=Mh((.2126729*a+.7151522*d+.072175*m)/1);return{l:116*z-16,a:500*(M-z),b:200*(z-Mh((.0193339*a+.119192*d+.9503041*m)/cm)),alpha:c.a}}function Dn(c){let a=(c.l+16)/116,d=isNaN(c.a)?a:a+c.a/500,m=isNaN(c.b)?a:a-c.b/200;return a=1*Ph(a),d=kh*Ph(d),m=cm*Ph(m),new Ve(Ih(3.2404542*d-1.5371385*a-.4985314*m),Ih(-.969266*d+1.8760108*a+.041556*m),Ih(.0556434*d-.2040259*a+1.0572252*m),c.alpha)}function Ex(c,a,d){const m=a-c;return c+d*(m>180||m<-180?m-360*Math.round(m/360):m)}const jc={forward:dm,reverse:Dn,interpolate:function(c,a,d){return{l:pr(c.l,a.l,d),a:pr(c.a,a.a,d),b:pr(c.b,a.b,d),alpha:pr(c.alpha,a.alpha,d)}}},Fc={forward:function(c){const{l:a,a:d,b:m}=dm(c),M=Math.atan2(m,d)*Sx;return{h:M<0?M+360:M,c:Math.sqrt(d*d+m*m),l:a,alpha:c.a}},reverse:function(c){const a=c.h*Cx,d=c.c;return Dn({l:c.l,a:Math.cos(a)*d,b:Math.sin(a)*d,alpha:c.alpha})},interpolate:function(c,a,d){return{h:Ex(c.h,a.h,d),c:pr(c.c,a.c,d),l:pr(c.l,a.l,d),alpha:pr(c.alpha,a.alpha,d)}}};var hm=Object.freeze({__proto__:null,lab:jc,hcl:Fc});class Js{constructor(a,d,m,M,z){this.type=a,this.operator=d,this.interpolation=m,this.input=M,this.labels=[],this.outputs=[];for(const[F,ie]of z)this.labels.push(F),this.outputs.push(ie)}static interpolationFactor(a,d,m,M){let z=0;if(a.name==="exponential")z=Rh(d,a.base,m,M);else if(a.name==="linear")z=Rh(d,1,m,M);else if(a.name==="cubic-bezier"){const F=a.controlPoints;z=new p(F[0],F[1],F[2],F[3]).solve(Rh(d,1,m,M))}return z}static parse(a,d){let[m,M,z,...F]=a;if(!Array.isArray(M)||M.length===0)return d.error("Expected an interpolation type expression.",1);if(M[0]==="linear")M={name:"linear"};else if(M[0]==="exponential"){const _e=M[1];if(typeof _e!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);M={name:"exponential",base:_e}}else{if(M[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(M[0])}`,1,0);{const _e=M.slice(1);if(_e.length!==4||_e.some(Re=>typeof Re!="number"||Re<0||Re>1))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);M={name:"cubic-bezier",controlPoints:_e}}}if(a.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(z=d.parse(z,2,ft),!z)return null;const ie=[];let ae=null;m==="interpolate-hcl"||m==="interpolate-lab"?ae=si:d.expectedType&&d.expectedType.kind!=="value"&&(ae=d.expectedType);for(let _e=0;_e<F.length;_e+=2){const Re=F[_e],je=F[_e+1],Ge=_e+3,Ye=_e+4;if(typeof Re!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ge);if(ie.length&&ie[ie.length-1][0]>=Re)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ge);const Ze=d.parse(je,Ye,ae);if(!Ze)return null;ae=ae||Ze.type,ie.push([Re,Ze])}return ae.kind==="number"||ae.kind==="color"||ae.kind==="padding"||ae.kind==="array"&&ae.itemType.kind==="number"&&typeof ae.N=="number"?new Js(ae,m,M,z,ie):d.error(`Type ${dt(ae)} is not interpolatable.`)}evaluate(a){const d=this.labels,m=this.outputs;if(d.length===1)return m[0].evaluate(a);const M=this.input.evaluate(a);if(M<=d[0])return m[0].evaluate(a);const z=d.length;if(M>=d[z-1])return m[z-1].evaluate(a);const F=Zu(d,M),ie=Js.interpolationFactor(this.interpolation,M,d[F],d[F+1]),ae=m[F].evaluate(a),_e=m[F+1].evaluate(a);return this.operator==="interpolate"?Oc[this.type.kind.toLowerCase()](ae,_e,ie):this.operator==="interpolate-hcl"?Fc.reverse(Fc.interpolate(Fc.forward(ae),Fc.forward(_e),ie)):jc.reverse(jc.interpolate(jc.forward(ae),jc.forward(_e),ie))}eachChild(a){a(this.input);for(const d of this.outputs)a(d)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function Rh(c,a,d,m){const M=m-d,z=c-d;return M===0?0:a===1?z/M:(Math.pow(a,z)-1)/(Math.pow(a,M)-1)}class Ku{constructor(a,d){this.type=a,this.args=d}static parse(a,d){if(a.length<2)return d.error("Expectected at least one argument.");let m=null;const M=d.expectedType;M&&M.kind!=="value"&&(m=M);const z=[];for(const ie of a.slice(1)){const ae=d.parse(ie,1+z.length,m,void 0,{typeAnnotation:"omit"});if(!ae)return null;m=m||ae.type,z.push(ae)}if(!m)throw new Error("No output type");const F=M&&z.some(ie=>It(M,ie.type));return new Ku(F?qt:m,z)}evaluate(a){let d,m=null,M=0;for(const z of this.args)if(M++,m=z.evaluate(a),m&&m instanceof rt&&!m.available&&(d||(d=m.name),m=null,M===this.args.length&&(m=d)),m!==null)break;return m}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}class Qu{constructor(a,d){this.type=d.type,this.bindings=[].concat(a),this.result=d}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const d of this.bindings)a(d[1]);a(this.result)}static parse(a,d){if(a.length<4)return d.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const m=[];for(let z=1;z<a.length-1;z+=2){const F=a[z];if(typeof F!="string")return d.error(`Expected string, but found ${typeof F} instead.`,z);if(/[^a-zA-Z0-9_]/.test(F))return d.error("Variable names must contain only alphanumeric characters or '_'.",z);const ie=d.parse(a[z+1],z+1);if(!ie)return null;m.push([F,ie])}const M=d.parse(a[a.length-1],a.length-1,d.expectedType,m);return M?new Qu(m,M):null}outputDefined(){return this.result.outputDefined()}}class Lh{constructor(a,d,m){this.type=a,this.index=d,this.input=m}static parse(a,d){if(a.length!==3)return d.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const m=d.parse(a[1],1,ft),M=d.parse(a[2],2,sn(d.expectedType||qt));return m&&M?new Lh(M.type.itemType,m,M):null}evaluate(a){const d=this.index.evaluate(a),m=this.input.evaluate(a);if(d<0)throw new Qt(`Array index out of bounds: ${d} < 0.`);if(d>=m.length)throw new Qt(`Array index out of bounds: ${d} > ${m.length-1}.`);if(d!==Math.floor(d))throw new Qt(`Array index must be an integer, but found ${d} instead.`);return m[d]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}}class zh{constructor(a,d){this.type=Ct,this.needle=a,this.haystack=d}static parse(a,d){if(a.length!==3)return d.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const m=d.parse(a[1],1,qt),M=d.parse(a[2],2,qt);return m&&M?Ft(m.type,[Ct,Et,ft,Lt,qt])?new zh(m,M):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${dt(m.type)} instead`):null}evaluate(a){const d=this.needle.evaluate(a),m=this.haystack.evaluate(a);if(!m)return!1;if(!Yt(d,["boolean","string","number","null"]))throw new Qt(`Expected first argument to be of type boolean, string, number or null, but found ${dt(Nt(d))} instead.`);if(!Yt(m,["string","array"]))throw new Qt(`Expected second argument to be of type array or string, but found ${dt(Nt(m))} instead.`);return m.indexOf(d)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}}class Ju{constructor(a,d,m){this.type=ft,this.needle=a,this.haystack=d,this.fromIndex=m}static parse(a,d){if(a.length<=2||a.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const m=d.parse(a[1],1,qt),M=d.parse(a[2],2,qt);if(!m||!M)return null;if(!Ft(m.type,[Ct,Et,ft,Lt,qt]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${dt(m.type)} instead`);if(a.length===4){const z=d.parse(a[3],3,ft);return z?new Ju(m,M,z):null}return new Ju(m,M)}evaluate(a){const d=this.needle.evaluate(a),m=this.haystack.evaluate(a);if(!Yt(d,["boolean","string","number","null"]))throw new Qt(`Expected first argument to be of type boolean, string, number or null, but found ${dt(Nt(d))} instead.`);if(!Yt(m,["string","array"]))throw new Qt(`Expected second argument to be of type array or string, but found ${dt(Nt(m))} instead.`);if(this.fromIndex){const M=this.fromIndex.evaluate(a);return m.indexOf(d,M)}return m.indexOf(d)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}}class Nh{constructor(a,d,m,M,z,F){this.inputType=a,this.type=d,this.input=m,this.cases=M,this.outputs=z,this.otherwise=F}static parse(a,d){if(a.length<5)return d.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return d.error("Expected an even number of arguments.");let m,M;d.expectedType&&d.expectedType.kind!=="value"&&(M=d.expectedType);const z={},F=[];for(let _e=2;_e<a.length-1;_e+=2){let Re=a[_e];const je=a[_e+1];Array.isArray(Re)||(Re=[Re]);const Ge=d.concat(_e);if(Re.length===0)return Ge.error("Expected at least one branch label.");for(const Ze of Re){if(typeof Ze!="number"&&typeof Ze!="string")return Ge.error("Branch labels must be numbers or strings.");if(typeof Ze=="number"&&Math.abs(Ze)>Number.MAX_SAFE_INTEGER)return Ge.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ze=="number"&&Math.floor(Ze)!==Ze)return Ge.error("Numeric branch labels must be integer values.");if(m){if(Ge.checkSubtype(m,Nt(Ze)))return null}else m=Nt(Ze);if(z[String(Ze)]!==void 0)return Ge.error("Branch labels must be unique.");z[String(Ze)]=F.length}const Ye=d.parse(je,_e,M);if(!Ye)return null;M=M||Ye.type,F.push(Ye)}const ie=d.parse(a[1],1,qt);if(!ie)return null;const ae=d.parse(a[a.length-1],a.length-1,M);return ae?ie.type.kind!=="value"&&d.concat(1).checkSubtype(m,ie.type)?null:new Nh(m,M,ie,z,F,ae):null}evaluate(a){const d=this.input.evaluate(a);return(Nt(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}}class Oh{constructor(a,d,m){this.type=a,this.branches=d,this.otherwise=m}static parse(a,d){if(a.length<4)return d.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return d.error("Expected an odd number of arguments.");let m;d.expectedType&&d.expectedType.kind!=="value"&&(m=d.expectedType);const M=[];for(let F=1;F<a.length-1;F+=2){const ie=d.parse(a[F],F,Ct);if(!ie)return null;const ae=d.parse(a[F+1],F+1,m);if(!ae)return null;M.push([ie,ae]),m=m||ae.type}const z=d.parse(a[a.length-1],a.length-1,m);if(!z)return null;if(!m)throw new Error("Can't infer output type");return new Oh(m,M,z)}evaluate(a){for(const[d,m]of this.branches)if(d.evaluate(a))return m.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[d,m]of this.branches)a(d),a(m);a(this.otherwise)}outputDefined(){return this.branches.every(([a,d])=>d.outputDefined())&&this.otherwise.outputDefined()}}class ed{constructor(a,d,m,M){this.type=a,this.input=d,this.beginIndex=m,this.endIndex=M}static parse(a,d){if(a.length<=2||a.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const m=d.parse(a[1],1,qt),M=d.parse(a[2],2,ft);if(!m||!M)return null;if(!Ft(m.type,[sn(qt),Et,qt]))return d.error(`Expected first argument to be of type array or string, but found ${dt(m.type)} instead`);if(a.length===4){const z=d.parse(a[3],3,ft);return z?new ed(m.type,m,M,z):null}return new ed(m.type,m,M)}evaluate(a){const d=this.input.evaluate(a),m=this.beginIndex.evaluate(a);if(!Yt(d,["string","array"]))throw new Qt(`Expected first argument to be of type array or string, but found ${dt(Nt(d))} instead.`);if(this.endIndex){const M=this.endIndex.evaluate(a);return d.slice(m,M)}return d.slice(m)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}}function pm(c,a){return c==="=="||c==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function fm(c,a,d,m){return m.compare(a,d)===0}function Ol(c,a,d){const m=c!=="=="&&c!=="!=";return class wk{constructor(z,F,ie){this.type=Ct,this.lhs=z,this.rhs=F,this.collator=ie,this.hasUntypedArgument=z.type.kind==="value"||F.type.kind==="value"}static parse(z,F){if(z.length!==3&&z.length!==4)return F.error("Expected two or three arguments.");const ie=z[0];let ae=F.parse(z[1],1,qt);if(!ae)return null;if(!pm(ie,ae.type))return F.concat(1).error(`"${ie}" comparisons are not supported for type '${dt(ae.type)}'.`);let _e=F.parse(z[2],2,qt);if(!_e)return null;if(!pm(ie,_e.type))return F.concat(2).error(`"${ie}" comparisons are not supported for type '${dt(_e.type)}'.`);if(ae.type.kind!==_e.type.kind&&ae.type.kind!=="value"&&_e.type.kind!=="value")return F.error(`Cannot compare types '${dt(ae.type)}' and '${dt(_e.type)}'.`);m&&(ae.type.kind==="value"&&_e.type.kind!=="value"?ae=new vi(_e.type,[ae]):ae.type.kind!=="value"&&_e.type.kind==="value"&&(_e=new vi(ae.type,[_e])));let Re=null;if(z.length===4){if(ae.type.kind!=="string"&&_e.type.kind!=="string"&&ae.type.kind!=="value"&&_e.type.kind!=="value")return F.error("Cannot use collator to compare non-string types.");if(Re=F.parse(z[3],3,cn),!Re)return null}return new wk(ae,_e,Re)}evaluate(z){const F=this.lhs.evaluate(z),ie=this.rhs.evaluate(z);if(m&&this.hasUntypedArgument){const ae=Nt(F),_e=Nt(ie);if(ae.kind!==_e.kind||ae.kind!=="string"&&ae.kind!=="number")throw new Qt(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${ae.kind}, ${_e.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const ae=Nt(F),_e=Nt(ie);if(ae.kind!=="string"||_e.kind!=="string")return a(z,F,ie)}return this.collator?d(z,F,ie,this.collator.evaluate(z)):a(z,F,ie)}eachChild(z){z(this.lhs),z(this.rhs),this.collator&&z(this.collator)}outputDefined(){return!0}}}const kx=Ol("==",function(c,a,d){return a===d},fm),Ax=Ol("!=",function(c,a,d){return a!==d},function(c,a,d,m){return!fm(0,a,d,m)}),Mx=Ol("<",function(c,a,d){return a<d},function(c,a,d,m){return m.compare(a,d)<0}),Px=Ol(">",function(c,a,d){return a>d},function(c,a,d,m){return m.compare(a,d)>0}),Ix=Ol("<=",function(c,a,d){return a<=d},function(c,a,d,m){return m.compare(a,d)<=0}),Dx=Ol(">=",function(c,a,d){return a>=d},function(c,a,d,m){return m.compare(a,d)>=0});class jh{constructor(a,d,m,M,z){this.type=Et,this.number=a,this.locale=d,this.currency=m,this.minFractionDigits=M,this.maxFractionDigits=z}static parse(a,d){if(a.length!==3)return d.error("Expected two arguments.");const m=d.parse(a[1],1,ft);if(!m)return null;const M=a[2];if(typeof M!="object"||Array.isArray(M))return d.error("NumberFormat options argument must be an object.");let z=null;if(M.locale&&(z=d.parse(M.locale,1,Et),!z))return null;let F=null;if(M.currency&&(F=d.parse(M.currency,1,Et),!F))return null;let ie=null;if(M["min-fraction-digits"]&&(ie=d.parse(M["min-fraction-digits"],1,ft),!ie))return null;let ae=null;return M["max-fraction-digits"]&&(ae=d.parse(M["max-fraction-digits"],1,ft),!ae)?null:new jh(m,z,F,ie,ae)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}}class td{constructor(a){this.type=Xi,this.sections=a}static parse(a,d){if(a.length<2)return d.error("Expected at least one argument.");const m=a[1];if(!Array.isArray(m)&&typeof m=="object")return d.error("First argument must be an image or text section.");const M=[];let z=!1;for(let F=1;F<=a.length-1;++F){const ie=a[F];if(z&&typeof ie=="object"&&!Array.isArray(ie)){z=!1;let ae=null;if(ie["font-scale"]&&(ae=d.parse(ie["font-scale"],1,ft),!ae))return null;let _e=null;if(ie["text-font"]&&(_e=d.parse(ie["text-font"],1,sn(Et)),!_e))return null;let Re=null;if(ie["text-color"]&&(Re=d.parse(ie["text-color"],1,si),!Re))return null;const je=M[M.length-1];je.scale=ae,je.font=_e,je.textColor=Re}else{const ae=d.parse(a[F],1,qt);if(!ae)return null;const _e=ae.type.kind;if(_e!=="string"&&_e!=="value"&&_e!=="null"&&_e!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");z=!0,M.push({content:ae,scale:null,font:null,textColor:null})}}return new td(M)}evaluate(a){return new ct(this.sections.map(d=>{const m=d.content.evaluate(a);return Nt(m)===Fn?new st("",m,null,null,null):new st(Rt(m),null,d.scale?d.scale.evaluate(a):null,d.font?d.font.evaluate(a).join(","):null,d.textColor?d.textColor.evaluate(a):null)}))}eachChild(a){for(const d of this.sections)a(d.content),d.scale&&a(d.scale),d.font&&a(d.font),d.textColor&&a(d.textColor)}outputDefined(){return!1}}class Fh{constructor(a){this.type=Fn,this.input=a}static parse(a,d){if(a.length!==2)return d.error("Expected two arguments.");const m=d.parse(a[1],1,Et);return m?new Fh(m):d.error("No image name provided.")}evaluate(a){const d=this.input.evaluate(a),m=rt.fromString(d);return m&&a.availableImages&&(m.available=a.availableImages.indexOf(d)>-1),m}eachChild(a){a(this.input)}outputDefined(){return!1}}class Bh{constructor(a){this.type=ft,this.input=a}static parse(a,d){if(a.length!==2)return d.error(`Expected 1 argument, but found ${a.length-1} instead.`);const m=d.parse(a[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${dt(m.type)} instead.`):new Bh(m):null}evaluate(a){const d=this.input.evaluate(a);if(typeof d=="string"||Array.isArray(d))return d.length;throw new Qt(`Expected value to be of type string or array, but found ${dt(Nt(d))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}}const jl={"==":kx,"!=":Ax,">":Px,"<":Mx,">=":Dx,"<=":Ix,array:vi,at:Lh,boolean:vi,case:Oh,coalesce:Ku,collator:pn,format:td,image:Fh,in:zh,"index-of":Ju,interpolate:Js,"interpolate-hcl":Js,"interpolate-lab":Js,length:Bh,let:Qu,literal:oi,match:Nh,number:vi,"number-format":jh,object:vi,slice:ed,step:Nc,string:vi,"to-boolean":_i,"to-color":_i,"to-number":_i,"to-string":_i,var:Wu,within:nl};function mm(c,[a,d,m,M]){a=a.evaluate(c),d=d.evaluate(c),m=m.evaluate(c);const z=M?M.evaluate(c):1,F=mt(a,d,m,z);if(F)throw new Qt(F);return new Ve(a/255*z,d/255*z,m/255*z,z)}function gm(c,a){return c in a}function $h(c,a){const d=a[c];return d===void 0?null:d}function Ao(c){return{type:c}}function ym(c){return{result:"success",value:c}}function Fl(c){return{result:"error",value:c}}function Bl(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function vr(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Uh(c){return!!c.expression&&c.expression.interpolated}function Ti(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function $l(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function fr(c){return c}function ir(c,a){const d=a.type==="color",m=c.stops&&typeof c.stops[0][0]=="object",M=m||!(m||c.property!==void 0),z=c.type||(Uh(a)?"exponential":"interval");if(d||a.type==="padding"){const _e=d?Ve.parse:ot.parse;(c=tt({},c)).stops&&(c.stops=c.stops.map(Re=>[Re[0],_e(Re[1])])),c.default=_e(c.default?c.default:a.default)}if(c.colorSpace&&c.colorSpace!=="rgb"&&!hm[c.colorSpace])throw new Error(`Unknown color space: ${c.colorSpace}`);let F,ie,ae;if(z==="exponential")F=bm;else if(z==="interval")F=Rx;else if(z==="categorical"){F=xm,ie=Object.create(null);for(const _e of c.stops)ie[_e[0]]=_e[1];ae=typeof c.stops[0][0]}else{if(z!=="identity")throw new Error(`Unknown function type "${z}"`);F=Lx}if(m){const _e={},Re=[];for(let Ye=0;Ye<c.stops.length;Ye++){const Ze=c.stops[Ye],ut=Ze[0].zoom;_e[ut]===void 0&&(_e[ut]={zoom:ut,type:c.type,property:c.property,default:c.default,stops:[]},Re.push(ut)),_e[ut].stops.push([Ze[0].value,Ze[1]])}const je=[];for(const Ye of Re)je.push([_e[Ye].zoom,ir(_e[Ye],a)]);const Ge={name:"linear"};return{kind:"composite",interpolationType:Ge,interpolationFactor:Js.interpolationFactor.bind(void 0,Ge),zoomStops:je.map(Ye=>Ye[0]),evaluate:({zoom:Ye},Ze)=>bm({stops:je,base:c.base},a,Ye).evaluate(Ye,Ze)}}if(M){const _e=z==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:_e,interpolationFactor:Js.interpolationFactor.bind(void 0,_e),zoomStops:c.stops.map(Re=>Re[0]),evaluate:({zoom:Re})=>F(c,a,Re,ie,ae)}}return{kind:"source",evaluate(_e,Re){const je=Re&&Re.properties?Re.properties[c.property]:void 0;return je===void 0?Mo(c.default,a.default):F(c,a,je,ie,ae)}}}function Mo(c,a,d){return c!==void 0?c:a!==void 0?a:d!==void 0?d:void 0}function xm(c,a,d,m,M){return Mo(typeof d===M?m[d]:void 0,c.default,a.default)}function Rx(c,a,d){if(Ti(d)!=="number")return Mo(c.default,a.default);const m=c.stops.length;if(m===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[m-1][0])return c.stops[m-1][1];const M=Zu(c.stops.map(z=>z[0]),d);return c.stops[M][1]}function bm(c,a,d){const m=c.base!==void 0?c.base:1;if(Ti(d)!=="number")return Mo(c.default,a.default);const M=c.stops.length;if(M===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[M-1][0])return c.stops[M-1][1];const z=Zu(c.stops.map(Re=>Re[0]),d),F=function(Re,je,Ge,Ye){const Ze=Ye-Ge,ut=Re-Ge;return Ze===0?0:je===1?ut/Ze:(Math.pow(je,ut)-1)/(Math.pow(je,Ze)-1)}(d,m,c.stops[z][0],c.stops[z+1][0]),ie=c.stops[z][1],ae=c.stops[z+1][1];let _e=Oc[a.type]||fr;if(c.colorSpace&&c.colorSpace!=="rgb"){const Re=hm[c.colorSpace];_e=(je,Ge)=>Re.reverse(Re.interpolate(Re.forward(je),Re.forward(Ge),F))}return typeof ie.evaluate=="function"?{evaluate(...Re){const je=ie.evaluate.apply(void 0,Re),Ge=ae.evaluate.apply(void 0,Re);if(je!==void 0&&Ge!==void 0)return _e(je,Ge,F)}}:_e(ie,ae,F)}function Lx(c,a,d){switch(a.type){case"color":d=Ve.parse(d);break;case"formatted":d=ct.fromString(d.toString());break;case"resolvedImage":d=rt.fromString(d.toString());break;case"padding":d=ot.parse(d);break;default:Ti(d)===a.type||a.type==="enum"&&a.values[d]||(d=void 0)}return Mo(d,c.default,a.default)}ji.register(jl,{error:[{kind:"error"},[Et],(c,[a])=>{throw new Qt(a.evaluate(c))}],typeof:[Et,[qt],(c,[a])=>dt(Nt(a.evaluate(c)))],"to-rgba":[sn(ft,4),[si],(c,[a])=>a.evaluate(c).toArray()],rgb:[si,[ft,ft,ft],mm],rgba:[si,[ft,ft,ft,ft],mm],has:{type:Ct,overloads:[[[Et],(c,[a])=>gm(a.evaluate(c),c.properties())],[[Et,di],(c,[a,d])=>gm(a.evaluate(c),d.evaluate(c))]]},get:{type:qt,overloads:[[[Et],(c,[a])=>$h(a.evaluate(c),c.properties())],[[Et,di],(c,[a,d])=>$h(a.evaluate(c),d.evaluate(c))]]},"feature-state":[qt,[Et],(c,[a])=>$h(a.evaluate(c),c.featureState||{})],properties:[di,[],c=>c.properties()],"geometry-type":[Et,[],c=>c.geometryType()],id:[qt,[],c=>c.id()],zoom:[ft,[],c=>c.globals.zoom],"heatmap-density":[ft,[],c=>c.globals.heatmapDensity||0],"line-progress":[ft,[],c=>c.globals.lineProgress||0],accumulated:[qt,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[ft,Ao(ft),(c,a)=>{let d=0;for(const m of a)d+=m.evaluate(c);return d}],"*":[ft,Ao(ft),(c,a)=>{let d=1;for(const m of a)d*=m.evaluate(c);return d}],"-":{type:ft,overloads:[[[ft,ft],(c,[a,d])=>a.evaluate(c)-d.evaluate(c)],[[ft],(c,[a])=>-a.evaluate(c)]]},"/":[ft,[ft,ft],(c,[a,d])=>a.evaluate(c)/d.evaluate(c)],"%":[ft,[ft,ft],(c,[a,d])=>a.evaluate(c)%d.evaluate(c)],ln2:[ft,[],()=>Math.LN2],pi:[ft,[],()=>Math.PI],e:[ft,[],()=>Math.E],"^":[ft,[ft,ft],(c,[a,d])=>Math.pow(a.evaluate(c),d.evaluate(c))],sqrt:[ft,[ft],(c,[a])=>Math.sqrt(a.evaluate(c))],log10:[ft,[ft],(c,[a])=>Math.log(a.evaluate(c))/Math.LN10],ln:[ft,[ft],(c,[a])=>Math.log(a.evaluate(c))],log2:[ft,[ft],(c,[a])=>Math.log(a.evaluate(c))/Math.LN2],sin:[ft,[ft],(c,[a])=>Math.sin(a.evaluate(c))],cos:[ft,[ft],(c,[a])=>Math.cos(a.evaluate(c))],tan:[ft,[ft],(c,[a])=>Math.tan(a.evaluate(c))],asin:[ft,[ft],(c,[a])=>Math.asin(a.evaluate(c))],acos:[ft,[ft],(c,[a])=>Math.acos(a.evaluate(c))],atan:[ft,[ft],(c,[a])=>Math.atan(a.evaluate(c))],min:[ft,Ao(ft),(c,a)=>Math.min(...a.map(d=>d.evaluate(c)))],max:[ft,Ao(ft),(c,a)=>Math.max(...a.map(d=>d.evaluate(c)))],abs:[ft,[ft],(c,[a])=>Math.abs(a.evaluate(c))],round:[ft,[ft],(c,[a])=>{const d=a.evaluate(c);return d<0?-Math.round(-d):Math.round(d)}],floor:[ft,[ft],(c,[a])=>Math.floor(a.evaluate(c))],ceil:[ft,[ft],(c,[a])=>Math.ceil(a.evaluate(c))],"filter-==":[Ct,[Et,qt],(c,[a,d])=>c.properties()[a.value]===d.value],"filter-id-==":[Ct,[qt],(c,[a])=>c.id()===a.value],"filter-type-==":[Ct,[Et],(c,[a])=>c.geometryType()===a.value],"filter-<":[Ct,[Et,qt],(c,[a,d])=>{const m=c.properties()[a.value],M=d.value;return typeof m==typeof M&&m<M}],"filter-id-<":[Ct,[qt],(c,[a])=>{const d=c.id(),m=a.value;return typeof d==typeof m&&d<m}],"filter->":[Ct,[Et,qt],(c,[a,d])=>{const m=c.properties()[a.value],M=d.value;return typeof m==typeof M&&m>M}],"filter-id->":[Ct,[qt],(c,[a])=>{const d=c.id(),m=a.value;return typeof d==typeof m&&d>m}],"filter-<=":[Ct,[Et,qt],(c,[a,d])=>{const m=c.properties()[a.value],M=d.value;return typeof m==typeof M&&m<=M}],"filter-id-<=":[Ct,[qt],(c,[a])=>{const d=c.id(),m=a.value;return typeof d==typeof m&&d<=m}],"filter->=":[Ct,[Et,qt],(c,[a,d])=>{const m=c.properties()[a.value],M=d.value;return typeof m==typeof M&&m>=M}],"filter-id->=":[Ct,[qt],(c,[a])=>{const d=c.id(),m=a.value;return typeof d==typeof m&&d>=m}],"filter-has":[Ct,[qt],(c,[a])=>a.value in c.properties()],"filter-has-id":[Ct,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Ct,[sn(Et)],(c,[a])=>a.value.indexOf(c.geometryType())>=0],"filter-id-in":[Ct,[sn(qt)],(c,[a])=>a.value.indexOf(c.id())>=0],"filter-in-small":[Ct,[Et,sn(qt)],(c,[a,d])=>d.value.indexOf(c.properties()[a.value])>=0],"filter-in-large":[Ct,[Et,sn(qt)],(c,[a,d])=>function(m,M,z,F){for(;z<=F;){const ie=z+F>>1;if(M[ie]===m)return!0;M[ie]>m?F=ie-1:z=ie+1}return!1}(c.properties()[a.value],d.value,0,d.value.length-1)],all:{type:Ct,overloads:[[[Ct,Ct],(c,[a,d])=>a.evaluate(c)&&d.evaluate(c)],[Ao(Ct),(c,a)=>{for(const d of a)if(!d.evaluate(c))return!1;return!0}]]},any:{type:Ct,overloads:[[[Ct,Ct],(c,[a,d])=>a.evaluate(c)||d.evaluate(c)],[Ao(Ct),(c,a)=>{for(const d of a)if(d.evaluate(c))return!0;return!1}]]},"!":[Ct,[Ct],(c,[a])=>!a.evaluate(c)],"is-supported-script":[Ct,[Et],(c,[a])=>{const d=c.globals&&c.globals.isSupportedScript;return!d||d(a.evaluate(c))}],upcase:[Et,[Et],(c,[a])=>a.evaluate(c).toUpperCase()],downcase:[Et,[Et],(c,[a])=>a.evaluate(c).toLowerCase()],concat:[Et,Ao(qt),(c,a)=>a.map(d=>Rt(d.evaluate(c))).join("")],"resolved-locale":[Et,[cn],(c,[a])=>a.evaluate(c).resolvedLocale()]});class Vh{constructor(a,d){this.expression=a,this._warningHistory={},this._evaluator=new Ui,this._defaultValue=d?function(m){return m.type==="color"&&$l(m.default)?new Ve(0,0,0,0):m.type==="color"?Ve.parse(m.default)||null:m.type==="padding"?ot.parse(m.default)||null:m.default===void 0?null:m.default}(d):null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(a,d,m,M,z,F){return this._evaluator.globals=a,this._evaluator.feature=d,this._evaluator.featureState=m,this._evaluator.canonical=M,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=F,this.expression.evaluate(this._evaluator)}evaluate(a,d,m,M,z,F){this._evaluator.globals=a,this._evaluator.feature=d||null,this._evaluator.featureState=m||null,this._evaluator.canonical=M,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=F||null;try{const ie=this.expression.evaluate(this._evaluator);if(ie==null||typeof ie=="number"&&ie!=ie)return this._defaultValue;if(this._enumValues&&!(ie in this._enumValues))throw new Qt(`Expected value to be one of ${Object.keys(this._enumValues).map(ae=>JSON.stringify(ae)).join(", ")}, but found ${JSON.stringify(ie)} instead.`);return ie}catch(ie){return this._warningHistory[ie.message]||(this._warningHistory[ie.message]=!0,typeof console<"u"&&console.warn(ie.message)),this._defaultValue}}}function Bc(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in jl}function $c(c,a){const d=new Yu(jl,[],a?function(M){const z={color:si,string:Et,number:ft,enum:Et,boolean:Ct,formatted:Xi,padding:xn,resolvedImage:Fn};return M.type==="array"?sn(z[M.value]||qt,M.length):z[M.type]}(a):void 0),m=d.parse(c,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?ym(new Vh(m,a)):Fl(d.errors)}class id{constructor(a,d){this.kind=a,this._styleExpression=d,this.isStateDependent=a!=="constant"&&!Nl(d.expression)}evaluateWithoutErrorHandling(a,d,m,M,z,F){return this._styleExpression.evaluateWithoutErrorHandling(a,d,m,M,z,F)}evaluate(a,d,m,M,z,F){return this._styleExpression.evaluate(a,d,m,M,z,F)}}class Uc{constructor(a,d,m,M){this.kind=a,this.zoomStops=m,this._styleExpression=d,this.isStateDependent=a!=="camera"&&!Nl(d.expression),this.interpolationType=M}evaluateWithoutErrorHandling(a,d,m,M,z,F){return this._styleExpression.evaluateWithoutErrorHandling(a,d,m,M,z,F)}evaluate(a,d,m,M,z,F){return this._styleExpression.evaluate(a,d,m,M,z,F)}interpolationFactor(a,d,m){return this.interpolationType?Js.interpolationFactor(this.interpolationType,a,d,m):0}}function vm(c,a){const d=$c(c,a);if(d.result==="error")return d;const m=d.value.expression,M=qu(m);if(!M&&!Bl(a))return Fl([new gt("","data expressions not supported")]);const z=Lc(m,["zoom"]);if(!z&&!vr(a))return Fl([new gt("","zoom expressions not supported")]);const F=rd(m);return F||z?F instanceof gt?Fl([F]):F instanceof Js&&!Uh(a)?Fl([new gt("",'"interpolate" expressions cannot be used with this property')]):ym(F?new Uc(M?"camera":"composite",d.value,F.labels,F instanceof Js?F.interpolation:void 0):new id(M?"constant":"source",d.value)):Fl([new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class nd{constructor(a,d){this._parameters=a,this._specification=d,tt(this,ir(this._parameters,this._specification))}static deserialize(a){return new nd(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function rd(c){let a=null;if(c instanceof Qu)a=rd(c.result);else if(c instanceof Ku){for(const d of c.args)if(a=rd(d),a)break}else(c instanceof Nc||c instanceof Js)&&c.input instanceof ji&&c.input.name==="zoom"&&(a=c);return a instanceof gt||c.eachChild(d=>{const m=rd(d);m instanceof gt?a=m:!a&&m?a=new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&m&&a!==m&&(a=new gt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}function Pa(c){const a=c.key,d=c.value,m=c.valueSpec||{},M=c.objectElementValidators||{},z=c.style,F=c.styleSpec;let ie=[];const ae=Ti(d);if(ae!=="object")return[new Fe(a,d,`object expected, ${ae} found`)];for(const _e in d){const Re=_e.split(".")[0],je=m[Re]||m["*"];let Ge;if(M[Re])Ge=M[Re];else if(m[Re])Ge=ys;else if(M["*"])Ge=M["*"];else{if(!m["*"]){ie.push(new Fe(a,d[_e],`unknown property "${_e}"`));continue}Ge=ys}ie=ie.concat(Ge({key:(a&&`${a}.`)+_e,value:d[_e],valueSpec:je,style:z,styleSpec:F,object:d,objectKey:_e},d))}for(const _e in m)M[_e]||m[_e].required&&m[_e].default===void 0&&d[_e]===void 0&&ie.push(new Fe(a,d,`missing required property "${_e}"`));return ie}function _m(c){const a=c.value,d=c.valueSpec,m=c.style,M=c.styleSpec,z=c.key,F=c.arrayElementValidator||ys;if(Ti(a)!=="array")return[new Fe(z,a,`array expected, ${Ti(a)} found`)];if(d.length&&a.length!==d.length)return[new Fe(z,a,`array length ${d.length} expected, length ${a.length} found`)];if(d["min-length"]&&a.length<d["min-length"])return[new Fe(z,a,`array length at least ${d["min-length"]} expected, length ${a.length} found`)];let ie={type:d.value,values:d.values};M.$version<7&&(ie.function=d.function),Ti(d.value)==="object"&&(ie=d.value);let ae=[];for(let _e=0;_e<a.length;_e++)ae=ae.concat(F({array:a,arrayIndex:_e,value:a[_e],valueSpec:ie,style:m,styleSpec:M,key:`${z}[${_e}]`}));return ae}function Gh(c){const a=c.key,d=c.value,m=c.valueSpec;let M=Ti(d);return M==="number"&&d!=d&&(M="NaN"),M!=="number"?[new Fe(a,d,`number expected, ${M} found`)]:"minimum"in m&&d<m.minimum?[new Fe(a,d,`${d} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&d>m.maximum?[new Fe(a,d,`${d} is greater than the maximum value ${m.maximum}`)]:[]}function wm(c){const a=c.valueSpec,d=nt(c.value.type);let m,M,z,F={};const ie=d!=="categorical"&&c.value.property===void 0,ae=!ie,_e=Ti(c.value.stops)==="array"&&Ti(c.value.stops[0])==="array"&&Ti(c.value.stops[0][0])==="object",Re=Pa({key:c.key,value:c.value,valueSpec:c.styleSpec.function,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(Ye){if(d==="identity")return[new Fe(Ye.key,Ye.value,'identity function may not have a "stops" property')];let Ze=[];const ut=Ye.value;return Ze=Ze.concat(_m({key:Ye.key,value:ut,valueSpec:Ye.valueSpec,style:Ye.style,styleSpec:Ye.styleSpec,arrayElementValidator:je})),Ti(ut)==="array"&&ut.length===0&&Ze.push(new Fe(Ye.key,ut,"array must have at least one stop")),Ze},default:function(Ye){return ys({key:Ye.key,value:Ye.value,valueSpec:a,style:Ye.style,styleSpec:Ye.styleSpec})}}});return d==="identity"&&ie&&Re.push(new Fe(c.key,c.value,'missing required property "property"')),d==="identity"||c.value.stops||Re.push(new Fe(c.key,c.value,'missing required property "stops"')),d==="exponential"&&c.valueSpec.expression&&!Uh(c.valueSpec)&&Re.push(new Fe(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(ae&&!Bl(c.valueSpec)?Re.push(new Fe(c.key,c.value,"property functions not supported")):ie&&!vr(c.valueSpec)&&Re.push(new Fe(c.key,c.value,"zoom functions not supported"))),d!=="categorical"&&!_e||c.value.property!==void 0||Re.push(new Fe(c.key,c.value,'"property" property is required')),Re;function je(Ye){let Ze=[];const ut=Ye.value,lt=Ye.key;if(Ti(ut)!=="array")return[new Fe(lt,ut,`array expected, ${Ti(ut)} found`)];if(ut.length!==2)return[new Fe(lt,ut,`array length 2 expected, length ${ut.length} found`)];if(_e){if(Ti(ut[0])!=="object")return[new Fe(lt,ut,`object expected, ${Ti(ut[0])} found`)];if(ut[0].zoom===void 0)return[new Fe(lt,ut,"object stop key must have zoom")];if(ut[0].value===void 0)return[new Fe(lt,ut,"object stop key must have value")];if(z&&z>nt(ut[0].zoom))return[new Fe(lt,ut[0].zoom,"stop zoom values must appear in ascending order")];nt(ut[0].zoom)!==z&&(z=nt(ut[0].zoom),M=void 0,F={}),Ze=Ze.concat(Pa({key:`${lt}[0]`,value:ut[0],valueSpec:{zoom:{}},style:Ye.style,styleSpec:Ye.styleSpec,objectElementValidators:{zoom:Gh,value:Ge}}))}else Ze=Ze.concat(Ge({key:`${lt}[0]`,value:ut[0],valueSpec:{},style:Ye.style,styleSpec:Ye.styleSpec},ut));return Bc(ht(ut[1]))?Ze.concat([new Fe(`${lt}[1]`,ut[1],"expressions are not allowed in function stops.")]):Ze.concat(ys({key:`${lt}[1]`,value:ut[1],valueSpec:a,style:Ye.style,styleSpec:Ye.styleSpec}))}function Ge(Ye,Ze){const ut=Ti(Ye.value),lt=nt(Ye.value),vt=Ye.value!==null?Ye.value:Ze;if(m){if(ut!==m)return[new Fe(Ye.key,vt,`${ut} stop domain type must match previous stop domain type ${m}`)]}else m=ut;if(ut!=="number"&&ut!=="string"&&ut!=="boolean")return[new Fe(Ye.key,vt,"stop domain value must be a number, string, or boolean")];if(ut!=="number"&&d!=="categorical"){let Dt=`number expected, ${ut} found`;return Bl(a)&&d===void 0&&(Dt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Fe(Ye.key,vt,Dt)]}return d!=="categorical"||ut!=="number"||isFinite(lt)&&Math.floor(lt)===lt?d!=="categorical"&&ut==="number"&&M!==void 0&&lt<M?[new Fe(Ye.key,vt,"stop domain values must appear in ascending order")]:(M=lt,d==="categorical"&&lt in F?[new Fe(Ye.key,vt,"stop domain values must be unique")]:(F[lt]=!0,[])):[new Fe(Ye.key,vt,`integer expected, found ${lt}`)]}}function Ul(c){const a=(c.expressionContext==="property"?vm:$c)(ht(c.value),c.valueSpec);if(a.result==="error")return a.value.map(m=>new Fe(`${c.key}${m.key}`,c.value,m.message));const d=a.value.expression||a.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!d.outputDefined())return[new Fe(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Nl(d))return[new Fe(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Nl(d))return[new Fe(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!Lc(d,["zoom","feature-state"]))return[new Fe(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!qu(d))return[new Fe(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Vc(c){const a=c.key,d=c.value,m=c.valueSpec,M=[];return Array.isArray(m.values)?m.values.indexOf(nt(d))===-1&&M.push(new Fe(a,d,`expected one of [${m.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(m.values).indexOf(nt(d))===-1&&M.push(new Fe(a,d,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(d)} found`)),M}function sd(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const a of c.slice(1))if(!sd(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}const ad={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Hh(c){if(c==null)return{filter:()=>!0,needGeometry:!1};sd(c)||(c=od(c));const a=$c(c,ad);if(a.result==="error")throw new Error(a.value.map(d=>`${d.key}: ${d.message}`).join(", "));return{filter:(d,m,M)=>a.value.evaluate(d,m,{},M),needGeometry:qh(c)}}function Tm(c,a){return c<a?-1:c>a?1:0}function qh(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let a=1;a<c.length;a++)if(qh(c[a]))return!0;return!1}function od(c){if(!c)return!0;const a=c[0];return c.length<=1?a!=="any":a==="=="?ld(c[1],c[2],"=="):a==="!="?rl(ld(c[1],c[2],"==")):a==="<"||a===">"||a==="<="||a===">="?ld(c[1],c[2],a):a==="any"?(d=c.slice(1),["any"].concat(d.map(od))):a==="all"?["all"].concat(c.slice(1).map(od)):a==="none"?["all"].concat(c.slice(1).map(od).map(rl)):a==="in"?Cm(c[1],c.slice(2)):a==="!in"?rl(Cm(c[1],c.slice(2))):a==="has"?cd(c[1]):a==="!has"?rl(cd(c[1])):a!=="within"||c;var d}function ld(c,a,d){switch(c){case"$type":return[`filter-type-${d}`,a];case"$id":return[`filter-id-${d}`,a];default:return[`filter-${d}`,c,a]}}function Cm(c,a){if(a.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(d=>typeof d!=typeof a[0])?["filter-in-large",c,["literal",a.sort(Tm)]]:["filter-in-small",c,["literal",a]]}}function cd(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function rl(c){return["!",c]}function Gc(c){return sd(ht(c.value))?Ul(tt({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ud(c)}function ud(c){const a=c.value,d=c.key;if(Ti(a)!=="array")return[new Fe(d,a,`array expected, ${Ti(a)} found`)];const m=c.styleSpec;let M,z=[];if(a.length<1)return[new Fe(d,a,"filter array must have at least 1 element")];switch(z=z.concat(Vc({key:`${d}[0]`,value:a[0],valueSpec:m.filter_operator,style:c.style,styleSpec:c.styleSpec})),nt(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&nt(a[1])==="$type"&&z.push(new Fe(d,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&z.push(new Fe(d,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(M=Ti(a[1]),M!=="string"&&z.push(new Fe(`${d}[1]`,a[1],`string expected, ${M} found`)));for(let F=2;F<a.length;F++)M=Ti(a[F]),nt(a[1])==="$type"?z=z.concat(Vc({key:`${d}[${F}]`,value:a[F],valueSpec:m.geometry_type,style:c.style,styleSpec:c.styleSpec})):M!=="string"&&M!=="number"&&M!=="boolean"&&z.push(new Fe(`${d}[${F}]`,a[F],`string, number, or boolean expected, ${M} found`));break;case"any":case"all":case"none":for(let F=1;F<a.length;F++)z=z.concat(ud({key:`${d}[${F}]`,value:a[F],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":M=Ti(a[1]),a.length!==2?z.push(new Fe(d,a,`filter array for "${a[0]}" operator must have 2 elements`)):M!=="string"&&z.push(new Fe(`${d}[1]`,a[1],`string expected, ${M} found`));break;case"within":M=Ti(a[1]),a.length!==2?z.push(new Fe(d,a,`filter array for "${a[0]}" operator must have 2 elements`)):M!=="object"&&z.push(new Fe(`${d}[1]`,a[1],`object expected, ${M} found`))}return z}function Sm(c,a){const d=c.key,m=c.style,M=c.styleSpec,z=c.value,F=c.objectKey,ie=M[`${a}_${c.layerType}`];if(!ie)return[];const ae=F.match(/^(.*)-transition$/);if(a==="paint"&&ae&&ie[ae[1]]&&ie[ae[1]].transition)return ys({key:d,value:z,valueSpec:M.transition,style:m,styleSpec:M});const _e=c.valueSpec||ie[F];if(!_e)return[new Fe(d,z,`unknown property "${F}"`)];let Re;if(Ti(z)==="string"&&Bl(_e)&&!_e.tokens&&(Re=/^{([^}]+)}$/.exec(z)))return[new Fe(d,z,`"${F}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Re[1])} }\`.`)];const je=[];return c.layerType==="symbol"&&(F==="text-field"&&m&&!m.glyphs&&je.push(new Fe(d,z,'use of "text-field" requires a style "glyphs" property')),F==="text-font"&&$l(ht(z))&&nt(z.type)==="identity"&&je.push(new Fe(d,z,'"text-font" does not support identity functions'))),je.concat(ys({key:c.key,value:z,valueSpec:_e,style:m,styleSpec:M,expressionContext:"property",propertyType:a,propertyKey:F}))}function Hc(c){return Sm(c,"paint")}function Em(c){return Sm(c,"layout")}function km(c){let a=[];const d=c.value,m=c.key,M=c.style,z=c.styleSpec;d.type||d.ref||a.push(new Fe(m,d,'either "type" or "ref" is required'));let F=nt(d.type);const ie=nt(d.ref);if(d.id){const ae=nt(d.id);for(let _e=0;_e<c.arrayIndex;_e++){const Re=M.layers[_e];nt(Re.id)===ae&&a.push(new Fe(m,d.id,`duplicate layer id "${d.id}", previously used at line ${Re.id.__line__}`))}}if("ref"in d){let ae;["type","source","source-layer","filter","layout"].forEach(_e=>{_e in d&&a.push(new Fe(m,d[_e],`"${_e}" is prohibited for ref layers`))}),M.layers.forEach(_e=>{nt(_e.id)===ie&&(ae=_e)}),ae?ae.ref?a.push(new Fe(m,d.ref,"ref cannot reference another ref layer")):F=nt(ae.type):a.push(new Fe(m,d.ref,`ref layer "${ie}" not found`))}else if(F!=="background")if(d.source){const ae=M.sources&&M.sources[d.source],_e=ae&&nt(ae.type);ae?_e==="vector"&&F==="raster"?a.push(new Fe(m,d.source,`layer "${d.id}" requires a raster source`)):_e==="raster"&&F!=="raster"?a.push(new Fe(m,d.source,`layer "${d.id}" requires a vector source`)):_e!=="vector"||d["source-layer"]?_e==="raster-dem"&&F!=="hillshade"?a.push(new Fe(m,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):F!=="line"||!d.paint||!d.paint["line-gradient"]||_e==="geojson"&&ae.lineMetrics||a.push(new Fe(m,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new Fe(m,d,`layer "${d.id}" must specify a "source-layer"`)):a.push(new Fe(m,d.source,`source "${d.source}" not found`))}else a.push(new Fe(m,d,'missing required property "source"'));return a=a.concat(Pa({key:m,value:d,valueSpec:z.layer,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ys({key:`${m}.type`,value:d.type,valueSpec:z.layer.type,style:c.style,styleSpec:c.styleSpec,object:d,objectKey:"type"}),filter:Gc,layout:ae=>Pa({layer:d,key:ae.key,value:ae.value,style:ae.style,styleSpec:ae.styleSpec,objectElementValidators:{"*":_e=>Em(tt({layerType:F},_e))}}),paint:ae=>Pa({layer:d,key:ae.key,value:ae.value,style:ae.style,styleSpec:ae.styleSpec,objectElementValidators:{"*":_e=>Hc(tt({layerType:F},_e))}})}})),a}function Vl(c){const a=c.value,d=c.key,m=Ti(a);return m!=="string"?[new Fe(d,a,`string expected, ${m} found`)]:[]}const Am={promoteId:function({key:c,value:a}){if(Ti(a)==="string")return Vl({key:c,value:a});{const d=[];for(const m in a)d.push(...Vl({key:`${c}.${m}`,value:a[m]}));return d}}};function Mm(c){const a=c.value,d=c.key,m=c.styleSpec,M=c.style;if(!a.type)return[new Fe(d,a,'"type" is required')];const z=nt(a.type);let F;switch(z){case"vector":case"raster":case"raster-dem":return F=Pa({key:d,value:a,valueSpec:m[`source_${z.replace("-","_")}`],style:c.style,styleSpec:m,objectElementValidators:Am}),F;case"geojson":if(F=Pa({key:d,value:a,valueSpec:m.source_geojson,style:M,styleSpec:m,objectElementValidators:Am}),a.cluster)for(const ie in a.clusterProperties){const[ae,_e]=a.clusterProperties[ie],Re=typeof ae=="string"?[ae,["accumulated"],["get",ie]]:ae;F.push(...Ul({key:`${d}.${ie}.map`,value:_e,expressionContext:"cluster-map"})),F.push(...Ul({key:`${d}.${ie}.reduce`,value:Re,expressionContext:"cluster-reduce"}))}return F;case"video":return Pa({key:d,value:a,valueSpec:m.source_video,style:M,styleSpec:m});case"image":return Pa({key:d,value:a,valueSpec:m.source_image,style:M,styleSpec:m});case"canvas":return[new Fe(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Vc({key:`${d}.type`,value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:M,styleSpec:m})}}function qc(c){const a=c.value,d=c.styleSpec,m=d.light,M=c.style;let z=[];const F=Ti(a);if(a===void 0)return z;if(F!=="object")return z=z.concat([new Fe("light",a,`object expected, ${F} found`)]),z;for(const ie in a){const ae=ie.match(/^(.*)-transition$/);z=z.concat(ae&&m[ae[1]]&&m[ae[1]].transition?ys({key:ie,value:a[ie],valueSpec:d.transition,style:M,styleSpec:d}):m[ie]?ys({key:ie,value:a[ie],valueSpec:m[ie],style:M,styleSpec:d}):[new Fe(ie,a[ie],`unknown property "${ie}"`)])}return z}function Wc(c){const a=c.value,d=c.styleSpec,m=d.terrain,M=c.style;let z=[];const F=Ti(a);if(a===void 0)return z;if(F!=="object")return z=z.concat([new Fe("terrain",a,`object expected, ${F} found`)]),z;for(const ie in a)z=z.concat(m[ie]?ys({key:ie,value:a[ie],valueSpec:m[ie],style:M,styleSpec:d}):[new Fe(ie,a[ie],`unknown property "${ie}"`)]);return z}const ea={"*":()=>[],array:_m,boolean:function(c){const a=c.value,d=c.key,m=Ti(a);return m!=="boolean"?[new Fe(d,a,`boolean expected, ${m} found`)]:[]},number:Gh,color:function(c){const a=c.key,d=c.value,m=Ti(d);return m!=="string"?[new Fe(a,d,`color expected, ${m} found`)]:bi(d)===null?[new Fe(a,d,`color expected, "${d}" found`)]:[]},constants:Xe,enum:Vc,filter:Gc,function:wm,layer:km,object:Pa,source:Mm,light:qc,terrain:Wc,string:Vl,formatted:function(c){return Vl(c).length===0?[]:Ul(c)},resolvedImage:function(c){return Vl(c).length===0?[]:Ul(c)},padding:function(c){const a=c.key,d=c.value;if(Ti(d)==="array"){if(d.length<1||d.length>4)return[new Fe(a,d,`padding requires 1 to 4 values; ${d.length} values found`)];const m={type:"number"};let M=[];for(let z=0;z<d.length;z++)M=M.concat(ys({key:`${a}[${z}]`,value:d[z],valueSpec:m}));return M}return Gh({key:a,value:d,valueSpec:{}})}};function ys(c){const a=c.value,d=c.valueSpec,m=c.styleSpec;return d.expression&&$l(nt(a))?wm(c):d.expression&&Bc(ht(a))?Ul(c):d.type&&ea[d.type]?ea[d.type](c):Pa(tt({},c,{valueSpec:d.type?m[d.type]:d}))}function zx(c){const a=c.value,d=c.key,m=Vl(c);return m.length||(a.indexOf("{fontstack}")===-1&&m.push(new Fe(d,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&m.push(new Fe(d,a,'"glyphs" url must include a "{range}" token'))),m}function Po(c,a=Pe){let d=[];return d=d.concat(ys({key:"",value:c,valueSpec:a.$root,styleSpec:a,style:c,objectElementValidators:{glyphs:zx,"*":()=>[]}})),c.constants&&(d=d.concat(Xe({key:"constants",value:c.constants,style:c,styleSpec:a}))),Pm(d)}function Pm(c){return[].concat(c).sort((a,d)=>a.line-d.line)}function sl(c){return function(...a){return Pm(c.apply(this,a))}}Po.source=sl(Mm),Po.light=sl(qc),Po.terrain=sl(Wc),Po.layer=sl(km),Po.filter=sl(Gc),Po.paintProperty=sl(Hc),Po.layoutProperty=sl(Em);const al=Po,Nx=al.light,Wh=al.paintProperty,Ox=al.layoutProperty;function Im(c,a){let d=!1;if(a&&a.length)for(const m of a)c.fire(new Me(new Error(m.message))),d=!0;return d}class ol{constructor(a,d,m){const M=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;const F=new Int32Array(this.arrayBuffer);a=F[0],this.d=(d=F[1])+2*(m=F[2]);for(let ae=0;ae<this.d*this.d;ae++){const _e=F[3+ae],Re=F[3+ae+1];M.push(_e===Re?null:F.subarray(_e,Re))}const ie=F[3+M.length+1];this.keys=F.subarray(F[3+M.length],ie),this.bboxes=F.subarray(ie),this.insert=this._insertReadonly}else{this.d=d+2*m;for(let F=0;F<this.d*this.d;F++)M.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=a,this.padding=m,this.scale=d/a,this.uid=0;const z=m/d*a;this.min=-z,this.max=a+z}insert(a,d,m,M,z){this._forEachCell(d,m,M,z,this._insertCell,this.uid++,void 0,void 0),this.keys.push(a),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(M),this.bboxes.push(z)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(a,d,m,M,z,F){this.cells[z].push(F)}query(a,d,m,M,z){const F=this.min,ie=this.max;if(a<=F&&d<=F&&ie<=m&&ie<=M&&!z)return Array.prototype.slice.call(this.keys);{const ae=[];return this._forEachCell(a,d,m,M,this._queryCell,ae,{},z),ae}}_queryCell(a,d,m,M,z,F,ie,ae){const _e=this.cells[z];if(_e!==null){const Re=this.keys,je=this.bboxes;for(let Ge=0;Ge<_e.length;Ge++){const Ye=_e[Ge];if(ie[Ye]===void 0){const Ze=4*Ye;(ae?ae(je[Ze+0],je[Ze+1],je[Ze+2],je[Ze+3]):a<=je[Ze+2]&&d<=je[Ze+3]&&m>=je[Ze+0]&&M>=je[Ze+1])?(ie[Ye]=!0,F.push(Re[Ye])):ie[Ye]=!1}}}}_forEachCell(a,d,m,M,z,F,ie,ae){const _e=this._convertToCellCoord(a),Re=this._convertToCellCoord(d),je=this._convertToCellCoord(m),Ge=this._convertToCellCoord(M);for(let Ye=_e;Ye<=je;Ye++)for(let Ze=Re;Ze<=Ge;Ze++){const ut=this.d*Ze+Ye;if((!ae||ae(this._convertFromCellCoord(Ye),this._convertFromCellCoord(Ze),this._convertFromCellCoord(Ye+1),this._convertFromCellCoord(Ze+1)))&&z.call(this,a,d,m,M,ut,F,ie,ae))return}}_convertFromCellCoord(a){return(a-this.padding)/this.scale}_convertToCellCoord(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const a=this.cells,d=3+this.cells.length+1+1;let m=0;for(let F=0;F<this.cells.length;F++)m+=this.cells[F].length;const M=new Int32Array(d+m+this.keys.length+this.bboxes.length);M[0]=this.extent,M[1]=this.n,M[2]=this.padding;let z=d;for(let F=0;F<a.length;F++){const ie=a[F];M[3+F]=z,M.set(ie,z),z+=ie.length}return M[3+a.length]=z,M.set(this.keys,z),z+=this.keys.length,M[3+a.length+1]=z,M.set(this.bboxes,z),z+=this.bboxes.length,M.buffer}static serialize(a,d){const m=a.toArrayBuffer();return d&&d.push(m),{buffer:m}}static deserialize(a){return new ol(a.buffer)}}const Io={};function fi(c,a,d={}){if(Io[c])throw new Error(`${c} is already registered.`);Object.defineProperty(a,"_classRegistryKey",{value:c,writeable:!1}),Io[c]={klass:a,omit:d.omit||[],shallow:d.shallow||[]}}fi("Object",Object),fi("TransferableGridIndex",ol),fi("Color",Ve),fi("Error",Error),fi("AJAXError",ee),fi("ResolvedImage",rt),fi("StylePropertyFunction",nd),fi("StyleExpression",Vh,{omit:["_evaluator"]}),fi("ZoomDependentExpression",Uc),fi("ZoomConstantExpression",id),fi("CompoundExpression",ji,{omit:["_evaluate"]});for(const c in jl)jl[c]._classRegistryKey||fi(`Expression_${c}`,jl[c]);function Yh(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function Yc(c,a){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob)return c;if(Yh(c)||L(c))return a&&a.push(c),c;if(ArrayBuffer.isView(c)){const d=c;return a&&a.push(d.buffer),d}if(c instanceof ImageData)return a&&a.push(c.data.buffer),c;if(Array.isArray(c)){const d=[];for(const m of c)d.push(Yc(m,a));return d}if(typeof c=="object"){const d=c.constructor,m=d._classRegistryKey;if(!m)throw new Error("can't serialize object of unregistered class");if(!Io[m])throw new Error(`${m} is not registered.`);const M=d.serialize?d.serialize(c,a):{};if(d.serialize){if(a&&M===a[a.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const z in c){if(!c.hasOwnProperty(z)||Io[m].omit.indexOf(z)>=0)continue;const F=c[z];M[z]=Io[m].shallow.indexOf(z)>=0?F:Yc(F,a)}c instanceof Error&&(M.message=c.message)}if(M.$name)throw new Error("$name property is reserved for worker serialization logic.");return m!=="Object"&&(M.$name=m),M}throw new Error("can't serialize object of type "+typeof c)}function ll(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||Yh(c)||L(c)||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(ll);if(typeof c=="object"){const a=c.$name||"Object";if(!Io[a])throw new Error(`can't deserialize unregistered class ${a}`);const{klass:d}=Io[a];if(!d)throw new Error(`can't deserialize unregistered class ${a}`);if(d.deserialize)return d.deserialize(c);const m=Object.create(d.prototype);for(const M of Object.keys(c)){if(M==="$name")continue;const z=c[M];m[M]=Io[a].shallow.indexOf(M)>=0?z:ll(z)}return m}throw new Error("can't deserialize object of type "+typeof c)}class Zc{constructor(){this.first=!0}update(a,d){const m=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=d),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=m,!0))}}const ti={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Zh(c){for(const a of c)if(Xc(a.charCodeAt(0)))return!0;return!1}function Dm(c){for(const a of c)if(!jx(a.charCodeAt(0)))return!1;return!0}function jx(c){return!(ti.Arabic(c)||ti["Arabic Supplement"](c)||ti["Arabic Extended-A"](c)||ti["Arabic Presentation Forms-A"](c)||ti["Arabic Presentation Forms-B"](c))}function Xc(c){return!(c!==746&&c!==747&&(c<4352||!(ti["Bopomofo Extended"](c)||ti.Bopomofo(c)||ti["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||ti["CJK Compatibility Ideographs"](c)||ti["CJK Compatibility"](c)||ti["CJK Radicals Supplement"](c)||ti["CJK Strokes"](c)||!(!ti["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||ti["CJK Unified Ideographs Extension A"](c)||ti["CJK Unified Ideographs"](c)||ti["Enclosed CJK Letters and Months"](c)||ti["Hangul Compatibility Jamo"](c)||ti["Hangul Jamo Extended-A"](c)||ti["Hangul Jamo Extended-B"](c)||ti["Hangul Jamo"](c)||ti["Hangul Syllables"](c)||ti.Hiragana(c)||ti["Ideographic Description Characters"](c)||ti.Kanbun(c)||ti["Kangxi Radicals"](c)||ti["Katakana Phonetic Extensions"](c)||ti.Katakana(c)&&c!==12540||!(!ti["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!ti["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||ti["Unified Canadian Aboriginal Syllabics"](c)||ti["Unified Canadian Aboriginal Syllabics Extended"](c)||ti["Vertical Forms"](c)||ti["Yijing Hexagram Symbols"](c)||ti["Yi Syllables"](c)||ti["Yi Radicals"](c))))}function Rm(c){return!(Xc(c)||function(a){return!!(ti["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||ti["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||ti["Letterlike Symbols"](a)||ti["Number Forms"](a)||ti["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||ti["Control Pictures"](a)&&a!==9251||ti["Optical Character Recognition"](a)||ti["Enclosed Alphanumerics"](a)||ti["Geometric Shapes"](a)||ti["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||ti["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||ti["CJK Symbols and Punctuation"](a)||ti.Katakana(a)||ti["Private Use Area"](a)||ti["CJK Compatibility Forms"](a)||ti["Small Form Variants"](a)||ti["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)}(c))}function Lm(c){return c>=1424&&c<=2303||ti["Arabic Presentation Forms-A"](c)||ti["Arabic Presentation Forms-B"](c)}function Fx(c,a){return!(!a&&Lm(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||ti.Khmer(c))}function Bx(c){for(const a of c)if(Lm(a.charCodeAt(0)))return!0;return!1}const dd="deferred",Xh="loading",Kh="loaded";let Qh=null,$s="unavailable",Do=null;const zm=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&($s="error"),Qh&&Qh(c)};function Jh(){Gl.fire(new ge("pluginStateChange",{pluginStatus:$s,pluginURL:Do}))}const Gl=new De,ep=function(){return $s},hd=function(){if($s!==dd||!Do)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");$s=Xh,Jh(),Do&&Te({url:Do},c=>{c?zm(c):($s=Kh,Jh())})},va={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>$s===Kh||va.applyArabicShaping!=null,isLoading:()=>$s===Xh,setState(c){if(!W())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");$s=c.pluginStatus,Do=c.pluginURL},isParsed(){if(!W())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return va.applyArabicShaping!=null&&va.processBidirectionalText!=null&&va.processStyledBidirectionalText!=null},getPluginURL(){if(!W())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Do}};class lr{constructor(a,d){this.zoom=a,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Zc,this.transition={})}isSupportedScript(a){return function(d,m){for(const M of d)if(!Fx(M.charCodeAt(0),m))return!1;return!0}(a,va.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const a=this.zoom,d=a-Math.floor(a),m=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*d}}}class pd{constructor(a,d){this.property=a,this.value=d,this.expression=function(m,M){if($l(m))return new nd(m,M);if(Bc(m)){const z=vm(m,M);if(z.result==="error")throw new Error(z.value.map(F=>`${F.key}: ${F.message}`).join(", "));return z.value}{let z=m;return M.type==="color"&&typeof m=="string"?z=Ve.parse(m):M.type!=="padding"||typeof m!="number"&&!Array.isArray(m)||(z=ot.parse(m)),{kind:"constant",evaluate:()=>z}}}(d===void 0?a.specification.default:d,a.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,d,m){return this.property.possiblyEvaluate(this,a,d,m)}}class fd{constructor(a){this.property=a,this.value=new pd(a,void 0)}transitioned(a,d){return new Nm(this.property,this.value,d,v({},a.transition,this.transition),a.now)}untransitioned(){return new Nm(this.property,this.value,null,{},0)}}class tp{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return A(this._values[a].value.value)}setValue(a,d){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new fd(this._values[a].property)),this._values[a].value=new pd(this._values[a].property,d===null?void 0:A(d))}getTransition(a){return A(this._values[a].transition)}setTransition(a,d){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new fd(this._values[a].property)),this._values[a].transition=A(d)||void 0}serialize(){const a={};for(const d of Object.keys(this._values)){const m=this.getValue(d);m!==void 0&&(a[d]=m);const M=this.getTransition(d);M!==void 0&&(a[`${d}-transition`]=M)}return a}transitioned(a,d){const m=new Om(this._properties);for(const M of Object.keys(this._values))m._values[M]=this._values[M].transitioned(a,d._values[M]);return m}untransitioned(){const a=new Om(this._properties);for(const d of Object.keys(this._values))a._values[d]=this._values[d].untransitioned();return a}}class Nm{constructor(a,d,m,M,z){this.property=a,this.value=d,this.begin=z+M.delay||0,this.end=this.begin+M.duration||0,a.specification.transition&&(M.delay||M.duration)&&(this.prior=m)}possiblyEvaluate(a,d,m){const M=a.now||0,z=this.value.possiblyEvaluate(a,d,m),F=this.prior;if(F){if(M>this.end)return this.prior=null,z;if(this.value.isDataDriven())return this.prior=null,z;if(M<this.begin)return F.possiblyEvaluate(a,d,m);{const ie=(M-this.begin)/(this.end-this.begin);return this.property.interpolate(F.possiblyEvaluate(a,d,m),z,function(ae){if(ae<=0)return 0;if(ae>=1)return 1;const _e=ae*ae,Re=_e*ae;return 4*(ae<.5?Re:3*(ae-_e)+Re-.75)}(ie))}}return z}}class Om{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,d,m){const M=new md(this._properties);for(const z of Object.keys(this._values))M._values[z]=this._values[z].possiblyEvaluate(a,d,m);return M}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class $x{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}getValue(a){return A(this._values[a].value)}setValue(a,d){this._values[a]=new pd(this._values[a].property,d===null?void 0:A(d))}serialize(){const a={};for(const d of Object.keys(this._values)){const m=this.getValue(d);m!==void 0&&(a[d]=m)}return a}possiblyEvaluate(a,d,m){const M=new md(this._properties);for(const z of Object.keys(this._values))M._values[z]=this._values[z].possiblyEvaluate(a,d,m);return M}}class Xa{constructor(a,d,m){this.property=a,this.value=d,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,d,m,M){return this.property.evaluate(this.value,this.parameters,a,d,m,M)}}class md{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class Ei{constructor(a){this.specification=a}possiblyEvaluate(a,d){if(a.isDataDriven())throw new Error("Value should not be data driven");return a.expression.evaluate(d)}interpolate(a,d,m){const M=Oc[this.specification.type];return M?M(a,d,m):a}}class Di{constructor(a,d){this.specification=a,this.overrides=d}possiblyEvaluate(a,d,m,M){return new Xa(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(d,null,{},m,M)}:a.expression,d)}interpolate(a,d,m){if(a.value.kind!=="constant"||d.value.kind!=="constant")return a;if(a.value.value===void 0||d.value.value===void 0)return new Xa(this,{kind:"constant",value:void 0},a.parameters);const M=Oc[this.specification.type];return M?new Xa(this,{kind:"constant",value:M(a.value.value,d.value.value,m)},a.parameters):a}evaluate(a,d,m,M,z,F){return a.kind==="constant"?a.value:a.evaluate(d,m,M,z,F)}}class Kc extends Di{possiblyEvaluate(a,d,m,M){if(a.value===void 0)return new Xa(this,{kind:"constant",value:void 0},d);if(a.expression.kind==="constant"){const z=a.expression.evaluate(d,null,{},m,M),F=a.property.specification.type==="resolvedImage"&&typeof z!="string"?z.name:z,ie=this._calculate(F,F,F,d);return new Xa(this,{kind:"constant",value:ie},d)}if(a.expression.kind==="camera"){const z=this._calculate(a.expression.evaluate({zoom:d.zoom-1}),a.expression.evaluate({zoom:d.zoom}),a.expression.evaluate({zoom:d.zoom+1}),d);return new Xa(this,{kind:"constant",value:z},d)}return new Xa(this,a.expression,d)}evaluate(a,d,m,M,z,F){if(a.kind==="source"){const ie=a.evaluate(d,m,M,z,F);return this._calculate(ie,ie,ie,d)}return a.kind==="composite"?this._calculate(a.evaluate({zoom:Math.floor(d.zoom)-1},m,M),a.evaluate({zoom:Math.floor(d.zoom)},m,M),a.evaluate({zoom:Math.floor(d.zoom)+1},m,M),d):a.value}_calculate(a,d,m,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:a,to:d}:{from:m,to:d}}interpolate(a){return a}}class Qc{constructor(a){this.specification=a}possiblyEvaluate(a,d,m,M){if(a.value!==void 0){if(a.expression.kind==="constant"){const z=a.expression.evaluate(d,null,{},m,M);return this._calculate(z,z,z,d)}return this._calculate(a.expression.evaluate(new lr(Math.floor(d.zoom-1),d)),a.expression.evaluate(new lr(Math.floor(d.zoom),d)),a.expression.evaluate(new lr(Math.floor(d.zoom+1),d)),d)}}_calculate(a,d,m,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:a,to:d}:{from:m,to:d}}interpolate(a){return a}}class ip{constructor(a){this.specification=a}possiblyEvaluate(a,d,m,M){return!!a.expression.evaluate(d,null,{},m,M)}interpolate(){return!1}}class Vr{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in a){const m=a[d];m.specification.overridable&&this.overridableProperties.push(d);const M=this.defaultPropertyValues[d]=new pd(m,void 0),z=this.defaultTransitionablePropertyValues[d]=new fd(m);this.defaultTransitioningPropertyValues[d]=z.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=M.possiblyEvaluate({})}}}fi("DataDrivenProperty",Di),fi("DataConstantProperty",Ei),fi("CrossFadedDataDrivenProperty",Kc),fi("CrossFadedProperty",Qc),fi("ColorRampProperty",ip);const cl="-transition";class Us extends De{constructor(a,d){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1},a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),d.layout&&(this._unevaluatedLayout=new $x(d.layout)),d.paint)){this._transitionablePaint=new tp(d.paint);for(const m in a.paint)this.setPaintProperty(m,a.paint[m],{validate:!1});for(const m in a.layout)this.setLayoutProperty(m,a.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new md(d.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,d,m={}){d!=null&&this._validate(Ox,`layers.${this.id}.layout.${a}`,a,d,m)||(a!=="visibility"?this._unevaluatedLayout.setValue(a,d):this.visibility=d)}getPaintProperty(a){return a.endsWith(cl)?this._transitionablePaint.getTransition(a.slice(0,-cl.length)):this._transitionablePaint.getValue(a)}setPaintProperty(a,d,m={}){if(d!=null&&this._validate(Wh,`layers.${this.id}.paint.${a}`,a,d,m))return!1;if(a.endsWith(cl))return this._transitionablePaint.setTransition(a.slice(0,-cl.length),d||void 0),!1;{const M=this._transitionablePaint._values[a],z=M.property.specification["property-type"]==="cross-faded-data-driven",F=M.value.isDataDriven(),ie=M.value;this._transitionablePaint.setValue(a,d),this._handleSpecialPaintPropertyUpdate(a);const ae=this._transitionablePaint._values[a].value;return ae.isDataDriven()||F||z||this._handleOverridablePaintPropertyUpdate(a,ie,ae)}}_handleSpecialPaintPropertyUpdate(a){}_handleOverridablePaintPropertyUpdate(a,d,m){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,d){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,d)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),x(a,(d,m)=>!(d===void 0||m==="layout"&&!Object.keys(d).length||m==="paint"&&!Object.keys(d).length))}_validate(a,d,m,M,z={}){return(!z||z.validate!==!1)&&Im(this,a.call(al,{key:d,layerType:this.type,objectKey:m,value:M,styleSpec:Pe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const d=this.paint.get(a);if(d instanceof Xa&&Bl(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}const Ux={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Jc{constructor(a,d){this._structArray=a,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class nr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,d){return a._trim(),d&&(a.isTransferred=!0,d.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const d=Object.create(this.prototype);return d.arrayBuffer=a.arrayBuffer,d.length=a.length,d.capacity=a.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Or(c,a=1){let d=0,m=0;return{members:c.map(M=>{const z=Ux[M.type].BYTES_PER_ELEMENT,F=d=jm(d,Math.max(a,z)),ie=M.components||1;return m=Math.max(m,z),d+=z*ie,{name:M.name,type:M.type,components:ie,offset:F}}),size:jm(d,Math.max(m,a)),alignment:a}}function jm(c,a){return Math.ceil(c/a)*a}class Hl extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d){const m=this.length;return this.resize(m+1),this.emplace(m,a,d)}emplace(a,d,m){const M=2*a;return this.int16[M+0]=d,this.int16[M+1]=m,a}}Hl.prototype.bytesPerElement=4,fi("StructArrayLayout2i4",Hl);class eu extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,m,M){const z=this.length;return this.resize(z+1),this.emplace(z,a,d,m,M)}emplace(a,d,m,M,z){const F=4*a;return this.int16[F+0]=d,this.int16[F+1]=m,this.int16[F+2]=M,this.int16[F+3]=z,a}}eu.prototype.bytesPerElement=8,fi("StructArrayLayout4i8",eu);class k extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,m,M,z,F){const ie=this.length;return this.resize(ie+1),this.emplace(ie,a,d,m,M,z,F)}emplace(a,d,m,M,z,F,ie){const ae=6*a;return this.int16[ae+0]=d,this.int16[ae+1]=m,this.int16[ae+2]=M,this.int16[ae+3]=z,this.int16[ae+4]=F,this.int16[ae+5]=ie,a}}k.prototype.bytesPerElement=12,fi("StructArrayLayout2i4i12",k);class o extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,m,M,z,F){const ie=this.length;return this.resize(ie+1),this.emplace(ie,a,d,m,M,z,F)}emplace(a,d,m,M,z,F,ie){const ae=4*a,_e=8*a;return this.int16[ae+0]=d,this.int16[ae+1]=m,this.uint8[_e+4]=M,this.uint8[_e+5]=z,this.uint8[_e+6]=F,this.uint8[_e+7]=ie,a}}o.prototype.bytesPerElement=8,fi("StructArrayLayout2i4ub8",o);class h extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d){const m=this.length;return this.resize(m+1),this.emplace(m,a,d)}emplace(a,d,m){const M=2*a;return this.float32[M+0]=d,this.float32[M+1]=m,a}}h.prototype.bytesPerElement=8,fi("StructArrayLayout2f8",h);class _ extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,m,M,z,F,ie,ae,_e,Re){const je=this.length;return this.resize(je+1),this.emplace(je,a,d,m,M,z,F,ie,ae,_e,Re)}emplace(a,d,m,M,z,F,ie,ae,_e,Re,je){const Ge=10*a;return this.uint16[Ge+0]=d,this.uint16[Ge+1]=m,this.uint16[Ge+2]=M,this.uint16[Ge+3]=z,this.uint16[Ge+4]=F,this.uint16[Ge+5]=ie,this.uint16[Ge+6]=ae,this.uint16[Ge+7]=_e,this.uint16[Ge+8]=Re,this.uint16[Ge+9]=je,a}}_.prototype.bytesPerElement=20,fi("StructArrayLayout10ui20",_);class P extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,m,M,z,F,ie,ae,_e,Re,je,Ge){const Ye=this.length;return this.resize(Ye+1),this.emplace(Ye,a,d,m,M,z,F,ie,ae,_e,Re,je,Ge)}emplace(a,d,m,M,z,F,ie,ae,_e,Re,je,Ge,Ye){const Ze=12*a;return this.int16[Ze+0]=d,this.int16[Ze+1]=m,this.int16[Ze+2]=M,this.int16[Ze+3]=z,this.uint16[Ze+4]=F,this.uint16[Ze+5]=ie,this.uint16[Ze+6]=ae,this.uint16[Ze+7]=_e,this.int16[Ze+8]=Re,this.int16[Ze+9]=je,this.int16[Ze+10]=Ge,this.int16[Ze+11]=Ye,a}}P.prototype.bytesPerElement=24,fi("StructArrayLayout4i4ui4i24",P);class j extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,m){const M=this.length;return this.resize(M+1),this.emplace(M,a,d,m)}emplace(a,d,m,M){const z=3*a;return this.float32[z+0]=d,this.float32[z+1]=m,this.float32[z+2]=M,a}}j.prototype.bytesPerElement=12,fi("StructArrayLayout3f12",j);class te extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const d=this.length;return this.resize(d+1),this.emplace(d,a)}emplace(a,d){return this.uint32[1*a+0]=d,a}}te.prototype.bytesPerElement=4,fi("StructArrayLayout1ul4",te);class ce extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,m,M,z,F,ie,ae,_e){const Re=this.length;return this.resize(Re+1),this.emplace(Re,a,d,m,M,z,F,ie,ae,_e)}emplace(a,d,m,M,z,F,ie,ae,_e,Re){const je=10*a,Ge=5*a;return this.int16[je+0]=d,this.int16[je+1]=m,this.int16[je+2]=M,this.int16[je+3]=z,this.int16[je+4]=F,this.int16[je+5]=ie,this.uint32[Ge+3]=ae,this.uint16[je+8]=_e,this.uint16[je+9]=Re,a}}ce.prototype.bytesPerElement=20,fi("StructArrayLayout6i1ul2ui20",ce);class me extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,m,M,z,F){const ie=this.length;return this.resize(ie+1),this.emplace(ie,a,d,m,M,z,F)}emplace(a,d,m,M,z,F,ie){const ae=6*a;return this.int16[ae+0]=d,this.int16[ae+1]=m,this.int16[ae+2]=M,this.int16[ae+3]=z,this.int16[ae+4]=F,this.int16[ae+5]=ie,a}}me.prototype.bytesPerElement=12,fi("StructArrayLayout2i2i2i12",me);class Se extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,m,M,z){const F=this.length;return this.resize(F+1),this.emplace(F,a,d,m,M,z)}emplace(a,d,m,M,z,F){const ie=4*a,ae=8*a;return this.float32[ie+0]=d,this.float32[ie+1]=m,this.float32[ie+2]=M,this.int16[ae+6]=z,this.int16[ae+7]=F,a}}Se.prototype.bytesPerElement=16,fi("StructArrayLayout2f1f2i16",Se);class Ne extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,m,M){const z=this.length;return this.resize(z+1),this.emplace(z,a,d,m,M)}emplace(a,d,m,M,z){const F=12*a,ie=3*a;return this.uint8[F+0]=d,this.uint8[F+1]=m,this.float32[ie+1]=M,this.float32[ie+2]=z,a}}Ne.prototype.bytesPerElement=12,fi("StructArrayLayout2ub2f12",Ne);class Ue extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,m){const M=this.length;return this.resize(M+1),this.emplace(M,a,d,m)}emplace(a,d,m,M){const z=3*a;return this.uint16[z+0]=d,this.uint16[z+1]=m,this.uint16[z+2]=M,a}}Ue.prototype.bytesPerElement=6,fi("StructArrayLayout3ui6",Ue);class We extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,m,M,z,F,ie,ae,_e,Re,je,Ge,Ye,Ze,ut,lt,vt){const Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,a,d,m,M,z,F,ie,ae,_e,Re,je,Ge,Ye,Ze,ut,lt,vt)}emplace(a,d,m,M,z,F,ie,ae,_e,Re,je,Ge,Ye,Ze,ut,lt,vt,Dt){const xt=24*a,Pt=12*a,$t=48*a;return this.int16[xt+0]=d,this.int16[xt+1]=m,this.uint16[xt+2]=M,this.uint16[xt+3]=z,this.uint32[Pt+2]=F,this.uint32[Pt+3]=ie,this.uint32[Pt+4]=ae,this.uint16[xt+10]=_e,this.uint16[xt+11]=Re,this.uint16[xt+12]=je,this.float32[Pt+7]=Ge,this.float32[Pt+8]=Ye,this.uint8[$t+36]=Ze,this.uint8[$t+37]=ut,this.uint8[$t+38]=lt,this.uint32[Pt+10]=vt,this.int16[xt+22]=Dt,a}}We.prototype.bytesPerElement=48,fi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",We);class it extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,m,M,z,F,ie,ae,_e,Re,je,Ge,Ye,Ze,ut,lt,vt,Dt,xt,Pt,$t,Bt,xi,Ci,ii,Kt,Zt,ni){const ei=this.length;return this.resize(ei+1),this.emplace(ei,a,d,m,M,z,F,ie,ae,_e,Re,je,Ge,Ye,Ze,ut,lt,vt,Dt,xt,Pt,$t,Bt,xi,Ci,ii,Kt,Zt,ni)}emplace(a,d,m,M,z,F,ie,ae,_e,Re,je,Ge,Ye,Ze,ut,lt,vt,Dt,xt,Pt,$t,Bt,xi,Ci,ii,Kt,Zt,ni,ei){const Vt=34*a,Mi=17*a;return this.int16[Vt+0]=d,this.int16[Vt+1]=m,this.int16[Vt+2]=M,this.int16[Vt+3]=z,this.int16[Vt+4]=F,this.int16[Vt+5]=ie,this.int16[Vt+6]=ae,this.int16[Vt+7]=_e,this.uint16[Vt+8]=Re,this.uint16[Vt+9]=je,this.uint16[Vt+10]=Ge,this.uint16[Vt+11]=Ye,this.uint16[Vt+12]=Ze,this.uint16[Vt+13]=ut,this.uint16[Vt+14]=lt,this.uint16[Vt+15]=vt,this.uint16[Vt+16]=Dt,this.uint16[Vt+17]=xt,this.uint16[Vt+18]=Pt,this.uint16[Vt+19]=$t,this.uint16[Vt+20]=Bt,this.uint16[Vt+21]=xi,this.uint16[Vt+22]=Ci,this.uint32[Mi+12]=ii,this.float32[Mi+13]=Kt,this.float32[Mi+14]=Zt,this.float32[Mi+15]=ni,this.float32[Mi+16]=ei,a}}it.prototype.bytesPerElement=68,fi("StructArrayLayout8i15ui1ul4f68",it);class Je extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const d=this.length;return this.resize(d+1),this.emplace(d,a)}emplace(a,d){return this.float32[1*a+0]=d,a}}Je.prototype.bytesPerElement=4,fi("StructArrayLayout1f4",Je);class et extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,m){const M=this.length;return this.resize(M+1),this.emplace(M,a,d,m)}emplace(a,d,m,M){const z=3*a;return this.int16[z+0]=d,this.int16[z+1]=m,this.int16[z+2]=M,a}}et.prototype.bytesPerElement=6,fi("StructArrayLayout3i6",et);class pt extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,m){const M=this.length;return this.resize(M+1),this.emplace(M,a,d,m)}emplace(a,d,m,M){const z=4*a;return this.uint32[2*a+0]=d,this.uint16[z+2]=m,this.uint16[z+3]=M,a}}pt.prototype.bytesPerElement=8,fi("StructArrayLayout1ul2ui8",pt);class yt extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d){const m=this.length;return this.resize(m+1),this.emplace(m,a,d)}emplace(a,d,m){const M=2*a;return this.uint16[M+0]=d,this.uint16[M+1]=m,a}}yt.prototype.bytesPerElement=4,fi("StructArrayLayout2ui4",yt);class wt extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const d=this.length;return this.resize(d+1),this.emplace(d,a)}emplace(a,d){return this.uint16[1*a+0]=d,a}}wt.prototype.bytesPerElement=2,fi("StructArrayLayout1ui2",wt);class at extends nr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,m,M){const z=this.length;return this.resize(z+1),this.emplace(z,a,d,m,M)}emplace(a,d,m,M,z){const F=4*a;return this.float32[F+0]=d,this.float32[F+1]=m,this.float32[F+2]=M,this.float32[F+3]=z,a}}at.prototype.bytesPerElement=16,fi("StructArrayLayout4f16",at);class Mt extends Jc{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new G(this.anchorPointX,this.anchorPointY)}}Mt.prototype.size=20;class St extends ce{get(a){return new Mt(this,a)}}fi("CollisionBoxArray",St);class Ot extends Jc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(a){this._structArray.uint8[this._pos1+37]=a}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(a){this._structArray.uint8[this._pos1+38]=a}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(a){this._structArray.uint32[this._pos4+10]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ot.prototype.size=48;class jt extends We{get(a){return new Ot(this,a)}}fi("PlacedSymbolArray",jt);class Ut extends Jc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(a){this._structArray.uint32[this._pos4+12]=a}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Ut.prototype.size=68;class zt extends it{get(a){return new Ut(this,a)}}fi("SymbolInstanceArray",zt);class ai extends Je{getoffsetX(a){return this.float32[1*a+0]}}fi("GlyphOffsetArray",ai);class Xt extends et{getx(a){return this.int16[3*a+0]}gety(a){return this.int16[3*a+1]}gettileUnitDistanceFromAnchor(a){return this.int16[3*a+2]}}fi("SymbolLineVertexArray",Xt);class li extends Jc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}li.prototype.size=8;class Ki extends pt{get(a){return new li(this,a)}}fi("FeatureIndexArray",Ki);class un extends Hl{}class Ii extends Hl{}class $n extends Hl{}class Un extends k{}class wn extends o{}class Cn extends h{}class kn extends _{}class ta extends P{}class Ka extends j{}class Ia extends te{}class Da extends me{}class ul extends Ne{}class os extends Ue{}class Ra extends yt{}const dl=Or([{name:"a_pos",components:2,type:"Int16"}],4),{members:gd}=dl;class An{constructor(a=[]){this.segments=a}prepareSegment(a,d,m,M){let z=this.segments[this.segments.length-1];return a>An.MAX_VERTEX_ARRAY_LENGTH&&C(`Max vertices per segment is ${An.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!z||z.vertexLength+a>An.MAX_VERTEX_ARRAY_LENGTH||z.sortKey!==M)&&(z={vertexOffset:d.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},M!==void 0&&(z.sortKey=M),this.segments.push(z)),z}get(){return this.segments}destroy(){for(const a of this.segments)for(const d in a.vaos)a.vaos[d].destroy()}static simpleSegment(a,d,m,M){return new An([{vertexOffset:a,primitiveOffset:d,vertexLength:m,primitiveLength:M,vaos:{},sortKey:0}])}}function rr(c,a){return 256*(c=y(Math.floor(c),0,255))+y(Math.floor(a),0,255)}An.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,fi("SegmentVector",An);const Pn=Or([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var jr={exports:{}},Vs={exports:{}};Vs.exports=function(c,a){var d,m,M,z,F,ie,ae,_e;for(m=c.length-(d=3&c.length),M=a,F=3432918353,ie=461845907,_e=0;_e<m;)ae=255&c.charCodeAt(_e)|(255&c.charCodeAt(++_e))<<8|(255&c.charCodeAt(++_e))<<16|(255&c.charCodeAt(++_e))<<24,++_e,M=27492+(65535&(z=5*(65535&(M=(M^=ae=(65535&(ae=(ae=(65535&ae)*F+(((ae>>>16)*F&65535)<<16)&4294967295)<<15|ae>>>17))*ie+(((ae>>>16)*ie&65535)<<16)&4294967295)<<13|M>>>19))+((5*(M>>>16)&65535)<<16)&4294967295))+((58964+(z>>>16)&65535)<<16);switch(ae=0,d){case 3:ae^=(255&c.charCodeAt(_e+2))<<16;case 2:ae^=(255&c.charCodeAt(_e+1))<<8;case 1:M^=ae=(65535&(ae=(ae=(65535&(ae^=255&c.charCodeAt(_e)))*F+(((ae>>>16)*F&65535)<<16)&4294967295)<<15|ae>>>17))*ie+(((ae>>>16)*ie&65535)<<16)&4294967295}return M^=c.length,M=2246822507*(65535&(M^=M>>>16))+((2246822507*(M>>>16)&65535)<<16)&4294967295,M=3266489909*(65535&(M^=M>>>13))+((3266489909*(M>>>16)&65535)<<16)&4294967295,(M^=M>>>16)>>>0};var cr={exports:{}};cr.exports=function(c,a){for(var d,m=c.length,M=a^m,z=0;m>=4;)d=1540483477*(65535&(d=255&c.charCodeAt(z)|(255&c.charCodeAt(++z))<<8|(255&c.charCodeAt(++z))<<16|(255&c.charCodeAt(++z))<<24))+((1540483477*(d>>>16)&65535)<<16),M=1540483477*(65535&M)+((1540483477*(M>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),m-=4,++z;switch(m){case 3:M^=(255&c.charCodeAt(z+2))<<16;case 2:M^=(255&c.charCodeAt(z+1))<<8;case 1:M=1540483477*(65535&(M^=255&c.charCodeAt(z)))+((1540483477*(M>>>16)&65535)<<16)}return M=1540483477*(65535&(M^=M>>>13))+((1540483477*(M>>>16)&65535)<<16),(M^=M>>>15)>>>0};var _a=Vs.exports,ql=cr.exports;jr.exports=_a,jr.exports.murmur3=_a,jr.exports.murmur2=ql;class Wl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,d,m,M){this.ids.push(yd(a)),this.positions.push(d,m,M)}getPositions(a){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=yd(a);let m=0,M=this.ids.length-1;for(;m<M;){const F=m+M>>1;this.ids[F]>=d?M=F:m=F+1}const z=[];for(;this.ids[m]===d;)z.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return z}static serialize(a,d){const m=new Float64Array(a.ids),M=new Uint32Array(a.positions);return np(m,M,0,m.length-1),d&&d.push(m.buffer,M.buffer),{ids:m,positions:M}}static deserialize(a){const d=new Wl;return d.ids=a.ids,d.positions=a.positions,d.indexed=!0,d}}function yd(c){const a=+c;return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER?a:jr.exports(String(c))}function np(c,a,d,m){for(;d<m;){const M=c[d+m>>1];let z=d-1,F=m+1;for(;;){do z++;while(c[z]<M);do F--;while(c[F]>M);if(z>=F)break;xd(c,z,F),xd(a,3*z,3*F),xd(a,3*z+1,3*F+1),xd(a,3*z+2,3*F+2)}F-d<m-F?(np(c,a,d,F),d=F+1):(np(c,a,F+1,m),m=F)}}function xd(c,a,d){const m=c[a];c[a]=c[d],c[d]=m}fi("FeaturePositionMap",Wl);class La{constructor(a,d){this.gl=a.gl,this.location=d}}class bd extends La{constructor(a,d){super(a,d),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class tu extends La{constructor(a,d){super(a,d),this.current=[0,0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))}}class vd extends La{constructor(a,d){super(a,d),this.current=Ve.transparent}set(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))}}const gA=new Float32Array(16);function Vx(c){return[rr(255*c.r,255*c.g),rr(255*c.b,255*c.a)]}class rp{constructor(a,d,m){this.value=a,this.uniformNames=d.map(M=>`u_${M}`),this.type=m}setUniform(a,d,m){a.set(m.constantOr(this.value))}getBinding(a,d,m){return this.type==="color"?new vd(a,d):new bd(a,d)}}class _d{constructor(a,d){this.uniformNames=d.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(a,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=a.tlbr}setUniform(a,d,m,M){const z=M==="u_pattern_to"?this.patternTo:M==="u_pattern_from"?this.patternFrom:M==="u_pixel_ratio_to"?this.pixelRatioTo:M==="u_pixel_ratio_from"?this.pixelRatioFrom:null;z&&a.set(z)}getBinding(a,d,m){return m.substr(0,9)==="u_pattern"?new tu(a,d):new bd(a,d)}}class hl{constructor(a,d,m,M){this.expression=a,this.type=m,this.maxValue=0,this.paintVertexAttributes=d.map(z=>({name:`a_${z}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new M}populatePaintArray(a,d,m,M,z){const F=this.paintVertexArray.length,ie=this.expression.evaluate(new lr(0),d,{},M,[],z);this.paintVertexArray.resize(a),this._setPaintValue(F,a,ie)}updatePaintArray(a,d,m,M){const z=this.expression.evaluate({zoom:0},m,M);this._setPaintValue(a,d,z)}_setPaintValue(a,d,m){if(this.type==="color"){const M=Vx(m);for(let z=a;z<d;z++)this.paintVertexArray.emplace(z,M[0],M[1])}else{for(let M=a;M<d;M++)this.paintVertexArray.emplace(M,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class oo{constructor(a,d,m,M,z,F){this.expression=a,this.uniformNames=d.map(ie=>`u_${ie}_t`),this.type=m,this.useIntegerZoom=M,this.zoom=z,this.maxValue=0,this.paintVertexAttributes=d.map(ie=>({name:`a_${ie}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new F}populatePaintArray(a,d,m,M,z){const F=this.expression.evaluate(new lr(this.zoom),d,{},M,[],z),ie=this.expression.evaluate(new lr(this.zoom+1),d,{},M,[],z),ae=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(ae,a,F,ie)}updatePaintArray(a,d,m,M){const z=this.expression.evaluate({zoom:this.zoom},m,M),F=this.expression.evaluate({zoom:this.zoom+1},m,M);this._setPaintValue(a,d,z,F)}_setPaintValue(a,d,m,M){if(this.type==="color"){const z=Vx(m),F=Vx(M);for(let ie=a;ie<d;ie++)this.paintVertexArray.emplace(ie,z[0],z[1],F[0],F[1])}else{for(let z=a;z<d;z++)this.paintVertexArray.emplace(z,m,M);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(M))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,d){const m=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,M=y(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);a.set(M)}getBinding(a,d,m){return new bd(a,d)}}class Yl{constructor(a,d,m,M,z,F){this.expression=a,this.type=d,this.useIntegerZoom=m,this.zoom=M,this.layerId=F,this.zoomInPaintVertexArray=new z,this.zoomOutPaintVertexArray=new z}populatePaintArray(a,d,m){const M=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(M,a,d.patterns&&d.patterns[this.layerId],m)}updatePaintArray(a,d,m,M,z){this._setPaintValues(a,d,m.patterns&&m.patterns[this.layerId],z)}_setPaintValues(a,d,m,M){if(!M||!m)return;const{min:z,mid:F,max:ie}=m,ae=M[z],_e=M[F],Re=M[ie];if(ae&&_e&&Re)for(let je=a;je<d;je++)this.zoomInPaintVertexArray.emplace(je,_e.tl[0],_e.tl[1],_e.br[0],_e.br[1],ae.tl[0],ae.tl[1],ae.br[0],ae.br[1],_e.pixelRatio,ae.pixelRatio),this.zoomOutPaintVertexArray.emplace(je,_e.tl[0],_e.tl[1],_e.br[0],_e.br[1],Re.tl[0],Re.tl[1],Re.br[0],Re.br[1],_e.pixelRatio,Re.pixelRatio)}upload(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,Pn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,Pn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class u_{constructor(a,d,m){this.binders={},this._buffers=[];const M=[];for(const z in a.paint._values){if(!m(z))continue;const F=a.paint.get(z);if(!(F instanceof Xa&&Bl(F.property.specification)))continue;const ie=yA(z,a.type),ae=F.value,_e=F.property.specification.type,Re=F.property.useIntegerZoom,je=F.property.specification["property-type"],Ge=je==="cross-faded"||je==="cross-faded-data-driven";if(ae.kind==="constant")this.binders[z]=Ge?new _d(ae.value,ie):new rp(ae.value,ie,_e),M.push(`/u_${z}`);else if(ae.kind==="source"||Ge){const Ye=d_(z,_e,"source");this.binders[z]=Ge?new Yl(ae,_e,Re,d,Ye,a.id):new hl(ae,ie,_e,Ye),M.push(`/a_${z}`)}else{const Ye=d_(z,_e,"composite");this.binders[z]=new oo(ae,ie,_e,Re,d,Ye),M.push(`/z_${z}`)}}this.cacheKey=M.sort().join("")}getMaxValue(a){const d=this.binders[a];return d instanceof hl||d instanceof oo?d.maxValue:0}populatePaintArrays(a,d,m,M,z){for(const F in this.binders){const ie=this.binders[F];(ie instanceof hl||ie instanceof oo||ie instanceof Yl)&&ie.populatePaintArray(a,d,m,M,z)}}setConstantPatternPositions(a,d){for(const m in this.binders){const M=this.binders[m];M instanceof _d&&M.setConstantPatternPositions(a,d)}}updatePaintArrays(a,d,m,M,z){let F=!1;for(const ie in a){const ae=d.getPositions(ie);for(const _e of ae){const Re=m.feature(_e.index);for(const je in this.binders){const Ge=this.binders[je];if((Ge instanceof hl||Ge instanceof oo||Ge instanceof Yl)&&Ge.expression.isStateDependent===!0){const Ye=M.paint.get(je);Ge.expression=Ye.value,Ge.updatePaintArray(_e.start,_e.end,Re,a[ie],z),F=!0}}}}return F}defines(){const a=[];for(const d in this.binders){const m=this.binders[d];(m instanceof rp||m instanceof _d)&&a.push(...m.uniformNames.map(M=>`#define HAS_UNIFORM_${M}`))}return a}getBinderAttributes(){const a=[];for(const d in this.binders){const m=this.binders[d];if(m instanceof hl||m instanceof oo)for(let M=0;M<m.paintVertexAttributes.length;M++)a.push(m.paintVertexAttributes[M].name);else if(m instanceof Yl)for(let M=0;M<Pn.members.length;M++)a.push(Pn.members[M].name)}return a}getBinderUniforms(){const a=[];for(const d in this.binders){const m=this.binders[d];if(m instanceof rp||m instanceof _d||m instanceof oo)for(const M of m.uniformNames)a.push(M)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a,d){const m=[];for(const M in this.binders){const z=this.binders[M];if(z instanceof rp||z instanceof _d||z instanceof oo){for(const F of z.uniformNames)if(d[F]){const ie=z.getBinding(a,d[F],F);m.push({name:F,property:M,binding:ie})}}}return m}setUniforms(a,d,m,M){for(const{name:z,property:F,binding:ie}of d)this.binders[F].setUniform(ie,M,m.get(F),z)}updatePaintBuffers(a){this._buffers=[];for(const d in this.binders){const m=this.binders[d];if(a&&m instanceof Yl){const M=a.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;M&&this._buffers.push(M)}else(m instanceof hl||m instanceof oo)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(a){for(const d in this.binders){const m=this.binders[d];(m instanceof hl||m instanceof oo||m instanceof Yl)&&m.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const d=this.binders[a];(d instanceof hl||d instanceof oo||d instanceof Yl)&&d.destroy()}}}class iu{constructor(a,d,m=()=>!0){this.programConfigurations={};for(const M of a)this.programConfigurations[M.id]=new u_(M,d,m);this.needsUpload=!1,this._featureMap=new Wl,this._bufferOffset=0}populatePaintArrays(a,d,m,M,z,F){for(const ie in this.programConfigurations)this.programConfigurations[ie].populatePaintArrays(a,d,M,z,F);d.id!==void 0&&this._featureMap.add(d.id,m,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,d,m,M){for(const z of m)this.needsUpload=this.programConfigurations[z.id].updatePaintArrays(a,this._featureMap,d,z,M)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}function yA(c,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${a}-`,"").replace(/-/g,"_")]}function d_(c,a,d){const m={color:{source:h,composite:at},number:{source:Je,composite:h}},M=function(z){return{"line-pattern":{source:kn,composite:kn},"fill-pattern":{source:kn,composite:kn},"fill-extrusion-pattern":{source:kn,composite:kn}}[z]}(c);return M&&M[d]||m[a][d]}fi("ConstantBinder",rp),fi("CrossFadedConstantBinder",_d),fi("SourceExpressionBinder",hl),fi("CrossFadedCompositeBinder",Yl),fi("CompositeExpressionBinder",oo),fi("ProgramConfiguration",u_,{omit:["_buffers"]}),fi("ProgramConfigurationSet",iu);var Gr=8192;const Gx=Math.pow(2,14)-1,h_=-Gx-1;function nu(c){const a=Gr/c.extent,d=c.loadGeometry();for(let m=0;m<d.length;m++){const M=d[m];for(let z=0;z<M.length;z++){const F=M[z],ie=Math.round(F.x*a),ae=Math.round(F.y*a);F.x=y(ie,h_,Gx),F.y=y(ae,h_,Gx),(ie<F.x||ie>F.x+1||ae<F.y||ae>F.y+1)&&C("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function ru(c,a){return{type:c.type,id:c.id,properties:c.properties,geometry:a?nu(c):[]}}function Fm(c,a,d,m,M){c.emplaceBack(2*a+(m+1)/2,2*d+(M+1)/2)}class Hx{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Ii,this.indexArray=new os,this.segments=new An,this.programConfigurations=new iu(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(a,d,m){const M=this.layers[0],z=[];let F=null,ie=!1;M.type==="circle"&&(F=M.layout.get("circle-sort-key"),ie=!F.isConstant());for(const{feature:ae,id:_e,index:Re,sourceLayerIndex:je}of a){const Ge=this.layers[0]._featureFilter.needGeometry,Ye=ru(ae,Ge);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),Ye,m))continue;const Ze=ie?F.evaluate(Ye,{},m):void 0,ut={id:_e,properties:ae.properties,type:ae.type,sourceLayerIndex:je,index:Re,geometry:Ge?Ye.geometry:nu(ae),patterns:{},sortKey:Ze};z.push(ut)}ie&&z.sort((ae,_e)=>ae.sortKey-_e.sortKey);for(const ae of z){const{geometry:_e,index:Re,sourceLayerIndex:je}=ae,Ge=a[Re].feature;this.addFeature(ae,_e,Re,m),d.featureIndex.insert(Ge,_e,Re,je,this.index)}}update(a,d,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,d,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,gd),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,d,m,M){for(const z of d)for(const F of z){const ie=F.x,ae=F.y;if(ie<0||ie>=Gr||ae<0||ae>=Gr)continue;const _e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),Re=_e.vertexLength;Fm(this.layoutVertexArray,ie,ae,-1,-1),Fm(this.layoutVertexArray,ie,ae,1,-1),Fm(this.layoutVertexArray,ie,ae,1,1),Fm(this.layoutVertexArray,ie,ae,-1,1),this.indexArray.emplaceBack(Re,Re+1,Re+2),this.indexArray.emplaceBack(Re,Re+3,Re+2),_e.vertexLength+=4,_e.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,{},M)}}function p_(c,a){for(let d=0;d<c.length;d++)if(wd(a,c[d]))return!0;for(let d=0;d<a.length;d++)if(wd(c,a[d]))return!0;return!!qx(c,a)}function xA(c,a,d){return!!wd(c,a)||!!Wx(a,c,d)}function f_(c,a){if(c.length===1)return g_(a,c[0]);for(let d=0;d<a.length;d++){const m=a[d];for(let M=0;M<m.length;M++)if(wd(c,m[M]))return!0}for(let d=0;d<c.length;d++)if(g_(a,c[d]))return!0;for(let d=0;d<a.length;d++)if(qx(c,a[d]))return!0;return!1}function bA(c,a,d){if(c.length>1){if(qx(c,a))return!0;for(let m=0;m<a.length;m++)if(Wx(a[m],c,d))return!0}for(let m=0;m<c.length;m++)if(Wx(c[m],a,d))return!0;return!1}function qx(c,a){if(c.length===0||a.length===0)return!1;for(let d=0;d<c.length-1;d++){const m=c[d],M=c[d+1];for(let z=0;z<a.length-1;z++)if(vA(m,M,a[z],a[z+1]))return!0}return!1}function vA(c,a,d,m){return I(c,d,m)!==I(a,d,m)&&I(c,a,d)!==I(c,a,m)}function Wx(c,a,d){const m=d*d;if(a.length===1)return c.distSqr(a[0])<m;for(let M=1;M<a.length;M++)if(m_(c,a[M-1],a[M])<m)return!0;return!1}function m_(c,a,d){const m=a.distSqr(d);if(m===0)return c.distSqr(a);const M=((c.x-a.x)*(d.x-a.x)+(c.y-a.y)*(d.y-a.y))/m;return c.distSqr(M<0?a:M>1?d:d.sub(a)._mult(M)._add(a))}function g_(c,a){let d,m,M,z=!1;for(let F=0;F<c.length;F++){d=c[F];for(let ie=0,ae=d.length-1;ie<d.length;ae=ie++)m=d[ie],M=d[ae],m.y>a.y!=M.y>a.y&&a.x<(M.x-m.x)*(a.y-m.y)/(M.y-m.y)+m.x&&(z=!z)}return z}function wd(c,a){let d=!1;for(let m=0,M=c.length-1;m<c.length;M=m++){const z=c[m],F=c[M];z.y>a.y!=F.y>a.y&&a.x<(F.x-z.x)*(a.y-z.y)/(F.y-z.y)+z.x&&(d=!d)}return d}function _A(c,a,d){const m=d[0],M=d[2];if(c.x<m.x&&a.x<m.x||c.x>M.x&&a.x>M.x||c.y<m.y&&a.y<m.y||c.y>M.y&&a.y>M.y)return!1;const z=I(c,a,d[0]);return z!==I(c,a,d[1])||z!==I(c,a,d[2])||z!==I(c,a,d[3])}function sp(c,a,d){const m=a.paint.get(c).value;return m.kind==="constant"?m.value:d.programConfigurations.get(a.id).getMaxValue(c)}function Bm(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function $m(c,a,d,m,M){if(!a[0]&&!a[1])return c;const z=G.convert(a)._mult(M);d==="viewport"&&z._rotate(-m);const F=[];for(let ie=0;ie<c.length;ie++)F.push(c[ie].sub(z));return F}fi("CircleBucket",Hx,{omit:["layers"]});const wA=new Vr({"circle-sort-key":new Di(Pe.layout_circle["circle-sort-key"])});var TA={paint:new Vr({"circle-radius":new Di(Pe.paint_circle["circle-radius"]),"circle-color":new Di(Pe.paint_circle["circle-color"]),"circle-blur":new Di(Pe.paint_circle["circle-blur"]),"circle-opacity":new Di(Pe.paint_circle["circle-opacity"]),"circle-translate":new Ei(Pe.paint_circle["circle-translate"]),"circle-translate-anchor":new Ei(Pe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ei(Pe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ei(Pe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Di(Pe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Di(Pe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Di(Pe.paint_circle["circle-stroke-opacity"])}),layout:wA},Gs=1e-6,Hs=typeof Float32Array<"u"?Float32Array:Array;function y_(){var c=new Hs(9);return Hs!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function Yx(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function x_(c,a,d){var m=a[0],M=a[1],z=a[2],F=a[3],ie=a[4],ae=a[5],_e=a[6],Re=a[7],je=a[8],Ge=a[9],Ye=a[10],Ze=a[11],ut=a[12],lt=a[13],vt=a[14],Dt=a[15],xt=d[0],Pt=d[1],$t=d[2],Bt=d[3];return c[0]=xt*m+Pt*ie+$t*je+Bt*ut,c[1]=xt*M+Pt*ae+$t*Ge+Bt*lt,c[2]=xt*z+Pt*_e+$t*Ye+Bt*vt,c[3]=xt*F+Pt*Re+$t*Ze+Bt*Dt,c[4]=(xt=d[4])*m+(Pt=d[5])*ie+($t=d[6])*je+(Bt=d[7])*ut,c[5]=xt*M+Pt*ae+$t*Ge+Bt*lt,c[6]=xt*z+Pt*_e+$t*Ye+Bt*vt,c[7]=xt*F+Pt*Re+$t*Ze+Bt*Dt,c[8]=(xt=d[8])*m+(Pt=d[9])*ie+($t=d[10])*je+(Bt=d[11])*ut,c[9]=xt*M+Pt*ae+$t*Ge+Bt*lt,c[10]=xt*z+Pt*_e+$t*Ye+Bt*vt,c[11]=xt*F+Pt*Re+$t*Ze+Bt*Dt,c[12]=(xt=d[12])*m+(Pt=d[13])*ie+($t=d[14])*je+(Bt=d[15])*ut,c[13]=xt*M+Pt*ae+$t*Ge+Bt*lt,c[14]=xt*z+Pt*_e+$t*Ye+Bt*vt,c[15]=xt*F+Pt*Re+$t*Ze+Bt*Dt,c}Math.hypot||(Math.hypot=function(){for(var c=0,a=arguments.length;a--;)c+=arguments[a]*arguments[a];return Math.sqrt(c)});var ap,CA=x_;function b_(){var c=new Hs(3);return Hs!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function v_(c,a,d){var m=new Hs(3);return m[0]=c,m[1]=a,m[2]=d,m}function Um(c,a,d){var m=a[0],M=a[1],z=a[2],F=a[3];return c[0]=d[0]*m+d[4]*M+d[8]*z+d[12]*F,c[1]=d[1]*m+d[5]*M+d[9]*z+d[13]*F,c[2]=d[2]*m+d[6]*M+d[10]*z+d[14]*F,c[3]=d[3]*m+d[7]*M+d[11]*z+d[15]*F,c}function __(){var c=new Hs(4);return Hs!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function w_(c,a){const d=Um([],[c.x,c.y,0,1],a);return new G(d[0]/d[3],d[1]/d[3])}b_(),ap=new Hs(4),Hs!=Float32Array&&(ap[0]=0,ap[1]=0,ap[2]=0,ap[3]=0),b_(),v_(1,0,0),v_(0,1,0),__(),__(),y_(),function(){var c;c=new Hs(2),Hs!=Float32Array&&(c[0]=0,c[1]=0)}();class T_ extends Hx{}fi("HeatmapBucket",T_,{omit:["layers"]});var SA={paint:new Vr({"heatmap-radius":new Di(Pe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Di(Pe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ei(Pe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ip(Pe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ei(Pe.paint_heatmap["heatmap-opacity"])})};function Zx(c,{width:a,height:d},m,M){if(M){if(M instanceof Uint8ClampedArray)M=new Uint8Array(M.buffer);else if(M.length!==a*d*m)throw new RangeError(`mismatched image size. expected: ${M.length} but got: ${a*d*m}`)}else M=new Uint8Array(a*d*m);return c.width=a,c.height=d,c.data=M,c}function C_(c,{width:a,height:d},m){if(a===c.width&&d===c.height)return;const M=Zx({},{width:a,height:d},m);Xx(c,M,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,a),height:Math.min(c.height,d)},m),c.width=a,c.height=d,c.data=M.data}function Xx(c,a,d,m,M,z){if(M.width===0||M.height===0)return a;if(M.width>c.width||M.height>c.height||d.x>c.width-M.width||d.y>c.height-M.height)throw new RangeError("out of range source coordinates for image copy");if(M.width>a.width||M.height>a.height||m.x>a.width-M.width||m.y>a.height-M.height)throw new RangeError("out of range destination coordinates for image copy");const F=c.data,ie=a.data;if(F===ie)throw new Error("srcData equals dstData, so image is already copied");for(let ae=0;ae<M.height;ae++){const _e=((d.y+ae)*c.width+d.x)*z,Re=((m.y+ae)*a.width+m.x)*z;for(let je=0;je<M.width*z;je++)ie[Re+je]=F[_e+je]}return a}class op{constructor(a,d){Zx(this,a,1,d)}resize(a){C_(this,a,1)}clone(){return new op({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,d,m,M,z){Xx(a,d,m,M,z,1)}}class za{constructor(a,d){Zx(this,a,4,d)}resize(a){C_(this,a,4)}replace(a,d){d?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new za({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,d,m,M,z){Xx(a,d,m,M,z,4)}}function S_(c){const a={},d=c.resolution||256,m=c.clips?c.clips.length:1,M=c.image||new za({width:d,height:m});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const z=(F,ie,ae)=>{a[c.evaluationKey]=ae;const _e=c.expression.evaluate(a);M.data[F+ie+0]=Math.floor(255*_e.r/_e.a),M.data[F+ie+1]=Math.floor(255*_e.g/_e.a),M.data[F+ie+2]=Math.floor(255*_e.b/_e.a),M.data[F+ie+3]=Math.floor(255*_e.a)};if(c.clips)for(let F=0,ie=0;F<m;++F,ie+=4*d)for(let ae=0,_e=0;ae<d;ae++,_e+=4){const Re=ae/(d-1),{start:je,end:Ge}=c.clips[F];z(ie,_e,je*(1-Re)+Ge*Re)}else for(let F=0,ie=0;F<d;F++,ie+=4)z(0,ie,F/(d-1));return M}fi("AlphaImage",op),fi("RGBAImage",za);var EA={paint:new Vr({"hillshade-illumination-direction":new Ei(Pe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ei(Pe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ei(Pe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ei(Pe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ei(Pe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ei(Pe.paint_hillshade["hillshade-accent-color"])})};const kA=Or([{name:"a_pos",components:2,type:"Int16"}],4),{members:AA}=kA;var Vm={exports:{}};function Gm(c,a,d){d=d||2;var m,M,z,F,ie,ae,_e,Re=a&&a.length,je=Re?a[0]*d:c.length,Ge=E_(c,0,je,d,!0),Ye=[];if(!Ge||Ge.next===Ge.prev)return Ye;if(Re&&(Ge=function(ut,lt,vt,Dt){var xt,Pt,$t,Bt=[];for(xt=0,Pt=lt.length;xt<Pt;xt++)($t=E_(ut,lt[xt]*Dt,xt<Pt-1?lt[xt+1]*Dt:ut.length,Dt,!1))===$t.next&&($t.steiner=!0),Bt.push(NA($t));for(Bt.sort(RA),xt=0;xt<Bt.length;xt++)vt=LA(Bt[xt],vt);return vt}(c,a,Ge,d)),c.length>80*d){m=z=c[0],M=F=c[1];for(var Ze=d;Ze<je;Ze+=d)(ie=c[Ze])<m&&(m=ie),(ae=c[Ze+1])<M&&(M=ae),ie>z&&(z=ie),ae>F&&(F=ae);_e=(_e=Math.max(z-m,F-M))!==0?32767/_e:0}return lp(Ge,Ye,d,m,M,_e,0),Ye}function E_(c,a,d,m,M){var z,F;if(M===Jx(c,a,d,m)>0)for(z=a;z<d;z+=m)F=M_(z,c[z],c[z+1],F);else for(z=d-m;z>=a;z-=m)F=M_(z,c[z],c[z+1],F);return F&&Hm(F,F.next)&&(up(F),F=F.next),F}function su(c,a){if(!c)return c;a||(a=c);var d,m=c;do if(d=!1,m.steiner||!Hm(m,m.next)&&Pr(m.prev,m,m.next)!==0)m=m.next;else{if(up(m),(m=a=m.prev)===m.next)break;d=!0}while(d||m!==a);return a}function lp(c,a,d,m,M,z,F){if(c){!F&&z&&function(Re,je,Ge,Ye){var Ze=Re;do Ze.z===0&&(Ze.z=Kx(Ze.x,Ze.y,je,Ge,Ye)),Ze.prevZ=Ze.prev,Ze.nextZ=Ze.next,Ze=Ze.next;while(Ze!==Re);Ze.prevZ.nextZ=null,Ze.prevZ=null,function(ut){var lt,vt,Dt,xt,Pt,$t,Bt,xi,Ci=1;do{for(vt=ut,ut=null,Pt=null,$t=0;vt;){for($t++,Dt=vt,Bt=0,lt=0;lt<Ci&&(Bt++,Dt=Dt.nextZ);lt++);for(xi=Ci;Bt>0||xi>0&&Dt;)Bt!==0&&(xi===0||!Dt||vt.z<=Dt.z)?(xt=vt,vt=vt.nextZ,Bt--):(xt=Dt,Dt=Dt.nextZ,xi--),Pt?Pt.nextZ=xt:ut=xt,xt.prevZ=Pt,Pt=xt;vt=Dt}Pt.nextZ=null,Ci*=2}while($t>1)}(Ze)}(c,m,M,z);for(var ie,ae,_e=c;c.prev!==c.next;)if(ie=c.prev,ae=c.next,z?PA(c,m,M,z):MA(c))a.push(ie.i/d|0),a.push(c.i/d|0),a.push(ae.i/d|0),up(c),c=ae.next,_e=ae.next;else if((c=ae)===_e){F?F===1?lp(c=IA(su(c),a,d),a,d,m,M,z,2):F===2&&DA(c,a,d,m,M,z):lp(su(c),a,d,m,M,z,1);break}}}function MA(c){var a=c.prev,d=c,m=c.next;if(Pr(a,d,m)>=0)return!1;for(var M=a.x,z=d.x,F=m.x,ie=a.y,ae=d.y,_e=m.y,Re=M<z?M<F?M:F:z<F?z:F,je=ie<ae?ie<_e?ie:_e:ae<_e?ae:_e,Ge=M>z?M>F?M:F:z>F?z:F,Ye=ie>ae?ie>_e?ie:_e:ae>_e?ae:_e,Ze=m.next;Ze!==a;){if(Ze.x>=Re&&Ze.x<=Ge&&Ze.y>=je&&Ze.y<=Ye&&Td(M,ie,z,ae,F,_e,Ze.x,Ze.y)&&Pr(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.next}return!0}function PA(c,a,d,m){var M=c.prev,z=c,F=c.next;if(Pr(M,z,F)>=0)return!1;for(var ie=M.x,ae=z.x,_e=F.x,Re=M.y,je=z.y,Ge=F.y,Ye=ie<ae?ie<_e?ie:_e:ae<_e?ae:_e,Ze=Re<je?Re<Ge?Re:Ge:je<Ge?je:Ge,ut=ie>ae?ie>_e?ie:_e:ae>_e?ae:_e,lt=Re>je?Re>Ge?Re:Ge:je>Ge?je:Ge,vt=Kx(Ye,Ze,a,d,m),Dt=Kx(ut,lt,a,d,m),xt=c.prevZ,Pt=c.nextZ;xt&&xt.z>=vt&&Pt&&Pt.z<=Dt;){if(xt.x>=Ye&&xt.x<=ut&&xt.y>=Ze&&xt.y<=lt&&xt!==M&&xt!==F&&Td(ie,Re,ae,je,_e,Ge,xt.x,xt.y)&&Pr(xt.prev,xt,xt.next)>=0||(xt=xt.prevZ,Pt.x>=Ye&&Pt.x<=ut&&Pt.y>=Ze&&Pt.y<=lt&&Pt!==M&&Pt!==F&&Td(ie,Re,ae,je,_e,Ge,Pt.x,Pt.y)&&Pr(Pt.prev,Pt,Pt.next)>=0))return!1;Pt=Pt.nextZ}for(;xt&&xt.z>=vt;){if(xt.x>=Ye&&xt.x<=ut&&xt.y>=Ze&&xt.y<=lt&&xt!==M&&xt!==F&&Td(ie,Re,ae,je,_e,Ge,xt.x,xt.y)&&Pr(xt.prev,xt,xt.next)>=0)return!1;xt=xt.prevZ}for(;Pt&&Pt.z<=Dt;){if(Pt.x>=Ye&&Pt.x<=ut&&Pt.y>=Ze&&Pt.y<=lt&&Pt!==M&&Pt!==F&&Td(ie,Re,ae,je,_e,Ge,Pt.x,Pt.y)&&Pr(Pt.prev,Pt,Pt.next)>=0)return!1;Pt=Pt.nextZ}return!0}function IA(c,a,d){var m=c;do{var M=m.prev,z=m.next.next;!Hm(M,z)&&k_(M,m,m.next,z)&&cp(M,z)&&cp(z,M)&&(a.push(M.i/d|0),a.push(m.i/d|0),a.push(z.i/d|0),up(m),up(m.next),m=c=z),m=m.next}while(m!==c);return su(m)}function DA(c,a,d,m,M,z){var F=c;do{for(var ie=F.next.next;ie!==F.prev;){if(F.i!==ie.i&&OA(F,ie)){var ae=A_(F,ie);return F=su(F,F.next),ae=su(ae,ae.next),lp(F,a,d,m,M,z,0),void lp(ae,a,d,m,M,z,0)}ie=ie.next}F=F.next}while(F!==c)}function RA(c,a){return c.x-a.x}function LA(c,a){var d=function(M,z){var F,ie=z,ae=M.x,_e=M.y,Re=-1/0;do{if(_e<=ie.y&&_e>=ie.next.y&&ie.next.y!==ie.y){var je=ie.x+(_e-ie.y)*(ie.next.x-ie.x)/(ie.next.y-ie.y);if(je<=ae&&je>Re&&(Re=je,F=ie.x<ie.next.x?ie:ie.next,je===ae))return F}ie=ie.next}while(ie!==z);if(!F)return null;var Ge,Ye=F,Ze=F.x,ut=F.y,lt=1/0;ie=F;do ae>=ie.x&&ie.x>=Ze&&ae!==ie.x&&Td(_e<ut?ae:Re,_e,Ze,ut,_e<ut?Re:ae,_e,ie.x,ie.y)&&(Ge=Math.abs(_e-ie.y)/(ae-ie.x),cp(ie,M)&&(Ge<lt||Ge===lt&&(ie.x>F.x||ie.x===F.x&&zA(F,ie)))&&(F=ie,lt=Ge)),ie=ie.next;while(ie!==Ye);return F}(c,a);if(!d)return a;var m=A_(d,c);return su(m,m.next),su(d,d.next)}function zA(c,a){return Pr(c.prev,c,a.prev)<0&&Pr(a.next,c,c.next)<0}function Kx(c,a,d,m,M){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-d)*M|0)|c<<8))|c<<4))|c<<2))|c<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-m)*M|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function NA(c){var a=c,d=c;do(a.x<d.x||a.x===d.x&&a.y<d.y)&&(d=a),a=a.next;while(a!==c);return d}function Td(c,a,d,m,M,z,F,ie){return(M-F)*(a-ie)>=(c-F)*(z-ie)&&(c-F)*(m-ie)>=(d-F)*(a-ie)&&(d-F)*(z-ie)>=(M-F)*(m-ie)}function OA(c,a){return c.next.i!==a.i&&c.prev.i!==a.i&&!function(d,m){var M=d;do{if(M.i!==d.i&&M.next.i!==d.i&&M.i!==m.i&&M.next.i!==m.i&&k_(M,M.next,d,m))return!0;M=M.next}while(M!==d);return!1}(c,a)&&(cp(c,a)&&cp(a,c)&&function(d,m){var M=d,z=!1,F=(d.x+m.x)/2,ie=(d.y+m.y)/2;do M.y>ie!=M.next.y>ie&&M.next.y!==M.y&&F<(M.next.x-M.x)*(ie-M.y)/(M.next.y-M.y)+M.x&&(z=!z),M=M.next;while(M!==d);return z}(c,a)&&(Pr(c.prev,c,a.prev)||Pr(c,a.prev,a))||Hm(c,a)&&Pr(c.prev,c,c.next)>0&&Pr(a.prev,a,a.next)>0)}function Pr(c,a,d){return(a.y-c.y)*(d.x-a.x)-(a.x-c.x)*(d.y-a.y)}function Hm(c,a){return c.x===a.x&&c.y===a.y}function k_(c,a,d,m){var M=Wm(Pr(c,a,d)),z=Wm(Pr(c,a,m)),F=Wm(Pr(d,m,c)),ie=Wm(Pr(d,m,a));return M!==z&&F!==ie||!(M!==0||!qm(c,d,a))||!(z!==0||!qm(c,m,a))||!(F!==0||!qm(d,c,m))||!(ie!==0||!qm(d,a,m))}function qm(c,a,d){return a.x<=Math.max(c.x,d.x)&&a.x>=Math.min(c.x,d.x)&&a.y<=Math.max(c.y,d.y)&&a.y>=Math.min(c.y,d.y)}function Wm(c){return c>0?1:c<0?-1:0}function cp(c,a){return Pr(c.prev,c,c.next)<0?Pr(c,a,c.next)>=0&&Pr(c,c.prev,a)>=0:Pr(c,a,c.prev)<0||Pr(c,c.next,a)<0}function A_(c,a){var d=new Qx(c.i,c.x,c.y),m=new Qx(a.i,a.x,a.y),M=c.next,z=a.prev;return c.next=a,a.prev=c,d.next=M,M.prev=d,m.next=d,d.prev=m,z.next=m,m.prev=z,m}function M_(c,a,d,m){var M=new Qx(c,a,d);return m?(M.next=m.next,M.prev=m,m.next.prev=M,m.next=M):(M.prev=M,M.next=M),M}function up(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function Qx(c,a,d){this.i=c,this.x=a,this.y=d,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Jx(c,a,d,m){for(var M=0,z=a,F=d-m;z<d;z+=m)M+=(c[F]-c[z])*(c[z+1]+c[F+1]),F=z;return M}function jA(c,a,d,m,M){P_(c,a,d,m||c.length-1,M)}function P_(c,a,d,m,M){for(;m>d;){if(m-d>600){var z=m-d+1,F=a-d+1,ie=Math.log(z),ae=.5*Math.exp(2*ie/3),_e=.5*Math.sqrt(ie*ae*(z-ae)/z)*(F-z/2<0?-1:1);P_(c,a,Math.max(d,Math.floor(a-F*ae/z+_e)),Math.min(m,Math.floor(a+(z-F)*ae/z+_e)),M)}var Re=c[a],je=d,Ge=m;for(dp(c,d,a),M(c[m],Re)>0&&dp(c,d,m);je<Ge;){for(dp(c,je,Ge),je++,Ge--;M(c[je],Re)<0;)je++;for(;M(c[Ge],Re)>0;)Ge--}M(c[d],Re)===0?dp(c,d,Ge):dp(c,++Ge,m),Ge<=a&&(d=Ge+1),a<=Ge&&(m=Ge-1)}}function dp(c,a,d){var m=c[a];c[a]=c[d],c[d]=m}function e0(c,a){const d=c.length;if(d<=1)return[c];const m=[];let M,z;for(let F=0;F<d;F++){const ie=N(c[F]);ie!==0&&(c[F].area=Math.abs(ie),z===void 0&&(z=ie<0),z===ie<0?(M&&m.push(M),M=[c[F]]):M.push(c[F]))}if(M&&m.push(M),a>1)for(let F=0;F<m.length;F++)m[F].length<=a||(jA(m[F],a,1,m[F].length-1,FA),m[F]=m[F].slice(0,a));return m}function FA(c,a){return a.area-c.area}function t0(c,a,d){const m=d.patternDependencies;let M=!1;for(const z of a){const F=z.paint.get(`${c}-pattern`);F.isConstant()||(M=!0);const ie=F.constantOr(null);ie&&(M=!0,m[ie.to]=!0,m[ie.from]=!0)}return M}function i0(c,a,d,m,M){const z=M.patternDependencies;for(const F of a){const ie=F.paint.get(`${c}-pattern`).value;if(ie.kind!=="constant"){let ae=ie.evaluate({zoom:m-1},d,{},M.availableImages),_e=ie.evaluate({zoom:m},d,{},M.availableImages),Re=ie.evaluate({zoom:m+1},d,{},M.availableImages);ae=ae&&ae.name?ae.name:ae,_e=_e&&_e.name?_e.name:_e,Re=Re&&Re.name?Re.name:Re,z[ae]=!0,z[_e]=!0,z[Re]=!0,d.patterns[F.id]={min:ae,mid:_e,max:Re}}}return d}Vm.exports=Gm,Vm.exports.default=Gm,Gm.deviation=function(c,a,d,m){var M=a&&a.length,z=Math.abs(Jx(c,0,M?a[0]*d:c.length,d));if(M)for(var F=0,ie=a.length;F<ie;F++)z-=Math.abs(Jx(c,a[F]*d,F<ie-1?a[F+1]*d:c.length,d));var ae=0;for(F=0;F<m.length;F+=3){var _e=m[F]*d,Re=m[F+1]*d,je=m[F+2]*d;ae+=Math.abs((c[_e]-c[je])*(c[Re+1]-c[_e+1])-(c[_e]-c[Re])*(c[je+1]-c[_e+1]))}return z===0&&ae===0?0:Math.abs((ae-z)/z)},Gm.flatten=function(c){for(var a=c[0][0].length,d={vertices:[],holes:[],dimensions:a},m=0,M=0;M<c.length;M++){for(var z=0;z<c[M].length;z++)for(var F=0;F<a;F++)d.vertices.push(c[M][z][F]);M>0&&d.holes.push(m+=c[M-1].length)}return d};class n0{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new $n,this.indexArray=new os,this.indexArray2=new Ra,this.programConfigurations=new iu(a.layers,a.zoom),this.segments=new An,this.segments2=new An,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(a,d,m){this.hasPattern=t0("fill",this.layers,d);const M=this.layers[0].layout.get("fill-sort-key"),z=!M.isConstant(),F=[];for(const{feature:ie,id:ae,index:_e,sourceLayerIndex:Re}of a){const je=this.layers[0]._featureFilter.needGeometry,Ge=ru(ie,je);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),Ge,m))continue;const Ye=z?M.evaluate(Ge,{},m,d.availableImages):void 0,Ze={id:ae,properties:ie.properties,type:ie.type,sourceLayerIndex:Re,index:_e,geometry:je?Ge.geometry:nu(ie),patterns:{},sortKey:Ye};F.push(Ze)}z&&F.sort((ie,ae)=>ie.sortKey-ae.sortKey);for(const ie of F){const{geometry:ae,index:_e,sourceLayerIndex:Re}=ie;if(this.hasPattern){const je=i0("fill",this.layers,ie,this.zoom,d);this.patternFeatures.push(je)}else this.addFeature(ie,ae,_e,m,{});d.featureIndex.insert(a[_e].feature,ae,_e,Re,this.index)}}update(a,d,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,d,this.stateDependentLayers,m)}addFeatures(a,d,m){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,d,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,AA),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,d,m,M,z){for(const F of e0(d,500)){let ie=0;for(const Ye of F)ie+=Ye.length;const ae=this.segments.prepareSegment(ie,this.layoutVertexArray,this.indexArray),_e=ae.vertexLength,Re=[],je=[];for(const Ye of F){if(Ye.length===0)continue;Ye!==F[0]&&je.push(Re.length/2);const Ze=this.segments2.prepareSegment(Ye.length,this.layoutVertexArray,this.indexArray2),ut=Ze.vertexLength;this.layoutVertexArray.emplaceBack(Ye[0].x,Ye[0].y),this.indexArray2.emplaceBack(ut+Ye.length-1,ut),Re.push(Ye[0].x),Re.push(Ye[0].y);for(let lt=1;lt<Ye.length;lt++)this.layoutVertexArray.emplaceBack(Ye[lt].x,Ye[lt].y),this.indexArray2.emplaceBack(ut+lt-1,ut+lt),Re.push(Ye[lt].x),Re.push(Ye[lt].y);Ze.vertexLength+=Ye.length,Ze.primitiveLength+=Ye.length}const Ge=Vm.exports(Re,je);for(let Ye=0;Ye<Ge.length;Ye+=3)this.indexArray.emplaceBack(_e+Ge[Ye],_e+Ge[Ye+1],_e+Ge[Ye+2]);ae.vertexLength+=ie,ae.primitiveLength+=Ge.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,z,M)}}fi("FillBucket",n0,{omit:["layers","patternFeatures"]});const BA=new Vr({"fill-sort-key":new Di(Pe.layout_fill["fill-sort-key"])});var $A={paint:new Vr({"fill-antialias":new Ei(Pe.paint_fill["fill-antialias"]),"fill-opacity":new Di(Pe.paint_fill["fill-opacity"]),"fill-color":new Di(Pe.paint_fill["fill-color"]),"fill-outline-color":new Di(Pe.paint_fill["fill-outline-color"]),"fill-translate":new Ei(Pe.paint_fill["fill-translate"]),"fill-translate-anchor":new Ei(Pe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Kc(Pe.paint_fill["fill-pattern"])}),layout:BA};const UA=Or([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),VA=Or([{name:"a_centroid",components:2,type:"Int16"}],4),{members:GA}=UA;var Zl={},HA=G,I_=Cd;function Cd(c,a,d,m,M){this.properties={},this.extent=d,this.type=0,this._pbf=c,this._geometry=-1,this._keys=m,this._values=M,c.readFields(qA,this,a)}function qA(c,a,d){c==1?a.id=d.readVarint():c==2?function(m,M){for(var z=m.readVarint()+m.pos;m.pos<z;){var F=M._keys[m.readVarint()],ie=M._values[m.readVarint()];M.properties[F]=ie}}(d,a):c==3?a.type=d.readVarint():c==4&&(a._geometry=d.pos)}function WA(c){for(var a,d,m=0,M=0,z=c.length,F=z-1;M<z;F=M++)m+=((d=c[F]).x-(a=c[M]).x)*(a.y+d.y);return m}Cd.types=["Unknown","Point","LineString","Polygon"],Cd.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var a,d=c.readVarint()+c.pos,m=1,M=0,z=0,F=0,ie=[];c.pos<d;){if(M<=0){var ae=c.readVarint();m=7&ae,M=ae>>3}if(M--,m===1||m===2)z+=c.readSVarint(),F+=c.readSVarint(),m===1&&(a&&ie.push(a),a=[]),a.push(new HA(z,F));else{if(m!==7)throw new Error("unknown command "+m);a&&a.push(a[0].clone())}}return a&&ie.push(a),ie},Cd.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var a=c.readVarint()+c.pos,d=1,m=0,M=0,z=0,F=1/0,ie=-1/0,ae=1/0,_e=-1/0;c.pos<a;){if(m<=0){var Re=c.readVarint();d=7&Re,m=Re>>3}if(m--,d===1||d===2)(M+=c.readSVarint())<F&&(F=M),M>ie&&(ie=M),(z+=c.readSVarint())<ae&&(ae=z),z>_e&&(_e=z);else if(d!==7)throw new Error("unknown command "+d)}return[F,ae,ie,_e]},Cd.prototype.toGeoJSON=function(c,a,d){var m,M,z=this.extent*Math.pow(2,d),F=this.extent*c,ie=this.extent*a,ae=this.loadGeometry(),_e=Cd.types[this.type];function Re(Ye){for(var Ze=0;Ze<Ye.length;Ze++){var ut=Ye[Ze];Ye[Ze]=[360*(ut.x+F)/z-180,360/Math.PI*Math.atan(Math.exp((180-360*(ut.y+ie)/z)*Math.PI/180))-90]}}switch(this.type){case 1:var je=[];for(m=0;m<ae.length;m++)je[m]=ae[m][0];Re(ae=je);break;case 2:for(m=0;m<ae.length;m++)Re(ae[m]);break;case 3:for(ae=function(Ye){var Ze=Ye.length;if(Ze<=1)return[Ye];for(var ut,lt,vt=[],Dt=0;Dt<Ze;Dt++){var xt=WA(Ye[Dt]);xt!==0&&(lt===void 0&&(lt=xt<0),lt===xt<0?(ut&&vt.push(ut),ut=[Ye[Dt]]):ut.push(Ye[Dt]))}return ut&&vt.push(ut),vt}(ae),m=0;m<ae.length;m++)for(M=0;M<ae[m].length;M++)Re(ae[m][M])}ae.length===1?ae=ae[0]:_e="Multi"+_e;var Ge={type:"Feature",geometry:{type:_e,coordinates:ae},properties:this.properties};return"id"in this&&(Ge.id=this.id),Ge};var YA=I_,D_=R_;function R_(c,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(ZA,this,a),this.length=this._features.length}function ZA(c,a,d){c===15?a.version=d.readVarint():c===1?a.name=d.readString():c===5?a.extent=d.readVarint():c===2?a._features.push(d.pos):c===3?a._keys.push(d.readString()):c===4&&a._values.push(function(m){for(var M=null,z=m.readVarint()+m.pos;m.pos<z;){var F=m.readVarint()>>3;M=F===1?m.readString():F===2?m.readFloat():F===3?m.readDouble():F===4?m.readVarint64():F===5?m.readVarint():F===6?m.readSVarint():F===7?m.readBoolean():null}return M}(d))}R_.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var a=this._pbf.readVarint()+this._pbf.pos;return new YA(this._pbf,a,this.extent,this._keys,this._values)};var XA=D_;function KA(c,a,d){if(c===3){var m=new XA(d,d.readVarint()+d.pos);m.length&&(a[m.name]=m)}}Zl.VectorTile=function(c,a){this.layers=c.readFields(KA,{},a)},Zl.VectorTileFeature=I_,Zl.VectorTileLayer=D_;const QA=Zl.VectorTileFeature.types,r0=Math.pow(2,13);function hp(c,a,d,m,M,z,F,ie){c.emplaceBack(a,d,2*Math.floor(m*r0)+F,M*r0*2,z*r0*2,Math.round(ie))}class s0{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Un,this.centroidVertexArray=new un,this.indexArray=new os,this.programConfigurations=new iu(a.layers,a.zoom),this.segments=new An,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(a,d,m){this.features=[],this.hasPattern=t0("fill-extrusion",this.layers,d);for(const{feature:M,id:z,index:F,sourceLayerIndex:ie}of a){const ae=this.layers[0]._featureFilter.needGeometry,_e=ru(M,ae);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),_e,m))continue;const Re={id:z,sourceLayerIndex:ie,index:F,geometry:ae?_e.geometry:nu(M),properties:M.properties,type:M.type,patterns:{}};this.hasPattern?this.features.push(i0("fill-extrusion",this.layers,Re,this.zoom,d)):this.addFeature(Re,Re.geometry,F,m,{}),d.featureIndex.insert(M,Re.geometry,F,ie,this.index,!0)}}addFeatures(a,d,m){for(const M of this.features){const{geometry:z}=M;this.addFeature(M,z,M.index,d,m)}}update(a,d,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,d,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,GA),this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,VA.members,!0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(a,d,m,M,z){const F={x:0,y:0,vertexCount:0};for(const ie of e0(d,500)){let ae=0;for(const Ze of ie)ae+=Ze.length;let _e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ze of ie){if(Ze.length===0||eM(Ze))continue;let ut=0;for(let lt=0;lt<Ze.length;lt++){const vt=Ze[lt];if(lt>=1){const Dt=Ze[lt-1];if(!JA(vt,Dt)){_e.vertexLength+4>An.MAX_VERTEX_ARRAY_LENGTH&&(_e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const xt=vt.sub(Dt)._perp()._unit(),Pt=Dt.dist(vt);ut+Pt>32768&&(ut=0),hp(this.layoutVertexArray,vt.x,vt.y,xt.x,xt.y,0,0,ut),hp(this.layoutVertexArray,vt.x,vt.y,xt.x,xt.y,0,1,ut),F.x+=2*vt.x,F.y+=2*vt.y,F.vertexCount+=2,ut+=Pt,hp(this.layoutVertexArray,Dt.x,Dt.y,xt.x,xt.y,0,0,ut),hp(this.layoutVertexArray,Dt.x,Dt.y,xt.x,xt.y,0,1,ut),F.x+=2*Dt.x,F.y+=2*Dt.y,F.vertexCount+=2;const $t=_e.vertexLength;this.indexArray.emplaceBack($t,$t+2,$t+1),this.indexArray.emplaceBack($t+1,$t+2,$t+3),_e.vertexLength+=4,_e.primitiveLength+=2}}}}if(_e.vertexLength+ae>An.MAX_VERTEX_ARRAY_LENGTH&&(_e=this.segments.prepareSegment(ae,this.layoutVertexArray,this.indexArray)),QA[a.type]!=="Polygon")continue;const Re=[],je=[],Ge=_e.vertexLength;for(const Ze of ie)if(Ze.length!==0){Ze!==ie[0]&&je.push(Re.length/2);for(let ut=0;ut<Ze.length;ut++){const lt=Ze[ut];hp(this.layoutVertexArray,lt.x,lt.y,0,0,1,1,0),F.x+=lt.x,F.y+=lt.y,F.vertexCount+=1,Re.push(lt.x),Re.push(lt.y)}}const Ye=Vm.exports(Re,je);for(let Ze=0;Ze<Ye.length;Ze+=3)this.indexArray.emplaceBack(Ge+Ye[Ze],Ge+Ye[Ze+2],Ge+Ye[Ze+1]);_e.primitiveLength+=Ye.length/3,_e.vertexLength+=ae}for(let ie=0;ie<F.vertexCount;ie++)this.centroidVertexArray.emplaceBack(Math.floor(F.x/F.vertexCount),Math.floor(F.y/F.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,z,M)}}function JA(c,a){return c.x===a.x&&(c.x<0||c.x>Gr)||c.y===a.y&&(c.y<0||c.y>Gr)}function eM(c){return c.every(a=>a.x<0)||c.every(a=>a.x>Gr)||c.every(a=>a.y<0)||c.every(a=>a.y>Gr)}fi("FillExtrusionBucket",s0,{omit:["layers","features"]});var tM={paint:new Vr({"fill-extrusion-opacity":new Ei(Pe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Di(Pe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ei(Pe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ei(Pe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Kc(Pe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Di(Pe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Di(Pe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ei(Pe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function pp(c,a){return c.x*a.x+c.y*a.y}function L_(c,a){if(c.length===1){let d=0;const m=a[d++];let M;for(;!M||m.equals(M);)if(M=a[d++],!M)return 1/0;for(;d<a.length;d++){const z=a[d],F=c[0],ie=M.sub(m),ae=z.sub(m),_e=F.sub(m),Re=pp(ie,ie),je=pp(ie,ae),Ge=pp(ae,ae),Ye=pp(_e,ie),Ze=pp(_e,ae),ut=Re*Ge-je*je,lt=(Ge*Ye-je*Ze)/ut,vt=(Re*Ze-je*Ye)/ut,Dt=m.z*(1-lt-vt)+M.z*lt+z.z*vt;if(isFinite(Dt))return Dt}return 1/0}{let d=1/0;for(const m of a)d=Math.min(d,m.z);return d}}const iM=Or([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:nM}=iM,rM=Or([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:sM}=rM,aM=Zl.VectorTileFeature.types,oM=Math.cos(Math.PI/180*37.5),z_=Math.pow(2,14)/.5;class a0{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(d=>{this.gradients[d.id]={}}),this.layoutVertexArray=new wn,this.layoutVertexArray2=new Cn,this.indexArray=new os,this.programConfigurations=new iu(a.layers,a.zoom),this.segments=new An,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(a,d,m){this.hasPattern=t0("line",this.layers,d);const M=this.layers[0].layout.get("line-sort-key"),z=!M.isConstant(),F=[];for(const{feature:ie,id:ae,index:_e,sourceLayerIndex:Re}of a){const je=this.layers[0]._featureFilter.needGeometry,Ge=ru(ie,je);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),Ge,m))continue;const Ye=z?M.evaluate(Ge,{},m):void 0,Ze={id:ae,properties:ie.properties,type:ie.type,sourceLayerIndex:Re,index:_e,geometry:je?Ge.geometry:nu(ie),patterns:{},sortKey:Ye};F.push(Ze)}z&&F.sort((ie,ae)=>ie.sortKey-ae.sortKey);for(const ie of F){const{geometry:ae,index:_e,sourceLayerIndex:Re}=ie;if(this.hasPattern){const je=i0("line",this.layers,ie,this.zoom,d);this.patternFeatures.push(je)}else this.addFeature(ie,ae,_e,m,{});d.featureIndex.insert(a[_e].feature,ae,_e,Re,this.index)}}update(a,d,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,d,this.stateDependentLayers,m)}addFeatures(a,d,m){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,d,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,sM)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,nM),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,d,m,M,z){const F=this.layers[0].layout,ie=F.get("line-join").evaluate(a,{}),ae=F.get("line-cap"),_e=F.get("line-miter-limit"),Re=F.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const je of d)this.addLine(je,a,ie,ae,_e,Re);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,z,M)}addLine(a,d,m,M,z,F){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let vt=0;vt<a.length-1;vt++)this.totalDistance+=a[vt].dist(a[vt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const ie=aM[d.type]==="Polygon";let ae=a.length;for(;ae>=2&&a[ae-1].equals(a[ae-2]);)ae--;let _e=0;for(;_e<ae-1&&a[_e].equals(a[_e+1]);)_e++;if(ae<(ie?3:2))return;m==="bevel"&&(z=1.05);const Re=this.overscaling<=16?122880/(512*this.overscaling):0,je=this.segments.prepareSegment(10*ae,this.layoutVertexArray,this.indexArray);let Ge,Ye,Ze,ut,lt;this.e1=this.e2=-1,ie&&(Ge=a[ae-2],lt=a[_e].sub(Ge)._unit()._perp());for(let vt=_e;vt<ae;vt++){if(Ze=vt===ae-1?ie?a[_e+1]:void 0:a[vt+1],Ze&&a[vt].equals(Ze))continue;lt&&(ut=lt),Ge&&(Ye=Ge),Ge=a[vt],lt=Ze?Ze.sub(Ge)._unit()._perp():ut,ut=ut||lt;let Dt=ut.add(lt);Dt.x===0&&Dt.y===0||Dt._unit();const xt=ut.x*lt.x+ut.y*lt.y,Pt=Dt.x*lt.x+Dt.y*lt.y,$t=Pt!==0?1/Pt:1/0,Bt=2*Math.sqrt(2-2*Pt),xi=Pt<oM&&Ye&&Ze,Ci=ut.x*lt.y-ut.y*lt.x>0;if(xi&&vt>_e){const Zt=Ge.dist(Ye);if(Zt>2*Re){const ni=Ge.sub(Ge.sub(Ye)._mult(Re/Zt)._round());this.updateDistance(Ye,ni),this.addCurrentVertex(ni,ut,0,0,je),Ye=ni}}const ii=Ye&&Ze;let Kt=ii?m:ie?"butt":M;if(ii&&Kt==="round"&&($t<F?Kt="miter":$t<=2&&(Kt="fakeround")),Kt==="miter"&&$t>z&&(Kt="bevel"),Kt==="bevel"&&($t>2&&(Kt="flipbevel"),$t<z&&(Kt="miter")),Ye&&this.updateDistance(Ye,Ge),Kt==="miter")Dt._mult($t),this.addCurrentVertex(Ge,Dt,0,0,je);else if(Kt==="flipbevel"){if($t>100)Dt=lt.mult(-1);else{const Zt=$t*ut.add(lt).mag()/ut.sub(lt).mag();Dt._perp()._mult(Zt*(Ci?-1:1))}this.addCurrentVertex(Ge,Dt,0,0,je),this.addCurrentVertex(Ge,Dt.mult(-1),0,0,je)}else if(Kt==="bevel"||Kt==="fakeround"){const Zt=-Math.sqrt($t*$t-1),ni=Ci?Zt:0,ei=Ci?0:Zt;if(Ye&&this.addCurrentVertex(Ge,ut,ni,ei,je),Kt==="fakeround"){const Vt=Math.round(180*Bt/Math.PI/20);for(let Mi=1;Mi<Vt;Mi++){let ki=Mi/Vt;if(ki!==.5){const sr=ki-.5;ki+=ki*sr*(ki-1)*((1.0904+xt*(xt*(3.55645-1.43519*xt)-3.2452))*sr*sr+(.848013+xt*(.215638*xt-1.06021)))}const dn=lt.sub(ut)._mult(ki)._add(ut)._unit()._mult(Ci?-1:1);this.addHalfVertex(Ge,dn.x,dn.y,!1,Ci,0,je)}}Ze&&this.addCurrentVertex(Ge,lt,-ni,-ei,je)}else if(Kt==="butt")this.addCurrentVertex(Ge,Dt,0,0,je);else if(Kt==="square"){const Zt=Ye?1:-1;this.addCurrentVertex(Ge,Dt,Zt,Zt,je)}else Kt==="round"&&(Ye&&(this.addCurrentVertex(Ge,ut,0,0,je),this.addCurrentVertex(Ge,ut,1,1,je,!0)),Ze&&(this.addCurrentVertex(Ge,lt,-1,-1,je,!0),this.addCurrentVertex(Ge,lt,0,0,je)));if(xi&&vt<ae-1){const Zt=Ge.dist(Ze);if(Zt>2*Re){const ni=Ge.add(Ze.sub(Ge)._mult(Re/Zt)._round());this.updateDistance(Ge,ni),this.addCurrentVertex(ni,lt,0,0,je),Ge=ni}}}}addCurrentVertex(a,d,m,M,z,F=!1){const ie=d.y*M-d.x,ae=-d.y-d.x*M;this.addHalfVertex(a,d.x+d.y*m,d.y-d.x*m,F,!1,m,z),this.addHalfVertex(a,ie,ae,F,!0,-M,z),this.distance>z_/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(a,d,m,M,z,F))}addHalfVertex({x:a,y:d},m,M,z,F,ie,ae){const _e=.5*(this.lineClips?this.scaledDistance*(z_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a<<1)+(z?1:0),(d<<1)+(F?1:0),Math.round(63*m)+128,Math.round(63*M)+128,1+(ie===0?0:ie<0?-1:1)|(63&_e)<<2,_e>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Re=ae.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Re),ae.primitiveLength++),F?this.e2=Re:this.e1=Re}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(a,d){this.distance+=a.dist(d),this.updateScaledDistance()}}fi("LineBucket",a0,{omit:["layers","patternFeatures"]});const lM=new Vr({"line-cap":new Ei(Pe.layout_line["line-cap"]),"line-join":new Di(Pe.layout_line["line-join"]),"line-miter-limit":new Ei(Pe.layout_line["line-miter-limit"]),"line-round-limit":new Ei(Pe.layout_line["line-round-limit"]),"line-sort-key":new Di(Pe.layout_line["line-sort-key"])});var N_={paint:new Vr({"line-opacity":new Di(Pe.paint_line["line-opacity"]),"line-color":new Di(Pe.paint_line["line-color"]),"line-translate":new Ei(Pe.paint_line["line-translate"]),"line-translate-anchor":new Ei(Pe.paint_line["line-translate-anchor"]),"line-width":new Di(Pe.paint_line["line-width"]),"line-gap-width":new Di(Pe.paint_line["line-gap-width"]),"line-offset":new Di(Pe.paint_line["line-offset"]),"line-blur":new Di(Pe.paint_line["line-blur"]),"line-dasharray":new Qc(Pe.paint_line["line-dasharray"]),"line-pattern":new Kc(Pe.paint_line["line-pattern"]),"line-gradient":new ip(Pe.paint_line["line-gradient"])}),layout:lM};const O_=new class extends Di{possiblyEvaluate(c,a){return a=new lr(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(c,a)}evaluate(c,a,d,m){return a=v({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(c,a,d,m)}}(N_.paint.properties["line-width"].specification);function j_(c,a){return a>0?a+2*c:c}O_.useIntegerZoom=!0;const cM=Or([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),uM=Or([{name:"a_projected_pos",components:3,type:"Float32"}],4);Or([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const dM=Or([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Or([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const F_=Or([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),hM=Or([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function pM(c,a,d){return c.sections.forEach(m=>{m.text=function(M,z,F){const ie=z.layout.get("text-transform").evaluate(F,{});return ie==="uppercase"?M=M.toLocaleUpperCase():ie==="lowercase"&&(M=M.toLocaleLowerCase()),va.applyArabicShaping&&(M=va.applyArabicShaping(M)),M}(m.text,a,d)}),c}Or([{name:"triangle",components:3,type:"Uint16"}]),Or([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Or([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Or([{type:"Float32",name:"offsetX"}]),Or([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const fp={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var ls=24,o0=qn,B_=function(c,a,d,m,M){var z,F,ie=8*M-m-1,ae=(1<<ie)-1,_e=ae>>1,Re=-7,je=M-1,Ge=-1,Ye=c[a+je];for(je+=Ge,z=Ye&(1<<-Re)-1,Ye>>=-Re,Re+=ie;Re>0;z=256*z+c[a+je],je+=Ge,Re-=8);for(F=z&(1<<-Re)-1,z>>=-Re,Re+=m;Re>0;F=256*F+c[a+je],je+=Ge,Re-=8);if(z===0)z=1-_e;else{if(z===ae)return F?NaN:1/0*(Ye?-1:1);F+=Math.pow(2,m),z-=_e}return(Ye?-1:1)*F*Math.pow(2,z-m)},$_=function(c,a,d,m,M,z){var F,ie,ae,_e=8*z-M-1,Re=(1<<_e)-1,je=Re>>1,Ge=M===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ye=0,Ze=1,ut=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(ie=isNaN(a)?1:0,F=Re):(F=Math.floor(Math.log(a)/Math.LN2),a*(ae=Math.pow(2,-F))<1&&(F--,ae*=2),(a+=F+je>=1?Ge/ae:Ge*Math.pow(2,1-je))*ae>=2&&(F++,ae/=2),F+je>=Re?(ie=0,F=Re):F+je>=1?(ie=(a*ae-1)*Math.pow(2,M),F+=je):(ie=a*Math.pow(2,je-1)*Math.pow(2,M),F=0));M>=8;c[d+Ye]=255&ie,Ye+=Ze,ie/=256,M-=8);for(F=F<<M|ie,_e+=M;_e>0;c[d+Ye]=255&F,Ye+=Ze,F/=256,_e-=8);c[d+Ye-Ze]|=128*ut};function qn(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}qn.Varint=0,qn.Fixed64=1,qn.Bytes=2,qn.Fixed32=5;var Xl,l0=4294967296,U_=1/l0,V_=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function pl(c){return c.type===qn.Bytes?c.readVarint()+c.pos:c.pos+1}function Sd(c,a,d){return d?4294967296*a+(c>>>0):4294967296*(a>>>0)+(c>>>0)}function G_(c,a,d){var m=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));d.realloc(m);for(var M=d.pos-1;M>=c;M--)d.buf[M+m]=d.buf[M]}function fM(c,a){for(var d=0;d<c.length;d++)a.writeVarint(c[d])}function mM(c,a){for(var d=0;d<c.length;d++)a.writeSVarint(c[d])}function gM(c,a){for(var d=0;d<c.length;d++)a.writeFloat(c[d])}function yM(c,a){for(var d=0;d<c.length;d++)a.writeDouble(c[d])}function xM(c,a){for(var d=0;d<c.length;d++)a.writeBoolean(c[d])}function bM(c,a){for(var d=0;d<c.length;d++)a.writeFixed32(c[d])}function vM(c,a){for(var d=0;d<c.length;d++)a.writeSFixed32(c[d])}function _M(c,a){for(var d=0;d<c.length;d++)a.writeFixed64(c[d])}function wM(c,a){for(var d=0;d<c.length;d++)a.writeSFixed64(c[d])}function Ym(c,a){return(c[a]|c[a+1]<<8|c[a+2]<<16)+16777216*c[a+3]}function Ed(c,a,d){c[d]=a,c[d+1]=a>>>8,c[d+2]=a>>>16,c[d+3]=a>>>24}function H_(c,a){return(c[a]|c[a+1]<<8|c[a+2]<<16)+(c[a+3]<<24)}function TM(c,a,d){c===1&&d.readMessage(CM,a)}function CM(c,a,d){if(c===3){const{id:m,bitmap:M,width:z,height:F,left:ie,top:ae,advance:_e}=d.readMessage(SM,{});a.push({id:m,bitmap:new op({width:z+6,height:F+6},M),metrics:{width:z,height:F,left:ie,top:ae,advance:_e}})}}function SM(c,a,d){c===1?a.id=d.readVarint():c===2?a.bitmap=d.readBytes():c===3?a.width=d.readVarint():c===4?a.height=d.readVarint():c===5?a.left=d.readSVarint():c===6?a.top=d.readSVarint():c===7&&(a.advance=d.readVarint())}function q_(c){let a=0,d=0;for(const F of c)a+=F.w*F.h,d=Math.max(d,F.w);c.sort((F,ie)=>ie.h-F.h);const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),d),h:1/0}];let M=0,z=0;for(const F of c)for(let ie=m.length-1;ie>=0;ie--){const ae=m[ie];if(!(F.w>ae.w||F.h>ae.h)){if(F.x=ae.x,F.y=ae.y,z=Math.max(z,F.y+F.h),M=Math.max(M,F.x+F.w),F.w===ae.w&&F.h===ae.h){const _e=m.pop();ie<m.length&&(m[ie]=_e)}else F.h===ae.h?(ae.x+=F.w,ae.w-=F.w):F.w===ae.w?(ae.y+=F.h,ae.h-=F.h):(m.push({x:ae.x+F.w,y:ae.y,w:ae.w-F.w,h:F.h}),ae.y+=F.h,ae.h-=F.h);break}}return{w:M,h:z,fill:a/(M*z)||0}}qn.prototype={destroy:function(){this.buf=null},readFields:function(c,a,d){for(d=d||this.length;this.pos<d;){var m=this.readVarint(),M=m>>3,z=this.pos;this.type=7&m,c(M,a,this),this.pos===z&&this.skip(m)}return a},readMessage:function(c,a){return this.readFields(c,a,this.readVarint()+this.pos)},readFixed32:function(){var c=Ym(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=H_(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=Ym(this.buf,this.pos)+Ym(this.buf,this.pos+4)*l0;return this.pos+=8,c},readSFixed64:function(){var c=Ym(this.buf,this.pos)+H_(this.buf,this.pos+4)*l0;return this.pos+=8,c},readFloat:function(){var c=B_(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=B_(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var a,d,m=this.buf;return a=127&(d=m[this.pos++]),d<128?a:(a|=(127&(d=m[this.pos++]))<<7,d<128?a:(a|=(127&(d=m[this.pos++]))<<14,d<128?a:(a|=(127&(d=m[this.pos++]))<<21,d<128?a:function(M,z,F){var ie,ae,_e=F.buf;if(ie=(112&(ae=_e[F.pos++]))>>4,ae<128||(ie|=(127&(ae=_e[F.pos++]))<<3,ae<128)||(ie|=(127&(ae=_e[F.pos++]))<<10,ae<128)||(ie|=(127&(ae=_e[F.pos++]))<<17,ae<128)||(ie|=(127&(ae=_e[F.pos++]))<<24,ae<128)||(ie|=(1&(ae=_e[F.pos++]))<<31,ae<128))return Sd(M,ie,z);throw new Error("Expected varint not more than 10 bytes")}(a|=(15&(d=m[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,a=this.pos;return this.pos=c,c-a>=12&&V_?function(d,m,M){return V_.decode(d.subarray(m,M))}(this.buf,a,c):function(d,m,M){for(var z="",F=m;F<M;){var ie,ae,_e,Re=d[F],je=null,Ge=Re>239?4:Re>223?3:Re>191?2:1;if(F+Ge>M)break;Ge===1?Re<128&&(je=Re):Ge===2?(192&(ie=d[F+1]))==128&&(je=(31&Re)<<6|63&ie)<=127&&(je=null):Ge===3?(ae=d[F+2],(192&(ie=d[F+1]))==128&&(192&ae)==128&&((je=(15&Re)<<12|(63&ie)<<6|63&ae)<=2047||je>=55296&&je<=57343)&&(je=null)):Ge===4&&(ae=d[F+2],_e=d[F+3],(192&(ie=d[F+1]))==128&&(192&ae)==128&&(192&_e)==128&&((je=(15&Re)<<18|(63&ie)<<12|(63&ae)<<6|63&_e)<=65535||je>=1114112)&&(je=null)),je===null?(je=65533,Ge=1):je>65535&&(je-=65536,z+=String.fromCharCode(je>>>10&1023|55296),je=56320|1023&je),z+=String.fromCharCode(je),F+=Ge}return z}(this.buf,a,c)},readBytes:function(){var c=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,c);return this.pos=c,a},readPackedVarint:function(c,a){if(this.type!==qn.Bytes)return c.push(this.readVarint(a));var d=pl(this);for(c=c||[];this.pos<d;)c.push(this.readVarint(a));return c},readPackedSVarint:function(c){if(this.type!==qn.Bytes)return c.push(this.readSVarint());var a=pl(this);for(c=c||[];this.pos<a;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==qn.Bytes)return c.push(this.readBoolean());var a=pl(this);for(c=c||[];this.pos<a;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==qn.Bytes)return c.push(this.readFloat());var a=pl(this);for(c=c||[];this.pos<a;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==qn.Bytes)return c.push(this.readDouble());var a=pl(this);for(c=c||[];this.pos<a;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==qn.Bytes)return c.push(this.readFixed32());var a=pl(this);for(c=c||[];this.pos<a;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==qn.Bytes)return c.push(this.readSFixed32());var a=pl(this);for(c=c||[];this.pos<a;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==qn.Bytes)return c.push(this.readFixed64());var a=pl(this);for(c=c||[];this.pos<a;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==qn.Bytes)return c.push(this.readSFixed64());var a=pl(this);for(c=c||[];this.pos<a;)c.push(this.readSFixed64());return c},skip:function(c){var a=7&c;if(a===qn.Varint)for(;this.buf[this.pos++]>127;);else if(a===qn.Bytes)this.pos=this.readVarint()+this.pos;else if(a===qn.Fixed32)this.pos+=4;else{if(a!==qn.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(c,a){this.writeVarint(c<<3|a)},realloc:function(c){for(var a=this.length||16;a<this.pos+c;)a*=2;if(a!==this.length){var d=new Uint8Array(a);d.set(this.buf),this.buf=d,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),Ed(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),Ed(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),Ed(this.buf,-1&c,this.pos),Ed(this.buf,Math.floor(c*U_),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),Ed(this.buf,-1&c,this.pos),Ed(this.buf,Math.floor(c*U_),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(a,d){var m,M;if(a>=0?(m=a%4294967296|0,M=a/4294967296|0):(M=~(-a/4294967296),4294967295^(m=~(-a%4294967296))?m=m+1|0:(m=0,M=M+1|0)),a>=18446744073709552e3||a<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),function(z,F,ie){ie.buf[ie.pos++]=127&z|128,z>>>=7,ie.buf[ie.pos++]=127&z|128,z>>>=7,ie.buf[ie.pos++]=127&z|128,z>>>=7,ie.buf[ie.pos++]=127&z|128,ie.buf[ie.pos]=127&(z>>>=7)}(m,0,d),function(z,F){var ie=(7&z)<<4;F.buf[F.pos++]|=ie|((z>>>=3)?128:0),z&&(F.buf[F.pos++]=127&z|((z>>>=7)?128:0),z&&(F.buf[F.pos++]=127&z|((z>>>=7)?128:0),z&&(F.buf[F.pos++]=127&z|((z>>>=7)?128:0),z&&(F.buf[F.pos++]=127&z|((z>>>=7)?128:0),z&&(F.buf[F.pos++]=127&z)))))}(M,d)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var a=this.pos;this.pos=function(m,M,z){for(var F,ie,ae=0;ae<M.length;ae++){if((F=M.charCodeAt(ae))>55295&&F<57344){if(!ie){F>56319||ae+1===M.length?(m[z++]=239,m[z++]=191,m[z++]=189):ie=F;continue}if(F<56320){m[z++]=239,m[z++]=191,m[z++]=189,ie=F;continue}F=ie-55296<<10|F-56320|65536,ie=null}else ie&&(m[z++]=239,m[z++]=191,m[z++]=189,ie=null);F<128?m[z++]=F:(F<2048?m[z++]=F>>6|192:(F<65536?m[z++]=F>>12|224:(m[z++]=F>>18|240,m[z++]=F>>12&63|128),m[z++]=F>>6&63|128),m[z++]=63&F|128)}return z}(this.buf,c,this.pos);var d=this.pos-a;d>=128&&G_(a,d,this),this.pos=a-1,this.writeVarint(d),this.pos+=d},writeFloat:function(c){this.realloc(4),$_(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),$_(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var a=c.length;this.writeVarint(a),this.realloc(a);for(var d=0;d<a;d++)this.buf[this.pos++]=c[d]},writeRawMessage:function(c,a){this.pos++;var d=this.pos;c(a,this);var m=this.pos-d;m>=128&&G_(d,m,this),this.pos=d-1,this.writeVarint(m),this.pos+=m},writeMessage:function(c,a,d){this.writeTag(c,qn.Bytes),this.writeRawMessage(a,d)},writePackedVarint:function(c,a){a.length&&this.writeMessage(c,fM,a)},writePackedSVarint:function(c,a){a.length&&this.writeMessage(c,mM,a)},writePackedBoolean:function(c,a){a.length&&this.writeMessage(c,xM,a)},writePackedFloat:function(c,a){a.length&&this.writeMessage(c,gM,a)},writePackedDouble:function(c,a){a.length&&this.writeMessage(c,yM,a)},writePackedFixed32:function(c,a){a.length&&this.writeMessage(c,bM,a)},writePackedSFixed32:function(c,a){a.length&&this.writeMessage(c,vM,a)},writePackedFixed64:function(c,a){a.length&&this.writeMessage(c,_M,a)},writePackedSFixed64:function(c,a){a.length&&this.writeMessage(c,wM,a)},writeBytesField:function(c,a){this.writeTag(c,qn.Bytes),this.writeBytes(a)},writeFixed32Field:function(c,a){this.writeTag(c,qn.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(c,a){this.writeTag(c,qn.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(c,a){this.writeTag(c,qn.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(c,a){this.writeTag(c,qn.Fixed64),this.writeSFixed64(a)},writeVarintField:function(c,a){this.writeTag(c,qn.Varint),this.writeVarint(a)},writeSVarintField:function(c,a){this.writeTag(c,qn.Varint),this.writeSVarint(a)},writeStringField:function(c,a){this.writeTag(c,qn.Bytes),this.writeString(a)},writeFloatField:function(c,a){this.writeTag(c,qn.Fixed32),this.writeFloat(a)},writeDoubleField:function(c,a){this.writeTag(c,qn.Fixed64),this.writeDouble(a)},writeBooleanField:function(c,a){this.writeVarintField(c,!!a)}};class c0{constructor(a,{pixelRatio:d,version:m,stretchX:M,stretchY:z,content:F}){this.paddedRect=a,this.pixelRatio=d,this.stretchX=M,this.stretchY=z,this.content=F,this.version=m}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class W_{constructor(a,d){const m={},M={};this.haveRenderCallbacks=[];const z=[];this.addImages(a,m,z),this.addImages(d,M,z);const{w:F,h:ie}=q_(z),ae=new za({width:F||1,height:ie||1});for(const _e in a){const Re=a[_e],je=m[_e].paddedRect;za.copy(Re.data,ae,{x:0,y:0},{x:je.x+1,y:je.y+1},Re.data)}for(const _e in d){const Re=d[_e],je=M[_e].paddedRect,Ge=je.x+1,Ye=je.y+1,Ze=Re.data.width,ut=Re.data.height;za.copy(Re.data,ae,{x:0,y:0},{x:Ge,y:Ye},Re.data),za.copy(Re.data,ae,{x:0,y:ut-1},{x:Ge,y:Ye-1},{width:Ze,height:1}),za.copy(Re.data,ae,{x:0,y:0},{x:Ge,y:Ye+ut},{width:Ze,height:1}),za.copy(Re.data,ae,{x:Ze-1,y:0},{x:Ge-1,y:Ye},{width:1,height:ut}),za.copy(Re.data,ae,{x:0,y:0},{x:Ge+Ze,y:Ye},{width:1,height:ut})}this.image=ae,this.iconPositions=m,this.patternPositions=M}addImages(a,d,m){for(const M in a){const z=a[M],F={x:0,y:0,w:z.data.width+2,h:z.data.height+2};m.push(F),d[M]=new c0(F,z),z.hasRenderCallback&&this.haveRenderCallbacks.push(M)}}patchUpdatedImages(a,d){a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in a.updatedImages)this.patchUpdatedImage(this.iconPositions[m],a.getImage(m),d),this.patchUpdatedImage(this.patternPositions[m],a.getImage(m),d)}patchUpdatedImage(a,d,m){if(!a||!d||a.version===d.version)return;a.version=d.version;const[M,z]=a.tl;m.update(d.data,void 0,{x:M,y:z})}}fi("ImagePosition",c0),fi("ImageAtlas",W_),r.WritingMode=void 0,(Xl=r.WritingMode||(r.WritingMode={}))[Xl.none=0]="none",Xl[Xl.horizontal=1]="horizontal",Xl[Xl.vertical=2]="vertical",Xl[Xl.horizontalOnly=3]="horizontalOnly";const Zm=-17;class mp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,d){const m=new mp;return m.scale=a||1,m.fontStack=d,m}static forImage(a){const d=new mp;return d.imageName=a,d}}class kd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,d){const m=new kd;for(let M=0;M<a.sections.length;M++){const z=a.sections[M];z.image?m.addImageSection(z):m.addTextSection(z,d)}return m}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(){this.text=function(a){let d="";for(let m=0;m<a.length;m++){const M=a.charCodeAt(m+1)||null,z=a.charCodeAt(m-1)||null;d+=M&&Rm(M)&&!fp[a[m+1]]||z&&Rm(z)&&!fp[a[m-1]]||!fp[a[m]]?a[m]:fp[a[m]]}return d}(this.text)}trim(){let a=0;for(let m=0;m<this.text.length&&Km[this.text.charCodeAt(m)];m++)a++;let d=this.text.length;for(let m=this.text.length-1;m>=0&&m>=a&&Km[this.text.charCodeAt(m)];m--)d--;this.text=this.text.substring(a,d),this.sectionIndex=this.sectionIndex.slice(a,d)}substring(a,d){const m=new kd;return m.text=this.text.substring(a,d),m.sectionIndex=this.sectionIndex.slice(a,d),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,d)=>Math.max(a,this.sections[d].scale),0)}addTextSection(a,d){this.text+=a.text,this.sections.push(mp.forText(a.scale,a.fontStack||d));const m=this.sections.length-1;for(let M=0;M<a.text.length;++M)this.sectionIndex.push(m)}addImageSection(a){const d=a.image?a.image.name:"";if(d.length===0)return void C("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(mp.forImage(d)),this.sectionIndex.push(this.sections.length-1)):C("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Xm(c,a,d,m,M,z,F,ie,ae,_e,Re,je,Ge,Ye,Ze,ut){const lt=kd.fromFeature(c,M);let vt;je===r.WritingMode.vertical&&lt.verticalizePunctuation();const{processBidirectionalText:Dt,processStyledBidirectionalText:xt}=va;if(Dt&&lt.sections.length===1){vt=[];const Bt=Dt(lt.toString(),u0(lt,_e,z,a,m,Ye,Ze));for(const xi of Bt){const Ci=new kd;Ci.text=xi,Ci.sections=lt.sections;for(let ii=0;ii<xi.length;ii++)Ci.sectionIndex.push(0);vt.push(Ci)}}else if(xt){vt=[];const Bt=xt(lt.text,lt.sectionIndex,u0(lt,_e,z,a,m,Ye,Ze));for(const xi of Bt){const Ci=new kd;Ci.text=xi[0],Ci.sectionIndex=xi[1],Ci.sections=lt.sections,vt.push(Ci)}}else vt=function(Bt,xi){const Ci=[],ii=Bt.text;let Kt=0;for(const Zt of xi)Ci.push(Bt.substring(Kt,Zt)),Kt=Zt;return Kt<ii.length&&Ci.push(Bt.substring(Kt,ii.length)),Ci}(lt,u0(lt,_e,z,a,m,Ye,Ze));const Pt=[],$t={positionedLines:Pt,text:lt.toString(),top:Re[1],bottom:Re[1],left:Re[0],right:Re[0],writingMode:je,iconsInText:!1,verticalizable:!1};return function(Bt,xi,Ci,ii,Kt,Zt,ni,ei,Vt,Mi,ki,dn){let sr=0,ur=Zm,Hr=0,Oa=0;const xs=ei==="right"?1:ei==="left"?0:.5;let Fr=0;for(const Br of Kt){Br.trim();const vs=Br.getMaxScale(),ks=(vs-1)*ls,qs={positionedGlyphs:[],lineOffset:0};Bt.positionedLines[Fr]=qs;const na=qs.positionedGlyphs;let ra=0;if(!Br.length()){ur+=Zt,++Fr;continue}for(let ts=0;ts<Br.length();ts++){const mn=Br.getSection(ts),wa=Br.getSectionIndex(ts),_s=Br.getCharCode(ts);let As=0,Qa=null,lo=null,co=null,ml=ls;const Ja=!(Vt===r.WritingMode.horizontal||!ki&&!Xc(_s)||ki&&(Km[_s]||(es=_s,ti.Arabic(es)||ti["Arabic Supplement"](es)||ti["Arabic Extended-A"](es)||ti["Arabic Presentation Forms-A"](es)||ti["Arabic Presentation Forms-B"](es))));if(mn.imageName){const ja=ii[mn.imageName];if(!ja)continue;co=mn.imageName,Bt.iconsInText=Bt.iconsInText||!0,lo=ja.paddedRect;const sa=ja.displaySize;mn.scale=mn.scale*ls/dn,Qa={width:sa[0],height:sa[1],left:1,top:-3,advance:Ja?sa[1]:sa[0]},As=ks+(ls-sa[1]*mn.scale),ml=Qa.advance;const gl=Ja?sa[0]*mn.scale-ls*vs:sa[1]*mn.scale-ls*vs;gl>0&&gl>ra&&(ra=gl)}else{const ja=Ci[mn.fontStack],sa=ja&&ja[_s];if(sa&&sa.rect)lo=sa.rect,Qa=sa.metrics;else{const gl=xi[mn.fontStack],xp=gl&&gl[_s];if(!xp)continue;Qa=xp.metrics}As=(vs-mn.scale)*ls}Ja?(Bt.verticalizable=!0,na.push({glyph:_s,imageName:co,x:sr,y:ur+As,vertical:Ja,scale:mn.scale,fontStack:mn.fontStack,sectionIndex:wa,metrics:Qa,rect:lo}),sr+=ml*mn.scale+Mi):(na.push({glyph:_s,imageName:co,x:sr,y:ur+As,vertical:Ja,scale:mn.scale,fontStack:mn.fontStack,sectionIndex:wa,metrics:Qa,rect:lo}),sr+=Qa.advance*mn.scale+Mi)}na.length!==0&&(Hr=Math.max(sr-Mi,Hr),AM(na,0,na.length-1,xs,ra)),sr=0;const mr=Zt*vs+ra;qs.lineOffset=Math.max(ra,ks),ur+=mr,Oa=Math.max(mr,Oa),++Fr}var es;const bs=ur-Zm,{horizontalAlign:Es,verticalAlign:ia}=d0(ni);(function(Br,vs,ks,qs,na,ra,mr,ts,mn){const wa=(vs-ks)*na;let _s=0;_s=ra!==mr?-ts*qs-Zm:(-qs*mn+.5)*mr;for(const As of Br)for(const Qa of As.positionedGlyphs)Qa.x+=wa,Qa.y+=_s})(Bt.positionedLines,xs,Es,ia,Hr,Oa,Zt,bs,Kt.length),Bt.top+=-ia*bs,Bt.bottom=Bt.top+bs,Bt.left+=-Es*Hr,Bt.right=Bt.left+Hr}($t,a,d,m,vt,F,ie,ae,je,_e,Ge,ut),!function(Bt){for(const xi of Bt)if(xi.positionedGlyphs.length!==0)return!1;return!0}(Pt)&&$t}const Km={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},EM={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Y_(c,a,d,m,M,z){if(a.imageName){const F=m[a.imageName];return F?F.displaySize[0]*a.scale*ls/z+M:0}{const F=d[a.fontStack],ie=F&&F[c];return ie?ie.metrics.advance*a.scale+M:0}}function Z_(c,a,d,m){const M=Math.pow(c-a,2);return m?c<a?M/2:2*M:M+Math.abs(d)*d}function kM(c,a,d){let m=0;return c===10&&(m-=1e4),d&&(m+=150),c!==40&&c!==65288||(m+=50),a!==41&&a!==65289||(m+=50),m}function X_(c,a,d,m,M,z){let F=null,ie=Z_(a,d,M,z);for(const ae of m){const _e=Z_(a-ae.x,d,M,z)+ae.badness;_e<=ie&&(F=ae,ie=_e)}return{index:c,x:a,priorBreak:F,badness:ie}}function K_(c){return c?K_(c.priorBreak).concat(c.index):[]}function u0(c,a,d,m,M,z,F){if(z!=="point")return[];if(!c)return[];const ie=[],ae=function(Ge,Ye,Ze,ut,lt,vt){let Dt=0;for(let xt=0;xt<Ge.length();xt++){const Pt=Ge.getSection(xt);Dt+=Y_(Ge.getCharCode(xt),Pt,ut,lt,Ye,vt)}return Dt/Math.max(1,Math.ceil(Dt/Ze))}(c,a,d,m,M,F),_e=c.text.indexOf("")>=0;let Re=0;for(let Ge=0;Ge<c.length();Ge++){const Ye=c.getSection(Ge),Ze=c.getCharCode(Ge);if(Km[Ze]||(Re+=Y_(Ze,Ye,m,M,a,F)),Ge<c.length()-1){const ut=!((je=Ze)<11904||!(ti["Bopomofo Extended"](je)||ti.Bopomofo(je)||ti["CJK Compatibility Forms"](je)||ti["CJK Compatibility Ideographs"](je)||ti["CJK Compatibility"](je)||ti["CJK Radicals Supplement"](je)||ti["CJK Strokes"](je)||ti["CJK Symbols and Punctuation"](je)||ti["CJK Unified Ideographs Extension A"](je)||ti["CJK Unified Ideographs"](je)||ti["Enclosed CJK Letters and Months"](je)||ti["Halfwidth and Fullwidth Forms"](je)||ti.Hiragana(je)||ti["Ideographic Description Characters"](je)||ti["Kangxi Radicals"](je)||ti["Katakana Phonetic Extensions"](je)||ti.Katakana(je)||ti["Vertical Forms"](je)||ti["Yi Radicals"](je)||ti["Yi Syllables"](je)));(EM[Ze]||ut||Ye.imageName)&&ie.push(X_(Ge+1,Re,ae,ie,kM(Ze,c.getCharCode(Ge+1),ut&&_e),!1))}}var je;return K_(X_(c.length(),Re,ae,ie,0,!0))}function d0(c){let a=.5,d=.5;switch(c){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:a,verticalAlign:d}}function AM(c,a,d,m,M){if(!m&&!M)return;const z=c[d],F=(c[d].x+z.metrics.advance*z.scale)*m;for(let ie=a;ie<=d;ie++)c[ie].x-=F,c[ie].y+=M}function MM(c,a,d){const{horizontalAlign:m,verticalAlign:M}=d0(d),z=a[0]-c.displaySize[0]*m,F=a[1]-c.displaySize[1]*M;return{image:c,top:F,bottom:F+c.displaySize[1],left:z,right:z+c.displaySize[0]}}function Q_(c,a,d,m,M,z){const F=c.image;let ie;if(F.content){const lt=F.content,vt=F.pixelRatio||1;ie=[lt[0]/vt,lt[1]/vt,F.displaySize[0]-lt[2]/vt,F.displaySize[1]-lt[3]/vt]}const ae=a.left*z,_e=a.right*z;let Re,je,Ge,Ye;d==="width"||d==="both"?(Ye=M[0]+ae-m[3],je=M[0]+_e+m[1]):(Ye=M[0]+(ae+_e-F.displaySize[0])/2,je=Ye+F.displaySize[0]);const Ze=a.top*z,ut=a.bottom*z;return d==="height"||d==="both"?(Re=M[1]+Ze-m[0],Ge=M[1]+ut+m[2]):(Re=M[1]+(Ze+ut-F.displaySize[1])/2,Ge=Re+F.displaySize[1]),{image:F,top:Re,right:je,bottom:Ge,left:Ye,collisionPadding:ie}}const fl=128;function J_(c,a){const{expression:d}=a;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new lr(c+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:M}=d;let z=0;for(;z<m.length&&m[z]<=c;)z++;z=Math.max(0,z-1);let F=z;for(;F<m.length&&m[F]<c+1;)F++;F=Math.min(m.length-1,F);const ie=m[z],ae=m[F];return d.kind==="composite"?{kind:"composite",minZoom:ie,maxZoom:ae,interpolationType:M}:{kind:"camera",minZoom:ie,maxZoom:ae,minSize:d.evaluate(new lr(ie)),maxSize:d.evaluate(new lr(ae)),interpolationType:M}}}class Kl extends G{constructor(a,d,m,M){super(a,d),this.angle=m,M!==void 0&&(this.segment=M)}clone(){return new Kl(this.x,this.y,this.angle,this.segment)}}function ew(c,a,d,m,M){if(a.segment===void 0)return!0;let z=a,F=a.segment+1,ie=0;for(;ie>-d/2;){if(F--,F<0)return!1;ie-=c[F].dist(z),z=c[F]}ie+=c[F].dist(c[F+1]),F++;const ae=[];let _e=0;for(;ie<d/2;){const Re=c[F],je=c[F+1];if(!je)return!1;let Ge=c[F-1].angleTo(Re)-Re.angleTo(je);for(Ge=Math.abs((Ge+3*Math.PI)%(2*Math.PI)-Math.PI),ae.push({distance:ie,angleDelta:Ge}),_e+=Ge;ie-ae[0].distance>m;)_e-=ae.shift().angleDelta;if(_e>M)return!1;F++,ie+=Re.dist(je)}return!0}function tw(c){let a=0;for(let d=0;d<c.length-1;d++)a+=c[d].dist(c[d+1]);return a}function iw(c,a,d){return c?.6*a*d:0}function nw(c,a){return Math.max(c?c.right-c.left:0,a?a.right-a.left:0)}function PM(c,a,d,m,M,z){const F=iw(d,M,z),ie=nw(d,m)*z;let ae=0;const _e=tw(c)/2;for(let Re=0;Re<c.length-1;Re++){const je=c[Re],Ge=c[Re+1],Ye=je.dist(Ge);if(ae+Ye>_e){const Ze=(_e-ae)/Ye,ut=pr(je.x,Ge.x,Ze),lt=pr(je.y,Ge.y,Ze),vt=new Kl(ut,lt,Ge.angleTo(je),Re);return vt._round(),!F||ew(c,vt,ie,F,a)?vt:void 0}ae+=Ye}}function IM(c,a,d,m,M,z,F,ie,ae){const _e=iw(m,z,F),Re=nw(m,M),je=Re*F,Ge=c[0].x===0||c[0].x===ae||c[0].y===0||c[0].y===ae;return a-je<a/4&&(a=je+a/4),rw(c,Ge?a/2*ie%a:(Re/2+2*z)*F*ie%a,a,_e,d,je,Ge,!1,ae)}function rw(c,a,d,m,M,z,F,ie,ae){const _e=z/2,Re=tw(c);let je=0,Ge=a-d,Ye=[];for(let Ze=0;Ze<c.length-1;Ze++){const ut=c[Ze],lt=c[Ze+1],vt=ut.dist(lt),Dt=lt.angleTo(ut);for(;Ge+d<je+vt;){Ge+=d;const xt=(Ge-je)/vt,Pt=pr(ut.x,lt.x,xt),$t=pr(ut.y,lt.y,xt);if(Pt>=0&&Pt<ae&&$t>=0&&$t<ae&&Ge-_e>=0&&Ge+_e<=Re){const Bt=new Kl(Pt,$t,Dt,Ze);Bt._round(),m&&!ew(c,Bt,z,m,M)||Ye.push(Bt)}}je+=vt}return ie||Ye.length||F||(Ye=rw(c,je/2,d,m,M,z,F,!0,ae)),Ye}function sw(c,a,d,m,M){const z=[];for(let F=0;F<c.length;F++){const ie=c[F];let ae;for(let _e=0;_e<ie.length-1;_e++){let Re=ie[_e],je=ie[_e+1];Re.x<a&&je.x<a||(Re.x<a?Re=new G(a,Re.y+(a-Re.x)/(je.x-Re.x)*(je.y-Re.y))._round():je.x<a&&(je=new G(a,Re.y+(a-Re.x)/(je.x-Re.x)*(je.y-Re.y))._round()),Re.y<d&&je.y<d||(Re.y<d?Re=new G(Re.x+(d-Re.y)/(je.y-Re.y)*(je.x-Re.x),d)._round():je.y<d&&(je=new G(Re.x+(d-Re.y)/(je.y-Re.y)*(je.x-Re.x),d)._round()),Re.x>=m&&je.x>=m||(Re.x>=m?Re=new G(m,Re.y+(m-Re.x)/(je.x-Re.x)*(je.y-Re.y))._round():je.x>=m&&(je=new G(m,Re.y+(m-Re.x)/(je.x-Re.x)*(je.y-Re.y))._round()),Re.y>=M&&je.y>=M||(Re.y>=M?Re=new G(Re.x+(M-Re.y)/(je.y-Re.y)*(je.x-Re.x),M)._round():je.y>=M&&(je=new G(Re.x+(M-Re.y)/(je.y-Re.y)*(je.x-Re.x),M)._round()),ae&&Re.equals(ae[ae.length-1])||(ae=[Re],z.push(ae)),ae.push(je)))))}}return z}function aw(c,a,d,m){const M=[],z=c.image,F=z.pixelRatio,ie=z.paddedRect.w-2,ae=z.paddedRect.h-2,_e=c.right-c.left,Re=c.bottom-c.top,je=z.stretchX||[[0,ie]],Ge=z.stretchY||[[0,ae]],Ye=(Zt,ni)=>Zt+ni[1]-ni[0],Ze=je.reduce(Ye,0),ut=Ge.reduce(Ye,0),lt=ie-Ze,vt=ae-ut;let Dt=0,xt=Ze,Pt=0,$t=ut,Bt=0,xi=lt,Ci=0,ii=vt;if(z.content&&m){const Zt=z.content;Dt=Qm(je,0,Zt[0]),Pt=Qm(Ge,0,Zt[1]),xt=Qm(je,Zt[0],Zt[2]),$t=Qm(Ge,Zt[1],Zt[3]),Bt=Zt[0]-Dt,Ci=Zt[1]-Pt,xi=Zt[2]-Zt[0]-xt,ii=Zt[3]-Zt[1]-$t}const Kt=(Zt,ni,ei,Vt)=>{const Mi=Jm(Zt.stretch-Dt,xt,_e,c.left),ki=eg(Zt.fixed-Bt,xi,Zt.stretch,Ze),dn=Jm(ni.stretch-Pt,$t,Re,c.top),sr=eg(ni.fixed-Ci,ii,ni.stretch,ut),ur=Jm(ei.stretch-Dt,xt,_e,c.left),Hr=eg(ei.fixed-Bt,xi,ei.stretch,Ze),Oa=Jm(Vt.stretch-Pt,$t,Re,c.top),xs=eg(Vt.fixed-Ci,ii,Vt.stretch,ut),Fr=new G(Mi,dn),es=new G(ur,dn),bs=new G(ur,Oa),Es=new G(Mi,Oa),ia=new G(ki/F,sr/F),Br=new G(Hr/F,xs/F),vs=a*Math.PI/180;if(vs){const na=Math.sin(vs),ra=Math.cos(vs),mr=[ra,-na,na,ra];Fr._matMult(mr),es._matMult(mr),Es._matMult(mr),bs._matMult(mr)}const ks=Zt.stretch+Zt.fixed,qs=ni.stretch+ni.fixed;return{tl:Fr,tr:es,bl:Es,br:bs,tex:{x:z.paddedRect.x+1+ks,y:z.paddedRect.y+1+qs,w:ei.stretch+ei.fixed-ks,h:Vt.stretch+Vt.fixed-qs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ia,pixelOffsetBR:Br,minFontScaleX:xi/F/_e,minFontScaleY:ii/F/Re,isSDF:d}};if(m&&(z.stretchX||z.stretchY)){const Zt=ow(je,lt,Ze),ni=ow(Ge,vt,ut);for(let ei=0;ei<Zt.length-1;ei++){const Vt=Zt[ei],Mi=Zt[ei+1];for(let ki=0;ki<ni.length-1;ki++)M.push(Kt(Vt,ni[ki],Mi,ni[ki+1]))}}else M.push(Kt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ie+1},{fixed:0,stretch:ae+1}));return M}function Qm(c,a,d){let m=0;for(const M of c)m+=Math.max(a,Math.min(d,M[1]))-Math.max(a,Math.min(d,M[0]));return m}function ow(c,a,d){const m=[{fixed:-1,stretch:0}];for(const[M,z]of c){const F=m[m.length-1];m.push({fixed:M-F.stretch,stretch:F.stretch}),m.push({fixed:M-F.stretch,stretch:F.stretch+(z-M)})}return m.push({fixed:a+1,stretch:d}),m}function Jm(c,a,d,m){return c/a*d+m}function eg(c,a,d,m){return c-a*d/m}fi("Anchor",Kl);class tg{constructor(a,d,m,M,z,F,ie,ae,_e,Re){if(this.boxStartIndex=a.length,_e){let je=F.top,Ge=F.bottom;const Ye=F.collisionPadding;Ye&&(je-=Ye[1],Ge+=Ye[3]);let Ze=Ge-je;Ze>0&&(Ze=Math.max(10,Ze),this.circleDiameter=Ze)}else{let je=F.top*ie-ae[0],Ge=F.bottom*ie+ae[2],Ye=F.left*ie-ae[3],Ze=F.right*ie+ae[1];const ut=F.collisionPadding;if(ut&&(Ye-=ut[0]*ie,je-=ut[1]*ie,Ze+=ut[2]*ie,Ge+=ut[3]*ie),Re){const lt=new G(Ye,je),vt=new G(Ze,je),Dt=new G(Ye,Ge),xt=new G(Ze,Ge),Pt=Re*Math.PI/180;lt._rotate(Pt),vt._rotate(Pt),Dt._rotate(Pt),xt._rotate(Pt),Ye=Math.min(lt.x,vt.x,Dt.x,xt.x),Ze=Math.max(lt.x,vt.x,Dt.x,xt.x),je=Math.min(lt.y,vt.y,Dt.y,xt.y),Ge=Math.max(lt.y,vt.y,Dt.y,xt.y)}a.emplaceBack(d.x,d.y,Ye,je,Ze,Ge,m,M,z)}this.boxEndIndex=a.length}}class DM{constructor(a=[],d=RM){if(this.data=a,this.length=this.data.length,this.compare=d,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(a){this.data.push(a),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const a=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:d,compare:m}=this,M=d[a];for(;a>0;){const z=a-1>>1,F=d[z];if(m(M,F)>=0)break;d[a]=F,a=z}d[a]=M}_down(a){const{data:d,compare:m}=this,M=this.length>>1,z=d[a];for(;a<M;){let F=1+(a<<1),ie=d[F];const ae=F+1;if(ae<this.length&&m(d[ae],ie)<0&&(F=ae,ie=d[ae]),m(ie,z)>=0)break;d[a]=ie,a=F}d[a]=z}}function RM(c,a){return c<a?-1:c>a?1:0}function LM(c,a=1,d=!1){let m=1/0,M=1/0,z=-1/0,F=-1/0;const ie=c[0];for(let Ye=0;Ye<ie.length;Ye++){const Ze=ie[Ye];(!Ye||Ze.x<m)&&(m=Ze.x),(!Ye||Ze.y<M)&&(M=Ze.y),(!Ye||Ze.x>z)&&(z=Ze.x),(!Ye||Ze.y>F)&&(F=Ze.y)}const ae=Math.min(z-m,F-M);let _e=ae/2;const Re=new DM([],zM);if(ae===0)return new G(m,M);for(let Ye=m;Ye<z;Ye+=ae)for(let Ze=M;Ze<F;Ze+=ae)Re.push(new Ad(Ye+_e,Ze+_e,_e,c));let je=function(Ye){let Ze=0,ut=0,lt=0;const vt=Ye[0];for(let Dt=0,xt=vt.length,Pt=xt-1;Dt<xt;Pt=Dt++){const $t=vt[Dt],Bt=vt[Pt],xi=$t.x*Bt.y-Bt.x*$t.y;ut+=($t.x+Bt.x)*xi,lt+=($t.y+Bt.y)*xi,Ze+=3*xi}return new Ad(ut/Ze,lt/Ze,0,Ye)}(c),Ge=Re.length;for(;Re.length;){const Ye=Re.pop();(Ye.d>je.d||!je.d)&&(je=Ye,d&&console.log("found best %d after %d probes",Math.round(1e4*Ye.d)/1e4,Ge)),Ye.max-je.d<=a||(_e=Ye.h/2,Re.push(new Ad(Ye.p.x-_e,Ye.p.y-_e,_e,c)),Re.push(new Ad(Ye.p.x+_e,Ye.p.y-_e,_e,c)),Re.push(new Ad(Ye.p.x-_e,Ye.p.y+_e,_e,c)),Re.push(new Ad(Ye.p.x+_e,Ye.p.y+_e,_e,c)),Ge+=4)}return d&&(console.log(`num probes: ${Ge}`),console.log(`best distance: ${je.d}`)),je.p}function zM(c,a){return a.max-c.max}function Ad(c,a,d,m){this.p=new G(c,a),this.h=d,this.d=function(M,z){let F=!1,ie=1/0;for(let ae=0;ae<z.length;ae++){const _e=z[ae];for(let Re=0,je=_e.length,Ge=je-1;Re<je;Ge=Re++){const Ye=_e[Re],Ze=_e[Ge];Ye.y>M.y!=Ze.y>M.y&&M.x<(Ze.x-Ye.x)*(M.y-Ye.y)/(Ze.y-Ye.y)+Ye.x&&(F=!F),ie=Math.min(ie,m_(M,Ye,Ze))}}return(F?1:-1)*Math.sqrt(ie)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}const h0=Number.POSITIVE_INFINITY;function lw(c,a){return a[1]!==h0?function(d,m,M){let z=0,F=0;switch(m=Math.abs(m),M=Math.abs(M),d){case"top-right":case"top-left":case"top":F=M-7;break;case"bottom-right":case"bottom-left":case"bottom":F=7-M}switch(d){case"top-right":case"bottom-right":case"right":z=-m;break;case"top-left":case"bottom-left":case"left":z=m}return[z,F]}(c,a[0],a[1]):function(d,m){let M=0,z=0;m<0&&(m=0);const F=m/Math.sqrt(2);switch(d){case"top-right":case"top-left":z=F-7;break;case"bottom-right":case"bottom-left":z=7-F;break;case"bottom":z=7-m;break;case"top":z=m-7}switch(d){case"top-right":case"bottom-right":M=-F;break;case"top-left":case"bottom-left":M=F;break;case"left":M=m;break;case"right":M=-m}return[M,z]}(c,a[0])}function p0(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function NM(c,a,d,m,M,z,F,ie,ae,_e,Re){let je=z.textMaxSize.evaluate(a,{});je===void 0&&(je=F);const Ge=c.layers[0].layout,Ye=Ge.get("icon-offset").evaluate(a,{},Re),Ze=uw(d.horizontal),ut=F/24,lt=c.tilePixelRatio*ut,vt=c.tilePixelRatio*je/24,Dt=c.tilePixelRatio*ie,xt=c.tilePixelRatio*Ge.get("symbol-spacing"),Pt=Ge.get("text-padding")*c.tilePixelRatio,$t=function(Vt,Mi,ki,dn=1){const sr=Vt.get("icon-padding").evaluate(Mi,{},ki),ur=sr&&sr.values;return[ur[0]*dn,ur[1]*dn,ur[2]*dn,ur[3]*dn]}(Ge,a,Re,c.tilePixelRatio),Bt=Ge.get("text-max-angle")/180*Math.PI,xi=Ge.get("text-rotation-alignment")!=="viewport"&&Ge.get("symbol-placement")!=="point",Ci=Ge.get("icon-rotation-alignment")==="map"&&Ge.get("symbol-placement")!=="point",ii=Ge.get("symbol-placement"),Kt=xt/2,Zt=Ge.get("icon-text-fit");let ni;m&&Zt!=="none"&&(c.allowVerticalPlacement&&d.vertical&&(ni=Q_(m,d.vertical,Zt,Ge.get("icon-text-fit-padding"),Ye,ut)),Ze&&(m=Q_(m,Ze,Zt,Ge.get("icon-text-fit-padding"),Ye,ut)));const ei=(Vt,Mi)=>{Mi.x<0||Mi.x>=Gr||Mi.y<0||Mi.y>=Gr||function(ki,dn,sr,ur,Hr,Oa,xs,Fr,es,bs,Es,ia,Br,vs,ks,qs,na,ra,mr,ts,mn,wa,_s,As,Qa){const lo=ki.addToLineVertexArray(dn,sr);let co,ml,Ja,ja,sa=0,gl=0,xp=0,Ew=0,T0=-1,C0=-1;const yl={};let kw=jr.exports(""),S0=0,E0=0;if(Fr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[S0,E0]=Fr.layout.get("text-offset").evaluate(mn,{},As).map(aa=>aa*ls):(S0=Fr.layout.get("text-radial-offset").evaluate(mn,{},As)*ls,E0=h0),ki.allowVerticalPlacement&&ur.vertical){const aa=Fr.layout.get("text-rotate").evaluate(mn,{},As)+90;Ja=new tg(es,dn,bs,Es,ia,ur.vertical,Br,vs,ks,aa),xs&&(ja=new tg(es,dn,bs,Es,ia,xs,na,ra,ks,aa))}if(Hr){const aa=Fr.layout.get("icon-rotate").evaluate(mn,{}),Ro=Fr.layout.get("icon-text-fit")!=="none",bp=aw(Hr,aa,_s,Ro),vp=xs?aw(xs,aa,_s,Ro):void 0;ml=new tg(es,dn,bs,Es,ia,Hr,na,ra,!1,aa),sa=4*bp.length;const Pw=ki.iconSizeData;let ou=null;Pw.kind==="source"?(ou=[fl*Fr.layout.get("icon-size").evaluate(mn,{})],ou[0]>Ql&&C(`${ki.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Pw.kind==="composite"&&(ou=[fl*wa.compositeIconSizes[0].evaluate(mn,{},As),fl*wa.compositeIconSizes[1].evaluate(mn,{},As)],(ou[0]>Ql||ou[1]>Ql)&&C(`${ki.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ki.addSymbols(ki.icon,bp,ou,ts,mr,mn,r.WritingMode.none,dn,lo.lineStartIndex,lo.lineLength,-1,As),T0=ki.icon.placedSymbolArray.length-1,vp&&(gl=4*vp.length,ki.addSymbols(ki.icon,vp,ou,ts,mr,mn,r.WritingMode.vertical,dn,lo.lineStartIndex,lo.lineLength,-1,As),C0=ki.icon.placedSymbolArray.length-1)}const Aw=Object.keys(ur.horizontal);for(const aa of Aw){const Ro=ur.horizontal[aa];if(!co){kw=jr.exports(Ro.text);const vp=Fr.layout.get("text-rotate").evaluate(mn,{},As);co=new tg(es,dn,bs,Es,ia,Ro,Br,vs,ks,vp)}const bp=Ro.positionedLines.length===1;if(xp+=cw(ki,dn,Ro,Oa,Fr,ks,mn,qs,lo,ur.vertical?r.WritingMode.horizontal:r.WritingMode.horizontalOnly,bp?Aw:[aa],yl,T0,wa,As),bp)break}ur.vertical&&(Ew+=cw(ki,dn,ur.vertical,Oa,Fr,ks,mn,qs,lo,r.WritingMode.vertical,["vertical"],yl,C0,wa,As));const ZM=co?co.boxStartIndex:ki.collisionBoxArray.length,XM=co?co.boxEndIndex:ki.collisionBoxArray.length,KM=Ja?Ja.boxStartIndex:ki.collisionBoxArray.length,QM=Ja?Ja.boxEndIndex:ki.collisionBoxArray.length,JM=ml?ml.boxStartIndex:ki.collisionBoxArray.length,e5=ml?ml.boxEndIndex:ki.collisionBoxArray.length,t5=ja?ja.boxStartIndex:ki.collisionBoxArray.length,i5=ja?ja.boxEndIndex:ki.collisionBoxArray.length;let uo=-1;const ag=(aa,Ro)=>aa&&aa.circleDiameter?Math.max(aa.circleDiameter,Ro):Ro;uo=ag(co,uo),uo=ag(Ja,uo),uo=ag(ml,uo),uo=ag(ja,uo);const Mw=uo>-1?1:0;Mw&&(uo*=Qa/ls),ki.glyphOffsetArray.length>=Md.MAX_GLYPHS&&C("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),mn.sortKey!==void 0&&ki.addToSortKeyRanges(ki.symbolInstances.length,mn.sortKey),ki.symbolInstances.emplaceBack(dn.x,dn.y,yl.right>=0?yl.right:-1,yl.center>=0?yl.center:-1,yl.left>=0?yl.left:-1,yl.vertical||-1,T0,C0,kw,ZM,XM,KM,QM,JM,e5,t5,i5,bs,xp,Ew,sa,gl,Mw,0,Br,S0,E0,uo)}(c,Mi,Vt,d,m,M,ni,c.layers[0],c.collisionBoxArray,a.index,a.sourceLayerIndex,c.index,lt,[Pt,Pt,Pt,Pt],xi,ae,Dt,$t,Ci,Ye,a,z,_e,Re,F)};if(ii==="line")for(const Vt of sw(a.geometry,0,0,Gr,Gr)){const Mi=IM(Vt,xt,Bt,d.vertical||Ze,m,24,vt,c.overscaling,Gr);for(const ki of Mi){const dn=Ze;dn&&OM(c,dn.text,Kt,ki)||ei(Vt,ki)}}else if(ii==="line-center"){for(const Vt of a.geometry)if(Vt.length>1){const Mi=PM(Vt,Bt,d.vertical||Ze,m,24,vt);Mi&&ei(Vt,Mi)}}else if(a.type==="Polygon")for(const Vt of e0(a.geometry,0)){const Mi=LM(Vt,16);ei(Vt[0],new Kl(Mi.x,Mi.y,0))}else if(a.type==="LineString")for(const Vt of a.geometry)ei(Vt,new Kl(Vt[0].x,Vt[0].y,0));else if(a.type==="Point")for(const Vt of a.geometry)for(const Mi of Vt)ei([Mi],new Kl(Mi.x,Mi.y,0))}const Ql=32640;function cw(c,a,d,m,M,z,F,ie,ae,_e,Re,je,Ge,Ye,Ze){const ut=function(Dt,xt,Pt,$t,Bt,xi,Ci,ii){const Kt=$t.layout.get("text-rotate").evaluate(xi,{})*Math.PI/180,Zt=[];for(const ni of xt.positionedLines)for(const ei of ni.positionedGlyphs){if(!ei.rect)continue;const Vt=ei.rect||{};let Mi=4,ki=!0,dn=1,sr=0;const ur=(Bt||ii)&&ei.vertical,Hr=ei.metrics.advance*ei.scale/2;if(ii&&xt.verticalizable){const mr=(ei.scale-1)*ls,ts=(ls-ei.metrics.width*ei.scale)/2;sr=ni.lineOffset/2-(ei.imageName?-ts:mr)}if(ei.imageName){const mr=Ci[ei.imageName];ki=mr.sdf,dn=mr.pixelRatio,Mi=1/dn}const Oa=Bt?[ei.x+Hr,ei.y]:[0,0];let xs=Bt?[0,0]:[ei.x+Hr+Pt[0],ei.y+Pt[1]-sr],Fr=[0,0];ur&&(Fr=xs,xs=[0,0]);const es=(ei.metrics.left-Mi)*ei.scale-Hr+xs[0],bs=(-ei.metrics.top-Mi)*ei.scale+xs[1],Es=es+Vt.w*ei.scale/dn,ia=bs+Vt.h*ei.scale/dn,Br=new G(es,bs),vs=new G(Es,bs),ks=new G(es,ia),qs=new G(Es,ia);if(ur){const mr=new G(-Hr,Hr-Zm),ts=-Math.PI/2,mn=12-Hr,wa=new G(22-mn,-(ei.imageName?mn:0)),_s=new G(...Fr);Br._rotateAround(ts,mr)._add(wa)._add(_s),vs._rotateAround(ts,mr)._add(wa)._add(_s),ks._rotateAround(ts,mr)._add(wa)._add(_s),qs._rotateAround(ts,mr)._add(wa)._add(_s)}if(Kt){const mr=Math.sin(Kt),ts=Math.cos(Kt),mn=[ts,-mr,mr,ts];Br._matMult(mn),vs._matMult(mn),ks._matMult(mn),qs._matMult(mn)}const na=new G(0,0),ra=new G(0,0);Zt.push({tl:Br,tr:vs,bl:ks,br:qs,tex:Vt,writingMode:xt.writingMode,glyphOffset:Oa,sectionIndex:ei.sectionIndex,isSDF:ki,pixelOffsetTL:na,pixelOffsetBR:ra,minFontScaleX:0,minFontScaleY:0})}return Zt}(0,d,ie,M,z,F,m,c.allowVerticalPlacement),lt=c.textSizeData;let vt=null;lt.kind==="source"?(vt=[fl*M.layout.get("text-size").evaluate(F,{})],vt[0]>Ql&&C(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):lt.kind==="composite"&&(vt=[fl*Ye.compositeTextSizes[0].evaluate(F,{},Ze),fl*Ye.compositeTextSizes[1].evaluate(F,{},Ze)],(vt[0]>Ql||vt[1]>Ql)&&C(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,ut,vt,ie,z,F,_e,a,ae.lineStartIndex,ae.lineLength,Ge,Ze);for(const Dt of Re)je[Dt]=c.text.placedSymbolArray.length-1;return 4*ut.length}function uw(c){for(const a in c)return c[a];return null}function OM(c,a,d,m){const M=c.compareText;if(a in M){const z=M[a];for(let F=z.length-1;F>=0;F--)if(m.dist(z[F])<d)return!0}else M[a]=[];return M[a].push(m),!1}const jM=Zl.VectorTileFeature.types,FM=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ig(c,a,d,m,M,z,F,ie,ae,_e,Re,je,Ge){const Ye=ie?Math.min(Ql,Math.round(ie[0])):0,Ze=ie?Math.min(Ql,Math.round(ie[1])):0;c.emplaceBack(a,d,Math.round(32*m),Math.round(32*M),z,F,(Ye<<1)+(ae?1:0),Ze,16*_e,16*Re,256*je,256*Ge)}function f0(c,a,d){c.emplaceBack(a.x,a.y,d),c.emplaceBack(a.x,a.y,d),c.emplaceBack(a.x,a.y,d),c.emplaceBack(a.x,a.y,d)}function BM(c){for(const a of c.sections)if(Bx(a.text))return!0;return!1}class m0{constructor(a){this.layoutVertexArray=new ta,this.indexArray=new os,this.programConfigurations=a,this.segments=new An,this.dynamicLayoutVertexArray=new Ka,this.opacityVertexArray=new Ia,this.placedSymbolArray=new jt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,d,m,M){this.isEmpty()||(m&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,cM.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,uM.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,FM,!0),this.opacityVertexBuffer.itemSize=1),(m||M)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}fi("SymbolBuffers",m0);class g0{constructor(a,d,m){this.layoutVertexArray=new a,this.layoutAttributes=d,this.indexArray=new m,this.segments=new An,this.collisionVertexArray=new ul}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,dM.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}fi("CollisionBuffers",g0);class Md{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(F=>F.id),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Yx([]),this.placementViewportMatrix=Yx([]);const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=J_(this.zoom,d["text-size"]),this.iconSizeData=J_(this.zoom,d["icon-size"]);const m=this.layers[0].layout,M=m.get("symbol-sort-key"),z=m.get("symbol-z-order");this.canOverlap=x0(m,"text-overlap","text-allow-overlap")!=="never"||x0(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=z!=="viewport-y"&&!M.isConstant(),this.sortFeaturesByY=(z==="viewport-y"||z==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(F=>r.WritingMode[F])),this.stateDependentLayerIds=this.layers.filter(F=>F.isStateDependent()).map(F=>F.id),this.sourceID=a.sourceID}createArrays(){this.text=new m0(new iu(this.layers,this.zoom,a=>/^text/.test(a))),this.icon=new m0(new iu(this.layers,this.zoom,a=>/^icon/.test(a))),this.glyphOffsetArray=new ai,this.lineVertexArray=new Xt,this.symbolInstances=new zt}calculateGlyphDependencies(a,d,m,M,z){for(let F=0;F<a.length;F++)if(d[a.charCodeAt(F)]=!0,(m||M)&&z){const ie=fp[a.charAt(F)];ie&&(d[ie.charCodeAt(0)]=!0)}}populate(a,d,m){const M=this.layers[0],z=M.layout,F=z.get("text-font"),ie=z.get("text-field"),ae=z.get("icon-image"),_e=(ie.value.kind!=="constant"||ie.value.value instanceof ct&&!ie.value.value.isEmpty()||ie.value.value.toString().length>0)&&(F.value.kind!=="constant"||F.value.value.length>0),Re=ae.value.kind!=="constant"||!!ae.value.value||Object.keys(ae.parameters).length>0,je=z.get("symbol-sort-key");if(this.features=[],!_e&&!Re)return;const Ge=d.iconDependencies,Ye=d.glyphDependencies,Ze=d.availableImages,ut=new lr(this.zoom);for(const{feature:lt,id:vt,index:Dt,sourceLayerIndex:xt}of a){const Pt=M._featureFilter.needGeometry,$t=ru(lt,Pt);if(!M._featureFilter.filter(ut,$t,m))continue;let Bt,xi;if(Pt||($t.geometry=nu(lt)),_e){const ii=M.getValueAndResolveTokens("text-field",$t,m,Ze),Kt=ct.factory(ii);BM(Kt)&&(this.hasRTLText=!0),(!this.hasRTLText||ep()==="unavailable"||this.hasRTLText&&va.isParsed())&&(Bt=pM(Kt,M,$t))}if(Re){const ii=M.getValueAndResolveTokens("icon-image",$t,m,Ze);xi=ii instanceof rt?ii:rt.fromString(ii)}if(!Bt&&!xi)continue;const Ci=this.sortFeaturesByKey?je.evaluate($t,{},m):void 0;if(this.features.push({id:vt,text:Bt,icon:xi,index:Dt,sourceLayerIndex:xt,geometry:$t.geometry,properties:lt.properties,type:jM[lt.type],sortKey:Ci}),xi&&(Ge[xi.name]=!0),Bt){const ii=F.evaluate($t,{},m).join(","),Kt=z.get("text-rotation-alignment")!=="viewport"&&z.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(r.WritingMode.vertical)>=0;for(const Zt of Bt.sections)if(Zt.image)Ge[Zt.image.name]=!0;else{const ni=Zh(Bt.toString()),ei=Zt.fontStack||ii,Vt=Ye[ei]=Ye[ei]||{};this.calculateGlyphDependencies(Zt.text,Vt,Kt,this.allowVerticalPlacement,ni)}}}z.get("symbol-placement")==="line"&&(this.features=function(lt){const vt={},Dt={},xt=[];let Pt=0;function $t(ii){xt.push(lt[ii]),Pt++}function Bt(ii,Kt,Zt){const ni=Dt[ii];return delete Dt[ii],Dt[Kt]=ni,xt[ni].geometry[0].pop(),xt[ni].geometry[0]=xt[ni].geometry[0].concat(Zt[0]),ni}function xi(ii,Kt,Zt){const ni=vt[Kt];return delete vt[Kt],vt[ii]=ni,xt[ni].geometry[0].shift(),xt[ni].geometry[0]=Zt[0].concat(xt[ni].geometry[0]),ni}function Ci(ii,Kt,Zt){const ni=Zt?Kt[0][Kt[0].length-1]:Kt[0][0];return`${ii}:${ni.x}:${ni.y}`}for(let ii=0;ii<lt.length;ii++){const Kt=lt[ii],Zt=Kt.geometry,ni=Kt.text?Kt.text.toString():null;if(!ni){$t(ii);continue}const ei=Ci(ni,Zt),Vt=Ci(ni,Zt,!0);if(ei in Dt&&Vt in vt&&Dt[ei]!==vt[Vt]){const Mi=xi(ei,Vt,Zt),ki=Bt(ei,Vt,xt[Mi].geometry);delete vt[ei],delete Dt[Vt],Dt[Ci(ni,xt[ki].geometry,!0)]=ki,xt[Mi].geometry=null}else ei in Dt?Bt(ei,Vt,Zt):Vt in vt?xi(ei,Vt,Zt):($t(ii),vt[ei]=Pt-1,Dt[Vt]=Pt-1)}return xt.filter(ii=>ii.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((lt,vt)=>lt.sortKey-vt.sortKey)}update(a,d,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,d,this.layers,m),this.icon.programConfigurations.updatePaintArrays(a,d,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,d){const m=this.lineVertexArray.length;if(a.segment!==void 0){let M=a.dist(d[a.segment+1]),z=a.dist(d[a.segment]);const F={};for(let ie=a.segment+1;ie<d.length;ie++)F[ie]={x:d[ie].x,y:d[ie].y,tileUnitDistanceFromAnchor:M},ie<d.length-1&&(M+=d[ie+1].dist(d[ie]));for(let ie=a.segment||0;ie>=0;ie--)F[ie]={x:d[ie].x,y:d[ie].y,tileUnitDistanceFromAnchor:z},ie>0&&(z+=d[ie-1].dist(d[ie]));for(let ie=0;ie<d.length;ie++){const ae=F[ie];this.lineVertexArray.emplaceBack(ae.x,ae.y,ae.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(a,d,m,M,z,F,ie,ae,_e,Re,je,Ge){const Ye=a.indexArray,Ze=a.layoutVertexArray,ut=a.segments.prepareSegment(4*d.length,Ze,Ye,this.canOverlap?F.sortKey:void 0),lt=this.glyphOffsetArray.length,vt=ut.vertexLength,Dt=this.allowVerticalPlacement&&ie===r.WritingMode.vertical?Math.PI/2:0,xt=F.text&&F.text.sections;for(let Pt=0;Pt<d.length;Pt++){const{tl:$t,tr:Bt,bl:xi,br:Ci,tex:ii,pixelOffsetTL:Kt,pixelOffsetBR:Zt,minFontScaleX:ni,minFontScaleY:ei,glyphOffset:Vt,isSDF:Mi,sectionIndex:ki}=d[Pt],dn=ut.vertexLength,sr=Vt[1];ig(Ze,ae.x,ae.y,$t.x,sr+$t.y,ii.x,ii.y,m,Mi,Kt.x,Kt.y,ni,ei),ig(Ze,ae.x,ae.y,Bt.x,sr+Bt.y,ii.x+ii.w,ii.y,m,Mi,Zt.x,Kt.y,ni,ei),ig(Ze,ae.x,ae.y,xi.x,sr+xi.y,ii.x,ii.y+ii.h,m,Mi,Kt.x,Zt.y,ni,ei),ig(Ze,ae.x,ae.y,Ci.x,sr+Ci.y,ii.x+ii.w,ii.y+ii.h,m,Mi,Zt.x,Zt.y,ni,ei),f0(a.dynamicLayoutVertexArray,ae,Dt),Ye.emplaceBack(dn,dn+1,dn+2),Ye.emplaceBack(dn+1,dn+2,dn+3),ut.vertexLength+=4,ut.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Vt[0]),Pt!==d.length-1&&ki===d[Pt+1].sectionIndex||a.programConfigurations.populatePaintArrays(Ze.length,F,F.index,{},Ge,xt&&xt[ki])}a.placedSymbolArray.emplaceBack(ae.x,ae.y,lt,this.glyphOffsetArray.length-lt,vt,_e,Re,ae.segment,m?m[0]:0,m?m[1]:0,M[0],M[1],ie,0,!1,0,je)}_addCollisionDebugVertex(a,d,m,M,z,F){return d.emplaceBack(0,0),a.emplaceBack(m.x,m.y,M,z,Math.round(F.x),Math.round(F.y))}addCollisionDebugVertices(a,d,m,M,z,F,ie){const ae=z.segments.prepareSegment(4,z.layoutVertexArray,z.indexArray),_e=ae.vertexLength,Re=z.layoutVertexArray,je=z.collisionVertexArray,Ge=ie.anchorX,Ye=ie.anchorY;this._addCollisionDebugVertex(Re,je,F,Ge,Ye,new G(a,d)),this._addCollisionDebugVertex(Re,je,F,Ge,Ye,new G(m,d)),this._addCollisionDebugVertex(Re,je,F,Ge,Ye,new G(m,M)),this._addCollisionDebugVertex(Re,je,F,Ge,Ye,new G(a,M)),ae.vertexLength+=4;const Ze=z.indexArray;Ze.emplaceBack(_e,_e+1),Ze.emplaceBack(_e+1,_e+2),Ze.emplaceBack(_e+2,_e+3),Ze.emplaceBack(_e+3,_e),ae.primitiveLength+=4}addDebugCollisionBoxes(a,d,m,M){for(let z=a;z<d;z++){const F=this.collisionBoxArray.get(z);this.addCollisionDebugVertices(F.x1,F.y1,F.x2,F.y2,M?this.textCollisionBox:this.iconCollisionBox,F.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new g0(Da,F_.members,Ra),this.iconCollisionBox=new g0(Da,F_.members,Ra);for(let a=0;a<this.symbolInstances.length;a++){const d=this.symbolInstances.get(a);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(a,d,m,M,z,F,ie,ae,_e){const Re={};for(let je=d;je<m;je++){const Ge=a.get(je);Re.textBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},Re.textFeatureIndex=Ge.featureIndex;break}for(let je=M;je<z;je++){const Ge=a.get(je);Re.verticalTextBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},Re.verticalTextFeatureIndex=Ge.featureIndex;break}for(let je=F;je<ie;je++){const Ge=a.get(je);Re.iconBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},Re.iconFeatureIndex=Ge.featureIndex;break}for(let je=ae;je<_e;je++){const Ge=a.get(je);Re.verticalIconBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},Re.verticalIconFeatureIndex=Ge.featureIndex;break}return Re}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const m=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,d){const m=a.placedSymbolArray.get(d),M=m.vertexStartIndex+4*m.numGlyphs;for(let z=m.vertexStartIndex;z<M;z+=4)a.indexArray.emplaceBack(z,z+1,z+2),a.indexArray.emplaceBack(z+1,z+2,z+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(a),m=Math.cos(a),M=[],z=[],F=[];for(let ie=0;ie<this.symbolInstances.length;++ie){F.push(ie);const ae=this.symbolInstances.get(ie);M.push(0|Math.round(d*ae.anchorX+m*ae.anchorY)),z.push(ae.featureIndex)}return F.sort((ie,ae)=>M[ie]-M[ae]||z[ae]-z[ie]),F}addToSortKeyRanges(a,d){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===d?m.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const m=this.symbolInstances.get(d);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((M,z,F)=>{M>=0&&F.indexOf(M)===z&&this.addIndicesForPlacedSymbol(this.text,M)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}fi("SymbolBucket",Md,{omit:["layers","collisionBoxArray","features","compareText"]}),Md.MAX_GLYPHS=65535,Md.addDynamicAttributes=f0;const $M=new Vr({"symbol-placement":new Ei(Pe.layout_symbol["symbol-placement"]),"symbol-spacing":new Ei(Pe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ei(Pe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Di(Pe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ei(Pe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ei(Pe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ei(Pe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ei(Pe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ei(Pe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ei(Pe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Di(Pe.layout_symbol["icon-size"]),"icon-text-fit":new Ei(Pe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ei(Pe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Di(Pe.layout_symbol["icon-image"]),"icon-rotate":new Di(Pe.layout_symbol["icon-rotate"]),"icon-padding":new Di(Pe.layout_symbol["icon-padding"]),"icon-keep-upright":new Ei(Pe.layout_symbol["icon-keep-upright"]),"icon-offset":new Di(Pe.layout_symbol["icon-offset"]),"icon-anchor":new Di(Pe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ei(Pe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ei(Pe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ei(Pe.layout_symbol["text-rotation-alignment"]),"text-field":new Di(Pe.layout_symbol["text-field"]),"text-font":new Di(Pe.layout_symbol["text-font"]),"text-size":new Di(Pe.layout_symbol["text-size"]),"text-max-width":new Di(Pe.layout_symbol["text-max-width"]),"text-line-height":new Ei(Pe.layout_symbol["text-line-height"]),"text-letter-spacing":new Di(Pe.layout_symbol["text-letter-spacing"]),"text-justify":new Di(Pe.layout_symbol["text-justify"]),"text-radial-offset":new Di(Pe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ei(Pe.layout_symbol["text-variable-anchor"]),"text-anchor":new Di(Pe.layout_symbol["text-anchor"]),"text-max-angle":new Ei(Pe.layout_symbol["text-max-angle"]),"text-writing-mode":new Ei(Pe.layout_symbol["text-writing-mode"]),"text-rotate":new Di(Pe.layout_symbol["text-rotate"]),"text-padding":new Ei(Pe.layout_symbol["text-padding"]),"text-keep-upright":new Ei(Pe.layout_symbol["text-keep-upright"]),"text-transform":new Di(Pe.layout_symbol["text-transform"]),"text-offset":new Di(Pe.layout_symbol["text-offset"]),"text-allow-overlap":new Ei(Pe.layout_symbol["text-allow-overlap"]),"text-overlap":new Ei(Pe.layout_symbol["text-overlap"]),"text-ignore-placement":new Ei(Pe.layout_symbol["text-ignore-placement"]),"text-optional":new Ei(Pe.layout_symbol["text-optional"])});var y0={paint:new Vr({"icon-opacity":new Di(Pe.paint_symbol["icon-opacity"]),"icon-color":new Di(Pe.paint_symbol["icon-color"]),"icon-halo-color":new Di(Pe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Di(Pe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Di(Pe.paint_symbol["icon-halo-blur"]),"icon-translate":new Ei(Pe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ei(Pe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Di(Pe.paint_symbol["text-opacity"]),"text-color":new Di(Pe.paint_symbol["text-color"],{runtimeType:si,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Di(Pe.paint_symbol["text-halo-color"]),"text-halo-width":new Di(Pe.paint_symbol["text-halo-width"]),"text-halo-blur":new Di(Pe.paint_symbol["text-halo-blur"]),"text-translate":new Ei(Pe.paint_symbol["text-translate"]),"text-translate-anchor":new Ei(Pe.paint_symbol["text-translate-anchor"])}),layout:$M};class dw{constructor(a){if(a.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=a.property.overrides?a.property.overrides.runtimeType:Lt,this.defaultValue=a}evaluate(a){if(a.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(a.formattedSection))return d.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}fi("FormatSectionOverride",dw,{omit:["defaultValue"]});class ng extends Us{constructor(a){super(a,y0)}recalculate(a,d){if(super.recalculate(a,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const M=[];for(const z of m)M.indexOf(z)<0&&M.push(z);this.layout._values["text-writing-mode"]=M}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(a,d,m,M){const z=this.layout.get(a).evaluate(d,{},m,M),F=this._unevaluatedLayout._values[a];return F.isDataDriven()||Bc(F.value)||!z?z:function(ie,ae){return ae.replace(/{([^{}]+)}/g,(_e,Re)=>Re in ie?String(ie[Re]):"")}(d.properties,z)}createBucket(a){return new Md(a)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const a of y0.paint.overridableProperties){if(!ng.hasPaintOverride(this.layout,a))continue;const d=this.paint.get(a),m=new dw(d),M=new Vh(m,d.property.specification);let z=null;z=d.value.kind==="constant"||d.value.kind==="source"?new id("source",M):new Uc("composite",M,d.value.zoomStops),this.paint._values[a]=new Xa(d.property,z,d.parameters)}}_handleOverridablePaintPropertyUpdate(a,d,m){return!(!this.layout||d.isDataDriven()||m.isDataDriven())&&ng.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,d){const m=a.get("text-field"),M=y0.paint.properties[d];let z=!1;const F=ie=>{for(const ae of ie)if(M.overrides&&M.overrides.hasOverride(ae))return void(z=!0)};if(m.value.kind==="constant"&&m.value.value instanceof ct)F(m.value.value.sections);else if(m.value.kind==="source"){const ie=_e=>{z||(_e instanceof oi&&Nt(_e.value)===Xi?F(_e.value.sections):_e instanceof td?F(_e.sections):_e.eachChild(ie))},ae=m.value;ae._styleExpression&&ie(ae._styleExpression.expression)}return z}}function x0(c,a,d){let m="never";const M=c.get(a);return M?m=M:c.get(d)&&(m="always"),m}var UM={paint:new Vr({"background-color":new Ei(Pe.paint_background["background-color"]),"background-pattern":new Qc(Pe.paint_background["background-pattern"]),"background-opacity":new Ei(Pe.paint_background["background-opacity"])})},VM={paint:new Vr({"raster-opacity":new Ei(Pe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ei(Pe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ei(Pe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ei(Pe.paint_raster["raster-brightness-max"]),"raster-saturation":new Ei(Pe.paint_raster["raster-saturation"]),"raster-contrast":new Ei(Pe.paint_raster["raster-contrast"]),"raster-resampling":new Ei(Pe.paint_raster["raster-resampling"]),"raster-fade-duration":new Ei(Pe.paint_raster["raster-fade-duration"])})};class GM extends Us{constructor(a){super(a,{}),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const HM={circle:class extends Us{constructor(c){super(c,TA)}createBucket(c){return new Hx(c)}queryRadius(c){const a=c;return sp("circle-radius",this,a)+sp("circle-stroke-width",this,a)+Bm(this.paint.get("circle-translate"))}queryIntersectsFeature(c,a,d,m,M,z,F,ie){const ae=$m(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),z.angle,F),_e=this.paint.get("circle-radius").evaluate(a,d)+this.paint.get("circle-stroke-width").evaluate(a,d),Re=this.paint.get("circle-pitch-alignment")==="map",je=Re?ae:function(Ye,Ze){return Ye.map(ut=>w_(ut,Ze))}(ae,ie),Ge=Re?_e*F:_e;for(const Ye of m)for(const Ze of Ye){const ut=Re?Ze:w_(Ze,ie);let lt=Ge;const vt=Um([],[Ze.x,Ze.y,0,1],ie);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?lt*=vt[3]/z.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(lt*=z.cameraToCenterDistance/vt[3]),xA(je,ut,lt))return!0}return!1}},heatmap:class extends Us{constructor(c){super(c,SA),this._updateColorRamp()}createBucket(c){return new T_(c)}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=S_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Us{constructor(c){super(c,EA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Us{constructor(c){super(c,$A)}recalculate(c,a){super.recalculate(c,a);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new n0(c)}queryRadius(){return Bm(this.paint.get("fill-translate"))}queryIntersectsFeature(c,a,d,m,M,z,F){return f_($m(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),z.angle,F),m)}isTileClipped(){return!0}},"fill-extrusion":class extends Us{constructor(c){super(c,tM)}createBucket(c){return new s0(c)}queryRadius(){return Bm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(c,a,d,m,M,z,F,ie){const ae=$m(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),z.angle,F),_e=this.paint.get("fill-extrusion-height").evaluate(a,d),Re=this.paint.get("fill-extrusion-base").evaluate(a,d),je=function(Ye,Ze,ut,lt){const vt=[];for(const Dt of Ye){const xt=[Dt.x,Dt.y,0,1];Um(xt,xt,Ze),vt.push(new G(xt[0]/xt[3],xt[1]/xt[3]))}return vt}(ae,ie),Ge=function(Ye,Ze,ut,lt){const vt=[],Dt=[],xt=lt[8]*Ze,Pt=lt[9]*Ze,$t=lt[10]*Ze,Bt=lt[11]*Ze,xi=lt[8]*ut,Ci=lt[9]*ut,ii=lt[10]*ut,Kt=lt[11]*ut;for(const Zt of Ye){const ni=[],ei=[];for(const Vt of Zt){const Mi=Vt.x,ki=Vt.y,dn=lt[0]*Mi+lt[4]*ki+lt[12],sr=lt[1]*Mi+lt[5]*ki+lt[13],ur=lt[2]*Mi+lt[6]*ki+lt[14],Hr=lt[3]*Mi+lt[7]*ki+lt[15],Oa=ur+$t,xs=Hr+Bt,Fr=dn+xi,es=sr+Ci,bs=ur+ii,Es=Hr+Kt,ia=new G((dn+xt)/xs,(sr+Pt)/xs);ia.z=Oa/xs,ni.push(ia);const Br=new G(Fr/Es,es/Es);Br.z=bs/Es,ei.push(Br)}vt.push(ni),Dt.push(ei)}return[vt,Dt]}(m,Re,_e,ie);return function(Ye,Ze,ut){let lt=1/0;f_(ut,Ze)&&(lt=L_(ut,Ze[0]));for(let vt=0;vt<Ze.length;vt++){const Dt=Ze[vt],xt=Ye[vt];for(let Pt=0;Pt<Dt.length-1;Pt++){const $t=Dt[Pt],Bt=[$t,Dt[Pt+1],xt[Pt+1],xt[Pt],$t];p_(ut,Bt)&&(lt=Math.min(lt,L_(ut,Bt)))}}return lt!==1/0&&lt}(Ge[0],Ge[1],je)}},line:class extends Us{constructor(c){super(c,N_),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(c){c==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Nc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(c,a){super.recalculate(c,a),this.paint._values["line-floorwidth"]=O_.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new a0(c)}queryRadius(c){const a=c,d=j_(sp("line-width",this,a),sp("line-gap-width",this,a)),m=sp("line-offset",this,a);return d/2+Math.abs(m)+Bm(this.paint.get("line-translate"))}queryIntersectsFeature(c,a,d,m,M,z,F){const ie=$m(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),z.angle,F),ae=F/2*j_(this.paint.get("line-width").evaluate(a,d),this.paint.get("line-gap-width").evaluate(a,d)),_e=this.paint.get("line-offset").evaluate(a,d);return _e&&(m=function(Re,je){const Ge=[];for(let Ye=0;Ye<Re.length;Ye++){const Ze=Re[Ye],ut=[];for(let lt=0;lt<Ze.length;lt++){const vt=Ze[lt-1],Dt=Ze[lt],xt=Ze[lt+1],Pt=lt===0?new G(0,0):Dt.sub(vt)._unit()._perp(),$t=lt===Ze.length-1?new G(0,0):xt.sub(Dt)._unit()._perp(),Bt=Pt._add($t)._unit(),xi=Bt.x*$t.x+Bt.y*$t.y;xi!==0&&Bt._mult(1/xi),ut.push(Bt._mult(je)._add(Dt))}Ge.push(ut)}return Ge}(m,_e*F)),function(Re,je,Ge){for(let Ye=0;Ye<je.length;Ye++){const Ze=je[Ye];if(Re.length>=3){for(let ut=0;ut<Ze.length;ut++)if(wd(Re,Ze[ut]))return!0}if(bA(Re,Ze,Ge))return!0}return!1}(ie,m,ae)}isTileClipped(){return!0}},symbol:ng,background:class extends Us{constructor(c){super(c,UM)}},raster:class extends Us{constructor(c){super(c,VM)}}};class qM{constructor(a){this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const hw=63710088e-1;class _r{constructor(a,d){if(isNaN(a)||isNaN(d))throw new Error(`Invalid LngLat object: (${a}, ${d})`);if(this.lng=+a,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new _r(w(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const d=Math.PI/180,m=this.lat*d,M=a.lat*d,z=Math.sin(m)*Math.sin(M)+Math.cos(m)*Math.cos(M)*Math.cos((a.lng-this.lng)*d);return hw*Math.acos(Math.min(z,1))}toBounds(a=0){const d=360*a/40075017,m=d/Math.cos(Math.PI/180*this.lat);return new au(new _r(this.lng-m,this.lat-d),new _r(this.lng+m,this.lat+d))}static convert(a){if(a instanceof _r)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new _r(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new _r(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class au{constructor(a,d){a&&(d?this.setSouthWest(a).setNorthEast(d):a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1]))}setNorthEast(a){return this._ne=a instanceof _r?new _r(a.lng,a.lat):_r.convert(a),this}setSouthWest(a){return this._sw=a instanceof _r?new _r(a.lng,a.lat):_r.convert(a),this}extend(a){const d=this._sw,m=this._ne;let M,z;if(a instanceof _r)M=a,z=a;else{if(!(a instanceof au))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(au.convert(a)):this.extend(_r.convert(a)):this;if(M=a._sw,z=a._ne,!M||!z)return this}return d||m?(d.lng=Math.min(M.lng,d.lng),d.lat=Math.min(M.lat,d.lat),m.lng=Math.max(z.lng,m.lng),m.lat=Math.max(z.lat,m.lat)):(this._sw=new _r(M.lng,M.lat),this._ne=new _r(z.lng,z.lat)),this}getCenter(){return new _r((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new _r(this.getWest(),this.getNorth())}getSouthEast(){return new _r(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:d,lat:m}=_r.convert(a);let M=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(M=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&M}static convert(a){return a instanceof au?a:a&&new au(a)}}const pw=2*Math.PI*hw;function fw(c){return pw*Math.cos(c*Math.PI/180)}function mw(c){return(180+c)/360}function gw(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function yw(c,a){return c/fw(a)}function b0(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class rg{constructor(a,d,m=0){this.x=+a,this.y=+d,this.z=+m}static fromLngLat(a,d=0){const m=_r.convert(a);return new rg(mw(m.lng),gw(m.lat),yw(d,m.lat))}toLngLat(){return new _r(360*this.x-180,b0(this.y))}toAltitude(){return this.z*fw(b0(this.y))}meterInMercatorCoordinateUnits(){return 1/pw*(a=b0(this.y),1/Math.cos(a*Math.PI/180));var a}}function xw(c,a,d){var m=2*Math.PI*6378137/256/Math.pow(2,d);return[c*m-2*Math.PI*6378137/2,a*m-2*Math.PI*6378137/2]}class v0{constructor(a,d,m){if(a<0||a>25||m<0||m>=Math.pow(2,a)||d<0||d>=Math.pow(2,a))throw new Error(`x=${d}, y=${m}, z=${a} outside of bounds. 0<=x<${Math.pow(2,a)}, 0<=y<${Math.pow(2,a)} 0<=z<=25 `);this.z=a,this.x=d,this.y=m,this.key=gp(0,a,a,d,m)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,d,m){const M=(F=this.y,ie=this.z,ae=xw(256*(z=this.x),256*(F=Math.pow(2,ie)-F-1),ie),_e=xw(256*(z+1),256*(F+1),ie),ae[0]+","+ae[1]+","+_e[0]+","+_e[1]);var z,F,ie,ae,_e;const Re=function(je,Ge,Ye){let Ze,ut="";for(let lt=je;lt>0;lt--)Ze=1<<lt-1,ut+=(Ge&Ze?1:0)+(Ye&Ze?2:0);return ut}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,Re).replace(/{bbox-epsg-3857}/g,M)}isChildOf(a){const d=this.z-a.z;return d>0&&a.x===this.x>>d&&a.y===this.y>>d}getTilePoint(a){const d=Math.pow(2,this.z);return new G((a.x*d-this.x)*Gr,(a.y*d-this.y)*Gr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class bw{constructor(a,d){this.wrap=a,this.canonical=d,this.key=gp(a,d.z,d.z,d.x,d.y)}}class Na{constructor(a,d,m,M,z){if(a<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${a}; z = ${m}`);this.overscaledZ=a,this.wrap=d,this.canonical=new v0(m,+M,+z),this.key=gp(d,a,m,M,z)}clone(){return new Na(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-a;return a>this.canonical.z?new Na(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Na(a,this.wrap,a,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(a,d){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-a;return a>this.canonical.z?gp(this.wrap*+d,a,this.canonical.z,this.canonical.x,this.canonical.y):gp(this.wrap*+d,a,a,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(a){if(a.wrap!==this.wrap)return!1;const d=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>d&&a.canonical.y===this.canonical.y>>d}children(a){if(this.overscaledZ>=a)return[new Na(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,m=2*this.canonical.x,M=2*this.canonical.y;return[new Na(d,this.wrap,d,m,M),new Na(d,this.wrap,d,m+1,M),new Na(d,this.wrap,d,m,M+1),new Na(d,this.wrap,d,m+1,M+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new Na(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new Na(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new bw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(a){return this.canonical.getTilePoint(new rg(a.x-this.wrap,a.y))}}function gp(c,a,d,m,M){(c*=2)<0&&(c=-1*c-1);const z=1<<d;return(z*z*c+z*M+m).toString(36)+d.toString(36)+a.toString(36)}fi("CanonicalTileID",v0),fi("OverscaledTileID",Na,{omit:["posMatrix"]});class vw{constructor(a,d,m){if(this.uid=a,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(m&&m!=="mapbox"&&m!=="terrarium")return void C(`"${m}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=d.height;const M=this.dim=d.height-2;this.data=new Uint32Array(d.data.buffer),this.encoding=m||"mapbox";for(let z=0;z<M;z++)this.data[this._idx(-1,z)]=this.data[this._idx(0,z)],this.data[this._idx(M,z)]=this.data[this._idx(M-1,z)],this.data[this._idx(z,-1)]=this.data[this._idx(z,0)],this.data[this._idx(z,M)]=this.data[this._idx(z,M-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(M,-1)]=this.data[this._idx(M-1,0)],this.data[this._idx(-1,M)]=this.data[this._idx(0,M-1)],this.data[this._idx(M,M)]=this.data[this._idx(M-1,M-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let z=0;z<M;z++)for(let F=0;F<M;F++){const ie=this.get(z,F);ie>this.max&&(this.max=ie),ie<this.min&&(this.min=ie)}}get(a,d){const m=new Uint8Array(this.data.buffer),M=4*this._idx(a,d);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(m[M],m[M+1],m[M+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(a,d){if(a<-1||a>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(a+1)}_unpackMapbox(a,d,m){return(256*a*256+256*d+m)/10-1e4}_unpackTerrarium(a,d,m){return 256*a+d+m/256-32768}getPixels(){return new za({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(a,d,m){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let M=d*this.dim,z=d*this.dim+this.dim,F=m*this.dim,ie=m*this.dim+this.dim;switch(d){case-1:M=z-1;break;case 1:z=M+1}switch(m){case-1:F=ie-1;break;case 1:ie=F+1}const ae=-d*this.dim,_e=-m*this.dim;for(let Re=F;Re<ie;Re++)for(let je=M;je<z;je++)this.data[this._idx(je,Re)]=a.data[this._idx(je+ae,Re+_e)]}}fi("DEMData",vw);class _w{constructor(a){this._stringToNumber={},this._numberToString=[];for(let d=0;d<a.length;d++){const m=a[d];this._stringToNumber[m]=d,this._numberToString[d]=m}}encode(a){return this._stringToNumber[a]}decode(a){if(a>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${a} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[a]}}class ww{constructor(a,d,m,M,z){this.type="Feature",this._vectorTileFeature=a,a._z=d,a._x=m,a._y=M,this.properties=a.properties,this.id=z}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(a[d]=this[d]);return a}}class Tw{constructor(a,d){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new ol(Gr,16,0),this.grid3D=new ol(Gr,16,0),this.featureIndexArray=new Ki,this.promoteId=d}insert(a,d,m,M,z,F){const ie=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,M,z);const ae=F?this.grid3D:this.grid;for(let _e=0;_e<d.length;_e++){const Re=d[_e],je=[1/0,1/0,-1/0,-1/0];for(let Ge=0;Ge<Re.length;Ge++){const Ye=Re[Ge];je[0]=Math.min(je[0],Ye.x),je[1]=Math.min(je[1],Ye.y),je[2]=Math.max(je[2],Ye.x),je[3]=Math.max(je[3],Ye.y)}je[0]<Gr&&je[1]<Gr&&je[2]>=0&&je[3]>=0&&ae.insert(ie,je[0],je[1],je[2],je[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Zl.VectorTile(new o0(this.rawTileData)).layers,this.sourceLayerCoder=new _w(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(a,d,m,M){this.loadVTLayers();const z=a.params||{},F=Gr/a.tileSize/a.scale,ie=Hh(z.filter),ae=a.queryGeometry,_e=a.queryPadding*F,Re=Sw(ae),je=this.grid.query(Re.minX-_e,Re.minY-_e,Re.maxX+_e,Re.maxY+_e),Ge=Sw(a.cameraQueryGeometry),Ye=this.grid3D.query(Ge.minX-_e,Ge.minY-_e,Ge.maxX+_e,Ge.maxY+_e,(lt,vt,Dt,xt)=>function(Pt,$t,Bt,xi,Ci){for(const Kt of Pt)if($t<=Kt.x&&Bt<=Kt.y&&xi>=Kt.x&&Ci>=Kt.y)return!0;const ii=[new G($t,Bt),new G($t,Ci),new G(xi,Ci),new G(xi,Bt)];if(Pt.length>2){for(const Kt of ii)if(wd(Pt,Kt))return!0}for(let Kt=0;Kt<Pt.length-1;Kt++)if(_A(Pt[Kt],Pt[Kt+1],ii))return!0;return!1}(a.cameraQueryGeometry,lt-_e,vt-_e,Dt+_e,xt+_e));for(const lt of Ye)je.push(lt);je.sort(WM);const Ze={};let ut;for(let lt=0;lt<je.length;lt++){const vt=je[lt];if(vt===ut)continue;ut=vt;const Dt=this.featureIndexArray.get(vt);let xt=null;this.loadMatchingFeature(Ze,Dt.bucketIndex,Dt.sourceLayerIndex,Dt.featureIndex,ie,z.layers,z.availableImages,d,m,M,(Pt,$t,Bt)=>(xt||(xt=nu(Pt)),$t.queryIntersectsFeature(ae,Pt,Bt,xt,this.z,a.transform,F,a.pixelPosMatrix)))}return Ze}loadMatchingFeature(a,d,m,M,z,F,ie,ae,_e,Re,je){const Ge=this.bucketLayerIDs[d];if(F&&!function(lt,vt){for(let Dt=0;Dt<lt.length;Dt++)if(vt.indexOf(lt[Dt])>=0)return!0;return!1}(F,Ge))return;const Ye=this.sourceLayerCoder.decode(m),Ze=this.vtLayers[Ye].feature(M);if(z.needGeometry){const lt=ru(Ze,!0);if(!z.filter(new lr(this.tileID.overscaledZ),lt,this.tileID.canonical))return}else if(!z.filter(new lr(this.tileID.overscaledZ),Ze))return;const ut=this.getId(Ze,Ye);for(let lt=0;lt<Ge.length;lt++){const vt=Ge[lt];if(F&&F.indexOf(vt)<0)continue;const Dt=ae[vt];if(!Dt)continue;let xt={};ut&&Re&&(xt=Re.getState(Dt.sourceLayer||"_geojsonTileLayer",ut));const Pt=v({},_e[vt]);Pt.paint=Cw(Pt.paint,Dt.paint,Ze,xt,ie),Pt.layout=Cw(Pt.layout,Dt.layout,Ze,xt,ie);const $t=!je||je(Ze,Dt,xt);if(!$t)continue;const Bt=new ww(Ze,this.z,this.x,this.y,ut);Bt.layer=Pt;let xi=a[vt];xi===void 0&&(xi=a[vt]=[]),xi.push({featureIndex:M,feature:Bt,intersectionZ:$t})}}lookupSymbolFeatures(a,d,m,M,z,F,ie,ae){const _e={};this.loadVTLayers();const Re=Hh(z);for(const je of a)this.loadMatchingFeature(_e,m,M,je,Re,F,ie,ae,d);return _e}hasLayer(a){for(const d of this.bucketLayerIDs)for(const m of d)if(a===m)return!0;return!1}getId(a,d){let m=a.id;return this.promoteId&&(m=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof m=="boolean"&&(m=Number(m))),m}}function Cw(c,a,d,m,M){return E(c,(z,F)=>{const ie=a instanceof md?a.get(F):null;return ie&&ie.evaluate?ie.evaluate(d,m,M):ie})}function Sw(c){let a=1/0,d=1/0,m=-1/0,M=-1/0;for(const z of c)a=Math.min(a,z.x),d=Math.min(d,z.y),m=Math.max(m,z.x),M=Math.max(M,z.y);return{minX:a,minY:d,maxX:m,maxY:M}}function WM(c,a){return a-c}var _0;fi("FeatureIndex",Tw,{omit:["rawTileData","sourceLayerCoder"]}),r.PerformanceMarkers=void 0,(_0=r.PerformanceMarkers||(r.PerformanceMarkers={})).create="create",_0.load="load",_0.fullLoad="fullLoad";let sg=null,yp=[];const w0=1e3/30,YM={mark(c){performance.mark(c)},frame(c){const a=c;sg!=null&&yp.push(a-sg),sg=a},clearMetrics(){sg=null,yp=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const c in r.PerformanceMarkers)performance.clearMarks(r.PerformanceMarkers[c])},getPerformanceMetrics(){performance.measure("loadTime",r.PerformanceMarkers.create,r.PerformanceMarkers.load),performance.measure("fullLoadTime",r.PerformanceMarkers.create,r.PerformanceMarkers.fullLoad);const c=performance.getEntriesByName("loadTime")[0].duration,a=performance.getEntriesByName("fullLoadTime")[0].duration,d=yp.length,m=1/(yp.reduce((z,F)=>z+F,0)/d/1e3),M=yp.filter(z=>z>w0).reduce((z,F)=>z+(F-w0)/w0,0);return{loadTime:c,fullLoadTime:a,fps:m,percentDroppedFrames:M/(d+M)*100}}};r.AJAXError=ee,r.ARRAY_TYPE=Hs,r.Actor=class{constructor(c,a,d){this.target=c,this.parent=a,this.mapId=d,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},S(["receive","process"],this),this.invoker=new qM(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=W()?c:window}send(c,a,d,m,M=!1){const z=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(this.callbacks[z]=d);const F=$(this.globalScope)?void 0:[];return this.target.postMessage({id:z,type:c,hasCallback:!!d,targetMapId:m,mustQueue:M,sourceMapId:this.mapId,data:Yc(a,F)},F),{cancel:()=>{d&&delete this.callbacks[z],this.target.postMessage({id:z,type:"<cancel>",targetMapId:m,sourceMapId:this.mapId})}}}receive(c){const a=c.data,d=a.id;if(d&&(!a.targetMapId||this.mapId===a.targetMapId))if(a.type==="<cancel>"){delete this.tasks[d];const m=this.cancelCallbacks[d];delete this.cancelCallbacks[d],m&&m()}else W()||a.mustQueue?(this.tasks[d]=a,this.taskQueue.push(d),this.invoker.trigger()):this.processTask(d,a)}process(){if(!this.taskQueue.length)return;const c=this.taskQueue.shift(),a=this.tasks[c];delete this.tasks[c],this.taskQueue.length&&this.invoker.trigger(),a&&this.processTask(c,a)}processTask(c,a){if(a.type==="<response>"){const d=this.callbacks[c];delete this.callbacks[c],d&&(a.error?d(ll(a.error)):d(null,ll(a.data)))}else{let d=!1;const m=$(this.globalScope)?void 0:[],M=a.hasCallback?(ie,ae)=>{d=!0,delete this.cancelCallbacks[c],this.target.postMessage({id:c,type:"<response>",sourceMapId:this.mapId,error:ie?Yc(ie):null,data:Yc(ae,m)},m)}:ie=>{d=!0};let z=null;const F=ll(a.data);if(this.parent[a.type])z=this.parent[a.type](a.sourceMapId,F,M);else if(this.parent.getWorkerSource){const ie=a.type.split(".");z=this.parent.getWorkerSource(a.sourceMapId,ie[0],F.source)[ie[1]](F,M)}else M(new Error(`Could not find function ${a.type}`));!d&&z&&z.cancel&&(this.cancelCallbacks[c]=z.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},r.AlphaImage=op,r.CanonicalTileID=v0,r.CollisionBoxArray=St,r.CollisionCircleLayoutArray=class extends Se{},r.Color=Ve,r.DEMData=vw,r.DataConstantProperty=Ei,r.DictionaryCoder=_w,r.EXTENT=Gr,r.ErrorEvent=Me,r.EvaluationParameters=lr,r.Event=ge,r.Evented=De,r.FeatureIndex=Tw,r.FillBucket=n0,r.FillExtrusionBucket=s0,r.GeoJSONFeature=ww,r.ImageAtlas=W_,r.ImagePosition=c0,r.LineBucket=a0,r.LineStripIndexArray=class extends wt{},r.LngLat=_r,r.LngLatBounds=au,r.MercatorCoordinate=rg,r.ONE_EM=ls,r.OverscaledTileID=Na,r.PerformanceUtils=YM,r.PosArray=un,r.Properties=Vr,r.QuadTriangleArray=class extends Ue{},r.RGBAImage=za,r.RasterBoundsArray=class extends eu{},r.RequestPerformance=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},r.ResourceType=we,r.SegmentVector=An,r.SymbolBucket=Md,r.Transitionable=tp,r.TriangleIndexArray=os,r.Uniform1f=bd,r.Uniform1i=class extends La{constructor(c,a){super(c,a),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},r.Uniform2f=class extends La{constructor(c,a){super(c,a),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},r.Uniform3f=class extends La{constructor(c,a){super(c,a),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},r.Uniform4f=tu,r.UniformColor=vd,r.UniformMatrix4f=class extends La{constructor(c,a){super(c,a),this.current=gA}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let a=1;a<16;a++)if(c[a]!==this.current[a]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},r.UnwrappedTileID=bw,r.ValidationError=Fe,r.ZoomHistory=Zc,r.add=function(c,a,d){return c[0]=a[0]+d[0],c[1]=a[1]+d[1],c[2]=a[2]+d[2],c},r.addDynamicAttributes=f0,r.asyncAll=function(c,a,d){if(!c.length)return d(null,[]);let m=c.length;const M=new Array(c.length);let z=null;c.forEach((F,ie)=>{a(F,(ae,_e)=>{ae&&(z=ae),M[ie]=_e,--m==0&&d(z,M)})})},r.bezier=g,r.bindAll=S,r.cacheEntryPossiblyAdded=function(c){le++,le>pe&&(c.getActor().send("enforceCacheSizeLimit",se),le=0)},r.clamp=y,r.clearTileCache=function(c){const a=caches.delete(H);c&&a.catch(c).then(()=>c())},r.clipLine=sw,r.clone=function(c){var a=new Hs(16);return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15],a},r.clone$1=A,r.clone$2=function(c){var a=new Hs(3);return a[0]=c[0],a[1]=c[1],a[2]=c[2],a},r.collisionCircleLayout=hM,r.config=B,r.copy=function(c,a){return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c},r.create=function(){var c=new Hs(16);return Hs!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},r.create$1=y_,r.createExpression=$c,r.createFilter=Hh,r.createLayout=Or,r.createStyleLayer=function(c){return c.type==="custom"?new GM(c):new HM[c.type](c)},r.cross=function(c,a,d){var m=a[0],M=a[1],z=a[2],F=d[0],ie=d[1],ae=d[2];return c[0]=M*ae-z*ie,c[1]=z*F-m*ae,c[2]=m*ie-M*F,c},r.dot=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]},r.dot$1=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3]},r.ease=b,r.emitValidationErrors=Im,r.enforceCacheSizeLimit=function(c){ne(),q&&q.then(a=>{a.keys().then(d=>{for(let m=0;m<d.length-c;m++)a.delete(d[m])})})},r.equals=function(c,a){var d=c[0],m=c[1],M=c[2],z=c[3],F=c[4],ie=c[5],ae=c[6],_e=c[7],Re=c[8],je=c[9],Ge=c[10],Ye=c[11],Ze=c[12],ut=c[13],lt=c[14],vt=c[15],Dt=a[0],xt=a[1],Pt=a[2],$t=a[3],Bt=a[4],xi=a[5],Ci=a[6],ii=a[7],Kt=a[8],Zt=a[9],ni=a[10],ei=a[11],Vt=a[12],Mi=a[13],ki=a[14],dn=a[15];return Math.abs(d-Dt)<=Gs*Math.max(1,Math.abs(d),Math.abs(Dt))&&Math.abs(m-xt)<=Gs*Math.max(1,Math.abs(m),Math.abs(xt))&&Math.abs(M-Pt)<=Gs*Math.max(1,Math.abs(M),Math.abs(Pt))&&Math.abs(z-$t)<=Gs*Math.max(1,Math.abs(z),Math.abs($t))&&Math.abs(F-Bt)<=Gs*Math.max(1,Math.abs(F),Math.abs(Bt))&&Math.abs(ie-xi)<=Gs*Math.max(1,Math.abs(ie),Math.abs(xi))&&Math.abs(ae-Ci)<=Gs*Math.max(1,Math.abs(ae),Math.abs(Ci))&&Math.abs(_e-ii)<=Gs*Math.max(1,Math.abs(_e),Math.abs(ii))&&Math.abs(Re-Kt)<=Gs*Math.max(1,Math.abs(Re),Math.abs(Kt))&&Math.abs(je-Zt)<=Gs*Math.max(1,Math.abs(je),Math.abs(Zt))&&Math.abs(Ge-ni)<=Gs*Math.max(1,Math.abs(Ge),Math.abs(ni))&&Math.abs(Ye-ei)<=Gs*Math.max(1,Math.abs(Ye),Math.abs(ei))&&Math.abs(Ze-Vt)<=Gs*Math.max(1,Math.abs(Ze),Math.abs(Vt))&&Math.abs(ut-Mi)<=Gs*Math.max(1,Math.abs(ut),Math.abs(Mi))&&Math.abs(lt-ki)<=Gs*Math.max(1,Math.abs(lt),Math.abs(ki))&&Math.abs(vt-dn)<=Gs*Math.max(1,Math.abs(vt),Math.abs(dn))},r.evaluateSizeForFeature=function(c,{uSize:a,uSizeT:d},{lowerSize:m,upperSize:M}){return c.kind==="source"?m/fl:c.kind==="composite"?pr(m/fl,M/fl,d):a},r.evaluateSizeForZoom=function(c,a){let d=0,m=0;if(c.kind==="constant")m=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:M,minZoom:z,maxZoom:F}=c,ie=M?y(Js.interpolationFactor(M,a,z,F),0,1):0;c.kind==="camera"?m=pr(c.minSize,c.maxSize,ie):d=ie}return{uSizeT:d,uSize:m}},r.evaluateVariableOffset=lw,r.evented=Gl,r.exported=R,r.exported$1=ke,r.extend=v,r.filterObject=x,r.fromRotation=function(c,a){var d=Math.sin(a),m=Math.cos(a);return c[0]=m,c[1]=d,c[2]=0,c[3]=-d,c[4]=m,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},r.fromScaling=function(c,a){return c[0]=a[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=a[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=a[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},r.getAnchorAlignment=d0,r.getAnchorJustification=p0,r.getArrayBuffer=Te,r.getImage=He,r.getJSON=function(c,a){return xe(v(c,{type:"json"}),a)},r.getOverlapMode=x0,r.getRTLTextPluginStatus=ep,r.getReferrer=re,r.getVideo=function(c,a){const d=window.document.createElement("video");d.muted=!0,d.onloadstart=function(){a(null,d)};for(let m=0;m<c.length;m++){const M=window.document.createElement("source");ze(c[m])||(d.crossOrigin="Anonymous"),M.src=c[m],d.appendChild(M)}return{cancel:()=>{}}},r.identity=Yx,r.invert=function(c,a){var d=a[0],m=a[1],M=a[2],z=a[3],F=a[4],ie=a[5],ae=a[6],_e=a[7],Re=a[8],je=a[9],Ge=a[10],Ye=a[11],Ze=a[12],ut=a[13],lt=a[14],vt=a[15],Dt=d*ie-m*F,xt=d*ae-M*F,Pt=d*_e-z*F,$t=m*ae-M*ie,Bt=m*_e-z*ie,xi=M*_e-z*ae,Ci=Re*ut-je*Ze,ii=Re*lt-Ge*Ze,Kt=Re*vt-Ye*Ze,Zt=je*lt-Ge*ut,ni=je*vt-Ye*ut,ei=Ge*vt-Ye*lt,Vt=Dt*ei-xt*ni+Pt*Zt+$t*Kt-Bt*ii+xi*Ci;return Vt?(c[0]=(ie*ei-ae*ni+_e*Zt)*(Vt=1/Vt),c[1]=(M*ni-m*ei-z*Zt)*Vt,c[2]=(ut*xi-lt*Bt+vt*$t)*Vt,c[3]=(Ge*Bt-je*xi-Ye*$t)*Vt,c[4]=(ae*Kt-F*ei-_e*ii)*Vt,c[5]=(d*ei-M*Kt+z*ii)*Vt,c[6]=(lt*Pt-Ze*xi-vt*xt)*Vt,c[7]=(Re*xi-Ge*Pt+Ye*xt)*Vt,c[8]=(F*ni-ie*Kt+_e*Ci)*Vt,c[9]=(m*Kt-d*ni-z*Ci)*Vt,c[10]=(Ze*Bt-ut*Pt+vt*Dt)*Vt,c[11]=(je*Pt-Re*Bt-Ye*Dt)*Vt,c[12]=(ie*ii-F*Zt-ae*Ci)*Vt,c[13]=(d*Zt-m*ii+M*Ci)*Vt,c[14]=(ut*xt-Ze*$t-lt*Dt)*Vt,c[15]=(Re*$t-je*xt+Ge*Dt)*Vt,c):null},r.isImageBitmap=L,r.isSafari=$,r.isWorker=W,r.keysDifference=function(c,a){const d=[];for(const m in c)m in a||d.push(m);return d},r.lazyLoadRTLTextPlugin=function(){va.isLoading()||va.isLoaded()||ep()!=="deferred"||hd()},r.makeRequest=xe,r.mapObject=E,r.mercatorXfromLng=mw,r.mercatorYfromLat=gw,r.mercatorZfromAltitude=yw,r.mul=CA,r.mul$1=function(c,a,d){return c[0]=a[0]*d[0],c[1]=a[1]*d[1],c[2]=a[2]*d[2],c[3]=a[3]*d[3],c},r.multiply=x_,r.nextPowerOfTwo=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},r.normalize=function(c,a){var d=a[0],m=a[1],M=a[2],z=d*d+m*m+M*M;return z>0&&(z=1/Math.sqrt(z)),c[0]=a[0]*z,c[1]=a[1]*z,c[2]=a[2]*z,c},r.number=pr,r.ortho=function(c,a,d,m,M,z,F){var ie=1/(a-d),ae=1/(m-M),_e=1/(z-F);return c[0]=-2*ie,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*ae,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*_e,c[11]=0,c[12]=(a+d)*ie,c[13]=(M+m)*ae,c[14]=(F+z)*_e,c[15]=1,c},r.parseCacheControl=Y,r.parseGlyphPbf=function(c){return new o0(c).readFields(TM,[])},r.pbf=o0,r.performSymbolLayout=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=Gr/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const a=c.bucket.layers[0].layout,d=c.bucket.layers[0]._unevaluatedLayout._values,m={layoutIconSize:d["icon-size"].possiblyEvaluate(new lr(c.bucket.zoom+1),c.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new lr(c.bucket.zoom+1),c.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new lr(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:ae,maxZoom:_e}=c.bucket.textSizeData;m.compositeTextSizes=[d["text-size"].possiblyEvaluate(new lr(ae),c.canonical),d["text-size"].possiblyEvaluate(new lr(_e),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:ae,maxZoom:_e}=c.bucket.iconSizeData;m.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new lr(ae),c.canonical),d["icon-size"].possiblyEvaluate(new lr(_e),c.canonical)]}const M=a.get("text-line-height")*ls,z=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",F=a.get("text-keep-upright"),ie=a.get("text-size");for(const ae of c.bucket.features){const _e=a.get("text-font").evaluate(ae,{},c.canonical).join(","),Re=ie.evaluate(ae,{},c.canonical),je=m.layoutTextSize.evaluate(ae,{},c.canonical),Ge=m.layoutIconSize.evaluate(ae,{},c.canonical),Ye={horizontal:{},vertical:void 0},Ze=ae.text;let ut,lt=[0,0];if(Ze){const xt=Ze.toString(),Pt=a.get("text-letter-spacing").evaluate(ae,{},c.canonical)*ls,$t=Dm(xt)?Pt:0,Bt=a.get("text-anchor").evaluate(ae,{},c.canonical),xi=a.get("text-variable-anchor");if(!xi){const ni=a.get("text-radial-offset").evaluate(ae,{},c.canonical);lt=ni?lw(Bt,[ni*ls,h0]):a.get("text-offset").evaluate(ae,{},c.canonical).map(ei=>ei*ls)}let Ci=z?"center":a.get("text-justify").evaluate(ae,{},c.canonical);const ii=a.get("symbol-placement"),Kt=ii==="point"?a.get("text-max-width").evaluate(ae,{},c.canonical)*ls:0,Zt=()=>{c.bucket.allowVerticalPlacement&&Zh(xt)&&(Ye.vertical=Xm(Ze,c.glyphMap,c.glyphPositions,c.imagePositions,_e,Kt,M,Bt,"left",$t,lt,r.WritingMode.vertical,!0,ii,je,Re))};if(!z&&xi){const ni=Ci==="auto"?xi.map(Vt=>p0(Vt)):[Ci];let ei=!1;for(let Vt=0;Vt<ni.length;Vt++){const Mi=ni[Vt];if(!Ye.horizontal[Mi])if(ei)Ye.horizontal[Mi]=Ye.horizontal[0];else{const ki=Xm(Ze,c.glyphMap,c.glyphPositions,c.imagePositions,_e,Kt,M,"center",Mi,$t,lt,r.WritingMode.horizontal,!1,ii,je,Re);ki&&(Ye.horizontal[Mi]=ki,ei=ki.positionedLines.length===1)}}Zt()}else{Ci==="auto"&&(Ci=p0(Bt));const ni=Xm(Ze,c.glyphMap,c.glyphPositions,c.imagePositions,_e,Kt,M,Bt,Ci,$t,lt,r.WritingMode.horizontal,!1,ii,je,Re);ni&&(Ye.horizontal[Ci]=ni),Zt(),Zh(xt)&&z&&F&&(Ye.vertical=Xm(Ze,c.glyphMap,c.glyphPositions,c.imagePositions,_e,Kt,M,Bt,Ci,$t,lt,r.WritingMode.vertical,!1,ii,je,Re))}}let vt=!1;if(ae.icon&&ae.icon.name){const xt=c.imageMap[ae.icon.name];xt&&(ut=MM(c.imagePositions[ae.icon.name],a.get("icon-offset").evaluate(ae,{},c.canonical),a.get("icon-anchor").evaluate(ae,{},c.canonical)),vt=!!xt.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=vt:c.bucket.sdfIcons!==vt&&C("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xt.pixelRatio!==c.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Dt=uw(Ye.horizontal)||Ye.vertical;c.bucket.iconsInText=!!Dt&&Dt.iconsInText,(Dt||ut)&&NM(c.bucket,ae,Ye,ut,c.imageMap,m,je,Ge,lt,vt,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},r.perspective=function(c,a,d,m,M){var z,F=1/Math.tan(a/2);return c[0]=F/d,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=F,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,M!=null&&M!==1/0?(c[10]=(M+m)*(z=1/(m-M)),c[14]=2*M*m*z):(c[10]=-1,c[14]=-2*m),c},r.pick=function(c,a){const d={};for(let m=0;m<a.length;m++){const M=a[m];M in c&&(d[M]=c[M])}return d},r.plugin=va,r.pointGeometry=G,r.polygonIntersectsPolygon=p_,r.potpack=q_,r.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.register=fi,r.registerForPluginStateChange=function(c){return c({pluginStatus:$s,pluginURL:Do}),Gl.on("pluginStateChange",c),c},r.renderColorRamp=S_,r.rotateX=function(c,a,d){var m=Math.sin(d),M=Math.cos(d),z=a[4],F=a[5],ie=a[6],ae=a[7],_e=a[8],Re=a[9],je=a[10],Ge=a[11];return a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[4]=z*M+_e*m,c[5]=F*M+Re*m,c[6]=ie*M+je*m,c[7]=ae*M+Ge*m,c[8]=_e*M-z*m,c[9]=Re*M-F*m,c[10]=je*M-ie*m,c[11]=Ge*M-ae*m,c},r.rotateZ=function(c,a,d){var m=Math.sin(d),M=Math.cos(d),z=a[0],F=a[1],ie=a[2],ae=a[3],_e=a[4],Re=a[5],je=a[6],Ge=a[7];return a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[0]=z*M+_e*m,c[1]=F*M+Re*m,c[2]=ie*M+je*m,c[3]=ae*M+Ge*m,c[4]=_e*M-z*m,c[5]=Re*M-F*m,c[6]=je*M-ie*m,c[7]=Ge*M-ae*m,c},r.scale=function(c,a,d){var m=d[0],M=d[1],z=d[2];return c[0]=a[0]*m,c[1]=a[1]*m,c[2]=a[2]*m,c[3]=a[3]*m,c[4]=a[4]*M,c[5]=a[5]*M,c[6]=a[6]*M,c[7]=a[7]*M,c[8]=a[8]*z,c[9]=a[9]*z,c[10]=a[10]*z,c[11]=a[11]*z,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c},r.scale$1=function(c,a,d){return c[0]=a[0]*d,c[1]=a[1]*d,c[2]=a[2]*d,c},r.setCacheLimits=function(c,a){se=c,pe=a},r.setRTLTextPlugin=function(c,a,d=!1){if($s===dd||$s===Xh||$s===Kh)throw new Error("setRTLTextPlugin cannot be called multiple times.");Do=R.resolveURL(c),$s=dd,Qh=a,Jh(),d||hd()},r.spec=Pe,r.sphericalToCartesian=function([c,a,d]){return a+=90,a*=Math.PI/180,d*=Math.PI/180,{x:c*Math.cos(a)*Math.sin(d),y:c*Math.sin(a)*Math.sin(d),z:c*Math.cos(d)}},r.sqrLen=function(c){var a=c[0],d=c[1];return a*a+d*d},r.sub=function(c,a,d){return c[0]=a[0]-d[0],c[1]=a[1]-d[1],c[2]=a[2]-d[2],c},r.toEvaluationFeature=ru,r.transformMat3=function(c,a,d){var m=a[0],M=a[1],z=a[2];return c[0]=m*d[0]+M*d[3]+z*d[6],c[1]=m*d[1]+M*d[4]+z*d[7],c[2]=m*d[2]+M*d[5]+z*d[8],c},r.transformMat4=Um,r.transformMat4$1=function(c,a,d){var m=a[0],M=a[1];return c[0]=d[0]*m+d[4]*M+d[12],c[1]=d[1]*m+d[5]*M+d[13],c},r.translate=function(c,a,d){var m,M,z,F,ie,ae,_e,Re,je,Ge,Ye,Ze,ut=d[0],lt=d[1],vt=d[2];return a===c?(c[12]=a[0]*ut+a[4]*lt+a[8]*vt+a[12],c[13]=a[1]*ut+a[5]*lt+a[9]*vt+a[13],c[14]=a[2]*ut+a[6]*lt+a[10]*vt+a[14],c[15]=a[3]*ut+a[7]*lt+a[11]*vt+a[15]):(M=a[1],z=a[2],F=a[3],ie=a[4],ae=a[5],_e=a[6],Re=a[7],je=a[8],Ge=a[9],Ye=a[10],Ze=a[11],c[0]=m=a[0],c[1]=M,c[2]=z,c[3]=F,c[4]=ie,c[5]=ae,c[6]=_e,c[7]=Re,c[8]=je,c[9]=Ge,c[10]=Ye,c[11]=Ze,c[12]=m*ut+ie*lt+je*vt+a[12],c[13]=M*ut+ae*lt+Ge*vt+a[13],c[14]=z*ut+_e*lt+Ye*vt+a[14],c[15]=F*ut+Re*lt+Ze*vt+a[15]),c},r.triggerPluginCompletionEvent=zm,r.unicodeBlockLookup=ti,r.uniqueId=function(){return T++},r.validateCustomStyleLayer=function(c){const a=[],d=c.id;return d===void 0&&a.push({message:`layers.${d}: missing required property "id"`}),c.render===void 0&&a.push({message:`layers.${d}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&a.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),a},r.validateLight=Nx,r.validateStyle=al,r.vectorTile=Zl,r.warnOnce=C,r.wrap=w}),l(["./shared"],function(r){function p(qe){const ve=typeof qe;if(ve==="number"||ve==="boolean"||ve==="string"||qe==null)return JSON.stringify(qe);if(Array.isArray(qe)){let Ke="[";for(const st of qe)Ke+=`${p(st)},`;return`${Ke}]`}const Le=Object.keys(qe).sort();let Ve="{";for(let Ke=0;Ke<Le.length;Ke++)Ve+=`${JSON.stringify(Le[Ke])}:${p(qe[Le[Ke]])},`;return`${Ve}}`}function f(qe){let ve="";for(const Le of r.refProperties)ve+=`/${p(qe[Le])}`;return ve}class g{constructor(ve){this.keyCache={},ve&&this.replace(ve)}replace(ve){this._layerConfigs={},this._layers={},this.update(ve,[])}update(ve,Le){for(const Ke of ve){this._layerConfigs[Ke.id]=Ke;const st=this._layers[Ke.id]=r.createStyleLayer(Ke);st._featureFilter=r.createFilter(st.filter),this.keyCache[Ke.id]&&delete this.keyCache[Ke.id]}for(const Ke of Le)delete this.keyCache[Ke],delete this._layerConfigs[Ke],delete this._layers[Ke];this.familiesBySource={};const Ve=function(Ke,st){const ct={};for(let rt=0;rt<Ke.length;rt++){const mt=st&&st[Ke[rt].id]||f(Ke[rt]);st&&(st[Ke[rt].id]=mt);let At=ct[mt];At||(At=ct[mt]=[]),At.push(Ke[rt])}const ot=[];for(const rt in ct)ot.push(ct[rt]);return ot}(Object.values(this._layerConfigs),this.keyCache);for(const Ke of Ve){const st=Ke.map(Nt=>this._layers[Nt.id]),ct=st[0];if(ct.visibility==="none")continue;const ot=ct.source||"";let rt=this.familiesBySource[ot];rt||(rt=this.familiesBySource[ot]={});const mt=ct.sourceLayer||"_geojsonTileLayer";let At=rt[mt];At||(At=rt[mt]=[]),At.push(st)}}}class b{constructor(ve){const Le={},Ve=[];for(const ot in ve){const rt=ve[ot],mt=Le[ot]={};for(const At in rt){const Nt=rt[+At];if(!Nt||Nt.bitmap.width===0||Nt.bitmap.height===0)continue;const Rt={x:0,y:0,w:Nt.bitmap.width+2,h:Nt.bitmap.height+2};Ve.push(Rt),mt[At]={rect:Rt,metrics:Nt.metrics}}}const{w:Ke,h:st}=r.potpack(Ve),ct=new r.AlphaImage({width:Ke||1,height:st||1});for(const ot in ve){const rt=ve[ot];for(const mt in rt){const At=rt[+mt];if(!At||At.bitmap.width===0||At.bitmap.height===0)continue;const Nt=Le[ot][mt].rect;r.AlphaImage.copy(At.bitmap,ct,{x:0,y:0},{x:Nt.x+1,y:Nt.y+1},At.bitmap)}}this.image=ct,this.positions=Le}}r.register("GlyphAtlas",b);class y{constructor(ve){this.tileID=new r.OverscaledTileID(ve.tileID.overscaledZ,ve.tileID.wrap,ve.tileID.canonical.z,ve.tileID.canonical.x,ve.tileID.canonical.y),this.uid=ve.uid,this.zoom=ve.zoom,this.pixelRatio=ve.pixelRatio,this.tileSize=ve.tileSize,this.source=ve.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ve.showCollisionBoxes,this.collectResourceTiming=!!ve.collectResourceTiming,this.returnDependencies=!!ve.returnDependencies,this.promoteId=ve.promoteId}parse(ve,Le,Ve,Ke,st){this.status="parsing",this.data=ve,this.collisionBoxArray=new r.CollisionBoxArray;const ct=new r.DictionaryCoder(Object.keys(ve.layers).sort()),ot=new r.FeatureIndex(this.tileID,this.promoteId);ot.bucketLayerIDs=[];const rt={},mt={featureIndex:ot,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ve},At=Le.familiesBySource[this.source];for(const Pi in At){const Ui=ve.layers[Pi];if(!Ui)continue;Ui.version===1&&r.warnOnce(`Vector tile source "${this.source}" layer "${Pi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ji=ct.encode(Pi),pn=[];for(let Hn=0;Hn<Ui.length;Hn++){const br=Ui.feature(Hn),Ur=ot.getId(br,Pi);pn.push({feature:br,id:Ur,index:Hn,sourceLayerIndex:ji})}for(const Hn of At[Pi]){const br=Hn[0];br.source!==this.source&&r.warnOnce(`layer.source = ${br.source} does not equal this.source = ${this.source}`),br.minzoom&&this.zoom<Math.floor(br.minzoom)||br.maxzoom&&this.zoom>=br.maxzoom||br.visibility!=="none"&&(w(Hn,this.zoom,Ve),(rt[br.id]=br.createBucket({index:ot.bucketLayerIDs.length,layers:Hn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ji,sourceID:this.source})).populate(pn,mt,this.tileID.canonical),ot.bucketLayerIDs.push(Hn.map(Ur=>Ur.id)))}}let Nt,Rt,oi,Qt;const pi=r.mapObject(mt.glyphDependencies,Pi=>Object.keys(Pi).map(Number));Object.keys(pi).length?Ke.send("getGlyphs",{uid:this.uid,stacks:pi},(Pi,Ui)=>{Nt||(Nt=Pi,Rt=Ui,_i.call(this))}):Rt={};const vi=Object.keys(mt.iconDependencies);vi.length?Ke.send("getImages",{icons:vi,source:this.source,tileID:this.tileID,type:"icons"},(Pi,Ui)=>{Nt||(Nt=Pi,oi=Ui,_i.call(this))}):oi={};const $i=Object.keys(mt.patternDependencies);function _i(){if(Nt)return st(Nt);if(Rt&&oi&&Qt){const Pi=new b(Rt),Ui=new r.ImageAtlas(oi,Qt);for(const ji in rt){const pn=rt[ji];pn instanceof r.SymbolBucket?(w(pn.layers,this.zoom,Ve),r.performSymbolLayout({bucket:pn,glyphMap:Rt,glyphPositions:Pi.positions,imageMap:oi,imagePositions:Ui.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):pn.hasPattern&&(pn instanceof r.LineBucket||pn instanceof r.FillBucket||pn instanceof r.FillExtrusionBucket)&&(w(pn.layers,this.zoom,Ve),pn.addFeatures(mt,this.tileID.canonical,Ui.patternPositions))}this.status="done",st(null,{buckets:Object.values(rt).filter(ji=>!ji.isEmpty()),featureIndex:ot,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Pi.image,imageAtlas:Ui,glyphMap:this.returnDependencies?Rt:null,iconMap:this.returnDependencies?oi:null,glyphPositions:this.returnDependencies?Pi.positions:null})}}$i.length?Ke.send("getImages",{icons:$i,source:this.source,tileID:this.tileID,type:"patterns"},(Pi,Ui)=>{Nt||(Nt=Pi,Qt=Ui,_i.call(this))}):Qt={},_i.call(this)}}function w(qe,ve,Le){const Ve=new r.EvaluationParameters(ve);for(const Ke of qe)Ke.recalculate(Ve,Le)}function v(qe,ve){const Le=r.getArrayBuffer(qe.request,(Ve,Ke,st,ct)=>{Ve?ve(Ve):Ke&&ve(null,{vectorTile:new r.vectorTile.VectorTile(new r.pbf(Ke)),rawData:Ke,cacheControl:st,expires:ct})});return()=>{Le.cancel(),ve()}}class T{constructor(ve,Le,Ve,Ke){this.actor=ve,this.layerIndex=Le,this.availableImages=Ve,this.loadVectorData=Ke||v,this.loading={},this.loaded={}}loadTile(ve,Le){const Ve=ve.uid;this.loading||(this.loading={});const Ke=!!(ve&&ve.request&&ve.request.collectResourceTiming)&&new r.RequestPerformance(ve.request),st=this.loading[Ve]=new y(ve);st.abort=this.loadVectorData(ve,(ct,ot)=>{if(delete this.loading[Ve],ct||!ot)return st.status="done",this.loaded[Ve]=st,Le(ct);const rt=ot.rawData,mt={};ot.expires&&(mt.expires=ot.expires),ot.cacheControl&&(mt.cacheControl=ot.cacheControl);const At={};if(Ke){const Nt=Ke.finish();Nt&&(At.resourceTiming=JSON.parse(JSON.stringify(Nt)))}st.vectorTile=ot.vectorTile,st.parse(ot.vectorTile,this.layerIndex,this.availableImages,this.actor,(Nt,Rt)=>{if(Nt||!Rt)return Le(Nt);Le(null,r.extend({rawTileData:rt.slice(0)},Rt,mt,At))}),this.loaded=this.loaded||{},this.loaded[Ve]=st})}reloadTile(ve,Le){const Ve=this.loaded,Ke=ve.uid,st=this;if(Ve&&Ve[Ke]){const ct=Ve[Ke];ct.showCollisionBoxes=ve.showCollisionBoxes;const ot=(rt,mt)=>{const At=ct.reloadCallback;At&&(delete ct.reloadCallback,ct.parse(ct.vectorTile,st.layerIndex,this.availableImages,st.actor,At)),Le(rt,mt)};ct.status==="parsing"?ct.reloadCallback=ot:ct.status==="done"&&(ct.vectorTile?ct.parse(ct.vectorTile,this.layerIndex,this.availableImages,this.actor,ot):ot())}}abortTile(ve,Le){const Ve=this.loading,Ke=ve.uid;Ve&&Ve[Ke]&&Ve[Ke].abort&&(Ve[Ke].abort(),delete Ve[Ke]),Le()}removeTile(ve,Le){const Ve=this.loaded,Ke=ve.uid;Ve&&Ve[Ke]&&delete Ve[Ke],Le()}}class S{constructor(){this.loaded={}}loadTile(ve,Le){const{uid:Ve,encoding:Ke,rawImageData:st}=ve,ct=r.isImageBitmap(st)?this.getImageData(st):st,ot=new r.DEMData(Ve,ct,Ke);this.loaded=this.loaded||{},this.loaded[Ve]=ot,Le(null,ot)}getImageData(ve){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ve.width,ve.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ve.width,this.offscreenCanvas.height=ve.height,this.offscreenCanvasContext.drawImage(ve,0,0,ve.width,ve.height);const Le=this.offscreenCanvasContext.getImageData(-1,-1,ve.width+2,ve.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new r.RGBAImage({width:Le.width,height:Le.height},Le.data)}removeTile(ve){const Le=this.loaded,Ve=ve.uid;Le&&Le[Ve]&&delete Le[Ve]}}var E=function qe(ve,Le){var Ve,Ke=ve&&ve.type;if(Ke==="FeatureCollection")for(Ve=0;Ve<ve.features.length;Ve++)qe(ve.features[Ve],Le);else if(Ke==="GeometryCollection")for(Ve=0;Ve<ve.geometries.length;Ve++)qe(ve.geometries[Ve],Le);else if(Ke==="Feature")qe(ve.geometry,Le);else if(Ke==="Polygon")x(ve.coordinates,Le);else if(Ke==="MultiPolygon")for(Ve=0;Ve<ve.coordinates.length;Ve++)x(ve.coordinates[Ve],Le);return ve};function x(qe,ve){if(qe.length!==0){A(qe[0],ve);for(var Le=1;Le<qe.length;Le++)A(qe[Le],!1)}}function A(qe,ve){for(var Le=0,Ve=0,Ke=0,st=qe.length,ct=st-1;Ke<st;ct=Ke++){var ot=(qe[Ke][0]-qe[ct][0])*(qe[ct][1]+qe[Ke][1]),rt=Le+ot;Ve+=Math.abs(Le)>=Math.abs(ot)?Le-rt+ot:ot-rt+Le,Le=rt}Le+Ve>=0!=!!ve&&qe.reverse()}const D=r.vectorTile.VectorTileFeature.prototype.toGeoJSON;class C{constructor(ve){this._feature=ve,this.extent=r.EXTENT,this.type=ve.type,this.properties=ve.tags,"id"in ve&&!isNaN(ve.id)&&(this.id=parseInt(ve.id,10))}loadGeometry(){if(this._feature.type===1){const ve=[];for(const Le of this._feature.geometry)ve.push([new r.pointGeometry(Le[0],Le[1])]);return ve}{const ve=[];for(const Le of this._feature.geometry){const Ve=[];for(const Ke of Le)Ve.push(new r.pointGeometry(Ke[0],Ke[1]));ve.push(Ve)}return ve}}toGeoJSON(ve,Le,Ve){return D.call(this,ve,Le,Ve)}}class I{constructor(ve){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.EXTENT,this.length=ve.length,this._features=ve}feature(ve){return new C(this._features[ve])}}var N={exports:{}},W=r.pointGeometry,Y=r.vectorTile.VectorTileFeature,X=O;function O(qe,ve){this.options=ve||{},this.features=qe,this.length=qe.length}function V(qe,ve){this.id=typeof qe.id=="number"?qe.id:void 0,this.type=qe.type,this.rawGeometry=qe.type===1?[qe.geometry]:qe.geometry,this.properties=qe.tags,this.extent=ve||4096}O.prototype.feature=function(qe){return new V(this.features[qe],this.options.extent)},V.prototype.loadGeometry=function(){var qe=this.rawGeometry;this.geometry=[];for(var ve=0;ve<qe.length;ve++){for(var Le=qe[ve],Ve=[],Ke=0;Ke<Le.length;Ke++)Ve.push(new W(Le[Ke][0],Le[Ke][1]));this.geometry.push(Ve)}return this.geometry},V.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var qe=this.geometry,ve=1/0,Le=-1/0,Ve=1/0,Ke=-1/0,st=0;st<qe.length;st++)for(var ct=qe[st],ot=0;ot<ct.length;ot++){var rt=ct[ot];ve=Math.min(ve,rt.x),Le=Math.max(Le,rt.x),Ve=Math.min(Ve,rt.y),Ke=Math.max(Ke,rt.y)}return[ve,Ve,Le,Ke]},V.prototype.toGeoJSON=Y.prototype.toGeoJSON;var $=r.pbf,L=X;function R(qe){var ve=new $;return function(Le,Ve){for(var Ke in Le.layers)Ve.writeMessage(3,G,Le.layers[Ke])}(qe,ve),ve.finish()}function G(qe,ve){var Le;ve.writeVarintField(15,qe.version||1),ve.writeStringField(1,qe.name||""),ve.writeVarintField(5,qe.extent||4096);var Ve={keys:[],values:[],keycache:{},valuecache:{}};for(Le=0;Le<qe.length;Le++)Ve.feature=qe.feature(Le),ve.writeMessage(2,U,Ve);var Ke=Ve.keys;for(Le=0;Le<Ke.length;Le++)ve.writeStringField(3,Ke[Le]);var st=Ve.values;for(Le=0;Le<st.length;Le++)ve.writeMessage(4,pe,st[Le])}function U(qe,ve){var Le=qe.feature;Le.id!==void 0&&ve.writeVarintField(1,Le.id),ve.writeMessage(2,B,qe),ve.writeVarintField(3,Le.type),ve.writeMessage(4,se,Le)}function B(qe,ve){var Le=qe.feature,Ve=qe.keys,Ke=qe.values,st=qe.keycache,ct=qe.valuecache;for(var ot in Le.properties){var rt=Le.properties[ot],mt=st[ot];if(rt!==null){mt===void 0&&(Ve.push(ot),st[ot]=mt=Ve.length-1),ve.writeVarint(mt);var At=typeof rt;At!=="string"&&At!=="boolean"&&At!=="number"&&(rt=JSON.stringify(rt));var Nt=At+":"+rt,Rt=ct[Nt];Rt===void 0&&(Ke.push(rt),ct[Nt]=Rt=Ke.length-1),ve.writeVarint(Rt)}}}function H(qe,ve){return(ve<<3)+(7&qe)}function q(qe){return qe<<1^qe>>31}function se(qe,ve){for(var Le=qe.loadGeometry(),Ve=qe.type,Ke=0,st=0,ct=Le.length,ot=0;ot<ct;ot++){var rt=Le[ot],mt=1;Ve===1&&(mt=rt.length),ve.writeVarint(H(1,mt));for(var At=Ve===3?rt.length-1:rt.length,Nt=0;Nt<At;Nt++){Nt===1&&Ve!==1&&ve.writeVarint(H(2,At-1));var Rt=rt[Nt].x-Ke,oi=rt[Nt].y-st;ve.writeVarint(q(Rt)),ve.writeVarint(q(oi)),Ke+=Rt,st+=oi}Ve===3&&ve.writeVarint(H(7,1))}}function pe(qe,ve){var Le=typeof qe;Le==="string"?ve.writeStringField(1,qe):Le==="boolean"?ve.writeBooleanField(7,qe):Le==="number"&&(qe%1!=0?ve.writeDoubleField(3,qe):qe<0?ve.writeSVarintField(6,qe):ve.writeVarintField(5,qe))}function ne(qe,ve,Le,Ve,Ke,st){if(Ke-Ve<=Le)return;const ct=Ve+Ke>>1;le(qe,ve,ct,Ve,Ke,st%2),ne(qe,ve,Le,Ve,ct-1,st+1),ne(qe,ve,Le,ct+1,Ke,st+1)}function le(qe,ve,Le,Ve,Ke,st){for(;Ke>Ve;){if(Ke-Ve>600){const mt=Ke-Ve+1,At=Le-Ve+1,Nt=Math.log(mt),Rt=.5*Math.exp(2*Nt/3),oi=.5*Math.sqrt(Nt*Rt*(mt-Rt)/mt)*(At-mt/2<0?-1:1);le(qe,ve,Le,Math.max(Ve,Math.floor(Le-At*Rt/mt+oi)),Math.min(Ke,Math.floor(Le+(mt-At)*Rt/mt+oi)),st)}const ct=ve[2*Le+st];let ot=Ve,rt=Ke;for(ke(qe,ve,Ve,Le),ve[2*Ke+st]>ct&&ke(qe,ve,Ve,Ke);ot<rt;){for(ke(qe,ve,ot,rt),ot++,rt--;ve[2*ot+st]<ct;)ot++;for(;ve[2*rt+st]>ct;)rt--}ve[2*Ve+st]===ct?ke(qe,ve,Ve,rt):(rt++,ke(qe,ve,rt,Ke)),rt<=Le&&(Ve=rt+1),Le<=rt&&(Ke=rt-1)}}function ke(qe,ve,Le,Ve){be(qe,Le,Ve),be(ve,2*Le,2*Ve),be(ve,2*Le+1,2*Ve+1)}function be(qe,ve,Le){const Ve=qe[ve];qe[ve]=qe[Le],qe[Le]=Ve}function Ee(qe,ve,Le,Ve){const Ke=qe-Le,st=ve-Ve;return Ke*Ke+st*st}N.exports=R,N.exports.fromVectorTileJs=R,N.exports.fromGeojsonVt=function(qe,ve){ve=ve||{};var Le={};for(var Ve in qe)Le[Ve]=new L(qe[Ve].features,ve),Le[Ve].name=Ve,Le[Ve].version=ve.version,Le[Ve].extent=ve.extent;return R({layers:Le})},N.exports.GeoJSONWrapper=L;const K=qe=>qe[0],J=qe=>qe[1];class oe{constructor(ve,Le=K,Ve=J,Ke=64,st=Float64Array){this.nodeSize=Ke,this.points=ve;const ct=ve.length<65536?Uint16Array:Uint32Array,ot=this.ids=new ct(ve.length),rt=this.coords=new st(2*ve.length);for(let mt=0;mt<ve.length;mt++)ot[mt]=mt,rt[2*mt]=Le(ve[mt]),rt[2*mt+1]=Ve(ve[mt]);ne(ot,rt,Ke,0,ot.length-1,0)}range(ve,Le,Ve,Ke){return function(st,ct,ot,rt,mt,At,Nt){const Rt=[0,st.length-1,0],oi=[];let Qt,pi;for(;Rt.length;){const vi=Rt.pop(),$i=Rt.pop(),_i=Rt.pop();if($i-_i<=Nt){for(let ji=_i;ji<=$i;ji++)Qt=ct[2*ji],pi=ct[2*ji+1],Qt>=ot&&Qt<=mt&&pi>=rt&&pi<=At&&oi.push(st[ji]);continue}const Pi=Math.floor((_i+$i)/2);Qt=ct[2*Pi],pi=ct[2*Pi+1],Qt>=ot&&Qt<=mt&&pi>=rt&&pi<=At&&oi.push(st[Pi]);const Ui=(vi+1)%2;(vi===0?ot<=Qt:rt<=pi)&&(Rt.push(_i),Rt.push(Pi-1),Rt.push(Ui)),(vi===0?mt>=Qt:At>=pi)&&(Rt.push(Pi+1),Rt.push($i),Rt.push(Ui))}return oi}(this.ids,this.coords,ve,Le,Ve,Ke,this.nodeSize)}within(ve,Le,Ve){return function(Ke,st,ct,ot,rt,mt){const At=[0,Ke.length-1,0],Nt=[],Rt=rt*rt;for(;At.length;){const oi=At.pop(),Qt=At.pop(),pi=At.pop();if(Qt-pi<=mt){for(let Ui=pi;Ui<=Qt;Ui++)Ee(st[2*Ui],st[2*Ui+1],ct,ot)<=Rt&&Nt.push(Ke[Ui]);continue}const vi=Math.floor((pi+Qt)/2),$i=st[2*vi],_i=st[2*vi+1];Ee($i,_i,ct,ot)<=Rt&&Nt.push(Ke[vi]);const Pi=(oi+1)%2;(oi===0?ct-rt<=$i:ot-rt<=_i)&&(At.push(pi),At.push(vi-1),At.push(Pi)),(oi===0?ct+rt>=$i:ot+rt>=_i)&&(At.push(vi+1),At.push(Qt),At.push(Pi))}return Nt}(this.ids,this.coords,ve,Le,Ve,this.nodeSize)}}const we={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:qe=>qe},ee=Math.fround||(re=new Float32Array(1),qe=>(re[0]=+qe,re[0]));var re;class ue{constructor(ve){this.options=Ae(Object.create(we),ve),this.trees=new Array(this.options.maxZoom+1)}load(ve){const{log:Le,minZoom:Ve,maxZoom:Ke,nodeSize:st}=this.options;Le&&console.time("total time");const ct=`prepare ${ve.length} points`;Le&&console.time(ct),this.points=ve;let ot=[];for(let rt=0;rt<ve.length;rt++)ve[rt].geometry&&ot.push(Te(ve[rt],rt));this.trees[Ke+1]=new oe(ot,ye,ge,st,Float32Array),Le&&console.timeEnd(ct);for(let rt=Ke;rt>=Ve;rt--){const mt=+Date.now();ot=this._cluster(ot,rt),this.trees[rt]=new oe(ot,ye,ge,st,Float32Array),Le&&console.log("z%d: %d clusters in %dms",rt,ot.length,+Date.now()-mt)}return Le&&console.timeEnd("total time"),this}getClusters(ve,Le){let Ve=((ve[0]+180)%360+360)%360-180;const Ke=Math.max(-90,Math.min(90,ve[1]));let st=ve[2]===180?180:((ve[2]+180)%360+360)%360-180;const ct=Math.max(-90,Math.min(90,ve[3]));if(ve[2]-ve[0]>=360)Ve=-180,st=180;else if(Ve>st){const At=this.getClusters([Ve,Ke,180,ct],Le),Nt=this.getClusters([-180,Ke,st,ct],Le);return At.concat(Nt)}const ot=this.trees[this._limitZoom(Le)],rt=ot.range(Ie(Ve),Be(ct),Ie(st),Be(Ke)),mt=[];for(const At of rt){const Nt=ot.points[At];mt.push(Nt.numPoints?ze(Nt):this.points[Nt.index])}return mt}getChildren(ve){const Le=this._getOriginId(ve),Ve=this._getOriginZoom(ve),Ke="No cluster with the specified id.",st=this.trees[Ve];if(!st)throw new Error(Ke);const ct=st.points[Le];if(!ct)throw new Error(Ke);const ot=this.options.radius/(this.options.extent*Math.pow(2,Ve-1)),rt=st.within(ct.x,ct.y,ot),mt=[];for(const At of rt){const Nt=st.points[At];Nt.parentId===ve&&mt.push(Nt.numPoints?ze(Nt):this.points[Nt.index])}if(mt.length===0)throw new Error(Ke);return mt}getLeaves(ve,Le,Ve){const Ke=[];return this._appendLeaves(Ke,ve,Le=Le||10,Ve=Ve||0,0),Ke}getTile(ve,Le,Ve){const Ke=this.trees[this._limitZoom(ve)],st=Math.pow(2,ve),{extent:ct,radius:ot}=this.options,rt=ot/ct,mt=(Ve-rt)/st,At=(Ve+1+rt)/st,Nt={features:[]};return this._addTileFeatures(Ke.range((Le-rt)/st,mt,(Le+1+rt)/st,At),Ke.points,Le,Ve,st,Nt),Le===0&&this._addTileFeatures(Ke.range(1-rt/st,mt,1,At),Ke.points,st,Ve,st,Nt),Le===st-1&&this._addTileFeatures(Ke.range(0,mt,rt/st,At),Ke.points,-1,Ve,st,Nt),Nt.features.length?Nt:null}getClusterExpansionZoom(ve){let Le=this._getOriginZoom(ve)-1;for(;Le<=this.options.maxZoom;){const Ve=this.getChildren(ve);if(Le++,Ve.length!==1)break;ve=Ve[0].properties.cluster_id}return Le}_appendLeaves(ve,Le,Ve,Ke,st){const ct=this.getChildren(Le);for(const ot of ct){const rt=ot.properties;if(rt&&rt.cluster?st+rt.point_count<=Ke?st+=rt.point_count:st=this._appendLeaves(ve,rt.cluster_id,Ve,Ke,st):st<Ke?st++:ve.push(ot),ve.length===Ve)break}return st}_addTileFeatures(ve,Le,Ve,Ke,st,ct){for(const ot of ve){const rt=Le[ot],mt=rt.numPoints;let At,Nt,Rt;if(mt)At=Ce(rt),Nt=rt.x,Rt=rt.y;else{const pi=this.points[rt.index];At=pi.properties,Nt=Ie(pi.geometry.coordinates[0]),Rt=Be(pi.geometry.coordinates[1])}const oi={type:1,geometry:[[Math.round(this.options.extent*(Nt*st-Ve)),Math.round(this.options.extent*(Rt*st-Ke))]],tags:At};let Qt;mt?Qt=rt.id:this.options.generateId?Qt=rt.index:this.points[rt.index].id&&(Qt=this.points[rt.index].id),Qt!==void 0&&(oi.id=Qt),ct.features.push(oi)}}_limitZoom(ve){return Math.max(this.options.minZoom,Math.min(Math.floor(+ve),this.options.maxZoom+1))}_cluster(ve,Le){const Ve=[],{radius:Ke,extent:st,reduce:ct,minPoints:ot}=this.options,rt=Ke/(st*Math.pow(2,Le));for(let mt=0;mt<ve.length;mt++){const At=ve[mt];if(At.zoom<=Le)continue;At.zoom=Le;const Nt=this.trees[Le+1],Rt=Nt.within(At.x,At.y,rt),oi=At.numPoints||1;let Qt=oi;for(const pi of Rt){const vi=Nt.points[pi];vi.zoom>Le&&(Qt+=vi.numPoints||1)}if(Qt>oi&&Qt>=ot){let pi=At.x*oi,vi=At.y*oi,$i=ct&&oi>1?this._map(At,!0):null;const _i=(mt<<5)+(Le+1)+this.points.length;for(const Pi of Rt){const Ui=Nt.points[Pi];if(Ui.zoom<=Le)continue;Ui.zoom=Le;const ji=Ui.numPoints||1;pi+=Ui.x*ji,vi+=Ui.y*ji,Ui.parentId=_i,ct&&($i||($i=this._map(At,!0)),ct($i,this._map(Ui)))}At.parentId=_i,Ve.push(xe(pi/Qt,vi/Qt,_i,Qt,$i))}else if(Ve.push(At),Qt>1)for(const pi of Rt){const vi=Nt.points[pi];vi.zoom<=Le||(vi.zoom=Le,Ve.push(vi))}}return Ve}_getOriginId(ve){return ve-this.points.length>>5}_getOriginZoom(ve){return(ve-this.points.length)%32}_map(ve,Le){if(ve.numPoints)return Le?Ae({},ve.properties):ve.properties;const Ve=this.points[ve.index].properties,Ke=this.options.map(Ve);return Le&&Ke===Ve?Ae({},Ke):Ke}}function xe(qe,ve,Le,Ve,Ke){return{x:ee(qe),y:ee(ve),zoom:1/0,id:Le,parentId:-1,numPoints:Ve,properties:Ke}}function Te(qe,ve){const[Le,Ve]=qe.geometry.coordinates;return{x:ee(Ie(Le)),y:ee(Be(Ve)),zoom:1/0,index:ve,parentId:-1}}function ze(qe){return{type:"Feature",id:qe.id,properties:Ce(qe),geometry:{type:"Point",coordinates:[(ve=qe.x,360*(ve-.5)),He(qe.y)]}};var ve}function Ce(qe){const ve=qe.numPoints,Le=ve>=1e4?`${Math.round(ve/1e3)}k`:ve>=1e3?Math.round(ve/100)/10+"k":ve;return Ae(Ae({},qe.properties),{cluster:!0,cluster_id:qe.id,point_count:ve,point_count_abbreviated:Le})}function Ie(qe){return qe/360+.5}function Be(qe){const ve=Math.sin(qe*Math.PI/180),Le=.5-.25*Math.log((1+ve)/(1-ve))/Math.PI;return Le<0?0:Le>1?1:Le}function He(qe){const ve=(180-360*qe)*Math.PI/180;return 360*Math.atan(Math.exp(ve))/Math.PI-90}function Ae(qe,ve){for(const Le in ve)qe[Le]=ve[Le];return qe}function ye(qe){return qe.x}function ge(qe){return qe.y}function Me(qe,ve,Le,Ve){for(var Ke,st=Ve,ct=Le-ve>>1,ot=Le-ve,rt=qe[ve],mt=qe[ve+1],At=qe[Le],Nt=qe[Le+1],Rt=ve+3;Rt<Le;Rt+=3){var oi=De(qe[Rt],qe[Rt+1],rt,mt,At,Nt);if(oi>st)Ke=Rt,st=oi;else if(oi===st){var Qt=Math.abs(Rt-ct);Qt<ot&&(Ke=Rt,ot=Qt)}}st>Ve&&(Ke-ve>3&&Me(qe,ve,Ke,Ve),qe[Ke+2]=st,Le-Ke>3&&Me(qe,Ke,Le,Ve))}function De(qe,ve,Le,Ve,Ke,st){var ct=Ke-Le,ot=st-Ve;if(ct!==0||ot!==0){var rt=((qe-Le)*ct+(ve-Ve)*ot)/(ct*ct+ot*ot);rt>1?(Le=Ke,Ve=st):rt>0&&(Le+=ct*rt,Ve+=ot*rt)}return(ct=qe-Le)*ct+(ot=ve-Ve)*ot}function Pe(qe,ve,Le,Ve){var Ke={id:qe===void 0?null:qe,type:ve,geometry:Le,tags:Ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(st){var ct=st.geometry,ot=st.type;if(ot==="Point"||ot==="MultiPoint"||ot==="LineString")Fe(st,ct);else if(ot==="Polygon"||ot==="MultiLineString")for(var rt=0;rt<ct.length;rt++)Fe(st,ct[rt]);else if(ot==="MultiPolygon")for(rt=0;rt<ct.length;rt++)for(var mt=0;mt<ct[rt].length;mt++)Fe(st,ct[rt][mt])}(Ke),Ke}function Fe(qe,ve){for(var Le=0;Le<ve.length;Le+=3)qe.minX=Math.min(qe.minX,ve[Le]),qe.minY=Math.min(qe.minY,ve[Le+1]),qe.maxX=Math.max(qe.maxX,ve[Le]),qe.maxY=Math.max(qe.maxY,ve[Le+1])}function Xe(qe,ve,Le,Ve){if(ve.geometry){var Ke=ve.geometry.coordinates,st=ve.geometry.type,ct=Math.pow(Le.tolerance/((1<<Le.maxZoom)*Le.extent),2),ot=[],rt=ve.id;if(Le.promoteId?rt=ve.properties[Le.promoteId]:Le.generateId&&(rt=Ve||0),st==="Point")tt(Ke,ot);else if(st==="MultiPoint")for(var mt=0;mt<Ke.length;mt++)tt(Ke[mt],ot);else if(st==="LineString")nt(Ke,ot,ct,!1);else if(st==="MultiLineString"){if(Le.lineMetrics){for(mt=0;mt<Ke.length;mt++)nt(Ke[mt],ot=[],ct,!1),qe.push(Pe(rt,"LineString",ot,ve.properties));return}ht(Ke,ot,ct,!1)}else if(st==="Polygon")ht(Ke,ot,ct,!0);else{if(st!=="MultiPolygon"){if(st==="GeometryCollection"){for(mt=0;mt<ve.geometry.geometries.length;mt++)Xe(qe,{id:rt,geometry:ve.geometry.geometries[mt],properties:ve.properties},Le,Ve);return}throw new Error("Input data is not a valid GeoJSON object.")}for(mt=0;mt<Ke.length;mt++){var At=[];ht(Ke[mt],At,ct,!0),ot.push(At)}}qe.push(Pe(rt,st,ot,ve.properties))}}function tt(qe,ve){ve.push(gt(qe[0])),ve.push(Tt(qe[1])),ve.push(0)}function nt(qe,ve,Le,Ve){for(var Ke,st,ct=0,ot=0;ot<qe.length;ot++){var rt=gt(qe[ot][0]),mt=Tt(qe[ot][1]);ve.push(rt),ve.push(mt),ve.push(0),ot>0&&(ct+=Ve?(Ke*mt-rt*st)/2:Math.sqrt(Math.pow(rt-Ke,2)+Math.pow(mt-st,2))),Ke=rt,st=mt}var At=ve.length-3;ve[2]=1,Me(ve,0,At,Le),ve[At+2]=1,ve.size=Math.abs(ct),ve.start=0,ve.end=ve.size}function ht(qe,ve,Le,Ve){for(var Ke=0;Ke<qe.length;Ke++){var st=[];nt(qe[Ke],st,Le,Ve),ve.push(st)}}function gt(qe){return qe/360+.5}function Tt(qe){var ve=Math.sin(qe*Math.PI/180),Le=.5-.25*Math.log((1+ve)/(1-ve))/Math.PI;return Le<0?0:Le>1?1:Le}function Lt(qe,ve,Le,Ve,Ke,st,ct,ot){if(Ve/=ve,st>=(Le/=ve)&&ct<Ve)return qe;if(ct<Le||st>=Ve)return null;for(var rt=[],mt=0;mt<qe.length;mt++){var At=qe[mt],Nt=At.geometry,Rt=At.type,oi=Ke===0?At.minX:At.minY,Qt=Ke===0?At.maxX:At.maxY;if(oi>=Le&&Qt<Ve)rt.push(At);else if(!(Qt<Le||oi>=Ve)){var pi=[];if(Rt==="Point"||Rt==="MultiPoint")ft(Nt,pi,Le,Ve,Ke);else if(Rt==="LineString")Et(Nt,pi,Le,Ve,Ke,!1,ot.lineMetrics);else if(Rt==="MultiLineString")si(Nt,pi,Le,Ve,Ke,!1);else if(Rt==="Polygon")si(Nt,pi,Le,Ve,Ke,!0);else if(Rt==="MultiPolygon")for(var vi=0;vi<Nt.length;vi++){var $i=[];si(Nt[vi],$i,Le,Ve,Ke,!0),$i.length&&pi.push($i)}if(pi.length){if(ot.lineMetrics&&Rt==="LineString"){for(vi=0;vi<pi.length;vi++)rt.push(Pe(At.id,Rt,pi[vi],At.tags));continue}Rt!=="LineString"&&Rt!=="MultiLineString"||(pi.length===1?(Rt="LineString",pi=pi[0]):Rt="MultiLineString"),Rt!=="Point"&&Rt!=="MultiPoint"||(Rt=pi.length===3?"Point":"MultiPoint"),rt.push(Pe(At.id,Rt,pi,At.tags))}}}return rt.length?rt:null}function ft(qe,ve,Le,Ve,Ke){for(var st=0;st<qe.length;st+=3){var ct=qe[st+Ke];ct>=Le&&ct<=Ve&&(ve.push(qe[st]),ve.push(qe[st+1]),ve.push(qe[st+2]))}}function Et(qe,ve,Le,Ve,Ke,st,ct){for(var ot,rt,mt=Ct(qe),At=Ke===0?qt:cn,Nt=qe.start,Rt=0;Rt<qe.length-3;Rt+=3){var oi=qe[Rt],Qt=qe[Rt+1],pi=qe[Rt+2],vi=qe[Rt+3],$i=qe[Rt+4],_i=Ke===0?oi:Qt,Pi=Ke===0?vi:$i,Ui=!1;ct&&(ot=Math.sqrt(Math.pow(oi-vi,2)+Math.pow(Qt-$i,2))),_i<Le?Pi>Le&&(rt=At(mt,oi,Qt,vi,$i,Le),ct&&(mt.start=Nt+ot*rt)):_i>Ve?Pi<Ve&&(rt=At(mt,oi,Qt,vi,$i,Ve),ct&&(mt.start=Nt+ot*rt)):di(mt,oi,Qt,pi),Pi<Le&&_i>=Le&&(rt=At(mt,oi,Qt,vi,$i,Le),Ui=!0),Pi>Ve&&_i<=Ve&&(rt=At(mt,oi,Qt,vi,$i,Ve),Ui=!0),!st&&Ui&&(ct&&(mt.end=Nt+ot*rt),ve.push(mt),mt=Ct(qe)),ct&&(Nt+=ot)}var ji=qe.length-3;oi=qe[ji],Qt=qe[ji+1],pi=qe[ji+2],(_i=Ke===0?oi:Qt)>=Le&&_i<=Ve&&di(mt,oi,Qt,pi),ji=mt.length-3,st&&ji>=3&&(mt[ji]!==mt[0]||mt[ji+1]!==mt[1])&&di(mt,mt[0],mt[1],mt[2]),mt.length&&ve.push(mt)}function Ct(qe){var ve=[];return ve.size=qe.size,ve.start=qe.start,ve.end=qe.end,ve}function si(qe,ve,Le,Ve,Ke,st){for(var ct=0;ct<qe.length;ct++)Et(qe[ct],ve,Le,Ve,Ke,st,!1)}function di(qe,ve,Le,Ve){qe.push(ve),qe.push(Le),qe.push(Ve)}function qt(qe,ve,Le,Ve,Ke,st){var ct=(st-ve)/(Ve-ve);return qe.push(st),qe.push(Le+(Ke-Le)*ct),qe.push(1),ct}function cn(qe,ve,Le,Ve,Ke,st){var ct=(st-Le)/(Ke-Le);return qe.push(ve+(Ve-ve)*ct),qe.push(st),qe.push(1),ct}function Xi(qe,ve){for(var Le=[],Ve=0;Ve<qe.length;Ve++){var Ke,st=qe[Ve],ct=st.type;if(ct==="Point"||ct==="MultiPoint"||ct==="LineString")Ke=xn(st.geometry,ve);else if(ct==="MultiLineString"||ct==="Polygon"){Ke=[];for(var ot=0;ot<st.geometry.length;ot++)Ke.push(xn(st.geometry[ot],ve))}else if(ct==="MultiPolygon")for(Ke=[],ot=0;ot<st.geometry.length;ot++){for(var rt=[],mt=0;mt<st.geometry[ot].length;mt++)rt.push(xn(st.geometry[ot][mt],ve));Ke.push(rt)}Le.push(Pe(st.id,ct,Ke,st.tags))}return Le}function xn(qe,ve){var Le=[];Le.size=qe.size,qe.start!==void 0&&(Le.start=qe.start,Le.end=qe.end);for(var Ve=0;Ve<qe.length;Ve+=3)Le.push(qe[Ve]+ve,qe[Ve+1],qe[Ve+2]);return Le}function Fn(qe,ve){if(qe.transformed)return qe;var Le,Ve,Ke,st=1<<qe.z,ct=qe.x,ot=qe.y;for(Le=0;Le<qe.features.length;Le++){var rt=qe.features[Le],mt=rt.geometry,At=rt.type;if(rt.geometry=[],At===1)for(Ve=0;Ve<mt.length;Ve+=2)rt.geometry.push(sn(mt[Ve],mt[Ve+1],ve,st,ct,ot));else for(Ve=0;Ve<mt.length;Ve++){var Nt=[];for(Ke=0;Ke<mt[Ve].length;Ke+=2)Nt.push(sn(mt[Ve][Ke],mt[Ve][Ke+1],ve,st,ct,ot));rt.geometry.push(Nt)}}return qe.transformed=!0,qe}function sn(qe,ve,Le,Ve,Ke,st){return[Math.round(Le*(qe*Ve-Ke)),Math.round(Le*(ve*Ve-st))]}function dt(qe,ve,Le,Ve,Ke){for(var st=ve===Ke.maxZoom?0:Ke.tolerance/((1<<ve)*Ke.extent),ct={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Le,y:Ve,z:ve,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ot=0;ot<qe.length;ot++){ct.numFeatures++,bt(ct,qe[ot],st,Ke);var rt=qe[ot].minX,mt=qe[ot].minY,At=qe[ot].maxX,Nt=qe[ot].maxY;rt<ct.minX&&(ct.minX=rt),mt<ct.minY&&(ct.minY=mt),At>ct.maxX&&(ct.maxX=At),Nt>ct.maxY&&(ct.maxY=Nt)}return ct}function bt(qe,ve,Le,Ve){var Ke=ve.geometry,st=ve.type,ct=[];if(st==="Point"||st==="MultiPoint")for(var ot=0;ot<Ke.length;ot+=3)ct.push(Ke[ot]),ct.push(Ke[ot+1]),qe.numPoints++,qe.numSimplified++;else if(st==="LineString")It(ct,Ke,qe,Le,!1,!1);else if(st==="MultiLineString"||st==="Polygon")for(ot=0;ot<Ke.length;ot++)It(ct,Ke[ot],qe,Le,st==="Polygon",ot===0);else if(st==="MultiPolygon")for(var rt=0;rt<Ke.length;rt++){var mt=Ke[rt];for(ot=0;ot<mt.length;ot++)It(ct,mt[ot],qe,Le,!0,ot===0)}if(ct.length){var At=ve.tags||null;if(st==="LineString"&&Ve.lineMetrics){for(var Nt in At={},ve.tags)At[Nt]=ve.tags[Nt];At.mapbox_clip_start=Ke.start/Ke.size,At.mapbox_clip_end=Ke.end/Ke.size}var Rt={geometry:ct,type:st==="Polygon"||st==="MultiPolygon"?3:st==="LineString"||st==="MultiLineString"?2:1,tags:At};ve.id!==null&&(Rt.id=ve.id),qe.features.push(Rt)}}function It(qe,ve,Le,Ve,Ke,st){var ct=Ve*Ve;if(Ve>0&&ve.size<(Ke?ct:Ve))Le.numPoints+=ve.length/3;else{for(var ot=[],rt=0;rt<ve.length;rt+=3)(Ve===0||ve[rt+2]>ct)&&(Le.numSimplified++,ot.push(ve[rt]),ot.push(ve[rt+1])),Le.numPoints++;Ke&&function(mt,At){for(var Nt=0,Rt=0,oi=mt.length,Qt=oi-2;Rt<oi;Qt=Rt,Rt+=2)Nt+=(mt[Rt]-mt[Qt])*(mt[Rt+1]+mt[Qt+1]);if(Nt>0===At)for(Rt=0,oi=mt.length;Rt<oi/2;Rt+=2){var pi=mt[Rt],vi=mt[Rt+1];mt[Rt]=mt[oi-2-Rt],mt[Rt+1]=mt[oi-1-Rt],mt[oi-2-Rt]=pi,mt[oi-1-Rt]=vi}}(ot,st),qe.push(ot)}}function Ft(qe,ve){var Le=(ve=this.options=function(Ke,st){for(var ct in st)Ke[ct]=st[ct];return Ke}(Object.create(this.options),ve)).debug;if(Le&&console.time("preprocess data"),ve.maxZoom<0||ve.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ve.promoteId&&ve.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ve=function(Ke,st){var ct=[];if(Ke.type==="FeatureCollection")for(var ot=0;ot<Ke.features.length;ot++)Xe(ct,Ke.features[ot],st,ot);else Xe(ct,Ke.type==="Feature"?Ke:{geometry:Ke},st);return ct}(qe,ve);this.tiles={},this.tileCoords=[],Le&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ve.indexMaxZoom,ve.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ve=function(Ke,st){var ct=st.buffer/st.extent,ot=Ke,rt=Lt(Ke,1,-1-ct,ct,0,-1,2,st),mt=Lt(Ke,1,1-ct,2+ct,0,-1,2,st);return(rt||mt)&&(ot=Lt(Ke,1,-ct,1+ct,0,-1,2,st)||[],rt&&(ot=Xi(rt,1).concat(ot)),mt&&(ot=ot.concat(Xi(mt,-1)))),ot}(Ve,ve),Ve.length&&this.splitTile(Ve,0,0,0),Le&&(Ve.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Yt(qe,ve,Le){return 32*((1<<qe)*Le+ve)+qe}function bi(qe,ve){const Le=qe.tileID.canonical;if(!this._geoJSONIndex)return ve(null,null);const Ve=this._geoJSONIndex.getTile(Le.z,Le.x,Le.y);if(!Ve)return ve(null,null);const Ke=new I(Ve.features);let st=N.exports(Ke);st.byteOffset===0&&st.byteLength===st.buffer.byteLength||(st=new Uint8Array(st)),ve(null,{vectorTile:Ke,rawData:st.buffer})}Ft.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ft.prototype.splitTile=function(qe,ve,Le,Ve,Ke,st,ct){for(var ot=[qe,ve,Le,Ve],rt=this.options,mt=rt.debug;ot.length;){Ve=ot.pop(),Le=ot.pop(),ve=ot.pop(),qe=ot.pop();var At=1<<ve,Nt=Yt(ve,Le,Ve),Rt=this.tiles[Nt];if(!Rt&&(mt>1&&console.time("creation"),Rt=this.tiles[Nt]=dt(qe,ve,Le,Ve,rt),this.tileCoords.push({z:ve,x:Le,y:Ve}),mt)){mt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ve,Le,Ve,Rt.numFeatures,Rt.numPoints,Rt.numSimplified),console.timeEnd("creation"));var oi="z"+ve;this.stats[oi]=(this.stats[oi]||0)+1,this.total++}if(Rt.source=qe,Ke){if(ve===rt.maxZoom||ve===Ke)continue;var Qt=1<<Ke-ve;if(Le!==Math.floor(st/Qt)||Ve!==Math.floor(ct/Qt))continue}else if(ve===rt.indexMaxZoom||Rt.numPoints<=rt.indexMaxPoints)continue;if(Rt.source=null,qe.length!==0){mt>1&&console.time("clipping");var pi,vi,$i,_i,Pi,Ui,ji=.5*rt.buffer/rt.extent,pn=.5-ji,Hn=.5+ji,br=1+ji;pi=vi=$i=_i=null,Pi=Lt(qe,At,Le-ji,Le+Hn,0,Rt.minX,Rt.maxX,rt),Ui=Lt(qe,At,Le+pn,Le+br,0,Rt.minX,Rt.maxX,rt),qe=null,Pi&&(pi=Lt(Pi,At,Ve-ji,Ve+Hn,1,Rt.minY,Rt.maxY,rt),vi=Lt(Pi,At,Ve+pn,Ve+br,1,Rt.minY,Rt.maxY,rt),Pi=null),Ui&&($i=Lt(Ui,At,Ve-ji,Ve+Hn,1,Rt.minY,Rt.maxY,rt),_i=Lt(Ui,At,Ve+pn,Ve+br,1,Rt.minY,Rt.maxY,rt),Ui=null),mt>1&&console.timeEnd("clipping"),ot.push(pi||[],ve+1,2*Le,2*Ve),ot.push(vi||[],ve+1,2*Le,2*Ve+1),ot.push($i||[],ve+1,2*Le+1,2*Ve),ot.push(_i||[],ve+1,2*Le+1,2*Ve+1)}}},Ft.prototype.getTile=function(qe,ve,Le){var Ve=this.options,Ke=Ve.extent,st=Ve.debug;if(qe<0||qe>24)return null;var ct=1<<qe,ot=Yt(qe,ve=(ve%ct+ct)%ct,Le);if(this.tiles[ot])return Fn(this.tiles[ot],Ke);st>1&&console.log("drilling down to z%d-%d-%d",qe,ve,Le);for(var rt,mt=qe,At=ve,Nt=Le;!rt&&mt>0;)mt--,At=Math.floor(At/2),Nt=Math.floor(Nt/2),rt=this.tiles[Yt(mt,At,Nt)];return rt&&rt.source?(st>1&&console.log("found parent tile z%d-%d-%d",mt,At,Nt),st>1&&console.time("drilling down"),this.splitTile(rt.source,mt,At,Nt,qe,ve,Le),st>1&&console.timeEnd("drilling down"),this.tiles[ot]?Fn(this.tiles[ot],Ke):null):null};class Oi extends T{constructor(ve,Le,Ve,Ke){super(ve,Le,Ve,bi),Ke&&(this.loadGeoJSON=Ke)}loadData(ve,Le){var Ve;(Ve=this._pendingRequest)===null||Ve===void 0||Ve.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Ke=!!(ve&&ve.request&&ve.request.collectResourceTiming)&&new r.RequestPerformance(ve.request);this._pendingCallback=Le,this._pendingRequest=this.loadGeoJSON(ve,(st,ct)=>{if(delete this._pendingCallback,delete this._pendingRequest,st||!ct)return Le(st);if(typeof ct!="object")return Le(new Error(`Input data given to '${ve.source}' is not a valid GeoJSON object.`));{E(ct,!0);try{if(ve.filter){const rt=r.createExpression(ve.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(rt.result==="error")throw new Error(rt.value.map(At=>`${At.key}: ${At.message}`).join(", "));ct={type:"FeatureCollection",features:ct.features.filter(At=>rt.value.evaluate({zoom:0},At))}}this._geoJSONIndex=ve.cluster?new ue(function({superclusterOptions:rt,clusterProperties:mt}){if(!mt||!rt)return rt;const At={},Nt={},Rt={accumulated:null,zoom:0},oi={properties:null},Qt=Object.keys(mt);for(const pi of Qt){const[vi,$i]=mt[pi],_i=r.createExpression($i),Pi=r.createExpression(typeof vi=="string"?[vi,["accumulated"],["get",pi]]:vi);At[pi]=_i.value,Nt[pi]=Pi.value}return rt.map=pi=>{oi.properties=pi;const vi={};for(const $i of Qt)vi[$i]=At[$i].evaluate(Rt,oi);return vi},rt.reduce=(pi,vi)=>{oi.properties=vi;for(const $i of Qt)Rt.accumulated=pi[$i],pi[$i]=Nt[$i].evaluate(Rt,oi)},rt}(ve)).load(ct.features):function(rt,mt){return new Ft(rt,mt)}(ct,ve.geojsonVtOptions)}catch(rt){return Le(rt)}this.loaded={};const ot={};if(Ke){const rt=Ke.finish();rt&&(ot.resourceTiming={},ot.resourceTiming[ve.source]=JSON.parse(JSON.stringify(rt)))}Le(null,ot)}})}reloadTile(ve,Le){const Ve=this.loaded;return Ve&&Ve[ve.uid]?super.reloadTile(ve,Le):this.loadTile(ve,Le)}loadGeoJSON(ve,Le){if(ve.request)return r.getJSON(ve.request,Le);if(typeof ve.data=="string")try{Le(null,JSON.parse(ve.data))}catch{Le(new Error(`Input data given to '${ve.source}' is not a valid GeoJSON object.`))}else Le(new Error(`Input data given to '${ve.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(ve,Le){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Le()}getClusterExpansionZoom(ve,Le){try{Le(null,this._geoJSONIndex.getClusterExpansionZoom(ve.clusterId))}catch(Ve){Le(Ve)}}getClusterChildren(ve,Le){try{Le(null,this._geoJSONIndex.getChildren(ve.clusterId))}catch(Ve){Le(Ve)}}getClusterLeaves(ve,Le){try{Le(null,this._geoJSONIndex.getLeaves(ve.clusterId,ve.limit,ve.offset))}catch(Ve){Le(Ve)}}}class hi{constructor(ve){this.self=ve,this.actor=new r.Actor(ve,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:T,geojson:Oi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Le,Ve)=>{if(this.workerSourceTypes[Le])throw new Error(`Worker source with name "${Le}" already registered.`);this.workerSourceTypes[Le]=Ve},this.self.registerRTLTextPlugin=Le=>{if(r.plugin.isParsed())throw new Error("RTL text plugin already registered.");r.plugin.applyArabicShaping=Le.applyArabicShaping,r.plugin.processBidirectionalText=Le.processBidirectionalText,r.plugin.processStyledBidirectionalText=Le.processStyledBidirectionalText}}setReferrer(ve,Le){this.referrer=Le}setImages(ve,Le,Ve){this.availableImages[ve]=Le;for(const Ke in this.workerSources[ve]){const st=this.workerSources[ve][Ke];for(const ct in st)st[ct].availableImages=Le}Ve()}setLayers(ve,Le,Ve){this.getLayerIndex(ve).replace(Le),Ve()}updateLayers(ve,Le,Ve){this.getLayerIndex(ve).update(Le.layers,Le.removedIds),Ve()}loadTile(ve,Le,Ve){this.getWorkerSource(ve,Le.type,Le.source).loadTile(Le,Ve)}loadDEMTile(ve,Le,Ve){this.getDEMWorkerSource(ve,Le.source).loadTile(Le,Ve)}reloadTile(ve,Le,Ve){this.getWorkerSource(ve,Le.type,Le.source).reloadTile(Le,Ve)}abortTile(ve,Le,Ve){this.getWorkerSource(ve,Le.type,Le.source).abortTile(Le,Ve)}removeTile(ve,Le,Ve){this.getWorkerSource(ve,Le.type,Le.source).removeTile(Le,Ve)}removeDEMTile(ve,Le){this.getDEMWorkerSource(ve,Le.source).removeTile(Le)}removeSource(ve,Le,Ve){if(!this.workerSources[ve]||!this.workerSources[ve][Le.type]||!this.workerSources[ve][Le.type][Le.source])return;const Ke=this.workerSources[ve][Le.type][Le.source];delete this.workerSources[ve][Le.type][Le.source],Ke.removeSource!==void 0?Ke.removeSource(Le,Ve):Ve()}loadWorkerSource(ve,Le,Ve){try{this.self.importScripts(Le.url),Ve()}catch(Ke){Ve(Ke.toString())}}syncRTLPluginState(ve,Le,Ve){try{r.plugin.setState(Le);const Ke=r.plugin.getPluginURL();if(r.plugin.isLoaded()&&!r.plugin.isParsed()&&Ke!=null){this.self.importScripts(Ke);const st=r.plugin.isParsed();Ve(st?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ke}`),st)}}catch(Ke){Ve(Ke.toString())}}getAvailableImages(ve){let Le=this.availableImages[ve];return Le||(Le=[]),Le}getLayerIndex(ve){let Le=this.layerIndexes[ve];return Le||(Le=this.layerIndexes[ve]=new g),Le}getWorkerSource(ve,Le,Ve){if(this.workerSources[ve]||(this.workerSources[ve]={}),this.workerSources[ve][Le]||(this.workerSources[ve][Le]={}),!this.workerSources[ve][Le][Ve]){const Ke={send:(st,ct,ot)=>{this.actor.send(st,ct,ot,ve)}};this.workerSources[ve][Le][Ve]=new this.workerSourceTypes[Le](Ke,this.getLayerIndex(ve),this.getAvailableImages(ve))}return this.workerSources[ve][Le][Ve]}getDEMWorkerSource(ve,Le){return this.demWorkerSources[ve]||(this.demWorkerSources[ve]={}),this.demWorkerSources[ve][Le]||(this.demWorkerSources[ve][Le]=new S),this.demWorkerSources[ve][Le]}enforceCacheSizeLimit(ve,Le){r.enforceCacheSizeLimit(Le)}}return r.isWorker()&&(self.worker=new hi(self)),hi}),l(["./shared"],function(r){var p=f;function f(k){return!function(o){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var _,P,j=new Blob([""],{type:"text/javascript"}),te=URL.createObjectURL(j);try{P=new Worker(te),_=!0}catch{_=!1}return P&&P.terminate(),URL.revokeObjectURL(te),_}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var _=document.createElement("canvas");_.width=_.height=1;var P=_.getContext("2d");if(!P)return!1;var j=P.getImageData(0,0,1,1);return j&&j.width===_.width}()?(g[h=o&&o.failIfMajorPerformanceCaveat]===void 0&&(g[h]=function(_){var P,j=function(te){var ce=document.createElement("canvas"),me=Object.create(f.webGLContextAttributes);return me.failIfMajorPerformanceCaveat=te,ce.getContext("webgl",me)||ce.getContext("experimental-webgl",me)}(_);if(!j)return!1;try{P=j.createShader(j.VERTEX_SHADER)}catch{return!1}return!(!P||j.isContextLost())&&(j.shaderSource(P,"void main() {}"),j.compileShader(P),j.getShaderParameter(P,j.COMPILE_STATUS)===!0)}(h)),g[h]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var h}(k)}var g={};function b(k,o){if(Array.isArray(k)){if(!Array.isArray(o)||k.length!==o.length)return!1;for(let h=0;h<k.length;h++)if(!b(k[h],o[h]))return!1;return!0}if(typeof k=="object"&&k!==null&&o!==null){if(typeof o!="object"||Object.keys(k).length!==Object.keys(o).length)return!1;for(const h in k)if(!b(k[h],o[h]))return!1;return!0}return k===o}f.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class y{static testProp(o){if(!y.docStyle)return o[0];for(let h=0;h<o.length;h++)if(o[h]in y.docStyle)return o[h];return o[0]}static create(o,h,_){const P=window.document.createElement(o);return h!==void 0&&(P.className=h),_&&_.appendChild(P),P}static createNS(o,h){return window.document.createElementNS(o,h)}static disableDrag(){y.docStyle&&y.selectProp&&(y.userSelect=y.docStyle[y.selectProp],y.docStyle[y.selectProp]="none")}static enableDrag(){y.docStyle&&y.selectProp&&(y.docStyle[y.selectProp]=y.userSelect)}static setTransform(o,h){o.style[y.transformProp]=h}static addEventListener(o,h,_,P={}){o.addEventListener(h,_,"passive"in P?P:P.capture)}static removeEventListener(o,h,_,P={}){o.removeEventListener(h,_,"passive"in P?P:P.capture)}static suppressClickInternal(o){o.preventDefault(),o.stopPropagation(),window.removeEventListener("click",y.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",y.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",y.suppressClickInternal,!0)},0)}static mousePos(o,h){const _=o.getBoundingClientRect();return new r.pointGeometry(h.clientX-_.left-o.clientLeft,h.clientY-_.top-o.clientTop)}static touchPos(o,h){const _=o.getBoundingClientRect(),P=[];for(let j=0;j<h.length;j++)P.push(new r.pointGeometry(h[j].clientX-_.left-o.clientLeft,h[j].clientY-_.top-o.clientTop));return P}static mouseButton(o){return o.button}static remove(o){o.parentNode&&o.parentNode.removeChild(o)}}y.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,y.selectProp=y.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),y.transformProp=y.testProp(["transform","WebkitTransform"]);class w{constructor(o){this._transformRequestFn=o}transformRequest(o,h){return this._transformRequestFn&&this._transformRequestFn(o,h)||{url:o}}normalizeSpriteURL(o,h,_){const P=function(j){const te=j.match(v);if(!te)throw new Error(`Unable to parse URL "${j}"`);return{protocol:te[1],authority:te[2],path:te[3]||"/",params:te[4]?te[4].split("&"):[]}}(o);return P.path+=`${h}${_}`,function(j){const te=j.params.length?`?${j.params.join("&")}`:"";return`${j.protocol}://${j.authority}${j.path}${te}`}(P)}setTransformRequest(o){this._transformRequestFn=o}}const v=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class T{constructor(o,h,_,P){this.context=o,this.format=_,this.texture=o.gl.createTexture(),this.update(h,P)}update(o,h,_){const{width:P,height:j}=o,te=!(this.size&&this.size[0]===P&&this.size[1]===j||_),{context:ce}=this,{gl:me}=ce;if(this.useMipmap=!!(h&&h.useMipmap),me.bindTexture(me.TEXTURE_2D,this.texture),ce.pixelStoreUnpackFlipY.set(!1),ce.pixelStoreUnpack.set(1),ce.pixelStoreUnpackPremultiplyAlpha.set(this.format===me.RGBA&&(!h||h.premultiply!==!1)),te)this.size=[P,j],o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||r.isImageBitmap(o)?me.texImage2D(me.TEXTURE_2D,0,this.format,this.format,me.UNSIGNED_BYTE,o):me.texImage2D(me.TEXTURE_2D,0,this.format,P,j,0,this.format,me.UNSIGNED_BYTE,o.data);else{const{x:Se,y:Ne}=_||{x:0,y:0};o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||r.isImageBitmap(o)?me.texSubImage2D(me.TEXTURE_2D,0,Se,Ne,me.RGBA,me.UNSIGNED_BYTE,o):me.texSubImage2D(me.TEXTURE_2D,0,Se,Ne,P,j,me.RGBA,me.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&me.generateMipmap(me.TEXTURE_2D)}bind(o,h,_){const{context:P}=this,{gl:j}=P;j.bindTexture(j.TEXTURE_2D,this.texture),_!==j.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=j.LINEAR),o!==this.filter&&(j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,o),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,_||o),this.filter=o),h!==this.wrap&&(j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,h),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,h),this.wrap=h)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}function S(k){const{userImage:o}=k;return!!(o&&o.render&&o.render())&&(k.data.replace(new Uint8Array(o.data.buffer)),!0)}class E extends r.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new r.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:h,callback:_}of this.requestors)this._notify(h,_);this.requestors=[]}}getImage(o){return this.images[o]}addImage(o,h){if(this.images[o])throw new Error(`Image id ${o} already exist, use updateImage instead`);this._validate(o,h)&&(this.images[o]=h)}_validate(o,h){let _=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new r.ErrorEvent(new Error(`Image "${o}" has invalid "stretchX" value`))),_=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new r.ErrorEvent(new Error(`Image "${o}" has invalid "stretchY" value`))),_=!1),this._validateContent(h.content,h)||(this.fire(new r.ErrorEvent(new Error(`Image "${o}" has invalid "content" value`))),_=!1),_}_validateStretch(o,h){if(!o)return!0;let _=0;for(const P of o){if(P[0]<_||P[1]<P[0]||h<P[1])return!1;_=P[1]}return!0}_validateContent(o,h){return!(o&&(o.length!==4||o[0]<0||h.data.width<o[0]||o[1]<0||h.data.height<o[1]||o[2]<0||h.data.width<o[2]||o[3]<0||h.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))}updateImage(o,h){const _=this.images[o];if(_.data.width!==h.data.width||_.data.height!==h.data.height)throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=_.version+1,this.images[o]=h,this.updatedImages[o]=!0}removeImage(o){const h=this.images[o];delete this.images[o],delete this.patterns[o],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o,h){let _=!0;if(!this.isLoaded())for(const P of o)this.images[P]||(_=!1);this.isLoaded()||_?this._notify(o,h):this.requestors.push({ids:o,callback:h})}_notify(o,h){const _={};for(const P of o){this.images[P]||this.fire(new r.Event("styleimagemissing",{id:P}));const j=this.images[P];j?_[P]={data:j.data.clone(),pixelRatio:j.pixelRatio,sdf:j.sdf,version:j.version,stretchX:j.stretchX,stretchY:j.stretchY,content:j.content,hasRenderCallback:!!(j.userImage&&j.userImage.render)}:r.warnOnce(`Image "${P}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,_)}getPixelSize(){const{width:o,height:h}=this.atlasImage;return{width:o,height:h}}getPattern(o){const h=this.patterns[o],_=this.getImage(o);if(!_)return null;if(h&&h.position.version===_.version)return h.position;if(h)h.position.version=_.version;else{const P={w:_.data.width+2,h:_.data.height+2,x:0,y:0},j=new r.ImagePosition(P,_);this.patterns[o]={bin:P,position:j}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const h=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new T(o,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const j in this.patterns)o.push(this.patterns[j].bin);const{w:h,h:_}=r.potpack(o),P=this.atlasImage;P.resize({width:h||1,height:_||1});for(const j in this.patterns){const{bin:te}=this.patterns[j],ce=te.x+1,me=te.y+1,Se=this.images[j].data,Ne=Se.width,Ue=Se.height;r.RGBAImage.copy(Se,P,{x:0,y:0},{x:ce,y:me},{width:Ne,height:Ue}),r.RGBAImage.copy(Se,P,{x:0,y:Ue-1},{x:ce,y:me-1},{width:Ne,height:1}),r.RGBAImage.copy(Se,P,{x:0,y:0},{x:ce,y:me+Ue},{width:Ne,height:1}),r.RGBAImage.copy(Se,P,{x:Ne-1,y:0},{x:ce-1,y:me},{width:1,height:Ue}),r.RGBAImage.copy(Se,P,{x:0,y:0},{x:ce+Ne,y:me},{width:1,height:Ue})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const h of o){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const _=this.images[h];_||r.warnOnce(`Image with ID: "${h}" was not found`),S(_)&&this.updateImage(h,_)}}}const x=1e20;function A(k,o,h,_,P,j,te,ce,me){for(let Se=o;Se<o+_;Se++)D(k,h*j+Se,j,P,te,ce,me);for(let Se=h;Se<h+P;Se++)D(k,Se*j+o,1,_,te,ce,me)}function D(k,o,h,_,P,j,te){j[0]=0,te[0]=-1e20,te[1]=x,P[0]=k[o];for(let ce=1,me=0,Se=0;ce<_;ce++){P[ce]=k[o+ce*h];const Ne=ce*ce;do{const Ue=j[me];Se=(P[ce]-P[Ue]+Ne-Ue*Ue)/(ce-Ue)/2}while(Se<=te[me]&&--me>-1);me++,j[me]=ce,te[me]=Se,te[me+1]=x}for(let ce=0,me=0;ce<_;ce++){for(;te[me+1]<ce;)me++;const Se=j[me],Ne=ce-Se;k[o+ce*h]=P[Se]+Ne*Ne}}class C{constructor(o,h){this.requestManager=o,this.localIdeographFontFamily=h,this.entries={}}setURL(o){this.url=o}getGlyphs(o,h){const _=[];for(const P in o)for(const j of o[P])_.push({stack:P,id:j});r.asyncAll(_,({stack:P,id:j},te)=>{let ce=this.entries[P];ce||(ce=this.entries[P]={glyphs:{},requests:{},ranges:{}});let me=ce.glyphs[j];if(me!==void 0)return void te(null,{stack:P,id:j,glyph:me});if(me=this._tinySDF(ce,P,j),me)return ce.glyphs[j]=me,void te(null,{stack:P,id:j,glyph:me});const Se=Math.floor(j/256);if(256*Se>65535)return void te(new Error("glyphs > 65535 not supported"));if(ce.ranges[Se])return void te(null,{stack:P,id:j,glyph:me});let Ne=ce.requests[Se];Ne||(Ne=ce.requests[Se]=[],C.loadGlyphRange(P,Se,this.url,this.requestManager,(Ue,We)=>{if(We){for(const it in We)this._doesCharSupportLocalGlyph(+it)||(ce.glyphs[+it]=We[+it]);ce.ranges[Se]=!0}for(const it of Ne)it(Ue,We);delete ce.requests[Se]})),Ne.push((Ue,We)=>{Ue?te(Ue):We&&te(null,{stack:P,id:j,glyph:We[j]||null})})},(P,j)=>{if(P)h(P);else if(j){const te={};for(const{stack:ce,id:me,glyph:Se}of j)(te[ce]||(te[ce]={}))[me]=Se&&{id:Se.id,bitmap:Se.bitmap.clone(),metrics:Se.metrics};h(null,te)}})}_doesCharSupportLocalGlyph(o){return!!this.localIdeographFontFamily&&(r.unicodeBlockLookup["CJK Unified Ideographs"](o)||r.unicodeBlockLookup["Hangul Syllables"](o)||r.unicodeBlockLookup.Hiragana(o)||r.unicodeBlockLookup.Katakana(o))}_tinySDF(o,h,_){const P=this.localIdeographFontFamily;if(!P||!this._doesCharSupportLocalGlyph(_))return;let j=o.tinySDF;if(!j){let ce="400";/bold/i.test(h)?ce="900":/medium/i.test(h)?ce="500":/light/i.test(h)&&(ce="200"),j=o.tinySDF=new C.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:P,fontWeight:ce})}const te=j.draw(String.fromCharCode(_));return{id:_,bitmap:new r.AlphaImage({width:te.width||30,height:te.height||30},te.data),metrics:{width:te.glyphWidth||24,height:te.glyphHeight||24,left:te.glyphLeft||0,top:te.glyphTop-27||-8,advance:te.glyphAdvance||24}}}}C.loadGlyphRange=function(k,o,h,_,P){const j=256*o,te=j+255,ce=_.transformRequest(h.replace("{fontstack}",k).replace("{range}",`${j}-${te}`),r.ResourceType.Glyphs);r.getArrayBuffer(ce,(me,Se)=>{if(me)P(me);else if(Se){const Ne={};for(const Ue of r.parseGlyphPbf(Se))Ne[Ue.id]=Ue;P(null,Ne)}})},C.TinySDF=class{constructor({fontSize:k=24,buffer:o=3,radius:h=8,cutoff:_=.25,fontFamily:P="sans-serif",fontWeight:j="normal",fontStyle:te="normal"}={}){this.buffer=o,this.cutoff=_,this.radius=h;const ce=this.size=k+4*o,me=this._createCanvas(ce),Se=this.ctx=me.getContext("2d",{willReadFrequently:!0});Se.font=`${te} ${j} ${k}px ${P}`,Se.textBaseline="alphabetic",Se.textAlign="left",Se.fillStyle="black",this.gridOuter=new Float64Array(ce*ce),this.gridInner=new Float64Array(ce*ce),this.f=new Float64Array(ce),this.z=new Float64Array(ce+1),this.v=new Uint16Array(ce)}_createCanvas(k){const o=document.createElement("canvas");return o.width=o.height=k,o}draw(k){const{width:o,actualBoundingBoxAscent:h,actualBoundingBoxDescent:_,actualBoundingBoxLeft:P,actualBoundingBoxRight:j}=this.ctx.measureText(k),te=Math.ceil(h),ce=Math.min(this.size-this.buffer,Math.ceil(j-P)),me=Math.min(this.size-this.buffer,te+Math.ceil(_)),Se=ce+2*this.buffer,Ne=me+2*this.buffer,Ue=Math.max(Se*Ne,0),We=new Uint8ClampedArray(Ue),it={data:We,width:Se,height:Ne,glyphWidth:ce,glyphHeight:me,glyphTop:te,glyphLeft:0,glyphAdvance:o};if(ce===0||me===0)return it;const{ctx:Je,buffer:et,gridInner:pt,gridOuter:yt}=this;Je.clearRect(et,et,ce,me),Je.fillText(k,et,et+te);const wt=Je.getImageData(et,et,ce,me);yt.fill(x,0,Ue),pt.fill(0,0,Ue);for(let at=0;at<me;at++)for(let Mt=0;Mt<ce;Mt++){const St=wt.data[4*(at*ce+Mt)+3]/255;if(St===0)continue;const Ot=(at+et)*Se+Mt+et;if(St===1)yt[Ot]=0,pt[Ot]=x;else{const jt=.5-St;yt[Ot]=jt>0?jt*jt:0,pt[Ot]=jt<0?jt*jt:0}}A(yt,0,0,Se,Ne,Se,this.f,this.v,this.z),A(pt,et,et,ce,me,Se,this.f,this.v,this.z);for(let at=0;at<Ue;at++){const Mt=Math.sqrt(yt[at])-Math.sqrt(pt[at]);We[at]=Math.round(255-255*(Mt/this.radius+this.cutoff))}return it}};const I=new r.Properties({anchor:new r.DataConstantProperty(r.spec.light.anchor),position:new class{constructor(){this.specification=r.spec.light.position}possiblyEvaluate(k,o){return r.sphericalToCartesian(k.expression.evaluate(o))}interpolate(k,o,h){return{x:r.number(k.x,o.x,h),y:r.number(k.y,o.y,h),z:r.number(k.z,o.z,h)}}},color:new r.DataConstantProperty(r.spec.light.color),intensity:new r.DataConstantProperty(r.spec.light.intensity)}),N="-transition";class W extends r.Evented{constructor(o){super(),this._transitionable=new r.Transitionable(I),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,h={}){if(!this._validate(r.validateLight,o,h))for(const _ in o){const P=o[_];_.endsWith(N)?this._transitionable.setTransition(_.slice(0,-N.length),P):this._transitionable.setValue(_,P)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,h,_){return(!_||_.validate!==!1)&&r.emitValidationErrors(this,o.call(r.validateStyle,r.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:r.spec})))}}class Y{constructor(o,h){this.width=o,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(o,h){const _=o.join(",")+String(h);return this.dashEntry[_]||(this.dashEntry[_]=this.addDash(o,h)),this.dashEntry[_]}getDashRanges(o,h,_){const P=[];let j=o.length%2==1?-o[o.length-1]*_:0,te=o[0]*_,ce=!0;P.push({left:j,right:te,isDash:ce,zeroLength:o[0]===0});let me=o[0];for(let Se=1;Se<o.length;Se++){ce=!ce;const Ne=o[Se];j=me*_,me+=Ne,te=me*_,P.push({left:j,right:te,isDash:ce,zeroLength:Ne===0})}return P}addRoundDash(o,h,_){const P=h/2;for(let j=-_;j<=_;j++){const te=this.width*(this.nextRow+_+j);let ce=0,me=o[ce];for(let Se=0;Se<this.width;Se++){Se/me.right>1&&(me=o[++ce]);const Ne=Math.abs(Se-me.left),Ue=Math.abs(Se-me.right),We=Math.min(Ne,Ue);let it;const Je=j/_*(P+1);if(me.isDash){const et=P-Math.abs(Je);it=Math.sqrt(We*We+et*et)}else it=P-Math.sqrt(We*We+Je*Je);this.data[te+Se]=Math.max(0,Math.min(255,it+128))}}}addRegularDash(o){for(let ce=o.length-1;ce>=0;--ce){const me=o[ce],Se=o[ce+1];me.zeroLength?o.splice(ce,1):Se&&Se.isDash===me.isDash&&(Se.left=me.left,o.splice(ce,1))}const h=o[0],_=o[o.length-1];h.isDash===_.isDash&&(h.left=_.left-this.width,_.right=h.right+this.width);const P=this.width*this.nextRow;let j=0,te=o[j];for(let ce=0;ce<this.width;ce++){ce/te.right>1&&(te=o[++j]);const me=Math.abs(ce-te.left),Se=Math.abs(ce-te.right),Ne=Math.min(me,Se);this.data[P+ce]=Math.max(0,Math.min(255,(te.isDash?Ne:-Ne)+128))}}addDash(o,h){const _=h?7:0,P=2*_+1;if(this.nextRow+P>this.height)return r.warnOnce("LineAtlas out of space"),null;let j=0;for(let ce=0;ce<o.length;ce++)j+=o[ce];if(j!==0){const ce=this.width/j,me=this.getDashRanges(o,this.width,ce);h?this.addRoundDash(me,ce,_):this.addRegularDash(me)}const te={y:(this.nextRow+_+.5)/this.height,height:2*_/this.height,width:j};return this.nextRow+=P,this.dirty=!0,te}bind(o){const h=o.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}class X{constructor(o,h){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=r.uniqueId();const _=this.workerPool.acquire(this.id);for(let P=0;P<_.length;P++){const j=new X.Actor(_[P],h,this.id);j.name=`Worker ${P}`,this.actors.push(j)}if(!this.actors.length)throw new Error("No actors found")}broadcast(o,h,_){r.asyncAll(this.actors,(P,j)=>{P.send(o,h,j)},_=_||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(o=>{o.remove()}),this.actors=[],this.workerPool.release(this.id)}}function O(k,o,h){const _=function(P,j){if(P)return h(P);if(j){const te=r.pick(r.extend(j,k),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);j.vector_layers&&(te.vectorLayers=j.vector_layers,te.vectorLayerIds=te.vectorLayers.map(ce=>ce.id)),h(null,te)}};return k.url?r.getJSON(o.transformRequest(k.url,r.ResourceType.Source),_):r.exported.frame(()=>_(null,k))}X.Actor=r.Actor;class V{constructor(o,h,_){this.bounds=r.LngLatBounds.convert(this.validateBounds(o)),this.minzoom=h||0,this.maxzoom=_||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const h=Math.pow(2,o.z),_=Math.floor(r.mercatorXfromLng(this.bounds.getWest())*h),P=Math.floor(r.mercatorYfromLat(this.bounds.getNorth())*h),j=Math.ceil(r.mercatorXfromLng(this.bounds.getEast())*h),te=Math.ceil(r.mercatorYfromLat(this.bounds.getSouth())*h);return o.x>=_&&o.x<j&&o.y>=P&&o.y<te}}class $ extends r.Evented{constructor(o,h,_,P){if(super(),this.id=o,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.extend(this,r.pick(h,["url","scheme","tileSize","promoteId"])),this._options=r.extend({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(P)}load(){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,(o,h)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),o?this.fire(new r.ErrorEvent(o)):h&&(r.extend(this,h),h.bounds&&(this.tileBounds=new V(h.bounds,this.minzoom,this.maxzoom)),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}setSourceProperty(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return r.extend({},this._options)}loadTile(o,h){const _=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),P={request:this.map._requestManager.transformRequest(_,r.ResourceType.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function j(te,ce){return delete o.request,o.aborted?h(null):te&&te.status!==404?h(te):(ce&&ce.resourceTiming&&(o.resourceTiming=ce.resourceTiming),this.map._refreshExpiredTiles&&ce&&o.setExpiryData(ce),o.loadVectorData(ce,this.map.painter),r.cacheEntryPossiblyAdded(this.dispatcher),h(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}P.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired"?o.state==="loading"?o.reloadCallback=h:o.request=o.actor.send("reloadTile",P,j.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",P,j.bind(this)))}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0)}unloadTile(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class L extends r.Evented{constructor(o,h,_,P){super(),this.id=o,this.dispatcher=_,this.setEventedParent(P),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({type:"raster"},h),r.extend(this,r.pick(h,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,(o,h)=>{this._tileJSONRequest=null,this._loaded=!0,o?this.fire(new r.ErrorEvent(o)):h&&(r.extend(this,h),h.bounds&&(this.tileBounds=new V(h.bounds,this.minzoom,this.maxzoom)),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return r.extend({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,h){const _=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);o.request=r.getImage(this.map._requestManager.transformRequest(_,r.ResourceType.Tile),(P,j,te)=>{if(delete o.request,o.aborted)o.state="unloaded",h(null);else if(P)o.state="errored",h(P);else if(j){this.map._refreshExpiredTiles&&o.setExpiryData(te);const ce=this.map.painter.context,me=ce.gl;o.texture=this.map.painter.getTileTexture(j.width),o.texture?o.texture.update(j,{useMipmap:!0}):(o.texture=new T(ce,j,me.RGBA,{useMipmap:!0}),o.texture.bind(me.LINEAR,me.CLAMP_TO_EDGE,me.LINEAR_MIPMAP_NEAREST),ce.extTextureFilterAnisotropic&&me.texParameterf(me.TEXTURE_2D,ce.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ce.extTextureFilterAnisotropicMax)),o.state="loaded",r.cacheEntryPossiblyAdded(this.dispatcher),h(null)}})}abortTile(o,h){o.request&&(o.request.cancel(),delete o.request),h()}unloadTile(o,h){o.texture&&this.map.painter.saveTileTexture(o.texture),h()}hasTransition(){return!1}}let R;class G extends L{constructor(o,h,_,P){super(o,h,_,P),this.type="raster-dem",this.maxzoom=22,this._options=r.extend({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(o,h){const _=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function P(j,te){j&&(o.state="errored",h(j)),te&&(o.dem=te,o.needsHillshadePrepare=!0,o.needsTerrainPrepare=!0,o.state="loaded",h(null))}o.request=r.getImage(this.map._requestManager.transformRequest(_,r.ResourceType.Tile),(function(j,te){if(delete o.request,o.aborted)o.state="unloaded",h(null);else if(j)o.state="errored",h(j);else if(te){this.map._refreshExpiredTiles&&o.setExpiryData(te),delete te.cacheControl,delete te.expires;const ce=r.isImageBitmap(te)&&(R==null&&(R=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),R)?te:r.exported.getImageData(te,1),me={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:ce,encoding:this.encoding};o.actor&&o.state!=="expired"||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",me,P.bind(this)))}}).bind(this)),o.neighboringTiles=this._getNeighboringTiles(o.tileID)}_getNeighboringTiles(o){const h=o.canonical,_=Math.pow(2,h.z),P=(h.x-1+_)%_,j=h.x===0?o.wrap-1:o.wrap,te=(h.x+1+_)%_,ce=h.x+1===_?o.wrap+1:o.wrap,me={};return me[new r.OverscaledTileID(o.overscaledZ,j,h.z,P,h.y).key]={backfilled:!1},me[new r.OverscaledTileID(o.overscaledZ,ce,h.z,te,h.y).key]={backfilled:!1},h.y>0&&(me[new r.OverscaledTileID(o.overscaledZ,j,h.z,P,h.y-1).key]={backfilled:!1},me[new r.OverscaledTileID(o.overscaledZ,o.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},me[new r.OverscaledTileID(o.overscaledZ,ce,h.z,te,h.y-1).key]={backfilled:!1}),h.y+1<_&&(me[new r.OverscaledTileID(o.overscaledZ,j,h.z,P,h.y+1).key]={backfilled:!1},me[new r.OverscaledTileID(o.overscaledZ,o.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},me[new r.OverscaledTileID(o.overscaledZ,ce,h.z,te,h.y+1).key]={backfilled:!1}),me}unloadTile(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&o.actor.send("removeDEMTile",{uid:o.uid,source:this.id})}}class U extends r.Evented{constructor(o,h,_,P){super(),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=_.getActor(),this.setEventedParent(P),this._data=h.data,this._options=r.extend({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId;const j=r.EXTENT/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:(h.buffer!==void 0?h.buffer:128)*j,tolerance:(h.tolerance!==void 0?h.tolerance:.375)*j,extent:r.EXTENT,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:h.clusterMaxZoom!==void 0?h.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,h.clusterMinPoints||2),extent:r.EXTENT,radius:(h.clusterRadius||50)*j,log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(o){this.map=o,this.load()}setData(o){return this._data=o,this._updateWorkerData("content"),this}getClusterExpansionZoom(o,h){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},h),this}getClusterChildren(o,h){return this.actor.send("geojson.getClusterChildren",{clusterId:o,source:this.id},h),this}getClusterLeaves(o,h,_,P){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:h,offset:_},P),this}_updateWorkerData(o){const h=r.extend({},this.workerOptions),_=this._data;typeof _=="string"?(h.request=this.map._requestManager.transformRequest(r.exported.resolveURL(_),r.ResourceType.Source),h.request.collectResourceTiming=this._collectResourceTiming):h.data=JSON.stringify(_),this._pendingLoads++,this.fire(new r.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,h,(P,j)=>{if(this._pendingLoads--,this._removed||j&&j.abandoned)return void this.fire(new r.Event("dataabort",{dataType:"source",sourceDataType:o}));let te=null;if(j&&j.resourceTiming&&j.resourceTiming[this.id]&&(te=j.resourceTiming[this.id].slice(0)),P)return void this.fire(new r.ErrorEvent(P));const ce={dataType:"source",sourceDataType:o};this._collectResourceTiming&&te&&te.length>0&&r.extend(ce,{resourceTiming:te}),this.fire(new r.Event("data",ce))})}loaded(){return this._pendingLoads===0}loadTile(o,h){const _=o.actor?"reloadTile":"loadTile";o.actor=this.actor;const P={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o.request=this.actor.send(_,P,(j,te)=>(delete o.request,o.unloadVectorData(),o.aborted?h(null):j?h(j):(o.loadVectorData(te,this.map.painter,_==="reloadTile"),h(null))))}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.aborted=!0}unloadTile(o){o.unloadVectorData(),this.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return r.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var B=r.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class H extends r.Evented{constructor(o,h,_,P){super(),this.id=o,this.dispatcher=_,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(P),this.options=h}load(o,h){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this.url=this.options.url,r.getImage(this.map._requestManager.transformRequest(this.url,r.ResourceType.Image),(_,P)=>{this._loaded=!0,_?this.fire(new r.ErrorEvent(_)):P&&(this.image=P,o&&(this.coordinates=o),h&&h(),this._finishLoading())})}loaded(){return this._loaded}updateImage(o){return this.image&&o.url?(this.options.url=o.url,this.load(o.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}setCoordinates(o){this.coordinates=o;const h=o.map(r.MercatorCoordinate.fromLngLat);this.tileID=function(P){let j=1/0,te=1/0,ce=-1/0,me=-1/0;for(const We of P)j=Math.min(j,We.x),te=Math.min(te,We.y),ce=Math.max(ce,We.x),me=Math.max(me,We.y);const Se=Math.max(ce-j,me-te),Ne=Math.max(0,Math.floor(-Math.log(Se)/Math.LN2)),Ue=Math.pow(2,Ne);return new r.CanonicalTileID(Ne,Math.floor((j+ce)/2*Ue),Math.floor((te+me)/2*Ue))}(h),this.minzoom=this.maxzoom=this.tileID.z;const _=h.map(P=>this.tileID.getTilePoint(P)._round());return this._boundsArray=new r.RasterBoundsArray,this._boundsArray.emplaceBack(_[0].x,_[0].y,0,0),this._boundsArray.emplaceBack(_[1].x,_[1].y,r.EXTENT,0),this._boundsArray.emplaceBack(_[3].x,_[3].y,0,r.EXTENT),this._boundsArray.emplaceBack(_[2].x,_[2].y,r.EXTENT,r.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const o=this.map.painter.context,h=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new T(o,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));for(const _ in this.tiles){const P=this.tiles[_];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture)}}loadTile(o,h){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},h(null)):(o.state="errored",h(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class q extends H{constructor(o,h,_,P){super(o,h,_,P),this.roundZoom=!0,this.type="video",this.options=h}load(){this._loaded=!1;const o=this.options;this.urls=[];for(const h of o.urls)this.urls.push(this.map._requestManager.transformRequest(h,r.ResourceType.Source).url);r.getVideo(this.urls,(h,_)=>{this._loaded=!0,h?this.fire(new r.ErrorEvent(h)):_&&(this.video=_,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(o){if(this.video){const h=this.video.seekable;o<h.start(0)||o>h.end(0)?this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=o}}getVideo(){return this.video}onAdd(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const o=this.map.painter.context,h=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new T(o,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));for(const _ in this.tiles){const P=this.tiles[_];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class se extends H{constructor(o,h,_,P){super(o,h,_,P),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some(j=>!Array.isArray(j)||j.length!==2||j.some(te=>typeof te!="number"))||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${o}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${o}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${o}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${o}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${o}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const h=this.map.painter.context,_=h.gl;this.boundsBuffer||(this.boundsBuffer=h.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new T(h,this.canvas,_.RGBA,{premultiply:!0});for(const P in this.tiles){const j=this.tiles[P];j.state!=="loaded"&&(j.state="loaded",j.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const o of[this.canvas.width,this.canvas.height])if(isNaN(o)||o<=0)return!0;return!1}}const pe={vector:$,raster:L,"raster-dem":G,geojson:U,video:q,image:H,canvas:se};function ne(k,o){const h=r.create();return r.translate(h,h,[1,1,0]),r.scale(h,h,[.5*k.width,.5*k.height,1]),r.multiply(h,h,k.calculatePosMatrix(o.toUnwrapped()))}function le(k,o,h,_,P,j){const te=function(Ue,We,it){if(Ue)for(const Je of Ue){const et=We[Je];if(et&&et.source===it&&et.type==="fill-extrusion")return!0}else for(const Je in We){const et=We[Je];if(et.source===it&&et.type==="fill-extrusion")return!0}return!1}(P&&P.layers,o,k.id),ce=j.maxPitchScaleFactor(),me=k.tilesIn(_,ce,te);me.sort(ke);const Se=[];for(const Ue of me)Se.push({wrappedTileID:Ue.tileID.wrapped().key,queryResults:Ue.tile.queryRenderedFeatures(o,h,k._state,Ue.queryGeometry,Ue.cameraQueryGeometry,Ue.scale,P,j,ce,ne(k.transform,Ue.tileID))});const Ne=function(Ue){const We={},it={};for(const Je of Ue){const et=Je.queryResults,pt=Je.wrappedTileID,yt=it[pt]=it[pt]||{};for(const wt in et){const at=et[wt],Mt=yt[wt]=yt[wt]||{},St=We[wt]=We[wt]||[];for(const Ot of at)Mt[Ot.featureIndex]||(Mt[Ot.featureIndex]=!0,St.push(Ot))}}return We}(Se);for(const Ue in Ne)Ne[Ue].forEach(We=>{const it=We.feature,Je=k.getFeatureState(it.layer["source-layer"],it.id);it.source=it.layer.source,it.layer["source-layer"]&&(it.sourceLayer=it.layer["source-layer"]),it.state=Je});return Ne}function ke(k,o){const h=k.tileID,_=o.tileID;return h.overscaledZ-_.overscaledZ||h.canonical.y-_.canonical.y||h.wrap-_.wrap||h.canonical.x-_.canonical.x}class be{constructor(o,h){this.tileID=o,this.uid=r.uniqueId(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(o){const h=o+this.timeAdded;h<r.exported.now()||this.fadeEndTime&&h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(o){this.demTexture&&o.saveTileTexture(this.demTexture),this.textures.forEach(h=>o.saveTileTexture(h)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(o,h,_){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(P,j){const te={};if(!j)return te;for(const ce of P){const me=ce.layerIds.map(Se=>j.getLayer(Se)).filter(Boolean);if(me.length!==0){ce.layers=me,ce.stateDependentLayerIds&&(ce.stateDependentLayers=ce.stateDependentLayerIds.map(Se=>me.filter(Ne=>Ne.id===Se)[0]));for(const Se of me)te[Se.id]=ce}}return te}(o.buckets,h.style),this.hasSymbolBuckets=!1;for(const P in this.buckets){const j=this.buckets[P];if(j instanceof r.SymbolBucket){if(this.hasSymbolBuckets=!0,!_)break;j.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const P in this.buckets){const j=this.buckets[P];if(j instanceof r.SymbolBucket&&j.hasRTLText){this.hasRTLText=!0,r.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const P in this.buckets){const j=this.buckets[P];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(P).queryRadius(j))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new r.CollisionBoxArray}unloadVectorData(){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(o){return this.buckets[o.id]}upload(o){for(const _ in this.buckets){const P=this.buckets[_];P.uploadPending()&&P.upload(o)}const h=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new T(o,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new T(o,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,h,_,P,j,te,ce,me,Se,Ne){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:P,cameraQueryGeometry:j,scale:te,tileSize:this.tileSize,pixelPosMatrix:Ne,transform:me,params:ce,queryPadding:this.queryPadding*Se},o,h,_):{}}querySourceFeatures(o,h){const _=this.latestFeatureIndex;if(!_||!_.rawTileData)return;const P=_.loadVTLayers(),j=h?h.sourceLayer:"",te=P._geojsonTileLayer||P[j];if(!te)return;const ce=r.createFilter(h&&h.filter),{z:me,x:Se,y:Ne}=this.tileID.canonical,Ue={z:me,x:Se,y:Ne};for(let We=0;We<te.length;We++){const it=te.feature(We);if(ce.needGeometry){const pt=r.toEvaluationFeature(it,!0);if(!ce.filter(new r.EvaluationParameters(this.tileID.overscaledZ),pt,this.tileID.canonical))continue}else if(!ce.filter(new r.EvaluationParameters(this.tileID.overscaledZ),it))continue;const Je=_.getId(it,j),et=new r.GeoJSONFeature(it,me,Se,Ne,Je);et.tile=Ue,o.push(et)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const h=this.expirationTime;if(o.cacheControl){const _=r.parseCacheControl(o.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const _=Date.now();let P=!1;if(this.expirationTime>_)P=!1;else if(h)if(this.expirationTime<h)P=!0;else{const j=this.expirationTime-h;j?this.expirationTime=_+Math.max(j,3e4):P=!0}else P=!0;P?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)return;const _=this.latestFeatureIndex.loadVTLayers();for(const P in this.buckets){if(!h.style.hasLayer(P))continue;const j=this.buckets[P],te=j.layers[0].sourceLayer||"_geojsonTileLayer",ce=_[te],me=o[te];if(!ce||!me||Object.keys(me).length===0)continue;j.update(me,ce,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Se=h&&h.style&&h.style.getLayer(P);Se&&(this.queryPadding=Math.max(this.queryPadding,Se.queryRadius(j)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<r.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=r.exported.now()+o}setDependencies(o,h){const _={};for(const P of h)_[P]=!0;this.dependencies[o]=_}hasDependency(o,h){for(const _ of o){const P=this.dependencies[_];if(P){for(const j of h)if(P[j])return!0}}return!1}}class Ee{constructor(o,h){this.max=o,this.onRemove=h,this.reset()}reset(){for(const o in this.data)for(const h of this.data[o])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(o,h,_){const P=o.wrapped().key;this.data[P]===void 0&&(this.data[P]=[]);const j={value:h,timeout:void 0};if(_!==void 0&&(j.timeout=setTimeout(()=>{this.remove(o,j)},_)),this.data[P].push(j),this.order.push(P),this.order.length>this.max){const te=this._getAndRemoveByKey(this.order[0]);te&&this.onRemove(te)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const h=this.data[o].shift();return h.timeout&&clearTimeout(h.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),h.value}getByKey(o){const h=this.data[o];return h?h[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,h){if(!this.has(o))return this;const _=o.wrapped().key,P=h===void 0?0:this.data[_].indexOf(h),j=this.data[_][P];return this.data[_].splice(P,1),j.timeout&&clearTimeout(j.timeout),this.data[_].length===0&&delete this.data[_],this.onRemove(j.value),this.order.splice(this.order.indexOf(_),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(o){const h=[];for(const _ in this.data)for(const P of this.data[_])o(P.value)||h.push(P);for(const _ of h)this.remove(_.value.tileID,_)}}class K{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,h,_){const P=String(h);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][P]=this.stateChanges[o][P]||{},r.extend(this.stateChanges[o][P],_),this.deletedStates[o]===null){this.deletedStates[o]={};for(const j in this.state[o])j!==P&&(this.deletedStates[o][j]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][P]===null){this.deletedStates[o][P]={};for(const j in this.state[o][P])_[j]||(this.deletedStates[o][P][j]=null)}else for(const j in _)this.deletedStates[o]&&this.deletedStates[o][P]&&this.deletedStates[o][P][j]===null&&delete this.deletedStates[o][P][j]}removeFeatureState(o,h,_){if(this.deletedStates[o]===null)return;const P=String(h);if(this.deletedStates[o]=this.deletedStates[o]||{},_&&h!==void 0)this.deletedStates[o][P]!==null&&(this.deletedStates[o][P]=this.deletedStates[o][P]||{},this.deletedStates[o][P][_]=null);else if(h!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][P])for(_ in this.deletedStates[o][P]={},this.stateChanges[o][P])this.deletedStates[o][P][_]=null;else this.deletedStates[o][P]=null;else this.deletedStates[o]=null}getState(o,h){const _=String(h),P=r.extend({},(this.state[o]||{})[_],(this.stateChanges[o]||{})[_]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const j=this.deletedStates[o][h];if(j===null)return{};for(const te in j)delete P[te]}return P}initializeTileState(o,h){o.setFeatureState(this.state,h)}coalesceChanges(o,h){const _={};for(const P in this.stateChanges){this.state[P]=this.state[P]||{};const j={};for(const te in this.stateChanges[P])this.state[P][te]||(this.state[P][te]={}),r.extend(this.state[P][te],this.stateChanges[P][te]),j[te]=this.state[P][te];_[P]=j}for(const P in this.deletedStates){this.state[P]=this.state[P]||{};const j={};if(this.deletedStates[P]===null)for(const te in this.state[P])j[te]={},this.state[P][te]={};else for(const te in this.deletedStates[P]){if(this.deletedStates[P][te]===null)this.state[P][te]={};else for(const ce of Object.keys(this.deletedStates[P][te]))delete this.state[P][te][ce];j[te]=this.state[P][te]}_[P]=_[P]||{},r.extend(_[P],j)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(const P in o)o[P].setFeatureState(_,h)}}class J extends r.Evented{constructor(o,h,_){super(),this.id=o,this.dispatcher=_,this.on("data",P=>{P.dataType==="source"&&P.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&P.dataType==="source"&&P.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(P,j,te,ce){const me=new pe[j.type](P,j,te,ce);if(me.id!==P)throw new Error(`Expected Source id to be ${P} instead of ${me.id}`);return r.bindAll(["load","abort","unload","serialize","prepare"],me),me}(o,h,_,this),this._tiles={},this._cache=new Ee(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new K}onAdd(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(o)}onRemove(o){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(o)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles){const h=this._tiles[o];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(o,h){return this._source.loadTile(o,h)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o,()=>{})}_abortTile(o){this._source.abortTile&&this._source.abortTile(o,()=>{}),this._source.fire(new r.Event("dataabort",{tile:o,coord:o.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const _=this._tiles[h];_.upload(o),_.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(oe).map(o=>o.key)}getRenderableIds(o){const h=[];for(const _ in this._tiles)this._isIdRenderable(_,o)&&h.push(this._tiles[_]);return o?h.sort((_,P)=>{const j=_.tileID,te=P.tileID,ce=new r.pointGeometry(j.canonical.x,j.canonical.y)._rotate(this.transform.angle),me=new r.pointGeometry(te.canonical.x,te.canonical.y)._rotate(this.transform.angle);return j.overscaledZ-te.overscaledZ||me.y-ce.y||me.x-ce.x}).map(_=>_.tileID.key):h.map(_=>_.tileID).sort(oe).map(_=>_.key)}hasRenderableParent(o){const h=this.findLoadedParent(o,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(o,h){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(h||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")}}_reloadTile(o,h){const _=this._tiles[o];_&&(_.state!=="loading"&&(_.state=h),this._loadTile(_,this._tileLoaded.bind(this,_,o,h)))}_tileLoaded(o,h,_,P){if(P)return o.state="errored",void(P.status!==404?this._source.fire(new r.ErrorEvent(P,{tile:o})):this.update(this.transform,this.terrain));o.timeAdded=r.exported.now(),_==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(h,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),o.aborted||this._source.fire(new r.Event("data",{dataType:"source",tile:o,coord:o.tileID}))}_backfillDEM(o){const h=this.getRenderableIds();for(let P=0;P<h.length;P++){const j=h[P];if(o.neighboringTiles&&o.neighboringTiles[j]){const te=this.getTileByID(j);_(o,te),_(te,o)}}function _(P,j){P.needsHillshadePrepare=!0,P.needsTerrainPrepare=!0;let te=j.tileID.canonical.x-P.tileID.canonical.x;const ce=j.tileID.canonical.y-P.tileID.canonical.y,me=Math.pow(2,P.tileID.canonical.z),Se=j.tileID.key;te===0&&ce===0||Math.abs(ce)>1||(Math.abs(te)>1&&(Math.abs(te+me)===1?te+=me:Math.abs(te-me)===1&&(te-=me)),j.dem&&P.dem&&(P.dem.backfillBorder(j.dem,te,ce),P.neighboringTiles&&P.neighboringTiles[Se]&&(P.neighboringTiles[Se].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,h,_,P){for(const j in this._tiles){let te=this._tiles[j];if(P[j]||!te.hasData()||te.tileID.overscaledZ<=h||te.tileID.overscaledZ>_)continue;let ce=te.tileID;for(;te&&te.tileID.overscaledZ>h+1;){const Se=te.tileID.scaledTo(te.tileID.overscaledZ-1);te=this._tiles[Se.key],te&&te.hasData()&&(ce=Se)}let me=ce;for(;me.overscaledZ>h;)if(me=me.scaledTo(me.overscaledZ-1),o[me.key]){P[ce.key]=ce;break}}}findLoadedParent(o,h){if(o.key in this._loadedParentTiles){const _=this._loadedParentTiles[o.key];return _&&_.tileID.overscaledZ>=h?_:null}for(let _=o.overscaledZ-1;_>=h;_--){const P=o.scaledTo(_),j=this._getLoadedTile(P);if(j)return j}}_getLoadedTile(o){const h=this._tiles[o.key];return h&&h.hasData()?h:this._cache.getByKey(o.wrapped().key)}updateCacheSize(o){const h=Math.ceil(o.width/this._source.tileSize)+1,_=Math.ceil(o.height/this._source.tileSize)+1,P=Math.floor(h*_*5),j=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,P):P;this._cache.setMaxSize(j)}handleWrapJump(o){const h=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,h){const _={};for(const P in this._tiles){const j=this._tiles[P];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+h),_[j.tileID.key]=j}this._tiles=_;for(const P in this._timers)clearTimeout(this._timers[P]),delete this._timers[P];for(const P in this._tiles)this._setTileReloadTimer(P,this._tiles[P])}}update(o,h){if(this.transform=o,this.terrain=h,!this._sourceLoaded||this._paused)return;let _;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?_=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(Se=>new r.OverscaledTileID(Se.canonical.z,Se.wrap,Se.canonical.z,Se.canonical.x,Se.canonical.y)):(_=o.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h}),this._source.hasTile&&(_=_.filter(Se=>this._source.hasTile(Se)))):_=[];const P=o.coveringZoomLevel(this._source),j=Math.max(P-J.maxOverzooming,this._source.minzoom),te=Math.max(P+J.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Se={};for(const Ne of _)if(Ne.canonical.z>this._source.minzoom){const Ue=Ne.scaledTo(Ne.canonical.z-1);Se[Ue.key]=Ue;const We=Ne.scaledTo(Math.max(this._source.minzoom,Math.min(Ne.canonical.z,5)));Se[We.key]=We}_=_.concat(Object.values(Se))}const ce=this._updateRetainedTiles(_,P);if(we(this._source.type)){const Se={},Ne={},Ue=Object.keys(ce);for(const We of Ue){const it=ce[We],Je=this._tiles[We];if(!Je||Je.fadeEndTime&&Je.fadeEndTime<=r.exported.now())continue;const et=this.findLoadedParent(it,j);et&&(this._addTile(et.tileID),Se[et.tileID.key]=et.tileID),Ne[We]=it}this._retainLoadedChildren(Ne,P,te,ce);for(const We in Se)ce[We]||(this._coveredTiles[We]=!0,ce[We]=Se[We]);if(h){const We={},it={};for(const Je of _)this._tiles[Je.key].hasData()?We[Je.key]=Je:it[Je.key]=Je;for(const Je in it){const et=it[Je].children(this._source.maxzoom);this._tiles[et[0].key]&&this._tiles[et[1].key]&&this._tiles[et[2].key]&&this._tiles[et[3].key]&&(We[et[0].key]=ce[et[0].key]=et[0],We[et[1].key]=ce[et[1].key]=et[1],We[et[2].key]=ce[et[2].key]=et[2],We[et[3].key]=ce[et[3].key]=et[3],delete it[Je])}for(const Je in it){const et=this.findLoadedParent(it[Je],this._source.minzoom);if(et){We[et.tileID.key]=ce[et.tileID.key]=et.tileID;for(const pt in We)We[pt].isChildOf(et.tileID)&&delete We[pt]}}for(const Je in this._tiles)We[Je]||(this._coveredTiles[Je]=!0)}}for(const Se in ce)this._tiles[Se].clearFadeHold();const me=r.keysDifference(this._tiles,ce);for(const Se of me){const Ne=this._tiles[Se];Ne.hasSymbolBuckets&&!Ne.holdingForFade()?Ne.setHoldDuration(this.map._fadeDuration):Ne.hasSymbolBuckets&&!Ne.symbolFadeFinished()||this._removeTile(Se)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)}_updateRetainedTiles(o,h){const _={},P={},j=Math.max(h-J.maxOverzooming,this._source.minzoom),te=Math.max(h+J.maxUnderzooming,this._source.minzoom),ce={};for(const me of o){const Se=this._addTile(me);_[me.key]=me,Se.hasData()||h<this._source.maxzoom&&(ce[me.key]=me)}this._retainLoadedChildren(ce,h,te,_);for(const me of o){let Se=this._tiles[me.key];if(Se.hasData())continue;if(h+1>this._source.maxzoom){const Ue=me.children(this._source.maxzoom)[0],We=this.getTile(Ue);if(We&&We.hasData()){_[Ue.key]=Ue;continue}}else{const Ue=me.children(this._source.maxzoom);if(_[Ue[0].key]&&_[Ue[1].key]&&_[Ue[2].key]&&_[Ue[3].key])continue}let Ne=Se.wasRequested();for(let Ue=me.overscaledZ-1;Ue>=j;--Ue){const We=me.scaledTo(Ue);if(P[We.key]||(P[We.key]=!0,Se=this.getTile(We),!Se&&Ne&&(Se=this._addTile(We)),Se&&(_[We.key]=We,Ne=Se.wasRequested(),Se.hasData())))break}}return _}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const h=[];let _,P=this._tiles[o].tileID;for(;P.overscaledZ>0;){if(P.key in this._loadedParentTiles){_=this._loadedParentTiles[P.key];break}h.push(P.key);const j=P.scaledTo(P.overscaledZ-1);if(_=this._getLoadedTile(j),_)break;P=j}for(const j of h)this._loadedParentTiles[j]=_}}_addTile(o){let h=this._tiles[o.key];if(h)return h;h=this._cache.getAndRemove(o),h&&(this._setTileReloadTimer(o.key,h),h.tileID=o,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,h)));const _=h;return h||(h=new be(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(h,this._tileLoaded.bind(this,h,o.key,h.state))),h.uses++,this._tiles[o.key]=h,_||this._source.fire(new r.Event("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(o,h){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const _=h.getExpiryTimeout();_&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},_))}_removeTile(o){const h=this._tiles[o];h&&(h.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(o);this._cache.reset()}tilesIn(o,h,_){const P=[],j=this.transform;if(!j)return P;const te=_?j.getCameraQueryGeometry(o):o,ce=o.map(Je=>j.pointCoordinate(Je,this.terrain)),me=te.map(Je=>j.pointCoordinate(Je,this.terrain)),Se=this.getIds();let Ne=1/0,Ue=1/0,We=-1/0,it=-1/0;for(const Je of me)Ne=Math.min(Ne,Je.x),Ue=Math.min(Ue,Je.y),We=Math.max(We,Je.x),it=Math.max(it,Je.y);for(let Je=0;Je<Se.length;Je++){const et=this._tiles[Se[Je]];if(et.holdingForFade())continue;const pt=et.tileID,yt=Math.pow(2,j.zoom-et.tileID.overscaledZ),wt=h*et.queryPadding*r.EXTENT/et.tileSize/yt,at=[pt.getTilePoint(new r.MercatorCoordinate(Ne,Ue)),pt.getTilePoint(new r.MercatorCoordinate(We,it))];if(at[0].x-wt<r.EXTENT&&at[0].y-wt<r.EXTENT&&at[1].x+wt>=0&&at[1].y+wt>=0){const Mt=ce.map(Ot=>pt.getTilePoint(Ot)),St=me.map(Ot=>pt.getTilePoint(Ot));P.push({tile:et,tileID:pt,queryGeometry:Mt,cameraQueryGeometry:St,scale:yt})}}return P}getVisibleCoordinates(o){const h=this.getRenderableIds(o).map(_=>this._tiles[_].tileID);for(const _ of h)_.posMatrix=this.transform.calculatePosMatrix(_.toUnwrapped());return h}hasTransition(){if(this._source.hasTransition())return!0;if(we(this._source.type))for(const o in this._tiles){const h=this._tiles[o];if(h.fadeEndTime!==void 0&&h.fadeEndTime>=r.exported.now())return!0}return!1}setFeatureState(o,h,_){this._state.updateState(o=o||"_geojsonTileLayer",h,_)}removeFeatureState(o,h,_){this._state.removeFeatureState(o=o||"_geojsonTileLayer",h,_)}getFeatureState(o,h){return this._state.getState(o=o||"_geojsonTileLayer",h)}setDependencies(o,h,_){const P=this._tiles[o];P&&P.setDependencies(h,_)}reloadTilesForDependencies(o,h){for(const _ in this._tiles)this._tiles[_].hasDependency(o,h)&&this._reloadTile(_,"reloading");this._cache.filter(_=>!_.hasDependency(o,h))}}function oe(k,o){const h=Math.abs(2*k.wrap)-+(k.wrap<0),_=Math.abs(2*o.wrap)-+(o.wrap<0);return k.overscaledZ-o.overscaledZ||_-h||o.canonical.y-k.canonical.y||o.canonical.x-k.canonical.x}function we(k){return k==="raster"||k==="image"||k==="video"}J.maxOverzooming=10,J.maxUnderzooming=3;const ee="mapboxgl_preloaded_worker_pool";class re{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<re.workerCount;)this.workers.push(new Worker(eu.workerUrl));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ee]}numActive(){return Object.keys(this.active).length}}const ue=Math.floor(r.exported.hardwareConcurrency/2);let xe;function Te(){return xe||(xe=new re),xe}function ze(k,o){const h={};for(const _ in k)_!=="ref"&&(h[_]=k[_]);return r.refProperties.forEach(_=>{_ in o&&(h[_]=o[_])}),h}function Ce(k){k=k.slice();const o=Object.create(null);for(let h=0;h<k.length;h++)o[k[h].id]=k[h];for(let h=0;h<k.length;h++)"ref"in k[h]&&(k[h]=ze(k[h],o[k[h].ref]));return k}re.workerCount=Math.max(Math.min(ue,6),1);const Ie={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Be(k,o,h){h.push({command:Ie.addSource,args:[k,o[k]]})}function He(k,o,h){o.push({command:Ie.removeSource,args:[k]}),h[k]=!0}function Ae(k,o,h,_){He(k,h,_),Be(k,o,h)}function ye(k,o,h){let _;for(_ in k[h])if(Object.prototype.hasOwnProperty.call(k[h],_)&&_!=="data"&&!b(k[h][_],o[h][_]))return!1;for(_ in o[h])if(Object.prototype.hasOwnProperty.call(o[h],_)&&_!=="data"&&!b(k[h][_],o[h][_]))return!1;return!0}function ge(k,o,h,_,P,j){let te;for(te in o=o||{},k=k||{})Object.prototype.hasOwnProperty.call(k,te)&&(b(k[te],o[te])||h.push({command:j,args:[_,te,o[te],P]}));for(te in o)Object.prototype.hasOwnProperty.call(o,te)&&!Object.prototype.hasOwnProperty.call(k,te)&&(b(k[te],o[te])||h.push({command:j,args:[_,te,o[te],P]}))}function Me(k){return k.id}function De(k,o){return k[o.id]=o,k}class Pe{constructor(o,h){this.reset(o,h)}reset(o,h){this.points=o||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=r.clamp(o,0,1);let h=1,_=this._distances[h];const P=o*this.paddedLength+this.padding;for(;_<P&&h<this._distances.length;)_=this._distances[++h];const j=h-1,te=this._distances[j],ce=_-te,me=ce>0?(P-te)/ce:0;return this.points[j].mult(1-me).add(this.points[h].mult(me))}}function Fe(k,o){let h=!0;return k==="always"||k!=="never"&&o!=="never"||(h=!1),h}class Xe{constructor(o,h,_){const P=this.boxCells=[],j=this.circleCells=[];this.xCellCount=Math.ceil(o/_),this.yCellCount=Math.ceil(h/_);for(let te=0;te<this.xCellCount*this.yCellCount;te++)P.push([]),j.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=h,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,h,_,P,j){this._forEachCell(h,_,P,j,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(h),this.bboxes.push(_),this.bboxes.push(P),this.bboxes.push(j)}insertCircle(o,h,_,P){this._forEachCell(h-P,_-P,h+P,_+P,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(h),this.circles.push(_),this.circles.push(P)}_insertBoxCell(o,h,_,P,j,te){this.boxCells[j].push(te)}_insertCircleCell(o,h,_,P,j,te){this.circleCells[j].push(te)}_query(o,h,_,P,j,te,ce){if(_<0||o>this.width||P<0||h>this.height)return[];const me=[];if(o<=0&&h<=0&&this.width<=_&&this.height<=P){if(j)return[{key:null,x1:o,y1:h,x2:_,y2:P}];for(let Se=0;Se<this.boxKeys.length;Se++)me.push({key:this.boxKeys[Se],x1:this.bboxes[4*Se],y1:this.bboxes[4*Se+1],x2:this.bboxes[4*Se+2],y2:this.bboxes[4*Se+3]});for(let Se=0;Se<this.circleKeys.length;Se++){const Ne=this.circles[3*Se],Ue=this.circles[3*Se+1],We=this.circles[3*Se+2];me.push({key:this.circleKeys[Se],x1:Ne-We,y1:Ue-We,x2:Ne+We,y2:Ue+We})}}else this._forEachCell(o,h,_,P,this._queryCell,me,{hitTest:j,overlapMode:te,seenUids:{box:{},circle:{}}},ce);return me}query(o,h,_,P){return this._query(o,h,_,P,!1,null)}hitTest(o,h,_,P,j,te){return this._query(o,h,_,P,!0,j,te).length>0}hitTestCircle(o,h,_,P,j){const te=o-_,ce=o+_,me=h-_,Se=h+_;if(ce<0||te>this.width||Se<0||me>this.height)return!1;const Ne=[];return this._forEachCell(te,me,ce,Se,this._queryCellCircle,Ne,{hitTest:!0,overlapMode:P,circle:{x:o,y:h,radius:_},seenUids:{box:{},circle:{}}},j),Ne.length>0}_queryCell(o,h,_,P,j,te,ce,me){const{seenUids:Se,hitTest:Ne,overlapMode:Ue}=ce,We=this.boxCells[j];if(We!==null){const Je=this.bboxes;for(const et of We)if(!Se.box[et]){Se.box[et]=!0;const pt=4*et,yt=this.boxKeys[et];if(o<=Je[pt+2]&&h<=Je[pt+3]&&_>=Je[pt+0]&&P>=Je[pt+1]&&(!me||me(yt))&&(!Ne||!Fe(Ue,yt.overlapMode))&&(te.push({key:yt,x1:Je[pt],y1:Je[pt+1],x2:Je[pt+2],y2:Je[pt+3]}),Ne))return!0}}const it=this.circleCells[j];if(it!==null){const Je=this.circles;for(const et of it)if(!Se.circle[et]){Se.circle[et]=!0;const pt=3*et,yt=this.circleKeys[et];if(this._circleAndRectCollide(Je[pt],Je[pt+1],Je[pt+2],o,h,_,P)&&(!me||me(yt))&&(!Ne||!Fe(Ue,yt.overlapMode))){const wt=Je[pt],at=Je[pt+1],Mt=Je[pt+2];if(te.push({key:yt,x1:wt-Mt,y1:at-Mt,x2:wt+Mt,y2:at+Mt}),Ne)return!0}}}return!1}_queryCellCircle(o,h,_,P,j,te,ce,me){const{circle:Se,seenUids:Ne,overlapMode:Ue}=ce,We=this.boxCells[j];if(We!==null){const Je=this.bboxes;for(const et of We)if(!Ne.box[et]){Ne.box[et]=!0;const pt=4*et,yt=this.boxKeys[et];if(this._circleAndRectCollide(Se.x,Se.y,Se.radius,Je[pt+0],Je[pt+1],Je[pt+2],Je[pt+3])&&(!me||me(yt))&&!Fe(Ue,yt.overlapMode))return te.push(!0),!0}}const it=this.circleCells[j];if(it!==null){const Je=this.circles;for(const et of it)if(!Ne.circle[et]){Ne.circle[et]=!0;const pt=3*et,yt=this.circleKeys[et];if(this._circlesCollide(Je[pt],Je[pt+1],Je[pt+2],Se.x,Se.y,Se.radius)&&(!me||me(yt))&&!Fe(Ue,yt.overlapMode))return te.push(!0),!0}}}_forEachCell(o,h,_,P,j,te,ce,me){const Se=this._convertToXCellCoord(o),Ne=this._convertToYCellCoord(h),Ue=this._convertToXCellCoord(_),We=this._convertToYCellCoord(P);for(let it=Se;it<=Ue;it++)for(let Je=Ne;Je<=We;Je++)if(j.call(this,o,h,_,P,this.xCellCount*Je+it,te,ce,me))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,h,_,P,j,te){const ce=P-o,me=j-h,Se=_+te;return Se*Se>ce*ce+me*me}_circleAndRectCollide(o,h,_,P,j,te,ce){const me=(te-P)/2,Se=Math.abs(o-(P+me));if(Se>me+_)return!1;const Ne=(ce-j)/2,Ue=Math.abs(h-(j+Ne));if(Ue>Ne+_)return!1;if(Se<=me||Ue<=Ne)return!0;const We=Se-me,it=Ue-Ne;return We*We+it*it<=_*_}}function tt(k,o,h,_,P){const j=r.create();return o?(r.scale(j,j,[1/P,1/P,1]),h||r.rotateZ(j,j,_.angle)):r.multiply(j,_.labelPlaneMatrix,k),j}function nt(k,o,h,_,P){if(o){const j=r.clone(k);return r.scale(j,j,[P,P,1]),h||r.rotateZ(j,j,-_.angle),j}return _.glCoordMatrix}function ht(k,o,h){let _;h?(_=[k.x,k.y,h(k.x,k.y),1],r.transformMat4(_,_,o)):(_=[k.x,k.y,0,1],Xi(_,_,o));const P=_[3];return{point:new r.pointGeometry(_[0]/P,_[1]/P),signedDistanceFromCamera:P}}function gt(k,o){return .5+k/o*.5}function Tt(k,o){const h=k[0]/k[3],_=k[1]/k[3];return h>=-o[0]&&h<=o[0]&&_>=-o[1]&&_<=o[1]}function Lt(k,o,h,_,P,j,te,ce,me,Se){const Ne=_?k.textSizeData:k.iconSizeData,Ue=r.evaluateSizeForZoom(Ne,h.transform.zoom),We=[256/h.width*2+1,256/h.height*2+1],it=_?k.text.dynamicLayoutVertexArray:k.icon.dynamicLayoutVertexArray;it.clear();const Je=k.lineVertexArray,et=_?k.text.placedSymbolArray:k.icon.placedSymbolArray,pt=h.transform.width/h.transform.height;let yt=!1;for(let wt=0;wt<et.length;wt++){const at=et.get(wt);if(at.hidden||at.writingMode===r.WritingMode.vertical&&!yt){cn(at.numGlyphs,it);continue}let Mt;if(yt=!1,Se?(Mt=[at.anchorX,at.anchorY,Se(at.anchorX,at.anchorY),1],r.transformMat4(Mt,Mt,o)):(Mt=[at.anchorX,at.anchorY,0,1],Xi(Mt,Mt,o)),!Tt(Mt,We)){cn(at.numGlyphs,it);continue}const St=gt(h.transform.cameraToCenterDistance,Mt[3]),Ot=r.evaluateSizeForFeature(Ne,Ue,at),jt=te?Ot/St:Ot*St,Ut=new r.pointGeometry(at.anchorX,at.anchorY),zt=ht(Ut,P,Se).point,ai={},Xt=Ct(at,jt,!1,ce,o,P,j,k.glyphOffsetArray,Je,it,zt,Ut,ai,pt,me,Se);yt=Xt.useVertical,(Xt.notEnoughRoom||yt||Xt.needsFlipping&&Ct(at,jt,!0,ce,o,P,j,k.glyphOffsetArray,Je,it,zt,Ut,ai,pt,me,Se).notEnoughRoom)&&cn(at.numGlyphs,it)}_?k.text.dynamicLayoutVertexBuffer.updateData(it):k.icon.dynamicLayoutVertexBuffer.updateData(it)}function ft(k,o,h,_,P,j,te,ce,me,Se,Ne,Ue,We){const it=ce.glyphStartIndex+ce.numGlyphs,Je=ce.lineStartIndex,et=ce.lineStartIndex+ce.lineLength,pt=o.getoffsetX(ce.glyphStartIndex),yt=o.getoffsetX(it-1),wt=di(k*pt,h,_,P,j,te,ce.segment,Je,et,me,Se,Ne,Ue,We);if(!wt)return null;const at=di(k*yt,h,_,P,j,te,ce.segment,Je,et,me,Se,Ne,Ue,We);return at?{first:wt,last:at}:null}function Et(k,o,h,_){return k===r.WritingMode.horizontal&&Math.abs(h.y-o.y)>Math.abs(h.x-o.x)*_?{useVertical:!0}:(k===r.WritingMode.vertical?o.y<h.y:o.x>h.x)?{needsFlipping:!0}:null}function Ct(k,o,h,_,P,j,te,ce,me,Se,Ne,Ue,We,it,Je,et){const pt=o/24,yt=k.lineOffsetX*pt,wt=k.lineOffsetY*pt;let at;if(k.numGlyphs>1){const Mt=k.glyphStartIndex+k.numGlyphs,St=k.lineStartIndex,Ot=k.lineStartIndex+k.lineLength,jt=ft(pt,ce,yt,wt,h,Ne,Ue,k,me,j,We,Je,et);if(!jt)return{notEnoughRoom:!0};const Ut=ht(jt.first.point,te,et).point,zt=ht(jt.last.point,te,et).point;if(_&&!h){const ai=Et(k.writingMode,Ut,zt,it);if(ai)return ai}at=[jt.first];for(let ai=k.glyphStartIndex+1;ai<Mt-1;ai++)at.push(di(pt*ce.getoffsetX(ai),yt,wt,h,Ne,Ue,k.segment,St,Ot,me,j,We,Je,et));at.push(jt.last)}else{if(_&&!h){const St=ht(Ue,P,et).point,Ot=k.lineStartIndex+k.segment+1,jt=new r.pointGeometry(me.getx(Ot),me.gety(Ot)),Ut=ht(jt,P,et),zt=Ut.signedDistanceFromCamera>0?Ut.point:si(Ue,jt,St,1,P,et),ai=Et(k.writingMode,St,zt,it);if(ai)return ai}const Mt=di(pt*ce.getoffsetX(k.glyphStartIndex),yt,wt,h,Ne,Ue,k.segment,k.lineStartIndex,k.lineStartIndex+k.lineLength,me,j,We,Je,et);if(!Mt)return{notEnoughRoom:!0};at=[Mt]}for(const Mt of at)r.addDynamicAttributes(Se,Mt.point,Mt.angle);return{}}function si(k,o,h,_,P,j){const te=ht(k.add(k.sub(o)._unit()),P,j).point,ce=h.sub(te);return h.add(ce._mult(_/ce.mag()))}function di(k,o,h,_,P,j,te,ce,me,Se,Ne,Ue,We,it){const Je=_?k-o:k+o;let et=Je>0?1:-1,pt=0;_&&(et*=-1,pt=Math.PI),et<0&&(pt+=Math.PI);let yt=et>0?ce+te:ce+te+1,wt=P,at=P,Mt=0,St=0;const Ot=Math.abs(Je),jt=[];for(;Mt+St<=Ot;){if(yt+=et,yt<ce||yt>=me)return null;if(at=wt,jt.push(wt),wt=Ue[yt],wt===void 0){const li=new r.pointGeometry(Se.getx(yt),Se.gety(yt)),Ki=ht(li,Ne,it);if(Ki.signedDistanceFromCamera>0)wt=Ue[yt]=Ki.point;else{const un=yt-et;wt=si(Mt===0?j:new r.pointGeometry(Se.getx(un),Se.gety(un)),li,at,Ot-Mt+1,Ne,it)}}Mt+=St,St=at.dist(wt)}const Ut=(Ot-Mt)/St,zt=wt.sub(at),ai=zt.mult(Ut)._add(at);ai._add(zt._unit()._perp()._mult(h*et));const Xt=pt+Math.atan2(wt.y-at.y,wt.x-at.x);return jt.push(ai),{point:ai,angle:We?Xt:0,path:jt}}const qt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function cn(k,o){for(let h=0;h<k;h++){const _=o.length;o.resize(_+4),o.float32.set(qt,3*_)}}function Xi(k,o,h){const _=o[0],P=o[1];return k[0]=h[0]*_+h[4]*P+h[12],k[1]=h[1]*_+h[5]*P+h[13],k[3]=h[3]*_+h[7]*P+h[15],k}const xn=100;class Fn{constructor(o,h=new Xe(o.width+200,o.height+200,25),_=new Xe(o.width+200,o.height+200,25)){this.transform=o,this.grid=h,this.ignoredGrid=_,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+xn,this.screenBottomBoundary=o.height+xn,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(o,h,_,P,j,te){const ce=this.projectAndGetPerspectiveRatio(P,o.anchorPointX,o.anchorPointY,te),me=_*ce.perspectiveRatio,Se=o.x1*me+ce.point.x,Ne=o.y1*me+ce.point.y,Ue=o.x2*me+ce.point.x,We=o.y2*me+ce.point.y;return!this.isInsideGrid(Se,Ne,Ue,We)||h!=="always"&&this.grid.hitTest(Se,Ne,Ue,We,h,j)||ce.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[Se,Ne,Ue,We],offscreen:this.isOffscreen(Se,Ne,Ue,We)}}placeCollisionCircles(o,h,_,P,j,te,ce,me,Se,Ne,Ue,We,it,Je){const et=[],pt=new r.pointGeometry(h.anchorX,h.anchorY),yt=ht(pt,te,Je),wt=gt(this.transform.cameraToCenterDistance,yt.signedDistanceFromCamera),at=(Ne?j/wt:j*wt)/r.ONE_EM,Mt=ht(pt,ce,Je).point,St=ft(at,P,h.lineOffsetX*at,h.lineOffsetY*at,!1,Mt,pt,h,_,ce,{},!1,Je);let Ot=!1,jt=!1,Ut=!0;if(St){const zt=.5*We*wt+it,ai=new r.pointGeometry(-100,-100),Xt=new r.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),li=new Pe,Ki=St.first,un=St.last;let Ii=[];for(let wn=Ki.path.length-1;wn>=1;wn--)Ii.push(Ki.path[wn]);for(let wn=1;wn<un.path.length;wn++)Ii.push(un.path[wn]);const $n=2.5*zt;if(me){const wn=Ii.map(Cn=>ht(Cn,me,Je));Ii=wn.some(Cn=>Cn.signedDistanceFromCamera<=0)?[]:wn.map(Cn=>Cn.point)}let Un=[];if(Ii.length>0){const wn=Ii[0].clone(),Cn=Ii[0].clone();for(let kn=1;kn<Ii.length;kn++)wn.x=Math.min(wn.x,Ii[kn].x),wn.y=Math.min(wn.y,Ii[kn].y),Cn.x=Math.max(Cn.x,Ii[kn].x),Cn.y=Math.max(Cn.y,Ii[kn].y);Un=wn.x>=ai.x&&Cn.x<=Xt.x&&wn.y>=ai.y&&Cn.y<=Xt.y?[Ii]:Cn.x<ai.x||wn.x>Xt.x||Cn.y<ai.y||wn.y>Xt.y?[]:r.clipLine([Ii],ai.x,ai.y,Xt.x,Xt.y)}for(const wn of Un){li.reset(wn,.25*zt);let Cn=0;Cn=li.length<=.5*zt?1:Math.ceil(li.paddedLength/$n)+1;for(let kn=0;kn<Cn;kn++){const ta=kn/Math.max(Cn-1,1),Ka=li.lerp(ta),Ia=Ka.x+xn,Da=Ka.y+xn;et.push(Ia,Da,zt,0);const ul=Ia-zt,os=Da-zt,Ra=Ia+zt,dl=Da+zt;if(Ut=Ut&&this.isOffscreen(ul,os,Ra,dl),jt=jt||this.isInsideGrid(ul,os,Ra,dl),o!=="always"&&this.grid.hitTestCircle(Ia,Da,zt,o,Ue)&&(Ot=!0,!Se))return{circles:[],offscreen:!1,collisionDetected:Ot}}}}return{circles:!Se&&Ot||!jt||wt<this.perspectiveRatioCutoff?[]:et,offscreen:Ut,collisionDetected:Ot}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let _=1/0,P=1/0,j=-1/0,te=-1/0;for(const Ne of o){const Ue=new r.pointGeometry(Ne.x+xn,Ne.y+xn);_=Math.min(_,Ue.x),P=Math.min(P,Ue.y),j=Math.max(j,Ue.x),te=Math.max(te,Ue.y),h.push(Ue)}const ce=this.grid.query(_,P,j,te).concat(this.ignoredGrid.query(_,P,j,te)),me={},Se={};for(const Ne of ce){const Ue=Ne.key;if(me[Ue.bucketInstanceId]===void 0&&(me[Ue.bucketInstanceId]={}),me[Ue.bucketInstanceId][Ue.featureIndex])continue;const We=[new r.pointGeometry(Ne.x1,Ne.y1),new r.pointGeometry(Ne.x2,Ne.y1),new r.pointGeometry(Ne.x2,Ne.y2),new r.pointGeometry(Ne.x1,Ne.y2)];r.polygonIntersectsPolygon(h,We)&&(me[Ue.bucketInstanceId][Ue.featureIndex]=!0,Se[Ue.bucketInstanceId]===void 0&&(Se[Ue.bucketInstanceId]=[]),Se[Ue.bucketInstanceId].push(Ue.featureIndex))}return Se}insertCollisionBox(o,h,_,P,j,te){(_?this.ignoredGrid:this.grid).insert({bucketInstanceId:P,featureIndex:j,collisionGroupID:te,overlapMode:h},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,h,_,P,j,te){const ce=_?this.ignoredGrid:this.grid,me={bucketInstanceId:P,featureIndex:j,collisionGroupID:te,overlapMode:h};for(let Se=0;Se<o.length;Se+=4)ce.insertCircle(me,o[Se],o[Se+1],o[Se+2])}projectAndGetPerspectiveRatio(o,h,_,P){let j;return P?(j=[h,_,P(h,_),1],r.transformMat4(j,j,o)):(j=[h,_,0,1],Xi(j,j,o)),{point:new r.pointGeometry((j[0]/j[3]+1)/2*this.transform.width+xn,(-j[1]/j[3]+1)/2*this.transform.height+xn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/j[3]*.5}}isOffscreen(o,h,_,P){return _<xn||o>=this.screenRightBoundary||P<xn||h>this.screenBottomBoundary}isInsideGrid(o,h,_,P){return _>=0&&o<this.gridRightBoundary&&P>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const o=r.identity([]);return r.translate(o,o,[-100,-100,0]),o}}function sn(k,o,h){return o*(r.EXTENT/(k.tileSize*Math.pow(2,h-k.tileID.overscaledZ)))}class dt{constructor(o,h,_,P){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?h:-h))):P&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class bt{constructor(o,h,_,P,j){this.text=new dt(o?o.text:null,h,_,j),this.icon=new dt(o?o.icon:null,h,P,j)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class It{constructor(o,h,_){this.text=o,this.icon=h,this.skipFade=_}}class Ft{constructor(){this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.circles=[]}}class Yt{constructor(o,h,_,P,j){this.bucketInstanceId=o,this.featureIndex=h,this.sourceLayerIndex=_,this.bucketIndex=P,this.tileID=j}}class bi{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const h=++this.maxGroupID;this.collisionGroups[o]={ID:h,predicate:_=>_.collisionGroupID===h}}return this.collisionGroups[o]}}function Oi(k,o,h,_,P){const{horizontalAlign:j,verticalAlign:te}=r.getAnchorAlignment(k),ce=-(j-.5)*o,me=-(te-.5)*h,Se=r.evaluateVariableOffset(k,_);return new r.pointGeometry(ce+Se[0]*P,me+Se[1]*P)}function hi(k,o,h,_,P,j){const{x1:te,x2:ce,y1:me,y2:Se,anchorPointX:Ne,anchorPointY:Ue}=k,We=new r.pointGeometry(o,h);return _&&We._rotate(P?j:-j),{x1:te+We.x,y1:me+We.y,x2:ce+We.x,y2:Se+We.y,anchorPointX:Ne,anchorPointY:Ue}}class qe{constructor(o,h,_,P,j){this.transform=o.clone(),this.terrain=h,this.collisionIndex=new Fn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=_,this.retainedQueryData={},this.collisionGroups=new bi(P),this.collisionCircleArrays={},this.prevPlacement=j,j&&(j.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,h,_,P){const j=_.getBucket(h),te=_.latestFeatureIndex;if(!j||!te||h.id!==j.layerIds[0])return;const ce=_.collisionBoxArray,me=j.layers[0].layout,Se=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),Ne=_.tileSize/r.EXTENT,Ue=this.transform.calculatePosMatrix(_.tileID.toUnwrapped()),We=me.get("text-pitch-alignment")==="map",it=me.get("text-rotation-alignment")==="map",Je=sn(_,1,this.transform.zoom),et=tt(Ue,We,it,this.transform,Je);let pt=null;if(We){const wt=nt(Ue,We,it,this.transform,Je);pt=r.multiply([],this.transform.labelPlaneMatrix,wt)}this.retainedQueryData[j.bucketInstanceId]=new Yt(j.bucketInstanceId,te,j.sourceLayerIndex,j.index,_.tileID);const yt={bucket:j,layout:me,posMatrix:Ue,textLabelPlaneMatrix:et,labelToScreenMatrix:pt,scale:Se,textPixelRatio:Ne,holdingForFade:_.holdingForFade(),collisionBoxArray:ce,partiallyEvaluatedTextSize:r.evaluateSizeForZoom(j.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(j.sourceID)};if(P)for(const wt of j.sortKeyRanges){const{sortKey:at,symbolInstanceStart:Mt,symbolInstanceEnd:St}=wt;o.push({sortKey:at,symbolInstanceStart:Mt,symbolInstanceEnd:St,parameters:yt})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:j.symbolInstances.length,parameters:yt})}attemptAnchorPlacement(o,h,_,P,j,te,ce,me,Se,Ne,Ue,We,it,Je,et,pt){const yt=[We.textOffset0,We.textOffset1],wt=Oi(o,_,P,yt,j),at=this.collisionIndex.placeCollisionBox(hi(h,wt.x,wt.y,te,ce,this.transform.angle),Ue,me,Se,Ne.predicate,pt);if((!et||this.collisionIndex.placeCollisionBox(hi(et,wt.x,wt.y,te,ce,this.transform.angle),Ue,me,Se,Ne.predicate,pt).box.length!==0)&&at.box.length>0){let Mt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[We.crossTileID]&&this.prevPlacement.placements[We.crossTileID]&&this.prevPlacement.placements[We.crossTileID].text&&(Mt=this.prevPlacement.variableOffsets[We.crossTileID].anchor),We.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[We.crossTileID]={textOffset:yt,width:_,height:P,anchor:o,textBoxScale:j,prevAnchor:Mt},this.markUsedJustification(it,o,We,Je),it.allowVerticalPlacement&&(this.markUsedOrientation(it,Je,We),this.placedOrientations[We.crossTileID]=Je),{shift:wt,placedGlyphBoxes:at}}}placeLayerBucketPart(o,h,_){const{bucket:P,layout:j,posMatrix:te,textLabelPlaneMatrix:ce,labelToScreenMatrix:me,textPixelRatio:Se,holdingForFade:Ne,collisionBoxArray:Ue,partiallyEvaluatedTextSize:We,collisionGroup:it}=o.parameters,Je=j.get("text-optional"),et=j.get("icon-optional"),pt=r.getOverlapMode(j,"text-overlap","text-allow-overlap"),yt=pt==="always",wt=r.getOverlapMode(j,"icon-overlap","icon-allow-overlap"),at=wt==="always",Mt=j.get("text-rotation-alignment")==="map",St=j.get("text-pitch-alignment")==="map",Ot=j.get("icon-text-fit")!=="none",jt=j.get("symbol-z-order")==="viewport-y",Ut=yt&&(at||!P.hasIconData()||et),zt=at&&(yt||!P.hasTextData()||Je);!P.collisionArrays&&Ue&&P.deserializeCollisionBoxes(Ue);const ai=(Xt,li)=>{if(h[Xt.crossTileID])return;if(Ne)return void(this.placements[Xt.crossTileID]=new It(!1,!1,!1));let Ki=!1,un=!1,Ii=!0,$n=null,Un={box:null,offscreen:null},wn={box:null,offscreen:null},Cn=null,kn=null,ta=null,Ka=0,Ia=0,Da=0;li.textFeatureIndex?Ka=li.textFeatureIndex:Xt.useRuntimeCollisionCircles&&(Ka=Xt.featureIndex),li.verticalTextFeatureIndex&&(Ia=li.verticalTextFeatureIndex);const ul=this.retainedQueryData[P.bucketInstanceId].tileID,os=this.terrain?(An,rr)=>this.terrain.getElevation(ul,An,rr):null;for(const An of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const rr=li[An];rr&&(rr.elevation=os?os(rr.anchorPointX,rr.anchorPointY):0)}const Ra=li.textBox;if(Ra){const An=Pn=>{let jr=r.WritingMode.horizontal;if(P.allowVerticalPlacement&&!Pn&&this.prevPlacement){const Vs=this.prevPlacement.placedOrientations[Xt.crossTileID];Vs&&(this.placedOrientations[Xt.crossTileID]=Vs,jr=Vs,this.markUsedOrientation(P,jr,Xt))}return jr},rr=(Pn,jr)=>{if(P.allowVerticalPlacement&&Xt.numVerticalGlyphVertices>0&&li.verticalTextBox){for(const Vs of P.writingModes)if(Vs===r.WritingMode.vertical?(Un=jr(),wn=Un):Un=Pn(),Un&&Un.box&&Un.box.length)break}else Un=Pn()};if(j.get("text-variable-anchor")){let Pn=j.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Xt.crossTileID]){const cr=this.prevPlacement.variableOffsets[Xt.crossTileID];Pn.indexOf(cr.anchor)>0&&(Pn=Pn.filter(_a=>_a!==cr.anchor),Pn.unshift(cr.anchor))}const jr=(cr,_a,ql)=>{const Wl=cr.x2-cr.x1,yd=cr.y2-cr.y1,np=Xt.textBoxScale,xd=Ot&&wt==="never"?_a:null;let La={box:[],offscreen:!1};const bd=pt!=="never"?2*Pn.length:Pn.length;for(let tu=0;tu<bd;++tu){const vd=this.attemptAnchorPlacement(Pn[tu%Pn.length],cr,Wl,yd,np,Mt,St,Se,te,it,tu>=Pn.length?pt:"never",Xt,P,ql,xd,os);if(vd&&(La=vd.placedGlyphBoxes,La&&La.box&&La.box.length)){Ki=!0,$n=vd.shift;break}}return La};rr(()=>jr(Ra,li.iconBox,r.WritingMode.horizontal),()=>{const cr=li.verticalTextBox;return P.allowVerticalPlacement&&!(Un&&Un.box&&Un.box.length)&&Xt.numVerticalGlyphVertices>0&&cr?jr(cr,li.verticalIconBox,r.WritingMode.vertical):{box:null,offscreen:null}}),Un&&(Ki=Un.box,Ii=Un.offscreen);const Vs=An(Un&&Un.box);if(!Ki&&this.prevPlacement){const cr=this.prevPlacement.variableOffsets[Xt.crossTileID];cr&&(this.variableOffsets[Xt.crossTileID]=cr,this.markUsedJustification(P,cr.anchor,Xt,Vs))}}else{const Pn=(jr,Vs)=>{const cr=this.collisionIndex.placeCollisionBox(jr,pt,Se,te,it.predicate,os);return cr&&cr.box&&cr.box.length&&(this.markUsedOrientation(P,Vs,Xt),this.placedOrientations[Xt.crossTileID]=Vs),cr};rr(()=>Pn(Ra,r.WritingMode.horizontal),()=>{const jr=li.verticalTextBox;return P.allowVerticalPlacement&&Xt.numVerticalGlyphVertices>0&&jr?Pn(jr,r.WritingMode.vertical):{box:null,offscreen:null}}),An(Un&&Un.box&&Un.box.length)}}if(Cn=Un,Ki=Cn&&Cn.box&&Cn.box.length>0,Ii=Cn&&Cn.offscreen,Xt.useRuntimeCollisionCircles){const An=P.text.placedSymbolArray.get(Xt.centerJustifiedTextSymbolIndex),rr=r.evaluateSizeForFeature(P.textSizeData,We,An),Pn=j.get("text-padding");kn=this.collisionIndex.placeCollisionCircles(pt,An,P.lineVertexArray,P.glyphOffsetArray,rr,te,ce,me,_,St,it.predicate,Xt.collisionCircleDiameter,Pn,os),kn.circles.length&&kn.collisionDetected&&!_&&r.warnOnce("Collisions detected, but collision boxes are not shown"),Ki=yt||kn.circles.length>0&&!kn.collisionDetected,Ii=Ii&&kn.offscreen}if(li.iconFeatureIndex&&(Da=li.iconFeatureIndex),li.iconBox){const An=rr=>{const Pn=Ot&&$n?hi(rr,$n.x,$n.y,Mt,St,this.transform.angle):rr;return this.collisionIndex.placeCollisionBox(Pn,wt,Se,te,it.predicate,os)};wn&&wn.box&&wn.box.length&&li.verticalIconBox?(ta=An(li.verticalIconBox),un=ta.box.length>0):(ta=An(li.iconBox),un=ta.box.length>0),Ii=Ii&&ta.offscreen}const dl=Je||Xt.numHorizontalGlyphVertices===0&&Xt.numVerticalGlyphVertices===0,gd=et||Xt.numIconVertices===0;if(dl||gd?gd?dl||(un=un&&Ki):Ki=un&&Ki:un=Ki=un&&Ki,Ki&&Cn&&Cn.box&&this.collisionIndex.insertCollisionBox(Cn.box,pt,j.get("text-ignore-placement"),P.bucketInstanceId,wn&&wn.box&&Ia?Ia:Ka,it.ID),un&&ta&&this.collisionIndex.insertCollisionBox(ta.box,wt,j.get("icon-ignore-placement"),P.bucketInstanceId,Da,it.ID),kn&&(Ki&&this.collisionIndex.insertCollisionCircles(kn.circles,pt,j.get("text-ignore-placement"),P.bucketInstanceId,Ka,it.ID),_)){const An=P.bucketInstanceId;let rr=this.collisionCircleArrays[An];rr===void 0&&(rr=this.collisionCircleArrays[An]=new Ft);for(let Pn=0;Pn<kn.circles.length;Pn+=4)rr.circles.push(kn.circles[Pn+0]),rr.circles.push(kn.circles[Pn+1]),rr.circles.push(kn.circles[Pn+2]),rr.circles.push(kn.collisionDetected?1:0)}if(Xt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(P.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Xt.crossTileID]=new It(Ki||Ut,un||zt,Ii||P.justReloaded),h[Xt.crossTileID]=!0};if(jt){if(o.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Xt=P.getSortedSymbolIndexes(this.transform.angle);for(let li=Xt.length-1;li>=0;--li){const Ki=Xt[li];ai(P.symbolInstances.get(Ki),P.collisionArrays[Ki])}}else for(let Xt=o.symbolInstanceStart;Xt<o.symbolInstanceEnd;Xt++)ai(P.symbolInstances.get(Xt),P.collisionArrays[Xt]);if(_&&P.bucketInstanceId in this.collisionCircleArrays){const Xt=this.collisionCircleArrays[P.bucketInstanceId];r.invert(Xt.invProjMatrix,te),Xt.viewportMatrix=this.collisionIndex.getViewportMatrix()}P.justReloaded=!1}markUsedJustification(o,h,_,P){let j;j=P===r.WritingMode.vertical?_.verticalPlacedTextSymbolIndex:{left:_.leftJustifiedTextSymbolIndex,center:_.centerJustifiedTextSymbolIndex,right:_.rightJustifiedTextSymbolIndex}[r.getAnchorJustification(h)];const te=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex,_.verticalPlacedTextSymbolIndex];for(const ce of te)ce>=0&&(o.text.placedSymbolArray.get(ce).crossTileID=j>=0&&ce!==j?0:_.crossTileID)}markUsedOrientation(o,h,_){const P=h===r.WritingMode.horizontal||h===r.WritingMode.horizontalOnly?h:0,j=h===r.WritingMode.vertical?h:0,te=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex];for(const ce of te)o.text.placedSymbolArray.get(ce).placedOrientation=P;_.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(_.verticalPlacedTextSymbolIndex).placedOrientation=j)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let _=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const P=h?h.symbolFadeChange(o):1,j=h?h.opacities:{},te=h?h.variableOffsets:{},ce=h?h.placedOrientations:{};for(const me in this.placements){const Se=this.placements[me],Ne=j[me];Ne?(this.opacities[me]=new bt(Ne,P,Se.text,Se.icon),_=_||Se.text!==Ne.text.placed||Se.icon!==Ne.icon.placed):(this.opacities[me]=new bt(null,P,Se.text,Se.icon,Se.skipFade),_=_||Se.text||Se.icon)}for(const me in j){const Se=j[me];if(!this.opacities[me]){const Ne=new bt(Se,P,!1,!1);Ne.isHidden()||(this.opacities[me]=Ne,_=_||Se.text.placed||Se.icon.placed)}}for(const me in te)this.variableOffsets[me]||!this.opacities[me]||this.opacities[me].isHidden()||(this.variableOffsets[me]=te[me]);for(const me in ce)this.placedOrientations[me]||!this.opacities[me]||this.opacities[me].isHidden()||(this.placedOrientations[me]=ce[me]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");_?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:o)}updateLayerOpacities(o,h){const _={};for(const P of h){const j=P.getBucket(o);j&&P.latestFeatureIndex&&o.id===j.layerIds[0]&&this.updateBucketOpacities(j,_,P.collisionBoxArray)}}updateBucketOpacities(o,h,_){o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const P=o.layers[0].layout,j=new bt(null,0,!1,!1,!0),te=P.get("text-allow-overlap"),ce=P.get("icon-allow-overlap"),me=P.get("text-variable-anchor"),Se=P.get("text-rotation-alignment")==="map",Ne=P.get("text-pitch-alignment")==="map",Ue=P.get("icon-text-fit")!=="none",We=new bt(null,0,te&&(ce||!o.hasIconData()||P.get("icon-optional")),ce&&(te||!o.hasTextData()||P.get("text-optional")),!0);!o.collisionArrays&&_&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(_);const it=(Je,et,pt)=>{for(let yt=0;yt<et/4;yt++)Je.opacityVertexArray.emplaceBack(pt)};for(let Je=0;Je<o.symbolInstances.length;Je++){const et=o.symbolInstances.get(Je),{numHorizontalGlyphVertices:pt,numVerticalGlyphVertices:yt,crossTileID:wt}=et;let at=this.opacities[wt];h[wt]?at=j:at||(at=We,this.opacities[wt]=at),h[wt]=!0;const Mt=et.numIconVertices>0,St=this.placedOrientations[et.crossTileID],Ot=St===r.WritingMode.vertical,jt=St===r.WritingMode.horizontal||St===r.WritingMode.horizontalOnly;if(pt>0||yt>0){const Ut=mt(at.text);it(o.text,pt,Ot?At:Ut),it(o.text,yt,jt?At:Ut);const zt=at.text.isHidden();[et.rightJustifiedTextSymbolIndex,et.centerJustifiedTextSymbolIndex,et.leftJustifiedTextSymbolIndex].forEach(li=>{li>=0&&(o.text.placedSymbolArray.get(li).hidden=zt||Ot?1:0)}),et.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(et.verticalPlacedTextSymbolIndex).hidden=zt||jt?1:0);const ai=this.variableOffsets[et.crossTileID];ai&&this.markUsedJustification(o,ai.anchor,et,St);const Xt=this.placedOrientations[et.crossTileID];Xt&&(this.markUsedJustification(o,"left",et,Xt),this.markUsedOrientation(o,Xt,et))}if(Mt){const Ut=mt(at.icon),zt=!(Ue&&et.verticalPlacedIconSymbolIndex&&Ot);et.placedIconSymbolIndex>=0&&(it(o.icon,et.numIconVertices,zt?Ut:At),o.icon.placedSymbolArray.get(et.placedIconSymbolIndex).hidden=at.icon.isHidden()),et.verticalPlacedIconSymbolIndex>=0&&(it(o.icon,et.numVerticalIconVertices,zt?At:Ut),o.icon.placedSymbolArray.get(et.verticalPlacedIconSymbolIndex).hidden=at.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const Ut=o.collisionArrays[Je];if(Ut){let zt=new r.pointGeometry(0,0);if(Ut.textBox||Ut.verticalTextBox){let Xt=!0;if(me){const li=this.variableOffsets[wt];li?(zt=Oi(li.anchor,li.width,li.height,li.textOffset,li.textBoxScale),Se&&zt._rotate(Ne?this.transform.angle:-this.transform.angle)):Xt=!1}Ut.textBox&&ve(o.textCollisionBox.collisionVertexArray,at.text.placed,!Xt||Ot,zt.x,zt.y),Ut.verticalTextBox&&ve(o.textCollisionBox.collisionVertexArray,at.text.placed,!Xt||jt,zt.x,zt.y)}const ai=!!(!jt&&Ut.verticalIconBox);Ut.iconBox&&ve(o.iconCollisionBox.collisionVertexArray,at.icon.placed,ai,Ue?zt.x:0,Ue?zt.y:0),Ut.verticalIconBox&&ve(o.iconCollisionBox.collisionVertexArray,at.icon.placed,!ai,Ue?zt.x:0,Ue?zt.y:0)}}}if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.text.opacityVertexArray.length!==o.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${o.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${o.text.layoutVertexArray.length}) / 4`);if(o.icon.opacityVertexArray.length!==o.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${o.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${o.icon.layoutVertexArray.length}) / 4`);if(o.bucketInstanceId in this.collisionCircleArrays){const Je=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=Je.invProjMatrix,o.placementViewportMatrix=Je.viewportMatrix,o.collisionCircleArray=Je.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,h){const _=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*_>o}setStale(){this.stale=!0}}function ve(k,o,h,_,P){k.emplaceBack(o?1:0,h?1:0,_||0,P||0),k.emplaceBack(o?1:0,h?1:0,_||0,P||0),k.emplaceBack(o?1:0,h?1:0,_||0,P||0),k.emplaceBack(o?1:0,h?1:0,_||0,P||0)}const Le=Math.pow(2,25),Ve=Math.pow(2,24),Ke=Math.pow(2,17),st=Math.pow(2,16),ct=Math.pow(2,9),ot=Math.pow(2,8),rt=Math.pow(2,1);function mt(k){if(k.opacity===0&&!k.placed)return 0;if(k.opacity===1&&k.placed)return 4294967295;const o=k.placed?1:0,h=Math.floor(127*k.opacity);return h*Le+o*Ve+h*Ke+o*st+h*ct+o*ot+h*rt+o}const At=0;class Nt{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&!o.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,h,_,P,j){const te=this._bucketParts;for(;this._currentTileIndex<o.length;)if(h.getBucketParts(te,P,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,j())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,te.sort((ce,me)=>ce.sortKey-me.sortKey));this._currentPartIndex<te.length;)if(h.placeLayerBucketPart(te[this._currentPartIndex],this._seenCrossTileIDs,_),this._currentPartIndex++,j())return!0;return!1}}class Rt{constructor(o,h,_,P,j,te,ce,me){this.placement=new qe(o,h,te,ce,me),this._currentPlacementIndex=_.length-1,this._forceFullPlacement=P,this._showCollisionBoxes=j,this._done=!1}isDone(){return this._done}continuePlacement(o,h,_){const P=r.exported.now(),j=()=>{const te=r.exported.now()-P;return!this._forceFullPlacement&&te>2};for(;this._currentPlacementIndex>=0;){const te=h[o[this._currentPlacementIndex]],ce=this.placement.collisionIndex.transform.zoom;if(te.type==="symbol"&&(!te.minzoom||te.minzoom<=ce)&&(!te.maxzoom||te.maxzoom>ce)){if(this._inProgressLayer||(this._inProgressLayer=new Nt(te)),this._inProgressLayer.continuePlacement(_[te.source],this.placement,this._showCollisionBoxes,te,j))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const oi=512/r.EXTENT/2;class Qt{constructor(o,h,_){this.tileID=o,this.indexedSymbolInstances={},this.bucketInstanceId=_;for(let P=0;P<h.length;P++){const j=h.get(P),te=j.key;this.indexedSymbolInstances[te]||(this.indexedSymbolInstances[te]=[]),this.indexedSymbolInstances[te].push({crossTileID:j.crossTileID,coord:this.getScaledCoordinates(j,o)})}}getScaledCoordinates(o,h){const _=oi/Math.pow(2,h.canonical.z-this.tileID.canonical.z);return{x:Math.floor((h.canonical.x*r.EXTENT+o.anchorX)*_),y:Math.floor((h.canonical.y*r.EXTENT+o.anchorY)*_)}}findMatches(o,h,_){const P=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let j=0;j<o.length;j++){const te=o.get(j);if(te.crossTileID)continue;const ce=this.indexedSymbolInstances[te.key];if(!ce)continue;const me=this.getScaledCoordinates(te,h);for(const Se of ce)if(Math.abs(Se.coord.x-me.x)<=P&&Math.abs(Se.coord.y-me.y)<=P&&!_[Se.crossTileID]){_[Se.crossTileID]=!0,te.crossTileID=Se.crossTileID;break}}}}class pi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class vi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const h=Math.round((o-this.lng)/360);if(h!==0)for(const _ in this.indexes){const P=this.indexes[_],j={};for(const te in P){const ce=P[te];ce.tileID=ce.tileID.unwrapTo(ce.tileID.wrap+h),j[ce.tileID.key]=ce}this.indexes[_]=j}this.lng=o}addBucket(o,h,_){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let j=0;j<h.symbolInstances.length;j++)h.symbolInstances.get(j).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});const P=this.usedCrossTileIDs[o.overscaledZ];for(const j in this.indexes){const te=this.indexes[j];if(Number(j)>o.overscaledZ)for(const ce in te){const me=te[ce];me.tileID.isChildOf(o)&&me.findMatches(h.symbolInstances,o,P)}else{const ce=te[o.scaledTo(Number(j)).key];ce&&ce.findMatches(h.symbolInstances,o,P)}}for(let j=0;j<h.symbolInstances.length;j++){const te=h.symbolInstances.get(j);te.crossTileID||(te.crossTileID=_.generate(),P[te.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new Qt(o,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(o,h){for(const _ in h.indexedSymbolInstances)for(const P of h.indexedSymbolInstances[_])delete this.usedCrossTileIDs[o][P.crossTileID]}removeStaleBuckets(o){let h=!1;for(const _ in this.indexes){const P=this.indexes[_];for(const j in P)o[P[j].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,P[j]),delete P[j],h=!0)}return h}}class $i{constructor(){this.layerIndexes={},this.crossTileIDs=new pi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,h,_){let P=this.layerIndexes[o.id];P===void 0&&(P=this.layerIndexes[o.id]=new vi);let j=!1;const te={};P.handleWrapJump(_);for(const ce of h){const me=ce.getBucket(o);me&&o.id===me.layerIds[0]&&(me.bucketInstanceId||(me.bucketInstanceId=++this.maxBucketInstanceId),P.addBucket(ce.tileID,me,this.crossTileIDs)&&(j=!0),te[me.bucketInstanceId]=!0)}return P.removeStaleBuckets(te)&&(j=!0),j}pruneUnusedLayers(o){const h={};o.forEach(_=>{h[_]=!0});for(const _ in this.layerIndexes)h[_]||delete this.layerIndexes[_]}}var _i=r.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Pi extends r.Evented{constructor(o){super(),this.sourceCache=o,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=o._cache.max,o.usedForTerrain=!0,o.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const o in this._tiles){const h=this._tiles[o];h.textures.forEach(_=>_.destroy()),h.textures=[]}}update(o,h){this.sourceCache.update(o,h),this._renderableTilesKeys=[];for(const _ of o.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h}))this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.posMatrix=new Float64Array(16),r.ortho(_.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),this._tiles[_.key]=new be(_,this.tileSize))}removeOutdated(o){const h={};this.renderHistory=this.renderHistory.filter((_,P)=>this.renderHistory.indexOf(_)===P).slice(0,this.renderHistorySize);for(const _ of this._renderableTilesKeys)h[_]=!0;for(const _ of this.renderHistory)h[_]=!0;for(const _ in this._tiles)h[_]||(this._tiles[_].clearTextures(o),delete this._tiles[_])}getRenderableTiles(){return this._renderableTilesKeys.map(o=>this.getTileByID(o))}getTileByID(o){return this._tiles[o]}getTerrainCoords(o){const h={};for(const _ of this._renderableTilesKeys){const P=this._tiles[_].tileID;if(P.canonical.equals(o.canonical)){const j=o.clone();j.posMatrix=new Float64Array(16),r.ortho(j.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),h[_]=j}else if(P.canonical.isChildOf(o.canonical)){const j=o.clone();j.posMatrix=new Float64Array(16);const te=P.canonical.z-o.canonical.z,ce=P.canonical.x-(P.canonical.x>>te<<te),me=P.canonical.y-(P.canonical.y>>te<<te),Se=r.EXTENT>>te;r.ortho(j.posMatrix,0,Se,0,Se,0,1),r.translate(j.posMatrix,j.posMatrix,[-ce*Se,-me*Se,0]),h[_]=j}else if(o.canonical.isChildOf(P.canonical)){const j=o.clone();j.posMatrix=new Float64Array(16);const te=o.canonical.z-P.canonical.z,ce=o.canonical.x-(o.canonical.x>>te<<te),me=o.canonical.y-(o.canonical.y>>te<<te),Se=r.EXTENT>>te;r.ortho(j.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),r.translate(j.posMatrix,j.posMatrix,[ce*Se,me*Se,0]),r.scale(j.posMatrix,j.posMatrix,[1/2**te,1/2**te,0]),h[_]=j}}return h}getSourceTile(o,h){const _=this.sourceCache._source;let P=o.overscaledZ-this.deltaZoom;if(P>_.maxzoom&&(P=_.maxzoom),P<_.minzoom)return null;this._sourceTileCache[o.key]||(this._sourceTileCache[o.key]=o.scaledTo(P).key);let j=this.sourceCache.getTileByID(this._sourceTileCache[o.key]);if((!j||!j.dem)&&h)for(;P>=_.minzoom&&(!j||!j.dem);)j=this.sourceCache.getTileByID(o.scaledTo(P--).key);return j}tilesAfterTime(o=Date.now()){return Object.values(this._tiles).filter(h=>h.timeLoaded>=o)}}class Ui{constructor(o,h,_){this.style=o,this.sourceCache=new Pi(h),this.options=_,this.exaggeration=typeof _.exaggeration=="number"?_.exaggeration:1,this.elevationOffset=typeof _.elevationOffset=="number"?_.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(o,h,_,P=r.EXTENT){if(!(h>=0&&h<P&&_>=0&&_<P))return this.elevationOffset;let j=0;const te=this.getTerrainData(o);if(te.tile&&te.tile.dem){const ce=r.transformMat4$1([],[h/P*r.EXTENT,_/P*r.EXTENT],te.u_terrain_matrix),me=[ce[0]*te.tile.dem.dim,ce[1]*te.tile.dem.dim],Se=[Math.floor(me[0]),Math.floor(me[1])],Ne=te.tile.dem.get(Se[0],Se[1]),Ue=te.tile.dem.get(Se[0],Se[1]+1),We=te.tile.dem.get(Se[0]+1,Se[1]),it=te.tile.dem.get(Se[0]+1,Se[1]+1);j=r.number(r.number(Ne,Ue,me[0]-Se[0]),r.number(We,it,me[0]-Se[0]),me[1]-Se[1])}return j}rememberForRerender(o,h){for(const _ in this.sourceCache._tiles){const P=this.sourceCache._tiles[_];(P.tileID.equals(h)||P.tileID.isChildOf(h))&&(o===this.sourceCache.sourceCache.id&&(P.timeLoaded=Date.now()),this._rerender[o]=this._rerender[o]||{},this._rerender[o][P.tileID.key]=!0)}}needsRerender(o,h){return this._rerender[o]&&this._rerender[o][h.key]}clearRerenderCache(){this._rerender={}}getElevation(o,h,_,P=r.EXTENT){return(this.getDEMElevation(o,h,_,P)+this.elevationOffset)*this.exaggeration}getTerrainData(o){if(!this._emptyDemTexture){const P=this.style.map.painter.context,j=new r.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new T(P,j,P.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new T(P,new r.RGBAImage({width:1,height:1}),P.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(P.gl.NEAREST,P.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=r.identity([])}const h=this.sourceCache.getSourceTile(o,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){const P=this.style.map.painter.context;h.demTexture=this.style.map.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new T(P,h.dem.getPixels(),P.gl.RGBA,{premultiply:!1}),h.demTexture.bind(P.gl.NEAREST,P.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}const _=h&&h+h.tileID.key+o.key;if(_&&!this._demMatrixCache[_]){const P=this.sourceCache.sourceCache._source.maxzoom;let j=o.canonical.z-h.tileID.canonical.z;o.overscaledZ>o.canonical.z&&(o.canonical.z>=P?j=o.canonical.z-P:r.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const te=o.canonical.x-(o.canonical.x>>j<<j),ce=o.canonical.y-(o.canonical.y>>j<<j),me=r.fromScaling(new Float64Array(16),[1/(r.EXTENT<<j),1/(r.EXTENT<<j),0]);r.translate(me,me,[te*r.EXTENT,ce*r.EXTENT,0]),this._demMatrixCache[o.key]={matrix:me,coord:o}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:_?this._demMatrixCache[o.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getRTTFramebuffer(){const o=this.style.map.painter;if(!this._rttFramebuffer){const h=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=o.context.createFramebuffer(h,h,!0),this._rttFramebuffer.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,h,h))}return this._rttFramebuffer}getFramebuffer(o){const h=this.style.map.painter,_=h.width/devicePixelRatio,P=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===_&&this._fbo.height===P||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new T(h.context,{width:_,height:P,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new T(h.context,{width:_,height:P,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(_,P,!0),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,_,P))),this._fbo.colorAttachment.set(o==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const o=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let j=0,te=0;j<this._coordsTextureSize;j++)for(let ce=0;ce<this._coordsTextureSize;ce++,te+=4)h[te+0]=255&ce,h[te+1]=255&j,h[te+2]=ce>>8<<4|j>>8,h[te+3]=0;const _=new r.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),P=new T(o,_,o.gl.RGBA,{premultiply:!1});return P.bind(o.gl.NEAREST,o.gl.CLAMP_TO_EDGE),this._coordsTexture=P,P}pointCoordinate(o){const h=new Uint8Array(4),_=this.style.map.painter,P=_.context,j=P.gl;P.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),j.readPixels(o.x,_.height/devicePixelRatio-o.y-1,1,1,j.RGBA,j.UNSIGNED_BYTE,h),P.bindFramebuffer.set(null);const te=h[0]+(h[2]>>4<<8),ce=h[1]+((15&h[2])<<8),me=this.coordsIndex[255-h[3]],Se=me&&this.sourceCache.getTileByID(me);if(!Se)return null;const Ne=this._coordsTextureSize,Ue=(1<<Se.tileID.canonical.z)*Ne;return new r.MercatorCoordinate((Se.tileID.canonical.x*Ne+te)/Ue,(Se.tileID.canonical.y*Ne+ce)/Ue,this.getElevation(Se.tileID,te,ce,Ne))}getTerrainMesh(){if(this._mesh)return this._mesh;const o=this.style.map.painter.context,h=new r.PosArray,_=new r.TriangleIndexArray,P=this.meshSize,j=r.EXTENT/P,te=P*P;for(let ce=0;ce<=P;ce++)for(let me=0;me<=P;me++)h.emplaceBack(me*j,ce*j);for(let ce=0;ce<te;ce+=P+1)for(let me=0;me<P;me++)_.emplaceBack(me+ce,P+me+ce+1,P+me+ce+2),_.emplaceBack(me+ce,P+me+ce+2,me+ce+1);return this._mesh={indexBuffer:o.createIndexBuffer(_),vertexBuffer:o.createVertexBuffer(h,_i.members),segments:r.SegmentVector.simpleSegment(0,0,h.length,_.length)},this._mesh}getMinMaxElevation(o){const h=this.getTerrainData(o).tile,_={minElevation:null,maxElevation:null};return h&&h.dem&&(_.minElevation=(h.dem.min+this.elevationOffset)*this.exaggeration,_.maxElevation=(h.dem.max+this.elevationOffset)*this.exaggeration),_}}const ji=(k,o)=>r.emitValidationErrors(k,o&&o.filter(h=>h.identifier!=="source.canvas")),pn=r.pick(Ie,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Hn=r.pick(Ie,["setCenter","setZoom","setBearing","setPitch"]),br=function(){const k={},o=r.spec.$version;for(const h in r.spec.$root){const _=r.spec.$root[h];if(_.required){let P=null;P=h==="version"?o:_.type==="array"?[]:{},P!=null&&(k[h]=P)}}return k}();class Ur extends r.Evented{constructor(o,h={}){super(),this.map=o,this.dispatcher=new X(Te(),this),this.imageManager=new E,this.imageManager.setEventedParent(this),this.glyphManager=new C(o._requestManager,h.localIdeographFontFamily),this.lineAtlas=new Y(256,512),this.crossTileSymbolIndex=new $i,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new r.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",r.getReferrer());const _=this;this._rtlTextPluginCallback=Ur.registerForPluginStateChange(P=>{_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:P.pluginStatus,pluginURL:P.pluginURL},(j,te)=>{if(r.triggerPluginCompletionEvent(j),te&&te.every(ce=>ce))for(const ce in _.sourceCaches)_.sourceCaches[ce].reload()})}),this.on("data",P=>{if(P.dataType!=="source"||P.sourceDataType!=="metadata")return;const j=this.sourceCaches[P.sourceId];if(!j)return;const te=j.getSource();if(te&&te.vectorLayerIds)for(const ce in this._layers){const me=this._layers[ce];me.source===te.id&&this._validateLayer(me)}})}loadURL(o,h={}){this.fire(new r.Event("dataloading",{dataType:"style"}));const _=typeof h.validate!="boolean"||h.validate,P=this.map._requestManager.transformRequest(o,r.ResourceType.Style);this._request=r.getJSON(P,(j,te)=>{this._request=null,j?this.fire(new r.ErrorEvent(j)):te&&this._load(te,_)})}loadJSON(o,h={}){this.fire(new r.Event("dataloading",{dataType:"style"})),this._request=r.exported.frame(()=>{this._request=null,this._load(o,h.validate!==!1)})}loadEmpty(){this.fire(new r.Event("dataloading",{dataType:"style"})),this._load(br,!1)}_load(o,h){if(h&&ji(this,r.validateStyle(o)))return;this._loaded=!0,this.stylesheet=o;for(const P in o.sources)this.addSource(P,o.sources[P],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs);const _=Ce(this.stylesheet.layers);this._order=_.map(P=>P.id),this._layers={},this._serializedLayers={};for(let P of _)P=r.createStyleLayer(P),P.setEventedParent(this,{layer:{id:P.id}}),this._layers[P.id]=P,this._serializedLayers[P.id]=P.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new W(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new r.Event("data",{dataType:"style"})),this.fire(new r.Event("style.load"))}_loadSprite(o){this._spriteRequest=function(h,_,P,j){let te,ce,me;const Se=P>1?"@2x":"";let Ne=r.getJSON(_.transformRequest(_.normalizeSpriteURL(h,Se,".json"),r.ResourceType.SpriteJSON),(it,Je)=>{Ne=null,me||(me=it,te=Je,We())}),Ue=r.getImage(_.transformRequest(_.normalizeSpriteURL(h,Se,".png"),r.ResourceType.SpriteImage),(it,Je)=>{Ue=null,me||(me=it,ce=Je,We())});function We(){if(me)j(me);else if(te&&ce){const it=r.exported.getImageData(ce),Je={};for(const et in te){const{width:pt,height:yt,x:wt,y:at,sdf:Mt,pixelRatio:St,stretchX:Ot,stretchY:jt,content:Ut}=te[et],zt=new r.RGBAImage({width:pt,height:yt});r.RGBAImage.copy(it,zt,{x:wt,y:at},{x:0,y:0},{width:pt,height:yt}),Je[et]={data:zt,pixelRatio:St,sdf:Mt,stretchX:Ot,stretchY:jt,content:Ut}}j(null,Je)}}return{cancel(){Ne&&(Ne.cancel(),Ne=null),Ue&&(Ue.cancel(),Ue=null)}}}(o,this.map._requestManager,this.map.getPixelRatio(),(h,_)=>{if(this._spriteRequest=null,h)this.fire(new r.ErrorEvent(h));else if(_)for(const P in _)this.imageManager.addImage(P,_[P]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))})}_validateLayer(o){const h=this.sourceCaches[o.source];if(!h)return;const _=o.sourceLayer;if(!_)return;const P=h.getSource();(P.type==="geojson"||P.vectorLayerIds&&P.vectorLayerIds.indexOf(_)===-1)&&this.fire(new r.ErrorEvent(new Error(`Source layer "${_}" does not exist on source "${P.id}" as specified by style layer "${o.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(o){const h=[];for(const _ of o){const P=this._layers[_];P.type!=="custom"&&h.push(P.serialize())}return h}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(o){if(!this._loaded)return;const h=this._changed;if(this._changed){const P=Object.keys(this._updatedLayers),j=Object.keys(this._removedLayers);(P.length||j.length)&&this._updateWorkerLayers(P,j);for(const te in this._updatedSources){const ce=this._updatedSources[te];if(ce==="reload")this._reloadSource(te);else{if(ce!=="clear")throw new Error(`Invalid action ${ce}`);this._clearSource(te)}}this._updateTilesForChangedImages();for(const te in this._updatedPaintProps)this._layers[te].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}const _={};for(const P in this.sourceCaches){const j=this.sourceCaches[P];_[P]=j.used,j.used=!1}for(const P of this._order){const j=this._layers[P];j.recalculate(o,this._availableImages),!j.isHidden(o.zoom)&&j.source&&(this.sourceCaches[j.source].used=!0)}for(const P in _){const j=this.sourceCaches[P];_[P]!==j.used&&j.fire(new r.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:P}))}this.light.recalculate(o),this.z=o.zoom,h&&this.fire(new r.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateWorkerLayers(o,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(o){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),o){const h=this.sourceCaches[o.source];if(!h)throw new Error(`cannot load terrain, because there exists no source with ID: ${o.source}`);this.terrain=new Ui(this,h,o),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=_=>{_.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=_=>{_.tile&&(_.sourceId===o.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(_.sourceId,_.tile.tileID)):_.source.type==="geojson"&&this.terrain.rememberForRerender(_.sourceId,_.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new r.Event("terrain",{terrain:o}))}setState(o){if(this._checkLoaded(),ji(this,r.validateStyle(o)))return!1;(o=r.clone$1(o)).layers=Ce(o.layers);const h=function(P,j){if(!P)return[{command:Ie.setStyle,args:[j]}];let te=[];try{if(!b(P.version,j.version))return[{command:Ie.setStyle,args:[j]}];b(P.center,j.center)||te.push({command:Ie.setCenter,args:[j.center]}),b(P.zoom,j.zoom)||te.push({command:Ie.setZoom,args:[j.zoom]}),b(P.bearing,j.bearing)||te.push({command:Ie.setBearing,args:[j.bearing]}),b(P.pitch,j.pitch)||te.push({command:Ie.setPitch,args:[j.pitch]}),b(P.sprite,j.sprite)||te.push({command:Ie.setSprite,args:[j.sprite]}),b(P.glyphs,j.glyphs)||te.push({command:Ie.setGlyphs,args:[j.glyphs]}),b(P.transition,j.transition)||te.push({command:Ie.setTransition,args:[j.transition]}),b(P.light,j.light)||te.push({command:Ie.setLight,args:[j.light]});const ce={},me=[];(function(Ne,Ue,We,it){let Je;for(Je in Ue=Ue||{},Ne=Ne||{})Object.prototype.hasOwnProperty.call(Ne,Je)&&(Object.prototype.hasOwnProperty.call(Ue,Je)||He(Je,We,it));for(Je in Ue)Object.prototype.hasOwnProperty.call(Ue,Je)&&(Object.prototype.hasOwnProperty.call(Ne,Je)?b(Ne[Je],Ue[Je])||(Ne[Je].type==="geojson"&&Ue[Je].type==="geojson"&&ye(Ne,Ue,Je)?We.push({command:Ie.setGeoJSONSourceData,args:[Je,Ue[Je].data]}):Ae(Je,Ue,We,it)):Be(Je,Ue,We))})(P.sources,j.sources,me,ce);const Se=[];P.layers&&P.layers.forEach(Ne=>{ce[Ne.source]?te.push({command:Ie.removeLayer,args:[Ne.id]}):Se.push(Ne)}),te=te.concat(me),function(Ne,Ue,We){Ue=Ue||[];const it=(Ne=Ne||[]).map(Me),Je=Ue.map(Me),et=Ne.reduce(De,{}),pt=Ue.reduce(De,{}),yt=it.slice(),wt=Object.create(null);let at,Mt,St,Ot,jt,Ut,zt;for(at=0,Mt=0;at<it.length;at++)St=it[at],Object.prototype.hasOwnProperty.call(pt,St)?Mt++:(We.push({command:Ie.removeLayer,args:[St]}),yt.splice(yt.indexOf(St,Mt),1));for(at=0,Mt=0;at<Je.length;at++)St=Je[Je.length-1-at],yt[yt.length-1-at]!==St&&(Object.prototype.hasOwnProperty.call(et,St)?(We.push({command:Ie.removeLayer,args:[St]}),yt.splice(yt.lastIndexOf(St,yt.length-Mt),1)):Mt++,Ut=yt[yt.length-at],We.push({command:Ie.addLayer,args:[pt[St],Ut]}),yt.splice(yt.length-at,0,St),wt[St]=!0);for(at=0;at<Je.length;at++)if(St=Je[at],Ot=et[St],jt=pt[St],!wt[St]&&!b(Ot,jt))if(b(Ot.source,jt.source)&&b(Ot["source-layer"],jt["source-layer"])&&b(Ot.type,jt.type)){for(zt in ge(Ot.layout,jt.layout,We,St,null,Ie.setLayoutProperty),ge(Ot.paint,jt.paint,We,St,null,Ie.setPaintProperty),b(Ot.filter,jt.filter)||We.push({command:Ie.setFilter,args:[St,jt.filter]}),b(Ot.minzoom,jt.minzoom)&&b(Ot.maxzoom,jt.maxzoom)||We.push({command:Ie.setLayerZoomRange,args:[St,jt.minzoom,jt.maxzoom]}),Ot)Object.prototype.hasOwnProperty.call(Ot,zt)&&zt!=="layout"&&zt!=="paint"&&zt!=="filter"&&zt!=="metadata"&&zt!=="minzoom"&&zt!=="maxzoom"&&(zt.indexOf("paint.")===0?ge(Ot[zt],jt[zt],We,St,zt.slice(6),Ie.setPaintProperty):b(Ot[zt],jt[zt])||We.push({command:Ie.setLayerProperty,args:[St,zt,jt[zt]]}));for(zt in jt)Object.prototype.hasOwnProperty.call(jt,zt)&&!Object.prototype.hasOwnProperty.call(Ot,zt)&&zt!=="layout"&&zt!=="paint"&&zt!=="filter"&&zt!=="metadata"&&zt!=="minzoom"&&zt!=="maxzoom"&&(zt.indexOf("paint.")===0?ge(Ot[zt],jt[zt],We,St,zt.slice(6),Ie.setPaintProperty):b(Ot[zt],jt[zt])||We.push({command:Ie.setLayerProperty,args:[St,zt,jt[zt]]}))}else We.push({command:Ie.removeLayer,args:[St]}),Ut=yt[yt.lastIndexOf(St)+1],We.push({command:Ie.addLayer,args:[jt,Ut]})}(Se,j.layers,te)}catch(ce){console.warn("Unable to compute style diff:",ce),te=[{command:Ie.setStyle,args:[j]}]}return te}(this.serialize(),o).filter(P=>!(P.command in Hn));if(h.length===0)return!1;const _=h.filter(P=>!(P.command in pn));if(_.length>0)throw new Error(`Unimplemented: ${_.map(P=>P.command).join(", ")}.`);return h.forEach(P=>{P.command!=="setTransition"&&this[P.command].apply(this,P.args)}),this.stylesheet=o,!0}addImage(o,h){if(this.getImage(o))return this.fire(new r.ErrorEvent(new Error(`An image named "${o}" already exists.`)));this.imageManager.addImage(o,h),this._afterImageUpdated(o)}updateImage(o,h){this.imageManager.updateImage(o,h)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){if(!this.getImage(o))return this.fire(new r.ErrorEvent(new Error(`An image named "${o}" does not exist.`)));this.imageManager.removeImage(o),this._afterImageUpdated(o)}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(o,h,_={}){if(this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error(`Source "${o}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(r.validateStyle.source,`sources.${o}`,h,null,_))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const P=this.sourceCaches[o]=new J(o,h,this.dispatcher);P.style=this,P.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:P.serialize(),sourceId:o})),P.onAdd(this.map),this._changed=!0}removeSource(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===o)return this.fire(new r.ErrorEvent(new Error(`Source "${o}" cannot be removed while layer "${_}" is using it.`)));const h=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],h.fire(new r.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(o,h){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error(`There is no source with this ID=${o}`);const _=this.sourceCaches[o].getSource();if(_.type!=="geojson")throw new Error(`geojsonSource.type is ${_.type}, which is !== 'geojson`);_.setData(h),this._changed=!0}getSource(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()}addLayer(o,h,_={}){this._checkLoaded();const P=o.id;if(this.getLayer(P))return void this.fire(new r.ErrorEvent(new Error(`Layer "${P}" already exists on this map.`)));let j;if(o.type==="custom"){if(ji(this,r.validateCustomStyleLayer(o)))return;j=r.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(P,o.source),o=r.clone$1(o),o=r.extend(o,{source:P})),this._validate(r.validateStyle.layer,`layers.${P}`,o,{arrayIndex:-1},_))return;j=r.createStyleLayer(o),this._validateLayer(j),j.setEventedParent(this,{layer:{id:P}}),this._serializedLayers[j.id]=j.serialize()}const te=h?this._order.indexOf(h):this._order.length;if(h&&te===-1)this.fire(new r.ErrorEvent(new Error(`Cannot add layer "${P}" before non-existing layer "${h}".`)));else{if(this._order.splice(te,0,P),this._layerOrderChanged=!0,this._layers[P]=j,this._removedLayers[P]&&j.source&&j.type!=="custom"){const ce=this._removedLayers[P];delete this._removedLayers[P],ce.type!==j.type?this._updatedSources[j.source]="clear":(this._updatedSources[j.source]="reload",this.sourceCaches[j.source].pause())}this._updateLayer(j),j.onAdd&&j.onAdd(this.map)}}moveLayer(o,h){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new r.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===h)return;const _=this._order.indexOf(o);this._order.splice(_,1);const P=h?this._order.indexOf(h):this._order.length;h&&P===-1?this.fire(new r.ErrorEvent(new Error(`Cannot move layer "${o}" before non-existing layer "${h}".`))):(this._order.splice(P,0,o),this._layerOrderChanged=!0)}removeLayer(o){this._checkLoaded();const h=this._layers[o];if(!h)return void this.fire(new r.ErrorEvent(new Error(`Cannot remove non-existing layer "${o}".`)));h.setEventedParent(null);const _=this._order.indexOf(o);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=h,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],h.onRemove&&h.onRemove(this.map)}getLayer(o){return this._layers[o]}hasLayer(o){return o in this._layers}setLayerZoomRange(o,h,_){this._checkLoaded();const P=this.getLayer(o);P?P.minzoom===h&&P.maxzoom===_||(h!=null&&(P.minzoom=h),_!=null&&(P.maxzoom=_),this._updateLayer(P)):this.fire(new r.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${o}".`)))}setFilter(o,h,_={}){this._checkLoaded();const P=this.getLayer(o);if(P){if(!b(P.filter,h))return h==null?(P.filter=void 0,void this._updateLayer(P)):void(this._validate(r.validateStyle.filter,`layers.${P.id}.filter`,h,null,_)||(P.filter=r.clone$1(h),this._updateLayer(P)))}else this.fire(new r.ErrorEvent(new Error(`Cannot filter non-existing layer "${o}".`)))}getFilter(o){return r.clone$1(this.getLayer(o).filter)}setLayoutProperty(o,h,_,P={}){this._checkLoaded();const j=this.getLayer(o);j?b(j.getLayoutProperty(h),_)||(j.setLayoutProperty(h,_,P),this._updateLayer(j)):this.fire(new r.ErrorEvent(new Error(`Cannot style non-existing layer "${o}".`)))}getLayoutProperty(o,h){const _=this.getLayer(o);if(_)return _.getLayoutProperty(h);this.fire(new r.ErrorEvent(new Error(`Cannot get style of non-existing layer "${o}".`)))}setPaintProperty(o,h,_,P={}){this._checkLoaded();const j=this.getLayer(o);j?b(j.getPaintProperty(h),_)||(j.setPaintProperty(h,_,P)&&this._updateLayer(j),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new r.ErrorEvent(new Error(`Cannot style non-existing layer "${o}".`)))}getPaintProperty(o,h){return this.getLayer(o).getPaintProperty(h)}setFeatureState(o,h){this._checkLoaded();const _=o.source,P=o.sourceLayer,j=this.sourceCaches[_];if(j===void 0)return void this.fire(new r.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const te=j.getSource().type;te==="geojson"&&P?this.fire(new r.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):te!=="vector"||P?(o.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),j.setFeatureState(P,o.id,h)):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(o,h){this._checkLoaded();const _=o.source,P=this.sourceCaches[_];if(P===void 0)return void this.fire(new r.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const j=P.getSource().type,te=j==="vector"?o.sourceLayer:void 0;j!=="vector"||te?h&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new r.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):P.removeFeatureState(te,o.id,h):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(o){this._checkLoaded();const h=o.source,_=o.sourceLayer,P=this.sourceCaches[h];if(P!==void 0)return P.getSource().type!=="vector"||_?(o.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),P.getFeatureState(_,o.id)):void this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new r.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return r.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return r.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:r.mapObject(this.sourceCaches,o=>o.serialize()),layers:this._serializeLayers(this._order)},o=>o!==void 0)}_updateLayer(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(o){const h=te=>this._layers[te].type==="fill-extrusion",_={},P=[];for(let te=this._order.length-1;te>=0;te--){const ce=this._order[te];if(h(ce)){_[ce]=te;for(const me of o){const Se=me[ce];if(Se)for(const Ne of Se)P.push(Ne)}}}P.sort((te,ce)=>ce.intersectionZ-te.intersectionZ);const j=[];for(let te=this._order.length-1;te>=0;te--){const ce=this._order[te];if(h(ce))for(let me=P.length-1;me>=0;me--){const Se=P[me].feature;if(_[Se.layer.id]<te)break;j.push(Se),P.pop()}else for(const me of o){const Se=me[ce];if(Se)for(const Ne of Se)j.push(Ne.feature)}}return j}queryRenderedFeatures(o,h,_){h&&h.filter&&this._validate(r.validateStyle.filter,"queryRenderedFeatures.filter",h.filter,null,h);const P={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new r.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const te of h.layers){const ce=this._layers[te];if(!ce)return this.fire(new r.ErrorEvent(new Error(`The layer '${te}' does not exist in the map's style and cannot be queried for features.`))),[];P[ce.source]=!0}}const j=[];h.availableImages=this._availableImages;for(const te in this.sourceCaches)h.layers&&!P[te]||j.push(le(this.sourceCaches[te],this._layers,this._serializedLayers,o,h,_));return this.placement&&j.push(function(te,ce,me,Se,Ne,Ue,We){const it={},Je=Ue.queryRenderedSymbols(Se),et=[];for(const pt of Object.keys(Je).map(Number))et.push(We[pt]);et.sort(ke);for(const pt of et){const yt=pt.featureIndex.lookupSymbolFeatures(Je[pt.bucketInstanceId],ce,pt.bucketIndex,pt.sourceLayerIndex,Ne.filter,Ne.layers,Ne.availableImages,te);for(const wt in yt){const at=it[wt]=it[wt]||[],Mt=yt[wt];Mt.sort((St,Ot)=>{const jt=pt.featureSortOrder;if(jt){const Ut=jt.indexOf(St.featureIndex);return jt.indexOf(Ot.featureIndex)-Ut}return Ot.featureIndex-St.featureIndex});for(const St of Mt)at.push(St)}}for(const pt in it)it[pt].forEach(yt=>{const wt=yt.feature,at=me[te[pt].source].getFeatureState(wt.layer["source-layer"],wt.id);wt.source=wt.layer.source,wt.layer["source-layer"]&&(wt.sourceLayer=wt.layer["source-layer"]),wt.state=at});return it}(this._layers,this._serializedLayers,this.sourceCaches,o,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(j)}querySourceFeatures(o,h){h&&h.filter&&this._validate(r.validateStyle.filter,"querySourceFeatures.filter",h.filter,null,h);const _=this.sourceCaches[o];return _?function(P,j){const te=P.getRenderableIds().map(Se=>P.getTileByID(Se)),ce=[],me={};for(let Se=0;Se<te.length;Se++){const Ne=te[Se],Ue=Ne.tileID.canonical.key;me[Ue]||(me[Ue]=!0,Ne.querySourceFeatures(ce,j))}return ce}(_,h):[]}addSourceType(o,h,_){return Ur.getSourceType(o)?_(new Error(`A source type called "${o}" already exists.`)):(Ur.setSourceType(o,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:h.workerSourceURL},_):_(null,null))}getLight(){return this.light.getLight()}setLight(o,h={}){this._checkLoaded();const _=this.light.getLight();let P=!1;for(const te in o)if(!b(o[te],_[te])){P=!0;break}if(!P)return;const j={now:r.exported.now(),transition:r.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,h),this.light.updateTransitions(j)}_validate(o,h,_,P,j={}){return(!j||j.validate!==!1)&&ji(this,o.call(r.validateStyle,r.extend({key:h,style:this.serialize(),value:_,styleSpec:r.spec},P)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.sourceCaches){const h=this.sourceCaches[o];h.setEventedParent(null),h.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(o){this.sourceCaches[o].clearTiles()}_reloadSource(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()}_updateSources(o){for(const h in this.sourceCaches)this.sourceCaches[h].update(o,this.terrain)}_generateCollisionBoxes(){for(const o in this.sourceCaches)this._reloadSource(o)}_updatePlacement(o,h,_,P,j=!1){let te=!1,ce=!1;const me={};for(const Se of this._order){const Ne=this._layers[Se];if(Ne.type!=="symbol")continue;if(!me[Ne.source]){const We=this.sourceCaches[Ne.source];me[Ne.source]=We.getRenderableIds(!0).map(it=>We.getTileByID(it)).sort((it,Je)=>Je.tileID.overscaledZ-it.tileID.overscaledZ||(it.tileID.isLessThan(Je.tileID)?-1:1))}const Ue=this.crossTileSymbolIndex.addLayer(Ne,me[Ne.source],o.center.lng);te=te||Ue}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((j=j||this._layerOrderChanged||_===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.exported.now(),o.zoom))&&(this.pauseablePlacement=new Rt(o,this.terrain,this._order,j,h,_,P,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,me),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.exported.now()),ce=!0),te&&this.pauseablePlacement.placement.setStale()),ce||te)for(const Se of this._order){const Ne=this._layers[Se];Ne.type==="symbol"&&this.placement.updateLayerOpacities(Ne,me[Ne.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.exported.now())}_releaseSymbolFadeTiles(){for(const o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,h,_){this.imageManager.getImages(h.icons,_),this._updateTilesForChangedImages();const P=this.sourceCaches[h.source];P&&P.setDependencies(h.tileID.key,h.type,h.icons)}getGlyphs(o,h,_){this.glyphManager.getGlyphs(h.stacks,_)}getResource(o,h,_){return r.makeRequest(h,_)}}Ur.getSourceType=function(k){return pe[k]},Ur.setSourceType=function(k,o){pe[k]=o},Ur.registerForPluginStateChange=r.registerForPluginStateChange;var wh="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const Rc={prelude:Bn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Bn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Bn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Bn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Bn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Bn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Bn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Bn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Bn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Bn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Bn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Bn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Bn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Bn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Bn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Bn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Bn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Bn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Bn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Bn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Bn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Bn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Bn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Bn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Bn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Bn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Bn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",wh),terrainDepth:Bn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",wh),terrainCoords:Bn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",wh)};function Bn(k,o){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=o.match(/attribute ([\w]+) ([\w]+)/g),P=k.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),j=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),te=j?j.concat(P):P,ce={};return{fragmentSource:k=k.replace(h,(me,Se,Ne,Ue,We)=>(ce[We]=!0,Se==="define"?`
#ifndef HAS_UNIFORM_u_${We}
varying ${Ne} ${Ue} ${We};
#else
uniform ${Ne} ${Ue} u_${We};
#endif
`:`
#ifdef HAS_UNIFORM_u_${We}
    ${Ne} ${Ue} ${We} = u_${We};
#endif
`)),vertexSource:o=o.replace(h,(me,Se,Ne,Ue,We)=>{const it=Ue==="float"?"vec2":"vec4",Je=We.match(/color/)?"color":it;return ce[We]?Se==="define"?`
#ifndef HAS_UNIFORM_u_${We}
uniform lowp float u_${We}_t;
attribute ${Ne} ${it} a_${We};
varying ${Ne} ${Ue} ${We};
#else
uniform ${Ne} ${Ue} u_${We};
#endif
`:Je==="vec4"?`
#ifndef HAS_UNIFORM_u_${We}
    ${We} = a_${We};
#else
    ${Ne} ${Ue} ${We} = u_${We};
#endif
`:`
#ifndef HAS_UNIFORM_u_${We}
    ${We} = unpack_mix_${Je}(a_${We}, u_${We}_t);
#else
    ${Ne} ${Ue} ${We} = u_${We};
#endif
`:Se==="define"?`
#ifndef HAS_UNIFORM_u_${We}
uniform lowp float u_${We}_t;
attribute ${Ne} ${it} a_${We};
#else
uniform ${Ne} ${Ue} u_${We};
#endif
`:Je==="vec4"?`
#ifndef HAS_UNIFORM_u_${We}
    ${Ne} ${Ue} ${We} = a_${We};
#else
    ${Ne} ${Ue} ${We} = u_${We};
#endif
`:`
#ifndef HAS_UNIFORM_u_${We}
    ${Ne} ${Ue} ${We} = unpack_mix_${Je}(a_${We}, u_${We}_t);
#else
    ${Ne} ${Ue} ${We} = u_${We};
#endif
`}),staticAttributes:_,staticUniforms:te}}class wx{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(o,h,_,P,j,te,ce,me,Se){this.context=o;let Ne=this.boundPaintVertexBuffers.length!==P.length;for(let Ue=0;!Ne&&Ue<P.length;Ue++)this.boundPaintVertexBuffers[Ue]!==P[Ue]&&(Ne=!0);o.extVertexArrayObject&&this.vao&&this.boundProgram===h&&this.boundLayoutVertexBuffer===_&&!Ne&&this.boundIndexBuffer===j&&this.boundVertexOffset===te&&this.boundDynamicVertexBuffer===ce&&this.boundDynamicVertexBuffer2===me&&this.boundDynamicVertexBuffer3===Se?(o.bindVertexArrayOES.set(this.vao),ce&&ce.bind(),j&&j.dynamicDraw&&j.bind(),me&&me.bind(),Se&&Se.bind()):this.freshBind(h,_,P,j,te,ce,me,Se)}freshBind(o,h,_,P,j,te,ce,me){let Se;const Ne=o.numAttributes,Ue=this.context,We=Ue.gl;if(Ue.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ue.extVertexArrayObject.createVertexArrayOES(),Ue.bindVertexArrayOES.set(this.vao),Se=0,this.boundProgram=o,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=P,this.boundVertexOffset=j,this.boundDynamicVertexBuffer=te,this.boundDynamicVertexBuffer2=ce,this.boundDynamicVertexBuffer3=me;else{Se=Ue.currentNumAttributes||0;for(let it=Ne;it<Se;it++)We.disableVertexAttribArray(it)}h.enableAttributes(We,o);for(const it of _)it.enableAttributes(We,o);te&&te.enableAttributes(We,o),ce&&ce.enableAttributes(We,o),me&&me.enableAttributes(We,o),h.bind(),h.setVertexAttribPointers(We,o,j);for(const it of _)it.bind(),it.setVertexAttribPointers(We,o,j);te&&(te.bind(),te.setVertexAttribPointers(We,o,j)),P&&P.bind(),ce&&(ce.bind(),ce.setVertexAttribPointers(We,o,j)),me&&(me.bind(),me.setVertexAttribPointers(We,o,j)),Ue.currentNumAttributes=Ne}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Hu(k){const o=[];for(let h=0;h<k.length;h++){if(k[h]===null)continue;const _=k[h].split(" ");o.push(_.pop())}return o}class Tx{constructor(o,h,_,P,j,te,ce){const me=o.gl;this.program=me.createProgram();const Se=Hu(_.staticAttributes),Ne=P?P.getBinderAttributes():[],Ue=Se.concat(Ne),We=Rc.prelude.staticUniforms?Hu(Rc.prelude.staticUniforms):[],it=_.staticUniforms?Hu(_.staticUniforms):[],Je=P?P.getBinderUniforms():[],et=We.concat(it).concat(Je),pt=[];for(const jt of et)pt.indexOf(jt)<0&&pt.push(jt);const yt=P?P.defines():[];te&&yt.push("#define OVERDRAW_INSPECTOR;"),ce&&yt.push("#define TERRAIN3D;");const wt=yt.concat(Rc.prelude.fragmentSource,_.fragmentSource).join(`
`),at=yt.concat(Rc.prelude.vertexSource,_.vertexSource).join(`
`),Mt=me.createShader(me.FRAGMENT_SHADER);if(me.isContextLost())return void(this.failedToCreate=!0);me.shaderSource(Mt,wt),me.compileShader(Mt),me.attachShader(this.program,Mt);const St=me.createShader(me.VERTEX_SHADER);if(me.isContextLost())return void(this.failedToCreate=!0);me.shaderSource(St,at),me.compileShader(St),me.attachShader(this.program,St),this.attributes={};const Ot={};this.numAttributes=Ue.length;for(let jt=0;jt<this.numAttributes;jt++)Ue[jt]&&(me.bindAttribLocation(this.program,jt,Ue[jt]),this.attributes[Ue[jt]]=jt);me.linkProgram(this.program),me.deleteShader(St),me.deleteShader(Mt);for(let jt=0;jt<pt.length;jt++){const Ut=pt[jt];if(Ut&&!Ot[Ut]){const zt=me.getUniformLocation(this.program,Ut);zt&&(Ot[Ut]=zt)}}this.fixedUniforms=j(o,Ot),this.terrainUniforms=((jt,Ut)=>({u_depth:new r.Uniform1i(jt,Ut.u_depth),u_terrain:new r.Uniform1i(jt,Ut.u_terrain),u_terrain_dim:new r.Uniform1f(jt,Ut.u_terrain_dim),u_terrain_matrix:new r.UniformMatrix4f(jt,Ut.u_terrain_matrix),u_terrain_unpack:new r.Uniform4f(jt,Ut.u_terrain_unpack),u_terrain_offset:new r.Uniform1f(jt,Ut.u_terrain_offset),u_terrain_exaggeration:new r.Uniform1f(jt,Ut.u_terrain_exaggeration)}))(o,Ot),this.binderUniforms=P?P.getUniforms(o,Ot):[]}draw(o,h,_,P,j,te,ce,me,Se,Ne,Ue,We,it,Je,et,pt,yt,wt){const at=o.gl;if(this.failedToCreate)return;if(o.program.set(this.program),o.setDepthMode(_),o.setStencilMode(P),o.setColorMode(j),o.setCullFace(te),me){o.activeTexture.set(at.TEXTURE2),at.bindTexture(at.TEXTURE_2D,me.depthTexture),o.activeTexture.set(at.TEXTURE3),at.bindTexture(at.TEXTURE_2D,me.texture);for(const St in this.terrainUniforms)this.terrainUniforms[St].set(me[St])}for(const St in this.fixedUniforms)this.fixedUniforms[St].set(ce[St]);et&&et.setUniforms(o,this.binderUniforms,it,{zoom:Je});let Mt=0;switch(h){case at.LINES:Mt=2;break;case at.TRIANGLES:Mt=3;break;case at.LINE_STRIP:Mt=1}for(const St of We.get()){const Ot=St.vaos||(St.vaos={});(Ot[Se]||(Ot[Se]=new wx)).bind(o,this,Ne,et?et.getPaintVertexBuffers():[],Ue,St.vertexOffset,pt,yt,wt),at.drawElements(h,St.primitiveLength*Mt,at.UNSIGNED_SHORT,St.primitiveOffset*Mt*2)}}}function Th(k,o,h){const _=1/sn(h,1,o.transform.tileZoom),P=Math.pow(2,h.tileID.overscaledZ),j=h.tileSize*Math.pow(2,o.transform.tileZoom)/P,te=j*(h.tileID.canonical.x+h.tileID.wrap*P),ce=j*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[_,k.fromScale,k.toScale],u_fade:k.t,u_pixel_coord_upper:[te>>16,ce>>16],u_pixel_coord_lower:[65535&te,65535&ce]}}const am=(k,o,h,_)=>{const P=o.style.light,j=P.properties.get("position"),te=[j.x,j.y,j.z],ce=r.create$1();P.properties.get("anchor")==="viewport"&&r.fromRotation(ce,-o.transform.angle),r.transformMat3(te,te,ce);const me=P.properties.get("color");return{u_matrix:k,u_lightpos:te,u_lightintensity:P.properties.get("intensity"),u_lightcolor:[me.r,me.g,me.b],u_vertical_gradient:+h,u_opacity:_}},Ch=(k,o,h,_,P,j,te)=>r.extend(am(k,o,h,_),Th(j,o,te),{u_height_factor:-Math.pow(2,P.overscaledZ)/te.tileSize/8}),Sh=k=>({u_matrix:k}),Eh=(k,o,h,_)=>r.extend(Sh(k),Th(h,o,_)),om=(k,o)=>({u_matrix:k,u_world:o}),lm=(k,o,h,_,P)=>r.extend(Eh(k,o,h,_),{u_world:P}),nl=(k,o,h,_)=>{const P=k.transform;let j,te;if(_.paint.get("circle-pitch-alignment")==="map"){const ce=sn(h,1,P.zoom);j=!0,te=[ce,ce]}else j=!1,te=P.pixelsToGLUnits;return{u_camera_to_center_distance:P.cameraToCenterDistance,u_scale_with_map:+(_.paint.get("circle-pitch-scale")==="map"),u_matrix:k.translatePosMatrix(o.posMatrix,h,_.paint.get("circle-translate"),_.paint.get("circle-translate-anchor")),u_pitch_with_map:+j,u_device_pixel_ratio:k.pixelRatio,u_extrude_scale:te}},qu=(k,o,h)=>{const _=sn(h,1,o.zoom),P=Math.pow(2,o.zoom-h.tileID.overscaledZ),j=h.tileID.overscaleFactor();return{u_matrix:k,u_camera_to_center_distance:o.cameraToCenterDistance,u_pixels_to_tile_units:_,u_extrude_scale:[o.pixelsToGLUnits[0]/(_*P),o.pixelsToGLUnits[1]/(_*P)],u_overscale_factor:j}},Nl=(k,o,h=1)=>({u_matrix:k,u_color:o,u_overlay:0,u_overlay_scale:h}),Lc=k=>({u_matrix:k}),Wu=(k,o,h,_)=>({u_matrix:k,u_extrude_scale:sn(o,1,h),u_intensity:_});function Yu(k,o){const h=Math.pow(2,o.canonical.z),_=o.canonical.y;return[new r.MercatorCoordinate(0,_/h).toLngLat().lat,new r.MercatorCoordinate(0,(_+1)/h).toLngLat().lat]}const zc=(k,o,h,_)=>{const P=k.transform;return{u_matrix:kh(k,o,h,_),u_ratio:1/sn(o,1,P.zoom),u_device_pixel_ratio:k.pixelRatio,u_units_to_pixels:[1/P.pixelsToGLUnits[0],1/P.pixelsToGLUnits[1]]}},Zu=(k,o,h,_,P)=>r.extend(zc(k,o,h,P),{u_image:0,u_image_height:_}),Nc=(k,o,h,_,P)=>{const j=k.transform,te=Oc(o,j);return{u_matrix:kh(k,o,h,P),u_texsize:o.imageAtlasTexture.size,u_ratio:1/sn(o,1,j.zoom),u_device_pixel_ratio:k.pixelRatio,u_image:0,u_scale:[te,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/j.pixelsToGLUnits[0],1/j.pixelsToGLUnits[1]]}},pr=(k,o,h,_,P,j)=>{const te=k.lineAtlas,ce=Oc(o,k.transform),me=h.layout.get("line-cap")==="round",Se=te.getDash(_.from,me),Ne=te.getDash(_.to,me),Ue=Se.width*P.fromScale,We=Ne.width*P.toScale;return r.extend(zc(k,o,h,j),{u_patternscale_a:[ce/Ue,-Se.height/2],u_patternscale_b:[ce/We,-Ne.height/2],u_sdfgamma:te.width/(256*Math.min(Ue,We)*k.pixelRatio)/2,u_image:0,u_tex_y_a:Se.y,u_tex_y_b:Ne.y,u_mix:P.t})};function Oc(k,o){return 1/sn(k,1,o.tileZoom)}function kh(k,o,h,_){return k.translatePosMatrix(_?_.posMatrix:o.tileID.posMatrix,o,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}const cm=(k,o,h,_,P)=>{return{u_matrix:k,u_tl_parent:o,u_scale_parent:h,u_buffer_scale:1,u_fade_t:_.mix,u_opacity:_.opacity*P.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:P.paint.get("raster-brightness-min"),u_brightness_high:P.paint.get("raster-brightness-max"),u_saturation_factor:(te=P.paint.get("raster-saturation"),te>0?1-1/(1.001-te):-te),u_contrast_factor:(j=P.paint.get("raster-contrast"),j>0?1/(1-j):1+j),u_spin_weights:um(P.paint.get("raster-hue-rotate"))};var j,te};function um(k){k*=Math.PI/180;const o=Math.sin(k),h=Math.cos(k);return[(2*h+1)/3,(-Math.sqrt(3)*o-h+1)/3,(Math.sqrt(3)*o-h+1)/3]}const Xu=(k,o,h,_,P,j,te,ce,me,Se)=>{const Ne=P.transform;return{u_is_size_zoom_constant:+(k==="constant"||k==="source"),u_is_size_feature_constant:+(k==="constant"||k==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:Ne.cameraToCenterDistance,u_pitch:Ne.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:Ne.width/Ne.height,u_fade_change:P.options.fadeDuration?P.symbolFadeChange:1,u_matrix:j,u_label_plane_matrix:te,u_coord_matrix:ce,u_is_text:+me,u_pitch_with_map:+_,u_texsize:Se,u_texture:0}},Ah=(k,o,h,_,P,j,te,ce,me,Se,Ne)=>{const Ue=P.transform;return r.extend(Xu(k,o,h,_,P,j,te,ce,me,Se),{u_gamma_scale:_?Math.cos(Ue._pitch)*Ue.cameraToCenterDistance:1,u_device_pixel_ratio:P.pixelRatio,u_is_halo:1})},Cx=(k,o,h,_,P,j,te,ce,me,Se)=>r.extend(Ah(k,o,h,_,P,j,te,ce,!0,me),{u_texsize_icon:Se,u_texture_icon:1}),Sx=(k,o,h)=>({u_matrix:k,u_opacity:o,u_color:h}),Mh=(k,o,h,_,P,j)=>r.extend(function(te,ce,me,Se){const Ne=me.imageManager.getPattern(te.from.toString()),Ue=me.imageManager.getPattern(te.to.toString()),{width:We,height:it}=me.imageManager.getPixelSize(),Je=Math.pow(2,Se.tileID.overscaledZ),et=Se.tileSize*Math.pow(2,me.transform.tileZoom)/Je,pt=et*(Se.tileID.canonical.x+Se.tileID.wrap*Je),yt=et*Se.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ne.tl,u_pattern_br_a:Ne.br,u_pattern_tl_b:Ue.tl,u_pattern_br_b:Ue.br,u_texsize:[We,it],u_mix:ce.t,u_pattern_size_a:Ne.displaySize,u_pattern_size_b:Ue.displaySize,u_scale_a:ce.fromScale,u_scale_b:ce.toScale,u_tile_units_to_pixels:1/sn(Se,1,me.transform.tileZoom),u_pixel_coord_upper:[pt>>16,yt>>16],u_pixel_coord_lower:[65535&pt,65535&yt]}}(_,j,h,P),{u_matrix:k,u_opacity:o}),Ph={fillExtrusion:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_lightpos:new r.Uniform3f(k,o.u_lightpos),u_lightintensity:new r.Uniform1f(k,o.u_lightintensity),u_lightcolor:new r.Uniform3f(k,o.u_lightcolor),u_vertical_gradient:new r.Uniform1f(k,o.u_vertical_gradient),u_opacity:new r.Uniform1f(k,o.u_opacity)}),fillExtrusionPattern:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_lightpos:new r.Uniform3f(k,o.u_lightpos),u_lightintensity:new r.Uniform1f(k,o.u_lightintensity),u_lightcolor:new r.Uniform3f(k,o.u_lightcolor),u_vertical_gradient:new r.Uniform1f(k,o.u_vertical_gradient),u_height_factor:new r.Uniform1f(k,o.u_height_factor),u_image:new r.Uniform1i(k,o.u_image),u_texsize:new r.Uniform2f(k,o.u_texsize),u_pixel_coord_upper:new r.Uniform2f(k,o.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(k,o.u_pixel_coord_lower),u_scale:new r.Uniform3f(k,o.u_scale),u_fade:new r.Uniform1f(k,o.u_fade),u_opacity:new r.Uniform1f(k,o.u_opacity)}),fill:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix)}),fillPattern:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_image:new r.Uniform1i(k,o.u_image),u_texsize:new r.Uniform2f(k,o.u_texsize),u_pixel_coord_upper:new r.Uniform2f(k,o.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(k,o.u_pixel_coord_lower),u_scale:new r.Uniform3f(k,o.u_scale),u_fade:new r.Uniform1f(k,o.u_fade)}),fillOutline:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_world:new r.Uniform2f(k,o.u_world)}),fillOutlinePattern:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_world:new r.Uniform2f(k,o.u_world),u_image:new r.Uniform1i(k,o.u_image),u_texsize:new r.Uniform2f(k,o.u_texsize),u_pixel_coord_upper:new r.Uniform2f(k,o.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(k,o.u_pixel_coord_lower),u_scale:new r.Uniform3f(k,o.u_scale),u_fade:new r.Uniform1f(k,o.u_fade)}),circle:(k,o)=>({u_camera_to_center_distance:new r.Uniform1f(k,o.u_camera_to_center_distance),u_scale_with_map:new r.Uniform1i(k,o.u_scale_with_map),u_pitch_with_map:new r.Uniform1i(k,o.u_pitch_with_map),u_extrude_scale:new r.Uniform2f(k,o.u_extrude_scale),u_device_pixel_ratio:new r.Uniform1f(k,o.u_device_pixel_ratio),u_matrix:new r.UniformMatrix4f(k,o.u_matrix)}),collisionBox:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_camera_to_center_distance:new r.Uniform1f(k,o.u_camera_to_center_distance),u_pixels_to_tile_units:new r.Uniform1f(k,o.u_pixels_to_tile_units),u_extrude_scale:new r.Uniform2f(k,o.u_extrude_scale),u_overscale_factor:new r.Uniform1f(k,o.u_overscale_factor)}),collisionCircle:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_inv_matrix:new r.UniformMatrix4f(k,o.u_inv_matrix),u_camera_to_center_distance:new r.Uniform1f(k,o.u_camera_to_center_distance),u_viewport_size:new r.Uniform2f(k,o.u_viewport_size)}),debug:(k,o)=>({u_color:new r.UniformColor(k,o.u_color),u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_overlay:new r.Uniform1i(k,o.u_overlay),u_overlay_scale:new r.Uniform1f(k,o.u_overlay_scale)}),clippingMask:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix)}),heatmap:(k,o)=>({u_extrude_scale:new r.Uniform1f(k,o.u_extrude_scale),u_intensity:new r.Uniform1f(k,o.u_intensity),u_matrix:new r.UniformMatrix4f(k,o.u_matrix)}),heatmapTexture:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_world:new r.Uniform2f(k,o.u_world),u_image:new r.Uniform1i(k,o.u_image),u_color_ramp:new r.Uniform1i(k,o.u_color_ramp),u_opacity:new r.Uniform1f(k,o.u_opacity)}),hillshade:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_image:new r.Uniform1i(k,o.u_image),u_latrange:new r.Uniform2f(k,o.u_latrange),u_light:new r.Uniform2f(k,o.u_light),u_shadow:new r.UniformColor(k,o.u_shadow),u_highlight:new r.UniformColor(k,o.u_highlight),u_accent:new r.UniformColor(k,o.u_accent)}),hillshadePrepare:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_image:new r.Uniform1i(k,o.u_image),u_dimension:new r.Uniform2f(k,o.u_dimension),u_zoom:new r.Uniform1f(k,o.u_zoom),u_unpack:new r.Uniform4f(k,o.u_unpack)}),line:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_ratio:new r.Uniform1f(k,o.u_ratio),u_device_pixel_ratio:new r.Uniform1f(k,o.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(k,o.u_units_to_pixels)}),lineGradient:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_ratio:new r.Uniform1f(k,o.u_ratio),u_device_pixel_ratio:new r.Uniform1f(k,o.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(k,o.u_units_to_pixels),u_image:new r.Uniform1i(k,o.u_image),u_image_height:new r.Uniform1f(k,o.u_image_height)}),linePattern:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_texsize:new r.Uniform2f(k,o.u_texsize),u_ratio:new r.Uniform1f(k,o.u_ratio),u_device_pixel_ratio:new r.Uniform1f(k,o.u_device_pixel_ratio),u_image:new r.Uniform1i(k,o.u_image),u_units_to_pixels:new r.Uniform2f(k,o.u_units_to_pixels),u_scale:new r.Uniform3f(k,o.u_scale),u_fade:new r.Uniform1f(k,o.u_fade)}),lineSDF:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_ratio:new r.Uniform1f(k,o.u_ratio),u_device_pixel_ratio:new r.Uniform1f(k,o.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(k,o.u_units_to_pixels),u_patternscale_a:new r.Uniform2f(k,o.u_patternscale_a),u_patternscale_b:new r.Uniform2f(k,o.u_patternscale_b),u_sdfgamma:new r.Uniform1f(k,o.u_sdfgamma),u_image:new r.Uniform1i(k,o.u_image),u_tex_y_a:new r.Uniform1f(k,o.u_tex_y_a),u_tex_y_b:new r.Uniform1f(k,o.u_tex_y_b),u_mix:new r.Uniform1f(k,o.u_mix)}),raster:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_tl_parent:new r.Uniform2f(k,o.u_tl_parent),u_scale_parent:new r.Uniform1f(k,o.u_scale_parent),u_buffer_scale:new r.Uniform1f(k,o.u_buffer_scale),u_fade_t:new r.Uniform1f(k,o.u_fade_t),u_opacity:new r.Uniform1f(k,o.u_opacity),u_image0:new r.Uniform1i(k,o.u_image0),u_image1:new r.Uniform1i(k,o.u_image1),u_brightness_low:new r.Uniform1f(k,o.u_brightness_low),u_brightness_high:new r.Uniform1f(k,o.u_brightness_high),u_saturation_factor:new r.Uniform1f(k,o.u_saturation_factor),u_contrast_factor:new r.Uniform1f(k,o.u_contrast_factor),u_spin_weights:new r.Uniform3f(k,o.u_spin_weights)}),symbolIcon:(k,o)=>({u_is_size_zoom_constant:new r.Uniform1i(k,o.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(k,o.u_is_size_feature_constant),u_size_t:new r.Uniform1f(k,o.u_size_t),u_size:new r.Uniform1f(k,o.u_size),u_camera_to_center_distance:new r.Uniform1f(k,o.u_camera_to_center_distance),u_pitch:new r.Uniform1f(k,o.u_pitch),u_rotate_symbol:new r.Uniform1i(k,o.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(k,o.u_aspect_ratio),u_fade_change:new r.Uniform1f(k,o.u_fade_change),u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(k,o.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(k,o.u_coord_matrix),u_is_text:new r.Uniform1i(k,o.u_is_text),u_pitch_with_map:new r.Uniform1i(k,o.u_pitch_with_map),u_texsize:new r.Uniform2f(k,o.u_texsize),u_texture:new r.Uniform1i(k,o.u_texture)}),symbolSDF:(k,o)=>({u_is_size_zoom_constant:new r.Uniform1i(k,o.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(k,o.u_is_size_feature_constant),u_size_t:new r.Uniform1f(k,o.u_size_t),u_size:new r.Uniform1f(k,o.u_size),u_camera_to_center_distance:new r.Uniform1f(k,o.u_camera_to_center_distance),u_pitch:new r.Uniform1f(k,o.u_pitch),u_rotate_symbol:new r.Uniform1i(k,o.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(k,o.u_aspect_ratio),u_fade_change:new r.Uniform1f(k,o.u_fade_change),u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(k,o.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(k,o.u_coord_matrix),u_is_text:new r.Uniform1i(k,o.u_is_text),u_pitch_with_map:new r.Uniform1i(k,o.u_pitch_with_map),u_texsize:new r.Uniform2f(k,o.u_texsize),u_texture:new r.Uniform1i(k,o.u_texture),u_gamma_scale:new r.Uniform1f(k,o.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(k,o.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(k,o.u_is_halo)}),symbolTextAndIcon:(k,o)=>({u_is_size_zoom_constant:new r.Uniform1i(k,o.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(k,o.u_is_size_feature_constant),u_size_t:new r.Uniform1f(k,o.u_size_t),u_size:new r.Uniform1f(k,o.u_size),u_camera_to_center_distance:new r.Uniform1f(k,o.u_camera_to_center_distance),u_pitch:new r.Uniform1f(k,o.u_pitch),u_rotate_symbol:new r.Uniform1i(k,o.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(k,o.u_aspect_ratio),u_fade_change:new r.Uniform1f(k,o.u_fade_change),u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(k,o.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(k,o.u_coord_matrix),u_is_text:new r.Uniform1i(k,o.u_is_text),u_pitch_with_map:new r.Uniform1i(k,o.u_pitch_with_map),u_texsize:new r.Uniform2f(k,o.u_texsize),u_texsize_icon:new r.Uniform2f(k,o.u_texsize_icon),u_texture:new r.Uniform1i(k,o.u_texture),u_texture_icon:new r.Uniform1i(k,o.u_texture_icon),u_gamma_scale:new r.Uniform1f(k,o.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(k,o.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(k,o.u_is_halo)}),background:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_opacity:new r.Uniform1f(k,o.u_opacity),u_color:new r.UniformColor(k,o.u_color)}),backgroundPattern:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_opacity:new r.Uniform1f(k,o.u_opacity),u_image:new r.Uniform1i(k,o.u_image),u_pattern_tl_a:new r.Uniform2f(k,o.u_pattern_tl_a),u_pattern_br_a:new r.Uniform2f(k,o.u_pattern_br_a),u_pattern_tl_b:new r.Uniform2f(k,o.u_pattern_tl_b),u_pattern_br_b:new r.Uniform2f(k,o.u_pattern_br_b),u_texsize:new r.Uniform2f(k,o.u_texsize),u_mix:new r.Uniform1f(k,o.u_mix),u_pattern_size_a:new r.Uniform2f(k,o.u_pattern_size_a),u_pattern_size_b:new r.Uniform2f(k,o.u_pattern_size_b),u_scale_a:new r.Uniform1f(k,o.u_scale_a),u_scale_b:new r.Uniform1f(k,o.u_scale_b),u_pixel_coord_upper:new r.Uniform2f(k,o.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(k,o.u_pixel_coord_lower),u_tile_units_to_pixels:new r.Uniform1f(k,o.u_tile_units_to_pixels)}),terrain:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_texture:new r.Uniform1i(k,o.u_texture)}),terrainDepth:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix)}),terrainCoords:(k,o)=>({u_matrix:new r.UniformMatrix4f(k,o.u_matrix),u_texture:new r.Uniform1i(k,o.u_texture),u_terrain_coords_id:new r.Uniform1f(k,o.u_terrain_coords_id)})};class Ih{constructor(o,h,_){this.context=o;const P=o.gl;this.buffer=P.createBuffer(),this.dynamicDraw=!!_,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),P.bufferData(P.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?P.DYNAMIC_DRAW:P.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Dh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class dm{constructor(o,h,_,P){this.length=h.length,this.attributes=_,this.itemSize=h.bytesPerElement,this.dynamicDraw=P,this.context=o;const j=o.gl;this.buffer=j.createBuffer(),o.bindVertexBuffer.set(this.buffer),j.bufferData(j.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?j.DYNAMIC_DRAW:j.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){if(o.length!==this.length)throw new Error(`Length of new data is ${o.length}, which doesn't match current length of ${this.length}`);const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,h){for(let _=0;_<this.attributes.length;_++){const P=h.attributes[this.attributes[_].name];P!==void 0&&o.enableVertexAttribArray(P)}}setVertexAttribPointers(o,h,_){for(let P=0;P<this.attributes.length;P++){const j=this.attributes[P],te=h.attributes[j.name];te!==void 0&&o.vertexAttribPointer(te,j.components,o[Dh[j.type]],!1,this.itemSize,j.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Dn{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ex extends Dn{getDefault(){return r.Color.transparent}set(o){const h=this.current;(o.r!==h.r||o.g!==h.g||o.b!==h.b||o.a!==h.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class jc extends Dn{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class Fc extends Dn{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class hm extends Dn{getDefault(){return[!0,!0,!0,!0]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||o[3]!==h[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Js extends Dn{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class Rh extends Dn{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class Ku extends Dn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const h=this.current;(o.func!==h.func||o.ref!==h.ref||o.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class Qu extends Dn{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class Lh extends Dn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=o,this.dirty=!1}}class zh extends Dn{getDefault(){return[0,1]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class Ju extends Dn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=o,this.dirty=!1}}class Nh extends Dn{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class Oh extends Dn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.BLEND):h.disable(h.BLEND),this.current=o,this.dirty=!1}}class ed extends Dn{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class pm extends Dn{getDefault(){return r.Color.transparent}set(o){const h=this.current;(o.r!==h.r||o.g!==h.g||o.b!==h.b||o.a!==h.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class fm extends Dn{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class Ol extends Dn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=o,this.dirty=!1}}class kx extends Dn{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class Ax extends Dn{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class Mx extends Dn{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class Px extends Dn{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class Ix extends Dn{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||o[3]!==h[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Dx extends Dn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class jh extends Dn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class td extends Dn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class Fh extends Dn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Bh extends Dn{getDefault(){return null}set(o){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class jl extends Dn{constructor(o){super(o),this.vao=o.extVertexArrayObject}getDefault(){return null}set(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)}}class mm extends Dn{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class gm extends Dn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class $h extends Dn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class Ao extends Dn{constructor(o,h){super(o),this.context=o,this.parent=h}getDefault(){return null}}class ym extends Ao{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class Fl extends Ao{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Bl{constructor(o,h,_,P){this.context=o,this.width=h,this.height=_;const j=o.gl,te=this.framebuffer=j.createFramebuffer();if(this.colorAttachment=new ym(o,te),P&&(this.depthAttachment=new Fl(o,te)),j.checkFramebufferStatus(j.FRAMEBUFFER)!==j.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const o=this.context.gl,h=this.colorAttachment.get();if(h&&o.deleteTexture(h),this.depthAttachment){const _=this.depthAttachment.get();_&&o.deleteRenderbuffer(_)}o.deleteFramebuffer(this.framebuffer)}}class vr{constructor(o,h,_){this.blendFunction=o,this.blendColor=h,this.mask=_}}vr.Replace=[1,0],vr.disabled=new vr(vr.Replace,r.Color.transparent,[!1,!1,!1,!1]),vr.unblended=new vr(vr.Replace,r.Color.transparent,[!0,!0,!0,!0]),vr.alphaBlended=new vr([1,771],r.Color.transparent,[!0,!0,!0,!0]);class Uh{constructor(o){this.gl=o,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ex(this),this.clearDepth=new jc(this),this.clearStencil=new Fc(this),this.colorMask=new hm(this),this.depthMask=new Js(this),this.stencilMask=new Rh(this),this.stencilFunc=new Ku(this),this.stencilOp=new Qu(this),this.stencilTest=new Lh(this),this.depthRange=new zh(this),this.depthTest=new Ju(this),this.depthFunc=new Nh(this),this.blend=new Oh(this),this.blendFunc=new ed(this),this.blendColor=new pm(this),this.blendEquation=new fm(this),this.cullFace=new Ol(this),this.cullFaceSide=new kx(this),this.frontFace=new Ax(this),this.program=new Mx(this),this.activeTexture=new Px(this),this.viewport=new Ix(this),this.bindFramebuffer=new Dx(this),this.bindRenderbuffer=new jh(this),this.bindTexture=new td(this),this.bindVertexBuffer=new Fh(this),this.bindElementBuffer=new Bh(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new jl(this),this.pixelStoreUnpack=new mm(this),this.pixelStoreUnpackPremultiplyAlpha=new gm(this),this.pixelStoreUnpackFlipY=new $h(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=o.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(o.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,h){return new Ih(this,o,h)}createVertexBuffer(o,h,_){return new dm(this,o,h,_)}createRenderbuffer(o,h,_){const P=this.gl,j=P.createRenderbuffer();return this.bindRenderbuffer.set(j),P.renderbufferStorage(P.RENDERBUFFER,o,h,_),this.bindRenderbuffer.set(null),j}createFramebuffer(o,h,_){return new Bl(this,o,h,_)}clear({color:o,depth:h}){const _=this.gl;let P=0;o&&(P|=_.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(P|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),_.clear(P)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){b(o.blendFunction,vr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ti{constructor(o,h,_){this.func=o,this.mask=h,this.range=_}}Ti.ReadOnly=!1,Ti.ReadWrite=!0,Ti.disabled=new Ti(519,Ti.ReadOnly,[0,1]);const $l=7680;class fr{constructor(o,h,_,P,j,te){this.test=o,this.ref=h,this.mask=_,this.fail=P,this.depthFail=j,this.pass=te}}fr.disabled=new fr({func:519,mask:0},0,0,$l,$l,$l);class ir{constructor(o,h,_){this.enable=o,this.mode=h,this.frontFace=_}}let Mo;function xm(k,o,h,_,P,j,te){const ce=k.context,me=ce.gl,Se=k.useProgram("collisionBox"),Ne=[];let Ue=0,We=0;for(let at=0;at<_.length;at++){const Mt=_[at],St=o.getTile(Mt),Ot=St.getBucket(h);if(!Ot)continue;let jt=Mt.posMatrix;P[0]===0&&P[1]===0||(jt=k.translatePosMatrix(Mt.posMatrix,St,P,j));const Ut=te?Ot.textCollisionBox:Ot.iconCollisionBox,zt=Ot.collisionCircleArray;if(zt.length>0){const ai=r.create(),Xt=jt;r.mul(ai,Ot.placementInvProjMatrix,k.transform.glCoordMatrix),r.mul(ai,ai,Ot.placementViewportMatrix),Ne.push({circleArray:zt,circleOffset:We,transform:Xt,invTransform:ai,coord:Mt}),Ue+=zt.length/4,We=Ue}Ut&&Se.draw(ce,me.LINES,Ti.disabled,fr.disabled,k.colorModeForRenderPass(),ir.disabled,qu(jt,k.transform,St),k.style.terrain&&k.style.terrain.getTerrainData(Mt),h.id,Ut.layoutVertexBuffer,Ut.indexBuffer,Ut.segments,null,k.transform.zoom,null,null,Ut.collisionVertexBuffer)}if(!te||!Ne.length)return;const it=k.useProgram("collisionCircle"),Je=new r.CollisionCircleLayoutArray;Je.resize(4*Ue),Je._trim();let et=0;for(const at of Ne)for(let Mt=0;Mt<at.circleArray.length/4;Mt++){const St=4*Mt,Ot=at.circleArray[St+0],jt=at.circleArray[St+1],Ut=at.circleArray[St+2],zt=at.circleArray[St+3];Je.emplace(et++,Ot,jt,Ut,zt,0),Je.emplace(et++,Ot,jt,Ut,zt,1),Je.emplace(et++,Ot,jt,Ut,zt,2),Je.emplace(et++,Ot,jt,Ut,zt,3)}(!Mo||Mo.length<2*Ue)&&(Mo=function(at){const Mt=2*at,St=new r.QuadTriangleArray;St.resize(Mt),St._trim();for(let Ot=0;Ot<Mt;Ot++){const jt=6*Ot;St.uint16[jt+0]=4*Ot+0,St.uint16[jt+1]=4*Ot+1,St.uint16[jt+2]=4*Ot+2,St.uint16[jt+3]=4*Ot+2,St.uint16[jt+4]=4*Ot+3,St.uint16[jt+5]=4*Ot+0}return St}(Ue));const pt=ce.createIndexBuffer(Mo,!0),yt=ce.createVertexBuffer(Je,r.collisionCircleLayout.members,!0);for(const at of Ne){const Mt={u_matrix:at.transform,u_inv_matrix:at.invTransform,u_camera_to_center_distance:(wt=k.transform).cameraToCenterDistance,u_viewport_size:[wt.width,wt.height]};it.draw(ce,me.TRIANGLES,Ti.disabled,fr.disabled,k.colorModeForRenderPass(),ir.disabled,Mt,k.style.terrain&&k.style.terrain.getTerrainData(at.coord),h.id,yt,pt,r.SegmentVector.simpleSegment(0,2*at.circleOffset,at.circleArray.length,at.circleArray.length/2),null,k.transform.zoom,null,null,null)}var wt;yt.destroy(),pt.destroy()}ir.disabled=new ir(!1,1029,2305),ir.backCCW=new ir(!0,1029,2305);const Rx=r.identity(new Float32Array(16));function bm(k,o,h,_,P,j){const{horizontalAlign:te,verticalAlign:ce}=r.getAnchorAlignment(k),me=-(te-.5)*o,Se=-(ce-.5)*h,Ne=r.evaluateVariableOffset(k,_);return new r.pointGeometry((me/P+Ne[0])*j,(Se/P+Ne[1])*j)}function Lx(k,o,h,_,P,j,te,ce,me,Se,Ne){const Ue=k.text.placedSymbolArray,We=k.text.dynamicLayoutVertexArray,it=k.icon.dynamicLayoutVertexArray,Je={};We.clear();for(let et=0;et<Ue.length;et++){const pt=Ue.get(et),yt=k.allowVerticalPlacement&&!pt.placedOrientation,wt=pt.hidden||!pt.crossTileID||yt?null:_[pt.crossTileID];if(wt){const at=new r.pointGeometry(pt.anchorX,pt.anchorY),Mt=ht(at,h?te:j,Ne),St=gt(P.cameraToCenterDistance,Mt.signedDistanceFromCamera);let Ot=r.evaluateSizeForFeature(k.textSizeData,me,pt)*St/r.ONE_EM;h&&(Ot*=k.tilePixelRatio/ce);const{width:jt,height:Ut,anchor:zt,textOffset:ai,textBoxScale:Xt}=wt,li=bm(zt,jt,Ut,ai,Xt,Ot),Ki=h?ht(at.add(li),j,Ne).point:Mt.point.add(o?li.rotate(-P.angle):li),un=k.allowVerticalPlacement&&pt.placedOrientation===r.WritingMode.vertical?Math.PI/2:0;for(let Ii=0;Ii<pt.numGlyphs;Ii++)r.addDynamicAttributes(We,Ki,un);Se&&pt.associatedIconIndex>=0&&(Je[pt.associatedIconIndex]={shiftedAnchor:Ki,angle:un})}else cn(pt.numGlyphs,We)}if(Se){it.clear();const et=k.icon.placedSymbolArray;for(let pt=0;pt<et.length;pt++){const yt=et.get(pt);if(yt.hidden)cn(yt.numGlyphs,it);else{const wt=Je[pt];if(wt)for(let at=0;at<yt.numGlyphs;at++)r.addDynamicAttributes(it,wt.shiftedAnchor,wt.angle);else cn(yt.numGlyphs,it)}}k.icon.dynamicLayoutVertexBuffer.updateData(it)}k.text.dynamicLayoutVertexBuffer.updateData(We)}function Vh(k,o,h){return h.iconsInText&&o?"symbolTextAndIcon":k?"symbolSDF":"symbolIcon"}function Bc(k,o,h,_,P,j,te,ce,me,Se,Ne,Ue){const We=k.context,it=We.gl,Je=k.transform,et=ce==="map",pt=me==="map",yt=ce!=="viewport"&&h.layout.get("symbol-placement")!=="point",wt=et&&!pt&&!yt,at=!h.layout.get("symbol-sort-key").isConstant();let Mt=!1;const St=k.depthModeForSublayer(0,Ti.ReadOnly),Ot=h.layout.get("text-variable-anchor"),jt=[];for(const Ut of _){const zt=o.getTile(Ut),ai=zt.getBucket(h);if(!ai)continue;const Xt=P?ai.text:ai.icon;if(!Xt||!Xt.segments.get().length)continue;const li=Xt.programConfigurations.get(h.id),Ki=P||ai.sdfIcons,un=P?ai.textSizeData:ai.iconSizeData,Ii=pt||Je.pitch!==0,$n=k.useProgram(Vh(Ki,P,ai),li),Un=r.evaluateSizeForZoom(un,Je.zoom),wn=k.style.terrain&&k.style.terrain.getTerrainData(Ut);let Cn,kn,ta,Ka,Ia=[0,0],Da=null;if(P){if(kn=zt.glyphAtlasTexture,ta=it.LINEAR,Cn=zt.glyphAtlasTexture.size,ai.iconsInText){Ia=zt.imageAtlasTexture.size,Da=zt.imageAtlasTexture;const _a=un.kind==="composite"||un.kind==="camera";Ka=Ii||k.options.rotating||k.options.zooming||_a?it.LINEAR:it.NEAREST}}else{const _a=h.layout.get("icon-size").constantOr(0)!==1||ai.iconsNeedLinear;kn=zt.imageAtlasTexture,ta=Ki||k.options.rotating||k.options.zooming||_a||Ii?it.LINEAR:it.NEAREST,Cn=zt.imageAtlasTexture.size}const ul=sn(zt,1,k.transform.zoom),os=tt(Ut.posMatrix,pt,et,k.transform,ul),Ra=nt(Ut.posMatrix,pt,et,k.transform,ul),dl=Ot&&ai.hasTextData(),gd=h.layout.get("icon-text-fit")!=="none"&&dl&&ai.hasIconData();if(yt){const _a=k.style.terrain?(Wl,yd)=>k.style.terrain.getElevation(Ut,Wl,yd):null,ql=h.layout.get("text-rotation-alignment")==="map";Lt(ai,Ut.posMatrix,k,P,os,Ra,pt,Se,ql,_a)}const An=k.translatePosMatrix(Ut.posMatrix,zt,j,te),rr=yt||P&&Ot||gd?Rx:os,Pn=k.translatePosMatrix(Ra,zt,j,te,!0),jr=Ki&&h.paint.get(P?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Vs;Vs=Ki?ai.iconsInText?Cx(un.kind,Un,wt,pt,k,An,rr,Pn,Cn,Ia):Ah(un.kind,Un,wt,pt,k,An,rr,Pn,P,Cn):Xu(un.kind,Un,wt,pt,k,An,rr,Pn,P,Cn);const cr={program:$n,buffers:Xt,uniformValues:Vs,atlasTexture:kn,atlasTextureIcon:Da,atlasInterpolation:ta,atlasInterpolationIcon:Ka,isSDF:Ki,hasHalo:jr};if(at&&ai.canOverlap){Mt=!0;const _a=Xt.segments.get();for(const ql of _a)jt.push({segments:new r.SegmentVector([ql]),sortKey:ql.sortKey,state:cr,terrainData:wn})}else jt.push({segments:Xt.segments,sortKey:0,state:cr,terrainData:wn})}Mt&&jt.sort((Ut,zt)=>Ut.sortKey-zt.sortKey);for(const Ut of jt){const zt=Ut.state;if(We.activeTexture.set(it.TEXTURE0),zt.atlasTexture.bind(zt.atlasInterpolation,it.CLAMP_TO_EDGE),zt.atlasTextureIcon&&(We.activeTexture.set(it.TEXTURE1),zt.atlasTextureIcon&&zt.atlasTextureIcon.bind(zt.atlasInterpolationIcon,it.CLAMP_TO_EDGE)),zt.isSDF){const ai=zt.uniformValues;zt.hasHalo&&(ai.u_is_halo=1,$c(zt.buffers,Ut.segments,h,k,zt.program,St,Ne,Ue,ai,Ut.terrainData)),ai.u_is_halo=0}$c(zt.buffers,Ut.segments,h,k,zt.program,St,Ne,Ue,zt.uniformValues,Ut.terrainData)}}function $c(k,o,h,_,P,j,te,ce,me,Se){const Ne=_.context;P.draw(Ne,Ne.gl.TRIANGLES,j,te,ce,ir.disabled,me,Se,h.id,k.layoutVertexBuffer,k.indexBuffer,o,h.paint,_.transform.zoom,k.programConfigurations.get(h.id),k.dynamicLayoutVertexBuffer,k.opacityVertexBuffer)}function id(k,o,h,_,P,j,te){const ce=k.context.gl,me=h.paint.get("fill-pattern"),Se=me&&me.constantOr(1),Ne=h.getCrossfadeParameters();let Ue,We,it,Je,et;te?(We=Se&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ue=ce.LINES):(We=Se?"fillPattern":"fill",Ue=ce.TRIANGLES);for(const pt of _){const yt=o.getTile(pt);if(Se&&!yt.patternsLoaded())continue;const wt=yt.getBucket(h);if(!wt)continue;const at=wt.programConfigurations.get(h.id),Mt=k.useProgram(We,at),St=k.style.terrain&&k.style.terrain.getTerrainData(pt);Se&&(k.context.activeTexture.set(ce.TEXTURE0),yt.imageAtlasTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),at.updatePaintBuffers(Ne));const Ot=me.constantOr(null);if(Ot&&yt.imageAtlas){const zt=yt.imageAtlas,ai=zt.patternPositions[Ot.to.toString()],Xt=zt.patternPositions[Ot.from.toString()];ai&&Xt&&at.setConstantPatternPositions(ai,Xt)}const jt=St?pt:null,Ut=k.translatePosMatrix(jt?jt.posMatrix:pt.posMatrix,yt,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(te){Je=wt.indexBuffer2,et=wt.segments2;const zt=[ce.drawingBufferWidth,ce.drawingBufferHeight];it=We==="fillOutlinePattern"&&Se?lm(Ut,k,Ne,yt,zt):om(Ut,zt)}else Je=wt.indexBuffer,et=wt.segments,it=Se?Eh(Ut,k,Ne,yt):Sh(Ut);Mt.draw(k.context,Ue,P,k.stencilModeForClipping(pt),j,ir.disabled,it,St,h.id,wt.layoutVertexBuffer,Je,et,h.paint,k.transform.zoom,at)}}function Uc(k,o,h,_,P,j,te){const ce=k.context,me=ce.gl,Se=h.paint.get("fill-extrusion-pattern"),Ne=Se.constantOr(1),Ue=h.getCrossfadeParameters(),We=h.paint.get("fill-extrusion-opacity");for(const it of _){const Je=o.getTile(it),et=Je.getBucket(h);if(!et)continue;const pt=k.style.terrain&&k.style.terrain.getTerrainData(it),yt=et.programConfigurations.get(h.id),wt=k.useProgram(Ne?"fillExtrusionPattern":"fillExtrusion",yt);Ne&&(k.context.activeTexture.set(me.TEXTURE0),Je.imageAtlasTexture.bind(me.LINEAR,me.CLAMP_TO_EDGE),yt.updatePaintBuffers(Ue));const at=Se.constantOr(null);if(at&&Je.imageAtlas){const jt=Je.imageAtlas,Ut=jt.patternPositions[at.to.toString()],zt=jt.patternPositions[at.from.toString()];Ut&&zt&&yt.setConstantPatternPositions(Ut,zt)}const Mt=k.translatePosMatrix(it.posMatrix,Je,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),St=h.paint.get("fill-extrusion-vertical-gradient"),Ot=Ne?Ch(Mt,k,St,We,it,Ue,Je):am(Mt,k,St,We);wt.draw(ce,ce.gl.TRIANGLES,P,j,te,ir.backCCW,Ot,pt,h.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,h.paint,k.transform.zoom,yt,k.style.terrain&&et.centroidVertexBuffer)}}function vm(k,o,h,_,P,j,te){const ce=k.context,me=ce.gl,Se=h.fbo;if(!Se)return;const Ne=k.useProgram("hillshade"),Ue=k.style.terrain&&k.style.terrain.getTerrainData(o);ce.activeTexture.set(me.TEXTURE0),me.bindTexture(me.TEXTURE_2D,Se.colorAttachment.get()),Ne.draw(ce,me.TRIANGLES,P,j,te,ir.disabled,((We,it,Je,et)=>{const pt=Je.paint.get("hillshade-shadow-color"),yt=Je.paint.get("hillshade-highlight-color"),wt=Je.paint.get("hillshade-accent-color");let at=Je.paint.get("hillshade-illumination-direction")*(Math.PI/180);Je.paint.get("hillshade-illumination-anchor")==="viewport"&&(at-=We.transform.angle);const Mt=!We.options.moving;return{u_matrix:et?et.posMatrix:We.transform.calculatePosMatrix(it.tileID.toUnwrapped(),Mt),u_image:0,u_latrange:Yu(0,it.tileID),u_light:[Je.paint.get("hillshade-exaggeration"),at],u_shadow:pt,u_highlight:yt,u_accent:wt}})(k,h,_,Ue?o:null),Ue,_.id,k.rasterBoundsBuffer,k.quadTriangleIndexBuffer,k.rasterBoundsSegments)}function nd(k,o,h,_,P,j){const te=k.context,ce=te.gl,me=o.dem;if(me&&me.data){const Se=me.dim,Ne=me.stride,Ue=me.getPixels();if(te.activeTexture.set(ce.TEXTURE1),te.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||k.getTileTexture(Ne),o.demTexture){const it=o.demTexture;it.update(Ue,{premultiply:!1}),it.bind(ce.NEAREST,ce.CLAMP_TO_EDGE)}else o.demTexture=new T(te,Ue,ce.RGBA,{premultiply:!1}),o.demTexture.bind(ce.NEAREST,ce.CLAMP_TO_EDGE);te.activeTexture.set(ce.TEXTURE0);let We=o.fbo;if(!We){const it=new T(te,{width:Se,height:Se,data:null},ce.RGBA);it.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),We=o.fbo=te.createFramebuffer(Se,Se,!0),We.colorAttachment.set(it.texture)}te.bindFramebuffer.set(We.framebuffer),te.viewport.set([0,0,Se,Se]),k.useProgram("hillshadePrepare").draw(te,ce.TRIANGLES,_,P,j,ir.disabled,((it,Je)=>{const et=Je.stride,pt=r.create();return r.ortho(pt,0,r.EXTENT,-r.EXTENT,0,0,1),r.translate(pt,pt,[0,-r.EXTENT,0]),{u_matrix:pt,u_image:1,u_dimension:[et,et],u_zoom:it.overscaledZ,u_unpack:Je.getUnpackVector()}})(o.tileID,me),null,h.id,k.rasterBoundsBuffer,k.quadTriangleIndexBuffer,k.rasterBoundsSegments),o.needsHillshadePrepare=!1}}function rd(k,o,h,_,P,j){const te=_.paint.get("raster-fade-duration");if(!j&&te>0){const ce=r.exported.now(),me=(ce-k.timeAdded)/te,Se=o?(ce-o.timeAdded)/te:-1,Ne=h.getSource(),Ue=P.coveringZoomLevel({tileSize:Ne.tileSize,roundZoom:Ne.roundZoom}),We=!o||Math.abs(o.tileID.overscaledZ-Ue)>Math.abs(k.tileID.overscaledZ-Ue),it=We&&k.refreshedUponExpiration?1:r.clamp(We?me:1-Se,0,1);return k.refreshedUponExpiration&&me>=1&&(k.refreshedUponExpiration=!1),o?{opacity:1,mix:1-it}:{opacity:it,mix:0}}return{opacity:1,mix:0}}const Pa=new r.Color(1,0,0,1),_m=new r.Color(0,1,0,1),Gh=new r.Color(0,0,1,1),wm=new r.Color(1,0,1,1),Ul=new r.Color(0,1,1,1);function Vc(k,o,h,_){ad(k,0,o+h/2,k.transform.width,h,_)}function sd(k,o,h,_){ad(k,o-h/2,0,h,k.transform.height,_)}function ad(k,o,h,_,P,j){const te=k.context,ce=te.gl;ce.enable(ce.SCISSOR_TEST),ce.scissor(o*k.pixelRatio,h*k.pixelRatio,_*k.pixelRatio,P*k.pixelRatio),te.clear({color:j}),ce.disable(ce.SCISSOR_TEST)}function Hh(k,o,h){const _=k.context,P=_.gl,j=h.posMatrix,te=k.useProgram("debug"),ce=Ti.disabled,me=fr.disabled,Se=k.colorModeForRenderPass(),Ne="$debug",Ue=k.style.terrain&&k.style.terrain.getTerrainData(h);_.activeTexture.set(P.TEXTURE0),k.emptyTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE);const We=o.getTileByID(h.key).latestRawTileData,it=Math.floor((We&&We.byteLength||0)/1024),Je=o.getTile(h).tileSize,et=512/Math.min(Je,512)*(h.overscaledZ/k.transform.zoom)*.5;let pt=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(pt+=` => ${h.overscaledZ}`),function(yt,wt){yt.initDebugOverlayCanvas();const at=yt.debugOverlayCanvas,Mt=yt.context.gl,St=yt.debugOverlayCanvas.getContext("2d");St.clearRect(0,0,at.width,at.height),St.shadowColor="white",St.shadowBlur=2,St.lineWidth=1.5,St.strokeStyle="white",St.textBaseline="top",St.font="bold 36px Open Sans, sans-serif",St.fillText(wt,5,5),St.strokeText(wt,5,5),yt.debugOverlayTexture.update(at),yt.debugOverlayTexture.bind(Mt.LINEAR,Mt.CLAMP_TO_EDGE)}(k,`${pt} ${it}kB`),te.draw(_,P.TRIANGLES,ce,me,vr.alphaBlended,ir.disabled,Nl(j,r.Color.transparent,et),null,Ne,k.debugBuffer,k.quadTriangleIndexBuffer,k.debugSegments),te.draw(_,P.LINE_STRIP,ce,me,Se,ir.disabled,Nl(j,r.Color.red),Ue,Ne,k.debugBuffer,k.tileBorderIndexBuffer,k.debugSegments)}function Tm(k,o,h){const _=k.context,P=_.gl,j=k.colorModeForRenderPass(),te=new Ti(P.LEQUAL,Ti.ReadWrite,k.depthRangeFor3D),ce=k.useProgram("terrain"),me=o.getTerrainMesh(),Se=o.getTerrainData(h.tileID);_.bindFramebuffer.set(null),_.viewport.set([0,0,k.width,k.height]),_.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,o.getRTTFramebuffer().colorAttachment.get());const Ne=k.transform.calculatePosMatrix(h.tileID.toUnwrapped());ce.draw(_,P.TRIANGLES,te,fr.disabled,j,ir.backCCW,{u_matrix:Ne,u_texture:0},Se,"terrain",me.vertexBuffer,me.indexBuffer,me.segments)}function qh(k,o,h,_){const P=k.context,j=h.tileSize*o.qualityFactor;h.textures[_]||(h.textures[_]=k.getTileTexture(j)||new T(P,{width:j,height:j,data:null},P.gl.RGBA),h.textures[_].bind(P.gl.LINEAR,P.gl.CLAMP_TO_EDGE),_===0&&o.sourceCache.renderHistory.unshift(h.tileID.key));const te=o.getRTTFramebuffer();te.colorAttachment.set(h.textures[_].texture),P.bindFramebuffer.set(te.framebuffer),P.viewport.set([0,0,j,j])}class od{constructor(o){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=o,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=o.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const o=this.painter.style,h=o.terrain;for(const _ in o.sourceCaches){this._coordsDescendingInv[_]={};const P=o.sourceCaches[_].getVisibleCoordinates();for(const j of P){const te=h.sourceCache.getTerrainCoords(j);for(const ce in te)this._coordsDescendingInv[_][ce]||(this._coordsDescendingInv[_][ce]=[]),this._coordsDescendingInv[_][ce].push(te[ce])}}for(const _ of o._order){const P=o._layers[_],j=P.source;if(this._renderToTexture[P.type]&&!this._coordsDescendingInvStr[j]){this._coordsDescendingInvStr[j]={};for(const te in this._coordsDescendingInv[j])this._coordsDescendingInvStr[j][te]=this._coordsDescendingInv[j][te].map(ce=>ce.key).sort().join()}}return this._renderableTiles.forEach(_=>{for(const P in this._coordsDescendingInvStr){const j=this._coordsDescendingInvStr[P][_.tileID.key];j&&j!==_.textureCoords[P]&&_.clearTextures(this.painter),h.needsRerender(P,_.tileID)&&_.clearTextures(this.painter)}this._rerender[_.tileID.key]=!_.textures.length}),h.clearRerenderCache(),h.sourceCache.removeOutdated(this.painter),this}renderLayer(o){const h=o.type,_=this.painter,P=_.style._order,j=_.currentLayer,te=j+1===P.length;if(this._renderToTexture[h]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=h,this._stacks[this._stacks.length-1].push(P[j]),!te))return!0;if(this._renderToTexture[this._prevType]||h==="hillshade"||this._renderToTexture[h]&&te){this._prevType=h;const ce=this._stacks.length-1,me=this._stacks[ce]||[];for(const Se of this._renderableTiles){if(qh(_,_.style.terrain,Se,ce),this._rerender[Se.tileID.key]){_.context.clear({color:r.Color.transparent});for(let Ne=0;Ne<me.length;Ne++){const Ue=_.style._layers[me[Ne]],We=Ue.source?this._coordsDescendingInv[Ue.source][Se.tileID.key]:[Se.tileID];_._renderTileClippingMasks(Ue,We),_.renderLayer(_,_.style.sourceCaches[Ue.source],Ue,We),Ue.source&&(Se.textureCoords[Ue.source]=this._coordsDescendingInvStr[Ue.source][Se.tileID.key])}}Tm(_,_.style.terrain,Se)}if(h==="hillshade"){this._stacks.push([P[j]]);for(const Se of this._renderableTiles){const Ne=this._coordsDescendingInv[o.source][Se.tileID.key];qh(_,_.style.terrain,Se,this._stacks.length-1),_.context.clear({color:r.Color.transparent}),_._renderTileClippingMasks(o,Ne),_.renderLayer(_,_.style.sourceCaches[o.source],o,Ne),Tm(_,_.style.terrain,Se)}return!0}return this._renderToTexture[h]}return!1}}const ld={symbol:function(k,o,h,_,P){if(k.renderPass!=="translucent")return;const j=fr.disabled,te=k.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(ce,me,Se,Ne,Ue,We,it){const Je=me.transform,et=Ue==="map",pt=We==="map";for(const yt of ce){const wt=Ne.getTile(yt),at=wt.getBucket(Se);if(!at||!at.text||!at.text.segments.get().length)continue;const Mt=r.evaluateSizeForZoom(at.textSizeData,Je.zoom),St=sn(wt,1,me.transform.zoom),Ot=tt(yt.posMatrix,pt,et,me.transform,St),jt=Se.layout.get("icon-text-fit")!=="none"&&at.hasIconData();if(Mt){const Ut=Math.pow(2,Je.zoom-wt.tileID.overscaledZ);Lx(at,et,pt,it,Je,Ot,yt.posMatrix,Ut,Mt,jt,me.style.terrain?(zt,ai)=>me.style.terrain.getElevation(yt,zt,ai):null)}}}(_,k,h,o,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),P),h.paint.get("icon-opacity").constantOr(1)!==0&&Bc(k,o,h,_,!1,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),h.layout.get("icon-rotation-alignment"),h.layout.get("icon-pitch-alignment"),h.layout.get("icon-keep-upright"),j,te),h.paint.get("text-opacity").constantOr(1)!==0&&Bc(k,o,h,_,!0,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),h.layout.get("text-keep-upright"),j,te),o.map.showCollisionBoxes&&(xm(k,o,h,_,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),xm(k,o,h,_,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))},circle:function(k,o,h,_){if(k.renderPass!=="translucent")return;const P=h.paint.get("circle-opacity"),j=h.paint.get("circle-stroke-width"),te=h.paint.get("circle-stroke-opacity"),ce=!h.layout.get("circle-sort-key").isConstant();if(P.constantOr(1)===0&&(j.constantOr(1)===0||te.constantOr(1)===0))return;const me=k.context,Se=me.gl,Ne=k.depthModeForSublayer(0,Ti.ReadOnly),Ue=fr.disabled,We=k.colorModeForRenderPass(),it=[];for(let Je=0;Je<_.length;Je++){const et=_[Je],pt=o.getTile(et),yt=pt.getBucket(h);if(!yt)continue;const wt=yt.programConfigurations.get(h.id),at=k.useProgram("circle",wt),Mt=yt.layoutVertexBuffer,St=yt.indexBuffer,Ot=k.style.terrain&&k.style.terrain.getTerrainData(et),jt={programConfiguration:wt,program:at,layoutVertexBuffer:Mt,indexBuffer:St,uniformValues:nl(k,et,pt,h),terrainData:Ot};if(ce){const Ut=yt.segments.get();for(const zt of Ut)it.push({segments:new r.SegmentVector([zt]),sortKey:zt.sortKey,state:jt})}else it.push({segments:yt.segments,sortKey:0,state:jt})}ce&&it.sort((Je,et)=>Je.sortKey-et.sortKey);for(const Je of it){const{programConfiguration:et,program:pt,layoutVertexBuffer:yt,indexBuffer:wt,uniformValues:at,terrainData:Mt}=Je.state;pt.draw(me,Se.TRIANGLES,Ne,Ue,We,ir.disabled,at,Mt,h.id,yt,wt,Je.segments,h.paint,k.transform.zoom,et)}},heatmap:function(k,o,h,_){if(h.paint.get("heatmap-opacity")!==0)if(k.renderPass==="offscreen"){const P=k.context,j=P.gl,te=fr.disabled,ce=new vr([j.ONE,j.ONE],r.Color.transparent,[!0,!0,!0,!0]);(function(me,Se,Ne){const Ue=me.gl;me.activeTexture.set(Ue.TEXTURE1),me.viewport.set([0,0,Se.width/4,Se.height/4]);let We=Ne.heatmapFbo;if(We)Ue.bindTexture(Ue.TEXTURE_2D,We.colorAttachment.get()),me.bindFramebuffer.set(We.framebuffer);else{const it=Ue.createTexture();Ue.bindTexture(Ue.TEXTURE_2D,it),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_WRAP_S,Ue.CLAMP_TO_EDGE),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_WRAP_T,Ue.CLAMP_TO_EDGE),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_MIN_FILTER,Ue.LINEAR),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_MAG_FILTER,Ue.LINEAR),We=Ne.heatmapFbo=me.createFramebuffer(Se.width/4,Se.height/4,!1),function(Je,et,pt,yt){const wt=Je.gl;wt.texImage2D(wt.TEXTURE_2D,0,wt.RGBA,et.width/4,et.height/4,0,wt.RGBA,Je.extRenderToTextureHalfFloat?Je.extTextureHalfFloat.HALF_FLOAT_OES:wt.UNSIGNED_BYTE,null),yt.colorAttachment.set(pt)}(me,Se,it,We)}})(P,k,h),P.clear({color:r.Color.transparent});for(let me=0;me<_.length;me++){const Se=_[me];if(o.hasRenderableParent(Se))continue;const Ne=o.getTile(Se),Ue=Ne.getBucket(h);if(!Ue)continue;const We=Ue.programConfigurations.get(h.id),it=k.useProgram("heatmap",We),{zoom:Je}=k.transform;it.draw(P,j.TRIANGLES,Ti.disabled,te,ce,ir.disabled,Wu(Se.posMatrix,Ne,Je,h.paint.get("heatmap-intensity")),null,h.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,h.paint,k.transform.zoom,We)}P.viewport.set([0,0,k.width,k.height])}else k.renderPass==="translucent"&&(k.context.setColorMode(k.colorModeForRenderPass()),function(P,j){const te=P.context,ce=te.gl,me=j.heatmapFbo;if(!me)return;te.activeTexture.set(ce.TEXTURE0),ce.bindTexture(ce.TEXTURE_2D,me.colorAttachment.get()),te.activeTexture.set(ce.TEXTURE1);let Se=j.colorRampTexture;Se||(Se=j.colorRampTexture=new T(te,j.colorRamp,ce.RGBA)),Se.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),P.useProgram("heatmapTexture").draw(te,ce.TRIANGLES,Ti.disabled,fr.disabled,P.colorModeForRenderPass(),ir.disabled,((Ne,Ue,We,it)=>{const Je=r.create();r.ortho(Je,0,Ne.width,Ne.height,0,0,1);const et=Ne.context.gl;return{u_matrix:Je,u_world:[et.drawingBufferWidth,et.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ue.paint.get("heatmap-opacity")}})(P,j),null,j.id,P.viewportBuffer,P.quadTriangleIndexBuffer,P.viewportSegments,j.paint,P.transform.zoom)}(k,h))},line:function(k,o,h,_){if(k.renderPass!=="translucent")return;const P=h.paint.get("line-opacity"),j=h.paint.get("line-width");if(P.constantOr(1)===0||j.constantOr(1)===0)return;const te=k.depthModeForSublayer(0,Ti.ReadOnly),ce=k.colorModeForRenderPass(),me=h.paint.get("line-dasharray"),Se=h.paint.get("line-pattern"),Ne=Se.constantOr(1),Ue=h.paint.get("line-gradient"),We=h.getCrossfadeParameters(),it=Ne?"linePattern":me?"lineSDF":Ue?"lineGradient":"line",Je=k.context,et=Je.gl;let pt=!0;for(const yt of _){const wt=o.getTile(yt);if(Ne&&!wt.patternsLoaded())continue;const at=wt.getBucket(h);if(!at)continue;const Mt=at.programConfigurations.get(h.id),St=k.context.program.get(),Ot=k.useProgram(it,Mt),jt=pt||Ot.program!==St,Ut=k.style.terrain&&k.style.terrain.getTerrainData(yt),zt=Se.constantOr(null);if(zt&&wt.imageAtlas){const li=wt.imageAtlas,Ki=li.patternPositions[zt.to.toString()],un=li.patternPositions[zt.from.toString()];Ki&&un&&Mt.setConstantPatternPositions(Ki,un)}const ai=Ut?yt:null,Xt=Ne?Nc(k,wt,h,We,ai):me?pr(k,wt,h,me,We,ai):Ue?Zu(k,wt,h,at.lineClipsArray.length,ai):zc(k,wt,h,ai);if(Ne)Je.activeTexture.set(et.TEXTURE0),wt.imageAtlasTexture.bind(et.LINEAR,et.CLAMP_TO_EDGE),Mt.updatePaintBuffers(We);else if(me&&(jt||k.lineAtlas.dirty))Je.activeTexture.set(et.TEXTURE0),k.lineAtlas.bind(Je);else if(Ue){const li=at.gradients[h.id];let Ki=li.texture;if(h.gradientVersion!==li.version){let un=256;if(h.stepInterpolant){const Ii=o.getSource().maxzoom,$n=yt.canonical.z===Ii?Math.ceil(1<<k.transform.maxZoom-yt.canonical.z):1;un=r.clamp(r.nextPowerOfTwo(at.maxLineLength/r.EXTENT*1024*$n),256,Je.maxTextureSize)}li.gradient=r.renderColorRamp({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:un,image:li.gradient||void 0,clips:at.lineClipsArray}),li.texture?li.texture.update(li.gradient):li.texture=new T(Je,li.gradient,et.RGBA),li.version=h.gradientVersion,Ki=li.texture}Je.activeTexture.set(et.TEXTURE0),Ki.bind(h.stepInterpolant?et.NEAREST:et.LINEAR,et.CLAMP_TO_EDGE)}Ot.draw(Je,et.TRIANGLES,te,k.stencilModeForClipping(yt),ce,ir.disabled,Xt,Ut,h.id,at.layoutVertexBuffer,at.indexBuffer,at.segments,h.paint,k.transform.zoom,Mt,at.layoutVertexBuffer2),pt=!1}},fill:function(k,o,h,_){const P=h.paint.get("fill-color"),j=h.paint.get("fill-opacity");if(j.constantOr(1)===0)return;const te=k.colorModeForRenderPass(),ce=h.paint.get("fill-pattern"),me=k.opaquePassEnabledForLayer()&&!ce.constantOr(1)&&P.constantOr(r.Color.transparent).a===1&&j.constantOr(0)===1?"opaque":"translucent";if(k.renderPass===me){const Se=k.depthModeForSublayer(1,k.renderPass==="opaque"?Ti.ReadWrite:Ti.ReadOnly);id(k,o,h,_,Se,te,!1)}if(k.renderPass==="translucent"&&h.paint.get("fill-antialias")){const Se=k.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,Ti.ReadOnly);id(k,o,h,_,Se,te,!0)}},"fill-extrusion":function(k,o,h,_){const P=h.paint.get("fill-extrusion-opacity");if(P!==0&&k.renderPass==="translucent"){const j=new Ti(k.context.gl.LEQUAL,Ti.ReadWrite,k.depthRangeFor3D);if(P!==1||h.paint.get("fill-extrusion-pattern").constantOr(1))Uc(k,o,h,_,j,fr.disabled,vr.disabled),Uc(k,o,h,_,j,k.stencilModeFor3D(),k.colorModeForRenderPass());else{const te=k.colorModeForRenderPass();Uc(k,o,h,_,j,fr.disabled,te)}}},hillshade:function(k,o,h,_){if(k.renderPass!=="offscreen"&&k.renderPass!=="translucent")return;const P=k.context,j=k.depthModeForSublayer(0,Ti.ReadOnly),te=k.colorModeForRenderPass(),[ce,me]=k.renderPass==="translucent"?k.stencilConfigForOverlap(_):[{},_];for(const Se of me){const Ne=o.getTile(Se);Ne.needsHillshadePrepare!==void 0&&Ne.needsHillshadePrepare&&k.renderPass==="offscreen"?nd(k,Ne,h,j,fr.disabled,te):k.renderPass==="translucent"&&vm(k,Se,Ne,h,j,ce[Se.overscaledZ],te)}P.viewport.set([0,0,k.width,k.height])},raster:function(k,o,h,_){if(k.renderPass!=="translucent"||h.paint.get("raster-opacity")===0||!_.length)return;const P=k.context,j=P.gl,te=o.getSource(),ce=k.useProgram("raster"),me=k.colorModeForRenderPass(),[Se,Ne]=te instanceof H?[{},_]:k.stencilConfigForOverlap(_),Ue=Ne[Ne.length-1].overscaledZ,We=!k.options.moving;for(const it of Ne){const Je=k.depthModeForSublayer(it.overscaledZ-Ue,h.paint.get("raster-opacity")===1?Ti.ReadWrite:Ti.ReadOnly,j.LESS),et=o.getTile(it);et.registerFadeDuration(h.paint.get("raster-fade-duration"));const pt=o.findLoadedParent(it,0),yt=rd(et,pt,o,h,k.transform,k.style.terrain);let wt,at;const Mt=h.paint.get("raster-resampling")==="nearest"?j.NEAREST:j.LINEAR;P.activeTexture.set(j.TEXTURE0),et.texture.bind(Mt,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST),P.activeTexture.set(j.TEXTURE1),pt?(pt.texture.bind(Mt,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST),wt=Math.pow(2,pt.tileID.overscaledZ-et.tileID.overscaledZ),at=[et.tileID.canonical.x*wt%1,et.tileID.canonical.y*wt%1]):et.texture.bind(Mt,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST);const St=k.style.terrain&&k.style.terrain.getTerrainData(it),Ot=St?it:null,jt=Ot?Ot.posMatrix:k.transform.calculatePosMatrix(it.toUnwrapped(),We),Ut=cm(jt,at||[0,0],wt||1,yt,h);te instanceof H?ce.draw(P,j.TRIANGLES,Je,fr.disabled,me,ir.disabled,Ut,St,h.id,te.boundsBuffer,k.quadTriangleIndexBuffer,te.boundsSegments):ce.draw(P,j.TRIANGLES,Je,Se[it.overscaledZ],me,ir.disabled,Ut,St,h.id,k.rasterBoundsBuffer,k.quadTriangleIndexBuffer,k.rasterBoundsSegments)}},background:function(k,o,h,_){const P=h.paint.get("background-color"),j=h.paint.get("background-opacity");if(j===0)return;const te=k.context,ce=te.gl,me=k.transform,Se=me.tileSize,Ne=h.paint.get("background-pattern");if(k.isPatternMissing(Ne))return;const Ue=!Ne&&P.a===1&&j===1&&k.opaquePassEnabledForLayer()?"opaque":"translucent";if(k.renderPass!==Ue)return;const We=fr.disabled,it=k.depthModeForSublayer(0,Ue==="opaque"?Ti.ReadWrite:Ti.ReadOnly),Je=k.colorModeForRenderPass(),et=k.useProgram(Ne?"backgroundPattern":"background"),pt=_||me.coveringTiles({tileSize:Se,terrain:k.style.terrain});Ne&&(te.activeTexture.set(ce.TEXTURE0),k.imageManager.bind(k.context));const yt=h.getCrossfadeParameters();for(const wt of pt){const at=_?wt.posMatrix:k.transform.calculatePosMatrix(wt.toUnwrapped()),Mt=Ne?Mh(at,j,k,Ne,{tileID:wt,tileSize:Se},yt):Sx(at,j,P),St=k.style.terrain&&k.style.terrain.getTerrainData(wt);et.draw(te,ce.TRIANGLES,it,We,Je,ir.disabled,Mt,St,h.id,k.tileExtentBuffer,k.quadTriangleIndexBuffer,k.tileExtentSegments)}},debug:function(k,o,h){for(let _=0;_<h.length;_++)Hh(k,o,h[_])},custom:function(k,o,h){const _=k.context,P=h.implementation;if(k.renderPass==="offscreen"){const j=P.prerender;j&&(k.setCustomLayerDefaults(),_.setColorMode(k.colorModeForRenderPass()),j.call(P,_.gl,k.transform.customLayerMatrix()),_.setDirty(),k.setBaseState())}else if(k.renderPass==="translucent"){k.setCustomLayerDefaults(),_.setColorMode(k.colorModeForRenderPass()),_.setStencilMode(fr.disabled);const j=P.renderingMode==="3d"?new Ti(k.context.gl.LEQUAL,Ti.ReadWrite,k.depthRangeFor3D):k.depthModeForSublayer(0,Ti.ReadOnly);_.setDepthMode(j),P.render(_.gl,k.transform.customLayerMatrix()),_.setDirty(),k.setBaseState(),_.bindFramebuffer.set(null)}}};class Cm{constructor(o,h){this.context=new Uh(o),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:r.create(),renderTime:0},this.setup(),this.numSublayers=J.maxUnderzooming+J.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new $i,this.gpuTimers={}}resize(o,h,_){if(this.width=o*_,this.height=h*_,this.pixelRatio=_,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const P of this.style._order)this.style._layers[P].resize()}setup(){const o=this.context,h=new r.PosArray;h.emplaceBack(0,0),h.emplaceBack(r.EXTENT,0),h.emplaceBack(0,r.EXTENT),h.emplaceBack(r.EXTENT,r.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(h,_i.members),this.tileExtentSegments=r.SegmentVector.simpleSegment(0,0,4,2);const _=new r.PosArray;_.emplaceBack(0,0),_.emplaceBack(r.EXTENT,0),_.emplaceBack(0,r.EXTENT),_.emplaceBack(r.EXTENT,r.EXTENT),this.debugBuffer=o.createVertexBuffer(_,_i.members),this.debugSegments=r.SegmentVector.simpleSegment(0,0,4,5);const P=new r.RasterBoundsArray;P.emplaceBack(0,0,0,0),P.emplaceBack(r.EXTENT,0,r.EXTENT,0),P.emplaceBack(0,r.EXTENT,0,r.EXTENT),P.emplaceBack(r.EXTENT,r.EXTENT,r.EXTENT,r.EXTENT),this.rasterBoundsBuffer=o.createVertexBuffer(P,B.members),this.rasterBoundsSegments=r.SegmentVector.simpleSegment(0,0,4,2);const j=new r.PosArray;j.emplaceBack(0,0),j.emplaceBack(1,0),j.emplaceBack(0,1),j.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(j,_i.members),this.viewportSegments=r.SegmentVector.simpleSegment(0,0,4,2);const te=new r.LineStripIndexArray;te.emplaceBack(0),te.emplaceBack(1),te.emplaceBack(3),te.emplaceBack(2),te.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(te);const ce=new r.TriangleIndexArray;ce.emplaceBack(0,1,2),ce.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(ce),this.emptyTexture=new T(o,{width:1,height:1,data:new Uint8Array([0,0,0,0])},o.gl.RGBA);const me=this.context.gl;this.stencilClearMode=new fr({func:me.ALWAYS,mask:0},0,255,me.ZERO,me.ZERO,me.ZERO)}clearStencil(){const o=this.context,h=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const _=r.create();r.ortho(_,0,this.width,this.height,0,0,1),r.scale(_,_,[h.drawingBufferWidth,h.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,h.TRIANGLES,Ti.disabled,this.stencilClearMode,vr.disabled,ir.disabled,Lc(_),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(o,h){if(this.currentStencilSource===o.source||!o.isTileClipped()||!h||!h.length)return;this.currentStencilSource=o.source;const _=this.context,P=_.gl;this.nextStencilID+h.length>256&&this.clearStencil(),_.setColorMode(vr.disabled),_.setDepthMode(Ti.disabled);const j=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const te of h){const ce=this._tileClippingMaskIDs[te.key]=this.nextStencilID++,me=this.style.terrain&&this.style.terrain.getTerrainData(te);j.draw(_,P.TRIANGLES,Ti.disabled,new fr({func:P.ALWAYS,mask:0},ce,255,P.KEEP,P.KEEP,P.REPLACE),vr.disabled,ir.disabled,Lc(te.posMatrix),me,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,h=this.context.gl;return new fr({func:h.NOTEQUAL,mask:255},o,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(o){const h=this.context.gl;return new fr({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(o){const h=this.context.gl,_=o.sort((te,ce)=>ce.overscaledZ-te.overscaledZ),P=_[_.length-1].overscaledZ,j=_[0].overscaledZ-P+1;if(j>1){this.currentStencilSource=void 0,this.nextStencilID+j>256&&this.clearStencil();const te={};for(let ce=0;ce<j;ce++)te[ce+P]=new fr({func:h.GEQUAL,mask:255},ce+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=j,[te,_]}return[{[P]:fr.disabled},_]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new vr([o.CONSTANT_COLOR,o.ONE],new r.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?vr.unblended:vr.alphaBlended}depthModeForSublayer(o,h,_){if(!this.opaquePassEnabledForLayer())return Ti.disabled;const P=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new Ti(_||this.context.gl.LEQUAL,h,[P,P])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,h){this.style=o,this.options=h,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(r.exported.now()),this.imageManager.beginFrame();const _=this.style._order,P=this.style.sourceCaches,j=this.style.terrain&&new od(this);for(const Se in P){const Ne=P[Se];Ne.used&&Ne.prepare(this.context)}const te={},ce={},me={};for(const Se in P){const Ne=P[Se];te[Se]=Ne.getVisibleCoordinates(),ce[Se]=te[Se].slice().reverse(),me[Se]=Ne.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Se=0;Se<_.length;Se++)if(this.style._layers[_[Se]].is3D()){this.opaquePassCutoff=Se;break}if(j){this.opaquePassCutoff=0;const Se=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!r.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||Se.length)&&(r.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(Ne,Ue){const We=Ne.context,it=We.gl,Je=vr.unblended,et=new Ti(it.LEQUAL,Ti.ReadWrite,[0,1]),pt=Ue.getTerrainMesh(),yt=Ue.sourceCache.getRenderableTiles(),wt=Ne.useProgram("terrainDepth");We.bindFramebuffer.set(Ue.getFramebuffer("depth").framebuffer),We.viewport.set([0,0,Ne.width/devicePixelRatio,Ne.height/devicePixelRatio]),We.clear({color:r.Color.transparent,depth:1});for(const at of yt){const Mt=Ue.getTerrainData(at.tileID),St=Ne.transform.calculatePosMatrix(at.tileID.toUnwrapped());wt.draw(We,it.TRIANGLES,et,fr.disabled,Je,ir.backCCW,{u_matrix:St},Mt,"terrain",pt.vertexBuffer,pt.indexBuffer,pt.segments)}We.bindFramebuffer.set(null),We.viewport.set([0,0,Ne.width,Ne.height])}(this,this.style.terrain),function(Ne,Ue){const We=Ne.context,it=We.gl,Je=vr.unblended,et=new Ti(it.LEQUAL,Ti.ReadWrite,[0,1]),pt=Ue.getTerrainMesh(),yt=Ue.getCoordsTexture(),wt=Ue.sourceCache.getRenderableTiles(),at=Ne.useProgram("terrainCoords");We.bindFramebuffer.set(Ue.getFramebuffer("coords").framebuffer),We.viewport.set([0,0,Ne.width/devicePixelRatio,Ne.height/devicePixelRatio]),We.clear({color:r.Color.transparent,depth:1}),Ue.coordsIndex=[];for(const Mt of wt){const St=Ue.getTerrainData(Mt.tileID);We.activeTexture.set(it.TEXTURE0),it.bindTexture(it.TEXTURE_2D,yt.texture);const Ot=Ne.transform.calculatePosMatrix(Mt.tileID.toUnwrapped());at.draw(We,it.TRIANGLES,et,fr.disabled,Je,ir.backCCW,{u_matrix:Ot,u_terrain_coords_id:(255-Ue.coordsIndex.length)/255,u_texture:0},St,"terrain",pt.vertexBuffer,pt.indexBuffer,pt.segments),Ue.coordsIndex.push(Mt.tileID.key)}We.bindFramebuffer.set(null),We.viewport.set([0,0,Ne.width,Ne.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const Se of _){const Ne=this.style._layers[Se];if(!Ne.hasOffscreenPass()||Ne.isHidden(this.transform.zoom))continue;const Ue=ce[Ne.source];(Ne.type==="custom"||Ue.length)&&this.renderLayer(this,P[Ne.source],Ne,Ue)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?r.Color.black:r.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],!j)for(this.renderPass="opaque",this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const Se=this.style._layers[_[this.currentLayer]],Ne=P[Se.source],Ue=te[Se.source];this._renderTileClippingMasks(Se,Ue),this.renderLayer(this,Ne,Se,Ue)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const Se=this.style._layers[_[this.currentLayer]],Ne=P[Se.source];if(j&&j.renderLayer(Se))continue;const Ue=(Se.type==="symbol"?me:ce)[Se.source];this._renderTileClippingMasks(Se,te[Se.source]),this.renderLayer(this,Ne,Se,Ue)}if(this.options.showTileBoundaries){let Se,Ne;Object.values(this.style._layers).forEach(Ue=>{Ue.source&&!Ue.isHidden(this.transform.zoom)&&(Ue.source!==(Ne&&Ne.id)&&(Ne=this.style.sourceCaches[Ue.source]),(!Se||Se.getSource().maxzoom<Ne.getSource().maxzoom)&&(Se=Ne))}),Se&&ld.debug(this,Se,Se.getVisibleCoordinates())}this.options.showPadding&&function(Se){const Ne=Se.transform.padding;Vc(Se,Se.transform.height-(Ne.top||0),3,Pa),Vc(Se,Ne.bottom||0,3,_m),sd(Se,Ne.left||0,3,Gh),sd(Se,Se.transform.width-(Ne.right||0),3,wm);const Ue=Se.transform.centerPoint;(function(We,it,Je,et){ad(We,it-1,Je-10,2,20,et),ad(We,it-10,Je-1,20,2,et)})(Se,Ue.x,Se.transform.height-Ue.y,Ul)}(this),this.context.setDefault()}renderLayer(o,h,_,P){_.isHidden(this.transform.zoom)||(_.type==="background"||_.type==="custom"||(P||[]).length)&&(this.id=_.id,this.gpuTimingStart(_),ld[_.type](o,h,_,P,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(o){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery;let _=this.gpuTimers[o.id];_||(_=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:h.createQueryEXT()}),_.calls++,h.beginQueryEXT(h.TIME_ELAPSED_EXT,_.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}collectGpuTimers(){const o=this.gpuTimers;return this.gpuTimers={},o}queryGpuTimers(o){const h={};for(const _ in o){const P=o[_],j=this.context.extTimerQuery,te=j.getQueryObjectEXT(P.query,j.QUERY_RESULT_EXT)/1e6;j.deleteQueryEXT(P.query),h[_]=te}return h}translatePosMatrix(o,h,_,P,j){if(!_[0]&&!_[1])return o;const te=j?P==="map"?this.transform.angle:0:P==="viewport"?-this.transform.angle:0;if(te){const Se=Math.sin(te),Ne=Math.cos(te);_=[_[0]*Ne-_[1]*Se,_[0]*Se+_[1]*Ne]}const ce=[j?_[0]:sn(h,_[0],this.transform.zoom),j?_[1]:sn(h,_[1],this.transform.zoom),0],me=new Float32Array(16);return r.translate(me,o,ce),me}saveTileTexture(o){const h=this._tileTextures[o.size[0]];h?h.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const h=this._tileTextures[o];return h&&h.length>0?h.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;const h=this.imageManager.getPattern(o.from.toString()),_=this.imageManager.getPattern(o.to.toString());return!h||!_}useProgram(o,h){this.cache=this.cache||{};const _=o+(h?h.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[_]||(this.cache[_]=new Tx(this.context,o,Rc[o],h,Ph[o],this._showOverdrawInspector,this.style.terrain)),this.cache[_]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class cd{constructor(o,h){this.points=o,this.planes=h}static fromInvProjectionMatrix(o,h,_){const P=Math.pow(2,_),j=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(ce=>{const me=1/(ce=r.transformMat4([],ce,o))[3]/h*P;return r.mul$1(ce,ce,[me,me,1/ce[3],me])}),te=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(ce=>{const me=r.sub([],j[ce[0]],j[ce[1]]),Se=r.sub([],j[ce[2]],j[ce[1]]),Ne=r.normalize([],r.cross([],me,Se)),Ue=-r.dot(Ne,j[ce[1]]);return Ne.concat(Ue)});return new cd(j,te)}}class rl{constructor(o,h){this.min=o,this.max=h,this.center=r.scale$1([],r.add([],this.min,this.max),.5)}quadrant(o){const h=[o%2==0,o<2],_=r.clone$2(this.min),P=r.clone$2(this.max);for(let j=0;j<h.length;j++)_[j]=h[j]?this.min[j]:this.center[j],P[j]=h[j]?this.center[j]:this.max[j];return P[2]=this.max[2],new rl(_,P)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}intersects(o){const h=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let _=!0;for(let P=0;P<o.planes.length;P++){const j=o.planes[P];let te=0;for(let ce=0;ce<h.length;ce++)r.dot$1(j,h[ce])>=0&&te++;if(te===0)return 0;te!==h.length&&(_=!1)}if(_)return 2;for(let P=0;P<3;P++){let j=Number.MAX_VALUE,te=-Number.MAX_VALUE;for(let ce=0;ce<o.points.length;ce++){const me=o.points[ce][P]-this.min[P];j=Math.min(j,me),te=Math.max(te,me)}if(te<0||j>this.max[P]-this.min[P])return 0}return 1}}class Gc{constructor(o=0,h=0,_=0,P=0){if(isNaN(o)||o<0||isNaN(h)||h<0||isNaN(_)||_<0||isNaN(P)||P<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=h,this.left=_,this.right=P}interpolate(o,h,_){return h.top!=null&&o.top!=null&&(this.top=r.number(o.top,h.top,_)),h.bottom!=null&&o.bottom!=null&&(this.bottom=r.number(o.bottom,h.bottom,_)),h.left!=null&&o.left!=null&&(this.left=r.number(o.left,h.left,_)),h.right!=null&&o.right!=null&&(this.right=r.number(o.right,h.right,_)),this}getCenter(o,h){const _=r.clamp((this.left+o-this.right)/2,0,o),P=r.clamp((this.top+h-this.bottom)/2,0,h);return new r.pointGeometry(_,P)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new Gc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class ud{constructor(o,h,_,P,j){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=j===void 0||!!j,this._minZoom=o||0,this._maxZoom=h||22,this._minPitch=_??0,this._maxPitch=P??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new r.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Gc,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const o=new ud(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.tileSize=this.tileSize,o.latRange=this.latRange,o.width=this.width,o.height=this.height,o._center=this._center,o._elevation=this._elevation,o.zoom=this.zoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._calcMatrices(),o}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new r.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(o){const h=-r.wrap(o,-180,180)*Math.PI/180;var _;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=(_=new r.ARRAY_TYPE(4),r.ARRAY_TYPE!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_),function(P,j,te){var ce=j[0],me=j[1],Se=j[2],Ne=j[3],Ue=Math.sin(te),We=Math.cos(te);P[0]=ce*We+Se*Ue,P[1]=me*We+Ne*Ue,P[2]=ce*-Ue+Se*We,P[3]=me*-Ue+Ne*We}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const h=r.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(o){const h=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this.scale=this.zoomScale(h),this.tileZoom=Math.floor(h),this.zoomFraction=h-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(o){o!==this._elevation&&(this._elevation=o,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,h,_){this._unmodified=!1,this._edgeInsets.interpolate(o,h,_),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const h=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(o){const h=[new r.UnwrappedTileID(0,o)];if(this._renderWorldCopies){const _=this.pointCoordinate(new r.pointGeometry(0,0)),P=this.pointCoordinate(new r.pointGeometry(this.width,0)),j=this.pointCoordinate(new r.pointGeometry(this.width,this.height)),te=this.pointCoordinate(new r.pointGeometry(0,this.height)),ce=Math.floor(Math.min(_.x,P.x,j.x,te.x)),me=Math.floor(Math.max(_.x,P.x,j.x,te.x)),Se=1;for(let Ne=ce-Se;Ne<=me+Se;Ne++)Ne!==0&&h.push(new r.UnwrappedTileID(Ne,o))}return h}coveringTiles(o){var h,_;let P=this.coveringZoomLevel(o);const j=P;if(o.minzoom!==void 0&&P<o.minzoom)return[];o.maxzoom!==void 0&&P>o.maxzoom&&(P=o.maxzoom);const te=this.pointCoordinate(this.getCameraPoint()),ce=r.MercatorCoordinate.fromLngLat(this.center),me=Math.pow(2,P),Se=[me*te.x,me*te.y,0],Ne=[me*ce.x,me*ce.y,0],Ue=cd.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,P);let We=o.minzoom||0;!o.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(We=P);const it=o.terrain?2/Math.min(this.tileSize,o.tileSize)*this.tileSize:3,Je=at=>({aabb:new rl([at*me,0,0],[(at+1)*me,me,0]),zoom:0,x:0,y:0,wrap:at,fullyVisible:!1}),et=[],pt=[],yt=P,wt=o.reparseOverscaled?j:P;if(this._renderWorldCopies)for(let at=1;at<=3;at++)et.push(Je(-at)),et.push(Je(at));for(et.push(Je(0));et.length>0;){const at=et.pop(),Mt=at.x,St=at.y;let Ot=at.fullyVisible;if(!Ot){const li=at.aabb.intersects(Ue);if(li===0)continue;Ot=li===2}const jt=o.terrain?Se:Ne,Ut=at.aabb.distanceX(jt),zt=at.aabb.distanceY(jt),ai=Math.max(Math.abs(Ut),Math.abs(zt)),Xt=it+(1<<yt-at.zoom)-2;if(at.zoom===yt||ai>Xt&&at.zoom>=We){const li=yt-at.zoom,Ki=Se[0]-.5-(Mt<<li),un=Se[1]-.5-(St<<li);pt.push({tileID:new r.OverscaledTileID(at.zoom===yt?wt:at.zoom,at.wrap,at.zoom,Mt,St),distanceSq:r.sqrLen([Ne[0]-.5-Mt,Ne[1]-.5-St]),tileDistanceToCamera:Math.sqrt(Ki*Ki+un*un)})}else for(let li=0;li<4;li++){const Ki=(Mt<<1)+li%2,un=(St<<1)+(li>>1),Ii=at.zoom+1;let $n=at.aabb.quadrant(li);if(o.terrain){const Un=new r.OverscaledTileID(Ii,at.wrap,Ii,Ki,un),wn=o.terrain.getMinMaxElevation(Un),Cn=(h=wn.minElevation)!==null&&h!==void 0?h:this.elevation,kn=(_=wn.maxElevation)!==null&&_!==void 0?_:this.elevation;$n=new rl([$n.min[0],$n.min[1],Cn],[$n.max[0],$n.max[1],kn])}et.push({aabb:$n,zoom:Ii,x:Ki,y:un,wrap:at.wrap,fullyVisible:Ot})}}return pt.sort((at,Mt)=>at.distanceSq-Mt.distanceSq).map(at=>at.tileID)}resize(o,h){this.width=o,this.height=h,this.pixelsToGLUnits=[2/o,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const h=r.clamp(o.lat,-this.maxValidLatitude,this.maxValidLatitude);return new r.pointGeometry(r.mercatorXfromLng(o.lng)*this.worldSize,r.mercatorYfromLat(h)*this.worldSize)}unproject(o){return new r.MercatorCoordinate(o.x/this.worldSize,o.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(o){this.freezeElevation||(this.elevation=o?this.getElevation(this._center,o):0)}getElevation(o,h){const _=r.MercatorCoordinate.fromLngLat(o),P=(1<<this.tileZoom)*r.EXTENT,j=_.x*P,te=_.y*P,ce=Math.floor(j/r.EXTENT),me=Math.floor(te/r.EXTENT),Se=new r.OverscaledTileID(this.tileZoom,0,this.tileZoom,ce,me);return h.getElevation(Se,j%r.EXTENT,te%r.EXTENT,r.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(o){const h=this.pointLocation(this.centerPoint,o),_=this.getElevation(h,o);if(!(this.elevation-_))return;const P=this.getCameraPosition(),j=r.MercatorCoordinate.fromLngLat(P.lngLat,P.altitude),te=r.MercatorCoordinate.fromLngLat(h,_),ce=j.x-te.x,me=j.y-te.y,Se=j.z-te.z,Ne=Math.sqrt(ce*ce+me*me+Se*Se),Ue=this.scaleZoom(this.cameraToCenterDistance/Ne/this.tileSize);this._elevation=_,this._center=h,this.zoom=Ue}setLocationAtPoint(o,h){const _=this.pointCoordinate(h),P=this.pointCoordinate(this.centerPoint),j=this.locationCoordinate(o),te=new r.MercatorCoordinate(j.x-(_.x-P.x),j.y-(_.y-P.y));this.center=this.coordinateLocation(te),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(o,h){return h?this.coordinatePoint(this.locationCoordinate(o),this.getElevation(o,h),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(o))}pointLocation(o,h){return this.coordinateLocation(this.pointCoordinate(o,h))}locationCoordinate(o){return r.MercatorCoordinate.fromLngLat(o)}coordinateLocation(o){return o&&o.toLngLat()}pointCoordinate(o,h){if(h){const We=h.pointCoordinate(o);if(We!=null)return We}const _=[o.x,o.y,0,1],P=[o.x,o.y,1,1];r.transformMat4(_,_,this.pixelMatrixInverse),r.transformMat4(P,P,this.pixelMatrixInverse);const j=_[3],te=P[3],ce=_[1]/j,me=P[1]/te,Se=_[2]/j,Ne=P[2]/te,Ue=Se===Ne?0:(0-Se)/(Ne-Se);return new r.MercatorCoordinate(r.number(_[0]/j,P[0]/te,Ue)/this.worldSize,r.number(ce,me,Ue)/this.worldSize)}coordinatePoint(o,h=0,_=this.pixelMatrix){const P=[o.x*this.worldSize,o.y*this.worldSize,h,1];return r.transformMat4(P,P,_),new r.pointGeometry(P[0]/P[3],P[1]/P[3])}getBounds(){const o=Math.max(0,this.height/2-this.getHorizon());return new r.LngLatBounds().extend(this.pointLocation(new r.pointGeometry(0,o))).extend(this.pointLocation(new r.pointGeometry(this.width,o))).extend(this.pointLocation(new r.pointGeometry(this.width,this.height))).extend(this.pointLocation(new r.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new r.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(o,h=!1){const _=o.key,P=h?this._alignedPosMatrixCache:this._posMatrixCache;if(P[_])return P[_];const j=o.canonical,te=this.worldSize/this.zoomScale(j.z),ce=j.x+Math.pow(2,j.z)*o.wrap,me=r.identity(new Float64Array(16));return r.translate(me,me,[ce*te,j.y*te,0]),r.scale(me,me,[te/r.EXTENT,te/r.EXTENT,1]),r.multiply(me,h?this.alignedProjMatrix:this.projMatrix,me),P[_]=new Float32Array(me),P[_]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let o,h,_,P,j=-90,te=90,ce=-180,me=180;const Se=this.size,Ne=this._unmodified;if(this.latRange){const it=this.latRange;j=r.mercatorYfromLat(it[1])*this.worldSize,te=r.mercatorYfromLat(it[0])*this.worldSize,o=te-j<Se.y?Se.y/(te-j):0}if(this.lngRange){const it=this.lngRange;ce=r.wrap(r.mercatorXfromLng(it[0])*this.worldSize,0,this.worldSize),me=r.wrap(r.mercatorXfromLng(it[1])*this.worldSize,0,this.worldSize),me<ce&&(me+=this.worldSize),h=me-ce<Se.x?Se.x/(me-ce):0}const Ue=this.point,We=Math.max(h||0,o||0);if(We)return this.center=this.unproject(new r.pointGeometry(h?(me+ce)/2:Ue.x,o?(te+j)/2:Ue.y)),this.zoom+=this.scaleZoom(We),this._unmodified=Ne,void(this._constraining=!1);if(this.latRange){const it=Ue.y,Je=Se.y/2;it-Je<j&&(P=j+Je),it+Je>te&&(P=te-Je)}if(this.lngRange){const it=(ce+me)/2,Je=r.wrap(Ue.x,it-this.worldSize/2,it+this.worldSize/2),et=Se.x/2;Je-et<ce&&(_=ce+et),Je+et>me&&(_=me-et)}_===void 0&&P===void 0||(this.center=this.unproject(new r.pointGeometry(_!==void 0?_:Ue.x,P!==void 0?P:Ue.y)).wrap()),this._unmodified=Ne,this._constraining=!1}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,h=this.point.x,_=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=r.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let P=r.identity(new Float64Array(16));r.scale(P,P,[this.width/2,-this.height/2,1]),r.translate(P,P,[1,-1,0]),this.labelPlaneMatrix=P,P=r.identity(new Float64Array(16)),r.scale(P,P,[1,-1,1]),r.translate(P,P,[-1,-1,0]),r.scale(P,P,[2/this.width,2/this.height,1]),this.glCoordMatrix=P,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const j=Math.PI/2+this._pitch,te=this._fov*(.5+o.y/this.height),ce=Math.sin(te)*this.cameraToSeaLevelDistance/Math.sin(r.clamp(Math.PI-j-te,.01,Math.PI-.01)),me=this.getHorizon(),Se=2*Math.atan(me/this.cameraToCenterDistance)*(.5+o.y/(2*me)),Ne=Math.sin(Se)*this.cameraToSeaLevelDistance/Math.sin(r.clamp(Math.PI-j-Se,.01,Math.PI-.01)),Ue=Math.cos(Math.PI/2-this._pitch)*ce+this.cameraToSeaLevelDistance,We=Math.cos(Math.PI/2-this._pitch)*Ne+this.cameraToSeaLevelDistance,it=1.01*Math.min(Ue,We),Je=this.height/50;P=new Float64Array(16),r.perspective(P,this._fov,this.width/this.height,Je,it),P[8]=2*-o.x/this.width,P[9]=2*o.y/this.height,r.scale(P,P,[1,-1,1]),r.translate(P,P,[0,0,-this.cameraToCenterDistance]),r.rotateX(P,P,this._pitch),r.rotateZ(P,P,this.angle),r.translate(P,P,[-h,-_,0]),this.mercatorMatrix=r.scale([],P,[this.worldSize,this.worldSize,this.worldSize]),r.scale(P,P,[1,1,this._pixelPerMeter]),this.pixelMatrix=r.multiply(new Float64Array(16),this.labelPlaneMatrix,P),r.translate(P,P,[0,0,-this.elevation]),this.projMatrix=P,this.invProjMatrix=r.invert([],P),this.pixelMatrix3D=r.multiply(new Float64Array(16),this.labelPlaneMatrix,P);const et=this.width%2/2,pt=this.height%2/2,yt=Math.cos(this.angle),wt=Math.sin(this.angle),at=h-Math.round(h)+yt*et+wt*pt,Mt=_-Math.round(_)+yt*pt+wt*et,St=new Float64Array(P);if(r.translate(St,St,[at>.5?at-1:at,Mt>.5?Mt-1:Mt,0]),this.alignedProjMatrix=St,P=r.invert(new Float64Array(16),this.pixelMatrix),!P)throw new Error("failed to invert matrix");this.pixelMatrixInverse=P,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const o=this.pointCoordinate(new r.pointGeometry(0,0)),h=[o.x*this.worldSize,o.y*this.worldSize,0,1];return r.transformMat4(h,h,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.pointGeometry(0,o))}getCameraQueryGeometry(o){const h=this.getCameraPoint();if(o.length===1)return[o[0],h];{let _=h.x,P=h.y,j=h.x,te=h.y;for(const ce of o)_=Math.min(_,ce.x),P=Math.min(P,ce.y),j=Math.max(j,ce.x),te=Math.max(te,ce.y);return[new r.pointGeometry(_,P),new r.pointGeometry(j,P),new r.pointGeometry(j,te),new r.pointGeometry(_,te),new r.pointGeometry(_,P)]}}}class Sm{constructor(o){this._hashName=o&&encodeURIComponent(o),r.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(h,_){let P=!1,j=null;const te=()=>{j=null,P&&(h(),j=setTimeout(te,300),P=!1)};return()=>(P=!0,j||te(),j)}(this._updateHashUnthrottled.bind(this))}addTo(o){return this._map=o,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(o){const h=this._map.getCenter(),_=Math.round(100*this._map.getZoom())/100,P=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),j=Math.pow(10,P),te=Math.round(h.lng*j)/j,ce=Math.round(h.lat*j)/j,me=this._map.getBearing(),Se=this._map.getPitch();let Ne="";if(Ne+=o?`/${te}/${ce}/${_}`:`${_}/${ce}/${te}`,(me||Se)&&(Ne+="/"+Math.round(10*me)/10),Se&&(Ne+=`/${Math.round(Se)}`),this._hashName){const Ue=this._hashName;let We=!1;const it=window.location.hash.slice(1).split("&").map(Je=>{const et=Je.split("=")[0];return et===Ue?(We=!0,`${et}=${Ne}`):Je}).filter(Je=>Je);return We||it.push(`${Ue}=${Ne}`),`#${it.join("&")}`}return`#${Ne}`}_getCurrentHash(){const o=window.location.hash.replace("#","");if(this._hashName){let h;return o.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(h=_)}),(h&&h[1]||"").split("/")}return o.split("/")}_onHashChange(){const o=this._getCurrentHash();if(o.length>=3&&!o.some(h=>isNaN(h))){const h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:h,pitch:+(o[4]||0)}),!0}return!1}_updateHashUnthrottled(){const o=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,o)}catch{}}}const Hc={linearity:.3,easing:r.bezier(0,0,.3,1)},Em=r.extend({deceleration:2500,maxSpeed:1400},Hc),km=r.extend({deceleration:20,maxSpeed:1400},Hc),Vl=r.extend({deceleration:1e3,maxSpeed:360},Hc),Am=r.extend({deceleration:1e3,maxSpeed:90},Hc);class Mm{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.exported.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,h=r.exported.now();for(;o.length>0&&h-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const h={zoom:0,bearing:0,pitch:0,pan:new r.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:j}of this._inertiaBuffer)h.zoom+=j.zoomDelta||0,h.bearing+=j.bearingDelta||0,h.pitch+=j.pitchDelta||0,j.panDelta&&h.pan._add(j.panDelta),j.around&&(h.around=j.around),j.pinchAround&&(h.pinchAround=j.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,P={};if(h.pan.mag()){const j=Wc(h.pan.mag(),_,r.extend({},Em,o||{}));P.offset=h.pan.mult(j.amount/h.pan.mag()),P.center=this._map.transform.center,qc(P,j)}if(h.zoom){const j=Wc(h.zoom,_,km);P.zoom=this._map.transform.zoom+j.amount,qc(P,j)}if(h.bearing){const j=Wc(h.bearing,_,Vl);P.bearing=this._map.transform.bearing+r.clamp(j.amount,-179,179),qc(P,j)}if(h.pitch){const j=Wc(h.pitch,_,Am);P.pitch=this._map.transform.pitch+j.amount,qc(P,j)}if(P.zoom||P.bearing){const j=h.pinchAround===void 0?h.around:h.pinchAround;P.around=j?this._map.unproject(j):this._map.getCenter()}return this.clear(),r.extend(P,{noMoveStart:!0})}}function qc(k,o){(!k.duration||k.duration<o.duration)&&(k.duration=o.duration,k.easing=o.easing)}function Wc(k,o,h){const{maxSpeed:_,linearity:P,deceleration:j}=h,te=r.clamp(k*P/(o/1e3),-_,_),ce=Math.abs(te)/(j*P);return{easing:h.easing,duration:1e3*ce,amount:te*(ce/2)}}class ea extends r.Event{constructor(o,h,_,P={}){const j=y.mousePos(h.getCanvasContainer(),_),te=h.unproject(j);super(o,r.extend({point:j,lngLat:te,originalEvent:_},P)),this._defaultPrevented=!1,this.target=h}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ys extends r.Event{constructor(o,h,_){const P=o==="touchend"?_.changedTouches:_.touches,j=y.touchPos(h.getCanvasContainer(),P),te=j.map(me=>h.unproject(me)),ce=j.reduce((me,Se,Ne,Ue)=>me.add(Se.div(Ue.length)),new r.pointGeometry(0,0));super(o,{points:j,point:ce,lngLats:te,lngLat:h.unproject(ce),originalEvent:_}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class zx extends r.Event{constructor(o,h,_){super(o,{originalEvent:_}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Po{constructor(o,h){this._map=o,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(o){return this._firePreventable(new zx(o.type,this._map,o))}mousedown(o,h){return this._mousedownPos=h,this._firePreventable(new ea(o.type,this._map,o))}mouseup(o){this._map.fire(new ea(o.type,this._map,o))}click(o,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new ea(o.type,this._map,o))}dblclick(o){return this._firePreventable(new ea(o.type,this._map,o))}mouseover(o){this._map.fire(new ea(o.type,this._map,o))}mouseout(o){this._map.fire(new ea(o.type,this._map,o))}touchstart(o){return this._firePreventable(new ys(o.type,this._map,o))}touchmove(o){this._map.fire(new ys(o.type,this._map,o))}touchend(o){this._map.fire(new ys(o.type,this._map,o))}touchcancel(o){this._map.fire(new ys(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Pm{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(o){this._map.fire(new ea(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ea("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._ignoreContextMenu||this._map.fire(new ea(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class sl{constructor(o,h){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,h){this.isEnabled()&&o.shiftKey&&o.button===0&&(y.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(o,h){if(!this._active)return;const _=h;if(this._lastPos.equals(_)||!this._box&&_.dist(this._startPos)<this._clickTolerance)return;const P=this._startPos;this._lastPos=_,this._box||(this._box=y.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));const j=Math.min(P.x,_.x),te=Math.max(P.x,_.x),ce=Math.min(P.y,_.y),me=Math.max(P.y,_.y);y.setTransform(this._box,`translate(${j}px,${ce}px)`),this._box.style.width=te-j+"px",this._box.style.height=me-ce+"px"}mouseupWindow(o,h){if(!this._active||o.button!==0)return;const _=this._startPos,P=h;if(this.reset(),y.suppressClick(),_.x!==P.x||_.y!==P.y)return this._map.fire(new r.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:j=>j.fitScreenCoordinates(_,P,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(y.remove(this._box),this._box=null),y.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(o,h){return this._map.fire(new r.Event(o,{originalEvent:h}))}}function al(k,o){if(k.length!==o.length)throw new Error(`The number of touches and points are not equal - touches ${k.length}, points ${o.length}`);const h={};for(let _=0;_<k.length;_++)h[k[_].identifier]=o[_];return h}class Nx{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(o,h,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),_.length===this.numTouches&&(this.centroid=function(P){const j=new r.pointGeometry(0,0);for(const te of P)j._add(te);return j.div(P.length)}(h),this.touches=al(_,h)))}touchmove(o,h,_){if(this.aborted||!this.centroid)return;const P=al(_,h);for(const j in this.touches){const te=this.touches[j],ce=P[j];(!ce||ce.dist(te)>30)&&(this.aborted=!0)}}touchend(o,h,_){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const P=!this.aborted&&this.centroid;if(this.reset(),P)return P}}}class Wh{constructor(o){this.singleTap=new Nx(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(o,h,_){this.singleTap.touchstart(o,h,_)}touchmove(o,h,_){this.singleTap.touchmove(o,h,_)}touchend(o,h,_){const P=this.singleTap.touchend(o,h,_);if(P){const j=o.timeStamp-this.lastTime<500,te=!this.lastTap||this.lastTap.dist(P)<30;if(j&&te||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=P,this.count===this.numTaps)return this.reset(),P}}}class Ox{constructor(){this._zoomIn=new Wh({numTouches:1,numTaps:2}),this._zoomOut=new Wh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,h,_){this._zoomIn.touchstart(o,h,_),this._zoomOut.touchstart(o,h,_)}touchmove(o,h,_){this._zoomIn.touchmove(o,h,_),this._zoomOut.touchmove(o,h,_)}touchend(o,h,_){const P=this._zoomIn.touchend(o,h,_),j=this._zoomOut.touchend(o,h,_);return P?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:te=>te.easeTo({duration:300,zoom:te.getZoom()+1,around:te.unproject(P)},{originalEvent:o})}):j?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:te=>te.easeTo({duration:300,zoom:te.getZoom()-1,around:te.unproject(j)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Im={0:1,2:2};class ol{constructor(o){this.reset(),this._clickTolerance=o.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(o,h){return!1}_move(o,h){return{}}mousedown(o,h){if(this._lastPoint)return;const _=y.mouseButton(o);this._correctButton(o,_)&&(this._lastPoint=h,this._eventButton=_)}mousemoveWindow(o,h){const _=this._lastPoint;if(_){if(o.preventDefault(),function(P,j){const te=Im[j];return P.buttons===void 0||(P.buttons&te)!==te}(o,this._eventButton))this.reset();else if(this._moved||!(h.dist(_)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(_,h)}}mouseupWindow(o){this._lastPoint&&y.mouseButton(o)===this._eventButton&&(this._moved&&y.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Io extends ol{mousedown(o,h){super.mousedown(o,h),this._lastPoint&&(this._active=!0)}_correctButton(o,h){return h===0&&!o.ctrlKey}_move(o,h){return{around:h,panDelta:h.sub(o)}}}class fi extends ol{_correctButton(o,h){return h===0&&o.ctrlKey||h===2}_move(o,h){const _=.8*(h.x-o.x);if(_)return this._active=!0,{bearingDelta:_}}contextmenu(o){o.preventDefault()}}class Yh extends ol{_correctButton(o,h){return h===0&&o.ctrlKey||h===2}_move(o,h){const _=-.5*(h.y-o.y);if(_)return this._active=!0,{pitchDelta:_}}contextmenu(o){o.preventDefault()}}class Yc{constructor(o,h){this._minTouches=o.cooperativeGestures?2:1,this._clickTolerance=o.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new r.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(o,h,_){return this._calculateTransform(o,h,_)}touchmove(o,h,_){if(this._map._cooperativeGestures&&(this._minTouches===2&&_.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(o,!1,_.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(_.length<this._minTouches))return o.preventDefault(),this._calculateTransform(o,h,_)}touchend(o,h,_){this._calculateTransform(o,h,_),this._active&&_.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,h,_){_.length>0&&(this._active=!0);const P=al(_,h),j=new r.pointGeometry(0,0),te=new r.pointGeometry(0,0);let ce=0;for(const Se in P){const Ne=P[Se],Ue=this._touches[Se];Ue&&(j._add(Ne),te._add(Ne.sub(Ue)),ce++,P[Se]=Ne)}if(this._touches=P,ce<this._minTouches||!te.mag())return;const me=te.div(ce);return this._sum._add(me),this._sum.mag()<this._clickTolerance?void 0:{around:j.div(ce),panDelta:me}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ll{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(o){}_move(o,h,_){return{}}touchstart(o,h,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([h[0],h[1]]))}touchmove(o,h,_){if(!this._firstTwoTouches)return;o.preventDefault();const[P,j]=this._firstTwoTouches,te=Zc(_,h,P),ce=Zc(_,h,j);if(!te||!ce)return;const me=this._aroundCenter?null:te.add(ce).div(2);return this._move([te,ce],me,o)}touchend(o,h,_){if(!this._firstTwoTouches)return;const[P,j]=this._firstTwoTouches,te=Zc(_,h,P),ce=Zc(_,h,j);te&&ce||(this._active&&y.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Zc(k,o,h){for(let _=0;_<k.length;_++)if(k[_].identifier===h)return o[_]}function ti(k,o){return Math.log(k/o)/Math.LN2}class Zh extends ll{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,h){const _=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(ti(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ti(this._distance,_),pinchAround:h}}}function Dm(k,o){return 180*k.angleWith(o)/Math.PI}class jx extends ll{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,h){const _=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Dm(this._vector,_),pinchAround:h}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const h=25/(Math.PI*this._minDiameter)*360,_=Dm(o,this._startVector);return Math.abs(_)<h}}function Xc(k){return Math.abs(k.y)>Math.abs(k.x)}class Rm extends ll{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(o,h,_){super.touchstart(o,h,_),this._currentTouchCount=_.length}_start(o){this._lastPoints=o,Xc(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,h,_){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const P=o[0].sub(this._lastPoints[0]),j=o[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(P,j,_.timeStamp),this._valid?(this._lastPoints=o,this._active=!0,{pitchDelta:(P.y+j.y)/2*-.5}):void 0}gestureBeginsVertically(o,h,_){if(this._valid!==void 0)return this._valid;const P=o.mag()>=2,j=h.mag()>=2;if(!P&&!j)return;if(!P||!j)return this._firstMove===void 0&&(this._firstMove=_),_-this._firstMove<100&&void 0;const te=o.y>0==h.y>0;return Xc(o)&&Xc(h)&&te}}const Lm={panStep:100,bearingStep:15,pitchStep:10};class Fx{constructor(){const o=Lm;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let h=0,_=0,P=0,j=0,te=0;switch(o.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:o.shiftKey?_=-1:(o.preventDefault(),j=-1);break;case 39:o.shiftKey?_=1:(o.preventDefault(),j=1);break;case 38:o.shiftKey?P=1:(o.preventDefault(),te=-1);break;case 40:o.shiftKey?P=-1:(o.preventDefault(),te=1);break;default:return}return this._rotationDisabled&&(_=0,P=0),{cameraAnimation:ce=>{const me=ce.getZoom();ce.easeTo({duration:300,easeId:"keyboardHandler",easing:Bx,zoom:h?Math.round(me)+h*(o.shiftKey?2:1):me,bearing:ce.getBearing()+_*this._bearingStep,pitch:ce.getPitch()+P*this._pitchStep,offset:[-j*this._panStep,-te*this._panStep],center:ce.getCenter()},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Bx(k){return k*(2-k)}const dd=4.000244140625;class Xh{constructor(o,h){this._map=o,this._el=o.getCanvasContainer(),this._handler=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,r.bindAll(["_onTimeout"],this)}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=o&&o.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;o.preventDefault()}let h=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const _=r.exported.now(),P=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,h!==0&&h%dd==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":P>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(P*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),o.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=o,this._delta-=h,this._active||this._start(o)),o.preventDefault()}_onTimeout(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=y.mousePos(this._el,o);this._around=r.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(h)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._map.transform;if(this._delta!==0){const ce=this._type==="wheel"&&Math.abs(this._delta)>dd?this._wheelZoomRate:this._defaultZoomRate;let me=2/(1+Math.exp(-Math.abs(this._delta*ce)));this._delta<0&&me!==0&&(me=1/me);const Se=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):o.scale;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(Se*me))),this._type==="wheel"&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const h=typeof this._targetZoom=="number"?this._targetZoom:o.zoom,_=this._startZoom,P=this._easing;let j,te=!1;if(this._type==="wheel"&&_&&P){const ce=Math.min((r.exported.now()-this._lastWheelEventTime)/200,1),me=P(ce);j=r.number(_,h,me),ce<1?this._frameId||(this._frameId=!0):te=!0}else j=h,te=!0;return this._active=!0,te&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!te,zoomDelta:j-o.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let h=r.ease;if(this._prevEase){const _=this._prevEase,P=(r.exported.now()-_.start)/_.duration,j=_.easing(P+.01)-_.easing(P),te=.27/Math.sqrt(j*j+1e-4)*.01,ce=Math.sqrt(.0729-te*te);h=r.bezier(te,ce,.25,1)}return this._prevEase={start:r.exported.now(),duration:o,easing:h},h}reset(){this._active=!1}}class Kh{constructor(o,h){this._clickZoom=o,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Qh{constructor(){this.reset()}reset(){this._active=!1}dblclick(o,h){return o.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:_.getZoom()+(o.shiftKey?-1:1),around:_.unproject(h)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $s{constructor(){this._tap=new Wh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(o,h,_){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?_.length>0&&(this._swipePoint=h[0],this._swipeTouch=_[0].identifier):this._tap.touchstart(o,h,_))}touchmove(o,h,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const P=h[0],j=P.y-this._swipePoint.y;return this._swipePoint=P,o.preventDefault(),this._active=!0,{zoomDelta:j/128}}}else this._tap.touchmove(o,h,_)}touchend(o,h,_){this._tapTime?this._swipePoint&&_.length===0&&this.reset():this._tap.touchend(o,h,_)&&(this._tapTime=o.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Do{constructor(o,h,_){this._el=o,this._mousePan=h,this._touchPan=_}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class zm{constructor(o,h,_){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=h,this._mousePitch=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Jh{constructor(o,h,_,P){this._el=o,this._touchZoom=h,this._touchRotate=_,this._tapDragZoom=P,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Gl=k=>k.zoom||k.drag||k.pitch||k.rotate;class ep extends r.Event{}function hd(k){return k.panDelta&&k.panDelta.mag()||k.zoomDelta||k.bearingDelta||k.pitchDelta}class va{constructor(o,h){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Mm(o),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h),r.bindAll(["handleEvent","handleWindowEvent"],this);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[window,"blur",void 0]];for(const[P,j,te]of this._listeners)y.addEventListener(P,j,P===document?this.handleWindowEvent:this.handleEvent,te)}destroy(){for(const[o,h,_]of this._listeners)y.removeEventListener(o,h,o===document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(o){const h=this._map,_=h.getCanvasContainer();this._add("mapEvent",new Po(h,o));const P=h.boxZoom=new sl(h,o);this._add("boxZoom",P);const j=new Ox,te=new Qh;h.doubleClickZoom=new Kh(te,j),this._add("tapZoom",j),this._add("clickZoom",te);const ce=new $s;this._add("tapDragZoom",ce);const me=h.touchPitch=new Rm(h);this._add("touchPitch",me);const Se=new fi(o),Ne=new Yh(o);h.dragRotate=new zm(o,Se,Ne),this._add("mouseRotate",Se,["mousePitch"]),this._add("mousePitch",Ne,["mouseRotate"]);const Ue=new Io(o),We=new Yc(o,h);h.dragPan=new Do(_,Ue,We),this._add("mousePan",Ue),this._add("touchPan",We,["touchZoom","touchRotate"]);const it=new jx,Je=new Zh;h.touchZoomRotate=new Jh(_,Je,it,ce),this._add("touchRotate",it,["touchPan","touchZoom"]),this._add("touchZoom",Je,["touchPan","touchRotate"]);const et=h.scrollZoom=new Xh(h,this);this._add("scrollZoom",et,["mousePan"]);const pt=h.keyboard=new Fx;this._add("keyboard",pt),this._add("blockableMapEvent",new Pm(h));for(const yt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])o.interactive&&o[yt]&&h[yt].enable(o[yt])}_add(o,h,_){this._handlers.push({handlerName:o,handler:h,allowed:_}),this._handlersById[o]=h}stop(o){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Gl(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,h,_){for(const P in o)if(P!==_&&(!h||h.indexOf(P)<0))return!0;return!1}handleWindowEvent(o){this.handleEvent(o,`${o.type}Window`)}_getMapTouches(o){const h=[];for(const _ of o)this._el.contains(_.target)&&h.push(_);return h}handleEvent(o,h){if(o.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const _=o.type==="renderFrame"?void 0:o,P={needsRenderFrame:!1},j={},te={},ce=o.touches,me=ce?this._getMapTouches(ce):void 0,Se=me?y.touchPos(this._el,me):y.mousePos(this._el,o);for(const{handlerName:We,handler:it,allowed:Je}of this._handlers){if(!it.isEnabled())continue;let et;this._blockedByActive(te,Je,We)?it.reset():it[h||o.type]&&(et=it[h||o.type](o,Se,me),this.mergeHandlerResult(P,j,et,We,_),et&&et.needsRenderFrame&&this._triggerRenderFrame()),(et||it.isActive())&&(te[We]=it)}const Ne={};for(const We in this._previousActiveHandlers)te[We]||(Ne[We]=_);this._previousActiveHandlers=te,(Object.keys(Ne).length||hd(P))&&(this._changes.push([P,j,Ne]),this._triggerRenderFrame()),(Object.keys(te).length||hd(P))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ue}=P;Ue&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ue(this._map))}mergeHandlerResult(o,h,_,P,j){if(!_)return;r.extend(o,_);const te={handlerName:P,originalEvent:_.originalEvent||j};_.zoomDelta!==void 0&&(h.zoom=te),_.panDelta!==void 0&&(h.drag=te),_.pitchDelta!==void 0&&(h.pitch=te),_.bearingDelta!==void 0&&(h.rotate=te)}_applyChanges(){const o={},h={},_={};for(const[P,j,te]of this._changes)P.panDelta&&(o.panDelta=(o.panDelta||new r.pointGeometry(0,0))._add(P.panDelta)),P.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+P.zoomDelta),P.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+P.bearingDelta),P.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+P.pitchDelta),P.around!==void 0&&(o.around=P.around),P.pinchAround!==void 0&&(o.pinchAround=P.pinchAround),P.noInertia&&(o.noInertia=P.noInertia),r.extend(h,j),r.extend(_,te);this._updateMapTransform(o,h,_),this._changes=[]}_updateMapTransform(o,h,_){const P=this._map,j=P.transform,te=P.style&&P.style.terrain;if(!(hd(o)||te&&this._drag))return this._fireEvents(h,_,!0);let{panDelta:ce,zoomDelta:me,bearingDelta:Se,pitchDelta:Ne,around:Ue,pinchAround:We}=o;We!==void 0&&(Ue=We),P._stop(!0),Ue=Ue||P.transform.centerPoint;const it=j.pointLocation(ce?Ue.sub(ce):Ue);Se&&(j.bearing+=Se),Ne&&(j.pitch+=Ne),me&&(j.zoom+=me),te?h.drag&&!this._drag?(this._drag={center:j.centerPoint,lngLat:j.pointLocation(Ue),point:Ue,handlerName:h.drag.handlerName},P.fire(new r.Event("freezeElevation",{freeze:!0}))):this._drag&&_[this._drag.handlerName]?(P.fire(new r.Event("freezeElevation",{freeze:!1})),this._drag=null):h.drag&&this._drag&&(j.center=j.pointLocation(j.centerPoint.sub(ce))):j.setLocationAtPoint(it,Ue),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(h,_,!0)}_fireEvents(o,h,_){const P=Gl(this._eventsInProgress),j=Gl(o),te={};for(const Ne in o){const{originalEvent:Ue}=o[Ne];this._eventsInProgress[Ne]||(te[`${Ne}start`]=Ue),this._eventsInProgress[Ne]=o[Ne]}!P&&j&&this._fireEvent("movestart",j.originalEvent);for(const Ne in te)this._fireEvent(Ne,te[Ne]);j&&this._fireEvent("move",j.originalEvent);for(const Ne in o){const{originalEvent:Ue}=o[Ne];this._fireEvent(Ne,Ue)}const ce={};let me;for(const Ne in this._eventsInProgress){const{handlerName:Ue,originalEvent:We}=this._eventsInProgress[Ne];this._handlersById[Ue].isActive()||(delete this._eventsInProgress[Ne],me=h[Ue]||We,ce[`${Ne}end`]=me)}for(const Ne in ce)this._fireEvent(Ne,ce[Ne]);const Se=Gl(this._eventsInProgress);if(_&&(P||j)&&!Se){this._updatingCamera=!0;const Ne=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ue=We=>We!==0&&-this._bearingSnap<We&&We<this._bearingSnap;Ne?(Ue(Ne.bearing||this._map.getBearing())&&(Ne.bearing=0),this._map.easeTo(Ne,{originalEvent:me})):(this._map.fire(new r.Event("moveend",{originalEvent:me})),Ue(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,h){this._map.fire(new r.Event(o,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{delete this._frameId,this.handleEvent(new ep("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const lr={extend:(k,...o)=>r.extend(k,...o),run(k){k()},logToElement(k,o=!1,h="log"){const _=window.document.getElementById(h);_&&(o&&(_.innerHTML=""),_.innerHTML+=`<br>${k}`)}};class pd extends r.Evented{constructor(o,h){super(),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=h.bearingSnap,r.bindAll(["_renderFrameCallback"],this)}getCenter(){return new r.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(o,h){return this.jumpTo({center:o},h)}panBy(o,h,_){return o=r.pointGeometry.convert(o).mult(-1),this.panTo(this.transform.center,r.extend({offset:o},h),_)}panTo(o,h,_){return this.easeTo(r.extend({center:o},h),_)}getZoom(){return this.transform.zoom}setZoom(o,h){return this.jumpTo({zoom:o},h),this}zoomTo(o,h,_){return this.easeTo(r.extend({zoom:o},h),_)}zoomIn(o,h){return this.zoomTo(this.getZoom()+1,o,h),this}zoomOut(o,h){return this.zoomTo(this.getZoom()-1,o,h),this}getBearing(){return this.transform.bearing}setBearing(o,h){return this.jumpTo({bearing:o},h),this}getPadding(){return this.transform.padding}setPadding(o,h){return this.jumpTo({padding:o},h),this}rotateTo(o,h,_){return this.easeTo(r.extend({bearing:o},h),_)}resetNorth(o,h){return this.rotateTo(0,r.extend({duration:1e3},o),h),this}resetNorthPitch(o,h){return this.easeTo(r.extend({bearing:0,pitch:0,duration:1e3},o),h),this}snapToNorth(o,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,h):this}getPitch(){return this.transform.pitch}setPitch(o,h){return this.jumpTo({pitch:o},h),this}cameraForBounds(o,h){o=r.LngLatBounds.convert(o);const _=h&&h.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),_,h)}_cameraForBoxAndBearing(o,h,_,P){const j={top:0,bottom:0,right:0,left:0};if(typeof(P=r.extend({padding:j,offset:[0,0],maxZoom:this.transform.maxZoom},P)).padding=="number"){const St=P.padding;P.padding={top:St,bottom:St,right:St,left:St}}P.padding=r.extend(j,P.padding);const te=this.transform,ce=te.padding,me=te.project(r.LngLat.convert(o)),Se=te.project(r.LngLat.convert(h)),Ne=me.rotate(-_*Math.PI/180),Ue=Se.rotate(-_*Math.PI/180),We=new r.pointGeometry(Math.max(Ne.x,Ue.x),Math.max(Ne.y,Ue.y)),it=new r.pointGeometry(Math.min(Ne.x,Ue.x),Math.min(Ne.y,Ue.y)),Je=We.sub(it),et=(te.width-(ce.left+ce.right+P.padding.left+P.padding.right))/Je.x,pt=(te.height-(ce.top+ce.bottom+P.padding.top+P.padding.bottom))/Je.y;if(pt<0||et<0)return void r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const yt=Math.min(te.scaleZoom(te.scale*Math.min(et,pt)),P.maxZoom),wt=r.pointGeometry.convert(P.offset),at=new r.pointGeometry((P.padding.left-P.padding.right)/2,(P.padding.top-P.padding.bottom)/2).rotate(_*Math.PI/180),Mt=wt.add(at).mult(te.scale/te.zoomScale(yt));return{center:te.unproject(me.add(Se).div(2).sub(Mt)),zoom:yt,bearing:_}}fitBounds(o,h,_){return this._fitInternal(this.cameraForBounds(o,h),h,_)}fitScreenCoordinates(o,h,_,P,j){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(r.pointGeometry.convert(o)),this.transform.pointLocation(r.pointGeometry.convert(h)),_,P),P,j)}_fitInternal(o,h,_){return o?(delete(h=r.extend(o,h)).padding,h.linear?this.easeTo(h,_):this.flyTo(h,_)):this}jumpTo(o,h){this.stop();const _=this.transform;let P=!1,j=!1,te=!1;return"zoom"in o&&_.zoom!==+o.zoom&&(P=!0,_.zoom=+o.zoom),o.center!==void 0&&(_.center=r.LngLat.convert(o.center)),"bearing"in o&&_.bearing!==+o.bearing&&(j=!0,_.bearing=+o.bearing),"pitch"in o&&_.pitch!==+o.pitch&&(te=!0,_.pitch=+o.pitch),o.padding==null||_.isPaddingEqual(o.padding)||(_.padding=o.padding),this.fire(new r.Event("movestart",h)).fire(new r.Event("move",h)),P&&this.fire(new r.Event("zoomstart",h)).fire(new r.Event("zoom",h)).fire(new r.Event("zoomend",h)),j&&this.fire(new r.Event("rotatestart",h)).fire(new r.Event("rotate",h)).fire(new r.Event("rotateend",h)),te&&this.fire(new r.Event("pitchstart",h)).fire(new r.Event("pitch",h)).fire(new r.Event("pitchend",h)),this.fire(new r.Event("moveend",h))}calculateCameraOptionsFromTo(o,h,_,P=0){const j=r.MercatorCoordinate.fromLngLat(o,h),te=r.MercatorCoordinate.fromLngLat(_,P),ce=te.x-j.x,me=te.y-j.y,Se=te.z-j.z,Ne=Math.hypot(ce,me,Se);if(Ne===0)throw new Error("Can't calculate camera options with same From and To");const Ue=Math.hypot(ce,me),We=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Ne/this.transform.tileSize),it=180*Math.atan2(ce,-me)/Math.PI;let Je=180*Math.acos(Ue/Ne)/Math.PI;return Je=Se<0?90-Je:90+Je,{center:te.toLngLat(),zoom:We,pitch:Je,bearing:it}}easeTo(o,h){this._stop(!1,o.easeId),((o=r.extend({offset:[0,0],duration:500,easing:r.ease},o)).animate===!1||!o.essential&&r.exported.prefersReducedMotion)&&(o.duration=0);const _=this.transform,P=this.getZoom(),j=this.getBearing(),te=this.getPitch(),ce=this.getPadding(),me="zoom"in o?+o.zoom:P,Se="bearing"in o?this._normalizeBearing(o.bearing,j):j,Ne="pitch"in o?+o.pitch:te,Ue="padding"in o?o.padding:_.padding,We=r.pointGeometry.convert(o.offset);let it=_.centerPoint.add(We);const Je=_.pointLocation(it),et=r.LngLat.convert(o.center||Je);this._normalizeCenter(et);const pt=_.project(Je),yt=_.project(et).sub(pt),wt=_.zoomScale(me-P);let at,Mt;o.around&&(at=r.LngLat.convert(o.around),Mt=_.locationPoint(at));const St={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||me!==P,this._rotating=this._rotating||j!==Se,this._pitching=this._pitching||Ne!==te,this._padding=!_.isPaddingEqual(Ue),this._easeId=o.easeId,this._prepareEase(h,o.noMoveStart,St),this._ease(Ot=>{if(this._zooming&&(_.zoom=r.number(P,me,Ot)),this._rotating&&(_.bearing=r.number(j,Se,Ot)),this._pitching&&(_.pitch=r.number(te,Ne,Ot)),this._padding&&(_.interpolatePadding(ce,Ue,Ot),it=_.centerPoint.add(We)),at)_.setLocationAtPoint(at,Mt);else{const jt=_.zoomScale(_.zoom-P),Ut=me>P?Math.min(2,wt):Math.max(.5,wt),zt=Math.pow(Ut,1-Ot),ai=_.unproject(pt.add(yt.mult(Ot*zt)).mult(jt));_.setLocationAtPoint(_.renderWorldCopies?ai.wrap():ai,it)}this._fireMoveEvents(h)},Ot=>{this._afterEase(h,Ot)},o),this}_prepareEase(o,h,_={}){this._moving=!0,this.fire(new r.Event("freezeElevation",{freeze:!0})),h||_.moving||this.fire(new r.Event("movestart",o)),this._zooming&&!_.zooming&&this.fire(new r.Event("zoomstart",o)),this._rotating&&!_.rotating&&this.fire(new r.Event("rotatestart",o)),this._pitching&&!_.pitching&&this.fire(new r.Event("pitchstart",o))}_fireMoveEvents(o){this.fire(new r.Event("move",o)),this._zooming&&this.fire(new r.Event("zoom",o)),this._rotating&&this.fire(new r.Event("rotate",o)),this._pitching&&this.fire(new r.Event("pitch",o))}_afterEase(o,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId,this.fire(new r.Event("freezeElevation",{freeze:!1}));const _=this._zooming,P=this._rotating,j=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new r.Event("zoomend",o)),P&&this.fire(new r.Event("rotateend",o)),j&&this.fire(new r.Event("pitchend",o)),this.fire(new r.Event("moveend",o))}flyTo(o,h){if(!o.essential&&r.exported.prefersReducedMotion){const Ii=r.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ii,h)}this.stop(),o=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},o);const _=this.transform,P=this.getZoom(),j=this.getBearing(),te=this.getPitch(),ce=this.getPadding(),me="zoom"in o?r.clamp(+o.zoom,_.minZoom,_.maxZoom):P,Se="bearing"in o?this._normalizeBearing(o.bearing,j):j,Ne="pitch"in o?+o.pitch:te,Ue="padding"in o?o.padding:_.padding,We=_.zoomScale(me-P),it=r.pointGeometry.convert(o.offset);let Je=_.centerPoint.add(it);const et=_.pointLocation(Je),pt=r.LngLat.convert(o.center||et);this._normalizeCenter(pt);const yt=_.project(et),wt=_.project(pt).sub(yt);let at=o.curve;const Mt=Math.max(_.width,_.height),St=Mt/We,Ot=wt.mag();if("minZoom"in o){const Ii=r.clamp(Math.min(o.minZoom,P,me),_.minZoom,_.maxZoom),$n=Mt/_.zoomScale(Ii-P);at=Math.sqrt($n/Ot*2)}const jt=at*at;function Ut(Ii){const $n=(St*St-Mt*Mt+(Ii?-1:1)*jt*jt*Ot*Ot)/(2*(Ii?St:Mt)*jt*Ot);return Math.log(Math.sqrt($n*$n+1)-$n)}function zt(Ii){return(Math.exp(Ii)-Math.exp(-Ii))/2}function ai(Ii){return(Math.exp(Ii)+Math.exp(-Ii))/2}const Xt=Ut(0);let li=function(Ii){return ai(Xt)/ai(Xt+at*Ii)},Ki=function(Ii){return Mt*((ai(Xt)*(zt($n=Xt+at*Ii)/ai($n))-zt(Xt))/jt)/Ot;var $n},un=(Ut(1)-Xt)/at;if(Math.abs(Ot)<1e-6||!isFinite(un)){if(Math.abs(Mt-St)<1e-6)return this.easeTo(o,h);const Ii=St<Mt?-1:1;un=Math.abs(Math.log(St/Mt))/at,Ki=function(){return 0},li=function($n){return Math.exp(Ii*at*$n)}}return o.duration="duration"in o?+o.duration:1e3*un/("screenSpeed"in o?+o.screenSpeed/at:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=j!==Se,this._pitching=Ne!==te,this._padding=!_.isPaddingEqual(Ue),this._prepareEase(h,!1),this._ease(Ii=>{const $n=Ii*un,Un=1/li($n);_.zoom=Ii===1?me:P+_.scaleZoom(Un),this._rotating&&(_.bearing=r.number(j,Se,Ii)),this._pitching&&(_.pitch=r.number(te,Ne,Ii)),this._padding&&(_.interpolatePadding(ce,Ue,Ii),Je=_.centerPoint.add(it));const wn=Ii===1?pt:_.unproject(yt.add(wt.mult(Ki($n))).mult(Un));_.setLocationAtPoint(_.renderWorldCopies?wn.wrap():wn,Je),this._fireMoveEvents(h)},()=>this._afterEase(h),o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,h)}if(!o){const _=this.handlers;_&&_.stop(!1)}return this}_ease(o,h,_){_.animate===!1||_.duration===0?(o(1),h()):(this._easeStart=r.exported.now(),this._easeOptions=_,this._onEaseFrame=o,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const o=Math.min((r.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(o,h){o=r.wrap(o,-180,180);const _=Math.abs(o-h);return Math.abs(o-360-h)<_&&(o-=360),Math.abs(o+360-h)<_&&(o+=360),o}_normalizeCenter(o){const h=this.transform;if(!h.renderWorldCopies||h.lngRange)return;const _=o.lng-h.center.lng;o.lng+=_>180?-360:_<-180?360:0}}class fd{constructor(o={}){this.options=o,r.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(o){return this._map=o,this._compact=this.options&&this.options.compact,this._container=y.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=y.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=y.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){y.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(o,h){const _=this._map._getUIString(`AttributionControl.${h}`);o.title=_,o.setAttribute("aria-label",_)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(P=>typeof P!="string"?"":P)):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){const P=this._map.style.stylesheet;this.styleOwner=P.owner,this.styleId=P.id}const h=this._map.style.sourceCaches;for(const P in h){const j=h[P];if(j.used||j.usedForTerrain){const te=j.getSource();te.attribution&&o.indexOf(te.attribution)<0&&o.push(te.attribution)}}o=o.filter(P=>String(P).trim()),o.sort((P,j)=>P.length-j.length),o=o.filter((P,j)=>{for(let te=j+1;te<o.length;te++)if(o[te].indexOf(P)>=0)return!1;return!0});const _=o.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,o.length?(this._innerContainer.innerHTML=_,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class tp{constructor(o={}){this.options=o,r.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(o){this._map=o,this._compact=this.options&&this.options.compact,this._container=y.create("div","maplibregl-ctrl mapboxgl-ctrl");const h=y.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){y.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const o=this._container.children;if(o.length){const h=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&h.classList.add("maplibregl-compact","mapboxgl-compact"):h.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Nm{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const h=++this._id;return this._queue.push({callback:o,id:h,cancelled:!1}),h}remove(o){const h=this._currentlyRunning,_=h?this._queue.concat(h):this._queue;for(const P of _)if(P.id===o)return void(P.cancelled=!0)}run(o=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const h=this._currentlyRunning=this._queue;this._queue=[];for(const _ of h)if(!_.cancelled&&(_.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Om={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},$x={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Xa={showCompass:!0,showZoom:!0,visualizePitch:!1};class md{constructor(o,h,_=!1){this._clickTolerance=10,this.element=h,this.mouseRotate=new fi({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,_&&(this.mousePitch=new Yh({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),r.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),y.addEventListener(h,"mousedown",this.mousedown),y.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),y.addEventListener(h,"touchmove",this.touchmove),y.addEventListener(h,"touchend",this.touchend),y.addEventListener(h,"touchcancel",this.reset)}down(o,h){this.mouseRotate.mousedown(o,h),this.mousePitch&&this.mousePitch.mousedown(o,h),y.disableDrag()}move(o,h){const _=this.map,P=this.mouseRotate.mousemoveWindow(o,h);if(P&&P.bearingDelta&&_.setBearing(_.getBearing()+P.bearingDelta),this.mousePitch){const j=this.mousePitch.mousemoveWindow(o,h);j&&j.pitchDelta&&_.setPitch(_.getPitch()+j.pitchDelta)}}off(){const o=this.element;y.removeEventListener(o,"mousedown",this.mousedown),y.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),y.removeEventListener(o,"touchmove",this.touchmove),y.removeEventListener(o,"touchend",this.touchend),y.removeEventListener(o,"touchcancel",this.reset),this.offTemp()}offTemp(){y.enableDrag(),y.removeEventListener(window,"mousemove",this.mousemove),y.removeEventListener(window,"mouseup",this.mouseup)}mousedown(o){this.down(r.extend({},o,{ctrlKey:!0,preventDefault:()=>o.preventDefault()}),y.mousePos(this.element,o)),y.addEventListener(window,"mousemove",this.mousemove),y.addEventListener(window,"mouseup",this.mouseup)}mousemove(o){this.move(o,y.mousePos(this.element,o))}mouseup(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()}touchstart(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=y.touchPos(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>o.preventDefault()},this._startPos))}touchmove(o){o.targetTouches.length!==1?this.reset():(this._lastPos=y.touchPos(this.element,o.targetTouches)[0],this.move({preventDefault:()=>o.preventDefault()},this._lastPos))}touchend(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Ei(k,o,h){if(k=new r.LngLat(k.lng,k.lat),o){const _=new r.LngLat(k.lng-360,k.lat),P=new r.LngLat(k.lng+360,k.lat),j=h.locationPoint(k).distSqr(o);h.locationPoint(_).distSqr(o)<j?k=_:h.locationPoint(P).distSqr(o)<j&&(k=P)}for(;Math.abs(k.lng-h.center.lng)>180;){const _=h.locationPoint(k);if(_.x>=0&&_.y>=0&&_.x<=h.width&&_.y<=h.height)break;k.lng>h.center.lng?k.lng-=360:k.lng+=360}return k}const Di={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Kc(k,o,h){const _=k.classList;for(const P in Di)_.remove(`maplibregl-${h}-anchor-${P}`,`mapboxgl-${h}-anchor-${P}`);_.add(`maplibregl-${h}-anchor-${o}`,`mapboxgl-${h}-anchor-${o}`)}class Qc extends r.Evented{constructor(o,h){if(super(),(o instanceof HTMLElement||h)&&(o=r.extend({element:o},h)),r.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=r.pointGeometry.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=y.create("div"),this._element.setAttribute("aria-label","Map marker");const _=y.createNS("http://www.w3.org/2000/svg","svg"),P=41,j=27;_.setAttributeNS(null,"display","block"),_.setAttributeNS(null,"height",`${P}px`),_.setAttributeNS(null,"width",`${j}px`),_.setAttributeNS(null,"viewBox",`0 0 ${j} ${P}`);const te=y.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"stroke","none"),te.setAttributeNS(null,"stroke-width","1"),te.setAttributeNS(null,"fill","none"),te.setAttributeNS(null,"fill-rule","evenodd");const ce=y.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"fill-rule","nonzero");const me=y.createNS("http://www.w3.org/2000/svg","g");me.setAttributeNS(null,"transform","translate(3.0, 29.0)"),me.setAttributeNS(null,"fill","#000000");const Se=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const wt of Se){const at=y.createNS("http://www.w3.org/2000/svg","ellipse");at.setAttributeNS(null,"opacity","0.04"),at.setAttributeNS(null,"cx","10.5"),at.setAttributeNS(null,"cy","5.80029008"),at.setAttributeNS(null,"rx",wt.rx),at.setAttributeNS(null,"ry",wt.ry),me.appendChild(at)}const Ne=y.createNS("http://www.w3.org/2000/svg","g");Ne.setAttributeNS(null,"fill",this._color);const Ue=y.createNS("http://www.w3.org/2000/svg","path");Ue.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ne.appendChild(Ue);const We=y.createNS("http://www.w3.org/2000/svg","g");We.setAttributeNS(null,"opacity","0.25"),We.setAttributeNS(null,"fill","#000000");const it=y.createNS("http://www.w3.org/2000/svg","path");it.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),We.appendChild(it);const Je=y.createNS("http://www.w3.org/2000/svg","g");Je.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Je.setAttributeNS(null,"fill","#FFFFFF");const et=y.createNS("http://www.w3.org/2000/svg","g");et.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pt=y.createNS("http://www.w3.org/2000/svg","circle");pt.setAttributeNS(null,"fill","#000000"),pt.setAttributeNS(null,"opacity","0.25"),pt.setAttributeNS(null,"cx","5.5"),pt.setAttributeNS(null,"cy","5.5"),pt.setAttributeNS(null,"r","5.4999962");const yt=y.createNS("http://www.w3.org/2000/svg","circle");yt.setAttributeNS(null,"fill","#FFFFFF"),yt.setAttributeNS(null,"cx","5.5"),yt.setAttributeNS(null,"cy","5.5"),yt.setAttributeNS(null,"r","5.4999962"),et.appendChild(pt),et.appendChild(yt),ce.appendChild(me),ce.appendChild(Ne),ce.appendChild(We),ce.appendChild(Je),ce.appendChild(et),_.appendChild(ce),_.setAttributeNS(null,"height",P*this._scale+"px"),_.setAttributeNS(null,"width",j*this._scale+"px"),this._element.appendChild(_),this._offset=r.pointGeometry.convert(o&&o.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",_=>{_.preventDefault()}),this._element.addEventListener("mousedown",_=>{_.preventDefault()}),Kc(this._element,this._anchor,"marker"),this._popup=null}addTo(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),y.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=r.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const P=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[P,-1*(38.1-13.5+P)],"bottom-right":[-P,-1*(38.1-13.5+P)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(o){const h=o.code,_=o.charCode||o.keyCode;h!=="Space"&&h!=="Enter"&&_!==32&&_!==13||this.togglePopup()}_onMapClick(o){const h=o.originalEvent.target,_=this._element;this._popup&&(h===_||_.contains(h))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this}_update(o){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Ei(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let h="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?h=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(h=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),o&&o.type!=="moveend"||(this._pos=this._pos.round()),y.setTransform(this._element,`${Di[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${h}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const P=this._map.unproject(this._pos),j=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=P.distanceTo(this._lngLat)>20*j?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(o){return this._offset=r.pointGeometry.convert(o),this._update(),this}_onMove(o){if(!this._isDragging){const h=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=h}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new r.Event("dragstart"))),this.fire(new r.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new r.Event("dragend")),this._state="inactive"}_addDragHandler(o){this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const ip={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Vr,cl=0,Us=!1;const Ux={maxWidth:100,unit:"metric"};function Jc(k,o,h){const _=h&&h.maxWidth||100,P=k._container.clientHeight/2,j=k.unproject([0,P]),te=k.unproject([_,P]),ce=j.distanceTo(te);if(h&&h.unit==="imperial"){const me=3.2808*ce;me>5280?nr(o,_,me/5280,k._getUIString("ScaleControl.Miles")):nr(o,_,me,k._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?nr(o,_,ce/1852,k._getUIString("ScaleControl.NauticalMiles")):ce>=1e3?nr(o,_,ce/1e3,k._getUIString("ScaleControl.Kilometers")):nr(o,_,ce,k._getUIString("ScaleControl.Meters"))}function nr(k,o,h,_){const P=function(j){const te=Math.pow(10,`${Math.floor(j)}`.length-1);let ce=j/te;return ce=ce>=10?10:ce>=5?5:ce>=3?3:ce>=2?2:ce>=1?1:function(me){const Se=Math.pow(10,Math.ceil(-Math.log(me)/Math.LN10));return Math.round(me*Se)/Se}(ce),te*ce}(h);k.style.width=o*(P/h)+"px",k.innerHTML=`${P}&nbsp;${_}`}const Or={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},jm=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Hl(k){if(k){if(typeof k=="number"){const o=Math.round(Math.sqrt(.5*Math.pow(k,2)));return{center:new r.pointGeometry(0,0),top:new r.pointGeometry(0,k),"top-left":new r.pointGeometry(o,o),"top-right":new r.pointGeometry(-o,o),bottom:new r.pointGeometry(0,-k),"bottom-left":new r.pointGeometry(o,-o),"bottom-right":new r.pointGeometry(-o,-o),left:new r.pointGeometry(k,0),right:new r.pointGeometry(-k,0)}}if(k instanceof r.pointGeometry||Array.isArray(k)){const o=r.pointGeometry.convert(k);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:r.pointGeometry.convert(k.center||[0,0]),top:r.pointGeometry.convert(k.top||[0,0]),"top-left":r.pointGeometry.convert(k["top-left"]||[0,0]),"top-right":r.pointGeometry.convert(k["top-right"]||[0,0]),bottom:r.pointGeometry.convert(k.bottom||[0,0]),"bottom-left":r.pointGeometry.convert(k["bottom-left"]||[0,0]),"bottom-right":r.pointGeometry.convert(k["bottom-right"]||[0,0]),left:r.pointGeometry.convert(k.left||[0,0]),right:r.pointGeometry.convert(k.right||[0,0])}}return Hl(new r.pointGeometry(0,0))}const eu={supported:p,setRTLTextPlugin:r.setRTLTextPlugin,getRTLTextPluginStatus:r.getRTLTextPluginStatus,Map:class extends pd{constructor(k){var o;if(r.PerformanceUtils.mark(r.PerformanceMarkers.create),(k=r.extend({},$x,k)).minZoom!=null&&k.maxZoom!=null&&k.minZoom>k.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(k.minPitch!=null&&k.maxPitch!=null&&k.minPitch>k.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(k.minPitch!=null&&k.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(k.maxPitch!=null&&k.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ud(k.minZoom,k.maxZoom,k.minPitch,k.maxPitch,k.renderWorldCopies),{bearingSnap:k.bearingSnap}),this._interactive=k.interactive,this._cooperativeGestures=k.cooperativeGestures,this._maxTileCacheSize=k.maxTileCacheSize,this._failIfMajorPerformanceCaveat=k.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=k.preserveDrawingBuffer,this._antialias=k.antialias,this._trackResize=k.trackResize,this._bearingSnap=k.bearingSnap,this._refreshExpiredTiles=k.refreshExpiredTiles,this._fadeDuration=k.fadeDuration,this._crossSourceCollisions=k.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=k.collectResourceTiming,this._renderTaskQueue=new Nm,this._controls=[],this._mapId=r.uniqueId(),this._locale=r.extend({},Om,k.locale),this._clickTolerance=k.clickTolerance,this._pixelRatio=(o=k.pixelRatio)!==null&&o!==void 0?o:devicePixelRatio,this._requestManager=new w(k.transformRequest),typeof k.container=="string"){if(this._container=document.getElementById(k.container),!this._container)throw new Error(`Container '${k.container}' not found.`)}else{if(!(k.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=k.container}if(k.maxBounds&&this.setMaxBounds(k.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new va(this,k),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=k.hash&&new Sm(typeof k.hash=="string"&&k.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:k.center,zoom:k.zoom,bearing:k.bearing,pitch:k.pitch}),k.bounds&&(this.resize(),this.fitBounds(k.bounds,r.extend({},k.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=k.localIdeographFontFamily,k.style&&this.setStyle(k.style,{localIdeographFontFamily:k.localIdeographFontFamily}),k.attributionControl&&this.addControl(new fd({customAttribution:k.customAttribution})),k.maplibreLogo&&this.addControl(new tp,k.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",h=>{this._update(h.dataType==="style"),this.fire(new r.Event(`${h.dataType}data`,h))}),this.on("dataloading",h=>{this.fire(new r.Event(`${h.dataType}dataloading`,h))}),this.on("dataabort",h=>{this.fire(new r.Event("sourcedataabort",h))})}_getMapId(){return this._mapId}addControl(k,o){if(o===void 0&&(o=k.getDefaultPosition?k.getDefaultPosition():"top-right"),!k||!k.onAdd)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=k.onAdd(this);this._controls.push(k);const _=this._controlPositions[o];return o.indexOf("bottom")!==-1?_.insertBefore(h,_.firstChild):_.appendChild(h),this}removeControl(k){if(!k||!k.onRemove)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(k);return o>-1&&this._controls.splice(o,1),k.onRemove(this),this}hasControl(k){return this._controls.indexOf(k)>-1}calculateCameraOptionsFromTo(k,o,h,_){return _==null&&this.style.terrain&&(_=this.transform.getElevation(h,this.style.terrain)),super.calculateCameraOptionsFromTo(k,o,h,_)}resize(k){const o=this._containerDimensions(),h=o[0],_=o[1];this._resizeCanvas(h,_,this.getPixelRatio()),this.transform.resize(h,_),this.painter.resize(h,_,this.getPixelRatio());const P=!this._moving;return P&&(this.stop(),this.fire(new r.Event("movestart",k)).fire(new r.Event("move",k))),this.fire(new r.Event("resize",k)),P&&this.fire(new r.Event("moveend",k)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(k){const[o,h]=this._containerDimensions();this._pixelRatio=k,this._resizeCanvas(o,h,k),this.painter.resize(o,h,k)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(k){return this.transform.setMaxBounds(r.LngLatBounds.convert(k)),this._update()}setMinZoom(k){if((k=k??-2)>=-2&&k<=this.transform.maxZoom)return this.transform.minZoom=k,this._update(),this.getZoom()<k&&this.setZoom(k),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(k){if((k=k??22)>=this.transform.minZoom)return this.transform.maxZoom=k,this._update(),this.getZoom()>k&&this.setZoom(k),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(k){if((k=k??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(k>=0&&k<=this.transform.maxPitch)return this.transform.minPitch=k,this._update(),this.getPitch()<k&&this.setPitch(k),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(k){if((k=k??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(k>=this.transform.minPitch)return this.transform.maxPitch=k,this._update(),this.getPitch()>k&&this.setPitch(k),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(k){return this.transform.renderWorldCopies=k,this._update()}project(k){return this.transform.locationPoint(r.LngLat.convert(k),this.style&&this.style.terrain)}unproject(k){return this.transform.pointLocation(r.pointGeometry.convert(k),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(k,o,h){if(k==="mouseenter"||k==="mouseover"){let _=!1;return{layer:o,listener:h,delegates:{mousemove:j=>{const te=this.getLayer(o)?this.queryRenderedFeatures(j.point,{layers:[o]}):[];te.length?_||(_=!0,h.call(this,new ea(k,this,j.originalEvent,{features:te}))):_=!1},mouseout:()=>{_=!1}}}}if(k==="mouseleave"||k==="mouseout"){let _=!1;return{layer:o,listener:h,delegates:{mousemove:te=>{(this.getLayer(o)?this.queryRenderedFeatures(te.point,{layers:[o]}):[]).length?_=!0:_&&(_=!1,h.call(this,new ea(k,this,te.originalEvent)))},mouseout:te=>{_&&(_=!1,h.call(this,new ea(k,this,te.originalEvent)))}}}}{const _=P=>{const j=this.getLayer(o)?this.queryRenderedFeatures(P.point,{layers:[o]}):[];j.length&&(P.features=j,h.call(this,P),delete P.features)};return{layer:o,listener:h,delegates:{[k]:_}}}}on(k,o,h){if(h===void 0)return super.on(k,o);const _=this._createDelegatedListener(k,o,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[k]=this._delegatedListeners[k]||[],this._delegatedListeners[k].push(_);for(const P in _.delegates)this.on(P,_.delegates[P]);return this}once(k,o,h){if(h===void 0)return super.once(k,o);const _=this._createDelegatedListener(k,o,h);for(const P in _.delegates)this.once(P,_.delegates[P]);return this}off(k,o,h){return h===void 0?super.off(k,o):(this._delegatedListeners&&this._delegatedListeners[k]&&(_=>{const P=this._delegatedListeners[k];for(let j=0;j<P.length;j++){const te=P[j];if(te.layer===o&&te.listener===h){for(const ce in te.delegates)this.off(ce,te.delegates[ce]);return P.splice(j,1),this}}})(),this)}queryRenderedFeatures(k,o){if(!this.style)return[];let h;if(o!==void 0||k===void 0||k instanceof r.pointGeometry||Array.isArray(k)||(o=k,k=void 0),o=o||{},(k=k||[[0,0],[this.transform.width,this.transform.height]])instanceof r.pointGeometry||typeof k[0]=="number")h=[r.pointGeometry.convert(k)];else{const _=r.pointGeometry.convert(k[0]),P=r.pointGeometry.convert(k[1]);h=[_,new r.pointGeometry(P.x,_.y),P,new r.pointGeometry(_.x,P.y),_]}return this.style.queryRenderedFeatures(h,o,this.transform)}querySourceFeatures(k,o){return this.style.querySourceFeatures(k,o)}setStyle(k,o){return(o=r.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},o)).diff!==!1&&o.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&k?(this._diffStyle(k,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._updateStyle(k,o))}setTransformRequest(k){return this._requestManager.setTransformRequest(k),this}_getUIString(k){const o=this._locale[k];if(o==null)throw new Error(`Missing UI string '${k}'`);return o}_updateStyle(k,o){return this.style&&(this.style.setEventedParent(null),this.style._remove()),k?(this.style=new Ur(this,o||{}),this.style.setEventedParent(this,{style:this.style}),typeof k=="string"?this.style.loadURL(k):this.style.loadJSON(k),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ur(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(k,o){if(typeof k=="string"){const h=this._requestManager.transformRequest(k,r.ResourceType.Style);r.getJSON(h,(_,P)=>{_?this.fire(new r.ErrorEvent(_)):P&&this._updateDiff(P,o)})}else typeof k=="object"&&this._updateDiff(k,o)}_updateDiff(k,o){try{this.style.setState(k)&&this._update(!0)}catch(h){r.warnOnce(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(k,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():r.warnOnce("There is no style added to the map.")}addSource(k,o){return this._lazyInitEmptyStyle(),this.style.addSource(k,o),this._update(!0)}isSourceLoaded(k){const o=this.style&&this.style.sourceCaches[k];if(o!==void 0)return o.loaded();this.fire(new r.ErrorEvent(new Error(`There is no source with ID '${k}'`)))}setTerrain(k){return this.style.setTerrain(k),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const k=this.style&&this.style.sourceCaches;for(const o in k){const h=k[o]._tiles;for(const _ in h){const P=h[_];if(P.state!=="loaded"&&P.state!=="errored")return!1}}return!0}addSourceType(k,o,h){return this._lazyInitEmptyStyle(),this.style.addSourceType(k,o,h)}removeSource(k){return this.style.removeSource(k),this._update(!0)}getSource(k){return this.style.getSource(k)}addImage(k,o,{pixelRatio:h=1,sdf:_=!1,stretchX:P,stretchY:j,content:te}={}){if(this._lazyInitEmptyStyle(),o instanceof HTMLImageElement||r.isImageBitmap(o)){const{width:ce,height:me,data:Se}=r.exported.getImageData(o);this.style.addImage(k,{data:new r.RGBAImage({width:ce,height:me},Se),pixelRatio:h,stretchX:P,stretchY:j,content:te,sdf:_,version:0})}else{if(o.width===void 0||o.height===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ce,height:me,data:Se}=o,Ne=o;this.style.addImage(k,{data:new r.RGBAImage({width:ce,height:me},new Uint8Array(Se)),pixelRatio:h,stretchX:P,stretchY:j,content:te,sdf:_,version:0,userImage:Ne}),Ne.onAdd&&Ne.onAdd(this,k)}}}updateImage(k,o){const h=this.style.getImage(k);if(!h)return this.fire(new r.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=o instanceof HTMLImageElement||r.isImageBitmap(o)?r.exported.getImageData(o):o,{width:P,height:j,data:te}=_;if(P===void 0||j===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(P!==h.data.width||j!==h.data.height)return this.fire(new r.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const ce=!(o instanceof HTMLImageElement||r.isImageBitmap(o));h.data.replace(te,ce),this.style.updateImage(k,h)}hasImage(k){return k?!!this.style.getImage(k):(this.fire(new r.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(k){this.style.removeImage(k)}loadImage(k,o){r.getImage(this._requestManager.transformRequest(k,r.ResourceType.Image),o)}listImages(){return this.style.listImages()}addLayer(k,o){return this._lazyInitEmptyStyle(),this.style.addLayer(k,o),this._update(!0)}moveLayer(k,o){return this.style.moveLayer(k,o),this._update(!0)}removeLayer(k){return this.style.removeLayer(k),this._update(!0)}getLayer(k){return this.style.getLayer(k)}setLayerZoomRange(k,o,h){return this.style.setLayerZoomRange(k,o,h),this._update(!0)}setFilter(k,o,h={}){return this.style.setFilter(k,o,h),this._update(!0)}getFilter(k){return this.style.getFilter(k)}setPaintProperty(k,o,h,_={}){return this.style.setPaintProperty(k,o,h,_),this._update(!0)}getPaintProperty(k,o){return this.style.getPaintProperty(k,o)}setLayoutProperty(k,o,h,_={}){return this.style.setLayoutProperty(k,o,h,_),this._update(!0)}getLayoutProperty(k,o){return this.style.getLayoutProperty(k,o)}setLight(k,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(k,o),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(k,o){return this.style.setFeatureState(k,o),this._update()}removeFeatureState(k,o){return this.style.removeFeatureState(k,o),this._update()}getFeatureState(k){return this.style.getFeatureState(k)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let k=0,o=0;return this._container&&(k=this._container.clientWidth||400,o=this._container.clientHeight||300),[k,o]}_setupContainer(){const k=this._container;k.classList.add("maplibregl-map","mapboxgl-map");const o=this._canvasContainer=y.create("div","maplibregl-canvas-container mapboxgl-canvas-container",k);this._interactive&&o.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=y.create("canvas","maplibregl-canvas mapboxgl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const h=this._containerDimensions();this._resizeCanvas(h[0],h[1],this.getPixelRatio());const _=this._controlContainer=y.create("div","maplibregl-control-container mapboxgl-control-container",k),P=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(j=>{P[j]=y.create("div",`maplibregl-ctrl-${j} mapboxgl-ctrl-${j}`,_)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const k=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=y.create("div","maplibregl-cooperative-gesture-screen",k);let o="Control",h=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(h=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map",o="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${h}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",_=>{_.key===o&&(this._metaPress=!0)}),document.addEventListener("keyup",_=>{_.key===o&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",_=>{this._onCooperativeGesture(_,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(k,o,h){this._canvas.width=h*k,this._canvas.height=h*o,this._canvas.style.width=`${k}px`,this._canvas.style.height=`${o}px`}_setupPainter(){const k=r.extend({},p.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._canvas.getContext("webgl",k)||this._canvas.getContext("experimental-webgl",k);o?(this.painter=new Cm(o,this.transform),r.exported$1.testSupport(o)):this.fire(new r.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(k){k.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.Event("webglcontextlost",{originalEvent:k}))}_contextRestored(k){this._setupPainter(),this.resize(),this._update(),this.fire(new r.Event("webglcontextrestored",{originalEvent:k}))}_onMapScroll(k){if(k.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(k,o,h){return!o&&h<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(k){return this.style?(this._styleDirty=this._styleDirty||k,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(k){return this._update(),this._renderTaskQueue.add(k)}_cancelRenderFrame(k){this._renderTaskQueue.remove(k)}_render(k){let o,h=0;const _=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(o=_.createQueryEXT(),_.beginQueryEXT(_.TIME_ELAPSED_EXT,o),h=r.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(k),this._removed)return;let P=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const te=this.transform.zoom,ce=r.exported.now();this.style.zoomHistory.update(te,ce);const me=new r.EvaluationParameters(te,{now:ce,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Se=me.crossFadingFactor();Se===1&&Se===this._crossFadingFactor||(P=!0,this._crossFadingFactor=Se),this.style.update(me)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new r.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,r.PerformanceUtils.mark(r.PerformanceMarkers.load),this.fire(new r.Event("load"))),this.style&&(this.style.hasTransitions()||P)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const te=r.exported.now()-h;_.endQueryEXT(_.TIME_ELAPSED_EXT,o),setTimeout(()=>{const ce=_.getQueryObjectEXT(o,_.QUERY_RESULT_EXT)/1e6;_.deleteQueryEXT(o),this.fire(new r.Event("gpu-timing-frame",{cpuTime:te,gpuTime:ce}))},50)}if(this.listens("gpu-timing-layer")){const te=this.painter.collectGpuTimers();setTimeout(()=>{const ce=this.painter.queryGpuTimers(te);this.fire(new r.Event("gpu-timing-layer",{layerTimes:ce}))},50)}const j=this._sourcesDirty||this._styleDirty||this._placementDirty;return j||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new r.Event("idle")),!this._loaded||this._fullyLoaded||j||(this._fullyLoaded=!0,r.PerformanceUtils.mark(r.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const k=this.painter.context.gl.getExtension("WEBGL_lose_context");k&&k.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),y.remove(this._canvasContainer),y.remove(this._controlContainer),this._cooperativeGestures&&y.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),r.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new r.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=r.exported.frame(k=>{r.PerformanceUtils.frame(k),this._frame=null,this._render(k)}))}_onWindowOnline(){this._update()}_onWindowResize(k){this._trackResize&&this.resize({originalEvent:k})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(k){this._showTileBoundaries!==k&&(this._showTileBoundaries=k,this._update())}get showPadding(){return!!this._showPadding}set showPadding(k){this._showPadding!==k&&(this._showPadding=k,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(k){this._showCollisionBoxes!==k&&(this._showCollisionBoxes=k,k?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(k){this._showOverdrawInspector!==k&&(this._showOverdrawInspector=k,this._update())}get repaint(){return!!this._repaint}set repaint(k){this._repaint!==k&&(this._repaint=k,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(k){this._vertices=k,this._update()}_setCacheLimits(k,o){r.setCacheLimits(k,o)}get version(){return"2.4.0"}},NavigationControl:class{constructor(k){this.options=r.extend({},Xa,k),this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(r.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",o=>this._map.zoomIn({},{originalEvent:o})),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",o=>this._map.zoomOut({},{originalEvent:o})),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",o=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:o}):this._map.resetNorth({},{originalEvent:o})}),this._compassIcon=y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const k=this._map.getZoom(),o=k===this._map.getMaxZoom(),h=k===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())}_rotateCompassArrow(){const k=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=k}onAdd(k){return this._map=k,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new md(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){y.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(k,o){const h=y.create("button",k,this._container);return h.type="button",h.addEventListener("click",o),h}_setButtonTitle(k,o){const h=this._map._getUIString(`NavigationControl.${o}`);k.title=h,k.setAttribute("aria-label",h)}},GeolocateControl:class extends r.Evented{constructor(k){super(),this.options=r.extend({},ip,k),r.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(k){var o;return this._map=k,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),o=this._setupUI,Vr!==void 0?o(Vr):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(h=>{Vr=h.state!=="denied",o(Vr)}):(Vr=!!window.navigator.geolocation,o(Vr)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),y.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,cl=0,Us=!1}_isOutOfMapMaxBounds(k){const o=this._map.getMaxBounds(),h=k.coords;return o&&(h.longitude<o.getWest()||h.longitude>o.getEast()||h.latitude<o.getSouth()||h.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(k){if(this._map){if(this._isOutOfMapMaxBounds(k))return this._setErrorState(),this.fire(new r.Event("outofmaxbounds",k)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=k,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(k),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(k),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new r.Event("geolocate",k)),this._finish()}}_updateCamera(k){const o=new r.LngLat(k.coords.longitude,k.coords.latitude),h=k.coords.accuracy,_=this._map.getBearing(),P=r.extend({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(o.toBounds(h),P,{geolocateSource:!0})}_updateMarker(k){if(k){const o=new r.LngLat(k.coords.longitude,k.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=k.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const k=this._map._container.clientHeight/2,o=this._map.unproject([0,k]),h=this._map.unproject([1,k]),_=o.distanceTo(h),P=Math.ceil(2*this._accuracy/_);this._circleElement.style.width=`${P}px`,this._circleElement.style.height=`${P}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(k){if(this._map){if(this.options.trackUserLocation)if(k.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(k.code===3&&Us)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new r.Event("error",k)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(k){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=y.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",k===!1){r.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=y.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Qc(this._dotElement),this._circleElement=y.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Qc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new r.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return r.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":cl--,Us=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let k;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),cl++,cl>1?(k={maximumAge:6e5,timeout:0},Us=!0):(k=this.options.positionOptions,Us=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,k)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:fd,LogoControl:tp,ScaleControl:class{constructor(k){this.options=r.extend({},Ux,k),r.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Jc(this._map,this._container,this.options)}onAdd(k){return this._map=k,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",k.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){y.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(k){this.options.unit=k,Jc(this._map,this._container,this.options)}},FullscreenControl:class{constructor(k){this._fullscreen=!1,k&&k.container&&(k.container instanceof HTMLElement?this._container=k.container:r.warnOnce("Full screen control 'container' must be a DOM element.")),r.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(k){return this._map=k,this._container||(this._container=this._map.getContainer()),this._controlContainer=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){y.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const k=this._fullscreenButton=y.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",k).setAttribute("aria-hidden","true"),k.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const k=this._getTitle();this._fullscreenButton.setAttribute("aria-label",k),this._fullscreenButton.title=k}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(k){this.options=k,r.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(k){return this._map=k,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=y.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){y.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends r.Evented{constructor(k){super(),this.options=r.extend(Object.create(Or),k),r.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(k){return this._map&&this.remove(),this._map=k,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new r.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&y.remove(this._content),this._container&&(y.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new r.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(k){return this._lngLat=r.LngLat.convert(k),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(k){return this.setDOMContent(document.createTextNode(k))}setHTML(k){const o=document.createDocumentFragment(),h=document.createElement("body");let _;for(h.innerHTML=k;_=h.firstChild,_;)o.appendChild(_);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(k){return this.options.maxWidth=k,this._update(),this}setDOMContent(k){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=y.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(k),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(k){this._container&&this._container.classList.add(k)}removeClassName(k){this._container&&this._container.classList.remove(k)}setOffset(k){return this.options.offset=k,this._update(),this}toggleClassName(k){if(this._container)return this._container.classList.toggle(k)}_createCloseButton(){this.options.closeButton&&(this._closeButton=y.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(k){this._update(k.point)}_onMouseMove(k){this._update(k.point)}_onDrag(k){this._update(k.point)}_update(k){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=y.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=y.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(j=>this._container.classList.add(j)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ei(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!k))return;const o=this._pos=this._trackPointer&&k?k:this._map.project(this._lngLat);let h=this.options.anchor;const _=Hl(this.options.offset);if(!h){const j=this._container.offsetWidth,te=this._container.offsetHeight;let ce;ce=o.y+_.bottom.y<te?["top"]:o.y>this._map.transform.height-te?["bottom"]:[],o.x<j/2?ce.push("left"):o.x>this._map.transform.width-j/2&&ce.push("right"),h=ce.length===0?"bottom":ce.join("-")}const P=o.add(_[h]).round();y.setTransform(this._container,`${Di[h]} translate(${P.x}px,${P.y}px)`),Kc(this._container,h,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const k=this._container.querySelector(jm);k&&k.focus()}_onClose(){this.remove()}},Marker:Qc,Style:Ur,LngLat:r.LngLat,LngLatBounds:r.LngLatBounds,Point:r.pointGeometry,MercatorCoordinate:r.MercatorCoordinate,Evented:r.Evented,AJAXError:r.AJAXError,config:r.config,CanvasSource:se,GeoJSONSource:U,ImageSource:H,RasterDEMTileSource:G,RasterTileSource:L,VectorTileSource:$,VideoSource:q,prewarm:function(){Te().acquire(ee)},clearPrewarmedResources:function(){const k=xe;k&&(k.isPreloaded()&&k.numActive()===1?(k.release(ee),xe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return re.workerCount},set workerCount(k){re.workerCount=k},get maxParallelImageRequests(){return r.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(k){r.config.MAX_PARALLEL_IMAGE_REQUESTS=k},clearStorage(k){r.clearTileCache(k)},workerUrl:"",addProtocol(k,o){r.config.REGISTERED_PROTOCOLS[k]=o},removeProtocol(k){delete r.config.REGISTERED_PROTOCOLS[k]}};return lr.extend(eu,{isSafari:r.isSafari,getPerformanceMetrics:r.PerformanceUtils.getPerformanceMetrics}),eu});var u=s;return u})})(e$);var Tk={exports:{}};class t${constructor(e=[],t=i$){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,s=t[e];for(;e>0;){const l=e-1>>1,u=t[l];if(n(s,u)>=0)break;t[e]=u,e=l}t[e]=s}_down(e){const{data:t,compare:n}=this,s=this.length>>1,l=t[e];for(;e<s;){let u=(e<<1)+1,r=t[u];const p=u+1;if(p<this.length&&n(t[p],r)<0&&(u=p,r=t[p]),n(r,l)>=0)break;t[e]=r,e=u}t[e]=l}}function i$(i,e){return i<e?-1:i>e?1:0}const n$=Object.freeze(Object.defineProperty({__proto__:null,default:t$},Symbol.toStringTag,{value:"Module"})),r$=y5(n$);var Wg=r$;Wg.default&&(Wg=Wg.default);Tk.exports=Ck;Tk.exports.default=Ck;function Ck(i,e,t){e=e||1;for(var n,s,l,u,r=0;r<i[0].length;r++){var p=i[0][r];(!r||p[0]<n)&&(n=p[0]),(!r||p[1]<s)&&(s=p[1]),(!r||p[0]>l)&&(l=p[0]),(!r||p[1]>u)&&(u=p[1])}var f=l-n,g=u-s,b=Math.min(f,g),y=b/2;if(b===0){var w=[n,s];return w.distance=0,w}for(var v=new Wg(void 0,s$),T=n;T<l;T+=b)for(var S=s;S<u;S+=b)v.push(new sc(T+y,S+y,y,i));var E=o$(i),x=new sc(n+f/2,s+g/2,0,i);x.d>E.d&&(E=x);for(var A=v.length;v.length;){var D=v.pop();D.d>E.d&&(E=D,t&&console.log("found best %d after %d probes",Math.round(1e4*D.d)/1e4,A)),!(D.max-E.d<=e)&&(y=D.h/2,v.push(new sc(D.x-y,D.y-y,y,i)),v.push(new sc(D.x+y,D.y-y,y,i)),v.push(new sc(D.x-y,D.y+y,y,i)),v.push(new sc(D.x+y,D.y+y,y,i)),A+=4)}t&&(console.log("num probes: "+A),console.log("best distance: "+E.d));var C=[E.x,E.y];return C.distance=E.d,C}function s$(i,e){return e.max-i.max}function sc(i,e,t,n){this.x=i,this.y=e,this.h=t,this.d=a$(i,e,n),this.max=this.d+this.h*Math.SQRT2}function a$(i,e,t){for(var n=!1,s=1/0,l=0;l<t.length;l++)for(var u=t[l],r=0,p=u.length,f=p-1;r<p;f=r++){var g=u[r],b=u[f];g[1]>e!=b[1]>e&&i<(b[0]-g[0])*(e-g[1])/(b[1]-g[1])+g[0]&&(n=!n),s=Math.min(s,l$(i,e,g,b))}return s===0?0:(n?1:-1)*Math.sqrt(s)}function o$(i){for(var e=0,t=0,n=0,s=i[0],l=0,u=s.length,r=u-1;l<u;r=l++){var p=s[l],f=s[r],g=p[0]*f[1]-f[0]*p[1];t+=(p[0]+f[0])*g,n+=(p[1]+f[1])*g,e+=g*3}return e===0?new sc(s[0][0],s[0][1],0,i):new sc(t/e,n/e,0,i)}function l$(i,e,t,n){var s=t[0],l=t[1],u=n[0]-s,r=n[1]-l;if(u!==0||r!==0){var p=((i-s)*u+(e-l)*r)/(u*u+r*r);p>1?(s=n[0],l=n[1]):p>0&&(s+=u*p,l+=r*p)}return u=i-s,r=e-l,u*u+r*r}var c$=typeof $a=="object"&&$a&&$a.Object===Object&&$a,u$=typeof self=="object"&&self&&self.Object===Object&&self;c$||u$||Function("return this")();var d$={exports:{}};(function(i,e){var t=function(){var n={},s=Math.PI/180,l=180/Math.PI,u=6378137,r=20037508342789244e-9;function p(g){return Number(g)===g&&g%1!==0}function f(g){if(g=g||{},this.size=g.size||256,this.expansion=g.antimeridian===!0?2:1,!n[this.size]){var b=this.size,y=n[this.size]={};y.Bc=[],y.Cc=[],y.zc=[],y.Ac=[];for(var w=0;w<30;w++)y.Bc.push(b/360),y.Cc.push(b/(2*Math.PI)),y.zc.push(b/2),y.Ac.push(b),b*=2}this.Bc=n[this.size].Bc,this.Cc=n[this.size].Cc,this.zc=n[this.size].zc,this.Ac=n[this.size].Ac}return f.prototype.px=function(g,b){if(p(b)){var y=this.size*Math.pow(2,b),w=y/2,v=y/360,T=y/(2*Math.PI),S=y,E=Math.min(Math.max(Math.sin(s*g[1]),-.9999),.9999),x=w+g[0]*v,A=w+.5*Math.log((1+E)/(1-E))*-T;return x>S*this.expansion&&(x=S*this.expansion),A>S&&(A=S),[x,A]}else{var w=this.zc[b],E=Math.min(Math.max(Math.sin(s*g[1]),-.9999),.9999),x=Math.round(w+g[0]*this.Bc[b]),A=Math.round(w+.5*Math.log((1+E)/(1-E))*-this.Cc[b]);return x>this.Ac[b]*this.expansion&&(x=this.Ac[b]*this.expansion),A>this.Ac[b]&&(A=this.Ac[b]),[x,A]}},f.prototype.ll=function(g,b){if(p(b)){var y=this.size*Math.pow(2,b),w=y/360,v=y/(2*Math.PI),T=y/2,S=(g[1]-T)/-v,E=(g[0]-T)/w,x=l*(2*Math.atan(Math.exp(S))-.5*Math.PI);return[E,x]}else{var S=(g[1]-this.zc[b])/-this.Cc[b],E=(g[0]-this.zc[b])/this.Bc[b],x=l*(2*Math.atan(Math.exp(S))-.5*Math.PI);return[E,x]}},f.prototype.bbox=function(g,b,y,w,v){w&&(b=Math.pow(2,y)-1-b);var T=[g*this.size,(+b+1)*this.size],S=[(+g+1)*this.size,b*this.size],E=this.ll(T,y).concat(this.ll(S,y));return v==="900913"?this.convert(E,"900913"):E},f.prototype.xyz=function(g,b,y,w){w==="900913"&&(g=this.convert(g,"WGS84"));var v=[g[0],g[1]],T=[g[2],g[3]],S=this.px(v,b),E=this.px(T,b),x=[Math.floor(S[0]/this.size),Math.floor((E[0]-1)/this.size)],A=[Math.floor(E[1]/this.size),Math.floor((S[1]-1)/this.size)],D={minX:Math.min.apply(Math,x)<0?0:Math.min.apply(Math,x),minY:Math.min.apply(Math,A)<0?0:Math.min.apply(Math,A),maxX:Math.max.apply(Math,x),maxY:Math.max.apply(Math,A)};if(y){var C={minY:Math.pow(2,b)-1-D.maxY,maxY:Math.pow(2,b)-1-D.minY};D.minY=C.minY,D.maxY=C.maxY}return D},f.prototype.convert=function(g,b){return b==="900913"?this.forward(g.slice(0,2)).concat(this.forward(g.slice(2,4))):this.inverse(g.slice(0,2)).concat(this.inverse(g.slice(2,4)))},f.prototype.forward=function(g){var b=[u*g[0]*s,u*Math.log(Math.tan(Math.PI*.25+.5*g[1]*s))];return b[0]>r&&(b[0]=r),b[0]<-20037508342789244e-9&&(b[0]=-20037508342789244e-9),b[1]>r&&(b[1]=r),b[1]<-20037508342789244e-9&&(b[1]=-20037508342789244e-9),b},f.prototype.inverse=function(g){return[g[0]*l/u,(Math.PI*.5-2*Math.atan(Math.exp(-g[1]/u)))*l]},f}();i.exports=t})(d$);var AT={exports:{}};(function(i,e){(function(t,n){n(e,i)})($a,function(t,n){var s={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function l(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function u(f){try{delete window[f]}catch{window[f]=void 0}}function r(f){var g=document.getElementById(f);g&&document.getElementsByTagName("head")[0].removeChild(g)}function p(f){var g=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],b=f,y=g.timeout||s.timeout,w=g.jsonpCallback||s.jsonpCallback,v=void 0;return new Promise(function(T,S){var E=g.jsonpCallbackFunction||l(),x=w+"_"+E;window[E]=function(D){T({ok:!0,json:function(){return Promise.resolve(D)}}),v&&clearTimeout(v),r(x),u(E)},b+=b.indexOf("?")===-1?"?":"&";var A=document.createElement("script");A.setAttribute("src",""+b+w+"="+E),g.charset&&A.setAttribute("charset",g.charset),g.nonce&&A.setAttribute("nonce",g.nonce),g.referrerPolicy&&A.setAttribute("referrerPolicy",g.referrerPolicy),g.crossorigin&&A.setAttribute("crossorigin","true"),A.id=x,document.getElementsByTagName("head")[0].appendChild(A),v=setTimeout(function(){S(new Error("JSONP request to "+f+" timed out")),u(E),r(x),window[E]=function(){u(E)}},y),A.onerror=function(){S(new Error("JSONP request to "+f+" failed")),u(E),r(x),v&&clearTimeout(v)}})}n.exports=p})})(AT,AT.exports);var h$=f$,p$=Object.prototype.hasOwnProperty;function f$(){for(var i={},e=0;e<arguments.length;e++){var t=arguments[e];for(var n in t)p$.call(t,n)&&(i[n]=t[n])}return i}var Sk={exports:{}};(function(i,e){(function(){var t={};i.exports=t,t.simpleFilter=function(n,s){return s.filter(function(l){return t.test(n,l)})},t.test=function(n,s){return t.match(n,s)!==null},t.match=function(n,s,l){l=l||{};var u=0,r=[],p=s.length,f=0,g=0,b=l.pre||"",y=l.post||"",w=l.caseSensitive&&s||s.toLowerCase(),v;n=l.caseSensitive&&n||n.toLowerCase();for(var T=0;T<p;T++)v=s[T],w[T]===n[u]?(v=b+v+y,u+=1,g+=1+g):g=0,f+=g,r[r.length]=v;return u===n.length?(f=w===n?1/0:f,{rendered:r.join(""),score:f}):null},t.filter=function(n,s,l){return!s||s.length===0?[]:typeof n!="string"?s:(l=l||{},s.reduce(function(u,r,p,f){var g=r;l.extract&&(g=l.extract(r));var b=t.match(n,g,l);return b!=null&&(u[u.length]={string:b.rendered,score:b.score,index:p,original:r}),u},[]).sort(function(u,r){var p=r.score-u.score;return p||u.index-r.index}))}})()})(Sk);var m$=Sk.exports,Ma=function(i){return this.component=i,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,i.el.parentNode.insertBefore(this.wrapper,i.el.nextSibling),this};Ma.prototype.show=function(){this.element.style.display="block"};Ma.prototype.hide=function(){this.element.style.display="none"};Ma.prototype.add=function(i){this.items.push(i)};Ma.prototype.clear=function(){this.items=[],this.active=0};Ma.prototype.isEmpty=function(){return!this.items.length};Ma.prototype.isVisible=function(){return this.element.style.display==="block"};Ma.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var i=0;i<this.items.length;i++)this.drawItem(this.items[i],this.active===i);this.show()};Ma.prototype.drawItem=function(i,e){var t=document.createElement("li"),n=document.createElement("a");e&&(t.className+=" active"),n.innerHTML=i.string,t.appendChild(n),this.element.appendChild(t),t.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),t.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,i)}).bind(this))};Ma.prototype.handleMouseUp=function(i){this.selectingListItem=!1,this.component.value(i.original),this.clear(),this.draw()};Ma.prototype.move=function(i){this.active=i,this.draw()};Ma.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};Ma.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};Ma.prototype.drawError=function(i){var e=document.createElement("li");e.innerHTML=i,this.element.appendChild(e),this.show()};var g$=Ma,y$=h$,x$=m$,b$=g$,Qs=function(i,e,t){return t=t||{},this.options=y$({minLength:2,limit:5,filter:!0,hideOnBlur:!0},t),this.el=i,this.data=e||[],this.list=new b$(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(n){this.handleKeyUp(n.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(n){this.handleKeyDown(n)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(n){this.handlePaste(n)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};Qs.prototype.handleKeyUp=function(i){i===40||i===38||i===27||i===13||i===9||this.handleInputChange(this.el.value)};Qs.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};Qs.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};Qs.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(i.target.value)},100)}};Qs.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(e){for(var t=0;t<e.length&&(this.list.add(e[t]),t!==this.options.limit-1);t++);this.list.draw()}).bind(this))};Qs.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};Qs.prototype.update=function(i){this.data=i,this.handleKeyUp()};Qs.prototype.clear=function(){this.data=[],this.list.clear()};Qs.prototype.normalize=function(i){return i=i.toLowerCase(),i};Qs.prototype.match=function(i,e){return i.indexOf(e)>-1};Qs.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")};Qs.prototype.getCandidates=function(i){var e={pre:"<strong>",post:"</strong>",extract:(function(n){return this.getItemValue(n)}).bind(this)},t;this.options.filter?(t=x$.filter(this.query,this.data,e),t=t.map((function(n){return{original:n.original,string:this.render(n.original,n.string)}}).bind(this))):t=this.data.map((function(n){var s=this.render(n);return{original:n,string:s}}).bind(this)),i(t)};Qs.prototype.getItemValue=function(i){return i};Qs.prototype.render=function(i,e){if(e)return e;for(var t=i.original?this.getItemValue(i.original):this.getItemValue(i),n=this.normalize(t),s=n.lastIndexOf(this.query);s>-1;){var l=s+this.query.length;t=t.slice(0,s)+"<strong>"+t.slice(s,l)+"</strong>"+t.slice(l),s=n.slice(0,s).lastIndexOf(this.query)}return t};Qs.prototype.renderError=function(i){this.list.drawError(i)};var v$=Qs,_$=v$;typeof window<"u"&&(window.Suggestions=_$);var Ek={exports:{}};(function(i,e){(function(t,n){n()})($a,function(){function t(f,g){return typeof g>"u"?g={autoBom:!1}:typeof g!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),g={autoBom:!g}),g.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function n(f,g,b){var y=new XMLHttpRequest;y.open("GET",f),y.responseType="blob",y.onload=function(){p(y.response,g,b)},y.onerror=function(){console.error("could not download file")},y.send()}function s(f){var g=new XMLHttpRequest;g.open("HEAD",f,!1);try{g.send()}catch{}return 200<=g.status&&299>=g.status}function l(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(g)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof $a=="object"&&$a.global===$a?$a:void 0,r=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),p=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(f,g,b){var y=u.URL||u.webkitURL,w=document.createElement("a");g=g||f.name||"download",w.download=g,w.rel="noopener",typeof f=="string"?(w.href=f,w.origin===location.origin?l(w):s(w.href)?n(f,g,b):l(w,w.target="_blank")):(w.href=y.createObjectURL(f),setTimeout(function(){y.revokeObjectURL(w.href)},4e4),setTimeout(function(){l(w)},0))}:"msSaveOrOpenBlob"in navigator?function(f,g,b){if(g=g||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(t(f,b),g);else if(s(f))n(f,g,b);else{var y=document.createElement("a");y.href=f,y.target="_blank",setTimeout(function(){l(y)})}}:function(f,g,b,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof f=="string")return n(f,g,b);var w=f.type==="application/octet-stream",v=/constructor/i.test(u.HTMLElement)||u.safari,T=/CriOS\/[\d]+/.test(navigator.userAgent);if((T||w&&v||r)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var A=S.result;A=T?A:A.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=A:location=A,y=null},S.readAsDataURL(f)}else{var E=u.URL||u.webkitURL,x=E.createObjectURL(f);y?y.location=x:location.href=x,y=null,setTimeout(function(){E.revokeObjectURL(x)},4e4)}});u.saveAs=p.saveAs=p,i.exports=p})})(Ek);var w$=Ek.exports;const T$=dh(w$),C$="_errorChap_1v22m_1",S$="_errorBar_1v22m_6",E$="_errorHeader_1v22m_16",k$="_detailedError_1v22m_23",A$="_scrollMissingData_1v22m_29",M$="_notFoundDataTable_1v22m_34",Nd={errorChap:C$,errorBar:S$,errorHeader:E$,detailedError:k$,scrollMissingData:A$,notFoundDataTable:M$},P$="_buttons_1a7lz_1",I$="_text_1a7lz_7",MT={buttons:P$,text:I$},D$=({startDownload:i,isSendingDataToChap:e,formValid:t,orgUnits:n,onClickDownloadOrPostData:s,onButtonSendAction:l})=>{const u=()=>{if(n.length===0)return!0;const f=n[0].path.split("/").length;return n.every(g=>g.path.split("/").length===f)},r=l==="predict"?"Send prediction":"Create dataset",p=l==="predict"?he.jsx(By,{}):he.jsx(kv,{});return he.jsxs("div",{children:[he.jsxs("div",{className:MT.buttons,children:[he.jsx(Jn,{icon:he.jsx(bC,{}),loading:i.startDownload&&i.action==="download",disabled:!t||i.startDownload||!u(),onClick:()=>s("download"),children:"Download data"}),he.jsx(Jn,{icon:p,primary:!0,loading:i.startDownload&&i.action===l||e,disabled:!t||i.startDownload||!u(),onClick:()=>s(l),children:r})]}),e&&he.jsx("p",{className:MT.text,children:"Sending data.."})]})},kk=({onSendAction:i,onDrawerSubmit:e,selectedModel:t,name:n,selectedPeriodItems:s,selectedOrgUnits:l,orgUnitLevel:u,dataLayers:r})=>{const[p,f]=$e.useState({action:"download",startDownload:!1}),[g,b]=$e.useState(!1),[y,w]=$e.useState(void 0),[v,T]=$e.useState(),[S,E]=$e.useState({}),x=r.filter(pe=>pe.origin==="dataItem"),[A,D]=$e.useState([]),[C,I]=$e.useState([]),[N,W]=$e.useState(""),Y=()=>!(u===void 0||l.length==0||s.length==0||n===""||s.length==0||r.length==0||r.some(pe=>pe.feature===""||pe.dataSource===""||pe.origin==="")),X=pe=>{w(void 0),T(void 0),I([]),f({action:pe,startDownload:!0})};$e.useEffect(()=>{if(y&&v){if(W(""),f(pe=>({...pe,startDownload:!1})),p.action==="download"){se();return}if(V(y))return;p.action==="predict"&&q(),p.action==="new-dataset"&&H()}},[y,v]);const O=(pe,ne,le,ke)=>{var K;const be=[],Ee=[...new Set(pe.map(J=>J.orgUnit))];s.forEach(J=>{Ee.forEach(oe=>{var ee;let we=!0;pe.filter(re=>re.featureName===le).forEach(re=>{if(J.id==re.period){we=!1;return}}),we&&be.push({covariate:ke,orgUnitName:((ee=S[oe])==null?void 0:ee.name)||"",period:J.id})})}),be.length>0&&ne.push({title:ke+" is missing for the following orgUnit and time periods: ",description:he.jsxs("div",{children:[he.jsxs("p",{children:["Total missing: ",be.length," | Use the"," ",he.jsx("a",{target:"_blank",href:((K=$==null?void 0:$.systemInfo)==null?void 0:K.contextPath)+"/api/apps/climate-data/index.html#/import",children:"Climate App"})," ","to import climate data."]}),he.jsx("div",{className:Nd.scrollMissingData,children:he.jsxs("table",{className:Nd.notFoundDataTable,children:[he.jsx("thead",{children:he.jsxs("tr",{children:[he.jsx("th",{children:"Organisation unit:"}),he.jsx("th",{children:"Time period:"})]})}),he.jsx("tbody",{children:be.map(J=>he.jsxs("tr",{children:[he.jsx("td",{children:J.orgUnitName}),he.jsx("td",{children:B1({periodId:J.period,calendar:"gregory"}).displayName})]}))})]})})]})})},V=pe=>{let ne=[];return r.filter(le=>le.origin=="dataItem").forEach(le=>{var ke;if(((ke=pe.filter(be=>be.featureName===le.feature))==null?void 0:ke.length)===0){const be='Thes selected data item for covarate "'+le.feature+'" returned no data.';ne.push({description:"Ensure you have exported the analytics tables in DHIS2.",title:be})}}),r.find(le=>le.feature==="rainfall"&&le.origin=="dataItem")&&O(pe,ne,"rainfall","Rainfall"),r.find(le=>le.feature==="mean_temperature"&&le.origin=="dataItem")&&O(pe,ne,"mean_temperature","Mean Temperature"),ne.length>0?(I([...C,...ne]),!0):!1},$=jy(),L=()=>{var pe,ne;return{appVersion:((pe=$==null?void 0:$.appVersion)==null?void 0:pe.full)||"Unknown",dhis2Version:((ne=$==null?void 0:$.systemInfo)==null?void 0:ne.version)||"Unknown",dataItemMapper:A}},R=()=>({name:n,dataToBeFetched:B(),metaData:L(),providedData:y,geojson:v}),G=()=>R(),U=()=>({type:"predict",modelId:t==null?void 0:t.name,...R()}),B=()=>r.filter(pe=>pe.origin==="CHAP").map(pe=>({dataSourceName:pe.dataSource,featureName:pe.feature})),H=async()=>{let pe=G();b(!0),await sh.makeDatasetAnalyticsMakeDatasetPost(pe).then(ne=>{W(""),e()}).catch(ne=>{var le,ke;(le=ne==null?void 0:ne.body)!=null&&le.detail?W(JSON.stringify((ke=ne==null?void 0:ne.body)==null?void 0:ke.detail)):W("An error occured while sending the request to CHAP Core.")}).finally(()=>{b(!1)})},q=async()=>{let pe=U();b(!0),await sh.makePredictionAnalyticsMakePredictionPost(pe).then(ne=>{e()}).catch(ne=>{var le,ke;(le=ne==null?void 0:ne.body)!=null&&le.detail?W(JSON.stringify((ke=ne==null?void 0:ne.body)==null?void 0:ke.detail)):W("An error occured while sending the request to CHAP Core.")}).finally(()=>{b(!1)})},se=()=>{let pe={};i==="predict"&&(pe=U()),i==="new-dataset"&&(pe=G());var ne=new Blob([JSON.stringify(pe,null,2)],{type:"application/json"});const le=new Date;T$(ne,i.replaceAll("-","_")+"_chap_request_data_"+le.toJSON()+".json")};return he.jsxs("div",{children:[he.jsx(D$,{formValid:Y(),onButtonSendAction:i,onClickDownloadOrPostData:X,orgUnits:l,isSendingDataToChap:g,startDownload:p}),he.jsx("p",{className:Nd.errorChap,children:N}),p.startDownload&&Y()&&he.jsx(uj,{setAnalyticsMetaData:E,setFeatureDataItemMapper:D,model_id:t==null?void 0:t.name,setObservations:w,setGeoJSon:T,analyticsDataLayers:x,startDownload:p,setStartDownload:f,selectedPeriodItems:s,setErrorMessages:I,selectedOrgUnits:l,orgUnitLevel:u}),C.map((pe,ne)=>he.jsxs("div",{className:Nd.errorBar,children:[he.jsxs("div",{className:Nd.errorHeader,children:[he.jsx(wC,{}),he.jsx("span",{children:pe.title})]}),he.jsx("span",{className:Nd.detailedError,children:pe.description})]},ne))]})},R$="_dataLineWrapper_epwpx_1",L$="_selectField_epwpx_9",z$="_buttonRight_epwpx_13",N$="_selectDataLineWrapper_epwpx_19",O$="_predictLabel_epwpx_27",Mp={dataLineWrapper:R$,selectField:L$,buttonRight:z$,selectDataLineWrapper:N$,predictLabel:O$},j$="_searchSelectField_fpa7s_1",F$="_inputField_fpa7s_6",B$="_input_fpa7s_6",$$="_dropDown_fpa7s_33",U$="_dropDownItem_fpa7s_50",V$="_rightDropDownItem_fpa7s_60",G$="_label_fpa7s_69",H$="_infoSearchItem_fpa7s_75",vl={searchSelectField:j$,inputField:F$,input:B$,dropDown:$$,dropDownItem:U$,rightDropDownItem:V$,label:G$,infoSearchItem:H$},q$=i=>({results:{resource:"dataItems",params:{filter:"displayName:ilike:"+i,fields:"id,displayName,dimensionItemType",order:"displayName:asc",page:1,pageSize:20}}}),W$=({feature:i,onChangeSearchSelectField:e})=>{const[t,n]=$e.useState(""),s=uh(),[l,u]=$e.useState([]),[r,p]=$e.useState(!1),f=async()=>{try{const x=await s.query(q$(t));u(x.results.dataItems)}catch(x){console.error("Error fetching data:",x)}finally{p(!1)}};$e.useEffect(()=>{if(t.length===0){u([]);return}p(!0);const x=setTimeout(()=>{f()},300);return()=>{clearTimeout(x)}},[t]);const[g,b]=$e.useState(!1),y=x=>{b(!0);const A=x.target.value;n(A)},w=x=>{n(x.displayName),e(i,x.id,x.displayName),b(!1)},v=$e.useRef(null),T=x=>x.replaceAll("_"," ").split(" ").map(A=>A.charAt(0).toUpperCase()+A.slice(1).toLowerCase()).join(" "),S=x=>{v.current&&!v.current.contains(x.target)&&b(!1)},E=()=>r?he.jsx("li",{className:vl.infoSearchItem,children:"Loading..."}):l.length==0&&t.length==0?he.jsx("li",{className:vl.infoSearchItem,children:"Start to search by typing"}):l.length==0?he.jsx("li",{className:vl.infoSearchItem,children:"No match found"}):he.jsx(he.Fragment,{children:l.map(x=>he.jsxs("li",{onClick:()=>w(x),className:vl.dropDownItem,children:[he.jsx("div",{children:x.displayName}),he.jsx("div",{className:vl.rightDropDownItem,children:T(x.dimensionItemType)??""})]},x.id))});return $e.useEffect(()=>(document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}),[]),he.jsxs("div",{ref:v,className:vl.searchSelectField,children:[he.jsx("label",{className:vl.label,children:he.jsx("span",{children:T(i.name??"")})}),he.jsx("input",{type:"search",value:t,onChange:y,placeholder:"Search for indicators, Data Elements, Data Sets, Event Data Items, Program Indicators...",className:vl.inputField}),g&&he.jsx("ul",{className:vl.dropDown,children:E()})]})},Ak=({datasetLayers:i,setDataLayers:e,predictMode:t})=>{const[n,s]=$e.useState([]),l=async()=>{await sh.getDataSourcesAnalyticsDataSourcesGet().then(p=>{s(p)})};$e.useEffect(()=>{l()},[]);const u=(p,f,g)=>{let b=[...i];p.selected!=null&&(b[g][f]=p.selected,e(b))},r=(p,f)=>{u({selected:p},"dataSource",f)};return he.jsxs("div",{children:[he.jsx("h3",{children:"Covariates"}),he.jsx("div",{className:Mp.selectDataLineWrapper,children:i.map((p,f)=>{var g,b,y;return he.jsx("div",{children:he.jsxs("div",{className:Mp.dataLineWrapper,children:[t?he.jsx("div",{className:Mp.predictLabel,children:((g=Yg.filter(w=>w.id===p.feature)[0])==null?void 0:g.name)+":"}):he.jsx("div",{className:Mp.predictLabel,children:((b=Yg.filter(w=>w.id===p.feature)[0])==null?void 0:b.name)+":"}),he.jsxs("div",{className:Mp.selectField,children:[(p.origin==="CHAP"||p.origin==="")&&he.jsx(hs,{disabled:p.origin==="",label:"Data Element",onChange:w=>u(w,"dataSource",f),selected:p.dataSource,children:n.map(w=>w.supportedFeatures.includes(p.feature)&&he.jsx(_o,{label:`${w.dataset.toUpperCase()} - ${w.displayName}`,value:w.dataset},w.name))}),p.origin==="dataItem"&&he.jsx(W$,{feature:{name:(y=Yg.filter(w=>w.id===p.feature)[0])==null?void 0:y.name,id:p.feature,description:""},onChangeSearchSelectField:(w,v)=>r(v,f)})]})]})},f)})})]})},Yg=[{id:"rainfall",name:"Rainfall",description:"The amount of rainfall in mm",optional:!0},{id:"mean_temperature",name:"Mean Temperature",description:"The average temperature in degrees Celsius",optional:!0},{id:"population",name:"Population",description:"The population of the area",optional:!1},{name:"Disease cases",id:"disease_cases",description:"Feature 5"}],Y$=()=>Yg.map(e=>({feature:e.id,origin:"dataItem",dataSource:""})),Z$=({onDrawerSubmit:i})=>{const[e,t]=$e.useState(Y$()),[n,s]=$e.useState([]),[l,u]=$e.useState([]),[r,p]=$e.useState(void 0),[f,g]=$e.useState("");return he.jsx(he.Fragment,{children:he.jsxs("div",{className:P9.formWrapper,children:[he.jsx(Df,{autoComplete:"",label:"Dataset name",value:f,onChange:b=>g(b.value),helpText:"Name your dataset",placeholder:"Example: Monthly malaria cases, ERA5 climate data, all districts"}),he.jsx(Ak,{setDataLayers:t,datasetLayers:e}),he.jsx(x3,{setTimePeriods:u}),he.jsx(b3,{orgUnits:n,setOrgUnits:s,orgUnitLevel:r,setOrgUnitLevel:p}),he.jsx(kk,{onDrawerSubmit:i,name:f,dataLayers:e,onSendAction:"new-dataset",orgUnitLevel:r,selectedPeriodItems:l,selectedOrgUnits:n})]})})},X$="_newDatasetWrapper_1jun0_1",K$="_newEvaluationDatasetTitle_1jun0_5",Q$="_navFooterOuter_1jun0_12",J$="_navFooter_1jun0_12",PT={newDatasetWrapper:X$,newEvaluationDatasetTitle:K$,navFooterOuter:Q$,navFooter:J$},eU=({onDrawerClose:i,onDrawerSubmit:e})=>he.jsx(he.Fragment,{children:he.jsxs("div",{className:PT.newDatasetWrapper,children:[he.jsxs("div",{className:PT.newEvaluationDatasetTitle,children:[he.jsx("h2",{children:"New evaluation dataset"}),he.jsx(Jn,{icon:he.jsx(Sv,{}),onClick:i})]}),he.jsx(Z$,{onDrawerSubmit:e})]})}),tU=({isOpen:i,onDrawerSubmit:e,onDrawerClose:t})=>{const n=window.innerWidth<900?"100vw":"1000px";return he.jsx("div",{children:he.jsx(N1,{open:i,onClose:t,direction:"right",size:n,children:he.jsx("div",{className:k9.drawerWrapper,children:he.jsx(eU,{onDrawerClose:t,onDrawerSubmit:e})})})})},iU="_pageHeader_1or2f_1",nU="_pageDescription_1or2f_8",IT={pageHeader:iU,pageDescription:nU},lv=({pageTitle:i,pageDescription:e,setDrawerOpen:t,setDrawerOpenText:n})=>he.jsxs("div",{className:IT.pageHeader,children:[he.jsxs("div",{children:[he.jsx("h2",{children:i}),he.jsx("p",{className:IT.pageDescription,children:e})]}),t&&n&&he.jsx(Jn,{onClick:()=>t(!0),icon:he.jsx(Ev,{}),primary:!0,children:n})]}),rU="_jobResultPanelContainer_16af9_1",sU="_boxPanel_16af9_9",aU="_flexMedium_16af9_17",oU="_flexItemRight_16af9_21",lU="_inProgress_16af9_26",cU="_notStarted_16af9_31",uU="_completed_16af9_36",dU="_failed_16af9_41",hU="_resultTextHeader_16af9_46",pU="_evaluationModal_16af9_53",fU="_jobLogsModal_16af9_58",ac={jobResultPanelContainer:rU,boxPanel:sU,flexMedium:aU,flexItemRight:oU,inProgress:lU,notStarted:cU,completed:uU,failed:dU,resultTextHeader:hU,evaluationModal:pU,jobLogsModal:fU},mU="_modal_1k0a4_1",gU={modal:mU},yU="_container_mngpy_1",xU="_innerContainer_mngpy_6",bU="_prediction_mngpy_21",vU="_warning_mngpy_26",_U="_footer_mngpy_31",wU="_post_mngpy_36",TU="_redText_mngpy_40",CU="_greenText_mngpy_45",ic={container:yU,innerContainer:xU,prediction:bU,warning:vU,footer:_U,post:wU,redText:TU,greenText:CU},SU={orgUnits:{resource:"organisationUnits",params:{paging:!1,fields:["id","displayName"]}}},Mk=()=>{const[i,e]=$e.useState(),{loading:t,error:n}=Aa(SU,{onComplete:s=>e(s.orgUnits)});return{orgUnits:i,error:n,loading:t}},EU=({prediction:i,qLowDataElementId:e,qMedianDataElementId:t,qHighDataElementId:n,setPostHttpError:s,setPostStatus:l})=>{const u=v=>{if(v==="quantile_low")return e;if(v==="median")return t;if(v==="quantile_high")return n},r=v=>v.dataValues.map(T=>({dataElement:u(T.dataElement),period:T.period,orgUnit:T.orgUnit,value:T.value})),p=v=>({resource:"dataValueSets",type:"create",data:{dataValues:v}}),[f,{error:g,loading:b,called:y}]=nE(p(r(i))),w=async()=>{await f()};return $e.useEffect(()=>{w()},[]),$e.useEffect(()=>{y&&(b||(g&&(s("Something went wrong when posting the prediction."),l("error")),g||(s(""),l("finish"))))},[b]),null},kU="_selectWrapper_8vdsv_1",AU="_select_8vdsv_1",DT={selectWrapper:kU,select:AU},J0=({value:i,onChange:e,label:t,dataElements:n})=>{const s=u=>{e({displayName:n==null?void 0:n.find(r=>r.id===u.selected).displayName,id:u.selected})},l=(n==null?void 0:n.length)===0&&n!=null;return he.jsx("div",{children:he.jsx("div",{children:he.jsx("div",{className:DT.select,children:he.jsxs("div",{className:DT.selectWrapper,children:[he.jsx("span",{children:t}),he.jsx(hs,{tabIndex:"1",placeholder:Qe.t("Select data element"),disabled:l,selected:i?i.id:"",warning:l,onChange:s,children:n==null?void 0:n.map(u=>he.jsx(_o,{label:u.displayName,value:u.id},u.id))})]})})})})},MU="_textWarning_3ldzr_1",PU="_wrapper_3ldzr_6",IU="_wrapperWarning_3ldzr_14",eb={textWarning:MU,wrapper:PU,wrapperWarning:IU},DU="_dataValueTables_11n8g_3",RU="_warning_11n8g_10",RT={dataValueTables:DU,warning:RU},LU=({setModalOpen:i,modalOpen:e,predictionTarget:t})=>{const n=jy();return e&&he.jsx(ku,{large:!0,onClose:()=>i(!1),children:he.jsxs(Ny,{children:[he.jsx("h2",{children:Qe.t("Add required Data Elements")}),he.jsxs("p",{children:[Qe.t("This app requires specific DHIS2 Data Elements to import data into. If you have not already added them, go to the "),he.jsx("a",{target:"_blank",href:`${n.baseUrl}/dhis-web-maintenance/index.html#/list/dataElementSection/dataElement`,children:"Maintenance"}),Qe.t("-app and create the Data Elements listed below.")]}),he.jsx("p",{className:RT.warning,children:Qe.t("NB! Make sure the CODE property for each data element is exactly the same as below.")}),he.jsx("p",{children:Qe.t("Properties in the new Data Element form not specified in the tables below should have the default value.")}),he.jsxs("div",{className:RT.dataValueTables,children:[he.jsx(tb,{q:"Low",disease:t}),he.jsx(tb,{q:"Median",disease:t}),he.jsx(tb,{q:"High",disease:t})]})]})})},tb=({q:i,disease:e})=>he.jsx("table",{children:he.jsxs("tbody",{children:[he.jsxs("tr",{children:[he.jsx("th",{children:Qe.t("Name")}),he.jsxs("td",{children:["CHAP",Qe.t(` ${e} Quantile ${i}`)]})]}),he.jsxs("tr",{children:[he.jsx("th",{children:Qe.t("Short name")}),he.jsxs("td",{children:["CHAP",Qe.t(` ${e} Quantile ${i}`)]})]}),he.jsxs("tr",{children:[he.jsx("th",{children:Qe.t("Code")}),he.jsx("td",{children:`CHAP_${i.toUpperCase()}_${e.toLocaleUpperCase().replaceAll(" ","_")}`})]}),he.jsxs("tr",{children:[he.jsx("th",{children:Qe.t("Domain type")}),he.jsx("td",{children:Qe.t("Aggregate")})]}),he.jsxs("tr",{children:[he.jsx("th",{children:Qe.t("Aggregation levels")}),he.jsx("td",{children:he.jsx("em",{children:Qe.t("Assign all org unit levels")})})]})]})}),zU=({predictionTarget:i,warning:e})=>{const[t,n]=$e.useState(!1);return he.jsxs(he.Fragment,{children:[he.jsxs("div",{className:e?eb.wrapperWarning:eb.wrapper,children:[he.jsx("div",{className:eb.textWarning,children:e&&he.jsx(he.Fragment,{children:he.jsx("p",{children:Qe.t("It seems like you missing Data Elements for CHAP prediction.")})})}),he.jsx("div",{children:he.jsx(Jn,{icon:he.jsx(kv,{}),onClick:()=>n(!0),children:Qe.t("Add data elements")})})]}),he.jsx(LU,{modalOpen:t,setModalOpen:n,predictionTarget:i})]})},NU=i=>({dataElements:{resource:"dataElements",params:{paging:!1,fields:["code","displayName","id"],filter:`code:ilike:${i}`}}}),ib=i=>{const[e,t]=$e.useState(),{loading:n,error:s}=Aa(NU(i),{onComplete:l=>t(l.dataElements.dataElements)});return{dataElements:e,error:s,loading:n}},OU=i=>({dataItems:{resource:"dataItems",params:{paging:!1,filter:`id:eq:${i}`}}}),jU=i=>{const[e,t]=$e.useState(),{loading:n,error:s,engine:l}=Aa({});$e.useEffect(()=>{i&&u()},[i]);const u=async()=>{const r=await l.query(OU(i));r.dataItems.dataItems.length===0?t("?"):t(r.dataItems.dataItems[0].displayName)};return{displayName:e,error:s,loading:n}},FU=({prediction_unprocessed:i})=>{var G;const e=zl(),[t,n]=$e.useState("chart"),[s,l]=$e.useState(),[u,r]=$e.useState(null),[p,f]=$e.useState(null),[g,b]=$e.useState(null),y=(U,B)=>{if(!B)return 0;const H=[...B].sort((le,ke)=>le-ke),q=H.length,se=U*(q-1),pe=Math.floor(se),ne=Math.ceil(se);return Math.round(pe===ne?H[pe]:H[pe]+(H[ne]-H[pe])*(se-pe))},w=[{q:.1,name:"quantile_low"},{q:.5,name:"median"},{q:.9,name:"quantile_high"}],v=()=>{var U,B;return((B=(U=i==null?void 0:i.metaData)==null?void 0:U.dataItemMapper)==null?void 0:B.find(H=>H.featureName==="disease_cases").dataItemId)??""},T=()=>({diseaseId:A,dataValues:i.forecasts.flatMap(U=>w.map(B=>({orgUnit:U.orgUnit,value:y(B.q,U.values),displayName:U.orgUnit,dataElement:B.name,period:U.period})))}),{dataElements:S}=ib("CHAP_LOW"),{dataElements:E}=ib("CHAP_MEDIAN"),{dataElements:x}=ib("CHAP_HIGH"),A=v(),{displayName:D}=jU(A),{orgUnits:C,loading:I}=Mk(),[N,W]=$e.useState("initial"),[Y,X]=$e.useState("");$e.useEffect(()=>{C&&V()},[(G=e==null?void 0:e.state)==null?void 0:G.data,C]);const O=()=>(S==null?void 0:S.length)===0||(E==null?void 0:E.length)===0||(x==null?void 0:x.length)===0,V=async U=>{W("initial")};$e.useEffect(()=>{D&&C&&i&&l(L(T()))},[D,C,i]),$e.useEffect(()=>{if(S&&E&&x&&D){const U=S.find(q=>q.code===`CHAP_LOW_${D.toLocaleUpperCase().replaceAll(" ","_")}`);U&&r(U);const B=E.find(q=>q.code===`CHAP_MEDIAN_${D.toLocaleUpperCase().replaceAll(" ","_")}`);B&&f(B);const H=x.find(q=>q.code===`CHAP_HIGH_${D.toLocaleUpperCase().replaceAll(" ","_")}`);H&&b(H)}},[S,E,x,D]);const $=()=>!u&&!p&&!g?!1:!!(u&&!(u!=null&&u.displayName.includes(D))||p&&!(p!=null&&p.displayName.includes(D))||g&&!(g!=null&&g.displayName.includes(D))),L=U=>({dataValues:U.dataValues.map(B=>{var H;return{...B,displayName:(H=C==null?void 0:C.organisationUnits.find(q=>q.id===B.orgUnit))==null?void 0:H.displayName}}),diseaseId:U.diseaseId}),R=()=>!!(u&&p&&g);return he.jsx("div",{className:ic.container,children:he.jsxs("div",{className:ic.innerContainer,children:[I&&he.jsx("p",{children:"Loading metadata from DHIS2.. "}),he.jsxs("h1",{children:["Prediction: ",i.name]}),s&&he.jsxs(he.Fragment,{children:[he.jsxs(x1,{scrollable:!0,children:[he.jsx(nh,{selected:t==="chart",onClick:()=>n("chart"),children:"Chart"}),he.jsx(nh,{selected:t==="table",onClick:()=>n("table"),children:"Table"})]}),he.jsx("div",{className:ic.prediction,children:{chart:he.jsx(OF,{predictionTargetName:D,data:s}),table:he.jsx(J7,{data:s}),map:he.jsx(he.Fragment,{})}[t]}),he.jsx("h3",{children:Qe.t("Select which data element prediction should be imported to:")}),he.jsx(zU,{warning:O(),predictionTarget:D}),he.jsx(J0,{label:Qe.t("Select data element for low quantile"),dataElements:S,onChange:r,value:u}),he.jsx(J0,{label:Qe.t("Select data element for median quantile"),dataElements:E,onChange:f,value:p}),he.jsx(J0,{label:Qe.t("Select data element for high quantile"),dataElements:x,onChange:b,value:g}),$()&&he.jsx("p",{className:ic.warning,children:"Warning: It seems like selected data elements do not match the disease of prediction."}),he.jsx("div",{className:ic.footer,children:he.jsx(Jn,{onClick:()=>W("loading"),loading:N==="loading",disabled:N==="finish"||N==="loading"||!R(),icon:he.jsx(By,{}),primary:!0,children:Qe.t("Import prediction")})}),N==="loading"&&he.jsx(EU,{setPostHttpError:X,setPostStatus:W,prediction:s,qLowDataElementId:u==null?void 0:u.id,qMedianDataElementId:p==null?void 0:p.id,qHighDataElementId:g==null?void 0:g.id}),he.jsxs("div",{className:ic.post,children:[N==="finish"&&he.jsx("p",{className:ic.greenText,children:Qe.t("Prediction has been imported.")}),he.jsx("p",{className:ic.redText,children:Qe.t(Y)})]})]})]})})},BU=({isImportModalOpen:i,setIsImportModalOpen:e,predictionIdToImport:t})=>{const[n,s]=$e.useState(),l=async u=>{await so.getPredictionCrudPredictionsPredictionIdGet(u).then(r=>{s(r)})};return $e.useEffect(()=>{t&&l(Number(t))},[]),he.jsx("div",{children:i&&he.jsx(he.Fragment,{children:he.jsx(ku,{className:gU.modal,onClose:()=>{e(!1)},children:he.jsx(he.Fragment,{children:n&&he.jsx(FU,{prediction_unprocessed:n})})})})})},$U="_jobResultPanelContainer_8nqrq_1",UU="_boxPanel_8nqrq_9",VU="_flexMedium_8nqrq_17",GU="_flexItemRight_8nqrq_21",HU="_inProgress_8nqrq_29",qU="_notStarted_8nqrq_34",WU="_completed_8nqrq_39",YU="_failed_8nqrq_44",ZU="_resultTextHeader_8nqrq_49",XU="_evaluationModal_8nqrq_56",KU="_jobLogsModal_8nqrq_61",QU="_popupMenuDiv_8nqrq_66",ho={jobResultPanelContainer:$U,boxPanel:UU,flexMedium:VU,flexItemRight:GU,inProgress:HU,notStarted:qU,completed:WU,failed:YU,resultTextHeader:ZU,evaluationModal:XU,jobLogsModal:KU,popupMenuDiv:QU},JU=(i,e)=>{$e.useEffect(()=>{const t=n=>{const s=i.current;!s||s.contains(n.target)||e(n)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}},[i,e])},eV=({i,jobResult:e,onClickEvaluateDataset:t,onClickViewEvaluation:n,onClickImport:s,onClickViewLogs:l,onClickRemove:u})=>{const[r,p]=$e.useState(!1),f=$e.useRef(null),g=$e.useRef(null);JU(g,w=>{var v;(v=f.current)!=null&&v.contains(w.target)||p(!1)});const b=w=>{switch(w){case"STARTED":return ho.inProgress;case"PENDING":return ho.notStarted;case"FAILURE":return ho.failed;default:return ho.completed}},y=w=>{switch(w){case"STARTED":return"In progress..";case"PENDING":return"Pending..";case"FAILURE":return"Failed";default:return"Completed"}};return he.jsx("div",{className:ho.boxPanel,children:he.jsxs("div",{className:ho.jobResultPanelContainer,children:[he.jsx("div",{className:ho.flexMedium,children:e.name}),he.jsx("div",{className:ho.flexMedium,children:e.created.toDateString()+", "+e.created.toLocaleTimeString().slice(0,5)}),he.jsx("div",{className:ho.flexMedium,children:he.jsx("span",{className:b(e.status),children:y(e.status)})}),he.jsxs("div",{className:ho.flexItemRight,children:[{prediction:he.jsx(he.Fragment,{children:e.status=="SUCCESS"&&he.jsx(Jn,{icon:he.jsx(TC,{}),onClick:()=>s(e.result),small:!0,children:"Import"})}),dataset:he.jsx(he.Fragment,{children:e.status=="SUCCESS"&&he.jsx(Jn,{icon:he.jsx(SC,{}),onClick:()=>t(e.result),small:!0,children:"Evaluate"})}),evaluation:he.jsx(he.Fragment,{children:e.status=="SUCCESS"&&he.jsx(Jn,{icon:he.jsx(MC,{}),onClick:()=>n(e.result),small:!0,children:"View"})})}[e.type],e.status!="SUCCESS"&&he.jsx(Jn,{icon:he.jsx(uC,{}),onClick:()=>l(e.id),small:!0,children:"Logs"}),he.jsx("div",{ref:f,children:he.jsx(nB,{enabled:e.status==="STARTED",content:Qe.t("Job is still running. Please wait until it is finished before doing any actions."),children:he.jsx(Jn,{small:!0,icon:he.jsx(CC,{}),disabled:e.status==="STARTED",onClick:()=>p(w=>!w)})})}),r&&he.jsx(Pf,{reference:f,placement:"top-end",children:he.jsx("div",{ref:g,className:ho.popupMenuDiv,children:he.jsx(Cv,{children:["SUCCESS","FAILURE"].includes(e.status)&&he.jsx(Jp,{label:"Delete",icon:he.jsx(xC,{}),destructive:!0,onClick:()=>{p(!1),u(e)}})})})})]})]})},i)},tV="_jobLogs_pzpzf_1",iV="_logContent_pzpzf_7",nb={jobLogs:tV,logContent:iV},Pk=(i,e)=>{const t=$e.useRef(),n=$e.useRef(null),s=()=>{n.current===null&&document.visibilityState==="visible"&&(n.current=setInterval(()=>{t.current&&t.current()},e))},l=()=>{n.current!==null&&(clearInterval(n.current),n.current=null)};$e.useEffect(()=>{t.current=i},[i]),$e.useEffect(()=>{const u=()=>{document.visibilityState==="visible"?s():l()};return document.addEventListener("visibilitychange",u),document.visibilityState==="visible"&&s(),()=>{l(),document.removeEventListener("visibilitychange",u)}},[e])},nV=({jobId:i})=>{const[e,t]=$e.useState(null),[n,s]=$e.useState(null),[l,u]=$e.useState(!1),r=$e.useRef(null),p=async()=>{if(i){console.log("fetching logs");try{const f=await V1.getLogsJobsJobIdLogsGet(i);t(f)}catch(f){s(f.body.detail)}finally{u(!1)}}};return $e.useEffect(()=>{u(!0),s(null),p()},[i]),$e.useEffect(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[e]),Pk(p,5e3),i?l?he.jsx("p",{children:"Loading logs..."}):n?he.jsxs("p",{className:nb.error,children:["Error: ",n]}):he.jsxs("div",{className:nb.jobLogs,children:[he.jsx("h2",{children:"Job Logs"}),he.jsx("pre",{className:nb.logContent,ref:r,children:e||"<No logs reported for this job>"})]}):he.jsx("p",{children:"No job ID provided."})},rV="_drawerWrapper_l3raf_1",sV={drawerWrapper:rV},aV="_formWrapper_13v73_1",oV="_newEvaluationTitle_13v73_8",lV="_buttons_13v73_15",cV="_navFooterOuter_13v73_20",uV="_navFooter_13v73_20",rb={formWrapper:aV,newEvaluationTitle:oV,buttons:lV,navFooterOuter:cV,navFooter:uV},LT=i=>{if(!i)return"NA";if(i.length==4)return i;if(i.length==6){const e=i.slice(0,4),t=i.slice(4,6);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(t)-1]} ${e}`}if(i.length==5){const e=i.slice(0,4);return`Week ${i.slice(5,6)} ${e}`}},dV="_datasetDetailsWrapper_dewdk_1",hV="_datasetDetailsRow_dewdk_7",pV="_label_dewdk_13",du={datasetDetailsWrapper:dV,datasetDetailsRow:hV,label:pV},fV=({datasetId:i})=>{var p;const[e,t]=$e.useState(null),[n,s]=$e.useState(""),[l,u]=$e.useState(!0);$e.useState([]);const r=f=>{const g=f.observations.map(E=>E.period),b=Array.from(new Set(g)).sort(),y=b[0],w=b[b.length-1],T=Array.from(new Set(g)).length,S=Array.from(new Set(f.observations.map(E=>E.featureName).filter(E=>E!=="disease_cases")));return{name:f.name,created:f.created,startPeriod:y,endPeriod:w,orgUnitCount:T,covariates:S}};return $e.useEffect(()=>{if(console.log("datasetid",i),!i)return;(async()=>{try{console.log("fetching dataset",i);const g=await so.getDatasetCrudDatasetsDatasetIdGet(i);console.log("dataset loaded",g);const b=r(g);t(b)}catch(g){s(g)}finally{u(!1)}})()},[i]),l?he.jsxs("div",{className:du.datasetLoader,children:[he.jsx(Qo,{}),he.jsx("span",{children:"Loading dataset"})]}):n?he.jsxs("p",{children:["Error: ",n]}):he.jsxs(he.Fragment,{children:[he.jsx("h3",{children:"Evaluation Dataset"}),he.jsx(If,{children:he.jsxs("div",{className:du.datasetDetailsWrapper,children:[he.jsxs("div",{children:[he.jsx("span",{className:du.label,children:"Name: "}),he.jsx("span",{children:e.name})]}),he.jsxs("div",{children:[he.jsx("span",{className:du.label,children:"Org Units: "}),he.jsx("span",{children:e.orgUnitCount})]}),he.jsxs("div",{children:[he.jsx("span",{className:du.label,children:"Time period: "}),he.jsxs("span",{children:[LT(e.startPeriod)," to ",LT(e.endPeriod)]})]}),he.jsxs("div",{children:[he.jsx("span",{className:du.label,children:"Covariates: "}),he.jsx("span",{children:((p=e==null?void 0:e.covariates)==null?void 0:p.join(", "))||"None"})]}),he.jsxs("div",{children:[he.jsx("span",{className:du.label,children:"Created: "}),he.jsx("span",{children:e.created})]})]})})]})},mV="_modelDetailsContainer_mnj31_1",gV="_loadingText_mnj31_5",yV="_selectedModelDetails_mnj31_10",xV="_modelAuthor_mnj31_17",bV="_modelAuthorLogo_mnj31_25",vV="_modelAuthorName_mnj31_32",_V="_modelHumanName_mnj31_36",wV="_modelEmail_mnj31_42",TV="_modelDescription_mnj31_47",CV="_modelDescriptionText_mnj31_52",SV="_modelCovariates_mnj31_57",EV="_modelCovariatesList_mnj31_62",kV="_modelCovariateItem_mnj31_71",AV="_modelCitation_mnj31_75",MV="_modelCitationText_mnj31_80",PV="_modelLink_mnj31_86",oa={modelDetailsContainer:mV,loadingText:gV,selectedModelDetails:yV,modelAuthor:xV,modelAuthorLogo:bV,modelAuthorName:vV,modelHumanName:_V,modelEmail:wV,modelDescription:TV,modelDescriptionText:CV,modelCovariates:SV,modelCovariatesList:EV,modelCovariateItem:kV,modelCitation:AV,modelCitationText:MV,modelLink:PV},IV=({selectedModel:i,onChangeModel:e})=>he.jsx("div",{className:oa.modelDetailsContainer,children:he.jsxs("div",{className:oa.selectedModelDetails,children:[he.jsx("h3",{className:oa.modelHumanName,children:i.displayName}),he.jsxs("div",{className:oa.modelAuthor,children:[he.jsx("img",{src:i.organizationLogoUrl||"/default-model-logo.png",alt:i.name+" logo",className:oa.modelAuthorLogo}),he.jsxs("span",{className:oa.modelAuthorName,children:[i.author," - ",i.organization]})]}),he.jsxs("p",{className:oa.modelDescription,children:[he.jsx("div",{children:"Description:"}),he.jsx("div",{className:oa.modelDescriptionText,children:i.description||"Coming soon..."})]}),he.jsxs("div",{className:oa.modelCovariates,children:[he.jsx("span",{children:"Model inputs:"}),he.jsx("ul",{className:oa.modelCovariatesList,children:i.covariates.map((t,n)=>he.jsxs("li",{className:oa.modelCovariateItem,children:[" ",t.name]},n))})]}),he.jsxs("div",{className:oa.modelCitation,children:[he.jsx("span",{children:"Attribution:"}),he.jsx("pre",{className:oa.modelCitationText,children:i.citationInfo||"Coming soon..."})]}),he.jsxs("p",{className:oa.modelLink,children:["External link: ",he.jsx("a",{href:i.sourceUrl||"",target:"_blank",children:i.sourceUrl||"http://example.com"})]}),he.jsxs("p",{className:oa.modelEmail,children:["Contact email: ",i.contactEmail||"Coming soon..."]}),e&&he.jsx("div",{children:he.jsx(Jn,{onClick:e,primary:!0,children:"Change Model"})})]},i.name)}),DV="_modelSelectContainer_1u7s7_1",RV="_loadingText_1u7s7_5",LV="_modelGrid_1u7s7_10",zV="_modelCard_1u7s7_17",NV="_selectedModelCard_1u7s7_31",OV="_selectedModelDetails_1u7s7_35",jV="_modelAuthor_1u7s7_42",FV="_modelAuthorLogo_1u7s7_50",BV="_modelAuthorName_1u7s7_57",$V="_modelHumanName_1u7s7_61",UV="_modelEmail_1u7s7_67",VV="_modelDescription_1u7s7_72",GV="_modelDescriptionText_1u7s7_77",HV="_modelCovariates_1u7s7_82",qV="_modelCovariatesList_1u7s7_87",WV="_modelCovariateItem_1u7s7_96",YV="_modelCitation_1u7s7_100",ZV="_modelCitationText_1u7s7_105",XV="_modelLink_1u7s7_111",No={modelSelectContainer:DV,loadingText:RV,modelGrid:LV,modelCard:zV,selectedModelCard:NV,selectedModelDetails:OV,modelAuthor:jV,modelAuthorLogo:FV,modelAuthorName:BV,modelHumanName:$V,modelEmail:UV,modelDescription:VV,modelDescriptionText:GV,modelCovariates:HV,modelCovariatesList:qV,modelCovariateItem:WV,modelCitation:YV,modelCitationText:ZV,modelLink:XV},zT={name:"Download data (CHAP is offline)",id:0,description:"Download data from the CHAP API",displayName:"",covariates:[],target:{name:"target",description:"target",displayName:""}},Ik=({selectedModel:i,setSelectedModel:e})=>{const[t,n]=$e.useState([]),[s,l]=$e.useState(!0),[u,r]=$e.useState(!0),p=async()=>{await so.listModelsCrudModelsGet().then(g=>{let b=g.map(y=>(y.covariates=y.covariates.concat(y.target),y));l(!1),n(b)}).catch(g=>{n([zT]),e(zT),l(!1)})},f=g=>{e(g),r(!1)};return $e.useEffect(()=>{p()},[]),he.jsx("div",{className:No.modelSelectContainer,children:s?he.jsx("p",{children:"Loading models..."}):he.jsxs(he.Fragment,{children:[he.jsx("h3",{children:"Prediction Model"}),!u&&i&&he.jsx("div",{children:he.jsx(IV,{selectedModel:i,onChangeModel:()=>r(!0)})}),u&&he.jsx("div",{children:he.jsx("div",{className:No.modelGrid,children:t.map(g=>he.jsxs("div",{className:`${No.modelCard} ${(i==null?void 0:i.name)===g.name?No.selectedModelCard:""}`,children:[he.jsx("h3",{className:No.modelHumanName,children:g.displayName}),he.jsxs("div",{className:No.modelAuthor,children:[he.jsx("img",{src:g.organizationLogoUrl||"/default-model-logo.png",alt:g.name+" logo",className:No.modelAuthorLogo}),he.jsxs("span",{className:No.modelAuthorName,children:[g.author," - ",g.organization]})]}),he.jsx("ul",{className:No.modelCovariatesList,children:g.covariates.map((b,y)=>he.jsxs("li",{className:No.modelCovariateItem,children:[" ",b.name]},y))}),he.jsx(Jn,{onClick:()=>f(g),primary:!0,children:(i==null?void 0:i.name)===g.name?"Selected":"Select Model"})]},g.name))})})]})})},KV=({onDrawerClose:i,datasetIdToEvaluate:e})=>{const[t,n]=$e.useState(""),[s,l]=$e.useState(void 0),u=t&&e&&s,r=()=>{if(console.log("should evaluate",t,e,s),u)try{const p=sh.createBacktestAnalyticsCreateBacktestPost({nPeriods:3,nSplits:10,stride:1,name:t,datasetId:e,modelId:s.name});console.log("evaluate response",p)}catch{alert("There was an unknown error creating the evaluation")}finally{i()}};return he.jsx(he.Fragment,{children:he.jsxs("div",{className:rb.formWrapper,children:[he.jsxs("div",{className:rb.newEvaluationTitle,children:[he.jsx("h2",{children:"New model evaluation"}),he.jsx(Jn,{icon:he.jsx(Sv,{}),onClick:i})]}),he.jsx(Df,{autoComplete:"",label:"Evaluation name",value:t,onChange:p=>n(p.value),helpText:"Name your evaluation",placeholder:"Example: EWARS evaluation, 2020-2024"}),he.jsx(fV,{datasetId:e}),he.jsx(Ik,{selectedModel:s,setSelectedModel:l}),he.jsx("div",{className:rb.buttons,children:he.jsx(Jn,{primary:!0,icon:he.jsx(By,{}),onClick:r,disabled:!u,children:"Evaluate"})})]})})},QV=({isOpen:i,setIsOpen:e,datasetIdToEvaluate:t})=>{const n=window.innerWidth<900?"100vw":"1000px";return he.jsx("div",{children:he.jsx(N1,{open:i,onClose:()=>e(!1),direction:"right",size:n,children:he.jsx("div",{className:sV.drawerWrapper,children:he.jsx(KV,{onDrawerClose:()=>e(!1),datasetIdToEvaluate:t})})})})},Dk=({evaluationId:i})=>{const[e,t]=$e.useState(""),[n,s]=$e.useState([]),[l,u]=$e.useState(),[r,p]=$e.useState(),[f,g]=$e.useState(""),[b,y]=$e.useState(""),[w,v]=$e.useState(!1),{orgUnits:T,error:S,loading:E}=Mk();$e.useEffect(()=>{if(T&&r){const C=eB(r.predictions,r.actualCases.data,"");C.forEach(I=>{I.evaluation.forEach(N=>{const W=T==null?void 0:T.organisationUnits.find(Y=>Y.id===N.orgUnitId);W&&(N.orgUnitName=W.displayName)})}),u(C),s(iB(r.predictions))}},[T,r]);const x=async C=>(await so.getBacktestsCrudBacktestsGet()).find(N=>N.id===Number(C)),A=async C=>(await so.listModelsCrudModelsGet()).find(N=>N.name===C),D=async()=>{v(!0);const C=[.1,.25,.5,.75,.9];try{const[I,N,W]=await Promise.all([x(i),sh.getEvaluationEntriesAnalyticsEvaluationEntryGet(i,C),sh.getActualCasesAnalyticsActualCasesBacktestIdGet(i)]);if(!I)throw new Error("Evaluation info not found");g(I.name??"");const Y=await A(I.modelId);y((Y==null?void 0:Y.displayName)??""),p({predictions:N,actualCases:W})}catch(I){t(I.toString())}finally{v(!1)}};return $e.useEffect(()=>{D()},[]),he.jsxs("div",{children:[e&&he.jsx("p",{children:"Not available"}),w&&he.jsx("p",{children:"Loading.."}),l&&he.jsx(H7,{evaluationName:f,modelName:b,evaluations:l,splitPeriods:n})]})},JV=({jobResults:i})=>{const[e,t]=$e.useState(!1),[n,s]=$e.useState(void 0),[l,u]=$e.useState(!1),[r,p]=$e.useState(!1),[f,g]=$e.useState(void 0),[b,y]=$e.useState(void 0),[w,v]=$e.useState(!1),[T,S]=$e.useState(void 0),E=I=>{t(!0),s(I)},x=I=>{p(!0),g(I)},A=I=>{v(!0),S(I)},D=I=>{if(confirm("Are you sure you want to permanently remove this item? Any data entries that depend on this item will also be deleted.")==!0){console.log("Should remove item");let W=I.result;if(W)I.type=="dataset"?so.deleteDatasetCrudDatasetsDatasetIdDelete(parseInt(W)):I.type=="evaluation"?so.deleteBacktestCrudBacktestsBacktestIdDelete(parseInt(W)):I.type=="prediction"&&so.deletePredictionCrudPredictionsPredictionIdDelete(parseInt(W));else{let Y=I.id;V1.deleteJobJobsJobIdDelete(Y)}}},C=I=>{console.log("clicked evaluate dataset id",I),y(I),u(!0)};return he.jsxs(he.Fragment,{children:[i.map((I,N)=>he.jsx(eV,{i:N,jobResult:I,onClickEvaluateDataset:C,onClickViewEvaluation:x,onClickImport:E,onClickRemove:D,onClickViewLogs:A},N)),e&&he.jsx(BU,{setIsImportModalOpen:t,isImportModalOpen:e,predictionIdToImport:n}),he.jsx(QV,{isOpen:l,setIsOpen:u,datasetIdToEvaluate:b}),r&&f&&he.jsx(ku,{className:ac.evaluationModal,onClose:()=>{p(!1)},children:he.jsx(Dk,{evaluationId:f})}),w&&he.jsx(ku,{className:ac.jobLogsModal,onClose:()=>{v(!1)},children:he.jsx(nV,{jobId:T})})]})},eG=()=>he.jsx("div",{children:he.jsxs("div",{className:[ac.jobResultPanelContainer,ac.resultTextHeader].join(" "),children:[he.jsx("div",{className:ac.flexMedium,children:"Name:"}),he.jsx("div",{className:ac.flexMedium,children:"Created:"}),he.jsx("div",{className:ac.flexMedium,children:"Status:"}),he.jsx("div",{className:ac.flexItemRight})]})}),tG="_noticeBox_18bg1_1",iG="_details_18bg1_8",nG="_button_18bg1_14",sb={noticeBox:tG,details:iG,button:nG},NT=({error:i,type:e})=>{const[t,n]=$e.useState(!1);return i==null?he.jsx(he.Fragment,{}):he.jsx("div",{children:he.jsxs(Ho,{error:!0,title:`Unable to retrieve ${e}. Please try again later.`,className:sb.noticeBox,children:[he.jsx("div",{className:sb.button,children:he.jsx(Jn,{small:!0,onClick:()=>n(!t),children:t?"Hide details":"See details"})}),t&&he.jsx("div",{className:sb.details,children:he.jsx("div",{children:i})})]})})},rG="_loaderWrapper_iu471_1",sG="_textLoad_iu471_8",aG="_loader_iu471_1",ab={loaderWrapper:rG,textLoad:sG,loader:aG},oG=({type:i})=>he.jsxs(he.Fragment,{children:[he.jsx("div",{className:ab.loaderWrapper,children:he.jsx("div",{className:ab.loader,children:he.jsx(Qo,{})})}),he.jsx("p",{className:ab.textLoad,children:he.jsxs("i",{children:["Loading ",i]})})]}),lG="_text_3x5i9_1",cG={text:lG},uG=({type:i})=>he.jsxs("div",{className:cG.text,children:["No ",i," found"]}),cv=({type:i})=>{const[e,t]=$e.useState([]),[n,s]=$e.useState([]),[l,u]=$e.useState([]),[r,p]=$e.useState([]),[f,g]=$e.useState([]),[b,y]=$e.useState(),[w,v]=$e.useState(),[T,S]=$e.useState(!0),E=async I=>{for(let N=0;N<5;N++)try{const W=await I;return v(void 0),W}catch(W){if(N===4)return v((W==null?void 0:W.message)??`Couldn't fetch ${i}`),[]}},x=()=>{switch(i){case"predictions":return E(so.getPredictionsCrudPredictionsGet()).then(I=>s(I));case"datasets":return E(so.getDatasetsCrudDatasetsGet()).then(I=>u(I));case"evaluations":return E(so.getBacktestsCrudBacktestsGet()).then(I=>p(I))}},A=async()=>{let I=[];for(let N=0;N<6;N++)try{I=await V1.listJobsJobsGet();break}catch(W){if(N===2)return y((W==null?void 0:W.message)??"Couldn't fetch jobs"),[]}return y(void 0),I},D=()=>{const I=[];l.filter(Y=>Y.type=="evaluation").forEach(Y=>{I.push({id:"Unknown",name:Y.name,created:new Date(Y.created??""),type:"dataset",status:"SUCCESS",result:Y.id.toString()})}),r.forEach(Y=>{I.push({id:"Unknown",name:Y.name??"",created:new Date(Y.created??""),type:"evaluation",status:"SUCCESS",result:Y.id.toString()})}),n.forEach(Y=>{I.push({id:"Unknown",name:Y.name,created:new Date(Y.created),type:"prediction",status:"SUCCESS",result:Y.id.toString(),datasetId:Y.datasetId,estimatorId:Y.modelId,nPeriods:Y.nPeriods})});const N={predictions:"create_prediction",datasets:"create_dataset",evaluations:"create_backtest"},W={predictions:"prediction",datasets:"dataset",evaluations:"evaluation"};return e.filter(Y=>Y.status!="SUCCESS"&&Y.type==N[i]).forEach(Y=>{I.push({id:Y.id,name:Y.name,created:new Date(Y.start_time),type:W[i],status:Y.status})}),I.sort((Y,X)=>X.created.getTime()-Y.created.getTime()),I},C=async()=>{await x();const I=await A();t(I),S(!1)};return $e.useEffect(()=>{C()},[]),Pk(C,5e3),$e.useEffect(()=>{g(D())},[e,n,r,l]),he.jsxs("div",{children:[he.jsx(NT,{error:b,type:"jobs"}),he.jsx(NT,{error:w,type:i}),T&&he.jsx(oG,{type:i}),f.length>0&&he.jsx(eG,{}),f.length==0&&!T&&he.jsx(uG,{type:i}),he.jsx(JV,{jobResults:f})]})},dG=()=>{const[i,e]=$e.useState(!1),t=()=>{e(!1)};return he.jsxs("div",{children:[he.jsx(lv,{pageTitle:"Evaluation Datasets",pageDescription:"Historical data used to evaluate the accuracy of predictive models, combining DHIS2 and climate data sources.",setDrawerOpenText:"New Dataset",setDrawerOpen:e}),he.jsx(cv,{type:"datasets"}),he.jsx(tU,{isOpen:i,onDrawerClose:()=>e(!1),onDrawerSubmit:t}),he.jsx(lv,{pageTitle:"Model Evaluations",pageDescription:"Evaluates the accuracy of a predictive model using historical data. Compares actual outcomes with predicted values to assess model performance."}),he.jsx(cv,{type:"evaluations"})]})},hG=()=>he.jsx(dG,{}),pG="_drawerWrapper_g5ang_1",fG={drawerWrapper:pG},mG="_formWrapper_1wb8p_1",gG="_newPredictionForm_1wb8p_8",yG="_newPredictionTitle_1wb8p_12",ob={formWrapper:mG,newPredictionForm:gG,newPredictionTitle:yG},xG=({onDrawerClose:i,onDrawerSubmit:e})=>{const[t,n]=$e.useState([]),[s,l]=$e.useState([]),[u,r]=$e.useState([]),[p,f]=$e.useState(void 0),[g,b]=$e.useState(""),[y,w]=$e.useState(void 0);return $e.useEffect(()=>{if(y==null)return;const v=y.covariates.map(T=>({feature:T.name,origin:"dataItem",dataSource:""}));n(v)},[y]),he.jsx(he.Fragment,{children:he.jsxs("div",{className:ob.newPredictionForm,children:[he.jsxs("div",{className:ob.newPredictionTitle,children:[he.jsx("h2",{children:"New prediction"}),he.jsx(Jn,{icon:he.jsx(Sv,{}),onClick:i})]}),he.jsxs("div",{className:ob.formWrapper,children:[he.jsx(Df,{autoComplete:"",label:"Name of prediction",value:g,onChange:v=>b(v.value),placeholder:Qe.t("Prediction for Northern Province")}),he.jsx(Ik,{selectedModel:y,setSelectedModel:w}),he.jsx(Ak,{setDataLayers:n,datasetLayers:t,predictMode:!0}),he.jsx(x3,{setTimePeriods:r}),he.jsx(b3,{orgUnits:s,setOrgUnits:l,orgUnitLevel:p,setOrgUnitLevel:f}),he.jsx(kk,{onDrawerSubmit:e,selectedModel:y,name:g,dataLayers:t,onSendAction:"predict",orgUnitLevel:p,selectedPeriodItems:u,selectedOrgUnits:s})]})]})})},bG=({onDrawerClose:i,isOpen:e,onDrawerSubmit:t})=>{const n=window.innerWidth<900?"100vw":"1000px";return he.jsx("div",{children:he.jsx(N1,{open:e,onClose:i,direction:"right",size:n,children:he.jsx("div",{className:fG.drawerWrapper,children:he.jsx(xG,{onDrawerClose:i,onDrawerSubmit:t})})})})},vG=()=>{const[i,e]=$e.useState(!1),[t,n]=$e.useState(!1),s=()=>{n(!1),e(!1)};return $e.useEffect(()=>{n(!0)},[t]),he.jsxs("div",{children:[he.jsx(lv,{setDrawerOpen:e,pageTitle:"Predictions",pageDescription:"Forecasted disease trends generated by applying a predictive model to current data. These can be reviewed and imported into DHIS2 to support decision-making in the field.",setDrawerOpenText:"New prediction"}),he.jsx(bG,{isOpen:i,onDrawerClose:()=>e(!1),onDrawerSubmit:s}),t&&he.jsx(cv,{type:"predictions"})]})},_G=({children:i})=>{const{baseUrl:e}=jy(),[t,n]=$e.useState(!1);return $e.useEffect(()=>{Fi.WITH_CREDENTIALS=!0,Fi.BASE=e+"/api/routes/chap/run",n(!0)},[e]),t?he.jsx(he.Fragment,{children:i}):he.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:he.jsx(Qo,{})})},wG="_settingsContainer_11gky_1",TG={settingsContainer:wG},Rk=({query:i,queryKey:e,...t})=>{const n=uh();return Fy({queryKey:e,queryFn:async()=>(await n.query({apiDataQuery:i})).apiDataQuery,...t})},CG={resource:"routes",params:{filter:"code:eq:chap",fields:"id,code,name,displayName,url,authorities,disabled,headers,sharing[public]"}},nm=()=>{const{data:i,error:e,isLoading:t,isError:n}=Rk({queryKey:["routes","chap"],query:CG,select:s=>s.routes[0],staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return{route:i,error:e,isLoading:t,isError:n}},SG="_container_1o19c_1",EG="_header_1o19c_5",kG="_settingsContainer_1o19c_16",AG="_loaderContainer_1o19c_22",MG="_mutedText_1o19c_32",PG="_errorMessage_1o19c_37",IG="_routeInfo_1o19c_43",DG="_routeInfoHeader_1o19c_50",RG="_infoGrid_1o19c_64",LG="_label_1o19c_71",zG="_value_1o19c_76",NG="_authorities_1o19c_82",OG="_authority_1o19c_88",Cr={container:SG,header:EG,settingsContainer:kG,loaderContainer:AG,mutedText:MG,errorMessage:PG,routeInfo:IG,routeInfoHeader:DG,infoGrid:RG,label:LG,value:zG,authorities:NG,authority:OG},jG="F_CHAP_MODELING_APP",Lk=({onSuccess:i,onError:e}={})=>{const t=zy(),n=uh(),{show:s}=ef(Qe.t("Error saving route"),{critical:!0}),{show:l}=ef(Qe.t("Route saved successfully"),{success:!0}),u=iE(async r=>{const{id:p,url:f}=r;if(p){const g=["routes","chap"],b=t.getQueryData(g);if(!b)throw new Error(`Route data not found in cache for key ${g}.`);const y=b.routes.find(v=>v.id===p);if(!y)throw new Error(`Route with id ${p} not found in cache for update.`);const w={resource:"routes",type:"update",id:p,data:{...y||{},url:f}};return n.mutate(w)}else{const g={resource:"routes",type:"create",data:{name:"Chap Modeling App",code:"chap",url:f,authorities:[jG],headers:{"Content-Type":"application/json"}}};return n.mutate(g)}},{onSuccess:()=>{l(),t.invalidateQueries(["routes"]),i==null||i()},onError:r=>{s(),console.error("Error saving route:",r),e==null||e(r)}});return{saveRoute:u.mutate,isSaving:u.isLoading,error:u.error}};var rm=i=>i.type==="checkbox",yu=i=>i instanceof Date,ua=i=>i==null;const zk=i=>typeof i=="object";var Qr=i=>!ua(i)&&!Array.isArray(i)&&zk(i)&&!yu(i),Nk=i=>Qr(i)&&i.target?rm(i.target)?i.target.checked:i.target.value:i,FG=i=>i.substring(0,i.search(/\.\d+(\.|$)/))||i,Ok=(i,e)=>i.has(FG(e)),BG=i=>{const e=i.constructor&&i.constructor.prototype;return Qr(e)&&e.hasOwnProperty("isPrototypeOf")},e_=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ms(i){let e;const t=Array.isArray(i),n=typeof FileList<"u"?i instanceof FileList:!1;if(i instanceof Date)e=new Date(i);else if(i instanceof Set)e=new Set(i);else if(!(e_&&(i instanceof Blob||n))&&(t||Qr(i)))if(e=t?[]:{},!t&&!BG(i))e=i;else for(const s in i)i.hasOwnProperty(s)&&(e[s]=Ms(i[s]));else return i;return e}var bx=i=>Array.isArray(i)?i.filter(Boolean):[],Yr=i=>i===void 0,mi=(i,e,t)=>{if(!e||!Qr(i))return t;const n=bx(e.split(/[,[\].]+?/)).reduce((s,l)=>ua(s)?s:s[l],i);return Yr(n)||n===i?Yr(i[e])?t:i[e]:n},Ba=i=>typeof i=="boolean",t_=i=>/^\w*$/.test(i),jk=i=>bx(i.replace(/["|']|\]/g,"").split(/\.|\[/)),Yn=(i,e,t)=>{let n=-1;const s=t_(e)?[e]:jk(e),l=s.length,u=l-1;for(;++n<l;){const r=s[n];let p=t;if(n!==u){const f=i[r];p=Qr(f)||Array.isArray(f)?f:isNaN(+s[n+1])?{}:[]}if(r==="__proto__"||r==="constructor"||r==="prototype")return;i[r]=p,i=i[r]}};const _y={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},go={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},_l={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},$G=fe.createContext(null),i_=()=>fe.useContext($G);var Fk=(i,e,t,n=!0)=>{const s={defaultValues:e._defaultValues};for(const l in i)Object.defineProperty(s,l,{get:()=>{const u=l;return e._proxyFormState[u]!==go.all&&(e._proxyFormState[u]=!n||go.all),t&&(t[u]=!0),i[u]}});return s};const n_=typeof window<"u"?$e.useLayoutEffect:$e.useEffect;function UG(i){const e=i_(),{control:t=e.control,disabled:n,name:s,exact:l}=i,[u,r]=fe.useState(t._formState),p=fe.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return n_(()=>t._subscribe({name:s,formState:p.current,exact:l,callback:f=>{!n&&r({...t._formState,...f})}}),[s,n,l]),fe.useEffect(()=>{p.current.isValid&&t._setValid(!0)},[t]),fe.useMemo(()=>Fk(u,t,p.current,!1),[u,t])}var $o=i=>typeof i=="string",Bk=(i,e,t,n,s)=>$o(i)?(n&&e.watch.add(i),mi(t,i,s)):Array.isArray(i)?i.map(l=>(n&&e.watch.add(l),mi(t,l))):(n&&(e.watchAll=!0),t);function VG(i){const e=i_(),{control:t=e.control,name:n,defaultValue:s,disabled:l,exact:u}=i,r=fe.useRef(s),[p,f]=fe.useState(t._getWatch(n,r.current));return n_(()=>t._subscribe({name:n,formState:{values:!0},exact:u,callback:g=>!l&&f(Bk(n,t._names,g.values||t._formValues,!1,r.current))}),[n,t,l,u]),fe.useEffect(()=>t._removeUnmounted()),p}function GG(i){const e=i_(),{name:t,disabled:n,control:s=e.control,shouldUnregister:l}=i,u=Ok(s._names.array,t),r=VG({control:s,name:t,defaultValue:mi(s._formValues,t,mi(s._defaultValues,t,i.defaultValue)),exact:!0}),p=UG({control:s,name:t,exact:!0}),f=fe.useRef(i),g=fe.useRef(s.register(t,{...i.rules,value:r,...Ba(i.disabled)?{disabled:i.disabled}:{}})),b=fe.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!mi(p.errors,t)},isDirty:{enumerable:!0,get:()=>!!mi(p.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!mi(p.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!mi(p.validatingFields,t)},error:{enumerable:!0,get:()=>mi(p.errors,t)}}),[p,t]),y=fe.useCallback(S=>g.current.onChange({target:{value:Nk(S),name:t},type:_y.CHANGE}),[t]),w=fe.useCallback(()=>g.current.onBlur({target:{value:mi(s._formValues,t),name:t},type:_y.BLUR}),[t,s._formValues]),v=fe.useCallback(S=>{const E=mi(s._fields,t);E&&S&&(E._f.ref=S)},[s._fields,t]),T=fe.useMemo(()=>({name:t,value:r,...Ba(n)||p.disabled?{disabled:p.disabled||n}:{},onChange:y,onBlur:w,ref:v}),[t,n,p.disabled,y,w,v,r]);return fe.useEffect(()=>{const S=s._options.shouldUnregister||l;s.register(t,{...f.current.rules,...Ba(f.current.disabled)?{disabled:f.current.disabled}:{}});const E=(x,A)=>{const D=mi(s._fields,x);D&&D._f&&(D._f.mount=A)};if(E(t,!0),S){const x=Ms(mi(s._options.defaultValues,t));Yn(s._defaultValues,t,x),Yr(mi(s._formValues,t))&&Yn(s._formValues,t,x)}return!u&&s.register(t),()=>{(u?S&&!s._state.action:S)?s.unregister(t):E(t,!1)}},[t,s,u,l]),fe.useEffect(()=>{s._setDisabledField({disabled:n,name:t})},[n,t,s]),fe.useMemo(()=>({field:T,formState:p,fieldState:b}),[T,p,b])}const HG=i=>i.render(GG(i));var $k=(i,e,t,n,s)=>e?{...t[i],types:{...t[i]&&t[i].types?t[i].types:{},[n]:s||!0}}:{},Xp=i=>Array.isArray(i)?i:[i],OT=()=>{let i=[];return{get observers(){return i},next:s=>{for(const l of i)l.next&&l.next(s)},subscribe:s=>(i.push(s),{unsubscribe:()=>{i=i.filter(l=>l!==s)}}),unsubscribe:()=>{i=[]}}},uv=i=>ua(i)||!zk(i);function cc(i,e){if(uv(i)||uv(e))return i===e;if(yu(i)&&yu(e))return i.getTime()===e.getTime();const t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;for(const s of t){const l=i[s];if(!n.includes(s))return!1;if(s!=="ref"){const u=e[s];if(yu(l)&&yu(u)||Qr(l)&&Qr(u)||Array.isArray(l)&&Array.isArray(u)?!cc(l,u):l!==u)return!1}}return!0}var ca=i=>Qr(i)&&!Object.keys(i).length,r_=i=>i.type==="file",yo=i=>typeof i=="function",wy=i=>{if(!e_)return!1;const e=i?i.ownerDocument:0;return i instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Uk=i=>i.type==="select-multiple",s_=i=>i.type==="radio",qG=i=>s_(i)||rm(i),lb=i=>wy(i)&&i.isConnected;function WG(i,e){const t=e.slice(0,-1).length;let n=0;for(;n<t;)i=Yr(i)?n++:i[e[n++]];return i}function YG(i){for(const e in i)if(i.hasOwnProperty(e)&&!Yr(i[e]))return!1;return!0}function cs(i,e){const t=Array.isArray(e)?e:t_(e)?[e]:jk(e),n=t.length===1?i:WG(i,t),s=t.length-1,l=t[s];return n&&delete n[l],s!==0&&(Qr(n)&&ca(n)||Array.isArray(n)&&YG(n))&&cs(i,t.slice(0,-1)),i}var Vk=i=>{for(const e in i)if(yo(i[e]))return!0;return!1};function Ty(i,e={}){const t=Array.isArray(i);if(Qr(i)||t)for(const n in i)Array.isArray(i[n])||Qr(i[n])&&!Vk(i[n])?(e[n]=Array.isArray(i[n])?[]:{},Ty(i[n],e[n])):ua(i[n])||(e[n]=!0);return e}function Gk(i,e,t){const n=Array.isArray(i);if(Qr(i)||n)for(const s in i)Array.isArray(i[s])||Qr(i[s])&&!Vk(i[s])?Yr(e)||uv(t[s])?t[s]=Array.isArray(i[s])?Ty(i[s],[]):{...Ty(i[s])}:Gk(i[s],ua(e)?{}:e[s],t[s]):t[s]=!cc(i[s],e[s]);return t}var Pp=(i,e)=>Gk(i,e,Ty(e));const jT={value:!1,isValid:!1},FT={value:!0,isValid:!0};var Hk=i=>{if(Array.isArray(i)){if(i.length>1){const e=i.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return i[0].checked&&!i[0].disabled?i[0].attributes&&!Yr(i[0].attributes.value)?Yr(i[0].value)||i[0].value===""?FT:{value:i[0].value,isValid:!0}:FT:jT}return jT},qk=(i,{valueAsNumber:e,valueAsDate:t,setValueAs:n})=>Yr(i)?i:e?i===""?NaN:i&&+i:t&&$o(i)?new Date(i):n?n(i):i;const BT={isValid:!1,value:null};var Wk=i=>Array.isArray(i)?i.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,BT):BT;function $T(i){const e=i.ref;return r_(e)?e.files:s_(e)?Wk(i.refs).value:Uk(e)?[...e.selectedOptions].map(({value:t})=>t):rm(e)?Hk(i.refs).value:qk(Yr(e.value)?i.ref.value:e.value,i)}var ZG=(i,e,t,n)=>{const s={};for(const l of i){const u=mi(e,l);u&&Yn(s,l,u._f)}return{criteriaMode:t,names:[...i],fields:s,shouldUseNativeValidation:n}},Cy=i=>i instanceof RegExp,Ip=i=>Yr(i)?i:Cy(i)?i.source:Qr(i)?Cy(i.value)?i.value.source:i.value:i,UT=i=>({isOnSubmit:!i||i===go.onSubmit,isOnBlur:i===go.onBlur,isOnChange:i===go.onChange,isOnAll:i===go.all,isOnTouch:i===go.onTouched});const VT="AsyncFunction";var XG=i=>!!i&&!!i.validate&&!!(yo(i.validate)&&i.validate.constructor.name===VT||Qr(i.validate)&&Object.values(i.validate).find(e=>e.constructor.name===VT)),KG=i=>i.mount&&(i.required||i.min||i.max||i.maxLength||i.minLength||i.pattern||i.validate),GT=(i,e,t)=>!t&&(e.watchAll||e.watch.has(i)||[...e.watch].some(n=>i.startsWith(n)&&/^\.\w+/.test(i.slice(n.length))));const Kp=(i,e,t,n)=>{for(const s of t||Object.keys(i)){const l=mi(i,s);if(l){const{_f:u,...r}=l;if(u){if(u.refs&&u.refs[0]&&e(u.refs[0],s)&&!n)return!0;if(u.ref&&e(u.ref,u.name)&&!n)return!0;if(Kp(r,e))break}else if(Qr(r)&&Kp(r,e))break}}};function HT(i,e,t){const n=mi(i,t);if(n||t_(t))return{error:n,name:t};const s=t.split(".");for(;s.length;){const l=s.join("."),u=mi(e,l),r=mi(i,l);if(u&&!Array.isArray(u)&&t!==l)return{name:t};if(r&&r.type)return{name:l,error:r};s.pop()}return{name:t}}var QG=(i,e,t,n)=>{t(i);const{name:s,...l}=i;return ca(l)||Object.keys(l).length>=Object.keys(e).length||Object.keys(l).find(u=>e[u]===(!n||go.all))},JG=(i,e,t)=>!i||!e||i===e||Xp(i).some(n=>n&&(t?n===e:n.startsWith(e)||e.startsWith(n))),eH=(i,e,t,n,s)=>s.isOnAll?!1:!t&&s.isOnTouch?!(e||i):(t?n.isOnBlur:s.isOnBlur)?!i:(t?n.isOnChange:s.isOnChange)?i:!0,tH=(i,e)=>!bx(mi(i,e)).length&&cs(i,e),iH=(i,e,t)=>{const n=Xp(mi(i,t));return Yn(n,"root",e[t]),Yn(i,t,n),i},Zg=i=>$o(i);function qT(i,e,t="validate"){if(Zg(i)||Array.isArray(i)&&i.every(Zg)||Ba(i)&&!i)return{type:t,message:Zg(i)?i:"",ref:e}}var Od=i=>Qr(i)&&!Cy(i)?i:{value:i,message:""},WT=async(i,e,t,n,s,l)=>{const{ref:u,refs:r,required:p,maxLength:f,minLength:g,min:b,max:y,pattern:w,validate:v,name:T,valueAsNumber:S,mount:E}=i._f,x=mi(t,T);if(!E||e.has(T))return{};const A=r?r[0]:u,D=V=>{s&&A.reportValidity&&(A.setCustomValidity(Ba(V)?"":V||""),A.reportValidity())},C={},I=s_(u),N=rm(u),W=I||N,Y=(S||r_(u))&&Yr(u.value)&&Yr(x)||wy(u)&&u.value===""||x===""||Array.isArray(x)&&!x.length,X=$k.bind(null,T,n,C),O=(V,$,L,R=_l.maxLength,G=_l.minLength)=>{const U=V?$:L;C[T]={type:V?R:G,message:U,ref:u,...X(V?R:G,U)}};if(l?!Array.isArray(x)||!x.length:p&&(!W&&(Y||ua(x))||Ba(x)&&!x||N&&!Hk(r).isValid||I&&!Wk(r).isValid)){const{value:V,message:$}=Zg(p)?{value:!!p,message:p}:Od(p);if(V&&(C[T]={type:_l.required,message:$,ref:A,...X(_l.required,$)},!n))return D($),C}if(!Y&&(!ua(b)||!ua(y))){let V,$;const L=Od(y),R=Od(b);if(!ua(x)&&!isNaN(x)){const G=u.valueAsNumber||x&&+x;ua(L.value)||(V=G>L.value),ua(R.value)||($=G<R.value)}else{const G=u.valueAsDate||new Date(x),U=q=>new Date(new Date().toDateString()+" "+q),B=u.type=="time",H=u.type=="week";$o(L.value)&&x&&(V=B?U(x)>U(L.value):H?x>L.value:G>new Date(L.value)),$o(R.value)&&x&&($=B?U(x)<U(R.value):H?x<R.value:G<new Date(R.value))}if((V||$)&&(O(!!V,L.message,R.message,_l.max,_l.min),!n))return D(C[T].message),C}if((f||g)&&!Y&&($o(x)||l&&Array.isArray(x))){const V=Od(f),$=Od(g),L=!ua(V.value)&&x.length>+V.value,R=!ua($.value)&&x.length<+$.value;if((L||R)&&(O(L,V.message,$.message),!n))return D(C[T].message),C}if(w&&!Y&&$o(x)){const{value:V,message:$}=Od(w);if(Cy(V)&&!x.match(V)&&(C[T]={type:_l.pattern,message:$,ref:u,...X(_l.pattern,$)},!n))return D($),C}if(v){if(yo(v)){const V=await v(x,t),$=qT(V,A);if($&&(C[T]={...$,...X(_l.validate,$.message)},!n))return D($.message),C}else if(Qr(v)){let V={};for(const $ in v){if(!ca(V)&&!n)break;const L=qT(await v[$](x,t),A,$);L&&(V={...L,...X($,L.message)},D(L.message),n&&(C[T]=V))}if(!ca(V)&&(C[T]={ref:A,...V},!n))return C}}return D(!0),C};const nH={mode:go.onSubmit,reValidateMode:go.onChange,shouldFocusError:!0};function rH(i={}){let e={...nH,...i},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:yo(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const n={};let s=Qr(e.defaultValues)||Qr(e.values)?Ms(e.defaultValues||e.values)||{}:{},l=e.shouldUnregister?{}:Ms(s),u={action:!1,mount:!1,watch:!1},r={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},p,f=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={...g};const y={array:OT(),state:OT()},w=UT(e.mode),v=UT(e.reValidateMode),T=e.criteriaMode===go.all,S=Ae=>ye=>{clearTimeout(f),f=setTimeout(Ae,ye)},E=async Ae=>{if(!e.disabled&&(g.isValid||b.isValid||Ae)){const ye=e.resolver?ca((await Y()).errors):await O(n,!0);ye!==t.isValid&&y.state.next({isValid:ye})}},x=(Ae,ye)=>{!e.disabled&&(g.isValidating||g.validatingFields||b.isValidating||b.validatingFields)&&((Ae||Array.from(r.mount)).forEach(ge=>{ge&&(ye?Yn(t.validatingFields,ge,ye):cs(t.validatingFields,ge))}),y.state.next({validatingFields:t.validatingFields,isValidating:!ca(t.validatingFields)}))},A=(Ae,ye=[],ge,Me,De=!0,Pe=!0)=>{if(Me&&ge&&!e.disabled){if(u.action=!0,Pe&&Array.isArray(mi(n,Ae))){const Fe=ge(mi(n,Ae),Me.argA,Me.argB);De&&Yn(n,Ae,Fe)}if(Pe&&Array.isArray(mi(t.errors,Ae))){const Fe=ge(mi(t.errors,Ae),Me.argA,Me.argB);De&&Yn(t.errors,Ae,Fe),tH(t.errors,Ae)}if((g.touchedFields||b.touchedFields)&&Pe&&Array.isArray(mi(t.touchedFields,Ae))){const Fe=ge(mi(t.touchedFields,Ae),Me.argA,Me.argB);De&&Yn(t.touchedFields,Ae,Fe)}(g.dirtyFields||b.dirtyFields)&&(t.dirtyFields=Pp(s,l)),y.state.next({name:Ae,isDirty:$(Ae,ye),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else Yn(l,Ae,ye)},D=(Ae,ye)=>{Yn(t.errors,Ae,ye),y.state.next({errors:t.errors})},C=Ae=>{t.errors=Ae,y.state.next({errors:t.errors,isValid:!1})},I=(Ae,ye,ge,Me)=>{const De=mi(n,Ae);if(De){const Pe=mi(l,Ae,Yr(ge)?mi(s,Ae):ge);Yr(Pe)||Me&&Me.defaultChecked||ye?Yn(l,Ae,ye?Pe:$T(De._f)):G(Ae,Pe),u.mount&&E()}},N=(Ae,ye,ge,Me,De)=>{let Pe=!1,Fe=!1;const Xe={name:Ae};if(!e.disabled){if(!ge||Me){(g.isDirty||b.isDirty)&&(Fe=t.isDirty,t.isDirty=Xe.isDirty=$(),Pe=Fe!==Xe.isDirty);const tt=cc(mi(s,Ae),ye);Fe=!!mi(t.dirtyFields,Ae),tt?cs(t.dirtyFields,Ae):Yn(t.dirtyFields,Ae,!0),Xe.dirtyFields=t.dirtyFields,Pe=Pe||(g.dirtyFields||b.dirtyFields)&&Fe!==!tt}if(ge){const tt=mi(t.touchedFields,Ae);tt||(Yn(t.touchedFields,Ae,ge),Xe.touchedFields=t.touchedFields,Pe=Pe||(g.touchedFields||b.touchedFields)&&tt!==ge)}Pe&&De&&y.state.next(Xe)}return Pe?Xe:{}},W=(Ae,ye,ge,Me)=>{const De=mi(t.errors,Ae),Pe=(g.isValid||b.isValid)&&Ba(ye)&&t.isValid!==ye;if(e.delayError&&ge?(p=S(()=>D(Ae,ge)),p(e.delayError)):(clearTimeout(f),p=null,ge?Yn(t.errors,Ae,ge):cs(t.errors,Ae)),(ge?!cc(De,ge):De)||!ca(Me)||Pe){const Fe={...Me,...Pe&&Ba(ye)?{isValid:ye}:{},errors:t.errors,name:Ae};t={...t,...Fe},y.state.next(Fe)}},Y=async Ae=>{x(Ae,!0);const ye=await e.resolver(l,e.context,ZG(Ae||r.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return x(Ae),ye},X=async Ae=>{const{errors:ye}=await Y(Ae);if(Ae)for(const ge of Ae){const Me=mi(ye,ge);Me?Yn(t.errors,ge,Me):cs(t.errors,ge)}else t.errors=ye;return ye},O=async(Ae,ye,ge={valid:!0})=>{for(const Me in Ae){const De=Ae[Me];if(De){const{_f:Pe,...Fe}=De;if(Pe){const Xe=r.array.has(Pe.name),tt=De._f&&XG(De._f);tt&&g.validatingFields&&x([Me],!0);const nt=await WT(De,r.disabled,l,T,e.shouldUseNativeValidation&&!ye,Xe);if(tt&&g.validatingFields&&x([Me]),nt[Pe.name]&&(ge.valid=!1,ye))break;!ye&&(mi(nt,Pe.name)?Xe?iH(t.errors,nt,Pe.name):Yn(t.errors,Pe.name,nt[Pe.name]):cs(t.errors,Pe.name))}!ca(Fe)&&await O(Fe,ye,ge)}}return ge.valid},V=()=>{for(const Ae of r.unMount){const ye=mi(n,Ae);ye&&(ye._f.refs?ye._f.refs.every(ge=>!lb(ge)):!lb(ye._f.ref))&&J(Ae)}r.unMount=new Set},$=(Ae,ye)=>!e.disabled&&(Ae&&ye&&Yn(l,Ae,ye),!cc(pe(),s)),L=(Ae,ye,ge)=>Bk(Ae,r,{...u.mount?l:Yr(ye)?s:$o(Ae)?{[Ae]:ye}:ye},ge,ye),R=Ae=>bx(mi(u.mount?l:s,Ae,e.shouldUnregister?mi(s,Ae,[]):[])),G=(Ae,ye,ge={})=>{const Me=mi(n,Ae);let De=ye;if(Me){const Pe=Me._f;Pe&&(!Pe.disabled&&Yn(l,Ae,qk(ye,Pe)),De=wy(Pe.ref)&&ua(ye)?"":ye,Uk(Pe.ref)?[...Pe.ref.options].forEach(Fe=>Fe.selected=De.includes(Fe.value)):Pe.refs?rm(Pe.ref)?Pe.refs.length>1?Pe.refs.forEach(Fe=>(!Fe.defaultChecked||!Fe.disabled)&&(Fe.checked=Array.isArray(De)?!!De.find(Xe=>Xe===Fe.value):De===Fe.value)):Pe.refs[0]&&(Pe.refs[0].checked=!!De):Pe.refs.forEach(Fe=>Fe.checked=Fe.value===De):r_(Pe.ref)?Pe.ref.value="":(Pe.ref.value=De,Pe.ref.type||y.state.next({name:Ae,values:Ms(l)})))}(ge.shouldDirty||ge.shouldTouch)&&N(Ae,De,ge.shouldTouch,ge.shouldDirty,!0),ge.shouldValidate&&se(Ae)},U=(Ae,ye,ge)=>{for(const Me in ye){const De=ye[Me],Pe=`${Ae}.${Me}`,Fe=mi(n,Pe);(r.array.has(Ae)||Qr(De)||Fe&&!Fe._f)&&!yu(De)?U(Pe,De,ge):G(Pe,De,ge)}},B=(Ae,ye,ge={})=>{const Me=mi(n,Ae),De=r.array.has(Ae),Pe=Ms(ye);Yn(l,Ae,Pe),De?(y.array.next({name:Ae,values:Ms(l)}),(g.isDirty||g.dirtyFields||b.isDirty||b.dirtyFields)&&ge.shouldDirty&&y.state.next({name:Ae,dirtyFields:Pp(s,l),isDirty:$(Ae,Pe)})):Me&&!Me._f&&!ua(Pe)?U(Ae,Pe,ge):G(Ae,Pe,ge),GT(Ae,r)&&y.state.next({...t}),y.state.next({name:u.mount?Ae:void 0,values:Ms(l)})},H=async Ae=>{u.mount=!0;const ye=Ae.target;let ge=ye.name,Me=!0;const De=mi(n,ge),Pe=Fe=>{Me=Number.isNaN(Fe)||yu(Fe)&&isNaN(Fe.getTime())||cc(Fe,mi(l,ge,Fe))};if(De){let Fe,Xe;const tt=ye.type?$T(De._f):Nk(Ae),nt=Ae.type===_y.BLUR||Ae.type===_y.FOCUS_OUT,ht=!KG(De._f)&&!e.resolver&&!mi(t.errors,ge)&&!De._f.deps||eH(nt,mi(t.touchedFields,ge),t.isSubmitted,v,w),gt=GT(ge,r,nt);Yn(l,ge,tt),nt?(De._f.onBlur&&De._f.onBlur(Ae),p&&p(0)):De._f.onChange&&De._f.onChange(Ae);const Tt=N(ge,tt,nt),Lt=!ca(Tt)||gt;if(!nt&&y.state.next({name:ge,type:Ae.type,values:Ms(l)}),ht)return(g.isValid||b.isValid)&&(e.mode==="onBlur"?nt&&E():nt||E()),Lt&&y.state.next({name:ge,...gt?{}:Tt});if(!nt&&gt&&y.state.next({...t}),e.resolver){const{errors:ft}=await Y([ge]);if(Pe(tt),Me){const Et=HT(t.errors,n,ge),Ct=HT(ft,n,Et.name||ge);Fe=Ct.error,ge=Ct.name,Xe=ca(ft)}}else x([ge],!0),Fe=(await WT(De,r.disabled,l,T,e.shouldUseNativeValidation))[ge],x([ge]),Pe(tt),Me&&(Fe?Xe=!1:(g.isValid||b.isValid)&&(Xe=await O(n,!0)));Me&&(De._f.deps&&se(De._f.deps),W(ge,Xe,Fe,Tt))}},q=(Ae,ye)=>{if(mi(t.errors,ye)&&Ae.focus)return Ae.focus(),1},se=async(Ae,ye={})=>{let ge,Me;const De=Xp(Ae);if(e.resolver){const Pe=await X(Yr(Ae)?Ae:De);ge=ca(Pe),Me=Ae?!De.some(Fe=>mi(Pe,Fe)):ge}else Ae?(Me=(await Promise.all(De.map(async Pe=>{const Fe=mi(n,Pe);return await O(Fe&&Fe._f?{[Pe]:Fe}:Fe)}))).every(Boolean),!(!Me&&!t.isValid)&&E()):Me=ge=await O(n);return y.state.next({...!$o(Ae)||(g.isValid||b.isValid)&&ge!==t.isValid?{}:{name:Ae},...e.resolver||!Ae?{isValid:ge}:{},errors:t.errors}),ye.shouldFocus&&!Me&&Kp(n,q,Ae?De:r.mount),Me},pe=Ae=>{const ye={...u.mount?l:s};return Yr(Ae)?ye:$o(Ae)?mi(ye,Ae):Ae.map(ge=>mi(ye,ge))},ne=(Ae,ye)=>({invalid:!!mi((ye||t).errors,Ae),isDirty:!!mi((ye||t).dirtyFields,Ae),error:mi((ye||t).errors,Ae),isValidating:!!mi(t.validatingFields,Ae),isTouched:!!mi((ye||t).touchedFields,Ae)}),le=Ae=>{Ae&&Xp(Ae).forEach(ye=>cs(t.errors,ye)),y.state.next({errors:Ae?t.errors:{}})},ke=(Ae,ye,ge)=>{const Me=(mi(n,Ae,{_f:{}})._f||{}).ref,De=mi(t.errors,Ae)||{},{ref:Pe,message:Fe,type:Xe,...tt}=De;Yn(t.errors,Ae,{...tt,...ye,ref:Me}),y.state.next({name:Ae,errors:t.errors,isValid:!1}),ge&&ge.shouldFocus&&Me&&Me.focus&&Me.focus()},be=(Ae,ye)=>yo(Ae)?y.state.subscribe({next:ge=>Ae(L(void 0,ye),ge)}):L(Ae,ye,!0),Ee=Ae=>y.state.subscribe({next:ye=>{JG(Ae.name,ye.name,Ae.exact)&&QG(ye,Ae.formState||g,Ie,Ae.reRenderRoot)&&Ae.callback({values:{...l},...t,...ye})}}).unsubscribe,K=Ae=>(u.mount=!0,b={...b,...Ae.formState},Ee({...Ae,formState:b})),J=(Ae,ye={})=>{for(const ge of Ae?Xp(Ae):r.mount)r.mount.delete(ge),r.array.delete(ge),ye.keepValue||(cs(n,ge),cs(l,ge)),!ye.keepError&&cs(t.errors,ge),!ye.keepDirty&&cs(t.dirtyFields,ge),!ye.keepTouched&&cs(t.touchedFields,ge),!ye.keepIsValidating&&cs(t.validatingFields,ge),!e.shouldUnregister&&!ye.keepDefaultValue&&cs(s,ge);y.state.next({values:Ms(l)}),y.state.next({...t,...ye.keepDirty?{isDirty:$()}:{}}),!ye.keepIsValid&&E()},oe=({disabled:Ae,name:ye})=>{(Ba(Ae)&&u.mount||Ae||r.disabled.has(ye))&&(Ae?r.disabled.add(ye):r.disabled.delete(ye))},we=(Ae,ye={})=>{let ge=mi(n,Ae);const Me=Ba(ye.disabled)||Ba(e.disabled);return Yn(n,Ae,{...ge||{},_f:{...ge&&ge._f?ge._f:{ref:{name:Ae}},name:Ae,mount:!0,...ye}}),r.mount.add(Ae),ge?oe({disabled:Ba(ye.disabled)?ye.disabled:e.disabled,name:Ae}):I(Ae,!0,ye.value),{...Me?{disabled:ye.disabled||e.disabled}:{},...e.progressive?{required:!!ye.required,min:Ip(ye.min),max:Ip(ye.max),minLength:Ip(ye.minLength),maxLength:Ip(ye.maxLength),pattern:Ip(ye.pattern)}:{},name:Ae,onChange:H,onBlur:H,ref:De=>{if(De){we(Ae,ye),ge=mi(n,Ae);const Pe=Yr(De.value)&&De.querySelectorAll&&De.querySelectorAll("input,select,textarea")[0]||De,Fe=qG(Pe),Xe=ge._f.refs||[];if(Fe?Xe.find(tt=>tt===Pe):Pe===ge._f.ref)return;Yn(n,Ae,{_f:{...ge._f,...Fe?{refs:[...Xe.filter(lb),Pe,...Array.isArray(mi(s,Ae))?[{}]:[]],ref:{type:Pe.type,name:Ae}}:{ref:Pe}}}),I(Ae,!1,void 0,Pe)}else ge=mi(n,Ae,{}),ge._f&&(ge._f.mount=!1),(e.shouldUnregister||ye.shouldUnregister)&&!(Ok(r.array,Ae)&&u.action)&&r.unMount.add(Ae)}}},ee=()=>e.shouldFocusError&&Kp(n,q,r.mount),re=Ae=>{Ba(Ae)&&(y.state.next({disabled:Ae}),Kp(n,(ye,ge)=>{const Me=mi(n,ge);Me&&(ye.disabled=Me._f.disabled||Ae,Array.isArray(Me._f.refs)&&Me._f.refs.forEach(De=>{De.disabled=Me._f.disabled||Ae}))},0,!1))},ue=(Ae,ye)=>async ge=>{let Me;ge&&(ge.preventDefault&&ge.preventDefault(),ge.persist&&ge.persist());let De=Ms(l);if(y.state.next({isSubmitting:!0}),e.resolver){const{errors:Pe,values:Fe}=await Y();t.errors=Pe,De=Fe}else await O(n);if(r.disabled.size)for(const Pe of r.disabled)Yn(De,Pe,void 0);if(cs(t.errors,"root"),ca(t.errors)){y.state.next({errors:{}});try{await Ae(De,ge)}catch(Pe){Me=Pe}}else ye&&await ye({...t.errors},ge),ee(),setTimeout(ee);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ca(t.errors)&&!Me,submitCount:t.submitCount+1,errors:t.errors}),Me)throw Me},xe=(Ae,ye={})=>{mi(n,Ae)&&(Yr(ye.defaultValue)?B(Ae,Ms(mi(s,Ae))):(B(Ae,ye.defaultValue),Yn(s,Ae,Ms(ye.defaultValue))),ye.keepTouched||cs(t.touchedFields,Ae),ye.keepDirty||(cs(t.dirtyFields,Ae),t.isDirty=ye.defaultValue?$(Ae,Ms(mi(s,Ae))):$()),ye.keepError||(cs(t.errors,Ae),g.isValid&&E()),y.state.next({...t}))},Te=(Ae,ye={})=>{const ge=Ae?Ms(Ae):s,Me=Ms(ge),De=ca(Ae),Pe=De?s:Me;if(ye.keepDefaultValues||(s=ge),!ye.keepValues){if(ye.keepDirtyValues){const Fe=new Set([...r.mount,...Object.keys(Pp(s,l))]);for(const Xe of Array.from(Fe))mi(t.dirtyFields,Xe)?Yn(Pe,Xe,mi(l,Xe)):B(Xe,mi(Pe,Xe))}else{if(e_&&Yr(Ae))for(const Fe of r.mount){const Xe=mi(n,Fe);if(Xe&&Xe._f){const tt=Array.isArray(Xe._f.refs)?Xe._f.refs[0]:Xe._f.ref;if(wy(tt)){const nt=tt.closest("form");if(nt){nt.reset();break}}}}for(const Fe of r.mount)B(Fe,mi(Pe,Fe))}l=Ms(Pe),y.array.next({values:{...Pe}}),y.state.next({values:{...Pe}})}r={mount:ye.keepDirtyValues?r.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!g.isValid||!!ye.keepIsValid||!!ye.keepDirtyValues,u.watch=!!e.shouldUnregister,y.state.next({submitCount:ye.keepSubmitCount?t.submitCount:0,isDirty:De?!1:ye.keepDirty?t.isDirty:!!(ye.keepDefaultValues&&!cc(Ae,s)),isSubmitted:ye.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:De?{}:ye.keepDirtyValues?ye.keepDefaultValues&&l?Pp(s,l):t.dirtyFields:ye.keepDefaultValues&&Ae?Pp(s,Ae):ye.keepDirty?t.dirtyFields:{},touchedFields:ye.keepTouched?t.touchedFields:{},errors:ye.keepErrors?t.errors:{},isSubmitSuccessful:ye.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},ze=(Ae,ye)=>Te(yo(Ae)?Ae(l):Ae,ye),Ce=(Ae,ye={})=>{const ge=mi(n,Ae),Me=ge&&ge._f;if(Me){const De=Me.refs?Me.refs[0]:Me.ref;De.focus&&(De.focus(),ye.shouldSelect&&yo(De.select)&&De.select())}},Ie=Ae=>{t={...t,...Ae}},He={control:{register:we,unregister:J,getFieldState:ne,handleSubmit:ue,setError:ke,_subscribe:Ee,_runSchema:Y,_getWatch:L,_getDirty:$,_setValid:E,_setFieldArray:A,_setDisabledField:oe,_setErrors:C,_getFieldArray:R,_reset:Te,_resetDefaultValues:()=>yo(e.defaultValues)&&e.defaultValues().then(Ae=>{ze(Ae,e.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:V,_disableForm:re,_subjects:y,_proxyFormState:g,get _fields(){return n},get _formValues(){return l},get _state(){return u},set _state(Ae){u=Ae},get _defaultValues(){return s},get _names(){return r},set _names(Ae){r=Ae},get _formState(){return t},get _options(){return e},set _options(Ae){e={...e,...Ae}}},subscribe:K,trigger:se,register:we,handleSubmit:ue,watch:be,setValue:B,getValues:pe,reset:ze,resetField:xe,clearErrors:le,unregister:J,setError:ke,setFocus:Ce,getFieldState:ne};return{...He,formControl:He}}function sH(i={}){const e=fe.useRef(void 0),t=fe.useRef(void 0),[n,s]=fe.useState({isDirty:!1,isValidating:!1,isLoading:yo(i.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:i.errors||{},disabled:i.disabled||!1,isReady:!1,defaultValues:yo(i.defaultValues)?void 0:i.defaultValues});e.current||(e.current={...i.formControl?i.formControl:rH(i),formState:n},i.formControl&&i.defaultValues&&!yo(i.defaultValues)&&i.formControl.reset(i.defaultValues,i.resetOptions));const l=e.current.control;return l._options=i,n_(()=>{const u=l._subscribe({formState:l._proxyFormState,callback:()=>s({...l._formState}),reRenderRoot:!0});return s(r=>({...r,isReady:!0})),l._formState.isReady=!0,u},[l]),fe.useEffect(()=>l._disableForm(i.disabled),[l,i.disabled]),fe.useEffect(()=>{i.mode&&(l._options.mode=i.mode),i.reValidateMode&&(l._options.reValidateMode=i.reValidateMode),i.errors&&!ca(i.errors)&&l._setErrors(i.errors)},[l,i.errors,i.mode,i.reValidateMode]),fe.useEffect(()=>{i.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,i.shouldUnregister]),fe.useEffect(()=>{if(l._proxyFormState.isDirty){const u=l._getDirty();u!==n.isDirty&&l._subjects.state.next({isDirty:u})}},[l,n.isDirty]),fe.useEffect(()=>{i.values&&!cc(i.values,t.current)?(l._reset(i.values,l._options.resetOptions),t.current=i.values,s(u=>({...u}))):l._resetDefaultValues()},[l,i.values]),fe.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),e.current.formState=Fk(n,l),e.current}const YT=(i,e,t)=>{if(i&&"reportValidity"in i){const n=mi(t,e);i.setCustomValidity(n&&n.message||""),i.reportValidity()}},Yk=(i,e)=>{for(const t in e.fields){const n=e.fields[t];n&&n.ref&&"reportValidity"in n.ref?YT(n.ref,t,i):n&&n.refs&&n.refs.forEach(s=>YT(s,t,i))}},aH=(i,e)=>{e.shouldUseNativeValidation&&Yk(i,e);const t={};for(const n in i){const s=mi(e.fields,n),l=Object.assign(i[n]||{},{ref:s&&s.ref});if(oH(e.names||Object.keys(i),n)){const u=Object.assign({},mi(t,n));Yn(u,"root",l),Yn(t,n,u)}else Yn(t,n,l)}return t},oH=(i,e)=>{const t=ZT(e);return i.some(n=>ZT(n).match(`^${t}\\.\\d+`))};function ZT(i){return i.replace(/\]|\[/g,"")}function lH(i,e){for(var t={};i.length;){var n=i[0],s=n.code,l=n.message,u=n.path.join(".");if(!t[u])if("unionErrors"in n){var r=n.unionErrors[0].errors[0];t[u]={message:r.message,type:r.code}}else t[u]={message:l,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(g){return g.errors.forEach(function(b){return i.push(b)})}),e){var p=t[u].types,f=p&&p[n.code];t[u]=$k(u,e,t,s,f?[].concat(f,n.message):n.message)}i.shift()}return t}function cH(i,e,t){return t===void 0&&(t={}),function(n,s,l){try{return Promise.resolve(function(u,r){try{var p=Promise.resolve(i[t.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(f){return l.shouldUseNativeValidation&&Yk({},l),{errors:{},values:t.raw?Object.assign({},n):f}})}catch(f){return r(f)}return p&&p.then?p.then(void 0,r):p}(0,function(u){if(function(r){return Array.isArray(r==null?void 0:r.errors)}(u))return{values:{},errors:aH(lH(u.errors,!l.shouldUseNativeValidation&&l.criteriaMode==="all"),l)};throw u}))}catch(u){return Promise.reject(u)}}}var jn;(function(i){i.assertEqual=s=>s;function e(s){}i.assertIs=e;function t(s){throw new Error}i.assertNever=t,i.arrayToEnum=s=>{const l={};for(const u of s)l[u]=u;return l},i.getValidEnumValues=s=>{const l=i.objectKeys(s).filter(r=>typeof s[s[r]]!="number"),u={};for(const r of l)u[r]=s[r];return i.objectValues(u)},i.objectValues=s=>i.objectKeys(s).map(function(l){return s[l]}),i.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const l=[];for(const u in s)Object.prototype.hasOwnProperty.call(s,u)&&l.push(u);return l},i.find=(s,l)=>{for(const u of s)if(l(u))return u},i.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,l=" | "){return s.map(u=>typeof u=="string"?`'${u}'`:u).join(l)}i.joinValues=n,i.jsonStringifyReplacer=(s,l)=>typeof l=="bigint"?l.toString():l})(jn||(jn={}));var dv;(function(i){i.mergeShapes=(e,t)=>({...e,...t})})(dv||(dv={}));const Si=jn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),El=i=>{switch(typeof i){case"undefined":return Si.undefined;case"string":return Si.string;case"number":return isNaN(i)?Si.nan:Si.number;case"boolean":return Si.boolean;case"function":return Si.function;case"bigint":return Si.bigint;case"symbol":return Si.symbol;case"object":return Array.isArray(i)?Si.array:i===null?Si.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?Si.promise:typeof Map<"u"&&i instanceof Map?Si.map:typeof Set<"u"&&i instanceof Set?Si.set:typeof Date<"u"&&i instanceof Date?Si.date:Si.object;default:return Si.unknown}},Ht=jn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),uH=i=>JSON.stringify(i,null,2).replace(/"([^"]+)":/g,"$1:");class Wa extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(l){return l.message},n={_errors:[]},s=l=>{for(const u of l.issues)if(u.code==="invalid_union")u.unionErrors.map(s);else if(u.code==="invalid_return_type")s(u.returnTypeError);else if(u.code==="invalid_arguments")s(u.argumentsError);else if(u.path.length===0)n._errors.push(t(u));else{let r=n,p=0;for(;p<u.path.length;){const f=u.path[p];p===u.path.length-1?(r[f]=r[f]||{_errors:[]},r[f]._errors.push(t(u))):r[f]=r[f]||{_errors:[]},r=r[f],p++}}};return s(this),n}static assert(e){if(!(e instanceof Wa))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,jn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Wa.create=i=>new Wa(i);const oh=(i,e)=>{let t;switch(i.code){case Ht.invalid_type:i.received===Si.undefined?t="Required":t=`Expected ${i.expected}, received ${i.received}`;break;case Ht.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(i.expected,jn.jsonStringifyReplacer)}`;break;case Ht.unrecognized_keys:t=`Unrecognized key(s) in object: ${jn.joinValues(i.keys,", ")}`;break;case Ht.invalid_union:t="Invalid input";break;case Ht.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${jn.joinValues(i.options)}`;break;case Ht.invalid_enum_value:t=`Invalid enum value. Expected ${jn.joinValues(i.options)}, received '${i.received}'`;break;case Ht.invalid_arguments:t="Invalid function arguments";break;case Ht.invalid_return_type:t="Invalid function return type";break;case Ht.invalid_date:t="Invalid date";break;case Ht.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(t=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?t=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?t=`Invalid input: must end with "${i.validation.endsWith}"`:jn.assertNever(i.validation):i.validation!=="regex"?t=`Invalid ${i.validation}`:t="Invalid";break;case Ht.too_small:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:t="Invalid input";break;case Ht.too_big:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?t=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:t="Invalid input";break;case Ht.custom:t="Invalid input";break;case Ht.invalid_intersection_types:t="Intersection results could not be merged";break;case Ht.not_multiple_of:t=`Number must be a multiple of ${i.multipleOf}`;break;case Ht.not_finite:t="Number must be finite";break;default:t=e.defaultError,jn.assertNever(i)}return{message:t}};let Zk=oh;function dH(i){Zk=i}function Sy(){return Zk}const Ey=i=>{const{data:e,path:t,errorMaps:n,issueData:s}=i,l=[...t,...s.path||[]],u={...s,path:l};if(s.message!==void 0)return{...s,path:l,message:s.message};let r="";const p=n.filter(f=>!!f).slice().reverse();for(const f of p)r=f(u,{data:e,defaultError:r}).message;return{...s,path:l,message:r}},hH=[];function yi(i,e){const t=Sy(),n=Ey({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,t,t===oh?void 0:oh].filter(s=>!!s)});i.common.issues.push(n)}class Ks{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const s of t){if(s.status==="aborted")return rn;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const s of t){const l=await s.key,u=await s.value;n.push({key:l,value:u})}return Ks.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const s of t){const{key:l,value:u}=s;if(l.status==="aborted"||u.status==="aborted")return rn;l.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),l.value!=="__proto__"&&(typeof u.value<"u"||s.alwaysSet)&&(n[l.value]=u.value)}return{status:e.value,value:n}}}const rn=Object.freeze({status:"aborted"}),Hd=i=>({status:"dirty",value:i}),xa=i=>({status:"valid",value:i}),hv=i=>i.status==="aborted",pv=i=>i.status==="dirty",Ru=i=>i.status==="valid",yf=i=>typeof Promise<"u"&&i instanceof Promise;function ky(i,e,t,n){if(typeof e=="function"?i!==e||!0:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(i)}function Xk(i,e,t,n,s){if(typeof e=="function"?i!==e||!0:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(i,t),t}var Ri;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ri||(Ri={}));var Fp,Bp;class Xo{constructor(e,t,n,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const XT=(i,e)=>{if(Ru(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Wa(i.common.issues);return this._error=t,this._error}}};function yn(i){if(!i)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:s}=i;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(u,r)=>{var p,f;const{message:g}=i;return u.code==="invalid_enum_value"?{message:g??r.defaultError}:typeof r.data>"u"?{message:(p=g??n)!==null&&p!==void 0?p:r.defaultError}:u.code!=="invalid_type"?{message:r.defaultError}:{message:(f=g??t)!==null&&f!==void 0?f:r.defaultError}},description:s}}class _n{get description(){return this._def.description}_getType(e){return El(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:El(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ks,ctx:{common:e.parent.common,data:e.data,parsedType:El(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(yf(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const s={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:El(e)},l=this._parseSync({data:e,path:s.path,parent:s});return XT(s,l)}"~validate"(e){var t,n;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:El(e)};if(!this["~standard"].async)try{const l=this._parseSync({data:e,path:[],parent:s});return Ru(l)?{value:l.value}:{issues:s.common.issues}}catch(l){!((n=(t=l==null?void 0:l.message)===null||t===void 0?void 0:t.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(l=>Ru(l)?{value:l.value}:{issues:s.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:El(e)},s=this._parse({data:e,path:n.path,parent:n}),l=await(yf(s)?s:Promise.resolve(s));return XT(n,l)}refine(e,t){const n=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,l)=>{const u=e(s),r=()=>l.addIssue({code:Ht.custom,...n(s)});return typeof Promise<"u"&&u instanceof Promise?u.then(p=>p?!0:(r(),!1)):u?!0:(r(),!1)})}refinement(e,t){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof t=="function"?t(n,s):t),!1))}_refinement(e){return new So({schema:this,typeName:en.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Go.create(this,this._def)}nullable(){return kc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return bo.create(this)}promise(){return ch.create(this,this._def)}or(e){return _f.create([this,e],this._def)}and(e){return wf.create(this,e,this._def)}transform(e){return new So({...yn(this._def),schema:this,typeName:en.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new kf({...yn(this._def),innerType:this,defaultValue:t,typeName:en.ZodDefault})}brand(){return new a_({typeName:en.ZodBranded,type:this,...yn(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Af({...yn(this._def),innerType:this,catchValue:t,typeName:en.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return sm.create(this,e)}readonly(){return Mf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const pH=/^c[^\s-]{8,}$/i,fH=/^[0-9a-z]+$/,mH=/^[0-9A-HJKMNP-TV-Z]{26}$/i,gH=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,yH=/^[a-z0-9_-]{21}$/i,xH=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,bH=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,vH=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_H="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let cb;const wH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,TH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,CH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,SH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,EH=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,kH=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Kk="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",AH=new RegExp(`^${Kk}$`);function Qk(i){let e="[0-5]\\d";i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`);const t=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function MH(i){return new RegExp(`^${Qk(i)}$`)}function Jk(i){let e=`${Kk}T${Qk(i)}`;const t=[];return t.push(i.local?"Z?":"Z"),i.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function PH(i,e){return!!((e==="v4"||!e)&&wH.test(i)||(e==="v6"||!e)&&CH.test(i))}function IH(i,e){if(!xH.test(i))return!1;try{const[t]=i.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function DH(i,e){return!!((e==="v4"||!e)&&TH.test(i)||(e==="v6"||!e)&&SH.test(i))}class xo extends _n{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Si.string){const l=this._getOrReturnCtx(e);return yi(l,{code:Ht.invalid_type,expected:Si.string,received:l.parsedType}),rn}const n=new Ks;let s;for(const l of this._def.checks)if(l.kind==="min")e.data.length<l.value&&(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),n.dirty());else if(l.kind==="max")e.data.length>l.value&&(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),n.dirty());else if(l.kind==="length"){const u=e.data.length>l.value,r=e.data.length<l.value;(u||r)&&(s=this._getOrReturnCtx(e,s),u?yi(s,{code:Ht.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):r&&yi(s,{code:Ht.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),n.dirty())}else if(l.kind==="email")vH.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"email",code:Ht.invalid_string,message:l.message}),n.dirty());else if(l.kind==="emoji")cb||(cb=new RegExp(_H,"u")),cb.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"emoji",code:Ht.invalid_string,message:l.message}),n.dirty());else if(l.kind==="uuid")gH.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"uuid",code:Ht.invalid_string,message:l.message}),n.dirty());else if(l.kind==="nanoid")yH.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"nanoid",code:Ht.invalid_string,message:l.message}),n.dirty());else if(l.kind==="cuid")pH.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"cuid",code:Ht.invalid_string,message:l.message}),n.dirty());else if(l.kind==="cuid2")fH.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"cuid2",code:Ht.invalid_string,message:l.message}),n.dirty());else if(l.kind==="ulid")mH.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"ulid",code:Ht.invalid_string,message:l.message}),n.dirty());else if(l.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),yi(s,{validation:"url",code:Ht.invalid_string,message:l.message}),n.dirty()}else l.kind==="regex"?(l.regex.lastIndex=0,l.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"regex",code:Ht.invalid_string,message:l.message}),n.dirty())):l.kind==="trim"?e.data=e.data.trim():l.kind==="includes"?e.data.includes(l.value,l.position)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),n.dirty()):l.kind==="toLowerCase"?e.data=e.data.toLowerCase():l.kind==="toUpperCase"?e.data=e.data.toUpperCase():l.kind==="startsWith"?e.data.startsWith(l.value)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.invalid_string,validation:{startsWith:l.value},message:l.message}),n.dirty()):l.kind==="endsWith"?e.data.endsWith(l.value)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.invalid_string,validation:{endsWith:l.value},message:l.message}),n.dirty()):l.kind==="datetime"?Jk(l).test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.invalid_string,validation:"datetime",message:l.message}),n.dirty()):l.kind==="date"?AH.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.invalid_string,validation:"date",message:l.message}),n.dirty()):l.kind==="time"?MH(l).test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.invalid_string,validation:"time",message:l.message}),n.dirty()):l.kind==="duration"?bH.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"duration",code:Ht.invalid_string,message:l.message}),n.dirty()):l.kind==="ip"?PH(e.data,l.version)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"ip",code:Ht.invalid_string,message:l.message}),n.dirty()):l.kind==="jwt"?IH(e.data,l.alg)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"jwt",code:Ht.invalid_string,message:l.message}),n.dirty()):l.kind==="cidr"?DH(e.data,l.version)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"cidr",code:Ht.invalid_string,message:l.message}),n.dirty()):l.kind==="base64"?EH.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"base64",code:Ht.invalid_string,message:l.message}),n.dirty()):l.kind==="base64url"?kH.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"base64url",code:Ht.invalid_string,message:l.message}),n.dirty()):jn.assertNever(l);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(s=>e.test(s),{validation:t,code:Ht.invalid_string,...Ri.errToObj(n)})}_addCheck(e){return new xo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ri.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ri.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ri.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ri.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ri.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ri.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ri.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ri.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ri.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ri.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ri.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ri.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ri.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...Ri.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ri.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ri.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Ri.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Ri.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Ri.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Ri.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Ri.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Ri.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Ri.errToObj(t)})}nonempty(e){return this.min(1,Ri.errToObj(e))}trim(){return new xo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new xo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new xo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}xo.create=i=>{var e;return new xo({checks:[],typeName:en.ZodString,coerce:(e=i==null?void 0:i.coerce)!==null&&e!==void 0?e:!1,...yn(i)})};function RH(i,e){const t=(i.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=t>n?t:n,l=parseInt(i.toFixed(s).replace(".","")),u=parseInt(e.toFixed(s).replace(".",""));return l%u/Math.pow(10,s)}class Cc extends _n{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Si.number){const l=this._getOrReturnCtx(e);return yi(l,{code:Ht.invalid_type,expected:Si.number,received:l.parsedType}),rn}let n;const s=new Ks;for(const l of this._def.checks)l.kind==="int"?jn.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),yi(n,{code:Ht.invalid_type,expected:"integer",received:"float",message:l.message}),s.dirty()):l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(n=this._getOrReturnCtx(e,n),yi(n,{code:Ht.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),s.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(n=this._getOrReturnCtx(e,n),yi(n,{code:Ht.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),s.dirty()):l.kind==="multipleOf"?RH(e.data,l.value)!==0&&(n=this._getOrReturnCtx(e,n),yi(n,{code:Ht.not_multiple_of,multipleOf:l.value,message:l.message}),s.dirty()):l.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),yi(n,{code:Ht.not_finite,message:l.message}),s.dirty()):jn.assertNever(l);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ri.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ri.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ri.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ri.toString(t))}setLimit(e,t,n,s){return new Cc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Ri.toString(s)}]})}_addCheck(e){return new Cc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ri.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ri.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ri.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ri.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ri.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ri.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Ri.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ri.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ri.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&jn.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Cc.create=i=>new Cc({checks:[],typeName:en.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...yn(i)});class Sc extends _n{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Si.bigint)return this._getInvalidInput(e);let n;const s=new Ks;for(const l of this._def.checks)l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(n=this._getOrReturnCtx(e,n),yi(n,{code:Ht.too_small,type:"bigint",minimum:l.value,inclusive:l.inclusive,message:l.message}),s.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(n=this._getOrReturnCtx(e,n),yi(n,{code:Ht.too_big,type:"bigint",maximum:l.value,inclusive:l.inclusive,message:l.message}),s.dirty()):l.kind==="multipleOf"?e.data%l.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),yi(n,{code:Ht.not_multiple_of,multipleOf:l.value,message:l.message}),s.dirty()):jn.assertNever(l);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return yi(t,{code:Ht.invalid_type,expected:Si.bigint,received:t.parsedType}),rn}gte(e,t){return this.setLimit("min",e,!0,Ri.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ri.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ri.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ri.toString(t))}setLimit(e,t,n,s){return new Sc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Ri.toString(s)}]})}_addCheck(e){return new Sc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ri.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ri.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ri.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ri.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ri.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Sc.create=i=>{var e;return new Sc({checks:[],typeName:en.ZodBigInt,coerce:(e=i==null?void 0:i.coerce)!==null&&e!==void 0?e:!1,...yn(i)})};class xf extends _n{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Si.boolean){const n=this._getOrReturnCtx(e);return yi(n,{code:Ht.invalid_type,expected:Si.boolean,received:n.parsedType}),rn}return xa(e.data)}}xf.create=i=>new xf({typeName:en.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...yn(i)});class Lu extends _n{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Si.date){const l=this._getOrReturnCtx(e);return yi(l,{code:Ht.invalid_type,expected:Si.date,received:l.parsedType}),rn}if(isNaN(e.data.getTime())){const l=this._getOrReturnCtx(e);return yi(l,{code:Ht.invalid_date}),rn}const n=new Ks;let s;for(const l of this._def.checks)l.kind==="min"?e.data.getTime()<l.value&&(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.too_small,message:l.message,inclusive:!0,exact:!1,minimum:l.value,type:"date"}),n.dirty()):l.kind==="max"?e.data.getTime()>l.value&&(s=this._getOrReturnCtx(e,s),yi(s,{code:Ht.too_big,message:l.message,inclusive:!0,exact:!1,maximum:l.value,type:"date"}),n.dirty()):jn.assertNever(l);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Lu({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Ri.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Ri.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Lu.create=i=>new Lu({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:en.ZodDate,...yn(i)});class Ay extends _n{_parse(e){if(this._getType(e)!==Si.symbol){const n=this._getOrReturnCtx(e);return yi(n,{code:Ht.invalid_type,expected:Si.symbol,received:n.parsedType}),rn}return xa(e.data)}}Ay.create=i=>new Ay({typeName:en.ZodSymbol,...yn(i)});class bf extends _n{_parse(e){if(this._getType(e)!==Si.undefined){const n=this._getOrReturnCtx(e);return yi(n,{code:Ht.invalid_type,expected:Si.undefined,received:n.parsedType}),rn}return xa(e.data)}}bf.create=i=>new bf({typeName:en.ZodUndefined,...yn(i)});class vf extends _n{_parse(e){if(this._getType(e)!==Si.null){const n=this._getOrReturnCtx(e);return yi(n,{code:Ht.invalid_type,expected:Si.null,received:n.parsedType}),rn}return xa(e.data)}}vf.create=i=>new vf({typeName:en.ZodNull,...yn(i)});class lh extends _n{constructor(){super(...arguments),this._any=!0}_parse(e){return xa(e.data)}}lh.create=i=>new lh({typeName:en.ZodAny,...yn(i)});class Eu extends _n{constructor(){super(...arguments),this._unknown=!0}_parse(e){return xa(e.data)}}Eu.create=i=>new Eu({typeName:en.ZodUnknown,...yn(i)});class Dl extends _n{_parse(e){const t=this._getOrReturnCtx(e);return yi(t,{code:Ht.invalid_type,expected:Si.never,received:t.parsedType}),rn}}Dl.create=i=>new Dl({typeName:en.ZodNever,...yn(i)});class My extends _n{_parse(e){if(this._getType(e)!==Si.undefined){const n=this._getOrReturnCtx(e);return yi(n,{code:Ht.invalid_type,expected:Si.void,received:n.parsedType}),rn}return xa(e.data)}}My.create=i=>new My({typeName:en.ZodVoid,...yn(i)});class bo extends _n{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==Si.array)return yi(t,{code:Ht.invalid_type,expected:Si.array,received:t.parsedType}),rn;if(s.exactLength!==null){const u=t.data.length>s.exactLength.value,r=t.data.length<s.exactLength.value;(u||r)&&(yi(t,{code:u?Ht.too_big:Ht.too_small,minimum:r?s.exactLength.value:void 0,maximum:u?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(yi(t,{code:Ht.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(yi(t,{code:Ht.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((u,r)=>s.type._parseAsync(new Xo(t,u,t.path,r)))).then(u=>Ks.mergeArray(n,u));const l=[...t.data].map((u,r)=>s.type._parseSync(new Xo(t,u,t.path,r)));return Ks.mergeArray(n,l)}get element(){return this._def.type}min(e,t){return new bo({...this._def,minLength:{value:e,message:Ri.toString(t)}})}max(e,t){return new bo({...this._def,maxLength:{value:e,message:Ri.toString(t)}})}length(e,t){return new bo({...this._def,exactLength:{value:e,message:Ri.toString(t)}})}nonempty(e){return this.min(1,e)}}bo.create=(i,e)=>new bo({type:i,minLength:null,maxLength:null,exactLength:null,typeName:en.ZodArray,...yn(e)});function Gd(i){if(i instanceof Dr){const e={};for(const t in i.shape){const n=i.shape[t];e[t]=Go.create(Gd(n))}return new Dr({...i._def,shape:()=>e})}else return i instanceof bo?new bo({...i._def,type:Gd(i.element)}):i instanceof Go?Go.create(Gd(i.unwrap())):i instanceof kc?kc.create(Gd(i.unwrap())):i instanceof Ko?Ko.create(i.items.map(e=>Gd(e))):i}class Dr extends _n{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=jn.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Si.object){const f=this._getOrReturnCtx(e);return yi(f,{code:Ht.invalid_type,expected:Si.object,received:f.parsedType}),rn}const{status:n,ctx:s}=this._processInputParams(e),{shape:l,keys:u}=this._getCached(),r=[];if(!(this._def.catchall instanceof Dl&&this._def.unknownKeys==="strip"))for(const f in s.data)u.includes(f)||r.push(f);const p=[];for(const f of u){const g=l[f],b=s.data[f];p.push({key:{status:"valid",value:f},value:g._parse(new Xo(s,b,s.path,f)),alwaysSet:f in s.data})}if(this._def.catchall instanceof Dl){const f=this._def.unknownKeys;if(f==="passthrough")for(const g of r)p.push({key:{status:"valid",value:g},value:{status:"valid",value:s.data[g]}});else if(f==="strict")r.length>0&&(yi(s,{code:Ht.unrecognized_keys,keys:r}),n.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const g of r){const b=s.data[g];p.push({key:{status:"valid",value:g},value:f._parse(new Xo(s,b,s.path,g)),alwaysSet:g in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const f=[];for(const g of p){const b=await g.key,y=await g.value;f.push({key:b,value:y,alwaysSet:g.alwaysSet})}return f}).then(f=>Ks.mergeObjectSync(n,f)):Ks.mergeObjectSync(n,p)}get shape(){return this._def.shape()}strict(e){return Ri.errToObj,new Dr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var s,l,u,r;const p=(u=(l=(s=this._def).errorMap)===null||l===void 0?void 0:l.call(s,t,n).message)!==null&&u!==void 0?u:n.defaultError;return t.code==="unrecognized_keys"?{message:(r=Ri.errToObj(e).message)!==null&&r!==void 0?r:p}:{message:p}}}:{}})}strip(){return new Dr({...this._def,unknownKeys:"strip"})}passthrough(){return new Dr({...this._def,unknownKeys:"passthrough"})}extend(e){return new Dr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Dr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:en.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Dr({...this._def,catchall:e})}pick(e){const t={};return jn.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new Dr({...this._def,shape:()=>t})}omit(e){const t={};return jn.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new Dr({...this._def,shape:()=>t})}deepPartial(){return Gd(this)}partial(e){const t={};return jn.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?t[n]=s:t[n]=s.optional()}),new Dr({...this._def,shape:()=>t})}required(e){const t={};return jn.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let l=this.shape[n];for(;l instanceof Go;)l=l._def.innerType;t[n]=l}}),new Dr({...this._def,shape:()=>t})}keyof(){return eA(jn.objectKeys(this.shape))}}Dr.create=(i,e)=>new Dr({shape:()=>i,unknownKeys:"strip",catchall:Dl.create(),typeName:en.ZodObject,...yn(e)});Dr.strictCreate=(i,e)=>new Dr({shape:()=>i,unknownKeys:"strict",catchall:Dl.create(),typeName:en.ZodObject,...yn(e)});Dr.lazycreate=(i,e)=>new Dr({shape:i,unknownKeys:"strip",catchall:Dl.create(),typeName:en.ZodObject,...yn(e)});class _f extends _n{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function s(l){for(const r of l)if(r.result.status==="valid")return r.result;for(const r of l)if(r.result.status==="dirty")return t.common.issues.push(...r.ctx.common.issues),r.result;const u=l.map(r=>new Wa(r.ctx.common.issues));return yi(t,{code:Ht.invalid_union,unionErrors:u}),rn}if(t.common.async)return Promise.all(n.map(async l=>{const u={...t,common:{...t.common,issues:[]},parent:null};return{result:await l._parseAsync({data:t.data,path:t.path,parent:u}),ctx:u}})).then(s);{let l;const u=[];for(const p of n){const f={...t,common:{...t.common,issues:[]},parent:null},g=p._parseSync({data:t.data,path:t.path,parent:f});if(g.status==="valid")return g;g.status==="dirty"&&!l&&(l={result:g,ctx:f}),f.common.issues.length&&u.push(f.common.issues)}if(l)return t.common.issues.push(...l.ctx.common.issues),l.result;const r=u.map(p=>new Wa(p));return yi(t,{code:Ht.invalid_union,unionErrors:r}),rn}}get options(){return this._def.options}}_f.create=(i,e)=>new _f({options:i,typeName:en.ZodUnion,...yn(e)});const wl=i=>i instanceof Cf?wl(i.schema):i instanceof So?wl(i.innerType()):i instanceof Sf?[i.value]:i instanceof Ec?i.options:i instanceof Ef?jn.objectValues(i.enum):i instanceof kf?wl(i._def.innerType):i instanceof bf?[void 0]:i instanceof vf?[null]:i instanceof Go?[void 0,...wl(i.unwrap())]:i instanceof kc?[null,...wl(i.unwrap())]:i instanceof a_||i instanceof Mf?wl(i.unwrap()):i instanceof Af?wl(i._def.innerType):[];class vx extends _n{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Si.object)return yi(t,{code:Ht.invalid_type,expected:Si.object,received:t.parsedType}),rn;const n=this.discriminator,s=t.data[n],l=this.optionsMap.get(s);return l?t.common.async?l._parseAsync({data:t.data,path:t.path,parent:t}):l._parseSync({data:t.data,path:t.path,parent:t}):(yi(t,{code:Ht.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),rn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const s=new Map;for(const l of t){const u=wl(l.shape[e]);if(!u.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const r of u){if(s.has(r))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(r)}`);s.set(r,l)}}return new vx({typeName:en.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...yn(n)})}}function fv(i,e){const t=El(i),n=El(e);if(i===e)return{valid:!0,data:i};if(t===Si.object&&n===Si.object){const s=jn.objectKeys(e),l=jn.objectKeys(i).filter(r=>s.indexOf(r)!==-1),u={...i,...e};for(const r of l){const p=fv(i[r],e[r]);if(!p.valid)return{valid:!1};u[r]=p.data}return{valid:!0,data:u}}else if(t===Si.array&&n===Si.array){if(i.length!==e.length)return{valid:!1};const s=[];for(let l=0;l<i.length;l++){const u=i[l],r=e[l],p=fv(u,r);if(!p.valid)return{valid:!1};s.push(p.data)}return{valid:!0,data:s}}else return t===Si.date&&n===Si.date&&+i==+e?{valid:!0,data:i}:{valid:!1}}class wf extends _n{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=(l,u)=>{if(hv(l)||hv(u))return rn;const r=fv(l.value,u.value);return r.valid?((pv(l)||pv(u))&&t.dirty(),{status:t.value,value:r.data}):(yi(n,{code:Ht.invalid_intersection_types}),rn)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([l,u])=>s(l,u)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}wf.create=(i,e,t)=>new wf({left:i,right:e,typeName:en.ZodIntersection,...yn(t)});class Ko extends _n{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Si.array)return yi(n,{code:Ht.invalid_type,expected:Si.array,received:n.parsedType}),rn;if(n.data.length<this._def.items.length)return yi(n,{code:Ht.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),rn;!this._def.rest&&n.data.length>this._def.items.length&&(yi(n,{code:Ht.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const l=[...n.data].map((u,r)=>{const p=this._def.items[r]||this._def.rest;return p?p._parse(new Xo(n,u,n.path,r)):null}).filter(u=>!!u);return n.common.async?Promise.all(l).then(u=>Ks.mergeArray(t,u)):Ks.mergeArray(t,l)}get items(){return this._def.items}rest(e){return new Ko({...this._def,rest:e})}}Ko.create=(i,e)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ko({items:i,typeName:en.ZodTuple,rest:null,...yn(e)})};class Tf extends _n{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Si.object)return yi(n,{code:Ht.invalid_type,expected:Si.object,received:n.parsedType}),rn;const s=[],l=this._def.keyType,u=this._def.valueType;for(const r in n.data)s.push({key:l._parse(new Xo(n,r,n.path,r)),value:u._parse(new Xo(n,n.data[r],n.path,r)),alwaysSet:r in n.data});return n.common.async?Ks.mergeObjectAsync(t,s):Ks.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof _n?new Tf({keyType:e,valueType:t,typeName:en.ZodRecord,...yn(n)}):new Tf({keyType:xo.create(),valueType:e,typeName:en.ZodRecord,...yn(t)})}}class Py extends _n{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Si.map)return yi(n,{code:Ht.invalid_type,expected:Si.map,received:n.parsedType}),rn;const s=this._def.keyType,l=this._def.valueType,u=[...n.data.entries()].map(([r,p],f)=>({key:s._parse(new Xo(n,r,n.path,[f,"key"])),value:l._parse(new Xo(n,p,n.path,[f,"value"]))}));if(n.common.async){const r=new Map;return Promise.resolve().then(async()=>{for(const p of u){const f=await p.key,g=await p.value;if(f.status==="aborted"||g.status==="aborted")return rn;(f.status==="dirty"||g.status==="dirty")&&t.dirty(),r.set(f.value,g.value)}return{status:t.value,value:r}})}else{const r=new Map;for(const p of u){const f=p.key,g=p.value;if(f.status==="aborted"||g.status==="aborted")return rn;(f.status==="dirty"||g.status==="dirty")&&t.dirty(),r.set(f.value,g.value)}return{status:t.value,value:r}}}}Py.create=(i,e,t)=>new Py({valueType:e,keyType:i,typeName:en.ZodMap,...yn(t)});class zu extends _n{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Si.set)return yi(n,{code:Ht.invalid_type,expected:Si.set,received:n.parsedType}),rn;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(yi(n,{code:Ht.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(yi(n,{code:Ht.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const l=this._def.valueType;function u(p){const f=new Set;for(const g of p){if(g.status==="aborted")return rn;g.status==="dirty"&&t.dirty(),f.add(g.value)}return{status:t.value,value:f}}const r=[...n.data.values()].map((p,f)=>l._parse(new Xo(n,p,n.path,f)));return n.common.async?Promise.all(r).then(p=>u(p)):u(r)}min(e,t){return new zu({...this._def,minSize:{value:e,message:Ri.toString(t)}})}max(e,t){return new zu({...this._def,maxSize:{value:e,message:Ri.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}zu.create=(i,e)=>new zu({valueType:i,minSize:null,maxSize:null,typeName:en.ZodSet,...yn(e)});class Kd extends _n{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Si.function)return yi(t,{code:Ht.invalid_type,expected:Si.function,received:t.parsedType}),rn;function n(r,p){return Ey({data:r,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Sy(),oh].filter(f=>!!f),issueData:{code:Ht.invalid_arguments,argumentsError:p}})}function s(r,p){return Ey({data:r,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Sy(),oh].filter(f=>!!f),issueData:{code:Ht.invalid_return_type,returnTypeError:p}})}const l={errorMap:t.common.contextualErrorMap},u=t.data;if(this._def.returns instanceof ch){const r=this;return xa(async function(...p){const f=new Wa([]),g=await r._def.args.parseAsync(p,l).catch(w=>{throw f.addIssue(n(p,w)),f}),b=await Reflect.apply(u,this,g);return await r._def.returns._def.type.parseAsync(b,l).catch(w=>{throw f.addIssue(s(b,w)),f})})}else{const r=this;return xa(function(...p){const f=r._def.args.safeParse(p,l);if(!f.success)throw new Wa([n(p,f.error)]);const g=Reflect.apply(u,this,f.data),b=r._def.returns.safeParse(g,l);if(!b.success)throw new Wa([s(g,b.error)]);return b.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Kd({...this._def,args:Ko.create(e).rest(Eu.create())})}returns(e){return new Kd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new Kd({args:e||Ko.create([]).rest(Eu.create()),returns:t||Eu.create(),typeName:en.ZodFunction,...yn(n)})}}class Cf extends _n{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Cf.create=(i,e)=>new Cf({getter:i,typeName:en.ZodLazy,...yn(e)});class Sf extends _n{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return yi(t,{received:t.data,code:Ht.invalid_literal,expected:this._def.value}),rn}return{status:"valid",value:e.data}}get value(){return this._def.value}}Sf.create=(i,e)=>new Sf({value:i,typeName:en.ZodLiteral,...yn(e)});function eA(i,e){return new Ec({values:i,typeName:en.ZodEnum,...yn(e)})}class Ec extends _n{constructor(){super(...arguments),Fp.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return yi(t,{expected:jn.joinValues(n),received:t.parsedType,code:Ht.invalid_type}),rn}if(ky(this,Fp)||Xk(this,Fp,new Set(this._def.values)),!ky(this,Fp).has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return yi(t,{received:t.data,code:Ht.invalid_enum_value,options:n}),rn}return xa(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ec.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ec.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}Fp=new WeakMap;Ec.create=eA;class Ef extends _n{constructor(){super(...arguments),Bp.set(this,void 0)}_parse(e){const t=jn.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Si.string&&n.parsedType!==Si.number){const s=jn.objectValues(t);return yi(n,{expected:jn.joinValues(s),received:n.parsedType,code:Ht.invalid_type}),rn}if(ky(this,Bp)||Xk(this,Bp,new Set(jn.getValidEnumValues(this._def.values))),!ky(this,Bp).has(e.data)){const s=jn.objectValues(t);return yi(n,{received:n.data,code:Ht.invalid_enum_value,options:s}),rn}return xa(e.data)}get enum(){return this._def.values}}Bp=new WeakMap;Ef.create=(i,e)=>new Ef({values:i,typeName:en.ZodNativeEnum,...yn(e)});class ch extends _n{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Si.promise&&t.common.async===!1)return yi(t,{code:Ht.invalid_type,expected:Si.promise,received:t.parsedType}),rn;const n=t.parsedType===Si.promise?t.data:Promise.resolve(t.data);return xa(n.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ch.create=(i,e)=>new ch({type:i,typeName:en.ZodPromise,...yn(e)});class So extends _n{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===en.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null,l={addIssue:u=>{yi(n,u),u.fatal?t.abort():t.dirty()},get path(){return n.path}};if(l.addIssue=l.addIssue.bind(l),s.type==="preprocess"){const u=s.transform(n.data,l);if(n.common.async)return Promise.resolve(u).then(async r=>{if(t.value==="aborted")return rn;const p=await this._def.schema._parseAsync({data:r,path:n.path,parent:n});return p.status==="aborted"?rn:p.status==="dirty"||t.value==="dirty"?Hd(p.value):p});{if(t.value==="aborted")return rn;const r=this._def.schema._parseSync({data:u,path:n.path,parent:n});return r.status==="aborted"?rn:r.status==="dirty"||t.value==="dirty"?Hd(r.value):r}}if(s.type==="refinement"){const u=r=>{const p=s.refinement(r,l);if(n.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return r};if(n.common.async===!1){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return r.status==="aborted"?rn:(r.status==="dirty"&&t.dirty(),u(r.value),{status:t.value,value:r.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(r=>r.status==="aborted"?rn:(r.status==="dirty"&&t.dirty(),u(r.value).then(()=>({status:t.value,value:r.value}))))}if(s.type==="transform")if(n.common.async===!1){const u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ru(u))return u;const r=s.transform(u.value,l);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>Ru(u)?Promise.resolve(s.transform(u.value,l)).then(r=>({status:t.value,value:r})):u);jn.assertNever(s)}}So.create=(i,e,t)=>new So({schema:i,typeName:en.ZodEffects,effect:e,...yn(t)});So.createWithPreprocess=(i,e,t)=>new So({schema:e,effect:{type:"preprocess",transform:i},typeName:en.ZodEffects,...yn(t)});class Go extends _n{_parse(e){return this._getType(e)===Si.undefined?xa(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Go.create=(i,e)=>new Go({innerType:i,typeName:en.ZodOptional,...yn(e)});class kc extends _n{_parse(e){return this._getType(e)===Si.null?xa(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}kc.create=(i,e)=>new kc({innerType:i,typeName:en.ZodNullable,...yn(e)});class kf extends _n{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===Si.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}kf.create=(i,e)=>new kf({innerType:i,typeName:en.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...yn(e)});class Af extends _n{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return yf(s)?s.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new Wa(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Wa(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Af.create=(i,e)=>new Af({innerType:i,typeName:en.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...yn(e)});class Iy extends _n{_parse(e){if(this._getType(e)!==Si.nan){const n=this._getOrReturnCtx(e);return yi(n,{code:Ht.invalid_type,expected:Si.nan,received:n.parsedType}),rn}return{status:"valid",value:e.data}}}Iy.create=i=>new Iy({typeName:en.ZodNaN,...yn(i)});const LH=Symbol("zod_brand");class a_ extends _n{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class sm extends _n{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const l=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?rn:l.status==="dirty"?(t.dirty(),Hd(l.value)):this._def.out._parseAsync({data:l.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?rn:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,t){return new sm({in:e,out:t,typeName:en.ZodPipeline})}}class Mf extends _n{_parse(e){const t=this._def.innerType._parse(e),n=s=>(Ru(s)&&(s.value=Object.freeze(s.value)),s);return yf(t)?t.then(s=>n(s)):n(t)}unwrap(){return this._def.innerType}}Mf.create=(i,e)=>new Mf({innerType:i,typeName:en.ZodReadonly,...yn(e)});function KT(i,e){const t=typeof i=="function"?i(e):typeof i=="string"?{message:i}:i;return typeof t=="string"?{message:t}:t}function tA(i,e={},t){return i?lh.create().superRefine((n,s)=>{var l,u;const r=i(n);if(r instanceof Promise)return r.then(p=>{var f,g;if(!p){const b=KT(e,n),y=(g=(f=b.fatal)!==null&&f!==void 0?f:t)!==null&&g!==void 0?g:!0;s.addIssue({code:"custom",...b,fatal:y})}});if(!r){const p=KT(e,n),f=(u=(l=p.fatal)!==null&&l!==void 0?l:t)!==null&&u!==void 0?u:!0;s.addIssue({code:"custom",...p,fatal:f})}}):lh.create()}const zH={object:Dr.lazycreate};var en;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(en||(en={}));const NH=(i,e={message:`Input not instance of ${i.name}`})=>tA(t=>t instanceof i,e),iA=xo.create,nA=Cc.create,OH=Iy.create,jH=Sc.create,rA=xf.create,FH=Lu.create,BH=Ay.create,$H=bf.create,UH=vf.create,VH=lh.create,GH=Eu.create,HH=Dl.create,qH=My.create,WH=bo.create,YH=Dr.create,ZH=Dr.strictCreate,XH=_f.create,KH=vx.create,QH=wf.create,JH=Ko.create,eq=Tf.create,tq=Py.create,iq=zu.create,nq=Kd.create,rq=Cf.create,sq=Sf.create,aq=Ec.create,oq=Ef.create,lq=ch.create,QT=So.create,cq=Go.create,uq=kc.create,dq=So.createWithPreprocess,hq=sm.create,pq=()=>iA().optional(),fq=()=>nA().optional(),mq=()=>rA().optional(),gq={string:i=>xo.create({...i,coerce:!0}),number:i=>Cc.create({...i,coerce:!0}),boolean:i=>xf.create({...i,coerce:!0}),bigint:i=>Sc.create({...i,coerce:!0}),date:i=>Lu.create({...i,coerce:!0})},yq=rn;var JT=Object.freeze({__proto__:null,defaultErrorMap:oh,setErrorMap:dH,getErrorMap:Sy,makeIssue:Ey,EMPTY_PATH:hH,addIssueToContext:yi,ParseStatus:Ks,INVALID:rn,DIRTY:Hd,OK:xa,isAborted:hv,isDirty:pv,isValid:Ru,isAsync:yf,get util(){return jn},get objectUtil(){return dv},ZodParsedType:Si,getParsedType:El,ZodType:_n,datetimeRegex:Jk,ZodString:xo,ZodNumber:Cc,ZodBigInt:Sc,ZodBoolean:xf,ZodDate:Lu,ZodSymbol:Ay,ZodUndefined:bf,ZodNull:vf,ZodAny:lh,ZodUnknown:Eu,ZodNever:Dl,ZodVoid:My,ZodArray:bo,ZodObject:Dr,ZodUnion:_f,ZodDiscriminatedUnion:vx,ZodIntersection:wf,ZodTuple:Ko,ZodRecord:Tf,ZodMap:Py,ZodSet:zu,ZodFunction:Kd,ZodLazy:Cf,ZodLiteral:Sf,ZodEnum:Ec,ZodNativeEnum:Ef,ZodPromise:ch,ZodEffects:So,ZodTransformer:So,ZodOptional:Go,ZodNullable:kc,ZodDefault:kf,ZodCatch:Af,ZodNaN:Iy,BRAND:LH,ZodBranded:a_,ZodPipeline:sm,ZodReadonly:Mf,custom:tA,Schema:_n,ZodSchema:_n,late:zH,get ZodFirstPartyTypeKind(){return en},coerce:gq,any:VH,array:WH,bigint:jH,boolean:rA,date:FH,discriminatedUnion:KH,effect:QT,enum:aq,function:nq,instanceof:NH,intersection:QH,lazy:rq,literal:sq,map:tq,nan:OH,nativeEnum:oq,never:HH,null:UH,nullable:uq,number:nA,object:YH,oboolean:mq,onumber:fq,optional:cq,ostring:pq,pipeline:hq,preprocess:dq,promise:lq,record:eq,set:iq,strictObject:ZH,string:iA,symbol:BH,transformer:QT,tuple:JH,undefined:$H,union:XH,unknown:GH,void:qH,NEVER:yq,ZodIssueCode:Ht,quotelessJson:uH,ZodError:Wa});const xq=JT.object({url:JT.string().url({message:Qe.t("Invalid URL format")}).min(1,{message:Qe.t("URL is required")}).refine(i=>i.endsWith("/**"),{message:Qe.t("URL must end with a double wildcard (/**)")})}),sA=({onClose:i,onSubmit:e,isLoading:t,initialUrl:n="",modalTitle:s,submitButtonText:l})=>{const{control:u,handleSubmit:r,formState:{errors:p}}=sH({resolver:cH(xq),defaultValues:{url:n}}),f=g=>e(g);return he.jsx(ku,{onClose:i,dataTest:"route-form-modal",children:he.jsxs("form",{onSubmit:r(f),children:[he.jsx(_v,{children:s}),he.jsxs(Ny,{children:[he.jsx(x5,{htmlFor:"url",children:Qe.t("CHAP Core URL")}),he.jsx(HG,{name:"url",control:u,render:({field:g})=>he.jsx(sC,{...g,type:"text",error:!!p.url,onChange:b=>g.onChange(b.value),dataTest:"route-url-input"})}),p.url?he.jsx("p",{className:Cr.mutedText,children:p.url.message}):null]}),he.jsx(wv,{children:he.jsxs(Tv,{children:[he.jsx(Jn,{onClick:i,secondary:!0,disabled:t,dataTest:"cancel-route-button",children:Qe.t("Cancel")}),he.jsx(Jn,{type:"submit",primary:!0,loading:t,disabled:t,dataTest:"submit-route-button",children:l})]})})]})})},bq=()=>{const[i,e]=$e.useState(!1),{saveRoute:t,isSaving:n}=Lk({onSuccess:()=>{e(!1)}}),s=r=>{t({url:r.url})},l=()=>{e(!0)},u=()=>{e(!1)};return he.jsxs(he.Fragment,{children:[he.jsxs("div",{children:[he.jsx("p",{className:Cr.mutedText,children:Qe.t("No route found.")}),he.jsx(Jn,{onClick:l,icon:he.jsx(Ev,{}),small:!0,loading:n,dataTest:"add-route-button",children:Qe.t("Add route")})]}),i&&he.jsx(sA,{onClose:u,onSubmit:s,isLoading:n,initialUrl:"",modalTitle:Qe.t("Add route"),submitButtonText:Qe.t("Add")})]})},vq=({route:i,onClose:e})=>{const{saveRoute:t,isSaving:n}=Lk({onSuccess:()=>{e()}}),s=l=>{t({id:i.id,url:l.url})};return he.jsx(sA,{onClose:e,onSubmit:s,isLoading:n,initialUrl:i.url,modalTitle:Qe.t("Edit route"),submitButtonText:Qe.t("Save")})},_q=({id:i,onSuccess:e,onError:t})=>{const n=uh(),s=zy(),{show:l}=ef(Qe.t("Error deleting route"),{critical:!0}),{show:u}=ef(Qe.t("Route deleted successfully"),{success:!0}),r={resource:"routes",id:i,type:"delete"},{mutate:p,isLoading:f}=iE(()=>n.mutate(r),{onSuccess:()=>{u(),s.invalidateQueries({queryKey:["routes"]}),e==null||e()},onError:g=>{l(),console.error("Error deleting route:",g),t==null||t(g)}});return{deleteRoute:p,isDeleting:f}},wq=({routeId:i,onClose:e})=>{const{deleteRoute:t,isDeleting:n}=_q({id:i,onSuccess:()=>{e()}});return he.jsxs(ku,{onClose:e,children:[he.jsx(_v,{children:Qe.t("Delete route")}),he.jsx(Ny,{children:he.jsx("p",{children:Qe.t("Are you sure you want to delete this route?")})}),he.jsx(wv,{children:he.jsxs(Tv,{children:[he.jsx(Jn,{onClick:e,secondary:!0,children:Qe.t("Cancel")}),he.jsx(Jn,{onClick:()=>t(),destructive:!0,loading:n,children:Qe.t("Delete")})]})})]})},Tq=({route:i})=>{const e=zy(),[t,n]=$e.useState(!1),[s,l]=$e.useState(!1),[u,r]=$e.useState(!1);return he.jsxs(he.Fragment,{children:[he.jsx(Av,{icon:he.jsx(kC,{}),small:!0,onClick:()=>n(!0),component:he.jsxs(b5,{children:[he.jsx(Jp,{dense:!0,onClick:()=>r(!0),label:Qe.t("Edit"),icon:he.jsx(_C,{})}),he.jsx(Jp,{dense:!0,onClick:()=>l(!0),label:Qe.t("Delete"),icon:he.jsx(yC,{}),destructive:!0})]}),children:Qe.t("Sharing")}),t&&he.jsx(VE,{id:i.id,type:"route",onClose:()=>{e.invalidateQueries({queryKey:["routes"]}),n(!1)}}),s&&he.jsx(wq,{routeId:i.id,onClose:()=>l(!1)}),u&&he.jsx(vq,{route:i,onClose:()=>r(!1)})]})},Cq=({route:i})=>$e.useMemo(()=>!!i.sharing.public.startsWith("rw"),[i.sharing.public])?he.jsx(Ho,{warning:!0,title:Qe.t("Public access"),children:Qe.t('Your route is public and can be accessed by anyone. This can potentially expose sensitive data. If you want to restrict access, click the "Sharing" button and remove access for "All users".')}):null,Sq=()=>{const i="id,username,displayName,authorities",{data:e,isLoading:t,error:n}=Rk({queryKey:["me",i],query:{resource:"me",params:{fields:i}},staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return{user:e,isLoading:t,error:n}},Eq=({authority:i})=>{const{user:e,isLoading:t,error:n}=Sq(),s=$e.useMemo(()=>{if(e)return e.authorities.includes("ALL")},[e]);return{hasAuthority:$e.useMemo(()=>{if(e)return s?!0:Array.isArray(i)?i.some(u=>e.authorities.includes(u)):e.authorities.includes(i)},[e,i,s]),isSuperUser:s,isLoading:t,error:n}},Dp=({children:i})=>he.jsx(If,{children:he.jsxs("div",{className:Cr.container,children:[he.jsx("div",{className:Cr.header,children:he.jsx("h2",{children:Qe.t("Route settings")})}),i]})}),kq="F_ROUTE_PRIVATE_ADD",Aq="F_ROUTE_PUBLIC_ADD",Mq=()=>{const{route:i,isLoading:e,error:t}=nm(),{hasAuthority:n,isLoading:s}=Eq({authority:[kq,Aq]});return $e.useEffect(()=>{t&&console.error(t)},[t]),e||s?he.jsx(Dp,{children:he.jsx("div",{className:Cr.loaderContainer,children:he.jsx(Qo,{})})}):t?he.jsx(Dp,{children:he.jsxs("div",{className:Cr.loaderContainer,children:[he.jsx("p",{className:Cr.mutedText,children:Qe.t("There was an error loading the route settings. Please try to reload the page.")}),he.jsx("p",{className:Cr.mutedText,children:Qe.t("If the problem persists, please contact your system administrator.")})]})}):n?i?he.jsx(Dp,{children:he.jsxs("div",{className:Cr.settingsContainer,children:[he.jsx(Cq,{route:i}),he.jsxs("div",{className:Cr.routeInfo,children:[he.jsxs("div",{className:Cr.routeInfoHeader,children:[he.jsx("h3",{children:Qe.t("Route configuration")}),he.jsx(Tq,{route:i})]}),he.jsxs("div",{className:Cr.infoGrid,children:[he.jsx("span",{className:Cr.label,children:Qe.t("Name")}),he.jsx("span",{className:Cr.value,children:i.displayName}),he.jsx("span",{className:Cr.label,children:Qe.t("Code")}),he.jsx("span",{className:Cr.value,children:i.code}),he.jsx("span",{className:Cr.label,children:Qe.t("URL")}),he.jsx("span",{className:Cr.value,children:i.url}),i.authorities.length>0?he.jsxs(he.Fragment,{children:[he.jsx("span",{className:Cr.label,children:Qe.t("Authorities")}),he.jsx("div",{className:Cr.authorities,children:i.authorities.map((l,u)=>he.jsx("span",{className:Cr.authority,children:l},u))})]}):null]})]})]})}):he.jsx(Dp,{children:he.jsx(bq,{})}):he.jsx(Dp,{children:he.jsxs("div",{className:Cr.loaderContainer,children:[he.jsx("p",{className:Cr.mutedText,children:Qe.t("You do not have permission to add or modify routes.")}),he.jsx("p",{className:Cr.mutedText,children:Qe.t("If you think this is an error, please contact your system administrator.")})]})})},Pq="_container_18e5w_1",Iq="_header_18e5w_5",Dq="_loaderContainer_18e5w_16",Rq="_mutedText_18e5w_26",Lq="_info_18e5w_31",zq="_infoHeader_18e5w_38",Nq="_settingsContainer_18e5w_52",Oq="_infoGrid_18e5w_58",jq="_label_18e5w_65",Fq="_value_18e5w_70",ws={container:Pq,header:Iq,loaderContainer:Dq,mutedText:Rq,info:Lq,infoHeader:zq,settingsContainer:Nq,infoGrid:Oq,label:jq,value:Fq},Bq=({route:i})=>{const{data:e,error:t,isLoading:n}=Fy({queryKey:["systemInfo",i.url],queryFn:()=>B3.systemInfoSystemInfoGet()});return{status:e,error:t,isLoading:n}},$q=()=>{const{route:i}=nm(),{data:e,isLoading:t,error:n}=Fy({queryKey:["chap-status",i==null?void 0:i.url],enabled:!!(i!=null&&i.url),queryFn:()=>fetch(`${i==null?void 0:i.url.replace("/**","")}/system-info`).then(s=>s.json()),staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return t?null:n||!e?he.jsx(Ho,{title:Qe.t("Your server might not be secure"),children:he.jsx("span",{className:ws.mutedText,children:Qe.t("CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access on your server firewall.")})}):he.jsx(he.Fragment,{children:he.jsx(Ho,{error:!0,title:Qe.t("Your server is not secure"),children:he.jsx("span",{className:ws.mutedText,children:Qe.t("CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access on your server firewall.")})})})},ub=({children:i})=>he.jsx(If,{children:he.jsxs("div",{className:ws.container,children:[he.jsx("div",{className:ws.header,children:he.jsx("h2",{children:Qe.t("CHAP settings")})}),i]})}),Uq=({route:i})=>{const{status:e,error:t,isLoading:n}=Bq({route:i});return $e.useEffect(()=>{t&&console.error(t)},[t]),n?he.jsx(ub,{children:he.jsx("div",{className:ws.loaderContainer,children:he.jsx(Qo,{})})}):t||!e?he.jsx(ub,{children:he.jsx("div",{children:he.jsx(Ho,{error:!0,title:Qe.t("An error occurred while connecting to the CHAP server."),className:ws.mutedText,children:Qe.t("Are you sure you have configured your route correctly? See the console for more details.")})})}):he.jsx(ub,{children:he.jsxs("div",{className:ws.settingsContainer,children:[he.jsx($q,{}),he.jsxs("div",{className:ws.info,children:[he.jsx("div",{className:ws.infoHeader,children:he.jsx("h3",{children:Qe.t("Server information")})}),he.jsxs("div",{className:ws.infoGrid,children:[e.chap_core_version&&he.jsxs(he.Fragment,{children:[he.jsx("span",{className:ws.label,children:Qe.t("CHAP Version")}),he.jsx("span",{className:ws.value,children:e.chap_core_version})]}),e.python_version&&he.jsxs(he.Fragment,{children:[he.jsx("span",{className:ws.label,children:Qe.t("Python Version")}),he.jsx("span",{className:ws.value,children:e.python_version})]}),e.os&&he.jsxs(he.Fragment,{children:[he.jsx("span",{className:ws.label,children:Qe.t("Operating System")}),he.jsx("span",{className:ws.value,children:e.os})]}),he.jsx("span",{className:ws.label,children:Qe.t("Status")}),he.jsx("span",{className:ws.value,style:{color:Oe.green600},children:Qe.t("Connected")})]})]})]})})},Vq=()=>{const{route:i}=nm();return he.jsxs("div",{className:TG.settingsContainer,children:[he.jsx(Mq,{}),i&&he.jsx(Uq,{route:i})]})},Gq=function(){return null},Hq="_noMatchMessage_35hxr_1",qq="_asideWrapper_35hxr_11",Wq="_collapsed_35hxr_18",Yq="_iconWrapper_35hxr_33",Zq="_collapseButton_35hxr_53",Rp={noMatchMessage:Hq,asideWrapper:qq,collapsed:Wq,iconWrapper:Yq,collapseButton:Zq},Xq="_active_1qg0b_128",Ca={"sidenav-wrap":"_sidenav-wrap_1qg0b_22","sidenav-items":"_sidenav-items_1qg0b_40","sidenav-parent":"_sidenav-parent_1qg0b_48","sidenav-parent-chevron":"_sidenav-parent-chevron_1qg0b_82","parent-is-open":"_parent-is-open_1qg0b_88","sidenav-link-wrapper":"_sidenav-link-wrapper_1qg0b_93","sidenav-link":"_sidenav-link_1qg0b_93","sidenav-link-disabled":"_sidenav-link-disabled_1qg0b_119",active:Xq,"sidenav-item-icon":"_sidenav-item-icon_1qg0b_143","sidenav-parent-has-icon":"_sidenav-parent-has-icon_1qg0b_153","sidenav-divider":"_sidenav-divider_1qg0b_158","sidenav-section-title":"_sidenav-section-title_1qg0b_164","sidenav-footer":"_sidenav-footer_1qg0b_172","sidenav-filter":"_sidenav-filter_1qg0b_176"},Kq=({children:i,className:e})=>he.jsx("nav",{"data-test":"sidenav",className:bn(Ca["sidenav-wrap"],e),children:i}),Qq=({children:i})=>he.jsx("ul",{className:Ca["sidenav-items"],children:i}),Jq=({label:i,icon:e,disabled:t,children:n,open:s,onClick:l})=>he.jsx(he.Fragment,{children:he.jsxs("li",{className:bn(Ca["sidenav-parent"],{[Ca["sidenav-parent-has-icon"]]:e,[Ca["parent-is-open"]]:s}),children:[he.jsxs("button",{onClick:l,disabled:t,children:[e&&he.jsx("span",{className:Ca["sidenav-item-icon"],children:e}),he.jsx("span",{className:Ca["sidenav-parent-label"],children:i}),he.jsx("span",{className:Ca["sidenav-parent-chevron"],children:he.jsx($y,{})})]}),s&&he.jsx("ul",{className:Ca["sidenav-submenu"],children:n})]})}),eW=({children:i,disabled:e})=>he.jsx("li",{className:bn(Ca["sidenav-link"],{[Ca["sidenav-link-disabled"]]:e}),children:i}),tW=({icon:i,active:e,disabled:t,children:n,to:s,LinkComponent:l,label:u,end:r})=>{const p=l?he.jsxs(l,{to:s,end:r,children:[i&&he.jsx("span",{className:Ca["sidenav-item-icon"],children:i}),u]}):he.jsxs("a",{href:s,className:bn({[Ca.active]:e}),children:[i&&he.jsx("span",{className:Ca["sidenav-item-icon"],children:i}),u]});return he.jsx(eW,{disabled:t,children:fe.Children.count(n)>0?n:p})},Dy=({to:i,label:e,disabled:t,end:n})=>he.jsx(tW,{to:i,disabled:t,LinkComponent:m3,label:e,end:n}),iW=({label:i,links:e=[],initiallyOpen:t=!0})=>{const[n,s]=$e.useState(t),l=()=>{s(!n)};return e.length===1?he.jsx(Dy,{to:e[0].to,label:e[0].label,end:!0}):he.jsx(Jq,{label:i,open:n,onClick:l,children:e.map(({to:u,label:r})=>he.jsx(Dy,{to:u,label:r,end:!0},r))})},nW=({className:i,hideSidebar:e})=>{const[t,n]=$e.useState(!1);return $e.useEffect(()=>{e!==void 0&&n(e)},[e]),he.jsxs("aside",{className:bn(Rp.asideWrapper,i,{[Rp.collapsed]:t}),children:[he.jsx(Kq,{children:he.jsxs(Qq,{children:[he.jsx(iW,{label:Qe.t("Evaluate"),links:[{label:"Overview",to:"/evaluate"},{label:"Compare",to:"/evaluate/compare"}]}),he.jsx(Dy,{to:"/predict",label:Qe.t("Predict")}),he.jsx(Dy,{to:"/settings",label:Qe.t("Settings")})]})}),he.jsx("button",{className:Rp.collapseButton,type:"button",onClick:()=>n(!t),children:he.jsx("div",{className:bn(Rp.iconWrapper,{[Rp.collapsed]:t}),children:he.jsx(pC,{})})})]})},rW="_wrapper_mpm4i_8",sW="_main_mpm4i_18",aW="_sidebar_mpm4i_26",oW="_hide_mpm4i_30",lW="_pageTitle_mpm4i_36",cW="_footer_mpm4i_43",Ry={"m-medium":"(min-width: 768px)",wrapper:rW,main:sW,sidebar:aW,hide:oW,pageTitle:lW,footer:cW},uW=({children:i,sidebar:e})=>he.jsxs("div",{className:Ry.wrapper,children:[e,he.jsx("div",{className:Ry.main,children:i})]}),dW=({children:i,hideSidebar:e})=>he.jsx(uW,{sidebar:he.jsx(nW,{hideSidebar:e,className:bn(Ry.sidebar,{[Ry.hide]:e})}),children:i}),hW=()=>he.jsx(dW,{children:he.jsx(u3,{})}),pW="_loadingContainer_111ob_1",fW="_noRouteContainer_111ob_8",mW="_noRouteContent_111ob_15",gW="_noRouteTitle_111ob_22",yW="_noRouteText_111ob_31",xW="_noRouteLink_111ob_38",jd={loadingContainer:pW,noRouteContainer:fW,noRouteContent:mW,noRouteTitle:gW,noRouteText:yW,noRouteLink:xW},bW=()=>he.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[he.jsx("path",{d:"M32.1162 60.999C32.6683 60.9865 33.1261 61.4235 33.1387 61.9756C33.1512 62.5276 32.7141 62.9853 32.1621 62.998C32.1083 62.9993 32.0541 63 32 63C31.9459 63 31.8917 62.9993 31.8379 62.998C31.2859 62.9853 30.8488 62.5276 30.8613 61.9756C30.8739 61.4235 31.3317 60.9865 31.8838 60.999C31.9224 60.9999 31.9611 61 32 61C32.0389 61 32.0776 60.9999 32.1162 60.999ZM26.9697 59.4199C27.3443 59.0624 27.9243 59.0533 28.3096 59.3828L28.3838 59.4531L28.5469 59.6162L28.6172 59.6904C28.9467 60.0757 28.9376 60.6557 28.5801 61.0303C28.2225 61.4047 27.6432 61.4411 27.2432 61.1299L27.166 61.0625L26.9375 60.834L26.8701 60.7568C26.5589 60.3568 26.5953 59.7775 26.9697 59.4199ZM35.6904 59.3828C36.0757 59.0533 36.6557 59.0624 37.0303 59.4199C37.4297 59.8014 37.4439 60.4346 37.0625 60.834L36.834 61.0625L36.7568 61.1299C36.3568 61.4411 35.7775 61.4047 35.4199 61.0303C35.0386 60.6309 35.0538 59.9976 35.4531 59.6162L35.6162 59.4531L35.6904 59.3828ZM25 56C25 55.9459 25.0007 55.8917 25.002 55.8379C25.0147 55.2859 25.4724 54.8488 26.0244 54.8613C26.5765 54.8739 27.0135 55.3317 27.001 55.8838C27.0001 55.9224 27 55.9611 27 56C27 56.0389 27.0001 56.0776 27.001 56.1162L26.998 56.2188C26.9582 56.7239 26.5419 57.1269 26.0244 57.1387C25.4724 57.1512 25.0147 56.7141 25.002 56.1621L25 56ZM38.998 56.1621C38.9853 56.7141 38.5276 57.1512 37.9756 57.1387C37.4235 57.1261 36.9865 56.6683 36.999 56.1162L38.998 56.1621ZM37 56C37 55.9611 36.9999 55.9224 36.999 55.8838L38.998 55.8379C38.9993 55.8917 39 55.9459 39 56C39 56.0541 38.9993 56.1083 38.998 56.1621L36.999 56.1162C36.9999 56.0776 37 56.0389 37 56ZM37.9756 54.8613C38.5276 54.8488 38.9853 55.2859 38.998 55.8379L36.999 55.8838C36.9865 55.3317 37.4235 54.8739 37.9756 54.8613ZM27.2432 50.8701C27.6432 50.5589 28.2225 50.5953 28.5801 50.9697C28.9614 51.3691 28.9462 52.0024 28.5469 52.3838L28.3838 52.5469L28.3096 52.6172C27.9243 52.9467 27.3443 52.9376 26.9697 52.5801C26.5703 52.1986 26.5561 51.5654 26.9375 51.166L27.166 50.9375L27.2432 50.8701ZM35.4199 50.9697C35.7775 50.5953 36.3568 50.5589 36.7568 50.8701L36.834 50.9375L37.0625 51.166L37.1299 51.2432C37.4411 51.6432 37.4047 52.2225 37.0303 52.5801C36.6557 52.9376 36.0757 52.9467 35.6904 52.6172L35.6162 52.5469L35.4531 52.3838L35.3828 52.3096C35.0533 51.9243 35.0624 51.3443 35.4199 50.9697ZM32.1621 49.002C32.7141 49.0147 33.1512 49.4724 33.1387 50.0244C33.1261 50.5765 32.6683 51.0135 32.1162 51.001C32.0776 51.0001 32.0389 51 32 51C31.9611 51 31.9224 51.0001 31.8838 51.001L31.7812 50.998C31.2761 50.9582 30.8731 50.5419 30.8613 50.0244C30.8488 49.4724 31.2859 49.0147 31.8379 49.002L32 49C32.0541 49 32.1083 49.0007 32.1621 49.002Z",fill:"#6C7787"}),he.jsx("path",{d:"M56.1162 36.999C56.6683 36.9865 57.1261 37.4235 57.1387 37.9756C57.1512 38.5276 56.7141 38.9853 56.1621 38.998C56.1083 38.9993 56.0541 39 56 39C55.9459 39 55.8917 38.9993 55.8379 38.998C55.2859 38.9853 54.8488 38.5276 54.8613 37.9756C54.8739 37.4235 55.3317 36.9865 55.8838 36.999C55.9224 36.9999 55.9611 37 56 37C56.0389 37 56.0776 36.9999 56.1162 36.999ZM50.9697 35.4199C51.3443 35.0624 51.9243 35.0533 52.3096 35.3828L52.3838 35.4531L52.5469 35.6162L52.6172 35.6904C52.9467 36.0757 52.9376 36.6557 52.5801 37.0303C52.2225 37.4047 51.6432 37.4411 51.2432 37.1299L51.166 37.0625L50.9375 36.834L50.8701 36.7568C50.5589 36.3568 50.5953 35.7775 50.9697 35.4199ZM59.6904 35.3828C60.0757 35.0533 60.6557 35.0624 61.0303 35.4199C61.4297 35.8014 61.4439 36.4346 61.0625 36.834L60.834 37.0625L60.7568 37.1299C60.3568 37.4411 59.7775 37.4047 59.4199 37.0303C59.0386 36.6309 59.0538 35.9976 59.4531 35.6162L59.6162 35.4531L59.6904 35.3828ZM49 32C49 31.9459 49.0007 31.8917 49.002 31.8379C49.0147 31.2859 49.4724 30.8488 50.0244 30.8613C50.5765 30.8739 51.0135 31.3317 51.001 31.8838C51.0001 31.9224 51 31.9611 51 32C51 32.0389 51.0001 32.0776 51.001 32.1162L50.998 32.2188C50.9582 32.7239 50.5419 33.1269 50.0244 33.1387C49.4724 33.1512 49.0147 32.7141 49.002 32.1621L49 32ZM62.998 32.1621C62.9853 32.7141 62.5276 33.1512 61.9756 33.1387C61.4235 33.1261 60.9865 32.6683 60.999 32.1162L62.998 32.1621ZM61 32C61 31.9611 60.9999 31.9224 60.999 31.8838L62.998 31.8379C62.9993 31.8917 63 31.9459 63 32C63 32.0541 62.9993 32.1083 62.998 32.1621L60.999 32.1162C60.9999 32.0776 61 32.0389 61 32ZM61.9756 30.8613C62.5276 30.8488 62.9853 31.2859 62.998 31.8379L60.999 31.8838C60.9865 31.3317 61.4235 30.8739 61.9756 30.8613ZM51.2432 26.8701C51.6432 26.5589 52.2225 26.5953 52.5801 26.9697C52.9614 27.3691 52.9462 28.0024 52.5469 28.3838L52.3838 28.5469L52.3096 28.6172C51.9243 28.9467 51.3443 28.9376 50.9697 28.5801C50.5703 28.1986 50.5561 27.5654 50.9375 27.166L51.166 26.9375L51.2432 26.8701ZM59.4199 26.9697C59.7775 26.5953 60.3568 26.5589 60.7568 26.8701L60.834 26.9375L61.0625 27.166L61.1299 27.2432C61.4411 27.6432 61.4047 28.2225 61.0303 28.5801C60.6557 28.9376 60.0757 28.9467 59.6904 28.6172L59.6162 28.5469L59.4531 28.3838L59.3828 28.3096C59.0533 27.9243 59.0624 27.3443 59.4199 26.9697ZM56.1621 25.002C56.7141 25.0147 57.1512 25.4724 57.1387 26.0244C57.1261 26.5765 56.6683 27.0135 56.1162 27.001C56.0776 27.0001 56.0389 27 56 27C55.9611 27 55.9224 27.0001 55.8838 27.001L55.7812 26.998C55.2761 26.9582 54.8731 26.5419 54.8613 26.0244C54.8488 25.4724 55.2859 25.0147 55.8379 25.002L56 25C56.0541 25 56.1083 25.0007 56.1621 25.002Z",fill:"#6C7787"}),he.jsx("path",{d:"M13 32C13 29.2386 10.7614 27 8 27C5.23858 27 3 29.2386 3 32C3 34.7614 5.23858 37 8 37C10.7614 37 13 34.7614 13 32ZM15 32C15 35.866 11.866 39 8 39C4.13401 39 1 35.866 1 32C1 28.134 4.13401 25 8 25C11.866 25 15 28.134 15 32Z",fill:"#404B5A"}),he.jsx("path",{d:"M13 56C13 53.2386 10.7614 51 8 51C5.23858 51 3 53.2386 3 56C3 58.7614 5.23858 61 8 61C10.7614 61 13 58.7614 13 56ZM15 56C15 59.866 11.866 63 8 63C4.13401 63 1 59.866 1 56C1 52.134 4.13401 49 8 49C11.866 49 15 52.134 15 56Z",fill:"#404B5A"}),he.jsx("path",{d:"M56.1162 60.999C56.6683 60.9865 57.1261 61.4235 57.1387 61.9756C57.1512 62.5276 56.7141 62.9853 56.1621 62.998C56.1083 62.9993 56.0541 63 56 63C55.9459 63 55.8917 62.9993 55.8379 62.998C55.2859 62.9853 54.8488 62.5276 54.8613 61.9756C54.8739 61.4235 55.3317 60.9865 55.8838 60.999C55.9224 60.9999 55.9611 61 56 61C56.0389 61 56.0776 60.9999 56.1162 60.999ZM50.9697 59.4199C51.3443 59.0624 51.9243 59.0533 52.3096 59.3828L52.3838 59.4531L52.5469 59.6162L52.6172 59.6904C52.9467 60.0757 52.9376 60.6557 52.5801 61.0303C52.2225 61.4047 51.6432 61.4411 51.2432 61.1299L51.166 61.0625L50.9375 60.834L50.8701 60.7568C50.5589 60.3568 50.5953 59.7775 50.9697 59.4199ZM59.6904 59.3828C60.0757 59.0533 60.6557 59.0624 61.0303 59.4199C61.4297 59.8014 61.4439 60.4346 61.0625 60.834L60.834 61.0625L60.7568 61.1299C60.3568 61.4411 59.7775 61.4047 59.4199 61.0303C59.0386 60.6309 59.0538 59.9976 59.4531 59.6162L59.6162 59.4531L59.6904 59.3828ZM49 56C49 55.9459 49.0007 55.8917 49.002 55.8379C49.0147 55.2859 49.4724 54.8488 50.0244 54.8613C50.5765 54.8739 51.0135 55.3317 51.001 55.8838C51.0001 55.9224 51 55.9611 51 56C51 56.0389 51.0001 56.0776 51.001 56.1162L50.998 56.2188C50.9582 56.7239 50.5419 57.1269 50.0244 57.1387C49.4724 57.1512 49.0147 56.7141 49.002 56.1621L49 56ZM62.998 56.1621C62.9853 56.7141 62.5276 57.1512 61.9756 57.1387C61.4235 57.1261 60.9865 56.6683 60.999 56.1162L62.998 56.1621ZM61 56C61 55.9611 60.9999 55.9224 60.999 55.8838L62.998 55.8379C62.9993 55.8917 63 55.9459 63 56C63 56.0541 62.9993 56.1083 62.998 56.1621L60.999 56.1162C60.9999 56.0776 61 56.0389 61 56ZM61.9756 54.8613C62.5276 54.8488 62.9853 55.2859 62.998 55.8379L60.999 55.8838C60.9865 55.3317 61.4235 54.8739 61.9756 54.8613ZM51.2432 50.8701C51.6432 50.5589 52.2225 50.5953 52.5801 50.9697C52.9614 51.3691 52.9462 52.0024 52.5469 52.3838L52.3838 52.5469L52.3096 52.6172C51.9243 52.9467 51.3443 52.9376 50.9697 52.5801C50.5703 52.1986 50.5561 51.5654 50.9375 51.166L51.166 50.9375L51.2432 50.8701ZM59.4199 50.9697C59.7775 50.5953 60.3568 50.5589 60.7568 50.8701L60.834 50.9375L61.0625 51.166L61.1299 51.2432C61.4411 51.6432 61.4047 52.2225 61.0303 52.5801C60.6557 52.9376 60.0757 52.9467 59.6904 52.6172L59.6162 52.5469L59.4531 52.3838L59.3828 52.3096C59.0533 51.9243 59.0624 51.3443 59.4199 50.9697ZM56.1621 49.002C56.7141 49.0147 57.1512 49.4724 57.1387 50.0244C57.1261 50.5765 56.6683 51.0135 56.1162 51.001C56.0776 51.0001 56.0389 51 56 51C55.9611 51 55.9224 51.0001 55.8838 51.001L55.7812 50.998C55.2761 50.9582 54.8731 50.5419 54.8613 50.0244C54.8488 49.4724 55.2859 49.0147 55.8379 49.002L56 49C56.0541 49 56.1083 49.0007 56.1621 49.002Z",fill:"#6C7787"}),he.jsx("path",{d:"M13 8C13 5.23858 10.7614 3 8 3C5.23858 3 3 5.23858 3 8C3 10.7614 5.23858 13 8 13C10.7614 13 13 10.7614 13 8ZM15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1C11.866 1 15 4.13401 15 8Z",fill:"#404B5A"}),he.jsx("path",{d:"M32.1162 12.999C32.6683 12.9865 33.1261 13.4235 33.1387 13.9756C33.1512 14.5276 32.7141 14.9853 32.1621 14.998C32.1083 14.9993 32.0541 15 32 15C31.9459 15 31.8917 14.9993 31.8379 14.998C31.2859 14.9853 30.8488 14.5276 30.8613 13.9756C30.8739 13.4235 31.3317 12.9865 31.8838 12.999C31.9224 12.9999 31.9611 13 32 13C32.0389 13 32.0776 12.9999 32.1162 12.999ZM26.9697 11.4199C27.3443 11.0624 27.9243 11.0533 28.3096 11.3828L28.3838 11.4531L28.5469 11.6162L28.6172 11.6904C28.9467 12.0757 28.9376 12.6557 28.5801 13.0303C28.2225 13.4047 27.6432 13.4411 27.2432 13.1299L27.166 13.0625L26.9375 12.834L26.8701 12.7568C26.5589 12.3568 26.5953 11.7775 26.9697 11.4199ZM35.6904 11.3828C36.0757 11.0533 36.6557 11.0624 37.0303 11.4199C37.4297 11.8014 37.4439 12.4346 37.0625 12.834L36.834 13.0625L36.7568 13.1299C36.3568 13.4411 35.7775 13.4047 35.4199 13.0303C35.0386 12.6309 35.0538 11.9976 35.4531 11.6162L35.6162 11.4531L35.6904 11.3828ZM25 8C25 7.94595 25.0007 7.89168 25.002 7.83789C25.0147 7.28591 25.4724 6.84878 26.0244 6.86133C26.5765 6.87394 27.0135 7.33168 27.001 7.88379C27.0001 7.9224 27 7.96114 27 8C27 8.03886 27.0001 8.0776 27.001 8.11621L26.998 8.21875C26.9582 8.72394 26.5419 9.12685 26.0244 9.13867C25.4724 9.15122 25.0147 8.71409 25.002 8.16211L25 8ZM38.998 8.16211C38.9853 8.71409 38.5276 9.15122 37.9756 9.13867C37.4235 9.12606 36.9865 8.66832 36.999 8.11621L38.998 8.16211ZM37 8C37 7.96114 36.9999 7.9224 36.999 7.88379L38.998 7.83789C38.9993 7.89168 39 7.94595 39 8C39 8.05405 38.9993 8.10832 38.998 8.16211L36.999 8.11621C36.9999 8.0776 37 8.03886 37 8ZM37.9756 6.86133C38.5276 6.84878 38.9853 7.28591 38.998 7.83789L36.999 7.88379C36.9865 7.33168 37.4235 6.87394 37.9756 6.86133ZM27.2432 2.87012C27.6432 2.55893 28.2225 2.59532 28.5801 2.96973C28.9614 3.36912 28.9462 4.00239 28.5469 4.38379L28.3838 4.54688L28.3096 4.61719C27.9243 4.94672 27.3443 4.93763 26.9697 4.58008C26.5703 4.19863 26.5561 3.5654 26.9375 3.16602L27.166 2.9375L27.2432 2.87012ZM35.4199 2.96973C35.7775 2.59532 36.3568 2.55892 36.7568 2.87012L36.834 2.9375L37.0625 3.16602L37.1299 3.24316C37.4411 3.64319 37.4047 4.22248 37.0303 4.58008C36.6557 4.93763 36.0757 4.94672 35.6904 4.61719L35.6162 4.54688L35.4531 4.38379L35.3828 4.30957C35.0533 3.92432 35.0624 3.34427 35.4199 2.96973ZM32.1621 1.00195C32.7141 1.01469 33.1512 1.47239 33.1387 2.02441C33.1261 2.57651 32.6683 3.01353 32.1162 3.00098C32.0776 3.0001 32.0389 3 32 3C31.9611 3 31.9224 3.0001 31.8838 3.00098L31.7812 2.99805C31.2761 2.95825 30.8731 2.54195 30.8613 2.02441C30.8488 1.47239 31.2859 1.01469 31.8379 1.00195L32 1C32.0541 1 32.1083 1.00073 32.1621 1.00195Z",fill:"#6C7787"}),he.jsx("path",{d:"M56.1162 12.999C56.6683 12.9865 57.1261 13.4235 57.1387 13.9756C57.1512 14.5276 56.7141 14.9853 56.1621 14.998C56.1083 14.9993 56.0541 15 56 15C55.9459 15 55.8917 14.9993 55.8379 14.998C55.2859 14.9853 54.8488 14.5276 54.8613 13.9756C54.8739 13.4235 55.3317 12.9865 55.8838 12.999C55.9224 12.9999 55.9611 13 56 13C56.0389 13 56.0776 12.9999 56.1162 12.999ZM50.9697 11.4199C51.3443 11.0624 51.9243 11.0533 52.3096 11.3828L52.3838 11.4531L52.5469 11.6162L52.6172 11.6904C52.9467 12.0757 52.9376 12.6557 52.5801 13.0303C52.2225 13.4047 51.6432 13.4411 51.2432 13.1299L51.166 13.0625L50.9375 12.834L50.8701 12.7568C50.5589 12.3568 50.5953 11.7775 50.9697 11.4199ZM59.6904 11.3828C60.0757 11.0533 60.6557 11.0624 61.0303 11.4199C61.4297 11.8014 61.4439 12.4346 61.0625 12.834L60.834 13.0625L60.7568 13.1299C60.3568 13.4411 59.7775 13.4047 59.4199 13.0303C59.0386 12.6309 59.0538 11.9976 59.4531 11.6162L59.6162 11.4531L59.6904 11.3828ZM49 8C49 7.94595 49.0007 7.89168 49.002 7.83789C49.0147 7.28591 49.4724 6.84878 50.0244 6.86133C50.5765 6.87394 51.0135 7.33168 51.001 7.88379C51.0001 7.9224 51 7.96114 51 8C51 8.03886 51.0001 8.0776 51.001 8.11621L50.998 8.21875C50.9582 8.72394 50.5419 9.12685 50.0244 9.13867C49.4724 9.15122 49.0147 8.71409 49.002 8.16211L49 8ZM62.998 8.16211C62.9853 8.71409 62.5276 9.15122 61.9756 9.13867C61.4235 9.12606 60.9865 8.66832 60.999 8.11621L62.998 8.16211ZM61 8C61 7.96114 60.9999 7.9224 60.999 7.88379L62.998 7.83789C62.9993 7.89168 63 7.94595 63 8C63 8.05405 62.9993 8.10832 62.998 8.16211L60.999 8.11621C60.9999 8.0776 61 8.03886 61 8ZM61.9756 6.86133C62.5276 6.84878 62.9853 7.28591 62.998 7.83789L60.999 7.88379C60.9865 7.33168 61.4235 6.87394 61.9756 6.86133ZM51.2432 2.87012C51.6432 2.55893 52.2225 2.59532 52.5801 2.96973C52.9614 3.36912 52.9462 4.00239 52.5469 4.38379L52.3838 4.54688L52.3096 4.61719C51.9243 4.94672 51.3443 4.93763 50.9697 4.58008C50.5703 4.19863 50.5561 3.5654 50.9375 3.16602L51.166 2.9375L51.2432 2.87012ZM59.4199 2.96973C59.7775 2.59532 60.3568 2.55892 60.7568 2.87012L60.834 2.9375L61.0625 3.16602L61.1299 3.24316C61.4411 3.64319 61.4047 4.22248 61.0303 4.58008C60.6557 4.93763 60.0757 4.94672 59.6904 4.61719L59.6162 4.54688L59.4531 4.38379L59.3828 4.30957C59.0533 3.92432 59.0624 3.34427 59.4199 2.96973ZM56.1621 1.00195C56.7141 1.01469 57.1512 1.47239 57.1387 2.02441C57.1261 2.57651 56.6683 3.01353 56.1162 3.00098C56.0776 3.0001 56.0389 3 56 3C55.9611 3 55.9224 3.0001 55.8838 3.00098L55.7812 2.99805C55.2761 2.95825 54.8731 2.54195 54.8613 2.02441C54.8488 1.47239 55.2859 1.01469 55.8379 1.00195L56 1C56.0541 1 56.1083 1.00073 56.1621 1.00195Z",fill:"#6C7787"}),he.jsx("path",{d:"M26 7C26.5523 7 27 7.44772 27 8C27 8.55228 26.5523 9 26 9H14C13.4477 9 13 8.55228 13 8C13 7.44772 13.4477 7 14 7H26Z",fill:"#404B5A"}),he.jsx("path",{d:"M38.1172 7L38.2197 7.00488C38.7241 7.056 39.1172 7.48217 39.1172 8C39.1172 8.51783 38.7241 8.944 38.2197 8.99512L38.1172 9H38V7H38.1172ZM42.1172 7L42.2197 7.00488C42.7241 7.056 43.1172 7.48217 43.1172 8C43.1172 8.51783 42.7241 8.944 42.2197 8.99512L42.1172 9H41.8828C41.3305 9 40.8828 8.55228 40.8828 8C40.8828 7.44772 41.3305 7 41.8828 7H42.1172ZM46.1172 7L46.2197 7.00488C46.7241 7.056 47.1172 7.48217 47.1172 8C47.1172 8.51783 46.7241 8.944 46.2197 8.99512L46.1172 9H45.8828C45.3305 9 44.8828 8.55228 44.8828 8C44.8828 7.44772 45.3305 7 45.8828 7H46.1172ZM50 7V9H49.8828C49.3305 9 48.8828 8.55228 48.8828 8C48.8828 7.44772 49.3305 7 49.8828 7H50Z",fill:"#6C7787"}),he.jsx("path",{d:"M26 31V33H14V31H26Z",fill:"#404B5A"}),he.jsx("path",{d:"M38.1172 31L38.2197 31.0049C38.7241 31.056 39.1172 31.4822 39.1172 32C39.1172 32.5178 38.7241 32.944 38.2197 32.9951L38.1172 33H38V31H38.1172ZM42.1172 31L42.2197 31.0049C42.7241 31.056 43.1172 31.4822 43.1172 32C43.1172 32.5178 42.7241 32.944 42.2197 32.9951L42.1172 33H41.8828C41.3305 33 40.8828 32.5523 40.8828 32C40.8828 31.4477 41.3305 31 41.8828 31H42.1172ZM46.1172 31L46.2197 31.0049C46.7241 31.056 47.1172 31.4822 47.1172 32C47.1172 32.5178 46.7241 32.944 46.2197 32.9951L46.1172 33H45.8828C45.3305 33 44.8828 32.5523 44.8828 32C44.8828 31.4477 45.3305 31 45.8828 31H46.1172ZM50 31V33H49.8828C49.3305 33 48.8828 32.5523 48.8828 32C48.8828 31.4477 49.3305 31 49.8828 31H50Z",fill:"#6C7787"}),he.jsx("path",{d:"M38.1172 55L38.2197 55.0049C38.7241 55.056 39.1172 55.4822 39.1172 56C39.1172 56.5178 38.7241 56.944 38.2197 56.9951L38.1172 57H38V55H38.1172ZM42.1172 55L42.2197 55.0049C42.7241 55.056 43.1172 55.4822 43.1172 56C43.1172 56.5178 42.7241 56.944 42.2197 56.9951L42.1172 57H41.8828C41.3305 57 40.8828 56.5523 40.8828 56C40.8828 55.4477 41.3305 55 41.8828 55H42.1172ZM46.1172 55L46.2197 55.0049C46.7241 55.056 47.1172 55.4822 47.1172 56C47.1172 56.5178 46.7241 56.944 46.2197 56.9951L46.1172 57H45.8828C45.3305 57 44.8828 56.5523 44.8828 56C44.8828 55.4477 45.3305 55 45.8828 55H46.1172ZM50 55V57H49.8828C49.3305 57 48.8828 56.5523 48.8828 56C48.8828 55.4477 49.3305 55 49.8828 55H50Z",fill:"#6C7787"}),he.jsx("path",{d:"M57 38.1172L56.9951 38.2197C56.944 38.7241 56.5178 39.1172 56 39.1172C55.4822 39.1172 55.056 38.7241 55.0049 38.2197L55 38.1172L55 38L57 38L57 38.1172ZM57 42.1172L56.9951 42.2197C56.944 42.7241 56.5178 43.1172 56 43.1172C55.4822 43.1172 55.056 42.7241 55.0049 42.2197L55 42.1172L55 41.8828C55 41.3305 55.4477 40.8828 56 40.8828C56.5523 40.8828 57 41.3305 57 41.8828L57 42.1172ZM57 46.1172L56.9951 46.2197C56.944 46.7241 56.5178 47.1172 56 47.1172C55.4822 47.1172 55.056 46.7241 55.0049 46.2197L55 46.1172L55 45.8828C55 45.3305 55.4477 44.8828 56 44.8828C56.5523 44.8828 57 45.3305 57 45.8828L57 46.1172ZM57 50L55 50L55 49.8828C55 49.3305 55.4477 48.8828 56 48.8828C56.5523 48.8828 57 49.3305 57 49.8828L57 50Z",fill:"#6C7787"}),he.jsx("path",{d:"M26 55C26.5523 55 27 55.4477 27 56C27 56.5523 26.5523 57 26 57H14V55H26Z",fill:"#404B5A"}),he.jsx("path",{d:"M9 14V26H7V14H9Z",fill:"#404B5A"}),he.jsx("path",{d:"M31 14C31 13.4477 31.4477 13 32 13C32.5523 13 33 13.4477 33 14V26H31V14Z",fill:"#404B5A"}),he.jsx("path",{d:"M9 38V50H7V38H9Z",fill:"#404B5A"}),he.jsx("path",{d:"M31 50V38H33V50C33 50.5523 32.5523 51 32 51C31.4477 51 31 50.5523 31 50Z",fill:"#404B5A"}),he.jsx("path",{d:"M57 14.1172L56.9951 14.2197C56.944 14.7241 56.5178 15.1172 56 15.1172C55.4822 15.1172 55.056 14.7241 55.0049 14.2197L55 14.1172L55 14L57 14L57 14.1172ZM57 18.1172L56.9951 18.2197C56.944 18.7241 56.5178 19.1172 56 19.1172C55.4822 19.1172 55.056 18.7241 55.0049 18.2197L55 18.1172L55 17.8828C55 17.3305 55.4477 16.8828 56 16.8828C56.5523 16.8828 57 17.3305 57 17.8828L57 18.1172ZM57 22.1172L56.9951 22.2197C56.944 22.7241 56.5178 23.1172 56 23.1172C55.4822 23.1172 55.056 22.7241 55.0049 22.2197L55 22.1172L55 21.8828C55 21.3305 55.4477 20.8828 56 20.8828C56.5523 20.8828 57 21.3305 57 21.8828L57 22.1172ZM57 26L55 26L55 25.8828C55 25.3305 55.4477 24.8828 56 24.8828C56.5523 24.8828 57 25.3305 57 25.8828L57 26Z",fill:"#6C7787"}),he.jsx("path",{d:"M37 32C37 29.2386 34.7614 27 32 27C29.2386 27 27 29.2386 27 32C27 34.7614 29.2386 37 32 37C34.7614 37 37 34.7614 37 32ZM39 32C39 35.866 35.866 39 32 39C28.134 39 25 35.866 25 32C25 28.134 28.134 25 32 25C35.866 25 39 28.134 39 32Z",fill:"#404B5A"})]}),vW=({children:i})=>{const{route:e,isLoading:t}=nm(),n=I1();return t?he.jsx("div",{className:jd.loadingContainer,children:he.jsx(Qo,{})}):e?i:he.jsx("div",{className:jd.noRouteContainer,children:he.jsxs("div",{className:jd.noRouteContent,children:[he.jsx(bW,{}),he.jsx("h1",{className:jd.noRouteTitle,children:Qe.t("Get started with the Modeling app")}),he.jsxs("div",{className:jd.noRouteText,children:[he.jsx("p",{children:Qe.t("To get started, create a route that points to a running CHAP server.")}),he.jsx("p",{children:Qe.t("Route and servers are configured on the settings page.")}),he.jsx("a",{href:"https://github.com/dhis2-chap/chap-core/wiki",target:"_blank",rel:"noopener noreferrer",className:jd.noRouteLink,children:Qe.t("Learn more about Modeling and CHAP")})]}),he.jsx(Jn,{onClick:()=>n("/settings"),children:Qe.t("Configure settings")})]})})},_W="_infoAboutReportingBugs_ic1c6_1",wW="_infoAboutReportingBugsInner_ic1c6_7",TW="_icon_ic1c6_16",db={infoAboutReportingBugs:_W,infoAboutReportingBugsInner:wW,icon:TW},aA="1400px",CW=()=>{const[i,e]=$e.useState(!0);return he.jsx("div",{className:db.infoAboutReportingBugs,children:i&&he.jsxs("div",{style:{maxWidth:aA},className:db.infoAboutReportingBugsInner,children:[he.jsxs("div",{children:[he.jsx("span",{className:db.icon,children:he.jsx(PC,{})}),"Please be aware that you are using an alpha version, meaning you could experience bugs or issues. If you encounter any problems, please report to:"," ",he.jsx("a",{href:"mailto:example@example.com?subject=Modeling App | Issue%20Report:&body=RELEVANT%20LOGS:%0ADESCRIBE%20YOUR%20ISSUE:%0AHOW%20TO%20REPRODUCE:%0AIF%20ALLOWED,%20ATTACH%20THE%20DATA%20USED%20WHEN%20FAILING,%20GET%20THE%20DATA%20BY%20USING%20THE%20'DOWNLOAD%20BUTTON.':",children:"chap@dhis2.org"})]}),he.jsx("div",{children:he.jsx(Jn,{small:!0,onClick:()=>e(!i),children:he.jsx(v5,{})})})]})})},SW="_warningMargin_z0zs1_1",EW="_warningMarginInner_z0zs1_6",eC={warningMargin:SW,warningMarginInner:EW},kW=()=>{const{appVersion:i}=jy(),{route:e,isLoading:t}=nm(),n=$e.useRef(void 0),[s,l]=$e.useState(void 0),u=async()=>{i&&await B3.isCompatibleIsCompatibleGet(i==null?void 0:i.full).then(r=>{l(r)}).catch(r=>{l({compatible:!1,description:"Not able to check if the app is compatible with the Chap Core you are using, which means you are probably using an old version of Chap Core. See https://github.com/dhis2-chap/chap-core/releases/ for information on how to update."})})};return $e.useEffect(()=>{!i||t||n.current!==(e==null?void 0:e.url)&&(u(),n.current=e==null?void 0:e.url)},[i,e==null?void 0:e.url]),he.jsx(he.Fragment,{children:s&&!(s!=null&&s.compatible)&&he.jsx("div",{className:eC.warningMargin,style:{maxWidth:aA},children:he.jsx("div",{className:eC.warningMarginInner,children:he.jsxs(Ho,{error:!0,title:"Incompatible versions",children:["Version of the Modeling App is not compatible with the backend (Chap core)",he.jsx("br",{}),he.jsx("br",{}),he.jsx("i",{children:s.description})]})})})})},AW="_container_1u7ck_1",MW="_loadingContainer_1u7ck_5",PW="_errorContainer_1u7ck_12",IW="_emptyContainer_1u7ck_13",DW="_columnSelector_1u7ck_17",Sg={container:AW,loadingContainer:MW,errorContainer:PW,emptyContainer:IW,columnSelector:DW},RW=()=>{const{data:i,error:e,isLoading:t}=Fy({queryKey:["backtests"],queryFn:()=>so.getBacktestsCrudBacktestsGet(),staleTime:3e5,cacheTime:3e5,retry:0});return{backtests:i,error:e,isLoading:t}};/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function LW(){return{accessor:(i,e)=>typeof i=="function"?{...e,accessorFn:i}:{...e,accessorKey:i},display:i=>i,group:i=>i}}function mc(i,e){return typeof i=="function"?i(e):i}function Ya(i,e){return t=>{e.setState(n=>({...n,[i]:mc(t,n[i])}))}}function _x(i){return i instanceof Function}function zW(i){return Array.isArray(i)&&i.every(e=>typeof e=="number")}function NW(i,e){const t=[],n=s=>{s.forEach(l=>{t.push(l);const u=e(l);u!=null&&u.length&&n(u)})};return n(i),t}function tn(i,e,t){let n=[],s;return l=>{let u;t.key&&t.debug&&(u=Date.now());const r=i(l);if(!(r.length!==n.length||r.some((g,b)=>n[b]!==g)))return s;n=r;let f;if(t.key&&t.debug&&(f=Date.now()),s=e(...r),t==null||t.onChange==null||t.onChange(s),t.key&&t.debug&&t!=null&&t.debug()){const g=Math.round((Date.now()-u)*100)/100,b=Math.round((Date.now()-f)*100)/100,y=b/16,w=(v,T)=>{for(v=String(v);v.length<T;)v=" "+v;return v};console.info(`%c ${w(b,5)} /${w(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*y,120))}deg 100% 31%);`,t==null?void 0:t.key)}return s}}function nn(i,e,t,n){return{debug:()=>{var s;return(s=i==null?void 0:i.debugAll)!=null?s:i[e]},key:!1,onChange:n}}function OW(i,e,t,n){const s=()=>{var u;return(u=l.getValue())!=null?u:i.options.renderFallbackValue},l={id:`${e.id}_${t.id}`,row:e,column:t,getValue:()=>e.getValue(n),renderValue:s,getContext:tn(()=>[i,t,e,l],(u,r,p,f)=>({table:u,column:r,row:p,cell:f,getValue:f.getValue,renderValue:f.renderValue}),nn(i.options,"debugCells"))};return i._features.forEach(u=>{u.createCell==null||u.createCell(l,t,e,i)},{}),l}function jW(i,e,t,n){var s,l;const r={...i._getDefaultColumnDef(),...e},p=r.accessorKey;let f=(s=(l=r.id)!=null?l:p?typeof String.prototype.replaceAll=="function"?p.replaceAll(".","_"):p.replace(/\./g,"_"):void 0)!=null?s:typeof r.header=="string"?r.header:void 0,g;if(r.accessorFn?g=r.accessorFn:p&&(p.includes(".")?g=y=>{let w=y;for(const T of p.split(".")){var v;w=(v=w)==null?void 0:v[T]}return w}:g=y=>y[r.accessorKey]),!f)throw new Error;let b={id:`${String(f)}`,accessorFn:g,parent:n,depth:t,columnDef:r,columns:[],getFlatColumns:tn(()=>[!0],()=>{var y;return[b,...(y=b.columns)==null?void 0:y.flatMap(w=>w.getFlatColumns())]},nn(i.options,"debugColumns")),getLeafColumns:tn(()=>[i._getOrderColumnsFn()],y=>{var w;if((w=b.columns)!=null&&w.length){let v=b.columns.flatMap(T=>T.getLeafColumns());return y(v)}return[b]},nn(i.options,"debugColumns"))};for(const y of i._features)y.createColumn==null||y.createColumn(b,i);return b}const Ws="debugHeaders";function tC(i,e,t){var n;let l={id:(n=t.id)!=null?n:e.id,column:e,index:t.index,isPlaceholder:!!t.isPlaceholder,placeholderId:t.placeholderId,depth:t.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const u=[],r=p=>{p.subHeaders&&p.subHeaders.length&&p.subHeaders.map(r),u.push(p)};return r(l),u},getContext:()=>({table:i,header:l,column:e})};return i._features.forEach(u=>{u.createHeader==null||u.createHeader(l,i)}),l}const FW={createTable:i=>{i.getHeaderGroups=tn(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.left,i.getState().columnPinning.right],(e,t,n,s)=>{var l,u;const r=(l=n==null?void 0:n.map(b=>t.find(y=>y.id===b)).filter(Boolean))!=null?l:[],p=(u=s==null?void 0:s.map(b=>t.find(y=>y.id===b)).filter(Boolean))!=null?u:[],f=t.filter(b=>!(n!=null&&n.includes(b.id))&&!(s!=null&&s.includes(b.id)));return Eg(e,[...r,...f,...p],i)},nn(i.options,Ws)),i.getCenterHeaderGroups=tn(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.left,i.getState().columnPinning.right],(e,t,n,s)=>(t=t.filter(l=>!(n!=null&&n.includes(l.id))&&!(s!=null&&s.includes(l.id))),Eg(e,t,i,"center")),nn(i.options,Ws)),i.getLeftHeaderGroups=tn(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.left],(e,t,n)=>{var s;const l=(s=n==null?void 0:n.map(u=>t.find(r=>r.id===u)).filter(Boolean))!=null?s:[];return Eg(e,l,i,"left")},nn(i.options,Ws)),i.getRightHeaderGroups=tn(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.right],(e,t,n)=>{var s;const l=(s=n==null?void 0:n.map(u=>t.find(r=>r.id===u)).filter(Boolean))!=null?s:[];return Eg(e,l,i,"right")},nn(i.options,Ws)),i.getFooterGroups=tn(()=>[i.getHeaderGroups()],e=>[...e].reverse(),nn(i.options,Ws)),i.getLeftFooterGroups=tn(()=>[i.getLeftHeaderGroups()],e=>[...e].reverse(),nn(i.options,Ws)),i.getCenterFooterGroups=tn(()=>[i.getCenterHeaderGroups()],e=>[...e].reverse(),nn(i.options,Ws)),i.getRightFooterGroups=tn(()=>[i.getRightHeaderGroups()],e=>[...e].reverse(),nn(i.options,Ws)),i.getFlatHeaders=tn(()=>[i.getHeaderGroups()],e=>e.map(t=>t.headers).flat(),nn(i.options,Ws)),i.getLeftFlatHeaders=tn(()=>[i.getLeftHeaderGroups()],e=>e.map(t=>t.headers).flat(),nn(i.options,Ws)),i.getCenterFlatHeaders=tn(()=>[i.getCenterHeaderGroups()],e=>e.map(t=>t.headers).flat(),nn(i.options,Ws)),i.getRightFlatHeaders=tn(()=>[i.getRightHeaderGroups()],e=>e.map(t=>t.headers).flat(),nn(i.options,Ws)),i.getCenterLeafHeaders=tn(()=>[i.getCenterFlatHeaders()],e=>e.filter(t=>{var n;return!((n=t.subHeaders)!=null&&n.length)}),nn(i.options,Ws)),i.getLeftLeafHeaders=tn(()=>[i.getLeftFlatHeaders()],e=>e.filter(t=>{var n;return!((n=t.subHeaders)!=null&&n.length)}),nn(i.options,Ws)),i.getRightLeafHeaders=tn(()=>[i.getRightFlatHeaders()],e=>e.filter(t=>{var n;return!((n=t.subHeaders)!=null&&n.length)}),nn(i.options,Ws)),i.getLeafHeaders=tn(()=>[i.getLeftHeaderGroups(),i.getCenterHeaderGroups(),i.getRightHeaderGroups()],(e,t,n)=>{var s,l,u,r,p,f;return[...(s=(l=e[0])==null?void 0:l.headers)!=null?s:[],...(u=(r=t[0])==null?void 0:r.headers)!=null?u:[],...(p=(f=n[0])==null?void 0:f.headers)!=null?p:[]].map(g=>g.getLeafHeaders()).flat()},nn(i.options,Ws))}};function Eg(i,e,t,n){var s,l;let u=0;const r=function(y,w){w===void 0&&(w=1),u=Math.max(u,w),y.filter(v=>v.getIsVisible()).forEach(v=>{var T;(T=v.columns)!=null&&T.length&&r(v.columns,w+1)},0)};r(i);let p=[];const f=(y,w)=>{const v={depth:w,id:[n,`${w}`].filter(Boolean).join("_"),headers:[]},T=[];y.forEach(S=>{const E=[...T].reverse()[0],x=S.column.depth===v.depth;let A,D=!1;if(x&&S.column.parent?A=S.column.parent:(A=S.column,D=!0),E&&(E==null?void 0:E.column)===A)E.subHeaders.push(S);else{const C=tC(t,A,{id:[n,w,A.id,S==null?void 0:S.id].filter(Boolean).join("_"),isPlaceholder:D,placeholderId:D?`${T.filter(I=>I.column===A).length}`:void 0,depth:w,index:T.length});C.subHeaders.push(S),T.push(C)}v.headers.push(S),S.headerGroup=v}),p.push(v),w>0&&f(T,w-1)},g=e.map((y,w)=>tC(t,y,{depth:u,index:w}));f(g,u-1),p.reverse();const b=y=>y.filter(v=>v.column.getIsVisible()).map(v=>{let T=0,S=0,E=[0];v.subHeaders&&v.subHeaders.length?(E=[],b(v.subHeaders).forEach(A=>{let{colSpan:D,rowSpan:C}=A;T+=D,E.push(C)})):T=1;const x=Math.min(...E);return S=S+x,v.colSpan=T,v.rowSpan=S,{colSpan:T,rowSpan:S}});return b((s=(l=p[0])==null?void 0:l.headers)!=null?s:[]),p}const BW=(i,e,t,n,s,l,u)=>{let r={id:e,index:n,original:t,depth:s,parentId:u,_valuesCache:{},_uniqueValuesCache:{},getValue:p=>{if(r._valuesCache.hasOwnProperty(p))return r._valuesCache[p];const f=i.getColumn(p);if(f!=null&&f.accessorFn)return r._valuesCache[p]=f.accessorFn(r.original,n),r._valuesCache[p]},getUniqueValues:p=>{if(r._uniqueValuesCache.hasOwnProperty(p))return r._uniqueValuesCache[p];const f=i.getColumn(p);if(f!=null&&f.accessorFn)return f.columnDef.getUniqueValues?(r._uniqueValuesCache[p]=f.columnDef.getUniqueValues(r.original,n),r._uniqueValuesCache[p]):(r._uniqueValuesCache[p]=[r.getValue(p)],r._uniqueValuesCache[p])},renderValue:p=>{var f;return(f=r.getValue(p))!=null?f:i.options.renderFallbackValue},subRows:[],getLeafRows:()=>NW(r.subRows,p=>p.subRows),getParentRow:()=>r.parentId?i.getRow(r.parentId,!0):void 0,getParentRows:()=>{let p=[],f=r;for(;;){const g=f.getParentRow();if(!g)break;p.push(g),f=g}return p.reverse()},getAllCells:tn(()=>[i.getAllLeafColumns()],p=>p.map(f=>OW(i,r,f,f.id)),nn(i.options,"debugRows")),_getAllCellsByColumnId:tn(()=>[r.getAllCells()],p=>p.reduce((f,g)=>(f[g.column.id]=g,f),{}),nn(i.options,"debugRows"))};for(let p=0;p<i._features.length;p++){const f=i._features[p];f==null||f.createRow==null||f.createRow(r,i)}return r},$W={createColumn:(i,e)=>{i._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,i.id),i.getFacetedRowModel=()=>i._getFacetedRowModel?i._getFacetedRowModel():e.getPreFilteredRowModel(),i._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,i.id),i.getFacetedUniqueValues=()=>i._getFacetedUniqueValues?i._getFacetedUniqueValues():new Map,i._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,i.id),i.getFacetedMinMaxValues=()=>{if(i._getFacetedMinMaxValues)return i._getFacetedMinMaxValues()}}},oA=(i,e,t)=>{var n,s;const l=t==null||(n=t.toString())==null?void 0:n.toLowerCase();return!!(!((s=i.getValue(e))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(l))};oA.autoRemove=i=>vo(i);const lA=(i,e,t)=>{var n;return!!(!((n=i.getValue(e))==null||(n=n.toString())==null)&&n.includes(t))};lA.autoRemove=i=>vo(i);const cA=(i,e,t)=>{var n;return((n=i.getValue(e))==null||(n=n.toString())==null?void 0:n.toLowerCase())===(t==null?void 0:t.toLowerCase())};cA.autoRemove=i=>vo(i);const uA=(i,e,t)=>{var n;return(n=i.getValue(e))==null?void 0:n.includes(t)};uA.autoRemove=i=>vo(i);const dA=(i,e,t)=>!t.some(n=>{var s;return!((s=i.getValue(e))!=null&&s.includes(n))});dA.autoRemove=i=>vo(i)||!(i!=null&&i.length);const hA=(i,e,t)=>t.some(n=>{var s;return(s=i.getValue(e))==null?void 0:s.includes(n)});hA.autoRemove=i=>vo(i)||!(i!=null&&i.length);const pA=(i,e,t)=>i.getValue(e)===t;pA.autoRemove=i=>vo(i);const fA=(i,e,t)=>i.getValue(e)==t;fA.autoRemove=i=>vo(i);const o_=(i,e,t)=>{let[n,s]=t;const l=i.getValue(e);return l>=n&&l<=s};o_.resolveFilterValue=i=>{let[e,t]=i,n=typeof e!="number"?parseFloat(e):e,s=typeof t!="number"?parseFloat(t):t,l=e===null||Number.isNaN(n)?-1/0:n,u=t===null||Number.isNaN(s)?1/0:s;if(l>u){const r=l;l=u,u=r}return[l,u]};o_.autoRemove=i=>vo(i)||vo(i[0])&&vo(i[1]);const Tl={includesString:oA,includesStringSensitive:lA,equalsString:cA,arrIncludes:uA,arrIncludesAll:dA,arrIncludesSome:hA,equals:pA,weakEquals:fA,inNumberRange:o_};function vo(i){return i==null||i===""}const UW={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:i=>({columnFilters:[],...i}),getDefaultOptions:i=>({onColumnFiltersChange:Ya("columnFilters",i),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(i,e)=>{i.getAutoFilterFn=()=>{const t=e.getCoreRowModel().flatRows[0],n=t==null?void 0:t.getValue(i.id);return typeof n=="string"?Tl.includesString:typeof n=="number"?Tl.inNumberRange:typeof n=="boolean"||n!==null&&typeof n=="object"?Tl.equals:Array.isArray(n)?Tl.arrIncludes:Tl.weakEquals},i.getFilterFn=()=>{var t,n;return _x(i.columnDef.filterFn)?i.columnDef.filterFn:i.columnDef.filterFn==="auto"?i.getAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[i.columnDef.filterFn])!=null?t:Tl[i.columnDef.filterFn]},i.getCanFilter=()=>{var t,n,s;return((t=i.columnDef.enableColumnFilter)!=null?t:!0)&&((n=e.options.enableColumnFilters)!=null?n:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&!!i.accessorFn},i.getIsFiltered=()=>i.getFilterIndex()>-1,i.getFilterValue=()=>{var t;return(t=e.getState().columnFilters)==null||(t=t.find(n=>n.id===i.id))==null?void 0:t.value},i.getFilterIndex=()=>{var t,n;return(t=(n=e.getState().columnFilters)==null?void 0:n.findIndex(s=>s.id===i.id))!=null?t:-1},i.setFilterValue=t=>{e.setColumnFilters(n=>{const s=i.getFilterFn(),l=n==null?void 0:n.find(g=>g.id===i.id),u=mc(t,l?l.value:void 0);if(iC(s,u,i)){var r;return(r=n==null?void 0:n.filter(g=>g.id!==i.id))!=null?r:[]}const p={id:i.id,value:u};if(l){var f;return(f=n==null?void 0:n.map(g=>g.id===i.id?p:g))!=null?f:[]}return n!=null&&n.length?[...n,p]:[p]})}},createRow:(i,e)=>{i.columnFilters={},i.columnFiltersMeta={}},createTable:i=>{i.setColumnFilters=e=>{const t=i.getAllLeafColumns(),n=s=>{var l;return(l=mc(e,s))==null?void 0:l.filter(u=>{const r=t.find(p=>p.id===u.id);if(r){const p=r.getFilterFn();if(iC(p,u.value,r))return!1}return!0})};i.options.onColumnFiltersChange==null||i.options.onColumnFiltersChange(n)},i.resetColumnFilters=e=>{var t,n;i.setColumnFilters(e?[]:(t=(n=i.initialState)==null?void 0:n.columnFilters)!=null?t:[])},i.getPreFilteredRowModel=()=>i.getCoreRowModel(),i.getFilteredRowModel=()=>(!i._getFilteredRowModel&&i.options.getFilteredRowModel&&(i._getFilteredRowModel=i.options.getFilteredRowModel(i)),i.options.manualFiltering||!i._getFilteredRowModel?i.getPreFilteredRowModel():i._getFilteredRowModel())}};function iC(i,e,t){return(i&&i.autoRemove?i.autoRemove(e,t):!1)||typeof e>"u"||typeof e=="string"&&!e}const VW=(i,e,t)=>t.reduce((n,s)=>{const l=s.getValue(i);return n+(typeof l=="number"?l:0)},0),GW=(i,e,t)=>{let n;return t.forEach(s=>{const l=s.getValue(i);l!=null&&(n>l||n===void 0&&l>=l)&&(n=l)}),n},HW=(i,e,t)=>{let n;return t.forEach(s=>{const l=s.getValue(i);l!=null&&(n<l||n===void 0&&l>=l)&&(n=l)}),n},qW=(i,e,t)=>{let n,s;return t.forEach(l=>{const u=l.getValue(i);u!=null&&(n===void 0?u>=u&&(n=s=u):(n>u&&(n=u),s<u&&(s=u)))}),[n,s]},WW=(i,e)=>{let t=0,n=0;if(e.forEach(s=>{let l=s.getValue(i);l!=null&&(l=+l)>=l&&(++t,n+=l)}),t)return n/t},YW=(i,e)=>{if(!e.length)return;const t=e.map(l=>l.getValue(i));if(!zW(t))return;if(t.length===1)return t[0];const n=Math.floor(t.length/2),s=t.sort((l,u)=>l-u);return t.length%2!==0?s[n]:(s[n-1]+s[n])/2},ZW=(i,e)=>Array.from(new Set(e.map(t=>t.getValue(i))).values()),XW=(i,e)=>new Set(e.map(t=>t.getValue(i))).size,KW=(i,e)=>e.length,hb={sum:VW,min:GW,max:HW,extent:qW,mean:WW,median:YW,unique:ZW,uniqueCount:XW,count:KW},QW={getDefaultColumnDef:()=>({aggregatedCell:i=>{var e,t;return(e=(t=i.getValue())==null||t.toString==null?void 0:t.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:i=>({grouping:[],...i}),getDefaultOptions:i=>({onGroupingChange:Ya("grouping",i),groupedColumnMode:"reorder"}),createColumn:(i,e)=>{i.toggleGrouping=()=>{e.setGrouping(t=>t!=null&&t.includes(i.id)?t.filter(n=>n!==i.id):[...t??[],i.id])},i.getCanGroup=()=>{var t,n;return((t=i.columnDef.enableGrouping)!=null?t:!0)&&((n=e.options.enableGrouping)!=null?n:!0)&&(!!i.accessorFn||!!i.columnDef.getGroupingValue)},i.getIsGrouped=()=>{var t;return(t=e.getState().grouping)==null?void 0:t.includes(i.id)},i.getGroupedIndex=()=>{var t;return(t=e.getState().grouping)==null?void 0:t.indexOf(i.id)},i.getToggleGroupingHandler=()=>{const t=i.getCanGroup();return()=>{t&&i.toggleGrouping()}},i.getAutoAggregationFn=()=>{const t=e.getCoreRowModel().flatRows[0],n=t==null?void 0:t.getValue(i.id);if(typeof n=="number")return hb.sum;if(Object.prototype.toString.call(n)==="[object Date]")return hb.extent},i.getAggregationFn=()=>{var t,n;if(!i)throw new Error;return _x(i.columnDef.aggregationFn)?i.columnDef.aggregationFn:i.columnDef.aggregationFn==="auto"?i.getAutoAggregationFn():(t=(n=e.options.aggregationFns)==null?void 0:n[i.columnDef.aggregationFn])!=null?t:hb[i.columnDef.aggregationFn]}},createTable:i=>{i.setGrouping=e=>i.options.onGroupingChange==null?void 0:i.options.onGroupingChange(e),i.resetGrouping=e=>{var t,n;i.setGrouping(e?[]:(t=(n=i.initialState)==null?void 0:n.grouping)!=null?t:[])},i.getPreGroupedRowModel=()=>i.getFilteredRowModel(),i.getGroupedRowModel=()=>(!i._getGroupedRowModel&&i.options.getGroupedRowModel&&(i._getGroupedRowModel=i.options.getGroupedRowModel(i)),i.options.manualGrouping||!i._getGroupedRowModel?i.getPreGroupedRowModel():i._getGroupedRowModel())},createRow:(i,e)=>{i.getIsGrouped=()=>!!i.groupingColumnId,i.getGroupingValue=t=>{if(i._groupingValuesCache.hasOwnProperty(t))return i._groupingValuesCache[t];const n=e.getColumn(t);return n!=null&&n.columnDef.getGroupingValue?(i._groupingValuesCache[t]=n.columnDef.getGroupingValue(i.original),i._groupingValuesCache[t]):i.getValue(t)},i._groupingValuesCache={}},createCell:(i,e,t,n)=>{i.getIsGrouped=()=>e.getIsGrouped()&&e.id===t.groupingColumnId,i.getIsPlaceholder=()=>!i.getIsGrouped()&&e.getIsGrouped(),i.getIsAggregated=()=>{var s;return!i.getIsGrouped()&&!i.getIsPlaceholder()&&!!((s=t.subRows)!=null&&s.length)}}};function JW(i,e,t){if(!(e!=null&&e.length)||!t)return i;const n=i.filter(l=>!e.includes(l.id));return t==="remove"?n:[...e.map(l=>i.find(u=>u.id===l)).filter(Boolean),...n]}const eY={getInitialState:i=>({columnOrder:[],...i}),getDefaultOptions:i=>({onColumnOrderChange:Ya("columnOrder",i)}),createColumn:(i,e)=>{i.getIndex=tn(t=>[Qp(e,t)],t=>t.findIndex(n=>n.id===i.id),nn(e.options,"debugColumns")),i.getIsFirstColumn=t=>{var n;return((n=Qp(e,t)[0])==null?void 0:n.id)===i.id},i.getIsLastColumn=t=>{var n;const s=Qp(e,t);return((n=s[s.length-1])==null?void 0:n.id)===i.id}},createTable:i=>{i.setColumnOrder=e=>i.options.onColumnOrderChange==null?void 0:i.options.onColumnOrderChange(e),i.resetColumnOrder=e=>{var t;i.setColumnOrder(e?[]:(t=i.initialState.columnOrder)!=null?t:[])},i._getOrderColumnsFn=tn(()=>[i.getState().columnOrder,i.getState().grouping,i.options.groupedColumnMode],(e,t,n)=>s=>{let l=[];if(!(e!=null&&e.length))l=s;else{const u=[...e],r=[...s];for(;r.length&&u.length;){const p=u.shift(),f=r.findIndex(g=>g.id===p);f>-1&&l.push(r.splice(f,1)[0])}l=[...l,...r]}return JW(l,t,n)},nn(i.options,"debugTable"))}},pb=()=>({left:[],right:[]}),tY={getInitialState:i=>({columnPinning:pb(),...i}),getDefaultOptions:i=>({onColumnPinningChange:Ya("columnPinning",i)}),createColumn:(i,e)=>{i.pin=t=>{const n=i.getLeafColumns().map(s=>s.id).filter(Boolean);e.setColumnPinning(s=>{var l,u;if(t==="right"){var r,p;return{left:((r=s==null?void 0:s.left)!=null?r:[]).filter(b=>!(n!=null&&n.includes(b))),right:[...((p=s==null?void 0:s.right)!=null?p:[]).filter(b=>!(n!=null&&n.includes(b))),...n]}}if(t==="left"){var f,g;return{left:[...((f=s==null?void 0:s.left)!=null?f:[]).filter(b=>!(n!=null&&n.includes(b))),...n],right:((g=s==null?void 0:s.right)!=null?g:[]).filter(b=>!(n!=null&&n.includes(b)))}}return{left:((l=s==null?void 0:s.left)!=null?l:[]).filter(b=>!(n!=null&&n.includes(b))),right:((u=s==null?void 0:s.right)!=null?u:[]).filter(b=>!(n!=null&&n.includes(b)))}})},i.getCanPin=()=>i.getLeafColumns().some(n=>{var s,l,u;return((s=n.columnDef.enablePinning)!=null?s:!0)&&((l=(u=e.options.enableColumnPinning)!=null?u:e.options.enablePinning)!=null?l:!0)}),i.getIsPinned=()=>{const t=i.getLeafColumns().map(r=>r.id),{left:n,right:s}=e.getState().columnPinning,l=t.some(r=>n==null?void 0:n.includes(r)),u=t.some(r=>s==null?void 0:s.includes(r));return l?"left":u?"right":!1},i.getPinnedIndex=()=>{var t,n;const s=i.getIsPinned();return s?(t=(n=e.getState().columnPinning)==null||(n=n[s])==null?void 0:n.indexOf(i.id))!=null?t:-1:0}},createRow:(i,e)=>{i.getCenterVisibleCells=tn(()=>[i._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,s)=>{const l=[...n??[],...s??[]];return t.filter(u=>!l.includes(u.column.id))},nn(e.options,"debugRows")),i.getLeftVisibleCells=tn(()=>[i._getAllVisibleCells(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(l=>t.find(u=>u.column.id===l)).filter(Boolean).map(l=>({...l,position:"left"})),nn(e.options,"debugRows")),i.getRightVisibleCells=tn(()=>[i._getAllVisibleCells(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(l=>t.find(u=>u.column.id===l)).filter(Boolean).map(l=>({...l,position:"right"})),nn(e.options,"debugRows"))},createTable:i=>{i.setColumnPinning=e=>i.options.onColumnPinningChange==null?void 0:i.options.onColumnPinningChange(e),i.resetColumnPinning=e=>{var t,n;return i.setColumnPinning(e?pb():(t=(n=i.initialState)==null?void 0:n.columnPinning)!=null?t:pb())},i.getIsSomeColumnsPinned=e=>{var t;const n=i.getState().columnPinning;if(!e){var s,l;return!!((s=n.left)!=null&&s.length||(l=n.right)!=null&&l.length)}return!!((t=n[e])!=null&&t.length)},i.getLeftLeafColumns=tn(()=>[i.getAllLeafColumns(),i.getState().columnPinning.left],(e,t)=>(t??[]).map(n=>e.find(s=>s.id===n)).filter(Boolean),nn(i.options,"debugColumns")),i.getRightLeafColumns=tn(()=>[i.getAllLeafColumns(),i.getState().columnPinning.right],(e,t)=>(t??[]).map(n=>e.find(s=>s.id===n)).filter(Boolean),nn(i.options,"debugColumns")),i.getCenterLeafColumns=tn(()=>[i.getAllLeafColumns(),i.getState().columnPinning.left,i.getState().columnPinning.right],(e,t,n)=>{const s=[...t??[],...n??[]];return e.filter(l=>!s.includes(l.id))},nn(i.options,"debugColumns"))}};function iY(i){return i||(typeof document<"u"?document:null)}const kg={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},fb=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),nY={getDefaultColumnDef:()=>kg,getInitialState:i=>({columnSizing:{},columnSizingInfo:fb(),...i}),getDefaultOptions:i=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Ya("columnSizing",i),onColumnSizingInfoChange:Ya("columnSizingInfo",i)}),createColumn:(i,e)=>{i.getSize=()=>{var t,n,s;const l=e.getState().columnSizing[i.id];return Math.min(Math.max((t=i.columnDef.minSize)!=null?t:kg.minSize,(n=l??i.columnDef.size)!=null?n:kg.size),(s=i.columnDef.maxSize)!=null?s:kg.maxSize)},i.getStart=tn(t=>[t,Qp(e,t),e.getState().columnSizing],(t,n)=>n.slice(0,i.getIndex(t)).reduce((s,l)=>s+l.getSize(),0),nn(e.options,"debugColumns")),i.getAfter=tn(t=>[t,Qp(e,t),e.getState().columnSizing],(t,n)=>n.slice(i.getIndex(t)+1).reduce((s,l)=>s+l.getSize(),0),nn(e.options,"debugColumns")),i.resetSize=()=>{e.setColumnSizing(t=>{let{[i.id]:n,...s}=t;return s})},i.getCanResize=()=>{var t,n;return((t=i.columnDef.enableResizing)!=null?t:!0)&&((n=e.options.enableColumnResizing)!=null?n:!0)},i.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===i.id},createHeader:(i,e)=>{i.getSize=()=>{let t=0;const n=s=>{if(s.subHeaders.length)s.subHeaders.forEach(n);else{var l;t+=(l=s.column.getSize())!=null?l:0}};return n(i),t},i.getStart=()=>{if(i.index>0){const t=i.headerGroup.headers[i.index-1];return t.getStart()+t.getSize()}return 0},i.getResizeHandler=t=>{const n=e.getColumn(i.column.id),s=n==null?void 0:n.getCanResize();return l=>{if(!n||!s||(l.persist==null||l.persist(),mb(l)&&l.touches&&l.touches.length>1))return;const u=i.getSize(),r=i?i.getLeafHeaders().map(E=>[E.column.id,E.column.getSize()]):[[n.id,n.getSize()]],p=mb(l)?Math.round(l.touches[0].clientX):l.clientX,f={},g=(E,x)=>{typeof x=="number"&&(e.setColumnSizingInfo(A=>{var D,C;const I=e.options.columnResizeDirection==="rtl"?-1:1,N=(x-((D=A==null?void 0:A.startOffset)!=null?D:0))*I,W=Math.max(N/((C=A==null?void 0:A.startSize)!=null?C:0),-.999999);return A.columnSizingStart.forEach(Y=>{let[X,O]=Y;f[X]=Math.round(Math.max(O+O*W,0)*100)/100}),{...A,deltaOffset:N,deltaPercentage:W}}),(e.options.columnResizeMode==="onChange"||E==="end")&&e.setColumnSizing(A=>({...A,...f})))},b=E=>g("move",E),y=E=>{g("end",E),e.setColumnSizingInfo(x=>({...x,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},w=iY(t),v={moveHandler:E=>b(E.clientX),upHandler:E=>{w==null||w.removeEventListener("mousemove",v.moveHandler),w==null||w.removeEventListener("mouseup",v.upHandler),y(E.clientX)}},T={moveHandler:E=>(E.cancelable&&(E.preventDefault(),E.stopPropagation()),b(E.touches[0].clientX),!1),upHandler:E=>{var x;w==null||w.removeEventListener("touchmove",T.moveHandler),w==null||w.removeEventListener("touchend",T.upHandler),E.cancelable&&(E.preventDefault(),E.stopPropagation()),y((x=E.touches[0])==null?void 0:x.clientX)}},S=rY()?{passive:!1}:!1;mb(l)?(w==null||w.addEventListener("touchmove",T.moveHandler,S),w==null||w.addEventListener("touchend",T.upHandler,S)):(w==null||w.addEventListener("mousemove",v.moveHandler,S),w==null||w.addEventListener("mouseup",v.upHandler,S)),e.setColumnSizingInfo(E=>({...E,startOffset:p,startSize:u,deltaOffset:0,deltaPercentage:0,columnSizingStart:r,isResizingColumn:n.id}))}}},createTable:i=>{i.setColumnSizing=e=>i.options.onColumnSizingChange==null?void 0:i.options.onColumnSizingChange(e),i.setColumnSizingInfo=e=>i.options.onColumnSizingInfoChange==null?void 0:i.options.onColumnSizingInfoChange(e),i.resetColumnSizing=e=>{var t;i.setColumnSizing(e?{}:(t=i.initialState.columnSizing)!=null?t:{})},i.resetHeaderSizeInfo=e=>{var t;i.setColumnSizingInfo(e?fb():(t=i.initialState.columnSizingInfo)!=null?t:fb())},i.getTotalSize=()=>{var e,t;return(e=(t=i.getHeaderGroups()[0])==null?void 0:t.headers.reduce((n,s)=>n+s.getSize(),0))!=null?e:0},i.getLeftTotalSize=()=>{var e,t;return(e=(t=i.getLeftHeaderGroups()[0])==null?void 0:t.headers.reduce((n,s)=>n+s.getSize(),0))!=null?e:0},i.getCenterTotalSize=()=>{var e,t;return(e=(t=i.getCenterHeaderGroups()[0])==null?void 0:t.headers.reduce((n,s)=>n+s.getSize(),0))!=null?e:0},i.getRightTotalSize=()=>{var e,t;return(e=(t=i.getRightHeaderGroups()[0])==null?void 0:t.headers.reduce((n,s)=>n+s.getSize(),0))!=null?e:0}}};let Ag=null;function rY(){if(typeof Ag=="boolean")return Ag;let i=!1;try{const e={get passive(){return i=!0,!1}},t=()=>{};window.addEventListener("test",t,e),window.removeEventListener("test",t)}catch{i=!1}return Ag=i,Ag}function mb(i){return i.type==="touchstart"}const sY={getInitialState:i=>({columnVisibility:{},...i}),getDefaultOptions:i=>({onColumnVisibilityChange:Ya("columnVisibility",i)}),createColumn:(i,e)=>{i.toggleVisibility=t=>{i.getCanHide()&&e.setColumnVisibility(n=>({...n,[i.id]:t??!i.getIsVisible()}))},i.getIsVisible=()=>{var t,n;const s=i.columns;return(t=s.length?s.some(l=>l.getIsVisible()):(n=e.getState().columnVisibility)==null?void 0:n[i.id])!=null?t:!0},i.getCanHide=()=>{var t,n;return((t=i.columnDef.enableHiding)!=null?t:!0)&&((n=e.options.enableHiding)!=null?n:!0)},i.getToggleVisibilityHandler=()=>t=>{i.toggleVisibility==null||i.toggleVisibility(t.target.checked)}},createRow:(i,e)=>{i._getAllVisibleCells=tn(()=>[i.getAllCells(),e.getState().columnVisibility],t=>t.filter(n=>n.column.getIsVisible()),nn(e.options,"debugRows")),i.getVisibleCells=tn(()=>[i.getLeftVisibleCells(),i.getCenterVisibleCells(),i.getRightVisibleCells()],(t,n,s)=>[...t,...n,...s],nn(e.options,"debugRows"))},createTable:i=>{const e=(t,n)=>tn(()=>[n(),n().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(l=>l.getIsVisible==null?void 0:l.getIsVisible()),nn(i.options,"debugColumns"));i.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>i.getAllFlatColumns()),i.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>i.getAllLeafColumns()),i.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>i.getLeftLeafColumns()),i.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>i.getRightLeafColumns()),i.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>i.getCenterLeafColumns()),i.setColumnVisibility=t=>i.options.onColumnVisibilityChange==null?void 0:i.options.onColumnVisibilityChange(t),i.resetColumnVisibility=t=>{var n;i.setColumnVisibility(t?{}:(n=i.initialState.columnVisibility)!=null?n:{})},i.toggleAllColumnsVisible=t=>{var n;t=(n=t)!=null?n:!i.getIsAllColumnsVisible(),i.setColumnVisibility(i.getAllLeafColumns().reduce((s,l)=>({...s,[l.id]:t||!(l.getCanHide!=null&&l.getCanHide())}),{}))},i.getIsAllColumnsVisible=()=>!i.getAllLeafColumns().some(t=>!(t.getIsVisible!=null&&t.getIsVisible())),i.getIsSomeColumnsVisible=()=>i.getAllLeafColumns().some(t=>t.getIsVisible==null?void 0:t.getIsVisible()),i.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;i.toggleAllColumnsVisible((n=t.target)==null?void 0:n.checked)}}};function Qp(i,e){return e?e==="center"?i.getCenterVisibleLeafColumns():e==="left"?i.getLeftVisibleLeafColumns():i.getRightVisibleLeafColumns():i.getVisibleLeafColumns()}const aY={createTable:i=>{i._getGlobalFacetedRowModel=i.options.getFacetedRowModel&&i.options.getFacetedRowModel(i,"__global__"),i.getGlobalFacetedRowModel=()=>i.options.manualFiltering||!i._getGlobalFacetedRowModel?i.getPreFilteredRowModel():i._getGlobalFacetedRowModel(),i._getGlobalFacetedUniqueValues=i.options.getFacetedUniqueValues&&i.options.getFacetedUniqueValues(i,"__global__"),i.getGlobalFacetedUniqueValues=()=>i._getGlobalFacetedUniqueValues?i._getGlobalFacetedUniqueValues():new Map,i._getGlobalFacetedMinMaxValues=i.options.getFacetedMinMaxValues&&i.options.getFacetedMinMaxValues(i,"__global__"),i.getGlobalFacetedMinMaxValues=()=>{if(i._getGlobalFacetedMinMaxValues)return i._getGlobalFacetedMinMaxValues()}}},oY={getInitialState:i=>({globalFilter:void 0,...i}),getDefaultOptions:i=>({onGlobalFilterChange:Ya("globalFilter",i),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var t;const n=(t=i.getCoreRowModel().flatRows[0])==null||(t=t._getAllCellsByColumnId()[e.id])==null?void 0:t.getValue();return typeof n=="string"||typeof n=="number"}}),createColumn:(i,e)=>{i.getCanGlobalFilter=()=>{var t,n,s,l;return((t=i.columnDef.enableGlobalFilter)!=null?t:!0)&&((n=e.options.enableGlobalFilter)!=null?n:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&((l=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(i))!=null?l:!0)&&!!i.accessorFn}},createTable:i=>{i.getGlobalAutoFilterFn=()=>Tl.includesString,i.getGlobalFilterFn=()=>{var e,t;const{globalFilterFn:n}=i.options;return _x(n)?n:n==="auto"?i.getGlobalAutoFilterFn():(e=(t=i.options.filterFns)==null?void 0:t[n])!=null?e:Tl[n]},i.setGlobalFilter=e=>{i.options.onGlobalFilterChange==null||i.options.onGlobalFilterChange(e)},i.resetGlobalFilter=e=>{i.setGlobalFilter(e?void 0:i.initialState.globalFilter)}}},lY={getInitialState:i=>({expanded:{},...i}),getDefaultOptions:i=>({onExpandedChange:Ya("expanded",i),paginateExpandedRows:!0}),createTable:i=>{let e=!1,t=!1;i._autoResetExpanded=()=>{var n,s;if(!e){i._queue(()=>{e=!0});return}if((n=(s=i.options.autoResetAll)!=null?s:i.options.autoResetExpanded)!=null?n:!i.options.manualExpanding){if(t)return;t=!0,i._queue(()=>{i.resetExpanded(),t=!1})}},i.setExpanded=n=>i.options.onExpandedChange==null?void 0:i.options.onExpandedChange(n),i.toggleAllRowsExpanded=n=>{n??!i.getIsAllRowsExpanded()?i.setExpanded(!0):i.setExpanded({})},i.resetExpanded=n=>{var s,l;i.setExpanded(n?{}:(s=(l=i.initialState)==null?void 0:l.expanded)!=null?s:{})},i.getCanSomeRowsExpand=()=>i.getPrePaginationRowModel().flatRows.some(n=>n.getCanExpand()),i.getToggleAllRowsExpandedHandler=()=>n=>{n.persist==null||n.persist(),i.toggleAllRowsExpanded()},i.getIsSomeRowsExpanded=()=>{const n=i.getState().expanded;return n===!0||Object.values(n).some(Boolean)},i.getIsAllRowsExpanded=()=>{const n=i.getState().expanded;return typeof n=="boolean"?n===!0:!(!Object.keys(n).length||i.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},i.getExpandedDepth=()=>{let n=0;return(i.getState().expanded===!0?Object.keys(i.getRowModel().rowsById):Object.keys(i.getState().expanded)).forEach(l=>{const u=l.split(".");n=Math.max(n,u.length)}),n},i.getPreExpandedRowModel=()=>i.getSortedRowModel(),i.getExpandedRowModel=()=>(!i._getExpandedRowModel&&i.options.getExpandedRowModel&&(i._getExpandedRowModel=i.options.getExpandedRowModel(i)),i.options.manualExpanding||!i._getExpandedRowModel?i.getPreExpandedRowModel():i._getExpandedRowModel())},createRow:(i,e)=>{i.toggleExpanded=t=>{e.setExpanded(n=>{var s;const l=n===!0?!0:!!(n!=null&&n[i.id]);let u={};if(n===!0?Object.keys(e.getRowModel().rowsById).forEach(r=>{u[r]=!0}):u=n,t=(s=t)!=null?s:!l,!l&&t)return{...u,[i.id]:!0};if(l&&!t){const{[i.id]:r,...p}=u;return p}return n})},i.getIsExpanded=()=>{var t;const n=e.getState().expanded;return!!((t=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(i))!=null?t:n===!0||n!=null&&n[i.id])},i.getCanExpand=()=>{var t,n,s;return(t=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(i))!=null?t:((n=e.options.enableExpanding)!=null?n:!0)&&!!((s=i.subRows)!=null&&s.length)},i.getIsAllParentsExpanded=()=>{let t=!0,n=i;for(;t&&n.parentId;)n=e.getRow(n.parentId,!0),t=n.getIsExpanded();return t},i.getToggleExpandedHandler=()=>{const t=i.getCanExpand();return()=>{t&&i.toggleExpanded()}}}},mv=0,gv=10,gb=()=>({pageIndex:mv,pageSize:gv}),cY={getInitialState:i=>({...i,pagination:{...gb(),...i==null?void 0:i.pagination}}),getDefaultOptions:i=>({onPaginationChange:Ya("pagination",i)}),createTable:i=>{let e=!1,t=!1;i._autoResetPageIndex=()=>{var n,s;if(!e){i._queue(()=>{e=!0});return}if((n=(s=i.options.autoResetAll)!=null?s:i.options.autoResetPageIndex)!=null?n:!i.options.manualPagination){if(t)return;t=!0,i._queue(()=>{i.resetPageIndex(),t=!1})}},i.setPagination=n=>{const s=l=>mc(n,l);return i.options.onPaginationChange==null?void 0:i.options.onPaginationChange(s)},i.resetPagination=n=>{var s;i.setPagination(n?gb():(s=i.initialState.pagination)!=null?s:gb())},i.setPageIndex=n=>{i.setPagination(s=>{let l=mc(n,s.pageIndex);const u=typeof i.options.pageCount>"u"||i.options.pageCount===-1?Number.MAX_SAFE_INTEGER:i.options.pageCount-1;return l=Math.max(0,Math.min(l,u)),{...s,pageIndex:l}})},i.resetPageIndex=n=>{var s,l;i.setPageIndex(n?mv:(s=(l=i.initialState)==null||(l=l.pagination)==null?void 0:l.pageIndex)!=null?s:mv)},i.resetPageSize=n=>{var s,l;i.setPageSize(n?gv:(s=(l=i.initialState)==null||(l=l.pagination)==null?void 0:l.pageSize)!=null?s:gv)},i.setPageSize=n=>{i.setPagination(s=>{const l=Math.max(1,mc(n,s.pageSize)),u=s.pageSize*s.pageIndex,r=Math.floor(u/l);return{...s,pageIndex:r,pageSize:l}})},i.setPageCount=n=>i.setPagination(s=>{var l;let u=mc(n,(l=i.options.pageCount)!=null?l:-1);return typeof u=="number"&&(u=Math.max(-1,u)),{...s,pageCount:u}}),i.getPageOptions=tn(()=>[i.getPageCount()],n=>{let s=[];return n&&n>0&&(s=[...new Array(n)].fill(null).map((l,u)=>u)),s},nn(i.options,"debugTable")),i.getCanPreviousPage=()=>i.getState().pagination.pageIndex>0,i.getCanNextPage=()=>{const{pageIndex:n}=i.getState().pagination,s=i.getPageCount();return s===-1?!0:s===0?!1:n<s-1},i.previousPage=()=>i.setPageIndex(n=>n-1),i.nextPage=()=>i.setPageIndex(n=>n+1),i.firstPage=()=>i.setPageIndex(0),i.lastPage=()=>i.setPageIndex(i.getPageCount()-1),i.getPrePaginationRowModel=()=>i.getExpandedRowModel(),i.getPaginationRowModel=()=>(!i._getPaginationRowModel&&i.options.getPaginationRowModel&&(i._getPaginationRowModel=i.options.getPaginationRowModel(i)),i.options.manualPagination||!i._getPaginationRowModel?i.getPrePaginationRowModel():i._getPaginationRowModel()),i.getPageCount=()=>{var n;return(n=i.options.pageCount)!=null?n:Math.ceil(i.getRowCount()/i.getState().pagination.pageSize)},i.getRowCount=()=>{var n;return(n=i.options.rowCount)!=null?n:i.getPrePaginationRowModel().rows.length}}},yb=()=>({top:[],bottom:[]}),uY={getInitialState:i=>({rowPinning:yb(),...i}),getDefaultOptions:i=>({onRowPinningChange:Ya("rowPinning",i)}),createRow:(i,e)=>{i.pin=(t,n,s)=>{const l=n?i.getLeafRows().map(p=>{let{id:f}=p;return f}):[],u=s?i.getParentRows().map(p=>{let{id:f}=p;return f}):[],r=new Set([...u,i.id,...l]);e.setRowPinning(p=>{var f,g;if(t==="bottom"){var b,y;return{top:((b=p==null?void 0:p.top)!=null?b:[]).filter(T=>!(r!=null&&r.has(T))),bottom:[...((y=p==null?void 0:p.bottom)!=null?y:[]).filter(T=>!(r!=null&&r.has(T))),...Array.from(r)]}}if(t==="top"){var w,v;return{top:[...((w=p==null?void 0:p.top)!=null?w:[]).filter(T=>!(r!=null&&r.has(T))),...Array.from(r)],bottom:((v=p==null?void 0:p.bottom)!=null?v:[]).filter(T=>!(r!=null&&r.has(T)))}}return{top:((f=p==null?void 0:p.top)!=null?f:[]).filter(T=>!(r!=null&&r.has(T))),bottom:((g=p==null?void 0:p.bottom)!=null?g:[]).filter(T=>!(r!=null&&r.has(T)))}})},i.getCanPin=()=>{var t;const{enableRowPinning:n,enablePinning:s}=e.options;return typeof n=="function"?n(i):(t=n??s)!=null?t:!0},i.getIsPinned=()=>{const t=[i.id],{top:n,bottom:s}=e.getState().rowPinning,l=t.some(r=>n==null?void 0:n.includes(r)),u=t.some(r=>s==null?void 0:s.includes(r));return l?"top":u?"bottom":!1},i.getPinnedIndex=()=>{var t,n;const s=i.getIsPinned();if(!s)return-1;const l=(t=s==="top"?e.getTopRows():e.getBottomRows())==null?void 0:t.map(u=>{let{id:r}=u;return r});return(n=l==null?void 0:l.indexOf(i.id))!=null?n:-1}},createTable:i=>{i.setRowPinning=e=>i.options.onRowPinningChange==null?void 0:i.options.onRowPinningChange(e),i.resetRowPinning=e=>{var t,n;return i.setRowPinning(e?yb():(t=(n=i.initialState)==null?void 0:n.rowPinning)!=null?t:yb())},i.getIsSomeRowsPinned=e=>{var t;const n=i.getState().rowPinning;if(!e){var s,l;return!!((s=n.top)!=null&&s.length||(l=n.bottom)!=null&&l.length)}return!!((t=n[e])!=null&&t.length)},i._getPinnedRows=(e,t,n)=>{var s;return((s=i.options.keepPinnedRows)==null||s?(t??[]).map(u=>{const r=i.getRow(u,!0);return r.getIsAllParentsExpanded()?r:null}):(t??[]).map(u=>e.find(r=>r.id===u))).filter(Boolean).map(u=>({...u,position:n}))},i.getTopRows=tn(()=>[i.getRowModel().rows,i.getState().rowPinning.top],(e,t)=>i._getPinnedRows(e,t,"top"),nn(i.options,"debugRows")),i.getBottomRows=tn(()=>[i.getRowModel().rows,i.getState().rowPinning.bottom],(e,t)=>i._getPinnedRows(e,t,"bottom"),nn(i.options,"debugRows")),i.getCenterRows=tn(()=>[i.getRowModel().rows,i.getState().rowPinning.top,i.getState().rowPinning.bottom],(e,t,n)=>{const s=new Set([...t??[],...n??[]]);return e.filter(l=>!s.has(l.id))},nn(i.options,"debugRows"))}},dY={getInitialState:i=>({rowSelection:{},...i}),getDefaultOptions:i=>({onRowSelectionChange:Ya("rowSelection",i),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:i=>{i.setRowSelection=e=>i.options.onRowSelectionChange==null?void 0:i.options.onRowSelectionChange(e),i.resetRowSelection=e=>{var t;return i.setRowSelection(e?{}:(t=i.initialState.rowSelection)!=null?t:{})},i.toggleAllRowsSelected=e=>{i.setRowSelection(t=>{e=typeof e<"u"?e:!i.getIsAllRowsSelected();const n={...t},s=i.getPreGroupedRowModel().flatRows;return e?s.forEach(l=>{l.getCanSelect()&&(n[l.id]=!0)}):s.forEach(l=>{delete n[l.id]}),n})},i.toggleAllPageRowsSelected=e=>i.setRowSelection(t=>{const n=typeof e<"u"?e:!i.getIsAllPageRowsSelected(),s={...t};return i.getRowModel().rows.forEach(l=>{yv(s,l.id,n,!0,i)}),s}),i.getPreSelectedRowModel=()=>i.getCoreRowModel(),i.getSelectedRowModel=tn(()=>[i.getState().rowSelection,i.getCoreRowModel()],(e,t)=>Object.keys(e).length?xb(i,t):{rows:[],flatRows:[],rowsById:{}},nn(i.options,"debugTable")),i.getFilteredSelectedRowModel=tn(()=>[i.getState().rowSelection,i.getFilteredRowModel()],(e,t)=>Object.keys(e).length?xb(i,t):{rows:[],flatRows:[],rowsById:{}},nn(i.options,"debugTable")),i.getGroupedSelectedRowModel=tn(()=>[i.getState().rowSelection,i.getSortedRowModel()],(e,t)=>Object.keys(e).length?xb(i,t):{rows:[],flatRows:[],rowsById:{}},nn(i.options,"debugTable")),i.getIsAllRowsSelected=()=>{const e=i.getFilteredRowModel().flatRows,{rowSelection:t}=i.getState();let n=!!(e.length&&Object.keys(t).length);return n&&e.some(s=>s.getCanSelect()&&!t[s.id])&&(n=!1),n},i.getIsAllPageRowsSelected=()=>{const e=i.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:t}=i.getState();let n=!!e.length;return n&&e.some(s=>!t[s.id])&&(n=!1),n},i.getIsSomeRowsSelected=()=>{var e;const t=Object.keys((e=i.getState().rowSelection)!=null?e:{}).length;return t>0&&t<i.getFilteredRowModel().flatRows.length},i.getIsSomePageRowsSelected=()=>{const e=i.getPaginationRowModel().flatRows;return i.getIsAllPageRowsSelected()?!1:e.filter(t=>t.getCanSelect()).some(t=>t.getIsSelected()||t.getIsSomeSelected())},i.getToggleAllRowsSelectedHandler=()=>e=>{i.toggleAllRowsSelected(e.target.checked)},i.getToggleAllPageRowsSelectedHandler=()=>e=>{i.toggleAllPageRowsSelected(e.target.checked)}},createRow:(i,e)=>{i.toggleSelected=(t,n)=>{const s=i.getIsSelected();e.setRowSelection(l=>{var u;if(t=typeof t<"u"?t:!s,i.getCanSelect()&&s===t)return l;const r={...l};return yv(r,i.id,t,(u=n==null?void 0:n.selectChildren)!=null?u:!0,e),r})},i.getIsSelected=()=>{const{rowSelection:t}=e.getState();return l_(i,t)},i.getIsSomeSelected=()=>{const{rowSelection:t}=e.getState();return xv(i,t)==="some"},i.getIsAllSubRowsSelected=()=>{const{rowSelection:t}=e.getState();return xv(i,t)==="all"},i.getCanSelect=()=>{var t;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(i):(t=e.options.enableRowSelection)!=null?t:!0},i.getCanSelectSubRows=()=>{var t;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(i):(t=e.options.enableSubRowSelection)!=null?t:!0},i.getCanMultiSelect=()=>{var t;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(i):(t=e.options.enableMultiRowSelection)!=null?t:!0},i.getToggleSelectedHandler=()=>{const t=i.getCanSelect();return n=>{var s;t&&i.toggleSelected((s=n.target)==null?void 0:s.checked)}}}},yv=(i,e,t,n,s)=>{var l;const u=s.getRow(e,!0);t?(u.getCanMultiSelect()||Object.keys(i).forEach(r=>delete i[r]),u.getCanSelect()&&(i[e]=!0)):delete i[e],n&&(l=u.subRows)!=null&&l.length&&u.getCanSelectSubRows()&&u.subRows.forEach(r=>yv(i,r.id,t,n,s))};function xb(i,e){const t=i.getState().rowSelection,n=[],s={},l=function(u,r){return u.map(p=>{var f;const g=l_(p,t);if(g&&(n.push(p),s[p.id]=p),(f=p.subRows)!=null&&f.length&&(p={...p,subRows:l(p.subRows)}),g)return p}).filter(Boolean)};return{rows:l(e.rows),flatRows:n,rowsById:s}}function l_(i,e){var t;return(t=e[i.id])!=null?t:!1}function xv(i,e,t){var n;if(!((n=i.subRows)!=null&&n.length))return!1;let s=!0,l=!1;return i.subRows.forEach(u=>{if(!(l&&!s)&&(u.getCanSelect()&&(l_(u,e)?l=!0:s=!1),u.subRows&&u.subRows.length)){const r=xv(u,e);r==="all"?l=!0:(r==="some"&&(l=!0),s=!1)}}),s?"all":l?"some":!1}const bv=/([0-9]+)/gm,hY=(i,e,t)=>mA(Ac(i.getValue(t)).toLowerCase(),Ac(e.getValue(t)).toLowerCase()),pY=(i,e,t)=>mA(Ac(i.getValue(t)),Ac(e.getValue(t))),fY=(i,e,t)=>c_(Ac(i.getValue(t)).toLowerCase(),Ac(e.getValue(t)).toLowerCase()),mY=(i,e,t)=>c_(Ac(i.getValue(t)),Ac(e.getValue(t))),gY=(i,e,t)=>{const n=i.getValue(t),s=e.getValue(t);return n>s?1:n<s?-1:0},yY=(i,e,t)=>c_(i.getValue(t),e.getValue(t));function c_(i,e){return i===e?0:i>e?1:-1}function Ac(i){return typeof i=="number"?isNaN(i)||i===1/0||i===-1/0?"":String(i):typeof i=="string"?i:""}function mA(i,e){const t=i.split(bv).filter(Boolean),n=e.split(bv).filter(Boolean);for(;t.length&&n.length;){const s=t.shift(),l=n.shift(),u=parseInt(s,10),r=parseInt(l,10),p=[u,r].sort();if(isNaN(p[0])){if(s>l)return 1;if(l>s)return-1;continue}if(isNaN(p[1]))return isNaN(u)?-1:1;if(u>r)return 1;if(r>u)return-1}return t.length-n.length}const Lp={alphanumeric:hY,alphanumericCaseSensitive:pY,text:fY,textCaseSensitive:mY,datetime:gY,basic:yY},xY={getInitialState:i=>({sorting:[],...i}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:i=>({onSortingChange:Ya("sorting",i),isMultiSortEvent:e=>e.shiftKey}),createColumn:(i,e)=>{i.getAutoSortingFn=()=>{const t=e.getFilteredRowModel().flatRows.slice(10);let n=!1;for(const s of t){const l=s==null?void 0:s.getValue(i.id);if(Object.prototype.toString.call(l)==="[object Date]")return Lp.datetime;if(typeof l=="string"&&(n=!0,l.split(bv).length>1))return Lp.alphanumeric}return n?Lp.text:Lp.basic},i.getAutoSortDir=()=>{const t=e.getFilteredRowModel().flatRows[0];return typeof(t==null?void 0:t.getValue(i.id))=="string"?"asc":"desc"},i.getSortingFn=()=>{var t,n;if(!i)throw new Error;return _x(i.columnDef.sortingFn)?i.columnDef.sortingFn:i.columnDef.sortingFn==="auto"?i.getAutoSortingFn():(t=(n=e.options.sortingFns)==null?void 0:n[i.columnDef.sortingFn])!=null?t:Lp[i.columnDef.sortingFn]},i.toggleSorting=(t,n)=>{const s=i.getNextSortingOrder(),l=typeof t<"u"&&t!==null;e.setSorting(u=>{const r=u==null?void 0:u.find(w=>w.id===i.id),p=u==null?void 0:u.findIndex(w=>w.id===i.id);let f=[],g,b=l?t:s==="desc";if(u!=null&&u.length&&i.getCanMultiSort()&&n?r?g="toggle":g="add":u!=null&&u.length&&p!==u.length-1?g="replace":r?g="toggle":g="replace",g==="toggle"&&(l||s||(g="remove")),g==="add"){var y;f=[...u,{id:i.id,desc:b}],f.splice(0,f.length-((y=e.options.maxMultiSortColCount)!=null?y:Number.MAX_SAFE_INTEGER))}else g==="toggle"?f=u.map(w=>w.id===i.id?{...w,desc:b}:w):g==="remove"?f=u.filter(w=>w.id!==i.id):f=[{id:i.id,desc:b}];return f})},i.getFirstSortDir=()=>{var t,n;return((t=(n=i.columnDef.sortDescFirst)!=null?n:e.options.sortDescFirst)!=null?t:i.getAutoSortDir()==="desc")?"desc":"asc"},i.getNextSortingOrder=t=>{var n,s;const l=i.getFirstSortDir(),u=i.getIsSorted();return u?u!==l&&((n=e.options.enableSortingRemoval)==null||n)&&(!(t&&(s=e.options.enableMultiRemove)!=null)||s)?!1:u==="desc"?"asc":"desc":l},i.getCanSort=()=>{var t,n;return((t=i.columnDef.enableSorting)!=null?t:!0)&&((n=e.options.enableSorting)!=null?n:!0)&&!!i.accessorFn},i.getCanMultiSort=()=>{var t,n;return(t=(n=i.columnDef.enableMultiSort)!=null?n:e.options.enableMultiSort)!=null?t:!!i.accessorFn},i.getIsSorted=()=>{var t;const n=(t=e.getState().sorting)==null?void 0:t.find(s=>s.id===i.id);return n?n.desc?"desc":"asc":!1},i.getSortIndex=()=>{var t,n;return(t=(n=e.getState().sorting)==null?void 0:n.findIndex(s=>s.id===i.id))!=null?t:-1},i.clearSorting=()=>{e.setSorting(t=>t!=null&&t.length?t.filter(n=>n.id!==i.id):[])},i.getToggleSortingHandler=()=>{const t=i.getCanSort();return n=>{t&&(n.persist==null||n.persist(),i.toggleSorting==null||i.toggleSorting(void 0,i.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(n):!1))}}},createTable:i=>{i.setSorting=e=>i.options.onSortingChange==null?void 0:i.options.onSortingChange(e),i.resetSorting=e=>{var t,n;i.setSorting(e?[]:(t=(n=i.initialState)==null?void 0:n.sorting)!=null?t:[])},i.getPreSortedRowModel=()=>i.getGroupedRowModel(),i.getSortedRowModel=()=>(!i._getSortedRowModel&&i.options.getSortedRowModel&&(i._getSortedRowModel=i.options.getSortedRowModel(i)),i.options.manualSorting||!i._getSortedRowModel?i.getPreSortedRowModel():i._getSortedRowModel())}},bY=[FW,sY,eY,tY,$W,UW,aY,oY,xY,QW,lY,cY,uY,dY,nY];function vY(i){var e,t;const n=[...bY,...(e=i._features)!=null?e:[]];let s={_features:n};const l=s._features.reduce((y,w)=>Object.assign(y,w.getDefaultOptions==null?void 0:w.getDefaultOptions(s)),{}),u=y=>s.options.mergeOptions?s.options.mergeOptions(l,y):{...l,...y};let p={...{},...(t=i.initialState)!=null?t:{}};s._features.forEach(y=>{var w;p=(w=y.getInitialState==null?void 0:y.getInitialState(p))!=null?w:p});const f=[];let g=!1;const b={_features:n,options:{...l,...i},initialState:p,_queue:y=>{f.push(y),g||(g=!0,Promise.resolve().then(()=>{for(;f.length;)f.shift()();g=!1}).catch(w=>setTimeout(()=>{throw w})))},reset:()=>{s.setState(s.initialState)},setOptions:y=>{const w=mc(y,s.options);s.options=u(w)},getState:()=>s.options.state,setState:y=>{s.options.onStateChange==null||s.options.onStateChange(y)},_getRowId:(y,w,v)=>{var T;return(T=s.options.getRowId==null?void 0:s.options.getRowId(y,w,v))!=null?T:`${v?[v.id,w].join("."):w}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(y,w)=>{let v=(w?s.getPrePaginationRowModel():s.getRowModel()).rowsById[y];if(!v&&(v=s.getCoreRowModel().rowsById[y],!v))throw new Error;return v},_getDefaultColumnDef:tn(()=>[s.options.defaultColumn],y=>{var w;return y=(w=y)!=null?w:{},{header:v=>{const T=v.header.column.columnDef;return T.accessorKey?T.accessorKey:T.accessorFn?T.id:null},cell:v=>{var T,S;return(T=(S=v.renderValue())==null||S.toString==null?void 0:S.toString())!=null?T:null},...s._features.reduce((v,T)=>Object.assign(v,T.getDefaultColumnDef==null?void 0:T.getDefaultColumnDef()),{}),...y}},nn(i,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:tn(()=>[s._getColumnDefs()],y=>{const w=function(v,T,S){return S===void 0&&(S=0),v.map(E=>{const x=jW(s,E,S,T),A=E;return x.columns=A.columns?w(A.columns,x,S+1):[],x})};return w(y)},nn(i,"debugColumns")),getAllFlatColumns:tn(()=>[s.getAllColumns()],y=>y.flatMap(w=>w.getFlatColumns()),nn(i,"debugColumns")),_getAllFlatColumnsById:tn(()=>[s.getAllFlatColumns()],y=>y.reduce((w,v)=>(w[v.id]=v,w),{}),nn(i,"debugColumns")),getAllLeafColumns:tn(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(y,w)=>{let v=y.flatMap(T=>T.getLeafColumns());return w(v)},nn(i,"debugColumns")),getColumn:y=>s._getAllFlatColumnsById()[y]};Object.assign(s,b);for(let y=0;y<s._features.length;y++){const w=s._features[y];w==null||w.createTable==null||w.createTable(s)}return s}function _Y(){return i=>tn(()=>[i.options.data],e=>{const t={rows:[],flatRows:[],rowsById:{}},n=function(s,l,u){l===void 0&&(l=0);const r=[];for(let f=0;f<s.length;f++){const g=BW(i,i._getRowId(s[f],f,u),s[f],f,l,void 0,u==null?void 0:u.id);if(t.flatRows.push(g),t.rowsById[g.id]=g,r.push(g),i.options.getSubRows){var p;g.originalSubRows=i.options.getSubRows(s[f],f),(p=g.originalSubRows)!=null&&p.length&&(g.subRows=n(g.originalSubRows,l+1,g))}}return r};return t.rows=n(e),t},nn(i.options,"debugTable","getRowModel",()=>i._autoResetPageIndex()))}function wY(){return i=>tn(()=>[i.getState().sorting,i.getPreSortedRowModel()],(e,t)=>{if(!t.rows.length||!(e!=null&&e.length))return t;const n=i.getState().sorting,s=[],l=n.filter(p=>{var f;return(f=i.getColumn(p.id))==null?void 0:f.getCanSort()}),u={};l.forEach(p=>{const f=i.getColumn(p.id);f&&(u[p.id]={sortUndefined:f.columnDef.sortUndefined,invertSorting:f.columnDef.invertSorting,sortingFn:f.getSortingFn()})});const r=p=>{const f=p.map(g=>({...g}));return f.sort((g,b)=>{for(let w=0;w<l.length;w+=1){var y;const v=l[w],T=u[v.id],S=T.sortUndefined,E=(y=v==null?void 0:v.desc)!=null?y:!1;let x=0;if(S){const A=g.getValue(v.id),D=b.getValue(v.id),C=A===void 0,I=D===void 0;if(C||I){if(S==="first")return C?-1:1;if(S==="last")return C?1:-1;x=C&&I?0:C?S:-S}}if(x===0&&(x=T.sortingFn(g,b,v.id)),x!==0)return E&&(x*=-1),T.invertSorting&&(x*=-1),x}return g.index-b.index}),f.forEach(g=>{var b;s.push(g),(b=g.subRows)!=null&&b.length&&(g.subRows=r(g.subRows))}),f};return{rows:r(t.rows),flatRows:s,rowsById:t.rowsById}},nn(i.options,"debugTable","getSortedRowModel",()=>i._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function nC(i,e){return i?TY(i)?$e.createElement(i,e):i:null}function TY(i){return CY(i)||typeof i=="function"||SY(i)}function CY(i){return typeof i=="function"&&(()=>{const e=Object.getPrototypeOf(i);return e.prototype&&e.prototype.isReactComponent})()}function SY(i){return typeof i=="object"&&typeof i.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(i.$$typeof.description)}function EY(i){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...i},[t]=$e.useState(()=>({current:vY(e)})),[n,s]=$e.useState(()=>t.current.initialState);return t.current.setOptions(l=>({...l,...i,state:{...n,...i.state},onStateChange:u=>{s(u),i.onStateChange==null||i.onStateChange(u)}})),t.current}const Fd=LW(),Mg=[Fd.accessor("id",{header:Qe.t("ID")}),Fd.accessor("name",{header:Qe.t("Name")}),Fd.accessor("created",{header:Qe.t("Created"),cell:i=>i.getValue()?new Date(i.getValue()).toLocaleString():void 0}),Fd.accessor("modelId",{header:Qe.t("Model ID")}),Fd.accessor("startDate",{header:Qe.t("Start Date"),cell:i=>i.getValue()?new Date(i.getValue()).toLocaleString():void 0}),Fd.accessor("endDate",{header:Qe.t("End Date"),cell:i=>i.getValue()?new Date(i.getValue()).toLocaleString():void 0})],kY=i=>i.getIsSorted()?i.getIsSorted():"default",AY=()=>{const{backtests:i,error:e,isLoading:t}=RW(),[n,s]=fe.useState([{id:"created",desc:!0}]),[l,u]=fe.useState({}),[r,p]=fe.useState([]),f=fe.useMemo(()=>Mg.map(y=>{const w=y.header,v=y.id||"";return{label:typeof w=="string"?w:v,value:v}}),[]);fe.useEffect(()=>{const y=Mg.map(v=>v.id||"").filter(v=>v!=="");p(y);const w=y.reduce((v,T)=>(v[T]=!0,v),{});u(w)},[]);const g=y=>{p(y);const w=Mg.reduce((v,T)=>{const S=T.id||"";return S!==""&&(v[S]=y.includes(S)),v},{});u(w)},b=EY({data:i||[],columns:Mg,state:{sorting:n,columnVisibility:l},onSortingChange:s,onColumnVisibilityChange:u,getSortedRowModel:wY(),getCoreRowModel:_Y()});return t?he.jsx("div",{className:Sg.loadingContainer,children:he.jsx(Qo,{})}):e?he.jsx("div",{className:Sg.errorContainer,children:he.jsx(Ho,{error:!0,title:Qe.t("Error loading evaluations"),children:e.message||Qe.t("An unknown error occurred")})}):he.jsxs(If,{className:Sg.container,children:[he.jsx("h2",{children:Qe.t("Evaluations (WIP)")}),he.jsx("div",{className:Sg.columnSelector,children:he.jsx(po,{selected:r,onChange:({selected:y})=>g(y),placeholder:Qe.t("Select columns to display"),label:Qe.t("Visible columns"),children:f.map(y=>he.jsx(YC,{label:y.label,value:y.value},y.value))})}),he.jsxs(C1,{children:[he.jsx(w1,{children:b.getHeaderGroups().map(y=>he.jsx(Wp,{children:y.headers.map(w=>he.jsx(S1,{...w.column.getCanSort()?{sortDirection:kY(w.column),sortIconTitle:Qe.t("Sort by {{column}}",{column:w.column.id}),onSortIconClick:()=>w.column.toggleSorting()}:{},children:w.isPlaceholder?null:nC(w.column.columnDef.header,w.getContext())},w.id))},y.id))}),he.jsxs(_1,{children:[b.getRowModel().rows.map(y=>he.jsx(Wp,{children:y.getVisibleCells().map(w=>he.jsx(dy,{children:nC(w.column.columnDef.cell,w.getContext())},w.id))},y.id)),(!i||i.length===0)&&he.jsx(Wp,{children:he.jsx(dy,{colSpan:String(b.getAllColumns().length),align:"center",children:Qe.t("No evaluations available")})})]})]})]})},MY=h9([{element:he.jsx(hW,{}),errorElement:he.jsx(C9,{}),children:[{path:"/",element:he.jsx($O,{to:"/evaluate",replace:!0})},{element:he.jsxs(vW,{children:[he.jsx(CW,{}),he.jsx(kW,{}),he.jsx(eT,{children:he.jsx(u3,{})})]}),children:[{path:"/evaluate",children:[{index:!0,element:he.jsx(hG,{})},{path:"compare",handle:{fullWidth:!0},element:he.jsx(Dk,{evaluationId:1})}]},{path:"/evaluationsWIP",element:he.jsx(AY,{})},{path:"/predict",element:he.jsx(vG,{})}]},{path:"/settings",element:he.jsx(eT,{children:he.jsx(Vq,{})})}]}]),LY=()=>he.jsxs(he.Fragment,{children:[he.jsx(_5,{}),he.jsx(tE,{theme:!0,spacers:!0,colors:!0,elevations:!0}),he.jsx(_G,{children:he.jsx(T9,{router:MY})}),he.jsx(Gq,{position:"bottom-right"})]});export{LY as default};
