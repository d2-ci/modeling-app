import{P as me,r as Ue,R as Ae,_ as jt,c as We,a as Br,t as ni,s as Jt,m as ZA,b as fa,i as it,B as Gn,L as by,d as sh,e as W_,f as u0,C as qo,I as fC,g as XA,l as KA,S as QA,F as JA,h as mg,j as eM,k as tM,n as iM,o as mC,p as nM,u as _y,q as rM,v as sM,w as gC,x as aM,y as ah,z as Ea,M as Cu,A as qv,D as wy,E as Yv,G as Zv,H as Cy,J as Ty,K as bf,N as Xv,O as Tu,U as oM,Q as lM,T as Bo,V as Gp,W as cM,X as he,Y as uM,Z as Fa,$ as oh,a0 as dM,a1 as hM,a2 as Sy,a3 as Ey,a4 as pM,a5 as Kv,a6 as yC,a7 as fM}from"./main-OeHr8NP3.js";const mM=i=>typeof i>"u"||i===null||i==="",q_=(i,e,t)=>(r,s,l)=>{const u=r[s];return t?new Error(`Property \`${s}\` on component \`${l}\` is using the \`requiredIf\` prop-validator combined with \`.isRequired\`. This is an invalid combination.`):typeof i!="function"?new Error("The `condition` argument passed to the `requiredIf` prop-validator was not a function."):typeof e!="function"?new Error("The `propType` argument passed to the `requiredIf` prop-validator was not a function."):i(r)&&mM(u)?new Error(`Invalid prop \`${s}\` supplied to \`${l}\`, this prop is conditionally required but has value \`${u}\`. The condition that made this prop required is: \`${i.toString()}\`.`):(me.checkPropTypes({[s]:e},r,"prop",l),null)};function Bd(i,e){const t=q_(i,e,!1);return t.isRequired=q_(i,e,!0),t}function Qv(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M8 2a1 1 0 011 1v4h4a1 1 0 010 2H9v4a1 1 0 01-2 0V9H3a1 1 0 110-2h4V3a1 1 0 011-1z",fill:"currentColor",fillRule:"evenodd"}))}Qv.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function Jv(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M12 3a1 1 0 011 1v7h7a1 1 0 010 2h-7v7a1 1 0 01-2 0v-7H4a1 1 0 010-2h7V4a1 1 0 011-1z",fill:"currentColor",fillRule:"evenodd"}))}Jv.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function xC(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M19 3a2 2 0 012 2v4h-1v10a2 2 0 01-2 2H6a2 2 0 01-2-2V9H3V5a2 2 0 012-2zm-1 6H6v10h12zm-4 3v2h-4v-2zm5-7H5v2h14z",fill:"currentColor"}))}xC.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function vC(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M7.354 2.646a.5.5 0 01.057.638l-.057.07L3.207 7.5H14a.5.5 0 01.09.992L14 8.5H3.207l4.147 4.146a.5.5 0 01.057.638l-.057.07a.5.5 0 01-.638.057l-.07-.057-5-5a.5.5 0 01-.057-.638l.057-.07 5-5a.5.5 0 01.708 0z",fill:"currentColor"}))}vC.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function ky(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M13.613 5.21l.094.083 6 6a1 1 0 01.083 1.32l-.083.094-6 6a1 1 0 01-1.497-1.32l.083-.094L16.584 13H5a1 1 0 01-.117-1.993L5 11h11.586l-4.293-4.293a1 1 0 01-.083-1.32l.083-.094a1 1 0 011.32-.083z",fill:"currentColor"}))}ky.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function eb(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M4.146 6.146a.5.5 0 01.638-.057l.07.057L8 9.293l3.146-3.147a.5.5 0 01.638-.057l.07.057a.5.5 0 01.057.638l-.057.07-3.5 3.5a.5.5 0 01-.638.057l-.07-.057-3.5-3.5a.5.5 0 010-.708z",fill:"currentColor"}))}eb.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function bC(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M9.146 4.146a.5.5 0 01.765.638l-.057.07L6.707 8l3.147 3.146a.5.5 0 01.057.638l-.057.07a.5.5 0 01-.638.057l-.07-.057-3.5-3.5a.5.5 0 01-.057-.638l.057-.07z",fill:"currentColor"}))}bC.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function _C(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M6.146 4.146a.5.5 0 01.638-.057l.07.057 3.5 3.5a.5.5 0 01.057.638l-.057.07-3.5 3.5a.5.5 0 01-.765-.638l.057-.07L9.293 8 6.146 4.854a.5.5 0 01-.057-.638z",fill:"currentColor"}))}_C.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function wC(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M7.646 5.646a.5.5 0 01.638-.057l.07.057 3.5 3.5a.5.5 0 01-.638.765l-.07-.057L8 6.707 4.854 9.854a.5.5 0 01-.638.057l-.07-.057a.5.5 0 01-.057-.638l.057-.07z",fill:"currentColor"}))}wC.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function tb(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M13.5 3a.5.5 0 110 1H13v10a1 1 0 01-1 1H4a1 1 0 01-1-1V4h-.5a.5.5 0 010-1zM12 4H4v10h8zM7 6v6H6V6zm3 0v6H9V6zm-.5-5a.5.5 0 010 1h-3a.5.5 0 010-1z",fill:"currentColor"}))}tb.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function CC(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M20 5a1 1 0 010 2h-1v13a2 2 0 01-2 2H7a2 2 0 01-2-2V7H4a1 1 0 110-2zm-3 2H7v13h10zm-6 2v8h-1V9zm3 0v8h-1V9zm1-7v2H9V2z",fill:"currentColor"}))}CC.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function TC(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M20 14a1 1 0 01.993.883L21 15v3a3 3 0 01-2.824 2.995L18 21H6a3 3 0 01-2.995-2.824L3 18v-3a1 1 0 011.993-.117L5 15v3a1 1 0 00.883.993L6 19h12a1 1 0 00.993-.883L19 18v-3a1 1 0 011-1zM12 3a1 1 0 01.993.883L13 4v9.584l2.293-2.291a1 1 0 011.32-.083l.094.083a1 1 0 01.083 1.32l-.083.094-4 4a1 1 0 01-1.32.083l-.094-.083-4-4a1 1 0 011.32-1.497l.094.083L11 13.584V4a1 1 0 011-1z",fill:"currentColor"}))}TC.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function SC(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M10.613 2.624l.094.083 2.586 2.586a1 1 0 01.083 1.32l-.083.094L6 14H2v-4l7.293-7.293a1 1 0 011.32-.083zm-.613.79l-6.793 6.792 2.585 2.585L12.586 6z",fill:"currentColor"}))}SC.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function EC(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 100 16 8 8 0 000-16zm0 11a1 1 0 110 2 1 1 0 010-2zm1-8v6h-2V7z",fill:"currentColor"}))}EC.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function kC(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M11 3v2H5v14h14v-6h2v6a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2zm11-2a1 1 0 01.993.883L23 2v6a1 1 0 01-1.993.117L21 8V4.414l-7.293 7.293a1 1 0 01-1.497-1.32l.083-.094L19.584 3H16a1 1 0 01-.993-.883L15 2a1 1 0 01.883-.993L16 1z",fill:"currentColor"}))}kC.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function ib(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M3 7a1 1 0 110 2 1 1 0 010-2zm5 0a1 1 0 110 2 1 1 0 010-2zm5 0a1 1 0 110 2 1 1 0 010-2z",fill:"currentColor",fillRule:"evenodd"}))}ib.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function AC(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M20 7a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V9a2 2 0 012-2zM6 9H4v6h16V9h-2v3a1 1 0 01-2 0V9h-3v3a1 1 0 01-2 0V9H8v3a1 1 0 01-2 0z",fill:"currentColor"}))}AC.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function MC(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M11.5 1a2.5 2.5 0 11-1.913 4.11l.024.027-3.73 2.098a2.498 2.498 0 01-.003 1.539l.003-.009 3.73 2.098-.024.027a2.5 2.5 0 11-.465.837l-.003.008L5.39 9.636l.023-.026a2.5 2.5 0 110-3.22l-.024-.027 3.73-2.098A2.5 2.5 0 0111.5 1zm0 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm-8-4.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm8-4.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3z",fill:"currentColor"}))}MC.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function PC(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M13 15a4 4 0 014 4v2H7v-2a4 4 0 014-4zm0 2h-2a2 2 0 00-1.995 1.85L9 19h6a2 2 0 00-1.85-1.995zM7 9v2H6a2 2 0 00-1.995 1.85L4 13h3v2H2v-2a4 4 0 014-4zm11 0a4 4 0 014 4v2h-5v-2h3a2 2 0 00-1.85-1.995L18 11h-1V9zm-6-1a3 3 0 110 6 3 3 0 010-6zm0 2a1 1 0 100 2 1 1 0 000-2zM7 2a3 3 0 110 6 3 3 0 010-6zm10 0a3 3 0 110 6 3 3 0 010-6zM7 4a1 1 0 100 2 1 1 0 000-2zm10 0a1 1 0 100 2 1 1 0 000-2z",fill:"currentColor"}))}PC.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function IC(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",color:e,"data-test":t},Ue.createElement("path",{fill:"currentColor",d:"M4 2v18h18v2H2V2h2zm18 10v6H6v-4l5-2 5 4 6-4zM6 3l5 3 5-2 6 4v2l-6 4-5-4-5 2V3z"}))}IC.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function DC(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M8.85 1.839l.056.103 5.43 11.635a1 1 0 01-.79 1.416L13.43 15H2.57a1 1 0 01-.95-1.314l.044-.109 5.43-11.635a1 1 0 011.757-.103zM8 2.365L2.57 14h10.86zM8 11a1 1 0 110 2 1 1 0 010-2zm.5-6v5h-1V5z",fill:"currentColor"}))}DC.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};function RC(i){let{color:e,dataTest:t,ariaLabel:r}=i;return Ue.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:e,"data-test":t},Ue.createElement("path",{d:"M12 3a9 9 0 110 18 9 9 0 010-18zm0 2a6.967 6.967 0 00-3.848 1.152l.494.494a.5.5 0 00.708 0l.5-.5A.5.5 0 0110.207 6h.859a.5.5 0 01.416.777l-1.434 2.15a.5.5 0 00-.069.157l-.384 1.537A.5.5 0 019.11 11H8.5a.5.5 0 01-.5-.5V10a.414.414 0 00-.707-.293l-.94.94a.5.5 0 000 .707l1.5 1.5a.5.5 0 00.354.146h1.484a.5.5 0 01.447.276l.75 1.5a.5.5 0 010 .448L9.275 18.45c.838.354 1.759.55 2.725.55a6.968 6.968 0 004.026-1.273.43.43 0 01-.026-.152V15.36a.5.5 0 00-.342-.474l-2.184-.728a.5.5 0 01-.316-.632l.728-2.184A.5.5 0 0114.36 11h4.57a6.951 6.951 0 00-.712-2.218l-.928.928a.5.5 0 01-.631.063l-2.243-1.496a.5.5 0 01-.139-.693l1.133-1.699A6.968 6.968 0 0012 5zm-7 7.009a6.98 6.98 0 002.435 5.298l-.398-1.195a.5.5 0 00-.12-.195l-.77-.77A.5.5 0 016 14.792v-1.586a.5.5 0 00-.146-.353l-.797-.797z",fill:"currentColor"}))}RC.propTypes={color:me.string,dataTest:me.string,ariaLabel:me.string};const ca=["svg.jsx-4069423049{display:block;pointer-events:none;}",`svg.jsx-4069423049 .border.jsx-4069423049{fill:${We.grey800};}`,`svg.jsx-4069423049 .background.jsx-4069423049,svg.jsx-4069423049 .indeterminate.jsx-4069423049,svg.jsx-4069423049 .checkmark.jsx-4069423049{fill:${We.white};}`,`svg.checked.jsx-4069423049 .background.jsx-4069423049,svg.indeterminate.jsx-4069423049 .background.jsx-4069423049{fill:${We.teal500};}`,`svg.valid.jsx-4069423049 .background.jsx-4069423049{fill:${We.blue600};}`,`svg.warning.jsx-4069423049 .background.jsx-4069423049{fill:${We.yellow700};}`,`svg.error.jsx-4069423049 .background.jsx-4069423049{fill:${We.red500};}`,`svg.checked.jsx-4069423049 .border.jsx-4069423049,svg.indeterminate.jsx-4069423049 .border.jsx-4069423049{fill:${We.teal900};}`,"svg.jsx-4069423049:not(.checked) .checkmark.jsx-4069423049,svg.jsx-4069423049:not(.indeterminate) .indeterminate.jsx-4069423049{fill:none;}",`svg.jsx-4069423049:not(.checked):not(.indeterminate) .background.jsx-4069423049{fill:${We.white};}`];ca.__hash="4069423049";function LC(i){let{className:e}=i;return Ae.createElement("svg",{viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",className:`jsx-${ca.__hash} `+jt.dynamic([["2753140462",[We.grey300,We.grey400,We.blue600,We.blue700,We.yellow700,We.yellow800,We.red500,We.red700]]])+" "+(e||"")},Ae.createElement("rect",{x:"0",y:"0",width:"18",height:"18",rx:"3",className:`jsx-${ca.__hash} `+jt.dynamic([["2753140462",[We.grey300,We.grey400,We.blue600,We.blue700,We.yellow700,We.yellow800,We.red500,We.red700]]])+" background"}),Ae.createElement("path",{d:"M15,0 C16.6568542,0 18,1.34314575 18,3 L18,15 C18,16.6568542 16.6568542,18 15,18 L3,18 C1.34314575,18 0,16.6568542 0,15 L0,3 C0,1.34314575 1.34314575,0 3,0 L15,0 Z M15,1 L3,1 C1.9456382,1 1.08183488,1.81587779 1.00548574,2.85073766 L1,3 L1,15 C1,16.0543618 1.81587779,16.9181651 2.85073766,16.9945143 L3,17 L15,17 C16.0543618,17 16.9181651,16.1841222 16.9945143,15.1492623 L17,15 L17,3 C17,1.9456382 16.1841222,1.08183488 15.1492623,1.00548574 L15,1 Z",className:`jsx-${ca.__hash} `+jt.dynamic([["2753140462",[We.grey300,We.grey400,We.blue600,We.blue700,We.yellow700,We.yellow800,We.red500,We.red700]]])+" border"}),Ae.createElement("path",{d:"M4.74451387,8.02852516 C4.39595738,8.11985643 4.12375034,8.39235188 4.03251575,8.74127768 C3.94128115,9.09020348 4.04521722,9.46125864 4.30437605,9.71182782 L7.29823844,12.7078028 C7.68753993,13.0973991 8.31859767,13.0973991 8.70789916,12.7078028 L13.695624,6.71585285 C13.9547828,6.46528367 14.0587189,6.09422851 13.9674843,5.74530271 C13.8762497,5.39637691 13.6040426,5.12388146 13.2554861,5.0325502 C12.9069296,4.94121893 12.5362672,5.04526513 12.2859632,5.30469855 L8.0030688,10.5910713 L5.71403676,8.30067351 C5.46373279,8.0412401 5.09307036,7.9371939 4.74451387,8.02852516 Z",className:`jsx-${ca.__hash} `+jt.dynamic([["2753140462",[We.grey300,We.grey400,We.blue600,We.blue700,We.yellow700,We.yellow800,We.red500,We.red700]]])+" checkmark"}),Ae.createElement("rect",{x:"4",y:"8",width:"10",height:"2",rx:"1",className:`jsx-${ca.__hash} `+jt.dynamic([["2753140462",[We.grey300,We.grey400,We.blue600,We.blue700,We.yellow700,We.yellow800,We.red500,We.red700]]])+" indeterminate"}),Ae.createElement(jt,{id:ca.__hash},ca),Ae.createElement(jt,{id:"2753140462",dynamic:[We.grey300,We.grey400,We.blue600,We.blue700,We.yellow700,We.yellow800,We.red500,We.red700]},["svg.__jsx-style-dynamic-selector{width:18px;height:18px;}",`svg.disabled.__jsx-style-dynamic-selector .background.__jsx-style-dynamic-selector{fill:${We.grey300};}`,`svg.disabled.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.grey400};}`,`svg.valid.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.blue600};}`,`svg.valid.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.valid.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.blue700};}`,`svg.warning.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.yellow700};}`,`svg.warning.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.warning.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.yellow800};}`,`svg.error.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.red500};}`,`svg.error.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.error.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.red700};}`]))}LC.propTypes={className:me.string};function zC(i){let{className:e}=i;return Ae.createElement("svg",{viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg",className:`jsx-${ca.__hash} `+jt.dynamic([["86695588",[We.grey400,We.grey400,We.grey500,We.blue600,We.blue800,We.yellow700,We.yellow800,We.red500,We.red800]]])+" "+(e||"")},Ae.createElement("rect",{x:"0",y:"0",width:"14",height:"14",rx:"2",className:`jsx-${ca.__hash} `+jt.dynamic([["86695588",[We.grey400,We.grey400,We.grey500,We.blue600,We.blue800,We.yellow700,We.yellow800,We.red500,We.red800]]])+" background"}),Ae.createElement("path",{d:"M2,0 L12,0 C13.1045695,0 14,0.8954305 14,2 L14,12 C14,13.1045695 13.1045695,14 12,14 L2,14 C0.8954305,14 0,13.1045695 0,12 L0,2 C0,0.8954305 0.8954305,0 2,0 Z M2,1 C1.44771525,1 1,1.44771525 1,2 L1,12 C1,12.5522847 1.44771525,13 2,13 L12,13 C12.5522847,13 13,12.5522847 13,12 L13,2 C13,1.44771525 12.5522847,1 12,1 L2,1 Z",className:`jsx-${ca.__hash} `+jt.dynamic([["86695588",[We.grey400,We.grey400,We.grey500,We.blue600,We.blue800,We.yellow700,We.yellow800,We.red500,We.red800]]])+" border"}),Ae.createElement("path",{d:"M10.3520005,3.30015877 L5.54268293,8.03252726 L3.64634146,6.16652726 L2.28668615,7.5044281 L5.54310367,10.7010587 L11.7145993,4.628307 L10.3520005,3.30015877 Z M5.54268293,9.43547274 L5.61193184,9.36733181 L5.54226219,9.29894127 L5.47309681,9.367 L5.54268293,9.43547274 Z M10.6496329,4.41023392 L10.6495057,4.35652297 L10.5648412,4.35672356 L10.2854007,4.631693 L10.3553166,4.69984123 L10.6496329,4.41023392 Z M3.42891348,7.22439304 L3.35030905,7.22439304 L3.35034135,7.27820863 L3.64634146,7.56947274 L3.71331385,7.5035719 L3.42891348,7.22439304 Z",className:`jsx-${ca.__hash} `+jt.dynamic([["86695588",[We.grey400,We.grey400,We.grey500,We.blue600,We.blue800,We.yellow700,We.yellow800,We.red500,We.red800]]])+" checkmark"}),Ae.createElement("rect",{x:"3",y:"6",width:"8",height:"2",className:`jsx-${ca.__hash} `+jt.dynamic([["86695588",[We.grey400,We.grey400,We.grey500,We.blue600,We.blue800,We.yellow700,We.yellow800,We.red500,We.red800]]])+" indeterminate"}),Ae.createElement(jt,{id:ca.__hash},ca),Ae.createElement(jt,{id:"86695588",dynamic:[We.grey400,We.grey400,We.grey500,We.blue600,We.blue800,We.yellow700,We.yellow800,We.red500,We.red800]},["svg.__jsx-style-dynamic-selector{width:14px;height:14px;}",`svg.disabled.__jsx-style-dynamic-selector .background.__jsx-style-dynamic-selector{fill:${We.grey400};}`,`svg.disabled.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.grey400};}`,`svg.disabled.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.disabled.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.grey500};}`,`svg.valid.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.blue600};}`,`svg.valid.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.valid.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.blue800};}`,`svg.warning.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.yellow700};}`,`svg.warning.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.warning.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.yellow800};}`,`svg.error.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.red500};}`,`svg.error.checked.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector,svg.error.indeterminate.__jsx-style-dynamic-selector .border.__jsx-style-dynamic-selector{fill:${We.red800};}`]))}zC.propTypes={className:me.string};function zd(i,e,t){return(e=gM(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function gM(i){var e=yM(i,"string");return typeof e=="symbol"?e:e+""}function yM(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class Ay extends Ue.Component{constructor(){super(...arguments),zd(this,"ref",Ue.createRef()),zd(this,"handleChange",e=>{this.props.onChange&&this.props.onChange(this.createHandlerPayload(),e)}),zd(this,"handleBlur",e=>{this.props.onBlur&&this.props.onBlur(this.createHandlerPayload(),e)}),zd(this,"handleFocus",e=>{this.props.onFocus&&this.props.onFocus(this.createHandlerPayload(),e)}),zd(this,"handleKeyDown",e=>{this.props.onKeyDown&&this.props.onKeyDown(this.createHandlerPayload(),e)})}componentDidMount(){this.props.initialFocus&&this.ref.current.focus(),this.setIndeterminate(this.props.indeterminate)}componentDidUpdate(e){e.indeterminate!==this.props.indeterminate&&this.setIndeterminate(this.props.indeterminate)}setIndeterminate(e){this.ref.current.indeterminate=e}createHandlerPayload(){return{value:this.props.value,name:this.props.name,checked:!this.props.checked}}render(){const{checked:e=!1,indeterminate:t=!1,className:r,disabled:s,error:l,label:u,name:n,tabIndex:p,valid:m,value:g,warning:v,dense:y,dataTest:C="dhis2-uicore-checkbox"}=this.props,_=Br({checked:e,indeterminate:t,disabled:s,valid:m,error:l,warning:v});return Ae.createElement("label",{"data-test":C,className:jt.dynamic([["1252368010",[We.grey900,ni.disabled,Jt.dp4,ni.focus]]])+" "+(Br(r,{disabled:s,dense:y})||"")},Ae.createElement("input",{type:"checkbox",ref:this.ref,name:n,value:g,checked:e,disabled:s,tabIndex:p,onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur,className:jt.dynamic([["1252368010",[We.grey900,ni.disabled,Jt.dp4,ni.focus]]])}),Ae.createElement("div",{className:jt.dynamic([["1252368010",[We.grey900,ni.disabled,Jt.dp4,ni.focus]]])+" "+(Br("icon",{dense:y})||"")},y?Ae.createElement(zC,{className:_}):Ae.createElement(LC,{className:_})),u,Ae.createElement(jt,{id:"1252368010",dynamic:[We.grey900,ni.disabled,Jt.dp4,ni.focus]},[`label.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;cursor:pointer;color:${We.grey900};font-size:14px;line-height:19px;}`,"label.dense.__jsx-style-dynamic-selector{font-size:14px;line-height:16px;}",`label.disabled.__jsx-style-dynamic-selector{cursor:not-allowed;color:${ni.disabled};}`,"input.__jsx-style-dynamic-selector{opacity:0;position:absolute;height:18px;width:18px;inset-inline-start:3px;}","label.dense.__jsx-style-dynamic-selector input.__jsx-style-dynamic-selector{height:14px;width:14px;}",`.icon.__jsx-style-dynamic-selector{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-inline-end:${Jt.dp4};border:2px solid transparent;padding:1px;border-radius:5px;}`,"label.dense.__jsx-style-dynamic-selector .icon.__jsx-style-dynamic-selector{margin-inline-end:3px;border-radius:4px;}",`input.__jsx-style-dynamic-selector:focus+.icon.__jsx-style-dynamic-selector{outline:3px solid ${ni.focus};outline-offset:-3px;}`]))}}zd(Ay,"defaultProps",{checked:!1,indeterminate:!1,dataTest:"dhis2-uicore-checkbox"});const Y_=ZA(["checked","indeterminate"],me.bool);Ay.propTypes={checked:Y_,className:me.string,dataTest:me.string,dense:me.bool,disabled:me.bool,error:fa,indeterminate:Y_,initialFocus:me.bool,label:me.node,name:me.string,tabIndex:me.string,valid:fa,value:me.string,warning:fa,onBlur:me.func,onChange:me.func,onFocus:me.func,onKeyDown:me.func};const xM={"Toggle dropdown":"Toggle dropdown"},vM="default";it.addResources("en",vM,xM);function Nd(i,e,t){return(e=bM(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function bM(i){var e=_M(i,"string");return typeof e=="symbol"?e:e+""}function _M(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}const Z_={styles:Ae.createElement(jt,{id:"2502148942"},[`button.jsx-2502148942{padding:0 ${Jt.dp12};}`]),className:"jsx-2502148942"};class nb extends Ue.Component{constructor(){super(...arguments),Nd(this,"state",{open:!1}),Nd(this,"anchorRef",Ae.createRef()),Nd(this,"handleKeyDown",e=>{e.key==="Escape"&&this.state.open&&(e.preventDefault(),e.stopPropagation(),this.setState({open:!1}),this.anchorRef.current&&this.anchorRef.current.focus())}),Nd(this,"onClick",(e,t)=>{this.props.onClick&&this.props.onClick({name:e.name,value:e.value,open:this.state.open},t)}),Nd(this,"onToggle",()=>{this.setState(e=>({open:!e.open}))})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}render(){const{open:e}=this.state,{component:t,children:r,className:s,name:l,value:u,icon:n,small:p,large:m,primary:g,secondary:v,destructive:y,disabled:C,type:_,tabIndex:w,dataTest:k="dhis2-uicore-splitbutton",initialFocus:S}=this.props,x=e?Ae.createElement(wC,null):Ae.createElement(eb,null);return Ae.createElement("div",{ref:this.anchorRef,"data-test":k,className:"jsx-2116647326"},Ae.createElement(Gn,{name:l,value:u,icon:n,small:p,large:m,primary:g,secondary:v,destructive:y,disabled:C,onClick:this.onClick,type:_,tabIndex:w,className:Br(s),initialFocus:S,dataTest:`${k}-button`},r),Ae.createElement(Gn,{name:l,value:u,small:p,large:m,primary:g,secondary:v,destructive:y,disabled:C,onClick:this.onToggle,type:_,tabIndex:w,className:Br(s,Z_.className),dataTest:`${k}-toggle`,title:it.t("Toggle dropdown"),"aria-label":it.t("Toggle dropdown")},x),e&&Ae.createElement(by,{onBackdropClick:this.onToggle,transparent:!0},Ae.createElement(sh,{dataTest:`${k}-menu`,placement:"bottom-end",reference:this.anchorRef},t)),Z_.styles,Ae.createElement(jt,{id:"2116647326"},["div.jsx-2116647326{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;color:inherit;white-space:nowrap;position:relative;z-index:0;}","div.jsx-2116647326>button:first-child{border-start-end-radius:0;border-end-end-radius:0;border-inline-end:0;}","div.jsx-2116647326>button:last-child{border-start-start-radius:0;border-end-start-radius:0;}"]))}}Nd(nb,"defaultProps",{dataTest:"dhis2-uicore-splitbutton"});nb.propTypes={children:me.string,className:me.string,component:me.element,dataTest:me.string,destructive:me.bool,disabled:me.bool,icon:me.element,initialFocus:me.bool,large:W_,name:me.string,primary:me.bool,secondary:me.bool,small:W_,tabIndex:me.string,type:me.oneOf(["submit","reset","button"]),value:me.string,onClick:me.func};var wM=void 0;const CM=(i,e,t)=>{let r;return function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];const n=wM,p=()=>{r=null,i.apply(n,l)};clearTimeout(r),r=setTimeout(p,e)}},NC=i=>{let{dataTest:e,onToggle:t,children:r,tabIndex:s="0",error:l,warning:u,valid:n,disabled:p,dense:m,className:g,inputRef:v}=i;const y=Br(g,"root",{error:l,warning:u,valid:n,disabled:p,dense:m});return Ae.createElement("div",{onClick:t,tabIndex:s,ref:v,"data-test":e,className:jt.dynamic([["1568723238",[We.grey500,ni.focus,ni.focus,ni.valid,ni.warning,ni.error,We.grey100,We.grey500,ni.disabled]]])+" "+(y||"")},Ae.createElement("div",{className:jt.dynamic([["1568723238",[We.grey500,ni.focus,ni.focus,ni.valid,ni.warning,ni.error,We.grey100,We.grey500,ni.disabled]]])+" root-children"},r),Ae.createElement("div",{className:jt.dynamic([["1568723238",[We.grey500,ni.focus,ni.focus,ni.valid,ni.warning,ni.error,We.grey100,We.grey500,ni.disabled]]])+" root-right"},Ae.createElement(eb,null)),Ae.createElement(jt,{id:"1568723238",dynamic:[We.grey500,ni.focus,ni.focus,ni.valid,ni.warning,ni.error,We.grey100,We.grey500,ni.disabled]},[`.root.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:white;border-radius:3px;border:1px solid ${We.grey500};box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:40px;padding-block:6px;padding-inline:12px;box-shadow:inset 0 0 1px 0 rgba(48,54,60,0.1);}`,`.root.__jsx-style-dynamic-selector:not(.disabled):focus,.root.__jsx-style-dynamic-selector:not(.disabled):active{outline:none;box-shadow:inset 0 0 0 2px ${ni.focus};border-color:${ni.focus};}`,`.root.valid.__jsx-style-dynamic-selector{border-color:${ni.valid};}`,`.root.warning.__jsx-style-dynamic-selector{border-color:${ni.warning};}`,`.root.error.__jsx-style-dynamic-selector{border-color:${ni.error};}`,`.root.disabled.__jsx-style-dynamic-selector{background-color:${We.grey100};border-color:${We.grey500};color:${ni.disabled};cursor:not-allowed;}`,".root.dense.__jsx-style-dynamic-selector{padding-block:2px;padding-inline:8px;min-height:32px;}",".root-children.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".root-right.__jsx-style-dynamic-selector{margin-block-start:4px;margin-inline-start:8px;}"]))};NC.propTypes={dataTest:me.string.isRequired,inputRef:me.object.isRequired,onToggle:me.func.isRequired,children:me.element,className:me.string,dense:me.bool,disabled:me.bool,error:fa,tabIndex:me.string,valid:fa,warning:fa};const OC=i=>{let{children:e,dataTest:t,maxHeight:r="280px",menuWidth:s,onClick:l,selectRef:u}=i;return Ae.createElement(by,{onBackdropClick:l,transparent:!0},Ae.createElement(sh,{reference:u,placement:"bottom-start",observeReferenceResize:!0},Ae.createElement("div",{"data-test":`${t}-menuwrapper`,className:jt.dynamic([["1363246346",[s,r,We.white,We.grey200,u0.e300]]])},e,Ae.createElement(jt,{id:"1363246346",dynamic:[s,r,We.white,We.grey200,u0.e300]},[`div.__jsx-style-dynamic-selector{width:${s};height:auto;max-height:${r};overflow:auto;background:${We.white};border:1px solid ${We.grey200};border-radius:3px;box-shadow:${u0.e300};}`]))))};OC.propTypes={dataTest:me.string.isRequired,menuWidth:me.string.isRequired,selectRef:me.object.isRequired,children:me.node,maxHeight:me.string,onClick:me.func};function Ka(i,e,t){return(e=TM(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function TM(i){var e=SM(i,"string");return typeof e=="symbol"?e:e+""}function SM(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}const EM=27,kM=32,AM=38,MM=40;class rb extends Ue.Component{constructor(){super(...arguments),Ka(this,"state",{open:!1,menuWidth:"auto"}),Ka(this,"selectRef",Ae.createRef()),Ka(this,"inputRef",Ae.createRef()),Ka(this,"onResize",CM(()=>{const e=this.getMenuWidth();this.state.menuWidth!==e&&this.setState({menuWidth:e})},50)),Ka(this,"handleFocusInput",()=>{this.inputRef.current.focus()}),Ka(this,"onFocus",e=>{const{onFocus:t,disabled:r,selected:s}=this.props;r||!t||t({selected:s},e)}),Ka(this,"handleOpen",()=>{this.setState({open:!0,menuWidth:this.getMenuWidth()})}),Ka(this,"handleClose",()=>{this.setState({open:!1})}),Ka(this,"onToggle",e=>{this.props.disabled||(e.stopPropagation(),this.state.open?this.handleClose():this.handleOpen())}),Ka(this,"onOutsideClick",e=>{const{onBlur:t,disabled:r,selected:s}=this.props;r||(this.handleClose(),t&&t({selected:s},e))}),Ka(this,"onKeyDown",e=>{const{onKeyDown:t,disabled:r,selected:s}=this.props;if(r||(t&&t({selected:s},e),e.defaultPrevented))return;e.stopPropagation();const{open:l}=this.state,{keyCode:u}=e,n=!l&&(u===kM||u===AM||u===MM);if(l&&u===EM)return this.handleClose();if(n)return this.handleOpen()})}componentDidMount(){this.props.initialFocus&&this.inputRef.current.focus(),this.setState({menuWidth:this.getMenuWidth()}),window.addEventListener("resize",this.onResize)}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}getMenuWidth(){const{offsetWidth:e}=this.inputRef.current,{menuWidth:t}=this.state;return e&&`${e}px`!==t?`${e}px`:t}render(){const{open:e,menuWidth:t}=this.state,{children:r,className:s,selected:l,onChange:u,tabIndex:n,maxHeight:p,error:m,warning:g,valid:v,disabled:y,dense:C,dataTest:_}=this.props,w={selected:l,onChange:u,options:r,disabled:y},k=Ae.cloneElement(this.props.input,w),S={selected:l,onChange:u,options:r,handleClose:this.handleClose,handleFocusInput:this.handleFocusInput},x=Ae.cloneElement(this.props.menu,S);return Ae.createElement("div",{className:s,ref:this.selectRef,onFocus:this.onFocus,onKeyDown:this.onKeyDown,"data-test":_},Ae.createElement(NC,{onToggle:this.onToggle,inputRef:this.inputRef,tabIndex:y?"-1":n,error:m,warning:g,valid:v,disabled:y,dense:C,dataTest:`${_}-input`},k),e&&Ae.createElement(OC,{onClick:this.onOutsideClick,maxHeight:p,selectRef:this.selectRef,menuWidth:t,dataTest:`${_}-menu`},x))}}Ka(rb,"defaultProps",{dataTest:"dhis2-uicore-select"});rb.propTypes={input:me.element.isRequired,menu:me.element.isRequired,selected:me.oneOfType([me.string,me.arrayOf(me.string)]).isRequired,children:me.node,className:me.string,dataTest:me.string,dense:me.bool,disabled:me.bool,error:fa,initialFocus:me.bool,maxHeight:me.string,tabIndex:me.string,valid:fa,warning:fa,onBlur:me.func,onChange:me.func,onFocus:me.func,onKeyDown:me.func};const jC=i=>{let{message:e,className:t,dataTest:r}=i;return Ae.createElement("div",{"data-test":r,className:jt.dynamic([["3603755746",[Jt.dp16,We.grey700,ni.fonts,Jt.dp8,Jt.dp24]]])+" "+(Br(t,"container")||"")},Ae.createElement("div",{className:jt.dynamic([["3603755746",[Jt.dp16,We.grey700,ni.fonts,Jt.dp8,Jt.dp24]]])},Ae.createElement(qo,{small:!0})),e,Ae.createElement(jt,{id:"3603755746",dynamic:[Jt.dp16,We.grey700,ni.fonts,Jt.dp8,Jt.dp24]},[`.container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:${Jt.dp16};-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:${We.grey700};font-family:${ni.fonts};font-size:13px;padding-block:${Jt.dp8};padding-inline:${Jt.dp24};}`]))};jC.propTypes={dataTest:me.string.isRequired,className:me.string,message:me.string};const iv=i=>{let{value:e,onChange:t,placeholder:r,className:s,dataTest:l}=i;return Ae.createElement("div",{className:jt.dynamic([["730881408",[We.white,Jt.dp8,Jt.dp8,Jt.dp4,Jt.dp8]]])+" "+(s||"")},Ae.createElement(fC,{dense:!0,dataTest:l,value:e,onChange:t,type:"text",name:"filter",placeholder:r,initialFocus:!0}),Ae.createElement(jt,{id:"730881408",dynamic:[We.white,Jt.dp8,Jt.dp8,Jt.dp4,Jt.dp8]},[`div.__jsx-style-dynamic-selector{position:-webkit-sticky;position:sticky;-webkit-inset-block-start:0;-ms-intb-rlock-start:0;inset-block-start:0;background:${We.white};padding-block-start:${Jt.dp8};padding-inline-end:${Jt.dp8};padding-block-end:${Jt.dp4};padding-inline-start:${Jt.dp8};z-index:1;}`]))};iv.propTypes={dataTest:me.string.isRequired,value:me.string.isRequired,className:me.string,placeholder:me.string,onChange:me.func};const FC=i=>{let{message:e,className:t}=i;return Ae.createElement("div",{className:jt.dynamic([["3788156646",[We.grey700,ni.fonts,Jt.dp8,Jt.dp24]]])+" "+(t||"")},e,Ae.createElement(jt,{id:"3788156646",dynamic:[We.grey700,ni.fonts,Jt.dp8,Jt.dp24]},[`div.__jsx-style-dynamic-selector{color:${We.grey700};font-family:${ni.fonts};font-size:13px;line-height:16px;padding-block:${Jt.dp8};padding-inline:${Jt.dp24};text-align:center;}`]))};FC.propTypes={message:me.string.isRequired,className:me.string};const BC=i=>i&&"props"in i&&"value"in i.props&&"label"in i.props,$C=i=>Ae.Children.toArray(i).filter(e=>e!==null&&e!==!1&&e!==void 0),PM=(i,e)=>Ae.Children.toArray(e).find(t=>t.props?i===t.props.value:!1);function Og(){return Og=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Og.apply(null,arguments)}function X_(i,e,t){return(e=IM(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function IM(i){var e=DM(i,"string");return typeof e=="symbol"?e:e+""}function DM(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}let UC=class extends Ue.Component{constructor(){super(...arguments),X_(this,"state",{filter:""}),X_(this,"onFilterChange",e=>{let{value:t}=e;this.setState({filter:t})})}render(){const{dataTest:e,options:t,onChange:r,selected:s,empty:l,handleClose:u,handleFocusInput:n,placeholder:p,noMatchText:m,Menu:g}=this.props,{filter:v}=this.state,y={onChange:r,selected:s,empty:l,handleClose:u,handleFocusInput:n,dataTest:e},C=$C(t);if(Ae.Children.count(C)===0||!v)return Ae.createElement(Ae.Fragment,null,Ae.createElement(iv,{dataTest:`${e}-filterinput`,placeholder:p,value:v,onChange:this.onFilterChange}),Ae.createElement(g,Og({},y,{options:t})));const _=Ae.Children.map(t,k=>{if(!BC(k))return null;const{label:x}=k.props;return x.toLowerCase().includes(v.toLowerCase())?k:null}),w=Ae.Children.count(_)>0;return Ae.createElement(Ae.Fragment,null,Ae.createElement(iv,{dataTest:`${e}-filterinput`,placeholder:p,value:v,onChange:this.onFilterChange}),w?Ae.createElement(g,Og({},y,{options:_})):Ae.createElement(FC,{message:m}))}};UC.propTypes={Menu:me.elementType.isRequired,dataTest:me.string.isRequired,noMatchText:me.string.isRequired,selected:me.oneOfType([me.string,me.arrayOf(me.string)]).isRequired,empty:me.node,handleClose:me.func,handleFocusInput:me.func,options:me.node,placeholder:me.string,onChange:me.func};const VC=i=>{let{message:e,className:t,dataTest:r}=i;return Ae.createElement("div",{"data-test":r,className:jt.dynamic([["3788156646",[We.grey700,ni.fonts,Jt.dp8,Jt.dp24]]])+" "+(t||"")},e,Ae.createElement(jt,{id:"3788156646",dynamic:[We.grey700,ni.fonts,Jt.dp8,Jt.dp24]},[`div.__jsx-style-dynamic-selector{color:${We.grey700};font-family:${ni.fonts};font-size:13px;line-height:16px;padding-block:${Jt.dp8};padding-inline:${Jt.dp24};text-align:center;}`]))};VC.propTypes={dataTest:me.string.isRequired,message:me.string.isRequired,className:me.string};const RM=4,K_={styles:Ae.createElement(jt,{id:"1892168270"},[`.jsx-1892168270{z-index:${KA.applicationTop};}`,'div[data-popper-reference-hidden="true"].jsx-1892168270{visibility:hidden;}']),className:"jsx-1892168270"},LM={name:"offset",options:{offset:[0,RM]}},zM={name:"hide"},NM={name:"flip",options:{altBoundary:!0}},My=i=>{let{children:e,className:t,closeDelay:r=200,content:s,dataTest:l="dhis2-uicore-tooltip",maxWidth:u=300,openDelay:n=200,placement:p="top"}=i;const[m,g]=Ue.useState(!1),v=Ue.useRef(),y=Ue.useRef(null),C=Ue.useRef(null),_=()=>{clearTimeout(C.current),y.current=setTimeout(()=>{g(!0)},n)},w=()=>{clearTimeout(y.current),C.current=setTimeout(()=>{g(!1)},r)},k=()=>{clearTimeout(C.current),y.current=setTimeout(()=>{g(!0)},n)},S=()=>{clearTimeout(y.current),C.current=setTimeout(()=>{g(!1)},r)},x=P=>{P.key==="Escape"&&(C.current=setTimeout(()=>{g(!1)},r))};return Ue.useEffect(()=>(document.addEventListener("keydown",x),()=>{clearTimeout(y.current),clearTimeout(C.current),document.removeEventListener("keydown",x)}),[]),Ae.createElement(Ae.Fragment,null,typeof e=="function"?e({onMouseOver:_,onMouseOut:w,onFocus:k,onBlur:S,ref:v}):Ae.createElement("span",{onMouseOver:_,onMouseOut:w,onFocus:k,onBlur:S,ref:v,tabIndex:0,"aria-describedby":m?"tooltipContenDhis2Ui":"","data-test":`${l}-reference`,className:jt.dynamic([["3515683788",[u,We.grey900,We.white]]])},e),m&&Ae.createElement(XA,null,Ae.createElement(sh,{className:K_.className,placement:p,reference:v,modifiers:[LM,NM,zM]},Ae.createElement("div",{id:"tooltipContenDhis2Ui",onMouseOver:_,onMouseOut:w,"data-test":`${l}-content`,role:"tooltip",className:jt.dynamic([["3515683788",[u,We.grey900,We.white]]])+" "+(t||"")},s))),K_.styles,Ae.createElement(jt,{id:"3515683788",dynamic:[u,We.grey900,We.white]},[`div.__jsx-style-dynamic-selector{max-width:${u}px;}`,`div.__jsx-style-dynamic-selector{padding:4px 6px;background-color:${We.grey900};border-radius:3px;color:${We.white};font-size:13px;line-height:17px;}`]))};My.propTypes={children:me.oneOfType([me.node,me.func]),className:me.string,closeDelay:me.number,content:me.node,dataTest:me.string,maxWidth:me.number,openDelay:me.number,placement:me.oneOf(["top","right","bottom","left"])};const GC=i=>{let{onClear:e,clearText:t,className:r,dataTest:s}=i;return Ae.createElement(My,{openDelay:500,content:t},Ae.createElement("button",{"data-test":s,onClick:e,type:"button",className:jt.dynamic([["2606883952",[We.grey500,We.grey800,We.grey200,ni.focus]]])+" "+(r||"")},Ae.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:jt.dynamic([["2606883952",[We.grey500,We.grey800,We.grey200,ni.focus]]])},Ae.createElement("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16Zm3.536-5.879a1 1 0 1 1-1.415 1.414l-2.12-2.12-2.122 2.121a1 1 0 1 1-1.415-1.414L6.586 8 4.464 5.878A1 1 0 1 1 5.88 4.464L8 6.586l2.121-2.121a1 1 0 1 1 1.415 1.414L9.415 8l2.12 2.121Z",fill:"none",className:jt.dynamic([["2606883952",[We.grey500,We.grey800,We.grey200,ni.focus]]])})),Ae.createElement(jt,{id:"2606883952",dynamic:[We.grey500,We.grey800,We.grey200,ni.focus]},["button.__jsx-style-dynamic-selector{background:none;border:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;height:24px;width:24px;border-radius:3px;}",`button.__jsx-style-dynamic-selector svg.__jsx-style-dynamic-selector path.__jsx-style-dynamic-selector{fill:${We.grey500};}`,`button.__jsx-style-dynamic-selector:hover svg.__jsx-style-dynamic-selector path.__jsx-style-dynamic-selector{fill:${We.grey800};}`,`button.__jsx-style-dynamic-selector:hover{background:${We.grey200};}`,`button.__jsx-style-dynamic-selector:focus{outline:2px solid ${ni.focus};}`])))};GC.propTypes={clearText:me.string.isRequired,dataTest:me.string.isRequired,onClear:me.func.isRequired,className:me.string};const HC=i=>{let{placeholder:e,className:t,dataTest:r}=i;return e?Ae.createElement("div",{"data-test":r,className:jt.dynamic([["1027033961",[We.grey600]]])+" "+(t||"")},e,Ae.createElement(jt,{id:"1027033961",dynamic:[We.grey600]},[`div.__jsx-style-dynamic-selector{color:${We.grey600};-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`])):null};HC.propTypes={dataTest:me.string.isRequired,className:me.string,placeholder:me.string};const WC=i=>{let{prefix:e,className:t,dataTest:r}=i;return e?Ae.createElement("div",{"data-test":r,className:jt.dynamic([["1343055987",[We.grey600,Jt.dp12]]])+" "+(t||"")},e,Ae.createElement(jt,{id:"1343055987",dynamic:[We.grey600,Jt.dp12]},[`div.__jsx-style-dynamic-selector{color:${We.grey600};padding-inline-end:${Jt.dp12};font-size:14px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`])):null};WC.propTypes={dataTest:me.string.isRequired,className:me.string,prefix:me.string};const OM="مسح",jM={Clear:OM,"No data found":"لم يتم إيجاد بيانات","Type to filter options":"اكتب لتصفية الخيارات","Loading options":"تحميل الخيارات","No options found":"لم يتم العثور على خيارات"},FM="مسح",BM={Clear:FM,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},$M="پاککردنەوە",UM={Clear:$M,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},VM="Vyčistit",GM={Clear:VM,"No data found":"Nenalezena žádná data","Type to filter options":"Zadáním filtrujete možnosti","Loading options":"Možnosti načítání","No options found":"Nenalezeny žádné možnosti"},HM="Clear",WM={Clear:HM,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},qM="",YM={Clear:qM,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},ZM="Limpiar",XM={Clear:ZM,"No data found":"Datos no encontrados","Type to filter options":"Escriba para filtrar opciones","Loading options":"Cargando las opciones","No options found":"No se ha encontrado ninguna opción"},KM="Limpiar",QM={Clear:KM,"No data found":"No se han encontrado datos","Type to filter options":"Escriba para filtrar opciones","Loading options":"Opciones de carga","No options found":"No se han encontrado opciones"},JM="Effacer",eP={Clear:JM,"No data found":"Aucune valeur trouvée","Type to filter options":"","Loading options":"Chargement des options","No options found":""},tP="Hapus",iP={Clear:tP,"No data found":"Tidak ada data yang ditemukan","Type to filter options":"Tipe opsi filter","Loading options":"Opsi mengunggah","No options found":"Opsi tidak tersedia"},nP="សម្អាត",rP={Clear:nP,"No data found":"មិនមានទិន្នន័យបង្ហាញ","Type to filter options":"វាយបញ្ចូលមុខងារដើម្បីច្រោះ","Loading options":"កំពុងទាញយកមុខងារ","No options found":"មិនមានមុខងារបង្ហាញ"},sP="ລຶບ",aP={Clear:sP,"No data found":"ບໍ່ພົບຂໍ້ມູນ","Type to filter options":"ປະເພດຕົວເລືອກການກອງ","Loading options":"ໂຫຼດຕົວເລືອກ","No options found":"ບໍ່ພົບຕົວເລືອກ"},oP="ရှင်းလင်းသည်",lP={Clear:oP,"No data found":"data မတွေ့ပါ။","Type to filter options":"","Loading options":"","No options found":""},cP="Fjern",uP={Clear:cP,"No data found":"Ingen data funnet","Type to filter options":"Skriv for å filtrere alternativer","Loading options":"Laster alternativer","No options found":"Ingen alternativer funnet"},dP="Duidelijk",hP={Clear:dP,"No data found":"Geen gegevens gevonden","Type to filter options":"Typ om opties te filteren","Loading options":"Laad opties","No options found":"Geen opties gevonden"},pP="پاک کردن",fP={Clear:pP,"No data found":"هیچ معلوماتی یافت نشد","Type to filter options":"","Loading options":"","No options found":""},mP="پاک یې کړئ",gP={Clear:mP,"No data found":"هېڅ ډاټا یا مالومات ونه موندل شول","Type to filter options":"","Loading options":"","No options found":""},yP="Limpar",xP={Clear:yP,"No data found":"Dado não encontrado","Type to filter options":"Tipo de opções de filtros","Loading options":"","No options found":""},vP="Limpar",bP={Clear:vP,"No data found":"Dado não encontrado","Type to filter options":"","Loading options":"","No options found":""},_P="Очистить",wP={Clear:_P,"No data found":"Данные не найдены","Type to filter options":"Начать печатать для фильтрации опций","Loading options":"Загрузка опций","No options found":"Опции не найдены"},CP="Klar",TP={Clear:CP,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},SP="Hamós",EP={Clear:SP,"No data found":"","Type to filter options":"","Loading options":"","No options found":""},kP="Пок кардан",AP={Clear:kP,"No data found":"Ягон иттилоот ёфт нашуд","Type to filter options":"","Loading options":"","No options found":""},MP="Очистити",PP={Clear:MP,"No data found":"Даних не знайдено","Type to filter options":"Введіть параметри фільтра","Loading options":"Параметри завантаження","No options found":"Варіантів не знайдено"},IP="کلیئر",DP={Clear:IP,"No data found":"کوئی ڈیٹا نہیں ملا","Type to filter options":"","Loading options":"","No options found":""},RP="Аниқ",LP={Clear:RP,"No data found":"Maʼlumotlar topilmadi","Type to filter options":"","Loading options":"","No options found":""},zP="Тозалаш",NP={Clear:zP,"No data found":"Маълумотлар топилмади","Type to filter options":"","Loading options":"Вариантлар юкланмоқда","No options found":""},OP="Аниқ",jP={Clear:OP,"No data found":"Maʼlumotlar topilmadi","Type to filter options":"","Loading options":"","No options found":""},FP="Xóa",BP={Clear:FP,"No data found":"Không tìm thấy dữ liệu","Type to filter options":"Nhập để lọc tùy chọn","Loading options":"","No options found":""},$P="清除",UP={Clear:$P,"No data found":"没有发现数据","Type to filter options":"键入过滤选项","Loading options":"加载选项","No options found":"没有找到选项"},VP="清除",GP={Clear:VP,"No data found":"没有数据被找到","Type to filter options":"","Loading options":"","No options found":""},qn="default";it.addResources("ar",qn,jM);it.addResources("ar_IQ",qn,BM);it.addResources("ckb",qn,UM);it.addResources("cs",qn,GM);it.addResources("da",qn,WM);it.addResources("en",qn,YM);it.addResources("es",qn,XM);it.addResources("es_419",qn,QM);it.addResources("fr",qn,eP);it.addResources("id",qn,iP);it.addResources("km",qn,rP);it.addResources("lo",qn,aP);it.addResources("my",qn,lP);it.addResources("nb",qn,uP);it.addResources("nl",qn,hP);it.addResources("prs",qn,fP);it.addResources("ps",qn,gP);it.addResources("pt",qn,xP);it.addResources("pt_BR",qn,bP);it.addResources("ru",qn,wP);it.addResources("sv",qn,TP);it.addResources("tet",qn,EP);it.addResources("tg",qn,AP);it.addResources("uk",qn,PP);it.addResources("ur",qn,DP);it.addResources("uz_Latn",qn,LP);it.addResources("uz_UZ_Cyrl",qn,NP);it.addResources("uz_UZ_Latn",qn,jP);it.addResources("vi",qn,BP);it.addResources("zh",qn,UP);it.addResources("zh_CN",qn,GP);const HP=(i,e)=>{e.stopPropagation(),e.preventDefault()},sb=i=>{let{options:e,onChange:t,selected:r,empty:s="",handleFocusInput:l,handleClose:u,dataTest:n}=i;const p=$C(e);if(Ae.Children.count(p)===0)return typeof s=="string"?Ae.createElement(VC,{message:s,dataTest:`${n}-empty`}):s;const m=Ae.Children.map(e,g=>{if(!BC(g))return g;const{value:y,disabled:C}=g.props,_=y===r,w=(S,x)=>{const P={selected:y};x.stopPropagation(),t(P,x),u(),l()},k=_||C;return Ae.cloneElement(g,{...g.props,onClick:k?HP:w,active:_})});return Ae.createElement(Ae.Fragment,null,m)};sb.propTypes={dataTest:me.string.isRequired,empty:me.node,handleClose:me.func,handleFocusInput:me.func,options:me.node,selected:me.string,onChange:me.func};const qC=i=>{let{dataTest:e,options:t,onChange:r,selected:s,empty:l,handleClose:u,handleFocusInput:n,placeholder:p,noMatchText:m}=i;return Ae.createElement(UC,{dataTest:e,options:t,onChange:r,selected:s,empty:l,handleClose:u,handleFocusInput:n,placeholder:p,noMatchText:m,Menu:sb})};qC.propTypes={dataTest:me.string.isRequired,noMatchText:me.string.isRequired,empty:me.node,handleClose:me.func,handleFocusInput:me.func,options:me.node,placeholder:me.string,selected:me.string,onChange:me.func};const YC=i=>{let{options:e,selected:t,className:r}=i;const s=PM(t,e);if(!s){const n=`There is no option with the value: "${t}". Make sure that the value passed to the selected prop matches the value of an existing option.`;console.error(n)}const l=s&&s.props.icon,u=s?s.props.label:t;return Ae.createElement("div",{className:jt.dynamic([["1914911415",[Jt.dp8,Jt.dp16,Jt.dp16]]])+" "+(Br(r,"root")||"")},l&&Ae.createElement("div",{className:jt.dynamic([["1914911415",[Jt.dp8,Jt.dp16,Jt.dp16]]])+" root-icon"},l),u,Ae.createElement(jt,{id:"1914911415",dynamic:[Jt.dp8,Jt.dp16,Jt.dp16]},[".root.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",`.root-icon.__jsx-style-dynamic-selector{margin-inline-end:${Jt.dp8};width:${Jt.dp16};height:${Jt.dp16};overflow:hidden;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}`]))};YC.propTypes={className:me.string,options:me.node,selected:me.string};const ZC=i=>{let{selected:e,onChange:t,clearable:r,clearText:s,placeholder:l,dataTest:u,prefix:n,options:p,className:m,disabled:g,inputMaxHeight:v="100px"}=i;const y=e&&typeof e=="string",C=_=>{const w={selected:""};_.stopPropagation(),t(w,_)};return Ae.createElement("div",{className:jt.dynamic([["2186325794",[We.grey900]],["1331770409",[v]]])+" "+(Br("root",m)||"")},Ae.createElement(WC,{prefix:n,dataTest:`${u}-prefix`}),!y&&!n&&Ae.createElement(HC,{placeholder:l,dataTest:`${u}-placeholder`}),y&&Ae.createElement("div",{className:jt.dynamic([["2186325794",[We.grey900]],["1331770409",[v]]])+" root-input"},Ae.createElement(YC,{selected:e,options:p})),y&&r&&!g&&Ae.createElement("div",{className:jt.dynamic([["2186325794",[We.grey900]],["1331770409",[v]]])+" root-right"},Ae.createElement(GC,{onClear:C,clearText:s,dataTest:`${u}-clear`})),Ae.createElement(jt,{id:"2186325794",dynamic:[We.grey900]},[`.root.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:${We.grey900};font-size:14px;line-height:16px;}`,".root-input.__jsx-style-dynamic-selector{overflow-y:auto;-webkit-flex:1;-ms-flex:1;flex:1;}",".root-right.__jsx-style-dynamic-selector{margin-inline-start:auto;}"]),Ae.createElement(jt,{id:"1331770409",dynamic:[v]},[`.root-input.__jsx-style-dynamic-selector{max-height:${v};}`]))};ZC.propTypes={dataTest:me.string.isRequired,className:me.string,clearText:Bd(i=>i.clearable,me.string),clearable:me.bool,disabled:me.bool,inputMaxHeight:me.string,options:me.node,placeholder:me.string,prefix:me.string,selected:me.string,onChange:me.func};const XC=i=>{let{className:e,selected:t="",tabIndex:r,maxHeight:s,inputMaxHeight:l,onChange:u,onFocus:n,onKeyDown:p,onBlur:m,loading:g,error:v,warning:y,valid:C,disabled:_,children:w,clearable:k,clearText:S,filterable:x,filterPlaceholder:P,placeholder:D,prefix:T,empty:I,loadingText:N,noMatchText:q,initialFocus:Z,dense:X,dataTest:O="dhis2-uicore-singleselect"}=i;const V=x?Ae.createElement(qC,{dataTest:O,empty:I,noMatchText:q,placeholder:P}):Ae.createElement(sb,{empty:I,dataTest:O});return Ae.createElement("div",{"data-test":O,className:jt.dynamic([["2180377457",[Jt.dp8]]])+" root"},Ae.createElement("div",{className:jt.dynamic([["2180377457",[Jt.dp8]]])+" root-input"},Ae.createElement(rb,{className:e,selected:t,input:Ae.createElement(ZC,{clearable:k,clearText:S,dataTest:O,placeholder:D,prefix:T,inputMaxHeight:l}),menu:V,tabIndex:r,maxHeight:s,onChange:u,onFocus:n,onKeyDown:p,onBlur:m,error:v,warning:y,valid:C,disabled:_,initialFocus:Z,dense:X},w,g&&Ae.createElement(jC,{message:N,dataTest:`${O}-loading`}))),Ae.createElement(QA,{error:v,valid:C,warning:y}),Ae.createElement(jt,{id:"2180377457",dynamic:[Jt.dp8]},[`.root.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:${Jt.dp8};}`,".root-input.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;}"]))};XC.propTypes={children:me.node,className:me.string,clearText:Bd(i=>i.clearable,me.string),clearable:me.bool,dataTest:me.string,dense:me.bool,disabled:me.bool,empty:me.node,error:fa,filterPlaceholder:me.string,filterable:me.bool,initialFocus:me.bool,inputMaxHeight:me.string,loading:me.bool,loadingText:me.string,maxHeight:me.string,noMatchText:Bd(i=>i.filterable,me.string),placeholder:me.string,prefix:me.string,selected:me.string,tabIndex:me.string,valid:fa,warning:fa,onBlur:me.func,onChange:me.func,onFocus:me.func,onKeyDown:me.func};function WP(i,e,t){return(e=qP(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function qP(i){var e=YP(i,"string");return typeof e=="symbol"?e:e+""}function YP(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}const yp=(i,e)=>typeof i=="function"?i(e):i;class us extends Ae.Component{render(){const{className:e,onChange:t,onFocus:r,onKeyDown:s,onBlur:l,required:u,label:n,valid:p,error:m,warning:g,disabled:v,loading:y,selected:C=us.defaultProps.selected,tabIndex:_,helpText:w,validationText:k,maxHeight:S,inputMaxHeight:x,inputWidth:P,children:D,clearable:T,clearText:I=us.defaultProps.clearText,filterable:N,filterPlaceholder:q=us.defaultProps.filterPlaceholder,placeholder:Z,prefix:X,empty:O=us.defaultProps.empty,loadingText:V=us.defaultProps.loadingText,noMatchText:$=us.defaultProps.noMatchText,initialFocus:L,dense:R,dataTest:G=us.defaultProps.dataTest}=this.props;return Ae.createElement(JA,{className:e,dataTest:G,disabled:v,required:u,label:n,helpText:w,validationText:k,error:m,warning:g,valid:p},Ae.createElement(mg,{width:P,minWidth:"100px"},Ae.createElement(XC,{selected:C,tabIndex:_,maxHeight:S,inputMaxHeight:x,onChange:t,onFocus:r,onKeyDown:s,onBlur:l,loading:y,error:m,warning:g,valid:p,disabled:v,clearable:T,clearText:yp(I),filterable:N,filterPlaceholder:yp(q),placeholder:Z,prefix:X,empty:yp(O),loadingText:yp(V),noMatchText:yp($),initialFocus:L,dense:R},D)))}}WP(us,"defaultProps",{dataTest:"dhis2-uiwidgets-singleselectfield",selected:"",clearText:()=>it.t("Clear"),empty:()=>it.t("No data found"),filterPlaceholder:()=>it.t("Type to filter options"),loadingText:()=>it.t("Loading options"),noMatchText:()=>it.t("No options found")});us.propTypes={children:me.node,className:me.string,clearText:me.oneOfType([me.string,me.func]),clearable:me.bool,dataTest:me.string,dense:me.bool,disabled:me.bool,empty:me.oneOfType([me.node,me.func]),error:fa,filterPlaceholder:me.oneOfType([me.node,me.func]),filterable:me.bool,helpText:me.string,initialFocus:me.bool,inputMaxHeight:me.string,inputWidth:me.string,label:me.string,loading:me.bool,loadingText:me.oneOfType([me.string,me.func]),maxHeight:me.string,noMatchText:me.oneOfType([me.string,me.func]),placeholder:me.string,prefix:me.string,required:me.bool,selected:me.string,tabIndex:me.string,valid:fa,validationText:me.string,warning:fa,onBlur:me.func,onChange:me.func,onFocus:me.func,onKeyDown:me.func};const yo=i=>{let{label:e,active:t,disabled:r,onClick:s,className:l,dataTest:u="dhis2-uicore-singleselectoption",value:n}=i;return Ae.createElement("div",{onClick:p=>s({},p),"data-test":u,"data-value":n,"data-label":e,className:jt.dynamic([["3808134379",[We.grey900,Jt.dp8,Jt.dp12,We.grey200,We.teal700,We.white,We.grey500]]])+" "+(Br(l,{disabled:r,active:t})||"")},e,Ae.createElement(jt,{id:"3808134379",dynamic:[We.grey900,Jt.dp8,Jt.dp12,We.grey200,We.teal700,We.white,We.grey500]},[`div.__jsx-style-dynamic-selector{cursor:pointer;font-size:14px;-webkit-text-decoration:none;text-decoration:none;color:${We.grey900};padding-block:${Jt.dp8};padding-inline:${Jt.dp12};}`,`div.__jsx-style-dynamic-selector:hover{background-color:${We.grey200};}`,`div.__jsx-style-dynamic-selector:active,div.active.__jsx-style-dynamic-selector{background-color:${We.teal700};color:${We.white};cursor:auto;}`,`div.disabled.__jsx-style-dynamic-selector{color:${We.grey500};cursor:not-allowed;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}`,"div.disabled.__jsx-style-dynamic-selector:hover{background-color:initial;}"]))};yo.propTypes={label:me.string.isRequired,value:me.string.isRequired,active:me.bool,className:me.string,dataTest:me.string,disabled:me.bool,onClick:me.func};class ue extends Array{constructor(e,t){if(super(e),this.sign=t,Object.setPrototypeOf(this,ue.prototype),e>ue.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(e){var t=Math.floor,r=Number.isFinite;if(typeof e=="number"){if(e===0)return ue.__zero();if(ue.__isOneDigitInt(e))return 0>e?ue.__oneDigit(-e,!0):ue.__oneDigit(e,!1);if(!r(e)||t(e)!==e)throw new RangeError("The number "+e+" cannot be converted to BigInt because it is not an integer");return ue.__fromDouble(e)}if(typeof e=="string"){const s=ue.__fromString(e);if(s===null)throw new SyntaxError("Cannot convert "+e+" to a BigInt");return s}if(typeof e=="boolean")return e===!0?ue.__oneDigit(1,!1):ue.__zero();if(typeof e=="object"){if(e.constructor===ue)return e;const s=ue.__toPrimitive(e);return ue.BigInt(s)}throw new TypeError("Cannot convert "+e+" to a BigInt")}toDebugString(){const e=["BigInt["];for(const t of this)e.push((t&&(t>>>0).toString(16))+", ");return e.push("]"),e.join("")}toString(e=10){if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":e&e-1?ue.__toStringGeneric(this,e,!1):ue.__toStringBasePowerOfTwo(this,e)}valueOf(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}static toNumber(e){const t=e.length;if(t===0)return 0;if(t===1){const k=e.__unsignedDigit(0);return e.sign?-k:k}const r=e.__digit(t-1),s=ue.__clz30(r),l=30*t-s;if(1024<l)return e.sign?-1/0:1/0;let u=l-1,n=r,p=t-1;const m=s+3;let g=m===32?0:n<<m;g>>>=12;const v=m-12;let y=12<=m?0:n<<20+m,C=20+m;for(0<v&&0<p&&(p--,n=e.__digit(p),g|=n>>>30-v,y=n<<v+2,C=v+2);0<C&&0<p;)p--,n=e.__digit(p),y|=30<=C?n<<C-30:n>>>30-C,C-=30;const _=ue.__decideRounding(e,C,p,n);if((_===1||_===0&&(1&y)==1)&&(y=y+1>>>0,y===0&&(g++,g>>>20!=0&&(g=0,u++,1023<u))))return e.sign?-1/0:1/0;const w=e.sign?-2147483648:0;return u=u+1023<<20,ue.__kBitConversionInts[1]=w|u|g,ue.__kBitConversionInts[0]=y,ue.__kBitConversionDouble[0]}static unaryMinus(e){if(e.length===0)return e;const t=e.__copy();return t.sign=!e.sign,t}static bitwiseNot(e){return e.sign?ue.__absoluteSubOne(e).__trim():ue.__absoluteAddOne(e,!0)}static exponentiate(e,t){if(t.sign)throw new RangeError("Exponent must be positive");if(t.length===0)return ue.__oneDigit(1,!1);if(e.length===0)return e;if(e.length===1&&e.__digit(0)===1)return e.sign&&!(1&t.__digit(0))?ue.unaryMinus(e):e;if(1<t.length)throw new RangeError("BigInt too big");let r=t.__unsignedDigit(0);if(r===1)return e;if(r>=ue.__kMaxLengthBits)throw new RangeError("BigInt too big");if(e.length===1&&e.__digit(0)===2){const u=1+(0|r/30),n=e.sign&&(1&r)!=0,p=new ue(u,n);p.__initializeDigits();const m=1<<r%30;return p.__setDigit(u-1,m),p}let s=null,l=e;for(1&r&&(s=e),r>>=1;r!==0;r>>=1)l=ue.multiply(l,l),1&r&&(s===null?s=l:s=ue.multiply(s,l));return s}static multiply(e,t){if(e.length===0)return e;if(t.length===0)return t;let r=e.length+t.length;30<=e.__clzmsd()+t.__clzmsd()&&r--;const s=new ue(r,e.sign!==t.sign);s.__initializeDigits();for(let l=0;l<e.length;l++)ue.__multiplyAccumulate(t,e.__digit(l),s,l);return s.__trim()}static divide(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>ue.__absoluteCompare(e,t))return ue.__zero();const r=e.sign!==t.sign,s=t.__unsignedDigit(0);let l;if(t.length===1&&32767>=s){if(s===1)return r===e.sign?e:ue.unaryMinus(e);l=ue.__absoluteDivSmall(e,s,null)}else l=ue.__absoluteDivLarge(e,t,!0,!1);return l.sign=r,l.__trim()}static remainder(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>ue.__absoluteCompare(e,t))return e;const r=t.__unsignedDigit(0);if(t.length===1&&32767>=r){if(r===1)return ue.__zero();const l=ue.__absoluteModSmall(e,r);return l===0?ue.__zero():ue.__oneDigit(l,e.sign)}const s=ue.__absoluteDivLarge(e,t,!1,!0);return s.sign=e.sign,s.__trim()}static add(e,t){const r=e.sign;return r===t.sign?ue.__absoluteAdd(e,t,r):0<=ue.__absoluteCompare(e,t)?ue.__absoluteSub(e,t,r):ue.__absoluteSub(t,e,!r)}static subtract(e,t){const r=e.sign;return r===t.sign?0<=ue.__absoluteCompare(e,t)?ue.__absoluteSub(e,t,r):ue.__absoluteSub(t,e,!r):ue.__absoluteAdd(e,t,r)}static leftShift(e,t){return t.length===0||e.length===0?e:t.sign?ue.__rightShiftByAbsolute(e,t):ue.__leftShiftByAbsolute(e,t)}static signedRightShift(e,t){return t.length===0||e.length===0?e:t.sign?ue.__leftShiftByAbsolute(e,t):ue.__rightShiftByAbsolute(e,t)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(e,t){return 0>ue.__compareToBigInt(e,t)}static lessThanOrEqual(e,t){return 0>=ue.__compareToBigInt(e,t)}static greaterThan(e,t){return 0<ue.__compareToBigInt(e,t)}static greaterThanOrEqual(e,t){return 0<=ue.__compareToBigInt(e,t)}static equal(e,t){if(e.sign!==t.sign||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e.__digit(r)!==t.__digit(r))return!1;return!0}static notEqual(e,t){return!ue.equal(e,t)}static bitwiseAnd(e,t){var r=Math.max;if(!e.sign&&!t.sign)return ue.__absoluteAnd(e,t).__trim();if(e.sign&&t.sign){const s=r(e.length,t.length)+1;let l=ue.__absoluteSubOne(e,s);const u=ue.__absoluteSubOne(t);return l=ue.__absoluteOr(l,u,l),ue.__absoluteAddOne(l,!0,l).__trim()}return e.sign&&([e,t]=[t,e]),ue.__absoluteAndNot(e,ue.__absoluteSubOne(t)).__trim()}static bitwiseXor(e,t){var r=Math.max;if(!e.sign&&!t.sign)return ue.__absoluteXor(e,t).__trim();if(e.sign&&t.sign){const u=r(e.length,t.length),n=ue.__absoluteSubOne(e,u),p=ue.__absoluteSubOne(t);return ue.__absoluteXor(n,p,n).__trim()}const s=r(e.length,t.length)+1;e.sign&&([e,t]=[t,e]);let l=ue.__absoluteSubOne(t,s);return l=ue.__absoluteXor(l,e,l),ue.__absoluteAddOne(l,!0,l).__trim()}static bitwiseOr(e,t){var r=Math.max;const s=r(e.length,t.length);if(!e.sign&&!t.sign)return ue.__absoluteOr(e,t).__trim();if(e.sign&&t.sign){let u=ue.__absoluteSubOne(e,s);const n=ue.__absoluteSubOne(t);return u=ue.__absoluteAnd(u,n,u),ue.__absoluteAddOne(u,!0,u).__trim()}e.sign&&([e,t]=[t,e]);let l=ue.__absoluteSubOne(t,s);return l=ue.__absoluteAndNot(l,e,l),ue.__absoluteAddOne(l,!0,l).__trim()}static asIntN(e,t){var r=Math.floor;if(t.length===0)return t;if(e=r(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return ue.__zero();if(e>=ue.__kMaxLengthBits)return t;const s=0|(e+29)/30;if(t.length<s)return t;const l=t.__unsignedDigit(s-1),u=1<<(e-1)%30;if(t.length===s&&l<u)return t;if((l&u)!==u)return ue.__truncateToNBits(e,t);if(!t.sign)return ue.__truncateAndSubFromPowerOfTwo(e,t,!0);if(!(l&u-1)){for(let n=s-2;0<=n;n--)if(t.__digit(n)!==0)return ue.__truncateAndSubFromPowerOfTwo(e,t,!1);return t.length===s&&l===u?t:ue.__truncateToNBits(e,t)}return ue.__truncateAndSubFromPowerOfTwo(e,t,!1)}static asUintN(e,t){var r=Math.floor;if(t.length===0)return t;if(e=r(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return ue.__zero();if(t.sign){if(e>ue.__kMaxLengthBits)throw new RangeError("BigInt too big");return ue.__truncateAndSubFromPowerOfTwo(e,t,!1)}if(e>=ue.__kMaxLengthBits)return t;const s=0|(e+29)/30;if(t.length<s)return t;const l=e%30;return t.length==s&&(l===0||!(t.__digit(s-1)>>>l))?t:ue.__truncateToNBits(e,t)}static ADD(e,t){if(e=ue.__toPrimitive(e),t=ue.__toPrimitive(t),typeof e=="string")return typeof t!="string"&&(t=t.toString()),e+t;if(typeof t=="string")return e.toString()+t;if(e=ue.__toNumeric(e),t=ue.__toNumeric(t),ue.__isBigInt(e)&&ue.__isBigInt(t))return ue.add(e,t);if(typeof e=="number"&&typeof t=="number")return e+t;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(e,t){return ue.__compare(e,t,0)}static LE(e,t){return ue.__compare(e,t,1)}static GT(e,t){return ue.__compare(e,t,2)}static GE(e,t){return ue.__compare(e,t,3)}static EQ(e,t){for(;;){if(ue.__isBigInt(e))return ue.__isBigInt(t)?ue.equal(e,t):ue.EQ(t,e);if(typeof e=="number"){if(ue.__isBigInt(t))return ue.__equalToNumber(t,e);if(typeof t!="object")return e==t;t=ue.__toPrimitive(t)}else if(typeof e=="string"){if(ue.__isBigInt(t))return e=ue.__fromString(e),e!==null&&ue.equal(e,t);if(typeof t!="object")return e==t;t=ue.__toPrimitive(t)}else if(typeof e=="boolean"){if(ue.__isBigInt(t))return ue.__equalToNumber(t,+e);if(typeof t!="object")return e==t;t=ue.__toPrimitive(t)}else if(typeof e=="symbol"){if(ue.__isBigInt(t))return!1;if(typeof t!="object")return e==t;t=ue.__toPrimitive(t)}else if(typeof e=="object"){if(typeof t=="object"&&t.constructor!==ue)return e==t;e=ue.__toPrimitive(e)}else return e==t}}static NE(e,t){return!ue.EQ(e,t)}static DataViewGetBigInt64(e,t,r=!1){return ue.asIntN(64,ue.DataViewGetBigUint64(e,t,r))}static DataViewGetBigUint64(e,t,r=!1){const[s,l]=r?[4,0]:[0,4],u=e.getUint32(t+s,r),n=e.getUint32(t+l,r),p=new ue(3,!1);return p.__setDigit(0,1073741823&n),p.__setDigit(1,(268435455&u)<<2|n>>>30),p.__setDigit(2,u>>>28),p.__trim()}static DataViewSetBigInt64(e,t,r,s=!1){ue.DataViewSetBigUint64(e,t,r,s)}static DataViewSetBigUint64(e,t,r,s=!1){r=ue.asUintN(64,r);let l=0,u=0;if(0<r.length&&(u=r.__digit(0),1<r.length)){const m=r.__digit(1);u|=m<<30,l=m>>>2,2<r.length&&(l|=r.__digit(2)<<28)}const[n,p]=s?[4,0]:[0,4];e.setUint32(t+n,l,s),e.setUint32(t+p,u,s)}static __zero(){return new ue(0,!1)}static __oneDigit(e,t){const r=new ue(1,t);return r.__setDigit(0,e),r}__copy(){const e=new ue(this.length,this.sign);for(let t=0;t<this.length;t++)e[t]=this[t];return e}__trim(){let e=this.length,t=this[e-1];for(;t===0;)e--,t=this[e-1],this.pop();return e===0&&(this.sign=!1),this}__initializeDigits(){for(let e=0;e<this.length;e++)this[e]=0}static __decideRounding(e,t,r,s){if(0<t)return-1;let l;if(0>t)l=-t-1;else{if(r===0)return-1;r--,s=e.__digit(r),l=29}let u=1<<l;if(!(s&u))return-1;if(u-=1,(s&u)!=0)return 1;for(;0<r;)if(r--,e.__digit(r)!==0)return 1;return 0}static __fromDouble(e){ue.__kBitConversionDouble[0]=e;const t=2047&ue.__kBitConversionInts[1]>>>20,r=t-1023,s=(0|r/30)+1,l=new ue(s,0>e);let u=1048575&ue.__kBitConversionInts[1]|1048576,n=ue.__kBitConversionInts[0];const p=20,m=r%30;let g,v=0;if(m<20){const y=p-m;v=y+32,g=u>>>y,u=u<<32-y|n>>>y,n<<=32-y}else if(m===20)v=32,g=u,u=n,n=0;else{const y=m-p;v=32-y,g=u<<y|n>>>32-y,u=n<<y,n=0}l.__setDigit(s-1,g);for(let y=s-2;0<=y;y--)0<v?(v-=30,g=u>>>2,u=u<<30|n>>>2,n<<=30):g=0,l.__setDigit(y,g);return l.__trim()}static __isWhitespace(e){return 13>=e&&9<=e||(159>=e?e==32:131071>=e?e==160||e==5760:196607>=e?(e&=131071,10>=e||e==40||e==41||e==47||e==95||e==4096):e==65279)}static __fromString(e,t=0){let r=0;const s=e.length;let l=0;if(l===s)return ue.__zero();let u=e.charCodeAt(l);for(;ue.__isWhitespace(u);){if(++l===s)return ue.__zero();u=e.charCodeAt(l)}if(u===43){if(++l===s)return null;u=e.charCodeAt(l),r=1}else if(u===45){if(++l===s)return null;u=e.charCodeAt(l),r=-1}if(t===0){if(t=10,u===48){if(++l===s)return ue.__zero();if(u=e.charCodeAt(l),u===88||u===120){if(t=16,++l===s)return null;u=e.charCodeAt(l)}else if(u===79||u===111){if(t=8,++l===s)return null;u=e.charCodeAt(l)}else if(u===66||u===98){if(t=2,++l===s)return null;u=e.charCodeAt(l)}}}else if(t===16&&u===48){if(++l===s)return ue.__zero();if(u=e.charCodeAt(l),u===88||u===120){if(++l===s)return null;u=e.charCodeAt(l)}}if(r!=0&&t!==10)return null;for(;u===48;){if(++l===s)return ue.__zero();u=e.charCodeAt(l)}const n=s-l;let p=ue.__kMaxBitsPerChar[t],m=ue.__kBitsPerCharTableMultiplier-1;if(n>1073741824/p)return null;const g=p*n+m>>>ue.__kBitsPerCharTableShift,v=new ue(0|(g+29)/30,!1),y=10>t?t:10,C=10<t?t-10:0;if(t&t-1){v.__initializeDigits();let _=!1,w=0;do{let k=0,S=1;for(;;){let P;if(u-48>>>0<y)P=u-48;else if((32|u)-97>>>0<C)P=(32|u)-87;else{_=!0;break}const D=S*t;if(1073741823<D)break;if(S=D,k=k*t+P,w++,++l===s){_=!0;break}u=e.charCodeAt(l)}m=30*ue.__kBitsPerCharTableMultiplier-1;const x=0|(p*w+m>>>ue.__kBitsPerCharTableShift)/30;v.__inplaceMultiplyAdd(S,k,x)}while(!_)}else{p>>=ue.__kBitsPerCharTableShift;const _=[],w=[];let k=!1;do{let S=0,x=0;for(;;){let P;if(u-48>>>0<y)P=u-48;else if((32|u)-97>>>0<C)P=(32|u)-87;else{k=!0;break}if(x+=p,S=S<<p|P,++l===s){k=!0;break}if(u=e.charCodeAt(l),30<x+p)break}_.push(S),w.push(x)}while(!k);ue.__fillFromParts(v,_,w)}if(l!==s){if(!ue.__isWhitespace(u))return null;for(l++;l<s;l++)if(u=e.charCodeAt(l),!ue.__isWhitespace(u))return null}return v.sign=r==-1,v.__trim()}static __fillFromParts(e,t,r){let s=0,l=0,u=0;for(let n=t.length-1;0<=n;n--){const p=t[n],m=r[n];l|=p<<u,u+=m,u===30?(e.__setDigit(s++,l),u=0,l=0):30<u&&(e.__setDigit(s++,1073741823&l),u-=30,l=p>>>m-u)}if(l!==0){if(s>=e.length)throw new Error("implementation bug");e.__setDigit(s++,l)}for(;s<e.length;s++)e.__setDigit(s,0)}static __toStringBasePowerOfTwo(e,t){const r=e.length;let s=t-1;s=(85&s>>>1)+(85&s),s=(51&s>>>2)+(51&s),s=(15&s>>>4)+(15&s);const l=s,u=t-1,n=e.__digit(r-1),p=ue.__clz30(n);let m=0|(30*r-p+l-1)/l;if(e.sign&&m++,268435456<m)throw new Error("string too long");const g=Array(m);let v=m-1,y=0,C=0;for(let w=0;w<r-1;w++){const k=e.__digit(w),S=(y|k<<C)&u;g[v--]=ue.__kConversionChars[S];const x=l-C;for(y=k>>>x,C=30-x;C>=l;)g[v--]=ue.__kConversionChars[y&u],y>>>=l,C-=l}const _=(y|n<<C)&u;for(g[v--]=ue.__kConversionChars[_],y=n>>>l-C;y!==0;)g[v--]=ue.__kConversionChars[y&u],y>>>=l;if(e.sign&&(g[v--]="-"),v!=-1)throw new Error("implementation bug");return g.join("")}static __toStringGeneric(e,t,r){const s=e.length;if(s===0)return"";if(s===1){let w=e.__unsignedDigit(0).toString(t);return r===!1&&e.sign&&(w="-"+w),w}const l=30*s-ue.__clz30(e.__digit(s-1)),u=ue.__kMaxBitsPerChar[t],n=u-1;let p=l*ue.__kBitsPerCharTableMultiplier;p+=n-1,p=0|p/n;const m=p+1>>1,g=ue.exponentiate(ue.__oneDigit(t,!1),ue.__oneDigit(m,!1));let v,y;const C=g.__unsignedDigit(0);if(g.length===1&&32767>=C){v=new ue(e.length,!1),v.__initializeDigits();let w=0;for(let k=2*e.length-1;0<=k;k--){const S=w<<15|e.__halfDigit(k);v.__setHalfDigit(k,0|S/C),w=0|S%C}y=w.toString(t)}else{const w=ue.__absoluteDivLarge(e,g,!0,!0);v=w.quotient;const k=w.remainder.__trim();y=ue.__toStringGeneric(k,t,!0)}v.__trim();let _=ue.__toStringGeneric(v,t,!0);for(;y.length<m;)y="0"+y;return r===!1&&e.sign&&(_="-"+_),_+y}static __unequalSign(e){return e?-1:1}static __absoluteGreater(e){return e?-1:1}static __absoluteLess(e){return e?1:-1}static __compareToBigInt(e,t){const r=e.sign;if(r!==t.sign)return ue.__unequalSign(r);const s=ue.__absoluteCompare(e,t);return 0<s?ue.__absoluteGreater(r):0>s?ue.__absoluteLess(r):0}static __compareToNumber(e,t){if(ue.__isOneDigitInt(t)){const r=e.sign,s=0>t;if(r!==s)return ue.__unequalSign(r);if(e.length===0){if(s)throw new Error("implementation bug");return t===0?0:-1}if(1<e.length)return ue.__absoluteGreater(r);const l=Math.abs(t),u=e.__unsignedDigit(0);return u>l?ue.__absoluteGreater(r):u<l?ue.__absoluteLess(r):0}return ue.__compareToDouble(e,t)}static __compareToDouble(e,t){if(t!==t)return t;if(t===1/0)return-1;if(t===-1/0)return 1;const r=e.sign;if(r!==0>t)return ue.__unequalSign(r);if(t===0)throw new Error("implementation bug: should be handled elsewhere");if(e.length===0)return-1;ue.__kBitConversionDouble[0]=t;const s=2047&ue.__kBitConversionInts[1]>>>20;if(s==2047)throw new Error("implementation bug: handled elsewhere");const l=s-1023;if(0>l)return ue.__absoluteGreater(r);const u=e.length;let n=e.__digit(u-1);const p=ue.__clz30(n),m=30*u-p,g=l+1;if(m<g)return ue.__absoluteLess(r);if(m>g)return ue.__absoluteGreater(r);let v=1048576|1048575&ue.__kBitConversionInts[1],y=ue.__kBitConversionInts[0];const C=20,_=29-p;if(_!==(0|(m-1)%30))throw new Error("implementation bug");let w,k=0;if(20>_){const S=C-_;k=S+32,w=v>>>S,v=v<<32-S|y>>>S,y<<=32-S}else if(_===20)k=32,w=v,v=y,y=0;else{const S=_-C;k=32-S,w=v<<S|y>>>32-S,v=y<<S,y=0}if(n>>>=0,w>>>=0,n>w)return ue.__absoluteGreater(r);if(n<w)return ue.__absoluteLess(r);for(let S=u-2;0<=S;S--){0<k?(k-=30,w=v>>>2,v=v<<30|y>>>2,y<<=30):w=0;const x=e.__unsignedDigit(S);if(x>w)return ue.__absoluteGreater(r);if(x<w)return ue.__absoluteLess(r)}if(v!==0||y!==0){if(k===0)throw new Error("implementation bug");return ue.__absoluteLess(r)}return 0}static __equalToNumber(e,t){var r=Math.abs;return ue.__isOneDigitInt(t)?t===0?e.length===0:e.length===1&&e.sign===0>t&&e.__unsignedDigit(0)===r(t):ue.__compareToDouble(e,t)===0}static __comparisonResultToBool(e,t){return t===0?0>e:t===1?0>=e:t===2?0<e:t===3?0<=e:void 0}static __compare(e,t,r){if(e=ue.__toPrimitive(e),t=ue.__toPrimitive(t),typeof e=="string"&&typeof t=="string")switch(r){case 0:return e<t;case 1:return e<=t;case 2:return e>t;case 3:return e>=t}if(ue.__isBigInt(e)&&typeof t=="string")return t=ue.__fromString(t),t!==null&&ue.__comparisonResultToBool(ue.__compareToBigInt(e,t),r);if(typeof e=="string"&&ue.__isBigInt(t))return e=ue.__fromString(e),e!==null&&ue.__comparisonResultToBool(ue.__compareToBigInt(e,t),r);if(e=ue.__toNumeric(e),t=ue.__toNumeric(t),ue.__isBigInt(e)){if(ue.__isBigInt(t))return ue.__comparisonResultToBool(ue.__compareToBigInt(e,t),r);if(typeof t!="number")throw new Error("implementation bug");return ue.__comparisonResultToBool(ue.__compareToNumber(e,t),r)}if(typeof e!="number")throw new Error("implementation bug");if(ue.__isBigInt(t))return ue.__comparisonResultToBool(ue.__compareToNumber(t,e),2^r);if(typeof t!="number")throw new Error("implementation bug");return r===0?e<t:r===1?e<=t:r===2?e>t:r===3?e>=t:void 0}__clzmsd(){return ue.__clz30(this.__digit(this.length-1))}static __absoluteAdd(e,t,r){if(e.length<t.length)return ue.__absoluteAdd(t,e,r);if(e.length===0)return e;if(t.length===0)return e.sign===r?e:ue.unaryMinus(e);let s=e.length;(e.__clzmsd()===0||t.length===e.length&&t.__clzmsd()===0)&&s++;const l=new ue(s,r);let u=0,n=0;for(;n<t.length;n++){const p=e.__digit(n)+t.__digit(n)+u;u=p>>>30,l.__setDigit(n,1073741823&p)}for(;n<e.length;n++){const p=e.__digit(n)+u;u=p>>>30,l.__setDigit(n,1073741823&p)}return n<l.length&&l.__setDigit(n,u),l.__trim()}static __absoluteSub(e,t,r){if(e.length===0)return e;if(t.length===0)return e.sign===r?e:ue.unaryMinus(e);const s=new ue(e.length,r);let l=0,u=0;for(;u<t.length;u++){const n=e.__digit(u)-t.__digit(u)-l;l=1&n>>>30,s.__setDigit(u,1073741823&n)}for(;u<e.length;u++){const n=e.__digit(u)-l;l=1&n>>>30,s.__setDigit(u,1073741823&n)}return s.__trim()}static __absoluteAddOne(e,t,r=null){const s=e.length;r===null?r=new ue(s,t):r.sign=t;let l=1;for(let u=0;u<s;u++){const n=e.__digit(u)+l;l=n>>>30,r.__setDigit(u,1073741823&n)}return l!=0&&r.__setDigitGrow(s,1),r}static __absoluteSubOne(e,t){const r=e.length;t=t||r;const s=new ue(t,!1);let l=1;for(let u=0;u<r;u++){const n=e.__digit(u)-l;l=1&n>>>30,s.__setDigit(u,1073741823&n)}if(l!=0)throw new Error("implementation bug");for(let u=r;u<t;u++)s.__setDigit(u,0);return s}static __absoluteAnd(e,t,r=null){let s=e.length,l=t.length,u=l;if(s<l){u=s;const m=e,g=s;e=t,s=l,t=m,l=g}let n=u;r===null?r=new ue(n,!1):n=r.length;let p=0;for(;p<u;p++)r.__setDigit(p,e.__digit(p)&t.__digit(p));for(;p<n;p++)r.__setDigit(p,0);return r}static __absoluteAndNot(e,t,r=null){const s=e.length,l=t.length;let u=l;s<l&&(u=s);let n=s;r===null?r=new ue(n,!1):n=r.length;let p=0;for(;p<u;p++)r.__setDigit(p,e.__digit(p)&~t.__digit(p));for(;p<s;p++)r.__setDigit(p,e.__digit(p));for(;p<n;p++)r.__setDigit(p,0);return r}static __absoluteOr(e,t,r=null){let s=e.length,l=t.length,u=l;if(s<l){u=s;const m=e,g=s;e=t,s=l,t=m,l=g}let n=s;r===null?r=new ue(n,!1):n=r.length;let p=0;for(;p<u;p++)r.__setDigit(p,e.__digit(p)|t.__digit(p));for(;p<s;p++)r.__setDigit(p,e.__digit(p));for(;p<n;p++)r.__setDigit(p,0);return r}static __absoluteXor(e,t,r=null){let s=e.length,l=t.length,u=l;if(s<l){u=s;const m=e,g=s;e=t,s=l,t=m,l=g}let n=s;r===null?r=new ue(n,!1):n=r.length;let p=0;for(;p<u;p++)r.__setDigit(p,e.__digit(p)^t.__digit(p));for(;p<s;p++)r.__setDigit(p,e.__digit(p));for(;p<n;p++)r.__setDigit(p,0);return r}static __absoluteCompare(e,t){const r=e.length-t.length;if(r!=0)return r;let s=e.length-1;for(;0<=s&&e.__digit(s)===t.__digit(s);)s--;return 0>s?0:e.__unsignedDigit(s)>t.__unsignedDigit(s)?1:-1}static __multiplyAccumulate(e,t,r,s){if(t===0)return;const l=32767&t,u=t>>>15;let n=0,p=0;for(let m,g=0;g<e.length;g++,s++){m=r.__digit(s);const v=e.__digit(g),y=32767&v,C=v>>>15,_=ue.__imul(y,l),w=ue.__imul(y,u),k=ue.__imul(C,l),S=ue.__imul(C,u);m+=p+_+n,n=m>>>30,m&=1073741823,m+=((32767&w)<<15)+((32767&k)<<15),n+=m>>>30,p=S+(w>>>15)+(k>>>15),r.__setDigit(s,1073741823&m)}for(;n!=0||p!==0;s++){let m=r.__digit(s);m+=n+p,p=0,n=m>>>30,r.__setDigit(s,1073741823&m)}}static __internalMultiplyAdd(e,t,r,s,l){let u=r,n=0;for(let p=0;p<s;p++){const m=e.__digit(p),g=ue.__imul(32767&m,t),v=ue.__imul(m>>>15,t),y=g+((32767&v)<<15)+n+u;u=y>>>30,n=v>>>15,l.__setDigit(p,1073741823&y)}if(l.length>s)for(l.__setDigit(s++,u+n);s<l.length;)l.__setDigit(s++,0);else if(u+n!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(e,t,r){r>this.length&&(r=this.length);const s=32767&e,l=e>>>15;let u=0,n=t;for(let p=0;p<r;p++){const m=this.__digit(p),g=32767&m,v=m>>>15,y=ue.__imul(g,s),C=ue.__imul(g,l),_=ue.__imul(v,s),w=ue.__imul(v,l);let k=n+y+u;u=k>>>30,k&=1073741823,k+=((32767&C)<<15)+((32767&_)<<15),u+=k>>>30,n=w+(C>>>15)+(_>>>15),this.__setDigit(p,1073741823&k)}if(u!=0||n!==0)throw new Error("implementation bug")}static __absoluteDivSmall(e,t,r=null){r===null&&(r=new ue(e.length,!1));let s=0;for(let l,u=2*e.length-1;0<=u;u-=2){l=(s<<15|e.__halfDigit(u))>>>0;const n=0|l/t;s=0|l%t,l=(s<<15|e.__halfDigit(u-1))>>>0;const p=0|l/t;s=0|l%t,r.__setDigit(u>>>1,n<<15|p)}return r}static __absoluteModSmall(e,t){let r=0;for(let s=2*e.length-1;0<=s;s--)r=0|((r<<15|e.__halfDigit(s))>>>0)%t;return r}static __absoluteDivLarge(e,t,r,s){const l=t.__halfDigitLength(),u=t.length,n=e.__halfDigitLength()-l;let p=null;r&&(p=new ue(n+2>>>1,!1),p.__initializeDigits());const m=new ue(l+2>>>1,!1);m.__initializeDigits();const g=ue.__clz15(t.__halfDigit(l-1));0<g&&(t=ue.__specialLeftShift(t,g,0));const v=ue.__specialLeftShift(e,g,1),y=t.__halfDigit(l-1);let C=0;for(let _,w=n;0<=w;w--){_=32767;const k=v.__halfDigit(w+l);if(k!==y){const x=(k<<15|v.__halfDigit(w+l-1))>>>0;_=0|x/y;let P=0|x%y;const D=t.__halfDigit(l-2),T=v.__halfDigit(w+l-2);for(;ue.__imul(_,D)>>>0>(P<<16|T)>>>0&&(_--,P+=y,!(32767<P)););}ue.__internalMultiplyAdd(t,_,0,u,m);let S=v.__inplaceSub(m,w,l+1);S!==0&&(S=v.__inplaceAdd(t,w,l),v.__setHalfDigit(w+l,32767&v.__halfDigit(w+l)+S),_--),r&&(1&w?C=_<<15:p.__setDigit(w>>>1,C|_))}if(s)return v.__inplaceRightShift(g),r?{quotient:p,remainder:v}:v;if(r)return p;throw new Error("unreachable")}static __clz15(e){return ue.__clz30(e)-15}__inplaceAdd(e,t,r){let s=0;for(let l=0;l<r;l++){const u=this.__halfDigit(t+l)+e.__halfDigit(l)+s;s=u>>>15,this.__setHalfDigit(t+l,32767&u)}return s}__inplaceSub(e,t,r){let s=0;if(1&t){t>>=1;let l=this.__digit(t),u=32767&l,n=0;for(;n<r-1>>>1;n++){const g=e.__digit(n),v=(l>>>15)-(32767&g)-s;s=1&v>>>15,this.__setDigit(t+n,(32767&v)<<15|32767&u),l=this.__digit(t+n+1),u=(32767&l)-(g>>>15)-s,s=1&u>>>15}const p=e.__digit(n),m=(l>>>15)-(32767&p)-s;if(s=1&m>>>15,this.__setDigit(t+n,(32767&m)<<15|32767&u),t+n+1>=this.length)throw new RangeError("out of bounds");!(1&r)&&(l=this.__digit(t+n+1),u=(32767&l)-(p>>>15)-s,s=1&u>>>15,this.__setDigit(t+e.length,1073709056&l|32767&u))}else{t>>=1;let l=0;for(;l<e.length-1;l++){const g=this.__digit(t+l),v=e.__digit(l),y=(32767&g)-(32767&v)-s;s=1&y>>>15;const C=(g>>>15)-(v>>>15)-s;s=1&C>>>15,this.__setDigit(t+l,(32767&C)<<15|32767&y)}const u=this.__digit(t+l),n=e.__digit(l),p=(32767&u)-(32767&n)-s;s=1&p>>>15;let m=0;!(1&r)&&(m=(u>>>15)-(n>>>15)-s,s=1&m>>>15),this.__setDigit(t+l,(32767&m)<<15|32767&p)}return s}__inplaceRightShift(e){if(e===0)return;let t=this.__digit(0)>>>e;const r=this.length-1;for(let s=0;s<r;s++){const l=this.__digit(s+1);this.__setDigit(s,1073741823&l<<30-e|t),t=l>>>e}this.__setDigit(r,t)}static __specialLeftShift(e,t,r){const s=e.length,l=new ue(s+r,!1);if(t===0){for(let n=0;n<s;n++)l.__setDigit(n,e.__digit(n));return 0<r&&l.__setDigit(s,0),l}let u=0;for(let n=0;n<s;n++){const p=e.__digit(n);l.__setDigit(n,1073741823&p<<t|u),u=p>>>30-t}return 0<r&&l.__setDigit(s,u),l}static __leftShiftByAbsolute(e,t){const r=ue.__toShiftAmount(t);if(0>r)throw new RangeError("BigInt too big");const s=0|r/30,l=r%30,u=e.length,n=l!==0&&e.__digit(u-1)>>>30-l!=0,p=u+s+(n?1:0),m=new ue(p,e.sign);if(l===0){let g=0;for(;g<s;g++)m.__setDigit(g,0);for(;g<p;g++)m.__setDigit(g,e.__digit(g-s))}else{let g=0;for(let v=0;v<s;v++)m.__setDigit(v,0);for(let v=0;v<u;v++){const y=e.__digit(v);m.__setDigit(v+s,1073741823&y<<l|g),g=y>>>30-l}if(n)m.__setDigit(u+s,g);else if(g!==0)throw new Error("implementation bug")}return m.__trim()}static __rightShiftByAbsolute(e,t){const r=e.length,s=e.sign,l=ue.__toShiftAmount(t);if(0>l)return ue.__rightShiftByMaximum(s);const u=0|l/30,n=l%30;let p=r-u;if(0>=p)return ue.__rightShiftByMaximum(s);let m=!1;if(s){if(e.__digit(u)&(1<<n)-1)m=!0;else for(let v=0;v<u;v++)if(e.__digit(v)!==0){m=!0;break}}m&&n===0&&!~e.__digit(r-1)&&p++;let g=new ue(p,s);if(n===0){g.__setDigit(p-1,0);for(let v=u;v<r;v++)g.__setDigit(v-u,e.__digit(v))}else{let v=e.__digit(u)>>>n;const y=r-u-1;for(let C=0;C<y;C++){const _=e.__digit(C+u+1);g.__setDigit(C,1073741823&_<<30-n|v),v=_>>>n}g.__setDigit(y,v)}return m&&(g=ue.__absoluteAddOne(g,!0,g)),g.__trim()}static __rightShiftByMaximum(e){return e?ue.__oneDigit(1,!0):ue.__zero()}static __toShiftAmount(e){if(1<e.length)return-1;const t=e.__unsignedDigit(0);return t>ue.__kMaxLengthBits?-1:t}static __toPrimitive(e,t="default"){if(typeof e!="object"||e.constructor===ue)return e;if(typeof Symbol<"u"&&typeof Symbol.toPrimitive=="symbol"){const l=e[Symbol.toPrimitive];if(l){const u=l(t);if(typeof u!="object")return u;throw new TypeError("Cannot convert object to primitive value")}}const r=e.valueOf;if(r){const l=r.call(e);if(typeof l!="object")return l}const s=e.toString;if(s){const l=s.call(e);if(typeof l!="object")return l}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(e){return ue.__isBigInt(e)?e:+e}static __isBigInt(e){return typeof e=="object"&&e!==null&&e.constructor===ue}static __truncateToNBits(e,t){const r=0|(e+29)/30,s=new ue(r,t.sign),l=r-1;for(let n=0;n<l;n++)s.__setDigit(n,t.__digit(n));let u=t.__digit(l);if(e%30!=0){const n=32-e%30;u=u<<n>>>n}return s.__setDigit(l,u),s.__trim()}static __truncateAndSubFromPowerOfTwo(e,t,r){var s=Math.min;const l=0|(e+29)/30,u=new ue(l,r);let n=0;const p=l-1;let m=0;for(const C=s(p,t.length);n<C;n++){const _=0-t.__digit(n)-m;m=1&_>>>30,u.__setDigit(n,1073741823&_)}for(;n<p;n++)u.__setDigit(n,0|1073741823&-m);let g=p<t.length?t.__digit(p):0;const v=e%30;let y;if(v==0)y=0-g-m,y&=1073741823;else{const C=32-v;g=g<<C>>>C;const _=1<<32-C;y=_-g-m,y&=_-1}return u.__setDigit(p,y),u.__trim()}__digit(e){return this[e]}__unsignedDigit(e){return this[e]>>>0}__setDigit(e,t){this[e]=0|t}__setDigitGrow(e,t){this[e]=0|t}__halfDigitLength(){const e=this.length;return 32767>=this.__unsignedDigit(e-1)?2*e-1:2*e}__halfDigit(e){return 32767&this[e>>>1]>>>15*(1&e)}__setHalfDigit(e,t){const r=e>>>1,s=this.__digit(r),l=1&e?32767&s|t<<15:1073709056&s|32767&t;this.__setDigit(r,l)}static __digitPow(e,t){let r=1;for(;0<t;)1&t&&(r*=e),t>>>=1,e*=e;return r}static __isOneDigitInt(e){return(1073741823&e)===e}}ue.__kMaxLength=33554432,ue.__kMaxLengthBits=ue.__kMaxLength<<5,ue.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],ue.__kBitsPerCharTableShift=5,ue.__kBitsPerCharTableMultiplier=1<<ue.__kBitsPerCharTableShift,ue.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ue.__kBitConversionBuffer=new ArrayBuffer(8),ue.__kBitConversionDouble=new Float64Array(ue.__kBitConversionBuffer),ue.__kBitConversionInts=new Int32Array(ue.__kBitConversionBuffer),ue.__clz30=Math.clz32?function(i){return Math.clz32(i)-2}:function(i){return i===0?30:0|29-(0|Math.log(i>>>0)/Math.LN2)},ue.__imul=Math.imul||function(i,e){return 0|i*e};const nv={};function Yo(i,e){Object.defineProperty(i.prototype,Symbol.toStringTag,{value:e,writable:!1,enumerable:!1,configurable:!0});for(const t of Object.getOwnPropertyNames(i)){const r=Object.getOwnPropertyDescriptor(i,t);r.configurable&&r.enumerable&&(r.enumerable=!1,Object.defineProperty(i,t,r))}for(const t of Object.getOwnPropertyNames(i.prototype)){const r=Object.getOwnPropertyDescriptor(i.prototype,t);r.configurable&&r.enumerable&&(r.enumerable=!1,Object.defineProperty(i.prototype,t,r))}rv(e,i),rv(`${e}.prototype`,i.prototype)}function rv(i,e){const t=`%${i}%`;if(nv[t]!==void 0)throw new Error(`intrinsic ${i} already exists`);nv[t]=e}function zi(i){return nv[i]}const Li="slot-epochNanoSeconds",ec="slot-timezone-identifier",ri="slot-year",ui="slot-month",gi="slot-day",Vi="slot-hour",Gi="slot-minute",Hi="slot-second",Wi="slot-millisecond",qi="slot-microsecond",Yi="slot-nanosecond",Et="slot-calendar",ws="slot-cached-instant",Dn="slot-time-zone",As="slot-years",es="slot-months",Ws="slot-weeks",Ms="slot-days",Ps="slot-hours",Is="slot-minutes",Ds="slot-seconds",Rs="slot-milliseconds",Ls="slot-microseconds",zs="slot-nanoseconds",wr="slot-calendar-identifier",KC=new WeakMap;function Zo(i){KC.set(i,Object.create(null))}function ab(i){return KC.get(i)}function Kr(i,...e){if(!i||typeof i!="object")return!1;const t=ab(i);return!!t&&e.reduce((r,s)=>r&&s in t,!0)}function Y(i,e){const t=ab(i)[e];if(t===void 0)throw new TypeError(`Missing internal slot ${e}`);return t}function Qi(i,e,t){ab(i)[e]=t}const Q_=/\.[-A-Za-z_]|\.\.[-A-Za-z._]{1,12}|\.[-A-Za-z_][-A-Za-z._]{0,12}|[A-Za-z_][-A-Za-z._]{0,13}/,ZP=new RegExp(`(?:(?:${Q_.source})(?:\\/(?:${Q_.source}))*|Etc/GMT[-+]\\d{1,2}|${/(?:[+\u2212-][0-2][0-9](?::?[0-5][0-9](?::?[0-5][0-9](?:[.,]\d{1,9})?)?)?)/.source})`),J_=/[A-Za-z0-9]{3,8}/,XP=new RegExp(`(?:${J_.source}(?:-${J_.source})*)`),QC=/(?:[+\u2212-]\d{6}|\d{4})/,jg=/(?:0[1-9]|1[0-2])/,sv=/(?:0[1-9]|[12]\d|3[01])/,KP=new RegExp(`(${QC.source})(?:-(${jg.source})-(${sv.source})|(${jg.source})(${sv.source}))`),JC=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,eT=/([+\u2212-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/,tT=new RegExp(`(?:([zZ])|(?:${eT.source})?)(?:\\[(${ZP.source})\\])?`),iT=new RegExp(`\\[u-ca=(${XP.source})\\]`),QP=new RegExp(`^${KP.source}(?:(?:T|\\s+)${JC.source})?${tT.source}(?:${iT.source})?$`,"i"),JP=new RegExp(`^T?${JC.source}(?:${tT.source})?(?:${iT.source})?$`,"i"),e5=new RegExp(`^(${QC.source})-?(${jg.source})$`),t5=new RegExp(`^(?:--)?(${jg.source})-?(${sv.source})$`),d0=/(\d+)(?:[.,](\d{1,9}))?/,i5=new RegExp(`(?:${d0.source}H)?(?:${d0.source}M)?(?:${d0.source}S)?`),n5=new RegExp(`^([+−-])?P${/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/.source}(?:T(?!$)${i5.source})?$`,"i"),nT=Array.prototype.includes,ob=Array.prototype.push,rT=globalThis.Intl.DateTimeFormat,r5=Math.min,s5=Math.max,Tn=Math.abs,Yr=Math.floor,Hp=Math.sign,Od=Math.trunc,_f=Number.isNaN,is=Number.isFinite,a5=Number,wf=String,o5=Number.MAX_SAFE_INTEGER,sT=Object.assign,fs=Object.create,l5=Object.getOwnPropertyDescriptor,c5=Object.is,lb=Reflect.apply,Tr=ue.BigInt(0),cb=ue.BigInt(1),fu=ue.BigInt(60),Rn=ue.BigInt(1e3),$a=ue.BigInt(1e6),Sl=ue.BigInt(1e9),u5=ue.BigInt(-1),hc=ue.multiply(ue.BigInt(86400),Sl),Wp=ue.multiply(ue.BigInt(-86400),ue.BigInt(1e17)),qp=ue.multiply(ue.BigInt(86400),ue.BigInt(1e17)),aT=ue.multiply(ue.BigInt(-388152),ue.BigInt(1e13)),d5=ue.multiply(hc,ue.BigInt(3660)),oT=ue.multiply(hc,ue.BigInt(366)),lT=ue.multiply(hc,ue.BigInt(14)),h5=["iso8601","hebrew","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","islamicc","persian","ethiopic","ethioaa","coptic","chinese","dangi","roc","indian","buddhist","japanese","gregory"];function cT(i){if(typeof i!="number"||!is(i))return!1;const e=Tn(i);return Yr(e)===e}function Zn(i){return typeof i=="object"&&i!==null||typeof i=="function"}function Yp(i){if(typeof i=="bigint")throw new TypeError("Cannot convert BigInt to number");return a5(i)}function Ln(i){const e=Yp(i);if(_f(e))return 0;const t=Od(e);return e===0?0:t}function Fi(i){if(typeof i=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return wf(i)}function Vn(i){const e=Ln(i);if(!is(e))throw new RangeError("infinity is out of range");return e}function Zp(i,e){const t=Ln(i);if(!is(t))throw new RangeError("infinity is out of range");if(t<1)throw e!==void 0?new RangeError(`property '${e}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return t}function Wr(i){const e=Yp(i);if(_f(e))return 0;if(!is(e))throw new RangeError("infinity is out of range");if(!cT(e))throw new RangeError(`unsupported fractional value ${e}`);return Ln(e)}function Hr(i,e){return{quotient:ue.divide(i,e),remainder:ue.remainder(i,e)}}function ub(i){return ue.lessThan(i,Tr)?ue.multiply(i,u5):i}function av(i,...e){return ob.apply(i,e),i}const ew=new Map([["year",Vn],["month",Zp],["monthCode",Fi],["day",Zp],["hour",Vn],["minute",Vn],["second",Vn],["millisecond",Vn],["microsecond",Vn],["nanosecond",Vn],["years",Wr],["months",Wr],["weeks",Wr],["days",Wr],["hours",Wr],["minutes",Wr],["seconds",Wr],["milliseconds",Wr],["microseconds",Wr],["nanoseconds",Wr],["era",Fi],["eraYear",Ln],["offset",Fi]]),p5=new Map([["hour",0],["minute",0],["second",0],["millisecond",0],["microsecond",0],["nanosecond",0]]),lh=[["years","year","date"],["months","month","date"],["weeks","week","date"],["days","day","date"],["hours","hour","time"],["minutes","minute","time"],["seconds","second","time"],["milliseconds","millisecond","time"],["microseconds","microsecond","time"],["nanoseconds","nanosecond","time"]],Fg=new Map(lh.map(i=>[i[0],i[1]])),f5=new Map(lh.map(([i,e])=>[e,i])),tw=lh.map(([,i])=>i),iw=Array.from(Fg.keys()).sort(),nw=new Map;function uT(i){let e=nw.get(i);return e===void 0&&(e=new rT("en-us",{timeZone:wf(i),hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),nw.set(i,e)),e}function Fr(i){return Kr(i,Li)&&!Kr(i,Dn,Et)}function Do(i){return Kr(i,ec)}function _r(i){return Kr(i,wr)}function mr(i){return Kr(i,As,es,Ms,Ps,Is,Ds,Rs,Ls,zs)}function gn(i){return Kr(i,"slot-date-brand")}function gr(i){return Kr(i,Vi,Gi,Hi,Wi,qi,Yi)&&!Kr(i,ri,ui,gi)}function Ki(i){return Kr(i,ri,ui,gi,Vi,Gi,Hi,Wi,qi,Yi)}function An(i){return Kr(i,"slot-year-month-brand")}function ts(i){return Kr(i,"slot-month-day-brand")}function wi(i){return Kr(i,Li,Dn,Et)}function ch(i){if(Kr(i,Et)||Kr(i,Dn))throw new TypeError("with() does not support a calendar or timeZone property");if(i.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(i.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function dT(i){let{ianaName:e,offset:t,z:r}=function(l){try{let u=yb(l);if(u)return{ianaName:u.toString()}}catch{}try{const u=Xo(l);if(u.z||u.offset||u.ianaName)return u}catch{}throw new RangeError(`Invalid time zone: ${l}`)}(i);return e||(r?"UTC":t)}function Cf(i,e){return e==="never"||e==="auto"&&i==="iso8601"?"":`[u-ca=${i}]`}function Xo(i){const e=QP.exec(i);if(!e)throw new RangeError(`invalid ISO 8601 string: ${i}`);let t=e[1];if(t[0]==="−"&&(t=`-${t.slice(1)}`),t==="-000000")throw new RangeError(`invalid ISO 8601 string: ${i}`);const r=Ln(t),s=Ln(e[2]||e[4]),l=Ln(e[3]||e[5]),u=Ln(e[6]),n=e[6]!==void 0,p=Ln(e[7]||e[10]);let m=Ln(e[8]||e[11]);m===60&&(m=59);const g=(e[9]||e[12])+"000000000",v=Ln(g.slice(0,3)),y=Ln(g.slice(3,6)),C=Ln(g.slice(6,9));let _,w=!1;if(e[13])_=void 0,w=!0;else if(e[14]&&e[15]){const x=e[14]==="-"||e[14]==="−"?"-":"+",P=e[15]||"00",D=e[16]||"00",T=e[17]||"00";let I=e[18]||"0";if(_=`${x}${P}:${D}`,+I){for(;I.endsWith("0");)I=I.slice(0,-1);_+=`:${T}.${I}`}else+T&&(_+=`:${T}`);_==="-00:00"&&(_="+00:00")}let k=e[19];if(k)try{k=yb(k).toString()}catch{}const S=e[20];return _b(r,s,l,u,p,m,v,y,C),{year:r,month:s,day:l,hasTime:n,hour:u,minute:p,second:m,millisecond:v,microsecond:y,nanosecond:C,ianaName:k,offset:_,z:w,calendar:S}}function hT(i){const e=e5.exec(i);let t,r,s,l;if(e){let u=e[1];if(u[0]==="−"&&(u=`-${u.slice(1)}`),u==="-000000")throw new RangeError(`invalid ISO 8601 string: ${i}`);t=Ln(u),r=Ln(e[2]),s=e[3]}else{let u;if({year:t,month:r,calendar:s,day:l,z:u}=Xo(i),u)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:t,month:r,calendar:s,referenceISODay:l}}function pT(i){const e=t5.exec(i);let t,r,s,l;if(e)t=Ln(e[1]),r=Ln(e[2]);else{let u;if({month:t,day:r,calendar:s,year:l,z:u}=Xo(i),u)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:t,day:r,calendar:s,referenceISOYear:l}}function m5(i){const e=n5.exec(i);if(!e)throw new RangeError(`invalid duration: ${i}`);if(e.slice(2).every(k=>k===void 0))throw new RangeError(`invalid duration: ${i}`);const t=e[1]==="-"||e[1]==="−"?-1:1,r=Ln(e[2])*t,s=Ln(e[3])*t,l=Ln(e[4])*t,u=Ln(e[5])*t,n=Ln(e[6])*t;let p=e[7],m=Ln(e[8])*t,g=e[9],v=Ln(e[10])*t;const y=e[11]+"000000000";let C=Ln(y.slice(0,3))*t,_=Ln(y.slice(3,6))*t,w=Ln(y.slice(6,9))*t;return p=p?t*Ln(p)/10**p.length:0,g=g?t*Ln(g)/10**g.length:0,{minutes:m,seconds:v,milliseconds:C,microseconds:_,nanoseconds:w}=function(S,x,P,D,T,I,N){let q=S,Z=x,X=P,O=D,V=T,$=I,L=N;if(q!==0){[Z,X,O,V,$,L].forEach(G=>{if(G!==0)throw new RangeError("only the smallest unit can be fractional")});const R=60*q;Z=Od(R),X=R%1}if(X!==0){[O,V,$,L].forEach(U=>{if(U!==0)throw new RangeError("only the smallest unit can be fractional")});const R=60*X;O=Od(R);const G=R%1;if(G!==0){const U=1e3*G;V=Od(U);const B=U%1;if(B!==0){const H=1e3*B;$=Od(H);const W=H%1;W!==0&&(L=Od(1e3*W))}}}return{minutes:Z,seconds:O,milliseconds:V,microseconds:$,nanoseconds:L}}(p,m,g,v,C,_,w),Vy(r,s,l,u,n,m,v,C,_,w),{years:r,months:s,weeks:l,days:u,hours:n,minutes:m,seconds:v,milliseconds:C,microseconds:_,nanoseconds:w}}function g5(i){let{year:e,month:t,day:r,hour:s,minute:l,second:u,millisecond:n,microsecond:p,nanosecond:m,offset:g,z:v}=function(w){const k=Xo(w);if(!k.z&&!k.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return k}(i);if(!v&&!g)throw new RangeError("Temporal.Instant requires a time zone offset");const y=v?0:Au(g);({year:e,month:t,day:r,hour:s,minute:l,second:u,millisecond:n,microsecond:p,nanosecond:m}=vb(e,t,r,s,l,u,n,p,m-y));const C=mc(e,t,r,s,l,u,n,p,m);if(C===null)throw new RangeError("DateTime outside of supported range");return C}function Bg(i,e,t,r){let s=i,l=e,u=t;switch(r){case"reject":$o(s,l,u);break;case"constrain":({year:s,month:l,day:u}=AT(s,l,u))}return{year:s,month:l,day:u}}function Py(i,e,t,r,s,l,u){let n=i,p=e,m=t,g=r,v=s,y=l;switch(u){case"reject":Uy(n,p,m,g,v,y);break;case"constrain":({hour:n,minute:p,second:m,millisecond:g,microsecond:v,nanosecond:y}=function(_,w,k,S,x,P){const D=da(_,0,23),T=da(w,0,59),I=da(k,0,59),N=da(S,0,999),q=da(x,0,999),Z=da(P,0,999);return{hour:D,minute:T,second:I,millisecond:N,microsecond:q,nanosecond:Z}}(n,p,m,g,v,y))}return{hour:n,minute:p,second:m,millisecond:g,microsecond:v,nanosecond:y}}function Ru(i){if(!Zn(i))return m5(Fi(i));if(mr(i))return{years:Y(i,As),months:Y(i,es),weeks:Y(i,Ws),days:Y(i,Ms),hours:Y(i,Ps),minutes:Y(i,Is),seconds:Y(i,Ds),milliseconds:Y(i,Rs),microseconds:Y(i,Ls),nanoseconds:Y(i,zs)};const e={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};let t=function(_){if(!Zn(_))throw new TypeError("invalid duration-like");const w={years:void 0,months:void 0,weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0,milliseconds:void 0,microseconds:void 0,nanoseconds:void 0};let k=!1;for(const S of iw){const x=_[S];x!==void 0&&(k=!0,w[S]=Wr(x))}if(!k)throw new TypeError("invalid duration-like");return w}(i);for(const C of iw){const _=t[C];_!==void 0&&(e[C]=_)}let{years:r,months:s,weeks:l,days:u,hours:n,minutes:p,seconds:m,milliseconds:g,microseconds:v,nanoseconds:y}=e;return Vy(r,s,l,u,n,p,m,g,v,y),{years:r,months:s,weeks:l,days:u,hours:n,minutes:p,seconds:m,milliseconds:g,microseconds:v,nanoseconds:y}}function Er(i){return i===void 0?"constrain":yc(i,"overflow",["constrain","reject"],"constrain")}function Xp(i){return i===void 0?"compatible":yc(i,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function Ys(i,e){return yc(i,"roundingMode",["ceil","floor","trunc","halfExpand"],e)}function Tf(i){switch(i){case"ceil":return"floor";case"floor":return"ceil";default:return i}}function ov(i,e){return i===void 0?e:yc(i,"offset",["prefer","use","ignore","reject"],e)}function Sf(i){return yc(i,"calendarName",["auto","always","never"],"auto")}function Pl(i,e,t){let r=1/0;e!==void 0&&(r=e),t||e===void 0||(r=e>1?e-1:1);const s=function(u,n,p,m,g){let v=u[n];if(v===void 0)return g;const y=Yp(v);if(_f(y)||y<p||y>m)throw new RangeError(`${String(n)} must be between ${p} and ${m}, not ${y}`);return Yr(y)}(i,"roundingIncrement",1,r,1);if(e!==void 0&&e%s!=0)throw new RangeError(`Rounding increment must divide evenly into ${e}`);return s}function db(i,e){return Pl(i,{year:void 0,month:void 0,week:void 0,day:void 0,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[e],!1)}function Ef(i){const e=Zr(i,"smallestUnit","time",void 0);if(e==="hour"){const s=lh.reduce((l,[u,n,p])=>(p==="time"&&n!=="hour"&&l.push(n,u),l),[]);throw new RangeError(`smallestUnit must be one of ${s.join(", ")}, not ${e}`)}switch(e){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}let t=i.fractionalSecondDigits;if(t===void 0&&(t="auto"),typeof t!="number"){const s=Fi(t);if(s==="auto")return{precision:"auto",unit:"nanosecond",increment:1};throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${s}`)}if(_f(t)||t<0||t>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`);const r=Yr(t);switch(r){case 0:return{precision:r,unit:"second",increment:1};case 1:case 2:case 3:return{precision:r,unit:"millisecond",increment:10**(3-r)};case 4:case 5:case 6:return{precision:r,unit:"microsecond",increment:10**(6-r)};case 7:case 8:case 9:return{precision:r,unit:"nanosecond",increment:10**(9-r)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`)}}const Su=Symbol("~required~");function Zr(i,e,t,r,s=[]){const l=[];for(const[,m,g]of lh)t!=="datetime"&&t!==g||l.push(m);l.push(...s);let u=r;u===Su?u=void 0:u!==void 0&&l.push(u);const n=[...l];for(const m of l){const g=f5.get(m);g!==void 0&&n.push(g)}let p=yc(i,e,n,u);if(p===void 0&&r===Su)throw new RangeError(`${e} is required`);return Fg.has(p)?Fg.get(p):p}function gg(i){const e=i.relativeTo;if(e===void 0)return e;let t,r,s,l,u,n,p,m,g,v,y,C,_="option",w=!1;if(Zn(e)){if(wi(e)||gn(e))return e;if(Ki(e))return Yd(e);v=uh(e);const k=an(e,Rr(v,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]),S=fs(null);S.overflow="constrain",{year:t,month:r,day:s,hour:l,minute:u,second:n,millisecond:p,microsecond:m,nanosecond:g}=kf(v,k,S),C=e.offset,C===void 0&&(_="wall"),y=e.timeZone}else{let k,S;({year:t,month:r,day:s,hour:l,minute:u,second:n,millisecond:p,microsecond:m,nanosecond:g,calendar:v,ianaName:k,offset:C,z:S}=Xo(Fi(e))),k&&(y=k),S?_="exact":C||(_="wall"),v||(v=kr()),v=ns(v),w=!0}if(y!==void 0){y=js(y);let k=0;return _==="option"&&(k=Au(Fi(C))),ls(Ug(t,r,s,l,u,n,p,m,g,_,k,y,"compatible","reject",w),y,v)}return no(t,r,s,v)}function lv(i,e,t,r,s,l,u,n,p,m){for(const[g,v]of[["years",i],["months",e],["weeks",t],["days",r],["hours",s],["minutes",l],["seconds",u],["milliseconds",n],["microseconds",p],["nanoseconds",m]])if(v!==0)return Fg.get(g);return"nanosecond"}function ga(i,e){return tw.indexOf(i)>tw.indexOf(e)?e:i}function Iy(i,e){let t=i;return t===void 0&&(t=fs(null)),sT(fs(null),t,{largestUnit:e})}function an(i,e,t,{emptySourceErrorMessage:r}={emptySourceErrorMessage:"no supported properties found"}){const s=fs(null);let l=!1;for(const u of e){let n=i[u];if(n!==void 0)l=!0,ew.has(u)&&(n=ew.get(u)(n)),s[u]=n;else if(t!=="partial"){if(nT.call(t,u))throw new TypeError(`required property '${u}' missing or undefined`);n=p5.get(u),s[u]=n}}if(t==="partial"&&!l)throw new TypeError(r);if(s.era===void 0!=(s.eraYear===void 0))throw new RangeError("properties 'era' and 'eraYear' must be provided together");return s}function $g(i,e="complete"){const t=["hour","microsecond","millisecond","minute","nanosecond","second"],r=an(i,t,"partial",{emptySourceErrorMessage:"invalid time-like"}),s={};for(const l of t){const u=l5(r,l);u!==void 0?s[l]=u.value:e==="complete"&&(s[l]=0)}return s}function Un(i,e){let t=i;if(Zn(t)){if(gn(t))return t;if(wi(t)&&(Er(e),t=Sa(Y(t,Dn),Y(t,ws),Y(t,Et))),Ki(t))return Er(e),no(Y(t,ri),Y(t,ui),Y(t,gi),Y(t,Et));const p=uh(t);return fc(p,an(t,Rr(p,["day","month","monthCode","year"]),[]),e)}Er(e);const{year:r,month:s,day:l,calendar:u,z:n}=function(m){return Xo(m)}(Fi(t));if(n)throw new RangeError("Z designator not supported for PlainDate");return new(zi("%Temporal.PlainDate%"))(r,s,l,u)}function kf(i,e,t){let{hour:r,minute:s,second:l,millisecond:u,microsecond:n,nanosecond:p}=$g(e);const m=Er(t),g=fc(i,e,t),v=Y(g,ri),y=Y(g,ui),C=Y(g,gi);return{hour:r,minute:s,second:l,millisecond:u,microsecond:n,nanosecond:p}=Py(r,s,l,u,n,p,m),{year:v,month:y,day:C,hour:r,minute:s,second:l,millisecond:u,microsecond:n,nanosecond:p}}function uu(i,e){let t,r,s,l,u,n,p,m,g,v;if(Zn(i)){if(Ki(i))return i;if(wi(i))return Er(e),Sa(Y(i,Dn),Y(i,ws),Y(i,Et));if(gn(i))return Er(e),ua(Y(i,ri),Y(i,ui),Y(i,gi),0,0,0,0,0,0,Y(i,Et));v=uh(i);const y=an(i,Rr(v,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]);({year:t,month:r,day:s,hour:l,minute:u,second:n,millisecond:p,microsecond:m,nanosecond:g}=kf(v,y,e))}else{let y;if(Er(e),{year:t,month:r,day:s,hour:l,minute:u,second:n,millisecond:p,microsecond:m,nanosecond:g,calendar:v,z:y}=function(_){return Xo(_)}(Fi(i)),y)throw new RangeError("Z designator not supported for PlainDateTime");_b(t,r,s,l,u,n,p,m,g),v===void 0&&(v=kr()),v=ns(v)}return ua(t,r,s,l,u,n,p,m,g,v)}function $d(i){if(mr(i))return i;let{years:e,months:t,weeks:r,days:s,hours:l,minutes:u,seconds:n,milliseconds:p,microseconds:m,nanoseconds:g}=Ru(i);return new(zi("%Temporal.Duration%"))(e,t,r,s,l,u,n,p,m,g)}function Lo(i){if(Fr(i))return i;if(wi(i))return new(zi("%Temporal.Instant%"))(Y(i,Li));const e=g5(Fi(i));return new(zi("%Temporal.Instant%"))(e)}function rw(i,e){let t=i;if(Zn(t)){if(ts(t))return t;let p,m;if(Kr(t,Et))p=Y(t,Et),m=!1;else{let v=t.calendar;m=v===void 0,v===void 0&&(v=kr()),p=ns(v)}t=t;const g=an(t,Rr(p,["day","month","monthCode","year"]),[]);return m&&g.month!==void 0&&g.monthCode===void 0&&g.year===void 0&&(g.year=1972),qd(p,g,e)}Er(e);let{month:r,day:s,referenceISOYear:l,calendar:u}=pT(Fi(t)),n=u;return n===void 0&&(n=kr()),n=ns(n),l===void 0?($o(1972,r,s),Kp(r,s,n)):qd(n,Kp(r,s,n,l))}function Tl(i,e="constrain"){let t,r,s,l,u,n,p,m=i;if(Zn(m)){if(gr(m))return m;if(wi(m)&&(m=Sa(Y(m,Dn),Y(m,ws),Y(m,Et))),Ki(m))return new(zi("%Temporal.PlainTime%"))(Y(m,Vi),Y(m,Gi),Y(m,Hi),Y(m,Wi),Y(m,qi),Y(m,Yi));if(p=uh(m),Fi(p)!=="iso8601")throw new RangeError("PlainTime can only have iso8601 calendar");({hour:t,minute:r,second:s,millisecond:l,microsecond:u,nanosecond:n}=$g(m)),{hour:t,minute:r,second:s,millisecond:l,microsecond:u,nanosecond:n}=Py(t,r,s,l,u,n,e)}else if({hour:t,minute:r,second:s,millisecond:l,microsecond:u,nanosecond:n,calendar:p}=function(v){const y=JP.exec(v);let C,_,w,k,S,x,P;if(y){C=Ln(y[1]),_=Ln(y[2]||y[5]),w=Ln(y[3]||y[6]),w===60&&(w=59);const D=(y[4]||y[7])+"000000000";k=Ln(D.slice(0,3)),S=Ln(D.slice(3,6)),x=Ln(D.slice(6,9)),P=y[15]}else{let D,T;if({hasTime:T,hour:C,minute:_,second:w,millisecond:k,microsecond:S,nanosecond:x,calendar:P,z:D}=Xo(v),!T)throw new RangeError(`time is missing in string: ${v}`);if(D)throw new RangeError("Z designator not supported for PlainTime")}if(/[tT ][0-9][0-9]/.test(v))return{hour:C,minute:_,second:w,millisecond:k,microsecond:S,nanosecond:x,calendar:P};try{const{month:D,day:T}=pT(v);$o(1972,D,T)}catch{try{const{year:D,month:T}=hT(v);$o(D,T,1)}catch{return{hour:C,minute:_,second:w,millisecond:k,microsecond:S,nanosecond:x,calendar:P}}}throw new RangeError(`invalid ISO 8601 time-only string ${v}; may need a T prefix`)}(Fi(m)),Uy(t,r,s,l,u,n),p!==void 0&&p!=="iso8601")throw new RangeError("PlainTime can only have iso8601 calendar");return new(zi("%Temporal.PlainTime%"))(t,r,s,l,u,n)}function Mp(i,e){if(Zn(i)){if(An(i))return i;const n=uh(i);return ku(n,an(i,Rr(n,["month","monthCode","year"]),[]),e)}Er(e);let{year:t,month:r,referenceISODay:s,calendar:l}=hT(Fi(i)),u=l;return u===void 0&&(u=kr()),u=ns(u),s===void 0?($o(t,r,1),Qp(t,r,u)):ku(u,Qp(t,r,u,s))}function Ug(i,e,t,r,s,l,u,n,p,m,g,v,y,C,_){const w=new(zi("%Temporal.PlainDateTime%"))(i,e,t,r,s,l,u,n,p);if(m==="wall"||C==="ignore")return Y(Os(v,w,y),Li);if(m==="exact"||C==="use"){const S=mc(i,e,t,r,s,l,u,n,p);if(S===null)throw new RangeError("ZonedDateTime outside of supported range");return ue.subtract(S,ue.BigInt(g))}const k=Vg(v,w);for(const S of k){const x=xo(v,S),P=ue.toNumber(aa(ue.BigInt(x),6e10,"halfExpand"));if(x===g||_&&P===g)return Y(S,Li)}if(C==="reject"){const S=xb(g),x=Do(v)?Y(v,ec):"time zone";throw new RangeError(`Offset ${S} is invalid for ${w.toString()} in ${x}`)}return Y(_T(k,v,w,y),Li)}function Pp(i,e){let t,r,s,l,u,n,p,m,g,v,y,C,_=!1,w="option";if(Zn(i)){if(wi(i))return i;C=uh(i);const S=an(i,av(Rr(C,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),"timeZone","offset"),["timeZone"]);({year:t,month:r,day:s,hour:l,minute:u,second:n,millisecond:p,microsecond:m,nanosecond:g}=kf(C,S,e)),v=js(S.timeZone),y=S.offset,y===void 0?w="wall":y=Fi(y)}else{let S,x;if(Er(e),{year:t,month:r,day:s,hour:l,minute:u,second:n,millisecond:p,microsecond:m,nanosecond:g,ianaName:S,offset:y,z:x,calendar:C}=function(D){const T=Xo(D);if(!T.ianaName)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return T}(Fi(i)),!S)throw new RangeError("time zone ID required in brackets");x?w="exact":y||(w="wall"),v=new(zi("%Temporal.TimeZone%"))(S),C||(C=kr()),C=ns(C),_=!0}let k=0;return w==="option"&&(k=Au(y)),ls(Ug(t,r,s,l,u,n,p,m,g,w,k,v,Xp(e),ov(e,"reject"),_),v,C)}function fT(i,e,t,r,s){$o(e,t,r),MT(e,t,r),Zo(i),Qi(i,ri,e),Qi(i,ui,t),Qi(i,gi,r),Qi(i,Et,s),Qi(i,"slot-date-brand",!0)}function no(i,e,t,r=kr()){const s=zi("%Temporal.PlainDate%"),l=fs(s.prototype);return fT(l,i,e,t,r),l}function mT(i,e,t,r,s,l,u,n,p,m,g){_b(e,t,r,s,l,u,n,p,m),PT(e,t,r,s,l,u,n,p,m),Zo(i),Qi(i,ri,e),Qi(i,ui,t),Qi(i,gi,r),Qi(i,Vi,s),Qi(i,Gi,l),Qi(i,Hi,u),Qi(i,Wi,n),Qi(i,qi,p),Qi(i,Yi,m),Qi(i,Et,g)}function ua(i,e,t,r,s,l,u,n,p,m=kr()){const g=zi("%Temporal.PlainDateTime%"),v=fs(g.prototype);return mT(v,i,e,t,r,s,l,u,n,p,m),v}function gT(i,e,t,r,s){$o(s,e,t),MT(s,e,t),Zo(i),Qi(i,ui,e),Qi(i,gi,t),Qi(i,ri,s),Qi(i,Et,r),Qi(i,"slot-month-day-brand",!0)}function Kp(i,e,t=kr(),r=1972){const s=zi("%Temporal.PlainMonthDay%"),l=fs(s.prototype);return gT(l,i,e,t,r),l}function yT(i,e,t,r,s){$o(e,t,s),function(u,n){ds(u,-271821,275760),u===-271821?ds(n,4,12):u===275760&&ds(n,1,9)}(e,t),Zo(i),Qi(i,ri,e),Qi(i,ui,t),Qi(i,gi,s),Qi(i,Et,r),Qi(i,"slot-year-month-brand",!0)}function Qp(i,e,t=kr(),r=1){const s=zi("%Temporal.PlainYearMonth%"),l=fs(s.prototype);return yT(l,i,e,t,r),l}function xT(i,e,t,r){lu(e),Zo(i),Qi(i,Li,e),Qi(i,Dn,t),Qi(i,Et,r);const s=new(zi("%Temporal.Instant%"))(Y(i,Li));Qi(i,ws,s)}function ls(i,e,t=kr()){const r=zi("%Temporal.ZonedDateTime%"),s=fs(r.prototype);return xT(s,i,e,t),s}function kr(){return new(zi("%Temporal.Calendar%"))("iso8601")}function Rr(i,e){let t=e;i.fields&&(t=i.fields(t));const r=[];for(const s of t){if(typeof s!="string")throw new TypeError("bad return from calendar.fields()");ob.call(r,s)}return r}function Eu(i,e,t){const r=i.mergeFields;if(!r)return{...e,...t};const s=Reflect.apply(r,i,[e,t]);if(!Zn(s))throw new TypeError("bad return from calendar.mergeFields()");return s}function Ns(i,e,t,r,s){let l=s;l===void 0&&(l=i.dateAdd);const u=lb(l,i,[e,t,r]);if(!gn(u))throw new TypeError("invalid result");return u}function pc(i,e,t,r,s){let l=s;l===void 0&&(l=i.dateUntil);const u=lb(l,i,[e,t,r]);if(!mr(u))throw new TypeError("invalid result");return u}function Dy(i,e){const t=i.year(e);if(t===void 0)throw new RangeError("calendar year result must be an integer");return Vn(t)}function Ry(i,e){const t=i.month(e);if(t===void 0)throw new RangeError("calendar month result must be a positive integer");return Zp(t)}function Af(i,e){const t=i.monthCode(e);if(t===void 0)throw new RangeError("calendar monthCode result must be a string");return Fi(t)}function Ly(i,e){const t=i.day(e);if(t===void 0)throw new RangeError("calendar day result must be a positive integer");return Zp(t)}function zy(i,e){let t=i.era(e);return t!==void 0&&(t=Fi(t)),t}function Ny(i,e){let t=i.eraYear(e);return t!==void 0&&(t=Vn(t)),t}function hb(i,e){return i.dayOfWeek(e)}function pb(i,e){return i.dayOfYear(e)}function fb(i,e){return i.weekOfYear(e)}function mb(i,e){return i.daysInWeek(e)}function Mf(i,e){return i.daysInMonth(e)}function Oy(i,e){return i.daysInYear(e)}function jy(i,e){return i.monthsInYear(e)}function Fy(i,e){return i.inLeapYear(e)}function ns(i){let e=i;if(Zn(e)){if(Kr(e,Et))return Y(e,Et);if(!("calendar"in e)||(e=e.calendar,Zn(e)&&!("calendar"in e)))return e}const t=Fi(e),r=zi("%Temporal.Calendar%");if(NT(t))return new r(t);let s;try{({calendar:s}=Xo(t))}catch{throw new RangeError(`Invalid calendar: ${t}`)}return s||(s="iso8601"),new r(s)}function uh(i){if(Kr(i,Et))return Y(i,Et);const{calendar:e}=i;return e===void 0?kr():ns(e)}function Pf(i,e){return i===e?!0:Fi(i)===Fi(e)}function vT(i,e){if(i===e)return e;const t=Fi(i),r=Fi(e);if(t===r||t==="iso8601")return e;if(r==="iso8601")return i;throw new RangeError("irreconcilable calendars")}function fc(i,e,t){const r=i.dateFromFields(e,t);if(!gn(r))throw new TypeError("invalid result");return r}function ku(i,e,t){const r=i.yearMonthFromFields(e,t);if(!An(r))throw new TypeError("invalid result");return r}function qd(i,e,t){const r=i.monthDayFromFields(e,t);if(!ts(r))throw new TypeError("invalid result");return r}function js(i){let e=i;if(Zn(e)){if(wi(e))return Y(e,Dn);if(!("timeZone"in e)||(e=e.timeZone,Zn(e)&&!("timeZone"in e)))return e}const t=dT(Fi(e));return new(zi("%Temporal.TimeZone%"))(t)}function bT(i,e){return i===e?!0:Fi(i)===Fi(e)}function Yd(i){return no(Y(i,ri),Y(i,ui),Y(i,gi),Y(i,Et))}function gb(i){return new(zi("%Temporal.PlainTime%"))(Y(i,Vi),Y(i,Gi),Y(i,Hi),Y(i,Wi),Y(i,qi),Y(i,Yi))}function xo(i,e){let t=i.getOffsetNanosecondsFor;if(typeof t!="function")throw new TypeError("getOffsetNanosecondsFor not callable");const r=Reflect.apply(t,i,[e]);if(typeof r!="number")throw new TypeError("bad return from getOffsetNanosecondsFor");if(!cT(r)||Tn(r)>864e11)throw new RangeError("out-of-range return from getOffsetNanosecondsFor");return r}function cv(i,e){return xb(xo(i,e))}function Sa(i,e,t){const r=Y(e,Li),s=xo(i,e);let{year:l,month:u,day:n,hour:p,minute:m,second:g,millisecond:v,microsecond:y,nanosecond:C}=CT(r);return{year:l,month:u,day:n,hour:p,minute:m,second:g,millisecond:v,microsecond:y,nanosecond:C}=vb(l,u,n,p,m,g,v,y,C+s),ua(l,u,n,p,m,g,v,y,C,t)}function Os(i,e,t){return _T(Vg(i,e),i,e,t)}function _T(i,e,t,r){const s=zi("%Temporal.Instant%"),l=i.length;if(l===1)return i[0];if(l)switch(r){case"compatible":case"earlier":return i[0];case"later":return i[l-1];case"reject":throw new RangeError("multiple instants found")}const u=Y(t,ri),n=Y(t,ui),p=Y(t,gi),m=Y(t,Vi),g=Y(t,Gi),v=Y(t,Hi),y=Y(t,Wi),C=Y(t,qi),_=Y(t,Yi),w=mc(u,n,p,m,g,v,y,C,_);if(w===null)throw new RangeError("DateTime outside of supported range");const k=new s(ue.subtract(w,hc)),S=new s(ue.add(w,hc)),x=xo(e,k),P=xo(e,S)-x;switch(r){case"earlier":{const D=Y(t,Et),T=zi("%Temporal.PlainDateTime%"),I=dv(u,n,p,m,g,v,y,C,_,D,0,0,0,0,0,0,0,0,0,-P,void 0);return Vg(e,new T(I.year,I.month,I.day,I.hour,I.minute,I.second,I.millisecond,I.microsecond,I.nanosecond,D))[0]}case"compatible":case"later":{const D=Y(t,Et),T=zi("%Temporal.PlainDateTime%"),I=dv(u,n,p,m,g,v,y,C,_,D,0,0,0,0,0,0,0,0,0,P,void 0),N=Vg(e,new T(I.year,I.month,I.day,I.hour,I.minute,I.second,I.millisecond,I.microsecond,I.nanosecond,D));return N[N.length-1]}case"reject":throw new RangeError("no such instant found")}}function Vg(i,e){const t=i.getPossibleInstantsFor(e),r=[];for(const s of t){if(!Fr(s))throw new TypeError("bad return from getPossibleInstantsFor");ob.call(r,s)}return r}function Lu(i){let e;return i<0||i>9999?e=(i<0?"-":"+")+`000000${Tn(i)}`.slice(-6):e=`0000${i}`.slice(-4),e}function ar(i){return`00${i}`.slice(-2)}function By(i,e,t,r,s){if(s==="minute")return"";const l=`:${ar(i)}`;let u,n=1e6*e+1e3*t+r;if(s==="auto"){if(n===0)return l;for(u=`${n}`.padStart(9,"0");u[u.length-1]==="0";)u=u.slice(0,-1)}else{if(s===0)return l;u=`${n}`.padStart(9,"0").slice(0,s)}return`${l}.${u}`}function sw(i,e,t){let r=e;r===void 0&&(r=new(zi("%Temporal.TimeZone%"))("UTC"));const s=Sa(r,i,kr()),l=Lu(Y(s,ri)),u=ar(Y(s,ui)),n=ar(Y(s,gi)),p=ar(Y(s,Vi)),m=ar(Y(s,Gi)),g=By(Y(s,Hi),Y(s,Wi),Y(s,qi),Y(s,Yi),t);let v="Z";return e!==void 0&&(v=wT(xo(r,i))),`${l}-${u}-${n}T${p}:${m}${g}${v}`}function h0(i,e="auto",t){function r(Z){return Z<=o5?Z.toString(10):ue.BigInt(Z).toString(10)}const s=Y(i,As),l=Y(i,es),u=Y(i,Ws),n=Y(i,Ms),p=Y(i,Ps),m=Y(i,Is);let g=Y(i,Ds),v=Y(i,Rs),y=Y(i,Ls),C=Y(i,zs);const _=Oo(s,l,u,n,p,m,g,v,y,C);if(t){const{unit:Z,increment:X,roundingMode:O}=t;({seconds:g,milliseconds:v,microseconds:y,nanoseconds:C}=gc(0,0,0,0,0,0,g,v,y,C,X,Z,O))}const w=[];s&&w.push(`${r(Tn(s))}Y`),l&&w.push(`${r(Tn(l))}M`),u&&w.push(`${r(Tn(u))}W`),n&&w.push(`${r(Tn(n))}D`);const k=[];p&&k.push(`${r(Tn(p))}H`),m&&k.push(`${r(Tn(m))}M`);const S=[];let x,P,D,T,I=Zd(0,0,0,g,v,y,C,0);({quotient:I,remainder:x}=Hr(I,Rn)),{quotient:I,remainder:P}=Hr(I,Rn),{quotient:T,remainder:D}=Hr(I,Rn);const N=1e6*Tn(ue.toNumber(D))+1e3*Tn(ue.toNumber(P))+Tn(ue.toNumber(x));let q;if(e==="auto"){if(N!==0)for(q=`${N}`.padStart(9,"0");q[q.length-1]==="0";)q=q.slice(0,-1)}else e!==0&&(q=`${N}`.padStart(9,"0").slice(0,e));return q&&S.unshift(".",q),ue.equal(T,Tr)&&!S.length&&e==="auto"||S.unshift(ub(T).toString()),S.length&&k.push(`${S.join("")}S`),k.length&&k.unshift("T"),w.length||k.length?`${_<0?"-":""}P${w.join("")}${k.join("")}`:"PT0S"}function aw(i,e="auto"){return`${Lu(Y(i,ri))}-${ar(Y(i,ui))}-${ar(Y(i,gi))}${Cf(Fi(Y(i,Et)),e)}`}function ow(i,e,t="auto",r){let s=Y(i,ri),l=Y(i,ui),u=Y(i,gi),n=Y(i,Vi),p=Y(i,Gi),m=Y(i,Hi),g=Y(i,Wi),v=Y(i,qi),y=Y(i,Yi);if(r){const{unit:C,increment:_,roundingMode:w}=r;({year:s,month:l,day:u,hour:n,minute:p,second:m,millisecond:g,microsecond:v,nanosecond:y}=Sb(s,l,u,n,p,m,g,v,y,_,C,w))}return`${Lu(s)}-${ar(l)}-${ar(u)}T${ar(n)}:${ar(p)}${By(m,g,v,y,e)}${Cf(Fi(Y(i,Et)),t)}`}function lw(i,e="auto"){let t=`${ar(Y(i,ui))}-${ar(Y(i,gi))}`;const r=Fi(Y(i,Et));(e==="always"||r!=="iso8601")&&(t=`${Lu(Y(i,ri))}-${t}`);const s=Cf(r,e);return s&&(t+=s),t}function cw(i,e="auto"){let t=`${Lu(Y(i,ri))}-${ar(Y(i,ui))}`;const r=Fi(Y(i,Et));(e==="always"||r!=="iso8601")&&(t+=`-${ar(Y(i,gi))}`);const s=Cf(r,e);return s&&(t+=s),t}function uw(i,e,t="auto",r="auto",s="auto",l){let u=Y(i,ws);if(l){const{unit:g,increment:v,roundingMode:y}=l,C=Hg(Y(i,Li),v,g,y);u=new(zi("%Temporal.Instant%"))(C)}const n=Y(i,Dn),p=Sa(n,u,kr());let m=`${Lu(Y(p,ri))}-${ar(Y(p,ui))}-${ar(Y(p,gi))}T${ar(Y(p,Vi))}:${ar(Y(p,Gi))}${By(Y(p,Hi),Y(p,Wi),Y(p,qi),Y(p,Yi),e)}`;return s!=="never"&&(m+=wT(xo(n,u))),r!=="never"&&(m+=`[${n}]`),m+=Cf(Fi(Y(i,Et)),t),m}function Ip(i){return OT.test(wf(i))}function Au(i){const e=OT.exec(wf(i));if(!e)throw new RangeError(`invalid time zone offset: ${i}`);return(e[1]==="-"||e[1]==="−"?-1:1)*(1e9*(60*(60*+e[2]+ +(e[3]||0))+ +(e[4]||0))+ +((e[5]||0)+"000000000").slice(0,9))}function yb(i){return Ip(i)?xb(Au(i)):uT(wf(i)).resolvedOptions().timeZone}function _l(i,e){const{year:t,month:r,day:s,hour:l,minute:u,second:n,millisecond:p,microsecond:m,nanosecond:g}=TT(i,e),v=mc(t,r,s,l,u,n,p,m,g);if(v===null)throw new RangeError("Date outside of supported range");return ue.toNumber(ue.subtract(v,i))}function xb(i){const e=i<0?"-":"+",t=Tn(i),r=t%1e9,s=Yr(t/1e9)%60,l=Yr(t/6e10)%60,u=ar(Yr(t/36e11)),n=ar(l),p=ar(s);let m="";if(r){let g=`${r}`.padStart(9,"0");for(;g[g.length-1]==="0";)g=g.slice(0,-1);m=`:${p}.${g}`}else s&&(m=`:${p}`);return`${e}${u}:${n}${m}`}function wT(i){let e=ue.toNumber(aa(ue.BigInt(i),6e10,"halfExpand"));const t=e<0?"-":"+";e=Tn(e);const r=e/6e10%60;return`${t}${ar(Yr(e/36e11))}:${ar(r)}`}function mc(i,e,t,r,s,l,u,n,p){const m=new Date;m.setUTCHours(r,s,l,u),m.setUTCFullYear(i,e-1,t);const g=m.getTime();if(_f(g))return null;let v=ue.multiply(ue.BigInt(g),$a);return v=ue.add(v,ue.multiply(ue.BigInt(n),Rn)),v=ue.add(v,ue.BigInt(p)),ue.lessThan(v,Wp)||ue.greaterThan(v,qp)?null:v}function CT(i){const{quotient:e,remainder:t}=Hr(i,$a);let r=ue.toNumber(e),s=ue.toNumber(t);s<0&&(s+=1e6,r-=1);const l=Yr(s/1e3)%1e3,u=s%1e3,n=new Date(r);return{epochMilliseconds:r,year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds(),microsecond:l,nanosecond:u}}function TT(i,e){const{epochMilliseconds:t,millisecond:r,microsecond:s,nanosecond:l}=CT(i),{year:u,month:n,day:p,hour:m,minute:g,second:v}=function(C,_){const w=uT(C);return function(S){const x=S.split(/[^\w]+/);if(x.length!==7)throw new RangeError(`expected 7 parts in "${S}`);const P=+x[0],D=+x[1];let T=+x[2];const I=x[3].toUpperCase();if(I==="B"||I==="BC")T=1-T;else if(I!=="A"&&I!=="AD")throw new RangeError(`Unknown era ${I} in "${S}`);let N=+x[4];N===24&&(N=0);const q=+x[5],Z=+x[6];if(!(is(T)&&is(P)&&is(D)&&is(N)&&is(q)&&is(Z)))throw new RangeError(`Invalid number in "${S}`);return{year:T,month:P,day:D,hour:N,minute:q,second:Z}}(w.format(new Date(_)))}(e,t);return vb(u,n,p,m,g,v,r,s,l)}function dw(i,e){return ue.lessThan(i,e)?e:i}function ST(){return ue.add(kb(),d5)}function ET(i,e){const t=ST(),r=ue.greaterThan(i,t),s=r?ue.subtract(i,oT):aT;let l=ue.subtract(i,cb);const u=_l(l,e);let n=l,p=u;for(;u===p&&ue.greaterThan(l,s);)n=ue.subtract(l,lT),p=_l(n,e),u===p&&(l=n);return u===p?r?ET(ue.subtract(t,hc),e):null:jT(m=>_l(m,e),n,l,p,u)}function ac(i){return i===void 0?!1:i%4==0&&(i%100!=0||i%400==0)}function El(i,e){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[ac(i)?"leapyear":"standard"][e-1]}function p0(i,e,t){const r=e+(e<3?10:-2),s=i-(e<3?1:0),l=Yr(s/100),u=s-100*l,n=(t+Yr(2.6*r-.2)+(u+Yr(u/4))+(Yr(l/4)-2*l))%7;return n+(n<=0?7:0)}function Gg(i,e,t){let r=t;for(let s=e-1;s>0;s--)r+=El(i,s);return r}function Oo(i,e,t,r,s,l,u,n,p,m){for(const g of[i,e,t,r,s,l,u,n,p,m])if(g!==0)return g<0?-1:1;return 0}function yg(i,e){let t=i,r=e;if(!is(t)||!is(r))throw new RangeError("infinity is out of range");return r-=1,t+=Yr(r/12),r%=12,r<0&&(r+=12),r+=1,{year:t,month:r}}function $y(i,e,t){let r=i,s=e,l=t;if(!is(l))throw new RangeError("infinity is out of range");({year:r,month:s}=yg(r,s));let u=0,n=s>2?r:r-1;for(;u=ac(n)?366:365,l<-u;)r-=1,n-=1,l+=u;for(n+=1;u=ac(n)?366:365,l>u;)r+=1,n+=1,l-=u;for(;l<1;)({year:r,month:s}=yg(r,s-1)),l+=El(r,s);for(;l>El(r,s);)l-=El(r,s),{year:r,month:s}=yg(r,s+1);return{year:r,month:s,day:l}}function vb(i,e,t,r,s,l,u,n,p){const{deltaDays:m,hour:g,minute:v,second:y,millisecond:C,microsecond:_,nanosecond:w}=wl(r,s,l,u,n,p),{year:k,month:S,day:x}=$y(i,e,t+m);return{year:k,month:S,day:x,hour:g,minute:v,second:y,millisecond:C,microsecond:_,nanosecond:w}}function wl(i,e,t,r,s,l){let u=i,n=e,p=t,m=r,g=s,v=l;if(!(is(u)&&is(n)&&is(p)&&is(m)&&is(g)&&is(v)))throw new RangeError("infinity is out of range");g+=Yr(v/1e3),v=kd(v,1e3),m+=Yr(g/1e3),g=kd(g,1e3),p+=Yr(m/1e3),m=kd(m,1e3),n+=Yr(p/60),p=kd(p,60),u+=Yr(n/60),n=kd(n,60);const y=Yr(u/24);return u=kd(u,24),{deltaDays:y,hour:u,minute:n,second:p,millisecond:m,microsecond:g,nanosecond:v}}function Zd(i,e,t,r,s,l,u,n){const p=ue.BigInt(i);let m=ue.BigInt(u);i!==0&&(m=ue.subtract(ue.BigInt(u),ue.BigInt(n)));const g=ue.add(ue.BigInt(e),ue.multiply(p,ue.BigInt(24))),v=ue.add(ue.BigInt(t),ue.multiply(g,fu)),y=ue.add(ue.BigInt(r),ue.multiply(v,fu)),C=ue.add(ue.BigInt(s),ue.multiply(y,Rn)),_=ue.add(ue.BigInt(l),ue.multiply(C,Rn));return ue.add(ue.BigInt(m),ue.multiply(_,Rn))}function bb(i,e){const t=zi("%Temporal.Instant%"),r=Hp(ue.toNumber(i));let s=ue.BigInt(i),l=864e11;if(r===0)return{days:0,nanoseconds:Tr,dayLengthNs:l};if(!wi(e)){let x;return{quotient:x,remainder:s}=Hr(s,ue.BigInt(l)),{days:ue.toNumber(x),nanoseconds:s,dayLengthNs:l}}const u=Y(e,Li),n=Y(e,ws),p=ue.add(u,s),m=new t(p),g=Y(e,Dn),v=Y(e,Et),y=Sa(g,n,v),C=Sa(g,m,v);let{days:_}=Tb(Y(y,ri),Y(y,ui),Y(y,gi),Y(y,Vi),Y(y,Gi),Y(y,Hi),Y(y,Wi),Y(y,qi),Y(y,Yi),Y(C,ri),Y(C,ui),Y(C,gi),Y(C,Vi),Y(C,Gi),Y(C,Hi),Y(C,Wi),Y(C,qi),Y(C,Yi),v,"day",fs(null)),w=Ua(n,g,v,0,0,0,_,0,0,0,0,0,0);if(r===1)for(;_>0&&ue.greaterThan(w,p);)--_,w=Ua(n,g,v,0,0,0,_,0,0,0,0,0,0);s=ue.subtract(p,w);let k=!1,S=new t(w);do{const x=Ua(S,g,v,0,0,0,r,0,0,0,0,0,0),P=Y(S,Li);l=ue.toNumber(ue.subtract(x,P)),k=ue.greaterThan(ue.multiply(ue.subtract(s,ue.BigInt(l)),ue.BigInt(r)),Tr),k&&(s=ue.subtract(s,ue.BigInt(l)),S=new t(x),_+=r)}while(k);return{days:_,nanoseconds:s,dayLengthNs:Tn(l)}}function ma(i,e,t,r,s,l,u,n,p){let m,g,v,y,C,_,w=i;if(wi(p)){const S=Ua(Y(p,ws),Y(p,Dn),Y(p,Et),0,0,0,w,e,t,r,s,l,u),x=Y(p,Li);m=ue.subtract(S,x)}else m=Zd(w,e,t,r,s,l,u,0);n==="year"||n==="month"||n==="week"||n==="day"?{days:w,nanoseconds:m}=bb(m,p):w=0;const k=ue.lessThan(m,Tr)?-1:1;switch(m=ub(m),g=v=y=C=_=Tr,n){case"year":case"month":case"week":case"day":case"hour":({quotient:g,remainder:m}=Hr(m,Rn)),{quotient:v,remainder:g}=Hr(g,Rn),{quotient:y,remainder:v}=Hr(v,Rn),{quotient:C,remainder:y}=Hr(y,fu),{quotient:_,remainder:C}=Hr(C,fu);break;case"minute":({quotient:g,remainder:m}=Hr(m,Rn)),{quotient:v,remainder:g}=Hr(g,Rn),{quotient:y,remainder:v}=Hr(v,Rn),{quotient:C,remainder:y}=Hr(y,fu);break;case"second":({quotient:g,remainder:m}=Hr(m,Rn)),{quotient:v,remainder:g}=Hr(g,Rn),{quotient:y,remainder:v}=Hr(v,Rn);break;case"millisecond":({quotient:g,remainder:m}=Hr(m,Rn)),{quotient:v,remainder:g}=Hr(g,Rn);break;case"microsecond":({quotient:g,remainder:m}=Hr(m,Rn));break;case"nanosecond":break;default:throw new Error("assert not reached")}return{days:w,hours:ue.toNumber(_)*k,minutes:ue.toNumber(C)*k,seconds:ue.toNumber(y)*k,milliseconds:ue.toNumber(v)*k,microseconds:ue.toNumber(g)*k,nanoseconds:ue.toNumber(m)*k}}function Ym(i,e,t,r,s,l){let u=i,n=e,p=t,m=r;const g=zi("%Temporal.Duration%"),v=Oo(u,n,p,m,0,0,0,0,0,0);let y,C;l&&(C=Un(l),y=Y(C,Et));const _=new g(v),w=new g(0,v),k=new g(0,0,v);switch(s){case"year":break;case"month":{if(!y)throw new RangeError("a starting point is required for months balancing");const S=y.dateAdd,x=y.dateUntil;let P=C;for(;Tn(u)>0;){const D=Ns(y,P,_,void 0,S),T=fs(null);T.largestUnit="month";const I=Y(pc(y,P,D,T,x),es);P=D,n+=I,u-=v}}break;case"week":if(!y)throw new RangeError("a starting point is required for weeks balancing");for(;Tn(u)>0;){let S;({relativeTo:C,days:S}=_s(y,C,_)),m+=S,u-=v}for(;Tn(n)>0;){let S;({relativeTo:C,days:S}=_s(y,C,w)),m+=S,n-=v}break;default:for(;Tn(u)>0;){if(!y)throw new RangeError("a starting point is required for balancing calendar units");let S;({relativeTo:C,days:S}=_s(y,C,_)),m+=S,u-=v}for(;Tn(n)>0;){if(!y)throw new RangeError("a starting point is required for balancing calendar units");let S;({relativeTo:C,days:S}=_s(y,C,w)),m+=S,n-=v}for(;Tn(p)>0;){if(!y)throw new RangeError("a starting point is required for balancing calendar units");let S;({relativeTo:C,days:S}=_s(y,C,k)),m+=S,p-=v}}return{years:u,months:n,weeks:p,days:m}}function hw(i,e,t,r,s){if(wi(i)){const l=Y(i,ws),u=Y(i,Dn),n=Y(i,Et),p=xo(u,l),m=Ua(l,u,n,e,t,r,s,0,0,0,0,0,0);return xo(u,new(zi("%Temporal.Instant%"))(m))-p}return 0}function kT(i){return new(zi("%Temporal.Duration%"))(-Y(i,As),-Y(i,es),-Y(i,Ws),-Y(i,Ms),-Y(i,Ps),-Y(i,Is),-Y(i,Ds),-Y(i,Rs),-Y(i,Ls),-Y(i,zs))}function da(i,e,t){return r5(t,s5(e,i))}function AT(i,e,t){const r=da(e,1,12);return{year:i,month:r,day:da(t,1,El(i,r))}}function ds(i,e,t){if(i<e||i>t)throw new RangeError(`value out of range: ${e} <= ${i} <= ${t}`)}function $o(i,e,t){ds(e,1,12),ds(t,1,El(i,e))}function MT(i,e,t){PT(i,e,t,12,0,0,0,0,0)}function Uy(i,e,t,r,s,l){ds(i,0,23),ds(e,0,59),ds(t,0,59),ds(r,0,999),ds(s,0,999),ds(l,0,999)}function _b(i,e,t,r,s,l,u,n,p){$o(i,e,t),Uy(r,s,l,u,n,p)}function PT(i,e,t,r,s,l,u,n,p){if(ds(i,-271821,275760),i===-271821&&mc(i,e,t+1,r,s,l,u,n,p-1)==null||i===275760&&mc(i,e,t-1,r,s,l,u,n,p+1)==null)throw new RangeError("DateTime outside of supported range")}function lu(i){if(ue.lessThan(i,Wp)||ue.greaterThan(i,qp))throw new RangeError("Instant outside of supported range")}function Vy(i,e,t,r,s,l,u,n,p,m){const g=Oo(i,e,t,r,s,l,u,n,p,m);for(const v of[i,e,t,r,s,l,u,n,p,m]){if(!is(v))throw new RangeError("infinite values not allowed as duration fields");const y=Hp(v);if(y!==0&&y!==g)throw new RangeError("mixed-sign values not allowed as duration fields")}}function wb(i,e,t,r,s,l,u){switch(u){case"year":case"month":{const n=-oc(i,e,t,r,s,l);if(n===0)return{years:0,months:0,weeks:0,days:0};const p={year:i,month:e,day:t},m={year:r,month:s,day:l};let g=m.year-p.year,v=mu(i,e,t,g,0,0,0,"constrain"),y=-oc(v.year,v.month,v.day,r,s,l);if(y===0)return u==="year"?{years:g,months:0,weeks:0,days:0}:{years:0,months:12*g,weeks:0,days:0};let C=m.month-p.month;if(y!==n&&(g-=n,C+=12*n),v=mu(i,e,t,g,C,0,0,"constrain"),y=-oc(v.year,v.month,v.day,r,s,l),y===0)return u==="year"?{years:g,months:C,weeks:0,days:0}:{years:0,months:C+12*g,weeks:0,days:0};y!==n&&(C-=n,C===-n&&(g-=n,C=11*n),v=mu(i,e,t,g,C,0,0,"constrain"));let _=0;return _=v.month===m.month?m.day-v.day:n<0?-v.day-(El(m.year,m.month)-m.day):m.day+(El(v.year,v.month)-v.day),u==="month"&&(C+=12*g,g=0),{years:g,months:C,weeks:0,days:_}}case"week":case"day":{let n,p,m;oc(i,e,t,r,s,l)<0?(p={year:i,month:e,day:t},n={year:r,month:s,day:l},m=1):(p={year:r,month:s,day:l},n={year:i,month:e,day:t},m=-1);let g=Gg(n.year,n.month,n.day)-Gg(p.year,p.month,p.day);for(let y=p.year;y<n.year;++y)g+=ac(y)?366:365;let v=0;return u==="week"&&(v=Yr(g/7),g%=7),v*=m,g*=m,{years:0,months:0,weeks:v,days:g}}default:throw new Error("assert not reached")}}function IT(i,e,t,r,s,l,u,n,p,m,g,v){let y=u-i,C=n-e,_=p-t,w=m-r,k=g-s,S=v-l;const x=Oo(0,0,0,0,y,C,_,w,k,S);y*=x,C*=x,_*=x,w*=x,k*=x,S*=x;let P=0;if({deltaDays:P,hour:y,minute:C,second:_,millisecond:w,microsecond:k,nanosecond:S}=wl(y,C,_,w,k,S),P!=0)throw new Error("assertion failure in DifferenceTime: _bt_.[[Days]] should be 0");return y*=x,C*=x,_*=x,w*=x,k*=x,S*=x,{hours:y,minutes:C,seconds:_,milliseconds:w,microseconds:k,nanoseconds:S}}function Cb(i,e,t,r,s){const l=ue.subtract(e,i),u=ue.remainder(l,ue.BigInt(864e11)),n=ue.subtract(l,u),p=aa(u,Ab[r]*t,s),m=ue.add(n,p),g=ue.toNumber(ue.remainder(m,Rn)),v=ue.toNumber(ue.remainder(ue.divide(m,Rn),Rn)),y=ue.toNumber(ue.remainder(ue.divide(m,$a),Rn));return{seconds:ue.toNumber(ue.divide(m,Sl)),milliseconds:y,microseconds:v,nanoseconds:g}}function Tb(i,e,t,r,s,l,u,n,p,m,g,v,y,C,_,w,k,S,x,P,D){let T=i,I=e,N=t,{hours:q,minutes:Z,seconds:X,milliseconds:O,microseconds:V,nanoseconds:$}=IT(r,s,l,u,n,p,y,C,_,w,k,S);const L=Oo(0,0,0,0,q,Z,X,O,V,$);oc(m,g,v,T,I,N)===-L&&({year:T,month:I,day:N}=$y(T,I,N-L),{hours:q,minutes:Z,seconds:X,milliseconds:O,microseconds:V,nanoseconds:$}=ma(-L,q,Z,X,O,V,$,P));const R=no(T,I,N,x),G=no(m,g,v,x),U=Iy(D,ga("day",P));let{years:B,months:H,weeks:W,days:re}=pc(x,R,G,U);return{days:re,hours:q,minutes:Z,seconds:X,milliseconds:O,microseconds:V,nanoseconds:$}=ma(re,q,Z,X,O,V,$,P),{years:B,months:H,weeks:W,days:re,hours:q,minutes:Z,seconds:X,milliseconds:O,microseconds:V,nanoseconds:$}}function DT(i,e,t,r,s,l){const u=ue.subtract(e,i);if(ue.equal(u,Tr))return{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};const n=zi("%Temporal.Instant%"),p=new n(i),m=new n(e),g=Sa(t,p,r),v=Sa(t,m,r);let{years:y,months:C,weeks:_,days:w}=Tb(Y(g,ri),Y(g,ui),Y(g,gi),Y(g,Vi),Y(g,Gi),Y(g,Hi),Y(g,Wi),Y(g,qi),Y(g,Yi),Y(v,ri),Y(v,ui),Y(v,gi),Y(v,Vi),Y(v,Gi),Y(v,Hi),Y(v,Wi),Y(v,qi),Y(v,Yi),r,s,l);const k=Ua(p,t,r,y,C,_,0,0,0,0,0,0,0);let S=ue.subtract(e,k);const x=ls(k,t,r);({nanoseconds:S,days:w}=bb(S,x));const{hours:P,minutes:D,seconds:T,milliseconds:I,microseconds:N,nanoseconds:q}=ma(0,0,0,0,0,0,ue.toNumber(S),"hour");return{years:y,months:C,weeks:_,days:w,hours:P,minutes:D,seconds:T,milliseconds:I,microseconds:N,nanoseconds:q}}function pw(i,e,t,r){const s=Lo(t);let l,u;[l,u]=i==="until"?[e,s]:[s,e];const n=ln(r),p=Zr(n,"smallestUnit","time","nanosecond"),m=ga("second",p);let g=Zr(n,"largestUnit","time","auto");if(g==="auto"&&(g=m),ga(g,p)!==g)throw new RangeError(`largestUnit ${g} cannot be smaller than smallestUnit ${p}`);const v=Ys(n,"trunc"),y=Pl(n,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[p],!1),C=Y(l,Li),_=Y(u,Li);let w,k,{seconds:S,milliseconds:x,microseconds:P,nanoseconds:D}=Cb(C,_,y,p,v);return{hours:w,minutes:k,seconds:S,milliseconds:x,microseconds:P,nanoseconds:D}=ma(0,0,0,S,x,P,D,g),new(zi("%Temporal.Duration%"))(0,0,0,0,w,k,S,x,P,D)}function fw(i,e,t,r){const s=i==="since"?-1:1,l=Un(t),u=Y(e,Et),n=Y(l,Et),p=Fi(u),m=Fi(n);if(p!==m)throw new RangeError(`cannot compute difference between dates of ${p} and ${m} calendars`);const g=ln(r),v=Zr(g,"smallestUnit","date","day"),y=ga("day",v);let C=Zr(g,"largestUnit","date","auto");if(C==="auto"&&(C=y),ga(C,v)!==C)throw new RangeError(`largestUnit ${C} cannot be smaller than smallestUnit ${v}`);let _=Ys(g,"trunc");i==="since"&&(_=Tf(_));const w=Pl(g,void 0,!1),k=Iy(g,C);let{years:S,months:x,weeks:P,days:D}=pc(u,e,l,k);return v==="day"&&w===1||({years:S,months:x,weeks:P,days:D}=gc(S,x,P,D,0,0,0,0,0,0,w,v,_,e)),new(zi("%Temporal.Duration%"))(s*S,s*x,s*P,s*D,0,0,0,0,0,0)}function mw(i,e,t,r){const s=i==="since"?-1:1,l=uu(t),u=Y(e,Et),n=Y(l,Et),p=Fi(u),m=Fi(n);if(p!==m)throw new RangeError(`cannot compute difference between dates of ${p} and ${m} calendars`);const g=ln(r),v=Zr(g,"smallestUnit","datetime","nanosecond"),y=ga("day",v);let C=Zr(g,"largestUnit","datetime","auto");if(C==="auto"&&(C=y),ga(C,v)!==C)throw new RangeError(`largestUnit ${C} cannot be smaller than smallestUnit ${v}`);let _=Ys(g,"trunc");i==="since"&&(_=Tf(_));const w=db(g,v);let{years:k,months:S,weeks:x,days:P,hours:D,minutes:T,seconds:I,milliseconds:N,microseconds:q,nanoseconds:Z}=Tb(Y(e,ri),Y(e,ui),Y(e,gi),Y(e,Vi),Y(e,Gi),Y(e,Hi),Y(e,Wi),Y(e,qi),Y(e,Yi),Y(l,ri),Y(l,ui),Y(l,gi),Y(l,Vi),Y(l,Gi),Y(l,Hi),Y(l,Wi),Y(l,qi),Y(l,Yi),u,C,g);const X=Yd(e);return{years:k,months:S,weeks:x,days:P,hours:D,minutes:T,seconds:I,milliseconds:N,microseconds:q,nanoseconds:Z}=gc(k,S,x,P,D,T,I,N,q,Z,w,v,_,X),{days:P,hours:D,minutes:T,seconds:I,milliseconds:N,microseconds:q,nanoseconds:Z}=ma(P,D,T,I,N,q,Z,C),new(zi("%Temporal.Duration%"))(s*k,s*S,s*x,s*P,s*D,s*T,s*I,s*N,s*q,s*Z)}function gw(i,e,t,r){const s=i==="since"?-1:1,l=Tl(t),u=ln(r);let n=Zr(u,"largestUnit","time","auto");n==="auto"&&(n="hour");const p=Zr(u,"smallestUnit","time","nanosecond");if(ga(n,p)!==n)throw new RangeError(`largestUnit ${n} cannot be smaller than smallestUnit ${p}`);let m=Ys(u,"trunc");i==="since"&&(m=Tf(m));const g=Pl(u,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[p],!1);let{hours:v,minutes:y,seconds:C,milliseconds:_,microseconds:w,nanoseconds:k}=IT(Y(e,Vi),Y(e,Gi),Y(e,Hi),Y(e,Wi),Y(e,qi),Y(e,Yi),Y(l,Vi),Y(l,Gi),Y(l,Hi),Y(l,Wi),Y(l,qi),Y(l,Yi));return{hours:v,minutes:y,seconds:C,milliseconds:_,microseconds:w,nanoseconds:k}=gc(0,0,0,0,v,y,C,_,w,k,g,p,m),{hours:v,minutes:y,seconds:C,milliseconds:_,microseconds:w,nanoseconds:k}=ma(0,v,y,C,_,w,k,n),new(zi("%Temporal.Duration%"))(0,0,0,0,s*v,s*y,s*C,s*_,s*w,s*k)}function yw(i,e,t,r){const s=i==="since"?-1:1,l=Mp(t),u=Y(e,Et),n=Y(l,Et),p=Fi(u),m=Fi(n);if(p!==m)throw new RangeError(`cannot compute difference between months of ${p} and ${m} calendars`);const g=ln(r),v=lh.reduce((q,[Z,X,O])=>(O==="date"&&X!=="week"&&X!=="day"&&q.push(X,Z),q),[]),y=Zr(g,"smallestUnit","date","month");if(y==="week"||y==="day")throw new RangeError(`smallestUnit must be one of ${v.join(", ")}, not ${y}`);let C=Zr(g,"largestUnit","date","auto");if(C==="week"||C==="day")throw new RangeError(`largestUnit must be one of ${v.join(", ")}, not ${C}`);if(C==="auto"&&(C="year"),ga(C,y)!==C)throw new RangeError(`largestUnit ${C} cannot be smaller than smallestUnit ${y}`);let _=Ys(g,"trunc");i==="since"&&(_=Tf(_));const w=Pl(g,void 0,!1),k=Rr(u,["monthCode","year"]),S=an(l,k,[]);S.day=1;const x=an(e,k,[]);x.day=1;const P=fc(u,S),D=fc(u,x),T=Iy(g,C);let{years:I,months:N}=pc(u,D,P,T);return y==="month"&&w===1||({years:I,months:N}=gc(I,N,0,0,0,0,0,0,0,0,w,y,_,D)),new(zi("%Temporal.Duration%"))(s*I,s*N,0,0,0,0,0,0,0,0)}function xw(i,e,t,r){const s=i==="since"?-1:1,l=Pp(t),u=Y(e,Et),n=Y(l,Et),p=Fi(u),m=Fi(n);if(p!==m)throw new RangeError(`cannot compute difference between dates of ${p} and ${m} calendars`);const g=ln(r),v=Zr(g,"smallestUnit","datetime","nanosecond"),y=ga("hour",v);let C=Zr(g,"largestUnit","datetime","auto");if(C==="auto"&&(C=y),ga(C,v)!==C)throw new RangeError(`largestUnit ${C} cannot be smaller than smallestUnit ${v}`);let _=Ys(g,"trunc");i==="since"&&(_=Tf(_));const w=db(g,v),k=Y(e,Li),S=Y(l,Li);let x,P,D,T,I,N,q,Z,X,O;if(C!=="year"&&C!=="month"&&C!=="week"&&C!=="day")x=0,P=0,D=0,T=0,{seconds:q,milliseconds:Z,microseconds:X,nanoseconds:O}=Cb(k,S,w,v,_),{hours:I,minutes:N,seconds:q,milliseconds:Z,microseconds:X,nanoseconds:O}=ma(0,0,0,q,Z,X,O,C);else{const V=Y(e,Dn);if(!bT(V,Y(l,Dn)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");const $=Iy(g,C);({years:x,months:P,weeks:D,days:T,hours:I,minutes:N,seconds:q,milliseconds:Z,microseconds:X,nanoseconds:O}=DT(k,S,V,u,C,$)),{years:x,months:P,weeks:D,days:T,hours:I,minutes:N,seconds:q,milliseconds:Z,microseconds:X,nanoseconds:O}=gc(x,P,D,T,I,N,q,Z,X,O,w,v,_,e),{years:x,months:P,weeks:D,days:T,hours:I,minutes:N,seconds:q,milliseconds:Z,microseconds:X,nanoseconds:O}=zT(x,P,D,T,I,N,q,Z,X,O,w,v,_,e)}return new(zi("%Temporal.Duration%"))(s*x,s*P,s*D,s*T,s*I,s*N,s*q,s*Z,s*X,s*O)}function mu(i,e,t,r,s,l,u,n){let p=i,m=e,g=t,v=l,y=u;return p+=r,m+=s,{year:p,month:m}=yg(p,m),{year:p,month:m,day:g}=Bg(p,m,g,n),y+=7*v,g+=y,{year:p,month:m,day:g}=$y(p,m,g),{year:p,month:m,day:g}}function RT(i,e,t,r,s,l,u,n,p,m,g,v){let y=i,C=e,_=t,w=r,k=s,S=l;y+=u,C+=n,_+=p,w+=m,k+=g,S+=v;let x=0;return{deltaDays:x,hour:y,minute:C,second:_,millisecond:w,microsecond:k,nanosecond:S}=wl(y,C,_,w,k,S),{deltaDays:x,hour:y,minute:C,second:_,millisecond:w,microsecond:k,nanosecond:S}}function LT(i,e,t,r,s,l,u,n,p,m,g,v,y,C,_,w,k,S,x,P,D){const T=ga(lv(i,e,t,r,s,l,u,n,p,m),lv(g,v,y,C,_,w,k,S,x,P));let I,N,q,Z,X,O,V,$,L,R;if(D)if(gn(D)){const G=zi("%Temporal.Duration%"),U=Y(D,Et),B=new G(i,e,t,r,0,0,0,0,0,0),H=new G(g,v,y,C,0,0,0,0,0,0),W=U.dateAdd,re=Ns(U,D,B,void 0,W),de=Ns(U,re,H,void 0,W),ie=ga("day",T),oe=fs(null);oe.largestUnit=ie,{years:I,months:N,weeks:q,days:Z}=pc(U,D,de,oe),{days:Z,hours:X,minutes:O,seconds:V,milliseconds:$,microseconds:L,nanoseconds:R}=ma(Z,s+_,l+w,u+k,n+S,p+x,m+P,T)}else{const G=zi("%Temporal.Instant%"),U=Y(D,Dn),B=Y(D,Et),H=Ua(Y(D,ws),U,B,i,e,t,r,s,l,u,n,p,m),W=Ua(new G(H),U,B,g,v,y,C,_,w,k,S,x,P);T!=="year"&&T!=="month"&&T!=="week"&&T!=="day"?(I=0,N=0,q=0,Z=0,{seconds:V,milliseconds:$,microseconds:L,nanoseconds:R}=Cb(Y(D,Li),W,1,"nanosecond","halfExpand"),{hours:X,minutes:O,seconds:V,milliseconds:$,microseconds:L,nanoseconds:R}=ma(0,0,0,V,$,L,R,T)):{years:I,months:N,weeks:q,days:Z,hours:X,minutes:O,seconds:V,milliseconds:$,microseconds:L,nanoseconds:R}=DT(Y(D,Li),W,U,B,T,fs(null))}else{if(T==="year"||T==="month"||T==="week")throw new RangeError("relativeTo is required for years, months, or weeks arithmetic");I=N=q=0,{days:Z,hours:X,minutes:O,seconds:V,milliseconds:$,microseconds:L,nanoseconds:R}=ma(r+C,s+_,l+w,u+k,n+S,p+x,m+P,T)}return Vy(I,N,q,Z,X,O,V,$,L,R),{years:I,months:N,weeks:q,days:Z,hours:X,minutes:O,seconds:V,milliseconds:$,microseconds:L,nanoseconds:R}}function uv(i,e,t,r,s,l,u){let n=Tr;n=ue.add(n,ue.BigInt(u)),n=ue.add(n,ue.multiply(ue.BigInt(l),Rn)),n=ue.add(n,ue.multiply(ue.BigInt(s),$a)),n=ue.add(n,ue.multiply(ue.BigInt(r),Sl)),n=ue.add(n,ue.multiply(ue.BigInt(t),ue.BigInt(6e10))),n=ue.add(n,ue.multiply(ue.BigInt(e),ue.BigInt(36e11)));const p=ue.add(i,n);return lu(p),p}function dv(i,e,t,r,s,l,u,n,p,m,g,v,y,C,_,w,k,S,x,P,D){let T=C,{deltaDays:I,hour:N,minute:q,second:Z,millisecond:X,microsecond:O,nanosecond:V}=RT(r,s,l,u,n,p,_,w,k,S,x,P);T+=I;const $=zi("%Temporal.Duration%"),L=Ns(m,no(i,e,t,m),new $(g,v,y,T,0,0,0,0,0,0),D);return{year:Y(L,ri),month:Y(L,ui),day:Y(L,gi),hour:N,minute:q,second:Z,millisecond:X,microsecond:O,nanosecond:V}}function Ua(i,e,t,r,s,l,u,n,p,m,g,v,y,C){const _=zi("%Temporal.Duration%");if(Oo(r,s,l,u,0,0,0,0,0,0)===0)return uv(Y(i,Li),n,p,m,g,v,y);const w=Sa(e,i,t),k=Ns(t,no(Y(w,ri),Y(w,ui),Y(w,gi),t),new _(r,s,l,u,0,0,0,0,0,0),C),S=ua(Y(k,ri),Y(k,ui),Y(k,gi),Y(w,Vi),Y(w,Gi),Y(w,Hi),Y(w,Wi),Y(w,qi),Y(w,Yi),t);return uv(Y(Os(e,S,"compatible"),Li),n,p,m,g,v,y)}function vw(i,e,t,r){const s=i==="subtract"?-1:1;let{years:l,months:u,weeks:n,days:p,hours:m,minutes:g,seconds:v,milliseconds:y,microseconds:C,nanoseconds:_}=Ru(t);const w=gg(ln(r));return{years:l,months:u,weeks:n,days:p,hours:m,minutes:g,seconds:v,milliseconds:y,microseconds:C,nanoseconds:_}=LT(Y(e,As),Y(e,es),Y(e,Ws),Y(e,Ms),Y(e,Ps),Y(e,Is),Y(e,Ds),Y(e,Rs),Y(e,Ls),Y(e,zs),s*l,s*u,s*n,s*p,s*m,s*g,s*v,s*y,s*C,s*_,w),new(zi("%Temporal.Duration%"))(l,u,n,p,m,g,v,y,C,_)}function bw(i,e,t){const r=i==="subtract"?-1:1,{hours:s,minutes:l,seconds:u,milliseconds:n,microseconds:p,nanoseconds:m}=function(y,C){let _=Ru(y);for(const w of C)if(_[w]!==0)throw new RangeError(`Duration field ${w} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);return _}(t,["years","months","weeks","days"]),g=uv(Y(e,Li),r*s,r*l,r*u,r*n,r*p,r*m);return new(zi("%Temporal.Instant%"))(g)}function _w(i,e,t,r){const s=i==="subtract"?-1:1,{years:l,months:u,weeks:n,days:p,hours:m,minutes:g,seconds:v,milliseconds:y,microseconds:C,nanoseconds:_}=Ru(t),w=ln(r),k=Y(e,Et),{year:S,month:x,day:P,hour:D,minute:T,second:I,millisecond:N,microsecond:q,nanosecond:Z}=dv(Y(e,ri),Y(e,ui),Y(e,gi),Y(e,Vi),Y(e,Gi),Y(e,Hi),Y(e,Wi),Y(e,qi),Y(e,Yi),k,s*l,s*u,s*n,s*p,s*m,s*g,s*v,s*y,s*C,s*_,w);return ua(S,x,P,D,T,I,N,q,Z,k)}function ww(i,e,t){const r=i==="subtract"?-1:1,{hours:s,minutes:l,seconds:u,milliseconds:n,microseconds:p,nanoseconds:m}=Ru(t);let{hour:g,minute:v,second:y,millisecond:C,microsecond:_,nanosecond:w}=RT(Y(e,Vi),Y(e,Gi),Y(e,Hi),Y(e,Wi),Y(e,qi),Y(e,Yi),r*s,r*l,r*u,r*n,r*p,r*m);return{hour:g,minute:v,second:y,millisecond:C,microsecond:_,nanosecond:w}=Py(g,v,y,C,_,w,"reject"),new(zi("%Temporal.PlainTime%"))(g,v,y,C,_,w)}function Cw(i,e,t,r){let s=Ru(t);i==="subtract"&&(s={years:-s.years,months:-s.months,weeks:-s.weeks,days:-s.days,hours:-s.hours,minutes:-s.minutes,seconds:-s.seconds,milliseconds:-s.milliseconds,microseconds:-s.microseconds,nanoseconds:-s.nanoseconds});let{years:l,months:u,weeks:n,days:p,hours:m,minutes:g,seconds:v,milliseconds:y,microseconds:C,nanoseconds:_}=s;({days:p}=ma(p,m,g,v,y,C,_,"day"));const w=ln(r),k=Y(e,Et),S=Rr(k,["monthCode","year"]),x=an(e,S,[]),P=Oo(l,u,n,p,0,0,0,0,0,0);x.day=P<0?Zp(Mf(k,e)):1;const D=fc(k,x),T=new(zi("%Temporal.Duration%"))(l,u,n,p,0,0,0,0,0,0),I=sT(fs(null),w);return ku(k,an(Ns(k,D,T,w),S,[]),I)}function Tw(i,e,t,r){const s=i==="subtract"?-1:1,{years:l,months:u,weeks:n,days:p,hours:m,minutes:g,seconds:v,milliseconds:y,microseconds:C,nanoseconds:_}=Ru(t),w=ln(r),k=Y(e,Dn),S=Y(e,Et);return ls(Ua(Y(e,ws),k,S,s*l,s*u,s*n,s*p,s*m,s*g,s*v,s*y,s*C,s*_,w),k,S)}function aa(i,e,t){if(e===1)return i;let{quotient:r,remainder:s}=Hr(i,ue.BigInt(e));if(ue.equal(s,Tr))return i;const l=ue.lessThan(s,Tr)?-1:1;switch(t){case"ceil":l>0&&(r=ue.add(r,ue.BigInt(l)));break;case"floor":l<0&&(r=ue.add(r,ue.BigInt(l)));break;case"trunc":break;case"halfExpand":ue.toNumber(ub(ue.multiply(s,ue.BigInt(2))))>=e&&(r=ue.add(r,ue.BigInt(l)))}return ue.multiply(r,ue.BigInt(e))}function Hg(i,e,t,r){let s=ue.remainder(i,ue.BigInt(864e11));ue.lessThan(s,Tr)&&(s=ue.add(s,ue.BigInt(864e11)));const l=ue.subtract(i,s),u=aa(s,Ab[t]*e,r);return ue.add(l,u)}function Sb(i,e,t,r,s,l,u,n,p,m,g,v,y=864e11){const{deltaDays:C,hour:_,minute:w,second:k,millisecond:S,microsecond:x,nanosecond:P}=Eb(r,s,l,u,n,p,m,g,v,y),{year:D,month:T,day:I}=$y(i,e,t+C);return{year:D,month:T,day:I,hour:_,minute:w,second:k,millisecond:S,microsecond:x,nanosecond:P}}function Eb(i,e,t,r,s,l,u,n,p,m=864e11){let g=Tr;switch(n){case"day":case"hour":g=ue.BigInt(i);case"minute":g=ue.add(ue.multiply(g,fu),ue.BigInt(e));case"second":g=ue.add(ue.multiply(g,fu),ue.BigInt(t));case"millisecond":g=ue.add(ue.multiply(g,Rn),ue.BigInt(r));case"microsecond":g=ue.add(ue.multiply(g,Rn),ue.BigInt(s));case"nanosecond":g=ue.add(ue.multiply(g,Rn),ue.BigInt(l))}const v=n==="day"?m:Ab[n],y=aa(g,v*u,p),C=ue.toNumber(ue.divide(y,ue.BigInt(v)));switch(n){case"day":return{deltaDays:C,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return wl(C,0,0,0,0,0);case"minute":return wl(i,C,0,0,0,0);case"second":return wl(i,e,C,0,0,0);case"millisecond":return wl(i,e,t,C,0,0);case"microsecond":return wl(i,e,t,r,C,0);case"nanosecond":return wl(i,e,t,r,s,C);default:throw new Error(`Invalid unit ${n}`)}}function xg(i,e){return wb(Y(i,ri),Y(i,ui),Y(i,gi),Y(e,ri),Y(e,ui),Y(e,gi),"day").days}function _s(i,e,t){const r=Ns(i,e,t,void 0);return{relativeTo:r,days:xg(e,r)}}function hv(i,e,t,r,s){const l=Y(i,Dn),u=Y(i,Et);return ls(Ua(Y(i,ws),l,u,e,t,r,s,0,0,0,0,0,0),l,u)}function zT(i,e,t,r,s,l,u,n,p,m,g,v,y,C){let _=i,w=e,k=t,S=r,x=s,P=l,D=u,T=n,I=p,N=m;if(!wi(C)||v==="year"||v==="month"||v==="week"||v==="day"||v==="nanosecond"&&g===1)return{years:_,months:w,weeks:k,days:S,hours:x,minutes:P,seconds:D,milliseconds:T,microseconds:I,nanoseconds:N};let q=Zd(0,x,P,D,T,I,N,0);const Z=Hp(ue.toNumber(q)),X=Y(C,Dn),O=Y(C,Et),V=Ua(Y(C,ws),X,O,_,w,k,S,0,0,0,0,0,0),$=Ua(new(zi("%Temporal.Instant%"))(V),X,O,0,0,0,Z,0,0,0,0,0,0),L=ue.subtract($,V);return ue.greaterThanOrEqual(ue.multiply(ue.subtract(q,L),ue.BigInt(Z)),Tr)&&({years:_,months:w,weeks:k,days:S}=LT(_,w,k,S,0,0,0,0,0,0,0,0,0,Z,0,0,0,0,0,0,C),q=Hg(ue.subtract(q,L),g,v,y),{hours:x,minutes:P,seconds:D,milliseconds:T,microseconds:I,nanoseconds:N}=ma(0,0,0,0,0,0,ue.toNumber(q),"hour")),{years:_,months:w,weeks:k,days:S,hours:x,minutes:P,seconds:D,milliseconds:T,microseconds:I,nanoseconds:N}}function gc(i,e,t,r,s,l,u,n,p,m,g,v,y,C){let _=i,w=e,k=t,S=r,x=s,P=l,D=u,T=n,I=p,N=ue.BigInt(m);const q=zi("%Temporal.Duration%");let Z,X,O,V,$=C;if($){if(wi($))X=$,$=Un($);else if(!gn($))throw new TypeError("starting point must be PlainDate or ZonedDateTime");Z=Y($,Et)}if(v==="year"||v==="month"||v==="week"||v==="day"){let L,R,G;N=Zd(0,x,P,D,T,I,m,0),X&&(L=hv(X,_,w,k,S)),{days:R,nanoseconds:N,dayLengthNs:G}=bb(N,L),O=ue.BigInt(G),S+=R,x=P=D=T=I=0}switch(v){case"year":{if(!Z)throw new RangeError("A starting point is required for years rounding");const L=new q(_),R=Z.dateAdd,G=Ns(Z,$,L,void 0,R),U=Ns(Z,$,new q(_,w,k),void 0,R);$=G,S+=xg(G,U);const B=Ns(Z,$,{days:S},void 0,R),H=fs(null);H.largestUnit="year";const W=pc(Z,$,B,H).years;_+=W;const re=$;$=Ns(Z,$,{years:W},void 0,R),S-=xg(re,$);const de=new q(S<0?-1:1);let{days:ie}=_s(Z,$,de);ie=Tn(ie);const oe=ue.multiply(ue.BigInt(ie),O);N=ue.add(ue.add(ue.multiply(oe,ue.BigInt(_)),ue.multiply(ue.BigInt(S),O)),N);const Ee=aa(N,ue.toNumber(ue.multiply(oe,ue.BigInt(g))),y);V=ue.toNumber(N)/ue.toNumber(oe),_=ue.toNumber(ue.divide(Ee,oe)),N=Tr,w=k=S=0;break}case"month":{if(!Z)throw new RangeError("A starting point is required for months rounding");const L=new q(_,w),R=Z.dateAdd,G=Ns(Z,$,L,void 0,R),U=Ns(Z,$,new q(_,w,k),void 0,R);$=G,S+=xg(G,U);const B=Hp(S),H=new q(0,S<0?-1:1);let W;for({relativeTo:$,days:W}=_s(Z,$,H);Tn(S)>=Tn(W);)w+=B,S-=W,{relativeTo:$,days:W}=_s(Z,$,H);W=Tn(W);const re=ue.multiply(ue.BigInt(W),O);N=ue.add(ue.add(ue.multiply(re,ue.BigInt(w)),ue.multiply(ue.BigInt(S),O)),N);const de=aa(N,ue.toNumber(ue.multiply(re,ue.BigInt(g))),y);V=ue.toNumber(N)/ue.toNumber(re),w=ue.toNumber(ue.divide(de,re)),N=Tr,k=S=0;break}case"week":{if(!Z)throw new RangeError("A starting point is required for weeks rounding");const L=Hp(S),R=new q(0,0,S<0?-1:1);let G;for({relativeTo:$,days:G}=_s(Z,$,R);Tn(S)>=Tn(G);)k+=L,S-=G,{relativeTo:$,days:G}=_s(Z,$,R);G=Tn(G);const U=ue.multiply(ue.BigInt(G),O);N=ue.add(ue.add(ue.multiply(U,ue.BigInt(k)),ue.multiply(ue.BigInt(S),O)),N);const B=aa(N,ue.toNumber(ue.multiply(U,ue.BigInt(g))),y);V=ue.toNumber(N)/ue.toNumber(U),k=ue.toNumber(ue.divide(B,U)),N=Tr,S=0;break}case"day":{const L=O;N=ue.add(ue.multiply(L,ue.BigInt(S)),N);const R=aa(N,ue.toNumber(ue.multiply(L,ue.BigInt(g))),y);V=ue.toNumber(N)/ue.toNumber(L),S=ue.toNumber(ue.divide(R,L)),N=Tr;break}case"hour":{let R=ue.multiply(ue.BigInt(x),ue.BigInt(36e11));R=ue.add(R,ue.multiply(ue.BigInt(P),ue.BigInt(6e10))),R=ue.add(R,ue.multiply(ue.BigInt(D),Sl)),R=ue.add(R,ue.multiply(ue.BigInt(T),$a)),R=ue.add(R,ue.multiply(ue.BigInt(I),Rn)),R=ue.add(R,N),V=ue.toNumber(R)/36e11;const G=aa(R,36e11*g,y);x=ue.toNumber(ue.divide(G,ue.BigInt(36e11))),N=Tr,P=D=T=I=0;break}case"minute":{let R=ue.multiply(ue.BigInt(P),ue.BigInt(6e10));R=ue.add(R,ue.multiply(ue.BigInt(D),Sl)),R=ue.add(R,ue.multiply(ue.BigInt(T),$a)),R=ue.add(R,ue.multiply(ue.BigInt(I),Rn)),R=ue.add(R,N),V=ue.toNumber(R)/6e10;const G=aa(R,6e10*g,y);P=ue.toNumber(ue.divide(G,ue.BigInt(6e10))),N=Tr,D=T=I=0;break}case"second":{let R=ue.multiply(ue.BigInt(D),Sl);R=ue.add(R,ue.multiply(ue.BigInt(T),$a)),R=ue.add(R,ue.multiply(ue.BigInt(I),Rn)),R=ue.add(R,N),V=ue.toNumber(R)/1e9;const G=aa(R,1e9*g,y);D=ue.toNumber(ue.divide(G,ue.BigInt(1e9))),N=Tr,T=I=0;break}case"millisecond":{let R=ue.multiply(ue.BigInt(T),$a);R=ue.add(R,ue.multiply(ue.BigInt(I),Rn)),R=ue.add(R,N),V=ue.toNumber(R)/1e6;const G=aa(R,1e6*g,y);T=ue.toNumber(ue.divide(G,ue.BigInt(1e6))),N=Tr,I=0;break}case"microsecond":{let R=ue.multiply(ue.BigInt(I),Rn);R=ue.add(R,N),V=ue.toNumber(R)/1e3;const G=aa(R,1e3*g,y);I=ue.toNumber(ue.divide(G,ue.BigInt(1e3))),N=Tr;break}case"nanosecond":V=ue.toNumber(N),N=aa(N,g,y)}return{years:_,months:w,weeks:k,days:S,hours:x,minutes:P,seconds:D,milliseconds:T,microseconds:I,nanoseconds:ue.toNumber(N),total:V}}function oc(i,e,t,r,s,l){for(const[u,n]of[[i,r],[e,s],[t,l]])if(u!==n)return gu(u-n);return 0}function kd(i,e){let t=i%e;return c5(t,-0)?0:(t<0&&(t+=e),t)}function Wg(i){const e=zp(i);return globalThis.BigInt!==void 0?globalThis.BigInt(e.toString(10)):e}function zp(i){if(i instanceof ue)return i;let e=i;if(typeof i=="object"){const t=i[Symbol.toPrimitive];t&&typeof t=="function"&&(e=lb(t,i,["number"]))}switch(typeof e){case"undefined":case"object":case"number":case"symbol":default:throw new TypeError(`cannot convert ${typeof i} to bigint`);case"string":if(!e.match(/^\s*(?:[+-]?\d+\s*)?$/))throw new SyntaxError("invalid BigInt syntax");case"bigint":try{return ue.BigInt(e.toString())}catch(t){throw t instanceof Error&&t.message.startsWith("Invalid integer")?new SyntaxError(t.message):t}case"boolean":return e?cb:Tr}}const kb=(()=>{let i=ue.BigInt(Date.now()%1e6);return()=>{const e=ue.BigInt(Date.now()),t=ue.add(ue.multiply(e,$a),i);return i=ue.remainder(e,$a),ue.greaterThan(t,qp)?qp:ue.lessThan(t,Wp)?Wp:t}})();function gu(i){return i<0?-1:i>0?1:i}function ln(i){if(i===void 0)return fs(null);if(Zn(i)&&i!==null)return i;throw new TypeError("Options parameter must be an object, not "+(i===null?"null":typeof i))}function Xd(i,e){const t=fs(null);return t[i]=e,t}function yc(i,e,t,r){let s=i[e];if(s!==void 0){if(s=Fi(s),!t.includes(s))throw new RangeError(`${e} must be one of ${t.join(", ")}, not ${s}`);return s}return r}function NT(i){return nT.call(h5,i)}const OT=new RegExp(`^${eT.source}$`);function jT(i,e,t,r=i(e),s=i(t)){let l=ue.BigInt(e),u=ue.BigInt(t),n=r,p=s;for(;ue.greaterThan(ue.subtract(u,l),cb);){const m=ue.divide(ue.add(l,u),ue.BigInt(2)),g=i(m);if(g===n)l=m,n=g;else{if(g!==p)throw new Error(`invalid state in bisection ${n} - ${g} - ${p}`);u=m,p=g}}return u}const Ab={hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},FT=Symbol("date"),BT=Symbol("ym"),$T=Symbol("md"),UT=Symbol("time"),VT=Symbol("datetime"),GT=Symbol("zoneddatetime"),HT=Symbol("instant"),Ud=Symbol("original"),pv=Symbol("timezone"),vg=Symbol("timezone-id-given"),wa=Symbol("calendar-id"),WT=Symbol("locale"),fv=Symbol("options"),Np=i=>({value:i,enumerable:!0,writable:!1,configurable:!0}),yu=globalThis.Intl.DateTimeFormat,Uo=Object.assign,y5=Object.prototype.hasOwnProperty,x5=Reflect.apply;function ru(i,e){let t=i[e];return typeof t=="function"&&(t=new yu(i[WT],t(i[fv])),i[e]=t),t}function xp(i){let e=i[pv];return typeof e=="string"&&(e=js(e),i[pv]=e),e}function Mu(i,e={}){if(!(this instanceof Mu))return new Mu(i,e);const t=e!==void 0,r=t?Uo({},e):{},s=new yu(i,r),l=s.resolvedOptions();if(t){const u=Uo({},l);for(const n in u)x5(y5,r,[n])||delete u[n];this[fv]=u}else this[fv]=r;this[vg]=r.timeZone?r.timeZone:null,this[WT]=l.locale,this[Ud]=s,this[pv]=l.timeZone,this[wa]=l.calendar,this[FT]=w5,this[BT]=b5,this[$T]=_5,this[UT]=v5,this[VT]=C5,this[GT]=T5,this[HT]=S5}Object.defineProperty(Mu,"name",{writable:!0,value:"DateTimeFormat"}),Mu.supportedLocalesOf=function(i,e){return yu.supportedLocalesOf(i,e)};const f0={resolvedOptions:Np(function(){return this[Ud].resolvedOptions()}),format:Np(function(e,...t){let{instant:r,formatter:s,timeZone:l}=Vd(e,this);return r&&s?(s=qg(s,l),s.format(r.epochMilliseconds)):this[Ud].format(e,...t)}),formatRange:Np(function(e,t){if(Kd(e)||Kd(t)){if(!qT(e,t))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");const{instant:r,formatter:s,timeZone:l}=Vd(e,this),{instant:u,formatter:n,timeZone:p}=Vd(t,this);if(l&&p&&l!==p)throw new RangeError("cannot format range between different time zones");if(r&&u&&s&&n&&s===n)return qg(s,l).formatRange(r.epochMilliseconds,u.epochMilliseconds)}return this[Ud].formatRange(e,t)})};"formatToParts"in yu.prototype&&(f0.formatToParts=Np(function(e,...t){let{instant:r,formatter:s,timeZone:l}=Vd(e,this);return r&&s?(s=qg(s,l),s.formatToParts(r.epochMilliseconds)):this[Ud].formatToParts(e,...t)})),"formatRangeToParts"in yu.prototype&&(f0.formatRangeToParts=Np(function(e,t){if(Kd(e)||Kd(t)){if(!qT(e,t))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");const{instant:r,formatter:s,timeZone:l}=Vd(e,this),{instant:u,formatter:n,timeZone:p}=Vd(t,this);if(l&&p&&l!==p)throw new RangeError("cannot format range between different time zones");if(r&&u&&s&&n&&s===n)return qg(s,l).formatRangeToParts(r.epochMilliseconds,u.epochMilliseconds)}return this[Ud].formatRangeToParts(e,t)})),Mu.prototype=Object.create(yu.prototype,f0),Object.defineProperty(Mu,"prototype",{writable:!1,enumerable:!1,configurable:!1});const zu=Mu;function qg(i,e){if(!e)return i;const t=i.resolvedOptions();return t.timeZone===e?i:((t.dateStyle||t.timeStyle)&&(delete t.weekday,delete t.era,delete t.year,delete t.month,delete t.day,delete t.hour,delete t.minute,delete t.second,delete t.timeZoneName,delete t.hourCycle,delete t.hour12,delete t.dayPeriod),new yu(t.locale,{...t,timeZone:e}))}function If(i={},e={}){const t=Uo({},i);for(const r of["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"])t[r]=r in e?e[r]:t[r],t[r]!==!1&&t[r]!==void 0||delete t[r];return t}function v5(i){let e=If(i,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});return Hy(e)||(e=Uo({},e,{hour:"numeric",minute:"numeric",second:"numeric"})),e}function b5(i){let e=If(i,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"year"in e||"month"in e||(e=Uo(e,{year:"numeric",month:"numeric"})),e}function _5(i){let e=If(i,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"month"in e||"day"in e||(e=Uo({},e,{month:"numeric",day:"numeric"})),e}function w5(i){let e=If(i,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});return Gy(e)||(e=Uo({},e,{year:"numeric",month:"numeric",day:"numeric"})),e}function C5(i){let e=If(i,{timeZoneName:!1});return Hy(e)||Gy(e)||(e=Uo({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function T5(i){let e=i;return Hy(e)||Gy(e)||(e=Uo({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),e.timeZoneName===void 0&&(e.timeZoneName="short")),e}function S5(i){let e=i;return Hy(e)||Gy(e)||(e=Uo({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function Gy(i){return"year"in i||"month"in i||"day"in i||"weekday"in i||"dateStyle"in i}function Hy(i){return"hour"in i||"minute"in i||"second"in i||"timeStyle"in i||"dayPeriod"in i}function Kd(i){return gn(i)||gr(i)||Ki(i)||wi(i)||An(i)||ts(i)||Fr(i)}function qT(i,e){return!(!Kd(i)||!Kd(e))&&!(gr(i)&&!gr(e))&&!(gn(i)&&!gn(e))&&!(Ki(i)&&!Ki(e))&&!(wi(i)&&!wi(e))&&!(An(i)&&!An(e))&&!(ts(i)&&!ts(e))&&!(Fr(i)&&!Fr(e))}function Vd(i,e){const t=zi("%Temporal.PlainDateTime%");if(gr(i)){const r=new t(1970,1,1,Y(i,Vi),Y(i,Gi),Y(i,Hi),Y(i,Wi),Y(i,qi),Y(i,Yi),e[wa]);return{instant:Os(xp(e),r,"compatible"),formatter:ru(e,UT)}}if(An(i)){const r=Y(i,ri),s=Y(i,ui),l=Y(i,gi),u=Fi(Y(i,Et));if(u!==e[wa])throw new RangeError(`cannot format PlainYearMonth with calendar ${u} in locale with calendar ${e[wa]}`);const n=new t(r,s,l,12,0,0,0,0,0,u);return{instant:Os(xp(e),n,"compatible"),formatter:ru(e,BT)}}if(ts(i)){const r=Y(i,ri),s=Y(i,ui),l=Y(i,gi),u=Fi(Y(i,Et));if(u!==e[wa])throw new RangeError(`cannot format PlainMonthDay with calendar ${u} in locale with calendar ${e[wa]}`);const n=new t(r,s,l,12,0,0,0,0,0,u);return{instant:Os(xp(e),n,"compatible"),formatter:ru(e,$T)}}if(gn(i)){const r=Y(i,ri),s=Y(i,ui),l=Y(i,gi),u=Fi(Y(i,Et));if(u!=="iso8601"&&u!==e[wa])throw new RangeError(`cannot format PlainDate with calendar ${u} in locale with calendar ${e[wa]}`);const n=new t(r,s,l,12,0,0,0,0,0,e[wa]);return{instant:Os(xp(e),n,"compatible"),formatter:ru(e,FT)}}if(Ki(i)){const r=Y(i,ri),s=Y(i,ui),l=Y(i,gi),u=Y(i,Vi),n=Y(i,Gi),p=Y(i,Hi),m=Y(i,Wi),g=Y(i,qi),v=Y(i,Yi),y=Fi(Y(i,Et));if(y!=="iso8601"&&y!==e[wa])throw new RangeError(`cannot format PlainDateTime with calendar ${y} in locale with calendar ${e[wa]}`);let C=i;return y==="iso8601"&&(C=new t(r,s,l,u,n,p,m,g,v,e[wa])),{instant:Os(xp(e),C,"compatible"),formatter:ru(e,VT)}}if(wi(i)){const r=Fi(Y(i,Et));if(r!=="iso8601"&&r!==e[wa])throw new RangeError(`cannot format ZonedDateTime with calendar ${r} in locale with calendar ${e[wa]}`);const s=Fi(Y(i,Dn));if(e[vg]&&e[vg]!==s)throw new RangeError(`timeZone option ${e[vg]} doesn't match actual time zone ${s}`);return{instant:Y(i,ws),formatter:ru(e,GT),timeZone:s}}return Fr(i)?{instant:i,formatter:ru(e,HT)}:{}}class co{constructor(e){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");const t=zp(e);lu(t),Zo(this),Qi(this,Li,t)}get epochSeconds(){if(!Fr(this))throw new TypeError("invalid receiver");const e=Y(this,Li);return ue.toNumber(ue.divide(e,Sl))}get epochMilliseconds(){if(!Fr(this))throw new TypeError("invalid receiver");const e=ue.BigInt(Y(this,Li));return ue.toNumber(ue.divide(e,$a))}get epochMicroseconds(){if(!Fr(this))throw new TypeError("invalid receiver");const e=ue.BigInt(Y(this,Li));return Wg(ue.divide(e,Rn))}get epochNanoseconds(){if(!Fr(this))throw new TypeError("invalid receiver");return Wg(ue.BigInt(Y(this,Li)))}add(e){if(!Fr(this))throw new TypeError("invalid receiver");return bw("add",this,e)}subtract(e){if(!Fr(this))throw new TypeError("invalid receiver");return bw("subtract",this,e)}until(e,t){if(!Fr(this))throw new TypeError("invalid receiver");return pw("until",this,e,t)}since(e,t){if(!Fr(this))throw new TypeError("invalid receiver");return pw("since",this,e,t)}round(e){if(!Fr(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?Xd("smallestUnit",e):ln(e),r=Zr(t,"smallestUnit","time",Su),s=Ys(t,"halfExpand"),l=Pl(t,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[r],!0),u=Hg(Y(this,Li),l,r,s);return new co(u)}equals(e){if(!Fr(this))throw new TypeError("invalid receiver");const t=Lo(e),r=Y(this,Li),s=Y(t,Li);return ue.equal(ue.BigInt(r),ue.BigInt(s))}toString(e){if(!Fr(this))throw new TypeError("invalid receiver");const t=ln(e);let r=t.timeZone;r!==void 0&&(r=js(r));const{precision:s,unit:l,increment:u}=Ef(t),n=Ys(t,"trunc"),p=Hg(Y(this,Li),u,l,n);return sw(new co(p),r,s)}toJSON(){if(!Fr(this))throw new TypeError("invalid receiver");return sw(this,void 0,"auto")}toLocaleString(e,t){if(!Fr(this))throw new TypeError("invalid receiver");return new zu(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.Instant")}toZonedDateTime(e){if(!Fr(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid argument in toZonedDateTime");const t=e.calendar;if(t===void 0)throw new TypeError("missing calendar property in toZonedDateTime");const r=ns(t),s=e.timeZone;if(s===void 0)throw new TypeError("missing timeZone property in toZonedDateTime");const l=js(s);return ls(Y(this,Li),l,r)}toZonedDateTimeISO(e){let t=e;if(!Fr(this))throw new TypeError("invalid receiver");if(Zn(t)){const l=t.timeZone;l!==void 0&&(t=l)}const r=js(t),s=kr();return ls(Y(this,Li),r,s)}static fromEpochSeconds(e){const t=Yp(e),r=ue.multiply(ue.BigInt(t),Sl);return lu(r),new co(r)}static fromEpochMilliseconds(e){const t=Yp(e),r=ue.multiply(ue.BigInt(t),$a);return lu(r),new co(r)}static fromEpochMicroseconds(e){const t=zp(e),r=ue.multiply(t,Rn);return lu(r),new co(r)}static fromEpochNanoseconds(e){const t=zp(e);return lu(t),new co(t)}static from(e){return Fr(e)?new co(Y(e,Li)):Lo(e)}static compare(e,t){const r=Lo(e),s=Lo(t),l=Y(r,Li),u=Y(s,Li);return ue.lessThan(l,u)?-1:ue.greaterThan(l,u)?1:0}}Yo(co,"Temporal.Instant");const Yg=Array.prototype.includes,E5=Array.prototype.push,k5=globalThis.Intl.DateTimeFormat,A5=Array.prototype.sort,M5=Math.abs,P5=Math.floor,mv=Object.entries,Sw=Object.keys,yr={};class Zg{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: id is required");const t=Fi(e);if(!NT(t))throw new RangeError(`invalid calendar identifier ${t}`);Zo(this),Qi(this,wr,t)}get id(){if(!_r(this))throw new TypeError("invalid receiver");return Fi(this)}dateFromFields(e,t){if(!_r(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid fields");const r=ln(t);return yr[Y(this,wr)].dateFromFields(e,r,this)}yearMonthFromFields(e,t){if(!_r(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid fields");const r=ln(t);return yr[Y(this,wr)].yearMonthFromFields(e,r,this)}monthDayFromFields(e,t){if(!_r(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid fields");const r=ln(t);return yr[Y(this,wr)].monthDayFromFields(e,r,this)}fields(e){if(!_r(this))throw new TypeError("invalid receiver");const t=[],r=new Set(["year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond"]);for(const s of e){if(typeof s!="string")throw new TypeError("invalid fields");if(!r.has(s))throw new RangeError(`invalid field name ${s}`);r.delete(s),E5.call(t,s)}return yr[Y(this,wr)].fields(t)}mergeFields(e,t){if(!_r(this))throw new TypeError("invalid receiver");return yr[Y(this,wr)].mergeFields(e,t)}dateAdd(e,t,r){if(!_r(this))throw new TypeError("invalid receiver");const s=Un(e),l=$d(t),u=Er(ln(r)),{days:n}=ma(Y(l,Ms),Y(l,Ps),Y(l,Is),Y(l,Ds),Y(l,Rs),Y(l,Ls),Y(l,zs),"day");return yr[Y(this,wr)].dateAdd(s,Y(l,As),Y(l,es),Y(l,Ws),n,u,this)}dateUntil(e,t,r){if(!_r(this))throw new TypeError("invalid receiver");const s=Un(e),l=Un(t);let u=Zr(ln(r),"largestUnit","date","auto");u==="auto"&&(u="day");const{years:n,months:p,weeks:m,days:g}=yr[Y(this,wr)].dateUntil(s,l,u);return new(zi("%Temporal.Duration%"))(n,p,m,g,0,0,0,0,0,0)}year(e){let t=e;if(!_r(this))throw new TypeError("invalid receiver");return An(t)||(t=Un(t)),yr[Y(this,wr)].year(t)}month(e){let t=e;if(!_r(this))throw new TypeError("invalid receiver");if(ts(t))throw new TypeError("use monthCode on PlainMonthDay instead");return An(t)||(t=Un(t)),yr[Y(this,wr)].month(t)}monthCode(e){let t=e;if(!_r(this))throw new TypeError("invalid receiver");return An(t)||ts(t)||(t=Un(t)),yr[Y(this,wr)].monthCode(t)}day(e){let t=e;if(!_r(this))throw new TypeError("invalid receiver");return ts(t)||(t=Un(t)),yr[Y(this,wr)].day(t)}era(e){let t=e;if(!_r(this))throw new TypeError("invalid receiver");return An(t)||(t=Un(t)),yr[Y(this,wr)].era(t)}eraYear(e){let t=e;if(!_r(this))throw new TypeError("invalid receiver");return An(t)||(t=Un(t)),yr[Y(this,wr)].eraYear(t)}dayOfWeek(e){if(!_r(this))throw new TypeError("invalid receiver");const t=Un(e);return yr[Y(this,wr)].dayOfWeek(t)}dayOfYear(e){if(!_r(this))throw new TypeError("invalid receiver");const t=Un(e);return yr[Y(this,wr)].dayOfYear(t)}weekOfYear(e){if(!_r(this))throw new TypeError("invalid receiver");const t=Un(e);return yr[Y(this,wr)].weekOfYear(t)}daysInWeek(e){if(!_r(this))throw new TypeError("invalid receiver");const t=Un(e);return yr[Y(this,wr)].daysInWeek(t)}daysInMonth(e){let t=e;if(!_r(this))throw new TypeError("invalid receiver");return An(t)||(t=Un(t)),yr[Y(this,wr)].daysInMonth(t)}daysInYear(e){let t=e;if(!_r(this))throw new TypeError("invalid receiver");return An(t)||(t=Un(t)),yr[Y(this,wr)].daysInYear(t)}monthsInYear(e){let t=e;if(!_r(this))throw new TypeError("invalid receiver");return An(t)||(t=Un(t)),yr[Y(this,wr)].monthsInYear(t)}inLeapYear(e){let t=e;if(!_r(this))throw new TypeError("invalid receiver");return An(t)||(t=Un(t)),yr[Y(this,wr)].inLeapYear(t)}toString(){if(!_r(this))throw new TypeError("invalid receiver");return Y(this,wr)}toJSON(){if(!_r(this))throw new TypeError("invalid receiver");return Fi(this)}static from(e){return ns(e)}}function Mb(i){if(!i.startsWith("M"))throw new RangeError(`Invalid month code: ${i}.  Month codes must start with M.`);const e=+i.slice(1);if(isNaN(e))throw new RangeError(`Invalid month code: ${i}`);return e}function kl(i,e=!1){return`M${i.toString().padStart(2,"0")}${e?"L":""}`}function bg(i,e,t=12){let{month:r,monthCode:s}=i;if(s===void 0){if(r===void 0)throw new TypeError("Either month or monthCode are required");e==="reject"&&ds(r,1,t),e==="constrain"&&(r=da(r,1,t)),s=kl(r)}else{const l=Mb(s);if(r!==void 0&&r!==l)throw new RangeError(`monthCode ${s} and month ${r} must match if both are present`);if(s!==kl(l))throw new RangeError(`Invalid month code: ${s}`);if(r=l,r<1||r>t)throw new RangeError(`Invalid monthCode: ${s}`)}return{...i,month:r,monthCode:s}}Yo(Zg,"Temporal.Calendar"),rv("Temporal.Calendar.from",Zg.from),yr.iso8601={dateFromFields(i,e,t){const r=Er(e);let s=an(i,["day","month","monthCode","year"],["year","day"]);s=bg(s);let{year:l,month:u,day:n}=s;return{year:l,month:u,day:n}=Bg(l,u,n,r),no(l,u,n,t)},yearMonthFromFields(i,e,t){const r=Er(e);let s=an(i,["month","monthCode","year"],["year"]);s=bg(s);let{year:l,month:u}=s;return{year:l,month:u}=function(p,m,g){let v=p,y=m;switch(g){case"reject":$o(v,y,1);break;case"constrain":({year:v,month:y}=AT(v,y))}return{year:v,month:y}}(l,u,r),Qp(l,u,t,1)},monthDayFromFields(i,e,t){const r=Er(e);let s=an(i,["day","month","monthCode","year"],["day"]);if(s.month!==void 0&&s.year===void 0&&s.monthCode===void 0)throw new TypeError("either year or monthCode required with month");const l=s.monthCode===void 0;s=bg(s);let{month:u,day:n,year:p}=s;return{month:u,day:n}=Bg(l?p:1972,u,n,r),Kp(u,n,t,1972)},fields:i=>i,mergeFields(i,e){const t={};for(const s of Sw(i))s!=="month"&&s!=="monthCode"&&(t[s]=i[s]);const r=Sw(e);for(const s of r)t[s]=e[s];if(!Yg.call(r,"month")&&!Yg.call(r,"monthCode")){const{month:s,monthCode:l}=i;s!==void 0&&(t.month=s),l!==void 0&&(t.monthCode=l)}return t},dateAdd(i,e,t,r,s,l,u){let n=Y(i,ri),p=Y(i,ui),m=Y(i,gi);return{year:n,month:p,day:m}=mu(n,p,m,e,t,r,s,l),no(n,p,m,u)},dateUntil:(i,e,t)=>wb(Y(i,ri),Y(i,ui),Y(i,gi),Y(e,ri),Y(e,ui),Y(e,gi),t),year:i=>Y(i,ri),era(){},eraYear(){},month:i=>Y(i,ui),monthCode:i=>kl(Y(i,ui)),day:i=>Y(i,gi),dayOfWeek:i=>p0(Y(i,ri),Y(i,ui),Y(i,gi)),dayOfYear:i=>Gg(Y(i,ri),Y(i,ui),Y(i,gi)),weekOfYear:i=>function(t,r,s){const l=Gg(t,r,s),u=p0(t,r,s)||7,n=p0(t,1,1),p=Yr((l-u+10)/7);return p<1?n===5||n===6&&ac(t-1)?53:52:p===53&&(ac(t)?366:365)-l<4-u?1:p}(Y(i,ri),Y(i,ui),Y(i,gi)),daysInWeek:()=>7,daysInMonth:i=>El(Y(i,ri),Y(i,ui)),daysInYear(i){let e=i;return Kr(e,ri)||(e=Un(e)),ac(Y(e,ri))?366:365},monthsInYear:()=>12,inLeapYear(i){let e=i;return Kr(e,ri)||(e=Un(e)),ac(Y(e,ri))}};class ur{constructor(e){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,this.now=globalThis.performance?globalThis.performance.now():Date.now(),e!==void 0){let t=0;for(const r of e.map.entries()){if(++t>ur.MAX_CACHE_ENTRIES)break;this.map.set(...r)}}}get(e){const t=this.map.get(e);return t&&(this.hits++,this.report()),this.calls++,t}set(e,t){this.map.set(e,t),this.misses++,this.report()}report(){}setObject(e){if(ur.objectMap.get(e))throw new RangeError("object already cached");ur.objectMap.set(e,this),this.report()}static getCacheForObject(e){let t=ur.objectMap.get(e);return t||(t=new ur,ur.objectMap.set(e,t)),t}}function YT({isoYear:i,isoMonth:e,isoDay:t}){return`${Lu(i)}-${ar(e)}-${ar(t)}T00:00Z`}function m0(i,e){return{years:i.year-e.year,months:i.month-e.month,days:i.day-e.day}}ur.objectMap=new WeakMap,ur.MAX_CACHE_ENTRIES=1e3;class dh{constructor(){this.eraLength="short",this.hasEra=!0}getFormatter(){return this.formatter===void 0&&(this.formatter=new k5(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:this.eraLength,timeZone:"UTC"})),this.formatter}isoToCalendarDate(e,t){const{year:r,month:s,day:l}=e,u=JSON.stringify({func:"isoToCalendarDate",isoYear:r,isoMonth:s,isoDay:l,id:this.id}),n=t.get(u);if(n)return n;const p=this.getFormatter();let m,g;try{g=YT({isoYear:r,isoMonth:s,isoDay:l}),m=p.formatToParts(new Date(g))}catch{throw new RangeError(`Invalid ISO date: ${JSON.stringify({isoYear:r,isoMonth:s,isoDay:l})}`)}const v={};for(let{type:C,value:_}of m){if(C==="year"&&(v.eraYear=+_),C==="relatedYear"&&(v.eraYear=+_),C==="month"){const w=/^([0-9]*)(.*?)$/.exec(_);if(!w||w.length!=3||!w[1]&&!w[2])throw new RangeError(`Unexpected month: ${_}`);if(v.month=w[1]?+w[1]:1,v.month<1)throw new RangeError(`Invalid month ${_} from ${g}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(v.month>13)throw new RangeError(`Invalid month ${_} from ${g}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);w[2]&&(v.monthExtra=w[2])}C==="day"&&(v.day=+_),this.hasEra&&C==="era"&&_!=null&&_!==""&&(_=_.split(" (")[0],v.era=_.normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(" ","-").toLowerCase())}if(v.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.reviseIntlEra){const{era:C,eraYear:_}=this.reviseIntlEra(v,e);v.era=C,v.eraYear=_}this.checkIcuBugs&&this.checkIcuBugs(e);const y=this.adjustCalendarDate(v,t,"constrain",!0);if(y.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(e)}`);if(y.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(e)}`);if(y.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(e)}`);return t.set(u,y),["constrain","reject"].forEach(C=>{const _=JSON.stringify({func:"calendarToIsoDate",year:y.year,month:y.month,day:y.day,overflow:C,id:this.id});t.set(_,e)}),y}validateCalendarDate(e){const{era:t,month:r,year:s,day:l,eraYear:u,monthCode:n,monthExtra:p}=e;if(p!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(s===void 0&&u===void 0)throw new TypeError("year or eraYear is required");if(r===void 0&&n===void 0)throw new TypeError("month or monthCode is required");if(l===void 0)throw new RangeError("Missing day");if(n!==void 0){if(typeof n!="string")throw new RangeError("monthCode must be a string, not "+typeof n);if(!/^M([01]?\d)(L?)$/.test(n))throw new RangeError(`Invalid monthCode: ${n}`)}if(this.constantEra){if(t!==void 0&&t!==this.constantEra)throw new RangeError(`era must be ${this.constantEra}, not ${t}`);if(u!==void 0&&s!==void 0&&u!==s)throw new RangeError(`eraYear ${u} does not match year ${s}`)}}adjustCalendarDate(e,t,r="constrain",s=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let l=e;if(this.validateCalendarDate(l),this.constantEra){const{year:m,eraYear:g}=l;l={...l,era:this.constantEra,year:m!==void 0?m:g,eraYear:g!==void 0?g:m}}const u=this.monthsInYear(l,t);let{month:n,monthCode:p}=l;return{month:n,monthCode:p}=bg(l,r,u),{...l,month:n,monthCode:p}}regulateMonthDayNaive(e,t,r){const s=this.monthsInYear(e,r);let{month:l,day:u}=e;return t==="reject"?(ds(l,1,s),ds(u,1,this.maximumMonthLength(e))):(l=da(l,1,s),u=da(u,1,this.maximumMonthLength({...e,month:l}))),{...e,month:l,day:u}}calendarToIsoDate(e,t="constrain",r){const s=e;let l=this.adjustCalendarDate(e,r,t,!1);l=this.regulateMonthDayNaive(l,t,r);const{year:u,month:n,day:p}=l,m=JSON.stringify({func:"calendarToIsoDate",year:u,month:n,day:p,overflow:t,id:this.id});let g,v=r.get(m);if(v||s.year!==void 0&&s.month!==void 0&&s.day!==void 0&&(s.year!==l.year||s.month!==l.month||s.day!==l.day)&&(g=JSON.stringify({func:"calendarToIsoDate",year:s.year,month:s.month,day:s.day,overflow:t,id:this.id}),v=r.get(g),v))return v;let y=this.estimateIsoDate({year:u,month:n,day:p});const C=P=>{let D=this.addDaysIso(y,P);if(l.day>this.minimumMonthLength(l)){let T=this.isoToCalendarDate(D,r);for(;T.month!==n||T.year!==u;){if(t==="reject")throw new RangeError(`day ${p} does not exist in month ${n} of year ${u}`);D=this.addDaysIso(D,-1),T=this.isoToCalendarDate(D,r)}}return D};let _=0,w=this.isoToCalendarDate(y,r),k=m0(l,w);if(k.years!==0||k.months!==0||k.days!==0){const P=365*k.years+30*k.months+k.days;y=this.addDaysIso(y,P),w=this.isoToCalendarDate(y,r),k=m0(l,w),k.years===0&&k.months===0?y=C(k.days):_=this.compareCalendarDates(l,w)}let S=8,x=!1;for(;_;){y=this.addDaysIso(y,_*S);const P=w;w=this.isoToCalendarDate(y,r);const D=_;if(_=this.compareCalendarDates(l,w),_){if(k=m0(l,w),k.years===0&&k.months===0)y=C(k.days),_=0,x=l.day>this.minimumMonthLength(l);else if(D&&_!==D)if(S>1)S/=2;else{if(t==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...s})}`);this.compareCalendarDates(w,P)>0&&(y=this.addDaysIso(y,-1)),x=!0,_=0}}}if(r.set(m,y),g&&r.set(g,y),l.year===void 0||l.month===void 0||l.day===void 0||l.monthCode===void 0||this.hasEra&&(l.era===void 0||l.eraYear===void 0))throw new RangeError("Unexpected missing property");if(!x){const P=JSON.stringify({func:"isoToCalendarDate",isoYear:y.year,isoMonth:y.month,isoDay:y.day,id:this.id});r.set(P,l)}return y}temporalToCalendarDate(e,t){const r={year:Y(e,ri),month:Y(e,ui),day:Y(e,gi)};return this.isoToCalendarDate(r,t)}compareCalendarDates(e,t){const r=an(e,["day","month","year"],["day","month","year"]),s=an(t,["day","month","year"],["day","month","year"]);return r.year!==s.year?gu(r.year-s.year):r.month!==s.month?gu(r.month-s.month):r.day!==s.day?gu(r.day-s.day):0}regulateDate(e,t="constrain",r){const s=this.calendarToIsoDate(e,t,r);return this.isoToCalendarDate(s,r)}addDaysIso(e,t){return mu(e.year,e.month,e.day,0,0,0,t,"constrain")}addDaysCalendar(e,t,r){const s=this.calendarToIsoDate(e,"constrain",r),l=this.addDaysIso(s,t);return this.isoToCalendarDate(l,r)}addMonthsCalendar(e,t,r,s){let l=e;const{day:u}=l;for(let n=0,p=M5(t);n<p;n++){const{month:m}=l,g=l,v=t<0?-Math.max(u,this.daysInPreviousMonth(l,s)):this.daysInMonth(l,s),y=this.calendarToIsoDate(l,"constrain",s);let C=this.addDaysIso(y,v);if(l=this.isoToCalendarDate(C,s),t>0){const _=this.monthsInYear(g,s);for(;l.month-1!=m%_;)C=this.addDaysIso(C,-1),l=this.isoToCalendarDate(C,s)}l.day!==u&&(l=this.regulateDate({...l,day:u},"constrain",s))}if(r==="reject"&&l.day!==u)throw new RangeError(`Day ${u} does not exist in resulting calendar month`);return l}addCalendar(e,{years:t=0,months:r=0,weeks:s=0,days:l=0},u,n){const{year:p,day:m,monthCode:g}=e,v=this.adjustCalendarDate({year:p+t,monthCode:g,day:m},n),y=this.addMonthsCalendar(v,r,u,n),C=l+7*s;return this.addDaysCalendar(y,C,n)}untilCalendar(e,t,r,s){let l=0,u=0,n=0,p=0;switch(r){case"day":l=this.calendarDaysUntil(e,t,s);break;case"week":{const m=this.calendarDaysUntil(e,t,s);l=m%7,u=(m-l)/7;break}case"month":case"year":{const m=t.year-e.year,g=t.month-e.month,v=t.day-e.day,y=this.compareCalendarDates(t,e);if(!y)return{years:0,months:0,weeks:0,days:0};r==="year"&&m&&(p=g*y<0||g===0&&v*y<0?m-y:m);let C,_=p?this.addCalendar(e,{years:p},"constrain",s):e;do n+=y,C=_,_=this.addMonthsCalendar(C,y,"constrain",s),_.day!==e.day&&(_=this.regulateDate({..._,day:e.day},"constrain",s));while(this.compareCalendarDates(t,_)*y>=0);n-=y,l=this.calendarDaysUntil(C,t,s);break}}return{years:p,months:n,weeks:u,days:l}}daysInMonth(e,t){const{day:r}=e,s=this.maximumMonthLength(e),l=this.minimumMonthLength(e);if(l===s)return l;const u=r<=s-l?s:l,n=this.calendarToIsoDate(e,"constrain",t),p=this.addDaysIso(n,u),m=this.isoToCalendarDate(p,t),g=this.addDaysIso(p,-m.day);return this.isoToCalendarDate(g,t).day}daysInPreviousMonth(e,t){const{day:r,month:s,year:l}=e;let u={year:s>1?l:l-1,month:s,day:1};const n=s>1?s-1:this.monthsInYear(u,t);u={...u,month:n};const p=this.minimumMonthLength(u),m=this.maximumMonthLength(u);if(p===m)return m;const g=this.calendarToIsoDate(e,"constrain",t),v=this.addDaysIso(g,-r);return this.isoToCalendarDate(v,t).day}startOfCalendarYear(e){return{year:e.year,month:1,monthCode:"M01",day:1}}startOfCalendarMonth(e){return{year:e.year,month:e.month,day:1}}calendarDaysUntil(e,t,r){const s=this.calendarToIsoDate(e,"constrain",r),l=this.calendarToIsoDate(t,"constrain",r);return this.isoDaysUntil(s,l)}isoDaysUntil(e,t){return wb(e.year,e.month,e.day,t.year,t.month,t.day,"day").days}monthDayFromFields(e,t,r){let s,l,u,n,p,{year:m,month:g,monthCode:v,day:y,era:C,eraYear:_}=e;if(v===void 0){if(m===void 0&&(C===void 0||_===void 0))throw new TypeError("`monthCode`, `year`, or `era` and `eraYear` is required");({monthCode:v,year:m}=this.adjustCalendarDate({year:m,month:g,monthCode:v,day:y,era:C,eraYear:_},r,t))}const{year:w}=this.isoToCalendarDate({year:1972,month:1,day:1},r);for(let k=0;k<100;k++){const S=this.adjustCalendarDate({day:y,monthCode:v,year:w-k},r),x=this.calendarToIsoDate(S,"constrain",r),P=this.isoToCalendarDate(x,r);if({year:s,month:l,day:u}=x,P.monthCode===v&&P.day===y)return{month:l,day:u,year:s};t==="constrain"&&(n===void 0||P.monthCode===n.monthCode&&P.day>n.day)&&(n=P,p=x)}if(t==="constrain"&&p!==void 0)return p;throw new RangeError(`No recent ${this.id} year with monthCode ${v} and day ${y}`)}}class I5 extends dh{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}},this.hasEra=!1}inLeapYear(e){const{year:t}=e;return(7*t+1)%19<7}monthsInYear(e){return this.inLeapYear(e)?13:12}minimumMonthLength(e){return this.minMaxMonthLength(e,"min")}maximumMonthLength(e){return this.minMaxMonthLength(e,"max")}minMaxMonthLength(e,t){const{month:r,year:s}=e,l=this.getMonthCode(s,r),u=mv(this.months).find(p=>p[1].monthCode===l);if(u===void 0)throw new RangeError(`unmatched Hebrew month: ${r}`);const n=u[1].days;return typeof n=="number"?n:n[t]}estimateIsoDate(e){const{year:t}=e;return{year:t-3760,month:1,day:1}}getMonthCode(e,t){return this.inLeapYear({year:e})?t===6?kl(5,!0):kl(t<6?t:t-1):kl(t)}adjustCalendarDate(e,t,r="constrain",s=!1){let{year:l,eraYear:u,month:n,monthCode:p,day:m,monthExtra:g}=e;if(l===void 0&&u!==void 0&&(l=u),u===void 0&&l!==void 0&&(u=l),s){if(g){const v=this.months[g];if(!v)throw new RangeError(`Unrecognized month from formatToParts: ${g}`);n=this.inLeapYear({year:l})?v.leap:v.regular}return p=this.getMonthCode(l,n),{year:l,month:n,day:m,era:void 0,eraYear:u,monthCode:p}}if(this.validateCalendarDate(e),n===void 0)if(p.endsWith("L")){if(p!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${p}`);if(n=6,!this.inLeapYear({year:l})){if(r==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${l} which is not a leap year`);n=5,m=30,p="M05"}}else{n=Mb(p),this.inLeapYear({year:l})&&n>=6&&n++;const v=this.monthsInYear({year:l});if(n<1||n>v)throw new RangeError(`Invalid monthCode: ${p}`)}else if(r==="reject"?(ds(n,1,this.monthsInYear({year:l})),ds(m,1,this.maximumMonthLength({year:l,month:n}))):(n=da(n,1,this.monthsInYear({year:l})),m=da(m,1,this.maximumMonthLength({year:l,month:n}))),p===void 0)p=this.getMonthCode(l,n);else if(this.getMonthCode(l,n)!==p)throw new RangeError(`monthCode ${p} doesn't correspond to month ${n} in Hebrew year ${l}`);return{...e,day:m,month:n,monthCode:p,year:l,eraYear:u}}}class hh extends dh{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425,this.constantEra="ah"}inLeapYear(e,t){return this.daysInMonth({year:e.year,month:12,day:1},t)===30}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}estimateIsoDate(e){const{year:t}=this.adjustCalendarDate(e);return{year:P5(t*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}}class ZT extends hh{constructor(){super(...arguments),this.id="islamic"}}class D5 extends hh{constructor(){super(...arguments),this.id="islamic-umalqura"}}class R5 extends hh{constructor(){super(...arguments),this.id="islamic-tbla"}}class L5 extends hh{constructor(){super(...arguments),this.id="islamic-civil"}}class z5 extends hh{constructor(){super(...arguments),this.id="islamic-rgsa"}}class N5 extends hh{constructor(){super(...arguments),this.id="islamicc"}}class O5 extends dh{constructor(){super(...arguments),this.id="persian",this.calendarType="solar",this.constantEra="ap"}inLeapYear(e,t){return ZT.prototype.inLeapYear.call(this,e,t)}monthsInYear(){return 12}minimumMonthLength(e){const{month:t}=e;return t===12?29:t<=6?31:30}maximumMonthLength(e){const{month:t}=e;return t===12?30:t<=6?31:30}estimateIsoDate(e){const{year:t}=this.adjustCalendarDate(e);return{year:t+621,month:1,day:1}}}class j5 extends dh{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.constantEra="saka",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(e){return XT(e.year+78)}monthsInYear(){return 12}minimumMonthLength(e){return this.getMonthInfo(e).length}maximumMonthLength(e){return this.getMonthInfo(e).length}getMonthInfo(e){const{month:t}=e;let r=this.months[t];if(r===void 0)throw new RangeError(`Invalid month: ${t}`);return this.inLeapYear(e)&&r.leap&&(r=r.leap),r}estimateIsoDate(e){const t=this.adjustCalendarDate(e),r=this.getMonthInfo(t);return mu(t.year+78+(r.nextYear?1:0),r.month,r.day,0,0,0,t.day-1,"constrain")}checkIcuBugs(e){if(this.vulnerableToBceBug&&e.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}}function XT(i){return i%4==0&&(i%100!=0||i%400==0)}class Df extends dh{constructor(e,t){super(),this.calendarType="solar",this.v8IsVulnerableToJulianBug=new Date("+001001-01-01T00:00Z").toLocaleDateString("en-US-u-ca-japanese",{timeZone:"UTC"}).startsWith("12"),this.calendarIsVulnerableToJulianBug=!1,this.id=e;const{eras:r,anchorEra:s}=function(u){let n,p=u;if(p.length===0)throw new RangeError("Invalid era data: eras are required");if(p.length===1&&p[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(p.length===1&&!p[0].name)throw new RangeError("Invalid era data: at least one named era is required");if(p.filter(g=>g.reverseOf!=null).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");p.forEach(g=>{if(g.isAnchor||!g.anchorEpoch&&!g.reverseOf){if(n)throw new RangeError("Invalid era data: cannot have multiple anchor eras");n=g,g.anchorEpoch={year:g.hasYearZero?0:1}}else if(!g.name)throw new RangeError("If era name is blank, it must be the anchor era")}),p=p.filter(g=>g.name),p.forEach(g=>{const{reverseOf:v}=g;if(v){const y=p.find(C=>C.name===v);if(y===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${v}`);g.reverseOf=y,g.anchorEpoch=y.anchorEpoch,g.isoEpoch=y.isoEpoch}g.anchorEpoch.month===void 0&&(g.anchorEpoch.month=1),g.anchorEpoch.day===void 0&&(g.anchorEpoch.day=1)}),A5.call(p,(g,v)=>{if(g.reverseOf)return 1;if(v.reverseOf)return-1;if(!g.isoEpoch||!v.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return v.isoEpoch.year-g.isoEpoch.year});const m=p[p.length-1].reverseOf;if(m&&m!==p[p.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return p.forEach((g,v)=>{g.genericName="era"+(p.length-1-v)}),{eras:p,anchorEra:n||p[0]}}(t);this.anchorEra=s,this.eras=r}inLeapYear(e){const{year:t}=this.estimateIsoDate({month:1,day:1,year:e.year});return XT(t)}monthsInYear(){return 12}minimumMonthLength(e){const{month:t}=e;return t===2?this.inLeapYear(e)?29:28:[4,6,9,11].indexOf(t)>=0?30:31}maximumMonthLength(e){return this.minimumMonthLength(e)}completeEraYear(e){const t=(n,p)=>{const m=e[n];if(m!=null&&m!=p)throw new RangeError(`Input ${n} ${m} doesn't match calculated value ${p}`)},r=n=>{let p;const m={...e,year:n},g=this.eras.find((v,y)=>{if(y===this.eras.length-1){if(v.reverseOf){if(n>0)throw new RangeError(`Signed year ${n} is invalid for era ${v.name}`);return p=v.anchorEpoch.year-n,!0}return p=n-v.anchorEpoch.year+(v.hasYearZero?0:1),!0}return this.compareCalendarDates(m,v.anchorEpoch)>=0&&(p=n-v.anchorEpoch.year+(v.hasYearZero?0:1),!0)});if(!g)throw new RangeError(`Year ${n} was not matched by any era`);return{eraYear:p,era:g.name}};let{year:s,eraYear:l,era:u}=e;if(s!=null)({eraYear:l,era:u}=r(s)),t("era",u),t("eraYear",l);else{if(l==null)throw new RangeError("Either `year` or `eraYear` and `era` are required");{const n=u===void 0?void 0:this.eras.find(p=>p.name===u||p.genericName===u);if(!n)throw new RangeError(`Era ${u} (ISO year ${l}) was not matched by any era`);if(l<1&&n.reverseOf)throw new RangeError(`Years in ${u} era must be positive, not ${s}`);s=n.reverseOf?n.anchorEpoch.year-l:l+n.anchorEpoch.year-(n.hasYearZero?0:1),t("year",s),{eraYear:l,era:u}=r(s)}}return{...e,year:s,eraYear:l,era:u}}adjustCalendarDate(e,t,r="constrain"){let s=e;const{month:l,monthCode:u}=s;return l===void 0&&(s={...s,month:Mb(u)}),this.validateCalendarDate(s),s=this.completeEraYear(s),super.adjustCalendarDate(s,t,r)}estimateIsoDate(e){const t=this.adjustCalendarDate(e),{year:r,month:s,day:l}=t,{anchorEra:u}=this;return Bg(r+u.isoEpoch.year-(u.hasYearZero?0:1),s,l,"constrain")}checkIcuBugs(e){if(this.calendarIsVulnerableToJulianBug&&this.v8IsVulnerableToJulianBug&&oc(e.year,e.month,e.day,1582,10,15)<0)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 1582-10-15 (see https://bugs.chromium.org/p/chromium/issues/detail?id=1173158)`)}}class Pb extends Df{constructor(e,t){super(e,t)}inLeapYear(e){const{year:t}=e;return(t+1)%4==0}monthsInYear(){return 13}minimumMonthLength(e){const{month:t}=e;return t===13?this.inLeapYear(e)?6:5:30}maximumMonthLength(e){return this.minimumMonthLength(e)}}class F5 extends Pb{constructor(){super("ethioaa",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}}])}}class B5 extends Pb{constructor(){super("coptic",[{name:"era1",isoEpoch:{year:284,month:8,day:29}},{name:"era0",reverseOf:"era1"}])}}class $5 extends Pb{constructor(){super("ethiopic",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}},{name:"era1",isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}}class U5 extends Df{constructor(){super("roc",[{name:"minguo",isoEpoch:{year:1912,month:1,day:1}},{name:"before-roc",reverseOf:"minguo"}]),this.calendarIsVulnerableToJulianBug=!0}}class V5 extends Df{constructor(){super("buddhist",[{name:"be",hasYearZero:!0,isoEpoch:{year:-543,month:1,day:1}}]),this.calendarIsVulnerableToJulianBug=!0}}class G5 extends Df{constructor(){super("gregory",[{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}])}reviseIntlEra(e){let{era:t,eraYear:r}=e;return t!=="bc"&&t!=="b"||(t="bce"),t!=="ad"&&t!=="a"||(t="ce"),{era:t,eraYear:r}}}class H5 extends Df{constructor(){super("japanese",[{name:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{name:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{name:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{name:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{name:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}]),this.calendarIsVulnerableToJulianBug=!0,this.eraLength="long"}reviseIntlEra(e,t){const{era:r,eraYear:s}=e,{year:l}=t;return this.eras.find(u=>u.name===r)?{era:r,eraYear:s}:l<1?{era:"bce",eraYear:1-l}:{era:"ce",eraYear:l}}}class KT extends dh{constructor(){super(...arguments),this.calendarType="lunisolar",this.hasEra=!1}inLeapYear(e,t){const r=this.getMonthList(e.year,t);return mv(r).length===13}monthsInYear(e,t){return this.inLeapYear(e,t)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}getMonthList(e,t){if(e===void 0)throw new TypeError("Missing year");const r=JSON.stringify({func:"getMonthList",calendarYear:e,id:this.id}),s=t.get(r);if(s)return s;const l=this.getFormatter(),u=(k,S)=>{const x=YT({isoYear:k,isoMonth:2,isoDay:1}),P=new Date(x);P.setUTCDate(S+1);const D=l.formatToParts(P),T=D.find(q=>q.type==="month").value,I=+D.find(q=>q.type==="day").value;let N=D.find(q=>q.type==="relatedYear");if(N===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return N=+N.value,{calendarMonthString:T,calendarDay:I,calendarYearToVerify:N}};let n=17,{calendarMonthString:p,calendarDay:m,calendarYearToVerify:g}=u(e,n);p!=="1"&&(n+=29,{calendarMonthString:p,calendarDay:m}=u(e,n)),n-=m-5;const v={};let y,C,_=1,w=!1;do({calendarMonthString:p,calendarDay:m,calendarYearToVerify:g}=u(e,n)),y&&(v[C].daysInMonth=y+30-m),g!==e?w=!0:(v[p]={monthIndex:_++},n+=30),y=m,C=p;while(!w);return v[C].daysInMonth=y+30-m,t.set(r,v),v}estimateIsoDate(e){const{year:t,month:r}=e;return{year:t,month:r>=12?12:r+1,day:1}}adjustCalendarDate(e,t,r="constrain",s=!1){let{year:l,month:u,monthExtra:n,day:p,monthCode:m,eraYear:g}=e;if(s){if(l=g,n&&n!=="bis")throw new RangeError(`Unexpected leap month suffix: ${n}`);const v=kl(u,n!==void 0),y=`${u}${n||""}`,C=this.getMonthList(l,t)[y];if(C===void 0)throw new RangeError(`Unmatched month ${y} in Chinese year ${l}`);return u=C.monthIndex,{year:l,month:u,day:p,era:void 0,eraYear:g,monthCode:v}}if(this.validateCalendarDate(e),l===void 0&&(l=g),g===void 0&&(g=l),u===void 0){const v=this.getMonthList(l,t);let y=m.replace("L","bis").slice(1);y[0]==="0"&&(y=y.slice(1));let C=v[y];if(u=C&&C.monthIndex,u===void 0&&m.endsWith("L")&&!Yg.call(["M01L","M12L","M13L"],m)&&r==="constrain"){let _=m.slice(1,-1);_[0]==="0"&&(_=_.slice(1)),C=v[_],C&&({daysInMonth:p,monthIndex:u}=C,m=kl(_))}if(u===void 0)throw new RangeError(`Unmatched month ${m} in Chinese year ${l}`)}else if(m===void 0){const v=this.getMonthList(l,t),y=mv(v),C=y.length;r==="reject"?(ds(u,1,C),ds(p,1,this.maximumMonthLength())):(u=da(u,1,C),p=da(p,1,this.maximumMonthLength()));const _=y.find(([,w])=>w.monthIndex===u);if(_===void 0)throw new RangeError(`Invalid month ${u} in Chinese year ${l}`);m=kl(_[0].replace("bis",""),_[0].indexOf("bis")!==-1)}else{const v=this.getMonthList(l,t);let y=m.replace("L","bis").slice(1);y[0]==="0"&&(y=y.slice(1));const C=v[y];if(!C)throw new RangeError(`Unmatched monthCode ${m} in Chinese year ${l}`);if(u!==C.monthIndex)throw new RangeError(`monthCode ${m} doesn't correspond to month ${u} in Chinese year ${l}`)}return{...e,year:l,eraYear:g,month:u,monthCode:m,day:p}}}class W5 extends KT{constructor(){super(...arguments),this.id="chinese"}}class q5 extends KT{constructor(){super(...arguments),this.id="dangi"}}const Y5={helper:void 0,dateFromFields(i,e,t){const r=Er(e),s=new ur,l=an(i,["day","era","eraYear","month","monthCode","year"],["day"]),{year:u,month:n,day:p}=this.helper.calendarToIsoDate(l,r,s),m=no(u,n,p,t);return s.setObject(m),m},yearMonthFromFields(i,e,t){const r=Er(e),s=new ur,l=an(i,["era","eraYear","month","monthCode","year"],[]),{year:u,month:n,day:p}=this.helper.calendarToIsoDate({...l,day:1},r,s),m=Qp(u,n,t,p);return s.setObject(m),m},monthDayFromFields(i,e,t){const r=Er(e),s=new ur,l=an(i,["day","era","eraYear","month","monthCode","year"],["day"]),{year:u,month:n,day:p}=this.helper.monthDayFromFields(l,r,s),m=Kp(n,p,t,u);return s.setObject(m),m},fields(i){let e=i;return Yg.call(e,"year")&&(e=[...e,"era","eraYear"]),e},mergeFields(i,e){const t={...i},r={...e},{month:s,monthCode:l,year:u,era:n,eraYear:p,...m}=t,{month:g,monthCode:v,year:y,era:C,eraYear:_}=r;return g===void 0&&v===void 0&&(m.month=s,m.monthCode=l),y===void 0&&C===void 0&&_===void 0&&(m.year=u),{...m,...r}},dateAdd(i,e,t,r,s,l,u){const n=ur.getCacheForObject(i),p=this.helper.temporalToCalendarDate(i,n),m=this.helper.addCalendar(p,{years:e,months:t,weeks:r,days:s},l,n),g=this.helper.calendarToIsoDate(m,"constrain",n),{year:v,month:y,day:C}=g,_=no(v,y,C,u);return new ur(n).setObject(_),_},dateUntil(i,e,t){const r=ur.getCacheForObject(i),s=ur.getCacheForObject(e),l=this.helper.temporalToCalendarDate(i,r),u=this.helper.temporalToCalendarDate(e,s);return this.helper.untilCalendar(l,u,t,r)},year(i){const e=ur.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).year},month(i){const e=ur.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).month},day(i){const e=ur.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).day},era(i){if(!this.helper.hasEra)return;const e=ur.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).era},eraYear(i){if(!this.helper.hasEra)return;const e=ur.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).eraYear},monthCode(i){const e=ur.getCacheForObject(i);return this.helper.temporalToCalendarDate(i,e).monthCode},dayOfWeek:i=>yr.iso8601.dayOfWeek(i),dayOfYear(i){const e=ur.getCacheForObject(i),t=this.helper.isoToCalendarDate(i,e),r=this.helper.startOfCalendarYear(t);return this.helper.calendarDaysUntil(r,t,e)+1},weekOfYear:i=>yr.iso8601.weekOfYear(i),daysInWeek:i=>yr.iso8601.daysInWeek(i),daysInMonth(i){const e=ur.getCacheForObject(i),t=this.helper.temporalToCalendarDate(i,e),r=this.helper.maximumMonthLength(t);if(r===this.helper.minimumMonthLength(t))return r;const s=this.helper.startOfCalendarMonth(t),l=this.helper.addMonthsCalendar(s,1,"constrain",e);return this.helper.calendarDaysUntil(s,l,e)},daysInYear(i){let e=i;Kr(e,ri)||(e=Un(e));const t=ur.getCacheForObject(e),r=this.helper.temporalToCalendarDate(e,t),s=this.helper.startOfCalendarYear(r),l=this.helper.addCalendar(s,{years:1},"constrain",t);return this.helper.calendarDaysUntil(s,l,t)},monthsInYear(i){const e=ur.getCacheForObject(i),t=this.helper.temporalToCalendarDate(i,e);return this.helper.monthsInYear(t,e)},inLeapYear(i){let e=i;Kr(e,ri)||(e=Un(e));const t=ur.getCacheForObject(e),r=this.helper.temporalToCalendarDate(e,t);return this.helper.inLeapYear(r,t)}};for(const i of[I5,O5,$5,F5,B5,W5,q5,U5,j5,V5,G5,H5,ZT,D5,R5,L5,z5,N5]){const e=new i;yr[e.id]={...Y5,helper:e}}class Rf{constructor(e,t,r,s=kr()){const l=Vn(e),u=Vn(t),n=Vn(r),p=ns(s);if(arguments.length<3)throw new RangeError("missing argument: isoYear, isoMonth and isoDay are required");fT(this,l,u,n,p)}get calendar(){if(!gn(this))throw new TypeError("invalid receiver");return Y(this,Et)}get era(){if(!gn(this))throw new TypeError("invalid receiver");return zy(Y(this,Et),this)}get eraYear(){if(!gn(this))throw new TypeError("invalid receiver");return Ny(Y(this,Et),this)}get year(){if(!gn(this))throw new TypeError("invalid receiver");return Dy(Y(this,Et),this)}get month(){if(!gn(this))throw new TypeError("invalid receiver");return Ry(Y(this,Et),this)}get monthCode(){if(!gn(this))throw new TypeError("invalid receiver");return Af(Y(this,Et),this)}get day(){if(!gn(this))throw new TypeError("invalid receiver");return Ly(Y(this,Et),this)}get dayOfWeek(){if(!gn(this))throw new TypeError("invalid receiver");return hb(Y(this,Et),this)}get dayOfYear(){if(!gn(this))throw new TypeError("invalid receiver");return pb(Y(this,Et),this)}get weekOfYear(){if(!gn(this))throw new TypeError("invalid receiver");return fb(Y(this,Et),this)}get daysInWeek(){if(!gn(this))throw new TypeError("invalid receiver");return mb(Y(this,Et),this)}get daysInMonth(){if(!gn(this))throw new TypeError("invalid receiver");return Mf(Y(this,Et),this)}get daysInYear(){if(!gn(this))throw new TypeError("invalid receiver");return Oy(Y(this,Et),this)}get monthsInYear(){if(!gn(this))throw new TypeError("invalid receiver");return jy(Y(this,Et),this)}get inLeapYear(){if(!gn(this))throw new TypeError("invalid receiver");return Fy(Y(this,Et),this)}with(e,t){if(!gn(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid argument");ch(e);const r=Y(this,Et),s=Rr(r,["day","month","monthCode","year"]),l=an(e,s,"partial");if(!l)throw new TypeError("invalid date-like");let u=an(this,s,[]);return u=Eu(r,u,l),u=an(u,s,[]),fc(r,u,ln(t))}withCalendar(e){if(!gn(this))throw new TypeError("invalid receiver");const t=ns(e);return new Rf(Y(this,ri),Y(this,ui),Y(this,gi),t)}add(e,t){if(!gn(this))throw new TypeError("invalid receiver");const r=$d(e),s=ln(t);return Ns(Y(this,Et),this,r,s)}subtract(e,t){if(!gn(this))throw new TypeError("invalid receiver");const r=kT($d(e)),s=ln(t);return Ns(Y(this,Et),this,r,s)}until(e,t){if(!gn(this))throw new TypeError("invalid receiver");return fw("until",this,e,t)}since(e,t){if(!gn(this))throw new TypeError("invalid receiver");return fw("since",this,e,t)}equals(e){if(!gn(this))throw new TypeError("invalid receiver");const t=Un(e);for(const r of[ri,ui,gi])if(Y(this,r)!==Y(t,r))return!1;return Pf(Y(this,Et),Y(t,Et))}toString(e){if(!gn(this))throw new TypeError("invalid receiver");return aw(this,Sf(ln(e)))}toJSON(){if(!gn(this))throw new TypeError("invalid receiver");return aw(this)}toLocaleString(e,t){if(!gn(this))throw new TypeError("invalid receiver");return new zu(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDate")}toPlainDateTime(e){if(!gn(this))throw new TypeError("invalid receiver");const t=Y(this,ri),r=Y(this,ui),s=Y(this,gi),l=Y(this,Et);if(e===void 0)return ua(t,r,s,0,0,0,0,0,0,l);const u=Tl(e);return ua(t,r,s,Y(u,Vi),Y(u,Gi),Y(u,Hi),Y(u,Wi),Y(u,qi),Y(u,Yi),l)}toZonedDateTime(e){if(!gn(this))throw new TypeError("invalid receiver");let t,r;if(Zn(e)){const _=e.timeZone;_===void 0?t=js(e):(t=js(_),r=e.plainTime)}else t=js(e);const s=Y(this,ri),l=Y(this,ui),u=Y(this,gi),n=Y(this,Et);let p=0,m=0,g=0,v=0,y=0,C=0;return r!==void 0&&(r=Tl(r),p=Y(r,Vi),m=Y(r,Gi),g=Y(r,Hi),v=Y(r,Wi),y=Y(r,qi),C=Y(r,Yi)),ls(Y(Os(t,ua(s,l,u,p,m,g,v,y,C,n),"compatible"),Li),t,n)}toPlainYearMonth(){if(!gn(this))throw new TypeError("invalid receiver");const e=Y(this,Et);return ku(e,an(this,Rr(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!gn(this))throw new TypeError("invalid receiver");const e=Y(this,Et);return qd(e,an(this,Rr(e,["day","monthCode"]),[]))}getISOFields(){if(!gn(this))throw new TypeError("invalid receiver");return{calendar:Y(this,Et),isoDay:Y(this,gi),isoMonth:Y(this,ui),isoYear:Y(this,ri)}}static from(e,t){const r=ln(t);return gn(e)?(Er(r),no(Y(e,ri),Y(e,ui),Y(e,gi),Y(e,Et))):Un(e,r)}static compare(e,t){const r=Un(e),s=Un(t);return oc(Y(r,ri),Y(r,ui),Y(r,gi),Y(s,ri),Y(s,ui),Y(s,gi))}}Yo(Rf,"Temporal.PlainDate");class Lf{constructor(e,t,r,s=0,l=0,u=0,n=0,p=0,m=0,g=kr()){const v=Vn(e),y=Vn(t),C=Vn(r),_=Vn(s),w=Vn(l),k=Vn(u),S=Vn(n),x=Vn(p),P=Vn(m),D=ns(g);if(arguments.length<3)throw new RangeError("missing argument: isoYear, isoMonth and isoDay are required");mT(this,v,y,C,_,w,k,S,x,P,D)}get calendar(){if(!Ki(this))throw new TypeError("invalid receiver");return Y(this,Et)}get year(){if(!Ki(this))throw new TypeError("invalid receiver");return Dy(Y(this,Et),this)}get month(){if(!Ki(this))throw new TypeError("invalid receiver");return Ry(Y(this,Et),this)}get monthCode(){if(!Ki(this))throw new TypeError("invalid receiver");return Af(Y(this,Et),this)}get day(){if(!Ki(this))throw new TypeError("invalid receiver");return Ly(Y(this,Et),this)}get hour(){if(!Ki(this))throw new TypeError("invalid receiver");return Y(this,Vi)}get minute(){if(!Ki(this))throw new TypeError("invalid receiver");return Y(this,Gi)}get second(){if(!Ki(this))throw new TypeError("invalid receiver");return Y(this,Hi)}get millisecond(){if(!Ki(this))throw new TypeError("invalid receiver");return Y(this,Wi)}get microsecond(){if(!Ki(this))throw new TypeError("invalid receiver");return Y(this,qi)}get nanosecond(){if(!Ki(this))throw new TypeError("invalid receiver");return Y(this,Yi)}get era(){if(!Ki(this))throw new TypeError("invalid receiver");return zy(Y(this,Et),this)}get eraYear(){if(!Ki(this))throw new TypeError("invalid receiver");return Ny(Y(this,Et),this)}get dayOfWeek(){if(!Ki(this))throw new TypeError("invalid receiver");return hb(Y(this,Et),this)}get dayOfYear(){if(!Ki(this))throw new TypeError("invalid receiver");return pb(Y(this,Et),this)}get weekOfYear(){if(!Ki(this))throw new TypeError("invalid receiver");return fb(Y(this,Et),this)}get daysInWeek(){if(!Ki(this))throw new TypeError("invalid receiver");return mb(Y(this,Et),this)}get daysInYear(){if(!Ki(this))throw new TypeError("invalid receiver");return Oy(Y(this,Et),this)}get daysInMonth(){if(!Ki(this))throw new TypeError("invalid receiver");return Mf(Y(this,Et),this)}get monthsInYear(){if(!Ki(this))throw new TypeError("invalid receiver");return jy(Y(this,Et),this)}get inLeapYear(){if(!Ki(this))throw new TypeError("invalid receiver");return Fy(Y(this,Et),this)}with(e,t){if(!Ki(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid argument");ch(e);const r=ln(t),s=Y(this,Et),l=Rr(s,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),u=an(e,l,"partial");if(!u)throw new TypeError("invalid date-time-like");let n=an(this,l,[]);n=Eu(s,n,u),n=an(n,l,[]);const{year:p,month:m,day:g,hour:v,minute:y,second:C,millisecond:_,microsecond:w,nanosecond:k}=kf(s,n,r);return ua(p,m,g,v,y,C,_,w,k,s)}withPlainTime(e){if(!Ki(this))throw new TypeError("invalid receiver");const t=Y(this,ri),r=Y(this,ui),s=Y(this,gi),l=Y(this,Et);if(e===void 0)return ua(t,r,s,0,0,0,0,0,0,l);const u=Tl(e);return ua(t,r,s,Y(u,Vi),Y(u,Gi),Y(u,Hi),Y(u,Wi),Y(u,qi),Y(u,Yi),l)}withPlainDate(e){if(!Ki(this))throw new TypeError("invalid receiver");const t=Un(e),r=Y(t,ri),s=Y(t,ui),l=Y(t,gi);let u=Y(t,Et);const n=Y(this,Vi),p=Y(this,Gi),m=Y(this,Hi),g=Y(this,Wi),v=Y(this,qi),y=Y(this,Yi);return u=vT(Y(this,Et),u),ua(r,s,l,n,p,m,g,v,y,u)}withCalendar(e){if(!Ki(this))throw new TypeError("invalid receiver");const t=ns(e);return new Lf(Y(this,ri),Y(this,ui),Y(this,gi),Y(this,Vi),Y(this,Gi),Y(this,Hi),Y(this,Wi),Y(this,qi),Y(this,Yi),t)}add(e,t){if(!Ki(this))throw new TypeError("invalid receiver");return _w("add",this,e,t)}subtract(e,t){if(!Ki(this))throw new TypeError("invalid receiver");return _w("subtract",this,e,t)}until(e,t){if(!Ki(this))throw new TypeError("invalid receiver");return mw("until",this,e,t)}since(e,t){if(!Ki(this))throw new TypeError("invalid receiver");return mw("since",this,e,t)}round(e){if(!Ki(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?Xd("smallestUnit",e):ln(e),r=Zr(t,"smallestUnit","time",Su,["day"]),s=Ys(t,"halfExpand"),l=Pl(t,{day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[r],!1);let u=Y(this,ri),n=Y(this,ui),p=Y(this,gi),m=Y(this,Vi),g=Y(this,Gi),v=Y(this,Hi),y=Y(this,Wi),C=Y(this,qi),_=Y(this,Yi);return{year:u,month:n,day:p,hour:m,minute:g,second:v,millisecond:y,microsecond:C,nanosecond:_}=Sb(u,n,p,m,g,v,y,C,_,l,r,s),ua(u,n,p,m,g,v,y,C,_,Y(this,Et))}equals(e){if(!Ki(this))throw new TypeError("invalid receiver");const t=uu(e);for(const r of[ri,ui,gi,Vi,Gi,Hi,Wi,qi,Yi])if(Y(this,r)!==Y(t,r))return!1;return Pf(Y(this,Et),Y(t,Et))}toString(e){if(!Ki(this))throw new TypeError("invalid receiver");const t=ln(e),{precision:r,unit:s,increment:l}=Ef(t);return ow(this,r,Sf(t),{unit:s,increment:l,roundingMode:Ys(t,"trunc")})}toJSON(){if(!Ki(this))throw new TypeError("invalid receiver");return ow(this,"auto")}toLocaleString(e,t){if(!Ki(this))throw new TypeError("invalid receiver");return new zu(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDateTime")}toZonedDateTime(e,t){if(!Ki(this))throw new TypeError("invalid receiver");const r=js(e);return ls(Y(Os(r,this,Xp(ln(t))),Li),r,Y(this,Et))}toPlainDate(){if(!Ki(this))throw new TypeError("invalid receiver");return Yd(this)}toPlainYearMonth(){if(!Ki(this))throw new TypeError("invalid receiver");const e=Y(this,Et);return ku(e,an(this,Rr(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!Ki(this))throw new TypeError("invalid receiver");const e=Y(this,Et);return qd(e,an(this,Rr(e,["day","monthCode"]),[]))}toPlainTime(){if(!Ki(this))throw new TypeError("invalid receiver");return gb(this)}getISOFields(){if(!Ki(this))throw new TypeError("invalid receiver");return{calendar:Y(this,Et),isoDay:Y(this,gi),isoHour:Y(this,Vi),isoMicrosecond:Y(this,qi),isoMillisecond:Y(this,Wi),isoMinute:Y(this,Gi),isoMonth:Y(this,ui),isoNanosecond:Y(this,Yi),isoSecond:Y(this,Hi),isoYear:Y(this,ri)}}static from(e,t){const r=ln(t);return Ki(e)?(Er(r),ua(Y(e,ri),Y(e,ui),Y(e,gi),Y(e,Vi),Y(e,Gi),Y(e,Hi),Y(e,Wi),Y(e,qi),Y(e,Yi),Y(e,Et))):uu(e,r)}static compare(e,t){const r=uu(e),s=uu(t);for(const l of[ri,ui,gi,Vi,Gi,Hi,Wi,qi,Yi]){const u=Y(r,l),n=Y(s,l);if(u!==n)return gu(u-n)}return 0}}Yo(Lf,"Temporal.PlainDateTime");class lc{constructor(e=0,t=0,r=0,s=0,l=0,u=0,n=0,p=0,m=0,g=0){const v=Wr(e),y=Wr(t),C=Wr(r),_=Wr(s),w=Wr(l),k=Wr(u),S=Wr(n),x=Wr(p),P=Wr(m),D=Wr(g);Vy(v,y,C,_,w,k,S,x,P,D),Zo(this),Qi(this,As,v),Qi(this,es,y),Qi(this,Ws,C),Qi(this,Ms,_),Qi(this,Ps,w),Qi(this,Is,k),Qi(this,Ds,S),Qi(this,Rs,x),Qi(this,Ls,P),Qi(this,zs,D)}get years(){if(!mr(this))throw new TypeError("invalid receiver");return Y(this,As)}get months(){if(!mr(this))throw new TypeError("invalid receiver");return Y(this,es)}get weeks(){if(!mr(this))throw new TypeError("invalid receiver");return Y(this,Ws)}get days(){if(!mr(this))throw new TypeError("invalid receiver");return Y(this,Ms)}get hours(){if(!mr(this))throw new TypeError("invalid receiver");return Y(this,Ps)}get minutes(){if(!mr(this))throw new TypeError("invalid receiver");return Y(this,Is)}get seconds(){if(!mr(this))throw new TypeError("invalid receiver");return Y(this,Ds)}get milliseconds(){if(!mr(this))throw new TypeError("invalid receiver");return Y(this,Rs)}get microseconds(){if(!mr(this))throw new TypeError("invalid receiver");return Y(this,Ls)}get nanoseconds(){if(!mr(this))throw new TypeError("invalid receiver");return Y(this,zs)}get sign(){if(!mr(this))throw new TypeError("invalid receiver");return Oo(Y(this,As),Y(this,es),Y(this,Ws),Y(this,Ms),Y(this,Ps),Y(this,Is),Y(this,Ds),Y(this,Rs),Y(this,Ls),Y(this,zs))}get blank(){if(!mr(this))throw new TypeError("invalid receiver");return Oo(Y(this,As),Y(this,es),Y(this,Ws),Y(this,Ms),Y(this,Ps),Y(this,Is),Y(this,Ds),Y(this,Rs),Y(this,Ls),Y(this,zs))===0}with(e){if(!mr(this))throw new TypeError("invalid receiver");const t=an(e,["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"],"partial");if(!t)throw new TypeError("invalid duration-like");const{years:r=Y(this,As),months:s=Y(this,es),weeks:l=Y(this,Ws),days:u=Y(this,Ms),hours:n=Y(this,Ps),minutes:p=Y(this,Is),seconds:m=Y(this,Ds),milliseconds:g=Y(this,Rs),microseconds:v=Y(this,Ls),nanoseconds:y=Y(this,zs)}=t;return new lc(r,s,l,u,n,p,m,g,v,y)}negated(){if(!mr(this))throw new TypeError("invalid receiver");return kT(this)}abs(){if(!mr(this))throw new TypeError("invalid receiver");return new lc(Math.abs(Y(this,As)),Math.abs(Y(this,es)),Math.abs(Y(this,Ws)),Math.abs(Y(this,Ms)),Math.abs(Y(this,Ps)),Math.abs(Y(this,Is)),Math.abs(Y(this,Ds)),Math.abs(Y(this,Rs)),Math.abs(Y(this,Ls)),Math.abs(Y(this,zs)))}add(e,t){if(!mr(this))throw new TypeError("invalid receiver");return vw("add",this,e,t)}subtract(e,t){if(!mr(this))throw new TypeError("invalid receiver");return vw("subtract",this,e,t)}round(e){if(!mr(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let t=Y(this,As),r=Y(this,es),s=Y(this,Ws),l=Y(this,Ms),u=Y(this,Ps),n=Y(this,Is),p=Y(this,Ds),m=Y(this,Rs),g=Y(this,Ls),v=Y(this,zs),y=lv(t,r,s,l,u,n,p,m,g,v);const C=typeof e=="string"?Xd("smallestUnit",e):ln(e);let _=Zr(C,"smallestUnit","datetime",void 0),w=!0;_||(w=!1,_="nanosecond"),y=ga(y,_);let k=Zr(C,"largestUnit","datetime",void 0,["auto"]),S=!0;if(k||(S=!1,k=y),k==="auto"&&(k=y),!w&&!S)throw new RangeError("at least one of smallestUnit or largestUnit is required");if(ga(k,_)!==k)throw new RangeError(`largestUnit ${k} cannot be smaller than smallestUnit ${_}`);const x=Ys(C,"halfExpand"),P=db(C,_);let D=gg(C);return{years:t,months:r,weeks:s,days:l}=Ym(t,r,s,l,k,D),{years:t,months:r,weeks:s,days:l,hours:u,minutes:n,seconds:p,milliseconds:m,microseconds:g,nanoseconds:v}=gc(t,r,s,l,u,n,p,m,g,v,P,_,x,D),{years:t,months:r,weeks:s,days:l,hours:u,minutes:n,seconds:p,milliseconds:m,microseconds:g,nanoseconds:v}=zT(t,r,s,l,u,n,p,m,g,v,P,_,x,D),{years:t,months:r,weeks:s,days:l}=function(I,N,q,Z,X,O){let V=I,$=N,L=q,R=Z;const G=zi("%Temporal.Duration%"),U=Oo(V,$,L,R,0,0,0,0,0,0);if(U===0)return{years:V,months:$,weeks:L,days:R};let B,H;O&&(H=Un(O),B=Y(H,Et));const W=new G(U),re=new G(0,U),de=new G(0,0,U);switch(X){case"year":{if(!B)throw new RangeError("a starting point is required for years balancing");let ie,oe,Ee;for({relativeTo:ie,days:oe}=_s(B,H,W);Tn(R)>=Tn(oe);)R-=oe,V+=U,H=ie,{relativeTo:ie,days:oe}=_s(B,H,W);for({relativeTo:ie,days:Ee}=_s(B,H,re);Tn(R)>=Tn(Ee);)R-=Ee,$+=U,H=ie,{relativeTo:ie,days:Ee}=_s(B,H,re);const xe=B.dateAdd;ie=Ns(B,H,W,void 0,xe);const Se=B.dateUntil,K=fs(null);K.largestUnit="month";let Q=pc(B,H,ie,K,Se),ae=Y(Q,es);for(;Tn($)>=Tn(ae);){$-=ae,V+=U,H=ie,ie=Ns(B,H,W,void 0,xe);const _e=fs(null);_e.largestUnit="month",Q=pc(B,H,ie,_e,Se),ae=Y(Q,es)}break}case"month":{if(!B)throw new RangeError("a starting point is required for months balancing");let ie,oe;for({relativeTo:ie,days:oe}=_s(B,H,re);Tn(R)>=Tn(oe);)R-=oe,$+=U,H=ie,{relativeTo:ie,days:oe}=_s(B,H,re);break}case"week":{if(!B)throw new RangeError("a starting point is required for weeks balancing");let ie,oe;for({relativeTo:ie,days:oe}=_s(B,H,de);Tn(R)>=Tn(oe);)R-=oe,L+=U,H=ie,{relativeTo:ie,days:oe}=_s(B,H,de);break}}return{years:V,months:$,weeks:L,days:R}}(t,r,s,l,k,D),wi(D)&&(D=hv(D,t,r,s,0)),{days:l,hours:u,minutes:n,seconds:p,milliseconds:m,microseconds:g,nanoseconds:v}=ma(l,u,n,p,m,g,v,k,D),new lc(t,r,s,l,u,n,p,m,g,v)}total(e){if(!mr(this))throw new TypeError("invalid receiver");let t=Y(this,As),r=Y(this,es),s=Y(this,Ws),l=Y(this,Ms),u=Y(this,Ps),n=Y(this,Is),p=Y(this,Ds),m=Y(this,Rs),g=Y(this,Ls),v=Y(this,zs);if(e===void 0)throw new TypeError("options argument is required");const y=typeof e=="string"?Xd("unit",e):ln(e),C=Zr(y,"unit","datetime",Su),_=gg(y);let w;({years:t,months:r,weeks:s,days:l}=Ym(t,r,s,l,C,_)),wi(_)&&(w=hv(_,t,r,s,0)),{days:l,hours:u,minutes:n,seconds:p,milliseconds:m,microseconds:g,nanoseconds:v}=ma(l,u,n,p,m,g,v,C,w);const{total:k}=gc(t,r,s,l,u,n,p,m,g,v,1,C,"trunc",_);return k}toString(e){if(!mr(this))throw new TypeError("invalid receiver");const t=ln(e),{precision:r,unit:s,increment:l}=Ef(t);if(r==="minute")throw new RangeError('smallestUnit must not be "minute"');return h0(this,r,{unit:s,increment:l,roundingMode:Ys(t,"trunc")})}toJSON(){if(!mr(this))throw new TypeError("invalid receiver");return h0(this)}toLocaleString(e,t){if(!mr(this))throw new TypeError("invalid receiver");return typeof Intl<"u"&&Intl.DurationFormat!==void 0?new Intl.DurationFormat(e,t).format(this):(console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),h0(this))}valueOf(){throw new TypeError("use compare() to compare Temporal.Duration")}static from(e){return mr(e)?new lc(Y(e,As),Y(e,es),Y(e,Ws),Y(e,Ms),Y(e,Ps),Y(e,Is),Y(e,Ds),Y(e,Rs),Y(e,Ls),Y(e,zs)):$d(e)}static compare(e,t,r){const s=$d(e),l=$d(t),u=gg(ln(r)),n=Y(s,As),p=Y(s,es),m=Y(s,Ws);let g=Y(s,Ms);const v=Y(s,Ps),y=Y(s,Is),C=Y(s,Ds),_=Y(s,Rs),w=Y(s,Ls);let k=Y(s,zs);const S=Y(l,As),x=Y(l,es),P=Y(l,Ws);let D=Y(l,Ms);const T=Y(l,Ps),I=Y(l,Is),N=Y(l,Ds),q=Y(l,Rs),Z=Y(l,Ls);let X=Y(l,zs);const O=hw(u,n,p,m,g),V=hw(u,S,x,P,D);n===0&&S===0&&p===0&&x===0&&m===0&&P===0||({days:g}=Ym(n,p,m,g,"day",u),{days:D}=Ym(S,x,P,D,"day",u));const $=Zd(g,v,y,C,_,w,k,O),L=Zd(D,T,I,N,q,Z,X,V);return gu(ue.toNumber(ue.subtract($,L)))}}Yo(lc,"Temporal.Duration");const Z5=Object.create;class Ib{constructor(e,t,r=kr(),s=1972){const l=Vn(e),u=Vn(t),n=ns(r),p=Vn(s);if(arguments.length<2)throw new RangeError("missing argument: isoMonth and isoDay are required");gT(this,l,u,n,p)}get monthCode(){if(!ts(this))throw new TypeError("invalid receiver");return Af(Y(this,Et),this)}get day(){if(!ts(this))throw new TypeError("invalid receiver");return Ly(Y(this,Et),this)}get calendar(){if(!ts(this))throw new TypeError("invalid receiver");return Y(this,Et)}with(e,t){if(!ts(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid argument");ch(e);const r=Y(this,Et),s=Rr(r,["day","month","monthCode","year"]),l=an(e,s,"partial");if(!l)throw new TypeError("invalid month-day-like");let u=an(this,s,[]);return u=Eu(r,u,l),u=an(u,s,[]),qd(r,u,ln(t))}equals(e){if(!ts(this))throw new TypeError("invalid receiver");const t=rw(e);for(const r of[ui,gi,ri])if(Y(this,r)!==Y(t,r))return!1;return Pf(Y(this,Et),Y(t,Et))}toString(e){if(!ts(this))throw new TypeError("invalid receiver");return lw(this,Sf(ln(e)))}toJSON(){if(!ts(this))throw new TypeError("invalid receiver");return lw(this)}toLocaleString(e,t){if(!ts(this))throw new TypeError("invalid receiver");return new zu(e,t).format(this)}valueOf(){throw new TypeError("use equals() to compare Temporal.PlainMonthDay")}toPlainDate(e){if(!ts(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("argument should be an object");const t=Y(this,Et),r=Rr(t,["day","monthCode"]),s=an(this,r,[]),l=Rr(t,["year"]);let u=Eu(t,s,an(e,l,[]));u=an(u,[...new Set([...r,...l])],[]);const n=Z5(null);return n.overflow="reject",fc(t,u,n)}getISOFields(){if(!ts(this))throw new TypeError("invalid receiver");return{calendar:Y(this,Et),isoDay:Y(this,gi),isoMonth:Y(this,ui),isoYear:Y(this,ri)}}static from(e,t){const r=ln(t);return ts(e)?(Er(r),Kp(Y(e,ui),Y(e,gi),Y(e,Et),Y(e,ri))):rw(e,r)}}Yo(Ib,"Temporal.PlainMonthDay");const Db=()=>new(zi("%Temporal.Instant%"))(kb()),Ew=(i,e=nc())=>{const t=js(e),r=ns(i);return Sa(t,Db(),r)},g0=(i=nc())=>{const e=js(i),t=kr();return Sa(e,Db(),t)},kw=(i,e=nc())=>{const t=js(e),r=ns(i);return ls(kb(),t,r)},nc=()=>function(){const e=new rT("en-us");return new(zi("%Temporal.TimeZone%"))(dT(e.resolvedOptions().timeZone))}(),QT={instant:Db,plainDateTime:Ew,plainDateTimeISO:g0,plainDate:(i,e=nc())=>Yd(Ew(i,e)),plainDateISO:(i=nc())=>Yd(g0(i)),plainTimeISO:(i=nc())=>gb(g0(i)),timeZone:nc,zonedDateTime:kw,zonedDateTimeISO:(i=nc())=>kw(kr(),i),[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(QT,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});const X5=Object.assign;function Aw(i,e,t){let r=Y(i,Vi),s=Y(i,Gi),l=Y(i,Hi),u=Y(i,Wi),n=Y(i,qi),p=Y(i,Yi);if(t){const{unit:m,increment:g,roundingMode:v}=t;({hour:r,minute:s,second:l,millisecond:u,microsecond:n,nanosecond:p}=Eb(r,s,l,u,n,p,g,m,v))}return`${ar(r)}:${ar(s)}${By(l,u,n,p,e)}`}class xu{constructor(e=0,t=0,r=0,s=0,l=0,u=0){const n=Vn(e),p=Vn(t),m=Vn(r),g=Vn(s),v=Vn(l),y=Vn(u);Uy(n,p,m,g,v,y),Zo(this),Qi(this,Vi,n),Qi(this,Gi,p),Qi(this,Hi,m),Qi(this,Wi,g),Qi(this,qi,v),Qi(this,Yi,y),Qi(this,Et,kr())}get calendar(){if(!gr(this))throw new TypeError("invalid receiver");return Y(this,Et)}get hour(){if(!gr(this))throw new TypeError("invalid receiver");return Y(this,Vi)}get minute(){if(!gr(this))throw new TypeError("invalid receiver");return Y(this,Gi)}get second(){if(!gr(this))throw new TypeError("invalid receiver");return Y(this,Hi)}get millisecond(){if(!gr(this))throw new TypeError("invalid receiver");return Y(this,Wi)}get microsecond(){if(!gr(this))throw new TypeError("invalid receiver");return Y(this,qi)}get nanosecond(){if(!gr(this))throw new TypeError("invalid receiver");return Y(this,Yi)}with(e,t){if(!gr(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid argument");ch(e);const r=$g(e,"partial"),s=Er(ln(t)),l=$g(this);let{hour:u,minute:n,second:p,millisecond:m,microsecond:g,nanosecond:v}=X5(l,r);return{hour:u,minute:n,second:p,millisecond:m,microsecond:g,nanosecond:v}=Py(u,n,p,m,g,v,s),new xu(u,n,p,m,g,v)}add(e){if(!gr(this))throw new TypeError("invalid receiver");return ww("add",this,e)}subtract(e){if(!gr(this))throw new TypeError("invalid receiver");return ww("subtract",this,e)}until(e,t){if(!gr(this))throw new TypeError("invalid receiver");return gw("until",this,e,t)}since(e,t){if(!gr(this))throw new TypeError("invalid receiver");return gw("since",this,e,t)}round(e){if(!gr(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?Xd("smallestUnit",e):ln(e),r=Zr(t,"smallestUnit","time",Su),s=Ys(t,"halfExpand"),l=Pl(t,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[r],!1);let u=Y(this,Vi),n=Y(this,Gi),p=Y(this,Hi),m=Y(this,Wi),g=Y(this,qi),v=Y(this,Yi);return{hour:u,minute:n,second:p,millisecond:m,microsecond:g,nanosecond:v}=Eb(u,n,p,m,g,v,l,r,s),new xu(u,n,p,m,g,v)}equals(e){if(!gr(this))throw new TypeError("invalid receiver");const t=Tl(e);for(const r of[Vi,Gi,Hi,Wi,qi,Yi])if(Y(this,r)!==Y(t,r))return!1;return!0}toString(e){if(!gr(this))throw new TypeError("invalid receiver");const t=ln(e),{precision:r,unit:s,increment:l}=Ef(t);return Aw(this,r,{unit:s,increment:l,roundingMode:Ys(t,"trunc")})}toJSON(){if(!gr(this))throw new TypeError("invalid receiver");return Aw(this,"auto")}toLocaleString(e,t){if(!gr(this))throw new TypeError("invalid receiver");return new zu(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainTime")}toPlainDateTime(e){if(!gr(this))throw new TypeError("invalid receiver");const t=Un(e),r=Y(t,ri),s=Y(t,ui),l=Y(t,gi),u=Y(t,Et);return ua(r,s,l,Y(this,Vi),Y(this,Gi),Y(this,Hi),Y(this,Wi),Y(this,qi),Y(this,Yi),u)}toZonedDateTime(e){if(!gr(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid argument");const t=e.plainDate;if(t===void 0)throw new TypeError("missing date property");const r=Un(t),s=e.timeZone;if(s===void 0)throw new TypeError("missing timeZone property");const l=js(s),u=Y(r,ri),n=Y(r,ui),p=Y(r,gi),m=Y(r,Et),g=Y(this,Vi),v=Y(this,Gi),y=Y(this,Hi),C=Y(this,Wi),_=Y(this,qi),w=Y(this,Yi);return ls(Y(Os(l,new(zi("%Temporal.PlainDateTime%"))(u,n,p,g,v,y,C,_,w,m),"compatible"),Li),l,m)}getISOFields(){if(!gr(this))throw new TypeError("invalid receiver");return{calendar:Y(this,Et),isoHour:Y(this,Vi),isoMicrosecond:Y(this,qi),isoMillisecond:Y(this,Wi),isoMinute:Y(this,Gi),isoNanosecond:Y(this,Yi),isoSecond:Y(this,Hi)}}static from(e,t){const r=Er(ln(t));return gr(e)?new xu(Y(e,Vi),Y(e,Gi),Y(e,Hi),Y(e,Wi),Y(e,qi),Y(e,Yi)):Tl(e,r)}static compare(e,t){const r=Tl(e),s=Tl(t);for(const l of[Vi,Gi,Hi,Wi,qi,Yi]){const u=Y(r,l),n=Y(s,l);if(u!==n)return gu(u-n)}return 0}}Yo(xu,"Temporal.PlainTime");class Rb{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: identifier is required");const t=yb(e);Zo(this),Qi(this,ec,t)}get id(){if(!Do(this))throw new TypeError("invalid receiver");return Fi(this)}getOffsetNanosecondsFor(e){if(!Do(this))throw new TypeError("invalid receiver");const t=Lo(e),r=Y(this,ec);return Ip(r)?Au(r):_l(Y(t,Li),r)}getOffsetStringFor(e){if(!Do(this))throw new TypeError("invalid receiver");return cv(this,Lo(e))}getPlainDateTimeFor(e,t=kr()){return Sa(this,Lo(e),ns(t))}getInstantFor(e,t){if(!Do(this))throw new TypeError("invalid receiver");return Os(this,uu(e),Xp(ln(t)))}getPossibleInstantsFor(e){if(!Do(this))throw new TypeError("invalid receiver");const t=uu(e),r=zi("%Temporal.Instant%"),s=Y(this,ec);if(Ip(s)){const l=mc(Y(t,ri),Y(t,ui),Y(t,gi),Y(t,Vi),Y(t,Gi),Y(t,Hi),Y(t,Wi),Y(t,qi),Y(t,Yi));if(l===null)throw new RangeError("DateTime outside of supported range");const u=Au(s);return[new r(ue.subtract(l,ue.BigInt(u)))]}return function(u,n,p,m,g,v,y,C,_,w){const k=mc(n,p,m,g,v,y,C,_,w);if(k===null)throw new RangeError("DateTime outside of supported range");let S=ue.subtract(k,hc);ue.lessThan(S,Wp)&&(S=k);let x=ue.add(k,hc);ue.greaterThan(x,qp)&&(x=k);const P=_l(S,u),D=_l(x,u);return(P===D?[P]:[P,D]).map(T=>{const I=ue.subtract(k,ue.BigInt(T)),N=TT(I,u);if(n===N.year&&p===N.month&&m===N.day&&g===N.hour&&v===N.minute&&y===N.second&&C===N.millisecond&&_===N.microsecond&&w===N.nanosecond)return I}).filter(T=>T!==void 0)}(s,Y(t,ri),Y(t,ui),Y(t,gi),Y(t,Vi),Y(t,Gi),Y(t,Hi),Y(t,Wi),Y(t,qi),Y(t,Yi)).map(l=>new r(l))}getNextTransition(e){if(!Do(this))throw new TypeError("invalid receiver");const t=Lo(e),r=Y(this,ec);if(Ip(r)||r==="UTC")return null;let s=Y(t,Li);const l=zi("%Temporal.Instant%");return s=function(n,p){const m=ue.add(n,oT),g=dw(ST(),m);let v=dw(aT,n);const y=_l(v,p);let C=v,_=y;for(;y===_&&ue.lessThan(ue.BigInt(v),g);)C=ue.add(v,lT),_=_l(C,p),y===_&&(v=C);return y===_?null:jT(w=>_l(w,p),v,C,y,_)}(s,r),s===null?null:new l(s)}getPreviousTransition(e){if(!Do(this))throw new TypeError("invalid receiver");const t=Lo(e),r=Y(this,ec);if(Ip(r)||r==="UTC")return null;let s=Y(t,Li);const l=zi("%Temporal.Instant%");return s=ET(s,r),s===null?null:new l(s)}toString(){if(!Do(this))throw new TypeError("invalid receiver");return Fi(Y(this,ec))}toJSON(){if(!Do(this))throw new TypeError("invalid receiver");return Fi(this)}static from(e){return js(e)}}Yo(Rb,"Temporal.TimeZone");const K5=Object.create;class Lb{constructor(e,t,r=kr(),s=1){const l=Vn(e),u=Vn(t),n=ns(r),p=Vn(s);if(arguments.length<2)throw new RangeError("missing argument: isoYear and isoMonth are required");yT(this,l,u,n,p)}get year(){if(!An(this))throw new TypeError("invalid receiver");return Dy(Y(this,Et),this)}get month(){if(!An(this))throw new TypeError("invalid receiver");return Ry(Y(this,Et),this)}get monthCode(){if(!An(this))throw new TypeError("invalid receiver");return Af(Y(this,Et),this)}get calendar(){if(!An(this))throw new TypeError("invalid receiver");return Y(this,Et)}get era(){if(!An(this))throw new TypeError("invalid receiver");return zy(Y(this,Et),this)}get eraYear(){if(!An(this))throw new TypeError("invalid receiver");return Ny(Y(this,Et),this)}get daysInMonth(){if(!An(this))throw new TypeError("invalid receiver");return Mf(Y(this,Et),this)}get daysInYear(){if(!An(this))throw new TypeError("invalid receiver");return Oy(Y(this,Et),this)}get monthsInYear(){if(!An(this))throw new TypeError("invalid receiver");return jy(Y(this,Et),this)}get inLeapYear(){if(!An(this))throw new TypeError("invalid receiver");return Fy(Y(this,Et),this)}with(e,t){if(!An(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid argument");ch(e);const r=Y(this,Et),s=Rr(r,["month","monthCode","year"]),l=an(e,s,"partial");if(!l)throw new TypeError("invalid year-month-like");let u=an(this,s,[]);return u=Eu(r,u,l),u=an(u,s,[]),ku(r,u,ln(t))}add(e,t){if(!An(this))throw new TypeError("invalid receiver");return Cw("add",this,e,t)}subtract(e,t){if(!An(this))throw new TypeError("invalid receiver");return Cw("subtract",this,e,t)}until(e,t){if(!An(this))throw new TypeError("invalid receiver");return yw("until",this,e,t)}since(e,t){if(!An(this))throw new TypeError("invalid receiver");return yw("since",this,e,t)}equals(e){if(!An(this))throw new TypeError("invalid receiver");const t=Mp(e);for(const r of[ri,ui,gi])if(Y(this,r)!==Y(t,r))return!1;return Pf(Y(this,Et),Y(t,Et))}toString(e){if(!An(this))throw new TypeError("invalid receiver");return cw(this,Sf(ln(e)))}toJSON(){if(!An(this))throw new TypeError("invalid receiver");return cw(this)}toLocaleString(e,t){if(!An(this))throw new TypeError("invalid receiver");return new zu(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainYearMonth")}toPlainDate(e){if(!An(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("argument should be an object");const t=Y(this,Et),r=Rr(t,["monthCode","year"]),s=an(this,r,[]),l=Rr(t,["day"]);let u=Eu(t,s,an(e,l,[]));u=an(u,[...new Set([...r,...l])],[]);const n=K5(null);return n.overflow="reject",fc(t,u,n)}getISOFields(){if(!An(this))throw new TypeError("invalid receiver");return{calendar:Y(this,Et),isoDay:Y(this,gi),isoMonth:Y(this,ui),isoYear:Y(this,ri)}}static from(e,t){const r=ln(t);return An(e)?(Er(r),Qp(Y(e,ri),Y(e,ui),Y(e,Et),Y(e,gi))):Mp(e,r)}static compare(e,t){const r=Mp(e),s=Mp(t);return oc(Y(r,ri),Y(r,ui),Y(r,gi),Y(s,ri),Y(s,ui),Y(s,gi))}}Yo(Lb,"Temporal.PlainYearMonth");class zb{constructor(e,t,r=kr()){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");xT(this,zp(e),js(t),ns(r))}get calendar(){if(!wi(this))throw new TypeError("invalid receiver");return Y(this,Et)}get timeZone(){if(!wi(this))throw new TypeError("invalid receiver");return Y(this,Dn)}get year(){if(!wi(this))throw new TypeError("invalid receiver");return Dy(Y(this,Et),Xn(this))}get month(){if(!wi(this))throw new TypeError("invalid receiver");return Ry(Y(this,Et),Xn(this))}get monthCode(){if(!wi(this))throw new TypeError("invalid receiver");return Af(Y(this,Et),Xn(this))}get day(){if(!wi(this))throw new TypeError("invalid receiver");return Ly(Y(this,Et),Xn(this))}get hour(){if(!wi(this))throw new TypeError("invalid receiver");return Y(Xn(this),Vi)}get minute(){if(!wi(this))throw new TypeError("invalid receiver");return Y(Xn(this),Gi)}get second(){if(!wi(this))throw new TypeError("invalid receiver");return Y(Xn(this),Hi)}get millisecond(){if(!wi(this))throw new TypeError("invalid receiver");return Y(Xn(this),Wi)}get microsecond(){if(!wi(this))throw new TypeError("invalid receiver");return Y(Xn(this),qi)}get nanosecond(){if(!wi(this))throw new TypeError("invalid receiver");return Y(Xn(this),Yi)}get era(){if(!wi(this))throw new TypeError("invalid receiver");return zy(Y(this,Et),Xn(this))}get eraYear(){if(!wi(this))throw new TypeError("invalid receiver");return Ny(Y(this,Et),Xn(this))}get epochSeconds(){if(!wi(this))throw new TypeError("invalid receiver");const e=Y(this,Li);return ue.toNumber(ue.divide(e,Sl))}get epochMilliseconds(){if(!wi(this))throw new TypeError("invalid receiver");const e=Y(this,Li);return ue.toNumber(ue.divide(e,$a))}get epochMicroseconds(){if(!wi(this))throw new TypeError("invalid receiver");const e=Y(this,Li);return Wg(ue.divide(e,Rn))}get epochNanoseconds(){if(!wi(this))throw new TypeError("invalid receiver");return Wg(Y(this,Li))}get dayOfWeek(){if(!wi(this))throw new TypeError("invalid receiver");return hb(Y(this,Et),Xn(this))}get dayOfYear(){if(!wi(this))throw new TypeError("invalid receiver");return pb(Y(this,Et),Xn(this))}get weekOfYear(){if(!wi(this))throw new TypeError("invalid receiver");return fb(Y(this,Et),Xn(this))}get hoursInDay(){if(!wi(this))throw new TypeError("invalid receiver");const e=Xn(this),t=zi("%Temporal.PlainDateTime%"),r=Y(e,ri),s=Y(e,ui),l=Y(e,gi),u=new t(r,s,l,0,0,0,0,0,0),n=mu(r,s,l,0,0,0,1,"reject"),p=new t(n.year,n.month,n.day,0,0,0,0,0,0),m=Y(this,Dn),g=Y(Os(m,u,"compatible"),Li),v=Y(Os(m,p,"compatible"),Li);return ue.toNumber(ue.subtract(v,g))/36e11}get daysInWeek(){if(!wi(this))throw new TypeError("invalid receiver");return mb(Y(this,Et),Xn(this))}get daysInMonth(){if(!wi(this))throw new TypeError("invalid receiver");return Mf(Y(this,Et),Xn(this))}get daysInYear(){if(!wi(this))throw new TypeError("invalid receiver");return Oy(Y(this,Et),Xn(this))}get monthsInYear(){if(!wi(this))throw new TypeError("invalid receiver");return jy(Y(this,Et),Xn(this))}get inLeapYear(){if(!wi(this))throw new TypeError("invalid receiver");return Fy(Y(this,Et),Xn(this))}get offset(){if(!wi(this))throw new TypeError("invalid receiver");return cv(Y(this,Dn),Y(this,ws))}get offsetNanoseconds(){if(!wi(this))throw new TypeError("invalid receiver");return xo(Y(this,Dn),Y(this,ws))}with(e,t){if(!wi(this))throw new TypeError("invalid receiver");if(!Zn(e))throw new TypeError("invalid zoned-date-time-like");ch(e);const r=ln(t),s=Xp(r),l=ov(r,"prefer"),u=Y(this,Dn),n=Y(this,Et),p=av(Rr(n,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),"offset"),m=an(e,p,"partial"),g=av(p,"timeZone");let v=an(this,g,["timeZone","offset"]);v=Eu(n,v,m),v=an(v,g,["timeZone","offset"]);let{year:y,month:C,day:_,hour:w,minute:k,second:S,millisecond:x,microsecond:P,nanosecond:D}=kf(n,v,r);return ls(Ug(y,C,_,w,k,S,x,P,D,"option",Au(v.offset),u,s,l,!1),Y(this,Dn),n)}withPlainDate(e){if(!wi(this))throw new TypeError("invalid receiver");const t=Un(e),r=Y(t,ri),s=Y(t,ui),l=Y(t,gi);let u=Y(t,Et);const n=Xn(this),p=Y(n,Vi),m=Y(n,Gi),g=Y(n,Hi),v=Y(n,Wi),y=Y(n,qi),C=Y(n,Yi);u=vT(Y(this,Et),u);const _=Y(this,Dn);return ls(Y(Os(_,new(zi("%Temporal.PlainDateTime%"))(r,s,l,p,m,g,v,y,C,u),"compatible"),Li),_,u)}withPlainTime(e){if(!wi(this))throw new TypeError("invalid receiver");const t=zi("%Temporal.PlainTime%"),r=e===void 0?new t:Tl(e),s=Xn(this),l=Y(s,ri),u=Y(s,ui),n=Y(s,gi),p=Y(this,Et),m=Y(r,Vi),g=Y(r,Gi),v=Y(r,Hi),y=Y(r,Wi),C=Y(r,qi),_=Y(r,Yi),w=Y(this,Dn);return ls(Y(Os(w,new(zi("%Temporal.PlainDateTime%"))(l,u,n,m,g,v,y,C,_,p),"compatible"),Li),w,p)}withTimeZone(e){if(!wi(this))throw new TypeError("invalid receiver");const t=js(e);return ls(Y(this,Li),t,Y(this,Et))}withCalendar(e){if(!wi(this))throw new TypeError("invalid receiver");const t=ns(e);return ls(Y(this,Li),Y(this,Dn),t)}add(e,t){if(!wi(this))throw new TypeError("invalid receiver");return Tw("add",this,e,t)}subtract(e,t){if(!wi(this))throw new TypeError("invalid receiver");return Tw("subtract",this,e,t)}until(e,t){if(!wi(this))throw new TypeError("invalid receiver");return xw("until",this,e,t)}since(e,t){if(!wi(this))throw new TypeError("invalid receiver");return xw("since",this,e,t)}round(e){if(!wi(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?Xd("smallestUnit",e):ln(e),r=Zr(t,"smallestUnit","time",Su,["day"]),s=Ys(t,"halfExpand"),l=Pl(t,{day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[r],!1),u=Xn(this);let n=Y(u,ri),p=Y(u,ui),m=Y(u,gi),g=Y(u,Vi),v=Y(u,Gi),y=Y(u,Hi),C=Y(u,Wi),_=Y(u,qi),w=Y(u,Yi);const k=zi("%Temporal.PlainDateTime%"),S=Y(this,Dn),x=Y(this,Et),P=Os(S,new k(Y(u,ri),Y(u,ui),Y(u,gi),0,0,0,0,0,0),"compatible"),D=Ua(P,S,x,0,0,0,1,0,0,0,0,0,0),T=ue.subtract(D,ue.BigInt(Y(P,Li)));if(ue.equal(T,Tr))throw new RangeError("cannot round a ZonedDateTime in a calendar with zero-length days");return{year:n,month:p,day:m,hour:g,minute:v,second:y,millisecond:C,microsecond:_,nanosecond:w}=Sb(n,p,m,g,v,y,C,_,w,l,r,s,ue.toNumber(T)),ls(Ug(n,p,m,g,v,y,C,_,w,"option",xo(S,Y(this,ws)),S,"compatible","prefer",!1),S,Y(this,Et))}equals(e){if(!wi(this))throw new TypeError("invalid receiver");const t=Pp(e),r=Y(this,Li),s=Y(t,Li);return!!ue.equal(ue.BigInt(r),ue.BigInt(s))&&!!bT(Y(this,Dn),Y(t,Dn))&&Pf(Y(this,Et),Y(t,Et))}toString(e){if(!wi(this))throw new TypeError("invalid receiver");const t=ln(e),{precision:r,unit:s,increment:l}=Ef(t),u=Ys(t,"trunc");return uw(this,r,Sf(t),function(p){return yc(p,"timeZoneName",["auto","never"],"auto")}(t),function(p){return yc(p,"offset",["auto","never"],"auto")}(t),{unit:s,increment:l,roundingMode:u})}toLocaleString(e,t){if(!wi(this))throw new TypeError("invalid receiver");return new zu(e,t).format(this)}toJSON(){if(!wi(this))throw new TypeError("invalid receiver");return uw(this,"auto")}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.ZonedDateTime")}startOfDay(){if(!wi(this))throw new TypeError("invalid receiver");const e=Xn(this),t=zi("%Temporal.PlainDateTime%"),r=Y(this,Et),s=new t(Y(e,ri),Y(e,ui),Y(e,gi),0,0,0,0,0,0,r),l=Y(this,Dn);return ls(Y(Os(l,s,"compatible"),Li),l,r)}toInstant(){if(!wi(this))throw new TypeError("invalid receiver");return new(zi("%Temporal.Instant%"))(Y(this,Li))}toPlainDate(){if(!wi(this))throw new TypeError("invalid receiver");return Yd(Xn(this))}toPlainTime(){if(!wi(this))throw new TypeError("invalid receiver");return gb(Xn(this))}toPlainDateTime(){if(!wi(this))throw new TypeError("invalid receiver");return Xn(this)}toPlainYearMonth(){if(!wi(this))throw new TypeError("invalid receiver");const e=Y(this,Et);return ku(e,an(this,Rr(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!wi(this))throw new TypeError("invalid receiver");const e=Y(this,Et);return qd(e,an(this,Rr(e,["day","monthCode"]),[]))}getISOFields(){if(!wi(this))throw new TypeError("invalid receiver");const e=Xn(this),t=Y(this,Dn);return{calendar:Y(this,Et),isoDay:Y(e,gi),isoHour:Y(e,Vi),isoMicrosecond:Y(e,qi),isoMillisecond:Y(e,Wi),isoMinute:Y(e,Gi),isoMonth:Y(e,ui),isoNanosecond:Y(e,Yi),isoSecond:Y(e,Hi),isoYear:Y(e,ri),offset:cv(t,Y(this,ws)),timeZone:t}}static from(e,t){const r=ln(t);return wi(e)?(Er(r),Xp(r),ov(r,"reject"),ls(Y(e,Li),Y(e,Dn),Y(e,Et))):Pp(e,r)}static compare(e,t){const r=Pp(e),s=Pp(t),l=Y(r,Li),u=Y(s,Li);return ue.lessThan(ue.BigInt(l),ue.BigInt(u))?-1:ue.greaterThan(ue.BigInt(l),ue.BigInt(u))?1:0}}function Xn(i){return Sa(Y(i,Dn),Y(i,ws),Y(i,Et))}Yo(zb,"Temporal.ZonedDateTime");var Dr=Object.freeze({__proto__:null,Instant:co,Calendar:Zg,PlainDate:Rf,PlainDateTime:Lf,Duration:lc,PlainMonthDay:Ib,Now:QT,PlainTime:xu,TimeZone:Rb,PlainYearMonth:Lb,ZonedDateTime:zb});const Q5=[co,Zg,Rf,Lf,lc,Ib,xu,Rb,Lb,zb];for(const i of Q5){const e=Object.getOwnPropertyDescriptor(i,"prototype");(e.configurable||e.enumerable||e.writable)&&(e.configurable=!1,e.enumerable=!1,e.writable=!1,Object.defineProperty(i,"prototype",e))}let J5=class extends eM{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const r=this.options;this.options=this.client.defaultMutationOptions(e),tM(r,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(t=this.currentMutation)==null||t.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const t={listeners:!0};e.type==="success"?t.onSuccess=!0:e.type==="error"&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:iM(),t={...e,isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){mC.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var t,r,s,l;(t=(r=this.mutateOptions).onSuccess)==null||t.call(r,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(s=(l=this.mutateOptions).onSettled)==null||s.call(l,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var u,n,p,m;(u=(n=this.mutateOptions).onError)==null||u.call(n,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(p=(m=this.mutateOptions).onSettled)==null||p.call(m,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(({listener:g})=>{g(this.currentResult)})})}};function JT(i,e,t){const r=nM(i,e,t),s=_y({context:r.context}),[l]=Ue.useState(()=>new J5(s,r));Ue.useEffect(()=>{l.setOptions(r)},[l,r]);const u=rM(Ue.useCallback(p=>l.subscribe(mC.batchCalls(p)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),n=Ue.useCallback((p,m)=>{l.mutate(p,m).catch(eI)},[l]);if(u.error&&sM(l.options.useErrorBoundary,[u.error]))throw u.error;return{...u,mutate:n,mutateAsync:u.mutate}}function eI(){}const tI=i=>{let{execute:e,variables:t,singular:r,immediate:s,onComplete:l,onError:u}=i;const[n]=gC(e),[p,m]=Ue.useState({called:!!s,loading:!!s}),g=Ue.useRef(t),v=Ue.useRef([]),y=Ue.useCallback(()=>{v.current.forEach(w=>w.abort()),v.current=[]},[]),C=Ue.useCallback(()=>{y(),m(w=>({called:w.called,loading:!1,error:new aM({type:"aborted",message:"Aborted"})}))},[y]),_=Ue.useCallback(function(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};m(x=>!x.called||!x.loading?{called:!0,loading:!0}:x),r&&y();const k=new AbortController;v.current.push(k),g.current={...g.current,...w};const S={variables:g.current,signal:k.signal,onComplete:l,onError:u};return n(S).then(x=>k.signal.aborted?new Promise(()=>{}):(m({called:!0,loading:!1,data:x}),x)).catch(x=>(k.signal.aborted||m({called:!0,loading:!1,error:x}),new Promise(()=>{})))},[y,l,u,r,n]);return Ue.useEffect(()=>(s&&_(),y),[]),{refetch:_,abort:C,...p}},iI={},eS=function(i){let{onComplete:e,onError:t,variables:r=iI,lazy:s=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l=ah(),[u]=gC(i,{warn:!0,name:"mutation"}),n=Ue.useCallback(C=>l.mutate(u,C),[l,u]),{refetch:p,called:m,loading:g,error:v,data:y}=tI({execute:n,variables:r,singular:!1,immediate:!s,onComplete:e,onError:t});return[p,{engine:l,called:m,loading:g,error:v,data:y}]},tS=i=>{let{children:e,open:t,dataTest:r}=i;return Ae.createElement("div",{"data-test":r,className:"jsx-3677374542 "+(Br({open:t})||"")},e,Ae.createElement(jt,{id:"3677374542"},["div.jsx-3677374542{height:0;overflow:hidden;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".open.jsx-3677374542{height:auto;}"]))};tS.propTypes={children:me.node,dataTest:me.string,open:me.bool};const nI=()=>Ae.createElement("div",{className:"jsx-2503342345"},Ae.createElement(jt,{id:"2503342345"},["div.jsx-2503342345{width:24px;}"])),rI=()=>Ae.createElement("div",{className:"nodeArrow"},Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"jsx-4098137027"},Ae.createElement("path",{d:"M15.7041 10.3329L12.1495 14.3318C12.0699 14.4213 11.9301 14.4213 11.8505 14.3318L8.29589 10.3329C8.18124 10.2039 8.2728 10 8.44537 10H15.5546C15.7272 10 15.8188 10.2039 15.7041 10.3329Z",className:"jsx-4098137027"}),Ae.createElement(jt,{id:"4098137027"},["svg.jsx-4098137027{fill:inherit;height:24px;width:24px;vertical-align:middle;pointer-events:none;}"]))),iS=i=>{let{open:e,onOpen:t,onClose:r,dataTest:s}=i;const l=e?r:t;return Ae.createElement("div",{"data-test":s,onClick:u=>l&&l({open:!e},u),className:jt.dynamic([["375729792",[We.grey400,We.grey900,We.grey100]]])+" "+(Br({open:e})||"")},Ae.createElement("span",{className:jt.dynamic([["375729792",[We.grey400,We.grey900,We.grey100]]])},Ae.createElement(rI,null)),Ae.createElement(jt,{id:"375729792",dynamic:[We.grey400,We.grey900,We.grey100]},["div.__jsx-style-dynamic-selector{width:24px;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",`div.__jsx-style-dynamic-selector:after{background:${We.grey400};height:calc(100% - 24px);inset-inline-start:12px;position:absolute;top:15px;width:1px;z-index:1;}`,".open.__jsx-style-dynamic-selector:after{content:'';}",`span.__jsx-style-dynamic-selector{display:block;position:relative;z-index:2;fill:${We.grey900};}`,"div.__jsx-style-dynamic-selector .nodeArrow{vertical-align:top;-webkit-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg);-webkit-transition:-webkit-transform 0.1s ease-out;-webkit-transition:transform 0.1s ease-out;transition:transform 0.1s ease-out;}","div.__jsx-style-dynamic-selector .nodeArrow:dir(rtl){-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}",".open.__jsx-style-dynamic-selector .nodeArrow{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}",".open.__jsx-style-dynamic-selector .nodeArrow:dir(rtl){-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}",`div.__jsx-style-dynamic-selector:hover{cursor:pointer;border-radius:3px;background:${We.grey100};}`,"div.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector:after{background:#bcc8d4;}"]))};iS.propTypes={dataTest:me.string.isRequired,open:me.bool,onClose:me.func,onOpen:me.func};const nS=i=>{let{open:e,className:t,component:r,children:s,icon:l,onOpen:u,onClose:n,dataTest:p="dhis2-uicore-node"}=i;const m=!!Ae.Children.toArray(s).filter(y=>y).length,g=!l&&m,v=!l&&!m;return Ae.createElement("div",{"data-test":p,className:"jsx-1433072554 "+(Br("node",t)||"")},l&&Ae.createElement("div",{"data-test":`${p}-icon`,className:"jsx-1433072554"},l),g&&Ae.createElement(iS,{open:e,onOpen:u,onClose:n,dataTest:`${p}-toggle`}),v&&Ae.createElement(nI,null),Ae.createElement("div",{"data-test":`${p}-content`,className:"jsx-1433072554"},Ae.createElement("div",{"data-test":`${p}-label`,className:"jsx-1433072554"},r),Ae.createElement(tS,{open:e,dataTest:`${p}-leaves`},s)),Ae.createElement(jt,{id:"1433072554"},[".node.jsx-1433072554{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}"]))};nS.propTypes={children:me.node,className:me.string,component:me.element,dataTest:me.string,icon:me.node,open:me.bool,onClose:me.func,onOpen:me.func};const rS=(i,e)=>i.some(r=>e===r?!0:r.startsWith(`${e}/`)),sI=(i,e)=>i.replace(new RegExp(`^.*(/${e})`),"$1"),aI=i=>[...i].sort((e,t)=>e.displayName.localeCompare(t.displayName)),oI={"No children match filter":"","Could not load children":"تعذر تحميل الأبناء","Error: {{ ERRORMESSAGE }}":"خطأ: {{ ERRORMESSAGE }}"},lI={"No children match filter":"Filtru neodpovídají žádné podřízené","Could not load children":"Nelze načíst podřazené","Error: {{ ERRORMESSAGE }}":"Chyba: {{ ERRORMESSAGE }}"},cI={"No children match filter":"No children match filter","Could not load children":"Could not load children","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},uI={"No children match filter":"Sin filtros de coincidencia en los elementos inferiores","Could not load children":"No se pudo cargar los elementos inferiores","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},dI={"No children match filter":"Ningún descendiente coincide con el filtro","Could not load children":"No se han podido cargar los descendientes","Error: {{ ERRORMESSAGE }}":"Error: {{ ERRORMESSAGE }}"},hI={"No children match filter":"","Could not load children":"","Error: {{ ERRORMESSAGE }}":"Erreur : {{ ERRORMESSAGE }}"},pI={"No children match filter":"ບໍ່ພົບເດັກນ້ອຍທີ່ກົງກັບຕົວກອງ","Could not load children":"ບໍ່ສາມາດໂຫຼດເດັກນ້ອຍໄດ້","Error: {{ ERRORMESSAGE }}":"ຂໍ້ຜິດພາດ {{ ERRORMESSAGE }}"},fI={"No children match filter":"Ingen underenheter matcher filter","Could not load children":"Kunne ikke laste underordnede enheter","Error: {{ ERRORMESSAGE }}":"Feil: {{ ERRORMESSAGE }}"},mI={"No children match filter":"Er komen geen kinderen overeen met het filter","Could not load children":"Kan kinderen niet laden","Error: {{ ERRORMESSAGE }}":"Fout: {{ ERRORMESSAGE }}"},gI={"No children match filter":"Nenhum filho corresponde ao filtro","Could not load children":"Não foi possível carregar as crianças","Error: {{ ERRORMESSAGE }}":"Erro: {{ ERRORMESSAGE }}"},yI={"No children match filter":"Нет дочерних единиц, соответствующих фильтру","Could not load children":"¨Не удалось загрузить дочерние единицы","Error: {{ ERRORMESSAGE }}":"Ошибка: {{ ERRORMESSAGE }}"},xI={"No children match filter":"Немає дочірніх об'єктів, які відповідають фільтру","Could not load children":"Не вдалося завантажити дочірні об'єкти","Error: {{ ERRORMESSAGE }}":"Помилка: {{ ERRORMESSAGE }}"},vI={"No children match filter":"","Could not load children":"Bolalar yuklanmadi","Error: {{ ERRORMESSAGE }}":""},bI={"No children match filter":"Фильтрга мос бўлган авлод мавжуд эмас","Could not load children":"Болалар юкланмади","Error: {{ ERRORMESSAGE }}":"Хатолик: {{ ERRORMESSAGE }}"},_I={"No children match filter":"","Could not load children":"Bolalar yuklanmadi","Error: {{ ERRORMESSAGE }}":""},wI={"No children match filter":"Không có đơn vị con phù hợp với bộ lọc","Could not load children":"Không thể tải đơn vị con","Error: {{ ERRORMESSAGE }}":"Lỗi: {{ ERRORMESSAGE }}"},CI={"No children match filter":"没有下属匹配过滤器","Could not load children":"无法加载下属","Error: {{ ERRORMESSAGE }}":"错误：{{ ERRORMESSAGE }}"},TI={"No children match filter":"","Could not load children":"无法加载下属","Error: {{ ERRORMESSAGE }}":""},Cs="default";it.addResources("ar",Cs,oI);it.addResources("cs",Cs,lI);it.addResources("en",Cs,cI);it.addResources("es",Cs,uI);it.addResources("es_419",Cs,dI);it.addResources("fr",Cs,hI);it.addResources("lo",Cs,pI);it.addResources("nb",Cs,fI);it.addResources("nl",Cs,mI);it.addResources("pt",Cs,gI);it.addResources("ru",Cs,yI);it.addResources("uk",Cs,xI);it.addResources("uz_Latn",Cs,vI);it.addResources("uz_UZ_Cyrl",Cs,bI);it.addResources("uz_UZ_Latn",Cs,_I);it.addResources("vi",Cs,wI);it.addResources("zh",Cs,CI);it.addResources("zh_CN",Cs,TI);const SI="[a-zA-Z][a-zA-Z0-9]{10}",EI=new RegExp(`(/${SI})+`),Ta=(i,e,t,r,s)=>{if(!EI.test(i[e]))return new Error(`Invalid org unit path \`${i[e]}\` supplied to \`${t}.${s}\``)},sS=i=>{let{children:e,dataTest:t}=i;return Ae.createElement("span",{"data-test":`${t}-error`,className:jt.dynamic([["3198585030",[We.grey800,Jt.dp4,ni.error]]])},e,Ae.createElement(jt,{id:"3198585030",dynamic:[We.grey800,Jt.dp4,ni.error]},[`span.__jsx-style-dynamic-selector{font-size:14px;color:${We.grey800};margin:${Jt.dp4};color:${ni.error};}`]))};sS.propTypes={children:me.any.isRequired,dataTest:me.string.isRequired};const kI=(i,e)=>e.some(t=>{const r=!t.match(new RegExp(`${i}$`)),s=t.match(new RegExp(i));return r&&s}),Nb=i=>{let{checked:e,children:t,onChange:r,loading:s}=i;return Ae.createElement("span",{onClick:l=>{r({checked:!e},l)},className:jt.dynamic([["321503310",[We.grey900,We.teal700]]])+" "+(Br({checked:e,loading:s})||"")},t,Ae.createElement(jt,{id:"321503310",dynamic:[We.grey900,We.teal700]},[`span.__jsx-style-dynamic-selector{background:transparent;border-radius:3px;color:${We.grey900};cursor:pointer;display:inline-block;font-size:14px;line-height:24px;padding:0 5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;}`,`.checked.__jsx-style-dynamic-selector{background:${We.teal700};color:white;}`,".loading.__jsx-style-dynamic-selector{cursor:auto;}"]))};Nb.propTypes={children:me.any.isRequired,checked:me.bool,loading:me.bool,onChange:me.func};const aS=i=>{let{children:e,loading:t,onToggleOpen:r}=i;return Ae.createElement(Nb,{checked:!1,loading:t,onChange:r},e)};aS.propTypes={children:me.any.isRequired,onToggleOpen:me.func.isRequired,loading:me.bool};const oS=i=>{let{dataTest:e}=i;return Ae.createElement("svg",{height:"18px",version:"1.1",viewBox:"0 0 18 18",width:"18px","data-test":`${e}-iconempty`,className:"jsx-3201893673"},Ae.createElement("g",{fill:"none",fillRule:"evenodd",id:"icon/empty",stroke:"none",strokeWidth:"1",className:"jsx-3201893673"}),Ae.createElement(jt,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};oS.propTypes={dataTest:me.string.isRequired};const lS=i=>{let{dataTest:e}=i;return Ae.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1","data-test":`${e}-iconfolderclosed`,className:"jsx-3201893673"},Ae.createElement("g",{id:"icon/folder/closed",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"jsx-3201893673"},Ae.createElement("path",{d:"M2,3.5 C1.17157288,3.5 0.5,4.17157288 0.5,5 L0.5,13 C0.5,13.8284271 1.17157288,14.5 2,14.5 L12,14.5 C12.8284271,14.5 13.5,13.8284271 13.5,13 L13.5,7 C13.5,6.17157288 12.8284271,5.5 12,5.5 L6.69098301,5.5 L5.82917961,3.7763932 C5.7444836,3.60700119 5.57135204,3.5 5.38196601,3.5 L2,3.5 Z",id:"Path-2",stroke:"#6C7787",fill:"#D5DDE5",className:"jsx-3201893673"})),Ae.createElement(jt,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};lS.propTypes={dataTest:me.string.isRequired};const cS=i=>{let{dataTest:e}=i;return Ae.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1","data-test":`${e}-iconfolderopen`,className:"jsx-2091325045"},Ae.createElement("g",{id:"icon/folder/open",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"jsx-2091325045"},Ae.createElement("g",{id:"Group",transform:"translate(0.000000, 3.000000)",stroke:"#6C7787",className:"jsx-2091325045"},Ae.createElement("path",{d:"M2,0.5 C1.17157288,0.5 0.5,1.17157288 0.5,2 L0.5,10 C0.5,10.8284271 1.17157288,11.5 2,11.5 L12,11.5 C12.8284271,11.5 13.5,10.8284271 13.5,10 L13.5,4 C13.5,3.17157288 12.8284271,2.5 12,2.5 L6.69098301,2.5 L5.82917961,0.776393202 C5.7444836,0.607001188 5.57135204,0.5 5.38196601,0.5 L2,0.5 Z",id:"Path-2",fill:"#A0ADBA",className:"jsx-2091325045"}),Ae.createElement("path",{d:"M1.53632259,10.7093809 C1.47575089,10.7941813 1.44318932,10.8957885 1.44318932,11 C1.44318932,11.2761424 1.66704695,11.5 1.94318932,11.5 L12.4853821,11.5 C12.6468577,11.5 12.7983931,11.4220172 12.8922488,11.2906191 L16.4636774,6.2906191 C16.5242491,6.20581872 16.5568107,6.10421149 16.5568107,6 C16.5568107,5.72385763 16.3329531,5.5 16.0568107,5.5 L5.5146179,5.5 C5.35314234,5.5 5.20160692,5.57798284 5.10775116,5.7093809 L1.53632259,10.7093809 Z",id:"Path-3",fill:"#FBFCFD",className:"jsx-2091325045"}))),Ae.createElement(jt,{id:"2091325045"},["svg.jsx-2091325045{margin:3px 0;display:block;}"]))};cS.propTypes={dataTest:me.string.isRequired};const uS=i=>{let{dataTest:e}=i;return Ae.createElement("svg",{height:"18px",version:"1.1",viewBox:"0 0 18 18",width:"18px","data-test":`${e}-iconsingle`,className:"jsx-3201893673"},Ae.createElement("g",{fill:"none",fillRule:"evenodd",id:"icon/single",stroke:"none",strokeWidth:"1",className:"jsx-3201893673"},Ae.createElement("rect",{fill:"#A0ADBA",height:"4",id:"Rectangle",rx:"1",width:"4",x:"7",y:"7",className:"jsx-3201893673"})),Ae.createElement(jt,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};uS.propTypes={dataTest:me.string.isRequired};const dS=i=>{let{loading:e,hasChildren:t,open:r,dataTest:s}=i;return e?Ae.createElement(oS,{dataTest:s}):t?r?Ae.createElement(cS,{dataTest:s}):Ae.createElement(lS,{dataTest:s}):Ae.createElement(uS,{dataTest:s})};dS.propTypes={dataTest:me.string.isRequired,hasChildren:me.bool,loading:me.bool,open:me.bool};const hS=i=>{let{checked:e,dataTest:t,hasChildren:r,indeterminate:s,children:l,loading:u,name:n,open:p,value:m,onChange:g}=i;const v=Ae.createElement(dS,{loading:u,open:p,hasChildren:r,dataTest:t}),y=Ae.createElement(Ae.Fragment,null,Ae.createElement("span",{className:"jsx-1000763175"},v),l,Ae.createElement(jt,{id:"1000763175"},["span.jsx-1000763175{display:inline-block;margin-inline-end:4px;}"]));return Ae.createElement(Ae.Fragment,null,Ae.createElement(Ay,{dense:!0,checked:e,name:n,value:m,label:y,indeterminate:s,onChange:g}))};hS.propTypes={checked:me.bool.isRequired,children:me.any.isRequired,dataTest:me.string.isRequired,hasChildren:me.bool.isRequired,indeterminate:me.bool.isRequired,loading:me.bool.isRequired,name:me.string.isRequired,open:me.bool.isRequired,value:me.string.isRequired,onChange:me.func.isRequired};const _g=i=>{let{highlighted:e,children:t}=i;return Ae.createElement("div",{className:jt.dynamic([["1387769986",[We.teal200]]])+" "+(Br({highlighted:e})||"")},Ae.createElement("span",{className:jt.dynamic([["1387769986",[We.teal200]]])},t),Ae.createElement(jt,{id:"1387769986",dynamic:[We.teal200]},["div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}","span.__jsx-style-dynamic-selector{display:block;}",`.highlighted.__jsx-style-dynamic-selector{background:${We.teal200};padding-inline-end:4px;}`]))};_g.propTypes={children:me.node,highlighted:me.bool};const AI=i=>{let{selected:e,path:t,checked:r,singleSelection:s}=i;const l=e.indexOf(t);if(r&&l!==-1)return e;if(s&&r)return[t];if(r)return[...e,t];if(l===-1)return e;if(s)return[];if(e.indexOf(t)===0)return e.slice(1);const u=e.slice(0,l),n=e.slice(l+1);return[...u,...n]},pS=i=>{let{checked:e,children:t,dataTest:r,disableSelection:s,fullPath:l,hasChildren:u,hasSelectedDescendants:n,highlighted:p,loading:m,node:g,onChange:v,onToggleOpen:y,open:C,rootId:_,selected:w,singleSelection:k}=i;const S=(x,P)=>{let{checked:D}=x;const T=AI({path:l,selected:w,checked:D,singleSelection:k,rootId:_}),I={...g,path:l,checked:D,selected:T};v(I,P)};return s?Ae.createElement(_g,{highlighted:p},Ae.createElement(aS,{loading:m,onToggleOpen:y},t)):k?Ae.createElement(_g,{highlighted:p},Ae.createElement(Nb,{checked:e,onChange:S,loading:m},t)):Ae.createElement(_g,{highlighted:p},Ae.createElement(hS,{dataTest:r,checked:e,name:"org-unit",value:g.id,loading:m,indeterminate:!e&&n,onChange:S,open:C,hasChildren:u},t))};pS.propTypes={children:me.any.isRequired,dataTest:me.string.isRequired,fullPath:me.string.isRequired,hasChildren:me.bool.isRequired,loading:me.bool.isRequired,node:me.shape({displayName:me.string.isRequired,id:me.string.isRequired,children:me.number,path:me.string}).isRequired,open:me.bool.isRequired,rootId:me.string.isRequired,onChange:me.func.isRequired,onToggleOpen:me.func.isRequired,checked:me.bool,disableSelection:me.bool,hasSelectedDescendants:me.bool,highlighted:me.bool,selected:me.arrayOf(Ta),singleSelection:me.bool};const Mw={styles:Ae.createElement(jt,{id:"358163430"},[".extrasmall.jsx-358163430{display:block;margin:3px 0;}"]),className:"jsx-358163430"},fS=()=>Ae.createElement("div",{className:"jsx-2503342345"},Ae.createElement(qo,{extrasmall:!0,className:Mw.className}),Ae.createElement("style",null,Mw.styles),Ae.createElement(jt,{id:"2503342345"},["div.jsx-2503342345{width:24px;}"])),MI={orgUnit:{resource:"organisationUnits",id:i=>{let{id:e}=i;return e},params:{fields:"children[id,path,displayName]"}}},PI=i=>{let{node:e,suppressAlphabeticalSorting:t,onComplete:r}=i;const s=Ue.useRef(!1),{called:l,loading:u,error:n,data:p}=Ea(MI,{variables:{id:e.id}}),m=Ue.useMemo(()=>{if(!p)return;if(!e.children)return[];const{orgUnit:g}=p;return t?g.children:aI(g.children)},[p,t]);return Ue.useEffect(()=>{r&&m&&!s.current&&(r({...e,children:m}),s.current=!0)},[r,m,s]),{called:l,loading:u,error:n||null,data:m}},II=i=>{let{orgChildren:e,filter:t,node:r}=i;return t!=null&&t.length?e.filter(s=>rS(t,`${r.path}/${s.id}`)):e},mS=i=>{let{node:e,autoExpandLoadingError:t,dataTest:r,disableSelection:s,expanded:l,filter:u,highlighted:n,isUserDataViewFallback:p,onChange:m,onChildrenLoaded:g,onCollapse:v,onExpand:y,parentPath:C,renderNodeLabel:_,rootId:w,selected:k,singleSelection:S,suppressAlphabeticalSorting:x,OrganisationUnitNode:P}=i;const D=PI({node:e,isUserDataViewFallback:p,suppressAlphabeticalSorting:x,onComplete:g}),T=D.called&&!D.loading&&!D.error,I=T?II({orgChildren:D.data,filter:u,node:e}):[];return Ae.createElement(Ae.Fragment,null,D.loading&&Ae.createElement(fS,null),D.error&&`Error: ${D.error}`,T&&!I.length&&it.t("No children match filter"),!!I.length&&I.map(N=>{const q=`${C}/${N.id}`;return Ae.createElement(P,{autoExpandLoadingError:t,dataTest:r,disableSelection:s,displayName:N.displayName,expanded:l,filter:u,highlighted:n,id:N.id,isUserDataViewFallback:p,key:q,onChange:m,onChildrenLoaded:g,onCollapse:v,onExpand:y,path:q,renderNodeLabel:_,rootId:w,selected:k,singleSelection:S,suppressAlphabeticalSorting:x})}))};mS.propTypes={OrganisationUnitNode:me.func.isRequired,dataTest:me.string.isRequired,node:me.object.isRequired,parentPath:me.string.isRequired,renderNodeLabel:me.func.isRequired,rootId:me.string.isRequired,onChange:me.func.isRequired,autoExpandLoadingError:me.bool,disableSelection:me.bool,expanded:me.arrayOf(Ta),filter:me.arrayOf(Ta),highlighted:me.arrayOf(Ta),isUserDataViewFallback:me.bool,selected:me.arrayOf(Ta),singleSelection:me.bool,suppressAlphabeticalSorting:me.bool,onChildrenLoaded:me.func,onCollapse:me.func,onExpand:me.func};const DI=i=>{let{path:e,expanded:t,onExpand:r,onCollapse:s,errorMessage:l,autoExpandLoadingError:u}=i;const n=u&&!!l,[p,m]=Ue.useState(!!l);Ue.useEffect(()=>{n&&!p&&(r({path:e}),m(!0))},[n,p]);const g=n&&!p||!!t.includes(e);return{open:g,onToggleOpen:()=>g?s({path:e}):r({path:e}),openedOnceDueToError:p}},RI={orgUnit:{resource:"organisationUnits",id:i=>{let{id:e}=i;return e},params:i=>{let{isUserDataViewFallback:e}=i;return{isUserDataViewFallback:e,fields:["path","children::size"]}}}},LI=(i,e)=>{let{displayName:t,isUserDataViewFallback:r}=e;if(!t)throw new Error('"displayName" is required');const s={id:i,isUserDataViewFallback:r},{loading:l,error:u,data:n={}}=Ea(RI,{variables:s});return{loading:l,error:u||null,data:{id:i,displayName:t,...n.orgUnit}}},Ob=i=>{let{autoExpandLoadingError:e,dataTest:t,disableSelection:r,displayName:s,expanded:l,highlighted:u,id:n,isUserDataViewFallback:p,path:m,renderNodeLabel:g,rootId:v,selected:y,singleSelection:C,filter:_,suppressAlphabeticalSorting:w,onChange:k,onChildrenLoaded:S,onCollapse:x,onExpand:P}=i;const D=LI(n,{isUserDataViewFallback:p,displayName:s}),T=sI(m,v),I={displayName:s,id:n,...D.data,path:T},N=!!I.children&&I.children>0,q=kI(T,y),Z=u.includes(m),{open:X,onToggleOpen:O}=DI({autoExpandLoadingError:e,errorMessage:D.error&&D.error.toString(),path:T,expanded:l,onExpand:P,onCollapse:x}),V=!!y.find(U=>U.match(new RegExp(`${T}$`))),$=g({disableSelection:r,hasChildren:N,hasSelectedDescendants:q,loading:D.loading,error:D.error,selected:y,open:X,path:m,singleSelection:C,node:I,label:s,checked:V,highlighted:Z}),L=Ae.createElement(pS,{node:I,fullPath:m,open:X,loading:D.loading,checked:V,rootId:v,onChange:k,dataTest:`${t}-label`,selected:y,hasChildren:N,highlighted:Z,onToggleOpen:O,disableSelection:r,singleSelection:C,hasSelectedDescendants:q},$),R=N&&!X&&!D.error,G=N&&X&&!D.error;return Ae.createElement(nS,{dataTest:`${t}-node`,open:X,onOpen:O,onClose:O,component:L,icon:D.loading&&Ae.createElement(fS,null)},D.error&&Ae.createElement(sS,{dataTest:t},it.t("Could not load children")),R&&Ae.createElement("span",{"data-test":`${t}-placeholder`}),G&&Ae.createElement(mS,{OrganisationUnitNode:Ob,node:I,autoExpandLoadingError:e,dataTest:t,disableSelection:r,expanded:l,filter:_,highlighted:u,isUserDataViewFallback:p,onChange:k,onChildrenLoaded:S,onCollapse:x,onExpand:P,parentPath:m,renderNodeLabel:g,rootId:v,selected:y,singleSelection:C,suppressAlphabeticalSorting:w}))};Ob.propTypes={dataTest:me.string.isRequired,id:me.string.isRequired,renderNodeLabel:me.func.isRequired,rootId:me.string.isRequired,onChange:me.func.isRequired,autoExpandLoadingError:me.bool,disableSelection:me.bool,displayName:me.string,expanded:me.arrayOf(Ta),filter:me.arrayOf(Ta),highlighted:me.arrayOf(Ta),isUserDataViewFallback:me.bool,path:Ta,selected:me.arrayOf(Ta),singleSelection:me.bool,suppressAlphabeticalSorting:me.bool,onChildrenLoaded:me.func,onCollapse:me.func,onExpand:me.func};const zI=i=>{let{label:e}=i;return e},NI=(i,e)=>i!=null&&i.length?e.filter(t=>rS(i,`/${t}`)):e,gS=i=>{let{dataTest:e="dhis2-uiwidgets-orgunittree-error",error:t}=i;return Ae.createElement("div",{"data-test":e},it.t("Error: {{ ERRORMESSAGE }}",{ERRORMESSAGE:t,nsSeparator:">"}))};gS.propTypes={error:me.string.isRequired,dataTest:me.string};const yS=i=>{let{dataTest:e="dhis2-uiwidgets-orgunittree-loading"}=i;return Ae.createElement("div",{"data-test":e,className:"jsx-814846266"},Ae.createElement(qo,{small:!0}),Ae.createElement(jt,{id:"814846266"},["div.jsx-814846266{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]))};yS.propTypes={dataTest:me.string};const OI=i=>Array.from(new Set(i)),jI=i=>{const e=i.replace(/^\//,"").split("/"),t=e.map((r,s)=>`/${e.slice(0,s+1).join("/")}`);return OI(t)},FI=i=>i.reduce((e,t)=>{const r=jI(t);return[...e,...r]},[]),BI=i=>{let{expanded:e,setExpanded:t,onExpand:r,onCollapse:s}=i;return{handleExpand:n=>{let{path:p,...m}=n;e.includes(p)||(t([...e,p]),r&&r({path:p,...m}))},handleCollapse:n=>{let{path:p,...m}=n;const g=e.indexOf(p);if(g!==-1){const v=g===0?e.slice(1):[...e.slice(0,g),...e.slice(g+1)];t(v),s&&s({path:p,...m})}}}},$I=i=>{let{initiallyExpanded:e,onExpand:t,onCollapse:r,expandedControlled:s,handleExpandControlled:l,handleCollapseControlled:u}=i;const n=!!s,p=n?[]:FI(e),[m,g]=Ue.useState(p);if(n)return{expanded:s,handleExpand:l,handleCollapse:u};const{handleExpand:v,handleCollapse:y}=BI({expanded:m,setExpanded:g,onExpand:t,onCollapse:r});return{expanded:m,handleExpand:v,handleCollapse:y}},UI=i=>{const[e,t]=Ue.useState(0);return Ue.useEffect(()=>{const r=e+1;i===!0&&t(r)},[i]),e},VI=i=>{const t=Object.entries(i).map(r=>{let[s,l]=r;const u=l.displayName||"";return[s,{...l,displayName:u}]});return Object.fromEntries(t)},GI=i=>i.reduce((e,t)=>({...e,[t]:{id:t,resource:"organisationUnits",params:r=>{let{isUserDataViewFallback:s}=r;return{isUserDataViewFallback:s,fields:["displayName","path","id"]}}}}),{}),HI=function(i){let{isUserDataViewFallback:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=Ue.useMemo(()=>GI(i),[i]),s=Ea(t,{variables:{isUserDataViewFallback:e}}),{called:l,loading:u,error:n,data:p,refetch:m}=s,g=Ue.useMemo(()=>p&&VI(p),[p]);return{called:l,loading:u,error:n||null,data:g||null,refetch:m}},Zm=[],xS=i=>{let{onChange:e,roots:t,autoExpandLoadingError:r,dataTest:s="dhis2-uiwidgets-orgunittree",disableSelection:l,forceReload:u,highlighted:n=Zm,isUserDataViewFallback:p,initiallyExpanded:m=Zm,filter:g=Zm,renderNodeLabel:v=zI,selected:y=Zm,singleSelection:C,suppressAlphabeticalSorting:_,expanded:w,handleExpand:k,handleCollapse:S,onExpand:x,onCollapse:P,onChildrenLoaded:D}=i;const T=NI(g,Array.isArray(t)?t:[t]),I=UI(u),[N,q]=Ue.useState(I),{called:Z,loading:X,error:O,data:V,refetch:$}=HI(T,{isUserDataViewFallback:p,suppressAlphabeticalSorting:_}),{expanded:L,handleExpand:R,handleCollapse:G}=$I({initiallyExpanded:m,onExpand:x,onCollapse:P,expandedControlled:w,handleExpandControlled:k,handleCollapseControlled:S});Ue.useEffect(()=>($&&I>0&&I!==N&&($(),q(I)),()=>console.warn("@TODO: Why does this component unmount after a force reload?")),[I,N,$]);const U=!Z||X;return Ae.createElement("div",{"data-test":s},U&&Ae.createElement(yS,null),O&&Ae.createElement(gS,{error:O}),!O&&!U&&T.map(B=>{const H=V[B];return Ae.createElement(Ob,{key:H.path,rootId:B,autoExpandLoadingError:r,dataTest:s,disableSelection:l,displayName:H.displayName,expanded:L,highlighted:n,id:B,isUserDataViewFallback:p,filter:g,path:H.path,renderNodeLabel:v,selected:y,singleSelection:C,suppressAlphabeticalSorting:_,onChange:e,onChildrenLoaded:D,onCollapse:G,onExpand:R})}))};xS.propTypes={roots:me.oneOfType([me.string,me.arrayOf(me.string)]).isRequired,onChange:me.func.isRequired,autoExpandLoadingError:me.bool,dataTest:me.string,disableSelection:me.bool,expanded:Bd(i=>!!i.handleExpand||!!i.handleCollapse,me.arrayOf(me.string)),filter:me.arrayOf(Ta),forceReload:me.bool,handleCollapse:Bd(i=>!!i.expanded||!!i.handleExpand,me.func),handleExpand:Bd(i=>!!i.expanded||!!i.handleCollapse,me.func),highlighted:me.arrayOf(Ta),initiallyExpanded:me.arrayOf(Ta),isUserDataViewFallback:me.bool,renderNodeLabel:me.func,selected:me.arrayOf(Ta),singleSelection:me.bool,suppressAlphabeticalSorting:me.bool,onChildrenLoaded:me.func,onCollapse:me.func,onExpand:me.func};const vn="ACCESS_NONE",Qn="ACCESS_VIEW_ONLY",sr="ACCESS_VIEW_AND_EDIT",jb="SHARE_TARGET_EXTERNAL",Nu="SHARE_TARGET_PUBLIC",Ou="SHARE_TARGET_USER",ph="SHARE_TARGET_GROUP",vS={AGGREGATE_DATA_EXCHANGE:"aggregateDataExchange",API_TOKEN:"apiToken",ATTRIBUTE:"attribute",CATEGORY:"category",CATEGORY_COMBO:"categoryCombo",CATEGORY_OPTION:"categoryOption",CATEGORY_OPTION_GROUP:"categoryOptionGroup",CATEGORY_OPTION_GROUP_SET:"categoryOptionGroupSet",CONSTANT:"constant",DASHBOARD:"dashboard",DATA_APPROVAL_LEVEL:"dataApprovalLevel",DATA_APPROVAL_WORKFLOW:"dataApprovalWorkflow",DATA_ELEMENT:"dataElement",DATA_ELEMENT_GROUP:"dataElementGroup",DATA_ELEMENT_GROUP_SET:"dataElementGroupSet",DATA_SET:"dataSet",DOCUMENT:"document",EVENT_CHART:"eventChart",EVENT_FILTER:"eventFilter",EVENT_REPORT:"eventReport",EVENT_VISUALIZATION:"eventVisualization",EXPRESSION_DIMENSION_ITEM:"expressionDimensionItem",EXTERNAL_MAP_LAYER:"externalMapLayer",IDENTIFIABLE_OBJECT:"identifiableObject",INDICATOR:"indicator",INDICATOR_GROUP:"indicatorGroup",INDICATOR_GROUP_SET:"indicatorGroupSet",INTERPRETATION:"interpretation",LEGEND_SET:"legendSet",MAP:"map",OPTION_GROUP:"optionGroup",OPTION_GROUP_SET:"optionGroupSet",OPTION_SET:"optionSet",ORGANISATION_UNIT_GROUP:"organisationUnitGroup",ORGANISATION_UNIT_GROUP_SET:"organisationUnitGroupSet",PREDICTOR_GROUP:"predictorGroup",PROGRAM:"program",PROGRAM_INDICATOR:"programIndicator",PROGRAM_INDICATOR_GROUP:"programIndicatorGroup",PROGRAM_STAGE:"programStage",PROGRAM_STAGE_WORKING_LIST:"programStageWorkingList",RELATIONSHIP_TYPE:"relationshipType",REPORT:"report",SQL_VIEW:"sqlView",TRACKED_ENTITY_ATTRIBUTE:"trackedEntityAttribute",TRACKED_ENTITY_FILTER:"trackedEntityFilter",TRACKED_ENTITY_TYPE:"trackedEntityType",USER_GROUP:"userGroup",USER_ROLE:"userRole",VALIDATION_RULE:"validationRule",VALIDATION_RULE_GROUP:"validationRuleGroup",VISUALIZATION:"visualization"},bS=Object.values(vS),Xg=Ue.createContext(!1);var WI=void 0;const qI=(i,e,t)=>{let r;return function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];const n=WI,p=()=>{r=null,i.apply(n,l)};clearTimeout(r),r=setTimeout(p,e)}},y0=i=>i===void 0?vn:typeof i=="boolean"?i?Qn:vn:i.startsWith("rw")?sr:i.startsWith("r-")?Qn:vn,_S=i=>{if(typeof i=="boolean")return{data:vn,metadata:y0(i)};const e=i==null?void 0:i.substring(0,2),t=i==null?void 0:i.substring(2,4);return{data:y0(t),metadata:y0(e)}},Pw=i=>{switch(i){case vn:return"--";case Qn:return"r-";case sr:return"rw";default:return"--"}},Op=i=>`${Pw(i.metadata)}${Pw(i.data)}----`,Xm=i=>{let{access:e,...t}=i;return{...t,access:_S(e)}},YI=[jb,Nu],Iw=i=>!YI.includes(i),ZI=i=>{let{object:e,type:t,access:r,id:s}=i;switch(t){case"public":return{object:{...e,publicAccess:Op(r)}};case"group":{const l=e.userGroupAccesses.map(n=>n.id!==s?n:{...n,access:Op(r)}),u={object:{...e,userGroupAccesses:l}};return console.log(u),u}case"user":{const l=e.userAccesses.map(n=>n.id!==s?n:{...n,access:Op(r)});return{object:{...e,userAccesses:l}}}}},XI=i=>{let{object:e,type:t,id:r,access:s,name:l}=i;switch(t){case"group":return{object:{...e,userGroupAccesses:[...e.userGroupAccesses,{id:r,name:l,access:Op(s)}]}};case"user":return{object:{...e,userAccesses:[...e.userAccesses,{id:r,name:l,access:Op(s)}]}}}},KI=i=>{let{object:e,type:t,id:r}=i;switch(t){case"group":{const s=e.userGroupAccesses.filter(u=>u.id!==r);return{object:{...e,userGroupAccesses:s}}}case"user":{const s=e.userAccesses.filter(u=>u.id!==r);return{object:{...e,userAccesses:s}}}}},QI="المستخدم",JI="بيانات",eD="البيانات الوصفية",tD="بحث",iD="إغلاق",nD={"View only":"العرض فقط","View and edit":"عرض وتعديل","No access":"لا يمكن الوصول","Give access to a user or group":"منح حق الوصول إلى مستخدم أو مجموعة","Data access level":"","Choose a level":"","Not available offline":"غير متوفر في وضع عدم الإتصال","Metadata access level":"","Access level":"مستوى الوصول","Give access":"السماح بالوصول","Users and groups that currently have access":"المستخدمون والمجموعات التي لديها حق الوصول حاليًا","User / Group":"","All users":"جميع المستخدمين","Anyone logged in":"","User group":"مجموعة المستخدمين",User:QI,Data:JI,"Remove access":"إزالة الوصول",Metadata:eD,"User or group":"مستخدم أو مجموعة",Search:tD,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"حدث خطأ ما","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:iD,"Dashboard sharing":""},rD="",sD="البيانات",aD="",oD="البحث",lD="إغلاق",cD={"View only":"","View and edit":"","No access":"ممنوع الدخول","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:rD,Data:sD,"Remove access":"",Metadata:aD,"User or group":"",Search:oD,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:lD,"Dashboard sharing":""},uD="داتا پەیوەندیدارەکان",dD="گەڕان",hD="داخستن",pD={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:uD,"Remove access":"","User or group":"",Search:dD,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"هەڵەیەک ڕووی دا","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:hD,"Dashboard sharing":""},fD="Uživatel",mD="Data",gD="Metadata",yD="Hledat",xD="Zavřít",vD={"View only":"Pouze zobrazení","View and edit":"Zobrazení a úpravy","No access":"Žádný přístup","Give access to a user or group":"Udělte přístup uživateli nebo skupině","Data access level":"","Choose a level":"","Not available offline":"Není k dispozici offline","Metadata access level":"","Access level":"Úroveň přístupu","Give access":"Povolit přístup","Users and groups that currently have access":"Uživatelé a skupiny, kteří mají aktuálně přístup","User / Group":"Uživatel / Skupina","All users":"Všichni uživatelé","Anyone logged in":"","User group":"Uživatelská skupina",User:fD,Data:mD,"Remove access":"Odebrat přístup",Metadata:gD,"User or group":"Uživatel nebo skupina",Search:yD,"Apply dashboard sharing settings to visualizations":"Na vizualizace použijte nastavení sdílení ovládacího panelu","Something went wrong":"Něco se pokazilo","Apply sharing to dashboard visualizations":"Použít sdílení na vizualizace ovládacího panelu","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Nebyly aktualizovány žádné vizualizace. Zkontrolujte, zda máte oprávnění ke změně sdílení pro všechny vizualizace.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Ne všechny vizualizace bylo možné úspěšně aktualizovat. {{ success }} aktualizováno úspěšně, {{ failed }} se nepodařilo aktualizovat. Zkontrolujte, zda máte oprávnění ke změně sdílení pro všechny vizualizace.","No visualizations were updated because sharing settings are already sufficient.":"Nebyly aktualizovány žádné vizualizace, protože nastavení sdílení je již dostačující.","Successfully updated sharing for all visualizations.":"Úspěšně aktualizováno sdílení pro všechny vizualizace.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Ne všechna nastavení sdílení vizualizací bylo nutné aktualizovat. {{ updated }} aktualizováno, {{ skipped }} již má dostatečné nastavení sdílení.","There are no users or groups to apply sharing settings for.":"Nejsou žádní uživatelé ani skupiny, pro které by bylo možné použít nastavení sdílení.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Počet vizualizací na tomto řídicím panelu, které potenciálně získají aktualizované nastavení sdílení: {{ visualizationsCount }}. Počet uživatelů nebo skupin, na které se tato aktualizovaná nastavení budou vztahovat: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"Použití stejných nastavení sdílení zajistí, že uživatelé a skupiny, které mají přístup k řídicímu panelu, budou mít také přístup k jeho vizualizacím (grafy, tabulky, mapy, grafy událostí a zprávy o událostech) alespoň „Pouze zobrazení“.",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"Pokud uživatel nebo skupina již má k vizualizaci přístup „Zobrazení a úpravy“, nebude to omezeno na „Pouze zobrazení“. Úroveň přístupu „Všichni uživatelé“ nebude aktualizována ani změněna.","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Použití sdílení nelze vrátit zpět a je nutné jej provést znovu, pokud na ovládací panel přidáte nové vizualizace nebo se změní jeho nastavení sdílení.","Sharing and access: {{- objectName}}":"Sdílení a přístup: {{- objectName}}","Sharing and access":"Sdílení a přístup",Close:xD,"Dashboard sharing":"Sdílení ovládacího panelu"},bD="",_D="",wD="",CD="",TD="Close",SD={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:bD,Data:_D,"Remove access":"",Metadata:wD,"User or group":"",Search:CD,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:TD,"Dashboard sharing":""},ED="User",kD="Data",AD="Metadata",MD="Search",PD="Close",ID={"View only":"View only","View and edit":"View and edit","No access":"No access","Give access to a user or group":"Give access to a user or group","Data access level":"Data access level","Choose a level":"Choose a level","Not available offline":"Not available offline","Metadata access level":"Metadata access level","Access level":"Access level","Give access":"Give access","Users and groups that currently have access":"Users and groups that currently have access","User / Group":"User / Group","All users":"All users","Anyone logged in":"Anyone logged in","User group":"User group",User:ED,Data:kD,"Remove access":"Remove access",Metadata:AD,"User or group":"User or group",Search:MD,"Apply dashboard sharing settings to visualizations":"Apply dashboard sharing settings to visualizations","Something went wrong":"Something went wrong","Apply sharing to dashboard visualizations":"Apply sharing to dashboard visualizations","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No visualizations were updated. Check that you have permission to change sharing for all visualizations.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.","No visualizations were updated because sharing settings are already sufficient.":"No visualizations were updated because sharing settings are already sufficient.","Successfully updated sharing for all visualizations.":"Successfully updated sharing for all visualizations.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.","There are no users or groups to apply sharing settings for.":"There are no users or groups to apply sharing settings for.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':`If a user or group already has "View and edit" access to a visualization, this won't be reduced to "View only". The "All users" access level won't be updated or changed.`,"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.","Sharing and access: {{- objectName}}":"Sharing and access: {{- objectName}}","Sharing and access":"Sharing and access",Close:PD,"Dashboard sharing":"Dashboard sharing"},DD="Usuario",RD="Datos",LD="Metadatos",zD="Buscar",ND="Cerrar",OD={"View only":"Solo lectura","View and edit":"Ver y editar","No access":"Sin acceso","Give access to a user or group":"Dar acceso a un usuario o grupo","Data access level":"","Choose a level":"","Not available offline":"No disponible sin conexión a internet","Metadata access level":"","Access level":"Nivel de acceso","Give access":"Dar acceso","Users and groups that currently have access":"Usuarios y grupos que actualmente tienen acceso","User / Group":"Usuario / Grupo","All users":"Todos los usuarios","Anyone logged in":"","User group":"Grupo de usuario",User:DD,Data:RD,"Remove access":"Eliminar acceso",Metadata:LD,"User or group":"Usuario o Grupo",Search:zD,"Apply dashboard sharing settings to visualizations":"Aplicar la configuración compartir del tablero a las visualizaciones","Something went wrong":"Algo ha salido mal","Apply sharing to dashboard visualizations":"Aplicar compartir a las visualizaciones del tablero","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No se actualizaron las visualizaciones. Compruebe que tiene permiso para cambiar la configuración compartir de todas las visualizaciones.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"No todas las visualizaciones se pudieron actualizar correctamente. {{ success }} actualizado con éxito, {{ failed }} error al actualizar. Compruebe que tiene permiso para cambiar la configuración de uso compartido de todas las visualizaciones.","No visualizations were updated because sharing settings are already sufficient.":"No se han actualizado las visualizaciones porque la configuración para compartir ya es suficiente","Successfully updated sharing for all visualizations.":"Configuración de uso compartido actualizado con éxito para todas las visualizaciones.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"No todas las configuraciones para compartir visualizaciones requieren actualización. {{ updated }} actualizado, {{ skipped }} ya tiene suficiente acceso.","There are no users or groups to apply sharing settings for.":"No hay usuarios o grupos a los que aplicar la configuración de uso compartido","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Número de visualizaciones en este tablero que potencialmente actualizarán su confugiración de uso compartido: {{ visualizationsCount }}. El número de usuarios o grupos a los que se aplicarán estas configuraciones actualizadas: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'La aplicación de la misma configuración para compartir garantiza que los usuarios y grupos que tienen acceso al tablero también tienen al menos acceso de "Solo lectura" a sus visualizaciones (gráficos, tablas, mapas, gráficos de eventos e informes de eventos).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Si un usuario o grupo ya tiene acceso "Ver y editar" a una visualización, este no se reducirá a "Solo lectura". El nivel de acceso "Todos los usuarios" no se actualizará ni cambiará.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Aplicar esta configuración de uso compartido no puede deshacerse, y deberás hacer estos cambios nuevamente si nuevas visualizaciones son agregadas al tablero o si su configuración de uso compartido es modificada.","Sharing and access: {{- objectName}}":"Compartir y acceder: {{- objectName}}","Sharing and access":"Acceso compartido",Close:ND,"Dashboard sharing":"Compartir tablero"},jD="",FD="Datos",BD="Metadatos",$D="Buscar",UD="Cerrar",VD={"View only":"Ver sólo","View and edit":"Ver y editar","No access":"Sin acceso","Give access to a user or group":"Dar acceso a un usuario o grupo","Data access level":"","Choose a level":"","Not available offline":"No disponible sin conexión","Metadata access level":"","Access level":"Nivel de acceso","Give access":"Dar acceso","Users and groups that currently have access":"Usuarios y grupos que tienen acceso actualmente","User / Group":"Usuario / Grupo","All users":"Todos los usuarios","Anyone logged in":"","User group":"",User:jD,Data:FD,"Remove access":"Eliminar el acceso",Metadata:BD,"User or group":"Usuario o grupo",Search:$D,"Apply dashboard sharing settings to visualizations":"Aplicar la configuración de uso compartido del cuadro de mandos a las visualizaciones","Something went wrong":"Algo ha ido mal","Apply sharing to dashboard visualizations":"Aplicar la compartición a las visualizaciones de cuadros de mando","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"No se ha actualizado ninguna visualización. Compruebe que tiene permiso para cambiar el uso compartido de todas las visualizaciones.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"No se han podido actualizar correctamente todas las visualizaciones. {{ success }} se ha actualizado correctamente, {{ failed }} no se ha podido actualizar. Compruebe que tiene permiso para cambiar la compartición de todas las visualizaciones.","No visualizations were updated because sharing settings are already sufficient.":"No se ha actualizado ninguna visualización porque los ajustes de compartición ya son suficientes.","Successfully updated sharing for all visualizations.":"Actualizada con éxito la compartición de todas las visualizaciones.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"No era necesario actualizar todos los ajustes de compartición de visualizaciones. {{ updated }} actualizado, {{ skipped }} ya tenía suficientes ajustes de compartición.","There are no users or groups to apply sharing settings for.":"No hay usuarios ni grupos a los que aplicar la configuración de uso compartido.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Número de visualizaciones en este cuadro de mando que potencialmente obtendrán ajustes de uso compartido actualizados: {{ visualizationsCount }}. Número de usuarios o grupos a los que se aplicarán estos ajustes actualizados: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Aplicando la misma configuración de compartición se garantiza que los usuarios y grupos que tienen acceso al cuadro de mando también tienen al menos acceso de "sólo visualización" a sus visualizaciones (gráficos, tablas, mapas, gráficos de eventos e informes de eventos).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Si un usuario o grupo ya tiene acceso "Ver y editar" a una visualización, éste no se reducirá a "Sólo ver". El nivel de acceso "Todos los usuarios" no se actualizará ni cambiará.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"La aplicación de la compartición no puede deshacerse, y debe hacerse de nuevo si se añaden nuevas visualizaciones al cuadro de mandos o se cambia su configuración de compartición.","Sharing and access: {{- objectName}}":"Compartir y acceder: {{- objectName}}","Sharing and access":"Compartir y acceder",Close:UD,"Dashboard sharing":"Compartir el cuadro de mandos"},GD="",HD="",WD="",qD={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:GD,"Remove access":"","User or group":"",Search:HD,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Jokin meni pieleen","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:WD,"Dashboard sharing":""},YD="Utilisateur",ZD="Données",XD="Métadonnées",KD="Chercher",QD="Fermer",JD={"View only":"","View and edit":"","No access":"Pas d'accès","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Non disponible hors ligne","Metadata access level":"","Access level":"Niveau d'accès","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Groupe d'utilisateurs",User:YD,Data:ZD,"Remove access":"",Metadata:XD,"User or group":"",Search:KD,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Quelque chose a mal tourné","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:QD,"Dashboard sharing":""},eR="",tR="Data",iR="Metadata",nR="Pencarian",rR="Tutup",sR={"View only":"","View and edit":"","No access":"Tidak ada akses","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:eR,Data:tR,"Remove access":"",Metadata:iR,"User or group":"",Search:nR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Terjadi kesalahan","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:rR,"Dashboard sharing":""},aR="",oR="Data",lR="ទិន្នន័យ",cR="ស្វែងរក",uR="បិទ",dR={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:aR,Data:oR,"Remove access":"",Metadata:lR,"User or group":"",Search:cR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:uR,"Dashboard sharing":""},hR="ຜູ້ໃຊ້",pR="ຂໍ້ມູນ",fR="ໂຄງຮ່າງຖານຂໍ້ມູນ",mR="ຄົ້ນຫາ",gR="ປິດ",yR={"View only":"ເບິ່ງໄດ້ເທົ່ານັ້ນ","View and edit":"ເບິ່ງ ແລະ ແກ້ໄຂ","No access":"ບໍ່ມີການເຂົ້າເຖີງ","Give access to a user or group":"ໃຫ້ຜູ້ໃຊ້ ຫຼື ກຸ່ມເຂົ້າເຖິງ","Data access level":"","Choose a level":"","Not available offline":"ບໍ່ສາມາດໃຊ້ໄດ້ອອບລາຍ","Metadata access level":"","Access level":"ຂັ້ນການເຂົ້າເຖິງ","Give access":"ໃຫ້ການເຂົ້າເຖິງ","Users and groups that currently have access":"ຜູ້ໃຊ້ ແລະ ກຸ່ມທີ່ໄດ້ເຂົ້າເຖິງ","User / Group":"ຜູ້ໃຊ້ / ກຸ່ມ","All users":"ຜູ້ໃຊ້ທັງໝົດ","Anyone logged in":"","User group":"",User:hR,Data:pR,"Remove access":"ເອົາການເຂົ້າເຖິງອອກ",Metadata:fR,"User or group":"ຜູ້ໃຊ້ ຫຼື ກຸ່ມ",Search:mR,"Apply dashboard sharing settings to visualizations":"ນຳໃຊ້ການຕັ້ງຄ່າແບ່ງປັນກະດານຂ່າວກັບພາບຂໍ້ມູນ","Something went wrong":"ມີບາງຢ່າງຜິດພາດ","Apply sharing to dashboard visualizations":"ນຳໃຊ້ການແບ່ງປັນພາບຂໍ້ມູນກັບກະດານຂ່າວ","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"ບໍ່ມີການອັບເດດພາບຂໍ້ມູນ. ກວດເບິ່ງຄືນວ່າທ່ານໄດ້ຮັບການອະນຸຍາດໃຫ້ປ່ຽນການແບ່ງປັນສໍາລັບພາບຂໍ້ມູນ.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"ພາບຂໍ້ມູນທັງໝົດບໍ່ສາມາດອັບເດດໄດ້ສຳເລັດ. ອັບເດດ {{ success }} ສຳເລັດແລ້ວ, {{ failed }} ລົ້ມເຫລວໃນການອັບເດດ. ກວດເບິ່ງວ່າທ່ານໄດ້ຮັບການອະນຸຍາດໃຫ້ປ່ຽນການແບ່ງປັນສໍາລັບພາບຂໍ້ມູນທັງຫມົດ.","No visualizations were updated because sharing settings are already sufficient.":"ບໍ່ມີການອັບເດດພາບຂໍ້ມູນເນື່ອງຈາກການຕັ້ງຄ່າການແບ່ງປັນພຽງພໍແລ້ວ.","Successfully updated sharing for all visualizations.":"ອັບເດດການແບ່ງປັນສຳເລັດແລ້ວສຳລັບພາບຂໍ້ມູນທັງໝົດ.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"ບໍ່ແມ່ນການຕັ້ງຄ່າການແບ່ງປັນພາບທັງໝົດທີ່ຈຳເປັນເພື່ອອັບເດດ. {{ updated }} ອັບເດດແລ້ວ, {{ skipped }} ມີການຕັ້ງຄ່າການແບ່ງປັນພຽງພໍແລ້ວ.","There are no users or groups to apply sharing settings for.":"ບໍ່ມີຜູ້ໃຊ້ ຫຼື ກຸ່ມສຳລັບການນໍາໃຊ້ການຕັ້ງຄ່າແບ່ງປັນ.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"ຈຳນວນພາບຂໍ້ມູນໃນກະດານຂ່າວນີ້ທີ່ອາດຈະໄດ້ມີການອັບເດດການຕັ້ງຄ່າການແບ່ງປັນ: {{ visualizationsCount }}. ຈຳນວນຜູ້ໃຊ້ ຫຼືກຸ່ມທີ່ອັບເດດການຕັ້ງຄ່າເຫຼົ່ານີ້ຈະໃຊ້ກັບ: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'ການໃຊ້ການຕັ້ງຄ່າແບບແບ່ງປັນຄືກັນແມ່ນຕ້ອງໃຫ້ແນ່ໃຈວ່າຜູ້ໃຊ້ ແລະ ກຸ່ມທີ່ເຂົ້າເຖິງກະດານຂ່າວສາມາດ "ເບິ່ງເທົ່ານັ້ນ" ໃນພາບຂໍ້ມູນ (ແຜນການ, ຕາຕະລາງ, ແຜນທີ່, ຕາຕະລາງເຫດການ ແລະ ການລາຍງານເຫດການ).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'ຖ້າຜູ້ໃຊ້ ຫຼື ກຸ່ມມີການເຂົ້າເຖິງແບບ "ເບິ່ງ ແລະແກ້ໄຂ" ຕໍ່ພາບຂໍ້ມູນນັ້ນຈະບໍ່ຖືກຫຼຸດລົງເປັນ "ເບິ່ງເທົ່ານັ້ນ". ການເຂົ້າເຖິງຂັ້ນ "ຜູ້ໃຊ້ທັງໝົດ" ຈະບໍ່ຖືກອັບເດດ ຫຼື ປ່ຽນແປງ.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"ການໃຊ້ການແບ່ງປັນບໍ່ສາມາດຍົກເລີກໄດ້, ແລະຕ້ອງເຮັດອີກຄັ້ງ ຖ້າມີການເພີ່ມພາບຂໍ໊ມູນໃໝ່ໃນກະດານຂ່າວ ຫຼື ການຕັ້ງຄ່າການແບ່ງປັນຂອງມັນມີການປ່ຽນແປງ.","Sharing and access: {{- objectName}}":"ການແບ່ງປັນ ແລະ ການເຂົາເຖິງ: {{- objectName}}","Sharing and access":"ການແບ່ງປັນ ແລະ ການເຂົ້າເຖິງ",Close:gR,"Dashboard sharing":"ການແບ່ງປັນກະດານຂ່າວ"},xR="",vR="အချက်အလက်",bR="",_R="",wR="ပိတ်သည်",CR={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:xR,Data:vR,"Remove access":"",Metadata:bR,"User or group":"",Search:_R,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:wR,"Dashboard sharing":""},TR="Bruker",SR="Data",ER="Metadata",kR="Søk",AR="Lukk",MR={"View only":"","View and edit":"","No access":"Ingen tilgang","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Ikke tilgjengelig i frakoblet modus","Metadata access level":"","Access level":"Tilgangsnivå","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Brukergruppe",User:TR,Data:SR,"Remove access":"",Metadata:ER,"User or group":"",Search:kR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Noe gikk galt","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:AR,"Dashboard sharing":""},PR="",IR="खोज",DR="",RR={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:PR,"Remove access":"","User or group":"",Search:IR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:DR,"Dashboard sharing":""},LR="Gebruiker",zR="Gegevens",NR="Metagegevens",OR="Zoek",jR="Sluit",FR={"View only":"Alleen bekijken","View and edit":"Bekijk en bewerk","No access":"Geen toegang","Give access to a user or group":"Geef toegang aan een gebruiker of groep","Data access level":"","Choose a level":"","Not available offline":"Niet beschikbaar offline","Metadata access level":"","Access level":"Toegangsniveau","Give access":"Toegang geven","Users and groups that currently have access":"Gebruikers en groepen die momenteel toegang hebben","User / Group":"Gebruiker / groep","All users":"Alle gebruikers","Anyone logged in":"","User group":"",User:LR,Data:zR,"Remove access":"Toegang verwijderen",Metadata:NR,"User or group":"Gebruiker of groep",Search:OR,"Apply dashboard sharing settings to visualizations":"Instellingen voor delen van dashboards toepassen op visualisaties","Something went wrong":"Er is iets fout gegaan.","Apply sharing to dashboard visualizations":"Pas delen toe op dashboardvisualisaties","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Er zijn geen visualisaties bijgewerkt. Controleer of u gemachtigd bent om het delen voor alle visualisaties te wijzigen.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Niet alle visualisaties konden met succes worden bijgewerkt. {{ success }} succesvol bijgewerkt, {{ failed }} kan niet worden bijgewerkt. Controleer of u gemachtigd bent om het delen voor alle visualisaties te wijzigen.","No visualizations were updated because sharing settings are already sufficient.":"Er zijn geen visualisaties bijgewerkt omdat de instellingen voor delen al voldoende zijn.","Successfully updated sharing for all visualizations.":"Delen voor alle visualisaties is geüpdatet.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Niet alle instellingen voor het delen van visualisaties hoefden te worden bijgewerkt. {{ updated }} bijgewerkt, {{ skipped }} had al voldoende instellingen voor delen.","There are no users or groups to apply sharing settings for.":"Er zijn geen gebruikers of groepen om instellingen voor delen toe te passen.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Aantal visualisaties op dit dashboard dat mogelijk geüpdatete instellingen voor delen krijgt: {{ visualizationsCount }}. Het aantal gebruikers of groepen waarop deze bijgewerkte instellingen van toepassing zijn: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Het toepassen van dezelfde instellingen voor delen zorgt ervoor dat gebruikers en groepen die toegang hebben tot het dashboard ook ten minste "Alleen weergeven" toegang hebben tot de visualisaties (grafieken, tabellen, kaarten, gebeurtenisgrafieken en gebeurtenisrapporten).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':`Als een gebruiker of groep al het recht "Bekijken en bewerken" heeft voor een visualisatie, wordt dit niet beperkt tot "Alleen weergeven". Het toegangsniveau 'Alle gebruikers' wordt niet bijgewerkt of gewijzigd.`,"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Het toepassen van delen kan niet ongedaan worden gemaakt en moet opnieuw worden gedaan als er nieuwe visualisaties aan het dashboard worden toegevoegd of als de instellingen voor delen worden gewijzigd.","Sharing and access: {{- objectName}}":"Delen en toegang: {{- objectName}}","Sharing and access":"Delen en toegang",Close:jR,"Dashboard sharing":"Dashboard delen"},BR="استفاده کننده",$R="دیتا",UR="",VR="جستجو",GR="بستن",HR={"View only":"","View and edit":"","No access":"دسترسی وجود ندارد","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"گروپ استفاده کننده",User:BR,Data:$R,"Remove access":"",Metadata:UR,"User or group":"",Search:VR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:GR,"Dashboard sharing":""},WR="",qR="مالومات (ډاټا)",YR="",ZR="جستجو",XR="بند یې کړئ",KR={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:WR,Data:qR,"Remove access":"",Metadata:YR,"User or group":"",Search:ZR,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:XR,"Dashboard sharing":""},QR="Utilizador",JR="Dados",eL="Metadados",tL="Pesquisar",iL="Fechar",nL={"View only":"Ver apenas","View and edit":"","No access":"Sem acesso","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Não disponível offline","Metadata access level":"","Access level":"Niveis de acesso ","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Grupo de usuários",User:QR,Data:JR,"Remove access":"",Metadata:eL,"User or group":"",Search:tL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Ocorreu algo de errado","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:iL,"Dashboard sharing":""},rL="Usuário",sL="Dados",aL="Metadados",oL="Pesquisar",lL="Fechar",cL={"View only":"","View and edit":"","No access":"Sem acesso","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Grupo de usuários",User:rL,Data:sL,"Remove access":"",Metadata:aL,"User or group":"",Search:oL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:lL,"Dashboard sharing":""},uL="",dL="Căutare",hL="Închidere",pL={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"","Can view":"","Can view and edit":"",Metadata:uL,"Remove access":"","User or group":"",Search:dL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:hL,"Dashboard sharing":""},fL="Пользователь",mL="Данные",gL="Метаданные",yL="Поиск",xL="Закрыть",vL={"View only":"Только просмотр","View and edit":"Просмотр и редактирование","No access":"Нет доступа","Give access to a user or group":"Предоставить доступ пользователю или группе","Data access level":"","Choose a level":"","Not available offline":"Недоступно в автономном режиме","Metadata access level":"","Access level":"Уровень доступа","Give access":"Предоставить доступ","Users and groups that currently have access":"Пользователи и группы с доступом","User / Group":"Пользователь / Группа","All users":"Все пользователи","Anyone logged in":"","User group":"Группа пользователей",User:fL,Data:mL,"Remove access":"Удалить доступ",Metadata:gL,"User or group":"Пользователь или группа",Search:yL,"Apply dashboard sharing settings to visualizations":"Применить параметры доступа к инфопанели к визуализациям","Something went wrong":"Что-то пошло не так","Apply sharing to dashboard visualizations":"Применить параметры доступа к визуализациям инфопанели","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Визуализации не были обновлены. Убедитесь, что у вас есть право на изменение параметров доступа ко всем визуализациям.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Не все визуализации были успешно обновлены. Обновлено: {{ success }}, не обновлено: {{ failed }} . Убедитесь, что у вас есть право на изменение общего параметров доступа ко всем визуализациям.","No visualizations were updated because sharing settings are already sufficient.":"Визуализации не были обновлены, необходимые права доступа уже предоставлены.","Successfully updated sharing for all visualizations.":"Доступ ко всем визуализациям успешно обновлен","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Нет необходимости обнавлять все параметры доступа к визуализациям. Обновлено: {{ updated }}, доступ уже предоставлен: {{ skipped }}.","There are no users or groups to apply sharing settings for.":"Нет пользователей или групп для применения настроек общего доступа.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Количество визуализаций на данной инфопанели, которые потенциально получат обновленные настройки доступа: {{ visualizationsCount }}. Количество пользователей или групп, к которым будут применены обновленные настройки: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"Применение одинаковых параметров доступа гарантирует пользователям и группам, имеющим доступ к инфопанели, доступ (как минимум на просмотр) к ее визуализациям (графикам, таблицам, картам, графикам событий и отчетам).",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Если у пользователя или группы уже есть доступ "Просмотр и редактирование" к визуализации, он не будет уменьшен до "Только просмотр". Уровень доступа "Все пользователи" не будет обновлен или изменен.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Параметров доступа нельзя отменить. Параметры должны устанавливаться заново, если на инфопанель добавлены новые визуализации или настройки доступа изменены.","Sharing and access: {{- objectName}}":"Доступ: {{- objectName}}","Sharing and access":"Совместное использование и доступ",Close:xL,"Dashboard sharing":" Совместное использование инфопанели"},bL="",_L="දත්ත",wL="",CL="සොයන්න",TL="වසන්න",SL={"View only":"","View and edit":"","No access":"පිවිසිය නොහැක","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"මාර්ග අපගතව නොතිබේ","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:bL,Data:_L,"Remove access":"",Metadata:wL,"User or group":"",Search:CL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:TL,"Dashboard sharing":""},EL="",kL="Data",AL="Metadata",ML="Sök",PL="Stänga",IL={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:EL,Data:kL,"Remove access":"",Metadata:AL,"User or group":"",Search:ML,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Något gick fel","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:PL,"Dashboard sharing":""},DL="",RL="Dadus",LL="",zL="",NL="Taka",OL={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:DL,Data:RL,"Remove access":"",Metadata:LL,"User or group":"",Search:zL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:NL,"Dashboard sharing":""},jL="Корбар",FL="Иттилоот",BL="",$L="Ҷустуҷӯ",UL="Пӯшидан",VL={"View only":"","View and edit":"","No access":"","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:jL,Data:FL,"Remove access":"",Metadata:BL,"User or group":"",Search:$L,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:UL,"Dashboard sharing":""},GL="Користувач",HL="Дані",WL="Метадані",qL="Пошук",YL="Закрити",ZL={"View only":"Тільки перегляд","View and edit":"Перегляд і редагування","No access":"Немає доступу","Give access to a user or group":"Надати доступ користувачеві або групі","Data access level":"","Choose a level":"","Not available offline":"Недоступно в автономному режимі","Metadata access level":"","Access level":"Рівень доступу","Give access":"Надати доступ","Users and groups that currently have access":"Користувачі та групи, які наразі мають доступ","User / Group":"Користувач / Група","All users":"Всі користувачі","Anyone logged in":"","User group":"Група користувачів",User:GL,Data:HL,"Remove access":"Видалити доступ",Metadata:WL,"User or group":"Користувач або група",Search:qL,"Apply dashboard sharing settings to visualizations":"Застосувати налаштування спільного доступу до інформаційної панелі до візуалізації","Something went wrong":"Сталася помилка","Apply sharing to dashboard visualizations":"Застосувати спільний доступ до візуалізації інформаційної панелі","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"Візуалізації не оновлено. Переконайтеся, що у вас є дозвіл на зміну спільного доступу для всіх візуалізацій.","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"Не всі візуалізації вдалося оновити. {{ success }} успішно оновлено, {{ failed }} не вдалося оновити. Переконайтеся, що у вас є дозвіл на зміну спільного доступу для всіх візуалізацій.","No visualizations were updated because sharing settings are already sufficient.":"Візуалізації не оновлено, оскільки налаштувань спільного доступу вже достатньо.","Successfully updated sharing for all visualizations.":"Успішно оновлено спільний доступ для всіх візуалізацій.","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"Не всі налаштування спільного доступу до візуалізації потрібно було оновити. {{ updated }} оновлено, {{ skipped }} вже має достатньо налаштувань спільного доступу.","There are no users or groups to apply sharing settings for.":"Немає користувачів або груп, для яких можна застосувати налаштування спільного доступу.","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"Кількість візуалізацій на цій інформаційній панелі, які потенційно отримають оновлені налаштування спільного доступу: {{ visualizationsCount }}. Кількість користувачів або груп, до яких застосовуватимуться ці оновлені налаштування: {{ entityAmount }}.",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':'Застосування однакових налаштувань спільного доступу гарантує, що користувачі та групи, які мають доступ до інформаційної панелі, також мають принаймні доступ "Тільки перегляд" до її візуалізацій (діаграми, таблиці, мапи, діаграми подій та звіти про події).','If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':'Якщо користувач або група вже мають доступ до візуалізації "Перегляд і редагування", це не буде зведено до рівня "Тільки перегляд". Рівень доступу "Усі користувачі" не буде оновлено або змінено.',"Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"Застосування спільного доступу неможливо скасувати, і його потрібно виконати знову, якщо на інформаційній панелі додано нові візуалізації або змінено налаштування спільного доступу.","Sharing and access: {{- objectName}}":"Спільний доступ: {{- objectName}}","Sharing and access":"Спільний доступ",Close:YL,"Dashboard sharing":"Спільний доступ до інформаційної панелі"},XL="صارف",KL="ڈیٹا",QL="میٹا ڈیٹا",JL="تلاش کریں",e4="بند",t4={"View only":"","View and edit":"","No access":"داخلہ ممنوع ہے","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"صارف گروپ",User:XL,Data:KL,"Remove access":"",Metadata:QL,"User or group":"",Search:JL,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:e4,"Dashboard sharing":""},i4="Metadata",n4="Izlash",r4="Yopmoq",s4={"View only":"","View and edit":"","Give access to a user or group":"","Access level":"","Select a level":"Pogʼonani tanlang","Not available offline":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","No access":"Kirish taʼqiqlangan","Can view":"Кўриш мумкин","Can view and edit":"",Metadata:i4,"Remove access":"","User or group":"",Search:n4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Nimadir notoʼgʼri bajarildi","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:r4,"Dashboard sharing":""},a4="Фойдаланувчи",o4="Маълумот",l4="МетаМаълумот",c4="Қидириш",u4="Ёпиш",d4={"View only":"Фақат кўриш учун","View and edit":"Кўриш ва таҳрирлаш","No access":"Кириш ҳуқуқи мавжуд эмас","Give access to a user or group":"Фойдаланувчи ёки гуруҳга киришга рухсат бериш","Data access level":"","Choose a level":"","Not available offline":"Оффлайн режимда мавжуд эмас","Metadata access level":"","Access level":"Кириш мумкин бўлган босқичлар","Give access":"Рухсат бериш","Users and groups that currently have access":"Рухсати бор бўлган яойдаланувчилар ёки гуруҳлар","User / Group":"Фойдаланувчи/Гуруҳ","All users":"Барча фойдаланувчилар","Anyone logged in":"","User group":"Фойдаланувчи гуруҳи",User:a4,Data:o4,"Remove access":"Рухсатни бекор қилиш",Metadata:l4,"User or group":"Фойдаланувчи ёки гуруҳ",Search:c4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Нимадир нотўғри бажарилди","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"Уланиш ва кириш: {{- objectName}}","Sharing and access":"Уланиш ва кириш",Close:u4,"Dashboard sharing":"Бошқарув панелига уланиш"},h4="Foydalanuvchi",p4="Маълумот",f4="Metadata",m4="Izlash",g4="Yopmoq",y4={"View only":"","View and edit":"","No access":"Kirish taʼqiqlangan","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"",User:h4,Data:p4,"Remove access":"",Metadata:f4,"User or group":"",Search:m4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Nimadir notoʼgʼri bajarildi","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:g4,"Dashboard sharing":""},x4="Người dùng",v4="Dữ liệu",b4="Siêu dữ liệu",_4="Tìm kiếm",w4="Đóng lại",C4={"View only":"Chỉ xem","View and edit":"","No access":"Không truy cập","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"Không có cho ngoại tuyến","Metadata access level":"","Access level":"","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"Nhóm Người Dùng",User:x4,Data:v4,"Remove access":"",Metadata:b4,"User or group":"",Search:_4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"Có lỗi","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:w4,"Dashboard sharing":""},T4="用户",S4="数据",E4="元数据",k4="搜索",A4="关闭",M4={"View only":"只读","View and edit":"查看和编辑","No access":"不能访问","Give access to a user or group":"授予用户或组访问权限","Data access level":"数据访问级别","Choose a level":"选择级别","Not available offline":"离线不可用","Metadata access level":"元数据访问级别","Access level":"访问等级","Give access":"授予访问权限","Users and groups that currently have access":"当前具有访问权限的用户和组","User / Group":"用户/组","All users":"全部用户","Anyone logged in":"已经登录的任何人","User group":"用户组",User:T4,Data:S4,"Remove access":"删除访问权限",Metadata:E4,"User or group":"用户或组",Search:k4,"Apply dashboard sharing settings to visualizations":"将仪表板共享设置应用于可视化","Something went wrong":"出问题了","Apply sharing to dashboard visualizations":"将共享应用于仪表板可视化","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"没有更新可视化。检查您是否有权更改所有可视化的共享。","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"并非所有可视化都可以成功更新。 {{ success }}更新成功，{{ failed }}更新失败。检查您是否有权更改所有可视化的共享。","No visualizations were updated because sharing settings are already sufficient.":"没有更新可视化，因为共享设置已经足够了。","Successfully updated sharing for all visualizations.":"已成功更新所有可视化的共享。","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"并非所有可视化共享设置都需要更新。 {{ updated }}更新，{{ skipped }}已经有足够的分享设置。","There are no users or groups to apply sharing settings for.":"没有要应用共享设置的用户或组。","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"此仪表板上可能会获得更新共享设置的可视化数量：{{ visualizationsCount }}。这些更新的设置将应用于的用户或组的数量：{{ entityAmount }}。",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"应用相同的共享设置可确保有权访问仪表板的用户和组也至少具有对其可视化（图表、表格、地图、事件图表和事件报告）的“仅查看”访问权限。",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"如果用户或组已经具有对可视化的“查看和编辑”访问权限，则这不会减少为“仅查看”。 “所有用户”访问级别不会更新或更改。","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"应用共享无法撤消，如果新的可视化添加到仪表板或更改其共享设置，则需要再次执行。","Sharing and access: {{- objectName}}":"共享和访问：{{- objectName}}","Sharing and access":"共享和访问",Close:A4,"Dashboard sharing":"仪表板共享"},P4="用户",I4="数据",D4="元数据",R4="搜索",L4="关闭",z4={"View only":"","View and edit":"","No access":"不能访问","Give access to a user or group":"","Data access level":"","Choose a level":"","Not available offline":"","Metadata access level":"","Access level":"访问等级","Give access":"","Users and groups that currently have access":"","User / Group":"","All users":"","Anyone logged in":"","User group":"User组",User:P4,Data:I4,"Remove access":"",Metadata:D4,"User or group":"",Search:R4,"Apply dashboard sharing settings to visualizations":"","Something went wrong":"出了些问题","Apply sharing to dashboard visualizations":"","No visualizations were updated. Check that you have permission to change sharing for all visualizations.":"","Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.":"","No visualizations were updated because sharing settings are already sufficient.":"","Successfully updated sharing for all visualizations.":"","Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.":"","There are no users or groups to apply sharing settings for.":"","Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.":"",'Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).':"",'If a user or group already has "View and edit" access to a visualization, this won\'t be reduced to "View only". The "All users" access level won\'t be updated or changed.':"","Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.":"","Sharing and access: {{- objectName}}":"","Sharing and access":"",Close:L4,"Dashboard sharing":""},zn="default";it.addResources("ar",zn,nD);it.addResources("ar_IQ",zn,cD);it.addResources("ckb",zn,pD);it.addResources("cs",zn,vD);it.addResources("da",zn,SD);it.addResources("en",zn,ID);it.addResources("es",zn,OD);it.addResources("es_419",zn,VD);it.addResources("fi",zn,qD);it.addResources("fr",zn,JD);it.addResources("id",zn,sR);it.addResources("km",zn,dR);it.addResources("lo",zn,yR);it.addResources("my",zn,CR);it.addResources("nb",zn,MR);it.addResources("ne",zn,RR);it.addResources("nl",zn,FR);it.addResources("prs",zn,HR);it.addResources("ps",zn,KR);it.addResources("pt",zn,nL);it.addResources("pt_BR",zn,cL);it.addResources("ro",zn,pL);it.addResources("ru",zn,vL);it.addResources("si",zn,SL);it.addResources("sv",zn,IL);it.addResources("tet",zn,OL);it.addResources("tg",zn,VL);it.addResources("uk",zn,ZL);it.addResources("ur",zn,t4);it.addResources("uz_Latn",zn,s4);it.addResources("uz_UZ_Cyrl",zn,d4);it.addResources("uz_UZ_Latn",zn,y4);it.addResources("vi",zn,C4);it.addResources("zh",zn,M4);it.addResources("zh_CN",zn,z4);const gv=i=>{let{onClose:e,name:t,children:r,dataTest:s="dhis2-uicore-sharingdialog-modal"}=i;const l=t?it.t("Sharing and access: {{- objectName}}",{objectName:t,nsSeparator:"|"}):it.t("Sharing and access");return Ae.createElement(Cu,{large:!0,position:"top",onClose:e,dataTest:s},Ae.createElement(qv,null,l),Ae.createElement(wy,null,r),Ae.createElement(Yv,null,Ae.createElement(Zv,{end:!0},Ae.createElement(Gn,{type:"button",secondary:!0,onClick:e},it.t("Close")))))};gv.propTypes={children:me.node.isRequired,dataTest:me.string,name:me.string,onClose:me.func};const Qd=Ae.forwardRef((i,e)=>{let{icon:t,onClick:r,selected:s,disabled:l,children:u,className:n,dataTest:p="dhis2-uicore-tab"}=i,m=Ue.useRef(null);e&&(m=e);const[g,v]=Ue.useState(!1);return Ue.useEffect(()=>{(()=>{const C=m.current.scrollWidth>m.current.clientWidth;v(C)})()},[]),Ae.createElement("button",{onClick:l?void 0:y=>r({},y),"data-test":p,ref:m,role:"tab","aria-selected":s?"true":"false","aria-disabled":l?"true":"false",onFocus:l?void 0:y=>r({},y),tabIndex:-1,className:jt.dynamic([["2433456263",[We.grey400,We.grey600,ni.focus,We.grey600,We.grey900,We.grey600,We.grey800,ni.primary800,ni.primary700,ni.primary700,ni.primary700,We.grey500,We.grey500]]])+` ${Br("tab",n,{selected:s,disabled:l})}`},t,g?Ae.createElement(My,{content:u,maxWidth:"100%"},Ae.createElement("span",{ref:m,className:jt.dynamic([["2433456263",[We.grey400,We.grey600,ni.focus,We.grey600,We.grey900,We.grey600,We.grey800,ni.primary800,ni.primary700,ni.primary700,ni.primary700,We.grey500,We.grey500]]])},u)):Ae.createElement("span",{ref:m,className:jt.dynamic([["2433456263",[We.grey400,We.grey600,ni.focus,We.grey600,We.grey900,We.grey600,We.grey800,ni.primary800,ni.primary700,ni.primary700,ni.primary700,We.grey500,We.grey500]]])},u),Ae.createElement(jt,{id:"2433456263",dynamic:[We.grey400,We.grey600,ni.focus,We.grey600,We.grey900,We.grey600,We.grey800,ni.primary800,ni.primary700,ni.primary700,ni.primary700,We.grey500,We.grey500]},[`button.__jsx-style-dynamic-selector{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;position:relative;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;vertical-align:bottom;height:100%;padding:16px 16px 11px;background-color:transparent;outline:none;border:none;border-bottom:1px solid ${We.grey400};color:${We.grey600};font-size:14px;line-height:20px;cursor:pointer;}`,".fixed>button.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}","button.__jsx-style-dynamic-selector::after{content:' ';display:block;position:absolute;bottom:-1px;inset-inline-start:0;height:4px;width:100%;background-color:transparent;}","span.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;max-width:320px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-transition:fill 150ms ease-in-out;transition:fill 150ms ease-in-out;}",`button.__jsx-style-dynamic-selector:focus{outline:3px solid ${ni.focus};outline-offset:-3px;}`,"button.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector:not(:focus-visible){outline:none;}",`button.__jsx-style-dynamic-selector>svg{fill:${We.grey600};width:14px;height:14px;margin:0 4px 0 0;}`,`button.__jsx-style-dynamic-selector:hover{color:${We.grey900};}`,`button.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector::after{background-color:${We.grey600};height:2px;}`,`button.__jsx-style-dynamic-selector:active.__jsx-style-dynamic-selector::after{background-color:${We.grey800};}`,`button.selected.__jsx-style-dynamic-selector{color:${ni.primary800};}`,`button.selected.__jsx-style-dynamic-selector::after{background-color:${ni.primary700};-webkit-transition:background-color 150ms ease-in-out;transition:background-color 150ms ease-in-out;}`,`button.selected.__jsx-style-dynamic-selector:hover.__jsx-style-dynamic-selector::after{background-color:${ni.primary700};height:4px;}`,`button.selected.__jsx-style-dynamic-selector>svg{fill:${ni.primary700};}`,`button.disabled.__jsx-style-dynamic-selector{color:${We.grey500};cursor:not-allowed;}`,"button.disabled.__jsx-style-dynamic-selector:hover,button.selected.__jsx-style-dynamic-selector:hover{background-color:transparent;}",`button.disabled.__jsx-style-dynamic-selector>svg{fill:${We.grey500};}`]))});Qd.propTypes={children:me.node,className:me.string,dataTest:me.string,disabled:me.bool,icon:me.element,selected:me.bool,onClick:me.func};Qd.displayName="Tab";const yv=250,N4=.5;function O4(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=i.scrollLeft,s=j4(i,r,t),l=s-r,u=F4({scrollBox:i,callback:e,startValue:r,endValue:s,change:l});window.requestAnimationFrame(u)}function j4(i,e,t){const r=i.clientWidth*N4;return Math.floor(e+r*(t?-1:1))}function F4(i){let{scrollBox:e,callback:t,startValue:r,endValue:s,change:l}=i,u,n,p;return function m(g){u||(u=g),n=g-u,p=B4({currentTime:n,DURATION:yv,startValue:r,change:l}),n>=yv?(p!==s&&(e.scrollLeft=s),t&&t()):(e.scrollLeft=p,window.requestAnimationFrame(m))}}function B4(i){let{currentTime:e,startValue:t,change:r}=i;return(e/=yv/2)<1?r/2*e*e+t:-r/2*(--e*(e-2)-1)+t}let Km;const xv="__vertical-scrollbar-height-test__",$4=`
    .${xv} {
        position: absolute;
        top: -9999px;
        width: 100px;
        height: 100px;
        overflow-x: scroll;
    }
    .${xv}::-webkit-scrollbar {
        display: none;
    }
`;function U4(){if(Km)return Km;const i=document.createElement("style");i.innerHTML=$4;const e=document.createElement("div");return e.classList.add(xv),document.body.appendChild(i),document.body.appendChild(e),Km=e.offsetHeight-e.clientHeight,document.body.removeChild(i),document.body.removeChild(e),Km}const Kg=i=>{let{children:e,disabled:t,hidden:r,onClick:s}=i;return Ae.createElement("button",{onClick:t?void 0:s,className:jt.dynamic([["2701682090",[We.white,We.grey400,We.grey600,We.grey100,We.grey200,We.grey500]]])+" "+(Br("scroll-button",{disabled:t,hidden:r})||"")},e,Ae.createElement(jt,{id:"2701682090",dynamic:[We.white,We.grey400,We.grey600,We.grey100,We.grey200,We.grey500]},[`.scroll-button.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:inherit;background-color:${We.white};border:none;border-bottom:1px solid ${We.grey400};outline:none;padding:16px 16px 11px 16px;cursor:pointer;}`,".scroll-button.hidden.__jsx-style-dynamic-selector{display:none;}",`.scroll-button.__jsx-style-dynamic-selector svg{width:20px;height:20px;fill:${We.grey600};-webkit-transition:opacity 150ms ease-in-out;transition:opacity 150ms ease-in-out;opacity:1;}`,`.scroll-button.__jsx-style-dynamic-selector:hover{background-color:${We.grey100};}`,`.scroll-button.__jsx-style-dynamic-selector:active{background-color:${We.grey200};}`,".scroll-button.disabled.__jsx-style-dynamic-selector{cursor:not-allowed;}",".scroll-button.disabled.__jsx-style-dynamic-selector:hover{background-color:transparent;}",`.scroll-button.disabled.__jsx-style-dynamic-selector svg{fill:${We.grey500};}`]))};Kg.displayName="ScrollButton";Kg.propTypes={children:me.any.isRequired,disabled:me.bool,hidden:me.bool,onClick:me.func};function ml(i,e,t){return(e=V4(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function V4(i){var e=G4(i,"string");return typeof e=="symbol"?e:e+""}function G4(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class wS extends Ue.Component{constructor(e){super(e),ml(this,"scrollBox",Ue.createRef()),ml(this,"scrollArea",Ue.createRef()),ml(this,"horizontalScrollBarHeight",U4()),ml(this,"scrollBoxResizeObserver",null),ml(this,"calculateShouldHideButtons",()=>{this.setState({hideScrollButtonsInitialized:!1});const{current:t}=this.scrollBox,{current:r}=this.scrollArea,s=r.offsetWidth,l=t.offsetWidth,u=s<=l;this.setState({hideScrollButtons:u}),u||(this.state.scrolledToStart&&this.scrollLeft(),this.state.scrolledToEnd&&this.scrollRight()),this.setState({hideScrollButtonsInitialized:!0})}),ml(this,"scrollRight",()=>this.scroll()),ml(this,"scrollLeft",()=>this.scroll(!0)),ml(this,"animatedScrollCallback",()=>{this.updateScrolledToStates(),this.attachSideScrollListener()}),ml(this,"updateScrolledToStates",()=>{const{scrollLeft:t,offsetWidth:r}=this.scrollBox.current,{offsetWidth:s}=this.scrollArea.current,l=t<=0,u=t+r>=s;(this.state.scrolledToStart!==l||this.state.scrolledToEnd!==u)&&this.setState({scrolledToStart:l,scrolledToEnd:u})}),this.state={scrolledToStart:!0,scrolledToEnd:!1,hideScrollButtonsInitialized:!1,hideScrollButtons:!1},this.scrollBoxResizeObserver=new ResizeObserver(this.calculateShouldHideButtons)}componentDidMount(){this.scrollSelectedTabIntoView(),this.attachSideScrollListener(),this.manageShouldHideButtons()}componentWillUnmount(){this.removeSideScrollListener(),this.scrollBoxResizeObserver.disconnect()}manageShouldHideButtons(){const{current:e}=this.scrollBox;this.scrollBoxResizeObserver.observe(e),this.calculateShouldHideButtons()}scroll(e){this.removeSideScrollListener(),O4(this.scrollBox.current,this.animatedScrollCallback,e)}scrollSelectedTabIntoView(){const e=this.scrollBox.current,t=e.querySelector(".tab.selected");if(t){const r=t.offsetLeft+t.offsetWidth;r>e.offsetWidth&&(e.scrollLeft=r-e.offsetWidth)}}attachSideScrollListener(){this.scrollBox.current.addEventListener("scroll",this.updateScrolledToStates)}removeSideScrollListener(){this.scrollBox.current.removeEventListener("scroll",this.updateScrolledToStates)}render(){const{scrolledToStart:e,scrolledToEnd:t,hideScrollButtonsInitialized:r,hideScrollButtons:s}=this.state,{children:l,className:u,dataTest:n}=this.props,p=!r||s;return Ae.createElement("div",{"data-test":n,className:"jsx-191575146 "+jt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" "+(Br("scroll-bar",u)||"")},Ae.createElement(Kg,{disabled:e,onClick:this.scrollLeft,hidden:p},Ae.createElement(bC,null)),Ae.createElement("div",{className:"jsx-191575146 "+jt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-box-clipper"},Ae.createElement("div",{ref:this.scrollBox,className:"jsx-191575146 "+jt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-box"},Ae.createElement("div",{ref:this.scrollArea,className:"jsx-191575146 "+jt.dynamic([["4174900658",[-this.horizontalScrollBarHeight]]])+" scroll-area"},l))),Ae.createElement(Kg,{disabled:t,onClick:this.scrollRight,hidden:p},Ae.createElement(_C,null)),Ae.createElement(jt,{id:"4174900658",dynamic:[-this.horizontalScrollBarHeight]},[`.scroll-box.__jsx-style-dynamic-selector{margin-bottom:${-this.horizontalScrollBarHeight}px;}`]),Ae.createElement(jt,{id:"191575146"},[".scroll-bar.jsx-191575146{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;}",".scroll-box-clipper.jsx-191575146{overflow-y:hidden;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".scroll-box.jsx-191575146{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;overflow-x:scroll;-webkit-overflow-scrolling:touch;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".scroll-box.jsx-191575146::-webkit-scrollbar{display:none;}",".scroll-area.jsx-191575146{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;overflow-x:hidden;}"]))}}wS.propTypes={children:me.node.isRequired,dataTest:me.string.isRequired,className:me.string};const vv=i=>{let{children:e,fixed:t,dataTest:r}=i;const s=Ue.useRef(null),l=Ue.useMemo(()=>Ae.Children.map(e,()=>Ae.createRef()),[e]),u=n=>{const p=document.activeElement;if(s.current&&s.current===p){l.length>0&&l[0].current&&l[0].current.focus();return}const m=l.findIndex(g=>g.current===p);if(m!==-1){if(n.key==="ArrowRight"){n.preventDefault();const g=(m+1)%l.length;l[g].current.focus()}if(n.key==="ArrowLeft"){n.preventDefault();const g=(m-1+l.length)%l.length;l[g].current.focus()}}};return Ae.createElement("div",{ref:s,"data-test":r,role:"tablist",tabIndex:0,onKeyDown:u,className:jt.dynamic([["771129571",[We.grey400,We.white]]])+" "+(Br({fixed:t})||"")},Ae.Children.map(e,(n,p)=>Ae.isValidElement(n)?Ae.cloneElement(n,{ref:l[p]}):Ae.createElement("span",{ref:l[p],tabIndex:-1,className:jt.dynamic([["771129571",[We.grey400,We.white]]])},n)),Ae.createElement(jt,{id:"771129571",dynamic:[We.grey400,We.white]},[`div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;position:relative;overflow:hidden;box-shadow:inset 0 -1px 0 0 ${We.grey400};-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;background:${We.white};}`]))};vv.propTypes={dataTest:me.string.isRequired,children:me.node,fixed:me.bool};const Fb=i=>{let{fixed:e,children:t,className:r,scrollable:s,dataTest:l="dhis2-uicore-tabbar"}=i;return s?Ae.createElement("div",{className:r,"data-test":l},Ae.createElement(wS,{dataTest:`${l}-scrollbar`},Ae.createElement(vv,{fixed:e,dataTest:`${l}-tabs`},t))):Ae.createElement("div",{className:r,"data-test":l},Ae.createElement(vv,{fixed:e,dataTest:`${l}-tabs`},t))};Fb.propTypes={children:me.node,className:me.string,dataTest:me.string,fixed:me.bool,scrollable:me.bool};var vu=[],H4=function(){return vu.some(function(i){return i.activeTargets.length>0})},W4=function(){return vu.some(function(i){return i.skippedTargets.length>0})},Dw="ResizeObserver loop completed with undelivered notifications.",q4=function(){var i;typeof ErrorEvent=="function"?i=new ErrorEvent("error",{message:Dw}):(i=document.createEvent("Event"),i.initEvent("error",!1,!1),i.message=Dw),window.dispatchEvent(i)},Jp;(function(i){i.BORDER_BOX="border-box",i.CONTENT_BOX="content-box",i.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Jp||(Jp={}));var bu=function(i){return Object.freeze(i)},Y4=function(){function i(e,t){this.inlineSize=e,this.blockSize=t,bu(this)}return i}(),CS=function(){function i(e,t,r,s){return this.x=e,this.y=t,this.width=r,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,bu(this)}return i.prototype.toJSON=function(){var e=this,t=e.x,r=e.y,s=e.top,l=e.right,u=e.bottom,n=e.left,p=e.width,m=e.height;return{x:t,y:r,top:s,right:l,bottom:u,left:n,width:p,height:m}},i.fromRect=function(e){return new i(e.x,e.y,e.width,e.height)},i}(),Bb=function(i){return i instanceof SVGElement&&"getBBox"in i},TS=function(i){if(Bb(i)){var e=i.getBBox(),t=e.width,r=e.height;return!t&&!r}var s=i,l=s.offsetWidth,u=s.offsetHeight;return!(l||u||i.getClientRects().length)},Rw=function(i){var e;if(i instanceof Element)return!0;var t=(e=i==null?void 0:i.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(t&&i instanceof t.Element)},Z4=function(i){switch(i.tagName){case"INPUT":if(i.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},jp=typeof window<"u"?window:{},Qm=new WeakMap,Lw=/auto|scroll/,X4=/^tb|vertical/,K4=/msie|trident/i.test(jp.navigator&&jp.navigator.userAgent),Mo=function(i){return parseFloat(i||"0")},Gd=function(i,e,t){return i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=!1),new Y4((t?e:i)||0,(t?i:e)||0)},zw=bu({devicePixelContentBoxSize:Gd(),borderBoxSize:Gd(),contentBoxSize:Gd(),contentRect:new CS(0,0,0,0)}),SS=function(i,e){if(e===void 0&&(e=!1),Qm.has(i)&&!e)return Qm.get(i);if(TS(i))return Qm.set(i,zw),zw;var t=getComputedStyle(i),r=Bb(i)&&i.ownerSVGElement&&i.getBBox(),s=!K4&&t.boxSizing==="border-box",l=X4.test(t.writingMode||""),u=!r&&Lw.test(t.overflowY||""),n=!r&&Lw.test(t.overflowX||""),p=r?0:Mo(t.paddingTop),m=r?0:Mo(t.paddingRight),g=r?0:Mo(t.paddingBottom),v=r?0:Mo(t.paddingLeft),y=r?0:Mo(t.borderTopWidth),C=r?0:Mo(t.borderRightWidth),_=r?0:Mo(t.borderBottomWidth),w=r?0:Mo(t.borderLeftWidth),k=v+m,S=p+g,x=w+C,P=y+_,D=n?i.offsetHeight-P-i.clientHeight:0,T=u?i.offsetWidth-x-i.clientWidth:0,I=s?k+x:0,N=s?S+P:0,q=r?r.width:Mo(t.width)-I-T,Z=r?r.height:Mo(t.height)-N-D,X=q+k+T+x,O=Z+S+D+P,V=bu({devicePixelContentBoxSize:Gd(Math.round(q*devicePixelRatio),Math.round(Z*devicePixelRatio),l),borderBoxSize:Gd(X,O,l),contentBoxSize:Gd(q,Z,l),contentRect:new CS(v,p,q,Z)});return Qm.set(i,V),V},ES=function(i,e,t){var r=SS(i,t),s=r.borderBoxSize,l=r.contentBoxSize,u=r.devicePixelContentBoxSize;switch(e){case Jp.DEVICE_PIXEL_CONTENT_BOX:return u;case Jp.BORDER_BOX:return s;default:return l}},Q4=function(){function i(e){var t=SS(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=bu([t.borderBoxSize]),this.contentBoxSize=bu([t.contentBoxSize]),this.devicePixelContentBoxSize=bu([t.devicePixelContentBoxSize])}return i}(),kS=function(i){if(TS(i))return 1/0;for(var e=0,t=i.parentNode;t;)e+=1,t=t.parentNode;return e},J4=function(){var i=1/0,e=[];vu.forEach(function(u){if(u.activeTargets.length!==0){var n=[];u.activeTargets.forEach(function(m){var g=new Q4(m.target),v=kS(m.target);n.push(g),m.lastReportedSize=ES(m.target,m.observedBox),v<i&&(i=v)}),e.push(function(){u.callback.call(u.observer,n,u.observer)}),u.activeTargets.splice(0,u.activeTargets.length)}});for(var t=0,r=e;t<r.length;t++){var s=r[t];s()}return i},Nw=function(i){vu.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(s){s.isActive()&&(kS(s.target)>i?t.activeTargets.push(s):t.skippedTargets.push(s))})})},ez=function(){var i=0;for(Nw(i);H4();)i=J4(),Nw(i);return W4()&&q4(),i>0},x0,AS=[],tz=function(){return AS.splice(0).forEach(function(i){return i()})},iz=function(i){if(!x0){var e=0,t=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return tz()}).observe(t,r),x0=function(){t.textContent="".concat(e?e--:e++)}}AS.push(i),x0()},nz=function(i){iz(function(){requestAnimationFrame(i)})},wg=0,rz=function(){return!!wg},sz=250,az={attributes:!0,characterData:!0,childList:!0,subtree:!0},Ow=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],jw=function(i){return i===void 0&&(i=0),Date.now()+i},v0=!1,oz=function(){function i(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return i.prototype.run=function(e){var t=this;if(e===void 0&&(e=sz),!v0){v0=!0;var r=jw(e);nz(function(){var s=!1;try{s=ez()}finally{if(v0=!1,e=r-jw(),!rz())return;s?t.run(1e3):e>0?t.run(e):t.start()}})}},i.prototype.schedule=function(){this.stop(),this.run()},i.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,az)};document.body?t():jp.addEventListener("DOMContentLoaded",t)},i.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Ow.forEach(function(t){return jp.addEventListener(t,e.listener,!0)}))},i.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Ow.forEach(function(t){return jp.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},i}(),bv=new oz,Fw=function(i){!wg&&i>0&&bv.start(),wg+=i,!wg&&bv.stop()},lz=function(i){return!Bb(i)&&!Z4(i)&&getComputedStyle(i).display==="inline"},cz=function(){function i(e,t){this.target=e,this.observedBox=t||Jp.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return i.prototype.isActive=function(){var e=ES(this.target,this.observedBox,!0);return lz(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},i}(),uz=function(){function i(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}return i}(),Jm=new WeakMap,Bw=function(i,e){for(var t=0;t<i.length;t+=1)if(i[t].target===e)return t;return-1},eg=function(){function i(){}return i.connect=function(e,t){var r=new uz(e,t);Jm.set(e,r)},i.observe=function(e,t,r){var s=Jm.get(e),l=s.observationTargets.length===0;Bw(s.observationTargets,t)<0&&(l&&vu.push(s),s.observationTargets.push(new cz(t,r&&r.box)),Fw(1),bv.schedule())},i.unobserve=function(e,t){var r=Jm.get(e),s=Bw(r.observationTargets,t),l=r.observationTargets.length===1;s>=0&&(l&&vu.splice(vu.indexOf(r),1),r.observationTargets.splice(s,1),Fw(-1))},i.disconnect=function(e){var t=this,r=Jm.get(e);r.observationTargets.slice().forEach(function(s){return t.unobserve(e,s.target)}),r.activeTargets.splice(0,r.activeTargets.length)},i}(),dz=function(){function i(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");eg.connect(this,e)}return i.prototype.observe=function(e,t){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Rw(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");eg.observe(this,e,t)},i.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Rw(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");eg.unobserve(this,e)},i.prototype.disconnect=function(){eg.disconnect(this)},i.toString=function(){return"function ResizeObserver () { [polyfill code] }"},i}();const MS=Ae[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],hz=i=>{const e=Ue.useRef(i);return Ue.useEffect(()=>{e.current=i}),e},pz=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:dz;function fz(){}function mz(i,e){const t=yz(),r=hz(e);return MS(()=>{let s=!1;const l=i&&"current"in i?i.current:i;if(!l)return fz;function u(n,p){s||r.current(n,p)}return t.subscribe(l,u),()=>{s=!0,t.unsubscribe(l,u)}},[i,t,r]),t.observer}function gz(){let i=!1,e=[];const t=new Map,r=new pz((s,l)=>{e=e.concat(s);function u(){const n=new Set;for(let p=0;p<e.length;p++){if(n.has(e[p].target))continue;n.add(e[p].target);const m=t.get(e[p].target);m==null||m.forEach(g=>g(e[p],l))}e=[],i=!1}i||window.requestAnimationFrame(u),i=!0});return{observer:r,subscribe(s,l){var u;r.observe(s);const n=(u=t.get(s))!==null&&u!==void 0?u:[];n.push(l),t.set(s,n)},unsubscribe(s,l){var u;const n=(u=t.get(s))!==null&&u!==void 0?u:[];if(n.length===1){r.unobserve(s),t.delete(s);return}const p=n.indexOf(l);p!==-1&&n.splice(p,1),t.set(s,n)}}}let b0;const yz=()=>b0||(b0=gz()),xz=(i,e)=>{const[t,r]=Ue.useState(()=>{var s,l;const u=i&&"current"in i?i.current:i;return u?[u.offsetWidth,u.offsetHeight]:[(s=void 0)!==null&&s!==void 0?s:0,(l=void 0)!==null&&l!==void 0?l:0]});return MS(()=>{const s=i&&"current"in i?i.current:i;s&&r([s.offsetWidth,s.offsetHeight])},[i]),mz(i,s=>{const l=s.target;r([l.offsetWidth,l.offsetHeight])}),t},PS=i=>{let{children:e,dataTest:t,maxHeight:r="280px",menuWidth:s,onClick:l,menuRef:u}=i;return Ae.createElement(by,{onBackdropClick:l,transparent:!0},Ae.createElement(sh,{reference:u,placement:"bottom",observeReferenceResize:!0},Ae.createElement("div",{"data-test":`${t}-menuwrapper`,className:jt.dynamic([["1686499909",[s,r]]])+" card"},Ae.createElement(Cy,null,e))),Ae.createElement(jt,{id:"1686499909",dynamic:[s,r]},[`.card.__jsx-style-dynamic-selector{width:${s};max-height:${r};}`]))};PS.propTypes={dataTest:me.string.isRequired,menuRef:me.object.isRequired,menuWidth:me.string.isRequired,children:me.node,maxHeight:me.string,onClick:me.func};const IS=i=>{let{dataTest:e="dhis2-sharingdialog-autocomplete",inputWidth:t,label:r,loading:s,onClose:l,onSearch:u,onSelect:n,placeholder:p,search:m,searchResults:g}=i;const v=Ue.useRef(null),[y]=xz(v),{isDisconnected:C}=Ty();return Ae.createElement(Ae.Fragment,null,Ae.createElement("div",{ref:v},Ae.createElement(bf,{label:r,loading:s,placeholder:p,onChange:_=>{let{value:w}=_;return u(w)},value:m,inputWidth:t,disabled:C,helpText:C?it.t("Not available offline"):""})),g.length>0&&Ae.createElement(PS,{onClick:l,menuWidth:`${y}px`,menuRef:v,dataTest:`${e}-menu`},Ae.createElement(Xv,null,g.map(_=>Ae.createElement(Tu,{key:_.id,label:_.displayName,value:_.id,onClick:w=>{let{value:k}=w;return n(k)}})))))};IS.propTypes={searchResults:me.arrayOf(me.shape({displayName:me.string,id:me.string})).isRequired,dataTest:me.string,inputWidth:me.string,label:me.string,loading:me.bool,placeholder:me.string,search:me.string,onClose:me.func,onSearch:me.func,onSelect:me.func};const vz={search:{resource:"sharing/search",params:i=>{let{search:e}=i;return{key:e}}}},DS=i=>{var e,t;let{selected:r,onSelection:s}=i;const[l,u]=Ue.useState(""),[n,p]=Ue.useState(!1),{data:m,refetch:g,fetching:v}=Ea(vz,{lazy:!0,onComplete:()=>p(!0)});Ue.useEffect(()=>u(r),[r]);const y=Ue.useCallback(qI(g,250),[g]);Ue.useEffect(()=>{l&&l===r||(l?y({search:l}):(s(null),p(!1)))},[l]);let C=[];if(m!=null&&(e=m.search)!==null&&e!==void 0&&e.users){const _=m.search.users.map(w=>({...w,type:"user"}));C=C.concat(_)}if(m!=null&&(t=m.search)!==null&&t!==void 0&&t.userGroups){const _=m.search.userGroups.map(w=>({...w,type:"group"}));C=C.concat(_)}return Ae.createElement(IS,{inputWidth:"100%",label:it.t("User or group"),loading:v,placeholder:it.t("Search"),search:l,searchResults:n?C:[],onClose:()=>p(!1),onSearch:u,onSelect:_=>{s(C.find(w=>w.id===_)),p(!1)}})};DS.propTypes={onSelection:me.func.isRequired,selected:me.string};const Wy=i=>{let{children:e}=i;return Ae.createElement(Ae.Fragment,null,Ae.createElement("h2",{className:jt.dynamic([["2416527184",[We.grey900]]])},e),Ae.createElement(jt,{id:"2416527184",dynamic:[We.grey900]},[`h2.__jsx-style-dynamic-selector{font-size:16px;color:${We.grey900};}`]))};Wy.propTypes={children:me.node.isRequired};const _v=i=>{let{onAdd:e,dataSharing:t}=i;const r=Ue.useContext(Xg),[s,l]=Ue.useState(null),[u,n]=Ue.useState(""),[p,m]=Ue.useState(""),{isDisconnected:g}=Ty(),v=_=>{_.preventDefault(),e({type:s.type,id:s.id,name:s.displayName||s.name,access:{data:u,metadata:p}}),l(null),n(""),m("")},y=[{value:Qn,label:it.t("View only")},{value:sr,label:it.t("View and edit")}],C=[...y,{value:vn,label:it.t("No access")}];return Ae.createElement(Ae.Fragment,null,Ae.createElement(Wy,null,it.t("Give access to a user or group")),Ae.createElement("form",{onSubmit:v,className:jt.dynamic([["3476690250",[We.grey100,We.grey900,Jt.dp8]]])},Ae.createElement("div",{className:jt.dynamic([["3476690250",[We.grey100,We.grey900,Jt.dp8]]])+" "+((t?"startWrapperData":"startWrapperMetadata")||"")},Ae.createElement(DS,{selected:(s==null?void 0:s.displayName)||(s==null?void 0:s.name),onSelection:l})),Ae.createElement("div",{className:jt.dynamic([["3476690250",[We.grey100,We.grey900,Jt.dp8]]])+" "+((t?"endWrapper endWrapperData":"endWrapper endWrapperMetadata")||"")},t&&Ae.createElement("div",{className:jt.dynamic([["3476690250",[We.grey100,We.grey900,Jt.dp8]]])+" select-wrapper"},Ae.createElement(us,{label:it.t("Data access level"),placeholder:it.t("Choose a level"),disabled:g,selected:u,helpText:g?it.t("Not available offline"):"",onChange:_=>{let{selected:w}=_;return n(w)}},C.map(_=>{let{value:w,label:k}=_;return Ae.createElement(yo,{key:w,label:k,value:w,active:w===u})}))),Ae.createElement("div",{className:jt.dynamic([["3476690250",[We.grey100,We.grey900,Jt.dp8]]])+" select-wrapper"},Ae.createElement(us,{label:t?it.t("Metadata access level"):it.t("Access level"),placeholder:it.t("Choose a level"),disabled:g,selected:p,helpText:g?it.t("Not available offline"):"",onChange:_=>{let{selected:w}=_;return m(w)}},(t?C:y).map(_=>{let{value:w,label:k}=_;return Ae.createElement(yo,{key:w,label:k,value:w,active:w===p})}))),Ae.createElement(Gn,{type:"submit",disabled:g||r||!s||t&&!u||!p||u===vn&&p===vn},it.t("Give access")))),Ae.createElement(jt,{id:"3476690250",dynamic:[We.grey100,We.grey900,Jt.dp8]},[`form.__jsx-style-dynamic-selector{background-color:${We.grey100};color:${We.grey900};margin-bottom:21px;padding:8px 12px;border-radius:5px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}`,".select-wrapper.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;}",".startWrapperData.__jsx-style-dynamic-selector{width:35%;}",".startWrapperMetadata.__jsx-style-dynamic-selector{width:55%;}",`.endWrapper.__jsx-style-dynamic-selector{margin-inline-start:8px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;gap:${Jt.dp8};}`,".endWrapperMetadata.__jsx-style-dynamic-selector{width:45%;}",".endWrapperData.__jsx-style-dynamic-selector{width:65%;}"]))};_v.propTypes={onAdd:me.func.isRequired,dataSharing:me.bool};const wv=i=>{let{label:e,onClick:t}=i;return Ae.createElement("div",{onClick:t,className:jt.dynamic([["1009072197",[We.red700,Jt.dp8,Jt.dp12,We.red050]]])},e,Ae.createElement(jt,{id:"1009072197",dynamic:[We.red700,Jt.dp8,Jt.dp12,We.red050]},[`div.__jsx-style-dynamic-selector{cursor:pointer;font-size:14px;-webkit-text-decoration:none;text-decoration:none;color:${We.red700};padding:${Jt.dp8} ${Jt.dp12};}`,`div.__jsx-style-dynamic-selector:hover{background-color:${We.red050};}`]))};wv.propTypes={label:me.string.isRequired,onClick:me.func.isRequired};const bz={[Nu]:it.t("Anyone logged in"),[ph]:it.t("User group"),[Ou]:it.t("User")},RS=i=>{var e;let{target:t,id:r}=i;return Ae.createElement(Ae.Fragment,null,Ae.createElement("p",{className:jt.dynamic([["2525483302",[We.grey700]]])},t===Ou?r:(e=bz[t])!==null&&e!==void 0?e:""),Ae.createElement(jt,{id:"2525483302",dynamic:[We.grey700]},[`p.__jsx-style-dynamic-selector{font-size:14px;color:${We.grey700};margin:6px 0 0 0;padding:0;}`]))};RS.propTypes={target:me.oneOf([Nu,ph,Ou]).isRequired,id:me.string};const LS=i=>{let{target:e,name:t}=i;switch(e){case jb:return Ae.createElement(RC,{color:We.grey600});case Nu:case ph:return Ae.createElement(PC,{color:We.grey600});case Ou:return Ae.createElement(oM,{name:t,small:!0});default:return null}};LS.propTypes={target:me.oneOf([jb,Nu,Ou,ph]).isRequired,name:me.string};const $w=i=>{let{dataSharing:e,accessOtherField:t}=i;return e?t===vn:!0},Cg=i=>{let{name:e,id:t,target:r,access:s,accessOptions:l,disabled:u,onChange:n,onRemove:p,dataSharing:m,allUsersItem:g=!1}=i;const v=Ue.useContext(Xg),{isDisconnected:y}=Ty(),C={ACCESS_NONE:it.t("No access"),ACCESS_VIEW_ONLY:it.t("View only"),ACCESS_VIEW_AND_EDIT:it.t("View and edit")};return Ae.createElement(Ae.Fragment,null,Ae.createElement("div",{className:jt.dynamic([["650548845",[We.grey900]]])+" wrapper"},Ae.createElement("div",{className:jt.dynamic([["650548845",[We.grey900]]])+" "+((m?"detailsWithData":"detailsMetadata")||"")},Ae.createElement(LS,{target:r,name:e}),Ae.createElement("div",{className:jt.dynamic([["650548845",[We.grey900]]])+" details-text"},Ae.createElement("p",{className:jt.dynamic([["650548845",[We.grey900]]])+" details-name"},e),Ae.createElement(RS,{target:r,id:t}))),Ae.createElement("div",{className:jt.dynamic([["650548845",[We.grey900]]])+" "+((m?"selectWrapperWithData":"selectWrapperMetadata")||"")},m&&Ae.createElement("div",{className:jt.dynamic([["650548845",[We.grey900]]])+" select"},Ae.createElement(us,{disabled:u||y||v,prefix:it.t("Data"),selected:s.data,helpText:y?it.t("Not available offline"):"",onChange:_=>{let{selected:w}=_;return n({...s,data:w})}},l.map(_=>Ae.createElement(yo,{key:_,label:C[_],value:_,active:_===s.data})),Iw(r)&&$w({accessOtherField:s.metadata,dataSharing:m})&&Ae.createElement(wv,{onClick:p,label:it.t("Remove access")}))),Ae.createElement("div",{className:jt.dynamic([["650548845",[We.grey900]]])+" select"},Ae.createElement(us,{disabled:u||y||v,prefix:it.t("Metadata"),selected:s.metadata,helpText:y?it.t("Not available offline"):"",onChange:_=>{let{selected:w}=_;return n({...s,metadata:w})}},l.map(_=>Ae.createElement(yo,{key:_,label:C[_],value:_,active:_===s.metadata,disabled:!g&&_===vn&&!m})),Iw(r)&&$w({accessOtherField:s.data,dataSharing:m})&&Ae.createElement(wv,{onClick:p,label:it.t("Remove access")}))))),Ae.createElement(lM,null),Ae.createElement(jt,{id:"650548845",dynamic:[We.grey900]},[".wrapper.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:4px 8px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".detailsMetadata.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:65%;}",".detailsWithData.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:35%;}",".details-text.__jsx-style-dynamic-selector{margin-inline-start:8px;}",`.details-name.__jsx-style-dynamic-selector{font-size:15px;font-weight:500;color:${We.grey900};margin:0;padding:0;}`,".selectWrapperMetadata.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:35%;}",".selectWrapperWithData.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:65%;}",".select.__jsx-style-dynamic-selector{margin-inline-start:8px;-webkit-flex:1;-ms-flex:1;flex:1;}"]))};Cg.propTypes={access:me.shape({data:me.oneOf([vn,Qn,sr]),metadata:me.oneOf([vn,Qn,sr])}).isRequired,accessOptions:me.arrayOf(me.oneOf([vn,Qn,sr])).isRequired,dataSharing:me.bool.isRequired,name:me.string.isRequired,target:me.oneOf([Nu,ph,Ou]).isRequired,onChange:me.func.isRequired,allUsersItem:me.bool,disabled:me.bool,id:me.string,onRemove:me.func};const Cv=i=>{let{onChange:e,onRemove:t,publicAccess:r,allowPublicAccess:s,users:l,groups:u,dataSharing:n}=i;const p=[vn,Qn,sr];return Ae.createElement(Ae.Fragment,null,Ae.createElement(Wy,null,it.t("Users and groups that currently have access")),Ae.createElement("div",{className:jt.dynamic([["3415079234",[We.grey200,We.grey900]]])+" header"},Ae.createElement("div",{className:jt.dynamic([["3415079234",[We.grey200,We.grey900]]])+" "+((n?"header-start-column-data":"header-start-column-metadata")||"")},it.t("User / Group")),Ae.createElement("div",{className:jt.dynamic([["3415079234",[We.grey200,We.grey900]]])+" "+((n?"header-end-column-data":"header-end-column-metadata")||"")},Ae.createElement("span",{className:jt.dynamic([["3415079234",[We.grey200,We.grey900]]])+" hea"},it.t("Access level")))),Ae.createElement("div",{className:jt.dynamic([["3415079234",[We.grey200,We.grey900]]])+" list"},Ae.createElement(Cg,{name:it.t("All users"),target:Nu,access:r,accessOptions:p,disabled:!s,onChange:m=>e({type:"public",access:m}),dataSharing:n,allUsersItem:!0}),u.map(m=>{let{id:g,name:v,access:y}=m;return Ae.createElement(Cg,{key:g,name:v,target:ph,access:y,accessOptions:p,onChange:C=>e({type:"group",id:g,access:C}),onRemove:()=>t({type:"group",id:g}),dataSharing:n})}),l.map(m=>{let{id:g,name:v,access:y}=m;return y&&Ae.createElement(Cg,{key:g,id:g,name:v,target:Ou,access:y,accessOptions:p,onChange:C=>e({type:"user",id:g,access:C}),onRemove:()=>t({type:"user",id:g}),dataSharing:n})})),Ae.createElement(jt,{id:"3415079234",dynamic:[We.grey200,We.grey900]},[`.header.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:10px 8px;margin:0 0 8px 0;background-color:${We.grey200};color:${We.grey900};font-size:13px;}`,".header-start-column-metadata.__jsx-style-dynamic-selector{width:65%;}",".header-end-column-metadata.__jsx-style-dynamic-selector{margin-inline-start:auto;width:35%;}",".header-start-column-data.__jsx-style-dynamic-selector{width:35%;}",".header-end-column-data.__jsx-style-dynamic-selector{margin-inline-start:auto;width:65%;}",".hea.__jsx-style-dynamic-selector{display:inline-block;margin-inline-start:8px;}",".list.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow-y:auto;}"]))};Cv.propTypes={allowPublicAccess:me.bool.isRequired,dataSharing:me.bool.isRequired,groups:me.arrayOf(me.shape({id:me.string.isRequired,name:me.string.isRequired,access:me.shape({data:me.oneOf([vn,Qn,sr]),metadata:me.oneOf([vn,Qn,sr])})})).isRequired,publicAccess:me.shape({data:me.oneOf([vn,Qn,sr]),metadata:me.oneOf([vn,Qn,sr])}).isRequired,users:me.arrayOf(me.shape({access:me.shape({data:me.oneOf([vn,Qn,sr]),metadata:me.oneOf([vn,Qn,sr])}).isRequired,id:me.string.isRequired,name:me.string.isRequired})).isRequired,onChange:me.func.isRequired,onRemove:me.func.isRequired};const zS=i=>{if(i.length===0)return i.length;const e=["VISUALIZATION","MAP","EVENT_CHART","EVENT_REPORT"];return i.filter(t=>e.includes(t.type)).length},_z=i=>{let{itemsCount:e,visualizationsCount:t,hasErrors:r,updatedItems:s}=i;if(r){if(s===0)return it.t("No visualizations were updated. Check that you have permission to change sharing for all visualizations.");if(s&&e)return it.t("Not all visualizations could be updated successfully. {{ success }} updated successfully, {{ failed }} failed to update. Check that you have permission to change sharing for all visualizations.",{success:s,failed:t-s})}return s===0?it.t("No visualizations were updated because sharing settings are already sufficient."):s===t?it.t("Successfully updated sharing for all visualizations."):s<t?it.t("Not all visualization sharing settings needed to be updated. {{ updated }} updated, {{ skipped }} already had sufficient sharing settings.",{updated:s,skipped:t-s}):""},wz=i=>{let{entityAmount:e,visualizationsCount:t}=i;return e===0?it.t("There are no users or groups to apply sharing settings for."):it.t("Number of visualizations on this dashboard that will potentially get updated sharing settings: {{ visualizationsCount }}. The number of users or groups that these updated settings will apply to: {{ entityAmount }}.",{visualizationsCount:t,entityAmount:e,nsSeparator:">"})},NS=i=>{let{hasErrors:e,updatedItems:t,dashboardItems:r,itemsCount:s}=i;const l=zS(r);if(!l)return null;const u=_z({visualizationsCount:l,itemsCount:s,hasErrors:e,updatedItems:t});return Ae.createElement(Bo,null,u)};NS.propTypes={dashboardItems:me.array.isRequired,hasErrors:me.bool.isRequired,itemsCount:me.number.isRequired,updatedItems:me.number.isRequired};const Cz={dashboard:{resource:"dashboards",id:i=>{let{id:e}=i;return e},params:{fields:"dashboardItems[type]"}}},OS=i=>{let{id:e,entityAmount:t}=i;const{data:r,loading:s}=Ea(Cz,{variables:{id:e}});if(s)return null;const{dashboard:l}=r,u=zS(l.dashboardItems);if(!u)return null;const n=wz({visualizationsCount:u,entityAmount:t});return Ae.createElement(Bo,null,n)};OS.propTypes={entityAmount:me.number.isRequired,id:me.string.isRequired};const Tz={dashboard:{resource:"dashboards",id:i=>{let{id:e}=i;return e},params:{fields:"dashboardItems[type]"}}},jS=i=>{var e;let{id:t,entityAmount:r}=i;const{isDisconnected:s}=Ty(),{data:l,refetch:u}=Ea(Tz,{variables:{id:t}});Ue.useEffect(()=>{u({id:t})},[u,t]);const n=ah(),[p,m]=Ue.useState(!1),[g,v]=Ue.useState(!1),[y,C]=Ue.useState(null),[_,w]=Ue.useState(null),k={resource:`dashboards/cascadeSharing/${t}`,type:"create"},S=()=>{m(!0),v(!0),w(null),C(null),n.mutate(k).then(D=>{w(D)}).catch(D=>{C(D.message||it.t("Something went wrong"))}).finally(()=>{v(!1)})},x=(_==null||(e=_.errorReports)===null||e===void 0?void 0:e.length)>0,P=_==null?void 0:_.countUpdatedDashboardItems;return Ae.createElement(Ae.Fragment,null,!p&&Ae.createElement(OS,{id:t,entityAmount:r}),y&&Ae.createElement(mg,{marginTop:Jt.dp12},Ae.createElement(Bo,{error:!0},y)),l&&_&&Ae.createElement(mg,{marginTop:Jt.dp12},Ae.createElement(NS,{hasErrors:x,updatedItems:P,dashboardItems:l.dashboard.dashboardItems,itemsCount:l.dashboard.itemsCount})),Ae.createElement(mg,{marginTop:Jt.dp12},Ae.createElement(Gn,{type:"button",disabled:s||g||!r,loading:g,secondary:!0,onClick:S},it.t("Apply sharing to dashboard visualizations"))))};jS.propTypes={entityAmount:me.number.isRequired,id:me.string.isRequired};const Sz=()=>Ae.createElement(Ae.Fragment,null,Ae.createElement("p",{className:jt.dynamic([["3321084332",[We.grey800]]])},it.t('Applying the same sharing settings makes sure that users and groups that have access to the dashboard also have at least "View only" access to its visualizations (charts, tables, maps, event charts and event reports).')),Ae.createElement("p",{className:jt.dynamic([["3321084332",[We.grey800]]])},it.t(`If a user or group already has "View and edit" access to a visualization, this won't be reduced to "View only". The "All users" access level won't be updated or changed.`)),Ae.createElement("p",{className:jt.dynamic([["3321084332",[We.grey800]]])},it.t("Applying sharing can't be undone, and needs to be done again if new visualizations are added to the dashboard or its sharing settings are changed.")),Ae.createElement(jt,{id:"3321084332",dynamic:[We.grey800]},[`p.__jsx-style-dynamic-selector{font-size:14px;line-height:19px;color:${We.grey800};}`])),FS=i=>{let{id:e,entityAmount:t}=i;return Ae.createElement(Ae.Fragment,null,Ae.createElement(Wy,null,it.t("Apply dashboard sharing settings to visualizations")),Ae.createElement(Sz,null),Ae.createElement(jS,{id:e,entityAmount:t}))};FS.propTypes={entityAmount:me.number.isRequired,id:me.string.isRequired};const Tv=i=>{let{type:e,users:t,groups:r,publicAccess:s,allowPublicAccess:l,id:u,onAdd:n,onChange:p,onRemove:m,dataSharing:g}=i;const[v,y]=Ue.useState(0);return e===vS.DASHBOARD?Ae.createElement(Ae.Fragment,null,Ae.createElement(Fb,null,Ae.createElement(Qd,{onClick:()=>y(0),selected:v===0},it.t("Dashboard sharing")),Ae.createElement(Qd,{onClick:()=>y(1),selected:v===1},it.t("Apply sharing to dashboard visualizations"))),Ae.createElement("div",null,v===0&&Ae.createElement(Ae.Fragment,null,Ae.createElement(_v,{onAdd:n,dataSharing:g}),Ae.createElement(Cv,{users:t,groups:r,publicAccess:s,allowPublicAccess:l,onChange:p,onRemove:m,dataSharing:g})),v===1&&Ae.createElement(FS,{id:u,entityAmount:t.length+r.length}))):Ae.createElement(Ae.Fragment,null,Ae.createElement(_v,{onAdd:n,dataSharing:g}),Ae.createElement(Cv,{users:t,groups:r,publicAccess:s,allowPublicAccess:l,onChange:p,onRemove:m,dataSharing:g}))};Tv.propTypes={allowPublicAccess:me.bool.isRequired,dataSharing:me.bool.isRequired,groups:me.arrayOf(me.shape({access:me.shape({data:me.oneOf([vn,Qn,sr]),metadata:me.oneOf([vn,Qn,sr])}).isRequired,id:me.string.isRequired,name:me.string.isRequired})).isRequired,id:me.string.isRequired,publicAccess:me.shape({data:me.oneOf([vn,Qn,sr]),metadata:me.oneOf([vn,Qn,sr])}).isRequired,type:me.oneOf(bS).isRequired,users:me.arrayOf(me.shape({access:me.shape({data:me.oneOf([vn,Qn,sr]),metadata:me.oneOf([vn,Qn,sr])}).isRequired,id:me.string.isRequired,name:me.string.isRequired})).isRequired,onAdd:me.func.isRequired,onChange:me.func.isRequired,onRemove:me.func.isRequired};const Ez={sharing:{resource:"sharing",params:i=>{let{type:e,id:t}=i;return{type:e,id:t}}}},kz={resource:"sharing",params:i=>{let{type:e,id:t}=i;return{type:e,id:t}},type:"update",data:i=>{let{data:e}=i;return e}},_0=()=>{},Az={name:"",allowPublic:!0,public:{data:vn,metadata:vn},groups:[],users:[]},Mz=i=>{const e={...i};return i.public&&typeof i.public=="string"&&(e.public={data:vn,metadata:i.public}),e.groups=i.groups.map(t=>t.access&&typeof t.access=="string"?{...t,access:{data:vn,metadata:t.access}}:t),e.users=i.users.map(t=>t.access&&typeof t.access=="string"?{...t,access:{data:vn,metadata:t.access}}:t),e},BS=i=>{let{id:e,type:t,onClose:r=_0,onError:s=_0,onSave:l=_0,initialSharingSettings:u=Az,dataTest:n="dhis2-uicore-sharingdialog",dataSharing:p=!1}=i;const{show:m}=Gp(Z=>Z,{critical:!0}),g=Mz(u),{data:v,refetch:y,loading:C,fetching:_}=Ea(Ez,{variables:{id:e,type:t},onError:Z=>{m(Z),s(Z)}}),[w,{loading:k}]=eS(kz,{variables:{type:t,id:e},onError:Z=>{m(Z),s(Z),y()},onComplete:()=>{y(),l()}});if(Ue.useEffect(()=>{y({type:t,id:e})},[t,e]),C){const Z=Object.keys(u.users).map(Xm),X=Object.keys(u.groups).map(Xm);return Ae.createElement(Xg.Provider,{value:!0},Ae.createElement(gv,{onClose:r},Ae.createElement(Tv,{id:e,users:Z,groups:X,publicAccess:g.public,allowPublicAccess:g.allowPublic,type:t,onAdd:()=>{},onChange:()=>{},onRemove:()=>{},dataSharing:p})))}const{object:S,meta:x}=v.sharing,P=_S(S.publicAccess),D=S.userAccesses.map(Xm),T=S.userGroupAccesses.map(Xm),I=Z=>{let{type:X,id:O,access:V,name:$}=Z;const L=XI({object:S,type:X,access:V,id:O,name:$});w({data:L,type:t,id:e})},N=Z=>{let{type:X,id:O,access:V}=Z;const $=ZI({object:S,type:X,access:V,id:O});w({data:$,type:t,id:e})},q=Z=>{let{type:X,id:O}=Z;const V=KI({object:S,type:X,id:O});w({data:V,type:t,id:e})};return Ae.createElement(Xg.Provider,{value:k||_},Ae.createElement(gv,{onClose:r,name:S.displayName||S.name,dataTest:n},Ae.createElement(Tv,{id:e,users:D,groups:T,publicAccess:P,allowPublicAccess:x.allowPublicAccess,type:t,onAdd:I,onChange:N,onRemove:q,dataSharing:p})))};BS.propTypes={id:me.string.isRequired,type:me.oneOf(bS).isRequired,dataSharing:me.bool,dataTest:me.string,initialSharingSettings:me.shape({allowPublic:me.bool.isRequired,groups:me.objectOf(me.shape({id:me.string.isRequired,name:me.string.isRequired,access:me.oneOfType([me.shape({data:me.oneOf([vn,Qn,sr]),metadata:me.oneOf([vn,Qn,sr])}),me.oneOf([vn,Qn,sr])])})),name:me.string,public:me.oneOfType([me.shape({data:me.oneOf([vn,Qn,sr]),metadata:me.oneOf([vn,Qn,sr])}),me.oneOf([vn,Qn,sr])]),users:me.objectOf(me.shape({id:me.string.isRequired,name:me.string.isRequired,access:me.oneOfType([me.shape({data:me.oneOf([vn,Qn,sr]),metadata:me.oneOf([vn,Qn,sr])}),me.oneOf([vn,Qn,sr])])}))}),onClose:me.func,onError:me.func,onSave:me.func};const $S=Ue.createContext({suppressZebraStriping:!1}),{Consumer:OW,Provider:Pz}=$S,Tg=["table.jsx-2430604489{border:1px solid #e8edf2;background-color:#ffffff;min-width:100%;text-align:left;border-collapse:collapse;vertical-align:top;}"];Tg.__hash="2430604489";const US=i=>{let{role:e,children:t,className:r,dataTest:s="dhis2-uicore-table",suppressZebraStriping:l}=i;return Ae.createElement(Pz,{value:{suppressZebraStriping:l}},Ae.createElement("table",{"data-test":s,role:e,className:`jsx-${Tg.__hash} `+(r||"")},t,Ae.createElement(jt,{id:Tg.__hash},Tg)))};US.propTypes={children:me.node,className:me.string,dataTest:me.string,role:me.string,suppressZebraStriping:me.bool};const VS=i=>{let{children:e,className:t,dataTest:r="dhis2-uicore-tablebody",role:s}=i;return Ae.createElement("tbody",{className:t,"data-test":r,role:s},e)};VS.propTypes={children:me.node,className:me.string,dataTest:me.string,role:me.string};const GS=i=>{let{children:e,className:t,dataTest:r="dhis2-uicore-tablehead",role:s}=i;return Ae.createElement("thead",{className:t,"data-test":r,role:s},e)};GS.propTypes={children:me.node,className:me.string,dataTest:me.string,role:me.string};const Sg=["td.jsx-2229340108{border-bottom:1px solid #e8edf2;font-size:14px;line-height:18px;padding:13px 12px;height:45px;}","td.jsx-2229340108:dir(rtl){text-align:right;}",".dense.jsx-2229340108{padding:9px 12px;height:36px;}"];Sg.__hash="2229340108";const Eg=i=>{let{role:e,className:t,children:r,colSpan:s,rowSpan:l,dense:u,dataTest:n="dhis2-uicore-tablecell"}=i;return Ae.createElement("td",{colSpan:s,rowSpan:l,"data-test":n,role:e,className:`jsx-${Sg.__hash} `+(Br({dense:u},t)||"")},r,Ae.createElement(jt,{id:Sg.__hash},Sg))};Eg.propTypes={children:me.node,className:me.string,colSpan:me.string,dataTest:me.string,dense:me.bool,role:me.string,rowSpan:me.string};const kg=["th.jsx-3181834369{border-bottom:1px solid #e8edf2;font-size:14px;line-height:18px;padding:13px 12px;height:45px;}","th.jsx-3181834369:dir(rtl){text-align:right;}",".dense.jsx-3181834369{padding:9px 12px;height:36px;}"];kg.__hash="3181834369";const HS=i=>{let{role:e,colSpan:t,rowSpan:r,dense:s,children:l,className:u,dataTest:n="dhis2-uicore-tablecellhead"}=i;return Ae.createElement("th",{colSpan:t,rowSpan:r,"data-test":n,role:e,className:`jsx-${kg.__hash} `+(Br({dense:s},u)||"")},l,Ae.createElement(jt,{id:kg.__hash},kg))};HS.propTypes={children:me.node,className:me.string,colSpan:me.string,dataTest:me.string,dense:me.bool,role:me.string,rowSpan:me.string};function Sv(){return Sv=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Sv.apply(null,arguments)}const Ag=[".zebraStriping.jsx-3124144591:nth-child(even){background:#fbfcfd;}"];Ag.__hash="3124144591";const Qg=i=>{let{role:e,children:t,className:r,dataTest:s="dhis2-uicore-tablerow",suppressZebraStriping:l,...u}=i;const{suppressZebraStriping:n}=Ue.useContext($S),p=typeof l<"u"?!l:!n;return Ae.createElement("tr",Sv({"data-test":s,role:e},u,{className:`jsx-${Ag.__hash} `+(u&&u.className!=null&&u.className||Br(r,{zebraStriping:p})||"")}),t,Ae.createElement(jt,{id:Ag.__hash},Ag))};Qg.propTypes={children:me.node,className:me.string,dataTest:me.string,role:me.string,suppressZebraStriping:me.bool};const WS=i=>{let{role:e,children:t,className:r,dataTest:s="dhis2-uicore-tablerowhead",suppressZebraStriping:l}=i;return Ae.createElement(Qg,{className:r,dataTest:s,suppressZebraStriping:l,role:e},t)};WS.propTypes={children:me.node,className:me.string,dataTest:me.string,role:me.string,suppressZebraStriping:me.bool};var $b={};Object.defineProperty($b,"__esModule",{value:!0});$b.parse=Oz;$b.serialize=jz;const Iz=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Dz=/^[\u0021-\u003A\u003C-\u007E]*$/,Rz=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Lz=/^[\u0020-\u003A\u003D-\u007E]*$/,zz=Object.prototype.toString,Nz=(()=>{const i=function(){};return i.prototype=Object.create(null),i})();function Oz(i,e){const t=new Nz,r=i.length;if(r<2)return t;const s=(e==null?void 0:e.decode)||Fz;let l=0;do{const u=i.indexOf("=",l);if(u===-1)break;const n=i.indexOf(";",l),p=n===-1?r:n;if(u>p){l=i.lastIndexOf(";",u-1)+1;continue}const m=Uw(i,l,u),g=Vw(i,u,m),v=i.slice(m,g);if(t[v]===void 0){let y=Uw(i,u+1,p),C=Vw(i,p,y);const _=s(i.slice(y,C));t[v]=_}l=p+1}while(l<r);return t}function Uw(i,e,t){do{const r=i.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<t);return t}function Vw(i,e,t){for(;e>t;){const r=i.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return t}function jz(i,e,t){const r=(t==null?void 0:t.encode)||encodeURIComponent;if(!Iz.test(i))throw new TypeError(`argument name is invalid: ${i}`);const s=r(e);if(!Dz.test(s))throw new TypeError(`argument val is invalid: ${e}`);let l=i+"="+s;if(!t)return l;if(t.maxAge!==void 0){if(!Number.isInteger(t.maxAge))throw new TypeError(`option maxAge is invalid: ${t.maxAge}`);l+="; Max-Age="+t.maxAge}if(t.domain){if(!Rz.test(t.domain))throw new TypeError(`option domain is invalid: ${t.domain}`);l+="; Domain="+t.domain}if(t.path){if(!Lz.test(t.path))throw new TypeError(`option path is invalid: ${t.path}`);l+="; Path="+t.path}if(t.expires){if(!Bz(t.expires)||!Number.isFinite(t.expires.valueOf()))throw new TypeError(`option expires is invalid: ${t.expires}`);l+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(l+="; HttpOnly"),t.secure&&(l+="; Secure"),t.partitioned&&(l+="; Partitioned"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():void 0){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${t.priority}`)}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${t.sameSite}`)}return l}function Fz(i){if(i.indexOf("%")===-1)return i;try{return decodeURIComponent(i)}catch{return i}}function Bz(i){return zz.call(i)==="[object Date]"}/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Gw="popstate";function $z(i={}){function e(s,l){let{pathname:u="/",search:n="",hash:p=""}=Il(s.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),ef("",{pathname:u,search:n,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let u=s.document.querySelector("base"),n="";if(u&&u.getAttribute("href")){let p=s.location.href,m=p.indexOf("#");n=m===-1?p:p.slice(0,m)}return n+"#"+(typeof l=="string"?l:xc(l))}function r(s,l){ps(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return Vz(e,t,r,i)}function Pn(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function ps(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Uz(){return Math.random().toString(36).substring(2,10)}function Hw(i,e){return{usr:i.state,key:i.key,idx:e}}function ef(i,e,t=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Il(e):e,state:t,key:e&&e.key||r||Uz()}}function xc({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Il(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function Vz(i,e,t,r={}){let{window:s=document.defaultView,v5Compat:l=!1}=r,u=s.history,n="POP",p=null,m=g();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function g(){return(u.state||{idx:null}).idx}function v(){n="POP";let k=g(),S=k==null?null:k-m;m=k,p&&p({action:n,location:w.location,delta:S})}function y(k,S){n="PUSH";let x=ef(w.location,k,S);t(x,k),m=g()+1;let P=Hw(x,m),D=w.createHref(x);try{u.pushState(P,"",D)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(D)}l&&p&&p({action:n,location:w.location,delta:1})}function C(k,S){n="REPLACE";let x=ef(w.location,k,S);t(x,k),m=g();let P=Hw(x,m),D=w.createHref(x);u.replaceState(P,"",D),l&&p&&p({action:n,location:w.location,delta:0})}function _(k){let S=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof k=="string"?k:xc(k);return x=x.replace(/ $/,"%20"),Pn(S,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,S)}let w={get action(){return n},get location(){return i(s,u)},listen(k){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(Gw,v),p=k,()=>{s.removeEventListener(Gw,v),p=null}},createHref(k){return e(s,k)},createURL:_,encodeLocation(k){let S=_(k);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:y,replace:C,go(k){return u.go(k)}};return w}var Gz=new Set(["lazy","caseSensitive","path","id","index","children"]);function Hz(i){return i.index===!0}function Jg(i,e,t=[],r={}){return i.map((s,l)=>{let u=[...t,String(l)],n=typeof s.id=="string"?s.id:u.join("-");if(Pn(s.index!==!0||!s.children,"Cannot specify children on an index route"),Pn(!r[n],`Found a route id collision on id "${n}".  Route id's must be globally unique within Data Router usages`),Hz(s)){let p={...s,...e(s),id:n};return r[n]=p,p}else{let p={...s,...e(s),id:n,children:void 0};return r[n]=p,s.children&&(p.children=Jg(s.children,e,u,r)),p}})}function rc(i,e,t="/"){return Mg(i,e,t,!1)}function Mg(i,e,t,r){let s=typeof e=="string"?Il(e):e,l=vo(s.pathname||"/",t);if(l==null)return null;let u=qS(i);qz(u);let n=null;for(let p=0;n==null&&p<u.length;++p){let m=r6(l);n=i6(u[p],m,r)}return n}function Wz(i,e){let{route:t,pathname:r,params:s}=i;return{id:t.id,pathname:r,params:s,data:e[t.id],handle:t.handle}}function qS(i,e=[],t=[],r=""){let s=(l,u,n)=>{let p={relativePath:n===void 0?l.path||"":n,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};p.relativePath.startsWith("/")&&(Pn(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length));let m=jo([r,p.relativePath]),g=t.concat(p);l.children&&l.children.length>0&&(Pn(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),qS(l.children,e,g,m)),!(l.path==null&&!l.index)&&e.push({path:m,score:e6(m,l.index),routesMeta:g})};return i.forEach((l,u)=>{var n;if(l.path===""||!((n=l.path)!=null&&n.includes("?")))s(l,u);else for(let p of YS(l.path))s(l,u,p)}),e}function YS(i){let e=i.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let u=YS(r.join("/")),n=[];return n.push(...u.map(p=>p===""?l:[l,p].join("/"))),s&&n.push(...u),n.map(p=>i.startsWith("/")&&p===""?"/":p)}function qz(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:t6(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var Yz=/^:[\w-]+$/,Zz=3,Xz=2,Kz=1,Qz=10,Jz=-2,Ww=i=>i==="*";function e6(i,e){let t=i.split("/"),r=t.length;return t.some(Ww)&&(r+=Jz),e&&(r+=Xz),t.filter(s=>!Ww(s)).reduce((s,l)=>s+(Yz.test(l)?Zz:l===""?Kz:Qz),r)}function t6(i,e){return i.length===e.length&&i.slice(0,-1).every((r,s)=>r===e[s])?i[i.length-1]-e[e.length-1]:0}function i6(i,e,t=!1){let{routesMeta:r}=i,s={},l="/",u=[];for(let n=0;n<r.length;++n){let p=r[n],m=n===r.length-1,g=l==="/"?e:e.slice(l.length)||"/",v=ey({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},g),y=p.route;if(!v&&m&&t&&!r[r.length-1].route.index&&(v=ey({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),u.push({params:s,pathname:jo([l,v.pathname]),pathnameBase:o6(jo([l,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(l=jo([l,v.pathnameBase]))}return u}function ey(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,r]=n6(i.path,i.caseSensitive,i.end),s=e.match(t);if(!s)return null;let l=s[0],u=l.replace(/(.)\/+$/,"$1"),n=s.slice(1);return{params:r.reduce((m,{paramName:g,isOptional:v},y)=>{if(g==="*"){let _=n[y]||"";u=l.slice(0,l.length-_.length).replace(/(.)\/+$/,"$1")}const C=n[y];return v&&!C?m[g]=void 0:m[g]=(C||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:u,pattern:i}}function n6(i,e=!1,t=!0){ps(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,n,p)=>(r.push({paramName:n,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function r6(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ps(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function vo(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=i.charAt(t);return r&&r!=="/"?null:i.slice(t)||"/"}function s6(i,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof i=="string"?Il(i):i;return{pathname:t?t.startsWith("/")?t:a6(t,e):e,search:l6(r),hash:c6(s)}}function a6(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function w0(i,e,t,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ZS(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function qy(i){let e=ZS(i);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Yy(i,e,t,r=!1){let s;typeof i=="string"?s=Il(i):(s={...i},Pn(!s.pathname||!s.pathname.includes("?"),w0("?","pathname","search",s)),Pn(!s.pathname||!s.pathname.includes("#"),w0("#","pathname","hash",s)),Pn(!s.search||!s.search.includes("#"),w0("#","search","hash",s)));let l=i===""||s.pathname==="",u=l?"/":s.pathname,n;if(u==null)n=t;else{let v=e.length-1;if(!r&&u.startsWith("..")){let y=u.split("/");for(;y[0]==="..";)y.shift(),v-=1;s.pathname=y.join("/")}n=v>=0?e[v]:"/"}let p=s6(s,n),m=u&&u!=="/"&&u.endsWith("/"),g=(l||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(m||g)&&(p.pathname+="/"),p}var jo=i=>i.join("/").replace(/\/\/+/g,"/"),o6=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),l6=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,c6=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,ty=class{constructor(i,e,t,r=!1){this.status=i,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function zf(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var XS=["POST","PUT","PATCH","DELETE"],u6=new Set(XS),d6=["GET",...XS],h6=new Set(d6),p6=new Set([301,302,303,307,308]),f6=new Set([307,308]),C0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},m6={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},vp={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Ub=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,g6=i=>({hasErrorBoundary:!!i.hasErrorBoundary}),KS="remix-router-transitions",QS=Symbol("ResetLoaderData");function y6(i){const e=i.window?i.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Pn(i.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=i.mapRouteProperties||g6,s={},l=Jg(i.routes,r,void 0,s),u,n=i.basename||"/",p=i.dataStrategy||w6,m=i.patchRoutesOnNavigation,g={...i.future},v=null,y=new Set,C=null,_=null,w=null,k=i.hydrationData!=null,S=rc(l,i.history.location,n),x=null;if(S==null&&!m){let dt=Qa(404,{pathname:i.history.location.pathname}),{matches:vt,route:Pt}=n2(l);S=vt,x={[Pt.id]:dt}}S&&!i.hydrationData&&Zi(S,l,i.history.location.pathname).active&&(S=null);let P;if(S)if(S.some(dt=>dt.route.lazy))P=!1;else if(!S.some(dt=>dt.route.loader))P=!0;else{let dt=i.hydrationData?i.hydrationData.loaderData:null,vt=i.hydrationData?i.hydrationData.errors:null;if(vt){let Pt=S.findIndex(Ft=>vt[Ft.route.id]!==void 0);P=S.slice(0,Pt+1).every(Ft=>!kv(Ft.route,dt,vt))}else P=S.every(Pt=>!kv(Pt.route,dt,vt))}else{P=!1,S=[];let dt=Zi(null,l,i.history.location.pathname);dt.active&&dt.matches&&(S=dt.matches)}let D,T={historyAction:i.history.action,location:i.history.location,matches:S,initialized:P,navigation:C0,restoreScrollPosition:i.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:i.hydrationData&&i.hydrationData.loaderData||{},actionData:i.hydrationData&&i.hydrationData.actionData||null,errors:i.hydrationData&&i.hydrationData.errors||x,fetchers:new Map,blockers:new Map},I="POP",N=!1,q,Z=!1,X=new Map,O=null,V=!1,$=!1,L=new Set,R=new Map,G=0,U=-1,B=new Map,H=new Set,W=new Map,re=new Map,de=new Set,ie=new Map,oe,Ee=null;function xe(){if(v=i.history.listen(({action:dt,location:vt,delta:Pt})=>{if(oe){oe(),oe=void 0;return}ps(ie.size===0||Pt!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ft=St({currentLocation:T.location,nextLocation:vt,historyAction:dt});if(Ft&&Pt!=null){let qt=new Promise(vi=>{oe=vi});i.history.go(Pt*-1),ft(Ft,{state:"blocked",location:vt,proceed(){ft(Ft,{state:"proceeding",proceed:void 0,reset:void 0,location:vt}),qt.then(()=>i.history.go(Pt))},reset(){let vi=new Map(T.blockers);vi.set(Ft,vp),Q({blockers:vi})}});return}return ne(dt,vt)}),t){R6(e,X);let dt=()=>L6(e,X);e.addEventListener("pagehide",dt),O=()=>e.removeEventListener("pagehide",dt)}return T.initialized||ne("POP",T.location,{initialHydration:!0}),D}function Se(){v&&v(),O&&O(),y.clear(),q&&q.abort(),T.fetchers.forEach((dt,vt)=>je(vt)),T.blockers.forEach((dt,vt)=>Rt(vt))}function K(dt){return y.add(dt),()=>y.delete(dt)}function Q(dt,vt={}){T={...T,...dt};let Pt=[],Ft=[];T.fetchers.forEach((qt,vi)=>{qt.state==="idle"&&(de.has(vi)?Pt.push(vi):Ft.push(vi))}),de.forEach(qt=>{!T.fetchers.has(qt)&&!R.has(qt)&&Pt.push(qt)}),[...y].forEach(qt=>qt(T,{deletedFetchers:Pt,viewTransitionOpts:vt.viewTransitionOpts,flushSync:vt.flushSync===!0})),Pt.forEach(qt=>je(qt)),Ft.forEach(qt=>T.fetchers.delete(qt))}function ae(dt,vt,{flushSync:Pt}={}){var ve,Le;let Ft=T.actionData!=null&&T.navigation.formMethod!=null&&uo(T.navigation.formMethod)&&T.navigation.state==="loading"&&((ve=dt.state)==null?void 0:ve._isRedirect)!==!0,qt;vt.actionData?Object.keys(vt.actionData).length>0?qt=vt.actionData:qt=null:Ft?qt=T.actionData:qt=null;let vi=vt.loaderData?t2(T.loaderData,vt.loaderData,vt.matches||[],vt.errors):T.loaderData,Oi=T.blockers;Oi.size>0&&(Oi=new Map(Oi),Oi.forEach(($e,Ke)=>Oi.set(Ke,vp)));let hi=N===!0||T.navigation.formMethod!=null&&uo(T.navigation.formMethod)&&((Le=dt.state)==null?void 0:Le._isRedirect)!==!0;u&&(l=u,u=void 0),V||I==="POP"||(I==="PUSH"?i.history.push(dt,dt.state):I==="REPLACE"&&i.history.replace(dt,dt.state));let He;if(I==="POP"){let $e=X.get(T.location.pathname);$e&&$e.has(dt.pathname)?He={currentLocation:T.location,nextLocation:dt}:X.has(dt.pathname)&&(He={currentLocation:dt,nextLocation:T.location})}else if(Z){let $e=X.get(T.location.pathname);$e?$e.add(dt.pathname):($e=new Set([dt.pathname]),X.set(T.location.pathname,$e)),He={currentLocation:T.location,nextLocation:dt}}Q({...vt,actionData:qt,loaderData:vi,historyAction:I,location:dt,initialized:!0,navigation:C0,revalidation:"idle",restoreScrollPosition:cn(dt,vt.matches||T.matches),preventScrollReset:hi,blockers:Oi},{viewTransitionOpts:He,flushSync:Pt===!0}),I="POP",N=!1,Z=!1,V=!1,$=!1,Ee==null||Ee.resolve(),Ee=null}async function _e(dt,vt){if(typeof dt=="number"){i.history.go(dt);return}let Pt=Ev(T.location,T.matches,n,dt,vt==null?void 0:vt.fromRouteId,vt==null?void 0:vt.relative),{path:Ft,submission:qt,error:vi}=qw(!1,Pt,vt),Oi=T.location,hi=ef(T.location,Ft,vt&&vt.state);hi={...hi,...i.history.encodeLocation(hi)};let He=vt&&vt.replace!=null?vt.replace:void 0,ve="PUSH";He===!0?ve="REPLACE":He===!1||qt!=null&&uo(qt.formMethod)&&qt.formAction===T.location.pathname+T.location.search&&(ve="REPLACE");let Le=vt&&"preventScrollReset"in vt?vt.preventScrollReset===!0:void 0,$e=(vt&&vt.flushSync)===!0,Ke=St({currentLocation:Oi,nextLocation:hi,historyAction:ve});if(Ke){ft(Ke,{state:"blocked",location:hi,proceed(){ft(Ke,{state:"proceeding",proceed:void 0,reset:void 0,location:hi}),_e(dt,vt)},reset(){let st=new Map(T.blockers);st.set(Ke,vp),Q({blockers:st})}});return}await ne(ve,hi,{submission:qt,pendingError:vi,preventScrollReset:Le,replace:vt&&vt.replace,enableViewTransition:vt&&vt.viewTransition,flushSync:$e})}function J(){Ee||(Ee=z6()),fe(),Q({revalidation:"loading"});let dt=Ee.promise;return T.navigation.state==="submitting"?dt:T.navigation.state==="idle"?(ne(T.historyAction,T.location,{startUninterruptedRevalidation:!0}),dt):(ne(I||T.historyAction,T.navigation.location,{overrideNavigation:T.navigation,enableViewTransition:Z===!0}),dt)}async function ne(dt,vt,Pt){q&&q.abort(),q=null,I=dt,V=(Pt&&Pt.startUninterruptedRevalidation)===!0,Ht(T.location,T.matches),N=(Pt&&Pt.preventScrollReset)===!0,Z=(Pt&&Pt.enableViewTransition)===!0;let Ft=u||l,qt=Pt&&Pt.overrideNavigation,vi=rc(Ft,vt,n),Oi=(Pt&&Pt.flushSync)===!0,hi=Zi(vi,Ft,vt.pathname);if(hi.active&&hi.matches&&(vi=hi.matches),!vi){let{error:ct,notFoundMatches:ot,route:rt}=Ct(vt.pathname);ae(vt,{matches:ot,loaderData:{},errors:{[rt.id]:ct}},{flushSync:Oi});return}if(T.initialized&&!$&&A6(T.location,vt)&&!(Pt&&Pt.submission&&uo(Pt.submission.formMethod))){ae(vt,{matches:vi},{flushSync:Oi});return}q=new AbortController;let He=Ad(i.history,vt,q.signal,Pt&&Pt.submission),ve;if(Pt&&Pt.pendingError)ve=[cu(vi).route.id,{type:"error",error:Pt.pendingError}];else if(Pt&&Pt.submission&&uo(Pt.submission.formMethod)){let ct=await ce(He,vt,Pt.submission,vi,hi.active,{replace:Pt.replace,flushSync:Oi});if(ct.shortCircuited)return;if(ct.pendingActionResult){let[ot,rt]=ct.pendingActionResult;if(Oa(rt)&&zf(rt.error)&&rt.error.status===404){q=null,ae(vt,{matches:ct.matches,loaderData:{},errors:{[ot]:rt.error}});return}}vi=ct.matches||vi,ve=ct.pendingActionResult,qt=T0(vt,Pt.submission),Oi=!1,hi.active=!1,He=Ad(i.history,He.url,He.signal)}let{shortCircuited:Le,matches:$e,loaderData:Ke,errors:st}=await ye(He,vt,vi,hi.active,qt,Pt&&Pt.submission,Pt&&Pt.fetcherSubmission,Pt&&Pt.replace,Pt&&Pt.initialHydration===!0,Oi,ve);Le||(q=null,ae(vt,{matches:$e||vi,...i2(ve),loaderData:Ke,errors:st}))}async function ce(dt,vt,Pt,Ft,qt,vi={}){fe();let Oi=I6(vt,Pt);if(Q({navigation:Oi},{flushSync:vi.flushSync===!0}),qt){let ve=await xn(Ft,vt.pathname,dt.signal);if(ve.type==="aborted")return{shortCircuited:!0};if(ve.type==="error"){let Le=cu(ve.partialMatches).route.id;return{matches:ve.partialMatches,pendingActionResult:[Le,{type:"error",error:ve.error}]}}else if(ve.matches)Ft=ve.matches;else{let{notFoundMatches:Le,error:$e,route:Ke}=Ct(vt.pathname);return{matches:Le,pendingActionResult:[Ke.id,{type:"error",error:$e}]}}}let hi,He=Dp(Ft,vt);if(!He.route.action&&!He.route.lazy)hi={type:"error",error:Qa(405,{method:dt.method,pathname:vt.pathname,routeId:He.route.id})};else if(hi=(await ke("action",T,dt,[He],Ft,null))[He.route.id],dt.signal.aborted)return{shortCircuited:!0};if(du(hi)){let ve;return vi&&vi.replace!=null?ve=vi.replace:ve=Qw(hi.response.headers.get("Location"),new URL(dt.url),n)===T.location.pathname+T.location.search,await Ge(dt,hi,!0,{submission:Pt,replace:ve}),{shortCircuited:!0}}if(Oa(hi)){let ve=cu(Ft,He.route.id);return(vi&&vi.replace)!==!0&&(I="PUSH"),{matches:Ft,pendingActionResult:[ve.route.id,hi]}}return{matches:Ft,pendingActionResult:[He.route.id,hi]}}async function ye(dt,vt,Pt,Ft,qt,vi,Oi,hi,He,ve,Le){let $e=qt||T0(vt,vi),Ke=vi||Oi||s2($e),st=!V&&!He;if(Ft){if(st){let Pi=we(Le);Q({navigation:$e,...Pi!==void 0?{actionData:Pi}:{}},{flushSync:ve})}let _i=await xn(Pt,vt.pathname,dt.signal);if(_i.type==="aborted")return{shortCircuited:!0};if(_i.type==="error"){let Pi=cu(_i.partialMatches).route.id;return{matches:_i.partialMatches,loaderData:{},errors:{[Pi]:_i.error}}}else if(_i.matches)Pt=_i.matches;else{let{error:Pi,notFoundMatches:$i,route:ji}=Ct(vt.pathname);return{matches:$i,loaderData:{},errors:{[ji.id]:Pi}}}}let ct=u||l,[ot,rt]=Zw(i.history,T,Pt,Ke,vt,He===!0,$,L,de,W,H,ct,n,Le);if(U=++G,ot.length===0&&rt.length===0){let _i=ht();return ae(vt,{matches:Pt,loaderData:{},errors:Le&&Oa(Le[1])?{[Le[0]]:Le[1].error}:null,...i2(Le),..._i?{fetchers:new Map(T.fetchers)}:{}},{flushSync:ve}),{shortCircuited:!0}}if(st){let _i={};if(!Ft){_i.navigation=$e;let Pi=we(Le);Pi!==void 0&&(_i.actionData=Pi)}rt.length>0&&(_i.fetchers=ze(rt)),Q(_i,{flushSync:ve})}rt.forEach(_i=>{et(_i.key),_i.controller&&R.set(_i.key,_i.controller)});let mt=()=>rt.forEach(_i=>et(_i.key));q&&q.signal.addEventListener("abort",mt);let{loaderResults:kt,fetcherResults:zt}=await ge(T,Pt,ot,rt,dt);if(dt.signal.aborted)return{shortCircuited:!0};q&&q.signal.removeEventListener("abort",mt),rt.forEach(_i=>R.delete(_i.key));let Dt=tg(kt);if(Dt)return await Ge(dt,Dt.result,!0,{replace:hi}),{shortCircuited:!0};if(Dt=tg(zt),Dt)return H.add(Dt.key),await Ge(dt,Dt.result,!0,{replace:hi}),{shortCircuited:!0};let{loaderData:oi,errors:Kt}=e2(T,Pt,kt,Le,rt,zt);He&&T.errors&&(Kt={...T.errors,...Kt});let pi=ht(),bi=gt(U),Bi=pi||bi||rt.length>0;return{matches:Pt,loaderData:oi,errors:Kt,...Bi?{fetchers:new Map(T.fetchers)}:{}}}function we(dt){if(dt&&!Oa(dt[1]))return{[dt[0]]:dt[1].data};if(T.actionData)return Object.keys(T.actionData).length===0?null:T.actionData}function ze(dt){return dt.forEach(vt=>{let Pt=T.fetchers.get(vt.key),Ft=bp(void 0,Pt?Pt.data:void 0);T.fetchers.set(vt.key,Ft)}),new Map(T.fetchers)}async function Ce(dt,vt,Pt,Ft){et(dt);let qt=(Ft&&Ft.flushSync)===!0,vi=u||l,Oi=Ev(T.location,T.matches,n,Pt,vt,Ft==null?void 0:Ft.relative),hi=rc(vi,Oi,n),He=Zi(hi,vi,Oi);if(He.active&&He.matches&&(hi=He.matches),!hi){De(dt,vt,Qa(404,{pathname:Oi}),{flushSync:qt});return}let{path:ve,submission:Le,error:$e}=qw(!0,Oi,Ft);if($e){De(dt,vt,$e,{flushSync:qt});return}let Ke=Dp(hi,ve),st=(Ft&&Ft.preventScrollReset)===!0;if(Le&&uo(Le.formMethod)){await Ie(dt,vt,ve,Ke,hi,He.active,qt,st,Le);return}W.set(dt,{routeId:vt,path:ve}),await Fe(dt,vt,ve,Ke,hi,He.active,qt,st,Le)}async function Ie(dt,vt,Pt,Ft,qt,vi,Oi,hi,He){fe(),W.delete(dt);function ve(pn){if(!pn.route.action&&!pn.route.lazy){let Hn=Qa(405,{method:He.formMethod,pathname:Pt,routeId:vt});return De(dt,vt,Hn,{flushSync:Oi}),!0}return!1}if(!vi&&ve(Ft))return;let Le=T.fetchers.get(dt);Me(dt,D6(He,Le),{flushSync:Oi});let $e=new AbortController,Ke=Ad(i.history,Pt,$e.signal,He);if(vi){let pn=await xn(qt,Pt,Ke.signal);if(pn.type==="aborted")return;if(pn.type==="error"){De(dt,vt,pn.error,{flushSync:Oi});return}else if(pn.matches){if(qt=pn.matches,Ft=Dp(qt,Pt),ve(Ft))return}else{De(dt,vt,Qa(404,{pathname:Pt}),{flushSync:Oi});return}}R.set(dt,$e);let st=G,ot=(await ke("action",T,Ke,[Ft],qt,dt))[Ft.route.id];if(Ke.signal.aborted){R.get(dt)===$e&&R.delete(dt);return}if(de.has(dt)){if(du(ot)||Oa(ot)){Me(dt,Jl(void 0));return}}else{if(du(ot))if(R.delete(dt),U>st){Me(dt,Jl(void 0));return}else return H.add(dt),Me(dt,bp(He)),Ge(Ke,ot,!1,{fetcherSubmission:He,preventScrollReset:hi});if(Oa(ot)){De(dt,vt,ot.error);return}}let rt=T.navigation.location||T.location,mt=Ad(i.history,rt,$e.signal),kt=u||l,zt=T.navigation.state!=="idle"?rc(kt,T.navigation.location,n):T.matches;Pn(zt,"Didn't find any matches after fetcher action");let Dt=++G;B.set(dt,Dt);let oi=bp(He,ot.data);T.fetchers.set(dt,oi);let[Kt,pi]=Zw(i.history,T,zt,He,rt,!1,$,L,de,W,H,kt,n,[Ft.route.id,ot]);pi.filter(pn=>pn.key!==dt).forEach(pn=>{let Hn=pn.key,xr=T.fetchers.get(Hn),$r=bp(void 0,xr?xr.data:void 0);T.fetchers.set(Hn,$r),et(Hn),pn.controller&&R.set(Hn,pn.controller)}),Q({fetchers:new Map(T.fetchers)});let bi=()=>pi.forEach(pn=>et(pn.key));$e.signal.addEventListener("abort",bi);let{loaderResults:Bi,fetcherResults:_i}=await ge(T,zt,Kt,pi,mt);if($e.signal.aborted)return;$e.signal.removeEventListener("abort",bi),B.delete(dt),R.delete(dt),pi.forEach(pn=>R.delete(pn.key));let Pi=tg(Bi);if(Pi)return Ge(mt,Pi.result,!1,{preventScrollReset:hi});if(Pi=tg(_i),Pi)return H.add(Pi.key),Ge(mt,Pi.result,!1,{preventScrollReset:hi});let{loaderData:$i,errors:ji}=e2(T,zt,Bi,void 0,pi,_i);if(T.fetchers.has(dt)){let pn=Jl(ot.data);T.fetchers.set(dt,pn)}gt(Dt),T.navigation.state==="loading"&&Dt>U?(Pn(I,"Expected pending action"),q&&q.abort(),ae(T.navigation.location,{matches:zt,loaderData:$i,errors:ji,fetchers:new Map(T.fetchers)})):(Q({errors:ji,loaderData:t2(T.loaderData,$i,zt,ji),fetchers:new Map(T.fetchers)}),$=!1)}async function Fe(dt,vt,Pt,Ft,qt,vi,Oi,hi,He){let ve=T.fetchers.get(dt);Me(dt,bp(He,ve?ve.data:void 0),{flushSync:Oi});let Le=new AbortController,$e=Ad(i.history,Pt,Le.signal);if(vi){let ot=await xn(qt,Pt,$e.signal);if(ot.type==="aborted")return;if(ot.type==="error"){De(dt,vt,ot.error,{flushSync:Oi});return}else if(ot.matches)qt=ot.matches,Ft=Dp(qt,Pt);else{De(dt,vt,Qa(404,{pathname:Pt}),{flushSync:Oi});return}}R.set(dt,Le);let Ke=G,ct=(await ke("loader",T,$e,[Ft],qt,dt))[Ft.route.id];if(R.get(dt)===Le&&R.delete(dt),!$e.signal.aborted){if(de.has(dt)){Me(dt,Jl(void 0));return}if(du(ct))if(U>Ke){Me(dt,Jl(void 0));return}else{H.add(dt),await Ge($e,ct,!1,{preventScrollReset:hi});return}if(Oa(ct)){De(dt,vt,ct.error);return}Me(dt,Jl(ct.data))}}async function Ge(dt,vt,Pt,{submission:Ft,fetcherSubmission:qt,preventScrollReset:vi,replace:Oi}={}){vt.response.headers.has("X-Remix-Revalidate")&&($=!0);let hi=vt.response.headers.get("Location");Pn(hi,"Expected a Location header on the redirect Response"),hi=Qw(hi,new URL(dt.url),n);let He=ef(T.location,hi,{_isRedirect:!0});if(t){let ct=!1;if(vt.response.headers.has("X-Remix-Reload-Document"))ct=!0;else if(Ub.test(hi)){const ot=i.history.createURL(hi);ct=ot.origin!==e.location.origin||vo(ot.pathname,n)==null}if(ct){Oi?e.location.replace(hi):e.location.assign(hi);return}}q=null;let ve=Oi===!0||vt.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Le,formAction:$e,formEncType:Ke}=T.navigation;!Ft&&!qt&&Le&&$e&&Ke&&(Ft=s2(T.navigation));let st=Ft||qt;if(f6.has(vt.response.status)&&st&&uo(st.formMethod))await ne(ve,He,{submission:{...st,formAction:hi},preventScrollReset:vi||N,enableViewTransition:Pt?Z:void 0});else{let ct=T0(He,Ft);await ne(ve,He,{overrideNavigation:ct,fetcherSubmission:qt,preventScrollReset:vi||N,enableViewTransition:Pt?Z:void 0})}}async function ke(dt,vt,Pt,Ft,qt,vi){let Oi,hi={};try{Oi=await C6(p,dt,vt,Pt,Ft,qt,vi,s,r)}catch(He){return Ft.forEach(ve=>{hi[ve.route.id]={type:"error",error:He}}),hi}for(let[He,ve]of Object.entries(Oi))if(M6(ve)){let Le=ve.result;hi[He]={type:"redirect",response:E6(Le,Pt,He,qt,n)}}else hi[He]=await S6(ve);return hi}async function ge(dt,vt,Pt,Ft,qt){let vi=ke("loader",dt,qt,Pt,vt,null),Oi=Promise.all(Ft.map(async ve=>{if(ve.matches&&ve.match&&ve.controller){let $e=(await ke("loader",dt,Ad(i.history,ve.path,ve.controller.signal),[ve.match],ve.matches,ve.key))[ve.match.route.id];return{[ve.key]:$e}}else return Promise.resolve({[ve.key]:{type:"error",error:Qa(404,{pathname:ve.path})}})})),hi=await vi,He=(await Oi).reduce((ve,Le)=>Object.assign(ve,Le),{});return{loaderResults:hi,fetcherResults:He}}function fe(){$=!0,W.forEach((dt,vt)=>{R.has(vt)&&L.add(vt),et(vt)})}function Me(dt,vt,Pt={}){T.fetchers.set(dt,vt),Q({fetchers:new Map(T.fetchers)},{flushSync:(Pt&&Pt.flushSync)===!0})}function De(dt,vt,Pt,Ft={}){let qt=cu(T.matches,vt);je(dt),Q({errors:{[qt.route.id]:Pt},fetchers:new Map(T.fetchers)},{flushSync:(Ft&&Ft.flushSync)===!0})}function Pe(dt){return re.set(dt,(re.get(dt)||0)+1),de.has(dt)&&de.delete(dt),T.fetchers.get(dt)||m6}function je(dt){let vt=T.fetchers.get(dt);R.has(dt)&&!(vt&&vt.state==="loading"&&B.has(dt))&&et(dt),W.delete(dt),B.delete(dt),H.delete(dt),de.delete(dt),L.delete(dt),T.fetchers.delete(dt)}function Xe(dt){let vt=(re.get(dt)||0)-1;vt<=0?(re.delete(dt),de.add(dt)):re.set(dt,vt),Q({fetchers:new Map(T.fetchers)})}function et(dt){let vt=R.get(dt);vt&&(vt.abort(),R.delete(dt))}function nt(dt){for(let vt of dt){let Pt=Pe(vt),Ft=Jl(Pt.data);T.fetchers.set(vt,Ft)}}function ht(){let dt=[],vt=!1;for(let Pt of H){let Ft=T.fetchers.get(Pt);Pn(Ft,`Expected fetcher: ${Pt}`),Ft.state==="loading"&&(H.delete(Pt),dt.push(Pt),vt=!0)}return nt(dt),vt}function gt(dt){let vt=[];for(let[Pt,Ft]of B)if(Ft<dt){let qt=T.fetchers.get(Pt);Pn(qt,`Expected fetcher: ${Pt}`),qt.state==="loading"&&(et(Pt),B.delete(Pt),vt.push(Pt))}return nt(vt),vt.length>0}function wt(dt,vt){let Pt=T.blockers.get(dt)||vp;return ie.get(dt)!==vt&&ie.set(dt,vt),Pt}function Rt(dt){T.blockers.delete(dt),ie.delete(dt)}function ft(dt,vt){let Pt=T.blockers.get(dt)||vp;Pn(Pt.state==="unblocked"&&vt.state==="blocked"||Pt.state==="blocked"&&vt.state==="blocked"||Pt.state==="blocked"&&vt.state==="proceeding"||Pt.state==="blocked"&&vt.state==="unblocked"||Pt.state==="proceeding"&&vt.state==="unblocked",`Invalid blocker state transition: ${Pt.state} -> ${vt.state}`);let Ft=new Map(T.blockers);Ft.set(dt,vt),Q({blockers:Ft})}function St({currentLocation:dt,nextLocation:vt,historyAction:Pt}){if(ie.size===0)return;ie.size>1&&ps(!1,"A router only supports one blocker at a time");let Ft=Array.from(ie.entries()),[qt,vi]=Ft[Ft.length-1],Oi=T.blockers.get(qt);if(!(Oi&&Oi.state==="proceeding")&&vi({currentLocation:dt,nextLocation:vt,historyAction:Pt}))return qt}function Ct(dt){let vt=Qa(404,{pathname:dt}),Pt=u||l,{matches:Ft,route:qt}=n2(Pt);return{notFoundMatches:Ft,route:qt,error:vt}}function si(dt,vt,Pt){if(C=dt,w=vt,_=Pt||null,!k&&T.navigation===C0){k=!0;let Ft=cn(T.location,T.matches);Ft!=null&&Q({restoreScrollPosition:Ft})}return()=>{C=null,w=null,_=null}}function di(dt,vt){return _&&_(dt,vt.map(Ft=>Wz(Ft,T.loaderData)))||dt.key}function Ht(dt,vt){if(C&&w){let Pt=di(dt,vt);C[Pt]=w()}}function cn(dt,vt){if(C){let Pt=di(dt,vt),Ft=C[Pt];if(typeof Ft=="number")return Ft}return null}function Zi(dt,vt,Pt){if(m)if(dt){if(Object.keys(dt[0].params).length>0)return{active:!0,matches:Mg(vt,Pt,n,!0)}}else return{active:!0,matches:Mg(vt,Pt,n,!0)||[]};return{active:!1,matches:null}}async function xn(dt,vt,Pt){if(!m)return{type:"success",matches:dt};let Ft=dt;for(;;){let qt=u==null,vi=u||l,Oi=s;try{await m({path:vt,matches:Ft,patch:(ve,Le)=>{Pt.aborted||Kw(ve,Le,vi,Oi,r)}})}catch(ve){return{type:"error",error:ve,partialMatches:Ft}}finally{qt&&!Pt.aborted&&(l=[...l])}if(Pt.aborted)return{type:"aborted"};let hi=rc(vi,vt,n);if(hi)return{type:"success",matches:hi};let He=Mg(vi,vt,n,!0);if(!He||Ft.length===He.length&&Ft.every((ve,Le)=>ve.route.id===He[Le].route.id))return{type:"success",matches:null};Ft=He}}function jn(dt){s={},u=Jg(dt,r,void 0,s)}function nn(dt,vt){let Pt=u==null;Kw(dt,vt,u||l,s,r),Pt&&(l=[...l],Q({}))}return D={get basename(){return n},get future(){return g},get state(){return T},get routes(){return l},get window(){return e},initialize:xe,subscribe:K,enableScrollRestoration:si,navigate:_e,fetch:Ce,revalidate:J,createHref:dt=>i.history.createHref(dt),encodeLocation:dt=>i.history.encodeLocation(dt),getFetcher:Pe,deleteFetcher:Xe,dispose:Se,getBlocker:wt,deleteBlocker:Rt,patchRoutes:nn,_internalFetchControllers:R,_internalSetRoutes:jn},D}function x6(i){return i!=null&&("formData"in i&&i.formData!=null||"body"in i&&i.body!==void 0)}function Ev(i,e,t,r,s,l){let u,n;if(s){u=[];for(let m of e)if(u.push(m),m.route.id===s){n=m;break}}else u=e,n=e[e.length-1];let p=Yy(r||".",qy(u),vo(i.pathname,t)||i.pathname,l==="path");if(r==null&&(p.search=i.search,p.hash=i.hash),(r==null||r===""||r===".")&&n){let m=Vb(p.search);if(n.route.index&&!m)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!n.route.index&&m){let g=new URLSearchParams(p.search),v=g.getAll("index");g.delete("index"),v.filter(C=>C).forEach(C=>g.append("index",C));let y=g.toString();p.search=y?`?${y}`:""}}return t!=="/"&&(p.pathname=p.pathname==="/"?t:jo([t,p.pathname])),xc(p)}function qw(i,e,t){if(!t||!x6(t))return{path:e};if(t.formMethod&&!P6(t.formMethod))return{path:e,error:Qa(405,{method:t.formMethod})};let r=()=>({path:e,error:Qa(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),u=eE(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!uo(l))return r();let v=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((y,[C,_])=>`${y}${C}=${_}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:u,formEncType:t.formEncType,formData:void 0,json:void 0,text:v}}}else if(t.formEncType==="application/json"){if(!uo(l))return r();try{let v=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:u,formEncType:t.formEncType,formData:void 0,json:v,text:void 0}}}catch{return r()}}}Pn(typeof FormData=="function","FormData is not available in this environment");let n,p;if(t.formData)n=Av(t.formData),p=t.formData;else if(t.body instanceof FormData)n=Av(t.body),p=t.body;else if(t.body instanceof URLSearchParams)n=t.body,p=Jw(n);else if(t.body==null)n=new URLSearchParams,p=new FormData;else try{n=new URLSearchParams(t.body),p=Jw(n)}catch{return r()}let m={formMethod:l,formAction:u,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(uo(m.formMethod))return{path:e,submission:m};let g=Il(e);return i&&g.search&&Vb(g.search)&&n.append("index",""),g.search=`?${n}`,{path:xc(g),submission:m}}function Yw(i,e,t=!1){let r=i.findIndex(s=>s.route.id===e);return r>=0?i.slice(0,t?r+1:r):i}function Zw(i,e,t,r,s,l,u,n,p,m,g,v,y,C){let _=C?Oa(C[1])?C[1].error:C[1].data:void 0,w=i.createURL(e.location),k=i.createURL(s),S=t;l&&e.errors?S=Yw(t,Object.keys(e.errors)[0],!0):C&&Oa(C[1])&&(S=Yw(t,C[0]));let x=C?C[1].statusCode:void 0,P=x&&x>=400,D=S.filter((I,N)=>{let{route:q}=I;if(q.lazy)return!0;if(q.loader==null)return!1;if(l)return kv(q,e.loaderData,e.errors);if(v6(e.loaderData,e.matches[N],I))return!0;let Z=e.matches[N],X=I;return Xw(I,{currentUrl:w,currentParams:Z.params,nextUrl:k,nextParams:X.params,...r,actionResult:_,actionStatus:x,defaultShouldRevalidate:P?!1:u||w.pathname+w.search===k.pathname+k.search||w.search!==k.search||b6(Z,X)})}),T=[];return m.forEach((I,N)=>{if(l||!t.some(V=>V.route.id===I.routeId)||p.has(N))return;let q=rc(v,I.path,y);if(!q){T.push({key:N,routeId:I.routeId,path:I.path,matches:null,match:null,controller:null});return}let Z=e.fetchers.get(N),X=Dp(q,I.path),O=!1;g.has(N)?O=!1:n.has(N)?(n.delete(N),O=!0):Z&&Z.state!=="idle"&&Z.data===void 0?O=u:O=Xw(X,{currentUrl:w,currentParams:e.matches[e.matches.length-1].params,nextUrl:k,nextParams:t[t.length-1].params,...r,actionResult:_,actionStatus:x,defaultShouldRevalidate:P?!1:u}),O&&T.push({key:N,routeId:I.routeId,path:I.path,matches:q,match:X,controller:new AbortController})}),[D,T]}function kv(i,e,t){if(i.lazy)return!0;if(!i.loader)return!1;let r=e!=null&&e[i.id]!==void 0,s=t!=null&&t[i.id]!==void 0;return!r&&s?!1:typeof i.loader=="function"&&i.loader.hydrate===!0?!0:!r&&!s}function v6(i,e,t){let r=!e||t.route.id!==e.route.id,s=!i.hasOwnProperty(t.route.id);return r||s}function b6(i,e){let t=i.route.path;return i.pathname!==e.pathname||t!=null&&t.endsWith("*")&&i.params["*"]!==e.params["*"]}function Xw(i,e){if(i.route.shouldRevalidate){let t=i.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function Kw(i,e,t,r,s){let l;if(i){let p=r[i];Pn(p,`No route found to patch children into: routeId = ${i}`),p.children||(p.children=[]),l=p.children}else l=t;let u=e.filter(p=>!l.some(m=>JS(p,m))),n=Jg(u,s,[i||"_","patch",String((l==null?void 0:l.length)||"0")],r);l.push(...n)}function JS(i,e){return"id"in i&&"id"in e&&i.id===e.id?!0:i.index===e.index&&i.path===e.path&&i.caseSensitive===e.caseSensitive?(!i.children||i.children.length===0)&&(!e.children||e.children.length===0)?!0:i.children.every((t,r)=>{var s;return(s=e.children)==null?void 0:s.some(l=>JS(t,l))}):!1}async function _6(i,e,t){if(!i.lazy)return;let r=await i.lazy();if(!i.lazy)return;let s=t[i.id];Pn(s,"No route found in manifest");let l={};for(let u in r){let p=s[u]!==void 0&&u!=="hasErrorBoundary";ps(!p,`Route "${s.id}" has a static property "${u}" defined but its lazy function is also returning a value for this property. The lazy route property "${u}" will be ignored.`),!p&&!Gz.has(u)&&(l[u]=r[u])}Object.assign(s,l),Object.assign(s,{...e(s),lazy:void 0})}async function w6({matches:i}){let e=i.filter(r=>r.shouldLoad);return(await Promise.all(e.map(r=>r.resolve()))).reduce((r,s,l)=>Object.assign(r,{[e[l].route.id]:s}),{})}async function C6(i,e,t,r,s,l,u,n,p,m){let g=l.map(C=>C.route.lazy?_6(C.route,p,n):void 0),v=l.map((C,_)=>{let w=g[_],k=s.some(x=>x.route.id===C.route.id);return{...C,shouldLoad:k,resolve:async x=>(x&&r.method==="GET"&&(C.route.lazy||C.route.loader)&&(k=!0),k?T6(e,r,C,w,x,m):Promise.resolve({type:"data",result:void 0}))}}),y=await i({matches:v,request:r,params:l[0].params,fetcherKey:u,context:m});try{await Promise.all(g)}catch{}return y}async function T6(i,e,t,r,s,l){let u,n,p=m=>{let g,v=new Promise((_,w)=>g=w);n=()=>g(),e.signal.addEventListener("abort",n);let y=_=>typeof m!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${i}" [routeId: ${t.route.id}]`)):m({request:e,params:t.params,context:l},..._!==void 0?[_]:[]),C=(async()=>{try{return{type:"data",result:await(s?s(w=>y(w)):y())}}catch(_){return{type:"error",result:_}}})();return Promise.race([C,v])};try{let m=t.route[i];if(r)if(m){let g,[v]=await Promise.all([p(m).catch(y=>{g=y}),r]);if(g!==void 0)throw g;u=v}else if(await r,m=t.route[i],m)u=await p(m);else if(i==="action"){let g=new URL(e.url),v=g.pathname+g.search;throw Qa(405,{method:e.method,pathname:v,routeId:t.route.id})}else return{type:"data",result:void 0};else if(m)u=await p(m);else{let g=new URL(e.url),v=g.pathname+g.search;throw Qa(404,{pathname:v})}}catch(m){return{type:"error",result:m}}finally{n&&e.signal.removeEventListener("abort",n)}return u}async function S6(i){var r,s,l,u;let{result:e,type:t}=i;if(tE(e)){let n;try{let p=e.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?e.body==null?n=null:n=await e.json():n=await e.text()}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new ty(e.status,e.statusText,n),statusCode:e.status,headers:e.headers}:{type:"data",data:n,statusCode:e.status,headers:e.headers}}if(t==="error"){if(r2(e)){if(e.data instanceof Error)return{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status};e=new ty(((s=e.init)==null?void 0:s.status)||500,void 0,e.data)}return{type:"error",error:e,statusCode:zf(e)?e.status:void 0}}return r2(e)?{type:"data",data:e.data,statusCode:(l=e.init)==null?void 0:l.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function E6(i,e,t,r,s){let l=i.headers.get("Location");if(Pn(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!Ub.test(l)){let u=r.slice(0,r.findIndex(n=>n.route.id===t)+1);l=Ev(new URL(e.url),u,s,l),i.headers.set("Location",l)}return i}function Qw(i,e,t){if(Ub.test(i)){let r=i,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),l=vo(s.pathname,t)!=null;if(s.origin===e.origin&&l)return s.pathname+s.search+s.hash}return i}function Ad(i,e,t,r){let s=i.createURL(eE(e)).toString(),l={signal:t};if(r&&uo(r.formMethod)){let{formMethod:u,formEncType:n}=r;l.method=u.toUpperCase(),n==="application/json"?(l.headers=new Headers({"Content-Type":n}),l.body=JSON.stringify(r.json)):n==="text/plain"?l.body=r.text:n==="application/x-www-form-urlencoded"&&r.formData?l.body=Av(r.formData):l.body=r.formData}return new Request(s,l)}function Av(i){let e=new URLSearchParams;for(let[t,r]of i.entries())e.append(t,typeof r=="string"?r:r.name);return e}function Jw(i){let e=new FormData;for(let[t,r]of i.entries())e.append(t,r);return e}function k6(i,e,t,r=!1,s=!1){let l={},u=null,n,p=!1,m={},g=t&&Oa(t[1])?t[1].error:void 0;return i.forEach(v=>{if(!(v.route.id in e))return;let y=v.route.id,C=e[y];if(Pn(!du(C),"Cannot handle redirect results in processLoaderData"),Oa(C)){let _=C.error;if(g!==void 0&&(_=g,g=void 0),u=u||{},s)u[y]=_;else{let w=cu(i,y);u[w.route.id]==null&&(u[w.route.id]=_)}r||(l[y]=QS),p||(p=!0,n=zf(C.error)?C.error.status:500),C.headers&&(m[y]=C.headers)}else l[y]=C.data,C.statusCode&&C.statusCode!==200&&!p&&(n=C.statusCode),C.headers&&(m[y]=C.headers)}),g!==void 0&&t&&(u={[t[0]]:g},l[t[0]]=void 0),{loaderData:l,errors:u,statusCode:n||200,loaderHeaders:m}}function e2(i,e,t,r,s,l){let{loaderData:u,errors:n}=k6(e,t,r);return s.forEach(p=>{let{key:m,match:g,controller:v}=p,y=l[m];if(Pn(y,"Did not find corresponding fetcher result"),!(v&&v.signal.aborted))if(Oa(y)){let C=cu(i.matches,g==null?void 0:g.route.id);n&&n[C.route.id]||(n={...n,[C.route.id]:y.error}),i.fetchers.delete(m)}else if(du(y))Pn(!1,"Unhandled fetcher revalidation redirect");else{let C=Jl(y.data);i.fetchers.set(m,C)}}),{loaderData:u,errors:n}}function t2(i,e,t,r){let s=Object.entries(e).filter(([,l])=>l!==QS).reduce((l,[u,n])=>(l[u]=n,l),{});for(let l of t){let u=l.route.id;if(!e.hasOwnProperty(u)&&i.hasOwnProperty(u)&&l.route.loader&&(s[u]=i[u]),r&&r.hasOwnProperty(u))break}return s}function i2(i){return i?Oa(i[1])?{actionData:{}}:{actionData:{[i[0]]:i[1].data}}:{}}function cu(i,e){return(e?i.slice(0,i.findIndex(r=>r.route.id===e)+1):[...i]).reverse().find(r=>r.route.hasErrorBoundary===!0)||i[0]}function n2(i){let e=i.length===1?i[0]:i.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Qa(i,{pathname:e,routeId:t,method:r,type:s,message:l}={}){let u="Unknown Server Error",n="Unknown @remix-run/router error";return i===400?(u="Bad Request",r&&e&&t?n=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(n="Unable to encode submission body")):i===403?(u="Forbidden",n=`Route "${t}" does not match URL "${e}"`):i===404?(u="Not Found",n=`No route matches URL "${e}"`):i===405&&(u="Method Not Allowed",r&&e&&t?n=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(n=`Invalid request method "${r.toUpperCase()}"`)),new ty(i||500,u,new Error(n),!0)}function tg(i){let e=Object.entries(i);for(let t=e.length-1;t>=0;t--){let[r,s]=e[t];if(du(s))return{key:r,result:s}}}function eE(i){let e=typeof i=="string"?Il(i):i;return xc({...e,hash:""})}function A6(i,e){return i.pathname!==e.pathname||i.search!==e.search?!1:i.hash===""?e.hash!=="":i.hash===e.hash?!0:e.hash!==""}function M6(i){return tE(i.result)&&p6.has(i.result.status)}function Oa(i){return i.type==="error"}function du(i){return(i&&i.type)==="redirect"}function r2(i){return typeof i=="object"&&i!=null&&"type"in i&&"data"in i&&"init"in i&&i.type==="DataWithResponseInit"}function tE(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.headers=="object"&&typeof i.body<"u"}function P6(i){return h6.has(i.toUpperCase())}function uo(i){return u6.has(i.toUpperCase())}function Vb(i){return new URLSearchParams(i).getAll("index").some(e=>e==="")}function Dp(i,e){let t=typeof e=="string"?Il(e).search:e.search;if(i[i.length-1].route.index&&Vb(t||""))return i[i.length-1];let r=ZS(i);return r[r.length-1]}function s2(i){let{formMethod:e,formAction:t,formEncType:r,text:s,formData:l,json:u}=i;if(!(!e||!t||!r)){if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:e,formAction:t,formEncType:r,formData:l,json:void 0,text:void 0};if(u!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:u,text:void 0}}}function T0(i,e){return e?{state:"loading",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:i,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function I6(i,e){return{state:"submitting",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function bp(i,e){return i?{state:"loading",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function D6(i,e){return{state:"submitting",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e?e.data:void 0}}function Jl(i){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:i}}function R6(i,e){try{let t=i.sessionStorage.getItem(KS);if(t){let r=JSON.parse(t);for(let[s,l]of Object.entries(r||{}))l&&Array.isArray(l)&&e.set(s,new Set(l||[]))}}catch{}}function L6(i,e){if(e.size>0){let t={};for(let[r,s]of e)t[r]=[...s];try{i.sessionStorage.setItem(KS,JSON.stringify(t))}catch(r){ps(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function z6(){let i,e,t=new Promise((r,s)=>{i=async l=>{r(l);try{await t}catch{}},e=async l=>{s(l);try{await t}catch{}}});return{promise:t,resolve:i,reject:e}}var ju=Ue.createContext(null);ju.displayName="DataRouter";var Nf=Ue.createContext(null);Nf.displayName="DataRouterState";var Gb=Ue.createContext({isTransitioning:!1});Gb.displayName="ViewTransition";var iE=Ue.createContext(new Map);iE.displayName="Fetchers";var N6=Ue.createContext(null);N6.displayName="Await";var wo=Ue.createContext(null);wo.displayName="Navigation";var Zy=Ue.createContext(null);Zy.displayName="Location";var Ko=Ue.createContext({outlet:null,matches:[],isDataRoute:!1});Ko.displayName="Route";var Hb=Ue.createContext(null);Hb.displayName="RouteError";function O6(i,{relative:e}={}){Pn(fh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=Ue.useContext(wo),{hash:s,pathname:l,search:u}=mh(i,{relative:e}),n=l;return t!=="/"&&(n=l==="/"?t:jo([t,l])),r.createHref({pathname:n,search:u,hash:s})}function fh(){return Ue.useContext(Zy)!=null}function Qo(){return Pn(fh(),"useLocation() may be used only in the context of a <Router> component."),Ue.useContext(Zy).location}var nE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rE(i){Ue.useContext(wo).static||Ue.useLayoutEffect(i)}function Of(){let{isDataRoute:i}=Ue.useContext(Ko);return i?Z6():j6()}function j6(){Pn(fh(),"useNavigate() may be used only in the context of a <Router> component.");let i=Ue.useContext(ju),{basename:e,navigator:t}=Ue.useContext(wo),{matches:r}=Ue.useContext(Ko),{pathname:s}=Qo(),l=JSON.stringify(qy(r)),u=Ue.useRef(!1);return rE(()=>{u.current=!0}),Ue.useCallback((p,m={})=>{if(ps(u.current,nE),!u.current)return;if(typeof p=="number"){t.go(p);return}let g=Yy(p,JSON.parse(l),s,m.relative==="path");i==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:jo([e,g.pathname])),(m.replace?t.replace:t.push)(g,m.state,m)},[e,t,l,s,i])}Ue.createContext(null);function mh(i,{relative:e}={}){let{matches:t}=Ue.useContext(Ko),{pathname:r}=Qo(),s=JSON.stringify(qy(t));return Ue.useMemo(()=>Yy(i,JSON.parse(s),r,e==="path"),[i,s,r,e])}function F6(i,e,t,r){Pn(fh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=Ue.useContext(wo),{matches:l}=Ue.useContext(Ko),u=l[l.length-1],n=u?u.params:{},p=u?u.pathname:"/",m=u?u.pathnameBase:"/",g=u&&u.route;{let S=g&&g.path||"";aE(p,!g||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let v=Qo(),y;y=v;let C=y.pathname||"/",_=C;if(m!=="/"){let S=m.replace(/^\//,"").split("/");_="/"+C.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=rc(i,{pathname:_});return ps(g||w!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),ps(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),G6(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},n,S.params),pathname:jo([m,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?m:jo([m,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),l,t,r)}function B6(){let i=sE(),e=zf(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",i),u=Ue.createElement(Ue.Fragment,null,Ue.createElement("p",null,"💿 Hey developer 👋"),Ue.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Ue.createElement("code",{style:l},"ErrorBoundary")," or"," ",Ue.createElement("code",{style:l},"errorElement")," prop on your route.")),Ue.createElement(Ue.Fragment,null,Ue.createElement("h2",null,"Unexpected Application Error!"),Ue.createElement("h3",{style:{fontStyle:"italic"}},e),t?Ue.createElement("pre",{style:s},t):null,u)}var $6=Ue.createElement(B6,null),U6=class extends Ue.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?Ue.createElement(Ko.Provider,{value:this.props.routeContext},Ue.createElement(Hb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function V6({routeContext:i,match:e,children:t}){let r=Ue.useContext(ju);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),Ue.createElement(Ko.Provider,{value:i},t)}function G6(i,e=[],t=null,r=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let s=i,l=t==null?void 0:t.errors;if(l!=null){let p=s.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);Pn(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let u=!1,n=-1;if(t)for(let p=0;p<s.length;p++){let m=s[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(n=p),m.route.id){let{loaderData:g,errors:v}=t,y=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||y){u=!0,n>=0?s=s.slice(0,n+1):s=[s[0]];break}}}return s.reduceRight((p,m,g)=>{let v,y=!1,C=null,_=null;t&&(v=l&&m.route.id?l[m.route.id]:void 0,C=m.route.errorElement||$6,u&&(n<0&&g===0?(aE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,_=null):n===g&&(y=!0,_=m.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,g+1)),k=()=>{let S;return v?S=C:y?S=_:m.route.Component?S=Ue.createElement(m.route.Component,null):m.route.element?S=m.route.element:S=p,Ue.createElement(V6,{match:m,routeContext:{outlet:p,matches:w,isDataRoute:t!=null},children:S})};return t&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?Ue.createElement(U6,{location:t.location,revalidation:t.revalidation,component:C,error:v,children:k(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):k()},null)}function Wb(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function H6(i){let e=Ue.useContext(ju);return Pn(e,Wb(i)),e}function W6(i){let e=Ue.useContext(Nf);return Pn(e,Wb(i)),e}function q6(i){let e=Ue.useContext(Ko);return Pn(e,Wb(i)),e}function qb(i){let e=q6(i),t=e.matches[e.matches.length-1];return Pn(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function Y6(){return qb("useRouteId")}function sE(){var r;let i=Ue.useContext(Hb),e=W6("useRouteError"),t=qb("useRouteError");return i!==void 0?i:(r=e.errors)==null?void 0:r[t]}function Z6(){let{router:i}=H6("useNavigate"),e=qb("useNavigate"),t=Ue.useRef(!1);return rE(()=>{t.current=!0}),Ue.useCallback(async(s,l={})=>{ps(t.current,nE),t.current&&(typeof s=="number"?i.navigate(s):await i.navigate(s,{fromRouteId:e,...l}))},[i,e])}var a2={};function aE(i,e,t){!e&&!a2[i]&&(a2[i]=!0,ps(!1,t))}var o2={};function l2(i,e){!i&&!o2[e]&&(o2[e]=!0,console.warn(e))}function X6(i){let e={hasErrorBoundary:i.hasErrorBoundary||i.ErrorBoundary!=null||i.errorElement!=null};return i.Component&&(i.element&&ps(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:Ue.createElement(i.Component),Component:void 0})),i.HydrateFallback&&(i.hydrateFallbackElement&&ps(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:Ue.createElement(i.HydrateFallback),HydrateFallback:void 0})),i.ErrorBoundary&&(i.errorElement&&ps(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:Ue.createElement(i.ErrorBoundary),ErrorBoundary:void 0})),e}var K6=class{constructor(){this.status="pending",this.promise=new Promise((i,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",i(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function Q6({router:i,flushSync:e}){let[t,r]=Ue.useState(i.state),[s,l]=Ue.useState(),[u,n]=Ue.useState({isTransitioning:!1}),[p,m]=Ue.useState(),[g,v]=Ue.useState(),[y,C]=Ue.useState(),_=Ue.useRef(new Map),w=Ue.useCallback((P,{deletedFetchers:D,flushSync:T,viewTransitionOpts:I})=>{P.fetchers.forEach((q,Z)=>{q.data!==void 0&&_.current.set(Z,q.data)}),D.forEach(q=>_.current.delete(q)),l2(T===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let N=i.window!=null&&i.window.document!=null&&typeof i.window.document.startViewTransition=="function";if(l2(I==null||N,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!I||!N){e&&T?e(()=>r(P)):Ue.startTransition(()=>r(P));return}if(e&&T){e(()=>{g&&(p&&p.resolve(),g.skipTransition()),n({isTransitioning:!0,flushSync:!0,currentLocation:I.currentLocation,nextLocation:I.nextLocation})});let q=i.window.document.startViewTransition(()=>{e(()=>r(P))});q.finished.finally(()=>{e(()=>{m(void 0),v(void 0),l(void 0),n({isTransitioning:!1})})}),e(()=>v(q));return}g?(p&&p.resolve(),g.skipTransition(),C({state:P,currentLocation:I.currentLocation,nextLocation:I.nextLocation})):(l(P),n({isTransitioning:!0,flushSync:!1,currentLocation:I.currentLocation,nextLocation:I.nextLocation}))},[i.window,e,g,p]);Ue.useLayoutEffect(()=>i.subscribe(w),[i,w]),Ue.useEffect(()=>{u.isTransitioning&&!u.flushSync&&m(new K6)},[u]),Ue.useEffect(()=>{if(p&&s&&i.window){let P=s,D=p.promise,T=i.window.document.startViewTransition(async()=>{Ue.startTransition(()=>r(P)),await D});T.finished.finally(()=>{m(void 0),v(void 0),l(void 0),n({isTransitioning:!1})}),v(T)}},[s,p,i.window]),Ue.useEffect(()=>{p&&s&&t.location.key===s.location.key&&p.resolve()},[p,g,t.location,s]),Ue.useEffect(()=>{!u.isTransitioning&&y&&(l(y.state),n({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),C(void 0))},[u.isTransitioning,y]);let k=Ue.useMemo(()=>({createHref:i.createHref,encodeLocation:i.encodeLocation,go:P=>i.navigate(P),push:(P,D,T)=>i.navigate(P,{state:D,preventScrollReset:T==null?void 0:T.preventScrollReset}),replace:(P,D,T)=>i.navigate(P,{replace:!0,state:D,preventScrollReset:T==null?void 0:T.preventScrollReset})}),[i]),S=i.basename||"/",x=Ue.useMemo(()=>({router:i,navigator:k,static:!1,basename:S}),[i,k,S]);return Ue.createElement(Ue.Fragment,null,Ue.createElement(ju.Provider,{value:x},Ue.createElement(Nf.Provider,{value:t},Ue.createElement(iE.Provider,{value:_.current},Ue.createElement(Gb.Provider,{value:u},Ue.createElement(iN,{basename:S,location:t.location,navigationType:t.historyAction,navigator:k},Ue.createElement(J6,{routes:i.routes,future:i.future,state:t})))))),null)}var J6=Ue.memo(eN);function eN({routes:i,future:e,state:t}){return F6(i,void 0,t,e)}function tN({to:i,replace:e,state:t,relative:r}){Pn(fh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=Ue.useContext(wo);ps(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=Ue.useContext(Ko),{pathname:u}=Qo(),n=Of(),p=Yy(i,qy(l),u,r==="path"),m=JSON.stringify(p);return Ue.useEffect(()=>{n(JSON.parse(m),{replace:e,state:t,relative:r})},[n,m,r,e,t]),null}function iN({basename:i="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:l=!1}){Pn(!fh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=i.replace(/^\/*/,"/"),n=Ue.useMemo(()=>({basename:u,navigator:s,static:l,future:{}}),[u,s,l]);typeof t=="string"&&(t=Il(t));let{pathname:p="/",search:m="",hash:g="",state:v=null,key:y="default"}=t,C=Ue.useMemo(()=>{let _=vo(p,u);return _==null?null:{location:{pathname:_,search:m,hash:g,state:v,key:y},navigationType:r}},[u,p,m,g,v,y,r]);return ps(C!=null,`<Router basename="${u}"> is not able to match the URL "${p}${m}${g}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:Ue.createElement(wo.Provider,{value:n},Ue.createElement(Zy.Provider,{children:e,value:C}))}var Pg="get",Ig="application/x-www-form-urlencoded";function Xy(i){return i!=null&&typeof i.tagName=="string"}function nN(i){return Xy(i)&&i.tagName.toLowerCase()==="button"}function rN(i){return Xy(i)&&i.tagName.toLowerCase()==="form"}function sN(i){return Xy(i)&&i.tagName.toLowerCase()==="input"}function aN(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function oN(i,e){return i.button===0&&(!e||e==="_self")&&!aN(i)}var ig=null;function lN(){if(ig===null)try{new FormData(document.createElement("form"),0),ig=!1}catch{ig=!0}return ig}var cN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function S0(i){return i!=null&&!cN.has(i)?(ps(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ig}"`),null):i}function uN(i,e){let t,r,s,l,u;if(rN(i)){let n=i.getAttribute("action");r=n?vo(n,e):null,t=i.getAttribute("method")||Pg,s=S0(i.getAttribute("enctype"))||Ig,l=new FormData(i)}else if(nN(i)||sN(i)&&(i.type==="submit"||i.type==="image")){let n=i.form;if(n==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||n.getAttribute("action");if(r=p?vo(p,e):null,t=i.getAttribute("formmethod")||n.getAttribute("method")||Pg,s=S0(i.getAttribute("formenctype"))||S0(n.getAttribute("enctype"))||Ig,l=new FormData(n,i),!lN()){let{name:m,type:g,value:v}=i;if(g==="image"){let y=m?`${m}.`:"";l.append(`${y}x`,"0"),l.append(`${y}y`,"0")}else m&&l.append(m,v)}}else{if(Xy(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Pg,r=null,s=Ig,u=i}return l&&s==="text/plain"&&(u=l,l=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:l,body:u}}function Yb(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function dN(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hN(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function pN(i,e,t){let r=await Promise.all(i.map(async s=>{let l=e.routes[s.route.id];if(l){let u=await dN(l,t);return u.links?u.links():[]}return[]}));return yN(r.flat(1).filter(hN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function c2(i,e,t,r,s,l){let u=(p,m)=>t[m]?p.route.id!==t[m].route.id:!0,n=(p,m)=>{var g;return t[m].pathname!==p.pathname||((g=t[m].route.path)==null?void 0:g.endsWith("*"))&&t[m].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,m)=>u(p,m)||n(p,m)):l==="data"?e.filter((p,m)=>{var v;let g=r.routes[p.route.id];if(!g||!g.hasLoader)return!1;if(u(p,m)||n(p,m))return!0;if(p.route.shouldRevalidate){let y=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function fN(i,e){return mN(i.map(t=>{let r=e.routes[t.route.id];if(!r)return[];let s=[r.module];return r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function mN(i){return[...new Set(i)]}function gN(i){let e={},t=Object.keys(i).sort();for(let r of t)e[r]=i[r];return e}function yN(i,e){let t=new Set;return new Set(e),i.reduce((r,s)=>{let l=JSON.stringify(gN(s));return t.has(l)||(t.add(l),r.push({key:l,link:s})),r},[])}function xN(i){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function vN(){let i=Ue.useContext(ju);return Yb(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function bN(){let i=Ue.useContext(Nf);return Yb(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Zb=Ue.createContext(void 0);Zb.displayName="FrameworkContext";function oE(){let i=Ue.useContext(Zb);return Yb(i,"You must render this element inside a <HydratedRouter> element"),i}function _N(i,e){let t=Ue.useContext(Zb),[r,s]=Ue.useState(!1),[l,u]=Ue.useState(!1),{onFocus:n,onBlur:p,onMouseEnter:m,onMouseLeave:g,onTouchStart:v}=e,y=Ue.useRef(null);Ue.useEffect(()=>{if(i==="render"&&u(!0),i==="viewport"){let w=S=>{S.forEach(x=>{u(x.isIntersecting)})},k=new IntersectionObserver(w,{threshold:.5});return y.current&&k.observe(y.current),()=>{k.disconnect()}}},[i]),Ue.useEffect(()=>{if(r){let w=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(w)}}},[r]);let C=()=>{s(!0)},_=()=>{s(!1),u(!1)};return t?i!=="intent"?[l,y,{}]:[l,y,{onFocus:_p(n,C),onBlur:_p(p,_),onMouseEnter:_p(m,C),onMouseLeave:_p(g,_),onTouchStart:_p(v,C)}]:[!1,y,{}]}function _p(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function wN({page:i,...e}){let{router:t}=vN(),r=Ue.useMemo(()=>rc(t.routes,i,t.basename),[t.routes,i,t.basename]);return r?Ue.createElement(TN,{page:i,matches:r,...e}):null}function CN(i){let{manifest:e,routeModules:t}=oE(),[r,s]=Ue.useState([]);return Ue.useEffect(()=>{let l=!1;return pN(i,e,t).then(u=>{l||s(u)}),()=>{l=!0}},[i,e,t]),r}function TN({page:i,matches:e,...t}){let r=Qo(),{manifest:s,routeModules:l}=oE(),{loaderData:u,matches:n}=bN(),p=Ue.useMemo(()=>c2(i,e,n,s,r,"data"),[i,e,n,s,r]),m=Ue.useMemo(()=>c2(i,e,n,s,r,"assets"),[i,e,n,s,r]),g=Ue.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let C=new Set,_=!1;if(e.forEach(k=>{var x;let S=s.routes[k.route.id];!S||!S.hasLoader||(!p.some(P=>P.route.id===k.route.id)&&k.route.id in u&&((x=l[k.route.id])!=null&&x.shouldRevalidate)||S.hasClientLoader?_=!0:C.add(k.route.id))}),C.size===0)return[];let w=xN(i);return _&&C.size>0&&w.searchParams.set("_routes",e.filter(k=>C.has(k.route.id)).map(k=>k.route.id).join(",")),[w.pathname+w.search]},[u,r,s,p,e,i,l]),v=Ue.useMemo(()=>fN(m,s),[m,s]),y=CN(m);return Ue.createElement(Ue.Fragment,null,g.map(C=>Ue.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),v.map(C=>Ue.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),y.map(({key:C,link:_})=>Ue.createElement("link",{key:C,..._})))}function SN(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var lE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lE&&(window.__reactRouterVersion="7.1.3")}catch{}function EN(i,e){return y6({basename:e==null?void 0:e.basename,future:e==null?void 0:e.future,history:$z({window:e==null?void 0:e.window}),hydrationData:kN(),routes:i,mapRouteProperties:X6,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function kN(){let i=window==null?void 0:window.__staticRouterHydrationData;return i&&i.errors&&(i={...i,errors:AN(i.errors)}),i}function AN(i){if(!i)return null;let e=Object.entries(i),t={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")t[r]=new ty(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let u=new l(s.message);u.stack="",t[r]=u}catch{}}if(t[r]==null){let l=new Error(s.message);l.stack="",t[r]=l}}else t[r]=s;return t}var cE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uE=Ue.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:l,replace:u,state:n,target:p,to:m,preventScrollReset:g,viewTransition:v,...y},C){let{basename:_}=Ue.useContext(wo),w=typeof m=="string"&&cE.test(m),k,S=!1;if(typeof m=="string"&&w&&(k=m,lE))try{let Z=new URL(window.location.href),X=m.startsWith("//")?new URL(Z.protocol+m):new URL(m),O=vo(X.pathname,_);X.origin===Z.origin&&O!=null?m=O+X.search+X.hash:S=!0}catch{ps(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=O6(m,{relative:s}),[P,D,T]=_N(r,y),I=DN(m,{replace:u,state:n,target:p,preventScrollReset:g,relative:s,viewTransition:v});function N(Z){e&&e(Z),Z.defaultPrevented||I(Z)}let q=Ue.createElement("a",{...y,...T,href:k||x,onClick:S||l?e:N,ref:SN(C,D),target:p,"data-discover":!w&&t==="render"?"true":void 0});return P&&!w?Ue.createElement(Ue.Fragment,null,q,Ue.createElement(wN,{page:x})):q});uE.displayName="Link";var MN=Ue.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:l,to:u,viewTransition:n,children:p,...m},g){let v=mh(u,{relative:m.relative}),y=Qo(),C=Ue.useContext(Nf),{navigator:_,basename:w}=Ue.useContext(wo),k=C!=null&&ON(v)&&n===!0,S=_.encodeLocation?_.encodeLocation(v).pathname:v.pathname,x=y.pathname,P=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(x=x.toLowerCase(),P=P?P.toLowerCase():null,S=S.toLowerCase()),P&&w&&(P=vo(P,w)||P);const D=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let T=x===S||!s&&x.startsWith(S)&&x.charAt(D)==="/",I=P!=null&&(P===S||!s&&P.startsWith(S)&&P.charAt(S.length)==="/"),N={isActive:T,isPending:I,isTransitioning:k},q=T?e:void 0,Z;typeof r=="function"?Z=r(N):Z=[r,T?"active":null,I?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let X=typeof l=="function"?l(N):l;return Ue.createElement(uE,{...m,"aria-current":q,className:Z,ref:g,style:X,to:u,viewTransition:n},typeof p=="function"?p(N):p)});MN.displayName="NavLink";var PN=Ue.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:l,method:u=Pg,action:n,onSubmit:p,relative:m,preventScrollReset:g,viewTransition:v,...y},C)=>{let _=zN(),w=NN(n,{relative:m}),k=u.toLowerCase()==="get"?"get":"post",S=typeof n=="string"&&cE.test(n),x=P=>{if(p&&p(P),P.defaultPrevented)return;P.preventDefault();let D=P.nativeEvent.submitter,T=(D==null?void 0:D.getAttribute("formmethod"))||u;_(D||P.currentTarget,{fetcherKey:e,method:T,navigate:t,replace:s,state:l,relative:m,preventScrollReset:g,viewTransition:v})};return Ue.createElement("form",{ref:C,method:k,action:w,onSubmit:r?p:x,...y,"data-discover":!S&&i==="render"?"true":void 0})});PN.displayName="Form";function IN(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dE(i){let e=Ue.useContext(ju);return Pn(e,IN(i)),e}function DN(i,{target:e,replace:t,state:r,preventScrollReset:s,relative:l,viewTransition:u}={}){let n=Of(),p=Qo(),m=mh(i,{relative:l});return Ue.useCallback(g=>{if(oN(g,e)){g.preventDefault();let v=t!==void 0?t:xc(p)===xc(m);n(i,{replace:v,state:r,preventScrollReset:s,relative:l,viewTransition:u})}},[p,n,m,t,r,e,i,s,l,u])}var RN=0,LN=()=>`__${String(++RN)}__`;function zN(){let{router:i}=dE("useSubmit"),{basename:e}=Ue.useContext(wo),t=Y6();return Ue.useCallback(async(r,s={})=>{let{action:l,method:u,encType:n,formData:p,body:m}=uN(r,e);if(s.navigate===!1){let g=s.fetcherKey||LN();await i.fetch(g,t,s.action||l,{preventScrollReset:s.preventScrollReset,formData:p,body:m,formMethod:s.method||u,formEncType:s.encType||n,flushSync:s.flushSync})}else await i.navigate(s.action||l,{preventScrollReset:s.preventScrollReset,formData:p,body:m,formMethod:s.method||u,formEncType:s.encType||n,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[i,e,t])}function NN(i,{relative:e}={}){let{basename:t}=Ue.useContext(wo),r=Ue.useContext(Ko);Pn(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),l={...mh(i||".",{relative:e})},u=Qo();if(i==null){l.search=u.search;let n=new URLSearchParams(l.search),p=n.getAll("index");if(p.some(g=>g==="")){n.delete("index"),p.filter(v=>v).forEach(v=>n.append("index",v));let g=n.toString();l.search=g?`?${g}`:""}}return(!i||i===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:jo([t,l.pathname])),xc(l)}function ON(i,e={}){let t=Ue.useContext(Gb);Pn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=dE("useViewTransitionState"),s=mh(i,{relative:e.relative});if(!t.isTransitioning)return!1;let l=vo(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=vo(t.nextLocation.pathname,r)||t.nextLocation.pathname;return ey(s.pathname,u)!=null||ey(s.pathname,l)!=null}new TextEncoder;/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jN(i){return Ue.createElement(Q6,{flushSync:cM.flushSync,...i})}const ng=()=>{const i=sE();return zf(i)?he.jsxs("div",{id:"error-page",children:[he.jsx("h1",{children:it.t("Oops!")}),he.jsx("p",{children:it.t("Sorry, an unexpected error has occurred.")}),he.jsx("p",{children:he.jsx("i",{children:i.statusText})})]}):he.jsxs("div",{id:"error-page",children:[he.jsx("h1",{children:it.t("Oops!")}),he.jsx("p",{children:it.t("Sorry, an unexpected error has occurred.")})]})},FN="_innerNavBar_bw29d_1",BN="_leftNavBarLinks_bw29d_12",$N="_outerNavBar_bw29d_17",E0={innerNavBar:FN,leftNavBarLinks:BN,outerNavBar:$N},UN=({path:i,label:e})=>{const{pathname:t}=mh({});return he.jsx(Tu,{label:e,href:`#${i}`,active:t===i||i!=="/"&&t.startsWith(i)})},Xb="1400px",VN=[{label:"Evaluate",path:"/evaluate"},{label:"Predict",path:"/predict"}],GN=()=>{const i=Of(),{pathname:e}=Qo(),t=()=>{i("/settings")};return he.jsx("div",{children:he.jsx("div",{className:E0.outerNavBar,children:he.jsxs("div",{className:E0.innerNavBar,style:{maxWidth:Xb},children:[he.jsx("div",{className:E0.leftNavBarLinks,children:VN.map(({path:r,label:s},l)=>he.jsx(UN,{path:r,label:s},l))}),e!=="/settings"&&he.jsx(Gn,{icon:he.jsx(uM,{}),onClick:t,children:it.t("Settings")})]})})})},HN="_warningMargin_z0zs1_1",WN="_warningMarginInner_z0zs1_6",u2={warningMargin:HN,warningMarginInner:WN};var hE={exports:{}};(function(i){(function(e,t){i.exports?(t.default=t,i.exports=e&&e.document?t(e):t):(e.Highcharts&&e.Highcharts.error(16,!0),e.Highcharts=t(e))})(typeof window<"u"?window:Fa,function(e){var t={};function r(s,l,u,n){!s.hasOwnProperty(l)&&(s[l]=n.apply(null,u),e&&typeof CustomEvent=="function"&&e.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:l,module:s[l]}})))}return r(t,"Core/Globals.js",[],function(){var s,l;return(l=s||(s={})).SVG_NS="http://www.w3.org/2000/svg",l.product="Highcharts",l.version="11.4.8",l.win=e!==void 0?e:{},l.doc=l.win.document,l.svg=l.doc&&l.doc.createElementNS&&!!l.doc.createElementNS(l.SVG_NS,"svg").createSVGRect,l.userAgent=l.win.navigator&&l.win.navigator.userAgent||"",l.isChrome=l.win.chrome,l.isFirefox=l.userAgent.indexOf("Firefox")!==-1,l.isMS=/(edge|msie|trident)/i.test(l.userAgent)&&!l.win.opera,l.isSafari=!l.isChrome&&l.userAgent.indexOf("Safari")!==-1,l.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(l.userAgent),l.isWebKit=l.userAgent.indexOf("AppleWebKit")!==-1,l.deg2rad=2*Math.PI/360,l.hasBidiBug=l.isFirefox&&4>parseInt(l.userAgent.split("Firefox/")[1],10),l.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],l.noop=function(){},l.supportsPassiveEvents=function(){let u=!1;if(!l.isMS){let n=Object.defineProperty({},"passive",{get:function(){u=!0}});l.win.addEventListener&&l.win.removeEventListener&&(l.win.addEventListener("testPassive",l.noop,n),l.win.removeEventListener("testPassive",l.noop,n))}return u}(),l.charts=[],l.composed=[],l.dateFormats={},l.seriesTypes={},l.symbolSizes={},l.chartCount=0,s}),r(t,"Core/Utilities.js",[t["Core/Globals.js"]],function(s){let l,{charts:u,doc:n,win:p}=s;function m(L,R,G,U){let B=R?"Highcharts error":"Highcharts warning";L===32&&(L=`${B}: Deprecated member`);let H=k(L),W=H?`${B} #${L}: www.highcharts.com/errors/${L}/`:L.toString();if(U!==void 0){let re="";H&&(W+="?"),X(U,function(de,ie){re+=`
 - ${ie}: ${de}`,H&&(W+=encodeURI(ie)+"="+encodeURI(de))}),W+=re}V(s,"displayError",{chart:G,code:L,message:W,params:U},function(){if(R)throw Error(W);p.console&&m.messages.indexOf(W)===-1&&console.warn(W)}),m.messages.push(W)}function g(L,R){return parseInt(L,R||10)}function v(L){return typeof L=="string"}function y(L){let R=Object.prototype.toString.call(L);return R==="[object Array]"||R==="[object Array Iterator]"}function C(L,R){return!!L&&typeof L=="object"&&(!R||!y(L))}function _(L){return C(L)&&typeof L.nodeType=="number"}function w(L){let R=L&&L.constructor;return!!(C(L,!0)&&!_(L)&&R&&R.name&&R.name!=="Object")}function k(L){return typeof L=="number"&&!isNaN(L)&&L<1/0&&L>-1/0}function S(L){return L!=null}function x(L,R,G){let U,B=v(R)&&!S(G),H=(W,re)=>{S(W)?L.setAttribute(re,W):B?(U=L.getAttribute(re))||re!=="class"||(U=L.getAttribute(re+"Name")):L.removeAttribute(re)};return v(R)?H(G,R):X(R,H),U}function P(L){return y(L)?L:[L]}function D(L,R){let G;for(G in L||(L={}),R)L[G]=R[G];return L}function T(){let L=arguments,R=L.length;for(let G=0;G<R;G++){let U=L[G];if(U!=null)return U}}function I(L,R){D(L.style,R)}function N(L){return Math.pow(10,Math.floor(Math.log(L)/Math.LN10))}function q(L,R){return L>1e14?L:parseFloat(L.toPrecision(R||14))}m.messages=[],Math.easeInOutSine=function(L){return-.5*(Math.cos(Math.PI*L)-1)};let Z=Array.prototype.find?function(L,R){return L.find(R)}:function(L,R){let G,U=L.length;for(G=0;G<U;G++)if(R(L[G],G))return L[G]};function X(L,R,G){for(let U in L)Object.hasOwnProperty.call(L,U)&&R.call(G||L[U],L[U],U,L)}function O(L,R,G){function U(W,re){let de=L.removeEventListener;de&&de.call(L,W,re,!1)}function B(W){let re,de;L.nodeName&&(R?(re={})[R]=!0:re=W,X(re,function(ie,oe){if(W[oe])for(de=W[oe].length;de--;)U(oe,W[oe][de].fn)}))}let H=typeof L=="function"&&L.prototype||L;if(Object.hasOwnProperty.call(H,"hcEvents")){let W=H.hcEvents;if(R){let re=W[R]||[];G?(W[R]=re.filter(function(de){return G!==de.fn}),U(R,G)):(B(W),W[R]=[])}else B(W),delete H.hcEvents}}function V(L,R,G,U){if(G=G||{},n.createEvent&&(L.dispatchEvent||L.fireEvent&&L!==s)){let B=n.createEvent("Events");B.initEvent(R,!0,!0),G=D(B,G),L.dispatchEvent?L.dispatchEvent(G):L.fireEvent(R,G)}else if(L.hcEvents){G.target||D(G,{preventDefault:function(){G.defaultPrevented=!0},target:L,type:R});let B=[],H=L,W=!1;for(;H.hcEvents;)Object.hasOwnProperty.call(H,"hcEvents")&&H.hcEvents[R]&&(B.length&&(W=!0),B.unshift.apply(B,H.hcEvents[R])),H=Object.getPrototypeOf(H);W&&B.sort((re,de)=>re.order-de.order),B.forEach(re=>{re.fn.call(L,G)===!1&&G.preventDefault()})}U&&!G.defaultPrevented&&U.call(L,G)}X({map:"map",each:"forEach",grep:"filter",reduce:"reduce",some:"some"},function(L,R){s[R]=function(G){return m(32,!1,void 0,{[`Highcharts.${R}`]:`use Array.${L}`}),Array.prototype[L].apply(G,[].slice.call(arguments,1))}});let $=function(){let L=Math.random().toString(36).substring(2,9)+"-",R=0;return function(){return"highcharts-"+(l?"":L)+R++}}();return p.jQuery&&(p.jQuery.fn.highcharts=function(){let L=[].slice.call(arguments);if(this[0])return L[0]?(new s[v(L[0])?L.shift():"Chart"](this[0],L[0],L[1]),this):u[x(this[0],"data-highcharts-chart")]}),{addEvent:function(L,R,G,U={}){let B=typeof L=="function"&&L.prototype||L;Object.hasOwnProperty.call(B,"hcEvents")||(B.hcEvents={});let H=B.hcEvents;s.Point&&L instanceof s.Point&&L.series&&L.series.chart&&(L.series.chart.runTrackerClick=!0);let W=L.addEventListener;W&&W.call(L,R,G,!!s.supportsPassiveEvents&&{passive:U.passive===void 0?R.indexOf("touch")!==-1:U.passive,capture:!1}),H[R]||(H[R]=[]);let re={fn:G,order:typeof U.order=="number"?U.order:1/0};return H[R].push(re),H[R].sort((de,ie)=>de.order-ie.order),function(){O(L,R,G)}},arrayMax:function(L){let R=L.length,G=L[0];for(;R--;)L[R]>G&&(G=L[R]);return G},arrayMin:function(L){let R=L.length,G=L[0];for(;R--;)L[R]<G&&(G=L[R]);return G},attr:x,clamp:function(L,R,G){return L>R?L<G?L:G:R},clearTimeout:function(L){S(L)&&clearTimeout(L)},correctFloat:q,createElement:function(L,R,G,U,B){let H=n.createElement(L);return R&&D(H,R),B&&I(H,{padding:"0",border:"none",margin:"0"}),G&&I(H,G),U&&U.appendChild(H),H},crisp:(L,R=0,G)=>{let U=R%2/2,B=G?-1:1;return(Math.round(L*B-U)+U)*B},css:I,defined:S,destroyObjectProperties:function(L,R,G){X(L,function(U,B){U!==R&&(U!=null&&U.destroy)&&U.destroy(),(U!=null&&U.destroy||!G)&&delete L[B]})},diffObjects:function(L,R,G,U){let B={};return function H(W,re,de,ie){let oe=G?re:W;X(W,function(Ee,xe){if(!ie&&U&&U.indexOf(xe)>-1&&re[xe]){Ee=P(Ee),de[xe]=[];for(let Se=0;Se<Math.max(Ee.length,re[xe].length);Se++)re[xe][Se]&&(Ee[Se]===void 0?de[xe][Se]=re[xe][Se]:(de[xe][Se]={},H(Ee[Se],re[xe][Se],de[xe][Se],ie+1)))}else C(Ee,!0)&&!Ee.nodeType?(de[xe]=y(Ee)?[]:{},H(Ee,re[xe]||{},de[xe],ie+1),Object.keys(de[xe]).length!==0||xe==="colorAxis"&&ie===0||delete de[xe]):(W[xe]!==re[xe]||xe in W&&!(xe in re))&&xe!=="__proto__"&&xe!=="constructor"&&(de[xe]=oe[xe])})}(L,R,B,0),B},discardElement:function(L){L&&L.parentElement&&L.parentElement.removeChild(L)},erase:function(L,R){let G=L.length;for(;G--;)if(L[G]===R){L.splice(G,1);break}},error:m,extend:D,extendClass:function(L,R){let G=function(){};return G.prototype=new L,D(G.prototype,R),G},find:Z,fireEvent:V,getClosestDistance:function(L,R){let G,U,B,H=!R;return L.forEach(W=>{if(W.length>1)for(B=W.length-1;B>0;B--)(U=W[B]-W[B-1])<0&&!H?(R==null||R(),R=void 0):U&&(G===void 0||U<G)&&(G=U)}),G},getMagnitude:N,getNestedProperty:function(L,R){let G=L.split(".");for(;G.length&&S(R);){let U=G.shift();if(U===void 0||U==="__proto__")return;if(U==="this"){let H;return C(R)&&(H=R["@this"]),H??R}let B=R[U];if(!S(B)||typeof B=="function"||typeof B.nodeType=="number"||B===p)return;R=B}return R},getStyle:function L(R,G,U){let B;if(G==="width"){let W=Math.min(R.offsetWidth,R.scrollWidth),re=R.getBoundingClientRect&&R.getBoundingClientRect().width;return re<W&&re>=W-1&&(W=Math.floor(re)),Math.max(0,W-(L(R,"padding-left",!0)||0)-(L(R,"padding-right",!0)||0))}if(G==="height")return Math.max(0,Math.min(R.offsetHeight,R.scrollHeight)-(L(R,"padding-top",!0)||0)-(L(R,"padding-bottom",!0)||0));let H=p.getComputedStyle(R,void 0);return H&&(B=H.getPropertyValue(G),T(U,G!=="opacity")&&(B=g(B))),B},inArray:function(L,R,G){return m(32,!1,void 0,{"Highcharts.inArray":"use Array.indexOf"}),R.indexOf(L,G)},insertItem:function(L,R){let G,U=L.options.index,B=R.length;for(G=L.options.isInternal?B:0;G<B+1;G++)if(!R[G]||k(U)&&U<T(R[G].options.index,R[G]._i)||R[G].options.isInternal){R.splice(G,0,L);break}return G},isArray:y,isClass:w,isDOMElement:_,isFunction:function(L){return typeof L=="function"},isNumber:k,isObject:C,isString:v,keys:function(L){return m(32,!1,void 0,{"Highcharts.keys":"use Object.keys"}),Object.keys(L)},merge:function(){let L,R=arguments,G={},U=function(H,W){return typeof H!="object"&&(H={}),X(W,function(re,de){de!=="__proto__"&&de!=="constructor"&&(!C(re,!0)||w(re)||_(re)?H[de]=W[de]:H[de]=U(H[de]||{},re))}),H};R[0]===!0&&(G=R[1],R=Array.prototype.slice.call(R,2));let B=R.length;for(L=0;L<B;L++)G=U(G,R[L]);return G},normalizeTickInterval:function(L,R,G,U,B){let H,W=L;G=T(G,N(L));let re=L/G;for(!R&&(R=B?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],U===!1&&(G===1?R=R.filter(function(de){return de%1==0}):G<=.1&&(R=[1/G]))),H=0;H<R.length&&(W=R[H],(!B||!(W*G>=L))&&(B||!(re<=(R[H]+(R[H+1]||R[H]))/2)));H++);return q(W*G,-Math.round(Math.log(.001)/Math.LN10))},objectEach:X,offset:function(L){let R=n.documentElement,G=L.parentElement||L.parentNode?L.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:G.top+(p.pageYOffset||R.scrollTop)-(R.clientTop||0),left:G.left+(p.pageXOffset||R.scrollLeft)-(R.clientLeft||0),width:G.width,height:G.height}},pad:function(L,R,G){return Array((R||2)+1-String(L).replace("-","").length).join(G||"0")+L},pick:T,pInt:g,pushUnique:function(L,R){return 0>L.indexOf(R)&&!!L.push(R)},relativeLength:function(L,R,G){return/%$/.test(L)?R*parseFloat(L)/100+(G||0):parseFloat(L)},removeEvent:O,replaceNested:function(L,...R){let G,U;do for(U of(G=L,R))L=L.replace(U[0],U[1]);while(L!==G);return L},splat:P,stableSort:function(L,R){let G,U,B=L.length;for(U=0;U<B;U++)L[U].safeI=U;for(L.sort(function(H,W){return(G=R(H,W))===0?H.safeI-W.safeI:G}),U=0;U<B;U++)delete L[U].safeI},syncTimeout:function(L,R,G){return R>0?setTimeout(L,R,G):(L.call(0,G),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},uniqueKey:$,useSerialIds:function(L){return l=T(L,l)},wrap:function(L,R,G){let U=L[R];L[R]=function(){let B=arguments,H=this;return G.apply(this,[function(){return U.apply(H,arguments.length?arguments:B)}].concat([].slice.call(arguments)))}}}}),r(t,"Core/Chart/ChartDefaults.js",[],function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}}),r(t,"Core/Color/Palettes.js",[],function(){return{colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"]}}),r(t,"Core/Time.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{win:u}=s,{defined:n,error:p,extend:m,isNumber:g,isObject:v,merge:y,objectEach:C,pad:_,pick:w,splat:k,timeUnits:S}=l,x=s.isSafari&&u.Intl&&u.Intl.DateTimeFormat.prototype.formatRange,P=s.isSafari&&u.Intl&&!u.Intl.DateTimeFormat.prototype.formatRange;class D{constructor(I){this.options={},this.useUTC=!1,this.variableTimezone=!1,this.Date=u.Date,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.update(I)}get(I,N){if(this.variableTimezone||this.timezoneOffset){let q=N.getTime(),Z=q-this.getTimezoneOffset(N);N.setTime(Z);let X=N["getUTC"+I]();return N.setTime(q),X}return this.useUTC?N["getUTC"+I]():N["get"+I]()}set(I,N,q){if(this.variableTimezone||this.timezoneOffset){if(I==="Milliseconds"||I==="Seconds"||I==="Minutes"&&this.getTimezoneOffset(N)%36e5==0)return N["setUTC"+I](q);let Z=this.getTimezoneOffset(N),X=N.getTime()-Z;N.setTime(X),N["setUTC"+I](q);let O=this.getTimezoneOffset(N);return X=N.getTime()+O,N.setTime(X)}return this.useUTC||x&&I==="FullYear"?N["setUTC"+I](q):N["set"+I](q)}update(I={}){let N=w(I.useUTC,!0);this.options=I=y(!0,this.options,I),this.Date=I.Date||u.Date||Date,this.useUTC=N,this.timezoneOffset=N&&I.timezoneOffset||void 0,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.variableTimezone=N&&!!(I.getTimezoneOffset||I.timezone)}makeTime(I,N,q,Z,X,O){let V,$,L;return this.useUTC?(V=this.Date.UTC.apply(0,arguments),$=this.getTimezoneOffset(V),V+=$,$!==(L=this.getTimezoneOffset(V))?V+=L-$:$-36e5!==this.getTimezoneOffset(V-36e5)||P||(V-=36e5)):V=new this.Date(I,N,w(q,1),w(Z,0),w(X,0),w(O,0)).getTime(),V}timezoneOffsetFunction(){let I=this,N=this.options,q=N.getTimezoneOffset;return this.useUTC?N.timezone?Z=>{try{let X=`shortOffset,${N.timezone||""}`,[O,V,$,L,R=0]=(D.formatCache[X]=D.formatCache[X]||Intl.DateTimeFormat("en",{timeZone:N.timezone,timeZoneName:"shortOffset"})).format(Z).split(/(GMT|:)/).map(Number),G=-(36e5*($+R/60));if(g(G))return G}catch{p(34)}return 0}:this.useUTC&&q?Z=>6e4*q(Z.valueOf()):()=>6e4*(I.timezoneOffset||0):Z=>6e4*new Date(Z.toString()).getTimezoneOffset()}dateFormat(I,N,q){if(!n(N)||isNaN(N))return s.defaultOptions.lang&&s.defaultOptions.lang.invalidDate||"";I=w(I,"%Y-%m-%d %H:%M:%S");let Z=this,X=new this.Date(N),O=this.get("Hours",X),V=this.get("Day",X),$=this.get("Date",X),L=this.get("Month",X),R=this.get("FullYear",X),G=s.defaultOptions.lang,U=G&&G.weekdays,B=G&&G.shortWeekdays;return C(m({a:B?B[V]:U[V].substr(0,3),A:U[V],d:_($),e:_($,2," "),w:V,b:G.shortMonths[L],B:G.months[L],m:_(L+1),o:L+1,y:R.toString().substr(2,2),Y:R,H:_(O),k:O,I:_(O%12||12),l:O%12||12,M:_(this.get("Minutes",X)),p:O<12?"AM":"PM",P:O<12?"am":"pm",S:_(this.get("Seconds",X)),L:_(Math.floor(N%1e3),3)},s.dateFormats),function(H,W){for(;I.indexOf("%"+W)!==-1;)I=I.replace("%"+W,typeof H=="function"?H.call(Z,N):H)}),q?I.substr(0,1).toUpperCase()+I.substr(1):I}resolveDTLFormat(I){return v(I,!0)?I:{main:(I=k(I))[0],from:I[1],to:I[2]}}getTimeTicks(I,N,q,Z){let X,O,V,$,L=this,R=L.Date,G=[],U={},B=new R(N),H=I.unitRange,W=I.count||1;if(Z=w(Z,1),n(N)){L.set("Milliseconds",B,H>=S.second?0:W*Math.floor(L.get("Milliseconds",B)/W)),H>=S.second&&L.set("Seconds",B,H>=S.minute?0:W*Math.floor(L.get("Seconds",B)/W)),H>=S.minute&&L.set("Minutes",B,H>=S.hour?0:W*Math.floor(L.get("Minutes",B)/W)),H>=S.hour&&L.set("Hours",B,H>=S.day?0:W*Math.floor(L.get("Hours",B)/W)),H>=S.day&&L.set("Date",B,H>=S.month?1:Math.max(1,W*Math.floor(L.get("Date",B)/W))),H>=S.month&&(L.set("Month",B,H>=S.year?0:W*Math.floor(L.get("Month",B)/W)),O=L.get("FullYear",B)),H>=S.year&&(O-=O%W,L.set("FullYear",B,O)),H===S.week&&($=L.get("Day",B),L.set("Date",B,L.get("Date",B)-$+Z+($<Z?-7:0))),O=L.get("FullYear",B);let re=L.get("Month",B),de=L.get("Date",B),ie=L.get("Hours",B);N=B.getTime(),(L.variableTimezone||!L.useUTC)&&n(q)&&(V=q-N>4*S.month||L.getTimezoneOffset(N)!==L.getTimezoneOffset(q));let oe=B.getTime();for(X=1;oe<q;)G.push(oe),H===S.year?oe=L.makeTime(O+X*W,0):H===S.month?oe=L.makeTime(O,re+X*W):V&&(H===S.day||H===S.week)?oe=L.makeTime(O,re,de+X*W*(H===S.day?1:7)):V&&H===S.hour&&W>1?oe=L.makeTime(O,re,de,ie+X*W):oe+=H*W,X++;G.push(oe),H<=S.hour&&G.length<1e4&&G.forEach(function(Ee){Ee%18e5==0&&L.dateFormat("%H%M%S%L",Ee)==="000000000"&&(U[Ee]="day")})}return G.info=m(I,{higherRanks:U,totalRange:H*W}),G}getDateFormat(I,N,q,Z){let X=this.dateFormat("%m-%d %H:%M:%S.%L",N),O="01-01 00:00:00.000",V={millisecond:15,second:12,minute:9,hour:6,day:3},$="millisecond",L=$;for($ in S){if(I===S.week&&+this.dateFormat("%w",N)===q&&X.substr(6)===O.substr(6)){$="week";break}if(S[$]>I){$=L;break}if(V[$]&&X.substr(V[$])!==O.substr(V[$]))break;$!=="week"&&(L=$)}return this.resolveDTLFormat(Z[$]).main}}return D.formatCache={},D}),r(t,"Core/Defaults.js",[t["Core/Chart/ChartDefaults.js"],t["Core/Globals.js"],t["Core/Color/Palettes.js"],t["Core/Time.js"],t["Core/Utilities.js"]],function(s,l,u,n,p){let{isTouchDevice:m}=l,{fireEvent:g,merge:v}=p,y={colors:u.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{buttonTheme:{fill:"#f7f7f7",padding:8,r:2,stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontSize:"0.8em",fontWeight:"normal"},states:{hover:{fill:"#e6e6e6"},select:{fill:"#e6e9ff",style:{color:"#000000",fontWeight:"bold"}},disabled:{style:{color:"#cccccc"}}}}},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:s,title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:"",align:"center",widthAdjust:-44},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",events:{},layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:{duration:300,easing:_=>Math.sqrt(1-Math.pow(_-1,2))},borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %e %b, %H:%M:%S.%L",second:"%A, %e %b, %H:%M:%S",minute:"%A, %e %b, %H:%M",hour:"%A, %e %b, %H:%M",day:"%A, %e %b %Y",week:"Week from %A, %e %b %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:m?25:10,headerFormat:'<span style="font-size: 0.8em">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}};y.chart.styledMode=!1;let C=new n(y.time);return{defaultOptions:y,defaultTime:C,getOptions:function(){return y},setOptions:function(_){return g(l,"setOptions",{options:_}),v(!0,y,_),(_.time||_.global)&&(l.time?l.time.update(v(y.global,y.time,_.global,_.time)):l.time=C),y}}}),r(t,"Core/Color/Color.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{isNumber:u,merge:n,pInt:p}=l;class m{static parse(v){return v?new m(v):m.None}constructor(v){let y,C,_,w;this.rgba=[NaN,NaN,NaN,NaN],this.input=v;let k=s.Color;if(k&&k!==m)return new k(v);if(typeof v=="object"&&v.stops!==void 0)this.stops=v.stops.map(S=>new m(S[1]));else if(typeof v=="string"){if(this.input=v=m.names[v.toLowerCase()]||v,v.charAt(0)==="#"){let S=v.length,x=parseInt(v.substr(1),16);S===7?C=[(16711680&x)>>16,(65280&x)>>8,255&x,1]:S===4&&(C=[(3840&x)>>4|(3840&x)>>8,(240&x)>>4|240&x,(15&x)<<4|15&x,1])}if(!C)for(_=m.parsers.length;_--&&!C;)(y=(w=m.parsers[_]).regex.exec(v))&&(C=w.parse(y))}C&&(this.rgba=C)}get(v){let y=this.input,C=this.rgba;if(typeof y=="object"&&this.stops!==void 0){let _=n(y);return _.stops=[].slice.call(_.stops),this.stops.forEach((w,k)=>{_.stops[k]=[_.stops[k][0],w.get(v)]}),_}return C&&u(C[0])?v!=="rgb"&&(v||C[3]!==1)?v==="a"?`${C[3]}`:"rgba("+C.join(",")+")":"rgb("+C[0]+","+C[1]+","+C[2]+")":y}brighten(v){let y=this.rgba;if(this.stops)this.stops.forEach(function(C){C.brighten(v)});else if(u(v)&&v!==0)for(let C=0;C<3;C++)y[C]+=p(255*v),y[C]<0&&(y[C]=0),y[C]>255&&(y[C]=255);return this}setOpacity(v){return this.rgba[3]=v,this}tweenTo(v,y){let C=this.rgba,_=v.rgba;if(!u(C[0])||!u(_[0]))return v.input||"none";let w=_[3]!==1||C[3]!==1;return(w?"rgba(":"rgb(")+Math.round(_[0]+(C[0]-_[0])*(1-y))+","+Math.round(_[1]+(C[1]-_[1])*(1-y))+","+Math.round(_[2]+(C[2]-_[2])*(1-y))+(w?","+(_[3]+(C[3]-_[3])*(1-y)):"")+")"}}return m.names={white:"#ffffff",black:"#000000"},m.parsers=[{regex:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?(?:\.\d+)?)\s*\)/,parse:function(g){return[p(g[1]),p(g[2]),p(g[3]),parseFloat(g[4],10)]}},{regex:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/,parse:function(g){return[p(g[1]),p(g[2]),p(g[3]),1]}}],m.None=new m(""),m}),r(t,"Core/Animation/Fx.js",[t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){let{parse:n}=s,{win:p}=l,{isNumber:m,objectEach:g}=u;class v{constructor(C,_,w){this.pos=NaN,this.options=_,this.elem=C,this.prop=w}dSetter(){let C=this.paths,_=C&&C[0],w=C&&C[1],k=this.now||0,S=[];if(k!==1&&_&&w)if(_.length===w.length&&k<1)for(let x=0;x<w.length;x++){let P=_[x],D=w[x],T=[];for(let I=0;I<D.length;I++){let N=P[I],q=D[I];m(N)&&m(q)&&!(D[0]==="A"&&(I===4||I===5))?T[I]=N+k*(q-N):T[I]=q}S.push(T)}else S=w;else S=this.toD||[];this.elem.attr("d",S,void 0,!0)}update(){let C=this.elem,_=this.prop,w=this.now,k=this.options.step;this[_+"Setter"]?this[_+"Setter"]():C.attr?C.element&&C.attr(_,w,null,!0):C.style[_]=w+this.unit,k&&k.call(C,w,this)}run(C,_,w){let k=this,S=k.options,x=function(T){return!x.stopped&&k.step(T)},P=p.requestAnimationFrame||function(T){setTimeout(T,13)},D=function(){for(let T=0;T<v.timers.length;T++)v.timers[T]()||v.timers.splice(T--,1);v.timers.length&&P(D)};C!==_||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=C,this.end=_,this.unit=w,this.now=this.start,this.pos=0,x.elem=this.elem,x.prop=this.prop,x()&&v.timers.push(x)===1&&P(D)):(delete S.curAnim[this.prop],S.complete&&Object.keys(S.curAnim).length===0&&S.complete.call(this.elem))}step(C){let _,w,k=+new Date,S=this.options,x=this.elem,P=S.complete,D=S.duration,T=S.curAnim;return x.attr&&!x.element?_=!1:C||k>=D+this.startTime?(this.now=this.end,this.pos=1,this.update(),T[this.prop]=!0,w=!0,g(T,function(I){I!==!0&&(w=!1)}),w&&P&&P.call(x),_=!1):(this.pos=S.easing((k-this.startTime)/D),this.now=this.start+(this.end-this.start)*this.pos,this.update(),_=!0),_}initPath(C,_,w){let k=C.startX,S=C.endX,x=w.slice(),P=C.isArea,D=P?2:1,T=_&&w.length>_.length&&w.hasStackedCliffs,I,N,q,Z,X=_&&_.slice();if(!X||T)return[x,x];function O($,L){for(;$.length<N;){let R=$[0],G=L[N-$.length];if(G&&R[0]==="M"&&(G[0]==="C"?$[0]=["C",R[1],R[2],R[1],R[2],R[1],R[2]]:$[0]=["L",R[1],R[2]]),$.unshift(R),P){let U=$.pop();$.push($[$.length-1],U)}}}function V($){for(;$.length<N;){let L=$[Math.floor($.length/D)-1].slice();if(L[0]==="C"&&(L[1]=L[5],L[2]=L[6]),P){let R=$[Math.floor($.length/D)].slice();$.splice($.length/2,0,L,R)}else $.push(L)}}if(k&&S&&S.length){for(q=0;q<k.length;q++){if(k[q]===S[0]){I=q;break}if(k[0]===S[S.length-k.length+q]){I=q,Z=!0;break}if(k[k.length-1]===S[S.length-k.length+q]){I=k.length-q;break}}I===void 0&&(X=[])}return X.length&&m(I)&&(N=x.length+I*D,Z?(O(X,x),V(x)):(O(x,X),V(X))),[X,x]}fillSetter(){v.prototype.strokeSetter.apply(this,arguments)}strokeSetter(){this.elem.attr(this.prop,n(this.start).tweenTo(n(this.end),this.pos),void 0,!0)}}return v.timers=[],v}),r(t,"Core/Animation/AnimationUtilities.js",[t["Core/Animation/Fx.js"],t["Core/Utilities.js"]],function(s,l){let{defined:u,getStyle:n,isArray:p,isNumber:m,isObject:g,merge:v,objectEach:y,pick:C}=l;function _(k){return g(k)?v({duration:500,defer:0},k):{duration:k?500:0,defer:0}}function w(k,S){let x=s.timers.length;for(;x--;)s.timers[x].elem!==k||S&&S!==s.timers[x].prop||(s.timers[x].stopped=!0)}return{animate:function(k,S,x){let P,D="",T,I,N;g(x)||(N=arguments,x={duration:N[2],easing:N[3],complete:N[4]}),m(x.duration)||(x.duration=400),x.easing=typeof x.easing=="function"?x.easing:Math[x.easing]||Math.easeInOutSine,x.curAnim=v(S),y(S,function(q,Z){w(k,Z),I=new s(k,x,Z),T=void 0,Z==="d"&&p(S.d)?(I.paths=I.initPath(k,k.pathArray,S.d),I.toD=S.d,P=0,T=1):k.attr?P=k.attr(Z):(P=parseFloat(n(k,Z))||0,Z!=="opacity"&&(D="px")),T||(T=q),typeof T=="string"&&T.match("px")&&(T=T.replace(/px/g,"")),I.run(P,T,D)})},animObject:_,getDeferredAnimation:function(k,S,x){let P=_(S),D=x?[x]:k.series,T=0,I=0;return D.forEach(N=>{let q=_(N.options.animation);T=g(S)&&u(S.defer)?P.defer:Math.max(T,q.duration+q.defer),I=Math.min(P.duration,q.duration)}),k.renderer.forExport&&(T=0),{defer:Math.max(0,T-I),duration:Math.min(T,I)}},setAnimation:function(k,S){S.renderer.globalAnimation=C(k,S.options.chart.animation,!0)},stop:w}}),r(t,"Core/Renderer/HTML/AST.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{SVG_NS:u,win:n}=s,{attr:p,createElement:m,css:g,error:v,isFunction:y,isString:C,objectEach:_,splat:w}=l,{trustedTypes:k}=n,S=k&&y(k.createPolicy)&&k.createPolicy("highcharts",{createHTML:T=>T}),x=S?S.createHTML(""):"",P=function(){try{return!!new DOMParser().parseFromString(x,"text/html")}catch{return!1}}();class D{static filterUserAttributes(I){return _(I,(N,q)=>{let Z=!0;D.allowedAttributes.indexOf(q)===-1&&(Z=!1),["background","dynsrc","href","lowsrc","src"].indexOf(q)!==-1&&(Z=C(N)&&D.allowedReferences.some(X=>N.indexOf(X)===0)),Z||(v(33,!1,void 0,{"Invalid attribute in config":`${q}`}),delete I[q]),C(N)&&I[q]&&(I[q]=N.replace(/</g,"&lt;"))}),I}static parseStyle(I){return I.split(";").reduce((N,q)=>{let Z=q.split(":").map(O=>O.trim()),X=Z.shift();return X&&Z.length&&(N[X.replace(/-([a-z])/g,O=>O[1].toUpperCase())]=Z.join(":")),N},{})}static setElementHTML(I,N){I.innerHTML=D.emptyHTML,N&&new D(N).addToDOM(I)}constructor(I){this.nodes=typeof I=="string"?this.parseMarkup(I):I}addToDOM(I){return function N(q,Z){let X;return w(q).forEach(function(O){let V,$=O.tagName,L=O.textContent?s.doc.createTextNode(O.textContent):void 0,R=D.bypassHTMLFiltering;if($)if($==="#text")V=L;else if(D.allowedTags.indexOf($)!==-1||R){let G=$==="svg"?u:Z.namespaceURI||u,U=s.doc.createElementNS(G,$),B=O.attributes||{};_(O,function(H,W){W!=="tagName"&&W!=="attributes"&&W!=="children"&&W!=="style"&&W!=="textContent"&&(B[W]=H)}),p(U,R?B:D.filterUserAttributes(B)),O.style&&g(U,O.style),L&&U.appendChild(L),N(O.children||[],U),V=U}else v(33,!1,void 0,{"Invalid tagName in config":$});V&&Z.appendChild(V),X=V}),X}(this.nodes,I)}parseMarkup(I){let N,q=[];if(I=I.trim().replace(/ style=(["'])/g," data-style=$1"),P)N=new DOMParser().parseFromString(S?S.createHTML(I):I,"text/html");else{let X=m("div");X.innerHTML=I,N={body:X}}let Z=(X,O)=>{let V=X.nodeName.toLowerCase(),$={tagName:V};V==="#text"&&($.textContent=X.textContent||"");let L=X.attributes;if(L){let R={};[].forEach.call(L,G=>{G.name==="data-style"?$.style=D.parseStyle(G.value):R[G.name]=G.value}),$.attributes=R}if(X.childNodes.length){let R=[];[].forEach.call(X.childNodes,G=>{Z(G,R)}),R.length&&($.children=R)}O.push($)};return[].forEach.call(N.body.childNodes,X=>Z(X,q)),q}}return D.allowedAttributes=["alt","aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","dx","dy","disabled","fill","filterUnits","flood-color","flood-opacity","height","href","id","in","in2","markerHeight","markerWidth","offset","opacity","operator","orient","padding","paddingLeft","paddingRight","patternUnits","r","radius","refX","refY","role","scope","slope","src","startOffset","stdDeviation","stroke","stroke-linecap","stroke-width","style","tableValues","result","rowspan","summary","target","tabindex","text-align","text-anchor","textAnchor","textLength","title","type","valign","width","x","x1","x2","xlink:href","y","y1","y2","zIndex"],D.allowedReferences=["https://","http://","mailto:","/","../","./","#"],D.allowedTags=["a","abbr","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feComposite","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMorphology","feOffset","feMerge","feMergeNode","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","text","textPath","thead","title","tbody","tspan","td","th","tr","u","ul","#text"],D.emptyHTML=x,D.bypassHTMLFiltering=!1,D}),r(t,"Core/Templating.js",[t["Core/Defaults.js"],t["Core/Utilities.js"]],function(s,l){let{defaultOptions:u,defaultTime:n}=s,{extend:p,getNestedProperty:m,isArray:g,isNumber:v,isObject:y,pick:C,pInt:_}=l,w={add:(x,P)=>x+P,divide:(x,P)=>P!==0?x/P:"",eq:(x,P)=>x==P,each:function(x){let P=arguments[arguments.length-1];return!!g(x)&&x.map((D,T)=>k(P.body,p(y(D)?D:{"@this":D},{"@index":T,"@first":T===0,"@last":T===x.length-1}))).join("")},ge:(x,P)=>x>=P,gt:(x,P)=>x>P,if:x=>!!x,le:(x,P)=>x<=P,lt:(x,P)=>x<P,multiply:(x,P)=>x*P,ne:(x,P)=>x!=P,subtract:(x,P)=>x-P,unless:x=>!x};function k(x="",P,D){let T=/\{([\w\:\.\,;\-\/<>%@"'’= #\(\)]+)\}/g,I=/\(([\w\:\.\,;\-\/<>%@"'= ]+)\)/g,N=[],q=/f$/,Z=/\.(\d)/,X=u.lang,O=D&&D.time||n,V=D&&D.numberFormatter||S,$=(B="")=>{let H;return B==="true"||B!=="false"&&((H=Number(B)).toString()===B?H:m(B,P))},L,R,G=0,U;for(;(L=T.exec(x))!==null;){let B=I.exec(L[1]);B&&(L=B,U=!0),R&&R.isBlock||(R={ctx:P,expression:L[1],find:L[0],isBlock:L[1].charAt(0)==="#",start:L.index,startInner:L.index+L[0].length,length:L[0].length});let H=L[1].split(" ")[0].replace("#","");w[H]&&(R.isBlock&&H===R.fn&&G++,R.fn||(R.fn=H));let W=L[1]==="else";if(R.isBlock&&R.fn&&(L[1]===`/${R.fn}`||W))if(G)!W&&G--;else{let re=R.startInner,de=x.substr(re,L.index-re);R.body===void 0?(R.body=de,R.startInner=L.index+L[0].length):R.elseBody=de,R.find+=de+L[0],W||(N.push(R),R=void 0)}else R.isBlock||N.push(R);if(B&&!(R!=null&&R.isBlock))break}return N.forEach(B=>{let H,W,{body:re,elseBody:de,expression:ie,fn:oe}=B;if(oe){let Ee=[B],xe=ie.split(" ");for(W=w[oe].length;W--;)Ee.unshift($(xe[W+1]));H=w[oe].apply(P,Ee),B.isBlock&&typeof H=="boolean"&&(H=k(H?re:de,P,D))}else{let Ee=ie.split(":");if(H=$(Ee.shift()||""),Ee.length&&typeof H=="number"){let xe=Ee.join(":");if(q.test(xe)){let Se=parseInt((xe.match(Z)||["","-1"])[1],10);H!==null&&(H=V(H,Se,X.decimalPoint,xe.indexOf(",")>-1?X.thousandsSep:""))}else H=O.dateFormat(xe,H)}}x=x.replace(B.find,C(H,""))}),U?k(x,P,D):x}function S(x,P,D,T){let I,N;x=+x||0,P=+P;let q=u.lang,Z=(x.toString().split(".")[1]||"").split("e")[0].length,X=x.toString().split("e"),O=P;P===-1?P=Math.min(Z,20):v(P)?P&&X[1]&&X[1]<0&&((N=P+ +X[1])>=0?(X[0]=(+X[0]).toExponential(N).split("e")[0],P=N):(X[0]=X[0].split(".")[0]||0,x=P<20?(X[0]*Math.pow(10,X[1])).toFixed(P):0,X[1]=0)):P=2;let V=(Math.abs(X[1]?X[0]:x)+Math.pow(10,-Math.max(P,Z)-1)).toFixed(P),$=String(_(V)),L=$.length>3?$.length%3:0;return D=C(D,q.decimalPoint),T=C(T,q.thousandsSep),I=(x<0?"-":"")+(L?$.substr(0,L)+T:""),0>+X[1]&&!O?I="0":I+=$.substr(L).replace(/(\d{3})(?=\d)/g,"$1"+T),P?I+=D+V.slice(-P):+I==0&&(I="0"),X[1]&&+I!=0&&(I+="e"+X[1]),I}return{dateFormat:function(x,P,D){return n.dateFormat(x,P,D)},format:k,helpers:w,numberFormat:S}}),r(t,"Core/Renderer/RendererRegistry.js",[t["Core/Globals.js"]],function(s){var l,u;let n;return(u=l||(l={})).rendererTypes={},u.getRendererType=function(p=n){return u.rendererTypes[p]||u.rendererTypes[n]},u.registerRendererType=function(p,m,g){u.rendererTypes[p]=m,(!n||g)&&(n=p,s.Renderer=m)},l}),r(t,"Core/Renderer/RendererUtilities.js",[t["Core/Utilities.js"]],function(s){var l;let{clamp:u,pick:n,pushUnique:p,stableSort:m}=s;return(l||(l={})).distribute=function g(v,y,C){let _=v,w=_.reducedLen||y,k=($,L)=>$.target-L.target,S=[],x=v.length,P=[],D=S.push,T,I,N,q=!0,Z,X,O=0,V;for(T=x;T--;)O+=v[T].size;if(O>w){for(m(v,($,L)=>(L.rank||0)-($.rank||0)),N=(V=v[0].rank===v[v.length-1].rank)?x/2:-1,I=V?N:x-1;N&&O>w;)Z=v[T=Math.floor(I)],p(P,T)&&(O-=Z.size),I+=N,V&&I>=v.length&&(N/=2,I=N);P.sort(($,L)=>L-$).forEach($=>D.apply(S,v.splice($,1)))}for(m(v,k),v=v.map($=>({size:$.size,targets:[$.target],align:n($.align,.5)}));q;){for(T=v.length;T--;)Z=v[T],X=(Math.min.apply(0,Z.targets)+Math.max.apply(0,Z.targets))/2,Z.pos=u(X-Z.size*Z.align,0,y-Z.size);for(T=v.length,q=!1;T--;)T>0&&v[T-1].pos+v[T-1].size>v[T].pos&&(v[T-1].size+=v[T].size,v[T-1].targets=v[T-1].targets.concat(v[T].targets),v[T-1].align=.5,v[T-1].pos+v[T-1].size>y&&(v[T-1].pos=y-v[T-1].size),v.splice(T,1),q=!0)}return D.apply(_,S),T=0,v.some($=>{let L=0;return($.targets||[]).some(()=>(_[T].pos=$.pos+L,C!==void 0&&Math.abs(_[T].pos-_[T].target)>C?(_.slice(0,T+1).forEach(R=>delete R.pos),_.reducedLen=(_.reducedLen||y)-.1*y,_.reducedLen>.1*y&&g(_,y,C),!0):(L+=_[T].size,T++,!1)))}),m(_,k),_},l}),r(t,"Core/Renderer/SVG/SVGElement.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u,n){let{animate:p,animObject:m,stop:g}=s,{deg2rad:v,doc:y,svg:C,SVG_NS:_,win:w}=u,{addEvent:k,attr:S,createElement:x,crisp:P,css:D,defined:T,erase:I,extend:N,fireEvent:q,isArray:Z,isFunction:X,isObject:O,isString:V,merge:$,objectEach:L,pick:R,pInt:G,pushUnique:U,replaceNested:B,syncTimeout:H,uniqueKey:W}=n;class re{_defaultGetter(ie){let oe=R(this[ie+"Value"],this[ie],this.element?this.element.getAttribute(ie):null,0);return/^-?[\d\.]+$/.test(oe)&&(oe=parseFloat(oe)),oe}_defaultSetter(ie,oe,Ee){Ee.setAttribute(oe,ie)}add(ie){let oe,Ee=this.renderer,xe=this.element;return ie&&(this.parentGroup=ie),this.textStr!==void 0&&this.element.nodeName==="text"&&Ee.buildText(this),this.added=!0,(!ie||ie.handleZ||this.zIndex)&&(oe=this.zIndexSetter()),oe||(ie?ie.element:Ee.box).appendChild(xe),this.onAdd&&this.onAdd(),this}addClass(ie,oe){let Ee=oe?"":this.attr("class")||"";return(ie=(ie||"").split(/ /g).reduce(function(xe,Se){return Ee.indexOf(Se)===-1&&xe.push(Se),xe},Ee?[Ee]:[]).join(" "))!==Ee&&this.attr("class",ie),this}afterSetters(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)}align(ie,oe,Ee,xe=!0){let Se,K,Q,ae,_e={},J=this.renderer,ne=J.alignedObjects,ce=!!ie;ie?(this.alignOptions=ie,this.alignByTranslate=oe,this.alignTo=Ee):(ie=this.alignOptions||{},oe=this.alignByTranslate,Ee=this.alignTo);let ye=!Ee||V(Ee)?Ee||"renderer":void 0;ye&&(ce&&U(ne,this),Ee=void 0);let we=R(Ee,J[ye],J),ze=ie.align,Ce=ie.verticalAlign;return Se=(we.x||0)+(ie.x||0),K=(we.y||0)+(ie.y||0),ze==="right"?Q=1:ze==="center"&&(Q=2),Q&&(Se+=((we.width||0)-(ie.width||0))/Q),_e[oe?"translateX":"x"]=Math.round(Se),Ce==="bottom"?ae=1:Ce==="middle"&&(ae=2),ae&&(K+=((we.height||0)-(ie.height||0))/ae),_e[oe?"translateY":"y"]=Math.round(K),xe&&(this[this.placed?"animate":"attr"](_e),this.placed=!0),this.alignAttr=_e,this}alignSetter(ie){let oe={left:"start",center:"middle",right:"end"};oe[ie]&&(this.alignValue=ie,this.element.setAttribute("text-anchor",oe[ie]))}animate(ie,oe,Ee){let xe=m(R(oe,this.renderer.globalAnimation,!0)),Se=xe.defer;return y.hidden&&(xe.duration=0),xe.duration!==0?(Ee&&(xe.complete=Ee),H(()=>{this.element&&p(this,ie,xe)},Se)):(this.attr(ie,void 0,Ee||xe.complete),L(ie,function(K,Q){xe.step&&xe.step.call(this,K,{prop:Q,pos:1,elem:this})},this)),this}applyTextOutline(ie){let oe=this.element;ie.indexOf("contrast")!==-1&&(ie=ie.replace(/contrast/g,this.renderer.getContrast(oe.style.fill)));let Ee=ie.split(" "),xe=Ee[Ee.length-1],Se=Ee[0];if(Se&&Se!=="none"&&u.svg){this.fakeTS=!0,Se=Se.replace(/(^[\d\.]+)(.*?)$/g,function(J,ne,ce){return 2*Number(ne)+ce}),this.removeTextOutline();let K=y.createElementNS(_,"tspan");S(K,{class:"highcharts-text-outline",fill:xe,stroke:xe,"stroke-width":Se,"stroke-linejoin":"round"});let Q=oe.querySelector("textPath")||oe;[].forEach.call(Q.childNodes,J=>{let ne=J.cloneNode(!0);ne.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach(ce=>ne.removeAttribute(ce)),K.appendChild(ne)});let ae=0;[].forEach.call(Q.querySelectorAll("text tspan"),J=>{ae+=Number(J.getAttribute("dy"))});let _e=y.createElementNS(_,"tspan");_e.textContent="​",S(_e,{x:Number(oe.getAttribute("x")),dy:-ae}),K.appendChild(_e),Q.insertBefore(K,Q.firstChild)}}attr(ie,oe,Ee,xe){let{element:Se}=this,K=re.symbolCustomAttribs,Q,ae,_e=this,J;return typeof ie=="string"&&oe!==void 0&&(Q=ie,(ie={})[Q]=oe),typeof ie=="string"?_e=(this[ie+"Getter"]||this._defaultGetter).call(this,ie,Se):(L(ie,function(ne,ce){J=!1,xe||g(this,ce),this.symbolName&&K.indexOf(ce)!==-1&&(ae||(this.symbolAttr(ie),ae=!0),J=!0),this.rotation&&(ce==="x"||ce==="y")&&(this.doTransform=!0),J||(this[ce+"Setter"]||this._defaultSetter).call(this,ne,ce,Se)},this),this.afterSetters()),Ee&&Ee.call(this),_e}clip(ie){if(ie&&!ie.clipPath){let oe=W()+"-",Ee=this.renderer.createElement("clipPath").attr({id:oe}).add(this.renderer.defs);N(ie,{clipPath:Ee,id:oe,count:0}),ie.add(Ee)}return this.attr("clip-path",ie?`url(${this.renderer.url}#${ie.id})`:"none")}crisp(ie,oe){oe=Math.round(oe||ie.strokeWidth||0);let Ee=ie.x||this.x||0,xe=ie.y||this.y||0,Se=(ie.width||this.width||0)+Ee,K=(ie.height||this.height||0)+xe,Q=P(Ee,oe),ae=P(xe,oe);return N(ie,{x:Q,y:ae,width:P(Se,oe)-Q,height:P(K,oe)-ae}),T(ie.strokeWidth)&&(ie.strokeWidth=oe),ie}complexColor(ie,oe,Ee){let xe=this.renderer,Se,K,Q,ae,_e,J,ne,ce,ye,we,ze=[],Ce;q(this.renderer,"complexColor",{args:arguments},function(){if(ie.radialGradient?K="radialGradient":ie.linearGradient&&(K="linearGradient"),K){if(Q=ie[K],_e=xe.gradients,J=ie.stops,ye=Ee.radialReference,Z(Q)&&(ie[K]=Q={x1:Q[0],y1:Q[1],x2:Q[2],y2:Q[3],gradientUnits:"userSpaceOnUse"}),K==="radialGradient"&&ye&&!T(Q.gradientUnits)&&(ae=Q,Q=$(Q,xe.getRadialAttr(ye,ae),{gradientUnits:"userSpaceOnUse"})),L(Q,function(Ie,Fe){Fe!=="id"&&ze.push(Fe,Ie)}),L(J,function(Ie){ze.push(Ie)}),_e[ze=ze.join(",")])we=_e[ze].attr("id");else{Q.id=we=W();let Ie=_e[ze]=xe.createElement(K).attr(Q).add(xe.defs);Ie.radAttr=ae,Ie.stops=[],J.forEach(function(Fe){Fe[1].indexOf("rgba")===0?(ne=(Se=l.parse(Fe[1])).get("rgb"),ce=Se.get("a")):(ne=Fe[1],ce=1);let Ge=xe.createElement("stop").attr({offset:Fe[0],"stop-color":ne,"stop-opacity":ce}).add(Ie);Ie.stops.push(Ge)})}Ce="url("+xe.url+"#"+we+")",Ee.setAttribute(oe,Ce),Ee.gradient=ze,ie.toString=function(){return Ce}}})}css(ie){let oe=this.styles,Ee={},xe=this.element,Se,K=!oe;if(oe&&L(ie,function(Q,ae){oe&&oe[ae]!==Q&&(Ee[ae]=Q,K=!0)}),K){oe&&(ie=N(oe,Ee)),ie.width===null||ie.width==="auto"?delete this.textWidth:xe.nodeName.toLowerCase()==="text"&&ie.width&&(Se=this.textWidth=G(ie.width)),N(this.styles,ie),Se&&!C&&this.renderer.forExport&&delete ie.width;let Q=$(ie);xe.namespaceURI===this.SVG_NS&&(["textOutline","textOverflow","width"].forEach(ae=>Q&&delete Q[ae]),Q.color&&(Q.fill=Q.color)),D(xe,Q)}return this.added&&(this.element.nodeName==="text"&&this.renderer.buildText(this),ie.textOutline&&this.applyTextOutline(ie.textOutline)),this}dashstyleSetter(ie){let oe,Ee=this["stroke-width"];if(Ee==="inherit"&&(Ee=1),ie=ie&&ie.toLowerCase()){let xe=ie.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(oe=xe.length;oe--;)xe[oe]=""+G(xe[oe])*R(Ee,NaN);ie=xe.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",ie)}}destroy(){var ae;let ie=this,oe=ie.element||{},Ee=ie.renderer,xe=oe.ownerSVGElement,Se=oe.nodeName==="SPAN"&&ie.parentGroup||void 0,K,Q;if(oe.onclick=oe.onmouseout=oe.onmouseover=oe.onmousemove=oe.point=null,g(ie),ie.clipPath&&xe){let _e=ie.clipPath;[].forEach.call(xe.querySelectorAll("[clip-path],[CLIP-PATH]"),function(J){J.getAttribute("clip-path").indexOf(_e.element.id)>-1&&J.removeAttribute("clip-path")}),ie.clipPath=_e.destroy()}if(ie.connector=(ae=ie.connector)==null?void 0:ae.destroy(),ie.stops){for(Q=0;Q<ie.stops.length;Q++)ie.stops[Q].destroy();ie.stops.length=0,ie.stops=void 0}for(ie.safeRemoveChild(oe);Se&&Se.div&&Se.div.childNodes.length===0;)K=Se.parentGroup,ie.safeRemoveChild(Se.div),delete Se.div,Se=K;ie.alignOptions&&I(Ee.alignedObjects,ie),L(ie,function(_e,J){ie[J]&&ie[J].parentGroup===ie&&ie[J].destroy&&ie[J].destroy(),delete ie[J]})}dSetter(ie,oe,Ee){Z(ie)&&(typeof ie[0]=="string"&&(ie=this.renderer.pathToSegments(ie)),this.pathArray=ie,ie=ie.reduce((xe,Se,K)=>Se&&Se.join?(K?xe+" ":"")+Se.join(" "):(Se||"").toString(),"")),/(NaN| {2}|^$)/.test(ie)&&(ie="M 0 0"),this[oe]!==ie&&(Ee.setAttribute(oe,ie),this[oe]=ie)}fillSetter(ie,oe,Ee){typeof ie=="string"?Ee.setAttribute(oe,ie):ie&&this.complexColor(ie,oe,Ee)}hrefSetter(ie,oe,Ee){Ee.setAttributeNS("http://www.w3.org/1999/xlink",oe,ie)}getBBox(ie,oe){let Ee,xe,Se,K,{alignValue:Q,element:ae,renderer:_e,styles:J,textStr:ne}=this,{cache:ce,cacheKeys:ye}=_e,we=ae.namespaceURI===this.SVG_NS,ze=R(oe,this.rotation,0),Ce=_e.styledMode?ae&&re.prototype.getStyle.call(ae,"font-size"):J.fontSize;if(T(ne)&&((K=ne.toString()).indexOf("<")===-1&&(K=K.replace(/\d/g,"0")),K+=["",_e.rootFontSize,Ce,ze,this.textWidth,Q,J.textOverflow,J.fontWeight].join(",")),K&&!ie&&(Ee=ce[K]),!Ee||Ee.polygon){if(we||_e.forExport){try{Se=this.fakeTS&&function(Fe){let Ge=ae.querySelector(".highcharts-text-outline");Ge&&D(Ge,{display:Fe})},X(Se)&&Se("none"),Ee=ae.getBBox?N({},ae.getBBox()):{width:ae.offsetWidth,height:ae.offsetHeight,x:0,y:0},X(Se)&&Se("")}catch{}(!Ee||Ee.width<0)&&(Ee={x:0,y:0,width:0,height:0})}else Ee=this.htmlGetBBox();xe=Ee.height,we&&(Ee.height=xe={"11px,17":14,"13px,20":16}[`${Ce||""},${Math.round(xe)}`]||xe),ze&&(Ee=this.getRotatedBox(Ee,ze));let Ie={bBox:Ee};q(this,"afterGetBBox",Ie),Ee=Ie.bBox}if(K&&(ne===""||Ee.height>0)){for(;ye.length>250;)delete ce[ye.shift()];ce[K]||ye.push(K),ce[K]=Ee}return Ee}getRotatedBox(ie,oe){let{x:Ee,y:xe,width:Se,height:K}=ie,{alignValue:Q,translateY:ae,rotationOriginX:_e=0,rotationOriginY:J=0}=this,ne={right:1,center:.5}[Q||0]||0,ce=Number(this.element.getAttribute("y")||0)-(ae?0:xe),ye=oe*v,we=(oe-90)*v,ze=Math.cos(ye),Ce=Math.sin(ye),Ie=Se*ze,Fe=Se*Ce,Ge=Math.cos(we),ke=Math.sin(we),[[ge,fe],[Me,De]]=[_e,J].map(si=>[si-si*ze,si*Ce]),Pe=Ee+ne*(Se-Ie)+ge+De+ce*Ge,je=Pe+Ie,Xe=je-K*Ge,et=Xe-Ie,nt=xe+ce-ne*Fe-fe+Me+ce*ke,ht=nt+Fe,gt=ht-K*ke,wt=gt-Fe,Rt=Math.min(Pe,je,Xe,et),ft=Math.min(nt,ht,gt,wt),St=Math.max(Pe,je,Xe,et)-Rt,Ct=Math.max(nt,ht,gt,wt)-ft;return{x:Rt,y:ft,width:St,height:Ct,polygon:[[Pe,nt],[je,ht],[Xe,gt],[et,wt]]}}getStyle(ie){return w.getComputedStyle(this.element||this,"").getPropertyValue(ie)}hasClass(ie){return(""+this.attr("class")).split(" ").indexOf(ie)!==-1}hide(){return this.attr({visibility:"hidden"})}htmlGetBBox(){return{height:0,width:0,x:0,y:0}}constructor(ie,oe){this.onEvents={},this.opacity=1,this.SVG_NS=_,this.element=oe==="span"||oe==="body"?x(oe):y.createElementNS(this.SVG_NS,oe),this.renderer=ie,this.styles={},q(this,"afterInit")}on(ie,oe){let{onEvents:Ee}=this;return Ee[ie]&&Ee[ie](),Ee[ie]=k(this.element,ie,oe),this}opacitySetter(ie,oe,Ee){let xe=Number(Number(ie).toFixed(3));this.opacity=xe,Ee.setAttribute(oe,xe)}reAlign(){var ie;(ie=this.alignOptions)!=null&&ie.width&&this.alignOptions.align!=="left"&&(this.alignOptions.width=this.getBBox().width,this.placed=!1,this.align())}removeClass(ie){return this.attr("class",(""+this.attr("class")).replace(V(ie)?RegExp(`(^| )${ie}( |$)`):ie," ").replace(/ +/g," ").trim())}removeTextOutline(){let ie=this.element.querySelector("tspan.highcharts-text-outline");ie&&this.safeRemoveChild(ie)}safeRemoveChild(ie){let oe=ie.parentNode;oe&&oe.removeChild(ie)}setRadialReference(ie){let oe=this.element.gradient&&this.renderer.gradients[this.element.gradient];return this.element.radialReference=ie,oe&&oe.radAttr&&oe.animate(this.renderer.getRadialAttr(ie,oe.radAttr)),this}shadow(ie){var Se;let{renderer:oe}=this,Ee=$(((Se=this.parentGroup)==null?void 0:Se.rotation)===90?{offsetX:-1,offsetY:-1}:{},O(ie)?ie:{}),xe=oe.shadowDefinition(Ee);return this.attr({filter:ie?`url(${oe.url}#${xe})`:"none"})}show(ie=!0){return this.attr({visibility:ie?"inherit":"visible"})}"stroke-widthSetter"(ie,oe,Ee){this[oe]=ie,Ee.setAttribute(oe,ie)}strokeWidth(){if(!this.renderer.styledMode)return this["stroke-width"]||0;let ie=this.getStyle("stroke-width"),oe=0,Ee;return/px$/.test(ie)?oe=G(ie):ie!==""&&(S(Ee=y.createElementNS(_,"rect"),{width:ie,"stroke-width":0}),this.element.parentNode.appendChild(Ee),oe=Ee.getBBox().width,Ee.parentNode.removeChild(Ee)),oe}symbolAttr(ie){let oe=this;re.symbolCustomAttribs.forEach(function(Ee){oe[Ee]=R(ie[Ee],oe[Ee])}),oe.attr({d:oe.renderer.symbols[oe.symbolName](oe.x,oe.y,oe.width,oe.height,oe)})}textSetter(ie){ie!==this.textStr&&(delete this.textPxLength,this.textStr=ie,this.added&&this.renderer.buildText(this),this.reAlign())}titleSetter(ie){let oe=this.element,Ee=oe.getElementsByTagName("title")[0]||y.createElementNS(this.SVG_NS,"title");oe.insertBefore?oe.insertBefore(Ee,oe.firstChild):oe.appendChild(Ee),Ee.textContent=B(R(ie,""),[/<[^>]*>/g,""]).replace(/&lt;/g,"<").replace(/&gt;/g,">")}toFront(){let ie=this.element;return ie.parentNode.appendChild(ie),this}translate(ie,oe){return this.attr({translateX:ie,translateY:oe})}updateTransform(ie="transform"){var ce;let{element:oe,matrix:Ee,rotation:xe=0,rotationOriginX:Se,rotationOriginY:K,scaleX:Q,scaleY:ae,translateX:_e=0,translateY:J=0}=this,ne=["translate("+_e+","+J+")"];T(Ee)&&ne.push("matrix("+Ee.join(",")+")"),xe&&(ne.push("rotate("+xe+" "+R(Se,oe.getAttribute("x"),0)+" "+R(K,oe.getAttribute("y")||0)+")"),((ce=this.text)==null?void 0:ce.element.tagName)==="SPAN"&&this.text.attr({rotation:xe,rotationOriginX:(Se||0)-this.padding,rotationOriginY:(K||0)-this.padding})),(T(Q)||T(ae))&&ne.push("scale("+R(Q,1)+" "+R(ae,1)+")"),ne.length&&!(this.text||this).textPath&&oe.setAttribute(ie,ne.join(" "))}visibilitySetter(ie,oe,Ee){ie==="inherit"?Ee.removeAttribute(oe):this[oe]!==ie&&Ee.setAttribute(oe,ie),this[oe]=ie}xGetter(ie){return this.element.nodeName==="circle"&&(ie==="x"?ie="cx":ie==="y"&&(ie="cy")),this._defaultGetter(ie)}zIndexSetter(ie,oe){let Ee=this.renderer,xe=this.parentGroup,Se=(xe||Ee).element||Ee.box,K=this.element,Q=Se===Ee.box,ae,_e,J,ne=!1,ce,ye=this.added,we;if(T(ie)?(K.setAttribute("data-z-index",ie),ie=+ie,this[oe]===ie&&(ye=!1)):T(this[oe])&&K.removeAttribute("data-z-index"),this[oe]=ie,ye){for((ie=this.zIndex)&&xe&&(xe.handleZ=!0),we=(ae=Se.childNodes).length-1;we>=0&&!ne;we--)ce=!T(J=(_e=ae[we]).getAttribute("data-z-index")),_e!==K&&(ie<0&&ce&&!Q&&!we?(Se.insertBefore(K,ae[we]),ne=!0):(G(J)<=ie||ce&&(!T(ie)||ie>=0))&&(Se.insertBefore(K,ae[we+1]),ne=!0));ne||(Se.insertBefore(K,ae[Q?3:0]),ne=!0)}return ne}}return re.symbolCustomAttribs=["anchorX","anchorY","clockwise","end","height","innerR","r","start","width","x","y"],re.prototype.strokeSetter=re.prototype.fillSetter,re.prototype.yGetter=re.prototype.xGetter,re.prototype.matrixSetter=re.prototype.rotationOriginXSetter=re.prototype.rotationOriginYSetter=re.prototype.rotationSetter=re.prototype.scaleXSetter=re.prototype.scaleYSetter=re.prototype.translateXSetter=re.prototype.translateYSetter=re.prototype.verticalAlignSetter=function(de,ie){this[ie]=de,this.doTransform=!0},re}),r(t,"Core/Renderer/SVG/SVGLabel.js",[t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(s,l){let{defined:u,extend:n,isNumber:p,merge:m,pick:g,removeEvent:v}=l;class y extends s{constructor(_,w,k,S,x,P,D,T,I,N){let q;super(_,"g"),this.paddingLeftSetter=this.paddingSetter,this.paddingRightSetter=this.paddingSetter,this.doUpdate=!1,this.textStr=w,this.x=k,this.y=S,this.anchorX=P,this.anchorY=D,this.baseline=I,this.className=N,this.addClass(N==="button"?"highcharts-no-tooltip":"highcharts-label"),N&&this.addClass("highcharts-"+N),this.text=_.text(void 0,0,0,T).attr({zIndex:1}),typeof x=="string"&&((q=/^url\((.*?)\)$/.test(x))||this.renderer.symbols[x])&&(this.symbolKey=x),this.bBox=y.emptyBBox,this.padding=3,this.baselineOffset=0,this.needsBox=_.styledMode||q,this.deferredAttr={},this.alignFactor=0}alignSetter(_){let w={left:0,center:.5,right:1}[_];w!==this.alignFactor&&(this.alignFactor=w,this.bBox&&p(this.xSetting)&&this.attr({x:this.xSetting}))}anchorXSetter(_,w){this.anchorX=_,this.boxAttr(w,Math.round(_)-this.getCrispAdjust()-this.xSetting)}anchorYSetter(_,w){this.anchorY=_,this.boxAttr(w,_-this.ySetting)}boxAttr(_,w){this.box?this.box.attr(_,w):this.deferredAttr[_]=w}css(_){if(_){let w={};_=m(_),y.textProps.forEach(k=>{_[k]!==void 0&&(w[k]=_[k],delete _[k])}),this.text.css(w),"fontSize"in w||"fontWeight"in w?this.updateTextPadding():("width"in w||"textOverflow"in w)&&this.updateBoxSize()}return s.prototype.css.call(this,_)}destroy(){v(this.element,"mouseenter"),v(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),s.prototype.destroy.call(this)}fillSetter(_,w){_&&(this.needsBox=!0),this.fill=_,this.boxAttr(w,_)}getBBox(_,w){this.textStr&&this.bBox.width===0&&this.bBox.height===0&&this.updateBoxSize();let{padding:k,height:S=0,translateX:x=0,translateY:P=0,width:D=0}=this,T=g(this.paddingLeft,k),I=w??(this.rotation||0),N={width:D,height:S,x:x+this.bBox.x-T,y:P+this.bBox.y-k+this.baselineOffset};return I&&(N=this.getRotatedBox(N,I)),N}getCrispAdjust(){return(this.renderer.styledMode&&this.box?this.box.strokeWidth():this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2}heightSetter(_){this.heightSetting=_,this.doUpdate=!0}afterSetters(){super.afterSetters(),this.doUpdate&&(this.updateBoxSize(),this.doUpdate=!1)}onAdd(){this.text.add(this),this.attr({text:g(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&u(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})}paddingSetter(_,w){p(_)?_!==this[w]&&(this[w]=_,this.updateTextPadding()):this[w]=void 0}rSetter(_,w){this.boxAttr(w,_)}strokeSetter(_,w){this.stroke=_,this.boxAttr(w,_)}"stroke-widthSetter"(_,w){_&&(this.needsBox=!0),this["stroke-width"]=_,this.boxAttr(w,_)}"text-alignSetter"(_){this.textAlign=_}textSetter(_){_!==void 0&&this.text.attr({text:_}),this.updateTextPadding(),this.reAlign()}updateBoxSize(){let _,w=this.text,k={},S=this.padding,x=this.bBox=(!p(this.widthSetting)||!p(this.heightSetting)||this.textAlign)&&u(w.textStr)?w.getBBox(void 0,0):y.emptyBBox;this.width=this.getPaddedWidth(),this.height=(this.heightSetting||x.height||0)+2*S;let P=this.renderer.fontMetrics(w);if(this.baselineOffset=S+Math.min((this.text.firstLineMetrics||P).b,x.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-P.h)/2),this.needsBox&&!w.textPath){if(!this.box){let D=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect();D.addClass((this.className==="button"?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),D.add(this)}_=this.getCrispAdjust(),k.x=_,k.y=(this.baseline?-this.baselineOffset:0)+_,k.width=Math.round(this.width),k.height=Math.round(this.height),this.box.attr(n(k,this.deferredAttr)),this.deferredAttr={}}}updateTextPadding(){let _=this.text;if(!_.textPath){this.updateBoxSize();let w=this.baseline?0:this.baselineOffset,k=g(this.paddingLeft,this.padding);u(this.widthSetting)&&this.bBox&&(this.textAlign==="center"||this.textAlign==="right")&&(k+={center:.5,right:1}[this.textAlign]*(this.widthSetting-this.bBox.width)),(k!==_.x||w!==_.y)&&(_.attr("x",k),_.hasBoxWidthChanged&&(this.bBox=_.getBBox(!0)),w!==void 0&&_.attr("y",w)),_.x=k,_.y=w}}widthSetter(_){this.widthSetting=p(_)?_:void 0,this.doUpdate=!0}getPaddedWidth(){let _=this.padding,w=g(this.paddingLeft,_),k=g(this.paddingRight,_);return(this.widthSetting||this.bBox.width||0)+w+k}xSetter(_){this.x=_,this.alignFactor&&(_-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(_),this.attr("translateX",this.xSetting)}ySetter(_){this.ySetting=this.y=Math.round(_),this.attr("translateY",this.ySetting)}}return y.emptyBBox={width:0,height:0,x:0,y:0},y.textProps=["color","direction","fontFamily","fontSize","fontStyle","fontWeight","lineHeight","textAlign","textDecoration","textOutline","textOverflow","whiteSpace","width"],y}),r(t,"Core/Renderer/SVG/Symbols.js",[t["Core/Utilities.js"]],function(s){let{defined:l,isNumber:u,pick:n}=s;function p(v,y,C,_,w){let k=[];if(w){let S=w.start||0,x=n(w.r,C),P=n(w.r,_||C),D=2e-4/(w.borderRadius?1:Math.max(x,1)),T=Math.abs((w.end||0)-S-2*Math.PI)<D,I=(w.end||0)-(T?D:0),N=w.innerR,q=n(w.open,T),Z=Math.cos(S),X=Math.sin(S),O=Math.cos(I),V=Math.sin(I),$=n(w.longArc,I-S-Math.PI<D?0:1),L=["A",x,P,0,$,n(w.clockwise,1),v+x*O,y+P*V];L.params={start:S,end:I,cx:v,cy:y},k.push(["M",v+x*Z,y+P*X],L),l(N)&&((L=["A",N,N,0,$,l(w.clockwise)?1-w.clockwise:0,v+N*Z,y+N*X]).params={start:I,end:S,cx:v,cy:y},k.push(q?["M",v+N*O,y+N*V]:["L",v+N*O,y+N*V],L)),q||k.push(["Z"])}return k}function m(v,y,C,_,w){return w&&w.r?g(v,y,C,_,w):[["M",v,y],["L",v+C,y],["L",v+C,y+_],["L",v,y+_],["Z"]]}function g(v,y,C,_,w){let k=(w==null?void 0:w.r)||0;return[["M",v+k,y],["L",v+C-k,y],["A",k,k,0,0,1,v+C,y+k],["L",v+C,y+_-k],["A",k,k,0,0,1,v+C-k,y+_],["L",v+k,y+_],["A",k,k,0,0,1,v,y+_-k],["L",v,y+k],["A",k,k,0,0,1,v+k,y],["Z"]]}return{arc:p,callout:function(v,y,C,_,w){let k=Math.min(w&&w.r||0,C,_),S=k+6,x=w&&w.anchorX,P=w&&w.anchorY||0,D=g(v,y,C,_,{r:k});if(!u(x)||x<C&&x>0&&P<_&&P>0)return D;if(v+x>C-S)if(P>y+S&&P<y+_-S)D.splice(3,1,["L",v+C,P-6],["L",v+C+6,P],["L",v+C,P+6],["L",v+C,y+_-k]);else if(x<C){let T=P<y+S,I=T?y:y+_;D.splice(T?2:5,0,["L",x,P],["L",v+C-k,I])}else D.splice(3,1,["L",v+C,_/2],["L",x,P],["L",v+C,_/2],["L",v+C,y+_-k]);else if(v+x<S)if(P>y+S&&P<y+_-S)D.splice(7,1,["L",v,P+6],["L",v-6,P],["L",v,P-6],["L",v,y+k]);else if(x>0){let T=P<y+S,I=T?y:y+_;D.splice(T?1:6,0,["L",x,P],["L",v+k,I])}else D.splice(7,1,["L",v,_/2],["L",x,P],["L",v,_/2],["L",v,y+k]);else P>_&&x<C-S?D.splice(5,1,["L",x+6,y+_],["L",x,y+_+6],["L",x-6,y+_],["L",v+k,y+_]):P<0&&x>S&&D.splice(1,1,["L",x-6,y],["L",x,y-6],["L",x+6,y],["L",C-k,y]);return D},circle:function(v,y,C,_){return p(v+C/2,y+_/2,C/2,_/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(v,y,C,_){return[["M",v+C/2,y],["L",v+C,y+_/2],["L",v+C/2,y+_],["L",v,y+_/2],["Z"]]},rect:m,roundedRect:g,square:m,triangle:function(v,y,C,_){return[["M",v+C/2,y],["L",v+C,y+_],["L",v,y+_],["Z"]]},"triangle-down":function(v,y,C,_){return[["M",v,y],["L",v+C,y],["L",v+C/2,y+_],["Z"]]}}}),r(t,"Core/Renderer/SVG/TextBuilder.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){let{doc:n,SVG_NS:p,win:m}=l,{attr:g,extend:v,fireEvent:y,isString:C,objectEach:_,pick:w}=u;return class{constructor(k){let S=k.styles;this.renderer=k.renderer,this.svgElement=k,this.width=k.textWidth,this.textLineHeight=S&&S.lineHeight,this.textOutline=S&&S.textOutline,this.ellipsis=!!(S&&S.textOverflow==="ellipsis"),this.noWrap=!!(S&&S.whiteSpace==="nowrap")}buildSVG(){let k=this.svgElement,S=k.element,x=k.renderer,P=w(k.textStr,"").toString(),D=P.indexOf("<")!==-1,T=S.childNodes,I=!k.added&&x.box,N=[P,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,k.getStyle("font-size"),this.width].join(",");if(N!==k.textCache){k.textCache=N,delete k.actualWidth;for(let q=T.length;q--;)S.removeChild(T[q]);if(D||this.ellipsis||this.width||k.textPath||P.indexOf(" ")!==-1&&(!this.noWrap||/<br.*?>/g.test(P))){if(P!==""){I&&I.appendChild(S);let q=new s(P);this.modifyTree(q.nodes),q.addToDOM(S),this.modifyDOM(),this.ellipsis&&(S.textContent||"").indexOf("…")!==-1&&k.attr("title",this.unescapeEntities(k.textStr||"",["&lt;","&gt;"])),I&&I.removeChild(S)}}else S.appendChild(n.createTextNode(this.unescapeEntities(P)));C(this.textOutline)&&k.applyTextOutline&&k.applyTextOutline(this.textOutline)}}modifyDOM(){let k,S=this.svgElement,x=g(S.element,"x");for(S.firstLineMetrics=void 0;(k=S.element.firstChild)&&/^[\s\u200B]*$/.test(k.textContent||" ");)S.element.removeChild(k);[].forEach.call(S.element.querySelectorAll("tspan.highcharts-br"),(I,N)=>{I.nextSibling&&I.previousSibling&&(N===0&&I.previousSibling.nodeType===1&&(S.firstLineMetrics=S.renderer.fontMetrics(I.previousSibling)),g(I,{dy:this.getLineHeight(I.nextSibling),x}))});let P=this.width||0;if(!P)return;let D=(I,N)=>{let q=I.textContent||"",Z=q.replace(/([^\^])-/g,"$1- ").split(" "),X=!this.noWrap&&(Z.length>1||S.element.childNodes.length>1),O=this.getLineHeight(N),V=0,$=S.actualWidth;if(this.ellipsis)q&&this.truncate(I,q,void 0,0,Math.max(0,P-.8*O),(L,R)=>L.substring(0,R)+"…");else if(X){let L=[],R=[];for(;N.firstChild&&N.firstChild!==I;)R.push(N.firstChild),N.removeChild(N.firstChild);for(;Z.length;)Z.length&&!this.noWrap&&V>0&&(L.push(I.textContent||""),I.textContent=Z.join(" ").replace(/- /g,"-")),this.truncate(I,void 0,Z,V===0&&$||0,P,(G,U)=>Z.slice(0,U).join(" ").replace(/- /g,"-")),$=S.actualWidth,V++;R.forEach(G=>{N.insertBefore(G,I)}),L.forEach(G=>{N.insertBefore(n.createTextNode(G),I);let U=n.createElementNS(p,"tspan");U.textContent="​",g(U,{dy:O,x}),N.insertBefore(U,I)})}},T=I=>{[].slice.call(I.childNodes).forEach(N=>{N.nodeType===m.Node.TEXT_NODE?D(N,I):(N.className.baseVal.indexOf("highcharts-br")!==-1&&(S.actualWidth=0),T(N))})};T(S.element)}getLineHeight(k){let S=k.nodeType===m.Node.TEXT_NODE?k.parentElement:k;return this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(S||this.svgElement.element).h}modifyTree(k){let S=(x,P)=>{let{attributes:D={},children:T,style:I={},tagName:N}=x,q=this.renderer.styledMode;if(N==="b"||N==="strong"?q?D.class="highcharts-strong":I.fontWeight="bold":(N==="i"||N==="em")&&(q?D.class="highcharts-emphasized":I.fontStyle="italic"),I&&I.color&&(I.fill=I.color),N==="br"){D.class="highcharts-br",x.textContent="​";let Z=k[P+1];Z&&Z.textContent&&(Z.textContent=Z.textContent.replace(/^ +/gm,""))}else N==="a"&&T&&T.some(Z=>Z.tagName==="#text")&&(x.children=[{children:T,tagName:"tspan"}]);N!=="#text"&&N!=="a"&&(x.tagName="tspan"),v(x,{attributes:D,style:I}),T&&T.filter(Z=>Z.tagName!=="#text").forEach(S)};k.forEach(S),y(this.svgElement,"afterModifyTree",{nodes:k})}truncate(k,S,x,P,D,T){let I,N,q=this.svgElement,{rotation:Z}=q,X=[],O=x?1:0,V=(S||x||"").length,$=V,L=function(R,G){let U=G||R,B=k.parentNode;if(B&&X[U]===void 0&&B.getSubStringLength)try{X[U]=P+B.getSubStringLength(0,x?U+1:U)}catch{}return X[U]};if(q.rotation=0,P+(N=L(k.textContent.length))>D){for(;O<=V;)$=Math.ceil((O+V)/2),x&&(I=T(x,$)),N=L($,I&&I.length-1),O===V?O=V+1:N>D?V=$-1:O=$;V===0?k.textContent="":S&&V===S.length-1||(k.textContent=I||T(S||x,$))}x&&x.splice(0,$),q.actualWidth=N,q.rotation=Z}unescapeEntities(k,S){return _(this.renderer.escapes,function(x,P){S&&S.indexOf(x)!==-1||(k=k.toString().replace(RegExp(x,"g"),P))}),k}}}),r(t,"Core/Renderer/SVG/SVGRenderer.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Defaults.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Renderer/SVG/SVGLabel.js"],t["Core/Renderer/SVG/Symbols.js"],t["Core/Renderer/SVG/TextBuilder.js"],t["Core/Utilities.js"]],function(s,l,u,n,p,m,g,v,y,C){let _,{defaultOptions:w}=l,{charts:k,deg2rad:S,doc:x,isFirefox:P,isMS:D,isWebKit:T,noop:I,SVG_NS:N,symbolSizes:q,win:Z}=n,{addEvent:X,attr:O,createElement:V,crisp:$,css:L,defined:R,destroyObjectProperties:G,extend:U,isArray:B,isNumber:H,isObject:W,isString:re,merge:de,pick:ie,pInt:oe,replaceNested:Ee,uniqueKey:xe}=C;class Se{constructor(Q,ae,_e,J,ne,ce,ye){let we,ze,Ce=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),Ie=Ce.element;ye||Ce.css(this.getStyle(J||{})),Q.appendChild(Ie),O(Q,"dir","ltr"),Q.innerHTML.indexOf("xmlns")===-1&&O(Ie,"xmlns",this.SVG_NS),this.box=Ie,this.boxWrapper=Ce,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(x.createTextNode("Created with Highcharts 11.4.8")),this.defs=this.createElement("defs").add(),this.allowHTML=ce,this.forExport=ne,this.styledMode=ye,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.rootFontSize=Ce.getStyle("font-size"),this.setSize(ae,_e,!1),P&&Q.getBoundingClientRect&&((we=function(){L(Q,{left:0,top:0}),ze=Q.getBoundingClientRect(),L(Q,{left:Math.ceil(ze.left)-ze.left+"px",top:Math.ceil(ze.top)-ze.top+"px"})})(),this.unSubPixelFix=X(Z,"resize",we))}definition(Q){return new s([Q]).addToDOM(this.defs.element)}getReferenceURL(){if((P||T)&&x.getElementsByTagName("base").length){if(!R(_)){let Q=xe(),ae=new s([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:Q},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":`url(#${Q})`,fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(x.body);L(ae,{position:"fixed",top:0,left:0,zIndex:9e5});let _e=x.elementFromPoint(6,6);_=(_e&&_e.id)==="hitme",x.body.removeChild(ae)}if(_)return Ee(Z.location.href.split("#")[0],[/<[^>]*>/g,""],[/([\('\)])/g,"\\$1"],[/ /g,"%20"])}return""}getStyle(Q){return this.style=U({fontFamily:"Helvetica, Arial, sans-serif",fontSize:"1rem"},Q),this.style}setStyle(Q){this.boxWrapper.css(this.getStyle(Q))}isHidden(){return!this.boxWrapper.getBBox().width}destroy(){let Q=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),G(this.gradients||{}),this.gradients=null,this.defs=Q.destroy(),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null,null}createElement(Q){return new this.Element(this,Q)}getRadialAttr(Q,ae){return{cx:Q[0]-Q[2]/2+(ae.cx||0)*Q[2],cy:Q[1]-Q[2]/2+(ae.cy||0)*Q[2],r:(ae.r||0)*Q[2]}}shadowDefinition(Q){let ae=[`highcharts-drop-shadow-${this.chartIndex}`,...Object.keys(Q).map(J=>`${J}-${Q[J]}`)].join("-").toLowerCase().replace(/[^a-z\d\-]/g,""),_e=de({color:"#000000",offsetX:1,offsetY:1,opacity:.15,width:5},Q);return this.defs.element.querySelector(`#${ae}`)||this.definition({tagName:"filter",attributes:{id:ae,filterUnits:_e.filterUnits},children:this.getShadowFilterContent(_e)}),ae}getShadowFilterContent(Q){return[{tagName:"feDropShadow",attributes:{dx:Q.offsetX,dy:Q.offsetY,"flood-color":Q.color,"flood-opacity":Math.min(5*Q.opacity,1),stdDeviation:Q.width/2}}]}buildText(Q){new y(Q).buildSVG()}getContrast(Q){let ae=u.parse(Q).rgba.map(J=>{let ne=J/255;return ne<=.03928?ne/12.92:Math.pow((ne+.055)/1.055,2.4)}),_e=.2126*ae[0]+.7152*ae[1]+.0722*ae[2];return 1.05/(_e+.05)>(_e+.05)/.05?"#FFFFFF":"#000000"}button(Q,ae,_e,J,ne={},ce,ye,we,ze,Ce){let Ie=this.label(Q,ae,_e,ze,void 0,void 0,Ce,void 0,"button"),Fe=this.styledMode,Ge=arguments,ke=0;ne=de(w.global.buttonTheme,ne),Fe&&(delete ne.fill,delete ne.stroke,delete ne["stroke-width"]);let ge=ne.states||{},fe=ne.style||{};delete ne.states,delete ne.style;let Me=[s.filterUserAttributes(ne)],De=[fe];return Fe||["hover","select","disabled"].forEach((Pe,je)=>{Me.push(de(Me[0],s.filterUserAttributes(Ge[je+5]||ge[Pe]||{}))),De.push(Me[je+1].style),delete Me[je+1].style}),X(Ie.element,D?"mouseover":"mouseenter",function(){ke!==3&&Ie.setState(1)}),X(Ie.element,D?"mouseout":"mouseleave",function(){ke!==3&&Ie.setState(ke)}),Ie.setState=(Pe=0)=>{if(Pe!==1&&(Ie.state=ke=Pe),Ie.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][Pe]),!Fe){Ie.attr(Me[Pe]);let je=De[Pe];W(je)&&Ie.css(je)}},Ie.attr(Me[0]),!Fe&&(Ie.css(U({cursor:"default"},fe)),Ce&&Ie.text.css({pointerEvents:"none"})),Ie.on("touchstart",Pe=>Pe.stopPropagation()).on("click",function(Pe){ke!==3&&J.call(Ie,Pe)})}crispLine(Q,ae){let[_e,J]=Q;return R(_e[1])&&_e[1]===J[1]&&(_e[1]=J[1]=$(_e[1],ae)),R(_e[2])&&_e[2]===J[2]&&(_e[2]=J[2]=$(_e[2],ae)),Q}path(Q){let ae=this.styledMode?{}:{fill:"none"};return B(Q)?ae.d=Q:W(Q)&&U(ae,Q),this.createElement("path").attr(ae)}circle(Q,ae,_e){let J=W(Q)?Q:Q===void 0?{}:{x:Q,y:ae,r:_e},ne=this.createElement("circle");return ne.xSetter=ne.ySetter=function(ce,ye,we){we.setAttribute("c"+ye,ce)},ne.attr(J)}arc(Q,ae,_e,J,ne,ce){let ye;W(Q)?(ae=(ye=Q).y,_e=ye.r,J=ye.innerR,ne=ye.start,ce=ye.end,Q=ye.x):ye={innerR:J,start:ne,end:ce};let we=this.symbol("arc",Q,ae,_e,_e,ye);return we.r=_e,we}rect(Q,ae,_e,J,ne,ce){let ye=W(Q)?Q:Q===void 0?{}:{x:Q,y:ae,r:ne,width:Math.max(_e||0,0),height:Math.max(J||0,0)},we=this.createElement("rect");return this.styledMode||(ce!==void 0&&(ye["stroke-width"]=ce,U(ye,we.crisp(ye))),ye.fill="none"),we.rSetter=function(ze,Ce,Ie){we.r=ze,O(Ie,{rx:ze,ry:ze})},we.rGetter=function(){return we.r||0},we.attr(ye)}roundedRect(Q){return this.symbol("roundedRect").attr(Q)}setSize(Q,ae,_e){this.width=Q,this.height=ae,this.boxWrapper.animate({width:Q,height:ae},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:ie(_e,!0)?void 0:0}),this.alignElements()}g(Q){let ae=this.createElement("g");return Q?ae.attr({class:"highcharts-"+Q}):ae}image(Q,ae,_e,J,ne,ce){let ye={preserveAspectRatio:"none"};H(ae)&&(ye.x=ae),H(_e)&&(ye.y=_e),H(J)&&(ye.width=J),H(ne)&&(ye.height=ne);let we=this.createElement("image").attr(ye),ze=function(Ce){we.attr({href:Q}),ce.call(we,Ce)};if(ce){we.attr({href:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="});let Ce=new Z.Image;X(Ce,"load",ze),Ce.src=Q,Ce.complete&&ze({})}else we.attr({href:Q});return we}symbol(Q,ae,_e,J,ne,ce){let ye,we,ze,Ce,Ie=this,Fe=/^url\((.*?)\)$/,Ge=Fe.test(Q),ke=!Ge&&(this.symbols[Q]?Q:"circle"),ge=ke&&this.symbols[ke];if(ge)typeof ae=="number"&&(we=ge.call(this.symbols,ae||0,_e||0,J||0,ne||0,ce)),ye=this.path(we),Ie.styledMode||ye.attr("fill","none"),U(ye,{symbolName:ke||void 0,x:ae,y:_e,width:J,height:ne}),ce&&U(ye,ce);else if(Ge){ze=Q.match(Fe)[1];let fe=ye=this.image(ze);fe.imgwidth=ie(ce&&ce.width,q[ze]&&q[ze].width),fe.imgheight=ie(ce&&ce.height,q[ze]&&q[ze].height),Ce=Me=>Me.attr({width:Me.width,height:Me.height}),["width","height"].forEach(Me=>{fe[`${Me}Setter`]=function(De,Pe){this[Pe]=De;let{alignByTranslate:je,element:Xe,width:et,height:nt,imgwidth:ht,imgheight:gt}=this,wt=Pe==="width"?ht:gt,Rt=1;ce&&ce.backgroundSize==="within"&&et&&nt&&ht&&gt?(Rt=Math.min(et/ht,nt/gt),O(Xe,{width:Math.round(ht*Rt),height:Math.round(gt*Rt)})):Xe&&wt&&Xe.setAttribute(Pe,wt),!je&&ht&&gt&&this.translate(((et||0)-ht*Rt)/2,((nt||0)-gt*Rt)/2)}}),R(ae)&&fe.attr({x:ae,y:_e}),fe.isImg=!0,fe.symbolUrl=Q,R(fe.imgwidth)&&R(fe.imgheight)?Ce(fe):(fe.attr({width:0,height:0}),V("img",{onload:function(){let Me=k[Ie.chartIndex];this.width===0&&(L(this,{position:"absolute",top:"-999em"}),x.body.appendChild(this)),q[ze]={width:this.width,height:this.height},fe.imgwidth=this.width,fe.imgheight=this.height,fe.element&&Ce(fe),this.parentNode&&this.parentNode.removeChild(this),Ie.imgCount--,Ie.imgCount||!Me||Me.hasLoaded||Me.onload()},src:ze}),this.imgCount++)}return ye}clipRect(Q,ae,_e,J){return this.rect(Q,ae,_e,J,0)}text(Q,ae,_e,J){let ne={};if(J&&(this.allowHTML||!this.forExport))return this.html(Q,ae,_e);ne.x=Math.round(ae||0),_e&&(ne.y=Math.round(_e)),R(Q)&&(ne.text=Q);let ce=this.createElement("text").attr(ne);return J&&(!this.forExport||this.allowHTML)||(ce.xSetter=function(ye,we,ze){let Ce=ze.getElementsByTagName("tspan"),Ie=ze.getAttribute(we);for(let Fe=0,Ge;Fe<Ce.length;Fe++)(Ge=Ce[Fe]).getAttribute(we)===Ie&&Ge.setAttribute(we,ye);ze.setAttribute(we,ye)}),ce}fontMetrics(Q){let ae=oe(m.prototype.getStyle.call(Q,"font-size")||0),_e=ae<24?ae+3:Math.round(1.2*ae),J=Math.round(.8*_e);return{h:_e,b:J,f:ae}}rotCorr(Q,ae,_e){let J=Q;return ae&&_e&&(J=Math.max(J*Math.cos(ae*S),4)),{x:-Q/3*Math.sin(ae*S),y:J}}pathToSegments(Q){let ae=[],_e=[],J={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2};for(let ne=0;ne<Q.length;ne++)re(_e[0])&&H(Q[ne])&&_e.length===J[_e[0].toUpperCase()]&&Q.splice(ne,0,_e[0].replace("M","L").replace("m","l")),typeof Q[ne]=="string"&&(_e.length&&ae.push(_e.slice(0)),_e.length=0),_e.push(Q[ne]);return ae.push(_e.slice(0)),ae}label(Q,ae,_e,J,ne,ce,ye,we,ze){return new g(this,Q,ae,_e,J,ne,ce,ye,we,ze)}alignElements(){this.alignedObjects.forEach(Q=>Q.align())}}return U(Se.prototype,{Element:m,SVG_NS:N,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:v,draw:I}),p.registerRendererType("svg",Se,!0),Se}),r(t,"Core/Renderer/HTML/HTMLElement.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(s,l,u,n){let{composed:p}=l,{attr:m,css:g,createElement:v,defined:y,extend:C,pInt:_,pushUnique:w}=n;function k(D,T,I){var q;let N=((q=this.div)==null?void 0:q.style)||I.style;u.prototype[`${T}Setter`].call(this,D,T,I),N&&(N[T]=D)}let S=(D,T)=>{var I;if(!D.div){let N=m(D.element,"class"),q=D.css,Z=v("div",N?{className:N}:void 0,{position:"absolute",left:`${D.translateX||0}px`,top:`${D.translateY||0}px`,...D.styles,display:D.display,opacity:D.opacity,visibility:D.visibility},((I=D.parentGroup)==null?void 0:I.div)||T);D.classSetter=(X,O,V)=>{V.setAttribute("class",X),Z.className=X},D.translateXSetter=D.translateYSetter=(X,O)=>{D[O]=X,Z.style[O==="translateX"?"left":"top"]=`${X}px`,D.doTransform=!0},D.opacitySetter=D.visibilitySetter=k,D.css=X=>(q.call(D,X),X.cursor&&(Z.style.cursor=X.cursor),X.pointerEvents&&(Z.style.pointerEvents=X.pointerEvents),D),D.on=function(){return u.prototype.on.apply({element:Z,onEvents:D.onEvents},arguments),D},D.div=Z}return D.div};class x extends u{static compose(T){w(p,this.compose)&&(T.prototype.html=function(I,N,q){return new x(this,"span").attr({text:I,x:Math.round(N),y:Math.round(q)})})}constructor(T,I){super(T,I),this.css({position:"absolute",...T.styledMode?{}:{fontFamily:T.style.fontFamily,fontSize:T.style.fontSize}}),this.element.style.whiteSpace="nowrap"}getSpanCorrection(T,I,N){this.xCorr=-T*N,this.yCorr=-I}css(T){let I,{element:N}=this,q=N.tagName==="SPAN"&&T&&"width"in T,Z=q&&T.width;return q&&(delete T.width,this.textWidth=_(Z)||void 0,I=!0),(T==null?void 0:T.textOverflow)==="ellipsis"&&(T.whiteSpace="nowrap",T.overflow="hidden"),C(this.styles,T),g(N,T),I&&this.updateTransform(),this}htmlGetBBox(){let{element:T}=this;return{x:T.offsetLeft,y:T.offsetTop,width:T.offsetWidth,height:T.offsetHeight}}updateTransform(){var H;if(!this.added){this.alignOnAdd=!0;return}let{element:T,renderer:I,rotation:N,rotationOriginX:q,rotationOriginY:Z,styles:X,textAlign:O="left",textWidth:V,translateX:$=0,translateY:L=0,x:R=0,y:G=0}=this,U={left:0,center:.5,right:1}[O],B=X.whiteSpace;if(g(T,{marginLeft:`${$}px`,marginTop:`${L}px`}),T.tagName==="SPAN"){let W=[N,O,T.innerHTML,V,this.textAlign].join(","),re=-(((H=this.parentGroup)==null?void 0:H.padding)*1)||0,de,ie=!1;if(V!==this.oldTextWidth){let K=this.textPxLength?this.textPxLength:(g(T,{width:"",whiteSpace:B||"nowrap"}),T.offsetWidth),Q=V||0;(Q>this.oldTextWidth||K>Q)&&(/[ \-]/.test(T.textContent||T.innerText)||T.style.textOverflow==="ellipsis")&&(g(T,{width:K>Q||N?V+"px":"auto",display:"block",whiteSpace:B||"normal"}),this.oldTextWidth=V,ie=!0)}this.hasBoxWidthChanged=ie,W!==this.cTT&&(de=I.fontMetrics(T).b,y(N)&&(N!==(this.oldRotation||0)||O!==this.oldAlign)&&this.setSpanRotation(N,re,re),this.getSpanCorrection(!y(N)&&this.textPxLength||T.offsetWidth,de,U));let{xCorr:oe=0,yCorr:Ee=0}=this,xe=(q??R)-oe-R-re,Se=(Z??G)-Ee-G-re;g(T,{left:`${R+oe}px`,top:`${G+Ee}px`,transformOrigin:`${xe}px ${Se}px`}),this.cTT=W,this.oldRotation=N,this.oldAlign=O}}setSpanRotation(T,I,N){g(this.element,{transform:`rotate(${T}deg)`,transformOrigin:`${I}% ${N}px`})}add(T){let I,N=this.renderer.box.parentNode,q=[];if(this.parentGroup=T,T&&!(I=T.div)){let Z=T;for(;Z;)q.push(Z),Z=Z.parentGroup;for(let X of q.reverse())I=S(X,N)}return(I||N).appendChild(this.element),this.added=!0,this.alignOnAdd&&this.updateTransform(),this}textSetter(T){T!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,s.setElementHTML(this.element,T??""),this.textStr=T,this.doTransform=!0)}alignSetter(T){this.alignValue=this.textAlign=T,this.doTransform=!0}xSetter(T,I){this[I]=T,this.doTransform=!0}}let P=x.prototype;return P.visibilitySetter=P.opacitySetter=k,P.ySetter=P.rotationSetter=P.rotationOriginXSetter=P.rotationOriginYSetter=P.xSetter,x}),r(t,"Core/Axis/AxisDefaults.js",[],function(){var s,l;return(l=s||(s={})).xAxis={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%H:%M:%S.%L",range:!1},second:{main:"%H:%M:%S",range:!1},minute:{main:"%H:%M",range:!1},hour:{main:"%H:%M",range:!1},day:{main:"%e %b"},week:{main:"%e %b"},month:{main:"%b '%y"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotationLimit:80,distance:15,enabled:!0,indentation:10,overflow:"justify",reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,zIndex:7,style:{color:"#333333",cursor:"default",fontSize:"0.8em"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minorTicksPerMajor:5,minPadding:.01,offset:void 0,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",useHTML:!1,x:0,y:0,style:{color:"#666666",fontSize:"0.8em"}},visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#333333",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#333333"},l.yAxis={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:void 0},startOnTick:!0,title:{text:"Values"},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){let{numberFormatter:u}=this.axis.chart;return u(this.total||0,-1)},style:{color:"#000000",fontSize:"0.7em",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},s}),r(t,"Core/Foundation.js",[t["Core/Utilities.js"]],function(s){var l;let{addEvent:u,isFunction:n,objectEach:p,removeEvent:m}=s;return(l||(l={})).registerEventOptions=function(g,v){g.eventOptions=g.eventOptions||{},p(v.events,function(y,C){g.eventOptions[C]!==y&&(g.eventOptions[C]&&(m(g,C,g.eventOptions[C]),delete g.eventOptions[C]),n(y)&&(g.eventOptions[C]=y,u(g,C,y,{order:0})))})},l}),r(t,"Core/Axis/Tick.js",[t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){let{deg2rad:n}=l,{clamp:p,correctFloat:m,defined:g,destroyObjectProperties:v,extend:y,fireEvent:C,isNumber:_,merge:w,objectEach:k,pick:S}=u;return class{constructor(x,P,D,T,I){this.isNew=!0,this.isNewLabel=!0,this.axis=x,this.pos=P,this.type=D||"",this.parameters=I||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,C(this,"init"),D||T||this.addLabel()}addLabel(){let x=this,P=x.axis,D=P.options,T=P.chart,I=P.categories,N=P.logarithmic,q=P.names,Z=x.pos,X=S(x.options&&x.options.labels,D.labels),O=P.tickPositions,V=Z===O[0],$=Z===O[O.length-1],L=(!X.step||X.step===1)&&P.tickInterval===1,R=O.info,G=x.label,U,B,H,W=this.parameters.category||(I?S(I[Z],q[Z],Z):Z);N&&_(W)&&(W=m(N.lin2log(W))),P.dateTime&&(R?U=(B=T.time.resolveDTLFormat(D.dateTimeLabelFormats[!D.grid&&R.higherRanks[Z]||R.unitName])).main:_(W)&&(U=P.dateTime.getXDateFormat(W,D.dateTimeLabelFormats||{}))),x.isFirst=V,x.isLast=$;let re={axis:P,chart:T,dateTimeLabelFormat:U,isFirst:V,isLast:$,pos:Z,tick:x,tickPositionInfo:R,value:W};C(this,"labelFormat",re);let de=Ee=>X.formatter?X.formatter.call(Ee,Ee):X.format?(Ee.text=P.defaultLabelFormatter.call(Ee),s.format(X.format,Ee,T)):P.defaultLabelFormatter.call(Ee),ie=de.call(re,re),oe=B&&B.list;oe?x.shortenLabel=function(){for(H=0;H<oe.length;H++)if(y(re,{dateTimeLabelFormat:oe[H]}),G.attr({text:de.call(re,re)}),G.getBBox().width<P.getSlotWidth(x)-2*(X.padding||0))return;G.attr({text:""})}:x.shortenLabel=void 0,L&&P._addedPlotLB&&x.moveLabel(ie,X),g(G)||x.movedLabel?G&&G.textStr!==ie&&!L&&(!G.textWidth||X.style.width||G.styles.width||G.css({width:null}),G.attr({text:ie}),G.textPxLength=G.getBBox().width):(x.label=G=x.createLabel(ie,X),x.rotation=0)}createLabel(x,P,D){let T=this.axis,I=T.chart,N=g(x)&&P.enabled?I.renderer.text(x,D==null?void 0:D.x,D==null?void 0:D.y,P.useHTML).add(T.labelGroup):void 0;return N&&(I.styledMode||N.css(w(P.style)),N.textPxLength=N.getBBox().width),N}destroy(){v(this,this.axis)}getPosition(x,P,D,T){let I=this.axis,N=I.chart,q=T&&N.oldChartHeight||N.chartHeight,Z={x:x?m(I.translate(P+D,void 0,void 0,T)+I.transB):I.left+I.offset+(I.opposite?(T&&N.oldChartWidth||N.chartWidth)-I.right-I.left:0),y:x?q-I.bottom+I.offset-(I.opposite?I.height:0):m(q-I.translate(P+D,void 0,void 0,T)-I.transB)};return Z.y=p(Z.y,-1e9,1e9),C(this,"afterGetPosition",{pos:Z}),Z}getLabelPosition(x,P,D,T,I,N,q,Z){let X,O,V=this.axis,$=V.transA,L=V.isLinked&&V.linkedParent?V.linkedParent.reversed:V.reversed,R=V.staggerLines,G=V.tickRotCorr||{x:0,y:0},U=T||V.reserveSpaceDefault?0:-V.labelOffset*(V.labelAlign==="center"?.5:1),B=I.distance,H={};return X=V.side===0?D.rotation?-B:-D.getBBox().height:V.side===2?G.y+B:Math.cos(D.rotation*n)*(G.y-D.getBBox(!1,0).height/2),g(I.y)&&(X=V.side===0&&V.horiz?I.y+X:I.y),x=x+S(I.x,[0,1,0,-1][V.side]*B)+U+G.x-(N&&T?N*$*(L?-1:1):0),P=P+X-(N&&!T?N*$*(L?1:-1):0),R&&(O=q/(Z||1)%R,V.opposite&&(O=R-O-1),P+=O*(V.labelOffset/R)),H.x=x,H.y=Math.round(P),C(this,"afterGetLabelPosition",{pos:H,tickmarkOffset:N,index:q}),H}getLabelSize(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0}getMarkPath(x,P,D,T,I=!1,N){return N.crispLine([["M",x,P],["L",x+(I?0:-D),P+(I?D:0)]],T)}handleOverflow(x){let P=this.axis,D=P.options.labels,T=x.x,I=P.chart.chartWidth,N=P.chart.spacing,q=S(P.labelLeft,Math.min(P.pos,N[3])),Z=S(P.labelRight,Math.max(P.isRadial?0:P.pos+P.len,I-N[1])),X=this.label,O=this.rotation,V={left:0,center:.5,right:1}[P.labelAlign||X.attr("align")],$=X.getBBox().width,L=P.getSlotWidth(this),R={},G=L,U=1,B,H,W;O||D.overflow!=="justify"?O<0&&T-V*$<q?W=Math.round(T/Math.cos(O*n)-q):O>0&&T+V*$>Z&&(W=Math.round((I-T)/Math.cos(O*n))):(B=T-V*$,H=T+(1-V)*$,B<q?G=x.x+G*(1-V)-q:H>Z&&(G=Z-x.x+G*V,U=-1),(G=Math.min(L,G))<L&&P.labelAlign==="center"&&(x.x+=U*(L-G-V*(L-Math.min($,G)))),($>G||P.autoRotation&&(X.styles||{}).width)&&(W=G)),W&&(this.shortenLabel?this.shortenLabel():(R.width=Math.floor(W)+"px",(D.style||{}).textOverflow||(R.textOverflow="ellipsis"),X.css(R)))}moveLabel(x,P){let D=this,T=D.label,I=D.axis,N=!1,q;T&&T.textStr===x?(D.movedLabel=T,N=!0,delete D.label):k(I.ticks,function(Z){N||Z.isNew||Z===D||!Z.label||Z.label.textStr!==x||(D.movedLabel=Z.label,N=!0,Z.labelPos=D.movedLabel.xy,delete Z.label)}),!N&&(D.labelPos||T)&&(q=D.labelPos||T.xy,D.movedLabel=D.createLabel(x,P,q),D.movedLabel&&D.movedLabel.attr({opacity:0}))}render(x,P,D){let T=this.axis,I=T.horiz,N=this.pos,q=S(this.tickmarkOffset,T.tickmarkOffset),Z=this.getPosition(I,N,q,P),X=Z.x,O=Z.y,V=T.pos,$=V+T.len,L=I?X:O;!T.chart.polar&&this.isNew&&(m(L)<V||L>$)&&(D=0);let R=S(D,this.label&&this.label.newOpacity,1);D=S(D,1),this.isActive=!0,this.renderGridLine(P,D),this.renderMark(Z,D),this.renderLabel(Z,P,R,x),this.isNew=!1,C(this,"afterRender")}renderGridLine(x,P){let D=this.axis,T=D.options,I={},N=this.pos,q=this.type,Z=S(this.tickmarkOffset,D.tickmarkOffset),X=D.chart.renderer,O=this.gridLine,V,$=T.gridLineWidth,L=T.gridLineColor,R=T.gridLineDashStyle;this.type==="minor"&&($=T.minorGridLineWidth,L=T.minorGridLineColor,R=T.minorGridLineDashStyle),O||(D.chart.styledMode||(I.stroke=L,I["stroke-width"]=$||0,I.dashstyle=R),q||(I.zIndex=1),x&&(P=0),this.gridLine=O=X.path().attr(I).addClass("highcharts-"+(q?q+"-":"")+"grid-line").add(D.gridGroup)),O&&(V=D.getPlotLinePath({value:N+Z,lineWidth:O.strokeWidth(),force:"pass",old:x,acrossPanes:!1}))&&O[x||this.isNew?"attr":"animate"]({d:V,opacity:P})}renderMark(x,P){let D=this.axis,T=D.options,I=D.chart.renderer,N=this.type,q=D.tickSize(N?N+"Tick":"tick"),Z=x.x,X=x.y,O=S(T[N!=="minor"?"tickWidth":"minorTickWidth"],!N&&D.isXAxis?1:0),V=T[N!=="minor"?"tickColor":"minorTickColor"],$=this.mark,L=!$;q&&(D.opposite&&(q[0]=-q[0]),$||(this.mark=$=I.path().addClass("highcharts-"+(N?N+"-":"")+"tick").add(D.axisGroup),D.chart.styledMode||$.attr({stroke:V,"stroke-width":O})),$[L?"attr":"animate"]({d:this.getMarkPath(Z,X,q[0],$.strokeWidth(),D.horiz,I),opacity:P}))}renderLabel(x,P,D,T){let I=this.axis,N=I.horiz,q=I.options,Z=this.label,X=q.labels,O=X.step,V=S(this.tickmarkOffset,I.tickmarkOffset),$=x.x,L=x.y,R=!0;Z&&_($)&&(Z.xy=x=this.getLabelPosition($,L,Z,N,X,V,T,O),(!this.isFirst||this.isLast||q.showFirstLabel)&&(!this.isLast||this.isFirst||q.showLastLabel)?!N||X.step||X.rotation||P||D===0||this.handleOverflow(x):R=!1,O&&T%O&&(R=!1),R&&_(x.y)?(x.opacity=D,Z[this.isNewLabel?"attr":"animate"](x).show(!0),this.isNewLabel=!1):(Z.hide(),this.isNewLabel=!0))}replaceMovedLabel(){let x=this.label,P=this.axis;x&&!this.isNew&&(x.animate({opacity:0},void 0,x.destroy),delete this.label),P.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel}}}),r(t,"Core/Axis/Axis.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/AxisDefaults.js"],t["Core/Color/Color.js"],t["Core/Defaults.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Axis/Tick.js"],t["Core/Utilities.js"]],function(s,l,u,n,p,m,g,v){let{animObject:y}=s,{xAxis:C,yAxis:_}=l,{defaultOptions:w}=n,{registerEventOptions:k}=p,{deg2rad:S}=m,{arrayMax:x,arrayMin:P,clamp:D,correctFloat:T,defined:I,destroyObjectProperties:N,erase:q,error:Z,extend:X,fireEvent:O,getClosestDistance:V,insertItem:$,isArray:L,isNumber:R,isString:G,merge:U,normalizeTickInterval:B,objectEach:H,pick:W,relativeLength:re,removeEvent:de,splat:ie,syncTimeout:oe}=v,Ee=(Se,K)=>B(K,void 0,void 0,W(Se.options.allowDecimals,K<.5||Se.tickAmount!==void 0),!!Se.tickAmount);X(w,{xAxis:C,yAxis:U(C,_)});class xe{constructor(K,Q,ae){this.init(K,Q,ae)}init(K,Q,ae=this.coll){let _e=ae==="xAxis",J=this.isZAxis||(K.inverted?!_e:_e);this.chart=K,this.horiz=J,this.isXAxis=_e,this.coll=ae,O(this,"init",{userOptions:Q}),this.opposite=W(Q.opposite,this.opposite),this.side=W(Q.side,this.side,J?this.opposite?0:2:this.opposite?1:3),this.setOptions(Q);let ne=this.options,ce=ne.labels;this.type??(this.type=ne.type||"linear"),this.uniqueNames??(this.uniqueNames=ne.uniqueNames??!0),O(this,"afterSetType"),this.userOptions=Q,this.minPixelPadding=0,this.reversed=W(ne.reversed,this.reversed),this.visible=ne.visible,this.zoomEnabled=ne.zoomEnabled,this.hasNames=this.type==="category"||ne.categories===!0,this.categories=L(ne.categories)&&ne.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=I(ne.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len??(this.len=0),this.minRange=this.userMinRange=ne.minRange||ne.maxZoom,this.range=ne.range,this.offset=ne.offset||0,this.max=void 0,this.min=void 0;let ye=W(ne.crosshair,ie(K.options.tooltip.crosshairs)[_e?0:1]);this.crosshair=ye===!0?{}:ye,K.axes.indexOf(this)===-1&&(_e?K.axes.splice(K.xAxis.length,0,this):K.axes.push(this),$(this,K[this.coll])),K.orderItems(this.coll),this.series=this.series||[],K.inverted&&!this.isZAxis&&_e&&!I(this.reversed)&&(this.reversed=!0),this.labelRotation=R(ce.rotation)?ce.rotation:void 0,k(this,ne),O(this,"afterInit")}setOptions(K){let Q=this.horiz?{labels:{autoRotation:[-45],padding:4},margin:15}:{labels:{padding:1},title:{rotation:90*this.side}};this.options=U(Q,w[this.coll],K),O(this,"afterSetOptions",{userOptions:K})}defaultLabelFormatter(){let K=this.axis,{numberFormatter:Q}=this.chart,ae=R(this.value)?this.value:NaN,_e=K.chart.time,J=K.categories,ne=this.dateTimeLabelFormat,ce=w.lang,ye=ce.numericSymbols,we=ce.numericSymbolMagnitude||1e3,ze=K.logarithmic?Math.abs(ae):K.tickInterval,Ce=ye&&ye.length,Ie,Fe;if(J)Fe=`${this.value}`;else if(ne)Fe=_e.dateFormat(ne,ae);else if(Ce&&ye&&ze>=1e3)for(;Ce--&&Fe===void 0;)ze>=(Ie=Math.pow(we,Ce+1))&&10*ae%Ie==0&&ye[Ce]!==null&&ae!==0&&(Fe=Q(ae/Ie,-1)+ye[Ce]);return Fe===void 0&&(Fe=Math.abs(ae)>=1e4?Q(ae,-1):Q(ae,-1,void 0,"")),Fe}getSeriesExtremes(){let K,Q=this;O(this,"getSeriesExtremes",null,function(){Q.hasVisibleSeries=!1,Q.dataMin=Q.dataMax=Q.threshold=void 0,Q.softThreshold=!Q.isXAxis,Q.series.forEach(ae=>{if(ae.reserveSpace()){let _e=ae.options,J,ne=_e.threshold,ce,ye;if(Q.hasVisibleSeries=!0,Q.positiveValuesOnly&&0>=(ne||0)&&(ne=void 0),Q.isXAxis)(J=ae.xData)&&J.length&&(J=Q.logarithmic?J.filter(we=>we>0):J,ce=(K=ae.getXExtremes(J)).min,ye=K.max,R(ce)||ce instanceof Date||(J=J.filter(R),ce=(K=ae.getXExtremes(J)).min,ye=K.max),J.length&&(Q.dataMin=Math.min(W(Q.dataMin,ce),ce),Q.dataMax=Math.max(W(Q.dataMax,ye),ye)));else{let we=ae.applyExtremes();R(we.dataMin)&&(ce=we.dataMin,Q.dataMin=Math.min(W(Q.dataMin,ce),ce)),R(we.dataMax)&&(ye=we.dataMax,Q.dataMax=Math.max(W(Q.dataMax,ye),ye)),I(ne)&&(Q.threshold=ne),(!_e.softThreshold||Q.positiveValuesOnly)&&(Q.softThreshold=!1)}}})}),O(this,"afterGetSeriesExtremes")}translate(K,Q,ae,_e,J,ne){var ke;let ce=this.linkedParent||this,ye=_e&&ce.old?ce.old.min:ce.min;if(!R(ye))return NaN;let we=ce.minPixelPadding,ze=(ce.isOrdinal||((ke=ce.brokenAxis)==null?void 0:ke.hasBreaks)||ce.logarithmic&&J)&&ce.lin2val,Ce=1,Ie=0,Fe=_e&&ce.old?ce.old.transA:ce.transA,Ge=0;return Fe||(Fe=ce.transA),ae&&(Ce*=-1,Ie=ce.len),ce.reversed&&(Ce*=-1,Ie-=Ce*(ce.sector||ce.len)),Q?(Ge=(K=K*Ce+Ie-we)/Fe+ye,ze&&(Ge=ce.lin2val(Ge))):(ze&&(K=ce.val2lin(K)),Ge=Ce*(K-ye)*Fe+Ie+Ce*we+(R(ne)?Fe*ne:0),ce.isRadial||(Ge=T(Ge))),Ge}toPixels(K,Q){return this.translate(K,!1,!this.horiz,void 0,!0)+(Q?0:this.pos)}toValue(K,Q){return this.translate(K-(Q?0:this.pos),!0,!this.horiz,void 0,!0)}getPlotLinePath(K){let Q=this,ae=Q.chart,_e=Q.left,J=Q.top,ne=K.old,ce=K.value,ye=K.lineWidth,we=ne&&ae.oldChartHeight||ae.chartHeight,ze=ne&&ae.oldChartWidth||ae.chartWidth,Ce=Q.transB,Ie=K.translatedValue,Fe=K.force,Ge,ke,ge,fe,Me;function De(je,Xe,et){return Fe!=="pass"&&(je<Xe||je>et)&&(Fe?je=D(je,Xe,et):Me=!0),je}let Pe={value:ce,lineWidth:ye,old:ne,force:Fe,acrossPanes:K.acrossPanes,translatedValue:Ie};return O(this,"getPlotLinePath",Pe,function(je){Ge=ge=(Ie=D(Ie=W(Ie,Q.translate(ce,void 0,void 0,ne)),-1e9,1e9))+Ce,ke=fe=we-Ie-Ce,R(Ie)?Q.horiz?(ke=J,fe=we-Q.bottom+(Q.options.isInternal?0:ae.scrollablePixelsY||0),Ge=ge=De(Ge,_e,_e+Q.width)):(Ge=_e,ge=ze-Q.right+(ae.scrollablePixelsX||0),ke=fe=De(ke,J,J+Q.height)):(Me=!0,Fe=!1),je.path=Me&&!Fe?void 0:ae.renderer.crispLine([["M",Ge,ke],["L",ge,fe]],ye||1)}),Pe.path}getLinearTickPositions(K,Q,ae){let _e,J,ne,ce=T(Math.floor(Q/K)*K),ye=T(Math.ceil(ae/K)*K),we=[];if(T(ce+K)===ce&&(ne=20),this.single)return[Q];for(_e=ce;_e<=ye&&(we.push(_e),(_e=T(_e+K,ne))!==J);)J=_e;return we}getMinorTickInterval(){let{minorTicks:K,minorTickInterval:Q}=this.options;return K===!0?W(Q,"auto"):K!==!1?Q:void 0}getMinorTickPositions(){let K=this.options,Q=this.tickPositions,ae=this.minorTickInterval,_e=this.pointRangePadding||0,J=(this.min||0)-_e,ne=(this.max||0)+_e,ce=ne-J,ye=[],we;if(ce&&ce/ae<this.len/3){let ze=this.logarithmic;if(ze)this.paddedTicks.forEach(function(Ce,Ie,Fe){Ie&&ye.push.apply(ye,ze.getLogTickPositions(ae,Fe[Ie-1],Fe[Ie],!0))});else if(this.dateTime&&this.getMinorTickInterval()==="auto")ye=ye.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(ae),J,ne,K.startOfWeek));else for(we=J+(Q[0]-J)%ae;we<=ne&&we!==ye[0];we+=ae)ye.push(we)}return ye.length!==0&&this.trimTicks(ye),ye}adjustForMinRange(){let K=this.options,Q=this.logarithmic,{max:ae,min:_e,minRange:J}=this,ne,ce,ye,we;this.isXAxis&&J===void 0&&!Q&&(J=I(K.min)||I(K.max)||I(K.floor)||I(K.ceiling)?null:Math.min(5*(V(this.series.map(ze=>{var Ce;return(ze.xIncrement?(Ce=ze.xData)==null?void 0:Ce.slice(0,2):ze.xData)||[]}))||0),this.dataMax-this.dataMin)),R(ae)&&R(_e)&&R(J)&&ae-_e<J&&(ce=this.dataMax-this.dataMin>=J,ne=(J-ae+_e)/2,ye=[_e-ne,W(K.min,_e-ne)],ce&&(ye[2]=Q?Q.log2lin(this.dataMin):this.dataMin),we=[(_e=x(ye))+J,W(K.max,_e+J)],ce&&(we[2]=Q?Q.log2lin(this.dataMax):this.dataMax),(ae=P(we))-_e<J&&(ye[0]=ae-J,ye[1]=W(K.min,ae-J),_e=x(ye))),this.minRange=J,this.min=_e,this.max=ae}getClosest(){let K,Q;if(this.categories)Q=1;else{let ae=[];this.series.forEach(function(_e){var ne;let J=_e.closestPointRange;((ne=_e.xData)==null?void 0:ne.length)===1?ae.push(_e.xData[0]):!_e.noSharedTooltip&&I(J)&&_e.reserveSpace()&&(Q=I(Q)?Math.min(Q,J):J)}),ae.length&&(ae.sort((_e,J)=>_e-J),K=V([ae]))}return K&&Q?Math.min(K,Q):K||Q}nameToX(K){let Q=L(this.options.categories),ae=Q?this.categories:this.names,_e=K.options.x,J;return K.series.requireSorting=!1,I(_e)||(_e=this.uniqueNames&&ae?Q?ae.indexOf(K.name):W(ae.keys[K.name],-1):K.series.autoIncrement()),_e===-1?!Q&&ae&&(J=ae.length):J=_e,J!==void 0?(this.names[J]=K.name,this.names.keys[K.name]=J):K.x&&(J=K.x),J}updateNames(){let K=this,Q=this.names;Q.length>0&&(Object.keys(Q.keys).forEach(function(ae){delete Q.keys[ae]}),Q.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach(ae=>{ae.xIncrement=null,(!ae.points||ae.isDirtyData)&&(K.max=Math.max(K.max,ae.xData.length-1),ae.processData(),ae.generatePoints()),ae.data.forEach(function(_e,J){let ne;_e!=null&&_e.options&&_e.name!==void 0&&(ne=K.nameToX(_e))!==void 0&&ne!==_e.x&&(_e.x=ne,ae.xData[J]=ne)})}))}setAxisTranslation(){let K=this,Q=K.max-K.min,ae=K.linkedParent,_e=!!K.categories,J=K.isXAxis,ne=K.axisPointRange||0,ce,ye=0,we=0,ze,Ce=K.transA;(J||_e||ne)&&(ce=K.getClosest(),ae?(ye=ae.minPointOffset,we=ae.pointRangePadding):K.series.forEach(function(Ie){let Fe=_e?1:J?W(Ie.options.pointRange,ce,0):K.axisPointRange||0,Ge=Ie.options.pointPlacement;if(ne=Math.max(ne,Fe),!K.single||_e){let ke=Ie.is("xrange")?!J:J;ye=Math.max(ye,ke&&G(Ge)?0:Fe/2),we=Math.max(we,ke&&Ge==="on"?0:Fe)}}),ze=K.ordinal&&K.ordinal.slope&&ce?K.ordinal.slope/ce:1,K.minPointOffset=ye*=ze,K.pointRangePadding=we*=ze,K.pointRange=Math.min(ne,K.single&&_e?1:Q),J&&ce&&(K.closestPointRange=ce)),K.translationSlope=K.transA=Ce=K.staticScale||K.len/(Q+we||1),K.transB=K.horiz?K.left:K.bottom,K.minPixelPadding=Ce*ye,O(this,"afterSetAxisTranslation")}minFromRange(){let{max:K,min:Q}=this;return R(K)&&R(Q)&&K-Q||void 0}setTickInterval(K){var St,Ct,si,di;let{categories:Q,chart:ae,dataMax:_e,dataMin:J,dateTime:ne,isXAxis:ce,logarithmic:ye,options:we,softThreshold:ze}=this,Ce=R(this.threshold)?this.threshold:void 0,Ie=this.minRange||0,{ceiling:Fe,floor:Ge,linkedTo:ke,softMax:ge,softMin:fe}=we,Me=R(ke)&&((St=ae[this.coll])==null?void 0:St[ke]),De=we.tickPixelInterval,Pe=we.maxPadding,je=we.minPadding,Xe=0,et,nt=R(we.tickInterval)&&we.tickInterval>=0?we.tickInterval:void 0,ht,gt,wt,Rt;if(ne||Q||Me||this.getTickAmount(),wt=W(this.userMin,we.min),Rt=W(this.userMax,we.max),Me?(this.linkedParent=Me,et=Me.getExtremes(),this.min=W(et.min,et.dataMin),this.max=W(et.max,et.dataMax),this.type!==Me.type&&Z(11,!0,ae)):(ze&&I(Ce)&&R(_e)&&R(J)&&(J>=Ce?(ht=Ce,je=0):_e<=Ce&&(gt=Ce,Pe=0)),this.min=W(wt,ht,J),this.max=W(Rt,gt,_e)),R(this.max)&&R(this.min)&&(ye&&(this.positiveValuesOnly&&!K&&0>=Math.min(this.min,W(J,this.min))&&Z(10,!0,ae),this.min=T(ye.log2lin(this.min),16),this.max=T(ye.log2lin(this.max),16)),this.range&&R(J)&&(this.userMin=this.min=wt=Math.max(J,this.minFromRange()||0),this.userMax=Rt=this.max,this.range=void 0)),O(this,"foundExtremes"),this.adjustForMinRange(),R(this.min)&&R(this.max)){if(!R(this.userMin)&&R(fe)&&fe<this.min&&(this.min=wt=fe),!R(this.userMax)&&R(ge)&&ge>this.max&&(this.max=Rt=ge),Q||this.axisPointRange||(Ct=this.stacking)!=null&&Ct.usePercentage||Me||!(Xe=this.max-this.min)||(!I(wt)&&je&&(this.min-=Xe*je),I(Rt)||!Pe||(this.max+=Xe*Pe)),!R(this.userMin)&&R(Ge)&&(this.min=Math.max(this.min,Ge)),!R(this.userMax)&&R(Fe)&&(this.max=Math.min(this.max,Fe)),ze&&R(J)&&R(_e)){let Ht=Ce||0;!I(wt)&&this.min<Ht&&J>=Ht?this.min=we.minRange?Math.min(Ht,this.max-Ie):Ht:!I(Rt)&&this.max>Ht&&_e<=Ht&&(this.max=we.minRange?Math.max(Ht,this.min+Ie):Ht)}!ae.polar&&this.min>this.max&&(I(we.min)?this.max=this.min:I(we.max)&&(this.min=this.max)),Xe=this.max-this.min}if(this.min!==this.max&&R(this.min)&&R(this.max)?Me&&!nt&&De===Me.options.tickPixelInterval?this.tickInterval=nt=Me.tickInterval:this.tickInterval=W(nt,this.tickAmount?Xe/Math.max(this.tickAmount-1,1):void 0,Q?1:Xe*De/Math.max(this.len,De)):this.tickInterval=1,ce&&!K){let Ht=this.min!==((si=this.old)==null?void 0:si.min)||this.max!==((di=this.old)==null?void 0:di.max);this.series.forEach(function(cn){var Zi;cn.forceCrop=(Zi=cn.forceCropping)==null?void 0:Zi.call(cn),cn.processData(Ht)}),O(this,"postProcessData",{hasExtremesChanged:Ht})}this.setAxisTranslation(),O(this,"initialAxisTranslation"),this.pointRange&&!nt&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval));let ft=W(we.minTickInterval,ne&&!this.series.some(Ht=>Ht.noSharedTooltip)?this.closestPointRange:0);!nt&&this.tickInterval<ft&&(this.tickInterval=ft),ne||ye||nt||(this.tickInterval=Ee(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()}setTickPositions(){var ze,Ce;let K=this.options,Q=K.tickPositions,ae=K.tickPositioner,_e=this.getMinorTickInterval(),J=!this.isPanning,ne=J&&K.startOnTick,ce=J&&K.endOnTick,ye=[],we;if(this.tickmarkOffset=this.categories&&K.tickmarkPlacement==="between"&&this.tickInterval===1?.5:0,this.single=this.min===this.max&&I(this.min)&&!this.tickAmount&&(this.min%1==0||K.allowDecimals!==!1),Q)ye=Q.slice();else if(R(this.min)&&R(this.max)){if(!((ze=this.ordinal)!=null&&ze.positions)&&(this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))ye=[this.min,this.max],Z(19,!1,this.chart);else if(this.dateTime)ye=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,K.units),this.min,this.max,K.startOfWeek,(Ce=this.ordinal)==null?void 0:Ce.positions,this.closestPointRange,!0);else if(this.logarithmic)ye=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else{let Ie=this.tickInterval,Fe=Ie;for(;Fe<=2*Ie&&(ye=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&ye.length>this.tickAmount);)this.tickInterval=Ee(this,Fe*=1.1)}ye.length>this.len&&(ye=[ye[0],ye[ye.length-1]])[0]===ye[1]&&(ye.length=1),ae&&(this.tickPositions=ye,(we=ae.apply(this,[this.min,this.max]))&&(ye=we))}this.tickPositions=ye,this.minorTickInterval=_e==="auto"&&this.tickInterval?this.tickInterval/K.minorTicksPerMajor:_e,this.paddedTicks=ye.slice(0),this.trimTicks(ye,ne,ce),!this.isLinked&&R(this.min)&&R(this.max)&&(this.single&&ye.length<2&&!this.categories&&!this.series.some(Ie=>Ie.is("heatmap")&&Ie.options.pointPlacement==="between")&&(this.min-=.5,this.max+=.5),Q||we||this.adjustTickAmount()),O(this,"afterSetTickPositions")}trimTicks(K,Q,ae){let _e=K[0],J=K[K.length-1],ne=!this.isOrdinal&&this.minPointOffset||0;if(O(this,"trimTicks"),!this.isLinked){if(Q&&_e!==-1/0)this.min=_e;else for(;this.min-ne>K[0];)K.shift();if(ae)this.max=J;else for(;this.max+ne<K[K.length-1];)K.pop();K.length===0&&I(_e)&&!this.options.tickPositions&&K.push((J+_e)/2)}}alignToOthers(){let K,Q=this,ae=Q.chart,_e=[this],J=Q.options,ne=ae.options.chart,ce=this.coll==="yAxis"&&ne.alignThresholds,ye=[];if(Q.thresholdAlignment=void 0,(ne.alignTicks!==!1&&J.alignTicks||ce)&&J.startOnTick!==!1&&J.endOnTick!==!1&&!Q.logarithmic){let we=Ce=>{let{horiz:Ie,options:Fe}=Ce;return[Ie?Fe.left:Fe.top,Fe.width,Fe.height,Fe.pane].join(",")},ze=we(this);ae[this.coll].forEach(function(Ce){let{series:Ie}=Ce;Ie.length&&Ie.some(Fe=>Fe.visible)&&Ce!==Q&&we(Ce)===ze&&(K=!0,_e.push(Ce))})}if(K&&ce){_e.forEach(ze=>{let Ce=ze.getThresholdAlignment(Q);R(Ce)&&ye.push(Ce)});let we=ye.length>1?ye.reduce((ze,Ce)=>ze+=Ce,0)/ye.length:void 0;_e.forEach(ze=>{ze.thresholdAlignment=we})}return K}getThresholdAlignment(K){if((!R(this.dataMin)||this!==K&&this.series.some(Q=>Q.isDirty||Q.isDirtyData))&&this.getSeriesExtremes(),R(this.threshold)){let Q=D((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1);return this.options.reversed&&(Q=1-Q),Q}}getTickAmount(){let K=this.options,Q=K.tickPixelInterval,ae=K.tickAmount;I(K.tickInterval)||ae||!(this.len<Q)||this.isRadial||this.logarithmic||!K.startOnTick||!K.endOnTick||(ae=2),!ae&&this.alignToOthers()&&(ae=Math.ceil(this.len/Q)+1),ae<4&&(this.finalTickAmt=ae,ae=5),this.tickAmount=ae}adjustTickAmount(){let K=this,{finalTickAmt:Q,max:ae,min:_e,options:J,tickPositions:ne,tickAmount:ce,thresholdAlignment:ye}=K,we=ne==null?void 0:ne.length,ze=W(K.threshold,K.softThreshold?0:null),Ce,Ie,Fe=K.tickInterval,Ge,ke=()=>ne.push(T(ne[ne.length-1]+Fe)),ge=()=>ne.unshift(T(ne[0]-Fe));if(R(ye)&&(Ge=ye<.5?Math.ceil(ye*(ce-1)):Math.floor(ye*(ce-1)),J.reversed&&(Ge=ce-1-Ge)),K.hasData()&&R(_e)&&R(ae)){let fe=()=>{K.transA*=(we-1)/(ce-1),K.min=J.startOnTick?ne[0]:Math.min(_e,ne[0]),K.max=J.endOnTick?ne[ne.length-1]:Math.max(ae,ne[ne.length-1])};if(R(Ge)&&R(K.threshold)){for(;ne[Ge]!==ze||ne.length!==ce||ne[0]>_e||ne[ne.length-1]<ae;){for(ne.length=0,ne.push(K.threshold);ne.length<ce;)ne[Ge]===void 0||ne[Ge]>K.threshold?ge():ke();if(Fe>8*K.tickInterval)break;Fe*=2}fe()}else if(we<ce){for(;ne.length<ce;)ne.length%2||_e===ze?ke():ge();fe()}if(I(Q)){for(Ie=Ce=ne.length;Ie--;)(Q===3&&Ie%2==1||Q<=2&&Ie>0&&Ie<Ce-1)&&ne.splice(Ie,1);K.finalTickAmt=void 0}}}setScale(){var ne,ce;let{coll:K,stacking:Q}=this,ae=!1,_e=!1;this.series.forEach(ye=>{ae=ae||ye.isDirtyData||ye.isDirty,_e=_e||ye.xAxis&&ye.xAxis.isDirty||!1}),this.setAxisSize();let J=this.len!==(this.old&&this.old.len);J||ae||_e||this.isLinked||this.forceRedraw||this.userMin!==(this.old&&this.old.userMin)||this.userMax!==(this.old&&this.old.userMax)||this.alignToOthers()?(Q&&K==="yAxis"&&Q.buildStacks(),this.forceRedraw=!1,this.userMinRange||(this.minRange=void 0),this.getSeriesExtremes(),this.setTickInterval(),Q&&K==="xAxis"&&Q.buildStacks(),this.isDirty||(this.isDirty=J||this.min!==((ne=this.old)==null?void 0:ne.min)||this.max!==((ce=this.old)==null?void 0:ce.max))):Q&&Q.cleanStacks(),ae&&delete this.allExtremes,O(this,"afterSetScale")}setExtremes(K,Q,ae=!0,_e,J){this.series.forEach(ne=>{delete ne.kdTree}),O(this,"setExtremes",J=X(J,{min:K,max:Q}),ne=>{this.userMin=ne.min,this.userMax=ne.max,this.eventArgs=ne,ae&&this.chart.redraw(_e)})}setAxisSize(){let K=this.chart,Q=this.options,ae=Q.offsets||[0,0,0,0],_e=this.horiz,J=this.width=Math.round(re(W(Q.width,K.plotWidth-ae[3]+ae[1]),K.plotWidth)),ne=this.height=Math.round(re(W(Q.height,K.plotHeight-ae[0]+ae[2]),K.plotHeight)),ce=this.top=Math.round(re(W(Q.top,K.plotTop+ae[0]),K.plotHeight,K.plotTop)),ye=this.left=Math.round(re(W(Q.left,K.plotLeft+ae[3]),K.plotWidth,K.plotLeft));this.bottom=K.chartHeight-ne-ce,this.right=K.chartWidth-J-ye,this.len=Math.max(_e?J:ne,0),this.pos=_e?ye:ce}getExtremes(){let K=this.logarithmic;return{min:K?T(K.lin2log(this.min)):this.min,max:K?T(K.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}}getThreshold(K){let Q=this.logarithmic,ae=Q?Q.lin2log(this.min):this.min,_e=Q?Q.lin2log(this.max):this.max;return K===null||K===-1/0?K=ae:K===1/0?K=_e:ae>K?K=ae:_e<K&&(K=_e),this.translate(K,0,1,0,1)}autoLabelAlign(K){let Q=(W(K,0)-90*this.side+720)%360,ae={align:"center"};return O(this,"autoLabelAlign",ae,function(_e){Q>15&&Q<165?_e.align="right":Q>195&&Q<345&&(_e.align="left")}),ae.align}tickSize(K){let Q=this.options,ae=W(Q[K==="tick"?"tickWidth":"minorTickWidth"],K==="tick"&&this.isXAxis&&!this.categories?1:0),_e=Q[K==="tick"?"tickLength":"minorTickLength"],J;ae&&_e&&(Q[K+"Position"]==="inside"&&(_e=-_e),J=[_e,ae]);let ne={tickSize:J};return O(this,"afterTickSize",ne),ne.tickSize}labelMetrics(){let K=this.chart.renderer,Q=this.ticks,ae=Q[Object.keys(Q)[0]]||{};return this.chart.renderer.fontMetrics(ae.label||ae.movedLabel||K.box)}unsquish(){let K=this.options.labels,Q=K.padding||0,ae=this.horiz,_e=this.tickInterval,J=this.len/(((this.categories?1:0)+this.max-this.min)/_e),ne=K.rotation,ce=T(.8*this.labelMetrics().h),ye=Math.max(this.max-this.min,0),we=function(Ge){let ke=(Ge+2*Q)/(J||1);return(ke=ke>1?Math.ceil(ke):1)*_e>ye&&Ge!==1/0&&J!==1/0&&ye&&(ke=Math.ceil(ye/_e)),T(ke*_e)},ze=_e,Ce,Ie=Number.MAX_VALUE,Fe;if(ae){if(!K.staggerLines&&(R(ne)?Fe=[ne]:J<K.autoRotationLimit&&(Fe=K.autoRotation)),Fe){let Ge,ke;for(let ge of Fe)(ge===ne||ge&&ge>=-90&&ge<=90)&&(ke=(Ge=we(Math.abs(ce/Math.sin(S*ge))))+Math.abs(ge/360))<Ie&&(Ie=ke,Ce=ge,ze=Ge)}}else ze=we(.75*ce);return this.autoRotation=Fe,this.labelRotation=W(Ce,R(ne)?ne:0),K.step?_e:ze}getSlotWidth(K){let Q=this.chart,ae=this.horiz,_e=this.options.labels,J=Math.max(this.tickPositions.length-(this.categories?0:1),1),ne=Q.margin[3];if(K&&R(K.slotWidth))return K.slotWidth;if(ae&&_e.step<2)return _e.rotation?0:(this.staggerLines||1)*this.len/J;if(!ae){let ce=_e.style.width;if(ce!==void 0)return parseInt(String(ce),10);if(ne)return ne-Q.spacing[3]}return .33*Q.chartWidth}renderUnsquish(){let K=this.chart,Q=K.renderer,ae=this.tickPositions,_e=this.ticks,J=this.options.labels,ne=J.style,ce=this.horiz,ye=this.getSlotWidth(),we=Math.max(1,Math.round(ye-(ce?2*(J.padding||0):J.distance||0))),ze={},Ce=this.labelMetrics(),Ie=ne.textOverflow,Fe,Ge,ke=0,ge,fe;if(G(J.rotation)||(ze.rotation=J.rotation||0),ae.forEach(function(Me){let De=_e[Me];De.movedLabel&&De.replaceMovedLabel(),De&&De.label&&De.label.textPxLength>ke&&(ke=De.label.textPxLength)}),this.maxLabelLength=ke,this.autoRotation)ke>we&&ke>Ce.h?ze.rotation=this.labelRotation:this.labelRotation=0;else if(ye&&(Fe=we,!Ie))for(Ge="clip",fe=ae.length;!ce&&fe--;)(ge=_e[ae[fe]].label)&&(ge.styles.textOverflow==="ellipsis"?ge.css({textOverflow:"clip"}):ge.textPxLength>ye&&ge.css({width:ye+"px"}),ge.getBBox().height>this.len/ae.length-(Ce.h-Ce.f)&&(ge.specificTextOverflow="ellipsis"));ze.rotation&&(Fe=ke>.5*K.chartHeight?.33*K.chartHeight:ke,Ie||(Ge="ellipsis")),this.labelAlign=J.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(ze.align=this.labelAlign),ae.forEach(function(Me){let De=_e[Me],Pe=De&&De.label,je=ne.width,Xe={};Pe&&(Pe.attr(ze),De.shortenLabel?De.shortenLabel():Fe&&!je&&ne.whiteSpace!=="nowrap"&&(Fe<Pe.textPxLength||Pe.element.tagName==="SPAN")?(Xe.width=Fe+"px",Ie||(Xe.textOverflow=Pe.specificTextOverflow||Ge),Pe.css(Xe)):!Pe.styles.width||Xe.width||je||Pe.css({width:null}),delete Pe.specificTextOverflow,De.rotation=ze.rotation)},this),this.tickRotCorr=Q.rotCorr(Ce.b,this.labelRotation||0,this.side!==0)}hasData(){return this.series.some(function(K){return K.hasData()})||this.options.showEmpty&&I(this.min)&&I(this.max)}addTitle(K){let Q,ae=this.chart.renderer,_e=this.horiz,J=this.opposite,ne=this.options.title,ce=this.chart.styledMode;this.axisTitle||((Q=ne.textAlign)||(Q=(_e?{low:"left",middle:"center",high:"right"}:{low:J?"right":"left",middle:"center",high:J?"left":"right"})[ne.align]),this.axisTitle=ae.text(ne.text||"",0,0,ne.useHTML).attr({zIndex:7,rotation:ne.rotation||0,align:Q}).addClass("highcharts-axis-title"),ce||this.axisTitle.css(U(ne.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),ce||ne.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[K?"show":"hide"](K)}generateTick(K){let Q=this.ticks;Q[K]?Q[K].addLabel():Q[K]=new g(this,K)}createGroups(){let{axisParent:K,chart:Q,coll:ae,options:_e}=this,J=Q.renderer,ne=(ce,ye,we)=>J.g(ce).attr({zIndex:we}).addClass(`highcharts-${ae.toLowerCase()}${ye} `+(this.isRadial?`highcharts-radial-axis${ye} `:"")+(_e.className||"")).add(K);this.axisGroup||(this.gridGroup=ne("grid","-grid",_e.gridZIndex),this.axisGroup=ne("axis","",_e.zIndex),this.labelGroup=ne("axis-labels","-labels",_e.labels.zIndex))}getOffset(){let K=this,{chart:Q,horiz:ae,options:_e,side:J,ticks:ne,tickPositions:ce,coll:ye}=K,we=Q.inverted&&!K.isZAxis?[1,0,3,2][J]:J,ze=K.hasData(),Ce=_e.title,Ie=_e.labels,Fe=R(_e.crossing),Ge=Q.axisOffset,ke=Q.clipOffset,ge=[-1,1,1,-1][J],fe,Me=0,De,Pe=0,je=0,Xe,et;if(K.showAxis=fe=ze||_e.showEmpty,K.staggerLines=K.horiz&&Ie.staggerLines||void 0,K.createGroups(),ze||K.isLinked?(ce.forEach(function(nt){K.generateTick(nt)}),K.renderUnsquish(),K.reserveSpaceDefault=J===0||J===2||{1:"left",3:"right"}[J]===K.labelAlign,W(Ie.reserveSpace,!Fe&&null,K.labelAlign==="center"||null,K.reserveSpaceDefault)&&ce.forEach(function(nt){je=Math.max(ne[nt].getLabelSize(),je)}),K.staggerLines&&(je*=K.staggerLines),K.labelOffset=je*(K.opposite?-1:1)):H(ne,function(nt,ht){nt.destroy(),delete ne[ht]}),Ce!=null&&Ce.text&&Ce.enabled!==!1&&(K.addTitle(fe),fe&&!Fe&&Ce.reserveSpace!==!1&&(K.titleOffset=Me=K.axisTitle.getBBox()[ae?"height":"width"],Pe=I(De=Ce.offset)?0:W(Ce.margin,ae?5:10))),K.renderLine(),K.offset=ge*W(_e.offset,Ge[J]?Ge[J]+(_e.margin||0):0),K.tickRotCorr=K.tickRotCorr||{x:0,y:0},et=J===0?-K.labelMetrics().h:J===2?K.tickRotCorr.y:0,Xe=Math.abs(je)+Pe,je&&(Xe-=et,Xe+=ge*(ae?W(Ie.y,K.tickRotCorr.y+ge*Ie.distance):W(Ie.x,ge*Ie.distance))),K.axisTitleMargin=W(De,Xe),K.getMaxLabelDimensions&&(K.maxLabelDimensions=K.getMaxLabelDimensions(ne,ce)),ye!=="colorAxis"&&ke){let nt=this.tickSize("tick");Ge[J]=Math.max(Ge[J],(K.axisTitleMargin||0)+Me+ge*K.offset,Xe,ce&&ce.length&&nt?nt[0]+ge*K.offset:0);let ht=!K.axisLine||_e.offset?0:K.axisLine.strokeWidth()/2;ke[we]=Math.max(ke[we],ht)}O(this,"afterGetOffset")}getLinePath(K){let Q=this.chart,ae=this.opposite,_e=this.offset,J=this.horiz,ne=this.left+(ae?this.width:0)+_e,ce=Q.chartHeight-this.bottom-(ae?this.height:0)+_e;return ae&&(K*=-1),Q.renderer.crispLine([["M",J?this.left:ne,J?ce:this.top],["L",J?Q.chartWidth-this.right:ne,J?ce:Q.chartHeight-this.bottom]],K)}renderLine(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))}getTitlePosition(K){let Q=this.horiz,ae=this.left,_e=this.top,J=this.len,ne=this.options.title,ce=Q?ae:_e,ye=this.opposite,we=this.offset,ze=ne.x,Ce=ne.y,Ie=this.chart.renderer.fontMetrics(K),Fe=K?Math.max(K.getBBox(!1,0).height-Ie.h-1,0):0,Ge={low:ce+(Q?0:J),middle:ce+J/2,high:ce+(Q?J:0)}[ne.align],ke=(Q?_e+this.height:ae)+(Q?1:-1)*(ye?-1:1)*(this.axisTitleMargin||0)+[-Fe,Fe,Ie.f,-Fe][this.side],ge={x:Q?Ge+ze:ke+(ye?this.width:0)+we+ze,y:Q?ke+Ce-(ye?this.height:0)+we:Ge+Ce};return O(this,"afterGetTitlePosition",{titlePosition:ge}),ge}renderMinorTick(K,Q){let ae=this.minorTicks;ae[K]||(ae[K]=new g(this,K,"minor")),Q&&ae[K].isNew&&ae[K].render(null,!0),ae[K].render(null,!1,1)}renderTick(K,Q,ae){let _e=this.isLinked,J=this.ticks;(!_e||K>=this.min&&K<=this.max||this.grid&&this.grid.isColumn)&&(J[K]||(J[K]=new g(this,K)),ae&&J[K].isNew&&J[K].render(Q,!0,-1),J[K].render(Q))}render(){let K,Q,ae=this,_e=ae.chart,J=ae.logarithmic,ne=_e.renderer,ce=ae.options,ye=ae.isLinked,we=ae.tickPositions,ze=ae.axisTitle,Ce=ae.ticks,Ie=ae.minorTicks,Fe=ae.alternateBands,Ge=ce.stackLabels,ke=ce.alternateGridColor,ge=ce.crossing,fe=ae.tickmarkOffset,Me=ae.axisLine,De=ae.showAxis,Pe=y(ne.globalAnimation);if(ae.labelEdge.length=0,ae.overlap=!1,[Ce,Ie,Fe].forEach(function(je){H(je,function(Xe){Xe.isActive=!1})}),R(ge)){let je=this.isXAxis?_e.yAxis[0]:_e.xAxis[0],Xe=[1,-1,-1,1][this.side];if(je){let et=je.toPixels(ge,!0);ae.horiz&&(et=je.len-et),ae.offset=Xe*et}}if(ae.hasData()||ye){let je=ae.chart.hasRendered&&ae.old&&R(ae.old.min);ae.minorTickInterval&&!ae.categories&&ae.getMinorTickPositions().forEach(function(Xe){ae.renderMinorTick(Xe,je)}),we.length&&(we.forEach(function(Xe,et){ae.renderTick(Xe,et,je)}),fe&&(ae.min===0||ae.single)&&(Ce[-1]||(Ce[-1]=new g(ae,-1,null,!0)),Ce[-1].render(-1))),ke&&we.forEach(function(Xe,et){Q=we[et+1]!==void 0?we[et+1]+fe:ae.max-fe,et%2==0&&Xe<ae.max&&Q<=ae.max+(_e.polar?-fe:fe)&&(Fe[Xe]||(Fe[Xe]=new m.PlotLineOrBand(ae,{})),K=Xe+fe,Fe[Xe].options={from:J?J.lin2log(K):K,to:J?J.lin2log(Q):Q,color:ke,className:"highcharts-alternate-grid"},Fe[Xe].render(),Fe[Xe].isActive=!0)}),ae._addedPlotLB||(ae._addedPlotLB=!0,(ce.plotLines||[]).concat(ce.plotBands||[]).forEach(function(Xe){ae.addPlotBandOrLine(Xe)}))}[Ce,Ie,Fe].forEach(function(je){let Xe=[],et=Pe.duration;H(je,function(nt,ht){nt.isActive||(nt.render(ht,!1,0),nt.isActive=!1,Xe.push(ht))}),oe(function(){let nt=Xe.length;for(;nt--;)je[Xe[nt]]&&!je[Xe[nt]].isActive&&(je[Xe[nt]].destroy(),delete je[Xe[nt]])},je!==Fe&&_e.hasRendered&&et?et:0)}),Me&&(Me[Me.isPlaced?"animate":"attr"]({d:this.getLinePath(Me.strokeWidth())}),Me.isPlaced=!0,Me[De?"show":"hide"](De)),ze&&De&&(ze[ze.isNew?"attr":"animate"](ae.getTitlePosition(ze)),ze.isNew=!1),Ge&&Ge.enabled&&ae.stacking&&ae.stacking.renderStackTotals(),ae.old={len:ae.len,max:ae.max,min:ae.min,transA:ae.transA,userMax:ae.userMax,userMin:ae.userMin},ae.isDirty=!1,O(this,"afterRender")}redraw(){this.visible&&(this.render(),this.plotLinesAndBands.forEach(function(K){K.render()})),this.series.forEach(function(K){K.isDirty=!0})}getKeepProps(){return this.keepProps||xe.keepProps}destroy(K){let Q=this,ae=Q.plotLinesAndBands,_e=this.eventOptions;if(O(this,"destroy",{keepEvents:K}),K||de(Q),[Q.ticks,Q.minorTicks,Q.alternateBands].forEach(function(J){N(J)}),ae){let J=ae.length;for(;J--;)ae[J].destroy()}for(let J in["axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross","scrollbar"].forEach(function(ne){Q[ne]&&(Q[ne]=Q[ne].destroy())}),Q.plotLinesAndBandsGroups)Q.plotLinesAndBandsGroups[J]=Q.plotLinesAndBandsGroups[J].destroy();H(Q,function(J,ne){Q.getKeepProps().indexOf(ne)===-1&&delete Q[ne]}),this.eventOptions=_e}drawCrosshair(K,Q){let ae=this.crosshair,_e=W(ae&&ae.snap,!0),J=this.chart,ne,ce,ye,we=this.cross,ze;if(O(this,"drawCrosshair",{e:K,point:Q}),K||(K=this.cross&&this.cross.e),ae&&(I(Q)||!_e)!==!1){if(_e?I(Q)&&(ce=W(this.coll!=="colorAxis"?Q.crosshairPos:null,this.isXAxis?Q.plotX:this.len-Q.plotY)):ce=K&&(this.horiz?K.chartX-this.pos:this.len-K.chartY+this.pos),I(ce)&&(ze={value:Q&&(this.isXAxis?Q.x:W(Q.stackY,Q.y)),translatedValue:ce},J.polar&&X(ze,{isCrosshair:!0,chartX:K&&K.chartX,chartY:K&&K.chartY,point:Q}),ne=this.getPlotLinePath(ze)||null),!I(ne)){this.hideCrosshair();return}ye=this.categories&&!this.isRadial,we||(this.cross=we=J.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(ye?"category ":"thin ")+(ae.className||"")).attr({zIndex:W(ae.zIndex,2)}).add(),!J.styledMode&&(we.attr({stroke:ae.color||(ye?u.parse("#ccd3ff").setOpacity(.25).get():"#cccccc"),"stroke-width":W(ae.width,1)}).css({"pointer-events":"none"}),ae.dashStyle&&we.attr({dashstyle:ae.dashStyle}))),we.show().attr({d:ne}),ye&&!ae.width&&we.attr({"stroke-width":this.transA}),this.cross.e=K}else this.hideCrosshair();O(this,"afterDrawCrosshair",{e:K,point:Q})}hideCrosshair(){this.cross&&this.cross.hide(),O(this,"afterHideCrosshair")}update(K,Q){let ae=this.chart;K=U(this.userOptions,K),this.destroy(!0),this.init(ae,K),ae.isDirtyBox=!0,W(Q,!0)&&ae.redraw()}remove(K){let Q=this.chart,ae=this.coll,_e=this.series,J=_e.length;for(;J--;)_e[J]&&_e[J].remove(!1);q(Q.axes,this),q(Q[ae]||[],this),Q.orderItems(ae),this.destroy(),Q.isDirtyBox=!0,W(K,!0)&&Q.redraw()}setTitle(K,Q){this.update({title:K},Q)}setCategories(K,Q){this.update({categories:K},Q)}}return xe.keepProps=["coll","extKey","hcEvents","len","names","series","userMax","userMin"],xe}),r(t,"Core/Axis/DateTimeAxis.js",[t["Core/Utilities.js"]],function(s){var l;let{addEvent:u,getMagnitude:n,normalizeTickInterval:p,timeUnits:m}=s;return function(g){function v(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function y(){if(this.type!=="datetime"){this.dateTime=void 0;return}this.dateTime||(this.dateTime=new C(this))}g.compose=function(_){return _.keepProps.includes("dateTime")||(_.keepProps.push("dateTime"),_.prototype.getTimeTicks=v,u(_,"afterSetType",y)),_};class C{constructor(w){this.axis=w}normalizeTimeTickInterval(w,k){let S=k||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],x=S[S.length-1],P=m[x[0]],D=x[1],T;for(T=0;T<S.length&&(P=m[(x=S[T])[0]],D=x[1],!S[T+1]||!(w<=(P*D[D.length-1]+m[S[T+1][0]])/2));T++);P===m.year&&w<5*P&&(D=[1,2,5]);let I=p(w/P,D,x[0]==="year"?Math.max(n(w/P),1):1);return{unitRange:P,count:I,unitName:x[0]}}getXDateFormat(w,k){let{axis:S}=this,x=S.chart.time;return S.closestPointRange?x.getDateFormat(S.closestPointRange,w,S.options.startOfWeek,k)||x.resolveDTLFormat(k.year).main:x.resolveDTLFormat(k.day).main}}g.Additions=C}(l||(l={})),l}),r(t,"Core/Axis/LogarithmicAxis.js",[t["Core/Utilities.js"]],function(s){var l;let{addEvent:u,normalizeTickInterval:n,pick:p}=s;return function(m){function g(){this.type!=="logarithmic"?this.logarithmic=void 0:this.logarithmic??(this.logarithmic=new y(this))}function v(){let C=this.logarithmic;C&&(this.lin2val=function(_){return C.lin2log(_)},this.val2lin=function(_){return C.log2lin(_)})}m.compose=function(C){return C.keepProps.includes("logarithmic")||(C.keepProps.push("logarithmic"),u(C,"afterSetType",g),u(C,"afterInit",v)),C};class y{constructor(_){this.axis=_}getLogTickPositions(_,w,k,S){let x=this.axis,P=x.len,D=x.options,T=[];if(S||(this.minorAutoInterval=void 0),_>=.5)_=Math.round(_),T=x.getLinearTickPositions(_,w,k);else if(_>=.08){let I,N,q,Z,X,O,V,$=Math.floor(w);for(I=_>.3?[1,2,4]:_>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],N=$;N<k+1&&!V;N++)for(q=0,Z=I.length;q<Z&&!V;q++)(X=this.log2lin(this.lin2log(N)*I[q]))>w&&(!S||O<=k)&&O!==void 0&&T.push(O),O>k&&(V=!0),O=X}else{let I=this.lin2log(w),N=this.lin2log(k),q=S?x.getMinorTickInterval():D.tickInterval,Z=D.tickPixelInterval/(S?5:1),X=S?P/x.tickPositions.length:P;_=n(_=p(q==="auto"?null:q,this.minorAutoInterval,(N-I)*Z/(X||1))),T=x.getLinearTickPositions(_,I,N).map(this.log2lin),S||(this.minorAutoInterval=_/5)}return S||(x.tickInterval=_),T}lin2log(_){return Math.pow(10,_)}log2lin(_){return Math.log(_)/Math.LN10}}m.Additions=y}(l||(l={})),l}),r(t,"Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js",[t["Core/Utilities.js"]],function(s){var l;let{erase:u,extend:n,isNumber:p}=s;return function(m){let g;function v(x){return this.addPlotBandOrLine(x,"plotBands")}function y(x,P){let D=this.userOptions,T=new g(this,x);if(this.visible&&(T=T.render()),T){if(this._addedPlotLB||(this._addedPlotLB=!0,(D.plotLines||[]).concat(D.plotBands||[]).forEach(I=>{this.addPlotBandOrLine(I)})),P){let I=D[P]||[];I.push(x),D[P]=I}this.plotLinesAndBands.push(T)}return T}function C(x){return this.addPlotBandOrLine(x,"plotLines")}function _(x,P,D){D=D||this.options;let T=this.getPlotLinePath({value:P,force:!0,acrossPanes:D.acrossPanes}),I=[],N=this.horiz,q=!p(this.min)||!p(this.max)||x<this.min&&P<this.min||x>this.max&&P>this.max,Z=this.getPlotLinePath({value:x,force:!0,acrossPanes:D.acrossPanes}),X,O=1,V;if(Z&&T)for(q&&(V=Z.toString()===T.toString(),O=0),X=0;X<Z.length;X+=2){let $=Z[X],L=Z[X+1],R=T[X],G=T[X+1];($[0]==="M"||$[0]==="L")&&(L[0]==="M"||L[0]==="L")&&(R[0]==="M"||R[0]==="L")&&(G[0]==="M"||G[0]==="L")&&(N&&R[1]===$[1]?(R[1]+=O,G[1]+=O):N||R[2]!==$[2]||(R[2]+=O,G[2]+=O),I.push(["M",$[1],$[2]],["L",L[1],L[2]],["L",G[1],G[2]],["L",R[1],R[2]],["Z"])),I.isFlat=V}return I}function w(x){this.removePlotBandOrLine(x)}function k(x){let P=this.plotLinesAndBands,D=this.options,T=this.userOptions;if(P){let I=P.length;for(;I--;)P[I].id===x&&P[I].destroy();[D.plotLines||[],T.plotLines||[],D.plotBands||[],T.plotBands||[]].forEach(function(N){for(I=N.length;I--;)(N[I]||{}).id===x&&u(N,N[I])})}}function S(x){this.removePlotBandOrLine(x)}m.compose=function(x,P){let D=P.prototype;return D.addPlotBand||(g=x,n(D,{addPlotBand:v,addPlotLine:C,addPlotBandOrLine:y,getPlotBandPath:_,removePlotBand:w,removePlotLine:S,removePlotBandOrLine:k})),P}}(l||(l={})),l}),r(t,"Core/Axis/PlotLineOrBand/PlotLineOrBand.js",[t["Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js"],t["Core/Utilities.js"]],function(s,l){let{addEvent:u,arrayMax:n,arrayMin:p,defined:m,destroyObjectProperties:g,erase:v,fireEvent:y,merge:C,objectEach:_,pick:w}=l;class k{static compose(x,P){return u(x,"afterInit",function(){this.labelCollectors.push(()=>{var T;let D=[];for(let I of this.axes)for(let{label:N,options:q}of I.plotLinesAndBands)N&&!((T=q==null?void 0:q.label)!=null&&T.allowOverlap)&&D.push(N);return D})}),s.compose(k,P)}constructor(x,P){this.axis=x,this.options=P,this.id=P.id}render(){y(this,"render");let{axis:x,options:P}=this,{horiz:D,logarithmic:T}=x,{color:I,events:N,zIndex:q=0}=P,Z={},X=x.chart.renderer,O=P.to,V=P.from,$=P.value,L=P.borderWidth,R=P.label,{label:G,svgElem:U}=this,B=[],H,W=m(V)&&m(O),re=m($),de=!U,ie={class:"highcharts-plot-"+(W?"band ":"line ")+(P.className||"")},oe=W?"bands":"lines";if(!x.chart.styledMode&&(re?(ie.stroke=I||"#999999",ie["stroke-width"]=w(P.width,1),P.dashStyle&&(ie.dashstyle=P.dashStyle)):W&&(ie.fill=I||"#e6e9ff",L&&(ie.stroke=P.borderColor,ie["stroke-width"]=L))),Z.zIndex=q,oe+="-"+q,(H=x.plotLinesAndBandsGroups[oe])||(x.plotLinesAndBandsGroups[oe]=H=X.g("plot-"+oe).attr(Z).add()),U||(this.svgElem=U=X.path().attr(ie).add(H)),m($))B=x.getPlotLinePath({value:(T==null?void 0:T.log2lin($))??$,lineWidth:U.strokeWidth(),acrossPanes:P.acrossPanes});else{if(!(m(V)&&m(O)))return;B=x.getPlotBandPath((T==null?void 0:T.log2lin(V))??V,(T==null?void 0:T.log2lin(O))??O,P)}return!this.eventsAdded&&N&&(_(N,(Ee,xe)=>{U==null||U.on(xe,Se=>{N[xe].apply(this,[Se])})}),this.eventsAdded=!0),(de||!U.d)&&(B!=null&&B.length)?U.attr({d:B}):U&&(B?(U.show(),U.animate({d:B})):U.d&&(U.hide(),G&&(this.label=G=G.destroy()))),R&&(m(R.text)||m(R.formatter))&&(B!=null&&B.length)&&x.width>0&&x.height>0&&!B.isFlat?(R=C({align:D&&W?"center":void 0,x:D?!W&&4:10,verticalAlign:!D&&W?"middle":void 0,y:D?W?16:10:W?6:-4,rotation:D&&!W?90:0,...W?{inside:!0}:{}},R),this.renderLabel(R,B,W,q)):G&&G.hide(),this}renderLabel(x,P,D,T){var R;let I=this.axis,N=I.chart.renderer,q=x.inside,Z=this.label;Z||(this.label=Z=N.text(this.getLabelText(x),0,0,x.useHTML).attr({align:x.textAlign||x.align,rotation:x.rotation,class:"highcharts-plot-"+(D?"band":"line")+"-label "+(x.className||""),zIndex:T}),I.chart.styledMode||Z.css(C({fontSize:"0.8em",textOverflow:D&&!q?"":"ellipsis"},x.style)),Z.add());let X=P.xBounds||[P[0][1],P[1][1],D?P[2][1]:P[0][1]],O=P.yBounds||[P[0][2],P[1][2],D?P[2][2]:P[0][2]],V=p(X),$=p(O),L=n(X)-V;Z.align(x,!1,{x:V,y:$,width:L,height:n(O)-$}),(!Z.alignValue||Z.alignValue==="left"||m(q))&&Z.css({width:(((R=x.style)==null?void 0:R.width)||(D&&q?L:Z.rotation===90?I.height-(Z.alignAttr.y-I.top):(x.clip?I.width:I.chart.chartWidth)-(Z.alignAttr.x-I.left)))+"px"}),Z.show(!0)}getLabelText(x){return m(x.formatter)?x.formatter.call(this):x.text}destroy(){v(this.axis.plotLinesAndBands,this),delete this.axis,g(this)}}return k}),r(t,"Core/Tooltip.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,n,p,m){var g;let{animObject:v}=s,{format:y}=l,{composed:C,doc:_,isSafari:w}=u,{distribute:k}=n,{addEvent:S,clamp:x,css:P,discardElement:D,extend:T,fireEvent:I,isArray:N,isNumber:q,isString:Z,merge:X,pick:O,pushUnique:V,splat:$,syncTimeout:L}=m;class R{constructor(U,B,H){this.allowShared=!0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.options={},this.outside=!1,this.chart=U,this.init(U,B),this.pointer=H}bodyFormatter(U){return U.map(function(B){let H=B.series.tooltipOptions;return(H[(B.point.formatPrefix||"point")+"Formatter"]||B.point.tooltipFormatter).call(B.point,H[(B.point.formatPrefix||"point")+"Format"]||"")})}cleanSplit(U){this.chart.series.forEach(function(B){let H=B&&B.tt;H&&(!H.isActive||U?B.tt=H.destroy():H.isActive=!1)})}defaultFormatter(U){let B,H=this.points||$(this);return(B=(B=[U.tooltipFooterHeaderFormatter(H[0])]).concat(U.bodyFormatter(H))).push(U.tooltipFooterHeaderFormatter(H[0],!0)),B}destroy(){this.label&&(this.label=this.label.destroy()),this.split&&(this.cleanSplit(!0),this.tt&&(this.tt=this.tt.destroy())),this.renderer&&(this.renderer=this.renderer.destroy(),D(this.container)),m.clearTimeout(this.hideTimer)}getAnchor(U,B){let H,{chart:W,pointer:re}=this,de=W.inverted,ie=W.plotTop,oe=W.plotLeft;if((U=$(U))[0].series&&U[0].series.yAxis&&!U[0].series.yAxis.options.reversedStacks&&(U=U.slice().reverse()),this.followPointer&&B)B.chartX===void 0&&(B=re.normalize(B)),H=[B.chartX-oe,B.chartY-ie];else if(U[0].tooltipPos)H=U[0].tooltipPos;else{let Ee=0,xe=0;U.forEach(function(Se){let K=Se.pos(!0);K&&(Ee+=K[0],xe+=K[1])}),Ee/=U.length,xe/=U.length,this.shared&&U.length>1&&B&&(de?Ee=B.chartX:xe=B.chartY),H=[Ee-oe,xe-ie]}return H.map(Math.round)}getClassName(U,B,H){let W=this.options,re=U.series,de=re.options;return[W.className,"highcharts-label",H&&"highcharts-tooltip-header",B?"highcharts-tooltip-box":"highcharts-tooltip",!H&&"highcharts-color-"+O(U.colorIndex,re.colorIndex),de&&de.className].filter(Z).join(" ")}getLabel({anchorX:U,anchorY:B}={anchorX:0,anchorY:0}){let H=this,W=this.chart.styledMode,re=this.options,de=this.split&&this.allowShared,ie=this.container,oe=this.chart.renderer;if(this.label){let Ee=!this.label.hasClass("highcharts-label");(!de&&Ee||de&&!Ee)&&this.destroy()}if(!this.label){if(this.outside){let Ee=this.chart.options.chart.style,xe=p.getRendererType();this.container=ie=u.doc.createElement("div"),ie.className="highcharts-tooltip-container",P(ie,{position:"absolute",top:"1px",pointerEvents:"none",zIndex:Math.max(this.options.style.zIndex||0,(Ee&&Ee.zIndex||0)+3)}),this.renderer=oe=new xe(ie,0,0,Ee,void 0,void 0,oe.styledMode)}if(de?this.label=oe.g("tooltip"):(this.label=oe.label("",U,B,re.shape,void 0,void 0,re.useHTML,void 0,"tooltip").attr({padding:re.padding,r:re.borderRadius}),W||this.label.attr({fill:re.backgroundColor,"stroke-width":re.borderWidth||0}).css(re.style).css({pointerEvents:re.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none")})),H.outside){let Ee=this.label;[Ee.xSetter,Ee.ySetter].forEach((xe,Se)=>{Ee[Se?"ySetter":"xSetter"]=K=>{xe.call(Ee,H.distance),Ee[Se?"y":"x"]=K,ie&&(ie.style[Se?"top":"left"]=`${K}px`)}})}this.label.attr({zIndex:8}).shadow(re.shadow).add()}return ie&&!ie.parentElement&&u.doc.body.appendChild(ie),this.label}getPlayingField(){let{body:U,documentElement:B}=_,{chart:H,distance:W,outside:re}=this;return{width:re?Math.max(U.scrollWidth,B.scrollWidth,U.offsetWidth,B.offsetWidth,B.clientWidth)-2*W:H.chartWidth,height:re?Math.max(U.scrollHeight,B.scrollHeight,U.offsetHeight,B.offsetHeight,B.clientHeight):H.chartHeight}}getPosition(U,B,H){var Pe,je;let{distance:W,chart:re,outside:de,pointer:ie}=this,{inverted:oe,plotLeft:Ee,plotTop:xe,polar:Se}=re,{plotX:K=0,plotY:Q=0}=H,ae={},_e=oe&&H.h||0,{height:J,width:ne}=this.getPlayingField(),ce=ie.getChartPosition(),ye=Xe=>Xe*ce.scaleX,we=Xe=>Xe*ce.scaleY,ze=Xe=>{let et=Xe==="x";return[Xe,et?ne:J,et?U:B].concat(de?[et?ye(U):we(B),et?ce.left-W+ye(K+Ee):ce.top-W+we(Q+xe),0,et?ne:J]:[et?U:B,et?K+Ee:Q+xe,et?Ee:xe,et?Ee+re.plotWidth:xe+re.plotHeight])},Ce=ze("y"),Ie=ze("x"),Fe,Ge=!!H.negative;!Se&&((je=(Pe=re.hoverSeries)==null?void 0:Pe.yAxis)!=null&&je.reversed)&&(Ge=!Ge);let ke=!this.followPointer&&O(H.ttBelow,!Se&&!oe===Ge),ge=function(Xe,et,nt,ht,gt,wt,Rt){let ft=de?Xe==="y"?we(W):ye(W):W,St=(nt-ht)/2,Ct=ht<gt-W,si=gt+W+ht<et,di=gt-ft-nt+St,Ht=gt+ft-St;if(ke&&si)ae[Xe]=Ht;else if(!ke&&Ct)ae[Xe]=di;else if(Ct)ae[Xe]=Math.min(Rt-ht,di-_e<0?di:di-_e);else{if(!si)return!1;ae[Xe]=Math.max(wt,Ht+_e+nt>et?Ht:Ht+_e)}},fe=function(Xe,et,nt,ht,gt){if(gt<W||gt>et-W)return!1;gt<nt/2?ae[Xe]=1:gt>et-ht/2?ae[Xe]=et-ht-2:ae[Xe]=gt-nt/2},Me=function(Xe){[Ce,Ie]=[Ie,Ce],Fe=Xe},De=()=>{ge.apply(0,Ce)!==!1?fe.apply(0,Ie)!==!1||Fe||(Me(!0),De()):Fe?ae.x=ae.y=0:(Me(!0),De())};return(oe&&!Se||this.len>1)&&Me(),De(),ae}hide(U){let B=this;m.clearTimeout(this.hideTimer),U=O(U,this.options.hideDelay),this.isHidden||(this.hideTimer=L(function(){let H=B.getLabel();B.getLabel().animate({opacity:0},{duration:U&&150,complete:()=>{H.hide(),B.container&&B.container.remove()}}),B.isHidden=!0},U))}init(U,B){this.chart=U,this.options=B,this.crosshairs=[],this.isHidden=!0,this.split=B.split&&!U.inverted&&!U.polar,this.shared=B.shared||this.split,this.outside=O(B.outside,!!(U.scrollablePixelsX||U.scrollablePixelsY))}shouldStickOnContact(U){return!!(!this.followPointer&&this.options.stickOnContact&&(!U||this.pointer.inClass(U.target,"highcharts-tooltip")))}move(U,B,H,W){let re=this,de=v(!re.isHidden&&re.options.animation),ie=re.followPointer||(re.len||0)>1,oe={x:U,y:B};ie||(oe.anchorX=H,oe.anchorY=W),de.step=()=>re.drawTracker(),re.getLabel().animate(oe,de)}refresh(U,B){let{chart:H,options:W,pointer:re,shared:de}=this,ie=$(U),oe=ie[0],Ee=[],xe=W.format,Se=W.formatter||this.defaultFormatter,K=H.styledMode,Q={},ae=this.allowShared;if(!W.enabled||!oe.series)return;m.clearTimeout(this.hideTimer),this.allowShared=!(!N(U)&&U.series&&U.series.noSharedTooltip),ae=ae&&!this.allowShared,this.followPointer=!this.split&&oe.series.tooltipOptions.followPointer;let _e=this.getAnchor(U,B),J=_e[0],ne=_e[1];de&&this.allowShared?(re.applyInactiveState(ie),ie.forEach(function(we){we.setState("hover"),Ee.push(we.getLabelConfig())}),(Q=oe.getLabelConfig()).points=Ee):Q=oe.getLabelConfig(),this.len=Ee.length;let ce=Z(xe)?y(xe,Q,H):Se.call(Q,this),ye=oe.series;if(this.distance=O(ye.tooltipOptions.distance,16),ce===!1)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(ce,ie);else{let we=J,ze=ne;if(B&&re.isDirectTouch&&(we=B.chartX-H.plotLeft,ze=B.chartY-H.plotTop),H.polar||ye.options.clip===!1||ie.some(Ce=>re.isDirectTouch||Ce.series.shouldShowTooltip(we,ze))){let Ce=this.getLabel(ae&&this.tt||{});(!W.style.width||K)&&Ce.css({width:(this.outside?this.getPlayingField():H.spacingBox).width+"px"}),Ce.attr({class:this.getClassName(oe),text:ce&&ce.join?ce.join(""):ce}),this.outside&&Ce.attr({x:x(Ce.x||0,0,this.getPlayingField().width-(Ce.width||0))}),K||Ce.attr({stroke:W.borderColor||oe.color||ye.color||"#666666"}),this.updatePosition({plotX:J,plotY:ne,negative:oe.negative,ttBelow:oe.ttBelow,h:_e[2]||0})}else{this.hide();return}}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}I(this,"refresh")}renderSplit(U,B){var et;let H=this,{chart:W,chart:{chartWidth:re,chartHeight:de,plotHeight:ie,plotLeft:oe,plotTop:Ee,scrollablePixelsY:xe=0,scrollablePixelsX:Se,styledMode:K},distance:Q,options:ae,options:{positioner:_e},pointer:J}=H,{scrollLeft:ne=0,scrollTop:ce=0}=((et=W.scrollablePlotArea)==null?void 0:et.scrollingContainer)||{},ye=H.outside&&typeof Se!="number"?_.documentElement.getBoundingClientRect():{left:ne,right:ne+re,top:ce,bottom:ce+de},we=H.getLabel(),ze=this.renderer||W.renderer,Ce=!!(W.xAxis[0]&&W.xAxis[0].opposite),{left:Ie,top:Fe}=J.getChartPosition(),Ge=Ee+ce,ke=0,ge=ie-xe;function fe(nt,ht,gt,wt,Rt=!0){let ft,St;return gt?(ft=Ce?0:ge,St=x(nt-wt/2,ye.left,ye.right-wt-(H.outside?Ie:0))):(ft=ht-Ge,St=x(St=Rt?nt-wt-Q:nt+Q,Rt?St:ye.left,ye.right)),{x:St,y:ft}}Z(U)&&(U=[!1,U]);let Me=U.slice(0,B.length+1).reduce(function(nt,ht,gt){if(ht!==!1&&ht!==""){let wt=B[gt-1]||{isHeader:!0,plotX:B[0].plotX,plotY:ie,series:{}},Rt=wt.isHeader,ft=Rt?H:wt.series,St=ft.tt=function(cn,Zi,xn){let jn=cn,{isHeader:nn,series:dt}=Zi;if(!jn){let vt={padding:ae.padding,r:ae.borderRadius};K||(vt.fill=ae.backgroundColor,vt["stroke-width"]=ae.borderWidth??1),jn=ze.label("",0,0,ae[nn?"headerShape":"shape"],void 0,void 0,ae.useHTML).addClass(H.getClassName(Zi,!0,nn)).attr(vt).add(we)}return jn.isActive=!0,jn.attr({text:xn}),K||jn.css(ae.style).attr({stroke:ae.borderColor||Zi.color||dt.color||"#333333"}),jn}(ft.tt,wt,ht.toString()),Ct=St.getBBox(),si=Ct.width+St.strokeWidth();Rt&&(ke=Ct.height,ge+=ke,Ce&&(Ge-=ke));let{anchorX:di,anchorY:Ht}=function(cn){let Zi,xn,{isHeader:jn,plotX:nn=0,plotY:dt=0,series:vt}=cn;if(jn)Zi=Math.max(oe+nn,oe),xn=Ee+ie/2;else{let{xAxis:Pt,yAxis:Ft}=vt;Zi=Pt.pos+x(nn,-Q,Pt.len+Q),vt.shouldShowTooltip(0,Ft.pos-Ee+dt,{ignoreX:!0})&&(xn=Ft.pos+dt)}return{anchorX:Zi=x(Zi,ye.left-Q,ye.right+Q),anchorY:xn}}(wt);if(typeof Ht=="number"){let cn=Ct.height+1,Zi=_e?_e.call(H,si,cn,wt):fe(di,Ht,Rt,si);nt.push({align:_e?0:void 0,anchorX:di,anchorY:Ht,boxWidth:si,point:wt,rank:O(Zi.rank,Rt?1:0),size:cn,target:Zi.y,tt:St,x:Zi.x})}else St.isActive=!1}return nt},[]);!_e&&Me.some(nt=>{let{outside:ht}=H,gt=(ht?Ie:0)+nt.anchorX;return gt<ye.left&&gt+nt.boxWidth<ye.right||gt<Ie-ye.left+nt.boxWidth&&ye.right-gt>gt})&&(Me=Me.map(nt=>{let{x:ht,y:gt}=fe(nt.anchorX,nt.anchorY,nt.point.isHeader,nt.boxWidth,!1);return T(nt,{target:gt,x:ht})})),H.cleanSplit(),k(Me,ge);let De={left:Ie,right:Ie};Me.forEach(function(nt){let{x:ht,boxWidth:gt,isHeader:wt}=nt;!wt&&(H.outside&&Ie+ht<De.left&&(De.left=Ie+ht),!wt&&H.outside&&De.left+gt>De.right&&(De.right=Ie+ht))}),Me.forEach(function(nt){let{x:ht,anchorX:gt,anchorY:wt,pos:Rt,point:{isHeader:ft}}=nt,St={visibility:Rt===void 0?"hidden":"inherit",x:ht,y:(Rt||0)+Ge,anchorX:gt,anchorY:wt};if(H.outside&&ht<gt){let Ct=Ie-De.left;Ct>0&&(ft||(St.x=ht+Ct,St.anchorX=gt+Ct),ft&&(St.x=(De.right-De.left)/2,St.anchorX=gt+Ct))}nt.tt.attr(St)});let{container:Pe,outside:je,renderer:Xe}=H;if(je&&Pe&&Xe){let{width:nt,height:ht,x:gt,y:wt}=we.getBBox();Xe.setSize(nt+gt,ht+wt,!1),Pe.style.left=De.left+"px",Pe.style.top=Fe+"px"}w&&we.attr({opacity:we.opacity===1?.999:1})}drawTracker(){if(!this.shouldStickOnContact()){this.tracker&&(this.tracker=this.tracker.destroy());return}let U=this.chart,B=this.label,H=this.shared?U.hoverPoints:U.hoverPoint;if(!B||!H)return;let W={x:0,y:0,width:0,height:0},re=this.getAnchor(H),de=B.getBBox();re[0]+=U.plotLeft-(B.translateX||0),re[1]+=U.plotTop-(B.translateY||0),W.x=Math.min(0,re[0]),W.y=Math.min(0,re[1]),W.width=re[0]<0?Math.max(Math.abs(re[0]),de.width-re[0]):Math.max(Math.abs(re[0]),de.width),W.height=re[1]<0?Math.max(Math.abs(re[1]),de.height-Math.abs(re[1])):Math.max(Math.abs(re[1]),de.height),this.tracker?this.tracker.attr(W):(this.tracker=B.renderer.rect(W).addClass("highcharts-tracker").add(B),U.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}styledModeFormat(U){return U.replace('style="font-size: 0.8em"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')}tooltipFooterHeaderFormatter(U,B){let H=U.series,W=H.tooltipOptions,re=H.xAxis,de=re&&re.dateTime,ie={isFooter:B,labelConfig:U},oe=W.xDateFormat,Ee=W[B?"footerFormat":"headerFormat"];return I(this,"headerFormatter",ie,function(xe){de&&!oe&&q(U.key)&&(oe=de.getXDateFormat(U.key,W.dateTimeLabelFormats)),de&&oe&&(U.point&&U.point.tooltipDateKeys||["key"]).forEach(function(Se){Ee=Ee.replace("{point."+Se+"}","{point."+Se+":"+oe+"}")}),H.chart.styledMode&&(Ee=this.styledModeFormat(Ee)),xe.text=y(Ee,{point:U,series:H},this.chart)}),ie.text}update(U){this.destroy(),this.init(this.chart,X(!0,this.options,U))}updatePosition(U){let{chart:B,container:H,distance:W,options:re,pointer:de,renderer:ie}=this,{height:oe=0,width:Ee=0}=this.getLabel(),{left:xe,top:Se,scaleX:K,scaleY:Q}=de.getChartPosition(),ae=(re.positioner||this.getPosition).call(this,Ee,oe,U),_e=(U.plotX||0)+B.plotLeft,J=(U.plotY||0)+B.plotTop,ne;ie&&H&&(re.positioner&&(ae.x+=xe-W,ae.y+=Se-W),ne=(re.borderWidth||0)+2*W+2,ie.setSize(Ee+ne,oe+ne,!1),(K!==1||Q!==1)&&(P(H,{transform:`scale(${K}, ${Q})`}),_e*=K,J*=Q),_e+=xe-ae.x,J+=Se-ae.y),this.move(Math.round(ae.x),Math.round(ae.y||0),_e,J)}}return(g=R).compose=function(G){V(C,"Core.Tooltip")&&S(G,"afterInit",function(){let U=this.chart;U.options.tooltip&&(U.tooltip=new g(U,U.options.tooltip,this))})},R}),r(t,"Core/Series/Point.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Defaults.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(s,l,u,n,p){let{animObject:m}=l,{defaultOptions:g}=u,{format:v}=n,{addEvent:y,crisp:C,erase:_,extend:w,fireEvent:k,getNestedProperty:S,isArray:x,isFunction:P,isNumber:D,isObject:T,merge:I,pick:N,syncTimeout:q,removeEvent:Z,uniqueKey:X}=p;class O{animateBeforeDestroy(){let $=this,L={x:$.startXPos,opacity:0},R=$.getGraphicalProps();R.singular.forEach(function(G){$[G]=$[G].animate(G==="dataLabel"?{x:$[G].startXPos,y:$[G].startYPos,opacity:0}:L)}),R.plural.forEach(function(G){$[G].forEach(function(U){U.element&&U.animate(w({x:$.startXPos},U.startYPos?{x:U.startXPos,y:U.startYPos}:{}))})})}applyOptions($,L){let R=this.series,G=R.options.pointValKey||R.pointValKey;return w(this,$=O.prototype.optionsToObject.call(this,$)),this.options=this.options?w(this.options,$):$,$.group&&delete this.group,$.dataLabels&&delete this.dataLabels,G&&(this.y=O.prototype.getNestedProperty.call(this,G)),this.selected&&(this.state="select"),"name"in this&&L===void 0&&R.xAxis&&R.xAxis.hasNames&&(this.x=R.xAxis.nameToX(this)),this.x===void 0&&R?this.x=L??R.autoIncrement():D($.x)&&R.options.relativeXValue&&(this.x=R.autoIncrement($.x)),this.isNull=this.isValid&&!this.isValid(),this.formatPrefix=this.isNull?"null":"point",this}destroy(){if(!this.destroyed){let $=this,L=$.series,R=L.chart,G=L.options.dataSorting,U=R.hoverPoints,B=m($.series.chart.renderer.globalAnimation),H=()=>{for(let W in($.graphic||$.graphics||$.dataLabel||$.dataLabels)&&(Z($),$.destroyElements()),$)delete $[W]};$.legendItem&&R.legend.destroyItem($),U&&($.setState(),_(U,$),U.length||(R.hoverPoints=null)),$===R.hoverPoint&&$.onMouseOut(),G&&G.enabled?(this.animateBeforeDestroy(),q(H,B.duration)):H(),R.pointCount--}this.destroyed=!0}destroyElements($){let L=this,R=L.getGraphicalProps($);R.singular.forEach(function(G){L[G]=L[G].destroy()}),R.plural.forEach(function(G){L[G].forEach(function(U){U&&U.element&&U.destroy()}),delete L[G]})}firePointEvent($,L,R){let G=this,U=this.series.options;G.manageEvent($),$==="click"&&U.allowPointSelect&&(R=function(B){!G.destroyed&&G.select&&G.select(null,B.ctrlKey||B.metaKey||B.shiftKey)}),k(G,$,L,R)}getClassName(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(this.colorIndex!==void 0?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")}getGraphicalProps($){let L,R,G=this,U=[],B={singular:[],plural:[]};for(($=$||{graphic:1,dataLabel:1}).graphic&&U.push("graphic","connector"),$.dataLabel&&U.push("dataLabel","dataLabelPath","dataLabelUpper"),R=U.length;R--;)G[L=U[R]]&&B.singular.push(L);return["graphic","dataLabel"].forEach(function(H){let W=H+"s";$[H]&&G[W]&&B.plural.push(W)}),B}getLabelConfig(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}}getNestedProperty($){return $?$.indexOf("custom.")===0?S($,this.options):this[$]:void 0}getZone(){let $=this.series,L=$.zones,R=$.zoneAxis||"y",G,U=0;for(G=L[0];this[R]>=G.value;)G=L[++U];return this.nonZonedColor||(this.nonZonedColor=this.color),G&&G.color&&!this.options.color?this.color=G.color:this.color=this.nonZonedColor,G}hasNewShapeType(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType}constructor($,L,R){this.formatPrefix="point",this.visible=!0,this.series=$,this.applyOptions(L,R),this.id??(this.id=X()),this.resolveColor(),$.chart.pointCount++,k(this,"afterInit")}isValid(){return(D(this.x)||this.x instanceof Date)&&D(this.y)}optionsToObject($){let L=this.series,R=L.options.keys,G=R||L.pointArrayMap||["y"],U=G.length,B={},H,W=0,re=0;if(D($)||$===null)B[G[0]]=$;else if(x($))for(!R&&$.length>U&&((H=typeof $[0])=="string"?B.name=$[0]:H==="number"&&(B.x=$[0]),W++);re<U;)R&&$[W]===void 0||(G[re].indexOf(".")>0?O.prototype.setNestedProperty(B,$[W],G[re]):B[G[re]]=$[W]),W++,re++;else typeof $=="object"&&(B=$,$.dataLabels&&(L.hasDataLabels=()=>!0),$.marker&&(L._hasPointMarkers=!0));return B}pos($,L=this.plotY){if(!this.destroyed){let{plotX:R,series:G}=this,{chart:U,xAxis:B,yAxis:H}=G,W=0,re=0;if(D(R)&&D(L))return $&&(W=B?B.pos:U.plotLeft,re=H?H.pos:U.plotTop),U.inverted&&B&&H?[H.len-L+re,B.len-R+W]:[R+W,L+re]}}resolveColor(){let $=this.series,L=$.chart.options.chart,R=$.chart.styledMode,G,U,B=L.colorCount,H;delete this.nonZonedColor,$.options.colorByPoint?(R||(G=(U=$.options.colors||$.chart.options.colors)[$.colorCounter],B=U.length),H=$.colorCounter,$.colorCounter++,$.colorCounter===B&&($.colorCounter=0)):(R||(G=$.color),H=$.colorIndex),this.colorIndex=N(this.options.colorIndex,H),this.color=N(this.options.color,G)}setNestedProperty($,L,R){return R.split(".").reduce(function(G,U,B,H){let W=H.length-1===B;return G[U]=W?L:T(G[U],!0)?G[U]:{},G[U]},$),$}shouldDraw(){return!this.isNull}tooltipFormatter($){let L=this.series,R=L.tooltipOptions,G=N(R.valueDecimals,""),U=R.valuePrefix||"",B=R.valueSuffix||"";return L.chart.styledMode&&($=L.chart.tooltip.styledModeFormat($)),(L.pointArrayMap||["y"]).forEach(function(H){H="{point."+H,(U||B)&&($=$.replace(RegExp(H+"}","g"),U+H+"}"+B)),$=$.replace(RegExp(H+"}","g"),H+":,."+G+"f}")}),v($,{point:this,series:this.series},L.chart)}update($,L,R,G){let U,B=this,H=B.series,W=B.graphic,re=H.chart,de=H.options;function ie(){B.applyOptions($);let oe=W&&B.hasMockGraphic,Ee=B.y===null?!oe:oe;W&&Ee&&(B.graphic=W.destroy(),delete B.hasMockGraphic),T($,!0)&&(W&&W.element&&$&&$.marker&&$.marker.symbol!==void 0&&(B.graphic=W.destroy()),$!=null&&$.dataLabels&&B.dataLabel&&(B.dataLabel=B.dataLabel.destroy())),U=B.index,H.updateParallelArrays(B,U),de.data[U]=T(de.data[U],!0)||T($,!0)?B.options:N($,de.data[U]),H.isDirty=H.isDirtyData=!0,!H.fixedBox&&H.hasCartesianSeries&&(re.isDirtyBox=!0),de.legendType==="point"&&(re.isDirtyLegend=!0),L&&re.redraw(R)}L=N(L,!0),G===!1?ie():B.firePointEvent("update",{options:$},ie)}remove($,L){this.series.removePoint(this.series.data.indexOf(this),$,L)}select($,L){let R=this,G=R.series,U=G.chart;$=N($,!R.selected),this.selectedStaging=$,R.firePointEvent($?"select":"unselect",{accumulate:L},function(){R.selected=R.options.selected=$,G.options.data[G.data.indexOf(R)]=R.options,R.setState($&&"select"),L||U.getSelectedPoints().forEach(function(B){let H=B.series;B.selected&&B!==R&&(B.selected=B.options.selected=!1,H.options.data[H.data.indexOf(B)]=B.options,B.setState(U.hoverPoints&&H.options.inactiveOtherPoints?"inactive":""),B.firePointEvent("unselect"))})}),delete this.selectedStaging}onMouseOver($){let{inverted:L,pointer:R}=this.series.chart;R&&($=$?R.normalize($):R.getChartCoordinatesFromPoint(this,L),R.runPointActions($,this))}onMouseOut(){let $=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||($.hoverPoints||[]).forEach(function(L){L.setState()}),$.hoverPoints=$.hoverPoint=null}manageEvent($){var G,U,B,H,W,re;let L=I(this.series.options.point,this.options),R=(G=L.events)==null?void 0:G[$];P(R)&&(!((U=this.hcEvents)!=null&&U[$])||((H=(B=this.hcEvents)==null?void 0:B[$])==null?void 0:H.map(de=>de.fn).indexOf(R))===-1)?((W=this.importedUserEvent)==null||W.call(this),this.importedUserEvent=y(this,$,R)):this.importedUserEvent&&!R&&((re=this.hcEvents)!=null&&re[$])&&(Z(this,$),delete this.hcEvents[$],Object.keys(this.hcEvents)||delete this.importedUserEvent)}setState($,L){var ce;let R=this.series,G=this.state,U=R.options.states[$||"normal"]||{},B=g.plotOptions[R.type].marker&&R.options.marker,H=B&&B.enabled===!1,W=B&&B.states&&B.states[$||"normal"]||{},re=W.enabled===!1,de=this.marker||{},ie=R.chart,oe=B&&R.markerAttribs,Ee=R.halo,xe,Se,K,Q=R.stateMarkerGraphic,ae;if(($=$||"")===this.state&&!L||this.selected&&$!=="select"||U.enabled===!1||$&&(re||H&&W.enabled===!1)||$&&de.states&&de.states[$]&&de.states[$].enabled===!1)return;if(this.state=$,oe&&(xe=R.markerAttribs(this,$)),this.graphic&&!this.hasMockGraphic){if(G&&this.graphic.removeClass("highcharts-point-"+G),$&&this.graphic.addClass("highcharts-point-"+$),!ie.styledMode){Se=R.pointAttribs(this,$),K=N(ie.options.chart.animation,U.animation);let ye=Se.opacity;R.options.inactiveOtherPoints&&D(ye)&&(this.dataLabels||[]).forEach(function(we){we&&!we.hasClass("highcharts-data-label-hidden")&&(we.animate({opacity:ye},K),we.connector&&we.connector.animate({opacity:ye},K))}),this.graphic.animate(Se,K)}xe&&this.graphic.animate(xe,N(ie.options.chart.animation,W.animation,B.animation)),Q&&Q.hide()}else $&&W&&(ae=de.symbol||R.symbol,Q&&Q.currentSymbol!==ae&&(Q=Q.destroy()),xe&&(Q?Q[L?"animate":"attr"]({x:xe.x,y:xe.y}):ae&&(R.stateMarkerGraphic=Q=ie.renderer.symbol(ae,xe.x,xe.y,xe.width,xe.height).add(R.markerGroup),Q.currentSymbol=ae)),!ie.styledMode&&Q&&this.state!=="inactive"&&Q.attr(R.pointAttribs(this,$))),Q&&(Q[$&&this.isInside?"show":"hide"](),Q.element.point=this,Q.addClass(this.getClassName(),!0));let _e=U.halo,J=this.graphic||Q,ne=J&&J.visibility||"inherit";_e&&_e.size&&J&&ne!=="hidden"&&!this.isCluster?(Ee||(R.halo=Ee=ie.renderer.path().add(J.parentGroup)),Ee.show()[L?"animate":"attr"]({d:this.haloPath(_e.size)}),Ee.attr({class:"highcharts-halo highcharts-color-"+N(this.colorIndex,R.colorIndex)+(this.className?" "+this.className:""),visibility:ne,zIndex:-1}),Ee.point=this,ie.styledMode||Ee.attr(w({fill:this.color||R.color,"fill-opacity":_e.opacity},s.filterUserAttributes(_e.attributes||{})))):(ce=Ee==null?void 0:Ee.point)!=null&&ce.haloPath&&!Ee.point.destroyed&&Ee.animate({d:Ee.point.haloPath(0)},null,Ee.hide),k(this,"afterSetState",{state:$})}haloPath($){let L=this.pos();return L?this.series.chart.renderer.symbols.circle(C(L[0],1)-$,L[1]-$,2*$,2*$):[]}}return O}),r(t,"Core/Pointer.js",[t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){var n;let{parse:p}=s,{charts:m,composed:g,isTouchDevice:v}=l,{addEvent:y,attr:C,css:_,extend:w,find:k,fireEvent:S,isNumber:x,isObject:P,objectEach:D,offset:T,pick:I,pushUnique:N,splat:q}=u;class Z{applyInactiveState(O){let V=[],$;(O||[]).forEach(function(L){$=L.series,V.push($),$.linkedParent&&V.push($.linkedParent),$.linkedSeries&&(V=V.concat($.linkedSeries)),$.navigatorSeries&&V.push($.navigatorSeries)}),this.chart.series.forEach(function(L){V.indexOf(L)===-1?L.setState("inactive",!0):L.options.inactiveOtherPoints&&L.setAllPointsToState("inactive")})}destroy(){let O=this;this.eventsToUnbind.forEach(V=>V()),this.eventsToUnbind=[],!l.chartCount&&(Z.unbindDocumentMouseUp&&Z.unbindDocumentMouseUp.forEach(V=>V()),Z.unbindDocumentTouchEnd&&(Z.unbindDocumentTouchEnd=Z.unbindDocumentTouchEnd())),clearInterval(O.tooltipTimeout),D(O,function(V,$){O[$]=void 0})}getSelectionMarkerAttrs(O,V){let $={args:{chartX:O,chartY:V},attrs:{},shapeType:"rect"};return S(this,"getSelectionMarkerAttrs",$,L=>{let R,{chart:G,zoomHor:U,zoomVert:B}=this,{mouseDownX:H=0,mouseDownY:W=0}=G,re=L.attrs;re.x=G.plotLeft,re.y=G.plotTop,re.width=U?1:G.plotWidth,re.height=B?1:G.plotHeight,U&&(R=O-H,re.width=Math.max(1,Math.abs(R)),re.x=(R>0?0:R)+H),B&&(R=V-W,re.height=Math.max(1,Math.abs(R)),re.y=(R>0?0:R)+W)}),$}drag(O){let{chart:V}=this,{mouseDownX:$=0,mouseDownY:L=0}=V,{panning:R,panKey:G,selectionMarkerFill:U}=V.options.chart,B=V.plotLeft,H=V.plotTop,W=V.plotWidth,re=V.plotHeight,de=P(R)?R.enabled:R,ie=G&&O[`${G}Key`],oe=O.chartX,Ee=O.chartY,xe,Se=this.selectionMarker;if((!Se||!Se.touch)&&(oe<B?oe=B:oe>B+W&&(oe=B+W),Ee<H?Ee=H:Ee>H+re&&(Ee=H+re),this.hasDragged=Math.sqrt(Math.pow($-oe,2)+Math.pow(L-Ee,2)),this.hasDragged>10)){xe=V.isInsidePlot($-B,L-H,{visiblePlotOnly:!0});let{shapeType:K,attrs:Q}=this.getSelectionMarkerAttrs(oe,Ee);(V.hasCartesianSeries||V.mapView)&&this.hasZoom&&xe&&!ie&&!Se&&(this.selectionMarker=Se=V.renderer[K](),Se.attr({class:"highcharts-selection-marker",zIndex:7}).add(),V.styledMode||Se.attr({fill:U||p("#334eff").setOpacity(.25).get()})),Se&&Se.attr(Q),xe&&!Se&&de&&V.pan(O,R)}}dragStart(O){let V=this.chart;V.mouseIsDown=O.type,V.cancelClick=!1,V.mouseDownX=O.chartX,V.mouseDownY=O.chartY}getSelectionBox(O){let V={args:{marker:O},result:O.getBBox()};return S(this,"getSelectionBox",V),V.result}drop(O){let V,{chart:$,selectionMarker:L}=this;for(let R of $.axes)R.isPanning&&(R.isPanning=!1,(R.options.startOnTick||R.options.endOnTick||R.series.some(G=>G.boosted))&&(R.forceRedraw=!0,R.setExtremes(R.userMin,R.userMax,!1),V=!0));if(V&&$.redraw(),L&&O){if(this.hasDragged){let R=this.getSelectionBox(L);$.transform({axes:$.axes.filter(G=>G.zoomEnabled&&(G.coll==="xAxis"&&this.zoomX||G.coll==="yAxis"&&this.zoomY)),selection:{originalEvent:O,xAxis:[],yAxis:[],...R},from:R})}x($.index)&&(this.selectionMarker=L.destroy())}$&&x($.index)&&(_($.container,{cursor:$._cursor}),$.cancelClick=this.hasDragged>10,$.mouseIsDown=!1,this.hasDragged=0,this.pinchDown=[])}findNearestKDPoint(O,V,$){let L;return O.forEach(function(R){let G=!(R.noSharedTooltip&&V)&&0>R.options.findNearestPointBy.indexOf("y"),U=R.searchPoint($,G);P(U,!0)&&U.series&&(!P(L,!0)||function(B,H){var ie,oe;let W=B.distX-H.distX,re=B.dist-H.dist,de=((ie=H.series.group)==null?void 0:ie.zIndex)-((oe=B.series.group)==null?void 0:oe.zIndex);return W!==0&&V?W:re!==0?re:de!==0?de:B.series.index>H.series.index?-1:1}(L,U)>0)&&(L=U)}),L}getChartCoordinatesFromPoint(O,V){let{xAxis:$,yAxis:L}=O.series,R=O.shapeArgs;if($&&L){let G=O.clientX??O.plotX??0,U=O.plotY||0;return O.isNode&&R&&x(R.x)&&x(R.y)&&(G=R.x,U=R.y),V?{chartX:L.len+L.pos-U,chartY:$.len+$.pos-G}:{chartX:G+$.pos,chartY:U+L.pos}}if(R&&R.x&&R.y)return{chartX:R.x,chartY:R.y}}getChartPosition(){if(this.chartPosition)return this.chartPosition;let{container:O}=this.chart,V=T(O);this.chartPosition={left:V.left,top:V.top,scaleX:1,scaleY:1};let{offsetHeight:$,offsetWidth:L}=O;return L>2&&$>2&&(this.chartPosition.scaleX=V.width/L,this.chartPosition.scaleY=V.height/$),this.chartPosition}getCoordinates(O){let V={xAxis:[],yAxis:[]};for(let $ of this.chart.axes)V[$.isXAxis?"xAxis":"yAxis"].push({axis:$,value:$.toValue(O[$.horiz?"chartX":"chartY"])});return V}getHoverData(O,V,$,L,R,G){let U=[],B=function(ie){return ie.visible&&!(!R&&ie.directTouch)&&I(ie.options.enableMouseTracking,!0)},H=V,W,re={chartX:G?G.chartX:void 0,chartY:G?G.chartY:void 0,shared:R};S(this,"beforeGetHoverData",re),W=H&&!H.stickyTracking?[H]:$.filter(ie=>ie.stickyTracking&&(re.filter||B)(ie));let de=L&&O||!G?O:this.findNearestKDPoint(W,R,G);return H=de&&de.series,de&&(R&&!H.noSharedTooltip?(W=$.filter(function(ie){return re.filter?re.filter(ie):B(ie)&&!ie.noSharedTooltip})).forEach(function(ie){let oe=k(ie.points,function(Ee){return Ee.x===de.x&&!Ee.isNull});P(oe)&&(ie.boosted&&ie.boost&&(oe=ie.boost.getPoint(oe)),U.push(oe))}):U.push(de)),S(this,"afterGetHoverData",re={hoverPoint:de}),{hoverPoint:re.hoverPoint,hoverSeries:H,hoverPoints:U}}getPointFromEvent(O){let V=O.target,$;for(;V&&!$;)$=V.point,V=V.parentNode;return $}onTrackerMouseOut(O){let V=this.chart,$=O.relatedTarget,L=V.hoverSeries;this.isDirectTouch=!1,!L||!$||L.stickyTracking||this.inClass($,"highcharts-tooltip")||this.inClass($,"highcharts-series-"+L.index)&&this.inClass($,"highcharts-tracker")||L.onMouseOut()}inClass(O,V){let $=O,L;for(;$;){if(L=C($,"class")){if(L.indexOf(V)!==-1)return!0;if(L.indexOf("highcharts-container")!==-1)return!1}$=$.parentElement}}constructor(O,V){var $;this.hasDragged=0,this.pointerCaptureEventsToUnbind=[],this.eventsToUnbind=[],this.options=V,this.chart=O,this.runChartClick=!!(($=V.chart.events)!=null&&$.click),this.pinchDown=[],this.setDOMEvents(),S(this,"afterInit")}normalize(O,V){let $=O.touches,L=$?$.length?$.item(0):I($.changedTouches,O.changedTouches)[0]:O;V||(V=this.getChartPosition());let R=L.pageX-V.left,G=L.pageY-V.top;return w(O,{chartX:Math.round(R/=V.scaleX),chartY:Math.round(G/=V.scaleY)})}onContainerClick(O){let V=this.chart,$=V.hoverPoint,L=this.normalize(O),R=V.plotLeft,G=V.plotTop;!V.cancelClick&&($&&this.inClass(L.target,"highcharts-tracker")?(S($.series,"click",w(L,{point:$})),V.hoverPoint&&$.firePointEvent("click",L)):(w(L,this.getCoordinates(L)),V.isInsidePlot(L.chartX-R,L.chartY-G,{visiblePlotOnly:!0})&&S(V,"click",L)))}onContainerMouseDown(O){var $;let V=(1&(O.buttons||O.button))==1;O=this.normalize(O),l.isFirefox&&O.button!==0&&this.onContainerMouseMove(O),(O.button===void 0||V)&&(this.zoomOption(O),V&&(($=O.preventDefault)==null||$.call(O)),this.dragStart(O))}onContainerMouseLeave(O){let{pointer:V}=m[I(Z.hoverChartIndex,-1)]||{};O=this.normalize(O),this.onContainerMouseMove(O),V&&!this.inClass(O.relatedTarget,"highcharts-tooltip")&&(V.reset(),V.chartPosition=void 0)}onContainerMouseEnter(){delete this.chartPosition}onContainerMouseMove(O){let V=this.chart,$=V.tooltip,L=this.normalize(O);this.setHoverChartIndex(O),(V.mouseIsDown==="mousedown"||this.touchSelect(L))&&this.drag(L),!V.openMenu&&(this.inClass(L.target,"highcharts-tracker")||V.isInsidePlot(L.chartX-V.plotLeft,L.chartY-V.plotTop,{visiblePlotOnly:!0}))&&!($&&$.shouldStickOnContact(L))&&(this.inClass(L.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(L))}onDocumentTouchEnd(O){this.onDocumentMouseUp(O)}onContainerTouchMove(O){this.touchSelect(O)?this.onContainerMouseMove(O):this.touch(O)}onContainerTouchStart(O){this.touchSelect(O)?this.onContainerMouseDown(O):(this.zoomOption(O),this.touch(O,!0))}onDocumentMouseMove(O){let V=this.chart,$=V.tooltip,L=this.chartPosition,R=this.normalize(O,L);!L||V.isInsidePlot(R.chartX-V.plotLeft,R.chartY-V.plotTop,{visiblePlotOnly:!0})||$&&$.shouldStickOnContact(R)||R.target!==V.container.ownerDocument&&this.inClass(R.target,"highcharts-tracker")||this.reset()}onDocumentMouseUp(O){var V,$;($=(V=m[I(Z.hoverChartIndex,-1)])==null?void 0:V.pointer)==null||$.drop(O)}pinch(O){let V=this,{chart:$,hasZoom:L,lastTouches:R}=V,G=[].map.call(O.touches||[],re=>V.normalize(re)),U=G.length,B=U===1&&(V.inClass(O.target,"highcharts-tracker")&&$.runTrackerClick||V.runChartClick),H=$.tooltip,W=U===1&&I(H==null?void 0:H.options.followTouchMove,!0);U>1?V.initiated=!0:W&&(V.initiated=!1),L&&V.initiated&&!B&&O.cancelable!==!1&&O.preventDefault(),O.type==="touchstart"?(V.pinchDown=G,V.res=!0,$.mouseDownX=O.chartX):W?this.runPointActions(V.normalize(O)):R&&(S($,"touchpan",{originalEvent:O,touches:G},()=>{let re=de=>{let ie=de[0],oe=de[1]||ie;return{x:ie.chartX,y:ie.chartY,width:oe.chartX-ie.chartX,height:oe.chartY-ie.chartY}};$.transform({axes:$.axes.filter(de=>de.zoomEnabled&&(this.zoomHor&&de.horiz||this.zoomVert&&!de.horiz)),to:re(G),from:re(R),trigger:O.type})}),V.res&&(V.res=!1,this.reset(!1,0))),V.lastTouches=G}reset(O,V){let $=this.chart,L=$.hoverSeries,R=$.hoverPoint,G=$.hoverPoints,U=$.tooltip,B=U&&U.shared?G:R;O&&B&&q(B).forEach(function(H){H.series.isCartesian&&H.plotX===void 0&&(O=!1)}),O?U&&B&&q(B).length&&(U.refresh(B),U.shared&&G?G.forEach(function(H){H.setState(H.state,!0),H.series.isCartesian&&(H.series.xAxis.crosshair&&H.series.xAxis.drawCrosshair(null,H),H.series.yAxis.crosshair&&H.series.yAxis.drawCrosshair(null,H))}):R&&(R.setState(R.state,!0),$.axes.forEach(function(H){H.crosshair&&R.series[H.coll]===H&&H.drawCrosshair(null,R)}))):(R&&R.onMouseOut(),G&&G.forEach(function(H){H.setState()}),L&&L.onMouseOut(),U&&U.hide(V),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),$.axes.forEach(function(H){H.hideCrosshair()}),$.hoverPoints=$.hoverPoint=void 0)}runPointActions(O,V,$){let L=this.chart,R=L.series,G=L.tooltip&&L.tooltip.options.enabled?L.tooltip:void 0,U=!!G&&G.shared,B=V||L.hoverPoint,H=B&&B.series||L.hoverSeries,W=(!O||O.type!=="touchmove")&&(!!V||H&&H.directTouch&&this.isDirectTouch),re=this.getHoverData(B,H,R,W,U,O);B=re.hoverPoint,H=re.hoverSeries;let de=re.hoverPoints,ie=H&&H.tooltipOptions.followPointer&&!H.tooltipOptions.split,oe=U&&H&&!H.noSharedTooltip;if(B&&($||B!==L.hoverPoint||G&&G.isHidden)){if((L.hoverPoints||[]).forEach(function(Ee){de.indexOf(Ee)===-1&&Ee.setState()}),L.hoverSeries!==H&&H.onMouseOver(),this.applyInactiveState(de),(de||[]).forEach(function(Ee){Ee.setState("hover")}),L.hoverPoint&&L.hoverPoint.firePointEvent("mouseOut"),!B.series)return;L.hoverPoints=de,L.hoverPoint=B,B.firePointEvent("mouseOver",void 0,()=>{G&&B&&G.refresh(oe?de:B,O)})}else if(ie&&G&&!G.isHidden){let Ee=G.getAnchor([{}],O);L.isInsidePlot(Ee[0],Ee[1],{visiblePlotOnly:!0})&&G.updatePosition({plotX:Ee[0],plotY:Ee[1]})}this.unDocMouseMove||(this.unDocMouseMove=y(L.container.ownerDocument,"mousemove",Ee=>{var xe,Se;return(Se=(xe=m[Z.hoverChartIndex??-1])==null?void 0:xe.pointer)==null?void 0:Se.onDocumentMouseMove(Ee)}),this.eventsToUnbind.push(this.unDocMouseMove)),L.axes.forEach(function(Ee){let xe,Se=I((Ee.crosshair||{}).snap,!0);!Se||(xe=L.hoverPoint)&&xe.series[Ee.coll]===Ee||(xe=k(de,K=>K.series&&K.series[Ee.coll]===Ee)),xe||!Se?Ee.drawCrosshair(O,xe):Ee.hideCrosshair()})}setDOMEvents(){let O=this.chart.container,V=O.ownerDocument;O.onmousedown=this.onContainerMouseDown.bind(this),O.onmousemove=this.onContainerMouseMove.bind(this),O.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(y(O,"mouseenter",this.onContainerMouseEnter.bind(this)),y(O,"mouseleave",this.onContainerMouseLeave.bind(this))),Z.unbindDocumentMouseUp||(Z.unbindDocumentMouseUp=[]),Z.unbindDocumentMouseUp.push(y(V,"mouseup",this.onDocumentMouseUp.bind(this)));let $=this.chart.renderTo.parentElement;for(;$&&$.tagName!=="BODY";)this.eventsToUnbind.push(y($,"scroll",()=>{delete this.chartPosition})),$=$.parentElement;this.eventsToUnbind.push(y(O,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1}),y(O,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),Z.unbindDocumentTouchEnd||(Z.unbindDocumentTouchEnd=y(V,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})),this.setPointerCapture(),y(this.chart,"redraw",this.setPointerCapture.bind(this))}setPointerCapture(){var R,G;if(!v)return;let O=this.pointerCaptureEventsToUnbind,V=this.chart,$=V.container,L=I((R=V.options.tooltip)==null?void 0:R.followTouchMove,!0)&&V.series.some(U=>U.options.findNearestPointBy.indexOf("y")>-1);!this.hasPointerCapture&&L?(O.push(y($,"pointerdown",U=>{var B,H;(B=U.target)!=null&&B.hasPointerCapture(U.pointerId)&&((H=U.target)==null||H.releasePointerCapture(U.pointerId))}),y($,"pointermove",U=>{var B,H;(H=(B=V.pointer)==null?void 0:B.getPointFromEvent(U))==null||H.onMouseOver(U)})),V.styledMode||_($,{"touch-action":"none"}),$.className+=" highcharts-no-touch-action",this.hasPointerCapture=!0):this.hasPointerCapture&&!L&&(O.forEach(U=>U()),O.length=0,V.styledMode||_($,{"touch-action":I((G=V.options.chart.style)==null?void 0:G["touch-action"],"manipulation")}),$.className=$.className.replace(" highcharts-no-touch-action",""),this.hasPointerCapture=!1)}setHoverChartIndex(O){var L;let V=this.chart,$=l.charts[I(Z.hoverChartIndex,-1)];if($&&$!==V){let R={relatedTarget:V.container};O&&!(O!=null&&O.relatedTarget)&&(O={...R,...O}),(L=$.pointer)==null||L.onContainerMouseLeave(O||R)}$&&$.mouseIsDown||(Z.hoverChartIndex=V.index)}touch(O,V){let $,{chart:L,pinchDown:R=[]}=this;this.setHoverChartIndex(),(O=this.normalize(O)).touches.length===1?L.isInsidePlot(O.chartX-L.plotLeft,O.chartY-L.plotTop,{visiblePlotOnly:!0})&&!L.openMenu?(V&&this.runPointActions(O),O.type==="touchmove"&&($=!!R[0]&&Math.pow(R[0].chartX-O.chartX,2)+Math.pow(R[0].chartY-O.chartY,2)>=16),I($,!0)&&this.pinch(O)):V&&this.reset():O.touches.length===2&&this.pinch(O)}touchSelect(O){return!!(this.chart.zooming.singleTouch&&O.touches&&O.touches.length===1)}zoomOption(O){let V=this.chart,$=V.inverted,L=V.zooming.type||"",R,G;/touch/.test(O.type)&&(L=I(V.zooming.pinchType,L)),this.zoomX=R=/x/.test(L),this.zoomY=G=/y/.test(L),this.zoomHor=R&&!$||G&&$,this.zoomVert=G&&!$||R&&$,this.hasZoom=R||G}}return(n=Z).compose=function(X){N(g,"Core.Pointer")&&y(X,"beforeRender",function(){this.pointer=new n(this,this.options)})},Z}),r(t,"Core/Legend/LegendSymbol.js",[t["Core/Utilities.js"]],function(s){var l;let{extend:u,merge:n,pick:p}=s;return function(m){function g(v,y,C){var $,L;let _=this.legendItem=this.legendItem||{},{chart:w,options:k}=this,{baseline:S=0,symbolWidth:x,symbolHeight:P}=v,D=this.symbol||"circle",T=P/2,I=w.renderer,N=_.group,q=S-Math.round(((($=v.fontMetrics)==null?void 0:$.b)||P)*(C?.4:.3)),Z={},X,O=k.marker,V=0;if(w.styledMode||(Z["stroke-width"]=Math.min(k.lineWidth||0,24),k.dashStyle?Z.dashstyle=k.dashStyle:k.linecap==="square"||(Z["stroke-linecap"]="round")),_.line=I.path().addClass("highcharts-graph").attr(Z).add(N),C&&(_.area=I.path().addClass("highcharts-area").add(N)),Z["stroke-linecap"]&&(V=Math.min(_.line.strokeWidth(),x)/2),x){let R=[["M",V,q],["L",x-V,q]];_.line.attr({d:R}),(L=_.area)==null||L.attr({d:[...R,["L",x-V,S],["L",V,S]]})}if(O&&O.enabled!==!1&&x){let R=Math.min(p(O.radius,T),T);D.indexOf("url")===0&&(O=n(O,{width:P,height:P}),R=0),_.symbol=X=I.symbol(D,x/2-R,q-R,2*R,2*R,u({context:"legend"},O)).addClass("highcharts-point").add(N),X.isMarker=!0}}m.areaMarker=function(v,y){g.call(this,v,y,!0)},m.lineMarker=g,m.rectangle=function(v,y){let C=y.legendItem||{},_=v.options,w=v.symbolHeight,k=_.squareSymbol,S=k?w:v.symbolWidth;C.symbol=this.chart.renderer.rect(k?(v.symbolWidth-w)/2:0,v.baseline-w+1,S,w,p(v.options.symbolRadius,w/2)).addClass("highcharts-point").attr({zIndex:3}).add(C.group)}}(l||(l={})),l}),r(t,"Core/Series/SeriesDefaults.js",[],function(){return{lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},enableMouseTracking:!0,events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:150},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",borderWidth:0,defer:!0,formatter:function(){let{numberFormatter:s}=this.series.chart;return typeof this.y!="number"?"":s(this.y,-1)},padding:5,style:{fontSize:"0.7em",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:150},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:150},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"}}),r(t,"Core/Series/SeriesRegistry.js",[t["Core/Globals.js"],t["Core/Defaults.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(s,l,u,n){var p;let{defaultOptions:m}=l,{extend:g,extendClass:v,merge:y}=n;return function(C){function _(w,k){let S=m.plotOptions||{},x=k.defaultOptions,P=k.prototype;return P.type=w,P.pointClass||(P.pointClass=u),!C.seriesTypes[w]&&(x&&(S[w]=x),C.seriesTypes[w]=k,!0)}C.seriesTypes=s.seriesTypes,C.registerSeriesType=_,C.seriesType=function(w,k,S,x,P){let D=m.plotOptions||{};if(k=k||"",D[w]=y(D[k],S),delete C.seriesTypes[w],_(w,v(C.seriesTypes[k]||function(){},x)),C.seriesTypes[w].prototype.type=w,P){class T extends u{}g(T.prototype,P),C.seriesTypes[w].prototype.pointClass=T}return C.seriesTypes[w]}}(p||(p={})),p}),r(t,"Core/Series/Series.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Defaults.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Series/Point.js"],t["Core/Series/SeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(s,l,u,n,p,m,g,v,y,C){let{animObject:_,setAnimation:w}=s,{defaultOptions:k}=l,{registerEventOptions:S}=u,{svg:x,win:P}=n,{seriesTypes:D}=v,{arrayMax:T,arrayMin:I,clamp:N,correctFloat:q,crisp:Z,defined:X,destroyObjectProperties:O,diffObjects:V,erase:$,error:L,extend:R,find:G,fireEvent:U,getClosestDistance:B,getNestedProperty:H,insertItem:W,isArray:re,isNumber:de,isString:ie,merge:oe,objectEach:Ee,pick:xe,removeEvent:Se,splat:K,syncTimeout:Q}=C;class ae{constructor(){this.zoneAxis="y"}init(J,ne){let ce;U(this,"init",{options:ne});let ye=this,we=J.series;this.eventsToUnbind=[],ye.chart=J,ye.options=ye.setOptions(ne);let ze=ye.options,Ce=ze.visible!==!1;ye.linkedSeries=[],ye.bindAxes(),R(ye,{name:ze.name,state:"",visible:Ce,selected:ze.selected===!0}),S(this,ze);let Ie=ze.events;(Ie&&Ie.click||ze.point&&ze.point.events&&ze.point.events.click||ze.allowPointSelect)&&(J.runTrackerClick=!0),ye.getColor(),ye.getSymbol(),ye.parallelArrays.forEach(function(Fe){ye[Fe+"Data"]||(ye[Fe+"Data"]=[])}),ye.isCartesian&&(J.hasCartesianSeries=!0),we.length&&(ce=we[we.length-1]),ye._i=xe(ce&&ce._i,-1)+1,ye.opacity=ye.options.opacity,J.orderItems("series",W(this,we)),ze.dataSorting&&ze.dataSorting.enabled?ye.setDataSortingOptions():ye.points||ye.data||ye.setData(ze.data,!1),U(this,"afterInit")}is(J){return D[J]&&this instanceof D[J]}bindAxes(){let J,ne=this,ce=ne.options,ye=ne.chart;U(this,"bindAxes",null,function(){(ne.axisTypes||[]).forEach(function(we){(ye[we]||[]).forEach(function(ze){J=ze.options,(xe(ce[we],0)===ze.index||ce[we]!==void 0&&ce[we]===J.id)&&(W(ne,ze.series),ne[we]=ze,ze.isDirty=!0)}),ne[we]||ne.optionalAxis===we||L(18,!0,ye)})}),U(this,"afterBindAxes")}updateParallelArrays(J,ne,ce){let ye=J.series,we=de(ne)?function(ze){let Ce=ze==="y"&&ye.toYData?ye.toYData(J):J[ze];ye[ze+"Data"][ne]=Ce}:function(ze){Array.prototype[ne].apply(ye[ze+"Data"],ce)};ye.parallelArrays.forEach(we)}hasData(){return this.visible&&this.dataMax!==void 0&&this.dataMin!==void 0||this.visible&&this.yData&&this.yData.length>0}hasMarkerChanged(J,ne){let ce=J.marker,ye=ne.marker||{};return ce&&(ye.enabled&&!ce.enabled||ye.symbol!==ce.symbol||ye.height!==ce.height||ye.width!==ce.width)}autoIncrement(J){let ne=this.options,ce=ne.pointIntervalUnit,ye=ne.relativeXValue,we=this.chart.time,ze=this.xIncrement,Ce,Ie;return ze=xe(ze,ne.pointStart,0),this.pointInterval=Ie=xe(this.pointInterval,ne.pointInterval,1),ye&&de(J)&&(Ie*=J),ce&&(Ce=new we.Date(ze),ce==="day"?we.set("Date",Ce,we.get("Date",Ce)+Ie):ce==="month"?we.set("Month",Ce,we.get("Month",Ce)+Ie):ce==="year"&&we.set("FullYear",Ce,we.get("FullYear",Ce)+Ie),Ie=Ce.getTime()-ze),ye&&de(J)?ze+Ie:(this.xIncrement=ze+Ie,ze)}setDataSortingOptions(){let J=this.options;R(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),X(J.pointRange)||(J.pointRange=1)}setOptions(J){var Pe,je;let ne,ce=this.chart,ye=ce.options.plotOptions,we=ce.userOptions||{},ze=oe(J),Ce=ce.styledMode,Ie={plotOptions:ye,userOptions:ze};U(this,"setOptions",Ie);let Fe=Ie.plotOptions[this.type],Ge=we.plotOptions||{},ke=Ge.series||{},ge=k.plotOptions[this.type]||{},fe=Ge[this.type]||{};this.userOptions=Ie.userOptions;let Me=oe(Fe,ye.series,fe,ze);this.tooltipOptions=oe(k.tooltip,(Pe=k.plotOptions.series)==null?void 0:Pe.tooltip,ge==null?void 0:ge.tooltip,ce.userOptions.tooltip,(je=Ge.series)==null?void 0:je.tooltip,fe.tooltip,ze.tooltip),this.stickyTracking=xe(ze.stickyTracking,fe.stickyTracking,ke.stickyTracking,!!this.tooltipOptions.shared&&!this.noSharedTooltip||Me.stickyTracking),Fe.marker===null&&delete Me.marker,this.zoneAxis=Me.zoneAxis||"y";let De=this.zones=(Me.zones||[]).map(Xe=>({...Xe}));return(Me.negativeColor||Me.negativeFillColor)&&!Me.zones&&(ne={value:Me[this.zoneAxis+"Threshold"]||Me.threshold||0,className:"highcharts-negative"},Ce||(ne.color=Me.negativeColor,ne.fillColor=Me.negativeFillColor),De.push(ne)),De.length&&X(De[De.length-1].value)&&De.push(Ce?{}:{color:this.color,fillColor:this.fillColor}),U(this,"afterSetOptions",{options:Me}),Me}getName(){return xe(this.options.name,"Series "+(this.index+1))}getCyclic(J,ne,ce){let ye,we,ze=this.chart,Ce=`${J}Index`,Ie=`${J}Counter`,Fe=(ce==null?void 0:ce.length)||ze.options.chart.colorCount;!ne&&(X(we=xe(J==="color"?this.options.colorIndex:void 0,this[Ce]))?ye=we:(ze.series.length||(ze[Ie]=0),ye=ze[Ie]%Fe,ze[Ie]+=1),ce&&(ne=ce[ye])),ye!==void 0&&(this[Ce]=ye),this[J]=ne}getColor(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||k.plotOptions[this.type].color,this.chart.options.colors)}getPointsCollection(){return(this.hasGroupedData?this.points:this.data)||[]}getSymbol(){let J=this.options.marker;this.getCyclic("symbol",J.symbol,this.chart.options.symbols)}findPointIndex(J,ne){let ce,ye,we,ze=J.id,Ce=J.x,Ie=this.points,Fe=this.options.dataSorting;if(ze){let Ge=this.chart.get(ze);Ge instanceof m&&(ce=Ge)}else if(this.linkedParent||this.enabledDataSorting||this.options.relativeXValue){let Ge=ke=>!ke.touched&&ke.index===J.index;if(Fe&&Fe.matchByName?Ge=ke=>!ke.touched&&ke.name===J.name:this.options.relativeXValue&&(Ge=ke=>!ke.touched&&ke.options.x===J.x),!(ce=G(Ie,Ge)))return}return ce&&(we=ce&&ce.index)!==void 0&&(ye=!0),we===void 0&&de(Ce)&&(we=this.xData.indexOf(Ce,ne)),we!==-1&&we!==void 0&&this.cropped&&(we=we>=this.cropStart?we-this.cropStart:we),!ye&&de(we)&&Ie[we]&&Ie[we].touched&&(we=void 0),we}updateData(J,ne){let ce=this.options,ye=ce.dataSorting,we=this.points,ze=[],Ce=this.requireSorting,Ie=J.length===we.length,Fe,Ge,ke,ge,fe=!0;if(this.xIncrement=null,J.forEach(function(Me,De){let Pe,je=X(Me)&&this.pointClass.prototype.optionsToObject.call({series:this},Me)||{},Xe=je.x;je.id||de(Xe)?((Pe=this.findPointIndex(je,ge))===-1||Pe===void 0?ze.push(Me):we[Pe]&&Me!==ce.data[Pe]?(we[Pe].update(Me,!1,null,!1),we[Pe].touched=!0,Ce&&(ge=Pe+1)):we[Pe]&&(we[Pe].touched=!0),(!Ie||De!==Pe||ye&&ye.enabled||this.hasDerivedData)&&(Fe=!0)):ze.push(Me)},this),Fe)for(Ge=we.length;Ge--;)(ke=we[Ge])&&!ke.touched&&ke.remove&&ke.remove(!1,ne);else!Ie||ye&&ye.enabled?fe=!1:(J.forEach(function(Me,De){Me===we[De].y||we[De].destroyed||we[De].update(Me,!1,null,!1)}),ze.length=0);return we.forEach(function(Me){Me&&(Me.touched=!1)}),!!fe&&(ze.forEach(function(Me){this.addPoint(Me,!1,null,null,!1)},this),this.xIncrement===null&&this.xData&&this.xData.length&&(this.xIncrement=T(this.xData),this.autoIncrement()),!0)}setData(J,ne=!0,ce,ye){var ft;let we=this,ze=we.points,Ce=ze&&ze.length||0,Ie=we.options,Fe=we.chart,Ge=Ie.dataSorting,ke=we.xAxis,ge=Ie.turboThreshold,fe=this.xData,Me=this.yData,De=we.pointArrayMap,Pe=De&&De.length,je=Ie.keys,Xe,et,nt,ht=0,gt=1,wt;Fe.options.chart.allowMutatingData||(Ie.data&&delete we.options.data,we.userOptions.data&&delete we.userOptions.data,wt=oe(!0,J));let Rt=(J=wt||J||[]).length;if(Ge&&Ge.enabled&&(J=this.sortData(J)),Fe.options.chart.allowMutatingData&&ye!==!1&&Rt&&Ce&&!we.cropped&&!we.hasGroupedData&&we.visible&&!we.boosted&&(nt=this.updateData(J,ce)),!nt){we.xIncrement=null,we.colorCounter=0,this.parallelArrays.forEach(function(Ct){we[Ct+"Data"].length=0});let St=ge&&Rt>ge;if(St){let Ct=we.getFirstValidPoint(J),si=we.getFirstValidPoint(J,Rt-1,-1),di=Ht=>!!(re(Ht)&&(je||de(Ht[0])));if(de(Ct)&&de(si))for(Xe=0;Xe<Rt;Xe++)fe[Xe]=this.autoIncrement(),Me[Xe]=J[Xe];else if(di(Ct)&&di(si))if(Pe)if(Ct.length===Pe)for(Xe=0;Xe<Rt;Xe++)fe[Xe]=this.autoIncrement(),Me[Xe]=J[Xe];else for(Xe=0;Xe<Rt;Xe++)et=J[Xe],fe[Xe]=et[0],Me[Xe]=et.slice(1,Pe+1);else if(je&&(ht=je.indexOf("x"),gt=je.indexOf("y"),ht=ht>=0?ht:0,gt=gt>=0?gt:1),Ct.length===1&&(gt=0),ht===gt)for(Xe=0;Xe<Rt;Xe++)fe[Xe]=this.autoIncrement(),Me[Xe]=J[Xe][gt];else for(Xe=0;Xe<Rt;Xe++)et=J[Xe],fe[Xe]=et[ht],Me[Xe]=et[gt];else St=!1}if(!St)for(Xe=0;Xe<Rt;Xe++)et={series:we},we.pointClass.prototype.applyOptions.apply(et,[J[Xe]]),we.updateParallelArrays(et,Xe);for(Me&&ie(Me[0])&&L(14,!0,Fe),we.data=[],we.options.data=we.userOptions.data=J,Xe=Ce;Xe--;)(ft=ze[Xe])==null||ft.destroy();ke&&(ke.minRange=ke.userMinRange),we.isDirty=Fe.isDirtyBox=!0,we.isDirtyData=!!ze,ce=!1}Ie.legendType==="point"&&(this.processData(),this.generatePoints()),ne&&Fe.redraw(ce)}sortData(J){let ne=this,ce=ne.options.dataSorting.sortKey||"y",ye=function(we,ze){return X(ze)&&we.pointClass.prototype.optionsToObject.call({series:we},ze)||{}};return J.forEach(function(we,ze){J[ze]=ye(ne,we),J[ze].index=ze},this),J.concat().sort((we,ze)=>{let Ce=H(ce,we),Ie=H(ce,ze);return Ie<Ce?-1:Ie>Ce?1:0}).forEach(function(we,ze){we.x=ze},this),ne.linkedSeries&&ne.linkedSeries.forEach(function(we){let ze=we.options,Ce=ze.data;ze.dataSorting&&ze.dataSorting.enabled||!Ce||(Ce.forEach(function(Ie,Fe){Ce[Fe]=ye(we,Ie),J[Fe]&&(Ce[Fe].x=J[Fe].x,Ce[Fe].index=Fe)}),we.setData(Ce,!1))}),J}getProcessedData(J){let ne=this,ce=ne.xAxis,ye=ne.options.cropThreshold,we=ce==null?void 0:ce.logarithmic,ze=ne.isCartesian,Ce,Ie,Fe=0,Ge,ke,ge,fe=ne.xData,Me=ne.yData,De=!1,Pe=fe.length;ce&&(ke=(Ge=ce.getExtremes()).min,ge=Ge.max,De=!!(ce.categories&&!ce.names.length)),ze&&ne.sorted&&!J&&(!ye||Pe>ye||ne.forceCrop)&&(fe[Pe-1]<ke||fe[0]>ge?(fe=[],Me=[]):ne.yData&&(fe[0]<ke||fe[Pe-1]>ge)&&(fe=(Ce=this.cropData(ne.xData,ne.yData,ke,ge)).xData,Me=Ce.yData,Fe=Ce.start,Ie=!0));let je=B([we?fe.map(we.log2lin):fe],()=>ne.requireSorting&&!De&&L(15,!1,ne.chart));return{xData:fe,yData:Me,cropped:Ie,cropStart:Fe,closestPointRange:je}}processData(J){let ne=this.xAxis;if(this.isCartesian&&!this.isDirty&&!ne.isDirty&&!this.yAxis.isDirty&&!J)return!1;let ce=this.getProcessedData();this.cropped=ce.cropped,this.cropStart=ce.cropStart,this.processedXData=ce.xData,this.processedYData=ce.yData,this.closestPointRange=this.basePointRange=ce.closestPointRange,U(this,"afterProcessData")}cropData(J,ne,ce,ye){let we=J.length,ze,Ce,Ie=0,Fe=we;for(ze=0;ze<we;ze++)if(J[ze]>=ce){Ie=Math.max(0,ze-1);break}for(Ce=ze;Ce<we;Ce++)if(J[Ce]>ye){Fe=Ce+1;break}return{xData:J.slice(Ie,Fe),yData:ne.slice(Ie,Fe),start:Ie,end:Fe}}generatePoints(){let J=this.options,ne=this.processedData||J.data,ce=this.processedXData,ye=this.processedYData,we=this.pointClass,ze=ce.length,Ce=this.cropStart||0,Ie=this.hasGroupedData,Fe=J.keys,Ge=[],ke=J.dataGrouping&&J.dataGrouping.groupAll?Ce:0,ge,fe,Me,De,Pe=this.data;if(!Pe&&!Ie){let je=[];je.length=ne.length,Pe=this.data=je}for(Fe&&Ie&&(this.options.keys=!1),De=0;De<ze;De++)fe=Ce+De,Ie?((Me=new we(this,[ce[De]].concat(K(ye[De])))).dataGroup=this.groupMap[ke+De],Me.dataGroup.options&&(Me.options=Me.dataGroup.options,R(Me,Me.dataGroup.options),delete Me.dataLabels)):(Me=Pe[fe])||ne[fe]===void 0||(Pe[fe]=Me=new we(this,ne[fe],ce[De])),Me&&(Me.index=Ie?ke+De:fe,Ge[De]=Me);if(this.options.keys=Fe,Pe&&(ze!==(ge=Pe.length)||Ie))for(De=0;De<ge;De++)De!==Ce||Ie||(De+=ze),Pe[De]&&(Pe[De].destroyElements(),Pe[De].plotX=void 0);this.data=Pe,this.points=Ge,U(this,"afterGeneratePoints")}getXExtremes(J){return{min:I(J),max:T(J)}}getExtremes(J,ne){let ce=this.xAxis,ye=this.yAxis,we=[],ze=this.requireSorting&&!this.is("column")?1:0,Ce=!!ye&&ye.positiveValuesOnly,Ie=ne||this.getExtremesFromAll||this.options.getExtremesFromAll,{processedXData:Fe,processedYData:Ge}=this,ke,ge,fe,Me,De,Pe,je,Xe=0,et=0,nt=0;if(this.cropped&&Ie){let Rt=this.getProcessedData(!0);Fe=Rt.xData,Ge=Rt.yData}let ht=(J=J||this.stackedYData||Ge||[]).length,gt=Fe||this.xData;for(ce&&(Xe=(ke=ce.getExtremes()).min,et=ke.max),Pe=0;Pe<ht;Pe++)if(Me=gt[Pe],ge=(de(De=J[Pe])||re(De))&&((de(De)?De>0:De.length)||!Ce),fe=ne||this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||!ce||(gt[Pe+ze]||Me)>=Xe&&(gt[Pe-ze]||Me)<=et,ge&&fe)if(je=De.length)for(;je--;)de(De[je])&&(we[nt++]=De[je]);else we[nt++]=De;let wt={activeYData:we,dataMin:I(we),dataMax:T(we)};return U(this,"afterGetExtremes",{dataExtremes:wt}),wt}applyExtremes(){let J=this.getExtremes();return this.dataMin=J.dataMin,this.dataMax=J.dataMax,J}getFirstValidPoint(J,ne=0,ce=1){let ye=J.length,we=ne;for(;we>=0&&we<ye;){if(X(J[we]))return J[we];we+=ce}}translate(){var et;this.processedXData||this.processData(),this.generatePoints();let J=this.options,ne=J.stacking,ce=this.xAxis,ye=ce.categories,we=this.enabledDataSorting,ze=this.yAxis,Ce=this.points,Ie=Ce.length,Fe=this.pointPlacementToXValue(),Ge=!!Fe,ke=J.threshold,ge=J.startFromThreshold?ke:0,fe,Me,De,Pe,je=Number.MAX_VALUE;function Xe(nt){return N(nt,-1e9,1e9)}for(fe=0;fe<Ie;fe++){let nt,ht=Ce[fe],gt=ht.x,wt,Rt,ft=ht.y,St=ht.low,Ct=ne&&((et=ze.stacking)==null?void 0:et.stacks[(this.negStacks&&ft<(ge?0:ke)?"-":"")+this.stackKey]);Me=ce.translate(gt,!1,!1,!1,!0,Fe),ht.plotX=de(Me)?q(Xe(Me)):void 0,ne&&this.visible&&Ct&&Ct[gt]&&(Pe=this.getStackIndicator(Pe,gt,this.index),!ht.isNull&&Pe.key&&(Rt=(wt=Ct[gt]).points[Pe.key]),wt&&re(Rt)&&(St=Rt[0],ft=Rt[1],St===ge&&Pe.key===Ct[gt].base&&(St=xe(de(ke)?ke:ze.min)),ze.positiveValuesOnly&&X(St)&&St<=0&&(St=void 0),ht.total=ht.stackTotal=xe(wt.total),ht.percentage=X(ht.y)&&wt.total?ht.y/wt.total*100:void 0,ht.stackY=ft,this.irregularWidths||wt.setOffset(this.pointXOffset||0,this.barW||0,void 0,void 0,void 0,this.xAxis))),ht.yBottom=X(St)?Xe(ze.translate(St,!1,!0,!1,!0)):void 0,this.dataModify&&(ft=this.dataModify.modifyValue(ft,fe)),de(ft)&&ht.plotX!==void 0&&(nt=de(nt=ze.translate(ft,!1,!0,!1,!0))?Xe(nt):void 0),ht.plotY=nt,ht.isInside=this.isPointInside(ht),ht.clientX=Ge?q(ce.translate(gt,!1,!1,!1,!0,Fe)):Me,ht.negative=(ht.y||0)<(ke||0),ht.category=xe(ye&&ye[ht.x],ht.x),ht.isNull||ht.visible===!1||(De!==void 0&&(je=Math.min(je,Math.abs(Me-De))),De=Me),ht.zone=this.zones.length?ht.getZone():void 0,!ht.graphic&&this.group&&we&&(ht.isNew=!0)}this.closestPointRangePx=je,U(this,"afterTranslate")}getValidPoints(J,ne,ce){let ye=this.chart;return(J||this.points||[]).filter(function(we){let{plotX:ze,plotY:Ce}=we;return!!((ce||!we.isNull&&de(Ce))&&(!ne||ye.isInsidePlot(ze,Ce,{inverted:ye.inverted})))&&we.visible!==!1})}getClipBox(){let{chart:J,xAxis:ne,yAxis:ce}=this,{x:ye,y:we,width:ze,height:Ce}=oe(J.clipBox);return ne&&ne.len!==J.plotSizeX&&(ze=ne.len),ce&&ce.len!==J.plotSizeY&&(Ce=ce.len),J.inverted&&!this.invertible&&([ze,Ce]=[Ce,ze]),{x:ye,y:we,width:ze,height:Ce}}getSharedClipKey(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0),this.sharedClipKey}setClip(){let{chart:J,group:ne,markerGroup:ce}=this,ye=J.sharedClips,we=J.renderer,ze=this.getClipBox(),Ce=this.getSharedClipKey(),Ie=ye[Ce];Ie?Ie.animate(ze):ye[Ce]=Ie=we.clipRect(ze),ne&&ne.clip(this.options.clip===!1?void 0:Ie),ce&&ce.clip()}animate(J){let{chart:ne,group:ce,markerGroup:ye}=this,we=ne.inverted,ze=_(this.options.animation),Ce=[this.getSharedClipKey(),ze.duration,ze.easing,ze.defer].join(","),Ie=ne.sharedClips[Ce],Fe=ne.sharedClips[Ce+"m"];if(J&&ce){let Ge=this.getClipBox();if(Ie)Ie.attr("height",Ge.height);else{Ge.width=0,we&&(Ge.x=ne.plotHeight),Ie=ne.renderer.clipRect(Ge),ne.sharedClips[Ce]=Ie;let ke={x:-99,y:-99,width:we?ne.plotWidth+199:99,height:we?99:ne.plotHeight+199};Fe=ne.renderer.clipRect(ke),ne.sharedClips[Ce+"m"]=Fe}ce.clip(Ie),ye==null||ye.clip(Fe)}else if(Ie&&!Ie.hasClass("highcharts-animating")){let Ge=this.getClipBox(),ke=ze.step;(ye!=null&&ye.element.childNodes.length||ne.series.length>1)&&(ze.step=function(ge,fe){ke&&ke.apply(fe,arguments),fe.prop==="width"&&(Fe!=null&&Fe.element)&&Fe.attr(we?"height":"width",ge+99)}),Ie.addClass("highcharts-animating").animate(Ge,ze)}}afterAnimate(){this.setClip(),Ee(this.chart.sharedClips,(J,ne,ce)=>{J&&!this.chart.container.querySelector(`[clip-path="url(#${J.id})"]`)&&(J.destroy(),delete ce[ne])}),this.finishedAnimating=!0,U(this,"afterAnimate")}drawPoints(J=this.points){let ne,ce,ye,we,ze,Ce,Ie,Fe=this.chart,Ge=Fe.styledMode,{colorAxis:ke,options:ge}=this,fe=ge.marker,Me=this[this.specialGroup||"markerGroup"],De=this.xAxis,Pe=xe(fe.enabled,!De||!!De.isRadial||null,this.closestPointRangePx>=fe.enabledThreshold*fe.radius);if(fe.enabled!==!1||this._hasPointMarkers)for(ne=0;ne<J.length;ne++)if(we=(ye=(ce=J[ne]).graphic)?"animate":"attr",ze=ce.marker||{},Ce=!!ce.marker,(Pe&&ze.enabled===void 0||ze.enabled)&&!ce.isNull&&ce.visible!==!1){let je=xe(ze.symbol,this.symbol,"rect");Ie=this.markerAttribs(ce,ce.selected&&"select"),this.enabledDataSorting&&(ce.startXPos=De.reversed?-(Ie.width||0):De.width);let Xe=ce.isInside!==!1;if(!ye&&Xe&&((Ie.width||0)>0||ce.hasImage)&&(ce.graphic=ye=Fe.renderer.symbol(je,Ie.x,Ie.y,Ie.width,Ie.height,Ce?ze:fe).add(Me),this.enabledDataSorting&&Fe.hasRendered&&(ye.attr({x:ce.startXPos}),we="animate")),ye&&we==="animate"&&ye[Xe?"show":"hide"](Xe).animate(Ie),ye){let et=this.pointAttribs(ce,Ge||!ce.selected?void 0:"select");Ge?ke&&ye.css({fill:et.fill}):ye[we](et)}ye&&ye.addClass(ce.getClassName(),!0)}else ye&&(ce.graphic=ye.destroy())}markerAttribs(J,ne){let ce=this.options,ye=ce.marker,we=J.marker||{},ze=we.symbol||ye.symbol,Ce={},Ie,Fe,Ge=xe(we.radius,ye&&ye.radius);ne&&(Ie=ye.states[ne],Ge=xe((Fe=we.states&&we.states[ne])&&Fe.radius,Ie&&Ie.radius,Ge&&Ge+(Ie&&Ie.radiusPlus||0))),J.hasImage=ze&&ze.indexOf("url")===0,J.hasImage&&(Ge=0);let ke=J.pos();return de(Ge)&&ke&&(ce.crisp&&(ke[0]=Z(ke[0],J.hasImage?0:ze==="rect"?(ye==null?void 0:ye.lineWidth)||0:1)),Ce.x=ke[0]-Ge,Ce.y=ke[1]-Ge),Ge&&(Ce.width=Ce.height=2*Ge),Ce}pointAttribs(J,ne){let ce=this.options.marker,ye=J&&J.options,we=ye&&ye.marker||{},ze=ye&&ye.color,Ce=J&&J.color,Ie=J&&J.zone&&J.zone.color,Fe,Ge,ke=this.color,ge,fe,Me=xe(we.lineWidth,ce.lineWidth),De=1;return ke=ze||Ie||Ce||ke,ge=we.fillColor||ce.fillColor||ke,fe=we.lineColor||ce.lineColor||ke,ne=ne||"normal",Fe=ce.states[ne]||{},Me=xe((Ge=we.states&&we.states[ne]||{}).lineWidth,Fe.lineWidth,Me+xe(Ge.lineWidthPlus,Fe.lineWidthPlus,0)),ge=Ge.fillColor||Fe.fillColor||ge,{stroke:fe=Ge.lineColor||Fe.lineColor||fe,"stroke-width":Me,fill:ge,opacity:De=xe(Ge.opacity,Fe.opacity,De)}}destroy(J){let ne,ce,ye,we=this,ze=we.chart,Ce=/AppleWebKit\/533/.test(P.navigator.userAgent),Ie=we.data||[];for(U(we,"destroy",{keepEventsForUpdate:J}),this.removeEvents(J),(we.axisTypes||[]).forEach(function(Fe){(ye=we[Fe])&&ye.series&&($(ye.series,we),ye.isDirty=ye.forceRedraw=!0)}),we.legendItem&&we.chart.legend.destroyItem(we),ne=Ie.length;ne--;)(ce=Ie[ne])&&ce.destroy&&ce.destroy();for(let Fe of we.zones)O(Fe,void 0,!0);C.clearTimeout(we.animationTimeout),Ee(we,function(Fe,Ge){Fe instanceof y&&!Fe.survive&&Fe[Ce&&Ge==="group"?"hide":"destroy"]()}),ze.hoverSeries===we&&(ze.hoverSeries=void 0),$(ze.series,we),ze.orderItems("series"),Ee(we,function(Fe,Ge){J&&Ge==="hcEvents"||delete we[Ge]})}applyZones(){let{area:J,chart:ne,graph:ce,zones:ye,points:we,xAxis:ze,yAxis:Ce,zoneAxis:Ie}=this,{inverted:Fe,renderer:Ge}=ne,ke=this[`${Ie}Axis`],{isXAxis:ge,len:fe=0}=ke||{},Me=((ce==null?void 0:ce.strokeWidth())||0)/2+1,De=(Pe,je=0,Xe=0)=>{Fe&&(Xe=fe-Xe);let{translated:et=0,lineClip:nt}=Pe,ht=Xe-et;nt==null||nt.push(["L",je,Math.abs(ht)<Me?Xe-Me*(ht<=0?-1:1):et])};if(ye.length&&(ce||J)&&ke&&de(ke.min)){let Pe=ke.getExtremes().max,je=nt=>{nt.forEach((ht,gt)=>{(ht[0]==="M"||ht[0]==="L")&&(nt[gt]=[ht[0],ge?fe-ht[1]:ht[1],ge?ht[2]:fe-ht[2]])})};if(ye.forEach(nt=>{nt.lineClip=[],nt.translated=N(ke.toPixels(xe(nt.value,Pe),!0)||0,0,fe)}),ce&&!this.showLine&&ce.hide(),J&&J.hide(),Ie==="y"&&we.length<ze.len)for(let nt of we){let{plotX:ht,plotY:gt,zone:wt}=nt,Rt=wt&&ye[ye.indexOf(wt)-1];wt&&De(wt,ht,gt),Rt&&De(Rt,ht,gt)}let Xe=[],et=ke.toPixels(ke.getExtremes().min,!0);ye.forEach(nt=>{var cn,Zi;let ht=nt.lineClip||[],gt=Math.round(nt.translated||0);ze.reversed&&ht.reverse();let{clip:wt,simpleClip:Rt}=nt,ft=0,St=0,Ct=ze.len,si=Ce.len;ge?(ft=gt,Ct=et):(St=gt,si=et);let di=[["M",ft,St],["L",Ct,St],["L",Ct,si],["L",ft,si],["Z"]],Ht=[di[0],...ht,di[1],di[2],...Xe,di[3],di[4]];Xe=ht.reverse(),et=gt,Fe&&(je(Ht),J&&je(di)),wt?(wt.animate({d:Ht}),Rt==null||Rt.animate({d:di})):(wt=nt.clip=Ge.path(Ht),J&&(Rt=nt.simpleClip=Ge.path(di))),ce&&((cn=nt.graph)==null||cn.clip(wt)),J&&((Zi=nt.area)==null||Zi.clip(Rt))})}else this.visible&&(ce&&ce.show(),J&&J.show())}plotGroup(J,ne,ce,ye,we){let ze=this[J],Ce=!ze,Ie={visibility:ce,zIndex:ye||.1};return X(this.opacity)&&!this.chart.styledMode&&this.state!=="inactive"&&(Ie.opacity=this.opacity),ze||(this[J]=ze=this.chart.renderer.g().add(we)),ze.addClass("highcharts-"+ne+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(X(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(ze.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),ze.attr(Ie)[Ce?"attr":"animate"](this.getPlotBox(ne)),ze}getPlotBox(J){let ne=this.xAxis,ce=this.yAxis,ye=this.chart,we=ye.inverted&&!ye.polar&&ne&&this.invertible&&J==="series";return ye.inverted&&(ne=ce,ce=this.xAxis),{translateX:ne?ne.left:ye.plotLeft,translateY:ce?ce.top:ye.plotTop,rotation:we?90:0,rotationOriginX:we?(ne.len-ce.len)/2:0,rotationOriginY:we?(ne.len+ce.len)/2:0,scaleX:we?-1:1,scaleY:1}}removeEvents(J){let{eventsToUnbind:ne}=this;J||Se(this),ne.length&&(ne.forEach(ce=>{ce()}),ne.length=0)}render(){var Ge,ke,ge,fe,Me;let J=this,{chart:ne,options:ce,hasRendered:ye}=J,we=_(ce.animation),ze=J.visible?"inherit":"hidden",Ce=ce.zIndex,Ie=ne.seriesGroup,Fe=J.finishedAnimating?0:we.duration;U(this,"render"),J.plotGroup("group","series",ze,Ce,Ie),J.markerGroup=J.plotGroup("markerGroup","markers",ze,Ce,Ie),ce.clip!==!1&&J.setClip(),Fe&&((Ge=J.animate)==null||Ge.call(J,!0)),J.drawGraph&&(J.drawGraph(),J.applyZones()),J.visible&&J.drawPoints(),(ke=J.drawDataLabels)==null||ke.call(J),(ge=J.redrawPoints)==null||ge.call(J),ce.enableMouseTracking&&((fe=J.drawTracker)==null||fe.call(J)),Fe&&((Me=J.animate)==null||Me.call(J)),ye||(Fe&&we.defer&&(Fe+=we.defer),J.animationTimeout=Q(()=>{J.afterAnimate()},Fe||0)),J.isDirty=!1,J.hasRendered=!0,U(J,"afterRender")}redraw(){let J=this.isDirty||this.isDirtyData;this.translate(),this.render(),J&&delete this.kdTree}reserveSpace(){return this.visible||!this.chart.options.chart.ignoreHiddenSeries}searchPoint(J,ne){let{xAxis:ce,yAxis:ye}=this,we=this.chart.inverted;return this.searchKDTree({clientX:we?ce.len-J.chartY+ce.pos:J.chartX-ce.pos,plotY:we?ye.len-J.chartX+ye.pos:J.chartY-ye.pos},ne,J)}buildKDTree(J){this.buildingKdTree=!0;let ne=this,ce=ne.options.findNearestPointBy.indexOf("y")>-1?2:1;delete ne.kdTree,Q(function(){ne.kdTree=function ye(we,ze,Ce){let Ie,Fe,Ge=we==null?void 0:we.length;if(Ge)return Ie=ne.kdAxisArray[ze%Ce],we.sort((ke,ge)=>(ke[Ie]||0)-(ge[Ie]||0)),{point:we[Fe=Math.floor(Ge/2)],left:ye(we.slice(0,Fe),ze+1,Ce),right:ye(we.slice(Fe+1),ze+1,Ce)}}(ne.getValidPoints(void 0,!ne.directTouch),ce,ce),ne.buildingKdTree=!1},ne.options.kdNow||(J==null?void 0:J.type)==="touchstart"?0:1)}searchKDTree(J,ne,ce){let ye=this,[we,ze]=this.kdAxisArray,Ce=ne?"distX":"dist",Ie=(ye.options.findNearestPointBy||"").indexOf("y")>-1?2:1,Fe=!!ye.isBubble;if(this.kdTree||this.buildingKdTree||this.buildKDTree(ce),this.kdTree)return function Ge(ke,ge,fe,Me){var wt;let De=ge.point,Pe=ye.kdAxisArray[fe%Me],je,Xe,et=De;(function(Rt,ft){var xn;let St=Rt[we],Ct=ft[we],si=X(St)&&X(Ct)?St-Ct:null,di=Rt[ze],Ht=ft[ze],cn=X(di)&&X(Ht)?di-Ht:0,Zi=Fe&&((xn=ft.marker)==null?void 0:xn.radius)||0;ft.dist=Math.sqrt((si&&si*si||0)+cn*cn)-Zi,ft.distX=X(si)?Math.abs(si)-Zi:Number.MAX_VALUE})(ke,De);let nt=(ke[Pe]||0)-(De[Pe]||0)+(Fe&&((wt=De.marker)==null?void 0:wt.radius)||0),ht=nt<0?"left":"right",gt=nt<0?"right":"left";return ge[ht]&&(et=(je=Ge(ke,ge[ht],fe+1,Me))[Ce]<et[Ce]?je:De),ge[gt]&&Math.sqrt(nt*nt)<et[Ce]&&(et=(Xe=Ge(ke,ge[gt],fe+1,Me))[Ce]<et[Ce]?Xe:et),et}(J,this.kdTree,Ie,Ie)}pointPlacementToXValue(){let{options:J,xAxis:ne}=this,ce=J.pointPlacement;return ce==="between"&&(ce=ne.reversed?-.5:.5),de(ce)?ce*(J.pointRange||ne.pointRange):0}isPointInside(J){let{chart:ne,xAxis:ce,yAxis:ye}=this,{plotX:we=-1,plotY:ze=-1}=J;return ze>=0&&ze<=(ye?ye.len:ne.plotHeight)&&we>=0&&we<=(ce?ce.len:ne.plotWidth)}drawTracker(){var ge;let J=this,ne=J.options,ce=ne.trackByArea,ye=[].concat((ce?J.areaPath:J.graphPath)||[]),we=J.chart,ze=we.pointer,Ce=we.renderer,Ie=((ge=we.options.tooltip)==null?void 0:ge.snap)||0,Fe=()=>{ne.enableMouseTracking&&we.hoverSeries!==J&&J.onMouseOver()},Ge="rgba(192,192,192,"+(x?1e-4:.002)+")",ke=J.tracker;ke?ke.attr({d:ye}):J.graph&&(J.tracker=ke=Ce.path(ye).attr({visibility:J.visible?"inherit":"hidden",zIndex:2}).addClass(ce?"highcharts-tracker-area":"highcharts-tracker-line").add(J.group),we.styledMode||ke.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:Ge,fill:ce?Ge:"none","stroke-width":J.graph.strokeWidth()+(ce?0:2*Ie)}),[J.tracker,J.markerGroup,J.dataLabelsGroup].forEach(fe=>{fe&&(fe.addClass("highcharts-tracker").on("mouseover",Fe).on("mouseout",Me=>{ze==null||ze.onTrackerMouseOut(Me)}),ne.cursor&&!we.styledMode&&fe.css({cursor:ne.cursor}),fe.on("touchstart",Fe))})),U(this,"afterDrawTracker")}addPoint(J,ne,ce,ye,we){let ze,Ce,Ie=this.options,Fe=this.data,Ge=this.chart,ke=this.xAxis,ge=ke&&ke.hasNames&&ke.names,fe=Ie.data,Me=this.xData;ne=xe(ne,!0);let De={series:this};this.pointClass.prototype.applyOptions.apply(De,[J]);let Pe=De.x;if(Ce=Me.length,this.requireSorting&&Pe<Me[Ce-1])for(ze=!0;Ce&&Me[Ce-1]>Pe;)Ce--;this.updateParallelArrays(De,"splice",[Ce,0,0]),this.updateParallelArrays(De,Ce),ge&&De.name&&(ge[Pe]=De.name),fe.splice(Ce,0,J),(ze||this.processedData)&&(this.data.splice(Ce,0,null),this.processData()),Ie.legendType==="point"&&this.generatePoints(),ce&&(Fe[0]&&Fe[0].remove?Fe[0].remove(!1):(Fe.shift(),this.updateParallelArrays(De,"shift"),fe.shift())),we!==!1&&U(this,"addPoint",{point:De}),this.isDirty=!0,this.isDirtyData=!0,ne&&Ge.redraw(ye)}removePoint(J,ne,ce){let ye=this,we=ye.data,ze=we[J],Ce=ye.points,Ie=ye.chart,Fe=function(){Ce&&Ce.length===we.length&&Ce.splice(J,1),we.splice(J,1),ye.options.data.splice(J,1),ye.updateParallelArrays(ze||{series:ye},"splice",[J,1]),ze&&ze.destroy(),ye.isDirty=!0,ye.isDirtyData=!0,ne&&Ie.redraw()};w(ce,Ie),ne=xe(ne,!0),ze?ze.firePointEvent("remove",null,Fe):Fe()}remove(J,ne,ce,ye){let we=this,ze=we.chart;function Ce(){we.destroy(ye),ze.isDirtyLegend=ze.isDirtyBox=!0,ze.linkSeries(ye),xe(J,!0)&&ze.redraw(ne)}ce!==!1?U(we,"remove",null,Ce):Ce()}update(J,ne){var je,Xe,et;U(this,"update",{options:J=V(J,this.userOptions)});let ce=this,ye=ce.chart,we=ce.userOptions,ze=ce.initialType||ce.type,Ce=ye.options.plotOptions,Ie=D[ze].prototype,Fe=ce.finishedAnimating&&{animation:!1},Ge={},ke,ge,fe=["colorIndex","eventOptions","navigatorSeries","symbolIndex","baseSeries"],Me=J.type||we.type||ye.options.chart.type,De=!(this.hasDerivedData||Me&&Me!==this.type||J.pointStart!==void 0||J.pointInterval!==void 0||J.relativeXValue!==void 0||J.joinBy||J.mapData||["dataGrouping","pointStart","pointInterval","pointIntervalUnit","keys"].some(nt=>ce.hasOptionChanged(nt)));Me=Me||ze,De&&(fe.push("data","isDirtyData","isDirtyCanvas","points","processedData","processedXData","processedYData","xIncrement","cropped","_hasPointMarkers","hasDataLabels","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX","transformGroups"),J.visible!==!1&&fe.push("area","graph"),ce.parallelArrays.forEach(function(nt){fe.push(nt+"Data")}),J.data&&(J.dataSorting&&R(ce.options.dataSorting,J.dataSorting),this.setData(J.data,!1))),J=oe(we,{index:we.index===void 0?ce.index:we.index,pointStart:((je=Ce==null?void 0:Ce.series)==null?void 0:je.pointStart)??we.pointStart??((Xe=ce.xData)==null?void 0:Xe[0])},!De&&{data:ce.options.data},J,Fe),De&&J.data&&(J.data=ce.options.data),(fe=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(fe)).forEach(function(nt){fe[nt]=ce[nt],delete ce[nt]});let Pe=!1;if(D[Me]){if(Pe=Me!==ce.type,ce.remove(!1,!1,!1,!0),Pe)if(ye.propFromSeries(),Object.setPrototypeOf)Object.setPrototypeOf(ce,D[Me].prototype);else{let nt=Object.hasOwnProperty.call(ce,"hcEvents")&&ce.hcEvents;for(ge in Ie)ce[ge]=void 0;R(ce,D[Me].prototype),nt?ce.hcEvents=nt:delete ce.hcEvents}}else L(17,!0,ye,{missingModuleFor:Me});if(fe.forEach(function(nt){ce[nt]=fe[nt]}),ce.init(ye,J),De&&this.points)for(let nt of((ke=ce.options).visible===!1?(Ge.graphic=1,Ge.dataLabel=1):(this.hasMarkerChanged(ke,we)&&(Ge.graphic=1),(et=ce.hasDataLabels)!=null&&et.call(ce)||(Ge.dataLabel=1)),this.points))nt&&nt.series&&(nt.resolveColor(),Object.keys(Ge).length&&nt.destroyElements(Ge),ke.showInLegend===!1&&nt.legendItem&&ye.legend.destroyItem(nt));ce.initialType=ze,ye.linkSeries(),ye.setSortedData(),Pe&&ce.linkedSeries.length&&(ce.isDirtyData=!0),U(this,"afterUpdate"),xe(ne,!0)&&ye.redraw(!!De&&void 0)}setName(J){this.name=this.options.name=this.userOptions.name=J,this.chart.isDirtyLegend=!0}hasOptionChanged(J){var Ce,Ie;let ne=this.chart,ce=this.options[J],ye=ne.options.plotOptions,we=this.userOptions[J],ze=xe((Ce=ye==null?void 0:ye[this.type])==null?void 0:Ce[J],(Ie=ye==null?void 0:ye.series)==null?void 0:Ie[J]);return we&&!X(ze)?ce!==we:ce!==xe(ze,ce)}onMouseOver(){let J=this.chart,ne=J.hoverSeries,ce=J.pointer;ce==null||ce.setHoverChartIndex(),ne&&ne!==this&&ne.onMouseOut(),this.options.events.mouseOver&&U(this,"mouseOver"),this.setState("hover"),J.hoverSeries=this}onMouseOut(){let J=this.options,ne=this.chart,ce=ne.tooltip,ye=ne.hoverPoint;ne.hoverSeries=null,ye&&ye.onMouseOut(),this&&J.events.mouseOut&&U(this,"mouseOut"),ce&&!this.stickyTracking&&(!ce.shared||this.noSharedTooltip)&&ce.hide(),ne.series.forEach(function(we){we.setState("",!0)})}setState(J,ne){let ce=this,ye=ce.options,we=ce.graph,ze=ye.inactiveOtherPoints,Ce=ye.states,Ie=xe(Ce[J||"normal"]&&Ce[J||"normal"].animation,ce.chart.options.chart.animation),Fe=ye.lineWidth,Ge=ye.opacity;if(J=J||"",ce.state!==J&&([ce.group,ce.markerGroup,ce.dataLabelsGroup].forEach(function(ke){ke&&(ce.state&&ke.removeClass("highcharts-series-"+ce.state),J&&ke.addClass("highcharts-series-"+J))}),ce.state=J,!ce.chart.styledMode)){if(Ce[J]&&Ce[J].enabled===!1)return;if(J&&(Fe=Ce[J].lineWidth||Fe+(Ce[J].lineWidthPlus||0),Ge=xe(Ce[J].opacity,Ge)),we&&!we.dashstyle&&de(Fe))for(let ke of[we,...this.zones.map(ge=>ge.graph)])ke==null||ke.animate({"stroke-width":Fe},Ie);ze||[ce.group,ce.markerGroup,ce.dataLabelsGroup,ce.labelBySeries].forEach(function(ke){ke&&ke.animate({opacity:Ge},Ie)})}ne&&ze&&ce.points&&ce.setAllPointsToState(J||void 0)}setAllPointsToState(J){this.points.forEach(function(ne){ne.setState&&ne.setState(J)})}setVisible(J,ne){var Ie;let ce=this,ye=ce.chart,we=ye.options.chart.ignoreHiddenSeries,ze=ce.visible;ce.visible=J=ce.options.visible=ce.userOptions.visible=J===void 0?!ze:J;let Ce=J?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach(Fe=>{var Ge;(Ge=ce[Fe])==null||Ge[Ce]()}),(ye.hoverSeries===ce||((Ie=ye.hoverPoint)==null?void 0:Ie.series)===ce)&&ce.onMouseOut(),ce.legendItem&&ye.legend.colorizeItem(ce,J),ce.isDirty=!0,ce.options.stacking&&ye.series.forEach(Fe=>{Fe.options.stacking&&Fe.visible&&(Fe.isDirty=!0)}),ce.linkedSeries.forEach(Fe=>{Fe.setVisible(J,!1)}),we&&(ye.isDirtyBox=!0),U(ce,Ce),ne!==!1&&ye.redraw()}show(){this.setVisible(!0)}hide(){this.setVisible(!1)}select(J){this.selected=J=this.options.selected=J===void 0?!this.selected:J,this.checkbox&&(this.checkbox.checked=J),U(this,J?"select":"unselect")}shouldShowTooltip(J,ne,ce={}){return ce.series=this,ce.visiblePlotOnly=!0,this.chart.isInsidePlot(J,ne,ce)}drawLegendSymbol(J,ne){var ce;(ce=p[this.options.legendSymbol||"rectangle"])==null||ce.call(this,J,ne)}}return ae.defaultOptions=g,ae.types=v.seriesTypes,ae.registerType=v.registerSeriesType,R(ae.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,directTouch:!1,invertible:!0,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:m,requireSorting:!0,sorted:!0}),v.series=ae,ae}),r(t,"Core/Legend/Legend.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Series/Point.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(s,l,u,n,p,m,g,v){var y;let{animObject:C,setAnimation:_}=s,{registerEventOptions:w}=l,{composed:k,marginNames:S}=u,{distribute:x}=m,{format:P}=g,{addEvent:D,createElement:T,css:I,defined:N,discardElement:q,find:Z,fireEvent:X,isNumber:O,merge:V,pick:$,pushUnique:L,relativeLength:R,stableSort:G,syncTimeout:U}=v;class B{constructor(W,re){this.allItems=[],this.initialItemY=0,this.itemHeight=0,this.itemMarginBottom=0,this.itemMarginTop=0,this.itemX=0,this.itemY=0,this.lastItemY=0,this.lastLineHeight=0,this.legendHeight=0,this.legendWidth=0,this.maxItemWidth=0,this.maxLegendWidth=0,this.offsetWidth=0,this.padding=0,this.pages=[],this.symbolHeight=0,this.symbolWidth=0,this.titleHeight=0,this.totalItemWidth=0,this.widthOption=0,this.chart=W,this.setOptions(re),re.enabled&&(this.render(),w(this,re),D(this.chart,"endResize",function(){this.legend.positionCheckboxes()})),D(this.chart,"render",()=>{this.options.enabled&&this.proximate&&(this.proximatePositions(),this.positionItems())})}setOptions(W){let re=$(W.padding,8);this.options=W,this.chart.styledMode||(this.itemStyle=W.itemStyle,this.itemHiddenStyle=V(this.itemStyle,W.itemHiddenStyle)),this.itemMarginTop=W.itemMarginTop,this.itemMarginBottom=W.itemMarginBottom,this.padding=re,this.initialItemY=re-5,this.symbolWidth=$(W.symbolWidth,16),this.pages=[],this.proximate=W.layout==="proximate"&&!this.chart.inverted,this.baseline=void 0}update(W,re){let de=this.chart;this.setOptions(V(!0,this.options,W)),"events"in this.options&&w(this,this.options),this.destroy(),de.isDirtyLegend=de.isDirtyBox=!0,$(re,!0)&&de.redraw(),X(this,"afterUpdate",{redraw:re})}colorizeItem(W,re){let{area:de,group:ie,label:oe,line:Ee,symbol:xe}=W.legendItem||{};if(ie==null||ie[re?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){let{itemHiddenStyle:Se={}}=this,K=Se.color,{fillColor:Q,fillOpacity:ae,lineColor:_e,marker:J}=W.options,ne=ce=>(!re&&(ce.fill&&(ce.fill=K),ce.stroke&&(ce.stroke=K)),ce);oe==null||oe.css(V(re?this.itemStyle:Se)),Ee==null||Ee.attr(ne({stroke:_e||W.color})),xe&&xe.attr(ne(J&&xe.isMarker?W.pointAttribs():{fill:W.color})),de==null||de.attr(ne({fill:Q||W.color,"fill-opacity":Q?1:ae??.75}))}X(this,"afterColorizeItem",{item:W,visible:re})}positionItems(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()}positionItem(W){let{group:re,x:de=0,y:ie=0}=W.legendItem||{},oe=this.options,Ee=oe.symbolPadding,xe=!oe.rtl,Se=W.checkbox;if(re&&re.element){let K={translateX:xe?de:this.legendWidth-de-2*Ee-4,translateY:ie};re[N(re.translateY)?"animate":"attr"](K,void 0,()=>{X(this,"afterPositionItem",{item:W})})}Se&&(Se.x=de,Se.y=ie)}destroyItem(W){let re=W.checkbox,de=W.legendItem||{};for(let ie of["group","label","line","symbol"])de[ie]&&(de[ie]=de[ie].destroy());re&&q(re),W.legendItem=void 0}destroy(){for(let W of this.getAllItems())this.destroyItem(W);for(let W of["clipRect","up","down","pager","nav","box","title","group"])this[W]&&(this[W]=this[W].destroy());this.display=null}positionCheckboxes(){let W,re=this.group&&this.group.alignAttr,de=this.clipHeight||this.legendHeight,ie=this.titleHeight;re&&(W=re.translateY,this.allItems.forEach(function(oe){let Ee,xe=oe.checkbox;xe&&(Ee=W+ie+xe.y+(this.scrollOffset||0)+3,I(xe,{left:re.translateX+oe.checkboxOffset+xe.x-20+"px",top:Ee+"px",display:this.proximate||Ee>W-6&&Ee<W+de-6?"":"none"}))},this))}renderTitle(){let W=this.options,re=this.padding,de=W.title,ie,oe=0;de.text&&(this.title||(this.title=this.chart.renderer.label(de.text,re-3,re-4,void 0,void 0,void 0,W.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(de.style),this.title.add(this.group)),de.width||this.title.css({width:this.maxLegendWidth+"px"}),oe=(ie=this.title.getBBox()).height,this.offsetWidth=ie.width,this.contentGroup.attr({translateY:oe})),this.titleHeight=oe}setText(W){let re=this.options;W.legendItem.label.attr({text:re.labelFormat?P(re.labelFormat,W,this.chart):re.labelFormatter.call(W)})}renderItem(W){let re=W.legendItem=W.legendItem||{},de=this.chart,ie=de.renderer,oe=this.options,Ee=oe.layout==="horizontal",xe=this.symbolWidth,Se=oe.symbolPadding||0,K=this.itemStyle,Q=this.itemHiddenStyle,ae=Ee?$(oe.itemDistance,20):0,_e=!oe.rtl,J=!W.series,ne=!J&&W.series.drawLegendSymbol?W.series:W,ce=ne.options,ye=!!this.createCheckboxForItem&&ce&&ce.showCheckbox,we=oe.useHTML,ze=W.options.className,Ce=re.label,Ie=xe+Se+ae+(ye?20:0);!Ce&&(re.group=ie.g("legend-item").addClass("highcharts-"+ne.type+"-series highcharts-color-"+W.colorIndex+(ze?" "+ze:"")+(J?" highcharts-series-"+W.index:"")).attr({zIndex:1}).add(this.scrollGroup),re.label=Ce=ie.text("",_e?xe+Se:-Se,this.baseline||0,we),de.styledMode||Ce.css(V(W.visible?K:Q)),Ce.attr({align:_e?"left":"right",zIndex:2}).add(re.group),!this.baseline&&(this.fontMetrics=ie.fontMetrics(Ce),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,Ce.attr("y",this.baseline),this.symbolHeight=$(oe.symbolHeight,this.fontMetrics.f),oe.squareSymbol&&(this.symbolWidth=$(oe.symbolWidth,Math.max(this.symbolHeight,16)),Ie=this.symbolWidth+Se+ae+(ye?20:0),_e&&Ce.attr("x",this.symbolWidth+Se))),ne.drawLegendSymbol(this,W),this.setItemEvents&&this.setItemEvents(W,Ce,we)),ye&&!W.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(W),this.colorizeItem(W,W.visible),(de.styledMode||!K.width)&&Ce.css({width:(oe.itemWidth||this.widthOption||de.spacingBox.width)-Ie+"px"}),this.setText(W);let Fe=Ce.getBBox(),Ge=this.fontMetrics&&this.fontMetrics.h||0;W.itemWidth=W.checkboxOffset=oe.itemWidth||re.labelWidth||Fe.width+Ie,this.maxItemWidth=Math.max(this.maxItemWidth,W.itemWidth),this.totalItemWidth+=W.itemWidth,this.itemHeight=W.itemHeight=Math.round(re.labelHeight||(Fe.height>1.5*Ge?Fe.height:Ge))}layoutItem(W){let re=this.options,de=this.padding,ie=re.layout==="horizontal",oe=W.itemHeight,Ee=this.itemMarginBottom,xe=this.itemMarginTop,Se=ie?$(re.itemDistance,20):0,K=this.maxLegendWidth,Q=re.alignColumns&&this.totalItemWidth>K?this.maxItemWidth:W.itemWidth,ae=W.legendItem||{};ie&&this.itemX-de+Q>K&&(this.itemX=de,this.lastLineHeight&&(this.itemY+=xe+this.lastLineHeight+Ee),this.lastLineHeight=0),this.lastItemY=xe+this.itemY+Ee,this.lastLineHeight=Math.max(oe,this.lastLineHeight),ae.x=this.itemX,ae.y=this.itemY,ie?this.itemX+=Q:(this.itemY+=xe+oe+Ee,this.lastLineHeight=oe),this.offsetWidth=this.widthOption||Math.max((ie?this.itemX-de-(W.checkbox?0:Se):Q)+de,this.offsetWidth)}getAllItems(){let W=[];return this.chart.series.forEach(function(re){let de=re&&re.options;re&&$(de.showInLegend,!N(de.linkedTo)&&void 0,!0)&&(W=W.concat((re.legendItem||{}).labels||(de.legendType==="point"?re.data:re)))}),X(this,"afterGetAllItems",{allItems:W}),W}getAlignment(){let W=this.options;return this.proximate?W.align.charAt(0)+"tv":W.floating?"":W.align.charAt(0)+W.verticalAlign.charAt(0)+W.layout.charAt(0)}adjustMargins(W,re){let de=this.chart,ie=this.options,oe=this.getAlignment();oe&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach(function(Ee,xe){Ee.test(oe)&&!N(W[xe])&&(de[S[xe]]=Math.max(de[S[xe]],de.legend[(xe+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][xe]*ie[xe%2?"x":"y"]+$(ie.margin,12)+re[xe]+(de.titleOffset[xe]||0)))})}proximatePositions(){let W,re=this.chart,de=[],ie=this.options.align==="left";for(let oe of(this.allItems.forEach(function(Ee){let xe,Se,K=ie,Q,ae;Ee.yAxis&&(Ee.xAxis.options.reversed&&(K=!K),Ee.points&&(xe=Z(K?Ee.points:Ee.points.slice(0).reverse(),function(_e){return O(_e.plotY)})),Se=this.itemMarginTop+Ee.legendItem.label.getBBox().height+this.itemMarginBottom,ae=Ee.yAxis.top-re.plotTop,Q=Ee.visible?(xe?xe.plotY:Ee.yAxis.height)+(ae-.3*Se):ae+Ee.yAxis.height,de.push({target:Q,size:Se,item:Ee}))},this),x(de,re.plotHeight)))W=oe.item.legendItem||{},O(oe.pos)&&(W.y=re.plotTop-re.spacing[0]+oe.pos)}render(){let W=this.chart,re=W.renderer,de=this.options,ie=this.padding,oe=this.getAllItems(),Ee,xe,Se,K=this.group,Q,ae=this.box;this.itemX=ie,this.itemY=this.initialItemY,this.offsetWidth=0,this.lastItemY=0,this.widthOption=R(de.width,W.spacingBox.width-ie),Q=W.spacingBox.width-2*ie-de.x,["rm","lm"].indexOf(this.getAlignment().substring(0,2))>-1&&(Q/=2),this.maxLegendWidth=this.widthOption||Q,K||(this.group=K=re.g("legend").addClass(de.className||"").attr({zIndex:7}).add(),this.contentGroup=re.g().attr({zIndex:1}).add(K),this.scrollGroup=re.g().add(this.contentGroup)),this.renderTitle(),G(oe,(_e,J)=>(_e.options&&_e.options.legendIndex||0)-(J.options&&J.options.legendIndex||0)),de.reversed&&oe.reverse(),this.allItems=oe,this.display=Ee=!!oe.length,this.lastLineHeight=0,this.maxItemWidth=0,this.totalItemWidth=0,this.itemHeight=0,oe.forEach(this.renderItem,this),oe.forEach(this.layoutItem,this),xe=(this.widthOption||this.offsetWidth)+ie,Se=this.lastItemY+this.lastLineHeight+this.titleHeight,Se=this.handleOverflow(Se)+ie,ae||(this.box=ae=re.rect().addClass("highcharts-legend-box").attr({r:de.borderRadius}).add(K)),W.styledMode||ae.attr({stroke:de.borderColor,"stroke-width":de.borderWidth||0,fill:de.backgroundColor||"none"}).shadow(de.shadow),xe>0&&Se>0&&ae[ae.placed?"animate":"attr"](ae.crisp.call({},{x:0,y:0,width:xe,height:Se},ae.strokeWidth())),K[Ee?"show":"hide"](),W.styledMode&&K.getStyle("display")==="none"&&(xe=Se=0),this.legendWidth=xe,this.legendHeight=Se,Ee&&this.align(),this.proximate||this.positionItems(),X(this,"afterRender")}align(W=this.chart.spacingBox){let re=this.chart,de=this.options,ie=W.y;/(lth|ct|rth)/.test(this.getAlignment())&&re.titleOffset[0]>0?ie+=re.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&re.titleOffset[2]>0&&(ie-=re.titleOffset[2]),ie!==W.y&&(W=V(W,{y:ie})),re.hasRendered||(this.group.placed=!1),this.group.align(V(de,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":de.verticalAlign}),!0,W)}handleOverflow(W){let re=this,de=this.chart,ie=de.renderer,oe=this.options,Ee=oe.y,xe=oe.verticalAlign==="top",Se=this.padding,K=oe.maxHeight,Q=oe.navigation,ae=$(Q.animation,!0),_e=Q.arrowSize||12,J=this.pages,ne=this.allItems,ce=function(ke){typeof ke=="number"?Ge.attr({height:ke}):Ge&&(re.clipRect=Ge.destroy(),re.contentGroup.clip()),re.contentGroup.div&&(re.contentGroup.div.style.clip=ke?"rect("+Se+"px,9999px,"+(Se+ke)+"px,0)":"auto")},ye=function(ke){return re[ke]=ie.circle(0,0,1.3*_e).translate(_e/2,_e/2).add(Fe),de.styledMode||re[ke].attr("fill","rgba(0,0,0,0.0001)"),re[ke]},we,ze,Ce,Ie=de.spacingBox.height+(xe?-Ee:Ee)-Se,Fe=this.nav,Ge=this.clipRect;return oe.layout!=="horizontal"||oe.verticalAlign==="middle"||oe.floating||(Ie/=2),K&&(Ie=Math.min(Ie,K)),J.length=0,W&&Ie>0&&W>Ie&&Q.enabled!==!1?(this.clipHeight=we=Math.max(Ie-20-this.titleHeight-Se,0),this.currentPage=$(this.currentPage,1),this.fullHeight=W,ne.forEach((ke,ge)=>{let fe=(Ce=ke.legendItem||{}).y||0,Me=Math.round(Ce.label.getBBox().height),De=J.length;(!De||fe-J[De-1]>we&&(ze||fe)!==J[De-1])&&(J.push(ze||fe),De++),Ce.pageIx=De-1,ze&&((ne[ge-1].legendItem||{}).pageIx=De-1),ge===ne.length-1&&fe+Me-J[De-1]>we&&fe>J[De-1]&&(J.push(fe),Ce.pageIx=De),fe!==ze&&(ze=fe)}),Ge||(Ge=re.clipRect=ie.clipRect(0,Se-2,9999,0),re.contentGroup.clip(Ge)),ce(we),Fe||(this.nav=Fe=ie.g().attr({zIndex:1}).add(this.group),this.up=ie.symbol("triangle",0,0,_e,_e).add(Fe),ye("upTracker").on("click",function(){re.scroll(-1,ae)}),this.pager=ie.text("",15,10).addClass("highcharts-legend-navigation"),!de.styledMode&&Q.style&&this.pager.css(Q.style),this.pager.add(Fe),this.down=ie.symbol("triangle-down",0,0,_e,_e).add(Fe),ye("downTracker").on("click",function(){re.scroll(1,ae)})),re.scroll(0),W=Ie):Fe&&(ce(),this.nav=Fe.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),W}scroll(W,re){let de=this.chart,ie=this.pages,oe=ie.length,Ee=this.clipHeight,xe=this.options.navigation,Se=this.pager,K=this.padding,Q=this.currentPage+W;Q>oe&&(Q=oe),Q>0&&(re!==void 0&&_(re,de),this.nav.attr({translateX:K,translateY:Ee+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach(function(ae){ae.attr({class:Q===1?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),Se.attr({text:Q+"/"+oe}),[this.down,this.downTracker].forEach(function(ae){ae.attr({x:18+this.pager.getBBox().width,class:Q===oe?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})},this),de.styledMode||(this.up.attr({fill:Q===1?xe.inactiveColor:xe.activeColor}),this.upTracker.css({cursor:Q===1?"default":"pointer"}),this.down.attr({fill:Q===oe?xe.inactiveColor:xe.activeColor}),this.downTracker.css({cursor:Q===oe?"default":"pointer"})),this.scrollOffset=-ie[Q-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=Q,this.positionCheckboxes(),U(()=>{X(this,"afterScroll",{currentPage:Q})},C($(re,de.renderer.globalAnimation,!0)).duration))}setItemEvents(W,re,de){let ie=this,oe=W.legendItem||{},Ee=ie.chart.renderer.boxWrapper,xe=W instanceof p,Se=W instanceof n,K="highcharts-legend-"+(xe?"point":"series")+"-active",Q=ie.chart.styledMode,ae=de?[re,oe.symbol]:[oe.group],_e=J=>{ie.allItems.forEach(ne=>{W!==ne&&[ne].concat(ne.linkedSeries||[]).forEach(ce=>{ce.setState(J,!xe)})})};for(let J of ae)J&&J.on("mouseover",function(){W.visible&&_e("inactive"),W.setState("hover"),W.visible&&Ee.addClass(K),Q||re.css(ie.options.itemHoverStyle)}).on("mouseout",function(){ie.chart.styledMode||re.css(V(W.visible?ie.itemStyle:ie.itemHiddenStyle)),_e(""),Ee.removeClass(K),W.setState()}).on("click",function(ne){let ce=function(){W.setVisible&&W.setVisible(),_e(W.visible?"inactive":"")};Ee.removeClass(K),X(ie,"itemClick",{browserEvent:ne,legendItem:W},ce),xe?W.firePointEvent("legendItemClick",{browserEvent:ne}):Se&&X(W,"legendItemClick",{browserEvent:ne})})}createCheckboxForItem(W){W.checkbox=T("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:W.selected,defaultChecked:W.selected},this.options.itemCheckboxStyle,this.chart.container),D(W.checkbox,"click",function(re){let de=re.target;X(W.series||W,"checkboxClick",{checked:de.checked,item:W},function(){W.select()})})}}return(y=B).compose=function(H){L(k,"Core.Legend")&&D(H,"beforeMargins",function(){this.legend=new y(this,this.options.legend)})},B}),r(t,"Core/Chart/Chart.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/Axis.js"],t["Core/Defaults.js"],t["Core/Templating.js"],t["Core/Foundation.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Time.js"],t["Core/Utilities.js"],t["Core/Renderer/HTML/AST.js"],t["Core/Axis/Tick.js"]],function(s,l,u,n,p,m,g,v,y,C,_,w,k,S){let{animate:x,animObject:P,setAnimation:D}=s,{defaultOptions:T,defaultTime:I}=u,{numberFormat:N}=n,{registerEventOptions:q}=p,{charts:Z,doc:X,marginNames:O,svg:V,win:$}=m,{seriesTypes:L}=y,{addEvent:R,attr:G,createElement:U,css:B,defined:H,diffObjects:W,discardElement:re,erase:de,error:ie,extend:oe,find:Ee,fireEvent:xe,getStyle:Se,isArray:K,isNumber:Q,isObject:ae,isString:_e,merge:J,objectEach:ne,pick:ce,pInt:ye,relativeLength:we,removeEvent:ze,splat:Ce,syncTimeout:Ie,uniqueKey:Fe}=w;class Ge{static chart(ge,fe,Me){return new Ge(ge,fe,Me)}constructor(ge,fe,Me){this.sharedClips={};let De=[...arguments];(_e(ge)||ge.nodeName)&&(this.renderTo=De.shift()),this.init(De[0],De[1])}setZoomOptions(){let ge=this.options.chart,fe=ge.zooming;this.zooming={...fe,type:ce(ge.zoomType,fe.type),key:ce(ge.zoomKey,fe.key),pinchType:ce(ge.pinchType,fe.pinchType),singleTouch:ce(ge.zoomBySingleTouch,fe.singleTouch,!1),resetButton:J(fe.resetButton,ge.resetZoomButton)}}init(ge,fe){xe(this,"init",{args:arguments},function(){let Me=J(T,ge),De=Me.chart;this.userOptions=oe({},ge),this.margin=[],this.spacing=[],this.labelCollectors=[],this.callback=fe,this.isResizing=0,this.options=Me,this.axes=[],this.series=[],this.time=ge.time&&Object.keys(ge.time).length?new _(ge.time):m.time,this.numberFormatter=De.numberFormatter||N,this.styledMode=De.styledMode,this.hasCartesianSeries=De.showAxes,this.index=Z.length,Z.push(this),m.chartCount++,q(this,De),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,this.setZoomOptions(),xe(this,"afterInit"),this.firstRender()})}initSeries(ge){let fe=this.options.chart,Me=ge.type||fe.type,De=L[Me];De||ie(17,!0,this,{missingModuleFor:Me});let Pe=new De;return typeof Pe.init=="function"&&Pe.init(this,ge),Pe}setSortedData(){this.getSeriesOrderByLinks().forEach(function(ge){ge.points||ge.data||!ge.enabledDataSorting||ge.setData(ge.options.data,!1)})}getSeriesOrderByLinks(){return this.series.concat().sort(function(ge,fe){return ge.linkedSeries.length||fe.linkedSeries.length?fe.linkedSeries.length-ge.linkedSeries.length:0})}orderItems(ge,fe=0){let Me=this[ge],De=this.options[ge]=Ce(this.options[ge]).slice(),Pe=this.userOptions[ge]=this.userOptions[ge]?Ce(this.userOptions[ge]).slice():[];if(this.hasRendered&&(De.splice(fe),Pe.splice(fe)),Me)for(let je=fe,Xe=Me.length;je<Xe;++je){let et=Me[je];et&&(et.index=je,et instanceof v&&(et.name=et.getName()),et.options.isInternal||(De[je]=et.options,Pe[je]=et.userOptions))}}isInsidePlot(ge,fe,Me={}){var Ct;let{inverted:De,plotBox:Pe,plotLeft:je,plotTop:Xe,scrollablePlotBox:et}=this,{scrollLeft:nt=0,scrollTop:ht=0}=Me.visiblePlotOnly&&((Ct=this.scrollablePlotArea)==null?void 0:Ct.scrollingContainer)||{},gt=Me.series,wt=Me.visiblePlotOnly&&et||Pe,Rt=Me.inverted?fe:ge,ft=Me.inverted?ge:fe,St={x:Rt,y:ft,isInsidePlot:!0,options:Me};if(!Me.ignoreX){let si=gt&&(De&&!this.polar?gt.yAxis:gt.xAxis)||{pos:je,len:1/0},di=Me.paneCoordinates?si.pos+Rt:je+Rt;di>=Math.max(nt+je,si.pos)&&di<=Math.min(nt+je+wt.width,si.pos+si.len)||(St.isInsidePlot=!1)}if(!Me.ignoreY&&St.isInsidePlot){let si=!De&&Me.axis&&!Me.axis.isXAxis&&Me.axis||gt&&(De?gt.xAxis:gt.yAxis)||{pos:Xe,len:1/0},di=Me.paneCoordinates?si.pos+ft:Xe+ft;di>=Math.max(ht+Xe,si.pos)&&di<=Math.min(ht+Xe+wt.height,si.pos+si.len)||(St.isInsidePlot=!1)}return xe(this,"afterIsInsidePlot",St),St.isInsidePlot}redraw(ge){xe(this,"beforeRedraw");let fe=this.hasCartesianSeries?this.axes:this.colorAxis||[],Me=this.series,De=this.pointer,Pe=this.legend,je=this.userOptions.legend,Xe=this.renderer,et=Xe.isHidden(),nt=[],ht,gt,wt,Rt=this.isDirtyBox,ft=this.isDirtyLegend,St;for(Xe.rootFontSize=Xe.boxWrapper.getStyle("font-size"),this.setResponsive&&this.setResponsive(!1),D(!!this.hasRendered&&ge,this),et&&this.temporaryDisplay(),this.layOutTitles(!1),wt=Me.length;wt--;)if(((St=Me[wt]).options.stacking||St.options.centerInCategory)&&(gt=!0,St.isDirty)){ht=!0;break}if(ht)for(wt=Me.length;wt--;)(St=Me[wt]).options.stacking&&(St.isDirty=!0);Me.forEach(function(Ct){Ct.isDirty&&(Ct.options.legendType==="point"?(typeof Ct.updateTotals=="function"&&Ct.updateTotals(),ft=!0):je&&(je.labelFormatter||je.labelFormat)&&(ft=!0)),Ct.isDirtyData&&xe(Ct,"updatedData")}),ft&&Pe&&Pe.options.enabled&&(Pe.render(),this.isDirtyLegend=!1),gt&&this.getStacks(),fe.forEach(function(Ct){Ct.updateNames(),Ct.setScale()}),this.getMargins(),fe.forEach(function(Ct){Ct.isDirty&&(Rt=!0)}),fe.forEach(function(Ct){let si=Ct.min+","+Ct.max;Ct.extKey!==si&&(Ct.extKey=si,nt.push(function(){xe(Ct,"afterSetExtremes",oe(Ct.eventArgs,Ct.getExtremes())),delete Ct.eventArgs})),(Rt||gt)&&Ct.redraw()}),Rt&&this.drawChartBox(),xe(this,"predraw"),Me.forEach(function(Ct){(Rt||Ct.isDirty)&&Ct.visible&&Ct.redraw(),Ct.isDirtyData=!1}),De&&De.reset(!0),Xe.draw(),xe(this,"redraw"),xe(this,"render"),et&&this.temporaryDisplay(!0),nt.forEach(function(Ct){Ct.call()})}get(ge){let fe=this.series;function Me(Pe){return Pe.id===ge||Pe.options&&Pe.options.id===ge}let De=Ee(this.axes,Me)||Ee(this.series,Me);for(let Pe=0;!De&&Pe<fe.length;Pe++)De=Ee(fe[Pe].points||[],Me);return De}getAxes(){let ge=this.userOptions;for(let fe of(xe(this,"getAxes"),["xAxis","yAxis"]))for(let Me of ge[fe]=Ce(ge[fe]||{}))new l(this,Me,fe);xe(this,"afterGetAxes")}getSelectedPoints(){return this.series.reduce((ge,fe)=>(fe.getPointsCollection().forEach(Me=>{ce(Me.selectedStaging,Me.selected)&&ge.push(Me)}),ge),[])}getSelectedSeries(){return this.series.filter(function(ge){return ge.selected})}setTitle(ge,fe,Me){this.applyDescription("title",ge),this.applyDescription("subtitle",fe),this.applyDescription("caption",void 0),this.layOutTitles(Me)}applyDescription(ge,fe){let Me=this,De=this.options[ge]=J(this.options[ge],fe),Pe=this[ge];Pe&&fe&&(this[ge]=Pe=Pe.destroy()),De&&!Pe&&((Pe=this.renderer.text(De.text,0,0,De.useHTML).attr({align:De.align,class:"highcharts-"+ge,zIndex:De.zIndex||4}).add()).update=function(je,Xe){Me.applyDescription(ge,je),Me.layOutTitles(Xe)},this.styledMode||Pe.css(oe(ge==="title"?{fontSize:this.options.isStock?"1em":"1.2em"}:{},De.style)),this[ge]=Pe)}layOutTitles(ge=!0){let fe=[0,0,0],Me=this.renderer,De=this.spacingBox;["title","subtitle","caption"].forEach(function(je){let Xe=this[je],et=this.options[je],nt=et.verticalAlign||"top",ht=je==="title"?nt==="top"?-3:0:nt==="top"?fe[0]+2:0;if(Xe){Xe.css({width:(et.width||De.width+(et.widthAdjust||0))+"px"});let gt=Me.fontMetrics(Xe).b,wt=Math.round(Xe.getBBox(et.useHTML).height);Xe.align(oe({y:nt==="bottom"?gt:ht+gt,height:wt},et),!1,"spacingBox"),et.floating||(nt==="top"?fe[0]=Math.ceil(fe[0]+wt):nt==="bottom"&&(fe[2]=Math.ceil(fe[2]+wt)))}},this),fe[0]&&(this.options.title.verticalAlign||"top")==="top"&&(fe[0]+=this.options.title.margin),fe[2]&&this.options.caption.verticalAlign==="bottom"&&(fe[2]+=this.options.caption.margin);let Pe=!this.titleOffset||this.titleOffset.join(",")!==fe.join(",");this.titleOffset=fe,xe(this,"afterLayOutTitles"),!this.isDirtyBox&&Pe&&(this.isDirtyBox=this.isDirtyLegend=Pe,this.hasRendered&&ge&&this.isDirtyBox&&this.redraw())}getContainerBox(){let ge=[].map.call(this.renderTo.children,Me=>{if(Me!==this.container){let De=Me.style.display;return Me.style.display="none",[Me,De]}}),fe={width:Se(this.renderTo,"width",!0)||0,height:Se(this.renderTo,"height",!0)||0};return ge.filter(Boolean).forEach(([Me,De])=>{Me.style.display=De}),fe}getChartSize(){var je;let ge=this.options.chart,fe=ge.width,Me=ge.height,De=this.getContainerBox(),Pe=De.height>1&&!(!((je=this.renderTo.parentElement)!=null&&je.style.height)&&this.renderTo.style.height==="100%");this.chartWidth=Math.max(0,fe||De.width||600),this.chartHeight=Math.max(0,we(Me,this.chartWidth)||(Pe?De.height:400)),this.containerBox=De}temporaryDisplay(ge){let fe=this.renderTo,Me;if(ge)for(;fe&&fe.style;)fe.hcOrigStyle&&(B(fe,fe.hcOrigStyle),delete fe.hcOrigStyle),fe.hcOrigDetached&&(X.body.removeChild(fe),fe.hcOrigDetached=!1),fe=fe.parentNode;else for(;fe&&fe.style&&(X.body.contains(fe)||fe.parentNode||(fe.hcOrigDetached=!0,X.body.appendChild(fe)),(Se(fe,"display",!1)==="none"||fe.hcOricDetached)&&(fe.hcOrigStyle={display:fe.style.display,height:fe.style.height,overflow:fe.style.overflow},Me={display:"block",overflow:"hidden"},fe!==this.renderTo&&(Me.height=0),B(fe,Me),fe.offsetWidth||fe.style.setProperty("display","block","important")),(fe=fe.parentNode)!==X.body););}setClassName(ge){this.container.className="highcharts-container "+(ge||"")}getContainer(){var wt;let ge=this.options,fe=ge.chart,Me="data-highcharts-chart",De=Fe(),Pe,je=this.renderTo;je||(this.renderTo=je=fe.renderTo),_e(je)&&(this.renderTo=je=X.getElementById(je)),je||ie(13,!0,this);let Xe=ye(G(je,Me));Q(Xe)&&Z[Xe]&&Z[Xe].hasRendered&&Z[Xe].destroy(),G(je,Me,this.index),je.innerHTML=k.emptyHTML,fe.skipClone||je.offsetWidth||this.temporaryDisplay(),this.getChartSize();let et=this.chartHeight,nt=this.chartWidth;B(je,{overflow:"hidden"}),this.styledMode||(Pe=oe({position:"relative",overflow:"hidden",width:nt+"px",height:et+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none",padding:"0px"},fe.style||{}));let ht=U("div",{id:De},Pe,je);this.container=ht,this.getChartSize(),nt===this.chartWidth||(nt=this.chartWidth,this.styledMode||B(ht,{width:ce((wt=fe.style)==null?void 0:wt.width,nt+"px")})),this.containerBox=this.getContainerBox(),this._cursor=ht.style.cursor;let gt=fe.renderer||!V?g.getRendererType(fe.renderer):C;if(this.renderer=new gt(ht,nt,et,void 0,fe.forExport,ge.exporting&&ge.exporting.allowHTML,this.styledMode),D(void 0,this),this.setClassName(fe.className),this.styledMode)for(let Rt in ge.defs)this.renderer.definition(ge.defs[Rt]);else this.renderer.setStyle(fe.style);this.renderer.chartIndex=this.index,xe(this,"afterGetContainer")}getMargins(ge){let{spacing:fe,margin:Me,titleOffset:De}=this;this.resetMargins(),De[0]&&!H(Me[0])&&(this.plotTop=Math.max(this.plotTop,De[0]+fe[0])),De[2]&&!H(Me[2])&&(this.marginBottom=Math.max(this.marginBottom,De[2]+fe[2])),this.legend&&this.legend.display&&this.legend.adjustMargins(Me,fe),xe(this,"getMargins"),ge||this.getAxisMargins()}getAxisMargins(){let ge=this,fe=ge.axisOffset=[0,0,0,0],Me=ge.colorAxis,De=ge.margin,Pe=function(je){je.forEach(function(Xe){Xe.visible&&Xe.getOffset()})};ge.hasCartesianSeries?Pe(ge.axes):Me&&Me.length&&Pe(Me),O.forEach(function(je,Xe){H(De[Xe])||(ge[je]+=fe[Xe])}),ge.setChartSize()}getOptions(){return W(this.userOptions,T)}reflow(ge){var Pe;let fe=this,Me=fe.containerBox,De=fe.getContainerBox();(Pe=fe.pointer)==null||delete Pe.chartPosition,!fe.isPrinting&&!fe.isResizing&&Me&&De.width&&((De.width!==Me.width||De.height!==Me.height)&&(w.clearTimeout(fe.reflowTimeout),fe.reflowTimeout=Ie(function(){fe.container&&fe.setSize(void 0,void 0,!1)},ge?100:0)),fe.containerBox=De)}setReflow(){let ge=this,fe=Me=>{var De;(De=ge.options)!=null&&De.chart.reflow&&ge.hasLoaded&&ge.reflow(Me)};if(typeof ResizeObserver=="function")new ResizeObserver(fe).observe(ge.renderTo);else{let Me=R($,"resize",fe);R(this,"destroy",Me)}}setSize(ge,fe,Me){let De=this,Pe=De.renderer;De.isResizing+=1,D(Me,De);let je=Pe.globalAnimation;De.oldChartHeight=De.chartHeight,De.oldChartWidth=De.chartWidth,ge!==void 0&&(De.options.chart.width=ge),fe!==void 0&&(De.options.chart.height=fe),De.getChartSize();let{chartWidth:Xe,chartHeight:et,scrollablePixelsX:nt=0,scrollablePixelsY:ht=0}=De;(De.isDirtyBox||Xe!==De.oldChartWidth||et!==De.oldChartHeight)&&(De.styledMode||(je?x:B)(De.container,{width:`${Xe+nt}px`,height:`${et+ht}px`},je),De.setChartSize(!0),Pe.setSize(Xe,et,je),De.axes.forEach(function(gt){gt.isDirty=!0,gt.setScale()}),De.isDirtyLegend=!0,De.isDirtyBox=!0,De.layOutTitles(),De.getMargins(),De.redraw(je),De.oldChartHeight=void 0,xe(De,"resize"),setTimeout(()=>{De&&xe(De,"endResize")},P(je).duration)),De.isResizing-=1}setChartSize(ge){let fe,Me,De,Pe,{chartHeight:je,chartWidth:Xe,inverted:et,spacing:nt,renderer:ht}=this,gt=this.clipOffset,wt=Math[et?"floor":"round"];this.plotLeft=fe=Math.round(this.plotLeft),this.plotTop=Me=Math.round(this.plotTop),this.plotWidth=De=Math.max(0,Math.round(Xe-fe-this.marginRight)),this.plotHeight=Pe=Math.max(0,Math.round(je-Me-this.marginBottom)),this.plotSizeX=et?Pe:De,this.plotSizeY=et?De:Pe,this.spacingBox=ht.spacingBox={x:nt[3],y:nt[0],width:Xe-nt[3]-nt[1],height:je-nt[0]-nt[2]},this.plotBox=ht.plotBox={x:fe,y:Me,width:De,height:Pe},gt&&(this.clipBox={x:wt(gt[3]),y:wt(gt[0]),width:wt(this.plotSizeX-gt[1]-gt[3]),height:wt(this.plotSizeY-gt[0]-gt[2])}),ge||(this.axes.forEach(function(Rt){Rt.setAxisSize(),Rt.setAxisTranslation()}),ht.alignElements()),xe(this,"afterSetChartSize",{skipAxes:ge})}resetMargins(){xe(this,"resetMargins");let ge=this,fe=ge.options.chart,Me=fe.plotBorderWidth||0,De=Me/2;["margin","spacing"].forEach(function(Pe){let je=fe[Pe],Xe=ae(je)?je:[je,je,je,je];["Top","Right","Bottom","Left"].forEach(function(et,nt){ge[Pe][nt]=ce(fe[Pe+et],Xe[nt])})}),O.forEach(function(Pe,je){ge[Pe]=ce(ge.margin[je],ge.spacing[je])}),ge.axisOffset=[0,0,0,0],ge.clipOffset=[De,De,De,De],ge.plotBorderWidth=Me}drawChartBox(){let ge=this.options.chart,fe=this.renderer,Me=this.chartWidth,De=this.chartHeight,Pe=this.styledMode,je=this.plotBGImage,Xe=ge.backgroundColor,et=ge.plotBackgroundColor,nt=ge.plotBackgroundImage,ht=this.plotLeft,gt=this.plotTop,wt=this.plotWidth,Rt=this.plotHeight,ft=this.plotBox,St=this.clipRect,Ct=this.clipBox,si=this.chartBackground,di=this.plotBackground,Ht=this.plotBorder,cn,Zi,xn,jn="animate";si||(this.chartBackground=si=fe.rect().addClass("highcharts-background").add(),jn="attr"),Pe?cn=Zi=si.strokeWidth():(Zi=(cn=ge.borderWidth||0)+(ge.shadow?8:0),xn={fill:Xe||"none"},(cn||si["stroke-width"])&&(xn.stroke=ge.borderColor,xn["stroke-width"]=cn),si.attr(xn).shadow(ge.shadow)),si[jn]({x:Zi/2,y:Zi/2,width:Me-Zi-cn%2,height:De-Zi-cn%2,r:ge.borderRadius}),jn="animate",di||(jn="attr",this.plotBackground=di=fe.rect().addClass("highcharts-plot-background").add()),di[jn](ft),!Pe&&(di.attr({fill:et||"none"}).shadow(ge.plotShadow),nt&&(je?(nt!==je.attr("href")&&je.attr("href",nt),je.animate(ft)):this.plotBGImage=fe.image(nt,ht,gt,wt,Rt).add())),St?St.animate({width:Ct.width,height:Ct.height}):this.clipRect=fe.clipRect(Ct),jn="animate",Ht||(jn="attr",this.plotBorder=Ht=fe.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),Pe||Ht.attr({stroke:ge.plotBorderColor,"stroke-width":ge.plotBorderWidth||0,fill:"none"}),Ht[jn](Ht.crisp({x:ht,y:gt,width:wt,height:Rt},-Ht.strokeWidth())),this.isDirtyBox=!1,xe(this,"afterDrawChartBox")}propFromSeries(){let ge,fe,Me,De=this,Pe=De.options.chart,je=De.options.series;["inverted","angular","polar"].forEach(function(Xe){for(fe=L[Pe.type],Me=Pe[Xe]||fe&&fe.prototype[Xe],ge=je&&je.length;!Me&&ge--;)(fe=L[je[ge].type])&&fe.prototype[Xe]&&(Me=!0);De[Xe]=Me})}linkSeries(ge){let fe=this,Me=fe.series;Me.forEach(function(De){De.linkedSeries.length=0}),Me.forEach(function(De){let{linkedTo:Pe}=De.options;if(_e(Pe)){let je;(je=Pe===":previous"?fe.series[De.index-1]:fe.get(Pe))&&je.linkedParent!==De&&(je.linkedSeries.push(De),De.linkedParent=je,je.enabledDataSorting&&De.setDataSortingOptions(),De.visible=ce(De.options.visible,je.options.visible,De.visible))}}),xe(this,"afterLinkSeries",{isUpdating:ge})}renderSeries(){this.series.forEach(function(ge){ge.translate(),ge.render()})}render(){var ht;let ge=this.axes,fe=this.colorAxis,Me=this.renderer,De=this.options.chart.axisLayoutRuns||2,Pe=gt=>{gt.forEach(wt=>{wt.visible&&wt.render()})},je=0,Xe=!0,et,nt=0;for(let gt of(this.setTitle(),xe(this,"beforeMargins"),(ht=this.getStacks)==null||ht.call(this),this.getMargins(!0),this.setChartSize(),ge)){let{options:wt}=gt,{labels:Rt}=wt;if(this.hasCartesianSeries&&gt.horiz&&gt.visible&&Rt.enabled&&gt.series.length&&gt.coll!=="colorAxis"&&!this.polar){je=wt.tickLength,gt.createGroups();let ft=new S(gt,0,"",!0),St=ft.createLabel("x",Rt);if(ft.destroy(),St&&ce(Rt.reserveSpace,!Q(wt.crossing))&&(je=St.getBBox().height+Rt.distance+Math.max(wt.offset||0,0)),je){St==null||St.destroy();break}}}for(this.plotHeight=Math.max(this.plotHeight-je,0);(Xe||et||De>1)&&nt<De;){let gt=this.plotWidth,wt=this.plotHeight;for(let Rt of ge)nt===0?Rt.setScale():(Rt.horiz&&Xe||!Rt.horiz&&et)&&Rt.setTickInterval(!0);nt===0?this.getAxisMargins():this.getMargins(),Xe=gt/this.plotWidth>(nt?1:1.1),et=wt/this.plotHeight>(nt?1:1.05),nt++}this.drawChartBox(),this.hasCartesianSeries?Pe(ge):fe&&fe.length&&Pe(fe),this.seriesGroup||(this.seriesGroup=Me.g("series-group").attr({zIndex:3}).shadow(this.options.chart.seriesGroupShadow).add()),this.renderSeries(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0}addCredits(ge){let fe=this,Me=J(!0,this.options.credits,ge);Me.enabled&&!this.credits&&(this.credits=this.renderer.text(Me.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){Me.href&&($.location.href=Me.href)}).attr({align:Me.position.align,zIndex:8}),fe.styledMode||this.credits.css(Me.style),this.credits.add().align(Me.position),this.credits.update=function(De){fe.credits=fe.credits.destroy(),fe.addCredits(De)})}destroy(){let ge,fe=this,Me=fe.axes,De=fe.series,Pe=fe.container,je=Pe&&Pe.parentNode;for(xe(fe,"destroy"),fe.renderer.forExport?de(Z,fe):Z[fe.index]=void 0,m.chartCount--,fe.renderTo.removeAttribute("data-highcharts-chart"),ze(fe),ge=Me.length;ge--;)Me[ge]=Me[ge].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),ge=De.length;ge--;)De[ge]=De[ge].destroy();["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","rangeSelector","legend","resetZoomButton","tooltip","renderer"].forEach(function(Xe){let et=fe[Xe];et&&et.destroy&&(fe[Xe]=et.destroy())}),Pe&&(Pe.innerHTML=k.emptyHTML,ze(Pe),je&&re(Pe)),ne(fe,function(Xe,et){delete fe[et]})}firstRender(){var De;let ge=this,fe=ge.options;ge.getContainer(),ge.resetMargins(),ge.setChartSize(),ge.propFromSeries(),ge.getAxes();let Me=K(fe.series)?fe.series:[];fe.series=[],Me.forEach(function(Pe){ge.initSeries(Pe)}),ge.linkSeries(),ge.setSortedData(),xe(ge,"beforeRender"),ge.render(),(De=ge.pointer)==null||De.getChartPosition(),ge.renderer.imgCount||ge.hasLoaded||ge.onload(),ge.temporaryDisplay(!0)}onload(){this.callbacks.concat([this.callback]).forEach(function(ge){ge&&this.index!==void 0&&ge.apply(this,[this])},this),xe(this,"load"),xe(this,"render"),H(this.index)&&this.setReflow(),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0}warnIfA11yModuleNotLoaded(){let{options:ge,title:fe}=this;!ge||this.accessibility||(this.renderer.boxWrapper.attr({role:"img","aria-label":(fe&&fe.element.textContent||"").replace(/</g,"&lt;")}),ge.accessibility&&ge.accessibility.enabled===!1||ie('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))}addSeries(ge,fe,Me){let De,Pe=this;return ge&&(fe=ce(fe,!0),xe(Pe,"addSeries",{options:ge},function(){De=Pe.initSeries(ge),Pe.isDirtyLegend=!0,Pe.linkSeries(),De.enabledDataSorting&&De.setData(ge.data,!1),xe(Pe,"afterAddSeries",{series:De}),fe&&Pe.redraw(Me)})),De}addAxis(ge,fe,Me,De){return this.createAxis(fe?"xAxis":"yAxis",{axis:ge,redraw:Me,animation:De})}addColorAxis(ge,fe,Me){return this.createAxis("colorAxis",{axis:ge,redraw:fe,animation:Me})}createAxis(ge,fe){let Me=new l(this,fe.axis,ge);return ce(fe.redraw,!0)&&this.redraw(fe.animation),Me}showLoading(ge){let fe=this,Me=fe.options,De=Me.loading,Pe=function(){je&&B(je,{left:fe.plotLeft+"px",top:fe.plotTop+"px",width:fe.plotWidth+"px",height:fe.plotHeight+"px"})},je=fe.loadingDiv,Xe=fe.loadingSpan;je||(fe.loadingDiv=je=U("div",{className:"highcharts-loading highcharts-loading-hidden"},null,fe.container)),Xe||(fe.loadingSpan=Xe=U("span",{className:"highcharts-loading-inner"},null,je),R(fe,"redraw",Pe)),je.className="highcharts-loading",k.setElementHTML(Xe,ce(ge,Me.lang.loading,"")),fe.styledMode||(B(je,oe(De.style,{zIndex:10})),B(Xe,De.labelStyle),fe.loadingShown||(B(je,{opacity:0,display:""}),x(je,{opacity:De.style.opacity||.5},{duration:De.showDuration||0}))),fe.loadingShown=!0,Pe()}hideLoading(){let ge=this.options,fe=this.loadingDiv;fe&&(fe.className="highcharts-loading highcharts-loading-hidden",this.styledMode||x(fe,{opacity:0},{duration:ge.loading.hideDuration||100,complete:function(){B(fe,{display:"none"})}})),this.loadingShown=!1}update(ge,fe,Me,De){let Pe,je,Xe,et=this,nt={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},ht=ge.isResponsiveOptions,gt=[];xe(et,"update",{options:ge}),ht||et.setResponsive(!1,!0),ge=W(ge,et.options),et.userOptions=J(et.userOptions,ge);let wt=ge.chart;wt&&(J(!0,et.options.chart,wt),this.setZoomOptions(),"className"in wt&&et.setClassName(wt.className),("inverted"in wt||"polar"in wt||"type"in wt)&&(et.propFromSeries(),Pe=!0),"alignTicks"in wt&&(Pe=!0),"events"in wt&&q(this,wt),ne(wt,function(St,Ct){et.propsRequireUpdateSeries.indexOf("chart."+Ct)!==-1&&(je=!0),et.propsRequireDirtyBox.indexOf(Ct)!==-1&&(et.isDirtyBox=!0),et.propsRequireReflow.indexOf(Ct)===-1||(et.isDirtyBox=!0,ht||(Xe=!0))}),!et.styledMode&&wt.style&&et.renderer.setStyle(et.options.chart.style||{})),!et.styledMode&&ge.colors&&(this.options.colors=ge.colors),ge.time&&(this.time===I&&(this.time=new _(ge.time)),J(!0,et.options.time,ge.time)),ne(ge,function(St,Ct){et[Ct]&&typeof et[Ct].update=="function"?et[Ct].update(St,!1):typeof et[nt[Ct]]=="function"?et[nt[Ct]](St):Ct!=="colors"&&et.collectionsWithUpdate.indexOf(Ct)===-1&&J(!0,et.options[Ct],ge[Ct]),Ct!=="chart"&&et.propsRequireUpdateSeries.indexOf(Ct)!==-1&&(je=!0)}),this.collectionsWithUpdate.forEach(function(St){ge[St]&&(Ce(ge[St]).forEach(function(Ct,si){let di,Ht=H(Ct.id);Ht&&(di=et.get(Ct.id)),!di&&et[St]&&(di=et[St][ce(Ct.index,si)])&&(Ht&&H(di.options.id)||di.options.isInternal)&&(di=void 0),di&&di.coll===St&&(di.update(Ct,!1),Me&&(di.touched=!0)),!di&&Me&&et.collectionsWithInit[St]&&(et.collectionsWithInit[St][0].apply(et,[Ct].concat(et.collectionsWithInit[St][1]||[]).concat([!1])).touched=!0)}),Me&&et[St].forEach(function(Ct){Ct.touched||Ct.options.isInternal?delete Ct.touched:gt.push(Ct)}))}),gt.forEach(function(St){St.chart&&St.remove&&St.remove(!1)}),Pe&&et.axes.forEach(function(St){St.update({},!1)}),je&&et.getSeriesOrderByLinks().forEach(function(St){St.chart&&St.update({},!1)},this);let Rt=wt&&wt.width,ft=wt&&(_e(wt.height)?we(wt.height,Rt||et.chartWidth):wt.height);Xe||Q(Rt)&&Rt!==et.chartWidth||Q(ft)&&ft!==et.chartHeight?et.setSize(Rt,ft,De):ce(fe,!0)&&et.redraw(De),xe(et,"afterUpdate",{options:ge,redraw:fe,animation:De})}setSubtitle(ge,fe){this.applyDescription("subtitle",ge),this.layOutTitles(fe)}setCaption(ge,fe){this.applyDescription("caption",ge),this.layOutTitles(fe)}showResetZoom(){let ge=this,fe=T.lang,Me=ge.zooming.resetButton,De=Me.theme,Pe=Me.relativeTo==="chart"||Me.relativeTo==="spacingBox"?null:"plotBox";function je(){ge.zoomOut()}xe(this,"beforeShowResetZoom",null,function(){ge.resetZoomButton=ge.renderer.button(fe.resetZoom,null,null,je,De).attr({align:Me.position.align,title:fe.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(Me.position,!1,Pe)}),xe(this,"afterShowResetZoom")}zoomOut(){xe(this,"selection",{resetSelection:!0},()=>this.transform({reset:!0,trigger:"zoom"}))}pan(ge,fe){let Me=this,De=typeof fe=="object"?fe:{enabled:fe,type:"x"},Pe=De.type,je=Pe&&Me[{x:"xAxis",xy:"axes",y:"yAxis"}[Pe]].filter(et=>et.options.panningEnabled&&!et.options.isInternal),Xe=Me.options.chart;Xe!=null&&Xe.panning&&(Xe.panning=De),xe(this,"pan",{originalEvent:ge},()=>{Me.transform({axes:je,event:ge,to:{x:ge.chartX-(Me.mouseDownX||0),y:ge.chartY-(Me.mouseDownY||0)},trigger:"pan"}),B(Me.container,{cursor:"move"})})}transform(ge){var Rt;let{axes:fe=this.axes,event:Me,from:De={},reset:Pe,selection:je,to:Xe={},trigger:et}=ge,{inverted:nt}=this,ht=!1,gt,wt;for(let ft of((Rt=this.hoverPoints)==null||Rt.forEach(St=>St.setState()),fe)){let{horiz:St,len:Ct,minPointOffset:si=0,options:di,reversed:Ht}=ft,cn=St?"width":"height",Zi=St?"x":"y",xn=ce(Xe[cn],ft.len),jn=ce(De[cn],ft.len),nn=10>Math.abs(xn)?1:xn/jn,dt=(De[Zi]||0)+jn/2-ft.pos,vt=dt-((Xe[Zi]??ft.pos)+xn/2-ft.pos)/nn,Pt=Ht&&!nt||!Ht&&nt?-1:1;if(!Pe&&(dt<0||dt>ft.len))continue;let Ft=ft.toValue(vt,!0)+(je||ft.isOrdinal?0:si*Pt),qt=ft.toValue(vt+Ct/nn,!0)-(je||ft.isOrdinal?0:si*Pt||0),vi=ft.allExtremes;if(Ft>qt&&([Ft,qt]=[qt,Ft]),nn===1&&!Pe&&ft.coll==="yAxis"&&!vi){for(let zt of ft.series){let Dt=zt.getExtremes(zt.getProcessedData(!0).yData,!0);vi??(vi={dataMin:Number.MAX_VALUE,dataMax:-Number.MAX_VALUE}),Q(Dt.dataMin)&&Q(Dt.dataMax)&&(vi.dataMin=Math.min(Dt.dataMin,vi.dataMin),vi.dataMax=Math.max(Dt.dataMax,vi.dataMax))}ft.allExtremes=vi}let{dataMin:Oi,dataMax:hi,min:He,max:ve}=oe(ft.getExtremes(),vi||{}),Le=Oi??di.min,$e=hi??di.max,Ke=qt-Ft,st=ft.categories?0:Math.min(Ke,$e-Le),ct=Le-st*(H(di.min)?0:di.minPadding),ot=$e+st*(H(di.max)?0:di.maxPadding),rt=ft.allowZoomOutside||nn===1||et!=="zoom"&&nn>1,mt=Math.min(di.min??ct,ct,rt?He:ct),kt=Math.max(di.max??ot,ot,rt?ve:ot);(!ft.isOrdinal||ft.options.overscroll||nn!==1||Pe)&&(Ft<mt&&(Ft=mt,nn>=1&&(qt=Ft+Ke)),qt>kt&&(qt=kt,nn>=1&&(Ft=qt-Ke)),(Pe||ft.series.length&&(Ft!==He||qt!==ve)&&Ft>=mt&&qt<=kt)&&(je?je[ft.coll].push({axis:ft,min:Ft,max:qt}):(ft.isPanning=et!=="zoom",ft.isPanning&&(wt=!0),ft.setExtremes(Pe?void 0:Ft,Pe?void 0:qt,!1,!1,{move:vt,trigger:et,scale:nn}),!Pe&&(Ft>mt||qt<kt)&&et!=="mousewheel"&&(gt=!0)),ht=!0),Me&&(this[St?"mouseDownX":"mouseDownY"]=Me[St?"chartX":"chartY"]))}return ht&&(je?xe(this,"selection",je,()=>{delete ge.selection,ge.trigger="zoom",this.transform(ge)}):(!gt||wt||this.resetZoomButton?!gt&&this.resetZoomButton&&(this.resetZoomButton=this.resetZoomButton.destroy()):this.showResetZoom(),this.redraw(et==="zoom"&&(this.options.chart.animation??this.pointCount<100)))),ht}}return oe(Ge.prototype,{callbacks:[],collectionsWithInit:{xAxis:[Ge.prototype.addAxis,[!0]],yAxis:[Ge.prototype.addAxis,[!1]],series:[Ge.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:["backgroundColor","borderColor","borderWidth","borderRadius","plotBackgroundColor","plotBackgroundImage","plotBorderColor","plotBorderWidth","plotShadow","shadow"],propsRequireReflow:["margin","marginTop","marginRight","marginBottom","marginLeft","spacing","spacingTop","spacingRight","spacingBottom","spacingLeft"],propsRequireUpdateSeries:["chart.inverted","chart.polar","chart.ignoreHiddenSeries","chart.type","colors","plotOptions","time","tooltip"]}),Ge}),r(t,"Extensions/ScrollablePlotArea.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,n){let{stop:p}=s,{composed:m}=l,{addEvent:g,createElement:v,css:y,defined:C,merge:_,pushUnique:w}=n;function k(){let P=this.scrollablePlotArea;(this.scrollablePixelsX||this.scrollablePixelsY)&&!P&&(this.scrollablePlotArea=P=new x(this)),P==null||P.applyFixed()}function S(){this.chart.scrollablePlotArea&&(this.chart.scrollablePlotArea.isDirty=!0)}class x{static compose(D,T,I){w(m,this.compose)&&(g(D,"afterInit",S),g(T,"afterSetChartSize",N=>this.afterSetSize(N.target,N)),g(T,"render",k),g(I,"show",S))}static afterSetSize(D,T){let I,N,q,{minWidth:Z,minHeight:X}=D.options.chart.scrollablePlotArea||{},{clipBox:O,plotBox:V,inverted:$,renderer:L}=D;if(!L.forExport&&(Z?(D.scrollablePixelsX=I=Math.max(0,Z-D.chartWidth),I&&(D.scrollablePlotBox=_(D.plotBox),V.width=D.plotWidth+=I,O[$?"height":"width"]+=I,q=!0)):X&&(D.scrollablePixelsY=N=Math.max(0,X-D.chartHeight),C(N)&&(D.scrollablePlotBox=_(D.plotBox),V.height=D.plotHeight+=N,O[$?"width":"height"]+=N,q=!1)),C(q)&&!T.skipAxes))for(let R of D.axes)R.horiz===q&&(R.setAxisSize(),R.setAxisTranslation())}constructor(D){var G;let T,I=D.options.chart,N=u.getRendererType(),q=I.scrollablePlotArea||{},Z=this.moveFixedElements.bind(this),X={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};D.scrollablePixelsX&&(X.overflowX="auto"),D.scrollablePixelsY&&(X.overflowY="auto"),this.chart=D;let O=this.parentDiv=v("div",{className:"highcharts-scrolling-parent"},{position:"relative"},D.renderTo),V=this.scrollingContainer=v("div",{className:"highcharts-scrolling"},X,O),$=this.innerContainer=v("div",{className:"highcharts-inner-container"},void 0,V),L=this.fixedDiv=v("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(((G=I.style)==null?void 0:G.zIndex)||0)+2,top:0},void 0,!0),R=this.fixedRenderer=new N(L,D.chartWidth,D.chartHeight,I.style);this.mask=R.path().attr({fill:I.backgroundColor||"#fff","fill-opacity":q.opacity??.85,zIndex:-1}).addClass("highcharts-scrollable-mask").add(),V.parentNode.insertBefore(L,V),y(D.renderTo,{overflow:"visible"}),g(D,"afterShowResetZoom",Z),g(D,"afterApplyDrilldown",Z),g(D,"afterLayOutTitles",Z),g(V,"scroll",()=>{let{pointer:U,hoverPoint:B}=D;U&&(delete U.chartPosition,B&&(T=B),U.runPointActions(void 0,T,!0))}),$.appendChild(D.container)}applyFixed(){var Q;let{chart:D,fixedRenderer:T,isDirty:I,scrollingContainer:N}=this,{axisOffset:q,chartWidth:Z,chartHeight:X,container:O,plotHeight:V,plotLeft:$,plotTop:L,plotWidth:R,scrollablePixelsX:G=0,scrollablePixelsY:U=0}=D,{scrollPositionX:B=0,scrollPositionY:H=0}=D.options.chart.scrollablePlotArea||{},W=Z+G,re=X+U;T.setSize(Z,X),(I??!0)&&(this.isDirty=!1,this.moveFixedElements()),p(D.container),y(O,{width:`${W}px`,height:`${re}px`}),D.renderer.boxWrapper.attr({width:W,height:re,viewBox:[0,0,W,re].join(" ")}),(Q=D.chartBackground)==null||Q.attr({width:W,height:re}),y(N,{width:`${Z}px`,height:`${X}px`}),C(I)||(N.scrollLeft=G*B,N.scrollTop=U*H);let de=L-q[0]-1,ie=$-q[3]-1,oe=L+V+q[2]+1,Ee=$+R+q[1]+1,xe=$+R-G,Se=L+V-U,K=[["M",0,0]];G?K=[["M",0,de],["L",$-1,de],["L",$-1,oe],["L",0,oe],["Z"],["M",xe,de],["L",Z,de],["L",Z,oe],["L",xe,oe],["Z"]]:U&&(K=[["M",ie,0],["L",ie,L-1],["L",Ee,L-1],["L",Ee,0],["Z"],["M",ie,Se],["L",ie,X],["L",Ee,X],["L",Ee,Se],["Z"]]),D.redrawTrigger!=="adjustHeight"&&this.mask.attr({d:K})}moveFixedElements(){let D,{container:T,inverted:I,scrollablePixelsX:N,scrollablePixelsY:q}=this.chart,Z=this.fixedRenderer,X=x.fixedSelectors;for(let O of(N&&!I?D=".highcharts-yaxis":N&&I||q&&!I?D=".highcharts-xaxis":q&&I&&(D=".highcharts-yaxis"),D&&X.push(`${D}:not(.highcharts-radial-axis)`,`${D}-labels:not(.highcharts-radial-axis-labels)`),X))[].forEach.call(T.querySelectorAll(O),V=>{(V.namespaceURI===Z.SVG_NS?Z.box:Z.box.parentNode).appendChild(V),V.style.pointerEvents="auto"})}}return x.fixedSelectors=[".highcharts-breadcrumbs-group",".highcharts-contextbutton",".highcharts-caption",".highcharts-credits",".highcharts-drillup-button",".highcharts-legend",".highcharts-legend-checkbox",".highcharts-navigator-series",".highcharts-navigator-xaxis",".highcharts-navigator-yaxis",".highcharts-navigator",".highcharts-range-selector-group",".highcharts-reset-zoom",".highcharts-scrollbar",".highcharts-subtitle",".highcharts-title"],x}),r(t,"Core/Axis/Stacking/StackItem.js",[t["Core/Templating.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{format:n}=s,{series:p}=l,{destroyObjectProperties:m,fireEvent:g,isNumber:v,pick:y}=u;return class{constructor(C,_,w,k,S){let x=C.chart.inverted,P=C.reversed;this.axis=C;let D=this.isNegative=!!w!=!!P;this.options=_=_||{},this.x=k,this.total=null,this.cumulative=null,this.points={},this.hasValidPoints=!1,this.stack=S,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:_.align||(x?D?"left":"right":"center"),verticalAlign:_.verticalAlign||(x?"middle":D?"bottom":"top"),y:_.y,x:_.x},this.textAlign=_.textAlign||(x?D?"right":"left":"center")}destroy(){m(this,this.axis)}render(C){let _=this.axis.chart,w=this.options,k=w.format,S=k?n(k,this,_):w.formatter.call(this);if(this.label)this.label.attr({text:S,visibility:"hidden"});else{this.label=_.renderer.label(S,null,void 0,w.shape,void 0,void 0,w.useHTML,!1,"stack-labels");let x={r:w.borderRadius||0,text:S,padding:y(w.padding,5),visibility:"hidden"};_.styledMode||(x.fill=w.backgroundColor,x.stroke=w.borderColor,x["stroke-width"]=w.borderWidth,this.label.css(w.style||{})),this.label.attr(x),this.label.added||this.label.add(C)}this.label.labelrank=_.plotSizeY,g(this,"afterRender")}setOffset(C,_,w,k,S,x){let{alignOptions:P,axis:D,label:T,options:I,textAlign:N}=this,q=D.chart,Z=this.getStackBox({xOffset:C,width:_,boxBottom:w,boxTop:k,defaultX:S,xAxis:x}),{verticalAlign:X}=P;if(T&&Z){let O=T.getBBox(void 0,0),V=T.padding,$=y(I.overflow,"justify")==="justify",L;P.x=I.x||0,P.y=I.y||0;let{x:R,y:G}=this.adjustStackPosition({labelBox:O,verticalAlign:X,textAlign:N});Z.x-=R,Z.y-=G,T.align(P,!1,Z),(L=q.isInsidePlot(T.alignAttr.x+P.x+R,T.alignAttr.y+P.y+G))||($=!1),$&&p.prototype.justifyDataLabel.call(D,T,P,T.alignAttr,O,Z),T.attr({x:T.alignAttr.x,y:T.alignAttr.y,rotation:I.rotation,rotationOriginX:O.width*{left:0,center:.5,right:1}[I.textAlign||"center"],rotationOriginY:O.height/2}),y(!$&&I.crop,!0)&&(L=v(T.x)&&v(T.y)&&q.isInsidePlot(T.x-V+(T.width||0),T.y)&&q.isInsidePlot(T.x+V,T.y)),T[L?"show":"hide"]()}g(this,"afterSetOffset",{xOffset:C,width:_})}adjustStackPosition({labelBox:C,verticalAlign:_,textAlign:w}){let k={bottom:0,middle:1,top:2,right:1,center:0,left:-1},S=k[_],x=k[w];return{x:C.width/2+C.width/2*x,y:C.height/2*S}}getStackBox(C){let _=this.axis,w=_.chart,{boxTop:k,defaultX:S,xOffset:x,width:P,boxBottom:D}=C,T=_.stacking.usePercentage?100:y(k,this.total,0),I=_.toPixels(T),N=C.xAxis||w.xAxis[0],q=y(S,N.translate(this.x))+x,Z=Math.abs(I-_.toPixels(D||v(_.min)&&_.logarithmic&&_.logarithmic.lin2log(_.min)||0)),X=w.inverted,O=this.isNegative;return X?{x:(O?I:I-Z)-w.plotLeft,y:N.height-q-P+N.top-w.plotTop,width:Z,height:P}:{x:q+N.transB-w.plotLeft,y:(O?I-Z:I)-w.plotTop,width:P,height:Z}}}}),r(t,"Core/Axis/Stacking/StackingAxis.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Axis/Axis.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(s,l,u,n,p){var m;let{getDeferredAnimation:g}=s,{series:{prototype:v}}=u,{addEvent:y,correctFloat:C,defined:_,destroyObjectProperties:w,fireEvent:k,isArray:S,isNumber:x,objectEach:P,pick:D}=p;function T(){let L=this.inverted;this.axes.forEach(R=>{R.stacking&&R.stacking.stacks&&R.hasVisibleSeries&&(R.stacking.oldStacks=R.stacking.stacks)}),this.series.forEach(R=>{let G=R.xAxis&&R.xAxis.options||{};R.options.stacking&&R.reserveSpace()&&(R.stackKey=[R.type,D(R.options.stack,""),L?G.top:G.left,L?G.height:G.width].join(","))})}function I(){var R;let L=this.stacking;if(L){let G=L.stacks;P(G,(U,B)=>{w(U),delete G[B]}),(R=L.stackTotalGroup)==null||R.destroy()}}function N(){this.stacking||(this.stacking=new $(this))}function q(L,R,G,U){return!_(L)||L.x!==R||U&&L.stackKey!==U?L={x:R,index:0,key:U,stackKey:U}:L.index++,L.key=[G,R,L.index].join(","),L}function Z(){let L,R=this,G=R.yAxis,U=R.stackKey||"",B=G.stacking.stacks,H=R.processedXData,W=R.options.stacking,re=R[W+"Stacker"];re&&[U,"-"+U].forEach(de=>{var Se;let ie=H.length,oe,Ee,xe;for(;ie--;)oe=H[ie],L=R.getStackIndicator(L,oe,R.index,de),Ee=(Se=B[de])==null?void 0:Se[oe],(xe=Ee==null?void 0:Ee.points[L.key||""])&&re.call(R,xe,Ee,ie)})}function X(L,R,G){let U=R.total?100/R.total:0;L[0]=C(L[0]*U),L[1]=C(L[1]*U),this.stackedYData[G]=L[1]}function O(L){(this.is("column")||this.is("columnrange"))&&(this.options.centerInCategory&&!this.options.stacking&&this.chart.series.length>1?v.setStackedPoints.call(this,L,"group"):L.stacking.resetStacks())}function V(L,R){var Fe,Ge;let G,U,B,H,W,re,de,ie,oe,Ee=R||this.options.stacking;if(!Ee||!this.reserveSpace()||({group:"xAxis"}[Ee]||"yAxis")!==L.coll)return;let xe=this.processedXData,Se=this.processedYData,K=[],Q=Se.length,ae=this.options,_e=ae.threshold||0,J=ae.startFromThreshold?_e:0,ne=ae.stack,ce=R?`${this.type},${Ee}`:this.stackKey||"",ye="-"+ce,we=this.negStacks,ze=L.stacking,Ce=ze.stacks,Ie=ze.oldStacks;for(ze.stacksTouched+=1,de=0;de<Q;de++){ie=xe[de],oe=Se[de],re=(G=this.getStackIndicator(G,ie,this.index)).key||"",Ce[W=(U=we&&oe<(J?0:_e))?ye:ce]||(Ce[W]={}),Ce[W][ie]||((Fe=Ie[W])!=null&&Fe[ie]?(Ce[W][ie]=Ie[W][ie],Ce[W][ie].total=null):Ce[W][ie]=new n(L,L.options.stackLabels,!!U,ie,ne)),B=Ce[W][ie],oe!==null?(B.points[re]=B.points[this.index]=[D(B.cumulative,J)],_(B.cumulative)||(B.base=re),B.touched=ze.stacksTouched,G.index>0&&this.singleStacks===!1&&(B.points[re][0]=B.points[this.index+","+ie+",0"][0])):(delete B.points[re],delete B.points[this.index]);let ke=B.total||0;Ee==="percent"?(H=U?ce:ye,ke=we&&((Ge=Ce[H])!=null&&Ge[ie])?(H=Ce[H][ie]).total=Math.max(H.total||0,ke)+Math.abs(oe)||0:C(ke+(Math.abs(oe)||0))):Ee==="group"?(S(oe)&&(oe=oe[0]),oe!==null&&ke++):ke=C(ke+(oe||0)),Ee==="group"?B.cumulative=(ke||1)-1:B.cumulative=C(D(B.cumulative,J)+(oe||0)),B.total=ke,oe!==null&&(B.points[re].push(B.cumulative),K[de]=B.cumulative,B.hasValidPoints=!0)}Ee==="percent"&&(ze.usePercentage=!0),Ee!=="group"&&(this.stackedYData=K),ze.oldStacks={}}class ${constructor(R){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=R}buildStacks(){let R,G,U=this.axis,B=U.series,H=U.coll==="xAxis",W=U.options.reversedStacks,re=B.length;for(this.resetStacks(),this.usePercentage=!1,G=re;G--;)R=B[W?G:re-G-1],H&&R.setGroupedPoints(U),R.setStackedPoints(U);if(!H)for(G=0;G<re;G++)B[G].modifyStacks();k(U,"afterBuildStacks")}cleanStacks(){this.oldStacks&&(this.stacks=this.oldStacks,P(this.stacks,R=>{P(R,G=>{G.cumulative=G.total})}))}resetStacks(){P(this.stacks,R=>{P(R,(G,U)=>{x(G.touched)&&G.touched<this.stacksTouched?(G.destroy(),delete R[U]):(G.total=null,G.cumulative=null)})})}renderStackTotals(){var re;let R=this.axis,G=R.chart,U=G.renderer,B=this.stacks,H=g(G,((re=R.options.stackLabels)==null?void 0:re.animation)||!1),W=this.stackTotalGroup=this.stackTotalGroup||U.g("stack-labels").attr({zIndex:6,opacity:0}).add();W.translate(G.plotLeft,G.plotTop),P(B,de=>{P(de,ie=>{ie.render(W)})}),W.animate({opacity:1},H)}}return(m||(m={})).compose=function(L,R,G){let U=R.prototype,B=G.prototype;U.getStacks||(y(L,"init",N),y(L,"destroy",I),U.getStacks=T,B.getStackIndicator=q,B.modifyStacks=Z,B.percentStacker=X,B.setGroupedPoints=O,B.setStackedPoints=V)},m}),r(t,"Series/Line/LineSeries.js",[t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{defined:n,merge:p,isObject:m}=u;class g extends s{drawGraph(){let y=this.options,C=(this.gappedPath||this.getGraphPath).call(this),_=this.chart.styledMode;[this,...this.zones].forEach((w,k)=>{let S,x=w.graph,P=x?"animate":"attr",D=w.dashStyle||y.dashStyle;x?(x.endX=this.preventGraphAnimation?null:C.xMap,x.animate({d:C})):C.length&&(w.graph=x=this.chart.renderer.path(C).addClass("highcharts-graph"+(k?` highcharts-zone-graph-${k-1} `:" ")+(k&&w.className||"")).attr({zIndex:1}).add(this.group)),x&&!_&&(S={stroke:!k&&y.lineColor||w.color||this.color||"#cccccc","stroke-width":y.lineWidth||0,fill:this.fillGraph&&this.color||"none"},D?S.dashstyle=D:y.linecap!=="square"&&(S["stroke-linecap"]=S["stroke-linejoin"]="round"),x[P](S).shadow(k<2&&y.shadow&&p({filterUnits:"userSpaceOnUse"},m(y.shadow)?y.shadow:{}))),x&&(x.startX=C.xMap,x.isArea=C.isArea)})}getGraphPath(y,C,_){let w=this,k=w.options,S=[],x=[],P,D=k.step,T=(y=y||w.points).reversed;return T&&y.reverse(),(D={right:1,center:2}[D]||D&&3)&&T&&(D=4-D),(y=this.getValidPoints(y,!1,!(k.connectNulls&&!C&&!_))).forEach(function(I,N){let q,Z=I.plotX,X=I.plotY,O=y[N-1],V=I.isNull||typeof X!="number";(I.leftCliff||O&&O.rightCliff)&&!_&&(P=!0),V&&!n(C)&&N>0?P=!k.connectNulls:V&&!C?P=!0:(N===0||P?q=[["M",I.plotX,I.plotY]]:w.getPointSpline?q=[w.getPointSpline(y,I,N)]:D?(q=D===1?[["L",O.plotX,X]]:D===2?[["L",(O.plotX+Z)/2,O.plotY],["L",(O.plotX+Z)/2,X]]:[["L",Z,O.plotY]]).push(["L",Z,X]):q=[["L",Z,X]],x.push(I.x),D&&(x.push(I.x),D===2&&x.push(I.x)),S.push.apply(S,q),P=!1)}),S.xMap=x,w.graphPath=S,S}}return g.defaultOptions=p(s.defaultOptions,{legendSymbol:"lineMarker"}),l.registerSeriesType("line",g),g}),r(t,"Series/Area/AreaSeriesDefaults.js",[],function(){return{threshold:0,legendSymbol:"areaMarker"}}),r(t,"Series/Area/AreaSeries.js",[t["Series/Area/AreaSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{seriesTypes:{line:n}}=l,{extend:p,merge:m,objectEach:g,pick:v}=u;class y extends n{drawGraph(){this.areaPath=[],super.drawGraph.apply(this);let{areaPath:_,options:w}=this;[this,...this.zones].forEach((k,S)=>{let x={},P=k.fillColor||w.fillColor,D=k.area,T=D?"animate":"attr";D?(D.endX=this.preventGraphAnimation?null:_.xMap,D.animate({d:_})):(x.zIndex=0,(D=k.area=this.chart.renderer.path(_).addClass("highcharts-area"+(S?` highcharts-zone-area-${S-1} `:" ")+(S&&k.className||"")).add(this.group)).isArea=!0),this.chart.styledMode||(x.fill=P||k.color||this.color,x["fill-opacity"]=P?1:w.fillOpacity??.75,D.css({pointerEvents:this.stickyTracking?"none":"auto"})),D[T](x),D.startX=_.xMap,D.shiftUnit=w.step?2:1})}getGraphPath(_){let w,k,S,x=n.prototype.getGraphPath,P=this.options,D=P.stacking,T=this.yAxis,I=[],N=[],q=this.index,Z=T.stacking.stacks[this.stackKey],X=P.threshold,O=Math.round(T.getThreshold(P.threshold)),V=v(P.connectNulls,D==="percent"),$=function(H,W,re){let de=_[H],ie=D&&Z[de.x].points[q],oe=de[re+"Null"]||0,Ee=de[re+"Cliff"]||0,xe,Se,K=!0;Ee||oe?(xe=(oe?ie[0]:ie[1])+Ee,Se=ie[0]+Ee,K=!!oe):!D&&_[W]&&_[W].isNull&&(xe=Se=X),xe!==void 0&&(N.push({plotX:w,plotY:xe===null?O:T.getThreshold(xe),isNull:K,isCliff:!0}),I.push({plotX:w,plotY:Se===null?O:T.getThreshold(Se),doCurve:!1}))};_=_||this.points,D&&(_=this.getStackPoints(_));for(let H=0,W=_.length;H<W;++H)D||(_[H].leftCliff=_[H].rightCliff=_[H].leftNull=_[H].rightNull=void 0),k=_[H].isNull,w=v(_[H].rectPlotX,_[H].plotX),S=D?v(_[H].yBottom,O):O,k&&!V||(V||$(H,H-1,"left"),k&&!D&&V||(N.push(_[H]),I.push({x:H,plotX:w,plotY:S})),V||$(H,H+1,"right"));let L=x.call(this,N,!0,!0);I.reversed=!0;let R=x.call(this,I,!0,!0),G=R[0];G&&G[0]==="M"&&(R[0]=["L",G[1],G[2]]);let U=L.concat(R);U.length&&U.push(["Z"]);let B=x.call(this,N,!1,V);return this.chart.series.length>1&&D&&N.some(H=>H.isCliff)&&(U.hasStackedCliffs=B.hasStackedCliffs=!0),U.xMap=L.xMap,this.areaPath=U,B}getStackPoints(_){let w=this,k=[],S=[],x=this.xAxis,P=this.yAxis,D=P.stacking.stacks[this.stackKey],T={},I=P.series,N=I.length,q=P.options.reversedStacks?1:-1,Z=I.indexOf(w);if(_=_||this.points,this.options.stacking){for(let O=0;O<_.length;O++)_[O].leftNull=_[O].rightNull=void 0,T[_[O].x]=_[O];g(D,function(O,V){O.total!==null&&S.push(V)}),S.sort(function(O,V){return O-V});let X=I.map(O=>O.visible);S.forEach(function(O,V){let $=0,L,R;if(T[O]&&!T[O].isNull)k.push(T[O]),[-1,1].forEach(function(G){let U=G===1?"rightNull":"leftNull",B=D[S[V+G]],H=0;if(B){let W=Z;for(;W>=0&&W<N;){let re=I[W].index;!(L=B.points[re])&&(re===w.index?T[O][U]=!0:X[W]&&(R=D[O].points[re])&&(H-=R[1]-R[0])),W+=q}}T[O][G===1?"rightCliff":"leftCliff"]=H});else{let G=Z;for(;G>=0&&G<N;){let U=I[G].index;if(L=D[O].points[U]){$=L[1];break}G+=q}$=v($,0),$=P.translate($,0,1,0,1),k.push({isNull:!0,plotX:x.translate(O,0,0,0,1),x:O,plotY:$,yBottom:$})}})}return k}}return y.defaultOptions=m(n.defaultOptions,s),p(y.prototype,{singleStacks:!1}),l.registerSeriesType("area",y),y}),r(t,"Series/Spline/SplineSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l){let{line:u}=s.seriesTypes,{merge:n,pick:p}=l;class m extends u{getPointSpline(v,y,C){let _,w,k,S,x=y.plotX||0,P=y.plotY||0,D=v[C-1],T=v[C+1];function I(q){return q&&!q.isNull&&q.doCurve!==!1&&!y.isCliff}if(I(D)&&I(T)){let q=D.plotX||0,Z=D.plotY||0,X=T.plotX||0,O=T.plotY||0,V=0;_=(1.5*x+q)/2.5,w=(1.5*P+Z)/2.5,k=(1.5*x+X)/2.5,S=(1.5*P+O)/2.5,k!==_&&(V=(S-w)*(k-x)/(k-_)+P-S),w+=V,S+=V,w>Z&&w>P?(w=Math.max(Z,P),S=2*P-w):w<Z&&w<P&&(w=Math.min(Z,P),S=2*P-w),S>O&&S>P?(S=Math.max(O,P),w=2*P-S):S<O&&S<P&&(S=Math.min(O,P),w=2*P-S),y.rightContX=k,y.rightContY=S,y.controlPoints={low:[_,w],high:[k,S]}}let N=["C",p(D.rightContX,D.plotX,0),p(D.rightContY,D.plotY,0),p(_,x,0),p(w,P,0),x,P];return D.rightContX=D.rightContY=void 0,N}}return m.defaultOptions=n(u.defaultOptions),s.registerSeriesType("spline",m),m}),r(t,"Series/AreaSpline/AreaSplineSeries.js",[t["Series/Spline/SplineSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{area:n,area:{prototype:p}}=l.seriesTypes,{extend:m,merge:g}=u;class v extends s{}return v.defaultOptions=g(s.defaultOptions,n.defaultOptions),m(v.prototype,{getGraphPath:p.getGraphPath,getStackPoints:p.getStackPoints,drawGraph:p.drawGraph}),l.registerSeriesType("areaspline",v),v}),r(t,"Series/Column/ColumnSeriesDefaults.js",[],function(){return{borderRadius:3,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}}),r(t,"Series/Column/ColumnSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Color/Color.js"],t["Series/Column/ColumnSeriesDefaults.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,n,p,m,g){let{animObject:v}=s,{parse:y}=l,{noop:C}=n,{clamp:_,crisp:w,defined:k,extend:S,fireEvent:x,isArray:P,isNumber:D,merge:T,pick:I,objectEach:N}=g;class q extends p{animate(X){let O,V,$=this,L=this.yAxis,R=L.pos,G=L.reversed,U=$.options,{clipOffset:B,inverted:H}=this.chart,W={},re=H?"translateX":"translateY";X&&B?(W.scaleY=.001,V=_(L.toPixels(U.threshold),R,R+L.len),H?(V+=G?-Math.floor(B[0]):Math.ceil(B[2]),W.translateX=V-L.len):(V+=G?Math.ceil(B[0]):-Math.floor(B[2]),W.translateY=V),$.clipBox&&$.setClip(),$.group.attr(W)):(O=Number($.group.attr(re)),$.group.animate({scaleY:1},S(v($.options.animation),{step:function(de,ie){$.group&&(W[re]=O+ie.pos*(R-O),$.group.attr(W))}})))}init(X,O){super.init.apply(this,arguments);let V=this;(X=V.chart).hasRendered&&X.series.forEach(function($){$.type===V.type&&($.isDirty=!0)})}getColumnMetrics(){var oe,Ee;let X=this,O=X.options,V=X.xAxis,$=X.yAxis,L=V.options.reversedStacks,R=V.reversed&&!L||!V.reversed&&L,G={},U,B=0;O.grouping===!1?B=1:X.chart.series.forEach(function(xe){let Se,K=xe.yAxis,Q=xe.options;xe.type===X.type&&xe.reserveSpace()&&$.len===K.len&&$.pos===K.pos&&(Q.stacking&&Q.stacking!=="group"?(G[U=xe.stackKey]===void 0&&(G[U]=B++),Se=G[U]):Q.grouping!==!1&&(Se=B++),xe.columnIndex=Se)});let H=Math.min(Math.abs(V.transA)*(!((oe=V.brokenAxis)!=null&&oe.hasBreaks)&&((Ee=V.ordinal)==null?void 0:Ee.slope)||O.pointRange||V.closestPointRange||V.tickInterval||1),V.len),W=H*O.groupPadding,re=(H-2*W)/(B||1),de=Math.min(O.maxPointWidth||V.len,I(O.pointWidth,re*(1-2*O.pointPadding))),ie=(X.columnIndex||0)+(R?1:0);return X.columnMetrics={width:de,offset:(re-de)/2+(W+ie*re-H/2)*(R?-1:1),paddedWidth:re,columnCount:B},X.columnMetrics}crispCol(X,O,V,$){let L=this.borderWidth,R=this.chart.inverted;return $=w(O+$,L,R)-(O=w(O,L,R)),this.options.crisp&&(V=w(X+V,L)-(X=w(X,L))),{x:X,y:O,width:V,height:$}}adjustForMissingColumns(X,O,V,$){var L;if(!V.isNull&&$.columnCount>1){let R=this.xAxis.series.filter(H=>H.visible).map(H=>H.index),G=0,U=0;N((L=this.xAxis.stacking)==null?void 0:L.stacks,H=>{if(typeof V.x=="number"){let W=H[V.x.toString()];if(W&&P(W.points[this.index])){let re=Object.keys(W.points).filter(de=>!de.match(",")&&W.points[de]&&W.points[de].length>1).map(parseFloat).filter(de=>R.indexOf(de)!==-1).sort((de,ie)=>ie-de);G=re.indexOf(this.index),U=re.length}}}),G=this.xAxis.reversed?U-1-G:G;let B=(U-1)*$.paddedWidth+O;X=(V.plotX||0)+B/2-O-G*$.paddedWidth}return X}translate(){let X=this,O=X.chart,V=X.options,$=X.dense=X.closestPointRange*X.xAxis.transA<2,L=X.borderWidth=I(V.borderWidth,$?0:1),R=X.xAxis,G=X.yAxis,U=V.threshold,B=I(V.minPointLength,5),H=X.getColumnMetrics(),W=H.width,re=X.pointXOffset=H.offset,de=X.dataMin,ie=X.dataMax,oe=X.translatedThreshold=G.getThreshold(U),Ee=X.barW=Math.max(W,1+2*L);V.pointPadding&&(Ee=Math.ceil(Ee)),p.prototype.translate.apply(X),X.points.forEach(function(xe){let Se=I(xe.yBottom,oe),K=999+Math.abs(Se),Q=xe.plotX||0,ae=_(xe.plotY,-K,G.len+K),_e,J=Math.min(ae,Se),ne=Math.max(ae,Se)-J,ce=W,ye=Q+re,we=Ee;B&&Math.abs(ne)<B&&(ne=B,_e=!G.reversed&&!xe.negative||G.reversed&&xe.negative,D(U)&&D(ie)&&xe.y===U&&ie<=U&&(G.min||0)<U&&(de!==ie||(G.max||0)<=U)&&(_e=!_e,xe.negative=!xe.negative),J=Math.abs(J-oe)>B?Se-B:oe-(_e?B:0)),k(xe.options.pointWidth)&&(ye-=Math.round(((ce=we=Math.ceil(xe.options.pointWidth))-W)/2)),V.centerInCategory&&!V.stacking&&(ye=X.adjustForMissingColumns(ye,ce,xe,H)),xe.barX=ye,xe.pointWidth=ce,xe.tooltipPos=O.inverted?[_(G.len+G.pos-O.plotLeft-ae,G.pos-O.plotLeft,G.len+G.pos-O.plotLeft),R.len+R.pos-O.plotTop-ye-we/2,ne]:[R.left-O.plotLeft+ye+we/2,_(ae+G.pos-O.plotTop,G.pos-O.plotTop,G.len+G.pos-O.plotTop),ne],xe.shapeType=X.pointClass.prototype.shapeType||"roundedRect",xe.shapeArgs=X.crispCol(ye,xe.isNull?oe:J,we,xe.isNull?0:ne)}),x(this,"afterColumnTranslate")}drawGraph(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")}pointAttribs(X,O){let V=this.options,$=this.pointAttrToOptions||{},L=$.stroke||"borderColor",R=$["stroke-width"]||"borderWidth",G,U,B,H=X&&X.color||this.color,W=X&&X[L]||V[L]||H,re=X&&X.options.dashStyle||V.dashStyle,de=X&&X[R]||V[R]||this[R]||0,ie=I(X&&X.opacity,V.opacity,1);X&&this.zones.length&&(U=X.getZone(),H=X.options.color||U&&(U.color||X.nonZonedColor)||this.color,U&&(W=U.borderColor||W,re=U.dashStyle||re,de=U.borderWidth||de)),O&&X&&(B=(G=T(V.states[O],X.options.states&&X.options.states[O]||{})).brightness,H=G.color||B!==void 0&&y(H).brighten(G.brightness).get()||H,W=G[L]||W,de=G[R]||de,re=G.dashStyle||re,ie=I(G.opacity,ie));let oe={fill:H,stroke:W,"stroke-width":de,opacity:ie};return re&&(oe.dashstyle=re),oe}drawPoints(X=this.points){let O,V=this,$=this.chart,L=V.options,R=$.renderer,G=L.animationLimit||250;X.forEach(function(U){let B=U.plotY,H=U.graphic,W=!!H,re=H&&$.pointCount<G?"animate":"attr";D(B)&&U.y!==null?(O=U.shapeArgs,H&&U.hasNewShapeType()&&(H=H.destroy()),V.enabledDataSorting&&(U.startXPos=V.xAxis.reversed?-(O&&O.width||0):V.xAxis.width),!H&&(U.graphic=H=R[U.shapeType](O).add(U.group||V.group),H&&V.enabledDataSorting&&$.hasRendered&&$.pointCount<G&&(H.attr({x:U.startXPos}),W=!0,re="animate")),H&&W&&H[re](T(O)),$.styledMode||H[re](V.pointAttribs(U,U.selected&&"select")).shadow(U.allowShadow!==!1&&L.shadow),H&&(H.addClass(U.getClassName(),!0),H.attr({visibility:U.visible?"inherit":"hidden"}))):H&&(U.graphic=H.destroy())})}drawTracker(X=this.points){let O,V=this,$=V.chart,L=$.pointer,R=function(G){let U=L==null?void 0:L.getPointFromEvent(G);L&&U&&V.options.enableMouseTracking&&(L.isDirectTouch=!0,U.onMouseOver(G))};X.forEach(function(G){O=P(G.dataLabels)?G.dataLabels:G.dataLabel?[G.dataLabel]:[],G.graphic&&(G.graphic.element.point=G),O.forEach(function(U){(U.div||U.element).point=G})}),V._hasTracking||(V.trackerGroups.forEach(function(G){V[G]&&(V[G].addClass("highcharts-tracker").on("mouseover",R).on("mouseout",function(U){L==null||L.onTrackerMouseOut(U)}).on("touchstart",R),!$.styledMode&&V.options.cursor&&V[G].css({cursor:V.options.cursor}))}),V._hasTracking=!0),x(this,"afterDrawTracker")}remove(){let X=this,O=X.chart;O.hasRendered&&O.series.forEach(function(V){V.type===X.type&&(V.isDirty=!0)}),p.prototype.remove.apply(X,arguments)}}return q.defaultOptions=T(p.defaultOptions,u),S(q.prototype,{directTouch:!0,getSymbol:C,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),m.registerSeriesType("column",q),q}),r(t,"Core/Series/DataLabel.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(s,l,u){var n;let{getDeferredAnimation:p}=s,{format:m}=l,{defined:g,extend:v,fireEvent:y,isArray:C,isString:_,merge:w,objectEach:k,pick:S,pInt:x,splat:P}=u;return function(D){function T(){return V(this).some(L=>L==null?void 0:L.enabled)}function I(L,R,G,U,B){var ae;let{chart:H,enabledDataSorting:W}=this,re=this.isCartesian&&H.inverted,de=L.plotX,ie=L.plotY,oe=G.rotation||0,Ee=g(de)&&g(ie)&&H.isInsidePlot(de,Math.round(ie),{inverted:re,paneCoordinates:!0,series:this}),xe=oe===0&&S(G.overflow,W?"none":"justify")==="justify",Se=this.visible&&L.visible!==!1&&g(de)&&(L.series.forceDL||W&&!xe||Ee||S(G.inside,!!this.options.stacking)&&U&&H.isInsidePlot(de,re?U.x+1:U.y+U.height-1,{inverted:re,paneCoordinates:!0,series:this})),K=L.pos();if(Se&&K){var Q;let _e=R.getBBox(),J=R.getBBox(void 0,0),ne={right:1,center:.5}[G.align||0]||0,ce={bottom:1,middle:.5}[G.verticalAlign||0]||0;if(U=v({x:K[0],y:Math.round(K[1]),width:0,height:0},U||{}),G.alignTo==="plotEdges"&&this.isCartesian&&(U[re?"x":"y"]=0,U[re?"width":"height"]=((ae=this.yAxis)==null?void 0:ae.len)||0),v(G,{width:_e.width,height:_e.height}),Q=U,W&&this.xAxis&&!xe&&this.setDataLabelStartPos(L,R,B,Ee,Q),R.align(w(G,{width:J.width,height:J.height}),!1,U,!1),R.alignAttr.x+=ne*(J.width-_e.width),R.alignAttr.y+=ce*(J.height-_e.height),R[R.placed?"animate":"attr"]({x:R.alignAttr.x+(_e.width-J.width)/2,y:R.alignAttr.y+(_e.height-J.height)/2,rotationOriginX:(R.width||0)/2,rotationOriginY:(R.height||0)/2}),xe&&U.height>=0)this.justifyDataLabel(R,G,R.alignAttr,_e,U,B);else if(S(G.crop,!0)){let{x:ye,y:we}=R.alignAttr;Se=H.isInsidePlot(ye,we,{paneCoordinates:!0,series:this})&&H.isInsidePlot(ye+_e.width-1,we+_e.height-1,{paneCoordinates:!0,series:this})}G.shape&&!oe&&R[B?"attr":"animate"]({anchorX:K[0],anchorY:K[1]})}B&&W&&(R.placed=!1),Se||W&&!xe?(R.show(),R.placed=!0):(R.hide(),R.placed=!1)}function N(){return this.plotGroup("dataLabelsGroup","data-labels",this.hasRendered?"inherit":"hidden",this.options.dataLabels.zIndex||6)}function q(L){let R=this.hasRendered||0,G=this.initDataLabelsGroup().attr({opacity:+R});return!R&&G&&(this.visible&&G.show(),this.options.animation?G.animate({opacity:1},L):G.attr({opacity:1})),G}function Z(L){var Se;let R;L=L||this.points;let G=this,U=G.chart,B=G.options,H=U.renderer,{backgroundColor:W,plotBackgroundColor:re}=U.options.chart,de=H.getContrast(_(re)&&re||_(W)&&W||"#000000"),ie=V(G),{animation:oe,defer:Ee}=ie[0],xe=Ee?p(U,oe,G):{defer:0,duration:0};y(this,"drawDataLabels"),(Se=G.hasDataLabels)!=null&&Se.call(G)&&(R=this.initDataLabels(xe),L.forEach(K=>{var _e,J;let Q=K.dataLabels||[];P(O(ie,K.dlOptions||((_e=K.options)==null?void 0:_e.dataLabels))).forEach((ne,ce)=>{let ye=ne.enabled&&(K.visible||K.dataLabelOnHidden)&&(!K.isNull||K.dataLabelOnNull)&&function(je,Xe){let et=Xe.filter;if(et){let nt=et.operator,ht=je[et.property],gt=et.value;return nt===">"&&ht>gt||nt==="<"&&ht<gt||nt===">="&&ht>=gt||nt==="<="&&ht<=gt||nt==="=="&&ht==gt||nt==="==="&&ht===gt||nt==="!="&&ht!=gt||nt==="!=="&&ht!==gt}return!0}(K,ne),{backgroundColor:we,borderColor:ze,distance:Ce,style:Ie={}}=ne,Fe,Ge,ke,ge,fe={},Me=Q[ce],De=!Me,Pe;ye&&(Ge=S(ne[K.formatPrefix+"Format"],ne.format),Fe=K.getLabelConfig(),ke=g(Ge)?m(Ge,Fe,U):(ne[K.formatPrefix+"Formatter"]||ne.formatter).call(Fe,ne),ge=ne.rotation,!U.styledMode&&(Ie.color=S(ne.color,Ie.color,_(G.color)?G.color:void 0,"#000000"),Ie.color==="contrast"?(we!=="none"&&(Pe=we),K.contrastColor=H.getContrast(Pe!=="auto"&&Pe||K.color||G.color),Ie.color=Pe||!g(Ce)&&ne.inside||0>x(Ce||0)||B.stacking?K.contrastColor:de):delete K.contrastColor,B.cursor&&(Ie.cursor=B.cursor)),fe={r:ne.borderRadius||0,rotation:ge,padding:ne.padding,zIndex:1},U.styledMode||(fe.fill=we==="auto"?K.color:we,fe.stroke=ze==="auto"?K.color:ze,fe["stroke-width"]=ne.borderWidth),k(fe,(je,Xe)=>{je===void 0&&delete fe[Xe]})),!Me||ye&&g(ke)&&!!Me.div==!!ne.useHTML&&(Me.rotation&&ne.rotation||Me.rotation===ne.rotation)||(Me=void 0,De=!0),ye&&g(ke)&&(Me?fe.text=ke:(Me=H.label(ke,0,0,ne.shape,void 0,void 0,ne.useHTML,void 0,"data-label")).addClass(" highcharts-data-label-color-"+K.colorIndex+" "+(ne.className||"")+(ne.useHTML?" highcharts-tracker":"")),Me&&(Me.options=ne,Me.attr(fe),U.styledMode?Ie.width&&Me.css({width:Ie.width,textOverflow:Ie.textOverflow}):Me.css(Ie).shadow(ne.shadow),y(Me,"beforeAddingDataLabel",{labelOptions:ne,point:K}),Me.added||Me.add(R),G.alignDataLabel(K,Me,ne,void 0,De),Me.isActive=!0,Q[ce]&&Q[ce]!==Me&&Q[ce].destroy(),Q[ce]=Me))});let ae=Q.length;for(;ae--;)Q[ae]&&Q[ae].isActive?Q[ae].isActive=!1:((J=Q[ae])==null||J.destroy(),Q.splice(ae,1));K.dataLabel=Q[0],K.dataLabels=Q})),y(this,"afterDrawDataLabels")}function X(L,R,G,U,B,H){let W=this.chart,re=R.align,de=R.verticalAlign,ie=L.box?0:L.padding||0,oe=W.inverted?this.yAxis:this.xAxis,Ee=oe?oe.left-W.plotLeft:0,xe=W.inverted?this.xAxis:this.yAxis,Se=xe?xe.top-W.plotTop:0,{x:K=0,y:Q=0}=R,ae,_e;return(ae=(G.x||0)+ie+Ee)<0&&(re==="right"&&K>=0?(R.align="left",R.inside=!0):K-=ae,_e=!0),(ae=(G.x||0)+U.width-ie+Ee)>W.plotWidth&&(re==="left"&&K<=0?(R.align="right",R.inside=!0):K+=W.plotWidth-ae,_e=!0),(ae=G.y+ie+Se)<0&&(de==="bottom"&&Q>=0?(R.verticalAlign="top",R.inside=!0):Q-=ae,_e=!0),(ae=(G.y||0)+U.height-ie+Se)>W.plotHeight&&(de==="top"&&Q<=0?(R.verticalAlign="bottom",R.inside=!0):Q+=W.plotHeight-ae,_e=!0),_e&&(R.x=K,R.y=Q,L.placed=!H,L.align(R,void 0,B)),_e}function O(L,R){let G=[],U;if(C(L)&&!C(R))G=L.map(function(B){return w(B,R)});else if(C(R)&&!C(L))G=R.map(function(B){return w(L,B)});else if(C(L)||C(R)){if(C(L)&&C(R))for(U=Math.max(L.length,R.length);U--;)G[U]=w(L[U],R[U])}else G=w(L,R);return G}function V(L){var G,U;let R=L.chart.options.plotOptions;return P(O(O((G=R==null?void 0:R.series)==null?void 0:G.dataLabels,(U=R==null?void 0:R[L.type])==null?void 0:U.dataLabels),L.options.dataLabels))}function $(L,R,G,U,B){let H=this.chart,W=H.inverted,re=this.xAxis,de=re.reversed,ie=((W?R.height:R.width)||0)/2,oe=L.pointWidth,Ee=oe?oe/2:0;R.startXPos=W?B.x:de?-ie-Ee:re.width-ie+Ee,R.startYPos=W?de?this.yAxis.height-ie+Ee:-ie-Ee:B.y,U?R.visibility==="hidden"&&(R.show(),R.attr({opacity:0}).animate({opacity:1})):R.attr({opacity:1}).animate({opacity:0},void 0,R.hide),H.hasRendered&&(G&&R.attr({x:R.startXPos,y:R.startYPos}),R.placed=!0)}D.compose=function(L){let R=L.prototype;R.initDataLabels||(R.initDataLabels=q,R.initDataLabelsGroup=N,R.alignDataLabel=I,R.drawDataLabels=Z,R.justifyDataLabel=X,R.setDataLabelStartPos=$,R.hasDataLabels=T)}}(n||(n={})),n}),r(t,"Series/Column/ColumnDataLabel.js",[t["Core/Series/DataLabel.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,n){var p;let{composed:m}=l,{series:g}=u,{merge:v,pick:y,pushUnique:C}=n;return function(_){function w(k,S,x,P,D){let T=this.chart.inverted,I=k.series,N=(I.xAxis?I.xAxis.len:this.chart.plotSizeX)||0,q=(I.yAxis?I.yAxis.len:this.chart.plotSizeY)||0,Z=k.dlBox||k.shapeArgs,X=y(k.below,k.plotY>y(this.translatedThreshold,q)),O=y(x.inside,!!this.options.stacking);if(Z){if(P=v(Z),!(x.overflow==="allow"&&x.crop===!1)){P.y<0&&(P.height+=P.y,P.y=0);let V=P.y+P.height-q;V>0&&V<P.height-1&&(P.height-=V)}T&&(P={x:q-P.y-P.height,y:N-P.x-P.width,width:P.height,height:P.width}),O||(T?(P.x+=X?0:P.width,P.width=0):(P.y+=X?P.height:0,P.height=0))}x.align=y(x.align,!T||O?"center":X?"right":"left"),x.verticalAlign=y(x.verticalAlign,T||O?"middle":X?"top":"bottom"),g.prototype.alignDataLabel.call(this,k,S,x,P,D),x.inside&&k.contrastColor&&S.css({color:k.contrastColor})}_.compose=function(k){s.compose(g),C(m,"ColumnDataLabel")&&(k.prototype.alignDataLabel=w)}}(p||(p={})),p}),r(t,"Series/Bar/BarSeries.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{extend:n,merge:p}=u;class m extends s{}return m.defaultOptions=p(s.defaultOptions,{}),n(m.prototype,{inverted:!0}),l.registerSeriesType("bar",m),m}),r(t,"Series/Scatter/ScatterSeriesDefaults.js",[],function(){return{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">●</span> <span style="font-size: 0.8em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}}),r(t,"Series/Scatter/ScatterSeries.js",[t["Series/Scatter/ScatterSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{column:n,line:p}=l.seriesTypes,{addEvent:m,extend:g,merge:v}=u;class y extends p{applyJitter(){let _=this,w=this.options.jitter,k=this.points.length;w&&this.points.forEach(function(S,x){["x","y"].forEach(function(P,D){if(w[P]&&!S.isNull){let T=`plot${P.toUpperCase()}`,I=_[`${P}Axis`],N=w[P]*I.transA;if(I&&!I.logarithmic){let q=Math.max(0,(S[T]||0)-N),Z=Math.min(I.len,(S[T]||0)+N);S[T]=q+(Z-q)*function(X){let O=1e4*Math.sin(X);return O-Math.floor(O)}(x+D*k),P==="x"&&(S.clientX=S.plotX)}}})})}drawGraph(){this.options.lineWidth?super.drawGraph():this.graph&&(this.graph=this.graph.destroy())}}return y.defaultOptions=v(p.defaultOptions,s),g(y.prototype,{drawTracker:n.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"]}),m(y,"afterTranslate",function(){this.applyJitter()}),l.registerSeriesType("scatter",y),y}),r(t,"Series/CenteredUtilities.js",[t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(s,l,u){var n,p;let{deg2rad:m}=s,{fireEvent:g,isNumber:v,pick:y,relativeLength:C}=u;return(p=n||(n={})).getCenter=function(){let _=this.options,w=this.chart,k=2*(_.slicedOffset||0),S=w.plotWidth-2*k,x=w.plotHeight-2*k,P=_.center,D=Math.min(S,x),T=_.thickness,I,N=_.size,q=_.innerSize||0,Z,X;typeof N=="string"&&(N=parseFloat(N)),typeof q=="string"&&(q=parseFloat(q));let O=[y(P[0],"50%"),y(P[1],"50%"),y(N&&N<0?void 0:_.size,"100%"),y(q&&q<0?void 0:_.innerSize||0,"0%")];for(!w.angular||this instanceof l||(O[3]=0),Z=0;Z<4;++Z)X=O[Z],I=Z<2||Z===2&&/%$/.test(X),O[Z]=C(X,[S,x,D,O[2]][Z])+(I?k:0);return O[3]>O[2]&&(O[3]=O[2]),v(T)&&2*T<O[2]&&T>0&&(O[3]=O[2]-2*T),g(this,"afterGetCenter",{positions:O}),O},p.getStartAndEndRadians=function(_,w){let k=v(_)?_:0,S=v(w)&&w>k&&w-k<360?w:k+360;return{start:m*(k+-90),end:m*(S+-90)}},n}),r(t,"Series/Pie/PiePoint.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(s,l,u){let{setAnimation:n}=s,{addEvent:p,defined:m,extend:g,isNumber:v,pick:y,relativeLength:C}=u;class _ extends l{getConnectorPath(k){let S=k.dataLabelPosition,x=k.options||{},P=x.connectorShape,D=this.connectorShapes[P]||P;return S&&D.call(this,{...S.computed,alignment:S.alignment},S.connectorPosition,x)||[]}getTranslate(){return this.sliced&&this.slicedTranslation||{translateX:0,translateY:0}}haloPath(k){let S=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(S.x,S.y,S.r+k,S.r+k,{innerR:S.r-1,start:S.start,end:S.end,borderRadius:S.borderRadius})}constructor(k,S,x){super(k,S,x),this.half=0,this.name??(this.name="Slice");let P=D=>{this.slice(D.type==="select")};p(this,"select",P),p(this,"unselect",P)}isValid(){return v(this.y)&&this.y>=0}setVisible(k,S=!0){k!==this.visible&&this.update({visible:k??!this.visible},S,void 0,!1)}slice(k,S,x){let P=this.series;n(x,P.chart),S=y(S,!0),this.sliced=this.options.sliced=k=m(k)?k:!this.sliced,P.options.data[P.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate())}}return g(_.prototype,{connectorShapes:{fixedOffset:function(w,k,S){let x=k.breakAt,P=k.touchingSliceAt,D=S.softConnector?["C",w.x+(w.alignment==="left"?-5:5),w.y,2*x.x-P.x,2*x.y-P.y,x.x,x.y]:["L",x.x,x.y];return[["M",w.x,w.y],D,["L",P.x,P.y]]},straight:function(w,k){let S=k.touchingSliceAt;return[["M",w.x,w.y],["L",S.x,S.y]]},crookedLine:function(w,k,S){let{breakAt:x,touchingSliceAt:P}=k,{series:D}=this,[T,I,N]=D.center,q=N/2,{plotLeft:Z,plotWidth:X}=D.chart,O=w.alignment==="left",{x:V,y:$}=w,L=x.x;if(S.crookDistance){let G=C(S.crookDistance,1);L=O?T+q+(X+Z-T-q)*(1-G):Z+(T-q)*G}else L=T+(I-$)*Math.tan((this.angle||0)-Math.PI/2);let R=[["M",V,$]];return(O?L<=V&&L>=x.x:L>=V&&L<=x.x)&&R.push(["L",L,$]),R.push(["L",x.x,x.y],["L",P.x,P.y]),R}}}),_}),r(t,"Series/Pie/PieSeriesDefaults.js",[],function(){return{borderRadius:3,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{connectorPadding:5,connectorShape:"crookedLine",crookDistance:void 0,distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}}),r(t,"Series/Pie/PieSeries.js",[t["Series/CenteredUtilities.js"],t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Series/Pie/PiePoint.js"],t["Series/Pie/PieSeriesDefaults.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/Symbols.js"],t["Core/Utilities.js"]],function(s,l,u,n,p,m,g,v,y){let{getStartAndEndRadians:C}=s,{noop:_}=u,{clamp:w,extend:k,fireEvent:S,merge:x,pick:P}=y;class D extends m{animate(I){let N=this,q=N.points,Z=N.startAngleRad;I||q.forEach(function(X){let O=X.graphic,V=X.shapeArgs;O&&V&&(O.attr({r:P(X.startR,N.center&&N.center[3]/2),start:Z,end:Z}),O.animate({r:V.r,start:V.start,end:V.end},N.options.animation))})}drawEmpty(){let I,N,q=this.startAngleRad,Z=this.endAngleRad,X=this.options;this.total===0&&this.center?(I=this.center[0],N=this.center[1],this.graph||(this.graph=this.chart.renderer.arc(I,N,this.center[1]/2,0,q,Z).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:v.arc(I,N,this.center[2]/2,0,{start:q,end:Z,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":X.borderWidth,fill:X.fillColor||"none",stroke:X.color||"#cccccc"})):this.graph&&(this.graph=this.graph.destroy())}drawPoints(){let I=this.chart.renderer;this.points.forEach(function(N){N.graphic&&N.hasNewShapeType()&&(N.graphic=N.graphic.destroy()),N.graphic||(N.graphic=I[N.shapeType](N.shapeArgs).add(N.series.group),N.delayedRendering=!0)})}generatePoints(){super.generatePoints(),this.updateTotals()}getX(I,N,q,Z){let X=this.center,O=this.radii?this.radii[q.index]||0:X[2]/2,V=Z.dataLabelPosition,$=(V==null?void 0:V.distance)||0,L=Math.asin(w((I-X[1])/(O+$),-1,1));return X[0]+Math.cos(L)*(O+$)*(N?-1:1)+($>0?(N?-1:1)*(Z.padding||0):0)}hasData(){return!!this.processedXData.length}redrawPoints(){let I,N,q,Z,X=this,O=X.chart;this.drawEmpty(),X.group&&!O.styledMode&&X.group.shadow(X.options.shadow),X.points.forEach(function(V){let $={};N=V.graphic,!V.isNull&&N?(Z=V.shapeArgs,I=V.getTranslate(),O.styledMode||(q=X.pointAttribs(V,V.selected&&"select")),V.delayedRendering?(N.setRadialReference(X.center).attr(Z).attr(I),O.styledMode||N.attr(q).attr({"stroke-linejoin":"round"}),V.delayedRendering=!1):(N.setRadialReference(X.center),O.styledMode||x(!0,$,q),x(!0,$,Z,I),N.animate($)),N.attr({visibility:V.visible?"inherit":"hidden"}),N.addClass(V.getClassName(),!0)):N&&(V.graphic=N.destroy())})}sortByAngle(I,N){I.sort(function(q,Z){return q.angle!==void 0&&(Z.angle-q.angle)*N})}translate(I){S(this,"translate"),this.generatePoints();let N=this.options,q=N.slicedOffset,Z=C(N.startAngle,N.endAngle),X=this.startAngleRad=Z.start,O=(this.endAngleRad=Z.end)-X,V=this.points,$=N.ignoreHiddenPoint,L=V.length,R,G,U,B,H,W,re,de=0;for(I||(this.center=I=this.getCenter()),W=0;W<L;W++){re=V[W],R=X+de*O,re.isValid()&&(!$||re.visible)&&(de+=re.percentage/100),G=X+de*O;let ie={x:I[0],y:I[1],r:I[2]/2,innerR:I[3]/2,start:Math.round(1e3*R)/1e3,end:Math.round(1e3*G)/1e3};re.shapeType="arc",re.shapeArgs=ie,(U=(G+R)/2)>1.5*Math.PI?U-=2*Math.PI:U<-Math.PI/2&&(U+=2*Math.PI),re.slicedTranslation={translateX:Math.round(Math.cos(U)*q),translateY:Math.round(Math.sin(U)*q)},B=Math.cos(U)*I[2]/2,H=Math.sin(U)*I[2]/2,re.tooltipPos=[I[0]+.7*B,I[1]+.7*H],re.half=U<-Math.PI/2||U>Math.PI/2?1:0,re.angle=U}S(this,"afterTranslate")}updateTotals(){let I=this.points,N=I.length,q=this.options.ignoreHiddenPoint,Z,X,O=0;for(Z=0;Z<N;Z++)(X=I[Z]).isValid()&&(!q||X.visible)&&(O+=X.y);for(Z=0,this.total=O;Z<N;Z++)(X=I[Z]).percentage=O>0&&(X.visible||!q)?X.y/O*100:0,X.total=O}}return D.defaultOptions=x(m.defaultOptions,p),k(D.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawTracker:l.prototype.drawTracker,getCenter:s.getCenter,getSymbol:_,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointAttribs:l.prototype.pointAttribs,pointClass:n,requireSorting:!1,searchPoint:_,trackerGroups:["group","dataLabelsGroup"]}),g.registerSeriesType("pie",D),D}),r(t,"Series/Pie/PieDataLabel.js",[t["Core/Series/DataLabel.js"],t["Core/Globals.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,n,p){var m;let{composed:g,noop:v}=l,{distribute:y}=u,{series:C}=n,{arrayMax:_,clamp:w,defined:k,pick:S,pushUnique:x,relativeLength:P}=p;return function(D){let T={radialDistributionY:function(X,O){var V;return(((V=O.dataLabelPosition)==null?void 0:V.top)||0)+X.distributeBox.pos},radialDistributionX:function(X,O,V,$,L){let R=L.dataLabelPosition;return X.getX(V<((R==null?void 0:R.top)||0)+2||V>((R==null?void 0:R.bottom)||0)-2?$:V,O.half,O,L)},justify:function(X,O,V,$){var L;return $[0]+(X.half?-1:1)*(V+(((L=O.dataLabelPosition)==null?void 0:L.distance)||0))},alignToPlotEdges:function(X,O,V,$){let L=X.getBBox().width;return O?L+$:V-L-$},alignToConnectors:function(X,O,V,$){let L=0,R;return X.forEach(function(G){(R=G.dataLabel.getBBox().width)>L&&(L=R)}),O?L+$:V-L-$}};function I(X,O){let{center:V,options:$}=this,L=V[2]/2,R=X.angle||0,G=Math.cos(R),U=Math.sin(R),B=V[0]+G*L,H=V[1]+U*L,W=Math.min(($.slicedOffset||0)+($.borderWidth||0),O/5);return{natural:{x:B+G*O,y:H+U*O},computed:{},alignment:O<0?"center":X.half?"right":"left",connectorPosition:{breakAt:{x:B+G*W,y:H+U*W},touchingSliceAt:{x:B,y:H}},distance:O}}function N(){var Se;let X=this,O=X.points,V=X.chart,$=V.plotWidth,L=V.plotHeight,R=V.plotLeft,G=Math.round(V.chartWidth/3),U=X.center,B=U[2]/2,H=U[1],W=[[],[]],re=[0,0,0,0],de=X.dataLabelPositioners,ie,oe,Ee,xe=0;X.visible&&((Se=X.hasDataLabels)!=null&&Se.call(X))&&(O.forEach(K=>{(K.dataLabels||[]).forEach(Q=>{Q.shortened&&(Q.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),Q.shortened=!1)})}),C.prototype.drawDataLabels.apply(X),O.forEach(K=>{(K.dataLabels||[]).forEach((Q,ae)=>{var ce;let _e=U[2]/2,J=Q.options,ne=P((J==null?void 0:J.distance)||0,_e);ae===0&&W[K.half].push(K),!k((ce=J==null?void 0:J.style)==null?void 0:ce.width)&&Q.getBBox().width>G&&(Q.css({width:Math.round(.7*G)+"px"}),Q.shortened=!0),Q.dataLabelPosition=this.getDataLabelPosition(K,ne),xe=Math.max(xe,ne)})}),W.forEach((K,Q)=>{let ae=K.length,_e=[],J,ne,ce=0,ye;ae&&(X.sortByAngle(K,Q-.5),xe>0&&(J=Math.max(0,H-B-xe),ne=Math.min(H+B+xe,V.plotHeight),K.forEach(we=>{(we.dataLabels||[]).forEach(ze=>{var Ie;let Ce=ze.dataLabelPosition;Ce&&Ce.distance>0&&(Ce.top=Math.max(0,H-B-Ce.distance),Ce.bottom=Math.min(H+B+Ce.distance,V.plotHeight),ce=ze.getBBox().height||21,ze.lineHeight=V.renderer.fontMetrics(ze.text||ze).h+2*ze.padding,we.distributeBox={target:(((Ie=ze.dataLabelPosition)==null?void 0:Ie.natural.y)||0)-Ce.top+ze.lineHeight/2,size:ce,rank:we.y},_e.push(we.distributeBox))})}),y(_e,ye=ne+ce-J,ye/5)),K.forEach(we=>{(we.dataLabels||[]).forEach(ze=>{let Ce=ze.options||{},Ie=we.distributeBox,Fe=ze.dataLabelPosition,Ge=(Fe==null?void 0:Fe.natural.y)||0,ke=Ce.connectorPadding||0,ge=ze.lineHeight||21,fe=(ge-ze.getBBox().height)/2,Me=0,De=Ge,Pe="inherit";if(Fe){if(k(Ie)&&Fe.distance>0&&(Ie.pos===void 0?Pe="hidden":(Ee=Ie.size,De=de.radialDistributionY(we,ze))),Ce.justify)Me=de.justify(we,ze,B,U);else switch(Ce.alignTo){case"connectors":Me=de.alignToConnectors(K,Q,$,R);break;case"plotEdges":Me=de.alignToPlotEdges(ze,Q,$,R);break;default:Me=de.radialDistributionX(X,we,De-fe,Ge,ze)}if(Fe.attribs={visibility:Pe,align:Fe.alignment},Fe.posAttribs={x:Me+(Ce.x||0)+({left:ke,right:-ke}[Fe.alignment]||0),y:De+(Ce.y||0)-ge/2},Fe.computed.x=Me,Fe.computed.y=De-fe,S(Ce.crop,!0)){let je;Me-(oe=ze.getBBox().width)<ke&&Q===1?(je=Math.round(oe-Me+ke),re[3]=Math.max(je,re[3])):Me+oe>$-ke&&Q===0&&(je=Math.round(Me+oe-$+ke),re[1]=Math.max(je,re[1])),De-Ee/2<0?re[0]=Math.max(Math.round(-De+Ee/2),re[0]):De+Ee/2>L&&(re[2]=Math.max(Math.round(De+Ee/2-L),re[2])),Fe.sideOverflow=je}}})}))}),(_(re)===0||this.verifyDataLabelOverflow(re))&&(this.placeDataLabels(),this.points.forEach(K=>{(K.dataLabels||[]).forEach(Q=>{var ne;let{connectorColor:ae,connectorWidth:_e=1}=Q.options||{},J=Q.dataLabelPosition;if(_e){let ce;ie=Q.connector,J&&J.distance>0?(ce=!ie,ie||(Q.connector=ie=V.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+K.colorIndex+(K.className?" "+K.className:"")).add(X.dataLabelsGroup)),V.styledMode||ie.attr({"stroke-width":_e,stroke:ae||K.color||"#666666"}),ie[ce?"attr":"animate"]({d:K.getConnectorPath(Q)}),ie.attr({visibility:(ne=J.attribs)==null?void 0:ne.visibility})):ie&&(Q.connector=ie.destroy())}})})))}function q(){this.points.forEach(X=>{(X.dataLabels||[]).forEach(O=>{var $;let V=O.dataLabelPosition;V?(V.sideOverflow&&(O.css({width:Math.max(O.getBBox().width-V.sideOverflow,0)+"px",textOverflow:((($=O.options)==null?void 0:$.style)||{}).textOverflow||"ellipsis"}),O.shortened=!0),O.attr(V.attribs),O[O.moved?"animate":"attr"](V.posAttribs),O.moved=!0):O&&O.attr({y:-9999})}),delete X.distributeBox},this)}function Z(X){let O=this.center,V=this.options,$=V.center,L=V.minSize||80,R=L,G=V.size!==null;return!G&&($[0]!==null?R=Math.max(O[2]-Math.max(X[1],X[3]),L):(R=Math.max(O[2]-X[1]-X[3],L),O[0]+=(X[3]-X[1])/2),$[1]!==null?R=w(R,L,O[2]-Math.max(X[0],X[2])):(R=w(R,L,O[2]-X[0]-X[2]),O[1]+=(X[0]-X[2])/2),R<O[2]?(O[2]=R,O[3]=Math.min(V.thickness?Math.max(0,R-2*V.thickness):Math.max(0,P(V.innerSize||0,R)),R),this.translate(O),this.drawDataLabels&&this.drawDataLabels()):G=!0),G}D.compose=function(X){if(s.compose(C),x(g,"PieDataLabel")){let O=X.prototype;O.dataLabelPositioners=T,O.alignDataLabel=v,O.drawDataLabels=N,O.getDataLabelPosition=I,O.placeDataLabels=q,O.verifyDataLabelOverflow=Z}}}(m||(m={})),m}),r(t,"Core/Geometry/GeometryUtilities.js",[],function(){var s,l;return(l=s||(s={})).getCenterOfPoints=function(u){let n=u.reduce((p,m)=>(p.x+=m.x,p.y+=m.y,p),{x:0,y:0});return{x:n.x/u.length,y:n.y/u.length}},l.getDistanceBetweenPoints=function(u,n){return Math.sqrt(Math.pow(n.x-u.x,2)+Math.pow(n.y-u.y,2))},l.getAngleBetweenPoints=function(u,n){return Math.atan2(n.x-u.x,n.y-u.y)},l.pointInPolygon=function({x:u,y:n},p){let m=p.length,g,v,y=!1;for(g=0,v=m-1;g<m;v=g++){let[C,_]=p[g],[w,k]=p[v];_>n!=k>n&&u<(w-C)*(n-_)/(k-_)+C&&(y=!y)}return y},s}),r(t,"Extensions/OverlappingDataLabels.js",[t["Core/Geometry/GeometryUtilities.js"],t["Core/Utilities.js"]],function(s,l){let{pointInPolygon:u}=s,{addEvent:n,fireEvent:p,objectEach:m,pick:g}=l;function v(_){let w=_.length,k=(q,Z)=>!(Z.x>=q.x+q.width||Z.x+Z.width<=q.x||Z.y>=q.y+q.height||Z.y+Z.height<=q.y),S=(q,Z)=>{for(let X of q)if(u({x:X[0],y:X[1]},Z))return!0;return!1},x,P,D,T,I,N=!1;for(let q=0;q<w;q++)(x=_[q])&&(x.oldOpacity=x.opacity,x.newOpacity=1,x.absoluteBox=function(Z){var X,O;if(Z&&(!Z.alignAttr||Z.placed)){let V=Z.box?0:Z.padding||0,$=Z.alignAttr||{x:Z.attr("x"),y:Z.attr("y")},L=Z.getBBox();return Z.width=L.width,Z.height=L.height,{x:$.x+(((X=Z.parentGroup)==null?void 0:X.translateX)||0)+V,y:$.y+(((O=Z.parentGroup)==null?void 0:O.translateY)||0)+V,width:(Z.width||0)-2*V,height:(Z.height||0)-2*V,polygon:L==null?void 0:L.polygon}}}(x));_.sort((q,Z)=>(Z.labelrank||0)-(q.labelrank||0));for(let q=0;q<w;++q){T=(P=_[q])&&P.absoluteBox;let Z=T==null?void 0:T.polygon;for(let X=q+1;X<w;++X){I=(D=_[X])&&D.absoluteBox;let O=!1;if(T&&I&&P!==D&&P.newOpacity!==0&&D.newOpacity!==0&&P.visibility!=="hidden"&&D.visibility!=="hidden"){let V=I.polygon;if(Z&&V&&Z!==V?S(Z,V)&&(O=!0):k(T,I)&&(O=!0),O){let $=P.labelrank<D.labelrank?P:D,L=$.text;$.newOpacity=0,L!=null&&L.element.querySelector("textPath")&&L.hide()}}}}for(let q of _)y(q,this)&&(N=!0);N&&p(this,"afterHideAllOverlappingLabels")}function y(_,w){let k,S,x=!1;return _&&(S=_.newOpacity,_.oldOpacity!==S&&(_.hasClass("highcharts-data-label")?(_[S?"removeClass":"addClass"]("highcharts-data-label-hidden"),k=function(){w.styledMode||_.css({pointerEvents:S?"auto":"none"})},x=!0,_[_.isOld?"animate":"attr"]({opacity:S},void 0,k),p(w,"afterHideOverlappingLabel")):_.attr({opacity:S})),_.isOld=!0),x}function C(){var k;let _=this,w=[];for(let S of _.labelCollectors||[])w=w.concat(S());for(let S of _.yAxis||[])S.stacking&&S.options.stackLabels&&!S.options.stackLabels.allowOverlap&&m(S.stacking.stacks,x=>{m(x,P=>{P.label&&w.push(P.label)})});for(let S of _.series||[])if(S.visible&&((k=S.hasDataLabels)!=null&&k.call(S))){let x=P=>{for(let D of P)D.visible&&(D.dataLabels||[]).forEach(T=>{var N;let I=T.options||{};T.labelrank=g(I.labelrank,D.labelrank,(N=D.shapeArgs)==null?void 0:N.height),I.allowOverlap??Number(I.distance)>0?(T.oldOpacity=T.opacity,T.newOpacity=1,y(T,_)):w.push(T)})};x(S.nodes||[]),x(S.points)}this.hideOverlappingLabels(w)}return{compose:function(_){let w=_.prototype;w.hideOverlappingLabels||(w.hideOverlappingLabels=v,n(_,"render",C))}}}),r(t,"Extensions/BorderRadius.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){let{defaultOptions:n}=s,{noop:p}=l,{addEvent:m,extend:g,isObject:v,merge:y,relativeLength:C}=u,_={radius:0,scope:"stack",where:void 0},w=p,k=p;function S(I,N,q,Z,X={}){let O=w(I,N,q,Z,X),{innerR:V=0,r:$=q,start:L=0,end:R=0}=X;if(X.open||!X.borderRadius)return O;let G=R-L,U=Math.sin(G/2),B=Math.max(Math.min(C(X.borderRadius||0,$-V),($-V)/2,$*U/(1+U)),0),H=Math.min(B,G/Math.PI*2*V),W=O.length-1;for(;W--;)(function(re,de,ie){let oe,Ee,xe,Se=re[de],K=re[de+1];if(K[0]==="Z"&&(K=re[0]),(Se[0]==="M"||Se[0]==="L")&&K[0]==="A"?(oe=Se,Ee=K,xe=!0):Se[0]==="A"&&(K[0]==="M"||K[0]==="L")&&(oe=K,Ee=Se),oe&&Ee&&Ee.params){let Q=Ee[1],ae=Ee[5],_e=Ee.params,{start:J,end:ne,cx:ce,cy:ye}=_e,we=ae?Q-ie:Q+ie,ze=we?Math.asin(ie/we):0,Ce=ae?ze:-ze,Ie=Math.cos(ze)*we;xe?(_e.start=J+Ce,oe[1]=ce+Ie*Math.cos(J),oe[2]=ye+Ie*Math.sin(J),re.splice(de+1,0,["A",ie,ie,0,0,1,ce+Q*Math.cos(_e.start),ye+Q*Math.sin(_e.start)])):(_e.end=ne-Ce,Ee[6]=ce+Q*Math.cos(_e.end),Ee[7]=ye+Q*Math.sin(_e.end),re.splice(de+1,0,["A",ie,ie,0,0,1,ce+Ie*Math.cos(ne),ye+Ie*Math.sin(ne)])),Ee[4]=Math.abs(_e.end-_e.start)<Math.PI?0:1}})(O,W,W>1?H:B);return O}function x(){var I,N;if(this.options.borderRadius&&!(this.chart.is3d&&this.chart.is3d())){let{options:q,yAxis:Z}=this,X=q.stacking==="percent",O=(N=(I=n.plotOptions)==null?void 0:I[this.type])==null?void 0:N.borderRadius,V=P(q.borderRadius,v(O)?O:{}),$=Z.options.reversed;for(let L of this.points){let{shapeArgs:R}=L;if(L.shapeType==="roundedRect"&&R){let{width:G=0,height:U=0,y:B=0}=R,H=B,W=U;if(V.scope==="stack"&&L.stackTotal){let oe=Z.translate(X?100:L.stackTotal,!1,!0,!1,!0),Ee=Z.translate(q.threshold||0,!1,!0,!1,!0),xe=this.crispCol(0,Math.min(oe,Ee),0,Math.abs(oe-Ee));H=xe.y,W=xe.height}let re=(L.negative?-1:1)*($?-1:1)==-1,de=V.where;!de&&this.is("waterfall")&&Math.abs((L.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth&&(de="all"),de||(de="end");let ie=Math.min(C(V.radius,G),G/2,de==="all"?U/2:1/0)||0;de==="end"&&(re&&(H-=ie),W+=ie),g(R,{brBoxHeight:W,brBoxY:H,r:ie})}}}}function P(I,N){return v(I)||(I={radius:I||0}),y(_,N,I)}function D(){let I=P(this.options.borderRadius);for(let N of this.points){let q=N.shapeArgs;q&&(q.borderRadius=C(I.radius,(q.r||0)-(q.innerR||0)))}}function T(I,N,q,Z,X={}){let O=k(I,N,q,Z,X),{r:V=0,brBoxHeight:$=Z,brBoxY:L=N}=X,R=N-L,G=L+$-(N+Z),U=R-V>-.1?0:V,B=G-V>-.1?0:V,H=Math.max(U&&R,0),W=Math.max(B&&G,0),re=[I+U,N],de=[I+q-U,N],ie=[I+q,N+U],oe=[I+q,N+Z-B],Ee=[I+q-B,N+Z],xe=[I+B,N+Z],Se=[I,N+Z-B],K=[I,N+U],Q=(ae,_e)=>Math.sqrt(Math.pow(ae,2)-Math.pow(_e,2));if(H){let ae=Q(U,U-H);re[0]-=ae,de[0]+=ae,ie[1]=K[1]=N+U-H}if(Z<U-H){let ae=Q(U,U-H-Z);ie[0]=oe[0]=I+q-U+ae,Ee[0]=Math.min(ie[0],Ee[0]),xe[0]=Math.max(oe[0],xe[0]),Se[0]=K[0]=I+U-ae,ie[1]=K[1]=N+Z}if(W){let ae=Q(B,B-W);Ee[0]+=ae,xe[0]-=ae,oe[1]=Se[1]=N+Z-B+W}if(Z<B-W){let ae=Q(B,B-W-Z);ie[0]=oe[0]=I+q-B+ae,de[0]=Math.min(ie[0],de[0]),re[0]=Math.max(oe[0],re[0]),Se[0]=K[0]=I+B-ae,oe[1]=Se[1]=N}return O.length=0,O.push(["M",...re],["L",...de],["A",U,U,0,0,1,...ie],["L",...oe],["A",B,B,0,0,1,...Ee],["L",...xe],["A",B,B,0,0,1,...Se],["L",...K],["A",U,U,0,0,1,...re],["Z"]),O}return{compose:function(I,N,q){let Z=I.types.pie;if(!N.symbolCustomAttribs.includes("borderRadius")){let X=q.prototype.symbols;m(I,"afterColumnTranslate",x,{order:9}),m(Z,"afterTranslate",D),N.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY"),w=X.arc,k=X.roundedRect,X.arc=S,X.roundedRect=T}},optionsToObject:P}}),r(t,"Core/Responsive.js",[t["Core/Utilities.js"]],function(s){var l;let{diffObjects:u,extend:n,find:p,merge:m,pick:g,uniqueKey:v}=s;return function(y){function C(w,k){let S=w.condition;(S.callback||function(){return this.chartWidth<=g(S.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=g(S.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=g(S.minWidth,0)&&this.chartHeight>=g(S.minHeight,0)}).call(this)&&k.push(w._id)}function _(w,k){let S=this.options.responsive,x=this.currentResponsive,P=[],D;!k&&S&&S.rules&&S.rules.forEach(N=>{N._id===void 0&&(N._id=v()),this.matchResponsiveRule(N,P)},this);let T=m(...P.map(N=>p((S||{}).rules||[],q=>q._id===N)).map(N=>N&&N.chartOptions));T.isResponsiveOptions=!0,P=P.toString()||void 0;let I=x&&x.ruleIds;P===I||(x&&(this.currentResponsive=void 0,this.updatingResponsive=!0,this.update(x.undoOptions,w,!0),this.updatingResponsive=!1),P?((D=u(T,this.options,!0,this.collectionsWithUpdate)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:P,mergedOptions:T,undoOptions:D},this.updatingResponsive||this.update(T,w,!0)):this.currentResponsive=void 0)}y.compose=function(w){let k=w.prototype;return k.matchResponsiveRule||n(k,{matchResponsiveRule:C,setResponsive:_}),w}}(l||(l={})),l}),r(t,"masters/highcharts.src.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Core/Defaults.js"],t["Core/Animation/Fx.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Renderer/HTML/AST.js"],t["Core/Templating.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Renderer/RendererUtilities.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Renderer/HTML/HTMLElement.js"],t["Core/Axis/Axis.js"],t["Core/Axis/DateTimeAxis.js"],t["Core/Axis/LogarithmicAxis.js"],t["Core/Axis/PlotLineOrBand/PlotLineOrBand.js"],t["Core/Axis/Tick.js"],t["Core/Tooltip.js"],t["Core/Series/Point.js"],t["Core/Pointer.js"],t["Core/Legend/Legend.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Chart/Chart.js"],t["Extensions/ScrollablePlotArea.js"],t["Core/Axis/Stacking/StackingAxis.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Series/Column/ColumnDataLabel.js"],t["Series/Pie/PieDataLabel.js"],t["Core/Series/DataLabel.js"],t["Extensions/OverlappingDataLabels.js"],t["Extensions/BorderRadius.js"],t["Core/Responsive.js"],t["Core/Color/Color.js"],t["Core/Time.js"]],function(s,l,u,n,p,m,g,v,y,C,_,w,k,S,x,P,D,T,I,N,q,Z,X,O,V,$,L,R,G,U,B,H,W,re,de,ie){return s.AST=m,s.Axis=k,s.Chart=X,s.Color=de,s.DataLabel=B,s.Fx=n,s.HTMLElement=w,s.Legend=q,s.LegendSymbol=Z,s.OverlappingDataLabels=s.OverlappingDataLabels||H,s.PlotLineOrBand=P,s.Point=I,s.Pointer=N,s.RendererRegistry=v,s.Series=L,s.SeriesRegistry=R,s.StackItem=$,s.SVGElement=C,s.SVGRenderer=_,s.Templating=g,s.Tick=D,s.Time=ie,s.Tooltip=T,s.animate=p.animate,s.animObject=p.animObject,s.chart=X.chart,s.color=de.parse,s.dateFormat=g.dateFormat,s.defaultOptions=u.defaultOptions,s.distribute=y.distribute,s.format=g.format,s.getDeferredAnimation=p.getDeferredAnimation,s.getOptions=u.getOptions,s.numberFormat=g.numberFormat,s.seriesType=R.seriesType,s.setAnimation=p.setAnimation,s.setOptions=u.setOptions,s.stop=p.stop,s.time=u.defaultTime,s.timers=n.timers,W.compose(s.Series,s.SVGElement,s.SVGRenderer),G.compose(s.Series.types.column),B.compose(s.Series),S.compose(s.Axis),w.compose(s.SVGRenderer),q.compose(s.Chart),x.compose(s.Axis),H.compose(s.Chart),U.compose(s.Series.types.pie),P.compose(s.Chart,s.Axis),N.compose(s.Chart),re.compose(s.Chart),O.compose(s.Axis,s.Chart,s.Series),V.compose(s.Axis,s.Chart,s.Series),T.compose(s.Pointer),l.extend(s,l),s}),t["masters/highcharts.src.js"]._modules=t,t["masters/highcharts.src.js"]})})(hE);var qN=hE.exports;const Fu=oh(qN);var pE={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function r(s,l,u,n){s.hasOwnProperty(l)||(s[l]=n.apply(null,u),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:l,module:s[l]}})))}r(t,"Accessibility/Utils/HTMLUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{doc:u,win:n}=s,{css:p}=l,m=n.EventTarget&&new n.EventTarget||"none";function g(y){if(typeof n.MouseEvent=="function")return new n.MouseEvent(y.type,y);if(u.createEvent){let C=u.createEvent("MouseEvent");if(C.initMouseEvent)return C.initMouseEvent(y.type,y.bubbles,y.cancelable,y.view||n,y.detail,y.screenX,y.screenY,y.clientX,y.clientY,y.ctrlKey,y.altKey,y.shiftKey,y.metaKey,y.button,y.relatedTarget),C}return v(y.type)}function v(y,C,_){let w=C||{x:0,y:0};if(typeof n.MouseEvent=="function")return new n.MouseEvent(y,{bubbles:!0,cancelable:!0,composed:!0,button:0,buttons:1,relatedTarget:_||m,view:n,detail:y==="click"?1:0,screenX:w.x,screenY:w.y,clientX:w.x,clientY:w.y});if(u.createEvent){let k=u.createEvent("MouseEvent");if(k.initMouseEvent)return k.initMouseEvent(y,!0,!0,n,y==="click"?1:0,w.x,w.y,w.x,w.y,!1,!1,!1,!1,0,null),k}return{type:y}}return{addClass:function(y,C){y.classList?y.classList.add(C):0>y.className.indexOf(C)&&(y.className+=" "+C)},cloneMouseEvent:g,cloneTouchEvent:function(y){let C=w=>{let k=[];for(let S=0;S<w.length;++S){let x=w.item(S);x&&k.push(x)}return k};if(typeof n.TouchEvent=="function"){let w=new n.TouchEvent(y.type,{touches:C(y.touches),targetTouches:C(y.targetTouches),changedTouches:C(y.changedTouches),ctrlKey:y.ctrlKey,shiftKey:y.shiftKey,altKey:y.altKey,metaKey:y.metaKey,bubbles:y.bubbles,cancelable:y.cancelable,composed:y.composed,detail:y.detail,view:y.view});return y.defaultPrevented&&w.preventDefault(),w}let _=g(y);return _.touches=y.touches,_.changedTouches=y.changedTouches,_.targetTouches=y.targetTouches,_},escapeStringForHTML:function(y){return y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},getElement:function(y){return u.getElementById(y)},getFakeMouseEvent:v,getHeadingTagNameForElement:function(y){let C=S=>"h"+Math.min(6,parseInt(S.slice(1),10)+1),_=S=>/^H[1-6]$/i.test(S),w=S=>{let x=S;for(;x=x.previousSibling;){let P=x.tagName||"";if(_(P))return P}return""},k=S=>{let x=w(S);if(x)return C(x);let P=S.parentElement;if(!P)return"p";let D=P.tagName;return _(D)?C(D):k(P)};return k(y)},removeChildNodes:function(y){for(;y.lastChild;)y.removeChild(y.lastChild)},removeClass:function(y,C){y.classList?y.classList.remove(C):y.className=y.className.replace(RegExp(C,"g"),"")},removeElement:function(y){y&&y.parentNode&&y.parentNode.removeChild(y)},reverseChildNodes:function(y){let C=y.childNodes.length;for(;C--;)y.appendChild(y.childNodes[C])},simulatedEventTarget:m,stripHTMLTagsFromString:function(y,C=!1){return typeof y=="string"?C?y.replace(/<\/?[^>]+(>|$)/g,""):y.replace(/<\/?(?!\s)[^>]+(>|$)/g,""):y},visuallyHideElement:function(y){p(y,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",whiteSpace:"nowrap",clip:"rect(1px, 1px, 1px, 1px)",marginTop:"-3px","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",filter:"alpha(opacity=1)",opacity:.01})}}}),r(t,"Accessibility/A11yI18n.js",[t["Core/Templating.js"],t["Core/Utilities.js"]],function(s,l){var u;let{format:n}=s,{getNestedProperty:p,pick:m}=l;return function(g){function v(C,_,w){let k=(T,I)=>{let N=T.slice(I||0),q=N.indexOf("{"),Z=N.indexOf("}");if(q>-1&&Z>q)return{statement:N.substring(q+1,Z),begin:I+q+1,end:I+Z}},S=[],x,P,D=0;do x=k(C,D),(P=C.substring(D,x&&x.begin-1)).length&&S.push({value:P,type:"constant"}),x&&S.push({value:x.statement,type:"statement"}),D=x?x.end+1:D+1;while(x);return S.forEach(T=>{T.type==="statement"&&(T.value=function(I,N){let q,Z,X=I.indexOf("#each("),O=I.indexOf("#plural("),V=I.indexOf("["),$=I.indexOf("]");if(X>-1){let R=I.slice(X).indexOf(")")+X,G=I.substring(0,X),U=I.substring(R+1),B=I.substring(X+6,R).split(","),H=Number(B[1]),W;if(Z="",q=p(B[0],N)){W=(H=isNaN(H)?q.length:H)<0?q.length+H:Math.min(H,q.length);for(let re=0;re<W;++re)Z+=G+q[re]+U}return Z.length?Z:""}if(O>-1){var L;let R=I.slice(O).indexOf(")")+O,G=I.substring(O+8,R).split(",");switch(Number(p(G[0],N))){case 0:Z=m(G[4],G[1]);break;case 1:Z=m(G[2],G[1]);break;case 2:Z=m(G[3],G[1]);break;default:Z=G[1]}return Z?(L=Z).trim&&L.trim()||L.replace(/^\s+|\s+$/g,""):""}if(V>-1){let R,G=I.substring(0,V),U=Number(I.substring(V+1,$));return q=p(G,N),!isNaN(U)&&q&&(U<0?(R=q[q.length+U])===void 0&&(R=q[0]):(R=q[U])===void 0&&(R=q[q.length-1])),R!==void 0?R:""}return"{"+I+"}"}(T.value,_))}),n(S.reduce((T,I)=>T+I.value,""),_,w)}function y(C,_){let w=C.split("."),k=this.options.lang,S=0;for(;S<w.length;++S)k=k&&k[w[S]];return typeof k=="string"?v(k,_,this):""}g.compose=function(C){let _=C.prototype;_.langFormat||(_.langFormat=y)},g.i18nFormat=v}(u||(u={})),u}),r(t,"Accessibility/Utils/ChartUtilities.js",[t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(s,l,u){let{doc:n}=s,{stripHTMLTagsFromString:p}=l,{defined:m,find:g,fireEvent:v}=u;function y(_){if(_.points&&_.points.length){let w=g(_.points,k=>!!k.graphic);return w&&w.graphic&&w.graphic.element}}function C(_){let w=y(_);return w&&w.parentNode||_.graph&&_.graph.element||_.group&&_.group.element}return{fireEventOnWrappedOrUnwrappedElement:function _(w,k){let S=k.type,x=w.hcEvents;n.createEvent&&(w.dispatchEvent||w.fireEvent)?w.dispatchEvent?w.dispatchEvent(k):w.fireEvent(S,k):x&&x[S]?v(w,S,k):w.element&&_(w.element,k)},getChartTitle:function(_){return p(_.options.title.text||_.langFormat("accessibility.defaultChartTitle",{chart:_}),_.renderer.forExport)},getAxisDescription:function(_){var w,k;return _&&(((w=_.options.accessibility)==null?void 0:w.description)||((k=_.axisTitle)==null?void 0:k.textStr)||_.options.id||_.categories&&"categories"||_.dateTime&&"Time"||"values")},getAxisRangeDescription:function(_){let w=_.options||{};return w.accessibility&&w.accessibility.rangeDescription!==void 0?w.accessibility.rangeDescription:_.categories?function(k){let S=k.chart;return k.dataMax&&k.dataMin?S.langFormat("accessibility.axis.rangeCategories",{chart:S,axis:k,numCategories:k.dataMax-k.dataMin+1}):""}(_):_.dateTime&&(_.min===0||_.dataMin===0)?function(k){let S=k.chart,x={},P=k.dataMin||k.min||0,D=k.dataMax||k.max||0,T="Seconds";x.Seconds=(D-P)/1e3,x.Minutes=x.Seconds/60,x.Hours=x.Minutes/60,x.Days=x.Hours/24,["Minutes","Hours","Days"].forEach(function(N){x[N]>2&&(T=N)});let I=x[T].toFixed(T!=="Seconds"&&T!=="Minutes"?1:0);return S.langFormat("accessibility.axis.timeRange"+T,{chart:S,axis:k,range:I.replace(".0","")})}(_):function(k){let S=k.chart,x=S.options,P=x&&x.accessibility&&x.accessibility.screenReaderSection.axisRangeDateFormat||"",D={min:k.dataMin||k.min||0,max:k.dataMax||k.max||0},T=function(I){return k.dateTime?S.time.dateFormat(P,D[I]):D[I].toString()};return S.langFormat("accessibility.axis.rangeFromTo",{chart:S,axis:k,rangeFrom:T("min"),rangeTo:T("max")})}(_)},getPointFromXY:function(_,w,k){let S=_.length,x;for(;S--;)if(x=g(_[S].points||[],function(P){return P.x===w&&P.y===k}))return x},getSeriesFirstPointElement:y,getSeriesFromName:function(_,w){return w?(_.series||[]).filter(function(k){return k.name===w}):_.series},getSeriesA11yElement:C,unhideChartElementFromAT:function _(w,k){k.setAttribute("aria-hidden",!1),k!==w.renderTo&&k.parentNode&&k.parentNode!==n.body&&(Array.prototype.forEach.call(k.parentNode.childNodes,function(S){S.hasAttribute("aria-hidden")||S.setAttribute("aria-hidden",!0)}),_(w,k.parentNode))},hideSeriesFromAT:function(_){let w=C(_);w&&w.setAttribute("aria-hidden",!0)},scrollAxisToPoint:function(_){let w=_.series.xAxis,k=_.series.yAxis,S=w&&w.scrollbar?w:k,x=S&&S.scrollbar;if(x&&m(x.to)&&m(x.from)){let P=x.to-x.from,D=function(T,I){if(!m(T.dataMin)||!m(T.dataMax))return 0;let N=T.toPixels(T.dataMin),q=T.toPixels(T.dataMax),Z=T.coll==="xAxis"?"x":"y";return(T.toPixels(I[Z]||0)-N)/(q-N)}(S,_);x.updatePosition(D-P/2,D+P/2),v(x,"changed",{from:x.from,to:x.to,trigger:"scrollbar",DOMEvent:null})}}}}),r(t,"Accessibility/Utils/DOMElementProvider.js",[t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l){let{doc:u}=s,{removeElement:n}=l;return class{constructor(){this.elements=[]}createElement(){let p=u.createElement.apply(u,arguments);return this.elements.push(p),p}removeElement(p){n(p),this.elements.splice(this.elements.indexOf(p),1)}destroyCreatedElements(){this.elements.forEach(function(p){n(p)}),this.elements=[]}}}),r(t,"Accessibility/Utils/EventProvider.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{addEvent:u}=l;return class{constructor(){this.eventRemovers=[]}addEvent(){let n=u.apply(s,arguments);return this.eventRemovers.push({element:arguments[0],remover:n}),n}removeEvent(n){let p=this.eventRemovers.map(m=>m.remover).indexOf(n);this.eventRemovers[p].remover(),this.eventRemovers.splice(p,1)}removeAddedEvents(){this.eventRemovers.map(n=>n.remover).forEach(n=>n()),this.eventRemovers=[]}}}),r(t,"Accessibility/AccessibilityComponent.js",[t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l,u,n){let{fireEventOnWrappedOrUnwrappedElement:p}=s,{getFakeMouseEvent:m}=n;return class{destroy(){}getKeyboardNavigation(){return[]}init(){}onChartRender(){}onChartUpdate(){}initBase(g,v){this.chart=g,this.eventProvider=new u,this.domElementProvider=new l,this.proxyProvider=v,this.keyCodes={left:37,right:39,up:38,down:40,enter:13,space:32,esc:27,tab:9,pageUp:33,pageDown:34,end:35,home:36}}addEvent(g,v,y,C){return this.eventProvider.addEvent(g,v,y,C)}createElement(g,v){return this.domElementProvider.createElement(g,v)}fakeClickEvent(g){p(g,m("click"))}destroyBase(){this.domElementProvider.destroyCreatedElements(),this.eventProvider.removeAddedEvents()}}}),r(t,"Accessibility/KeyboardNavigationHandler.js",[t["Core/Utilities.js"]],function(s){let{find:l}=s;return class{constructor(u,n){this.chart=u,this.keyCodeMap=n.keyCodeMap||[],this.validate=n.validate,this.init=n.init,this.terminate=n.terminate,this.response={success:1,prev:2,next:3,noHandler:4,fail:5}}run(u){let n=u.which||u.keyCode,p=this.response.noHandler,m=l(this.keyCodeMap,function(g){return g[0].indexOf(n)>-1});return m?p=m[1].call(this,n,u):n===9&&(p=this.response[u.shiftKey?"prev":"next"]),p}}}),r(t,"Accessibility/Components/ContainerComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l,u,n,p){let{unhideChartElementFromAT:m,getChartTitle:g}=u,{doc:v}=n,{stripHTMLTagsFromString:y}=p;return class extends s{onChartUpdate(){this.handleSVGTitleElement(),this.setSVGContainerLabel(),this.setGraphicContainerAttrs(),this.setRenderToAttrs(),this.makeCreditsAccessible()}handleSVGTitleElement(){let C=this.chart,_="highcharts-title-"+C.index,w=y(C.langFormat("accessibility.svgContainerTitle",{chartTitle:g(C)}));if(w.length){let k=this.svgTitleElement=this.svgTitleElement||v.createElementNS("http://www.w3.org/2000/svg","title");k.textContent=w,k.id=_,C.renderTo.insertBefore(k,C.renderTo.firstChild)}}setSVGContainerLabel(){let C=this.chart,_=C.langFormat("accessibility.svgContainerLabel",{chartTitle:g(C)});C.renderer.box&&_.length&&C.renderer.box.setAttribute("aria-label",_)}setGraphicContainerAttrs(){let C=this.chart,_=C.langFormat("accessibility.graphicContainerLabel",{chartTitle:g(C)});_.length&&C.container.setAttribute("aria-label",_)}setRenderToAttrs(){let C=this.chart,_=C.options.accessibility.landmarkVerbosity!=="disabled",w=C.langFormat("accessibility.chartContainerLabel",{title:g(C),chart:C});w&&(C.renderTo.setAttribute("role",_?"region":"group"),C.renderTo.setAttribute("aria-label",w))}makeCreditsAccessible(){let C=this.chart,_=C.credits;_&&(_.textStr&&_.element.setAttribute("aria-label",C.langFormat("accessibility.credits",{creditsStr:y(_.textStr,C.renderer.forExport)})),m(C,_.element))}getKeyboardNavigation(){let C=this.chart;return new l(C,{keyCodeMap:[],validate:function(){return!0},init:function(){let _=C.accessibility;_&&_.keyboardNavigation.tabindexContainer.focus()}})}destroy(){this.chart.renderTo.setAttribute("aria-hidden",!0)}}}),r(t,"Accessibility/FocusBorder.js",[t["Core/Utilities.js"]],function(s){var l;let{addEvent:u,pick:n}=s;return function(p){let m=["x","y","transform","width","height","r","d","stroke-width"];function g(){let _=this.focusElement,w=this.options.accessibility.keyboardNavigation.focusBorder;_&&(_.removeFocusBorder(),w.enabled&&_.addFocusBorder(w.margin,{stroke:w.style.color,strokeWidth:w.style.lineWidth,r:w.style.borderRadius}))}function v(_,w){let k=this.options.accessibility.keyboardNavigation.focusBorder,S=w||_.element;S&&S.focus&&(S.hcEvents&&S.hcEvents.focusin||u(S,"focusin",function(){}),S.focus(),k.hideBrowserFocusOutline&&(S.style.outline="none")),this.focusElement&&this.focusElement.removeFocusBorder(),this.focusElement=_,this.renderFocusBorder()}function y(_,w){this.focusBorder&&this.removeFocusBorder();let k=this.getBBox(),S=n(_,3),x=this.parentGroup,P=this.scaleX||x&&x.scaleX,D=this.scaleY||x&&x.scaleY,T=(P?!D:D)?Math.abs(P||D||1):(Math.abs(P||1)+Math.abs(D||1))/2;k.x+=this.translateX?this.translateX:0,k.y+=this.translateY?this.translateY:0;let I=k.x-S,N=k.y-S,q=k.width+2*S,Z=k.height+2*S,X=!!this.text;if(this.element.nodeName==="text"||X){let O,V,$=!!this.rotation,L=X?{x:$?1:0,y:0}:(O=0,V=0,this.attr("text-anchor")==="middle"?O=V=.5:this.rotation?O=.25:V=.75,{x:O,y:V}),R=+this.attr("x"),G=+this.attr("y");if(isNaN(R)||(I=R-k.width*L.x-S),isNaN(G)||(N=G-k.height*L.y-S),X&&$){let U=q;q=Z,Z=U,isNaN(R)||(I=R-k.height*L.x-S),isNaN(G)||(N=G-k.width*L.y-S)}}this.focusBorder=this.renderer.rect(I,N,q,Z,parseInt((w&&w.r||0).toString(),10)/T).addClass("highcharts-focus-border").attr({zIndex:99}).add(x),this.renderer.styledMode||this.focusBorder.attr({stroke:w&&w.stroke,"stroke-width":(w&&w.strokeWidth||0)/T}),function(O,...V){O.focusBorderUpdateHooks||(O.focusBorderUpdateHooks={},m.forEach($=>{let L=$+"Setter",R=O[L]||O._defaultSetter;O.focusBorderUpdateHooks[L]=R,O[L]=function(){let G=R.apply(O,arguments);return O.addFocusBorder.apply(O,V),G}}))}(this,_,w),function(O){if(O.focusBorderDestroyHook)return;let V=O.destroy;O.destroy=function(){return O.focusBorder&&O.focusBorder.destroy&&O.focusBorder.destroy(),V.apply(O,arguments)},O.focusBorderDestroyHook=V}(this)}function C(){var _;_=this,_.focusBorderUpdateHooks&&(Object.keys(_.focusBorderUpdateHooks).forEach(w=>{let k=_.focusBorderUpdateHooks[w];k===_._defaultSetter?delete _[w]:_[w]=k}),delete _.focusBorderUpdateHooks),this.focusBorderDestroyHook&&(this.destroy=this.focusBorderDestroyHook,delete this.focusBorderDestroyHook),this.focusBorder&&(this.focusBorder.destroy(),delete this.focusBorder)}p.compose=function(_,w){let k=_.prototype,S=w.prototype;k.renderFocusBorder||(k.renderFocusBorder=g,k.setFocusToElement=v),S.addFocusBorder||(S.addFocusBorder=y,S.removeFocusBorder=C)}}(l||(l={})),l}),r(t,"Accessibility/Utils/Announcer.js",[t["Core/Renderer/HTML/AST.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(s,l,u,n,p){let{doc:m}=u,{addClass:g,visuallyHideElement:v}=n,{attr:y}=p;return class{constructor(C,_){this.chart=C,this.domElementProvider=new l,this.announceRegion=this.addAnnounceRegion(_)}destroy(){this.domElementProvider.destroyCreatedElements()}announce(C){s.setElementHTML(this.announceRegion,C),this.clearAnnouncementRegionTimer&&clearTimeout(this.clearAnnouncementRegionTimer),this.clearAnnouncementRegionTimer=setTimeout(()=>{this.announceRegion.innerHTML=s.emptyHTML,delete this.clearAnnouncementRegionTimer},3e3)}addAnnounceRegion(C){let _=this.chart.announcerContainer||this.createAnnouncerContainer(),w=this.domElementProvider.createElement("div");return y(w,{"aria-hidden":!1,"aria-live":C,"aria-atomic":!0}),this.chart.styledMode?g(w,"highcharts-visually-hidden"):v(w),_.appendChild(w),w}createAnnouncerContainer(){let C=this.chart,_=m.createElement("div");return y(_,{"aria-hidden":!1,class:"highcharts-announcer-container"}),_.style.position="relative",C.renderTo.insertBefore(_,C.renderTo.firstChild),C.announcerContainer=_,_}}}),r(t,"Accessibility/Components/AnnotationsA11y.js",[t["Accessibility/Utils/HTMLUtilities.js"]],function(s){let{escapeStringForHTML:l,stripHTMLTagsFromString:u}=s;function n(v){return(v.annotations||[]).reduce((y,C)=>(C.options&&C.options.visible!==!1&&(y=y.concat(C.labels)),y),[])}function p(v){return v.options&&v.options.accessibility&&v.options.accessibility.description||v.graphic&&v.graphic.text&&v.graphic.text.textStr||""}function m(v){let y=v.options&&v.options.accessibility&&v.options.accessibility.description;if(y)return y;let C=v.chart,_=p(v),w=v.points,k=T=>T.graphic&&T.graphic.element&&T.graphic.element.getAttribute("aria-label")||"",S=w.filter(T=>!!T.graphic).map(T=>{let I=T.accessibility&&T.accessibility.valueDescription||k(T),N=T&&T.series.name||"";return(N?N+", ":"")+"data point "+I}).filter(T=>!!T),x=S.length,P=x>1?"MultiplePoints":x?"SinglePoint":"NoPoints",D={annotationText:_,annotation:v,numPoints:x,annotationPoint:S[0],additionalAnnotationPoints:S.slice(1)};return C.langFormat("accessibility.screenReaderSection.annotations.description"+P,D)}function g(v){return n(v).map(y=>{let C=l(u(m(y),v.renderer.forExport));return C?`<li>${C}</li>`:""})}return{getAnnotationsInfoHTML:function(v){let y=v.annotations;return y&&y.length?`<ul style="list-style-type: none">${g(v).join(" ")}</ul>`:""},getAnnotationLabelDescription:m,getAnnotationListItems:g,getPointAnnotationTexts:function(v){let y=n(v.series.chart).filter(C=>C.points.indexOf(v)>-1);return y.length?y.map(C=>`${p(C)}`):[]}}}),r(t,"Accessibility/Components/InfoRegionsComponent.js",[t["Accessibility/A11yI18n.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Components/AnnotationsA11y.js"],t["Core/Renderer/HTML/AST.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(s,l,u,n,p,m,g,v,y,C){let{getAnnotationsInfoHTML:_}=n,{getAxisDescription:w,getAxisRangeDescription:k,getChartTitle:S,unhideChartElementFromAT:x}=m,{format:P}=g,{doc:D}=v,{addClass:T,getElement:I,getHeadingTagNameForElement:N,stripHTMLTagsFromString:q,visuallyHideElement:Z}=y,{attr:X,pick:O,replaceNested:V}=C;function $(L){return V(L,[/<([\w\-.:!]+)\b[^<>]*>\s*<\/\1>/g,""])}return class extends l{constructor(){super(...arguments),this.screenReaderSections={}}init(){let L=this.chart,R=this;this.initRegionsDefinitions(),this.addEvent(L,"aftergetTableAST",function(G){R.onDataTableCreated(G)}),this.addEvent(L,"afterViewData",function(G){G.wasHidden&&(R.dataTableDiv=G.element,setTimeout(function(){R.focusDataTable()},300))}),this.addEvent(L,"afterHideData",function(){R.viewDataTableButton&&R.viewDataTableButton.setAttribute("aria-expanded","false")}),L.exporting&&this.addEvent(L,"afterPrint",function(){R.updateAllScreenReaderSections()}),this.announcer=new u(L,"assertive")}initRegionsDefinitions(){let L=this,R=this.chart.options.accessibility;this.screenReaderSections={before:{element:null,buildContent:function(G){let U=R.screenReaderSection.beforeChartFormatter;return U?U(G):L.defaultBeforeChartFormatter(G)},insertIntoDOM:function(G,U){U.renderTo.insertBefore(G,U.renderTo.firstChild)},afterInserted:function(){L.sonifyButtonId!==void 0&&L.initSonifyButton(L.sonifyButtonId),L.dataTableButtonId!==void 0&&L.initDataTableButton(L.dataTableButtonId)}},after:{element:null,buildContent:function(G){let U=R.screenReaderSection.afterChartFormatter;return U?U(G):L.defaultAfterChartFormatter()},insertIntoDOM:function(G,U){U.renderTo.insertBefore(G,U.container.nextSibling)},afterInserted:function(){L.chart.accessibility&&R.keyboardNavigation.enabled&&L.chart.accessibility.keyboardNavigation.updateExitAnchor()}}}}onChartRender(){this.linkedDescriptionElement=this.getLinkedDescriptionElement(),this.setLinkedDescriptionAttrs(),this.updateAllScreenReaderSections()}updateAllScreenReaderSections(){let L=this;Object.keys(this.screenReaderSections).forEach(function(R){L.updateScreenReaderSection(R)})}getLinkedDescriptionElement(){let L=this.chart.options.accessibility.linkedDescription;if(!L)return;if(typeof L!="string")return L;let R=P(L,this.chart),G=D.querySelectorAll(R);if(G.length===1)return G[0]}setLinkedDescriptionAttrs(){let L=this.linkedDescriptionElement;L&&(L.setAttribute("aria-hidden","true"),T(L,"highcharts-linked-description"))}updateScreenReaderSection(L){let R=this.chart,G=this.screenReaderSections[L],U=G.buildContent(R),B=G.element=G.element||this.createElement("div"),H=B.firstChild||this.createElement("div");U?(this.setScreenReaderSectionAttribs(B,L),p.setElementHTML(H,U),B.appendChild(H),G.insertIntoDOM(B,R),R.styledMode?T(H,"highcharts-visually-hidden"):Z(H),x(R,H),G.afterInserted&&G.afterInserted()):(B.parentNode&&B.parentNode.removeChild(B),G.element=null)}setScreenReaderSectionAttribs(L,R){let G=this.chart,U=G.langFormat("accessibility.screenReaderSection."+R+"RegionLabel",{chart:G,chartTitle:S(G)});X(L,{id:`highcharts-screen-reader-region-${R}-${G.index}`,"aria-label":U||void 0}),L.style.position="relative",U&&L.setAttribute("role",G.options.accessibility.landmarkVerbosity==="all"?"region":"group")}defaultBeforeChartFormatter(){let L=this.chart,R=L.options.accessibility.screenReaderSection.beforeChartFormat;if(!R)return"";let G=this.getAxesDescription(),U=L.sonify&&L.options.sonification&&L.options.sonification.enabled,B="highcharts-a11y-sonify-data-btn-"+L.index,H="hc-linkto-highcharts-data-table-"+L.index,W=_(L),re=L.langFormat("accessibility.screenReaderSection.annotations.heading",{chart:L}),de={headingTagName:N(L.renderTo),chartTitle:S(L),typeDescription:this.getTypeDescriptionText(),chartSubtitle:this.getSubtitleText(),chartLongdesc:this.getLongdescText(),xAxisDescription:G.xAxis,yAxisDescription:G.yAxis,playAsSoundButton:U?this.getSonifyButtonText(B):"",viewTableButton:L.getCSV?this.getDataTableButtonText(H):"",annotationsTitle:W?re:"",annotationsList:W},ie=s.i18nFormat(R,de,L);return this.dataTableButtonId=H,this.sonifyButtonId=B,$(ie)}defaultAfterChartFormatter(){let L=this.chart,R=L.options.accessibility.screenReaderSection.afterChartFormat;if(!R)return"";let G={endOfChartMarker:this.getEndOfChartMarkerText()};return $(s.i18nFormat(R,G,L))}getLinkedDescription(){let L=this.linkedDescriptionElement;return q(L&&L.innerHTML||"",this.chart.renderer.forExport)}getLongdescText(){let L=this.chart.options,R=L.caption,G=R&&R.text,U=this.getLinkedDescription();return L.accessibility.description||U||G||""}getTypeDescriptionText(){let L=this.chart;return L.types?L.options.accessibility.typeDescription||function(R,G){let U=G[0],B=R.series&&R.series[0]||{},H=R.mapView&&R.mapView.geoMap&&R.mapView.geoMap.title,W={numSeries:R.series.length,numPoints:B.points&&B.points.length,chart:R,mapTitle:H};return U?U==="map"||U==="tiledwebmap"?W.mapTitle?R.langFormat("accessibility.chartTypes.mapTypeDescription",W):R.langFormat("accessibility.chartTypes.unknownMap",W):R.types.length>1?R.langFormat("accessibility.chartTypes.combinationChart",W):function(re,de,ie){let oe=de[0],Ee=re.langFormat("accessibility.seriesTypeDescriptions."+oe,ie),xe=re.series&&re.series.length<2?"Single":"Multiple";return(re.langFormat("accessibility.chartTypes."+oe+xe,ie)||re.langFormat("accessibility.chartTypes.default"+xe,ie))+(Ee?" "+Ee:"")}(R,G,W):R.langFormat("accessibility.chartTypes.emptyChart",W)}(L,L.types):""}getDataTableButtonText(L){let R=this.chart;return'<button id="'+L+'">'+R.langFormat("accessibility.table.viewAsDataTableButtonText",{chart:R,chartTitle:S(R)})+"</button>"}getSonifyButtonText(L){let R=this.chart;return R.options.sonification&&R.options.sonification.enabled===!1?"":'<button id="'+L+'">'+R.langFormat("accessibility.sonification.playAsSoundButtonText",{chart:R,chartTitle:S(R)})+"</button>"}getSubtitleText(){let L=this.chart.options.subtitle;return q(L&&L.text||"",this.chart.renderer.forExport)}getEndOfChartMarkerText(){let L=I(`highcharts-end-of-chart-marker-${this.chart.index}`);if(L)return L.outerHTML;let R=this.chart,G=R.langFormat("accessibility.screenReaderSection.endOfChartMarker",{chart:R});return'<div id="highcharts-end-of-chart-marker-'+R.index+'">'+G+"</div>"}onDataTableCreated(L){let R=this.chart;if(R.options.accessibility.enabled){this.viewDataTableButton&&this.viewDataTableButton.setAttribute("aria-expanded","true");let G=L.tree.attributes||{};G.tabindex=-1,G.summary=R.langFormat("accessibility.table.tableSummary",{chart:R}),L.tree.attributes=G}}focusDataTable(){let L=this.dataTableDiv,R=L&&L.getElementsByTagName("table")[0];R&&R.focus&&R.focus()}initSonifyButton(L){let R=this.sonifyButton=I(L),G=this.chart,U=B=>{R&&(R.setAttribute("aria-hidden","true"),R.setAttribute("aria-label","")),B.preventDefault(),B.stopPropagation();let H=G.langFormat("accessibility.sonification.playAsSoundClickAnnouncement",{chart:G});this.announcer.announce(H),setTimeout(()=>{R&&(R.removeAttribute("aria-hidden"),R.removeAttribute("aria-label")),G.sonify&&G.sonify()},1e3)};R&&G&&(R.setAttribute("tabindex",-1),R.onclick=function(B){(G.options.accessibility&&G.options.accessibility.screenReaderSection.onPlayAsSoundClick||U).call(this,B,G)})}initDataTableButton(L){let R=this.viewDataTableButton=I(L),G=this.chart,U=L.replace("hc-linkto-","");R&&(X(R,{tabindex:-1,"aria-expanded":!!I(U)}),R.onclick=G.options.accessibility.screenReaderSection.onViewDataTableClick||function(){G.viewData()})}getAxesDescription(){let L=this.chart,R=function(re,de){let ie=L[re];return ie.length>1||ie[0]&&O(ie[0].options.accessibility&&ie[0].options.accessibility.enabled,de)},G=!!L.types&&0>L.types.indexOf("map")&&0>L.types.indexOf("treemap")&&0>L.types.indexOf("tilemap"),U=!!L.hasCartesianSeries,B=R("xAxis",!L.angular&&U&&G),H=R("yAxis",U&&G),W={};return B&&(W.xAxis=this.getAxisDescriptionText("xAxis")),H&&(W.yAxis=this.getAxisDescriptionText("yAxis")),W}getAxisDescriptionText(L){let R=this.chart,G=R[L];return R.langFormat("accessibility.axis."+L+"Description"+(G.length>1?"Plural":"Singular"),{chart:R,names:G.map(function(U){return w(U)}),ranges:G.map(function(U){return k(U)}),numAxes:G.length})}destroy(){this.announcer&&this.announcer.destroy()}}}),r(t,"Accessibility/Components/MenuComponent.js",[t["Core/Utilities.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l,u,n,p){let{attr:m}=s,{getChartTitle:g,unhideChartElementFromAT:v}=n,{getFakeMouseEvent:y}=p;function C(w){return w.exportSVGElements&&w.exportSVGElements[0]}class _ extends l{init(){let k=this.chart,S=this;this.addEvent(k,"exportMenuShown",function(){S.onMenuShown()}),this.addEvent(k,"exportMenuHidden",function(){S.onMenuHidden()}),this.createProxyGroup()}onMenuHidden(){let k=this.chart.exportContextMenu;k&&k.setAttribute("aria-hidden","true"),this.setExportButtonExpandedState("false")}onMenuShown(){let k=this.chart,S=k.exportContextMenu;S&&(this.addAccessibleContextMenuAttribs(),v(k,S)),this.setExportButtonExpandedState("true")}setExportButtonExpandedState(k){this.exportButtonProxy&&this.exportButtonProxy.innerElement.setAttribute("aria-expanded",k)}onChartRender(){let k=this.chart,S=k.focusElement,x=k.accessibility;this.proxyProvider.clearGroup("chartMenu"),this.proxyMenuButton(),this.exportButtonProxy&&S&&S===k.exportingGroup&&(S.focusBorder?k.setFocusToElement(S,this.exportButtonProxy.innerElement):x&&x.keyboardNavigation.tabindexContainer.focus())}proxyMenuButton(){let k=this.chart,S=this.proxyProvider,x=C(k);(function(P){let D=P.options.exporting,T=C(P);return!!(D&&D.enabled!==!1&&D.accessibility&&D.accessibility.enabled&&T&&T.element)})(k)&&x&&(this.exportButtonProxy=S.addProxyElement("chartMenu",{click:x},"button",{"aria-label":k.langFormat("accessibility.exporting.menuButtonLabel",{chart:k,chartTitle:g(k)}),"aria-expanded":!1,title:k.options.lang.contextButtonTitle||null}))}createProxyGroup(){this.chart&&this.proxyProvider&&this.proxyProvider.addGroup("chartMenu")}addAccessibleContextMenuAttribs(){let k=this.chart,S=k.exportDivElements;if(S&&S.length){S.forEach(P=>{P&&(P.tagName!=="LI"||P.children&&P.children.length?P.setAttribute("aria-hidden","true"):P.setAttribute("tabindex",-1))});let x=S[0]&&S[0].parentNode;x&&m(x,{"aria-hidden":void 0,"aria-label":k.langFormat("accessibility.exporting.chartMenuLabel",{chart:k}),role:"list"})}}getKeyboardNavigation(){let k=this.keyCodes,S=this.chart,x=this;return new u(S,{keyCodeMap:[[[k.left,k.up],function(){return x.onKbdPrevious(this)}],[[k.right,k.down],function(){return x.onKbdNext(this)}],[[k.enter,k.space],function(){return x.onKbdClick(this)}]],validate:function(){return!!S.exporting&&S.options.exporting.enabled!==!1&&S.options.exporting.accessibility.enabled!==!1},init:function(){let P=x.exportButtonProxy,D=x.chart.exportingGroup;P&&D&&S.setFocusToElement(D,P.innerElement)},terminate:function(){S.hideExportMenu()}})}onKbdPrevious(k){let S=this.chart,x=S.options.accessibility,P=k.response,D=S.highlightedExportItemIx||0;for(;D--;)if(S.highlightExportItem(D))return P.success;return x.keyboardNavigation.wrapAround?(S.highlightLastExportItem(),P.success):P.prev}onKbdNext(k){let S=this.chart,x=S.options.accessibility,P=k.response;for(let D=(S.highlightedExportItemIx||0)+1;D<S.exportDivElements.length;++D)if(S.highlightExportItem(D))return P.success;return x.keyboardNavigation.wrapAround?(S.highlightExportItem(0),P.success):P.next}onKbdClick(k){let S=this.chart,x=S.exportDivElements[S.highlightedExportItemIx],P=C(S).element;return S.openMenu?this.fakeClickEvent(x):(this.fakeClickEvent(P),S.highlightExportItem(0)),k.response.success}}return function(w){function k(){let D=C(this);if(D){let T=D.element;T.onclick&&T.onclick(y("click"))}}function S(){let D=this.exportDivElements;D&&this.exportContextMenu&&this.openMenu&&(D.forEach(T=>{T&&T.className==="highcharts-menu-item"&&T.onmouseout&&T.onmouseout(y("mouseout"))}),this.highlightedExportItemIx=0,this.exportContextMenu.hideMenu(),this.container.focus())}function x(D){let T=this.exportDivElements&&this.exportDivElements[D],I=this.exportDivElements&&this.exportDivElements[this.highlightedExportItemIx];if(T&&T.tagName==="LI"&&!(T.children&&T.children.length)){let N=!!(this.renderTo.getElementsByTagName("g")[0]||{}).focus;return T.focus&&N&&T.focus(),I&&I.onmouseout&&I.onmouseout(y("mouseout")),T.onmouseover&&T.onmouseover(y("mouseover")),this.highlightedExportItemIx=D,!0}return!1}function P(){if(this.exportDivElements){let D=this.exportDivElements.length;for(;D--;)if(this.highlightExportItem(D))return!0}return!1}w.compose=function(D){let T=D.prototype;T.hideExportMenu||(T.hideExportMenu=S,T.highlightExportItem=x,T.highlightLastExportItem=P,T.showExportMenu=k)}}(_),_}),r(t,"Accessibility/KeyboardNavigation.js",[t["Core/Globals.js"],t["Accessibility/Components/MenuComponent.js"],t["Core/Utilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l,u,n,p){let{doc:m,win:g}=s,{addEvent:v,defined:y,fireEvent:C}=u,{getElement:_,simulatedEventTarget:w}=p;class k{constructor(x,P){this.currentModuleIx=NaN,this.modules=[],this.init(x,P)}init(x,P){let D=this.eventProvider=new n;this.chart=x,this.components=P,this.modules=[],this.currentModuleIx=0,this.update(),D.addEvent(this.tabindexContainer,"keydown",T=>this.onKeydown(T)),D.addEvent(this.tabindexContainer,"focus",T=>this.onFocus(T)),["mouseup","touchend"].forEach(T=>D.addEvent(m,T,I=>this.onMouseUp(I))),["mousedown","touchstart"].forEach(T=>D.addEvent(x.renderTo,T,()=>{this.isClickingChart=!0}))}update(x){let P=this.chart.options.accessibility,D=P&&P.keyboardNavigation,T=this.components;this.updateContainerTabindex(),D&&D.enabled&&x&&x.length?(this.modules=x.reduce(function(I,N){let q=T[N].getKeyboardNavigation();return I.concat(q)},[]),this.updateExitAnchor()):(this.modules=[],this.currentModuleIx=0,this.removeExitAnchor())}updateExitAnchor(){let x=_(`highcharts-end-of-chart-marker-${this.chart.index}`);this.removeExitAnchor(),x?(this.makeElementAnExitAnchor(x),this.exitAnchor=x):this.createExitAnchor()}move(x){let P=this.modules&&this.modules[this.currentModuleIx];P&&P.terminate&&P.terminate(x),this.chart.focusElement&&this.chart.focusElement.removeFocusBorder(),this.currentModuleIx+=x;let D=this.modules&&this.modules[this.currentModuleIx];if(D){if(D.validate&&!D.validate())return this.move(x);if(D.init)return D.init(x),!0}return this.currentModuleIx=0,this.exiting=!0,x>0?this.exitAnchor&&this.exitAnchor.focus():this.tabindexContainer.focus(),!1}onFocus(x){let P=this.chart,D=x.relatedTarget&&P.container.contains(x.relatedTarget),T=P.options.accessibility,I=T&&T.keyboardNavigation;if(I&&I.enabled&&!this.exiting&&!this.tabbingInBackwards&&!this.isClickingChart&&!D){let N=this.getFirstValidModuleIx();N!==null&&(this.currentModuleIx=N,this.modules[N].init(1))}this.keyboardReset=!1,this.exiting=!1}onMouseUp(x){if(delete this.isClickingChart,!this.keyboardReset&&x.relatedTarget!==w){let P=this.chart;if(!x.target||!P.container.contains(x.target)){let D=this.modules&&this.modules[this.currentModuleIx||0];D&&D.terminate&&D.terminate(),this.currentModuleIx=0}P.focusElement&&(P.focusElement.removeFocusBorder(),delete P.focusElement),this.keyboardReset=!0}}onKeydown(x){let P,D=x||g.event,T=this.modules&&this.modules.length&&this.modules[this.currentModuleIx],I=D.target;if((!I||I.nodeName!=="INPUT"||I.classList.contains("highcharts-a11y-proxy-element"))&&(this.keyboardReset=!1,this.exiting=!1,T)){let N=T.run(D);N===T.response.success?P=!0:N===T.response.prev?P=this.move(-1):N===T.response.next&&(P=this.move(1)),P&&(D.preventDefault(),D.stopPropagation())}}updateContainerTabindex(){let x,P=this.chart.options.accessibility,D=P&&P.keyboardNavigation,T=!(D&&D.enabled===!1),I=this.chart,N=I.container;I.renderTo.hasAttribute("tabindex")?(N.removeAttribute("tabindex"),x=I.renderTo):x=N,this.tabindexContainer=x;let q=x.getAttribute("tabindex");T&&!q?x.setAttribute("tabindex","0"):T||I.container.removeAttribute("tabindex")}createExitAnchor(){let x=this.chart,P=this.exitAnchor=m.createElement("div");x.renderTo.appendChild(P),this.makeElementAnExitAnchor(P)}makeElementAnExitAnchor(x){let P=this.tabindexContainer.getAttribute("tabindex")||0;x.setAttribute("class","highcharts-exit-anchor"),x.setAttribute("tabindex",P),x.setAttribute("aria-hidden",!1),this.addExitAnchorEventsToEl(x)}removeExitAnchor(){if(this.exitAnchor){let x=this.eventProvider.eventRemovers.find(P=>P.element===this.exitAnchor);x&&y(x.remover)&&this.eventProvider.removeEvent(x.remover),this.exitAnchor.parentNode&&this.exitAnchor.parentNode.removeChild(this.exitAnchor),delete this.exitAnchor}}addExitAnchorEventsToEl(x){let P=this.chart,D=this;this.eventProvider.addEvent(x,"focus",function(T){let I=T||g.event,N=!(I.relatedTarget&&P.container.contains(I.relatedTarget)||D.exiting);if(P.focusElement&&delete P.focusElement,N){if(D.tabbingInBackwards=!0,D.tabindexContainer.focus(),delete D.tabbingInBackwards,I.preventDefault(),D.modules&&D.modules.length){D.currentModuleIx=D.modules.length-1;let q=D.modules[D.currentModuleIx];q&&q.validate&&!q.validate()?D.move(-1):q&&q.init(-1)}}else D.exiting=!1})}getFirstValidModuleIx(){let x=this.modules.length;for(let P=0;P<x;++P){let D=this.modules[P];if(!D.validate||D.validate())return P}return null}destroy(){this.removeExitAnchor(),this.eventProvider.removeAddedEvents(),this.chart.container.removeAttribute("tabindex")}}return function(S){function x(){let D=this;C(this,"dismissPopupContent",{},function(){D.tooltip&&D.tooltip.hide(0),D.hideExportMenu()})}function P(D){(D.which||D.keyCode)===27&&s.charts&&s.charts.forEach(T=>{T&&T.dismissPopupContent&&T.dismissPopupContent()})}S.compose=function(D){l.compose(D);let T=D.prototype;return T.dismissPopupContent||(T.dismissPopupContent=x,v(m,"keydown",P)),D}}(k),k}),r(t,"Accessibility/Components/LegendComponent.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Legend/Legend.js"],t["Core/Utilities.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l,u,n,p,m,g,v){let{animObject:y}=s,{doc:C}=l,{addEvent:_,fireEvent:w,isNumber:k,pick:S,syncTimeout:x}=n,{getChartTitle:P}=g,{stripHTMLTagsFromString:D,addClass:T,removeClass:I}=v;function N(X){let O=X.legend&&X.legend.allItems,V=X.options.legend.accessibility||{},$=X.colorAxis&&X.colorAxis.some(L=>!L.dataClasses||!L.dataClasses.length);return!!(O&&O.length&&!$&&V.enabled!==!1)}function q(X,O){let V=O.legendItem||{};for(let $ of(O.setState(X?"hover":"",!0),["group","label","symbol"])){let L=V[$],R=L&&L.element||L;R&&w(R,X?"mouseover":"mouseout")}}class Z extends p{constructor(){super(...arguments),this.highlightedLegendItemIx=NaN,this.proxyGroup=null}init(){let O=this;this.recreateProxies(),this.addEvent(u,"afterScroll",function(){this.chart===O.chart&&(O.proxyProvider.updateGroupProxyElementPositions("legend"),O.updateLegendItemProxyVisibility(),O.highlightedLegendItemIx>-1&&this.chart.highlightLegendItem(O.highlightedLegendItemIx))}),this.addEvent(u,"afterPositionItem",function(V){this.chart===O.chart&&this.chart.renderer&&O.updateProxyPositionForItem(V.item)}),this.addEvent(u,"afterRender",function(){this.chart===O.chart&&this.chart.renderer&&O.recreateProxies()&&x(()=>O.proxyProvider.updateGroupProxyElementPositions("legend"),y(S(this.chart.renderer.globalAnimation,!0)).duration)})}updateLegendItemProxyVisibility(){let O,V=this.chart,$=V.legend,L=$.allItems||[],R=$.currentPage||1,G=$.clipHeight||0;L.forEach(U=>{if(U.a11yProxyElement){let B=$.pages&&$.pages.length,H=U.a11yProxyElement.element,W=!1;if(O=U.legendItem||{},B){let re=O.pageIx||0;W=(O.y||0)+(O.label?Math.round(O.label.getBBox().height):0)-$.pages[re]>G||re!==R-1}W?V.styledMode?T(H,"highcharts-a11y-invisible"):H.style.visibility="hidden":(I(H,"highcharts-a11y-invisible"),H.style.visibility="")}})}onChartRender(){N(this.chart)||this.removeProxies()}highlightAdjacentLegendPage(O){let V=this.chart,$=V.legend,L=($.currentPage||1)+O,R=$.pages||[];if(L>0&&L<=R.length){let G=0;for(let U of $.allItems)((U.legendItem||{}).pageIx||0)+1===L&&V.highlightLegendItem(G)&&(this.highlightedLegendItemIx=G),++G}}updateProxyPositionForItem(O){O.a11yProxyElement&&O.a11yProxyElement.refreshPosition()}recreateProxies(){let O=C.activeElement,V=this.proxyGroup,$=O&&V&&V.contains(O);return this.removeProxies(),!!N(this.chart)&&(this.addLegendProxyGroup(),this.proxyLegendItems(),this.updateLegendItemProxyVisibility(),this.updateLegendTitle(),$&&this.chart.highlightLegendItem(this.highlightedLegendItemIx),!0)}removeProxies(){this.proxyProvider.removeGroup("legend")}updateLegendTitle(){let O=this.chart,V=D((O.legend&&O.legend.options.title&&O.legend.options.title.text||"").replace(/<br ?\/?>/g," "),O.renderer.forExport),$=O.langFormat("accessibility.legend.legendLabel"+(V?"":"NoTitle"),{chart:O,legendTitle:V,chartTitle:P(O)});this.proxyProvider.updateGroupAttrs("legend",{"aria-label":$})}addLegendProxyGroup(){let O=this.chart.options.accessibility.landmarkVerbosity==="all"?"region":null;this.proxyGroup=this.proxyProvider.addGroup("legend","ul",{"aria-label":"_placeholder_",role:O})}proxyLegendItems(){let O,V=this;((this.chart.legend||{}).allItems||[]).forEach($=>{(O=$.legendItem||{}).label&&O.label.element&&V.proxyLegendItem($)})}proxyLegendItem(O){let V=O.legendItem||{};if(!V.label||!V.group)return;let $=this.chart.langFormat("accessibility.legend.legendItem",{chart:this.chart,itemName:D(O.name,this.chart.renderer.forExport),item:O}),L={tabindex:-1,"aria-pressed":O.visible,"aria-label":$},R=V.group.div?V.label:V.group;O.a11yProxyElement=this.proxyProvider.addProxyElement("legend",{click:V.label,visual:R.element},"button",L)}getKeyboardNavigation(){let O=this.keyCodes,V=this,$=this.chart;return new m($,{keyCodeMap:[[[O.left,O.right,O.up,O.down],function(L){return V.onKbdArrowKey(this,L)}],[[O.enter,O.space],function(){return V.onKbdClick(this)}],[[O.pageDown,O.pageUp],function(L){let R=L===O.pageDown?1:-1;return V.highlightAdjacentLegendPage(R),this.response.success}]],validate:function(){return V.shouldHaveLegendNavigation()},init:function(){$.highlightLegendItem(0),V.highlightedLegendItemIx=0},terminate:function(){V.highlightedLegendItemIx=-1,$.legend.allItems.forEach(L=>q(!1,L))}})}onKbdArrowKey(O,V){let{keyCodes:{left:$,up:L},highlightedLegendItemIx:R,chart:G}=this,U=G.legend.allItems.length,B=G.options.accessibility.keyboardNavigation.wrapAround,H=V===$||V===L?-1:1;return G.highlightLegendItem(R+H)?this.highlightedLegendItemIx+=H:B&&U>1&&(this.highlightedLegendItemIx=H>0?0:U-1,G.highlightLegendItem(this.highlightedLegendItemIx)),O.response.success}onKbdClick(O){let V=this.chart.legend.allItems[this.highlightedLegendItemIx];return V&&V.a11yProxyElement&&V.a11yProxyElement.click(),O.response.success}shouldHaveLegendNavigation(){if(!N(this.chart))return!1;let O=this.chart,V=(O.options.legend||{}).accessibility||{};return!!(O.legend.display&&V.keyboardNavigation&&V.keyboardNavigation.enabled)}destroy(){this.removeProxies()}}return function(X){function O($){let L=this.legend.allItems,R=this.accessibility&&this.accessibility.components.legend.highlightedLegendItemIx,G=L[$],U=(G==null?void 0:G.legendItem)||{};if(G){k(R)&&L[R]&&q(!1,L[R]),function(W,re){let de=(W.allItems[re].legendItem||{}).pageIx,ie=W.currentPage;de!==void 0&&de+1!==ie&&W.scroll(1+de-ie)}(this.legend,$);let B=U.label,H=G.a11yProxyElement&&G.a11yProxyElement.innerElement;return B&&B.element&&H&&this.setFocusToElement(B,H),q(!0,G),!0}return!1}function V($){let L=this.chart.options.accessibility,R=$.item;L.enabled&&R&&R.a11yProxyElement&&R.a11yProxyElement.innerElement.setAttribute("aria-pressed",$.visible?"true":"false")}X.compose=function($,L){let R=$.prototype;R.highlightLegendItem||(R.highlightLegendItem=O,_(L,"afterColorizeItem",V))}}(Z),Z}),r(t,"Stock/Navigator/ChartNavigatorComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let u,{isTouchDevice:n}=s,{addEvent:p,merge:m,pick:g}=l,v=[];function y(){this.navigator&&this.navigator.setBaseSeries(null,!1)}function C(){var q;let P,D,T,I=this.legend,N=this.navigator;if(N){P=I&&I.options,D=N.xAxis,T=N.yAxis;let{scrollbarHeight:Z,scrollButtonSize:X}=N;this.inverted?(N.left=N.opposite?this.chartWidth-Z-N.height:this.spacing[3]+Z,N.top=this.plotTop+X):(N.left=g(D.left,this.plotLeft+X),N.top=N.navigatorOptions.top||this.chartHeight-N.height-Z-(((q=this.scrollbar)==null?void 0:q.options.margin)||0)-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(P&&P.verticalAlign==="bottom"&&P.layout!=="proximate"&&P.enabled&&!P.floating?I.legendHeight+g(P.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)),D&&T&&(this.inverted?D.options.left=T.options.left=N.left:D.options.top=T.options.top=N.top,D.setAxisSize(),T.setAxisSize())}}function _(P){!this.navigator&&!this.scroller&&(this.options.navigator.enabled||this.options.scrollbar.enabled)&&(this.scroller=this.navigator=new u(this),g(P.redraw,!0)&&this.redraw(P.animation))}function w(){let P=this.options;(P.navigator.enabled||P.scrollbar.enabled)&&(this.scroller=this.navigator=new u(this))}function k(){let P=this.options,D=P.navigator,T=P.rangeSelector;if((D&&D.enabled||T&&T.enabled)&&(!n&&this.zooming.type==="x"||n&&this.zooming.pinchType==="x"))return!1}function S(P){let D=P.navigator;if(D&&P.xAxis[0]){let T=P.xAxis[0].getExtremes();D.render(T.min,T.max)}}function x(P){let D=P.options.navigator||{},T=P.options.scrollbar||{};!this.navigator&&!this.scroller&&(D.enabled||T.enabled)&&(m(!0,this.options.navigator,D),m(!0,this.options.scrollbar,T),delete P.options.navigator,delete P.options.scrollbar)}return{compose:function(P,D){if(l.pushUnique(v,P)){let T=P.prototype;u=D,T.callbacks.push(S),p(P,"afterAddSeries",y),p(P,"afterSetChartSize",C),p(P,"afterUpdate",_),p(P,"beforeRender",w),p(P,"beforeShowResetZoom",k),p(P,"update",x)}}}}),r(t,"Core/Axis/NavigatorAxisComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{isTouchDevice:u}=s,{addEvent:n,correctFloat:p,defined:m,isNumber:g,pick:v}=l;function y(){this.navigatorAxis||(this.navigatorAxis=new _(this))}function C(w){let k,S=this.chart,x=S.options,P=x.navigator,D=this.navigatorAxis,T=S.zooming.pinchType,I=x.rangeSelector,N=S.zooming.type;if(this.isXAxis&&(P!=null&&P.enabled||I!=null&&I.enabled)){if(N==="y"&&w.trigger==="zoom")k=!1;else if((w.trigger==="zoom"&&N==="xy"||u&&T==="xy")&&this.options.range){let q=D.previousZoom;m(w.min)?D.previousZoom=[this.min,this.max]:q&&(w.min=q[0],w.max=q[1],D.previousZoom=void 0)}}k!==void 0&&w.preventDefault()}class _{static compose(k){k.keepProps.includes("navigatorAxis")||(k.keepProps.push("navigatorAxis"),n(k,"init",y),n(k,"setExtremes",C))}constructor(k){this.axis=k}destroy(){this.axis=void 0}toFixedRange(k,S,x,P){let D=this.axis,T=(D.pointRange||0)/2,I=v(x,D.translate(k,!0,!D.horiz)),N=v(P,D.translate(S,!0,!D.horiz));return m(x)||(I=p(I+T)),m(P)||(N=p(N-T)),g(I)&&g(N)||(I=N=void 0),{min:I,max:N}}}return _}),r(t,"Stock/Navigator/NavigatorDefaults.js",[t["Core/Color/Color.js"],t["Core/Series/SeriesRegistry.js"]],function(s,l){let{parse:u}=s,{seriesTypes:n}=l;return{height:40,margin:25,maskInside:!0,handles:{width:7,borderRadius:0,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:u("#667aff").setOpacity(.3).get(),outlineColor:"#999999",outlineWidth:1,series:{type:n.areaspline===void 0?"line":"areaspline",fillOpacity:.05,lineWidth:1,compare:null,sonification:{enabled:!1},dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,firstAnchor:"firstPoint",anchor:"middle",lastAnchor:"lastPoint",units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2,3,4]],["week",[1,2,3]],["month",[1,3,6]],["year",null]]},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},threshold:null},xAxis:{className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",id:"navigator-x-axis",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#000000",fontSize:"0.7em",opacity:.6,textOutline:"2px contrast"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,id:"navigator-y-axis",maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}}}),r(t,"Stock/Navigator/NavigatorSymbols.js",[t["Core/Renderer/SVG/Symbols.js"],t["Core/Utilities.js"]],function(s,l){let{relativeLength:u}=l;return{"navigator-handle":function(n,p,m,g,v={}){let y=v.width?v.width/2:m,C=u(v.borderRadius||0,Math.min(2*y,g));return[["M",-1.5,(g=v.height||g)/2-3.5],["L",-1.5,g/2+4.5],["M",.5,g/2-3.5],["L",.5,g/2+4.5],...s.rect(-y-1,.5,2*y+1,g,{r:C})]}}}),r(t,"Stock/Utilities/StockUtilities.js",[t["Core/Utilities.js"]],function(s){let{defined:l}=s;return{setFixedRange:function(u){let n=this.xAxis[0];l(n.dataMax)&&l(n.dataMin)&&u?this.fixedRange=Math.min(u,n.dataMax-n.dataMin):this.fixedRange=u}}}),r(t,"Stock/Navigator/NavigatorComposition.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorDefaults.js"],t["Stock/Navigator/NavigatorSymbols.js"],t["Core/Renderer/RendererRegistry.js"],t["Stock/Utilities/StockUtilities.js"],t["Core/Utilities.js"]],function(s,l,u,n,p,m,g,v){let{setOptions:y}=s,{composed:C}=l,{getRendererType:_}=m,{setFixedRange:w}=g,{addEvent:k,extend:S,pushUnique:x}=v;function P(){this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1)}return{compose:function(D,T,I){u.compose(T),x(C,"Navigator")&&(D.prototype.setFixedRange=w,S(_().prototype.symbols,p),k(I,"afterUpdate",P),y({navigator:n}))}}}),r(t,"Core/Axis/ScrollbarAxis.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){var u;let{composed:n}=s,{addEvent:p,defined:m,pick:g,pushUnique:v}=l;return function(y){let C;function _(x){let P=g(x.options&&x.options.min,x.min),D=g(x.options&&x.options.max,x.max);return{axisMin:P,axisMax:D,scrollMin:m(x.dataMin)?Math.min(P,x.min,x.dataMin,g(x.threshold,1/0)):P,scrollMax:m(x.dataMax)?Math.max(D,x.max,x.dataMax,g(x.threshold,-1/0)):D}}function w(){let x=this.scrollbar,P=x&&!x.options.opposite,D=this.horiz?2:P?3:1;x&&(this.chart.scrollbarsOffsets=[0,0],this.chart.axisOffset[D]+=x.size+(x.options.margin||0))}function k(){let x=this;x.options&&x.options.scrollbar&&x.options.scrollbar.enabled&&(x.options.scrollbar.vertical=!x.horiz,x.options.startOnTick=x.options.endOnTick=!1,x.scrollbar=new C(x.chart.renderer,x.options.scrollbar,x.chart),p(x.scrollbar,"changed",function(P){let D,T,{axisMin:I,axisMax:N,scrollMin:q,scrollMax:Z}=_(x),X=Z-q;if(m(I)&&m(N))if(x.horiz&&!x.reversed||!x.horiz&&x.reversed?(D=q+X*this.to,T=q+X*this.from):(D=q+X*(1-this.from),T=q+X*(1-this.to)),this.shouldUpdateExtremes(P.DOMType)){let O=P.DOMType!=="mousemove"&&P.DOMType!=="touchmove"&&void 0;x.setExtremes(T,D,!0,O,P)}else this.setRange(this.from,this.to)}))}function S(){let x,P,D,{scrollMin:T,scrollMax:I}=_(this),N=this.scrollbar,q=this.axisTitleMargin+(this.titleOffset||0),Z=this.chart.scrollbarsOffsets,X=this.options.margin||0;if(N&&Z){if(this.horiz)this.opposite||(Z[1]+=q),N.position(this.left,this.top+this.height+2+Z[1]-(this.opposite?X:0),this.width,this.height),this.opposite||(Z[1]+=X),x=1;else{let O;this.opposite&&(Z[0]+=q),O=N.options.opposite?this.left+this.width+2+Z[0]-(this.opposite?0:X):this.opposite?0:X,N.position(O,this.top,this.width,this.height),this.opposite&&(Z[0]+=X),x=0}if(Z[x]+=N.size+(N.options.margin||0),isNaN(T)||isNaN(I)||!m(this.min)||!m(this.max)||this.dataMin===this.dataMax)N.setRange(0,1);else if(this.min===this.max){let O=this.pointRange/(this.dataMax+1);P=O*this.min,D=O*(this.max+1),N.setRange(P,D)}else P=(this.min-T)/(I-T),D=(this.max-T)/(I-T),this.horiz&&!this.reversed||!this.horiz&&this.reversed?N.setRange(P,D):N.setRange(1-D,1-P)}}y.compose=function(x,P){v(n,"Axis.Scrollbar")&&(C=P,p(x,"afterGetOffset",w),p(x,"afterInit",k),p(x,"afterRender",S))}}(u||(u={})),u}),r(t,"Stock/Scrollbar/ScrollbarDefaults.js",[],function(){return{height:10,barBorderRadius:5,buttonBorderRadius:0,buttonsEnabled:!1,liveRedraw:void 0,margin:void 0,minWidth:6,opposite:!0,step:.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:0,barBorderColor:"#cccccc",buttonArrowColor:"#333333",buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"none",trackBackgroundColor:"rgba(255, 255, 255, 0.001)",trackBorderColor:"#cccccc",trackBorderRadius:5,trackBorderWidth:1}}),r(t,"Stock/Scrollbar/Scrollbar.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/ScrollbarAxis.js"],t["Stock/Scrollbar/ScrollbarDefaults.js"],t["Core/Utilities.js"]],function(s,l,u,n,p){let{defaultOptions:m}=s,{addEvent:g,correctFloat:v,crisp:y,defined:C,destroyObjectProperties:_,fireEvent:w,merge:k,pick:S,removeEvent:x}=p;class P{static compose(T){u.compose(T,P)}static swapXY(T,I){return I&&T.forEach(N=>{let q,Z=N.length;for(let X=0;X<Z;X+=2)typeof(q=N[X+1])=="number"&&(N[X+1]=N[X+2],N[X+2]=q)}),T}constructor(T,I,N){this._events=[],this.chartX=0,this.chartY=0,this.from=0,this.scrollbarButtons=[],this.scrollbarLeft=0,this.scrollbarStrokeWidth=1,this.scrollbarTop=0,this.size=0,this.to=0,this.trackBorderWidth=1,this.x=0,this.y=0,this.init(T,I,N)}addEvents(){let T=this.options.inverted?[1,0]:[0,1],I=this.scrollbarButtons,N=this.scrollbarGroup.element,q=this.track.element,Z=this.mouseDownHandler.bind(this),X=this.mouseMoveHandler.bind(this),O=this.mouseUpHandler.bind(this),V=[[I[T[0]].element,"click",this.buttonToMinClick.bind(this)],[I[T[1]].element,"click",this.buttonToMaxClick.bind(this)],[q,"click",this.trackClick.bind(this)],[N,"mousedown",Z],[N.ownerDocument,"mousemove",X],[N.ownerDocument,"mouseup",O],[N,"touchstart",Z],[N.ownerDocument,"touchmove",X],[N.ownerDocument,"touchend",O]];V.forEach(function($){g.apply(null,$)}),this._events=V}buttonToMaxClick(T){let I=(this.to-this.from)*S(this.options.step,.2);this.updatePosition(this.from+I,this.to+I),w(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:T})}buttonToMinClick(T){let I=v(this.to-this.from)*S(this.options.step,.2);this.updatePosition(v(this.from-I),v(this.to-I)),w(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:T})}cursorToScrollbarPosition(T){let I=this.options,N=I.minWidth>this.calculatedWidth?I.minWidth:0;return{chartX:(T.chartX-this.x-this.xOffset)/(this.barWidth-N),chartY:(T.chartY-this.y-this.yOffset)/(this.barWidth-N)}}destroy(){let T=this,I=T.chart.scroller;T.removeEvents(),["track","scrollbarRifles","scrollbar","scrollbarGroup","group"].forEach(function(N){T[N]&&T[N].destroy&&(T[N]=T[N].destroy())}),I&&T===I.scrollbar&&(I.scrollbar=null,_(I.scrollbarButtons))}drawScrollbarButton(T){let I=this.renderer,N=this.scrollbarButtons,q=this.options,Z=this.size,X=I.g().add(this.group);if(N.push(X),q.buttonsEnabled){let O=I.rect().addClass("highcharts-scrollbar-button").add(X);this.chart.styledMode||O.attr({stroke:q.buttonBorderColor,"stroke-width":q.buttonBorderWidth,fill:q.buttonBackgroundColor}),O.attr(O.crisp({x:-.5,y:-.5,width:Z,height:Z,r:q.buttonBorderRadius},O.strokeWidth()));let V=I.path(P.swapXY([["M",Z/2+(T?-1:1),Z/2-3],["L",Z/2+(T?-1:1),Z/2+3],["L",Z/2+(T?2:-2),Z/2]],q.vertical)).addClass("highcharts-scrollbar-arrow").add(N[T]);this.chart.styledMode||V.attr({fill:q.buttonArrowColor})}}init(T,I,N){this.scrollbarButtons=[],this.renderer=T,this.userOptions=I,this.options=k(n,m.scrollbar,I),this.options.margin=S(this.options.margin,10),this.chart=N,this.size=S(this.options.size,this.options.height),I.enabled&&(this.render(),this.addEvents())}mouseDownHandler(T){var q;let I=((q=this.chart.pointer)==null?void 0:q.normalize(T))||T,N=this.cursorToScrollbarPosition(I);this.chartX=N.chartX,this.chartY=N.chartY,this.initPositions=[this.from,this.to],this.grabbedCenter=!0}mouseMoveHandler(T){var X;let I,N=((X=this.chart.pointer)==null?void 0:X.normalize(T))||T,q=this.options.vertical?"chartY":"chartX",Z=this.initPositions||[];this.grabbedCenter&&(!T.touches||T.touches[0][q]!==0)&&(I=this.cursorToScrollbarPosition(N)[q]-this[q],this.hasDragged=!0,this.updatePosition(Z[0]+I,Z[1]+I),this.hasDragged&&w(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:T.type,DOMEvent:T}))}mouseUpHandler(T){this.hasDragged&&w(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:T.type,DOMEvent:T}),this.grabbedCenter=this.hasDragged=this.chartX=this.chartY=null}position(T,I,N,q){let{buttonsEnabled:Z,margin:X=0,vertical:O}=this.options,V=this.rendered?"animate":"attr",$=q,L=0;this.group.show(),this.x=T,this.y=I+this.trackBorderWidth,this.width=N,this.height=q,this.xOffset=$,this.yOffset=L,O?(this.width=this.yOffset=N=L=this.size,this.xOffset=$=0,this.yOffset=L=Z?this.size:0,this.barWidth=q-(Z?2*N:0),this.x=T+=X):(this.height=q=this.size,this.xOffset=$=Z?this.size:0,this.barWidth=N-(Z?2*q:0),this.y=this.y+X),this.group[V]({translateX:T,translateY:this.y}),this.track[V]({width:N,height:q}),this.scrollbarButtons[1][V]({translateX:O?0:N-$,translateY:O?q-L:0})}removeEvents(){this._events.forEach(function(T){x.apply(null,T)}),this._events.length=0}render(){let T=this.renderer,I=this.options,N=this.size,q=this.chart.styledMode,Z=T.g("scrollbar").attr({zIndex:I.zIndex}).hide().add();this.group=Z,this.track=T.rect().addClass("highcharts-scrollbar-track").attr({r:I.trackBorderRadius||0,height:N,width:N}).add(Z),q||this.track.attr({fill:I.trackBackgroundColor,stroke:I.trackBorderColor,"stroke-width":I.trackBorderWidth});let X=this.trackBorderWidth=this.track.strokeWidth();this.track.attr({x:-y(0,X),y:-y(0,X)}),this.scrollbarGroup=T.g().add(Z),this.scrollbar=T.rect().addClass("highcharts-scrollbar-thumb").attr({height:N-X,width:N-X,r:I.barBorderRadius||0}).add(this.scrollbarGroup),this.scrollbarRifles=T.path(P.swapXY([["M",-3,N/4],["L",-3,2*N/3],["M",0,N/4],["L",0,2*N/3],["M",3,N/4],["L",3,2*N/3]],I.vertical)).addClass("highcharts-scrollbar-rifles").add(this.scrollbarGroup),q||(this.scrollbar.attr({fill:I.barBackgroundColor,stroke:I.barBorderColor,"stroke-width":I.barBorderWidth}),this.scrollbarRifles.attr({stroke:I.rifleColor,"stroke-width":1})),this.scrollbarStrokeWidth=this.scrollbar.strokeWidth(),this.scrollbarGroup.translate(-y(0,this.scrollbarStrokeWidth),-y(0,this.scrollbarStrokeWidth)),this.drawScrollbarButton(0),this.drawScrollbarButton(1)}setRange(T,I){let N,q,Z=this.options,X=Z.vertical,O=Z.minWidth,V=this.barWidth,$=!this.rendered||this.hasDragged||this.chart.navigator&&this.chart.navigator.hasDragged?"attr":"animate";if(!C(V))return;let L=V*Math.min(I,1);N=Math.ceil(V*(T=Math.max(T,0))),this.calculatedWidth=q=v(L-N),q<O&&(N=(V-O+q)*T,q=O);let R=Math.floor(N+this.xOffset+this.yOffset),G=q/2-.5;this.from=T,this.to=I,X?(this.scrollbarGroup[$]({translateY:R}),this.scrollbar[$]({height:q}),this.scrollbarRifles[$]({translateY:G}),this.scrollbarTop=R,this.scrollbarLeft=0):(this.scrollbarGroup[$]({translateX:R}),this.scrollbar[$]({width:q}),this.scrollbarRifles[$]({translateX:G}),this.scrollbarLeft=R,this.scrollbarTop=0),q<=12?this.scrollbarRifles.hide():this.scrollbarRifles.show(),Z.showFull===!1&&(T<=0&&I>=1?this.group.hide():this.group.show()),this.rendered=!0}shouldUpdateExtremes(T){return S(this.options.liveRedraw,l.svg&&!l.isTouchDevice&&!this.chart.boosted)||T==="mouseup"||T==="touchend"||!C(T)}trackClick(T){var X;let I=((X=this.chart.pointer)==null?void 0:X.normalize(T))||T,N=this.to-this.from,q=this.y+this.scrollbarTop,Z=this.x+this.scrollbarLeft;this.options.vertical&&I.chartY>q||!this.options.vertical&&I.chartX>Z?this.updatePosition(this.from+N,this.to+N):this.updatePosition(this.from-N,this.to-N),w(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:T})}update(T){this.destroy(),this.init(this.chart.renderer,k(!0,this.options,T),this.chart)}updatePosition(T,I){I>1&&(T=v(1-v(I-T)),I=1),T<0&&(I=v(I-T),T=0),this.from=T,this.to=I}}return P.defaultOptions=n,m.scrollbar=k(!0,P.defaultOptions,m.scrollbar),P}),r(t,"Stock/Navigator/Navigator.js",[t["Core/Axis/Axis.js"],t["Stock/Navigator/ChartNavigatorComposition.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Axis/NavigatorAxisComposition.js"],t["Stock/Navigator/NavigatorComposition.js"],t["Stock/Scrollbar/Scrollbar.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(s,l,u,n,p,m,g,v,y){let{defaultOptions:C}=u,{isTouchDevice:_}=n,{prototype:{symbols:w}}=v,{addEvent:k,clamp:S,correctFloat:x,defined:P,destroyObjectProperties:D,erase:T,extend:I,find:N,fireEvent:q,isArray:Z,isNumber:X,merge:O,pick:V,removeEvent:$,splat:L}=y;function R(U,...B){let H=[].filter.call(B,X);if(H.length)return Math[U].apply(0,H)}class G{static compose(B,H,W){l.compose(B,G),m.compose(B,H,W)}constructor(B){this.isDirty=!1,this.scrollbarHeight=0,this.init(B)}drawHandle(B,H,W,re){let de=this.navigatorOptions.handles.height;this.handles[H][re](W?{translateX:Math.round(this.left+this.height/2),translateY:Math.round(this.top+parseInt(B,10)+.5-de)}:{translateX:Math.round(this.left+parseInt(B,10)),translateY:Math.round(this.top+this.height/2-de/2-1)})}drawOutline(B,H,W,re){let de=this.navigatorOptions.maskInside,ie=this.outline.strokeWidth(),oe=ie/2,Ee=ie%2/2,xe=this.scrollButtonSize,Se=this.size,K=this.top,Q=this.height,ae=K-oe,_e=K+Q,J=this.left,ne,ce;W?(ne=K+H+Ee,H=K+B+Ee,ce=[["M",J+Q,K-xe-Ee],["L",J+Q,ne],["L",J,ne],["M",J,H],["L",J+Q,H],["L",J+Q,K+Se+xe]],de&&ce.push(["M",J+Q,ne-oe],["L",J+Q,H+oe])):(J-=xe,B+=J+xe-Ee,H+=J+xe-Ee,ce=[["M",J,ae],["L",B,ae],["L",B,_e],["M",H,_e],["L",H,ae],["L",J+Se+2*xe,ae]],de&&ce.push(["M",B-oe,ae],["L",H+oe,ae])),this.outline[re]({d:ce})}drawMasks(B,H,W,re){let de,ie,oe,Ee,xe=this.left,Se=this.top,K=this.height;W?(oe=[xe,xe,xe],Ee=[Se,Se+B,Se+H],ie=[K,K,K],de=[B,H-B,this.size-H]):(oe=[xe,xe+B,xe+H],Ee=[Se,Se,Se],ie=[B,H-B,this.size-H],de=[K,K,K]),this.shades.forEach((Q,ae)=>{Q[re]({x:oe[ae],y:Ee[ae],width:ie[ae],height:de[ae]})})}renderElements(){var xe;let B=this,H=B.navigatorOptions,W=H.maskInside,re=B.chart,de=re.inverted,ie=re.renderer,oe={cursor:de?"ns-resize":"ew-resize"},Ee=B.navigatorGroup??(B.navigatorGroup=ie.g("navigator").attr({zIndex:8,visibility:"hidden"}).add());if([!W,W,!W].forEach((Se,K)=>{let Q=B.shades[K]??(B.shades[K]=ie.rect().addClass("highcharts-navigator-mask"+(K===1?"-inside":"-outside")).add(Ee));re.styledMode||(Q.attr({fill:Se?H.maskFill:"rgba(0,0,0,0)"}),K===1&&Q.css(oe))}),B.outline||(B.outline=ie.path().addClass("highcharts-navigator-outline").add(Ee)),re.styledMode||B.outline.attr({"stroke-width":H.outlineWidth,stroke:H.outlineColor}),(xe=H.handles)==null?void 0:xe.enabled){let Se=H.handles,{height:K,width:Q}=Se;[0,1].forEach(ae=>{var J;let _e=Se.symbols[ae];if(B.handles[ae]&&B.handles[ae].symbolUrl===_e){if(!B.handles[ae].isImg&&B.handles[ae].symbolName!==_e){let ne=w[_e].call(w,-Q/2-1,0,Q,K);B.handles[ae].attr({d:ne}),B.handles[ae].symbolName=_e}}else(J=B.handles[ae])==null||J.destroy(),B.handles[ae]=ie.symbol(_e,-Q/2-1,0,Q,K,Se),B.handles[ae].attr({zIndex:7-ae}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][ae]).add(Ee),B.addMouseEvents();re.inverted&&B.handles[ae].attr({rotation:90,rotationOriginX:Math.floor(-Q/2),rotationOriginY:(K+Q)/2}),re.styledMode||B.handles[ae].attr({fill:Se.backgroundColor,stroke:Se.borderColor,"stroke-width":Se.lineWidth,width:Se.width,height:Se.height,x:-Q/2-1,y:0}).css(oe)})}}update(B,H=!1){var de;let W=this.chart,re=W.options.chart.inverted!==((de=W.scrollbar)==null?void 0:de.options.vertical);if(O(!0,W.options.navigator,B),this.navigatorOptions=W.options.navigator||{},this.setOpposite(),P(B.enabled)||re)return this.destroy(),this.navigatorEnabled=B.enabled||this.navigatorEnabled,this.init(W);if(this.navigatorEnabled&&(this.isDirty=!0,B.adaptToUpdatedData===!1&&this.baseSeries.forEach(ie=>{$(ie,"updatedData",this.updatedDataHandler)},this),B.adaptToUpdatedData&&this.baseSeries.forEach(ie=>{ie.eventsToUnbind.push(k(ie,"updatedData",this.updatedDataHandler))},this),(B.series||B.baseSeries)&&this.setBaseSeries(void 0,!1),B.height||B.xAxis||B.yAxis)){this.height=B.height??this.height;let ie=this.getXAxisOffsets();this.xAxis.update({...B.xAxis,offsets:ie,[W.inverted?"width":"height"]:this.height,[W.inverted?"height":"width"]:void 0},!1),this.yAxis.update({...B.yAxis,[W.inverted?"width":"height"]:this.height},!1)}H&&W.redraw()}render(B,H,W,re){let de=this.chart,ie=this.xAxis,oe=ie.pointRange||0,Ee=ie.navigatorAxis.fake?de.xAxis[0]:ie,xe=this.navigatorEnabled,Se=this.rendered,K=de.inverted,Q=de.xAxis[0].minRange,ae=de.xAxis[0].options.maxRange,_e=this.scrollButtonSize,J,ne,ce,ye=this.scrollbarHeight,we,ze;if(this.hasDragged&&!P(W))return;if(this.isDirty&&this.renderElements(),B=x(B-oe/2),H=x(H+oe/2),!X(B)||!X(H)){if(!Se)return;W=0,re=V(ie.width,Ee.width)}this.left=V(ie.left,de.plotLeft+_e+(K?de.plotWidth:0));let Ce=this.size=we=V(ie.len,(K?de.plotHeight:de.plotWidth)-2*_e);J=K?ye:we+2*_e,W=V(W,ie.toPixels(B,!0)),re=V(re,ie.toPixels(H,!0)),X(W)&&Math.abs(W)!==1/0||(W=0,re=J);let Ie=ie.toValue(W,!0),Fe=ie.toValue(re,!0),Ge=Math.abs(x(Fe-Ie));Ge<Q?this.grabbedLeft?W=ie.toPixels(Fe-Q-oe,!0):this.grabbedRight&&(re=ie.toPixels(Ie+Q+oe,!0)):P(ae)&&x(Ge-oe)>ae&&(this.grabbedLeft?W=ie.toPixels(Fe-ae-oe,!0):this.grabbedRight&&(re=ie.toPixels(Ie+ae+oe,!0))),this.zoomedMax=S(Math.max(W,re),0,Ce),this.zoomedMin=S(this.fixedWidth?this.zoomedMax-this.fixedWidth:Math.min(W,re),0,Ce),this.range=this.zoomedMax-this.zoomedMin,Ce=Math.round(this.zoomedMax);let ke=Math.round(this.zoomedMin);xe&&(this.navigatorGroup.attr({visibility:"inherit"}),ze=Se&&!this.hasDragged?"animate":"attr",this.drawMasks(ke,Ce,K,ze),this.drawOutline(ke,Ce,K,ze),this.navigatorOptions.handles.enabled&&(this.drawHandle(ke,0,K,ze),this.drawHandle(Ce,1,K,ze))),this.scrollbar&&(K?(ce=this.top-_e,ne=this.left-ye+(xe||!Ee.opposite?0:(Ee.titleOffset||0)+Ee.axisTitleMargin),ye=we+2*_e):(ce=this.top+(xe?this.height:-ye),ne=this.left-_e),this.scrollbar.position(ne,ce,J,ye),this.scrollbar.setRange(this.zoomedMin/(we||1),this.zoomedMax/(we||1))),this.rendered=!0,this.isDirty=!1,q(this,"afterRender")}addMouseEvents(){let B=this,H=B.chart,W=H.container,re=[],de,ie;B.mouseMoveHandler=de=function(oe){B.onMouseMove(oe)},B.mouseUpHandler=ie=function(oe){B.onMouseUp(oe)},(re=B.getPartsEvents("mousedown")).push(k(H.renderTo,"mousemove",de),k(W.ownerDocument,"mouseup",ie),k(H.renderTo,"touchmove",de),k(W.ownerDocument,"touchend",ie)),re.concat(B.getPartsEvents("touchstart")),B.eventsToUnbind=re,B.series&&B.series[0]&&re.push(k(B.series[0].xAxis,"foundExtremes",function(){H.navigator.modifyNavigatorAxisExtremes()}))}getPartsEvents(B){let H=this,W=[];return["shades","handles"].forEach(function(re){H[re].forEach(function(de,ie){W.push(k(de.element,B,function(oe){H[re+"Mousedown"](oe,ie)}))})}),W}shadesMousedown(B,H){var _e;B=((_e=this.chart.pointer)==null?void 0:_e.normalize(B))||B;let W=this.chart,re=this.xAxis,de=this.zoomedMin,ie=this.size,oe=this.range,Ee=this.left,xe=B.chartX,Se,K,Q,ae;W.inverted&&(xe=B.chartY,Ee=this.top),H===1?(this.grabbedCenter=xe,this.fixedWidth=oe,this.dragOffset=xe-de):(ae=xe-Ee-oe/2,H===0?ae=Math.max(0,ae):H===2&&ae+oe>=ie&&(ae=ie-oe,this.reversedExtremes?(ae-=oe,K=this.getUnionExtremes().dataMin):Se=this.getUnionExtremes().dataMax),ae!==de&&(this.fixedWidth=oe,P((Q=re.navigatorAxis.toFixedRange(ae,ae+oe,K,Se)).min)&&q(this,"setRange",{min:Math.min(Q.min,Q.max),max:Math.max(Q.min,Q.max),redraw:!0,eventArguments:{trigger:"navigator"}})))}handlesMousedown(B,H){var ie;B=((ie=this.chart.pointer)==null?void 0:ie.normalize(B))||B;let W=this.chart,re=W.xAxis[0],de=this.reversedExtremes;H===0?(this.grabbedLeft=!0,this.otherHandlePos=this.zoomedMax,this.fixedExtreme=de?re.min:re.max):(this.grabbedRight=!0,this.otherHandlePos=this.zoomedMin,this.fixedExtreme=de?re.max:re.min),W.setFixedRange(void 0)}onMouseMove(B){var Se;let H=this,W=H.chart,re=H.navigatorSize,de=H.range,ie=H.dragOffset,oe=W.inverted,Ee=H.left,xe;(!B.touches||B.touches[0].pageX!==0)&&(xe=(B=((Se=W.pointer)==null?void 0:Se.normalize(B))||B).chartX,oe&&(Ee=H.top,xe=B.chartY),H.grabbedLeft?(H.hasDragged=!0,H.render(0,0,xe-Ee,H.otherHandlePos)):H.grabbedRight?(H.hasDragged=!0,H.render(0,0,H.otherHandlePos,xe-Ee)):H.grabbedCenter&&(H.hasDragged=!0,xe<ie?xe=ie:xe>re+ie-de&&(xe=re+ie-de),H.render(0,0,xe-ie,xe-ie+de)),H.hasDragged&&H.scrollbar&&V(H.scrollbar.options.liveRedraw,!_&&!this.chart.boosted)&&(B.DOMType=B.type,setTimeout(function(){H.onMouseUp(B)},0)))}onMouseUp(B){let H,W,re,de,ie,oe,Ee=this.chart,xe=this.xAxis,Se=this.scrollbar,K=B.DOMEvent||B,Q=Ee.inverted,ae=this.rendered&&!this.hasDragged?"animate":"attr";(this.hasDragged&&(!Se||!Se.hasDragged)||B.trigger==="scrollbar")&&(re=this.getUnionExtremes(),this.zoomedMin===this.otherHandlePos?de=this.fixedExtreme:this.zoomedMax===this.otherHandlePos&&(ie=this.fixedExtreme),this.zoomedMax===this.size&&(ie=this.reversedExtremes?re.dataMin:re.dataMax),this.zoomedMin===0&&(de=this.reversedExtremes?re.dataMax:re.dataMin),P((oe=xe.navigatorAxis.toFixedRange(this.zoomedMin,this.zoomedMax,de,ie)).min)&&q(this,"setRange",{min:Math.min(oe.min,oe.max),max:Math.max(oe.min,oe.max),redraw:!0,animation:!this.hasDragged&&null,eventArguments:{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:K}})),B.DOMType!=="mousemove"&&B.DOMType!=="touchmove"&&(this.grabbedLeft=this.grabbedRight=this.grabbedCenter=this.fixedWidth=this.fixedExtreme=this.otherHandlePos=this.hasDragged=this.dragOffset=null),this.navigatorEnabled&&X(this.zoomedMin)&&X(this.zoomedMax)&&(W=Math.round(this.zoomedMin),H=Math.round(this.zoomedMax),this.shades&&this.drawMasks(W,H,Q,ae),this.outline&&this.drawOutline(W,H,Q,ae),this.navigatorOptions.handles.enabled&&Object.keys(this.handles).length===this.handles.length&&(this.drawHandle(W,0,Q,ae),this.drawHandle(H,1,Q,ae)))}removeEvents(){this.eventsToUnbind&&(this.eventsToUnbind.forEach(function(B){B()}),this.eventsToUnbind=void 0),this.removeBaseSeriesEvents()}removeBaseSeriesEvents(){let B=this.baseSeries||[];this.navigatorEnabled&&B[0]&&(this.navigatorOptions.adaptToUpdatedData!==!1&&B.forEach(function(H){$(H,"updatedData",this.updatedDataHandler)},this),B[0].xAxis&&$(B[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))}getXAxisOffsets(){return this.chart.inverted?[this.scrollButtonSize,0,-this.scrollButtonSize,0]:[0,-this.scrollButtonSize,0,this.scrollButtonSize]}init(B){var J;let H=B.options,W=H.navigator||{},re=W.enabled,de=H.scrollbar||{},ie=de.enabled,oe=re&&W.height||0,Ee=ie&&de.height||0,xe=de.buttonsEnabled&&Ee||0;this.handles=[],this.shades=[],this.chart=B,this.setBaseSeries(),this.height=oe,this.scrollbarHeight=Ee,this.scrollButtonSize=xe,this.scrollbarEnabled=ie,this.navigatorEnabled=re,this.navigatorOptions=W,this.scrollbarOptions=de,this.setOpposite();let Se=this,K=Se.baseSeries,Q=B.xAxis.length,ae=B.yAxis.length,_e=K&&K[0]&&K[0].xAxis||B.xAxis[0]||{options:{}};if(B.isDirtyBox=!0,Se.navigatorEnabled){let ne=this.getXAxisOffsets();Se.xAxis=new s(B,O({breaks:_e.options.breaks,ordinal:_e.options.ordinal,overscroll:_e.options.overscroll},W.xAxis,{type:"datetime",yAxis:(J=W.yAxis)==null?void 0:J.id,index:Q,isInternal:!0,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:_e.options.ordinal?0:_e.options.minPadding,maxPadding:_e.options.ordinal?0:_e.options.maxPadding,zoomEnabled:!1},B.inverted?{offsets:ne,width:oe}:{offsets:ne,height:oe}),"xAxis"),Se.yAxis=new s(B,O(W.yAxis,{alignTicks:!1,offset:0,index:ae,isInternal:!0,reversed:V(W.yAxis&&W.yAxis.reversed,B.yAxis[0]&&B.yAxis[0].reversed,!1),zoomEnabled:!1},B.inverted?{width:oe}:{height:oe}),"yAxis"),K||W.series.data?Se.updateNavigatorSeries(!1):B.series.length===0&&(Se.unbindRedraw=k(B,"beforeRedraw",function(){B.series.length>0&&!Se.series&&(Se.setBaseSeries(),Se.unbindRedraw())})),Se.reversedExtremes=B.inverted&&!Se.xAxis.reversed||!B.inverted&&Se.xAxis.reversed,Se.renderElements(),Se.addMouseEvents()}else Se.xAxis={chart:B,navigatorAxis:{fake:!0},translate:function(ne,ce){let ye=B.xAxis[0],we=ye.getExtremes(),ze=ye.len-2*xe,Ce=R("min",ye.options.min,we.dataMin),Ie=R("max",ye.options.max,we.dataMax)-Ce;return ce?ne*Ie/ze+Ce:ze*(ne-Ce)/Ie},toPixels:function(ne){return this.translate(ne)},toValue:function(ne){return this.translate(ne,!0)}},Se.xAxis.navigatorAxis.axis=Se.xAxis,Se.xAxis.navigatorAxis.toFixedRange=p.prototype.toFixedRange.bind(Se.xAxis.navigatorAxis);if(B.options.scrollbar.enabled){let ne=O(B.options.scrollbar,{vertical:B.inverted});!X(ne.margin)&&Se.navigatorEnabled&&(ne.margin=B.inverted?-3:3),B.scrollbar=Se.scrollbar=new g(B.renderer,ne,B),k(Se.scrollbar,"changed",function(ce){let ye=Se.size,we=ye*this.to,ze=ye*this.from;Se.hasDragged=Se.scrollbar.hasDragged,Se.render(0,0,ze,we),this.shouldUpdateExtremes(ce.DOMType)&&setTimeout(function(){Se.onMouseUp(ce)})})}Se.addBaseSeriesEvents(),Se.addChartEvents()}setOpposite(){let B=this.navigatorOptions,H=this.navigatorEnabled,W=this.chart;this.opposite=V(B.opposite,!!(!H&&W.inverted))}getUnionExtremes(B){let H,W=this.chart.xAxis[0],re=this.xAxis,de=re.options,ie=W.options;return B&&W.dataMin===null||(H={dataMin:V(de&&de.min,R("min",ie.min,W.dataMin,re.dataMin,re.min)),dataMax:V(de&&de.max,R("max",ie.max,W.dataMax,re.dataMax,re.max))}),H}setBaseSeries(B,H){let W=this.chart,re=this.baseSeries=[];B=B||W.options&&W.options.navigator.baseSeries||(W.series.length?N(W.series,de=>!de.options.isInternal).index:0),(W.series||[]).forEach((de,ie)=>{!de.options.isInternal&&(de.options.showInNavigator||(ie===B||de.options.id===B)&&de.options.showInNavigator!==!1)&&re.push(de)}),this.xAxis&&!this.xAxis.navigatorAxis.fake&&this.updateNavigatorSeries(!0,H)}updateNavigatorSeries(B,H){var Q,ae;let W=this,re=W.chart,de=W.baseSeries,ie={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:(Q=this.navigatorOptions.xAxis)==null?void 0:Q.id,yAxis:(ae=this.navigatorOptions.yAxis)==null?void 0:ae.id,showInLegend:!1,stacking:void 0,isInternal:!0,states:{inactive:{opacity:1}}},oe=W.series=(W.series||[]).filter(_e=>{let J=_e.baseSeries;return!(0>de.indexOf(J))||(J&&($(J,"updatedData",W.updatedDataHandler),delete J.navigatorSeries),_e.chart&&_e.destroy(),!1)}),Ee,xe,Se=W.navigatorOptions.series,K;de&&de.length&&de.forEach(_e=>{let J=_e.navigatorSeries,ne=I({color:_e.color,visible:_e.visible},Z(Se)?C.navigator.series:Se);if(J&&W.navigatorOptions.adaptToUpdatedData===!1)return;ie.name="Navigator "+de.length,K=(Ee=_e.options||{}).navigatorOptions||{},ne.dataLabels=L(ne.dataLabels),(xe=O(Ee,ie,ne,K)).pointRange=V(ne.pointRange,K.pointRange,C.plotOptions[xe.type||"line"].pointRange);let ce=K.data||ne.data;W.hasNavigatorData=W.hasNavigatorData||!!ce,xe.data=ce||Ee.data&&Ee.data.slice(0),J&&J.options?J.update(xe,H):(_e.navigatorSeries=re.initSeries(xe),re.setSortedData(),_e.navigatorSeries.baseSeries=_e,oe.push(_e.navigatorSeries))}),(Se.data&&!(de&&de.length)||Z(Se))&&(W.hasNavigatorData=!1,(Se=L(Se)).forEach((_e,J)=>{ie.name="Navigator "+(oe.length+1),(xe=O(C.navigator.series,{color:re.series[J]&&!re.series[J].options.isInternal&&re.series[J].color||re.options.colors[J]||re.options.colors[0]},ie,_e)).data=_e.data,xe.data&&(W.hasNavigatorData=!0,oe.push(re.initSeries(xe)))})),B&&this.addBaseSeriesEvents()}addBaseSeriesEvents(){let B=this,H=B.baseSeries||[];H[0]&&H[0].xAxis&&H[0].eventsToUnbind.push(k(H[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes)),H.forEach(W=>{W.eventsToUnbind.push(k(W,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)})),W.eventsToUnbind.push(k(W,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)})),this.navigatorOptions.adaptToUpdatedData!==!1&&W.xAxis&&W.eventsToUnbind.push(k(W,"updatedData",this.updatedDataHandler)),W.eventsToUnbind.push(k(W,"remove",function(){T(H,W),this.navigatorSeries&&(T(B.series,this.navigatorSeries),P(this.navigatorSeries.options)&&this.navigatorSeries.remove(!1),delete this.navigatorSeries)}))})}getBaseSeriesMin(B){return this.baseSeries.reduce(function(H,W){return Math.min(H,W.xData&&W.xData.length?W.xData[0]:H)},B)}modifyNavigatorAxisExtremes(){let B=this.xAxis;if(B.getExtremes!==void 0){let H=this.getUnionExtremes(!0);H&&(H.dataMin!==B.min||H.dataMax!==B.max)&&(B.min=H.dataMin,B.max=H.dataMax)}}modifyBaseAxisExtremes(){var J;let B,H,W=this.chart.navigator,re=this.getExtremes(),de=re.min,ie=re.max,oe=re.dataMin,Ee=re.dataMax,xe=ie-de,Se=W.stickToMin,K=W.stickToMax,Q=V((J=this.ordinal)==null?void 0:J.convertOverscroll(this.options.overscroll),0),ae=W.series&&W.series[0],_e=!!this.setExtremes;!(this.eventArgs&&this.eventArgs.trigger==="rangeSelectorButton")&&(Se&&(B=(H=oe)+xe),K&&(B=Ee+Q,Se||(H=Math.max(oe,B-xe,W.getBaseSeriesMin(ae&&ae.xData?ae.xData[0]:-Number.MAX_VALUE)))),_e&&(Se||K)&&X(H)&&(this.min=this.userMin=H,this.max=this.userMax=B)),W.stickToMin=W.stickToMax=null}updatedDataHandler(){let B=this.chart.navigator,H=this.navigatorSeries,W=B.reversedExtremes?Math.round(B.zoomedMin)===0:Math.round(B.zoomedMax)>=Math.round(B.size);B.stickToMax=V(this.chart.options.navigator&&this.chart.options.navigator.stickToMax,W),B.stickToMin=B.shouldStickToMin(this,B),H&&!B.hasNavigatorData&&(H.options.pointStart=this.xData[0],H.setData(this.options.data,!1,null,!1))}shouldStickToMin(B,H){let W=H.getBaseSeriesMin(B.xData[0]),re=B.xAxis,de=re.max,ie=re.min,oe=re.options.range;return!!(X(de)&&X(ie))&&(oe&&de-W>0?de-W<oe:ie<=W)}addChartEvents(){this.eventsToUnbind||(this.eventsToUnbind=[]),this.eventsToUnbind.push(k(this.chart,"redraw",function(){let B=this.navigator,H=B&&(B.baseSeries&&B.baseSeries[0]&&B.baseSeries[0].xAxis||this.xAxis[0]);H&&B.render(H.min,H.max)}),k(this.chart,"getMargins",function(){let B=this.navigator,H=B.opposite?"plotTop":"marginBottom";this.inverted&&(H=B.opposite?"marginRight":"plotLeft"),this[H]=(this[H]||0)+(B.navigatorEnabled||!this.inverted?B.height+B.scrollbarHeight:0)+B.navigatorOptions.margin}),k(G,"setRange",function(B){this.chart.xAxis[0].setExtremes(B.min,B.max,B.redraw,B.animation,B.eventArguments)}))}destroy(){this.removeEvents(),this.xAxis&&(T(this.chart.xAxis,this.xAxis),T(this.chart.axes,this.xAxis)),this.yAxis&&(T(this.chart.yAxis,this.yAxis),T(this.chart.axes,this.yAxis)),(this.series||[]).forEach(B=>{B.destroy&&B.destroy()}),["series","xAxis","yAxis","shades","outline","scrollbarTrack","scrollbarRifles","scrollbarGroup","scrollbar","navigatorGroup","rendered"].forEach(B=>{this[B]&&this[B].destroy&&this[B].destroy(),this[B]=null}),[this.handles].forEach(B=>{D(B)}),this.navigatorEnabled=!1}}return G}),r(t,"Accessibility/Components/NavigatorComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Stock/Navigator/Navigator.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Templating.js"],t["Core/Utilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/Utils/ChartUtilities.js"]],function(s,l,u,n,p,m,g,v,y){let{animObject:C}=p,{format:_}=m,{clamp:w,pick:k,syncTimeout:S}=g,{getFakeMouseEvent:x}=v,{getAxisRangeDescription:P,fireEventOnWrappedOrUnwrappedElement:D}=y;return class extends s{init(){let T=this.chart,I=this;this.announcer=new l(T,"polite"),this.addEvent(n,"afterRender",function(){this.chart===I.chart&&this.chart.renderer&&S(()=>{I.proxyProvider.updateGroupProxyElementPositions("navigator"),I.updateHandleValues()},C(k(this.chart.renderer.globalAnimation,!0)).duration)})}onChartUpdate(){var q,Z,X;let T=this.chart,I=T.options,N=I.navigator;if(N.enabled&&((q=N.accessibility)!=null&&q.enabled)){let O=I.accessibility.landmarkVerbosity,V=(Z=I.lang.accessibility)==null?void 0:Z.navigator.groupLabel;this.proxyProvider.removeGroup("navigator"),this.proxyProvider.addGroup("navigator","div",{role:O==="all"?"region":"group","aria-label":_(V,{chart:T},T)});let $=(X=I.lang.accessibility)==null?void 0:X.navigator.handleLabel;[0,1].forEach(L=>{let R=this.getHandleByIx(L);if(R){let G=this.proxyProvider.addProxyElement("navigator",{click:R},"input",{type:"range","aria-label":_($,{handleIx:L,chart:T},T)});this[L?"maxHandleProxy":"minHandleProxy"]=G.innerElement,G.innerElement.style.pointerEvents="none",G.innerElement.oninput=()=>this.updateNavigator()}}),this.updateHandleValues()}else this.proxyProvider.removeGroup("navigator")}getNavigatorHandleNavigation(T){let I=this,N=this.chart,q=T?this.maxHandleProxy:this.minHandleProxy,Z=this.keyCodes;return new u(N,{keyCodeMap:[[[Z.left,Z.right,Z.up,Z.down],function(X){if(q){let O=X===Z.left||X===Z.up?-1:1;q.value=""+w(parseFloat(q.value)+O,0,100),I.updateNavigator(()=>{let V=I.getHandleByIx(T);V&&N.setFocusToElement(V,q)})}return this.response.success}]],init:()=>{N.setFocusToElement(this.getHandleByIx(T),q)},validate:()=>{var X;return!!(this.getHandleByIx(T)&&q&&((X=N.options.navigator.accessibility)!=null&&X.enabled))}})}getKeyboardNavigation(){return[this.getNavigatorHandleNavigation(0),this.getNavigatorHandleNavigation(1)]}destroy(){this.updateNavigatorThrottleTimer&&clearTimeout(this.updateNavigatorThrottleTimer),this.proxyProvider.removeGroup("navigator"),this.announcer&&this.announcer.destroy()}updateHandleValues(){let T=this.chart.navigator;if(T&&this.minHandleProxy&&this.maxHandleProxy){let I=T.size;this.minHandleProxy.value=""+Math.round(T.zoomedMin/I*100),this.maxHandleProxy.value=""+Math.round(T.zoomedMax/I*100)}}getHandleByIx(T){let I=this.chart.navigator;return I&&I.handles&&I.handles[T]}updateNavigator(T){this.updateNavigatorThrottleTimer&&clearTimeout(this.updateNavigatorThrottleTimer),this.updateNavigatorThrottleTimer=setTimeout((I=>{var X;let N=this.chart,{navigator:q,pointer:Z}=N;if(q&&Z&&this.minHandleProxy&&this.maxHandleProxy){let O=Z.getChartPosition(),V=parseFloat(this.minHandleProxy.value)/100*q.size,$=parseFloat(this.maxHandleProxy.value)/100*q.size;[[0,"mousedown",q.zoomedMin],[0,"mousemove",V],[0,"mouseup",V],[1,"mousedown",q.zoomedMax],[1,"mousemove",$],[1,"mouseup",$]].forEach(([G,U,B])=>{var W;let H=(W=this.getHandleByIx(G))==null?void 0:W.element;H&&D(H,x(U,{x:O.left+q.left+B,y:O.top+q.top},H))}),I&&I();let L=(X=N.options.lang.accessibility)==null?void 0:X.navigator.changeAnnouncement,R=P(N.xAxis[0]);this.announcer.announce(_(L,{axisRangeDescription:R,chart:N},N))}}).bind(this,T),20)}}}),r(t,"Accessibility/Components/SeriesComponent/SeriesDescriber.js",[t["Accessibility/Components/AnnotationsA11y.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Core/Templating.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Core/Utilities.js"]],function(s,l,u,n,p){let{getPointAnnotationTexts:m}=s,{getAxisDescription:g,getSeriesFirstPointElement:v,getSeriesA11yElement:y,unhideChartElementFromAT:C}=l,{format:_,numberFormat:w}=u,{reverseChildNodes:k,stripHTMLTagsFromString:S}=n,{find:x,isNumber:P,isString:D,pick:T,defined:I}=p;function N(V){let $=V.chart.options.accessibility.series.pointDescriptionEnabledThreshold;return!!($!==!1&&V.points&&V.points.length>=+$)}function q(V,$){let L=V.series,R=L.chart,G=R.options.accessibility.point||{},U=L.options.accessibility&&L.options.accessibility.point||{},B=L.tooltipOptions||{},H=R.options.lang;return P($)?w($,U.valueDecimals||G.valueDecimals||B.valueDecimals||-1,H.decimalPoint,H.accessibility.thousandsSep||H.thousandsSep):$}function Z(V,$){let L=V[$];return V.chart.langFormat("accessibility.series."+$+"Description",{name:g(L),series:V})}function X(V){let $=V.series,L=$.chart.series.length>1||$.options.name,R=function(H){let W=H.series,re=W.chart,de=W.options.accessibility,ie=de&&de.point&&de.point.valueDescriptionFormat||re.options.accessibility.point.valueDescriptionFormat,oe=T(W.xAxis&&W.xAxis.options.accessibility&&W.xAxis.options.accessibility.enabled,!re.angular&&W.type!=="flowmap"),Ee=oe?function(xe){let Se=function(_e){let J=_e.series,ne=J.chart,ce=J.options.accessibility&&J.options.accessibility.point||{},ye=ne.options.accessibility.point||{},we=J.xAxis&&J.xAxis.dateTime;if(we){let ze=we.getXDateFormat(_e.x||0,ne.options.tooltip.dateTimeLabelFormats),Ce=ce.dateFormatter&&ce.dateFormatter(_e)||ye.dateFormatter&&ye.dateFormatter(_e)||ce.dateFormat||ye.dateFormat||ze;return ne.time.dateFormat(Ce,_e.x||0,void 0)}}(xe),K=(xe.series.xAxis||{}).categories&&I(xe.category)&&(""+xe.category).replace("<br/>"," "),Q=I(xe.id)&&0>(""+xe.id).indexOf("highcharts-"),ae="x, "+xe.x;return xe.name||Se||K||(Q?xe.id:ae)}(H):"";return _(ie,{point:H,index:I(H.index)?H.index+1:"",xDescription:Ee,value:function(xe){let Se=xe.series,K=Se.chart.options.accessibility.point||{},Q=Se.chart.options.accessibility&&Se.chart.options.accessibility.point||{},ae=Se.tooltipOptions||{},_e=Q.valuePrefix||K.valuePrefix||ae.valuePrefix||"",J=Q.valueSuffix||K.valueSuffix||ae.valueSuffix||"",ne=xe.value!==void 0?"value":"y",ce=q(xe,xe[ne]);return xe.isNull?Se.chart.langFormat("accessibility.series.nullPointValue",{point:xe}):Se.pointArrayMap?function(ye,we,ze){let Ce=we||"",Ie=ze||"",Fe=function(Ge){let ke=q(ye,T(ye[Ge],ye.options[Ge]));return ke!==void 0?Ge+": "+Ce+ke+Ie:ke};return ye.series.pointArrayMap.reduce(function(Ge,ke){let ge=Fe(ke);return ge?Ge+(Ge.length?", ":"")+ge:Ge},"")}(xe,_e,J):_e+ce+J}(H),separator:oe?", ":""},re)}(V),G=V.options&&V.options.accessibility&&V.options.accessibility.description,U=L?" "+$.name+".":"",B=function(H){let W=H.series.chart,re=m(H);return re.length?W.langFormat("accessibility.series.pointAnnotationsDescription",{point:H,annotations:re}):""}(V);return V.accessibility=V.accessibility||{},V.accessibility.valueDescription=R,R+(G?" "+G:"")+U+(B?" "+B:"")}function O(V){let $=V.chart,L=$.types||[],R=function(oe){let Ee=(oe.options.accessibility||{}).description;return Ee&&oe.chart.langFormat("accessibility.series.description",{description:Ee,series:oe})||""}(V),G=function(oe){return $[oe]&&$[oe].length>1&&V[oe]},U=V.index+1,B=Z(V,"xAxis"),H=Z(V,"yAxis"),W={seriesNumber:U,series:V,chart:$},re=L.length>1?"Combination":"",de=$.langFormat("accessibility.series.summary."+V.type+re,W)||$.langFormat("accessibility.series.summary.default"+re,W),ie=(G("yAxis")?" "+H+".":"")+(G("xAxis")?" "+B+".":"");return _(T(V.options.accessibility&&V.options.accessibility.descriptionFormat,$.options.accessibility.series.descriptionFormat,""),{seriesDescription:de,authorDescription:R?" "+R:"",axisDescription:ie,series:V,chart:$,seriesNumber:U},void 0)}return{defaultPointDescriptionFormatter:X,defaultSeriesDescriptionFormatter:O,describeSeries:function(V){let $=V.chart,L=v(V),R=y(V),G=$.is3d&&$.is3d();R&&(R.lastChild!==L||G||k(R),function(U){let B=function(re){let de=re.options.accessibility||{};return!N(re)&&!de.exposeAsGroupOnly}(U),H=function(re){let de=re.chart.options.accessibility.keyboardNavigation.seriesNavigation;return!!(re.points&&(re.points.length<+de.pointNavigationEnabledThreshold||de.pointNavigationEnabledThreshold===!1))}(U),W=U.chart.options.accessibility.point.describeNull;(B||H)&&U.points.forEach(re=>{let de=re.graphic&&re.graphic.element||function(oe){let Ee=oe.series,xe=Ee&&Ee.chart,Se=Ee&&Ee.is("sunburst"),K=oe.isNull,Q=xe&&xe.options.accessibility.point.describeNull;return K&&!Se&&Q}(re)&&function(oe){let Ee=oe.series,xe=function(_e){let J=_e.index;return _e.series&&_e.series.data&&I(J)&&x(_e.series.data,function(ne){return!!(ne&&ne.index!==void 0&&ne.index>J&&ne.graphic&&ne.graphic.element)})||null}(oe),Se=xe&&xe.graphic,K=Se?Se.parentGroup:Ee.graph||Ee.group,Q=xe?{x:T(oe.plotX,xe.plotX,0),y:T(oe.plotY,xe.plotY,0)}:{x:T(oe.plotX,0),y:T(oe.plotY,0)},ae=function(_e,J){let ne=_e.series.chart.renderer.rect(J.x,J.y,1,1);return ne.attr({class:"highcharts-a11y-mock-point",fill:"none",opacity:0,"fill-opacity":0,"stroke-opacity":0}),ne}(oe,Q);if(K&&K.element)return oe.graphic=ae,oe.hasMockGraphic=!0,ae.add(K),K.element.insertBefore(ae.element,Se?Se.element:null),ae.element}(re),ie=re.options&&re.options.accessibility&&re.options.accessibility.enabled===!1;if(de){if(re.isNull&&!W){de.setAttribute("aria-hidden",!0);return}de.setAttribute("tabindex","-1"),U.chart.styledMode||(de.style.outline="none"),B&&!ie?function(oe,Ee){var ae,_e,J;let xe=oe.series,Se=((ae=xe.options.accessibility)==null?void 0:ae.point)||{},K=xe.chart.options.accessibility.point||{},Q=S(D(Se.descriptionFormat)&&_(Se.descriptionFormat,oe,xe.chart)||((_e=Se.descriptionFormatter)==null?void 0:_e.call(Se,oe))||D(K.descriptionFormat)&&_(K.descriptionFormat,oe,xe.chart)||((J=K.descriptionFormatter)==null?void 0:J.call(K,oe))||X(oe),xe.chart.renderer.forExport);Ee.setAttribute("role","img"),Ee.setAttribute("aria-label",Q)}(re,de):de.setAttribute("aria-hidden",!0)}})}(V),C($,R),function(U){let B=U.chart,H=B.options.chart,W=H.options3d&&H.options3d.enabled,re=B.series.length>1,de=B.options.accessibility.series.describeSingleSeries,ie=(U.options.accessibility||{}).exposeAsGroupOnly;return!(W&&re)&&(re||de||ie||N(U))}(V)?function(U,B){let H=U.options.accessibility||{},W=U.chart.options.accessibility,re=W.landmarkVerbosity;H.exposeAsGroupOnly?B.setAttribute("role","img"):re==="all"?B.setAttribute("role","region"):B.setAttribute("role","group"),B.setAttribute("tabindex","-1"),U.chart.styledMode||(B.style.outline="none"),B.setAttribute("aria-label",S(W.series.descriptionFormatter&&W.series.descriptionFormatter(U)||O(U),U.chart.renderer.forExport))}(V,R):R.removeAttribute("aria-label"))}}}),r(t,"Accessibility/Components/SeriesComponent/NewDataAnnouncer.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(s,l,u,n,p,m){let{composed:g}=s,{addEvent:v,defined:y,pushUnique:C}=l,{getChartTitle:_}=n,{defaultPointDescriptionFormatter:w,defaultSeriesDescriptionFormatter:k}=m;function S(P){return!!P.options.accessibility.announceNewData.enabled}class x{constructor(D){this.dirty={allSeries:{}},this.lastAnnouncementTime=0,this.chart=D}init(){let D=this.chart,T=D.options.accessibility.announceNewData.interruptUser?"assertive":"polite";this.lastAnnouncementTime=0,this.dirty={allSeries:{}},this.eventProvider=new p,this.announcer=new u(D,T),this.addEventListeners()}destroy(){this.eventProvider.removeAddedEvents(),this.announcer.destroy()}addEventListeners(){let D=this,T=this.chart,I=this.eventProvider;I.addEvent(T,"afterApplyDrilldown",function(){D.lastAnnouncementTime=0}),I.addEvent(T,"afterAddSeries",function(N){D.onSeriesAdded(N.series)}),I.addEvent(T,"redraw",function(){D.announceDirtyData()})}onSeriesAdded(D){S(this.chart)&&(this.dirty.hasDirty=!0,this.dirty.allSeries[D.name+D.index]=D,this.dirty.newSeries=y(this.dirty.newSeries)?void 0:D)}announceDirtyData(){let D=this.chart,T=this;if(D.options.accessibility.announceNewData&&this.dirty.hasDirty){let I=this.dirty.newPoint;I&&(I=function(N){let q=N.series.data.filter(Z=>N.x===Z.x&&N.y===Z.y);return q.length===1?q[0]:N}(I)),this.queueAnnouncement(Object.keys(this.dirty.allSeries).map(N=>T.dirty.allSeries[N]),this.dirty.newSeries,I),this.dirty={allSeries:{}}}}queueAnnouncement(D,T,I){let N=this.chart.options.accessibility.announceNewData;if(N.enabled){let q=+new Date,Z=q-this.lastAnnouncementTime,X=Math.max(0,N.minAnnounceInterval-Z),O=function($,L){let R=($||[]).concat(L||[]).reduce((G,U)=>(G[U.name+U.index]=U,G),{});return Object.keys(R).map(G=>R[G])}(this.queuedAnnouncement&&this.queuedAnnouncement.series,D),V=this.buildAnnouncementMessage(O,T,I);V&&(this.queuedAnnouncement&&clearTimeout(this.queuedAnnouncementTimer),this.queuedAnnouncement={time:q,message:V,series:O},this.queuedAnnouncementTimer=setTimeout(()=>{this&&this.announcer&&(this.lastAnnouncementTime=+new Date,this.announcer.announce(this.queuedAnnouncement.message),delete this.queuedAnnouncement,delete this.queuedAnnouncementTimer)},X))}}buildAnnouncementMessage(D,T,I){let N=this.chart,q=N.options.accessibility.announceNewData;if(q.announcementFormatter){let V=q.announcementFormatter(D,T,I);if(V!==!1)return V.length?V:null}let Z=s.charts&&s.charts.length>1?"Multiple":"Single",X=T?"newSeriesAnnounce"+Z:I?"newPointAnnounce"+Z:"newDataAnnounce",O=_(N);return N.langFormat("accessibility.announceNewData."+X,{chartTitle:O,seriesDesc:T?k(T):null,pointDesc:I?w(I):null,point:I,series:T})}}return function(P){function D(I){var Z;let N=this.chart,q=(Z=N.accessibility)==null?void 0:Z.components.series.newDataAnnouncer;q&&q.chart===N&&S(N)&&(q.dirty.newPoint=y(q.dirty.newPoint)?void 0:I.point)}function T(){var q;let I=this.chart,N=(q=I.accessibility)==null?void 0:q.components.series.newDataAnnouncer;N&&N.chart===I&&S(I)&&(N.dirty.hasDirty=!0,N.dirty.allSeries[this.name+this.index]=this)}P.compose=function(I){C(g,"A11y.NDA")&&(v(I,"addPoint",D),v(I,"updatedData",T))}}(x),x}),r(t,"Accessibility/ProxyElement.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"]],function(s,l,u,n,p){let{doc:m}=s,{attr:g,css:v,merge:y}=l,{fireEventOnWrappedOrUnwrappedElement:C}=n,{cloneMouseEvent:_,cloneTouchEvent:w,getFakeMouseEvent:k,removeElement:S}=p;return class{constructor(x,P,D="button",T,I){this.chart=x,this.target=P,this.eventProvider=new u;let N=this.innerElement=m.createElement(D),q=this.element=T?m.createElement(T):N;x.styledMode||this.hideElementVisually(N),T&&(T!=="li"||x.styledMode||(q.style.listStyle="none"),q.appendChild(N),this.element=q),this.updateTarget(P,I)}click(){let x=this.getTargetPosition();x.x+=x.width/2,x.y+=x.height/2;let P=k("click",x);C(this.target.click,P)}updateTarget(x,P){this.target=x,this.updateCSSClassName();let D=P||{};Object.keys(D).forEach(I=>{D[I]===null&&delete D[I]});let T=this.getTargetAttr(x.click,"aria-label");g(this.innerElement,y(T?{"aria-label":T}:{},D)),this.eventProvider.removeAddedEvents(),this.addProxyEventsToElement(this.innerElement,x.click),this.refreshPosition()}refreshPosition(){let x=this.getTargetPosition();v(this.innerElement,{width:(x.width||1)+"px",height:(x.height||1)+"px",left:(Math.round(x.x)||0)+"px",top:(Math.round(x.y)||0)+"px"})}remove(){this.eventProvider.removeAddedEvents(),S(this.element)}updateCSSClassName(){let x=N=>N.indexOf("highcharts-no-tooltip")>-1,P=this.chart.legend,D=P.group&&P.group.div,T=x(D&&D.className||""),I=x(this.getTargetAttr(this.target.click,"class")||"");this.innerElement.className=T||I?"highcharts-a11y-proxy-element highcharts-no-tooltip":"highcharts-a11y-proxy-element"}addProxyEventsToElement(x,P){["click","touchstart","touchend","touchcancel","touchmove","mouseover","mouseenter","mouseleave","mouseout"].forEach(D=>{let T=D.indexOf("touch")===0;this.eventProvider.addEvent(x,D,I=>{let N=T?w(I):_(I);P&&C(P,N),I.stopPropagation(),T||I.preventDefault()},{passive:!1})})}hideElementVisually(x){v(x,{borderWidth:0,backgroundColor:"transparent",cursor:"pointer",outline:"none",opacity:.001,filter:"alpha(opacity=1)",zIndex:999,overflow:"hidden",padding:0,margin:0,display:"block",position:"absolute","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)"})}getTargetPosition(){let x=this.target.click,P=x.element?x.element:x,D=this.target.visual||P,T=this.chart.renderTo,I=this.chart.pointer;if(T&&(D!=null&&D.getBoundingClientRect)&&I){let N=D.getBoundingClientRect(),q=I.getChartPosition();return{x:(N.left-q.left)/q.scaleX,y:(N.top-q.top)/q.scaleY,width:N.right/q.scaleX-N.left/q.scaleX,height:N.bottom/q.scaleY-N.top/q.scaleY}}return{x:0,y:0,width:1,height:1}}getTargetAttr(x,P){return x.element?x.element.getAttribute(P):x.getAttribute(P)}}}),r(t,"Accessibility/ProxyProvider.js",[t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/DOMElementProvider.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/ProxyElement.js"]],function(s,l,u,n,p,m){let{doc:g}=s,{attr:v,css:y}=l,{unhideChartElementFromAT:C}=u,{removeChildNodes:_}=p;return class{constructor(w){this.chart=w,this.domElementProvider=new n,this.groups={},this.groupOrder=[],this.beforeChartProxyPosContainer=this.createProxyPosContainer("before"),this.afterChartProxyPosContainer=this.createProxyPosContainer("after"),this.update()}addProxyElement(w,k,S="button",x){let P=this.groups[w];if(!P)throw Error("ProxyProvider.addProxyElement: Invalid group key "+w);let D=P.type==="ul"||P.type==="ol"?"li":void 0,T=new m(this.chart,k,S,D,x);return P.proxyContainerElement.appendChild(T.element),P.proxyElements.push(T),T}addGroup(w,k="div",S){let x,P=this.groups[w];if(P)return P.groupElement;let D=this.domElementProvider.createElement(k);return S&&S.role&&k!=="div"?(x=this.domElementProvider.createElement("div")).appendChild(D):x=D,x.className="highcharts-a11y-proxy-group highcharts-a11y-proxy-group-"+w.replace(/\W/g,"-"),this.groups[w]={proxyContainerElement:D,groupElement:x,type:k,proxyElements:[]},v(x,S||{}),k==="ul"&&D.setAttribute("role","list"),this.afterChartProxyPosContainer.appendChild(x),this.updateGroupOrder(this.groupOrder),x}updateGroupAttrs(w,k){let S=this.groups[w];if(!S)throw Error("ProxyProvider.updateGroupAttrs: Invalid group key "+w);v(S.groupElement,k)}updateGroupOrder(w){if(this.groupOrder=w.slice(),this.isDOMOrderGroupOrder())return;let k=w.indexOf("series"),S=k>-1?w.slice(0,k):w,x=k>-1?w.slice(k+1):[],P=g.activeElement;["before","after"].forEach(D=>{let T=this[D==="before"?"beforeChartProxyPosContainer":"afterChartProxyPosContainer"];_(T),(D==="before"?S:x).forEach(I=>{let N=this.groups[I];N&&T.appendChild(N.groupElement)})}),(this.beforeChartProxyPosContainer.contains(P)||this.afterChartProxyPosContainer.contains(P))&&P&&P.focus&&P.focus()}clearGroup(w){let k=this.groups[w];if(!k)throw Error("ProxyProvider.clearGroup: Invalid group key "+w);_(k.proxyContainerElement)}removeGroup(w){let k=this.groups[w];k&&(this.domElementProvider.removeElement(k.groupElement),k.groupElement!==k.proxyContainerElement&&this.domElementProvider.removeElement(k.proxyContainerElement),delete this.groups[w])}update(){this.updatePosContainerPositions(),this.updateGroupOrder(this.groupOrder),this.updateProxyElementPositions()}updateProxyElementPositions(){Object.keys(this.groups).forEach(this.updateGroupProxyElementPositions.bind(this))}updateGroupProxyElementPositions(w){let k=this.groups[w];k&&k.proxyElements.forEach(S=>S.refreshPosition())}destroy(){this.domElementProvider.destroyCreatedElements()}createProxyPosContainer(w){let k=this.domElementProvider.createElement("div");return k.setAttribute("aria-hidden","false"),k.className="highcharts-a11y-proxy-container"+(w?"-"+w:""),y(k,{top:"0",left:"0"}),this.chart.styledMode||(k.style.whiteSpace="nowrap",k.style.position="absolute"),k}getCurrentGroupOrderInDOM(){let w=P=>{let D=Object.keys(this.groups),T=D.length;for(;T--;){let I=D[T],N=this.groups[I];if(N&&P===N.groupElement)return I}},k=P=>{let D=[],T=P.children;for(let I=0;I<T.length;++I){let N=w(T[I]);N&&D.push(N)}return D},S=k(this.beforeChartProxyPosContainer),x=k(this.afterChartProxyPosContainer);return S.push("series"),S.concat(x)}isDOMOrderGroupOrder(){let w=this.getCurrentGroupOrderInDOM(),k=this.groupOrder.filter(x=>x==="series"||!!this.groups[x]),S=w.length;if(S!==k.length)return!1;for(;S--;)if(w[S]!==k[S])return!1;return!0}updatePosContainerPositions(){let w=this.chart;if(w.renderer.forExport)return;let k=w.renderer.box;w.container.insertBefore(this.afterChartProxyPosContainer,k.nextSibling),w.container.insertBefore(this.beforeChartProxyPosContainer,k),C(this.chart,this.afterChartProxyPosContainer),C(this.chart,this.beforeChartProxyPosContainer)}}}),r(t,"Accessibility/Components/RangeSelectorComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/Announcer.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Core/Utilities.js"]],function(s,l,u,n,p){let{unhideChartElementFromAT:m,getAxisRangeDescription:g}=u,{addEvent:v,attr:y}=p;class C extends s{init(){let w=this.chart;this.announcer=new l(w,"polite")}onChartUpdate(){let w=this.chart,k=this,S=w.rangeSelector;S&&(this.updateSelectorVisibility(),this.setDropdownAttrs(),S.buttons&&S.buttons.length&&S.buttons.forEach(x=>{k.setRangeButtonAttrs(x)}),S.maxInput&&S.minInput&&["minInput","maxInput"].forEach(function(x,P){let D=S[x];D&&(m(w,D),k.setRangeInputAttrs(D,"accessibility.rangeSelector."+(P?"max":"min")+"InputLabel"))}))}updateSelectorVisibility(){let w=this.chart,k=w.rangeSelector,S=k&&k.dropdown,x=k&&k.buttons||[],P=D=>D.setAttribute("aria-hidden",!0);k&&k.hasVisibleDropdown&&S?(m(w,S),x.forEach(D=>P(D.element))):(S&&P(S),x.forEach(D=>m(w,D.element)))}setDropdownAttrs(){let w=this.chart,k=w.rangeSelector&&w.rangeSelector.dropdown;if(k){let S=w.langFormat("accessibility.rangeSelector.dropdownLabel",{rangeTitle:w.options.lang.rangeSelectorZoom});k.setAttribute("aria-label",S),k.setAttribute("tabindex",-1)}}setRangeButtonAttrs(w){y(w.element,{tabindex:-1,role:"button"})}setRangeInputAttrs(w,k){let S=this.chart;y(w,{tabindex:-1,"aria-label":S.langFormat(k,{chart:S})})}onButtonNavKbdArrowKey(w,k){let S=w.response,x=this.keyCodes,P=this.chart,D=P.options.accessibility.keyboardNavigation.wrapAround,T=k===x.left||k===x.up?-1:1;return P.highlightRangeSelectorButton(P.highlightedRangeSelectorItemIx+T)?S.success:D?(w.init(T),S.success):S[T>0?"next":"prev"]}onButtonNavKbdClick(w){let k=w.response,S=this.chart;return S.oldRangeSelectorItemState!==3&&this.fakeClickEvent(S.rangeSelector.buttons[S.highlightedRangeSelectorItemIx].element),k.success}onAfterBtnClick(){let w=this.chart,k=g(w.xAxis[0]),S=w.langFormat("accessibility.rangeSelector.clickButtonAnnouncement",{chart:w,axisRangeDescription:k});S&&this.announcer.announce(S)}onInputKbdMove(w){let k=this.chart,S=k.rangeSelector,x=k.highlightedInputRangeIx=(k.highlightedInputRangeIx||0)+w;if(x>1||x<0){if(k.accessibility)return k.accessibility.keyboardNavigation.exiting=!0,k.accessibility.keyboardNavigation.tabindexContainer.focus(),k.accessibility.keyboardNavigation.move(w)}else if(S){let P=S[x?"maxDateBox":"minDateBox"],D=S[x?"maxInput":"minInput"];P&&D&&k.setFocusToElement(P,D)}return!0}onInputNavInit(w){let k=this,S=this.chart,x=w>0?0:1,P=S.rangeSelector,D=P&&P[x?"maxDateBox":"minDateBox"],T=P&&P.minInput,I=P&&P.maxInput;if(S.highlightedInputRangeIx=x,D&&T&&I){S.setFocusToElement(D,x?I:T),this.removeInputKeydownHandler&&this.removeInputKeydownHandler();let N=X=>{(X.which||X.keyCode)===this.keyCodes.tab&&k.onInputKbdMove(X.shiftKey?-1:1)&&(X.preventDefault(),X.stopPropagation())},q=v(T,"keydown",N),Z=v(I,"keydown",N);this.removeInputKeydownHandler=()=>{q(),Z()}}}onInputNavTerminate(){let w=this.chart.rangeSelector||{};w.maxInput&&w.hideInput("max"),w.minInput&&w.hideInput("min"),this.removeInputKeydownHandler&&(this.removeInputKeydownHandler(),delete this.removeInputKeydownHandler)}initDropdownNav(){let w=this.chart,k=w.rangeSelector,S=k&&k.dropdown;k&&S&&(w.setFocusToElement(k.buttonGroup,S),this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeDropdownKeydownHandler=v(S,"keydown",x=>{let P=(x.which||x.keyCode)===this.keyCodes.tab,D=w.accessibility;P&&(x.preventDefault(),x.stopPropagation(),D&&(D.keyboardNavigation.tabindexContainer.focus(),D.keyboardNavigation.move(x.shiftKey?-1:1)))}))}getRangeSelectorButtonNavigation(){let w=this.chart,k=this.keyCodes,S=this;return new n(w,{keyCodeMap:[[[k.left,k.right,k.up,k.down],function(x){return S.onButtonNavKbdArrowKey(this,x)}],[[k.enter,k.space],function(){return S.onButtonNavKbdClick(this)}]],validate:function(){return!!(w.rangeSelector&&w.rangeSelector.buttons&&w.rangeSelector.buttons.length)},init:function(x){let P=w.rangeSelector;if(P&&P.hasVisibleDropdown)S.initDropdownNav();else if(P){let D=P.buttons.length-1;w.highlightRangeSelectorButton(x>0?0:D)}},terminate:function(){S.removeDropdownKeydownHandler&&(S.removeDropdownKeydownHandler(),delete S.removeDropdownKeydownHandler)}})}getRangeSelectorInputNavigation(){let w=this.chart,k=this;return new n(w,{keyCodeMap:[],validate:function(){return!!(w.rangeSelector&&w.rangeSelector.inputGroup&&w.rangeSelector.inputGroup.element.style.visibility!=="hidden"&&w.options.rangeSelector.inputEnabled!==!1&&w.rangeSelector.minInput&&w.rangeSelector.maxInput)},init:function(S){k.onInputNavInit(S)},terminate:function(){k.onInputNavTerminate()}})}getKeyboardNavigation(){return[this.getRangeSelectorButtonNavigation(),this.getRangeSelectorInputNavigation()]}destroy(){this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeInputKeydownHandler&&this.removeInputKeydownHandler(),this.announcer&&this.announcer.destroy()}}return function(_){function w(S){let x=this.rangeSelector&&this.rangeSelector.buttons||[],P=this.highlightedRangeSelectorItemIx,D=this.rangeSelector&&this.rangeSelector.selected;return P!==void 0&&x[P]&&P!==D&&x[P].setState(this.oldRangeSelectorItemState||0),this.highlightedRangeSelectorItemIx=S,!!x[S]&&(this.setFocusToElement(x[S].box,x[S].element),S!==D&&(this.oldRangeSelectorItemState=x[S].state,x[S].setState(1)),!0)}function k(){let S=this.chart.accessibility;if(S&&S.components.rangeSelector)return S.components.rangeSelector.onAfterBtnClick()}_.compose=function(S,x){let P=S.prototype;P.highlightRangeSelectorButton||(P.highlightRangeSelectorButton=w,v(x,"afterBtnClick",k))}}(C),C}),r(t,"Accessibility/Components/SeriesComponent/ForcedMarkers.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){var u;let{composed:n}=s,{addEvent:p,merge:m,pushUnique:g}=l;return function(v){function y(P){m(!0,P,{marker:{enabled:!0,states:{normal:{opacity:0}}}})}function C(P){return P.marker.states&&P.marker.states.normal&&P.marker.states.normal.opacity}function _(P){return!!(P._hasPointMarkers&&P.points&&P.points.length)}function w(){this.chart.styledMode&&(this.markerGroup&&this.markerGroup[this.a11yMarkersForced?"addClass":"removeClass"]("highcharts-a11y-markers-hidden"),_(this)&&this.points.forEach(P=>{P.graphic&&(P.graphic[P.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-hidden"),P.graphic[P.hasForcedA11yMarker===!1?"addClass":"removeClass"]("highcharts-a11y-marker-visible"))}))}function k(P){this.resetA11yMarkerOptions=m(P.options.marker||{},this.userOptions.marker||{})}function S(){let P=this.options;(function(D){let T=D.chart.options.accessibility.enabled,I=(D.options.accessibility&&D.options.accessibility.enabled)!==!1;return T&&I&&function(N){let q=N.chart.options.accessibility;return N.points.length<q.series.pointDescriptionEnabledThreshold||q.series.pointDescriptionEnabledThreshold===!1}(D)})(this)?(P.marker&&P.marker.enabled===!1&&(this.a11yMarkersForced=!0,y(this.options)),_(this)&&function(D){let T=D.points.length;for(;T--;){let I=D.points[T],N=I.options,q=I.hasForcedA11yMarker;if(delete I.hasForcedA11yMarker,N.marker){let Z=q&&C(N)===0;N.marker.enabled&&!Z?(m(!0,N.marker,{states:{normal:{opacity:C(N)||1}}}),I.hasForcedA11yMarker=!1):N.marker.enabled===!1&&(y(N),I.hasForcedA11yMarker=!0)}}}(this)):this.a11yMarkersForced&&(delete this.a11yMarkersForced,function(D){let T=D.resetA11yMarkerOptions;if(T){let I=T.states&&T.states.normal&&T.states.normal.opacity;D.userOptions&&D.userOptions.marker&&(D.userOptions.marker.enabled=!0),D.update({marker:{enabled:T.enabled,states:{normal:{opacity:I}}}})}}(this),delete this.resetA11yMarkerOptions)}function x(){this.boosted&&this.a11yMarkersForced&&(m(!0,this.options,{marker:{enabled:!1}}),delete this.a11yMarkersForced)}v.compose=function(P){g(n,"A11y.FM")&&(p(P,"afterSetOptions",k),p(P,"render",S),p(P,"afterRender",w),p(P,"renderCanvas",x))}}(u||(u={})),u}),r(t,"Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js",[t["Core/Series/Point.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Utils/EventProvider.js"],t["Accessibility/Utils/ChartUtilities.js"]],function(s,l,u,n,p,m,g,v){let{seriesTypes:y}=u,{doc:C}=n,{defined:_,fireEvent:w}=p,{getPointFromXY:k,getSeriesFromName:S,scrollAxisToPoint:x}=v;function P(X){let O=X.index,V=X.series.points,$=V.length;if(V[O]===X)return O;for(;$--;)if(V[$]===X)return $}function D(X){let O=X.chart.options.accessibility.keyboardNavigation.seriesNavigation,V=X.options.accessibility||{},$=V.keyboardNavigation;return $&&$.enabled===!1||V.enabled===!1||X.options.enableMouseTracking===!1||!X.visible||O.pointNavigationEnabledThreshold&&+O.pointNavigationEnabledThreshold<=X.points.length}function T(X){let O=X.series.chart.options.accessibility,V=X.options.accessibility&&X.options.accessibility.enabled===!1;return X.isNull&&O.keyboardNavigation.seriesNavigation.skipNullPoints||X.visible===!1||X.isInside===!1||V||D(X.series)}function I(X){let O=X.series||[],V=O.length;for(let $=0;$<V;++$)if(!D(O[$])){let L=function(R){let G=R.points||[],U=G.length;for(let B=0;B<U;++B)if(!T(G[B]))return G[B];return null}(O[$]);if(L)return L}return null}function N(X){let O=X.series.length,V=!1;for(;O--&&(X.highlightedPoint=X.series[O].points[X.series[O].points.length-1],!(V=X.series[O].highlightNextValidPoint())););return V}function q(X){delete X.highlightedPoint;let O=I(X);return!!O&&O.highlight()}class Z{constructor(O,V){this.keyCodes=V,this.chart=O}init(){let O=this,V=this.chart,$=this.eventProvider=new g;$.addEvent(l,"destroy",function(){return O.onSeriesDestroy(this)}),$.addEvent(V,"afterApplyDrilldown",function(){(function(L){let R=I(L);R&&R.highlight(!1)})(this)}),$.addEvent(V,"drilldown",function(L){let R=L.point,G=R.series;O.lastDrilledDownPoint={x:R.x,y:R.y,seriesName:G?G.name:""}}),$.addEvent(V,"drillupall",function(){setTimeout(function(){O.onDrillupAll()},10)}),$.addEvent(s,"afterSetState",function(){let L=this.graphic&&this.graphic.element,R=C.activeElement,G=R&&R.getAttribute("class"),U=G&&G.indexOf("highcharts-a11y-proxy-element")>-1;V.highlightedPoint===this&&R!==L&&!U&&L&&L.focus&&L.focus()})}onDrillupAll(){let O,V=this.lastDrilledDownPoint,$=this.chart,L=V&&S($,V.seriesName);V&&L&&_(V.x)&&_(V.y)&&(O=k(L,V.x,V.y)),O=O||I($),$.container&&$.container.focus(),O&&O.highlight&&O.highlight(!1)}getKeyboardNavigationHandler(){let O=this,V=this.keyCodes,$=this.chart,L=$.inverted;return new m($,{keyCodeMap:[[L?[V.up,V.down]:[V.left,V.right],function(R){return O.onKbdSideways(this,R)}],[L?[V.left,V.right]:[V.up,V.down],function(R){return O.onKbdVertical(this,R)}],[[V.enter,V.space],function(R,G){var B;let U=$.highlightedPoint;if(U){let{plotLeft:H,plotTop:W}=this.chart,{plotX:re=0,plotY:de=0}=U;G={...G,chartX:H+re,chartY:W+de,point:U,target:((B=U.graphic)==null?void 0:B.element)||G.target},w(U.series,"click",G),U.firePointEvent("click",G)}return this.response.success}],[[V.home],function(){return q($),this.response.success}],[[V.end],function(){return N($),this.response.success}],[[V.pageDown,V.pageUp],function(R){return $.highlightAdjacentSeries(R===V.pageDown),this.response.success}]],init:function(){return O.onHandlerInit(this)},validate:function(){return!!I($)},terminate:function(){return O.onHandlerTerminate()}})}onKbdSideways(O,V){let $=this.keyCodes,L=V===$.right||V===$.down;return this.attemptHighlightAdjacentPoint(O,L)}onHandlerInit(O){let V=this.chart;return V.options.accessibility.keyboardNavigation.seriesNavigation.rememberPointFocus&&V.highlightedPoint?V.highlightedPoint.highlight():q(V),O.response.success}onKbdVertical(O,V){let $=this.chart,L=this.keyCodes,R=V===L.down||V===L.right,G=$.options.accessibility.keyboardNavigation.seriesNavigation;if(G.mode&&G.mode==="serialize")return this.attemptHighlightAdjacentPoint(O,R);let U=$.highlightedPoint&&$.highlightedPoint.series.keyboardMoveVertical?"highlightAdjacentPointVertical":"highlightAdjacentSeries";return $[U](R),O.response.success}onHandlerTerminate(){let O=this.chart,V=O.options.accessibility.keyboardNavigation;O.tooltip&&O.tooltip.hide(0);let $=O.highlightedPoint&&O.highlightedPoint.series;$&&$.onMouseOut&&$.onMouseOut(),O.highlightedPoint&&O.highlightedPoint.onMouseOut&&O.highlightedPoint.onMouseOut(),V.seriesNavigation.rememberPointFocus||delete O.highlightedPoint}attemptHighlightAdjacentPoint(O,V){let $=this.chart,L=$.options.accessibility.keyboardNavigation.wrapAround;return $.highlightAdjacentPoint(V)||L&&(V?q($):N($))?O.response.success:O.response[V?"next":"prev"]}onSeriesDestroy(O){let V=this.chart;V.highlightedPoint&&V.highlightedPoint.series===O&&(delete V.highlightedPoint,V.focusElement&&V.focusElement.removeFocusBorder())}destroy(){this.eventProvider.removeAddedEvents()}}return function(X){function O(G){let U,B,H=this.series,W=this.highlightedPoint,re=W&&P(W)||0,de=W&&W.series.points||[],ie=this.series&&this.series[this.series.length-1],oe=ie&&ie.points&&ie.points[ie.points.length-1];if(!H[0]||!H[0].points)return!1;if(W){if(U=H[W.series.index+(G?1:-1)],(B=de[re+(G?1:-1)])||!U||(B=U.points[G?0:U.points.length-1]),!B)return!1}else B=G?H[0].points[0]:oe;return T(B)?(D(U=B.series)?this.highlightedPoint=G?U.points[U.points.length-1]:U.points[0]:this.highlightedPoint=B,this.highlightAdjacentPoint(G)):B.highlight()}function V(G){let U=this.highlightedPoint,B=1/0,H;return!!(_(U.plotX)&&_(U.plotY))&&(this.series.forEach(W=>{D(W)||W.points.forEach(re=>{if(!_(re.plotY)||!_(re.plotX)||re===U)return;let de=re.plotY-U.plotY,ie=Math.abs(re.plotX-U.plotX),oe=Math.abs(de)*Math.abs(de)+ie*ie*4;W.yAxis&&W.yAxis.reversed&&(de*=-1),!(de<=0&&G||de>=0&&!G||oe<5||T(re))&&oe<B&&(B=oe,H=re)})}),!!H&&H.highlight())}function $(G){let U,B,H,W=this.highlightedPoint,re=this.series&&this.series[this.series.length-1],de=re&&re.points&&re.points[re.points.length-1];return this.highlightedPoint?!!((U=this.series[W.series.index+(G?-1:1)])&&(B=function(ie,oe,Ee,xe){let Se=1/0,K,Q,ae,_e=oe.points.length,J=ne=>!(_(ne.plotX)&&_(ne.plotY));if(!J(ie)){for(;_e--;)!J(K=oe.points[_e])&&(ae=(ie.plotX-K.plotX)*(ie.plotX-K.plotX)*4+(ie.plotY-K.plotY)*(ie.plotY-K.plotY)*1)<Se&&(Se=ae,Q=_e);return _(Q)?oe.points[Q]:void 0}}(W,U)))&&(D(U)?(B.highlight(),(H=this.highlightAdjacentSeries(G))?H:(W.highlight(),!1)):(B.highlight(),B.series.highlightNextValidPoint())):(U=G?this.series&&this.series[0]:re,!!(B=G?U&&U.points&&U.points[0]:de)&&B.highlight())}function L(G=!0){var W,re;let U=this.series.chart,B=(re=(W=U.tooltip)==null?void 0:W.label)==null?void 0:re.element;!this.isNull&&G?this.onMouseOver():U.tooltip&&U.tooltip.hide(0),x(this),this.graphic&&(U.setFocusToElement(this.graphic),!G&&U.focusElement&&U.focusElement.removeFocusBorder()),U.highlightedPoint=this;let H=B==null?void 0:B.getBoundingClientRect().top;if(B&&H&&H<0){let de=window.scrollY;window.scrollTo({behavior:"smooth",top:de+H})}return this}function R(){let G=this.chart.highlightedPoint,U=(G&&G.series)===this?P(G):0,B=this.points,H=B.length;if(B&&H){for(let W=U;W<H;++W)if(!T(B[W]))return B[W].highlight();for(let W=U;W>=0;--W)if(!T(B[W]))return B[W].highlight()}return!1}X.compose=function(G,U,B){let H=G.prototype,W=U.prototype,re=B.prototype;H.highlightAdjacentPoint||(H.highlightAdjacentPoint=O,H.highlightAdjacentPointVertical=V,H.highlightAdjacentSeries=$,W.highlight=L,re.keyboardMoveVertical=!0,["column","gantt","pie"].forEach(de=>{y[de]&&(y[de].prototype.keyboardMoveVertical=!1)}),re.highlightNextValidPoint=R)}}(Z),Z}),r(t,"Accessibility/Components/SeriesComponent/SeriesComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Components/SeriesComponent/ForcedMarkers.js"],t["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"],t["Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js"]],function(s,l,u,n,p,m){let{hideSeriesFromAT:g}=l,{describeSeries:v}=p;return class extends s{static compose(y,C,_){n.compose(_),u.compose(_),m.compose(y,C,_)}init(){this.newDataAnnouncer=new n(this.chart),this.newDataAnnouncer.init(),this.keyboardNavigation=new m(this.chart,this.keyCodes),this.keyboardNavigation.init(),this.hideTooltipFromATWhenShown(),this.hideSeriesLabelsFromATWhenShown()}hideTooltipFromATWhenShown(){let y=this;this.chart.tooltip&&this.addEvent(this.chart.tooltip.constructor,"refresh",function(){this.chart===y.chart&&this.label&&this.label.element&&this.label.element.setAttribute("aria-hidden",!0)})}hideSeriesLabelsFromATWhenShown(){this.addEvent(this.chart,"afterDrawSeriesLabels",function(){this.series.forEach(function(y){y.labelBySeries&&y.labelBySeries.attr("aria-hidden",!0)})})}onChartRender(){this.chart.series.forEach(function(y){(y.options.accessibility&&y.options.accessibility.enabled)!==!1&&y.visible&&y.getPointsCollection().length!==0?v(y):g(y)})}getKeyboardNavigation(){return this.keyboardNavigation.getKeyboardNavigationHandler()}destroy(){this.newDataAnnouncer.destroy(),this.keyboardNavigation.destroy()}}}),r(t,"Accessibility/Components/ZoomComponent.js",[t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Core/Utilities.js"]],function(s,l,u,n,p){let{unhideChartElementFromAT:m}=l,{getFakeMouseEvent:g}=u,{attr:v,pick:y}=p;return class extends s{constructor(){super(...arguments),this.focusedMapNavButtonIx=-1}init(){let C=this,_=this.chart;this.proxyProvider.addGroup("zoom","div"),["afterShowResetZoom","afterApplyDrilldown","drillupall"].forEach(w=>{C.addEvent(_,w,function(){C.updateProxyOverlays()})})}onChartUpdate(){let C=this.chart,_=this;C.mapNavigation&&C.mapNavigation.navButtons.forEach((w,k)=>{m(C,w.element),_.setMapNavButtonAttrs(w.element,"accessibility.zoom.mapZoom"+(k?"Out":"In"))})}setMapNavButtonAttrs(C,_){let w=this.chart;v(C,{tabindex:-1,role:"button","aria-label":w.langFormat(_,{chart:w})})}onChartRender(){this.updateProxyOverlays()}updateProxyOverlays(){let C=this.chart;if(this.proxyProvider.clearGroup("zoom"),C.resetZoomButton&&this.createZoomProxyButton(C.resetZoomButton,"resetZoomProxyButton",C.langFormat("accessibility.zoom.resetZoomButton",{chart:C})),C.drillUpButton&&C.breadcrumbs&&C.breadcrumbs.list){let _=C.breadcrumbs.list[C.breadcrumbs.list.length-1];this.createZoomProxyButton(C.drillUpButton,"drillUpProxyButton",C.langFormat("accessibility.drillUpButton",{chart:C,buttonText:C.breadcrumbs.getButtonText(_)}))}}createZoomProxyButton(C,_,w){this[_]=this.proxyProvider.addProxyElement("zoom",{click:C},"button",{"aria-label":w,tabindex:-1})}getMapZoomNavigation(){let C=this.keyCodes,_=this.chart,w=this;return new n(_,{keyCodeMap:[[[C.up,C.down,C.left,C.right],function(k){return w.onMapKbdArrow(this,k)}],[[C.tab],function(k,S){return w.onMapKbdTab(this,S)}],[[C.space,C.enter],function(){return w.onMapKbdClick(this)}]],validate:function(){return!!(_.mapView&&_.mapNavigation&&_.mapNavigation.navButtons.length)},init:function(k){return w.onMapNavInit(k)}})}onMapKbdArrow(C,_){let w=this.chart,k=this.keyCodes,S=w.container,x=_===k.up||_===k.down,P=_===k.left||_===k.up?1:-1,D=(x?w.plotHeight:w.plotWidth)/10*P,T=10*Math.random(),I={x:S.offsetLeft+w.plotLeft+w.plotWidth/2+T,y:S.offsetTop+w.plotTop+w.plotHeight/2+T},N=x?{x:I.x,y:I.y+D}:{x:I.x+D,y:I.y};return[g("mousedown",I),g("mousemove",N),g("mouseup",N)].forEach(q=>S.dispatchEvent(q)),C.response.success}onMapKbdTab(C,_){let w=this.chart,k=C.response,S=_.shiftKey,x=S&&!this.focusedMapNavButtonIx||!S&&this.focusedMapNavButtonIx;if(w.mapNavigation.navButtons[this.focusedMapNavButtonIx].setState(0),x)return w.mapView&&w.mapView.zoomBy(),k[S?"prev":"next"];this.focusedMapNavButtonIx+=S?-1:1;let P=w.mapNavigation.navButtons[this.focusedMapNavButtonIx];return w.setFocusToElement(P.box,P.element),P.setState(2),k.success}onMapKbdClick(C){let _=this.chart.mapNavigation.navButtons[this.focusedMapNavButtonIx].element;return this.fakeClickEvent(_),C.response.success}onMapNavInit(C){let _=this.chart,w=_.mapNavigation.navButtons[0],k=_.mapNavigation.navButtons[1],S=C>0?w:k;_.setFocusToElement(S.box,S.element),S.setState(2),this.focusedMapNavButtonIx=C>0?0:1}simpleButtonNavigation(C,_,w){let k=this.keyCodes,S=this,x=this.chart;return new n(x,{keyCodeMap:[[[k.tab,k.up,k.down,k.left,k.right],function(P,D){let T=P===k.tab&&D.shiftKey||P===k.left||P===k.up;return this.response[T?"prev":"next"]}],[[k.space,k.enter],function(){return y(w(this,x),this.response.success)}]],validate:function(){return x[C]&&x[C].box&&S[_].innerElement},init:function(){x.setFocusToElement(x[C].box,S[_].innerElement)}})}getKeyboardNavigation(){return[this.simpleButtonNavigation("resetZoomButton","resetZoomProxyButton",function(C,_){_.zoomOut()}),this.simpleButtonNavigation("drillUpButton","drillUpProxyButton",function(C,_){return _.drillUp(),C.response.prev}),this.getMapZoomNavigation()]}}}),r(t,"Accessibility/HighContrastMode.js",[t["Core/Globals.js"]],function(s){let{doc:l,isMS:u,win:n}=s;return{isHighContrastModeActive:function(){let p=/(Edg)/.test(n.navigator.userAgent);if(n.matchMedia&&p)return n.matchMedia("(-ms-high-contrast: active)").matches;if(u&&n.getComputedStyle){let m=l.createElement("div");m.style.backgroundImage="url(data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==)",l.body.appendChild(m);let g=(m.currentStyle||n.getComputedStyle(m)).backgroundImage;return l.body.removeChild(m),g==="none"}return n.matchMedia&&n.matchMedia("(forced-colors: active)").matches},setHighContrastTheme:function(p){var v;p.highContrastModeActive=!0;let m=p.options.accessibility.highContrastTheme;p.update(m,!1);let g=((v=m.colors)==null?void 0:v.length)>1;p.series.forEach(function(y){let C=m.plotOptions[y.type]||{},_=g&&y.colorIndex!==void 0?m.colors[y.colorIndex]:C.color||"window",w={color:C.color||"windowText",colors:g?m.colors:[C.color||"windowText"],borderColor:C.borderColor||"window",fillColor:_};y.update(w,!1),y.points&&y.points.forEach(function(k){k.options&&k.options.color&&k.update({color:C.color||"windowText",borderColor:C.borderColor||"window"},!1)})}),p.redraw()}}}),r(t,"Accessibility/HighContrastTheme.js",[],function(){return{chart:{backgroundColor:"window"},title:{style:{color:"windowText"}},subtitle:{style:{color:"windowText"}},colorAxis:{minColor:"windowText",maxColor:"windowText",stops:[],dataClasses:[]},colors:["windowText"],xAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},yAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},tooltip:{backgroundColor:"window",borderColor:"windowText",style:{color:"windowText"}},plotOptions:{series:{lineColor:"windowText",fillColor:"window",borderColor:"windowText",edgeColor:"windowText",borderWidth:1,dataLabels:{connectorColor:"windowText",color:"windowText",style:{color:"windowText",textOutline:"none"}},marker:{lineColor:"windowText",fillColor:"windowText"}},pie:{color:"window",colors:["window"],borderColor:"windowText",borderWidth:1},boxplot:{fillColor:"window"},candlestick:{lineColor:"windowText",fillColor:"window"},errorbar:{fillColor:"window"}},legend:{backgroundColor:"window",itemStyle:{color:"windowText"},itemHoverStyle:{color:"windowText"},itemHiddenStyle:{color:"#555"},title:{style:{color:"windowText"}}},credits:{style:{color:"windowText"}},drilldown:{activeAxisLabelStyle:{color:"windowText"},activeDataLabelStyle:{color:"windowText"}},navigation:{buttonOptions:{symbolStroke:"windowText",theme:{fill:"window"}}},rangeSelector:{buttonTheme:{fill:"window",stroke:"windowText",style:{color:"windowText"},states:{hover:{fill:"window",stroke:"windowText",style:{color:"windowText"}},select:{fill:"#444",stroke:"windowText",style:{color:"windowText"}}}},inputBoxBorderColor:"windowText",inputStyle:{backgroundColor:"window",color:"windowText"},labelStyle:{color:"windowText"}},navigator:{handles:{backgroundColor:"window",borderColor:"windowText"},outlineColor:"windowText",maskFill:"transparent",series:{color:"windowText",lineColor:"windowText"},xAxis:{gridLineColor:"windowText"}},scrollbar:{barBackgroundColor:"#444",barBorderColor:"windowText",buttonArrowColor:"windowText",buttonBackgroundColor:"window",buttonBorderColor:"windowText",rifleColor:"windowText",trackBackgroundColor:"window",trackBorderColor:"windowText"}}}),r(t,"Accessibility/Options/A11yDefaults.js",[],function(){return{accessibility:{enabled:!0,screenReaderSection:{beforeChartFormat:"<{headingTagName}>{chartTitle}</{headingTagName}><div>{typeDescription}</div><div>{chartSubtitle}</div><div>{chartLongdesc}</div><div>{playAsSoundButton}</div><div>{viewTableButton}</div><div>{xAxisDescription}</div><div>{yAxisDescription}</div><div>{annotationsTitle}{annotationsList}</div>",afterChartFormat:"{endOfChartMarker}",axisRangeDateFormat:"%Y-%m-%d %H:%M:%S"},series:{descriptionFormat:"{seriesDescription}{authorDescription}{axisDescription}",describeSingleSeries:!1,pointDescriptionEnabledThreshold:200},point:{valueDescriptionFormat:"{xDescription}{separator}{value}.",describeNull:!0},landmarkVerbosity:"all",linkedDescription:'*[data-highcharts-chart="{index}"] + .highcharts-description',highContrastMode:"auto",keyboardNavigation:{enabled:!0,focusBorder:{enabled:!0,hideBrowserFocusOutline:!0,style:{color:"#334eff",lineWidth:2,borderRadius:3},margin:2},order:["series","zoom","rangeSelector","navigator","legend","chartMenu"],wrapAround:!0,seriesNavigation:{skipNullPoints:!0,pointNavigationEnabledThreshold:!1,rememberPointFocus:!1}},announceNewData:{enabled:!1,minAnnounceInterval:5e3,interruptUser:!1}},legend:{accessibility:{enabled:!0,keyboardNavigation:{enabled:!0}}},exporting:{accessibility:{enabled:!0}},navigator:{accessibility:{enabled:!0}}}}),r(t,"Accessibility/Options/LangDefaults.js",[],function(){return{accessibility:{defaultChartTitle:"Chart",chartContainerLabel:"{title}. Highcharts interactive chart.",svgContainerLabel:"Interactive chart",drillUpButton:"{buttonText}",credits:"Chart credits: {creditsStr}",thousandsSep:",",svgContainerTitle:"",graphicContainerLabel:"",screenReaderSection:{beforeRegionLabel:"",afterRegionLabel:"",annotations:{heading:"Chart annotations summary",descriptionSinglePoint:"{annotationText}. Related to {annotationPoint}",descriptionMultiplePoints:"{annotationText}. Related to {annotationPoint}{#each additionalAnnotationPoints}, also related to {this}{/each}",descriptionNoPoints:"{annotationText}"},endOfChartMarker:"End of interactive chart."},sonification:{playAsSoundButtonText:"Play as sound, {chartTitle}",playAsSoundClickAnnouncement:"Play"},legend:{legendLabelNoTitle:"Toggle series visibility, {chartTitle}",legendLabel:"Chart legend: {legendTitle}",legendItem:"Show {itemName}"},zoom:{mapZoomIn:"Zoom chart",mapZoomOut:"Zoom out chart",resetZoomButton:"Reset zoom"},rangeSelector:{dropdownLabel:"{rangeTitle}",minInputLabel:"Select start date.",maxInputLabel:"Select end date.",clickButtonAnnouncement:"Viewing {axisRangeDescription}"},navigator:{handleLabel:"{#eq handleIx 0}Start, percent{else}End, percent{/eq}",groupLabel:"Axis zoom",changeAnnouncement:"{axisRangeDescription}"},table:{viewAsDataTableButtonText:"View as data table, {chartTitle}",tableSummary:"Table representation of chart."},announceNewData:{newDataAnnounce:"Updated data for chart {chartTitle}",newSeriesAnnounceSingle:"New data series: {seriesDesc}",newPointAnnounceSingle:"New data point: {pointDesc}",newSeriesAnnounceMultiple:"New data series in chart {chartTitle}: {seriesDesc}",newPointAnnounceMultiple:"New data point in chart {chartTitle}: {pointDesc}"},seriesTypeDescriptions:{boxplot:"Box plot charts are typically used to display groups of statistical data. Each data point in the chart can have up to 5 values: minimum, lower quartile, median, upper quartile, and maximum.",arearange:"Arearange charts are line charts displaying a range between a lower and higher value for each point.",areasplinerange:"These charts are line charts displaying a range between a lower and higher value for each point.",bubble:"Bubble charts are scatter charts where each data point also has a size value.",columnrange:"Columnrange charts are column charts displaying a range between a lower and higher value for each point.",errorbar:"Errorbar series are used to display the variability of the data.",funnel:"Funnel charts are used to display reduction of data in stages.",pyramid:"Pyramid charts consist of a single pyramid with item heights corresponding to each point value.",waterfall:"A waterfall chart is a column chart where each column contributes towards a total end value."},chartTypes:{emptyChart:"Empty chart",mapTypeDescription:"Map of {mapTitle} with {numSeries} data series.",unknownMap:"Map of unspecified region with {numSeries} data series.",combinationChart:"Combination chart with {numSeries} data series.",defaultSingle:"Chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",defaultMultiple:"Chart with {numSeries} data series.",splineSingle:"Line chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",splineMultiple:"Line chart with {numSeries} lines.",lineSingle:"Line chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",lineMultiple:"Line chart with {numSeries} lines.",columnSingle:"Bar chart with {numPoints} {#eq numPoints 1}bar{else}bars{/eq}.",columnMultiple:"Bar chart with {numSeries} data series.",barSingle:"Bar chart with {numPoints} {#eq numPoints 1}bar{else}bars{/eq}.",barMultiple:"Bar chart with {numSeries} data series.",pieSingle:"Pie chart with {numPoints} {#eq numPoints 1}slice{else}slices{/eq}.",pieMultiple:"Pie chart with {numSeries} pies.",scatterSingle:"Scatter chart with {numPoints} {#eq numPoints 1}point{else}points{/eq}.",scatterMultiple:"Scatter chart with {numSeries} data series.",boxplotSingle:"Boxplot with {numPoints} {#eq numPoints 1}box{else}boxes{/eq}.",boxplotMultiple:"Boxplot with {numSeries} data series.",bubbleSingle:"Bubble chart with {numPoints} {#eq numPoints 1}bubbles{else}bubble{/eq}.",bubbleMultiple:"Bubble chart with {numSeries} data series."},axis:{xAxisDescriptionSingular:"The chart has 1 X axis displaying {names[0]}. {ranges[0]}",xAxisDescriptionPlural:"The chart has {numAxes} X axes displaying {#each names}{#unless @first},{/unless}{#if @last} and{/if} {this}{/each}.",yAxisDescriptionSingular:"The chart has 1 Y axis displaying {names[0]}. {ranges[0]}",yAxisDescriptionPlural:"The chart has {numAxes} Y axes displaying {#each names}{#unless @first},{/unless}{#if @last} and{/if} {this}{/each}.",timeRangeDays:"Data range: {range} days.",timeRangeHours:"Data range: {range} hours.",timeRangeMinutes:"Data range: {range} minutes.",timeRangeSeconds:"Data range: {range} seconds.",rangeFromTo:"Data ranges from {rangeFrom} to {rangeTo}.",rangeCategories:"Data range: {numCategories} categories."},exporting:{chartMenuLabel:"Chart menu",menuButtonLabel:"View chart menu, {chartTitle}"},series:{summary:{default:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",defaultCombination:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",line:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",lineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",spline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",splineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",column:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",columnCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",bar:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",barCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",pie:"{series.name}, pie {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}slice{else}slices{/eq}.",pieCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Pie with {series.points.length} {#eq series.points.length 1}slice{else}slices{/eq}.",scatter:"{series.name}, scatter plot {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}point{else}points{/eq}.",scatterCombination:"{series.name}, series {seriesNumber} of {chart.series.length}, scatter plot with {series.points.length} {#eq series.points.length 1}point{else}points{/eq}.",boxplot:"{series.name}, boxplot {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}box{else}boxes{/eq}.",boxplotCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Boxplot with {series.points.length} {#eq series.points.length 1}box{else}boxes{/eq}.",bubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",bubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",map:"{series.name}, map {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}area{else}areas{/eq}.",mapCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Map with {series.points.length} {#eq series.points.length 1}area{else}areas{/eq}.",mapline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",maplineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",mapbubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",mapbubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}."},description:"{description}",xAxisDescription:"X axis, {name}",yAxisDescription:"Y axis, {name}",nullPointValue:"No value",pointAnnotationsDescription:"{#each annotations}Annotation: {this}{/each}"}}}}),r(t,"Accessibility/Options/DeprecatedOptions.js",[t["Core/Utilities.js"]],function(s){let{error:l,pick:u}=s;function n(m,g,v){let y=m,C,_=0;for(;_<g.length-1;++_)y=y[C=g[_]]=u(y[C],{});y[g[g.length-1]]=v}function p(m,g,v,y){function C(k,S){return S.reduce(function(x,P){return x[P]},k)}let _=C(m.options,g),w=C(m.options,v);Object.keys(y).forEach(function(k){let S=_[k];S!==void 0&&(n(w,y[k],S),l(32,!1,m,{[g.join(".")+"."+k]:v.join(".")+"."+y[k].join(".")}))})}return function(m){(function(g){let v=g.options.chart,y=g.options.accessibility||{};["description","typeDescription"].forEach(function(C){v[C]&&(y[C]=v[C],l(32,!1,g,{[`chart.${C}`]:`use accessibility.${C}`}))})})(m),function(g){g.axes.forEach(function(v){let y=v.options;y&&y.description&&(y.accessibility=y.accessibility||{},y.accessibility.description=y.description,l(32,!1,g,{"axis.description":"use axis.accessibility.description"}))})}(m),m.series&&function(g){let v={description:["accessibility","description"],exposeElementToA11y:["accessibility","exposeAsGroupOnly"],pointDescriptionFormatter:["accessibility","point","descriptionFormatter"],skipKeyboardNavigation:["accessibility","keyboardNavigation","enabled"],"accessibility.pointDescriptionFormatter":["accessibility","point","descriptionFormatter"]};g.series.forEach(function(y){Object.keys(v).forEach(function(C){let _=y.options[C];C==="accessibility.pointDescriptionFormatter"&&(_=y.options.accessibility&&y.options.accessibility.pointDescriptionFormatter),_!==void 0&&(n(y.options,v[C],C==="skipKeyboardNavigation"?!_:_),l(32,!1,g,{[`series.${C}`]:"series."+v[C].join(".")}))})})}(m),p(m,["accessibility"],["accessibility"],{pointDateFormat:["point","dateFormat"],pointDateFormatter:["point","dateFormatter"],pointDescriptionFormatter:["point","descriptionFormatter"],pointDescriptionThreshold:["series","pointDescriptionEnabledThreshold"],pointNavigationThreshold:["keyboardNavigation","seriesNavigation","pointNavigationEnabledThreshold"],pointValueDecimals:["point","valueDecimals"],pointValuePrefix:["point","valuePrefix"],pointValueSuffix:["point","valueSuffix"],screenReaderSectionFormatter:["screenReaderSection","beforeChartFormatter"],describeSingleSeries:["series","describeSingleSeries"],seriesDescriptionFormatter:["series","descriptionFormatter"],onTableAnchorClick:["screenReaderSection","onViewDataTableClick"],axisRangeDateFormat:["screenReaderSection","axisRangeDateFormat"]}),p(m,["accessibility","keyboardNavigation"],["accessibility","keyboardNavigation","seriesNavigation"],{skipNullPoints:["skipNullPoints"],mode:["mode"]}),p(m,["lang","accessibility"],["lang","accessibility"],{legendItem:["legend","legendItem"],legendLabel:["legend","legendLabel"],mapZoomIn:["zoom","mapZoomIn"],mapZoomOut:["zoom","mapZoomOut"],resetZoomButton:["zoom","resetZoomButton"],screenReaderRegionLabel:["screenReaderSection","beforeRegionLabel"],rangeSelectorButton:["rangeSelector","buttonText"],rangeSelectorMaxInput:["rangeSelector","maxInputLabel"],rangeSelectorMinInput:["rangeSelector","minInputLabel"],svgContainerEnd:["screenReaderSection","endOfChartMarker"],viewAsDataTable:["table","viewAsDataTableButtonText"],tableSummary:["table","tableSummary"]})}}),r(t,"Accessibility/Accessibility.js",[t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/A11yI18n.js"],t["Accessibility/Components/ContainerComponent.js"],t["Accessibility/FocusBorder.js"],t["Accessibility/Components/InfoRegionsComponent.js"],t["Accessibility/KeyboardNavigation.js"],t["Accessibility/Components/LegendComponent.js"],t["Accessibility/Components/MenuComponent.js"],t["Accessibility/Components/NavigatorComponent.js"],t["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],t["Accessibility/ProxyProvider.js"],t["Accessibility/Components/RangeSelectorComponent.js"],t["Accessibility/Components/SeriesComponent/SeriesComponent.js"],t["Accessibility/Components/ZoomComponent.js"],t["Accessibility/HighContrastMode.js"],t["Accessibility/HighContrastTheme.js"],t["Accessibility/Options/A11yDefaults.js"],t["Accessibility/Options/LangDefaults.js"],t["Accessibility/Options/DeprecatedOptions.js"]],function(s,l,u,n,p,m,g,v,y,C,_,w,k,S,x,P,D,T,I,N,q,Z){let{defaultOptions:X}=s,{doc:O}=l,{addEvent:V,extend:$,fireEvent:L,merge:R}=u,{removeElement:G}=n;class U{constructor(H){this.init(H)}init(H){if(this.chart=H,!O.addEventListener){this.zombie=!0,this.components={},H.renderTo.setAttribute("aria-hidden",!0);return}Z(H),this.proxyProvider=new S(this.chart),this.initComponents(),this.keyboardNavigation=new y(H,this.components)}initComponents(){let H=this.chart,W=this.proxyProvider,re=H.options.accessibility;this.components={container:new m,infoRegions:new v,legend:new C,chartMenu:new _,rangeSelector:new x,series:new P,zoom:new D,navigator:new w},re.customComponents&&$(this.components,re.customComponents);let de=this.components;this.getComponentOrder().forEach(function(ie){de[ie].initBase(H,W),de[ie].init()})}getComponentOrder(){return this.components?this.components.series?["series"].concat(Object.keys(this.components).filter(H=>H!=="series")):Object.keys(this.components):[]}update(){let H=this.components,W=this.chart,re=W.options.accessibility;L(W,"beforeA11yUpdate"),W.types=this.getChartTypes();let de=re.keyboardNavigation.order;this.proxyProvider.updateGroupOrder(de),this.getComponentOrder().forEach(function(ie){H[ie].onChartUpdate(),L(W,"afterA11yComponentUpdate",{name:ie,component:H[ie]})}),this.keyboardNavigation.update(de),!W.highContrastModeActive&&re.highContrastMode!==!1&&(T.isHighContrastModeActive()||re.highContrastMode===!0)&&T.setHighContrastTheme(W),L(W,"afterA11yUpdate",{accessibility:this})}destroy(){let H=this.chart||{},W=this.components;Object.keys(W).forEach(function(re){W[re].destroy(),W[re].destroyBase()}),this.proxyProvider&&this.proxyProvider.destroy(),H.announcerContainer&&G(H.announcerContainer),this.keyboardNavigation&&this.keyboardNavigation.destroy(),H.renderTo&&H.renderTo.setAttribute("aria-hidden",!0),H.focusElement&&H.focusElement.removeFocusBorder()}getChartTypes(){let H={};return this.chart.series.forEach(function(W){H[W.type]=1}),Object.keys(H)}}return function(B){function H(){this.accessibility&&this.accessibility.destroy()}function W(){this.a11yDirty&&this.renderTo&&(delete this.a11yDirty,this.updateA11yEnabled());let oe=this.accessibility;oe&&!oe.zombie&&(oe.proxyProvider.updateProxyElementPositions(),oe.getComponentOrder().forEach(function(Ee){oe.components[Ee].onChartRender()}))}function re(oe){let Ee=oe.options.accessibility;Ee&&(Ee.customComponents&&(this.options.accessibility.customComponents=Ee.customComponents,delete Ee.customComponents),R(!0,this.options.accessibility,Ee),this.accessibility&&this.accessibility.destroy&&(this.accessibility.destroy(),delete this.accessibility)),this.a11yDirty=!0}function de(){let oe=this.accessibility,Ee=this.options.accessibility,xe=this.renderer.boxWrapper.element,Se=this.title;if(Ee&&Ee.enabled)oe&&!oe.zombie?oe.update():(this.accessibility=oe=new B(this),oe&&!oe.zombie&&oe.update(),xe.getAttribute("role")==="img"&&xe.removeAttribute("role"));else if(oe)oe.destroy&&oe.destroy(),delete this.accessibility;else{this.renderTo.setAttribute("role","img"),this.renderTo.setAttribute("aria-hidden",!1),this.renderTo.setAttribute("aria-label",(Se&&Se.element.textContent||"").replace(/</g,"&lt;")),xe.setAttribute("aria-hidden",!0);let K=document.getElementsByClassName("highcharts-description")[0];K&&(K.setAttribute("aria-hidden",!1),K.classList.remove("highcharts-linked-description"))}}function ie(){this.series.chart.accessibility&&(this.series.chart.a11yDirty=!0)}B.i18nFormat=p.i18nFormat,B.compose=function(oe,Ee,xe,Se,K,Q){y.compose(oe),k.compose(Se),C.compose(oe,Ee),_.compose(oe),P.compose(oe,xe,Se),p.compose(oe),g.compose(oe,K),Q&&x.compose(oe,Q);let ae=oe.prototype;ae.updateA11yEnabled||(ae.updateA11yEnabled=de,V(oe,"destroy",H),V(oe,"render",W),V(oe,"update",re),["addSeries","init"].forEach(_e=>{V(oe,_e,function(){this.a11yDirty=!0})}),["afterApplyDrilldown","drillupall"].forEach(_e=>{V(oe,_e,function(){let J=this.accessibility;J&&!J.zombie&&J.update()})}),V(xe,"update",ie),["update","updatedData","remove"].forEach(_e=>{V(Se,_e,function(){this.chart.accessibility&&(this.chart.a11yDirty=!0)})}))}}(U),R(!0,X,N,{accessibility:{highContrastTheme:I},lang:q}),U}),r(t,"masters/modules/accessibility.src.js",[t["Core/Globals.js"],t["Accessibility/Accessibility.js"],t["Accessibility/AccessibilityComponent.js"],t["Accessibility/Utils/ChartUtilities.js"],t["Accessibility/Utils/HTMLUtilities.js"],t["Accessibility/KeyboardNavigationHandler.js"],t["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(s,l,u,n,p,m,g){return s.i18nFormat=l.i18nFormat,s.A11yChartUtilities=n,s.A11yHTMLUtilities=p,s.AccessibilityComponent=u,s.KeyboardNavigationHandler=m,s.SeriesAccessibilityDescriber=g,l.compose(s.Chart,s.Legend,s.Point,s.Series,s.SVGElement,s.RangeSelector),s})})})(pE);var YN=pE.exports;const ZN=oh(YN);var fE={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function r(s,l,u,n){s.hasOwnProperty(l)||(s[l]=n.apply(null,u),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:l,module:s[l]}})))}r(t,"Extensions/Pane/PaneComposition.js",[t["Core/Utilities.js"]],function(s){let{addEvent:l,correctFloat:u,defined:n,pick:p}=s;function m(_){let w,k=this;return _&&k.pane.forEach(S=>{g(_.chartX-k.plotLeft,_.chartY-k.plotTop,S.center)&&(w=S)}),w}function g(_,w,k,S,x){let P=!0,D=k[0],T=k[1],I=Math.sqrt(Math.pow(_-D,2)+Math.pow(w-T,2));if(n(S)&&n(x)){let N=Math.atan2(u(w-T,8),u(_-D,8));x!==S&&(P=S>x?N>=S&&N<=Math.PI||N<=x&&N>=-Math.PI:N>=S&&N<=u(x,8))}return I<=Math.ceil(k[2]/2)&&P}function v(_){this.polar&&(_.options.inverted&&([_.x,_.y]=[_.y,_.x]),_.isInsidePlot=this.pane.some(w=>g(_.x,_.y,w.center,w.axis&&w.axis.normalizedStartAngleRad,w.axis&&w.axis.normalizedEndAngleRad)))}function y(_){let w=this.chart;_.hoverPoint&&_.hoverPoint.plotX&&_.hoverPoint.plotY&&w.hoverPane&&!g(_.hoverPoint.plotX,_.hoverPoint.plotY,w.hoverPane.center)&&(_.hoverPoint=void 0)}function C(_){let w=this.chart;w.polar?(w.hoverPane=w.getHoverPane(_),_.filter=function(k){return k.visible&&!(!_.shared&&k.directTouch)&&p(k.options.enableMouseTracking,!0)&&(!w.hoverPane||k.xAxis.pane===w.hoverPane)}):w.hoverPane=void 0}return{compose:function(_,w){let k=_.prototype;k.getHoverPane||(k.collectionsWithUpdate.push("pane"),k.getHoverPane=m,l(_,"afterIsInsidePlot",v),l(w,"afterGetHoverData",y),l(w,"beforeGetHoverData",C))}}}),r(t,"Extensions/Pane/PaneDefaults.js",[],function(){return{pane:{center:["50%","50%"],size:"85%",innerSize:"0%",startAngle:0},background:{shape:"circle",borderRadius:0,borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}}}),r(t,"Extensions/Pane/Pane.js",[t["Series/CenteredUtilities.js"],t["Extensions/Pane/PaneComposition.js"],t["Extensions/Pane/PaneDefaults.js"],t["Core/Utilities.js"]],function(s,l,u,n){let{extend:p,merge:m,splat:g}=n;class v{constructor(C,_){this.coll="pane",this.init(C,_)}init(C,_){this.chart=_,this.background=[],_.pane.push(this),this.setOptions(C)}setOptions(C){this.options=C=m(u.pane,this.chart.angular?{background:{}}:void 0,C)}render(){let C=this.options,_=this.chart.renderer;this.group||(this.group=_.g("pane-group").attr({zIndex:C.zIndex||0}).add()),this.updateCenter();let w=this.options.background;if(w){let k=Math.max((w=g(w)).length,this.background.length||0);for(let S=0;S<k;S++)w[S]&&this.axis?this.renderBackground(m(u.background,w[S]),S):this.background[S]&&(this.background[S]=this.background[S].destroy(),this.background.splice(S,1))}}renderBackground(C,_){let w={class:"highcharts-pane "+(C.className||"")},k="animate";this.chart.styledMode||p(w,{fill:C.backgroundColor,stroke:C.borderColor,"stroke-width":C.borderWidth}),this.background[_]||(this.background[_]=this.chart.renderer.path().add(this.group),k="attr"),this.background[_][k]({d:this.axis.getPlotBandPath(C.from,C.to,C)}).attr(w)}updateCenter(C){this.center=(C||this.axis||{}).center=s.getCenter.call(this)}update(C,_){m(!0,this.options,C),this.setOptions(this.options),this.render(),this.chart.axes.forEach(function(w){w.pane===this&&(w.pane=null,w.update({},_))},this)}}return v.compose=l.compose,v}),r(t,"Series/AreaRange/AreaRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l){let{area:{prototype:{pointClass:u,pointClass:{prototype:n}}}}=s.seriesTypes,{defined:p,isNumber:m}=l;return class extends u{setState(){let g=this.state,v=this.series,y=v.chart.polar;p(this.plotHigh)||(this.plotHigh=v.yAxis.toPixels(this.high,!0)),p(this.plotLow)||(this.plotLow=this.plotY=v.yAxis.toPixels(this.low,!0)),v.lowerStateMarkerGraphic=v.stateMarkerGraphic,v.stateMarkerGraphic=v.upperStateMarkerGraphic,this.graphic=this.graphics&&this.graphics[1],this.plotY=this.plotHigh,y&&m(this.plotHighX)&&(this.plotX=this.plotHighX),n.setState.apply(this,arguments),this.state=g,this.plotY=this.plotLow,this.graphic=this.graphics&&this.graphics[0],y&&m(this.plotLowX)&&(this.plotX=this.plotLowX),v.upperStateMarkerGraphic=v.stateMarkerGraphic,v.stateMarkerGraphic=v.lowerStateMarkerGraphic,v.lowerStateMarkerGraphic=void 0;let C=v.modifyMarkerSettings();n.setState.apply(this,arguments),v.restoreMarkerSettings(C)}haloPath(){let g=this.series.chart.polar,v=[];return this.plotY=this.plotLow,g&&m(this.plotLowX)&&(this.plotX=this.plotLowX),this.isInside&&(v=n.haloPath.apply(this,arguments)),this.plotY=this.plotHigh,g&&m(this.plotHighX)&&(this.plotX=this.plotHighX),this.isTopInside&&(v=v.concat(n.haloPath.apply(this,arguments))),v}isValid(){return m(this.low)&&m(this.high)}}}),r(t,"Series/AreaRange/AreaRangeSeries.js",[t["Series/AreaRange/AreaRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,n){let{noop:p}=l,{area:m,area:{prototype:g},column:{prototype:v}}=u.seriesTypes,{addEvent:y,defined:C,extend:_,isArray:w,isNumber:k,pick:S,merge:x}=n;class P extends m{toYData(T){return[T.low,T.high]}highToXY(T){let I=this.chart,N=this.xAxis.postTranslate(T.rectPlotX||0,this.yAxis.len-(T.plotHigh||0));T.plotHighX=N.x-I.plotLeft,T.plotHigh=N.y-I.plotTop,T.plotLowX=T.plotX}getGraphPath(T){let I=[],N=[],q=g.getGraphPath,Z=this.options,X=this.chart.polar,O=X&&Z.connectEnds!==!1,V=Z.connectNulls,$,L,R,G=Z.step;for($=(T=T||this.points).length;$--;){L=T[$];let re=X?{plotX:L.rectPlotX,plotY:L.yBottom,doCurve:!1}:{plotX:L.plotX,plotY:L.plotY,doCurve:!1};L.isNull||O||V||T[$+1]&&!T[$+1].isNull||N.push(re),R={polarPlotY:L.polarPlotY,rectPlotX:L.rectPlotX,yBottom:L.yBottom,plotX:S(L.plotHighX,L.plotX),plotY:L.plotHigh,isNull:L.isNull},N.push(R),I.push(R),L.isNull||O||V||T[$-1]&&!T[$-1].isNull||N.push(re)}let U=q.call(this,T);G&&(G===!0&&(G="left"),Z.step={left:"right",center:"center",right:"left"}[G]);let B=q.call(this,I),H=q.call(this,N);Z.step=G;let W=[].concat(U,B);return!this.chart.polar&&H[0]&&H[0][0]==="M"&&(H[0]=["L",H[0][1],H[0][2]]),this.graphPath=W,this.areaPath=U.concat(H),W.isArea=!0,W.xMap=U.xMap,this.areaPath.xMap=U.xMap,W}drawDataLabels(){var R,G;let T,I,N,q,Z,X=this.points,O=X.length,V=[],$=this.options.dataLabels,L=this.chart.inverted;if($){if(w($)?(q=$[0]||{enabled:!1},Z=$[1]||{enabled:!1}):((q=_({},$)).x=$.xHigh,q.y=$.yHigh,(Z=_({},$)).x=$.xLow,Z.y=$.yLow),q.enabled||((R=this.hasDataLabels)==null?void 0:R.call(this))){for(T=O;T--;)if(I=X[T]){let{plotHigh:U=0,plotLow:B=0}=I;N=q.inside?U<B:U>B,I.y=I.high,I._plotY=I.plotY,I.plotY=U,V[T]=I.dataLabel,I.dataLabel=I.dataLabelUpper,I.below=N,L?q.align||(q.align=N?"right":"left"):q.verticalAlign||(q.verticalAlign=N?"top":"bottom")}for(this.options.dataLabels=q,g.drawDataLabels&&g.drawDataLabels.apply(this,arguments),T=O;T--;)(I=X[T])&&(I.dataLabelUpper=I.dataLabel,I.dataLabel=V[T],delete I.dataLabels,I.y=I.low,I.plotY=I._plotY)}if(Z.enabled||(G=this.hasDataLabels)!=null&&G.call(this)){for(T=O;T--;)if(I=X[T]){let{plotHigh:U=0,plotLow:B=0}=I;N=Z.inside?U<B:U>B,I.below=!N,L?Z.align||(Z.align=N?"left":"right"):Z.verticalAlign||(Z.verticalAlign=N?"bottom":"top")}this.options.dataLabels=Z,g.drawDataLabels&&g.drawDataLabels.apply(this,arguments)}if(q.enabled)for(T=O;T--;)(I=X[T])&&(I.dataLabels=[I.dataLabelUpper,I.dataLabel].filter(function(U){return!!U}));this.options.dataLabels=$}}alignDataLabel(){v.alignDataLabel.apply(this,arguments)}modifyMarkerSettings(){let T={marker:this.options.marker,symbol:this.symbol};if(this.options.lowMarker){let{options:{marker:I,lowMarker:N}}=this;this.options.marker=x(I,N),N.symbol&&(this.symbol=N.symbol)}return T}restoreMarkerSettings(T){this.options.marker=T.marker,this.symbol=T.symbol}drawPoints(){let T,I,N=this.points.length,q=this.modifyMarkerSettings();for(g.drawPoints.apply(this,arguments),this.restoreMarkerSettings(q),T=0;T<N;)(I=this.points[T]).graphics=I.graphics||[],I.origProps={plotY:I.plotY,plotX:I.plotX,isInside:I.isInside,negative:I.negative,zone:I.zone,y:I.y},(I.graphic||I.graphics[0])&&(I.graphics[0]=I.graphic),I.graphic=I.graphics[1],I.plotY=I.plotHigh,C(I.plotHighX)&&(I.plotX=I.plotHighX),I.y=S(I.high,I.origProps.y),I.negative=I.y<(this.options.threshold||0),this.zones.length&&(I.zone=I.getZone()),this.chart.polar||(I.isInside=I.isTopInside=I.plotY!==void 0&&I.plotY>=0&&I.plotY<=this.yAxis.len&&I.plotX>=0&&I.plotX<=this.xAxis.len),T++;for(g.drawPoints.apply(this,arguments),T=0;T<N;)(I=this.points[T]).graphics=I.graphics||[],(I.graphic||I.graphics[1])&&(I.graphics[1]=I.graphic),I.graphic=I.graphics[0],I.origProps&&(_(I,I.origProps),delete I.origProps),T++}hasMarkerChanged(T,I){let N=T.lowMarker,q=I.lowMarker||{};return N&&(N.enabled===!1||q.symbol!==N.symbol||q.height!==N.height||q.width!==N.width)||super.hasMarkerChanged(T,I)}}return P.defaultOptions=x(m.defaultOptions,{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:void 0,verticalAlign:void 0,xLow:0,xHigh:0,yLow:0,yHigh:0}}),y(P,"afterTranslate",function(){this.pointArrayMap.join(",")==="low,high"&&this.points.forEach(D=>{let T=D.high,I=D.plotY;D.isNull?D.plotY=void 0:(D.plotLow=I,D.plotHigh=k(T)?this.yAxis.translate(this.dataModify?this.dataModify.modifyValue(T):T,!1,!0,void 0,!0):void 0,this.dataModify&&(D.yBottom=D.plotHigh))})},{order:0}),y(P,"afterTranslate",function(){this.points.forEach(D=>{if(this.chart.polar)this.highToXY(D),D.plotLow=D.plotY,D.tooltipPos=[((D.plotHighX||0)+(D.plotLowX||0))/2,((D.plotHigh||0)+(D.plotLow||0))/2];else{let T=D.pos(!1,D.plotLow),I=D.pos(!1,D.plotHigh);T&&I&&(T[0]=(T[0]+I[0])/2,T[1]=(T[1]+I[1])/2),D.tooltipPos=T}})},{order:3}),_(P.prototype,{deferTranslatePolar:!0,pointArrayMap:["low","high"],pointClass:s,pointValKey:"low",setStackedPoints:p}),u.registerSeriesType("arearange",P),P}),r(t,"Series/AreaSplineRange/AreaSplineRangeSeries.js",[t["Series/AreaRange/AreaRangeSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{spline:{prototype:n}}=l.seriesTypes,{merge:p,extend:m}=u;class g extends s{}return g.defaultOptions=p(s.defaultOptions),m(g.prototype,{getPointSpline:n.getPointSpline}),l.registerSeriesType("areasplinerange",g),g}),r(t,"Series/BoxPlot/BoxPlotSeriesDefaults.js",[],function(){return{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">●</span> <b>{series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,whiskerWidth:2}}),r(t,"Series/BoxPlot/BoxPlotSeries.js",[t["Series/BoxPlot/BoxPlotSeriesDefaults.js"],t["Series/Column/ColumnSeries.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,n,p){let{noop:m}=u,{crisp:g,extend:v,merge:y,pick:C}=p;class _ extends l{pointAttribs(){return{}}translate(){let k=this.yAxis,S=this.pointArrayMap;super.translate.apply(this),this.points.forEach(function(x){S.forEach(function(P){x[P]!==null&&(x[P+"Plot"]=k.translate(x[P],0,1,0,1))}),x.plotHigh=x.highPlot})}drawPoints(){let k,S,x,P,D,T,I,N,q,Z,X,O,V,$=this.points,L=this.options,R=this.chart,G=R.renderer,U=this.doQuartiles!==!1,B=this.options.whiskerLength;for(let H of $){let W=(N=H.graphic)?"animate":"attr",re=H.shapeArgs,de={},ie={},oe={},Ee={},xe=H.color||this.color;if(H.plotY!==void 0){let Se;q=re.width,X=(Z=re.x)+q,O=q/2,k=U?H.q1Plot:H.lowPlot,S=U?H.q3Plot:H.lowPlot,x=H.highPlot,P=H.lowPlot,N||(H.graphic=N=G.g("point").add(this.group),H.stem=G.path().addClass("highcharts-boxplot-stem").add(N),B&&(H.whiskers=G.path().addClass("highcharts-boxplot-whisker").add(N)),U&&(H.box=G.path(I).addClass("highcharts-boxplot-box").add(N)),H.medianShape=G.path(T).addClass("highcharts-boxplot-median").add(N)),R.styledMode||(ie.stroke=H.stemColor||L.stemColor||xe,ie["stroke-width"]=C(H.stemWidth,L.stemWidth,L.lineWidth),ie.dashstyle=H.stemDashStyle||L.stemDashStyle||L.dashStyle,H.stem.attr(ie),B&&(oe.stroke=H.whiskerColor||L.whiskerColor||xe,oe["stroke-width"]=C(H.whiskerWidth,L.whiskerWidth,L.lineWidth),oe.dashstyle=H.whiskerDashStyle||L.whiskerDashStyle||L.dashStyle,H.whiskers.attr(oe)),U&&(de.fill=H.fillColor||L.fillColor||xe,de.stroke=L.lineColor||xe,de["stroke-width"]=L.lineWidth||0,de.dashstyle=H.boxDashStyle||L.boxDashStyle||L.dashStyle,H.box.attr(de)),Ee.stroke=H.medianColor||L.medianColor||xe,Ee["stroke-width"]=C(H.medianWidth,L.medianWidth,L.lineWidth),Ee.dashstyle=H.medianDashStyle||L.medianDashStyle||L.dashStyle,H.medianShape.attr(Ee));let K=g((H.plotX||0)+(this.pointXOffset||0)+(this.barW||0)/2,H.stem.strokeWidth());if(Se=[["M",K,S],["L",K,x],["M",K,k],["L",K,P]],H.stem[W]({d:Se}),U){let Q=H.box.strokeWidth();k=g(k,Q),S=g(S,Q),Se=[["M",Z=g(Z,Q),S],["L",Z,k],["L",X=g(X,Q),k],["L",X,S],["L",Z,S],["Z"]],H.box[W]({d:Se})}if(B){let Q=H.whiskers.strokeWidth();x=g(H.highPlot,Q),P=g(H.lowPlot,Q),Se=[["M",g(K-(V=typeof B=="string"&&/%$/.test(B)?O*parseFloat(B)/100:Number(B)/2)),x],["L",g(K+V),x],["M",g(K-V),P],["L",g(K+V),P]],H.whiskers[W]({d:Se})}Se=[["M",Z,D=g(H.medianPlot,H.medianShape.strokeWidth())],["L",X,D]],H.medianShape[W]({d:Se})}}}toYData(k){return[k.low,k.q1,k.median,k.q3,k.high]}}return _.defaultOptions=y(l.defaultOptions,s),v(_.prototype,{pointArrayMap:["low","q1","median","q3","high"],pointValKey:"high",drawDataLabels:m,setStackedPoints:m}),n.registerSeriesType("boxplot",_),_}),r(t,"Series/Bubble/BubbleLegendDefaults.js",[],function(){return{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}),r(t,"Series/Bubble/BubbleLegendItem.js",[t["Core/Color/Color.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u,n){let{parse:p}=s,{noop:m}=u,{arrayMax:g,arrayMin:v,isNumber:y,merge:C,pick:_,stableSort:w}=n;return class{constructor(k,S){this.setState=m,this.init(k,S)}init(k,S){this.options=k,this.visible=!0,this.chart=S.chart,this.legend=S}addToLegend(k){k.splice(this.options.legendIndex,0,this)}drawLegendSymbol(k){let S,x=_(k.options.itemDistance,20),P=this.legendItem||{},D=this.options,T=D.ranges,I=D.connectorDistance;if(!T||!T.length||!y(T[0].value)){k.options.bubbleLegend.autoRanges=!0;return}w(T,function(X,O){return O.value-X.value}),this.ranges=T,this.setOptions(),this.render();let N=this.getMaxLabelSize(),q=this.ranges[0].radius,Z=2*q;S=(S=I-q+N.width)>0?S:0,this.maxLabel=N,this.movementX=D.labels.align==="left"?S:0,P.labelWidth=Z+S+x,P.labelHeight=Z+N.height/2}setOptions(){let k=this.ranges,S=this.options,x=this.chart.series[S.seriesIndex],P=this.legend.baseline,D={zIndex:S.zIndex,"stroke-width":S.borderWidth},T={zIndex:S.zIndex,"stroke-width":S.connectorWidth},I={align:this.legend.options.rtl||S.labels.align==="left"?"right":"left",zIndex:S.zIndex},N=x.options.marker.fillOpacity,q=this.chart.styledMode;k.forEach(function(Z,X){q||(D.stroke=_(Z.borderColor,S.borderColor,x.color),D.fill=_(Z.color,S.color,N!==1?p(x.color).setOpacity(N).get("rgba"):x.color),T.stroke=_(Z.connectorColor,S.connectorColor,x.color)),k[X].radius=this.getRangeRadius(Z.value),k[X]=C(k[X],{center:k[0].radius-k[X].radius+P}),q||C(!0,k[X],{bubbleAttribs:C(D),connectorAttribs:C(T),labelAttribs:I})},this)}getRangeRadius(k){let S=this.options,x=this.options.seriesIndex,P=this.chart.series[x],D=S.ranges[0].value,T=S.ranges[S.ranges.length-1].value,I=S.minSize,N=S.maxSize;return P.getRadius.call(this,T,D,I,N,k)}render(){let k=this.legendItem||{},S=this.chart.renderer,x=this.options.zThreshold;for(let P of(this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),k.symbol=S.g("bubble-legend"),k.label=S.g("bubble-legend-item").css(this.legend.itemStyle||{}),k.symbol.translateX=0,k.symbol.translateY=0,k.symbol.add(k.label),k.label.add(k.group),this.ranges))P.value>=x&&this.renderRange(P);this.hideOverlappingLabels()}renderRange(k){let S=this.ranges[0],x=this.legend,P=this.options,D=P.labels,T=this.chart,I=T.series[P.seriesIndex],N=T.renderer,q=this.symbols,Z=q.labels,X=k.center,O=Math.abs(k.radius),V=P.connectorDistance||0,$=D.align,L=x.options.rtl,R=P.borderWidth,G=P.connectorWidth,U=S.radius||0,B=X-O-R/2+G/2,H=(B%1?1:.5)-(G%2?0:.5),W=N.styledMode,re=L||$==="left"?-V:V;$==="center"&&(re=0,P.connectorDistance=0,k.labelAttribs.align="center"),q.bubbleItems.push(N.circle(U,X+H,O).attr(W?{}:k.bubbleAttribs).addClass((W?"highcharts-color-"+I.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(P.className||"")).add(this.legendItem.symbol)),q.connectors.push(N.path(N.crispLine([["M",U,B],["L",U+re,B]],P.connectorWidth)).attr(W?{}:k.connectorAttribs).addClass((W?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(P.connectorClassName||"")).add(this.legendItem.symbol));let de=N.text(this.formatLabel(k)).attr(W?{}:k.labelAttribs).css(W?{}:D.style).addClass("highcharts-bubble-legend-labels "+(P.labels.className||"")).add(this.legendItem.symbol),ie={x:U+re+P.labels.x,y:B+P.labels.y+.4*de.getBBox().height};de.attr(ie),Z.push(de),de.placed=!0,de.alignAttr=ie}getMaxLabelSize(){let k,S;return this.symbols.labels.forEach(function(x){S=x.getBBox(!0),k=k?S.width>k.width?S:k:S}),k||{}}formatLabel(k){let S=this.options,x=S.labels.formatter,P=S.labels.format,{numberFormatter:D}=this.chart;return P?l.format(P,k):x?x.call(k):D(k.value,1)}hideOverlappingLabels(){let k=this.chart,S=this.options.labels.allowOverlap,x=this.symbols;!S&&x&&(k.hideOverlappingLabels(x.labels),x.labels.forEach(function(P,D){P.newOpacity?P.newOpacity!==P.oldOpacity&&x.connectors[D].show():x.connectors[D].hide()}))}getRanges(){let k=this.legend.bubbleLegend,S=k.chart.series,x=k.options.ranges,P,D,T=Number.MAX_VALUE,I=-Number.MAX_VALUE;return S.forEach(function(N){N.isBubble&&!N.ignoreSeries&&(D=N.zData.filter(y)).length&&(T=_(N.options.zMin,Math.min(T,Math.max(v(D),N.options.displayNegative===!1?N.options.zThreshold:-Number.MAX_VALUE))),I=_(N.options.zMax,Math.max(I,g(D))))}),P=T===I?[{value:I}]:[{value:T},{value:(T+I)/2},{value:I,autoRanges:!0}],x.length&&x[0].radius&&P.reverse(),P.forEach(function(N,q){x&&x[q]&&(P[q]=C(x[q],N))}),P}predictBubbleSizes(){let k=this.chart,S=k.legend.options,x=S.floating,P=S.layout==="horizontal",D=P?k.legend.lastLineHeight:0,T=k.plotSizeX,I=k.plotSizeY,N=k.series[this.options.seriesIndex],q=N.getPxExtremes(),Z=Math.ceil(q.minPxSize),X=Math.ceil(q.maxPxSize),O=Math.min(I,T),V,$=N.options.maxSize;return x||!/%$/.test($)?V=X:(V=(O+D)*($=parseFloat($))/100/($/100+1),(P&&I-V>=T||!P&&T-V>=I)&&(V=X)),[Z,Math.ceil(V)]}updateRanges(k,S){let x=this.legend.options.bubbleLegend;x.minSize=k,x.maxSize=S,x.ranges=this.getRanges()}correctSizes(){let k=this.legend,S=this.chart.series[this.options.seriesIndex].getPxExtremes();Math.abs(Math.ceil(S.maxPxSize)-this.options.maxSize)>1&&(this.updateRanges(this.options.minSize,S.maxPxSize),k.render())}}}),r(t,"Series/Bubble/BubbleLegendComposition.js",[t["Series/Bubble/BubbleLegendDefaults.js"],t["Series/Bubble/BubbleLegendItem.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u,n,p){let{setOptions:m}=u,{composed:g}=n,{addEvent:v,objectEach:y,pushUnique:C,wrap:_}=p;function w(T,I,N){let q,Z,X,O=this.legend,V=k(this)>=0;O&&O.options.enabled&&O.bubbleLegend&&O.options.bubbleLegend.autoRanges&&V?(q=O.bubbleLegend.options,Z=O.bubbleLegend.predictBubbleSizes(),O.bubbleLegend.updateRanges(Z[0],Z[1]),q.placed||(O.group.placed=!1,O.allItems.forEach($=>{(X=$.legendItem||{}).group&&(X.group.translateY=void 0)})),O.render(),q.placed||(this.getMargins(),this.axes.forEach(function($){$.visible&&$.render(),q.placed||($.setScale(),$.updateNames(),y($.ticks,function(L){L.isNew=!0,L.isNewLabel=!0}))}),this.getMargins()),q.placed=!0,T.call(this,I,N),O.bubbleLegend.correctSizes(),D(O,S(O))):(T.call(this,I,N),O&&O.options.enabled&&O.bubbleLegend&&(O.render(),D(O,S(O))))}function k(T){let I=T.series,N=0;for(;N<I.length;){if(I[N]&&I[N].isBubble&&I[N].visible&&I[N].zData.length)return N;N++}return-1}function S(T){let I=T.allItems,N=[],q=I.length,Z,X,O,V=0,$=0;for(V=0;V<q;V++)if(X=I[V].legendItem||{},O=(I[V+1]||{}).legendItem||{},X.labelHeight&&(I[V].itemHeight=X.labelHeight),I[V]===I[q-1]||X.y!==O.y){for(N.push({height:0}),Z=N[N.length-1];$<=V;$++)I[$].itemHeight>Z.height&&(Z.height=I[$].itemHeight);Z.step=V}return N}function x(T){let I=this.bubbleLegend,N=this.options,q=N.bubbleLegend,Z=k(this.chart);I&&I.ranges&&I.ranges.length&&(q.ranges.length&&(q.autoRanges=!!q.ranges[0].autoRanges),this.destroyItem(I)),Z>=0&&N.enabled&&q.enabled&&(q.seriesIndex=Z,this.bubbleLegend=new l(q,this),this.bubbleLegend.addToLegend(T.allItems))}function P(T){let I;if(T.defaultPrevented)return!1;let N=T.legendItem,q=this.chart,Z=N.visible;this&&this.bubbleLegend&&(N.visible=!Z,N.ignoreSeries=Z,I=k(q)>=0,this.bubbleLegend.visible!==I&&(this.update({bubbleLegend:{enabled:I}}),this.bubbleLegend.visible=I),N.visible=Z)}function D(T,I){let N=T.allItems,q=T.options.rtl,Z,X,O,V,$=0;N.forEach((L,R)=>{(V=L.legendItem||{}).group&&(Z=V.group.translateX||0,X=V.y||0,((O=L.movementX)||q&&L.ranges)&&(O=q?Z-L.options.maxSize/2:Z+O,V.group.attr({translateX:O})),R>I[$].step&&$++,V.group.attr({translateY:Math.round(X+I[$].height/2)}),V.y=X+I[$].height/2)})}return{compose:function(T,I){C(g,"Series.BubbleLegend")&&(m({legend:{bubbleLegend:s}}),_(T.prototype,"drawChartBox",w),v(I,"afterGetAllItems",x),v(I,"itemClick",P))}}}),r(t,"Series/Bubble/BubblePoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{seriesTypes:{scatter:{prototype:{pointClass:n}}}}=l,{extend:p}=u;class m extends n{haloPath(v){let y=(v&&this.marker&&this.marker.radius||0)+v;if(this.series.chart.inverted){let C=this.pos()||[0,0],{xAxis:_,yAxis:w,chart:k}=this.series;return k.renderer.symbols.circle(_.len-C[1]-y,w.len-C[0]-y,2*y,2*y)}return s.prototype.haloPath.call(this,y)}}return p(m.prototype,{ttBelow:!1}),m}),r(t,"Series/Bubble/BubbleSeries.js",[t["Series/Bubble/BubbleLegendComposition.js"],t["Series/Bubble/BubblePoint.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,n,p,m){let{parse:g}=u,{composed:v,noop:y}=n,{series:C,seriesTypes:{column:{prototype:_},scatter:w}}=p,{addEvent:k,arrayMax:S,arrayMin:x,clamp:P,extend:D,isNumber:T,merge:I,pick:N,pushUnique:q}=m;function Z(){let O=this.len,{coll:V,isXAxis:$,min:L}=this,R=$?"xData":"yData",G=(this.max||0)-(L||0),U=0,B=O,H=O/G,W;(V==="xAxis"||V==="yAxis")&&(this.series.forEach(re=>{if(re.bubblePadding&&re.reserveSpace()){this.allowZoomOutside=!0,W=!0;let de=re[R];if($&&((re.onPoint||re).getRadii(0,0,re),re.onPoint&&(re.radii=re.onPoint.radii)),G>0){let ie=de.length;for(;ie--;)if(T(de[ie])&&this.dataMin<=de[ie]&&de[ie]<=this.max){let oe=re.radii&&re.radii[ie]||0;U=Math.min((de[ie]-L)*H-oe,U),B=Math.max((de[ie]-L)*H+oe,B)}}}}),W&&G>0&&!this.logarithmic&&(B-=O,H*=(O+Math.max(0,U)-Math.min(B,O))/O,[["min","userMin",U],["max","userMax",B]].forEach(re=>{N(this.options[re[0]],this[re[1]])===void 0&&(this[re[0]]+=re[2]/H)})))}class X extends w{static compose(V,$,L){s.compose($,L),q(v,"Series.Bubble")&&k(V,"foundExtremes",Z)}animate(V){!V&&this.points.length<this.options.animationLimit&&this.points.forEach(function($){let{graphic:L,plotX:R=0,plotY:G=0}=$;L&&L.width&&(this.hasRendered||L.attr({x:R,y:G,width:1,height:1}),L.animate(this.markerAttribs($),this.options.animation))},this)}getRadii(){let V=this.zData,$=this.yData,L=[],R,G,U,B=this.chart.bubbleZExtremes,{minPxSize:H,maxPxSize:W}=this.getPxExtremes();if(!B){let re,de=Number.MAX_VALUE,ie=-Number.MAX_VALUE;this.chart.series.forEach(oe=>{if(oe.bubblePadding&&oe.reserveSpace()){let Ee=(oe.onPoint||oe).getZExtremes();Ee&&(de=Math.min(N(de,Ee.zMin),Ee.zMin),ie=Math.max(N(ie,Ee.zMax),Ee.zMax),re=!0)}}),re?(B={zMin:de,zMax:ie},this.chart.bubbleZExtremes=B):B={zMin:0,zMax:0}}for(G=0,R=V.length;G<R;G++)U=V[G],L.push(this.getRadius(B.zMin,B.zMax,H,W,U,$&&$[G]));this.radii=L}getRadius(V,$,L,R,G,U){let B=this.options,H=B.sizeBy!=="width",W=B.zThreshold,re=$-V,de=.5;if(U===null||G===null)return null;if(T(G)){if(B.sizeByAbsoluteValue&&(G=Math.abs(G-W),$=re=Math.max($-W,Math.abs(V-W)),V=0),G<V)return L/2-1;re>0&&(de=(G-V)/re)}return H&&de>=0&&(de=Math.sqrt(de)),Math.ceil(L+de*(R-L))/2}hasData(){return!!this.processedXData.length}markerAttribs(V,$){let L=super.markerAttribs(V,$),{height:R=0,width:G=0}=L;return this.chart.inverted?D(L,{x:(V.plotX||0)-G/2,y:(V.plotY||0)-R/2}):L}pointAttribs(V,$){let L=this.options.marker.fillOpacity,R=C.prototype.pointAttribs.call(this,V,$);return L!==1&&(R.fill=g(R.fill).setOpacity(L).get("rgba")),R}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){let{data:V,options:$,radii:L}=this,{minPxSize:R}=this.getPxExtremes(),G=V.length;for(;G--;){let U=V[G],B=L?L[G]:0;this.zoneAxis==="z"&&(U.negative=(U.z||0)<($.zThreshold||0)),T(B)&&B>=R/2?(U.marker=D(U.marker,{radius:B,width:2*B,height:2*B}),U.dlBox={x:U.plotX-B,y:U.plotY-B,width:2*B,height:2*B}):(U.shapeArgs=U.plotY=U.dlBox=void 0,U.isInside=!1)}}getPxExtremes(){let V=Math.min(this.chart.plotWidth,this.chart.plotHeight),$=G=>{let U;return typeof G=="string"&&(U=/%$/.test(G),G=parseInt(G,10)),U?V*G/100:G},L=$(N(this.options.minSize,8)),R=Math.max($(N(this.options.maxSize,"20%")),L);return{minPxSize:L,maxPxSize:R}}getZExtremes(){let V=this.options,$=(this.zData||[]).filter(T);if($.length){let L=N(V.zMin,P(x($),V.displayNegative===!1?V.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),R=N(V.zMax,S($));if(T(L)&&T(R))return{zMin:L,zMax:R}}}}return X.defaultOptions=I(w.defaultOptions,{dataLabels:{formatter:function(){let{numberFormatter:O}=this.series.chart,{z:V}=this.point;return T(V)?O(V,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),D(X.prototype,{alignDataLabel:_.alignDataLabel,applyZones:y,bubblePadding:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:l,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),k(X,"updatedData",O=>{delete O.target.chart.bubbleZExtremes}),k(X,"remove",O=>{delete O.target.chart.bubbleZExtremes}),p.registerSeriesType("bubble",X),X}),r(t,"Series/ColumnRange/ColumnRangePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l){let{seriesTypes:{column:{prototype:{pointClass:{prototype:u}}},arearange:{prototype:{pointClass:n}}}}=s,{extend:p,isNumber:m}=l;class g extends n{isValid(){return m(this.low)}}return p(g.prototype,{setState:u.setState}),g}),r(t,"Series/ColumnRange/ColumnRangeSeries.js",[t["Series/ColumnRange/ColumnRangePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,n){let{noop:p}=l,{seriesTypes:{arearange:m,column:g,column:{prototype:v}}}=u,{addEvent:y,clamp:C,extend:_,isNumber:w,merge:k,pick:S}=n;class x extends m{setOptions(){return k(!0,arguments[0],{stacking:void 0}),m.prototype.setOptions.apply(this,arguments)}translate(){return v.translate.apply(this)}pointAttribs(){return v.pointAttribs.apply(this,arguments)}translate3dPoints(){return v.translate3dPoints.apply(this,arguments)}translate3dShapes(){return v.translate3dShapes.apply(this,arguments)}afterColumnTranslate(){let D,T,I,N,q=this.yAxis,Z=this.xAxis,X=Z.startAngleRad,O=this.chart,V=this.xAxis.isRadial,$=Math.max(O.chartWidth,O.chartHeight)+999;this.points.forEach(L=>{let R=L.shapeArgs||{},G=this.options.minPointLength,U=L.plotY,B=q.translate(L.high,0,1,0,1);if(w(B)&&w(U))if(L.plotHigh=C(B,-$,$),L.plotLow=C(U,-$,$),N=L.plotHigh,Math.abs(D=S(L.rectPlotY,L.plotY)-L.plotHigh)<G?(T=G-D,D+=T,N-=T/2):D<0&&(D*=-1,N-=D),V&&this.polar)I=L.barX+X,L.shapeType="arc",L.shapeArgs=this.polar.arc(N+D,N,I,I+L.pointWidth);else{R.height=D,R.y=N;let{x:H=0,width:W=0}=R;L.shapeArgs=k(L.shapeArgs,this.crispCol(H,N,W,D)),L.tooltipPos=O.inverted?[q.len+q.pos-O.plotLeft-N-D/2,Z.len+Z.pos-O.plotTop-H-W/2,D]:[Z.left-O.plotLeft+H+W/2,q.pos-O.plotTop+N+D/2,D]}})}}return x.defaultOptions=k(g.defaultOptions,m.defaultOptions,{borderRadius:{where:"all"},pointRange:null,legendSymbol:"rectangle",marker:null,states:{hover:{halo:!1}}}),y(x,"afterColumnTranslate",function(){x.prototype.afterColumnTranslate.apply(this)},{order:5}),_(x.prototype,{directTouch:!0,pointClass:s,trackerGroups:["group","dataLabelsGroup"],adjustForMissingColumns:v.adjustForMissingColumns,animate:v.animate,crispCol:v.crispCol,drawGraph:p,drawPoints:v.drawPoints,getSymbol:p,drawTracker:v.drawTracker,getColumnMetrics:v.getColumnMetrics}),u.registerSeriesType("columnrange",x),x}),r(t,"Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js",[],function(){return{}}),r(t,"Series/ColumnPyramid/ColumnPyramidSeries.js",[t["Series/ColumnPyramid/ColumnPyramidSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u){let{column:n}=l.seriesTypes,{clamp:p,merge:m,pick:g}=u;class v extends n{translate(){let C=this.chart,_=this.options,w=this.dense=this.closestPointRange*this.xAxis.transA<2,k=this.borderWidth=g(_.borderWidth,w?0:1),S=this.yAxis,x=_.threshold,P=g(_.minPointLength,5),D=this.getColumnMetrics(),T=D.width,I=this.pointXOffset=D.offset,N=this.translatedThreshold=S.getThreshold(x),q=this.barW=Math.max(T,1+2*k);for(let Z of(C.inverted&&(N-=.5),_.pointPadding&&(q=Math.ceil(q)),super.translate(),this.points)){let X=g(Z.yBottom,N),O=999+Math.abs(X),V=p(Z.plotY,-O,S.len+O),$=q/2,L=Math.min(V,X),R=Math.max(V,X)-L,G=Z.plotX+I,U,B,H,W,re,de,ie,oe,Ee,xe,Se;_.centerInCategory&&(G=this.adjustForMissingColumns(G,T,Z,D)),Z.barX=G,Z.pointWidth=T,Z.tooltipPos=C.inverted?[S.len+S.pos-C.plotLeft-V,this.xAxis.len-G-$,R]:[G+$,V+S.pos-C.plotTop,R],U=x+(Z.total||Z.y),_.stacking==="percent"&&(U=x+(Z.y<0)?-100:100);let K=S.toPixels(U,!0);H=(B=C.plotHeight-K-(C.plotHeight-N))?$*(L-K)/B:0,W=B?$*(L+R-K)/B:0,de=G-H+$,ie=G+H+$,oe=G+W+$,Ee=G-W+$,xe=L-P,Se=L+R,Z.y<0&&(xe=L,Se=L+R+P),C.inverted&&(re=S.width-L,B=K-(S.width-N),H=$*(K-re)/B,W=$*(K-(re-R))/B,ie=(de=G+$+H)-2*H,oe=G-W+$,Ee=G+W+$,xe=L,Se=L+R-P,Z.y<0&&(Se=L+R+P)),Z.shapeType="path",Z.shapeArgs={x:de,y:xe,width:ie-de,height:R,d:[["M",de,xe],["L",ie,xe],["L",oe,Se],["L",Ee,Se],["Z"]]}}}}return v.defaultOptions=m(n.defaultOptions,s),l.registerSeriesType("columnpyramid",v),v}),r(t,"Series/ErrorBar/ErrorBarSeriesDefaults.js",[],function(){return{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}}),r(t,"Series/ErrorBar/ErrorBarSeries.js",[t["Series/BoxPlot/BoxPlotSeries.js"],t["Series/Column/ColumnSeries.js"],t["Series/ErrorBar/ErrorBarSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,n,p){let{arearange:m}=n.seriesTypes,{addEvent:g,merge:v,extend:y}=p;class C extends s{getColumnMetrics(){return this.linkedParent&&this.linkedParent.columnMetrics||l.prototype.getColumnMetrics.call(this)}drawDataLabels(){let w=this.pointValKey;if(m)for(let k of(m.prototype.drawDataLabels.call(this),this.points))k.y=k[w]}toYData(w){return[w.low,w.high]}}return C.defaultOptions=v(s.defaultOptions,u),g(C,"afterTranslate",function(){for(let _ of this.points)_.plotLow=_.plotY},{order:0}),y(C.prototype,{pointArrayMap:["low","high"],pointValKey:"high",doQuartiles:!1}),n.registerSeriesType("errorbar",C),C}),r(t,"Series/Gauge/GaugePoint.js",[t["Core/Series/SeriesRegistry.js"]],function(s){let{series:{prototype:{pointClass:l}}}=s;return class extends l{setState(u){this.state=u}}}),r(t,"Series/Gauge/GaugeSeries.js",[t["Series/Gauge/GaugePoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,n){let{noop:p}=l,{series:m,seriesTypes:{column:g}}=u,{clamp:v,isNumber:y,extend:C,merge:_,pick:w,pInt:k,defined:S}=n;class x extends m{translate(){let D=this.yAxis,T=this.options,I=D.center;this.generatePoints(),this.points.forEach(N=>{let q=_(T.dial,N.dial),Z=k(q.radius)*I[2]/200,X=k(q.baseLength)*Z/100,O=k(q.rearLength)*Z/100,V=q.baseWidth,$=q.topWidth,L=T.overshoot,R=D.startAngleRad+D.translate(N.y,void 0,void 0,void 0,!0);(y(L)||T.wrap===!1)&&(L=y(L)?L/180*Math.PI:0,R=v(R,D.startAngleRad-L,D.endAngleRad+L)),R=180*R/Math.PI,N.shapeType="path";let G=q.path||[["M",-O,-V/2],["L",X,-V/2],["L",Z,-$/2],["L",Z,$/2],["L",X,V/2],["L",-O,V/2],["Z"]];N.shapeArgs={d:G,translateX:I[0],translateY:I[1],rotation:R},N.plotX=I[0],N.plotY=I[1],S(N.y)&&D.max-D.min&&(N.percentage=(N.y-D.min)/(D.max-D.min)*100)})}drawPoints(){let D=this,T=D.chart,I=D.yAxis.center,N=D.pivot,q=D.options,Z=q.pivot,X=T.renderer;D.points.forEach(O=>{let V=O.graphic,$=O.shapeArgs,L=$.d,R=_(q.dial,O.dial);V?(V.animate($),$.d=L):O.graphic=X[O.shapeType]($).addClass("highcharts-dial").add(D.group),T.styledMode||O.graphic[V?"animate":"attr"]({stroke:R.borderColor,"stroke-width":R.borderWidth,fill:R.backgroundColor})}),N?N.animate({translateX:I[0],translateY:I[1]}):Z&&(D.pivot=X.circle(0,0,Z.radius).attr({zIndex:2}).addClass("highcharts-pivot").translate(I[0],I[1]).add(D.group),T.styledMode||D.pivot.attr({fill:Z.backgroundColor,stroke:Z.borderColor,"stroke-width":Z.borderWidth}))}animate(D){let T=this;D||T.points.forEach(I=>{let N=I.graphic;N&&(N.attr({rotation:180*T.yAxis.startAngleRad/Math.PI}),N.animate({rotation:I.shapeArgs.rotation},T.options.animation))})}render(){this.group=this.plotGroup("group","series",this.visible?"inherit":"hidden",this.options.zIndex,this.chart.seriesGroup),m.prototype.render.call(this),this.group.clip(this.chart.clipRect)}setData(D,T){m.prototype.setData.call(this,D,!1),this.processData(),this.generatePoints(),w(T,!0)&&this.chart.redraw()}hasData(){return!!this.points.length}}return x.defaultOptions=_(m.defaultOptions,{dataLabels:{borderColor:"#cccccc",borderRadius:3,borderWidth:1,crop:!1,defer:!1,enabled:!0,verticalAlign:"top",y:15,zIndex:2},dial:{backgroundColor:"#000000",baseLength:"70%",baseWidth:3,borderColor:"#cccccc",borderWidth:0,radius:"80%",rearLength:"10%",topWidth:1},pivot:{radius:5,borderWidth:0,borderColor:"#cccccc",backgroundColor:"#000000"},tooltip:{headerFormat:""},showInLegend:!1}),C(x.prototype,{angular:!0,directTouch:!0,drawGraph:p,drawTracker:g.prototype.drawTracker,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,pointClass:s,trackerGroups:["group","dataLabelsGroup"]}),u.registerSeriesType("gauge",x),x}),r(t,"Series/DragNodesComposition.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{composed:u}=s,{addEvent:n,pushUnique:p}=l;function m(){let g,v,y,C=this;C.container&&(g=n(C.container,"mousedown",_=>{let w=C.hoverPoint;w&&w.series&&w.series.hasDraggableNodes&&w.series.options.draggable&&(w.series.onMouseDown(w,_),v=n(C.container,"mousemove",k=>w&&w.series&&w.series.onMouseMove(w,k)),y=n(C.container.ownerDocument,"mouseup",k=>(v(),y(),w&&w.series&&w.series.onMouseUp(w,k))))})),n(C,"destroy",function(){g()})}return{compose:function(g){p(u,"DragNodes")&&n(g,"load",m)},onMouseDown:function(g,v){var C;let y=((C=this.chart.pointer)==null?void 0:C.normalize(v))||v;g.fixedPosition={chartX:y.chartX,chartY:y.chartY,plotX:g.plotX,plotY:g.plotY},g.inDragMode=!0},onMouseMove:function(g,v){var y;if(g.fixedPosition&&g.inDragMode){let C,_,w=this.chart,k=((y=w.pointer)==null?void 0:y.normalize(v))||v,S=g.fixedPosition.chartX-k.chartX,x=g.fixedPosition.chartY-k.chartY,P=w.graphLayoutsLookup;(Math.abs(S)>5||Math.abs(x)>5)&&(C=g.fixedPosition.plotX-S,_=g.fixedPosition.plotY-x,w.isInsidePlot(C,_)&&(g.plotX=C,g.plotY=_,g.hasDragged=!0,this.redrawHalo(g),P.forEach(D=>{D.restartSimulation()})))}},onMouseUp:function(g){g.fixedPosition&&(g.hasDragged&&(this.layout.enableSimulation?this.layout.start():this.chart.redraw()),g.inDragMode=g.hasDragged=!1,this.options.fixedDraggable||delete g.fixedPosition)},redrawHalo:function(g){g&&this.halo&&this.halo.attr({d:g.haloPath(this.options.states.hover.halo.size)})}}}),r(t,"Series/GraphLayoutComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){let{setAnimation:n}=s,{composed:p}=l,{addEvent:m,pushUnique:g}=u;function v(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(w=>{w.updateSimulation()}),this.redraw())}function y(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(w=>{w.updateSimulation(!1)}),this.redraw())}function C(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach(w=>{w.stop()})}function _(){let w,k=!1,S=x=>{x.maxIterations--&&isFinite(x.temperature)&&!x.isStable()&&!x.enableSimulation&&(x.beforeStep&&x.beforeStep(),x.step(),w=!1,k=!0)};if(this.graphLayoutsLookup){for(n(!1,this),this.graphLayoutsLookup.forEach(x=>x.start());!w;)w=!0,this.graphLayoutsLookup.forEach(S);k&&this.series.forEach(x=>{x&&x.layout&&x.render()})}}return{compose:function(w){g(p,"GraphLayout")&&(m(w,"afterPrint",v),m(w,"beforePrint",y),m(w,"predraw",C),m(w,"render",_))},integrations:{},layouts:{}}}),r(t,"Series/PackedBubble/PackedBubblePoint.js",[t["Core/Chart/Chart.js"],t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"]],function(s,l,u){let{seriesTypes:{bubble:{prototype:{pointClass:n}}}}=u;return class extends n{destroy(){var p;return(p=this.series)!=null&&p.layout&&this.series.layout.removeElementFromCollection(this,this.series.layout.nodes),l.prototype.destroy.apply(this,arguments)}firePointEvent(){let p=this.series.options;if(this.isParentNode&&p.parentNode){let m=p.allowPointSelect;p.allowPointSelect=p.parentNode.allowPointSelect,l.prototype.firePointEvent.apply(this,arguments),p.allowPointSelect=m}else l.prototype.firePointEvent.apply(this,arguments)}select(){let p=this.series.chart;this.isParentNode?(p.getSelectedPoints=p.getSelectedParentNodes,l.prototype.select.apply(this,arguments),p.getSelectedPoints=s.prototype.getSelectedPoints):l.prototype.select.apply(this,arguments)}}}),r(t,"Series/PackedBubble/PackedBubbleSeriesDefaults.js",[t["Core/Utilities.js"]],function(s){let{isNumber:l}=s;return{minSize:"10%",maxSize:"50%",sizeBy:"area",zoneAxis:"y",crisp:!1,tooltip:{pointFormat:"Value: {point.value}"},draggable:!0,useSimulation:!0,parentNode:{allowPointSelect:!1},dataLabels:{formatter:function(){let{numberFormatter:u}=this.series.chart,{value:n}=this.point;return l(n)?u(n,-1):""},parentNodeFormatter:function(){return this.name},parentNodeTextPath:{enabled:!0},padding:0,style:{transition:"opacity 2000ms"}},layoutAlgorithm:{initialPositions:"circle",initialPositionRadius:20,bubblePadding:5,parentNodeLimit:!1,seriesInteraction:!0,dragBetweenSeries:!1,parentNodeOptions:{maxIterations:400,gravitationalConstant:.03,maxSpeed:50,initialPositionRadius:100,seriesInteraction:!0,marker:{fillColor:null,fillOpacity:1,lineWidth:null,lineColor:null,symbol:"circle"}},enableSimulation:!0,type:"packedbubble",integration:"packedbubble",maxIterations:1e3,splitSeries:!1,maxSpeed:5,gravitationalConstant:.01,friction:-.981}}}),r(t,"Series/Networkgraph/VerletIntegration.js",[],function(){return{attractive:function(s,l,u){let n=s.getMass(),p=-u.x*l*this.diffTemperature,m=-u.y*l*this.diffTemperature;s.fromNode.fixedPosition||(s.fromNode.plotX-=p*n.fromNode/s.fromNode.degree,s.fromNode.plotY-=m*n.fromNode/s.fromNode.degree),s.toNode.fixedPosition||(s.toNode.plotX+=p*n.toNode/s.toNode.degree,s.toNode.plotY+=m*n.toNode/s.toNode.degree)},attractiveForceFunction:function(s,l){return(l-s)/s},barycenter:function(){let s=this.options.gravitationalConstant||0,l=(this.barycenter.xFactor-(this.box.left+this.box.width)/2)*s,u=(this.barycenter.yFactor-(this.box.top+this.box.height)/2)*s;this.nodes.forEach(function(n){n.fixedPosition||(n.plotX-=l/n.mass/n.degree,n.plotY-=u/n.mass/n.degree)})},getK:function(s){return Math.pow(s.box.width*s.box.height/s.nodes.length,.5)},integrate:function(s,l){let u=-s.options.friction,n=s.options.maxSpeed,p=l.prevX,m=l.prevY,g=(l.plotX+l.dispX-p)*u,v=(l.plotY+l.dispY-m)*u,y=Math.abs,C=y(g)/(g||1),_=y(v)/(v||1),w=C*Math.min(n,Math.abs(g)),k=_*Math.min(n,Math.abs(v));l.prevX=l.plotX+l.dispX,l.prevY=l.plotY+l.dispY,l.plotX+=w,l.plotY+=k,l.temperature=s.vectorLength({x:w,y:k})},repulsive:function(s,l,u){let n=l*this.diffTemperature/s.mass/s.degree;s.fixedPosition||(s.plotX+=u.x*n,s.plotY+=u.y*n)},repulsiveForceFunction:function(s,l){return(l-s)/s*(l>s?1:0)}}}),r(t,"Series/PackedBubble/PackedBubbleIntegration.js",[t["Core/Globals.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(s,l){let{noop:u}=s;return{barycenter:function(){let n,p,m=this.options.gravitationalConstant,g=this.box,v=this.nodes;for(let y of v)this.options.splitSeries&&!y.isParentNode?(n=y.series.parentNode.plotX,p=y.series.parentNode.plotY):(n=g.width/2,p=g.height/2),y.fixedPosition||(y.plotX-=(y.plotX-n)*m/(y.mass*Math.sqrt(v.length)),y.plotY-=(y.plotY-p)*m/(y.mass*Math.sqrt(v.length)))},getK:u,integrate:l.integrate,repulsive:function(n,p,m,g){let v=p*this.diffTemperature/n.mass/n.degree,y=m.x*v,C=m.y*v;n.fixedPosition||(n.plotX+=y,n.plotY+=C),g.fixedPosition||(g.plotX-=y,g.plotY-=C)},repulsiveForceFunction:function(n,p,m,g){return Math.min(n,(m.marker.radius+g.marker.radius)/2)}}}),r(t,"Series/Networkgraph/EulerIntegration.js",[],function(){return{attractive:function(s,l,u,n){let p=s.getMass(),m=u.x/n*l,g=u.y/n*l;s.fromNode.fixedPosition||(s.fromNode.dispX-=m*p.fromNode/s.fromNode.degree,s.fromNode.dispY-=g*p.fromNode/s.fromNode.degree),s.toNode.fixedPosition||(s.toNode.dispX+=m*p.toNode/s.toNode.degree,s.toNode.dispY+=g*p.toNode/s.toNode.degree)},attractiveForceFunction:function(s,l){return s*s/l},barycenter:function(){let s=this.options.gravitationalConstant,l=this.barycenter.xFactor,u=this.barycenter.yFactor;this.nodes.forEach(function(n){if(!n.fixedPosition){let p=n.getDegree(),m=p*(1+p/2);n.dispX+=(l-n.plotX)*s*m/n.degree,n.dispY+=(u-n.plotY)*s*m/n.degree}})},getK:function(s){return Math.pow(s.box.width*s.box.height/s.nodes.length,.3)},integrate:function(s,l){l.dispX+=l.dispX*s.options.friction,l.dispY+=l.dispY*s.options.friction;let u=l.temperature=s.vectorLength({x:l.dispX,y:l.dispY});u!==0&&(l.plotX+=l.dispX/u*Math.min(Math.abs(l.dispX),s.temperature),l.plotY+=l.dispY/u*Math.min(Math.abs(l.dispY),s.temperature))},repulsive:function(s,l,u,n){s.dispX+=u.x/n*l/s.degree,s.dispY+=u.y/n*l/s.degree},repulsiveForceFunction:function(s,l){return l*l/s}}}),r(t,"Series/Networkgraph/QuadTreeNode.js",[],function(){class s{constructor(u){this.body=!1,this.isEmpty=!1,this.isInternal=!1,this.nodes=[],this.box=u,this.boxSize=Math.min(u.width,u.height)}divideBox(){let u=this.box.width/2,n=this.box.height/2;this.nodes[0]=new s({left:this.box.left,top:this.box.top,width:u,height:n}),this.nodes[1]=new s({left:this.box.left+u,top:this.box.top,width:u,height:n}),this.nodes[2]=new s({left:this.box.left+u,top:this.box.top+n,width:u,height:n}),this.nodes[3]=new s({left:this.box.left,top:this.box.top+n,width:u,height:n})}getBoxPosition(u){let n=u.plotX<this.box.left+this.box.width/2,p=u.plotY<this.box.top+this.box.height/2;return n?p?0:3:p?1:2}insert(u,n){let p;this.isInternal?this.nodes[this.getBoxPosition(u)].insert(u,n-1):(this.isEmpty=!1,this.body?n?(this.isInternal=!0,this.divideBox(),this.body!==!0&&(this.nodes[this.getBoxPosition(this.body)].insert(this.body,n-1),this.body=!0),this.nodes[this.getBoxPosition(u)].insert(u,n-1)):((p=new s({top:u.plotX||NaN,left:u.plotY||NaN,width:.1,height:.1})).body=u,p.isInternal=!1,this.nodes.push(p)):(this.isInternal=!1,this.body=u))}updateMassAndCenter(){let u=0,n=0,p=0;if(this.isInternal){for(let m of this.nodes)m.isEmpty||(u+=m.mass,n+=m.plotX*m.mass,p+=m.plotY*m.mass);n/=u,p/=u}else this.body&&(u=this.body.mass,n=this.body.plotX,p=this.body.plotY);this.mass=u,this.plotX=n,this.plotY=p}}return s}),r(t,"Series/Networkgraph/QuadTree.js",[t["Series/Networkgraph/QuadTreeNode.js"]],function(s){return class{constructor(l,u,n,p){this.box={left:l,top:u,width:n,height:p},this.maxDepth=25,this.root=new s(this.box),this.root.isInternal=!0,this.root.isRoot=!0,this.root.divideBox()}calculateMassAndCenter(){this.visitNodeRecursive(null,null,function(l){l.updateMassAndCenter()})}insertNodes(l){for(let u of l)this.root.insert(u,this.maxDepth)}visitNodeRecursive(l,u,n){let p;if(l||(l=this.root),l===this.root&&u&&(p=u(l)),p!==!1){for(let m of l.nodes){if(m.isInternal){if(u&&(p=u(m)),p===!1)continue;this.visitNodeRecursive(m,u,n)}else m.body&&u&&u(m.body);n&&n(m)}l===this.root&&n&&n(l)}}}}),r(t,"Series/Networkgraph/ReingoldFruchtermanLayout.js",[t["Series/Networkgraph/EulerIntegration.js"],t["Core/Globals.js"],t["Series/GraphLayoutComposition.js"],t["Series/Networkgraph/QuadTree.js"],t["Core/Utilities.js"],t["Series/Networkgraph/VerletIntegration.js"]],function(s,l,u,n,p,m){let{win:g}=l,{clamp:v,defined:y,isFunction:C,fireEvent:_,pick:w}=p;class k{constructor(){this.box={},this.currentStep=0,this.initialRendering=!0,this.links=[],this.nodes=[],this.series=[],this.simulation=!1}static compose(x){u.compose(x),u.integrations.euler=s,u.integrations.verlet=m,u.layouts["reingold-fruchterman"]=k}init(x){this.options=x,this.nodes=[],this.links=[],this.series=[],this.box={x:0,y:0,width:0,height:0},this.setInitialRendering(!0),this.integration=u.integrations[x.integration],this.enableSimulation=x.enableSimulation,this.attractiveForce=w(x.attractiveForce,this.integration.attractiveForceFunction),this.repulsiveForce=w(x.repulsiveForce,this.integration.repulsiveForceFunction),this.approximation=x.approximation}updateSimulation(x){this.enableSimulation=w(x,this.options.enableSimulation)}start(){let x=this.series,P=this.options;this.currentStep=0,this.forces=x[0]&&x[0].forces||[],this.chart=x[0]&&x[0].chart,this.initialRendering&&(this.initPositions(),x.forEach(function(D){D.finishedAnimating=!0,D.render()})),this.setK(),this.resetSimulation(P),this.enableSimulation&&this.step()}step(){let x=this.series;for(let P of(this.currentStep++,this.approximation==="barnes-hut"&&(this.createQuadTree(),this.quadTree.calculateMassAndCenter()),this.forces||[]))this[P+"Forces"](this.temperature);if(this.applyLimits(),this.temperature=this.coolDown(this.startTemperature,this.diffTemperature,this.currentStep),this.prevSystemTemperature=this.systemTemperature,this.systemTemperature=this.getSystemTemperature(),this.enableSimulation){for(let P of x)P.chart&&P.render();this.maxIterations--&&isFinite(this.temperature)&&!this.isStable()?(this.simulation&&g.cancelAnimationFrame(this.simulation),this.simulation=g.requestAnimationFrame(()=>this.step())):(this.simulation=!1,this.series.forEach(P=>{_(P,"afterSimulation")}))}}stop(){this.simulation&&g.cancelAnimationFrame(this.simulation)}setArea(x,P,D,T){this.box={left:x,top:P,width:D,height:T}}setK(){this.k=this.options.linkLength||this.integration.getK(this)}addElementsToCollection(x,P){for(let D of x)P.indexOf(D)===-1&&P.push(D)}removeElementFromCollection(x,P){let D=P.indexOf(x);D!==-1&&P.splice(D,1)}clear(){this.nodes.length=0,this.links.length=0,this.series.length=0,this.resetSimulation()}resetSimulation(){this.forcedStop=!1,this.systemTemperature=0,this.setMaxIterations(),this.setTemperature(),this.setDiffTemperature()}restartSimulation(){this.simulation?this.resetSimulation():(this.setInitialRendering(!1),this.enableSimulation?this.start():this.setMaxIterations(1),this.chart&&this.chart.redraw(),this.setInitialRendering(!0))}setMaxIterations(x){this.maxIterations=w(x,this.options.maxIterations)}setTemperature(){this.temperature=this.startTemperature=Math.sqrt(this.nodes.length)}setDiffTemperature(){this.diffTemperature=this.startTemperature/(this.options.maxIterations+1)}setInitialRendering(x){this.initialRendering=x}createQuadTree(){this.quadTree=new n(this.box.left,this.box.top,this.box.width,this.box.height),this.quadTree.insertNodes(this.nodes)}initPositions(){let x=this.options.initialPositions;if(C(x))for(let P of(x.call(this),this.nodes))y(P.prevX)||(P.prevX=P.plotX),y(P.prevY)||(P.prevY=P.plotY),P.dispX=0,P.dispY=0;else x==="circle"?this.setCircularPositions():this.setRandomPositions()}setCircularPositions(){let x,P=this.box,D=this.nodes,T=2*Math.PI/(D.length+1),I=D.filter(function(O){return O.linksTo.length===0}),N={},q=this.options.initialPositionRadius,Z=O=>{for(let V of O.linksFrom||[])N[V.toNode.id]||(N[V.toNode.id]=!0,X.push(V.toNode),Z(V.toNode))},X=[];for(let O of I)X.push(O),Z(O);if(X.length)for(let O of D)X.indexOf(O)===-1&&X.push(O);else X=D;for(let O=0,V=X.length;O<V;++O)(x=X[O]).plotX=x.prevX=w(x.plotX,P.width/2+q*Math.cos(O*T)),x.plotY=x.prevY=w(x.plotY,P.height/2+q*Math.sin(O*T)),x.dispX=0,x.dispY=0}setRandomPositions(){let x,P=this.box,D=this.nodes,T=D.length+1,I=N=>{let q=N*N/Math.PI;return q-Math.floor(q)};for(let N=0,q=D.length;N<q;++N)(x=D[N]).plotX=x.prevX=w(x.plotX,P.width*I(N)),x.plotY=x.prevY=w(x.plotY,P.height*I(T+N)),x.dispX=0,x.dispY=0}force(x,...P){this.integration[x].apply(this,P)}barycenterForces(){this.getBarycenter(),this.force("barycenter")}getBarycenter(){let x=0,P=0,D=0;for(let T of this.nodes)P+=T.plotX*T.mass,D+=T.plotY*T.mass,x+=T.mass;return this.barycenter={x:P,y:D,xFactor:P/x,yFactor:D/x},this.barycenter}barnesHutApproximation(x,P){let D,T,I=this.getDistXY(x,P),N=this.vectorLength(I);return x!==P&&N!==0&&(P.isInternal?P.boxSize/N<this.options.theta&&N!==0?(T=this.repulsiveForce(N,this.k),this.force("repulsive",x,T*P.mass,I,N),D=!1):D=!0:(T=this.repulsiveForce(N,this.k),this.force("repulsive",x,T*P.mass,I,N))),D}repulsiveForces(){if(this.approximation==="barnes-hut")for(let x of this.nodes)this.quadTree.visitNodeRecursive(null,P=>this.barnesHutApproximation(x,P));else{let x,P,D;for(let T of this.nodes)for(let I of this.nodes)T===I||T.fixedPosition||(D=this.getDistXY(T,I),(P=this.vectorLength(D))!==0&&(x=this.repulsiveForce(P,this.k),this.force("repulsive",T,x*I.mass,D,P)))}}attractiveForces(){let x,P,D;for(let T of this.links)T.fromNode&&T.toNode&&(x=this.getDistXY(T.fromNode,T.toNode),(P=this.vectorLength(x))!==0&&(D=this.attractiveForce(P,this.k),this.force("attractive",T,D,x,P)))}applyLimits(){for(let x of this.nodes)x.fixedPosition||(this.integration.integrate(this,x),this.applyLimitBox(x,this.box),x.dispX=0,x.dispY=0)}applyLimitBox(x,P){let D=x.radius;x.plotX=v(x.plotX,P.left+D,P.width-D),x.plotY=v(x.plotY,P.top+D,P.height-D)}coolDown(x,P,D){return x-P*D}isStable(){return 1e-5>Math.abs(this.systemTemperature-this.prevSystemTemperature)||this.temperature<=0}getSystemTemperature(){let x=0;for(let P of this.nodes)x+=P.temperature;return x}vectorLength(x){return Math.sqrt(x.x*x.x+x.y*x.y)}getDistR(x,P){let D=this.getDistXY(x,P);return this.vectorLength(D)}getDistXY(x,P){let D=x.plotX-P.plotX,T=x.plotY-P.plotY;return{x:D,y:T,absX:Math.abs(D),absY:Math.abs(T)}}}return k}),r(t,"Series/PackedBubble/PackedBubbleLayout.js",[t["Series/GraphLayoutComposition.js"],t["Series/PackedBubble/PackedBubbleIntegration.js"],t["Series/Networkgraph/ReingoldFruchtermanLayout.js"],t["Core/Utilities.js"]],function(s,l,u,n){let{addEvent:p,pick:m}=n;function g(){let C=this.series,_=[];return C.forEach(w=>{w.parentNode&&w.parentNode.selected&&_.push(w.parentNode)}),_}function v(){this.allDataPoints&&delete this.allDataPoints}class y extends u{constructor(){super(...arguments),this.index=NaN,this.nodes=[],this.series=[]}static compose(_){u.compose(_),s.integrations.packedbubble=l,s.layouts.packedbubble=y;let w=_.prototype;w.getSelectedParentNodes||(p(_,"beforeRedraw",v),w.getSelectedParentNodes=g)}beforeStep(){this.options.marker&&this.series.forEach(_=>{_&&_.calculateParentRadius()})}isStable(){let _=Math.abs(this.prevSystemTemperature-this.systemTemperature);return 1>Math.abs(10*this.systemTemperature/Math.sqrt(this.nodes.length))&&_<1e-5||this.temperature<=0}setCircularPositions(){let _=this.box,w=this.nodes,k=2*Math.PI/(w.length+1),S=this.options.initialPositionRadius,x,P,D=0;for(let T of w)this.options.splitSeries&&!T.isParentNode?(x=T.series.parentNode.plotX,P=T.series.parentNode.plotY):(x=_.width/2,P=_.height/2),T.plotX=T.prevX=m(T.plotX,x+S*Math.cos(T.index||D*k)),T.plotY=T.prevY=m(T.plotY,P+S*Math.sin(T.index||D*k)),T.dispX=0,T.dispY=0,D++}repulsiveForces(){let _,w,k,S=this,x=S.options.bubblePadding,P=S.nodes;P.forEach(D=>{D.degree=D.mass,D.neighbours=0,P.forEach(T=>{_=0,D!==T&&!D.fixedPosition&&(S.options.seriesInteraction||D.series===T.series)&&(k=S.getDistXY(D,T),(w=S.vectorLength(k)-(D.marker.radius+T.marker.radius+x))<0&&(D.degree+=.01,D.neighbours++,_=S.repulsiveForce(-w/Math.sqrt(D.neighbours),S.k,D,T)),S.force("repulsive",D,_*T.mass,k,T,w))})})}applyLimitBox(_,w){let k,S;this.options.splitSeries&&!_.isParentNode&&this.options.parentNodeLimit&&(k=this.getDistXY(_,_.series.parentNode),(S=_.series.parentNodeRadius-_.marker.radius-this.vectorLength(k))<0&&S>-2*_.marker.radius&&(_.plotX-=.01*k.x,_.plotY-=.01*k.y)),super.applyLimitBox(_,w)}}return s.layouts.packedbubble=y,y}),r(t,"Series/SimulationSeriesUtilities.js",[t["Core/Utilities.js"],t["Core/Animation/AnimationUtilities.js"]],function(s,l){let{merge:u,syncTimeout:n}=s,{animObject:p}=l;return{initDataLabels:function(){let m=this.options.dataLabels;if(!this.dataLabelsGroup){let g=this.initDataLabelsGroup();return!this.chart.styledMode&&(m!=null&&m.style)&&g.css(m.style),g.attr({opacity:0}),this.visible&&g.show(),g}return this.dataLabelsGroup.attr(u({opacity:1},this.getPlotBox("data-labels"))),this.dataLabelsGroup},initDataLabelsDefer:function(){var g;let m=this.options.dataLabels;m!=null&&m.defer&&((g=this.options.layoutAlgorithm)!=null&&g.enableSimulation)?n(()=>{this.deferDataLabels=!1},m?p(m.animation).defer:0):this.deferDataLabels=!1}}}),r(t,"Extensions/TextPath.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{deg2rad:u}=s,{addEvent:n,merge:p,uniqueKey:m,defined:g,extend:v}=l;function y(w,k){k=p(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},k);let S=this.renderer.url,x=this.text||this,P=x.textPath,{attributes:D,enabled:T}=k;if(w=w||P&&P.path,P&&P.undo(),w&&T){let I=n(x,"afterModifyTree",N=>{if(w&&T){let q=w.attr("id");q||w.attr("id",q=m());let Z={x:0,y:0};g(D.dx)&&(Z.dx=D.dx,delete D.dx),g(D.dy)&&(Z.dy=D.dy,delete D.dy),x.attr(Z),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());let X=N.nodes.slice(0);N.nodes.length=0,N.nodes[0]={tagName:"textPath",attributes:v(D,{"text-anchor":D.textAnchor,href:`${S}#${q}`}),children:X}}});x.textPath={path:w,undo:I}}else x.attr({dx:0,dy:0}),delete x.textPath;return this.added&&(x.textCache="",this.renderer.buildText(x)),this}function C(w){var x;let k=w.bBox,S=(x=this.element)==null?void 0:x.querySelector("textPath");if(S){let P=[],{b:D,h:T}=this.renderer.fontMetrics(this.element),I=T-D,N=RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),q=S.innerHTML.replace(N,"").split(/<tspan class="highcharts-br"[^>]*>/),Z=q.length,X=(O,V)=>{let{x:$,y:L}=V,R=(S.getRotationOfChar(O)-90)*u,G=Math.cos(R),U=Math.sin(R);return[[$-I*G,L-I*U],[$+D*G,L+D*U]]};for(let O=0,V=0;V<Z;V++){let $=q[V].length;for(let L=0;L<$;L+=5)try{let R=O+L+V,[G,U]=X(R,S.getStartPositionOfChar(R));L===0?(P.push(U),P.push(G)):(V===0&&P.unshift(U),V===Z-1&&P.push(G))}catch{break}O+=$-1;try{let L=O+V,R=S.getEndPositionOfChar(L),[G,U]=X(L,R);P.unshift(U),P.unshift(G)}catch{break}}P.length&&P.push(P[0].slice()),k.polygon=P}return k}function _(w){var P;let k=w.labelOptions,S=w.point,x=k[S.formatPrefix+"TextPath"]||k.textPath;x&&!k.useHTML&&(this.setTextPath(((P=S.getDataLabelPath)==null?void 0:P.call(S,this))||S.graphic,x),S.dataLabelPath&&!x.enabled&&(S.dataLabelPath=S.dataLabelPath.destroy()))}return{compose:function(w){n(w,"afterGetBBox",C),n(w,"beforeAddingDataLabel",_);let k=w.prototype;k.setTextPath||(k.setTextPath=y)}}}),r(t,"Series/PackedBubble/PackedBubbleSeries.js",[t["Core/Color/Color.js"],t["Series/DragNodesComposition.js"],t["Series/GraphLayoutComposition.js"],t["Core/Globals.js"],t["Series/PackedBubble/PackedBubblePoint.js"],t["Series/PackedBubble/PackedBubbleSeriesDefaults.js"],t["Series/PackedBubble/PackedBubbleLayout.js"],t["Core/Series/SeriesRegistry.js"],t["Series/SimulationSeriesUtilities.js"],t["Core/Utilities.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Extensions/TextPath.js"]],function(s,l,u,n,p,m,g,v,y,C,_,w){let{parse:k}=s,{noop:S}=n,{series:{prototype:x},seriesTypes:{bubble:P}}=v,{initDataLabels:D,initDataLabelsDefer:T}=y,{addEvent:I,clamp:N,defined:q,extend:Z,fireEvent:X,isArray:O,isNumber:V,merge:$,pick:L}=C;w.compose(_);class R extends P{constructor(){super(...arguments),this.parentNodeMass=0,this.deferDataLabels=!0}static compose(U,B,H){P.compose(U,B,H),l.compose(B),g.compose(B)}accumulateAllPoints(){let U,B=this.chart,H=[];for(let W of B.series)if(W.is("packedbubble")&&W.reserveSpace()){U=W.yData||[];for(let re=0;re<U.length;re++)H.push([null,null,U[re],W.index,re,{id:re,marker:{radius:0}}])}return H}addLayout(){let U=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},B=U.type||"packedbubble",H=this.chart.options.chart,W=this.chart.graphLayoutsStorage,re=this.chart.graphLayoutsLookup,de;W||(this.chart.graphLayoutsStorage=W={},this.chart.graphLayoutsLookup=re=[]),(de=W[B])||(U.enableSimulation=q(H.forExport)?!H.forExport:U.enableSimulation,W[B]=de=new u.layouts[B],de.init(U),re.splice(de.index,0,de)),this.layout=de,this.points.forEach(ie=>{ie.mass=2,ie.degree=1,ie.collisionNmb=1}),de.setArea(0,0,this.chart.plotWidth,this.chart.plotHeight),de.addElementsToCollection([this],de.series),de.addElementsToCollection(this.points,de.nodes)}addSeriesLayout(){let U=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},B=U.type||"packedbubble",H=this.chart.graphLayoutsStorage,W=this.chart.graphLayoutsLookup,re=$(U,U.parentNodeOptions,{enableSimulation:this.layout.options.enableSimulation}),de=H[B+"-series"];de||(H[B+"-series"]=de=new u.layouts[B],de.init(re),W.splice(de.index,0,de)),this.parentNodeLayout=de,this.createParentNodes()}calculateParentRadius(){let U=this.seriesBox();this.parentNodeRadius=N(Math.sqrt(2*this.parentNodeMass/Math.PI)+20,20,U?Math.max(Math.sqrt(Math.pow(U.width,2)+Math.pow(U.height,2))/2+20,20):Math.sqrt(2*this.parentNodeMass/Math.PI)+20),this.parentNode&&(this.parentNode.marker.radius=this.parentNode.radius=this.parentNodeRadius)}calculateZExtremes(){let U=this.chart.series,B=this.options.zMin,H=this.options.zMax,W=1/0,re=-1/0;return B&&H?[B,H]:(U.forEach(de=>{de.yData.forEach(ie=>{q(ie)&&(ie>re&&(re=ie),ie<W&&(W=ie))})}),[B=L(B,W),H=L(H,re)])}checkOverlap(U,B){let H=U[0]-B[0],W=U[1]-B[1];return Math.sqrt(H*H+W*W)-Math.abs(U[2]+B[2])<-.001}createParentNodes(){let U=this.pointClass,B=this.chart,H=this.parentNodeLayout,W=this.layout.options,re,de=this.parentNode,ie={radius:this.parentNodeRadius,lineColor:this.color,fillColor:k(this.color).brighten(.4).get()};W.parentNodeOptions&&(ie=$(W.parentNodeOptions.marker||{},ie)),this.parentNodeMass=0,this.points.forEach(oe=>{this.parentNodeMass+=Math.PI*Math.pow(oe.marker.radius,2)}),this.calculateParentRadius(),H.nodes.forEach(oe=>{oe.seriesIndex===this.index&&(re=!0)}),H.setArea(0,0,B.plotWidth,B.plotHeight),re||(de||(de=new U(this,{mass:this.parentNodeRadius/2,marker:ie,dataLabels:{inside:!1},states:{normal:{marker:ie},hover:{marker:ie}},dataLabelOnNull:!0,degree:this.parentNodeRadius,isParentNode:!0,seriesIndex:this.index})),this.parentNode&&(de.plotX=this.parentNode.plotX,de.plotY=this.parentNode.plotY),this.parentNode=de,H.addElementsToCollection([this],H.series),H.addElementsToCollection([de],H.nodes))}deferLayout(){let U=this.options.layoutAlgorithm;this.visible&&(this.addLayout(),U.splitSeries&&this.addSeriesLayout())}destroy(){this.chart.graphLayoutsLookup&&this.chart.graphLayoutsLookup.forEach(U=>{U.removeElementFromCollection(this,U.series)},this),this.parentNode&&this.parentNodeLayout&&(this.parentNodeLayout.removeElementFromCollection(this.parentNode,this.parentNodeLayout.nodes),this.parentNode.dataLabel&&(this.parentNode.dataLabel=this.parentNode.dataLabel.destroy())),x.destroy.apply(this,arguments)}drawDataLabels(){!this.deferDataLabels&&(x.drawDataLabels.call(this,this.points),this.parentNode&&(this.parentNode.formatPrefix="parentNode",x.drawDataLabels.call(this,[this.parentNode])))}drawGraph(){var re;if(!this.layout||!this.layout.options.splitSeries)return;let U=this.chart,B=this.layout.options.parentNodeOptions.marker,H={fill:B.fillColor||k(this.color).brighten(.4).get(),opacity:B.fillOpacity,stroke:B.lineColor||this.color,"stroke-width":L(B.lineWidth,this.options.lineWidth)},W={};this.parentNodesGroup=this.plotGroup("parentNodesGroup","parentNode",this.visible?"inherit":"hidden",.1,U.seriesGroup),(re=this.group)==null||re.attr({zIndex:2}),this.calculateParentRadius(),this.parentNode&&q(this.parentNode.plotX)&&q(this.parentNode.plotY)&&q(this.parentNodeRadius)&&(W=$({x:this.parentNode.plotX-this.parentNodeRadius,y:this.parentNode.plotY-this.parentNodeRadius,width:2*this.parentNodeRadius,height:2*this.parentNodeRadius},H),this.parentNode.graphic||(this.graph=this.parentNode.graphic=U.renderer.symbol(H.symbol).add(this.parentNodesGroup)),this.parentNode.graphic.attr(W))}drawTracker(){let U,B=this.parentNode;super.drawTracker(),B&&(U=O(B.dataLabels)?B.dataLabels:B.dataLabel?[B.dataLabel]:[],B.graphic&&(B.graphic.element.point=B),U.forEach(H=>{(H.div||H.element).point=B}))}getPointRadius(){let U,B,H,W,re=this.chart,de=re.plotWidth,ie=re.plotHeight,oe=this.options,Ee=oe.useSimulation,xe=Math.min(de,ie),Se={},K=[],Q=re.allDataPoints||[],ae=Q.length;["minSize","maxSize"].forEach(J=>{let ne=parseInt(oe[J],10),ce=/%$/.test(oe[J]);Se[J]=ce?xe*ne/100:ne*Math.sqrt(ae)}),re.minRadius=U=Se.minSize/Math.sqrt(ae),re.maxRadius=B=Se.maxSize/Math.sqrt(ae);let _e=Ee?this.calculateZExtremes():[U,B];Q.forEach((J,ne)=>{H=Ee?N(J[2],_e[0],_e[1]):J[2],(W=this.getRadius(_e[0],_e[1],U,B,H))===0&&(W=null),Q[ne][2]=W,K.push(W)}),this.radii=K}init(){return x.init.apply(this,arguments),T.call(this),this.eventsToUnbind.push(I(this,"updatedData",function(){this.chart.series.forEach(U=>{U.type===this.type&&(U.isDirty=!0)},this)})),this}onMouseUp(U){if(U.fixedPosition&&!U.removed){let B,H=this.layout,W=this.parentNodeLayout;W&&H.options.dragBetweenSeries&&W.nodes.forEach(re=>{U&&U.marker&&re!==U.series.parentNode&&(B=H.getDistXY(U,re),H.vectorLength(B)-re.marker.radius-U.marker.radius<0&&(re.series.addPoint($(U.options,{plotX:U.plotX,plotY:U.plotY}),!1),H.removeElementFromCollection(U,H.nodes),U.remove()))}),l.onMouseUp.apply(this,arguments)}}placeBubbles(U){let B=this.checkOverlap,H=this.positionBubble,W=[],re=1,de=0,ie=0,oe,Ee=[],xe,Se=U.sort((K,Q)=>Q[2]-K[2]);if(Se.length){if(W.push([[0,0,Se[0][2],Se[0][3],Se[0][4]]]),Se.length>1)for(W.push([[0,0-Se[1][2]-Se[0][2],Se[1][2],Se[1][3],Se[1][4]]]),xe=2;xe<Se.length;xe++)Se[xe][2]=Se[xe][2]||1,B(oe=H(W[re][de],W[re-1][ie],Se[xe]),W[re][0])?(W.push([]),ie=0,W[re+1].push(H(W[re][de],W[re][0],Se[xe])),re++,de=0):re>1&&W[re-1][ie+1]&&B(oe,W[re-1][ie+1])?(ie++,W[re].push(H(W[re][de],W[re-1][ie],Se[xe])),de++):(de++,W[re].push(oe));this.chart.stages=W,this.chart.rawPositions=[].concat.apply([],W),this.resizeRadius(),Ee=this.chart.rawPositions}return Ee}pointAttribs(U,B){let H=this.options,W=U&&U.isParentNode,re=H.marker;W&&H.layoutAlgorithm&&H.layoutAlgorithm.parentNodeOptions&&(re=H.layoutAlgorithm.parentNodeOptions.marker);let de=re.fillOpacity,ie=x.pointAttribs.call(this,U,B);return de!==1&&(ie["fill-opacity"]=de),ie}positionBubble(U,B,H){let W=Math.asin,re=Math.acos,de=Math.pow,ie=Math.abs,oe=(0,Math.sqrt)(de(U[0]-B[0],2)+de(U[1]-B[1],2)),Ee=re((de(oe,2)+de(H[2]+B[2],2)-de(H[2]+U[2],2))/(2*(H[2]+B[2])*oe)),xe=W(ie(U[0]-B[0])/oe),Se=(U[1]-B[1]<0?0:Math.PI)+Ee+xe*((U[0]-B[0])*(U[1]-B[1])<0?1:-1),K=Math.cos(Se),Q=Math.sin(Se);return[B[0]+(B[2]+H[2])*Q,B[1]-(B[2]+H[2])*K,H[2],H[3],H[4]]}render(){let U=[];x.render.apply(this,arguments),!this.options.dataLabels.allowOverlap&&(this.data.forEach(B=>{O(B.dataLabels)&&B.dataLabels.forEach(H=>{U.push(H)})}),this.options.useSimulation&&this.chart.hideOverlappingLabels(U))}resizeRadius(){let U,B,H,W,re,de=this.chart,ie=de.rawPositions,oe=Math.min,Ee=Math.max,xe=de.plotLeft,Se=de.plotTop,K=de.plotHeight,Q=de.plotWidth;for(let ne of(U=H=Number.POSITIVE_INFINITY,B=W=Number.NEGATIVE_INFINITY,ie))re=ne[2],U=oe(U,ne[0]-re),B=Ee(B,ne[0]+re),H=oe(H,ne[1]-re),W=Ee(W,ne[1]+re);let ae=[B-U,W-H],_e=[(Q-xe)/ae[0],(K-Se)/ae[1]],J=oe.apply([],_e);if(Math.abs(J-1)>1e-10){for(let ne of ie)ne[2]*=J;this.placeBubbles(ie)}else de.diffY=K/2+Se-H-(W-H)/2,de.diffX=Q/2+xe-U-(B-U)/2}seriesBox(){let U,B=this.chart,H=this.data,W=Math.max,re=Math.min,de=[B.plotLeft,B.plotLeft+B.plotWidth,B.plotTop,B.plotTop+B.plotHeight];return H.forEach(ie=>{q(ie.plotX)&&q(ie.plotY)&&ie.marker.radius&&(U=ie.marker.radius,de[0]=re(de[0],ie.plotX-U),de[1]=W(de[1],ie.plotX+U),de[2]=re(de[2],ie.plotY-U),de[3]=W(de[3],ie.plotY+U))}),V(de.width/de.height)?de:null}setVisible(){let U=this;x.setVisible.apply(U,arguments),U.parentNodeLayout&&U.graph?U.visible?(U.graph.show(),U.parentNode.dataLabel&&U.parentNode.dataLabel.show()):(U.graph.hide(),U.parentNodeLayout.removeElementFromCollection(U.parentNode,U.parentNodeLayout.nodes),U.parentNode.dataLabel&&U.parentNode.dataLabel.hide()):U.layout&&(U.visible?U.layout.addElementsToCollection(U.points,U.layout.nodes):U.points.forEach(B=>{U.layout.removeElementFromCollection(B,U.layout.nodes)}))}translate(){let U,B,H,W=this.chart,re=this.data,de=this.index,ie=this.options.useSimulation;for(let oe of(this.processedXData=this.xData,this.generatePoints(),q(W.allDataPoints)||(W.allDataPoints=this.accumulateAllPoints(),this.getPointRadius()),ie?H=W.allDataPoints:(H=this.placeBubbles(W.allDataPoints),this.options.draggable=!1),H))oe[3]===de&&(U=re[oe[4]],B=L(oe[2],void 0),ie||(U.plotX=oe[0]-W.plotLeft+W.diffX,U.plotY=oe[1]-W.plotTop+W.diffY),V(B)&&(U.marker=Z(U.marker,{radius:B,width:2*B,height:2*B}),U.radius=B));ie&&this.deferLayout(),X(this,"afterTranslate")}}return R.defaultOptions=$(P.defaultOptions,m),Z(R.prototype,{pointClass:p,axisTypes:[],directTouch:!0,forces:["barycenter","repulsive"],hasDraggableNodes:!0,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointArrayMap:["value"],pointValKey:"value",requireSorting:!1,trackerGroups:["group","dataLabelsGroup","parentNodesGroup"],initDataLabels:D,alignDataLabel:x.alignDataLabel,indexateNodes:S,onMouseDown:l.onMouseDown,onMouseMove:l.onMouseMove,redrawHalo:l.redrawHalo,searchPoint:S}),v.registerSeriesType("packedbubble",R),R}),r(t,"Series/Polygon/PolygonSeriesDefaults.js",[],function(){return{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:""},trackByArea:!0,legendSymbol:"rectangle"}}),r(t,"Series/Polygon/PolygonSeries.js",[t["Core/Globals.js"],t["Series/Polygon/PolygonSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(s,l,u,n){let{noop:p}=s,{area:m,line:g,scatter:v}=u.seriesTypes,{extend:y,merge:C}=n;class _ extends v{getGraphPath(){let k=g.prototype.getGraphPath.call(this),S=k.length+1;for(;S--;)(S===k.length||k[S][0]==="M")&&S>0&&k.splice(S,0,["Z"]);return this.areaPath=k,k}drawGraph(){this.options.fillColor=this.color,m.prototype.drawGraph.call(this)}}return _.defaultOptions=C(v.defaultOptions,l),y(_.prototype,{type:"polygon",drawTracker:g.prototype.drawTracker,setStackedPoints:p}),u.registerSeriesType("polygon",_),_}),r(t,"Core/Axis/RadialAxisDefaults.js",[],function(){return{circular:{gridLineWidth:1,labels:{align:void 0,x:0,y:void 0,style:{textOverflow:"none"}},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},radial:{gridLineInterpolation:"circle",gridLineWidth:1,labels:{align:"right",padding:5,x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},radialGauge:{endOnTick:!1,gridLineWidth:0,labels:{align:"center",distance:-25,x:0,y:void 0},lineWidth:1,minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickPosition:"inside",tickWidth:2,title:{rotation:0,text:""},zIndex:2}}}),r(t,"Core/Axis/RadialAxis.js",[t["Core/Axis/RadialAxisDefaults.js"],t["Core/Defaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u,n){var p;let{defaultOptions:m}=l,{composed:g,noop:v}=u,{addEvent:y,correctFloat:C,defined:_,extend:w,fireEvent:k,isObject:S,merge:x,pick:P,pushUnique:D,relativeLength:T,wrap:I}=n;return function(N){function q(){this.autoConnect=this.isCircular&&P(this.userMax,this.options.max)===void 0&&C(this.endAngleRad-this.startAngleRad)===C(2*Math.PI),!this.isCircular&&this.chart.inverted&&this.max++,this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)}function Z(){return()=>{if(this.isRadial&&this.tickPositions&&this.options.labels&&this.options.labels.allowOverlap!==!0)return this.tickPositions.map(ne=>this.ticks[ne]&&this.ticks[ne].label).filter(ne=>!!ne)}}function X(){return v}function O(ne,ce,ye){let we=this.pane.center,ze=ne.value,Ce,Ie,Fe;return this.isCircular?(_(ze)?ne.point&&(ne.point.shapeArgs||{}).start&&(ze=this.chart.inverted?this.translate(ne.point.rectPlotY,!0):ne.point.x):(Ie=ne.chartX||0,Fe=ne.chartY||0,ze=this.translate(Math.atan2(Fe-ye,Ie-ce)-this.startAngleRad,!0)),Ie=(Ce=this.getPosition(ze)).x,Fe=Ce.y):(_(ze)||(Ie=ne.chartX,Fe=ne.chartY),_(Ie)&&_(Fe)&&(ye=we[1]+this.chart.plotTop,ze=this.translate(Math.min(Math.sqrt(Math.pow(Ie-ce,2)+Math.pow(Fe-ye,2)),we[2]/2)-we[3]/2,!0))),[ze,Ie||0,Fe||0]}function V(ne,ce,ye){let we=this.pane.center,ze=this.chart,Ce=this.left||0,Ie=this.top||0,Fe,Ge=P(ce,we[2]/2-this.offset),ke;return ye===void 0&&(ye=this.horiz?0:this.center&&-this.center[3]/2),ye&&(Ge+=ye),this.isCircular||ce!==void 0?((ke=this.chart.renderer.symbols.arc(Ce+we[0],Ie+we[1],Ge,Ge,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})).xBounds=[Ce+we[0]],ke.yBounds=[Ie+we[1]-Ge]):(Fe=this.postTranslate(this.angleRad,Ge),ke=[["M",this.center[0]+ze.plotLeft,this.center[1]+ze.plotTop],["L",Fe.x,Fe.y]]),ke}function $(){this.constructor.prototype.getOffset.call(this),this.chart.axisOffset[this.side]=0}function L(ne,ce,ye){let we=this.chart,ze=Rt=>{if(typeof Rt=="string"){let ft=parseInt(Rt,10);return fe.test(Rt)&&(ft=ft*Fe/100),ft}return Rt},Ce=this.center,Ie=this.startAngleRad,Fe=Ce[2]/2,Ge=Math.min(this.offset,0),ke=this.left||0,ge=this.top||0,fe=/%$/,Me=this.isCircular,De,Pe,je,Xe,et,nt,ht=P(ze(ye.outerRadius),Fe),gt=ze(ye.innerRadius),wt=P(ze(ye.thickness),10);if(this.options.gridLineInterpolation==="polygon")nt=this.getPlotLinePath({value:ne}).concat(this.getPlotLinePath({value:ce,reverse:!0}));else{ne=Math.max(ne,this.min),ce=Math.min(ce,this.max);let Rt=this.translate(ne),ft=this.translate(ce);Me||(ht=Rt||0,gt=ft||0),ye.shape!=="circle"&&Me?(De=Ie+(Rt||0),Pe=Ie+(ft||0)):(De=-Math.PI/2,Pe=1.5*Math.PI,et=!0),ht-=Ge,wt-=Ge,nt=we.renderer.symbols.arc(ke+Ce[0],ge+Ce[1],ht,ht,{start:Math.min(De,Pe),end:Math.max(De,Pe),innerR:P(gt,ht-wt),open:et,borderRadius:ye.borderRadius}),Me&&(je=(Pe+De)/2,Xe=ke+Ce[0]+Ce[2]/2*Math.cos(je),nt.xBounds=je>-Math.PI/2&&je<Math.PI/2?[Xe,we.plotWidth]:[0,Xe],nt.yBounds=[ge+Ce[1]+Ce[2]/2*Math.sin(je)],nt.yBounds[0]+=je>-Math.PI&&je<0||je>Math.PI?-10:10)}return nt}function R(ne){let ce=this.pane.center,ye=this.chart,we=ye.inverted,ze=ne.reverse,Ce=this.pane.options.background?this.pane.options.background[0]||this.pane.options.background:{},Ie=Ce.innerRadius||"0%",Fe=Ce.outerRadius||"100%",Ge=ce[0]+ye.plotLeft,ke=ce[1]+ye.plotTop,ge=this.height,fe=ne.isCrosshair,Me=ce[3]/2,De=ne.value,Pe,je,Xe,et,nt,ht,gt,wt,Rt,ft=this.getPosition(De),St=ft.x,Ct=ft.y;if(fe&&(De=(wt=this.getCrosshairPosition(ne,Ge,ke))[0],St=wt[1],Ct=wt[2]),this.isCircular)je=Math.sqrt(Math.pow(St-Ge,2)+Math.pow(Ct-ke,2)),Xe=typeof Ie=="string"?T(Ie,1):Ie/je,et=typeof Fe=="string"?T(Fe,1):Fe/je,ce&&Me&&(Xe<(Pe=Me/je)&&(Xe=Pe),et<Pe&&(et=Pe)),Rt=[["M",Ge+Xe*(St-Ge),ke-Xe*(ke-Ct)],["L",St-(1-et)*(St-Ge),Ct+(1-et)*(ke-Ct)]];else if((De=this.translate(De))&&(De<0||De>ge)&&(De=0),this.options.gridLineInterpolation==="circle")Rt=this.getLinePath(0,De,Me);else if(Rt=[],ye[we?"yAxis":"xAxis"].forEach(si=>{si.pane===this.pane&&(nt=si)}),nt){gt=nt.tickPositions,nt.autoConnect&&(gt=gt.concat([gt[0]])),ze&&(gt=gt.slice().reverse()),De&&(De+=Me);for(let si=0;si<gt.length;si++)ht=nt.getPosition(gt[si],De),Rt.push(si?["L",ht.x,ht.y]:["M",ht.x,ht.y])}return Rt}function G(ne,ce){let ye=this.translate(ne);return this.postTranslate(this.isCircular?ye:this.angleRad,P(this.isCircular?ce:ye<0?0:ye,this.center[2]/2)-this.offset)}function U(){let ne=this.center,ce=this.chart,ye=this.options.title;return{x:ce.plotLeft+ne[0]+(ye.x||0),y:ce.plotTop+ne[1]-{high:.5,middle:.25,low:0}[ye.align]*ne[2]+(ye.y||0)}}function B(ne){ne.beforeSetTickPositions=q,ne.createLabelCollector=Z,ne.getCrosshairPosition=O,ne.getLinePath=V,ne.getOffset=$,ne.getPlotBandPath=L,ne.getPlotLinePath=R,ne.getPosition=G,ne.getTitlePosition=U,ne.postTranslate=Se,ne.setAxisSize=Q,ne.setAxisTranslation=ae,ne.setOptions=_e}function H(){let ne=this.chart,ce=this.options,ye=ne.angular&&this.isXAxis,we=this.pane,ze=we&&we.options;if(!ye&&we&&(ne.angular||ne.polar)){let Ce=2*Math.PI,Ie=(P(ze.startAngle,0)-90)*Math.PI/180,Fe=(P(ze.endAngle,P(ze.startAngle,0)+360)-90)*Math.PI/180;this.angleRad=(ce.angle||0)*Math.PI/180,this.startAngleRad=Ie,this.endAngleRad=Fe,this.offset=ce.offset||0;let Ge=(Ie%Ce+Ce)%Ce,ke=(Fe%Ce+Ce)%Ce;Ge>Math.PI&&(Ge-=Ce),ke>Math.PI&&(ke-=Ce),this.normalizedStartAngleRad=Ge,this.normalizedEndAngleRad=ke}}function W(ne){this.isRadial&&(ne.align=void 0,ne.preventDefault())}function re(){if(this.chart&&this.chart.labelCollectors){let ne=this.labelCollector?this.chart.labelCollectors.indexOf(this.labelCollector):-1;ne>=0&&this.chart.labelCollectors.splice(ne,1)}}function de(ne){let ce,ye=this.chart,we=ye.angular,ze=ye.polar,Ce=this.isXAxis,Ie=this.coll,Fe=ne.userOptions.pane||0,Ge=this.pane=ye.pane&&ye.pane[Fe];if(Ie==="colorAxis"){this.isRadial=!1;return}we?(we&&Ce?(this.isHidden=!0,this.createLabelCollector=X,this.getOffset=v,this.redraw=K,this.render=K,this.setScale=v,this.setCategories=v,this.setTitle=v):B(this),ce=!Ce):ze&&(B(this),ce=this.horiz),we||ze?(this.isRadial=!0,this.labelCollector||(this.labelCollector=this.createLabelCollector()),this.labelCollector&&ye.labelCollectors.push(this.labelCollector)):this.isRadial=!1,Ge&&ce&&(Ge.axis=this),this.isCircular=ce}function ie(){this.isRadial&&this.beforeSetTickPositions()}function oe(ne){let ce=this.label;if(!ce)return;let ye=this.axis,we=ce.getBBox(),ze=ye.options.labels,Ce=(ye.translate(this.pos)+ye.startAngleRad+Math.PI/2)/Math.PI*180%360,Ie=Math.round(Ce),Fe=_(ze.y)?0:-(.3*we.height),Ge=ze.y,ke,ge=20,fe=ze.align,Me="end",De=Ie<0?Ie+360:Ie,Pe=De,je=0,Xe=0;ye.isRadial&&(ke=ye.getPosition(this.pos,ye.center[2]/2+T(P(ze.distance,-25),ye.center[2]/2,-ye.center[2]/2)),ze.rotation==="auto"?ce.attr({rotation:Ce}):_(Ge)||(Ge=ye.chart.renderer.fontMetrics(ce).b-we.height/2),_(fe)||(ye.isCircular?(we.width>ye.len*ye.tickInterval/(ye.max-ye.min)&&(ge=0),fe=Ce>ge&&Ce<180-ge?"left":Ce>180+ge&&Ce<360-ge?"right":"center"):fe="center",ce.attr({align:fe})),fe==="auto"&&ye.tickPositions.length===2&&ye.isCircular&&(De>90&&De<180?De=180-De:De>270&&De<=360&&(De=540-De),Pe>180&&Pe<=360&&(Pe=360-Pe),(ye.pane.options.startAngle===Ie||ye.pane.options.startAngle===Ie+360||ye.pane.options.startAngle===Ie-360)&&(Me="start"),fe=Ie>=-90&&Ie<=90||Ie>=-360&&Ie<=-270||Ie>=270&&Ie<=360?Me==="start"?"right":"left":Me==="start"?"left":"right",Pe>70&&Pe<110&&(fe="center"),De<15||De>=180&&De<195?je=.3*we.height:De>=15&&De<=35?je=Me==="start"?0:.75*we.height:De>=195&&De<=215?je=Me==="start"?.75*we.height:0:De>35&&De<=90?je=Me==="start"?-(.25*we.height):we.height:De>215&&De<=270&&(je=Me==="start"?we.height:-(.25*we.height)),Pe<15?Xe=Me==="start"?-(.15*we.height):.15*we.height:Pe>165&&Pe<=180&&(Xe=Me==="start"?.15*we.height:-(.15*we.height)),ce.attr({align:fe}),ce.translate(Xe,je+Fe)),ne.pos.x=ke.x+(ze.x||0),ne.pos.y=ke.y+(Ge||0))}function Ee(ne){this.axis.getPosition&&w(ne.pos,this.axis.getPosition(this.pos))}function xe({options:ne}){ne.xAxis&&x(!0,N.radialDefaultOptions.circular,ne.xAxis),ne.yAxis&&x(!0,N.radialDefaultOptions.radialGauge,ne.yAxis)}function Se(ne,ce){let ye=this.chart,we=this.center;return ne=this.startAngleRad+ne,{x:ye.plotLeft+we[0]+Math.cos(ne)*ce,y:ye.plotTop+we[1]+Math.sin(ne)*ce}}function K(){this.isDirty=!1}function Q(){let ne,ce;this.constructor.prototype.setAxisSize.call(this),this.isRadial&&(this.pane.updateCenter(this),ne=this.center=this.pane.center.slice(),this.isCircular?this.sector=this.endAngleRad-this.startAngleRad:(ce=this.postTranslate(this.angleRad,ne[3]/2),ne[0]=ce.x-this.chart.plotLeft,ne[1]=ce.y-this.chart.plotTop),this.len=this.width=this.height=(ne[2]-ne[3])*P(this.sector,1)/2)}function ae(){this.constructor.prototype.setAxisTranslation.call(this),this.center&&(this.isCircular?this.transA=(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.transA=(this.center[2]-this.center[3])/2/(this.max-this.min||1),this.isXAxis?this.minPixelPadding=this.transA*this.minPointOffset:this.minPixelPadding=0)}function _e(ne){let{coll:ce}=this,{angular:ye,inverted:we,polar:ze}=this.chart,Ce={};ye?this.isXAxis||(Ce=x(m.yAxis,N.radialDefaultOptions.radialGauge)):ze&&(Ce=this.horiz?x(m.xAxis,N.radialDefaultOptions.circular):x(ce==="xAxis"?m.xAxis:m.yAxis,N.radialDefaultOptions.radial)),we&&ce==="yAxis"&&(Ce.stackLabels=S(m.yAxis,!0)?m.yAxis.stackLabels:{},Ce.reversedStacks=!0);let Ie=this.options=x(Ce,ne);Ie.plotBands||(Ie.plotBands=[]),k(this,"afterSetOptions")}function J(ne,ce,ye,we,ze,Ce,Ie){let Fe,Ge=this.axis;return Ge.isRadial?["M",ce,ye,"L",(Fe=Ge.getPosition(this.pos,Ge.center[2]/2+we)).x,Fe.y]:ne.call(this,ce,ye,we,ze,Ce,Ie)}N.radialDefaultOptions=x(s),N.compose=function(ne,ce){return D(g,"Axis.Radial")&&(y(ne,"afterInit",H),y(ne,"autoLabelAlign",W),y(ne,"destroy",re),y(ne,"init",de),y(ne,"initialAxisTranslation",ie),y(ce,"afterGetLabelPosition",oe),y(ce,"afterGetPosition",Ee),y(u,"setOptions",xe),I(ce.prototype,"getMarkPath",J)),ne}}(p||(p={})),p}),r(t,"Series/PolarComposition.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Extensions/Pane/Pane.js"],t["Core/Axis/RadialAxis.js"],t["Core/Utilities.js"]],function(s,l,u,n,p,m){let{animObject:g}=s,{composed:v}=l,{addEvent:y,defined:C,find:_,isNumber:w,merge:k,pick:S,pushUnique:x,relativeLength:P,splat:D,uniqueKey:T,wrap:I}=m;function N(){(this.pane||[]).forEach(xe=>{xe.render()})}function q(xe){let Se=xe.args[0].xAxis,K=xe.args[0].yAxis,Q=xe.args[0].chart;Se&&K&&(K.gridLineInterpolation==="polygon"?(Se.startOnTick=!0,Se.endOnTick=!0):Se.gridLineInterpolation==="polygon"&&Q.inverted&&(K.startOnTick=!0,K.endOnTick=!0))}function Z(){this.pane||(this.pane=[]),this.options.pane=D(this.options.pane),this.options.pane.forEach(xe=>{new n(xe,this)},this)}function X(xe){let Se=xe.args.marker,K=this.chart.xAxis[0],Q=this.chart.yAxis[0],ae=this.chart.inverted,_e=ae?Q:K,J=ae?K:Q;if(this.chart.polar){xe.preventDefault();let ne=(Se.attr?Se.attr("start"):Se.start)-_e.startAngleRad,ce=Se.attr?Se.attr("r"):Se.r,ye=(Se.attr?Se.attr("end"):Se.end)-_e.startAngleRad,we=Se.attr?Se.attr("innerR"):Se.innerR;xe.result.x=ne+_e.pos,xe.result.width=ye-ne,xe.result.y=J.len+J.pos-ce,xe.result.height=ce-we}}function O(xe){let Se=this.chart;if(Se.polar&&Se.hoverPane&&Se.hoverPane.axis){xe.preventDefault();let K=Se.hoverPane.center,Q=Se.mouseDownX||0,ae=Se.mouseDownY||0,_e=xe.args.chartY,J=xe.args.chartX,ne=2*Math.PI,ce=Se.hoverPane.axis.startAngleRad,ye=Se.hoverPane.axis.endAngleRad,we=Se.inverted?Se.xAxis[0]:Se.yAxis[0],ze={},Ce="arc";if(ze.x=K[0]+Se.plotLeft,ze.y=K[1]+Se.plotTop,this.zoomHor){let Ie=ce>0?ye-ce:Math.abs(ce)+Math.abs(ye),Fe=Math.atan2(ae-Se.plotTop-K[1],Q-Se.plotLeft-K[0])-ce,Ge=Math.atan2(_e-Se.plotTop-K[1],J-Se.plotLeft-K[0])-ce;ze.r=K[2]/2,ze.innerR=K[3]/2,Fe<=0&&(Fe+=ne),Ge<=0&&(Ge+=ne),Ge<Fe&&(Ge=[Fe,Fe=Ge][0]),Ie<ne&&ce+Ge>ye+(ne-Ie)/2&&(Ge=Fe,Fe=ce<=0?ce:0);let ke=ze.start=Math.max(Fe+ce,ce),ge=ze.end=Math.min(Ge+ce,ye);if(we.options.gridLineInterpolation==="polygon"){let fe=Se.hoverPane.axis,Me=ke-fe.startAngleRad+fe.pos,De=we.getPlotLinePath({value:we.max}),Pe=fe.toValue(Me),je=fe.toValue(Me+(ge-ke));if(Pe<fe.getExtremes().min){let{min:Xe,max:et}=fe.getExtremes();Pe=et-(Xe-Pe)}if(je<fe.getExtremes().min){let{min:Xe,max:et}=fe.getExtremes();je=et-(Xe-je)}je<Pe&&(je=[Pe,Pe=je][0]),(De=R(De,Pe,je,fe)).push(["L",K[0]+Se.plotLeft,Se.plotTop+K[1]]),ze.d=De,Ce="path"}}if(this.zoomVert){let Ie=Se.inverted?Se.xAxis[0]:Se.yAxis[0],Fe=Math.sqrt(Math.pow(Q-Se.plotLeft-K[0],2)+Math.pow(ae-Se.plotTop-K[1],2)),Ge=Math.sqrt(Math.pow(J-Se.plotLeft-K[0],2)+Math.pow(_e-Se.plotTop-K[1],2));if(Ge<Fe&&(Fe=[Ge,Ge=Fe][0]),Ge>K[2]/2&&(Ge=K[2]/2),Fe<K[3]/2&&(Fe=K[3]/2),this.zoomHor||(ze.start=ce,ze.end=ye),ze.r=Ge,ze.innerR=Fe,Ie.options.gridLineInterpolation==="polygon"){let ke=Ie.toValue(Ie.len+Ie.pos-Fe),ge=Ie.toValue(Ie.len+Ie.pos-Ge),fe=Ie.getPlotLinePath({value:ge}).concat(Ie.getPlotLinePath({value:ke,reverse:!0}));ze.d=fe,Ce="path"}}if(this.zoomHor&&this.zoomVert&&we.options.gridLineInterpolation==="polygon"){let Ie=Se.hoverPane.axis,Fe=ze.start||0,Ge=ze.end||0,ke=Fe-Ie.startAngleRad+Ie.pos,ge=Ie.toValue(ke),fe=Ie.toValue(ke+(Ge-Fe));if(ze.d instanceof Array){let Me=ze.d.slice(0,ze.d.length/2),De=ze.d.slice(ze.d.length/2,ze.d.length);De=[...De].reverse();let Pe=Se.hoverPane.axis;Me=R(Me,ge,fe,Pe),(De=R(De,ge,fe,Pe))&&(De[0][0]="L"),De=[...De].reverse(),ze.d=Me.concat(De),Ce="path"}}xe.attrs=ze,xe.shapeType=Ce}}function V(){let xe=this.chart;xe.polar&&(this.polar=new Ee(this),xe.inverted&&(this.isRadialSeries=!0,this.is("column")&&(this.isRadialBar=!0)))}function $(){if(this.chart.polar&&this.xAxis){let{xAxis:xe,yAxis:Se}=this,K=this.chart;this.kdByAngle=K.tooltip&&K.tooltip.shared,this.kdByAngle||K.inverted?this.searchPoint=L:this.options.findNearestPointBy="xy";let Q=this.points,ae=Q.length;for(;ae--;)this.is("column")||this.is("columnrange")||this.polar.toXY(Q[ae]),K.hasParallelCoordinates||this.yAxis.reversed||(S(Q[ae].y,Number.MIN_VALUE)<Se.min||Q[ae].x<xe.min||Q[ae].x>xe.max?(Q[ae].isNull=!0,Q[ae].plotY=NaN):Q[ae].isNull=Q[ae].isValid&&!Q[ae].isValid());this.hasClipCircleSetter||(this.hasClipCircleSetter=!!this.eventsToUnbind.push(y(this,"afterRender",function(){let _e;K.polar&&this.options.clip!==!1&&(_e=this.yAxis.pane.center,this.clipCircle?this.clipCircle.animate({x:_e[0],y:_e[1],r:_e[2]/2,innerR:_e[3]/2}):this.clipCircle=function(J,ne,ce,ye,we){let ze=T(),Ce=J.createElement("clipPath").attr({id:ze}).add(J.defs),Ie=we?J.arc(ne,ce,ye,we,0,2*Math.PI).add(Ce):J.circle(ne,ce,ye).add(Ce);return Ie.id=ze,Ie.clipPath=Ce,Ie}(K.renderer,_e[0],_e[1],_e[2]/2,_e[3]/2),this.group.clip(this.clipCircle),this.setClip=l.noop)})))}}function L(xe){let Se=this.chart,K=this.xAxis,Q=this.yAxis,ae=K.pane&&K.pane.center,_e=xe.chartX-(ae&&ae[0]||0)-Se.plotLeft,J=xe.chartY-(ae&&ae[1]||0)-Se.plotTop,ne=Se.inverted?{clientX:xe.chartX-Q.pos,plotY:xe.chartY-K.pos}:{clientX:180+-180/Math.PI*Math.atan2(_e,J)};return this.searchKDTree(ne)}function R(xe,Se,K,Q){let ae=Q.tickInterval,_e=Q.tickPositions,J=_(_e,ce=>ce>=K),ne=_([..._e].reverse(),ce=>ce<=Se);return C(J)||(J=_e[_e.length-1]),C(ne)||(ne=_e[0],J+=ae,xe[0][0]="L",xe.unshift(xe[xe.length-3])),(xe=xe.slice(_e.indexOf(ne),_e.indexOf(J)+1))[0][0]="M",xe}function G(xe,Se){return _(this.pane||[],K=>K.options.id===Se)||xe.call(this,Se)}function U(xe,Se,K,Q,ae,_e){let J,ne,ce,ye=this.chart,we=S(Q.inside,!!this.options.stacking);if(ye.polar){if(J=Se.rectPlotX/Math.PI*180,ye.inverted)this.forceDL=ye.isInsidePlot(Se.plotX,Se.plotY),we&&Se.shapeArgs?(ne=Se.shapeArgs,ae=k(ae,{x:(ce=this.yAxis.postTranslate(((ne.start||0)+(ne.end||0))/2-this.xAxis.startAngleRad,Se.barX+Se.pointWidth/2)).x-ye.plotLeft,y:ce.y-ye.plotTop})):Se.tooltipPos&&(ae=k(ae,{x:Se.tooltipPos[0],y:Se.tooltipPos[1]})),Q.align=S(Q.align,"center"),Q.verticalAlign=S(Q.verticalAlign,"middle");else{var ze;let Ce,Ie;(ze=Q).align===null&&(Ce=J>20&&J<160?"left":J>200&&J<340?"right":"center",ze.align=Ce),ze.verticalAlign===null&&(Ie=J<45||J>315?"bottom":J>135&&J<225?"top":"middle",ze.verticalAlign=Ie),Q=ze}u.prototype.alignDataLabel.call(this,Se,K,Q,ae,_e),this.isRadialBar&&Se.shapeArgs&&Se.shapeArgs.start===Se.shapeArgs.end?K.hide():K.show()}else xe.call(this,Se,K,Q,ae,_e)}function B(){let xe=this.options,Se=xe.stacking,K=this.chart,Q=this.xAxis,ae=this.yAxis,_e=ae.reversed,J=ae.center,ne=Q.startAngleRad,ce=Q.endAngleRad-ne,ye=xe.threshold,we=0,ze,Ce,Ie,Fe,Ge,ke=0,ge=0,fe,Me,De,Pe,je,Xe,et,nt;if(Q.isRadial)for(Ie=(ze=this.points).length,Fe=ae.translate(ae.min),Ge=ae.translate(ae.max),ye=xe.threshold||0,K.inverted&&w(ye)&&C(we=ae.translate(ye))&&(we<0?we=0:we>ce&&(we=ce),this.translatedThreshold=we+ne);Ie--;){if(Xe=(Ce=ze[Ie]).barX,Me=Ce.x,De=Ce.y,Ce.shapeType="arc",K.inverted){Ce.plotY=ae.translate(De),Se&&ae.stacking?(je=ae.stacking.stacks[(De<0?"-":"")+this.stackKey],this.visible&&je&&je[Me]&&!Ce.isNull&&(Pe=je[Me].points[this.getStackIndicator(void 0,Me,this.index).key],ke=ae.translate(Pe[0]),ge=ae.translate(Pe[1]),C(ke)&&(ke=m.clamp(ke,0,ce)))):(ke=we,ge=Ce.plotY),ke>ge&&(ge=[ke,ke=ge][0]),_e?ge>Fe?ge=Fe:ke<Ge?ke=Ge:(ke>Fe||ge<Ge)&&(ke=ge=ce):ke<Fe?ke=Fe:ge>Ge?ge=Ge:(ge<Fe||ke>Ge)&&(ke=ge=0),ae.min>ae.max&&(ke=ge=_e?ce:0),ke+=ne,ge+=ne,J&&(Ce.barX=Xe+=J[3]/2),et=Math.max(Xe,0),nt=Math.max(Xe+Ce.pointWidth,0);let ht=xe.borderRadius,gt=P((typeof ht=="object"?ht.radius:ht)||0,nt-et);Ce.shapeArgs={x:J[0],y:J[1],r:nt,innerR:et,start:ke,end:ge,borderRadius:gt},Ce.opacity=ke===ge?0:void 0,Ce.plotY=(C(this.translatedThreshold)&&(ke<this.translatedThreshold?ke:ge))-ne}else ke=Xe+ne,Ce.shapeArgs=this.polar.arc(Ce.yBottom,Ce.plotY,ke,ke+Ce.pointWidth),Ce.shapeArgs.borderRadius=0;this.polar.toXY(Ce),K.inverted?(fe=ae.postTranslate(Ce.rectPlotY,Xe+Ce.pointWidth/2),Ce.tooltipPos=[fe.x-K.plotLeft,fe.y-K.plotTop]):Ce.tooltipPos=[Ce.plotX,Ce.plotY],J&&(Ce.ttBelow=Ce.plotY>J[1])}}function H(xe,Se){let K,Q,ae=this;if(this.chart.polar){Se=Se||this.points;for(let J=0;J<Se.length;J++)if(!Se[J].isNull){K=J;break}this.options.connectEnds!==!1&&K!==void 0&&(this.connectEnds=!0,Se.splice(Se.length,0,Se[K]),Q=!0),Se.forEach(J=>{J.polarPlotY===void 0&&ae.polar.toXY(J)})}let _e=xe.apply(this,[].slice.call(arguments,1));return Q&&Se.pop(),_e}function W(xe,Se){let K=this.chart,Q={xAxis:[],yAxis:[]};return K.polar?K.axes.forEach(ae=>{if(ae.coll==="colorAxis")return;let _e=ae.isXAxis,J=ae.center,ne=Se.chartX-J[0]-K.plotLeft,ce=Se.chartY-J[1]-K.plotTop;Q[_e?"xAxis":"yAxis"].push({axis:ae,value:ae.translate(_e?Math.PI-Math.atan2(ne,ce):Math.sqrt(Math.pow(ne,2)+Math.pow(ce,2)),!0)})}):Q=xe.call(this,Se),Q}function re(xe,Se){this.chart.polar||xe.call(this,Se)}function de(xe,Se){let K=this,Q=this.chart,ae=this.group,_e=this.markerGroup,J=this.xAxis&&this.xAxis.center,ne=Q.plotLeft,ce=Q.plotTop,ye=this.options.animation,we,ze,Ce,Ie,Fe,Ge;Q.polar?K.isRadialBar?Se||(K.startAngleRad=S(K.translatedThreshold,K.xAxis.startAngleRad),l.seriesTypes.pie.prototype.animate.call(K,Se)):(ye=g(ye),K.is("column")?Se||(ze=J[3]/2,K.points.forEach(ke=>{Ce=ke.graphic,Fe=(Ie=ke.shapeArgs)&&Ie.r,Ge=Ie&&Ie.innerR,Ce&&Ie&&(Ce.attr({r:ze,innerR:ze}),Ce.animate({r:Fe,innerR:Ge},K.options.animation))})):Se?(we={translateX:J[0]+ne,translateY:J[1]+ce,scaleX:.001,scaleY:.001},ae.attr(we),_e&&_e.attr(we)):(we={translateX:ne,translateY:ce,scaleX:1,scaleY:1},ae.animate(we,ye),_e&&_e.animate(we,ye))):xe.call(this,Se)}function ie(xe,Se,K,Q){let ae,_e;if(this.chart.polar)if(Q){let J=(_e=function ce(ye,we,ze,Ce){let Ie,Fe,Ge,ke,ge,fe,Me=Ce?1:0,De=(Ie=we>=0&&we<=ye.length-1?we:we<0?ye.length-1+we:0)-1<0?ye.length-(1+Me):Ie-1,Pe=Ie+1>ye.length-1?Me:Ie+1,je=ye[De],Xe=ye[Pe],et=je.plotX,nt=je.plotY,ht=Xe.plotX,gt=Xe.plotY,wt=ye[Ie].plotX,Rt=ye[Ie].plotY;Fe=(1.5*wt+et)/2.5,Ge=(1.5*Rt+nt)/2.5,ke=(1.5*wt+ht)/2.5,ge=(1.5*Rt+gt)/2.5;let ft=Math.sqrt(Math.pow(Fe-wt,2)+Math.pow(Ge-Rt,2)),St=Math.sqrt(Math.pow(ke-wt,2)+Math.pow(ge-Rt,2)),Ct=Math.atan2(Ge-Rt,Fe-wt);fe=Math.PI/2+(Ct+Math.atan2(ge-Rt,ke-wt))/2,Math.abs(Ct-fe)>Math.PI/2&&(fe-=Math.PI),Fe=wt+Math.cos(fe)*ft,Ge=Rt+Math.sin(fe)*ft;let si={rightContX:ke=wt+Math.cos(Math.PI+fe)*St,rightContY:ge=Rt+Math.sin(Math.PI+fe)*St,leftContX:Fe,leftContY:Ge,plotX:wt,plotY:Rt};return ze&&(si.prevPointCont=ce(ye,De,!1,Ce)),si}(Se,Q,!0,this.connectEnds)).prevPointCont&&_e.prevPointCont.rightContX,ne=_e.prevPointCont&&_e.prevPointCont.rightContY;ae=["C",w(J)?J:_e.plotX,w(ne)?ne:_e.plotY,w(_e.leftContX)?_e.leftContX:_e.plotX,w(_e.leftContY)?_e.leftContY:_e.plotY,_e.plotX,_e.plotY]}else ae=["M",K.plotX,K.plotY];else ae=xe.call(this,Se,K,Q);return ae}function oe(xe,Se,K=this.plotY){if(!this.destroyed){let{plotX:Q,series:ae}=this,{chart:_e}=ae;return _e.polar&&w(Q)&&w(K)?[Q+(Se?_e.plotLeft:0),K+(Se?_e.plotTop:0)]:xe.call(this,Se,K)}}class Ee{static compose(Se,K,Q,ae,_e,J,ne,ce,ye,we){if(n.compose(K,Q),p.compose(Se,_e),x(v,"Polar")){let ze=K.prototype,Ce=J.prototype,Ie=Q.prototype,Fe=ae.prototype;if(y(K,"afterDrawChartBox",N),y(K,"getAxes",Z),y(K,"init",q),I(ze,"get",G),I(Ie,"getCoordinates",W),I(Ie,"pinch",re),y(Q,"getSelectionMarkerAttrs",O),y(Q,"getSelectionBox",X),y(ae,"afterInit",V),y(ae,"afterTranslate",$,{order:2}),y(ae,"afterColumnTranslate",B,{order:4}),I(Fe,"animate",de),I(Ce,"pos",oe),ce){let Ge=ce.prototype;I(Ge,"alignDataLabel",U),I(Ge,"animate",de)}if(ye&&I(ye.prototype,"getGraphPath",H),we){let Ge=we.prototype;I(Ge,"getPointSpline",ie),ne&&(ne.prototype.getPointSpline=Ge.getPointSpline)}}}constructor(Se){this.series=Se}arc(Se,K,Q,ae){let _e=this.series,J=_e.xAxis.center,ne=_e.yAxis.len,ce=J[3]/2,ye=ne-K+ce,we=ne-S(Se,ne)+ce;return _e.yAxis.reversed&&(ye<0&&(ye=ce),we<0&&(we=ce)),{x:J[0],y:J[1],r:ye,innerR:we,start:Q,end:ae}}toXY(Se){let K=this.series,Q=K.chart,ae=K.xAxis,_e=K.yAxis,J=Se.plotX,ne=Q.inverted,ce=Se.y,ye=Se.plotY,we=ne?J:_e.len-ye,ze;if(ne&&K&&!K.isRadialBar&&(Se.plotY=ye=w(ce)?_e.translate(ce):0),Se.rectPlotX=J,Se.rectPlotY=ye,_e.center&&(we+=_e.center[3]/2),w(ye)){let Ce=ne?_e.postTranslate(ye,we):ae.postTranslate(J,we);Se.plotX=Se.polarPlotX=Ce.x-Q.plotLeft,Se.plotY=Se.polarPlotY=Ce.y-Q.plotTop}K.kdByAngle?((ze=(J/Math.PI*180+ae.pane.options.startAngle)%360)<0&&(ze+=360),Se.clientX=ze):Se.clientX=Se.plotX}}return Ee}),r(t,"Core/Axis/WaterfallAxis.js",[t["Core/Globals.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(s,l,u){var n;let{composed:p}=s,{addEvent:m,objectEach:g,pushUnique:v}=u;return function(y){function C(){let x=this.waterfall.stacks;x&&(x.changed=!1,delete x.alreadyChanged)}function _(){let x=this.options.stackLabels;x&&x.enabled&&this.waterfall.stacks&&this.waterfall.renderStackTotals()}function w(){this.waterfall||(this.waterfall=new S(this))}function k(){let x=this.axes;for(let P of this.series)if(P.options.stacking){for(let D of x)D.isXAxis||(D.waterfall.stacks.changed=!0);break}}y.compose=function(x,P){v(p,"Axis.Waterfall")&&(m(x,"init",w),m(x,"afterBuildStacks",C),m(x,"afterRender",_),m(P,"beforeRedraw",k))};class S{constructor(P){this.axis=P,this.stacks={changed:!1}}renderStackTotals(){let P=this.axis,D=P.waterfall.stacks,T=P.stacking&&P.stacking.stackTotalGroup,I=new l(P,P.options.stackLabels||{},!1,0,void 0);this.dummyStackItem=I,T&&g(D,N=>{g(N,(q,Z)=>{I.total=q.stackTotal,I.x=+Z,q.label&&(I.label=q.label),l.prototype.render.call(I,T),q.label=I.label,delete I.label})}),I.total=null}}y.Composition=S}(n||(n={})),n}),r(t,"Series/Waterfall/WaterfallPoint.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(s,l,u){let{isNumber:n}=u;class p extends s.prototype.pointClass{getClassName(){let g=l.prototype.getClassName.call(this);return this.isSum?g+=" highcharts-sum":this.isIntermediateSum&&(g+=" highcharts-intermediate-sum"),g}isValid(){return n(this.y)||this.isSum||!!this.isIntermediateSum}}return p}),r(t,"Series/Waterfall/WaterfallSeriesDefaults.js",[],function(){return{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"Dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}}}),r(t,"Series/Waterfall/WaterfallSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Core/Axis/WaterfallAxis.js"],t["Series/Waterfall/WaterfallPoint.js"],t["Series/Waterfall/WaterfallSeriesDefaults.js"]],function(s,l,u,n,p){let{column:m,line:g}=s.seriesTypes,{addEvent:v,arrayMax:y,arrayMin:C,correctFloat:_,crisp:w,extend:k,isNumber:S,merge:x,objectEach:P,pick:D}=l;function T(N,q){return Object.hasOwnProperty.call(N,q)}class I extends m{generatePoints(){m.prototype.generatePoints.apply(this);for(let q=0,Z=this.points.length;q<Z;q++){let X=this.points[q],O=this.processedYData[q];S(O)&&(X.isIntermediateSum||X.isSum)&&(X.y=_(O))}}processData(q){let Z,X,O,V,$,L,R=this.options,G=this.yData,U=R.data,B=G.length,H=R.threshold||0;O=X=V=$=0;for(let W=0;W<B;W++)L=G[W],Z=U&&U[W]?U[W]:{},L==="sum"||Z.isSum?G[W]=_(O):L==="intermediateSum"||Z.isIntermediateSum?(G[W]=_(X),X=0):(O+=L,X+=L),V=Math.min(O,V),$=Math.max(O,$);super.processData.call(this,q),R.stacking||(this.dataMin=V+H,this.dataMax=$)}toYData(q){return q.isSum?"sum":q.isIntermediateSum?"intermediateSum":q.y}updateParallelArrays(q,Z){super.updateParallelArrays.call(this,q,Z),(this.yData[0]==="sum"||this.yData[0]==="intermediateSum")&&(this.yData[0]=null)}pointAttribs(q,Z){let X=this.options.upColor;X&&!q.options.color&&S(q.y)&&(q.color=q.y>0?X:void 0);let O=m.prototype.pointAttribs.call(this,q,Z);return delete O.dashstyle,O}getGraphPath(){return[["M",0,0]]}getCrispPath(){var G;let q=this.data.filter(U=>S(U.y)),Z=this.yAxis,X=q.length,O=((G=this.graph)==null?void 0:G.strokeWidth())||0,V=this.xAxis.reversed,$=this.yAxis.reversed,L=this.options.stacking,R=[];for(let U=1;U<X;U++){if(!(this.options.connectNulls||S(this.data[q[U].index-1].y)))continue;let B=q[U].box,H=q[U-1],W=H.y||0,re=q[U-1].box;if(!B||!re)continue;let de=Z.waterfall.stacks[this.stackKey],ie=W>0?-re.height:0;if(de&&re&&B){let oe,Ee=de[U-1];if(L){let xe=Ee.connectorThreshold;oe=w(Z.translate(xe,!1,!0,!1,!0)+($?ie:0),O)}else oe=w(re.y+(H.minPointLengthOffset||0),O);R.push(["M",(re.x||0)+(V?0:re.width||0),oe],["L",(B.x||0)+(V&&B.width||0),oe])}if(re&&R.length&&(!L&&W<0&&!$||W>0&&$)){let oe=R[R.length-2];oe&&typeof oe[2]=="number"&&(oe[2]+=re.height||0);let Ee=R[R.length-1];Ee&&typeof Ee[2]=="number"&&(Ee[2]+=re.height||0)}}return R}drawGraph(){g.prototype.drawGraph.call(this),this.graph&&this.graph.attr({d:this.getCrispPath()})}setStackedPoints(q){var ae;let Z=this.options,X=(ae=q.waterfall)==null?void 0:ae.stacks,O=Z.threshold||0,V=this.stackKey,$=this.xData,L=$.length,R=O,G=R,U,B=0,H=0,W=0,re,de,ie,oe,Ee,xe,Se,K,Q=(_e,J,ne,ce)=>{if(U){if(re)for(;ne<re;ne++)U.stackState[ne]+=ce;else U.stackState[0]=_e,re=U.stackState.length;U.stackState.push(U.stackState[re-1]+J)}};if(q.stacking&&X&&this.reserveSpace()){K=X.changed,(Se=X.alreadyChanged)&&0>Se.indexOf(V)&&(K=!0),X[V]||(X[V]={});let _e=X[V];if(_e)for(let J=0;J<L;J++)(!_e[xe=$[J]]||K)&&(_e[xe]={negTotal:0,posTotal:0,stackTotal:0,threshold:0,stateIndex:0,stackState:[],label:K&&_e[xe]?_e[xe].label:void 0}),U=_e[xe],(Ee=this.yData[J])>=0?U.posTotal+=Ee:U.negTotal+=Ee,oe=Z.data[J],de=U.absolutePos=U.posTotal,ie=U.absoluteNeg=U.negTotal,U.stackTotal=de+ie,re=U.stackState.length,oe&&oe.isIntermediateSum?(Q(W,H,0,W),W=H,H=O,R^=G,G^=R,R^=G):oe&&oe.isSum?(Q(O,B,re,0),R=O):(Q(R,Ee,0,B),oe&&(B+=Ee,H+=Ee)),U.stateIndex++,U.threshold=R,R+=U.stackTotal;X.changed=!1,X.alreadyChanged||(X.alreadyChanged=[]),X.alreadyChanged.push(V)}}getExtremes(){let q,Z,X,O=this.options.stacking;return O?(q=this.yAxis.waterfall.stacks,Z=this.stackedYNeg=[],X=this.stackedYPos=[],O==="overlap"?P(q[this.stackKey],function(V){Z.push(C(V.stackState)),X.push(y(V.stackState))}):P(q[this.stackKey],function(V){Z.push(V.negTotal+V.threshold),X.push(V.posTotal+V.threshold)}),{dataMin:C(Z),dataMax:y(X)}):{dataMin:this.dataMin,dataMax:this.dataMax}}}return I.defaultOptions=x(m.defaultOptions,p),I.compose=u.compose,k(I.prototype,{pointValKey:"y",showLine:!0,pointClass:n}),v(I,"afterColumnTranslate",function(){let{options:N,points:q,yAxis:Z}=this,X=D(N.minPointLength,5),O=X/2,V=N.threshold||0,$=N.stacking,L=Z.waterfall.stacks[this.stackKey],R=V,G=V,U,B,H,W;for(let re=0;re<q.length;re++){let de=q[re],ie=this.processedYData[re],oe=k({x:0,y:0,width:0,height:0},de.shapeArgs||{});de.box=oe;let Ee=[0,ie],xe=de.y||0;if($){if(L){let Q=L[re];$==="overlap"?(B=Q.stackState[Q.stateIndex--],U=xe>=0?B:B-xe,T(Q,"absolutePos")&&delete Q.absolutePos,T(Q,"absoluteNeg")&&delete Q.absoluteNeg):(xe>=0?(B=Q.threshold+Q.posTotal,Q.posTotal-=xe,U=B):(B=Q.threshold+Q.negTotal,Q.negTotal-=xe,U=B-xe),!Q.posTotal&&S(Q.absolutePos)&&T(Q,"absolutePos")&&(Q.posTotal=Q.absolutePos,delete Q.absolutePos),!Q.negTotal&&S(Q.absoluteNeg)&&T(Q,"absoluteNeg")&&(Q.negTotal=Q.absoluteNeg,delete Q.absoluteNeg)),de.isSum||(Q.connectorThreshold=Q.threshold+Q.stackTotal),Z.reversed?(H=xe>=0?U-xe:U+xe,W=U):(H=U,W=U-xe),de.below=H<=V,oe.y=Z.translate(H,!1,!0,!1,!0),oe.height=Math.abs(oe.y-Z.translate(W,!1,!0,!1,!0));let ae=Z.waterfall.dummyStackItem;ae&&(ae.x=re,ae.label=L[re].label,ae.setOffset(this.pointXOffset||0,this.barW||0,this.stackedYNeg[re],this.stackedYPos[re],void 0,this.xAxis))}}else U=Math.max(G,G+xe)+Ee[0],oe.y=Z.translate(U,!1,!0,!1,!0),de.isSum?(oe.y=Z.translate(Ee[1],!1,!0,!1,!0),oe.height=Math.min(Z.translate(Ee[0],!1,!0,!1,!0),Z.len)-oe.y,de.below=Ee[1]<=V):de.isIntermediateSum?(xe>=0?(H=Ee[1]+R,W=R):(H=R,W=Ee[1]+R),Z.reversed&&(H^=W,W^=H,H^=W),oe.y=Z.translate(H,!1,!0,!1,!0),oe.height=Math.abs(oe.y-Math.min(Z.translate(W,!1,!0,!1,!0),Z.len)),R+=Ee[1],de.below=H<=V):(oe.height=ie>0?Z.translate(G,!1,!0,!1,!0)-oe.y:Z.translate(G,!1,!0,!1,!0)-Z.translate(G-ie,!1,!0,!1,!0),G+=ie,de.below=G<V),oe.height<0&&(oe.y+=oe.height,oe.height*=-1);de.plotY=oe.y,de.yBottom=oe.y+oe.height,oe.height<=X&&!de.isNull?(oe.height=X,oe.y-=O,de.yBottom=oe.y+oe.height,de.plotY=oe.y,xe<0?de.minPointLengthOffset=-O:de.minPointLengthOffset=O):(de.isNull&&(oe.width=0),de.minPointLengthOffset=0);let Se=de.plotY+(de.negative?oe.height:0);de.below&&(de.plotY+=oe.height),de.tooltipPos&&(this.chart.inverted?de.tooltipPos[0]=Z.len-Se:de.tooltipPos[1]=Se),de.isInside=this.isPointInside(de);let K=w(de.yBottom,this.borderWidth);oe.y=w(oe.y,this.borderWidth),oe.height=K-oe.y,x(!0,de.shapeArgs,oe)}},{order:2}),s.registerSeriesType("waterfall",I),I}),r(t,"masters/highcharts-more.src.js",[t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Extensions/Pane/Pane.js"],t["Series/Bubble/BubbleSeries.js"],t["Series/PackedBubble/PackedBubbleSeries.js"],t["Series/PolarComposition.js"],t["Core/Axis/RadialAxis.js"],t["Series/Waterfall/WaterfallSeries.js"]],function(s,l,u,n,p,m,g,v){return s.RadialAxis=g,n.compose(s.Axis,s.Chart,s.Legend),p.compose(s.Axis,s.Chart,s.Legend),u.compose(s.Chart,s.Pointer),m.compose(s.Axis,s.Chart,s.Pointer,s.Series,s.Tick,s.Point,l.seriesTypes.areasplinerange,l.seriesTypes.column,l.seriesTypes.line,l.seriesTypes.spline),v.compose(s.Axis,s.Chart),s})})})(fE);var XN=fE.exports;const KN=oh(XN);var mE={exports:{}};(function(i){(function(e){i.exports?(e.default=e,i.exports=e):e(typeof Highcharts<"u"?Highcharts:void 0)})(function(e){var t=e?e._modules:{};function r(s,l,u,n){s.hasOwnProperty(l)||(s[l]=n.apply(null,u),typeof CustomEvent=="function"&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:l,module:s[l]}})))}r(t,"Core/Chart/ChartNavigationComposition.js",[],function(){var s;return function(l){l.compose=function(n){return n.navigation||(n.navigation=new u(n)),n};class u{constructor(p){this.updates=[],this.chart=p}addUpdate(p){this.chart.navigation.updates.push(p)}update(p,m){this.updates.forEach(g=>{g.call(this.chart,p,m)})}}l.Additions=u}(s||(s={})),s}),r(t,"Extensions/Exporting/ExportingDefaults.js",[t["Core/Globals.js"]],function(s){let{isTouchDevice:l}=s;return{exporting:{allowTableSorting:!0,type:"image/png",url:"https://export.highcharts.com/",pdfFont:{normal:void 0,bold:void 0,bolditalic:void 0,italic:void 0},printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",titleKey:"contextButtonTitle",menuItems:["viewFullscreen","printChart","separator","downloadPNG","downloadJPEG","downloadPDF","downloadSVG"]}},menuItemDefinitions:{viewFullscreen:{textKey:"viewFullscreen",onclick:function(){this.fullscreen&&this.fullscreen.toggle()}},printChart:{textKey:"printChart",onclick:function(){this.print()}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChart()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}}},lang:{viewFullscreen:"View in full screen",exitFullscreen:"Exit from full screen",printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"},navigation:{buttonOptions:{symbolSize:14,symbolX:14.5,symbolY:13.5,align:"right",buttonSpacing:3,height:28,verticalAlign:"top",width:28,symbolFill:"#666666",symbolStroke:"#666666",symbolStrokeWidth:3,theme:{fill:"#ffffff",padding:5,stroke:"none","stroke-linecap":"round"}},menuStyle:{border:"none",borderRadius:"3px",background:"#ffffff",padding:"0.5em"},menuItemStyle:{background:"none",borderRadius:"3px",color:"#333333",padding:"0.5em",fontSize:l?"0.9em":"0.8em",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:"#f2f2f2"}}}}),r(t,"Extensions/Exporting/ExportingSymbols.js",[],function(){var s;return function(l){let u=[];function n(m,g,v,y){return[["M",m,g+2.5],["L",m+v,g+2.5],["M",m,g+y/2+.5],["L",m+v,g+y/2+.5],["M",m,g+y-1.5],["L",m+v,g+y-1.5]]}function p(m,g,v,y){let C=y/3-2;return[].concat(this.circle(v-C,g,C,C),this.circle(v-C,g+C+4,C,C),this.circle(v-C,g+2*(C+4),C,C))}l.compose=function(m){if(u.indexOf(m)===-1){u.push(m);let g=m.prototype.symbols;g.menu=n,g.menuball=p.bind(g)}}}(s||(s={})),s}),r(t,"Extensions/Exporting/Fullscreen.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l,u){let{composed:n}=l,{addEvent:p,fireEvent:m,pushUnique:g}=u;function v(){this.fullscreen=new y(this)}class y{static compose(_){g(n,"Fullscreen")&&p(_,"beforeRender",v)}constructor(_){this.chart=_,this.isOpen=!1;let w=_.renderTo;!this.browserProps&&(typeof w.requestFullscreen=="function"?this.browserProps={fullscreenChange:"fullscreenchange",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen"}:w.mozRequestFullScreen?this.browserProps={fullscreenChange:"mozfullscreenchange",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen"}:w.webkitRequestFullScreen?this.browserProps={fullscreenChange:"webkitfullscreenchange",requestFullscreen:"webkitRequestFullScreen",exitFullscreen:"webkitExitFullscreen"}:w.msRequestFullscreen&&(this.browserProps={fullscreenChange:"MSFullscreenChange",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen"}))}close(){let _=this,w=_.chart,k=w.options.chart;m(w,"fullscreenClose",null,function(){_.isOpen&&_.browserProps&&w.container.ownerDocument instanceof Document&&w.container.ownerDocument[_.browserProps.exitFullscreen](),_.unbindFullscreenEvent&&(_.unbindFullscreenEvent=_.unbindFullscreenEvent()),w.setSize(_.origWidth,_.origHeight,!1),_.origWidth=void 0,_.origHeight=void 0,k.width=_.origWidthOption,k.height=_.origHeightOption,_.origWidthOption=void 0,_.origHeightOption=void 0,_.isOpen=!1,_.setButtonText()})}open(){let _=this,w=_.chart,k=w.options.chart;m(w,"fullscreenOpen",null,function(){if(k&&(_.origWidthOption=k.width,_.origHeightOption=k.height),_.origWidth=w.chartWidth,_.origHeight=w.chartHeight,_.browserProps){let S=p(w.container.ownerDocument,_.browserProps.fullscreenChange,function(){_.isOpen?(_.isOpen=!1,_.close()):(w.setSize(null,null,!1),_.isOpen=!0,_.setButtonText())}),x=p(w,"destroy",S);_.unbindFullscreenEvent=()=>{S(),x()};let P=w.renderTo[_.browserProps.requestFullscreen]();P&&P.catch(function(){alert("Full screen is not supported inside a frame.")})}})}setButtonText(){let _=this.chart,w=_.exportDivElements,k=_.options.exporting,S=k&&k.buttons&&k.buttons.contextButton.menuItems,x=_.options.lang;if(k&&k.menuItemDefinitions&&x&&x.exitFullscreen&&x.viewFullscreen&&S&&w){let P=w[S.indexOf("viewFullscreen")];P&&s.setElementHTML(P,this.isOpen?x.exitFullscreen:k.menuItemDefinitions.viewFullscreen.text||x.viewFullscreen)}}toggle(){this.isOpen?this.close():this.open()}}return y}),r(t,"Core/HttpUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(s,l){let{win:u}=s,{discardElement:n,objectEach:p}=l,m={ajax:function(g){let v={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"},y=new XMLHttpRequest;function C(_,w){g.error&&g.error(_,w)}if(!g.url)return!1;y.open((g.type||"get").toUpperCase(),g.url,!0),g.headers&&g.headers["Content-Type"]||y.setRequestHeader("Content-Type",v[g.dataType||"json"]||v.text),p(g.headers,function(_,w){y.setRequestHeader(w,_)}),g.responseType&&(y.responseType=g.responseType),y.onreadystatechange=function(){let _;if(y.readyState===4){if(y.status===200){if(g.responseType!=="blob"&&(_=y.responseText,g.dataType==="json"))try{_=JSON.parse(_)}catch(w){if(w instanceof Error)return C(y,w)}return g.success&&g.success(_,y)}C(y,y.responseText)}},g.data&&typeof g.data!="string"&&(g.data=JSON.stringify(g.data)),y.send(g.data)},getJSON:function(g,v){m.ajax({url:g,success:v,dataType:"json",headers:{"Content-Type":"text/plain"}})},post:function(g,v,y){let C=new u.FormData;p(v,function(k,S){C.append(S,k)}),C.append("b64","true");let{filename:_,type:w}=v;return u.fetch(g,{method:"POST",body:C,...y}).then(k=>{k.ok&&k.text().then(S=>{let x=document.createElement("a");x.href=`data:${w};base64,${S}`,x.download=_,x.click(),n(x)})})}};return m}),r(t,"Extensions/Exporting/Exporting.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Chart/Chart.js"],t["Core/Chart/ChartNavigationComposition.js"],t["Core/Defaults.js"],t["Extensions/Exporting/ExportingDefaults.js"],t["Extensions/Exporting/ExportingSymbols.js"],t["Extensions/Exporting/Fullscreen.js"],t["Core/Globals.js"],t["Core/HttpUtilities.js"],t["Core/Utilities.js"]],function(s,l,u,n,p,m,g,v,y,C){var _;let{defaultOptions:w}=n,{doc:k,SVG_NS:S,win:x}=v,{addEvent:P,css:D,createElement:T,discardElement:I,extend:N,find:q,fireEvent:Z,isObject:X,merge:O,objectEach:V,pick:$,removeEvent:L,uniqueKey:R}=C;return function(G){let U,B=[/-/,/^(clipPath|cssText|d|height|width)$/,/^font$/,/[lL]ogical(Width|Height)$/,/^parentRule$/,/^(cssRules|ownerRules)$/,/perspective/,/TapHighlightColor/,/^transition/,/^length$/,/^\d+$/],H=["fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","textAnchor","x","y"];G.inlineAllowlist=[];let W=["clipPath","defs","desc"];function re(Ce){let Ie,Fe,Ge=this,ke=Ge.renderer,ge=O(Ge.options.navigation.buttonOptions,Ce),fe=ge.onclick,Me=ge.menuItems,De=ge.symbolSize||12;if(Ge.btnCount||(Ge.btnCount=0),Ge.exportDivElements||(Ge.exportDivElements=[],Ge.exportSVGElements=[]),ge.enabled===!1||!ge.theme)return;let Pe=Ge.styledMode?{}:ge.theme;fe?Fe=function(Xe){Xe&&Xe.stopPropagation(),fe.call(Ge,Xe)}:Me&&(Fe=function(Xe){Xe&&Xe.stopPropagation(),Ge.contextMenu(je.menuClassName,Me,je.translateX||0,je.translateY||0,je.width||0,je.height||0,je),je.setState(2)}),ge.text&&ge.symbol?Pe.paddingLeft=$(Pe.paddingLeft,30):ge.text||N(Pe,{width:ge.width,height:ge.height,padding:0});let je=ke.button(ge.text,0,0,Fe,Pe,void 0,void 0,void 0,void 0,ge.useHTML).addClass(Ce.className).attr({title:$(Ge.options.lang[ge._titleKey||ge.titleKey],"")});je.menuClassName=Ce.menuClassName||"highcharts-menu-"+Ge.btnCount++,ge.symbol&&(Ie=ke.symbol(ge.symbol,Math.round((ge.symbolX||0)-De/2),Math.round((ge.symbolY||0)-De/2),De,De,{width:De,height:De}).addClass("highcharts-button-symbol").attr({zIndex:1}).add(je),Ge.styledMode||Ie.attr({stroke:ge.symbolStroke,fill:ge.symbolFill,"stroke-width":ge.symbolStrokeWidth||1})),je.add(Ge.exportingGroup).align(N(ge,{width:je.width,x:$(ge.x,Ge.buttonOffset)}),!0,"spacingBox"),Ge.buttonOffset+=((je.width||0)+ge.buttonSpacing)*(ge.align==="right"?-1:1),Ge.exportSVGElements.push(je,Ie)}function de(){if(!this.printReverseInfo)return;let{childNodes:Ce,origDisplay:Ie,resetParams:Fe}=this.printReverseInfo;this.moveContainers(this.renderTo),[].forEach.call(Ce,function(Ge,ke){Ge.nodeType===1&&(Ge.style.display=Ie[ke]||"")}),this.isPrinting=!1,Fe&&this.setSize.apply(this,Fe),delete this.printReverseInfo,U=void 0,Z(this,"afterPrint")}function ie(){var Ge;let Ce=k.body,Ie=this.options.exporting.printMaxWidth,Fe={childNodes:Ce.childNodes,origDisplay:[],resetParams:void 0};this.isPrinting=!0,(Ge=this.pointer)==null||Ge.reset(void 0,0),Z(this,"beforePrint"),Ie&&this.chartWidth>Ie&&(Fe.resetParams=[this.options.chart.width,void 0,!1],this.setSize(Ie,void 0,!1)),[].forEach.call(Fe.childNodes,function(ke,ge){ke.nodeType===1&&(Fe.origDisplay[ge]=ke.style.display,ke.style.display="none")}),this.moveContainers(Ce),this.printReverseInfo=Fe}function oe(Ce){Ce.renderExporting(),P(Ce,"redraw",Ce.renderExporting),P(Ce,"destroy",Ce.destroyExport)}function Ee(Ce,Ie,Fe,Ge,ke,ge,fe){var wt,Rt;let Me=this,De=Me.options.navigation,Pe=Me.chartWidth,je=Me.chartHeight,Xe="cache-"+Ce,et=Math.max(ke,ge),nt,ht=Me[Xe];ht||(Me.exportContextMenu=Me[Xe]=ht=T("div",{className:Ce},{position:"absolute",zIndex:1e3,padding:et+"px",pointerEvents:"auto",...Me.renderer.style},((wt=Me.scrollablePlotArea)==null?void 0:wt.fixedDiv)||Me.container),nt=T("ul",{className:"highcharts-menu"},Me.styledMode?{}:{listStyle:"none",margin:0,padding:0},ht),Me.styledMode||D(nt,N({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},De.menuStyle)),ht.hideMenu=function(){D(ht,{display:"none"}),fe&&fe.setState(0),Me.openMenu=!1,D(Me.renderTo,{overflow:"hidden"}),D(Me.container,{overflow:"hidden"}),C.clearTimeout(ht.hideTimer),Z(Me,"exportMenuHidden")},Me.exportEvents.push(P(ht,"mouseleave",function(){ht.hideTimer=x.setTimeout(ht.hideMenu,500)}),P(ht,"mouseenter",function(){C.clearTimeout(ht.hideTimer)}),P(k,"mouseup",function(ft){var St;(St=Me.pointer)!=null&&St.inClass(ft.target,Ce)||ht.hideMenu()}),P(ht,"click",function(){Me.openMenu&&ht.hideMenu()})),Ie.forEach(function(ft){if(typeof ft=="string"&&(ft=Me.options.exporting.menuItemDefinitions[ft]),X(ft,!0)){let St;ft.separator?St=T("hr",void 0,void 0,nt):(ft.textKey==="viewData"&&Me.isDataTableVisible&&(ft.textKey="hideData"),St=T("li",{className:"highcharts-menu-item",onclick:function(Ct){Ct&&Ct.stopPropagation(),ht.hideMenu(),typeof ft!="string"&&ft.onclick&&ft.onclick.apply(Me,arguments)}},void 0,nt),s.setElementHTML(St,ft.text||Me.options.lang[ft.textKey]),Me.styledMode||(St.onmouseover=function(){D(this,De.menuItemHoverStyle)},St.onmouseout=function(){D(this,De.menuItemStyle)},D(St,N({cursor:"pointer"},De.menuItemStyle||{})))),Me.exportDivElements.push(St)}}),Me.exportDivElements.push(nt,ht),Me.exportMenuWidth=ht.offsetWidth,Me.exportMenuHeight=ht.offsetHeight);let gt={display:"block"};Fe+(Me.exportMenuWidth||0)>Pe?gt.right=Pe-Fe-ke-et+"px":gt.left=Fe-et+"px",Ge+ge+(Me.exportMenuHeight||0)>je&&((Rt=fe.alignOptions)==null?void 0:Rt.verticalAlign)!=="top"?gt.bottom=je-Ge-et+"px":gt.top=Ge+ge-et+"px",D(ht,gt),D(Me.renderTo,{overflow:""}),D(Me.container,{overflow:""}),Me.openMenu=!0,Z(Me,"exportMenuShown")}function xe(Ce){let Ie,Fe=Ce?Ce.target:this,Ge=Fe.exportSVGElements,ke=Fe.exportDivElements,ge=Fe.exportEvents;Ge&&(Ge.forEach((fe,Me)=>{fe&&(fe.onclick=fe.ontouchstart=null,Fe[Ie="cache-"+fe.menuClassName]&&delete Fe[Ie],Ge[Me]=fe.destroy())}),Ge.length=0),Fe.exportingGroup&&(Fe.exportingGroup.destroy(),delete Fe.exportingGroup),ke&&(ke.forEach(function(fe,Me){fe&&(C.clearTimeout(fe.hideTimer),L(fe,"mouseleave"),ke[Me]=fe.onmouseout=fe.onmouseover=fe.ontouchstart=fe.onclick=null,I(fe))}),ke.length=0),ge&&(ge.forEach(function(fe){fe()}),ge.length=0)}function Se(Ce,Ie){let Fe=this.getSVGForExport(Ce,Ie);Ce=O(this.options.exporting,Ce),y.post(Ce.url,{filename:Ce.filename?Ce.filename.replace(/\//g,"-"):this.getFilename(),type:Ce.type,width:Ce.width,scale:Ce.scale,svg:Fe},Ce.fetchOptions)}function K(){return this.styledMode&&this.inlineStyles(),this.container.innerHTML}function Q(){let Ce=this.userOptions.title&&this.userOptions.title.text,Ie=this.options.exporting.filename;return Ie?Ie.replace(/\//g,"-"):(typeof Ce=="string"&&(Ie=Ce.toLowerCase().replace(/<\/?[^>]+(>|$)/g,"").replace(/[\s_]+/g,"-").replace(/[^a-z\d\-]/g,"").replace(/^[\-]+/g,"").replace(/[\-]+/g,"-").substr(0,24).replace(/[\-]+$/g,"")),(!Ie||Ie.length<5)&&(Ie="chart"),Ie)}function ae(Ce){let Ie,Fe,Ge=O(this.options,Ce);Ge.plotOptions=O(this.userOptions.plotOptions,Ce&&Ce.plotOptions),Ge.time=O(this.userOptions.time,Ce&&Ce.time);let ke=T("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},k.body),ge=this.renderTo.style.width,fe=this.renderTo.style.height,Me=Ge.exporting.sourceWidth||Ge.chart.width||/px$/.test(ge)&&parseInt(ge,10)||(Ge.isGantt?800:600),De=Ge.exporting.sourceHeight||Ge.chart.height||/px$/.test(fe)&&parseInt(fe,10)||400;N(Ge.chart,{animation:!1,renderTo:ke,forExport:!0,renderer:"SVGRenderer",width:Me,height:De}),Ge.exporting.enabled=!1,delete Ge.data,Ge.series=[],this.series.forEach(function(Xe){(Fe=O(Xe.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:Xe.visible})).isInternal||Ge.series.push(Fe)});let Pe={};this.axes.forEach(function(Xe){Xe.userOptions.internalKey||(Xe.userOptions.internalKey=R()),Xe.options.isInternal||(Pe[Xe.coll]||(Pe[Xe.coll]=!0,Ge[Xe.coll]=[]),Ge[Xe.coll].push(O(Xe.userOptions,{visible:Xe.visible,type:Xe.type,uniqueNames:Xe.uniqueNames})))}),Ge.colorAxis=this.userOptions.colorAxis;let je=new this.constructor(Ge,this.callback);return Ce&&["xAxis","yAxis","series"].forEach(function(Xe){let et={};Ce[Xe]&&(et[Xe]=Ce[Xe],je.update(et))}),this.axes.forEach(function(Xe){let et=q(je.axes,function(wt){return wt.options.internalKey===Xe.userOptions.internalKey}),nt=Xe.getExtremes(),ht=nt.userMin,gt=nt.userMax;et&&(ht!==void 0&&ht!==et.min||gt!==void 0&&gt!==et.max)&&et.setExtremes(ht,gt,!0,!1)}),Ie=je.getChartHTML(),Z(this,"getSVG",{chartCopy:je}),Ie=this.sanitizeSVG(Ie,Ge),Ge=null,je.destroy(),I(ke),Ie}function _e(Ce,Ie){let Fe=this.options.exporting;return this.getSVG(O({chart:{borderRadius:0}},Fe.chartOptions,Ie,{exporting:{sourceWidth:Ce&&Ce.sourceWidth||Fe.sourceWidth,sourceHeight:Ce&&Ce.sourceHeight||Fe.sourceHeight}}))}function J(){let Ce,Ie=G.inlineAllowlist,Fe={},Ge=k.createElement("iframe");D(Ge,{width:"1px",height:"1px",visibility:"hidden"}),k.body.appendChild(Ge);let ke=Ge.contentWindow&&Ge.contentWindow.document;ke&&ke.body.appendChild(ke.createElementNS(S,"svg")),function ge(fe){let Me,De,Pe,je,Xe,et,nt={};if(ke&&fe.nodeType===1&&W.indexOf(fe.nodeName)===-1){if(Me=x.getComputedStyle(fe,null),De=fe.nodeName==="svg"?{}:x.getComputedStyle(fe.parentNode,null),!Fe[fe.nodeName]){Ce=ke.getElementsByTagName("svg")[0],Pe=ke.createElementNS(fe.namespaceURI,fe.nodeName),Ce.appendChild(Pe);let ht=x.getComputedStyle(Pe,null),gt={};for(let wt in ht)wt.length<1e3&&typeof ht[wt]=="string"&&!/^\d+$/.test(wt)&&(gt[wt]=ht[wt]);Fe[fe.nodeName]=gt,fe.nodeName==="text"&&delete Fe.text.fill,Ce.removeChild(Pe)}for(let ht in Me)(v.isFirefox||v.isMS||v.isSafari||Object.hasOwnProperty.call(Me,ht))&&function(gt,wt){if(je=Xe=!1,Ie.length){for(et=Ie.length;et--&&!Xe;)Xe=Ie[et].test(wt);je=!Xe}for(wt==="transform"&&gt==="none"&&(je=!0),et=B.length;et--&&!je;){if(wt.length>1e3)throw Error("Input too long");je=B[et].test(wt)||typeof gt=="function"}!je&&(De[wt]!==gt||fe.nodeName==="svg")&&Fe[fe.nodeName][wt]!==gt&&(H.indexOf(wt)===-1?nt[wt]=gt:gt&&fe.setAttribute(wt.replace(/[A-Z]/g,function(Rt){return"-"+Rt.toLowerCase()}),gt))}(Me[ht],ht);if(D(fe,nt),fe.nodeName==="svg"&&fe.setAttribute("stroke-width","1px"),fe.nodeName==="text")return;[].forEach.call(fe.children||fe.childNodes,ge)}}(this.container.querySelector("svg")),Ce.parentNode.removeChild(Ce),Ge.parentNode.removeChild(Ge)}function ne(Ce){let{scrollablePlotArea:Ie}=this;(Ie?[Ie.fixedDiv,Ie.scrollingContainer]:[this.container]).forEach(function(Fe){Ce.appendChild(Fe)})}function ce(){let Ce=this,Ie=(Fe,Ge,ke)=>{Ce.isDirtyExporting=!0,O(!0,Ce.options[Fe],Ge),$(ke,!0)&&Ce.redraw()};Ce.exporting={update:function(Fe,Ge){Ie("exporting",Fe,Ge)}},u.compose(Ce).navigation.addUpdate((Fe,Ge)=>{Ie("navigation",Fe,Ge)})}function ye(){let Ce=this;Ce.isPrinting||(U=Ce,v.isSafari||Ce.beforePrint(),setTimeout(()=>{x.focus(),x.print(),v.isSafari||setTimeout(()=>{Ce.afterPrint()},1e3)},1))}function we(){let Ce=this,Ie=Ce.options.exporting,Fe=Ie.buttons,Ge=Ce.isDirtyExporting||!Ce.exportSVGElements;Ce.buttonOffset=0,Ce.isDirtyExporting&&Ce.destroyExport(),Ge&&Ie.enabled!==!1&&(Ce.exportEvents=[],Ce.exportingGroup=Ce.exportingGroup||Ce.renderer.g("exporting-group").attr({zIndex:3}).add(),V(Fe,function(ke){Ce.addButton(ke)}),Ce.isDirtyExporting=!1)}function ze(Ce,Ie){let Fe=Ce.indexOf("</svg>")+6,Ge=Ce.substr(Fe);return Ce=Ce.substr(0,Fe),Ie&&Ie.exporting&&Ie.exporting.allowHTML&&Ge&&(Ge='<foreignObject x="0" y="0" width="'+Ie.chart.width+'" height="'+Ie.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+Ge.replace(/(<(?:img|br).*?(?=\>))>/g,"$1 />")+"</body></foreignObject>",Ce=Ce.replace("</svg>",Ge+"</svg>")),Ce=Ce.replace(/zIndex="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery\d+="[^"]+"/g,"").replace(/url\(("|&quot;)(.*?)("|&quot;)\;?\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS\d+\:)?href=/g," xlink:href=").replace(/\n+/g," ").replace(/(fill|stroke)="rgba\(([ \d]+,[ \d]+,[ \d]+),([ \d\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g," ").replace(/&shy;/g,"­")}G.compose=function(Ce,Ie){m.compose(Ie),g.compose(Ce);let Fe=Ce.prototype;Fe.exportChart||(Fe.afterPrint=de,Fe.exportChart=Se,Fe.inlineStyles=J,Fe.print=ye,Fe.sanitizeSVG=ze,Fe.getChartHTML=K,Fe.getSVG=ae,Fe.getSVGForExport=_e,Fe.getFilename=Q,Fe.moveContainers=ne,Fe.beforePrint=ie,Fe.contextMenu=Ee,Fe.addButton=re,Fe.destroyExport=xe,Fe.renderExporting=we,Fe.callbacks.push(oe),P(Ce,"init",ce),v.isSafari&&x.matchMedia("print").addListener(function(Ge){U&&(Ge.matches?U.beforePrint():U.afterPrint())}),w.exporting=O(p.exporting,w.exporting),w.lang=O(p.lang,w.lang),w.navigation=O(p.navigation,w.navigation))}}(_||(_={})),_}),r(t,"masters/modules/exporting.src.js",[t["Core/Globals.js"],t["Extensions/Exporting/Exporting.js"],t["Core/HttpUtilities.js"]],function(s,l,u){return s.HttpUtilities=s.HttpUtilities||u,s.ajax=s.HttpUtilities.ajax,s.getJSON=s.HttpUtilities.getJSON,s.post=s.HttpUtilities.post,l.compose(s.Chart,s.Renderer),s})})})(mE);var QN=mE.exports;const JN=oh(QN);var gE={exports:{}};(function(i,e){(function(t,r){i.exports=r(Ue)})(typeof self<"u"?self:Fa,function(t){return function(r){function s(u){if(l[u])return l[u].exports;var n=l[u]={i:u,l:!1,exports:{}};return r[u].call(n.exports,n,n.exports,s),n.l=!0,n.exports}var l={};return s.m=r,s.c=l,s.d=function(u,n,p){s.o(u,n)||Object.defineProperty(u,n,{configurable:!1,enumerable:!0,get:p})},s.n=function(u){var n=u&&u.__esModule?function(){return u.default}:function(){return u};return s.d(n,"a",n),n},s.o=function(u,n){return Object.prototype.hasOwnProperty.call(u,n)},s.p="",s(s.s=0)}([function(r,s,l){function u(){return u=Object.assign?Object.assign.bind():function(x){for(var P=1;P<arguments.length;P++){var D=arguments[P];for(var T in D)Object.prototype.hasOwnProperty.call(D,T)&&(x[T]=D[T])}return x},u.apply(this,arguments)}function n(x){return v(x)||g(x)||m(x)||p()}function p(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(x,P){{if(typeof x=="string")return y(x,P);var D=Object.prototype.toString.call(x).slice(8,-1);return D==="Object"&&x.constructor&&(D=x.constructor.name),D==="Map"||D==="Set"?Array.from(x):D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?y(x,P):void 0}}function g(x){if(typeof Symbol<"u"&&x[Symbol.iterator]!=null||x["@@iterator"]!=null)return Array.from(x)}function v(x){if(Array.isArray(x))return y(x)}function y(x,P){(P==null||P>x.length)&&(P=x.length);for(var D=0,T=new Array(P);D<P;D++)T[D]=x[D];return T}function C(x){"@babel/helpers - typeof";return(C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(x)}Object.defineProperty(s,"__esModule",{value:!0}),l.d(s,"HighchartsReact",function(){return S});var _=l(1),w=l.n(_),k=typeof window<"u"?_.useLayoutEffect:_.useEffect,S=Object(_.memo)(Object(_.forwardRef)(function(x,P){var D=Object(_.useRef)(),T=Object(_.useRef)(),I=Object(_.useRef)(x.constructorType),N=Object(_.useRef)(x.highcharts);return k(function(){function q(){var X=x.highcharts||(typeof window>"u"?"undefined":C(window))==="object"&&window.Highcharts,O=x.constructorType||"chart";X?X[O]?x.options?T.current=X[O](D.current,x.options,x.callback):console.warn('The "options" property was not passed.'):console.warn('The "constructorType" property is incorrect or some required module is not imported.'):console.warn('The "highcharts" property was not passed.')}if(T.current){if(x.allowChartUpdate!==!1)if(x.constructorType!==I.current||x.highcharts!==N.current)I.current=x.constructorType,N.current=x.highcharts,q();else if(!x.immutable&&T.current){var Z;(Z=T.current).update.apply(Z,[x.options].concat(n(x.updateArgs||[!0,!0])))}else q()}else q()},[x.options,x.allowChartUpdate,x.updateArgs,x.containerProps,x.highcharts,x.constructorType]),k(function(){return function(){T.current&&(T.current.destroy(),T.current=null)}},[]),Object(_.useImperativeHandle)(P,function(){return{get chart(){return T.current},container:D}},[]),w.a.createElement("div",u({},x.containerProps,{ref:D}))}));s.default=S},function(r,s){r.exports=t}])})})(gE);var eO=gE.exports;const yE=oh(eO),tO="_chartContainer_1sr1q_1",iO="_chart_1sr1q_1",nO="_menu_1sr1q_10",k0={chartContainer:tO,chart:iO,menu:nO},rO="أسبوع",sO={"Bi-Week":"كل اسبوعين",Week:rO},aO="Týden",oO={"Bi-Week":"Dvoutýden",Week:aO},lO="Week",cO={'Couldn\'t find a monthly period for weekly period id "{{periodId}}"':`Couldn't find a monthly period for weekly period id "{{periodId}}"`,'Couldn\'t find a weekly period for weekly period id "{{periodId}}"':`Couldn't find a weekly period for weekly period id "{{periodId}}"`,'Couldn\'t handle unknown period id "{{periodId}}"':`Couldn't handle unknown period id "{{periodId}}"`,'Could not find a period type for period id "{{periodId}}"':'Could not find a period type for period id "{{periodId}}"','Could not determine a period type for period id "{{periodId}}"':'Could not determine a period type for period id "{{periodId}}"','Couldn\'t find a period type for weekly period id "{{periodId}}"':`Couldn't find a period type for weekly period id "{{periodId}}"`,"Bi-Week":"Bi-Week",Week:lO,'Date string is invalid, received "{{dateString}}"':'Date string is invalid, received "{{dateString}}"',"Date string format does not match the specified format. Expected {{format}} but got {{detectedFormat}}.":"Date string format does not match the specified format. Expected {{format}} but got {{detectedFormat}}.",'Unrecognized date, received "{{date}}"':'Unrecognized date, received "{{date}}"',"Date is not given":"Date is not given","Invalid date in specified calendar":"Invalid date in specified calendar","Date {{dateString}} is less than the minimum allowed date {{minDateString}}.":"Date {{dateString}} is less than the minimum allowed date {{minDateString}}.","Date {{dateString}} is greater than the maximum allowed date {{maxDateString}}.":"Date {{dateString}} is greater than the maximum allowed date {{maxDateString}}."},uO="Semana",dO={"Bi-Week":"Quincenal",Week:uO},hO="Semana",pO={"Bi-Week":"Cada dos semanas",Week:hO},fO="Semaine",mO={"Bi-Week":"Bi-hebdomadaire",Week:fO},gO="Minggu",yO={"Bi-Week":"",Week:gO},xO="ອາທິດ",vO={"Bi-Week":"ສອງອາທິດຕໍ່ຄັ້ງ",Week:xO},bO="Uke",_O={"Bi-Week":"Toukentlig",Week:bO},wO="Week",CO={"Bi-Week":"",Week:wO},TO="هفته",SO={"Bi-Week":"",Week:TO},EO="اونۍ",kO={"Bi-Week":"",Week:EO},AO="Semana",MO={"Bi-Week":"Bimensal",Week:AO},PO="Semana",IO={"Bi-Week":"",Week:PO},DO="Неделя",RO={"Bi-Week":"",Week:DO},LO="සතිය",zO={"Bi-Week":"",Week:LO},NO="Тиждень",OO={"Bi-Week":"",Week:NO},jO="ہفتہ",FO={"Bi-Week":"",Week:jO},BO="Ҳафта",$O={"Bi-Week":"Жуфт-Ҳафта",Week:BO},UO="Hafta",VO={"Bi-Week":"Juft-Hafta",Week:UO},GO="Tuần",HO={"Bi-Week":"Kỳ 2 tuần này",Week:GO},WO="周",qO={"Bi-Week":"两周",Week:WO},YO="周",ZO={"Bi-Week":"",Week:YO},Lr="default";it.addResources("ar",Lr,sO);it.addResources("cs",Lr,oO);it.addResources("en",Lr,cO);it.addResources("es",Lr,dO);it.addResources("es_419",Lr,pO);it.addResources("fr",Lr,mO);it.addResources("id",Lr,yO);it.addResources("lo",Lr,vO);it.addResources("nb",Lr,_O);it.addResources("nl",Lr,CO);it.addResources("prs",Lr,SO);it.addResources("ps",Lr,kO);it.addResources("pt",Lr,MO);it.addResources("pt_BR",Lr,IO);it.addResources("ru",Lr,RO);it.addResources("si",Lr,zO);it.addResources("uk",Lr,OO);it.addResources("ur",Lr,FO);it.addResources("uz_UZ_Cyrl",Lr,$O);it.addResources("uz_UZ_Latn",Lr,VO);it.addResources("vi",Lr,HO);it.addResources("zh",Lr,qO);it.addResources("zh_CN",Lr,ZO);const xE={ethiopian:"ethiopic",coptic:"coptic",gregorian:"gregory",islamic:"islamic",iso8601:"iso8601",nepali:"nepali",thai:"buddhist",persian:"persian"},XO={nepali:{"ne-NP":{monthNames:["बैशाख","जेठ","असार","साउन","भदौ","असोज","कार्तिक","मंसिर","पौष","माघ","फागुन","चैत"],dayNamesShort:["सोम","मंगल","बुध","बिही","शुक्र","शनि","आइत"],numbers:["०","१","२","३","४","५","६","७","८","९","१०","११","१२","१३","१४","१५","१६","१७","१८","१९","२०","२१","२२","२३","२४","२५","२६","२७","२८","२९","३०","३१","३२"]},"en-NP":{monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],dayNamesShort:["Som","Mangl","Budha","Bihi","Shukra","Shani","Aaita"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"]}}},Ca={1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,32,31,32,31,30,30,30,29,30,29,31],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]};class KO extends Dr.Calendar{constructor(){super("iso8601")}toString(){return"nepali"}year(e){var t;const{isoYear:r,isoMonth:s,isoDay:l}=e.getISOFields();return(t=M0({year:r,month:s,day:l}))===null||t===void 0?void 0:t.year}eraYear(e){return this.year(e)}daysInMonth(e){const{year:t,month:r}=e;return Ca[t][r]}month(e){var t;const{isoYear:r,isoMonth:s,isoDay:l}=e.getISOFields();return(t=M0({year:r,month:s,day:l}))===null||t===void 0?void 0:t.month}monthCode(e){const{month:t}=e;return vE(t)}day(e){const{isoYear:t,isoMonth:r,isoDay:s}=e.getISOFields(),{day:l}=M0({year:t,month:r,day:s});return l}dateFromFields(e,t){const{year:r,day:s,month:l}=A0({year:e.year,month:e.month,day:e.day},t);return new Dr.PlainDate(r,l,s,this)}yearMonthFromFields(e){const{year:t,day:r,month:s}=A0({year:e.year,month:e.month,day:e.day});return new Dr.PlainYearMonth(t,s,this,r)}monthDayFromFields(e){const{year:t,day:r,month:s}=A0({year:e.year,month:e.month,day:e.day});return new Dr.PlainMonthDay(r,s,this,t)}}const Mv=Object.keys(Ca),iy=Number(Mv[0]),ny=Number(Mv[Mv.length-1]),A0=function(i){let{overflow:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{year:t}=i;if(t<iy||t>ny)throw new Error(`Conversions are only possible between ${iy} and ${ny} in Nepali calendar`);const{month:r,day:s=1}=i;if(e==="reject"&&(r<1||r>12||s>Ca[t][r]))throw new Error("Invalid date in Nepali calendar");let l=0,u=r;const n=t-(r>9||u===9&&s>=Ca[t][0]?56:57);for(r!==9&&(l=s,u--);u!==9;)u<=0&&(u=12,t--),l+=Ca[t][u],u--;r===9?(l+=s-Ca[t][0],l<0&&(l+=Dr.PlainDate.from({year:n,day:1,month:1}).daysInYear)):l+=Ca[t][9]-Ca[t][0];const p=Dr.PlainDate.from({year:n,month:1,day:1}).add({days:l});return{year:p.year,month:p.month,monthCode:vE(p.month),day:p.day}},M0=i=>{const e=Dr.PlainDate.from({year:i.year,month:i.month,day:i.day}),t=e.year,r=e.dayOfYear;let s=t+56;if(!Ca[s])throw new Error(`Conversions are only possible between ${iy} and ${ny} in Nepali calendar`);let l=9;const u=Ca[s][0];let n=Ca[s][l]-u+1;for(;r>n;){var p;l++,l>12&&(l=1,s++),n+=(p=Ca[s])===null||p===void 0?void 0:p[l]}if(!Ca[s])throw new Error(`Conversions are only possible between ${iy} and ${ny} in Nepali calendar`);const m=Ca[s][l]-(n-r);return{year:s,month:l,day:m}};function vE(i){return`M${i.toString().padStart(2,"0")}`}const Kb={nepali:{calendar:new KO,locales:XO.nepali,defaultLocale:"en-NP"}},QO=/^(?:(\d{4})([-./])(\d{2})(\2)(\d{2})|(\d{2})([-./])(\d{2})(\7)(\d{4}))$/;function JO(i,e){const t=i.match(QO);if(!t)throw new Error(it.t('Date string is invalid, received "{{dateString}}"',{dateString:i}));let r,s,l,u;t[1]?(r=t[1],s=t[3],l=t[5],u="YYYY-MM-DD"):(l=t[6],s=t[8],r=t[10],u="DD-MM-YYYY");const n=parseInt(r,10),p=parseInt(s,10),m=parseInt(l,10);return{year:n,month:p,day:m,format:u}}let d2;(function(i){i.INVALID_DATE_IN_CALENDAR="INVALID_DATE_IN_CALENDAR",i.WRONG_FORMAT="WRONG_FORMAT",i.LESS_THAN_MIN="LESS_THAN_MIN",i.MORE_THAN_MAX="INVALID_DATE_MORE_THAN_MAX"})(d2||(d2={}));const Sc=i=>!!Kb[i],cc=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(i).padStart(e,"0")},Ja=(i,e,t)=>{var r;const s=(r=i.eraYear)!==null&&r!==void 0?r:i.year,l=cc(i.month);let u=i.day;e==="endOfMonth"?u=i.daysInMonth:e==="startOfMonth"&&(u=1);const n=cc(u);return t==="DD-MM-YYYY"?`${n}-${l}-${s}`:`${s}-${l}-${n}`},bE=i=>{var e;if(!Sc(i))return i;const r=(e=Kb[i])===null||e===void 0?void 0:e.calendar;if(!r)throw new Error(`No implemenation found for custom calendar ${i}`);return r},e9=["adlm","ahom","arab","arabext","armn","armnlow","bali","beng","bhks","brah","cakm","cham","cyrl","deva","ethi","finance","fullwide","geor","gong","gonm","grek","greklow","gujr","guru","hanidays","hanidec","hans","hansfin","hant","hantfin","hebr","hmng","hmnp","java","jpan","jpanfin","jpanyear","kali","khmr","knda","lana","lanatham","laoo","latn","lepc","limb","mathbold","mathdbl","mathmono","mathsanb","mathsans","mlym","modi","mong","mroo","mtei","mymr","mymrshan","mymrtlng","native","newa","nkoo","olck","orya","osma","rohg","roman","romanlow","saur","shrd","sind","sinh","sora","sund","takr","talu","taml","tamldec","telu","thai","tirh","tibt","traditio","vaii","wara","wcho"],t9=(i,e)=>{const t=Object.keys(i).find(r=>{var s,l;return((s=r.split("-"))===null||s===void 0||(l=s[0])===null||l===void 0?void 0:l.toLowerCase())===e});if(t)return i[t]},Qb=(i,e)=>{var t,r;const s=Kb[i];if(!s)return;const l=s.locales||{},u=(t=(r=e&&(l==null?void 0:l[e]))!==null&&r!==void 0?r:t9(l,e))!==null&&t!==void 0?t:l==null?void 0:l[s.defaultLocale];if(!u)throw new Error(`no localisation found for custom calendar ${i}. Requested locale: ${e}, Default locale ${s.defaultLocale}`);return u},i9=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{dateStyle:"full"};if(!e.calendar)throw new Error("no calendar provided to localise function");if(!i)throw new Error("a date must be provided to localiseDateLabel");const r=Sc(e.calendar),s=i instanceof Dr.ZonedDateTime?i==null?void 0:i.toPlainDate():i;return r?Ja(i):s.toLocaleString(e.locale,{calendar:e.calendar,dateStyle:t.dateStyle}).toString()},n9=(i,e)=>{var t;if(!e.calendar)throw new Error("no calendar provided to localise function");const r=Sc(e.calendar),s=Qb(e.calendar,e.locale);return r?(s==null||(t=s.numbers)===null||t===void 0?void 0:t[i.day])||i.day:i.toPlainDate().toLocaleString(e.locale,{calendar:e.calendar,numberingSystem:e9.includes(e.numberingSystem)?e.numberingSystem:void 0,day:"numeric"})},r9=(i,e,t)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");const r=Sc(e.calendar),s=Qb(e.calendar,e.locale);return r?s==null?void 0:s.monthNames[i.month-1]:i.toLocaleString(e.locale,t)},s9=(i,e)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");const t=Sc(e.calendar),r=Qb(e.calendar,e.locale),s=r==null?void 0:r.dayNamesShort[i.dayOfWeek-1];return t&&s?s:i.toPlainDate().toLocaleString(e.locale,{weekday:e.weekDayFormat,calendar:e.calendar})},a9=(i,e,t)=>{if(!e.calendar)throw new Error("no calendar provided to localise function");return Sc(e.calendar)?i.year:i.toPlainYearMonth().toLocaleString(e.locale,t)},_u={localiseYear:a9,localiseDateLabel:i9,localiseWeekLabel:n9,localiseMonth:r9,localiseWeekDayLabel:s9},_E=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const[e,t,r]=i.replace(/_/g,"-").split("-");let s=e;r&&(s=`${s}-${r}`),t&&(s=`${s}-${t}`);try{const l=Intl.DateTimeFormat.supportedLocalesOf(s);return l&&l.length===1?s:void 0}catch{return}},o9=i=>{let{date:e,calendar:t}=i;const{year:r,month:s,day:l}=JO(e);return Dr.PlainDate.from({year:r,month:s,day:l,calendar:t})},Al=i=>{let{date:e,calendar:t}=i;if(typeof e=="string")return o9({date:e,calendar:t});if(e instanceof Date)return Dr.PlainDate.from({year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),calendar:t});if(e instanceof Dr.PlainDate)return Dr.PlainDate.from({year:e.year,month:e.month,day:e.day,calendar:t});throw new Error(it.t('Unrecognized date, received "{{date}}"',{date:e}))},rs=["DAILY","WEEKLY","WEEKLYMON","WEEKLYTUE","WEEKLYWED","WEEKLYTHU","WEEKLYFRI","WEEKLYSAT","WEEKLYSUN","BIWEEKLY","MONTHLY","BIMONTHLY","QUARTERLY","QUARTERLYJAN","QUARTERLYFEB","QUARTERLYMAR","QUARTERLYAPR","QUARTERLYMAY","QUARTERLYJUN","QUARTERLYJUL","QUARTERLYAUG","QUARTERLYSEP","QUARTERLYOCT","QUARTERLYNOV","QUARTERLYDEC","SIXMONTHLY","SIXMONTHLYJAN","SIXMONTHLYFEB","SIXMONTHLYMAR","SIXMONTHLYAPR","SIXMONTHLYMAY","SIXMONTHLYJUN","SIXMONTHLYJUL","SIXMONTHLYAUG","SIXMONTHLYSEP","SIXMONTHLYOCT","SIXMONTHLYNOV","SIXMONTHLYDEC","YEARLY","FYJAN","FYFEB","FYMAR","FYAPR","FYMAY","FYJUN","FYJUL","FYAUG","FYSEP","FYOCT","FYNOV","FYDEC"],l9=rs.filter(i=>i.match(/WEEKLY/)),wE=rs.filter(i=>i.match(/MONTHLY|QUARTERLY|SIXMONTHLY/)),jf=rs.filter(i=>i.match(/QUARTERLY/)),Ff=rs.filter(i=>i.match(/SIXMONTHLY/)),c9=["MONTHLY","BIMONTHLY","QUARTERLY","QUARTERLYJAN","SIXMONTHLY","SIXMONTHLYJAN"],u9=rs.filter(i=>i.match(/(QUARTERLY|SIXMONTHLY)[A-Z]/)),CE=wE.filter(i=>i!=="MONTHLY"),d9=rs.filter(i=>i.match(/^(YEARLY|FY[A-Z]{3})/)),h9=rs.filter(i=>i.match(/^FY[A-Z]{3}$/));[...c9,...rs.filter(i=>i.match(/JAN$/))];const p9=rs.filter(i=>i.match(/FEB$/)),f9=rs.filter(i=>i.match(/MAR$/)),m9=rs.filter(i=>i.match(/APR$/)),g9=rs.filter(i=>i.match(/MAY$/)),y9=rs.filter(i=>i.match(/JUN$/)),x9=rs.filter(i=>i.match(/JUL$/)),v9=rs.filter(i=>i.match(/AUG$/)),b9=rs.filter(i=>i.match(/SEP$/)),_9=rs.filter(i=>i.match(/OCT$/)),w9=rs.filter(i=>i.match(/NOV$/)),C9=rs.filter(i=>i.match(/DEC/)),{localiseDateLabel:T9}=_u,TE=i=>{let{date:e,calendar:t,locale:r}=i;const s=e.year,l=String(e.month).padStart(2,"0"),u=String(e.day).padStart(2,"0"),n=`${s}${l}${u}`,p=T9(e,{calendar:t,locale:r},{dateStyle:"long"});return{periodType:"DAILY",id:n,iso:n,displayName:p,name:Ja(e),startDate:Ja(e),endDate:Ja(e)}},S9=i=>{let{year:e,calendar:t,endsBefore:r,locale:s}=i;const l=r?Al({calendar:t,date:r}):null,u=Dr.PlainDate.from({year:e,month:1,day:1,calendar:t}),n=[];for(let p=0;p<u.daysInYear;p++){const m=u.add({days:p});if(l&&Dr.PlainDate.compare(m,l)>-1)break;const g=TE({date:m,calendar:t,locale:s});n.push(g)}return n},Jd=i=>p9.includes(i)?"FEB":f9.includes(i)?"MAR":m9.includes(i)?"APR":g9.includes(i)?"MAY":y9.includes(i)?"JUN":x9.includes(i)?"JUL":v9.includes(i)?"AUG":b9.includes(i)?"SEP":_9.includes(i)?"OCT":w9.includes(i)?"NOV":C9.includes(i)?"DEC":"JAN",Vo={JAN:{value:1,name:"January"},FEB:{value:2,name:"February"},MAR:{value:3,name:"March"},APR:{value:4,name:"April"},MAY:{value:5,name:"May"},JUN:{value:6,name:"June"},JUL:{value:7,name:"July"},AUG:{value:8,name:"August"},SEP:{value:9,name:"September"},OCT:{value:10,name:"October"},NOV:{value:11,name:"November"},DEC:{value:12,name:"December"}},E9=i=>{let{periodType:e,month:t,year:r,calendar:s,locale:l}=i;const u=I9({periodType:e,month:t.month,monthsInYear:t.monthsInYear}),n=A9(e),p=t.add({months:n}),m=k9({periodType:e,currentMonth:t,year:r,index:u});t.calendar==="ethiopic"&&console.warn("todo: confirm the special cases for the 13th month with Abyot, then update the start/end dates for Ethiopic calendar");const g=Dr.PlainDate.from({year:p.year,month:p.month,day:1,calendar:p.calendar}).subtract({days:1}),v=M9({periodType:e,month:t,locale:l,calendar:s,nextMonth:p.subtract({months:1}),index:u});return{periodType:e,id:m,iso:m,name:v,displayName:v,startDate:Ja(t,"startOfMonth"),endDate:Ja(g,"endOfMonth")}},k9=i=>{let{periodType:e,currentMonth:t,year:r,index:s}=i;if(e==="BIMONTHLY")return`${r}${cc(s)}B`;if(e==="QUARTERLY")return`${r}Q${s}`;if(e==="SIXMONTHLY")return`${r}S${s}`;if(jf.includes(e)){const l=Vo[Jd(e)].name;return`${r}${l}Q${s}`}if(Ff.includes(e)){const l=Vo[Jd(e)].name;return`${r}${l}S${s}`}return`${r}${cc(t.month)}`},A9=i=>{if(Ff.includes(i))return 6;if(jf.includes(i))return 3;if(i==="MONTHLY")return 1;if(i==="BIMONTHLY")return 2;throw new Error(`unrecognised monthly period type ${i}`)},M9=i=>{const{periodType:e,month:t,nextMonth:r,calendar:s,locale:l}=i;if(Sc(s))return P9(i);const u={month:"long",year:"numeric",calendar:s},n={month:"long",calendar:s};let p="";if(CE.includes(e)){const m=t.year===r.year?n:u;p=`${t.toLocaleString(l,m)} - ${r.toLocaleString(l,u)}`}else p=`${t.toLocaleString(l,u)}`;return p=p.replace(/ERA\d+\s*/g,"").trim(),p},P9=i=>{let{periodType:e,month:t,nextMonth:r,calendar:s,locale:l}=i,u="";if(CE.includes(e)){const n=t.year!==r.year;u=`${_u.localiseMonth(t,{locale:l,calendar:s},{})}${n?` ${t.year}`:""} - ${_u.localiseMonth(r,{locale:l,calendar:s},{})} ${r.year}`}else u=`${_u.localiseMonth(t,{locale:l,calendar:s},{})} ${r.year}`;return u},I9=i=>{let{periodType:e,month:t,monthsInYear:r}=i;if(e==="MONTHLY")return t;if(e==="BIMONTHLY"){if(t%2===0)throw new Error(`Even numbers can't be a month for BIMONTHLY period type, received "${t}"`);return Math.ceil(t/2)}if(jf.includes(e))return R9(e,t,r);if(Ff.includes(e))return D9(e,t,r);throw new Error(`Unrecognized period type "${e}"`)},SE=(i,e)=>[...Array(e-i+1).fill(null).map((r,s)=>s+i),1,2,3,4,5,6,7,8,9,10,11,12].slice(0,12),EE=(i,e)=>{const t=[];for(let r=0;r<12;r+=e)t.push(i.slice(r,r+e));return t},D9=(i,e,t)=>{const r=Jd(i),s=Vo[r].value,l=SE(s,t);return EE(l,6)[1].includes(e)?2:1},R9=(i,e,t)=>{const r=Jd(i),s=Vo[r].value,l=SE(s,t),u=EE(l,3);return u[1].includes(e)?2:u[2].includes(e)?3:u[3].includes(e)?4:1},Jb=i=>{let{period:e,date:t,calendar:r}=i;const s=Al({calendar:r,date:e.startDate}),l=Al({calendar:r,date:e.endDate}),u=Dr.PlainDate.compare(t,s)<1,n=Dr.PlainDate.compare(s,t)===-1,p=Dr.PlainDate.compare(t,l)<1;return u||n&&p},L9=i=>{let{year:e,calendar:t,periodType:r,endsBefore:s,locale:l}=i,u=Dr.PlainDate.from({year:e,month:N9(r),day:t.toString()==="nepali"?14:1,calendar:t});const n=[];for(;u.year===e||O9(r,n.length);){const p=j9({periodType:r,currentMonth:u.month,year:e,calendar:t});if(!z9(t,u)){const v=E9({periodType:r,month:u,year:e,calendar:t,locale:l});if(s&&Jb({period:v,date:s,calendar:t}))break;n.push(v)}const g=u.add({months:p});u=Al({date:g,calendar:t})}return n},z9=(i,e)=>i==="ethiopic"&&e.month===13,N9=i=>{if(u9.includes(i)){const e=Jd(i);return Vo[e].value}return 1},O9=(i,e)=>Ff.includes(i)?e<2:jf.includes(i)?e<4:!1,j9=i=>{let{periodType:e}=i;if(Ff.includes(e))return 6;if(jf.includes(e))return 3;if(e==="MONTHLY")return 1;if(e==="BIMONTHLY")return 2;throw new Error(`unrecognised monthly period type ${e}`)},Zl={Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6,Sunday:7},F9=i=>{let{year:e,calendar:t,periodType:r,startingDay:s,endsBefore:l}=i;const u=B9(r,s);let n=$9({year:e,calendar:t,periodType:r,startingDay:u});const p=[];let m=1;const g=r==="BIWEEKLY"?13:6;do{const v=n.add({days:g});if(l&&Jb({period:{startDate:Ja(n),endDate:Ja(v)},date:l,calendar:t}))break;const y=V9({periodType:r,startingDay:u,year:e,weekIndex:m});if(!(v.year===e+1&&v.day>=4)){const C=G9({periodType:r,date:n,nextWeek:v,weekIndex:m});p.push({periodType:r,id:y,iso:y,name:C,displayName:C,startDate:Ja(n),endDate:Ja(v)})}n=Al({date:v,calendar:t}).add({days:1}),m++}while(n.year===e);return p},B9=(i,e)=>{switch(i){case"WEEKLYMON":return Zl.Monday;case"WEEKLYTUE":return Zl.Tuesday;case"WEEKLYWED":return Zl.Wednesday;case"WEEKLYTHU":return Zl.Thursday;case"WEEKLYFRI":return Zl.Friday;case"WEEKLYSAT":return Zl.Saturday;case"WEEKLYSUN":return Zl.Sunday;case"WEEKLY":case"BIWEEKLY":default:return e||Zl.Monday}},$9=i=>{const{year:e,calendar:t,startingDay:r}=i,s=Dr.PlainDate.from({year:e,month:1,day:4,calendar:t}),l=s.dayOfWeek-r;return l>0?s.subtract({days:l}):l<0?s.subtract({days:l+7}):s},U9={1:"",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat",7:"Sun"},V9=i=>{let{startingDay:e,periodType:t,year:r,weekIndex:s}=i;const l=t==="BIWEEKLY"?"BiW":"W";return`${r}${U9[e]}${l}${s}`},G9=i=>{let{periodType:e,date:t,nextWeek:r,weekIndex:s}=i;const{year:l,month:u,day:n}=t,{year:p,month:m,day:g}=r;return`${e==="BIWEEKLY"?it.t("Bi-Week"):it.t("Week")} ${s} - ${l}-${cc(u)}-${cc(n)} - ${p}-${cc(m)}-${cc(g)}`},kE=i=>{if(i==="YEARLY")return 1;const e=Jd(i),t=Vo[e];return(t==null?void 0:t.value)||1},AE={1:"",2:"Feb",3:"March",4:"April",5:"May",6:"Jun",7:"July",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},ME=i=>{let{periodType:e,year:t,locale:r,calendar:s}=i;const l=kE(e),u=H9({periodType:e,year:t,month:l}),n=l.toString().padStart(2,"0"),p=Al({date:`${t}-${n}-01`,calendar:s}),m=Al({date:`${t+1}-${n}-01`,calendar:s}).subtract({days:1}),g=q9(e,p,{locale:r,calendar:s});return{periodType:e,id:u,iso:u,name:g,displayName:g,startDate:Ja(p,"startOfMonth"),endDate:Ja(m,"endOfMonth")}},H9=i=>{let{periodType:e,year:t,month:r}=i;if(e==="YEARLY")return t.toString();if(W9(e)){const s=AE[r];return`${t}${s}`}throw new Error(`can not build value for unrecognised yearly type "${e}"`)},W9=i=>h9.includes(i),q9=(i,e,t)=>{if(i==="YEARLY")return e.year.toString();if(Sc(t.calendar))return Y9(e,t);const r={month:"long",year:"numeric",calendar:t.calendar},s=_u.localiseMonth(e,t,r),l=_u.localiseMonth(e.add({months:e.monthsInYear-1}),t,r);let u=`${s} - ${l}`;return u=u.replace(/ERA\d+\s*/g,"").trim(),u},Y9=(i,e)=>{const t=l=>`${_u.localiseMonth(l,e,{})} ${l.year}`,r=Dr.PlainDate.from({year:i.year+1,month:i.month-1,day:1,calendar:e.calendar});return`${t(i)} - ${t(r)}`},Z9=i=>{let{year:e,calendar:t,periodType:r,endsBefore:s,yearsCount:l,locale:u}=i;const n=kE(r),p=Dr.PlainDate.from({year:e,month:n,day:t.toString()==="nepali"?14:1,calendar:t}),m=Dr.PlainDate.from({day:1,month:1,year:1970,calendar:"gregory"}).withCalendar(t),g=m.eraYear||m.year,v=[],y=l??e-g+1;for(let C=0;C<y;C++){const _=p.year-C,w=ME({periodType:r,year:_,locale:u,calendar:t});s&&Jb({period:w,date:s,calendar:t})||v.push(w)}return v},rg=i=>{var e,t;let{periodType:r,year:s,endsBefore:l,calendar:u,locale:n="en",yearsCount:p=10,startingDay:m=1}=i,g;if(typeof s=="number")g=s;else if(!isNaN(s)&&!isNaN(parseInt(s)))g=parseInt(s);else throw new Error("year must be a number");const v=bE((e=xE[u])!==null&&e!==void 0?e:u),y=(t=_E(n))!==null&&t!==void 0?t:"en",C=l?Al({calendar:v,date:l}):void 0;if(l9.includes(r))return F9({year:g,periodType:r,calendar:v,startingDay:m,endsBefore:C});if(d9.includes(r))return Z9({year:g,periodType:r,locale:y,calendar:v,endsBefore:C,yearsCount:p});if(wE.includes(r))return L9({year:g,periodType:r,locale:y,calendar:v,endsBefore:C});if(r==="DAILY")return S9({year:g,locale:y,calendar:v,endsBefore:C});throw new Error(`can not generate period for unrecognised period type "${r}"`)},X9=new RegExp("^([0-9]{4})W([0-9]+)$"),K9=new RegExp("^([0-9]{4})BiW([0-9]+)$"),Q9=new RegExp("^([0-9]{4})([A-Z][a-z]{2})W([0-9]+)$"),J9=new RegExp("^([0-9]{4})([0-9]{2})$"),ej=new RegExp("^([0-9]{4})([0-9]{2})B$"),tj=new RegExp("^([0-9]{4})Q([0-9])$"),ij=new RegExp("^([0-9]{4})([A-Z][a-z]+)Q([0-9])$"),nj=new RegExp("^([0-9]{4})S([0-9])$"),rj=new RegExp("^([0-9]{4})([A-Z][a-z]+)S([0-9])$"),sj=new RegExp("^([0-9]{4})$"),aj=new RegExp("^([0-9]{4})([A-Z][a-z]{2,})$"),oj=Object.values(AE).slice(1).join("|"),lj=new RegExp(`^[0-9]{4}(${oj})?$`),cj=i=>lj.test(i),h2=Object.values(Vo).map(i=>{let{name:e}=i;return e}).join("|"),uj=["^[0-9]{6}$","^[0-9]{6}B$",`^[0-9]{4}(${h2})?Q[0-9]$`,`^[0-9]{4}(${h2})?S[0-9]$`].join("|"),dj=new RegExp(uj),hj=i=>dj.test(i),pj=i=>/^[0-9]{4}([A-Z][a-z]{2}|Bi)?W[0-9]+$/.test(i),fj=i=>/^[0-9]{8}$/.test(i),mj=i=>{if(J9.test(i))return"MONTHLY";if(ej.test(i))return"BIMONTHLY";if(tj.test(i))return"QUARTERLY";const e=i.match(ij);if(e){const r=e[2],s=Object.entries(Vo).find(u=>{let[,{name:n}]=u;return n===r});if(!s)throw new Error("@TODO");const[l]=s;return`QUARTERLY${l}`}if(nj.test(i))return"SIXMONTHLY";const t=i.match(rj);if(t){const r=t[2],s=Object.entries(Vo).find(u=>{let[,{name:n}]=u;return n===r});if(!s)throw new Error("@TODO");const[l]=s;return`SIXMONTHLY${l}`}throw new Error(it.t('Could not find a period type for period id "{{periodId}}"',{periodId:i}))},gj=i=>{if(X9.test(i))return"WEEKLY";if(K9.test(i))return"BIWEEKLY";const e=i.match(Q9);if(e){const[,,t]=e,r=`WEEKLY${t.toUpperCase()}`;if(!rs.includes(r))throw new Error(it.t('Could not determine a period type for period id "{{periodId}}"',{periodId:i}));return r}throw new Error(it.t(`Couldn't find a period type for weekly period id "{{periodId}}"`,{periodId:i}))},yj=i=>{if(sj.test(i))return"YEARLY";const e=i.match(aj);if(e){const t=e[2].slice(0,3),r=Object.entries(Vo).find(l=>{let[,{name:u}]=l;return u.startsWith(t)});if(!r)throw new Error("@TODO");const[s]=r;return`FY${s}`}throw new Error(it.t('Could not find a period type for period id "{{periodId}}"',{periodId:i}))},e1=i=>{var e,t;let{periodId:r,calendar:s,locale:l="en"}=i;const u=bE((e=xE[s])!==null&&e!==void 0?e:s),n=(t=_E(l))!==null&&t!==void 0?t:"en";if(cj(r)){const p=parseInt(r.substring(0,4),10),m=yj(r);return ME({year:p,periodType:m,calendar:u,locale:l})}if(hj(r)){const p=mj(r),m=parseInt(r.substring(0,4),10),v=rg({periodType:p,year:m,calendar:u,locale:n}).find(_=>{let{id:w}=_;return w===r});if(v)return v;const C=rg({year:m+1,periodType:p,calendar:u,locale:n}).slice(-1).find(_=>{let{id:w}=_;return w===r});if(!C)throw new Error(it.t(`Couldn't find a monthly period for weekly period id "{{periodId}}"`,{periodId:r}));return C}if(pj(r)){const p=parseInt(r.substring(0,4),10),m=gj(r),v=rg({year:p,periodType:m,calendar:u,locale:l}).find(C=>{let{id:_}=C;return _===r});if(v)return v;const[y]=rg({year:p-1,periodType:m,calendar:u,locale:l}).slice(-1);if(y.id===r)return y;throw new Error(it.t(`Couldn't find a weekly period for weekly period id "{{periodId}}"`,{periodId:r}))}if(fj(r)){const p=r.substring(0,4),m=r.substring(4,6),g=r.substring(6),v=Al({date:`${p}-${m}-${g}`,calendar:u});return TE({date:v,locale:l,calendar:u})}throw new Error(it.t(`Couldn't handle unknown period id "{{periodId}}"`,{periodId:r}))};ZN(Fu);JN(Fu);KN(Fu);const p2=(i,e)=>{Fu.getOptions().colors;const t=i.filter(s=>s.dataElement==="median").map(s=>[s.period,s.value]),r=i.filter(s=>s.dataElement==="quantile_low").map(s=>[s.period,s.value,i.filter(l=>l.dataElement==="quantile_high"&&l.period===s.period)[0].value]);return{title:{text:it.t("Prediction for {{predictionTargetName}} for {{orgUnitName}}",{predictionTargetName:e,orgUnitName:i[0].displayName})},tooltip:{shared:!0},xAxis:{type:"category",labels:{enabled:!0,formatter:function(){return e1({periodId:this.value.toString(),calendar:"gregory"}).displayName},style:{fontSize:"0.9rem"}}},yAxis:{title:{text:"Number of cases"}},credits:{text:"CHAP"},chart:{height:490,marginBottom:125},plotOptions:{series:{lineWidth:5}},series:[{type:"line",data:t,name:it.t("Quantile median"),color:"#004bbd",zIndex:2},{type:"arearange",name:it.t("Range"),data:r,zIndex:1,lineWidth:0,color:"#004bbd",fillOpacity:.4}]}};function xj(i){return[...new Set(i.map(t=>t.orgUnit))].map(t=>i.filter(r=>r.orgUnit===t))}const vj=i=>{let{data:e,predictionTargetName:t}=i;const r=xj(e.dataValues),[s,l]=Ue.useState(p2(r[0],t)),[u,n]=Ue.useState(0),p=m=>{n(m),l(p2(r[m],t))};return Ae.createElement(Ae.Fragment,null,Ae.createElement("div",{className:k0.chartContainer},Ae.createElement("div",null,Ae.createElement(Xv,{dense:!0},r.map((m,g)=>Ae.createElement(Tu,{className:k0.menu,active:u==g,key:g,label:m[0].displayName,onClick:()=>p(g)})))),Ae.createElement("div",{className:k0.chart},Ae.createElement(yE,{highcharts:Fu,constructorType:"chart",options:s}))))};function wp(i,e,t){return(e=bj(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function bj(i){var e=_j(i,"string");return typeof e=="symbol"?e:e+""}function _j(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}class f2 extends Error{constructor(e,t,r){super(r),wp(this,"url",void 0),wp(this,"status",void 0),wp(this,"statusText",void 0),wp(this,"body",void 0),wp(this,"request",void 0),this.name="ApiError",this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.body=t.body,this.request=e}}function su(i,e,t){wj(i,e),e.set(i,t)}function wj(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Kn(i,e){return i.get(PE(i,e))}function Po(i,e,t){return i.set(PE(i,e),t),t}function PE(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}class Cj extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}}var Xl=new WeakMap,Kl=new WeakMap,gl=new WeakMap,Md=new WeakMap,Cp=new WeakMap,sg=new WeakMap,Pd=new WeakMap;class Tj{constructor(e){su(this,Xl,void 0),su(this,Kl,void 0),su(this,gl,void 0),su(this,Md,void 0),su(this,Cp,void 0),su(this,sg,void 0),su(this,Pd,void 0),Po(Xl,this,!1),Po(Kl,this,!1),Po(gl,this,!1),Po(Md,this,[]),Po(Cp,this,new Promise((t,r)=>{Po(sg,this,t),Po(Pd,this,r);const s=n=>{Kn(Xl,this)||Kn(Kl,this)||Kn(gl,this)||(Po(Xl,this,!0),Kn(sg,this)&&Kn(sg,this).call(this,n))},l=n=>{Kn(Xl,this)||Kn(Kl,this)||Kn(gl,this)||(Po(Kl,this,!0),Kn(Pd,this)&&Kn(Pd,this).call(this,n))},u=n=>{Kn(Xl,this)||Kn(Kl,this)||Kn(gl,this)||Kn(Md,this).push(n)};return Object.defineProperty(u,"isResolved",{get:()=>Kn(Xl,this)}),Object.defineProperty(u,"isRejected",{get:()=>Kn(Kl,this)}),Object.defineProperty(u,"isCancelled",{get:()=>Kn(gl,this)}),e(s,l,u)}))}get[Symbol.toStringTag](){return"Cancellable Promise"}then(e,t){return Kn(Cp,this).then(e,t)}catch(e){return Kn(Cp,this).catch(e)}finally(e){return Kn(Cp,this).finally(e)}cancel(){if(!(Kn(Xl,this)||Kn(Kl,this)||Kn(gl,this))){if(Po(gl,this,!0),Kn(Md,this).length)try{for(const e of Kn(Md,this))e()}catch(e){console.warn("Cancellation threw an error",e);return}Kn(Md,this).length=0,Kn(Pd,this)&&Kn(Pd,this).call(this,new Cj("Request aborted"))}}get isCancelled(){return Kn(gl,this)}}const Ui={BASE:"/v1",VERSION:"0.1.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0};let m2;(function(i){let e=function(t){return t.STRING="string",t.INTEGER="integer",t.FLOAT="float",t.BOOLEAN="boolean",t}({});i.type=e})(m2||(m2={}));const t1=i=>i!=null,Bf=i=>typeof i=="string",P0=i=>Bf(i)&&i!=="",i1=i=>typeof i=="object"&&typeof i.type=="string"&&typeof i.stream=="function"&&typeof i.arrayBuffer=="function"&&typeof i.constructor=="function"&&typeof i.constructor.name=="string"&&/^(Blob|File)$/.test(i.constructor.name)&&/^(Blob|File)$/.test(i[Symbol.toStringTag]),IE=i=>i instanceof FormData,Sj=i=>{try{return btoa(i)}catch{return Buffer.from(i).toString("base64")}},Ej=i=>{const e=[],t=(s,l)=>{e.push(`${encodeURIComponent(s)}=${encodeURIComponent(String(l))}`)},r=(s,l)=>{t1(l)&&(Array.isArray(l)?l.forEach(u=>{r(s,u)}):typeof l=="object"?Object.entries(l).forEach(u=>{let[n,p]=u;r(`${s}[${n}]`,p)}):t(s,l))};return Object.entries(i).forEach(s=>{let[l,u]=s;r(l,u)}),e.length>0?`?${e.join("&")}`:""},kj=(i,e)=>{const t=encodeURI,r=e.url.replace("{api-version}",i.VERSION).replace(/{(.*?)}/g,(l,u)=>{var n;return(n=e.path)!==null&&n!==void 0&&n.hasOwnProperty(u)?t(String(e.path[u])):l}),s=`${i.BASE}${r}`;return e.query?`${s}${Ej(e.query)}`:s},Aj=i=>{if(i.formData){const e=new FormData,t=(r,s)=>{Bf(s)||i1(s)?e.append(r,s):e.append(r,JSON.stringify(s))};return Object.entries(i.formData).filter(r=>{let[s,l]=r;return t1(l)}).forEach(r=>{let[s,l]=r;Array.isArray(l)?l.forEach(u=>t(s,u)):t(s,l)}),e}},ag=async(i,e)=>e,Mj=async(i,e)=>{const[t,r,s,l]=await Promise.all([ag(e,i.TOKEN),ag(e,i.USERNAME),ag(e,i.PASSWORD),ag(e,i.HEADERS)]),u=Object.entries({Accept:"application/json",...l,...e.headers}).filter(n=>{let[p,m]=n;return t1(m)}).reduce((n,p)=>{let[m,g]=p;return{...n,[m]:String(g)}},{});if(P0(t)&&(u.Authorization=`Bearer ${t}`),P0(r)&&P0(s)){const n=Sj(`${r}:${s}`);u.Authorization=`Basic ${n}`}return e.body!==void 0&&(e.mediaType?u["Content-Type"]=e.mediaType:i1(e.body)?u["Content-Type"]=e.body.type||"application/octet-stream":Bf(e.body)?u["Content-Type"]="text/plain":IE(e.body)||(u["Content-Type"]="application/json")),new Headers(u)},Pj=i=>{if(i.body!==void 0){var e;return(e=i.mediaType)!==null&&e!==void 0&&e.includes("/json")?JSON.stringify(i.body):Bf(i.body)||i1(i.body)||IE(i.body)?i.body:JSON.stringify(i.body)}},Ij=async(i,e,t,r,s,l,u)=>{const n=new AbortController,p={headers:l,body:r??s,method:e.method,signal:n.signal};return i.WITH_CREDENTIALS&&(p.credentials=i.CREDENTIALS),u(()=>n.abort()),await fetch(t,p)},Dj=(i,e)=>{if(e){const t=i.headers.get(e);if(Bf(t))return t}},Rj=async i=>{if(i.status!==204)try{const e=i.headers.get("Content-Type");if(e)return["application/json","application/problem+json"].some(s=>e.toLowerCase().startsWith(s))?await i.json():await i.text()}catch(e){console.error(e)}},Lj=(i,e)=>{const r={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...i.errors}[e.status];if(r)throw new f2(i,e,r);if(!e.ok){var s,l;const u=(s=e.status)!==null&&s!==void 0?s:"unknown",n=(l=e.statusText)!==null&&l!==void 0?l:"unknown",p=(()=>{try{return JSON.stringify(e.body,null,2)}catch{return}})();throw new f2(i,e,`Generic Error: status: ${u}; status text: ${n}; body: ${p}`)}},en=(i,e)=>new Tj(async(t,r,s)=>{try{const l=kj(i,e),u=Aj(e),n=Pj(e),p=await Mj(i,e);if(!s.isCancelled){const m=await Ij(i,e,l,n,u,p,s),g=await Rj(m),v=Dj(m,e.responseHeader),y={url:l,ok:m.ok,status:m.status,statusText:m.statusText,body:v??g};Lj(e,y),t(y.body)}}catch(l){r(l)}});class eh{static makeDatasetAnalyticsMakeDatasetPost(e){return en(Ui,{method:"POST",url:"/analytics/make-dataset",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getEvaluationEntriesAnalyticsEvaluationEntryGet(e,t){return en(Ui,{method:"GET",url:"/analytics/evaluation-entry",query:{backtestId:e,quantiles:t},errors:{422:"Validation Error"}})}static createBacktestAnalyticsCreateBacktestPost(e){return en(Ui,{method:"POST",url:"/analytics/create-backtest",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static makePredictionAnalyticsMakePredictionPost(e){return en(Ui,{method:"POST",url:"/analytics/make-prediction",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getPredictionEntriesAnalyticsPredictionEntryPredictionIdGet(e,t){return en(Ui,{method:"GET",url:"/analytics/prediction-entry/{predictionId}",path:{predictionId:e},query:{quantiles:t},errors:{422:"Validation Error"}})}static getActualCasesAnalyticsActualCasesBacktestIdGet(e){return en(Ui,{method:"GET",url:"/analytics/actualCases/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static getDataSourcesAnalyticsDataSourcesGet(){return en(Ui,{method:"GET",url:"/analytics/data-sources"})}}class io{static getBacktestsCrudBacktestsGet(){return en(Ui,{method:"GET",url:"/crud/backtests"})}static createBacktestCrudBacktestsPost(e){return en(Ui,{method:"POST",url:"/crud/backtests",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getBacktestCrudBacktestsBacktestIdGet(e){return en(Ui,{method:"GET",url:"/crud/backtests/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static deleteBacktestCrudBacktestsBacktestIdDelete(e){return en(Ui,{method:"DELETE",url:"/crud/backtests/{backtestId}",path:{backtestId:e},errors:{422:"Validation Error"}})}static getPredictionsCrudPredictionsGet(){return en(Ui,{method:"GET",url:"/crud/predictions"})}static createPredictionCrudPredictionsPost(e){return en(Ui,{method:"POST",url:"/crud/predictions",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getPredictionCrudPredictionsPredictionIdGet(e){return en(Ui,{method:"GET",url:"/crud/predictions/{predictionId}",path:{predictionId:e},errors:{422:"Validation Error"}})}static deletePredictionCrudPredictionsPredictionIdDelete(e){return en(Ui,{method:"DELETE",url:"/crud/predictions/{predictionId}",path:{predictionId:e},errors:{422:"Validation Error"}})}static getDatasetsCrudDatasetsGet(){return en(Ui,{method:"GET",url:"/crud/datasets"})}static createDatasetCrudDatasetsPost(e){return en(Ui,{method:"POST",url:"/crud/datasets",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static getDatasetCrudDatasetsDatasetIdGet(e){return en(Ui,{method:"GET",url:"/crud/datasets/{datasetId}",path:{datasetId:e},errors:{422:"Validation Error"}})}static deleteDatasetCrudDatasetsDatasetIdDelete(e){return en(Ui,{method:"DELETE",url:"/crud/datasets/{datasetId}",path:{datasetId:e},errors:{422:"Validation Error"}})}static createDatasetCsvCrudDatasetsCsvFilePost(e){return en(Ui,{method:"POST",url:"/crud/datasets/csvFile",formData:e,mediaType:"multipart/form-data",errors:{422:"Validation Error"}})}static listModelsCrudModelsGet(){return en(Ui,{method:"GET",url:"/crud/models"})}static listModelsFromModelTemplatesCrudModelsFromModelTemplatesGet(){return en(Ui,{method:"GET",url:"/crud/models-from-model-templates"})}static listModelTemplatesCrudModelTemplatesGet(){return en(Ui,{method:"GET",url:"/crud/modelTemplates"})}static debugEntryCrudDebugPost(){return en(Ui,{method:"POST",url:"/crud/debug"})}static getDebugEntryCrudDebugDebugIdGet(e){return en(Ui,{method:"GET",url:"/crud/debug/{debugId}",path:{debugId:e},errors:{422:"Validation Error"}})}static listFeatureTypesCrudFeatureSourcesGet(){return en(Ui,{method:"GET",url:"/crud/feature-sources"})}}class DE{static faviconfaviconIcoGet(){return en(Ui,{method:"GET",url:"favicon.ico"})}static predictPredictPost(e){return en(Ui,{method:"POST",url:"/predict",body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static evaluateEvaluatePost(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return en(Ui,{method:"POST",url:"/evaluate",query:{n_splits:t,stride:r},body:e,mediaType:"application/json",errors:{422:"Validation Error"}})}static listModelsListModelsGet(){return en(Ui,{method:"GET",url:"/list-models"})}static listModelTemplatesListModelTemplatesGet(){return en(Ui,{method:"GET",url:"/list-model-templates"})}static listFeaturesListFeaturesGet(){return en(Ui,{method:"GET",url:"/list-features"})}static getResultsGetResultsGet(){return en(Ui,{method:"GET",url:"/get-results"})}static getEvaluationResultsGetEvaluationResultsGet(){return en(Ui,{method:"GET",url:"/get-evaluation-results"})}static getExceptionGetExceptionGet(){return en(Ui,{method:"GET",url:"/get-exception"})}static cancelCancelPost(){return en(Ui,{method:"POST",url:"/cancel"})}static getStatusStatusGet(){return en(Ui,{method:"GET",url:"/status"})}static healthHealthGet(){return en(Ui,{method:"GET",url:"/health"})}static versionVersionGet(){return en(Ui,{method:"GET",url:"/version"})}static isCompatibleIsCompatibleGet(e){return en(Ui,{method:"GET",url:"/is-compatible",query:{modelling_app_version:e},errors:{422:"Validation Error"}})}static systemInfoSystemInfoGet(){return en(Ui,{method:"GET",url:"/system-info"})}}class n1{static listJobsJobsGet(){return en(Ui,{method:"GET",url:"/jobs"})}static getJobStatusJobsJobIdGet(e){return en(Ui,{method:"GET",url:"/jobs/{job_id}",path:{job_id:e},errors:{422:"Validation Error"}})}static deleteJobJobsJobIdDelete(e){return en(Ui,{method:"DELETE",url:"/jobs/{job_id}",path:{job_id:e},errors:{422:"Validation Error"}})}static getLogsJobsJobIdLogsGet(e){return en(Ui,{method:"GET",url:"/jobs/{job_id}/logs",path:{job_id:e},errors:{422:"Validation Error"}})}static getPredictionResultJobsJobIdPredictionResultGet(e){return en(Ui,{method:"GET",url:"/jobs/{job_id}/prediction_result",path:{job_id:e},errors:{422:"Validation Error"}})}static getEvaluationResultJobsJobIdEvaluationResultGet(e){return en(Ui,{method:"GET",url:"/jobs/{job_id}/evaluation_result",path:{job_id:e},errors:{422:"Validation Error"}})}static getDatabaseResultJobsJobIdDatabaseResultGet(e){return en(Ui,{method:"GET",url:"/jobs/{job_id}/database_result",path:{job_id:e},errors:{422:"Validation Error"}})}}function RE(i,e){const t=r=>{if(r.includes("W")){const[s,l]=r.split("W").map(Number),u=new Date(s,0,1),n=(l-1)*7;return new Date(u.setDate(u.getDate()+n))}else{const s=Number(r.slice(0,4)),l=Number(r.slice(4,6))-1;return new Date(s,l)}};return t(i).getTime()-t(e).getTime()}function zj(i,e){var t;const r=e.map(C=>C.pe).sort(RE),s=r.map(C=>{var _,w;return(_=(w=e.find(k=>k.pe===C))===null||w===void 0?void 0:w.value)!==null&&_!==void 0?_:null}),l=(C,_)=>{if(!_)return new Map;const w=new Map;for(let k=0;k<C.length;k++)w.set(C[k],_[k]);return w},u=l(i.periods,i.averages.slice()),n=l(i.periods,i.ranges.slice()),p=l(i.periods,(t=i.midranges)===null||t===void 0?void 0:t.slice()),m=(C,_)=>C.map(w=>{var k;return(k=_.get(w))!==null&&k!==void 0?k:null}),g=m(r,u),v=m(r,n),y=m(r,p);return{periods:r,ranges:v,averages:g,realValues:s,midranges:y}}const Nj=(i,e,t)=>{const r=Array.from(new Set(i.map(g=>g.quantile))).sort(),s=r[0],l=r[1],u=r[r.length-2],n=r[r.length-1],p=g=>g.quantile===s?"quantile_low":g.quantile===n?"quantile_high":g.quantile===.5?"median":g.quantile===l?"quantile_mid_low":g.quantile===u?"quantile_mid_high":"unknown",m=Array.from(new Set(i.map(g=>g.modelName||t)));return Array.from(new Set(i.map(g=>g.splitPeriod))).map(g=>({splitPoint:g,evaluation:Array.from(new Set(i.map(v=>v.orgUnit))).map(v=>({orgUnitName:v,orgUnitId:v,models:m.map(y=>{const C=Oj(i.filter(w=>w.orgUnit===v&&w.splitPeriod===g&&((w==null?void 0:w.modelName)||t)===y),p),_=zj(C,e.filter(w=>w.ou===v));return{modelName:y,data:_}})}))}))};function Oj(i,e){const t=Array.from(new Set(i.map(n=>n.period))).sort(RE),r=[],s=[],l=[];return t.forEach(n=>{var p,m,g,v,y;const C=((p=i.find(x=>x.period===n&&e(x)==="quantile_low"))===null||p===void 0?void 0:p.value)||0,_=((m=i.find(x=>x.period===n&&e(x)==="quantile_high"))===null||m===void 0?void 0:m.value)||0,w=((g=i.find(x=>x.period===n&&e(x)==="median"))===null||g===void 0?void 0:g.value)||0,k=((v=i.find(x=>x.period===n&&e(x)==="quantile_mid_high"))===null||v===void 0?void 0:v.value)||0,S=((y=i.find(x=>x.period===n&&e(x)==="quantile_mid_low"))===null||y===void 0?void 0:y.value)||0;r.push([C,_]),s.push([w]),l.push([S,k])}),{periods:t,ranges:r,averages:s,midranges:l}}function jj(i){return Array.from(new Set(i.map(e=>e.splitPeriod)))}const Fj=i=>{const{enabled:e,wrapperClassName:t,children:r,...s}=i;return e?Ae.createElement(My,s,l=>{let{onMouseOver:u,onMouseOut:n,ref:p}=l;return Ae.createElement("span",{className:t,ref:m=>{m&&(m.onpointerenter=u,m.onpointerleave=n,p.current=m)}},r)}):r},LE=i=>{if(!i)return"NA";if(i.length==4)return i;if(i.length==6){const e=i.slice(0,4),t=i.slice(4,6);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(t)-1]} ${e}`}if(i.length==5){const e=i.slice(0,4);return`Week ${i.slice(5,6)} ${e}`}};function Bj(i){Fu.charts.forEach(e=>{e&&e.xAxis[0].setExtremes(i.min,i.max)})}const $j=i=>[{name:"Real Cases",data:i.realValues,zIndex:4,lineWidth:2.5,type:"spline",color:"#f68000",marker:{enabled:!1,lineWidth:2}},{name:"Predicted Cases",type:"line",color:"#004bbd",data:i.averages.slice(),zIndex:3,opacity:1,lineWidth:2.5,marker:{enabled:!1}},{name:"Quantiles Outer",data:i.ranges.slice(),type:"arearange",lineWidth:0,color:"#c4dcf2",fillOpacity:1,zIndex:0,marker:{enabled:!1}},{name:"Quantiles Middle",data:i.midranges.slice(),type:"arearange",lineWidth:1,color:"#9bbdff",fillOpacity:1,zIndex:1,marker:{enabled:!1}}],Uj=(i,e,t)=>({title:{text:""},subtitle:{text:e?"Model: "+e:"",align:"left"},chart:{zoomType:"x"},xAxis:{categories:i.periods,labels:{enabled:!0,formatter:function(){return LE(this.value)},style:{fontSize:"0.9rem"}},events:t&&{afterSetExtremes:Bj},title:{text:"Period"}},yAxis:{title:{text:null},min:0},tooltip:{crosshairs:!0,shared:!0,valueSuffix:" cases"},plotOptions:{series:{animation:{duration:0}}},series:$j(i)}),Vj=i=>{let{data:e,modelName:t,syncZoom:r}=i;const[s,l]=Ue.useState(!1);return Ue.useEffect(()=>{l(!0)},[e]),Ue.useEffect(()=>{s&&l(!1)},[s]),Ae.createElement(Ae.Fragment,null,!s&&Ae.createElement(yE,{highcharts:Fu,options:Uj(e,t,r)}))},Gj="_title_4ki8g_1",Hj="_comparionBox_4ki8g_7",Wj="_comparionBoxSideBySide_4ki8g_15",qj="_comparionBoxSideBySideItem_4ki8g_22",og={title:Gj,comparionBox:Hj,comparionBoxSideBySide:Wj,comparionBoxSideBySideItem:qj},g2=i=>{let{orgUnitsData:e}=i;return Ae.createElement("div",{className:og.comparionBox},Ae.createElement("div",{className:og.title},e.orgUnitName),Ae.createElement("div",{className:og.comparionBoxSideBySide},e.models.map((t,r)=>Ae.createElement("div",{key:r,className:og.comparionBoxSideBySideItem},Ae.createElement(Vj,{syncZoom:e.models.length>1,data:t.data,modelName:t.modelName})))))},Ky=0,Ec=1,gh=2,zE=4;function NE(i,e){return t=>i(e(t))}function Yj(i,e){return e(i)}function OE(i,e){return t=>i(e,t)}function y2(i,e){return()=>i(e)}function Qy(i,e){return e(i),i}function Ar(...i){return i}function Zj(i){i()}function x2(i){return()=>i}function Xj(...i){return()=>{i.map(Zj)}}function r1(i){return i!==void 0}function yh(){}function Jn(i,e){return i(Ec,e)}function wn(i,e){i(Ky,e)}function s1(i){i(gh)}function qs(i){return i(zE)}function Ni(i,e){return Jn(i,OE(e,Ky))}function Go(i,e){const t=i(Ec,r=>{t(),e(r)});return t}function Nn(){const i=[];return(e,t)=>{switch(e){case gh:i.splice(0,i.length);return;case Ec:return i.push(t),()=>{const r=i.indexOf(t);r>-1&&i.splice(r,1)};case Ky:i.slice().forEach(r=>{r(t)});return;default:throw new Error(`unrecognized action ${e}`)}}}function ci(i){let e=i;const t=Nn();return(r,s)=>{switch(r){case Ec:s(e);break;case Ky:e=s;break;case zE:return e}return t(r,s)}}function Kj(i){let e,t;const r=()=>e&&e();return function(s,l){switch(s){case Ec:return l?t===l?void 0:(r(),t=l,e=Jn(i,l),e):(r(),yh);case gh:r(),t=null;return;default:throw new Error(`unrecognized action ${s}`)}}}function Va(i){return Qy(Nn(),e=>Ni(i,e))}function pa(i,e){return Qy(ci(e),t=>Ni(i,t))}function Qj(...i){return e=>i.reduceRight(Yj,e)}function Wt(i,...e){const t=Qj(...e);return(r,s)=>{switch(r){case Ec:return Jn(i,t(s));case gh:s1(i);return}}}function jE(i,e){return i===e}function Sr(i=jE){let e;return t=>r=>{i(e,r)||(e=r,t(r))}}function on(i){return e=>t=>{i(t)&&e(t)}}function Ai(i){return e=>NE(e,i)}function Ro(i){return e=>()=>e(i)}function zo(i,e){return t=>r=>t(e=i(e,r))}function th(i){return e=>t=>{i>0?i--:e(t)}}function uc(i){let e=null,t;return r=>s=>{e=s,!t&&(t=setTimeout(()=>{t=void 0,r(e)},i))}}function v2(i){let e,t;return r=>s=>{e=s,t&&clearTimeout(t),t=setTimeout(()=>{r(e)},i)}}function Sn(...i){const e=new Array(i.length);let t=0,r=null;const s=Math.pow(2,i.length)-1;return i.forEach((l,u)=>{const n=Math.pow(2,u);Jn(l,p=>{const m=t;t=t|n,e[u]=p,m!==s&&t===s&&r&&(r(),r=null)})}),l=>u=>{const n=()=>l([u].concat(e));t===s?n():r=n}}function b2(...i){return function(e,t){switch(e){case Ec:return Xj(...i.map(r=>Jn(r,t)));case gh:return;default:throw new Error(`unrecognized action ${e}`)}}}function hn(i,e=jE){return Wt(i,Sr(e))}function hs(...i){const e=Nn(),t=new Array(i.length);let r=0;const s=Math.pow(2,i.length)-1;return i.forEach((l,u)=>{const n=Math.pow(2,u);Jn(l,p=>{t[u]=p,r=r|n,r===s&&wn(e,t)})}),function(l,u){switch(l){case Ec:return r===s&&u(t),Jn(e,u);case gh:return s1(e);default:throw new Error(`unrecognized action ${l}`)}}}function er(i,e=[],{singleton:t}={singleton:!0}){return{id:Jj(),constructor:i,dependencies:e,singleton:t}}const Jj=()=>Symbol();function e8(i){const e=new Map,t=({id:r,constructor:s,dependencies:l,singleton:u})=>{if(u&&e.has(r))return e.get(r);const n=s(l.map(p=>t(p)));return u&&e.set(r,n),n};return t(i)}function t8(i,e){const t={},r={};let s=0;const l=i.length;for(;s<l;)r[i[s]]=1,s+=1;for(const u in e)r.hasOwnProperty(u)||(t[u]=e[u]);return t}const lg=typeof document<"u"?Ae.useLayoutEffect:Ae.useEffect;function FE(i,e,t){const r=Object.keys(e.required||{}),s=Object.keys(e.optional||{}),l=Object.keys(e.methods||{}),u=Object.keys(e.events||{}),n=Ae.createContext({});function p(S,x){S.propsReady&&wn(S.propsReady,!1);for(const P of r){const D=S[e.required[P]];wn(D,x[P])}for(const P of s)if(P in x){const D=S[e.optional[P]];wn(D,x[P])}S.propsReady&&wn(S.propsReady,!0)}function m(S){return l.reduce((x,P)=>(x[P]=D=>{const T=S[e.methods[P]];wn(T,D)},x),{})}function g(S){return u.reduce((x,P)=>(x[P]=Kj(S[e.events[P]]),x),{})}const v=Ae.forwardRef((S,x)=>{const{children:P,...D}=S,[T]=Ae.useState(()=>Qy(e8(i),q=>p(q,D))),[I]=Ae.useState(y2(g,T));lg(()=>{for(const q of u)q in D&&Jn(I[q],D[q]);return()=>{Object.values(I).map(s1)}},[D,I,T]),lg(()=>{p(T,D)}),Ae.useImperativeHandle(x,x2(m(T)));const N=t;return he.jsx(n.Provider,{value:T,children:t?he.jsx(N,{...t8([...r,...s,...u],D),children:P}):P})}),y=S=>Ae.useCallback(OE(wn,Ae.useContext(n)[S]),[S]),C=S=>{const P=Ae.useContext(n)[S],D=Ae.useCallback(T=>Jn(P,T),[P]);return Ae.useSyncExternalStore(D,()=>qs(P),()=>qs(P))},_=S=>{const P=Ae.useContext(n)[S],[D,T]=Ae.useState(y2(qs,P));return lg(()=>Jn(P,I=>{I!==D&&T(x2(I))}),[P,D]),D},w=Ae.version.startsWith("18")?C:_;return{Component:v,usePublisher:y,useEmitterValue:w,useEmitter:(S,x)=>{const D=Ae.useContext(n)[S];lg(()=>Jn(D,x),[x,D])}}}const BE=typeof document<"u"?Ae.useLayoutEffect:Ae.useEffect;var Ga=(i=>(i[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=3]="ERROR",i))(Ga||{});const i8={0:"debug",1:"log",2:"warn",3:"error"},n8=()=>typeof globalThis>"u"?window:globalThis,kc=er(()=>{const i=ci(3);return{log:ci((t,r,s=1)=>{var l;const u=(l=n8().VIRTUOSO_LOG_LEVEL)!=null?l:qs(i);s>=u&&console[i8[s]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,r)}),logLevel:i}},[],{singleton:!0});function a1(i,e,t){const r=Ae.useRef(null);let s=l=>{};if(typeof ResizeObserver<"u"){const l=Ae.useMemo(()=>new ResizeObserver(u=>{const n=()=>{const p=u[0].target;p.offsetParent!==null&&i(p)};t?n():requestAnimationFrame(n)}),[i]);s=u=>{u&&e?(l.observe(u),r.current=u):(r.current&&l.unobserve(r.current),r.current=null)}}return{ref:r,callbackRef:s}}function Bu(i,e,t){return a1(i,e,t).callbackRef}function r8(i,e,t,r,s,l,u,n,p){const m=Ae.useCallback(g=>{const v=s8(g.children,e,n?"offsetWidth":"offsetHeight",s);let y=g.parentElement;for(;!y.dataset.virtuosoScroller;)y=y.parentElement;const C=y.lastElementChild.dataset.viewportType==="window",_=u?n?u.scrollLeft:u.scrollTop:C?n?window.pageXOffset||document.documentElement.scrollLeft:window.pageYOffset||document.documentElement.scrollTop:n?y.scrollLeft:y.scrollTop,w=u?n?u.scrollWidth:u.scrollHeight:C?n?document.documentElement.scrollWidth:document.documentElement.scrollHeight:n?y.scrollWidth:y.scrollHeight,k=u?n?u.offsetWidth:u.offsetHeight:C?n?window.innerWidth:window.innerHeight:n?y.offsetWidth:y.offsetHeight;r({scrollTop:Math.max(_,0),scrollHeight:w,viewportHeight:k}),l==null||l(n?_2("column-gap",getComputedStyle(g).columnGap,s):_2("row-gap",getComputedStyle(g).rowGap,s)),v!==null&&i(v)},[i,e,s,l,u,r]);return a1(m,t,p)}function s8(i,e,t,r){const s=i.length;if(s===0)return null;const l=[];for(let u=0;u<s;u++){const n=i.item(u);if(!n||n.dataset.index===void 0)continue;const p=parseInt(n.dataset.index),m=parseFloat(n.dataset.knownSize),g=e(n,t);if(g===0&&r("Zero-sized element, this should not happen",{child:n},Ga.ERROR),g===m)continue;const v=l[l.length-1];l.length===0||v.size!==g||v.endIndex!==p-1?l.push({startIndex:p,endIndex:p,size:g}):l[l.length-1].endIndex++}return l}function _2(i,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${i} was not resolved to pixel value correctly`,e,Ga.WARN),e==="normal"?0:parseInt(e??"0",10)}function vc(i,e){return Math.round(i.getBoundingClientRect()[e])}function $E(i,e){return Math.abs(i-e)<1.01}function UE(i,e,t,r=yh,s,l){const u=Ae.useRef(null),n=Ae.useRef(null),p=Ae.useRef(null),m=Ae.useCallback(y=>{const C=y.target,_=C===window||C===document,w=l?_?window.pageXOffset||document.documentElement.scrollLeft:C.scrollLeft:_?window.pageYOffset||document.documentElement.scrollTop:C.scrollTop,k=l?_?document.documentElement.scrollWidth:C.scrollWidth:_?document.documentElement.scrollHeight:C.scrollHeight,S=l?_?window.innerWidth:C.offsetWidth:_?window.innerHeight:C.offsetHeight,x=()=>{i({scrollTop:Math.max(w,0),scrollHeight:k,viewportHeight:S})};y.suppressFlushSync?x():dM.flushSync(x),n.current!==null&&(w===n.current||w<=0||w===k-S)&&(n.current=null,e(!0),p.current&&(clearTimeout(p.current),p.current=null))},[i,e]);Ae.useEffect(()=>{const y=s||u.current;return r(s||u.current),m({target:y,suppressFlushSync:!0}),y.addEventListener("scroll",m,{passive:!0}),()=>{r(null),y.removeEventListener("scroll",m)}},[u,m,t,r,s]);function g(y){const C=u.current;if(!C||(l?"offsetWidth"in C&&C.offsetWidth===0:"offsetHeight"in C&&C.offsetHeight===0))return;const _=y.behavior==="smooth";let w,k,S;C===window?(k=Math.max(vc(document.documentElement,l?"width":"height"),l?document.documentElement.scrollWidth:document.documentElement.scrollHeight),w=l?window.innerWidth:window.innerHeight,S=l?document.documentElement.scrollLeft:document.documentElement.scrollTop):(k=C[l?"scrollWidth":"scrollHeight"],w=vc(C,l?"width":"height"),S=C[l?"scrollLeft":"scrollTop"]);const x=k-w;if(y.top=Math.ceil(Math.max(Math.min(x,y.top),0)),$E(w,k)||y.top===S){i({scrollTop:S,scrollHeight:k,viewportHeight:w}),_&&e(!0);return}_?(n.current=y.top,p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{p.current=null,n.current=null,e(!0)},1e3)):n.current=null,l&&(y={left:y.top,behavior:y.behavior}),C.scrollTo(y)}function v(y){l&&(y={left:y.top,behavior:y.behavior}),u.current.scrollBy(y)}return{scrollerRef:u,scrollByCallback:v,scrollToCallback:g}}const xa=er(()=>{const i=Nn(),e=Nn(),t=ci(0),r=Nn(),s=ci(0),l=Nn(),u=Nn(),n=ci(0),p=ci(0),m=ci(0),g=ci(0),v=Nn(),y=Nn(),C=ci(!1),_=ci(!1),w=ci(!1);return Ni(Wt(i,Ai(({scrollTop:k})=>k)),e),Ni(Wt(i,Ai(({scrollHeight:k})=>k)),u),Ni(e,s),{scrollContainerState:i,scrollTop:e,viewportHeight:l,headerHeight:n,fixedHeaderHeight:p,fixedFooterHeight:m,footerHeight:g,scrollHeight:u,smoothScrollTargetReached:r,horizontalDirection:_,skipAnimationFrameInResizeObserver:w,scrollTo:v,scrollBy:y,statefulScrollTop:s,deviation:t,scrollingInProgress:C}},[],{singleton:!0}),tf={lvl:0};function VE(i,e,t,r=tf,s=tf){return{k:i,v:e,lvl:t,l:r,r:s}}function dr(i){return i===tf}function Hd(){return tf}function Pv(i,e){if(dr(i))return tf;const{k:t,l:r,r:s}=i;if(e===t){if(dr(r))return s;if(dr(s))return r;{const[l,u]=GE(r);return Dg(cs(i,{k:l,v:u,l:HE(r)}))}}else return e<t?Dg(cs(i,{l:Pv(r,e)})):Dg(cs(i,{r:Pv(s,e)}))}function nf(i,e){if(!dr(i))return e===i.k?i.v:e<i.k?nf(i.l,e):nf(i.r,e)}function bo(i,e,t="k"){if(dr(i))return[-1/0,void 0];if(Number(i[t])===e)return[i.k,i.v];if(Number(i[t])<e){const r=bo(i.r,e,t);return r[0]===-1/0?[i.k,i.v]:r}return bo(i.l,e,t)}function Ba(i,e,t){return dr(i)?VE(e,t,1):e===i.k?cs(i,{k:e,v:t}):e<i.k?w2(cs(i,{l:Ba(i.l,e,t)})):w2(cs(i,{r:Ba(i.r,e,t)}))}function Iv(i,e,t){if(dr(i))return[];const{k:r,v:s,l,r:u}=i;let n=[];return r>e&&(n=n.concat(Iv(l,e,t))),r>=e&&r<=t&&n.push({k:r,v:s}),r<=t&&(n=n.concat(Iv(u,e,t))),n}function hu(i){return dr(i)?[]:[...hu(i.l),{k:i.k,v:i.v},...hu(i.r)]}function GE(i){return dr(i.r)?[i.k,i.v]:GE(i.r)}function HE(i){return dr(i.r)?i.l:Dg(cs(i,{r:HE(i.r)}))}function cs(i,e){return VE(e.k!==void 0?e.k:i.k,e.v!==void 0?e.v:i.v,e.lvl!==void 0?e.lvl:i.lvl,e.l!==void 0?e.l:i.l,e.r!==void 0?e.r:i.r)}function I0(i){return dr(i)||i.lvl>i.r.lvl}function w2(i){return Dv(qE(i))}function Dg(i){const{l:e,r:t,lvl:r}=i;if(t.lvl>=r-1&&e.lvl>=r-1)return i;if(r>t.lvl+1){if(I0(e))return qE(cs(i,{lvl:r-1}));if(!dr(e)&&!dr(e.r))return cs(e.r,{l:cs(e,{r:e.r.l}),r:cs(i,{l:e.r.r,lvl:r-1}),lvl:r});throw new Error("Unexpected empty nodes")}else{if(I0(i))return Dv(cs(i,{lvl:r-1}));if(!dr(t)&&!dr(t.l)){const s=t.l,l=I0(s)?t.lvl-1:t.lvl;return cs(s,{l:cs(i,{r:s.l,lvl:r-1}),r:Dv(cs(t,{l:s.r,lvl:l})),lvl:s.lvl+1})}else throw new Error("Unexpected empty nodes")}}function Jy(i,e,t){if(dr(i))return[];const r=bo(i,e)[0];return a8(Iv(i,r,t))}function WE(i,e){const t=i.length;if(t===0)return[];let{index:r,value:s}=e(i[0]);const l=[];for(let u=1;u<t;u++){const{index:n,value:p}=e(i[u]);l.push({start:r,end:n-1,value:s}),r=n,s=p}return l.push({start:r,end:1/0,value:s}),l}function a8(i){return WE(i,({k:e,v:t})=>({index:e,value:t}))}function Dv(i){const{r:e,lvl:t}=i;return!dr(e)&&!dr(e.r)&&e.lvl===t&&e.r.lvl===t?cs(e,{l:cs(i,{r:e.l}),lvl:t+1}):i}function qE(i){const{l:e}=i;return!dr(e)&&e.lvl===i.lvl?cs(e,{r:cs(i,{l:e.r})}):i}function ry(i,e,t,r=0){let s=i.length-1;for(;r<=s;){const l=Math.floor((r+s)/2),u=i[l],n=t(u,e);if(n===0)return l;if(n===-1){if(s-r<2)return l-1;s=l-1}else{if(s===r)return l;r=l+1}}throw new Error(`Failed binary finding record in array - ${i.join(",")}, searched for ${e}`)}function YE(i,e,t){return i[ry(i,e,t)]}function o8(i,e,t,r){const s=ry(i,e,r),l=ry(i,t,r,s);return i.slice(s,l+1)}const o1=er(()=>({recalcInProgress:ci(!1)}),[],{singleton:!0});function l8(i){const{size:e,startIndex:t,endIndex:r}=i;return s=>s.start===t&&(s.end===r||s.end===1/0)&&s.value===e}function C2(i,e){let t=0,r=0;for(;t<i;)t+=e[r+1]-e[r]-1,r++;return r-(t===i?0:1)}function c8(i,e){let t=dr(i)?0:1/0;for(const r of e){const{size:s,startIndex:l,endIndex:u}=r;if(t=Math.min(t,l),dr(i)){i=Ba(i,0,s);continue}const n=Jy(i,l-1,u+1);if(n.some(l8(r)))continue;let p=!1,m=!1;for(const{start:g,end:v,value:y}of n)p?(u>=g||s===y)&&(i=Pv(i,g)):(m=y!==s,p=!0),v>u&&u>=g&&y!==s&&(i=Ba(i,u+1,y));m&&(i=Ba(i,l,s))}return[i,t]}function u8(){return{offsetTree:[],sizeTree:Hd(),groupOffsetTree:Hd(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]}}function l1({index:i},e){return e===i?0:e<i?-1:1}function d8({offset:i},e){return e===i?0:e<i?-1:1}function h8(i){return{index:i.index,value:i}}function p8(i,e,t,r=0){return r>0&&(e=Math.max(e,YE(i,r,l1).offset)),WE(o8(i,e,t,d8),h8)}function Rv(i,e,t,r){let s=i,l=0,u=0,n=0,p=0;if(e!==0){p=ry(s,e-1,l1),n=s[p].offset;const g=bo(t,e-1);l=g[0],u=g[1],s.length&&s[p].size===bo(t,e)[1]&&(p-=1),s=s.slice(0,p+1)}else s=[];for(const{start:m,value:g}of Jy(t,e,1/0)){const v=m-l,y=v*u+n+v*r;s.push({offset:y,size:g,index:m}),l=m,n=y,u=g}return{offsetTree:s,lastIndex:l,lastOffset:n,lastSize:u}}function f8(i,[e,t,r,s]){e.length>0&&r("received item sizes",e,Ga.DEBUG);const l=i.sizeTree;let u=l,n=0;if(t.length>0&&dr(l)&&e.length===2){const y=e[0].size,C=e[1].size;u=t.reduce((_,w)=>Ba(Ba(_,w,y),w+1,C),u)}else[u,n]=c8(u,e);if(u===l)return i;const{offsetTree:p,lastIndex:m,lastSize:g,lastOffset:v}=Rv(i.offsetTree,n,u,s);return{sizeTree:u,offsetTree:p,lastIndex:m,lastOffset:v,lastSize:g,groupOffsetTree:t.reduce((y,C)=>Ba(y,C,rf(C,p,s)),Hd()),groupIndices:t}}function rf(i,e,t){if(e.length===0)return 0;const{offset:r,index:s,size:l}=YE(e,i,l1),u=i-s,n=l*u+(u-1)*t+r;return n>0?n+t:n}function m8(i){return typeof i.groupIndex<"u"}function ZE(i,e,t){if(m8(i))return e.groupIndices[i.groupIndex]+1;{const r=i.index==="LAST"?t:i.index;let s=XE(r,e);return s=Math.max(0,s,Math.min(t,s)),s}}function XE(i,e){if(!ex(e))return i;let t=0;for(;e.groupIndices[t]<=i+t;)t++;return i+t}function ex(i){return!dr(i.groupOffsetTree)}function g8(i){return hu(i).map(({k:e,v:t},r,s)=>{const l=s[r+1],u=l?l.k-1:1/0;return{startIndex:e,endIndex:u,size:t}})}const y8={offsetHeight:"height",offsetWidth:"width"},Jo=er(([{log:i},{recalcInProgress:e}])=>{const t=Nn(),r=Nn(),s=pa(r,0),l=Nn(),u=Nn(),n=ci(0),p=ci([]),m=ci(void 0),g=ci(void 0),v=ci((T,I)=>vc(T,y8[I])),y=ci(void 0),C=ci(0),_=u8(),w=pa(Wt(t,Sn(p,i,C),zo(f8,_),Sr()),_),k=pa(Wt(p,Sr(),zo((T,I)=>({prev:T.current,current:I}),{prev:[],current:[]}),Ai(({prev:T})=>T)),[]);Ni(Wt(p,on(T=>T.length>0),Sn(w,C),Ai(([T,I,N])=>{const q=T.reduce((Z,X,O)=>Ba(Z,X,rf(X,I.offsetTree,N)||O),Hd());return{...I,groupIndices:T,groupOffsetTree:q}})),w),Ni(Wt(r,Sn(w),on(([T,{lastIndex:I}])=>T<I),Ai(([T,{lastIndex:I,lastSize:N}])=>[{startIndex:T,endIndex:I,size:N}])),t),Ni(m,g);const S=pa(Wt(m,Ai(T=>T===void 0)),!0);Ni(Wt(g,on(T=>T!==void 0&&dr(qs(w).sizeTree)),Ai(T=>[{startIndex:0,endIndex:0,size:T}])),t);const x=Va(Wt(t,Sn(w),zo(({sizes:T},[I,N])=>({changed:N!==T,sizes:N}),{changed:!1,sizes:_}),Ai(T=>T.changed)));Jn(Wt(n,zo((T,I)=>({diff:T.prev-I,prev:I}),{diff:0,prev:0}),Ai(T=>T.diff)),T=>{const{groupIndices:I}=qs(w);if(T>0)wn(e,!0),wn(l,T+C2(T,I));else if(T<0){const N=qs(k);N.length>0&&(T-=C2(-T,N)),wn(u,T)}}),Jn(Wt(n,Sn(i)),([T,I])=>{T<0&&I("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:n},Ga.ERROR)});const P=Va(l);Ni(Wt(l,Sn(w),Ai(([T,I])=>{const N=I.groupIndices.length>0,q=[],Z=I.lastSize;if(N){const X=nf(I.sizeTree,0);let O=0,V=0;for(;O<T;){const R=I.groupIndices[V],G=I.groupIndices.length===V+1?1/0:I.groupIndices[V+1]-R-1;q.push({startIndex:R,endIndex:R,size:X}),q.push({startIndex:R+1,endIndex:R+1+G-1,size:Z}),V++,O+=G+1}const $=hu(I.sizeTree);return O!==T&&$.shift(),$.reduce((R,{k:G,v:U})=>{let B=R.ranges;return R.prevSize!==0&&(B=[...R.ranges,{startIndex:R.prevIndex,endIndex:G+T-1,size:R.prevSize}]),{ranges:B,prevIndex:G+T,prevSize:U}},{ranges:q,prevIndex:T,prevSize:0}).ranges}return hu(I.sizeTree).reduce((X,{k:O,v:V})=>({ranges:[...X.ranges,{startIndex:X.prevIndex,endIndex:O+T-1,size:X.prevSize}],prevIndex:O+T,prevSize:V}),{ranges:[],prevIndex:0,prevSize:Z}).ranges})),t);const D=Va(Wt(u,Sn(w,C),Ai(([T,{offsetTree:I},N])=>{const q=-T;return rf(q,I,N)})));return Ni(Wt(u,Sn(w,C),Ai(([T,I,N])=>{if(I.groupIndices.length>0){if(dr(I.sizeTree))return I;let Z=Hd();const X=qs(k);let O=0,V=0,$=0;for(;O<-T;){$=X[V];const R=X[V+1]-$-1;V++,O+=R+1}if(Z=hu(I.sizeTree).reduce((R,{k:G,v:U})=>Ba(R,Math.max(0,G+T),U),Z),O!==-T){const R=nf(I.sizeTree,$);Z=Ba(Z,0,R);const G=bo(I.sizeTree,-T+1)[1];Z=Ba(Z,1,G)}return{...I,sizeTree:Z,...Rv(I.offsetTree,0,Z,N)}}else{const Z=hu(I.sizeTree).reduce((X,{k:O,v:V})=>Ba(X,Math.max(0,O+T),V),Hd());return{...I,sizeTree:Z,...Rv(I.offsetTree,0,Z,N)}}})),w),{data:y,totalCount:r,sizeRanges:t,groupIndices:p,defaultItemSize:g,fixedItemSize:m,unshiftWith:l,shiftWith:u,shiftWithOffset:D,beforeUnshiftWith:P,firstItemIndex:n,gap:C,sizes:w,listRefresh:x,statefulTotalCount:s,trackItemSizes:S,itemSize:v}},Ar(kc,o1),{singleton:!0}),x8=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function KE(i){const e=typeof i=="number"?{index:i}:i;return e.align||(e.align="start"),(!e.behavior||!x8)&&(e.behavior="auto"),e.offset||(e.offset=0),e}const $f=er(([{sizes:i,totalCount:e,listRefresh:t,gap:r},{scrollingInProgress:s,viewportHeight:l,scrollTo:u,smoothScrollTargetReached:n,headerHeight:p,footerHeight:m,fixedHeaderHeight:g,fixedFooterHeight:v},{log:y}])=>{const C=Nn(),_=Nn(),w=ci(0);let k=null,S=null,x=null;function P(){k&&(k(),k=null),x&&(x(),x=null),S&&(clearTimeout(S),S=null),wn(s,!1)}return Ni(Wt(C,Sn(i,l,e,w,p,m,y),Sn(r,g,v),Ai(([[D,T,I,N,q,Z,X,O],V,$,L])=>{const R=KE(D),{align:G,behavior:U,offset:B}=R,H=N-1,W=ZE(R,T,H);let re=rf(W,T.offsetTree,V)+Z;G==="end"?(re+=$+bo(T.sizeTree,W)[1]-I+L,W===H&&(re+=X)):G==="center"?re+=($+bo(T.sizeTree,W)[1]-I+L)/2:re-=q,B&&(re+=B);const de=ie=>{P(),ie?(O("retrying to scroll to",{location:D},Ga.DEBUG),wn(C,D)):(wn(_,!0),O("list did not change, scroll successful",{},Ga.DEBUG))};if(P(),U==="smooth"){let ie=!1;x=Jn(t,oe=>{ie=ie||oe}),k=Go(n,()=>{de(ie)})}else k=Go(Wt(t,v8(150)),de);return S=setTimeout(()=>{P()},1200),wn(s,!0),O("scrolling from index to",{index:W,top:re,behavior:U},Ga.DEBUG),{top:re,behavior:U}})),u),{scrollToIndex:C,scrollTargetReached:_,topListHeight:w}},Ar(Jo,xa,kc),{singleton:!0});function v8(i){return e=>{const t=setTimeout(()=>{e(!1)},i);return r=>{r&&(e(!0),clearTimeout(t))}}}const sf="up",Fp="down",b8="none",_8={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},w8=0,Uf=er(([{scrollContainerState:i,scrollTop:e,viewportHeight:t,headerHeight:r,footerHeight:s,scrollBy:l}])=>{const u=ci(!1),n=ci(!0),p=Nn(),m=Nn(),g=ci(4),v=ci(w8),y=pa(Wt(b2(Wt(hn(e),th(1),Ro(!0)),Wt(hn(e),th(1),Ro(!1),v2(100))),Sr()),!1),C=pa(Wt(b2(Wt(l,Ro(!0)),Wt(l,Ro(!1),v2(200))),Sr()),!1);Ni(Wt(hs(hn(e),hn(v)),Ai(([x,P])=>x<=P),Sr()),n),Ni(Wt(n,uc(50)),m);const _=Va(Wt(hs(i,hn(t),hn(r),hn(s),hn(g)),zo((x,[{scrollTop:P,scrollHeight:D},T,I,N,q])=>{const Z=P+T-D>-q,X={viewportHeight:T,scrollTop:P,scrollHeight:D};if(Z){let V,$;return P>x.state.scrollTop?(V="SCROLLED_DOWN",$=x.state.scrollTop-P):(V="SIZE_DECREASED",$=x.state.scrollTop-P||x.scrollTopDelta),{atBottom:!0,state:X,atBottomBecause:V,scrollTopDelta:$}}let O;return X.scrollHeight>x.state.scrollHeight?O="SIZE_INCREASED":T<x.state.viewportHeight?O="VIEWPORT_HEIGHT_DECREASING":P<x.state.scrollTop?O="SCROLLING_UPWARDS":O="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:O,state:X}},_8),Sr((x,P)=>x&&x.atBottom===P.atBottom))),w=pa(Wt(i,zo((x,{scrollTop:P,scrollHeight:D,viewportHeight:T})=>{if($E(x.scrollHeight,D))return{scrollTop:P,scrollHeight:D,jump:0,changed:!1};{const I=D-(P+T)<1;return x.scrollTop!==P&&I?{scrollHeight:D,scrollTop:P,jump:x.scrollTop-P,changed:!0}:{scrollHeight:D,scrollTop:P,jump:0,changed:!0}}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),on(x=>x.changed),Ai(x=>x.jump)),0);Ni(Wt(_,Ai(x=>x.atBottom)),u),Ni(Wt(u,uc(50)),p);const k=ci(Fp);Ni(Wt(i,Ai(({scrollTop:x})=>x),Sr(),zo((x,P)=>qs(C)?{direction:x.direction,prevScrollTop:P}:{direction:P<x.prevScrollTop?sf:Fp,prevScrollTop:P},{direction:Fp,prevScrollTop:0}),Ai(x=>x.direction)),k),Ni(Wt(i,uc(50),Ro(b8)),k);const S=ci(0);return Ni(Wt(y,on(x=>!x),Ro(0)),S),Ni(Wt(e,uc(100),Sn(y),on(([x,P])=>!!P),zo(([x,P],[D])=>[P,D],[0,0]),Ai(([x,P])=>P-x)),S),{isScrolling:y,isAtTop:n,isAtBottom:u,atBottomState:_,atTopStateChange:m,atBottomStateChange:p,scrollDirection:k,atBottomThreshold:g,atTopThreshold:v,scrollVelocity:S,lastJumpDueToItemResize:w}},Ar(xa)),Ac=er(([{log:i}])=>{const e=ci(!1),t=Va(Wt(e,on(r=>r),Sr()));return Jn(e,r=>{r&&qs(i)("props updated",{},Ga.DEBUG)}),{propsReady:e,didMount:t}},Ar(kc),{singleton:!0});function c1(i,e){i==0?e():requestAnimationFrame(()=>c1(i-1,e))}function u1(i,e){const t=e-1;return typeof i=="number"?i:i.index==="LAST"?t:i.index}const Vf=er(([{sizes:i,listRefresh:e,defaultItemSize:t},{scrollTop:r},{scrollToIndex:s,scrollTargetReached:l},{didMount:u}])=>{const n=ci(!0),p=ci(0),m=ci(!0);return Ni(Wt(u,Sn(p),on(([g,v])=>!!v),Ro(!1)),n),Ni(Wt(u,Sn(p),on(([g,v])=>!!v),Ro(!1)),m),Jn(Wt(hs(e,u),Sn(n,i,t,m),on(([[,g],v,{sizeTree:y},C,_])=>g&&(!dr(y)||r1(C))&&!v&&!_),Sn(p)),([,g])=>{Go(l,()=>{wn(m,!0)}),c1(4,()=>{Go(r,()=>{wn(n,!0)}),wn(s,g)})}),{scrolledToInitialItem:n,initialTopMostItemIndex:p,initialItemFinalLocationReached:m}},Ar(Jo,xa,$f,Ac),{singleton:!0});function T2(i){return i?i==="smooth"?"smooth":"auto":!1}const C8=(i,e)=>typeof i=="function"?T2(i(e)):e&&T2(i),T8=er(([{totalCount:i,listRefresh:e},{isAtBottom:t,atBottomState:r},{scrollToIndex:s},{scrolledToInitialItem:l},{propsReady:u,didMount:n},{log:p},{scrollingInProgress:m}])=>{const g=ci(!1),v=Nn();let y=null;function C(w){wn(s,{index:"LAST",align:"end",behavior:w})}Jn(Wt(hs(Wt(hn(i),th(1)),n),Sn(hn(g),t,l,m),Ai(([[w,k],S,x,P,D])=>{let T=k&&P,I="auto";return T&&(I=C8(S,x||D),T=T&&!!I),{totalCount:w,shouldFollow:T,followOutputBehavior:I}}),on(({shouldFollow:w})=>w)),({totalCount:w,followOutputBehavior:k})=>{y&&(y(),y=null),y=Go(e,()=>{qs(p)("following output to ",{totalCount:w},Ga.DEBUG),C(k),y=null})});function _(w){const k=Go(r,S=>{w&&!S.atBottom&&S.notAtBottomBecause==="SIZE_INCREASED"&&!y&&(qs(p)("scrolling to bottom due to increased size",{},Ga.DEBUG),C("auto"))});setTimeout(k,100)}return Jn(Wt(hs(hn(g),i,u),on(([w,,k])=>w&&k),zo(({value:w},[,k])=>({refreshed:w===k,value:k}),{refreshed:!1,value:0}),on(({refreshed:w})=>w),Sn(g,i)),([,w])=>{qs(l)&&_(w!==!1)}),Jn(v,()=>{_(qs(g)!==!1)}),Jn(hs(hn(g),r),([w,k])=>{w&&!k.atBottom&&k.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&C("auto")}),{followOutput:g,autoscrollToBottom:v}},Ar(Jo,Uf,$f,Vf,Ac,kc,xa));function S8(i){return i.reduce((e,t)=>(e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e),{totalCount:0,groupIndices:[]})}const QE=er(([{totalCount:i,groupIndices:e,sizes:t},{scrollTop:r,headerHeight:s}])=>{const l=Nn(),u=Nn(),n=Va(Wt(l,Ai(S8)));return Ni(Wt(n,Ai(p=>p.totalCount)),i),Ni(Wt(n,Ai(p=>p.groupIndices)),e),Ni(Wt(hs(r,t,s),on(([p,m])=>ex(m)),Ai(([p,m,g])=>bo(m.groupOffsetTree,Math.max(p-g,0),"v")[0]),Sr(),Ai(p=>[p])),u),{groupCounts:l,topItemsIndexes:u}},Ar(Jo,xa));function af(i,e){return!!(i&&i[0]===e[0]&&i[1]===e[1])}function JE(i,e){return!!(i&&i.startIndex===e.startIndex&&i.endIndex===e.endIndex)}const sy="top",ay="bottom",S2="none";function E2(i,e,t){return typeof i=="number"?t===sf&&e===sy||t===Fp&&e===ay?i:0:t===sf?e===sy?i.main:i.reverse:e===ay?i.main:i.reverse}function k2(i,e){return typeof i=="number"?i:i[e]||0}const d1=er(([{scrollTop:i,viewportHeight:e,deviation:t,headerHeight:r,fixedHeaderHeight:s}])=>{const l=Nn(),u=ci(0),n=ci(0),p=ci(0),m=pa(Wt(hs(hn(i),hn(e),hn(r),hn(l,af),hn(p),hn(u),hn(s),hn(t),hn(n)),Ai(([g,v,y,[C,_],w,k,S,x,P])=>{const D=g-x,T=k+S,I=Math.max(y-D,0);let N=S2;const q=k2(P,sy),Z=k2(P,ay);return C-=x,C+=y+S,_+=y+S,_-=x,C>g+T-q&&(N=sf),_<g-I+v+Z&&(N=Fp),N!==S2?[Math.max(D-y-E2(w,sy,N)-q,0),D-I-S+v+E2(w,ay,N)+Z]:null}),on(g=>g!=null),Sr(af)),[0,0]);return{listBoundary:l,overscan:p,topListHeight:u,increaseViewportBy:n,visibleRange:m}},Ar(xa),{singleton:!0});function E8(i,e,t){if(ex(e)){const r=XE(i,e);return[{index:bo(e.groupOffsetTree,r)[0],size:0,offset:0},{index:r,size:0,offset:0,data:t&&t[0]}]}return[{index:i,size:0,offset:0,data:t&&t[0]}]}const D0={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0};function A2(i,e,t){if(i.length===0)return[];if(!ex(e))return i.map(m=>({...m,index:m.index+t,originalIndex:m.index}));const r=i[0].index,s=i[i.length-1].index,l=[],u=Jy(e.groupOffsetTree,r,s);let n,p=0;for(const m of i){(!n||n.end<m.index)&&(n=u.shift(),p=e.groupIndices.indexOf(n.start));let g;m.index===n.start?g={type:"group",index:p}:g={index:m.index-(p+1)+t,groupIndex:p},l.push({...g,size:m.size,offset:m.offset,originalIndex:m.index,data:m.data})}return l}function Rg(i,e,t,r,s,l){const{lastSize:u,lastOffset:n,lastIndex:p}=s;let m=0,g=0;if(i.length>0){m=i[0].offset;const w=i[i.length-1];g=w.offset+w.size}const v=t-p,y=n+v*u+(v-1)*r,C=m,_=y-g;return{items:A2(i,s,l),topItems:A2(e,s,l),topListHeight:e.reduce((w,k)=>k.size+w,0),offsetTop:m,offsetBottom:_,top:C,bottom:g,totalCount:t,firstItemIndex:l}}function e3(i,e,t,r,s,l){let u=0;if(t.groupIndices.length>0)for(const g of t.groupIndices){if(g-u>=i)break;u++}const n=i+u,p=u1(e,n),m=Array.from({length:n}).map((g,v)=>({index:v+p,size:0,offset:0,data:l[v+p]}));return Rg(m,[],n,s,t,r)}const $u=er(([{sizes:i,totalCount:e,data:t,firstItemIndex:r,gap:s},l,{visibleRange:u,listBoundary:n,topListHeight:p},{scrolledToInitialItem:m,initialTopMostItemIndex:g},{topListHeight:v},y,{didMount:C},{recalcInProgress:_}])=>{const w=ci([]),k=ci(0),S=Nn();Ni(l.topItemsIndexes,w);const x=pa(Wt(hs(C,_,hn(u,af),hn(e),hn(i),hn(g),m,hn(w),hn(r),hn(s),t),on(([I,N,,q,,,,,,,Z])=>{const X=Z&&Z.length!==q;return I&&!N&&!X}),Ai(([,,[I,N],q,Z,X,O,V,$,L,R])=>{const G=Z,{sizeTree:U,offsetTree:B}=G,H=qs(k);if(q===0)return{...D0,totalCount:q};if(I===0&&N===0)return H===0?{...D0,totalCount:q}:e3(H,X,Z,$,L,R||[]);if(dr(U))return H>0?null:Rg(E8(u1(X,q),G,R),[],q,L,G,$);const W=[];if(V.length>0){const Ee=V[0],xe=V[V.length-1];let Se=0;for(const K of Jy(U,Ee,xe)){const Q=K.value,ae=Math.max(K.start,Ee),_e=Math.min(K.end,xe);for(let J=ae;J<=_e;J++)W.push({index:J,size:Q,offset:Se,data:R&&R[J]}),Se+=Q}}if(!O)return Rg([],W,q,L,G,$);const re=V.length>0?V[V.length-1]+1:0,de=p8(B,I,N,re);if(de.length===0)return null;const ie=q-1,oe=Qy([],Ee=>{for(const xe of de){const Se=xe.value;let K=Se.offset,Q=xe.start;const ae=Se.size;if(Se.offset<I){Q+=Math.floor((I-Se.offset+L)/(ae+L));const J=Q-xe.start;K+=J*ae+J*L}Q<re&&(K+=(re-Q)*ae,Q=re);const _e=Math.min(xe.end,ie);for(let J=Q;J<=_e&&!(K>=N);J++)Ee.push({index:J,size:ae,offset:K,data:R&&R[J]}),K+=ae+L}});return Rg(oe,W,q,L,G,$)}),on(I=>I!==null),Sr()),D0);Ni(Wt(t,on(r1),Ai(I=>I==null?void 0:I.length)),e),Ni(Wt(x,Ai(I=>I.topListHeight)),v),Ni(v,p),Ni(Wt(x,Ai(I=>[I.top,I.bottom])),n),Ni(Wt(x,Ai(I=>I.items)),S);const P=Va(Wt(x,on(({items:I})=>I.length>0),Sn(e,t),on(([{items:I},N])=>I[I.length-1].originalIndex===N-1),Ai(([,I,N])=>[I-1,N]),Sr(af),Ai(([I])=>I))),D=Va(Wt(x,uc(200),on(({items:I,topItems:N})=>I.length>0&&I[0].originalIndex===N.length),Ai(({items:I})=>I[0].index),Sr())),T=Va(Wt(x,on(({items:I})=>I.length>0),Ai(({items:I})=>{let N=0,q=I.length-1;for(;I[N].type==="group"&&N<q;)N++;for(;I[q].type==="group"&&q>N;)q--;return{startIndex:I[N].index,endIndex:I[q].index}}),Sr(JE)));return{listState:x,topItemsIndexes:w,endReached:P,startReached:D,rangeChanged:T,itemsRendered:S,initialItemCount:k,...y}},Ar(Jo,QE,d1,Vf,$f,Uf,Ac,o1),{singleton:!0}),k8=er(([{sizes:i,firstItemIndex:e,data:t,gap:r},{initialTopMostItemIndex:s},{initialItemCount:l,listState:u},{didMount:n}])=>(Ni(Wt(n,Sn(l),on(([,p])=>p!==0),Sn(s,i,e,r,t),Ai(([[,p],m,g,v,y,C=[]])=>e3(p,m,g,v,y,C))),u),{}),Ar(Jo,Vf,$u,Ac),{singleton:!0}),t3=er(([{scrollVelocity:i}])=>{const e=ci(!1),t=Nn(),r=ci(!1);return Ni(Wt(i,Sn(r,e,t),on(([s,l])=>!!l),Ai(([s,l,u,n])=>{const{exit:p,enter:m}=l;if(u){if(p(s,n))return!1}else if(m(s,n))return!0;return u}),Sr()),e),Jn(Wt(hs(e,i,t),Sn(r)),([[s,l,u],n])=>s&&n&&n.change&&n.change(l,u)),{isSeeking:e,scrollSeekConfiguration:r,scrollVelocity:i,scrollSeekRangeChanged:t}},Ar(Uf),{singleton:!0}),A8=er(([{topItemsIndexes:i}])=>{const e=ci(0);return Ni(Wt(e,on(t=>t>=0),Ai(t=>Array.from({length:t}).map((r,s)=>s))),i),{topItemCount:e}},Ar($u)),i3=er(([{footerHeight:i,headerHeight:e,fixedHeaderHeight:t,fixedFooterHeight:r},{listState:s}])=>{const l=Nn(),u=pa(Wt(hs(i,r,e,t,s),Ai(([n,p,m,g,v])=>n+p+m+g+v.offsetBottom+v.bottom)),0);return Ni(hn(u),l),{totalListHeight:u,totalListHeightChanged:l}},Ar(xa,$u),{singleton:!0});function n3(i){let e=!1,t;return()=>(e||(e=!0,t=i()),t)}const M8=n3(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),P8=er(([{scrollBy:i,scrollTop:e,deviation:t,scrollingInProgress:r},{isScrolling:s,isAtBottom:l,scrollDirection:u,lastJumpDueToItemResize:n},{listState:p},{beforeUnshiftWith:m,shiftWithOffset:g,sizes:v,gap:y},{log:C},{recalcInProgress:_}])=>{const w=Va(Wt(p,Sn(n),zo(([,S,x,P],[{items:D,totalCount:T,bottom:I,offsetBottom:N},q])=>{const Z=I+N;let X=0;return x===T&&S.length>0&&D.length>0&&(D[0].originalIndex===0&&S[0].originalIndex===0||(X=Z-P,X!==0&&(X+=q))),[X,D,T,Z]},[0,[],0,0]),on(([S])=>S!==0),Sn(e,u,r,l,C,_),on(([,S,x,P,,,D])=>!D&&!P&&S!==0&&x===sf),Ai(([[S],,,,,x])=>(x("Upward scrolling compensation",{amount:S},Ga.DEBUG),S))));function k(S){S>0?(wn(i,{top:-S,behavior:"auto"}),wn(t,0)):(wn(t,0),wn(i,{top:-S,behavior:"auto"}))}return Jn(Wt(w,Sn(t,s)),([S,x,P])=>{P&&M8()?wn(t,x-S):k(-S)}),Jn(Wt(hs(pa(s,!1),t,_),on(([S,x,P])=>!S&&!P&&x!==0),Ai(([S,x])=>x),uc(1)),k),Ni(Wt(g,Ai(S=>({top:-S}))),i),Jn(Wt(m,Sn(v,y),Ai(([S,{lastSize:x,groupIndices:P,sizeTree:D},T])=>{function I(N){return N*(x+T)}if(P.length===0)return I(S);{let N=0;const q=nf(D,0);let Z=0,X=0;for(;Z<S;){Z++,N+=q;let O=P.length===X+1?1/0:P[X+1]-P[X]-1;Z+O>S&&(N-=q,O=S-Z+1),Z+=O,N+=I(O),X++}return N}})),S=>{wn(t,S),requestAnimationFrame(()=>{wn(i,{top:S}),requestAnimationFrame(()=>{wn(t,0),wn(_,!1)})})}),{deviation:t}},Ar(xa,Uf,$u,Jo,kc,o1)),I8=er(([{didMount:i},{scrollTo:e},{listState:t}])=>{const r=ci(0);return Jn(Wt(i,Sn(r),on(([,s])=>s!==0),Ai(([,s])=>({top:s}))),s=>{Go(Wt(t,th(1),on(l=>l.items.length>1)),()=>{requestAnimationFrame(()=>{wn(e,s)})})}),{initialScrollTop:r}},Ar(Ac,xa,$u),{singleton:!0}),D8=er(([{viewportHeight:i},{totalListHeight:e}])=>{const t=ci(!1),r=pa(Wt(hs(t,i,e),on(([s])=>s),Ai(([,s,l])=>Math.max(0,s-l)),uc(0),Sr()),0);return{alignToBottom:t,paddingTopAddition:r}},Ar(xa,i3),{singleton:!0}),h1=er(([{scrollTo:i,scrollContainerState:e}])=>{const t=Nn(),r=Nn(),s=Nn(),l=ci(!1),u=ci(void 0);return Ni(Wt(hs(t,r),Ai(([{viewportHeight:n,scrollTop:p,scrollHeight:m},{offsetTop:g}])=>({scrollTop:Math.max(0,p-g),scrollHeight:m,viewportHeight:n}))),e),Ni(Wt(i,Sn(r),Ai(([n,{offsetTop:p}])=>({...n,top:n.top+p}))),s),{useWindowScroll:l,customScrollParent:u,windowScrollContainerState:t,windowViewportRect:r,windowScrollTo:s}},Ar(xa)),R8=({itemTop:i,itemBottom:e,viewportTop:t,viewportBottom:r,locationParams:{behavior:s,align:l,...u}})=>i<t?{...u,behavior:s,align:l??"start"}:e>r?{...u,behavior:s,align:l??"end"}:null,L8=er(([{sizes:i,totalCount:e,gap:t},{scrollTop:r,viewportHeight:s,headerHeight:l,fixedHeaderHeight:u,fixedFooterHeight:n,scrollingInProgress:p},{scrollToIndex:m}])=>{const g=Nn();return Ni(Wt(g,Sn(i,s,e,l,u,n,r),Sn(t),Ai(([[v,y,C,_,w,k,S,x],P])=>{const{done:D,behavior:T,align:I,calculateViewLocation:N=R8,...q}=v,Z=ZE(v,y,_-1),X=rf(Z,y.offsetTree,P)+w+k,O=X+bo(y.sizeTree,Z)[1],V=x+k,$=x+C-S,L=N({itemTop:X,itemBottom:O,viewportTop:V,viewportBottom:$,locationParams:{behavior:T,align:I,...q}});return L?D&&Go(Wt(p,on(R=>R===!1),th(qs(p)?1:2)),D):D&&D(),L}),on(v=>v!==null)),m),{scrollIntoView:g}},Ar(Jo,xa,$f,$u,kc),{singleton:!0}),z8=er(([{sizes:i,sizeRanges:e},{scrollTop:t,headerHeight:r},{initialTopMostItemIndex:s},{didMount:l},{useWindowScroll:u,windowScrollContainerState:n,windowViewportRect:p}])=>{const m=Nn(),g=ci(void 0),v=ci(null),y=ci(null);return Ni(n,v),Ni(p,y),Jn(Wt(m,Sn(i,t,u,v,y,r)),([C,_,w,k,S,x,P])=>{const D=g8(_.sizeTree);k&&S!==null&&x!==null&&(w=S.scrollTop-x.offsetTop),w-=P,C({ranges:D,scrollTop:w})}),Ni(Wt(g,on(r1),Ai(N8)),s),Ni(Wt(l,Sn(g),on(([,C])=>C!==void 0),Sr(),Ai(([,C])=>C.ranges)),e),{getState:m,restoreStateFrom:g}},Ar(Jo,xa,Vf,Ac,h1));function N8(i){return{offset:i.scrollTop,index:0,align:"start"}}const O8=er(([i,e,t,r,s,l,u,n,p,m])=>({...i,...e,...t,...r,...s,...l,...u,...n,...p,...m}),Ar(d1,k8,Ac,t3,i3,I8,D8,h1,L8,kc)),j8=er(([{totalCount:i,sizeRanges:e,fixedItemSize:t,defaultItemSize:r,trackItemSizes:s,itemSize:l,data:u,firstItemIndex:n,groupIndices:p,statefulTotalCount:m,gap:g,sizes:v},{initialTopMostItemIndex:y,scrolledToInitialItem:C,initialItemFinalLocationReached:_},w,k,S,{listState:x,topItemsIndexes:P,...D},{scrollToIndex:T},I,{topItemCount:N},{groupCounts:q},Z])=>(Ni(D.rangeChanged,Z.scrollSeekRangeChanged),Ni(Wt(Z.windowViewportRect,Ai(X=>X.visibleHeight)),w.viewportHeight),{totalCount:i,data:u,firstItemIndex:n,sizeRanges:e,initialTopMostItemIndex:y,scrolledToInitialItem:C,initialItemFinalLocationReached:_,topItemsIndexes:P,topItemCount:N,groupCounts:q,fixedItemHeight:t,defaultItemHeight:r,gap:g,...S,statefulTotalCount:m,listState:x,scrollToIndex:T,trackItemSizes:s,itemSize:l,groupIndices:p,...D,...Z,...w,sizes:v,...k}),Ar(Jo,Vf,xa,z8,T8,$u,$f,P8,A8,QE,O8)),R0="-webkit-sticky",M2="sticky",r3=n3(()=>{if(typeof document>"u")return M2;const i=document.createElement("div");return i.style.position=R0,i.style.position===R0?R0:M2});function s3(i,e,t){const r=Ae.useRef(null),s=Ae.useCallback(p=>{if(p===null||!p.offsetParent)return;const m=p.getBoundingClientRect(),g=m.width;let v,y;if(e){const C=e.getBoundingClientRect(),_=m.top-C.top;v=C.height-Math.max(0,_),y=_+e.scrollTop}else v=window.innerHeight-Math.max(0,m.top),y=m.top+window.pageYOffset;r.current={offsetTop:y,visibleHeight:v,visibleWidth:g},i(r.current)},[i,e]),{callbackRef:l,ref:u}=a1(s,!0,t),n=Ae.useCallback(()=>{s(u.current)},[s,u]);return Ae.useEffect(()=>{if(e){e.addEventListener("scroll",n);const p=new ResizeObserver(()=>{requestAnimationFrame(n)});return p.observe(e),()=>{e.removeEventListener("scroll",n),p.unobserve(e)}}else return window.addEventListener("scroll",n),window.addEventListener("resize",n),()=>{window.removeEventListener("scroll",n),window.removeEventListener("resize",n)}},[n,e]),l}const a3=Ae.createContext(void 0),o3=Ae.createContext(void 0);function l3(i){return i}const F8=er(()=>{const i=ci(p=>`Item ${p}`),e=ci(null),t=ci(p=>`Group ${p}`),r=ci({}),s=ci(l3),l=ci("div"),u=ci(yh),n=(p,m=null)=>pa(Wt(r,Ai(g=>g[p]),Sr()),m);return{context:e,itemContent:i,groupContent:t,components:r,computeItemKey:s,HeaderFooterTag:l,scrollerRef:u,FooterComponent:n("Footer"),HeaderComponent:n("Header"),TopItemListComponent:n("TopItemList"),ListComponent:n("List","div"),ItemComponent:n("Item","div"),GroupComponent:n("Group","div"),ScrollerComponent:n("Scroller","div"),EmptyPlaceholder:n("EmptyPlaceholder"),ScrollSeekPlaceholder:n("ScrollSeekPlaceholder")}}),B8=er(([i,e])=>({...i,...e}),Ar(j8,F8)),$8=({height:i})=>he.jsx("div",{style:{height:i}}),U8={position:r3(),zIndex:1,overflowAnchor:"none"},c3={overflowAnchor:"none"},V8={...c3,display:"inline-block",height:"100%"},P2=Ae.memo(function({showTopList:e=!1}){const t=fn("listState"),r=eo("sizeRanges"),s=fn("useWindowScroll"),l=fn("customScrollParent"),u=eo("windowScrollContainerState"),n=eo("scrollContainerState"),p=l||s?u:n,m=fn("itemContent"),g=fn("context"),v=fn("groupContent"),y=fn("trackItemSizes"),C=fn("itemSize"),_=fn("log"),w=eo("gap"),k=fn("horizontalDirection"),{callbackRef:S}=r8(r,C,y,e?yh:p,_,w,l,k,fn("skipAnimationFrameInResizeObserver")),[x,P]=Ae.useState(0);p1("deviation",R=>{x!==R&&P(R)});const D=fn("EmptyPlaceholder"),T=fn("ScrollSeekPlaceholder")||$8,I=fn("ListComponent"),N=fn("ItemComponent"),q=fn("GroupComponent"),Z=fn("computeItemKey"),X=fn("isSeeking"),O=fn("groupIndices").length>0,V=fn("alignToBottom"),$=fn("initialItemFinalLocationReached"),L=e?{}:{boxSizing:"border-box",...k?{whiteSpace:"nowrap",display:"inline-block",height:"100%",paddingLeft:t.offsetTop,paddingRight:t.offsetBottom,marginLeft:x!==0?x:V?"auto":0}:{marginTop:x!==0?x:V?"auto":0,paddingTop:t.offsetTop,paddingBottom:t.offsetBottom},...$?{}:{visibility:"hidden"}};return!e&&t.totalCount===0&&D?he.jsx(D,{...ha(D,g)}):he.jsx(I,{...ha(I,g),ref:S,style:L,"data-testid":e?"virtuoso-top-item-list":"virtuoso-item-list",children:(e?t.topItems:t.items).map(R=>{const G=R.originalIndex,U=Z(G+t.firstItemIndex,R.data,g);return X?Ue.createElement(T,{...ha(T,g),key:U,index:R.index,height:R.size,type:R.type||"item",...R.type==="group"?{}:{groupIndex:R.groupIndex}}):R.type==="group"?Ue.createElement(q,{...ha(q,g),key:U,"data-index":G,"data-known-size":R.size,"data-item-index":R.index,style:U8},v(R.index,g)):Ue.createElement(N,{...ha(N,g),...q8(N,R.data),key:U,"data-index":G,"data-known-size":R.size,"data-item-index":R.index,"data-item-group-index":R.groupIndex,style:k?V8:c3},O?m(R.index,R.groupIndex,R.data,g):m(R.index,R.data,g))})})}),G8={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},H8={outline:"none",overflowX:"auto",position:"relative"},tx=i=>({width:"100%",height:"100%",position:"absolute",top:0,...i?{display:"flex",flexDirection:"column"}:{}}),W8={width:"100%",position:r3(),top:0,zIndex:1};function ha(i,e){if(typeof i!="string")return{context:e}}function q8(i,e){return{item:typeof i=="string"?void 0:e}}const Y8=Ae.memo(function(){const e=fn("HeaderComponent"),t=eo("headerHeight"),r=fn("HeaderFooterTag"),s=Bu(Ae.useMemo(()=>u=>t(vc(u,"height")),[t]),!0,fn("skipAnimationFrameInResizeObserver")),l=fn("context");return e?he.jsx(r,{ref:s,children:he.jsx(e,{...ha(e,l)})}):null}),Z8=Ae.memo(function(){const e=fn("FooterComponent"),t=eo("footerHeight"),r=fn("HeaderFooterTag"),s=Bu(Ae.useMemo(()=>u=>t(vc(u,"height")),[t]),!0,fn("skipAnimationFrameInResizeObserver")),l=fn("context");return e?he.jsx(r,{ref:s,children:he.jsx(e,{...ha(e,l)})}):null});function u3({usePublisher:i,useEmitter:e,useEmitterValue:t}){return Ae.memo(function({style:l,children:u,...n}){const p=i("scrollContainerState"),m=t("ScrollerComponent"),g=i("smoothScrollTargetReached"),v=t("scrollerRef"),y=t("context"),C=t("horizontalDirection")||!1,{scrollerRef:_,scrollByCallback:w,scrollToCallback:k}=UE(p,g,m,v,void 0,C);e("scrollTo",k),e("scrollBy",w);const S=C?H8:G8;return he.jsx(m,{ref:_,style:{...S,...l},"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0,...n,...ha(m,y),children:u})})}function d3({usePublisher:i,useEmitter:e,useEmitterValue:t}){return Ae.memo(function({style:l,children:u,...n}){const p=i("windowScrollContainerState"),m=t("ScrollerComponent"),g=i("smoothScrollTargetReached"),v=t("totalListHeight"),y=t("deviation"),C=t("customScrollParent"),_=t("context"),{scrollerRef:w,scrollByCallback:k,scrollToCallback:S}=UE(p,g,m,yh,C);return BE(()=>(w.current=C||window,()=>{w.current=null}),[w,C]),e("windowScrollTo",S),e("scrollBy",k),he.jsx(m,{style:{position:"relative",...l,...v!==0?{height:v+y}:{}},"data-virtuoso-scroller":!0,...n,...ha(m,_),children:u})})}const X8=({children:i})=>{const e=Ae.useContext(a3),t=eo("viewportHeight"),r=eo("fixedItemHeight"),s=fn("alignToBottom"),l=fn("horizontalDirection"),u=Ae.useMemo(()=>NE(t,p=>vc(p,l?"width":"height")),[t,l]),n=Bu(u,!0,fn("skipAnimationFrameInResizeObserver"));return Ae.useEffect(()=>{e&&(t(e.viewportHeight),r(e.itemHeight))},[e,t,r]),he.jsx("div",{style:tx(s),ref:n,"data-viewport-type":"element",children:i})},K8=({children:i})=>{const e=Ae.useContext(a3),t=eo("windowViewportRect"),r=eo("fixedItemHeight"),s=fn("customScrollParent"),l=s3(t,s,fn("skipAnimationFrameInResizeObserver")),u=fn("alignToBottom");return Ae.useEffect(()=>{e&&(r(e.itemHeight),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:100}))},[e,t,r]),he.jsx("div",{ref:l,style:tx(u),"data-viewport-type":"window",children:i})},Q8=({children:i})=>{const e=fn("TopItemListComponent")||"div",t=fn("headerHeight"),r={...W8,marginTop:`${t}px`},s=fn("context");return he.jsx(e,{style:r,...ha(e,s),children:i})},J8=Ae.memo(function(e){const t=fn("useWindowScroll"),r=fn("topItemsIndexes").length>0,s=fn("customScrollParent"),l=s||t?iF:tF,u=s||t?K8:X8;return he.jsxs(l,{...e,children:[r&&he.jsx(Q8,{children:he.jsx(P2,{showTopList:!0})}),he.jsxs(u,{children:[he.jsx(Y8,{}),he.jsx(P2,{}),he.jsx(Z8,{})]})]})}),{Component:eF,usePublisher:eo,useEmitterValue:fn,useEmitter:p1}=FE(B8,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},J8),tF=u3({usePublisher:eo,useEmitterValue:fn,useEmitter:p1}),iF=d3({usePublisher:eo,useEmitterValue:fn,useEmitter:p1}),nF=eF,I2={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},rF={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},{round:D2,ceil:R2,floor:oy,min:L0,max:Bp}=Math;function sF(i){return{...rF,items:i}}function L2(i,e,t){return Array.from({length:e-i+1}).map((r,s)=>{const l=t===null?null:t[s+i];return{index:s+i,data:l}})}function aF(i,e){return i&&i.column===e.column&&i.row===e.row}function cg(i,e){return i&&i.width===e.width&&i.height===e.height}const oF=er(([{overscan:i,visibleRange:e,listBoundary:t,increaseViewportBy:r},{scrollTop:s,viewportHeight:l,scrollBy:u,scrollTo:n,smoothScrollTargetReached:p,scrollContainerState:m,footerHeight:g,headerHeight:v},y,C,{propsReady:_,didMount:w},{windowViewportRect:k,useWindowScroll:S,customScrollParent:x,windowScrollContainerState:P,windowScrollTo:D},T])=>{const I=ci(0),N=ci(0),q=ci(I2),Z=ci({height:0,width:0}),X=ci({height:0,width:0}),O=Nn(),V=Nn(),$=ci(0),L=ci(null),R=ci({row:0,column:0}),G=Nn(),U=Nn(),B=ci(!1),H=ci(0),W=ci(!0),re=ci(!1),de=ci(!1);Jn(Wt(w,Sn(H),on(([K,Q])=>!!Q)),()=>{wn(W,!1)}),Jn(Wt(hs(w,W,X,Z,H,re),on(([K,Q,ae,_e,,J])=>K&&!Q&&ae.height!==0&&_e.height!==0&&!J)),([,,,,K])=>{wn(re,!0),c1(1,()=>{wn(O,K)}),Go(Wt(s),()=>{wn(t,[0,0]),wn(W,!0)})}),Ni(Wt(U,on(K=>K!=null&&K.scrollTop>0),Ro(0)),N),Jn(Wt(w,Sn(U),on(([,K])=>K!=null)),([,K])=>{K&&(wn(Z,K.viewport),wn(X,K==null?void 0:K.item),wn(R,K.gap),K.scrollTop>0&&(wn(B,!0),Go(Wt(s,th(1)),Q=>{wn(B,!1)}),wn(n,{top:K.scrollTop})))}),Ni(Wt(Z,Ai(({height:K})=>K)),l),Ni(Wt(hs(hn(Z,cg),hn(X,cg),hn(R,(K,Q)=>K&&K.column===Q.column&&K.row===Q.row),hn(s)),Ai(([K,Q,ae,_e])=>({viewport:K,item:Q,gap:ae,scrollTop:_e}))),G),Ni(Wt(hs(hn(I),e,hn(R,aF),hn(X,cg),hn(Z,cg),hn(L),hn(N),hn(B),hn(W),hn(H)),on(([,,,,,,,K])=>!K),Ai(([K,[Q,ae],_e,J,ne,ce,ye,,we,ze])=>{const{row:Ce,column:Ie}=_e,{height:Fe,width:Ge}=J,{width:ke}=ne;if(ye===0&&(K===0||ke===0))return I2;if(Ge===0){const ht=u1(ze,K),gt=ht+Math.max(ye-1,0);return sF(L2(ht,gt,ce))}const ge=h3(ke,Ge,Ie);let fe,Me;we?Q===0&&ae===0&&ye>0?(fe=0,Me=ye-1):(fe=ge*oy((Q+Ce)/(Fe+Ce)),Me=ge*R2((ae+Ce)/(Fe+Ce))-1,Me=L0(K-1,Bp(Me,ge-1)),fe=L0(Me,Bp(0,fe))):(fe=0,Me=-1);const De=L2(fe,Me,ce),{top:Pe,bottom:je}=z2(ne,_e,J,De),Xe=R2(K/ge),nt=Xe*Fe+(Xe-1)*Ce-je;return{items:De,offsetTop:Pe,offsetBottom:nt,top:Pe,bottom:je,itemHeight:Fe,itemWidth:Ge}})),q),Ni(Wt(L,on(K=>K!==null),Ai(K=>K.length)),I),Ni(Wt(hs(Z,X,q,R),on(([K,Q,{items:ae}])=>ae.length>0&&Q.height!==0&&K.height!==0),Ai(([K,Q,{items:ae},_e])=>{const{top:J,bottom:ne}=z2(K,_e,Q,ae);return[J,ne]}),Sr(af)),t);const ie=ci(!1);Ni(Wt(s,Sn(ie),Ai(([K,Q])=>Q||K!==0)),ie);const oe=Va(Wt(hs(q,I),on(([{items:K}])=>K.length>0),Sn(ie),on(([[K,Q],ae])=>{const J=K.items[K.items.length-1].index===Q-1;return(ae||K.bottom>0&&K.itemHeight>0&&K.offsetBottom===0&&K.items.length===Q)&&J}),Ai(([[,K]])=>K-1),Sr())),Ee=Va(Wt(hn(q),on(({items:K})=>K.length>0&&K[0].index===0),Ro(0),Sr())),xe=Va(Wt(hn(q),Sn(B),on(([{items:K},Q])=>K.length>0&&!Q),Ai(([{items:K}])=>({startIndex:K[0].index,endIndex:K[K.length-1].index})),Sr(JE),uc(0)));Ni(xe,C.scrollSeekRangeChanged),Ni(Wt(O,Sn(Z,X,I,R),Ai(([K,Q,ae,_e,J])=>{const ne=KE(K),{align:ce,behavior:ye,offset:we}=ne;let ze=ne.index;ze==="LAST"&&(ze=_e-1),ze=Bp(0,ze,L0(_e-1,ze));let Ce=Lv(Q,J,ae,ze);return ce==="end"?Ce=D2(Ce-Q.height+ae.height):ce==="center"&&(Ce=D2(Ce-Q.height/2+ae.height/2)),we&&(Ce+=we),{top:Ce,behavior:ye}})),n);const Se=pa(Wt(q,Ai(K=>K.offsetBottom+K.bottom)),0);return Ni(Wt(k,Ai(K=>({width:K.visibleWidth,height:K.visibleHeight}))),Z),{data:L,totalCount:I,viewportDimensions:Z,itemDimensions:X,scrollTop:s,scrollHeight:V,overscan:i,increaseViewportBy:r,scrollBy:u,scrollTo:n,scrollToIndex:O,smoothScrollTargetReached:p,windowViewportRect:k,windowScrollTo:D,useWindowScroll:S,customScrollParent:x,windowScrollContainerState:P,deviation:$,scrollContainerState:m,footerHeight:g,headerHeight:v,initialItemCount:N,gap:R,restoreStateFrom:U,...C,initialTopMostItemIndex:H,horizontalDirection:de,gridState:q,totalListHeight:Se,...y,startReached:Ee,endReached:oe,rangeChanged:xe,stateChanged:G,propsReady:_,stateRestoreInProgress:B,...T}},Ar(d1,xa,Uf,t3,Ac,h1,kc));function z2(i,e,t,r){const{height:s}=t;if(s===void 0||r.length===0)return{top:0,bottom:0};const l=Lv(i,e,t,r[0].index),u=Lv(i,e,t,r[r.length-1].index)+s;return{top:l,bottom:u}}function Lv(i,e,t,r){const s=h3(i.width,t.width,e.column),l=oy(r/s),u=l*t.height+Bp(0,l-1)*e.row;return u>0?u+e.row:u}function h3(i,e,t){return Bp(1,oy((i+t)/(oy(e)+t)))}const lF=er(()=>{const i=ci(v=>`Item ${v}`),e=ci({}),t=ci(null),r=ci("virtuoso-grid-item"),s=ci("virtuoso-grid-list"),l=ci(l3),u=ci("div"),n=ci(yh),p=(v,y=null)=>pa(Wt(e,Ai(C=>C[v]),Sr()),y),m=ci(!1),g=ci(!1);return Ni(hn(g),m),{readyStateChanged:m,reportReadyState:g,context:t,itemContent:i,components:e,computeItemKey:l,itemClassName:r,listClassName:s,headerFooterTag:u,scrollerRef:n,FooterComponent:p("Footer"),HeaderComponent:p("Header"),ListComponent:p("List","div"),ItemComponent:p("Item","div"),ScrollerComponent:p("Scroller","div"),ScrollSeekPlaceholder:p("ScrollSeekPlaceholder","div")}}),cF=er(([i,e])=>({...i,...e}),Ar(oF,lF)),uF=Ae.memo(function(){const e=Pr("gridState"),t=Pr("listClassName"),r=Pr("itemClassName"),s=Pr("itemContent"),l=Pr("computeItemKey"),u=Pr("isSeeking"),n=to("scrollHeight"),p=Pr("ItemComponent"),m=Pr("ListComponent"),g=Pr("ScrollSeekPlaceholder"),v=Pr("context"),y=to("itemDimensions"),C=to("gap"),_=Pr("log"),w=Pr("stateRestoreInProgress"),k=to("reportReadyState"),S=Bu(Ae.useMemo(()=>x=>{const P=x.parentElement.parentElement.scrollHeight;n(P);const D=x.firstChild;if(D){const{width:T,height:I}=D.getBoundingClientRect();y({width:T,height:I})}C({row:N2("row-gap",getComputedStyle(x).rowGap,_),column:N2("column-gap",getComputedStyle(x).columnGap,_)})},[n,y,C,_]),!0,!1);return BE(()=>{e.itemHeight>0&&e.itemWidth>0&&k(!0)},[e]),w?null:he.jsx(m,{ref:S,className:t,...ha(m,v),style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom},"data-testid":"virtuoso-item-list",children:e.items.map(x=>{const P=l(x.index,x.data,v);return u?he.jsx(g,{...ha(g,v),index:x.index,height:e.itemHeight,width:e.itemWidth},P):Ue.createElement(p,{...ha(p,v),className:r,"data-index":x.index,key:P},s(x.index,x.data,v))})})}),dF=Ae.memo(function(){const e=Pr("HeaderComponent"),t=to("headerHeight"),r=Pr("headerFooterTag"),s=Bu(Ae.useMemo(()=>u=>t(vc(u,"height")),[t]),!0,!1),l=Pr("context");return e?he.jsx(r,{ref:s,children:he.jsx(e,{...ha(e,l)})}):null}),hF=Ae.memo(function(){const e=Pr("FooterComponent"),t=to("footerHeight"),r=Pr("headerFooterTag"),s=Bu(Ae.useMemo(()=>u=>t(vc(u,"height")),[t]),!0,!1),l=Pr("context");return e?he.jsx(r,{ref:s,children:he.jsx(e,{...ha(e,l)})}):null}),pF=({children:i})=>{const e=Ae.useContext(o3),t=to("itemDimensions"),r=to("viewportDimensions"),s=Bu(Ae.useMemo(()=>l=>{r(l.getBoundingClientRect())},[r]),!0,!1);return Ae.useEffect(()=>{e&&(r({height:e.viewportHeight,width:e.viewportWidth}),t({height:e.itemHeight,width:e.itemWidth}))},[e,r,t]),he.jsx("div",{style:tx(!1),ref:s,children:i})},fF=({children:i})=>{const e=Ae.useContext(o3),t=to("windowViewportRect"),r=to("itemDimensions"),s=Pr("customScrollParent"),l=s3(t,s,!1);return Ae.useEffect(()=>{e&&(r({height:e.itemHeight,width:e.itemWidth}),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:e.viewportWidth}))},[e,t,r]),he.jsx("div",{ref:l,style:tx(!1),children:i})},mF=Ae.memo(function({...e}){const t=Pr("useWindowScroll"),r=Pr("customScrollParent"),s=r||t?yF:gF,l=r||t?fF:pF;return he.jsx(s,{...e,children:he.jsxs(l,{children:[he.jsx(dF,{}),he.jsx(uF,{}),he.jsx(hF,{})]})})}),{Component:jW,usePublisher:to,useEmitterValue:Pr,useEmitter:p3}=FE(cF,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},mF),gF=u3({usePublisher:to,useEmitterValue:Pr,useEmitter:p3}),yF=d3({usePublisher:to,useEmitterValue:Pr,useEmitter:p3});function N2(i,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${i} was not resolved to pixel value correctly`,e,Ga.WARN),e==="normal"?0:parseInt(e??"0",10)}const xF=i=>{let{evaluationPerOrgUnits:e,useVirtuoso:t=!0,useVirtuosoWindowScroll:r=!1}=i;function s(){return l=>{const u=e[l];return u&&Ae.createElement("div",{key:u.orgUnitId},Ae.createElement(g2,{orgUnitsData:u}))}}return t?Ae.createElement("div",null,Ae.createElement(nF,{style:{height:"60vh"},useWindowScroll:r,totalCount:e.length,itemContent:s()})):Ae.createElement(Ae.Fragment,null,e.map((l,u)=>Ae.createElement(g2,{orgUnitsData:l})))},vF=i=>{let{splitPeriods:e,setSelectedSplitPeriod:t,selectedSplitPeriod:r}=i;return e.includes(r)?Ae.createElement("div",null,Ae.createElement("div",null,Ae.createElement(us,{selected:r,onChange:s=>t(s.selected)},e.map((s,l)=>Ae.createElement(yo,{key:l,label:LE(s),value:s}))))):Ae.createElement(Ae.Fragment,null)},bF="_orgUnitsSelction_1ir4t_1",_F="_wrapper_1ir4t_7",wF="_filterCheckbox_1ir4t_14",CF="_filter_1ir4t_14",TF="_plots_1ir4t_25",SF="_searchInput_1ir4t_29",EF="_filterTitle_1ir4t_34",au={orgUnitsSelction:bF,wrapper:_F,filterCheckbox:wF,filter:CF,plots:TF,searchInput:SF,filterTitle:EF},kF=i=>{var e;let{evaluationName:t,modelName:r,evaluations:s,splitPeriods:l}=i;const[u,n]=Ue.useState([]),[p,m]=Ue.useState(),[g,v]=Ue.useState([]),[y,C]=Ue.useState([]),[_,w]=Ue.useState(l[0]);Ue.useEffect(()=>{const S=s[0];v(S.evaluation.map(x=>x.orgUnitId)),C(S.evaluation.map(x=>({name:x.orgUnitName,id:x.orgUnitId}))),w(S.splitPoint),n(S.evaluation)},[s,l]),Ue.useEffect(()=>{const S=s.find(P=>P.splitPoint===_),x=g==null?void 0:g.map(P=>S.evaluation.find(D=>D.orgUnitId===P&&D.orgUnitName.toLocaleLowerCase().includes(p?p.toLocaleLowerCase():"")));n(x)},[_,g,p]);const k=S=>{const x=S.checked?[...g,S.value]:g.filter(P=>P!==S.value);v(x)};return Ae.createElement(Ae.Fragment,null,Ae.createElement("div",{className:au.wrapper},Ae.createElement("div",{className:au.filter},Ae.createElement("div",null,Ae.createElement("h2",null,"Evaluation: ",t)),Ae.createElement("div",null,Ae.createElement("div",{className:au.filterTitle},"Split period:"),Ae.createElement(vF,{splitPeriods:l,setSelectedSplitPeriod:w,selectedSplitPeriod:_})),Ae.createElement("div",null,Ae.createElement("div",{className:au.filterTitle},"Organization units:"),Ae.createElement("div",{className:au.filterCheckbox},y.map((S,x)=>Ae.createElement(Ay,{checked:g.filter(P=>P==S.id).length>0,onChange:k,label:S.name,key:S.id,value:S.id}))))),Ae.createElement("div",{className:au.plots},Ae.createElement("div",null,Ae.createElement("h3",null,"Model: ",r)),Ae.createElement("div",{className:au.searchInput},Ae.createElement(bf,{label:"Search for organization units:",placeholder:((e=y[0])===null||e===void 0?void 0:e.name)+"..",onChange:S=>m(S.value),value:p})),Ae.createElement(xF,{evaluationPerOrgUnits:u,useVirtuoso:!0}))))},AF="_table_11vie_1",MF="_quantile_low_11vie_22",PF="_quantile_high_11vie_26",IF={table:AF,quantile_low:MF,quantile_high:PF},O2=i=>[...new Set(i.map(e=>e.period))],DF=i=>[...new Set(i.map(e=>e.orgUnit))],RF=i=>[...new Set(i.map(e=>e.dataElement))],LF=(i,e)=>{var t;return(t=e.find(r=>r.orgUnit===i))===null||t===void 0?void 0:t.displayName},zF=i=>{let{data:e}=i;const t=e.dataValues;return Ae.createElement(Ae.Fragment,null,DF(t).map(r=>Ae.createElement("div",{key:r},Ae.createElement("h3",null,it.t("Prediction for {{orgUnitName}}",{orgUnitName:LF(r,t)})),Ae.createElement("table",{className:IF.table},Ae.createElement("thead",null,Ae.createElement("tr",null,Ae.createElement("th",null,"Quantiles"),O2(t).map(s=>Ae.createElement("th",{key:s},e1({periodId:s,calendar:"gregory"}).displayName)))),Ae.createElement("tbody",null,RF(t).map(s=>Ae.createElement("tr",{key:s},Ae.createElement("td",null,s.replaceAll("_"," ")),O2(t).map(l=>Ae.createElement("td",{key:l},t.filter(u=>u.dataElement===s&&u.orgUnit===r&&u.period===l)[0].value)))))))))};var NF={exports:{}};(function(i,e){(function(t,r){i.exports=r()})(Fa,function(){var t,r,s;function l(n,p){if(!t)t=p;else if(!r)r=p;else{var m="var sharedChunk = {}; ("+t+")(sharedChunk); ("+r+")(sharedChunk);",g={};t(g),s=p(g),typeof window<"u"&&(s.workerUrl=window.URL.createObjectURL(new Blob([m],{type:"text/javascript"})))}}l(["exports"],function(n){var p=m;function m(c,a,d,f){this.cx=3*c,this.bx=3*(d-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(f-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=a,this.p2x=d,this.p2y=f}function g(c,a,d,f){const A=new p(c,a,d,f);return function(z){return A.solve(z)}}m.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,a){if(a===void 0&&(a=1e-6),c<0)return 0;if(c>1)return 1;for(var d=c,f=0;f<8;f++){var A=this.sampleCurveX(d)-c;if(Math.abs(A)<a)return d;var z=this.sampleCurveDerivativeX(d);if(Math.abs(z)<1e-6)break;d-=A/z}var F=0,te=1;for(d=c,f=0;f<20&&(A=this.sampleCurveX(d),!(Math.abs(A-c)<a));f++)c>A?F=d:te=d,d=.5*(te-F)+F;return d},solve:function(c,a){return this.sampleCurveY(this.solveCurveX(c,a))}};const v=g(.25,.1,.25,1);function y(c,a,d){return Math.min(d,Math.max(a,c))}function C(c,a,d){const f=d-a,A=((c-a)%f+f)%f+a;return A===a?d:A}function _(c,...a){for(const d of a)for(const f in d)c[f]=d[f];return c}let w=1;function k(c,a){c.forEach(d=>{a[d]&&(a[d]=a[d].bind(a))})}function S(c,a,d){const f={};for(const A in c)f[A]=a.call(d||this,c[A],A,c);return f}function x(c,a,d){const f={};for(const A in c)a.call(d||this,c[A],A,c)&&(f[A]=c[A]);return f}function P(c){return Array.isArray(c)?c.map(P):typeof c=="object"&&c?S(c,P):c}const D={};function T(c){D[c]||(typeof console<"u"&&console.warn(c),D[c]=!0)}function I(c,a,d){return(d.y-c.y)*(a.x-c.x)>(a.y-c.y)*(d.x-c.x)}function N(c){let a=0;for(let d,f,A=0,z=c.length,F=z-1;A<z;F=A++)d=c[A],f=c[F],a+=(f.x-d.x)*(d.y+f.y);return a}function q(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Z(c){const a={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(d,f,A,z)=>{const F=A||z;return a[f]=!F||F.toLowerCase(),""}),a["max-age"]){const d=parseInt(a["max-age"],10);isNaN(d)?delete a["max-age"]:a["max-age"]=d}return a}let X,O,V=null;function $(c){if(V==null){const a=c.navigator?c.navigator.userAgent:null;V=!!c.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return V}function L(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const R={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(c){const a=requestAnimationFrame(c);return{cancel:()=>cancelAnimationFrame(a)}},getImageData(c,a=0){const d=window.document.createElement("canvas"),f=d.getContext("2d");if(!f)throw new Error("failed to create canvas 2d context");return d.width=c.width,d.height=c.height,f.drawImage(c,0,0,c.width,c.height),f.getImageData(-a,-a,c.width+2*a,c.height+2*a)},resolveURL:c=>(X||(X=document.createElement("a")),X.href=c,X.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(O==null&&(O=matchMedia("(prefers-reduced-motion: reduce)")),O.matches)}};var G=U;function U(c,a){this.x=c,this.y=a}U.prototype={clone:function(){return new U(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,a){return this.clone()._rotateAround(c,a)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var a=c.x-this.x,d=c.y-this.y;return a*a+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,a){return Math.atan2(this.x*a-this.y*c,this.x*c+this.y*a)},_matMult:function(c){var a=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=a,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var a=Math.cos(c),d=Math.sin(c),f=d*this.x+a*this.y;return this.x=a*this.x-d*this.y,this.y=f,this},_rotateAround:function(c,a){var d=Math.cos(c),f=Math.sin(c),A=a.y+f*(this.x-a.x)+d*(this.y-a.y);return this.x=a.x+d*(this.x-a.x)-f*(this.y-a.y),this.y=A,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},U.convert=function(c){return c instanceof U?c:Array.isArray(c)?new U(c[0],c[1]):c};const B={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},H="mapbox-tiles";let W,re=500,de=50;function ie(){typeof caches>"u"||W||(W=caches.open(H))}let oe=1/0;const Ee={supported:!1,testSupport:function(c){!K&&Se&&(Q?ae(c):xe=c)}};let xe,Se,K=!1,Q=!1;function ae(c){const a=c.createTexture();c.bindTexture(c.TEXTURE_2D,a);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,Se),c.isContextLost())return;Ee.supported=!0}catch{}c.deleteTexture(a),K=!0}typeof document<"u"&&(Se=document.createElement("img"),Se.onload=function(){xe&&ae(xe),xe=null,Q=!0},Se.onerror=function(){K=!0,xe=null},Se.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const _e={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(_e);class J extends Error{constructor(a,d,f,A){super(`AJAXError: ${d} (${a}): ${f}`),this.status=a,this.statusText=d,this.url=f,this.body=A}}const ne=q()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function ce(c,a){const d=new AbortController,f=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:ne(),signal:d.signal});let A=!1,z=!1;return c.type==="json"&&f.headers.set("Accept","application/json"),((F,te,se)=>{z||fetch(f).then(be=>be.ok?((Re,Oe,Ve)=>{(c.type==="arrayBuffer"?Re.arrayBuffer():c.type==="json"?Re.json():Re.text()).then(Ye=>{z||(A=!0,a(null,Ye,Re.headers.get("Cache-Control"),Re.headers.get("Expires")))}).catch(Ye=>{z||a(new Error(Ye.message))})})(be):be.blob().then(Re=>a(new J(be.status,be.statusText,c.url,Re)))).catch(be=>{be.code!==20&&a(new Error(be.message))})})(),{cancel:()=>{z=!0,A||d.abort()}}}const ye=function(c,a){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){if(q()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,a);if(!q()){const f=c.url.substring(0,c.url.indexOf("://"));return(B.REGISTERED_PROTOCOLS[f]||ce)(c,a)}}if(!(/^file:/.test(d=c.url)||/^file:/.test(ne())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ce(c,a);if(q()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,a,void 0,!0)}var d;return function(f,A){const z=new XMLHttpRequest;z.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(z.responseType="arraybuffer");for(const F in f.headers)z.setRequestHeader(F,f.headers[F]);return f.type==="json"&&(z.responseType="text",z.setRequestHeader("Accept","application/json")),z.withCredentials=f.credentials==="include",z.onerror=()=>{A(new Error(z.statusText))},z.onload=()=>{if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){let F=z.response;if(f.type==="json")try{F=JSON.parse(z.response)}catch(te){return A(te)}A(null,F,z.getResponseHeader("Cache-Control"),z.getResponseHeader("Expires"))}else{const F=new Blob([z.response],{type:z.getResponseHeader("Content-Type")});A(new J(z.status,z.statusText,f.url,F))}},z.send(f.body),{cancel:()=>z.abort()}}(c,a)},we=function(c,a){return ye(_(c,{type:"arrayBuffer"}),a)};function ze(c){const a=window.document.createElement("a");return a.href=c,a.protocol===window.document.location.protocol&&a.host===window.document.location.host}const Ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ie,Fe;Ie=[],Fe=0;const Ge=function(c,a){if(Ee.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),Fe>=B.MAX_PARALLEL_IMAGE_REQUESTS){const z={requestParameters:c,callback:a,cancelled:!1,cancel(){this.cancelled=!0}};return Ie.push(z),z}Fe++;let d=!1;const f=()=>{if(!d)for(d=!0,Fe--;Ie.length&&Fe<B.MAX_PARALLEL_IMAGE_REQUESTS;){const z=Ie.shift(),{requestParameters:F,callback:te,cancelled:se}=z;se||(z.cancel=Ge(F,te).cancel)}},A=we(c,(z,F,te,se)=>{f(),z?a(z):F&&function(be,Re){typeof createImageBitmap=="function"?function(Oe,Ve){const Ye=new Blob([new Uint8Array(Oe)],{type:"image/png"});createImageBitmap(Ye).then(Ze=>{Ve(null,Ze)}).catch(Ze=>{Ve(new Error(`Could not load image because of ${Ze.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(be,Re):function(Oe,Ve){const Ye=new Image;Ye.onload=()=>{Ve(null,Ye),URL.revokeObjectURL(Ye.src),Ye.onload=null,window.requestAnimationFrame(()=>{Ye.src=Ce})},Ye.onerror=()=>Ve(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Ze=new Blob([new Uint8Array(Oe)],{type:"image/png"});Ye.src=Oe.byteLength?URL.createObjectURL(Ze):Ce}(be,Re)}(F,(be,Re)=>{be!=null?a(be):Re!=null&&a(null,Re,{cacheControl:te,expires:se})})});return{cancel:()=>{A.cancel(),f()}}};function ke(c,a,d){d[c]&&d[c].indexOf(a)!==-1||(d[c]=d[c]||[],d[c].push(a))}function ge(c,a,d){if(d&&d[c]){const f=d[c].indexOf(a);f!==-1&&d[c].splice(f,1)}}class fe{constructor(a,d={}){_(this,d),this.type=a}}class Me extends fe{constructor(a,d={}){super("error",_({error:a},d))}}class De{on(a,d){return this._listeners=this._listeners||{},ke(a,d,this._listeners),this}off(a,d){return ge(a,d,this._listeners),ge(a,d,this._oneTimeListeners),this}once(a,d){return this._oneTimeListeners=this._oneTimeListeners||{},ke(a,d,this._oneTimeListeners),this}fire(a,d){typeof a=="string"&&(a=new fe(a,d||{}));const f=a.type;if(this.listens(f)){a.target=this;const A=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const te of A)te.call(this,a);const z=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const te of z)ge(f,te,this._oneTimeListeners),te.call(this,a);const F=this._eventedParent;F&&(_(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),F.fire(a))}else a instanceof Me&&console.error(a.error);return this}listens(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)}setEventedParent(a,d){return this._eventedParent=a,this._eventedParentData=d,this}}var Pe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class je{constructor(a,d,f,A){this.message=(a?`${a}: `:"")+f,A&&(this.identifier=A),d!=null&&d.__line__&&(this.line=d.__line__)}}function Xe(c){const a=c.value;return a?[new je(c.key,a,"constants have been deprecated as of v8")]:[]}function et(c,...a){for(const d of a)for(const f in d)c[f]=d[f];return c}function nt(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function ht(c){if(Array.isArray(c))return c.map(ht);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const a={};for(const d in c)a[d]=ht(c[d]);return a}return nt(c)}class gt extends Error{constructor(a,d){super(d),this.message=d,this.key=a}}class wt{constructor(a,d=[]){this.parent=a,this.bindings={};for(const[f,A]of d)this.bindings[f]=A}concat(a){return new wt(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const Rt={kind:"null"},ft={kind:"number"},St={kind:"string"},Ct={kind:"boolean"},si={kind:"color"},di={kind:"object"},Ht={kind:"value"},cn={kind:"collator"},Zi={kind:"formatted"},xn={kind:"padding"},jn={kind:"resolvedImage"};function nn(c,a){return{kind:"array",itemType:c,N:a}}function dt(c){if(c.kind==="array"){const a=dt(c.itemType);return typeof c.N=="number"?`array<${a}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${a}>`}return c.kind}const vt=[Rt,ft,St,Ct,si,Zi,di,nn(Ht),xn,jn];function Pt(c,a){if(a.kind==="error")return null;if(c.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!Pt(c.itemType,a.itemType))&&(typeof c.N!="number"||c.N===a.N))return null}else{if(c.kind===a.kind)return null;if(c.kind==="value"){for(const d of vt)if(!Pt(d,a))return null}}return`Expected ${dt(c)} but found ${dt(a)} instead.`}function Ft(c,a){return a.some(d=>d.kind===c.kind)}function qt(c,a){return a.some(d=>d==="null"?c===null:d==="array"?Array.isArray(c):d==="object"?c&&!Array.isArray(c)&&typeof c=="object":d===typeof c)}var vi,Oi={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function hi(c){return(c=Math.round(c))<0?0:c>255?255:c}function He(c){return hi(c[c.length-1]==="%"?parseFloat(c)/100*255:parseInt(c))}function ve(c){return(a=c[c.length-1]==="%"?parseFloat(c)/100:parseFloat(c))<0?0:a>1?1:a;var a}function Le(c,a,d){return d<0?d+=1:d>1&&(d-=1),6*d<1?c+(a-c)*d*6:2*d<1?a:3*d<2?c+(a-c)*(2/3-d)*6:c}try{vi={}.parseCSSColor=function(c){var a,d=c.replace(/ /g,"").toLowerCase();if(d in Oi)return Oi[d].slice();if(d[0]==="#")return d.length===4?(a=parseInt(d.substr(1),16))>=0&&a<=4095?[(3840&a)>>4|(3840&a)>>8,240&a|(240&a)>>4,15&a|(15&a)<<4,1]:null:d.length===7&&(a=parseInt(d.substr(1),16))>=0&&a<=16777215?[(16711680&a)>>16,(65280&a)>>8,255&a,1]:null;var f=d.indexOf("("),A=d.indexOf(")");if(f!==-1&&A+1===d.length){var z=d.substr(0,f),F=d.substr(f+1,A-(f+1)).split(","),te=1;switch(z){case"rgba":if(F.length!==4)return null;te=ve(F.pop());case"rgb":return F.length!==3?null:[He(F[0]),He(F[1]),He(F[2]),te];case"hsla":if(F.length!==4)return null;te=ve(F.pop());case"hsl":if(F.length!==3)return null;var se=(parseFloat(F[0])%360+360)%360/360,be=ve(F[1]),Re=ve(F[2]),Oe=Re<=.5?Re*(be+1):Re+be-Re*be,Ve=2*Re-Oe;return[hi(255*Le(Ve,Oe,se+1/3)),hi(255*Le(Ve,Oe,se)),hi(255*Le(Ve,Oe,se-1/3)),te];default:return null}}return null}}catch{}class $e{constructor(a,d,f,A=1){this.r=a,this.g=d,this.b=f,this.a=A}static parse(a){if(!a)return;if(a instanceof $e)return a;if(typeof a!="string")return;const d=vi(a);return d?new $e(d[0]/255*d[3],d[1]/255*d[3],d[2]/255*d[3],d[3]):void 0}toString(){const[a,d,f,A]=this.toArray();return`rgba(${Math.round(a)},${Math.round(d)},${Math.round(f)},${A})`}toArray(){const{r:a,g:d,b:f,a:A}=this;return A===0?[0,0,0,0]:[255*a/A,255*d/A,255*f/A,A]}}$e.black=new $e(0,0,0,1),$e.white=new $e(1,1,1,1),$e.transparent=new $e(0,0,0,0),$e.red=new $e(1,0,0,1);class Ke{constructor(a,d,f){this.sensitivity=a?d?"variant":"case":d?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,d){return this.collator.compare(a,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class st{constructor(a,d,f,A,z){this.text=a,this.image=d,this.scale=f,this.fontStack=A,this.textColor=z}}class ct{constructor(a){this.sections=a}static fromString(a){return new ct([new st(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(a=>a.text.length!==0||a.image&&a.image.name.length!==0)}static factory(a){return a instanceof ct?a:ct.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map(a=>a.text).join("")}}class ot{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof ot)return a;if(typeof a=="number")return new ot([a,a,a,a]);if(Array.isArray(a)&&!(a.length<1||a.length>4)){for(const d of a)if(typeof d!="number")return;switch(a.length){case 1:a=[a[0],a[0],a[0],a[0]];break;case 2:a=[a[0],a[1],a[0],a[1]];break;case 3:a=[a[0],a[1],a[2],a[1]]}return new ot(a)}}toString(){return JSON.stringify(this.values)}}class rt{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new rt({name:a,available:!1}):null}}function mt(c,a,d,f){return typeof c=="number"&&c>=0&&c<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof d=="number"&&d>=0&&d<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[c,a,d,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[c,a,d,f]:[c,a,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function kt(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof $e||c instanceof Ke||c instanceof ct||c instanceof ot||c instanceof rt)return!0;if(Array.isArray(c)){for(const a of c)if(!kt(a))return!1;return!0}if(typeof c=="object"){for(const a in c)if(!kt(c[a]))return!1;return!0}return!1}function zt(c){if(c===null)return Rt;if(typeof c=="string")return St;if(typeof c=="boolean")return Ct;if(typeof c=="number")return ft;if(c instanceof $e)return si;if(c instanceof Ke)return cn;if(c instanceof ct)return Zi;if(c instanceof ot)return xn;if(c instanceof rt)return jn;if(Array.isArray(c)){const a=c.length;let d;for(const f of c){const A=zt(f);if(d){if(d===A)continue;d=Ht;break}d=A}return nn(d||Ht,a)}return di}function Dt(c){const a=typeof c;return c===null?"":a==="string"||a==="number"||a==="boolean"?String(c):c instanceof $e||c instanceof ct||c instanceof ot||c instanceof rt?c.toString():JSON.stringify(c)}class oi{constructor(a,d){this.type=a,this.value=d}static parse(a,d){if(a.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!kt(a[1]))return d.error("invalid value");const f=a[1];let A=zt(f);const z=d.expectedType;return A.kind!=="array"||A.N!==0||!z||z.kind!=="array"||typeof z.N=="number"&&z.N!==0||(A=z),new oi(A,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Kt{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}const pi={string:St,number:ft,boolean:Ct,object:di};class bi{constructor(a,d){this.type=a,this.args=d}static parse(a,d){if(a.length<2)return d.error("Expected at least one argument.");let f,A=1;const z=a[0];if(z==="array"){let te,se;if(a.length>2){const be=a[1];if(typeof be!="string"||!(be in pi)||be==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);te=pi[be],A++}else te=Ht;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return d.error('The length argument to "array" must be a positive integer literal',2);se=a[2],A++}f=nn(te,se)}else{if(!pi[z])throw new Error(`Types doesn't contain name = ${z}`);f=pi[z]}const F=[];for(;A<a.length;A++){const te=d.parse(a[A],A,Ht);if(!te)return null;F.push(te)}return new bi(f,F)}evaluate(a){for(let d=0;d<this.args.length;d++){const f=this.args[d].evaluate(a);if(!Pt(this.type,zt(f)))return f;if(d===this.args.length-1)throw new Kt(`Expected value to be of type ${dt(this.type)}, but found ${dt(zt(f))} instead.`)}throw new Error}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const Bi={"to-boolean":Ct,"to-color":si,"to-number":ft,"to-string":St};class _i{constructor(a,d){this.type=a,this.args=d}static parse(a,d){if(a.length<2)return d.error("Expected at least one argument.");const f=a[0];if(!Bi[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&a.length!==2)return d.error("Expected one argument.");const A=Bi[f],z=[];for(let F=1;F<a.length;F++){const te=d.parse(a[F],F,Ht);if(!te)return null;z.push(te)}return new _i(A,z)}evaluate(a){if(this.type.kind==="boolean")return!!this.args[0].evaluate(a);if(this.type.kind==="color"){let d,f;for(const A of this.args){if(d=A.evaluate(a),f=null,d instanceof $e)return d;if(typeof d=="string"){const z=a.parseColor(d);if(z)return z}else if(Array.isArray(d)&&(f=d.length<3||d.length>4?`Invalid rbga value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:mt(d[0],d[1],d[2],d[3]),!f))return new $e(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new Kt(f||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}if(this.type.kind==="padding"){let d;for(const f of this.args){d=f.evaluate(a);const A=ot.parse(d);if(A)return A}throw new Kt(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}if(this.type.kind==="number"){let d=null;for(const f of this.args){if(d=f.evaluate(a),d===null)return 0;const A=Number(d);if(!isNaN(A))return A}throw new Kt(`Could not convert ${JSON.stringify(d)} to number.`)}return this.type.kind==="formatted"?ct.fromString(Dt(this.args[0].evaluate(a))):this.type.kind==="resolvedImage"?rt.fromString(Dt(this.args[0].evaluate(a))):Dt(this.args[0].evaluate(a))}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const Pi=["Unknown","Point","LineString","Polygon"];class $i{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Pi[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let d=this._parseColorCache[a];return d||(d=this._parseColorCache[a]=$e.parse(a)),d}}class ji{constructor(a,d,f,A){this.name=a,this.type=d,this._evaluate=f,this.args=A}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}static parse(a,d){const f=a[0],A=ji.definitions[f];if(!A)return d.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const z=Array.isArray(A)?A[0]:A.type,F=Array.isArray(A)?[[A[1],A[2]]]:A.overloads,te=F.filter(([be])=>!Array.isArray(be)||be.length===a.length-1);let se=null;for(const[be,Re]of te){se=new Hu(d.registry,d.path,null,d.scope);const Oe=[];let Ve=!1;for(let Ye=1;Ye<a.length;Ye++){const Ze=a[Ye],ut=Array.isArray(be)?be[Ye-1]:be.type,lt=se.parse(Ze,1+Oe.length,ut);if(!lt){Ve=!0;break}Oe.push(lt)}if(!Ve)if(Array.isArray(be)&&be.length!==Oe.length)se.error(`Expected ${be.length} arguments, but found ${Oe.length} instead.`);else{for(let Ye=0;Ye<Oe.length;Ye++){const Ze=Array.isArray(be)?be[Ye]:be.type,ut=Oe[Ye];se.concat(Ye+1).checkSubtype(Ze,ut.type)}if(se.errors.length===0)return new ji(f,z,Re,Oe)}}if(te.length===1)d.errors.push(...se.errors);else{const be=(te.length?te:F).map(([Oe])=>{return Ve=Oe,Array.isArray(Ve)?`(${Ve.map(dt).join(", ")})`:`(${dt(Ve.type)}...)`;var Ve}).join(" | "),Re=[];for(let Oe=1;Oe<a.length;Oe++){const Ve=d.parse(a[Oe],1+Re.length);if(!Ve)return null;Re.push(dt(Ve.type))}d.error(`Expected arguments of type ${be}, but found (${Re.join(", ")}) instead.`)}return null}static register(a,d){ji.definitions=d;for(const f in d)a[f]=ji}}class pn{constructor(a,d,f){this.type=cn,this.locale=f,this.caseSensitive=a,this.diacriticSensitive=d}static parse(a,d){if(a.length!==2)return d.error("Expected one argument.");const f=a[1];if(typeof f!="object"||Array.isArray(f))return d.error("Collator options argument must be an object.");const A=d.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Ct);if(!A)return null;const z=d.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Ct);if(!z)return null;let F=null;return f.locale&&(F=d.parse(f.locale,1,St),!F)?null:new pn(A,z,F)}evaluate(a){return new Ke(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}}const Hn=8192;function xr(c,a){c[0]=Math.min(c[0],a[0]),c[1]=Math.min(c[1],a[1]),c[2]=Math.max(c[2],a[0]),c[3]=Math.max(c[3],a[1])}function $r(c,a){return!(c[0]<=a[0]||c[2]>=a[2]||c[1]<=a[1]||c[3]>=a[3])}function xh(c,a){const d=(180+c[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,A=Math.pow(2,a.z);return[Math.round(d*A*Hn),Math.round(f*A*Hn)]}function Mc(c,a,d){const f=c[0]-a[0],A=c[1]-a[1],z=c[0]-d[0],F=c[1]-d[1];return f*F-z*A==0&&f*z<=0&&A*F<=0}function Fn(c,a){let d=!1;for(let F=0,te=a.length;F<te;F++){const se=a[F];for(let be=0,Re=se.length;be<Re-1;be++){if(Mc(c,se[be],se[be+1]))return!1;(A=se[be])[1]>(f=c)[1]!=(z=se[be+1])[1]>f[1]&&f[0]<(z[0]-A[0])*(f[1]-A[1])/(z[1]-A[1])+A[0]&&(d=!d)}}var f,A,z;return d}function sx(c,a){for(let d=0;d<a.length;d++)if(Fn(c,a[d]))return!0;return!1}function Uu(c,a,d,f){const A=f[0]-d[0],z=f[1]-d[1],F=(c[0]-d[0])*z-A*(c[1]-d[1]),te=(a[0]-d[0])*z-A*(a[1]-d[1]);return F>0&&te<0||F<0&&te>0}function ax(c,a,d){for(const be of d)for(let Re=0;Re<be.length-1;++Re)if((te=[(F=be[Re+1])[0]-(z=be[Re])[0],F[1]-z[1]])[0]*(se=[(A=a)[0]-(f=c)[0],A[1]-f[1]])[1]-te[1]*se[0]!=0&&Uu(f,A,z,F)&&Uu(z,F,f,A))return!0;var f,A,z,F,te,se;return!1}function vh(c,a){for(let d=0;d<c.length;++d)if(!Fn(c[d],a))return!1;for(let d=0;d<c.length-1;++d)if(ax(c[d],c[d+1],a))return!1;return!0}function qf(c,a){for(let d=0;d<a.length;d++)if(vh(c,a[d]))return!0;return!1}function bh(c,a,d){const f=[];for(let A=0;A<c.length;A++){const z=[];for(let F=0;F<c[A].length;F++){const te=xh(c[A][F],d);xr(a,te),z.push(te)}f.push(z)}return f}function _h(c,a,d){const f=[];for(let A=0;A<c.length;A++){const z=bh(c[A],a,d);f.push(z)}return f}function wh(c,a,d,f){if(c[0]<d[0]||c[0]>d[2]){const A=.5*f;let z=c[0]-d[0]>A?-f:d[0]-c[0]>A?f:0;z===0&&(z=c[0]-d[2]>A?-f:d[2]-c[0]>A?f:0),c[0]+=z}xr(a,c)}function Yf(c,a,d,f){const A=Math.pow(2,f.z)*Hn,z=[f.x*Hn,f.y*Hn],F=[];for(const te of c)for(const se of te){const be=[se.x+z[0],se.y+z[1]];wh(be,a,d,A),F.push(be)}return F}function Zf(c,a,d,f){const A=Math.pow(2,f.z)*Hn,z=[f.x*Hn,f.y*Hn],F=[];for(const se of c){const be=[];for(const Re of se){const Oe=[Re.x+z[0],Re.y+z[1]];xr(a,Oe),be.push(Oe)}F.push(be)}if(a[2]-a[0]<=A/2){(te=a)[0]=te[1]=1/0,te[2]=te[3]=-1/0;for(const se of F)for(const be of se)wh(be,a,d,A)}var te;return F}class el{constructor(a,d){this.type=Ct,this.geojson=a,this.geometries=d}static parse(a,d){if(a.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(kt(a[1])){const f=a[1];if(f.type==="FeatureCollection")for(let A=0;A<f.features.length;++A){const z=f.features[A].geometry.type;if(z==="Polygon"||z==="MultiPolygon")return new el(f,f.features[A].geometry)}else if(f.type==="Feature"){const A=f.geometry.type;if(A==="Polygon"||A==="MultiPolygon")return new el(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new el(f,f)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(d,f){const A=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],F=d.canonicalID();if(f.type==="Polygon"){const te=bh(f.coordinates,z,F),se=Yf(d.geometry(),A,z,F);if(!$r(A,z))return!1;for(const be of se)if(!Fn(be,te))return!1}if(f.type==="MultiPolygon"){const te=_h(f.coordinates,z,F),se=Yf(d.geometry(),A,z,F);if(!$r(A,z))return!1;for(const be of se)if(!sx(be,te))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(d,f){const A=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],F=d.canonicalID();if(f.type==="Polygon"){const te=bh(f.coordinates,z,F),se=Zf(d.geometry(),A,z,F);if(!$r(A,z))return!1;for(const be of se)if(!vh(be,te))return!1}if(f.type==="MultiPolygon"){const te=_h(f.coordinates,z,F),se=Zf(d.geometry(),A,z,F);if(!$r(A,z))return!1;for(const be of se)if(!qf(be,te))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function Vu(c){if(c instanceof ji&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof el)return!1;let a=!0;return c.eachChild(d=>{a&&!Vu(d)&&(a=!1)}),a}function Dl(c){if(c instanceof ji&&c.name==="feature-state")return!1;let a=!0;return c.eachChild(d=>{a&&!Dl(d)&&(a=!1)}),a}function Pc(c,a){if(c instanceof ji&&a.indexOf(c.name)>=0)return!1;let d=!0;return c.eachChild(f=>{d&&!Pc(f,a)&&(d=!1)}),d}class Gu{constructor(a,d){this.type=d.type,this.name=a,this.boundExpression=d}static parse(a,d){if(a.length!==2||typeof a[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const f=a[1];return d.scope.has(f)?new Gu(f,d.scope.get(f)):d.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}}class Hu{constructor(a,d=[],f,A=new wt,z=[]){this.registry=a,this.path=d,this.key=d.map(F=>`[${F}]`).join(""),this.scope=A,this.errors=z,this.expectedType=f}parse(a,d,f,A,z={}){return d?this.concat(d,f,A)._parse(a,z):this._parse(a,z)}_parse(a,d){function f(A,z,F){return F==="assert"?new bi(z,[A]):F==="coerce"?new _i(z,[A]):A}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const A=a[0];if(typeof A!="string")return this.error(`Expression name must be a string, but found ${typeof A} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const z=this.registry[A];if(z){let F=z.parse(a,this);if(!F)return null;if(this.expectedType){const te=this.expectedType,se=F.type;if(te.kind!=="string"&&te.kind!=="number"&&te.kind!=="boolean"&&te.kind!=="object"&&te.kind!=="array"||se.kind!=="value")if(te.kind!=="color"&&te.kind!=="formatted"&&te.kind!=="resolvedImage"||se.kind!=="value"&&se.kind!=="string")if(te.kind!=="padding"||se.kind!=="value"&&se.kind!=="number"&&se.kind!=="array"){if(this.checkSubtype(te,se))return null}else F=f(F,te,d.typeAnnotation||"coerce");else F=f(F,te,d.typeAnnotation||"coerce");else F=f(F,te,d.typeAnnotation||"assert")}if(!(F instanceof oi)&&F.type.kind!=="resolvedImage"&&Ic(F)){const te=new $i;try{F=new oi(F.type,F.evaluate(te))}catch(se){return this.error(se.message),null}}return F}return this.error(`Unknown expression "${A}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,d,f){const A=typeof a=="number"?this.path.concat(a):this.path,z=f?this.scope.concat(f):this.scope;return new Hu(this.registry,A,d||null,z,this.errors)}error(a,...d){const f=`${this.key}${d.map(A=>`[${A}]`).join("")}`;this.errors.push(new gt(f,a))}checkSubtype(a,d){const f=Pt(a,d);return f&&this.error(f),f}}function Ic(c){if(c instanceof Gu)return Ic(c.boundExpression);if(c instanceof ji&&c.name==="error"||c instanceof pn||c instanceof el)return!1;const a=c instanceof _i||c instanceof bi;let d=!0;return c.eachChild(f=>{d=a?d&&Ic(f):d&&f instanceof oi}),!!d&&Vu(c)&&Pc(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Wu(c,a){const d=c.length-1;let f,A,z=0,F=d,te=0;for(;z<=F;)if(te=Math.floor((z+F)/2),f=c[te],A=c[te+1],f<=a){if(te===d||a<A)return te;z=te+1}else{if(!(f>a))throw new Kt("Input is not a number.");F=te-1}return 0}class Dc{constructor(a,d,f){this.type=a,this.input=d,this.labels=[],this.outputs=[];for(const[A,z]of f)this.labels.push(A),this.outputs.push(z)}static parse(a,d){if(a.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return d.error("Expected an even number of arguments.");const f=d.parse(a[1],1,ft);if(!f)return null;const A=[];let z=null;d.expectedType&&d.expectedType.kind!=="value"&&(z=d.expectedType);for(let F=1;F<a.length;F+=2){const te=F===1?-1/0:a[F],se=a[F+1],be=F,Re=F+1;if(typeof te!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',be);if(A.length&&A[A.length-1][0]>=te)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',be);const Oe=d.parse(se,Re,z);if(!Oe)return null;z=z||Oe.type,A.push([te,Oe])}return new Dc(z,f,A)}evaluate(a){const d=this.labels,f=this.outputs;if(d.length===1)return f[0].evaluate(a);const A=this.input.evaluate(a);if(A<=d[0])return f[0].evaluate(a);const z=d.length;return A>=d[z-1]?f[z-1].evaluate(a):f[Wu(d,A)].evaluate(a)}eachChild(a){a(this.input);for(const d of this.outputs)a(d)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function hr(c,a,d){return c*(1-d)+a*d}var Rc=Object.freeze({__proto__:null,number:hr,color:function(c,a,d){return new $e(hr(c.r,a.r,d),hr(c.g,a.g,d),hr(c.b,a.b,d),hr(c.a,a.a,d))},array:function(c,a,d){return c.map((f,A)=>hr(f,a[A],d))},padding:function(c,a,d){const f=c.values,A=a.values;return new ot([hr(f[0],A[0],d),hr(f[1],A[1],d),hr(f[2],A[2],d),hr(f[3],A[3],d)])}});const Ch=.95047,Xf=1.08883,Kf=4/29,qu=6/29,Th=3*qu*qu,ox=Math.PI/180,lx=180/Math.PI;function Sh(c){return c>.008856451679035631?Math.pow(c,1/3):c/Th+Kf}function Eh(c){return c>qu?c*c*c:Th*(c-Kf)}function kh(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function Ah(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Qf(c){const a=Ah(c.r),d=Ah(c.g),f=Ah(c.b),A=Sh((.4124564*a+.3575761*d+.1804375*f)/Ch),z=Sh((.2126729*a+.7151522*d+.072175*f)/1);return{l:116*z-16,a:500*(A-z),b:200*(z-Sh((.0193339*a+.119192*d+.9503041*f)/Xf)),alpha:c.a}}function In(c){let a=(c.l+16)/116,d=isNaN(c.a)?a:a+c.a/500,f=isNaN(c.b)?a:a-c.b/200;return a=1*Eh(a),d=Ch*Eh(d),f=Xf*Eh(f),new $e(kh(3.2404542*d-1.5371385*a-.4985314*f),kh(-.969266*d+1.8760108*a+.041556*f),kh(.0556434*d-.2040259*a+1.0572252*f),c.alpha)}function cx(c,a,d){const f=a-c;return c+d*(f>180||f<-180?f-360*Math.round(f/360):f)}const Lc={forward:Qf,reverse:In,interpolate:function(c,a,d){return{l:hr(c.l,a.l,d),a:hr(c.a,a.a,d),b:hr(c.b,a.b,d),alpha:hr(c.alpha,a.alpha,d)}}},zc={forward:function(c){const{l:a,a:d,b:f}=Qf(c),A=Math.atan2(f,d)*lx;return{h:A<0?A+360:A,c:Math.sqrt(d*d+f*f),l:a,alpha:c.a}},reverse:function(c){const a=c.h*ox,d=c.c;return In({l:c.l,a:Math.cos(a)*d,b:Math.sin(a)*d,alpha:c.alpha})},interpolate:function(c,a,d){return{h:cx(c.h,a.h,d),c:hr(c.c,a.c,d),l:hr(c.l,a.l,d),alpha:hr(c.alpha,a.alpha,d)}}};var Jf=Object.freeze({__proto__:null,lab:Lc,hcl:zc});class Ks{constructor(a,d,f,A,z){this.type=a,this.operator=d,this.interpolation=f,this.input=A,this.labels=[],this.outputs=[];for(const[F,te]of z)this.labels.push(F),this.outputs.push(te)}static interpolationFactor(a,d,f,A){let z=0;if(a.name==="exponential")z=Mh(d,a.base,f,A);else if(a.name==="linear")z=Mh(d,1,f,A);else if(a.name==="cubic-bezier"){const F=a.controlPoints;z=new p(F[0],F[1],F[2],F[3]).solve(Mh(d,1,f,A))}return z}static parse(a,d){let[f,A,z,...F]=a;if(!Array.isArray(A)||A.length===0)return d.error("Expected an interpolation type expression.",1);if(A[0]==="linear")A={name:"linear"};else if(A[0]==="exponential"){const be=A[1];if(typeof be!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);A={name:"exponential",base:be}}else{if(A[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(A[0])}`,1,0);{const be=A.slice(1);if(be.length!==4||be.some(Re=>typeof Re!="number"||Re<0||Re>1))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);A={name:"cubic-bezier",controlPoints:be}}}if(a.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(z=d.parse(z,2,ft),!z)return null;const te=[];let se=null;f==="interpolate-hcl"||f==="interpolate-lab"?se=si:d.expectedType&&d.expectedType.kind!=="value"&&(se=d.expectedType);for(let be=0;be<F.length;be+=2){const Re=F[be],Oe=F[be+1],Ve=be+3,Ye=be+4;if(typeof Re!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ve);if(te.length&&te[te.length-1][0]>=Re)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ve);const Ze=d.parse(Oe,Ye,se);if(!Ze)return null;se=se||Ze.type,te.push([Re,Ze])}return se.kind==="number"||se.kind==="color"||se.kind==="padding"||se.kind==="array"&&se.itemType.kind==="number"&&typeof se.N=="number"?new Ks(se,f,A,z,te):d.error(`Type ${dt(se)} is not interpolatable.`)}evaluate(a){const d=this.labels,f=this.outputs;if(d.length===1)return f[0].evaluate(a);const A=this.input.evaluate(a);if(A<=d[0])return f[0].evaluate(a);const z=d.length;if(A>=d[z-1])return f[z-1].evaluate(a);const F=Wu(d,A),te=Ks.interpolationFactor(this.interpolation,A,d[F],d[F+1]),se=f[F].evaluate(a),be=f[F+1].evaluate(a);return this.operator==="interpolate"?Rc[this.type.kind.toLowerCase()](se,be,te):this.operator==="interpolate-hcl"?zc.reverse(zc.interpolate(zc.forward(se),zc.forward(be),te)):Lc.reverse(Lc.interpolate(Lc.forward(se),Lc.forward(be),te))}eachChild(a){a(this.input);for(const d of this.outputs)a(d)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function Mh(c,a,d,f){const A=f-d,z=c-d;return A===0?0:a===1?z/A:(Math.pow(a,z)-1)/(Math.pow(a,A)-1)}class Yu{constructor(a,d){this.type=a,this.args=d}static parse(a,d){if(a.length<2)return d.error("Expectected at least one argument.");let f=null;const A=d.expectedType;A&&A.kind!=="value"&&(f=A);const z=[];for(const te of a.slice(1)){const se=d.parse(te,1+z.length,f,void 0,{typeAnnotation:"omit"});if(!se)return null;f=f||se.type,z.push(se)}if(!f)throw new Error("No output type");const F=A&&z.some(te=>Pt(A,te.type));return new Yu(F?Ht:f,z)}evaluate(a){let d,f=null,A=0;for(const z of this.args)if(A++,f=z.evaluate(a),f&&f instanceof rt&&!f.available&&(d||(d=f.name),f=null,A===this.args.length&&(f=d)),f!==null)break;return f}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}class Zu{constructor(a,d){this.type=d.type,this.bindings=[].concat(a),this.result=d}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const d of this.bindings)a(d[1]);a(this.result)}static parse(a,d){if(a.length<4)return d.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const f=[];for(let z=1;z<a.length-1;z+=2){const F=a[z];if(typeof F!="string")return d.error(`Expected string, but found ${typeof F} instead.`,z);if(/[^a-zA-Z0-9_]/.test(F))return d.error("Variable names must contain only alphanumeric characters or '_'.",z);const te=d.parse(a[z+1],z+1);if(!te)return null;f.push([F,te])}const A=d.parse(a[a.length-1],a.length-1,d.expectedType,f);return A?new Zu(f,A):null}outputDefined(){return this.result.outputDefined()}}class Ph{constructor(a,d,f){this.type=a,this.index=d,this.input=f}static parse(a,d){if(a.length!==3)return d.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const f=d.parse(a[1],1,ft),A=d.parse(a[2],2,nn(d.expectedType||Ht));return f&&A?new Ph(A.type.itemType,f,A):null}evaluate(a){const d=this.index.evaluate(a),f=this.input.evaluate(a);if(d<0)throw new Kt(`Array index out of bounds: ${d} < 0.`);if(d>=f.length)throw new Kt(`Array index out of bounds: ${d} > ${f.length-1}.`);if(d!==Math.floor(d))throw new Kt(`Array index must be an integer, but found ${d} instead.`);return f[d]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}}class Ih{constructor(a,d){this.type=Ct,this.needle=a,this.haystack=d}static parse(a,d){if(a.length!==3)return d.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const f=d.parse(a[1],1,Ht),A=d.parse(a[2],2,Ht);return f&&A?Ft(f.type,[Ct,St,ft,Rt,Ht])?new Ih(f,A):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${dt(f.type)} instead`):null}evaluate(a){const d=this.needle.evaluate(a),f=this.haystack.evaluate(a);if(!f)return!1;if(!qt(d,["boolean","string","number","null"]))throw new Kt(`Expected first argument to be of type boolean, string, number or null, but found ${dt(zt(d))} instead.`);if(!qt(f,["string","array"]))throw new Kt(`Expected second argument to be of type array or string, but found ${dt(zt(f))} instead.`);return f.indexOf(d)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}}class Xu{constructor(a,d,f){this.type=ft,this.needle=a,this.haystack=d,this.fromIndex=f}static parse(a,d){if(a.length<=2||a.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const f=d.parse(a[1],1,Ht),A=d.parse(a[2],2,Ht);if(!f||!A)return null;if(!Ft(f.type,[Ct,St,ft,Rt,Ht]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${dt(f.type)} instead`);if(a.length===4){const z=d.parse(a[3],3,ft);return z?new Xu(f,A,z):null}return new Xu(f,A)}evaluate(a){const d=this.needle.evaluate(a),f=this.haystack.evaluate(a);if(!qt(d,["boolean","string","number","null"]))throw new Kt(`Expected first argument to be of type boolean, string, number or null, but found ${dt(zt(d))} instead.`);if(!qt(f,["string","array"]))throw new Kt(`Expected second argument to be of type array or string, but found ${dt(zt(f))} instead.`);if(this.fromIndex){const A=this.fromIndex.evaluate(a);return f.indexOf(d,A)}return f.indexOf(d)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}}class Dh{constructor(a,d,f,A,z,F){this.inputType=a,this.type=d,this.input=f,this.cases=A,this.outputs=z,this.otherwise=F}static parse(a,d){if(a.length<5)return d.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return d.error("Expected an even number of arguments.");let f,A;d.expectedType&&d.expectedType.kind!=="value"&&(A=d.expectedType);const z={},F=[];for(let be=2;be<a.length-1;be+=2){let Re=a[be];const Oe=a[be+1];Array.isArray(Re)||(Re=[Re]);const Ve=d.concat(be);if(Re.length===0)return Ve.error("Expected at least one branch label.");for(const Ze of Re){if(typeof Ze!="number"&&typeof Ze!="string")return Ve.error("Branch labels must be numbers or strings.");if(typeof Ze=="number"&&Math.abs(Ze)>Number.MAX_SAFE_INTEGER)return Ve.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ze=="number"&&Math.floor(Ze)!==Ze)return Ve.error("Numeric branch labels must be integer values.");if(f){if(Ve.checkSubtype(f,zt(Ze)))return null}else f=zt(Ze);if(z[String(Ze)]!==void 0)return Ve.error("Branch labels must be unique.");z[String(Ze)]=F.length}const Ye=d.parse(Oe,be,A);if(!Ye)return null;A=A||Ye.type,F.push(Ye)}const te=d.parse(a[1],1,Ht);if(!te)return null;const se=d.parse(a[a.length-1],a.length-1,A);return se?te.type.kind!=="value"&&d.concat(1).checkSubtype(f,te.type)?null:new Dh(f,A,te,z,F,se):null}evaluate(a){const d=this.input.evaluate(a);return(zt(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}}class Rh{constructor(a,d,f){this.type=a,this.branches=d,this.otherwise=f}static parse(a,d){if(a.length<4)return d.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return d.error("Expected an odd number of arguments.");let f;d.expectedType&&d.expectedType.kind!=="value"&&(f=d.expectedType);const A=[];for(let F=1;F<a.length-1;F+=2){const te=d.parse(a[F],F,Ct);if(!te)return null;const se=d.parse(a[F+1],F+1,f);if(!se)return null;A.push([te,se]),f=f||se.type}const z=d.parse(a[a.length-1],a.length-1,f);if(!z)return null;if(!f)throw new Error("Can't infer output type");return new Rh(f,A,z)}evaluate(a){for(const[d,f]of this.branches)if(d.evaluate(a))return f.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[d,f]of this.branches)a(d),a(f);a(this.otherwise)}outputDefined(){return this.branches.every(([a,d])=>d.outputDefined())&&this.otherwise.outputDefined()}}class Ku{constructor(a,d,f,A){this.type=a,this.input=d,this.beginIndex=f,this.endIndex=A}static parse(a,d){if(a.length<=2||a.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const f=d.parse(a[1],1,Ht),A=d.parse(a[2],2,ft);if(!f||!A)return null;if(!Ft(f.type,[nn(Ht),St,Ht]))return d.error(`Expected first argument to be of type array or string, but found ${dt(f.type)} instead`);if(a.length===4){const z=d.parse(a[3],3,ft);return z?new Ku(f.type,f,A,z):null}return new Ku(f.type,f,A)}evaluate(a){const d=this.input.evaluate(a),f=this.beginIndex.evaluate(a);if(!qt(d,["string","array"]))throw new Kt(`Expected first argument to be of type array or string, but found ${dt(zt(d))} instead.`);if(this.endIndex){const A=this.endIndex.evaluate(a);return d.slice(f,A)}return d.slice(f)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}}function em(c,a){return c==="=="||c==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function tm(c,a,d,f){return f.compare(a,d)===0}function Rl(c,a,d){const f=c!=="=="&&c!=="!=";return class f3{constructor(z,F,te){this.type=Ct,this.lhs=z,this.rhs=F,this.collator=te,this.hasUntypedArgument=z.type.kind==="value"||F.type.kind==="value"}static parse(z,F){if(z.length!==3&&z.length!==4)return F.error("Expected two or three arguments.");const te=z[0];let se=F.parse(z[1],1,Ht);if(!se)return null;if(!em(te,se.type))return F.concat(1).error(`"${te}" comparisons are not supported for type '${dt(se.type)}'.`);let be=F.parse(z[2],2,Ht);if(!be)return null;if(!em(te,be.type))return F.concat(2).error(`"${te}" comparisons are not supported for type '${dt(be.type)}'.`);if(se.type.kind!==be.type.kind&&se.type.kind!=="value"&&be.type.kind!=="value")return F.error(`Cannot compare types '${dt(se.type)}' and '${dt(be.type)}'.`);f&&(se.type.kind==="value"&&be.type.kind!=="value"?se=new bi(be.type,[se]):se.type.kind!=="value"&&be.type.kind==="value"&&(be=new bi(se.type,[be])));let Re=null;if(z.length===4){if(se.type.kind!=="string"&&be.type.kind!=="string"&&se.type.kind!=="value"&&be.type.kind!=="value")return F.error("Cannot use collator to compare non-string types.");if(Re=F.parse(z[3],3,cn),!Re)return null}return new f3(se,be,Re)}evaluate(z){const F=this.lhs.evaluate(z),te=this.rhs.evaluate(z);if(f&&this.hasUntypedArgument){const se=zt(F),be=zt(te);if(se.kind!==be.kind||se.kind!=="string"&&se.kind!=="number")throw new Kt(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${se.kind}, ${be.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const se=zt(F),be=zt(te);if(se.kind!=="string"||be.kind!=="string")return a(z,F,te)}return this.collator?d(z,F,te,this.collator.evaluate(z)):a(z,F,te)}eachChild(z){z(this.lhs),z(this.rhs),this.collator&&z(this.collator)}outputDefined(){return!0}}}const ux=Rl("==",function(c,a,d){return a===d},tm),dx=Rl("!=",function(c,a,d){return a!==d},function(c,a,d,f){return!tm(0,a,d,f)}),hx=Rl("<",function(c,a,d){return a<d},function(c,a,d,f){return f.compare(a,d)<0}),px=Rl(">",function(c,a,d){return a>d},function(c,a,d,f){return f.compare(a,d)>0}),fx=Rl("<=",function(c,a,d){return a<=d},function(c,a,d,f){return f.compare(a,d)<=0}),mx=Rl(">=",function(c,a,d){return a>=d},function(c,a,d,f){return f.compare(a,d)>=0});class Lh{constructor(a,d,f,A,z){this.type=St,this.number=a,this.locale=d,this.currency=f,this.minFractionDigits=A,this.maxFractionDigits=z}static parse(a,d){if(a.length!==3)return d.error("Expected two arguments.");const f=d.parse(a[1],1,ft);if(!f)return null;const A=a[2];if(typeof A!="object"||Array.isArray(A))return d.error("NumberFormat options argument must be an object.");let z=null;if(A.locale&&(z=d.parse(A.locale,1,St),!z))return null;let F=null;if(A.currency&&(F=d.parse(A.currency,1,St),!F))return null;let te=null;if(A["min-fraction-digits"]&&(te=d.parse(A["min-fraction-digits"],1,ft),!te))return null;let se=null;return A["max-fraction-digits"]&&(se=d.parse(A["max-fraction-digits"],1,ft),!se)?null:new Lh(f,z,F,te,se)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}}class Qu{constructor(a){this.type=Zi,this.sections=a}static parse(a,d){if(a.length<2)return d.error("Expected at least one argument.");const f=a[1];if(!Array.isArray(f)&&typeof f=="object")return d.error("First argument must be an image or text section.");const A=[];let z=!1;for(let F=1;F<=a.length-1;++F){const te=a[F];if(z&&typeof te=="object"&&!Array.isArray(te)){z=!1;let se=null;if(te["font-scale"]&&(se=d.parse(te["font-scale"],1,ft),!se))return null;let be=null;if(te["text-font"]&&(be=d.parse(te["text-font"],1,nn(St)),!be))return null;let Re=null;if(te["text-color"]&&(Re=d.parse(te["text-color"],1,si),!Re))return null;const Oe=A[A.length-1];Oe.scale=se,Oe.font=be,Oe.textColor=Re}else{const se=d.parse(a[F],1,Ht);if(!se)return null;const be=se.type.kind;if(be!=="string"&&be!=="value"&&be!=="null"&&be!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");z=!0,A.push({content:se,scale:null,font:null,textColor:null})}}return new Qu(A)}evaluate(a){return new ct(this.sections.map(d=>{const f=d.content.evaluate(a);return zt(f)===jn?new st("",f,null,null,null):new st(Dt(f),null,d.scale?d.scale.evaluate(a):null,d.font?d.font.evaluate(a).join(","):null,d.textColor?d.textColor.evaluate(a):null)}))}eachChild(a){for(const d of this.sections)a(d.content),d.scale&&a(d.scale),d.font&&a(d.font),d.textColor&&a(d.textColor)}outputDefined(){return!1}}class zh{constructor(a){this.type=jn,this.input=a}static parse(a,d){if(a.length!==2)return d.error("Expected two arguments.");const f=d.parse(a[1],1,St);return f?new zh(f):d.error("No image name provided.")}evaluate(a){const d=this.input.evaluate(a),f=rt.fromString(d);return f&&a.availableImages&&(f.available=a.availableImages.indexOf(d)>-1),f}eachChild(a){a(this.input)}outputDefined(){return!1}}class Nh{constructor(a){this.type=ft,this.input=a}static parse(a,d){if(a.length!==2)return d.error(`Expected 1 argument, but found ${a.length-1} instead.`);const f=d.parse(a[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${dt(f.type)} instead.`):new Nh(f):null}evaluate(a){const d=this.input.evaluate(a);if(typeof d=="string"||Array.isArray(d))return d.length;throw new Kt(`Expected value to be of type string or array, but found ${dt(zt(d))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}}const Ll={"==":ux,"!=":dx,">":px,"<":hx,">=":mx,"<=":fx,array:bi,at:Ph,boolean:bi,case:Rh,coalesce:Yu,collator:pn,format:Qu,image:zh,in:Ih,"index-of":Xu,interpolate:Ks,"interpolate-hcl":Ks,"interpolate-lab":Ks,length:Nh,let:Zu,literal:oi,match:Dh,number:bi,"number-format":Lh,object:bi,slice:Ku,step:Dc,string:bi,"to-boolean":_i,"to-color":_i,"to-number":_i,"to-string":_i,var:Gu,within:el};function im(c,[a,d,f,A]){a=a.evaluate(c),d=d.evaluate(c),f=f.evaluate(c);const z=A?A.evaluate(c):1,F=mt(a,d,f,z);if(F)throw new Kt(F);return new $e(a/255*z,d/255*z,f/255*z,z)}function nm(c,a){return c in a}function Oh(c,a){const d=a[c];return d===void 0?null:d}function Co(c){return{type:c}}function rm(c){return{result:"success",value:c}}function zl(c){return{result:"error",value:c}}function Nl(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function vr(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function jh(c){return!!c.expression&&c.expression.interpolated}function Ci(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Ol(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function pr(c){return c}function tr(c,a){const d=a.type==="color",f=c.stops&&typeof c.stops[0][0]=="object",A=f||!(f||c.property!==void 0),z=c.type||(jh(a)?"exponential":"interval");if(d||a.type==="padding"){const be=d?$e.parse:ot.parse;(c=et({},c)).stops&&(c.stops=c.stops.map(Re=>[Re[0],be(Re[1])])),c.default=be(c.default?c.default:a.default)}if(c.colorSpace&&c.colorSpace!=="rgb"&&!Jf[c.colorSpace])throw new Error(`Unknown color space: ${c.colorSpace}`);let F,te,se;if(z==="exponential")F=am;else if(z==="interval")F=gx;else if(z==="categorical"){F=sm,te=Object.create(null);for(const be of c.stops)te[be[0]]=be[1];se=typeof c.stops[0][0]}else{if(z!=="identity")throw new Error(`Unknown function type "${z}"`);F=yx}if(f){const be={},Re=[];for(let Ye=0;Ye<c.stops.length;Ye++){const Ze=c.stops[Ye],ut=Ze[0].zoom;be[ut]===void 0&&(be[ut]={zoom:ut,type:c.type,property:c.property,default:c.default,stops:[]},Re.push(ut)),be[ut].stops.push([Ze[0].value,Ze[1]])}const Oe=[];for(const Ye of Re)Oe.push([be[Ye].zoom,tr(be[Ye],a)]);const Ve={name:"linear"};return{kind:"composite",interpolationType:Ve,interpolationFactor:Ks.interpolationFactor.bind(void 0,Ve),zoomStops:Oe.map(Ye=>Ye[0]),evaluate:({zoom:Ye},Ze)=>am({stops:Oe,base:c.base},a,Ye).evaluate(Ye,Ze)}}if(A){const be=z==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:be,interpolationFactor:Ks.interpolationFactor.bind(void 0,be),zoomStops:c.stops.map(Re=>Re[0]),evaluate:({zoom:Re})=>F(c,a,Re,te,se)}}return{kind:"source",evaluate(be,Re){const Oe=Re&&Re.properties?Re.properties[c.property]:void 0;return Oe===void 0?To(c.default,a.default):F(c,a,Oe,te,se)}}}function To(c,a,d){return c!==void 0?c:a!==void 0?a:d!==void 0?d:void 0}function sm(c,a,d,f,A){return To(typeof d===A?f[d]:void 0,c.default,a.default)}function gx(c,a,d){if(Ci(d)!=="number")return To(c.default,a.default);const f=c.stops.length;if(f===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[f-1][0])return c.stops[f-1][1];const A=Wu(c.stops.map(z=>z[0]),d);return c.stops[A][1]}function am(c,a,d){const f=c.base!==void 0?c.base:1;if(Ci(d)!=="number")return To(c.default,a.default);const A=c.stops.length;if(A===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[A-1][0])return c.stops[A-1][1];const z=Wu(c.stops.map(Re=>Re[0]),d),F=function(Re,Oe,Ve,Ye){const Ze=Ye-Ve,ut=Re-Ve;return Ze===0?0:Oe===1?ut/Ze:(Math.pow(Oe,ut)-1)/(Math.pow(Oe,Ze)-1)}(d,f,c.stops[z][0],c.stops[z+1][0]),te=c.stops[z][1],se=c.stops[z+1][1];let be=Rc[a.type]||pr;if(c.colorSpace&&c.colorSpace!=="rgb"){const Re=Jf[c.colorSpace];be=(Oe,Ve)=>Re.reverse(Re.interpolate(Re.forward(Oe),Re.forward(Ve),F))}return typeof te.evaluate=="function"?{evaluate(...Re){const Oe=te.evaluate.apply(void 0,Re),Ve=se.evaluate.apply(void 0,Re);if(Oe!==void 0&&Ve!==void 0)return be(Oe,Ve,F)}}:be(te,se,F)}function yx(c,a,d){switch(a.type){case"color":d=$e.parse(d);break;case"formatted":d=ct.fromString(d.toString());break;case"resolvedImage":d=rt.fromString(d.toString());break;case"padding":d=ot.parse(d);break;default:Ci(d)===a.type||a.type==="enum"&&a.values[d]||(d=void 0)}return To(d,c.default,a.default)}ji.register(Ll,{error:[{kind:"error"},[St],(c,[a])=>{throw new Kt(a.evaluate(c))}],typeof:[St,[Ht],(c,[a])=>dt(zt(a.evaluate(c)))],"to-rgba":[nn(ft,4),[si],(c,[a])=>a.evaluate(c).toArray()],rgb:[si,[ft,ft,ft],im],rgba:[si,[ft,ft,ft,ft],im],has:{type:Ct,overloads:[[[St],(c,[a])=>nm(a.evaluate(c),c.properties())],[[St,di],(c,[a,d])=>nm(a.evaluate(c),d.evaluate(c))]]},get:{type:Ht,overloads:[[[St],(c,[a])=>Oh(a.evaluate(c),c.properties())],[[St,di],(c,[a,d])=>Oh(a.evaluate(c),d.evaluate(c))]]},"feature-state":[Ht,[St],(c,[a])=>Oh(a.evaluate(c),c.featureState||{})],properties:[di,[],c=>c.properties()],"geometry-type":[St,[],c=>c.geometryType()],id:[Ht,[],c=>c.id()],zoom:[ft,[],c=>c.globals.zoom],"heatmap-density":[ft,[],c=>c.globals.heatmapDensity||0],"line-progress":[ft,[],c=>c.globals.lineProgress||0],accumulated:[Ht,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[ft,Co(ft),(c,a)=>{let d=0;for(const f of a)d+=f.evaluate(c);return d}],"*":[ft,Co(ft),(c,a)=>{let d=1;for(const f of a)d*=f.evaluate(c);return d}],"-":{type:ft,overloads:[[[ft,ft],(c,[a,d])=>a.evaluate(c)-d.evaluate(c)],[[ft],(c,[a])=>-a.evaluate(c)]]},"/":[ft,[ft,ft],(c,[a,d])=>a.evaluate(c)/d.evaluate(c)],"%":[ft,[ft,ft],(c,[a,d])=>a.evaluate(c)%d.evaluate(c)],ln2:[ft,[],()=>Math.LN2],pi:[ft,[],()=>Math.PI],e:[ft,[],()=>Math.E],"^":[ft,[ft,ft],(c,[a,d])=>Math.pow(a.evaluate(c),d.evaluate(c))],sqrt:[ft,[ft],(c,[a])=>Math.sqrt(a.evaluate(c))],log10:[ft,[ft],(c,[a])=>Math.log(a.evaluate(c))/Math.LN10],ln:[ft,[ft],(c,[a])=>Math.log(a.evaluate(c))],log2:[ft,[ft],(c,[a])=>Math.log(a.evaluate(c))/Math.LN2],sin:[ft,[ft],(c,[a])=>Math.sin(a.evaluate(c))],cos:[ft,[ft],(c,[a])=>Math.cos(a.evaluate(c))],tan:[ft,[ft],(c,[a])=>Math.tan(a.evaluate(c))],asin:[ft,[ft],(c,[a])=>Math.asin(a.evaluate(c))],acos:[ft,[ft],(c,[a])=>Math.acos(a.evaluate(c))],atan:[ft,[ft],(c,[a])=>Math.atan(a.evaluate(c))],min:[ft,Co(ft),(c,a)=>Math.min(...a.map(d=>d.evaluate(c)))],max:[ft,Co(ft),(c,a)=>Math.max(...a.map(d=>d.evaluate(c)))],abs:[ft,[ft],(c,[a])=>Math.abs(a.evaluate(c))],round:[ft,[ft],(c,[a])=>{const d=a.evaluate(c);return d<0?-Math.round(-d):Math.round(d)}],floor:[ft,[ft],(c,[a])=>Math.floor(a.evaluate(c))],ceil:[ft,[ft],(c,[a])=>Math.ceil(a.evaluate(c))],"filter-==":[Ct,[St,Ht],(c,[a,d])=>c.properties()[a.value]===d.value],"filter-id-==":[Ct,[Ht],(c,[a])=>c.id()===a.value],"filter-type-==":[Ct,[St],(c,[a])=>c.geometryType()===a.value],"filter-<":[Ct,[St,Ht],(c,[a,d])=>{const f=c.properties()[a.value],A=d.value;return typeof f==typeof A&&f<A}],"filter-id-<":[Ct,[Ht],(c,[a])=>{const d=c.id(),f=a.value;return typeof d==typeof f&&d<f}],"filter->":[Ct,[St,Ht],(c,[a,d])=>{const f=c.properties()[a.value],A=d.value;return typeof f==typeof A&&f>A}],"filter-id->":[Ct,[Ht],(c,[a])=>{const d=c.id(),f=a.value;return typeof d==typeof f&&d>f}],"filter-<=":[Ct,[St,Ht],(c,[a,d])=>{const f=c.properties()[a.value],A=d.value;return typeof f==typeof A&&f<=A}],"filter-id-<=":[Ct,[Ht],(c,[a])=>{const d=c.id(),f=a.value;return typeof d==typeof f&&d<=f}],"filter->=":[Ct,[St,Ht],(c,[a,d])=>{const f=c.properties()[a.value],A=d.value;return typeof f==typeof A&&f>=A}],"filter-id->=":[Ct,[Ht],(c,[a])=>{const d=c.id(),f=a.value;return typeof d==typeof f&&d>=f}],"filter-has":[Ct,[Ht],(c,[a])=>a.value in c.properties()],"filter-has-id":[Ct,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Ct,[nn(St)],(c,[a])=>a.value.indexOf(c.geometryType())>=0],"filter-id-in":[Ct,[nn(Ht)],(c,[a])=>a.value.indexOf(c.id())>=0],"filter-in-small":[Ct,[St,nn(Ht)],(c,[a,d])=>d.value.indexOf(c.properties()[a.value])>=0],"filter-in-large":[Ct,[St,nn(Ht)],(c,[a,d])=>function(f,A,z,F){for(;z<=F;){const te=z+F>>1;if(A[te]===f)return!0;A[te]>f?F=te-1:z=te+1}return!1}(c.properties()[a.value],d.value,0,d.value.length-1)],all:{type:Ct,overloads:[[[Ct,Ct],(c,[a,d])=>a.evaluate(c)&&d.evaluate(c)],[Co(Ct),(c,a)=>{for(const d of a)if(!d.evaluate(c))return!1;return!0}]]},any:{type:Ct,overloads:[[[Ct,Ct],(c,[a,d])=>a.evaluate(c)||d.evaluate(c)],[Co(Ct),(c,a)=>{for(const d of a)if(d.evaluate(c))return!0;return!1}]]},"!":[Ct,[Ct],(c,[a])=>!a.evaluate(c)],"is-supported-script":[Ct,[St],(c,[a])=>{const d=c.globals&&c.globals.isSupportedScript;return!d||d(a.evaluate(c))}],upcase:[St,[St],(c,[a])=>a.evaluate(c).toUpperCase()],downcase:[St,[St],(c,[a])=>a.evaluate(c).toLowerCase()],concat:[St,Co(Ht),(c,a)=>a.map(d=>Dt(d.evaluate(c))).join("")],"resolved-locale":[St,[cn],(c,[a])=>a.evaluate(c).resolvedLocale()]});class Fh{constructor(a,d){this.expression=a,this._warningHistory={},this._evaluator=new $i,this._defaultValue=d?function(f){return f.type==="color"&&Ol(f.default)?new $e(0,0,0,0):f.type==="color"?$e.parse(f.default)||null:f.type==="padding"?ot.parse(f.default)||null:f.default===void 0?null:f.default}(d):null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(a,d,f,A,z,F){return this._evaluator.globals=a,this._evaluator.feature=d,this._evaluator.featureState=f,this._evaluator.canonical=A,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=F,this.expression.evaluate(this._evaluator)}evaluate(a,d,f,A,z,F){this._evaluator.globals=a,this._evaluator.feature=d||null,this._evaluator.featureState=f||null,this._evaluator.canonical=A,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=F||null;try{const te=this.expression.evaluate(this._evaluator);if(te==null||typeof te=="number"&&te!=te)return this._defaultValue;if(this._enumValues&&!(te in this._enumValues))throw new Kt(`Expected value to be one of ${Object.keys(this._enumValues).map(se=>JSON.stringify(se)).join(", ")}, but found ${JSON.stringify(te)} instead.`);return te}catch(te){return this._warningHistory[te.message]||(this._warningHistory[te.message]=!0,typeof console<"u"&&console.warn(te.message)),this._defaultValue}}}function Nc(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in Ll}function Oc(c,a){const d=new Hu(Ll,[],a?function(A){const z={color:si,string:St,number:ft,enum:St,boolean:Ct,formatted:Zi,padding:xn,resolvedImage:jn};return A.type==="array"?nn(z[A.value]||Ht,A.length):z[A.type]}(a):void 0),f=d.parse(c,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?rm(new Fh(f,a)):zl(d.errors)}class Ju{constructor(a,d){this.kind=a,this._styleExpression=d,this.isStateDependent=a!=="constant"&&!Dl(d.expression)}evaluateWithoutErrorHandling(a,d,f,A,z,F){return this._styleExpression.evaluateWithoutErrorHandling(a,d,f,A,z,F)}evaluate(a,d,f,A,z,F){return this._styleExpression.evaluate(a,d,f,A,z,F)}}class jc{constructor(a,d,f,A){this.kind=a,this.zoomStops=f,this._styleExpression=d,this.isStateDependent=a!=="camera"&&!Dl(d.expression),this.interpolationType=A}evaluateWithoutErrorHandling(a,d,f,A,z,F){return this._styleExpression.evaluateWithoutErrorHandling(a,d,f,A,z,F)}evaluate(a,d,f,A,z,F){return this._styleExpression.evaluate(a,d,f,A,z,F)}interpolationFactor(a,d,f){return this.interpolationType?Ks.interpolationFactor(this.interpolationType,a,d,f):0}}function om(c,a){const d=Oc(c,a);if(d.result==="error")return d;const f=d.value.expression,A=Vu(f);if(!A&&!Nl(a))return zl([new gt("","data expressions not supported")]);const z=Pc(f,["zoom"]);if(!z&&!vr(a))return zl([new gt("","zoom expressions not supported")]);const F=td(f);return F||z?F instanceof gt?zl([F]):F instanceof Ks&&!jh(a)?zl([new gt("",'"interpolate" expressions cannot be used with this property')]):rm(F?new jc(A?"camera":"composite",d.value,F.labels,F instanceof Ks?F.interpolation:void 0):new Ju(A?"constant":"source",d.value)):zl([new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ed{constructor(a,d){this._parameters=a,this._specification=d,et(this,tr(this._parameters,this._specification))}static deserialize(a){return new ed(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function td(c){let a=null;if(c instanceof Zu)a=td(c.result);else if(c instanceof Yu){for(const d of c.args)if(a=td(d),a)break}else(c instanceof Dc||c instanceof Ks)&&c.input instanceof ji&&c.input.name==="zoom"&&(a=c);return a instanceof gt||c.eachChild(d=>{const f=td(d);f instanceof gt?a=f:!a&&f?a=new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&f&&a!==f&&(a=new gt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}function Aa(c){const a=c.key,d=c.value,f=c.valueSpec||{},A=c.objectElementValidators||{},z=c.style,F=c.styleSpec;let te=[];const se=Ci(d);if(se!=="object")return[new je(a,d,`object expected, ${se} found`)];for(const be in d){const Re=be.split(".")[0],Oe=f[Re]||f["*"];let Ve;if(A[Re])Ve=A[Re];else if(f[Re])Ve=ms;else if(A["*"])Ve=A["*"];else{if(!f["*"]){te.push(new je(a,d[be],`unknown property "${be}"`));continue}Ve=ms}te=te.concat(Ve({key:(a&&`${a}.`)+be,value:d[be],valueSpec:Oe,style:z,styleSpec:F,object:d,objectKey:be},d))}for(const be in f)A[be]||f[be].required&&f[be].default===void 0&&d[be]===void 0&&te.push(new je(a,d,`missing required property "${be}"`));return te}function lm(c){const a=c.value,d=c.valueSpec,f=c.style,A=c.styleSpec,z=c.key,F=c.arrayElementValidator||ms;if(Ci(a)!=="array")return[new je(z,a,`array expected, ${Ci(a)} found`)];if(d.length&&a.length!==d.length)return[new je(z,a,`array length ${d.length} expected, length ${a.length} found`)];if(d["min-length"]&&a.length<d["min-length"])return[new je(z,a,`array length at least ${d["min-length"]} expected, length ${a.length} found`)];let te={type:d.value,values:d.values};A.$version<7&&(te.function=d.function),Ci(d.value)==="object"&&(te=d.value);let se=[];for(let be=0;be<a.length;be++)se=se.concat(F({array:a,arrayIndex:be,value:a[be],valueSpec:te,style:f,styleSpec:A,key:`${z}[${be}]`}));return se}function Bh(c){const a=c.key,d=c.value,f=c.valueSpec;let A=Ci(d);return A==="number"&&d!=d&&(A="NaN"),A!=="number"?[new je(a,d,`number expected, ${A} found`)]:"minimum"in f&&d<f.minimum?[new je(a,d,`${d} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&d>f.maximum?[new je(a,d,`${d} is greater than the maximum value ${f.maximum}`)]:[]}function cm(c){const a=c.valueSpec,d=nt(c.value.type);let f,A,z,F={};const te=d!=="categorical"&&c.value.property===void 0,se=!te,be=Ci(c.value.stops)==="array"&&Ci(c.value.stops[0])==="array"&&Ci(c.value.stops[0][0])==="object",Re=Aa({key:c.key,value:c.value,valueSpec:c.styleSpec.function,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(Ye){if(d==="identity")return[new je(Ye.key,Ye.value,'identity function may not have a "stops" property')];let Ze=[];const ut=Ye.value;return Ze=Ze.concat(lm({key:Ye.key,value:ut,valueSpec:Ye.valueSpec,style:Ye.style,styleSpec:Ye.styleSpec,arrayElementValidator:Oe})),Ci(ut)==="array"&&ut.length===0&&Ze.push(new je(Ye.key,ut,"array must have at least one stop")),Ze},default:function(Ye){return ms({key:Ye.key,value:Ye.value,valueSpec:a,style:Ye.style,styleSpec:Ye.styleSpec})}}});return d==="identity"&&te&&Re.push(new je(c.key,c.value,'missing required property "property"')),d==="identity"||c.value.stops||Re.push(new je(c.key,c.value,'missing required property "stops"')),d==="exponential"&&c.valueSpec.expression&&!jh(c.valueSpec)&&Re.push(new je(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(se&&!Nl(c.valueSpec)?Re.push(new je(c.key,c.value,"property functions not supported")):te&&!vr(c.valueSpec)&&Re.push(new je(c.key,c.value,"zoom functions not supported"))),d!=="categorical"&&!be||c.value.property!==void 0||Re.push(new je(c.key,c.value,'"property" property is required')),Re;function Oe(Ye){let Ze=[];const ut=Ye.value,lt=Ye.key;if(Ci(ut)!=="array")return[new je(lt,ut,`array expected, ${Ci(ut)} found`)];if(ut.length!==2)return[new je(lt,ut,`array length 2 expected, length ${ut.length} found`)];if(be){if(Ci(ut[0])!=="object")return[new je(lt,ut,`object expected, ${Ci(ut[0])} found`)];if(ut[0].zoom===void 0)return[new je(lt,ut,"object stop key must have zoom")];if(ut[0].value===void 0)return[new je(lt,ut,"object stop key must have value")];if(z&&z>nt(ut[0].zoom))return[new je(lt,ut[0].zoom,"stop zoom values must appear in ascending order")];nt(ut[0].zoom)!==z&&(z=nt(ut[0].zoom),A=void 0,F={}),Ze=Ze.concat(Aa({key:`${lt}[0]`,value:ut[0],valueSpec:{zoom:{}},style:Ye.style,styleSpec:Ye.styleSpec,objectElementValidators:{zoom:Bh,value:Ve}}))}else Ze=Ze.concat(Ve({key:`${lt}[0]`,value:ut[0],valueSpec:{},style:Ye.style,styleSpec:Ye.styleSpec},ut));return Nc(ht(ut[1]))?Ze.concat([new je(`${lt}[1]`,ut[1],"expressions are not allowed in function stops.")]):Ze.concat(ms({key:`${lt}[1]`,value:ut[1],valueSpec:a,style:Ye.style,styleSpec:Ye.styleSpec}))}function Ve(Ye,Ze){const ut=Ci(Ye.value),lt=nt(Ye.value),bt=Ye.value!==null?Ye.value:Ze;if(f){if(ut!==f)return[new je(Ye.key,bt,`${ut} stop domain type must match previous stop domain type ${f}`)]}else f=ut;if(ut!=="number"&&ut!=="string"&&ut!=="boolean")return[new je(Ye.key,bt,"stop domain value must be a number, string, or boolean")];if(ut!=="number"&&d!=="categorical"){let It=`number expected, ${ut} found`;return Nl(a)&&d===void 0&&(It+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new je(Ye.key,bt,It)]}return d!=="categorical"||ut!=="number"||isFinite(lt)&&Math.floor(lt)===lt?d!=="categorical"&&ut==="number"&&A!==void 0&&lt<A?[new je(Ye.key,bt,"stop domain values must appear in ascending order")]:(A=lt,d==="categorical"&&lt in F?[new je(Ye.key,bt,"stop domain values must be unique")]:(F[lt]=!0,[])):[new je(Ye.key,bt,`integer expected, found ${lt}`)]}}function jl(c){const a=(c.expressionContext==="property"?om:Oc)(ht(c.value),c.valueSpec);if(a.result==="error")return a.value.map(f=>new je(`${c.key}${f.key}`,c.value,f.message));const d=a.value.expression||a.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!d.outputDefined())return[new je(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Dl(d))return[new je(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Dl(d))return[new je(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!Pc(d,["zoom","feature-state"]))return[new je(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Vu(d))return[new je(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Fc(c){const a=c.key,d=c.value,f=c.valueSpec,A=[];return Array.isArray(f.values)?f.values.indexOf(nt(d))===-1&&A.push(new je(a,d,`expected one of [${f.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(f.values).indexOf(nt(d))===-1&&A.push(new je(a,d,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(d)} found`)),A}function id(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const a of c.slice(1))if(!id(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}const nd={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function $h(c){if(c==null)return{filter:()=>!0,needGeometry:!1};id(c)||(c=rd(c));const a=Oc(c,nd);if(a.result==="error")throw new Error(a.value.map(d=>`${d.key}: ${d.message}`).join(", "));return{filter:(d,f,A)=>a.value.evaluate(d,f,{},A),needGeometry:Uh(c)}}function um(c,a){return c<a?-1:c>a?1:0}function Uh(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let a=1;a<c.length;a++)if(Uh(c[a]))return!0;return!1}function rd(c){if(!c)return!0;const a=c[0];return c.length<=1?a!=="any":a==="=="?sd(c[1],c[2],"=="):a==="!="?tl(sd(c[1],c[2],"==")):a==="<"||a===">"||a==="<="||a===">="?sd(c[1],c[2],a):a==="any"?(d=c.slice(1),["any"].concat(d.map(rd))):a==="all"?["all"].concat(c.slice(1).map(rd)):a==="none"?["all"].concat(c.slice(1).map(rd).map(tl)):a==="in"?dm(c[1],c.slice(2)):a==="!in"?tl(dm(c[1],c.slice(2))):a==="has"?ad(c[1]):a==="!has"?tl(ad(c[1])):a!=="within"||c;var d}function sd(c,a,d){switch(c){case"$type":return[`filter-type-${d}`,a];case"$id":return[`filter-id-${d}`,a];default:return[`filter-${d}`,c,a]}}function dm(c,a){if(a.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(d=>typeof d!=typeof a[0])?["filter-in-large",c,["literal",a.sort(um)]]:["filter-in-small",c,["literal",a]]}}function ad(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function tl(c){return["!",c]}function Bc(c){return id(ht(c.value))?jl(et({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):od(c)}function od(c){const a=c.value,d=c.key;if(Ci(a)!=="array")return[new je(d,a,`array expected, ${Ci(a)} found`)];const f=c.styleSpec;let A,z=[];if(a.length<1)return[new je(d,a,"filter array must have at least 1 element")];switch(z=z.concat(Fc({key:`${d}[0]`,value:a[0],valueSpec:f.filter_operator,style:c.style,styleSpec:c.styleSpec})),nt(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&nt(a[1])==="$type"&&z.push(new je(d,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&z.push(new je(d,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(A=Ci(a[1]),A!=="string"&&z.push(new je(`${d}[1]`,a[1],`string expected, ${A} found`)));for(let F=2;F<a.length;F++)A=Ci(a[F]),nt(a[1])==="$type"?z=z.concat(Fc({key:`${d}[${F}]`,value:a[F],valueSpec:f.geometry_type,style:c.style,styleSpec:c.styleSpec})):A!=="string"&&A!=="number"&&A!=="boolean"&&z.push(new je(`${d}[${F}]`,a[F],`string, number, or boolean expected, ${A} found`));break;case"any":case"all":case"none":for(let F=1;F<a.length;F++)z=z.concat(od({key:`${d}[${F}]`,value:a[F],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":A=Ci(a[1]),a.length!==2?z.push(new je(d,a,`filter array for "${a[0]}" operator must have 2 elements`)):A!=="string"&&z.push(new je(`${d}[1]`,a[1],`string expected, ${A} found`));break;case"within":A=Ci(a[1]),a.length!==2?z.push(new je(d,a,`filter array for "${a[0]}" operator must have 2 elements`)):A!=="object"&&z.push(new je(`${d}[1]`,a[1],`object expected, ${A} found`))}return z}function hm(c,a){const d=c.key,f=c.style,A=c.styleSpec,z=c.value,F=c.objectKey,te=A[`${a}_${c.layerType}`];if(!te)return[];const se=F.match(/^(.*)-transition$/);if(a==="paint"&&se&&te[se[1]]&&te[se[1]].transition)return ms({key:d,value:z,valueSpec:A.transition,style:f,styleSpec:A});const be=c.valueSpec||te[F];if(!be)return[new je(d,z,`unknown property "${F}"`)];let Re;if(Ci(z)==="string"&&Nl(be)&&!be.tokens&&(Re=/^{([^}]+)}$/.exec(z)))return[new je(d,z,`"${F}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Re[1])} }\`.`)];const Oe=[];return c.layerType==="symbol"&&(F==="text-field"&&f&&!f.glyphs&&Oe.push(new je(d,z,'use of "text-field" requires a style "glyphs" property')),F==="text-font"&&Ol(ht(z))&&nt(z.type)==="identity"&&Oe.push(new je(d,z,'"text-font" does not support identity functions'))),Oe.concat(ms({key:c.key,value:z,valueSpec:be,style:f,styleSpec:A,expressionContext:"property",propertyType:a,propertyKey:F}))}function $c(c){return hm(c,"paint")}function pm(c){return hm(c,"layout")}function fm(c){let a=[];const d=c.value,f=c.key,A=c.style,z=c.styleSpec;d.type||d.ref||a.push(new je(f,d,'either "type" or "ref" is required'));let F=nt(d.type);const te=nt(d.ref);if(d.id){const se=nt(d.id);for(let be=0;be<c.arrayIndex;be++){const Re=A.layers[be];nt(Re.id)===se&&a.push(new je(f,d.id,`duplicate layer id "${d.id}", previously used at line ${Re.id.__line__}`))}}if("ref"in d){let se;["type","source","source-layer","filter","layout"].forEach(be=>{be in d&&a.push(new je(f,d[be],`"${be}" is prohibited for ref layers`))}),A.layers.forEach(be=>{nt(be.id)===te&&(se=be)}),se?se.ref?a.push(new je(f,d.ref,"ref cannot reference another ref layer")):F=nt(se.type):a.push(new je(f,d.ref,`ref layer "${te}" not found`))}else if(F!=="background")if(d.source){const se=A.sources&&A.sources[d.source],be=se&&nt(se.type);se?be==="vector"&&F==="raster"?a.push(new je(f,d.source,`layer "${d.id}" requires a raster source`)):be==="raster"&&F!=="raster"?a.push(new je(f,d.source,`layer "${d.id}" requires a vector source`)):be!=="vector"||d["source-layer"]?be==="raster-dem"&&F!=="hillshade"?a.push(new je(f,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):F!=="line"||!d.paint||!d.paint["line-gradient"]||be==="geojson"&&se.lineMetrics||a.push(new je(f,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new je(f,d,`layer "${d.id}" must specify a "source-layer"`)):a.push(new je(f,d.source,`source "${d.source}" not found`))}else a.push(new je(f,d,'missing required property "source"'));return a=a.concat(Aa({key:f,value:d,valueSpec:z.layer,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ms({key:`${f}.type`,value:d.type,valueSpec:z.layer.type,style:c.style,styleSpec:c.styleSpec,object:d,objectKey:"type"}),filter:Bc,layout:se=>Aa({layer:d,key:se.key,value:se.value,style:se.style,styleSpec:se.styleSpec,objectElementValidators:{"*":be=>pm(et({layerType:F},be))}}),paint:se=>Aa({layer:d,key:se.key,value:se.value,style:se.style,styleSpec:se.styleSpec,objectElementValidators:{"*":be=>$c(et({layerType:F},be))}})}})),a}function Fl(c){const a=c.value,d=c.key,f=Ci(a);return f!=="string"?[new je(d,a,`string expected, ${f} found`)]:[]}const mm={promoteId:function({key:c,value:a}){if(Ci(a)==="string")return Fl({key:c,value:a});{const d=[];for(const f in a)d.push(...Fl({key:`${c}.${f}`,value:a[f]}));return d}}};function gm(c){const a=c.value,d=c.key,f=c.styleSpec,A=c.style;if(!a.type)return[new je(d,a,'"type" is required')];const z=nt(a.type);let F;switch(z){case"vector":case"raster":case"raster-dem":return F=Aa({key:d,value:a,valueSpec:f[`source_${z.replace("-","_")}`],style:c.style,styleSpec:f,objectElementValidators:mm}),F;case"geojson":if(F=Aa({key:d,value:a,valueSpec:f.source_geojson,style:A,styleSpec:f,objectElementValidators:mm}),a.cluster)for(const te in a.clusterProperties){const[se,be]=a.clusterProperties[te],Re=typeof se=="string"?[se,["accumulated"],["get",te]]:se;F.push(...jl({key:`${d}.${te}.map`,value:be,expressionContext:"cluster-map"})),F.push(...jl({key:`${d}.${te}.reduce`,value:Re,expressionContext:"cluster-reduce"}))}return F;case"video":return Aa({key:d,value:a,valueSpec:f.source_video,style:A,styleSpec:f});case"image":return Aa({key:d,value:a,valueSpec:f.source_image,style:A,styleSpec:f});case"canvas":return[new je(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Fc({key:`${d}.type`,value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:A,styleSpec:f})}}function Uc(c){const a=c.value,d=c.styleSpec,f=d.light,A=c.style;let z=[];const F=Ci(a);if(a===void 0)return z;if(F!=="object")return z=z.concat([new je("light",a,`object expected, ${F} found`)]),z;for(const te in a){const se=te.match(/^(.*)-transition$/);z=z.concat(se&&f[se[1]]&&f[se[1]].transition?ms({key:te,value:a[te],valueSpec:d.transition,style:A,styleSpec:d}):f[te]?ms({key:te,value:a[te],valueSpec:f[te],style:A,styleSpec:d}):[new je(te,a[te],`unknown property "${te}"`)])}return z}function Vc(c){const a=c.value,d=c.styleSpec,f=d.terrain,A=c.style;let z=[];const F=Ci(a);if(a===void 0)return z;if(F!=="object")return z=z.concat([new je("terrain",a,`object expected, ${F} found`)]),z;for(const te in a)z=z.concat(f[te]?ms({key:te,value:a[te],valueSpec:f[te],style:A,styleSpec:d}):[new je(te,a[te],`unknown property "${te}"`)]);return z}const Qs={"*":()=>[],array:lm,boolean:function(c){const a=c.value,d=c.key,f=Ci(a);return f!=="boolean"?[new je(d,a,`boolean expected, ${f} found`)]:[]},number:Bh,color:function(c){const a=c.key,d=c.value,f=Ci(d);return f!=="string"?[new je(a,d,`color expected, ${f} found`)]:vi(d)===null?[new je(a,d,`color expected, "${d}" found`)]:[]},constants:Xe,enum:Fc,filter:Bc,function:cm,layer:fm,object:Aa,source:gm,light:Uc,terrain:Vc,string:Fl,formatted:function(c){return Fl(c).length===0?[]:jl(c)},resolvedImage:function(c){return Fl(c).length===0?[]:jl(c)},padding:function(c){const a=c.key,d=c.value;if(Ci(d)==="array"){if(d.length<1||d.length>4)return[new je(a,d,`padding requires 1 to 4 values; ${d.length} values found`)];const f={type:"number"};let A=[];for(let z=0;z<d.length;z++)A=A.concat(ms({key:`${a}[${z}]`,value:d[z],valueSpec:f}));return A}return Bh({key:a,value:d,valueSpec:{}})}};function ms(c){const a=c.value,d=c.valueSpec,f=c.styleSpec;return d.expression&&Ol(nt(a))?cm(c):d.expression&&Nc(ht(a))?jl(c):d.type&&Qs[d.type]?Qs[d.type](c):Aa(et({},c,{valueSpec:d.type?f[d.type]:d}))}function xx(c){const a=c.value,d=c.key,f=Fl(c);return f.length||(a.indexOf("{fontstack}")===-1&&f.push(new je(d,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&f.push(new je(d,a,'"glyphs" url must include a "{range}" token'))),f}function So(c,a=Pe){let d=[];return d=d.concat(ms({key:"",value:c,valueSpec:a.$root,styleSpec:a,style:c,objectElementValidators:{glyphs:xx,"*":()=>[]}})),c.constants&&(d=d.concat(Xe({key:"constants",value:c.constants,style:c,styleSpec:a}))),ym(d)}function ym(c){return[].concat(c).sort((a,d)=>a.line-d.line)}function il(c){return function(...a){return ym(c.apply(this,a))}}So.source=il(gm),So.light=il(Uc),So.terrain=il(Vc),So.layer=il(fm),So.filter=il(Bc),So.paintProperty=il($c),So.layoutProperty=il(pm);const nl=So,vx=nl.light,Vh=nl.paintProperty,bx=nl.layoutProperty;function xm(c,a){let d=!1;if(a&&a.length)for(const f of a)c.fire(new Me(new Error(f.message))),d=!0;return d}class rl{constructor(a,d,f){const A=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;const F=new Int32Array(this.arrayBuffer);a=F[0],this.d=(d=F[1])+2*(f=F[2]);for(let se=0;se<this.d*this.d;se++){const be=F[3+se],Re=F[3+se+1];A.push(be===Re?null:F.subarray(be,Re))}const te=F[3+A.length+1];this.keys=F.subarray(F[3+A.length],te),this.bboxes=F.subarray(te),this.insert=this._insertReadonly}else{this.d=d+2*f;for(let F=0;F<this.d*this.d;F++)A.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=a,this.padding=f,this.scale=d/a,this.uid=0;const z=f/d*a;this.min=-z,this.max=a+z}insert(a,d,f,A,z){this._forEachCell(d,f,A,z,this._insertCell,this.uid++,void 0,void 0),this.keys.push(a),this.bboxes.push(d),this.bboxes.push(f),this.bboxes.push(A),this.bboxes.push(z)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(a,d,f,A,z,F){this.cells[z].push(F)}query(a,d,f,A,z){const F=this.min,te=this.max;if(a<=F&&d<=F&&te<=f&&te<=A&&!z)return Array.prototype.slice.call(this.keys);{const se=[];return this._forEachCell(a,d,f,A,this._queryCell,se,{},z),se}}_queryCell(a,d,f,A,z,F,te,se){const be=this.cells[z];if(be!==null){const Re=this.keys,Oe=this.bboxes;for(let Ve=0;Ve<be.length;Ve++){const Ye=be[Ve];if(te[Ye]===void 0){const Ze=4*Ye;(se?se(Oe[Ze+0],Oe[Ze+1],Oe[Ze+2],Oe[Ze+3]):a<=Oe[Ze+2]&&d<=Oe[Ze+3]&&f>=Oe[Ze+0]&&A>=Oe[Ze+1])?(te[Ye]=!0,F.push(Re[Ye])):te[Ye]=!1}}}}_forEachCell(a,d,f,A,z,F,te,se){const be=this._convertToCellCoord(a),Re=this._convertToCellCoord(d),Oe=this._convertToCellCoord(f),Ve=this._convertToCellCoord(A);for(let Ye=be;Ye<=Oe;Ye++)for(let Ze=Re;Ze<=Ve;Ze++){const ut=this.d*Ze+Ye;if((!se||se(this._convertFromCellCoord(Ye),this._convertFromCellCoord(Ze),this._convertFromCellCoord(Ye+1),this._convertFromCellCoord(Ze+1)))&&z.call(this,a,d,f,A,ut,F,te,se))return}}_convertFromCellCoord(a){return(a-this.padding)/this.scale}_convertToCellCoord(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const a=this.cells,d=3+this.cells.length+1+1;let f=0;for(let F=0;F<this.cells.length;F++)f+=this.cells[F].length;const A=new Int32Array(d+f+this.keys.length+this.bboxes.length);A[0]=this.extent,A[1]=this.n,A[2]=this.padding;let z=d;for(let F=0;F<a.length;F++){const te=a[F];A[3+F]=z,A.set(te,z),z+=te.length}return A[3+a.length]=z,A.set(this.keys,z),z+=this.keys.length,A[3+a.length+1]=z,A.set(this.bboxes,z),z+=this.bboxes.length,A.buffer}static serialize(a,d){const f=a.toArrayBuffer();return d&&d.push(f),{buffer:f}}static deserialize(a){return new rl(a.buffer)}}const Eo={};function fi(c,a,d={}){if(Eo[c])throw new Error(`${c} is already registered.`);Object.defineProperty(a,"_classRegistryKey",{value:c,writeable:!1}),Eo[c]={klass:a,omit:d.omit||[],shallow:d.shallow||[]}}fi("Object",Object),fi("TransferableGridIndex",rl),fi("Color",$e),fi("Error",Error),fi("AJAXError",J),fi("ResolvedImage",rt),fi("StylePropertyFunction",ed),fi("StyleExpression",Fh,{omit:["_evaluator"]}),fi("ZoomDependentExpression",jc),fi("ZoomConstantExpression",Ju),fi("CompoundExpression",ji,{omit:["_evaluate"]});for(const c in Ll)Ll[c]._classRegistryKey||fi(`Expression_${c}`,Ll[c]);function Gh(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function Gc(c,a){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob)return c;if(Gh(c)||L(c))return a&&a.push(c),c;if(ArrayBuffer.isView(c)){const d=c;return a&&a.push(d.buffer),d}if(c instanceof ImageData)return a&&a.push(c.data.buffer),c;if(Array.isArray(c)){const d=[];for(const f of c)d.push(Gc(f,a));return d}if(typeof c=="object"){const d=c.constructor,f=d._classRegistryKey;if(!f)throw new Error("can't serialize object of unregistered class");if(!Eo[f])throw new Error(`${f} is not registered.`);const A=d.serialize?d.serialize(c,a):{};if(d.serialize){if(a&&A===a[a.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const z in c){if(!c.hasOwnProperty(z)||Eo[f].omit.indexOf(z)>=0)continue;const F=c[z];A[z]=Eo[f].shallow.indexOf(z)>=0?F:Gc(F,a)}c instanceof Error&&(A.message=c.message)}if(A.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(A.$name=f),A}throw new Error("can't serialize object of type "+typeof c)}function sl(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||Gh(c)||L(c)||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(sl);if(typeof c=="object"){const a=c.$name||"Object";if(!Eo[a])throw new Error(`can't deserialize unregistered class ${a}`);const{klass:d}=Eo[a];if(!d)throw new Error(`can't deserialize unregistered class ${a}`);if(d.deserialize)return d.deserialize(c);const f=Object.create(d.prototype);for(const A of Object.keys(c)){if(A==="$name")continue;const z=c[A];f[A]=Eo[a].shallow.indexOf(A)>=0?z:sl(z)}return f}throw new Error("can't deserialize object of type "+typeof c)}class Hc{constructor(){this.first=!0}update(a,d){const f=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=d),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=f,!0))}}const ei={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Hh(c){for(const a of c)if(Wc(a.charCodeAt(0)))return!0;return!1}function vm(c){for(const a of c)if(!_x(a.charCodeAt(0)))return!1;return!0}function _x(c){return!(ei.Arabic(c)||ei["Arabic Supplement"](c)||ei["Arabic Extended-A"](c)||ei["Arabic Presentation Forms-A"](c)||ei["Arabic Presentation Forms-B"](c))}function Wc(c){return!(c!==746&&c!==747&&(c<4352||!(ei["Bopomofo Extended"](c)||ei.Bopomofo(c)||ei["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||ei["CJK Compatibility Ideographs"](c)||ei["CJK Compatibility"](c)||ei["CJK Radicals Supplement"](c)||ei["CJK Strokes"](c)||!(!ei["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||ei["CJK Unified Ideographs Extension A"](c)||ei["CJK Unified Ideographs"](c)||ei["Enclosed CJK Letters and Months"](c)||ei["Hangul Compatibility Jamo"](c)||ei["Hangul Jamo Extended-A"](c)||ei["Hangul Jamo Extended-B"](c)||ei["Hangul Jamo"](c)||ei["Hangul Syllables"](c)||ei.Hiragana(c)||ei["Ideographic Description Characters"](c)||ei.Kanbun(c)||ei["Kangxi Radicals"](c)||ei["Katakana Phonetic Extensions"](c)||ei.Katakana(c)&&c!==12540||!(!ei["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!ei["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||ei["Unified Canadian Aboriginal Syllabics"](c)||ei["Unified Canadian Aboriginal Syllabics Extended"](c)||ei["Vertical Forms"](c)||ei["Yijing Hexagram Symbols"](c)||ei["Yi Syllables"](c)||ei["Yi Radicals"](c))))}function bm(c){return!(Wc(c)||function(a){return!!(ei["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||ei["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||ei["Letterlike Symbols"](a)||ei["Number Forms"](a)||ei["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||ei["Control Pictures"](a)&&a!==9251||ei["Optical Character Recognition"](a)||ei["Enclosed Alphanumerics"](a)||ei["Geometric Shapes"](a)||ei["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||ei["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||ei["CJK Symbols and Punctuation"](a)||ei.Katakana(a)||ei["Private Use Area"](a)||ei["CJK Compatibility Forms"](a)||ei["Small Form Variants"](a)||ei["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)}(c))}function _m(c){return c>=1424&&c<=2303||ei["Arabic Presentation Forms-A"](c)||ei["Arabic Presentation Forms-B"](c)}function wx(c,a){return!(!a&&_m(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||ei.Khmer(c))}function Cx(c){for(const a of c)if(_m(a.charCodeAt(0)))return!0;return!1}const ld="deferred",Wh="loading",qh="loaded";let Yh=null,Fs="unavailable",ko=null;const wm=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(Fs="error"),Yh&&Yh(c)};function Zh(){Bl.fire(new fe("pluginStateChange",{pluginStatus:Fs,pluginURL:ko}))}const Bl=new De,Xh=function(){return Fs},cd=function(){if(Fs!==ld||!ko)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Fs=Wh,Zh(),ko&&we({url:ko},c=>{c?wm(c):(Fs=qh,Zh())})},va={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Fs===qh||va.applyArabicShaping!=null,isLoading:()=>Fs===Wh,setState(c){if(!q())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Fs=c.pluginStatus,ko=c.pluginURL},isParsed(){if(!q())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return va.applyArabicShaping!=null&&va.processBidirectionalText!=null&&va.processStyledBidirectionalText!=null},getPluginURL(){if(!q())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return ko}};class or{constructor(a,d){this.zoom=a,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Hc,this.transition={})}isSupportedScript(a){return function(d,f){for(const A of d)if(!wx(A.charCodeAt(0),f))return!1;return!0}(a,va.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const a=this.zoom,d=a-Math.floor(a),f=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*d}}}class ud{constructor(a,d){this.property=a,this.value=d,this.expression=function(f,A){if(Ol(f))return new ed(f,A);if(Nc(f)){const z=om(f,A);if(z.result==="error")throw new Error(z.value.map(F=>`${F.key}: ${F.message}`).join(", "));return z.value}{let z=f;return A.type==="color"&&typeof f=="string"?z=$e.parse(f):A.type!=="padding"||typeof f!="number"&&!Array.isArray(f)||(z=ot.parse(f)),{kind:"constant",evaluate:()=>z}}}(d===void 0?a.specification.default:d,a.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,d,f){return this.property.possiblyEvaluate(this,a,d,f)}}class dd{constructor(a){this.property=a,this.value=new ud(a,void 0)}transitioned(a,d){return new Cm(this.property,this.value,d,_({},a.transition,this.transition),a.now)}untransitioned(){return new Cm(this.property,this.value,null,{},0)}}class Kh{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return P(this._values[a].value.value)}setValue(a,d){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new dd(this._values[a].property)),this._values[a].value=new ud(this._values[a].property,d===null?void 0:P(d))}getTransition(a){return P(this._values[a].transition)}setTransition(a,d){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new dd(this._values[a].property)),this._values[a].transition=P(d)||void 0}serialize(){const a={};for(const d of Object.keys(this._values)){const f=this.getValue(d);f!==void 0&&(a[d]=f);const A=this.getTransition(d);A!==void 0&&(a[`${d}-transition`]=A)}return a}transitioned(a,d){const f=new Tm(this._properties);for(const A of Object.keys(this._values))f._values[A]=this._values[A].transitioned(a,d._values[A]);return f}untransitioned(){const a=new Tm(this._properties);for(const d of Object.keys(this._values))a._values[d]=this._values[d].untransitioned();return a}}class Cm{constructor(a,d,f,A,z){this.property=a,this.value=d,this.begin=z+A.delay||0,this.end=this.begin+A.duration||0,a.specification.transition&&(A.delay||A.duration)&&(this.prior=f)}possiblyEvaluate(a,d,f){const A=a.now||0,z=this.value.possiblyEvaluate(a,d,f),F=this.prior;if(F){if(A>this.end)return this.prior=null,z;if(this.value.isDataDriven())return this.prior=null,z;if(A<this.begin)return F.possiblyEvaluate(a,d,f);{const te=(A-this.begin)/(this.end-this.begin);return this.property.interpolate(F.possiblyEvaluate(a,d,f),z,function(se){if(se<=0)return 0;if(se>=1)return 1;const be=se*se,Re=be*se;return 4*(se<.5?Re:3*(se-be)+Re-.75)}(te))}}return z}}class Tm{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,d,f){const A=new hd(this._properties);for(const z of Object.keys(this._values))A._values[z]=this._values[z].possiblyEvaluate(a,d,f);return A}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class Tx{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}getValue(a){return P(this._values[a].value)}setValue(a,d){this._values[a]=new ud(this._values[a].property,d===null?void 0:P(d))}serialize(){const a={};for(const d of Object.keys(this._values)){const f=this.getValue(d);f!==void 0&&(a[d]=f)}return a}possiblyEvaluate(a,d,f){const A=new hd(this._properties);for(const z of Object.keys(this._values))A._values[z]=this._values[z].possiblyEvaluate(a,d,f);return A}}class qa{constructor(a,d,f){this.property=a,this.value=d,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,d,f,A){return this.property.evaluate(this.value,this.parameters,a,d,f,A)}}class hd{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class Ei{constructor(a){this.specification=a}possiblyEvaluate(a,d){if(a.isDataDriven())throw new Error("Value should not be data driven");return a.expression.evaluate(d)}interpolate(a,d,f){const A=Rc[this.specification.type];return A?A(a,d,f):a}}class Di{constructor(a,d){this.specification=a,this.overrides=d}possiblyEvaluate(a,d,f,A){return new qa(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(d,null,{},f,A)}:a.expression,d)}interpolate(a,d,f){if(a.value.kind!=="constant"||d.value.kind!=="constant")return a;if(a.value.value===void 0||d.value.value===void 0)return new qa(this,{kind:"constant",value:void 0},a.parameters);const A=Rc[this.specification.type];return A?new qa(this,{kind:"constant",value:A(a.value.value,d.value.value,f)},a.parameters):a}evaluate(a,d,f,A,z,F){return a.kind==="constant"?a.value:a.evaluate(d,f,A,z,F)}}class qc extends Di{possiblyEvaluate(a,d,f,A){if(a.value===void 0)return new qa(this,{kind:"constant",value:void 0},d);if(a.expression.kind==="constant"){const z=a.expression.evaluate(d,null,{},f,A),F=a.property.specification.type==="resolvedImage"&&typeof z!="string"?z.name:z,te=this._calculate(F,F,F,d);return new qa(this,{kind:"constant",value:te},d)}if(a.expression.kind==="camera"){const z=this._calculate(a.expression.evaluate({zoom:d.zoom-1}),a.expression.evaluate({zoom:d.zoom}),a.expression.evaluate({zoom:d.zoom+1}),d);return new qa(this,{kind:"constant",value:z},d)}return new qa(this,a.expression,d)}evaluate(a,d,f,A,z,F){if(a.kind==="source"){const te=a.evaluate(d,f,A,z,F);return this._calculate(te,te,te,d)}return a.kind==="composite"?this._calculate(a.evaluate({zoom:Math.floor(d.zoom)-1},f,A),a.evaluate({zoom:Math.floor(d.zoom)},f,A),a.evaluate({zoom:Math.floor(d.zoom)+1},f,A),d):a.value}_calculate(a,d,f,A){return A.zoom>A.zoomHistory.lastIntegerZoom?{from:a,to:d}:{from:f,to:d}}interpolate(a){return a}}class Yc{constructor(a){this.specification=a}possiblyEvaluate(a,d,f,A){if(a.value!==void 0){if(a.expression.kind==="constant"){const z=a.expression.evaluate(d,null,{},f,A);return this._calculate(z,z,z,d)}return this._calculate(a.expression.evaluate(new or(Math.floor(d.zoom-1),d)),a.expression.evaluate(new or(Math.floor(d.zoom),d)),a.expression.evaluate(new or(Math.floor(d.zoom+1),d)),d)}}_calculate(a,d,f,A){return A.zoom>A.zoomHistory.lastIntegerZoom?{from:a,to:d}:{from:f,to:d}}interpolate(a){return a}}class Qh{constructor(a){this.specification=a}possiblyEvaluate(a,d,f,A){return!!a.expression.evaluate(d,null,{},f,A)}interpolate(){return!1}}class Ur{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in a){const f=a[d];f.specification.overridable&&this.overridableProperties.push(d);const A=this.defaultPropertyValues[d]=new ud(f,void 0),z=this.defaultTransitionablePropertyValues[d]=new dd(f);this.defaultTransitioningPropertyValues[d]=z.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=A.possiblyEvaluate({})}}}fi("DataDrivenProperty",Di),fi("DataConstantProperty",Ei),fi("CrossFadedDataDrivenProperty",qc),fi("CrossFadedProperty",Yc),fi("ColorRampProperty",Qh);const al="-transition";class Bs extends De{constructor(a,d){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1},a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),d.layout&&(this._unevaluatedLayout=new Tx(d.layout)),d.paint)){this._transitionablePaint=new Kh(d.paint);for(const f in a.paint)this.setPaintProperty(f,a.paint[f],{validate:!1});for(const f in a.layout)this.setLayoutProperty(f,a.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new hd(d.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,d,f={}){d!=null&&this._validate(bx,`layers.${this.id}.layout.${a}`,a,d,f)||(a!=="visibility"?this._unevaluatedLayout.setValue(a,d):this.visibility=d)}getPaintProperty(a){return a.endsWith(al)?this._transitionablePaint.getTransition(a.slice(0,-al.length)):this._transitionablePaint.getValue(a)}setPaintProperty(a,d,f={}){if(d!=null&&this._validate(Vh,`layers.${this.id}.paint.${a}`,a,d,f))return!1;if(a.endsWith(al))return this._transitionablePaint.setTransition(a.slice(0,-al.length),d||void 0),!1;{const A=this._transitionablePaint._values[a],z=A.property.specification["property-type"]==="cross-faded-data-driven",F=A.value.isDataDriven(),te=A.value;this._transitionablePaint.setValue(a,d),this._handleSpecialPaintPropertyUpdate(a);const se=this._transitionablePaint._values[a].value;return se.isDataDriven()||F||z||this._handleOverridablePaintPropertyUpdate(a,te,se)}}_handleSpecialPaintPropertyUpdate(a){}_handleOverridablePaintPropertyUpdate(a,d,f){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,d){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,d)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),x(a,(d,f)=>!(d===void 0||f==="layout"&&!Object.keys(d).length||f==="paint"&&!Object.keys(d).length))}_validate(a,d,f,A,z={}){return(!z||z.validate!==!1)&&xm(this,a.call(nl,{key:d,layerType:this.type,objectKey:f,value:A,styleSpec:Pe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const d=this.paint.get(a);if(d instanceof qa&&Nl(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}const Sx={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Zc{constructor(a,d){this._structArray=a,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ir{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,d){return a._trim(),d&&(a.isTransferred=!0,d.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const d=Object.create(this.prototype);return d.arrayBuffer=a.arrayBuffer,d.length=a.length,d.capacity=a.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function zr(c,a=1){let d=0,f=0;return{members:c.map(A=>{const z=Sx[A.type].BYTES_PER_ELEMENT,F=d=Sm(d,Math.max(a,z)),te=A.components||1;return f=Math.max(f,z),d+=z*te,{name:A.name,type:A.type,components:te,offset:F}}),size:Sm(d,Math.max(f,a)),alignment:a}}function Sm(c,a){return Math.ceil(c/a)*a}class $l extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d){const f=this.length;return this.resize(f+1),this.emplace(f,a,d)}emplace(a,d,f){const A=2*a;return this.int16[A+0]=d,this.int16[A+1]=f,a}}$l.prototype.bytesPerElement=4,fi("StructArrayLayout2i4",$l);class Xc extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,f,A){const z=this.length;return this.resize(z+1),this.emplace(z,a,d,f,A)}emplace(a,d,f,A,z){const F=4*a;return this.int16[F+0]=d,this.int16[F+1]=f,this.int16[F+2]=A,this.int16[F+3]=z,a}}Xc.prototype.bytesPerElement=8,fi("StructArrayLayout4i8",Xc);class E extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,f,A,z,F){const te=this.length;return this.resize(te+1),this.emplace(te,a,d,f,A,z,F)}emplace(a,d,f,A,z,F,te){const se=6*a;return this.int16[se+0]=d,this.int16[se+1]=f,this.int16[se+2]=A,this.int16[se+3]=z,this.int16[se+4]=F,this.int16[se+5]=te,a}}E.prototype.bytesPerElement=12,fi("StructArrayLayout2i4i12",E);class o extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,f,A,z,F){const te=this.length;return this.resize(te+1),this.emplace(te,a,d,f,A,z,F)}emplace(a,d,f,A,z,F,te){const se=4*a,be=8*a;return this.int16[se+0]=d,this.int16[se+1]=f,this.uint8[be+4]=A,this.uint8[be+5]=z,this.uint8[be+6]=F,this.uint8[be+7]=te,a}}o.prototype.bytesPerElement=8,fi("StructArrayLayout2i4ub8",o);class h extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d){const f=this.length;return this.resize(f+1),this.emplace(f,a,d)}emplace(a,d,f){const A=2*a;return this.float32[A+0]=d,this.float32[A+1]=f,a}}h.prototype.bytesPerElement=8,fi("StructArrayLayout2f8",h);class b extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,f,A,z,F,te,se,be,Re){const Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,a,d,f,A,z,F,te,se,be,Re)}emplace(a,d,f,A,z,F,te,se,be,Re,Oe){const Ve=10*a;return this.uint16[Ve+0]=d,this.uint16[Ve+1]=f,this.uint16[Ve+2]=A,this.uint16[Ve+3]=z,this.uint16[Ve+4]=F,this.uint16[Ve+5]=te,this.uint16[Ve+6]=se,this.uint16[Ve+7]=be,this.uint16[Ve+8]=Re,this.uint16[Ve+9]=Oe,a}}b.prototype.bytesPerElement=20,fi("StructArrayLayout10ui20",b);class M extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,f,A,z,F,te,se,be,Re,Oe,Ve){const Ye=this.length;return this.resize(Ye+1),this.emplace(Ye,a,d,f,A,z,F,te,se,be,Re,Oe,Ve)}emplace(a,d,f,A,z,F,te,se,be,Re,Oe,Ve,Ye){const Ze=12*a;return this.int16[Ze+0]=d,this.int16[Ze+1]=f,this.int16[Ze+2]=A,this.int16[Ze+3]=z,this.uint16[Ze+4]=F,this.uint16[Ze+5]=te,this.uint16[Ze+6]=se,this.uint16[Ze+7]=be,this.int16[Ze+8]=Re,this.int16[Ze+9]=Oe,this.int16[Ze+10]=Ve,this.int16[Ze+11]=Ye,a}}M.prototype.bytesPerElement=24,fi("StructArrayLayout4i4ui4i24",M);class j extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,f){const A=this.length;return this.resize(A+1),this.emplace(A,a,d,f)}emplace(a,d,f,A){const z=3*a;return this.float32[z+0]=d,this.float32[z+1]=f,this.float32[z+2]=A,a}}j.prototype.bytesPerElement=12,fi("StructArrayLayout3f12",j);class ee extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const d=this.length;return this.resize(d+1),this.emplace(d,a)}emplace(a,d){return this.uint32[1*a+0]=d,a}}ee.prototype.bytesPerElement=4,fi("StructArrayLayout1ul4",ee);class le extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,f,A,z,F,te,se,be){const Re=this.length;return this.resize(Re+1),this.emplace(Re,a,d,f,A,z,F,te,se,be)}emplace(a,d,f,A,z,F,te,se,be,Re){const Oe=10*a,Ve=5*a;return this.int16[Oe+0]=d,this.int16[Oe+1]=f,this.int16[Oe+2]=A,this.int16[Oe+3]=z,this.int16[Oe+4]=F,this.int16[Oe+5]=te,this.uint32[Ve+3]=se,this.uint16[Oe+8]=be,this.uint16[Oe+9]=Re,a}}le.prototype.bytesPerElement=20,fi("StructArrayLayout6i1ul2ui20",le);class pe extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,f,A,z,F){const te=this.length;return this.resize(te+1),this.emplace(te,a,d,f,A,z,F)}emplace(a,d,f,A,z,F,te){const se=6*a;return this.int16[se+0]=d,this.int16[se+1]=f,this.int16[se+2]=A,this.int16[se+3]=z,this.int16[se+4]=F,this.int16[se+5]=te,a}}pe.prototype.bytesPerElement=12,fi("StructArrayLayout2i2i2i12",pe);class Te extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,f,A,z){const F=this.length;return this.resize(F+1),this.emplace(F,a,d,f,A,z)}emplace(a,d,f,A,z,F){const te=4*a,se=8*a;return this.float32[te+0]=d,this.float32[te+1]=f,this.float32[te+2]=A,this.int16[se+6]=z,this.int16[se+7]=F,a}}Te.prototype.bytesPerElement=16,fi("StructArrayLayout2f1f2i16",Te);class Ne extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,f,A){const z=this.length;return this.resize(z+1),this.emplace(z,a,d,f,A)}emplace(a,d,f,A,z){const F=12*a,te=3*a;return this.uint8[F+0]=d,this.uint8[F+1]=f,this.float32[te+1]=A,this.float32[te+2]=z,a}}Ne.prototype.bytesPerElement=12,fi("StructArrayLayout2ub2f12",Ne);class Be extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,f){const A=this.length;return this.resize(A+1),this.emplace(A,a,d,f)}emplace(a,d,f,A){const z=3*a;return this.uint16[z+0]=d,this.uint16[z+1]=f,this.uint16[z+2]=A,a}}Be.prototype.bytesPerElement=6,fi("StructArrayLayout3ui6",Be);class qe extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,f,A,z,F,te,se,be,Re,Oe,Ve,Ye,Ze,ut,lt,bt){const It=this.length;return this.resize(It+1),this.emplace(It,a,d,f,A,z,F,te,se,be,Re,Oe,Ve,Ye,Ze,ut,lt,bt)}emplace(a,d,f,A,z,F,te,se,be,Re,Oe,Ve,Ye,Ze,ut,lt,bt,It){const xt=24*a,Mt=12*a,$t=48*a;return this.int16[xt+0]=d,this.int16[xt+1]=f,this.uint16[xt+2]=A,this.uint16[xt+3]=z,this.uint32[Mt+2]=F,this.uint32[Mt+3]=te,this.uint32[Mt+4]=se,this.uint16[xt+10]=be,this.uint16[xt+11]=Re,this.uint16[xt+12]=Oe,this.float32[Mt+7]=Ve,this.float32[Mt+8]=Ye,this.uint8[$t+36]=Ze,this.uint8[$t+37]=ut,this.uint8[$t+38]=lt,this.uint32[Mt+10]=bt,this.int16[xt+22]=It,a}}qe.prototype.bytesPerElement=48,fi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",qe);class tt extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,f,A,z,F,te,se,be,Re,Oe,Ve,Ye,Ze,ut,lt,bt,It,xt,Mt,$t,Bt,xi,Ti,ti,Xt,Yt,ii){const Qt=this.length;return this.resize(Qt+1),this.emplace(Qt,a,d,f,A,z,F,te,se,be,Re,Oe,Ve,Ye,Ze,ut,lt,bt,It,xt,Mt,$t,Bt,xi,Ti,ti,Xt,Yt,ii)}emplace(a,d,f,A,z,F,te,se,be,Re,Oe,Ve,Ye,Ze,ut,lt,bt,It,xt,Mt,$t,Bt,xi,Ti,ti,Xt,Yt,ii,Qt){const Vt=34*a,Mi=17*a;return this.int16[Vt+0]=d,this.int16[Vt+1]=f,this.int16[Vt+2]=A,this.int16[Vt+3]=z,this.int16[Vt+4]=F,this.int16[Vt+5]=te,this.int16[Vt+6]=se,this.int16[Vt+7]=be,this.uint16[Vt+8]=Re,this.uint16[Vt+9]=Oe,this.uint16[Vt+10]=Ve,this.uint16[Vt+11]=Ye,this.uint16[Vt+12]=Ze,this.uint16[Vt+13]=ut,this.uint16[Vt+14]=lt,this.uint16[Vt+15]=bt,this.uint16[Vt+16]=It,this.uint16[Vt+17]=xt,this.uint16[Vt+18]=Mt,this.uint16[Vt+19]=$t,this.uint16[Vt+20]=Bt,this.uint16[Vt+21]=xi,this.uint16[Vt+22]=Ti,this.uint32[Mi+12]=ti,this.float32[Mi+13]=Xt,this.float32[Mi+14]=Yt,this.float32[Mi+15]=ii,this.float32[Mi+16]=Qt,a}}tt.prototype.bytesPerElement=68,fi("StructArrayLayout8i15ui1ul4f68",tt);class Qe extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const d=this.length;return this.resize(d+1),this.emplace(d,a)}emplace(a,d){return this.float32[1*a+0]=d,a}}Qe.prototype.bytesPerElement=4,fi("StructArrayLayout1f4",Qe);class Je extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,f){const A=this.length;return this.resize(A+1),this.emplace(A,a,d,f)}emplace(a,d,f,A){const z=3*a;return this.int16[z+0]=d,this.int16[z+1]=f,this.int16[z+2]=A,a}}Je.prototype.bytesPerElement=6,fi("StructArrayLayout3i6",Je);class pt extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,f){const A=this.length;return this.resize(A+1),this.emplace(A,a,d,f)}emplace(a,d,f,A){const z=4*a;return this.uint32[2*a+0]=d,this.uint16[z+2]=f,this.uint16[z+3]=A,a}}pt.prototype.bytesPerElement=8,fi("StructArrayLayout1ul2ui8",pt);class yt extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d){const f=this.length;return this.resize(f+1),this.emplace(f,a,d)}emplace(a,d,f){const A=2*a;return this.uint16[A+0]=d,this.uint16[A+1]=f,a}}yt.prototype.bytesPerElement=4,fi("StructArrayLayout2ui4",yt);class _t extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const d=this.length;return this.resize(d+1),this.emplace(d,a)}emplace(a,d){return this.uint16[1*a+0]=d,a}}_t.prototype.bytesPerElement=2,fi("StructArrayLayout1ui2",_t);class at extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,f,A){const z=this.length;return this.resize(z+1),this.emplace(z,a,d,f,A)}emplace(a,d,f,A,z){const F=4*a;return this.float32[F+0]=d,this.float32[F+1]=f,this.float32[F+2]=A,this.float32[F+3]=z,a}}at.prototype.bytesPerElement=16,fi("StructArrayLayout4f16",at);class At extends Zc{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new G(this.anchorPointX,this.anchorPointY)}}At.prototype.size=20;class Tt extends le{get(a){return new At(this,a)}}fi("CollisionBoxArray",Tt);class Nt extends Zc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(a){this._structArray.uint8[this._pos1+37]=a}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(a){this._structArray.uint8[this._pos1+38]=a}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(a){this._structArray.uint32[this._pos4+10]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Nt.prototype.size=48;class Ot extends qe{get(a){return new Nt(this,a)}}fi("PlacedSymbolArray",Ot);class Ut extends Zc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(a){this._structArray.uint32[this._pos4+12]=a}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Ut.prototype.size=68;class Lt extends tt{get(a){return new Ut(this,a)}}fi("SymbolInstanceArray",Lt);class ai extends Qe{getoffsetX(a){return this.float32[1*a+0]}}fi("GlyphOffsetArray",ai);class Zt extends Je{getx(a){return this.int16[3*a+0]}gety(a){return this.int16[3*a+1]}gettileUnitDistanceFromAnchor(a){return this.int16[3*a+2]}}fi("SymbolLineVertexArray",Zt);class li extends Zc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}li.prototype.size=8;class Xi extends pt{get(a){return new li(this,a)}}fi("FeatureIndexArray",Xi);class un extends $l{}class Ii extends $l{}class Bn extends $l{}class $n extends E{}class _n extends o{}class Cn extends h{}class En extends b{}class Js extends M{}class Ya extends j{}class Ma extends ee{}class Pa extends pe{}class ol extends Ne{}class ss extends Be{}class Ia extends yt{}const ll=zr([{name:"a_pos",components:2,type:"Int16"}],4),{members:pd}=ll;class kn{constructor(a=[]){this.segments=a}prepareSegment(a,d,f,A){let z=this.segments[this.segments.length-1];return a>kn.MAX_VERTEX_ARRAY_LENGTH&&T(`Max vertices per segment is ${kn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!z||z.vertexLength+a>kn.MAX_VERTEX_ARRAY_LENGTH||z.sortKey!==A)&&(z={vertexOffset:d.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},A!==void 0&&(z.sortKey=A),this.segments.push(z)),z}get(){return this.segments}destroy(){for(const a of this.segments)for(const d in a.vaos)a.vaos[d].destroy()}static simpleSegment(a,d,f,A){return new kn([{vertexOffset:a,primitiveOffset:d,vertexLength:f,primitiveLength:A,vaos:{},sortKey:0}])}}function nr(c,a){return 256*(c=y(Math.floor(c),0,255))+y(Math.floor(a),0,255)}kn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,fi("SegmentVector",kn);const Mn=zr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Nr={exports:{}},$s={exports:{}};$s.exports=function(c,a){var d,f,A,z,F,te,se,be;for(f=c.length-(d=3&c.length),A=a,F=3432918353,te=461845907,be=0;be<f;)se=255&c.charCodeAt(be)|(255&c.charCodeAt(++be))<<8|(255&c.charCodeAt(++be))<<16|(255&c.charCodeAt(++be))<<24,++be,A=27492+(65535&(z=5*(65535&(A=(A^=se=(65535&(se=(se=(65535&se)*F+(((se>>>16)*F&65535)<<16)&4294967295)<<15|se>>>17))*te+(((se>>>16)*te&65535)<<16)&4294967295)<<13|A>>>19))+((5*(A>>>16)&65535)<<16)&4294967295))+((58964+(z>>>16)&65535)<<16);switch(se=0,d){case 3:se^=(255&c.charCodeAt(be+2))<<16;case 2:se^=(255&c.charCodeAt(be+1))<<8;case 1:A^=se=(65535&(se=(se=(65535&(se^=255&c.charCodeAt(be)))*F+(((se>>>16)*F&65535)<<16)&4294967295)<<15|se>>>17))*te+(((se>>>16)*te&65535)<<16)&4294967295}return A^=c.length,A=2246822507*(65535&(A^=A>>>16))+((2246822507*(A>>>16)&65535)<<16)&4294967295,A=3266489909*(65535&(A^=A>>>13))+((3266489909*(A>>>16)&65535)<<16)&4294967295,(A^=A>>>16)>>>0};var lr={exports:{}};lr.exports=function(c,a){for(var d,f=c.length,A=a^f,z=0;f>=4;)d=1540483477*(65535&(d=255&c.charCodeAt(z)|(255&c.charCodeAt(++z))<<8|(255&c.charCodeAt(++z))<<16|(255&c.charCodeAt(++z))<<24))+((1540483477*(d>>>16)&65535)<<16),A=1540483477*(65535&A)+((1540483477*(A>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),f-=4,++z;switch(f){case 3:A^=(255&c.charCodeAt(z+2))<<16;case 2:A^=(255&c.charCodeAt(z+1))<<8;case 1:A=1540483477*(65535&(A^=255&c.charCodeAt(z)))+((1540483477*(A>>>16)&65535)<<16)}return A=1540483477*(65535&(A^=A>>>13))+((1540483477*(A>>>16)&65535)<<16),(A^=A>>>15)>>>0};var ba=$s.exports,Ul=lr.exports;Nr.exports=ba,Nr.exports.murmur3=ba,Nr.exports.murmur2=Ul;class Vl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,d,f,A){this.ids.push(fd(a)),this.positions.push(d,f,A)}getPositions(a){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=fd(a);let f=0,A=this.ids.length-1;for(;f<A;){const F=f+A>>1;this.ids[F]>=d?A=F:f=F+1}const z=[];for(;this.ids[f]===d;)z.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return z}static serialize(a,d){const f=new Float64Array(a.ids),A=new Uint32Array(a.positions);return Jh(f,A,0,f.length-1),d&&d.push(f.buffer,A.buffer),{ids:f,positions:A}}static deserialize(a){const d=new Vl;return d.ids=a.ids,d.positions=a.positions,d.indexed=!0,d}}function fd(c){const a=+c;return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER?a:Nr.exports(String(c))}function Jh(c,a,d,f){for(;d<f;){const A=c[d+f>>1];let z=d-1,F=f+1;for(;;){do z++;while(c[z]<A);do F--;while(c[F]>A);if(z>=F)break;md(c,z,F),md(a,3*z,3*F),md(a,3*z+1,3*F+1),md(a,3*z+2,3*F+2)}F-d<f-F?(Jh(c,a,d,F),d=F+1):(Jh(c,a,F+1,f),f=F)}}function md(c,a,d){const f=c[a];c[a]=c[d],c[d]=f}fi("FeaturePositionMap",Vl);class Da{constructor(a,d){this.gl=a.gl,this.location=d}}class gd extends Da{constructor(a,d){super(a,d),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class Kc extends Da{constructor(a,d){super(a,d),this.current=[0,0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))}}class yd extends Da{constructor(a,d){super(a,d),this.current=$e.transparent}set(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))}}const lk=new Float32Array(16);function Ex(c){return[nr(255*c.r,255*c.g),nr(255*c.b,255*c.a)]}class ep{constructor(a,d,f){this.value=a,this.uniformNames=d.map(A=>`u_${A}`),this.type=f}setUniform(a,d,f){a.set(f.constantOr(this.value))}getBinding(a,d,f){return this.type==="color"?new yd(a,d):new gd(a,d)}}class xd{constructor(a,d){this.uniformNames=d.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(a,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=a.tlbr}setUniform(a,d,f,A){const z=A==="u_pattern_to"?this.patternTo:A==="u_pattern_from"?this.patternFrom:A==="u_pixel_ratio_to"?this.pixelRatioTo:A==="u_pixel_ratio_from"?this.pixelRatioFrom:null;z&&a.set(z)}getBinding(a,d,f){return f.substr(0,9)==="u_pattern"?new Kc(a,d):new gd(a,d)}}class cl{constructor(a,d,f,A){this.expression=a,this.type=f,this.maxValue=0,this.paintVertexAttributes=d.map(z=>({name:`a_${z}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new A}populatePaintArray(a,d,f,A,z){const F=this.paintVertexArray.length,te=this.expression.evaluate(new or(0),d,{},A,[],z);this.paintVertexArray.resize(a),this._setPaintValue(F,a,te)}updatePaintArray(a,d,f,A){const z=this.expression.evaluate({zoom:0},f,A);this._setPaintValue(a,d,z)}_setPaintValue(a,d,f){if(this.type==="color"){const A=Ex(f);for(let z=a;z<d;z++)this.paintVertexArray.emplace(z,A[0],A[1])}else{for(let A=a;A<d;A++)this.paintVertexArray.emplace(A,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ro{constructor(a,d,f,A,z,F){this.expression=a,this.uniformNames=d.map(te=>`u_${te}_t`),this.type=f,this.useIntegerZoom=A,this.zoom=z,this.maxValue=0,this.paintVertexAttributes=d.map(te=>({name:`a_${te}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new F}populatePaintArray(a,d,f,A,z){const F=this.expression.evaluate(new or(this.zoom),d,{},A,[],z),te=this.expression.evaluate(new or(this.zoom+1),d,{},A,[],z),se=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(se,a,F,te)}updatePaintArray(a,d,f,A){const z=this.expression.evaluate({zoom:this.zoom},f,A),F=this.expression.evaluate({zoom:this.zoom+1},f,A);this._setPaintValue(a,d,z,F)}_setPaintValue(a,d,f,A){if(this.type==="color"){const z=Ex(f),F=Ex(A);for(let te=a;te<d;te++)this.paintVertexArray.emplace(te,z[0],z[1],F[0],F[1])}else{for(let z=a;z<d;z++)this.paintVertexArray.emplace(z,f,A);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(A))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,d){const f=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,A=y(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);a.set(A)}getBinding(a,d,f){return new gd(a,d)}}class Gl{constructor(a,d,f,A,z,F){this.expression=a,this.type=d,this.useIntegerZoom=f,this.zoom=A,this.layerId=F,this.zoomInPaintVertexArray=new z,this.zoomOutPaintVertexArray=new z}populatePaintArray(a,d,f){const A=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(A,a,d.patterns&&d.patterns[this.layerId],f)}updatePaintArray(a,d,f,A,z){this._setPaintValues(a,d,f.patterns&&f.patterns[this.layerId],z)}_setPaintValues(a,d,f,A){if(!A||!f)return;const{min:z,mid:F,max:te}=f,se=A[z],be=A[F],Re=A[te];if(se&&be&&Re)for(let Oe=a;Oe<d;Oe++)this.zoomInPaintVertexArray.emplace(Oe,be.tl[0],be.tl[1],be.br[0],be.br[1],se.tl[0],se.tl[1],se.br[0],se.br[1],be.pixelRatio,se.pixelRatio),this.zoomOutPaintVertexArray.emplace(Oe,be.tl[0],be.tl[1],be.br[0],be.br[1],Re.tl[0],Re.tl[1],Re.br[0],Re.br[1],be.pixelRatio,Re.pixelRatio)}upload(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,Mn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,Mn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class S1{constructor(a,d,f){this.binders={},this._buffers=[];const A=[];for(const z in a.paint._values){if(!f(z))continue;const F=a.paint.get(z);if(!(F instanceof qa&&Nl(F.property.specification)))continue;const te=ck(z,a.type),se=F.value,be=F.property.specification.type,Re=F.property.useIntegerZoom,Oe=F.property.specification["property-type"],Ve=Oe==="cross-faded"||Oe==="cross-faded-data-driven";if(se.kind==="constant")this.binders[z]=Ve?new xd(se.value,te):new ep(se.value,te,be),A.push(`/u_${z}`);else if(se.kind==="source"||Ve){const Ye=E1(z,be,"source");this.binders[z]=Ve?new Gl(se,be,Re,d,Ye,a.id):new cl(se,te,be,Ye),A.push(`/a_${z}`)}else{const Ye=E1(z,be,"composite");this.binders[z]=new ro(se,te,be,Re,d,Ye),A.push(`/z_${z}`)}}this.cacheKey=A.sort().join("")}getMaxValue(a){const d=this.binders[a];return d instanceof cl||d instanceof ro?d.maxValue:0}populatePaintArrays(a,d,f,A,z){for(const F in this.binders){const te=this.binders[F];(te instanceof cl||te instanceof ro||te instanceof Gl)&&te.populatePaintArray(a,d,f,A,z)}}setConstantPatternPositions(a,d){for(const f in this.binders){const A=this.binders[f];A instanceof xd&&A.setConstantPatternPositions(a,d)}}updatePaintArrays(a,d,f,A,z){let F=!1;for(const te in a){const se=d.getPositions(te);for(const be of se){const Re=f.feature(be.index);for(const Oe in this.binders){const Ve=this.binders[Oe];if((Ve instanceof cl||Ve instanceof ro||Ve instanceof Gl)&&Ve.expression.isStateDependent===!0){const Ye=A.paint.get(Oe);Ve.expression=Ye.value,Ve.updatePaintArray(be.start,be.end,Re,a[te],z),F=!0}}}}return F}defines(){const a=[];for(const d in this.binders){const f=this.binders[d];(f instanceof ep||f instanceof xd)&&a.push(...f.uniformNames.map(A=>`#define HAS_UNIFORM_${A}`))}return a}getBinderAttributes(){const a=[];for(const d in this.binders){const f=this.binders[d];if(f instanceof cl||f instanceof ro)for(let A=0;A<f.paintVertexAttributes.length;A++)a.push(f.paintVertexAttributes[A].name);else if(f instanceof Gl)for(let A=0;A<Mn.members.length;A++)a.push(Mn.members[A].name)}return a}getBinderUniforms(){const a=[];for(const d in this.binders){const f=this.binders[d];if(f instanceof ep||f instanceof xd||f instanceof ro)for(const A of f.uniformNames)a.push(A)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a,d){const f=[];for(const A in this.binders){const z=this.binders[A];if(z instanceof ep||z instanceof xd||z instanceof ro){for(const F of z.uniformNames)if(d[F]){const te=z.getBinding(a,d[F],F);f.push({name:F,property:A,binding:te})}}}return f}setUniforms(a,d,f,A){for(const{name:z,property:F,binding:te}of d)this.binders[F].setUniform(te,A,f.get(F),z)}updatePaintBuffers(a){this._buffers=[];for(const d in this.binders){const f=this.binders[d];if(a&&f instanceof Gl){const A=a.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;A&&this._buffers.push(A)}else(f instanceof cl||f instanceof ro)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(a){for(const d in this.binders){const f=this.binders[d];(f instanceof cl||f instanceof ro||f instanceof Gl)&&f.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const d=this.binders[a];(d instanceof cl||d instanceof ro||d instanceof Gl)&&d.destroy()}}}class Qc{constructor(a,d,f=()=>!0){this.programConfigurations={};for(const A of a)this.programConfigurations[A.id]=new S1(A,d,f);this.needsUpload=!1,this._featureMap=new Vl,this._bufferOffset=0}populatePaintArrays(a,d,f,A,z,F){for(const te in this.programConfigurations)this.programConfigurations[te].populatePaintArrays(a,d,A,z,F);d.id!==void 0&&this._featureMap.add(d.id,f,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,d,f,A){for(const z of f)this.needsUpload=this.programConfigurations[z.id].updatePaintArrays(a,this._featureMap,d,z,A)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}function ck(c,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${a}-`,"").replace(/-/g,"_")]}function E1(c,a,d){const f={color:{source:h,composite:at},number:{source:Qe,composite:h}},A=function(z){return{"line-pattern":{source:En,composite:En},"fill-pattern":{source:En,composite:En},"fill-extrusion-pattern":{source:En,composite:En}}[z]}(c);return A&&A[d]||f[a][d]}fi("ConstantBinder",ep),fi("CrossFadedConstantBinder",xd),fi("SourceExpressionBinder",cl),fi("CrossFadedCompositeBinder",Gl),fi("CompositeExpressionBinder",ro),fi("ProgramConfiguration",S1,{omit:["_buffers"]}),fi("ProgramConfigurationSet",Qc);var Vr=8192;const kx=Math.pow(2,14)-1,k1=-kx-1;function Jc(c){const a=Vr/c.extent,d=c.loadGeometry();for(let f=0;f<d.length;f++){const A=d[f];for(let z=0;z<A.length;z++){const F=A[z],te=Math.round(F.x*a),se=Math.round(F.y*a);F.x=y(te,k1,kx),F.y=y(se,k1,kx),(te<F.x||te>F.x+1||se<F.y||se>F.y+1)&&T("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function eu(c,a){return{type:c.type,id:c.id,properties:c.properties,geometry:a?Jc(c):[]}}function Em(c,a,d,f,A){c.emplaceBack(2*a+(f+1)/2,2*d+(A+1)/2)}class Ax{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Ii,this.indexArray=new ss,this.segments=new kn,this.programConfigurations=new Qc(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(a,d,f){const A=this.layers[0],z=[];let F=null,te=!1;A.type==="circle"&&(F=A.layout.get("circle-sort-key"),te=!F.isConstant());for(const{feature:se,id:be,index:Re,sourceLayerIndex:Oe}of a){const Ve=this.layers[0]._featureFilter.needGeometry,Ye=eu(se,Ve);if(!this.layers[0]._featureFilter.filter(new or(this.zoom),Ye,f))continue;const Ze=te?F.evaluate(Ye,{},f):void 0,ut={id:be,properties:se.properties,type:se.type,sourceLayerIndex:Oe,index:Re,geometry:Ve?Ye.geometry:Jc(se),patterns:{},sortKey:Ze};z.push(ut)}te&&z.sort((se,be)=>se.sortKey-be.sortKey);for(const se of z){const{geometry:be,index:Re,sourceLayerIndex:Oe}=se,Ve=a[Re].feature;this.addFeature(se,be,Re,f),d.featureIndex.insert(Ve,be,Re,Oe,this.index)}}update(a,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,d,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,pd),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,d,f,A){for(const z of d)for(const F of z){const te=F.x,se=F.y;if(te<0||te>=Vr||se<0||se>=Vr)continue;const be=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),Re=be.vertexLength;Em(this.layoutVertexArray,te,se,-1,-1),Em(this.layoutVertexArray,te,se,1,-1),Em(this.layoutVertexArray,te,se,1,1),Em(this.layoutVertexArray,te,se,-1,1),this.indexArray.emplaceBack(Re,Re+1,Re+2),this.indexArray.emplaceBack(Re,Re+3,Re+2),be.vertexLength+=4,be.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,{},A)}}function A1(c,a){for(let d=0;d<c.length;d++)if(vd(a,c[d]))return!0;for(let d=0;d<a.length;d++)if(vd(c,a[d]))return!0;return!!Mx(c,a)}function uk(c,a,d){return!!vd(c,a)||!!Px(a,c,d)}function M1(c,a){if(c.length===1)return I1(a,c[0]);for(let d=0;d<a.length;d++){const f=a[d];for(let A=0;A<f.length;A++)if(vd(c,f[A]))return!0}for(let d=0;d<c.length;d++)if(I1(a,c[d]))return!0;for(let d=0;d<a.length;d++)if(Mx(c,a[d]))return!0;return!1}function dk(c,a,d){if(c.length>1){if(Mx(c,a))return!0;for(let f=0;f<a.length;f++)if(Px(a[f],c,d))return!0}for(let f=0;f<c.length;f++)if(Px(c[f],a,d))return!0;return!1}function Mx(c,a){if(c.length===0||a.length===0)return!1;for(let d=0;d<c.length-1;d++){const f=c[d],A=c[d+1];for(let z=0;z<a.length-1;z++)if(hk(f,A,a[z],a[z+1]))return!0}return!1}function hk(c,a,d,f){return I(c,d,f)!==I(a,d,f)&&I(c,a,d)!==I(c,a,f)}function Px(c,a,d){const f=d*d;if(a.length===1)return c.distSqr(a[0])<f;for(let A=1;A<a.length;A++)if(P1(c,a[A-1],a[A])<f)return!0;return!1}function P1(c,a,d){const f=a.distSqr(d);if(f===0)return c.distSqr(a);const A=((c.x-a.x)*(d.x-a.x)+(c.y-a.y)*(d.y-a.y))/f;return c.distSqr(A<0?a:A>1?d:d.sub(a)._mult(A)._add(a))}function I1(c,a){let d,f,A,z=!1;for(let F=0;F<c.length;F++){d=c[F];for(let te=0,se=d.length-1;te<d.length;se=te++)f=d[te],A=d[se],f.y>a.y!=A.y>a.y&&a.x<(A.x-f.x)*(a.y-f.y)/(A.y-f.y)+f.x&&(z=!z)}return z}function vd(c,a){let d=!1;for(let f=0,A=c.length-1;f<c.length;A=f++){const z=c[f],F=c[A];z.y>a.y!=F.y>a.y&&a.x<(F.x-z.x)*(a.y-z.y)/(F.y-z.y)+z.x&&(d=!d)}return d}function pk(c,a,d){const f=d[0],A=d[2];if(c.x<f.x&&a.x<f.x||c.x>A.x&&a.x>A.x||c.y<f.y&&a.y<f.y||c.y>A.y&&a.y>A.y)return!1;const z=I(c,a,d[0]);return z!==I(c,a,d[1])||z!==I(c,a,d[2])||z!==I(c,a,d[3])}function tp(c,a,d){const f=a.paint.get(c).value;return f.kind==="constant"?f.value:d.programConfigurations.get(a.id).getMaxValue(c)}function km(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function Am(c,a,d,f,A){if(!a[0]&&!a[1])return c;const z=G.convert(a)._mult(A);d==="viewport"&&z._rotate(-f);const F=[];for(let te=0;te<c.length;te++)F.push(c[te].sub(z));return F}fi("CircleBucket",Ax,{omit:["layers"]});const fk=new Ur({"circle-sort-key":new Di(Pe.layout_circle["circle-sort-key"])});var mk={paint:new Ur({"circle-radius":new Di(Pe.paint_circle["circle-radius"]),"circle-color":new Di(Pe.paint_circle["circle-color"]),"circle-blur":new Di(Pe.paint_circle["circle-blur"]),"circle-opacity":new Di(Pe.paint_circle["circle-opacity"]),"circle-translate":new Ei(Pe.paint_circle["circle-translate"]),"circle-translate-anchor":new Ei(Pe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ei(Pe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ei(Pe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Di(Pe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Di(Pe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Di(Pe.paint_circle["circle-stroke-opacity"])}),layout:fk},Us=1e-6,Vs=typeof Float32Array<"u"?Float32Array:Array;function D1(){var c=new Vs(9);return Vs!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function Ix(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function R1(c,a,d){var f=a[0],A=a[1],z=a[2],F=a[3],te=a[4],se=a[5],be=a[6],Re=a[7],Oe=a[8],Ve=a[9],Ye=a[10],Ze=a[11],ut=a[12],lt=a[13],bt=a[14],It=a[15],xt=d[0],Mt=d[1],$t=d[2],Bt=d[3];return c[0]=xt*f+Mt*te+$t*Oe+Bt*ut,c[1]=xt*A+Mt*se+$t*Ve+Bt*lt,c[2]=xt*z+Mt*be+$t*Ye+Bt*bt,c[3]=xt*F+Mt*Re+$t*Ze+Bt*It,c[4]=(xt=d[4])*f+(Mt=d[5])*te+($t=d[6])*Oe+(Bt=d[7])*ut,c[5]=xt*A+Mt*se+$t*Ve+Bt*lt,c[6]=xt*z+Mt*be+$t*Ye+Bt*bt,c[7]=xt*F+Mt*Re+$t*Ze+Bt*It,c[8]=(xt=d[8])*f+(Mt=d[9])*te+($t=d[10])*Oe+(Bt=d[11])*ut,c[9]=xt*A+Mt*se+$t*Ve+Bt*lt,c[10]=xt*z+Mt*be+$t*Ye+Bt*bt,c[11]=xt*F+Mt*Re+$t*Ze+Bt*It,c[12]=(xt=d[12])*f+(Mt=d[13])*te+($t=d[14])*Oe+(Bt=d[15])*ut,c[13]=xt*A+Mt*se+$t*Ve+Bt*lt,c[14]=xt*z+Mt*be+$t*Ye+Bt*bt,c[15]=xt*F+Mt*Re+$t*Ze+Bt*It,c}Math.hypot||(Math.hypot=function(){for(var c=0,a=arguments.length;a--;)c+=arguments[a]*arguments[a];return Math.sqrt(c)});var ip,gk=R1;function L1(){var c=new Vs(3);return Vs!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function z1(c,a,d){var f=new Vs(3);return f[0]=c,f[1]=a,f[2]=d,f}function Mm(c,a,d){var f=a[0],A=a[1],z=a[2],F=a[3];return c[0]=d[0]*f+d[4]*A+d[8]*z+d[12]*F,c[1]=d[1]*f+d[5]*A+d[9]*z+d[13]*F,c[2]=d[2]*f+d[6]*A+d[10]*z+d[14]*F,c[3]=d[3]*f+d[7]*A+d[11]*z+d[15]*F,c}function N1(){var c=new Vs(4);return Vs!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function O1(c,a){const d=Mm([],[c.x,c.y,0,1],a);return new G(d[0]/d[3],d[1]/d[3])}L1(),ip=new Vs(4),Vs!=Float32Array&&(ip[0]=0,ip[1]=0,ip[2]=0,ip[3]=0),L1(),z1(1,0,0),z1(0,1,0),N1(),N1(),D1(),function(){var c;c=new Vs(2),Vs!=Float32Array&&(c[0]=0,c[1]=0)}();class j1 extends Ax{}fi("HeatmapBucket",j1,{omit:["layers"]});var yk={paint:new Ur({"heatmap-radius":new Di(Pe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Di(Pe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ei(Pe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Qh(Pe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ei(Pe.paint_heatmap["heatmap-opacity"])})};function Dx(c,{width:a,height:d},f,A){if(A){if(A instanceof Uint8ClampedArray)A=new Uint8Array(A.buffer);else if(A.length!==a*d*f)throw new RangeError(`mismatched image size. expected: ${A.length} but got: ${a*d*f}`)}else A=new Uint8Array(a*d*f);return c.width=a,c.height=d,c.data=A,c}function F1(c,{width:a,height:d},f){if(a===c.width&&d===c.height)return;const A=Dx({},{width:a,height:d},f);Rx(c,A,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,a),height:Math.min(c.height,d)},f),c.width=a,c.height=d,c.data=A.data}function Rx(c,a,d,f,A,z){if(A.width===0||A.height===0)return a;if(A.width>c.width||A.height>c.height||d.x>c.width-A.width||d.y>c.height-A.height)throw new RangeError("out of range source coordinates for image copy");if(A.width>a.width||A.height>a.height||f.x>a.width-A.width||f.y>a.height-A.height)throw new RangeError("out of range destination coordinates for image copy");const F=c.data,te=a.data;if(F===te)throw new Error("srcData equals dstData, so image is already copied");for(let se=0;se<A.height;se++){const be=((d.y+se)*c.width+d.x)*z,Re=((f.y+se)*a.width+f.x)*z;for(let Oe=0;Oe<A.width*z;Oe++)te[Re+Oe]=F[be+Oe]}return a}class np{constructor(a,d){Dx(this,a,1,d)}resize(a){F1(this,a,1)}clone(){return new np({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,d,f,A,z){Rx(a,d,f,A,z,1)}}class Ra{constructor(a,d){Dx(this,a,4,d)}resize(a){F1(this,a,4)}replace(a,d){d?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new Ra({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,d,f,A,z){Rx(a,d,f,A,z,4)}}function B1(c){const a={},d=c.resolution||256,f=c.clips?c.clips.length:1,A=c.image||new Ra({width:d,height:f});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const z=(F,te,se)=>{a[c.evaluationKey]=se;const be=c.expression.evaluate(a);A.data[F+te+0]=Math.floor(255*be.r/be.a),A.data[F+te+1]=Math.floor(255*be.g/be.a),A.data[F+te+2]=Math.floor(255*be.b/be.a),A.data[F+te+3]=Math.floor(255*be.a)};if(c.clips)for(let F=0,te=0;F<f;++F,te+=4*d)for(let se=0,be=0;se<d;se++,be+=4){const Re=se/(d-1),{start:Oe,end:Ve}=c.clips[F];z(te,be,Oe*(1-Re)+Ve*Re)}else for(let F=0,te=0;F<d;F++,te+=4)z(0,te,F/(d-1));return A}fi("AlphaImage",np),fi("RGBAImage",Ra);var xk={paint:new Ur({"hillshade-illumination-direction":new Ei(Pe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ei(Pe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ei(Pe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ei(Pe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ei(Pe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ei(Pe.paint_hillshade["hillshade-accent-color"])})};const vk=zr([{name:"a_pos",components:2,type:"Int16"}],4),{members:bk}=vk;var Pm={exports:{}};function Im(c,a,d){d=d||2;var f,A,z,F,te,se,be,Re=a&&a.length,Oe=Re?a[0]*d:c.length,Ve=$1(c,0,Oe,d,!0),Ye=[];if(!Ve||Ve.next===Ve.prev)return Ye;if(Re&&(Ve=function(ut,lt,bt,It){var xt,Mt,$t,Bt=[];for(xt=0,Mt=lt.length;xt<Mt;xt++)($t=$1(ut,lt[xt]*It,xt<Mt-1?lt[xt+1]*It:ut.length,It,!1))===$t.next&&($t.steiner=!0),Bt.push(Ak($t));for(Bt.sort(Sk),xt=0;xt<Bt.length;xt++)bt=Ek(Bt[xt],bt);return bt}(c,a,Ve,d)),c.length>80*d){f=z=c[0],A=F=c[1];for(var Ze=d;Ze<Oe;Ze+=d)(te=c[Ze])<f&&(f=te),(se=c[Ze+1])<A&&(A=se),te>z&&(z=te),se>F&&(F=se);be=(be=Math.max(z-f,F-A))!==0?32767/be:0}return rp(Ve,Ye,d,f,A,be,0),Ye}function $1(c,a,d,f,A){var z,F;if(A===Nx(c,a,d,f)>0)for(z=a;z<d;z+=f)F=G1(z,c[z],c[z+1],F);else for(z=d-f;z>=a;z-=f)F=G1(z,c[z],c[z+1],F);return F&&Dm(F,F.next)&&(ap(F),F=F.next),F}function tu(c,a){if(!c)return c;a||(a=c);var d,f=c;do if(d=!1,f.steiner||!Dm(f,f.next)&&Mr(f.prev,f,f.next)!==0)f=f.next;else{if(ap(f),(f=a=f.prev)===f.next)break;d=!0}while(d||f!==a);return a}function rp(c,a,d,f,A,z,F){if(c){!F&&z&&function(Re,Oe,Ve,Ye){var Ze=Re;do Ze.z===0&&(Ze.z=Lx(Ze.x,Ze.y,Oe,Ve,Ye)),Ze.prevZ=Ze.prev,Ze.nextZ=Ze.next,Ze=Ze.next;while(Ze!==Re);Ze.prevZ.nextZ=null,Ze.prevZ=null,function(ut){var lt,bt,It,xt,Mt,$t,Bt,xi,Ti=1;do{for(bt=ut,ut=null,Mt=null,$t=0;bt;){for($t++,It=bt,Bt=0,lt=0;lt<Ti&&(Bt++,It=It.nextZ);lt++);for(xi=Ti;Bt>0||xi>0&&It;)Bt!==0&&(xi===0||!It||bt.z<=It.z)?(xt=bt,bt=bt.nextZ,Bt--):(xt=It,It=It.nextZ,xi--),Mt?Mt.nextZ=xt:ut=xt,xt.prevZ=Mt,Mt=xt;bt=It}Mt.nextZ=null,Ti*=2}while($t>1)}(Ze)}(c,f,A,z);for(var te,se,be=c;c.prev!==c.next;)if(te=c.prev,se=c.next,z?wk(c,f,A,z):_k(c))a.push(te.i/d|0),a.push(c.i/d|0),a.push(se.i/d|0),ap(c),c=se.next,be=se.next;else if((c=se)===be){F?F===1?rp(c=Ck(tu(c),a,d),a,d,f,A,z,2):F===2&&Tk(c,a,d,f,A,z):rp(tu(c),a,d,f,A,z,1);break}}}function _k(c){var a=c.prev,d=c,f=c.next;if(Mr(a,d,f)>=0)return!1;for(var A=a.x,z=d.x,F=f.x,te=a.y,se=d.y,be=f.y,Re=A<z?A<F?A:F:z<F?z:F,Oe=te<se?te<be?te:be:se<be?se:be,Ve=A>z?A>F?A:F:z>F?z:F,Ye=te>se?te>be?te:be:se>be?se:be,Ze=f.next;Ze!==a;){if(Ze.x>=Re&&Ze.x<=Ve&&Ze.y>=Oe&&Ze.y<=Ye&&bd(A,te,z,se,F,be,Ze.x,Ze.y)&&Mr(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.next}return!0}function wk(c,a,d,f){var A=c.prev,z=c,F=c.next;if(Mr(A,z,F)>=0)return!1;for(var te=A.x,se=z.x,be=F.x,Re=A.y,Oe=z.y,Ve=F.y,Ye=te<se?te<be?te:be:se<be?se:be,Ze=Re<Oe?Re<Ve?Re:Ve:Oe<Ve?Oe:Ve,ut=te>se?te>be?te:be:se>be?se:be,lt=Re>Oe?Re>Ve?Re:Ve:Oe>Ve?Oe:Ve,bt=Lx(Ye,Ze,a,d,f),It=Lx(ut,lt,a,d,f),xt=c.prevZ,Mt=c.nextZ;xt&&xt.z>=bt&&Mt&&Mt.z<=It;){if(xt.x>=Ye&&xt.x<=ut&&xt.y>=Ze&&xt.y<=lt&&xt!==A&&xt!==F&&bd(te,Re,se,Oe,be,Ve,xt.x,xt.y)&&Mr(xt.prev,xt,xt.next)>=0||(xt=xt.prevZ,Mt.x>=Ye&&Mt.x<=ut&&Mt.y>=Ze&&Mt.y<=lt&&Mt!==A&&Mt!==F&&bd(te,Re,se,Oe,be,Ve,Mt.x,Mt.y)&&Mr(Mt.prev,Mt,Mt.next)>=0))return!1;Mt=Mt.nextZ}for(;xt&&xt.z>=bt;){if(xt.x>=Ye&&xt.x<=ut&&xt.y>=Ze&&xt.y<=lt&&xt!==A&&xt!==F&&bd(te,Re,se,Oe,be,Ve,xt.x,xt.y)&&Mr(xt.prev,xt,xt.next)>=0)return!1;xt=xt.prevZ}for(;Mt&&Mt.z<=It;){if(Mt.x>=Ye&&Mt.x<=ut&&Mt.y>=Ze&&Mt.y<=lt&&Mt!==A&&Mt!==F&&bd(te,Re,se,Oe,be,Ve,Mt.x,Mt.y)&&Mr(Mt.prev,Mt,Mt.next)>=0)return!1;Mt=Mt.nextZ}return!0}function Ck(c,a,d){var f=c;do{var A=f.prev,z=f.next.next;!Dm(A,z)&&U1(A,f,f.next,z)&&sp(A,z)&&sp(z,A)&&(a.push(A.i/d|0),a.push(f.i/d|0),a.push(z.i/d|0),ap(f),ap(f.next),f=c=z),f=f.next}while(f!==c);return tu(f)}function Tk(c,a,d,f,A,z){var F=c;do{for(var te=F.next.next;te!==F.prev;){if(F.i!==te.i&&Mk(F,te)){var se=V1(F,te);return F=tu(F,F.next),se=tu(se,se.next),rp(F,a,d,f,A,z,0),void rp(se,a,d,f,A,z,0)}te=te.next}F=F.next}while(F!==c)}function Sk(c,a){return c.x-a.x}function Ek(c,a){var d=function(A,z){var F,te=z,se=A.x,be=A.y,Re=-1/0;do{if(be<=te.y&&be>=te.next.y&&te.next.y!==te.y){var Oe=te.x+(be-te.y)*(te.next.x-te.x)/(te.next.y-te.y);if(Oe<=se&&Oe>Re&&(Re=Oe,F=te.x<te.next.x?te:te.next,Oe===se))return F}te=te.next}while(te!==z);if(!F)return null;var Ve,Ye=F,Ze=F.x,ut=F.y,lt=1/0;te=F;do se>=te.x&&te.x>=Ze&&se!==te.x&&bd(be<ut?se:Re,be,Ze,ut,be<ut?Re:se,be,te.x,te.y)&&(Ve=Math.abs(be-te.y)/(se-te.x),sp(te,A)&&(Ve<lt||Ve===lt&&(te.x>F.x||te.x===F.x&&kk(F,te)))&&(F=te,lt=Ve)),te=te.next;while(te!==Ye);return F}(c,a);if(!d)return a;var f=V1(d,c);return tu(f,f.next),tu(d,d.next)}function kk(c,a){return Mr(c.prev,c,a.prev)<0&&Mr(a.next,c,c.next)<0}function Lx(c,a,d,f,A){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-d)*A|0)|c<<8))|c<<4))|c<<2))|c<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-f)*A|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function Ak(c){var a=c,d=c;do(a.x<d.x||a.x===d.x&&a.y<d.y)&&(d=a),a=a.next;while(a!==c);return d}function bd(c,a,d,f,A,z,F,te){return(A-F)*(a-te)>=(c-F)*(z-te)&&(c-F)*(f-te)>=(d-F)*(a-te)&&(d-F)*(z-te)>=(A-F)*(f-te)}function Mk(c,a){return c.next.i!==a.i&&c.prev.i!==a.i&&!function(d,f){var A=d;do{if(A.i!==d.i&&A.next.i!==d.i&&A.i!==f.i&&A.next.i!==f.i&&U1(A,A.next,d,f))return!0;A=A.next}while(A!==d);return!1}(c,a)&&(sp(c,a)&&sp(a,c)&&function(d,f){var A=d,z=!1,F=(d.x+f.x)/2,te=(d.y+f.y)/2;do A.y>te!=A.next.y>te&&A.next.y!==A.y&&F<(A.next.x-A.x)*(te-A.y)/(A.next.y-A.y)+A.x&&(z=!z),A=A.next;while(A!==d);return z}(c,a)&&(Mr(c.prev,c,a.prev)||Mr(c,a.prev,a))||Dm(c,a)&&Mr(c.prev,c,c.next)>0&&Mr(a.prev,a,a.next)>0)}function Mr(c,a,d){return(a.y-c.y)*(d.x-a.x)-(a.x-c.x)*(d.y-a.y)}function Dm(c,a){return c.x===a.x&&c.y===a.y}function U1(c,a,d,f){var A=Lm(Mr(c,a,d)),z=Lm(Mr(c,a,f)),F=Lm(Mr(d,f,c)),te=Lm(Mr(d,f,a));return A!==z&&F!==te||!(A!==0||!Rm(c,d,a))||!(z!==0||!Rm(c,f,a))||!(F!==0||!Rm(d,c,f))||!(te!==0||!Rm(d,a,f))}function Rm(c,a,d){return a.x<=Math.max(c.x,d.x)&&a.x>=Math.min(c.x,d.x)&&a.y<=Math.max(c.y,d.y)&&a.y>=Math.min(c.y,d.y)}function Lm(c){return c>0?1:c<0?-1:0}function sp(c,a){return Mr(c.prev,c,c.next)<0?Mr(c,a,c.next)>=0&&Mr(c,c.prev,a)>=0:Mr(c,a,c.prev)<0||Mr(c,c.next,a)<0}function V1(c,a){var d=new zx(c.i,c.x,c.y),f=new zx(a.i,a.x,a.y),A=c.next,z=a.prev;return c.next=a,a.prev=c,d.next=A,A.prev=d,f.next=d,d.prev=f,z.next=f,f.prev=z,f}function G1(c,a,d,f){var A=new zx(c,a,d);return f?(A.next=f.next,A.prev=f,f.next.prev=A,f.next=A):(A.prev=A,A.next=A),A}function ap(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function zx(c,a,d){this.i=c,this.x=a,this.y=d,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Nx(c,a,d,f){for(var A=0,z=a,F=d-f;z<d;z+=f)A+=(c[F]-c[z])*(c[z+1]+c[F+1]),F=z;return A}function Pk(c,a,d,f,A){H1(c,a,d,f||c.length-1,A)}function H1(c,a,d,f,A){for(;f>d;){if(f-d>600){var z=f-d+1,F=a-d+1,te=Math.log(z),se=.5*Math.exp(2*te/3),be=.5*Math.sqrt(te*se*(z-se)/z)*(F-z/2<0?-1:1);H1(c,a,Math.max(d,Math.floor(a-F*se/z+be)),Math.min(f,Math.floor(a+(z-F)*se/z+be)),A)}var Re=c[a],Oe=d,Ve=f;for(op(c,d,a),A(c[f],Re)>0&&op(c,d,f);Oe<Ve;){for(op(c,Oe,Ve),Oe++,Ve--;A(c[Oe],Re)<0;)Oe++;for(;A(c[Ve],Re)>0;)Ve--}A(c[d],Re)===0?op(c,d,Ve):op(c,++Ve,f),Ve<=a&&(d=Ve+1),a<=Ve&&(f=Ve-1)}}function op(c,a,d){var f=c[a];c[a]=c[d],c[d]=f}function Ox(c,a){const d=c.length;if(d<=1)return[c];const f=[];let A,z;for(let F=0;F<d;F++){const te=N(c[F]);te!==0&&(c[F].area=Math.abs(te),z===void 0&&(z=te<0),z===te<0?(A&&f.push(A),A=[c[F]]):A.push(c[F]))}if(A&&f.push(A),a>1)for(let F=0;F<f.length;F++)f[F].length<=a||(Pk(f[F],a,1,f[F].length-1,Ik),f[F]=f[F].slice(0,a));return f}function Ik(c,a){return a.area-c.area}function jx(c,a,d){const f=d.patternDependencies;let A=!1;for(const z of a){const F=z.paint.get(`${c}-pattern`);F.isConstant()||(A=!0);const te=F.constantOr(null);te&&(A=!0,f[te.to]=!0,f[te.from]=!0)}return A}function Fx(c,a,d,f,A){const z=A.patternDependencies;for(const F of a){const te=F.paint.get(`${c}-pattern`).value;if(te.kind!=="constant"){let se=te.evaluate({zoom:f-1},d,{},A.availableImages),be=te.evaluate({zoom:f},d,{},A.availableImages),Re=te.evaluate({zoom:f+1},d,{},A.availableImages);se=se&&se.name?se.name:se,be=be&&be.name?be.name:be,Re=Re&&Re.name?Re.name:Re,z[se]=!0,z[be]=!0,z[Re]=!0,d.patterns[F.id]={min:se,mid:be,max:Re}}}return d}Pm.exports=Im,Pm.exports.default=Im,Im.deviation=function(c,a,d,f){var A=a&&a.length,z=Math.abs(Nx(c,0,A?a[0]*d:c.length,d));if(A)for(var F=0,te=a.length;F<te;F++)z-=Math.abs(Nx(c,a[F]*d,F<te-1?a[F+1]*d:c.length,d));var se=0;for(F=0;F<f.length;F+=3){var be=f[F]*d,Re=f[F+1]*d,Oe=f[F+2]*d;se+=Math.abs((c[be]-c[Oe])*(c[Re+1]-c[be+1])-(c[be]-c[Re])*(c[Oe+1]-c[be+1]))}return z===0&&se===0?0:Math.abs((se-z)/z)},Im.flatten=function(c){for(var a=c[0][0].length,d={vertices:[],holes:[],dimensions:a},f=0,A=0;A<c.length;A++){for(var z=0;z<c[A].length;z++)for(var F=0;F<a;F++)d.vertices.push(c[A][z][F]);A>0&&d.holes.push(f+=c[A-1].length)}return d};class Bx{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Bn,this.indexArray=new ss,this.indexArray2=new Ia,this.programConfigurations=new Qc(a.layers,a.zoom),this.segments=new kn,this.segments2=new kn,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(a,d,f){this.hasPattern=jx("fill",this.layers,d);const A=this.layers[0].layout.get("fill-sort-key"),z=!A.isConstant(),F=[];for(const{feature:te,id:se,index:be,sourceLayerIndex:Re}of a){const Oe=this.layers[0]._featureFilter.needGeometry,Ve=eu(te,Oe);if(!this.layers[0]._featureFilter.filter(new or(this.zoom),Ve,f))continue;const Ye=z?A.evaluate(Ve,{},f,d.availableImages):void 0,Ze={id:se,properties:te.properties,type:te.type,sourceLayerIndex:Re,index:be,geometry:Oe?Ve.geometry:Jc(te),patterns:{},sortKey:Ye};F.push(Ze)}z&&F.sort((te,se)=>te.sortKey-se.sortKey);for(const te of F){const{geometry:se,index:be,sourceLayerIndex:Re}=te;if(this.hasPattern){const Oe=Fx("fill",this.layers,te,this.zoom,d);this.patternFeatures.push(Oe)}else this.addFeature(te,se,be,f,{});d.featureIndex.insert(a[be].feature,se,be,Re,this.index)}}update(a,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,d,this.stateDependentLayers,f)}addFeatures(a,d,f){for(const A of this.patternFeatures)this.addFeature(A,A.geometry,A.index,d,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,bk),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,d,f,A,z){for(const F of Ox(d,500)){let te=0;for(const Ye of F)te+=Ye.length;const se=this.segments.prepareSegment(te,this.layoutVertexArray,this.indexArray),be=se.vertexLength,Re=[],Oe=[];for(const Ye of F){if(Ye.length===0)continue;Ye!==F[0]&&Oe.push(Re.length/2);const Ze=this.segments2.prepareSegment(Ye.length,this.layoutVertexArray,this.indexArray2),ut=Ze.vertexLength;this.layoutVertexArray.emplaceBack(Ye[0].x,Ye[0].y),this.indexArray2.emplaceBack(ut+Ye.length-1,ut),Re.push(Ye[0].x),Re.push(Ye[0].y);for(let lt=1;lt<Ye.length;lt++)this.layoutVertexArray.emplaceBack(Ye[lt].x,Ye[lt].y),this.indexArray2.emplaceBack(ut+lt-1,ut+lt),Re.push(Ye[lt].x),Re.push(Ye[lt].y);Ze.vertexLength+=Ye.length,Ze.primitiveLength+=Ye.length}const Ve=Pm.exports(Re,Oe);for(let Ye=0;Ye<Ve.length;Ye+=3)this.indexArray.emplaceBack(be+Ve[Ye],be+Ve[Ye+1],be+Ve[Ye+2]);se.vertexLength+=te,se.primitiveLength+=Ve.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,z,A)}}fi("FillBucket",Bx,{omit:["layers","patternFeatures"]});const Dk=new Ur({"fill-sort-key":new Di(Pe.layout_fill["fill-sort-key"])});var Rk={paint:new Ur({"fill-antialias":new Ei(Pe.paint_fill["fill-antialias"]),"fill-opacity":new Di(Pe.paint_fill["fill-opacity"]),"fill-color":new Di(Pe.paint_fill["fill-color"]),"fill-outline-color":new Di(Pe.paint_fill["fill-outline-color"]),"fill-translate":new Ei(Pe.paint_fill["fill-translate"]),"fill-translate-anchor":new Ei(Pe.paint_fill["fill-translate-anchor"]),"fill-pattern":new qc(Pe.paint_fill["fill-pattern"])}),layout:Dk};const Lk=zr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),zk=zr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Nk}=Lk;var Hl={},Ok=G,W1=_d;function _d(c,a,d,f,A){this.properties={},this.extent=d,this.type=0,this._pbf=c,this._geometry=-1,this._keys=f,this._values=A,c.readFields(jk,this,a)}function jk(c,a,d){c==1?a.id=d.readVarint():c==2?function(f,A){for(var z=f.readVarint()+f.pos;f.pos<z;){var F=A._keys[f.readVarint()],te=A._values[f.readVarint()];A.properties[F]=te}}(d,a):c==3?a.type=d.readVarint():c==4&&(a._geometry=d.pos)}function Fk(c){for(var a,d,f=0,A=0,z=c.length,F=z-1;A<z;F=A++)f+=((d=c[F]).x-(a=c[A]).x)*(a.y+d.y);return f}_d.types=["Unknown","Point","LineString","Polygon"],_d.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var a,d=c.readVarint()+c.pos,f=1,A=0,z=0,F=0,te=[];c.pos<d;){if(A<=0){var se=c.readVarint();f=7&se,A=se>>3}if(A--,f===1||f===2)z+=c.readSVarint(),F+=c.readSVarint(),f===1&&(a&&te.push(a),a=[]),a.push(new Ok(z,F));else{if(f!==7)throw new Error("unknown command "+f);a&&a.push(a[0].clone())}}return a&&te.push(a),te},_d.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var a=c.readVarint()+c.pos,d=1,f=0,A=0,z=0,F=1/0,te=-1/0,se=1/0,be=-1/0;c.pos<a;){if(f<=0){var Re=c.readVarint();d=7&Re,f=Re>>3}if(f--,d===1||d===2)(A+=c.readSVarint())<F&&(F=A),A>te&&(te=A),(z+=c.readSVarint())<se&&(se=z),z>be&&(be=z);else if(d!==7)throw new Error("unknown command "+d)}return[F,se,te,be]},_d.prototype.toGeoJSON=function(c,a,d){var f,A,z=this.extent*Math.pow(2,d),F=this.extent*c,te=this.extent*a,se=this.loadGeometry(),be=_d.types[this.type];function Re(Ye){for(var Ze=0;Ze<Ye.length;Ze++){var ut=Ye[Ze];Ye[Ze]=[360*(ut.x+F)/z-180,360/Math.PI*Math.atan(Math.exp((180-360*(ut.y+te)/z)*Math.PI/180))-90]}}switch(this.type){case 1:var Oe=[];for(f=0;f<se.length;f++)Oe[f]=se[f][0];Re(se=Oe);break;case 2:for(f=0;f<se.length;f++)Re(se[f]);break;case 3:for(se=function(Ye){var Ze=Ye.length;if(Ze<=1)return[Ye];for(var ut,lt,bt=[],It=0;It<Ze;It++){var xt=Fk(Ye[It]);xt!==0&&(lt===void 0&&(lt=xt<0),lt===xt<0?(ut&&bt.push(ut),ut=[Ye[It]]):ut.push(Ye[It]))}return ut&&bt.push(ut),bt}(se),f=0;f<se.length;f++)for(A=0;A<se[f].length;A++)Re(se[f][A])}se.length===1?se=se[0]:be="Multi"+be;var Ve={type:"Feature",geometry:{type:be,coordinates:se},properties:this.properties};return"id"in this&&(Ve.id=this.id),Ve};var Bk=W1,q1=Y1;function Y1(c,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields($k,this,a),this.length=this._features.length}function $k(c,a,d){c===15?a.version=d.readVarint():c===1?a.name=d.readString():c===5?a.extent=d.readVarint():c===2?a._features.push(d.pos):c===3?a._keys.push(d.readString()):c===4&&a._values.push(function(f){for(var A=null,z=f.readVarint()+f.pos;f.pos<z;){var F=f.readVarint()>>3;A=F===1?f.readString():F===2?f.readFloat():F===3?f.readDouble():F===4?f.readVarint64():F===5?f.readVarint():F===6?f.readSVarint():F===7?f.readBoolean():null}return A}(d))}Y1.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var a=this._pbf.readVarint()+this._pbf.pos;return new Bk(this._pbf,a,this.extent,this._keys,this._values)};var Uk=q1;function Vk(c,a,d){if(c===3){var f=new Uk(d,d.readVarint()+d.pos);f.length&&(a[f.name]=f)}}Hl.VectorTile=function(c,a){this.layers=c.readFields(Vk,{},a)},Hl.VectorTileFeature=W1,Hl.VectorTileLayer=q1;const Gk=Hl.VectorTileFeature.types,$x=Math.pow(2,13);function lp(c,a,d,f,A,z,F,te){c.emplaceBack(a,d,2*Math.floor(f*$x)+F,A*$x*2,z*$x*2,Math.round(te))}class Ux{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new $n,this.centroidVertexArray=new un,this.indexArray=new ss,this.programConfigurations=new Qc(a.layers,a.zoom),this.segments=new kn,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(a,d,f){this.features=[],this.hasPattern=jx("fill-extrusion",this.layers,d);for(const{feature:A,id:z,index:F,sourceLayerIndex:te}of a){const se=this.layers[0]._featureFilter.needGeometry,be=eu(A,se);if(!this.layers[0]._featureFilter.filter(new or(this.zoom),be,f))continue;const Re={id:z,sourceLayerIndex:te,index:F,geometry:se?be.geometry:Jc(A),properties:A.properties,type:A.type,patterns:{}};this.hasPattern?this.features.push(Fx("fill-extrusion",this.layers,Re,this.zoom,d)):this.addFeature(Re,Re.geometry,F,f,{}),d.featureIndex.insert(A,Re.geometry,F,te,this.index,!0)}}addFeatures(a,d,f){for(const A of this.features){const{geometry:z}=A;this.addFeature(A,z,A.index,d,f)}}update(a,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,d,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Nk),this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,zk.members,!0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(a,d,f,A,z){const F={x:0,y:0,vertexCount:0};for(const te of Ox(d,500)){let se=0;for(const Ze of te)se+=Ze.length;let be=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ze of te){if(Ze.length===0||Wk(Ze))continue;let ut=0;for(let lt=0;lt<Ze.length;lt++){const bt=Ze[lt];if(lt>=1){const It=Ze[lt-1];if(!Hk(bt,It)){be.vertexLength+4>kn.MAX_VERTEX_ARRAY_LENGTH&&(be=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const xt=bt.sub(It)._perp()._unit(),Mt=It.dist(bt);ut+Mt>32768&&(ut=0),lp(this.layoutVertexArray,bt.x,bt.y,xt.x,xt.y,0,0,ut),lp(this.layoutVertexArray,bt.x,bt.y,xt.x,xt.y,0,1,ut),F.x+=2*bt.x,F.y+=2*bt.y,F.vertexCount+=2,ut+=Mt,lp(this.layoutVertexArray,It.x,It.y,xt.x,xt.y,0,0,ut),lp(this.layoutVertexArray,It.x,It.y,xt.x,xt.y,0,1,ut),F.x+=2*It.x,F.y+=2*It.y,F.vertexCount+=2;const $t=be.vertexLength;this.indexArray.emplaceBack($t,$t+2,$t+1),this.indexArray.emplaceBack($t+1,$t+2,$t+3),be.vertexLength+=4,be.primitiveLength+=2}}}}if(be.vertexLength+se>kn.MAX_VERTEX_ARRAY_LENGTH&&(be=this.segments.prepareSegment(se,this.layoutVertexArray,this.indexArray)),Gk[a.type]!=="Polygon")continue;const Re=[],Oe=[],Ve=be.vertexLength;for(const Ze of te)if(Ze.length!==0){Ze!==te[0]&&Oe.push(Re.length/2);for(let ut=0;ut<Ze.length;ut++){const lt=Ze[ut];lp(this.layoutVertexArray,lt.x,lt.y,0,0,1,1,0),F.x+=lt.x,F.y+=lt.y,F.vertexCount+=1,Re.push(lt.x),Re.push(lt.y)}}const Ye=Pm.exports(Re,Oe);for(let Ze=0;Ze<Ye.length;Ze+=3)this.indexArray.emplaceBack(Ve+Ye[Ze],Ve+Ye[Ze+2],Ve+Ye[Ze+1]);be.primitiveLength+=Ye.length/3,be.vertexLength+=se}for(let te=0;te<F.vertexCount;te++)this.centroidVertexArray.emplaceBack(Math.floor(F.x/F.vertexCount),Math.floor(F.y/F.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,z,A)}}function Hk(c,a){return c.x===a.x&&(c.x<0||c.x>Vr)||c.y===a.y&&(c.y<0||c.y>Vr)}function Wk(c){return c.every(a=>a.x<0)||c.every(a=>a.x>Vr)||c.every(a=>a.y<0)||c.every(a=>a.y>Vr)}fi("FillExtrusionBucket",Ux,{omit:["layers","features"]});var qk={paint:new Ur({"fill-extrusion-opacity":new Ei(Pe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Di(Pe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ei(Pe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ei(Pe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new qc(Pe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Di(Pe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Di(Pe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ei(Pe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function cp(c,a){return c.x*a.x+c.y*a.y}function Z1(c,a){if(c.length===1){let d=0;const f=a[d++];let A;for(;!A||f.equals(A);)if(A=a[d++],!A)return 1/0;for(;d<a.length;d++){const z=a[d],F=c[0],te=A.sub(f),se=z.sub(f),be=F.sub(f),Re=cp(te,te),Oe=cp(te,se),Ve=cp(se,se),Ye=cp(be,te),Ze=cp(be,se),ut=Re*Ve-Oe*Oe,lt=(Ve*Ye-Oe*Ze)/ut,bt=(Re*Ze-Oe*Ye)/ut,It=f.z*(1-lt-bt)+A.z*lt+z.z*bt;if(isFinite(It))return It}return 1/0}{let d=1/0;for(const f of a)d=Math.min(d,f.z);return d}}const Yk=zr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Zk}=Yk,Xk=zr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Kk}=Xk,Qk=Hl.VectorTileFeature.types,Jk=Math.cos(Math.PI/180*37.5),X1=Math.pow(2,14)/.5;class Vx{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(d=>{this.gradients[d.id]={}}),this.layoutVertexArray=new _n,this.layoutVertexArray2=new Cn,this.indexArray=new ss,this.programConfigurations=new Qc(a.layers,a.zoom),this.segments=new kn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(a,d,f){this.hasPattern=jx("line",this.layers,d);const A=this.layers[0].layout.get("line-sort-key"),z=!A.isConstant(),F=[];for(const{feature:te,id:se,index:be,sourceLayerIndex:Re}of a){const Oe=this.layers[0]._featureFilter.needGeometry,Ve=eu(te,Oe);if(!this.layers[0]._featureFilter.filter(new or(this.zoom),Ve,f))continue;const Ye=z?A.evaluate(Ve,{},f):void 0,Ze={id:se,properties:te.properties,type:te.type,sourceLayerIndex:Re,index:be,geometry:Oe?Ve.geometry:Jc(te),patterns:{},sortKey:Ye};F.push(Ze)}z&&F.sort((te,se)=>te.sortKey-se.sortKey);for(const te of F){const{geometry:se,index:be,sourceLayerIndex:Re}=te;if(this.hasPattern){const Oe=Fx("line",this.layers,te,this.zoom,d);this.patternFeatures.push(Oe)}else this.addFeature(te,se,be,f,{});d.featureIndex.insert(a[be].feature,se,be,Re,this.index)}}update(a,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,d,this.stateDependentLayers,f)}addFeatures(a,d,f){for(const A of this.patternFeatures)this.addFeature(A,A.geometry,A.index,d,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,Kk)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Zk),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,d,f,A,z){const F=this.layers[0].layout,te=F.get("line-join").evaluate(a,{}),se=F.get("line-cap"),be=F.get("line-miter-limit"),Re=F.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const Oe of d)this.addLine(Oe,a,te,se,be,Re);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,z,A)}addLine(a,d,f,A,z,F){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let bt=0;bt<a.length-1;bt++)this.totalDistance+=a[bt].dist(a[bt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const te=Qk[d.type]==="Polygon";let se=a.length;for(;se>=2&&a[se-1].equals(a[se-2]);)se--;let be=0;for(;be<se-1&&a[be].equals(a[be+1]);)be++;if(se<(te?3:2))return;f==="bevel"&&(z=1.05);const Re=this.overscaling<=16?122880/(512*this.overscaling):0,Oe=this.segments.prepareSegment(10*se,this.layoutVertexArray,this.indexArray);let Ve,Ye,Ze,ut,lt;this.e1=this.e2=-1,te&&(Ve=a[se-2],lt=a[be].sub(Ve)._unit()._perp());for(let bt=be;bt<se;bt++){if(Ze=bt===se-1?te?a[be+1]:void 0:a[bt+1],Ze&&a[bt].equals(Ze))continue;lt&&(ut=lt),Ve&&(Ye=Ve),Ve=a[bt],lt=Ze?Ze.sub(Ve)._unit()._perp():ut,ut=ut||lt;let It=ut.add(lt);It.x===0&&It.y===0||It._unit();const xt=ut.x*lt.x+ut.y*lt.y,Mt=It.x*lt.x+It.y*lt.y,$t=Mt!==0?1/Mt:1/0,Bt=2*Math.sqrt(2-2*Mt),xi=Mt<Jk&&Ye&&Ze,Ti=ut.x*lt.y-ut.y*lt.x>0;if(xi&&bt>be){const Yt=Ve.dist(Ye);if(Yt>2*Re){const ii=Ve.sub(Ve.sub(Ye)._mult(Re/Yt)._round());this.updateDistance(Ye,ii),this.addCurrentVertex(ii,ut,0,0,Oe),Ye=ii}}const ti=Ye&&Ze;let Xt=ti?f:te?"butt":A;if(ti&&Xt==="round"&&($t<F?Xt="miter":$t<=2&&(Xt="fakeround")),Xt==="miter"&&$t>z&&(Xt="bevel"),Xt==="bevel"&&($t>2&&(Xt="flipbevel"),$t<z&&(Xt="miter")),Ye&&this.updateDistance(Ye,Ve),Xt==="miter")It._mult($t),this.addCurrentVertex(Ve,It,0,0,Oe);else if(Xt==="flipbevel"){if($t>100)It=lt.mult(-1);else{const Yt=$t*ut.add(lt).mag()/ut.sub(lt).mag();It._perp()._mult(Yt*(Ti?-1:1))}this.addCurrentVertex(Ve,It,0,0,Oe),this.addCurrentVertex(Ve,It.mult(-1),0,0,Oe)}else if(Xt==="bevel"||Xt==="fakeround"){const Yt=-Math.sqrt($t*$t-1),ii=Ti?Yt:0,Qt=Ti?0:Yt;if(Ye&&this.addCurrentVertex(Ve,ut,ii,Qt,Oe),Xt==="fakeround"){const Vt=Math.round(180*Bt/Math.PI/20);for(let Mi=1;Mi<Vt;Mi++){let ki=Mi/Vt;if(ki!==.5){const rr=ki-.5;ki+=ki*rr*(ki-1)*((1.0904+xt*(xt*(3.55645-1.43519*xt)-3.2452))*rr*rr+(.848013+xt*(.215638*xt-1.06021)))}const dn=lt.sub(ut)._mult(ki)._add(ut)._unit()._mult(Ti?-1:1);this.addHalfVertex(Ve,dn.x,dn.y,!1,Ti,0,Oe)}}Ze&&this.addCurrentVertex(Ve,lt,-ii,-Qt,Oe)}else if(Xt==="butt")this.addCurrentVertex(Ve,It,0,0,Oe);else if(Xt==="square"){const Yt=Ye?1:-1;this.addCurrentVertex(Ve,It,Yt,Yt,Oe)}else Xt==="round"&&(Ye&&(this.addCurrentVertex(Ve,ut,0,0,Oe),this.addCurrentVertex(Ve,ut,1,1,Oe,!0)),Ze&&(this.addCurrentVertex(Ve,lt,-1,-1,Oe,!0),this.addCurrentVertex(Ve,lt,0,0,Oe)));if(xi&&bt<se-1){const Yt=Ve.dist(Ze);if(Yt>2*Re){const ii=Ve.add(Ze.sub(Ve)._mult(Re/Yt)._round());this.updateDistance(Ve,ii),this.addCurrentVertex(ii,lt,0,0,Oe),Ve=ii}}}}addCurrentVertex(a,d,f,A,z,F=!1){const te=d.y*A-d.x,se=-d.y-d.x*A;this.addHalfVertex(a,d.x+d.y*f,d.y-d.x*f,F,!1,f,z),this.addHalfVertex(a,te,se,F,!0,-A,z),this.distance>X1/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(a,d,f,A,z,F))}addHalfVertex({x:a,y:d},f,A,z,F,te,se){const be=.5*(this.lineClips?this.scaledDistance*(X1-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a<<1)+(z?1:0),(d<<1)+(F?1:0),Math.round(63*f)+128,Math.round(63*A)+128,1+(te===0?0:te<0?-1:1)|(63&be)<<2,be>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Re=se.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Re),se.primitiveLength++),F?this.e2=Re:this.e1=Re}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(a,d){this.distance+=a.dist(d),this.updateScaledDistance()}}fi("LineBucket",Vx,{omit:["layers","patternFeatures"]});const eA=new Ur({"line-cap":new Ei(Pe.layout_line["line-cap"]),"line-join":new Di(Pe.layout_line["line-join"]),"line-miter-limit":new Ei(Pe.layout_line["line-miter-limit"]),"line-round-limit":new Ei(Pe.layout_line["line-round-limit"]),"line-sort-key":new Di(Pe.layout_line["line-sort-key"])});var K1={paint:new Ur({"line-opacity":new Di(Pe.paint_line["line-opacity"]),"line-color":new Di(Pe.paint_line["line-color"]),"line-translate":new Ei(Pe.paint_line["line-translate"]),"line-translate-anchor":new Ei(Pe.paint_line["line-translate-anchor"]),"line-width":new Di(Pe.paint_line["line-width"]),"line-gap-width":new Di(Pe.paint_line["line-gap-width"]),"line-offset":new Di(Pe.paint_line["line-offset"]),"line-blur":new Di(Pe.paint_line["line-blur"]),"line-dasharray":new Yc(Pe.paint_line["line-dasharray"]),"line-pattern":new qc(Pe.paint_line["line-pattern"]),"line-gradient":new Qh(Pe.paint_line["line-gradient"])}),layout:eA};const Q1=new class extends Di{possiblyEvaluate(c,a){return a=new or(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(c,a)}evaluate(c,a,d,f){return a=_({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(c,a,d,f)}}(K1.paint.properties["line-width"].specification);function J1(c,a){return a>0?a+2*c:c}Q1.useIntegerZoom=!0;const tA=zr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),iA=zr([{name:"a_projected_pos",components:3,type:"Float32"}],4);zr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const nA=zr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);zr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const e_=zr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),rA=zr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function sA(c,a,d){return c.sections.forEach(f=>{f.text=function(A,z,F){const te=z.layout.get("text-transform").evaluate(F,{});return te==="uppercase"?A=A.toLocaleUpperCase():te==="lowercase"&&(A=A.toLocaleLowerCase()),va.applyArabicShaping&&(A=va.applyArabicShaping(A)),A}(f.text,a,d)}),c}zr([{name:"triangle",components:3,type:"Uint16"}]),zr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),zr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),zr([{type:"Float32",name:"offsetX"}]),zr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const up={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var as=24,Gx=Wn,t_=function(c,a,d,f,A){var z,F,te=8*A-f-1,se=(1<<te)-1,be=se>>1,Re=-7,Oe=A-1,Ve=-1,Ye=c[a+Oe];for(Oe+=Ve,z=Ye&(1<<-Re)-1,Ye>>=-Re,Re+=te;Re>0;z=256*z+c[a+Oe],Oe+=Ve,Re-=8);for(F=z&(1<<-Re)-1,z>>=-Re,Re+=f;Re>0;F=256*F+c[a+Oe],Oe+=Ve,Re-=8);if(z===0)z=1-be;else{if(z===se)return F?NaN:1/0*(Ye?-1:1);F+=Math.pow(2,f),z-=be}return(Ye?-1:1)*F*Math.pow(2,z-f)},i_=function(c,a,d,f,A,z){var F,te,se,be=8*z-A-1,Re=(1<<be)-1,Oe=Re>>1,Ve=A===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ye=0,Ze=1,ut=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(te=isNaN(a)?1:0,F=Re):(F=Math.floor(Math.log(a)/Math.LN2),a*(se=Math.pow(2,-F))<1&&(F--,se*=2),(a+=F+Oe>=1?Ve/se:Ve*Math.pow(2,1-Oe))*se>=2&&(F++,se/=2),F+Oe>=Re?(te=0,F=Re):F+Oe>=1?(te=(a*se-1)*Math.pow(2,A),F+=Oe):(te=a*Math.pow(2,Oe-1)*Math.pow(2,A),F=0));A>=8;c[d+Ye]=255&te,Ye+=Ze,te/=256,A-=8);for(F=F<<A|te,be+=A;be>0;c[d+Ye]=255&F,Ye+=Ze,F/=256,be-=8);c[d+Ye-Ze]|=128*ut};function Wn(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}Wn.Varint=0,Wn.Fixed64=1,Wn.Bytes=2,Wn.Fixed32=5;var Wl,Hx=4294967296,n_=1/Hx,r_=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ul(c){return c.type===Wn.Bytes?c.readVarint()+c.pos:c.pos+1}function wd(c,a,d){return d?4294967296*a+(c>>>0):4294967296*(a>>>0)+(c>>>0)}function s_(c,a,d){var f=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));d.realloc(f);for(var A=d.pos-1;A>=c;A--)d.buf[A+f]=d.buf[A]}function aA(c,a){for(var d=0;d<c.length;d++)a.writeVarint(c[d])}function oA(c,a){for(var d=0;d<c.length;d++)a.writeSVarint(c[d])}function lA(c,a){for(var d=0;d<c.length;d++)a.writeFloat(c[d])}function cA(c,a){for(var d=0;d<c.length;d++)a.writeDouble(c[d])}function uA(c,a){for(var d=0;d<c.length;d++)a.writeBoolean(c[d])}function dA(c,a){for(var d=0;d<c.length;d++)a.writeFixed32(c[d])}function hA(c,a){for(var d=0;d<c.length;d++)a.writeSFixed32(c[d])}function pA(c,a){for(var d=0;d<c.length;d++)a.writeFixed64(c[d])}function fA(c,a){for(var d=0;d<c.length;d++)a.writeSFixed64(c[d])}function zm(c,a){return(c[a]|c[a+1]<<8|c[a+2]<<16)+16777216*c[a+3]}function Cd(c,a,d){c[d]=a,c[d+1]=a>>>8,c[d+2]=a>>>16,c[d+3]=a>>>24}function a_(c,a){return(c[a]|c[a+1]<<8|c[a+2]<<16)+(c[a+3]<<24)}function mA(c,a,d){c===1&&d.readMessage(gA,a)}function gA(c,a,d){if(c===3){const{id:f,bitmap:A,width:z,height:F,left:te,top:se,advance:be}=d.readMessage(yA,{});a.push({id:f,bitmap:new np({width:z+6,height:F+6},A),metrics:{width:z,height:F,left:te,top:se,advance:be}})}}function yA(c,a,d){c===1?a.id=d.readVarint():c===2?a.bitmap=d.readBytes():c===3?a.width=d.readVarint():c===4?a.height=d.readVarint():c===5?a.left=d.readSVarint():c===6?a.top=d.readSVarint():c===7&&(a.advance=d.readVarint())}function o_(c){let a=0,d=0;for(const F of c)a+=F.w*F.h,d=Math.max(d,F.w);c.sort((F,te)=>te.h-F.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),d),h:1/0}];let A=0,z=0;for(const F of c)for(let te=f.length-1;te>=0;te--){const se=f[te];if(!(F.w>se.w||F.h>se.h)){if(F.x=se.x,F.y=se.y,z=Math.max(z,F.y+F.h),A=Math.max(A,F.x+F.w),F.w===se.w&&F.h===se.h){const be=f.pop();te<f.length&&(f[te]=be)}else F.h===se.h?(se.x+=F.w,se.w-=F.w):F.w===se.w?(se.y+=F.h,se.h-=F.h):(f.push({x:se.x+F.w,y:se.y,w:se.w-F.w,h:F.h}),se.y+=F.h,se.h-=F.h);break}}return{w:A,h:z,fill:a/(A*z)||0}}Wn.prototype={destroy:function(){this.buf=null},readFields:function(c,a,d){for(d=d||this.length;this.pos<d;){var f=this.readVarint(),A=f>>3,z=this.pos;this.type=7&f,c(A,a,this),this.pos===z&&this.skip(f)}return a},readMessage:function(c,a){return this.readFields(c,a,this.readVarint()+this.pos)},readFixed32:function(){var c=zm(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=a_(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=zm(this.buf,this.pos)+zm(this.buf,this.pos+4)*Hx;return this.pos+=8,c},readSFixed64:function(){var c=zm(this.buf,this.pos)+a_(this.buf,this.pos+4)*Hx;return this.pos+=8,c},readFloat:function(){var c=t_(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=t_(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var a,d,f=this.buf;return a=127&(d=f[this.pos++]),d<128?a:(a|=(127&(d=f[this.pos++]))<<7,d<128?a:(a|=(127&(d=f[this.pos++]))<<14,d<128?a:(a|=(127&(d=f[this.pos++]))<<21,d<128?a:function(A,z,F){var te,se,be=F.buf;if(te=(112&(se=be[F.pos++]))>>4,se<128||(te|=(127&(se=be[F.pos++]))<<3,se<128)||(te|=(127&(se=be[F.pos++]))<<10,se<128)||(te|=(127&(se=be[F.pos++]))<<17,se<128)||(te|=(127&(se=be[F.pos++]))<<24,se<128)||(te|=(1&(se=be[F.pos++]))<<31,se<128))return wd(A,te,z);throw new Error("Expected varint not more than 10 bytes")}(a|=(15&(d=f[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,a=this.pos;return this.pos=c,c-a>=12&&r_?function(d,f,A){return r_.decode(d.subarray(f,A))}(this.buf,a,c):function(d,f,A){for(var z="",F=f;F<A;){var te,se,be,Re=d[F],Oe=null,Ve=Re>239?4:Re>223?3:Re>191?2:1;if(F+Ve>A)break;Ve===1?Re<128&&(Oe=Re):Ve===2?(192&(te=d[F+1]))==128&&(Oe=(31&Re)<<6|63&te)<=127&&(Oe=null):Ve===3?(se=d[F+2],(192&(te=d[F+1]))==128&&(192&se)==128&&((Oe=(15&Re)<<12|(63&te)<<6|63&se)<=2047||Oe>=55296&&Oe<=57343)&&(Oe=null)):Ve===4&&(se=d[F+2],be=d[F+3],(192&(te=d[F+1]))==128&&(192&se)==128&&(192&be)==128&&((Oe=(15&Re)<<18|(63&te)<<12|(63&se)<<6|63&be)<=65535||Oe>=1114112)&&(Oe=null)),Oe===null?(Oe=65533,Ve=1):Oe>65535&&(Oe-=65536,z+=String.fromCharCode(Oe>>>10&1023|55296),Oe=56320|1023&Oe),z+=String.fromCharCode(Oe),F+=Ve}return z}(this.buf,a,c)},readBytes:function(){var c=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,c);return this.pos=c,a},readPackedVarint:function(c,a){if(this.type!==Wn.Bytes)return c.push(this.readVarint(a));var d=ul(this);for(c=c||[];this.pos<d;)c.push(this.readVarint(a));return c},readPackedSVarint:function(c){if(this.type!==Wn.Bytes)return c.push(this.readSVarint());var a=ul(this);for(c=c||[];this.pos<a;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==Wn.Bytes)return c.push(this.readBoolean());var a=ul(this);for(c=c||[];this.pos<a;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==Wn.Bytes)return c.push(this.readFloat());var a=ul(this);for(c=c||[];this.pos<a;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==Wn.Bytes)return c.push(this.readDouble());var a=ul(this);for(c=c||[];this.pos<a;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==Wn.Bytes)return c.push(this.readFixed32());var a=ul(this);for(c=c||[];this.pos<a;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==Wn.Bytes)return c.push(this.readSFixed32());var a=ul(this);for(c=c||[];this.pos<a;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==Wn.Bytes)return c.push(this.readFixed64());var a=ul(this);for(c=c||[];this.pos<a;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==Wn.Bytes)return c.push(this.readSFixed64());var a=ul(this);for(c=c||[];this.pos<a;)c.push(this.readSFixed64());return c},skip:function(c){var a=7&c;if(a===Wn.Varint)for(;this.buf[this.pos++]>127;);else if(a===Wn.Bytes)this.pos=this.readVarint()+this.pos;else if(a===Wn.Fixed32)this.pos+=4;else{if(a!==Wn.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(c,a){this.writeVarint(c<<3|a)},realloc:function(c){for(var a=this.length||16;a<this.pos+c;)a*=2;if(a!==this.length){var d=new Uint8Array(a);d.set(this.buf),this.buf=d,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),Cd(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),Cd(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),Cd(this.buf,-1&c,this.pos),Cd(this.buf,Math.floor(c*n_),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),Cd(this.buf,-1&c,this.pos),Cd(this.buf,Math.floor(c*n_),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(a,d){var f,A;if(a>=0?(f=a%4294967296|0,A=a/4294967296|0):(A=~(-a/4294967296),4294967295^(f=~(-a%4294967296))?f=f+1|0:(f=0,A=A+1|0)),a>=18446744073709552e3||a<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),function(z,F,te){te.buf[te.pos++]=127&z|128,z>>>=7,te.buf[te.pos++]=127&z|128,z>>>=7,te.buf[te.pos++]=127&z|128,z>>>=7,te.buf[te.pos++]=127&z|128,te.buf[te.pos]=127&(z>>>=7)}(f,0,d),function(z,F){var te=(7&z)<<4;F.buf[F.pos++]|=te|((z>>>=3)?128:0),z&&(F.buf[F.pos++]=127&z|((z>>>=7)?128:0),z&&(F.buf[F.pos++]=127&z|((z>>>=7)?128:0),z&&(F.buf[F.pos++]=127&z|((z>>>=7)?128:0),z&&(F.buf[F.pos++]=127&z|((z>>>=7)?128:0),z&&(F.buf[F.pos++]=127&z)))))}(A,d)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var a=this.pos;this.pos=function(f,A,z){for(var F,te,se=0;se<A.length;se++){if((F=A.charCodeAt(se))>55295&&F<57344){if(!te){F>56319||se+1===A.length?(f[z++]=239,f[z++]=191,f[z++]=189):te=F;continue}if(F<56320){f[z++]=239,f[z++]=191,f[z++]=189,te=F;continue}F=te-55296<<10|F-56320|65536,te=null}else te&&(f[z++]=239,f[z++]=191,f[z++]=189,te=null);F<128?f[z++]=F:(F<2048?f[z++]=F>>6|192:(F<65536?f[z++]=F>>12|224:(f[z++]=F>>18|240,f[z++]=F>>12&63|128),f[z++]=F>>6&63|128),f[z++]=63&F|128)}return z}(this.buf,c,this.pos);var d=this.pos-a;d>=128&&s_(a,d,this),this.pos=a-1,this.writeVarint(d),this.pos+=d},writeFloat:function(c){this.realloc(4),i_(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),i_(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var a=c.length;this.writeVarint(a),this.realloc(a);for(var d=0;d<a;d++)this.buf[this.pos++]=c[d]},writeRawMessage:function(c,a){this.pos++;var d=this.pos;c(a,this);var f=this.pos-d;f>=128&&s_(d,f,this),this.pos=d-1,this.writeVarint(f),this.pos+=f},writeMessage:function(c,a,d){this.writeTag(c,Wn.Bytes),this.writeRawMessage(a,d)},writePackedVarint:function(c,a){a.length&&this.writeMessage(c,aA,a)},writePackedSVarint:function(c,a){a.length&&this.writeMessage(c,oA,a)},writePackedBoolean:function(c,a){a.length&&this.writeMessage(c,uA,a)},writePackedFloat:function(c,a){a.length&&this.writeMessage(c,lA,a)},writePackedDouble:function(c,a){a.length&&this.writeMessage(c,cA,a)},writePackedFixed32:function(c,a){a.length&&this.writeMessage(c,dA,a)},writePackedSFixed32:function(c,a){a.length&&this.writeMessage(c,hA,a)},writePackedFixed64:function(c,a){a.length&&this.writeMessage(c,pA,a)},writePackedSFixed64:function(c,a){a.length&&this.writeMessage(c,fA,a)},writeBytesField:function(c,a){this.writeTag(c,Wn.Bytes),this.writeBytes(a)},writeFixed32Field:function(c,a){this.writeTag(c,Wn.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(c,a){this.writeTag(c,Wn.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(c,a){this.writeTag(c,Wn.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(c,a){this.writeTag(c,Wn.Fixed64),this.writeSFixed64(a)},writeVarintField:function(c,a){this.writeTag(c,Wn.Varint),this.writeVarint(a)},writeSVarintField:function(c,a){this.writeTag(c,Wn.Varint),this.writeSVarint(a)},writeStringField:function(c,a){this.writeTag(c,Wn.Bytes),this.writeString(a)},writeFloatField:function(c,a){this.writeTag(c,Wn.Fixed32),this.writeFloat(a)},writeDoubleField:function(c,a){this.writeTag(c,Wn.Fixed64),this.writeDouble(a)},writeBooleanField:function(c,a){this.writeVarintField(c,!!a)}};class Wx{constructor(a,{pixelRatio:d,version:f,stretchX:A,stretchY:z,content:F}){this.paddedRect=a,this.pixelRatio=d,this.stretchX=A,this.stretchY=z,this.content=F,this.version=f}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class l_{constructor(a,d){const f={},A={};this.haveRenderCallbacks=[];const z=[];this.addImages(a,f,z),this.addImages(d,A,z);const{w:F,h:te}=o_(z),se=new Ra({width:F||1,height:te||1});for(const be in a){const Re=a[be],Oe=f[be].paddedRect;Ra.copy(Re.data,se,{x:0,y:0},{x:Oe.x+1,y:Oe.y+1},Re.data)}for(const be in d){const Re=d[be],Oe=A[be].paddedRect,Ve=Oe.x+1,Ye=Oe.y+1,Ze=Re.data.width,ut=Re.data.height;Ra.copy(Re.data,se,{x:0,y:0},{x:Ve,y:Ye},Re.data),Ra.copy(Re.data,se,{x:0,y:ut-1},{x:Ve,y:Ye-1},{width:Ze,height:1}),Ra.copy(Re.data,se,{x:0,y:0},{x:Ve,y:Ye+ut},{width:Ze,height:1}),Ra.copy(Re.data,se,{x:Ze-1,y:0},{x:Ve-1,y:Ye},{width:1,height:ut}),Ra.copy(Re.data,se,{x:0,y:0},{x:Ve+Ze,y:Ye},{width:1,height:ut})}this.image=se,this.iconPositions=f,this.patternPositions=A}addImages(a,d,f){for(const A in a){const z=a[A],F={x:0,y:0,w:z.data.width+2,h:z.data.height+2};f.push(F),d[A]=new Wx(F,z),z.hasRenderCallback&&this.haveRenderCallbacks.push(A)}}patchUpdatedImages(a,d){a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in a.updatedImages)this.patchUpdatedImage(this.iconPositions[f],a.getImage(f),d),this.patchUpdatedImage(this.patternPositions[f],a.getImage(f),d)}patchUpdatedImage(a,d,f){if(!a||!d||a.version===d.version)return;a.version=d.version;const[A,z]=a.tl;f.update(d.data,void 0,{x:A,y:z})}}fi("ImagePosition",Wx),fi("ImageAtlas",l_),n.WritingMode=void 0,(Wl=n.WritingMode||(n.WritingMode={}))[Wl.none=0]="none",Wl[Wl.horizontal=1]="horizontal",Wl[Wl.vertical=2]="vertical",Wl[Wl.horizontalOnly=3]="horizontalOnly";const Nm=-17;class dp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,d){const f=new dp;return f.scale=a||1,f.fontStack=d,f}static forImage(a){const d=new dp;return d.imageName=a,d}}class Td{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,d){const f=new Td;for(let A=0;A<a.sections.length;A++){const z=a.sections[A];z.image?f.addImageSection(z):f.addTextSection(z,d)}return f}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(){this.text=function(a){let d="";for(let f=0;f<a.length;f++){const A=a.charCodeAt(f+1)||null,z=a.charCodeAt(f-1)||null;d+=A&&bm(A)&&!up[a[f+1]]||z&&bm(z)&&!up[a[f-1]]||!up[a[f]]?a[f]:up[a[f]]}return d}(this.text)}trim(){let a=0;for(let f=0;f<this.text.length&&jm[this.text.charCodeAt(f)];f++)a++;let d=this.text.length;for(let f=this.text.length-1;f>=0&&f>=a&&jm[this.text.charCodeAt(f)];f--)d--;this.text=this.text.substring(a,d),this.sectionIndex=this.sectionIndex.slice(a,d)}substring(a,d){const f=new Td;return f.text=this.text.substring(a,d),f.sectionIndex=this.sectionIndex.slice(a,d),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,d)=>Math.max(a,this.sections[d].scale),0)}addTextSection(a,d){this.text+=a.text,this.sections.push(dp.forText(a.scale,a.fontStack||d));const f=this.sections.length-1;for(let A=0;A<a.text.length;++A)this.sectionIndex.push(f)}addImageSection(a){const d=a.image?a.image.name:"";if(d.length===0)return void T("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(dp.forImage(d)),this.sectionIndex.push(this.sections.length-1)):T("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Om(c,a,d,f,A,z,F,te,se,be,Re,Oe,Ve,Ye,Ze,ut){const lt=Td.fromFeature(c,A);let bt;Oe===n.WritingMode.vertical&&lt.verticalizePunctuation();const{processBidirectionalText:It,processStyledBidirectionalText:xt}=va;if(It&&lt.sections.length===1){bt=[];const Bt=It(lt.toString(),qx(lt,be,z,a,f,Ye,Ze));for(const xi of Bt){const Ti=new Td;Ti.text=xi,Ti.sections=lt.sections;for(let ti=0;ti<xi.length;ti++)Ti.sectionIndex.push(0);bt.push(Ti)}}else if(xt){bt=[];const Bt=xt(lt.text,lt.sectionIndex,qx(lt,be,z,a,f,Ye,Ze));for(const xi of Bt){const Ti=new Td;Ti.text=xi[0],Ti.sectionIndex=xi[1],Ti.sections=lt.sections,bt.push(Ti)}}else bt=function(Bt,xi){const Ti=[],ti=Bt.text;let Xt=0;for(const Yt of xi)Ti.push(Bt.substring(Xt,Yt)),Xt=Yt;return Xt<ti.length&&Ti.push(Bt.substring(Xt,ti.length)),Ti}(lt,qx(lt,be,z,a,f,Ye,Ze));const Mt=[],$t={positionedLines:Mt,text:lt.toString(),top:Re[1],bottom:Re[1],left:Re[0],right:Re[0],writingMode:Oe,iconsInText:!1,verticalizable:!1};return function(Bt,xi,Ti,ti,Xt,Yt,ii,Qt,Vt,Mi,ki,dn){let rr=0,cr=Nm,Gr=0,za=0;const gs=Qt==="right"?1:Qt==="left"?0:.5;let Or=0;for(const jr of Xt){jr.trim();const xs=jr.getMaxScale(),Ss=(xs-1)*as,Gs={positionedGlyphs:[],lineOffset:0};Bt.positionedLines[Or]=Gs;const ta=Gs.positionedGlyphs;let ia=0;if(!jr.length()){cr+=Yt,++Or;continue}for(let Jr=0;Jr<jr.length();Jr++){const mn=jr.getSection(Jr),_a=jr.getSectionIndex(Jr),vs=jr.getCharCode(Jr);let Es=0,Za=null,so=null,ao=null,hl=as;const Xa=!(Vt===n.WritingMode.horizontal||!ki&&!Wc(vs)||ki&&(jm[vs]||(Qr=vs,ei.Arabic(Qr)||ei["Arabic Supplement"](Qr)||ei["Arabic Extended-A"](Qr)||ei["Arabic Presentation Forms-A"](Qr)||ei["Arabic Presentation Forms-B"](Qr))));if(mn.imageName){const Na=ti[mn.imageName];if(!Na)continue;ao=mn.imageName,Bt.iconsInText=Bt.iconsInText||!0,so=Na.paddedRect;const na=Na.displaySize;mn.scale=mn.scale*as/dn,Za={width:na[0],height:na[1],left:1,top:-3,advance:Xa?na[1]:na[0]},Es=Ss+(as-na[1]*mn.scale),hl=Za.advance;const pl=Xa?na[0]*mn.scale-as*xs:na[1]*mn.scale-as*xs;pl>0&&pl>ia&&(ia=pl)}else{const Na=Ti[mn.fontStack],na=Na&&Na[vs];if(na&&na.rect)so=na.rect,Za=na.metrics;else{const pl=xi[mn.fontStack],fp=pl&&pl[vs];if(!fp)continue;Za=fp.metrics}Es=(xs-mn.scale)*as}Xa?(Bt.verticalizable=!0,ta.push({glyph:vs,imageName:ao,x:rr,y:cr+Es,vertical:Xa,scale:mn.scale,fontStack:mn.fontStack,sectionIndex:_a,metrics:Za,rect:so}),rr+=hl*mn.scale+Mi):(ta.push({glyph:vs,imageName:ao,x:rr,y:cr+Es,vertical:Xa,scale:mn.scale,fontStack:mn.fontStack,sectionIndex:_a,metrics:Za,rect:so}),rr+=Za.advance*mn.scale+Mi)}ta.length!==0&&(Gr=Math.max(rr-Mi,Gr),bA(ta,0,ta.length-1,gs,ia)),rr=0;const fr=Yt*xs+ia;Gs.lineOffset=Math.max(ia,Ss),cr+=fr,za=Math.max(fr,za),++Or}var Qr;const ys=cr-Nm,{horizontalAlign:Ts,verticalAlign:ea}=Yx(ii);(function(jr,xs,Ss,Gs,ta,ia,fr,Jr,mn){const _a=(xs-Ss)*ta;let vs=0;vs=ia!==fr?-Jr*Gs-Nm:(-Gs*mn+.5)*fr;for(const Es of jr)for(const Za of Es.positionedGlyphs)Za.x+=_a,Za.y+=vs})(Bt.positionedLines,gs,Ts,ea,Gr,za,Yt,ys,Xt.length),Bt.top+=-ea*ys,Bt.bottom=Bt.top+ys,Bt.left+=-Ts*Gr,Bt.right=Bt.left+Gr}($t,a,d,f,bt,F,te,se,Oe,be,Ve,ut),!function(Bt){for(const xi of Bt)if(xi.positionedGlyphs.length!==0)return!1;return!0}(Mt)&&$t}const jm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},xA={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function c_(c,a,d,f,A,z){if(a.imageName){const F=f[a.imageName];return F?F.displaySize[0]*a.scale*as/z+A:0}{const F=d[a.fontStack],te=F&&F[c];return te?te.metrics.advance*a.scale+A:0}}function u_(c,a,d,f){const A=Math.pow(c-a,2);return f?c<a?A/2:2*A:A+Math.abs(d)*d}function vA(c,a,d){let f=0;return c===10&&(f-=1e4),d&&(f+=150),c!==40&&c!==65288||(f+=50),a!==41&&a!==65289||(f+=50),f}function d_(c,a,d,f,A,z){let F=null,te=u_(a,d,A,z);for(const se of f){const be=u_(a-se.x,d,A,z)+se.badness;be<=te&&(F=se,te=be)}return{index:c,x:a,priorBreak:F,badness:te}}function h_(c){return c?h_(c.priorBreak).concat(c.index):[]}function qx(c,a,d,f,A,z,F){if(z!=="point")return[];if(!c)return[];const te=[],se=function(Ve,Ye,Ze,ut,lt,bt){let It=0;for(let xt=0;xt<Ve.length();xt++){const Mt=Ve.getSection(xt);It+=c_(Ve.getCharCode(xt),Mt,ut,lt,Ye,bt)}return It/Math.max(1,Math.ceil(It/Ze))}(c,a,d,f,A,F),be=c.text.indexOf("​")>=0;let Re=0;for(let Ve=0;Ve<c.length();Ve++){const Ye=c.getSection(Ve),Ze=c.getCharCode(Ve);if(jm[Ze]||(Re+=c_(Ze,Ye,f,A,a,F)),Ve<c.length()-1){const ut=!((Oe=Ze)<11904||!(ei["Bopomofo Extended"](Oe)||ei.Bopomofo(Oe)||ei["CJK Compatibility Forms"](Oe)||ei["CJK Compatibility Ideographs"](Oe)||ei["CJK Compatibility"](Oe)||ei["CJK Radicals Supplement"](Oe)||ei["CJK Strokes"](Oe)||ei["CJK Symbols and Punctuation"](Oe)||ei["CJK Unified Ideographs Extension A"](Oe)||ei["CJK Unified Ideographs"](Oe)||ei["Enclosed CJK Letters and Months"](Oe)||ei["Halfwidth and Fullwidth Forms"](Oe)||ei.Hiragana(Oe)||ei["Ideographic Description Characters"](Oe)||ei["Kangxi Radicals"](Oe)||ei["Katakana Phonetic Extensions"](Oe)||ei.Katakana(Oe)||ei["Vertical Forms"](Oe)||ei["Yi Radicals"](Oe)||ei["Yi Syllables"](Oe)));(xA[Ze]||ut||Ye.imageName)&&te.push(d_(Ve+1,Re,se,te,vA(Ze,c.getCharCode(Ve+1),ut&&be),!1))}}var Oe;return h_(d_(c.length(),Re,se,te,0,!0))}function Yx(c){let a=.5,d=.5;switch(c){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:a,verticalAlign:d}}function bA(c,a,d,f,A){if(!f&&!A)return;const z=c[d],F=(c[d].x+z.metrics.advance*z.scale)*f;for(let te=a;te<=d;te++)c[te].x-=F,c[te].y+=A}function _A(c,a,d){const{horizontalAlign:f,verticalAlign:A}=Yx(d),z=a[0]-c.displaySize[0]*f,F=a[1]-c.displaySize[1]*A;return{image:c,top:F,bottom:F+c.displaySize[1],left:z,right:z+c.displaySize[0]}}function p_(c,a,d,f,A,z){const F=c.image;let te;if(F.content){const lt=F.content,bt=F.pixelRatio||1;te=[lt[0]/bt,lt[1]/bt,F.displaySize[0]-lt[2]/bt,F.displaySize[1]-lt[3]/bt]}const se=a.left*z,be=a.right*z;let Re,Oe,Ve,Ye;d==="width"||d==="both"?(Ye=A[0]+se-f[3],Oe=A[0]+be+f[1]):(Ye=A[0]+(se+be-F.displaySize[0])/2,Oe=Ye+F.displaySize[0]);const Ze=a.top*z,ut=a.bottom*z;return d==="height"||d==="both"?(Re=A[1]+Ze-f[0],Ve=A[1]+ut+f[2]):(Re=A[1]+(Ze+ut-F.displaySize[1])/2,Ve=Re+F.displaySize[1]),{image:F,top:Re,right:Oe,bottom:Ve,left:Ye,collisionPadding:te}}const dl=128;function f_(c,a){const{expression:d}=a;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new or(c+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:A}=d;let z=0;for(;z<f.length&&f[z]<=c;)z++;z=Math.max(0,z-1);let F=z;for(;F<f.length&&f[F]<c+1;)F++;F=Math.min(f.length-1,F);const te=f[z],se=f[F];return d.kind==="composite"?{kind:"composite",minZoom:te,maxZoom:se,interpolationType:A}:{kind:"camera",minZoom:te,maxZoom:se,minSize:d.evaluate(new or(te)),maxSize:d.evaluate(new or(se)),interpolationType:A}}}class ql extends G{constructor(a,d,f,A){super(a,d),this.angle=f,A!==void 0&&(this.segment=A)}clone(){return new ql(this.x,this.y,this.angle,this.segment)}}function m_(c,a,d,f,A){if(a.segment===void 0)return!0;let z=a,F=a.segment+1,te=0;for(;te>-d/2;){if(F--,F<0)return!1;te-=c[F].dist(z),z=c[F]}te+=c[F].dist(c[F+1]),F++;const se=[];let be=0;for(;te<d/2;){const Re=c[F],Oe=c[F+1];if(!Oe)return!1;let Ve=c[F-1].angleTo(Re)-Re.angleTo(Oe);for(Ve=Math.abs((Ve+3*Math.PI)%(2*Math.PI)-Math.PI),se.push({distance:te,angleDelta:Ve}),be+=Ve;te-se[0].distance>f;)be-=se.shift().angleDelta;if(be>A)return!1;F++,te+=Re.dist(Oe)}return!0}function g_(c){let a=0;for(let d=0;d<c.length-1;d++)a+=c[d].dist(c[d+1]);return a}function y_(c,a,d){return c?.6*a*d:0}function x_(c,a){return Math.max(c?c.right-c.left:0,a?a.right-a.left:0)}function wA(c,a,d,f,A,z){const F=y_(d,A,z),te=x_(d,f)*z;let se=0;const be=g_(c)/2;for(let Re=0;Re<c.length-1;Re++){const Oe=c[Re],Ve=c[Re+1],Ye=Oe.dist(Ve);if(se+Ye>be){const Ze=(be-se)/Ye,ut=hr(Oe.x,Ve.x,Ze),lt=hr(Oe.y,Ve.y,Ze),bt=new ql(ut,lt,Ve.angleTo(Oe),Re);return bt._round(),!F||m_(c,bt,te,F,a)?bt:void 0}se+=Ye}}function CA(c,a,d,f,A,z,F,te,se){const be=y_(f,z,F),Re=x_(f,A),Oe=Re*F,Ve=c[0].x===0||c[0].x===se||c[0].y===0||c[0].y===se;return a-Oe<a/4&&(a=Oe+a/4),v_(c,Ve?a/2*te%a:(Re/2+2*z)*F*te%a,a,be,d,Oe,Ve,!1,se)}function v_(c,a,d,f,A,z,F,te,se){const be=z/2,Re=g_(c);let Oe=0,Ve=a-d,Ye=[];for(let Ze=0;Ze<c.length-1;Ze++){const ut=c[Ze],lt=c[Ze+1],bt=ut.dist(lt),It=lt.angleTo(ut);for(;Ve+d<Oe+bt;){Ve+=d;const xt=(Ve-Oe)/bt,Mt=hr(ut.x,lt.x,xt),$t=hr(ut.y,lt.y,xt);if(Mt>=0&&Mt<se&&$t>=0&&$t<se&&Ve-be>=0&&Ve+be<=Re){const Bt=new ql(Mt,$t,It,Ze);Bt._round(),f&&!m_(c,Bt,z,f,A)||Ye.push(Bt)}}Oe+=bt}return te||Ye.length||F||(Ye=v_(c,Oe/2,d,f,A,z,F,!0,se)),Ye}function b_(c,a,d,f,A){const z=[];for(let F=0;F<c.length;F++){const te=c[F];let se;for(let be=0;be<te.length-1;be++){let Re=te[be],Oe=te[be+1];Re.x<a&&Oe.x<a||(Re.x<a?Re=new G(a,Re.y+(a-Re.x)/(Oe.x-Re.x)*(Oe.y-Re.y))._round():Oe.x<a&&(Oe=new G(a,Re.y+(a-Re.x)/(Oe.x-Re.x)*(Oe.y-Re.y))._round()),Re.y<d&&Oe.y<d||(Re.y<d?Re=new G(Re.x+(d-Re.y)/(Oe.y-Re.y)*(Oe.x-Re.x),d)._round():Oe.y<d&&(Oe=new G(Re.x+(d-Re.y)/(Oe.y-Re.y)*(Oe.x-Re.x),d)._round()),Re.x>=f&&Oe.x>=f||(Re.x>=f?Re=new G(f,Re.y+(f-Re.x)/(Oe.x-Re.x)*(Oe.y-Re.y))._round():Oe.x>=f&&(Oe=new G(f,Re.y+(f-Re.x)/(Oe.x-Re.x)*(Oe.y-Re.y))._round()),Re.y>=A&&Oe.y>=A||(Re.y>=A?Re=new G(Re.x+(A-Re.y)/(Oe.y-Re.y)*(Oe.x-Re.x),A)._round():Oe.y>=A&&(Oe=new G(Re.x+(A-Re.y)/(Oe.y-Re.y)*(Oe.x-Re.x),A)._round()),se&&Re.equals(se[se.length-1])||(se=[Re],z.push(se)),se.push(Oe)))))}}return z}function __(c,a,d,f){const A=[],z=c.image,F=z.pixelRatio,te=z.paddedRect.w-2,se=z.paddedRect.h-2,be=c.right-c.left,Re=c.bottom-c.top,Oe=z.stretchX||[[0,te]],Ve=z.stretchY||[[0,se]],Ye=(Yt,ii)=>Yt+ii[1]-ii[0],Ze=Oe.reduce(Ye,0),ut=Ve.reduce(Ye,0),lt=te-Ze,bt=se-ut;let It=0,xt=Ze,Mt=0,$t=ut,Bt=0,xi=lt,Ti=0,ti=bt;if(z.content&&f){const Yt=z.content;It=Fm(Oe,0,Yt[0]),Mt=Fm(Ve,0,Yt[1]),xt=Fm(Oe,Yt[0],Yt[2]),$t=Fm(Ve,Yt[1],Yt[3]),Bt=Yt[0]-It,Ti=Yt[1]-Mt,xi=Yt[2]-Yt[0]-xt,ti=Yt[3]-Yt[1]-$t}const Xt=(Yt,ii,Qt,Vt)=>{const Mi=Bm(Yt.stretch-It,xt,be,c.left),ki=$m(Yt.fixed-Bt,xi,Yt.stretch,Ze),dn=Bm(ii.stretch-Mt,$t,Re,c.top),rr=$m(ii.fixed-Ti,ti,ii.stretch,ut),cr=Bm(Qt.stretch-It,xt,be,c.left),Gr=$m(Qt.fixed-Bt,xi,Qt.stretch,Ze),za=Bm(Vt.stretch-Mt,$t,Re,c.top),gs=$m(Vt.fixed-Ti,ti,Vt.stretch,ut),Or=new G(Mi,dn),Qr=new G(cr,dn),ys=new G(cr,za),Ts=new G(Mi,za),ea=new G(ki/F,rr/F),jr=new G(Gr/F,gs/F),xs=a*Math.PI/180;if(xs){const ta=Math.sin(xs),ia=Math.cos(xs),fr=[ia,-ta,ta,ia];Or._matMult(fr),Qr._matMult(fr),Ts._matMult(fr),ys._matMult(fr)}const Ss=Yt.stretch+Yt.fixed,Gs=ii.stretch+ii.fixed;return{tl:Or,tr:Qr,bl:Ts,br:ys,tex:{x:z.paddedRect.x+1+Ss,y:z.paddedRect.y+1+Gs,w:Qt.stretch+Qt.fixed-Ss,h:Vt.stretch+Vt.fixed-Gs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ea,pixelOffsetBR:jr,minFontScaleX:xi/F/be,minFontScaleY:ti/F/Re,isSDF:d}};if(f&&(z.stretchX||z.stretchY)){const Yt=w_(Oe,lt,Ze),ii=w_(Ve,bt,ut);for(let Qt=0;Qt<Yt.length-1;Qt++){const Vt=Yt[Qt],Mi=Yt[Qt+1];for(let ki=0;ki<ii.length-1;ki++)A.push(Xt(Vt,ii[ki],Mi,ii[ki+1]))}}else A.push(Xt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:te+1},{fixed:0,stretch:se+1}));return A}function Fm(c,a,d){let f=0;for(const A of c)f+=Math.max(a,Math.min(d,A[1]))-Math.max(a,Math.min(d,A[0]));return f}function w_(c,a,d){const f=[{fixed:-1,stretch:0}];for(const[A,z]of c){const F=f[f.length-1];f.push({fixed:A-F.stretch,stretch:F.stretch}),f.push({fixed:A-F.stretch,stretch:F.stretch+(z-A)})}return f.push({fixed:a+1,stretch:d}),f}function Bm(c,a,d,f){return c/a*d+f}function $m(c,a,d,f){return c-a*d/f}fi("Anchor",ql);class Um{constructor(a,d,f,A,z,F,te,se,be,Re){if(this.boxStartIndex=a.length,be){let Oe=F.top,Ve=F.bottom;const Ye=F.collisionPadding;Ye&&(Oe-=Ye[1],Ve+=Ye[3]);let Ze=Ve-Oe;Ze>0&&(Ze=Math.max(10,Ze),this.circleDiameter=Ze)}else{let Oe=F.top*te-se[0],Ve=F.bottom*te+se[2],Ye=F.left*te-se[3],Ze=F.right*te+se[1];const ut=F.collisionPadding;if(ut&&(Ye-=ut[0]*te,Oe-=ut[1]*te,Ze+=ut[2]*te,Ve+=ut[3]*te),Re){const lt=new G(Ye,Oe),bt=new G(Ze,Oe),It=new G(Ye,Ve),xt=new G(Ze,Ve),Mt=Re*Math.PI/180;lt._rotate(Mt),bt._rotate(Mt),It._rotate(Mt),xt._rotate(Mt),Ye=Math.min(lt.x,bt.x,It.x,xt.x),Ze=Math.max(lt.x,bt.x,It.x,xt.x),Oe=Math.min(lt.y,bt.y,It.y,xt.y),Ve=Math.max(lt.y,bt.y,It.y,xt.y)}a.emplaceBack(d.x,d.y,Ye,Oe,Ze,Ve,f,A,z)}this.boxEndIndex=a.length}}class TA{constructor(a=[],d=SA){if(this.data=a,this.length=this.data.length,this.compare=d,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(a){this.data.push(a),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const a=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:d,compare:f}=this,A=d[a];for(;a>0;){const z=a-1>>1,F=d[z];if(f(A,F)>=0)break;d[a]=F,a=z}d[a]=A}_down(a){const{data:d,compare:f}=this,A=this.length>>1,z=d[a];for(;a<A;){let F=1+(a<<1),te=d[F];const se=F+1;if(se<this.length&&f(d[se],te)<0&&(F=se,te=d[se]),f(te,z)>=0)break;d[a]=te,a=F}d[a]=z}}function SA(c,a){return c<a?-1:c>a?1:0}function EA(c,a=1,d=!1){let f=1/0,A=1/0,z=-1/0,F=-1/0;const te=c[0];for(let Ye=0;Ye<te.length;Ye++){const Ze=te[Ye];(!Ye||Ze.x<f)&&(f=Ze.x),(!Ye||Ze.y<A)&&(A=Ze.y),(!Ye||Ze.x>z)&&(z=Ze.x),(!Ye||Ze.y>F)&&(F=Ze.y)}const se=Math.min(z-f,F-A);let be=se/2;const Re=new TA([],kA);if(se===0)return new G(f,A);for(let Ye=f;Ye<z;Ye+=se)for(let Ze=A;Ze<F;Ze+=se)Re.push(new Sd(Ye+be,Ze+be,be,c));let Oe=function(Ye){let Ze=0,ut=0,lt=0;const bt=Ye[0];for(let It=0,xt=bt.length,Mt=xt-1;It<xt;Mt=It++){const $t=bt[It],Bt=bt[Mt],xi=$t.x*Bt.y-Bt.x*$t.y;ut+=($t.x+Bt.x)*xi,lt+=($t.y+Bt.y)*xi,Ze+=3*xi}return new Sd(ut/Ze,lt/Ze,0,Ye)}(c),Ve=Re.length;for(;Re.length;){const Ye=Re.pop();(Ye.d>Oe.d||!Oe.d)&&(Oe=Ye,d&&console.log("found best %d after %d probes",Math.round(1e4*Ye.d)/1e4,Ve)),Ye.max-Oe.d<=a||(be=Ye.h/2,Re.push(new Sd(Ye.p.x-be,Ye.p.y-be,be,c)),Re.push(new Sd(Ye.p.x+be,Ye.p.y-be,be,c)),Re.push(new Sd(Ye.p.x-be,Ye.p.y+be,be,c)),Re.push(new Sd(Ye.p.x+be,Ye.p.y+be,be,c)),Ve+=4)}return d&&(console.log(`num probes: ${Ve}`),console.log(`best distance: ${Oe.d}`)),Oe.p}function kA(c,a){return a.max-c.max}function Sd(c,a,d,f){this.p=new G(c,a),this.h=d,this.d=function(A,z){let F=!1,te=1/0;for(let se=0;se<z.length;se++){const be=z[se];for(let Re=0,Oe=be.length,Ve=Oe-1;Re<Oe;Ve=Re++){const Ye=be[Re],Ze=be[Ve];Ye.y>A.y!=Ze.y>A.y&&A.x<(Ze.x-Ye.x)*(A.y-Ye.y)/(Ze.y-Ye.y)+Ye.x&&(F=!F),te=Math.min(te,P1(A,Ye,Ze))}}return(F?1:-1)*Math.sqrt(te)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}const Zx=Number.POSITIVE_INFINITY;function C_(c,a){return a[1]!==Zx?function(d,f,A){let z=0,F=0;switch(f=Math.abs(f),A=Math.abs(A),d){case"top-right":case"top-left":case"top":F=A-7;break;case"bottom-right":case"bottom-left":case"bottom":F=7-A}switch(d){case"top-right":case"bottom-right":case"right":z=-f;break;case"top-left":case"bottom-left":case"left":z=f}return[z,F]}(c,a[0],a[1]):function(d,f){let A=0,z=0;f<0&&(f=0);const F=f/Math.sqrt(2);switch(d){case"top-right":case"top-left":z=F-7;break;case"bottom-right":case"bottom-left":z=7-F;break;case"bottom":z=7-f;break;case"top":z=f-7}switch(d){case"top-right":case"bottom-right":A=-F;break;case"top-left":case"bottom-left":A=F;break;case"left":A=f;break;case"right":A=-f}return[A,z]}(c,a[0])}function Xx(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function AA(c,a,d,f,A,z,F,te,se,be,Re){let Oe=z.textMaxSize.evaluate(a,{});Oe===void 0&&(Oe=F);const Ve=c.layers[0].layout,Ye=Ve.get("icon-offset").evaluate(a,{},Re),Ze=S_(d.horizontal),ut=F/24,lt=c.tilePixelRatio*ut,bt=c.tilePixelRatio*Oe/24,It=c.tilePixelRatio*te,xt=c.tilePixelRatio*Ve.get("symbol-spacing"),Mt=Ve.get("text-padding")*c.tilePixelRatio,$t=function(Vt,Mi,ki,dn=1){const rr=Vt.get("icon-padding").evaluate(Mi,{},ki),cr=rr&&rr.values;return[cr[0]*dn,cr[1]*dn,cr[2]*dn,cr[3]*dn]}(Ve,a,Re,c.tilePixelRatio),Bt=Ve.get("text-max-angle")/180*Math.PI,xi=Ve.get("text-rotation-alignment")!=="viewport"&&Ve.get("symbol-placement")!=="point",Ti=Ve.get("icon-rotation-alignment")==="map"&&Ve.get("symbol-placement")!=="point",ti=Ve.get("symbol-placement"),Xt=xt/2,Yt=Ve.get("icon-text-fit");let ii;f&&Yt!=="none"&&(c.allowVerticalPlacement&&d.vertical&&(ii=p_(f,d.vertical,Yt,Ve.get("icon-text-fit-padding"),Ye,ut)),Ze&&(f=p_(f,Ze,Yt,Ve.get("icon-text-fit-padding"),Ye,ut)));const Qt=(Vt,Mi)=>{Mi.x<0||Mi.x>=Vr||Mi.y<0||Mi.y>=Vr||function(ki,dn,rr,cr,Gr,za,gs,Or,Qr,ys,Ts,ea,jr,xs,Ss,Gs,ta,ia,fr,Jr,mn,_a,vs,Es,Za){const so=ki.addToLineVertexArray(dn,rr);let ao,hl,Xa,Na,na=0,pl=0,fp=0,$_=0,a0=-1,o0=-1;const fl={};let U_=Nr.exports(""),l0=0,c0=0;if(Or._unevaluatedLayout.getValue("text-radial-offset")===void 0?[l0,c0]=Or.layout.get("text-offset").evaluate(mn,{},Es).map(ra=>ra*as):(l0=Or.layout.get("text-radial-offset").evaluate(mn,{},Es)*as,c0=Zx),ki.allowVerticalPlacement&&cr.vertical){const ra=Or.layout.get("text-rotate").evaluate(mn,{},Es)+90;Xa=new Um(Qr,dn,ys,Ts,ea,cr.vertical,jr,xs,Ss,ra),gs&&(Na=new Um(Qr,dn,ys,Ts,ea,gs,ta,ia,Ss,ra))}if(Gr){const ra=Or.layout.get("icon-rotate").evaluate(mn,{}),Ao=Or.layout.get("icon-text-fit")!=="none",mp=__(Gr,ra,vs,Ao),gp=gs?__(gs,ra,vs,Ao):void 0;hl=new Um(Qr,dn,ys,Ts,ea,Gr,ta,ia,!1,ra),na=4*mp.length;const H_=ki.iconSizeData;let nu=null;H_.kind==="source"?(nu=[dl*Or.layout.get("icon-size").evaluate(mn,{})],nu[0]>Yl&&T(`${ki.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):H_.kind==="composite"&&(nu=[dl*_a.compositeIconSizes[0].evaluate(mn,{},Es),dl*_a.compositeIconSizes[1].evaluate(mn,{},Es)],(nu[0]>Yl||nu[1]>Yl)&&T(`${ki.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ki.addSymbols(ki.icon,mp,nu,Jr,fr,mn,n.WritingMode.none,dn,so.lineStartIndex,so.lineLength,-1,Es),a0=ki.icon.placedSymbolArray.length-1,gp&&(pl=4*gp.length,ki.addSymbols(ki.icon,gp,nu,Jr,fr,mn,n.WritingMode.vertical,dn,so.lineStartIndex,so.lineLength,-1,Es),o0=ki.icon.placedSymbolArray.length-1)}const V_=Object.keys(cr.horizontal);for(const ra of V_){const Ao=cr.horizontal[ra];if(!ao){U_=Nr.exports(Ao.text);const gp=Or.layout.get("text-rotate").evaluate(mn,{},Es);ao=new Um(Qr,dn,ys,Ts,ea,Ao,jr,xs,Ss,gp)}const mp=Ao.positionedLines.length===1;if(fp+=T_(ki,dn,Ao,za,Or,Ss,mn,Gs,so,cr.vertical?n.WritingMode.horizontal:n.WritingMode.horizontalOnly,mp?V_:[ra],fl,a0,_a,Es),mp)break}cr.vertical&&($_+=T_(ki,dn,cr.vertical,za,Or,Ss,mn,Gs,so,n.WritingMode.vertical,["vertical"],fl,o0,_a,Es));const $A=ao?ao.boxStartIndex:ki.collisionBoxArray.length,UA=ao?ao.boxEndIndex:ki.collisionBoxArray.length,VA=Xa?Xa.boxStartIndex:ki.collisionBoxArray.length,GA=Xa?Xa.boxEndIndex:ki.collisionBoxArray.length,HA=hl?hl.boxStartIndex:ki.collisionBoxArray.length,WA=hl?hl.boxEndIndex:ki.collisionBoxArray.length,qA=Na?Na.boxStartIndex:ki.collisionBoxArray.length,YA=Na?Na.boxEndIndex:ki.collisionBoxArray.length;let oo=-1;const qm=(ra,Ao)=>ra&&ra.circleDiameter?Math.max(ra.circleDiameter,Ao):Ao;oo=qm(ao,oo),oo=qm(Xa,oo),oo=qm(hl,oo),oo=qm(Na,oo);const G_=oo>-1?1:0;G_&&(oo*=Za/as),ki.glyphOffsetArray.length>=Ed.MAX_GLYPHS&&T("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),mn.sortKey!==void 0&&ki.addToSortKeyRanges(ki.symbolInstances.length,mn.sortKey),ki.symbolInstances.emplaceBack(dn.x,dn.y,fl.right>=0?fl.right:-1,fl.center>=0?fl.center:-1,fl.left>=0?fl.left:-1,fl.vertical||-1,a0,o0,U_,$A,UA,VA,GA,HA,WA,qA,YA,ys,fp,$_,na,pl,G_,0,jr,l0,c0,oo)}(c,Mi,Vt,d,f,A,ii,c.layers[0],c.collisionBoxArray,a.index,a.sourceLayerIndex,c.index,lt,[Mt,Mt,Mt,Mt],xi,se,It,$t,Ti,Ye,a,z,be,Re,F)};if(ti==="line")for(const Vt of b_(a.geometry,0,0,Vr,Vr)){const Mi=CA(Vt,xt,Bt,d.vertical||Ze,f,24,bt,c.overscaling,Vr);for(const ki of Mi){const dn=Ze;dn&&MA(c,dn.text,Xt,ki)||Qt(Vt,ki)}}else if(ti==="line-center"){for(const Vt of a.geometry)if(Vt.length>1){const Mi=wA(Vt,Bt,d.vertical||Ze,f,24,bt);Mi&&Qt(Vt,Mi)}}else if(a.type==="Polygon")for(const Vt of Ox(a.geometry,0)){const Mi=EA(Vt,16);Qt(Vt[0],new ql(Mi.x,Mi.y,0))}else if(a.type==="LineString")for(const Vt of a.geometry)Qt(Vt,new ql(Vt[0].x,Vt[0].y,0));else if(a.type==="Point")for(const Vt of a.geometry)for(const Mi of Vt)Qt([Mi],new ql(Mi.x,Mi.y,0))}const Yl=32640;function T_(c,a,d,f,A,z,F,te,se,be,Re,Oe,Ve,Ye,Ze){const ut=function(It,xt,Mt,$t,Bt,xi,Ti,ti){const Xt=$t.layout.get("text-rotate").evaluate(xi,{})*Math.PI/180,Yt=[];for(const ii of xt.positionedLines)for(const Qt of ii.positionedGlyphs){if(!Qt.rect)continue;const Vt=Qt.rect||{};let Mi=4,ki=!0,dn=1,rr=0;const cr=(Bt||ti)&&Qt.vertical,Gr=Qt.metrics.advance*Qt.scale/2;if(ti&&xt.verticalizable){const fr=(Qt.scale-1)*as,Jr=(as-Qt.metrics.width*Qt.scale)/2;rr=ii.lineOffset/2-(Qt.imageName?-Jr:fr)}if(Qt.imageName){const fr=Ti[Qt.imageName];ki=fr.sdf,dn=fr.pixelRatio,Mi=1/dn}const za=Bt?[Qt.x+Gr,Qt.y]:[0,0];let gs=Bt?[0,0]:[Qt.x+Gr+Mt[0],Qt.y+Mt[1]-rr],Or=[0,0];cr&&(Or=gs,gs=[0,0]);const Qr=(Qt.metrics.left-Mi)*Qt.scale-Gr+gs[0],ys=(-Qt.metrics.top-Mi)*Qt.scale+gs[1],Ts=Qr+Vt.w*Qt.scale/dn,ea=ys+Vt.h*Qt.scale/dn,jr=new G(Qr,ys),xs=new G(Ts,ys),Ss=new G(Qr,ea),Gs=new G(Ts,ea);if(cr){const fr=new G(-Gr,Gr-Nm),Jr=-Math.PI/2,mn=12-Gr,_a=new G(22-mn,-(Qt.imageName?mn:0)),vs=new G(...Or);jr._rotateAround(Jr,fr)._add(_a)._add(vs),xs._rotateAround(Jr,fr)._add(_a)._add(vs),Ss._rotateAround(Jr,fr)._add(_a)._add(vs),Gs._rotateAround(Jr,fr)._add(_a)._add(vs)}if(Xt){const fr=Math.sin(Xt),Jr=Math.cos(Xt),mn=[Jr,-fr,fr,Jr];jr._matMult(mn),xs._matMult(mn),Ss._matMult(mn),Gs._matMult(mn)}const ta=new G(0,0),ia=new G(0,0);Yt.push({tl:jr,tr:xs,bl:Ss,br:Gs,tex:Vt,writingMode:xt.writingMode,glyphOffset:za,sectionIndex:Qt.sectionIndex,isSDF:ki,pixelOffsetTL:ta,pixelOffsetBR:ia,minFontScaleX:0,minFontScaleY:0})}return Yt}(0,d,te,A,z,F,f,c.allowVerticalPlacement),lt=c.textSizeData;let bt=null;lt.kind==="source"?(bt=[dl*A.layout.get("text-size").evaluate(F,{})],bt[0]>Yl&&T(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):lt.kind==="composite"&&(bt=[dl*Ye.compositeTextSizes[0].evaluate(F,{},Ze),dl*Ye.compositeTextSizes[1].evaluate(F,{},Ze)],(bt[0]>Yl||bt[1]>Yl)&&T(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,ut,bt,te,z,F,be,a,se.lineStartIndex,se.lineLength,Ve,Ze);for(const It of Re)Oe[It]=c.text.placedSymbolArray.length-1;return 4*ut.length}function S_(c){for(const a in c)return c[a];return null}function MA(c,a,d,f){const A=c.compareText;if(a in A){const z=A[a];for(let F=z.length-1;F>=0;F--)if(f.dist(z[F])<d)return!0}else A[a]=[];return A[a].push(f),!1}const PA=Hl.VectorTileFeature.types,IA=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Vm(c,a,d,f,A,z,F,te,se,be,Re,Oe,Ve){const Ye=te?Math.min(Yl,Math.round(te[0])):0,Ze=te?Math.min(Yl,Math.round(te[1])):0;c.emplaceBack(a,d,Math.round(32*f),Math.round(32*A),z,F,(Ye<<1)+(se?1:0),Ze,16*be,16*Re,256*Oe,256*Ve)}function Kx(c,a,d){c.emplaceBack(a.x,a.y,d),c.emplaceBack(a.x,a.y,d),c.emplaceBack(a.x,a.y,d),c.emplaceBack(a.x,a.y,d)}function DA(c){for(const a of c.sections)if(Cx(a.text))return!0;return!1}class Qx{constructor(a){this.layoutVertexArray=new Js,this.indexArray=new ss,this.programConfigurations=a,this.segments=new kn,this.dynamicLayoutVertexArray=new Ya,this.opacityVertexArray=new Ma,this.placedSymbolArray=new Ot}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,d,f,A){this.isEmpty()||(f&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,tA.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,iA.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,IA,!0),this.opacityVertexBuffer.itemSize=1),(f||A)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}fi("SymbolBuffers",Qx);class Jx{constructor(a,d,f){this.layoutVertexArray=new a,this.layoutAttributes=d,this.indexArray=new f,this.segments=new kn,this.collisionVertexArray=new ol}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,nA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}fi("CollisionBuffers",Jx);class Ed{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(F=>F.id),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ix([]),this.placementViewportMatrix=Ix([]);const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=f_(this.zoom,d["text-size"]),this.iconSizeData=f_(this.zoom,d["icon-size"]);const f=this.layers[0].layout,A=f.get("symbol-sort-key"),z=f.get("symbol-z-order");this.canOverlap=t0(f,"text-overlap","text-allow-overlap")!=="never"||t0(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=z!=="viewport-y"&&!A.isConstant(),this.sortFeaturesByY=(z==="viewport-y"||z==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(F=>n.WritingMode[F])),this.stateDependentLayerIds=this.layers.filter(F=>F.isStateDependent()).map(F=>F.id),this.sourceID=a.sourceID}createArrays(){this.text=new Qx(new Qc(this.layers,this.zoom,a=>/^text/.test(a))),this.icon=new Qx(new Qc(this.layers,this.zoom,a=>/^icon/.test(a))),this.glyphOffsetArray=new ai,this.lineVertexArray=new Zt,this.symbolInstances=new Lt}calculateGlyphDependencies(a,d,f,A,z){for(let F=0;F<a.length;F++)if(d[a.charCodeAt(F)]=!0,(f||A)&&z){const te=up[a.charAt(F)];te&&(d[te.charCodeAt(0)]=!0)}}populate(a,d,f){const A=this.layers[0],z=A.layout,F=z.get("text-font"),te=z.get("text-field"),se=z.get("icon-image"),be=(te.value.kind!=="constant"||te.value.value instanceof ct&&!te.value.value.isEmpty()||te.value.value.toString().length>0)&&(F.value.kind!=="constant"||F.value.value.length>0),Re=se.value.kind!=="constant"||!!se.value.value||Object.keys(se.parameters).length>0,Oe=z.get("symbol-sort-key");if(this.features=[],!be&&!Re)return;const Ve=d.iconDependencies,Ye=d.glyphDependencies,Ze=d.availableImages,ut=new or(this.zoom);for(const{feature:lt,id:bt,index:It,sourceLayerIndex:xt}of a){const Mt=A._featureFilter.needGeometry,$t=eu(lt,Mt);if(!A._featureFilter.filter(ut,$t,f))continue;let Bt,xi;if(Mt||($t.geometry=Jc(lt)),be){const ti=A.getValueAndResolveTokens("text-field",$t,f,Ze),Xt=ct.factory(ti);DA(Xt)&&(this.hasRTLText=!0),(!this.hasRTLText||Xh()==="unavailable"||this.hasRTLText&&va.isParsed())&&(Bt=sA(Xt,A,$t))}if(Re){const ti=A.getValueAndResolveTokens("icon-image",$t,f,Ze);xi=ti instanceof rt?ti:rt.fromString(ti)}if(!Bt&&!xi)continue;const Ti=this.sortFeaturesByKey?Oe.evaluate($t,{},f):void 0;if(this.features.push({id:bt,text:Bt,icon:xi,index:It,sourceLayerIndex:xt,geometry:$t.geometry,properties:lt.properties,type:PA[lt.type],sortKey:Ti}),xi&&(Ve[xi.name]=!0),Bt){const ti=F.evaluate($t,{},f).join(","),Xt=z.get("text-rotation-alignment")!=="viewport"&&z.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(n.WritingMode.vertical)>=0;for(const Yt of Bt.sections)if(Yt.image)Ve[Yt.image.name]=!0;else{const ii=Hh(Bt.toString()),Qt=Yt.fontStack||ti,Vt=Ye[Qt]=Ye[Qt]||{};this.calculateGlyphDependencies(Yt.text,Vt,Xt,this.allowVerticalPlacement,ii)}}}z.get("symbol-placement")==="line"&&(this.features=function(lt){const bt={},It={},xt=[];let Mt=0;function $t(ti){xt.push(lt[ti]),Mt++}function Bt(ti,Xt,Yt){const ii=It[ti];return delete It[ti],It[Xt]=ii,xt[ii].geometry[0].pop(),xt[ii].geometry[0]=xt[ii].geometry[0].concat(Yt[0]),ii}function xi(ti,Xt,Yt){const ii=bt[Xt];return delete bt[Xt],bt[ti]=ii,xt[ii].geometry[0].shift(),xt[ii].geometry[0]=Yt[0].concat(xt[ii].geometry[0]),ii}function Ti(ti,Xt,Yt){const ii=Yt?Xt[0][Xt[0].length-1]:Xt[0][0];return`${ti}:${ii.x}:${ii.y}`}for(let ti=0;ti<lt.length;ti++){const Xt=lt[ti],Yt=Xt.geometry,ii=Xt.text?Xt.text.toString():null;if(!ii){$t(ti);continue}const Qt=Ti(ii,Yt),Vt=Ti(ii,Yt,!0);if(Qt in It&&Vt in bt&&It[Qt]!==bt[Vt]){const Mi=xi(Qt,Vt,Yt),ki=Bt(Qt,Vt,xt[Mi].geometry);delete bt[Qt],delete It[Vt],It[Ti(ii,xt[ki].geometry,!0)]=ki,xt[Mi].geometry=null}else Qt in It?Bt(Qt,Vt,Yt):Vt in bt?xi(Qt,Vt,Yt):($t(ti),bt[Qt]=Mt-1,It[Vt]=Mt-1)}return xt.filter(ti=>ti.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((lt,bt)=>lt.sortKey-bt.sortKey)}update(a,d,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,d,this.layers,f),this.icon.programConfigurations.updatePaintArrays(a,d,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,d){const f=this.lineVertexArray.length;if(a.segment!==void 0){let A=a.dist(d[a.segment+1]),z=a.dist(d[a.segment]);const F={};for(let te=a.segment+1;te<d.length;te++)F[te]={x:d[te].x,y:d[te].y,tileUnitDistanceFromAnchor:A},te<d.length-1&&(A+=d[te+1].dist(d[te]));for(let te=a.segment||0;te>=0;te--)F[te]={x:d[te].x,y:d[te].y,tileUnitDistanceFromAnchor:z},te>0&&(z+=d[te-1].dist(d[te]));for(let te=0;te<d.length;te++){const se=F[te];this.lineVertexArray.emplaceBack(se.x,se.y,se.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(a,d,f,A,z,F,te,se,be,Re,Oe,Ve){const Ye=a.indexArray,Ze=a.layoutVertexArray,ut=a.segments.prepareSegment(4*d.length,Ze,Ye,this.canOverlap?F.sortKey:void 0),lt=this.glyphOffsetArray.length,bt=ut.vertexLength,It=this.allowVerticalPlacement&&te===n.WritingMode.vertical?Math.PI/2:0,xt=F.text&&F.text.sections;for(let Mt=0;Mt<d.length;Mt++){const{tl:$t,tr:Bt,bl:xi,br:Ti,tex:ti,pixelOffsetTL:Xt,pixelOffsetBR:Yt,minFontScaleX:ii,minFontScaleY:Qt,glyphOffset:Vt,isSDF:Mi,sectionIndex:ki}=d[Mt],dn=ut.vertexLength,rr=Vt[1];Vm(Ze,se.x,se.y,$t.x,rr+$t.y,ti.x,ti.y,f,Mi,Xt.x,Xt.y,ii,Qt),Vm(Ze,se.x,se.y,Bt.x,rr+Bt.y,ti.x+ti.w,ti.y,f,Mi,Yt.x,Xt.y,ii,Qt),Vm(Ze,se.x,se.y,xi.x,rr+xi.y,ti.x,ti.y+ti.h,f,Mi,Xt.x,Yt.y,ii,Qt),Vm(Ze,se.x,se.y,Ti.x,rr+Ti.y,ti.x+ti.w,ti.y+ti.h,f,Mi,Yt.x,Yt.y,ii,Qt),Kx(a.dynamicLayoutVertexArray,se,It),Ye.emplaceBack(dn,dn+1,dn+2),Ye.emplaceBack(dn+1,dn+2,dn+3),ut.vertexLength+=4,ut.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Vt[0]),Mt!==d.length-1&&ki===d[Mt+1].sectionIndex||a.programConfigurations.populatePaintArrays(Ze.length,F,F.index,{},Ve,xt&&xt[ki])}a.placedSymbolArray.emplaceBack(se.x,se.y,lt,this.glyphOffsetArray.length-lt,bt,be,Re,se.segment,f?f[0]:0,f?f[1]:0,A[0],A[1],te,0,!1,0,Oe)}_addCollisionDebugVertex(a,d,f,A,z,F){return d.emplaceBack(0,0),a.emplaceBack(f.x,f.y,A,z,Math.round(F.x),Math.round(F.y))}addCollisionDebugVertices(a,d,f,A,z,F,te){const se=z.segments.prepareSegment(4,z.layoutVertexArray,z.indexArray),be=se.vertexLength,Re=z.layoutVertexArray,Oe=z.collisionVertexArray,Ve=te.anchorX,Ye=te.anchorY;this._addCollisionDebugVertex(Re,Oe,F,Ve,Ye,new G(a,d)),this._addCollisionDebugVertex(Re,Oe,F,Ve,Ye,new G(f,d)),this._addCollisionDebugVertex(Re,Oe,F,Ve,Ye,new G(f,A)),this._addCollisionDebugVertex(Re,Oe,F,Ve,Ye,new G(a,A)),se.vertexLength+=4;const Ze=z.indexArray;Ze.emplaceBack(be,be+1),Ze.emplaceBack(be+1,be+2),Ze.emplaceBack(be+2,be+3),Ze.emplaceBack(be+3,be),se.primitiveLength+=4}addDebugCollisionBoxes(a,d,f,A){for(let z=a;z<d;z++){const F=this.collisionBoxArray.get(z);this.addCollisionDebugVertices(F.x1,F.y1,F.x2,F.y2,A?this.textCollisionBox:this.iconCollisionBox,F.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Jx(Pa,e_.members,Ia),this.iconCollisionBox=new Jx(Pa,e_.members,Ia);for(let a=0;a<this.symbolInstances.length;a++){const d=this.symbolInstances.get(a);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(a,d,f,A,z,F,te,se,be){const Re={};for(let Oe=d;Oe<f;Oe++){const Ve=a.get(Oe);Re.textBox={x1:Ve.x1,y1:Ve.y1,x2:Ve.x2,y2:Ve.y2,anchorPointX:Ve.anchorPointX,anchorPointY:Ve.anchorPointY},Re.textFeatureIndex=Ve.featureIndex;break}for(let Oe=A;Oe<z;Oe++){const Ve=a.get(Oe);Re.verticalTextBox={x1:Ve.x1,y1:Ve.y1,x2:Ve.x2,y2:Ve.y2,anchorPointX:Ve.anchorPointX,anchorPointY:Ve.anchorPointY},Re.verticalTextFeatureIndex=Ve.featureIndex;break}for(let Oe=F;Oe<te;Oe++){const Ve=a.get(Oe);Re.iconBox={x1:Ve.x1,y1:Ve.y1,x2:Ve.x2,y2:Ve.y2,anchorPointX:Ve.anchorPointX,anchorPointY:Ve.anchorPointY},Re.iconFeatureIndex=Ve.featureIndex;break}for(let Oe=se;Oe<be;Oe++){const Ve=a.get(Oe);Re.verticalIconBox={x1:Ve.x1,y1:Ve.y1,x2:Ve.x2,y2:Ve.y2,anchorPointX:Ve.anchorPointX,anchorPointY:Ve.anchorPointY},Re.verticalIconFeatureIndex=Ve.featureIndex;break}return Re}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const f=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,d){const f=a.placedSymbolArray.get(d),A=f.vertexStartIndex+4*f.numGlyphs;for(let z=f.vertexStartIndex;z<A;z+=4)a.indexArray.emplaceBack(z,z+1,z+2),a.indexArray.emplaceBack(z+1,z+2,z+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(a),f=Math.cos(a),A=[],z=[],F=[];for(let te=0;te<this.symbolInstances.length;++te){F.push(te);const se=this.symbolInstances.get(te);A.push(0|Math.round(d*se.anchorX+f*se.anchorY)),z.push(se.featureIndex)}return F.sort((te,se)=>A[te]-A[se]||z[se]-z[te]),F}addToSortKeyRanges(a,d){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===d?f.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const f=this.symbolInstances.get(d);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((A,z,F)=>{A>=0&&F.indexOf(A)===z&&this.addIndicesForPlacedSymbol(this.text,A)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}fi("SymbolBucket",Ed,{omit:["layers","collisionBoxArray","features","compareText"]}),Ed.MAX_GLYPHS=65535,Ed.addDynamicAttributes=Kx;const RA=new Ur({"symbol-placement":new Ei(Pe.layout_symbol["symbol-placement"]),"symbol-spacing":new Ei(Pe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ei(Pe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Di(Pe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ei(Pe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ei(Pe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ei(Pe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ei(Pe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ei(Pe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ei(Pe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Di(Pe.layout_symbol["icon-size"]),"icon-text-fit":new Ei(Pe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ei(Pe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Di(Pe.layout_symbol["icon-image"]),"icon-rotate":new Di(Pe.layout_symbol["icon-rotate"]),"icon-padding":new Di(Pe.layout_symbol["icon-padding"]),"icon-keep-upright":new Ei(Pe.layout_symbol["icon-keep-upright"]),"icon-offset":new Di(Pe.layout_symbol["icon-offset"]),"icon-anchor":new Di(Pe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ei(Pe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ei(Pe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ei(Pe.layout_symbol["text-rotation-alignment"]),"text-field":new Di(Pe.layout_symbol["text-field"]),"text-font":new Di(Pe.layout_symbol["text-font"]),"text-size":new Di(Pe.layout_symbol["text-size"]),"text-max-width":new Di(Pe.layout_symbol["text-max-width"]),"text-line-height":new Ei(Pe.layout_symbol["text-line-height"]),"text-letter-spacing":new Di(Pe.layout_symbol["text-letter-spacing"]),"text-justify":new Di(Pe.layout_symbol["text-justify"]),"text-radial-offset":new Di(Pe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ei(Pe.layout_symbol["text-variable-anchor"]),"text-anchor":new Di(Pe.layout_symbol["text-anchor"]),"text-max-angle":new Ei(Pe.layout_symbol["text-max-angle"]),"text-writing-mode":new Ei(Pe.layout_symbol["text-writing-mode"]),"text-rotate":new Di(Pe.layout_symbol["text-rotate"]),"text-padding":new Ei(Pe.layout_symbol["text-padding"]),"text-keep-upright":new Ei(Pe.layout_symbol["text-keep-upright"]),"text-transform":new Di(Pe.layout_symbol["text-transform"]),"text-offset":new Di(Pe.layout_symbol["text-offset"]),"text-allow-overlap":new Ei(Pe.layout_symbol["text-allow-overlap"]),"text-overlap":new Ei(Pe.layout_symbol["text-overlap"]),"text-ignore-placement":new Ei(Pe.layout_symbol["text-ignore-placement"]),"text-optional":new Ei(Pe.layout_symbol["text-optional"])});var e0={paint:new Ur({"icon-opacity":new Di(Pe.paint_symbol["icon-opacity"]),"icon-color":new Di(Pe.paint_symbol["icon-color"]),"icon-halo-color":new Di(Pe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Di(Pe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Di(Pe.paint_symbol["icon-halo-blur"]),"icon-translate":new Ei(Pe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ei(Pe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Di(Pe.paint_symbol["text-opacity"]),"text-color":new Di(Pe.paint_symbol["text-color"],{runtimeType:si,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Di(Pe.paint_symbol["text-halo-color"]),"text-halo-width":new Di(Pe.paint_symbol["text-halo-width"]),"text-halo-blur":new Di(Pe.paint_symbol["text-halo-blur"]),"text-translate":new Ei(Pe.paint_symbol["text-translate"]),"text-translate-anchor":new Ei(Pe.paint_symbol["text-translate-anchor"])}),layout:RA};class E_{constructor(a){if(a.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=a.property.overrides?a.property.overrides.runtimeType:Rt,this.defaultValue=a}evaluate(a){if(a.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(a.formattedSection))return d.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}fi("FormatSectionOverride",E_,{omit:["defaultValue"]});class Gm extends Bs{constructor(a){super(a,e0)}recalculate(a,d){if(super.recalculate(a,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const A=[];for(const z of f)A.indexOf(z)<0&&A.push(z);this.layout._values["text-writing-mode"]=A}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(a,d,f,A){const z=this.layout.get(a).evaluate(d,{},f,A),F=this._unevaluatedLayout._values[a];return F.isDataDriven()||Nc(F.value)||!z?z:function(te,se){return se.replace(/{([^{}]+)}/g,(be,Re)=>Re in te?String(te[Re]):"")}(d.properties,z)}createBucket(a){return new Ed(a)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const a of e0.paint.overridableProperties){if(!Gm.hasPaintOverride(this.layout,a))continue;const d=this.paint.get(a),f=new E_(d),A=new Fh(f,d.property.specification);let z=null;z=d.value.kind==="constant"||d.value.kind==="source"?new Ju("source",A):new jc("composite",A,d.value.zoomStops),this.paint._values[a]=new qa(d.property,z,d.parameters)}}_handleOverridablePaintPropertyUpdate(a,d,f){return!(!this.layout||d.isDataDriven()||f.isDataDriven())&&Gm.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,d){const f=a.get("text-field"),A=e0.paint.properties[d];let z=!1;const F=te=>{for(const se of te)if(A.overrides&&A.overrides.hasOverride(se))return void(z=!0)};if(f.value.kind==="constant"&&f.value.value instanceof ct)F(f.value.value.sections);else if(f.value.kind==="source"){const te=be=>{z||(be instanceof oi&&zt(be.value)===Zi?F(be.value.sections):be instanceof Qu?F(be.sections):be.eachChild(te))},se=f.value;se._styleExpression&&te(se._styleExpression.expression)}return z}}function t0(c,a,d){let f="never";const A=c.get(a);return A?f=A:c.get(d)&&(f="always"),f}var LA={paint:new Ur({"background-color":new Ei(Pe.paint_background["background-color"]),"background-pattern":new Yc(Pe.paint_background["background-pattern"]),"background-opacity":new Ei(Pe.paint_background["background-opacity"])})},zA={paint:new Ur({"raster-opacity":new Ei(Pe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ei(Pe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ei(Pe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ei(Pe.paint_raster["raster-brightness-max"]),"raster-saturation":new Ei(Pe.paint_raster["raster-saturation"]),"raster-contrast":new Ei(Pe.paint_raster["raster-contrast"]),"raster-resampling":new Ei(Pe.paint_raster["raster-resampling"]),"raster-fade-duration":new Ei(Pe.paint_raster["raster-fade-duration"])})};class NA extends Bs{constructor(a){super(a,{}),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const OA={circle:class extends Bs{constructor(c){super(c,mk)}createBucket(c){return new Ax(c)}queryRadius(c){const a=c;return tp("circle-radius",this,a)+tp("circle-stroke-width",this,a)+km(this.paint.get("circle-translate"))}queryIntersectsFeature(c,a,d,f,A,z,F,te){const se=Am(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),z.angle,F),be=this.paint.get("circle-radius").evaluate(a,d)+this.paint.get("circle-stroke-width").evaluate(a,d),Re=this.paint.get("circle-pitch-alignment")==="map",Oe=Re?se:function(Ye,Ze){return Ye.map(ut=>O1(ut,Ze))}(se,te),Ve=Re?be*F:be;for(const Ye of f)for(const Ze of Ye){const ut=Re?Ze:O1(Ze,te);let lt=Ve;const bt=Mm([],[Ze.x,Ze.y,0,1],te);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?lt*=bt[3]/z.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(lt*=z.cameraToCenterDistance/bt[3]),uk(Oe,ut,lt))return!0}return!1}},heatmap:class extends Bs{constructor(c){super(c,yk),this._updateColorRamp()}createBucket(c){return new j1(c)}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=B1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Bs{constructor(c){super(c,xk)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Bs{constructor(c){super(c,Rk)}recalculate(c,a){super.recalculate(c,a);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new Bx(c)}queryRadius(){return km(this.paint.get("fill-translate"))}queryIntersectsFeature(c,a,d,f,A,z,F){return M1(Am(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),z.angle,F),f)}isTileClipped(){return!0}},"fill-extrusion":class extends Bs{constructor(c){super(c,qk)}createBucket(c){return new Ux(c)}queryRadius(){return km(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(c,a,d,f,A,z,F,te){const se=Am(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),z.angle,F),be=this.paint.get("fill-extrusion-height").evaluate(a,d),Re=this.paint.get("fill-extrusion-base").evaluate(a,d),Oe=function(Ye,Ze,ut,lt){const bt=[];for(const It of Ye){const xt=[It.x,It.y,0,1];Mm(xt,xt,Ze),bt.push(new G(xt[0]/xt[3],xt[1]/xt[3]))}return bt}(se,te),Ve=function(Ye,Ze,ut,lt){const bt=[],It=[],xt=lt[8]*Ze,Mt=lt[9]*Ze,$t=lt[10]*Ze,Bt=lt[11]*Ze,xi=lt[8]*ut,Ti=lt[9]*ut,ti=lt[10]*ut,Xt=lt[11]*ut;for(const Yt of Ye){const ii=[],Qt=[];for(const Vt of Yt){const Mi=Vt.x,ki=Vt.y,dn=lt[0]*Mi+lt[4]*ki+lt[12],rr=lt[1]*Mi+lt[5]*ki+lt[13],cr=lt[2]*Mi+lt[6]*ki+lt[14],Gr=lt[3]*Mi+lt[7]*ki+lt[15],za=cr+$t,gs=Gr+Bt,Or=dn+xi,Qr=rr+Ti,ys=cr+ti,Ts=Gr+Xt,ea=new G((dn+xt)/gs,(rr+Mt)/gs);ea.z=za/gs,ii.push(ea);const jr=new G(Or/Ts,Qr/Ts);jr.z=ys/Ts,Qt.push(jr)}bt.push(ii),It.push(Qt)}return[bt,It]}(f,Re,be,te);return function(Ye,Ze,ut){let lt=1/0;M1(ut,Ze)&&(lt=Z1(ut,Ze[0]));for(let bt=0;bt<Ze.length;bt++){const It=Ze[bt],xt=Ye[bt];for(let Mt=0;Mt<It.length-1;Mt++){const $t=It[Mt],Bt=[$t,It[Mt+1],xt[Mt+1],xt[Mt],$t];A1(ut,Bt)&&(lt=Math.min(lt,Z1(ut,Bt)))}}return lt!==1/0&&lt}(Ve[0],Ve[1],Oe)}},line:class extends Bs{constructor(c){super(c,K1),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(c){c==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Dc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(c,a){super.recalculate(c,a),this.paint._values["line-floorwidth"]=Q1.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new Vx(c)}queryRadius(c){const a=c,d=J1(tp("line-width",this,a),tp("line-gap-width",this,a)),f=tp("line-offset",this,a);return d/2+Math.abs(f)+km(this.paint.get("line-translate"))}queryIntersectsFeature(c,a,d,f,A,z,F){const te=Am(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),z.angle,F),se=F/2*J1(this.paint.get("line-width").evaluate(a,d),this.paint.get("line-gap-width").evaluate(a,d)),be=this.paint.get("line-offset").evaluate(a,d);return be&&(f=function(Re,Oe){const Ve=[];for(let Ye=0;Ye<Re.length;Ye++){const Ze=Re[Ye],ut=[];for(let lt=0;lt<Ze.length;lt++){const bt=Ze[lt-1],It=Ze[lt],xt=Ze[lt+1],Mt=lt===0?new G(0,0):It.sub(bt)._unit()._perp(),$t=lt===Ze.length-1?new G(0,0):xt.sub(It)._unit()._perp(),Bt=Mt._add($t)._unit(),xi=Bt.x*$t.x+Bt.y*$t.y;xi!==0&&Bt._mult(1/xi),ut.push(Bt._mult(Oe)._add(It))}Ve.push(ut)}return Ve}(f,be*F)),function(Re,Oe,Ve){for(let Ye=0;Ye<Oe.length;Ye++){const Ze=Oe[Ye];if(Re.length>=3){for(let ut=0;ut<Ze.length;ut++)if(vd(Re,Ze[ut]))return!0}if(dk(Re,Ze,Ve))return!0}return!1}(te,f,se)}isTileClipped(){return!0}},symbol:Gm,background:class extends Bs{constructor(c){super(c,LA)}},raster:class extends Bs{constructor(c){super(c,zA)}}};class jA{constructor(a){this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const k_=63710088e-1;class br{constructor(a,d){if(isNaN(a)||isNaN(d))throw new Error(`Invalid LngLat object: (${a}, ${d})`);if(this.lng=+a,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new br(C(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const d=Math.PI/180,f=this.lat*d,A=a.lat*d,z=Math.sin(f)*Math.sin(A)+Math.cos(f)*Math.cos(A)*Math.cos((a.lng-this.lng)*d);return k_*Math.acos(Math.min(z,1))}toBounds(a=0){const d=360*a/40075017,f=d/Math.cos(Math.PI/180*this.lat);return new iu(new br(this.lng-f,this.lat-d),new br(this.lng+f,this.lat+d))}static convert(a){if(a instanceof br)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new br(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new br(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class iu{constructor(a,d){a&&(d?this.setSouthWest(a).setNorthEast(d):a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1]))}setNorthEast(a){return this._ne=a instanceof br?new br(a.lng,a.lat):br.convert(a),this}setSouthWest(a){return this._sw=a instanceof br?new br(a.lng,a.lat):br.convert(a),this}extend(a){const d=this._sw,f=this._ne;let A,z;if(a instanceof br)A=a,z=a;else{if(!(a instanceof iu))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(iu.convert(a)):this.extend(br.convert(a)):this;if(A=a._sw,z=a._ne,!A||!z)return this}return d||f?(d.lng=Math.min(A.lng,d.lng),d.lat=Math.min(A.lat,d.lat),f.lng=Math.max(z.lng,f.lng),f.lat=Math.max(z.lat,f.lat)):(this._sw=new br(A.lng,A.lat),this._ne=new br(z.lng,z.lat)),this}getCenter(){return new br((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new br(this.getWest(),this.getNorth())}getSouthEast(){return new br(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:d,lat:f}=br.convert(a);let A=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(A=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&A}static convert(a){return a instanceof iu?a:a&&new iu(a)}}const A_=2*Math.PI*k_;function M_(c){return A_*Math.cos(c*Math.PI/180)}function P_(c){return(180+c)/360}function I_(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function D_(c,a){return c/M_(a)}function i0(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class Hm{constructor(a,d,f=0){this.x=+a,this.y=+d,this.z=+f}static fromLngLat(a,d=0){const f=br.convert(a);return new Hm(P_(f.lng),I_(f.lat),D_(d,f.lat))}toLngLat(){return new br(360*this.x-180,i0(this.y))}toAltitude(){return this.z*M_(i0(this.y))}meterInMercatorCoordinateUnits(){return 1/A_*(a=i0(this.y),1/Math.cos(a*Math.PI/180));var a}}function R_(c,a,d){var f=2*Math.PI*6378137/256/Math.pow(2,d);return[c*f-2*Math.PI*6378137/2,a*f-2*Math.PI*6378137/2]}class n0{constructor(a,d,f){if(a<0||a>25||f<0||f>=Math.pow(2,a)||d<0||d>=Math.pow(2,a))throw new Error(`x=${d}, y=${f}, z=${a} outside of bounds. 0<=x<${Math.pow(2,a)}, 0<=y<${Math.pow(2,a)} 0<=z<=25 `);this.z=a,this.x=d,this.y=f,this.key=hp(0,a,a,d,f)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,d,f){const A=(F=this.y,te=this.z,se=R_(256*(z=this.x),256*(F=Math.pow(2,te)-F-1),te),be=R_(256*(z+1),256*(F+1),te),se[0]+","+se[1]+","+be[0]+","+be[1]);var z,F,te,se,be;const Re=function(Oe,Ve,Ye){let Ze,ut="";for(let lt=Oe;lt>0;lt--)Ze=1<<lt-1,ut+=(Ve&Ze?1:0)+(Ye&Ze?2:0);return ut}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,Re).replace(/{bbox-epsg-3857}/g,A)}isChildOf(a){const d=this.z-a.z;return d>0&&a.x===this.x>>d&&a.y===this.y>>d}getTilePoint(a){const d=Math.pow(2,this.z);return new G((a.x*d-this.x)*Vr,(a.y*d-this.y)*Vr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class L_{constructor(a,d){this.wrap=a,this.canonical=d,this.key=hp(a,d.z,d.z,d.x,d.y)}}class La{constructor(a,d,f,A,z){if(a<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${a}; z = ${f}`);this.overscaledZ=a,this.wrap=d,this.canonical=new n0(f,+A,+z),this.key=hp(d,a,f,A,z)}clone(){return new La(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-a;return a>this.canonical.z?new La(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new La(a,this.wrap,a,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(a,d){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-a;return a>this.canonical.z?hp(this.wrap*+d,a,this.canonical.z,this.canonical.x,this.canonical.y):hp(this.wrap*+d,a,a,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(a){if(a.wrap!==this.wrap)return!1;const d=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>d&&a.canonical.y===this.canonical.y>>d}children(a){if(this.overscaledZ>=a)return[new La(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,f=2*this.canonical.x,A=2*this.canonical.y;return[new La(d,this.wrap,d,f,A),new La(d,this.wrap,d,f+1,A),new La(d,this.wrap,d,f,A+1),new La(d,this.wrap,d,f+1,A+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new La(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new La(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new L_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(a){return this.canonical.getTilePoint(new Hm(a.x-this.wrap,a.y))}}function hp(c,a,d,f,A){(c*=2)<0&&(c=-1*c-1);const z=1<<d;return(z*z*c+z*A+f).toString(36)+d.toString(36)+a.toString(36)}fi("CanonicalTileID",n0),fi("OverscaledTileID",La,{omit:["posMatrix"]});class z_{constructor(a,d,f){if(this.uid=a,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return void T(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=d.height;const A=this.dim=d.height-2;this.data=new Uint32Array(d.data.buffer),this.encoding=f||"mapbox";for(let z=0;z<A;z++)this.data[this._idx(-1,z)]=this.data[this._idx(0,z)],this.data[this._idx(A,z)]=this.data[this._idx(A-1,z)],this.data[this._idx(z,-1)]=this.data[this._idx(z,0)],this.data[this._idx(z,A)]=this.data[this._idx(z,A-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(A,-1)]=this.data[this._idx(A-1,0)],this.data[this._idx(-1,A)]=this.data[this._idx(0,A-1)],this.data[this._idx(A,A)]=this.data[this._idx(A-1,A-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let z=0;z<A;z++)for(let F=0;F<A;F++){const te=this.get(z,F);te>this.max&&(this.max=te),te<this.min&&(this.min=te)}}get(a,d){const f=new Uint8Array(this.data.buffer),A=4*this._idx(a,d);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(f[A],f[A+1],f[A+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(a,d){if(a<-1||a>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(a+1)}_unpackMapbox(a,d,f){return(256*a*256+256*d+f)/10-1e4}_unpackTerrarium(a,d,f){return 256*a+d+f/256-32768}getPixels(){return new Ra({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(a,d,f){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let A=d*this.dim,z=d*this.dim+this.dim,F=f*this.dim,te=f*this.dim+this.dim;switch(d){case-1:A=z-1;break;case 1:z=A+1}switch(f){case-1:F=te-1;break;case 1:te=F+1}const se=-d*this.dim,be=-f*this.dim;for(let Re=F;Re<te;Re++)for(let Oe=A;Oe<z;Oe++)this.data[this._idx(Oe,Re)]=a.data[this._idx(Oe+se,Re+be)]}}fi("DEMData",z_);class N_{constructor(a){this._stringToNumber={},this._numberToString=[];for(let d=0;d<a.length;d++){const f=a[d];this._stringToNumber[f]=d,this._numberToString[d]=f}}encode(a){return this._stringToNumber[a]}decode(a){if(a>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${a} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[a]}}class O_{constructor(a,d,f,A,z){this.type="Feature",this._vectorTileFeature=a,a._z=d,a._x=f,a._y=A,this.properties=a.properties,this.id=z}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(a[d]=this[d]);return a}}class j_{constructor(a,d){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new rl(Vr,16,0),this.grid3D=new rl(Vr,16,0),this.featureIndexArray=new Xi,this.promoteId=d}insert(a,d,f,A,z,F){const te=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,A,z);const se=F?this.grid3D:this.grid;for(let be=0;be<d.length;be++){const Re=d[be],Oe=[1/0,1/0,-1/0,-1/0];for(let Ve=0;Ve<Re.length;Ve++){const Ye=Re[Ve];Oe[0]=Math.min(Oe[0],Ye.x),Oe[1]=Math.min(Oe[1],Ye.y),Oe[2]=Math.max(Oe[2],Ye.x),Oe[3]=Math.max(Oe[3],Ye.y)}Oe[0]<Vr&&Oe[1]<Vr&&Oe[2]>=0&&Oe[3]>=0&&se.insert(te,Oe[0],Oe[1],Oe[2],Oe[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Hl.VectorTile(new Gx(this.rawTileData)).layers,this.sourceLayerCoder=new N_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(a,d,f,A){this.loadVTLayers();const z=a.params||{},F=Vr/a.tileSize/a.scale,te=$h(z.filter),se=a.queryGeometry,be=a.queryPadding*F,Re=B_(se),Oe=this.grid.query(Re.minX-be,Re.minY-be,Re.maxX+be,Re.maxY+be),Ve=B_(a.cameraQueryGeometry),Ye=this.grid3D.query(Ve.minX-be,Ve.minY-be,Ve.maxX+be,Ve.maxY+be,(lt,bt,It,xt)=>function(Mt,$t,Bt,xi,Ti){for(const Xt of Mt)if($t<=Xt.x&&Bt<=Xt.y&&xi>=Xt.x&&Ti>=Xt.y)return!0;const ti=[new G($t,Bt),new G($t,Ti),new G(xi,Ti),new G(xi,Bt)];if(Mt.length>2){for(const Xt of ti)if(vd(Mt,Xt))return!0}for(let Xt=0;Xt<Mt.length-1;Xt++)if(pk(Mt[Xt],Mt[Xt+1],ti))return!0;return!1}(a.cameraQueryGeometry,lt-be,bt-be,It+be,xt+be));for(const lt of Ye)Oe.push(lt);Oe.sort(FA);const Ze={};let ut;for(let lt=0;lt<Oe.length;lt++){const bt=Oe[lt];if(bt===ut)continue;ut=bt;const It=this.featureIndexArray.get(bt);let xt=null;this.loadMatchingFeature(Ze,It.bucketIndex,It.sourceLayerIndex,It.featureIndex,te,z.layers,z.availableImages,d,f,A,(Mt,$t,Bt)=>(xt||(xt=Jc(Mt)),$t.queryIntersectsFeature(se,Mt,Bt,xt,this.z,a.transform,F,a.pixelPosMatrix)))}return Ze}loadMatchingFeature(a,d,f,A,z,F,te,se,be,Re,Oe){const Ve=this.bucketLayerIDs[d];if(F&&!function(lt,bt){for(let It=0;It<lt.length;It++)if(bt.indexOf(lt[It])>=0)return!0;return!1}(F,Ve))return;const Ye=this.sourceLayerCoder.decode(f),Ze=this.vtLayers[Ye].feature(A);if(z.needGeometry){const lt=eu(Ze,!0);if(!z.filter(new or(this.tileID.overscaledZ),lt,this.tileID.canonical))return}else if(!z.filter(new or(this.tileID.overscaledZ),Ze))return;const ut=this.getId(Ze,Ye);for(let lt=0;lt<Ve.length;lt++){const bt=Ve[lt];if(F&&F.indexOf(bt)<0)continue;const It=se[bt];if(!It)continue;let xt={};ut&&Re&&(xt=Re.getState(It.sourceLayer||"_geojsonTileLayer",ut));const Mt=_({},be[bt]);Mt.paint=F_(Mt.paint,It.paint,Ze,xt,te),Mt.layout=F_(Mt.layout,It.layout,Ze,xt,te);const $t=!Oe||Oe(Ze,It,xt);if(!$t)continue;const Bt=new O_(Ze,this.z,this.x,this.y,ut);Bt.layer=Mt;let xi=a[bt];xi===void 0&&(xi=a[bt]=[]),xi.push({featureIndex:A,feature:Bt,intersectionZ:$t})}}lookupSymbolFeatures(a,d,f,A,z,F,te,se){const be={};this.loadVTLayers();const Re=$h(z);for(const Oe of a)this.loadMatchingFeature(be,f,A,Oe,Re,F,te,se,d);return be}hasLayer(a){for(const d of this.bucketLayerIDs)for(const f of d)if(a===f)return!0;return!1}getId(a,d){let f=a.id;return this.promoteId&&(f=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof f=="boolean"&&(f=Number(f))),f}}function F_(c,a,d,f,A){return S(c,(z,F)=>{const te=a instanceof hd?a.get(F):null;return te&&te.evaluate?te.evaluate(d,f,A):te})}function B_(c){let a=1/0,d=1/0,f=-1/0,A=-1/0;for(const z of c)a=Math.min(a,z.x),d=Math.min(d,z.y),f=Math.max(f,z.x),A=Math.max(A,z.y);return{minX:a,minY:d,maxX:f,maxY:A}}function FA(c,a){return a-c}var r0;fi("FeatureIndex",j_,{omit:["rawTileData","sourceLayerCoder"]}),n.PerformanceMarkers=void 0,(r0=n.PerformanceMarkers||(n.PerformanceMarkers={})).create="create",r0.load="load",r0.fullLoad="fullLoad";let Wm=null,pp=[];const s0=1e3/30,BA={mark(c){performance.mark(c)},frame(c){const a=c;Wm!=null&&pp.push(a-Wm),Wm=a},clearMetrics(){Wm=null,pp=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const c in n.PerformanceMarkers)performance.clearMarks(n.PerformanceMarkers[c])},getPerformanceMetrics(){performance.measure("loadTime",n.PerformanceMarkers.create,n.PerformanceMarkers.load),performance.measure("fullLoadTime",n.PerformanceMarkers.create,n.PerformanceMarkers.fullLoad);const c=performance.getEntriesByName("loadTime")[0].duration,a=performance.getEntriesByName("fullLoadTime")[0].duration,d=pp.length,f=1/(pp.reduce((z,F)=>z+F,0)/d/1e3),A=pp.filter(z=>z>s0).reduce((z,F)=>z+(F-s0)/s0,0);return{loadTime:c,fullLoadTime:a,fps:f,percentDroppedFrames:A/(d+A)*100}}};n.AJAXError=J,n.ARRAY_TYPE=Vs,n.Actor=class{constructor(c,a,d){this.target=c,this.parent=a,this.mapId=d,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},k(["receive","process"],this),this.invoker=new jA(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=q()?c:window}send(c,a,d,f,A=!1){const z=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(this.callbacks[z]=d);const F=$(this.globalScope)?void 0:[];return this.target.postMessage({id:z,type:c,hasCallback:!!d,targetMapId:f,mustQueue:A,sourceMapId:this.mapId,data:Gc(a,F)},F),{cancel:()=>{d&&delete this.callbacks[z],this.target.postMessage({id:z,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}receive(c){const a=c.data,d=a.id;if(d&&(!a.targetMapId||this.mapId===a.targetMapId))if(a.type==="<cancel>"){delete this.tasks[d];const f=this.cancelCallbacks[d];delete this.cancelCallbacks[d],f&&f()}else q()||a.mustQueue?(this.tasks[d]=a,this.taskQueue.push(d),this.invoker.trigger()):this.processTask(d,a)}process(){if(!this.taskQueue.length)return;const c=this.taskQueue.shift(),a=this.tasks[c];delete this.tasks[c],this.taskQueue.length&&this.invoker.trigger(),a&&this.processTask(c,a)}processTask(c,a){if(a.type==="<response>"){const d=this.callbacks[c];delete this.callbacks[c],d&&(a.error?d(sl(a.error)):d(null,sl(a.data)))}else{let d=!1;const f=$(this.globalScope)?void 0:[],A=a.hasCallback?(te,se)=>{d=!0,delete this.cancelCallbacks[c],this.target.postMessage({id:c,type:"<response>",sourceMapId:this.mapId,error:te?Gc(te):null,data:Gc(se,f)},f)}:te=>{d=!0};let z=null;const F=sl(a.data);if(this.parent[a.type])z=this.parent[a.type](a.sourceMapId,F,A);else if(this.parent.getWorkerSource){const te=a.type.split(".");z=this.parent.getWorkerSource(a.sourceMapId,te[0],F.source)[te[1]](F,A)}else A(new Error(`Could not find function ${a.type}`));!d&&z&&z.cancel&&(this.cancelCallbacks[c]=z.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},n.AlphaImage=np,n.CanonicalTileID=n0,n.CollisionBoxArray=Tt,n.CollisionCircleLayoutArray=class extends Te{},n.Color=$e,n.DEMData=z_,n.DataConstantProperty=Ei,n.DictionaryCoder=N_,n.EXTENT=Vr,n.ErrorEvent=Me,n.EvaluationParameters=or,n.Event=fe,n.Evented=De,n.FeatureIndex=j_,n.FillBucket=Bx,n.FillExtrusionBucket=Ux,n.GeoJSONFeature=O_,n.ImageAtlas=l_,n.ImagePosition=Wx,n.LineBucket=Vx,n.LineStripIndexArray=class extends _t{},n.LngLat=br,n.LngLatBounds=iu,n.MercatorCoordinate=Hm,n.ONE_EM=as,n.OverscaledTileID=La,n.PerformanceUtils=BA,n.PosArray=un,n.Properties=Ur,n.QuadTriangleArray=class extends Be{},n.RGBAImage=Ra,n.RasterBoundsArray=class extends Xc{},n.RequestPerformance=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},n.ResourceType=_e,n.SegmentVector=kn,n.SymbolBucket=Ed,n.Transitionable=Kh,n.TriangleIndexArray=ss,n.Uniform1f=gd,n.Uniform1i=class extends Da{constructor(c,a){super(c,a),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},n.Uniform2f=class extends Da{constructor(c,a){super(c,a),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},n.Uniform3f=class extends Da{constructor(c,a){super(c,a),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},n.Uniform4f=Kc,n.UniformColor=yd,n.UniformMatrix4f=class extends Da{constructor(c,a){super(c,a),this.current=lk}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let a=1;a<16;a++)if(c[a]!==this.current[a]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},n.UnwrappedTileID=L_,n.ValidationError=je,n.ZoomHistory=Hc,n.add=function(c,a,d){return c[0]=a[0]+d[0],c[1]=a[1]+d[1],c[2]=a[2]+d[2],c},n.addDynamicAttributes=Kx,n.asyncAll=function(c,a,d){if(!c.length)return d(null,[]);let f=c.length;const A=new Array(c.length);let z=null;c.forEach((F,te)=>{a(F,(se,be)=>{se&&(z=se),A[te]=be,--f==0&&d(z,A)})})},n.bezier=g,n.bindAll=k,n.cacheEntryPossiblyAdded=function(c){oe++,oe>de&&(c.getActor().send("enforceCacheSizeLimit",re),oe=0)},n.clamp=y,n.clearTileCache=function(c){const a=caches.delete(H);c&&a.catch(c).then(()=>c())},n.clipLine=b_,n.clone=function(c){var a=new Vs(16);return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15],a},n.clone$1=P,n.clone$2=function(c){var a=new Vs(3);return a[0]=c[0],a[1]=c[1],a[2]=c[2],a},n.collisionCircleLayout=rA,n.config=B,n.copy=function(c,a){return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c},n.create=function(){var c=new Vs(16);return Vs!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},n.create$1=D1,n.createExpression=Oc,n.createFilter=$h,n.createLayout=zr,n.createStyleLayer=function(c){return c.type==="custom"?new NA(c):new OA[c.type](c)},n.cross=function(c,a,d){var f=a[0],A=a[1],z=a[2],F=d[0],te=d[1],se=d[2];return c[0]=A*se-z*te,c[1]=z*F-f*se,c[2]=f*te-A*F,c},n.dot=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]},n.dot$1=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3]},n.ease=v,n.emitValidationErrors=xm,n.enforceCacheSizeLimit=function(c){ie(),W&&W.then(a=>{a.keys().then(d=>{for(let f=0;f<d.length-c;f++)a.delete(d[f])})})},n.equals=function(c,a){var d=c[0],f=c[1],A=c[2],z=c[3],F=c[4],te=c[5],se=c[6],be=c[7],Re=c[8],Oe=c[9],Ve=c[10],Ye=c[11],Ze=c[12],ut=c[13],lt=c[14],bt=c[15],It=a[0],xt=a[1],Mt=a[2],$t=a[3],Bt=a[4],xi=a[5],Ti=a[6],ti=a[7],Xt=a[8],Yt=a[9],ii=a[10],Qt=a[11],Vt=a[12],Mi=a[13],ki=a[14],dn=a[15];return Math.abs(d-It)<=Us*Math.max(1,Math.abs(d),Math.abs(It))&&Math.abs(f-xt)<=Us*Math.max(1,Math.abs(f),Math.abs(xt))&&Math.abs(A-Mt)<=Us*Math.max(1,Math.abs(A),Math.abs(Mt))&&Math.abs(z-$t)<=Us*Math.max(1,Math.abs(z),Math.abs($t))&&Math.abs(F-Bt)<=Us*Math.max(1,Math.abs(F),Math.abs(Bt))&&Math.abs(te-xi)<=Us*Math.max(1,Math.abs(te),Math.abs(xi))&&Math.abs(se-Ti)<=Us*Math.max(1,Math.abs(se),Math.abs(Ti))&&Math.abs(be-ti)<=Us*Math.max(1,Math.abs(be),Math.abs(ti))&&Math.abs(Re-Xt)<=Us*Math.max(1,Math.abs(Re),Math.abs(Xt))&&Math.abs(Oe-Yt)<=Us*Math.max(1,Math.abs(Oe),Math.abs(Yt))&&Math.abs(Ve-ii)<=Us*Math.max(1,Math.abs(Ve),Math.abs(ii))&&Math.abs(Ye-Qt)<=Us*Math.max(1,Math.abs(Ye),Math.abs(Qt))&&Math.abs(Ze-Vt)<=Us*Math.max(1,Math.abs(Ze),Math.abs(Vt))&&Math.abs(ut-Mi)<=Us*Math.max(1,Math.abs(ut),Math.abs(Mi))&&Math.abs(lt-ki)<=Us*Math.max(1,Math.abs(lt),Math.abs(ki))&&Math.abs(bt-dn)<=Us*Math.max(1,Math.abs(bt),Math.abs(dn))},n.evaluateSizeForFeature=function(c,{uSize:a,uSizeT:d},{lowerSize:f,upperSize:A}){return c.kind==="source"?f/dl:c.kind==="composite"?hr(f/dl,A/dl,d):a},n.evaluateSizeForZoom=function(c,a){let d=0,f=0;if(c.kind==="constant")f=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:A,minZoom:z,maxZoom:F}=c,te=A?y(Ks.interpolationFactor(A,a,z,F),0,1):0;c.kind==="camera"?f=hr(c.minSize,c.maxSize,te):d=te}return{uSizeT:d,uSize:f}},n.evaluateVariableOffset=C_,n.evented=Bl,n.exported=R,n.exported$1=Ee,n.extend=_,n.filterObject=x,n.fromRotation=function(c,a){var d=Math.sin(a),f=Math.cos(a);return c[0]=f,c[1]=d,c[2]=0,c[3]=-d,c[4]=f,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},n.fromScaling=function(c,a){return c[0]=a[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=a[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=a[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},n.getAnchorAlignment=Yx,n.getAnchorJustification=Xx,n.getArrayBuffer=we,n.getImage=Ge,n.getJSON=function(c,a){return ye(_(c,{type:"json"}),a)},n.getOverlapMode=t0,n.getRTLTextPluginStatus=Xh,n.getReferrer=ne,n.getVideo=function(c,a){const d=window.document.createElement("video");d.muted=!0,d.onloadstart=function(){a(null,d)};for(let f=0;f<c.length;f++){const A=window.document.createElement("source");ze(c[f])||(d.crossOrigin="Anonymous"),A.src=c[f],d.appendChild(A)}return{cancel:()=>{}}},n.identity=Ix,n.invert=function(c,a){var d=a[0],f=a[1],A=a[2],z=a[3],F=a[4],te=a[5],se=a[6],be=a[7],Re=a[8],Oe=a[9],Ve=a[10],Ye=a[11],Ze=a[12],ut=a[13],lt=a[14],bt=a[15],It=d*te-f*F,xt=d*se-A*F,Mt=d*be-z*F,$t=f*se-A*te,Bt=f*be-z*te,xi=A*be-z*se,Ti=Re*ut-Oe*Ze,ti=Re*lt-Ve*Ze,Xt=Re*bt-Ye*Ze,Yt=Oe*lt-Ve*ut,ii=Oe*bt-Ye*ut,Qt=Ve*bt-Ye*lt,Vt=It*Qt-xt*ii+Mt*Yt+$t*Xt-Bt*ti+xi*Ti;return Vt?(c[0]=(te*Qt-se*ii+be*Yt)*(Vt=1/Vt),c[1]=(A*ii-f*Qt-z*Yt)*Vt,c[2]=(ut*xi-lt*Bt+bt*$t)*Vt,c[3]=(Ve*Bt-Oe*xi-Ye*$t)*Vt,c[4]=(se*Xt-F*Qt-be*ti)*Vt,c[5]=(d*Qt-A*Xt+z*ti)*Vt,c[6]=(lt*Mt-Ze*xi-bt*xt)*Vt,c[7]=(Re*xi-Ve*Mt+Ye*xt)*Vt,c[8]=(F*ii-te*Xt+be*Ti)*Vt,c[9]=(f*Xt-d*ii-z*Ti)*Vt,c[10]=(Ze*Bt-ut*Mt+bt*It)*Vt,c[11]=(Oe*Mt-Re*Bt-Ye*It)*Vt,c[12]=(te*ti-F*Yt-se*Ti)*Vt,c[13]=(d*Yt-f*ti+A*Ti)*Vt,c[14]=(ut*xt-Ze*$t-lt*It)*Vt,c[15]=(Re*$t-Oe*xt+Ve*It)*Vt,c):null},n.isImageBitmap=L,n.isSafari=$,n.isWorker=q,n.keysDifference=function(c,a){const d=[];for(const f in c)f in a||d.push(f);return d},n.lazyLoadRTLTextPlugin=function(){va.isLoading()||va.isLoaded()||Xh()!=="deferred"||cd()},n.makeRequest=ye,n.mapObject=S,n.mercatorXfromLng=P_,n.mercatorYfromLat=I_,n.mercatorZfromAltitude=D_,n.mul=gk,n.mul$1=function(c,a,d){return c[0]=a[0]*d[0],c[1]=a[1]*d[1],c[2]=a[2]*d[2],c[3]=a[3]*d[3],c},n.multiply=R1,n.nextPowerOfTwo=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},n.normalize=function(c,a){var d=a[0],f=a[1],A=a[2],z=d*d+f*f+A*A;return z>0&&(z=1/Math.sqrt(z)),c[0]=a[0]*z,c[1]=a[1]*z,c[2]=a[2]*z,c},n.number=hr,n.ortho=function(c,a,d,f,A,z,F){var te=1/(a-d),se=1/(f-A),be=1/(z-F);return c[0]=-2*te,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*se,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*be,c[11]=0,c[12]=(a+d)*te,c[13]=(A+f)*se,c[14]=(F+z)*be,c[15]=1,c},n.parseCacheControl=Z,n.parseGlyphPbf=function(c){return new Gx(c).readFields(mA,[])},n.pbf=Gx,n.performSymbolLayout=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=Vr/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const a=c.bucket.layers[0].layout,d=c.bucket.layers[0]._unevaluatedLayout._values,f={layoutIconSize:d["icon-size"].possiblyEvaluate(new or(c.bucket.zoom+1),c.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new or(c.bucket.zoom+1),c.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new or(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:se,maxZoom:be}=c.bucket.textSizeData;f.compositeTextSizes=[d["text-size"].possiblyEvaluate(new or(se),c.canonical),d["text-size"].possiblyEvaluate(new or(be),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:se,maxZoom:be}=c.bucket.iconSizeData;f.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new or(se),c.canonical),d["icon-size"].possiblyEvaluate(new or(be),c.canonical)]}const A=a.get("text-line-height")*as,z=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",F=a.get("text-keep-upright"),te=a.get("text-size");for(const se of c.bucket.features){const be=a.get("text-font").evaluate(se,{},c.canonical).join(","),Re=te.evaluate(se,{},c.canonical),Oe=f.layoutTextSize.evaluate(se,{},c.canonical),Ve=f.layoutIconSize.evaluate(se,{},c.canonical),Ye={horizontal:{},vertical:void 0},Ze=se.text;let ut,lt=[0,0];if(Ze){const xt=Ze.toString(),Mt=a.get("text-letter-spacing").evaluate(se,{},c.canonical)*as,$t=vm(xt)?Mt:0,Bt=a.get("text-anchor").evaluate(se,{},c.canonical),xi=a.get("text-variable-anchor");if(!xi){const ii=a.get("text-radial-offset").evaluate(se,{},c.canonical);lt=ii?C_(Bt,[ii*as,Zx]):a.get("text-offset").evaluate(se,{},c.canonical).map(Qt=>Qt*as)}let Ti=z?"center":a.get("text-justify").evaluate(se,{},c.canonical);const ti=a.get("symbol-placement"),Xt=ti==="point"?a.get("text-max-width").evaluate(se,{},c.canonical)*as:0,Yt=()=>{c.bucket.allowVerticalPlacement&&Hh(xt)&&(Ye.vertical=Om(Ze,c.glyphMap,c.glyphPositions,c.imagePositions,be,Xt,A,Bt,"left",$t,lt,n.WritingMode.vertical,!0,ti,Oe,Re))};if(!z&&xi){const ii=Ti==="auto"?xi.map(Vt=>Xx(Vt)):[Ti];let Qt=!1;for(let Vt=0;Vt<ii.length;Vt++){const Mi=ii[Vt];if(!Ye.horizontal[Mi])if(Qt)Ye.horizontal[Mi]=Ye.horizontal[0];else{const ki=Om(Ze,c.glyphMap,c.glyphPositions,c.imagePositions,be,Xt,A,"center",Mi,$t,lt,n.WritingMode.horizontal,!1,ti,Oe,Re);ki&&(Ye.horizontal[Mi]=ki,Qt=ki.positionedLines.length===1)}}Yt()}else{Ti==="auto"&&(Ti=Xx(Bt));const ii=Om(Ze,c.glyphMap,c.glyphPositions,c.imagePositions,be,Xt,A,Bt,Ti,$t,lt,n.WritingMode.horizontal,!1,ti,Oe,Re);ii&&(Ye.horizontal[Ti]=ii),Yt(),Hh(xt)&&z&&F&&(Ye.vertical=Om(Ze,c.glyphMap,c.glyphPositions,c.imagePositions,be,Xt,A,Bt,Ti,$t,lt,n.WritingMode.vertical,!1,ti,Oe,Re))}}let bt=!1;if(se.icon&&se.icon.name){const xt=c.imageMap[se.icon.name];xt&&(ut=_A(c.imagePositions[se.icon.name],a.get("icon-offset").evaluate(se,{},c.canonical),a.get("icon-anchor").evaluate(se,{},c.canonical)),bt=!!xt.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=bt:c.bucket.sdfIcons!==bt&&T("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xt.pixelRatio!==c.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const It=S_(Ye.horizontal)||Ye.vertical;c.bucket.iconsInText=!!It&&It.iconsInText,(It||ut)&&AA(c.bucket,se,Ye,ut,c.imageMap,f,Oe,Ve,lt,bt,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},n.perspective=function(c,a,d,f,A){var z,F=1/Math.tan(a/2);return c[0]=F/d,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=F,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,A!=null&&A!==1/0?(c[10]=(A+f)*(z=1/(f-A)),c[14]=2*A*f*z):(c[10]=-1,c[14]=-2*f),c},n.pick=function(c,a){const d={};for(let f=0;f<a.length;f++){const A=a[f];A in c&&(d[A]=c[A])}return d},n.plugin=va,n.pointGeometry=G,n.polygonIntersectsPolygon=A1,n.potpack=o_,n.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],n.register=fi,n.registerForPluginStateChange=function(c){return c({pluginStatus:Fs,pluginURL:ko}),Bl.on("pluginStateChange",c),c},n.renderColorRamp=B1,n.rotateX=function(c,a,d){var f=Math.sin(d),A=Math.cos(d),z=a[4],F=a[5],te=a[6],se=a[7],be=a[8],Re=a[9],Oe=a[10],Ve=a[11];return a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[4]=z*A+be*f,c[5]=F*A+Re*f,c[6]=te*A+Oe*f,c[7]=se*A+Ve*f,c[8]=be*A-z*f,c[9]=Re*A-F*f,c[10]=Oe*A-te*f,c[11]=Ve*A-se*f,c},n.rotateZ=function(c,a,d){var f=Math.sin(d),A=Math.cos(d),z=a[0],F=a[1],te=a[2],se=a[3],be=a[4],Re=a[5],Oe=a[6],Ve=a[7];return a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[0]=z*A+be*f,c[1]=F*A+Re*f,c[2]=te*A+Oe*f,c[3]=se*A+Ve*f,c[4]=be*A-z*f,c[5]=Re*A-F*f,c[6]=Oe*A-te*f,c[7]=Ve*A-se*f,c},n.scale=function(c,a,d){var f=d[0],A=d[1],z=d[2];return c[0]=a[0]*f,c[1]=a[1]*f,c[2]=a[2]*f,c[3]=a[3]*f,c[4]=a[4]*A,c[5]=a[5]*A,c[6]=a[6]*A,c[7]=a[7]*A,c[8]=a[8]*z,c[9]=a[9]*z,c[10]=a[10]*z,c[11]=a[11]*z,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c},n.scale$1=function(c,a,d){return c[0]=a[0]*d,c[1]=a[1]*d,c[2]=a[2]*d,c},n.setCacheLimits=function(c,a){re=c,de=a},n.setRTLTextPlugin=function(c,a,d=!1){if(Fs===ld||Fs===Wh||Fs===qh)throw new Error("setRTLTextPlugin cannot be called multiple times.");ko=R.resolveURL(c),Fs=ld,Yh=a,Zh(),d||cd()},n.spec=Pe,n.sphericalToCartesian=function([c,a,d]){return a+=90,a*=Math.PI/180,d*=Math.PI/180,{x:c*Math.cos(a)*Math.sin(d),y:c*Math.sin(a)*Math.sin(d),z:c*Math.cos(d)}},n.sqrLen=function(c){var a=c[0],d=c[1];return a*a+d*d},n.sub=function(c,a,d){return c[0]=a[0]-d[0],c[1]=a[1]-d[1],c[2]=a[2]-d[2],c},n.toEvaluationFeature=eu,n.transformMat3=function(c,a,d){var f=a[0],A=a[1],z=a[2];return c[0]=f*d[0]+A*d[3]+z*d[6],c[1]=f*d[1]+A*d[4]+z*d[7],c[2]=f*d[2]+A*d[5]+z*d[8],c},n.transformMat4=Mm,n.transformMat4$1=function(c,a,d){var f=a[0],A=a[1];return c[0]=d[0]*f+d[4]*A+d[12],c[1]=d[1]*f+d[5]*A+d[13],c},n.translate=function(c,a,d){var f,A,z,F,te,se,be,Re,Oe,Ve,Ye,Ze,ut=d[0],lt=d[1],bt=d[2];return a===c?(c[12]=a[0]*ut+a[4]*lt+a[8]*bt+a[12],c[13]=a[1]*ut+a[5]*lt+a[9]*bt+a[13],c[14]=a[2]*ut+a[6]*lt+a[10]*bt+a[14],c[15]=a[3]*ut+a[7]*lt+a[11]*bt+a[15]):(A=a[1],z=a[2],F=a[3],te=a[4],se=a[5],be=a[6],Re=a[7],Oe=a[8],Ve=a[9],Ye=a[10],Ze=a[11],c[0]=f=a[0],c[1]=A,c[2]=z,c[3]=F,c[4]=te,c[5]=se,c[6]=be,c[7]=Re,c[8]=Oe,c[9]=Ve,c[10]=Ye,c[11]=Ze,c[12]=f*ut+te*lt+Oe*bt+a[12],c[13]=A*ut+se*lt+Ve*bt+a[13],c[14]=z*ut+be*lt+Ye*bt+a[14],c[15]=F*ut+Re*lt+Ze*bt+a[15]),c},n.triggerPluginCompletionEvent=wm,n.unicodeBlockLookup=ei,n.uniqueId=function(){return w++},n.validateCustomStyleLayer=function(c){const a=[],d=c.id;return d===void 0&&a.push({message:`layers.${d}: missing required property "id"`}),c.render===void 0&&a.push({message:`layers.${d}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&a.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),a},n.validateLight=vx,n.validateStyle=nl,n.vectorTile=Hl,n.warnOnce=T,n.wrap=C}),l(["./shared"],function(n){function p(He){const ve=typeof He;if(ve==="number"||ve==="boolean"||ve==="string"||He==null)return JSON.stringify(He);if(Array.isArray(He)){let Ke="[";for(const st of He)Ke+=`${p(st)},`;return`${Ke}]`}const Le=Object.keys(He).sort();let $e="{";for(let Ke=0;Ke<Le.length;Ke++)$e+=`${JSON.stringify(Le[Ke])}:${p(He[Le[Ke]])},`;return`${$e}}`}function m(He){let ve="";for(const Le of n.refProperties)ve+=`/${p(He[Le])}`;return ve}class g{constructor(ve){this.keyCache={},ve&&this.replace(ve)}replace(ve){this._layerConfigs={},this._layers={},this.update(ve,[])}update(ve,Le){for(const Ke of ve){this._layerConfigs[Ke.id]=Ke;const st=this._layers[Ke.id]=n.createStyleLayer(Ke);st._featureFilter=n.createFilter(st.filter),this.keyCache[Ke.id]&&delete this.keyCache[Ke.id]}for(const Ke of Le)delete this.keyCache[Ke],delete this._layerConfigs[Ke],delete this._layers[Ke];this.familiesBySource={};const $e=function(Ke,st){const ct={};for(let rt=0;rt<Ke.length;rt++){const mt=st&&st[Ke[rt].id]||m(Ke[rt]);st&&(st[Ke[rt].id]=mt);let kt=ct[mt];kt||(kt=ct[mt]=[]),kt.push(Ke[rt])}const ot=[];for(const rt in ct)ot.push(ct[rt]);return ot}(Object.values(this._layerConfigs),this.keyCache);for(const Ke of $e){const st=Ke.map(zt=>this._layers[zt.id]),ct=st[0];if(ct.visibility==="none")continue;const ot=ct.source||"";let rt=this.familiesBySource[ot];rt||(rt=this.familiesBySource[ot]={});const mt=ct.sourceLayer||"_geojsonTileLayer";let kt=rt[mt];kt||(kt=rt[mt]=[]),kt.push(st)}}}class v{constructor(ve){const Le={},$e=[];for(const ot in ve){const rt=ve[ot],mt=Le[ot]={};for(const kt in rt){const zt=rt[+kt];if(!zt||zt.bitmap.width===0||zt.bitmap.height===0)continue;const Dt={x:0,y:0,w:zt.bitmap.width+2,h:zt.bitmap.height+2};$e.push(Dt),mt[kt]={rect:Dt,metrics:zt.metrics}}}const{w:Ke,h:st}=n.potpack($e),ct=new n.AlphaImage({width:Ke||1,height:st||1});for(const ot in ve){const rt=ve[ot];for(const mt in rt){const kt=rt[+mt];if(!kt||kt.bitmap.width===0||kt.bitmap.height===0)continue;const zt=Le[ot][mt].rect;n.AlphaImage.copy(kt.bitmap,ct,{x:0,y:0},{x:zt.x+1,y:zt.y+1},kt.bitmap)}}this.image=ct,this.positions=Le}}n.register("GlyphAtlas",v);class y{constructor(ve){this.tileID=new n.OverscaledTileID(ve.tileID.overscaledZ,ve.tileID.wrap,ve.tileID.canonical.z,ve.tileID.canonical.x,ve.tileID.canonical.y),this.uid=ve.uid,this.zoom=ve.zoom,this.pixelRatio=ve.pixelRatio,this.tileSize=ve.tileSize,this.source=ve.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ve.showCollisionBoxes,this.collectResourceTiming=!!ve.collectResourceTiming,this.returnDependencies=!!ve.returnDependencies,this.promoteId=ve.promoteId}parse(ve,Le,$e,Ke,st){this.status="parsing",this.data=ve,this.collisionBoxArray=new n.CollisionBoxArray;const ct=new n.DictionaryCoder(Object.keys(ve.layers).sort()),ot=new n.FeatureIndex(this.tileID,this.promoteId);ot.bucketLayerIDs=[];const rt={},mt={featureIndex:ot,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:$e},kt=Le.familiesBySource[this.source];for(const Pi in kt){const $i=ve.layers[Pi];if(!$i)continue;$i.version===1&&n.warnOnce(`Vector tile source "${this.source}" layer "${Pi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ji=ct.encode(Pi),pn=[];for(let Hn=0;Hn<$i.length;Hn++){const xr=$i.feature(Hn),$r=ot.getId(xr,Pi);pn.push({feature:xr,id:$r,index:Hn,sourceLayerIndex:ji})}for(const Hn of kt[Pi]){const xr=Hn[0];xr.source!==this.source&&n.warnOnce(`layer.source = ${xr.source} does not equal this.source = ${this.source}`),xr.minzoom&&this.zoom<Math.floor(xr.minzoom)||xr.maxzoom&&this.zoom>=xr.maxzoom||xr.visibility!=="none"&&(C(Hn,this.zoom,$e),(rt[xr.id]=xr.createBucket({index:ot.bucketLayerIDs.length,layers:Hn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ji,sourceID:this.source})).populate(pn,mt,this.tileID.canonical),ot.bucketLayerIDs.push(Hn.map($r=>$r.id)))}}let zt,Dt,oi,Kt;const pi=n.mapObject(mt.glyphDependencies,Pi=>Object.keys(Pi).map(Number));Object.keys(pi).length?Ke.send("getGlyphs",{uid:this.uid,stacks:pi},(Pi,$i)=>{zt||(zt=Pi,Dt=$i,_i.call(this))}):Dt={};const bi=Object.keys(mt.iconDependencies);bi.length?Ke.send("getImages",{icons:bi,source:this.source,tileID:this.tileID,type:"icons"},(Pi,$i)=>{zt||(zt=Pi,oi=$i,_i.call(this))}):oi={};const Bi=Object.keys(mt.patternDependencies);function _i(){if(zt)return st(zt);if(Dt&&oi&&Kt){const Pi=new v(Dt),$i=new n.ImageAtlas(oi,Kt);for(const ji in rt){const pn=rt[ji];pn instanceof n.SymbolBucket?(C(pn.layers,this.zoom,$e),n.performSymbolLayout({bucket:pn,glyphMap:Dt,glyphPositions:Pi.positions,imageMap:oi,imagePositions:$i.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):pn.hasPattern&&(pn instanceof n.LineBucket||pn instanceof n.FillBucket||pn instanceof n.FillExtrusionBucket)&&(C(pn.layers,this.zoom,$e),pn.addFeatures(mt,this.tileID.canonical,$i.patternPositions))}this.status="done",st(null,{buckets:Object.values(rt).filter(ji=>!ji.isEmpty()),featureIndex:ot,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Pi.image,imageAtlas:$i,glyphMap:this.returnDependencies?Dt:null,iconMap:this.returnDependencies?oi:null,glyphPositions:this.returnDependencies?Pi.positions:null})}}Bi.length?Ke.send("getImages",{icons:Bi,source:this.source,tileID:this.tileID,type:"patterns"},(Pi,$i)=>{zt||(zt=Pi,Kt=$i,_i.call(this))}):Kt={},_i.call(this)}}function C(He,ve,Le){const $e=new n.EvaluationParameters(ve);for(const Ke of He)Ke.recalculate($e,Le)}function _(He,ve){const Le=n.getArrayBuffer(He.request,($e,Ke,st,ct)=>{$e?ve($e):Ke&&ve(null,{vectorTile:new n.vectorTile.VectorTile(new n.pbf(Ke)),rawData:Ke,cacheControl:st,expires:ct})});return()=>{Le.cancel(),ve()}}class w{constructor(ve,Le,$e,Ke){this.actor=ve,this.layerIndex=Le,this.availableImages=$e,this.loadVectorData=Ke||_,this.loading={},this.loaded={}}loadTile(ve,Le){const $e=ve.uid;this.loading||(this.loading={});const Ke=!!(ve&&ve.request&&ve.request.collectResourceTiming)&&new n.RequestPerformance(ve.request),st=this.loading[$e]=new y(ve);st.abort=this.loadVectorData(ve,(ct,ot)=>{if(delete this.loading[$e],ct||!ot)return st.status="done",this.loaded[$e]=st,Le(ct);const rt=ot.rawData,mt={};ot.expires&&(mt.expires=ot.expires),ot.cacheControl&&(mt.cacheControl=ot.cacheControl);const kt={};if(Ke){const zt=Ke.finish();zt&&(kt.resourceTiming=JSON.parse(JSON.stringify(zt)))}st.vectorTile=ot.vectorTile,st.parse(ot.vectorTile,this.layerIndex,this.availableImages,this.actor,(zt,Dt)=>{if(zt||!Dt)return Le(zt);Le(null,n.extend({rawTileData:rt.slice(0)},Dt,mt,kt))}),this.loaded=this.loaded||{},this.loaded[$e]=st})}reloadTile(ve,Le){const $e=this.loaded,Ke=ve.uid,st=this;if($e&&$e[Ke]){const ct=$e[Ke];ct.showCollisionBoxes=ve.showCollisionBoxes;const ot=(rt,mt)=>{const kt=ct.reloadCallback;kt&&(delete ct.reloadCallback,ct.parse(ct.vectorTile,st.layerIndex,this.availableImages,st.actor,kt)),Le(rt,mt)};ct.status==="parsing"?ct.reloadCallback=ot:ct.status==="done"&&(ct.vectorTile?ct.parse(ct.vectorTile,this.layerIndex,this.availableImages,this.actor,ot):ot())}}abortTile(ve,Le){const $e=this.loading,Ke=ve.uid;$e&&$e[Ke]&&$e[Ke].abort&&($e[Ke].abort(),delete $e[Ke]),Le()}removeTile(ve,Le){const $e=this.loaded,Ke=ve.uid;$e&&$e[Ke]&&delete $e[Ke],Le()}}class k{constructor(){this.loaded={}}loadTile(ve,Le){const{uid:$e,encoding:Ke,rawImageData:st}=ve,ct=n.isImageBitmap(st)?this.getImageData(st):st,ot=new n.DEMData($e,ct,Ke);this.loaded=this.loaded||{},this.loaded[$e]=ot,Le(null,ot)}getImageData(ve){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ve.width,ve.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ve.width,this.offscreenCanvas.height=ve.height,this.offscreenCanvasContext.drawImage(ve,0,0,ve.width,ve.height);const Le=this.offscreenCanvasContext.getImageData(-1,-1,ve.width+2,ve.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new n.RGBAImage({width:Le.width,height:Le.height},Le.data)}removeTile(ve){const Le=this.loaded,$e=ve.uid;Le&&Le[$e]&&delete Le[$e]}}var S=function He(ve,Le){var $e,Ke=ve&&ve.type;if(Ke==="FeatureCollection")for($e=0;$e<ve.features.length;$e++)He(ve.features[$e],Le);else if(Ke==="GeometryCollection")for($e=0;$e<ve.geometries.length;$e++)He(ve.geometries[$e],Le);else if(Ke==="Feature")He(ve.geometry,Le);else if(Ke==="Polygon")x(ve.coordinates,Le);else if(Ke==="MultiPolygon")for($e=0;$e<ve.coordinates.length;$e++)x(ve.coordinates[$e],Le);return ve};function x(He,ve){if(He.length!==0){P(He[0],ve);for(var Le=1;Le<He.length;Le++)P(He[Le],!1)}}function P(He,ve){for(var Le=0,$e=0,Ke=0,st=He.length,ct=st-1;Ke<st;ct=Ke++){var ot=(He[Ke][0]-He[ct][0])*(He[ct][1]+He[Ke][1]),rt=Le+ot;$e+=Math.abs(Le)>=Math.abs(ot)?Le-rt+ot:ot-rt+Le,Le=rt}Le+$e>=0!=!!ve&&He.reverse()}const D=n.vectorTile.VectorTileFeature.prototype.toGeoJSON;class T{constructor(ve){this._feature=ve,this.extent=n.EXTENT,this.type=ve.type,this.properties=ve.tags,"id"in ve&&!isNaN(ve.id)&&(this.id=parseInt(ve.id,10))}loadGeometry(){if(this._feature.type===1){const ve=[];for(const Le of this._feature.geometry)ve.push([new n.pointGeometry(Le[0],Le[1])]);return ve}{const ve=[];for(const Le of this._feature.geometry){const $e=[];for(const Ke of Le)$e.push(new n.pointGeometry(Ke[0],Ke[1]));ve.push($e)}return ve}}toGeoJSON(ve,Le,$e){return D.call(this,ve,Le,$e)}}class I{constructor(ve){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.EXTENT,this.length=ve.length,this._features=ve}feature(ve){return new T(this._features[ve])}}var N={exports:{}},q=n.pointGeometry,Z=n.vectorTile.VectorTileFeature,X=O;function O(He,ve){this.options=ve||{},this.features=He,this.length=He.length}function V(He,ve){this.id=typeof He.id=="number"?He.id:void 0,this.type=He.type,this.rawGeometry=He.type===1?[He.geometry]:He.geometry,this.properties=He.tags,this.extent=ve||4096}O.prototype.feature=function(He){return new V(this.features[He],this.options.extent)},V.prototype.loadGeometry=function(){var He=this.rawGeometry;this.geometry=[];for(var ve=0;ve<He.length;ve++){for(var Le=He[ve],$e=[],Ke=0;Ke<Le.length;Ke++)$e.push(new q(Le[Ke][0],Le[Ke][1]));this.geometry.push($e)}return this.geometry},V.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var He=this.geometry,ve=1/0,Le=-1/0,$e=1/0,Ke=-1/0,st=0;st<He.length;st++)for(var ct=He[st],ot=0;ot<ct.length;ot++){var rt=ct[ot];ve=Math.min(ve,rt.x),Le=Math.max(Le,rt.x),$e=Math.min($e,rt.y),Ke=Math.max(Ke,rt.y)}return[ve,$e,Le,Ke]},V.prototype.toGeoJSON=Z.prototype.toGeoJSON;var $=n.pbf,L=X;function R(He){var ve=new $;return function(Le,$e){for(var Ke in Le.layers)$e.writeMessage(3,G,Le.layers[Ke])}(He,ve),ve.finish()}function G(He,ve){var Le;ve.writeVarintField(15,He.version||1),ve.writeStringField(1,He.name||""),ve.writeVarintField(5,He.extent||4096);var $e={keys:[],values:[],keycache:{},valuecache:{}};for(Le=0;Le<He.length;Le++)$e.feature=He.feature(Le),ve.writeMessage(2,U,$e);var Ke=$e.keys;for(Le=0;Le<Ke.length;Le++)ve.writeStringField(3,Ke[Le]);var st=$e.values;for(Le=0;Le<st.length;Le++)ve.writeMessage(4,de,st[Le])}function U(He,ve){var Le=He.feature;Le.id!==void 0&&ve.writeVarintField(1,Le.id),ve.writeMessage(2,B,He),ve.writeVarintField(3,Le.type),ve.writeMessage(4,re,Le)}function B(He,ve){var Le=He.feature,$e=He.keys,Ke=He.values,st=He.keycache,ct=He.valuecache;for(var ot in Le.properties){var rt=Le.properties[ot],mt=st[ot];if(rt!==null){mt===void 0&&($e.push(ot),st[ot]=mt=$e.length-1),ve.writeVarint(mt);var kt=typeof rt;kt!=="string"&&kt!=="boolean"&&kt!=="number"&&(rt=JSON.stringify(rt));var zt=kt+":"+rt,Dt=ct[zt];Dt===void 0&&(Ke.push(rt),ct[zt]=Dt=Ke.length-1),ve.writeVarint(Dt)}}}function H(He,ve){return(ve<<3)+(7&He)}function W(He){return He<<1^He>>31}function re(He,ve){for(var Le=He.loadGeometry(),$e=He.type,Ke=0,st=0,ct=Le.length,ot=0;ot<ct;ot++){var rt=Le[ot],mt=1;$e===1&&(mt=rt.length),ve.writeVarint(H(1,mt));for(var kt=$e===3?rt.length-1:rt.length,zt=0;zt<kt;zt++){zt===1&&$e!==1&&ve.writeVarint(H(2,kt-1));var Dt=rt[zt].x-Ke,oi=rt[zt].y-st;ve.writeVarint(W(Dt)),ve.writeVarint(W(oi)),Ke+=Dt,st+=oi}$e===3&&ve.writeVarint(H(7,1))}}function de(He,ve){var Le=typeof He;Le==="string"?ve.writeStringField(1,He):Le==="boolean"?ve.writeBooleanField(7,He):Le==="number"&&(He%1!=0?ve.writeDoubleField(3,He):He<0?ve.writeSVarintField(6,He):ve.writeVarintField(5,He))}function ie(He,ve,Le,$e,Ke,st){if(Ke-$e<=Le)return;const ct=$e+Ke>>1;oe(He,ve,ct,$e,Ke,st%2),ie(He,ve,Le,$e,ct-1,st+1),ie(He,ve,Le,ct+1,Ke,st+1)}function oe(He,ve,Le,$e,Ke,st){for(;Ke>$e;){if(Ke-$e>600){const mt=Ke-$e+1,kt=Le-$e+1,zt=Math.log(mt),Dt=.5*Math.exp(2*zt/3),oi=.5*Math.sqrt(zt*Dt*(mt-Dt)/mt)*(kt-mt/2<0?-1:1);oe(He,ve,Le,Math.max($e,Math.floor(Le-kt*Dt/mt+oi)),Math.min(Ke,Math.floor(Le+(mt-kt)*Dt/mt+oi)),st)}const ct=ve[2*Le+st];let ot=$e,rt=Ke;for(Ee(He,ve,$e,Le),ve[2*Ke+st]>ct&&Ee(He,ve,$e,Ke);ot<rt;){for(Ee(He,ve,ot,rt),ot++,rt--;ve[2*ot+st]<ct;)ot++;for(;ve[2*rt+st]>ct;)rt--}ve[2*$e+st]===ct?Ee(He,ve,$e,rt):(rt++,Ee(He,ve,rt,Ke)),rt<=Le&&($e=rt+1),Le<=rt&&(Ke=rt-1)}}function Ee(He,ve,Le,$e){xe(He,Le,$e),xe(ve,2*Le,2*$e),xe(ve,2*Le+1,2*$e+1)}function xe(He,ve,Le){const $e=He[ve];He[ve]=He[Le],He[Le]=$e}function Se(He,ve,Le,$e){const Ke=He-Le,st=ve-$e;return Ke*Ke+st*st}N.exports=R,N.exports.fromVectorTileJs=R,N.exports.fromGeojsonVt=function(He,ve){ve=ve||{};var Le={};for(var $e in He)Le[$e]=new L(He[$e].features,ve),Le[$e].name=$e,Le[$e].version=ve.version,Le[$e].extent=ve.extent;return R({layers:Le})},N.exports.GeoJSONWrapper=L;const K=He=>He[0],Q=He=>He[1];class ae{constructor(ve,Le=K,$e=Q,Ke=64,st=Float64Array){this.nodeSize=Ke,this.points=ve;const ct=ve.length<65536?Uint16Array:Uint32Array,ot=this.ids=new ct(ve.length),rt=this.coords=new st(2*ve.length);for(let mt=0;mt<ve.length;mt++)ot[mt]=mt,rt[2*mt]=Le(ve[mt]),rt[2*mt+1]=$e(ve[mt]);ie(ot,rt,Ke,0,ot.length-1,0)}range(ve,Le,$e,Ke){return function(st,ct,ot,rt,mt,kt,zt){const Dt=[0,st.length-1,0],oi=[];let Kt,pi;for(;Dt.length;){const bi=Dt.pop(),Bi=Dt.pop(),_i=Dt.pop();if(Bi-_i<=zt){for(let ji=_i;ji<=Bi;ji++)Kt=ct[2*ji],pi=ct[2*ji+1],Kt>=ot&&Kt<=mt&&pi>=rt&&pi<=kt&&oi.push(st[ji]);continue}const Pi=Math.floor((_i+Bi)/2);Kt=ct[2*Pi],pi=ct[2*Pi+1],Kt>=ot&&Kt<=mt&&pi>=rt&&pi<=kt&&oi.push(st[Pi]);const $i=(bi+1)%2;(bi===0?ot<=Kt:rt<=pi)&&(Dt.push(_i),Dt.push(Pi-1),Dt.push($i)),(bi===0?mt>=Kt:kt>=pi)&&(Dt.push(Pi+1),Dt.push(Bi),Dt.push($i))}return oi}(this.ids,this.coords,ve,Le,$e,Ke,this.nodeSize)}within(ve,Le,$e){return function(Ke,st,ct,ot,rt,mt){const kt=[0,Ke.length-1,0],zt=[],Dt=rt*rt;for(;kt.length;){const oi=kt.pop(),Kt=kt.pop(),pi=kt.pop();if(Kt-pi<=mt){for(let $i=pi;$i<=Kt;$i++)Se(st[2*$i],st[2*$i+1],ct,ot)<=Dt&&zt.push(Ke[$i]);continue}const bi=Math.floor((pi+Kt)/2),Bi=st[2*bi],_i=st[2*bi+1];Se(Bi,_i,ct,ot)<=Dt&&zt.push(Ke[bi]);const Pi=(oi+1)%2;(oi===0?ct-rt<=Bi:ot-rt<=_i)&&(kt.push(pi),kt.push(bi-1),kt.push(Pi)),(oi===0?ct+rt>=Bi:ot+rt>=_i)&&(kt.push(bi+1),kt.push(Kt),kt.push(Pi))}return zt}(this.ids,this.coords,ve,Le,$e,this.nodeSize)}}const _e={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:He=>He},J=Math.fround||(ne=new Float32Array(1),He=>(ne[0]=+He,ne[0]));var ne;class ce{constructor(ve){this.options=ke(Object.create(_e),ve),this.trees=new Array(this.options.maxZoom+1)}load(ve){const{log:Le,minZoom:$e,maxZoom:Ke,nodeSize:st}=this.options;Le&&console.time("total time");const ct=`prepare ${ve.length} points`;Le&&console.time(ct),this.points=ve;let ot=[];for(let rt=0;rt<ve.length;rt++)ve[rt].geometry&&ot.push(we(ve[rt],rt));this.trees[Ke+1]=new ae(ot,ge,fe,st,Float32Array),Le&&console.timeEnd(ct);for(let rt=Ke;rt>=$e;rt--){const mt=+Date.now();ot=this._cluster(ot,rt),this.trees[rt]=new ae(ot,ge,fe,st,Float32Array),Le&&console.log("z%d: %d clusters in %dms",rt,ot.length,+Date.now()-mt)}return Le&&console.timeEnd("total time"),this}getClusters(ve,Le){let $e=((ve[0]+180)%360+360)%360-180;const Ke=Math.max(-90,Math.min(90,ve[1]));let st=ve[2]===180?180:((ve[2]+180)%360+360)%360-180;const ct=Math.max(-90,Math.min(90,ve[3]));if(ve[2]-ve[0]>=360)$e=-180,st=180;else if($e>st){const kt=this.getClusters([$e,Ke,180,ct],Le),zt=this.getClusters([-180,Ke,st,ct],Le);return kt.concat(zt)}const ot=this.trees[this._limitZoom(Le)],rt=ot.range(Ie($e),Fe(ct),Ie(st),Fe(Ke)),mt=[];for(const kt of rt){const zt=ot.points[kt];mt.push(zt.numPoints?ze(zt):this.points[zt.index])}return mt}getChildren(ve){const Le=this._getOriginId(ve),$e=this._getOriginZoom(ve),Ke="No cluster with the specified id.",st=this.trees[$e];if(!st)throw new Error(Ke);const ct=st.points[Le];if(!ct)throw new Error(Ke);const ot=this.options.radius/(this.options.extent*Math.pow(2,$e-1)),rt=st.within(ct.x,ct.y,ot),mt=[];for(const kt of rt){const zt=st.points[kt];zt.parentId===ve&&mt.push(zt.numPoints?ze(zt):this.points[zt.index])}if(mt.length===0)throw new Error(Ke);return mt}getLeaves(ve,Le,$e){const Ke=[];return this._appendLeaves(Ke,ve,Le=Le||10,$e=$e||0,0),Ke}getTile(ve,Le,$e){const Ke=this.trees[this._limitZoom(ve)],st=Math.pow(2,ve),{extent:ct,radius:ot}=this.options,rt=ot/ct,mt=($e-rt)/st,kt=($e+1+rt)/st,zt={features:[]};return this._addTileFeatures(Ke.range((Le-rt)/st,mt,(Le+1+rt)/st,kt),Ke.points,Le,$e,st,zt),Le===0&&this._addTileFeatures(Ke.range(1-rt/st,mt,1,kt),Ke.points,st,$e,st,zt),Le===st-1&&this._addTileFeatures(Ke.range(0,mt,rt/st,kt),Ke.points,-1,$e,st,zt),zt.features.length?zt:null}getClusterExpansionZoom(ve){let Le=this._getOriginZoom(ve)-1;for(;Le<=this.options.maxZoom;){const $e=this.getChildren(ve);if(Le++,$e.length!==1)break;ve=$e[0].properties.cluster_id}return Le}_appendLeaves(ve,Le,$e,Ke,st){const ct=this.getChildren(Le);for(const ot of ct){const rt=ot.properties;if(rt&&rt.cluster?st+rt.point_count<=Ke?st+=rt.point_count:st=this._appendLeaves(ve,rt.cluster_id,$e,Ke,st):st<Ke?st++:ve.push(ot),ve.length===$e)break}return st}_addTileFeatures(ve,Le,$e,Ke,st,ct){for(const ot of ve){const rt=Le[ot],mt=rt.numPoints;let kt,zt,Dt;if(mt)kt=Ce(rt),zt=rt.x,Dt=rt.y;else{const pi=this.points[rt.index];kt=pi.properties,zt=Ie(pi.geometry.coordinates[0]),Dt=Fe(pi.geometry.coordinates[1])}const oi={type:1,geometry:[[Math.round(this.options.extent*(zt*st-$e)),Math.round(this.options.extent*(Dt*st-Ke))]],tags:kt};let Kt;mt?Kt=rt.id:this.options.generateId?Kt=rt.index:this.points[rt.index].id&&(Kt=this.points[rt.index].id),Kt!==void 0&&(oi.id=Kt),ct.features.push(oi)}}_limitZoom(ve){return Math.max(this.options.minZoom,Math.min(Math.floor(+ve),this.options.maxZoom+1))}_cluster(ve,Le){const $e=[],{radius:Ke,extent:st,reduce:ct,minPoints:ot}=this.options,rt=Ke/(st*Math.pow(2,Le));for(let mt=0;mt<ve.length;mt++){const kt=ve[mt];if(kt.zoom<=Le)continue;kt.zoom=Le;const zt=this.trees[Le+1],Dt=zt.within(kt.x,kt.y,rt),oi=kt.numPoints||1;let Kt=oi;for(const pi of Dt){const bi=zt.points[pi];bi.zoom>Le&&(Kt+=bi.numPoints||1)}if(Kt>oi&&Kt>=ot){let pi=kt.x*oi,bi=kt.y*oi,Bi=ct&&oi>1?this._map(kt,!0):null;const _i=(mt<<5)+(Le+1)+this.points.length;for(const Pi of Dt){const $i=zt.points[Pi];if($i.zoom<=Le)continue;$i.zoom=Le;const ji=$i.numPoints||1;pi+=$i.x*ji,bi+=$i.y*ji,$i.parentId=_i,ct&&(Bi||(Bi=this._map(kt,!0)),ct(Bi,this._map($i)))}kt.parentId=_i,$e.push(ye(pi/Kt,bi/Kt,_i,Kt,Bi))}else if($e.push(kt),Kt>1)for(const pi of Dt){const bi=zt.points[pi];bi.zoom<=Le||(bi.zoom=Le,$e.push(bi))}}return $e}_getOriginId(ve){return ve-this.points.length>>5}_getOriginZoom(ve){return(ve-this.points.length)%32}_map(ve,Le){if(ve.numPoints)return Le?ke({},ve.properties):ve.properties;const $e=this.points[ve.index].properties,Ke=this.options.map($e);return Le&&Ke===$e?ke({},Ke):Ke}}function ye(He,ve,Le,$e,Ke){return{x:J(He),y:J(ve),zoom:1/0,id:Le,parentId:-1,numPoints:$e,properties:Ke}}function we(He,ve){const[Le,$e]=He.geometry.coordinates;return{x:J(Ie(Le)),y:J(Fe($e)),zoom:1/0,index:ve,parentId:-1}}function ze(He){return{type:"Feature",id:He.id,properties:Ce(He),geometry:{type:"Point",coordinates:[(ve=He.x,360*(ve-.5)),Ge(He.y)]}};var ve}function Ce(He){const ve=He.numPoints,Le=ve>=1e4?`${Math.round(ve/1e3)}k`:ve>=1e3?Math.round(ve/100)/10+"k":ve;return ke(ke({},He.properties),{cluster:!0,cluster_id:He.id,point_count:ve,point_count_abbreviated:Le})}function Ie(He){return He/360+.5}function Fe(He){const ve=Math.sin(He*Math.PI/180),Le=.5-.25*Math.log((1+ve)/(1-ve))/Math.PI;return Le<0?0:Le>1?1:Le}function Ge(He){const ve=(180-360*He)*Math.PI/180;return 360*Math.atan(Math.exp(ve))/Math.PI-90}function ke(He,ve){for(const Le in ve)He[Le]=ve[Le];return He}function ge(He){return He.x}function fe(He){return He.y}function Me(He,ve,Le,$e){for(var Ke,st=$e,ct=Le-ve>>1,ot=Le-ve,rt=He[ve],mt=He[ve+1],kt=He[Le],zt=He[Le+1],Dt=ve+3;Dt<Le;Dt+=3){var oi=De(He[Dt],He[Dt+1],rt,mt,kt,zt);if(oi>st)Ke=Dt,st=oi;else if(oi===st){var Kt=Math.abs(Dt-ct);Kt<ot&&(Ke=Dt,ot=Kt)}}st>$e&&(Ke-ve>3&&Me(He,ve,Ke,$e),He[Ke+2]=st,Le-Ke>3&&Me(He,Ke,Le,$e))}function De(He,ve,Le,$e,Ke,st){var ct=Ke-Le,ot=st-$e;if(ct!==0||ot!==0){var rt=((He-Le)*ct+(ve-$e)*ot)/(ct*ct+ot*ot);rt>1?(Le=Ke,$e=st):rt>0&&(Le+=ct*rt,$e+=ot*rt)}return(ct=He-Le)*ct+(ot=ve-$e)*ot}function Pe(He,ve,Le,$e){var Ke={id:He===void 0?null:He,type:ve,geometry:Le,tags:$e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(st){var ct=st.geometry,ot=st.type;if(ot==="Point"||ot==="MultiPoint"||ot==="LineString")je(st,ct);else if(ot==="Polygon"||ot==="MultiLineString")for(var rt=0;rt<ct.length;rt++)je(st,ct[rt]);else if(ot==="MultiPolygon")for(rt=0;rt<ct.length;rt++)for(var mt=0;mt<ct[rt].length;mt++)je(st,ct[rt][mt])}(Ke),Ke}function je(He,ve){for(var Le=0;Le<ve.length;Le+=3)He.minX=Math.min(He.minX,ve[Le]),He.minY=Math.min(He.minY,ve[Le+1]),He.maxX=Math.max(He.maxX,ve[Le]),He.maxY=Math.max(He.maxY,ve[Le+1])}function Xe(He,ve,Le,$e){if(ve.geometry){var Ke=ve.geometry.coordinates,st=ve.geometry.type,ct=Math.pow(Le.tolerance/((1<<Le.maxZoom)*Le.extent),2),ot=[],rt=ve.id;if(Le.promoteId?rt=ve.properties[Le.promoteId]:Le.generateId&&(rt=$e||0),st==="Point")et(Ke,ot);else if(st==="MultiPoint")for(var mt=0;mt<Ke.length;mt++)et(Ke[mt],ot);else if(st==="LineString")nt(Ke,ot,ct,!1);else if(st==="MultiLineString"){if(Le.lineMetrics){for(mt=0;mt<Ke.length;mt++)nt(Ke[mt],ot=[],ct,!1),He.push(Pe(rt,"LineString",ot,ve.properties));return}ht(Ke,ot,ct,!1)}else if(st==="Polygon")ht(Ke,ot,ct,!0);else{if(st!=="MultiPolygon"){if(st==="GeometryCollection"){for(mt=0;mt<ve.geometry.geometries.length;mt++)Xe(He,{id:rt,geometry:ve.geometry.geometries[mt],properties:ve.properties},Le,$e);return}throw new Error("Input data is not a valid GeoJSON object.")}for(mt=0;mt<Ke.length;mt++){var kt=[];ht(Ke[mt],kt,ct,!0),ot.push(kt)}}He.push(Pe(rt,st,ot,ve.properties))}}function et(He,ve){ve.push(gt(He[0])),ve.push(wt(He[1])),ve.push(0)}function nt(He,ve,Le,$e){for(var Ke,st,ct=0,ot=0;ot<He.length;ot++){var rt=gt(He[ot][0]),mt=wt(He[ot][1]);ve.push(rt),ve.push(mt),ve.push(0),ot>0&&(ct+=$e?(Ke*mt-rt*st)/2:Math.sqrt(Math.pow(rt-Ke,2)+Math.pow(mt-st,2))),Ke=rt,st=mt}var kt=ve.length-3;ve[2]=1,Me(ve,0,kt,Le),ve[kt+2]=1,ve.size=Math.abs(ct),ve.start=0,ve.end=ve.size}function ht(He,ve,Le,$e){for(var Ke=0;Ke<He.length;Ke++){var st=[];nt(He[Ke],st,Le,$e),ve.push(st)}}function gt(He){return He/360+.5}function wt(He){var ve=Math.sin(He*Math.PI/180),Le=.5-.25*Math.log((1+ve)/(1-ve))/Math.PI;return Le<0?0:Le>1?1:Le}function Rt(He,ve,Le,$e,Ke,st,ct,ot){if($e/=ve,st>=(Le/=ve)&&ct<$e)return He;if(ct<Le||st>=$e)return null;for(var rt=[],mt=0;mt<He.length;mt++){var kt=He[mt],zt=kt.geometry,Dt=kt.type,oi=Ke===0?kt.minX:kt.minY,Kt=Ke===0?kt.maxX:kt.maxY;if(oi>=Le&&Kt<$e)rt.push(kt);else if(!(Kt<Le||oi>=$e)){var pi=[];if(Dt==="Point"||Dt==="MultiPoint")ft(zt,pi,Le,$e,Ke);else if(Dt==="LineString")St(zt,pi,Le,$e,Ke,!1,ot.lineMetrics);else if(Dt==="MultiLineString")si(zt,pi,Le,$e,Ke,!1);else if(Dt==="Polygon")si(zt,pi,Le,$e,Ke,!0);else if(Dt==="MultiPolygon")for(var bi=0;bi<zt.length;bi++){var Bi=[];si(zt[bi],Bi,Le,$e,Ke,!0),Bi.length&&pi.push(Bi)}if(pi.length){if(ot.lineMetrics&&Dt==="LineString"){for(bi=0;bi<pi.length;bi++)rt.push(Pe(kt.id,Dt,pi[bi],kt.tags));continue}Dt!=="LineString"&&Dt!=="MultiLineString"||(pi.length===1?(Dt="LineString",pi=pi[0]):Dt="MultiLineString"),Dt!=="Point"&&Dt!=="MultiPoint"||(Dt=pi.length===3?"Point":"MultiPoint"),rt.push(Pe(kt.id,Dt,pi,kt.tags))}}}return rt.length?rt:null}function ft(He,ve,Le,$e,Ke){for(var st=0;st<He.length;st+=3){var ct=He[st+Ke];ct>=Le&&ct<=$e&&(ve.push(He[st]),ve.push(He[st+1]),ve.push(He[st+2]))}}function St(He,ve,Le,$e,Ke,st,ct){for(var ot,rt,mt=Ct(He),kt=Ke===0?Ht:cn,zt=He.start,Dt=0;Dt<He.length-3;Dt+=3){var oi=He[Dt],Kt=He[Dt+1],pi=He[Dt+2],bi=He[Dt+3],Bi=He[Dt+4],_i=Ke===0?oi:Kt,Pi=Ke===0?bi:Bi,$i=!1;ct&&(ot=Math.sqrt(Math.pow(oi-bi,2)+Math.pow(Kt-Bi,2))),_i<Le?Pi>Le&&(rt=kt(mt,oi,Kt,bi,Bi,Le),ct&&(mt.start=zt+ot*rt)):_i>$e?Pi<$e&&(rt=kt(mt,oi,Kt,bi,Bi,$e),ct&&(mt.start=zt+ot*rt)):di(mt,oi,Kt,pi),Pi<Le&&_i>=Le&&(rt=kt(mt,oi,Kt,bi,Bi,Le),$i=!0),Pi>$e&&_i<=$e&&(rt=kt(mt,oi,Kt,bi,Bi,$e),$i=!0),!st&&$i&&(ct&&(mt.end=zt+ot*rt),ve.push(mt),mt=Ct(He)),ct&&(zt+=ot)}var ji=He.length-3;oi=He[ji],Kt=He[ji+1],pi=He[ji+2],(_i=Ke===0?oi:Kt)>=Le&&_i<=$e&&di(mt,oi,Kt,pi),ji=mt.length-3,st&&ji>=3&&(mt[ji]!==mt[0]||mt[ji+1]!==mt[1])&&di(mt,mt[0],mt[1],mt[2]),mt.length&&ve.push(mt)}function Ct(He){var ve=[];return ve.size=He.size,ve.start=He.start,ve.end=He.end,ve}function si(He,ve,Le,$e,Ke,st){for(var ct=0;ct<He.length;ct++)St(He[ct],ve,Le,$e,Ke,st,!1)}function di(He,ve,Le,$e){He.push(ve),He.push(Le),He.push($e)}function Ht(He,ve,Le,$e,Ke,st){var ct=(st-ve)/($e-ve);return He.push(st),He.push(Le+(Ke-Le)*ct),He.push(1),ct}function cn(He,ve,Le,$e,Ke,st){var ct=(st-Le)/(Ke-Le);return He.push(ve+($e-ve)*ct),He.push(st),He.push(1),ct}function Zi(He,ve){for(var Le=[],$e=0;$e<He.length;$e++){var Ke,st=He[$e],ct=st.type;if(ct==="Point"||ct==="MultiPoint"||ct==="LineString")Ke=xn(st.geometry,ve);else if(ct==="MultiLineString"||ct==="Polygon"){Ke=[];for(var ot=0;ot<st.geometry.length;ot++)Ke.push(xn(st.geometry[ot],ve))}else if(ct==="MultiPolygon")for(Ke=[],ot=0;ot<st.geometry.length;ot++){for(var rt=[],mt=0;mt<st.geometry[ot].length;mt++)rt.push(xn(st.geometry[ot][mt],ve));Ke.push(rt)}Le.push(Pe(st.id,ct,Ke,st.tags))}return Le}function xn(He,ve){var Le=[];Le.size=He.size,He.start!==void 0&&(Le.start=He.start,Le.end=He.end);for(var $e=0;$e<He.length;$e+=3)Le.push(He[$e]+ve,He[$e+1],He[$e+2]);return Le}function jn(He,ve){if(He.transformed)return He;var Le,$e,Ke,st=1<<He.z,ct=He.x,ot=He.y;for(Le=0;Le<He.features.length;Le++){var rt=He.features[Le],mt=rt.geometry,kt=rt.type;if(rt.geometry=[],kt===1)for($e=0;$e<mt.length;$e+=2)rt.geometry.push(nn(mt[$e],mt[$e+1],ve,st,ct,ot));else for($e=0;$e<mt.length;$e++){var zt=[];for(Ke=0;Ke<mt[$e].length;Ke+=2)zt.push(nn(mt[$e][Ke],mt[$e][Ke+1],ve,st,ct,ot));rt.geometry.push(zt)}}return He.transformed=!0,He}function nn(He,ve,Le,$e,Ke,st){return[Math.round(Le*(He*$e-Ke)),Math.round(Le*(ve*$e-st))]}function dt(He,ve,Le,$e,Ke){for(var st=ve===Ke.maxZoom?0:Ke.tolerance/((1<<ve)*Ke.extent),ct={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Le,y:$e,z:ve,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ot=0;ot<He.length;ot++){ct.numFeatures++,vt(ct,He[ot],st,Ke);var rt=He[ot].minX,mt=He[ot].minY,kt=He[ot].maxX,zt=He[ot].maxY;rt<ct.minX&&(ct.minX=rt),mt<ct.minY&&(ct.minY=mt),kt>ct.maxX&&(ct.maxX=kt),zt>ct.maxY&&(ct.maxY=zt)}return ct}function vt(He,ve,Le,$e){var Ke=ve.geometry,st=ve.type,ct=[];if(st==="Point"||st==="MultiPoint")for(var ot=0;ot<Ke.length;ot+=3)ct.push(Ke[ot]),ct.push(Ke[ot+1]),He.numPoints++,He.numSimplified++;else if(st==="LineString")Pt(ct,Ke,He,Le,!1,!1);else if(st==="MultiLineString"||st==="Polygon")for(ot=0;ot<Ke.length;ot++)Pt(ct,Ke[ot],He,Le,st==="Polygon",ot===0);else if(st==="MultiPolygon")for(var rt=0;rt<Ke.length;rt++){var mt=Ke[rt];for(ot=0;ot<mt.length;ot++)Pt(ct,mt[ot],He,Le,!0,ot===0)}if(ct.length){var kt=ve.tags||null;if(st==="LineString"&&$e.lineMetrics){for(var zt in kt={},ve.tags)kt[zt]=ve.tags[zt];kt.mapbox_clip_start=Ke.start/Ke.size,kt.mapbox_clip_end=Ke.end/Ke.size}var Dt={geometry:ct,type:st==="Polygon"||st==="MultiPolygon"?3:st==="LineString"||st==="MultiLineString"?2:1,tags:kt};ve.id!==null&&(Dt.id=ve.id),He.features.push(Dt)}}function Pt(He,ve,Le,$e,Ke,st){var ct=$e*$e;if($e>0&&ve.size<(Ke?ct:$e))Le.numPoints+=ve.length/3;else{for(var ot=[],rt=0;rt<ve.length;rt+=3)($e===0||ve[rt+2]>ct)&&(Le.numSimplified++,ot.push(ve[rt]),ot.push(ve[rt+1])),Le.numPoints++;Ke&&function(mt,kt){for(var zt=0,Dt=0,oi=mt.length,Kt=oi-2;Dt<oi;Kt=Dt,Dt+=2)zt+=(mt[Dt]-mt[Kt])*(mt[Dt+1]+mt[Kt+1]);if(zt>0===kt)for(Dt=0,oi=mt.length;Dt<oi/2;Dt+=2){var pi=mt[Dt],bi=mt[Dt+1];mt[Dt]=mt[oi-2-Dt],mt[Dt+1]=mt[oi-1-Dt],mt[oi-2-Dt]=pi,mt[oi-1-Dt]=bi}}(ot,st),He.push(ot)}}function Ft(He,ve){var Le=(ve=this.options=function(Ke,st){for(var ct in st)Ke[ct]=st[ct];return Ke}(Object.create(this.options),ve)).debug;if(Le&&console.time("preprocess data"),ve.maxZoom<0||ve.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ve.promoteId&&ve.generateId)throw new Error("promoteId and generateId cannot be used together.");var $e=function(Ke,st){var ct=[];if(Ke.type==="FeatureCollection")for(var ot=0;ot<Ke.features.length;ot++)Xe(ct,Ke.features[ot],st,ot);else Xe(ct,Ke.type==="Feature"?Ke:{geometry:Ke},st);return ct}(He,ve);this.tiles={},this.tileCoords=[],Le&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ve.indexMaxZoom,ve.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),$e=function(Ke,st){var ct=st.buffer/st.extent,ot=Ke,rt=Rt(Ke,1,-1-ct,ct,0,-1,2,st),mt=Rt(Ke,1,1-ct,2+ct,0,-1,2,st);return(rt||mt)&&(ot=Rt(Ke,1,-ct,1+ct,0,-1,2,st)||[],rt&&(ot=Zi(rt,1).concat(ot)),mt&&(ot=ot.concat(Zi(mt,-1)))),ot}($e,ve),$e.length&&this.splitTile($e,0,0,0),Le&&($e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function qt(He,ve,Le){return 32*((1<<He)*Le+ve)+He}function vi(He,ve){const Le=He.tileID.canonical;if(!this._geoJSONIndex)return ve(null,null);const $e=this._geoJSONIndex.getTile(Le.z,Le.x,Le.y);if(!$e)return ve(null,null);const Ke=new I($e.features);let st=N.exports(Ke);st.byteOffset===0&&st.byteLength===st.buffer.byteLength||(st=new Uint8Array(st)),ve(null,{vectorTile:Ke,rawData:st.buffer})}Ft.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ft.prototype.splitTile=function(He,ve,Le,$e,Ke,st,ct){for(var ot=[He,ve,Le,$e],rt=this.options,mt=rt.debug;ot.length;){$e=ot.pop(),Le=ot.pop(),ve=ot.pop(),He=ot.pop();var kt=1<<ve,zt=qt(ve,Le,$e),Dt=this.tiles[zt];if(!Dt&&(mt>1&&console.time("creation"),Dt=this.tiles[zt]=dt(He,ve,Le,$e,rt),this.tileCoords.push({z:ve,x:Le,y:$e}),mt)){mt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ve,Le,$e,Dt.numFeatures,Dt.numPoints,Dt.numSimplified),console.timeEnd("creation"));var oi="z"+ve;this.stats[oi]=(this.stats[oi]||0)+1,this.total++}if(Dt.source=He,Ke){if(ve===rt.maxZoom||ve===Ke)continue;var Kt=1<<Ke-ve;if(Le!==Math.floor(st/Kt)||$e!==Math.floor(ct/Kt))continue}else if(ve===rt.indexMaxZoom||Dt.numPoints<=rt.indexMaxPoints)continue;if(Dt.source=null,He.length!==0){mt>1&&console.time("clipping");var pi,bi,Bi,_i,Pi,$i,ji=.5*rt.buffer/rt.extent,pn=.5-ji,Hn=.5+ji,xr=1+ji;pi=bi=Bi=_i=null,Pi=Rt(He,kt,Le-ji,Le+Hn,0,Dt.minX,Dt.maxX,rt),$i=Rt(He,kt,Le+pn,Le+xr,0,Dt.minX,Dt.maxX,rt),He=null,Pi&&(pi=Rt(Pi,kt,$e-ji,$e+Hn,1,Dt.minY,Dt.maxY,rt),bi=Rt(Pi,kt,$e+pn,$e+xr,1,Dt.minY,Dt.maxY,rt),Pi=null),$i&&(Bi=Rt($i,kt,$e-ji,$e+Hn,1,Dt.minY,Dt.maxY,rt),_i=Rt($i,kt,$e+pn,$e+xr,1,Dt.minY,Dt.maxY,rt),$i=null),mt>1&&console.timeEnd("clipping"),ot.push(pi||[],ve+1,2*Le,2*$e),ot.push(bi||[],ve+1,2*Le,2*$e+1),ot.push(Bi||[],ve+1,2*Le+1,2*$e),ot.push(_i||[],ve+1,2*Le+1,2*$e+1)}}},Ft.prototype.getTile=function(He,ve,Le){var $e=this.options,Ke=$e.extent,st=$e.debug;if(He<0||He>24)return null;var ct=1<<He,ot=qt(He,ve=(ve%ct+ct)%ct,Le);if(this.tiles[ot])return jn(this.tiles[ot],Ke);st>1&&console.log("drilling down to z%d-%d-%d",He,ve,Le);for(var rt,mt=He,kt=ve,zt=Le;!rt&&mt>0;)mt--,kt=Math.floor(kt/2),zt=Math.floor(zt/2),rt=this.tiles[qt(mt,kt,zt)];return rt&&rt.source?(st>1&&console.log("found parent tile z%d-%d-%d",mt,kt,zt),st>1&&console.time("drilling down"),this.splitTile(rt.source,mt,kt,zt,He,ve,Le),st>1&&console.timeEnd("drilling down"),this.tiles[ot]?jn(this.tiles[ot],Ke):null):null};class Oi extends w{constructor(ve,Le,$e,Ke){super(ve,Le,$e,vi),Ke&&(this.loadGeoJSON=Ke)}loadData(ve,Le){var $e;($e=this._pendingRequest)===null||$e===void 0||$e.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Ke=!!(ve&&ve.request&&ve.request.collectResourceTiming)&&new n.RequestPerformance(ve.request);this._pendingCallback=Le,this._pendingRequest=this.loadGeoJSON(ve,(st,ct)=>{if(delete this._pendingCallback,delete this._pendingRequest,st||!ct)return Le(st);if(typeof ct!="object")return Le(new Error(`Input data given to '${ve.source}' is not a valid GeoJSON object.`));{S(ct,!0);try{if(ve.filter){const rt=n.createExpression(ve.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(rt.result==="error")throw new Error(rt.value.map(kt=>`${kt.key}: ${kt.message}`).join(", "));ct={type:"FeatureCollection",features:ct.features.filter(kt=>rt.value.evaluate({zoom:0},kt))}}this._geoJSONIndex=ve.cluster?new ce(function({superclusterOptions:rt,clusterProperties:mt}){if(!mt||!rt)return rt;const kt={},zt={},Dt={accumulated:null,zoom:0},oi={properties:null},Kt=Object.keys(mt);for(const pi of Kt){const[bi,Bi]=mt[pi],_i=n.createExpression(Bi),Pi=n.createExpression(typeof bi=="string"?[bi,["accumulated"],["get",pi]]:bi);kt[pi]=_i.value,zt[pi]=Pi.value}return rt.map=pi=>{oi.properties=pi;const bi={};for(const Bi of Kt)bi[Bi]=kt[Bi].evaluate(Dt,oi);return bi},rt.reduce=(pi,bi)=>{oi.properties=bi;for(const Bi of Kt)Dt.accumulated=pi[Bi],pi[Bi]=zt[Bi].evaluate(Dt,oi)},rt}(ve)).load(ct.features):function(rt,mt){return new Ft(rt,mt)}(ct,ve.geojsonVtOptions)}catch(rt){return Le(rt)}this.loaded={};const ot={};if(Ke){const rt=Ke.finish();rt&&(ot.resourceTiming={},ot.resourceTiming[ve.source]=JSON.parse(JSON.stringify(rt)))}Le(null,ot)}})}reloadTile(ve,Le){const $e=this.loaded;return $e&&$e[ve.uid]?super.reloadTile(ve,Le):this.loadTile(ve,Le)}loadGeoJSON(ve,Le){if(ve.request)return n.getJSON(ve.request,Le);if(typeof ve.data=="string")try{Le(null,JSON.parse(ve.data))}catch{Le(new Error(`Input data given to '${ve.source}' is not a valid GeoJSON object.`))}else Le(new Error(`Input data given to '${ve.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(ve,Le){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Le()}getClusterExpansionZoom(ve,Le){try{Le(null,this._geoJSONIndex.getClusterExpansionZoom(ve.clusterId))}catch($e){Le($e)}}getClusterChildren(ve,Le){try{Le(null,this._geoJSONIndex.getChildren(ve.clusterId))}catch($e){Le($e)}}getClusterLeaves(ve,Le){try{Le(null,this._geoJSONIndex.getLeaves(ve.clusterId,ve.limit,ve.offset))}catch($e){Le($e)}}}class hi{constructor(ve){this.self=ve,this.actor=new n.Actor(ve,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:w,geojson:Oi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Le,$e)=>{if(this.workerSourceTypes[Le])throw new Error(`Worker source with name "${Le}" already registered.`);this.workerSourceTypes[Le]=$e},this.self.registerRTLTextPlugin=Le=>{if(n.plugin.isParsed())throw new Error("RTL text plugin already registered.");n.plugin.applyArabicShaping=Le.applyArabicShaping,n.plugin.processBidirectionalText=Le.processBidirectionalText,n.plugin.processStyledBidirectionalText=Le.processStyledBidirectionalText}}setReferrer(ve,Le){this.referrer=Le}setImages(ve,Le,$e){this.availableImages[ve]=Le;for(const Ke in this.workerSources[ve]){const st=this.workerSources[ve][Ke];for(const ct in st)st[ct].availableImages=Le}$e()}setLayers(ve,Le,$e){this.getLayerIndex(ve).replace(Le),$e()}updateLayers(ve,Le,$e){this.getLayerIndex(ve).update(Le.layers,Le.removedIds),$e()}loadTile(ve,Le,$e){this.getWorkerSource(ve,Le.type,Le.source).loadTile(Le,$e)}loadDEMTile(ve,Le,$e){this.getDEMWorkerSource(ve,Le.source).loadTile(Le,$e)}reloadTile(ve,Le,$e){this.getWorkerSource(ve,Le.type,Le.source).reloadTile(Le,$e)}abortTile(ve,Le,$e){this.getWorkerSource(ve,Le.type,Le.source).abortTile(Le,$e)}removeTile(ve,Le,$e){this.getWorkerSource(ve,Le.type,Le.source).removeTile(Le,$e)}removeDEMTile(ve,Le){this.getDEMWorkerSource(ve,Le.source).removeTile(Le)}removeSource(ve,Le,$e){if(!this.workerSources[ve]||!this.workerSources[ve][Le.type]||!this.workerSources[ve][Le.type][Le.source])return;const Ke=this.workerSources[ve][Le.type][Le.source];delete this.workerSources[ve][Le.type][Le.source],Ke.removeSource!==void 0?Ke.removeSource(Le,$e):$e()}loadWorkerSource(ve,Le,$e){try{this.self.importScripts(Le.url),$e()}catch(Ke){$e(Ke.toString())}}syncRTLPluginState(ve,Le,$e){try{n.plugin.setState(Le);const Ke=n.plugin.getPluginURL();if(n.plugin.isLoaded()&&!n.plugin.isParsed()&&Ke!=null){this.self.importScripts(Ke);const st=n.plugin.isParsed();$e(st?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ke}`),st)}}catch(Ke){$e(Ke.toString())}}getAvailableImages(ve){let Le=this.availableImages[ve];return Le||(Le=[]),Le}getLayerIndex(ve){let Le=this.layerIndexes[ve];return Le||(Le=this.layerIndexes[ve]=new g),Le}getWorkerSource(ve,Le,$e){if(this.workerSources[ve]||(this.workerSources[ve]={}),this.workerSources[ve][Le]||(this.workerSources[ve][Le]={}),!this.workerSources[ve][Le][$e]){const Ke={send:(st,ct,ot)=>{this.actor.send(st,ct,ot,ve)}};this.workerSources[ve][Le][$e]=new this.workerSourceTypes[Le](Ke,this.getLayerIndex(ve),this.getAvailableImages(ve))}return this.workerSources[ve][Le][$e]}getDEMWorkerSource(ve,Le){return this.demWorkerSources[ve]||(this.demWorkerSources[ve]={}),this.demWorkerSources[ve][Le]||(this.demWorkerSources[ve][Le]=new k),this.demWorkerSources[ve][Le]}enforceCacheSizeLimit(ve,Le){n.enforceCacheSizeLimit(Le)}}return n.isWorker()&&(self.worker=new hi(self)),hi}),l(["./shared"],function(n){var p=m;function m(E){return!function(o){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b,M,j=new Blob([""],{type:"text/javascript"}),ee=URL.createObjectURL(j);try{M=new Worker(ee),b=!0}catch{b=!1}return M&&M.terminate(),URL.revokeObjectURL(ee),b}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var b=document.createElement("canvas");b.width=b.height=1;var M=b.getContext("2d");if(!M)return!1;var j=M.getImageData(0,0,1,1);return j&&j.width===b.width}()?(g[h=o&&o.failIfMajorPerformanceCaveat]===void 0&&(g[h]=function(b){var M,j=function(ee){var le=document.createElement("canvas"),pe=Object.create(m.webGLContextAttributes);return pe.failIfMajorPerformanceCaveat=ee,le.getContext("webgl",pe)||le.getContext("experimental-webgl",pe)}(b);if(!j)return!1;try{M=j.createShader(j.VERTEX_SHADER)}catch{return!1}return!(!M||j.isContextLost())&&(j.shaderSource(M,"void main() {}"),j.compileShader(M),j.getShaderParameter(M,j.COMPILE_STATUS)===!0)}(h)),g[h]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var h}(E)}var g={};function v(E,o){if(Array.isArray(E)){if(!Array.isArray(o)||E.length!==o.length)return!1;for(let h=0;h<E.length;h++)if(!v(E[h],o[h]))return!1;return!0}if(typeof E=="object"&&E!==null&&o!==null){if(typeof o!="object"||Object.keys(E).length!==Object.keys(o).length)return!1;for(const h in E)if(!v(E[h],o[h]))return!1;return!0}return E===o}m.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class y{static testProp(o){if(!y.docStyle)return o[0];for(let h=0;h<o.length;h++)if(o[h]in y.docStyle)return o[h];return o[0]}static create(o,h,b){const M=window.document.createElement(o);return h!==void 0&&(M.className=h),b&&b.appendChild(M),M}static createNS(o,h){return window.document.createElementNS(o,h)}static disableDrag(){y.docStyle&&y.selectProp&&(y.userSelect=y.docStyle[y.selectProp],y.docStyle[y.selectProp]="none")}static enableDrag(){y.docStyle&&y.selectProp&&(y.docStyle[y.selectProp]=y.userSelect)}static setTransform(o,h){o.style[y.transformProp]=h}static addEventListener(o,h,b,M={}){o.addEventListener(h,b,"passive"in M?M:M.capture)}static removeEventListener(o,h,b,M={}){o.removeEventListener(h,b,"passive"in M?M:M.capture)}static suppressClickInternal(o){o.preventDefault(),o.stopPropagation(),window.removeEventListener("click",y.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",y.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",y.suppressClickInternal,!0)},0)}static mousePos(o,h){const b=o.getBoundingClientRect();return new n.pointGeometry(h.clientX-b.left-o.clientLeft,h.clientY-b.top-o.clientTop)}static touchPos(o,h){const b=o.getBoundingClientRect(),M=[];for(let j=0;j<h.length;j++)M.push(new n.pointGeometry(h[j].clientX-b.left-o.clientLeft,h[j].clientY-b.top-o.clientTop));return M}static mouseButton(o){return o.button}static remove(o){o.parentNode&&o.parentNode.removeChild(o)}}y.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,y.selectProp=y.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),y.transformProp=y.testProp(["transform","WebkitTransform"]);class C{constructor(o){this._transformRequestFn=o}transformRequest(o,h){return this._transformRequestFn&&this._transformRequestFn(o,h)||{url:o}}normalizeSpriteURL(o,h,b){const M=function(j){const ee=j.match(_);if(!ee)throw new Error(`Unable to parse URL "${j}"`);return{protocol:ee[1],authority:ee[2],path:ee[3]||"/",params:ee[4]?ee[4].split("&"):[]}}(o);return M.path+=`${h}${b}`,function(j){const ee=j.params.length?`?${j.params.join("&")}`:"";return`${j.protocol}://${j.authority}${j.path}${ee}`}(M)}setTransformRequest(o){this._transformRequestFn=o}}const _=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class w{constructor(o,h,b,M){this.context=o,this.format=b,this.texture=o.gl.createTexture(),this.update(h,M)}update(o,h,b){const{width:M,height:j}=o,ee=!(this.size&&this.size[0]===M&&this.size[1]===j||b),{context:le}=this,{gl:pe}=le;if(this.useMipmap=!!(h&&h.useMipmap),pe.bindTexture(pe.TEXTURE_2D,this.texture),le.pixelStoreUnpackFlipY.set(!1),le.pixelStoreUnpack.set(1),le.pixelStoreUnpackPremultiplyAlpha.set(this.format===pe.RGBA&&(!h||h.premultiply!==!1)),ee)this.size=[M,j],o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||n.isImageBitmap(o)?pe.texImage2D(pe.TEXTURE_2D,0,this.format,this.format,pe.UNSIGNED_BYTE,o):pe.texImage2D(pe.TEXTURE_2D,0,this.format,M,j,0,this.format,pe.UNSIGNED_BYTE,o.data);else{const{x:Te,y:Ne}=b||{x:0,y:0};o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||n.isImageBitmap(o)?pe.texSubImage2D(pe.TEXTURE_2D,0,Te,Ne,pe.RGBA,pe.UNSIGNED_BYTE,o):pe.texSubImage2D(pe.TEXTURE_2D,0,Te,Ne,M,j,pe.RGBA,pe.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&pe.generateMipmap(pe.TEXTURE_2D)}bind(o,h,b){const{context:M}=this,{gl:j}=M;j.bindTexture(j.TEXTURE_2D,this.texture),b!==j.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(b=j.LINEAR),o!==this.filter&&(j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,o),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,b||o),this.filter=o),h!==this.wrap&&(j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,h),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,h),this.wrap=h)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}function k(E){const{userImage:o}=E;return!!(o&&o.render&&o.render())&&(E.data.replace(new Uint8Array(o.data.buffer)),!0)}class S extends n.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new n.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:h,callback:b}of this.requestors)this._notify(h,b);this.requestors=[]}}getImage(o){return this.images[o]}addImage(o,h){if(this.images[o])throw new Error(`Image id ${o} already exist, use updateImage instead`);this._validate(o,h)&&(this.images[o]=h)}_validate(o,h){let b=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new n.ErrorEvent(new Error(`Image "${o}" has invalid "stretchX" value`))),b=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new n.ErrorEvent(new Error(`Image "${o}" has invalid "stretchY" value`))),b=!1),this._validateContent(h.content,h)||(this.fire(new n.ErrorEvent(new Error(`Image "${o}" has invalid "content" value`))),b=!1),b}_validateStretch(o,h){if(!o)return!0;let b=0;for(const M of o){if(M[0]<b||M[1]<M[0]||h<M[1])return!1;b=M[1]}return!0}_validateContent(o,h){return!(o&&(o.length!==4||o[0]<0||h.data.width<o[0]||o[1]<0||h.data.height<o[1]||o[2]<0||h.data.width<o[2]||o[3]<0||h.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))}updateImage(o,h){const b=this.images[o];if(b.data.width!==h.data.width||b.data.height!==h.data.height)throw new Error(`size mismatch between old image (${b.data.width}x${b.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=b.version+1,this.images[o]=h,this.updatedImages[o]=!0}removeImage(o){const h=this.images[o];delete this.images[o],delete this.patterns[o],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o,h){let b=!0;if(!this.isLoaded())for(const M of o)this.images[M]||(b=!1);this.isLoaded()||b?this._notify(o,h):this.requestors.push({ids:o,callback:h})}_notify(o,h){const b={};for(const M of o){this.images[M]||this.fire(new n.Event("styleimagemissing",{id:M}));const j=this.images[M];j?b[M]={data:j.data.clone(),pixelRatio:j.pixelRatio,sdf:j.sdf,version:j.version,stretchX:j.stretchX,stretchY:j.stretchY,content:j.content,hasRenderCallback:!!(j.userImage&&j.userImage.render)}:n.warnOnce(`Image "${M}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,b)}getPixelSize(){const{width:o,height:h}=this.atlasImage;return{width:o,height:h}}getPattern(o){const h=this.patterns[o],b=this.getImage(o);if(!b)return null;if(h&&h.position.version===b.version)return h.position;if(h)h.position.version=b.version;else{const M={w:b.data.width+2,h:b.data.height+2,x:0,y:0},j=new n.ImagePosition(M,b);this.patterns[o]={bin:M,position:j}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const h=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new w(o,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const j in this.patterns)o.push(this.patterns[j].bin);const{w:h,h:b}=n.potpack(o),M=this.atlasImage;M.resize({width:h||1,height:b||1});for(const j in this.patterns){const{bin:ee}=this.patterns[j],le=ee.x+1,pe=ee.y+1,Te=this.images[j].data,Ne=Te.width,Be=Te.height;n.RGBAImage.copy(Te,M,{x:0,y:0},{x:le,y:pe},{width:Ne,height:Be}),n.RGBAImage.copy(Te,M,{x:0,y:Be-1},{x:le,y:pe-1},{width:Ne,height:1}),n.RGBAImage.copy(Te,M,{x:0,y:0},{x:le,y:pe+Be},{width:Ne,height:1}),n.RGBAImage.copy(Te,M,{x:Ne-1,y:0},{x:le-1,y:pe},{width:1,height:Be}),n.RGBAImage.copy(Te,M,{x:0,y:0},{x:le+Ne,y:pe},{width:1,height:Be})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const h of o){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const b=this.images[h];b||n.warnOnce(`Image with ID: "${h}" was not found`),k(b)&&this.updateImage(h,b)}}}const x=1e20;function P(E,o,h,b,M,j,ee,le,pe){for(let Te=o;Te<o+b;Te++)D(E,h*j+Te,j,M,ee,le,pe);for(let Te=h;Te<h+M;Te++)D(E,Te*j+o,1,b,ee,le,pe)}function D(E,o,h,b,M,j,ee){j[0]=0,ee[0]=-1e20,ee[1]=x,M[0]=E[o];for(let le=1,pe=0,Te=0;le<b;le++){M[le]=E[o+le*h];const Ne=le*le;do{const Be=j[pe];Te=(M[le]-M[Be]+Ne-Be*Be)/(le-Be)/2}while(Te<=ee[pe]&&--pe>-1);pe++,j[pe]=le,ee[pe]=Te,ee[pe+1]=x}for(let le=0,pe=0;le<b;le++){for(;ee[pe+1]<le;)pe++;const Te=j[pe],Ne=le-Te;E[o+le*h]=M[Te]+Ne*Ne}}class T{constructor(o,h){this.requestManager=o,this.localIdeographFontFamily=h,this.entries={}}setURL(o){this.url=o}getGlyphs(o,h){const b=[];for(const M in o)for(const j of o[M])b.push({stack:M,id:j});n.asyncAll(b,({stack:M,id:j},ee)=>{let le=this.entries[M];le||(le=this.entries[M]={glyphs:{},requests:{},ranges:{}});let pe=le.glyphs[j];if(pe!==void 0)return void ee(null,{stack:M,id:j,glyph:pe});if(pe=this._tinySDF(le,M,j),pe)return le.glyphs[j]=pe,void ee(null,{stack:M,id:j,glyph:pe});const Te=Math.floor(j/256);if(256*Te>65535)return void ee(new Error("glyphs > 65535 not supported"));if(le.ranges[Te])return void ee(null,{stack:M,id:j,glyph:pe});let Ne=le.requests[Te];Ne||(Ne=le.requests[Te]=[],T.loadGlyphRange(M,Te,this.url,this.requestManager,(Be,qe)=>{if(qe){for(const tt in qe)this._doesCharSupportLocalGlyph(+tt)||(le.glyphs[+tt]=qe[+tt]);le.ranges[Te]=!0}for(const tt of Ne)tt(Be,qe);delete le.requests[Te]})),Ne.push((Be,qe)=>{Be?ee(Be):qe&&ee(null,{stack:M,id:j,glyph:qe[j]||null})})},(M,j)=>{if(M)h(M);else if(j){const ee={};for(const{stack:le,id:pe,glyph:Te}of j)(ee[le]||(ee[le]={}))[pe]=Te&&{id:Te.id,bitmap:Te.bitmap.clone(),metrics:Te.metrics};h(null,ee)}})}_doesCharSupportLocalGlyph(o){return!!this.localIdeographFontFamily&&(n.unicodeBlockLookup["CJK Unified Ideographs"](o)||n.unicodeBlockLookup["Hangul Syllables"](o)||n.unicodeBlockLookup.Hiragana(o)||n.unicodeBlockLookup.Katakana(o))}_tinySDF(o,h,b){const M=this.localIdeographFontFamily;if(!M||!this._doesCharSupportLocalGlyph(b))return;let j=o.tinySDF;if(!j){let le="400";/bold/i.test(h)?le="900":/medium/i.test(h)?le="500":/light/i.test(h)&&(le="200"),j=o.tinySDF=new T.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:M,fontWeight:le})}const ee=j.draw(String.fromCharCode(b));return{id:b,bitmap:new n.AlphaImage({width:ee.width||30,height:ee.height||30},ee.data),metrics:{width:ee.glyphWidth||24,height:ee.glyphHeight||24,left:ee.glyphLeft||0,top:ee.glyphTop-27||-8,advance:ee.glyphAdvance||24}}}}T.loadGlyphRange=function(E,o,h,b,M){const j=256*o,ee=j+255,le=b.transformRequest(h.replace("{fontstack}",E).replace("{range}",`${j}-${ee}`),n.ResourceType.Glyphs);n.getArrayBuffer(le,(pe,Te)=>{if(pe)M(pe);else if(Te){const Ne={};for(const Be of n.parseGlyphPbf(Te))Ne[Be.id]=Be;M(null,Ne)}})},T.TinySDF=class{constructor({fontSize:E=24,buffer:o=3,radius:h=8,cutoff:b=.25,fontFamily:M="sans-serif",fontWeight:j="normal",fontStyle:ee="normal"}={}){this.buffer=o,this.cutoff=b,this.radius=h;const le=this.size=E+4*o,pe=this._createCanvas(le),Te=this.ctx=pe.getContext("2d",{willReadFrequently:!0});Te.font=`${ee} ${j} ${E}px ${M}`,Te.textBaseline="alphabetic",Te.textAlign="left",Te.fillStyle="black",this.gridOuter=new Float64Array(le*le),this.gridInner=new Float64Array(le*le),this.f=new Float64Array(le),this.z=new Float64Array(le+1),this.v=new Uint16Array(le)}_createCanvas(E){const o=document.createElement("canvas");return o.width=o.height=E,o}draw(E){const{width:o,actualBoundingBoxAscent:h,actualBoundingBoxDescent:b,actualBoundingBoxLeft:M,actualBoundingBoxRight:j}=this.ctx.measureText(E),ee=Math.ceil(h),le=Math.min(this.size-this.buffer,Math.ceil(j-M)),pe=Math.min(this.size-this.buffer,ee+Math.ceil(b)),Te=le+2*this.buffer,Ne=pe+2*this.buffer,Be=Math.max(Te*Ne,0),qe=new Uint8ClampedArray(Be),tt={data:qe,width:Te,height:Ne,glyphWidth:le,glyphHeight:pe,glyphTop:ee,glyphLeft:0,glyphAdvance:o};if(le===0||pe===0)return tt;const{ctx:Qe,buffer:Je,gridInner:pt,gridOuter:yt}=this;Qe.clearRect(Je,Je,le,pe),Qe.fillText(E,Je,Je+ee);const _t=Qe.getImageData(Je,Je,le,pe);yt.fill(x,0,Be),pt.fill(0,0,Be);for(let at=0;at<pe;at++)for(let At=0;At<le;At++){const Tt=_t.data[4*(at*le+At)+3]/255;if(Tt===0)continue;const Nt=(at+Je)*Te+At+Je;if(Tt===1)yt[Nt]=0,pt[Nt]=x;else{const Ot=.5-Tt;yt[Nt]=Ot>0?Ot*Ot:0,pt[Nt]=Ot<0?Ot*Ot:0}}P(yt,0,0,Te,Ne,Te,this.f,this.v,this.z),P(pt,Je,Je,le,pe,Te,this.f,this.v,this.z);for(let at=0;at<Be;at++){const At=Math.sqrt(yt[at])-Math.sqrt(pt[at]);qe[at]=Math.round(255-255*(At/this.radius+this.cutoff))}return tt}};const I=new n.Properties({anchor:new n.DataConstantProperty(n.spec.light.anchor),position:new class{constructor(){this.specification=n.spec.light.position}possiblyEvaluate(E,o){return n.sphericalToCartesian(E.expression.evaluate(o))}interpolate(E,o,h){return{x:n.number(E.x,o.x,h),y:n.number(E.y,o.y,h),z:n.number(E.z,o.z,h)}}},color:new n.DataConstantProperty(n.spec.light.color),intensity:new n.DataConstantProperty(n.spec.light.intensity)}),N="-transition";class q extends n.Evented{constructor(o){super(),this._transitionable=new n.Transitionable(I),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,h={}){if(!this._validate(n.validateLight,o,h))for(const b in o){const M=o[b];b.endsWith(N)?this._transitionable.setTransition(b.slice(0,-N.length),M):this._transitionable.setValue(b,M)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,h,b){return(!b||b.validate!==!1)&&n.emitValidationErrors(this,o.call(n.validateStyle,n.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:n.spec})))}}class Z{constructor(o,h){this.width=o,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(o,h){const b=o.join(",")+String(h);return this.dashEntry[b]||(this.dashEntry[b]=this.addDash(o,h)),this.dashEntry[b]}getDashRanges(o,h,b){const M=[];let j=o.length%2==1?-o[o.length-1]*b:0,ee=o[0]*b,le=!0;M.push({left:j,right:ee,isDash:le,zeroLength:o[0]===0});let pe=o[0];for(let Te=1;Te<o.length;Te++){le=!le;const Ne=o[Te];j=pe*b,pe+=Ne,ee=pe*b,M.push({left:j,right:ee,isDash:le,zeroLength:Ne===0})}return M}addRoundDash(o,h,b){const M=h/2;for(let j=-b;j<=b;j++){const ee=this.width*(this.nextRow+b+j);let le=0,pe=o[le];for(let Te=0;Te<this.width;Te++){Te/pe.right>1&&(pe=o[++le]);const Ne=Math.abs(Te-pe.left),Be=Math.abs(Te-pe.right),qe=Math.min(Ne,Be);let tt;const Qe=j/b*(M+1);if(pe.isDash){const Je=M-Math.abs(Qe);tt=Math.sqrt(qe*qe+Je*Je)}else tt=M-Math.sqrt(qe*qe+Qe*Qe);this.data[ee+Te]=Math.max(0,Math.min(255,tt+128))}}}addRegularDash(o){for(let le=o.length-1;le>=0;--le){const pe=o[le],Te=o[le+1];pe.zeroLength?o.splice(le,1):Te&&Te.isDash===pe.isDash&&(Te.left=pe.left,o.splice(le,1))}const h=o[0],b=o[o.length-1];h.isDash===b.isDash&&(h.left=b.left-this.width,b.right=h.right+this.width);const M=this.width*this.nextRow;let j=0,ee=o[j];for(let le=0;le<this.width;le++){le/ee.right>1&&(ee=o[++j]);const pe=Math.abs(le-ee.left),Te=Math.abs(le-ee.right),Ne=Math.min(pe,Te);this.data[M+le]=Math.max(0,Math.min(255,(ee.isDash?Ne:-Ne)+128))}}addDash(o,h){const b=h?7:0,M=2*b+1;if(this.nextRow+M>this.height)return n.warnOnce("LineAtlas out of space"),null;let j=0;for(let le=0;le<o.length;le++)j+=o[le];if(j!==0){const le=this.width/j,pe=this.getDashRanges(o,this.width,le);h?this.addRoundDash(pe,le,b):this.addRegularDash(pe)}const ee={y:(this.nextRow+b+.5)/this.height,height:2*b/this.height,width:j};return this.nextRow+=M,this.dirty=!0,ee}bind(o){const h=o.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}class X{constructor(o,h){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=n.uniqueId();const b=this.workerPool.acquire(this.id);for(let M=0;M<b.length;M++){const j=new X.Actor(b[M],h,this.id);j.name=`Worker ${M}`,this.actors.push(j)}if(!this.actors.length)throw new Error("No actors found")}broadcast(o,h,b){n.asyncAll(this.actors,(M,j)=>{M.send(o,h,j)},b=b||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(o=>{o.remove()}),this.actors=[],this.workerPool.release(this.id)}}function O(E,o,h){const b=function(M,j){if(M)return h(M);if(j){const ee=n.pick(n.extend(j,E),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);j.vector_layers&&(ee.vectorLayers=j.vector_layers,ee.vectorLayerIds=ee.vectorLayers.map(le=>le.id)),h(null,ee)}};return E.url?n.getJSON(o.transformRequest(E.url,n.ResourceType.Source),b):n.exported.frame(()=>b(null,E))}X.Actor=n.Actor;class V{constructor(o,h,b){this.bounds=n.LngLatBounds.convert(this.validateBounds(o)),this.minzoom=h||0,this.maxzoom=b||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const h=Math.pow(2,o.z),b=Math.floor(n.mercatorXfromLng(this.bounds.getWest())*h),M=Math.floor(n.mercatorYfromLat(this.bounds.getNorth())*h),j=Math.ceil(n.mercatorXfromLng(this.bounds.getEast())*h),ee=Math.ceil(n.mercatorYfromLat(this.bounds.getSouth())*h);return o.x>=b&&o.x<j&&o.y>=M&&o.y<ee}}class $ extends n.Evented{constructor(o,h,b,M){if(super(),this.id=o,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.extend(this,n.pick(h,["url","scheme","tileSize","promoteId"])),this._options=n.extend({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(M)}load(){this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,(o,h)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),o?this.fire(new n.ErrorEvent(o)):h&&(n.extend(this,h),h.bounds&&(this.tileBounds=new V(h.bounds,this.minzoom,this.maxzoom)),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}setSourceProperty(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return n.extend({},this._options)}loadTile(o,h){const b=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),M={request:this.map._requestManager.transformRequest(b,n.ResourceType.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function j(ee,le){return delete o.request,o.aborted?h(null):ee&&ee.status!==404?h(ee):(le&&le.resourceTiming&&(o.resourceTiming=le.resourceTiming),this.map._refreshExpiredTiles&&le&&o.setExpiryData(le),o.loadVectorData(le,this.map.painter),n.cacheEntryPossiblyAdded(this.dispatcher),h(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}M.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired"?o.state==="loading"?o.reloadCallback=h:o.request=o.actor.send("reloadTile",M,j.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",M,j.bind(this)))}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0)}unloadTile(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class L extends n.Evented{constructor(o,h,b,M){super(),this.id=o,this.dispatcher=b,this.setEventedParent(M),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.extend({type:"raster"},h),n.extend(this,n.pick(h,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,(o,h)=>{this._tileJSONRequest=null,this._loaded=!0,o?this.fire(new n.ErrorEvent(o)):h&&(n.extend(this,h),h.bounds&&(this.tileBounds=new V(h.bounds,this.minzoom,this.maxzoom)),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return n.extend({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,h){const b=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);o.request=n.getImage(this.map._requestManager.transformRequest(b,n.ResourceType.Tile),(M,j,ee)=>{if(delete o.request,o.aborted)o.state="unloaded",h(null);else if(M)o.state="errored",h(M);else if(j){this.map._refreshExpiredTiles&&o.setExpiryData(ee);const le=this.map.painter.context,pe=le.gl;o.texture=this.map.painter.getTileTexture(j.width),o.texture?o.texture.update(j,{useMipmap:!0}):(o.texture=new w(le,j,pe.RGBA,{useMipmap:!0}),o.texture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE,pe.LINEAR_MIPMAP_NEAREST),le.extTextureFilterAnisotropic&&pe.texParameterf(pe.TEXTURE_2D,le.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,le.extTextureFilterAnisotropicMax)),o.state="loaded",n.cacheEntryPossiblyAdded(this.dispatcher),h(null)}})}abortTile(o,h){o.request&&(o.request.cancel(),delete o.request),h()}unloadTile(o,h){o.texture&&this.map.painter.saveTileTexture(o.texture),h()}hasTransition(){return!1}}let R;class G extends L{constructor(o,h,b,M){super(o,h,b,M),this.type="raster-dem",this.maxzoom=22,this._options=n.extend({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(o,h){const b=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function M(j,ee){j&&(o.state="errored",h(j)),ee&&(o.dem=ee,o.needsHillshadePrepare=!0,o.needsTerrainPrepare=!0,o.state="loaded",h(null))}o.request=n.getImage(this.map._requestManager.transformRequest(b,n.ResourceType.Tile),(function(j,ee){if(delete o.request,o.aborted)o.state="unloaded",h(null);else if(j)o.state="errored",h(j);else if(ee){this.map._refreshExpiredTiles&&o.setExpiryData(ee),delete ee.cacheControl,delete ee.expires;const le=n.isImageBitmap(ee)&&(R==null&&(R=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),R)?ee:n.exported.getImageData(ee,1),pe={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:le,encoding:this.encoding};o.actor&&o.state!=="expired"||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",pe,M.bind(this)))}}).bind(this)),o.neighboringTiles=this._getNeighboringTiles(o.tileID)}_getNeighboringTiles(o){const h=o.canonical,b=Math.pow(2,h.z),M=(h.x-1+b)%b,j=h.x===0?o.wrap-1:o.wrap,ee=(h.x+1+b)%b,le=h.x+1===b?o.wrap+1:o.wrap,pe={};return pe[new n.OverscaledTileID(o.overscaledZ,j,h.z,M,h.y).key]={backfilled:!1},pe[new n.OverscaledTileID(o.overscaledZ,le,h.z,ee,h.y).key]={backfilled:!1},h.y>0&&(pe[new n.OverscaledTileID(o.overscaledZ,j,h.z,M,h.y-1).key]={backfilled:!1},pe[new n.OverscaledTileID(o.overscaledZ,o.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},pe[new n.OverscaledTileID(o.overscaledZ,le,h.z,ee,h.y-1).key]={backfilled:!1}),h.y+1<b&&(pe[new n.OverscaledTileID(o.overscaledZ,j,h.z,M,h.y+1).key]={backfilled:!1},pe[new n.OverscaledTileID(o.overscaledZ,o.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},pe[new n.OverscaledTileID(o.overscaledZ,le,h.z,ee,h.y+1).key]={backfilled:!1}),pe}unloadTile(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&o.actor.send("removeDEMTile",{uid:o.uid,source:this.id})}}class U extends n.Evented{constructor(o,h,b,M){super(),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=b.getActor(),this.setEventedParent(M),this._data=h.data,this._options=n.extend({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId;const j=n.EXTENT/this.tileSize;this.workerOptions=n.extend({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:(h.buffer!==void 0?h.buffer:128)*j,tolerance:(h.tolerance!==void 0?h.tolerance:.375)*j,extent:n.EXTENT,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:h.clusterMaxZoom!==void 0?h.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,h.clusterMinPoints||2),extent:n.EXTENT,radius:(h.clusterRadius||50)*j,log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(o){this.map=o,this.load()}setData(o){return this._data=o,this._updateWorkerData("content"),this}getClusterExpansionZoom(o,h){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},h),this}getClusterChildren(o,h){return this.actor.send("geojson.getClusterChildren",{clusterId:o,source:this.id},h),this}getClusterLeaves(o,h,b,M){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:h,offset:b},M),this}_updateWorkerData(o){const h=n.extend({},this.workerOptions),b=this._data;typeof b=="string"?(h.request=this.map._requestManager.transformRequest(n.exported.resolveURL(b),n.ResourceType.Source),h.request.collectResourceTiming=this._collectResourceTiming):h.data=JSON.stringify(b),this._pendingLoads++,this.fire(new n.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,h,(M,j)=>{if(this._pendingLoads--,this._removed||j&&j.abandoned)return void this.fire(new n.Event("dataabort",{dataType:"source",sourceDataType:o}));let ee=null;if(j&&j.resourceTiming&&j.resourceTiming[this.id]&&(ee=j.resourceTiming[this.id].slice(0)),M)return void this.fire(new n.ErrorEvent(M));const le={dataType:"source",sourceDataType:o};this._collectResourceTiming&&ee&&ee.length>0&&n.extend(le,{resourceTiming:ee}),this.fire(new n.Event("data",le))})}loaded(){return this._pendingLoads===0}loadTile(o,h){const b=o.actor?"reloadTile":"loadTile";o.actor=this.actor;const M={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o.request=this.actor.send(b,M,(j,ee)=>(delete o.request,o.unloadVectorData(),o.aborted?h(null):j?h(j):(o.loadVectorData(ee,this.map.painter,b==="reloadTile"),h(null))))}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.aborted=!0}unloadTile(o){o.unloadVectorData(),this.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return n.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var B=n.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class H extends n.Evented{constructor(o,h,b,M){super(),this.id=o,this.dispatcher=b,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(M),this.options=h}load(o,h){this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this.url=this.options.url,n.getImage(this.map._requestManager.transformRequest(this.url,n.ResourceType.Image),(b,M)=>{this._loaded=!0,b?this.fire(new n.ErrorEvent(b)):M&&(this.image=M,o&&(this.coordinates=o),h&&h(),this._finishLoading())})}loaded(){return this._loaded}updateImage(o){return this.image&&o.url?(this.options.url=o.url,this.load(o.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}setCoordinates(o){this.coordinates=o;const h=o.map(n.MercatorCoordinate.fromLngLat);this.tileID=function(M){let j=1/0,ee=1/0,le=-1/0,pe=-1/0;for(const qe of M)j=Math.min(j,qe.x),ee=Math.min(ee,qe.y),le=Math.max(le,qe.x),pe=Math.max(pe,qe.y);const Te=Math.max(le-j,pe-ee),Ne=Math.max(0,Math.floor(-Math.log(Te)/Math.LN2)),Be=Math.pow(2,Ne);return new n.CanonicalTileID(Ne,Math.floor((j+le)/2*Be),Math.floor((ee+pe)/2*Be))}(h),this.minzoom=this.maxzoom=this.tileID.z;const b=h.map(M=>this.tileID.getTilePoint(M)._round());return this._boundsArray=new n.RasterBoundsArray,this._boundsArray.emplaceBack(b[0].x,b[0].y,0,0),this._boundsArray.emplaceBack(b[1].x,b[1].y,n.EXTENT,0),this._boundsArray.emplaceBack(b[3].x,b[3].y,0,n.EXTENT),this._boundsArray.emplaceBack(b[2].x,b[2].y,n.EXTENT,n.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const o=this.map.painter.context,h=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new w(o,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));for(const b in this.tiles){const M=this.tiles[b];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture)}}loadTile(o,h){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},h(null)):(o.state="errored",h(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class W extends H{constructor(o,h,b,M){super(o,h,b,M),this.roundZoom=!0,this.type="video",this.options=h}load(){this._loaded=!1;const o=this.options;this.urls=[];for(const h of o.urls)this.urls.push(this.map._requestManager.transformRequest(h,n.ResourceType.Source).url);n.getVideo(this.urls,(h,b)=>{this._loaded=!0,h?this.fire(new n.ErrorEvent(h)):b&&(this.video=b,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(o){if(this.video){const h=this.video.seekable;o<h.start(0)||o>h.end(0)?this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=o}}getVideo(){return this.video}onAdd(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const o=this.map.painter.context,h=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new w(o,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));for(const b in this.tiles){const M=this.tiles[b];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class re extends H{constructor(o,h,b,M){super(o,h,b,M),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some(j=>!Array.isArray(j)||j.length!==2||j.some(ee=>typeof ee!="number"))||this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${o}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${o}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${o}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${o}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${o}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new n.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const h=this.map.painter.context,b=h.gl;this.boundsBuffer||(this.boundsBuffer=h.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new w(h,this.canvas,b.RGBA,{premultiply:!0});for(const M in this.tiles){const j=this.tiles[M];j.state!=="loaded"&&(j.state="loaded",j.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const o of[this.canvas.width,this.canvas.height])if(isNaN(o)||o<=0)return!0;return!1}}const de={vector:$,raster:L,"raster-dem":G,geojson:U,video:W,image:H,canvas:re};function ie(E,o){const h=n.create();return n.translate(h,h,[1,1,0]),n.scale(h,h,[.5*E.width,.5*E.height,1]),n.multiply(h,h,E.calculatePosMatrix(o.toUnwrapped()))}function oe(E,o,h,b,M,j){const ee=function(Be,qe,tt){if(Be)for(const Qe of Be){const Je=qe[Qe];if(Je&&Je.source===tt&&Je.type==="fill-extrusion")return!0}else for(const Qe in qe){const Je=qe[Qe];if(Je.source===tt&&Je.type==="fill-extrusion")return!0}return!1}(M&&M.layers,o,E.id),le=j.maxPitchScaleFactor(),pe=E.tilesIn(b,le,ee);pe.sort(Ee);const Te=[];for(const Be of pe)Te.push({wrappedTileID:Be.tileID.wrapped().key,queryResults:Be.tile.queryRenderedFeatures(o,h,E._state,Be.queryGeometry,Be.cameraQueryGeometry,Be.scale,M,j,le,ie(E.transform,Be.tileID))});const Ne=function(Be){const qe={},tt={};for(const Qe of Be){const Je=Qe.queryResults,pt=Qe.wrappedTileID,yt=tt[pt]=tt[pt]||{};for(const _t in Je){const at=Je[_t],At=yt[_t]=yt[_t]||{},Tt=qe[_t]=qe[_t]||[];for(const Nt of at)At[Nt.featureIndex]||(At[Nt.featureIndex]=!0,Tt.push(Nt))}}return qe}(Te);for(const Be in Ne)Ne[Be].forEach(qe=>{const tt=qe.feature,Qe=E.getFeatureState(tt.layer["source-layer"],tt.id);tt.source=tt.layer.source,tt.layer["source-layer"]&&(tt.sourceLayer=tt.layer["source-layer"]),tt.state=Qe});return Ne}function Ee(E,o){const h=E.tileID,b=o.tileID;return h.overscaledZ-b.overscaledZ||h.canonical.y-b.canonical.y||h.wrap-b.wrap||h.canonical.x-b.canonical.x}class xe{constructor(o,h){this.tileID=o,this.uid=n.uniqueId(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(o){const h=o+this.timeAdded;h<n.exported.now()||this.fadeEndTime&&h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(o){this.demTexture&&o.saveTileTexture(this.demTexture),this.textures.forEach(h=>o.saveTileTexture(h)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(o,h,b){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(M,j){const ee={};if(!j)return ee;for(const le of M){const pe=le.layerIds.map(Te=>j.getLayer(Te)).filter(Boolean);if(pe.length!==0){le.layers=pe,le.stateDependentLayerIds&&(le.stateDependentLayers=le.stateDependentLayerIds.map(Te=>pe.filter(Ne=>Ne.id===Te)[0]));for(const Te of pe)ee[Te.id]=le}}return ee}(o.buckets,h.style),this.hasSymbolBuckets=!1;for(const M in this.buckets){const j=this.buckets[M];if(j instanceof n.SymbolBucket){if(this.hasSymbolBuckets=!0,!b)break;j.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const M in this.buckets){const j=this.buckets[M];if(j instanceof n.SymbolBucket&&j.hasRTLText){this.hasRTLText=!0,n.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const M in this.buckets){const j=this.buckets[M];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(M).queryRadius(j))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new n.CollisionBoxArray}unloadVectorData(){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(o){return this.buckets[o.id]}upload(o){for(const b in this.buckets){const M=this.buckets[b];M.uploadPending()&&M.upload(o)}const h=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new w(o,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new w(o,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,h,b,M,j,ee,le,pe,Te,Ne){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:M,cameraQueryGeometry:j,scale:ee,tileSize:this.tileSize,pixelPosMatrix:Ne,transform:pe,params:le,queryPadding:this.queryPadding*Te},o,h,b):{}}querySourceFeatures(o,h){const b=this.latestFeatureIndex;if(!b||!b.rawTileData)return;const M=b.loadVTLayers(),j=h?h.sourceLayer:"",ee=M._geojsonTileLayer||M[j];if(!ee)return;const le=n.createFilter(h&&h.filter),{z:pe,x:Te,y:Ne}=this.tileID.canonical,Be={z:pe,x:Te,y:Ne};for(let qe=0;qe<ee.length;qe++){const tt=ee.feature(qe);if(le.needGeometry){const pt=n.toEvaluationFeature(tt,!0);if(!le.filter(new n.EvaluationParameters(this.tileID.overscaledZ),pt,this.tileID.canonical))continue}else if(!le.filter(new n.EvaluationParameters(this.tileID.overscaledZ),tt))continue;const Qe=b.getId(tt,j),Je=new n.GeoJSONFeature(tt,pe,Te,Ne,Qe);Je.tile=Be,o.push(Je)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const h=this.expirationTime;if(o.cacheControl){const b=n.parseCacheControl(o.cacheControl);b["max-age"]&&(this.expirationTime=Date.now()+1e3*b["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const b=Date.now();let M=!1;if(this.expirationTime>b)M=!1;else if(h)if(this.expirationTime<h)M=!0;else{const j=this.expirationTime-h;j?this.expirationTime=b+Math.max(j,3e4):M=!0}else M=!0;M?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)return;const b=this.latestFeatureIndex.loadVTLayers();for(const M in this.buckets){if(!h.style.hasLayer(M))continue;const j=this.buckets[M],ee=j.layers[0].sourceLayer||"_geojsonTileLayer",le=b[ee],pe=o[ee];if(!le||!pe||Object.keys(pe).length===0)continue;j.update(pe,le,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Te=h&&h.style&&h.style.getLayer(M);Te&&(this.queryPadding=Math.max(this.queryPadding,Te.queryRadius(j)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<n.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=n.exported.now()+o}setDependencies(o,h){const b={};for(const M of h)b[M]=!0;this.dependencies[o]=b}hasDependency(o,h){for(const b of o){const M=this.dependencies[b];if(M){for(const j of h)if(M[j])return!0}}return!1}}class Se{constructor(o,h){this.max=o,this.onRemove=h,this.reset()}reset(){for(const o in this.data)for(const h of this.data[o])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(o,h,b){const M=o.wrapped().key;this.data[M]===void 0&&(this.data[M]=[]);const j={value:h,timeout:void 0};if(b!==void 0&&(j.timeout=setTimeout(()=>{this.remove(o,j)},b)),this.data[M].push(j),this.order.push(M),this.order.length>this.max){const ee=this._getAndRemoveByKey(this.order[0]);ee&&this.onRemove(ee)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const h=this.data[o].shift();return h.timeout&&clearTimeout(h.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),h.value}getByKey(o){const h=this.data[o];return h?h[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,h){if(!this.has(o))return this;const b=o.wrapped().key,M=h===void 0?0:this.data[b].indexOf(h),j=this.data[b][M];return this.data[b].splice(M,1),j.timeout&&clearTimeout(j.timeout),this.data[b].length===0&&delete this.data[b],this.onRemove(j.value),this.order.splice(this.order.indexOf(b),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(o){const h=[];for(const b in this.data)for(const M of this.data[b])o(M.value)||h.push(M);for(const b of h)this.remove(b.value.tileID,b)}}class K{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,h,b){const M=String(h);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][M]=this.stateChanges[o][M]||{},n.extend(this.stateChanges[o][M],b),this.deletedStates[o]===null){this.deletedStates[o]={};for(const j in this.state[o])j!==M&&(this.deletedStates[o][j]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][M]===null){this.deletedStates[o][M]={};for(const j in this.state[o][M])b[j]||(this.deletedStates[o][M][j]=null)}else for(const j in b)this.deletedStates[o]&&this.deletedStates[o][M]&&this.deletedStates[o][M][j]===null&&delete this.deletedStates[o][M][j]}removeFeatureState(o,h,b){if(this.deletedStates[o]===null)return;const M=String(h);if(this.deletedStates[o]=this.deletedStates[o]||{},b&&h!==void 0)this.deletedStates[o][M]!==null&&(this.deletedStates[o][M]=this.deletedStates[o][M]||{},this.deletedStates[o][M][b]=null);else if(h!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][M])for(b in this.deletedStates[o][M]={},this.stateChanges[o][M])this.deletedStates[o][M][b]=null;else this.deletedStates[o][M]=null;else this.deletedStates[o]=null}getState(o,h){const b=String(h),M=n.extend({},(this.state[o]||{})[b],(this.stateChanges[o]||{})[b]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const j=this.deletedStates[o][h];if(j===null)return{};for(const ee in j)delete M[ee]}return M}initializeTileState(o,h){o.setFeatureState(this.state,h)}coalesceChanges(o,h){const b={};for(const M in this.stateChanges){this.state[M]=this.state[M]||{};const j={};for(const ee in this.stateChanges[M])this.state[M][ee]||(this.state[M][ee]={}),n.extend(this.state[M][ee],this.stateChanges[M][ee]),j[ee]=this.state[M][ee];b[M]=j}for(const M in this.deletedStates){this.state[M]=this.state[M]||{};const j={};if(this.deletedStates[M]===null)for(const ee in this.state[M])j[ee]={},this.state[M][ee]={};else for(const ee in this.deletedStates[M]){if(this.deletedStates[M][ee]===null)this.state[M][ee]={};else for(const le of Object.keys(this.deletedStates[M][ee]))delete this.state[M][ee][le];j[ee]=this.state[M][ee]}b[M]=b[M]||{},n.extend(b[M],j)}if(this.stateChanges={},this.deletedStates={},Object.keys(b).length!==0)for(const M in o)o[M].setFeatureState(b,h)}}class Q extends n.Evented{constructor(o,h,b){super(),this.id=o,this.dispatcher=b,this.on("data",M=>{M.dataType==="source"&&M.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&M.dataType==="source"&&M.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(M,j,ee,le){const pe=new de[j.type](M,j,ee,le);if(pe.id!==M)throw new Error(`Expected Source id to be ${M} instead of ${pe.id}`);return n.bindAll(["load","abort","unload","serialize","prepare"],pe),pe}(o,h,b,this),this._tiles={},this._cache=new Se(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new K}onAdd(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(o)}onRemove(o){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(o)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles){const h=this._tiles[o];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(o,h){return this._source.loadTile(o,h)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o,()=>{})}_abortTile(o){this._source.abortTile&&this._source.abortTile(o,()=>{}),this._source.fire(new n.Event("dataabort",{tile:o,coord:o.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const b=this._tiles[h];b.upload(o),b.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(ae).map(o=>o.key)}getRenderableIds(o){const h=[];for(const b in this._tiles)this._isIdRenderable(b,o)&&h.push(this._tiles[b]);return o?h.sort((b,M)=>{const j=b.tileID,ee=M.tileID,le=new n.pointGeometry(j.canonical.x,j.canonical.y)._rotate(this.transform.angle),pe=new n.pointGeometry(ee.canonical.x,ee.canonical.y)._rotate(this.transform.angle);return j.overscaledZ-ee.overscaledZ||pe.y-le.y||pe.x-le.x}).map(b=>b.tileID.key):h.map(b=>b.tileID).sort(ae).map(b=>b.key)}hasRenderableParent(o){const h=this.findLoadedParent(o,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(o,h){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(h||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")}}_reloadTile(o,h){const b=this._tiles[o];b&&(b.state!=="loading"&&(b.state=h),this._loadTile(b,this._tileLoaded.bind(this,b,o,h)))}_tileLoaded(o,h,b,M){if(M)return o.state="errored",void(M.status!==404?this._source.fire(new n.ErrorEvent(M,{tile:o})):this.update(this.transform,this.terrain));o.timeAdded=n.exported.now(),b==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(h,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),o.aborted||this._source.fire(new n.Event("data",{dataType:"source",tile:o,coord:o.tileID}))}_backfillDEM(o){const h=this.getRenderableIds();for(let M=0;M<h.length;M++){const j=h[M];if(o.neighboringTiles&&o.neighboringTiles[j]){const ee=this.getTileByID(j);b(o,ee),b(ee,o)}}function b(M,j){M.needsHillshadePrepare=!0,M.needsTerrainPrepare=!0;let ee=j.tileID.canonical.x-M.tileID.canonical.x;const le=j.tileID.canonical.y-M.tileID.canonical.y,pe=Math.pow(2,M.tileID.canonical.z),Te=j.tileID.key;ee===0&&le===0||Math.abs(le)>1||(Math.abs(ee)>1&&(Math.abs(ee+pe)===1?ee+=pe:Math.abs(ee-pe)===1&&(ee-=pe)),j.dem&&M.dem&&(M.dem.backfillBorder(j.dem,ee,le),M.neighboringTiles&&M.neighboringTiles[Te]&&(M.neighboringTiles[Te].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,h,b,M){for(const j in this._tiles){let ee=this._tiles[j];if(M[j]||!ee.hasData()||ee.tileID.overscaledZ<=h||ee.tileID.overscaledZ>b)continue;let le=ee.tileID;for(;ee&&ee.tileID.overscaledZ>h+1;){const Te=ee.tileID.scaledTo(ee.tileID.overscaledZ-1);ee=this._tiles[Te.key],ee&&ee.hasData()&&(le=Te)}let pe=le;for(;pe.overscaledZ>h;)if(pe=pe.scaledTo(pe.overscaledZ-1),o[pe.key]){M[le.key]=le;break}}}findLoadedParent(o,h){if(o.key in this._loadedParentTiles){const b=this._loadedParentTiles[o.key];return b&&b.tileID.overscaledZ>=h?b:null}for(let b=o.overscaledZ-1;b>=h;b--){const M=o.scaledTo(b),j=this._getLoadedTile(M);if(j)return j}}_getLoadedTile(o){const h=this._tiles[o.key];return h&&h.hasData()?h:this._cache.getByKey(o.wrapped().key)}updateCacheSize(o){const h=Math.ceil(o.width/this._source.tileSize)+1,b=Math.ceil(o.height/this._source.tileSize)+1,M=Math.floor(h*b*5),j=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,M):M;this._cache.setMaxSize(j)}handleWrapJump(o){const h=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,h){const b={};for(const M in this._tiles){const j=this._tiles[M];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+h),b[j.tileID.key]=j}this._tiles=b;for(const M in this._timers)clearTimeout(this._timers[M]),delete this._timers[M];for(const M in this._tiles)this._setTileReloadTimer(M,this._tiles[M])}}update(o,h){if(this.transform=o,this.terrain=h,!this._sourceLoaded||this._paused)return;let b;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?b=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(Te=>new n.OverscaledTileID(Te.canonical.z,Te.wrap,Te.canonical.z,Te.canonical.x,Te.canonical.y)):(b=o.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h}),this._source.hasTile&&(b=b.filter(Te=>this._source.hasTile(Te)))):b=[];const M=o.coveringZoomLevel(this._source),j=Math.max(M-Q.maxOverzooming,this._source.minzoom),ee=Math.max(M+Q.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Te={};for(const Ne of b)if(Ne.canonical.z>this._source.minzoom){const Be=Ne.scaledTo(Ne.canonical.z-1);Te[Be.key]=Be;const qe=Ne.scaledTo(Math.max(this._source.minzoom,Math.min(Ne.canonical.z,5)));Te[qe.key]=qe}b=b.concat(Object.values(Te))}const le=this._updateRetainedTiles(b,M);if(_e(this._source.type)){const Te={},Ne={},Be=Object.keys(le);for(const qe of Be){const tt=le[qe],Qe=this._tiles[qe];if(!Qe||Qe.fadeEndTime&&Qe.fadeEndTime<=n.exported.now())continue;const Je=this.findLoadedParent(tt,j);Je&&(this._addTile(Je.tileID),Te[Je.tileID.key]=Je.tileID),Ne[qe]=tt}this._retainLoadedChildren(Ne,M,ee,le);for(const qe in Te)le[qe]||(this._coveredTiles[qe]=!0,le[qe]=Te[qe]);if(h){const qe={},tt={};for(const Qe of b)this._tiles[Qe.key].hasData()?qe[Qe.key]=Qe:tt[Qe.key]=Qe;for(const Qe in tt){const Je=tt[Qe].children(this._source.maxzoom);this._tiles[Je[0].key]&&this._tiles[Je[1].key]&&this._tiles[Je[2].key]&&this._tiles[Je[3].key]&&(qe[Je[0].key]=le[Je[0].key]=Je[0],qe[Je[1].key]=le[Je[1].key]=Je[1],qe[Je[2].key]=le[Je[2].key]=Je[2],qe[Je[3].key]=le[Je[3].key]=Je[3],delete tt[Qe])}for(const Qe in tt){const Je=this.findLoadedParent(tt[Qe],this._source.minzoom);if(Je){qe[Je.tileID.key]=le[Je.tileID.key]=Je.tileID;for(const pt in qe)qe[pt].isChildOf(Je.tileID)&&delete qe[pt]}}for(const Qe in this._tiles)qe[Qe]||(this._coveredTiles[Qe]=!0)}}for(const Te in le)this._tiles[Te].clearFadeHold();const pe=n.keysDifference(this._tiles,le);for(const Te of pe){const Ne=this._tiles[Te];Ne.hasSymbolBuckets&&!Ne.holdingForFade()?Ne.setHoldDuration(this.map._fadeDuration):Ne.hasSymbolBuckets&&!Ne.symbolFadeFinished()||this._removeTile(Te)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)}_updateRetainedTiles(o,h){const b={},M={},j=Math.max(h-Q.maxOverzooming,this._source.minzoom),ee=Math.max(h+Q.maxUnderzooming,this._source.minzoom),le={};for(const pe of o){const Te=this._addTile(pe);b[pe.key]=pe,Te.hasData()||h<this._source.maxzoom&&(le[pe.key]=pe)}this._retainLoadedChildren(le,h,ee,b);for(const pe of o){let Te=this._tiles[pe.key];if(Te.hasData())continue;if(h+1>this._source.maxzoom){const Be=pe.children(this._source.maxzoom)[0],qe=this.getTile(Be);if(qe&&qe.hasData()){b[Be.key]=Be;continue}}else{const Be=pe.children(this._source.maxzoom);if(b[Be[0].key]&&b[Be[1].key]&&b[Be[2].key]&&b[Be[3].key])continue}let Ne=Te.wasRequested();for(let Be=pe.overscaledZ-1;Be>=j;--Be){const qe=pe.scaledTo(Be);if(M[qe.key]||(M[qe.key]=!0,Te=this.getTile(qe),!Te&&Ne&&(Te=this._addTile(qe)),Te&&(b[qe.key]=qe,Ne=Te.wasRequested(),Te.hasData())))break}}return b}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const h=[];let b,M=this._tiles[o].tileID;for(;M.overscaledZ>0;){if(M.key in this._loadedParentTiles){b=this._loadedParentTiles[M.key];break}h.push(M.key);const j=M.scaledTo(M.overscaledZ-1);if(b=this._getLoadedTile(j),b)break;M=j}for(const j of h)this._loadedParentTiles[j]=b}}_addTile(o){let h=this._tiles[o.key];if(h)return h;h=this._cache.getAndRemove(o),h&&(this._setTileReloadTimer(o.key,h),h.tileID=o,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,h)));const b=h;return h||(h=new xe(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(h,this._tileLoaded.bind(this,h,o.key,h.state))),h.uses++,this._tiles[o.key]=h,b||this._source.fire(new n.Event("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(o,h){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const b=h.getExpiryTimeout();b&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},b))}_removeTile(o){const h=this._tiles[o];h&&(h.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(o);this._cache.reset()}tilesIn(o,h,b){const M=[],j=this.transform;if(!j)return M;const ee=b?j.getCameraQueryGeometry(o):o,le=o.map(Qe=>j.pointCoordinate(Qe,this.terrain)),pe=ee.map(Qe=>j.pointCoordinate(Qe,this.terrain)),Te=this.getIds();let Ne=1/0,Be=1/0,qe=-1/0,tt=-1/0;for(const Qe of pe)Ne=Math.min(Ne,Qe.x),Be=Math.min(Be,Qe.y),qe=Math.max(qe,Qe.x),tt=Math.max(tt,Qe.y);for(let Qe=0;Qe<Te.length;Qe++){const Je=this._tiles[Te[Qe]];if(Je.holdingForFade())continue;const pt=Je.tileID,yt=Math.pow(2,j.zoom-Je.tileID.overscaledZ),_t=h*Je.queryPadding*n.EXTENT/Je.tileSize/yt,at=[pt.getTilePoint(new n.MercatorCoordinate(Ne,Be)),pt.getTilePoint(new n.MercatorCoordinate(qe,tt))];if(at[0].x-_t<n.EXTENT&&at[0].y-_t<n.EXTENT&&at[1].x+_t>=0&&at[1].y+_t>=0){const At=le.map(Nt=>pt.getTilePoint(Nt)),Tt=pe.map(Nt=>pt.getTilePoint(Nt));M.push({tile:Je,tileID:pt,queryGeometry:At,cameraQueryGeometry:Tt,scale:yt})}}return M}getVisibleCoordinates(o){const h=this.getRenderableIds(o).map(b=>this._tiles[b].tileID);for(const b of h)b.posMatrix=this.transform.calculatePosMatrix(b.toUnwrapped());return h}hasTransition(){if(this._source.hasTransition())return!0;if(_e(this._source.type))for(const o in this._tiles){const h=this._tiles[o];if(h.fadeEndTime!==void 0&&h.fadeEndTime>=n.exported.now())return!0}return!1}setFeatureState(o,h,b){this._state.updateState(o=o||"_geojsonTileLayer",h,b)}removeFeatureState(o,h,b){this._state.removeFeatureState(o=o||"_geojsonTileLayer",h,b)}getFeatureState(o,h){return this._state.getState(o=o||"_geojsonTileLayer",h)}setDependencies(o,h,b){const M=this._tiles[o];M&&M.setDependencies(h,b)}reloadTilesForDependencies(o,h){for(const b in this._tiles)this._tiles[b].hasDependency(o,h)&&this._reloadTile(b,"reloading");this._cache.filter(b=>!b.hasDependency(o,h))}}function ae(E,o){const h=Math.abs(2*E.wrap)-+(E.wrap<0),b=Math.abs(2*o.wrap)-+(o.wrap<0);return E.overscaledZ-o.overscaledZ||b-h||o.canonical.y-E.canonical.y||o.canonical.x-E.canonical.x}function _e(E){return E==="raster"||E==="image"||E==="video"}Q.maxOverzooming=10,Q.maxUnderzooming=3;const J="mapboxgl_preloaded_worker_pool";class ne{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<ne.workerCount;)this.workers.push(new Worker(Xc.workerUrl));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[J]}numActive(){return Object.keys(this.active).length}}const ce=Math.floor(n.exported.hardwareConcurrency/2);let ye;function we(){return ye||(ye=new ne),ye}function ze(E,o){const h={};for(const b in E)b!=="ref"&&(h[b]=E[b]);return n.refProperties.forEach(b=>{b in o&&(h[b]=o[b])}),h}function Ce(E){E=E.slice();const o=Object.create(null);for(let h=0;h<E.length;h++)o[E[h].id]=E[h];for(let h=0;h<E.length;h++)"ref"in E[h]&&(E[h]=ze(E[h],o[E[h].ref]));return E}ne.workerCount=Math.max(Math.min(ce,6),1);const Ie={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Fe(E,o,h){h.push({command:Ie.addSource,args:[E,o[E]]})}function Ge(E,o,h){o.push({command:Ie.removeSource,args:[E]}),h[E]=!0}function ke(E,o,h,b){Ge(E,h,b),Fe(E,o,h)}function ge(E,o,h){let b;for(b in E[h])if(Object.prototype.hasOwnProperty.call(E[h],b)&&b!=="data"&&!v(E[h][b],o[h][b]))return!1;for(b in o[h])if(Object.prototype.hasOwnProperty.call(o[h],b)&&b!=="data"&&!v(E[h][b],o[h][b]))return!1;return!0}function fe(E,o,h,b,M,j){let ee;for(ee in o=o||{},E=E||{})Object.prototype.hasOwnProperty.call(E,ee)&&(v(E[ee],o[ee])||h.push({command:j,args:[b,ee,o[ee],M]}));for(ee in o)Object.prototype.hasOwnProperty.call(o,ee)&&!Object.prototype.hasOwnProperty.call(E,ee)&&(v(E[ee],o[ee])||h.push({command:j,args:[b,ee,o[ee],M]}))}function Me(E){return E.id}function De(E,o){return E[o.id]=o,E}class Pe{constructor(o,h){this.reset(o,h)}reset(o,h){this.points=o||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=n.clamp(o,0,1);let h=1,b=this._distances[h];const M=o*this.paddedLength+this.padding;for(;b<M&&h<this._distances.length;)b=this._distances[++h];const j=h-1,ee=this._distances[j],le=b-ee,pe=le>0?(M-ee)/le:0;return this.points[j].mult(1-pe).add(this.points[h].mult(pe))}}function je(E,o){let h=!0;return E==="always"||E!=="never"&&o!=="never"||(h=!1),h}class Xe{constructor(o,h,b){const M=this.boxCells=[],j=this.circleCells=[];this.xCellCount=Math.ceil(o/b),this.yCellCount=Math.ceil(h/b);for(let ee=0;ee<this.xCellCount*this.yCellCount;ee++)M.push([]),j.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=h,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,h,b,M,j){this._forEachCell(h,b,M,j,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(h),this.bboxes.push(b),this.bboxes.push(M),this.bboxes.push(j)}insertCircle(o,h,b,M){this._forEachCell(h-M,b-M,h+M,b+M,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(h),this.circles.push(b),this.circles.push(M)}_insertBoxCell(o,h,b,M,j,ee){this.boxCells[j].push(ee)}_insertCircleCell(o,h,b,M,j,ee){this.circleCells[j].push(ee)}_query(o,h,b,M,j,ee,le){if(b<0||o>this.width||M<0||h>this.height)return[];const pe=[];if(o<=0&&h<=0&&this.width<=b&&this.height<=M){if(j)return[{key:null,x1:o,y1:h,x2:b,y2:M}];for(let Te=0;Te<this.boxKeys.length;Te++)pe.push({key:this.boxKeys[Te],x1:this.bboxes[4*Te],y1:this.bboxes[4*Te+1],x2:this.bboxes[4*Te+2],y2:this.bboxes[4*Te+3]});for(let Te=0;Te<this.circleKeys.length;Te++){const Ne=this.circles[3*Te],Be=this.circles[3*Te+1],qe=this.circles[3*Te+2];pe.push({key:this.circleKeys[Te],x1:Ne-qe,y1:Be-qe,x2:Ne+qe,y2:Be+qe})}}else this._forEachCell(o,h,b,M,this._queryCell,pe,{hitTest:j,overlapMode:ee,seenUids:{box:{},circle:{}}},le);return pe}query(o,h,b,M){return this._query(o,h,b,M,!1,null)}hitTest(o,h,b,M,j,ee){return this._query(o,h,b,M,!0,j,ee).length>0}hitTestCircle(o,h,b,M,j){const ee=o-b,le=o+b,pe=h-b,Te=h+b;if(le<0||ee>this.width||Te<0||pe>this.height)return!1;const Ne=[];return this._forEachCell(ee,pe,le,Te,this._queryCellCircle,Ne,{hitTest:!0,overlapMode:M,circle:{x:o,y:h,radius:b},seenUids:{box:{},circle:{}}},j),Ne.length>0}_queryCell(o,h,b,M,j,ee,le,pe){const{seenUids:Te,hitTest:Ne,overlapMode:Be}=le,qe=this.boxCells[j];if(qe!==null){const Qe=this.bboxes;for(const Je of qe)if(!Te.box[Je]){Te.box[Je]=!0;const pt=4*Je,yt=this.boxKeys[Je];if(o<=Qe[pt+2]&&h<=Qe[pt+3]&&b>=Qe[pt+0]&&M>=Qe[pt+1]&&(!pe||pe(yt))&&(!Ne||!je(Be,yt.overlapMode))&&(ee.push({key:yt,x1:Qe[pt],y1:Qe[pt+1],x2:Qe[pt+2],y2:Qe[pt+3]}),Ne))return!0}}const tt=this.circleCells[j];if(tt!==null){const Qe=this.circles;for(const Je of tt)if(!Te.circle[Je]){Te.circle[Je]=!0;const pt=3*Je,yt=this.circleKeys[Je];if(this._circleAndRectCollide(Qe[pt],Qe[pt+1],Qe[pt+2],o,h,b,M)&&(!pe||pe(yt))&&(!Ne||!je(Be,yt.overlapMode))){const _t=Qe[pt],at=Qe[pt+1],At=Qe[pt+2];if(ee.push({key:yt,x1:_t-At,y1:at-At,x2:_t+At,y2:at+At}),Ne)return!0}}}return!1}_queryCellCircle(o,h,b,M,j,ee,le,pe){const{circle:Te,seenUids:Ne,overlapMode:Be}=le,qe=this.boxCells[j];if(qe!==null){const Qe=this.bboxes;for(const Je of qe)if(!Ne.box[Je]){Ne.box[Je]=!0;const pt=4*Je,yt=this.boxKeys[Je];if(this._circleAndRectCollide(Te.x,Te.y,Te.radius,Qe[pt+0],Qe[pt+1],Qe[pt+2],Qe[pt+3])&&(!pe||pe(yt))&&!je(Be,yt.overlapMode))return ee.push(!0),!0}}const tt=this.circleCells[j];if(tt!==null){const Qe=this.circles;for(const Je of tt)if(!Ne.circle[Je]){Ne.circle[Je]=!0;const pt=3*Je,yt=this.circleKeys[Je];if(this._circlesCollide(Qe[pt],Qe[pt+1],Qe[pt+2],Te.x,Te.y,Te.radius)&&(!pe||pe(yt))&&!je(Be,yt.overlapMode))return ee.push(!0),!0}}}_forEachCell(o,h,b,M,j,ee,le,pe){const Te=this._convertToXCellCoord(o),Ne=this._convertToYCellCoord(h),Be=this._convertToXCellCoord(b),qe=this._convertToYCellCoord(M);for(let tt=Te;tt<=Be;tt++)for(let Qe=Ne;Qe<=qe;Qe++)if(j.call(this,o,h,b,M,this.xCellCount*Qe+tt,ee,le,pe))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,h,b,M,j,ee){const le=M-o,pe=j-h,Te=b+ee;return Te*Te>le*le+pe*pe}_circleAndRectCollide(o,h,b,M,j,ee,le){const pe=(ee-M)/2,Te=Math.abs(o-(M+pe));if(Te>pe+b)return!1;const Ne=(le-j)/2,Be=Math.abs(h-(j+Ne));if(Be>Ne+b)return!1;if(Te<=pe||Be<=Ne)return!0;const qe=Te-pe,tt=Be-Ne;return qe*qe+tt*tt<=b*b}}function et(E,o,h,b,M){const j=n.create();return o?(n.scale(j,j,[1/M,1/M,1]),h||n.rotateZ(j,j,b.angle)):n.multiply(j,b.labelPlaneMatrix,E),j}function nt(E,o,h,b,M){if(o){const j=n.clone(E);return n.scale(j,j,[M,M,1]),h||n.rotateZ(j,j,-b.angle),j}return b.glCoordMatrix}function ht(E,o,h){let b;h?(b=[E.x,E.y,h(E.x,E.y),1],n.transformMat4(b,b,o)):(b=[E.x,E.y,0,1],Zi(b,b,o));const M=b[3];return{point:new n.pointGeometry(b[0]/M,b[1]/M),signedDistanceFromCamera:M}}function gt(E,o){return .5+E/o*.5}function wt(E,o){const h=E[0]/E[3],b=E[1]/E[3];return h>=-o[0]&&h<=o[0]&&b>=-o[1]&&b<=o[1]}function Rt(E,o,h,b,M,j,ee,le,pe,Te){const Ne=b?E.textSizeData:E.iconSizeData,Be=n.evaluateSizeForZoom(Ne,h.transform.zoom),qe=[256/h.width*2+1,256/h.height*2+1],tt=b?E.text.dynamicLayoutVertexArray:E.icon.dynamicLayoutVertexArray;tt.clear();const Qe=E.lineVertexArray,Je=b?E.text.placedSymbolArray:E.icon.placedSymbolArray,pt=h.transform.width/h.transform.height;let yt=!1;for(let _t=0;_t<Je.length;_t++){const at=Je.get(_t);if(at.hidden||at.writingMode===n.WritingMode.vertical&&!yt){cn(at.numGlyphs,tt);continue}let At;if(yt=!1,Te?(At=[at.anchorX,at.anchorY,Te(at.anchorX,at.anchorY),1],n.transformMat4(At,At,o)):(At=[at.anchorX,at.anchorY,0,1],Zi(At,At,o)),!wt(At,qe)){cn(at.numGlyphs,tt);continue}const Tt=gt(h.transform.cameraToCenterDistance,At[3]),Nt=n.evaluateSizeForFeature(Ne,Be,at),Ot=ee?Nt/Tt:Nt*Tt,Ut=new n.pointGeometry(at.anchorX,at.anchorY),Lt=ht(Ut,M,Te).point,ai={},Zt=Ct(at,Ot,!1,le,o,M,j,E.glyphOffsetArray,Qe,tt,Lt,Ut,ai,pt,pe,Te);yt=Zt.useVertical,(Zt.notEnoughRoom||yt||Zt.needsFlipping&&Ct(at,Ot,!0,le,o,M,j,E.glyphOffsetArray,Qe,tt,Lt,Ut,ai,pt,pe,Te).notEnoughRoom)&&cn(at.numGlyphs,tt)}b?E.text.dynamicLayoutVertexBuffer.updateData(tt):E.icon.dynamicLayoutVertexBuffer.updateData(tt)}function ft(E,o,h,b,M,j,ee,le,pe,Te,Ne,Be,qe){const tt=le.glyphStartIndex+le.numGlyphs,Qe=le.lineStartIndex,Je=le.lineStartIndex+le.lineLength,pt=o.getoffsetX(le.glyphStartIndex),yt=o.getoffsetX(tt-1),_t=di(E*pt,h,b,M,j,ee,le.segment,Qe,Je,pe,Te,Ne,Be,qe);if(!_t)return null;const at=di(E*yt,h,b,M,j,ee,le.segment,Qe,Je,pe,Te,Ne,Be,qe);return at?{first:_t,last:at}:null}function St(E,o,h,b){return E===n.WritingMode.horizontal&&Math.abs(h.y-o.y)>Math.abs(h.x-o.x)*b?{useVertical:!0}:(E===n.WritingMode.vertical?o.y<h.y:o.x>h.x)?{needsFlipping:!0}:null}function Ct(E,o,h,b,M,j,ee,le,pe,Te,Ne,Be,qe,tt,Qe,Je){const pt=o/24,yt=E.lineOffsetX*pt,_t=E.lineOffsetY*pt;let at;if(E.numGlyphs>1){const At=E.glyphStartIndex+E.numGlyphs,Tt=E.lineStartIndex,Nt=E.lineStartIndex+E.lineLength,Ot=ft(pt,le,yt,_t,h,Ne,Be,E,pe,j,qe,Qe,Je);if(!Ot)return{notEnoughRoom:!0};const Ut=ht(Ot.first.point,ee,Je).point,Lt=ht(Ot.last.point,ee,Je).point;if(b&&!h){const ai=St(E.writingMode,Ut,Lt,tt);if(ai)return ai}at=[Ot.first];for(let ai=E.glyphStartIndex+1;ai<At-1;ai++)at.push(di(pt*le.getoffsetX(ai),yt,_t,h,Ne,Be,E.segment,Tt,Nt,pe,j,qe,Qe,Je));at.push(Ot.last)}else{if(b&&!h){const Tt=ht(Be,M,Je).point,Nt=E.lineStartIndex+E.segment+1,Ot=new n.pointGeometry(pe.getx(Nt),pe.gety(Nt)),Ut=ht(Ot,M,Je),Lt=Ut.signedDistanceFromCamera>0?Ut.point:si(Be,Ot,Tt,1,M,Je),ai=St(E.writingMode,Tt,Lt,tt);if(ai)return ai}const At=di(pt*le.getoffsetX(E.glyphStartIndex),yt,_t,h,Ne,Be,E.segment,E.lineStartIndex,E.lineStartIndex+E.lineLength,pe,j,qe,Qe,Je);if(!At)return{notEnoughRoom:!0};at=[At]}for(const At of at)n.addDynamicAttributes(Te,At.point,At.angle);return{}}function si(E,o,h,b,M,j){const ee=ht(E.add(E.sub(o)._unit()),M,j).point,le=h.sub(ee);return h.add(le._mult(b/le.mag()))}function di(E,o,h,b,M,j,ee,le,pe,Te,Ne,Be,qe,tt){const Qe=b?E-o:E+o;let Je=Qe>0?1:-1,pt=0;b&&(Je*=-1,pt=Math.PI),Je<0&&(pt+=Math.PI);let yt=Je>0?le+ee:le+ee+1,_t=M,at=M,At=0,Tt=0;const Nt=Math.abs(Qe),Ot=[];for(;At+Tt<=Nt;){if(yt+=Je,yt<le||yt>=pe)return null;if(at=_t,Ot.push(_t),_t=Be[yt],_t===void 0){const li=new n.pointGeometry(Te.getx(yt),Te.gety(yt)),Xi=ht(li,Ne,tt);if(Xi.signedDistanceFromCamera>0)_t=Be[yt]=Xi.point;else{const un=yt-Je;_t=si(At===0?j:new n.pointGeometry(Te.getx(un),Te.gety(un)),li,at,Nt-At+1,Ne,tt)}}At+=Tt,Tt=at.dist(_t)}const Ut=(Nt-At)/Tt,Lt=_t.sub(at),ai=Lt.mult(Ut)._add(at);ai._add(Lt._unit()._perp()._mult(h*Je));const Zt=pt+Math.atan2(_t.y-at.y,_t.x-at.x);return Ot.push(ai),{point:ai,angle:qe?Zt:0,path:Ot}}const Ht=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function cn(E,o){for(let h=0;h<E;h++){const b=o.length;o.resize(b+4),o.float32.set(Ht,3*b)}}function Zi(E,o,h){const b=o[0],M=o[1];return E[0]=h[0]*b+h[4]*M+h[12],E[1]=h[1]*b+h[5]*M+h[13],E[3]=h[3]*b+h[7]*M+h[15],E}const xn=100;class jn{constructor(o,h=new Xe(o.width+200,o.height+200,25),b=new Xe(o.width+200,o.height+200,25)){this.transform=o,this.grid=h,this.ignoredGrid=b,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+xn,this.screenBottomBoundary=o.height+xn,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(o,h,b,M,j,ee){const le=this.projectAndGetPerspectiveRatio(M,o.anchorPointX,o.anchorPointY,ee),pe=b*le.perspectiveRatio,Te=o.x1*pe+le.point.x,Ne=o.y1*pe+le.point.y,Be=o.x2*pe+le.point.x,qe=o.y2*pe+le.point.y;return!this.isInsideGrid(Te,Ne,Be,qe)||h!=="always"&&this.grid.hitTest(Te,Ne,Be,qe,h,j)||le.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[Te,Ne,Be,qe],offscreen:this.isOffscreen(Te,Ne,Be,qe)}}placeCollisionCircles(o,h,b,M,j,ee,le,pe,Te,Ne,Be,qe,tt,Qe){const Je=[],pt=new n.pointGeometry(h.anchorX,h.anchorY),yt=ht(pt,ee,Qe),_t=gt(this.transform.cameraToCenterDistance,yt.signedDistanceFromCamera),at=(Ne?j/_t:j*_t)/n.ONE_EM,At=ht(pt,le,Qe).point,Tt=ft(at,M,h.lineOffsetX*at,h.lineOffsetY*at,!1,At,pt,h,b,le,{},!1,Qe);let Nt=!1,Ot=!1,Ut=!0;if(Tt){const Lt=.5*qe*_t+tt,ai=new n.pointGeometry(-100,-100),Zt=new n.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),li=new Pe,Xi=Tt.first,un=Tt.last;let Ii=[];for(let _n=Xi.path.length-1;_n>=1;_n--)Ii.push(Xi.path[_n]);for(let _n=1;_n<un.path.length;_n++)Ii.push(un.path[_n]);const Bn=2.5*Lt;if(pe){const _n=Ii.map(Cn=>ht(Cn,pe,Qe));Ii=_n.some(Cn=>Cn.signedDistanceFromCamera<=0)?[]:_n.map(Cn=>Cn.point)}let $n=[];if(Ii.length>0){const _n=Ii[0].clone(),Cn=Ii[0].clone();for(let En=1;En<Ii.length;En++)_n.x=Math.min(_n.x,Ii[En].x),_n.y=Math.min(_n.y,Ii[En].y),Cn.x=Math.max(Cn.x,Ii[En].x),Cn.y=Math.max(Cn.y,Ii[En].y);$n=_n.x>=ai.x&&Cn.x<=Zt.x&&_n.y>=ai.y&&Cn.y<=Zt.y?[Ii]:Cn.x<ai.x||_n.x>Zt.x||Cn.y<ai.y||_n.y>Zt.y?[]:n.clipLine([Ii],ai.x,ai.y,Zt.x,Zt.y)}for(const _n of $n){li.reset(_n,.25*Lt);let Cn=0;Cn=li.length<=.5*Lt?1:Math.ceil(li.paddedLength/Bn)+1;for(let En=0;En<Cn;En++){const Js=En/Math.max(Cn-1,1),Ya=li.lerp(Js),Ma=Ya.x+xn,Pa=Ya.y+xn;Je.push(Ma,Pa,Lt,0);const ol=Ma-Lt,ss=Pa-Lt,Ia=Ma+Lt,ll=Pa+Lt;if(Ut=Ut&&this.isOffscreen(ol,ss,Ia,ll),Ot=Ot||this.isInsideGrid(ol,ss,Ia,ll),o!=="always"&&this.grid.hitTestCircle(Ma,Pa,Lt,o,Be)&&(Nt=!0,!Te))return{circles:[],offscreen:!1,collisionDetected:Nt}}}}return{circles:!Te&&Nt||!Ot||_t<this.perspectiveRatioCutoff?[]:Je,offscreen:Ut,collisionDetected:Nt}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let b=1/0,M=1/0,j=-1/0,ee=-1/0;for(const Ne of o){const Be=new n.pointGeometry(Ne.x+xn,Ne.y+xn);b=Math.min(b,Be.x),M=Math.min(M,Be.y),j=Math.max(j,Be.x),ee=Math.max(ee,Be.y),h.push(Be)}const le=this.grid.query(b,M,j,ee).concat(this.ignoredGrid.query(b,M,j,ee)),pe={},Te={};for(const Ne of le){const Be=Ne.key;if(pe[Be.bucketInstanceId]===void 0&&(pe[Be.bucketInstanceId]={}),pe[Be.bucketInstanceId][Be.featureIndex])continue;const qe=[new n.pointGeometry(Ne.x1,Ne.y1),new n.pointGeometry(Ne.x2,Ne.y1),new n.pointGeometry(Ne.x2,Ne.y2),new n.pointGeometry(Ne.x1,Ne.y2)];n.polygonIntersectsPolygon(h,qe)&&(pe[Be.bucketInstanceId][Be.featureIndex]=!0,Te[Be.bucketInstanceId]===void 0&&(Te[Be.bucketInstanceId]=[]),Te[Be.bucketInstanceId].push(Be.featureIndex))}return Te}insertCollisionBox(o,h,b,M,j,ee){(b?this.ignoredGrid:this.grid).insert({bucketInstanceId:M,featureIndex:j,collisionGroupID:ee,overlapMode:h},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,h,b,M,j,ee){const le=b?this.ignoredGrid:this.grid,pe={bucketInstanceId:M,featureIndex:j,collisionGroupID:ee,overlapMode:h};for(let Te=0;Te<o.length;Te+=4)le.insertCircle(pe,o[Te],o[Te+1],o[Te+2])}projectAndGetPerspectiveRatio(o,h,b,M){let j;return M?(j=[h,b,M(h,b),1],n.transformMat4(j,j,o)):(j=[h,b,0,1],Zi(j,j,o)),{point:new n.pointGeometry((j[0]/j[3]+1)/2*this.transform.width+xn,(-j[1]/j[3]+1)/2*this.transform.height+xn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/j[3]*.5}}isOffscreen(o,h,b,M){return b<xn||o>=this.screenRightBoundary||M<xn||h>this.screenBottomBoundary}isInsideGrid(o,h,b,M){return b>=0&&o<this.gridRightBoundary&&M>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const o=n.identity([]);return n.translate(o,o,[-100,-100,0]),o}}function nn(E,o,h){return o*(n.EXTENT/(E.tileSize*Math.pow(2,h-E.tileID.overscaledZ)))}class dt{constructor(o,h,b,M){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?h:-h))):M&&b?1:0,this.placed=b}isHidden(){return this.opacity===0&&!this.placed}}class vt{constructor(o,h,b,M,j){this.text=new dt(o?o.text:null,h,b,j),this.icon=new dt(o?o.icon:null,h,M,j)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Pt{constructor(o,h,b){this.text=o,this.icon=h,this.skipFade=b}}class Ft{constructor(){this.invProjMatrix=n.create(),this.viewportMatrix=n.create(),this.circles=[]}}class qt{constructor(o,h,b,M,j){this.bucketInstanceId=o,this.featureIndex=h,this.sourceLayerIndex=b,this.bucketIndex=M,this.tileID=j}}class vi{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const h=++this.maxGroupID;this.collisionGroups[o]={ID:h,predicate:b=>b.collisionGroupID===h}}return this.collisionGroups[o]}}function Oi(E,o,h,b,M){const{horizontalAlign:j,verticalAlign:ee}=n.getAnchorAlignment(E),le=-(j-.5)*o,pe=-(ee-.5)*h,Te=n.evaluateVariableOffset(E,b);return new n.pointGeometry(le+Te[0]*M,pe+Te[1]*M)}function hi(E,o,h,b,M,j){const{x1:ee,x2:le,y1:pe,y2:Te,anchorPointX:Ne,anchorPointY:Be}=E,qe=new n.pointGeometry(o,h);return b&&qe._rotate(M?j:-j),{x1:ee+qe.x,y1:pe+qe.y,x2:le+qe.x,y2:Te+qe.y,anchorPointX:Ne,anchorPointY:Be}}class He{constructor(o,h,b,M,j){this.transform=o.clone(),this.terrain=h,this.collisionIndex=new jn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=b,this.retainedQueryData={},this.collisionGroups=new vi(M),this.collisionCircleArrays={},this.prevPlacement=j,j&&(j.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,h,b,M){const j=b.getBucket(h),ee=b.latestFeatureIndex;if(!j||!ee||h.id!==j.layerIds[0])return;const le=b.collisionBoxArray,pe=j.layers[0].layout,Te=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),Ne=b.tileSize/n.EXTENT,Be=this.transform.calculatePosMatrix(b.tileID.toUnwrapped()),qe=pe.get("text-pitch-alignment")==="map",tt=pe.get("text-rotation-alignment")==="map",Qe=nn(b,1,this.transform.zoom),Je=et(Be,qe,tt,this.transform,Qe);let pt=null;if(qe){const _t=nt(Be,qe,tt,this.transform,Qe);pt=n.multiply([],this.transform.labelPlaneMatrix,_t)}this.retainedQueryData[j.bucketInstanceId]=new qt(j.bucketInstanceId,ee,j.sourceLayerIndex,j.index,b.tileID);const yt={bucket:j,layout:pe,posMatrix:Be,textLabelPlaneMatrix:Je,labelToScreenMatrix:pt,scale:Te,textPixelRatio:Ne,holdingForFade:b.holdingForFade(),collisionBoxArray:le,partiallyEvaluatedTextSize:n.evaluateSizeForZoom(j.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(j.sourceID)};if(M)for(const _t of j.sortKeyRanges){const{sortKey:at,symbolInstanceStart:At,symbolInstanceEnd:Tt}=_t;o.push({sortKey:at,symbolInstanceStart:At,symbolInstanceEnd:Tt,parameters:yt})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:j.symbolInstances.length,parameters:yt})}attemptAnchorPlacement(o,h,b,M,j,ee,le,pe,Te,Ne,Be,qe,tt,Qe,Je,pt){const yt=[qe.textOffset0,qe.textOffset1],_t=Oi(o,b,M,yt,j),at=this.collisionIndex.placeCollisionBox(hi(h,_t.x,_t.y,ee,le,this.transform.angle),Be,pe,Te,Ne.predicate,pt);if((!Je||this.collisionIndex.placeCollisionBox(hi(Je,_t.x,_t.y,ee,le,this.transform.angle),Be,pe,Te,Ne.predicate,pt).box.length!==0)&&at.box.length>0){let At;if(this.prevPlacement&&this.prevPlacement.variableOffsets[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID].text&&(At=this.prevPlacement.variableOffsets[qe.crossTileID].anchor),qe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[qe.crossTileID]={textOffset:yt,width:b,height:M,anchor:o,textBoxScale:j,prevAnchor:At},this.markUsedJustification(tt,o,qe,Qe),tt.allowVerticalPlacement&&(this.markUsedOrientation(tt,Qe,qe),this.placedOrientations[qe.crossTileID]=Qe),{shift:_t,placedGlyphBoxes:at}}}placeLayerBucketPart(o,h,b){const{bucket:M,layout:j,posMatrix:ee,textLabelPlaneMatrix:le,labelToScreenMatrix:pe,textPixelRatio:Te,holdingForFade:Ne,collisionBoxArray:Be,partiallyEvaluatedTextSize:qe,collisionGroup:tt}=o.parameters,Qe=j.get("text-optional"),Je=j.get("icon-optional"),pt=n.getOverlapMode(j,"text-overlap","text-allow-overlap"),yt=pt==="always",_t=n.getOverlapMode(j,"icon-overlap","icon-allow-overlap"),at=_t==="always",At=j.get("text-rotation-alignment")==="map",Tt=j.get("text-pitch-alignment")==="map",Nt=j.get("icon-text-fit")!=="none",Ot=j.get("symbol-z-order")==="viewport-y",Ut=yt&&(at||!M.hasIconData()||Je),Lt=at&&(yt||!M.hasTextData()||Qe);!M.collisionArrays&&Be&&M.deserializeCollisionBoxes(Be);const ai=(Zt,li)=>{if(h[Zt.crossTileID])return;if(Ne)return void(this.placements[Zt.crossTileID]=new Pt(!1,!1,!1));let Xi=!1,un=!1,Ii=!0,Bn=null,$n={box:null,offscreen:null},_n={box:null,offscreen:null},Cn=null,En=null,Js=null,Ya=0,Ma=0,Pa=0;li.textFeatureIndex?Ya=li.textFeatureIndex:Zt.useRuntimeCollisionCircles&&(Ya=Zt.featureIndex),li.verticalTextFeatureIndex&&(Ma=li.verticalTextFeatureIndex);const ol=this.retainedQueryData[M.bucketInstanceId].tileID,ss=this.terrain?(kn,nr)=>this.terrain.getElevation(ol,kn,nr):null;for(const kn of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const nr=li[kn];nr&&(nr.elevation=ss?ss(nr.anchorPointX,nr.anchorPointY):0)}const Ia=li.textBox;if(Ia){const kn=Mn=>{let Nr=n.WritingMode.horizontal;if(M.allowVerticalPlacement&&!Mn&&this.prevPlacement){const $s=this.prevPlacement.placedOrientations[Zt.crossTileID];$s&&(this.placedOrientations[Zt.crossTileID]=$s,Nr=$s,this.markUsedOrientation(M,Nr,Zt))}return Nr},nr=(Mn,Nr)=>{if(M.allowVerticalPlacement&&Zt.numVerticalGlyphVertices>0&&li.verticalTextBox){for(const $s of M.writingModes)if($s===n.WritingMode.vertical?($n=Nr(),_n=$n):$n=Mn(),$n&&$n.box&&$n.box.length)break}else $n=Mn()};if(j.get("text-variable-anchor")){let Mn=j.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Zt.crossTileID]){const lr=this.prevPlacement.variableOffsets[Zt.crossTileID];Mn.indexOf(lr.anchor)>0&&(Mn=Mn.filter(ba=>ba!==lr.anchor),Mn.unshift(lr.anchor))}const Nr=(lr,ba,Ul)=>{const Vl=lr.x2-lr.x1,fd=lr.y2-lr.y1,Jh=Zt.textBoxScale,md=Nt&&_t==="never"?ba:null;let Da={box:[],offscreen:!1};const gd=pt!=="never"?2*Mn.length:Mn.length;for(let Kc=0;Kc<gd;++Kc){const yd=this.attemptAnchorPlacement(Mn[Kc%Mn.length],lr,Vl,fd,Jh,At,Tt,Te,ee,tt,Kc>=Mn.length?pt:"never",Zt,M,Ul,md,ss);if(yd&&(Da=yd.placedGlyphBoxes,Da&&Da.box&&Da.box.length)){Xi=!0,Bn=yd.shift;break}}return Da};nr(()=>Nr(Ia,li.iconBox,n.WritingMode.horizontal),()=>{const lr=li.verticalTextBox;return M.allowVerticalPlacement&&!($n&&$n.box&&$n.box.length)&&Zt.numVerticalGlyphVertices>0&&lr?Nr(lr,li.verticalIconBox,n.WritingMode.vertical):{box:null,offscreen:null}}),$n&&(Xi=$n.box,Ii=$n.offscreen);const $s=kn($n&&$n.box);if(!Xi&&this.prevPlacement){const lr=this.prevPlacement.variableOffsets[Zt.crossTileID];lr&&(this.variableOffsets[Zt.crossTileID]=lr,this.markUsedJustification(M,lr.anchor,Zt,$s))}}else{const Mn=(Nr,$s)=>{const lr=this.collisionIndex.placeCollisionBox(Nr,pt,Te,ee,tt.predicate,ss);return lr&&lr.box&&lr.box.length&&(this.markUsedOrientation(M,$s,Zt),this.placedOrientations[Zt.crossTileID]=$s),lr};nr(()=>Mn(Ia,n.WritingMode.horizontal),()=>{const Nr=li.verticalTextBox;return M.allowVerticalPlacement&&Zt.numVerticalGlyphVertices>0&&Nr?Mn(Nr,n.WritingMode.vertical):{box:null,offscreen:null}}),kn($n&&$n.box&&$n.box.length)}}if(Cn=$n,Xi=Cn&&Cn.box&&Cn.box.length>0,Ii=Cn&&Cn.offscreen,Zt.useRuntimeCollisionCircles){const kn=M.text.placedSymbolArray.get(Zt.centerJustifiedTextSymbolIndex),nr=n.evaluateSizeForFeature(M.textSizeData,qe,kn),Mn=j.get("text-padding");En=this.collisionIndex.placeCollisionCircles(pt,kn,M.lineVertexArray,M.glyphOffsetArray,nr,ee,le,pe,b,Tt,tt.predicate,Zt.collisionCircleDiameter,Mn,ss),En.circles.length&&En.collisionDetected&&!b&&n.warnOnce("Collisions detected, but collision boxes are not shown"),Xi=yt||En.circles.length>0&&!En.collisionDetected,Ii=Ii&&En.offscreen}if(li.iconFeatureIndex&&(Pa=li.iconFeatureIndex),li.iconBox){const kn=nr=>{const Mn=Nt&&Bn?hi(nr,Bn.x,Bn.y,At,Tt,this.transform.angle):nr;return this.collisionIndex.placeCollisionBox(Mn,_t,Te,ee,tt.predicate,ss)};_n&&_n.box&&_n.box.length&&li.verticalIconBox?(Js=kn(li.verticalIconBox),un=Js.box.length>0):(Js=kn(li.iconBox),un=Js.box.length>0),Ii=Ii&&Js.offscreen}const ll=Qe||Zt.numHorizontalGlyphVertices===0&&Zt.numVerticalGlyphVertices===0,pd=Je||Zt.numIconVertices===0;if(ll||pd?pd?ll||(un=un&&Xi):Xi=un&&Xi:un=Xi=un&&Xi,Xi&&Cn&&Cn.box&&this.collisionIndex.insertCollisionBox(Cn.box,pt,j.get("text-ignore-placement"),M.bucketInstanceId,_n&&_n.box&&Ma?Ma:Ya,tt.ID),un&&Js&&this.collisionIndex.insertCollisionBox(Js.box,_t,j.get("icon-ignore-placement"),M.bucketInstanceId,Pa,tt.ID),En&&(Xi&&this.collisionIndex.insertCollisionCircles(En.circles,pt,j.get("text-ignore-placement"),M.bucketInstanceId,Ya,tt.ID),b)){const kn=M.bucketInstanceId;let nr=this.collisionCircleArrays[kn];nr===void 0&&(nr=this.collisionCircleArrays[kn]=new Ft);for(let Mn=0;Mn<En.circles.length;Mn+=4)nr.circles.push(En.circles[Mn+0]),nr.circles.push(En.circles[Mn+1]),nr.circles.push(En.circles[Mn+2]),nr.circles.push(En.collisionDetected?1:0)}if(Zt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(M.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Zt.crossTileID]=new Pt(Xi||Ut,un||Lt,Ii||M.justReloaded),h[Zt.crossTileID]=!0};if(Ot){if(o.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Zt=M.getSortedSymbolIndexes(this.transform.angle);for(let li=Zt.length-1;li>=0;--li){const Xi=Zt[li];ai(M.symbolInstances.get(Xi),M.collisionArrays[Xi])}}else for(let Zt=o.symbolInstanceStart;Zt<o.symbolInstanceEnd;Zt++)ai(M.symbolInstances.get(Zt),M.collisionArrays[Zt]);if(b&&M.bucketInstanceId in this.collisionCircleArrays){const Zt=this.collisionCircleArrays[M.bucketInstanceId];n.invert(Zt.invProjMatrix,ee),Zt.viewportMatrix=this.collisionIndex.getViewportMatrix()}M.justReloaded=!1}markUsedJustification(o,h,b,M){let j;j=M===n.WritingMode.vertical?b.verticalPlacedTextSymbolIndex:{left:b.leftJustifiedTextSymbolIndex,center:b.centerJustifiedTextSymbolIndex,right:b.rightJustifiedTextSymbolIndex}[n.getAnchorJustification(h)];const ee=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex,b.verticalPlacedTextSymbolIndex];for(const le of ee)le>=0&&(o.text.placedSymbolArray.get(le).crossTileID=j>=0&&le!==j?0:b.crossTileID)}markUsedOrientation(o,h,b){const M=h===n.WritingMode.horizontal||h===n.WritingMode.horizontalOnly?h:0,j=h===n.WritingMode.vertical?h:0,ee=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex];for(const le of ee)o.text.placedSymbolArray.get(le).placedOrientation=M;b.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(b.verticalPlacedTextSymbolIndex).placedOrientation=j)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let b=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const M=h?h.symbolFadeChange(o):1,j=h?h.opacities:{},ee=h?h.variableOffsets:{},le=h?h.placedOrientations:{};for(const pe in this.placements){const Te=this.placements[pe],Ne=j[pe];Ne?(this.opacities[pe]=new vt(Ne,M,Te.text,Te.icon),b=b||Te.text!==Ne.text.placed||Te.icon!==Ne.icon.placed):(this.opacities[pe]=new vt(null,M,Te.text,Te.icon,Te.skipFade),b=b||Te.text||Te.icon)}for(const pe in j){const Te=j[pe];if(!this.opacities[pe]){const Ne=new vt(Te,M,!1,!1);Ne.isHidden()||(this.opacities[pe]=Ne,b=b||Te.text.placed||Te.icon.placed)}}for(const pe in ee)this.variableOffsets[pe]||!this.opacities[pe]||this.opacities[pe].isHidden()||(this.variableOffsets[pe]=ee[pe]);for(const pe in le)this.placedOrientations[pe]||!this.opacities[pe]||this.opacities[pe].isHidden()||(this.placedOrientations[pe]=le[pe]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");b?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:o)}updateLayerOpacities(o,h){const b={};for(const M of h){const j=M.getBucket(o);j&&M.latestFeatureIndex&&o.id===j.layerIds[0]&&this.updateBucketOpacities(j,b,M.collisionBoxArray)}}updateBucketOpacities(o,h,b){o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const M=o.layers[0].layout,j=new vt(null,0,!1,!1,!0),ee=M.get("text-allow-overlap"),le=M.get("icon-allow-overlap"),pe=M.get("text-variable-anchor"),Te=M.get("text-rotation-alignment")==="map",Ne=M.get("text-pitch-alignment")==="map",Be=M.get("icon-text-fit")!=="none",qe=new vt(null,0,ee&&(le||!o.hasIconData()||M.get("icon-optional")),le&&(ee||!o.hasTextData()||M.get("text-optional")),!0);!o.collisionArrays&&b&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(b);const tt=(Qe,Je,pt)=>{for(let yt=0;yt<Je/4;yt++)Qe.opacityVertexArray.emplaceBack(pt)};for(let Qe=0;Qe<o.symbolInstances.length;Qe++){const Je=o.symbolInstances.get(Qe),{numHorizontalGlyphVertices:pt,numVerticalGlyphVertices:yt,crossTileID:_t}=Je;let at=this.opacities[_t];h[_t]?at=j:at||(at=qe,this.opacities[_t]=at),h[_t]=!0;const At=Je.numIconVertices>0,Tt=this.placedOrientations[Je.crossTileID],Nt=Tt===n.WritingMode.vertical,Ot=Tt===n.WritingMode.horizontal||Tt===n.WritingMode.horizontalOnly;if(pt>0||yt>0){const Ut=mt(at.text);tt(o.text,pt,Nt?kt:Ut),tt(o.text,yt,Ot?kt:Ut);const Lt=at.text.isHidden();[Je.rightJustifiedTextSymbolIndex,Je.centerJustifiedTextSymbolIndex,Je.leftJustifiedTextSymbolIndex].forEach(li=>{li>=0&&(o.text.placedSymbolArray.get(li).hidden=Lt||Nt?1:0)}),Je.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(Je.verticalPlacedTextSymbolIndex).hidden=Lt||Ot?1:0);const ai=this.variableOffsets[Je.crossTileID];ai&&this.markUsedJustification(o,ai.anchor,Je,Tt);const Zt=this.placedOrientations[Je.crossTileID];Zt&&(this.markUsedJustification(o,"left",Je,Zt),this.markUsedOrientation(o,Zt,Je))}if(At){const Ut=mt(at.icon),Lt=!(Be&&Je.verticalPlacedIconSymbolIndex&&Nt);Je.placedIconSymbolIndex>=0&&(tt(o.icon,Je.numIconVertices,Lt?Ut:kt),o.icon.placedSymbolArray.get(Je.placedIconSymbolIndex).hidden=at.icon.isHidden()),Je.verticalPlacedIconSymbolIndex>=0&&(tt(o.icon,Je.numVerticalIconVertices,Lt?kt:Ut),o.icon.placedSymbolArray.get(Je.verticalPlacedIconSymbolIndex).hidden=at.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const Ut=o.collisionArrays[Qe];if(Ut){let Lt=new n.pointGeometry(0,0);if(Ut.textBox||Ut.verticalTextBox){let Zt=!0;if(pe){const li=this.variableOffsets[_t];li?(Lt=Oi(li.anchor,li.width,li.height,li.textOffset,li.textBoxScale),Te&&Lt._rotate(Ne?this.transform.angle:-this.transform.angle)):Zt=!1}Ut.textBox&&ve(o.textCollisionBox.collisionVertexArray,at.text.placed,!Zt||Nt,Lt.x,Lt.y),Ut.verticalTextBox&&ve(o.textCollisionBox.collisionVertexArray,at.text.placed,!Zt||Ot,Lt.x,Lt.y)}const ai=!!(!Ot&&Ut.verticalIconBox);Ut.iconBox&&ve(o.iconCollisionBox.collisionVertexArray,at.icon.placed,ai,Be?Lt.x:0,Be?Lt.y:0),Ut.verticalIconBox&&ve(o.iconCollisionBox.collisionVertexArray,at.icon.placed,!ai,Be?Lt.x:0,Be?Lt.y:0)}}}if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.text.opacityVertexArray.length!==o.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${o.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${o.text.layoutVertexArray.length}) / 4`);if(o.icon.opacityVertexArray.length!==o.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${o.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${o.icon.layoutVertexArray.length}) / 4`);if(o.bucketInstanceId in this.collisionCircleArrays){const Qe=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=Qe.invProjMatrix,o.placementViewportMatrix=Qe.viewportMatrix,o.collisionCircleArray=Qe.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,h){const b=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*b>o}setStale(){this.stale=!0}}function ve(E,o,h,b,M){E.emplaceBack(o?1:0,h?1:0,b||0,M||0),E.emplaceBack(o?1:0,h?1:0,b||0,M||0),E.emplaceBack(o?1:0,h?1:0,b||0,M||0),E.emplaceBack(o?1:0,h?1:0,b||0,M||0)}const Le=Math.pow(2,25),$e=Math.pow(2,24),Ke=Math.pow(2,17),st=Math.pow(2,16),ct=Math.pow(2,9),ot=Math.pow(2,8),rt=Math.pow(2,1);function mt(E){if(E.opacity===0&&!E.placed)return 0;if(E.opacity===1&&E.placed)return 4294967295;const o=E.placed?1:0,h=Math.floor(127*E.opacity);return h*Le+o*$e+h*Ke+o*st+h*ct+o*ot+h*rt+o}const kt=0;class zt{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&!o.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,h,b,M,j){const ee=this._bucketParts;for(;this._currentTileIndex<o.length;)if(h.getBucketParts(ee,M,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,j())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ee.sort((le,pe)=>le.sortKey-pe.sortKey));this._currentPartIndex<ee.length;)if(h.placeLayerBucketPart(ee[this._currentPartIndex],this._seenCrossTileIDs,b),this._currentPartIndex++,j())return!0;return!1}}class Dt{constructor(o,h,b,M,j,ee,le,pe){this.placement=new He(o,h,ee,le,pe),this._currentPlacementIndex=b.length-1,this._forceFullPlacement=M,this._showCollisionBoxes=j,this._done=!1}isDone(){return this._done}continuePlacement(o,h,b){const M=n.exported.now(),j=()=>{const ee=n.exported.now()-M;return!this._forceFullPlacement&&ee>2};for(;this._currentPlacementIndex>=0;){const ee=h[o[this._currentPlacementIndex]],le=this.placement.collisionIndex.transform.zoom;if(ee.type==="symbol"&&(!ee.minzoom||ee.minzoom<=le)&&(!ee.maxzoom||ee.maxzoom>le)){if(this._inProgressLayer||(this._inProgressLayer=new zt(ee)),this._inProgressLayer.continuePlacement(b[ee.source],this.placement,this._showCollisionBoxes,ee,j))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const oi=512/n.EXTENT/2;class Kt{constructor(o,h,b){this.tileID=o,this.indexedSymbolInstances={},this.bucketInstanceId=b;for(let M=0;M<h.length;M++){const j=h.get(M),ee=j.key;this.indexedSymbolInstances[ee]||(this.indexedSymbolInstances[ee]=[]),this.indexedSymbolInstances[ee].push({crossTileID:j.crossTileID,coord:this.getScaledCoordinates(j,o)})}}getScaledCoordinates(o,h){const b=oi/Math.pow(2,h.canonical.z-this.tileID.canonical.z);return{x:Math.floor((h.canonical.x*n.EXTENT+o.anchorX)*b),y:Math.floor((h.canonical.y*n.EXTENT+o.anchorY)*b)}}findMatches(o,h,b){const M=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let j=0;j<o.length;j++){const ee=o.get(j);if(ee.crossTileID)continue;const le=this.indexedSymbolInstances[ee.key];if(!le)continue;const pe=this.getScaledCoordinates(ee,h);for(const Te of le)if(Math.abs(Te.coord.x-pe.x)<=M&&Math.abs(Te.coord.y-pe.y)<=M&&!b[Te.crossTileID]){b[Te.crossTileID]=!0,ee.crossTileID=Te.crossTileID;break}}}}class pi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class bi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const h=Math.round((o-this.lng)/360);if(h!==0)for(const b in this.indexes){const M=this.indexes[b],j={};for(const ee in M){const le=M[ee];le.tileID=le.tileID.unwrapTo(le.tileID.wrap+h),j[le.tileID.key]=le}this.indexes[b]=j}this.lng=o}addBucket(o,h,b){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let j=0;j<h.symbolInstances.length;j++)h.symbolInstances.get(j).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});const M=this.usedCrossTileIDs[o.overscaledZ];for(const j in this.indexes){const ee=this.indexes[j];if(Number(j)>o.overscaledZ)for(const le in ee){const pe=ee[le];pe.tileID.isChildOf(o)&&pe.findMatches(h.symbolInstances,o,M)}else{const le=ee[o.scaledTo(Number(j)).key];le&&le.findMatches(h.symbolInstances,o,M)}}for(let j=0;j<h.symbolInstances.length;j++){const ee=h.symbolInstances.get(j);ee.crossTileID||(ee.crossTileID=b.generate(),M[ee.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new Kt(o,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(o,h){for(const b in h.indexedSymbolInstances)for(const M of h.indexedSymbolInstances[b])delete this.usedCrossTileIDs[o][M.crossTileID]}removeStaleBuckets(o){let h=!1;for(const b in this.indexes){const M=this.indexes[b];for(const j in M)o[M[j].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,M[j]),delete M[j],h=!0)}return h}}class Bi{constructor(){this.layerIndexes={},this.crossTileIDs=new pi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,h,b){let M=this.layerIndexes[o.id];M===void 0&&(M=this.layerIndexes[o.id]=new bi);let j=!1;const ee={};M.handleWrapJump(b);for(const le of h){const pe=le.getBucket(o);pe&&o.id===pe.layerIds[0]&&(pe.bucketInstanceId||(pe.bucketInstanceId=++this.maxBucketInstanceId),M.addBucket(le.tileID,pe,this.crossTileIDs)&&(j=!0),ee[pe.bucketInstanceId]=!0)}return M.removeStaleBuckets(ee)&&(j=!0),j}pruneUnusedLayers(o){const h={};o.forEach(b=>{h[b]=!0});for(const b in this.layerIndexes)h[b]||delete this.layerIndexes[b]}}var _i=n.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Pi extends n.Evented{constructor(o){super(),this.sourceCache=o,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=o._cache.max,o.usedForTerrain=!0,o.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const o in this._tiles){const h=this._tiles[o];h.textures.forEach(b=>b.destroy()),h.textures=[]}}update(o,h){this.sourceCache.update(o,h),this._renderableTilesKeys=[];for(const b of o.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h}))this._renderableTilesKeys.push(b.key),this._tiles[b.key]||(b.posMatrix=new Float64Array(16),n.ortho(b.posMatrix,0,n.EXTENT,0,n.EXTENT,0,1),this._tiles[b.key]=new xe(b,this.tileSize))}removeOutdated(o){const h={};this.renderHistory=this.renderHistory.filter((b,M)=>this.renderHistory.indexOf(b)===M).slice(0,this.renderHistorySize);for(const b of this._renderableTilesKeys)h[b]=!0;for(const b of this.renderHistory)h[b]=!0;for(const b in this._tiles)h[b]||(this._tiles[b].clearTextures(o),delete this._tiles[b])}getRenderableTiles(){return this._renderableTilesKeys.map(o=>this.getTileByID(o))}getTileByID(o){return this._tiles[o]}getTerrainCoords(o){const h={};for(const b of this._renderableTilesKeys){const M=this._tiles[b].tileID;if(M.canonical.equals(o.canonical)){const j=o.clone();j.posMatrix=new Float64Array(16),n.ortho(j.posMatrix,0,n.EXTENT,0,n.EXTENT,0,1),h[b]=j}else if(M.canonical.isChildOf(o.canonical)){const j=o.clone();j.posMatrix=new Float64Array(16);const ee=M.canonical.z-o.canonical.z,le=M.canonical.x-(M.canonical.x>>ee<<ee),pe=M.canonical.y-(M.canonical.y>>ee<<ee),Te=n.EXTENT>>ee;n.ortho(j.posMatrix,0,Te,0,Te,0,1),n.translate(j.posMatrix,j.posMatrix,[-le*Te,-pe*Te,0]),h[b]=j}else if(o.canonical.isChildOf(M.canonical)){const j=o.clone();j.posMatrix=new Float64Array(16);const ee=o.canonical.z-M.canonical.z,le=o.canonical.x-(o.canonical.x>>ee<<ee),pe=o.canonical.y-(o.canonical.y>>ee<<ee),Te=n.EXTENT>>ee;n.ortho(j.posMatrix,0,n.EXTENT,0,n.EXTENT,0,1),n.translate(j.posMatrix,j.posMatrix,[le*Te,pe*Te,0]),n.scale(j.posMatrix,j.posMatrix,[1/2**ee,1/2**ee,0]),h[b]=j}}return h}getSourceTile(o,h){const b=this.sourceCache._source;let M=o.overscaledZ-this.deltaZoom;if(M>b.maxzoom&&(M=b.maxzoom),M<b.minzoom)return null;this._sourceTileCache[o.key]||(this._sourceTileCache[o.key]=o.scaledTo(M).key);let j=this.sourceCache.getTileByID(this._sourceTileCache[o.key]);if((!j||!j.dem)&&h)for(;M>=b.minzoom&&(!j||!j.dem);)j=this.sourceCache.getTileByID(o.scaledTo(M--).key);return j}tilesAfterTime(o=Date.now()){return Object.values(this._tiles).filter(h=>h.timeLoaded>=o)}}class $i{constructor(o,h,b){this.style=o,this.sourceCache=new Pi(h),this.options=b,this.exaggeration=typeof b.exaggeration=="number"?b.exaggeration:1,this.elevationOffset=typeof b.elevationOffset=="number"?b.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(o,h,b,M=n.EXTENT){if(!(h>=0&&h<M&&b>=0&&b<M))return this.elevationOffset;let j=0;const ee=this.getTerrainData(o);if(ee.tile&&ee.tile.dem){const le=n.transformMat4$1([],[h/M*n.EXTENT,b/M*n.EXTENT],ee.u_terrain_matrix),pe=[le[0]*ee.tile.dem.dim,le[1]*ee.tile.dem.dim],Te=[Math.floor(pe[0]),Math.floor(pe[1])],Ne=ee.tile.dem.get(Te[0],Te[1]),Be=ee.tile.dem.get(Te[0],Te[1]+1),qe=ee.tile.dem.get(Te[0]+1,Te[1]),tt=ee.tile.dem.get(Te[0]+1,Te[1]+1);j=n.number(n.number(Ne,Be,pe[0]-Te[0]),n.number(qe,tt,pe[0]-Te[0]),pe[1]-Te[1])}return j}rememberForRerender(o,h){for(const b in this.sourceCache._tiles){const M=this.sourceCache._tiles[b];(M.tileID.equals(h)||M.tileID.isChildOf(h))&&(o===this.sourceCache.sourceCache.id&&(M.timeLoaded=Date.now()),this._rerender[o]=this._rerender[o]||{},this._rerender[o][M.tileID.key]=!0)}}needsRerender(o,h){return this._rerender[o]&&this._rerender[o][h.key]}clearRerenderCache(){this._rerender={}}getElevation(o,h,b,M=n.EXTENT){return(this.getDEMElevation(o,h,b,M)+this.elevationOffset)*this.exaggeration}getTerrainData(o){if(!this._emptyDemTexture){const M=this.style.map.painter.context,j=new n.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new w(M,j,M.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new w(M,new n.RGBAImage({width:1,height:1}),M.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=n.identity([])}const h=this.sourceCache.getSourceTile(o,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){const M=this.style.map.painter.context;h.demTexture=this.style.map.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new w(M,h.dem.getPixels(),M.gl.RGBA,{premultiply:!1}),h.demTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}const b=h&&h+h.tileID.key+o.key;if(b&&!this._demMatrixCache[b]){const M=this.sourceCache.sourceCache._source.maxzoom;let j=o.canonical.z-h.tileID.canonical.z;o.overscaledZ>o.canonical.z&&(o.canonical.z>=M?j=o.canonical.z-M:n.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const ee=o.canonical.x-(o.canonical.x>>j<<j),le=o.canonical.y-(o.canonical.y>>j<<j),pe=n.fromScaling(new Float64Array(16),[1/(n.EXTENT<<j),1/(n.EXTENT<<j),0]);n.translate(pe,pe,[ee*n.EXTENT,le*n.EXTENT,0]),this._demMatrixCache[o.key]={matrix:pe,coord:o}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:b?this._demMatrixCache[o.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getRTTFramebuffer(){const o=this.style.map.painter;if(!this._rttFramebuffer){const h=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=o.context.createFramebuffer(h,h,!0),this._rttFramebuffer.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,h,h))}return this._rttFramebuffer}getFramebuffer(o){const h=this.style.map.painter,b=h.width/devicePixelRatio,M=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===b&&this._fbo.height===M||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new w(h.context,{width:b,height:M,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new w(h.context,{width:b,height:M,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(b,M,!0),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,b,M))),this._fbo.colorAttachment.set(o==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const o=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let j=0,ee=0;j<this._coordsTextureSize;j++)for(let le=0;le<this._coordsTextureSize;le++,ee+=4)h[ee+0]=255&le,h[ee+1]=255&j,h[ee+2]=le>>8<<4|j>>8,h[ee+3]=0;const b=new n.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),M=new w(o,b,o.gl.RGBA,{premultiply:!1});return M.bind(o.gl.NEAREST,o.gl.CLAMP_TO_EDGE),this._coordsTexture=M,M}pointCoordinate(o){const h=new Uint8Array(4),b=this.style.map.painter,M=b.context,j=M.gl;M.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),j.readPixels(o.x,b.height/devicePixelRatio-o.y-1,1,1,j.RGBA,j.UNSIGNED_BYTE,h),M.bindFramebuffer.set(null);const ee=h[0]+(h[2]>>4<<8),le=h[1]+((15&h[2])<<8),pe=this.coordsIndex[255-h[3]],Te=pe&&this.sourceCache.getTileByID(pe);if(!Te)return null;const Ne=this._coordsTextureSize,Be=(1<<Te.tileID.canonical.z)*Ne;return new n.MercatorCoordinate((Te.tileID.canonical.x*Ne+ee)/Be,(Te.tileID.canonical.y*Ne+le)/Be,this.getElevation(Te.tileID,ee,le,Ne))}getTerrainMesh(){if(this._mesh)return this._mesh;const o=this.style.map.painter.context,h=new n.PosArray,b=new n.TriangleIndexArray,M=this.meshSize,j=n.EXTENT/M,ee=M*M;for(let le=0;le<=M;le++)for(let pe=0;pe<=M;pe++)h.emplaceBack(pe*j,le*j);for(let le=0;le<ee;le+=M+1)for(let pe=0;pe<M;pe++)b.emplaceBack(pe+le,M+pe+le+1,M+pe+le+2),b.emplaceBack(pe+le,M+pe+le+2,pe+le+1);return this._mesh={indexBuffer:o.createIndexBuffer(b),vertexBuffer:o.createVertexBuffer(h,_i.members),segments:n.SegmentVector.simpleSegment(0,0,h.length,b.length)},this._mesh}getMinMaxElevation(o){const h=this.getTerrainData(o).tile,b={minElevation:null,maxElevation:null};return h&&h.dem&&(b.minElevation=(h.dem.min+this.elevationOffset)*this.exaggeration,b.maxElevation=(h.dem.max+this.elevationOffset)*this.exaggeration),b}}const ji=(E,o)=>n.emitValidationErrors(E,o&&o.filter(h=>h.identifier!=="source.canvas")),pn=n.pick(Ie,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Hn=n.pick(Ie,["setCenter","setZoom","setBearing","setPitch"]),xr=function(){const E={},o=n.spec.$version;for(const h in n.spec.$root){const b=n.spec.$root[h];if(b.required){let M=null;M=h==="version"?o:b.type==="array"?[]:{},M!=null&&(E[h]=M)}}return E}();class $r extends n.Evented{constructor(o,h={}){super(),this.map=o,this.dispatcher=new X(we(),this),this.imageManager=new S,this.imageManager.setEventedParent(this),this.glyphManager=new T(o._requestManager,h.localIdeographFontFamily),this.lineAtlas=new Z(256,512),this.crossTileSymbolIndex=new Bi,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new n.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",n.getReferrer());const b=this;this._rtlTextPluginCallback=$r.registerForPluginStateChange(M=>{b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:M.pluginStatus,pluginURL:M.pluginURL},(j,ee)=>{if(n.triggerPluginCompletionEvent(j),ee&&ee.every(le=>le))for(const le in b.sourceCaches)b.sourceCaches[le].reload()})}),this.on("data",M=>{if(M.dataType!=="source"||M.sourceDataType!=="metadata")return;const j=this.sourceCaches[M.sourceId];if(!j)return;const ee=j.getSource();if(ee&&ee.vectorLayerIds)for(const le in this._layers){const pe=this._layers[le];pe.source===ee.id&&this._validateLayer(pe)}})}loadURL(o,h={}){this.fire(new n.Event("dataloading",{dataType:"style"}));const b=typeof h.validate!="boolean"||h.validate,M=this.map._requestManager.transformRequest(o,n.ResourceType.Style);this._request=n.getJSON(M,(j,ee)=>{this._request=null,j?this.fire(new n.ErrorEvent(j)):ee&&this._load(ee,b)})}loadJSON(o,h={}){this.fire(new n.Event("dataloading",{dataType:"style"})),this._request=n.exported.frame(()=>{this._request=null,this._load(o,h.validate!==!1)})}loadEmpty(){this.fire(new n.Event("dataloading",{dataType:"style"})),this._load(xr,!1)}_load(o,h){if(h&&ji(this,n.validateStyle(o)))return;this._loaded=!0,this.stylesheet=o;for(const M in o.sources)this.addSource(M,o.sources[M],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs);const b=Ce(this.stylesheet.layers);this._order=b.map(M=>M.id),this._layers={},this._serializedLayers={};for(let M of b)M=n.createStyleLayer(M),M.setEventedParent(this,{layer:{id:M.id}}),this._layers[M.id]=M,this._serializedLayers[M.id]=M.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new q(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new n.Event("data",{dataType:"style"})),this.fire(new n.Event("style.load"))}_loadSprite(o){this._spriteRequest=function(h,b,M,j){let ee,le,pe;const Te=M>1?"@2x":"";let Ne=n.getJSON(b.transformRequest(b.normalizeSpriteURL(h,Te,".json"),n.ResourceType.SpriteJSON),(tt,Qe)=>{Ne=null,pe||(pe=tt,ee=Qe,qe())}),Be=n.getImage(b.transformRequest(b.normalizeSpriteURL(h,Te,".png"),n.ResourceType.SpriteImage),(tt,Qe)=>{Be=null,pe||(pe=tt,le=Qe,qe())});function qe(){if(pe)j(pe);else if(ee&&le){const tt=n.exported.getImageData(le),Qe={};for(const Je in ee){const{width:pt,height:yt,x:_t,y:at,sdf:At,pixelRatio:Tt,stretchX:Nt,stretchY:Ot,content:Ut}=ee[Je],Lt=new n.RGBAImage({width:pt,height:yt});n.RGBAImage.copy(tt,Lt,{x:_t,y:at},{x:0,y:0},{width:pt,height:yt}),Qe[Je]={data:Lt,pixelRatio:Tt,sdf:At,stretchX:Nt,stretchY:Ot,content:Ut}}j(null,Qe)}}return{cancel(){Ne&&(Ne.cancel(),Ne=null),Be&&(Be.cancel(),Be=null)}}}(o,this.map._requestManager,this.map.getPixelRatio(),(h,b)=>{if(this._spriteRequest=null,h)this.fire(new n.ErrorEvent(h));else if(b)for(const M in b)this.imageManager.addImage(M,b[M]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new n.Event("data",{dataType:"style"}))})}_validateLayer(o){const h=this.sourceCaches[o.source];if(!h)return;const b=o.sourceLayer;if(!b)return;const M=h.getSource();(M.type==="geojson"||M.vectorLayerIds&&M.vectorLayerIds.indexOf(b)===-1)&&this.fire(new n.ErrorEvent(new Error(`Source layer "${b}" does not exist on source "${M.id}" as specified by style layer "${o.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(o){const h=[];for(const b of o){const M=this._layers[b];M.type!=="custom"&&h.push(M.serialize())}return h}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(o){if(!this._loaded)return;const h=this._changed;if(this._changed){const M=Object.keys(this._updatedLayers),j=Object.keys(this._removedLayers);(M.length||j.length)&&this._updateWorkerLayers(M,j);for(const ee in this._updatedSources){const le=this._updatedSources[ee];if(le==="reload")this._reloadSource(ee);else{if(le!=="clear")throw new Error(`Invalid action ${le}`);this._clearSource(ee)}}this._updateTilesForChangedImages();for(const ee in this._updatedPaintProps)this._layers[ee].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}const b={};for(const M in this.sourceCaches){const j=this.sourceCaches[M];b[M]=j.used,j.used=!1}for(const M of this._order){const j=this._layers[M];j.recalculate(o,this._availableImages),!j.isHidden(o.zoom)&&j.source&&(this.sourceCaches[j.source].used=!0)}for(const M in b){const j=this.sourceCaches[M];b[M]!==j.used&&j.fire(new n.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:M}))}this.light.recalculate(o),this.z=o.zoom,h&&this.fire(new n.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateWorkerLayers(o,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(o){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),o){const h=this.sourceCaches[o.source];if(!h)throw new Error(`cannot load terrain, because there exists no source with ID: ${o.source}`);this.terrain=new $i(this,h,o),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=b=>{b.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=b=>{b.tile&&(b.sourceId===o.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(b.sourceId,b.tile.tileID)):b.source.type==="geojson"&&this.terrain.rememberForRerender(b.sourceId,b.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new n.Event("terrain",{terrain:o}))}setState(o){if(this._checkLoaded(),ji(this,n.validateStyle(o)))return!1;(o=n.clone$1(o)).layers=Ce(o.layers);const h=function(M,j){if(!M)return[{command:Ie.setStyle,args:[j]}];let ee=[];try{if(!v(M.version,j.version))return[{command:Ie.setStyle,args:[j]}];v(M.center,j.center)||ee.push({command:Ie.setCenter,args:[j.center]}),v(M.zoom,j.zoom)||ee.push({command:Ie.setZoom,args:[j.zoom]}),v(M.bearing,j.bearing)||ee.push({command:Ie.setBearing,args:[j.bearing]}),v(M.pitch,j.pitch)||ee.push({command:Ie.setPitch,args:[j.pitch]}),v(M.sprite,j.sprite)||ee.push({command:Ie.setSprite,args:[j.sprite]}),v(M.glyphs,j.glyphs)||ee.push({command:Ie.setGlyphs,args:[j.glyphs]}),v(M.transition,j.transition)||ee.push({command:Ie.setTransition,args:[j.transition]}),v(M.light,j.light)||ee.push({command:Ie.setLight,args:[j.light]});const le={},pe=[];(function(Ne,Be,qe,tt){let Qe;for(Qe in Be=Be||{},Ne=Ne||{})Object.prototype.hasOwnProperty.call(Ne,Qe)&&(Object.prototype.hasOwnProperty.call(Be,Qe)||Ge(Qe,qe,tt));for(Qe in Be)Object.prototype.hasOwnProperty.call(Be,Qe)&&(Object.prototype.hasOwnProperty.call(Ne,Qe)?v(Ne[Qe],Be[Qe])||(Ne[Qe].type==="geojson"&&Be[Qe].type==="geojson"&&ge(Ne,Be,Qe)?qe.push({command:Ie.setGeoJSONSourceData,args:[Qe,Be[Qe].data]}):ke(Qe,Be,qe,tt)):Fe(Qe,Be,qe))})(M.sources,j.sources,pe,le);const Te=[];M.layers&&M.layers.forEach(Ne=>{le[Ne.source]?ee.push({command:Ie.removeLayer,args:[Ne.id]}):Te.push(Ne)}),ee=ee.concat(pe),function(Ne,Be,qe){Be=Be||[];const tt=(Ne=Ne||[]).map(Me),Qe=Be.map(Me),Je=Ne.reduce(De,{}),pt=Be.reduce(De,{}),yt=tt.slice(),_t=Object.create(null);let at,At,Tt,Nt,Ot,Ut,Lt;for(at=0,At=0;at<tt.length;at++)Tt=tt[at],Object.prototype.hasOwnProperty.call(pt,Tt)?At++:(qe.push({command:Ie.removeLayer,args:[Tt]}),yt.splice(yt.indexOf(Tt,At),1));for(at=0,At=0;at<Qe.length;at++)Tt=Qe[Qe.length-1-at],yt[yt.length-1-at]!==Tt&&(Object.prototype.hasOwnProperty.call(Je,Tt)?(qe.push({command:Ie.removeLayer,args:[Tt]}),yt.splice(yt.lastIndexOf(Tt,yt.length-At),1)):At++,Ut=yt[yt.length-at],qe.push({command:Ie.addLayer,args:[pt[Tt],Ut]}),yt.splice(yt.length-at,0,Tt),_t[Tt]=!0);for(at=0;at<Qe.length;at++)if(Tt=Qe[at],Nt=Je[Tt],Ot=pt[Tt],!_t[Tt]&&!v(Nt,Ot))if(v(Nt.source,Ot.source)&&v(Nt["source-layer"],Ot["source-layer"])&&v(Nt.type,Ot.type)){for(Lt in fe(Nt.layout,Ot.layout,qe,Tt,null,Ie.setLayoutProperty),fe(Nt.paint,Ot.paint,qe,Tt,null,Ie.setPaintProperty),v(Nt.filter,Ot.filter)||qe.push({command:Ie.setFilter,args:[Tt,Ot.filter]}),v(Nt.minzoom,Ot.minzoom)&&v(Nt.maxzoom,Ot.maxzoom)||qe.push({command:Ie.setLayerZoomRange,args:[Tt,Ot.minzoom,Ot.maxzoom]}),Nt)Object.prototype.hasOwnProperty.call(Nt,Lt)&&Lt!=="layout"&&Lt!=="paint"&&Lt!=="filter"&&Lt!=="metadata"&&Lt!=="minzoom"&&Lt!=="maxzoom"&&(Lt.indexOf("paint.")===0?fe(Nt[Lt],Ot[Lt],qe,Tt,Lt.slice(6),Ie.setPaintProperty):v(Nt[Lt],Ot[Lt])||qe.push({command:Ie.setLayerProperty,args:[Tt,Lt,Ot[Lt]]}));for(Lt in Ot)Object.prototype.hasOwnProperty.call(Ot,Lt)&&!Object.prototype.hasOwnProperty.call(Nt,Lt)&&Lt!=="layout"&&Lt!=="paint"&&Lt!=="filter"&&Lt!=="metadata"&&Lt!=="minzoom"&&Lt!=="maxzoom"&&(Lt.indexOf("paint.")===0?fe(Nt[Lt],Ot[Lt],qe,Tt,Lt.slice(6),Ie.setPaintProperty):v(Nt[Lt],Ot[Lt])||qe.push({command:Ie.setLayerProperty,args:[Tt,Lt,Ot[Lt]]}))}else qe.push({command:Ie.removeLayer,args:[Tt]}),Ut=yt[yt.lastIndexOf(Tt)+1],qe.push({command:Ie.addLayer,args:[Ot,Ut]})}(Te,j.layers,ee)}catch(le){console.warn("Unable to compute style diff:",le),ee=[{command:Ie.setStyle,args:[j]}]}return ee}(this.serialize(),o).filter(M=>!(M.command in Hn));if(h.length===0)return!1;const b=h.filter(M=>!(M.command in pn));if(b.length>0)throw new Error(`Unimplemented: ${b.map(M=>M.command).join(", ")}.`);return h.forEach(M=>{M.command!=="setTransition"&&this[M.command].apply(this,M.args)}),this.stylesheet=o,!0}addImage(o,h){if(this.getImage(o))return this.fire(new n.ErrorEvent(new Error(`An image named "${o}" already exists.`)));this.imageManager.addImage(o,h),this._afterImageUpdated(o)}updateImage(o,h){this.imageManager.updateImage(o,h)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){if(!this.getImage(o))return this.fire(new n.ErrorEvent(new Error(`An image named "${o}" does not exist.`)));this.imageManager.removeImage(o),this._afterImageUpdated(o)}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new n.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(o,h,b={}){if(this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error(`Source "${o}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(n.validateStyle.source,`sources.${o}`,h,null,b))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const M=this.sourceCaches[o]=new Q(o,h,this.dispatcher);M.style=this,M.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:M.serialize(),sourceId:o})),M.onAdd(this.map),this._changed=!0}removeSource(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===o)return this.fire(new n.ErrorEvent(new Error(`Source "${o}" cannot be removed while layer "${b}" is using it.`)));const h=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],h.fire(new n.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(o,h){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error(`There is no source with this ID=${o}`);const b=this.sourceCaches[o].getSource();if(b.type!=="geojson")throw new Error(`geojsonSource.type is ${b.type}, which is !== 'geojson`);b.setData(h),this._changed=!0}getSource(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()}addLayer(o,h,b={}){this._checkLoaded();const M=o.id;if(this.getLayer(M))return void this.fire(new n.ErrorEvent(new Error(`Layer "${M}" already exists on this map.`)));let j;if(o.type==="custom"){if(ji(this,n.validateCustomStyleLayer(o)))return;j=n.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(M,o.source),o=n.clone$1(o),o=n.extend(o,{source:M})),this._validate(n.validateStyle.layer,`layers.${M}`,o,{arrayIndex:-1},b))return;j=n.createStyleLayer(o),this._validateLayer(j),j.setEventedParent(this,{layer:{id:M}}),this._serializedLayers[j.id]=j.serialize()}const ee=h?this._order.indexOf(h):this._order.length;if(h&&ee===-1)this.fire(new n.ErrorEvent(new Error(`Cannot add layer "${M}" before non-existing layer "${h}".`)));else{if(this._order.splice(ee,0,M),this._layerOrderChanged=!0,this._layers[M]=j,this._removedLayers[M]&&j.source&&j.type!=="custom"){const le=this._removedLayers[M];delete this._removedLayers[M],le.type!==j.type?this._updatedSources[j.source]="clear":(this._updatedSources[j.source]="reload",this.sourceCaches[j.source].pause())}this._updateLayer(j),j.onAdd&&j.onAdd(this.map)}}moveLayer(o,h){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new n.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===h)return;const b=this._order.indexOf(o);this._order.splice(b,1);const M=h?this._order.indexOf(h):this._order.length;h&&M===-1?this.fire(new n.ErrorEvent(new Error(`Cannot move layer "${o}" before non-existing layer "${h}".`))):(this._order.splice(M,0,o),this._layerOrderChanged=!0)}removeLayer(o){this._checkLoaded();const h=this._layers[o];if(!h)return void this.fire(new n.ErrorEvent(new Error(`Cannot remove non-existing layer "${o}".`)));h.setEventedParent(null);const b=this._order.indexOf(o);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=h,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],h.onRemove&&h.onRemove(this.map)}getLayer(o){return this._layers[o]}hasLayer(o){return o in this._layers}setLayerZoomRange(o,h,b){this._checkLoaded();const M=this.getLayer(o);M?M.minzoom===h&&M.maxzoom===b||(h!=null&&(M.minzoom=h),b!=null&&(M.maxzoom=b),this._updateLayer(M)):this.fire(new n.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${o}".`)))}setFilter(o,h,b={}){this._checkLoaded();const M=this.getLayer(o);if(M){if(!v(M.filter,h))return h==null?(M.filter=void 0,void this._updateLayer(M)):void(this._validate(n.validateStyle.filter,`layers.${M.id}.filter`,h,null,b)||(M.filter=n.clone$1(h),this._updateLayer(M)))}else this.fire(new n.ErrorEvent(new Error(`Cannot filter non-existing layer "${o}".`)))}getFilter(o){return n.clone$1(this.getLayer(o).filter)}setLayoutProperty(o,h,b,M={}){this._checkLoaded();const j=this.getLayer(o);j?v(j.getLayoutProperty(h),b)||(j.setLayoutProperty(h,b,M),this._updateLayer(j)):this.fire(new n.ErrorEvent(new Error(`Cannot style non-existing layer "${o}".`)))}getLayoutProperty(o,h){const b=this.getLayer(o);if(b)return b.getLayoutProperty(h);this.fire(new n.ErrorEvent(new Error(`Cannot get style of non-existing layer "${o}".`)))}setPaintProperty(o,h,b,M={}){this._checkLoaded();const j=this.getLayer(o);j?v(j.getPaintProperty(h),b)||(j.setPaintProperty(h,b,M)&&this._updateLayer(j),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new n.ErrorEvent(new Error(`Cannot style non-existing layer "${o}".`)))}getPaintProperty(o,h){return this.getLayer(o).getPaintProperty(h)}setFeatureState(o,h){this._checkLoaded();const b=o.source,M=o.sourceLayer,j=this.sourceCaches[b];if(j===void 0)return void this.fire(new n.ErrorEvent(new Error(`The source '${b}' does not exist in the map's style.`)));const ee=j.getSource().type;ee==="geojson"&&M?this.fire(new n.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ee!=="vector"||M?(o.id===void 0&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided."))),j.setFeatureState(M,o.id,h)):this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(o,h){this._checkLoaded();const b=o.source,M=this.sourceCaches[b];if(M===void 0)return void this.fire(new n.ErrorEvent(new Error(`The source '${b}' does not exist in the map's style.`)));const j=M.getSource().type,ee=j==="vector"?o.sourceLayer:void 0;j!=="vector"||ee?h&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new n.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):M.removeFeatureState(ee,o.id,h):this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(o){this._checkLoaded();const h=o.source,b=o.sourceLayer,M=this.sourceCaches[h];if(M!==void 0)return M.getSource().type!=="vector"||b?(o.id===void 0&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided."))),M.getFeatureState(b,o.id)):void this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new n.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return n.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return n.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:n.mapObject(this.sourceCaches,o=>o.serialize()),layers:this._serializeLayers(this._order)},o=>o!==void 0)}_updateLayer(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(o){const h=ee=>this._layers[ee].type==="fill-extrusion",b={},M=[];for(let ee=this._order.length-1;ee>=0;ee--){const le=this._order[ee];if(h(le)){b[le]=ee;for(const pe of o){const Te=pe[le];if(Te)for(const Ne of Te)M.push(Ne)}}}M.sort((ee,le)=>le.intersectionZ-ee.intersectionZ);const j=[];for(let ee=this._order.length-1;ee>=0;ee--){const le=this._order[ee];if(h(le))for(let pe=M.length-1;pe>=0;pe--){const Te=M[pe].feature;if(b[Te.layer.id]<ee)break;j.push(Te),M.pop()}else for(const pe of o){const Te=pe[le];if(Te)for(const Ne of Te)j.push(Ne.feature)}}return j}queryRenderedFeatures(o,h,b){h&&h.filter&&this._validate(n.validateStyle.filter,"queryRenderedFeatures.filter",h.filter,null,h);const M={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new n.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const ee of h.layers){const le=this._layers[ee];if(!le)return this.fire(new n.ErrorEvent(new Error(`The layer '${ee}' does not exist in the map's style and cannot be queried for features.`))),[];M[le.source]=!0}}const j=[];h.availableImages=this._availableImages;for(const ee in this.sourceCaches)h.layers&&!M[ee]||j.push(oe(this.sourceCaches[ee],this._layers,this._serializedLayers,o,h,b));return this.placement&&j.push(function(ee,le,pe,Te,Ne,Be,qe){const tt={},Qe=Be.queryRenderedSymbols(Te),Je=[];for(const pt of Object.keys(Qe).map(Number))Je.push(qe[pt]);Je.sort(Ee);for(const pt of Je){const yt=pt.featureIndex.lookupSymbolFeatures(Qe[pt.bucketInstanceId],le,pt.bucketIndex,pt.sourceLayerIndex,Ne.filter,Ne.layers,Ne.availableImages,ee);for(const _t in yt){const at=tt[_t]=tt[_t]||[],At=yt[_t];At.sort((Tt,Nt)=>{const Ot=pt.featureSortOrder;if(Ot){const Ut=Ot.indexOf(Tt.featureIndex);return Ot.indexOf(Nt.featureIndex)-Ut}return Nt.featureIndex-Tt.featureIndex});for(const Tt of At)at.push(Tt)}}for(const pt in tt)tt[pt].forEach(yt=>{const _t=yt.feature,at=pe[ee[pt].source].getFeatureState(_t.layer["source-layer"],_t.id);_t.source=_t.layer.source,_t.layer["source-layer"]&&(_t.sourceLayer=_t.layer["source-layer"]),_t.state=at});return tt}(this._layers,this._serializedLayers,this.sourceCaches,o,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(j)}querySourceFeatures(o,h){h&&h.filter&&this._validate(n.validateStyle.filter,"querySourceFeatures.filter",h.filter,null,h);const b=this.sourceCaches[o];return b?function(M,j){const ee=M.getRenderableIds().map(Te=>M.getTileByID(Te)),le=[],pe={};for(let Te=0;Te<ee.length;Te++){const Ne=ee[Te],Be=Ne.tileID.canonical.key;pe[Be]||(pe[Be]=!0,Ne.querySourceFeatures(le,j))}return le}(b,h):[]}addSourceType(o,h,b){return $r.getSourceType(o)?b(new Error(`A source type called "${o}" already exists.`)):($r.setSourceType(o,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:h.workerSourceURL},b):b(null,null))}getLight(){return this.light.getLight()}setLight(o,h={}){this._checkLoaded();const b=this.light.getLight();let M=!1;for(const ee in o)if(!v(o[ee],b[ee])){M=!0;break}if(!M)return;const j={now:n.exported.now(),transition:n.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,h),this.light.updateTransitions(j)}_validate(o,h,b,M,j={}){return(!j||j.validate!==!1)&&ji(this,o.call(n.validateStyle,n.extend({key:h,style:this.serialize(),value:b,styleSpec:n.spec},M)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.sourceCaches){const h=this.sourceCaches[o];h.setEventedParent(null),h.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(o){this.sourceCaches[o].clearTiles()}_reloadSource(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()}_updateSources(o){for(const h in this.sourceCaches)this.sourceCaches[h].update(o,this.terrain)}_generateCollisionBoxes(){for(const o in this.sourceCaches)this._reloadSource(o)}_updatePlacement(o,h,b,M,j=!1){let ee=!1,le=!1;const pe={};for(const Te of this._order){const Ne=this._layers[Te];if(Ne.type!=="symbol")continue;if(!pe[Ne.source]){const qe=this.sourceCaches[Ne.source];pe[Ne.source]=qe.getRenderableIds(!0).map(tt=>qe.getTileByID(tt)).sort((tt,Qe)=>Qe.tileID.overscaledZ-tt.tileID.overscaledZ||(tt.tileID.isLessThan(Qe.tileID)?-1:1))}const Be=this.crossTileSymbolIndex.addLayer(Ne,pe[Ne.source],o.center.lng);ee=ee||Be}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((j=j||this._layerOrderChanged||b===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.exported.now(),o.zoom))&&(this.pauseablePlacement=new Dt(o,this.terrain,this._order,j,h,b,M,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,pe),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.exported.now()),le=!0),ee&&this.pauseablePlacement.placement.setStale()),le||ee)for(const Te of this._order){const Ne=this._layers[Te];Ne.type==="symbol"&&this.placement.updateLayerOpacities(Ne,pe[Ne.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.exported.now())}_releaseSymbolFadeTiles(){for(const o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,h,b){this.imageManager.getImages(h.icons,b),this._updateTilesForChangedImages();const M=this.sourceCaches[h.source];M&&M.setDependencies(h.tileID.key,h.type,h.icons)}getGlyphs(o,h,b){this.glyphManager.getGlyphs(h.stacks,b)}getResource(o,h,b){return n.makeRequest(h,b)}}$r.getSourceType=function(E){return de[E]},$r.setSourceType=function(E,o){de[E]=o},$r.registerForPluginStateChange=n.registerForPluginStateChange;var xh="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const Mc={prelude:Fn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Fn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Fn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Fn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Fn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Fn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Fn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Fn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Fn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Fn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Fn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Fn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Fn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Fn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Fn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Fn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Fn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Fn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Fn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Fn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Fn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Fn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Fn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Fn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Fn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Fn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Fn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",xh),terrainDepth:Fn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",xh),terrainCoords:Fn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",xh)};function Fn(E,o){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=o.match(/attribute ([\w]+) ([\w]+)/g),M=E.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),j=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ee=j?j.concat(M):M,le={};return{fragmentSource:E=E.replace(h,(pe,Te,Ne,Be,qe)=>(le[qe]=!0,Te==="define"?`
#ifndef HAS_UNIFORM_u_${qe}
varying ${Ne} ${Be} ${qe};
#else
uniform ${Ne} ${Be} u_${qe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${qe}
    ${Ne} ${Be} ${qe} = u_${qe};
#endif
`)),vertexSource:o=o.replace(h,(pe,Te,Ne,Be,qe)=>{const tt=Be==="float"?"vec2":"vec4",Qe=qe.match(/color/)?"color":tt;return le[qe]?Te==="define"?`
#ifndef HAS_UNIFORM_u_${qe}
uniform lowp float u_${qe}_t;
attribute ${Ne} ${tt} a_${qe};
varying ${Ne} ${Be} ${qe};
#else
uniform ${Ne} ${Be} u_${qe};
#endif
`:Qe==="vec4"?`
#ifndef HAS_UNIFORM_u_${qe}
    ${qe} = a_${qe};
#else
    ${Ne} ${Be} ${qe} = u_${qe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${qe}
    ${qe} = unpack_mix_${Qe}(a_${qe}, u_${qe}_t);
#else
    ${Ne} ${Be} ${qe} = u_${qe};
#endif
`:Te==="define"?`
#ifndef HAS_UNIFORM_u_${qe}
uniform lowp float u_${qe}_t;
attribute ${Ne} ${tt} a_${qe};
#else
uniform ${Ne} ${Be} u_${qe};
#endif
`:Qe==="vec4"?`
#ifndef HAS_UNIFORM_u_${qe}
    ${Ne} ${Be} ${qe} = a_${qe};
#else
    ${Ne} ${Be} ${qe} = u_${qe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${qe}
    ${Ne} ${Be} ${qe} = unpack_mix_${Qe}(a_${qe}, u_${qe}_t);
#else
    ${Ne} ${Be} ${qe} = u_${qe};
#endif
`}),staticAttributes:b,staticUniforms:ee}}class sx{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(o,h,b,M,j,ee,le,pe,Te){this.context=o;let Ne=this.boundPaintVertexBuffers.length!==M.length;for(let Be=0;!Ne&&Be<M.length;Be++)this.boundPaintVertexBuffers[Be]!==M[Be]&&(Ne=!0);o.extVertexArrayObject&&this.vao&&this.boundProgram===h&&this.boundLayoutVertexBuffer===b&&!Ne&&this.boundIndexBuffer===j&&this.boundVertexOffset===ee&&this.boundDynamicVertexBuffer===le&&this.boundDynamicVertexBuffer2===pe&&this.boundDynamicVertexBuffer3===Te?(o.bindVertexArrayOES.set(this.vao),le&&le.bind(),j&&j.dynamicDraw&&j.bind(),pe&&pe.bind(),Te&&Te.bind()):this.freshBind(h,b,M,j,ee,le,pe,Te)}freshBind(o,h,b,M,j,ee,le,pe){let Te;const Ne=o.numAttributes,Be=this.context,qe=Be.gl;if(Be.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Be.extVertexArrayObject.createVertexArrayOES(),Be.bindVertexArrayOES.set(this.vao),Te=0,this.boundProgram=o,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=M,this.boundVertexOffset=j,this.boundDynamicVertexBuffer=ee,this.boundDynamicVertexBuffer2=le,this.boundDynamicVertexBuffer3=pe;else{Te=Be.currentNumAttributes||0;for(let tt=Ne;tt<Te;tt++)qe.disableVertexAttribArray(tt)}h.enableAttributes(qe,o);for(const tt of b)tt.enableAttributes(qe,o);ee&&ee.enableAttributes(qe,o),le&&le.enableAttributes(qe,o),pe&&pe.enableAttributes(qe,o),h.bind(),h.setVertexAttribPointers(qe,o,j);for(const tt of b)tt.bind(),tt.setVertexAttribPointers(qe,o,j);ee&&(ee.bind(),ee.setVertexAttribPointers(qe,o,j)),M&&M.bind(),le&&(le.bind(),le.setVertexAttribPointers(qe,o,j)),pe&&(pe.bind(),pe.setVertexAttribPointers(qe,o,j)),Be.currentNumAttributes=Ne}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Uu(E){const o=[];for(let h=0;h<E.length;h++){if(E[h]===null)continue;const b=E[h].split(" ");o.push(b.pop())}return o}class ax{constructor(o,h,b,M,j,ee,le){const pe=o.gl;this.program=pe.createProgram();const Te=Uu(b.staticAttributes),Ne=M?M.getBinderAttributes():[],Be=Te.concat(Ne),qe=Mc.prelude.staticUniforms?Uu(Mc.prelude.staticUniforms):[],tt=b.staticUniforms?Uu(b.staticUniforms):[],Qe=M?M.getBinderUniforms():[],Je=qe.concat(tt).concat(Qe),pt=[];for(const Ot of Je)pt.indexOf(Ot)<0&&pt.push(Ot);const yt=M?M.defines():[];ee&&yt.push("#define OVERDRAW_INSPECTOR;"),le&&yt.push("#define TERRAIN3D;");const _t=yt.concat(Mc.prelude.fragmentSource,b.fragmentSource).join(`
`),at=yt.concat(Mc.prelude.vertexSource,b.vertexSource).join(`
`),At=pe.createShader(pe.FRAGMENT_SHADER);if(pe.isContextLost())return void(this.failedToCreate=!0);pe.shaderSource(At,_t),pe.compileShader(At),pe.attachShader(this.program,At);const Tt=pe.createShader(pe.VERTEX_SHADER);if(pe.isContextLost())return void(this.failedToCreate=!0);pe.shaderSource(Tt,at),pe.compileShader(Tt),pe.attachShader(this.program,Tt),this.attributes={};const Nt={};this.numAttributes=Be.length;for(let Ot=0;Ot<this.numAttributes;Ot++)Be[Ot]&&(pe.bindAttribLocation(this.program,Ot,Be[Ot]),this.attributes[Be[Ot]]=Ot);pe.linkProgram(this.program),pe.deleteShader(Tt),pe.deleteShader(At);for(let Ot=0;Ot<pt.length;Ot++){const Ut=pt[Ot];if(Ut&&!Nt[Ut]){const Lt=pe.getUniformLocation(this.program,Ut);Lt&&(Nt[Ut]=Lt)}}this.fixedUniforms=j(o,Nt),this.terrainUniforms=((Ot,Ut)=>({u_depth:new n.Uniform1i(Ot,Ut.u_depth),u_terrain:new n.Uniform1i(Ot,Ut.u_terrain),u_terrain_dim:new n.Uniform1f(Ot,Ut.u_terrain_dim),u_terrain_matrix:new n.UniformMatrix4f(Ot,Ut.u_terrain_matrix),u_terrain_unpack:new n.Uniform4f(Ot,Ut.u_terrain_unpack),u_terrain_offset:new n.Uniform1f(Ot,Ut.u_terrain_offset),u_terrain_exaggeration:new n.Uniform1f(Ot,Ut.u_terrain_exaggeration)}))(o,Nt),this.binderUniforms=M?M.getUniforms(o,Nt):[]}draw(o,h,b,M,j,ee,le,pe,Te,Ne,Be,qe,tt,Qe,Je,pt,yt,_t){const at=o.gl;if(this.failedToCreate)return;if(o.program.set(this.program),o.setDepthMode(b),o.setStencilMode(M),o.setColorMode(j),o.setCullFace(ee),pe){o.activeTexture.set(at.TEXTURE2),at.bindTexture(at.TEXTURE_2D,pe.depthTexture),o.activeTexture.set(at.TEXTURE3),at.bindTexture(at.TEXTURE_2D,pe.texture);for(const Tt in this.terrainUniforms)this.terrainUniforms[Tt].set(pe[Tt])}for(const Tt in this.fixedUniforms)this.fixedUniforms[Tt].set(le[Tt]);Je&&Je.setUniforms(o,this.binderUniforms,tt,{zoom:Qe});let At=0;switch(h){case at.LINES:At=2;break;case at.TRIANGLES:At=3;break;case at.LINE_STRIP:At=1}for(const Tt of qe.get()){const Nt=Tt.vaos||(Tt.vaos={});(Nt[Te]||(Nt[Te]=new sx)).bind(o,this,Ne,Je?Je.getPaintVertexBuffers():[],Be,Tt.vertexOffset,pt,yt,_t),at.drawElements(h,Tt.primitiveLength*At,at.UNSIGNED_SHORT,Tt.primitiveOffset*At*2)}}}function vh(E,o,h){const b=1/nn(h,1,o.transform.tileZoom),M=Math.pow(2,h.tileID.overscaledZ),j=h.tileSize*Math.pow(2,o.transform.tileZoom)/M,ee=j*(h.tileID.canonical.x+h.tileID.wrap*M),le=j*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[b,E.fromScale,E.toScale],u_fade:E.t,u_pixel_coord_upper:[ee>>16,le>>16],u_pixel_coord_lower:[65535&ee,65535&le]}}const qf=(E,o,h,b)=>{const M=o.style.light,j=M.properties.get("position"),ee=[j.x,j.y,j.z],le=n.create$1();M.properties.get("anchor")==="viewport"&&n.fromRotation(le,-o.transform.angle),n.transformMat3(ee,ee,le);const pe=M.properties.get("color");return{u_matrix:E,u_lightpos:ee,u_lightintensity:M.properties.get("intensity"),u_lightcolor:[pe.r,pe.g,pe.b],u_vertical_gradient:+h,u_opacity:b}},bh=(E,o,h,b,M,j,ee)=>n.extend(qf(E,o,h,b),vh(j,o,ee),{u_height_factor:-Math.pow(2,M.overscaledZ)/ee.tileSize/8}),_h=E=>({u_matrix:E}),wh=(E,o,h,b)=>n.extend(_h(E),vh(h,o,b)),Yf=(E,o)=>({u_matrix:E,u_world:o}),Zf=(E,o,h,b,M)=>n.extend(wh(E,o,h,b),{u_world:M}),el=(E,o,h,b)=>{const M=E.transform;let j,ee;if(b.paint.get("circle-pitch-alignment")==="map"){const le=nn(h,1,M.zoom);j=!0,ee=[le,le]}else j=!1,ee=M.pixelsToGLUnits;return{u_camera_to_center_distance:M.cameraToCenterDistance,u_scale_with_map:+(b.paint.get("circle-pitch-scale")==="map"),u_matrix:E.translatePosMatrix(o.posMatrix,h,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_pitch_with_map:+j,u_device_pixel_ratio:E.pixelRatio,u_extrude_scale:ee}},Vu=(E,o,h)=>{const b=nn(h,1,o.zoom),M=Math.pow(2,o.zoom-h.tileID.overscaledZ),j=h.tileID.overscaleFactor();return{u_matrix:E,u_camera_to_center_distance:o.cameraToCenterDistance,u_pixels_to_tile_units:b,u_extrude_scale:[o.pixelsToGLUnits[0]/(b*M),o.pixelsToGLUnits[1]/(b*M)],u_overscale_factor:j}},Dl=(E,o,h=1)=>({u_matrix:E,u_color:o,u_overlay:0,u_overlay_scale:h}),Pc=E=>({u_matrix:E}),Gu=(E,o,h,b)=>({u_matrix:E,u_extrude_scale:nn(o,1,h),u_intensity:b});function Hu(E,o){const h=Math.pow(2,o.canonical.z),b=o.canonical.y;return[new n.MercatorCoordinate(0,b/h).toLngLat().lat,new n.MercatorCoordinate(0,(b+1)/h).toLngLat().lat]}const Ic=(E,o,h,b)=>{const M=E.transform;return{u_matrix:Ch(E,o,h,b),u_ratio:1/nn(o,1,M.zoom),u_device_pixel_ratio:E.pixelRatio,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]]}},Wu=(E,o,h,b,M)=>n.extend(Ic(E,o,h,M),{u_image:0,u_image_height:b}),Dc=(E,o,h,b,M)=>{const j=E.transform,ee=Rc(o,j);return{u_matrix:Ch(E,o,h,M),u_texsize:o.imageAtlasTexture.size,u_ratio:1/nn(o,1,j.zoom),u_device_pixel_ratio:E.pixelRatio,u_image:0,u_scale:[ee,b.fromScale,b.toScale],u_fade:b.t,u_units_to_pixels:[1/j.pixelsToGLUnits[0],1/j.pixelsToGLUnits[1]]}},hr=(E,o,h,b,M,j)=>{const ee=E.lineAtlas,le=Rc(o,E.transform),pe=h.layout.get("line-cap")==="round",Te=ee.getDash(b.from,pe),Ne=ee.getDash(b.to,pe),Be=Te.width*M.fromScale,qe=Ne.width*M.toScale;return n.extend(Ic(E,o,h,j),{u_patternscale_a:[le/Be,-Te.height/2],u_patternscale_b:[le/qe,-Ne.height/2],u_sdfgamma:ee.width/(256*Math.min(Be,qe)*E.pixelRatio)/2,u_image:0,u_tex_y_a:Te.y,u_tex_y_b:Ne.y,u_mix:M.t})};function Rc(E,o){return 1/nn(E,1,o.tileZoom)}function Ch(E,o,h,b){return E.translatePosMatrix(b?b.posMatrix:o.tileID.posMatrix,o,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}const Xf=(E,o,h,b,M)=>{return{u_matrix:E,u_tl_parent:o,u_scale_parent:h,u_buffer_scale:1,u_fade_t:b.mix,u_opacity:b.opacity*M.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:M.paint.get("raster-brightness-min"),u_brightness_high:M.paint.get("raster-brightness-max"),u_saturation_factor:(ee=M.paint.get("raster-saturation"),ee>0?1-1/(1.001-ee):-ee),u_contrast_factor:(j=M.paint.get("raster-contrast"),j>0?1/(1-j):1+j),u_spin_weights:Kf(M.paint.get("raster-hue-rotate"))};var j,ee};function Kf(E){E*=Math.PI/180;const o=Math.sin(E),h=Math.cos(E);return[(2*h+1)/3,(-Math.sqrt(3)*o-h+1)/3,(Math.sqrt(3)*o-h+1)/3]}const qu=(E,o,h,b,M,j,ee,le,pe,Te)=>{const Ne=M.transform;return{u_is_size_zoom_constant:+(E==="constant"||E==="source"),u_is_size_feature_constant:+(E==="constant"||E==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:Ne.cameraToCenterDistance,u_pitch:Ne.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:Ne.width/Ne.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_matrix:j,u_label_plane_matrix:ee,u_coord_matrix:le,u_is_text:+pe,u_pitch_with_map:+b,u_texsize:Te,u_texture:0}},Th=(E,o,h,b,M,j,ee,le,pe,Te,Ne)=>{const Be=M.transform;return n.extend(qu(E,o,h,b,M,j,ee,le,pe,Te),{u_gamma_scale:b?Math.cos(Be._pitch)*Be.cameraToCenterDistance:1,u_device_pixel_ratio:M.pixelRatio,u_is_halo:1})},ox=(E,o,h,b,M,j,ee,le,pe,Te)=>n.extend(Th(E,o,h,b,M,j,ee,le,!0,pe),{u_texsize_icon:Te,u_texture_icon:1}),lx=(E,o,h)=>({u_matrix:E,u_opacity:o,u_color:h}),Sh=(E,o,h,b,M,j)=>n.extend(function(ee,le,pe,Te){const Ne=pe.imageManager.getPattern(ee.from.toString()),Be=pe.imageManager.getPattern(ee.to.toString()),{width:qe,height:tt}=pe.imageManager.getPixelSize(),Qe=Math.pow(2,Te.tileID.overscaledZ),Je=Te.tileSize*Math.pow(2,pe.transform.tileZoom)/Qe,pt=Je*(Te.tileID.canonical.x+Te.tileID.wrap*Qe),yt=Je*Te.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ne.tl,u_pattern_br_a:Ne.br,u_pattern_tl_b:Be.tl,u_pattern_br_b:Be.br,u_texsize:[qe,tt],u_mix:le.t,u_pattern_size_a:Ne.displaySize,u_pattern_size_b:Be.displaySize,u_scale_a:le.fromScale,u_scale_b:le.toScale,u_tile_units_to_pixels:1/nn(Te,1,pe.transform.tileZoom),u_pixel_coord_upper:[pt>>16,yt>>16],u_pixel_coord_lower:[65535&pt,65535&yt]}}(b,j,h,M),{u_matrix:E,u_opacity:o}),Eh={fillExtrusion:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_lightpos:new n.Uniform3f(E,o.u_lightpos),u_lightintensity:new n.Uniform1f(E,o.u_lightintensity),u_lightcolor:new n.Uniform3f(E,o.u_lightcolor),u_vertical_gradient:new n.Uniform1f(E,o.u_vertical_gradient),u_opacity:new n.Uniform1f(E,o.u_opacity)}),fillExtrusionPattern:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_lightpos:new n.Uniform3f(E,o.u_lightpos),u_lightintensity:new n.Uniform1f(E,o.u_lightintensity),u_lightcolor:new n.Uniform3f(E,o.u_lightcolor),u_vertical_gradient:new n.Uniform1f(E,o.u_vertical_gradient),u_height_factor:new n.Uniform1f(E,o.u_height_factor),u_image:new n.Uniform1i(E,o.u_image),u_texsize:new n.Uniform2f(E,o.u_texsize),u_pixel_coord_upper:new n.Uniform2f(E,o.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(E,o.u_pixel_coord_lower),u_scale:new n.Uniform3f(E,o.u_scale),u_fade:new n.Uniform1f(E,o.u_fade),u_opacity:new n.Uniform1f(E,o.u_opacity)}),fill:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix)}),fillPattern:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_image:new n.Uniform1i(E,o.u_image),u_texsize:new n.Uniform2f(E,o.u_texsize),u_pixel_coord_upper:new n.Uniform2f(E,o.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(E,o.u_pixel_coord_lower),u_scale:new n.Uniform3f(E,o.u_scale),u_fade:new n.Uniform1f(E,o.u_fade)}),fillOutline:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_world:new n.Uniform2f(E,o.u_world)}),fillOutlinePattern:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_world:new n.Uniform2f(E,o.u_world),u_image:new n.Uniform1i(E,o.u_image),u_texsize:new n.Uniform2f(E,o.u_texsize),u_pixel_coord_upper:new n.Uniform2f(E,o.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(E,o.u_pixel_coord_lower),u_scale:new n.Uniform3f(E,o.u_scale),u_fade:new n.Uniform1f(E,o.u_fade)}),circle:(E,o)=>({u_camera_to_center_distance:new n.Uniform1f(E,o.u_camera_to_center_distance),u_scale_with_map:new n.Uniform1i(E,o.u_scale_with_map),u_pitch_with_map:new n.Uniform1i(E,o.u_pitch_with_map),u_extrude_scale:new n.Uniform2f(E,o.u_extrude_scale),u_device_pixel_ratio:new n.Uniform1f(E,o.u_device_pixel_ratio),u_matrix:new n.UniformMatrix4f(E,o.u_matrix)}),collisionBox:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_camera_to_center_distance:new n.Uniform1f(E,o.u_camera_to_center_distance),u_pixels_to_tile_units:new n.Uniform1f(E,o.u_pixels_to_tile_units),u_extrude_scale:new n.Uniform2f(E,o.u_extrude_scale),u_overscale_factor:new n.Uniform1f(E,o.u_overscale_factor)}),collisionCircle:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_inv_matrix:new n.UniformMatrix4f(E,o.u_inv_matrix),u_camera_to_center_distance:new n.Uniform1f(E,o.u_camera_to_center_distance),u_viewport_size:new n.Uniform2f(E,o.u_viewport_size)}),debug:(E,o)=>({u_color:new n.UniformColor(E,o.u_color),u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_overlay:new n.Uniform1i(E,o.u_overlay),u_overlay_scale:new n.Uniform1f(E,o.u_overlay_scale)}),clippingMask:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix)}),heatmap:(E,o)=>({u_extrude_scale:new n.Uniform1f(E,o.u_extrude_scale),u_intensity:new n.Uniform1f(E,o.u_intensity),u_matrix:new n.UniformMatrix4f(E,o.u_matrix)}),heatmapTexture:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_world:new n.Uniform2f(E,o.u_world),u_image:new n.Uniform1i(E,o.u_image),u_color_ramp:new n.Uniform1i(E,o.u_color_ramp),u_opacity:new n.Uniform1f(E,o.u_opacity)}),hillshade:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_image:new n.Uniform1i(E,o.u_image),u_latrange:new n.Uniform2f(E,o.u_latrange),u_light:new n.Uniform2f(E,o.u_light),u_shadow:new n.UniformColor(E,o.u_shadow),u_highlight:new n.UniformColor(E,o.u_highlight),u_accent:new n.UniformColor(E,o.u_accent)}),hillshadePrepare:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_image:new n.Uniform1i(E,o.u_image),u_dimension:new n.Uniform2f(E,o.u_dimension),u_zoom:new n.Uniform1f(E,o.u_zoom),u_unpack:new n.Uniform4f(E,o.u_unpack)}),line:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_ratio:new n.Uniform1f(E,o.u_ratio),u_device_pixel_ratio:new n.Uniform1f(E,o.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(E,o.u_units_to_pixels)}),lineGradient:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_ratio:new n.Uniform1f(E,o.u_ratio),u_device_pixel_ratio:new n.Uniform1f(E,o.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(E,o.u_units_to_pixels),u_image:new n.Uniform1i(E,o.u_image),u_image_height:new n.Uniform1f(E,o.u_image_height)}),linePattern:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_texsize:new n.Uniform2f(E,o.u_texsize),u_ratio:new n.Uniform1f(E,o.u_ratio),u_device_pixel_ratio:new n.Uniform1f(E,o.u_device_pixel_ratio),u_image:new n.Uniform1i(E,o.u_image),u_units_to_pixels:new n.Uniform2f(E,o.u_units_to_pixels),u_scale:new n.Uniform3f(E,o.u_scale),u_fade:new n.Uniform1f(E,o.u_fade)}),lineSDF:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_ratio:new n.Uniform1f(E,o.u_ratio),u_device_pixel_ratio:new n.Uniform1f(E,o.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(E,o.u_units_to_pixels),u_patternscale_a:new n.Uniform2f(E,o.u_patternscale_a),u_patternscale_b:new n.Uniform2f(E,o.u_patternscale_b),u_sdfgamma:new n.Uniform1f(E,o.u_sdfgamma),u_image:new n.Uniform1i(E,o.u_image),u_tex_y_a:new n.Uniform1f(E,o.u_tex_y_a),u_tex_y_b:new n.Uniform1f(E,o.u_tex_y_b),u_mix:new n.Uniform1f(E,o.u_mix)}),raster:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_tl_parent:new n.Uniform2f(E,o.u_tl_parent),u_scale_parent:new n.Uniform1f(E,o.u_scale_parent),u_buffer_scale:new n.Uniform1f(E,o.u_buffer_scale),u_fade_t:new n.Uniform1f(E,o.u_fade_t),u_opacity:new n.Uniform1f(E,o.u_opacity),u_image0:new n.Uniform1i(E,o.u_image0),u_image1:new n.Uniform1i(E,o.u_image1),u_brightness_low:new n.Uniform1f(E,o.u_brightness_low),u_brightness_high:new n.Uniform1f(E,o.u_brightness_high),u_saturation_factor:new n.Uniform1f(E,o.u_saturation_factor),u_contrast_factor:new n.Uniform1f(E,o.u_contrast_factor),u_spin_weights:new n.Uniform3f(E,o.u_spin_weights)}),symbolIcon:(E,o)=>({u_is_size_zoom_constant:new n.Uniform1i(E,o.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(E,o.u_is_size_feature_constant),u_size_t:new n.Uniform1f(E,o.u_size_t),u_size:new n.Uniform1f(E,o.u_size),u_camera_to_center_distance:new n.Uniform1f(E,o.u_camera_to_center_distance),u_pitch:new n.Uniform1f(E,o.u_pitch),u_rotate_symbol:new n.Uniform1i(E,o.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(E,o.u_aspect_ratio),u_fade_change:new n.Uniform1f(E,o.u_fade_change),u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(E,o.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(E,o.u_coord_matrix),u_is_text:new n.Uniform1i(E,o.u_is_text),u_pitch_with_map:new n.Uniform1i(E,o.u_pitch_with_map),u_texsize:new n.Uniform2f(E,o.u_texsize),u_texture:new n.Uniform1i(E,o.u_texture)}),symbolSDF:(E,o)=>({u_is_size_zoom_constant:new n.Uniform1i(E,o.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(E,o.u_is_size_feature_constant),u_size_t:new n.Uniform1f(E,o.u_size_t),u_size:new n.Uniform1f(E,o.u_size),u_camera_to_center_distance:new n.Uniform1f(E,o.u_camera_to_center_distance),u_pitch:new n.Uniform1f(E,o.u_pitch),u_rotate_symbol:new n.Uniform1i(E,o.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(E,o.u_aspect_ratio),u_fade_change:new n.Uniform1f(E,o.u_fade_change),u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(E,o.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(E,o.u_coord_matrix),u_is_text:new n.Uniform1i(E,o.u_is_text),u_pitch_with_map:new n.Uniform1i(E,o.u_pitch_with_map),u_texsize:new n.Uniform2f(E,o.u_texsize),u_texture:new n.Uniform1i(E,o.u_texture),u_gamma_scale:new n.Uniform1f(E,o.u_gamma_scale),u_device_pixel_ratio:new n.Uniform1f(E,o.u_device_pixel_ratio),u_is_halo:new n.Uniform1i(E,o.u_is_halo)}),symbolTextAndIcon:(E,o)=>({u_is_size_zoom_constant:new n.Uniform1i(E,o.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(E,o.u_is_size_feature_constant),u_size_t:new n.Uniform1f(E,o.u_size_t),u_size:new n.Uniform1f(E,o.u_size),u_camera_to_center_distance:new n.Uniform1f(E,o.u_camera_to_center_distance),u_pitch:new n.Uniform1f(E,o.u_pitch),u_rotate_symbol:new n.Uniform1i(E,o.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(E,o.u_aspect_ratio),u_fade_change:new n.Uniform1f(E,o.u_fade_change),u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(E,o.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(E,o.u_coord_matrix),u_is_text:new n.Uniform1i(E,o.u_is_text),u_pitch_with_map:new n.Uniform1i(E,o.u_pitch_with_map),u_texsize:new n.Uniform2f(E,o.u_texsize),u_texsize_icon:new n.Uniform2f(E,o.u_texsize_icon),u_texture:new n.Uniform1i(E,o.u_texture),u_texture_icon:new n.Uniform1i(E,o.u_texture_icon),u_gamma_scale:new n.Uniform1f(E,o.u_gamma_scale),u_device_pixel_ratio:new n.Uniform1f(E,o.u_device_pixel_ratio),u_is_halo:new n.Uniform1i(E,o.u_is_halo)}),background:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_opacity:new n.Uniform1f(E,o.u_opacity),u_color:new n.UniformColor(E,o.u_color)}),backgroundPattern:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_opacity:new n.Uniform1f(E,o.u_opacity),u_image:new n.Uniform1i(E,o.u_image),u_pattern_tl_a:new n.Uniform2f(E,o.u_pattern_tl_a),u_pattern_br_a:new n.Uniform2f(E,o.u_pattern_br_a),u_pattern_tl_b:new n.Uniform2f(E,o.u_pattern_tl_b),u_pattern_br_b:new n.Uniform2f(E,o.u_pattern_br_b),u_texsize:new n.Uniform2f(E,o.u_texsize),u_mix:new n.Uniform1f(E,o.u_mix),u_pattern_size_a:new n.Uniform2f(E,o.u_pattern_size_a),u_pattern_size_b:new n.Uniform2f(E,o.u_pattern_size_b),u_scale_a:new n.Uniform1f(E,o.u_scale_a),u_scale_b:new n.Uniform1f(E,o.u_scale_b),u_pixel_coord_upper:new n.Uniform2f(E,o.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(E,o.u_pixel_coord_lower),u_tile_units_to_pixels:new n.Uniform1f(E,o.u_tile_units_to_pixels)}),terrain:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_texture:new n.Uniform1i(E,o.u_texture)}),terrainDepth:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix)}),terrainCoords:(E,o)=>({u_matrix:new n.UniformMatrix4f(E,o.u_matrix),u_texture:new n.Uniform1i(E,o.u_texture),u_terrain_coords_id:new n.Uniform1f(E,o.u_terrain_coords_id)})};class kh{constructor(o,h,b){this.context=o;const M=o.gl;this.buffer=M.createBuffer(),this.dynamicDraw=!!b,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),M.bufferData(M.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ah={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Qf{constructor(o,h,b,M){this.length=h.length,this.attributes=b,this.itemSize=h.bytesPerElement,this.dynamicDraw=M,this.context=o;const j=o.gl;this.buffer=j.createBuffer(),o.bindVertexBuffer.set(this.buffer),j.bufferData(j.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?j.DYNAMIC_DRAW:j.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){if(o.length!==this.length)throw new Error(`Length of new data is ${o.length}, which doesn't match current length of ${this.length}`);const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,h){for(let b=0;b<this.attributes.length;b++){const M=h.attributes[this.attributes[b].name];M!==void 0&&o.enableVertexAttribArray(M)}}setVertexAttribPointers(o,h,b){for(let M=0;M<this.attributes.length;M++){const j=this.attributes[M],ee=h.attributes[j.name];ee!==void 0&&o.vertexAttribPointer(ee,j.components,o[Ah[j.type]],!1,this.itemSize,j.offset+this.itemSize*(b||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class In{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class cx extends In{getDefault(){return n.Color.transparent}set(o){const h=this.current;(o.r!==h.r||o.g!==h.g||o.b!==h.b||o.a!==h.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Lc extends In{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class zc extends In{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class Jf extends In{getDefault(){return[!0,!0,!0,!0]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||o[3]!==h[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Ks extends In{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class Mh extends In{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class Yu extends In{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const h=this.current;(o.func!==h.func||o.ref!==h.ref||o.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class Zu extends In{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class Ph extends In{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=o,this.dirty=!1}}class Ih extends In{getDefault(){return[0,1]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class Xu extends In{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=o,this.dirty=!1}}class Dh extends In{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class Rh extends In{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.BLEND):h.disable(h.BLEND),this.current=o,this.dirty=!1}}class Ku extends In{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class em extends In{getDefault(){return n.Color.transparent}set(o){const h=this.current;(o.r!==h.r||o.g!==h.g||o.b!==h.b||o.a!==h.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class tm extends In{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class Rl extends In{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;o?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=o,this.dirty=!1}}class ux extends In{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class dx extends In{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class hx extends In{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class px extends In{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class fx extends In{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||o[3]!==h[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class mx extends In{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class Lh extends In{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Qu extends In{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class zh extends In{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Nh extends In{getDefault(){return null}set(o){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Ll extends In{constructor(o){super(o),this.vao=o.extVertexArrayObject}getDefault(){return null}set(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)}}class im extends In{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class nm extends In{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Oh extends In{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class Co extends In{constructor(o,h){super(o),this.context=o,this.parent=h}getDefault(){return null}}class rm extends Co{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class zl extends Co{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Nl{constructor(o,h,b,M){this.context=o,this.width=h,this.height=b;const j=o.gl,ee=this.framebuffer=j.createFramebuffer();if(this.colorAttachment=new rm(o,ee),M&&(this.depthAttachment=new zl(o,ee)),j.checkFramebufferStatus(j.FRAMEBUFFER)!==j.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const o=this.context.gl,h=this.colorAttachment.get();if(h&&o.deleteTexture(h),this.depthAttachment){const b=this.depthAttachment.get();b&&o.deleteRenderbuffer(b)}o.deleteFramebuffer(this.framebuffer)}}class vr{constructor(o,h,b){this.blendFunction=o,this.blendColor=h,this.mask=b}}vr.Replace=[1,0],vr.disabled=new vr(vr.Replace,n.Color.transparent,[!1,!1,!1,!1]),vr.unblended=new vr(vr.Replace,n.Color.transparent,[!0,!0,!0,!0]),vr.alphaBlended=new vr([1,771],n.Color.transparent,[!0,!0,!0,!0]);class jh{constructor(o){this.gl=o,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new cx(this),this.clearDepth=new Lc(this),this.clearStencil=new zc(this),this.colorMask=new Jf(this),this.depthMask=new Ks(this),this.stencilMask=new Mh(this),this.stencilFunc=new Yu(this),this.stencilOp=new Zu(this),this.stencilTest=new Ph(this),this.depthRange=new Ih(this),this.depthTest=new Xu(this),this.depthFunc=new Dh(this),this.blend=new Rh(this),this.blendFunc=new Ku(this),this.blendColor=new em(this),this.blendEquation=new tm(this),this.cullFace=new Rl(this),this.cullFaceSide=new ux(this),this.frontFace=new dx(this),this.program=new hx(this),this.activeTexture=new px(this),this.viewport=new fx(this),this.bindFramebuffer=new mx(this),this.bindRenderbuffer=new Lh(this),this.bindTexture=new Qu(this),this.bindVertexBuffer=new zh(this),this.bindElementBuffer=new Nh(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ll(this),this.pixelStoreUnpack=new im(this),this.pixelStoreUnpackPremultiplyAlpha=new nm(this),this.pixelStoreUnpackFlipY=new Oh(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=o.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(o.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,h){return new kh(this,o,h)}createVertexBuffer(o,h,b){return new Qf(this,o,h,b)}createRenderbuffer(o,h,b){const M=this.gl,j=M.createRenderbuffer();return this.bindRenderbuffer.set(j),M.renderbufferStorage(M.RENDERBUFFER,o,h,b),this.bindRenderbuffer.set(null),j}createFramebuffer(o,h,b){return new Nl(this,o,h,b)}clear({color:o,depth:h}){const b=this.gl;let M=0;o&&(M|=b.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(M|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),b.clear(M)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){v(o.blendFunction,vr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ci{constructor(o,h,b){this.func=o,this.mask=h,this.range=b}}Ci.ReadOnly=!1,Ci.ReadWrite=!0,Ci.disabled=new Ci(519,Ci.ReadOnly,[0,1]);const Ol=7680;class pr{constructor(o,h,b,M,j,ee){this.test=o,this.ref=h,this.mask=b,this.fail=M,this.depthFail=j,this.pass=ee}}pr.disabled=new pr({func:519,mask:0},0,0,Ol,Ol,Ol);class tr{constructor(o,h,b){this.enable=o,this.mode=h,this.frontFace=b}}let To;function sm(E,o,h,b,M,j,ee){const le=E.context,pe=le.gl,Te=E.useProgram("collisionBox"),Ne=[];let Be=0,qe=0;for(let at=0;at<b.length;at++){const At=b[at],Tt=o.getTile(At),Nt=Tt.getBucket(h);if(!Nt)continue;let Ot=At.posMatrix;M[0]===0&&M[1]===0||(Ot=E.translatePosMatrix(At.posMatrix,Tt,M,j));const Ut=ee?Nt.textCollisionBox:Nt.iconCollisionBox,Lt=Nt.collisionCircleArray;if(Lt.length>0){const ai=n.create(),Zt=Ot;n.mul(ai,Nt.placementInvProjMatrix,E.transform.glCoordMatrix),n.mul(ai,ai,Nt.placementViewportMatrix),Ne.push({circleArray:Lt,circleOffset:qe,transform:Zt,invTransform:ai,coord:At}),Be+=Lt.length/4,qe=Be}Ut&&Te.draw(le,pe.LINES,Ci.disabled,pr.disabled,E.colorModeForRenderPass(),tr.disabled,Vu(Ot,E.transform,Tt),E.style.terrain&&E.style.terrain.getTerrainData(At),h.id,Ut.layoutVertexBuffer,Ut.indexBuffer,Ut.segments,null,E.transform.zoom,null,null,Ut.collisionVertexBuffer)}if(!ee||!Ne.length)return;const tt=E.useProgram("collisionCircle"),Qe=new n.CollisionCircleLayoutArray;Qe.resize(4*Be),Qe._trim();let Je=0;for(const at of Ne)for(let At=0;At<at.circleArray.length/4;At++){const Tt=4*At,Nt=at.circleArray[Tt+0],Ot=at.circleArray[Tt+1],Ut=at.circleArray[Tt+2],Lt=at.circleArray[Tt+3];Qe.emplace(Je++,Nt,Ot,Ut,Lt,0),Qe.emplace(Je++,Nt,Ot,Ut,Lt,1),Qe.emplace(Je++,Nt,Ot,Ut,Lt,2),Qe.emplace(Je++,Nt,Ot,Ut,Lt,3)}(!To||To.length<2*Be)&&(To=function(at){const At=2*at,Tt=new n.QuadTriangleArray;Tt.resize(At),Tt._trim();for(let Nt=0;Nt<At;Nt++){const Ot=6*Nt;Tt.uint16[Ot+0]=4*Nt+0,Tt.uint16[Ot+1]=4*Nt+1,Tt.uint16[Ot+2]=4*Nt+2,Tt.uint16[Ot+3]=4*Nt+2,Tt.uint16[Ot+4]=4*Nt+3,Tt.uint16[Ot+5]=4*Nt+0}return Tt}(Be));const pt=le.createIndexBuffer(To,!0),yt=le.createVertexBuffer(Qe,n.collisionCircleLayout.members,!0);for(const at of Ne){const At={u_matrix:at.transform,u_inv_matrix:at.invTransform,u_camera_to_center_distance:(_t=E.transform).cameraToCenterDistance,u_viewport_size:[_t.width,_t.height]};tt.draw(le,pe.TRIANGLES,Ci.disabled,pr.disabled,E.colorModeForRenderPass(),tr.disabled,At,E.style.terrain&&E.style.terrain.getTerrainData(at.coord),h.id,yt,pt,n.SegmentVector.simpleSegment(0,2*at.circleOffset,at.circleArray.length,at.circleArray.length/2),null,E.transform.zoom,null,null,null)}var _t;yt.destroy(),pt.destroy()}tr.disabled=new tr(!1,1029,2305),tr.backCCW=new tr(!0,1029,2305);const gx=n.identity(new Float32Array(16));function am(E,o,h,b,M,j){const{horizontalAlign:ee,verticalAlign:le}=n.getAnchorAlignment(E),pe=-(ee-.5)*o,Te=-(le-.5)*h,Ne=n.evaluateVariableOffset(E,b);return new n.pointGeometry((pe/M+Ne[0])*j,(Te/M+Ne[1])*j)}function yx(E,o,h,b,M,j,ee,le,pe,Te,Ne){const Be=E.text.placedSymbolArray,qe=E.text.dynamicLayoutVertexArray,tt=E.icon.dynamicLayoutVertexArray,Qe={};qe.clear();for(let Je=0;Je<Be.length;Je++){const pt=Be.get(Je),yt=E.allowVerticalPlacement&&!pt.placedOrientation,_t=pt.hidden||!pt.crossTileID||yt?null:b[pt.crossTileID];if(_t){const at=new n.pointGeometry(pt.anchorX,pt.anchorY),At=ht(at,h?ee:j,Ne),Tt=gt(M.cameraToCenterDistance,At.signedDistanceFromCamera);let Nt=n.evaluateSizeForFeature(E.textSizeData,pe,pt)*Tt/n.ONE_EM;h&&(Nt*=E.tilePixelRatio/le);const{width:Ot,height:Ut,anchor:Lt,textOffset:ai,textBoxScale:Zt}=_t,li=am(Lt,Ot,Ut,ai,Zt,Nt),Xi=h?ht(at.add(li),j,Ne).point:At.point.add(o?li.rotate(-M.angle):li),un=E.allowVerticalPlacement&&pt.placedOrientation===n.WritingMode.vertical?Math.PI/2:0;for(let Ii=0;Ii<pt.numGlyphs;Ii++)n.addDynamicAttributes(qe,Xi,un);Te&&pt.associatedIconIndex>=0&&(Qe[pt.associatedIconIndex]={shiftedAnchor:Xi,angle:un})}else cn(pt.numGlyphs,qe)}if(Te){tt.clear();const Je=E.icon.placedSymbolArray;for(let pt=0;pt<Je.length;pt++){const yt=Je.get(pt);if(yt.hidden)cn(yt.numGlyphs,tt);else{const _t=Qe[pt];if(_t)for(let at=0;at<yt.numGlyphs;at++)n.addDynamicAttributes(tt,_t.shiftedAnchor,_t.angle);else cn(yt.numGlyphs,tt)}}E.icon.dynamicLayoutVertexBuffer.updateData(tt)}E.text.dynamicLayoutVertexBuffer.updateData(qe)}function Fh(E,o,h){return h.iconsInText&&o?"symbolTextAndIcon":E?"symbolSDF":"symbolIcon"}function Nc(E,o,h,b,M,j,ee,le,pe,Te,Ne,Be){const qe=E.context,tt=qe.gl,Qe=E.transform,Je=le==="map",pt=pe==="map",yt=le!=="viewport"&&h.layout.get("symbol-placement")!=="point",_t=Je&&!pt&&!yt,at=!h.layout.get("symbol-sort-key").isConstant();let At=!1;const Tt=E.depthModeForSublayer(0,Ci.ReadOnly),Nt=h.layout.get("text-variable-anchor"),Ot=[];for(const Ut of b){const Lt=o.getTile(Ut),ai=Lt.getBucket(h);if(!ai)continue;const Zt=M?ai.text:ai.icon;if(!Zt||!Zt.segments.get().length)continue;const li=Zt.programConfigurations.get(h.id),Xi=M||ai.sdfIcons,un=M?ai.textSizeData:ai.iconSizeData,Ii=pt||Qe.pitch!==0,Bn=E.useProgram(Fh(Xi,M,ai),li),$n=n.evaluateSizeForZoom(un,Qe.zoom),_n=E.style.terrain&&E.style.terrain.getTerrainData(Ut);let Cn,En,Js,Ya,Ma=[0,0],Pa=null;if(M){if(En=Lt.glyphAtlasTexture,Js=tt.LINEAR,Cn=Lt.glyphAtlasTexture.size,ai.iconsInText){Ma=Lt.imageAtlasTexture.size,Pa=Lt.imageAtlasTexture;const ba=un.kind==="composite"||un.kind==="camera";Ya=Ii||E.options.rotating||E.options.zooming||ba?tt.LINEAR:tt.NEAREST}}else{const ba=h.layout.get("icon-size").constantOr(0)!==1||ai.iconsNeedLinear;En=Lt.imageAtlasTexture,Js=Xi||E.options.rotating||E.options.zooming||ba||Ii?tt.LINEAR:tt.NEAREST,Cn=Lt.imageAtlasTexture.size}const ol=nn(Lt,1,E.transform.zoom),ss=et(Ut.posMatrix,pt,Je,E.transform,ol),Ia=nt(Ut.posMatrix,pt,Je,E.transform,ol),ll=Nt&&ai.hasTextData(),pd=h.layout.get("icon-text-fit")!=="none"&&ll&&ai.hasIconData();if(yt){const ba=E.style.terrain?(Vl,fd)=>E.style.terrain.getElevation(Ut,Vl,fd):null,Ul=h.layout.get("text-rotation-alignment")==="map";Rt(ai,Ut.posMatrix,E,M,ss,Ia,pt,Te,Ul,ba)}const kn=E.translatePosMatrix(Ut.posMatrix,Lt,j,ee),nr=yt||M&&Nt||pd?gx:ss,Mn=E.translatePosMatrix(Ia,Lt,j,ee,!0),Nr=Xi&&h.paint.get(M?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let $s;$s=Xi?ai.iconsInText?ox(un.kind,$n,_t,pt,E,kn,nr,Mn,Cn,Ma):Th(un.kind,$n,_t,pt,E,kn,nr,Mn,M,Cn):qu(un.kind,$n,_t,pt,E,kn,nr,Mn,M,Cn);const lr={program:Bn,buffers:Zt,uniformValues:$s,atlasTexture:En,atlasTextureIcon:Pa,atlasInterpolation:Js,atlasInterpolationIcon:Ya,isSDF:Xi,hasHalo:Nr};if(at&&ai.canOverlap){At=!0;const ba=Zt.segments.get();for(const Ul of ba)Ot.push({segments:new n.SegmentVector([Ul]),sortKey:Ul.sortKey,state:lr,terrainData:_n})}else Ot.push({segments:Zt.segments,sortKey:0,state:lr,terrainData:_n})}At&&Ot.sort((Ut,Lt)=>Ut.sortKey-Lt.sortKey);for(const Ut of Ot){const Lt=Ut.state;if(qe.activeTexture.set(tt.TEXTURE0),Lt.atlasTexture.bind(Lt.atlasInterpolation,tt.CLAMP_TO_EDGE),Lt.atlasTextureIcon&&(qe.activeTexture.set(tt.TEXTURE1),Lt.atlasTextureIcon&&Lt.atlasTextureIcon.bind(Lt.atlasInterpolationIcon,tt.CLAMP_TO_EDGE)),Lt.isSDF){const ai=Lt.uniformValues;Lt.hasHalo&&(ai.u_is_halo=1,Oc(Lt.buffers,Ut.segments,h,E,Lt.program,Tt,Ne,Be,ai,Ut.terrainData)),ai.u_is_halo=0}Oc(Lt.buffers,Ut.segments,h,E,Lt.program,Tt,Ne,Be,Lt.uniformValues,Ut.terrainData)}}function Oc(E,o,h,b,M,j,ee,le,pe,Te){const Ne=b.context;M.draw(Ne,Ne.gl.TRIANGLES,j,ee,le,tr.disabled,pe,Te,h.id,E.layoutVertexBuffer,E.indexBuffer,o,h.paint,b.transform.zoom,E.programConfigurations.get(h.id),E.dynamicLayoutVertexBuffer,E.opacityVertexBuffer)}function Ju(E,o,h,b,M,j,ee){const le=E.context.gl,pe=h.paint.get("fill-pattern"),Te=pe&&pe.constantOr(1),Ne=h.getCrossfadeParameters();let Be,qe,tt,Qe,Je;ee?(qe=Te&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Be=le.LINES):(qe=Te?"fillPattern":"fill",Be=le.TRIANGLES);for(const pt of b){const yt=o.getTile(pt);if(Te&&!yt.patternsLoaded())continue;const _t=yt.getBucket(h);if(!_t)continue;const at=_t.programConfigurations.get(h.id),At=E.useProgram(qe,at),Tt=E.style.terrain&&E.style.terrain.getTerrainData(pt);Te&&(E.context.activeTexture.set(le.TEXTURE0),yt.imageAtlasTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE),at.updatePaintBuffers(Ne));const Nt=pe.constantOr(null);if(Nt&&yt.imageAtlas){const Lt=yt.imageAtlas,ai=Lt.patternPositions[Nt.to.toString()],Zt=Lt.patternPositions[Nt.from.toString()];ai&&Zt&&at.setConstantPatternPositions(ai,Zt)}const Ot=Tt?pt:null,Ut=E.translatePosMatrix(Ot?Ot.posMatrix:pt.posMatrix,yt,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(ee){Qe=_t.indexBuffer2,Je=_t.segments2;const Lt=[le.drawingBufferWidth,le.drawingBufferHeight];tt=qe==="fillOutlinePattern"&&Te?Zf(Ut,E,Ne,yt,Lt):Yf(Ut,Lt)}else Qe=_t.indexBuffer,Je=_t.segments,tt=Te?wh(Ut,E,Ne,yt):_h(Ut);At.draw(E.context,Be,M,E.stencilModeForClipping(pt),j,tr.disabled,tt,Tt,h.id,_t.layoutVertexBuffer,Qe,Je,h.paint,E.transform.zoom,at)}}function jc(E,o,h,b,M,j,ee){const le=E.context,pe=le.gl,Te=h.paint.get("fill-extrusion-pattern"),Ne=Te.constantOr(1),Be=h.getCrossfadeParameters(),qe=h.paint.get("fill-extrusion-opacity");for(const tt of b){const Qe=o.getTile(tt),Je=Qe.getBucket(h);if(!Je)continue;const pt=E.style.terrain&&E.style.terrain.getTerrainData(tt),yt=Je.programConfigurations.get(h.id),_t=E.useProgram(Ne?"fillExtrusionPattern":"fillExtrusion",yt);Ne&&(E.context.activeTexture.set(pe.TEXTURE0),Qe.imageAtlasTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),yt.updatePaintBuffers(Be));const at=Te.constantOr(null);if(at&&Qe.imageAtlas){const Ot=Qe.imageAtlas,Ut=Ot.patternPositions[at.to.toString()],Lt=Ot.patternPositions[at.from.toString()];Ut&&Lt&&yt.setConstantPatternPositions(Ut,Lt)}const At=E.translatePosMatrix(tt.posMatrix,Qe,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Tt=h.paint.get("fill-extrusion-vertical-gradient"),Nt=Ne?bh(At,E,Tt,qe,tt,Be,Qe):qf(At,E,Tt,qe);_t.draw(le,le.gl.TRIANGLES,M,j,ee,tr.backCCW,Nt,pt,h.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,h.paint,E.transform.zoom,yt,E.style.terrain&&Je.centroidVertexBuffer)}}function om(E,o,h,b,M,j,ee){const le=E.context,pe=le.gl,Te=h.fbo;if(!Te)return;const Ne=E.useProgram("hillshade"),Be=E.style.terrain&&E.style.terrain.getTerrainData(o);le.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,Te.colorAttachment.get()),Ne.draw(le,pe.TRIANGLES,M,j,ee,tr.disabled,((qe,tt,Qe,Je)=>{const pt=Qe.paint.get("hillshade-shadow-color"),yt=Qe.paint.get("hillshade-highlight-color"),_t=Qe.paint.get("hillshade-accent-color");let at=Qe.paint.get("hillshade-illumination-direction")*(Math.PI/180);Qe.paint.get("hillshade-illumination-anchor")==="viewport"&&(at-=qe.transform.angle);const At=!qe.options.moving;return{u_matrix:Je?Je.posMatrix:qe.transform.calculatePosMatrix(tt.tileID.toUnwrapped(),At),u_image:0,u_latrange:Hu(0,tt.tileID),u_light:[Qe.paint.get("hillshade-exaggeration"),at],u_shadow:pt,u_highlight:yt,u_accent:_t}})(E,h,b,Be?o:null),Be,b.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}function ed(E,o,h,b,M,j){const ee=E.context,le=ee.gl,pe=o.dem;if(pe&&pe.data){const Te=pe.dim,Ne=pe.stride,Be=pe.getPixels();if(ee.activeTexture.set(le.TEXTURE1),ee.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||E.getTileTexture(Ne),o.demTexture){const tt=o.demTexture;tt.update(Be,{premultiply:!1}),tt.bind(le.NEAREST,le.CLAMP_TO_EDGE)}else o.demTexture=new w(ee,Be,le.RGBA,{premultiply:!1}),o.demTexture.bind(le.NEAREST,le.CLAMP_TO_EDGE);ee.activeTexture.set(le.TEXTURE0);let qe=o.fbo;if(!qe){const tt=new w(ee,{width:Te,height:Te,data:null},le.RGBA);tt.bind(le.LINEAR,le.CLAMP_TO_EDGE),qe=o.fbo=ee.createFramebuffer(Te,Te,!0),qe.colorAttachment.set(tt.texture)}ee.bindFramebuffer.set(qe.framebuffer),ee.viewport.set([0,0,Te,Te]),E.useProgram("hillshadePrepare").draw(ee,le.TRIANGLES,b,M,j,tr.disabled,((tt,Qe)=>{const Je=Qe.stride,pt=n.create();return n.ortho(pt,0,n.EXTENT,-n.EXTENT,0,0,1),n.translate(pt,pt,[0,-n.EXTENT,0]),{u_matrix:pt,u_image:1,u_dimension:[Je,Je],u_zoom:tt.overscaledZ,u_unpack:Qe.getUnpackVector()}})(o.tileID,pe),null,h.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments),o.needsHillshadePrepare=!1}}function td(E,o,h,b,M,j){const ee=b.paint.get("raster-fade-duration");if(!j&&ee>0){const le=n.exported.now(),pe=(le-E.timeAdded)/ee,Te=o?(le-o.timeAdded)/ee:-1,Ne=h.getSource(),Be=M.coveringZoomLevel({tileSize:Ne.tileSize,roundZoom:Ne.roundZoom}),qe=!o||Math.abs(o.tileID.overscaledZ-Be)>Math.abs(E.tileID.overscaledZ-Be),tt=qe&&E.refreshedUponExpiration?1:n.clamp(qe?pe:1-Te,0,1);return E.refreshedUponExpiration&&pe>=1&&(E.refreshedUponExpiration=!1),o?{opacity:1,mix:1-tt}:{opacity:tt,mix:0}}return{opacity:1,mix:0}}const Aa=new n.Color(1,0,0,1),lm=new n.Color(0,1,0,1),Bh=new n.Color(0,0,1,1),cm=new n.Color(1,0,1,1),jl=new n.Color(0,1,1,1);function Fc(E,o,h,b){nd(E,0,o+h/2,E.transform.width,h,b)}function id(E,o,h,b){nd(E,o-h/2,0,h,E.transform.height,b)}function nd(E,o,h,b,M,j){const ee=E.context,le=ee.gl;le.enable(le.SCISSOR_TEST),le.scissor(o*E.pixelRatio,h*E.pixelRatio,b*E.pixelRatio,M*E.pixelRatio),ee.clear({color:j}),le.disable(le.SCISSOR_TEST)}function $h(E,o,h){const b=E.context,M=b.gl,j=h.posMatrix,ee=E.useProgram("debug"),le=Ci.disabled,pe=pr.disabled,Te=E.colorModeForRenderPass(),Ne="$debug",Be=E.style.terrain&&E.style.terrain.getTerrainData(h);b.activeTexture.set(M.TEXTURE0),E.emptyTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE);const qe=o.getTileByID(h.key).latestRawTileData,tt=Math.floor((qe&&qe.byteLength||0)/1024),Qe=o.getTile(h).tileSize,Je=512/Math.min(Qe,512)*(h.overscaledZ/E.transform.zoom)*.5;let pt=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(pt+=` => ${h.overscaledZ}`),function(yt,_t){yt.initDebugOverlayCanvas();const at=yt.debugOverlayCanvas,At=yt.context.gl,Tt=yt.debugOverlayCanvas.getContext("2d");Tt.clearRect(0,0,at.width,at.height),Tt.shadowColor="white",Tt.shadowBlur=2,Tt.lineWidth=1.5,Tt.strokeStyle="white",Tt.textBaseline="top",Tt.font="bold 36px Open Sans, sans-serif",Tt.fillText(_t,5,5),Tt.strokeText(_t,5,5),yt.debugOverlayTexture.update(at),yt.debugOverlayTexture.bind(At.LINEAR,At.CLAMP_TO_EDGE)}(E,`${pt} ${tt}kB`),ee.draw(b,M.TRIANGLES,le,pe,vr.alphaBlended,tr.disabled,Dl(j,n.Color.transparent,Je),null,Ne,E.debugBuffer,E.quadTriangleIndexBuffer,E.debugSegments),ee.draw(b,M.LINE_STRIP,le,pe,Te,tr.disabled,Dl(j,n.Color.red),Be,Ne,E.debugBuffer,E.tileBorderIndexBuffer,E.debugSegments)}function um(E,o,h){const b=E.context,M=b.gl,j=E.colorModeForRenderPass(),ee=new Ci(M.LEQUAL,Ci.ReadWrite,E.depthRangeFor3D),le=E.useProgram("terrain"),pe=o.getTerrainMesh(),Te=o.getTerrainData(h.tileID);b.bindFramebuffer.set(null),b.viewport.set([0,0,E.width,E.height]),b.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,o.getRTTFramebuffer().colorAttachment.get());const Ne=E.transform.calculatePosMatrix(h.tileID.toUnwrapped());le.draw(b,M.TRIANGLES,ee,pr.disabled,j,tr.backCCW,{u_matrix:Ne,u_texture:0},Te,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments)}function Uh(E,o,h,b){const M=E.context,j=h.tileSize*o.qualityFactor;h.textures[b]||(h.textures[b]=E.getTileTexture(j)||new w(M,{width:j,height:j,data:null},M.gl.RGBA),h.textures[b].bind(M.gl.LINEAR,M.gl.CLAMP_TO_EDGE),b===0&&o.sourceCache.renderHistory.unshift(h.tileID.key));const ee=o.getRTTFramebuffer();ee.colorAttachment.set(h.textures[b].texture),M.bindFramebuffer.set(ee.framebuffer),M.viewport.set([0,0,j,j])}class rd{constructor(o){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=o,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=o.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const o=this.painter.style,h=o.terrain;for(const b in o.sourceCaches){this._coordsDescendingInv[b]={};const M=o.sourceCaches[b].getVisibleCoordinates();for(const j of M){const ee=h.sourceCache.getTerrainCoords(j);for(const le in ee)this._coordsDescendingInv[b][le]||(this._coordsDescendingInv[b][le]=[]),this._coordsDescendingInv[b][le].push(ee[le])}}for(const b of o._order){const M=o._layers[b],j=M.source;if(this._renderToTexture[M.type]&&!this._coordsDescendingInvStr[j]){this._coordsDescendingInvStr[j]={};for(const ee in this._coordsDescendingInv[j])this._coordsDescendingInvStr[j][ee]=this._coordsDescendingInv[j][ee].map(le=>le.key).sort().join()}}return this._renderableTiles.forEach(b=>{for(const M in this._coordsDescendingInvStr){const j=this._coordsDescendingInvStr[M][b.tileID.key];j&&j!==b.textureCoords[M]&&b.clearTextures(this.painter),h.needsRerender(M,b.tileID)&&b.clearTextures(this.painter)}this._rerender[b.tileID.key]=!b.textures.length}),h.clearRerenderCache(),h.sourceCache.removeOutdated(this.painter),this}renderLayer(o){const h=o.type,b=this.painter,M=b.style._order,j=b.currentLayer,ee=j+1===M.length;if(this._renderToTexture[h]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=h,this._stacks[this._stacks.length-1].push(M[j]),!ee))return!0;if(this._renderToTexture[this._prevType]||h==="hillshade"||this._renderToTexture[h]&&ee){this._prevType=h;const le=this._stacks.length-1,pe=this._stacks[le]||[];for(const Te of this._renderableTiles){if(Uh(b,b.style.terrain,Te,le),this._rerender[Te.tileID.key]){b.context.clear({color:n.Color.transparent});for(let Ne=0;Ne<pe.length;Ne++){const Be=b.style._layers[pe[Ne]],qe=Be.source?this._coordsDescendingInv[Be.source][Te.tileID.key]:[Te.tileID];b._renderTileClippingMasks(Be,qe),b.renderLayer(b,b.style.sourceCaches[Be.source],Be,qe),Be.source&&(Te.textureCoords[Be.source]=this._coordsDescendingInvStr[Be.source][Te.tileID.key])}}um(b,b.style.terrain,Te)}if(h==="hillshade"){this._stacks.push([M[j]]);for(const Te of this._renderableTiles){const Ne=this._coordsDescendingInv[o.source][Te.tileID.key];Uh(b,b.style.terrain,Te,this._stacks.length-1),b.context.clear({color:n.Color.transparent}),b._renderTileClippingMasks(o,Ne),b.renderLayer(b,b.style.sourceCaches[o.source],o,Ne),um(b,b.style.terrain,Te)}return!0}return this._renderToTexture[h]}return!1}}const sd={symbol:function(E,o,h,b,M){if(E.renderPass!=="translucent")return;const j=pr.disabled,ee=E.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(le,pe,Te,Ne,Be,qe,tt){const Qe=pe.transform,Je=Be==="map",pt=qe==="map";for(const yt of le){const _t=Ne.getTile(yt),at=_t.getBucket(Te);if(!at||!at.text||!at.text.segments.get().length)continue;const At=n.evaluateSizeForZoom(at.textSizeData,Qe.zoom),Tt=nn(_t,1,pe.transform.zoom),Nt=et(yt.posMatrix,pt,Je,pe.transform,Tt),Ot=Te.layout.get("icon-text-fit")!=="none"&&at.hasIconData();if(At){const Ut=Math.pow(2,Qe.zoom-_t.tileID.overscaledZ);yx(at,Je,pt,tt,Qe,Nt,yt.posMatrix,Ut,At,Ot,pe.style.terrain?(Lt,ai)=>pe.style.terrain.getElevation(yt,Lt,ai):null)}}}(b,E,h,o,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),M),h.paint.get("icon-opacity").constantOr(1)!==0&&Nc(E,o,h,b,!1,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),h.layout.get("icon-rotation-alignment"),h.layout.get("icon-pitch-alignment"),h.layout.get("icon-keep-upright"),j,ee),h.paint.get("text-opacity").constantOr(1)!==0&&Nc(E,o,h,b,!0,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),h.layout.get("text-keep-upright"),j,ee),o.map.showCollisionBoxes&&(sm(E,o,h,b,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),sm(E,o,h,b,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))},circle:function(E,o,h,b){if(E.renderPass!=="translucent")return;const M=h.paint.get("circle-opacity"),j=h.paint.get("circle-stroke-width"),ee=h.paint.get("circle-stroke-opacity"),le=!h.layout.get("circle-sort-key").isConstant();if(M.constantOr(1)===0&&(j.constantOr(1)===0||ee.constantOr(1)===0))return;const pe=E.context,Te=pe.gl,Ne=E.depthModeForSublayer(0,Ci.ReadOnly),Be=pr.disabled,qe=E.colorModeForRenderPass(),tt=[];for(let Qe=0;Qe<b.length;Qe++){const Je=b[Qe],pt=o.getTile(Je),yt=pt.getBucket(h);if(!yt)continue;const _t=yt.programConfigurations.get(h.id),at=E.useProgram("circle",_t),At=yt.layoutVertexBuffer,Tt=yt.indexBuffer,Nt=E.style.terrain&&E.style.terrain.getTerrainData(Je),Ot={programConfiguration:_t,program:at,layoutVertexBuffer:At,indexBuffer:Tt,uniformValues:el(E,Je,pt,h),terrainData:Nt};if(le){const Ut=yt.segments.get();for(const Lt of Ut)tt.push({segments:new n.SegmentVector([Lt]),sortKey:Lt.sortKey,state:Ot})}else tt.push({segments:yt.segments,sortKey:0,state:Ot})}le&&tt.sort((Qe,Je)=>Qe.sortKey-Je.sortKey);for(const Qe of tt){const{programConfiguration:Je,program:pt,layoutVertexBuffer:yt,indexBuffer:_t,uniformValues:at,terrainData:At}=Qe.state;pt.draw(pe,Te.TRIANGLES,Ne,Be,qe,tr.disabled,at,At,h.id,yt,_t,Qe.segments,h.paint,E.transform.zoom,Je)}},heatmap:function(E,o,h,b){if(h.paint.get("heatmap-opacity")!==0)if(E.renderPass==="offscreen"){const M=E.context,j=M.gl,ee=pr.disabled,le=new vr([j.ONE,j.ONE],n.Color.transparent,[!0,!0,!0,!0]);(function(pe,Te,Ne){const Be=pe.gl;pe.activeTexture.set(Be.TEXTURE1),pe.viewport.set([0,0,Te.width/4,Te.height/4]);let qe=Ne.heatmapFbo;if(qe)Be.bindTexture(Be.TEXTURE_2D,qe.colorAttachment.get()),pe.bindFramebuffer.set(qe.framebuffer);else{const tt=Be.createTexture();Be.bindTexture(Be.TEXTURE_2D,tt),Be.texParameteri(Be.TEXTURE_2D,Be.TEXTURE_WRAP_S,Be.CLAMP_TO_EDGE),Be.texParameteri(Be.TEXTURE_2D,Be.TEXTURE_WRAP_T,Be.CLAMP_TO_EDGE),Be.texParameteri(Be.TEXTURE_2D,Be.TEXTURE_MIN_FILTER,Be.LINEAR),Be.texParameteri(Be.TEXTURE_2D,Be.TEXTURE_MAG_FILTER,Be.LINEAR),qe=Ne.heatmapFbo=pe.createFramebuffer(Te.width/4,Te.height/4,!1),function(Qe,Je,pt,yt){const _t=Qe.gl;_t.texImage2D(_t.TEXTURE_2D,0,_t.RGBA,Je.width/4,Je.height/4,0,_t.RGBA,Qe.extRenderToTextureHalfFloat?Qe.extTextureHalfFloat.HALF_FLOAT_OES:_t.UNSIGNED_BYTE,null),yt.colorAttachment.set(pt)}(pe,Te,tt,qe)}})(M,E,h),M.clear({color:n.Color.transparent});for(let pe=0;pe<b.length;pe++){const Te=b[pe];if(o.hasRenderableParent(Te))continue;const Ne=o.getTile(Te),Be=Ne.getBucket(h);if(!Be)continue;const qe=Be.programConfigurations.get(h.id),tt=E.useProgram("heatmap",qe),{zoom:Qe}=E.transform;tt.draw(M,j.TRIANGLES,Ci.disabled,ee,le,tr.disabled,Gu(Te.posMatrix,Ne,Qe,h.paint.get("heatmap-intensity")),null,h.id,Be.layoutVertexBuffer,Be.indexBuffer,Be.segments,h.paint,E.transform.zoom,qe)}M.viewport.set([0,0,E.width,E.height])}else E.renderPass==="translucent"&&(E.context.setColorMode(E.colorModeForRenderPass()),function(M,j){const ee=M.context,le=ee.gl,pe=j.heatmapFbo;if(!pe)return;ee.activeTexture.set(le.TEXTURE0),le.bindTexture(le.TEXTURE_2D,pe.colorAttachment.get()),ee.activeTexture.set(le.TEXTURE1);let Te=j.colorRampTexture;Te||(Te=j.colorRampTexture=new w(ee,j.colorRamp,le.RGBA)),Te.bind(le.LINEAR,le.CLAMP_TO_EDGE),M.useProgram("heatmapTexture").draw(ee,le.TRIANGLES,Ci.disabled,pr.disabled,M.colorModeForRenderPass(),tr.disabled,((Ne,Be,qe,tt)=>{const Qe=n.create();n.ortho(Qe,0,Ne.width,Ne.height,0,0,1);const Je=Ne.context.gl;return{u_matrix:Qe,u_world:[Je.drawingBufferWidth,Je.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Be.paint.get("heatmap-opacity")}})(M,j),null,j.id,M.viewportBuffer,M.quadTriangleIndexBuffer,M.viewportSegments,j.paint,M.transform.zoom)}(E,h))},line:function(E,o,h,b){if(E.renderPass!=="translucent")return;const M=h.paint.get("line-opacity"),j=h.paint.get("line-width");if(M.constantOr(1)===0||j.constantOr(1)===0)return;const ee=E.depthModeForSublayer(0,Ci.ReadOnly),le=E.colorModeForRenderPass(),pe=h.paint.get("line-dasharray"),Te=h.paint.get("line-pattern"),Ne=Te.constantOr(1),Be=h.paint.get("line-gradient"),qe=h.getCrossfadeParameters(),tt=Ne?"linePattern":pe?"lineSDF":Be?"lineGradient":"line",Qe=E.context,Je=Qe.gl;let pt=!0;for(const yt of b){const _t=o.getTile(yt);if(Ne&&!_t.patternsLoaded())continue;const at=_t.getBucket(h);if(!at)continue;const At=at.programConfigurations.get(h.id),Tt=E.context.program.get(),Nt=E.useProgram(tt,At),Ot=pt||Nt.program!==Tt,Ut=E.style.terrain&&E.style.terrain.getTerrainData(yt),Lt=Te.constantOr(null);if(Lt&&_t.imageAtlas){const li=_t.imageAtlas,Xi=li.patternPositions[Lt.to.toString()],un=li.patternPositions[Lt.from.toString()];Xi&&un&&At.setConstantPatternPositions(Xi,un)}const ai=Ut?yt:null,Zt=Ne?Dc(E,_t,h,qe,ai):pe?hr(E,_t,h,pe,qe,ai):Be?Wu(E,_t,h,at.lineClipsArray.length,ai):Ic(E,_t,h,ai);if(Ne)Qe.activeTexture.set(Je.TEXTURE0),_t.imageAtlasTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE),At.updatePaintBuffers(qe);else if(pe&&(Ot||E.lineAtlas.dirty))Qe.activeTexture.set(Je.TEXTURE0),E.lineAtlas.bind(Qe);else if(Be){const li=at.gradients[h.id];let Xi=li.texture;if(h.gradientVersion!==li.version){let un=256;if(h.stepInterpolant){const Ii=o.getSource().maxzoom,Bn=yt.canonical.z===Ii?Math.ceil(1<<E.transform.maxZoom-yt.canonical.z):1;un=n.clamp(n.nextPowerOfTwo(at.maxLineLength/n.EXTENT*1024*Bn),256,Qe.maxTextureSize)}li.gradient=n.renderColorRamp({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:un,image:li.gradient||void 0,clips:at.lineClipsArray}),li.texture?li.texture.update(li.gradient):li.texture=new w(Qe,li.gradient,Je.RGBA),li.version=h.gradientVersion,Xi=li.texture}Qe.activeTexture.set(Je.TEXTURE0),Xi.bind(h.stepInterpolant?Je.NEAREST:Je.LINEAR,Je.CLAMP_TO_EDGE)}Nt.draw(Qe,Je.TRIANGLES,ee,E.stencilModeForClipping(yt),le,tr.disabled,Zt,Ut,h.id,at.layoutVertexBuffer,at.indexBuffer,at.segments,h.paint,E.transform.zoom,At,at.layoutVertexBuffer2),pt=!1}},fill:function(E,o,h,b){const M=h.paint.get("fill-color"),j=h.paint.get("fill-opacity");if(j.constantOr(1)===0)return;const ee=E.colorModeForRenderPass(),le=h.paint.get("fill-pattern"),pe=E.opaquePassEnabledForLayer()&&!le.constantOr(1)&&M.constantOr(n.Color.transparent).a===1&&j.constantOr(0)===1?"opaque":"translucent";if(E.renderPass===pe){const Te=E.depthModeForSublayer(1,E.renderPass==="opaque"?Ci.ReadWrite:Ci.ReadOnly);Ju(E,o,h,b,Te,ee,!1)}if(E.renderPass==="translucent"&&h.paint.get("fill-antialias")){const Te=E.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,Ci.ReadOnly);Ju(E,o,h,b,Te,ee,!0)}},"fill-extrusion":function(E,o,h,b){const M=h.paint.get("fill-extrusion-opacity");if(M!==0&&E.renderPass==="translucent"){const j=new Ci(E.context.gl.LEQUAL,Ci.ReadWrite,E.depthRangeFor3D);if(M!==1||h.paint.get("fill-extrusion-pattern").constantOr(1))jc(E,o,h,b,j,pr.disabled,vr.disabled),jc(E,o,h,b,j,E.stencilModeFor3D(),E.colorModeForRenderPass());else{const ee=E.colorModeForRenderPass();jc(E,o,h,b,j,pr.disabled,ee)}}},hillshade:function(E,o,h,b){if(E.renderPass!=="offscreen"&&E.renderPass!=="translucent")return;const M=E.context,j=E.depthModeForSublayer(0,Ci.ReadOnly),ee=E.colorModeForRenderPass(),[le,pe]=E.renderPass==="translucent"?E.stencilConfigForOverlap(b):[{},b];for(const Te of pe){const Ne=o.getTile(Te);Ne.needsHillshadePrepare!==void 0&&Ne.needsHillshadePrepare&&E.renderPass==="offscreen"?ed(E,Ne,h,j,pr.disabled,ee):E.renderPass==="translucent"&&om(E,Te,Ne,h,j,le[Te.overscaledZ],ee)}M.viewport.set([0,0,E.width,E.height])},raster:function(E,o,h,b){if(E.renderPass!=="translucent"||h.paint.get("raster-opacity")===0||!b.length)return;const M=E.context,j=M.gl,ee=o.getSource(),le=E.useProgram("raster"),pe=E.colorModeForRenderPass(),[Te,Ne]=ee instanceof H?[{},b]:E.stencilConfigForOverlap(b),Be=Ne[Ne.length-1].overscaledZ,qe=!E.options.moving;for(const tt of Ne){const Qe=E.depthModeForSublayer(tt.overscaledZ-Be,h.paint.get("raster-opacity")===1?Ci.ReadWrite:Ci.ReadOnly,j.LESS),Je=o.getTile(tt);Je.registerFadeDuration(h.paint.get("raster-fade-duration"));const pt=o.findLoadedParent(tt,0),yt=td(Je,pt,o,h,E.transform,E.style.terrain);let _t,at;const At=h.paint.get("raster-resampling")==="nearest"?j.NEAREST:j.LINEAR;M.activeTexture.set(j.TEXTURE0),Je.texture.bind(At,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST),M.activeTexture.set(j.TEXTURE1),pt?(pt.texture.bind(At,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST),_t=Math.pow(2,pt.tileID.overscaledZ-Je.tileID.overscaledZ),at=[Je.tileID.canonical.x*_t%1,Je.tileID.canonical.y*_t%1]):Je.texture.bind(At,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST);const Tt=E.style.terrain&&E.style.terrain.getTerrainData(tt),Nt=Tt?tt:null,Ot=Nt?Nt.posMatrix:E.transform.calculatePosMatrix(tt.toUnwrapped(),qe),Ut=Xf(Ot,at||[0,0],_t||1,yt,h);ee instanceof H?le.draw(M,j.TRIANGLES,Qe,pr.disabled,pe,tr.disabled,Ut,Tt,h.id,ee.boundsBuffer,E.quadTriangleIndexBuffer,ee.boundsSegments):le.draw(M,j.TRIANGLES,Qe,Te[tt.overscaledZ],pe,tr.disabled,Ut,Tt,h.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}},background:function(E,o,h,b){const M=h.paint.get("background-color"),j=h.paint.get("background-opacity");if(j===0)return;const ee=E.context,le=ee.gl,pe=E.transform,Te=pe.tileSize,Ne=h.paint.get("background-pattern");if(E.isPatternMissing(Ne))return;const Be=!Ne&&M.a===1&&j===1&&E.opaquePassEnabledForLayer()?"opaque":"translucent";if(E.renderPass!==Be)return;const qe=pr.disabled,tt=E.depthModeForSublayer(0,Be==="opaque"?Ci.ReadWrite:Ci.ReadOnly),Qe=E.colorModeForRenderPass(),Je=E.useProgram(Ne?"backgroundPattern":"background"),pt=b||pe.coveringTiles({tileSize:Te,terrain:E.style.terrain});Ne&&(ee.activeTexture.set(le.TEXTURE0),E.imageManager.bind(E.context));const yt=h.getCrossfadeParameters();for(const _t of pt){const at=b?_t.posMatrix:E.transform.calculatePosMatrix(_t.toUnwrapped()),At=Ne?Sh(at,j,E,Ne,{tileID:_t,tileSize:Te},yt):lx(at,j,M),Tt=E.style.terrain&&E.style.terrain.getTerrainData(_t);Je.draw(ee,le.TRIANGLES,tt,qe,Qe,tr.disabled,At,Tt,h.id,E.tileExtentBuffer,E.quadTriangleIndexBuffer,E.tileExtentSegments)}},debug:function(E,o,h){for(let b=0;b<h.length;b++)$h(E,o,h[b])},custom:function(E,o,h){const b=E.context,M=h.implementation;if(E.renderPass==="offscreen"){const j=M.prerender;j&&(E.setCustomLayerDefaults(),b.setColorMode(E.colorModeForRenderPass()),j.call(M,b.gl,E.transform.customLayerMatrix()),b.setDirty(),E.setBaseState())}else if(E.renderPass==="translucent"){E.setCustomLayerDefaults(),b.setColorMode(E.colorModeForRenderPass()),b.setStencilMode(pr.disabled);const j=M.renderingMode==="3d"?new Ci(E.context.gl.LEQUAL,Ci.ReadWrite,E.depthRangeFor3D):E.depthModeForSublayer(0,Ci.ReadOnly);b.setDepthMode(j),M.render(b.gl,E.transform.customLayerMatrix()),b.setDirty(),E.setBaseState(),b.bindFramebuffer.set(null)}}};class dm{constructor(o,h){this.context=new jh(o),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:n.create(),renderTime:0},this.setup(),this.numSublayers=Q.maxUnderzooming+Q.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Bi,this.gpuTimers={}}resize(o,h,b){if(this.width=o*b,this.height=h*b,this.pixelRatio=b,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const M of this.style._order)this.style._layers[M].resize()}setup(){const o=this.context,h=new n.PosArray;h.emplaceBack(0,0),h.emplaceBack(n.EXTENT,0),h.emplaceBack(0,n.EXTENT),h.emplaceBack(n.EXTENT,n.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(h,_i.members),this.tileExtentSegments=n.SegmentVector.simpleSegment(0,0,4,2);const b=new n.PosArray;b.emplaceBack(0,0),b.emplaceBack(n.EXTENT,0),b.emplaceBack(0,n.EXTENT),b.emplaceBack(n.EXTENT,n.EXTENT),this.debugBuffer=o.createVertexBuffer(b,_i.members),this.debugSegments=n.SegmentVector.simpleSegment(0,0,4,5);const M=new n.RasterBoundsArray;M.emplaceBack(0,0,0,0),M.emplaceBack(n.EXTENT,0,n.EXTENT,0),M.emplaceBack(0,n.EXTENT,0,n.EXTENT),M.emplaceBack(n.EXTENT,n.EXTENT,n.EXTENT,n.EXTENT),this.rasterBoundsBuffer=o.createVertexBuffer(M,B.members),this.rasterBoundsSegments=n.SegmentVector.simpleSegment(0,0,4,2);const j=new n.PosArray;j.emplaceBack(0,0),j.emplaceBack(1,0),j.emplaceBack(0,1),j.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(j,_i.members),this.viewportSegments=n.SegmentVector.simpleSegment(0,0,4,2);const ee=new n.LineStripIndexArray;ee.emplaceBack(0),ee.emplaceBack(1),ee.emplaceBack(3),ee.emplaceBack(2),ee.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(ee);const le=new n.TriangleIndexArray;le.emplaceBack(0,1,2),le.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(le),this.emptyTexture=new w(o,{width:1,height:1,data:new Uint8Array([0,0,0,0])},o.gl.RGBA);const pe=this.context.gl;this.stencilClearMode=new pr({func:pe.ALWAYS,mask:0},0,255,pe.ZERO,pe.ZERO,pe.ZERO)}clearStencil(){const o=this.context,h=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const b=n.create();n.ortho(b,0,this.width,this.height,0,0,1),n.scale(b,b,[h.drawingBufferWidth,h.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,h.TRIANGLES,Ci.disabled,this.stencilClearMode,vr.disabled,tr.disabled,Pc(b),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(o,h){if(this.currentStencilSource===o.source||!o.isTileClipped()||!h||!h.length)return;this.currentStencilSource=o.source;const b=this.context,M=b.gl;this.nextStencilID+h.length>256&&this.clearStencil(),b.setColorMode(vr.disabled),b.setDepthMode(Ci.disabled);const j=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const ee of h){const le=this._tileClippingMaskIDs[ee.key]=this.nextStencilID++,pe=this.style.terrain&&this.style.terrain.getTerrainData(ee);j.draw(b,M.TRIANGLES,Ci.disabled,new pr({func:M.ALWAYS,mask:0},le,255,M.KEEP,M.KEEP,M.REPLACE),vr.disabled,tr.disabled,Pc(ee.posMatrix),pe,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,h=this.context.gl;return new pr({func:h.NOTEQUAL,mask:255},o,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(o){const h=this.context.gl;return new pr({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(o){const h=this.context.gl,b=o.sort((ee,le)=>le.overscaledZ-ee.overscaledZ),M=b[b.length-1].overscaledZ,j=b[0].overscaledZ-M+1;if(j>1){this.currentStencilSource=void 0,this.nextStencilID+j>256&&this.clearStencil();const ee={};for(let le=0;le<j;le++)ee[le+M]=new pr({func:h.GEQUAL,mask:255},le+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=j,[ee,b]}return[{[M]:pr.disabled},b]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new vr([o.CONSTANT_COLOR,o.ONE],new n.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?vr.unblended:vr.alphaBlended}depthModeForSublayer(o,h,b){if(!this.opaquePassEnabledForLayer())return Ci.disabled;const M=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new Ci(b||this.context.gl.LEQUAL,h,[M,M])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,h){this.style=o,this.options=h,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(n.exported.now()),this.imageManager.beginFrame();const b=this.style._order,M=this.style.sourceCaches,j=this.style.terrain&&new rd(this);for(const Te in M){const Ne=M[Te];Ne.used&&Ne.prepare(this.context)}const ee={},le={},pe={};for(const Te in M){const Ne=M[Te];ee[Te]=Ne.getVisibleCoordinates(),le[Te]=ee[Te].slice().reverse(),pe[Te]=Ne.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Te=0;Te<b.length;Te++)if(this.style._layers[b[Te]].is3D()){this.opaquePassCutoff=Te;break}if(j){this.opaquePassCutoff=0;const Te=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!n.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||Te.length)&&(n.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(Ne,Be){const qe=Ne.context,tt=qe.gl,Qe=vr.unblended,Je=new Ci(tt.LEQUAL,Ci.ReadWrite,[0,1]),pt=Be.getTerrainMesh(),yt=Be.sourceCache.getRenderableTiles(),_t=Ne.useProgram("terrainDepth");qe.bindFramebuffer.set(Be.getFramebuffer("depth").framebuffer),qe.viewport.set([0,0,Ne.width/devicePixelRatio,Ne.height/devicePixelRatio]),qe.clear({color:n.Color.transparent,depth:1});for(const at of yt){const At=Be.getTerrainData(at.tileID),Tt=Ne.transform.calculatePosMatrix(at.tileID.toUnwrapped());_t.draw(qe,tt.TRIANGLES,Je,pr.disabled,Qe,tr.backCCW,{u_matrix:Tt},At,"terrain",pt.vertexBuffer,pt.indexBuffer,pt.segments)}qe.bindFramebuffer.set(null),qe.viewport.set([0,0,Ne.width,Ne.height])}(this,this.style.terrain),function(Ne,Be){const qe=Ne.context,tt=qe.gl,Qe=vr.unblended,Je=new Ci(tt.LEQUAL,Ci.ReadWrite,[0,1]),pt=Be.getTerrainMesh(),yt=Be.getCoordsTexture(),_t=Be.sourceCache.getRenderableTiles(),at=Ne.useProgram("terrainCoords");qe.bindFramebuffer.set(Be.getFramebuffer("coords").framebuffer),qe.viewport.set([0,0,Ne.width/devicePixelRatio,Ne.height/devicePixelRatio]),qe.clear({color:n.Color.transparent,depth:1}),Be.coordsIndex=[];for(const At of _t){const Tt=Be.getTerrainData(At.tileID);qe.activeTexture.set(tt.TEXTURE0),tt.bindTexture(tt.TEXTURE_2D,yt.texture);const Nt=Ne.transform.calculatePosMatrix(At.tileID.toUnwrapped());at.draw(qe,tt.TRIANGLES,Je,pr.disabled,Qe,tr.backCCW,{u_matrix:Nt,u_terrain_coords_id:(255-Be.coordsIndex.length)/255,u_texture:0},Tt,"terrain",pt.vertexBuffer,pt.indexBuffer,pt.segments),Be.coordsIndex.push(At.tileID.key)}qe.bindFramebuffer.set(null),qe.viewport.set([0,0,Ne.width,Ne.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const Te of b){const Ne=this.style._layers[Te];if(!Ne.hasOffscreenPass()||Ne.isHidden(this.transform.zoom))continue;const Be=le[Ne.source];(Ne.type==="custom"||Be.length)&&this.renderLayer(this,M[Ne.source],Ne,Be)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?n.Color.black:n.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],!j)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const Te=this.style._layers[b[this.currentLayer]],Ne=M[Te.source],Be=ee[Te.source];this._renderTileClippingMasks(Te,Be),this.renderLayer(this,Ne,Te,Be)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const Te=this.style._layers[b[this.currentLayer]],Ne=M[Te.source];if(j&&j.renderLayer(Te))continue;const Be=(Te.type==="symbol"?pe:le)[Te.source];this._renderTileClippingMasks(Te,ee[Te.source]),this.renderLayer(this,Ne,Te,Be)}if(this.options.showTileBoundaries){let Te,Ne;Object.values(this.style._layers).forEach(Be=>{Be.source&&!Be.isHidden(this.transform.zoom)&&(Be.source!==(Ne&&Ne.id)&&(Ne=this.style.sourceCaches[Be.source]),(!Te||Te.getSource().maxzoom<Ne.getSource().maxzoom)&&(Te=Ne))}),Te&&sd.debug(this,Te,Te.getVisibleCoordinates())}this.options.showPadding&&function(Te){const Ne=Te.transform.padding;Fc(Te,Te.transform.height-(Ne.top||0),3,Aa),Fc(Te,Ne.bottom||0,3,lm),id(Te,Ne.left||0,3,Bh),id(Te,Te.transform.width-(Ne.right||0),3,cm);const Be=Te.transform.centerPoint;(function(qe,tt,Qe,Je){nd(qe,tt-1,Qe-10,2,20,Je),nd(qe,tt-10,Qe-1,20,2,Je)})(Te,Be.x,Te.transform.height-Be.y,jl)}(this),this.context.setDefault()}renderLayer(o,h,b,M){b.isHidden(this.transform.zoom)||(b.type==="background"||b.type==="custom"||(M||[]).length)&&(this.id=b.id,this.gpuTimingStart(b),sd[b.type](o,h,b,M,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(o){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery;let b=this.gpuTimers[o.id];b||(b=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:h.createQueryEXT()}),b.calls++,h.beginQueryEXT(h.TIME_ELAPSED_EXT,b.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}collectGpuTimers(){const o=this.gpuTimers;return this.gpuTimers={},o}queryGpuTimers(o){const h={};for(const b in o){const M=o[b],j=this.context.extTimerQuery,ee=j.getQueryObjectEXT(M.query,j.QUERY_RESULT_EXT)/1e6;j.deleteQueryEXT(M.query),h[b]=ee}return h}translatePosMatrix(o,h,b,M,j){if(!b[0]&&!b[1])return o;const ee=j?M==="map"?this.transform.angle:0:M==="viewport"?-this.transform.angle:0;if(ee){const Te=Math.sin(ee),Ne=Math.cos(ee);b=[b[0]*Ne-b[1]*Te,b[0]*Te+b[1]*Ne]}const le=[j?b[0]:nn(h,b[0],this.transform.zoom),j?b[1]:nn(h,b[1],this.transform.zoom),0],pe=new Float32Array(16);return n.translate(pe,o,le),pe}saveTileTexture(o){const h=this._tileTextures[o.size[0]];h?h.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const h=this._tileTextures[o];return h&&h.length>0?h.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;const h=this.imageManager.getPattern(o.from.toString()),b=this.imageManager.getPattern(o.to.toString());return!h||!b}useProgram(o,h){this.cache=this.cache||{};const b=o+(h?h.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[b]||(this.cache[b]=new ax(this.context,o,Mc[o],h,Eh[o],this._showOverdrawInspector,this.style.terrain)),this.cache[b]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new w(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class ad{constructor(o,h){this.points=o,this.planes=h}static fromInvProjectionMatrix(o,h,b){const M=Math.pow(2,b),j=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(le=>{const pe=1/(le=n.transformMat4([],le,o))[3]/h*M;return n.mul$1(le,le,[pe,pe,1/le[3],pe])}),ee=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(le=>{const pe=n.sub([],j[le[0]],j[le[1]]),Te=n.sub([],j[le[2]],j[le[1]]),Ne=n.normalize([],n.cross([],pe,Te)),Be=-n.dot(Ne,j[le[1]]);return Ne.concat(Be)});return new ad(j,ee)}}class tl{constructor(o,h){this.min=o,this.max=h,this.center=n.scale$1([],n.add([],this.min,this.max),.5)}quadrant(o){const h=[o%2==0,o<2],b=n.clone$2(this.min),M=n.clone$2(this.max);for(let j=0;j<h.length;j++)b[j]=h[j]?this.min[j]:this.center[j],M[j]=h[j]?this.center[j]:this.max[j];return M[2]=this.max[2],new tl(b,M)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}intersects(o){const h=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let b=!0;for(let M=0;M<o.planes.length;M++){const j=o.planes[M];let ee=0;for(let le=0;le<h.length;le++)n.dot$1(j,h[le])>=0&&ee++;if(ee===0)return 0;ee!==h.length&&(b=!1)}if(b)return 2;for(let M=0;M<3;M++){let j=Number.MAX_VALUE,ee=-Number.MAX_VALUE;for(let le=0;le<o.points.length;le++){const pe=o.points[le][M]-this.min[M];j=Math.min(j,pe),ee=Math.max(ee,pe)}if(ee<0||j>this.max[M]-this.min[M])return 0}return 1}}class Bc{constructor(o=0,h=0,b=0,M=0){if(isNaN(o)||o<0||isNaN(h)||h<0||isNaN(b)||b<0||isNaN(M)||M<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=h,this.left=b,this.right=M}interpolate(o,h,b){return h.top!=null&&o.top!=null&&(this.top=n.number(o.top,h.top,b)),h.bottom!=null&&o.bottom!=null&&(this.bottom=n.number(o.bottom,h.bottom,b)),h.left!=null&&o.left!=null&&(this.left=n.number(o.left,h.left,b)),h.right!=null&&o.right!=null&&(this.right=n.number(o.right,h.right,b)),this}getCenter(o,h){const b=n.clamp((this.left+o-this.right)/2,0,o),M=n.clamp((this.top+h-this.bottom)/2,0,h);return new n.pointGeometry(b,M)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new Bc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class od{constructor(o,h,b,M,j){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=j===void 0||!!j,this._minZoom=o||0,this._maxZoom=h||22,this._minPitch=b??0,this._maxPitch=M??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new n.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Bc,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const o=new od(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.tileSize=this.tileSize,o.latRange=this.latRange,o.width=this.width,o.height=this.height,o._center=this._center,o._elevation=this._elevation,o.zoom=this.zoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._calcMatrices(),o}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new n.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(o){const h=-n.wrap(o,-180,180)*Math.PI/180;var b;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=(b=new n.ARRAY_TYPE(4),n.ARRAY_TYPE!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b),function(M,j,ee){var le=j[0],pe=j[1],Te=j[2],Ne=j[3],Be=Math.sin(ee),qe=Math.cos(ee);M[0]=le*qe+Te*Be,M[1]=pe*qe+Ne*Be,M[2]=le*-Be+Te*qe,M[3]=pe*-Be+Ne*qe}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const h=n.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(o){const h=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this.scale=this.zoomScale(h),this.tileZoom=Math.floor(h),this.zoomFraction=h-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(o){o!==this._elevation&&(this._elevation=o,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,h,b){this._unmodified=!1,this._edgeInsets.interpolate(o,h,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const h=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(o){const h=[new n.UnwrappedTileID(0,o)];if(this._renderWorldCopies){const b=this.pointCoordinate(new n.pointGeometry(0,0)),M=this.pointCoordinate(new n.pointGeometry(this.width,0)),j=this.pointCoordinate(new n.pointGeometry(this.width,this.height)),ee=this.pointCoordinate(new n.pointGeometry(0,this.height)),le=Math.floor(Math.min(b.x,M.x,j.x,ee.x)),pe=Math.floor(Math.max(b.x,M.x,j.x,ee.x)),Te=1;for(let Ne=le-Te;Ne<=pe+Te;Ne++)Ne!==0&&h.push(new n.UnwrappedTileID(Ne,o))}return h}coveringTiles(o){var h,b;let M=this.coveringZoomLevel(o);const j=M;if(o.minzoom!==void 0&&M<o.minzoom)return[];o.maxzoom!==void 0&&M>o.maxzoom&&(M=o.maxzoom);const ee=this.pointCoordinate(this.getCameraPoint()),le=n.MercatorCoordinate.fromLngLat(this.center),pe=Math.pow(2,M),Te=[pe*ee.x,pe*ee.y,0],Ne=[pe*le.x,pe*le.y,0],Be=ad.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,M);let qe=o.minzoom||0;!o.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(qe=M);const tt=o.terrain?2/Math.min(this.tileSize,o.tileSize)*this.tileSize:3,Qe=at=>({aabb:new tl([at*pe,0,0],[(at+1)*pe,pe,0]),zoom:0,x:0,y:0,wrap:at,fullyVisible:!1}),Je=[],pt=[],yt=M,_t=o.reparseOverscaled?j:M;if(this._renderWorldCopies)for(let at=1;at<=3;at++)Je.push(Qe(-at)),Je.push(Qe(at));for(Je.push(Qe(0));Je.length>0;){const at=Je.pop(),At=at.x,Tt=at.y;let Nt=at.fullyVisible;if(!Nt){const li=at.aabb.intersects(Be);if(li===0)continue;Nt=li===2}const Ot=o.terrain?Te:Ne,Ut=at.aabb.distanceX(Ot),Lt=at.aabb.distanceY(Ot),ai=Math.max(Math.abs(Ut),Math.abs(Lt)),Zt=tt+(1<<yt-at.zoom)-2;if(at.zoom===yt||ai>Zt&&at.zoom>=qe){const li=yt-at.zoom,Xi=Te[0]-.5-(At<<li),un=Te[1]-.5-(Tt<<li);pt.push({tileID:new n.OverscaledTileID(at.zoom===yt?_t:at.zoom,at.wrap,at.zoom,At,Tt),distanceSq:n.sqrLen([Ne[0]-.5-At,Ne[1]-.5-Tt]),tileDistanceToCamera:Math.sqrt(Xi*Xi+un*un)})}else for(let li=0;li<4;li++){const Xi=(At<<1)+li%2,un=(Tt<<1)+(li>>1),Ii=at.zoom+1;let Bn=at.aabb.quadrant(li);if(o.terrain){const $n=new n.OverscaledTileID(Ii,at.wrap,Ii,Xi,un),_n=o.terrain.getMinMaxElevation($n),Cn=(h=_n.minElevation)!==null&&h!==void 0?h:this.elevation,En=(b=_n.maxElevation)!==null&&b!==void 0?b:this.elevation;Bn=new tl([Bn.min[0],Bn.min[1],Cn],[Bn.max[0],Bn.max[1],En])}Je.push({aabb:Bn,zoom:Ii,x:Xi,y:un,wrap:at.wrap,fullyVisible:Nt})}}return pt.sort((at,At)=>at.distanceSq-At.distanceSq).map(at=>at.tileID)}resize(o,h){this.width=o,this.height=h,this.pixelsToGLUnits=[2/o,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const h=n.clamp(o.lat,-this.maxValidLatitude,this.maxValidLatitude);return new n.pointGeometry(n.mercatorXfromLng(o.lng)*this.worldSize,n.mercatorYfromLat(h)*this.worldSize)}unproject(o){return new n.MercatorCoordinate(o.x/this.worldSize,o.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(o){this.freezeElevation||(this.elevation=o?this.getElevation(this._center,o):0)}getElevation(o,h){const b=n.MercatorCoordinate.fromLngLat(o),M=(1<<this.tileZoom)*n.EXTENT,j=b.x*M,ee=b.y*M,le=Math.floor(j/n.EXTENT),pe=Math.floor(ee/n.EXTENT),Te=new n.OverscaledTileID(this.tileZoom,0,this.tileZoom,le,pe);return h.getElevation(Te,j%n.EXTENT,ee%n.EXTENT,n.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(o){const h=this.pointLocation(this.centerPoint,o),b=this.getElevation(h,o);if(!(this.elevation-b))return;const M=this.getCameraPosition(),j=n.MercatorCoordinate.fromLngLat(M.lngLat,M.altitude),ee=n.MercatorCoordinate.fromLngLat(h,b),le=j.x-ee.x,pe=j.y-ee.y,Te=j.z-ee.z,Ne=Math.sqrt(le*le+pe*pe+Te*Te),Be=this.scaleZoom(this.cameraToCenterDistance/Ne/this.tileSize);this._elevation=b,this._center=h,this.zoom=Be}setLocationAtPoint(o,h){const b=this.pointCoordinate(h),M=this.pointCoordinate(this.centerPoint),j=this.locationCoordinate(o),ee=new n.MercatorCoordinate(j.x-(b.x-M.x),j.y-(b.y-M.y));this.center=this.coordinateLocation(ee),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(o,h){return h?this.coordinatePoint(this.locationCoordinate(o),this.getElevation(o,h),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(o))}pointLocation(o,h){return this.coordinateLocation(this.pointCoordinate(o,h))}locationCoordinate(o){return n.MercatorCoordinate.fromLngLat(o)}coordinateLocation(o){return o&&o.toLngLat()}pointCoordinate(o,h){if(h){const qe=h.pointCoordinate(o);if(qe!=null)return qe}const b=[o.x,o.y,0,1],M=[o.x,o.y,1,1];n.transformMat4(b,b,this.pixelMatrixInverse),n.transformMat4(M,M,this.pixelMatrixInverse);const j=b[3],ee=M[3],le=b[1]/j,pe=M[1]/ee,Te=b[2]/j,Ne=M[2]/ee,Be=Te===Ne?0:(0-Te)/(Ne-Te);return new n.MercatorCoordinate(n.number(b[0]/j,M[0]/ee,Be)/this.worldSize,n.number(le,pe,Be)/this.worldSize)}coordinatePoint(o,h=0,b=this.pixelMatrix){const M=[o.x*this.worldSize,o.y*this.worldSize,h,1];return n.transformMat4(M,M,b),new n.pointGeometry(M[0]/M[3],M[1]/M[3])}getBounds(){const o=Math.max(0,this.height/2-this.getHorizon());return new n.LngLatBounds().extend(this.pointLocation(new n.pointGeometry(0,o))).extend(this.pointLocation(new n.pointGeometry(this.width,o))).extend(this.pointLocation(new n.pointGeometry(this.width,this.height))).extend(this.pointLocation(new n.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new n.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(o,h=!1){const b=o.key,M=h?this._alignedPosMatrixCache:this._posMatrixCache;if(M[b])return M[b];const j=o.canonical,ee=this.worldSize/this.zoomScale(j.z),le=j.x+Math.pow(2,j.z)*o.wrap,pe=n.identity(new Float64Array(16));return n.translate(pe,pe,[le*ee,j.y*ee,0]),n.scale(pe,pe,[ee/n.EXTENT,ee/n.EXTENT,1]),n.multiply(pe,h?this.alignedProjMatrix:this.projMatrix,pe),M[b]=new Float32Array(pe),M[b]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let o,h,b,M,j=-90,ee=90,le=-180,pe=180;const Te=this.size,Ne=this._unmodified;if(this.latRange){const tt=this.latRange;j=n.mercatorYfromLat(tt[1])*this.worldSize,ee=n.mercatorYfromLat(tt[0])*this.worldSize,o=ee-j<Te.y?Te.y/(ee-j):0}if(this.lngRange){const tt=this.lngRange;le=n.wrap(n.mercatorXfromLng(tt[0])*this.worldSize,0,this.worldSize),pe=n.wrap(n.mercatorXfromLng(tt[1])*this.worldSize,0,this.worldSize),pe<le&&(pe+=this.worldSize),h=pe-le<Te.x?Te.x/(pe-le):0}const Be=this.point,qe=Math.max(h||0,o||0);if(qe)return this.center=this.unproject(new n.pointGeometry(h?(pe+le)/2:Be.x,o?(ee+j)/2:Be.y)),this.zoom+=this.scaleZoom(qe),this._unmodified=Ne,void(this._constraining=!1);if(this.latRange){const tt=Be.y,Qe=Te.y/2;tt-Qe<j&&(M=j+Qe),tt+Qe>ee&&(M=ee-Qe)}if(this.lngRange){const tt=(le+pe)/2,Qe=n.wrap(Be.x,tt-this.worldSize/2,tt+this.worldSize/2),Je=Te.x/2;Qe-Je<le&&(b=le+Je),Qe+Je>pe&&(b=pe-Je)}b===void 0&&M===void 0||(this.center=this.unproject(new n.pointGeometry(b!==void 0?b:Be.x,M!==void 0?M:Be.y)).wrap()),this._unmodified=Ne,this._constraining=!1}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,h=this.point.x,b=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=n.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let M=n.identity(new Float64Array(16));n.scale(M,M,[this.width/2,-this.height/2,1]),n.translate(M,M,[1,-1,0]),this.labelPlaneMatrix=M,M=n.identity(new Float64Array(16)),n.scale(M,M,[1,-1,1]),n.translate(M,M,[-1,-1,0]),n.scale(M,M,[2/this.width,2/this.height,1]),this.glCoordMatrix=M,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const j=Math.PI/2+this._pitch,ee=this._fov*(.5+o.y/this.height),le=Math.sin(ee)*this.cameraToSeaLevelDistance/Math.sin(n.clamp(Math.PI-j-ee,.01,Math.PI-.01)),pe=this.getHorizon(),Te=2*Math.atan(pe/this.cameraToCenterDistance)*(.5+o.y/(2*pe)),Ne=Math.sin(Te)*this.cameraToSeaLevelDistance/Math.sin(n.clamp(Math.PI-j-Te,.01,Math.PI-.01)),Be=Math.cos(Math.PI/2-this._pitch)*le+this.cameraToSeaLevelDistance,qe=Math.cos(Math.PI/2-this._pitch)*Ne+this.cameraToSeaLevelDistance,tt=1.01*Math.min(Be,qe),Qe=this.height/50;M=new Float64Array(16),n.perspective(M,this._fov,this.width/this.height,Qe,tt),M[8]=2*-o.x/this.width,M[9]=2*o.y/this.height,n.scale(M,M,[1,-1,1]),n.translate(M,M,[0,0,-this.cameraToCenterDistance]),n.rotateX(M,M,this._pitch),n.rotateZ(M,M,this.angle),n.translate(M,M,[-h,-b,0]),this.mercatorMatrix=n.scale([],M,[this.worldSize,this.worldSize,this.worldSize]),n.scale(M,M,[1,1,this._pixelPerMeter]),this.pixelMatrix=n.multiply(new Float64Array(16),this.labelPlaneMatrix,M),n.translate(M,M,[0,0,-this.elevation]),this.projMatrix=M,this.invProjMatrix=n.invert([],M),this.pixelMatrix3D=n.multiply(new Float64Array(16),this.labelPlaneMatrix,M);const Je=this.width%2/2,pt=this.height%2/2,yt=Math.cos(this.angle),_t=Math.sin(this.angle),at=h-Math.round(h)+yt*Je+_t*pt,At=b-Math.round(b)+yt*pt+_t*Je,Tt=new Float64Array(M);if(n.translate(Tt,Tt,[at>.5?at-1:at,At>.5?At-1:At,0]),this.alignedProjMatrix=Tt,M=n.invert(new Float64Array(16),this.pixelMatrix),!M)throw new Error("failed to invert matrix");this.pixelMatrixInverse=M,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const o=this.pointCoordinate(new n.pointGeometry(0,0)),h=[o.x*this.worldSize,o.y*this.worldSize,0,1];return n.transformMat4(h,h,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.pointGeometry(0,o))}getCameraQueryGeometry(o){const h=this.getCameraPoint();if(o.length===1)return[o[0],h];{let b=h.x,M=h.y,j=h.x,ee=h.y;for(const le of o)b=Math.min(b,le.x),M=Math.min(M,le.y),j=Math.max(j,le.x),ee=Math.max(ee,le.y);return[new n.pointGeometry(b,M),new n.pointGeometry(j,M),new n.pointGeometry(j,ee),new n.pointGeometry(b,ee),new n.pointGeometry(b,M)]}}}class hm{constructor(o){this._hashName=o&&encodeURIComponent(o),n.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(h,b){let M=!1,j=null;const ee=()=>{j=null,M&&(h(),j=setTimeout(ee,300),M=!1)};return()=>(M=!0,j||ee(),j)}(this._updateHashUnthrottled.bind(this))}addTo(o){return this._map=o,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(o){const h=this._map.getCenter(),b=Math.round(100*this._map.getZoom())/100,M=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),j=Math.pow(10,M),ee=Math.round(h.lng*j)/j,le=Math.round(h.lat*j)/j,pe=this._map.getBearing(),Te=this._map.getPitch();let Ne="";if(Ne+=o?`/${ee}/${le}/${b}`:`${b}/${le}/${ee}`,(pe||Te)&&(Ne+="/"+Math.round(10*pe)/10),Te&&(Ne+=`/${Math.round(Te)}`),this._hashName){const Be=this._hashName;let qe=!1;const tt=window.location.hash.slice(1).split("&").map(Qe=>{const Je=Qe.split("=")[0];return Je===Be?(qe=!0,`${Je}=${Ne}`):Qe}).filter(Qe=>Qe);return qe||tt.push(`${Be}=${Ne}`),`#${tt.join("&")}`}return`#${Ne}`}_getCurrentHash(){const o=window.location.hash.replace("#","");if(this._hashName){let h;return o.split("&").map(b=>b.split("=")).forEach(b=>{b[0]===this._hashName&&(h=b)}),(h&&h[1]||"").split("/")}return o.split("/")}_onHashChange(){const o=this._getCurrentHash();if(o.length>=3&&!o.some(h=>isNaN(h))){const h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:h,pitch:+(o[4]||0)}),!0}return!1}_updateHashUnthrottled(){const o=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,o)}catch{}}}const $c={linearity:.3,easing:n.bezier(0,0,.3,1)},pm=n.extend({deceleration:2500,maxSpeed:1400},$c),fm=n.extend({deceleration:20,maxSpeed:1400},$c),Fl=n.extend({deceleration:1e3,maxSpeed:360},$c),mm=n.extend({deceleration:1e3,maxSpeed:90},$c);class gm{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.exported.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,h=n.exported.now();for(;o.length>0&&h-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const h={zoom:0,bearing:0,pitch:0,pan:new n.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:j}of this._inertiaBuffer)h.zoom+=j.zoomDelta||0,h.bearing+=j.bearingDelta||0,h.pitch+=j.pitchDelta||0,j.panDelta&&h.pan._add(j.panDelta),j.around&&(h.around=j.around),j.pinchAround&&(h.pinchAround=j.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,M={};if(h.pan.mag()){const j=Vc(h.pan.mag(),b,n.extend({},pm,o||{}));M.offset=h.pan.mult(j.amount/h.pan.mag()),M.center=this._map.transform.center,Uc(M,j)}if(h.zoom){const j=Vc(h.zoom,b,fm);M.zoom=this._map.transform.zoom+j.amount,Uc(M,j)}if(h.bearing){const j=Vc(h.bearing,b,Fl);M.bearing=this._map.transform.bearing+n.clamp(j.amount,-179,179),Uc(M,j)}if(h.pitch){const j=Vc(h.pitch,b,mm);M.pitch=this._map.transform.pitch+j.amount,Uc(M,j)}if(M.zoom||M.bearing){const j=h.pinchAround===void 0?h.around:h.pinchAround;M.around=j?this._map.unproject(j):this._map.getCenter()}return this.clear(),n.extend(M,{noMoveStart:!0})}}function Uc(E,o){(!E.duration||E.duration<o.duration)&&(E.duration=o.duration,E.easing=o.easing)}function Vc(E,o,h){const{maxSpeed:b,linearity:M,deceleration:j}=h,ee=n.clamp(E*M/(o/1e3),-b,b),le=Math.abs(ee)/(j*M);return{easing:h.easing,duration:1e3*le,amount:ee*(le/2)}}class Qs extends n.Event{constructor(o,h,b,M={}){const j=y.mousePos(h.getCanvasContainer(),b),ee=h.unproject(j);super(o,n.extend({point:j,lngLat:ee,originalEvent:b},M)),this._defaultPrevented=!1,this.target=h}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ms extends n.Event{constructor(o,h,b){const M=o==="touchend"?b.changedTouches:b.touches,j=y.touchPos(h.getCanvasContainer(),M),ee=j.map(pe=>h.unproject(pe)),le=j.reduce((pe,Te,Ne,Be)=>pe.add(Te.div(Be.length)),new n.pointGeometry(0,0));super(o,{points:j,point:le,lngLats:ee,lngLat:h.unproject(le),originalEvent:b}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class xx extends n.Event{constructor(o,h,b){super(o,{originalEvent:b}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class So{constructor(o,h){this._map=o,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(o){return this._firePreventable(new xx(o.type,this._map,o))}mousedown(o,h){return this._mousedownPos=h,this._firePreventable(new Qs(o.type,this._map,o))}mouseup(o){this._map.fire(new Qs(o.type,this._map,o))}click(o,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new Qs(o.type,this._map,o))}dblclick(o){return this._firePreventable(new Qs(o.type,this._map,o))}mouseover(o){this._map.fire(new Qs(o.type,this._map,o))}mouseout(o){this._map.fire(new Qs(o.type,this._map,o))}touchstart(o){return this._firePreventable(new ms(o.type,this._map,o))}touchmove(o){this._map.fire(new ms(o.type,this._map,o))}touchend(o){this._map.fire(new ms(o.type,this._map,o))}touchcancel(o){this._map.fire(new ms(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ym{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(o){this._map.fire(new Qs(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Qs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._ignoreContextMenu||this._map.fire(new Qs(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class il{constructor(o,h){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,h){this.isEnabled()&&o.shiftKey&&o.button===0&&(y.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(o,h){if(!this._active)return;const b=h;if(this._lastPos.equals(b)||!this._box&&b.dist(this._startPos)<this._clickTolerance)return;const M=this._startPos;this._lastPos=b,this._box||(this._box=y.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));const j=Math.min(M.x,b.x),ee=Math.max(M.x,b.x),le=Math.min(M.y,b.y),pe=Math.max(M.y,b.y);y.setTransform(this._box,`translate(${j}px,${le}px)`),this._box.style.width=ee-j+"px",this._box.style.height=pe-le+"px"}mouseupWindow(o,h){if(!this._active||o.button!==0)return;const b=this._startPos,M=h;if(this.reset(),y.suppressClick(),b.x!==M.x||b.y!==M.y)return this._map.fire(new n.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:j=>j.fitScreenCoordinates(b,M,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(y.remove(this._box),this._box=null),y.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(o,h){return this._map.fire(new n.Event(o,{originalEvent:h}))}}function nl(E,o){if(E.length!==o.length)throw new Error(`The number of touches and points are not equal - touches ${E.length}, points ${o.length}`);const h={};for(let b=0;b<E.length;b++)h[E[b].identifier]=o[b];return h}class vx{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(o,h,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),b.length===this.numTouches&&(this.centroid=function(M){const j=new n.pointGeometry(0,0);for(const ee of M)j._add(ee);return j.div(M.length)}(h),this.touches=nl(b,h)))}touchmove(o,h,b){if(this.aborted||!this.centroid)return;const M=nl(b,h);for(const j in this.touches){const ee=this.touches[j],le=M[j];(!le||le.dist(ee)>30)&&(this.aborted=!0)}}touchend(o,h,b){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),b.length===0){const M=!this.aborted&&this.centroid;if(this.reset(),M)return M}}}class Vh{constructor(o){this.singleTap=new vx(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(o,h,b){this.singleTap.touchstart(o,h,b)}touchmove(o,h,b){this.singleTap.touchmove(o,h,b)}touchend(o,h,b){const M=this.singleTap.touchend(o,h,b);if(M){const j=o.timeStamp-this.lastTime<500,ee=!this.lastTap||this.lastTap.dist(M)<30;if(j&&ee||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=M,this.count===this.numTaps)return this.reset(),M}}}class bx{constructor(){this._zoomIn=new Vh({numTouches:1,numTaps:2}),this._zoomOut=new Vh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,h,b){this._zoomIn.touchstart(o,h,b),this._zoomOut.touchstart(o,h,b)}touchmove(o,h,b){this._zoomIn.touchmove(o,h,b),this._zoomOut.touchmove(o,h,b)}touchend(o,h,b){const M=this._zoomIn.touchend(o,h,b),j=this._zoomOut.touchend(o,h,b);return M?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ee=>ee.easeTo({duration:300,zoom:ee.getZoom()+1,around:ee.unproject(M)},{originalEvent:o})}):j?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ee=>ee.easeTo({duration:300,zoom:ee.getZoom()-1,around:ee.unproject(j)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const xm={0:1,2:2};class rl{constructor(o){this.reset(),this._clickTolerance=o.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(o,h){return!1}_move(o,h){return{}}mousedown(o,h){if(this._lastPoint)return;const b=y.mouseButton(o);this._correctButton(o,b)&&(this._lastPoint=h,this._eventButton=b)}mousemoveWindow(o,h){const b=this._lastPoint;if(b){if(o.preventDefault(),function(M,j){const ee=xm[j];return M.buttons===void 0||(M.buttons&ee)!==ee}(o,this._eventButton))this.reset();else if(this._moved||!(h.dist(b)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(b,h)}}mouseupWindow(o){this._lastPoint&&y.mouseButton(o)===this._eventButton&&(this._moved&&y.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Eo extends rl{mousedown(o,h){super.mousedown(o,h),this._lastPoint&&(this._active=!0)}_correctButton(o,h){return h===0&&!o.ctrlKey}_move(o,h){return{around:h,panDelta:h.sub(o)}}}class fi extends rl{_correctButton(o,h){return h===0&&o.ctrlKey||h===2}_move(o,h){const b=.8*(h.x-o.x);if(b)return this._active=!0,{bearingDelta:b}}contextmenu(o){o.preventDefault()}}class Gh extends rl{_correctButton(o,h){return h===0&&o.ctrlKey||h===2}_move(o,h){const b=-.5*(h.y-o.y);if(b)return this._active=!0,{pitchDelta:b}}contextmenu(o){o.preventDefault()}}class Gc{constructor(o,h){this._minTouches=o.cooperativeGestures?2:1,this._clickTolerance=o.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new n.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(o,h,b){return this._calculateTransform(o,h,b)}touchmove(o,h,b){if(this._map._cooperativeGestures&&(this._minTouches===2&&b.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(o,!1,b.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(b.length<this._minTouches))return o.preventDefault(),this._calculateTransform(o,h,b)}touchend(o,h,b){this._calculateTransform(o,h,b),this._active&&b.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,h,b){b.length>0&&(this._active=!0);const M=nl(b,h),j=new n.pointGeometry(0,0),ee=new n.pointGeometry(0,0);let le=0;for(const Te in M){const Ne=M[Te],Be=this._touches[Te];Be&&(j._add(Ne),ee._add(Ne.sub(Be)),le++,M[Te]=Ne)}if(this._touches=M,le<this._minTouches||!ee.mag())return;const pe=ee.div(le);return this._sum._add(pe),this._sum.mag()<this._clickTolerance?void 0:{around:j.div(le),panDelta:pe}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class sl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(o){}_move(o,h,b){return{}}touchstart(o,h,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([h[0],h[1]]))}touchmove(o,h,b){if(!this._firstTwoTouches)return;o.preventDefault();const[M,j]=this._firstTwoTouches,ee=Hc(b,h,M),le=Hc(b,h,j);if(!ee||!le)return;const pe=this._aroundCenter?null:ee.add(le).div(2);return this._move([ee,le],pe,o)}touchend(o,h,b){if(!this._firstTwoTouches)return;const[M,j]=this._firstTwoTouches,ee=Hc(b,h,M),le=Hc(b,h,j);ee&&le||(this._active&&y.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Hc(E,o,h){for(let b=0;b<E.length;b++)if(E[b].identifier===h)return o[b]}function ei(E,o){return Math.log(E/o)/Math.LN2}class Hh extends sl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,h){const b=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(ei(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ei(this._distance,b),pinchAround:h}}}function vm(E,o){return 180*E.angleWith(o)/Math.PI}class _x extends sl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,h){const b=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:vm(this._vector,b),pinchAround:h}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const h=25/(Math.PI*this._minDiameter)*360,b=vm(o,this._startVector);return Math.abs(b)<h}}function Wc(E){return Math.abs(E.y)>Math.abs(E.x)}class bm extends sl{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(o,h,b){super.touchstart(o,h,b),this._currentTouchCount=b.length}_start(o){this._lastPoints=o,Wc(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,h,b){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const M=o[0].sub(this._lastPoints[0]),j=o[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(M,j,b.timeStamp),this._valid?(this._lastPoints=o,this._active=!0,{pitchDelta:(M.y+j.y)/2*-.5}):void 0}gestureBeginsVertically(o,h,b){if(this._valid!==void 0)return this._valid;const M=o.mag()>=2,j=h.mag()>=2;if(!M&&!j)return;if(!M||!j)return this._firstMove===void 0&&(this._firstMove=b),b-this._firstMove<100&&void 0;const ee=o.y>0==h.y>0;return Wc(o)&&Wc(h)&&ee}}const _m={panStep:100,bearingStep:15,pitchStep:10};class wx{constructor(){const o=_m;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let h=0,b=0,M=0,j=0,ee=0;switch(o.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:o.shiftKey?b=-1:(o.preventDefault(),j=-1);break;case 39:o.shiftKey?b=1:(o.preventDefault(),j=1);break;case 38:o.shiftKey?M=1:(o.preventDefault(),ee=-1);break;case 40:o.shiftKey?M=-1:(o.preventDefault(),ee=1);break;default:return}return this._rotationDisabled&&(b=0,M=0),{cameraAnimation:le=>{const pe=le.getZoom();le.easeTo({duration:300,easeId:"keyboardHandler",easing:Cx,zoom:h?Math.round(pe)+h*(o.shiftKey?2:1):pe,bearing:le.getBearing()+b*this._bearingStep,pitch:le.getPitch()+M*this._pitchStep,offset:[-j*this._panStep,-ee*this._panStep],center:le.getCenter()},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Cx(E){return E*(2-E)}const ld=4.000244140625;class Wh{constructor(o,h){this._map=o,this._el=o.getCanvasContainer(),this._handler=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,n.bindAll(["_onTimeout"],this)}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=o&&o.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;o.preventDefault()}let h=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const b=n.exported.now(),M=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,h!==0&&h%ld==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":M>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(M*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),o.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=o,this._delta-=h,this._active||this._start(o)),o.preventDefault()}_onTimeout(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=y.mousePos(this._el,o);this._around=n.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(h)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._map.transform;if(this._delta!==0){const le=this._type==="wheel"&&Math.abs(this._delta)>ld?this._wheelZoomRate:this._defaultZoomRate;let pe=2/(1+Math.exp(-Math.abs(this._delta*le)));this._delta<0&&pe!==0&&(pe=1/pe);const Te=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):o.scale;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(Te*pe))),this._type==="wheel"&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const h=typeof this._targetZoom=="number"?this._targetZoom:o.zoom,b=this._startZoom,M=this._easing;let j,ee=!1;if(this._type==="wheel"&&b&&M){const le=Math.min((n.exported.now()-this._lastWheelEventTime)/200,1),pe=M(le);j=n.number(b,h,pe),le<1?this._frameId||(this._frameId=!0):ee=!0}else j=h,ee=!0;return this._active=!0,ee&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ee,zoomDelta:j-o.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let h=n.ease;if(this._prevEase){const b=this._prevEase,M=(n.exported.now()-b.start)/b.duration,j=b.easing(M+.01)-b.easing(M),ee=.27/Math.sqrt(j*j+1e-4)*.01,le=Math.sqrt(.0729-ee*ee);h=n.bezier(ee,le,.25,1)}return this._prevEase={start:n.exported.now(),duration:o,easing:h},h}reset(){this._active=!1}}class qh{constructor(o,h){this._clickZoom=o,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Yh{constructor(){this.reset()}reset(){this._active=!1}dblclick(o,h){return o.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:b.getZoom()+(o.shiftKey?-1:1),around:b.unproject(h)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fs{constructor(){this._tap=new Vh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(o,h,b){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?b.length>0&&(this._swipePoint=h[0],this._swipeTouch=b[0].identifier):this._tap.touchstart(o,h,b))}touchmove(o,h,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const M=h[0],j=M.y-this._swipePoint.y;return this._swipePoint=M,o.preventDefault(),this._active=!0,{zoomDelta:j/128}}}else this._tap.touchmove(o,h,b)}touchend(o,h,b){this._tapTime?this._swipePoint&&b.length===0&&this.reset():this._tap.touchend(o,h,b)&&(this._tapTime=o.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ko{constructor(o,h,b){this._el=o,this._mousePan=h,this._touchPan=b}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class wm{constructor(o,h,b){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=h,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Zh{constructor(o,h,b,M){this._el=o,this._touchZoom=h,this._touchRotate=b,this._tapDragZoom=M,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Bl=E=>E.zoom||E.drag||E.pitch||E.rotate;class Xh extends n.Event{}function cd(E){return E.panDelta&&E.panDelta.mag()||E.zoomDelta||E.bearingDelta||E.pitchDelta}class va{constructor(o,h){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new gm(o),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h),n.bindAll(["handleEvent","handleWindowEvent"],this);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[window,"blur",void 0]];for(const[M,j,ee]of this._listeners)y.addEventListener(M,j,M===document?this.handleWindowEvent:this.handleEvent,ee)}destroy(){for(const[o,h,b]of this._listeners)y.removeEventListener(o,h,o===document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(o){const h=this._map,b=h.getCanvasContainer();this._add("mapEvent",new So(h,o));const M=h.boxZoom=new il(h,o);this._add("boxZoom",M);const j=new bx,ee=new Yh;h.doubleClickZoom=new qh(ee,j),this._add("tapZoom",j),this._add("clickZoom",ee);const le=new Fs;this._add("tapDragZoom",le);const pe=h.touchPitch=new bm(h);this._add("touchPitch",pe);const Te=new fi(o),Ne=new Gh(o);h.dragRotate=new wm(o,Te,Ne),this._add("mouseRotate",Te,["mousePitch"]),this._add("mousePitch",Ne,["mouseRotate"]);const Be=new Eo(o),qe=new Gc(o,h);h.dragPan=new ko(b,Be,qe),this._add("mousePan",Be),this._add("touchPan",qe,["touchZoom","touchRotate"]);const tt=new _x,Qe=new Hh;h.touchZoomRotate=new Zh(b,Qe,tt,le),this._add("touchRotate",tt,["touchPan","touchZoom"]),this._add("touchZoom",Qe,["touchPan","touchRotate"]);const Je=h.scrollZoom=new Wh(h,this);this._add("scrollZoom",Je,["mousePan"]);const pt=h.keyboard=new wx;this._add("keyboard",pt),this._add("blockableMapEvent",new ym(h));for(const yt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])o.interactive&&o[yt]&&h[yt].enable(o[yt])}_add(o,h,b){this._handlers.push({handlerName:o,handler:h,allowed:b}),this._handlersById[o]=h}stop(o){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Bl(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,h,b){for(const M in o)if(M!==b&&(!h||h.indexOf(M)<0))return!0;return!1}handleWindowEvent(o){this.handleEvent(o,`${o.type}Window`)}_getMapTouches(o){const h=[];for(const b of o)this._el.contains(b.target)&&h.push(b);return h}handleEvent(o,h){if(o.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const b=o.type==="renderFrame"?void 0:o,M={needsRenderFrame:!1},j={},ee={},le=o.touches,pe=le?this._getMapTouches(le):void 0,Te=pe?y.touchPos(this._el,pe):y.mousePos(this._el,o);for(const{handlerName:qe,handler:tt,allowed:Qe}of this._handlers){if(!tt.isEnabled())continue;let Je;this._blockedByActive(ee,Qe,qe)?tt.reset():tt[h||o.type]&&(Je=tt[h||o.type](o,Te,pe),this.mergeHandlerResult(M,j,Je,qe,b),Je&&Je.needsRenderFrame&&this._triggerRenderFrame()),(Je||tt.isActive())&&(ee[qe]=tt)}const Ne={};for(const qe in this._previousActiveHandlers)ee[qe]||(Ne[qe]=b);this._previousActiveHandlers=ee,(Object.keys(Ne).length||cd(M))&&(this._changes.push([M,j,Ne]),this._triggerRenderFrame()),(Object.keys(ee).length||cd(M))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Be}=M;Be&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Be(this._map))}mergeHandlerResult(o,h,b,M,j){if(!b)return;n.extend(o,b);const ee={handlerName:M,originalEvent:b.originalEvent||j};b.zoomDelta!==void 0&&(h.zoom=ee),b.panDelta!==void 0&&(h.drag=ee),b.pitchDelta!==void 0&&(h.pitch=ee),b.bearingDelta!==void 0&&(h.rotate=ee)}_applyChanges(){const o={},h={},b={};for(const[M,j,ee]of this._changes)M.panDelta&&(o.panDelta=(o.panDelta||new n.pointGeometry(0,0))._add(M.panDelta)),M.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+M.zoomDelta),M.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+M.bearingDelta),M.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+M.pitchDelta),M.around!==void 0&&(o.around=M.around),M.pinchAround!==void 0&&(o.pinchAround=M.pinchAround),M.noInertia&&(o.noInertia=M.noInertia),n.extend(h,j),n.extend(b,ee);this._updateMapTransform(o,h,b),this._changes=[]}_updateMapTransform(o,h,b){const M=this._map,j=M.transform,ee=M.style&&M.style.terrain;if(!(cd(o)||ee&&this._drag))return this._fireEvents(h,b,!0);let{panDelta:le,zoomDelta:pe,bearingDelta:Te,pitchDelta:Ne,around:Be,pinchAround:qe}=o;qe!==void 0&&(Be=qe),M._stop(!0),Be=Be||M.transform.centerPoint;const tt=j.pointLocation(le?Be.sub(le):Be);Te&&(j.bearing+=Te),Ne&&(j.pitch+=Ne),pe&&(j.zoom+=pe),ee?h.drag&&!this._drag?(this._drag={center:j.centerPoint,lngLat:j.pointLocation(Be),point:Be,handlerName:h.drag.handlerName},M.fire(new n.Event("freezeElevation",{freeze:!0}))):this._drag&&b[this._drag.handlerName]?(M.fire(new n.Event("freezeElevation",{freeze:!1})),this._drag=null):h.drag&&this._drag&&(j.center=j.pointLocation(j.centerPoint.sub(le))):j.setLocationAtPoint(tt,Be),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(h,b,!0)}_fireEvents(o,h,b){const M=Bl(this._eventsInProgress),j=Bl(o),ee={};for(const Ne in o){const{originalEvent:Be}=o[Ne];this._eventsInProgress[Ne]||(ee[`${Ne}start`]=Be),this._eventsInProgress[Ne]=o[Ne]}!M&&j&&this._fireEvent("movestart",j.originalEvent);for(const Ne in ee)this._fireEvent(Ne,ee[Ne]);j&&this._fireEvent("move",j.originalEvent);for(const Ne in o){const{originalEvent:Be}=o[Ne];this._fireEvent(Ne,Be)}const le={};let pe;for(const Ne in this._eventsInProgress){const{handlerName:Be,originalEvent:qe}=this._eventsInProgress[Ne];this._handlersById[Be].isActive()||(delete this._eventsInProgress[Ne],pe=h[Be]||qe,le[`${Ne}end`]=pe)}for(const Ne in le)this._fireEvent(Ne,le[Ne]);const Te=Bl(this._eventsInProgress);if(b&&(M||j)&&!Te){this._updatingCamera=!0;const Ne=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Be=qe=>qe!==0&&-this._bearingSnap<qe&&qe<this._bearingSnap;Ne?(Be(Ne.bearing||this._map.getBearing())&&(Ne.bearing=0),this._map.easeTo(Ne,{originalEvent:pe})):(this._map.fire(new n.Event("moveend",{originalEvent:pe})),Be(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,h){this._map.fire(new n.Event(o,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{delete this._frameId,this.handleEvent(new Xh("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const or={extend:(E,...o)=>n.extend(E,...o),run(E){E()},logToElement(E,o=!1,h="log"){const b=window.document.getElementById(h);b&&(o&&(b.innerHTML=""),b.innerHTML+=`<br>${E}`)}};class ud extends n.Evented{constructor(o,h){super(),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=h.bearingSnap,n.bindAll(["_renderFrameCallback"],this)}getCenter(){return new n.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(o,h){return this.jumpTo({center:o},h)}panBy(o,h,b){return o=n.pointGeometry.convert(o).mult(-1),this.panTo(this.transform.center,n.extend({offset:o},h),b)}panTo(o,h,b){return this.easeTo(n.extend({center:o},h),b)}getZoom(){return this.transform.zoom}setZoom(o,h){return this.jumpTo({zoom:o},h),this}zoomTo(o,h,b){return this.easeTo(n.extend({zoom:o},h),b)}zoomIn(o,h){return this.zoomTo(this.getZoom()+1,o,h),this}zoomOut(o,h){return this.zoomTo(this.getZoom()-1,o,h),this}getBearing(){return this.transform.bearing}setBearing(o,h){return this.jumpTo({bearing:o},h),this}getPadding(){return this.transform.padding}setPadding(o,h){return this.jumpTo({padding:o},h),this}rotateTo(o,h,b){return this.easeTo(n.extend({bearing:o},h),b)}resetNorth(o,h){return this.rotateTo(0,n.extend({duration:1e3},o),h),this}resetNorthPitch(o,h){return this.easeTo(n.extend({bearing:0,pitch:0,duration:1e3},o),h),this}snapToNorth(o,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,h):this}getPitch(){return this.transform.pitch}setPitch(o,h){return this.jumpTo({pitch:o},h),this}cameraForBounds(o,h){o=n.LngLatBounds.convert(o);const b=h&&h.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),b,h)}_cameraForBoxAndBearing(o,h,b,M){const j={top:0,bottom:0,right:0,left:0};if(typeof(M=n.extend({padding:j,offset:[0,0],maxZoom:this.transform.maxZoom},M)).padding=="number"){const Tt=M.padding;M.padding={top:Tt,bottom:Tt,right:Tt,left:Tt}}M.padding=n.extend(j,M.padding);const ee=this.transform,le=ee.padding,pe=ee.project(n.LngLat.convert(o)),Te=ee.project(n.LngLat.convert(h)),Ne=pe.rotate(-b*Math.PI/180),Be=Te.rotate(-b*Math.PI/180),qe=new n.pointGeometry(Math.max(Ne.x,Be.x),Math.max(Ne.y,Be.y)),tt=new n.pointGeometry(Math.min(Ne.x,Be.x),Math.min(Ne.y,Be.y)),Qe=qe.sub(tt),Je=(ee.width-(le.left+le.right+M.padding.left+M.padding.right))/Qe.x,pt=(ee.height-(le.top+le.bottom+M.padding.top+M.padding.bottom))/Qe.y;if(pt<0||Je<0)return void n.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const yt=Math.min(ee.scaleZoom(ee.scale*Math.min(Je,pt)),M.maxZoom),_t=n.pointGeometry.convert(M.offset),at=new n.pointGeometry((M.padding.left-M.padding.right)/2,(M.padding.top-M.padding.bottom)/2).rotate(b*Math.PI/180),At=_t.add(at).mult(ee.scale/ee.zoomScale(yt));return{center:ee.unproject(pe.add(Te).div(2).sub(At)),zoom:yt,bearing:b}}fitBounds(o,h,b){return this._fitInternal(this.cameraForBounds(o,h),h,b)}fitScreenCoordinates(o,h,b,M,j){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(n.pointGeometry.convert(o)),this.transform.pointLocation(n.pointGeometry.convert(h)),b,M),M,j)}_fitInternal(o,h,b){return o?(delete(h=n.extend(o,h)).padding,h.linear?this.easeTo(h,b):this.flyTo(h,b)):this}jumpTo(o,h){this.stop();const b=this.transform;let M=!1,j=!1,ee=!1;return"zoom"in o&&b.zoom!==+o.zoom&&(M=!0,b.zoom=+o.zoom),o.center!==void 0&&(b.center=n.LngLat.convert(o.center)),"bearing"in o&&b.bearing!==+o.bearing&&(j=!0,b.bearing=+o.bearing),"pitch"in o&&b.pitch!==+o.pitch&&(ee=!0,b.pitch=+o.pitch),o.padding==null||b.isPaddingEqual(o.padding)||(b.padding=o.padding),this.fire(new n.Event("movestart",h)).fire(new n.Event("move",h)),M&&this.fire(new n.Event("zoomstart",h)).fire(new n.Event("zoom",h)).fire(new n.Event("zoomend",h)),j&&this.fire(new n.Event("rotatestart",h)).fire(new n.Event("rotate",h)).fire(new n.Event("rotateend",h)),ee&&this.fire(new n.Event("pitchstart",h)).fire(new n.Event("pitch",h)).fire(new n.Event("pitchend",h)),this.fire(new n.Event("moveend",h))}calculateCameraOptionsFromTo(o,h,b,M=0){const j=n.MercatorCoordinate.fromLngLat(o,h),ee=n.MercatorCoordinate.fromLngLat(b,M),le=ee.x-j.x,pe=ee.y-j.y,Te=ee.z-j.z,Ne=Math.hypot(le,pe,Te);if(Ne===0)throw new Error("Can't calculate camera options with same From and To");const Be=Math.hypot(le,pe),qe=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Ne/this.transform.tileSize),tt=180*Math.atan2(le,-pe)/Math.PI;let Qe=180*Math.acos(Be/Ne)/Math.PI;return Qe=Te<0?90-Qe:90+Qe,{center:ee.toLngLat(),zoom:qe,pitch:Qe,bearing:tt}}easeTo(o,h){this._stop(!1,o.easeId),((o=n.extend({offset:[0,0],duration:500,easing:n.ease},o)).animate===!1||!o.essential&&n.exported.prefersReducedMotion)&&(o.duration=0);const b=this.transform,M=this.getZoom(),j=this.getBearing(),ee=this.getPitch(),le=this.getPadding(),pe="zoom"in o?+o.zoom:M,Te="bearing"in o?this._normalizeBearing(o.bearing,j):j,Ne="pitch"in o?+o.pitch:ee,Be="padding"in o?o.padding:b.padding,qe=n.pointGeometry.convert(o.offset);let tt=b.centerPoint.add(qe);const Qe=b.pointLocation(tt),Je=n.LngLat.convert(o.center||Qe);this._normalizeCenter(Je);const pt=b.project(Qe),yt=b.project(Je).sub(pt),_t=b.zoomScale(pe-M);let at,At;o.around&&(at=n.LngLat.convert(o.around),At=b.locationPoint(at));const Tt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||pe!==M,this._rotating=this._rotating||j!==Te,this._pitching=this._pitching||Ne!==ee,this._padding=!b.isPaddingEqual(Be),this._easeId=o.easeId,this._prepareEase(h,o.noMoveStart,Tt),this._ease(Nt=>{if(this._zooming&&(b.zoom=n.number(M,pe,Nt)),this._rotating&&(b.bearing=n.number(j,Te,Nt)),this._pitching&&(b.pitch=n.number(ee,Ne,Nt)),this._padding&&(b.interpolatePadding(le,Be,Nt),tt=b.centerPoint.add(qe)),at)b.setLocationAtPoint(at,At);else{const Ot=b.zoomScale(b.zoom-M),Ut=pe>M?Math.min(2,_t):Math.max(.5,_t),Lt=Math.pow(Ut,1-Nt),ai=b.unproject(pt.add(yt.mult(Nt*Lt)).mult(Ot));b.setLocationAtPoint(b.renderWorldCopies?ai.wrap():ai,tt)}this._fireMoveEvents(h)},Nt=>{this._afterEase(h,Nt)},o),this}_prepareEase(o,h,b={}){this._moving=!0,this.fire(new n.Event("freezeElevation",{freeze:!0})),h||b.moving||this.fire(new n.Event("movestart",o)),this._zooming&&!b.zooming&&this.fire(new n.Event("zoomstart",o)),this._rotating&&!b.rotating&&this.fire(new n.Event("rotatestart",o)),this._pitching&&!b.pitching&&this.fire(new n.Event("pitchstart",o))}_fireMoveEvents(o){this.fire(new n.Event("move",o)),this._zooming&&this.fire(new n.Event("zoom",o)),this._rotating&&this.fire(new n.Event("rotate",o)),this._pitching&&this.fire(new n.Event("pitch",o))}_afterEase(o,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId,this.fire(new n.Event("freezeElevation",{freeze:!1}));const b=this._zooming,M=this._rotating,j=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new n.Event("zoomend",o)),M&&this.fire(new n.Event("rotateend",o)),j&&this.fire(new n.Event("pitchend",o)),this.fire(new n.Event("moveend",o))}flyTo(o,h){if(!o.essential&&n.exported.prefersReducedMotion){const Ii=n.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ii,h)}this.stop(),o=n.extend({offset:[0,0],speed:1.2,curve:1.42,easing:n.ease},o);const b=this.transform,M=this.getZoom(),j=this.getBearing(),ee=this.getPitch(),le=this.getPadding(),pe="zoom"in o?n.clamp(+o.zoom,b.minZoom,b.maxZoom):M,Te="bearing"in o?this._normalizeBearing(o.bearing,j):j,Ne="pitch"in o?+o.pitch:ee,Be="padding"in o?o.padding:b.padding,qe=b.zoomScale(pe-M),tt=n.pointGeometry.convert(o.offset);let Qe=b.centerPoint.add(tt);const Je=b.pointLocation(Qe),pt=n.LngLat.convert(o.center||Je);this._normalizeCenter(pt);const yt=b.project(Je),_t=b.project(pt).sub(yt);let at=o.curve;const At=Math.max(b.width,b.height),Tt=At/qe,Nt=_t.mag();if("minZoom"in o){const Ii=n.clamp(Math.min(o.minZoom,M,pe),b.minZoom,b.maxZoom),Bn=At/b.zoomScale(Ii-M);at=Math.sqrt(Bn/Nt*2)}const Ot=at*at;function Ut(Ii){const Bn=(Tt*Tt-At*At+(Ii?-1:1)*Ot*Ot*Nt*Nt)/(2*(Ii?Tt:At)*Ot*Nt);return Math.log(Math.sqrt(Bn*Bn+1)-Bn)}function Lt(Ii){return(Math.exp(Ii)-Math.exp(-Ii))/2}function ai(Ii){return(Math.exp(Ii)+Math.exp(-Ii))/2}const Zt=Ut(0);let li=function(Ii){return ai(Zt)/ai(Zt+at*Ii)},Xi=function(Ii){return At*((ai(Zt)*(Lt(Bn=Zt+at*Ii)/ai(Bn))-Lt(Zt))/Ot)/Nt;var Bn},un=(Ut(1)-Zt)/at;if(Math.abs(Nt)<1e-6||!isFinite(un)){if(Math.abs(At-Tt)<1e-6)return this.easeTo(o,h);const Ii=Tt<At?-1:1;un=Math.abs(Math.log(Tt/At))/at,Xi=function(){return 0},li=function(Bn){return Math.exp(Ii*at*Bn)}}return o.duration="duration"in o?+o.duration:1e3*un/("screenSpeed"in o?+o.screenSpeed/at:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=j!==Te,this._pitching=Ne!==ee,this._padding=!b.isPaddingEqual(Be),this._prepareEase(h,!1),this._ease(Ii=>{const Bn=Ii*un,$n=1/li(Bn);b.zoom=Ii===1?pe:M+b.scaleZoom($n),this._rotating&&(b.bearing=n.number(j,Te,Ii)),this._pitching&&(b.pitch=n.number(ee,Ne,Ii)),this._padding&&(b.interpolatePadding(le,Be,Ii),Qe=b.centerPoint.add(tt));const _n=Ii===1?pt:b.unproject(yt.add(_t.mult(Xi(Bn))).mult($n));b.setLocationAtPoint(b.renderWorldCopies?_n.wrap():_n,Qe),this._fireMoveEvents(h)},()=>this._afterEase(h),o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const b=this._onEaseEnd;delete this._onEaseEnd,b.call(this,h)}if(!o){const b=this.handlers;b&&b.stop(!1)}return this}_ease(o,h,b){b.animate===!1||b.duration===0?(o(1),h()):(this._easeStart=n.exported.now(),this._easeOptions=b,this._onEaseFrame=o,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const o=Math.min((n.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(o,h){o=n.wrap(o,-180,180);const b=Math.abs(o-h);return Math.abs(o-360-h)<b&&(o-=360),Math.abs(o+360-h)<b&&(o+=360),o}_normalizeCenter(o){const h=this.transform;if(!h.renderWorldCopies||h.lngRange)return;const b=o.lng-h.center.lng;o.lng+=b>180?-360:b<-180?360:0}}class dd{constructor(o={}){this.options=o,n.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(o){return this._map=o,this._compact=this.options&&this.options.compact,this._container=y.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=y.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=y.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){y.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(o,h){const b=this._map._getUIString(`AttributionControl.${h}`);o.title=b,o.setAttribute("aria-label",b)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(M=>typeof M!="string"?"":M)):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){const M=this._map.style.stylesheet;this.styleOwner=M.owner,this.styleId=M.id}const h=this._map.style.sourceCaches;for(const M in h){const j=h[M];if(j.used||j.usedForTerrain){const ee=j.getSource();ee.attribution&&o.indexOf(ee.attribution)<0&&o.push(ee.attribution)}}o=o.filter(M=>String(M).trim()),o.sort((M,j)=>M.length-j.length),o=o.filter((M,j)=>{for(let ee=j+1;ee<o.length;ee++)if(o[ee].indexOf(M)>=0)return!1;return!0});const b=o.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,o.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Kh{constructor(o={}){this.options=o,n.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(o){this._map=o,this._compact=this.options&&this.options.compact,this._container=y.create("div","maplibregl-ctrl mapboxgl-ctrl");const h=y.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){y.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const o=this._container.children;if(o.length){const h=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&h.classList.add("maplibregl-compact","mapboxgl-compact"):h.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Cm{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const h=++this._id;return this._queue.push({callback:o,id:h,cancelled:!1}),h}remove(o){const h=this._currentlyRunning,b=h?this._queue.concat(h):this._queue;for(const M of b)if(M.id===o)return void(M.cancelled=!0)}run(o=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const h=this._currentlyRunning=this._queue;this._queue=[];for(const b of h)if(!b.cancelled&&(b.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Tm={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},Tx={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},qa={showCompass:!0,showZoom:!0,visualizePitch:!1};class hd{constructor(o,h,b=!1){this._clickTolerance=10,this.element=h,this.mouseRotate=new fi({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,b&&(this.mousePitch=new Gh({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),n.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),y.addEventListener(h,"mousedown",this.mousedown),y.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),y.addEventListener(h,"touchmove",this.touchmove),y.addEventListener(h,"touchend",this.touchend),y.addEventListener(h,"touchcancel",this.reset)}down(o,h){this.mouseRotate.mousedown(o,h),this.mousePitch&&this.mousePitch.mousedown(o,h),y.disableDrag()}move(o,h){const b=this.map,M=this.mouseRotate.mousemoveWindow(o,h);if(M&&M.bearingDelta&&b.setBearing(b.getBearing()+M.bearingDelta),this.mousePitch){const j=this.mousePitch.mousemoveWindow(o,h);j&&j.pitchDelta&&b.setPitch(b.getPitch()+j.pitchDelta)}}off(){const o=this.element;y.removeEventListener(o,"mousedown",this.mousedown),y.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),y.removeEventListener(o,"touchmove",this.touchmove),y.removeEventListener(o,"touchend",this.touchend),y.removeEventListener(o,"touchcancel",this.reset),this.offTemp()}offTemp(){y.enableDrag(),y.removeEventListener(window,"mousemove",this.mousemove),y.removeEventListener(window,"mouseup",this.mouseup)}mousedown(o){this.down(n.extend({},o,{ctrlKey:!0,preventDefault:()=>o.preventDefault()}),y.mousePos(this.element,o)),y.addEventListener(window,"mousemove",this.mousemove),y.addEventListener(window,"mouseup",this.mouseup)}mousemove(o){this.move(o,y.mousePos(this.element,o))}mouseup(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()}touchstart(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=y.touchPos(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>o.preventDefault()},this._startPos))}touchmove(o){o.targetTouches.length!==1?this.reset():(this._lastPos=y.touchPos(this.element,o.targetTouches)[0],this.move({preventDefault:()=>o.preventDefault()},this._lastPos))}touchend(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Ei(E,o,h){if(E=new n.LngLat(E.lng,E.lat),o){const b=new n.LngLat(E.lng-360,E.lat),M=new n.LngLat(E.lng+360,E.lat),j=h.locationPoint(E).distSqr(o);h.locationPoint(b).distSqr(o)<j?E=b:h.locationPoint(M).distSqr(o)<j&&(E=M)}for(;Math.abs(E.lng-h.center.lng)>180;){const b=h.locationPoint(E);if(b.x>=0&&b.y>=0&&b.x<=h.width&&b.y<=h.height)break;E.lng>h.center.lng?E.lng-=360:E.lng+=360}return E}const Di={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function qc(E,o,h){const b=E.classList;for(const M in Di)b.remove(`maplibregl-${h}-anchor-${M}`,`mapboxgl-${h}-anchor-${M}`);b.add(`maplibregl-${h}-anchor-${o}`,`mapboxgl-${h}-anchor-${o}`)}class Yc extends n.Evented{constructor(o,h){if(super(),(o instanceof HTMLElement||h)&&(o=n.extend({element:o},h)),n.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=n.pointGeometry.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=y.create("div"),this._element.setAttribute("aria-label","Map marker");const b=y.createNS("http://www.w3.org/2000/svg","svg"),M=41,j=27;b.setAttributeNS(null,"display","block"),b.setAttributeNS(null,"height",`${M}px`),b.setAttributeNS(null,"width",`${j}px`),b.setAttributeNS(null,"viewBox",`0 0 ${j} ${M}`);const ee=y.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"stroke","none"),ee.setAttributeNS(null,"stroke-width","1"),ee.setAttributeNS(null,"fill","none"),ee.setAttributeNS(null,"fill-rule","evenodd");const le=y.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"fill-rule","nonzero");const pe=y.createNS("http://www.w3.org/2000/svg","g");pe.setAttributeNS(null,"transform","translate(3.0, 29.0)"),pe.setAttributeNS(null,"fill","#000000");const Te=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const _t of Te){const at=y.createNS("http://www.w3.org/2000/svg","ellipse");at.setAttributeNS(null,"opacity","0.04"),at.setAttributeNS(null,"cx","10.5"),at.setAttributeNS(null,"cy","5.80029008"),at.setAttributeNS(null,"rx",_t.rx),at.setAttributeNS(null,"ry",_t.ry),pe.appendChild(at)}const Ne=y.createNS("http://www.w3.org/2000/svg","g");Ne.setAttributeNS(null,"fill",this._color);const Be=y.createNS("http://www.w3.org/2000/svg","path");Be.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ne.appendChild(Be);const qe=y.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"opacity","0.25"),qe.setAttributeNS(null,"fill","#000000");const tt=y.createNS("http://www.w3.org/2000/svg","path");tt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),qe.appendChild(tt);const Qe=y.createNS("http://www.w3.org/2000/svg","g");Qe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Qe.setAttributeNS(null,"fill","#FFFFFF");const Je=y.createNS("http://www.w3.org/2000/svg","g");Je.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pt=y.createNS("http://www.w3.org/2000/svg","circle");pt.setAttributeNS(null,"fill","#000000"),pt.setAttributeNS(null,"opacity","0.25"),pt.setAttributeNS(null,"cx","5.5"),pt.setAttributeNS(null,"cy","5.5"),pt.setAttributeNS(null,"r","5.4999962");const yt=y.createNS("http://www.w3.org/2000/svg","circle");yt.setAttributeNS(null,"fill","#FFFFFF"),yt.setAttributeNS(null,"cx","5.5"),yt.setAttributeNS(null,"cy","5.5"),yt.setAttributeNS(null,"r","5.4999962"),Je.appendChild(pt),Je.appendChild(yt),le.appendChild(pe),le.appendChild(Ne),le.appendChild(qe),le.appendChild(Qe),le.appendChild(Je),b.appendChild(le),b.setAttributeNS(null,"height",M*this._scale+"px"),b.setAttributeNS(null,"width",j*this._scale+"px"),this._element.appendChild(b),this._offset=n.pointGeometry.convert(o&&o.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",b=>{b.preventDefault()}),this._element.addEventListener("mousedown",b=>{b.preventDefault()}),qc(this._element,this._anchor,"marker"),this._popup=null}addTo(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),y.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=n.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const M=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[M,-1*(38.1-13.5+M)],"bottom-right":[-M,-1*(38.1-13.5+M)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(o){const h=o.code,b=o.charCode||o.keyCode;h!=="Space"&&h!=="Enter"&&b!==32&&b!==13||this.togglePopup()}_onMapClick(o){const h=o.originalEvent.target,b=this._element;this._popup&&(h===b||b.contains(h))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this}_update(o){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Ei(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let h="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?h=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(h=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),o&&o.type!=="moveend"||(this._pos=this._pos.round()),y.setTransform(this._element,`${Di[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${h}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const M=this._map.unproject(this._pos),j=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=M.distanceTo(this._lngLat)>20*j?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(o){return this._offset=n.pointGeometry.convert(o),this._update(),this}_onMove(o){if(!this._isDragging){const h=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=h}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new n.Event("dragstart"))),this.fire(new n.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new n.Event("dragend")),this._state="inactive"}_addDragHandler(o){this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Qh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ur,al=0,Bs=!1;const Sx={maxWidth:100,unit:"metric"};function Zc(E,o,h){const b=h&&h.maxWidth||100,M=E._container.clientHeight/2,j=E.unproject([0,M]),ee=E.unproject([b,M]),le=j.distanceTo(ee);if(h&&h.unit==="imperial"){const pe=3.2808*le;pe>5280?ir(o,b,pe/5280,E._getUIString("ScaleControl.Miles")):ir(o,b,pe,E._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?ir(o,b,le/1852,E._getUIString("ScaleControl.NauticalMiles")):le>=1e3?ir(o,b,le/1e3,E._getUIString("ScaleControl.Kilometers")):ir(o,b,le,E._getUIString("ScaleControl.Meters"))}function ir(E,o,h,b){const M=function(j){const ee=Math.pow(10,`${Math.floor(j)}`.length-1);let le=j/ee;return le=le>=10?10:le>=5?5:le>=3?3:le>=2?2:le>=1?1:function(pe){const Te=Math.pow(10,Math.ceil(-Math.log(pe)/Math.LN10));return Math.round(pe*Te)/Te}(le),ee*le}(h);E.style.width=o*(M/h)+"px",E.innerHTML=`${M}&nbsp;${b}`}const zr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Sm=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function $l(E){if(E){if(typeof E=="number"){const o=Math.round(Math.sqrt(.5*Math.pow(E,2)));return{center:new n.pointGeometry(0,0),top:new n.pointGeometry(0,E),"top-left":new n.pointGeometry(o,o),"top-right":new n.pointGeometry(-o,o),bottom:new n.pointGeometry(0,-E),"bottom-left":new n.pointGeometry(o,-o),"bottom-right":new n.pointGeometry(-o,-o),left:new n.pointGeometry(E,0),right:new n.pointGeometry(-E,0)}}if(E instanceof n.pointGeometry||Array.isArray(E)){const o=n.pointGeometry.convert(E);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:n.pointGeometry.convert(E.center||[0,0]),top:n.pointGeometry.convert(E.top||[0,0]),"top-left":n.pointGeometry.convert(E["top-left"]||[0,0]),"top-right":n.pointGeometry.convert(E["top-right"]||[0,0]),bottom:n.pointGeometry.convert(E.bottom||[0,0]),"bottom-left":n.pointGeometry.convert(E["bottom-left"]||[0,0]),"bottom-right":n.pointGeometry.convert(E["bottom-right"]||[0,0]),left:n.pointGeometry.convert(E.left||[0,0]),right:n.pointGeometry.convert(E.right||[0,0])}}return $l(new n.pointGeometry(0,0))}const Xc={supported:p,setRTLTextPlugin:n.setRTLTextPlugin,getRTLTextPluginStatus:n.getRTLTextPluginStatus,Map:class extends ud{constructor(E){var o;if(n.PerformanceUtils.mark(n.PerformanceMarkers.create),(E=n.extend({},Tx,E)).minZoom!=null&&E.maxZoom!=null&&E.minZoom>E.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(E.minPitch!=null&&E.maxPitch!=null&&E.minPitch>E.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(E.minPitch!=null&&E.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(E.maxPitch!=null&&E.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new od(E.minZoom,E.maxZoom,E.minPitch,E.maxPitch,E.renderWorldCopies),{bearingSnap:E.bearingSnap}),this._interactive=E.interactive,this._cooperativeGestures=E.cooperativeGestures,this._maxTileCacheSize=E.maxTileCacheSize,this._failIfMajorPerformanceCaveat=E.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=E.preserveDrawingBuffer,this._antialias=E.antialias,this._trackResize=E.trackResize,this._bearingSnap=E.bearingSnap,this._refreshExpiredTiles=E.refreshExpiredTiles,this._fadeDuration=E.fadeDuration,this._crossSourceCollisions=E.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=E.collectResourceTiming,this._renderTaskQueue=new Cm,this._controls=[],this._mapId=n.uniqueId(),this._locale=n.extend({},Tm,E.locale),this._clickTolerance=E.clickTolerance,this._pixelRatio=(o=E.pixelRatio)!==null&&o!==void 0?o:devicePixelRatio,this._requestManager=new C(E.transformRequest),typeof E.container=="string"){if(this._container=document.getElementById(E.container),!this._container)throw new Error(`Container '${E.container}' not found.`)}else{if(!(E.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=E.container}if(E.maxBounds&&this.setMaxBounds(E.maxBounds),n.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new va(this,E),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=E.hash&&new hm(typeof E.hash=="string"&&E.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:E.center,zoom:E.zoom,bearing:E.bearing,pitch:E.pitch}),E.bounds&&(this.resize(),this.fitBounds(E.bounds,n.extend({},E.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=E.localIdeographFontFamily,E.style&&this.setStyle(E.style,{localIdeographFontFamily:E.localIdeographFontFamily}),E.attributionControl&&this.addControl(new dd({customAttribution:E.customAttribution})),E.maplibreLogo&&this.addControl(new Kh,E.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",h=>{this._update(h.dataType==="style"),this.fire(new n.Event(`${h.dataType}data`,h))}),this.on("dataloading",h=>{this.fire(new n.Event(`${h.dataType}dataloading`,h))}),this.on("dataabort",h=>{this.fire(new n.Event("sourcedataabort",h))})}_getMapId(){return this._mapId}addControl(E,o){if(o===void 0&&(o=E.getDefaultPosition?E.getDefaultPosition():"top-right"),!E||!E.onAdd)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=E.onAdd(this);this._controls.push(E);const b=this._controlPositions[o];return o.indexOf("bottom")!==-1?b.insertBefore(h,b.firstChild):b.appendChild(h),this}removeControl(E){if(!E||!E.onRemove)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(E);return o>-1&&this._controls.splice(o,1),E.onRemove(this),this}hasControl(E){return this._controls.indexOf(E)>-1}calculateCameraOptionsFromTo(E,o,h,b){return b==null&&this.style.terrain&&(b=this.transform.getElevation(h,this.style.terrain)),super.calculateCameraOptionsFromTo(E,o,h,b)}resize(E){const o=this._containerDimensions(),h=o[0],b=o[1];this._resizeCanvas(h,b,this.getPixelRatio()),this.transform.resize(h,b),this.painter.resize(h,b,this.getPixelRatio());const M=!this._moving;return M&&(this.stop(),this.fire(new n.Event("movestart",E)).fire(new n.Event("move",E))),this.fire(new n.Event("resize",E)),M&&this.fire(new n.Event("moveend",E)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(E){const[o,h]=this._containerDimensions();this._pixelRatio=E,this._resizeCanvas(o,h,E),this.painter.resize(o,h,E)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(E){return this.transform.setMaxBounds(n.LngLatBounds.convert(E)),this._update()}setMinZoom(E){if((E=E??-2)>=-2&&E<=this.transform.maxZoom)return this.transform.minZoom=E,this._update(),this.getZoom()<E&&this.setZoom(E),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(E){if((E=E??22)>=this.transform.minZoom)return this.transform.maxZoom=E,this._update(),this.getZoom()>E&&this.setZoom(E),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(E){if((E=E??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(E>=0&&E<=this.transform.maxPitch)return this.transform.minPitch=E,this._update(),this.getPitch()<E&&this.setPitch(E),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(E){if((E=E??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(E>=this.transform.minPitch)return this.transform.maxPitch=E,this._update(),this.getPitch()>E&&this.setPitch(E),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(E){return this.transform.renderWorldCopies=E,this._update()}project(E){return this.transform.locationPoint(n.LngLat.convert(E),this.style&&this.style.terrain)}unproject(E){return this.transform.pointLocation(n.pointGeometry.convert(E),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(E,o,h){if(E==="mouseenter"||E==="mouseover"){let b=!1;return{layer:o,listener:h,delegates:{mousemove:j=>{const ee=this.getLayer(o)?this.queryRenderedFeatures(j.point,{layers:[o]}):[];ee.length?b||(b=!0,h.call(this,new Qs(E,this,j.originalEvent,{features:ee}))):b=!1},mouseout:()=>{b=!1}}}}if(E==="mouseleave"||E==="mouseout"){let b=!1;return{layer:o,listener:h,delegates:{mousemove:ee=>{(this.getLayer(o)?this.queryRenderedFeatures(ee.point,{layers:[o]}):[]).length?b=!0:b&&(b=!1,h.call(this,new Qs(E,this,ee.originalEvent)))},mouseout:ee=>{b&&(b=!1,h.call(this,new Qs(E,this,ee.originalEvent)))}}}}{const b=M=>{const j=this.getLayer(o)?this.queryRenderedFeatures(M.point,{layers:[o]}):[];j.length&&(M.features=j,h.call(this,M),delete M.features)};return{layer:o,listener:h,delegates:{[E]:b}}}}on(E,o,h){if(h===void 0)return super.on(E,o);const b=this._createDelegatedListener(E,o,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[E]=this._delegatedListeners[E]||[],this._delegatedListeners[E].push(b);for(const M in b.delegates)this.on(M,b.delegates[M]);return this}once(E,o,h){if(h===void 0)return super.once(E,o);const b=this._createDelegatedListener(E,o,h);for(const M in b.delegates)this.once(M,b.delegates[M]);return this}off(E,o,h){return h===void 0?super.off(E,o):(this._delegatedListeners&&this._delegatedListeners[E]&&(b=>{const M=this._delegatedListeners[E];for(let j=0;j<M.length;j++){const ee=M[j];if(ee.layer===o&&ee.listener===h){for(const le in ee.delegates)this.off(le,ee.delegates[le]);return M.splice(j,1),this}}})(),this)}queryRenderedFeatures(E,o){if(!this.style)return[];let h;if(o!==void 0||E===void 0||E instanceof n.pointGeometry||Array.isArray(E)||(o=E,E=void 0),o=o||{},(E=E||[[0,0],[this.transform.width,this.transform.height]])instanceof n.pointGeometry||typeof E[0]=="number")h=[n.pointGeometry.convert(E)];else{const b=n.pointGeometry.convert(E[0]),M=n.pointGeometry.convert(E[1]);h=[b,new n.pointGeometry(M.x,b.y),M,new n.pointGeometry(b.x,M.y),b]}return this.style.queryRenderedFeatures(h,o,this.transform)}querySourceFeatures(E,o){return this.style.querySourceFeatures(E,o)}setStyle(E,o){return(o=n.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},o)).diff!==!1&&o.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&E?(this._diffStyle(E,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._updateStyle(E,o))}setTransformRequest(E){return this._requestManager.setTransformRequest(E),this}_getUIString(E){const o=this._locale[E];if(o==null)throw new Error(`Missing UI string '${E}'`);return o}_updateStyle(E,o){return this.style&&(this.style.setEventedParent(null),this.style._remove()),E?(this.style=new $r(this,o||{}),this.style.setEventedParent(this,{style:this.style}),typeof E=="string"?this.style.loadURL(E):this.style.loadJSON(E),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new $r(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(E,o){if(typeof E=="string"){const h=this._requestManager.transformRequest(E,n.ResourceType.Style);n.getJSON(h,(b,M)=>{b?this.fire(new n.ErrorEvent(b)):M&&this._updateDiff(M,o)})}else typeof E=="object"&&this._updateDiff(E,o)}_updateDiff(E,o){try{this.style.setState(E)&&this._update(!0)}catch(h){n.warnOnce(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(E,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():n.warnOnce("There is no style added to the map.")}addSource(E,o){return this._lazyInitEmptyStyle(),this.style.addSource(E,o),this._update(!0)}isSourceLoaded(E){const o=this.style&&this.style.sourceCaches[E];if(o!==void 0)return o.loaded();this.fire(new n.ErrorEvent(new Error(`There is no source with ID '${E}'`)))}setTerrain(E){return this.style.setTerrain(E),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const E=this.style&&this.style.sourceCaches;for(const o in E){const h=E[o]._tiles;for(const b in h){const M=h[b];if(M.state!=="loaded"&&M.state!=="errored")return!1}}return!0}addSourceType(E,o,h){return this._lazyInitEmptyStyle(),this.style.addSourceType(E,o,h)}removeSource(E){return this.style.removeSource(E),this._update(!0)}getSource(E){return this.style.getSource(E)}addImage(E,o,{pixelRatio:h=1,sdf:b=!1,stretchX:M,stretchY:j,content:ee}={}){if(this._lazyInitEmptyStyle(),o instanceof HTMLImageElement||n.isImageBitmap(o)){const{width:le,height:pe,data:Te}=n.exported.getImageData(o);this.style.addImage(E,{data:new n.RGBAImage({width:le,height:pe},Te),pixelRatio:h,stretchX:M,stretchY:j,content:ee,sdf:b,version:0})}else{if(o.width===void 0||o.height===void 0)return this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:le,height:pe,data:Te}=o,Ne=o;this.style.addImage(E,{data:new n.RGBAImage({width:le,height:pe},new Uint8Array(Te)),pixelRatio:h,stretchX:M,stretchY:j,content:ee,sdf:b,version:0,userImage:Ne}),Ne.onAdd&&Ne.onAdd(this,E)}}}updateImage(E,o){const h=this.style.getImage(E);if(!h)return this.fire(new n.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=o instanceof HTMLImageElement||n.isImageBitmap(o)?n.exported.getImageData(o):o,{width:M,height:j,data:ee}=b;if(M===void 0||j===void 0)return this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(M!==h.data.width||j!==h.data.height)return this.fire(new n.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const le=!(o instanceof HTMLImageElement||n.isImageBitmap(o));h.data.replace(ee,le),this.style.updateImage(E,h)}hasImage(E){return E?!!this.style.getImage(E):(this.fire(new n.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(E){this.style.removeImage(E)}loadImage(E,o){n.getImage(this._requestManager.transformRequest(E,n.ResourceType.Image),o)}listImages(){return this.style.listImages()}addLayer(E,o){return this._lazyInitEmptyStyle(),this.style.addLayer(E,o),this._update(!0)}moveLayer(E,o){return this.style.moveLayer(E,o),this._update(!0)}removeLayer(E){return this.style.removeLayer(E),this._update(!0)}getLayer(E){return this.style.getLayer(E)}setLayerZoomRange(E,o,h){return this.style.setLayerZoomRange(E,o,h),this._update(!0)}setFilter(E,o,h={}){return this.style.setFilter(E,o,h),this._update(!0)}getFilter(E){return this.style.getFilter(E)}setPaintProperty(E,o,h,b={}){return this.style.setPaintProperty(E,o,h,b),this._update(!0)}getPaintProperty(E,o){return this.style.getPaintProperty(E,o)}setLayoutProperty(E,o,h,b={}){return this.style.setLayoutProperty(E,o,h,b),this._update(!0)}getLayoutProperty(E,o){return this.style.getLayoutProperty(E,o)}setLight(E,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(E,o),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(E,o){return this.style.setFeatureState(E,o),this._update()}removeFeatureState(E,o){return this.style.removeFeatureState(E,o),this._update()}getFeatureState(E){return this.style.getFeatureState(E)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let E=0,o=0;return this._container&&(E=this._container.clientWidth||400,o=this._container.clientHeight||300),[E,o]}_setupContainer(){const E=this._container;E.classList.add("maplibregl-map","mapboxgl-map");const o=this._canvasContainer=y.create("div","maplibregl-canvas-container mapboxgl-canvas-container",E);this._interactive&&o.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=y.create("canvas","maplibregl-canvas mapboxgl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const h=this._containerDimensions();this._resizeCanvas(h[0],h[1],this.getPixelRatio());const b=this._controlContainer=y.create("div","maplibregl-control-container mapboxgl-control-container",E),M=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(j=>{M[j]=y.create("div",`maplibregl-ctrl-${j} mapboxgl-ctrl-${j}`,b)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const E=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=y.create("div","maplibregl-cooperative-gesture-screen",E);let o="Control",h=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(h=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map",o="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${h}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",b=>{b.key===o&&(this._metaPress=!0)}),document.addEventListener("keyup",b=>{b.key===o&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",b=>{this._onCooperativeGesture(b,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(E,o,h){this._canvas.width=h*E,this._canvas.height=h*o,this._canvas.style.width=`${E}px`,this._canvas.style.height=`${o}px`}_setupPainter(){const E=n.extend({},p.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._canvas.getContext("webgl",E)||this._canvas.getContext("experimental-webgl",E);o?(this.painter=new dm(o,this.transform),n.exported$1.testSupport(o)):this.fire(new n.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(E){E.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.Event("webglcontextlost",{originalEvent:E}))}_contextRestored(E){this._setupPainter(),this.resize(),this._update(),this.fire(new n.Event("webglcontextrestored",{originalEvent:E}))}_onMapScroll(E){if(E.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(E,o,h){return!o&&h<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(E){return this.style?(this._styleDirty=this._styleDirty||E,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(E){return this._update(),this._renderTaskQueue.add(E)}_cancelRenderFrame(E){this._renderTaskQueue.remove(E)}_render(E){let o,h=0;const b=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(o=b.createQueryEXT(),b.beginQueryEXT(b.TIME_ELAPSED_EXT,o),h=n.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(E),this._removed)return;let M=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ee=this.transform.zoom,le=n.exported.now();this.style.zoomHistory.update(ee,le);const pe=new n.EvaluationParameters(ee,{now:le,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Te=pe.crossFadingFactor();Te===1&&Te===this._crossFadingFactor||(M=!0,this._crossFadingFactor=Te),this.style.update(pe)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new n.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,n.PerformanceUtils.mark(n.PerformanceMarkers.load),this.fire(new n.Event("load"))),this.style&&(this.style.hasTransitions()||M)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const ee=n.exported.now()-h;b.endQueryEXT(b.TIME_ELAPSED_EXT,o),setTimeout(()=>{const le=b.getQueryObjectEXT(o,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(o),this.fire(new n.Event("gpu-timing-frame",{cpuTime:ee,gpuTime:le}))},50)}if(this.listens("gpu-timing-layer")){const ee=this.painter.collectGpuTimers();setTimeout(()=>{const le=this.painter.queryGpuTimers(ee);this.fire(new n.Event("gpu-timing-layer",{layerTimes:le}))},50)}const j=this._sourcesDirty||this._styleDirty||this._placementDirty;return j||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new n.Event("idle")),!this._loaded||this._fullyLoaded||j||(this._fullyLoaded=!0,n.PerformanceUtils.mark(n.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const E=this.painter.context.gl.getExtension("WEBGL_lose_context");E&&E.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),y.remove(this._canvasContainer),y.remove(this._controlContainer),this._cooperativeGestures&&y.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),n.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new n.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=n.exported.frame(E=>{n.PerformanceUtils.frame(E),this._frame=null,this._render(E)}))}_onWindowOnline(){this._update()}_onWindowResize(E){this._trackResize&&this.resize({originalEvent:E})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(E){this._showTileBoundaries!==E&&(this._showTileBoundaries=E,this._update())}get showPadding(){return!!this._showPadding}set showPadding(E){this._showPadding!==E&&(this._showPadding=E,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(E){this._showCollisionBoxes!==E&&(this._showCollisionBoxes=E,E?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(E){this._showOverdrawInspector!==E&&(this._showOverdrawInspector=E,this._update())}get repaint(){return!!this._repaint}set repaint(E){this._repaint!==E&&(this._repaint=E,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(E){this._vertices=E,this._update()}_setCacheLimits(E,o){n.setCacheLimits(E,o)}get version(){return"2.4.0"}},NavigationControl:class{constructor(E){this.options=n.extend({},qa,E),this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(n.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",o=>this._map.zoomIn({},{originalEvent:o})),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",o=>this._map.zoomOut({},{originalEvent:o})),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(n.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",o=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:o}):this._map.resetNorth({},{originalEvent:o})}),this._compassIcon=y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const E=this._map.getZoom(),o=E===this._map.getMaxZoom(),h=E===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())}_rotateCompassArrow(){const E=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=E}onAdd(E){return this._map=E,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new hd(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){y.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(E,o){const h=y.create("button",E,this._container);return h.type="button",h.addEventListener("click",o),h}_setButtonTitle(E,o){const h=this._map._getUIString(`NavigationControl.${o}`);E.title=h,E.setAttribute("aria-label",h)}},GeolocateControl:class extends n.Evented{constructor(E){super(),this.options=n.extend({},Qh,E),n.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(E){var o;return this._map=E,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),o=this._setupUI,Ur!==void 0?o(Ur):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(h=>{Ur=h.state!=="denied",o(Ur)}):(Ur=!!window.navigator.geolocation,o(Ur)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),y.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,al=0,Bs=!1}_isOutOfMapMaxBounds(E){const o=this._map.getMaxBounds(),h=E.coords;return o&&(h.longitude<o.getWest()||h.longitude>o.getEast()||h.latitude<o.getSouth()||h.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(E){if(this._map){if(this._isOutOfMapMaxBounds(E))return this._setErrorState(),this.fire(new n.Event("outofmaxbounds",E)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=E,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(E),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(E),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new n.Event("geolocate",E)),this._finish()}}_updateCamera(E){const o=new n.LngLat(E.coords.longitude,E.coords.latitude),h=E.coords.accuracy,b=this._map.getBearing(),M=n.extend({bearing:b},this.options.fitBoundsOptions);this._map.fitBounds(o.toBounds(h),M,{geolocateSource:!0})}_updateMarker(E){if(E){const o=new n.LngLat(E.coords.longitude,E.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=E.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const E=this._map._container.clientHeight/2,o=this._map.unproject([0,E]),h=this._map.unproject([1,E]),b=o.distanceTo(h),M=Math.ceil(2*this._accuracy/b);this._circleElement.style.width=`${M}px`,this._circleElement.style.height=`${M}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(E){if(this._map){if(this.options.trackUserLocation)if(E.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(E.code===3&&Bs)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new n.Event("error",E)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(E){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=y.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",E===!1){n.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=y.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Yc(this._dotElement),this._circleElement=y.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Yc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new n.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return n.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":al--,Bs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let E;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),al++,al>1?(E={maximumAge:6e5,timeout:0},Bs=!0):(E=this.options.positionOptions,Bs=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,E)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:dd,LogoControl:Kh,ScaleControl:class{constructor(E){this.options=n.extend({},Sx,E),n.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Zc(this._map,this._container,this.options)}onAdd(E){return this._map=E,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",E.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){y.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(E){this.options.unit=E,Zc(this._map,this._container,this.options)}},FullscreenControl:class{constructor(E){this._fullscreen=!1,E&&E.container&&(E.container instanceof HTMLElement?this._container=E.container:n.warnOnce("Full screen control 'container' must be a DOM element.")),n.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(E){return this._map=E,this._container||(this._container=this._map.getContainer()),this._controlContainer=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){y.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const E=this._fullscreenButton=y.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",E).setAttribute("aria-hidden","true"),E.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const E=this._getTitle();this._fullscreenButton.setAttribute("aria-label",E),this._fullscreenButton.title=E}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(E){this.options=E,n.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(E){return this._map=E,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=y.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){y.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends n.Evented{constructor(E){super(),this.options=n.extend(Object.create(zr),E),n.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(E){return this._map&&this.remove(),this._map=E,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new n.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&y.remove(this._content),this._container&&(y.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new n.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(E){return this._lngLat=n.LngLat.convert(E),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(E){return this.setDOMContent(document.createTextNode(E))}setHTML(E){const o=document.createDocumentFragment(),h=document.createElement("body");let b;for(h.innerHTML=E;b=h.firstChild,b;)o.appendChild(b);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(E){return this.options.maxWidth=E,this._update(),this}setDOMContent(E){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=y.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(E),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(E){this._container&&this._container.classList.add(E)}removeClassName(E){this._container&&this._container.classList.remove(E)}setOffset(E){return this.options.offset=E,this._update(),this}toggleClassName(E){if(this._container)return this._container.classList.toggle(E)}_createCloseButton(){this.options.closeButton&&(this._closeButton=y.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(E){this._update(E.point)}_onMouseMove(E){this._update(E.point)}_onDrag(E){this._update(E.point)}_update(E){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=y.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=y.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(j=>this._container.classList.add(j)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ei(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!E))return;const o=this._pos=this._trackPointer&&E?E:this._map.project(this._lngLat);let h=this.options.anchor;const b=$l(this.options.offset);if(!h){const j=this._container.offsetWidth,ee=this._container.offsetHeight;let le;le=o.y+b.bottom.y<ee?["top"]:o.y>this._map.transform.height-ee?["bottom"]:[],o.x<j/2?le.push("left"):o.x>this._map.transform.width-j/2&&le.push("right"),h=le.length===0?"bottom":le.join("-")}const M=o.add(b[h]).round();y.setTransform(this._container,`${Di[h]} translate(${M.x}px,${M.y}px)`),qc(this._container,h,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const E=this._container.querySelector(Sm);E&&E.focus()}_onClose(){this.remove()}},Marker:Yc,Style:$r,LngLat:n.LngLat,LngLatBounds:n.LngLatBounds,Point:n.pointGeometry,MercatorCoordinate:n.MercatorCoordinate,Evented:n.Evented,AJAXError:n.AJAXError,config:n.config,CanvasSource:re,GeoJSONSource:U,ImageSource:H,RasterDEMTileSource:G,RasterTileSource:L,VectorTileSource:$,VideoSource:W,prewarm:function(){we().acquire(J)},clearPrewarmedResources:function(){const E=ye;E&&(E.isPreloaded()&&E.numActive()===1?(E.release(J),ye=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return ne.workerCount},set workerCount(E){ne.workerCount=E},get maxParallelImageRequests(){return n.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(E){n.config.MAX_PARALLEL_IMAGE_REQUESTS=E},clearStorage(E){n.clearTileCache(E)},workerUrl:"",addProtocol(E,o){n.config.REGISTERED_PROTOCOLS[E]=o},removeProtocol(E){delete n.config.REGISTERED_PROTOCOLS[E]}};return or.extend(Xc,{isSafari:n.isSafari,getPerformanceMetrics:n.PerformanceUtils.getPerformanceMetrics}),Xc});var u=s;return u})})(NF);var m3={exports:{}};class OF{constructor(e=[],t=jF){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,s=t[e];for(;e>0;){const l=e-1>>1,u=t[l];if(r(s,u)>=0)break;t[e]=u,e=l}t[e]=s}_down(e){const{data:t,compare:r}=this,s=this.length>>1,l=t[e];for(;e<s;){let u=(e<<1)+1,n=t[u];const p=u+1;if(p<this.length&&r(t[p],n)<0&&(u=p,n=t[p]),r(n,l)>=0)break;t[e]=n,e=u}t[e]=l}}function jF(i,e){return i<e?-1:i>e?1:0}const FF=Object.freeze(Object.defineProperty({__proto__:null,default:OF},Symbol.toStringTag,{value:"Module"})),BF=hM(FF);var Lg=BF;Lg.default&&(Lg=Lg.default);m3.exports=g3;m3.exports.default=g3;function g3(i,e,t){e=e||1;for(var r,s,l,u,n=0;n<i[0].length;n++){var p=i[0][n];(!n||p[0]<r)&&(r=p[0]),(!n||p[1]<s)&&(s=p[1]),(!n||p[0]>l)&&(l=p[0]),(!n||p[1]>u)&&(u=p[1])}var m=l-r,g=u-s,v=Math.min(m,g),y=v/2;if(v===0){var C=[r,s];return C.distance=0,C}for(var _=new Lg(void 0,$F),w=r;w<l;w+=v)for(var k=s;k<u;k+=v)_.push(new tc(w+y,k+y,y,i));var S=VF(i),x=new tc(r+m/2,s+g/2,0,i);x.d>S.d&&(S=x);for(var P=_.length;_.length;){var D=_.pop();D.d>S.d&&(S=D,t&&console.log("found best %d after %d probes",Math.round(1e4*D.d)/1e4,P)),!(D.max-S.d<=e)&&(y=D.h/2,_.push(new tc(D.x-y,D.y-y,y,i)),_.push(new tc(D.x+y,D.y-y,y,i)),_.push(new tc(D.x-y,D.y+y,y,i)),_.push(new tc(D.x+y,D.y+y,y,i)),P+=4)}t&&(console.log("num probes: "+P),console.log("best distance: "+S.d));var T=[S.x,S.y];return T.distance=S.d,T}function $F(i,e){return e.max-i.max}function tc(i,e,t,r){this.x=i,this.y=e,this.h=t,this.d=UF(i,e,r),this.max=this.d+this.h*Math.SQRT2}function UF(i,e,t){for(var r=!1,s=1/0,l=0;l<t.length;l++)for(var u=t[l],n=0,p=u.length,m=p-1;n<p;m=n++){var g=u[n],v=u[m];g[1]>e!=v[1]>e&&i<(v[0]-g[0])*(e-g[1])/(v[1]-g[1])+g[0]&&(r=!r),s=Math.min(s,GF(i,e,g,v))}return s===0?0:(r?1:-1)*Math.sqrt(s)}function VF(i){for(var e=0,t=0,r=0,s=i[0],l=0,u=s.length,n=u-1;l<u;n=l++){var p=s[l],m=s[n],g=p[0]*m[1]-m[0]*p[1];t+=(p[0]+m[0])*g,r+=(p[1]+m[1])*g,e+=g*3}return e===0?new tc(s[0][0],s[0][1],0,i):new tc(t/e,r/e,0,i)}function GF(i,e,t,r){var s=t[0],l=t[1],u=r[0]-s,n=r[1]-l;if(u!==0||n!==0){var p=((i-s)*u+(e-l)*n)/(u*u+n*n);p>1?(s=r[0],l=r[1]):p>0&&(s+=u*p,l+=n*p)}return u=i-s,n=e-l,u*u+n*n}var HF=typeof Fa=="object"&&Fa&&Fa.Object===Object&&Fa,WF=typeof self=="object"&&self&&self.Object===Object&&self;HF||WF||Function("return this")();var qF={exports:{}};(function(i,e){var t=function(){var r={},s=Math.PI/180,l=180/Math.PI,u=6378137,n=20037508342789244e-9;function p(g){return Number(g)===g&&g%1!==0}function m(g){if(g=g||{},this.size=g.size||256,this.expansion=g.antimeridian===!0?2:1,!r[this.size]){var v=this.size,y=r[this.size]={};y.Bc=[],y.Cc=[],y.zc=[],y.Ac=[];for(var C=0;C<30;C++)y.Bc.push(v/360),y.Cc.push(v/(2*Math.PI)),y.zc.push(v/2),y.Ac.push(v),v*=2}this.Bc=r[this.size].Bc,this.Cc=r[this.size].Cc,this.zc=r[this.size].zc,this.Ac=r[this.size].Ac}return m.prototype.px=function(g,v){if(p(v)){var y=this.size*Math.pow(2,v),C=y/2,_=y/360,w=y/(2*Math.PI),k=y,S=Math.min(Math.max(Math.sin(s*g[1]),-.9999),.9999),x=C+g[0]*_,P=C+.5*Math.log((1+S)/(1-S))*-w;return x>k*this.expansion&&(x=k*this.expansion),P>k&&(P=k),[x,P]}else{var C=this.zc[v],S=Math.min(Math.max(Math.sin(s*g[1]),-.9999),.9999),x=Math.round(C+g[0]*this.Bc[v]),P=Math.round(C+.5*Math.log((1+S)/(1-S))*-this.Cc[v]);return x>this.Ac[v]*this.expansion&&(x=this.Ac[v]*this.expansion),P>this.Ac[v]&&(P=this.Ac[v]),[x,P]}},m.prototype.ll=function(g,v){if(p(v)){var y=this.size*Math.pow(2,v),C=y/360,_=y/(2*Math.PI),w=y/2,k=(g[1]-w)/-_,S=(g[0]-w)/C,x=l*(2*Math.atan(Math.exp(k))-.5*Math.PI);return[S,x]}else{var k=(g[1]-this.zc[v])/-this.Cc[v],S=(g[0]-this.zc[v])/this.Bc[v],x=l*(2*Math.atan(Math.exp(k))-.5*Math.PI);return[S,x]}},m.prototype.bbox=function(g,v,y,C,_){C&&(v=Math.pow(2,y)-1-v);var w=[g*this.size,(+v+1)*this.size],k=[(+g+1)*this.size,v*this.size],S=this.ll(w,y).concat(this.ll(k,y));return _==="900913"?this.convert(S,"900913"):S},m.prototype.xyz=function(g,v,y,C){C==="900913"&&(g=this.convert(g,"WGS84"));var _=[g[0],g[1]],w=[g[2],g[3]],k=this.px(_,v),S=this.px(w,v),x=[Math.floor(k[0]/this.size),Math.floor((S[0]-1)/this.size)],P=[Math.floor(S[1]/this.size),Math.floor((k[1]-1)/this.size)],D={minX:Math.min.apply(Math,x)<0?0:Math.min.apply(Math,x),minY:Math.min.apply(Math,P)<0?0:Math.min.apply(Math,P),maxX:Math.max.apply(Math,x),maxY:Math.max.apply(Math,P)};if(y){var T={minY:Math.pow(2,v)-1-D.maxY,maxY:Math.pow(2,v)-1-D.minY};D.minY=T.minY,D.maxY=T.maxY}return D},m.prototype.convert=function(g,v){return v==="900913"?this.forward(g.slice(0,2)).concat(this.forward(g.slice(2,4))):this.inverse(g.slice(0,2)).concat(this.inverse(g.slice(2,4)))},m.prototype.forward=function(g){var v=[u*g[0]*s,u*Math.log(Math.tan(Math.PI*.25+.5*g[1]*s))];return v[0]>n&&(v[0]=n),v[0]<-20037508342789244e-9&&(v[0]=-20037508342789244e-9),v[1]>n&&(v[1]=n),v[1]<-20037508342789244e-9&&(v[1]=-20037508342789244e-9),v},m.prototype.inverse=function(g){return[g[0]*l/u,(Math.PI*.5-2*Math.atan(Math.exp(-g[1]/u)))*l]},m}();i.exports=t})(qF);var j2={exports:{}};(function(i,e){(function(t,r){r(e,i)})(Fa,function(t,r){var s={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function l(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function u(m){try{delete window[m]}catch{window[m]=void 0}}function n(m){var g=document.getElementById(m);g&&document.getElementsByTagName("head")[0].removeChild(g)}function p(m){var g=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],v=m,y=g.timeout||s.timeout,C=g.jsonpCallback||s.jsonpCallback,_=void 0;return new Promise(function(w,k){var S=g.jsonpCallbackFunction||l(),x=C+"_"+S;window[S]=function(D){w({ok:!0,json:function(){return Promise.resolve(D)}}),_&&clearTimeout(_),n(x),u(S)},v+=v.indexOf("?")===-1?"?":"&";var P=document.createElement("script");P.setAttribute("src",""+v+C+"="+S),g.charset&&P.setAttribute("charset",g.charset),g.nonce&&P.setAttribute("nonce",g.nonce),g.referrerPolicy&&P.setAttribute("referrerPolicy",g.referrerPolicy),g.crossorigin&&P.setAttribute("crossorigin","true"),P.id=x,document.getElementsByTagName("head")[0].appendChild(P),_=setTimeout(function(){k(new Error("JSONP request to "+m+" timed out")),u(S),n(x),window[S]=function(){u(S)}},y),P.onerror=function(){k(new Error("JSONP request to "+m+" failed")),u(S),n(x),_&&clearTimeout(_)}})}r.exports=p})})(j2,j2.exports);var YF=XF,ZF=Object.prototype.hasOwnProperty;function XF(){for(var i={},e=0;e<arguments.length;e++){var t=arguments[e];for(var r in t)ZF.call(t,r)&&(i[r]=t[r])}return i}var y3={exports:{}};(function(i,e){(function(){var t={};i.exports=t,t.simpleFilter=function(r,s){return s.filter(function(l){return t.test(r,l)})},t.test=function(r,s){return t.match(r,s)!==null},t.match=function(r,s,l){l=l||{};var u=0,n=[],p=s.length,m=0,g=0,v=l.pre||"",y=l.post||"",C=l.caseSensitive&&s||s.toLowerCase(),_;r=l.caseSensitive&&r||r.toLowerCase();for(var w=0;w<p;w++)_=s[w],C[w]===r[u]?(_=v+_+y,u+=1,g+=1+g):g=0,m+=g,n[n.length]=_;return u===r.length?(m=C===r?1/0:m,{rendered:n.join(""),score:m}):null},t.filter=function(r,s,l){return!s||s.length===0?[]:typeof r!="string"?s:(l=l||{},s.reduce(function(u,n,p,m){var g=n;l.extract&&(g=l.extract(n));var v=t.match(r,g,l);return v!=null&&(u[u.length]={string:v.rendered,score:v.score,index:p,original:n}),u},[]).sort(function(u,n){var p=n.score-u.score;return p||u.index-n.index}))}})()})(y3);var KF=y3.exports,ka=function(i){return this.component=i,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,i.el.parentNode.insertBefore(this.wrapper,i.el.nextSibling),this};ka.prototype.show=function(){this.element.style.display="block"};ka.prototype.hide=function(){this.element.style.display="none"};ka.prototype.add=function(i){this.items.push(i)};ka.prototype.clear=function(){this.items=[],this.active=0};ka.prototype.isEmpty=function(){return!this.items.length};ka.prototype.isVisible=function(){return this.element.style.display==="block"};ka.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var i=0;i<this.items.length;i++)this.drawItem(this.items[i],this.active===i);this.show()};ka.prototype.drawItem=function(i,e){var t=document.createElement("li"),r=document.createElement("a");e&&(t.className+=" active"),r.innerHTML=i.string,t.appendChild(r),this.element.appendChild(t),t.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),t.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,i)}).bind(this))};ka.prototype.handleMouseUp=function(i){this.selectingListItem=!1,this.component.value(i.original),this.clear(),this.draw()};ka.prototype.move=function(i){this.active=i,this.draw()};ka.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};ka.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};ka.prototype.drawError=function(i){var e=document.createElement("li");e.innerHTML=i,this.element.appendChild(e),this.show()};var QF=ka,JF=YF,eB=KF,tB=QF,Xs=function(i,e,t){return t=t||{},this.options=JF({minLength:2,limit:5,filter:!0,hideOnBlur:!0},t),this.el=i,this.data=e||[],this.list=new tB(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(r){this.handleKeyUp(r.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(r){this.handleKeyDown(r)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(r){this.handlePaste(r)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};Xs.prototype.handleKeyUp=function(i){i===40||i===38||i===27||i===13||i===9||this.handleInputChange(this.el.value)};Xs.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};Xs.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};Xs.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(i.target.value)},100)}};Xs.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(e){for(var t=0;t<e.length&&(this.list.add(e[t]),t!==this.options.limit-1);t++);this.list.draw()}).bind(this))};Xs.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};Xs.prototype.update=function(i){this.data=i,this.handleKeyUp()};Xs.prototype.clear=function(){this.data=[],this.list.clear()};Xs.prototype.normalize=function(i){return i=i.toLowerCase(),i};Xs.prototype.match=function(i,e){return i.indexOf(e)>-1};Xs.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")};Xs.prototype.getCandidates=function(i){var e={pre:"<strong>",post:"</strong>",extract:(function(r){return this.getItemValue(r)}).bind(this)},t;this.options.filter?(t=eB.filter(this.query,this.data,e),t=t.map((function(r){return{original:r.original,string:this.render(r.original,r.string)}}).bind(this))):t=this.data.map((function(r){var s=this.render(r);return{original:r,string:s}}).bind(this)),i(t)};Xs.prototype.getItemValue=function(i){return i};Xs.prototype.render=function(i,e){if(e)return e;for(var t=i.original?this.getItemValue(i.original):this.getItemValue(i),r=this.normalize(t),s=r.lastIndexOf(this.query);s>-1;){var l=s+this.query.length;t=t.slice(0,s)+"<strong>"+t.slice(s,l)+"</strong>"+t.slice(l),s=r.slice(0,s).lastIndexOf(this.query)}return t};Xs.prototype.renderError=function(i){this.list.drawError(i)};var iB=Xs,nB=iB;typeof window<"u"&&(window.Suggestions=nB);const x3=({query:i,queryKey:e,...t})=>{const r=ah();return Sy({queryKey:e,queryFn:async()=>(await r.query({apiDataQuery:i})).apiDataQuery,...t})},rB={resource:"routes",params:{filter:"code:eq:chap",fields:"id,code,name,displayName,url,authorities,disabled,headers,sharing[public]"}},Gf=()=>{const{data:i,error:e,isLoading:t,isError:r}=x3({queryKey:["routes","chap"],query:rB,select:s=>s.routes[0],staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return{route:i,error:e,isLoading:t,isError:r}},sB=()=>{const{appVersion:i}=Ey(),{route:e,isLoading:t}=Gf(),r=Ue.useRef(void 0),[s,l]=Ue.useState(void 0),u=async()=>{i&&await DE.isCompatibleIsCompatibleGet(i==null?void 0:i.full).then(n=>{l(n)}).catch(n=>{l({compatible:!1,description:"Not able to check if the app is compatible with the Chap Core you are using, which means you are probably using an old version of Chap Core. See https://github.com/dhis2-chap/chap-core/releases/ for information on how to update."})})};return Ue.useEffect(()=>{!i||t||r.current!==(e==null?void 0:e.url)&&(u(),r.current=e==null?void 0:e.url)},[i,e==null?void 0:e.url]),he.jsx(he.Fragment,{children:s&&!(s!=null&&s.compatible)&&he.jsx("div",{className:u2.warningMargin,style:{maxWidth:Xb},children:he.jsx("div",{className:u2.warningMarginInner,children:he.jsxs(Bo,{error:!0,title:"Incompatible versions",children:["Version of the Modeling App is not compatible with the backend (Chap core)",he.jsx("br",{}),he.jsx("br",{}),he.jsx("i",{children:s.description})]})})})})},aB="_infoAboutReportingBugs_1v50c_1",oB="_infoAboutReportingBugsInner_1v50c_7",lB="_icon_1v50c_16",z0={infoAboutReportingBugs:aB,infoAboutReportingBugsInner:oB,icon:lB},cB=()=>{const[i,e]=Ue.useState(!0);return he.jsx("div",{className:z0.infoAboutReportingBugs,children:i&&he.jsxs("div",{style:{maxWidth:Xb},className:z0.infoAboutReportingBugsInner,children:[he.jsxs("div",{children:[he.jsx("span",{className:z0.icon,children:he.jsx(DC,{})}),"Please be aware that you are using an alpha version, meaning you could experience bugs or issues. If you encounter any problems, please report to:"," ",he.jsx("a",{href:"mailto:example@example.com?subject=Modeling App | Issue%20Report:&body=RELEVANT%20LOGS:%0ADESCRIBE%20YOUR%20ISSUE:%0AHOW%20TO%20REPRODUCE:%0AIF%20ALLOWED,%20ATTACH%20THE%20DATA%20USED%20WHEN%20FAILING,%20GET%20THE%20DATA%20BY%20USING%20THE%20'DOWNLOAD%20BUTTON.':",children:"chap@dhis2.org"})]}),he.jsx("div",{children:he.jsx(Gn,{small:!0,onClick:()=>e(!i),children:he.jsx(pM,{})})})]})})},uB="_loadingContainer_111ob_1",dB="_noRouteContainer_111ob_8",hB="_noRouteContent_111ob_15",pB="_noRouteTitle_111ob_22",fB="_noRouteText_111ob_31",mB="_noRouteLink_111ob_38",Id={loadingContainer:uB,noRouteContainer:dB,noRouteContent:hB,noRouteTitle:pB,noRouteText:fB,noRouteLink:mB},gB=()=>he.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[he.jsx("path",{d:"M32.1162 60.999C32.6683 60.9865 33.1261 61.4235 33.1387 61.9756C33.1512 62.5276 32.7141 62.9853 32.1621 62.998C32.1083 62.9993 32.0541 63 32 63C31.9459 63 31.8917 62.9993 31.8379 62.998C31.2859 62.9853 30.8488 62.5276 30.8613 61.9756C30.8739 61.4235 31.3317 60.9865 31.8838 60.999C31.9224 60.9999 31.9611 61 32 61C32.0389 61 32.0776 60.9999 32.1162 60.999ZM26.9697 59.4199C27.3443 59.0624 27.9243 59.0533 28.3096 59.3828L28.3838 59.4531L28.5469 59.6162L28.6172 59.6904C28.9467 60.0757 28.9376 60.6557 28.5801 61.0303C28.2225 61.4047 27.6432 61.4411 27.2432 61.1299L27.166 61.0625L26.9375 60.834L26.8701 60.7568C26.5589 60.3568 26.5953 59.7775 26.9697 59.4199ZM35.6904 59.3828C36.0757 59.0533 36.6557 59.0624 37.0303 59.4199C37.4297 59.8014 37.4439 60.4346 37.0625 60.834L36.834 61.0625L36.7568 61.1299C36.3568 61.4411 35.7775 61.4047 35.4199 61.0303C35.0386 60.6309 35.0538 59.9976 35.4531 59.6162L35.6162 59.4531L35.6904 59.3828ZM25 56C25 55.9459 25.0007 55.8917 25.002 55.8379C25.0147 55.2859 25.4724 54.8488 26.0244 54.8613C26.5765 54.8739 27.0135 55.3317 27.001 55.8838C27.0001 55.9224 27 55.9611 27 56C27 56.0389 27.0001 56.0776 27.001 56.1162L26.998 56.2188C26.9582 56.7239 26.5419 57.1269 26.0244 57.1387C25.4724 57.1512 25.0147 56.7141 25.002 56.1621L25 56ZM38.998 56.1621C38.9853 56.7141 38.5276 57.1512 37.9756 57.1387C37.4235 57.1261 36.9865 56.6683 36.999 56.1162L38.998 56.1621ZM37 56C37 55.9611 36.9999 55.9224 36.999 55.8838L38.998 55.8379C38.9993 55.8917 39 55.9459 39 56C39 56.0541 38.9993 56.1083 38.998 56.1621L36.999 56.1162C36.9999 56.0776 37 56.0389 37 56ZM37.9756 54.8613C38.5276 54.8488 38.9853 55.2859 38.998 55.8379L36.999 55.8838C36.9865 55.3317 37.4235 54.8739 37.9756 54.8613ZM27.2432 50.8701C27.6432 50.5589 28.2225 50.5953 28.5801 50.9697C28.9614 51.3691 28.9462 52.0024 28.5469 52.3838L28.3838 52.5469L28.3096 52.6172C27.9243 52.9467 27.3443 52.9376 26.9697 52.5801C26.5703 52.1986 26.5561 51.5654 26.9375 51.166L27.166 50.9375L27.2432 50.8701ZM35.4199 50.9697C35.7775 50.5953 36.3568 50.5589 36.7568 50.8701L36.834 50.9375L37.0625 51.166L37.1299 51.2432C37.4411 51.6432 37.4047 52.2225 37.0303 52.5801C36.6557 52.9376 36.0757 52.9467 35.6904 52.6172L35.6162 52.5469L35.4531 52.3838L35.3828 52.3096C35.0533 51.9243 35.0624 51.3443 35.4199 50.9697ZM32.1621 49.002C32.7141 49.0147 33.1512 49.4724 33.1387 50.0244C33.1261 50.5765 32.6683 51.0135 32.1162 51.001C32.0776 51.0001 32.0389 51 32 51C31.9611 51 31.9224 51.0001 31.8838 51.001L31.7812 50.998C31.2761 50.9582 30.8731 50.5419 30.8613 50.0244C30.8488 49.4724 31.2859 49.0147 31.8379 49.002L32 49C32.0541 49 32.1083 49.0007 32.1621 49.002Z",fill:"#6C7787"}),he.jsx("path",{d:"M56.1162 36.999C56.6683 36.9865 57.1261 37.4235 57.1387 37.9756C57.1512 38.5276 56.7141 38.9853 56.1621 38.998C56.1083 38.9993 56.0541 39 56 39C55.9459 39 55.8917 38.9993 55.8379 38.998C55.2859 38.9853 54.8488 38.5276 54.8613 37.9756C54.8739 37.4235 55.3317 36.9865 55.8838 36.999C55.9224 36.9999 55.9611 37 56 37C56.0389 37 56.0776 36.9999 56.1162 36.999ZM50.9697 35.4199C51.3443 35.0624 51.9243 35.0533 52.3096 35.3828L52.3838 35.4531L52.5469 35.6162L52.6172 35.6904C52.9467 36.0757 52.9376 36.6557 52.5801 37.0303C52.2225 37.4047 51.6432 37.4411 51.2432 37.1299L51.166 37.0625L50.9375 36.834L50.8701 36.7568C50.5589 36.3568 50.5953 35.7775 50.9697 35.4199ZM59.6904 35.3828C60.0757 35.0533 60.6557 35.0624 61.0303 35.4199C61.4297 35.8014 61.4439 36.4346 61.0625 36.834L60.834 37.0625L60.7568 37.1299C60.3568 37.4411 59.7775 37.4047 59.4199 37.0303C59.0386 36.6309 59.0538 35.9976 59.4531 35.6162L59.6162 35.4531L59.6904 35.3828ZM49 32C49 31.9459 49.0007 31.8917 49.002 31.8379C49.0147 31.2859 49.4724 30.8488 50.0244 30.8613C50.5765 30.8739 51.0135 31.3317 51.001 31.8838C51.0001 31.9224 51 31.9611 51 32C51 32.0389 51.0001 32.0776 51.001 32.1162L50.998 32.2188C50.9582 32.7239 50.5419 33.1269 50.0244 33.1387C49.4724 33.1512 49.0147 32.7141 49.002 32.1621L49 32ZM62.998 32.1621C62.9853 32.7141 62.5276 33.1512 61.9756 33.1387C61.4235 33.1261 60.9865 32.6683 60.999 32.1162L62.998 32.1621ZM61 32C61 31.9611 60.9999 31.9224 60.999 31.8838L62.998 31.8379C62.9993 31.8917 63 31.9459 63 32C63 32.0541 62.9993 32.1083 62.998 32.1621L60.999 32.1162C60.9999 32.0776 61 32.0389 61 32ZM61.9756 30.8613C62.5276 30.8488 62.9853 31.2859 62.998 31.8379L60.999 31.8838C60.9865 31.3317 61.4235 30.8739 61.9756 30.8613ZM51.2432 26.8701C51.6432 26.5589 52.2225 26.5953 52.5801 26.9697C52.9614 27.3691 52.9462 28.0024 52.5469 28.3838L52.3838 28.5469L52.3096 28.6172C51.9243 28.9467 51.3443 28.9376 50.9697 28.5801C50.5703 28.1986 50.5561 27.5654 50.9375 27.166L51.166 26.9375L51.2432 26.8701ZM59.4199 26.9697C59.7775 26.5953 60.3568 26.5589 60.7568 26.8701L60.834 26.9375L61.0625 27.166L61.1299 27.2432C61.4411 27.6432 61.4047 28.2225 61.0303 28.5801C60.6557 28.9376 60.0757 28.9467 59.6904 28.6172L59.6162 28.5469L59.4531 28.3838L59.3828 28.3096C59.0533 27.9243 59.0624 27.3443 59.4199 26.9697ZM56.1621 25.002C56.7141 25.0147 57.1512 25.4724 57.1387 26.0244C57.1261 26.5765 56.6683 27.0135 56.1162 27.001C56.0776 27.0001 56.0389 27 56 27C55.9611 27 55.9224 27.0001 55.8838 27.001L55.7812 26.998C55.2761 26.9582 54.8731 26.5419 54.8613 26.0244C54.8488 25.4724 55.2859 25.0147 55.8379 25.002L56 25C56.0541 25 56.1083 25.0007 56.1621 25.002Z",fill:"#6C7787"}),he.jsx("path",{d:"M13 32C13 29.2386 10.7614 27 8 27C5.23858 27 3 29.2386 3 32C3 34.7614 5.23858 37 8 37C10.7614 37 13 34.7614 13 32ZM15 32C15 35.866 11.866 39 8 39C4.13401 39 1 35.866 1 32C1 28.134 4.13401 25 8 25C11.866 25 15 28.134 15 32Z",fill:"#404B5A"}),he.jsx("path",{d:"M13 56C13 53.2386 10.7614 51 8 51C5.23858 51 3 53.2386 3 56C3 58.7614 5.23858 61 8 61C10.7614 61 13 58.7614 13 56ZM15 56C15 59.866 11.866 63 8 63C4.13401 63 1 59.866 1 56C1 52.134 4.13401 49 8 49C11.866 49 15 52.134 15 56Z",fill:"#404B5A"}),he.jsx("path",{d:"M56.1162 60.999C56.6683 60.9865 57.1261 61.4235 57.1387 61.9756C57.1512 62.5276 56.7141 62.9853 56.1621 62.998C56.1083 62.9993 56.0541 63 56 63C55.9459 63 55.8917 62.9993 55.8379 62.998C55.2859 62.9853 54.8488 62.5276 54.8613 61.9756C54.8739 61.4235 55.3317 60.9865 55.8838 60.999C55.9224 60.9999 55.9611 61 56 61C56.0389 61 56.0776 60.9999 56.1162 60.999ZM50.9697 59.4199C51.3443 59.0624 51.9243 59.0533 52.3096 59.3828L52.3838 59.4531L52.5469 59.6162L52.6172 59.6904C52.9467 60.0757 52.9376 60.6557 52.5801 61.0303C52.2225 61.4047 51.6432 61.4411 51.2432 61.1299L51.166 61.0625L50.9375 60.834L50.8701 60.7568C50.5589 60.3568 50.5953 59.7775 50.9697 59.4199ZM59.6904 59.3828C60.0757 59.0533 60.6557 59.0624 61.0303 59.4199C61.4297 59.8014 61.4439 60.4346 61.0625 60.834L60.834 61.0625L60.7568 61.1299C60.3568 61.4411 59.7775 61.4047 59.4199 61.0303C59.0386 60.6309 59.0538 59.9976 59.4531 59.6162L59.6162 59.4531L59.6904 59.3828ZM49 56C49 55.9459 49.0007 55.8917 49.002 55.8379C49.0147 55.2859 49.4724 54.8488 50.0244 54.8613C50.5765 54.8739 51.0135 55.3317 51.001 55.8838C51.0001 55.9224 51 55.9611 51 56C51 56.0389 51.0001 56.0776 51.001 56.1162L50.998 56.2188C50.9582 56.7239 50.5419 57.1269 50.0244 57.1387C49.4724 57.1512 49.0147 56.7141 49.002 56.1621L49 56ZM62.998 56.1621C62.9853 56.7141 62.5276 57.1512 61.9756 57.1387C61.4235 57.1261 60.9865 56.6683 60.999 56.1162L62.998 56.1621ZM61 56C61 55.9611 60.9999 55.9224 60.999 55.8838L62.998 55.8379C62.9993 55.8917 63 55.9459 63 56C63 56.0541 62.9993 56.1083 62.998 56.1621L60.999 56.1162C60.9999 56.0776 61 56.0389 61 56ZM61.9756 54.8613C62.5276 54.8488 62.9853 55.2859 62.998 55.8379L60.999 55.8838C60.9865 55.3317 61.4235 54.8739 61.9756 54.8613ZM51.2432 50.8701C51.6432 50.5589 52.2225 50.5953 52.5801 50.9697C52.9614 51.3691 52.9462 52.0024 52.5469 52.3838L52.3838 52.5469L52.3096 52.6172C51.9243 52.9467 51.3443 52.9376 50.9697 52.5801C50.5703 52.1986 50.5561 51.5654 50.9375 51.166L51.166 50.9375L51.2432 50.8701ZM59.4199 50.9697C59.7775 50.5953 60.3568 50.5589 60.7568 50.8701L60.834 50.9375L61.0625 51.166L61.1299 51.2432C61.4411 51.6432 61.4047 52.2225 61.0303 52.5801C60.6557 52.9376 60.0757 52.9467 59.6904 52.6172L59.6162 52.5469L59.4531 52.3838L59.3828 52.3096C59.0533 51.9243 59.0624 51.3443 59.4199 50.9697ZM56.1621 49.002C56.7141 49.0147 57.1512 49.4724 57.1387 50.0244C57.1261 50.5765 56.6683 51.0135 56.1162 51.001C56.0776 51.0001 56.0389 51 56 51C55.9611 51 55.9224 51.0001 55.8838 51.001L55.7812 50.998C55.2761 50.9582 54.8731 50.5419 54.8613 50.0244C54.8488 49.4724 55.2859 49.0147 55.8379 49.002L56 49C56.0541 49 56.1083 49.0007 56.1621 49.002Z",fill:"#6C7787"}),he.jsx("path",{d:"M13 8C13 5.23858 10.7614 3 8 3C5.23858 3 3 5.23858 3 8C3 10.7614 5.23858 13 8 13C10.7614 13 13 10.7614 13 8ZM15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1C11.866 1 15 4.13401 15 8Z",fill:"#404B5A"}),he.jsx("path",{d:"M32.1162 12.999C32.6683 12.9865 33.1261 13.4235 33.1387 13.9756C33.1512 14.5276 32.7141 14.9853 32.1621 14.998C32.1083 14.9993 32.0541 15 32 15C31.9459 15 31.8917 14.9993 31.8379 14.998C31.2859 14.9853 30.8488 14.5276 30.8613 13.9756C30.8739 13.4235 31.3317 12.9865 31.8838 12.999C31.9224 12.9999 31.9611 13 32 13C32.0389 13 32.0776 12.9999 32.1162 12.999ZM26.9697 11.4199C27.3443 11.0624 27.9243 11.0533 28.3096 11.3828L28.3838 11.4531L28.5469 11.6162L28.6172 11.6904C28.9467 12.0757 28.9376 12.6557 28.5801 13.0303C28.2225 13.4047 27.6432 13.4411 27.2432 13.1299L27.166 13.0625L26.9375 12.834L26.8701 12.7568C26.5589 12.3568 26.5953 11.7775 26.9697 11.4199ZM35.6904 11.3828C36.0757 11.0533 36.6557 11.0624 37.0303 11.4199C37.4297 11.8014 37.4439 12.4346 37.0625 12.834L36.834 13.0625L36.7568 13.1299C36.3568 13.4411 35.7775 13.4047 35.4199 13.0303C35.0386 12.6309 35.0538 11.9976 35.4531 11.6162L35.6162 11.4531L35.6904 11.3828ZM25 8C25 7.94595 25.0007 7.89168 25.002 7.83789C25.0147 7.28591 25.4724 6.84878 26.0244 6.86133C26.5765 6.87394 27.0135 7.33168 27.001 7.88379C27.0001 7.9224 27 7.96114 27 8C27 8.03886 27.0001 8.0776 27.001 8.11621L26.998 8.21875C26.9582 8.72394 26.5419 9.12685 26.0244 9.13867C25.4724 9.15122 25.0147 8.71409 25.002 8.16211L25 8ZM38.998 8.16211C38.9853 8.71409 38.5276 9.15122 37.9756 9.13867C37.4235 9.12606 36.9865 8.66832 36.999 8.11621L38.998 8.16211ZM37 8C37 7.96114 36.9999 7.9224 36.999 7.88379L38.998 7.83789C38.9993 7.89168 39 7.94595 39 8C39 8.05405 38.9993 8.10832 38.998 8.16211L36.999 8.11621C36.9999 8.0776 37 8.03886 37 8ZM37.9756 6.86133C38.5276 6.84878 38.9853 7.28591 38.998 7.83789L36.999 7.88379C36.9865 7.33168 37.4235 6.87394 37.9756 6.86133ZM27.2432 2.87012C27.6432 2.55893 28.2225 2.59532 28.5801 2.96973C28.9614 3.36912 28.9462 4.00239 28.5469 4.38379L28.3838 4.54688L28.3096 4.61719C27.9243 4.94672 27.3443 4.93763 26.9697 4.58008C26.5703 4.19863 26.5561 3.5654 26.9375 3.16602L27.166 2.9375L27.2432 2.87012ZM35.4199 2.96973C35.7775 2.59532 36.3568 2.55892 36.7568 2.87012L36.834 2.9375L37.0625 3.16602L37.1299 3.24316C37.4411 3.64319 37.4047 4.22248 37.0303 4.58008C36.6557 4.93763 36.0757 4.94672 35.6904 4.61719L35.6162 4.54688L35.4531 4.38379L35.3828 4.30957C35.0533 3.92432 35.0624 3.34427 35.4199 2.96973ZM32.1621 1.00195C32.7141 1.01469 33.1512 1.47239 33.1387 2.02441C33.1261 2.57651 32.6683 3.01353 32.1162 3.00098C32.0776 3.0001 32.0389 3 32 3C31.9611 3 31.9224 3.0001 31.8838 3.00098L31.7812 2.99805C31.2761 2.95825 30.8731 2.54195 30.8613 2.02441C30.8488 1.47239 31.2859 1.01469 31.8379 1.00195L32 1C32.0541 1 32.1083 1.00073 32.1621 1.00195Z",fill:"#6C7787"}),he.jsx("path",{d:"M56.1162 12.999C56.6683 12.9865 57.1261 13.4235 57.1387 13.9756C57.1512 14.5276 56.7141 14.9853 56.1621 14.998C56.1083 14.9993 56.0541 15 56 15C55.9459 15 55.8917 14.9993 55.8379 14.998C55.2859 14.9853 54.8488 14.5276 54.8613 13.9756C54.8739 13.4235 55.3317 12.9865 55.8838 12.999C55.9224 12.9999 55.9611 13 56 13C56.0389 13 56.0776 12.9999 56.1162 12.999ZM50.9697 11.4199C51.3443 11.0624 51.9243 11.0533 52.3096 11.3828L52.3838 11.4531L52.5469 11.6162L52.6172 11.6904C52.9467 12.0757 52.9376 12.6557 52.5801 13.0303C52.2225 13.4047 51.6432 13.4411 51.2432 13.1299L51.166 13.0625L50.9375 12.834L50.8701 12.7568C50.5589 12.3568 50.5953 11.7775 50.9697 11.4199ZM59.6904 11.3828C60.0757 11.0533 60.6557 11.0624 61.0303 11.4199C61.4297 11.8014 61.4439 12.4346 61.0625 12.834L60.834 13.0625L60.7568 13.1299C60.3568 13.4411 59.7775 13.4047 59.4199 13.0303C59.0386 12.6309 59.0538 11.9976 59.4531 11.6162L59.6162 11.4531L59.6904 11.3828ZM49 8C49 7.94595 49.0007 7.89168 49.002 7.83789C49.0147 7.28591 49.4724 6.84878 50.0244 6.86133C50.5765 6.87394 51.0135 7.33168 51.001 7.88379C51.0001 7.9224 51 7.96114 51 8C51 8.03886 51.0001 8.0776 51.001 8.11621L50.998 8.21875C50.9582 8.72394 50.5419 9.12685 50.0244 9.13867C49.4724 9.15122 49.0147 8.71409 49.002 8.16211L49 8ZM62.998 8.16211C62.9853 8.71409 62.5276 9.15122 61.9756 9.13867C61.4235 9.12606 60.9865 8.66832 60.999 8.11621L62.998 8.16211ZM61 8C61 7.96114 60.9999 7.9224 60.999 7.88379L62.998 7.83789C62.9993 7.89168 63 7.94595 63 8C63 8.05405 62.9993 8.10832 62.998 8.16211L60.999 8.11621C60.9999 8.0776 61 8.03886 61 8ZM61.9756 6.86133C62.5276 6.84878 62.9853 7.28591 62.998 7.83789L60.999 7.88379C60.9865 7.33168 61.4235 6.87394 61.9756 6.86133ZM51.2432 2.87012C51.6432 2.55893 52.2225 2.59532 52.5801 2.96973C52.9614 3.36912 52.9462 4.00239 52.5469 4.38379L52.3838 4.54688L52.3096 4.61719C51.9243 4.94672 51.3443 4.93763 50.9697 4.58008C50.5703 4.19863 50.5561 3.5654 50.9375 3.16602L51.166 2.9375L51.2432 2.87012ZM59.4199 2.96973C59.7775 2.59532 60.3568 2.55892 60.7568 2.87012L60.834 2.9375L61.0625 3.16602L61.1299 3.24316C61.4411 3.64319 61.4047 4.22248 61.0303 4.58008C60.6557 4.93763 60.0757 4.94672 59.6904 4.61719L59.6162 4.54688L59.4531 4.38379L59.3828 4.30957C59.0533 3.92432 59.0624 3.34427 59.4199 2.96973ZM56.1621 1.00195C56.7141 1.01469 57.1512 1.47239 57.1387 2.02441C57.1261 2.57651 56.6683 3.01353 56.1162 3.00098C56.0776 3.0001 56.0389 3 56 3C55.9611 3 55.9224 3.0001 55.8838 3.00098L55.7812 2.99805C55.2761 2.95825 54.8731 2.54195 54.8613 2.02441C54.8488 1.47239 55.2859 1.01469 55.8379 1.00195L56 1C56.0541 1 56.1083 1.00073 56.1621 1.00195Z",fill:"#6C7787"}),he.jsx("path",{d:"M26 7C26.5523 7 27 7.44772 27 8C27 8.55228 26.5523 9 26 9H14C13.4477 9 13 8.55228 13 8C13 7.44772 13.4477 7 14 7H26Z",fill:"#404B5A"}),he.jsx("path",{d:"M38.1172 7L38.2197 7.00488C38.7241 7.056 39.1172 7.48217 39.1172 8C39.1172 8.51783 38.7241 8.944 38.2197 8.99512L38.1172 9H38V7H38.1172ZM42.1172 7L42.2197 7.00488C42.7241 7.056 43.1172 7.48217 43.1172 8C43.1172 8.51783 42.7241 8.944 42.2197 8.99512L42.1172 9H41.8828C41.3305 9 40.8828 8.55228 40.8828 8C40.8828 7.44772 41.3305 7 41.8828 7H42.1172ZM46.1172 7L46.2197 7.00488C46.7241 7.056 47.1172 7.48217 47.1172 8C47.1172 8.51783 46.7241 8.944 46.2197 8.99512L46.1172 9H45.8828C45.3305 9 44.8828 8.55228 44.8828 8C44.8828 7.44772 45.3305 7 45.8828 7H46.1172ZM50 7V9H49.8828C49.3305 9 48.8828 8.55228 48.8828 8C48.8828 7.44772 49.3305 7 49.8828 7H50Z",fill:"#6C7787"}),he.jsx("path",{d:"M26 31V33H14V31H26Z",fill:"#404B5A"}),he.jsx("path",{d:"M38.1172 31L38.2197 31.0049C38.7241 31.056 39.1172 31.4822 39.1172 32C39.1172 32.5178 38.7241 32.944 38.2197 32.9951L38.1172 33H38V31H38.1172ZM42.1172 31L42.2197 31.0049C42.7241 31.056 43.1172 31.4822 43.1172 32C43.1172 32.5178 42.7241 32.944 42.2197 32.9951L42.1172 33H41.8828C41.3305 33 40.8828 32.5523 40.8828 32C40.8828 31.4477 41.3305 31 41.8828 31H42.1172ZM46.1172 31L46.2197 31.0049C46.7241 31.056 47.1172 31.4822 47.1172 32C47.1172 32.5178 46.7241 32.944 46.2197 32.9951L46.1172 33H45.8828C45.3305 33 44.8828 32.5523 44.8828 32C44.8828 31.4477 45.3305 31 45.8828 31H46.1172ZM50 31V33H49.8828C49.3305 33 48.8828 32.5523 48.8828 32C48.8828 31.4477 49.3305 31 49.8828 31H50Z",fill:"#6C7787"}),he.jsx("path",{d:"M38.1172 55L38.2197 55.0049C38.7241 55.056 39.1172 55.4822 39.1172 56C39.1172 56.5178 38.7241 56.944 38.2197 56.9951L38.1172 57H38V55H38.1172ZM42.1172 55L42.2197 55.0049C42.7241 55.056 43.1172 55.4822 43.1172 56C43.1172 56.5178 42.7241 56.944 42.2197 56.9951L42.1172 57H41.8828C41.3305 57 40.8828 56.5523 40.8828 56C40.8828 55.4477 41.3305 55 41.8828 55H42.1172ZM46.1172 55L46.2197 55.0049C46.7241 55.056 47.1172 55.4822 47.1172 56C47.1172 56.5178 46.7241 56.944 46.2197 56.9951L46.1172 57H45.8828C45.3305 57 44.8828 56.5523 44.8828 56C44.8828 55.4477 45.3305 55 45.8828 55H46.1172ZM50 55V57H49.8828C49.3305 57 48.8828 56.5523 48.8828 56C48.8828 55.4477 49.3305 55 49.8828 55H50Z",fill:"#6C7787"}),he.jsx("path",{d:"M57 38.1172L56.9951 38.2197C56.944 38.7241 56.5178 39.1172 56 39.1172C55.4822 39.1172 55.056 38.7241 55.0049 38.2197L55 38.1172L55 38L57 38L57 38.1172ZM57 42.1172L56.9951 42.2197C56.944 42.7241 56.5178 43.1172 56 43.1172C55.4822 43.1172 55.056 42.7241 55.0049 42.2197L55 42.1172L55 41.8828C55 41.3305 55.4477 40.8828 56 40.8828C56.5523 40.8828 57 41.3305 57 41.8828L57 42.1172ZM57 46.1172L56.9951 46.2197C56.944 46.7241 56.5178 47.1172 56 47.1172C55.4822 47.1172 55.056 46.7241 55.0049 46.2197L55 46.1172L55 45.8828C55 45.3305 55.4477 44.8828 56 44.8828C56.5523 44.8828 57 45.3305 57 45.8828L57 46.1172ZM57 50L55 50L55 49.8828C55 49.3305 55.4477 48.8828 56 48.8828C56.5523 48.8828 57 49.3305 57 49.8828L57 50Z",fill:"#6C7787"}),he.jsx("path",{d:"M26 55C26.5523 55 27 55.4477 27 56C27 56.5523 26.5523 57 26 57H14V55H26Z",fill:"#404B5A"}),he.jsx("path",{d:"M9 14V26H7V14H9Z",fill:"#404B5A"}),he.jsx("path",{d:"M31 14C31 13.4477 31.4477 13 32 13C32.5523 13 33 13.4477 33 14V26H31V14Z",fill:"#404B5A"}),he.jsx("path",{d:"M9 38V50H7V38H9Z",fill:"#404B5A"}),he.jsx("path",{d:"M31 50V38H33V50C33 50.5523 32.5523 51 32 51C31.4477 51 31 50.5523 31 50Z",fill:"#404B5A"}),he.jsx("path",{d:"M57 14.1172L56.9951 14.2197C56.944 14.7241 56.5178 15.1172 56 15.1172C55.4822 15.1172 55.056 14.7241 55.0049 14.2197L55 14.1172L55 14L57 14L57 14.1172ZM57 18.1172L56.9951 18.2197C56.944 18.7241 56.5178 19.1172 56 19.1172C55.4822 19.1172 55.056 18.7241 55.0049 18.2197L55 18.1172L55 17.8828C55 17.3305 55.4477 16.8828 56 16.8828C56.5523 16.8828 57 17.3305 57 17.8828L57 18.1172ZM57 22.1172L56.9951 22.2197C56.944 22.7241 56.5178 23.1172 56 23.1172C55.4822 23.1172 55.056 22.7241 55.0049 22.2197L55 22.1172L55 21.8828C55 21.3305 55.4477 20.8828 56 20.8828C56.5523 20.8828 57 21.3305 57 21.8828L57 22.1172ZM57 26L55 26L55 25.8828C55 25.3305 55.4477 24.8828 56 24.8828C56.5523 24.8828 57 25.3305 57 25.8828L57 26Z",fill:"#6C7787"}),he.jsx("path",{d:"M37 32C37 29.2386 34.7614 27 32 27C29.2386 27 27 29.2386 27 32C27 34.7614 29.2386 37 32 37C34.7614 37 37 34.7614 37 32ZM39 32C39 35.866 35.866 39 32 39C28.134 39 25 35.866 25 32C25 28.134 28.134 25 32 25C35.866 25 39 28.134 39 32Z",fill:"#404B5A"})]}),yB=({children:i})=>{const{route:e,isLoading:t}=Gf(),r=Of();return t?he.jsx("div",{className:Id.loadingContainer,children:he.jsx(qo,{})}):e?i:he.jsx("div",{className:Id.noRouteContainer,children:he.jsxs("div",{className:Id.noRouteContent,children:[he.jsx(gB,{}),he.jsx("h1",{className:Id.noRouteTitle,children:it.t("Get started with the Modeling app")}),he.jsxs("div",{className:Id.noRouteText,children:[he.jsx("p",{children:it.t("To get started, create a route that points to a running CHAP server.")}),he.jsx("p",{children:it.t("Route and servers are configured on the settings page.")}),he.jsx("a",{href:"https://github.com/dhis2-chap/chap-core/wiki",target:"_blank",rel:"noopener noreferrer",className:Id.noRouteLink,children:it.t("Learn more about Modeling and CHAP")})]}),he.jsx(Gn,{onClick:()=>r("/settings"),children:it.t("Configure settings")})]})})},xB="1400px",vB={maxWidth:xB,marginLeft:"auto",marginRight:"auto",padding:"20px 10px 20px 10px"},N0=({component:i})=>he.jsxs(yB,{children:[he.jsx(cB,{}),he.jsx(GN,{}),he.jsx(sB,{}),he.jsx("div",{style:vB,children:i})]}),bB="_drawerWrapper_1jnc9_1",_B={drawerWrapper:bB};function zv(){return zv=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},zv.apply(this,arguments)}var wB=function(e,t){var r={left:{top:0,left:0,transform:"translate3d(-100%, 0, 0)",width:t,height:"100vh"},right:{top:0,right:0,transform:"translate3d(100%, 0, 0)",width:t,height:"100vh"},bottom:{left:0,right:0,bottom:0,transform:"translate3d(0, 100%, 0)",width:"100%",height:t},top:{left:0,right:0,top:0,transform:"translate3d(0, -100%, 0)",width:"100%",height:t}};return r[e]},f1=function(e){var t=e.open,r=e.onClose,s=r===void 0?function(){}:r,l=e.children,u=e.style,n=e.enableOverlay,p=n===void 0?!0:n,m=e.overlayColor,g=m===void 0?"#000":m,v=e.overlayOpacity,y=v===void 0?.4:v,C=e.zIndex,_=C===void 0?100:C,w=e.duration,k=w===void 0?500:w,S=e.direction,x=e.size,P=x===void 0?250:x,D=e.className,T=e.customIdSuffix,I=e.lockBackgroundScroll,N=I===void 0?!1:I,q=e.overlayClassName,Z=q===void 0?"":q,X=Ue.useRef(null);Ue.useEffect(function(){var L=function(){X.current=window.document.querySelector("body"),X.current&&N&&(X.current.style.overflow=t?"hidden":"")};L()},[t]);var O=Ue.useMemo(function(){return T||(Math.random()+1).toString(36).substring(7)},[T]),V={backgroundColor:g.toString(),opacity:y,zIndex:_},$=zv({zIndex:_+1,transitionDuration:k+"ms"},wB(S,P),u);return Ae.createElement("div",{id:"EZDrawer"+O,className:"EZDrawer"},Ae.createElement("input",{type:"checkbox",id:"EZDrawer__checkbox"+O,className:"EZDrawer__checkbox",onChange:s,checked:t}),Ae.createElement("nav",{role:"navigation",id:"EZDrawer__container"+O,style:$,className:"EZDrawer__container "+D},l),p&&Ae.createElement("label",{htmlFor:"EZDrawer__checkbox"+O,id:"EZDrawer__overlay"+O,className:"EZDrawer__overlay "+Z,style:V}))};const CB="_formWrapper_6d4wk_1",TB={formWrapper:CB},SB=({value:i,onChange:e})=>he.jsx("div",{children:he.jsxs(us,{onChange:({selected:t})=>e(t),selected:i,label:"Period type",children:[he.jsx(yo,{value:"week",label:"Weekly"}),he.jsx(yo,{value:"month",label:"Monthly"})]})}),EB="_datePicker_1yiz7_1",kB="_label_1yiz7_5",AB="_content_1yiz7_14",MB="_box_1yiz7_18",PB="_inputDiv_1yiz7_23",IB="_input_1yiz7_23",Dd={datePicker:EB,label:kB,content:AB,box:MB,inputDiv:PB,input:IB},F2=({label:i,name:e,onChange:t,periodeType:r})=>{const s=Ue.useRef(null);return he.jsxs("div",{className:Dd.datePicker,style:{opacity:r===""?.6:1},children:[he.jsx("label",{className:Dd.label,children:i}),he.jsx("div",{className:Dd.content,children:he.jsx("div",{className:Dd.box,children:he.jsx("div",{className:Dd.inputDiv,children:he.jsx("input",{disabled:r==="",className:Dd.input,ref:s,type:r,name:e,onChange:l=>t(l.target.value)})})})})]})},DB="_timePeriodeSelector_fpkps_1",RB="_timePeriodeSelectorInputFields_fpkps_7",LB="_timePeriodeSelectorInputFieldsChild_fpkps_13",ug={timePeriodeSelector:DB,timePeriodeSelectorInputFields:RB,timePeriodeSelectorInputFieldsChild:LB},zB=(i,e,t)=>t==="week"?NB(i,e):t==="month"?FB(i,e):[],NB=(i,e)=>{let[t,r]=i.split("-W").map(Number),[s,l]=e.split("-W").map(Number);if(s-t>100)return[];let u=[];for(let n=t;n<=s;n++){let p=jB(n),m=n===t?r:1,g=n===s?l:p;for(let v=m;v<=g;v++){let y=`${n}W${String(v).padStart(2,"0")}`;u.push({endDate:void 0,startDate:void 0,id:y})}}return u},OB=i=>{i=new Date(+i),i.setHours(0,0,0,0),i.setDate(i.getDate()+4-(i.getDay()||7));var e=new Date(i.getFullYear(),0,1),t=Math.ceil(((i-e)/864e5+1)/7);return[i.getFullYear(),t]},jB=i=>{var e=new Date(i,11,31),t=OB(e)[1];return t==1?52:t},FB=(i,e)=>{const[t,r]=i.split("-").map(Number),[s,l]=e.split("-").map(Number);if(s-t>100)return[];let u=[],n=t,p=r;for(;n<s||n===s&&p<=l;){let m=String(p).padStart(2,"0");u.push({id:`${n}${m}`,endDate:void 0,startDate:void 0}),p++,p>12&&(p=1,n++)}return u},v3=({setTimePeriods:i})=>{const[e,t]=Ue.useState(""),[r,s]=Ue.useState(""),[l,u]=Ue.useState(""),n=p=>{s(""),u(""),t(p)};return Ue.useEffect(()=>{i(zB(r,l,e))},[r,l]),he.jsxs("div",{children:[he.jsx("h3",{children:"Period"}),he.jsxs("div",{className:ug.timePeriodeSelector,children:[he.jsx(SB,{value:e,onChange:n}),he.jsxs("div",{className:ug.timePeriodeSelectorInputFields,children:[he.jsx("div",{className:ug.timePeriodeSelectorInputFieldsChild,children:he.jsx(F2,{periodeType:e,label:"Dateset start:",name:"",onChange:s})}),he.jsx("div",{className:ug.timePeriodeSelectorInputFieldsChild,children:he.jsx(F2,{periodeType:e,label:"Dateset end:",name:"",onChange:u})})]})]})]})},BB="_error_1rljs_1",$B={error:BB},UB={roots:{resource:"organisationUnits",params:()=>({fields:["id","displayName~rename(name)","path"],userDataViewFallback:!0})}},VB=()=>{var r;const{loading:i,error:e,data:t}=Ea(UB);return{roots:(r=t==null?void 0:t.roots)==null?void 0:r.organisationUnits,error:e,loading:i}},GB=({selectedOrgUnits:i,onChange:e})=>{const{roots:t,error:r}=VB();return Ue.useEffect(()=>{if(t&&!i){const[s]=t;e({...s,selected:[s.path]})}},[t]),t?he.jsxs("div",{children:[he.jsx("h3",{children:it.t("Organisation units")}),he.jsx(xS,{roots:t.map(s=>s.id),selected:i==null?void 0:i.map(s=>s.path),onChange:e,initiallyExpanded:t.map(s=>s.path)})]}):r?he.jsx("div",{children:r.message}):null},HB={levels:{resource:"organisationUnitLevels",params:{fields:["id","displayName~rename(name)","level"],order:"level:asc",paging:!1}}},WB=()=>{var r;const{loading:i,error:e,data:t}=Ea(HB);return{levels:(r=t==null?void 0:t.levels)==null?void 0:r.organisationUnitLevels,error:e,loading:i}},qB="_selectField_2clxr_1",YB={selectField:qB},ZB=({orgUnitLevels:i,onChange:e})=>{const{levels:t,loading:r,error:s}=WB(),l=u=>{const n={id:u.selected,level:t.find(p=>p.id===u.selected).level};e(n)};return Ue.useEffect(()=>{var u;(t==null?void 0:t.length)>2&&!i&&e({id:(u=t[1])==null?void 0:u.id,level:t[1].level})},[t,i,e]),t?he.jsx("div",{className:YB.selectField,children:he.jsx(us,{label:it.t("Organisation unit level"),helpText:it.t("Organisation unit level to import data to"),tabIndex:"1",selected:i==null?void 0:i.id,loading:r,error:!!s,onChange:l,children:t.map((u,n)=>he.jsx(yo,{value:u.id,label:u.name},u.id))})}):null},b3=({setOrgUnits:i,orgUnits:e,orgUnitLevel:t,setOrgUnitLevel:r})=>{const s=u=>{u.checked?i([...e,u]):i(e.filter(n=>n.path!==u.path))};function l(){if(e.length===0)return!0;const u=e[0].path.split("/").length;return e.every(n=>n.path.split("/").length===u)}return he.jsxs(he.Fragment,{children:[he.jsx(GB,{selectedOrgUnits:e,onChange:u=>{s(u)}}),!l()&&he.jsx("p",{className:$B.error,children:"Only select organization units that are one the same level."}),he.jsx(ZB,{orgUnitLevels:t,onChange:r})]})},XB=({dataElements:i=[],periodes:e=[],orgUnit:t={}}={})=>({request:{resource:"analytics",params:{paging:!1,dimension:`dx:${i.join(";")},ou:${t},pe:${e.join(";")}`}}}),KB=(i,e,t)=>{var n,p,m;const r=i.map(g=>g.dataSource);if(r.length===0)return{data:[],metaData:{},error:"",loading:!1};const{loading:s,error:l,data:u}=Ea(XB({dataElements:r,periodes:e,orgUnit:t}));return!s&&u&&!l?{data:(n=u==null?void 0:u.request)==null?void 0:n.rows,metaData:(m=(p=u==null?void 0:u.request)==null?void 0:p.metaData)==null?void 0:m.items,error:l,loading:s}:{data:u,metaData:{},error:l,loading:s}},QB={geojson:{resource:"organisationUnits.geojson",params:({level:i})=>({level:i})}},JB=i=>({features:i.geojson.features.map(({type:e,id:t,geometry:r,properties:s})=>({type:e,id:t,properties:s,geometry:r})),...i}),e7=(i,e)=>({type:"FeatureCollection",features:i.features.filter(t=>e.some(r=>r.id===t.id||t.properties.parentGraph.includes(r.id)))}),t7=(i,e)=>{const{data:t,loading:r,error:s}=Ea(QB,{variables:{level:i}});return{data:t&&e7(JB(t),e),error:s,loading:r}},i7="_text_b9rbg_1",n7={text:i7},r7=({selectedPeriodItems:i,setGeoJSon:e,setObservations:t,setFeatureDataItemMapper:r,setAnalyticsMetaData:s,setStartDownload:l,orgUnitLevel:u,selectedOrgUnits:n,analyticsDataLayers:p,setErrorMessages:m})=>{if(u==null)return he.jsx(he.Fragment,{});const g="LEVEL-"+u.id+";"+n.map(T=>T.id).join(";"),v=T=>T.map(I=>I.id),{data:y,error:C,loading:_,metaData:w}=KB(p,v(i),g),{data:k,error:S,loading:x}=t7(u.level,n),P=T=>T.map(I=>({featureName:p.filter(N=>N.dataSource===I)[0].feature,dataItemId:I})),D=T=>{const I=[...new Set(T.map(q=>q[0]))],N=P(I);return r(N),T.map(q=>({featureName:N.filter(Z=>Z.dataItemId===q[0])[0].featureName,orgUnit:q[1],period:q[2],value:parseFloat(q[3])}))};return Ue.useEffect(()=>{if(!(_||x)&&(y&&k&&(m([]),e(k),t(D(y)),s(w)),C||S)){const T=[];C&&T.push({description:JSON.stringify(C),title:"Analytics request failed"}),S&&T.push({description:JSON.stringify(S),title:"OrgUnits request failed"}),m(T),l(I=>({...I,startDownload:!1}))}},[_,x]),he.jsx("p",{className:n7.text,children:"Downloading data.."})};var _3={exports:{}};(function(i,e){(function(t,r){r()})(Fa,function(){function t(m,g){return typeof g>"u"?g={autoBom:!1}:typeof g!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),g={autoBom:!g}),g.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\uFEFF",m],{type:m.type}):m}function r(m,g,v){var y=new XMLHttpRequest;y.open("GET",m),y.responseType="blob",y.onload=function(){p(y.response,g,v)},y.onerror=function(){console.error("could not download file")},y.send()}function s(m){var g=new XMLHttpRequest;g.open("HEAD",m,!1);try{g.send()}catch{}return 200<=g.status&&299>=g.status}function l(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(g)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Fa=="object"&&Fa.global===Fa?Fa:void 0,n=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),p=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!n?function(m,g,v){var y=u.URL||u.webkitURL,C=document.createElement("a");g=g||m.name||"download",C.download=g,C.rel="noopener",typeof m=="string"?(C.href=m,C.origin===location.origin?l(C):s(C.href)?r(m,g,v):l(C,C.target="_blank")):(C.href=y.createObjectURL(m),setTimeout(function(){y.revokeObjectURL(C.href)},4e4),setTimeout(function(){l(C)},0))}:"msSaveOrOpenBlob"in navigator?function(m,g,v){if(g=g||m.name||"download",typeof m!="string")navigator.msSaveOrOpenBlob(t(m,v),g);else if(s(m))r(m,g,v);else{var y=document.createElement("a");y.href=m,y.target="_blank",setTimeout(function(){l(y)})}}:function(m,g,v,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof m=="string")return r(m,g,v);var C=m.type==="application/octet-stream",_=/constructor/i.test(u.HTMLElement)||u.safari,w=/CriOS\/[\d]+/.test(navigator.userAgent);if((w||C&&_||n)&&typeof FileReader<"u"){var k=new FileReader;k.onloadend=function(){var P=k.result;P=w?P:P.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=P:location=P,y=null},k.readAsDataURL(m)}else{var S=u.URL||u.webkitURL,x=S.createObjectURL(m);y?y.location=x:location.href=x,y=null,setTimeout(function(){S.revokeObjectURL(x)},4e4)}});u.saveAs=p.saveAs=p,i.exports=p})})(_3);var s7=_3.exports;const a7=oh(s7),o7="_errorChap_1v22m_1",l7="_errorBar_1v22m_6",c7="_errorHeader_1v22m_16",u7="_detailedError_1v22m_23",d7="_scrollMissingData_1v22m_29",h7="_notFoundDataTable_1v22m_34",Rd={errorChap:o7,errorBar:l7,errorHeader:c7,detailedError:u7,scrollMissingData:d7,notFoundDataTable:h7},p7="_buttons_1a7lz_1",f7="_text_1a7lz_7",B2={buttons:p7,text:f7},m7=({startDownload:i,isSendingDataToChap:e,formValid:t,orgUnits:r,onClickDownloadOrPostData:s,onButtonSendAction:l})=>{const u=()=>{if(r.length===0)return!0;const m=r[0].path.split("/").length;return r.every(g=>g.path.split("/").length===m)},n=l==="predict"?"Send prediction":"Create dataset",p=l==="predict"?he.jsx(ky,{}):he.jsx(Jv,{});return he.jsxs("div",{children:[he.jsxs("div",{className:B2.buttons,children:[he.jsx(Gn,{icon:he.jsx(TC,{}),loading:i.startDownload&&i.action==="download",disabled:!t||i.startDownload||!u(),onClick:()=>s("download"),children:"Download data"}),he.jsx(Gn,{icon:p,primary:!0,loading:i.startDownload&&i.action===l||e,disabled:!t||i.startDownload||!u(),onClick:()=>s(l),children:n})]}),e&&he.jsx("p",{className:B2.text,children:"Sending data.."})]})},w3=({onSendAction:i,onDrawerSubmit:e,selectedModel:t,name:r,selectedPeriodItems:s,selectedOrgUnits:l,orgUnitLevel:u,dataLayers:n})=>{const[p,m]=Ue.useState({action:"download",startDownload:!1}),[g,v]=Ue.useState(!1),[y,C]=Ue.useState(void 0),[_,w]=Ue.useState(),[k,S]=Ue.useState({}),x=n.filter(de=>de.origin==="dataItem"),[P,D]=Ue.useState([]),[T,I]=Ue.useState([]),[N,q]=Ue.useState(""),Z=()=>!(u===void 0||l.length==0||s.length==0||r===""||s.length==0||n.length==0||n.some(de=>de.feature===""||de.dataSource===""||de.origin==="")),X=de=>{C(void 0),w(void 0),I([]),m({action:de,startDownload:!0})};Ue.useEffect(()=>{if(y&&_){if(q(""),m(de=>({...de,startDownload:!1})),p.action==="download"){re();return}if(V(y))return;p.action==="predict"&&W(),p.action==="new-dataset"&&H()}},[y,_]);const O=(de,ie,oe,Ee)=>{var K;const xe=[],Se=[...new Set(de.map(Q=>Q.orgUnit))];s.forEach(Q=>{Se.forEach(ae=>{var J;let _e=!0;de.filter(ne=>ne.featureName===oe).forEach(ne=>{if(Q.id==ne.period){_e=!1;return}}),_e&&xe.push({covariate:Ee,orgUnitName:((J=k[ae])==null?void 0:J.name)||"",period:Q.id})})}),xe.length>0&&ie.push({title:Ee+" is missing for the following orgUnit and time periods: ",description:he.jsxs("div",{children:[he.jsxs("p",{children:["Total missing: ",xe.length," | Use the"," ",he.jsx("a",{target:"_blank",href:((K=$==null?void 0:$.systemInfo)==null?void 0:K.contextPath)+"/api/apps/climate-data/index.html#/import",children:"Climate App"})," ","to import climate data."]}),he.jsx("div",{className:Rd.scrollMissingData,children:he.jsxs("table",{className:Rd.notFoundDataTable,children:[he.jsx("thead",{children:he.jsxs("tr",{children:[he.jsx("th",{children:"Organisation unit:"}),he.jsx("th",{children:"Time period:"})]})}),he.jsx("tbody",{children:xe.map(Q=>he.jsxs("tr",{children:[he.jsx("td",{children:Q.orgUnitName}),he.jsx("td",{children:e1({periodId:Q.period,calendar:"gregory"}).displayName})]}))})]})})]})})},V=de=>{let ie=[];return n.filter(oe=>oe.origin=="dataItem").forEach(oe=>{var Ee;if(((Ee=de.filter(xe=>xe.featureName===oe.feature))==null?void 0:Ee.length)===0){const xe='Thes selected data item for covarate "'+oe.feature+'" returned no data.';ie.push({description:"Ensure you have exported the analytics tables in DHIS2.",title:xe})}}),n.find(oe=>oe.feature==="rainfall"&&oe.origin=="dataItem")&&O(de,ie,"rainfall","Rainfall"),n.find(oe=>oe.feature==="mean_temperature"&&oe.origin=="dataItem")&&O(de,ie,"mean_temperature","Mean Temperature"),ie.length>0?(I([...T,...ie]),!0):!1},$=Ey(),L=()=>{var de,ie;return{appVersion:((de=$==null?void 0:$.appVersion)==null?void 0:de.full)||"Unknown",dhis2Version:((ie=$==null?void 0:$.systemInfo)==null?void 0:ie.version)||"Unknown",dataItemMapper:P}},R=()=>({name:r,dataToBeFetched:B(),metaData:L(),providedData:y,geojson:_}),G=()=>R(),U=()=>({type:"predict",modelId:t==null?void 0:t.name,...R()}),B=()=>n.filter(de=>de.origin==="CHAP").map(de=>({dataSourceName:de.dataSource,featureName:de.feature})),H=async()=>{let de=G();v(!0),await eh.makeDatasetAnalyticsMakeDatasetPost(de).then(ie=>{q(""),e()}).catch(ie=>{var oe,Ee;(oe=ie==null?void 0:ie.body)!=null&&oe.detail?q(JSON.stringify((Ee=ie==null?void 0:ie.body)==null?void 0:Ee.detail)):q("An error occured while sending the request to CHAP Core.")}).finally(()=>{v(!1)})},W=async()=>{let de=U();v(!0),await eh.makePredictionAnalyticsMakePredictionPost(de).then(ie=>{e()}).catch(ie=>{var oe,Ee;(oe=ie==null?void 0:ie.body)!=null&&oe.detail?q(JSON.stringify((Ee=ie==null?void 0:ie.body)==null?void 0:Ee.detail)):q("An error occured while sending the request to CHAP Core.")}).finally(()=>{v(!1)})},re=()=>{let de={};i==="predict"&&(de=U()),i==="new-dataset"&&(de=G());var ie=new Blob([JSON.stringify(de,null,2)],{type:"application/json"});const oe=new Date;a7(ie,i.replaceAll("-","_")+"_chap_request_data_"+oe.toJSON()+".json")};return he.jsxs("div",{children:[he.jsx(m7,{formValid:Z(),onButtonSendAction:i,onClickDownloadOrPostData:X,orgUnits:l,isSendingDataToChap:g,startDownload:p}),he.jsx("p",{className:Rd.errorChap,children:N}),p.startDownload&&Z()&&he.jsx(r7,{setAnalyticsMetaData:S,setFeatureDataItemMapper:D,model_id:t==null?void 0:t.name,setObservations:C,setGeoJSon:w,analyticsDataLayers:x,startDownload:p,setStartDownload:m,selectedPeriodItems:s,setErrorMessages:I,selectedOrgUnits:l,orgUnitLevel:u}),T.map((de,ie)=>he.jsxs("div",{className:Rd.errorBar,children:[he.jsxs("div",{className:Rd.errorHeader,children:[he.jsx(EC,{}),he.jsx("span",{children:de.title})]}),he.jsx("span",{className:Rd.detailedError,children:de.description})]},ie))]})},g7="_dataLineWrapper_epwpx_1",y7="_selectField_epwpx_9",x7="_buttonRight_epwpx_13",v7="_selectDataLineWrapper_epwpx_19",b7="_predictLabel_epwpx_27",Tp={dataLineWrapper:g7,selectField:y7,buttonRight:x7,selectDataLineWrapper:v7,predictLabel:b7},_7="_searchSelectField_fpa7s_1",w7="_inputField_fpa7s_6",C7="_input_fpa7s_6",T7="_dropDown_fpa7s_33",S7="_dropDownItem_fpa7s_50",E7="_rightDropDownItem_fpa7s_60",k7="_label_fpa7s_69",A7="_infoSearchItem_fpa7s_75",yl={searchSelectField:_7,inputField:w7,input:C7,dropDown:T7,dropDownItem:S7,rightDropDownItem:E7,label:k7,infoSearchItem:A7},M7=i=>({results:{resource:"dataItems",params:{filter:"displayName:ilike:"+i,fields:"id,displayName,dimensionItemType",order:"displayName:asc",page:1,pageSize:20}}}),P7=({feature:i,onChangeSearchSelectField:e})=>{const[t,r]=Ue.useState(""),s=ah(),[l,u]=Ue.useState([]),[n,p]=Ue.useState(!1),m=async()=>{try{const x=await s.query(M7(t));u(x.results.dataItems)}catch(x){console.error("Error fetching data:",x)}finally{p(!1)}};Ue.useEffect(()=>{if(t.length===0){u([]);return}p(!0);const x=setTimeout(()=>{m()},300);return()=>{clearTimeout(x)}},[t]);const[g,v]=Ue.useState(!1),y=x=>{v(!0);const P=x.target.value;r(P)},C=x=>{r(x.displayName),e(i,x.id,x.displayName),v(!1)},_=Ue.useRef(null),w=x=>x.replaceAll("_"," ").split(" ").map(P=>P.charAt(0).toUpperCase()+P.slice(1).toLowerCase()).join(" "),k=x=>{_.current&&!_.current.contains(x.target)&&v(!1)},S=()=>n?he.jsx("li",{className:yl.infoSearchItem,children:"Loading..."}):l.length==0&&t.length==0?he.jsx("li",{className:yl.infoSearchItem,children:"Start to search by typing"}):l.length==0?he.jsx("li",{className:yl.infoSearchItem,children:"No match found"}):he.jsx(he.Fragment,{children:l.map(x=>he.jsxs("li",{onClick:()=>C(x),className:yl.dropDownItem,children:[he.jsx("div",{children:x.displayName}),he.jsx("div",{className:yl.rightDropDownItem,children:w(x.dimensionItemType)??""})]},x.id))});return Ue.useEffect(()=>(document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}),[]),he.jsxs("div",{ref:_,className:yl.searchSelectField,children:[he.jsx("label",{className:yl.label,children:he.jsx("span",{children:w(i.name??"")})}),he.jsx("input",{type:"search",value:t,onChange:y,placeholder:"Search for indicators, Data Elements, Data Sets, Event Data Items, Program Indicators...",className:yl.inputField}),g&&he.jsx("ul",{className:yl.dropDown,children:S()})]})},C3=({datasetLayers:i,setDataLayers:e,predictMode:t})=>{const[r,s]=Ue.useState([]),l=async()=>{await eh.getDataSourcesAnalyticsDataSourcesGet().then(p=>{s(p)})};Ue.useEffect(()=>{l()},[]);const u=(p,m,g)=>{let v=[...i];p.selected!=null&&(v[g][m]=p.selected,e(v))},n=(p,m)=>{u({selected:p},"dataSource",m)};return he.jsxs("div",{children:[he.jsx("h3",{children:"Covariates"}),he.jsx("div",{className:Tp.selectDataLineWrapper,children:i.map((p,m)=>{var g,v,y;return he.jsx("div",{children:he.jsxs("div",{className:Tp.dataLineWrapper,children:[t?he.jsx("div",{className:Tp.predictLabel,children:((g=zg.filter(C=>C.id===p.feature)[0])==null?void 0:g.name)+":"}):he.jsx("div",{className:Tp.predictLabel,children:((v=zg.filter(C=>C.id===p.feature)[0])==null?void 0:v.name)+":"}),he.jsxs("div",{className:Tp.selectField,children:[(p.origin==="CHAP"||p.origin==="")&&he.jsx(us,{disabled:p.origin==="",label:"Data Element",onChange:C=>u(C,"dataSource",m),selected:p.dataSource,children:r.map(C=>C.supportedFeatures.includes(p.feature)&&he.jsx(yo,{label:`${C.dataset.toUpperCase()} - ${C.displayName}`,value:C.dataset},C.name))}),p.origin==="dataItem"&&he.jsx(P7,{feature:{name:(y=zg.filter(C=>C.id===p.feature)[0])==null?void 0:y.name,id:p.feature,description:""},onChangeSearchSelectField:(C,_)=>n(_,m)})]})]})},m)})})]})},zg=[{id:"rainfall",name:"Rainfall",description:"The amount of rainfall in mm",optional:!0},{id:"mean_temperature",name:"Mean Temperature",description:"The average temperature in degrees Celsius",optional:!0},{id:"population",name:"Population",description:"The population of the area",optional:!1},{name:"Disease cases",id:"disease_cases",description:"Feature 5"}],I7=()=>zg.map(e=>({feature:e.id,origin:"dataItem",dataSource:""})),D7=({onDrawerSubmit:i})=>{const[e,t]=Ue.useState(I7()),[r,s]=Ue.useState([]),[l,u]=Ue.useState([]),[n,p]=Ue.useState(void 0),[m,g]=Ue.useState("");return he.jsx(he.Fragment,{children:he.jsxs("div",{className:TB.formWrapper,children:[he.jsx(bf,{autoComplete:"",label:"Dataset name",value:m,onChange:v=>g(v.value),helpText:"Name your dataset",placeholder:"Example: Monthly malaria cases, ERA5 climate data, all districts"}),he.jsx(C3,{setDataLayers:t,datasetLayers:e}),he.jsx(v3,{setTimePeriods:u}),he.jsx(b3,{orgUnits:r,setOrgUnits:s,orgUnitLevel:n,setOrgUnitLevel:p}),he.jsx(w3,{onDrawerSubmit:i,name:m,dataLayers:e,onSendAction:"new-dataset",orgUnitLevel:n,selectedPeriodItems:l,selectedOrgUnits:r})]})})},R7="_newDatasetWrapper_1jun0_1",L7="_newEvaluationDatasetTitle_1jun0_5",z7="_navFooterOuter_1jun0_12",N7="_navFooter_1jun0_12",$2={newDatasetWrapper:R7,newEvaluationDatasetTitle:L7,navFooterOuter:z7,navFooter:N7},O7=({onDrawerClose:i,onDrawerSubmit:e})=>he.jsx(he.Fragment,{children:he.jsxs("div",{className:$2.newDatasetWrapper,children:[he.jsxs("div",{className:$2.newEvaluationDatasetTitle,children:[he.jsx("h2",{children:"New evaluation dataset"}),he.jsx(Gn,{icon:he.jsx(Kv,{}),onClick:i})]}),he.jsx(D7,{onDrawerSubmit:e})]})}),j7=({isOpen:i,onDrawerSubmit:e,onDrawerClose:t})=>{const r=window.innerWidth<900?"100vw":"1000px";return he.jsx("div",{children:he.jsx(f1,{open:i,onClose:t,direction:"right",size:r,children:he.jsx("div",{className:_B.drawerWrapper,children:he.jsx(O7,{onDrawerClose:t,onDrawerSubmit:e})})})})},F7="_pageHeader_1or2f_1",B7="_pageDescription_1or2f_8",U2={pageHeader:F7,pageDescription:B7},ly=({pageTitle:i,pageDescription:e,setDrawerOpen:t,setDrawerOpenText:r})=>he.jsxs("div",{className:U2.pageHeader,children:[he.jsxs("div",{children:[he.jsx("h2",{children:i}),he.jsx("p",{className:U2.pageDescription,children:e})]}),t&&r&&he.jsx(Gn,{onClick:()=>t(!0),icon:he.jsx(Qv,{}),primary:!0,children:r})]}),$7="_jobResultPanelContainer_16af9_1",U7="_boxPanel_16af9_9",V7="_flexMedium_16af9_17",G7="_flexItemRight_16af9_21",H7="_inProgress_16af9_26",W7="_notStarted_16af9_31",q7="_completed_16af9_36",Y7="_failed_16af9_41",Z7="_resultTextHeader_16af9_46",X7="_evaluationModal_16af9_53",K7="_jobLogsModal_16af9_58",ic={jobResultPanelContainer:$7,boxPanel:U7,flexMedium:V7,flexItemRight:G7,inProgress:H7,notStarted:W7,completed:q7,failed:Y7,resultTextHeader:Z7,evaluationModal:X7,jobLogsModal:K7},Q7="_modal_1k0a4_1",J7={modal:Q7},e$="_container_mngpy_1",t$="_innerContainer_mngpy_6",i$="_prediction_mngpy_21",n$="_warning_mngpy_26",r$="_footer_mngpy_31",s$="_post_mngpy_36",a$="_redText_mngpy_40",o$="_greenText_mngpy_45",Ql={container:e$,innerContainer:t$,prediction:i$,warning:n$,footer:r$,post:s$,redText:a$,greenText:o$},l$={orgUnits:{resource:"organisationUnits",params:{paging:!1,fields:["id","displayName"]}}},T3=()=>{const[i,e]=Ue.useState(),{loading:t,error:r}=Ea(l$,{onComplete:s=>e(s.orgUnits)});return{orgUnits:i,error:r,loading:t}},c$=({prediction:i,qLowDataElementId:e,qMedianDataElementId:t,qHighDataElementId:r,setPostHttpError:s,setPostStatus:l})=>{const u=_=>{if(_==="quantile_low")return e;if(_==="median")return t;if(_==="quantile_high")return r},n=_=>_.dataValues.map(w=>({dataElement:u(w.dataElement),period:w.period,orgUnit:w.orgUnit,value:w.value})),p=_=>({resource:"dataValueSets",type:"create",data:{dataValues:_}}),[m,{error:g,loading:v,called:y}]=eS(p(n(i))),C=async()=>{await m()};return Ue.useEffect(()=>{C()},[]),Ue.useEffect(()=>{y&&(v||(g&&(s("Something went wrong when posting the prediction."),l("error")),g||(s(""),l("finish"))))},[v]),null},u$="_selectWrapper_8vdsv_1",d$="_select_8vdsv_1",V2={selectWrapper:u$,select:d$},O0=({value:i,onChange:e,label:t,dataElements:r})=>{const s=u=>{e({displayName:r==null?void 0:r.find(n=>n.id===u.selected).displayName,id:u.selected})},l=(r==null?void 0:r.length)===0&&r!=null;return he.jsx("div",{children:he.jsx("div",{children:he.jsx("div",{className:V2.select,children:he.jsxs("div",{className:V2.selectWrapper,children:[he.jsx("span",{children:t}),he.jsx(us,{tabIndex:"1",placeholder:it.t("Select data element"),disabled:l,selected:i?i.id:"",warning:l,onChange:s,children:r==null?void 0:r.map(u=>he.jsx(yo,{label:u.displayName,value:u.id},u.id))})]})})})})},h$="_textWarning_3ldzr_1",p$="_wrapper_3ldzr_6",f$="_wrapperWarning_3ldzr_14",j0={textWarning:h$,wrapper:p$,wrapperWarning:f$},m$="_dataValueTables_vzc5s_10",g$="_warning_vzc5s_17",G2={dataValueTables:m$,warning:g$},y$=({setModalOpen:i,modalOpen:e,predictionTarget:t})=>{const r=Ey();return e&&he.jsx(Cu,{large:!0,onClose:()=>i(!1),children:he.jsxs(wy,{children:[he.jsx("h2",{children:it.t("Add required Data Elements")}),he.jsxs("p",{children:[it.t("This app requires specific DHIS2 Data Elements to import data into. If you have not already added them, go to the "),he.jsx("a",{target:"_blank",href:`${r.baseUrl}/dhis-web-maintenance/index.html#/list/dataElementSection/dataElement`,children:"Maintenance"}),it.t("-app and create the Data Elements listed below.")]}),he.jsx("p",{className:G2.warning,children:it.t("NB! Make sure the CODE property for each data element is exactly the same as below.")}),he.jsx("p",{children:it.t("Properties in the new Data Element form not specified in the tables below should have the default value.")}),he.jsxs("div",{className:G2.dataValueTables,children:[he.jsx(F0,{q:"Low",disease:t}),he.jsx(F0,{q:"Median",disease:t}),he.jsx(F0,{q:"High",disease:t})]})]})})},F0=({q:i,disease:e})=>he.jsx("table",{children:he.jsxs("tbody",{children:[he.jsxs("tr",{children:[he.jsx("th",{children:it.t("Name")}),he.jsxs("td",{children:["CHAP",it.t(` ${e} Quantile ${i}`)]})]}),he.jsxs("tr",{children:[he.jsx("th",{children:it.t("Short name")}),he.jsxs("td",{children:["CHAP",it.t(` ${e} Quantile ${i}`)]})]}),he.jsxs("tr",{children:[he.jsx("th",{children:it.t("Code")}),he.jsx("td",{children:`CHAP_${i.toUpperCase()}_${e.toLocaleUpperCase().replaceAll(" ","_")}`})]}),he.jsxs("tr",{children:[he.jsx("th",{children:it.t("Domain type")}),he.jsx("td",{children:it.t("Aggregate")})]}),he.jsxs("tr",{children:[he.jsx("th",{children:it.t("Aggregation levels")}),he.jsx("td",{children:he.jsx("em",{children:it.t("Assign all org unit levels")})})]})]})}),x$=({predictionTarget:i,warning:e})=>{const[t,r]=Ue.useState(!1);return he.jsxs(he.Fragment,{children:[he.jsxs("div",{className:e?j0.wrapperWarning:j0.wrapper,children:[he.jsx("div",{className:j0.textWarning,children:e&&he.jsx(he.Fragment,{children:he.jsx("p",{children:it.t("It seems like you missing Data Elements for CHAP prediction.")})})}),he.jsx("div",{children:he.jsx(Gn,{icon:he.jsx(Jv,{}),onClick:()=>r(!0),children:it.t("Add data elements")})})]}),he.jsx(y$,{modalOpen:t,setModalOpen:r,predictionTarget:i})]})},v$=i=>({dataElements:{resource:"dataElements",params:{paging:!1,fields:["code","displayName","id"],filter:`code:ilike:${i}`}}}),B0=i=>{const[e,t]=Ue.useState(),{loading:r,error:s}=Ea(v$(i),{onComplete:l=>t(l.dataElements.dataElements)});return{dataElements:e,error:s,loading:r}},b$=i=>({dataItems:{resource:"dataItems",params:{paging:!1,filter:`id:eq:${i}`}}}),_$=i=>{const[e,t]=Ue.useState(),{loading:r,error:s,engine:l}=Ea({});Ue.useEffect(()=>{i&&u()},[i]);const u=async()=>{const n=await l.query(b$(i));n.dataItems.dataItems.length===0?t("?"):t(n.dataItems.dataItems[0].displayName)};return{displayName:e,error:s,loading:r}},w$=({prediction_unprocessed:i})=>{var G;const e=Qo(),[t,r]=Ue.useState("chart"),[s,l]=Ue.useState(),[u,n]=Ue.useState(null),[p,m]=Ue.useState(null),[g,v]=Ue.useState(null),y=(U,B)=>{if(!B)return 0;const H=[...B].sort((oe,Ee)=>oe-Ee),W=H.length,re=U*(W-1),de=Math.floor(re),ie=Math.ceil(re);return Math.round(de===ie?H[de]:H[de]+(H[ie]-H[de])*(re-de))},C=[{q:.1,name:"quantile_low"},{q:.5,name:"median"},{q:.9,name:"quantile_high"}],_=()=>{var U,B;return((B=(U=i==null?void 0:i.metaData)==null?void 0:U.dataItemMapper)==null?void 0:B.find(H=>H.featureName==="disease_cases").dataItemId)??""},w=()=>({diseaseId:P,dataValues:i.forecasts.flatMap(U=>C.map(B=>({orgUnit:U.orgUnit,value:y(B.q,U.values),displayName:U.orgUnit,dataElement:B.name,period:U.period})))}),{dataElements:k}=B0("CHAP_LOW"),{dataElements:S}=B0("CHAP_MEDIAN"),{dataElements:x}=B0("CHAP_HIGH"),P=_(),{displayName:D}=_$(P),{orgUnits:T,loading:I}=T3(),[N,q]=Ue.useState("initial"),[Z,X]=Ue.useState("");Ue.useEffect(()=>{T&&V()},[(G=e==null?void 0:e.state)==null?void 0:G.data,T]);const O=()=>(k==null?void 0:k.length)===0||(S==null?void 0:S.length)===0||(x==null?void 0:x.length)===0,V=async U=>{q("initial")};Ue.useEffect(()=>{D&&T&&i&&l(L(w()))},[D,T,i]),Ue.useEffect(()=>{if(k&&S&&x&&D){const U=k.find(W=>W.code===`CHAP_LOW_${D.toLocaleUpperCase().replaceAll(" ","_")}`);U&&n(U);const B=S.find(W=>W.code===`CHAP_MEDIAN_${D.toLocaleUpperCase().replaceAll(" ","_")}`);B&&m(B);const H=x.find(W=>W.code===`CHAP_HIGH_${D.toLocaleUpperCase().replaceAll(" ","_")}`);H&&v(H)}},[k,S,x,D]);const $=()=>!u&&!p&&!g?!1:!!(u&&!(u!=null&&u.displayName.includes(D))||p&&!(p!=null&&p.displayName.includes(D))||g&&!(g!=null&&g.displayName.includes(D))),L=U=>({dataValues:U.dataValues.map(B=>{var H;return{...B,displayName:(H=T==null?void 0:T.organisationUnits.find(W=>W.id===B.orgUnit))==null?void 0:H.displayName}}),diseaseId:U.diseaseId}),R=()=>!!(u&&p&&g);return he.jsx("div",{className:Ql.container,children:he.jsxs("div",{className:Ql.innerContainer,children:[I&&he.jsx("p",{children:"Loading metadata from DHIS2.. "}),he.jsxs("h1",{children:["Prediction: ",i.name]}),s&&he.jsxs(he.Fragment,{children:[he.jsxs(Fb,{scrollable:!0,children:[he.jsx(Qd,{selected:t==="chart",onClick:()=>r("chart"),children:"Chart"}),he.jsx(Qd,{selected:t==="table",onClick:()=>r("table"),children:"Table"})]}),he.jsx("div",{className:Ql.prediction,children:{chart:he.jsx(vj,{predictionTargetName:D,data:s}),table:he.jsx(zF,{data:s}),map:he.jsx(he.Fragment,{})}[t]}),he.jsx("h3",{children:it.t("Select which data element prediction should be imported to:")}),he.jsx(x$,{warning:O(),predictionTarget:D}),he.jsx(O0,{label:it.t("Select data element for low quantile"),dataElements:k,onChange:n,value:u}),he.jsx(O0,{label:it.t("Select data element for median quantile"),dataElements:S,onChange:m,value:p}),he.jsx(O0,{label:it.t("Select data element for high quantile"),dataElements:x,onChange:v,value:g}),$()&&he.jsx("p",{className:Ql.warning,children:"Warning: It seems like selected data elements do not match the disease of prediction."}),he.jsx("div",{className:Ql.footer,children:he.jsx(Gn,{onClick:()=>q("loading"),loading:N==="loading",disabled:N==="finish"||N==="loading"||!R(),icon:he.jsx(ky,{}),primary:!0,children:it.t("Import prediction")})}),N==="loading"&&he.jsx(c$,{setPostHttpError:X,setPostStatus:q,prediction:s,qLowDataElementId:u==null?void 0:u.id,qMedianDataElementId:p==null?void 0:p.id,qHighDataElementId:g==null?void 0:g.id}),he.jsxs("div",{className:Ql.post,children:[N==="finish"&&he.jsx("p",{className:Ql.greenText,children:it.t("Prediction has been imported.")}),he.jsx("p",{className:Ql.redText,children:it.t(Z)})]})]})]})})},C$=({isImportModalOpen:i,setIsImportModalOpen:e,predictionIdToImport:t})=>{const[r,s]=Ue.useState(),l=async u=>{await io.getPredictionCrudPredictionsPredictionIdGet(u).then(n=>{s(n)})};return Ue.useEffect(()=>{t&&l(Number(t))},[]),he.jsx("div",{children:i&&he.jsx(he.Fragment,{children:he.jsx(Cu,{className:J7.modal,onClose:()=>{e(!1)},children:he.jsx(he.Fragment,{children:r&&he.jsx(w$,{prediction_unprocessed:r})})})})})},T$="_jobResultPanelContainer_8nqrq_1",S$="_boxPanel_8nqrq_9",E$="_flexMedium_8nqrq_17",k$="_flexItemRight_8nqrq_21",A$="_inProgress_8nqrq_29",M$="_notStarted_8nqrq_34",P$="_completed_8nqrq_39",I$="_failed_8nqrq_44",D$="_resultTextHeader_8nqrq_49",R$="_evaluationModal_8nqrq_56",L$="_jobLogsModal_8nqrq_61",z$="_popupMenuDiv_8nqrq_66",lo={jobResultPanelContainer:T$,boxPanel:S$,flexMedium:E$,flexItemRight:k$,inProgress:A$,notStarted:M$,completed:P$,failed:I$,resultTextHeader:D$,evaluationModal:R$,jobLogsModal:L$,popupMenuDiv:z$},N$=(i,e)=>{Ue.useEffect(()=>{const t=r=>{const s=i.current;!s||s.contains(r.target)||e(r)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}},[i,e])},O$=({i,jobResult:e,onClickEvaluateDataset:t,onClickViewEvaluation:r,onClickImport:s,onClickViewLogs:l,onClickRemove:u})=>{const[n,p]=Ue.useState(!1),m=Ue.useRef(null),g=Ue.useRef(null);N$(g,C=>{var _;(_=m.current)!=null&&_.contains(C.target)||p(!1)});const v=C=>{switch(C){case"STARTED":return lo.inProgress;case"PENDING":return lo.notStarted;case"FAILURE":return lo.failed;default:return lo.completed}},y=C=>{switch(C){case"STARTED":return"In progress..";case"PENDING":return"Pending..";case"FAILURE":return"Failed";default:return"Completed"}};return he.jsx("div",{className:lo.boxPanel,children:he.jsxs("div",{className:lo.jobResultPanelContainer,children:[he.jsx("div",{className:lo.flexMedium,children:e.name}),he.jsx("div",{className:lo.flexMedium,children:e.created.toDateString()+", "+e.created.toLocaleTimeString().slice(0,5)}),he.jsx("div",{className:lo.flexMedium,children:he.jsx("span",{className:v(e.status),children:y(e.status)})}),he.jsxs("div",{className:lo.flexItemRight,children:[{prediction:he.jsx(he.Fragment,{children:e.status=="SUCCESS"&&he.jsx(Gn,{icon:he.jsx(kC,{}),onClick:()=>s(e.result),small:!0,children:"Import"})}),dataset:he.jsx(he.Fragment,{children:e.status=="SUCCESS"&&he.jsx(Gn,{icon:he.jsx(AC,{}),onClick:()=>t(e.result),small:!0,children:"Evaluate"})}),evaluation:he.jsx(he.Fragment,{children:e.status=="SUCCESS"&&he.jsx(Gn,{icon:he.jsx(IC,{}),onClick:()=>r(e.result),small:!0,children:"View"})})}[e.type],e.status!="SUCCESS"&&he.jsx(Gn,{icon:he.jsx(xC,{}),onClick:()=>l(e.id),small:!0,children:"Logs"}),he.jsx("div",{ref:m,children:he.jsx(Fj,{enabled:e.status==="STARTED",content:it.t("Job is still running. Please wait until it is finished before doing any actions."),children:he.jsx(Gn,{small:!0,icon:he.jsx(ib,{}),disabled:e.status==="STARTED",onClick:()=>p(C=>!C)})})}),n&&he.jsx(sh,{reference:m,placement:"top-end",children:he.jsx("div",{ref:g,className:lo.popupMenuDiv,children:he.jsx(Xv,{children:["SUCCESS","FAILURE"].includes(e.status)&&he.jsx(Tu,{label:"Delete",icon:he.jsx(CC,{}),destructive:!0,onClick:()=>{p(!1),u(e)}})})})})]})]})},i)},j$="_jobLogs_pzpzf_1",F$="_logContent_pzpzf_7",$0={jobLogs:j$,logContent:F$},S3=(i,e)=>{const t=Ue.useRef(),r=Ue.useRef(null),s=()=>{r.current===null&&document.visibilityState==="visible"&&(r.current=setInterval(()=>{t.current&&t.current()},e))},l=()=>{r.current!==null&&(clearInterval(r.current),r.current=null)};Ue.useEffect(()=>{t.current=i},[i]),Ue.useEffect(()=>{const u=()=>{document.visibilityState==="visible"?s():l()};return document.addEventListener("visibilitychange",u),document.visibilityState==="visible"&&s(),()=>{l(),document.removeEventListener("visibilitychange",u)}},[e])},B$=({jobId:i})=>{const[e,t]=Ue.useState(null),[r,s]=Ue.useState(null),[l,u]=Ue.useState(!1),n=Ue.useRef(null),p=async()=>{if(i){console.log("fetching logs");try{const m=await n1.getLogsJobsJobIdLogsGet(i);t(m)}catch(m){s(m.body.detail)}finally{u(!1)}}};return Ue.useEffect(()=>{u(!0),s(null),p()},[i]),Ue.useEffect(()=>{n.current&&(n.current.scrollTop=n.current.scrollHeight)},[e]),S3(p,5e3),i?l?he.jsx("p",{children:"Loading logs..."}):r?he.jsxs("p",{className:$0.error,children:["Error: ",r]}):he.jsxs("div",{className:$0.jobLogs,children:[he.jsx("h2",{children:"Job Logs"}),he.jsx("pre",{className:$0.logContent,ref:n,children:e||"<No logs reported for this job>"})]}):he.jsx("p",{children:"No job ID provided."})},$$="_drawerWrapper_l3raf_1",U$={drawerWrapper:$$},V$="_formWrapper_13v73_1",G$="_newEvaluationTitle_13v73_8",H$="_buttons_13v73_15",W$="_navFooterOuter_13v73_20",q$="_navFooter_13v73_20",U0={formWrapper:V$,newEvaluationTitle:G$,buttons:H$,navFooterOuter:W$,navFooter:q$},H2=i=>{if(!i)return"NA";if(i.length==4)return i;if(i.length==6){const e=i.slice(0,4),t=i.slice(4,6);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(t)-1]} ${e}`}if(i.length==5){const e=i.slice(0,4);return`Week ${i.slice(5,6)} ${e}`}},Y$="_datasetDetailsWrapper_dewdk_1",Z$="_datasetDetailsRow_dewdk_7",X$="_label_dewdk_13",ou={datasetDetailsWrapper:Y$,datasetDetailsRow:Z$,label:X$},K$=({datasetId:i})=>{var p;const[e,t]=Ue.useState(null),[r,s]=Ue.useState(""),[l,u]=Ue.useState(!0);Ue.useState([]);const n=m=>{const g=m.observations.map(S=>S.period),v=Array.from(new Set(g)).sort(),y=v[0],C=v[v.length-1],w=Array.from(new Set(g)).length,k=Array.from(new Set(m.observations.map(S=>S.featureName).filter(S=>S!=="disease_cases")));return{name:m.name,created:m.created,startPeriod:y,endPeriod:C,orgUnitCount:w,covariates:k}};return Ue.useEffect(()=>{if(console.log("datasetid",i),!i)return;(async()=>{try{console.log("fetching dataset",i);const g=await io.getDatasetCrudDatasetsDatasetIdGet(i);console.log("dataset loaded",g);const v=n(g);t(v)}catch(g){s(g)}finally{u(!1)}})()},[i]),l?he.jsxs("div",{className:ou.datasetLoader,children:[he.jsx(qo,{}),he.jsx("span",{children:"Loading dataset"})]}):r?he.jsxs("p",{children:["Error: ",r]}):he.jsxs(he.Fragment,{children:[he.jsx("h3",{children:"Evaluation Dataset"}),he.jsx(Cy,{children:he.jsxs("div",{className:ou.datasetDetailsWrapper,children:[he.jsxs("div",{children:[he.jsx("span",{className:ou.label,children:"Name: "}),he.jsx("span",{children:e.name})]}),he.jsxs("div",{children:[he.jsx("span",{className:ou.label,children:"Org Units: "}),he.jsx("span",{children:e.orgUnitCount})]}),he.jsxs("div",{children:[he.jsx("span",{className:ou.label,children:"Time period: "}),he.jsxs("span",{children:[H2(e.startPeriod)," to ",H2(e.endPeriod)]})]}),he.jsxs("div",{children:[he.jsx("span",{className:ou.label,children:"Covariates: "}),he.jsx("span",{children:((p=e==null?void 0:e.covariates)==null?void 0:p.join(", "))||"None"})]}),he.jsxs("div",{children:[he.jsx("span",{className:ou.label,children:"Created: "}),he.jsx("span",{children:e.created})]})]})})]})},Q$="_modelDetailsContainer_mnj31_1",J$="_loadingText_mnj31_5",eU="_selectedModelDetails_mnj31_10",tU="_modelAuthor_mnj31_17",iU="_modelAuthorLogo_mnj31_25",nU="_modelAuthorName_mnj31_32",rU="_modelHumanName_mnj31_36",sU="_modelEmail_mnj31_42",aU="_modelDescription_mnj31_47",oU="_modelDescriptionText_mnj31_52",lU="_modelCovariates_mnj31_57",cU="_modelCovariatesList_mnj31_62",uU="_modelCovariateItem_mnj31_71",dU="_modelCitation_mnj31_75",hU="_modelCitationText_mnj31_80",pU="_modelLink_mnj31_86",sa={modelDetailsContainer:Q$,loadingText:J$,selectedModelDetails:eU,modelAuthor:tU,modelAuthorLogo:iU,modelAuthorName:nU,modelHumanName:rU,modelEmail:sU,modelDescription:aU,modelDescriptionText:oU,modelCovariates:lU,modelCovariatesList:cU,modelCovariateItem:uU,modelCitation:dU,modelCitationText:hU,modelLink:pU},fU=({selectedModel:i,onChangeModel:e})=>he.jsx("div",{className:sa.modelDetailsContainer,children:he.jsxs("div",{className:sa.selectedModelDetails,children:[he.jsx("h3",{className:sa.modelHumanName,children:i.displayName}),he.jsxs("div",{className:sa.modelAuthor,children:[he.jsx("img",{src:i.organizationLogoUrl||"/default-model-logo.png",alt:i.name+" logo",className:sa.modelAuthorLogo}),he.jsxs("span",{className:sa.modelAuthorName,children:[i.author," - ",i.organization]})]}),he.jsxs("p",{className:sa.modelDescription,children:[he.jsx("div",{children:"Description:"}),he.jsx("div",{className:sa.modelDescriptionText,children:i.description||"Coming soon..."})]}),he.jsxs("div",{className:sa.modelCovariates,children:[he.jsx("span",{children:"Model inputs:"}),he.jsx("ul",{className:sa.modelCovariatesList,children:i.covariates.map((t,r)=>he.jsxs("li",{className:sa.modelCovariateItem,children:["✔ ",t.name]},r))})]}),he.jsxs("div",{className:sa.modelCitation,children:[he.jsx("span",{children:"Attribution:"}),he.jsx("pre",{className:sa.modelCitationText,children:i.citationInfo||"Coming soon..."})]}),he.jsxs("p",{className:sa.modelLink,children:["External link: ",he.jsx("a",{href:i.sourceUrl||"",target:"_blank",children:i.sourceUrl||"http://example.com"})]}),he.jsxs("p",{className:sa.modelEmail,children:["Contact email: ",i.contactEmail||"Coming soon..."]}),e&&he.jsx("div",{children:he.jsx(Gn,{onClick:e,primary:!0,children:"Change Model"})})]},i.name)}),mU="_modelSelectContainer_1u7s7_1",gU="_loadingText_1u7s7_5",yU="_modelGrid_1u7s7_10",xU="_modelCard_1u7s7_17",vU="_selectedModelCard_1u7s7_31",bU="_selectedModelDetails_1u7s7_35",_U="_modelAuthor_1u7s7_42",wU="_modelAuthorLogo_1u7s7_50",CU="_modelAuthorName_1u7s7_57",TU="_modelHumanName_1u7s7_61",SU="_modelEmail_1u7s7_67",EU="_modelDescription_1u7s7_72",kU="_modelDescriptionText_1u7s7_77",AU="_modelCovariates_1u7s7_82",MU="_modelCovariatesList_1u7s7_87",PU="_modelCovariateItem_1u7s7_96",IU="_modelCitation_1u7s7_100",DU="_modelCitationText_1u7s7_105",RU="_modelLink_1u7s7_111",Io={modelSelectContainer:mU,loadingText:gU,modelGrid:yU,modelCard:xU,selectedModelCard:vU,selectedModelDetails:bU,modelAuthor:_U,modelAuthorLogo:wU,modelAuthorName:CU,modelHumanName:TU,modelEmail:SU,modelDescription:EU,modelDescriptionText:kU,modelCovariates:AU,modelCovariatesList:MU,modelCovariateItem:PU,modelCitation:IU,modelCitationText:DU,modelLink:RU},W2={name:"Download data (CHAP is offline)",id:0,description:"Download data from the CHAP API",displayName:"",covariates:[],target:{name:"target",description:"target",displayName:""}},E3=({selectedModel:i,setSelectedModel:e})=>{const[t,r]=Ue.useState([]),[s,l]=Ue.useState(!0),[u,n]=Ue.useState(!0),p=async()=>{await io.listModelsCrudModelsGet().then(g=>{let v=g.map(y=>(y.covariates=y.covariates.concat(y.target),y));l(!1),r(v)}).catch(g=>{r([W2]),e(W2),l(!1)})},m=g=>{e(g),n(!1)};return Ue.useEffect(()=>{p()},[]),he.jsx("div",{className:Io.modelSelectContainer,children:s?he.jsx("p",{children:"Loading models..."}):he.jsxs(he.Fragment,{children:[he.jsx("h3",{children:"Prediction Model"}),!u&&i&&he.jsx("div",{children:he.jsx(fU,{selectedModel:i,onChangeModel:()=>n(!0)})}),u&&he.jsx("div",{children:he.jsx("div",{className:Io.modelGrid,children:t.map(g=>he.jsxs("div",{className:`${Io.modelCard} ${(i==null?void 0:i.name)===g.name?Io.selectedModelCard:""}`,children:[he.jsx("h3",{className:Io.modelHumanName,children:g.displayName}),he.jsxs("div",{className:Io.modelAuthor,children:[he.jsx("img",{src:g.organizationLogoUrl||"/default-model-logo.png",alt:g.name+" logo",className:Io.modelAuthorLogo}),he.jsxs("span",{className:Io.modelAuthorName,children:[g.author," - ",g.organization]})]}),he.jsx("ul",{className:Io.modelCovariatesList,children:g.covariates.map((v,y)=>he.jsxs("li",{className:Io.modelCovariateItem,children:["✔ ",v.name]},y))}),he.jsx(Gn,{onClick:()=>m(g),primary:!0,children:(i==null?void 0:i.name)===g.name?"Selected":"Select Model"})]},g.name))})})]})})},LU=({onDrawerClose:i,datasetIdToEvaluate:e})=>{const[t,r]=Ue.useState(""),[s,l]=Ue.useState(void 0),u=t&&e&&s,n=()=>{if(console.log("should evaluate",t,e,s),u)try{const p=eh.createBacktestAnalyticsCreateBacktestPost({nPeriods:3,nSplits:10,stride:1,name:t,datasetId:e,modelId:s.name});console.log("evaluate response",p)}catch{alert("There was an unknown error creating the evaluation")}finally{i()}};return he.jsx(he.Fragment,{children:he.jsxs("div",{className:U0.formWrapper,children:[he.jsxs("div",{className:U0.newEvaluationTitle,children:[he.jsx("h2",{children:"New model evaluation"}),he.jsx(Gn,{icon:he.jsx(Kv,{}),onClick:i})]}),he.jsx(bf,{autoComplete:"",label:"Evaluation name",value:t,onChange:p=>r(p.value),helpText:"Name your evaluation",placeholder:"Example: EWARS evaluation, 2020-2024"}),he.jsx(K$,{datasetId:e}),he.jsx(E3,{selectedModel:s,setSelectedModel:l}),he.jsx("div",{className:U0.buttons,children:he.jsx(Gn,{primary:!0,icon:he.jsx(ky,{}),onClick:n,disabled:!u,children:"Evaluate"})})]})})},zU=({isOpen:i,setIsOpen:e,datasetIdToEvaluate:t})=>{const r=window.innerWidth<900?"100vw":"1000px";return he.jsx("div",{children:he.jsx(f1,{open:i,onClose:()=>e(!1),direction:"right",size:r,children:he.jsx("div",{className:U$.drawerWrapper,children:he.jsx(LU,{onDrawerClose:()=>e(!1),datasetIdToEvaluate:t})})})})},NU=({evaluationId:i})=>{const[e,t]=Ue.useState(""),[r,s]=Ue.useState([]),[l,u]=Ue.useState(),[n,p]=Ue.useState(),[m,g]=Ue.useState(""),[v,y]=Ue.useState(""),[C,_]=Ue.useState(!1),{orgUnits:w,error:k,loading:S}=T3();Ue.useEffect(()=>{if(w&&n){const T=Nj(n.predictions,n.actualCases.data,"");T.forEach(I=>{I.evaluation.forEach(N=>{const q=w==null?void 0:w.organisationUnits.find(Z=>Z.id===N.orgUnitId);q&&(N.orgUnitName=q.displayName)})}),u(T),s(jj(n.predictions))}},[w,n]);const x=async T=>(await io.getBacktestsCrudBacktestsGet()).find(N=>N.id===Number(T)),P=async T=>(await io.listModelsCrudModelsGet()).find(N=>N.name===T),D=async()=>{_(!0);const T=[.1,.25,.5,.75,.9];try{const[I,N,q]=await Promise.all([x(i),eh.getEvaluationEntriesAnalyticsEvaluationEntryGet(i,T),eh.getActualCasesAnalyticsActualCasesBacktestIdGet(i)]);if(!I)throw new Error("Evaluation info not found");g(I.name??"");const Z=await P(I.modelId);y((Z==null?void 0:Z.displayName)??""),p({predictions:N,actualCases:q})}catch(I){t(I.toString())}finally{_(!1)}};return Ue.useEffect(()=>{D()},[]),he.jsxs("div",{children:[e&&he.jsx("p",{children:"Not available"}),C&&he.jsx("p",{children:"Loading.."}),l&&he.jsx(kF,{evaluationName:m,modelName:v,evaluations:l,splitPeriods:r})]})},OU=({jobResults:i})=>{const[e,t]=Ue.useState(!1),[r,s]=Ue.useState(void 0),[l,u]=Ue.useState(!1),[n,p]=Ue.useState(!1),[m,g]=Ue.useState(void 0),[v,y]=Ue.useState(void 0),[C,_]=Ue.useState(!1),[w,k]=Ue.useState(void 0),S=I=>{t(!0),s(I)},x=I=>{p(!0),g(I)},P=I=>{_(!0),k(I)},D=I=>{if(confirm("Are you sure you want to permanently remove this item? Any data entries that depend on this item will also be deleted.")==!0){console.log("Should remove item");let q=I.result;if(q)I.type=="dataset"?io.deleteDatasetCrudDatasetsDatasetIdDelete(parseInt(q)):I.type=="evaluation"?io.deleteBacktestCrudBacktestsBacktestIdDelete(parseInt(q)):I.type=="prediction"&&io.deletePredictionCrudPredictionsPredictionIdDelete(parseInt(q));else{let Z=I.id;n1.deleteJobJobsJobIdDelete(Z)}}},T=I=>{console.log("clicked evaluate dataset id",I),y(I),u(!0)};return he.jsxs(he.Fragment,{children:[i.map((I,N)=>he.jsx(O$,{i:N,jobResult:I,onClickEvaluateDataset:T,onClickViewEvaluation:x,onClickImport:S,onClickRemove:D,onClickViewLogs:P},N)),e&&he.jsx(C$,{setIsImportModalOpen:t,isImportModalOpen:e,predictionIdToImport:r}),he.jsx(zU,{isOpen:l,setIsOpen:u,datasetIdToEvaluate:v}),n&&m&&he.jsx(Cu,{className:ic.evaluationModal,onClose:()=>{p(!1)},children:he.jsx(NU,{evaluationId:m})}),C&&he.jsx(Cu,{className:ic.jobLogsModal,onClose:()=>{_(!1)},children:he.jsx(B$,{jobId:w})})]})},jU=()=>he.jsx("div",{children:he.jsxs("div",{className:[ic.jobResultPanelContainer,ic.resultTextHeader].join(" "),children:[he.jsx("div",{className:ic.flexMedium,children:"Name:"}),he.jsx("div",{className:ic.flexMedium,children:"Created:"}),he.jsx("div",{className:ic.flexMedium,children:"Status:"}),he.jsx("div",{className:ic.flexItemRight})]})}),FU="_noticeBox_18bg1_1",BU="_details_18bg1_8",$U="_button_18bg1_14",V0={noticeBox:FU,details:BU,button:$U},q2=({error:i,type:e})=>{const[t,r]=Ue.useState(!1);return i==null?he.jsx(he.Fragment,{}):he.jsx("div",{children:he.jsxs(Bo,{error:!0,title:`Unable to retrieve ${e}. Please try again later.`,className:V0.noticeBox,children:[he.jsx("div",{className:V0.button,children:he.jsx(Gn,{small:!0,onClick:()=>r(!t),children:t?"Hide details":"See details"})}),t&&he.jsx("div",{className:V0.details,children:he.jsx("div",{children:i})})]})})},UU="_loaderWrapper_iu471_1",VU="_textLoad_iu471_8",GU="_loader_iu471_1",G0={loaderWrapper:UU,textLoad:VU,loader:GU},HU=({type:i})=>he.jsxs(he.Fragment,{children:[he.jsx("div",{className:G0.loaderWrapper,children:he.jsx("div",{className:G0.loader,children:he.jsx(qo,{})})}),he.jsx("p",{className:G0.textLoad,children:he.jsxs("i",{children:["Loading ",i]})})]}),WU="_text_3x5i9_1",qU={text:WU},YU=({type:i})=>he.jsxs("div",{className:qU.text,children:["No ",i," found"]}),Nv=({type:i})=>{const[e,t]=Ue.useState([]),[r,s]=Ue.useState([]),[l,u]=Ue.useState([]),[n,p]=Ue.useState([]),[m,g]=Ue.useState([]),[v,y]=Ue.useState(),[C,_]=Ue.useState(),[w,k]=Ue.useState(!0),S=async I=>{for(let N=0;N<5;N++)try{const q=await I;return _(void 0),q}catch(q){if(N===4)return _((q==null?void 0:q.message)??`Couldn't fetch ${i}`),[]}},x=()=>{switch(i){case"predictions":return S(io.getPredictionsCrudPredictionsGet()).then(I=>s(I));case"datasets":return S(io.getDatasetsCrudDatasetsGet()).then(I=>u(I));case"evaluations":return S(io.getBacktestsCrudBacktestsGet()).then(I=>p(I))}},P=async()=>{let I=[];for(let N=0;N<6;N++)try{I=await n1.listJobsJobsGet();break}catch(q){if(N===2)return y((q==null?void 0:q.message)??"Couldn't fetch jobs"),[]}return y(void 0),I},D=()=>{const I=[];l.filter(Z=>Z.type=="evaluation").forEach(Z=>{I.push({id:"Unknown",name:Z.name,created:new Date(Z.created??""),type:"dataset",status:"SUCCESS",result:Z.id.toString()})}),n.forEach(Z=>{I.push({id:"Unknown",name:Z.name??"",created:new Date(Z.created??""),type:"evaluation",status:"SUCCESS",result:Z.id.toString()})}),r.forEach(Z=>{I.push({id:"Unknown",name:Z.name,created:new Date(Z.created),type:"prediction",status:"SUCCESS",result:Z.id.toString(),datasetId:Z.datasetId,estimatorId:Z.modelId,nPeriods:Z.nPeriods})});const N={predictions:"create_prediction",datasets:"create_dataset",evaluations:"create_backtest"},q={predictions:"prediction",datasets:"dataset",evaluations:"evaluation"};return e.filter(Z=>Z.status!="SUCCESS"&&Z.type==N[i]).forEach(Z=>{I.push({id:Z.id,name:Z.name,created:new Date(Z.start_time),type:q[i],status:Z.status})}),I.sort((Z,X)=>X.created.getTime()-Z.created.getTime()),I},T=async()=>{await x();const I=await P();t(I),k(!1)};return Ue.useEffect(()=>{T()},[]),S3(T,5e3),Ue.useEffect(()=>{g(D())},[e,r,n,l]),he.jsxs("div",{children:[he.jsx(q2,{error:v,type:"jobs"}),he.jsx(q2,{error:C,type:i}),w&&he.jsx(HU,{type:i}),m.length>0&&he.jsx(jU,{}),m.length==0&&!w&&he.jsx(YU,{type:i}),he.jsx(OU,{jobResults:m})]})},ZU=()=>{const[i,e]=Ue.useState(!1),t=()=>{e(!1)};return he.jsxs("div",{children:[he.jsx(ly,{pageTitle:"Evaluation Datasets",pageDescription:"Historical data used to evaluate the accuracy of predictive models, combining DHIS2 and climate data sources.",setDrawerOpenText:"New Dataset",setDrawerOpen:e}),he.jsx(Nv,{type:"datasets"}),he.jsx(j7,{isOpen:i,onDrawerClose:()=>e(!1),onDrawerSubmit:t}),he.jsx(ly,{pageTitle:"Model Evaluations",pageDescription:"Evaluates the accuracy of a predictive model using historical data. Compares actual outcomes with predicted values to assess model performance."}),he.jsx(Nv,{type:"evaluations"})]})},XU=()=>he.jsx(ZU,{});/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function KU(){return{accessor:(i,e)=>typeof i=="function"?{...e,accessorFn:i}:{...e,accessorKey:i},display:i=>i,group:i=>i}}function dc(i,e){return typeof i=="function"?i(e):i}function Wa(i,e){return t=>{e.setState(r=>({...r,[i]:dc(t,r[i])}))}}function ix(i){return i instanceof Function}function QU(i){return Array.isArray(i)&&i.every(e=>typeof e=="number")}function JU(i,e){const t=[],r=s=>{s.forEach(l=>{t.push(l);const u=e(l);u!=null&&u.length&&r(u)})};return r(i),t}function rn(i,e,t){let r=[],s;return l=>{let u;t.key&&t.debug&&(u=Date.now());const n=i(l);if(!(n.length!==r.length||n.some((g,v)=>r[v]!==g)))return s;r=n;let m;if(t.key&&t.debug&&(m=Date.now()),s=e(...n),t==null||t.onChange==null||t.onChange(s),t.key&&t.debug&&t!=null&&t.debug()){const g=Math.round((Date.now()-u)*100)/100,v=Math.round((Date.now()-m)*100)/100,y=v/16,C=(_,w)=>{for(_=String(_);_.length<w;)_=" "+_;return _};console.info(`%c⏱ ${C(v,5)} /${C(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*y,120))}deg 100% 31%);`,t==null?void 0:t.key)}return s}}function sn(i,e,t,r){return{debug:()=>{var s;return(s=i==null?void 0:i.debugAll)!=null?s:i[e]},key:!1,onChange:r}}function eV(i,e,t,r){const s=()=>{var u;return(u=l.getValue())!=null?u:i.options.renderFallbackValue},l={id:`${e.id}_${t.id}`,row:e,column:t,getValue:()=>e.getValue(r),renderValue:s,getContext:rn(()=>[i,t,e,l],(u,n,p,m)=>({table:u,column:n,row:p,cell:m,getValue:m.getValue,renderValue:m.renderValue}),sn(i.options,"debugCells"))};return i._features.forEach(u=>{u.createCell==null||u.createCell(l,t,e,i)},{}),l}function tV(i,e,t,r){var s,l;const n={...i._getDefaultColumnDef(),...e},p=n.accessorKey;let m=(s=(l=n.id)!=null?l:p?typeof String.prototype.replaceAll=="function"?p.replaceAll(".","_"):p.replace(/\./g,"_"):void 0)!=null?s:typeof n.header=="string"?n.header:void 0,g;if(n.accessorFn?g=n.accessorFn:p&&(p.includes(".")?g=y=>{let C=y;for(const w of p.split(".")){var _;C=(_=C)==null?void 0:_[w]}return C}:g=y=>y[n.accessorKey]),!m)throw new Error;let v={id:`${String(m)}`,accessorFn:g,parent:r,depth:t,columnDef:n,columns:[],getFlatColumns:rn(()=>[!0],()=>{var y;return[v,...(y=v.columns)==null?void 0:y.flatMap(C=>C.getFlatColumns())]},sn(i.options,"debugColumns")),getLeafColumns:rn(()=>[i._getOrderColumnsFn()],y=>{var C;if((C=v.columns)!=null&&C.length){let _=v.columns.flatMap(w=>w.getLeafColumns());return y(_)}return[v]},sn(i.options,"debugColumns"))};for(const y of i._features)y.createColumn==null||y.createColumn(v,i);return v}const Hs="debugHeaders";function Y2(i,e,t){var r;let l={id:(r=t.id)!=null?r:e.id,column:e,index:t.index,isPlaceholder:!!t.isPlaceholder,placeholderId:t.placeholderId,depth:t.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const u=[],n=p=>{p.subHeaders&&p.subHeaders.length&&p.subHeaders.map(n),u.push(p)};return n(l),u},getContext:()=>({table:i,header:l,column:e})};return i._features.forEach(u=>{u.createHeader==null||u.createHeader(l,i)}),l}const iV={createTable:i=>{i.getHeaderGroups=rn(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.left,i.getState().columnPinning.right],(e,t,r,s)=>{var l,u;const n=(l=r==null?void 0:r.map(v=>t.find(y=>y.id===v)).filter(Boolean))!=null?l:[],p=(u=s==null?void 0:s.map(v=>t.find(y=>y.id===v)).filter(Boolean))!=null?u:[],m=t.filter(v=>!(r!=null&&r.includes(v.id))&&!(s!=null&&s.includes(v.id)));return dg(e,[...n,...m,...p],i)},sn(i.options,Hs)),i.getCenterHeaderGroups=rn(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.left,i.getState().columnPinning.right],(e,t,r,s)=>(t=t.filter(l=>!(r!=null&&r.includes(l.id))&&!(s!=null&&s.includes(l.id))),dg(e,t,i,"center")),sn(i.options,Hs)),i.getLeftHeaderGroups=rn(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.left],(e,t,r)=>{var s;const l=(s=r==null?void 0:r.map(u=>t.find(n=>n.id===u)).filter(Boolean))!=null?s:[];return dg(e,l,i,"left")},sn(i.options,Hs)),i.getRightHeaderGroups=rn(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.right],(e,t,r)=>{var s;const l=(s=r==null?void 0:r.map(u=>t.find(n=>n.id===u)).filter(Boolean))!=null?s:[];return dg(e,l,i,"right")},sn(i.options,Hs)),i.getFooterGroups=rn(()=>[i.getHeaderGroups()],e=>[...e].reverse(),sn(i.options,Hs)),i.getLeftFooterGroups=rn(()=>[i.getLeftHeaderGroups()],e=>[...e].reverse(),sn(i.options,Hs)),i.getCenterFooterGroups=rn(()=>[i.getCenterHeaderGroups()],e=>[...e].reverse(),sn(i.options,Hs)),i.getRightFooterGroups=rn(()=>[i.getRightHeaderGroups()],e=>[...e].reverse(),sn(i.options,Hs)),i.getFlatHeaders=rn(()=>[i.getHeaderGroups()],e=>e.map(t=>t.headers).flat(),sn(i.options,Hs)),i.getLeftFlatHeaders=rn(()=>[i.getLeftHeaderGroups()],e=>e.map(t=>t.headers).flat(),sn(i.options,Hs)),i.getCenterFlatHeaders=rn(()=>[i.getCenterHeaderGroups()],e=>e.map(t=>t.headers).flat(),sn(i.options,Hs)),i.getRightFlatHeaders=rn(()=>[i.getRightHeaderGroups()],e=>e.map(t=>t.headers).flat(),sn(i.options,Hs)),i.getCenterLeafHeaders=rn(()=>[i.getCenterFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),sn(i.options,Hs)),i.getLeftLeafHeaders=rn(()=>[i.getLeftFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),sn(i.options,Hs)),i.getRightLeafHeaders=rn(()=>[i.getRightFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),sn(i.options,Hs)),i.getLeafHeaders=rn(()=>[i.getLeftHeaderGroups(),i.getCenterHeaderGroups(),i.getRightHeaderGroups()],(e,t,r)=>{var s,l,u,n,p,m;return[...(s=(l=e[0])==null?void 0:l.headers)!=null?s:[],...(u=(n=t[0])==null?void 0:n.headers)!=null?u:[],...(p=(m=r[0])==null?void 0:m.headers)!=null?p:[]].map(g=>g.getLeafHeaders()).flat()},sn(i.options,Hs))}};function dg(i,e,t,r){var s,l;let u=0;const n=function(y,C){C===void 0&&(C=1),u=Math.max(u,C),y.filter(_=>_.getIsVisible()).forEach(_=>{var w;(w=_.columns)!=null&&w.length&&n(_.columns,C+1)},0)};n(i);let p=[];const m=(y,C)=>{const _={depth:C,id:[r,`${C}`].filter(Boolean).join("_"),headers:[]},w=[];y.forEach(k=>{const S=[...w].reverse()[0],x=k.column.depth===_.depth;let P,D=!1;if(x&&k.column.parent?P=k.column.parent:(P=k.column,D=!0),S&&(S==null?void 0:S.column)===P)S.subHeaders.push(k);else{const T=Y2(t,P,{id:[r,C,P.id,k==null?void 0:k.id].filter(Boolean).join("_"),isPlaceholder:D,placeholderId:D?`${w.filter(I=>I.column===P).length}`:void 0,depth:C,index:w.length});T.subHeaders.push(k),w.push(T)}_.headers.push(k),k.headerGroup=_}),p.push(_),C>0&&m(w,C-1)},g=e.map((y,C)=>Y2(t,y,{depth:u,index:C}));m(g,u-1),p.reverse();const v=y=>y.filter(_=>_.column.getIsVisible()).map(_=>{let w=0,k=0,S=[0];_.subHeaders&&_.subHeaders.length?(S=[],v(_.subHeaders).forEach(P=>{let{colSpan:D,rowSpan:T}=P;w+=D,S.push(T)})):w=1;const x=Math.min(...S);return k=k+x,_.colSpan=w,_.rowSpan=k,{colSpan:w,rowSpan:k}});return v((s=(l=p[0])==null?void 0:l.headers)!=null?s:[]),p}const nV=(i,e,t,r,s,l,u)=>{let n={id:e,index:r,original:t,depth:s,parentId:u,_valuesCache:{},_uniqueValuesCache:{},getValue:p=>{if(n._valuesCache.hasOwnProperty(p))return n._valuesCache[p];const m=i.getColumn(p);if(m!=null&&m.accessorFn)return n._valuesCache[p]=m.accessorFn(n.original,r),n._valuesCache[p]},getUniqueValues:p=>{if(n._uniqueValuesCache.hasOwnProperty(p))return n._uniqueValuesCache[p];const m=i.getColumn(p);if(m!=null&&m.accessorFn)return m.columnDef.getUniqueValues?(n._uniqueValuesCache[p]=m.columnDef.getUniqueValues(n.original,r),n._uniqueValuesCache[p]):(n._uniqueValuesCache[p]=[n.getValue(p)],n._uniqueValuesCache[p])},renderValue:p=>{var m;return(m=n.getValue(p))!=null?m:i.options.renderFallbackValue},subRows:[],getLeafRows:()=>JU(n.subRows,p=>p.subRows),getParentRow:()=>n.parentId?i.getRow(n.parentId,!0):void 0,getParentRows:()=>{let p=[],m=n;for(;;){const g=m.getParentRow();if(!g)break;p.push(g),m=g}return p.reverse()},getAllCells:rn(()=>[i.getAllLeafColumns()],p=>p.map(m=>eV(i,n,m,m.id)),sn(i.options,"debugRows")),_getAllCellsByColumnId:rn(()=>[n.getAllCells()],p=>p.reduce((m,g)=>(m[g.column.id]=g,m),{}),sn(i.options,"debugRows"))};for(let p=0;p<i._features.length;p++){const m=i._features[p];m==null||m.createRow==null||m.createRow(n,i)}return n},rV={createColumn:(i,e)=>{i._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,i.id),i.getFacetedRowModel=()=>i._getFacetedRowModel?i._getFacetedRowModel():e.getPreFilteredRowModel(),i._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,i.id),i.getFacetedUniqueValues=()=>i._getFacetedUniqueValues?i._getFacetedUniqueValues():new Map,i._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,i.id),i.getFacetedMinMaxValues=()=>{if(i._getFacetedMinMaxValues)return i._getFacetedMinMaxValues()}}},k3=(i,e,t)=>{var r,s;const l=t==null||(r=t.toString())==null?void 0:r.toLowerCase();return!!(!((s=i.getValue(e))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(l))};k3.autoRemove=i=>mo(i);const A3=(i,e,t)=>{var r;return!!(!((r=i.getValue(e))==null||(r=r.toString())==null)&&r.includes(t))};A3.autoRemove=i=>mo(i);const M3=(i,e,t)=>{var r;return((r=i.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(t==null?void 0:t.toLowerCase())};M3.autoRemove=i=>mo(i);const P3=(i,e,t)=>{var r;return(r=i.getValue(e))==null?void 0:r.includes(t)};P3.autoRemove=i=>mo(i);const I3=(i,e,t)=>!t.some(r=>{var s;return!((s=i.getValue(e))!=null&&s.includes(r))});I3.autoRemove=i=>mo(i)||!(i!=null&&i.length);const D3=(i,e,t)=>t.some(r=>{var s;return(s=i.getValue(e))==null?void 0:s.includes(r)});D3.autoRemove=i=>mo(i)||!(i!=null&&i.length);const R3=(i,e,t)=>i.getValue(e)===t;R3.autoRemove=i=>mo(i);const L3=(i,e,t)=>i.getValue(e)==t;L3.autoRemove=i=>mo(i);const m1=(i,e,t)=>{let[r,s]=t;const l=i.getValue(e);return l>=r&&l<=s};m1.resolveFilterValue=i=>{let[e,t]=i,r=typeof e!="number"?parseFloat(e):e,s=typeof t!="number"?parseFloat(t):t,l=e===null||Number.isNaN(r)?-1/0:r,u=t===null||Number.isNaN(s)?1/0:s;if(l>u){const n=l;l=u,u=n}return[l,u]};m1.autoRemove=i=>mo(i)||mo(i[0])&&mo(i[1]);const bl={includesString:k3,includesStringSensitive:A3,equalsString:M3,arrIncludes:P3,arrIncludesAll:I3,arrIncludesSome:D3,equals:R3,weakEquals:L3,inNumberRange:m1};function mo(i){return i==null||i===""}const sV={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:i=>({columnFilters:[],...i}),getDefaultOptions:i=>({onColumnFiltersChange:Wa("columnFilters",i),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(i,e)=>{i.getAutoFilterFn=()=>{const t=e.getCoreRowModel().flatRows[0],r=t==null?void 0:t.getValue(i.id);return typeof r=="string"?bl.includesString:typeof r=="number"?bl.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?bl.equals:Array.isArray(r)?bl.arrIncludes:bl.weakEquals},i.getFilterFn=()=>{var t,r;return ix(i.columnDef.filterFn)?i.columnDef.filterFn:i.columnDef.filterFn==="auto"?i.getAutoFilterFn():(t=(r=e.options.filterFns)==null?void 0:r[i.columnDef.filterFn])!=null?t:bl[i.columnDef.filterFn]},i.getCanFilter=()=>{var t,r,s;return((t=i.columnDef.enableColumnFilter)!=null?t:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&!!i.accessorFn},i.getIsFiltered=()=>i.getFilterIndex()>-1,i.getFilterValue=()=>{var t;return(t=e.getState().columnFilters)==null||(t=t.find(r=>r.id===i.id))==null?void 0:t.value},i.getFilterIndex=()=>{var t,r;return(t=(r=e.getState().columnFilters)==null?void 0:r.findIndex(s=>s.id===i.id))!=null?t:-1},i.setFilterValue=t=>{e.setColumnFilters(r=>{const s=i.getFilterFn(),l=r==null?void 0:r.find(g=>g.id===i.id),u=dc(t,l?l.value:void 0);if(Z2(s,u,i)){var n;return(n=r==null?void 0:r.filter(g=>g.id!==i.id))!=null?n:[]}const p={id:i.id,value:u};if(l){var m;return(m=r==null?void 0:r.map(g=>g.id===i.id?p:g))!=null?m:[]}return r!=null&&r.length?[...r,p]:[p]})}},createRow:(i,e)=>{i.columnFilters={},i.columnFiltersMeta={}},createTable:i=>{i.setColumnFilters=e=>{const t=i.getAllLeafColumns(),r=s=>{var l;return(l=dc(e,s))==null?void 0:l.filter(u=>{const n=t.find(p=>p.id===u.id);if(n){const p=n.getFilterFn();if(Z2(p,u.value,n))return!1}return!0})};i.options.onColumnFiltersChange==null||i.options.onColumnFiltersChange(r)},i.resetColumnFilters=e=>{var t,r;i.setColumnFilters(e?[]:(t=(r=i.initialState)==null?void 0:r.columnFilters)!=null?t:[])},i.getPreFilteredRowModel=()=>i.getCoreRowModel(),i.getFilteredRowModel=()=>(!i._getFilteredRowModel&&i.options.getFilteredRowModel&&(i._getFilteredRowModel=i.options.getFilteredRowModel(i)),i.options.manualFiltering||!i._getFilteredRowModel?i.getPreFilteredRowModel():i._getFilteredRowModel())}};function Z2(i,e,t){return(i&&i.autoRemove?i.autoRemove(e,t):!1)||typeof e>"u"||typeof e=="string"&&!e}const aV=(i,e,t)=>t.reduce((r,s)=>{const l=s.getValue(i);return r+(typeof l=="number"?l:0)},0),oV=(i,e,t)=>{let r;return t.forEach(s=>{const l=s.getValue(i);l!=null&&(r>l||r===void 0&&l>=l)&&(r=l)}),r},lV=(i,e,t)=>{let r;return t.forEach(s=>{const l=s.getValue(i);l!=null&&(r<l||r===void 0&&l>=l)&&(r=l)}),r},cV=(i,e,t)=>{let r,s;return t.forEach(l=>{const u=l.getValue(i);u!=null&&(r===void 0?u>=u&&(r=s=u):(r>u&&(r=u),s<u&&(s=u)))}),[r,s]},uV=(i,e)=>{let t=0,r=0;if(e.forEach(s=>{let l=s.getValue(i);l!=null&&(l=+l)>=l&&(++t,r+=l)}),t)return r/t},dV=(i,e)=>{if(!e.length)return;const t=e.map(l=>l.getValue(i));if(!QU(t))return;if(t.length===1)return t[0];const r=Math.floor(t.length/2),s=t.sort((l,u)=>l-u);return t.length%2!==0?s[r]:(s[r-1]+s[r])/2},hV=(i,e)=>Array.from(new Set(e.map(t=>t.getValue(i))).values()),pV=(i,e)=>new Set(e.map(t=>t.getValue(i))).size,fV=(i,e)=>e.length,H0={sum:aV,min:oV,max:lV,extent:cV,mean:uV,median:dV,unique:hV,uniqueCount:pV,count:fV},mV={getDefaultColumnDef:()=>({aggregatedCell:i=>{var e,t;return(e=(t=i.getValue())==null||t.toString==null?void 0:t.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:i=>({grouping:[],...i}),getDefaultOptions:i=>({onGroupingChange:Wa("grouping",i),groupedColumnMode:"reorder"}),createColumn:(i,e)=>{i.toggleGrouping=()=>{e.setGrouping(t=>t!=null&&t.includes(i.id)?t.filter(r=>r!==i.id):[...t??[],i.id])},i.getCanGroup=()=>{var t,r;return((t=i.columnDef.enableGrouping)!=null?t:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!i.accessorFn||!!i.columnDef.getGroupingValue)},i.getIsGrouped=()=>{var t;return(t=e.getState().grouping)==null?void 0:t.includes(i.id)},i.getGroupedIndex=()=>{var t;return(t=e.getState().grouping)==null?void 0:t.indexOf(i.id)},i.getToggleGroupingHandler=()=>{const t=i.getCanGroup();return()=>{t&&i.toggleGrouping()}},i.getAutoAggregationFn=()=>{const t=e.getCoreRowModel().flatRows[0],r=t==null?void 0:t.getValue(i.id);if(typeof r=="number")return H0.sum;if(Object.prototype.toString.call(r)==="[object Date]")return H0.extent},i.getAggregationFn=()=>{var t,r;if(!i)throw new Error;return ix(i.columnDef.aggregationFn)?i.columnDef.aggregationFn:i.columnDef.aggregationFn==="auto"?i.getAutoAggregationFn():(t=(r=e.options.aggregationFns)==null?void 0:r[i.columnDef.aggregationFn])!=null?t:H0[i.columnDef.aggregationFn]}},createTable:i=>{i.setGrouping=e=>i.options.onGroupingChange==null?void 0:i.options.onGroupingChange(e),i.resetGrouping=e=>{var t,r;i.setGrouping(e?[]:(t=(r=i.initialState)==null?void 0:r.grouping)!=null?t:[])},i.getPreGroupedRowModel=()=>i.getFilteredRowModel(),i.getGroupedRowModel=()=>(!i._getGroupedRowModel&&i.options.getGroupedRowModel&&(i._getGroupedRowModel=i.options.getGroupedRowModel(i)),i.options.manualGrouping||!i._getGroupedRowModel?i.getPreGroupedRowModel():i._getGroupedRowModel())},createRow:(i,e)=>{i.getIsGrouped=()=>!!i.groupingColumnId,i.getGroupingValue=t=>{if(i._groupingValuesCache.hasOwnProperty(t))return i._groupingValuesCache[t];const r=e.getColumn(t);return r!=null&&r.columnDef.getGroupingValue?(i._groupingValuesCache[t]=r.columnDef.getGroupingValue(i.original),i._groupingValuesCache[t]):i.getValue(t)},i._groupingValuesCache={}},createCell:(i,e,t,r)=>{i.getIsGrouped=()=>e.getIsGrouped()&&e.id===t.groupingColumnId,i.getIsPlaceholder=()=>!i.getIsGrouped()&&e.getIsGrouped(),i.getIsAggregated=()=>{var s;return!i.getIsGrouped()&&!i.getIsPlaceholder()&&!!((s=t.subRows)!=null&&s.length)}}};function gV(i,e,t){if(!(e!=null&&e.length)||!t)return i;const r=i.filter(l=>!e.includes(l.id));return t==="remove"?r:[...e.map(l=>i.find(u=>u.id===l)).filter(Boolean),...r]}const yV={getInitialState:i=>({columnOrder:[],...i}),getDefaultOptions:i=>({onColumnOrderChange:Wa("columnOrder",i)}),createColumn:(i,e)=>{i.getIndex=rn(t=>[$p(e,t)],t=>t.findIndex(r=>r.id===i.id),sn(e.options,"debugColumns")),i.getIsFirstColumn=t=>{var r;return((r=$p(e,t)[0])==null?void 0:r.id)===i.id},i.getIsLastColumn=t=>{var r;const s=$p(e,t);return((r=s[s.length-1])==null?void 0:r.id)===i.id}},createTable:i=>{i.setColumnOrder=e=>i.options.onColumnOrderChange==null?void 0:i.options.onColumnOrderChange(e),i.resetColumnOrder=e=>{var t;i.setColumnOrder(e?[]:(t=i.initialState.columnOrder)!=null?t:[])},i._getOrderColumnsFn=rn(()=>[i.getState().columnOrder,i.getState().grouping,i.options.groupedColumnMode],(e,t,r)=>s=>{let l=[];if(!(e!=null&&e.length))l=s;else{const u=[...e],n=[...s];for(;n.length&&u.length;){const p=u.shift(),m=n.findIndex(g=>g.id===p);m>-1&&l.push(n.splice(m,1)[0])}l=[...l,...n]}return gV(l,t,r)},sn(i.options,"debugTable"))}},W0=()=>({left:[],right:[]}),xV={getInitialState:i=>({columnPinning:W0(),...i}),getDefaultOptions:i=>({onColumnPinningChange:Wa("columnPinning",i)}),createColumn:(i,e)=>{i.pin=t=>{const r=i.getLeafColumns().map(s=>s.id).filter(Boolean);e.setColumnPinning(s=>{var l,u;if(t==="right"){var n,p;return{left:((n=s==null?void 0:s.left)!=null?n:[]).filter(v=>!(r!=null&&r.includes(v))),right:[...((p=s==null?void 0:s.right)!=null?p:[]).filter(v=>!(r!=null&&r.includes(v))),...r]}}if(t==="left"){var m,g;return{left:[...((m=s==null?void 0:s.left)!=null?m:[]).filter(v=>!(r!=null&&r.includes(v))),...r],right:((g=s==null?void 0:s.right)!=null?g:[]).filter(v=>!(r!=null&&r.includes(v)))}}return{left:((l=s==null?void 0:s.left)!=null?l:[]).filter(v=>!(r!=null&&r.includes(v))),right:((u=s==null?void 0:s.right)!=null?u:[]).filter(v=>!(r!=null&&r.includes(v)))}})},i.getCanPin=()=>i.getLeafColumns().some(r=>{var s,l,u;return((s=r.columnDef.enablePinning)!=null?s:!0)&&((l=(u=e.options.enableColumnPinning)!=null?u:e.options.enablePinning)!=null?l:!0)}),i.getIsPinned=()=>{const t=i.getLeafColumns().map(n=>n.id),{left:r,right:s}=e.getState().columnPinning,l=t.some(n=>r==null?void 0:r.includes(n)),u=t.some(n=>s==null?void 0:s.includes(n));return l?"left":u?"right":!1},i.getPinnedIndex=()=>{var t,r;const s=i.getIsPinned();return s?(t=(r=e.getState().columnPinning)==null||(r=r[s])==null?void 0:r.indexOf(i.id))!=null?t:-1:0}},createRow:(i,e)=>{i.getCenterVisibleCells=rn(()=>[i._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,r,s)=>{const l=[...r??[],...s??[]];return t.filter(u=>!l.includes(u.column.id))},sn(e.options,"debugRows")),i.getLeftVisibleCells=rn(()=>[i._getAllVisibleCells(),e.getState().columnPinning.left],(t,r)=>(r??[]).map(l=>t.find(u=>u.column.id===l)).filter(Boolean).map(l=>({...l,position:"left"})),sn(e.options,"debugRows")),i.getRightVisibleCells=rn(()=>[i._getAllVisibleCells(),e.getState().columnPinning.right],(t,r)=>(r??[]).map(l=>t.find(u=>u.column.id===l)).filter(Boolean).map(l=>({...l,position:"right"})),sn(e.options,"debugRows"))},createTable:i=>{i.setColumnPinning=e=>i.options.onColumnPinningChange==null?void 0:i.options.onColumnPinningChange(e),i.resetColumnPinning=e=>{var t,r;return i.setColumnPinning(e?W0():(t=(r=i.initialState)==null?void 0:r.columnPinning)!=null?t:W0())},i.getIsSomeColumnsPinned=e=>{var t;const r=i.getState().columnPinning;if(!e){var s,l;return!!((s=r.left)!=null&&s.length||(l=r.right)!=null&&l.length)}return!!((t=r[e])!=null&&t.length)},i.getLeftLeafColumns=rn(()=>[i.getAllLeafColumns(),i.getState().columnPinning.left],(e,t)=>(t??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),sn(i.options,"debugColumns")),i.getRightLeafColumns=rn(()=>[i.getAllLeafColumns(),i.getState().columnPinning.right],(e,t)=>(t??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),sn(i.options,"debugColumns")),i.getCenterLeafColumns=rn(()=>[i.getAllLeafColumns(),i.getState().columnPinning.left,i.getState().columnPinning.right],(e,t,r)=>{const s=[...t??[],...r??[]];return e.filter(l=>!s.includes(l.id))},sn(i.options,"debugColumns"))}};function vV(i){return i||(typeof document<"u"?document:null)}const hg={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},q0=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),bV={getDefaultColumnDef:()=>hg,getInitialState:i=>({columnSizing:{},columnSizingInfo:q0(),...i}),getDefaultOptions:i=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Wa("columnSizing",i),onColumnSizingInfoChange:Wa("columnSizingInfo",i)}),createColumn:(i,e)=>{i.getSize=()=>{var t,r,s;const l=e.getState().columnSizing[i.id];return Math.min(Math.max((t=i.columnDef.minSize)!=null?t:hg.minSize,(r=l??i.columnDef.size)!=null?r:hg.size),(s=i.columnDef.maxSize)!=null?s:hg.maxSize)},i.getStart=rn(t=>[t,$p(e,t),e.getState().columnSizing],(t,r)=>r.slice(0,i.getIndex(t)).reduce((s,l)=>s+l.getSize(),0),sn(e.options,"debugColumns")),i.getAfter=rn(t=>[t,$p(e,t),e.getState().columnSizing],(t,r)=>r.slice(i.getIndex(t)+1).reduce((s,l)=>s+l.getSize(),0),sn(e.options,"debugColumns")),i.resetSize=()=>{e.setColumnSizing(t=>{let{[i.id]:r,...s}=t;return s})},i.getCanResize=()=>{var t,r;return((t=i.columnDef.enableResizing)!=null?t:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},i.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===i.id},createHeader:(i,e)=>{i.getSize=()=>{let t=0;const r=s=>{if(s.subHeaders.length)s.subHeaders.forEach(r);else{var l;t+=(l=s.column.getSize())!=null?l:0}};return r(i),t},i.getStart=()=>{if(i.index>0){const t=i.headerGroup.headers[i.index-1];return t.getStart()+t.getSize()}return 0},i.getResizeHandler=t=>{const r=e.getColumn(i.column.id),s=r==null?void 0:r.getCanResize();return l=>{if(!r||!s||(l.persist==null||l.persist(),Y0(l)&&l.touches&&l.touches.length>1))return;const u=i.getSize(),n=i?i.getLeafHeaders().map(S=>[S.column.id,S.column.getSize()]):[[r.id,r.getSize()]],p=Y0(l)?Math.round(l.touches[0].clientX):l.clientX,m={},g=(S,x)=>{typeof x=="number"&&(e.setColumnSizingInfo(P=>{var D,T;const I=e.options.columnResizeDirection==="rtl"?-1:1,N=(x-((D=P==null?void 0:P.startOffset)!=null?D:0))*I,q=Math.max(N/((T=P==null?void 0:P.startSize)!=null?T:0),-.999999);return P.columnSizingStart.forEach(Z=>{let[X,O]=Z;m[X]=Math.round(Math.max(O+O*q,0)*100)/100}),{...P,deltaOffset:N,deltaPercentage:q}}),(e.options.columnResizeMode==="onChange"||S==="end")&&e.setColumnSizing(P=>({...P,...m})))},v=S=>g("move",S),y=S=>{g("end",S),e.setColumnSizingInfo(x=>({...x,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},C=vV(t),_={moveHandler:S=>v(S.clientX),upHandler:S=>{C==null||C.removeEventListener("mousemove",_.moveHandler),C==null||C.removeEventListener("mouseup",_.upHandler),y(S.clientX)}},w={moveHandler:S=>(S.cancelable&&(S.preventDefault(),S.stopPropagation()),v(S.touches[0].clientX),!1),upHandler:S=>{var x;C==null||C.removeEventListener("touchmove",w.moveHandler),C==null||C.removeEventListener("touchend",w.upHandler),S.cancelable&&(S.preventDefault(),S.stopPropagation()),y((x=S.touches[0])==null?void 0:x.clientX)}},k=_V()?{passive:!1}:!1;Y0(l)?(C==null||C.addEventListener("touchmove",w.moveHandler,k),C==null||C.addEventListener("touchend",w.upHandler,k)):(C==null||C.addEventListener("mousemove",_.moveHandler,k),C==null||C.addEventListener("mouseup",_.upHandler,k)),e.setColumnSizingInfo(S=>({...S,startOffset:p,startSize:u,deltaOffset:0,deltaPercentage:0,columnSizingStart:n,isResizingColumn:r.id}))}}},createTable:i=>{i.setColumnSizing=e=>i.options.onColumnSizingChange==null?void 0:i.options.onColumnSizingChange(e),i.setColumnSizingInfo=e=>i.options.onColumnSizingInfoChange==null?void 0:i.options.onColumnSizingInfoChange(e),i.resetColumnSizing=e=>{var t;i.setColumnSizing(e?{}:(t=i.initialState.columnSizing)!=null?t:{})},i.resetHeaderSizeInfo=e=>{var t;i.setColumnSizingInfo(e?q0():(t=i.initialState.columnSizingInfo)!=null?t:q0())},i.getTotalSize=()=>{var e,t;return(e=(t=i.getHeaderGroups()[0])==null?void 0:t.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},i.getLeftTotalSize=()=>{var e,t;return(e=(t=i.getLeftHeaderGroups()[0])==null?void 0:t.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},i.getCenterTotalSize=()=>{var e,t;return(e=(t=i.getCenterHeaderGroups()[0])==null?void 0:t.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},i.getRightTotalSize=()=>{var e,t;return(e=(t=i.getRightHeaderGroups()[0])==null?void 0:t.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0}}};let pg=null;function _V(){if(typeof pg=="boolean")return pg;let i=!1;try{const e={get passive(){return i=!0,!1}},t=()=>{};window.addEventListener("test",t,e),window.removeEventListener("test",t)}catch{i=!1}return pg=i,pg}function Y0(i){return i.type==="touchstart"}const wV={getInitialState:i=>({columnVisibility:{},...i}),getDefaultOptions:i=>({onColumnVisibilityChange:Wa("columnVisibility",i)}),createColumn:(i,e)=>{i.toggleVisibility=t=>{i.getCanHide()&&e.setColumnVisibility(r=>({...r,[i.id]:t??!i.getIsVisible()}))},i.getIsVisible=()=>{var t,r;const s=i.columns;return(t=s.length?s.some(l=>l.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[i.id])!=null?t:!0},i.getCanHide=()=>{var t,r;return((t=i.columnDef.enableHiding)!=null?t:!0)&&((r=e.options.enableHiding)!=null?r:!0)},i.getToggleVisibilityHandler=()=>t=>{i.toggleVisibility==null||i.toggleVisibility(t.target.checked)}},createRow:(i,e)=>{i._getAllVisibleCells=rn(()=>[i.getAllCells(),e.getState().columnVisibility],t=>t.filter(r=>r.column.getIsVisible()),sn(e.options,"debugRows")),i.getVisibleCells=rn(()=>[i.getLeftVisibleCells(),i.getCenterVisibleCells(),i.getRightVisibleCells()],(t,r,s)=>[...t,...r,...s],sn(e.options,"debugRows"))},createTable:i=>{const e=(t,r)=>rn(()=>[r(),r().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(l=>l.getIsVisible==null?void 0:l.getIsVisible()),sn(i.options,"debugColumns"));i.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>i.getAllFlatColumns()),i.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>i.getAllLeafColumns()),i.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>i.getLeftLeafColumns()),i.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>i.getRightLeafColumns()),i.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>i.getCenterLeafColumns()),i.setColumnVisibility=t=>i.options.onColumnVisibilityChange==null?void 0:i.options.onColumnVisibilityChange(t),i.resetColumnVisibility=t=>{var r;i.setColumnVisibility(t?{}:(r=i.initialState.columnVisibility)!=null?r:{})},i.toggleAllColumnsVisible=t=>{var r;t=(r=t)!=null?r:!i.getIsAllColumnsVisible(),i.setColumnVisibility(i.getAllLeafColumns().reduce((s,l)=>({...s,[l.id]:t||!(l.getCanHide!=null&&l.getCanHide())}),{}))},i.getIsAllColumnsVisible=()=>!i.getAllLeafColumns().some(t=>!(t.getIsVisible!=null&&t.getIsVisible())),i.getIsSomeColumnsVisible=()=>i.getAllLeafColumns().some(t=>t.getIsVisible==null?void 0:t.getIsVisible()),i.getToggleAllColumnsVisibilityHandler=()=>t=>{var r;i.toggleAllColumnsVisible((r=t.target)==null?void 0:r.checked)}}};function $p(i,e){return e?e==="center"?i.getCenterVisibleLeafColumns():e==="left"?i.getLeftVisibleLeafColumns():i.getRightVisibleLeafColumns():i.getVisibleLeafColumns()}const CV={createTable:i=>{i._getGlobalFacetedRowModel=i.options.getFacetedRowModel&&i.options.getFacetedRowModel(i,"__global__"),i.getGlobalFacetedRowModel=()=>i.options.manualFiltering||!i._getGlobalFacetedRowModel?i.getPreFilteredRowModel():i._getGlobalFacetedRowModel(),i._getGlobalFacetedUniqueValues=i.options.getFacetedUniqueValues&&i.options.getFacetedUniqueValues(i,"__global__"),i.getGlobalFacetedUniqueValues=()=>i._getGlobalFacetedUniqueValues?i._getGlobalFacetedUniqueValues():new Map,i._getGlobalFacetedMinMaxValues=i.options.getFacetedMinMaxValues&&i.options.getFacetedMinMaxValues(i,"__global__"),i.getGlobalFacetedMinMaxValues=()=>{if(i._getGlobalFacetedMinMaxValues)return i._getGlobalFacetedMinMaxValues()}}},TV={getInitialState:i=>({globalFilter:void 0,...i}),getDefaultOptions:i=>({onGlobalFilterChange:Wa("globalFilter",i),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var t;const r=(t=i.getCoreRowModel().flatRows[0])==null||(t=t._getAllCellsByColumnId()[e.id])==null?void 0:t.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(i,e)=>{i.getCanGlobalFilter=()=>{var t,r,s,l;return((t=i.columnDef.enableGlobalFilter)!=null?t:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&((l=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(i))!=null?l:!0)&&!!i.accessorFn}},createTable:i=>{i.getGlobalAutoFilterFn=()=>bl.includesString,i.getGlobalFilterFn=()=>{var e,t;const{globalFilterFn:r}=i.options;return ix(r)?r:r==="auto"?i.getGlobalAutoFilterFn():(e=(t=i.options.filterFns)==null?void 0:t[r])!=null?e:bl[r]},i.setGlobalFilter=e=>{i.options.onGlobalFilterChange==null||i.options.onGlobalFilterChange(e)},i.resetGlobalFilter=e=>{i.setGlobalFilter(e?void 0:i.initialState.globalFilter)}}},SV={getInitialState:i=>({expanded:{},...i}),getDefaultOptions:i=>({onExpandedChange:Wa("expanded",i),paginateExpandedRows:!0}),createTable:i=>{let e=!1,t=!1;i._autoResetExpanded=()=>{var r,s;if(!e){i._queue(()=>{e=!0});return}if((r=(s=i.options.autoResetAll)!=null?s:i.options.autoResetExpanded)!=null?r:!i.options.manualExpanding){if(t)return;t=!0,i._queue(()=>{i.resetExpanded(),t=!1})}},i.setExpanded=r=>i.options.onExpandedChange==null?void 0:i.options.onExpandedChange(r),i.toggleAllRowsExpanded=r=>{r??!i.getIsAllRowsExpanded()?i.setExpanded(!0):i.setExpanded({})},i.resetExpanded=r=>{var s,l;i.setExpanded(r?{}:(s=(l=i.initialState)==null?void 0:l.expanded)!=null?s:{})},i.getCanSomeRowsExpand=()=>i.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),i.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),i.toggleAllRowsExpanded()},i.getIsSomeRowsExpanded=()=>{const r=i.getState().expanded;return r===!0||Object.values(r).some(Boolean)},i.getIsAllRowsExpanded=()=>{const r=i.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||i.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},i.getExpandedDepth=()=>{let r=0;return(i.getState().expanded===!0?Object.keys(i.getRowModel().rowsById):Object.keys(i.getState().expanded)).forEach(l=>{const u=l.split(".");r=Math.max(r,u.length)}),r},i.getPreExpandedRowModel=()=>i.getSortedRowModel(),i.getExpandedRowModel=()=>(!i._getExpandedRowModel&&i.options.getExpandedRowModel&&(i._getExpandedRowModel=i.options.getExpandedRowModel(i)),i.options.manualExpanding||!i._getExpandedRowModel?i.getPreExpandedRowModel():i._getExpandedRowModel())},createRow:(i,e)=>{i.toggleExpanded=t=>{e.setExpanded(r=>{var s;const l=r===!0?!0:!!(r!=null&&r[i.id]);let u={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(n=>{u[n]=!0}):u=r,t=(s=t)!=null?s:!l,!l&&t)return{...u,[i.id]:!0};if(l&&!t){const{[i.id]:n,...p}=u;return p}return r})},i.getIsExpanded=()=>{var t;const r=e.getState().expanded;return!!((t=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(i))!=null?t:r===!0||r!=null&&r[i.id])},i.getCanExpand=()=>{var t,r,s;return(t=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(i))!=null?t:((r=e.options.enableExpanding)!=null?r:!0)&&!!((s=i.subRows)!=null&&s.length)},i.getIsAllParentsExpanded=()=>{let t=!0,r=i;for(;t&&r.parentId;)r=e.getRow(r.parentId,!0),t=r.getIsExpanded();return t},i.getToggleExpandedHandler=()=>{const t=i.getCanExpand();return()=>{t&&i.toggleExpanded()}}}},Ov=0,jv=10,Z0=()=>({pageIndex:Ov,pageSize:jv}),EV={getInitialState:i=>({...i,pagination:{...Z0(),...i==null?void 0:i.pagination}}),getDefaultOptions:i=>({onPaginationChange:Wa("pagination",i)}),createTable:i=>{let e=!1,t=!1;i._autoResetPageIndex=()=>{var r,s;if(!e){i._queue(()=>{e=!0});return}if((r=(s=i.options.autoResetAll)!=null?s:i.options.autoResetPageIndex)!=null?r:!i.options.manualPagination){if(t)return;t=!0,i._queue(()=>{i.resetPageIndex(),t=!1})}},i.setPagination=r=>{const s=l=>dc(r,l);return i.options.onPaginationChange==null?void 0:i.options.onPaginationChange(s)},i.resetPagination=r=>{var s;i.setPagination(r?Z0():(s=i.initialState.pagination)!=null?s:Z0())},i.setPageIndex=r=>{i.setPagination(s=>{let l=dc(r,s.pageIndex);const u=typeof i.options.pageCount>"u"||i.options.pageCount===-1?Number.MAX_SAFE_INTEGER:i.options.pageCount-1;return l=Math.max(0,Math.min(l,u)),{...s,pageIndex:l}})},i.resetPageIndex=r=>{var s,l;i.setPageIndex(r?Ov:(s=(l=i.initialState)==null||(l=l.pagination)==null?void 0:l.pageIndex)!=null?s:Ov)},i.resetPageSize=r=>{var s,l;i.setPageSize(r?jv:(s=(l=i.initialState)==null||(l=l.pagination)==null?void 0:l.pageSize)!=null?s:jv)},i.setPageSize=r=>{i.setPagination(s=>{const l=Math.max(1,dc(r,s.pageSize)),u=s.pageSize*s.pageIndex,n=Math.floor(u/l);return{...s,pageIndex:n,pageSize:l}})},i.setPageCount=r=>i.setPagination(s=>{var l;let u=dc(r,(l=i.options.pageCount)!=null?l:-1);return typeof u=="number"&&(u=Math.max(-1,u)),{...s,pageCount:u}}),i.getPageOptions=rn(()=>[i.getPageCount()],r=>{let s=[];return r&&r>0&&(s=[...new Array(r)].fill(null).map((l,u)=>u)),s},sn(i.options,"debugTable")),i.getCanPreviousPage=()=>i.getState().pagination.pageIndex>0,i.getCanNextPage=()=>{const{pageIndex:r}=i.getState().pagination,s=i.getPageCount();return s===-1?!0:s===0?!1:r<s-1},i.previousPage=()=>i.setPageIndex(r=>r-1),i.nextPage=()=>i.setPageIndex(r=>r+1),i.firstPage=()=>i.setPageIndex(0),i.lastPage=()=>i.setPageIndex(i.getPageCount()-1),i.getPrePaginationRowModel=()=>i.getExpandedRowModel(),i.getPaginationRowModel=()=>(!i._getPaginationRowModel&&i.options.getPaginationRowModel&&(i._getPaginationRowModel=i.options.getPaginationRowModel(i)),i.options.manualPagination||!i._getPaginationRowModel?i.getPrePaginationRowModel():i._getPaginationRowModel()),i.getPageCount=()=>{var r;return(r=i.options.pageCount)!=null?r:Math.ceil(i.getRowCount()/i.getState().pagination.pageSize)},i.getRowCount=()=>{var r;return(r=i.options.rowCount)!=null?r:i.getPrePaginationRowModel().rows.length}}},X0=()=>({top:[],bottom:[]}),kV={getInitialState:i=>({rowPinning:X0(),...i}),getDefaultOptions:i=>({onRowPinningChange:Wa("rowPinning",i)}),createRow:(i,e)=>{i.pin=(t,r,s)=>{const l=r?i.getLeafRows().map(p=>{let{id:m}=p;return m}):[],u=s?i.getParentRows().map(p=>{let{id:m}=p;return m}):[],n=new Set([...u,i.id,...l]);e.setRowPinning(p=>{var m,g;if(t==="bottom"){var v,y;return{top:((v=p==null?void 0:p.top)!=null?v:[]).filter(w=>!(n!=null&&n.has(w))),bottom:[...((y=p==null?void 0:p.bottom)!=null?y:[]).filter(w=>!(n!=null&&n.has(w))),...Array.from(n)]}}if(t==="top"){var C,_;return{top:[...((C=p==null?void 0:p.top)!=null?C:[]).filter(w=>!(n!=null&&n.has(w))),...Array.from(n)],bottom:((_=p==null?void 0:p.bottom)!=null?_:[]).filter(w=>!(n!=null&&n.has(w)))}}return{top:((m=p==null?void 0:p.top)!=null?m:[]).filter(w=>!(n!=null&&n.has(w))),bottom:((g=p==null?void 0:p.bottom)!=null?g:[]).filter(w=>!(n!=null&&n.has(w)))}})},i.getCanPin=()=>{var t;const{enableRowPinning:r,enablePinning:s}=e.options;return typeof r=="function"?r(i):(t=r??s)!=null?t:!0},i.getIsPinned=()=>{const t=[i.id],{top:r,bottom:s}=e.getState().rowPinning,l=t.some(n=>r==null?void 0:r.includes(n)),u=t.some(n=>s==null?void 0:s.includes(n));return l?"top":u?"bottom":!1},i.getPinnedIndex=()=>{var t,r;const s=i.getIsPinned();if(!s)return-1;const l=(t=s==="top"?e.getTopRows():e.getBottomRows())==null?void 0:t.map(u=>{let{id:n}=u;return n});return(r=l==null?void 0:l.indexOf(i.id))!=null?r:-1}},createTable:i=>{i.setRowPinning=e=>i.options.onRowPinningChange==null?void 0:i.options.onRowPinningChange(e),i.resetRowPinning=e=>{var t,r;return i.setRowPinning(e?X0():(t=(r=i.initialState)==null?void 0:r.rowPinning)!=null?t:X0())},i.getIsSomeRowsPinned=e=>{var t;const r=i.getState().rowPinning;if(!e){var s,l;return!!((s=r.top)!=null&&s.length||(l=r.bottom)!=null&&l.length)}return!!((t=r[e])!=null&&t.length)},i._getPinnedRows=(e,t,r)=>{var s;return((s=i.options.keepPinnedRows)==null||s?(t??[]).map(u=>{const n=i.getRow(u,!0);return n.getIsAllParentsExpanded()?n:null}):(t??[]).map(u=>e.find(n=>n.id===u))).filter(Boolean).map(u=>({...u,position:r}))},i.getTopRows=rn(()=>[i.getRowModel().rows,i.getState().rowPinning.top],(e,t)=>i._getPinnedRows(e,t,"top"),sn(i.options,"debugRows")),i.getBottomRows=rn(()=>[i.getRowModel().rows,i.getState().rowPinning.bottom],(e,t)=>i._getPinnedRows(e,t,"bottom"),sn(i.options,"debugRows")),i.getCenterRows=rn(()=>[i.getRowModel().rows,i.getState().rowPinning.top,i.getState().rowPinning.bottom],(e,t,r)=>{const s=new Set([...t??[],...r??[]]);return e.filter(l=>!s.has(l.id))},sn(i.options,"debugRows"))}},AV={getInitialState:i=>({rowSelection:{},...i}),getDefaultOptions:i=>({onRowSelectionChange:Wa("rowSelection",i),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:i=>{i.setRowSelection=e=>i.options.onRowSelectionChange==null?void 0:i.options.onRowSelectionChange(e),i.resetRowSelection=e=>{var t;return i.setRowSelection(e?{}:(t=i.initialState.rowSelection)!=null?t:{})},i.toggleAllRowsSelected=e=>{i.setRowSelection(t=>{e=typeof e<"u"?e:!i.getIsAllRowsSelected();const r={...t},s=i.getPreGroupedRowModel().flatRows;return e?s.forEach(l=>{l.getCanSelect()&&(r[l.id]=!0)}):s.forEach(l=>{delete r[l.id]}),r})},i.toggleAllPageRowsSelected=e=>i.setRowSelection(t=>{const r=typeof e<"u"?e:!i.getIsAllPageRowsSelected(),s={...t};return i.getRowModel().rows.forEach(l=>{Fv(s,l.id,r,!0,i)}),s}),i.getPreSelectedRowModel=()=>i.getCoreRowModel(),i.getSelectedRowModel=rn(()=>[i.getState().rowSelection,i.getCoreRowModel()],(e,t)=>Object.keys(e).length?K0(i,t):{rows:[],flatRows:[],rowsById:{}},sn(i.options,"debugTable")),i.getFilteredSelectedRowModel=rn(()=>[i.getState().rowSelection,i.getFilteredRowModel()],(e,t)=>Object.keys(e).length?K0(i,t):{rows:[],flatRows:[],rowsById:{}},sn(i.options,"debugTable")),i.getGroupedSelectedRowModel=rn(()=>[i.getState().rowSelection,i.getSortedRowModel()],(e,t)=>Object.keys(e).length?K0(i,t):{rows:[],flatRows:[],rowsById:{}},sn(i.options,"debugTable")),i.getIsAllRowsSelected=()=>{const e=i.getFilteredRowModel().flatRows,{rowSelection:t}=i.getState();let r=!!(e.length&&Object.keys(t).length);return r&&e.some(s=>s.getCanSelect()&&!t[s.id])&&(r=!1),r},i.getIsAllPageRowsSelected=()=>{const e=i.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:t}=i.getState();let r=!!e.length;return r&&e.some(s=>!t[s.id])&&(r=!1),r},i.getIsSomeRowsSelected=()=>{var e;const t=Object.keys((e=i.getState().rowSelection)!=null?e:{}).length;return t>0&&t<i.getFilteredRowModel().flatRows.length},i.getIsSomePageRowsSelected=()=>{const e=i.getPaginationRowModel().flatRows;return i.getIsAllPageRowsSelected()?!1:e.filter(t=>t.getCanSelect()).some(t=>t.getIsSelected()||t.getIsSomeSelected())},i.getToggleAllRowsSelectedHandler=()=>e=>{i.toggleAllRowsSelected(e.target.checked)},i.getToggleAllPageRowsSelectedHandler=()=>e=>{i.toggleAllPageRowsSelected(e.target.checked)}},createRow:(i,e)=>{i.toggleSelected=(t,r)=>{const s=i.getIsSelected();e.setRowSelection(l=>{var u;if(t=typeof t<"u"?t:!s,i.getCanSelect()&&s===t)return l;const n={...l};return Fv(n,i.id,t,(u=r==null?void 0:r.selectChildren)!=null?u:!0,e),n})},i.getIsSelected=()=>{const{rowSelection:t}=e.getState();return g1(i,t)},i.getIsSomeSelected=()=>{const{rowSelection:t}=e.getState();return Bv(i,t)==="some"},i.getIsAllSubRowsSelected=()=>{const{rowSelection:t}=e.getState();return Bv(i,t)==="all"},i.getCanSelect=()=>{var t;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(i):(t=e.options.enableRowSelection)!=null?t:!0},i.getCanSelectSubRows=()=>{var t;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(i):(t=e.options.enableSubRowSelection)!=null?t:!0},i.getCanMultiSelect=()=>{var t;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(i):(t=e.options.enableMultiRowSelection)!=null?t:!0},i.getToggleSelectedHandler=()=>{const t=i.getCanSelect();return r=>{var s;t&&i.toggleSelected((s=r.target)==null?void 0:s.checked)}}}},Fv=(i,e,t,r,s)=>{var l;const u=s.getRow(e,!0);t?(u.getCanMultiSelect()||Object.keys(i).forEach(n=>delete i[n]),u.getCanSelect()&&(i[e]=!0)):delete i[e],r&&(l=u.subRows)!=null&&l.length&&u.getCanSelectSubRows()&&u.subRows.forEach(n=>Fv(i,n.id,t,r,s))};function K0(i,e){const t=i.getState().rowSelection,r=[],s={},l=function(u,n){return u.map(p=>{var m;const g=g1(p,t);if(g&&(r.push(p),s[p.id]=p),(m=p.subRows)!=null&&m.length&&(p={...p,subRows:l(p.subRows)}),g)return p}).filter(Boolean)};return{rows:l(e.rows),flatRows:r,rowsById:s}}function g1(i,e){var t;return(t=e[i.id])!=null?t:!1}function Bv(i,e,t){var r;if(!((r=i.subRows)!=null&&r.length))return!1;let s=!0,l=!1;return i.subRows.forEach(u=>{if(!(l&&!s)&&(u.getCanSelect()&&(g1(u,e)?l=!0:s=!1),u.subRows&&u.subRows.length)){const n=Bv(u,e);n==="all"?l=!0:(n==="some"&&(l=!0),s=!1)}}),s?"all":l?"some":!1}const $v=/([0-9]+)/gm,MV=(i,e,t)=>z3(bc(i.getValue(t)).toLowerCase(),bc(e.getValue(t)).toLowerCase()),PV=(i,e,t)=>z3(bc(i.getValue(t)),bc(e.getValue(t))),IV=(i,e,t)=>y1(bc(i.getValue(t)).toLowerCase(),bc(e.getValue(t)).toLowerCase()),DV=(i,e,t)=>y1(bc(i.getValue(t)),bc(e.getValue(t))),RV=(i,e,t)=>{const r=i.getValue(t),s=e.getValue(t);return r>s?1:r<s?-1:0},LV=(i,e,t)=>y1(i.getValue(t),e.getValue(t));function y1(i,e){return i===e?0:i>e?1:-1}function bc(i){return typeof i=="number"?isNaN(i)||i===1/0||i===-1/0?"":String(i):typeof i=="string"?i:""}function z3(i,e){const t=i.split($v).filter(Boolean),r=e.split($v).filter(Boolean);for(;t.length&&r.length;){const s=t.shift(),l=r.shift(),u=parseInt(s,10),n=parseInt(l,10),p=[u,n].sort();if(isNaN(p[0])){if(s>l)return 1;if(l>s)return-1;continue}if(isNaN(p[1]))return isNaN(u)?-1:1;if(u>n)return 1;if(n>u)return-1}return t.length-r.length}const Sp={alphanumeric:MV,alphanumericCaseSensitive:PV,text:IV,textCaseSensitive:DV,datetime:RV,basic:LV},zV={getInitialState:i=>({sorting:[],...i}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:i=>({onSortingChange:Wa("sorting",i),isMultiSortEvent:e=>e.shiftKey}),createColumn:(i,e)=>{i.getAutoSortingFn=()=>{const t=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const s of t){const l=s==null?void 0:s.getValue(i.id);if(Object.prototype.toString.call(l)==="[object Date]")return Sp.datetime;if(typeof l=="string"&&(r=!0,l.split($v).length>1))return Sp.alphanumeric}return r?Sp.text:Sp.basic},i.getAutoSortDir=()=>{const t=e.getFilteredRowModel().flatRows[0];return typeof(t==null?void 0:t.getValue(i.id))=="string"?"asc":"desc"},i.getSortingFn=()=>{var t,r;if(!i)throw new Error;return ix(i.columnDef.sortingFn)?i.columnDef.sortingFn:i.columnDef.sortingFn==="auto"?i.getAutoSortingFn():(t=(r=e.options.sortingFns)==null?void 0:r[i.columnDef.sortingFn])!=null?t:Sp[i.columnDef.sortingFn]},i.toggleSorting=(t,r)=>{const s=i.getNextSortingOrder(),l=typeof t<"u"&&t!==null;e.setSorting(u=>{const n=u==null?void 0:u.find(C=>C.id===i.id),p=u==null?void 0:u.findIndex(C=>C.id===i.id);let m=[],g,v=l?t:s==="desc";if(u!=null&&u.length&&i.getCanMultiSort()&&r?n?g="toggle":g="add":u!=null&&u.length&&p!==u.length-1?g="replace":n?g="toggle":g="replace",g==="toggle"&&(l||s||(g="remove")),g==="add"){var y;m=[...u,{id:i.id,desc:v}],m.splice(0,m.length-((y=e.options.maxMultiSortColCount)!=null?y:Number.MAX_SAFE_INTEGER))}else g==="toggle"?m=u.map(C=>C.id===i.id?{...C,desc:v}:C):g==="remove"?m=u.filter(C=>C.id!==i.id):m=[{id:i.id,desc:v}];return m})},i.getFirstSortDir=()=>{var t,r;return((t=(r=i.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?t:i.getAutoSortDir()==="desc")?"desc":"asc"},i.getNextSortingOrder=t=>{var r,s;const l=i.getFirstSortDir(),u=i.getIsSorted();return u?u!==l&&((r=e.options.enableSortingRemoval)==null||r)&&(!(t&&(s=e.options.enableMultiRemove)!=null)||s)?!1:u==="desc"?"asc":"desc":l},i.getCanSort=()=>{var t,r;return((t=i.columnDef.enableSorting)!=null?t:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!i.accessorFn},i.getCanMultiSort=()=>{var t,r;return(t=(r=i.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?t:!!i.accessorFn},i.getIsSorted=()=>{var t;const r=(t=e.getState().sorting)==null?void 0:t.find(s=>s.id===i.id);return r?r.desc?"desc":"asc":!1},i.getSortIndex=()=>{var t,r;return(t=(r=e.getState().sorting)==null?void 0:r.findIndex(s=>s.id===i.id))!=null?t:-1},i.clearSorting=()=>{e.setSorting(t=>t!=null&&t.length?t.filter(r=>r.id!==i.id):[])},i.getToggleSortingHandler=()=>{const t=i.getCanSort();return r=>{t&&(r.persist==null||r.persist(),i.toggleSorting==null||i.toggleSorting(void 0,i.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:i=>{i.setSorting=e=>i.options.onSortingChange==null?void 0:i.options.onSortingChange(e),i.resetSorting=e=>{var t,r;i.setSorting(e?[]:(t=(r=i.initialState)==null?void 0:r.sorting)!=null?t:[])},i.getPreSortedRowModel=()=>i.getGroupedRowModel(),i.getSortedRowModel=()=>(!i._getSortedRowModel&&i.options.getSortedRowModel&&(i._getSortedRowModel=i.options.getSortedRowModel(i)),i.options.manualSorting||!i._getSortedRowModel?i.getPreSortedRowModel():i._getSortedRowModel())}},NV=[iV,wV,yV,xV,rV,sV,CV,TV,zV,mV,SV,EV,kV,AV,bV];function OV(i){var e,t;const r=[...NV,...(e=i._features)!=null?e:[]];let s={_features:r};const l=s._features.reduce((y,C)=>Object.assign(y,C.getDefaultOptions==null?void 0:C.getDefaultOptions(s)),{}),u=y=>s.options.mergeOptions?s.options.mergeOptions(l,y):{...l,...y};let p={...{},...(t=i.initialState)!=null?t:{}};s._features.forEach(y=>{var C;p=(C=y.getInitialState==null?void 0:y.getInitialState(p))!=null?C:p});const m=[];let g=!1;const v={_features:r,options:{...l,...i},initialState:p,_queue:y=>{m.push(y),g||(g=!0,Promise.resolve().then(()=>{for(;m.length;)m.shift()();g=!1}).catch(C=>setTimeout(()=>{throw C})))},reset:()=>{s.setState(s.initialState)},setOptions:y=>{const C=dc(y,s.options);s.options=u(C)},getState:()=>s.options.state,setState:y=>{s.options.onStateChange==null||s.options.onStateChange(y)},_getRowId:(y,C,_)=>{var w;return(w=s.options.getRowId==null?void 0:s.options.getRowId(y,C,_))!=null?w:`${_?[_.id,C].join("."):C}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(y,C)=>{let _=(C?s.getPrePaginationRowModel():s.getRowModel()).rowsById[y];if(!_&&(_=s.getCoreRowModel().rowsById[y],!_))throw new Error;return _},_getDefaultColumnDef:rn(()=>[s.options.defaultColumn],y=>{var C;return y=(C=y)!=null?C:{},{header:_=>{const w=_.header.column.columnDef;return w.accessorKey?w.accessorKey:w.accessorFn?w.id:null},cell:_=>{var w,k;return(w=(k=_.renderValue())==null||k.toString==null?void 0:k.toString())!=null?w:null},...s._features.reduce((_,w)=>Object.assign(_,w.getDefaultColumnDef==null?void 0:w.getDefaultColumnDef()),{}),...y}},sn(i,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:rn(()=>[s._getColumnDefs()],y=>{const C=function(_,w,k){return k===void 0&&(k=0),_.map(S=>{const x=tV(s,S,k,w),P=S;return x.columns=P.columns?C(P.columns,x,k+1):[],x})};return C(y)},sn(i,"debugColumns")),getAllFlatColumns:rn(()=>[s.getAllColumns()],y=>y.flatMap(C=>C.getFlatColumns()),sn(i,"debugColumns")),_getAllFlatColumnsById:rn(()=>[s.getAllFlatColumns()],y=>y.reduce((C,_)=>(C[_.id]=_,C),{}),sn(i,"debugColumns")),getAllLeafColumns:rn(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(y,C)=>{let _=y.flatMap(w=>w.getLeafColumns());return C(_)},sn(i,"debugColumns")),getColumn:y=>s._getAllFlatColumnsById()[y]};Object.assign(s,v);for(let y=0;y<s._features.length;y++){const C=s._features[y];C==null||C.createTable==null||C.createTable(s)}return s}function jV(){return i=>rn(()=>[i.options.data],e=>{const t={rows:[],flatRows:[],rowsById:{}},r=function(s,l,u){l===void 0&&(l=0);const n=[];for(let m=0;m<s.length;m++){const g=nV(i,i._getRowId(s[m],m,u),s[m],m,l,void 0,u==null?void 0:u.id);if(t.flatRows.push(g),t.rowsById[g.id]=g,n.push(g),i.options.getSubRows){var p;g.originalSubRows=i.options.getSubRows(s[m],m),(p=g.originalSubRows)!=null&&p.length&&(g.subRows=r(g.originalSubRows,l+1,g))}}return n};return t.rows=r(e),t},sn(i.options,"debugTable","getRowModel",()=>i._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function X2(i,e){return i?FV(i)?Ue.createElement(i,e):i:null}function FV(i){return BV(i)||typeof i=="function"||$V(i)}function BV(i){return typeof i=="function"&&(()=>{const e=Object.getPrototypeOf(i);return e.prototype&&e.prototype.isReactComponent})()}function $V(i){return typeof i=="object"&&typeof i.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(i.$$typeof.description)}function UV(i){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...i},[t]=Ue.useState(()=>({current:OV(e)})),[r,s]=Ue.useState(()=>t.current.initialState);return t.current.setOptions(l=>({...l,...i,state:{...r,...i.state},onStateChange:u=>{s(u),i.onStateChange==null||i.onStateChange(u)}})),t.current}const VV=()=>Sy({queryKey:["datasets"],queryFn:io.getDatasetsCrudDatasetsGet}),GV="_actionMenuContainer_6gmzh_1",HV={actionMenuContainer:GV},WV=({onDelete:i})=>{const e=Ue.useRef(null),[t,r]=Ue.useState(!1),s=()=>{r(!t)},l=()=>{r(!1),i&&i()};return he.jsx("div",{className:HV.actionMenuContainer,children:he.jsxs("div",{ref:e,children:[he.jsx(Gn,{small:!0,icon:he.jsx(ib,{}),onClick:s}),t&&he.jsx(by,{onBackdropClick:()=>r(!1),children:he.jsx(sh,{placement:"bottom-end",reference:e,children:he.jsx(yC,{children:he.jsx(Tu,{label:"Delete",icon:he.jsx(tb,{}),destructive:!0,onClick:l})})})})]})})},qV="_tableContainer_1j31y_1",YV="_noDataCell_1j31y_32",ZV="_loadingContainer_1j31y_37",XV="_actionsCell_1j31y_43",KV="_actionButton_1j31y_49",fg={tableContainer:qV,noDataCell:YV,loadingContainer:ZV,actionsCell:XV,actionButton:KV},QV=()=>{const{data:i,isLoading:e,isError:t,error:r}=VV(),s=KU(),l=Ue.useMemo(()=>[s.accessor("name",{header:"Name",cell:n=>n.getValue()}),s.accessor("created",{header:"Created",cell:n=>n.getValue()||"N/A"}),s.display({id:"actions",header:"Actions",size:1,minSize:1,maxSize:1,cell:()=>he.jsx(WV,{onDelete:()=>{console.log("Delete clicked")}})})],[]),u=UV({data:i||[],columns:l,getCoreRowModel:jV()});return e?he.jsx("div",{className:fg.loadingContainer,children:he.jsx(qo,{})}):t?he.jsx(Bo,{error:!0,title:"Error loading datasets",children:r instanceof Error?r.message:"Unknown error"}):he.jsx("div",{className:fg.tableContainer,children:he.jsxs(US,{children:[he.jsx(GS,{children:u.getHeaderGroups().map(n=>he.jsx(WS,{children:n.headers.map(p=>he.jsx(HS,{children:X2(p.column.columnDef.header,p.getContext())},p.id))},n.id))}),he.jsxs(VS,{children:[u.getRowModel().rows.map(n=>he.jsx(Qg,{children:n.getVisibleCells().map(p=>he.jsx(Eg,{children:X2(p.column.columnDef.cell,p.getContext())},p.id))},n.id)),i&&i.length===0&&he.jsxs(Qg,{children:[he.jsx(Eg,{children:he.jsx("div",{className:fg.noDataCell,children:"No datasets found"})}),he.jsx(Eg,{children:he.jsx("div",{className:fg.noDataCell})})]})]})]})})},JV=()=>he.jsxs("div",{children:[he.jsx(ly,{pageTitle:"Datasets Test Page",pageDescription:"A test page displaying datasets using tanstack-query and tanstack-table"}),he.jsx(QV,{})]}),eG="_drawerWrapper_g5ang_1",tG={drawerWrapper:eG},iG="_formWrapper_1wb8p_1",nG="_newPredictionForm_1wb8p_8",rG="_newPredictionTitle_1wb8p_12",Q0={formWrapper:iG,newPredictionForm:nG,newPredictionTitle:rG},sG=({onDrawerClose:i,onDrawerSubmit:e})=>{const[t,r]=Ue.useState([]),[s,l]=Ue.useState([]),[u,n]=Ue.useState([]),[p,m]=Ue.useState(void 0),[g,v]=Ue.useState(""),[y,C]=Ue.useState(void 0);return Ue.useEffect(()=>{if(y==null)return;const _=y.covariates.map(w=>({feature:w.name,origin:"dataItem",dataSource:""}));r(_)},[y]),he.jsx(he.Fragment,{children:he.jsxs("div",{className:Q0.newPredictionForm,children:[he.jsxs("div",{className:Q0.newPredictionTitle,children:[he.jsx("h2",{children:"New prediction"}),he.jsx(Gn,{icon:he.jsx(Kv,{}),onClick:i})]}),he.jsxs("div",{className:Q0.formWrapper,children:[he.jsx(bf,{autoComplete:"",label:"Name of prediction",value:g,onChange:_=>v(_.value),placeholder:it.t("Prediction for Northern Province")}),he.jsx(E3,{selectedModel:y,setSelectedModel:C}),he.jsx(C3,{setDataLayers:r,datasetLayers:t,predictMode:!0}),he.jsx(v3,{setTimePeriods:n}),he.jsx(b3,{orgUnits:s,setOrgUnits:l,orgUnitLevel:p,setOrgUnitLevel:m}),he.jsx(w3,{onDrawerSubmit:e,selectedModel:y,name:g,dataLayers:t,onSendAction:"predict",orgUnitLevel:p,selectedPeriodItems:u,selectedOrgUnits:s})]})]})})},aG=({onDrawerClose:i,isOpen:e,onDrawerSubmit:t})=>{const r=window.innerWidth<900?"100vw":"1000px";return he.jsx("div",{children:he.jsx(f1,{open:e,onClose:i,direction:"right",size:r,children:he.jsx("div",{className:tG.drawerWrapper,children:he.jsx(sG,{onDrawerClose:i,onDrawerSubmit:t})})})})},oG=()=>{const[i,e]=Ue.useState(!1),[t,r]=Ue.useState(!1),s=()=>{r(!1),e(!1)};return Ue.useEffect(()=>{r(!0)},[t]),he.jsxs("div",{children:[he.jsx(ly,{setDrawerOpen:e,pageTitle:"Predictions",pageDescription:"Forecasted disease trends generated by applying a predictive model to current data. These can be reviewed and imported into DHIS2 to support decision-making in the field.",setDrawerOpenText:"New prediction"}),he.jsx(aG,{isOpen:i,onDrawerClose:()=>e(!1),onDrawerSubmit:s}),t&&he.jsx(Nv,{type:"predictions"})]})},lG=({children:i})=>{const{baseUrl:e}=Ey(),[t,r]=Ue.useState(!1);return Ue.useEffect(()=>{Ui.WITH_CREDENTIALS=!0,Ui.BASE=e+"/api/routes/chap/run",r(!0)},[e]),t?he.jsx(he.Fragment,{children:i}):he.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:he.jsx(qo,{})})},cG="_settingsContainer_11gky_1",uG={settingsContainer:cG},dG="_container_1o19c_1",hG="_header_1o19c_5",pG="_settingsContainer_1o19c_16",fG="_loaderContainer_1o19c_22",mG="_mutedText_1o19c_32",gG="_errorMessage_1o19c_37",yG="_routeInfo_1o19c_43",xG="_routeInfoHeader_1o19c_50",vG="_infoGrid_1o19c_64",bG="_label_1o19c_71",_G="_value_1o19c_76",wG="_authorities_1o19c_82",CG="_authority_1o19c_88",Cr={container:dG,header:hG,settingsContainer:pG,loaderContainer:fG,mutedText:mG,errorMessage:gG,routeInfo:yG,routeInfoHeader:xG,infoGrid:vG,label:bG,value:_G,authorities:wG,authority:CG},TG="F_CHAP_MODELING_APP",N3=({onSuccess:i,onError:e}={})=>{const t=_y(),r=ah(),{show:s}=Gp(it.t("Error saving route"),{critical:!0}),{show:l}=Gp(it.t("Route saved successfully"),{success:!0}),u=JT(async n=>{const{id:p,url:m}=n;if(p){const g=["routes","chap"],v=t.getQueryData(g);if(!v)throw new Error(`Route data not found in cache for key ${g}.`);const y=v.routes.find(_=>_.id===p);if(!y)throw new Error(`Route with id ${p} not found in cache for update.`);const C={resource:"routes",type:"update",id:p,data:{...y||{},url:m}};return r.mutate(C)}else{const g={resource:"routes",type:"create",data:{name:"Chap Modeling App",code:"chap",url:m,authorities:[TG],headers:{"Content-Type":"application/json"}}};return r.mutate(g)}},{onSuccess:()=>{l(),t.invalidateQueries(["routes"]),i==null||i()},onError:n=>{s(),console.error("Error saving route:",n),e==null||e(n)}});return{saveRoute:u.mutate,isSaving:u.isLoading,error:u.error}};var Hf=i=>i.type==="checkbox",pu=i=>i instanceof Date,la=i=>i==null;const O3=i=>typeof i=="object";var Xr=i=>!la(i)&&!Array.isArray(i)&&O3(i)&&!pu(i),j3=i=>Xr(i)&&i.target?Hf(i.target)?i.target.checked:i.target.value:i,SG=i=>i.substring(0,i.search(/\.\d+(\.|$)/))||i,F3=(i,e)=>i.has(SG(e)),EG=i=>{const e=i.constructor&&i.constructor.prototype;return Xr(e)&&e.hasOwnProperty("isPrototypeOf")},x1=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ks(i){let e;const t=Array.isArray(i),r=typeof FileList<"u"?i instanceof FileList:!1;if(i instanceof Date)e=new Date(i);else if(i instanceof Set)e=new Set(i);else if(!(x1&&(i instanceof Blob||r))&&(t||Xr(i)))if(e=t?[]:{},!t&&!EG(i))e=i;else for(const s in i)i.hasOwnProperty(s)&&(e[s]=ks(i[s]));else return i;return e}var nx=i=>Array.isArray(i)?i.filter(Boolean):[],qr=i=>i===void 0,mi=(i,e,t)=>{if(!e||!Xr(i))return t;const r=nx(e.split(/[,[\].]+?/)).reduce((s,l)=>la(s)?s:s[l],i);return qr(r)||r===i?qr(i[e])?t:i[e]:r},ja=i=>typeof i=="boolean",v1=i=>/^\w*$/.test(i),B3=i=>nx(i.replace(/["|']|\]/g,"").split(/\.|\[/)),Yn=(i,e,t)=>{let r=-1;const s=v1(e)?[e]:B3(e),l=s.length,u=l-1;for(;++r<l;){const n=s[r];let p=t;if(r!==u){const m=i[n];p=Xr(m)||Array.isArray(m)?m:isNaN(+s[r+1])?{}:[]}if(n==="__proto__"||n==="constructor"||n==="prototype")return;i[n]=p,i=i[n]}};const cy={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ho={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},xl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},kG=Ae.createContext(null),b1=()=>Ae.useContext(kG);var $3=(i,e,t,r=!0)=>{const s={defaultValues:e._defaultValues};for(const l in i)Object.defineProperty(s,l,{get:()=>{const u=l;return e._proxyFormState[u]!==ho.all&&(e._proxyFormState[u]=!r||ho.all),t&&(t[u]=!0),i[u]}});return s};const _1=typeof window<"u"?Ue.useLayoutEffect:Ue.useEffect;function AG(i){const e=b1(),{control:t=e.control,disabled:r,name:s,exact:l}=i,[u,n]=Ae.useState(t._formState),p=Ae.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return _1(()=>t._subscribe({name:s,formState:p.current,exact:l,callback:m=>{!r&&n({...t._formState,...m})}}),[s,r,l]),Ae.useEffect(()=>{p.current.isValid&&t._setValid(!0)},[t]),Ae.useMemo(()=>$3(u,t,p.current,!1),[u,t])}var No=i=>typeof i=="string",U3=(i,e,t,r,s)=>No(i)?(r&&e.watch.add(i),mi(t,i,s)):Array.isArray(i)?i.map(l=>(r&&e.watch.add(l),mi(t,l))):(r&&(e.watchAll=!0),t);function MG(i){const e=b1(),{control:t=e.control,name:r,defaultValue:s,disabled:l,exact:u}=i,n=Ae.useRef(s),[p,m]=Ae.useState(t._getWatch(r,n.current));return _1(()=>t._subscribe({name:r,formState:{values:!0},exact:u,callback:g=>!l&&m(U3(r,t._names,g.values||t._formValues,!1,n.current))}),[r,t,l,u]),Ae.useEffect(()=>t._removeUnmounted()),p}function PG(i){const e=b1(),{name:t,disabled:r,control:s=e.control,shouldUnregister:l}=i,u=F3(s._names.array,t),n=MG({control:s,name:t,defaultValue:mi(s._formValues,t,mi(s._defaultValues,t,i.defaultValue)),exact:!0}),p=AG({control:s,name:t,exact:!0}),m=Ae.useRef(i),g=Ae.useRef(s.register(t,{...i.rules,value:n,...ja(i.disabled)?{disabled:i.disabled}:{}})),v=Ae.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!mi(p.errors,t)},isDirty:{enumerable:!0,get:()=>!!mi(p.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!mi(p.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!mi(p.validatingFields,t)},error:{enumerable:!0,get:()=>mi(p.errors,t)}}),[p,t]),y=Ae.useCallback(k=>g.current.onChange({target:{value:j3(k),name:t},type:cy.CHANGE}),[t]),C=Ae.useCallback(()=>g.current.onBlur({target:{value:mi(s._formValues,t),name:t},type:cy.BLUR}),[t,s._formValues]),_=Ae.useCallback(k=>{const S=mi(s._fields,t);S&&k&&(S._f.ref=k)},[s._fields,t]),w=Ae.useMemo(()=>({name:t,value:n,...ja(r)||p.disabled?{disabled:p.disabled||r}:{},onChange:y,onBlur:C,ref:_}),[t,r,p.disabled,y,C,_,n]);return Ae.useEffect(()=>{const k=s._options.shouldUnregister||l;s.register(t,{...m.current.rules,...ja(m.current.disabled)?{disabled:m.current.disabled}:{}});const S=(x,P)=>{const D=mi(s._fields,x);D&&D._f&&(D._f.mount=P)};if(S(t,!0),k){const x=ks(mi(s._options.defaultValues,t));Yn(s._defaultValues,t,x),qr(mi(s._formValues,t))&&Yn(s._formValues,t,x)}return!u&&s.register(t),()=>{(u?k&&!s._state.action:k)?s.unregister(t):S(t,!1)}},[t,s,u,l]),Ae.useEffect(()=>{s._setDisabledField({disabled:r,name:t})},[r,t,s]),Ae.useMemo(()=>({field:w,formState:p,fieldState:v}),[w,p,v])}const IG=i=>i.render(PG(i));var V3=(i,e,t,r,s)=>e?{...t[i],types:{...t[i]&&t[i].types?t[i].types:{},[r]:s||!0}}:{},Up=i=>Array.isArray(i)?i:[i],K2=()=>{let i=[];return{get observers(){return i},next:s=>{for(const l of i)l.next&&l.next(s)},subscribe:s=>(i.push(s),{unsubscribe:()=>{i=i.filter(l=>l!==s)}}),unsubscribe:()=>{i=[]}}},Uv=i=>la(i)||!O3(i);function sc(i,e){if(Uv(i)||Uv(e))return i===e;if(pu(i)&&pu(e))return i.getTime()===e.getTime();const t=Object.keys(i),r=Object.keys(e);if(t.length!==r.length)return!1;for(const s of t){const l=i[s];if(!r.includes(s))return!1;if(s!=="ref"){const u=e[s];if(pu(l)&&pu(u)||Xr(l)&&Xr(u)||Array.isArray(l)&&Array.isArray(u)?!sc(l,u):l!==u)return!1}}return!0}var oa=i=>Xr(i)&&!Object.keys(i).length,w1=i=>i.type==="file",po=i=>typeof i=="function",uy=i=>{if(!x1)return!1;const e=i?i.ownerDocument:0;return i instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},G3=i=>i.type==="select-multiple",C1=i=>i.type==="radio",DG=i=>C1(i)||Hf(i),J0=i=>uy(i)&&i.isConnected;function RG(i,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)i=qr(i)?r++:i[e[r++]];return i}function LG(i){for(const e in i)if(i.hasOwnProperty(e)&&!qr(i[e]))return!1;return!0}function os(i,e){const t=Array.isArray(e)?e:v1(e)?[e]:B3(e),r=t.length===1?i:RG(i,t),s=t.length-1,l=t[s];return r&&delete r[l],s!==0&&(Xr(r)&&oa(r)||Array.isArray(r)&&LG(r))&&os(i,t.slice(0,-1)),i}var H3=i=>{for(const e in i)if(po(i[e]))return!0;return!1};function dy(i,e={}){const t=Array.isArray(i);if(Xr(i)||t)for(const r in i)Array.isArray(i[r])||Xr(i[r])&&!H3(i[r])?(e[r]=Array.isArray(i[r])?[]:{},dy(i[r],e[r])):la(i[r])||(e[r]=!0);return e}function W3(i,e,t){const r=Array.isArray(i);if(Xr(i)||r)for(const s in i)Array.isArray(i[s])||Xr(i[s])&&!H3(i[s])?qr(e)||Uv(t[s])?t[s]=Array.isArray(i[s])?dy(i[s],[]):{...dy(i[s])}:W3(i[s],la(e)?{}:e[s],t[s]):t[s]=!sc(i[s],e[s]);return t}var Ep=(i,e)=>W3(i,e,dy(e));const Q2={value:!1,isValid:!1},J2={value:!0,isValid:!0};var q3=i=>{if(Array.isArray(i)){if(i.length>1){const e=i.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return i[0].checked&&!i[0].disabled?i[0].attributes&&!qr(i[0].attributes.value)?qr(i[0].value)||i[0].value===""?J2:{value:i[0].value,isValid:!0}:J2:Q2}return Q2},Y3=(i,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>qr(i)?i:e?i===""?NaN:i&&+i:t&&No(i)?new Date(i):r?r(i):i;const eC={isValid:!1,value:null};var Z3=i=>Array.isArray(i)?i.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,eC):eC;function tC(i){const e=i.ref;return w1(e)?e.files:C1(e)?Z3(i.refs).value:G3(e)?[...e.selectedOptions].map(({value:t})=>t):Hf(e)?q3(i.refs).value:Y3(qr(e.value)?i.ref.value:e.value,i)}var zG=(i,e,t,r)=>{const s={};for(const l of i){const u=mi(e,l);u&&Yn(s,l,u._f)}return{criteriaMode:t,names:[...i],fields:s,shouldUseNativeValidation:r}},hy=i=>i instanceof RegExp,kp=i=>qr(i)?i:hy(i)?i.source:Xr(i)?hy(i.value)?i.value.source:i.value:i,iC=i=>({isOnSubmit:!i||i===ho.onSubmit,isOnBlur:i===ho.onBlur,isOnChange:i===ho.onChange,isOnAll:i===ho.all,isOnTouch:i===ho.onTouched});const nC="AsyncFunction";var NG=i=>!!i&&!!i.validate&&!!(po(i.validate)&&i.validate.constructor.name===nC||Xr(i.validate)&&Object.values(i.validate).find(e=>e.constructor.name===nC)),OG=i=>i.mount&&(i.required||i.min||i.max||i.maxLength||i.minLength||i.pattern||i.validate),rC=(i,e,t)=>!t&&(e.watchAll||e.watch.has(i)||[...e.watch].some(r=>i.startsWith(r)&&/^\.\w+/.test(i.slice(r.length))));const Vp=(i,e,t,r)=>{for(const s of t||Object.keys(i)){const l=mi(i,s);if(l){const{_f:u,...n}=l;if(u){if(u.refs&&u.refs[0]&&e(u.refs[0],s)&&!r)return!0;if(u.ref&&e(u.ref,u.name)&&!r)return!0;if(Vp(n,e))break}else if(Xr(n)&&Vp(n,e))break}}};function sC(i,e,t){const r=mi(i,t);if(r||v1(t))return{error:r,name:t};const s=t.split(".");for(;s.length;){const l=s.join("."),u=mi(e,l),n=mi(i,l);if(u&&!Array.isArray(u)&&t!==l)return{name:t};if(n&&n.type)return{name:l,error:n};s.pop()}return{name:t}}var jG=(i,e,t,r)=>{t(i);const{name:s,...l}=i;return oa(l)||Object.keys(l).length>=Object.keys(e).length||Object.keys(l).find(u=>e[u]===(!r||ho.all))},FG=(i,e,t)=>!i||!e||i===e||Up(i).some(r=>r&&(t?r===e:r.startsWith(e)||e.startsWith(r))),BG=(i,e,t,r,s)=>s.isOnAll?!1:!t&&s.isOnTouch?!(e||i):(t?r.isOnBlur:s.isOnBlur)?!i:(t?r.isOnChange:s.isOnChange)?i:!0,$G=(i,e)=>!nx(mi(i,e)).length&&os(i,e),UG=(i,e,t)=>{const r=Up(mi(i,t));return Yn(r,"root",e[t]),Yn(i,t,r),i},Ng=i=>No(i);function aC(i,e,t="validate"){if(Ng(i)||Array.isArray(i)&&i.every(Ng)||ja(i)&&!i)return{type:t,message:Ng(i)?i:"",ref:e}}var Ld=i=>Xr(i)&&!hy(i)?i:{value:i,message:""},oC=async(i,e,t,r,s,l)=>{const{ref:u,refs:n,required:p,maxLength:m,minLength:g,min:v,max:y,pattern:C,validate:_,name:w,valueAsNumber:k,mount:S}=i._f,x=mi(t,w);if(!S||e.has(w))return{};const P=n?n[0]:u,D=V=>{s&&P.reportValidity&&(P.setCustomValidity(ja(V)?"":V||""),P.reportValidity())},T={},I=C1(u),N=Hf(u),q=I||N,Z=(k||w1(u))&&qr(u.value)&&qr(x)||uy(u)&&u.value===""||x===""||Array.isArray(x)&&!x.length,X=V3.bind(null,w,r,T),O=(V,$,L,R=xl.maxLength,G=xl.minLength)=>{const U=V?$:L;T[w]={type:V?R:G,message:U,ref:u,...X(V?R:G,U)}};if(l?!Array.isArray(x)||!x.length:p&&(!q&&(Z||la(x))||ja(x)&&!x||N&&!q3(n).isValid||I&&!Z3(n).isValid)){const{value:V,message:$}=Ng(p)?{value:!!p,message:p}:Ld(p);if(V&&(T[w]={type:xl.required,message:$,ref:P,...X(xl.required,$)},!r))return D($),T}if(!Z&&(!la(v)||!la(y))){let V,$;const L=Ld(y),R=Ld(v);if(!la(x)&&!isNaN(x)){const G=u.valueAsNumber||x&&+x;la(L.value)||(V=G>L.value),la(R.value)||($=G<R.value)}else{const G=u.valueAsDate||new Date(x),U=W=>new Date(new Date().toDateString()+" "+W),B=u.type=="time",H=u.type=="week";No(L.value)&&x&&(V=B?U(x)>U(L.value):H?x>L.value:G>new Date(L.value)),No(R.value)&&x&&($=B?U(x)<U(R.value):H?x<R.value:G<new Date(R.value))}if((V||$)&&(O(!!V,L.message,R.message,xl.max,xl.min),!r))return D(T[w].message),T}if((m||g)&&!Z&&(No(x)||l&&Array.isArray(x))){const V=Ld(m),$=Ld(g),L=!la(V.value)&&x.length>+V.value,R=!la($.value)&&x.length<+$.value;if((L||R)&&(O(L,V.message,$.message),!r))return D(T[w].message),T}if(C&&!Z&&No(x)){const{value:V,message:$}=Ld(C);if(hy(V)&&!x.match(V)&&(T[w]={type:xl.pattern,message:$,ref:u,...X(xl.pattern,$)},!r))return D($),T}if(_){if(po(_)){const V=await _(x,t),$=aC(V,P);if($&&(T[w]={...$,...X(xl.validate,$.message)},!r))return D($.message),T}else if(Xr(_)){let V={};for(const $ in _){if(!oa(V)&&!r)break;const L=aC(await _[$](x,t),P,$);L&&(V={...L,...X($,L.message)},D(L.message),r&&(T[w]=V))}if(!oa(V)&&(T[w]={ref:P,...V},!r))return T}}return D(!0),T};const VG={mode:ho.onSubmit,reValidateMode:ho.onChange,shouldFocusError:!0};function GG(i={}){let e={...VG,...i},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:po(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let s=Xr(e.defaultValues)||Xr(e.values)?ks(e.defaultValues||e.values)||{}:{},l=e.shouldUnregister?{}:ks(s),u={action:!1,mount:!1,watch:!1},n={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},p,m=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let v={...g};const y={array:K2(),state:K2()},C=iC(e.mode),_=iC(e.reValidateMode),w=e.criteriaMode===ho.all,k=ke=>ge=>{clearTimeout(m),m=setTimeout(ke,ge)},S=async ke=>{if(!e.disabled&&(g.isValid||v.isValid||ke)){const ge=e.resolver?oa((await Z()).errors):await O(r,!0);ge!==t.isValid&&y.state.next({isValid:ge})}},x=(ke,ge)=>{!e.disabled&&(g.isValidating||g.validatingFields||v.isValidating||v.validatingFields)&&((ke||Array.from(n.mount)).forEach(fe=>{fe&&(ge?Yn(t.validatingFields,fe,ge):os(t.validatingFields,fe))}),y.state.next({validatingFields:t.validatingFields,isValidating:!oa(t.validatingFields)}))},P=(ke,ge=[],fe,Me,De=!0,Pe=!0)=>{if(Me&&fe&&!e.disabled){if(u.action=!0,Pe&&Array.isArray(mi(r,ke))){const je=fe(mi(r,ke),Me.argA,Me.argB);De&&Yn(r,ke,je)}if(Pe&&Array.isArray(mi(t.errors,ke))){const je=fe(mi(t.errors,ke),Me.argA,Me.argB);De&&Yn(t.errors,ke,je),$G(t.errors,ke)}if((g.touchedFields||v.touchedFields)&&Pe&&Array.isArray(mi(t.touchedFields,ke))){const je=fe(mi(t.touchedFields,ke),Me.argA,Me.argB);De&&Yn(t.touchedFields,ke,je)}(g.dirtyFields||v.dirtyFields)&&(t.dirtyFields=Ep(s,l)),y.state.next({name:ke,isDirty:$(ke,ge),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else Yn(l,ke,ge)},D=(ke,ge)=>{Yn(t.errors,ke,ge),y.state.next({errors:t.errors})},T=ke=>{t.errors=ke,y.state.next({errors:t.errors,isValid:!1})},I=(ke,ge,fe,Me)=>{const De=mi(r,ke);if(De){const Pe=mi(l,ke,qr(fe)?mi(s,ke):fe);qr(Pe)||Me&&Me.defaultChecked||ge?Yn(l,ke,ge?Pe:tC(De._f)):G(ke,Pe),u.mount&&S()}},N=(ke,ge,fe,Me,De)=>{let Pe=!1,je=!1;const Xe={name:ke};if(!e.disabled){if(!fe||Me){(g.isDirty||v.isDirty)&&(je=t.isDirty,t.isDirty=Xe.isDirty=$(),Pe=je!==Xe.isDirty);const et=sc(mi(s,ke),ge);je=!!mi(t.dirtyFields,ke),et?os(t.dirtyFields,ke):Yn(t.dirtyFields,ke,!0),Xe.dirtyFields=t.dirtyFields,Pe=Pe||(g.dirtyFields||v.dirtyFields)&&je!==!et}if(fe){const et=mi(t.touchedFields,ke);et||(Yn(t.touchedFields,ke,fe),Xe.touchedFields=t.touchedFields,Pe=Pe||(g.touchedFields||v.touchedFields)&&et!==fe)}Pe&&De&&y.state.next(Xe)}return Pe?Xe:{}},q=(ke,ge,fe,Me)=>{const De=mi(t.errors,ke),Pe=(g.isValid||v.isValid)&&ja(ge)&&t.isValid!==ge;if(e.delayError&&fe?(p=k(()=>D(ke,fe)),p(e.delayError)):(clearTimeout(m),p=null,fe?Yn(t.errors,ke,fe):os(t.errors,ke)),(fe?!sc(De,fe):De)||!oa(Me)||Pe){const je={...Me,...Pe&&ja(ge)?{isValid:ge}:{},errors:t.errors,name:ke};t={...t,...je},y.state.next(je)}},Z=async ke=>{x(ke,!0);const ge=await e.resolver(l,e.context,zG(ke||n.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return x(ke),ge},X=async ke=>{const{errors:ge}=await Z(ke);if(ke)for(const fe of ke){const Me=mi(ge,fe);Me?Yn(t.errors,fe,Me):os(t.errors,fe)}else t.errors=ge;return ge},O=async(ke,ge,fe={valid:!0})=>{for(const Me in ke){const De=ke[Me];if(De){const{_f:Pe,...je}=De;if(Pe){const Xe=n.array.has(Pe.name),et=De._f&&NG(De._f);et&&g.validatingFields&&x([Me],!0);const nt=await oC(De,n.disabled,l,w,e.shouldUseNativeValidation&&!ge,Xe);if(et&&g.validatingFields&&x([Me]),nt[Pe.name]&&(fe.valid=!1,ge))break;!ge&&(mi(nt,Pe.name)?Xe?UG(t.errors,nt,Pe.name):Yn(t.errors,Pe.name,nt[Pe.name]):os(t.errors,Pe.name))}!oa(je)&&await O(je,ge,fe)}}return fe.valid},V=()=>{for(const ke of n.unMount){const ge=mi(r,ke);ge&&(ge._f.refs?ge._f.refs.every(fe=>!J0(fe)):!J0(ge._f.ref))&&Q(ke)}n.unMount=new Set},$=(ke,ge)=>!e.disabled&&(ke&&ge&&Yn(l,ke,ge),!sc(de(),s)),L=(ke,ge,fe)=>U3(ke,n,{...u.mount?l:qr(ge)?s:No(ke)?{[ke]:ge}:ge},fe,ge),R=ke=>nx(mi(u.mount?l:s,ke,e.shouldUnregister?mi(s,ke,[]):[])),G=(ke,ge,fe={})=>{const Me=mi(r,ke);let De=ge;if(Me){const Pe=Me._f;Pe&&(!Pe.disabled&&Yn(l,ke,Y3(ge,Pe)),De=uy(Pe.ref)&&la(ge)?"":ge,G3(Pe.ref)?[...Pe.ref.options].forEach(je=>je.selected=De.includes(je.value)):Pe.refs?Hf(Pe.ref)?Pe.refs.length>1?Pe.refs.forEach(je=>(!je.defaultChecked||!je.disabled)&&(je.checked=Array.isArray(De)?!!De.find(Xe=>Xe===je.value):De===je.value)):Pe.refs[0]&&(Pe.refs[0].checked=!!De):Pe.refs.forEach(je=>je.checked=je.value===De):w1(Pe.ref)?Pe.ref.value="":(Pe.ref.value=De,Pe.ref.type||y.state.next({name:ke,values:ks(l)})))}(fe.shouldDirty||fe.shouldTouch)&&N(ke,De,fe.shouldTouch,fe.shouldDirty,!0),fe.shouldValidate&&re(ke)},U=(ke,ge,fe)=>{for(const Me in ge){const De=ge[Me],Pe=`${ke}.${Me}`,je=mi(r,Pe);(n.array.has(ke)||Xr(De)||je&&!je._f)&&!pu(De)?U(Pe,De,fe):G(Pe,De,fe)}},B=(ke,ge,fe={})=>{const Me=mi(r,ke),De=n.array.has(ke),Pe=ks(ge);Yn(l,ke,Pe),De?(y.array.next({name:ke,values:ks(l)}),(g.isDirty||g.dirtyFields||v.isDirty||v.dirtyFields)&&fe.shouldDirty&&y.state.next({name:ke,dirtyFields:Ep(s,l),isDirty:$(ke,Pe)})):Me&&!Me._f&&!la(Pe)?U(ke,Pe,fe):G(ke,Pe,fe),rC(ke,n)&&y.state.next({...t}),y.state.next({name:u.mount?ke:void 0,values:ks(l)})},H=async ke=>{u.mount=!0;const ge=ke.target;let fe=ge.name,Me=!0;const De=mi(r,fe),Pe=je=>{Me=Number.isNaN(je)||pu(je)&&isNaN(je.getTime())||sc(je,mi(l,fe,je))};if(De){let je,Xe;const et=ge.type?tC(De._f):j3(ke),nt=ke.type===cy.BLUR||ke.type===cy.FOCUS_OUT,ht=!OG(De._f)&&!e.resolver&&!mi(t.errors,fe)&&!De._f.deps||BG(nt,mi(t.touchedFields,fe),t.isSubmitted,_,C),gt=rC(fe,n,nt);Yn(l,fe,et),nt?(De._f.onBlur&&De._f.onBlur(ke),p&&p(0)):De._f.onChange&&De._f.onChange(ke);const wt=N(fe,et,nt),Rt=!oa(wt)||gt;if(!nt&&y.state.next({name:fe,type:ke.type,values:ks(l)}),ht)return(g.isValid||v.isValid)&&(e.mode==="onBlur"?nt&&S():nt||S()),Rt&&y.state.next({name:fe,...gt?{}:wt});if(!nt&&gt&&y.state.next({...t}),e.resolver){const{errors:ft}=await Z([fe]);if(Pe(et),Me){const St=sC(t.errors,r,fe),Ct=sC(ft,r,St.name||fe);je=Ct.error,fe=Ct.name,Xe=oa(ft)}}else x([fe],!0),je=(await oC(De,n.disabled,l,w,e.shouldUseNativeValidation))[fe],x([fe]),Pe(et),Me&&(je?Xe=!1:(g.isValid||v.isValid)&&(Xe=await O(r,!0)));Me&&(De._f.deps&&re(De._f.deps),q(fe,Xe,je,wt))}},W=(ke,ge)=>{if(mi(t.errors,ge)&&ke.focus)return ke.focus(),1},re=async(ke,ge={})=>{let fe,Me;const De=Up(ke);if(e.resolver){const Pe=await X(qr(ke)?ke:De);fe=oa(Pe),Me=ke?!De.some(je=>mi(Pe,je)):fe}else ke?(Me=(await Promise.all(De.map(async Pe=>{const je=mi(r,Pe);return await O(je&&je._f?{[Pe]:je}:je)}))).every(Boolean),!(!Me&&!t.isValid)&&S()):Me=fe=await O(r);return y.state.next({...!No(ke)||(g.isValid||v.isValid)&&fe!==t.isValid?{}:{name:ke},...e.resolver||!ke?{isValid:fe}:{},errors:t.errors}),ge.shouldFocus&&!Me&&Vp(r,W,ke?De:n.mount),Me},de=ke=>{const ge={...u.mount?l:s};return qr(ke)?ge:No(ke)?mi(ge,ke):ke.map(fe=>mi(ge,fe))},ie=(ke,ge)=>({invalid:!!mi((ge||t).errors,ke),isDirty:!!mi((ge||t).dirtyFields,ke),error:mi((ge||t).errors,ke),isValidating:!!mi(t.validatingFields,ke),isTouched:!!mi((ge||t).touchedFields,ke)}),oe=ke=>{ke&&Up(ke).forEach(ge=>os(t.errors,ge)),y.state.next({errors:ke?t.errors:{}})},Ee=(ke,ge,fe)=>{const Me=(mi(r,ke,{_f:{}})._f||{}).ref,De=mi(t.errors,ke)||{},{ref:Pe,message:je,type:Xe,...et}=De;Yn(t.errors,ke,{...et,...ge,ref:Me}),y.state.next({name:ke,errors:t.errors,isValid:!1}),fe&&fe.shouldFocus&&Me&&Me.focus&&Me.focus()},xe=(ke,ge)=>po(ke)?y.state.subscribe({next:fe=>ke(L(void 0,ge),fe)}):L(ke,ge,!0),Se=ke=>y.state.subscribe({next:ge=>{FG(ke.name,ge.name,ke.exact)&&jG(ge,ke.formState||g,Ie,ke.reRenderRoot)&&ke.callback({values:{...l},...t,...ge})}}).unsubscribe,K=ke=>(u.mount=!0,v={...v,...ke.formState},Se({...ke,formState:v})),Q=(ke,ge={})=>{for(const fe of ke?Up(ke):n.mount)n.mount.delete(fe),n.array.delete(fe),ge.keepValue||(os(r,fe),os(l,fe)),!ge.keepError&&os(t.errors,fe),!ge.keepDirty&&os(t.dirtyFields,fe),!ge.keepTouched&&os(t.touchedFields,fe),!ge.keepIsValidating&&os(t.validatingFields,fe),!e.shouldUnregister&&!ge.keepDefaultValue&&os(s,fe);y.state.next({values:ks(l)}),y.state.next({...t,...ge.keepDirty?{isDirty:$()}:{}}),!ge.keepIsValid&&S()},ae=({disabled:ke,name:ge})=>{(ja(ke)&&u.mount||ke||n.disabled.has(ge))&&(ke?n.disabled.add(ge):n.disabled.delete(ge))},_e=(ke,ge={})=>{let fe=mi(r,ke);const Me=ja(ge.disabled)||ja(e.disabled);return Yn(r,ke,{...fe||{},_f:{...fe&&fe._f?fe._f:{ref:{name:ke}},name:ke,mount:!0,...ge}}),n.mount.add(ke),fe?ae({disabled:ja(ge.disabled)?ge.disabled:e.disabled,name:ke}):I(ke,!0,ge.value),{...Me?{disabled:ge.disabled||e.disabled}:{},...e.progressive?{required:!!ge.required,min:kp(ge.min),max:kp(ge.max),minLength:kp(ge.minLength),maxLength:kp(ge.maxLength),pattern:kp(ge.pattern)}:{},name:ke,onChange:H,onBlur:H,ref:De=>{if(De){_e(ke,ge),fe=mi(r,ke);const Pe=qr(De.value)&&De.querySelectorAll&&De.querySelectorAll("input,select,textarea")[0]||De,je=DG(Pe),Xe=fe._f.refs||[];if(je?Xe.find(et=>et===Pe):Pe===fe._f.ref)return;Yn(r,ke,{_f:{...fe._f,...je?{refs:[...Xe.filter(J0),Pe,...Array.isArray(mi(s,ke))?[{}]:[]],ref:{type:Pe.type,name:ke}}:{ref:Pe}}}),I(ke,!1,void 0,Pe)}else fe=mi(r,ke,{}),fe._f&&(fe._f.mount=!1),(e.shouldUnregister||ge.shouldUnregister)&&!(F3(n.array,ke)&&u.action)&&n.unMount.add(ke)}}},J=()=>e.shouldFocusError&&Vp(r,W,n.mount),ne=ke=>{ja(ke)&&(y.state.next({disabled:ke}),Vp(r,(ge,fe)=>{const Me=mi(r,fe);Me&&(ge.disabled=Me._f.disabled||ke,Array.isArray(Me._f.refs)&&Me._f.refs.forEach(De=>{De.disabled=Me._f.disabled||ke}))},0,!1))},ce=(ke,ge)=>async fe=>{let Me;fe&&(fe.preventDefault&&fe.preventDefault(),fe.persist&&fe.persist());let De=ks(l);if(y.state.next({isSubmitting:!0}),e.resolver){const{errors:Pe,values:je}=await Z();t.errors=Pe,De=je}else await O(r);if(n.disabled.size)for(const Pe of n.disabled)Yn(De,Pe,void 0);if(os(t.errors,"root"),oa(t.errors)){y.state.next({errors:{}});try{await ke(De,fe)}catch(Pe){Me=Pe}}else ge&&await ge({...t.errors},fe),J(),setTimeout(J);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:oa(t.errors)&&!Me,submitCount:t.submitCount+1,errors:t.errors}),Me)throw Me},ye=(ke,ge={})=>{mi(r,ke)&&(qr(ge.defaultValue)?B(ke,ks(mi(s,ke))):(B(ke,ge.defaultValue),Yn(s,ke,ks(ge.defaultValue))),ge.keepTouched||os(t.touchedFields,ke),ge.keepDirty||(os(t.dirtyFields,ke),t.isDirty=ge.defaultValue?$(ke,ks(mi(s,ke))):$()),ge.keepError||(os(t.errors,ke),g.isValid&&S()),y.state.next({...t}))},we=(ke,ge={})=>{const fe=ke?ks(ke):s,Me=ks(fe),De=oa(ke),Pe=De?s:Me;if(ge.keepDefaultValues||(s=fe),!ge.keepValues){if(ge.keepDirtyValues){const je=new Set([...n.mount,...Object.keys(Ep(s,l))]);for(const Xe of Array.from(je))mi(t.dirtyFields,Xe)?Yn(Pe,Xe,mi(l,Xe)):B(Xe,mi(Pe,Xe))}else{if(x1&&qr(ke))for(const je of n.mount){const Xe=mi(r,je);if(Xe&&Xe._f){const et=Array.isArray(Xe._f.refs)?Xe._f.refs[0]:Xe._f.ref;if(uy(et)){const nt=et.closest("form");if(nt){nt.reset();break}}}}for(const je of n.mount)B(je,mi(Pe,je))}l=ks(Pe),y.array.next({values:{...Pe}}),y.state.next({values:{...Pe}})}n={mount:ge.keepDirtyValues?n.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!g.isValid||!!ge.keepIsValid||!!ge.keepDirtyValues,u.watch=!!e.shouldUnregister,y.state.next({submitCount:ge.keepSubmitCount?t.submitCount:0,isDirty:De?!1:ge.keepDirty?t.isDirty:!!(ge.keepDefaultValues&&!sc(ke,s)),isSubmitted:ge.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:De?{}:ge.keepDirtyValues?ge.keepDefaultValues&&l?Ep(s,l):t.dirtyFields:ge.keepDefaultValues&&ke?Ep(s,ke):ge.keepDirty?t.dirtyFields:{},touchedFields:ge.keepTouched?t.touchedFields:{},errors:ge.keepErrors?t.errors:{},isSubmitSuccessful:ge.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},ze=(ke,ge)=>we(po(ke)?ke(l):ke,ge),Ce=(ke,ge={})=>{const fe=mi(r,ke),Me=fe&&fe._f;if(Me){const De=Me.refs?Me.refs[0]:Me.ref;De.focus&&(De.focus(),ge.shouldSelect&&po(De.select)&&De.select())}},Ie=ke=>{t={...t,...ke}},Ge={control:{register:_e,unregister:Q,getFieldState:ie,handleSubmit:ce,setError:Ee,_subscribe:Se,_runSchema:Z,_getWatch:L,_getDirty:$,_setValid:S,_setFieldArray:P,_setDisabledField:ae,_setErrors:T,_getFieldArray:R,_reset:we,_resetDefaultValues:()=>po(e.defaultValues)&&e.defaultValues().then(ke=>{ze(ke,e.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:V,_disableForm:ne,_subjects:y,_proxyFormState:g,get _fields(){return r},get _formValues(){return l},get _state(){return u},set _state(ke){u=ke},get _defaultValues(){return s},get _names(){return n},set _names(ke){n=ke},get _formState(){return t},get _options(){return e},set _options(ke){e={...e,...ke}}},subscribe:K,trigger:re,register:_e,handleSubmit:ce,watch:xe,setValue:B,getValues:de,reset:ze,resetField:ye,clearErrors:oe,unregister:Q,setError:Ee,setFocus:Ce,getFieldState:ie};return{...Ge,formControl:Ge}}function HG(i={}){const e=Ae.useRef(void 0),t=Ae.useRef(void 0),[r,s]=Ae.useState({isDirty:!1,isValidating:!1,isLoading:po(i.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:i.errors||{},disabled:i.disabled||!1,isReady:!1,defaultValues:po(i.defaultValues)?void 0:i.defaultValues});e.current||(e.current={...i.formControl?i.formControl:GG(i),formState:r},i.formControl&&i.defaultValues&&!po(i.defaultValues)&&i.formControl.reset(i.defaultValues,i.resetOptions));const l=e.current.control;return l._options=i,_1(()=>{const u=l._subscribe({formState:l._proxyFormState,callback:()=>s({...l._formState}),reRenderRoot:!0});return s(n=>({...n,isReady:!0})),l._formState.isReady=!0,u},[l]),Ae.useEffect(()=>l._disableForm(i.disabled),[l,i.disabled]),Ae.useEffect(()=>{i.mode&&(l._options.mode=i.mode),i.reValidateMode&&(l._options.reValidateMode=i.reValidateMode),i.errors&&!oa(i.errors)&&l._setErrors(i.errors)},[l,i.errors,i.mode,i.reValidateMode]),Ae.useEffect(()=>{i.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,i.shouldUnregister]),Ae.useEffect(()=>{if(l._proxyFormState.isDirty){const u=l._getDirty();u!==r.isDirty&&l._subjects.state.next({isDirty:u})}},[l,r.isDirty]),Ae.useEffect(()=>{i.values&&!sc(i.values,t.current)?(l._reset(i.values,l._options.resetOptions),t.current=i.values,s(u=>({...u}))):l._resetDefaultValues()},[l,i.values]),Ae.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),e.current.formState=$3(r,l),e.current}const lC=(i,e,t)=>{if(i&&"reportValidity"in i){const r=mi(t,e);i.setCustomValidity(r&&r.message||""),i.reportValidity()}},X3=(i,e)=>{for(const t in e.fields){const r=e.fields[t];r&&r.ref&&"reportValidity"in r.ref?lC(r.ref,t,i):r&&r.refs&&r.refs.forEach(s=>lC(s,t,i))}},WG=(i,e)=>{e.shouldUseNativeValidation&&X3(i,e);const t={};for(const r in i){const s=mi(e.fields,r),l=Object.assign(i[r]||{},{ref:s&&s.ref});if(qG(e.names||Object.keys(i),r)){const u=Object.assign({},mi(t,r));Yn(u,"root",l),Yn(t,r,u)}else Yn(t,r,l)}return t},qG=(i,e)=>{const t=cC(e);return i.some(r=>cC(r).match(`^${t}\\.\\d+`))};function cC(i){return i.replace(/\]|\[/g,"")}function YG(i,e){for(var t={};i.length;){var r=i[0],s=r.code,l=r.message,u=r.path.join(".");if(!t[u])if("unionErrors"in r){var n=r.unionErrors[0].errors[0];t[u]={message:n.message,type:n.code}}else t[u]={message:l,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(g){return g.errors.forEach(function(v){return i.push(v)})}),e){var p=t[u].types,m=p&&p[r.code];t[u]=V3(u,e,t,s,m?[].concat(m,r.message):r.message)}i.shift()}return t}function ZG(i,e,t){return t===void 0&&(t={}),function(r,s,l){try{return Promise.resolve(function(u,n){try{var p=Promise.resolve(i[t.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(m){return l.shouldUseNativeValidation&&X3({},l),{errors:{},values:t.raw?Object.assign({},r):m}})}catch(m){return n(m)}return p&&p.then?p.then(void 0,n):p}(0,function(u){if(function(n){return Array.isArray(n==null?void 0:n.errors)}(u))return{values:{},errors:WG(YG(u.errors,!l.shouldUseNativeValidation&&l.criteriaMode==="all"),l)};throw u}))}catch(u){return Promise.reject(u)}}}var On;(function(i){i.assertEqual=s=>s;function e(s){}i.assertIs=e;function t(s){throw new Error}i.assertNever=t,i.arrayToEnum=s=>{const l={};for(const u of s)l[u]=u;return l},i.getValidEnumValues=s=>{const l=i.objectKeys(s).filter(n=>typeof s[s[n]]!="number"),u={};for(const n of l)u[n]=s[n];return i.objectValues(u)},i.objectValues=s=>i.objectKeys(s).map(function(l){return s[l]}),i.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const l=[];for(const u in s)Object.prototype.hasOwnProperty.call(s,u)&&l.push(u);return l},i.find=(s,l)=>{for(const u of s)if(l(u))return u},i.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,l=" | "){return s.map(u=>typeof u=="string"?`'${u}'`:u).join(l)}i.joinValues=r,i.jsonStringifyReplacer=(s,l)=>typeof l=="bigint"?l.toString():l})(On||(On={}));var Vv;(function(i){i.mergeShapes=(e,t)=>({...e,...t})})(Vv||(Vv={}));const Si=On.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Cl=i=>{switch(typeof i){case"undefined":return Si.undefined;case"string":return Si.string;case"number":return isNaN(i)?Si.nan:Si.number;case"boolean":return Si.boolean;case"function":return Si.function;case"bigint":return Si.bigint;case"symbol":return Si.symbol;case"object":return Array.isArray(i)?Si.array:i===null?Si.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?Si.promise:typeof Map<"u"&&i instanceof Map?Si.map:typeof Set<"u"&&i instanceof Set?Si.set:typeof Date<"u"&&i instanceof Date?Si.date:Si.object;default:return Si.unknown}},Gt=On.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),XG=i=>JSON.stringify(i,null,2).replace(/"([^"]+)":/g,"$1:");class Ha extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(l){return l.message},r={_errors:[]},s=l=>{for(const u of l.issues)if(u.code==="invalid_union")u.unionErrors.map(s);else if(u.code==="invalid_return_type")s(u.returnTypeError);else if(u.code==="invalid_arguments")s(u.argumentsError);else if(u.path.length===0)r._errors.push(t(u));else{let n=r,p=0;for(;p<u.path.length;){const m=u.path[p];p===u.path.length-1?(n[m]=n[m]||{_errors:[]},n[m]._errors.push(t(u))):n[m]=n[m]||{_errors:[]},n=n[m],p++}}};return s(this),r}static assert(e){if(!(e instanceof Ha))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,On.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Ha.create=i=>new Ha(i);const ih=(i,e)=>{let t;switch(i.code){case Gt.invalid_type:i.received===Si.undefined?t="Required":t=`Expected ${i.expected}, received ${i.received}`;break;case Gt.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(i.expected,On.jsonStringifyReplacer)}`;break;case Gt.unrecognized_keys:t=`Unrecognized key(s) in object: ${On.joinValues(i.keys,", ")}`;break;case Gt.invalid_union:t="Invalid input";break;case Gt.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${On.joinValues(i.options)}`;break;case Gt.invalid_enum_value:t=`Invalid enum value. Expected ${On.joinValues(i.options)}, received '${i.received}'`;break;case Gt.invalid_arguments:t="Invalid function arguments";break;case Gt.invalid_return_type:t="Invalid function return type";break;case Gt.invalid_date:t="Invalid date";break;case Gt.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(t=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?t=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?t=`Invalid input: must end with "${i.validation.endsWith}"`:On.assertNever(i.validation):i.validation!=="regex"?t=`Invalid ${i.validation}`:t="Invalid";break;case Gt.too_small:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:t="Invalid input";break;case Gt.too_big:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?t=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:t="Invalid input";break;case Gt.custom:t="Invalid input";break;case Gt.invalid_intersection_types:t="Intersection results could not be merged";break;case Gt.not_multiple_of:t=`Number must be a multiple of ${i.multipleOf}`;break;case Gt.not_finite:t="Number must be finite";break;default:t=e.defaultError,On.assertNever(i)}return{message:t}};let K3=ih;function KG(i){K3=i}function py(){return K3}const fy=i=>{const{data:e,path:t,errorMaps:r,issueData:s}=i,l=[...t,...s.path||[]],u={...s,path:l};if(s.message!==void 0)return{...s,path:l,message:s.message};let n="";const p=r.filter(m=>!!m).slice().reverse();for(const m of p)n=m(u,{data:e,defaultError:n}).message;return{...s,path:l,message:n}},QG=[];function yi(i,e){const t=py(),r=fy({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,t,t===ih?void 0:ih].filter(s=>!!s)});i.common.issues.push(r)}class Zs{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if(s.status==="aborted")return tn;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t){const l=await s.key,u=await s.value;r.push({key:l,value:u})}return Zs.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:l,value:u}=s;if(l.status==="aborted"||u.status==="aborted")return tn;l.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),l.value!=="__proto__"&&(typeof u.value<"u"||s.alwaysSet)&&(r[l.value]=u.value)}return{status:e.value,value:r}}}const tn=Object.freeze({status:"aborted"}),Fd=i=>({status:"dirty",value:i}),ya=i=>({status:"valid",value:i}),Gv=i=>i.status==="aborted",Hv=i=>i.status==="dirty",Pu=i=>i.status==="valid",of=i=>typeof Promise<"u"&&i instanceof Promise;function my(i,e,t,r){if(typeof e=="function"?i!==e||!0:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(i)}function Q3(i,e,t,r,s){if(typeof e=="function"?i!==e||!0:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(i,t),t}var Ri;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ri||(Ri={}));var Rp,Lp;class Ho{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const uC=(i,e)=>{if(Pu(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ha(i.common.issues);return this._error=t,this._error}}};function yn(i){if(!i)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:s}=i;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(u,n)=>{var p,m;const{message:g}=i;return u.code==="invalid_enum_value"?{message:g??n.defaultError}:typeof n.data>"u"?{message:(p=g??r)!==null&&p!==void 0?p:n.defaultError}:u.code!=="invalid_type"?{message:n.defaultError}:{message:(m=g??t)!==null&&m!==void 0?m:n.defaultError}},description:s}}class bn{get description(){return this._def.description}_getType(e){return Cl(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Cl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Zs,ctx:{common:e.parent.common,data:e.data,parsedType:Cl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(of(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const s={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Cl(e)},l=this._parseSync({data:e,path:s.path,parent:s});return uC(s,l)}"~validate"(e){var t,r;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Cl(e)};if(!this["~standard"].async)try{const l=this._parseSync({data:e,path:[],parent:s});return Pu(l)?{value:l.value}:{issues:s.common.issues}}catch(l){!((r=(t=l==null?void 0:l.message)===null||t===void 0?void 0:t.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(l=>Pu(l)?{value:l.value}:{issues:s.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Cl(e)},s=this._parse({data:e,path:r.path,parent:r}),l=await(of(s)?s:Promise.resolve(s));return uC(r,l)}refine(e,t){const r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,l)=>{const u=e(s),n=()=>l.addIssue({code:Gt.custom,...r(s)});return typeof Promise<"u"&&u instanceof Promise?u.then(p=>p?!0:(n(),!1)):u?!0:(n(),!1)})}refinement(e,t){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(e){return new _o({schema:this,typeName:Ji.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Fo.create(this,this._def)}nullable(){return Tc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return go.create(this)}promise(){return rh.create(this,this._def)}or(e){return df.create([this,e],this._def)}and(e){return hf.create(this,e,this._def)}transform(e){return new _o({...yn(this._def),schema:this,typeName:Ji.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new yf({...yn(this._def),innerType:this,defaultValue:t,typeName:Ji.ZodDefault})}brand(){return new T1({typeName:Ji.ZodBranded,type:this,...yn(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new xf({...yn(this._def),innerType:this,catchValue:t,typeName:Ji.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Wf.create(this,e)}readonly(){return vf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const JG=/^c[^\s-]{8,}$/i,eH=/^[0-9a-z]+$/,tH=/^[0-9A-HJKMNP-TV-Z]{26}$/i,iH=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nH=/^[a-z0-9_-]{21}$/i,rH=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,sH=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,aH=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,oH="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let ev;const lH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,cH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,uH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,dH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,hH=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,pH=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,J3="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",fH=new RegExp(`^${J3}$`);function ek(i){let e="[0-5]\\d";i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`);const t=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function mH(i){return new RegExp(`^${ek(i)}$`)}function tk(i){let e=`${J3}T${ek(i)}`;const t=[];return t.push(i.local?"Z?":"Z"),i.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function gH(i,e){return!!((e==="v4"||!e)&&lH.test(i)||(e==="v6"||!e)&&uH.test(i))}function yH(i,e){if(!rH.test(i))return!1;try{const[t]=i.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function xH(i,e){return!!((e==="v4"||!e)&&cH.test(i)||(e==="v6"||!e)&&dH.test(i))}class fo extends bn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Si.string){const l=this._getOrReturnCtx(e);return yi(l,{code:Gt.invalid_type,expected:Si.string,received:l.parsedType}),tn}const r=new Zs;let s;for(const l of this._def.checks)if(l.kind==="min")e.data.length<l.value&&(s=this._getOrReturnCtx(e,s),yi(s,{code:Gt.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),r.dirty());else if(l.kind==="max")e.data.length>l.value&&(s=this._getOrReturnCtx(e,s),yi(s,{code:Gt.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),r.dirty());else if(l.kind==="length"){const u=e.data.length>l.value,n=e.data.length<l.value;(u||n)&&(s=this._getOrReturnCtx(e,s),u?yi(s,{code:Gt.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):n&&yi(s,{code:Gt.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),r.dirty())}else if(l.kind==="email")aH.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"email",code:Gt.invalid_string,message:l.message}),r.dirty());else if(l.kind==="emoji")ev||(ev=new RegExp(oH,"u")),ev.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"emoji",code:Gt.invalid_string,message:l.message}),r.dirty());else if(l.kind==="uuid")iH.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"uuid",code:Gt.invalid_string,message:l.message}),r.dirty());else if(l.kind==="nanoid")nH.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"nanoid",code:Gt.invalid_string,message:l.message}),r.dirty());else if(l.kind==="cuid")JG.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"cuid",code:Gt.invalid_string,message:l.message}),r.dirty());else if(l.kind==="cuid2")eH.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"cuid2",code:Gt.invalid_string,message:l.message}),r.dirty());else if(l.kind==="ulid")tH.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"ulid",code:Gt.invalid_string,message:l.message}),r.dirty());else if(l.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),yi(s,{validation:"url",code:Gt.invalid_string,message:l.message}),r.dirty()}else l.kind==="regex"?(l.regex.lastIndex=0,l.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"regex",code:Gt.invalid_string,message:l.message}),r.dirty())):l.kind==="trim"?e.data=e.data.trim():l.kind==="includes"?e.data.includes(l.value,l.position)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Gt.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),r.dirty()):l.kind==="toLowerCase"?e.data=e.data.toLowerCase():l.kind==="toUpperCase"?e.data=e.data.toUpperCase():l.kind==="startsWith"?e.data.startsWith(l.value)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Gt.invalid_string,validation:{startsWith:l.value},message:l.message}),r.dirty()):l.kind==="endsWith"?e.data.endsWith(l.value)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Gt.invalid_string,validation:{endsWith:l.value},message:l.message}),r.dirty()):l.kind==="datetime"?tk(l).test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Gt.invalid_string,validation:"datetime",message:l.message}),r.dirty()):l.kind==="date"?fH.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Gt.invalid_string,validation:"date",message:l.message}),r.dirty()):l.kind==="time"?mH(l).test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{code:Gt.invalid_string,validation:"time",message:l.message}),r.dirty()):l.kind==="duration"?sH.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"duration",code:Gt.invalid_string,message:l.message}),r.dirty()):l.kind==="ip"?gH(e.data,l.version)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"ip",code:Gt.invalid_string,message:l.message}),r.dirty()):l.kind==="jwt"?yH(e.data,l.alg)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"jwt",code:Gt.invalid_string,message:l.message}),r.dirty()):l.kind==="cidr"?xH(e.data,l.version)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"cidr",code:Gt.invalid_string,message:l.message}),r.dirty()):l.kind==="base64"?hH.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"base64",code:Gt.invalid_string,message:l.message}),r.dirty()):l.kind==="base64url"?pH.test(e.data)||(s=this._getOrReturnCtx(e,s),yi(s,{validation:"base64url",code:Gt.invalid_string,message:l.message}),r.dirty()):On.assertNever(l);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(s=>e.test(s),{validation:t,code:Gt.invalid_string,...Ri.errToObj(r)})}_addCheck(e){return new fo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ri.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ri.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ri.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ri.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ri.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ri.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ri.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ri.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ri.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ri.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ri.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ri.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ri.errToObj(e)})}datetime(e){var t,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...Ri.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ri.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ri.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Ri.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Ri.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Ri.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Ri.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Ri.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Ri.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Ri.errToObj(t)})}nonempty(e){return this.min(1,Ri.errToObj(e))}trim(){return new fo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new fo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new fo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}fo.create=i=>{var e;return new fo({checks:[],typeName:Ji.ZodString,coerce:(e=i==null?void 0:i.coerce)!==null&&e!==void 0?e:!1,...yn(i)})};function vH(i,e){const t=(i.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=t>r?t:r,l=parseInt(i.toFixed(s).replace(".","")),u=parseInt(e.toFixed(s).replace(".",""));return l%u/Math.pow(10,s)}class _c extends bn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Si.number){const l=this._getOrReturnCtx(e);return yi(l,{code:Gt.invalid_type,expected:Si.number,received:l.parsedType}),tn}let r;const s=new Zs;for(const l of this._def.checks)l.kind==="int"?On.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),yi(r,{code:Gt.invalid_type,expected:"integer",received:"float",message:l.message}),s.dirty()):l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(r=this._getOrReturnCtx(e,r),yi(r,{code:Gt.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),s.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(r=this._getOrReturnCtx(e,r),yi(r,{code:Gt.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),s.dirty()):l.kind==="multipleOf"?vH(e.data,l.value)!==0&&(r=this._getOrReturnCtx(e,r),yi(r,{code:Gt.not_multiple_of,multipleOf:l.value,message:l.message}),s.dirty()):l.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),yi(r,{code:Gt.not_finite,message:l.message}),s.dirty()):On.assertNever(l);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ri.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ri.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ri.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ri.toString(t))}setLimit(e,t,r,s){return new _c({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Ri.toString(s)}]})}_addCheck(e){return new _c({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ri.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ri.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ri.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ri.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ri.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ri.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Ri.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ri.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ri.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&On.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}_c.create=i=>new _c({checks:[],typeName:Ji.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...yn(i)});class wc extends bn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Si.bigint)return this._getInvalidInput(e);let r;const s=new Zs;for(const l of this._def.checks)l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(r=this._getOrReturnCtx(e,r),yi(r,{code:Gt.too_small,type:"bigint",minimum:l.value,inclusive:l.inclusive,message:l.message}),s.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(r=this._getOrReturnCtx(e,r),yi(r,{code:Gt.too_big,type:"bigint",maximum:l.value,inclusive:l.inclusive,message:l.message}),s.dirty()):l.kind==="multipleOf"?e.data%l.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),yi(r,{code:Gt.not_multiple_of,multipleOf:l.value,message:l.message}),s.dirty()):On.assertNever(l);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return yi(t,{code:Gt.invalid_type,expected:Si.bigint,received:t.parsedType}),tn}gte(e,t){return this.setLimit("min",e,!0,Ri.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ri.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ri.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ri.toString(t))}setLimit(e,t,r,s){return new wc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Ri.toString(s)}]})}_addCheck(e){return new wc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ri.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ri.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ri.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ri.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ri.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}wc.create=i=>{var e;return new wc({checks:[],typeName:Ji.ZodBigInt,coerce:(e=i==null?void 0:i.coerce)!==null&&e!==void 0?e:!1,...yn(i)})};class lf extends bn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Si.boolean){const r=this._getOrReturnCtx(e);return yi(r,{code:Gt.invalid_type,expected:Si.boolean,received:r.parsedType}),tn}return ya(e.data)}}lf.create=i=>new lf({typeName:Ji.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...yn(i)});class Iu extends bn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Si.date){const l=this._getOrReturnCtx(e);return yi(l,{code:Gt.invalid_type,expected:Si.date,received:l.parsedType}),tn}if(isNaN(e.data.getTime())){const l=this._getOrReturnCtx(e);return yi(l,{code:Gt.invalid_date}),tn}const r=new Zs;let s;for(const l of this._def.checks)l.kind==="min"?e.data.getTime()<l.value&&(s=this._getOrReturnCtx(e,s),yi(s,{code:Gt.too_small,message:l.message,inclusive:!0,exact:!1,minimum:l.value,type:"date"}),r.dirty()):l.kind==="max"?e.data.getTime()>l.value&&(s=this._getOrReturnCtx(e,s),yi(s,{code:Gt.too_big,message:l.message,inclusive:!0,exact:!1,maximum:l.value,type:"date"}),r.dirty()):On.assertNever(l);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Iu({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Ri.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Ri.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Iu.create=i=>new Iu({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:Ji.ZodDate,...yn(i)});class gy extends bn{_parse(e){if(this._getType(e)!==Si.symbol){const r=this._getOrReturnCtx(e);return yi(r,{code:Gt.invalid_type,expected:Si.symbol,received:r.parsedType}),tn}return ya(e.data)}}gy.create=i=>new gy({typeName:Ji.ZodSymbol,...yn(i)});class cf extends bn{_parse(e){if(this._getType(e)!==Si.undefined){const r=this._getOrReturnCtx(e);return yi(r,{code:Gt.invalid_type,expected:Si.undefined,received:r.parsedType}),tn}return ya(e.data)}}cf.create=i=>new cf({typeName:Ji.ZodUndefined,...yn(i)});class uf extends bn{_parse(e){if(this._getType(e)!==Si.null){const r=this._getOrReturnCtx(e);return yi(r,{code:Gt.invalid_type,expected:Si.null,received:r.parsedType}),tn}return ya(e.data)}}uf.create=i=>new uf({typeName:Ji.ZodNull,...yn(i)});class nh extends bn{constructor(){super(...arguments),this._any=!0}_parse(e){return ya(e.data)}}nh.create=i=>new nh({typeName:Ji.ZodAny,...yn(i)});class wu extends bn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ya(e.data)}}wu.create=i=>new wu({typeName:Ji.ZodUnknown,...yn(i)});class Ml extends bn{_parse(e){const t=this._getOrReturnCtx(e);return yi(t,{code:Gt.invalid_type,expected:Si.never,received:t.parsedType}),tn}}Ml.create=i=>new Ml({typeName:Ji.ZodNever,...yn(i)});class yy extends bn{_parse(e){if(this._getType(e)!==Si.undefined){const r=this._getOrReturnCtx(e);return yi(r,{code:Gt.invalid_type,expected:Si.void,received:r.parsedType}),tn}return ya(e.data)}}yy.create=i=>new yy({typeName:Ji.ZodVoid,...yn(i)});class go extends bn{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==Si.array)return yi(t,{code:Gt.invalid_type,expected:Si.array,received:t.parsedType}),tn;if(s.exactLength!==null){const u=t.data.length>s.exactLength.value,n=t.data.length<s.exactLength.value;(u||n)&&(yi(t,{code:u?Gt.too_big:Gt.too_small,minimum:n?s.exactLength.value:void 0,maximum:u?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(yi(t,{code:Gt.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(yi(t,{code:Gt.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((u,n)=>s.type._parseAsync(new Ho(t,u,t.path,n)))).then(u=>Zs.mergeArray(r,u));const l=[...t.data].map((u,n)=>s.type._parseSync(new Ho(t,u,t.path,n)));return Zs.mergeArray(r,l)}get element(){return this._def.type}min(e,t){return new go({...this._def,minLength:{value:e,message:Ri.toString(t)}})}max(e,t){return new go({...this._def,maxLength:{value:e,message:Ri.toString(t)}})}length(e,t){return new go({...this._def,exactLength:{value:e,message:Ri.toString(t)}})}nonempty(e){return this.min(1,e)}}go.create=(i,e)=>new go({type:i,minLength:null,maxLength:null,exactLength:null,typeName:Ji.ZodArray,...yn(e)});function jd(i){if(i instanceof Ir){const e={};for(const t in i.shape){const r=i.shape[t];e[t]=Fo.create(jd(r))}return new Ir({...i._def,shape:()=>e})}else return i instanceof go?new go({...i._def,type:jd(i.element)}):i instanceof Fo?Fo.create(jd(i.unwrap())):i instanceof Tc?Tc.create(jd(i.unwrap())):i instanceof Wo?Wo.create(i.items.map(e=>jd(e))):i}class Ir extends bn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=On.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Si.object){const m=this._getOrReturnCtx(e);return yi(m,{code:Gt.invalid_type,expected:Si.object,received:m.parsedType}),tn}const{status:r,ctx:s}=this._processInputParams(e),{shape:l,keys:u}=this._getCached(),n=[];if(!(this._def.catchall instanceof Ml&&this._def.unknownKeys==="strip"))for(const m in s.data)u.includes(m)||n.push(m);const p=[];for(const m of u){const g=l[m],v=s.data[m];p.push({key:{status:"valid",value:m},value:g._parse(new Ho(s,v,s.path,m)),alwaysSet:m in s.data})}if(this._def.catchall instanceof Ml){const m=this._def.unknownKeys;if(m==="passthrough")for(const g of n)p.push({key:{status:"valid",value:g},value:{status:"valid",value:s.data[g]}});else if(m==="strict")n.length>0&&(yi(s,{code:Gt.unrecognized_keys,keys:n}),r.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const m=this._def.catchall;for(const g of n){const v=s.data[g];p.push({key:{status:"valid",value:g},value:m._parse(new Ho(s,v,s.path,g)),alwaysSet:g in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const m=[];for(const g of p){const v=await g.key,y=await g.value;m.push({key:v,value:y,alwaysSet:g.alwaysSet})}return m}).then(m=>Zs.mergeObjectSync(r,m)):Zs.mergeObjectSync(r,p)}get shape(){return this._def.shape()}strict(e){return Ri.errToObj,new Ir({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var s,l,u,n;const p=(u=(l=(s=this._def).errorMap)===null||l===void 0?void 0:l.call(s,t,r).message)!==null&&u!==void 0?u:r.defaultError;return t.code==="unrecognized_keys"?{message:(n=Ri.errToObj(e).message)!==null&&n!==void 0?n:p}:{message:p}}}:{}})}strip(){return new Ir({...this._def,unknownKeys:"strip"})}passthrough(){return new Ir({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ir({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ir({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ji.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Ir({...this._def,catchall:e})}pick(e){const t={};return On.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new Ir({...this._def,shape:()=>t})}omit(e){const t={};return On.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new Ir({...this._def,shape:()=>t})}deepPartial(){return jd(this)}partial(e){const t={};return On.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}),new Ir({...this._def,shape:()=>t})}required(e){const t={};return On.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let l=this.shape[r];for(;l instanceof Fo;)l=l._def.innerType;t[r]=l}}),new Ir({...this._def,shape:()=>t})}keyof(){return ik(On.objectKeys(this.shape))}}Ir.create=(i,e)=>new Ir({shape:()=>i,unknownKeys:"strip",catchall:Ml.create(),typeName:Ji.ZodObject,...yn(e)});Ir.strictCreate=(i,e)=>new Ir({shape:()=>i,unknownKeys:"strict",catchall:Ml.create(),typeName:Ji.ZodObject,...yn(e)});Ir.lazycreate=(i,e)=>new Ir({shape:i,unknownKeys:"strip",catchall:Ml.create(),typeName:Ji.ZodObject,...yn(e)});class df extends bn{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function s(l){for(const n of l)if(n.result.status==="valid")return n.result;for(const n of l)if(n.result.status==="dirty")return t.common.issues.push(...n.ctx.common.issues),n.result;const u=l.map(n=>new Ha(n.ctx.common.issues));return yi(t,{code:Gt.invalid_union,unionErrors:u}),tn}if(t.common.async)return Promise.all(r.map(async l=>{const u={...t,common:{...t.common,issues:[]},parent:null};return{result:await l._parseAsync({data:t.data,path:t.path,parent:u}),ctx:u}})).then(s);{let l;const u=[];for(const p of r){const m={...t,common:{...t.common,issues:[]},parent:null},g=p._parseSync({data:t.data,path:t.path,parent:m});if(g.status==="valid")return g;g.status==="dirty"&&!l&&(l={result:g,ctx:m}),m.common.issues.length&&u.push(m.common.issues)}if(l)return t.common.issues.push(...l.ctx.common.issues),l.result;const n=u.map(p=>new Ha(p));return yi(t,{code:Gt.invalid_union,unionErrors:n}),tn}}get options(){return this._def.options}}df.create=(i,e)=>new df({options:i,typeName:Ji.ZodUnion,...yn(e)});const vl=i=>i instanceof ff?vl(i.schema):i instanceof _o?vl(i.innerType()):i instanceof mf?[i.value]:i instanceof Cc?i.options:i instanceof gf?On.objectValues(i.enum):i instanceof yf?vl(i._def.innerType):i instanceof cf?[void 0]:i instanceof uf?[null]:i instanceof Fo?[void 0,...vl(i.unwrap())]:i instanceof Tc?[null,...vl(i.unwrap())]:i instanceof T1||i instanceof vf?vl(i.unwrap()):i instanceof xf?vl(i._def.innerType):[];class rx extends bn{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Si.object)return yi(t,{code:Gt.invalid_type,expected:Si.object,received:t.parsedType}),tn;const r=this.discriminator,s=t.data[r],l=this.optionsMap.get(s);return l?t.common.async?l._parseAsync({data:t.data,path:t.path,parent:t}):l._parseSync({data:t.data,path:t.path,parent:t}):(yi(t,{code:Gt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),tn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const s=new Map;for(const l of t){const u=vl(l.shape[e]);if(!u.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const n of u){if(s.has(n))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);s.set(n,l)}}return new rx({typeName:Ji.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...yn(r)})}}function Wv(i,e){const t=Cl(i),r=Cl(e);if(i===e)return{valid:!0,data:i};if(t===Si.object&&r===Si.object){const s=On.objectKeys(e),l=On.objectKeys(i).filter(n=>s.indexOf(n)!==-1),u={...i,...e};for(const n of l){const p=Wv(i[n],e[n]);if(!p.valid)return{valid:!1};u[n]=p.data}return{valid:!0,data:u}}else if(t===Si.array&&r===Si.array){if(i.length!==e.length)return{valid:!1};const s=[];for(let l=0;l<i.length;l++){const u=i[l],n=e[l],p=Wv(u,n);if(!p.valid)return{valid:!1};s.push(p.data)}return{valid:!0,data:s}}else return t===Si.date&&r===Si.date&&+i==+e?{valid:!0,data:i}:{valid:!1}}class hf extends bn{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(l,u)=>{if(Gv(l)||Gv(u))return tn;const n=Wv(l.value,u.value);return n.valid?((Hv(l)||Hv(u))&&t.dirty(),{status:t.value,value:n.data}):(yi(r,{code:Gt.invalid_intersection_types}),tn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([l,u])=>s(l,u)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}hf.create=(i,e,t)=>new hf({left:i,right:e,typeName:Ji.ZodIntersection,...yn(t)});class Wo extends bn{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Si.array)return yi(r,{code:Gt.invalid_type,expected:Si.array,received:r.parsedType}),tn;if(r.data.length<this._def.items.length)return yi(r,{code:Gt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),tn;!this._def.rest&&r.data.length>this._def.items.length&&(yi(r,{code:Gt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const l=[...r.data].map((u,n)=>{const p=this._def.items[n]||this._def.rest;return p?p._parse(new Ho(r,u,r.path,n)):null}).filter(u=>!!u);return r.common.async?Promise.all(l).then(u=>Zs.mergeArray(t,u)):Zs.mergeArray(t,l)}get items(){return this._def.items}rest(e){return new Wo({...this._def,rest:e})}}Wo.create=(i,e)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Wo({items:i,typeName:Ji.ZodTuple,rest:null,...yn(e)})};class pf extends bn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Si.object)return yi(r,{code:Gt.invalid_type,expected:Si.object,received:r.parsedType}),tn;const s=[],l=this._def.keyType,u=this._def.valueType;for(const n in r.data)s.push({key:l._parse(new Ho(r,n,r.path,n)),value:u._parse(new Ho(r,r.data[n],r.path,n)),alwaysSet:n in r.data});return r.common.async?Zs.mergeObjectAsync(t,s):Zs.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof bn?new pf({keyType:e,valueType:t,typeName:Ji.ZodRecord,...yn(r)}):new pf({keyType:fo.create(),valueType:e,typeName:Ji.ZodRecord,...yn(t)})}}class xy extends bn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Si.map)return yi(r,{code:Gt.invalid_type,expected:Si.map,received:r.parsedType}),tn;const s=this._def.keyType,l=this._def.valueType,u=[...r.data.entries()].map(([n,p],m)=>({key:s._parse(new Ho(r,n,r.path,[m,"key"])),value:l._parse(new Ho(r,p,r.path,[m,"value"]))}));if(r.common.async){const n=new Map;return Promise.resolve().then(async()=>{for(const p of u){const m=await p.key,g=await p.value;if(m.status==="aborted"||g.status==="aborted")return tn;(m.status==="dirty"||g.status==="dirty")&&t.dirty(),n.set(m.value,g.value)}return{status:t.value,value:n}})}else{const n=new Map;for(const p of u){const m=p.key,g=p.value;if(m.status==="aborted"||g.status==="aborted")return tn;(m.status==="dirty"||g.status==="dirty")&&t.dirty(),n.set(m.value,g.value)}return{status:t.value,value:n}}}}xy.create=(i,e,t)=>new xy({valueType:e,keyType:i,typeName:Ji.ZodMap,...yn(t)});class Du extends bn{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Si.set)return yi(r,{code:Gt.invalid_type,expected:Si.set,received:r.parsedType}),tn;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(yi(r,{code:Gt.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(yi(r,{code:Gt.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const l=this._def.valueType;function u(p){const m=new Set;for(const g of p){if(g.status==="aborted")return tn;g.status==="dirty"&&t.dirty(),m.add(g.value)}return{status:t.value,value:m}}const n=[...r.data.values()].map((p,m)=>l._parse(new Ho(r,p,r.path,m)));return r.common.async?Promise.all(n).then(p=>u(p)):u(n)}min(e,t){return new Du({...this._def,minSize:{value:e,message:Ri.toString(t)}})}max(e,t){return new Du({...this._def,maxSize:{value:e,message:Ri.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Du.create=(i,e)=>new Du({valueType:i,minSize:null,maxSize:null,typeName:Ji.ZodSet,...yn(e)});class Wd extends bn{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Si.function)return yi(t,{code:Gt.invalid_type,expected:Si.function,received:t.parsedType}),tn;function r(n,p){return fy({data:n,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,py(),ih].filter(m=>!!m),issueData:{code:Gt.invalid_arguments,argumentsError:p}})}function s(n,p){return fy({data:n,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,py(),ih].filter(m=>!!m),issueData:{code:Gt.invalid_return_type,returnTypeError:p}})}const l={errorMap:t.common.contextualErrorMap},u=t.data;if(this._def.returns instanceof rh){const n=this;return ya(async function(...p){const m=new Ha([]),g=await n._def.args.parseAsync(p,l).catch(C=>{throw m.addIssue(r(p,C)),m}),v=await Reflect.apply(u,this,g);return await n._def.returns._def.type.parseAsync(v,l).catch(C=>{throw m.addIssue(s(v,C)),m})})}else{const n=this;return ya(function(...p){const m=n._def.args.safeParse(p,l);if(!m.success)throw new Ha([r(p,m.error)]);const g=Reflect.apply(u,this,m.data),v=n._def.returns.safeParse(g,l);if(!v.success)throw new Ha([s(g,v.error)]);return v.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Wd({...this._def,args:Wo.create(e).rest(wu.create())})}returns(e){return new Wd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new Wd({args:e||Wo.create([]).rest(wu.create()),returns:t||wu.create(),typeName:Ji.ZodFunction,...yn(r)})}}class ff extends bn{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ff.create=(i,e)=>new ff({getter:i,typeName:Ji.ZodLazy,...yn(e)});class mf extends bn{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return yi(t,{received:t.data,code:Gt.invalid_literal,expected:this._def.value}),tn}return{status:"valid",value:e.data}}get value(){return this._def.value}}mf.create=(i,e)=>new mf({value:i,typeName:Ji.ZodLiteral,...yn(e)});function ik(i,e){return new Cc({values:i,typeName:Ji.ZodEnum,...yn(e)})}class Cc extends bn{constructor(){super(...arguments),Rp.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return yi(t,{expected:On.joinValues(r),received:t.parsedType,code:Gt.invalid_type}),tn}if(my(this,Rp)||Q3(this,Rp,new Set(this._def.values)),!my(this,Rp).has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return yi(t,{received:t.data,code:Gt.invalid_enum_value,options:r}),tn}return ya(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Cc.create(e,{...this._def,...t})}exclude(e,t=this._def){return Cc.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}Rp=new WeakMap;Cc.create=ik;class gf extends bn{constructor(){super(...arguments),Lp.set(this,void 0)}_parse(e){const t=On.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Si.string&&r.parsedType!==Si.number){const s=On.objectValues(t);return yi(r,{expected:On.joinValues(s),received:r.parsedType,code:Gt.invalid_type}),tn}if(my(this,Lp)||Q3(this,Lp,new Set(On.getValidEnumValues(this._def.values))),!my(this,Lp).has(e.data)){const s=On.objectValues(t);return yi(r,{received:r.data,code:Gt.invalid_enum_value,options:s}),tn}return ya(e.data)}get enum(){return this._def.values}}Lp=new WeakMap;gf.create=(i,e)=>new gf({values:i,typeName:Ji.ZodNativeEnum,...yn(e)});class rh extends bn{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Si.promise&&t.common.async===!1)return yi(t,{code:Gt.invalid_type,expected:Si.promise,received:t.parsedType}),tn;const r=t.parsedType===Si.promise?t.data:Promise.resolve(t.data);return ya(r.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}rh.create=(i,e)=>new rh({type:i,typeName:Ji.ZodPromise,...yn(e)});class _o extends bn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ji.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,l={addIssue:u=>{yi(r,u),u.fatal?t.abort():t.dirty()},get path(){return r.path}};if(l.addIssue=l.addIssue.bind(l),s.type==="preprocess"){const u=s.transform(r.data,l);if(r.common.async)return Promise.resolve(u).then(async n=>{if(t.value==="aborted")return tn;const p=await this._def.schema._parseAsync({data:n,path:r.path,parent:r});return p.status==="aborted"?tn:p.status==="dirty"||t.value==="dirty"?Fd(p.value):p});{if(t.value==="aborted")return tn;const n=this._def.schema._parseSync({data:u,path:r.path,parent:r});return n.status==="aborted"?tn:n.status==="dirty"||t.value==="dirty"?Fd(n.value):n}}if(s.type==="refinement"){const u=n=>{const p=s.refinement(n,l);if(r.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return n};if(r.common.async===!1){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return n.status==="aborted"?tn:(n.status==="dirty"&&t.dirty(),u(n.value),{status:t.value,value:n.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(n=>n.status==="aborted"?tn:(n.status==="dirty"&&t.dirty(),u(n.value).then(()=>({status:t.value,value:n.value}))))}if(s.type==="transform")if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Pu(u))return u;const n=s.transform(u.value,l);if(n instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:n}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>Pu(u)?Promise.resolve(s.transform(u.value,l)).then(n=>({status:t.value,value:n})):u);On.assertNever(s)}}_o.create=(i,e,t)=>new _o({schema:i,typeName:Ji.ZodEffects,effect:e,...yn(t)});_o.createWithPreprocess=(i,e,t)=>new _o({schema:e,effect:{type:"preprocess",transform:i},typeName:Ji.ZodEffects,...yn(t)});class Fo extends bn{_parse(e){return this._getType(e)===Si.undefined?ya(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Fo.create=(i,e)=>new Fo({innerType:i,typeName:Ji.ZodOptional,...yn(e)});class Tc extends bn{_parse(e){return this._getType(e)===Si.null?ya(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Tc.create=(i,e)=>new Tc({innerType:i,typeName:Ji.ZodNullable,...yn(e)});class yf extends bn{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===Si.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}yf.create=(i,e)=>new yf({innerType:i,typeName:Ji.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...yn(e)});class xf extends bn{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return of(s)?s.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new Ha(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ha(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}xf.create=(i,e)=>new xf({innerType:i,typeName:Ji.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...yn(e)});class vy extends bn{_parse(e){if(this._getType(e)!==Si.nan){const r=this._getOrReturnCtx(e);return yi(r,{code:Gt.invalid_type,expected:Si.nan,received:r.parsedType}),tn}return{status:"valid",value:e.data}}}vy.create=i=>new vy({typeName:Ji.ZodNaN,...yn(i)});const bH=Symbol("zod_brand");class T1 extends bn{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Wf extends bn{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const l=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?tn:l.status==="dirty"?(t.dirty(),Fd(l.value)):this._def.out._parseAsync({data:l.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?tn:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,t){return new Wf({in:e,out:t,typeName:Ji.ZodPipeline})}}class vf extends bn{_parse(e){const t=this._def.innerType._parse(e),r=s=>(Pu(s)&&(s.value=Object.freeze(s.value)),s);return of(t)?t.then(s=>r(s)):r(t)}unwrap(){return this._def.innerType}}vf.create=(i,e)=>new vf({innerType:i,typeName:Ji.ZodReadonly,...yn(e)});function dC(i,e){const t=typeof i=="function"?i(e):typeof i=="string"?{message:i}:i;return typeof t=="string"?{message:t}:t}function nk(i,e={},t){return i?nh.create().superRefine((r,s)=>{var l,u;const n=i(r);if(n instanceof Promise)return n.then(p=>{var m,g;if(!p){const v=dC(e,r),y=(g=(m=v.fatal)!==null&&m!==void 0?m:t)!==null&&g!==void 0?g:!0;s.addIssue({code:"custom",...v,fatal:y})}});if(!n){const p=dC(e,r),m=(u=(l=p.fatal)!==null&&l!==void 0?l:t)!==null&&u!==void 0?u:!0;s.addIssue({code:"custom",...p,fatal:m})}}):nh.create()}const _H={object:Ir.lazycreate};var Ji;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(Ji||(Ji={}));const wH=(i,e={message:`Input not instance of ${i.name}`})=>nk(t=>t instanceof i,e),rk=fo.create,sk=_c.create,CH=vy.create,TH=wc.create,ak=lf.create,SH=Iu.create,EH=gy.create,kH=cf.create,AH=uf.create,MH=nh.create,PH=wu.create,IH=Ml.create,DH=yy.create,RH=go.create,LH=Ir.create,zH=Ir.strictCreate,NH=df.create,OH=rx.create,jH=hf.create,FH=Wo.create,BH=pf.create,$H=xy.create,UH=Du.create,VH=Wd.create,GH=ff.create,HH=mf.create,WH=Cc.create,qH=gf.create,YH=rh.create,hC=_o.create,ZH=Fo.create,XH=Tc.create,KH=_o.createWithPreprocess,QH=Wf.create,JH=()=>rk().optional(),eW=()=>sk().optional(),tW=()=>ak().optional(),iW={string:i=>fo.create({...i,coerce:!0}),number:i=>_c.create({...i,coerce:!0}),boolean:i=>lf.create({...i,coerce:!0}),bigint:i=>wc.create({...i,coerce:!0}),date:i=>Iu.create({...i,coerce:!0})},nW=tn;var pC=Object.freeze({__proto__:null,defaultErrorMap:ih,setErrorMap:KG,getErrorMap:py,makeIssue:fy,EMPTY_PATH:QG,addIssueToContext:yi,ParseStatus:Zs,INVALID:tn,DIRTY:Fd,OK:ya,isAborted:Gv,isDirty:Hv,isValid:Pu,isAsync:of,get util(){return On},get objectUtil(){return Vv},ZodParsedType:Si,getParsedType:Cl,ZodType:bn,datetimeRegex:tk,ZodString:fo,ZodNumber:_c,ZodBigInt:wc,ZodBoolean:lf,ZodDate:Iu,ZodSymbol:gy,ZodUndefined:cf,ZodNull:uf,ZodAny:nh,ZodUnknown:wu,ZodNever:Ml,ZodVoid:yy,ZodArray:go,ZodObject:Ir,ZodUnion:df,ZodDiscriminatedUnion:rx,ZodIntersection:hf,ZodTuple:Wo,ZodRecord:pf,ZodMap:xy,ZodSet:Du,ZodFunction:Wd,ZodLazy:ff,ZodLiteral:mf,ZodEnum:Cc,ZodNativeEnum:gf,ZodPromise:rh,ZodEffects:_o,ZodTransformer:_o,ZodOptional:Fo,ZodNullable:Tc,ZodDefault:yf,ZodCatch:xf,ZodNaN:vy,BRAND:bH,ZodBranded:T1,ZodPipeline:Wf,ZodReadonly:vf,custom:nk,Schema:bn,ZodSchema:bn,late:_H,get ZodFirstPartyTypeKind(){return Ji},coerce:iW,any:MH,array:RH,bigint:TH,boolean:ak,date:SH,discriminatedUnion:OH,effect:hC,enum:WH,function:VH,instanceof:wH,intersection:jH,lazy:GH,literal:HH,map:$H,nan:CH,nativeEnum:qH,never:IH,null:AH,nullable:XH,number:sk,object:LH,oboolean:tW,onumber:eW,optional:ZH,ostring:JH,pipeline:QH,preprocess:KH,promise:YH,record:BH,set:UH,strictObject:zH,string:rk,symbol:EH,transformer:hC,tuple:FH,undefined:kH,union:NH,unknown:PH,void:DH,NEVER:nW,ZodIssueCode:Gt,quotelessJson:XG,ZodError:Ha});const rW=pC.object({url:pC.string().url({message:it.t("Invalid URL format")}).min(1,{message:it.t("URL is required")}).refine(i=>i.endsWith("/**"),{message:it.t("URL must end with a double wildcard (/**)")})}),ok=({onClose:i,onSubmit:e,isLoading:t,initialUrl:r="",modalTitle:s,submitButtonText:l})=>{const{control:u,handleSubmit:n,formState:{errors:p}}=HG({resolver:ZG(rW),defaultValues:{url:r}}),m=g=>e(g);return he.jsx(Cu,{onClose:i,dataTest:"route-form-modal",children:he.jsxs("form",{onSubmit:n(m),children:[he.jsx(qv,{children:s}),he.jsxs(wy,{children:[he.jsx(fM,{htmlFor:"url",children:it.t("CHAP Core URL")}),he.jsx(IG,{name:"url",control:u,render:({field:g})=>he.jsx(fC,{...g,type:"text",error:!!p.url,onChange:v=>g.onChange(v.value),dataTest:"route-url-input"})}),p.url?he.jsx("p",{className:Cr.mutedText,children:p.url.message}):null]}),he.jsx(Yv,{children:he.jsxs(Zv,{children:[he.jsx(Gn,{onClick:i,secondary:!0,disabled:t,dataTest:"cancel-route-button",children:it.t("Cancel")}),he.jsx(Gn,{type:"submit",primary:!0,loading:t,disabled:t,dataTest:"submit-route-button",children:l})]})})]})})},sW=()=>{const[i,e]=Ue.useState(!1),{saveRoute:t,isSaving:r}=N3({onSuccess:()=>{e(!1)}}),s=n=>{t({url:n.url})},l=()=>{e(!0)},u=()=>{e(!1)};return he.jsxs(he.Fragment,{children:[he.jsxs("div",{children:[he.jsx("p",{className:Cr.mutedText,children:it.t("No route found.")}),he.jsx(Gn,{onClick:l,icon:he.jsx(Qv,{}),small:!0,loading:r,dataTest:"add-route-button",children:it.t("Add route")})]}),i&&he.jsx(ok,{onClose:u,onSubmit:s,isLoading:r,initialUrl:"",modalTitle:it.t("Add route"),submitButtonText:it.t("Add")})]})},aW=({route:i,onClose:e})=>{const{saveRoute:t,isSaving:r}=N3({onSuccess:()=>{e()}}),s=l=>{t({id:i.id,url:l.url})};return he.jsx(ok,{onClose:e,onSubmit:s,isLoading:r,initialUrl:i.url,modalTitle:it.t("Edit route"),submitButtonText:it.t("Save")})},oW=({id:i,onSuccess:e,onError:t})=>{const r=ah(),s=_y(),{show:l}=Gp(it.t("Error deleting route"),{critical:!0}),{show:u}=Gp(it.t("Route deleted successfully"),{success:!0}),n={resource:"routes",id:i,type:"delete"},{mutate:p,isLoading:m}=JT(()=>r.mutate(n),{onSuccess:()=>{u(),s.invalidateQueries({queryKey:["routes"]}),e==null||e()},onError:g=>{l(),console.error("Error deleting route:",g),t==null||t(g)}});return{deleteRoute:p,isDeleting:m}},lW=({routeId:i,onClose:e})=>{const{deleteRoute:t,isDeleting:r}=oW({id:i,onSuccess:()=>{e()}});return he.jsxs(Cu,{onClose:e,children:[he.jsx(qv,{children:it.t("Delete route")}),he.jsx(wy,{children:he.jsx("p",{children:it.t("Are you sure you want to delete this route?")})}),he.jsx(Yv,{children:he.jsxs(Zv,{children:[he.jsx(Gn,{onClick:e,secondary:!0,children:it.t("Cancel")}),he.jsx(Gn,{onClick:()=>t(),destructive:!0,loading:r,children:it.t("Delete")})]})})]})},cW=({route:i})=>{const e=_y(),[t,r]=Ue.useState(!1),[s,l]=Ue.useState(!1),[u,n]=Ue.useState(!1);return he.jsxs(he.Fragment,{children:[he.jsx(nb,{icon:he.jsx(MC,{}),small:!0,onClick:()=>r(!0),component:he.jsxs(yC,{children:[he.jsx(Tu,{dense:!0,onClick:()=>n(!0),label:it.t("Edit"),icon:he.jsx(SC,{})}),he.jsx(Tu,{dense:!0,onClick:()=>l(!0),label:it.t("Delete"),icon:he.jsx(tb,{}),destructive:!0})]}),children:it.t("Sharing")}),t&&he.jsx(BS,{id:i.id,type:"route",onClose:()=>{e.invalidateQueries({queryKey:["routes"]}),r(!1)}}),s&&he.jsx(lW,{routeId:i.id,onClose:()=>l(!1)}),u&&he.jsx(aW,{route:i,onClose:()=>n(!1)})]})},uW=({route:i})=>Ue.useMemo(()=>!!i.sharing.public.startsWith("rw"),[i.sharing.public])?he.jsx(Bo,{warning:!0,title:it.t("Public access"),children:it.t('Your route is public and can be accessed by anyone. This can potentially expose sensitive data. If you want to restrict access, click the "Sharing" button and remove access for "All users".')}):null,dW=()=>{const i="id,username,displayName,authorities",{data:e,isLoading:t,error:r}=x3({queryKey:["me",i],query:{resource:"me",params:{fields:i}},staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return{user:e,isLoading:t,error:r}},hW=({authority:i})=>{const{user:e,isLoading:t,error:r}=dW(),s=Ue.useMemo(()=>{if(e)return e.authorities.includes("ALL")},[e]);return{hasAuthority:Ue.useMemo(()=>{if(e)return s?!0:Array.isArray(i)?i.some(u=>e.authorities.includes(u)):e.authorities.includes(i)},[e,i,s]),isSuperUser:s,isLoading:t,error:r}},Ap=({children:i})=>he.jsx(Cy,{children:he.jsxs("div",{className:Cr.container,children:[he.jsx("div",{className:Cr.header,children:he.jsx("h2",{children:it.t("Route settings")})}),i]})}),pW="F_ROUTE_PRIVATE_ADD",fW="F_ROUTE_PUBLIC_ADD",mW=()=>{const{route:i,isLoading:e,error:t}=Gf(),{hasAuthority:r,isLoading:s}=hW({authority:[pW,fW]});return Ue.useEffect(()=>{t&&console.error(t)},[t]),e||s?he.jsx(Ap,{children:he.jsx("div",{className:Cr.loaderContainer,children:he.jsx(qo,{})})}):t?he.jsx(Ap,{children:he.jsxs("div",{className:Cr.loaderContainer,children:[he.jsx("p",{className:Cr.mutedText,children:it.t("There was an error loading the route settings. Please try to reload the page.")}),he.jsx("p",{className:Cr.mutedText,children:it.t("If the problem persists, please contact your system administrator.")})]})}):r?i?he.jsx(Ap,{children:he.jsxs("div",{className:Cr.settingsContainer,children:[he.jsx(uW,{route:i}),he.jsxs("div",{className:Cr.routeInfo,children:[he.jsxs("div",{className:Cr.routeInfoHeader,children:[he.jsx("h3",{children:it.t("Route configuration")}),he.jsx(cW,{route:i})]}),he.jsxs("div",{className:Cr.infoGrid,children:[he.jsx("span",{className:Cr.label,children:it.t("Name")}),he.jsx("span",{className:Cr.value,children:i.displayName}),he.jsx("span",{className:Cr.label,children:it.t("Code")}),he.jsx("span",{className:Cr.value,children:i.code}),he.jsx("span",{className:Cr.label,children:it.t("URL")}),he.jsx("span",{className:Cr.value,children:i.url}),i.authorities.length>0?he.jsxs(he.Fragment,{children:[he.jsx("span",{className:Cr.label,children:it.t("Authorities")}),he.jsx("div",{className:Cr.authorities,children:i.authorities.map((l,u)=>he.jsx("span",{className:Cr.authority,children:l},u))})]}):null]})]})]})}):he.jsx(Ap,{children:he.jsx(sW,{})}):he.jsx(Ap,{children:he.jsxs("div",{className:Cr.loaderContainer,children:[he.jsx("p",{className:Cr.mutedText,children:it.t("You do not have permission to add or modify routes.")}),he.jsx("p",{className:Cr.mutedText,children:it.t("If you think this is an error, please contact your system administrator.")})]})})},gW="_container_18e5w_1",yW="_header_18e5w_5",xW="_loaderContainer_18e5w_16",vW="_mutedText_18e5w_26",bW="_info_18e5w_31",_W="_infoHeader_18e5w_38",wW="_settingsContainer_18e5w_52",CW="_infoGrid_18e5w_58",TW="_label_18e5w_65",SW="_value_18e5w_70",bs={container:gW,header:yW,loaderContainer:xW,mutedText:vW,info:bW,infoHeader:_W,settingsContainer:wW,infoGrid:CW,label:TW,value:SW},EW=({route:i})=>{const{data:e,error:t,isLoading:r}=Sy({queryKey:["systemInfo",i.url],queryFn:()=>DE.systemInfoSystemInfoGet()});return{status:e,error:t,isLoading:r}},kW=()=>{const{route:i}=Gf(),{data:e,isLoading:t,error:r}=Sy({queryKey:["chap-status",i==null?void 0:i.url],enabled:!!(i!=null&&i.url),queryFn:()=>fetch(`${i==null?void 0:i.url.replace("/**","")}/system-info`).then(s=>s.json()),staleTime:1/0,cacheTime:1/0,refetchOnWindowFocus:!1});return t?null:r||!e?he.jsx(Bo,{title:it.t("Your server might not be secure"),children:he.jsx("span",{className:bs.mutedText,children:it.t("CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access on your server firewall.")})}):he.jsx(he.Fragment,{children:he.jsx(Bo,{error:!0,title:it.t("Your server is not secure"),children:he.jsx("span",{className:bs.mutedText,children:it.t("CHAP currently does not have it's own authentication service. Make sure to secure it by blocking public access on your server firewall.")})})})},tv=({children:i})=>he.jsx(Cy,{children:he.jsxs("div",{className:bs.container,children:[he.jsx("div",{className:bs.header,children:he.jsx("h2",{children:it.t("CHAP settings")})}),i]})}),AW=({route:i})=>{const{status:e,error:t,isLoading:r}=EW({route:i});return Ue.useEffect(()=>{t&&console.error(t)},[t]),r?he.jsx(tv,{children:he.jsx("div",{className:bs.loaderContainer,children:he.jsx(qo,{})})}):t||!e?he.jsx(tv,{children:he.jsx("div",{children:he.jsx(Bo,{error:!0,title:it.t("An error occurred while connecting to the CHAP server."),className:bs.mutedText,children:it.t("Are you sure you have configured your route correctly? See the console for more details.")})})}):he.jsx(tv,{children:he.jsxs("div",{className:bs.settingsContainer,children:[he.jsx(kW,{}),he.jsxs("div",{className:bs.info,children:[he.jsx("div",{className:bs.infoHeader,children:he.jsx("h3",{children:it.t("Server information")})}),he.jsxs("div",{className:bs.infoGrid,children:[e.chap_core_version&&he.jsxs(he.Fragment,{children:[he.jsx("span",{className:bs.label,children:it.t("CHAP Version")}),he.jsx("span",{className:bs.value,children:e.chap_core_version})]}),e.python_version&&he.jsxs(he.Fragment,{children:[he.jsx("span",{className:bs.label,children:it.t("Python Version")}),he.jsx("span",{className:bs.value,children:e.python_version})]}),e.os&&he.jsxs(he.Fragment,{children:[he.jsx("span",{className:bs.label,children:it.t("Operating System")}),he.jsx("span",{className:bs.value,children:e.os})]}),he.jsx("span",{className:bs.label,children:it.t("Status")}),he.jsx("span",{className:bs.value,style:{color:We.green600},children:it.t("Connected")})]})]})]})})},MW="1400px",PW={maxWidth:MW,marginLeft:"auto",marginRight:"auto",padding:"20px 10px 20px 10px"},IW=()=>{const i=Of(),{route:e}=Gf();return he.jsx("div",{style:PW,children:he.jsxs("div",{className:uG.settingsContainer,children:[he.jsx("div",{children:he.jsx(Gn,{small:!0,onClick:()=>i("/"),icon:he.jsx(vC,{}),children:it.t("Back to main page")})}),he.jsx(mW,{}),e&&he.jsx(AW,{route:e})]})})},DW=function(){return null},RW=EN([{path:"/",element:he.jsx(tN,{to:"/evaluate",replace:!0})},{path:"/evaluate",errorElement:he.jsx(ng,{}),element:he.jsx(N0,{component:he.jsx(XU,{})})},{path:"/predict",errorElement:he.jsx(ng,{}),element:he.jsx(N0,{component:he.jsx(oG,{})})},{path:"/datasets-test",errorElement:he.jsx(ng,{}),element:he.jsx(N0,{component:he.jsx(JV,{})})},{path:"/settings",errorElement:he.jsx(ng,{}),element:he.jsx(IW,{})}]),FW=()=>he.jsxs(he.Fragment,{children:[he.jsx(lG,{children:he.jsx(jN,{router:RW})}),he.jsx(DW,{})]});export{FW as default};
